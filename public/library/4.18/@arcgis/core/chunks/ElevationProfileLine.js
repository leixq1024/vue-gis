/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import"./object.js";import{b as t,d as i,i as o}from"./Logger.js";import{h as s}from"./metadata.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import{j as n}from"../core/scheduling.js";import"./ensureType.js";import{subclass as l}from"../core/accessorSupport/decorators/subclass.js";import{E as a}from"./Evented.js";import"../core/urlUtils.js";import{g as p}from"./resourceExtension.js";import u from"../geometry/Point.js";import v from"../Color.js";import{a as c,i as m,c as h}from"./unitUtils.js";import{init as f}from"../core/watchUtils.js";function d(e,t,o){return i(e,(e=>h(e*t,"meters",o)))}function g(e,t,o){return i(e,(e=>h(e*t,"meters",o)))}let y=class extends a.EventedAccessor{constructor(e){super(e),this.type=null,this.id=p(),this.title=null,this.color=new v("#000000"),this.visible=!0,this.result=null,this.effectiveUnits=null,this.hoveredChartPosition=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.showFill=!0,this._onChange=()=>{this.emit("change")}}get progress(){return o(this.result)&&this.visible?this.result.progress:0}get samples(){return function(e,o){if(t(e)||t(o))return null;const{samples:s,spatialReference:r}=e,{distance:n,elevation:l}=o,a=c(r),p=m(r),u=[];for(const e of s)e.processed&&u.push({x:e.x,y:e.y,z:e.z,distance:d(e.distance,a,n),elevation:i(e.z,(e=>g(e,p,l)))});return u}(this.result,this.effectiveUnits)}get statistics(){return function(e,i){if(t(e)||t(i)||t(e.statistics)||t(e.spatialReference))return null;const{distance:o,elevation:s}=i,{statistics:r,spatialReference:n}=e,l=c(n),a=m(n);return{maxDistance:d(r.maxDistance,l,o),minElevation:g(r.minElevation,a,s),maxElevation:g(r.maxElevation,a,s),avgElevation:g(r.avgElevation,a,s),elevationGain:g(r.elevationGain,a,s),elevationLoss:g(r.elevationLoss,a,s),maxPositiveSlope:r.maxPositiveSlope,maxNegativeSlope:r.maxNegativeSlope,avgPositiveSlope:r.avgPositiveSlope,avgNegativeSlope:r.avgNegativeSlope}}(this.result,this.effectiveUnits)}get hoveredPoint(){return i(this.hoveredChartPosition,(e=>this._getPoint(e)))}get minDemResolution(){return null}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,s([f(e,"effectiveUnits",(()=>{this.effectiveUnits=e.effectiveUnits})),f(e,"hoveredChartPosition",(()=>{this.hoveredChartPosition=e.hoveredChartPosition})),f(e,["input","minDemResolution","queue"],this._onChange)])}toggleVisibility(e){this.visible=void 0===e?!this.visible:e}_getPoint(e){const{samples:i,result:o}=this;if(t(i)||t(o))return null;const s=i.length;if(0===s)return null;const r=e*i[s-1].distance,{x:l,y:a,z:p}=n(i,r,(e=>e.distance));return t(p)?null:new u({x:l,y:a,z:p,spatialReference:o.spatialReference})}};e([r({nonNullable:!0})],y.prototype,"id",void 0),e([r({nonNullable:!0})],y.prototype,"title",void 0),e([r({type:v,nonNullable:!0})],y.prototype,"color",void 0),e([r({nonNullable:!0})],y.prototype,"visible",void 0),e([r({readOnly:!0})],y.prototype,"progress",null),e([r({readOnly:!0})],y.prototype,"samples",null),e([r({readOnly:!0})],y.prototype,"statistics",null),e([r()],y.prototype,"result",void 0),e([r()],y.prototype,"effectiveUnits",void 0),e([r()],y.prototype,"hoveredChartPosition",void 0),e([r({readOnly:!0})],y.prototype,"minDemResolution",null),e([r()],y.prototype,"_viewModel",void 0),y=e([l("esri.widgets.ElevationProfile.ElevationProfileLine")],y);var P=y;export{P as E,y as a};
