/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{resolve as t}from"../core/promiseUtils.js";import{g as n,a as e}from"../geometry/Polygon.js";function o(t,e=!1){let o=[];if(e){for(const n of t)if(n.geometry){const t=n.geometry;o.push.apply(o,t.points)}}else o=t.map((t=>t.geometry));const i=[],s=[];let l=1/0,r=-1/0,c=0,a=0,f=0,u=0;for(const t of o){if(!t)continue;e?(i[0]=t[0],i[1]=t[1]):(i[0]=t.x,i[1]=t.y);let m=1/0,g=-1/0;for(const c of o){if(c===t)continue;if(!c)continue;e?(s[0]=c[0],s[1]=c[1]):(s[0]=c.x,s[1]=c.y);const o=n(i,s);o>0&&(o<m&&(m=o),o<l&&(l=o),o>g&&(g=o),o>r&&(r=o))}m!==1/0&&(++f,c+=m),g!==-1/0&&(++u,a+=g)}return{minDistance:l!==1/0?l:null,maxDistance:r!==-1/0?r:null,avgMinDistance:f?c/f:null,avgMaxDistance:u?a/u:null}}function i(n){const{features:i}=n;let s=null;switch(n.geometryType){case"point":s=o(i);break;case"multipoint":s=o(i,!0);break;case"polyline":s=function(t){let n=0,o=0,i=1/0,s=-1/0;for(const l of t){const t=l.geometry;if(t){let l=0;for(const n of t.paths){const t=e(n);t>0&&(l+=t)}l>0&&(++n,o+=l,l<i&&(i=l),l>s&&(s=l))}}return{minLength:i!==1/0?i:null,maxLength:s!==-1/0?s:null,avgLength:n?o/n:null}}(i);break;case"polygon":s=function(t){let n=0,e=0,o=1/0,i=-1/0;for(const s of t){const t=s.geometry;if(t){const s=t.extent;if(s){const t=Math.sqrt(s.width*s.height);t>0&&(++n,e+=t,t<o&&(o=t),t>i&&(i=t))}}}return{minSize:o!==1/0?o:null,maxSize:i!==-1/0?i:null,avgSize:n?e/n:null}}(i)}return t(s)}export{i as s};
