/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import"./object.js";import"./Logger.js";import{property as t}from"../core/accessorSupport/decorators/property.js";import"./ensureType.js";import{subclass as o}from"../core/accessorSupport/decorators/subclass.js";import{E as i}from"./Evented.js";import"../core/urlUtils.js";import"./resourceExtension.js";import n from"../core/Handles.js";import{watch as s,pausable as r}from"../core/watchUtils.js";let a=class extends i.EventedAccessor{constructor(...e){super(...e),this._anchorHandles=new n,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([s(this,["screenLocationEnabled","location","view.size","view.stationary"],(()=>this._updateScreenPointAndHandle())),s(this,["view","view.ready"],(()=>this._wireUpView()))])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e="view";this._anchorHandles.remove(e),this._viewpointHandle=null;if(!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,o="3d"===t.type?"camera":"viewpoint",i=r(t,o,(()=>this._viewpointChange()));this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:o}=this;if(!e)return;t&&o?e.resume():e.pause()}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:o}=this,i=this.get("view.ready"),n=o&&e&&i?t.toScreen(e):null;this._set("screenLocation",n)}};e([t()],a.prototype,"location",void 0),e([t({readOnly:!0})],a.prototype,"screenLocation",void 0),e([t()],a.prototype,"screenLocationEnabled",void 0),e([t()],a.prototype,"view",void 0),a=e([o("esri.widgets.support.AnchorElementViewModel")],a);var c=a;export{c as A};
