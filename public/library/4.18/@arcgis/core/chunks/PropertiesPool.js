/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{R as e,a as s,i as r}from"../core/Accessor.js";class t{constructor(r,t){this.owner=t,this.properties={},this.afterDispatchHandle=null;for(const s in r){const t=r[s],o=new e(t,null,null,2,2);this.properties[s]={pool:o,acquired:[]}}this.afterDispatchHandle=s((()=>this.release()))}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const e in this.properties){const s=this.properties[e];for(const e of s.acquired)r(e)||s.pool.release(e);s.pool.destroy(),s.pool=null,s.acquired=null}this.properties=null,this.owner=null}get(e){const s=this.owner._get(e),r=this.properties[e];let t=r.pool.acquire();for(r.acquired.push(t);t===s;)r.acquired.push(t),t=r.pool.acquire();return t}release(){for(const e in this.properties){const s=this.properties[e];let t=0;for(const e of s.acquired)r(e)?s.acquired[t++]=e:s.pool.release(e);s.acquired.length=t}}}export{t as P};
