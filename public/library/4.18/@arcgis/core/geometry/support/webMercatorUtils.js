/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import"../../chunks/tslib.es6.js";import"../../chunks/ArrayPool.js";import"../../chunks/object.js";import"../../chunks/deprecate.js";import{clone as t}from"../../core/lang.js";import"../../config.js";import"../../chunks/Logger.js";import"../../chunks/string.js";import"../../chunks/metadata.js";import"../../core/accessorSupport/decorators/property.js";import"../../core/Accessor.js";import"../../chunks/PropertyOrigin.js";import"../../core/scheduling.js";import"../../core/promiseUtils.js";import"../../chunks/Message.js";import"../../core/Error.js";import"../../chunks/ensureType.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/JSONSupport.js";import"../../chunks/writer.js";import n,{e as s,i as r,a as e}from"../SpatialReference.js";import{e as i}from"../../chunks/Ellipsoid.js";function o(t){return 57.29577951308232*t}function p(t){return.017453292519943*t}function c(t){return null!=t.wkid||null!=t.wkt}const a=[0,0];function u(t,n,s,r,e){const i=t,o=e;if("x"in i&&"x"in o)[o.x,o.y]=n(i.x,i.y,a,r);else if("xmin"in i&&"xmin"in o)[o.xmin,o.ymin]=n(i.xmin,i.ymin,a,r),[o.xmax,o.ymax]=n(i.xmax,i.ymax,a,r);else if("paths"in i&&"paths"in o||"rings"in i&&"rings"in o){const t="paths"in i?i.paths:i.rings,s=[];let e;for(let i=0;i<t.length;i++){const o=t[i];e=[],s.push(e);for(let t=0;t<o.length;t++)e.push(n(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&e[t].push(o[t][2]),o[t].length>3&&e[t].push(o[t][3])}"paths"in o?o.paths=s:o.rings=s}else if("points"in i&&"points"in o){const t=i.points,s=[];for(let e=0;e<t.length;e++)s[e]=n(t[e][0],t[e][1],[0,0],r),t[e].length>2&&s[e].push(t[e][2]),t[e].length>3&&s[e].push(t[e][3]);o.points=s}return o.spatialReference=s,e}function h(t,n){const i=t&&(c(t)?t:t.spatialReference),o=n&&(c(n)?n:n.spatialReference);return(!t||!("type"in t)||"mesh"!==t.type)&&((!n||!("type"in n)||"mesh"!==n.type)&&(!(!i||!o)&&(!!s(o,i)||(r(o)&&e(i)||r(i)&&e(o)))))}function m(i,o){const p=i&&i.spatialReference,a=o&&(c(o)?o:o.spatialReference);return h(p,a)?s(p,a)?t(i):r(a)?u(i,l,n.WebMercator,!1,t(i)):e(a)?u(i,f,n.WGS84,!1,t(i)):null:null}function l(t,n,s=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const r=p(n);return s[0]=p(t)*i.radius,s[1]=i.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),s}function f(t,n,s=[0,0],r=!1){const e=o(t/i.radius);return s[0]=r?e:e-360*Math.floor((e+180)/360),s[1]=o(Math.PI/2-2*Math.atan(Math.exp(-1*n/i.radius))),s}function j(s,r=!1,e=t(s)){return u(s,l,n.WebMercator,r,e)}function g(s,r=!1,e=t(s)){return u(s,f,n.WGS84,r,e)}export{h as canProject,j as geographicToWebMercator,l as lngLatToXY,m as project,g as webMercatorToGeographic,f as xyToLngLat};
