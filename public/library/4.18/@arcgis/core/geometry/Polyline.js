/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import"../chunks/ArrayPool.js";import"../chunks/object.js";import"../chunks/deprecate.js";import{clone as e}from"../core/lang.js";import"../config.js";import"../chunks/Logger.js";import"../chunks/string.js";import"../chunks/metadata.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import"../core/Accessor.js";import"../chunks/PropertyOrigin.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../chunks/Message.js";import"../core/Error.js";import"../chunks/ensureType.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/JSONSupport.js";import"../core/urlUtils.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/reader.js";import{w as i}from"../chunks/writer.js";import"../chunks/resourceExtension.js";import o from"./SpatialReference.js";import a from"./Geometry.js";import n from"./Point.js";import"../chunks/Ellipsoid.js";import"./support/webMercatorUtils.js";import h from"./Extent.js";import{u as p}from"../chunks/zmUtils.js";import{g as c}from"../chunks/extentUtils.js";var l;let u=l=class extends a{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let s,r,i=null,a=null;return t&&!Array.isArray(t)?(i=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),s=t.hasZ,r=t.hasM):i=t,i=i||[],e=e||o.WGS84,i.length&&i[0]&&null!=i[0][0]&&"number"==typeof i[0][0]&&(i=[i]),a=i[0]&&i[0][0],a&&(void 0===s&&void 0===r?(s=a.length>2,r=!1):void 0===s?s=!r&&a.length>3:void 0===r&&(r=!s&&a.length>3)),{paths:i,spatialReference:e,hasZ:s,hasM:r}}get extent(){const{spatialReference:t}=this,e=c(this);if(!e)return null;const s=new h(e);return s.spatialReference=t,s}writePaths(t,s){s.paths=e(this.paths)}addPath(t){if(!t)return;this.clearCache();const e=this.paths,s=e.length;if(function(t){return!Array.isArray(t[0])}(t)){const r=[];for(let e=0,s=t.length;e<s;e++)r[e]=t[e].toArray();e[s]=r}else e[s]=t.concat();return this}clone(){const t=new l;return t.spatialReference=this.spatialReference,t.paths=e(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const s=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new n(s[0],s[1],s[2],void 0,this.spatialReference):i&&!r?new n(s[0],s[1],void 0,s[2],this.spatialReference):r&&i?new n(s[0],s[1],s[2],s[3],this.spatialReference):new n(s[0],s[1],this.spatialReference)}insertPoint(t,e,s){return this._validateInputs(t,e,!0)?(this.clearCache(),p(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t].splice(e,0,s),this):this}removePath(t){if(!this._validateInputs(t,null))return null;this.clearCache();const e=this.paths.splice(t,1)[0],s=this.spatialReference;return e.map((t=>new n(t,s)))}removePoint(t,e){return this._validateInputs(t,e)?(this.clearCache(),new n(this.paths[t].splice(e,1)[0],this.spatialReference)):null}setPoint(t,e,s){return this._validateInputs(t,e)?(this.clearCache(),p(this,s),Array.isArray(s)||(s=s.toArray()),this.paths[t][e]=s,this):this}_validateInputs(t,e,s=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=e){const r=this.paths[t];if(s&&(e<0||e>r.length))return!1;if(!s&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write(null,t)}};t([s({dependsOn:["hasM","hasZ","paths"],autoTracked:!1})],u.prototype,"cache",void 0),t([s({readOnly:!0,dependsOn:["cache"],autoTracked:!1})],u.prototype,"extent",null),t([s({type:[[[Number]]],json:{write:{isRequired:!0}}})],u.prototype,"paths",void 0),t([i("paths")],u.prototype,"writePaths",null),u=l=t([r("esri.geometry.Polyline")],u),u.prototype.toJSON.isDefaultToJSON=!0;var m=u;export default m;
