/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
import"../../chunks/tslib.es6.js";import"../../chunks/ArrayPool.js";import"../../chunks/object.js";import"../../chunks/deprecate.js";import"../../core/lang.js";import"../../config.js";import"../../chunks/Logger.js";import"../../chunks/string.js";import"../../chunks/metadata.js";import"../../core/accessorSupport/decorators/property.js";import"../../core/Accessor.js";import"../../chunks/PropertyOrigin.js";import"../../core/scheduling.js";import"../../core/promiseUtils.js";import"../../chunks/Message.js";import"../../core/Error.js";import"../../chunks/ensureType.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/Evented.js";import"../../core/Collection.js";import"../../chunks/collectionUtils.js";import"../../chunks/JSONSupport.js";import"../../chunks/Promise.js";import"../../chunks/Loadable.js";import"../../chunks/asyncUtils.js";import"../../chunks/loadAll.js";import"../../core/urlUtils.js";import"../../core/accessorSupport/decorators/cast.js";import"../../chunks/jsonMap.js";import"../../chunks/reader.js";import"../../chunks/writer.js";import"../../chunks/resourceExtension.js";import"../../geometry/SpatialReference.js";import"../../chunks/locale.js";import"../../chunks/number.js";import"../../intl.js";import"../../kernel.js";import"../../request.js";import"../../chunks/assets.js";import"../../geometry/Geometry.js";import"../../geometry/Point.js";import"../../chunks/Ellipsoid.js";import"../../geometry/support/webMercatorUtils.js";import"../../geometry/Extent.js";import"../../portal/PortalQueryParams.js";import"../../portal/PortalQueryResult.js";import"../../portal/PortalFolder.js";import"../../portal/PortalGroup.js";import"../../portal/PortalUser.js";import"../../portal/Portal.js";import"../../portal/PortalItemResource.js";import"../../portal/PortalRating.js";import"../../portal/PortalItem.js";import"../../Basemap.js";import"../../chunks/writeUtils.js";import"../../chunks/mathUtils2.js";import"../../chunks/colorUtils.js";import e from"../../Color.js";import"../../chunks/zmUtils.js";import"../../geometry/Multipoint.js";import"../../geometry/Polygon.js";import"../../chunks/extentUtils.js";import"../../geometry/Polyline.js";import"../../chunks/typeUtils.js";import"../../geometry/support/jsonUtils.js";import"../../geometry.js";import"../../chunks/arcadeOnDemand.js";import"../../chunks/screenUtils.js";import"../../chunks/basemapUtils.js";import"../../chunks/utils5.js";import{c as r}from"../../chunks/colors2.js";import{c as o,g as s,a,f as t,b as i}from"../../chunks/symbologyUtils.js";import{t as n,h as l}from"../../chunks/utils9.js";const p={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},m={lightBasemaps:{primary:"relationship-blue-orange-brown",secondary:["relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green","relationship-blue-red-pink","relationship-blue-green-brightgreen","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal"]},darkBasemaps:{primary:"relationship-blue-green-brightgreen",secondary:["relationship-blue-red-pink","relationship-blue-orange-lavender","relationship-pink-purple-peach","relationship-purple-mustard-eggshell","relationship-blue-brick-green","relationship-orange-purple-lavender","relationship-brown-purple-lilac","relationship-teal-yellow-lightteal","relationship-blue-orange-brown","relationship-brewer-yellow-blue-black","relationship-brewer-pink-blue-purple","relationship-purple-green-blue","relationship-blue-green-purple","relationship-blue-orange-green","relationship-mustard-blue-wine","relationship-pink-blue-purple","relationship-olive-blue-green","relationship-yellow-cyan-blue","relationship-blue-pink-purple","relationship-purple-green-wine","relationship-blue-peach-purple","relationship-mint-mustard-green","relationship-purple-mustard-darkpurple","relationship-blue-orange-purple","relationship-pink-periwinkle-violet","relationship-blue-tan-green"]}},c=o({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",schemes:{point:{light:{common:{noDataColor:"#aaaaaa",outline:p.light,size:"8px"},primary:m.lightBasemaps.primary,secondary:m.lightBasemaps.secondary},dark:{common:{noDataColor:"#aaaaaa",outline:p.darker,size:"8px"},primary:m.darkBasemaps.primary,secondary:m.darkBasemaps.secondary}},polyline:{light:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:m.lightBasemaps.primary,secondary:m.lightBasemaps.secondary},dark:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:m.darkBasemaps.primary,secondary:m.darkBasemaps.secondary}},polygon:{light:{common:{noDataColor:"#aaaaaa",outline:p.light,fillOpacity:.8},primary:m.lightBasemaps.primary,secondary:m.lightBasemaps.secondary},dark:{common:{noDataColor:"#aaaaaa",outline:p.dark,fillOpacity:.8},primary:m.darkBasemaps.primary,secondary:m.darkBasemaps.secondary}}}}}});function u(e){return s(c,e)}function h(e){const r=a({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme,theme:c.get("default")});if(!r)return;const{schemesInfo:o,basemapId:s,basemapTheme:t}=r,i={...e,basemap:s};return{primaryScheme:D(i,o.primary,o.common),secondarySchemes:o.secondary.map((e=>D(i,e,o.common))).filter(Boolean),basemapId:s,basemapTheme:t}}function d(e){return t(e.name,h(e))}function g(e){return i(e.includedTags,e.excludedTags,h(e))}function y(r){if(!r)return;const o={...r};return o.colorsForClassBreaks=o.colorsForClassBreaks.map((r=>({numClasses:r.numClasses,colors:r.colors.map((r=>r.map((r=>new e(r)))))}))),o.noDataColor&&(o.noDataColor=new e(o.noDataColor)),"outline"in o&&o.outline&&(o.outline={color:o.outline.color&&new e(o.outline.color),width:o.outline.width}),o}function k(e,r){let o=[];const s=(r||"HH").split(""),a=s[0],t=s[1];"L"===a&&e.reverse();const i="H"===t;return e.forEach((e=>{i&&e.reverse(),o=o.concat(e)})),o}function j(r,o,s){let a;return r.colorsForClassBreaks.some((e=>(e.numClasses===o&&(a=e.colors),!!a))),a=a.map((r=>r.map((r=>new e(r))))),a?k(a,s):null}function b(e,r){const o=r?e:y(e);return o.colorsForClassBreaks.forEach((e=>{const r=e.colors.reverse(),o=[];for(let s=0;s<e.numClasses;s++){const e=[];r.forEach((r=>{e.push(r[s])})),o.push(e)}e.colors=o})),o}function w(e){const r=e.theme||"default",o=e.geometryType,s=e.colors,a=e.numClasses,t=c.get(r);if(!t)return;const i=t.supportedBasemaps,n=[];return i.forEach((e=>{const t=h({theme:r,basemap:e,geometryType:o});if(t){let e=B(t.primaryScheme,s,a);e&&n.push(e),t.secondarySchemes.forEach((r=>{e=B(r,s,a),e&&n.push(e)}))}})),n}function f(e,r,o,s){let a;const t=j(e,o,s);if(t){1===l(r,t)&&(a=e)}return a}function C(e,r,o,s){let a,t=1;do{a=f(e,r,o,s),a||(e=b(e),t++)}while(!a&&t<=4);return a}function B(e,r,o){return C(e,r,o,"HH")||C(e,r,o,"HL")||C(e,r,o,"LH")||C(e,r,o,"LL")}function D(o,s,a){const t="mesh"!==o.geometryType&&o.worldScale?o.view:null,i=r[s],l=o.theme||"default";if(!i)return;const p=l+"/"+o.basemap+"/"+s,m=[];for(const e in i)if("stops"!==e&&"name"!==e&&"tags"!==e){const r=+e,o=i[e];m.push({numClasses:r,colors:o})}switch(o.geometryType){case"point":case"multipoint":{const r=a;return function(r,o){return{id:r.id,name:r.name,tags:[...r.tags],colorsForClassBreaks:F(r.colorsForClassBreaks),noDataColor:new e(r.noDataColor),outline:{color:new e(r.outline.color),width:r.outline.width},size:o?n(r.size,o):r.size,opacity:r.opacity}}({id:p,name:i.name,tags:i.tags,colorsForClassBreaks:m,noDataColor:r.noDataColor,opacity:1,outline:r.outline,size:r.size},t)}case"polyline":{const r=a;return function(r,o){return{id:r.id,name:r.name,tags:[...r.tags],colorsForClassBreaks:F(r.colorsForClassBreaks),noDataColor:new e(r.noDataColor),opacity:r.opacity,width:o?n(r.width,o):r.width}}({id:p,name:i.name,tags:i.tags,colorsForClassBreaks:m,noDataColor:r.noDataColor,opacity:1,width:r.width},t)}case"polygon":{const r=a,o={id:p,name:i.name,tags:i.tags,colorsForClassBreaks:m,noDataColor:r.noDataColor,opacity:r.fillOpacity,outline:r.outline};return{id:(c=o).id,name:c.name,tags:[...c.tags],colorsForClassBreaks:F(c.colorsForClassBreaks),noDataColor:new e(c.noDataColor),outline:{color:new e(c.outline.color),width:c.outline.width},opacity:c.opacity}}case"mesh":{const r=a;return function(r){return{id:r.id,name:r.name,tags:[...r.tags],colorsForClassBreaks:F(r.colorsForClassBreaks),noDataColor:new e(r.noDataColor),opacity:r.opacity}}({id:p,name:i.name,tags:i.tags,colorsForClassBreaks:m,noDataColor:r.noDataColor,opacity:r.fillOpacity})}}var c}function F(r){return r.map((r=>({numClasses:r.numClasses,colors:r.colors.map((r=>r.map((r=>new e(r)))))})))}export{y as cloneScheme,k as flatten2DArray,b as flipColors,j as getColors,w as getMatchingSchemes,d as getSchemeByName,h as getSchemes,g as getSchemesByTag,u as getThemes};
