//>>built
define("dojo/_base/array dojo/_base/config dojo/_base/connect dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom-class dojo/dom-construct dojo/dom-style ./sniff".split(" "),function(x,E,y,z,A,B,h,l,r,C){var D=A.getObject("dojox.mobile",!0);return new function(){this.setupSpriteIcon=function(b,d){if(b&&d){d=x.map(d.split(/[ ,]/),function(c){return c-0});var a=d[0],e=d[1];r.set(b,{position:"absolute",clip:"rect("+a+"px "+(d[1]+d[2])+"px "+(d[0]+d[3])+"px "+e+"px)",top:(b.parentNode?r.get(b,
"top"):0)-a+"px",left:-e+"px"});h.add(b,"mblSpriteIcon")}};this.createDomButton=function(b,d,a){if(!this._domButtons)if(C("webkit")){var e=function(f,n){if(!f){n={};var p=B.doc.styleSheets;for(f=0;f<p.length;f++)p[f]&&e(p[f],n);return n}p=f.cssRules||[];for(f=0;f<p.length;f++){var m=p[f];if(m.href&&m.styleSheet)e(m.styleSheet,n);else if(m.selectorText){var v=m.selectorText.split(/,/);for(m=0;m<v.length;m++){var q=v[m],w=q.split(/>/).length-1;q.match(/(mblDomButton\w+)/)&&(q=RegExp.$1,!n[q]||w>n[q])&&
(n[q]=w)}}}return n};this._domButtons=e()}else this._domButtons={};var c=b.className,g=a||b;if(c.match(/(mblDomButton\w+)/)&&-1===c.indexOf("/")){var k=RegExp.$1,t=4;c.match(/(mblDomButton\w+_(\d+))/)?t=RegExp.$2-0:void 0!==this._domButtons[k]&&(t=this._domButtons[k]);c=0;for(var u=g;c<t;c++)u=u.firstChild||l.create("div",null,u);a&&(setTimeout(function(){h.remove(b,k)},0),h.add(a,k))}else if(-1!==c.indexOf("."))l.create("img",{src:c},g);else return null;h.add(g,"mblDomButton");d&&r.set(g,d);return g};
this.createIcon=function(b,d,a,e,c,g,k){e=e||"";b&&0===b.indexOf("mblDomButton")?(a?a.className.match(/(mblDomButton\w+)/)&&h.remove(a,RegExp.$1):a=l.create("div",null,g||c,k),a.title=e,h.add(a,b),this.createDomButton(a)):b&&"none"!==b&&(a&&"IMG"===a.nodeName||(a=l.create("img",{alt:e},g||c,k)),a.src=(b||"").replace("${theme}",D.currentTheme),this.setupSpriteIcon(a,d),d&&c&&(b=d.split(/[ ,]/),r.set(c,{position:"relative",width:b[2]+"px",height:b[3]+"px"}),h.add(c,"mblSpriteIconParent")),y.connect(a,
"ondragstart",z,"stop"));return a};this.iconWrapper=!1;this.setIcon=function(b,d,a,e,c,g,k){if(!c||!b&&!a)return null;if(b&&"none"!==b)return this.iconWrapper||0===b.indexOf("mblDomButton")||d?(a&&"IMG"===a.tagName&&(l.destroy(a),a=null),a&&l.empty(a),a||(a=l.create("div",null,g||c,k)),this.createIcon(b,d,null,null,a),e&&(a.title=e)):(a&&"DIV"===a.tagName&&(l.destroy(a),a=null),a=this.createIcon(b,null,a,e,c,g,k),h.add(a,"mblImageIcon")),h.remove(c,"mblNoIcon"),a;l.destroy(a);h.add(c,"mblNoIcon");
return null}}});