// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports"],function(d){let g=!1,h=function(){function e(c,a){this._observers=c;this._observer=a}e.prototype.remove=function(){this._observers.delete(this._observer)};return e}(),l=function(){function e(a,b){this.propertyName=a;this.metadata=b;this.flags=1;this._accessedProperties=this._observers=null;this._observationHandles=[];this.flags=1|(b.nonNullable?8:0)|(b.hasOwnProperty("value")?16:0)|(void 0===b.get?32:0)|(void 0===b.dependsOn?64:0)}var c=e.prototype;c.destroy=function(){this._accessedProperties&&
(this._accessedProperties.clear(),this._accessedProperties=null);this._observers&&(this._observers.clear(),this._observers=null);this._clearObservationHandles()};c.onPropertyAccessed=function(a){a!==this&&(null===this._accessedProperties&&(this._accessedProperties=new Set),this._accessedProperties.add(a))};c.onTrackingEnd=function(){this._clearObservationHandles();this.flags|=32;const a=this._accessedProperties;if(null!==a){var b=this._observationHandles;for(const f of a)b.push(f.observe(this));a.clear()}};
c.observe=function(a){null===this._observers&&(this._observers=new Set);return new h(this._observers.add(a),a)};c.notify=function(){~this.flags&2&&(this.flags|=1);this._notifyObservers()};c.invalidate=function(){this.notify()};c.commit=function(){this.flags&=-2;this._notifyObservers()};c._notifyObservers=function(){if(null!==this._observers){var a=this._observers.size,b=Array(a);--a;for(var f of this._observers)b[a--]=f;for(f=!g;b.length;)if(a=b.pop(),void 0!==a.flags){if(~a.flags&2&&(a.flags|=1),
null!==a._observers)for(const k of a._observers)b.push(k)}else f&&a.notify()}};c._clearObservationHandles=function(){for(const a of this._observationHandles)a.remove();this._observationHandles.length=0};return e}();d.Property=l;d.isInvalidating=function(){return g};d.startInvalidating=function(){g=!0};d.stopInvalidating=function(){g=!1};Object.defineProperty(d,"__esModule",{value:!0})});