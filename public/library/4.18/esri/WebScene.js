// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(t,c){t.updateOrigins=function(m){m&&m.writtenProperties&&m.writtenProperties.forEach(q=>{const J=q.target;q.newOrigin&&q.oldOrigin!==q.newOrigin&&c.isMultiOriginJSONMixin(J)&&J.updateOrigin(q.propName,q.newOrigin)})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(t){t.isMultiOriginJSONMixin=
function(c){return c&&"getAtOrigin"in c&&"originOf"in c};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(t){const c={width:600,height:400};t.getOptimalThumbnailSize=function(m,q){q=q||c;let {width:J,height:M}=q;q=J/M;1.5>q?M=J/1.5:1.5<q&&(J=1.5*M);J>m.width&&(M*=m.width/J,J=m.width);M>m.height&&(J*=m.height/M,M=m.height);return{width:Math.round(J),height:Math.round(M)}};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),function(t,c,m,q,J,M,Q,S,H,R,W,X,
h,p,y,I,r,u,C,E,G,F,N){function T(){return!!na&&E.isLoaded()}function Z(f){q.isNone(ka)&&(ka=M.all([E.load(),(new Promise(function(k,l){t(["../chunks/geometryEngineBase"],k,l)})).then(function(k){return k.geometryEngineBase}),new Promise(function(k,l){t(["./geometryAdapters/hydrated"],k,l)})]));return ka.then(([,k,{hydratedAdapter:l}])=>{M.throwIfAborted(f);ia=l;na=k.default;na._enableProjection(E.pe)})}function ba(f,k,l,x,P=null){if(q.isNone(l)||q.isNone(x))return k;if(Ca(l,x,P))return k.map(U=>
Ja(U,l,x));if(q.isNone(P)){const U=N.cacheKey(l,x);void 0!==la[U]?P=la[U]:(P=xa(l,x,null),q.isNone(P)&&(P=new N),la[U]=P)}if(q.isNone(na))throw new ma;return na._project(f,k,l,x,P)}function xa(f,k,l=null){if(q.isNone(na))throw new ma;if(q.isNone(f)||q.isNone(k))return null;f=na._getTransformation(ia,f,k,l,null==l?void 0:l.spatialReference);return null!==f?N.fromGE(f):null}function Ca(f,k,l){return l?!1:Q.equals(f,k)?!0:Q.isValid(f)&&Q.isValid(k)&&!!V(f,k,Ba)}function Ja(f,k,l){if(!f)return f;if("x"in
f){var x=new H;return Ka(f,k,x,l)?x:null}return"xmin"in f?(x=new R,La(f,k,x,l)?x:null):"rings"in f?(x=new X,Ga(f,k,x,l)?x:null):"paths"in f?(x=new h,Ma(f,k,x,l)?x:null):"points"in f?(x=new W,Na(f,k,x,l)?x:null):null}function Ka(f,k,l,x,P=0){oa[0]=f.x;oa[1]=f.y;const U=f.z;oa[2]=void 0!==U?U:P;if(!za(oa,k,0,oa,x,0,1))return!1;l.x=oa[0];l.y=oa[1];l.spatialReference=x;void 0===U?(l.z=void 0,l.hasZ=!1):(l.z=oa[2],l.hasZ=!0);void 0===f.m?(l.m=void 0,l.hasM=!1):(l.m=f.m,l.hasM=!0);return!0}function Na(f,
k,l,x,P=0){const {points:U,hasZ:fa,hasM:ja}=f;f=[];const va=U.length,ua=[];for(var sa of U)ua.push(sa[0],sa[1],fa?sa[2]:P);if(!za(ua,k,0,ua,x,0,va))return!1;for(k=0;k<va;++k){P=3*k;sa=ua[P];const Da=ua[P+1];fa&&ja?f.push([sa,Da,ua[P+2],U[k][3]]):fa?f.push([sa,Da,ua[P+2]]):ja?f.push([sa,Da,U[k][2]]):f.push([sa,Da])}l.points=f;l.spatialReference=x;l.hasZ=fa;l.hasM=ja;return!0}function Ma(f,k,l,x,P=0){const {paths:U,hasZ:fa,hasM:ja}=f;f=[];if(!Ra(U,fa,ja,k,f,x,P))return!1;l.paths=f;l.spatialReference=
x;l.hasZ=fa;l.hasM=ja;return!0}function Ga(f,k,l,x,P=0){const {rings:U,hasZ:fa,hasM:ja}=f;f=[];if(!Ra(U,fa,ja,k,f,x,P))return!1;l.rings=f;l.spatialReference=x;l.hasZ=fa;l.hasM=ja;return!0}function La(f,k,l,x,P=0){const {xmin:U,ymin:fa,xmax:ja,ymax:va,hasZ:ua,hasM:sa}=f;if(!Ia(U,fa,ua?f.zmin:P,k,oa,x))return!1;l.xmin=oa[0];l.ymin=oa[1];ua&&(l.zmin=oa[2]);if(!Ia(ja,va,ua?f.zmax:P,k,oa,x))return!1;l.xmax=oa[0];l.ymax=oa[1];ua&&(l.zmax=oa[2]);sa&&(l.mmin=f.mmin,l.mmax=f.mmax);l.spatialReference=x;return!0}
function Ia(f,k,l,x,P,U){da[0]=f;da[1]=k;da[2]=l;return za(da,x,0,P,U,0,1)}function Oa(f,k,l,x){if(q.isNone(k)||q.isNone(x)||2>f.length)return!1;2===f.length&&(da[0]=f[0],da[1]=f[1],da[2]=0,f=da);return za(f,k,0,l,x,0,1)}function Sa(f,k,l){q.isNone(k)?f=!1:(k=qa(k,Aa),k=wa[k][6],q.isNone(k)?f=!1:(k(f,0,da,0),l!==da&&(l[0]=da[0],l[1]=da[1],2<l.length&&(l[2]=da[2])),f=!0));return f}function za(f,k,l,x,P,U,fa=1){k=V(k,P,Ba);if(q.isNone(k))return!1;if(k===ha){if(f===x&&l===U)return!0;fa=l+3*fa;for(let ja=
l,va=U;ja<fa;ja++,va++)x[va]=f[ja];return!0}fa=l+3*fa;for(let ja=l,va=U;ja<fa;ja+=3,va+=3)k(f,ja,x,va);return!0}function Ra(f,k,l,x,P,U,fa=0){const ja=[];for(const va of f)for(const ua of va)ja.push(ua[0],ua[1],k?ua[2]:fa);if(!za(ja,x,0,ja,U,0,ja.length/3))return!1;x=0;P.length=0;for(const va of f){f=[];for(const ua of va)k&&l?f.push([ja[x++],ja[x++],ja[x++],ua[3]]):k?f.push([ja[x++],ja[x++],ja[x++]]):(l?f.push([ja[x++],ja[x++],ua[2]]):f.push([ja[x++],ja[x++]]),x++);P.push(f)}return!0}function pa(f,
k,l){const x=Math.sin(k);k=Math.cos(k);const P=Math.sin(f);f=Math.cos(f);l[0]=-x;l[4]=-P*k;l[8]=f*k;l[12]=0;l[1]=k;l[5]=-P*x;l[9]=f*x;l[13]=0;l[2]=0;l[6]=f;l[10]=P;l[14]=0;l[3]=0;l[7]=0;l[11]=0;l[15]=1;return l}function qa(f,k){if(k.spatialReference===f)return k.spatialReferenceId;k.spatialReference=f;"metersPerUnit"in k&&(k.metersPerUnit=u.getMetersPerUnitForSR(f,1));return f.wkt===r.SphericalECEFSpatialReference.wkt?k.spatialReferenceId=1:Q.isWGS84(f)?k.spatialReferenceId=2:Q.isWebMercator(f)?k.spatialReferenceId=
3:f.wkt===r.WGS84ECEFSpatialReference.wkt?k.spatialReferenceId=4:4490===f.wkid?k.spatialReferenceId=5:f.wkt===r.SphericalPCPFMars.wkt?k.spatialReferenceId=7:f.wkt===r.SphericalPCPFMoon.wkt?k.spatialReferenceId=9:Q.isMars(f)?k.spatialReferenceId=8:Q.isMoon(f)?k.spatialReferenceId=10:k.spatialReferenceId=0}function ha(f,k,l,x){f!==l&&(l[x++]=f[k++],l[x++]=f[k++],l[x]=f[k])}function L(f,k,l,x){l[x++]=ya*(f[k++]/S.earth.radius);l[x++]=ya*(Math.PI/2-2*Math.atan(Math.exp(-1*f[k++]/S.earth.radius)));l[x]=
f[k]}function aa(f,k,l,x){L(f,k,l,x);n(l,x,l,x)}function ea(f,k,l,x){L(f,k,l,x);A(l,x,l,x)}function ta(f,k,l,x){var P=.4999999*Math.PI;P=p.clamp(ra*f[k+1],-P,P);P=Math.sin(P);l[x++]=ra*f[k]*S.earth.radius;l[x++]=S.earth.halfSemiMajorAxis*Math.log((1+P)/(1-P));l[x]=f[k+2]}function a(f,k,l,x,P){P+=f[k+2];const U=ra*f[k+1];f=ra*f[k];k=Math.cos(U);l[x++]=Math.cos(f)*k*P;l[x++]=Math.sin(f)*k*P;l[x]=Math.sin(U)*P}function b(f,k,l,x){a(f,k,l,x,S.moon.radius)}function g(f,k,l,x){a(f,k,l,x,S.mars.radius)}
function n(f,k,l,x){a(f,k,l,x,S.earth.radius)}function z(f,k,l,x,P){var U=f[k];const fa=f[k+1];k=f[k+2];f=Math.sqrt(U*U+fa*fa+k*k);k=p.asinClamped(k/(0===f?1:f));U=Math.atan2(fa,U);l[x++]=ya*U;l[x++]=ya*k;l[x]=f-P}function B(f,k,l,x){z(f,k,l,x,S.moon.radius)}function w(f,k,l,x){z(f,k,l,x,S.mars.radius)}function d(f,k,l,x){z(f,k,l,x,S.earth.radius)}function e(f,k,l,x){d(f,k,l,x);ta(l,x,l,x)}function v(f,k,l,x){d(f,k,l,x);A(l,x,l,x)}function A(f,k,l,x){{var P=S.earth;const fa=ra*f[k];var U=ra*f[k+1];
f=f[k+2];k=Math.sin(U);U=Math.cos(U);const ja=P.radius/Math.sqrt(1-P.eccentricitySquared*k*k);l[x++]=(ja+f)*U*Math.cos(fa);l[x++]=(ja+f)*U*Math.sin(fa);l[x++]=(ja*(1-P.eccentricitySquared)+f)*k}}function D(f,k,l,x){var P=F.earthEllipsoidConstants,U=f[k],fa=f[k+1];f=f[k+2];let ja;k=Math.abs(f);var va=U*U+fa*fa;var ua=Math.sqrt(va);var sa=va+f*f;var Da=Math.sqrt(sa);U=Math.atan2(fa,U);var Pa=f*f/sa;sa=va/sa;fa=P.a2/Da;va=P.a3-P.a4/Da;.3<sa?(Pa=k/Da*(1+sa*(P.a1+fa+Pa*va)/Da),Da=Math.asin(Pa),fa=Pa*Pa,
sa=Math.sqrt(1-fa)):(sa=ua/Da*(1-Pa*(P.a5-fa-sa*va)/Da),Da=Math.acos(sa),fa=1-sa*sa,Pa=Math.sqrt(fa));ja=1-S.earth.eccentricitySquared*fa;fa=S.earth.radius/Math.sqrt(ja);P=P.a6*fa;fa=ua-fa*sa;va=k-P*Pa;k=sa*fa+Pa*va;ua=sa*va-Pa*fa;P=ua/(P/ja+k);Da+=P;0>f&&(Da=-Da);l[x++]=ya*U;l[x++]=ya*Da;l[x]=k+ua*P/2}function O(f,k,l,x){D(f,k,l,x);n(l,x,l,x)}function K(f,k,l,x){D(f,k,l,x);ta(l,x,l,x)}function V(f,k,l=ca()){return q.isNone(f)||q.isNone(k)?null:Y(f,k,l).projector}function Y(f,k,l){if(q.isNone(f)||
q.isNone(k)||l.source.spatialReference===f&&l.dest.spatialReference===k)return l;const x=qa(f,l.source),P=qa(k,l.dest);0===x&&0===P?Q.equals(f,k)?l.projector=ha:l.projector=null:l.projector=wa[x][P];return l}function ca(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ha}}let na=null,ia=null,ka=null,la={},ma=function(f){function k(){return f.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||
this}m._inheritsLoose(k,f);return k}(J);(function(f){f.x2lon=function(k){return k/S.earth.radius};f.y2lat=function(k){return Math.PI/2-2*Math.atan(Math.exp(-1*k/S.earth.radius))};f.lon2x=function(k){return k*S.earth.radius};f.lat2y=function(k){k=Math.sin(k);return S.earth.radius/2*Math.log((1+k)/(1-k))}})(c.webMercator||(c.webMercator={}));const wa={[2]:{[5]:null,[8]:null,[10]:null,[6]:ha,[1]:n,[7]:null,[9]:null,[0]:null,[3]:ta,[2]:ha,[4]:A},[5]:{[5]:ha,[8]:null,[10]:null,[6]:ha,[1]:n,[7]:null,[9]:null,
[0]:null,[3]:null,[2]:null,[4]:A},[8]:{[5]:null,[8]:ha,[10]:null,[6]:null,[1]:null,[7]:g,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ha,[6]:null,[1]:null,[7]:null,[9]:b,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:L,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:L,[4]:ea},[4]:{[5]:D,[8]:null,[10]:null,[6]:D,[1]:O,[7]:null,[9]:null,[0]:null,[3]:K,[2]:D,[4]:ha},[1]:{[5]:d,[8]:null,[10]:null,[6]:d,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:e,[2]:d,
[4]:v},[7]:{[5]:null,[8]:w,[10]:null,[6]:null,[1]:null,[7]:ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:B,[6]:null,[1]:null,[7]:null,[9]:ha,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ha,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:ha,[1]:n,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ha,[4]:A}},Aa={spatialReference:null,spatialReferenceId:0},Ea={spatialReference:null,spatialReferenceId:0},
Ba=ca(),Fa=ca(),ra=p.deg2rad(1),ya=p.rad2deg(1),da=y.create(),Ha=y.create(),Qa=y.create(),oa=y.create(),Ta=y.create();c.canProjectToWGS84ComparableLonLat=function(f){if(q.isNone(f))return!1;f=qa(f,Aa);return!!wa[f][6]};c.canProjectWithoutEngine=Ca;c.computeLatLonToENURotation=pa;c.computeLinearTransformation=function(f,k,l,x){if(q.isNone(f)||q.isNone(x))return!1;var P=qa(f,Aa),U=qa(x,Ea);if(P===U&&1!==U&&(0!==P||Q.equals(f,x)))return C.identity(l),C.translate(l,l,k),!0;if(1===U||7===U||9===U){x=f=
0;if(1===U){P=wa[P][6];U=wa[6][U];if(q.isNone(P)||q.isNone(U))return!1;P(k,0,Ha,0);U(Ha,0,Qa,0);f=ra*Ha[0];x=ra*Ha[1]}else if(7===U||9===U){U=wa[P][U];if(q.isNone(U))return!1;U(k,0,Qa,0);f=ra*k[0];x=ra*k[1]}pa(x,f,l);l[12]=Qa[0];l[13]=Qa[1];l[14]=Qa[2];return!0}if(3===U&&(2===P||1===P)){U=wa[P][6];if(q.isNone(U))return!1;U(k,0,Ha,0);k=ra*Ha[1];ta(Ha,0,Qa,0);C.identity(l);C.translate(l,l,Qa);k=1/Math.cos(k);C.scale(l,l,[k,k,1]);return!0}return!1};c.getProjectorName=function(f,k){switch(V(f,k,Ba)){case ha:return"copy3";
case n:return"wgs84ToSphericalECEF";case ta:return"wgs84ToWebMercator";case A:return"wgs84ToWGS84ECEF";case L:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";case ea:return"webMercatorToWGS84ECEF";case D:return"wgs84ECEFToWGS84";case O:return"wgs84ECEFToSphericalECEF";case K:return"wgs84ECEFToWebMercator";case d:return"sphericalECEFToWGS84";case e:return"sphericalECEFToWebMercator";case w:return"sphericalECEFToMars2000";case B:return"sphericalECEFToMoon2000";case v:return"sphericalECEFToWGS84ECEF";
case g:return"mars2000ToSphericalPCPF";case b:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=xa;c.getTransformations=function(f,k,l=null){if(q.isNone(na))throw new ma;f=na._getTransformationBySuitability(ia,f,k,l,null==l?void 0:l.spatialReference);if(null!==f){k=[];for(const x of f)k.push(N.fromGE(x));return k}return[]};c.initializeProjection=async function(f,k){if(!T())for(const {source:l,dest:x,geographicTransformation:P}of f)if(!Ca(l,x,P))return Z(k)};c.isLoaded=T;c.isSupported=
function(){return!0};c.load=Z;c.localLinearScaleFactors=function(f,k,l,x){if(q.isNone(k)||q.isNone(x))return!1;const P=qa(k,Aa);var U=qa(x,Ea);if(P===U&&0!==P||Q.equals(k,x))return l[0]=1,l[1]=1,l[2]=1,!0;if(1===P){k=I.length(f);f=k/Math.sqrt(f[0]*f[0]+f[1]*f[1]);k/=S.earth.radius;if(3===U)return l[0]=f*k,l[1]=f*k,l[2]=1,!0;if(2===U||5===U)return U=180/(S.earth.radius*Math.PI),l[0]=U*f*k,l[1]=U*k,l[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(f,k,l,x,P=0){x+=P;P=Math.cos(l);f[0]=Math.cos(k)*
P*x;f[1]=Math.sin(k)*P*x;f[2]=Math.sin(l)*x};c.project=function(f,k,l=null){return Array.isArray(f)?0===f.length?[]:ba(ia,f,f[0].spatialReference,k,l):ba(ia,[f],f.spatialReference,k,l)[0]};c.projectBoundingRect=function(f,k,l,x){if(null==f)return!1;if(Q.equals(k,x))return G.set(l,f),!0;da[0]=f[0];da[1]=f[1];da[2]=0;if(!za(da,k,0,da,x,0,1))return!1;l[0]=da[0];l[1]=da[1];da[0]=f[2];da[1]=f[3];da[2]=0;if(!za(da,k,0,da,x,0,1))return!1;l[2]=da[0];l[3]=da[1];return!0};c.projectBoundingSphere=function(f,
k,l,x){if(q.isNone(k)||q.isNone(x))return!1;k=Y(k,x,Fa);if(k.projector===ha)return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],!0;if(q.isNone(k.projector))return!1;const {source:P,dest:U}=k;if(3===U.spatialReferenceId){k=wa[P.spatialReferenceId][2];if(q.isNone(k))return!1;k(f,0,Ha,0);k=Math.abs(ra*Ha[1])+Math.asin(f[3]/(S.earth.radius+f[2]));ta(Ha,0,l,0);l[3]=k>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(k)*f[3];return!0}k.projector(f,0,l,0);l[3]=f[3]*P.metersPerUnit/U.metersPerUnit;return!0};c.projectBuffer=
za;c.projectDirection=function(f,k,l,x,P){I.copy(oa,f);I.add(Ta,f,k);Oa(oa,l,oa,P);Oa(Ta,l,Ta,P);I.subtract(x,Ta,oa);I.normalize(x,x)};c.projectExtent=function(f,k,l=k.spatialReference,x=0){return q.isNone(l)?!1:La(f,f.spatialReference,k,l,x)};c.projectMany=ba;c.projectMultipoint=function(f,k,l=k.spatialReference,x=0){return q.isNone(l)?!1:Na(f,f.spatialReference,k,l,x)};c.projectPoint=function(f,k,l=k.spatialReference,x=0){return q.isNone(l)?!1:Ka(f,f.spatialReference,k,l,x)};c.projectPointToVector=
function(f,k,l,x=0){oa[0]=f.x;oa[1]=f.y;const P=f.z;oa[2]=void 0!==P?P:x;return za(oa,f.spatialReference,0,k,l,0,1)};c.projectPointToWGS84ComparableLonLat=function(f,k){oa[0]=f.x;oa[1]=f.y;const l=f.z;oa[2]=void 0!==l?l:0;return Sa(oa,f.spatialReference,k)};c.projectPolygon=function(f,k,l=k.spatialReference,x=0){return q.isNone(l)?!1:Ga(f,f.spatialReference,k,l,x)};c.projectPolyline=function(f,k,l=k.spatialReference,x=0){return q.isNone(l)?!1:Ma(f,f.spatialReference,k,l,x)};c.projectVectorToDehydratedPoint=
function(f,k,l,x){q.isNone(x)&&(x=l.spatialReference);return za(f,k,0,oa,x,0,1)?(l.x=oa[0],l.y=oa[1],l.z=oa[2],l.spatialReference=x,l):null};c.projectVectorToPoint=function(f,k,l,x){if(q.isNone(k)||q.isNone(l))return null;x=q.isSome(x)?x:new H({spatialReference:l});return za(f,k,0,oa,l,0,1)?(x.x=oa[0],x.y=oa[1],x.z=oa[2],x.spatialReference=l,x):null};c.projectVectorToVector=Oa;c.projectVectorToWGS84ComparableLonLat=Sa;c.projectXYZToVector=Ia;c.sphericalECEFToSphericalPCPF=z;c.unload=function(){ka=
ia=na=null;la={}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(t,c,m){function q(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function J(a,b,g,n,z,B,w,d,e,v,A,D,O,K,V,Y,ca){a[0]=b;a[1]=g;a[2]=n;a[3]=z;a[4]=B;a[5]=w;a[6]=d;a[7]=e;a[8]=v;a[9]=A;a[10]=D;a[11]=O;a[12]=K;a[13]=
V;a[14]=Y;a[15]=ca;return a}function M(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Q(a,b){if(a===b){const g=b[1],n=b[2],z=b[3],B=b[6],w=b[7],d=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=g;a[6]=b[9];a[7]=b[13];a[8]=n;a[9]=B;a[11]=b[14];a[12]=z;a[13]=w;a[14]=d}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=
b[7],a[14]=b[11],a[15]=b[15];return a}function S(a,b){const g=b[0],n=b[1],z=b[2],B=b[3],w=b[4],d=b[5],e=b[6],v=b[7],A=b[8],D=b[9],O=b[10],K=b[11],V=b[12],Y=b[13],ca=b[14];b=b[15];const na=g*d-n*w,ia=g*e-z*w,ka=g*v-B*w,la=n*e-z*d,ma=n*v-B*d,wa=z*v-B*e,Aa=A*Y-D*V,Ea=A*ca-O*V,Ba=A*b-K*V,Fa=D*ca-O*Y,ra=D*b-K*Y,ya=O*b-K*ca;let da=na*ya-ia*ra+ka*Fa+la*Ba-ma*Ea+wa*Aa;if(!da)return null;da=1/da;a[0]=(d*ya-e*ra+v*Fa)*da;a[1]=(z*ra-n*ya-B*Fa)*da;a[2]=(Y*wa-ca*ma+b*la)*da;a[3]=(O*ma-D*wa-K*la)*da;a[4]=(e*Ba-
w*ya-v*Ea)*da;a[5]=(g*ya-z*Ba+B*Ea)*da;a[6]=(ca*ka-V*wa-b*ia)*da;a[7]=(A*wa-O*ka+K*ia)*da;a[8]=(w*ra-d*Ba+v*Aa)*da;a[9]=(n*Ba-g*ra-B*Aa)*da;a[10]=(V*ma-Y*ka+b*na)*da;a[11]=(D*ka-A*ma-K*na)*da;a[12]=(d*Ea-w*Fa-e*Aa)*da;a[13]=(g*Fa-n*Ea+z*Aa)*da;a[14]=(Y*ia-V*la-ca*na)*da;a[15]=(A*la-D*ia+O*na)*da;return a}function H(a,b){const g=b[0],n=b[1],z=b[2],B=b[3],w=b[4],d=b[5],e=b[6],v=b[7],A=b[8],D=b[9],O=b[10],K=b[11],V=b[12],Y=b[13],ca=b[14];b=b[15];a[0]=d*(O*b-K*ca)-D*(e*b-v*ca)+Y*(e*K-v*O);a[1]=-(n*(O*
b-K*ca)-D*(z*b-B*ca)+Y*(z*K-B*O));a[2]=n*(e*b-v*ca)-d*(z*b-B*ca)+Y*(z*v-B*e);a[3]=-(n*(e*K-v*O)-d*(z*K-B*O)+D*(z*v-B*e));a[4]=-(w*(O*b-K*ca)-A*(e*b-v*ca)+V*(e*K-v*O));a[5]=g*(O*b-K*ca)-A*(z*b-B*ca)+V*(z*K-B*O);a[6]=-(g*(e*b-v*ca)-w*(z*b-B*ca)+V*(z*v-B*e));a[7]=g*(e*K-v*O)-w*(z*K-B*O)+A*(z*v-B*e);a[8]=w*(D*b-K*Y)-A*(d*b-v*Y)+V*(d*K-v*D);a[9]=-(g*(D*b-K*Y)-A*(n*b-B*Y)+V*(n*K-B*D));a[10]=g*(d*b-v*Y)-w*(n*b-B*Y)+V*(n*v-B*d);a[11]=-(g*(d*K-v*D)-w*(n*K-B*D)+A*(n*v-B*d));a[12]=-(w*(D*ca-O*Y)-A*(d*ca-e*Y)+
V*(d*O-e*D));a[13]=g*(D*ca-O*Y)-A*(n*ca-z*Y)+V*(n*O-z*D);a[14]=-(g*(d*ca-e*Y)-w*(n*ca-z*Y)+V*(n*e-z*d));a[15]=g*(d*O-e*D)-w*(n*O-z*D)+A*(n*e-z*d);return a}function R(a){const b=a[0],g=a[1],n=a[2],z=a[3],B=a[4],w=a[5],d=a[6],e=a[7],v=a[8],A=a[9],D=a[10],O=a[11],K=a[12],V=a[13],Y=a[14];a=a[15];return(b*w-g*B)*(D*a-O*Y)-(b*d-n*B)*(A*a-O*V)+(b*e-z*B)*(A*Y-D*V)+(g*d-n*w)*(v*a-O*K)-(g*e-z*w)*(v*Y-D*K)+(n*e-z*d)*(v*V-A*K)}function W(a,b,g){const n=b[0],z=b[1],B=b[2],w=b[3],d=b[4],e=b[5],v=b[6],A=b[7],D=
b[8],O=b[9],K=b[10],V=b[11],Y=b[12],ca=b[13],na=b[14];b=b[15];let ia=g[0],ka=g[1],la=g[2],ma=g[3];a[0]=ia*n+ka*d+la*D+ma*Y;a[1]=ia*z+ka*e+la*O+ma*ca;a[2]=ia*B+ka*v+la*K+ma*na;a[3]=ia*w+ka*A+la*V+ma*b;ia=g[4];ka=g[5];la=g[6];ma=g[7];a[4]=ia*n+ka*d+la*D+ma*Y;a[5]=ia*z+ka*e+la*O+ma*ca;a[6]=ia*B+ka*v+la*K+ma*na;a[7]=ia*w+ka*A+la*V+ma*b;ia=g[8];ka=g[9];la=g[10];ma=g[11];a[8]=ia*n+ka*d+la*D+ma*Y;a[9]=ia*z+ka*e+la*O+ma*ca;a[10]=ia*B+ka*v+la*K+ma*na;a[11]=ia*w+ka*A+la*V+ma*b;ia=g[12];ka=g[13];la=g[14];ma=
g[15];a[12]=ia*n+ka*d+la*D+ma*Y;a[13]=ia*z+ka*e+la*O+ma*ca;a[14]=ia*B+ka*v+la*K+ma*na;a[15]=ia*w+ka*A+la*V+ma*b;return a}function X(a,b,g){const n=g[0],z=g[1];g=g[2];let B=void 0,w=void 0,d=void 0,e=void 0,v=void 0,A=void 0,D=void 0,O=void 0,K=void 0,V=void 0,Y=void 0,ca=void 0;b===a?(a[12]=b[0]*n+b[4]*z+b[8]*g+b[12],a[13]=b[1]*n+b[5]*z+b[9]*g+b[13],a[14]=b[2]*n+b[6]*z+b[10]*g+b[14],a[15]=b[3]*n+b[7]*z+b[11]*g+b[15]):(B=b[0],w=b[1],d=b[2],e=b[3],v=b[4],A=b[5],D=b[6],O=b[7],K=b[8],V=b[9],Y=b[10],ca=
b[11],a[0]=B,a[1]=w,a[2]=d,a[3]=e,a[4]=v,a[5]=A,a[6]=D,a[7]=O,a[8]=K,a[9]=V,a[10]=Y,a[11]=ca,a[12]=B*n+v*z+K*g+b[12],a[13]=w*n+A*z+V*g+b[13],a[14]=d*n+D*z+Y*g+b[14],a[15]=e*n+O*z+ca*g+b[15]);return a}function h(a,b,g){const n=g[0],z=g[1];g=g[2];a[0]=b[0]*n;a[1]=b[1]*n;a[2]=b[2]*n;a[3]=b[3]*n;a[4]=b[4]*z;a[5]=b[5]*z;a[6]=b[6]*z;a[7]=b[7]*z;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function p(a,b,g,n){let z=n[0],B=n[1];n=n[2];let w=
Math.sqrt(z*z+B*B+n*n);var d=void 0,e=void 0;let v=void 0,A=void 0,D=void 0,O=void 0,K=void 0,V=void 0,Y=void 0,ca=void 0,na=void 0,ia=void 0,ka=void 0,la=void 0,ma=void 0,wa=void 0,Aa=void 0,Ea=void 0,Ba=void 0,Fa=void 0,ra=void 0,ya=void 0;e=d=void 0;if(w<m.EPSILON)return null;w=1/w;z*=w;B*=w;n*=w;d=Math.sin(g);e=Math.cos(g);v=1-e;A=b[0];D=b[1];O=b[2];K=b[3];V=b[4];Y=b[5];ca=b[6];na=b[7];ia=b[8];ka=b[9];la=b[10];ma=b[11];wa=z*z*v+e;Aa=B*z*v+n*d;Ea=n*z*v-B*d;Ba=z*B*v-n*d;Fa=B*B*v+e;ra=n*B*v+z*d;
ya=z*n*v+B*d;d=B*n*v-z*d;e=n*n*v+e;a[0]=A*wa+V*Aa+ia*Ea;a[1]=D*wa+Y*Aa+ka*Ea;a[2]=O*wa+ca*Aa+la*Ea;a[3]=K*wa+na*Aa+ma*Ea;a[4]=A*Ba+V*Fa+ia*ra;a[5]=D*Ba+Y*Fa+ka*ra;a[6]=O*Ba+ca*Fa+la*ra;a[7]=K*Ba+na*Fa+ma*ra;a[8]=A*ya+V*d+ia*e;a[9]=D*ya+Y*d+ka*e;a[10]=O*ya+ca*d+la*e;a[11]=K*ya+na*d+ma*e;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a}function y(a,b,g){const n=Math.sin(g);g=Math.cos(g);const z=b[4],B=b[5],w=b[6],d=b[7],e=b[8],v=b[9],A=b[10],D=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=
b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=z*g+e*n;a[5]=B*g+v*n;a[6]=w*g+A*n;a[7]=d*g+D*n;a[8]=e*g-z*n;a[9]=v*g-B*n;a[10]=A*g-w*n;a[11]=D*g-d*n;return a}function I(a,b,g){const n=Math.sin(g);g=Math.cos(g);const z=b[0],B=b[1],w=b[2],d=b[3],e=b[8],v=b[9],A=b[10],D=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=z*g-e*n;a[1]=B*g-v*n;a[2]=w*g-A*n;a[3]=d*g-D*n;a[8]=z*n+e*g;a[9]=B*n+v*g;a[10]=w*n+A*g;a[11]=d*n+D*g;return a}
function r(a,b,g){const n=Math.sin(g);g=Math.cos(g);const z=b[0],B=b[1],w=b[2],d=b[3],e=b[4],v=b[5],A=b[6],D=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=z*g+e*n;a[1]=B*g+v*n;a[2]=w*g+A*n;a[3]=d*g+D*n;a[4]=e*g-z*n;a[5]=v*g-B*n;a[6]=A*g-w*n;a[7]=D*g-d*n;return a}function u(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function C(a,b){a[0]=
b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function E(a,b,g){let n=g[0],z=g[1];g=g[2];let B=Math.sqrt(n*n+z*z+g*g),w=void 0,d=void 0,e=void 0;if(B<m.EPSILON)return null;B=1/B;n*=B;z*=B;g*=B;w=Math.sin(b);d=Math.cos(b);e=1-d;a[0]=n*n*e+d;a[1]=z*n*e+g*w;a[2]=g*n*e-z*w;a[3]=0;a[4]=n*z*e-g*w;a[5]=z*z*e+d;a[6]=g*z*e+n*w;a[7]=0;a[8]=n*g*e+z*w;a[9]=z*g*e-n*w;a[10]=g*g*e+d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function G(a,b){const g=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function F(a,b){const g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function N(a,b){const g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;
a[13]=0;a[14]=0;a[15]=1;return a}function T(a,b,g){var n=b[0],z=b[1],B=b[2],w=b[3],d=n+n,e=z+z;const v=B+B;b=n*d;const A=n*e;n*=v;const D=z*e;z*=v;B*=v;d*=w;e*=w;w*=v;a[0]=1-(D+B);a[1]=A+w;a[2]=n-e;a[3]=0;a[4]=A-w;a[5]=1-(b+B);a[6]=z+d;a[7]=0;a[8]=n+e;a[9]=z-d;a[10]=1-(b+D);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}function Z(a,b){const g=ta,n=-b[0],z=-b[1],B=-b[2],w=b[3],d=b[4],e=b[5],v=b[6],A=b[7],D=n*n+z*z+B*B+w*w;0<D?(g[0]=2*(d*w+A*n+e*B-v*z)/D,g[1]=2*(e*w+A*z+v*n-d*B)/D,g[2]=
2*(v*w+A*B+d*z-e*n)/D):(g[0]=2*(d*w+A*n+e*B-v*z),g[1]=2*(e*w+A*z+v*n-d*B),g[2]=2*(v*w+A*B+d*z-e*n));T(a,b,g);return a}function ba(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function xa(a,b){const g=b[0],n=b[1],z=b[2],B=b[4],w=b[5],d=b[6],e=b[8],v=b[9];b=b[10];a[0]=Math.sqrt(g*g+n*n+z*z);a[1]=Math.sqrt(B*B+w*w+d*d);a[2]=Math.sqrt(e*e+v*v+b*b);return a}function Ca(a,b){const g=b[0]+b[5]+b[10];let n=0;0<g?(n=2*Math.sqrt(g+1),a[3]=.25*n,a[0]=(b[6]-b[9])/n,a[1]=(b[8]-b[2])/n,a[2]=(b[1]-b[4])/n):b[0]>
b[5]&&b[0]>b[10]?(n=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/n,a[0]=.25*n,a[1]=(b[1]+b[4])/n,a[2]=(b[8]+b[2])/n):b[5]>b[10]?(n=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/n,a[0]=(b[1]+b[4])/n,a[1]=.25*n,a[2]=(b[6]+b[9])/n):(n=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/n,a[0]=(b[8]+b[2])/n,a[1]=(b[6]+b[9])/n,a[2]=.25*n);return a}function Ja(a,b,g,n){var z=b[0],B=b[1],w=b[2],d=b[3],e=z+z,v=B+B,A=w+w;b=z*e;const D=z*v;z*=A;const O=B*v;B*=A;w*=A;e*=d;v*=d;d*=A;A=n[0];const K=n[1];n=n[2];
a[0]=(1-(O+w))*A;a[1]=(D+d)*A;a[2]=(z-v)*A;a[3]=0;a[4]=(D-d)*K;a[5]=(1-(b+w))*K;a[6]=(B+e)*K;a[7]=0;a[8]=(z+v)*n;a[9]=(B-e)*n;a[10]=(1-(b+O))*n;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}function Ka(a,b,g,n,z){var B=b[0],w=b[1],d=b[2],e=b[3],v=B+B,A=w+w,D=d+d;b=B*v;var O=B*A,K=B*D;B=w*A;w*=D;var V=d*D;d=e*v;A*=e;const Y=e*D;var ca=n[0],na=n[1];D=n[2];n=z[0];e=z[1];z=z[2];v=(1-(B+V))*ca;const ia=(O+Y)*ca;ca*=K-A;O=(O-Y)*na;V=(1-(b+V))*na;na*=w+d;K=(K+A)*D;w=(w-d)*D;b=(1-(b+B))*D;a[0]=
v;a[1]=ia;a[2]=ca;a[3]=0;a[4]=O;a[5]=V;a[6]=na;a[7]=0;a[8]=K;a[9]=w;a[10]=b;a[11]=0;a[12]=g[0]+n-(v*n+O*e+K*z);a[13]=g[1]+e-(ia*n+V*e+w*z);a[14]=g[2]+z-(ca*n+na*e+b*z);a[15]=1;return a}function Na(a,b){var g=b[0],n=b[1],z=b[2];b=b[3];var B=g+g,w=n+n;const d=z+z;g*=B;const e=n*B;n*=w;const v=z*B,A=z*w;z*=d;B*=b;w*=b;b*=d;a[0]=1-n-z;a[1]=e+b;a[2]=v-w;a[3]=0;a[4]=e-b;a[5]=1-g-z;a[6]=A+B;a[7]=0;a[8]=v+w;a[9]=A-B;a[10]=1-g-n;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Ma(a,b,g,n,z,B,w){const d=
1/(g-b),e=1/(z-n),v=1/(B-w);a[0]=2*B*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*B*e;a[6]=0;a[7]=0;a[8]=(g+b)*d;a[9]=(z+n)*e;a[10]=(w+B)*v;a[11]=-1;a[12]=0;a[13]=0;a[14]=w*B*2*v;a[15]=0;return a}function Ga(a,b,g,n,z){b=1/Math.tan(b/2);let B=void 0;a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=z&&Infinity!==z?(B=1/(n-z),a[10]=(z+n)*B,a[14]=2*z*n*B):(a[10]=-1,a[14]=-2*n);return a}function La(a,b,g,n){const z=Math.tan(b.upDegrees*Math.PI/180),
B=Math.tan(b.downDegrees*Math.PI/180),w=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);const d=2/(w+b),e=2/(z+B);a[0]=d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=-((w-b)*d*.5);a[9]=(z-B)*e*.5;a[10]=n/(g-n);a[11]=-1;a[12]=0;a[13]=0;a[14]=n*g/(g-n);a[15]=0;return a}function Ia(a,b,g,n,z,B,w){const d=1/(b-g),e=1/(n-z),v=1/(B-w);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*v;a[11]=0;a[12]=(b+g)*d;a[13]=(z+n)*e;a[14]=(w+B)*
v;a[15]=1;return a}function Oa(a,b,g,n){let z=void 0,B=void 0;var w=void 0,d=void 0;let e=void 0,v=void 0;var A=void 0,D=void 0;let O=void 0,K=void 0;const V=b[0],Y=b[1];b=b[2];w=n[0];d=n[1];n=n[2];A=g[0];D=g[1];g=g[2];if(Math.abs(V-A)<m.EPSILON&&Math.abs(Y-D)<m.EPSILON&&Math.abs(b-g)<m.EPSILON)return M(a);A=V-A;D=Y-D;O=b-g;K=1/Math.sqrt(A*A+D*D+O*O);A*=K;D*=K;O*=K;z=d*O-n*D;B=n*A-w*O;w=w*D-d*A;(K=Math.sqrt(z*z+B*B+w*w))?(K=1/K,z*=K,B*=K,w*=K):w=B=z=0;d=D*w-O*B;e=O*z-A*w;v=A*B-D*z;(K=Math.sqrt(d*
d+e*e+v*v))?(K=1/K,d*=K,e*=K,v*=K):v=e=d=0;a[0]=z;a[1]=d;a[2]=A;a[3]=0;a[4]=B;a[5]=e;a[6]=D;a[7]=0;a[8]=w;a[9]=v;a[10]=O;a[11]=0;a[12]=-(z*V+B*Y+w*b);a[13]=-(d*V+e*Y+v*b);a[14]=-(A*V+D*Y+O*b);a[15]=1;return a}function Sa(a,b,g,n){const z=b[0],B=b[1];b=b[2];var w=n[0];const d=n[1];var e=n[2];n=z-g[0];let v=B-g[1];g=b-g[2];let A=n*n+v*v+g*g;0<A&&(A=1/Math.sqrt(A),n*=A,v*=A,g*=A);let D=d*g-e*v;e=e*n-w*g;w=w*v-d*n;A=D*D+e*e+w*w;0<A&&(A=1/Math.sqrt(A),D*=A,e*=A,w*=A);a[0]=D;a[1]=e;a[2]=w;a[3]=0;a[4]=v*
w-g*e;a[5]=g*D-n*w;a[6]=n*e-v*D;a[7]=0;a[8]=n;a[9]=v;a[10]=g;a[11]=0;a[12]=z;a[13]=B;a[14]=b;a[15]=1;return a}function za(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function Ra(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],
2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}function pa(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];a[9]=b[9]+g[9];a[10]=b[10]+g[10];a[11]=b[11]+g[11];a[12]=b[12]+g[12];a[13]=b[13]+g[13];a[14]=b[14]+g[14];a[15]=b[15]+g[15];return a}function qa(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-
g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=b[8]-g[8];a[9]=b[9]-g[9];a[10]=b[10]-g[10];a[11]=b[11]-g[11];a[12]=b[12]-g[12];a[13]=b[13]-g[13];a[14]=b[14]-g[14];a[15]=b[15]-g[15];return a}function ha(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12]*g;a[13]=b[13]*g;a[14]=b[14]*g;a[15]=b[15]*g;return a}function L(a,b,g,n){a[0]=b[0]+g[0]*n;a[1]=b[1]+g[1]*n;a[2]=b[2]+g[2]*n;a[3]=b[3]+g[3]*n;
a[4]=b[4]+g[4]*n;a[5]=b[5]+g[5]*n;a[6]=b[6]+g[6]*n;a[7]=b[7]+g[7]*n;a[8]=b[8]+g[8]*n;a[9]=b[9]+g[9]*n;a[10]=b[10]+g[10]*n;a[11]=b[11]+g[11]*n;a[12]=b[12]+g[12]*n;a[13]=b[13]+g[13]*n;a[14]=b[14]+g[14]*n;a[15]=b[15]+g[15]*n;return a}function aa(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function ea(a,b){const g=a[0],
n=a[1],z=a[2],B=a[3],w=a[4],d=a[5],e=a[6],v=a[7],A=a[8],D=a[9],O=a[10],K=a[11],V=a[12],Y=a[13],ca=a[14];a=a[15];const na=b[0],ia=b[1],ka=b[2],la=b[3],ma=b[4],wa=b[5],Aa=b[6],Ea=b[7],Ba=b[8],Fa=b[9],ra=b[10],ya=b[11],da=b[12],Ha=b[13],Qa=b[14];b=b[15];return Math.abs(g-na)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(na))&&Math.abs(n-ia)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(ia))&&Math.abs(z-ka)<=m.EPSILON*Math.max(1,Math.abs(z),Math.abs(ka))&&Math.abs(B-la)<=m.EPSILON*Math.max(1,Math.abs(B),Math.abs(la))&&
Math.abs(w-ma)<=m.EPSILON*Math.max(1,Math.abs(w),Math.abs(ma))&&Math.abs(d-wa)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(wa))&&Math.abs(e-Aa)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(Aa))&&Math.abs(v-Ea)<=m.EPSILON*Math.max(1,Math.abs(v),Math.abs(Ea))&&Math.abs(A-Ba)<=m.EPSILON*Math.max(1,Math.abs(A),Math.abs(Ba))&&Math.abs(D-Fa)<=m.EPSILON*Math.max(1,Math.abs(D),Math.abs(Fa))&&Math.abs(O-ra)<=m.EPSILON*Math.max(1,Math.abs(O),Math.abs(ra))&&Math.abs(K-ya)<=m.EPSILON*Math.max(1,Math.abs(K),Math.abs(ya))&&
Math.abs(V-da)<=m.EPSILON*Math.max(1,Math.abs(V),Math.abs(da))&&Math.abs(Y-Ha)<=m.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ha))&&Math.abs(ca-Qa)<=m.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Qa))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}const ta=c.create();c=Object.freeze({__proto__:null,copy:q,set:J,identity:M,transpose:Q,invert:S,adjoint:H,determinant:R,multiply:W,translate:X,scale:h,rotate:p,rotateX:y,rotateY:I,rotateZ:r,fromTranslation:u,fromScaling:C,fromRotation:E,fromXRotation:G,
fromYRotation:F,fromZRotation:N,fromRotationTranslation:T,fromQuat2:Z,getTranslation:ba,getScaling:xa,getRotation:Ca,fromRotationTranslationScale:Ja,fromRotationTranslationScaleOrigin:Ka,fromQuat:Na,frustum:Ma,perspective:Ga,perspectiveFromFieldOfView:La,ortho:Ia,lookAt:Oa,targetTo:Sa,str:za,frob:Ra,add:pa,subtract:qa,multiplyScalar:ha,multiplyScalarAndAdd:L,exactEquals:aa,equals:ea,mul:W,sub:qa});t.add=pa;t.adjoint=H;t.copy=q;t.determinant=R;t.equals=ea;t.exactEquals=aa;t.frob=Ra;t.fromQuat=Na;t.fromQuat2=
Z;t.fromRotation=E;t.fromRotationTranslation=T;t.fromRotationTranslationScale=Ja;t.fromRotationTranslationScaleOrigin=Ka;t.fromScaling=C;t.fromTranslation=u;t.fromXRotation=G;t.fromYRotation=F;t.fromZRotation=N;t.frustum=Ma;t.getRotation=Ca;t.getScaling=xa;t.getTranslation=ba;t.identity=M;t.invert=S;t.lookAt=Oa;t.mat4=c;t.mul=W;t.multiply=W;t.multiplyScalar=ha;t.multiplyScalarAndAdd=L;t.ortho=Ia;t.perspective=Ga;t.perspectiveFromFieldOfView=La;t.rotate=p;t.rotateX=y;t.rotateY=I;t.rotateZ=r;t.scale=
h;t.set=J;t.str=za;t.sub=qa;t.subtract=qa;t.targetTo=Sa;t.translate=X;t.transpose=Q})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),function(t,c,m,q,J,M){function Q(){return!!c._pe}function S(){return!!q("esri-wasm")}function H(){return y?y:y=J.create((r,u)=>{(new Promise(function(C,E){t(["./pe-wasm"],C,E)})).then(function(C){return C.peWasm}).then(({default:C})=>{C({locateFile:E=>M.getAssetUrl(`esri/geometry/support/${E}`),
onAbort:E=>{u(Error(E))}}).then(E=>{R(E);r()})})})}function R(r){function u(G,F,N){G[F]=N(G[F])}c._pe=r;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(G){function F(){return G.apply(this,arguments)||this}m._inheritsLoose(F,G);F.prototype.destroy=function(){c._pe.destroy(this)};return F}(c._pe.PeGCSExtent);r=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,
c._pe.PeSpheroid,c._pe.PeUnit];for(var C of r)u(C.prototype,"getName",G=>function(){return G.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const G of[c._pe.PeGeogtran,c._pe.PeProjcs])u(G.prototype,"getParameters",F=>function(){const N=Array(c.PeDefs.PE_PARM_MAX);let T=F.call(this);for(let Z=0;Z<N.length;Z++){const ba=c._pe.getValue(T,"*");N[Z]=ba?c._pe.wrapPointer(ba,c._pe.PeParameter):null;T+=Int32Array.BYTES_PER_ELEMENT}return N});u(c._pe.PeHorizon.prototype,"getCoord",G=>function(){const F=this.getSize();
if(!F)return null;const N=[],T=G.call(this);p(N,F,T);return N});u(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",G=>{const F=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let N=null;var T=G.call(this);if(!c._pe.compare(T,c._pe.NULL)){N=[T];const Z=this.getSteps();if(1<Z){T=c._pe.getPointer(T);for(let ba=1;ba<Z;ba++)N.push(c._pe.wrapPointer(T+F*ba,c._pe.PeGTlistExtendedGTs))}}return N}});const E=c._pe._pe_getPeHorizonSize();C=G=>function(){let F=this._cache;F||(this._cache=F=new Map);
if(F.has(G))return F.get(G);let N=null;var T=G.call(this);if(!c._pe.compare(T,c._pe.NULL)){N=[T];const Z=T.getNump();if(1<Z){T=c._pe.getPointer(T);for(let ba=1;ba<Z;ba++)N.push(c._pe.wrapPointer(T+E*ba,c._pe.PeHorizon))}}F.set(G,N);return N};u(c._pe.PeProjcs.prototype,"horizonGcsGenerate",C);u(c._pe.PeProjcs.prototype,"horizonPcsGenerate",C);c._pe.PeObject.prototype.toString=function(G=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const F=c._pe.getPointer(this),N=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));
return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(F,G,N))}}function W(r){if(r){var u=c._pe.getClass(r);u&&(u=c._pe.getCache(u))&&(r=c._pe.getPointer(r))&&delete u[r]}}function X(r,u){const C=[];u=Array(u);for(let E=0;E<r;E++)C.push(c._pe.ensureInt8(u));return C}function h(r){let u;Array.isArray(r[0])?(u=[],r.forEach(C=>{u.push(C[0],C[1])})):u=r;return u}function p(r,u,C,E=!1){if(E)for(E=0;E<2*u;E++)r[E]=c._pe.getValue(C+E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===r.length;for(let G=
0;G<u;G++)E&&(r[G]=Array(2)),r[G][0]=c._pe.getValue(C,"double"),r[G][1]=c._pe.getValue(C+Float64Array.BYTES_PER_ELEMENT,"double"),C+=2*Float64Array.BYTES_PER_ELEMENT}}let y;c._pe=null;(function(r){function u(G,F,N){c._pe.ensureCache.prepare();var T=h(N);const Z=N===T;T=c._pe.ensureFloat64(T);(G=c._pe._pe_geog_to_proj(c._pe.getPointer(G),F,T))&&p(N,F,T,Z);return G}function C(G,F,N){return E(G,F,N,0)}function E(G,F,N,T){c._pe.ensureCache.prepare();var Z=h(N);const ba=N===Z;Z=c._pe.ensureFloat64(Z);
(G=c._pe._pe_proj_to_geog_center(c._pe.getPointer(G),F,Z,T))&&p(N,F,Z,ba);return G}r.geogToProj=u;r.projGeog=function(G,F,N,T){switch(T){case c.PeDefs.PE_TRANSFORM_P_TO_G:return C(G,F,N);case c.PeDefs.PE_TRANSFORM_G_TO_P:return u(G,F,N)}return 0};r.projToGeog=C;r.projToGeogCenter=E})(c.PeCSTransformations||(c.PeCSTransformations={}));(function(r){r.init=function(){r.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;r.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;r.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;
r.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;r.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;r.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;r.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;r.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;r.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;r.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;r.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;r.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;r.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;
r.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;r.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;r.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;r.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;r.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;r.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;r.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;r.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;r.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
r.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;r.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;r.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;r.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;r.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;r.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;r.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));(function(r){function u(F,N){let T=null,Z=E[F];Z||
(Z={},E[F]=Z);Z.hasOwnProperty(String(N))?T=Z[N]:(F=c._pe.PeFactory.prototype.factoryByType(F,N),c._pe.compare(F,c._pe.NULL)||(T=F,Z[N]=T));return T=C(T)}function C(F){if(F){const N=F.getType();switch(N){case c.PeDefs.PE_TYPE_GEOGCS:F=c._pe.castObject(F,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:F=c._pe.castObject(F,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:F=c._pe.castObject(F,c._pe.PeGeogtran);break;default:N&c.PeDefs.PE_TYPE_UNIT&&(F=c._pe.castObject(F,c._pe.PeUnit))}}return F}
const E={},G={};r.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};r.coordsys=function(F){return u(c.PeDefs.PE_TYPE_COORDSYS,F)};r.factoryByType=u;r.fromString=function(F,N){let T=null,Z=G[F];Z||(Z={},G[F]=Z);Z.hasOwnProperty(N)?T=Z[N]:(F=c._pe.PeFactory.prototype.fromString(F,N),c._pe.compare(F,c._pe.NULL)||(T=F,Z[N]=T));return T=C(T)};r.geogcs=function(F){return u(c.PeDefs.PE_TYPE_GEOGCS,F)};r.geogtran=function(F){return u(c.PeDefs.PE_TYPE_GEOGTRAN,F)};r.getCode=function(F){return c._pe.PeFactory.prototype.getCode(F)};
r.projcs=function(F){return u(c.PeDefs.PE_TYPE_PROJCS,F)};r.unit=function(F){return u(c.PeDefs.PE_TYPE_UNIT,F)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;(function(r){let u;r.init=function(){r.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=c._pe._pe_getPeGTlistExtendedEntrySize()};r.getGTlist=function(C,E,G,F,N,T){let Z=null;const ba=new c._pe.PeInteger(T);try{const xa=c._pe.PeGTlistExtended.prototype.getGTlist(C,E,G,F,N,ba);if(T=ba.val)if(Z=[xa],1<T){const Ca=
c._pe.getPointer(xa);for(C=1;C<T;C++)Z.push(c._pe.wrapPointer(Ca+u*C,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(ba)}return Z}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));(function(r){r.destroy=function(u){if(u&&u.length){for(const C of u)W(C),C.getEntries().forEach(E=>{W(E);E=E.getGeogtran();W(E);E.getParameters().forEach(W);[E.getGeogcs1(),E.getGeogcs2()].forEach(G=>{W(G);const F=G.getDatum();W(F);W(F.getSpheroid());W(G.getPrimem());W(G.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(c.PeGTlistExtendedEntry||
(c.PeGTlistExtendedEntry={}));(function(r){r.geogToGeog=function(u,C,E,G,F){c._pe.ensureCache.prepare();var N=h(E);const T=E===N;N=c._pe.ensureFloat64(N);let Z=0;G&&(Z=c._pe.ensureFloat64(G));(u=c._pe._pe_geog_to_geog(c._pe.getPointer(u),C,N,Z,F))&&p(E,C,N,T);return u}})(c.PeGTTransformations||(c.PeGTTransformations={}));(function(r){function u(E,G,F,N,T,Z){c._pe.ensureCache.prepare();switch(E){case "dd":var ba=c._pe._pe_geog_to_dd;var xa=c.PeDefs.PE_DD_MAX;break;case "ddm":ba=c._pe._pe_geog_to_ddm;
xa=c.PeDefs.PE_DDM_MAX;break;case "dms":ba=c._pe._pe_geog_to_dms,xa=c.PeDefs.PE_DMS_MAX}E=0;G&&(E=c._pe.getPointer(G));G=h(N);G=c._pe.ensureFloat64(G);xa=X(F,xa);N=c._pe.ensureInt32(xa);if(T=ba(E,F,G,T,N))for(ba=0;ba<F;ba++)Z[ba]=c._pe.UTF8ToString(xa[ba]);return T}function C(E,G,F,N,T){c._pe.ensureCache.prepare();switch(E){case "dd":var Z=c._pe._pe_dd_to_geog;break;case "ddm":Z=c._pe._pe_ddm_to_geog;break;case "dms":Z=c._pe._pe_dms_to_geog}E=0;G&&(E=c._pe.getPointer(G));G=N.map(ba=>c._pe.ensureString(ba));
N=c._pe.ensureInt32(G);G=c._pe.ensureFloat64(Array(2*F));(Z=Z(E,F,N,G))&&p(T,F,G);return Z}r.geog_to_dms=function(E,G,F,N,T){return u("dms",E,G,F,N,T)};r.dms_to_geog=function(E,G,F,N){return C("dms",E,G,F,N)};r.geog_to_ddm=function(E,G,F,N,T){return u("ddm",E,G,F,N,T)};r.ddm_to_geog=function(E,G,F,N){return C("ddm",E,G,F,N)};r.geog_to_dd=function(E,G,F,N,T){return u("dd",E,G,F,N,T)};r.dd_to_geog=function(E,G,F,N){return C("dd",E,G,F,N)}})(c.PeNotationDms||(c.PeNotationDms={}));(function(r){r.init=
function(){r.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;r.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;r.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;r.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;r.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};r.geog_to_mgrs_extended=function(u,C,E,G,F,N,T){c._pe.ensureCache.prepare();let Z=0;u&&(Z=c._pe.getPointer(u));u=h(E);E=c._pe.ensureFloat64(u);
u=X(C,c.PeDefs.PE_MGRS_MAX);const ba=c._pe.ensureInt32(u);if(G=c._pe._pe_geog_to_mgrs_extended(Z,C,E,G,F,N,ba))for(F=0;F<C;F++)T[F]=c._pe.UTF8ToString(u[F]);return G};r.mgrs_to_geog_extended=function(u,C,E,G,F){c._pe.ensureCache.prepare();let N=0;u&&(N=c._pe.getPointer(u));u=E.map(T=>c._pe.ensureString(T));E=c._pe.ensureInt32(u);u=c._pe.ensureFloat64(Array(2*C));(G=c._pe._pe_mgrs_to_geog_extended(N,C,E,G,u))&&p(F,C,u);return G}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));(function(r){r.geog_to_usng=
function(u,C,E,G,F,N,T){c._pe.ensureCache.prepare();let Z=0;u&&(Z=c._pe.getPointer(u));u=h(E);E=c._pe.ensureFloat64(u);u=X(C,c.PeDefs.PE_MGRS_MAX);const ba=c._pe.ensureInt32(u);if(G=c._pe._pe_geog_to_usng(Z,C,E,G,F,N,ba))for(F=0;F<C;F++)T[F]=c._pe.UTF8ToString(u[F]);return G};r.usng_to_geog=function(u,C,E,G){c._pe.ensureCache.prepare();var F=0;u&&(F=c._pe.getPointer(u));u=E.map(N=>c._pe.ensureString(N));E=c._pe.ensureInt32(u);u=c._pe.ensureFloat64(Array(2*C));(F=c._pe._pe_usng_to_geog(F,C,E,u))&&
p(G,C,u);return F}})(c.PeNotationUsng||(c.PeNotationUsng={}));(function(r){r.init=function(){r.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;r.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;r.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};r.geog_to_utm=function(u,C,E,G,F){c._pe.ensureCache.prepare();var N=0;u&&(N=c._pe.getPointer(u));u=h(E);E=c._pe.ensureFloat64(u);u=X(C,c.PeDefs.PE_UTM_MAX);const T=c._pe.ensureInt32(u);if(G=c._pe._pe_geog_to_utm(N,
C,E,G,T))for(N=0;N<C;N++)F[N]=c._pe.UTF8ToString(u[N]);return G};r.utm_to_geog=function(u,C,E,G,F){c._pe.ensureCache.prepare();let N=0;u&&(N=c._pe.getPointer(u));u=E.map(T=>c._pe.ensureString(T));E=c._pe.ensureInt32(u);u=c._pe.ensureFloat64(Array(2*C));(G=c._pe._pe_utm_to_geog(N,C,E,G,u))&&p(F,C,u);return G}})(c.PeNotationUtm||(c.PeNotationUtm={}));(function(r){const u=new Map;r.init=function(){r.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;r.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;
r.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;r.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};r.generate=function(C,E=r.PE_PCSINFO_OPTION_DOMAIN){let G,F;u.has(C)&&(F=u.get(C),F[E]&&(G=F[E]));G||(G=c._pe.PePCSInfo.prototype.generate(C,E),F||(F=[],u.set(C,F)),F[E]=G);return G}})(c.PePCSInfo||(c.PePCSInfo={}));(function(r){r.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var I=Object.freeze({__proto__:null,
get _pe(){return c._pe},isLoaded:Q,isSupported:S,load:H,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},
get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:R});c._init=R;c.isLoaded=Q;c.isSupported=S;c.load=H;c.pe=I})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(t,c,m){function q(h=X){return[h[0],h[1],h[2],h[3]]}function J(h){return h[0]>=h[2]?0:h[2]-h[0]}function M(h){return h[1]>=h[3]?0:h[3]-h[1]}function Q(h,p,y){return p>=h[0]&&y>=h[1]&&p<=h[2]&&y<=h[3]}function S(h,
p){h[0]=p[0];h[1]=p[1];h[2]=p[2];h[3]=p[3];return h}function H(h){return 4===h.length}function R(h,p,y){return h<p?p:h>y?y:h}const W=[Infinity,Infinity,-Infinity,-Infinity],X=[0,0,0,0];t.NEGATIVE_INFINITY=W;t.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];t.UNIT=[0,0,1,1];t.ZERO=X;t.allFinite=function(h){for(let p=0;4>p;p++)if(!isFinite(h[p]))return!1;return!0};t.area=function(h){return J(h)*M(h)};t.center=function(h,p=[0,0]){p[0]=(h[0]+h[2])/2;p[1]=(h[1]+h[3])/2;return p};t.clone=function(h){return[h[0],
h[1],h[2],h[3]]};t.contains=function(h,p){return p[0]>=h[0]&&p[2]<=h[2]&&p[1]>=h[1]&&p[3]<=h[3]};t.containsPoint=function(h,p){return Q(h,p[0],p[1])};t.containsPointObject=function(h,p){return Q(h,p.x,p.y)};t.containsPointWithMargin=function(h,p,y){return p[0]>=h[0]-y&&p[1]>=h[1]-y&&p[0]<=h[2]+y&&p[1]<=h[3]+y};t.containsXY=Q;t.create=q;t.diameter=function(h){const p=J(h);h=M(h);return Math.sqrt(p*p+h*h)};t.distance=function(h,p){const y=(h[1]+h[3])/2,I=Math.max(Math.abs(p[0]-(h[0]+h[2])/2)-J(h)/2,
0);h=Math.max(Math.abs(p[1]-y)-M(h)/2,0);return Math.sqrt(I*I+h*h)};t.empty=function(h){return h?S(h,W):q(W)};t.equals=function(h,p,y){if(null==h||null==p)return h===p;if(!H(h)||!H(p))return!1;if(y)for(let I=0;I<h.length;I++){if(!y(h[I],p[I]))return!1}else for(y=0;y<h.length;y++)if(h[y]!==p[y])return!1;return!0};t.expand=function(h,p,y=h){if("length"in p)if(H(p))y[0]=Math.min(h[0],p[0]),y[1]=Math.min(h[1],p[1]),y[2]=Math.max(h[2],p[2]),y[3]=Math.max(h[3],p[3]);else{if(2===p.length||3===p.length)y[0]=
Math.min(h[0],p[0]),y[1]=Math.min(h[1],p[1]),y[2]=Math.max(h[2],p[0]),y[3]=Math.max(h[3],p[1])}else switch(p.type){case "extent":y[0]=Math.min(h[0],p.xmin);y[1]=Math.min(h[1],p.ymin);y[2]=Math.max(h[2],p.xmax);y[3]=Math.max(h[3],p.ymax);break;case "point":y[0]=Math.min(h[0],p.x),y[1]=Math.min(h[1],p.y),y[2]=Math.max(h[2],p.x),y[3]=Math.max(h[3],p.y)}return y};t.expandPointInPlace=function(h,p){p[0]<h[0]&&(h[0]=p[0]);p[0]>h[2]&&(h[2]=p[0]);p[1]<h[1]&&(h[1]=p[1]);p[1]>h[3]&&(h[3]=p[1])};t.expandWithNestedArray=
function(h,p,y=h){const I=p.length;let r=h[0],u=h[1],C=h[2];h=h[3];for(let E=0;E<I;E++){const G=p[E];r=Math.min(r,G[0]);u=Math.min(u,G[1]);C=Math.max(C,G[0]);h=Math.max(h,G[1])}y[0]=r;y[1]=u;y[2]=C;y[3]=h;return y};t.fromExtent=function(h,p=q()){p[0]=h.xmin;p[1]=h.ymin;p[2]=h.xmax;p[3]=h.ymax;return p};t.fromValues=function(h,p,y,I,r=q()){r[0]=h;r[1]=p;r[2]=y;r[3]=I;return r};t.height=M;t.intersection=function(h,p,y=h){const I=p[0],r=p[1],u=p[2];p=p[3];y[0]=R(h[0],I,u);y[1]=R(h[1],r,p);y[2]=R(h[2],
I,u);y[3]=R(h[3],r,p);return y};t.intersects=function(h,p){return Math.max(p[0],h[0])<=Math.min(p[2],h[2])&&Math.max(p[1],h[1])<=Math.min(p[3],h[3])};t.is=H;t.isPoint=function(h){return(0===J(h)||!isFinite(h[0]))&&(0===M(h)||!isFinite(h[1]))};t.offset=function(h,p,y,I=h){I[0]=h[0]+p;I[1]=h[1]+y;I[2]=h[2]+p;I[3]=h[3]+y;return I};t.pad=function(h,p,y=h){y[0]=h[0]-p;y[1]=h[1]-p;y[2]=h[2]+p;y[3]=h[3]+p;return y};t.set=S;t.setMax=function(h,p,y=h){y[2]=p[0];y[3]=p[1];y!==h&&(y[0]=h[0],y[1]=h[1]);return h};
t.setMin=function(h,p,y=h){y[0]=p[0];y[1]=p[1];y!==h&&(y[2]=h[2],y[3]=h[3]);return y};t.size=function(h,p){p[0]=h[2]-h[0];p[1]=h[3]-h[1]};t.toExtent=function(h,p){return new m({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:p})};t.width=J;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(t,c){const m=Math.PI/180;var q=c.earth.radius;const J=c.earth.eccentricitySquared;q={a1:q*J,a2:q*J*q*J,a3:q*
J*J/2,a4:q*J*q*J*2.5,a5:q*J+q*J*J/2,a6:1-J};c={4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};t.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;t.earthEllipsoidConstants=q;t.spheroids=c;t.toRadians=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(t){return function(){function c(q){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(q&&q.steps)for(const J of q.steps)J instanceof t?this.steps.push(J):this.steps.push(new t({wkid:J.wkid,wkt:J.wkt,isInverse:J.isInverse}))}c.cacheKey=function(q,J){return[void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():"",void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==J.wkt?J.wkt.toString():""].join()};
c.fromGE=function(q){const J=new c;let M="";for(const Q of q.steps)q=t.fromGE(Q),J.steps.push(q),M+=q.uid.toString()+",";J._cached_projection={};J._gtlistentry=null;J._chain=M;return J};var m=c.prototype;m.getInverse=function(){const q=new c;q.steps=[];for(let J=this.steps.length-1;0<=J;J--)q.steps.push(this.steps[J].getInverse());return q};m.getGTListEntry=function(){let q="";for(const J of this.steps)q+=J.uid.toString()+",";q!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
q);return this._gtlistentry};m.assignCachedGe=function(q,J,M){this._cached_projection[c.cacheKey(q,J)]=M};m.getCachedGeTransformation=function(q,J){let M="";for(const Q of this.steps)M+=Q.uid.toString()+",";M!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=M);q=this._cached_projection[c.cacheKey(q,J)];return void 0===q?null:q};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){let c=
0;return function(){function m(q=null){this.uid=c++;q?(this._wkt=void 0!==q.wkt?q.wkt:null,this._wkid=void 0!==q.wkid?q.wkid:-1,this._isInverse=void 0!==q.isInverse?!0===q.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}m.fromGE=function(q){const J=new m;J._wkt=q.wkt;J._wkid=q.wkid;J._isInverse=q.isInverse;return J};m.prototype.getInverse=function(){const q=new m;q._wkt=this.wkt;q._wkid=this._wkid;q._isInverse=!this.isInverse;return q};t._createClass(m,[{key:"wkt",get:function(){return this._wkt},
set:function(q){this._wkt=q;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(q){this._wkid=q;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(q){this._isInverse=q;this.uid=c++}}]);return m}()})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(t,c){t.createCopyError=function(){return new c("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};t.createSchemaValidationError=
function(m){return new c("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:m})};t.isCopyError=function(m){return m&&"webscene:failed-to-copy-embedded-resources"===m.name};t.isSchemaValidationError=function(m){return m&&"webscene:schema-validation"===m.name};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports"],function(t){t.isSpatialReferenceSupported=
function(c,m){return null==c?!1:"2d"===m?!0:"local"===m?!c.isGeographic:c.isWebMercator||c.isWGS84||4490===c.wkid||104971===c.wkid||104905===c.wkid||104903===c.wkid};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../core/Error ../../core/uuid ../../core/promiseUtils ../../core/asyncUtils ../../portal/support/resourceUtils".split(" "),function(t,c,m,q,J,M){async function Q(H,R){R=await J.result(H.resource.portalItem.addResource(H.resource,
H.content,R));if(!0===R.ok)H.finish&&H.finish(H.resource);else throw H.error&&H.error(R.error),R.error;}async function S(H,R){R=await J.result(H.resource.update(H.content,R));if(!0===R.ok)H.finish(H.resource);else throw H.error(R.error),R.error;}t.saveResources=async function(H,R,W){if(R&&R.resources){var X=R.portalItem===H.portalItem?new Set(H.paths):new Set;H.paths.length=0;H.portalItem=R.portalItem;var h=new Set(R.resources.toKeep.map(I=>I.resource.path)),p=new Set,y=[];h.forEach(I=>{X.delete(I);
H.paths.push(I)});for(const I of R.resources.toUpdate)if(X.delete(I.resource.path),h.has(I.resource.path)||p.has(I.resource.path)){const {resource:r,content:u,finish:C,error:E}=I,G=M.getSiblingOfSameTypeI(r,m.generateUUID());H.paths.push(G.path);y.push(Q({resource:G,content:u,finish:C,error:E},W))}else H.paths.push(I.resource.path),y.push(S(I,W)),p.add(I.resource.path);for(const I of R.resources.toAdd)y.push(Q(I,W)),H.paths.push(I.resource.path);X.forEach(I=>{I=R.portalItem.resourceFromPath(I);y.push(I.portalItem.removeResource(I).catch(()=>
{}))});if(0!==y.length&&(h=await q.eachAlways(y),q.throwIfAborted(W),W=h.filter(I=>"error"in I).map(I=>I.error),0<W.length))throw new c("save:resources","Failed to save one or more resources",{errors:W});}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/portal/support/resourceUtils":function(){define(["exports","../../core/maybe","../../core/Error","../../core/urlUtils","../../request"],function(t,c,m,q,J){function M(H){const R=H.lastIndexOf("/");return-1===R?[".",H]:[H.slice(0,R),H.slice(R+
1)]}function Q(H){{const p=q.getPathExtension(H);H=c.isNone(p)?[H,""]:[H.slice(0,H.length-p.length-1),`.${p}`]}const [R,W]=H,[X,h]=M(R);return[X,h,W]}async function S(H){return H instanceof Blob?H:(await J(H.url,{responseType:"blob"})).data}t.addOrUpdateResource=async function(H,R,W,X){if(!H.hasPath())throw new m(`portal-item-resource-${R}:invalid-path`,"Resource does not have a valid path");await H.portalItem.load(X);R=q.join(H.portalItem.userItemUrl,"add"===R?"addResources":"updateResources");const [h,
p]=M(H.path);W=await S(W);const y=new FormData;h&&"."!==h&&y.append("resourcesPrefix",h);y.append("fileName",p);y.append("file",W,p);y.append("f","json");c.isSome(X)&&X.access&&y.append("access",X.access);await H.portalItem.portal._request(R,{method:"post",body:y,signal:c.get(X,"signal")});return H};t.contentToBlob=S;t.fetchResources=async function(H,R={},W){await H.load(W);var X=q.join(H.itemUrl,"resources");const {start:h=1,num:p=10,sortOrder:y="asc",sortField:I="created"}=R;R={query:{start:h,num:p,
sortOrder:y,sortField:I},signal:c.get(W,"signal")};X=await H.portal._request(X,R);return{total:X.total,nextStart:X.nextStart,resources:X.resources.map(({created:r,size:u,resource:C})=>({created:new Date(r),size:u,resource:H.resourceFromPath(C)}))}};t.getSiblingOfSameType=function(H,R){if(!H.hasPath())return null;const [W,,X]=Q(H.path);return H.portalItem.resourceFromPath(q.join(W,R+X))};t.getSiblingOfSameTypeI=function(H,R){if(!H.hasPath())return null;const [W,,X]=Q(H.path);return H.portalItem.resourceFromPath(q.join(W,
R+X))};t.removeAllResources=async function(H,R){await H.load(R);const W=q.join(H.userItemUrl,"removeResources");return H.portal._request(W,{method:"post",query:{deleteAll:!0},signal:c.get(R,"signal")})};t.removeResource=async function(H,R,W){if(!R.hasPath())throw new m("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await H.load(W);const X=q.join(H.userItemUrl,"removeResources");await H.portal._request(X,{method:"post",query:{resource:R.path},signal:c.get(W,"signal")});
R.portalItem=null};t.splitPrefixFileNameAndExtension=Q;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../webdoc/applicationProperties/Viewing".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h){var p;m=p=function(y){function I(r){r=y.call(this,r)||this;r.viewing=null;return r}t._inheritsLoose(I,y);I.prototype.clone=function(){return new p({viewing:this.viewing?this.viewing.clone():null})};return I}(X.JSONSupport);c.__decorate([M.property({type:h,json:{write:!0}})],m.prototype,"viewing",void 0);return m=p=c.__decorate([S.subclass("esri.webscene.ApplicationProperties")],m)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./Search".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;m=y=function(I){function r(u){u=I.call(this,u)||this;u.search=null;return u}t._inheritsLoose(r,I);r.prototype.clone=function(){return new y(q.clone({search:this.search}))};return r}(h.JSONSupport);c.__decorate([Q.property({type:p,json:{write:!0}})],m.prototype,"search",void 0);return m=y=c.__decorate([H.subclass("esri.webdoc.applicationProperties.Viewing")],m)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/Collection ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p,y,I,r,u,C){var E;const G=I.ofType(u),F=I.ofType(C);m=E=function(N){function T(ba){ba=N.call(this,ba)||this;ba.addressSearchEnabled=!0;ba.enabled=!0;ba.hintText=null;ba.layers=new G;ba.tables=new F;return ba}t._inheritsLoose(T,N);var Z=T.prototype;Z.readAddressSearchEnabled=function(ba){return!ba};Z.writeAddressSearchEnabled=function(ba,xa,Ca){xa[Ca]=!ba};Z.clone=function(){return new E(q.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,
hintText:this.hintText,layers:this.layers,tables:this.tables}))};return T}(y.JSONSupport);c.__decorate([Q.property({type:Boolean,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder"},default:!0,origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"addressSearchEnabled",void 0);c.__decorate([H.reader("addressSearchEnabled")],m.prototype,"readAddressSearchEnabled",null);c.__decorate([W.writer("addressSearchEnabled")],m.prototype,"writeAddressSearchEnabled",null);c.__decorate([Q.property({type:Boolean,
json:{write:!0,default:!0}})],m.prototype,"enabled",void 0);c.__decorate([Q.property({type:String,json:{write:!0}})],m.prototype,"hintText",void 0);c.__decorate([Q.property({type:G,json:{write:{overridePolicy:r.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],m.prototype,"layers",void 0);c.__decorate([Q.property({type:F,json:{read:!0,write:{overridePolicy:r.writeNonEmptyCollectionPolicy},origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"tables",void 0);return m=
E=c.__decorate([R.subclass("esri.webdoc.applicationProperties.Search")],m)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(t){t.writeNonEmptyCollectionPolicy=function(c){return{enabled:!(null==c||!c.length)}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchLayerField".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;m=y=function(I){function r(u){u=I.call(this,u)||this;u.field=null;u.id=null;u.subLayer=null;return u}t._inheritsLoose(r,I);r.prototype.clone=function(){return new y(q.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return r}(h.JSONSupport);c.__decorate([Q.property({type:p,json:{write:{isRequired:!0}}})],m.prototype,"field",void 0);c.__decorate([Q.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"id",void 0);c.__decorate([Q.property({type:M.Integer,
json:{write:!0}})],m.prototype,"subLayer",void 0);return m=y=c.__decorate([H.subclass("esri.webdoc.applicationProperties.SearchLayer")],m)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h){var p;m=p=function(y){function I(r){r=y.call(this,r)||this;r.exactMatch=!1;r.name=null;r.type=null;return r}t._inheritsLoose(I,y);I.prototype.clone=function(){return new p({exactMatch:this.exactMatch,type:this.type,name:this.name})};return I}(X.JSONSupport);c.__decorate([M.property({type:Boolean,json:{write:!0}})],m.prototype,"exactMatch",void 0);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);c.__decorate([Q.enumeration(h.kebabDict)],
m.prototype,"type",void 0);return m=p=c.__decorate([S.subclass("esri.webdoc.applicationProperties.SearchLayerField")],m)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchTableField".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;m=y=function(I){function r(u){u=I.call(this,u)||this;u.field=null;u.id=null;return u}t._inheritsLoose(r,I);r.prototype.clone=function(){return new y(q.clone({field:this.field,id:this.id}))};return r}(h.JSONSupport);c.__decorate([Q.property({type:p,json:{write:{isRequired:!0}}})],m.prototype,"field",void 0);c.__decorate([Q.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"id",void 0);return m=y=c.__decorate([H.subclass("esri.webdoc.applicationProperties.SearchTable")],
m)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),function(t,
c,m,q,J,M,Q,S,H,R,W,X,h){var p;m=p=function(y){function I(r){r=y.call(this,r)||this;r.exactMatch=!1;r.name=null;r.type=null;return r}t._inheritsLoose(I,y);I.prototype.clone=function(){return new p({exactMatch:this.exactMatch,type:this.type,name:this.name})};return I}(X.JSONSupport);c.__decorate([M.property({type:Boolean,json:{write:!0}})],m.prototype,"exactMatch",void 0);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);c.__decorate([Q.enumeration(h.kebabDict)],m.prototype,
"type",void 0);return m=p=c.__decorate([S.subclass("esri.webdoc.applicationProperties.SearchTableField")],m)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./Lighting ./background/utils".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p,y){var I;m=(r,u,C)=>({enabled:!C||!C.isPresentation});h=I=function(r){function u(E){E=r.call(this,E)||this;E.lighting=new p;E.background=null;E.atmosphereEnabled=!0;E.starsEnabled=!0;return E}t._inheritsLoose(u,r);var C=u.prototype;C.clone=function(){return new I(this.cloneConstructProperties())};C.cloneConstructProperties=function(){return{lighting:p.prototype.clone.call(this.lighting),background:q.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,
starsEnabled:this.starsEnabled}};return u}(h.JSONSupport);c.__decorate([Q.property({type:p,json:{write:!0}})],h.prototype,"lighting",void 0);c.__decorate([Q.property(y.backgroundProperty)],h.prototype,"background",void 0);c.__decorate([Q.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:m}}})],h.prototype,"atmosphereEnabled",void 0);c.__decorate([Q.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:m}}})],h.prototype,"starsEnabled",void 0);return h=I=c.__decorate([H.subclass("esri.webscene.Environment")],
h)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;m=y=
function(I){function r(C){C=I.call(this,C)||this;C.date=null;C.directShadowsEnabled=!1;C.displayUTCOffset=null;return C}t._inheritsLoose(r,I);var u=r.prototype;u.readDate=function(C,E){return null!=E.datetime&&new Date(E.datetime)||null};u.writeDate=function(C,E,G){E[G]=C.getTime()};u.readDirectShadowsEnabled=function(C,E){return!!E.directShadows};u.writedirectShadowsEnabled=function(C,E,G){C&&(E[G]=C)};u.writeDisplayUTCOffset=function(C,E){null!=C&&(E.displayUTCOffset=C)};u.clone=function(){return new y(this.cloneConstructProperties())};
u.cloneConstructProperties=function(){const C={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(C.date=new Date(this.date.getTime()));return C};return r}(p.JSONSupport);c.__decorate([M.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],m.prototype,"date",void 0);c.__decorate([S.reader("date",["datetime"])],m.prototype,"readDate",null);c.__decorate([R.writer("date")],m.prototype,"writeDate",null);
c.__decorate([M.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],m.prototype,"directShadowsEnabled",void 0);c.__decorate([S.reader("directShadowsEnabled",["directShadows"])],m.prototype,"readDirectShadowsEnabled",null);c.__decorate([R.writer("directShadowsEnabled")],m.prototype,"writedirectShadowsEnabled",null);c.__decorate([M.property({type:Number,json:{write:!0}})],m.prototype,"displayUTCOffset",void 0);c.__decorate([R.writer("displayUTCOffset")],m.prototype,"writeDisplayUTCOffset",
null);return m=y=c.__decorate([H.subclass("esri.webscene.Lighting")],m)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(t,c,m){c={base:c,key:"type",typeMap:{color:m}};c={types:c,json:{read:function(q){return(J,M,Q)=>{if(!J)return J;for(const S in q.typeMap)if(J.type===S)return M=new q.typeMap[S],M.read(J,Q),M}}(c),write:{overridePolicy:(q,J,M)=>({enabled:!M||!M.isPresentation})}}};t.backgroundProperty=c;Object.defineProperty(t,"__esModule",
{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(t,c,m,q,J,M,Q,S,H,R,W,X){m=function(h){function p(y){return h.call(this,
y)||this}t._inheritsLoose(p,h);p.prototype.clone=function(){};return p}(X.JSONSupport);c.__decorate([M.property({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0);return m=c.__decorate([S.subclass("esri.webscene.background.Background")],m)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../symbols/support/materialUtils ./Background".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;m={...h.colorAndTransparencyProperty,nonNullable:!0};p=y=function(I){function r(C){C=I.call(this,C)||this;C.type="color";C.color=new X([0,0,0,1]);return C}t._inheritsLoose(r,I);var u=r.prototype;u.clone=function(){return new y(this.cloneProperties())};u.cloneProperties=function(){return{color:this.color.clone()}};return r}(p);c.__decorate([Q.enumeration({color:"color"},{readOnly:!0})],p.prototype,"type",void 0);c.__decorate([M.property(m)],p.prototype,"color",
void 0);return p=y=c.__decorate([S.subclass("esri.webscene.background.ColorBackground")],p)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/SpatialReference ../Viewpoint ./Environment".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p,y){var I;m=I=function(r){function u(C){C=r.call(this,C)||this;C.environment=new y;C.spatialReference=null;C.viewpoint=null;return C}t._inheritsLoose(u,r);u.prototype.clone=function(){return new I({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};t._createClass(u,[{key:"viewingMode",set:function(C){this._set("viewingMode",
C)}}]);return u}(X.JSONSupport);c.__decorate([M.property({type:y,json:{write:{isRequired:!0}}})],m.prototype,"environment",void 0);c.__decorate([M.property({type:h})],m.prototype,"spatialReference",void 0);c.__decorate([M.property({type:["local","global"]})],m.prototype,"viewingMode",null);c.__decorate([M.property({type:p,json:{write:{isRequired:!0}}})],m.prototype,"viewpoint",void 0);return m=I=c.__decorate([S.subclass("esri.webscene.InitialViewProperties")],m)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../core/Collection ../core/collectionUtils ./Slide".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p,y){const I=h.ofType(y);m=function(r){function u(E){E=r.call(this,E)||this;E.slides=new I;return E}t._inheritsLoose(u,r);var C=u.prototype;C.destroy=function(){this.slides.forEach(E=>E.destroy());this.slides.removeAll()};C.clone=function(){return new this.constructor({slides:this.slides.clone()})};t._createClass(u,[{key:"slides",set:function(E){E&&(E=E.filter(G=>!!G.viewpoint));this._set("slides",p.referenceSetter(E,this._get("slides"),I))}}]);return u}(X.JSONSupport);
c.__decorate([J.property({type:I,nonNullable:!0,json:{write:!0}}),M.cast(p.castForReferenceSetter)],m.prototype,"slides",null);return m=c.__decorate([S.subclass("esri.webscene.Presentation")],m)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../core/JSONSupport ../core/Collection ../core/collectionUtils ../core/asyncUtils ../Basemap ../chunks/vec3f64 ../chunks/vec3 ../views/3d/support/mathUtils ../support/basemapUtils ../layers/Layer ../Viewpoint ../webdoc/support/Thumbnail ./Lighting ../layers/mixins/OperationalLayer ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p,y,I,r,u,C,E,G,F,N,T,Z,ba,xa,Ca,Ja,Ka,Na,Ma,Ga){function La(pa){if("building-scene"===pa.type||"map-image"===pa.type)return pa.allSublayers.toArray()}function Ia(pa){if(pa=La(pa))return pa.filter(qa=>qa.visible).map(qa=>qa.id)}function Oa(pa,qa){pa=qa-pa;43200<pa&&(pa-=86400);-43200>pa&&(pa+=86400);return pa}let Sa=0;const za=I.ofType(Ma["default"]),Ra=J.getLogger("esri.webscene.Slide");m=function(pa){function qa(L){L=pa.call(this,L)||this;L._applyToController=
null;L.id=Date.now().toString(16)+"-slide-"+Sa++;L.title=new Ga;L.description=new Ja;L.thumbnail=new ba;L.viewpoint=null;L.basemap=null;L.ground=null;L.environment=new Ka.SlideEnvironment;L.visibleLayers=new za;return L}t._inheritsLoose(qa,pa);var ha=qa.prototype;ha.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};ha.castTitle=function(L){return"string"===typeof L?new Ga({text:L}):M.ensureType(Ga,
L)};ha.castDescription=function(L){return"string"===typeof L?new Ja({text:L}):M.ensureType(Ja,L)};ha.castThumbnail=function(L){return"string"===typeof L?new ba({url:L}):M.ensureType(ba,L)};ha.castBasemap=function(L){return N.ensureType(L)};ha.castVisibleLayers=function(L){return L&&"function"===typeof L.map?L.map(aa=>{if("string"===typeof aa)return{id:aa};if(aa instanceof T){const ea=Ia(aa);return{id:aa.id,sublayerIds:ea}}if(aa.id)return{id:aa.id,sublayerIds:aa.sublayerIds};Ra.warn('Invalid visible layer, expected { id }, Layer or "id"');
return aa}):null};ha.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};ha._updateVisibleLayersFrom=function(L){const aa=
[];return p.eachAlways(this._allLayers(L.map).map(ea=>L.whenLayerView(ea).then(ta=>{if(ta.visible){const a=Ia(ea);aa.push(new Ma["default"]({id:ta.layer.id,sublayerIds:a}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(aa)})};ha.updateFrom=function(L,aa){aa={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...aa&&aa.screenshot}};return L.when(()=>{this.viewpoint=L.viewpoint.clone();this.environment.lighting=xa.prototype.clone.apply(L.environment.lighting);
this.basemap=L.map.basemap&&L.map.basemap.clone()||null;this.ground=L.map.ground?Na.fromGround(L.map.ground):null;return this._updateVisibleLayersFrom(L)}).then(()=>L.takeScreenshot(aa.screenshot)).then(ea=>{this.thumbnail=new ba({url:ea.dataUrl});return this})};ha.applyTo=async function(L,aa){var ea;this._applyToController&&this._applyToController.abort();let ta=p.createAbortController();this._applyToController=ta;let a=p.onAbortOrThrow(aa,()=>ta.abort());const b={animate:!0,...aa,signal:this._applyToController.signal};
aa=await u.result((async()=>{await this._applyBasemap(L,b);this._applyLayerVisibility(L);this._applyGround(L);await this._applyViewpoint(L,b)})());this._applyToController===ta&&(this._applyToController=null);null==(ea=a)?void 0:ea.remove();ta=a=null;if(!1===aa.ok)throw aa.error;return this};ha._applyBasemap=async function(L,aa){if(this.basemap){try{await this.basemap.load(aa)}catch(ea){if(p.isAbortError(ea))throw ea;}L.map.basemap=N.clonePreservingTiledLayers(this.basemap,L.map.basemap)}};ha._applyGround=
function(L){this.ground&&(L.map.ground=this.ground.cloneAndApplyTo(L.map.ground))};ha._allLayers=function(L){const aa=new I;this._collectLayers(L,aa);this._collectLayers(L.ground,aa);return aa};ha._collectLayers=function(L,aa){L.layers.forEach(ea=>{Ca.isOperationalLayer(ea)&&(aa.add(ea),ea.layers&&this._collectLayers(ea,aa))})};ha._applyLayerVisibility=function(L){this.visibleLayers&&this._allLayers(L.map).forEach(aa=>{var ea=this.visibleLayers.find(a=>a.id===aa.id);aa.visible=null!=ea;const ta=ea&&
ea.sublayerIds;ea=La(aa);ta&&ea&&ea.forEach(a=>a.visible=0<=ta.indexOf(a.id))})};ha._applyViewpoint=async function(L,aa){if(this.viewpoint&&!aa.ignoreViewpoint){q.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=L.camera.fov);if(aa.animate&&this.get("environment.lighting.date")){await this._animateToLighting(L,aa);return}aa.animate&&(L.environment.updateLighting(this.environment.lighting.clone()),await L.goTo(this.viewpoint,aa));L.viewpoint=this.viewpoint}L.environment.updateLighting(this.environment.lighting.clone())};
ha._animateToLighting=async function(L,aa){let ea=null;"global"===L.viewingMode&&(ea=this._animateLightingWithCamera(L));L.environment.lighting.cameraTrackingEnabled=!1;L.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&(L.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return L.goTo(this.viewpoint,aa).then(()=>{L.environment.updateLighting(this.environment.lighting.clone());
ea&&ea.remove();L.environment.lighting.cameraTrackingEnabled=!0},ta=>{ea&&ea.remove();L.environment.lighting.cameraTrackingEnabled=!0;throw ta;})};ha._getTime=function(L){const aa=L.getTime();L=3600*L.getUTCHours()+60*L.getUTCMinutes()+L.getUTCSeconds();return[aa,L]};ha._setTime=function(L,aa,ea){L.setTime(aa);L.setUTCHours(ea/3600);L.setUTCMinutes(ea%3600/60);L.setUTCSeconds(ea%3600%60);return L};ha._animateLightingWithCamera=function(L){const [aa,ea]=this._getTime(new Date(L.environment.lighting.date.toString())),
[ta,a]=this._getTime(this.environment.lighting.date),b=Oa(ea,a),g=L.renderCoordsHelper,n=E.create();g.toRenderCoords(L.camera.position,n);const z=E.create(),B=E.create();q.isSome(this.viewpoint.camera)&&g.toRenderCoords(this.viewpoint.camera.position,z);const w=new Date;return L.watch("camera",d=>{g.toRenderCoords(d.position,B);var e=G.squaredDistance(n,B);const v=G.squaredDistance(z,B);d=0;0!==e+v&&(d=e/(e+v));e=aa+(ta-aa)*d;d=F.moduloPositive(ea+b*d,86400);L.environment.lighting.date=this._setTime(w,
e,d)})};qa.createFrom=function(L,aa){return(new this).updateFrom(L,aa)};t._createClass(qa,[{key:"visibleLayers",set:function(L){this._set("visibleLayers",r.referenceSetter(L,this._get("visibleLayers"),za))}}]);return qa}(y.JSONSupport);c.__decorate([Q.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"id",void 0);c.__decorate([Q.property({type:Ga,json:{default:()=>new Ga({text:""}),write:{isRequired:!0}}})],m.prototype,"title",void 0);c.__decorate([S.cast("title")],m.prototype,"castTitle",
null);c.__decorate([Q.property({type:Ja,json:{write:{overridePolicy(pa){return{enabled:!(!pa||!pa.text)}}}}})],m.prototype,"description",void 0);c.__decorate([S.cast("description")],m.prototype,"castDescription",null);c.__decorate([Q.property({type:ba,json:{default:()=>new ba({url:""}),write:{isRequired:!0}}})],m.prototype,"thumbnail",void 0);c.__decorate([S.cast("thumbnail")],m.prototype,"castThumbnail",null);c.__decorate([Q.property({type:Z,nonNullable:!0,json:{write:{isRequired:!0}}})],m.prototype,
"viewpoint",void 0);c.__decorate([Q.property({type:C,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],m.prototype,"basemap",void 0);c.__decorate([S.cast("basemap")],m.prototype,"castBasemap",null);c.__decorate([Q.property({type:Na,json:{write:!0}})],m.prototype,"ground",void 0);c.__decorate([Q.property({type:za,json:{write:{isRequired:!0}}})],m.prototype,"visibleLayers",null);c.__decorate([S.cast("visibleLayers")],m.prototype,"castVisibleLayers",null);c.__decorate([Q.property({type:Ka.SlideEnvironment,
json:{write:!0}})],m.prototype,"environment",void 0);return m=c.__decorate([R.subclass("esri.webscene.Slide")],m)})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X){var h;m=h=function(p){function y(){var r=p.apply(this,arguments)||this;r.url="";return r}t._inheritsLoose(y,p);var I=y.prototype;I.destroy=function(){this.url=""};I.clone=function(){return new h({url:this.url})};return y}(X.JSONSupport);c.__decorate([M.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"url",void 0);return m=h=c.__decorate([S.subclass("esri.webdoc.support.Thumbnail")],m)})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X){var h;m=h=function(p){function y(){var I=p.apply(this,arguments)||this;I.text="";return I}t._inheritsLoose(y,p);y.prototype.clone=function(){return new h({text:this.text})};return y}(X.JSONSupport);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);return m=h=c.__decorate([S.subclass("esri.webscene.support.Description")],m)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../Lighting".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;t.SlideEnvironment=y=function(I){function r(){var u=I.apply(this,arguments)||this;u.lighting=new p;return u}c._inheritsLoose(r,I);r.prototype.clone=function(){return new y({lighting:p.prototype.clone.call(this.lighting)})};return r}(h.JSONSupport);m.__decorate([Q.property({type:p,json:{write:!0}})],t.SlideEnvironment.prototype,"lighting",void 0);t.SlideEnvironment=y=m.__decorate([H.subclass("esri.webscene.Environment")],t.SlideEnvironment);Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../webdoc/support/opacityUtils ../../Ground".split(" "),function(t,c,m,
q,J,M,Q,S,H,R,W,X,h,p){var y;m=y=function(I){function r(){var C=I.apply(this,arguments)||this;C.opacity=null;return C}t._inheritsLoose(r,I);var u=r.prototype;u.clone=function(){return new y({opacity:this.opacity})};u.cloneAndApplyTo=function(C){if(null==this.opacity)return C;C=null!=C?C.clone():new p;C.opacity=this.opacity;return C};r.fromGround=function(C){return new y({opacity:C.opacity})};return r}(X.JSONSupport);c.__decorate([M.property({type:Number,json:{type:J.Integer,read:{reader:h.transparencyToOpacity,
source:"transparency"},write:{writer:(I,r)=>{r.transparency=h.opacityToTransparency(I)},target:"transparency"}}})],m.prototype,"opacity",void 0);return m=y=c.__decorate([S.subclass("esri.webscene.support.SlideGround")],m)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X,h,p){var y;t.SlideVisibleLayer=y=function(I){function r(u){u=I.call(this,u)||this;u.id="";u.sublayerIds=null;return u}c._inheritsLoose(r,I);r.prototype.clone=function(){return new y({id:this.id,sublayerIds:J.clone(this.sublayerIds)})};return r}(p.JSONSupport);m.__decorate([S.property({type:String,json:{write:!0}})],t.SlideVisibleLayer.prototype,"id",void 0);m.__decorate([S.property({type:[Q.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],
t.SlideVisibleLayer.prototype,"sublayerIds",void 0);t.SlideVisibleLayer=y=m.__decorate([R.subclass("esri.webscene.support.SlideVisibleLayer")],t.SlideVisibleLayer);t.default=t.SlideVisibleLayer;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X){var h;m=h=function(p){function y(){var I=p.apply(this,arguments)||this;I.text="";return I}t._inheritsLoose(y,p);y.prototype.clone=function(){return new h({text:this.text})};return y}(X.JSONSupport);c.__decorate([M.property({type:String,json:{write:{isRequired:!0}}})],m.prototype,"text",void 0);return m=h=c.__decorate([S.subclass("esri.webscene.support.Title")],m)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(t,c,m,q,J,M,Q,S,H,R,W,X){var h;m=h=function(p){function y(I){return p.call(this,I)||this}t._inheritsLoose(y,p);y.prototype.clone=function(){return new h({name:this.name,path:this.path,title:this.title})};return y}(X.JSONSupport);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"path",void 0);c.__decorate([M.property({type:String,json:{write:!0}})],m.prototype,"title",void 0);return m=h=
c.__decorate([S.subclass("esri.webscene.TransportationNetwork")],m)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(t,c,m){m=function(q){function J(M,Q){return q.call(this,M,Q,"webscene")||this}c._inheritsLoose(J,q);c._createClass(J,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return J}(m.Version);t.Version=m;t.default=
m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports","./Error"],function(t,c){let m=function(){function q(M,Q,S=""){this.major=M;this.minor=Q;this._context=S}var J=q.prototype;J.lessThan=function(M,Q){return this.major<M||M===this.major&&this.minor<Q};J.since=function(M,Q){return!this.lessThan(M,Q)};J.validate=function(M){if(this.major!==M.major)throw new c((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+
" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:M});};J.clone=function(){return new q(this.major,this.minor,this._context)};q.parse=function(M,Q=""){const [S,H]=M.split(".");var R=/^\s*\d+\s*$/;if(!S||!S.match||!S.match(R))throw new c((Q&&Q+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:M});if(!H||!H.match||!H.match(R))throw new c((Q&&Q+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",
{version:M});M=parseInt(S,10);R=parseInt(H,10);return new q(M,R,Q)};return q}();t.Version=m;Object.defineProperty(t,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/maybe ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/Error ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/promiseUtils ./core/accessorSupport/read ./geometry/support/spatialReferenceUtils ./geometry/SpatialReference ./geometry/Extent ./geometry/support/jsonUtils ./core/Collection ./kernel ./core/Promise ./core/Loadable ./portal/Portal ./core/loadAll ./portal/PortalItem ./core/Handles ./Map ./Viewpoint ./core/MultiOriginJSONSupport ./core/accessorSupport/originUtils ./webdoc/support/thumbnailUtils ./geometry/HeightModelInfo ./geometry/projection ./geometry/support/heightModelInfoUtils ./support/webSceneUtils ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(t,
c,m,q,J,M,Q,S,H,R,W,X,h,p,y,I,r,u,C,E,G,F,N,T,Z,ba,xa,Ca,Ja,Ka,Na,Ma,Ga,La,Ia,Oa,Sa,za,Ra,pa,qa,ha,L,aa,ea,ta,a,b){const g=Q.getLogger("esri.WebScene"),n=new b.Version(1,22);q=function(z){function B(d){var e=z.call(this,d)||this;e._handles=new Na;e.applicationProperties=null;e.clippingArea=null;e.clippingEnabled=!1;e.heightModelInfo=null;e.sourceVersion=null;e.supportsHeightModelInfo=!0;e.transportationNetworks=null;e.presentation=new ta;e.initialViewProperties=new ea;e.portalItem=null;e.resourceInfo=
null;e.debouncedSaveOperations=u.debounce(async(v,A,D)=>{switch(v){case 0:return e._saveImpl(A);case 1:return e._saveAsImpl(D,A)}});e.resourceReferences={portalItem:null,paths:[]};e.authoringApp=null;e.authoringAppVersion=null;e._isAuthoringAppSetByUser=!1;e._isAuthoringAppVersionSetByUser=!1;return e}c._inheritsLoose(B,z);var w=B.prototype;w.initialize=function(){this.when().catch(d=>{g.error("#load()","Failed to load web scene",d)});if(this.resourceInfo){let d;try{d=this._validateJSON(this.resourceInfo)}catch(e){this.addResolvingPromise(u.reject(e));
return}this.read(d);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};w.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const d=this.portalItem;this.portalItem=null;null==d?void 0:d.destroy()};w.writeClippingArea=function(d,e){e.clippingArea||(e.clippingArea={});e.clippingArea.geometry=
d.toJSON()};w.readClippingEnabled=function(d,e){return e.clippingArea?!!e.clippingArea.clip:!1};w.writeClippingEnabled=function(d,e){this.clippingArea&&(e.clippingArea||(e.clippingArea={}),e.clippingArea.clip=d)};w.writeLayers=function(d,e,v,A){const D={...A,layerContainerType:"operational-layers"};d=d.map(O=>this.verifyWriteLayer(O,A)?O.write(null,D):null).filter(O=>!!O);e[v]=d.toArray()};w.verifyWriteLayer=function(d,e){return"write"in d?!0:(e&&e.messages&&e.messages.push(new p("layer:unsupported",
`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in web scenes`,{layer:d})),!1)};w.readSourceVersion=function(d,e){const [v,A]=e.version.split(".");return new b.Version(parseInt(v,10),parseInt(A,10))};w.writeSourceVersion=function(d,e,v){e[v]=`${n.major}.${n.minor}`};w.writeAuthoringApp=function(d,e){e.authoringApp=d&&this._isAuthoringAppSetByUser?d:"ArcGIS API for JavaScript"};w.writeAuthoringAppVersion=function(d,e){e.authoringAppVersion=d&&this._isAuthoringAppVersionSetByUser?
d:Z.version};w.writeGround=function(d,e,v,A){e[v]=d?d.write(null,A):{transparency:0,layers:[]}};w.readInitialViewProperties=function(d,e){d={};e.initialState&&e.initialState.environment&&(d.environment=aa.fromJSON(e.initialState.environment));d.spatialReference=e.spatialReference?G.fromJSON(e.spatialReference):G.WebMercator;d.viewingMode=e.viewingMode||"global";e.initialState&&e.initialState.viewpoint&&(d.viewpoint=Ga.fromJSON(e.initialState.viewpoint));return new ea(d)};w.load=function(d){this.addResolvingPromise(this._loadFromSource());
return u.resolve(this)};w.loadAll=function(){return Ja.loadAll(this,d=>{const e=this.presentation&&this.presentation.slides;d(this.ground,this.basemap,this.layers,e&&e.map(v=>v.basemap))})};w.read=function(d,e){e={...e,origin:"web-scene"};const v=this._isAuthoringAppVersionSetByUser,A=this._isAuthoringAppSetByUser;C.readLoadable(this,d,D=>z.prototype.read.call(this,d,D),e);A||(this._isAuthoringAppSetByUser=!1);v||(this._isAuthoringAppVersionSetByUser=!1);if(d.baseMap&&Array.isArray(d.baseMap.elevationLayers)&&
this.sourceVersion.supportsVisibleElevationLayersInSlides){e=d.baseMap.elevationLayers.map(V=>({id:V.id}));const D=this.presentation.slides,O=(V,Y)=>V.visibleLayers.some(ca=>ca.id===Y),K=e.filter(V=>!D.some(Y=>O(Y,V.id)));D.forEach(V=>{V.visibleLayers.addMany(K)})}};w._writeBasemapElevationLayers=function(d){const e=d.ground&&d.ground.layers;!d.baseMap&&e&&e.length&&(d.baseMap={title:"Basemap",baseMapLayers:[]});d.baseMap&&(d.baseMap.elevationLayers=J.clone(e))};w.write=function(d,e){var v;if("loaded"!==
this.loadStatus)throw e=new p("webscene:not-loaded","Web scene must be loaded before it can be serialized"),g.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),e;this._runLayersIdGC();var A=!(null!=(v=e)&&v.messages);e={messages:[],...e,origin:"web-scene"};d=z.prototype.write.call(this,d,e);if(A&&(e=e.messages.filter(D=>"web-document-write:property-required"===D.name),e.length))throw A=new p("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",
{errors:e}),g.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",e),A;this._writeBasemapElevationLayers(d);return d};w.save=async function(d){return this.debouncedSaveOperations(0,d)};w._saveImpl=async function(d){this.portalItem||(g.error("save(): requires the .portalItem property to be set"),await u.reject(new p("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&await u.reject(new p("webscene:portal-item-wrong-type",
'Portal item needs to have type "Web Scene"'));const e=this._updateFromPromise;await this._ensureLoadBeforeSave();const v=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&y.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||Ca.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),A=this.write(null,v);await u.all(v.resources.pendingOperations);
await this._verifySave(A,v,d);this._updateTypeKeywords(this.portalItem);await this.portalItem.update({data:A});await ha.saveResources(this.resourceReferences,v,null);Ia.updateOrigins(v);e&&await e;await this._saveThumbnail();return this.portalItem};w.saveAs=async function(d,e){return this.debouncedSaveOperations(1,e,d)};w._saveAsImpl=async function(d,e){d=Ka.from(d);d||(g.error("saveAs(portalItem): requires a portal item parameter"),await u.reject(new p("webscene:portal-item-required","saveAs requires a portal item to save to")));
d.id&&(d=d.clone(),d.id=null);const v=d.portal||Ca.getDefault();await this._ensureLoadBeforeSave();d.type="Web Scene";d.portal=v;const A=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:v,portalItem:d,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),D=this.write(null,A);await u.all(A.resources.pendingOperations);await this._verifySaveAs(D,A,e);const O=this.thumbnailUrl,K=!this._isOverridden("thumbnailUrl");
this._updateTypeKeywords(d);await v._signIn();await v.user.addItem({item:d,folder:e&&e.folder,data:D});await ha.saveResources(this.resourceReferences,A,null);this.portalItem=d;La.MultiOriginJSONSupport.prototype.read.call(this,{version:D.version,authoringApp:D.authoringApp,authoringAppVersion:D.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:d.itemUrl&&y.urlToObject(d.itemUrl)});Ia.updateOrigins(A);O&&(this.thumbnailUrl=K?y.addQueryParameter(O,"w","8192"):O);A.portalItem=d;await this._saveThumbnail();
return d};w._saveThumbnail=async function(){this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))};w._verifySave=function(d,e,v,A=!1){if(!E.isEarth(this.spatialReference))return u.reject(new p("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let D=e.messages.filter(K=>"error"===K.type).map(K=>
new p(K.name,K.message,K.details));e.blockedRelativeUrls&&(D=D.concat(e.blockedRelativeUrls.map(K=>new p("url:unsupported",`Relative url '${K}' is not supported in Web Scene`))));v&&v.ignoreUnsupported&&(D=D.filter(K=>"layer:unsupported"!==K.name&&"symbol:unsupported"!==K.name&&"symbol-layer:unsupported"!==K.name&&"property:unsupported"!==K.name&&"url:unsupported"!==K.name&&"scenemodification:unsupported"!==K.name));null!=v&&v.requiredPropertyChecksDisabled&&(D=D.filter(K=>"web-document-write:property-required"!==
K.name));const O=v&&v.strictSchemaValidationEnabled;return(O?(new Promise(function(K,V){t(["./webscene/support/schemaValidator"],K,V)})).then(K=>{K=K.validate(d);if(0<K.length){const V=`webscene did not validate:\n${K.join("\n")}`;g.error(`${A?"saveAs":"save"}(): ${V}`)}return K.map(V=>new p("webscene:schema-validation",V))}).then(K=>{if(O&&0<K.length)throw pa.createSchemaValidationError(K.concat(D));return D}):u.resolve(D)).then(K=>{if(0<K.length)return u.reject(new p("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",
{errors:K}))})};w._verifySaveAs=function(d,e,v){return this.canSaveAs(e)?u.reject(pa.createCopyError()):this._verifySave(d,e,v,!0)};w.verifySaveAs=function(d){const e=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),v=this.write(null,e);return this._verifySaveAs(v,e,d)};w.canSaveAs=function(d){d||(d=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write(null,d));return d.verifyItemRelativeUrls&&0<d.verifyItemRelativeUrls.writtenUrls.length};w.updateFrom=
async function(d,e={}){this._updateFromPromise=d=this._updateFromInternal(d,e);await d;this._updateFromPromise===d&&(this._updateFromPromise=null)};w._updateFromInternal=async function(d,e={}){await d.whenReady();!e.environmentExcluded&&d.environment&&(this.initialViewProperties.environment=aa.prototype.clone.apply(d.environment));!e.viewpointExcluded&&d.viewpoint&&(this.initialViewProperties.viewpoint=d.viewpoint.clone());this.initialViewProperties.spatialReference=d.spatialReference.clone();this.initialViewProperties.viewingMode=
d.viewingMode;d.clippingArea?d.clippingArea!==this.clippingArea&&(this.clippingArea=d.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;d.heightModelInfo&&(this.heightModelInfo=d.heightModelInfo.clone());d.map===this&&d.allLayerViews.forEach(v=>{v.layer.visible=v.visible});(!1===e.thumbnailExcluded||null==e.thumbnailExcluded&&!e.viewpointExcluded)&&await this._updateFromThumbnail(d,e.thumbnailSize||void 0)};w._updateFromThumbnail=async function(d,e){e=Oa.getOptimalThumbnailSize(d,
e);this.thumbnailUrl=(await d.takeScreenshot({format:"jpg",width:e.width,height:e.height,disableDecorations:!0})).dataUrl};w._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};w._readAndLoadFromJSON=function(d,e){d=this._validateJSON(d);this.read(d,e);return this._loadFromJSON(d,e)};w._extractOperationalLayers=function(d){const e=[];if(!this.sourceVersion.supportsGround&&
d.baseMap&&Array.isArray(d.baseMap.elevationLayers))for(const D of d.baseMap.elevationLayers)e.push(D);const v=[],A=D=>{D.layers&&(D.layers=D.layers.filter(A));return"ArcGISTiledElevationServiceLayer"===D.layerType?(this.sourceVersion.supportsGround||v.push(D),!1):!0};return{operationalLayers:d.operationalLayers?d.operationalLayers.filter(A):[],operationalElevationLayers:v,basemapElevationLayers:e}};w._loadFromJSON=function(d,e){const v=new T;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>
new Promise(function(A,D){t(["./layers/support/layersCreator"],A,D)})).then(({populateOperationalLayers:A})=>{const {operationalLayers:D,operationalElevationLayers:O,basemapElevationLayers:K}=this._extractOperationalLayers(d),V=[],Y={context:{...e,layerContainerType:"operational-layers"}};this.portalItem&&(Y.context.portal=this.portalItem.portal||Ca.getDefault());0<K.length&&V.push(A(this.ground.layers,K,{...Y,context:{...Y.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));
0<O.length&&V.push(A(v,O,{...Y,context:{...Y.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));D&&0<D.length&&V.push(A(this.layers,D,Y));return u.eachAlways(V).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(v)})};w._ensureLoadBeforeSave=async function(){await this.load();await this._loadObjectsWithLayers();const d=[];for(const e of this.allLayers.items)if("beforeSave"in e&&"function"===typeof e.beforeSave){const v=
e.beforeSave();v&&d.push(v)}await u.eachAlways(d)};w._loadObjectsWithLayers=async function(){const d=[];this.ground&&d.push(this.ground.load());this.basemap&&d.push(this.basemap.load());this.presentation.slides.forEach(e=>{e.basemap&&d.push(e.basemap.load())});await u.eachAlways(d)};w._loadFromItem=async function(d){await d.load().catch(A=>{throw new p("webscene:load-portal-item","Failed to load portal item",{error:A});});if("Web Scene"!==d.type)throw new p("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",
{type:d.type});const e=await d.fetchData();this.resourceInfo=e;const v={origin:"web-scene",url:y.urlToObject(d.itemUrl),portal:d.portal||Ca.getDefault(),portalItem:d,readResourcePaths:[]};await this._readAndLoadFromJSON(e,v);this.resourceReferences={portalItem:d,paths:v.readResourcePaths}};w._validateSpatialReference=function(){const d=this.initialViewProperties,e=this._sceneSpatialReference;let v;if("local"!==d.viewingMode){if(!qa.isSpatialReferenceSupported(e,"global"))return u.reject(new p("webscene:unsupported-spatial-reference",
"Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:e,viewingMode:d.viewingMode}));v=O=>!O||za.canProjectWithoutEngine(O,e)}else{if(!qa.isSpatialReferenceSupported(e,"local"))return u.reject(new p("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:e,viewingMode:d.viewingMode}));
v=O=>!O||O.equals(e)}const A=O=>O&&(M.isSome(O.camera)&&O.camera.position&&O.camera.position.spatialReference||M.isSome(O.targetGeometry)&&O.targetGeometry.spatialReference);var D=A(d.viewpoint);return D&&!v(D)?u.reject(new p("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:D,sceneSpatialReference:e,viewingMode:d.viewingMode})):(D=this.presentation.slides.find(O=>
!v(A(O.viewpoint))))?(D=A(D.viewpoint),u.reject(new p("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:D,sceneSpatialReference:e,viewingMode:d.viewingMode}))):u.resolve()};w._validateHeightModelInfo=function(){const d=Ra.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return d?u.reject(d):u.resolve()};w._validateJSON=
function(d){const e=b.Version.parse(d.version||"","webscene");n.validate(e);d.version=`${e.major}.${e.minor}`;1===e.major&&2>=e.minor&&(d.spatialReference=G.WebMercator.toJSON());return d};w._updateTypeKeywords=function(d){"local"===this.initialViewProperties.viewingMode?d.typeKeywords?-1===d.typeKeywords.indexOf("ViewingMode-Local")&&d.typeKeywords.push("ViewingMode-Local"):d.typeKeywords=["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&d.typeKeywords&&(d.typeKeywords=d.typeKeywords.filter(e=>
"ViewingMode-Local"!==e));d.typeKeywords&&(d.typeKeywords=d.typeKeywords.filter((e,v,A)=>A.indexOf(e)===v))};w._enableVerifyItemRelativeUrls=function(d){const e=this._verifyItemRelativeRootPath;e&&(d.verifyItemRelativeUrls={rootPath:e,writtenUrls:[]});return d};w._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};w._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=
0;this._runLayersIdGC()},3E3)};w._runLayersIdGC=function(){this._unscheduleLayersIdGC();var d=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const e=v=>!!this.allLayers.find(A=>A.id===v);d&&d.layers&&(d.layers=d.layers.filter(v=>e(v.id)));(d=this.presentation&&this.presentation.slides)&&d.forEach(v=>{v.visibleLayers&&(v.visibleLayers=v.visibleLayers.filter(A=>e(A.id)))})};B.fromJSON=function(d){if(!d)throw new p("webscene:empty-resource",
"Expected a JSON resource but got nothing");return new this({resourceInfo:d})};c._createClass(B,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(d){d?this._override("thumbnailUrl",d):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(d){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",d)}},{key:"authoringAppVersion",set:function(d){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",
d)}},{key:"spatialReference",get:function(){var d,e;return null!=(d=null==(e=this.initialViewProperties)?void 0:e.spatialReference)?d:G.WebMercator}},{key:"viewingMode",get:function(){var d,e;return null!=(d=null==(e=this.initialViewProperties)?void 0:e.viewingMode)?d:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||G.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?y.urlToObject(this.portalItem.itemUrl).path:
null}}]);return B}(xa.LoadableMixin(ba.EsriPromiseMixin(La.MultiOriginJSONMixin(Ma))));q.VERSION=n;m.__decorate([H.property({type:L,json:{write:!0}})],q.prototype,"applicationProperties",void 0);m.__decorate([H.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],q.prototype,"basemap",void 0);m.__decorate([H.property({type:F,json:{read:{source:"clippingArea.geometry",reader:N.fromJSON},write:{target:"clippingArea.geometry"}}})],q.prototype,"clippingArea",void 0);m.__decorate([h.writer("clippingArea")],
q.prototype,"writeClippingArea",null);m.__decorate([H.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],q.prototype,"clippingEnabled",void 0);m.__decorate([W.reader("clippingEnabled",["clippingArea"])],q.prototype,"readClippingEnabled",null);m.__decorate([h.writer("clippingEnabled")],q.prototype,"writeClippingEnabled",null);m.__decorate([H.property({type:Sa,json:{write:!0}})],q.prototype,"heightModelInfo",void 0);m.__decorate([H.property({json:{write:{target:"operationalLayers",
ignoreOrigin:!0}}})],q.prototype,"layers",void 0);m.__decorate([h.writer("layers")],q.prototype,"writeLayers",null);m.__decorate([H.property({readOnly:!0,type:b.Version,json:{type:(()=>{const z=[],B=n.major;for(let w=8;w<=n.minor;w++)z.push(`${B}.${w}`);return z})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],q.prototype,"sourceVersion",void 0);m.__decorate([W.reader("sourceVersion",["version"])],q.prototype,"readSourceVersion",
null);m.__decorate([h.writer("sourceVersion")],q.prototype,"writeSourceVersion",null);m.__decorate([H.property({json:{read:!1,write:!1}})],q.prototype,"tables",void 0);m.__decorate([H.property({dependsOn:["portalItem.thumbnailUrl"]})],q.prototype,"thumbnailUrl",null);m.__decorate([H.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],q.prototype,"authoringApp",null);m.__decorate([h.writer("authoringApp")],q.prototype,"writeAuthoringApp",null);m.__decorate([H.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],q.prototype,"authoringAppVersion",null);m.__decorate([h.writer("authoringAppVersion")],q.prototype,"writeAuthoringAppVersion",null);m.__decorate([H.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],q.prototype,"ground",void 0);m.__decorate([h.writer("ground")],q.prototype,"writeGround",null);m.__decorate([H.property({type:T.ofType(a),json:{write:!0}})],q.prototype,"transportationNetworks",void 0);m.__decorate([H.property({type:ta,
nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(z,B,w,d)=>{z.slides&&0<z.slides.length&&(B.presentation=z.write(null,{...d,isPresentation:!0}))}}}})],q.prototype,"presentation",void 0);m.__decorate([H.property({type:ea,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new ea({viewingMode:"global",spatialReference:G.WebMercator})}})],q.prototype,"initialViewProperties",void 0);m.__decorate([W.reader("initialViewProperties",["initialState.environment",
"spatialReference","viewingMode","initialState.viewpoint"])],q.prototype,"readInitialViewProperties",null);m.__decorate([H.property({type:G,dependsOn:["initialViewProperties.spatialReference"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],q.prototype,"spatialReference",null);m.__decorate([H.property({type:["local","global"],dependsOn:["initialViewProperties.viewingMode"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],q.prototype,"viewingMode",null);m.__decorate([H.property({type:Ka})],
q.prototype,"portalItem",void 0);m.__decorate([H.property()],q.prototype,"resourceInfo",void 0);return q=m.__decorate([X.subclass("esri.WebScene")],q)});