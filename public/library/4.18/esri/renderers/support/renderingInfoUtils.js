// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../core/maybe","../../Color","../visualVariables/support/visualVariableUtils"],function(g,h,p,l){function k(a,b){if(!a||a.symbol)return null;b=b&&b.renderer;return a&&h.isSome(b)&&b.getObservationRenderer?b.getObservationRenderer(a):b}function m(a,b){if(h.isSome(a.symbol))return a.symbol;const c=k(a,b);return h.isSome(c)?c.getSymbol(a,b):null}async function n(a,b){if(h.isSome(a.symbol))return a.symbol;const c=k(a,b);return h.isSome(c)&&c.getSymbolAsync(a,{...b,abortOptions:{signal:b.signal}})}
g.getDriverAxisSizeValue=function(a,b=0){a=a[b];return"number"===typeof a&&isFinite(a)?a:null};g.getDriverAxisSizeValueAny=function(a){for(let b=0;3>b;b++){const c=a[b];if("number"===typeof c)return isFinite(c)?c:0}return 0};g.getRenderer=k;g.getRenderingInfo=function(a,b){const c=k(a,b);var d=m(a,b);if(!d)return null;d={renderer:c,symbol:d};if(h.isNone(c)||!("visualVariables"in c)||!c.visualVariables)return d;b=l.getVisualVariableValues(c,a,b);a=["proportional","proportional","proportional"];for(const {variable:e,
value:f}of b)switch(e.type){case "color":d.color=f.toRgba();break;case "size":if("outline"===e.target)d.outlineSize=f;else switch(b=e.useSymbolValue?"symbol-value":f,e.axis){case "width":a[0]=b;break;case "depth":a[1]=b;break;case "height":a[2]=b;break;case "width-and-depth":a[0]=a[1]=b;break;default:a[0]=a[1]=a[2]=b}break;case "opacity":d.opacity=f;break;case "rotation":switch(e.axis){case "tilt":d.tilt=f;break;case "roll":d.roll=f;break;default:d.heading=f}}if("proportional"!==a[0]||"proportional"!==
a[1]||"proportional"!==a[2])d.size=a;return d};g.getRenderingInfoAsync=async function(a,b){var c=k(a,b),d=await n(a,b);if(!d)return null;d={renderer:c,symbol:d};if(!(c&&"visualVariables"in c&&c.visualVariables))return d;b=l.getVisualVariableValues(c,a,b);a=["proportional","proportional","proportional"];for(const {variable:e,value:f}of b)"color"===e.type?d.color=p.toUnitRGBA(f):"size"===e.type?"outline"===e.target?d.outlineSize=f:(b=e.axis,c=e.useSymbolValue?"symbol-value":f,"width"===b?a[0]=c:"depth"===
b?a[1]=c:"height"===b?a[2]=c:a[0]="width-and-depth"===b?a[1]=c:a[1]=a[2]=c):"opacity"===e.type?d.opacity=f:"rotation"===e.type&&"tilt"===e.axis?d.tilt=f:"rotation"===e.type&&"roll"===e.axis?d.roll=f:"rotation"===e.type&&(d.heading=f);if(isFinite(a[0])||isFinite(a[1])||isFinite(a[2]))d.size=a;return d};g.getSymbol=m;g.getSymbolAsync=n;Object.defineProperty(g,"__esModule",{value:!0})});