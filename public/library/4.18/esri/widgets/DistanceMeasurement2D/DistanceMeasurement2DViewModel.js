// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Handles ../../core/unitUtils ../../core/watchUtils ../support/commonProperties ../support/InteractiveToolViewModel ./DistanceMeasurement2DTool".split(" "),
function(h,d,b,p,z,e,A,q,B,C,D,r,t,g,u,v,w,k){const x={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:5,pathPrimaryColor:[255,128,0,255],pathSecondaryColor:[255,255,255,255]},l=p.getLogger("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel");b=function(m){function f(a){a=m.call(this,a)||this;a.supportedViewType="2d";a._handles=new t;a.geodesicDistanceThreshold=1E5;a.measurement=null;a.measurementLabel=null;a.palette=x;a.tool=null;return a}h._inheritsLoose(f,m);var c=f.prototype;
c.initialize=function(){this._handles.add([u.init(this,["unit","palette","geodesicDistanceThreshold"],(a,n,y)=>{this.tool&&(this.tool[y]=a)})])};c.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};c.start=function(){return this.createTool()};c.clear=function(){this.removeTool()};c.newMeasurement=function(){r.ignoreAbortErrors(this.start())};c.clearMeasurement=function(){this.clear()};c.createToolParams=function(){return{toolConstructor:k["default"],constructorArguments:()=>
({geodesicDistanceThreshold:this.geodesicDistanceThreshold,palette:this.palette,unit:this.unit})}};c.logUnsupportedError=function(){l.error("DistanceMeasurement2D widget is not implemented for SceneView")};c.logError=function(...a){l.error(...a)};c._validateUnit=function(a){return-1!==this.unitOptions.indexOf(a)?a:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]};c._validateUnits=function(a=[]){a=a.filter(n=>-1!==g.measurementLengthUnits.indexOf(n));return 0===
a.length?g.measurementLengthUnits.slice():a};h._createClass(f,[{key:"state",get:function(){var a;return this.isDisabled||!k.isSupported(null==(a=this.view)?void 0:a.spatialReference)?"disabled":this.tool?this.measurement?this.tool.active?"measuring":"measured":"ready":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(a){void 0===a?this._clearOverride("unit"):this._override("unit",this._validateUnit(a))}},{key:"unitOptions",get:function(){return g.measurementLengthUnits},
set:function(a){void 0===a?this._clearOverride("unitOptions"):this._override("unitOptions",this._validateUnits(a))}}]);return f}(w.InteractiveToolViewModel);d.__decorate([e.property(v.defaultUnitPropertyMetadata)],b.prototype,"defaultUnit",void 0);d.__decorate([e.property({type:Number})],b.prototype,"geodesicDistanceThreshold",void 0);d.__decorate([e.property({readOnly:!0,aliasOf:"tool.measurement"})],b.prototype,"measurement",void 0);d.__decorate([e.property({readOnly:!0,aliasOf:"tool.measurementLabel"})],
b.prototype,"measurementLabel",void 0);d.__decorate([e.property()],b.prototype,"palette",void 0);d.__decorate([e.property({dependsOn:["isDisabled","measurement","tool.active","view.spatialReference"],readOnly:!0})],b.prototype,"state",null);d.__decorate([e.property({constructOnly:!0,readOnly:!0})],b.prototype,"tool",void 0);d.__decorate([e.property({type:String,dependsOn:["unitOptions","defaultUnit"]})],b.prototype,"unit",null);d.__decorate([e.property({type:[String]})],b.prototype,"unitOptions",
null);return b=d.__decorate([q.subclass("esri.widgets.DistanceMeasurement2D.DistanceMeasurement2DViewModel")],b)});