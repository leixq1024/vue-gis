// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../core/has ../../config ../../core/Logger ../../core/Error ../../core/urlUtils ../../core/promiseUtils ../../geometry/Geometry ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../geometry ../../request ../../portal/Portal ../../tasks/support/ProjectParameters ../../rest/geometryService/units ../../tasks/operations/generalize ../../tasks/support/GeneralizeParameters ../../tasks/operations/lengths ../../tasks/support/LengthsParameters ../../tasks/operations/offset ../../tasks/support/OffsetParameters ../../rest/geometryService/project ../../tasks/operations/relation ../../tasks/support/RelationParameters ../../tasks/operations/trimExtend ../../tasks/support/TrimExtendParameters".split(" "),
function(f,g,h,n,k,A,d,B,p,q,C,D,E,F,G,H,r,t,I,J,K,L,M,N,O,u,P,Q,R,S){function v(a,c,b){if(!c)return d.resolve(a);const e=c.spatialReference;return e.isWGS84?d.resolve(a):e.isWebMercator?d.resolve(p.geographicToWebMercator(a)):w(b).then(l=>{if(!l)throw new k("geometry-service:missing-url","Geometry service URL is missing");const x=new t({geometries:[a],outSR:e});return u.project(l,x,b).then(y=>y[0])})}function w(a){if(h.geometryServiceUrl)return d.resolve(h.geometryServiceUrl);const c=r.getDefault();
return c.load(a).catch(()=>{}).then(()=>c.get("helperServices.geometry.url"))}const m=n.getLogger("esri.widgets.support.geolocationUtils"),z={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};f.getCurrentPosition=function(a){a||(a=z);return d.create((c,b)=>{setTimeout(()=>b(new k("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(c,b,a)})};f.positionToPoint=function(a,c){const {position:b,view:e}=a;a=b&&b.coords||{};a={accuracy:a.accuracy,
altitude:a.altitude,altitudeAccuracy:a.altitudeAccuracy,heading:a.heading,latitude:a.latitude,longitude:a.longitude,speed:a.speed};a=b?{coords:a,timestamp:b.timestamp}:b;a=(a=a&&a.coords)?new q({longitude:a.longitude,latitude:a.latitude,z:a.altitude||null,spatialReference:{wkid:4326}}):null;return v(a,e,c)};f.supported=function(){var a;(a=g("esri-geolocation"))||m.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=g("esri-secure-context"))||m.warn("insecure-context","Geolocation requires a secure origin."));
return a};Object.defineProperty(f,"__esModule",{value:!0})});