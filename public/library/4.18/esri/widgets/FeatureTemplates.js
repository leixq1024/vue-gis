// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ../core/HandleOwner ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ./support/decorators/vmEvent ../chunks/index ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList".split(" "),
function(l,e,b,v,k,r,w,x,I,y,J,K,L,z,A,M,B,m,C,t,D,E,F){function G(p){return p.label}const H=v.getLogger("esri.widgets.FeatureTemplates"),u={filter:!0};b=function(p){function q(a,d){a=p.call(this,a,d)||this;a._iconIntersectionObserver=new IntersectionObserver((f,n)=>{f.forEach(async c=>{if(c.isIntersecting&&(c=c.target,!c["data-has-icon"])){const g=c["data-item"];c["data-has-icon"]=!0;n.unobserve(c);await g.fetchThumbnail();c["data-item"]===g&&g.thumbnail?c.appendChild(g.thumbnail):(c["data-has-icon"]=
!1,n.observe(c))}})});a.filterFunction=null;a.filterText="";a.groupBy=null;a.label=void 0;a.layers=null;a.messages=null;a.viewModel=new E;a.visibleElements={...u};a.renderItemIcon=a.renderItemIcon.bind(l._assertThisInitialized(a));a._afterItemCreateOrUpdate=a._afterItemCreateOrUpdate.bind(l._assertThisInitialized(a));a._afterItemRemoved=a._afterItemRemoved.bind(l._assertThisInitialized(a));return a}l._inheritsLoose(q,p);var h=q.prototype;h.initialize=function(){const a=({label:d})=>!this.filterText||
-1<d.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(z.init(this,"viewModel",(d,f)=>{d&&!d.filterFunction&&(this.filterFunction=a);f&&f!==d&&f.filterFunction===a&&(f.filterFunction=null)}))};h.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};h.castVisibleElements=function(a){return{...u,...a}};h.render=function(){const {filterText:a,messages:d,viewModel:{items:f,state:n}}=this,c=this.visibleElements.filter;
return t.jsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":d.widgetLabel},"loading"===n?this.renderLoader():"ready"===n?F.ItemList({id:this.id,identify:G,filterText:a,items:f,messages:{filterPlaceholder:d.filterPlaceholder,noItems:d.noItems,noMatches:d.noMatches},filterEnabled:c,onItemSelect:g=>{this.viewModel.select(g)},onFilterChange:g=>{this.filterText=g;this.viewModel.refresh()},renderIcon:this.renderItemIcon}):null)};h.renderItemIcon=function({item:a}){return t.jsx("span",
{key:"icon",class:"esri-feature-templates__list-item-icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":a,"data-has-icon":!1})};h.renderLoader=function(){return t.jsx("div",{class:"esri-feature-templates__loader",key:"loader"})};h._afterItemCreateOrUpdate=function(a){this._iconIntersectionObserver.observe(a)};h._afterItemRemoved=function(a){this._iconIntersectionObserver.unobserve(a)};l._createClass(q,[{key:"filterEnabled",
set:function(a){x.deprecatedProperty(H,"filterEnabled",{replacement:"visibleElements.filter",version:"4.15"});this.visibleElements={...this.visibleElements,filter:a}}}]);return q}(A.HandleOwnerMixin(D));e.__decorate([k.property(),m.renderable()],b.prototype,"filterEnabled",null);e.__decorate([r.aliasOf("viewModel.filterFunction")],b.prototype,"filterFunction",void 0);e.__decorate([k.property(),m.renderable()],b.prototype,"filterText",void 0);e.__decorate([r.aliasOf("viewModel.groupBy")],b.prototype,
"groupBy",void 0);e.__decorate([k.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0);e.__decorate([r.aliasOf("viewModel.layers")],b.prototype,"layers",void 0);e.__decorate([k.property(),m.renderable(),B.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messages",void 0);e.__decorate([k.property(),m.renderable(["viewModel.items","viewModel.state"]),C.vmEvent("select")],b.prototype,"viewModel",void 0);e.__decorate([k.property(),
m.renderable()],b.prototype,"visibleElements",void 0);e.__decorate([w.cast("visibleElements")],b.prototype,"castVisibleElements",null);return b=e.__decorate([y.subclass("esri.widgets.FeatureTemplates")],b)});