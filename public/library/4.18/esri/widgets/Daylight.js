// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Daylight/daylightUtils ./Daylight/DaylightViewModel ./Daylight/support/SliderWithDropdown ./support/DatePicker".split(" "),
function(n,f,d,u,x,h,t,y,F,z,G,H,I,l,J,A,m,b,B,p,v,C,D){const w={playButtons:!0,shadowsToggle:!0,datePicker:!0,timezone:!0},E=x.getLogger("esri.widgets.Daylight");d=function(k){function q(a,c){var e;a=k.call(this,a,c)||this;a.playSpeedMultiplier=1;a.timeSliderSteps=5;a.view=null;a.viewModel=new v;a.visibleElements={...w};a.dateOrSeason="date";a._timeSlider=new C({viewModel:a.viewModel.timeSliderViewModel,labelFormatFunction:p.formatSliderLabel,inputFormatFunction:p.formatSliderLabel,min:0,max:1439,
steps:null!=(e=a.timeSliderSteps)?e:5,values:[0],labelInputsEnabled:!1,visibleElements:{labels:!0},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:a._onPrimaryTickCreated.bind(n._assertThisInitialized(a))},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:a._onSecondaryTickCreated.bind(n._assertThisInitialized(a))}],items:[]});a._datePicker=new D({viewModel:a.viewModel.datePickerViewModel,commitOnMonthChange:!0});return a}
n._inheritsLoose(q,k);var g=q.prototype;g.castVisibleElements=function(a){return{...w,...a}};g.postInitialize=function(){this.viewModel.isSupported&&this.own(l.init(this.viewModel,"datePickerViewModel",a=>{this._datePicker.viewModel=a}),l.init(this.viewModel,"timeSliderViewModel",a=>{this._timeSlider.viewModel=a}),l.init(this,"messages",()=>{this._timeSlider.buttonTooltip=this.messages.chooseTimezone}),l.init(this,"visibleElements",()=>{this._timeSlider.showDropDown=this.visibleElements.timezone}),
l.init(this,"gmtOffsets",a=>{u.isSome(a)&&(this._timeSlider.items=a)}),l.init(this,["viewModel.utcOffset","gmtOffsets"],()=>this._onUTCOffsetChange()))};g.destroy=function(){this._datePicker.destroy();this._timeSlider.destroy()};g.render=function(){return this.viewModel.isSupported?b.jsx("div",{class:this.classes("esri-daylight","esri-widget")},b.jsx("h3",{class:"esri-widget__heading"},this.messages.title),this.renderTimeOptions(),this.visibleElements.datePicker?"date"===this.dateOrSeason?this.renderDateOptions():
this.renderSeasonOptions():null,this.visibleElements.shadowsToggle?this.renderShadowOptions():null):b.jsx("div",{class:this.classes("esri-daylight","esri-widget")},b.jsx("div",{key:"daylight__unsupported",class:"esri-daylight__panel--error"},b.jsx("p",null,this.messages.unsupported)))};g.renderTimeOptions=function(){const a={["esri-icon-play"]:!this.viewModel.dayPlaying,["esri-icon-pause"]:this.viewModel.dayPlaying};return b.jsx("div",{class:this.classes("esri-daylight__container esri-daylight__day-container",
{["esri-slider--shadow-on"]:this.viewModel.directShadowsEnabled,["esri-slider--shadow-off"]:!this.viewModel.directShadowsEnabled},{["esri-slider--date-on"]:this.visibleElements.datePicker,["esri-slider--date-off"]:!this.visibleElements.datePicker}),key:"daylight-time-options"},this._timeSlider.render(),this.visibleElements.playButtons?b.jsx("button",{bind:this.viewModel,onclick:this.viewModel.toggleDayPlaying,"aria-label":this.messages.playDay,title:this.messages.playDay,type:"button",class:this.classes("esri-button",
"esri-daylight__play-pause-button",a)},b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},b.jsx("path",{d:"M6 3.745L11.255 8 6 12.255z"}))):null)};g.renderDateOptions=function(){const a={["esri-icon-play"]:!this.viewModel.yearPlaying,["esri-icon-pause"]:this.viewModel.yearPlaying};return b.jsx("div",{class:"esri-daylight__container esri-daylight__date-container",key:"daylight-date-options"},this._datePicker.render(),this.visibleElements.playButtons?b.jsx("button",{bind:this.viewModel,
onclick:this.viewModel.toggleYearPlaying,"aria-label":this.messages.playYear,title:this.messages.playYear,type:"button",class:this.classes("esri-button","esri-daylight__play-pause-button",a)},b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},b.jsx("path",{d:"M6 3.745L11.255 8 6 12.255z"}))):null)};g.renderShadowOptions=function(){const a=`${this.id}__shadowButton`;return b.jsx("div",{class:"esri-daylight__shadow-container",key:"daylight-shadow-options"},b.jsx("button",{bind:this.viewModel,
onclick:this.viewModel.toggleDirectShadows,name:a,class:this.classes("esri-button","esri-daylight__checkbox",{["esri-icon-checkbox-checked"]:this.viewModel.directShadowsEnabled,["esri-icon-checkbox-unchecked"]:!this.viewModel.directShadowsEnabled}),"aria-label":this.messages.directShadow,title:this.messages.directShadow,type:"button"}),b.jsx("label",{bind:this.viewModel,onclick:this.viewModel.toggleDirectShadows,for:a,class:this.classes(" esri-widget__anchor","esri-interactive"),"aria-label":this.messages.directShadow,
title:this.messages.directShadow},this.messages.directShadow))};g.renderSeasonOptions=function(){return b.jsx("select",{bind:this,onchange:this._onSeasonChange,class:this.classes("esri-select","esri-daylight__season-picker"),value:this.viewModel.currentSeason,"aria-label":this.messages.season},p.ORDERED_SEASONS.map(a=>b.jsx("option",{value:a},this.messages[a])))};g._onSeasonChange=function(a){this.viewModel.currentSeason=a.target.value};g._onUTCOffsetChange=function(){var a;const c=this.viewModel.utcOffset;
var e=null==(a=this._timeSlider.currentItem)?void 0:a.abbr;a=this.gmtOffsets;u.isSome(a)&&e!==c&&(e=a.findIndex(({abbr:r})=>r===c),-1<e&&(this._timeSlider.currentIndex=e))};g._onPrimaryTickCreated=function(a,c,e){c.className+=" esri-interactive esri-widget__anchor esri-daylight__container__tick esri-daylight__container__labelled-tick";e.className+=" esri-interactive esri-widget__anchor";const r=()=>{this.viewModel.timeSliderPosition=a};c.onclick=r;e.onclick=r;c=e.innerText;-1!==c.indexOf(" ")&&(e.innerHTML=
c.replace(/(.*) (.*)/,'$1\x3cbr\x3e\x3cdiv class\x3d"esri-label__ampm"\x3e$2\x3c/div\x3e'))};g._onSecondaryTickCreated=function(a,c){c.className+=" esri-interactive esri-widget__anchor esri-daylight__container__tick";c.onclick=()=>{this.viewModel.timeSliderPosition=a}};n._createClass(q,[{key:"gmtOffsets",get:function(){return this.messages?p.getGMTOffsets(this.messages):null}}]);return q}(B);f.__decorate([h.property({readOnly:!0,dependsOn:["messages"]})],d.prototype,"gmtOffsets",null);f.__decorate([h.property(),
m.renderable(),A.messageBundle("esri/widgets/Daylight/t9n/Daylight")],d.prototype,"messages",void 0);f.__decorate([t.aliasOf("viewModel.playSpeedMultiplier")],d.prototype,"playSpeedMultiplier",void 0);f.__decorate([t.aliasOf("_timeSlider.steps")],d.prototype,"timeSliderSteps",void 0);f.__decorate([t.aliasOf("viewModel.view")],d.prototype,"view",void 0);f.__decorate([h.property({type:v}),m.renderable(["viewModel.directShadowsEnabled","viewModel.timeSliderPosition","viewModel.currentSeason","viewModel.localDate",
"viewModel.utcOffset"])],d.prototype,"viewModel",void 0);f.__decorate([h.property(),m.renderable()],d.prototype,"visibleElements",void 0);f.__decorate([y.cast("visibleElements")],d.prototype,"castVisibleElements",null);f.__decorate([h.property({cast:k=>{if("season"===k||"date"===k)return k;E.warn(`"${k}" is not a valid option. Acceptable values are only "date" or "season". Defaulting to "${"date"}".`);return"date"}}),m.renderable()],d.prototype,"dateOrSeason",void 0);f.__decorate([h.property(),m.renderable()],
d.prototype,"_timeSlider",void 0);f.__decorate([h.property(),m.renderable()],d.prototype,"_datePicker",void 0);return d=f.__decorate([z.subclass("esri.widgets.Daylight")],d)});