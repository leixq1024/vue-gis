// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/FeatureForm":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../layers/support/domains ../layers/support/fieldUtils ../intl/locale ../intl ../intl/moment ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ./support/decorators/vmEvent ../chunks/index ./Widget ./FeatureForm/FeatureFormViewModel".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K){w=function(J){function L(W,aa){W=J.call(this,W,aa)||this;W._activeDateEdit=null;W._activeInputName=null;W._fieldFocusNeeded=!1;W._moment=null;W._userUpdatedInputFieldNames=new Set;W.description=null;W.feature=null;W.fieldConfig=null;W.formTemplate=null;W.groupDisplay="all";W.label=void 0;W.layer=null;W.messages=null;W.strict=null;W.title=null;W.viewModel=new K;W._handleFormKeyDown=W._handleFormKeyDown.bind(q._assertThisInitialized(W));W._handleInputBlur=
W._handleInputBlur.bind(q._assertThisInitialized(W));W._handleInputFocus=W._handleInputFocus.bind(q._assertThisInitialized(W));W._handleNumberInputMouseDown=W._handleNumberInputMouseDown.bind(q._assertThisInitialized(W));W._handleInputKeyDown=W._handleInputKeyDown.bind(q._assertThisInitialized(W));W._handleOptionChange=W._handleOptionChange.bind(q._assertThisInitialized(W));W._handleGroupClick=W._handleGroupClick.bind(q._assertThisInitialized(W));W._handleSubmit=W._handleSubmit.bind(q._assertThisInitialized(W));
W._afterScrollerCreateOrUpdate=W._afterScrollerCreateOrUpdate.bind(q._assertThisInitialized(W));return W}q._inheritsLoose(L,J);var Y=L.prototype;Y.loadLocale=async function(){this._moment=await E.loadMoment()};Y.initialize=function(){this.own(this.watch("feature",()=>{const W=this._getFocusableInput("forward");this._activeInputName=W&&W.name;this._userUpdatedInputFieldNames.clear();this._fieldFocusNeeded=!0}),this.on("submit",W=>{if(0<W.invalid.length){const [aa]=W.invalid;W.invalid.forEach(oa=>this._userUpdatedInputFieldNames.add(oa));
this._activeInputName=aa;this._fieldFocusNeeded=!0;this.scheduleRender()}}))};Y.destroy=function(){this._userUpdatedInputFieldNames.clear();this._userUpdatedInputFieldNames=null};Y.getValues=function(){return null};Y.submit=function(){return null};Y.render=function(){const {state:W}=this.viewModel;return T.jsx("div",{class:this.classes("esri-feature-form","esri-widget","esri-widget--panel")},"ready"===W?this.renderForm():null)};Y.renderForm=function(){var W=this.title?T.jsx("h2",{class:"esri-widget__heading",
key:"title"},this.title):null;const aa=this.description?T.jsx("p",{class:"esri-feature-form__description-text",key:"description"},this.description):null;W=W||aa?T.jsx("div",{class:"esri-feature-form__form-header"},W,aa):null;return T.jsx("form",{class:"esri-feature-form__form",novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},W,this.renderFields())};Y.renderFields=function(){const {viewModel:{inputFields:W}}=this;return W.map((aa,oa)=>aa&&aa.inputFields?this.renderGroup(aa,
oa):this.renderLabeledField(aa))};Y.renderGroup=function(W,aa){const {description:oa,label:ta,inputFields:la,state:X}=W;var U=this.viewModel.findField(this._activeInputName);U=!(!U||U.group!==W);const ka=`${this.id}_group_${aa}`,sa=`${this.id}_group-label_${aa}`,qa=`${this.id}_group-description_${aa}`,na=oa?T.jsx("p",{class:this.classes("esri-feature-form__group-description","esri-feature-form__description-text"),id:qa},oa):null,pa="sequential"===this.groupDisplay,va=pa?U:"expanded"===X,ja=va?"esri-icon-up":
"esri-icon-down";return T.jsx("fieldset",{"aria-expanded":va.toString(),"aria-labelledby":sa,"aria-describedby":oa?qa:"",class:this.classes("esri-feature-form__group",pa?"esri-feature-form__group--sequential":null,va?null:"esri-feature-form__group--collapsed",U?"esri-feature-form__group--active":null),"data-group":W,id:ka,key:aa,onclick:this._handleGroupClick},T.jsx("button",{role:pa?"presentation":void 0,class:"esri-feature-form__group-header",type:"button",tabIndex:pa?-1:0},T.jsx("div",{class:"esri-feature-form__group-title"},
T.jsx("h4",{class:this.classes("esri-feature-form__group-label","esri-widget__heading"),id:sa},ta),na),pa?null:T.jsx("span",{class:this.classes(ja,"esri-feature-form__group-toggle-icon")})),la.map(ua=>this.renderLabeledField(ua)))};Y._getFocusableInput=function(W,aa){var oa=this.viewModel._allInputFields;oa="forward"===W?oa:oa.slice().reverse();aa?aa&&aa.inputFields?W=oa.indexOf(aa.inputFields[0]):(this._isFieldInClosedCollapsibleGroup(aa)?({inputFields:aa}=aa.group,W="forward"===W?aa[aa.length-1]:
aa[0]):W=aa,W=oa.indexOf(W)+1):W=0;for(;W<oa.length;W++)if(aa=oa[W],aa.visible&&aa.editable)return aa;return null};Y.renderLabeledField=function(W){const {label:aa,layer:oa,type:ta}=W;return T.jsx("label",{key:`${oa.id}-${W.name}`,class:"esri-feature-form__label"},[aa,"unsupported"!==ta?this.renderInputField(W):this.renderUnsupportedField(W),this.renderAuxiliaryText(W)])};Y.renderInputField=function(W){var {viewModel:aa}=this;const {domain:oa,editable:ta,name:la,type:X}=W;aa=aa.getValue(la);const U=
!ta,ka=this.getCommonInputProps(W);return oa&&"coded-value"===oa.type&&!U?this.renderSelectInputField(aa,oa.codedValues.map(({code:sa,name:qa})=>({value:sa,name:qa})),ka):"text"===X&&"text-area"===W.editorType||"rich-text"===W.editorType?T.jsx("textarea",Object.assign({},ka)):"datetime-picker"===W.editorType||"date"===X?this.renderDateInputField(aa,ka):T.jsx("input",Object.assign({type:"text"===X?"text":"number"},ka))};Y.renderDateInputField=function(W,aa){const {date:oa,time:ta}=this._formatDate(0);
var la=`${this.id}-${aa.key}`;const X=`${la}-date`;la=`${la}-time`;const U=aa["data-field"],{includeTime:ka}=U,{date:sa,time:qa}=this._formatDate(W);return T.jsx("div",{key:`${aa.key}-date`,class:"esri-feature-form__date-input-container"},T.jsx("div",{class:this.classes("esri-feature-form__date-input-part",ka?null:"esri-feature-form__date-input-part--lone")},T.jsx("input",Object.assign({"aria-label":U.label,"aria-describedby":X,type:"text"},aa,{"data-date-part":"date",class:this.classes(aa.class,
"esri-feature-form__input--date"),value:sa})),T.jsx("div",{class:"esri-feature-form__date-format-hint",id:X},oa)),ka?T.jsx("div",{class:"esri-feature-form__date-input-part",key:"time-input"},T.jsx("input",Object.assign({"aria-describedby":la,"aria-label":U.label,type:"text"},aa,{"data-date-part":"time",class:this.classes(aa.class,"esri-feature-form__input--time"),value:qa})),T.jsx("div",{class:"esri-feature-form__date-format-hint",id:la},ta)):null)};Y.renderUnsupportedField=function(W){W=this.viewModel.getValue(W.name);
return T.jsx("input",{class:this.classes("esri-input","esri-feature-form__input","esri-feature-form__input--disabled"),disabled:!0,type:"text",value:`${W}`})};Y.renderSelectInputField=function(W,aa,oa){let ta=!1;aa=aa.map(la=>{la.value===W&&(ta=!0);return T.jsx("option",{value:`${la.value}`,key:la.name},la.name)});null==W||""===W||ta||aa.unshift(T.jsx("option",{value:`${W}`,key:"outlier-option"},W));oa["data-field"].required||aa.unshift(T.jsx("option",{value:"",key:"empty-option"},this.messages.empty));
return T.jsx("select",Object.assign({},oa,{class:this.classes(oa.class,"esri-select"),onchange:this._handleOptionChange}),aa)};Y.renderAuxiliaryText=function(W){if(this._userUpdatedInputFieldNames.has(W.name)&&!W.valid)return T.jsx("div",{key:"error-message"},T.jsx("span",{class:this.classes("esri-feature-form__input-icon--invalid","esri-icon-notice-triangle")}),T.jsx("div",{class:"esri-feature-form__field-error-message"},W.errorMessage));if(W.description)return T.jsx("div",{key:"description",class:"esri-feature-form__description-text"},
W.description)};Y.getCommonInputProps=function(W){const {groupDisplay:aa,viewModel:oa}=this,{editable:ta,group:la,hint:X,maxLength:U,minLength:ka,name:sa,required:qa,type:na,valid:pa}=W,va=oa.getValue(sa),ja=this._userUpdatedInputFieldNames.has(sa),ua=!ta,Aa="all"===aa&&"collapsed"===(null==la?void 0:la.state);return{afterCreate:this._afterScrollerCreateOrUpdate,afterUpdate:this._afterScrollerCreateOrUpdate,"aria-invalid":pa?"false":"true","class":this.classes("esri-input","esri-feature-form__input",
ua?"esri-feature-form__input--disabled":null,ja&&!pa?"esri-feature-form__input--invalid":null),key:sa,minlength:-1<ka?`${ka}`:"",maxlength:-1<U?`${U}`:"",...this._getNumberFieldConstraints(W),disabled:ua,value:null==va?"":`${va}`,"data-field":W,onfocus:this._handleInputFocus,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:"number"===na?this._handleNumberInputMouseDown:null,required:qa,tabIndex:Aa?-1:0,title:X}};Y._isFieldInClosedCollapsibleGroup=function(W){var aa;return"all"===
this.groupDisplay&&!(W&&W.inputFields)&&"collapsed"===(null==W?void 0:null==(aa=W.group)?void 0:aa.state)};Y._handleNumberInputMouseDown=function({target:W}){W.disabled||W.focus();this.scheduleRender()};Y._getNumberFieldConstraints=function(W){return(W=B.getDomainRange(W.domain)||M.getFieldRange(W.field))&&W.max!==Number.MAX_VALUE&&W.min!==Number.MIN_VALUE?W:{min:null,max:null}};Y._afterScrollerCreateOrUpdate=function(W){const aa=W["data-field"],oa=this.viewModel.findField(this._activeInputName);
aa.editable&&this._fieldFocusNeeded&&oa===aa&&(this._fieldFocusNeeded=!1,W.focus())};Y._handleInputFocus=function(W){this._activeInputName=W.target["data-field"].name};Y._handleInputBlur=function(W){var aa=W.target;const oa=aa["data-field"],ta=(W=W.relatedTarget)&&W["data-field"];this._syncDateEditsBeforeValueCommit(aa);ta&&"date"===oa.type&&"date"===ta.type&&oa.field===ta.field?""!==aa.value&&""===W.value&&(aa=W.getAttribute("data-date-part"),W.value=this._formatDate(Date.now())[aa]):(this._commitValue(aa),
this.scheduleRender())};Y._commitValue=function(W){var aa=W["data-field"];if(this._activeDateEdit){const {date:ta,time:la}=this._activeDateEdit;var oa=this._getDateEditValue(aa,"date");aa=this._getDateEditValue(aa,"time");const X=""===oa||""===aa;if(ta){const {input:U}=ta;U.value=X?"":oa}la&&({input:oa}=la,oa.value=X?"":aa);this._activeDateEdit=null;if(ta&&la){this._updateDateFieldValue(ta.input,la.input);return}}this._updateFieldValue(W)};Y._getDateEditValue=function(W,aa){var oa=this._activeDateEdit[aa];
if(oa){var {value:ta}=oa;return""===ta?"":(oa=this._parseDate(oa.value,aa))?this._formatDate(oa.getTime())[aa]:this._formatDate(W.value)[aa]}};Y._handleInputKeyDown=function(W){const {key:aa,altKey:oa,ctrlKey:ta,metaKey:la,shiftKey:X}=W;var U=W.target,ka=U["data-field"];if("Tab"===aa){var sa=X?"backward":"forward",qa=U.getAttribute("data-date-part");this._syncDateEditsBeforeValueCommit(U);"backward"===sa&&"time"===qa||"forward"===sa&&"date"===qa&&ka.includeTime||(this._commitValue(U),U=this.viewModel.findField(ka.name),
sa=this._getFocusableInput(sa,U),U=U.group===(null==sa?void 0:sa.group),this._activeInputName=null==sa?void 0:sa.name,sa&&("sequential"===this.groupDisplay||U)?(W.preventDefault(),this._fieldFocusNeeded=!0):this.renderNow())}else"Enter"!==aa?({type:U}=ka.field,sa="single"===U||"double"===U,"integer"!==U&&"small-integer"!==U&&!sa||oa||ta||la||1!==aa.length||(U=Number(aa),ka=["-","+"],qa=["e","."],sa=sa?[...ka,...qa]:ka,isNaN(U)&&-1===sa.indexOf(aa)&&W.preventDefault())):this._isFieldInClosedCollapsibleGroup(ka)?
ka.group.state="expanded":(this._updateFieldValue(W.target),this.scheduleRender())};Y._syncDateEditsBeforeValueCommit=function(W){if("date"===W["data-field"].type){var aa=W.getAttribute("data-date-part");this._activeDateEdit={...this._activeDateEdit,[aa]:{value:W.value,input:W}}}};Y._updateFieldValue=function(W){const aa=W["data-field"];this.viewModel.setValue(aa.name,this._parseValue(W));this._userUpdatedInputFieldNames.add(aa.name)};Y._updateDateFieldValue=function(W,aa){const oa=W["data-field"];
this.viewModel.setValue(oa.name,this._parseDateTimeValue(W,aa));this._userUpdatedInputFieldNames.add(oa.name)};Y._parseValue=function(W){var aa=W["data-field"],oa=W.value,{type:ta}=aa;if("number"===ta)return parseFloat(oa);if("date"===ta){if(!oa)return null;ta=Number(oa);if(!isNaN(ta))return ta;W=W.getAttribute("data-date-part");ta=this._parseDate(oa,W);if(!ta)return null;oa=this._moment;ta=oa(ta);var la=aa.domain;const X=oa();let U=X;la&&"range"===la.type&&(la=oa(la.maxValue),X.isAfter(la)||(U=la));
aa=this.viewModel.getValue(aa.name);aa=oa(null!=aa?aa:U);"date"===W?(ta.hour(aa.hour()),ta.minutes(aa.minutes()),ta.seconds(aa.seconds())):(ta.date(aa.date()),ta.month(aa.month()),ta.year(aa.year()));return ta.valueOf()}return oa};Y._parseDateTimeValue=function(W,aa){W=W.value;aa=aa.value;if(!W||!aa)return null;W=this._parseDate(W,"date");aa=this._parseDate(aa,"time");if(!W||!aa)return null;W=this._moment(W);aa=this._moment(aa);W.hour(aa.hour());W.minutes(aa.minutes());W.seconds(aa.seconds());return W.valueOf()};
Y._handleOptionChange=function(W){this._updateFieldValue(W.target);this.scheduleRender()};Y._handleGroupClick=function(W){var aa;const oa=W.currentTarget["data-group"],ta="expanded"===oa.state,la="sequential"===this.groupDisplay;if(!ta||W.target.closest(".esri-feature-form__group-header")){this._activeInputName=null==(aa=this._getFocusableInput("forward",oa))?void 0:aa.name;if(la){W=W.target.closest(".esri-feature-form__group-header");if(ta&&!W)return;this.viewModel.inputFields.forEach(X=>{X&&X.inputFields&&
X!==oa&&(X.state="collapsed")})}oa.state=ta?"collapsed":"expanded";this._fieldFocusNeeded=la;this.scheduleRender()}};Y._handleSubmit=function(W){W.preventDefault()};Y._handleFormKeyDown=function(W){"Enter"===W.key&&this.viewModel.submit()};Y._formatDate=function(W){if(null==W)return{date:"",time:""};W=this._moment(W);return{date:W.format("L"),time:W.format("LTS")}};Y._parseDate=function(W,aa){if(null==W||""===W)return null;W=this._moment(W,"date"===aa?"L":"LTS",N.getLocale(),!1);return W.isValid()?
W.toDate():null};return L}(F);A.__decorate([H.aliasOf("viewModel.description"),O.renderable()],w.prototype,"description",void 0);A.__decorate([H.aliasOf("viewModel.feature")],w.prototype,"feature",void 0);A.__decorate([H.aliasOf("viewModel.fieldConfig")],w.prototype,"fieldConfig",void 0);A.__decorate([H.aliasOf("viewModel.formTemplate")],w.prototype,"formTemplate",void 0);A.__decorate([t.property(),O.renderable()],w.prototype,"groupDisplay",void 0);A.__decorate([t.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],w.prototype,"label",void 0);A.__decorate([H.aliasOf("viewModel.layer")],w.prototype,"layer",void 0);A.__decorate([t.property(),O.renderable(),C.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],w.prototype,"messages",void 0);A.__decorate([H.aliasOf("viewModel.strict")],w.prototype,"strict",void 0);A.__decorate([H.aliasOf("viewModel.title"),O.renderable()],w.prototype,"title",void 0);A.__decorate([t.property(),O.renderable(["viewModel.inputFields","viewModel.state"]),P.vmEvent(["value-change",
"submit"])],w.prototype,"viewModel",void 0);A.__decorate([H.aliasOf("viewModel.getValues")],w.prototype,"getValues",null);A.__decorate([H.aliasOf("viewModel.submit")],w.prototype,"submit",null);return w=A.__decorate([G.subclass("esri.widgets.FeatureForm")],w)})},"esri/intl/moment":function(){define(["require","exports","./locale"],function(q,A,w){const S=new Map([["ar",()=>(new Promise(function(I,t){q(["../chunks/ar"],I,t)})).then(function(I){return I.ar})],["ar-dz",()=>(new Promise(function(I,t){q(["../chunks/ar-dz"],
I,t)})).then(function(I){return I.arDz})],["ar-kw",()=>(new Promise(function(I,t){q(["../chunks/ar-kw"],I,t)})).then(function(I){return I.arKw})],["ar-ly",()=>(new Promise(function(I,t){q(["../chunks/ar-ly"],I,t)})).then(function(I){return I.arLy})],["ar-ma",()=>(new Promise(function(I,t){q(["../chunks/ar-ma"],I,t)})).then(function(I){return I.arMa})],["ar-sa",()=>(new Promise(function(I,t){q(["../chunks/ar-sa"],I,t)})).then(function(I){return I.arSa})],["ar-tn",()=>(new Promise(function(I,t){q(["../chunks/ar-tn"],
I,t)})).then(function(I){return I.arTn})],["bs",()=>(new Promise(function(I,t){q(["../chunks/bs"],I,t)})).then(function(I){return I.bs})],["ca",()=>(new Promise(function(I,t){q(["../chunks/ca"],I,t)})).then(function(I){return I.ca})],["cs",()=>(new Promise(function(I,t){q(["../chunks/cs"],I,t)})).then(function(I){return I.cs})],["da",()=>(new Promise(function(I,t){q(["../chunks/da"],I,t)})).then(function(I){return I.da})],["de",()=>(new Promise(function(I,t){q(["../chunks/de"],I,t)})).then(function(I){return I.de})],
["de-at",()=>(new Promise(function(I,t){q(["../chunks/de-at"],I,t)})).then(function(I){return I.deAt})],["de-ch",()=>(new Promise(function(I,t){q(["../chunks/de-ch"],I,t)})).then(function(I){return I.deCh})],["el",()=>(new Promise(function(I,t){q(["../chunks/el"],I,t)})).then(function(I){return I.el})],["en-au",()=>(new Promise(function(I,t){q(["../chunks/en-au"],I,t)})).then(function(I){return I.enAu})],["en-ca",()=>(new Promise(function(I,t){q(["../chunks/en-ca"],I,t)})).then(function(I){return I.enCa})],
["en-gb",()=>(new Promise(function(I,t){q(["../chunks/en-gb"],I,t)})).then(function(I){return I.enGb})],["en-ie",()=>(new Promise(function(I,t){q(["../chunks/en-ie"],I,t)})).then(function(I){return I.enIe})],["en-il",()=>(new Promise(function(I,t){q(["../chunks/en-il"],I,t)})).then(function(I){return I.enIl})],["en-in",()=>(new Promise(function(I,t){q(["../chunks/en-in"],I,t)})).then(function(I){return I.enIn})],["en-nz",()=>(new Promise(function(I,t){q(["../chunks/en-nz"],I,t)})).then(function(I){return I.enNz})],
["en-sg",()=>(new Promise(function(I,t){q(["../chunks/en-sg"],I,t)})).then(function(I){return I.enSg})],["es",()=>(new Promise(function(I,t){q(["../chunks/es"],I,t)})).then(function(I){return I.es})],["es-do",()=>(new Promise(function(I,t){q(["../chunks/es-do"],I,t)})).then(function(I){return I.esDo})],["es-mx",()=>(new Promise(function(I,t){q(["../chunks/es-mx"],I,t)})).then(function(I){return I.esMx})],["es-us",()=>(new Promise(function(I,t){q(["../chunks/es-us"],I,t)})).then(function(I){return I.esUs})],
["et",()=>(new Promise(function(I,t){q(["../chunks/et"],I,t)})).then(function(I){return I.et})],["fi",()=>(new Promise(function(I,t){q(["../chunks/fi"],I,t)})).then(function(I){return I.fi})],["fr",()=>(new Promise(function(I,t){q(["../chunks/fr"],I,t)})).then(function(I){return I.fr})],["fr-ca",()=>(new Promise(function(I,t){q(["../chunks/fr-ca"],I,t)})).then(function(I){return I.frCa})],["fr-ch",()=>(new Promise(function(I,t){q(["../chunks/fr-ch"],I,t)})).then(function(I){return I.frCh})],["he",
()=>(new Promise(function(I,t){q(["../chunks/he"],I,t)})).then(function(I){return I.he})],["hr",()=>(new Promise(function(I,t){q(["../chunks/hr"],I,t)})).then(function(I){return I.hr})],["hu",()=>(new Promise(function(I,t){q(["../chunks/hu"],I,t)})).then(function(I){return I.hu})],["id",()=>(new Promise(function(I,t){q(["../chunks/id"],I,t)})).then(function(I){return I.id})],["it",()=>(new Promise(function(I,t){q(["../chunks/it"],I,t)})).then(function(I){return I.it})],["it-ch",()=>(new Promise(function(I,
t){q(["../chunks/it-ch"],I,t)})).then(function(I){return I.itCh})],["ja",()=>(new Promise(function(I,t){q(["../chunks/ja"],I,t)})).then(function(I){return I.ja})],["ko",()=>(new Promise(function(I,t){q(["../chunks/ko"],I,t)})).then(function(I){return I.ko})],["lt",()=>(new Promise(function(I,t){q(["../chunks/lt"],I,t)})).then(function(I){return I.lt})],["lv",()=>(new Promise(function(I,t){q(["../chunks/lv"],I,t)})).then(function(I){return I.lv})],["nb",()=>(new Promise(function(I,t){q(["../chunks/nb"],
I,t)})).then(function(I){return I.nb})],["nl",()=>(new Promise(function(I,t){q(["../chunks/nl"],I,t)})).then(function(I){return I.nl})],["nl-be",()=>(new Promise(function(I,t){q(["../chunks/nl-be"],I,t)})).then(function(I){return I.nlBe})],["pl",()=>(new Promise(function(I,t){q(["../chunks/pl"],I,t)})).then(function(I){return I.pl})],["pt",()=>(new Promise(function(I,t){q(["../chunks/pt"],I,t)})).then(function(I){return I.pt})],["pt-br",()=>(new Promise(function(I,t){q(["../chunks/pt-br"],I,t)})).then(function(I){return I.ptBr})],
["ro",()=>(new Promise(function(I,t){q(["../chunks/ro"],I,t)})).then(function(I){return I.ro})],["ru",()=>(new Promise(function(I,t){q(["../chunks/ru"],I,t)})).then(function(I){return I.ru})],["sk",()=>(new Promise(function(I,t){q(["../chunks/sk"],I,t)})).then(function(I){return I.sk})],["sl",()=>(new Promise(function(I,t){q(["../chunks/sl"],I,t)})).then(function(I){return I.sl})],["sr",()=>(new Promise(function(I,t){q(["../chunks/sr"],I,t)})).then(function(I){return I.sr})],["sr-cyrl",()=>(new Promise(function(I,
t){q(["../chunks/sr-cyrl"],I,t)})).then(function(I){return I.srCyrl})],["sv",()=>(new Promise(function(I,t){q(["../chunks/sv"],I,t)})).then(function(I){return I.sv})],["th",()=>(new Promise(function(I,t){q(["../chunks/th"],I,t)})).then(function(I){return I.th})],["tr",()=>(new Promise(function(I,t){q(["../chunks/tr"],I,t)})).then(function(I){return I.tr})],["uk",()=>(new Promise(function(I,t){q(["../chunks/uk"],I,t)})).then(function(I){return I.uk})],["vi",()=>(new Promise(function(I,t){q(["../chunks/vi"],
I,t)})).then(function(I){return I.vi})],["zh-cn",()=>(new Promise(function(I,t){q(["../chunks/zh-cn"],I,t)})).then(function(I){return I.zhCn})],["zh-hk",()=>(new Promise(function(I,t){q(["../chunks/zh-hk"],I,t)})).then(function(I){return I.zhHk})],["zh-mo",()=>(new Promise(function(I,t){q(["../chunks/zh-mo"],I,t)})).then(function(I){return I.zhMo})],["zh-tw",()=>(new Promise(function(I,t){q(["../chunks/zh-tw"],I,t)})).then(function(I){return I.zhTw})]]);A.loadMoment=async function(I=w.getLocale()){const t=
(await (new Promise(function(v,G){q(["../chunks/moment"],v,G)})).then(function(v){return v.moment})).default;let H=S.has(I);if(!H){const v=I.split("-");1<v.length&&S.has(v[0])&&(I=v[0],H=!0)}H?await S.get(I)():I="en";I!==t.locale()&&t.locale(I);return t};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/ReentrantObjectPool ../../core/Evented ../../support/arcadeOnDemand ../../intl/locale ../../intl/messages ../../intl ../../Graphic ../../core/watchUtils ../../form/FormTemplate ../../core/HandleOwner ./FieldConfig ./FieldGroupConfig ./InputField ./InputFieldGroup ./support/formTemplateUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J,L){function Y(oa){return!!oa.fieldConfig}const W=new r({attributes:{}}),aa=S.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel");w=function(oa){function ta(X){X=oa.call(this,X)||this;X._arcade=null;X._fieldPool=new D.ReentrantObjectPool(K);X._fieldGroupPool=new D.ReentrantObjectPool(J);X._featureClone=W.clone();X._needsArcade=!1;X.messages=null;X.strict=!1;return X}q._inheritsLoose(ta,oa);var la=ta.prototype;la.initialize=function(){const X=
async()=>this.messages=await z.fetchMessageBundle("esri/widgets/FeatureForm/t9n/FeatureForm");X();this.handles.add(N.onLocaleChange(X));const U=C.init(this,"fieldConfig",async ka=>{const sa=[];ka&&ka.forEach(na=>{sa.push(na.visibilityExpression);na.fieldConfig?na.fieldConfig.forEach(({requiredExpression:pa,visibilityExpression:va})=>{sa.push(pa,va)}):sa.push(na.requiredExpression)});ka=sa.filter(na=>!!na);const qa=0<ka.length;if(qa){const na=await M.loadArcade(),{arcadeUtils:pa}=na;ka.some(va=>pa.hasGeometryOperations(va))&&
(await pa.enableGeometryOperations(),U.remove());this._arcade=na;this.notifyChange("inputFields")}this._needsArcade=qa});this.handles.add(U)};la.destroy=function(){this.layer=this.feature=this.fieldConfig=null;this._fieldPool.destroy();this._fieldGroupPool.destroy()};la.castFieldConfig=function(X){return X?X.map(U=>U instanceof T||U instanceof F?U:U.fieldConfig?new F(U):new T(U)):null};la.findField=function(X){return this._allInputFields.find(U=>U.name===X)};la.getValue=function(X){const {_featureClone:U}=
this;return U.attributes?U.get(`attributes.${X}`):void 0};la.setValue=function(X,U){const {_featureClone:ka,strict:sa}=this;if(ka.attributes){var qa=this.findField(X);U=""===U?null:U;if(qa&&ka.attributes[X]!==U){qa.value=U;if(this.get("layer.typeIdField")===qa.name){const na=new Set;this.layer.types.forEach(pa=>Object.keys(pa.domains).forEach(va=>na.add(va)));na.forEach(pa=>{(pa=this.findField(pa))&&pa.notifyChange("domain")})}if(!sa||qa.valid)ka.attributes[X]=U,this.notifyChange("inputFields"),this._emitChangeEvent(qa)}}};
la.getValues=function(){return{...this._featureClone.attributes}};la.submit=function(){var X=this._allInputFields;const U=X.filter(sa=>sa.valid).map(({name:sa})=>sa);X=X.filter(sa=>!sa.valid).map(({name:sa})=>sa);const ka=this.getValues();this.emit("submit",{valid:U,invalid:X,values:ka})};la._disposeInputOrGroup=function(X){X.inputFields?this._disposeGroup(X):this._disposeInput(X)};la._disposeGroup=function(X){X.inputFields.forEach(U=>this._disposeInput(U));this._fieldGroupPool.release(X)};la._disposeInput=
function(X){this._fieldPool.release(X)};la._emitChangeEvent=function({name:X,valid:U,value:ka}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:X,value:ka,valid:U})};q._createClass(ta,[{key:"_allInputFields",get:function(){return this.inputFields.reduce((X,U)=>U.inputFields?[...X,...U.inputFields]:[...X,U],[])}},{key:"_inputFieldCache",get:function(){const X=this._get("_inputFieldCache")||new Map;X.forEach(U=>this._disposeInputOrGroup(U));X.clear();(this.get("layer.fields")||
[]).forEach(U=>X.set(U,this._fieldPool.acquire()));return X}},{key:"_inputFieldGroupCache",get:function(){const X=this._get("_inputFieldGroupCache")||new Map;X.forEach(U=>this._disposeInputOrGroup(U));X.clear();(this.fieldConfig||[]).filter(Y).forEach(U=>X.set(U,this._fieldGroupPool.acquire()));return X}},{key:"description",get:function(){var X;return null==(X=this.formTemplate)?void 0:X.description},set:function(X){void 0===X?this._clearOverride("description"):this._override("description",X)}},{key:"feature",
get:function(){return this._get("feature")},set:function(X){this._featureClone=X?X.clone():W.clone();this._set("feature",X)}},{key:"fieldConfig",get:function(){const {formTemplate:X}=this;if(!X)return null;const {config:U,encounteredUnsupportedTypes:ka}=L.fieldConfigsFromFormTemplate(X);0<ka.length&&aa.warn("form-info::unsupported-type","encountered unsupported elements/types when parsing form info",ka);return U},set:function(X){X?this._override("fieldConfig",X):this._clearOverride("fieldConfig")}},
{key:"formTemplate",get:function(){var X;return null==(X=this.layer)?void 0:X.formTemplate},set:function(X){void 0===X?this._clearOverride("formTemplate"):this._override("formTemplate",X)}},{key:"inputFields",get:function(){const {_arcade:X,_inputFieldCache:U,_inputFieldGroupCache:ka,_featureClone:sa,messages:qa,_needsArcade:na,layer:pa,state:va}=this,ja=sa.clone();if("ready"!==va||na&&!X)return[];const ua=this.get("layer.fields")||[],Aa=this.fieldConfig||[];return(0!==Aa.length?Aa.map(Ga=>{if(Ga.fieldConfig){const Z=
ka.get(Ga);var Na=Ga.fieldConfig.map(ha=>{const Ca=ua.find(Ja=>Ja.name===ha.name),Da=U.get(Ca);Da.set({arcade:X,field:Ca,config:ha,feature:ja,group:Z,layer:pa,messages:qa,value:this.getValue(Ca.name)});return Da}).filter(ha=>ha.visible);Z.set({arcade:X,config:Ga,feature:ja,inputFields:Na});return Z}Na=ua.find(Z=>Z.name===Ga.name);const Oa=U.get(Na);Oa.set({arcade:X,field:Na,config:Ga,feature:ja,group:null,layer:pa,messages:qa,value:this.getValue(Na.name)});return Oa}):ua.map(Ga=>{const Na=U.get(Ga);
Na.set({arcade:X,config:null,field:Ga,feature:ja,group:null,layer:pa,messages:qa,value:this.getValue(Ga.name)});return Na})).filter(Ga=>Ga.visible)}},{key:"layer",get:function(){return this.get("feature.layer")},set:function(X){X?this._override("layer",X):this._clearOverride("layer")}},{key:"state",get:function(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}},{key:"title",get:function(){var X;return null==(X=this.formTemplate)?void 0:X.title},set:function(X){void 0===X?this._clearOverride("title"):
this._override("title",X)}},{key:"valid",get:function(){const X=this._allInputFields;return 0<X.length&&X.every(({valid:U})=>U)}}]);return ta}(P.HandleOwnerMixin(B.EventedAccessor));A.__decorate([I.property({readOnly:!0,dependsOn:["inputFields"]})],w.prototype,"_allInputFields",null);A.__decorate([I.property({dependsOn:["layer.fields"],readOnly:!0})],w.prototype,"_inputFieldCache",null);A.__decorate([I.property({dependsOn:["fieldConfig"],readOnly:!0})],w.prototype,"_inputFieldGroupCache",null);A.__decorate([I.property({dependsOn:["formTemplate"]})],
w.prototype,"description",null);A.__decorate([I.property()],w.prototype,"feature",null);A.__decorate([I.property({dependsOn:["formTemplate"]})],w.prototype,"fieldConfig",null);A.__decorate([t.cast("fieldConfig")],w.prototype,"castFieldConfig",null);A.__decorate([I.property({dependsOn:["layer?.formTemplate"],type:O})],w.prototype,"formTemplate",null);A.__decorate([I.property({readOnly:!0,dependsOn:"messages feature fieldConfig layer.fields layer.loaded state".split(" "),autoTracked:!1})],w.prototype,
"inputFields",null);A.__decorate([I.property({dependsOn:["feature.layer"]})],w.prototype,"layer",null);A.__decorate([I.property()],w.prototype,"messages",void 0);A.__decorate([I.property({dependsOn:["messages","layer.loaded"]})],w.prototype,"state",null);A.__decorate([I.property()],w.prototype,"strict",void 0);A.__decorate([I.property({dependsOn:["formTemplate"]})],w.prototype,"title",null);A.__decorate([I.property({dependsOn:["_allInputFields"]})],w.prototype,"valid",null);A.__decorate([I.property()],
w.prototype,"getValues",null);A.__decorate([I.property()],w.prototype,"submit",null);return w=A.__decorate([v.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],w)})},"esri/widgets/FeatureForm/FieldConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ./Format".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){w=function(M){function N(z){z=M.call(this,z)||this;z.description=null;z.domain=null;z.editable=!0;z.editorType=null;z.format=null;z.hint=null;z.includeTime=!0;z.label=null;z.maxLength=-1;z.minLength=-1;z.name=null;z.required=!1;z.requiredExpression=null;z.visibilityExpression=null;return z}q._inheritsLoose(N,M);return N}(D);A.__decorate([t.property()],w.prototype,"description",void 0);A.__decorate([t.property()],w.prototype,"domain",void 0);A.__decorate([t.property()],
w.prototype,"editable",void 0);A.__decorate([t.property()],w.prototype,"editorType",void 0);A.__decorate([t.property({type:B})],w.prototype,"format",void 0);A.__decorate([t.property()],w.prototype,"hint",void 0);A.__decorate([t.property()],w.prototype,"includeTime",void 0);A.__decorate([t.property()],w.prototype,"label",void 0);A.__decorate([t.property()],w.prototype,"maxLength",void 0);A.__decorate([t.property()],w.prototype,"minLength",void 0);A.__decorate([t.property()],w.prototype,"name",void 0);
A.__decorate([t.property()],w.prototype,"required",void 0);A.__decorate([t.property()],w.prototype,"requiredExpression",void 0);A.__decorate([t.property()],w.prototype,"visibilityExpression",void 0);return w=A.__decorate([v.subclass("esri.widgets.FeatureForm.FieldConfig")],w)})},"esri/widgets/FeatureForm/Format":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/date".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){w=function(M){function N(z){z=M.call(this,z)||this;z.digitSeparator=!1;z.dateFormat=null;z.places=null;return z}q._inheritsLoose(N,M);return N}(D.JSONSupport);A.__decorate([t.property()],w.prototype,"digitSeparator",void 0);A.__decorate([t.property({json:{read:{source:"dateFormat",reader:B.fromJSON}}})],w.prototype,"dateFormat",void 0);A.__decorate([t.property()],w.prototype,"places",void 0);return w=A.__decorate([v.subclass("esri.widgets.FeatureForm.Format")],
w)})},"esri/widgets/FeatureForm/FieldGroupConfig":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ./FieldConfig".split(" "),function(q,A,w,S,I,t,H,v,G,y,u,D,B){w=function(M){function N(z){z=
M.call(this,z)||this;z.description=null;z.fieldConfig=null;z.label=null;z.state="expanded";z.visibilityExpression=null;return z}q._inheritsLoose(N,M);N.prototype.castFieldConfig=function(z){return z?z.map(E=>E.declaredClass?E:new B(E)):null};return N}(D);A.__decorate([I.property()],w.prototype,"description",void 0);A.__decorate([I.property()],w.prototype,"fieldConfig",void 0);A.__decorate([t.cast("fieldConfig")],w.prototype,"castFieldConfig",null);A.__decorate([I.property()],w.prototype,"label",void 0);
A.__decorate([I.property()],w.prototype,"state",void 0);A.__decorate([I.property()],w.prototype,"visibilityExpression",void 0);return w=A.__decorate([v.subclass("esri.widgets.FeatureForm.FieldGroupConfig")],w)})},"esri/widgets/FeatureForm/InputField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../layers/support/CodedValueDomain ../../layers/support/domains ../../layers/support/fieldUtils ../../intl/substitute ../../intl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){const r={type:"number"},C={type:"number",intlOptions:{notation:"scientific"}},O={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric",second:"numeric"}};w=function(P){function T(K){K=P.call(this,K)||this;K.arcade=null;K.config=null;K.feature=null;K.field=null;K.layer=null;K.description=null;K.editorType=null;K.error=null;K.format=null;K.group=null;K.hint=null;K.messages=null;K.name=null;return K}q._inheritsLoose(T,
P);var F=T.prototype;F._isDomainCompatible=function(K){const {field:J}=this;if("coded-value"===(null==K?void 0:K.type)){const L=typeof K.codedValues[0].code;if("string"===L&&N.isStringField(J)||"number"===L&&N.isNumericField(J))return!0}return"range"===(null==K?void 0:K.type)&&N.isNumericField(J)||N.isDateField(J)?!0:!1};F._validate=function(){const {domain:K,field:J,minLength:L,required:Y,type:W,value:aa}=this;return"text"===W&&-1<L&&"string"===typeof aa&&aa.length<L?"length-validation-error::too-short":
K?null!==aa||Y?M.validateDomainValue(K,aa):null:Y&&null===aa?N.TypeValidationError.INVALID_TYPE:N.validateFieldValue(J,aa)};F._shownByDefault=function(){var K;const J=null==(K=this.field)?void 0:K.type;return"oid"!==J&&"global-id"!==J&&!this._isGeometryField()};F._isEditorField=function(){return-1<N.getFeatureEditFields(this.layer).indexOf(this.name)};F._isGeometryField=function(){return-1<N.getFeatureGeometryFields(this.layer).indexOf(this.name)};F._toErrorMessage=function(){const {domain:K,field:J,
messages:L,minLength:Y,value:W,required:aa,type:oa}=this;var ta=this.error;return aa&&null===W?L.validationErrors.cannotBeNull:ta===M.DomainValidationError.VALUE_OUT_OF_RANGE||ta===N.NumericRangeValidationError.OUT_OF_RANGE?(ta=M.getDomainRange(K)||N.getFieldRange(J),z.substitute(L.validationErrors.outsideRange,ta,{format:{max:"date"===oa?O:ta.isInteger?r:C,min:"date"===oa?O:ta.isInteger?r:C}})):ta===M.DomainValidationError.INVALID_CODED_VALUE?L.validationErrors.invalidCodedValue:ta===N.TypeValidationError.INVALID_TYPE?
L.validationErrors.invalidType:"length-validation-error::too-short"===ta?z.substitute(L.validationErrors.tooShort,{min:Y}):null};q._createClass(T,[{key:"compiledFunc",get:function(){var K;const {arcade:J}=this;return J&&J.arcadeUtils.createFunction(null==(K=this.config)?void 0:K.visibilityExpression)}},{key:"compiledRequiredFunc",get:function(){var K;const {arcade:J}=this;return J&&J.arcadeUtils.createFunction(null==(K=this.config)?void 0:K.requiredExpression)}},{key:"evaluatedRequirement",get:function(){const K=
this.compiledRequiredFunc;if(!K)return null;const {arcade:J}=this;return J.arcadeUtils.executeFunction(K,J.arcadeUtils.createExecContext(this.feature))}},{key:"evaluatedVisibility",get:function(){const K=this.compiledFunc;if(!K)return null;const {arcade:J}=this;return J.arcadeUtils.executeFunction(K,J.arcadeUtils.createExecContext(this.feature))}},{key:"domain",get:function(){var K,J,{typeIdField:L}=this.layer;const Y=L===this.name;var W=null==(K=this.field)?void 0:K.domain;if(Y&&!W)return new B({name:"__internal-type-based-coded-value-domain__",
codedValues:this.layer.types.map(({id:aa,name:oa})=>({code:aa,name:oa}))});({feature:K}=this);L=L&&this.layer.getFieldDomain(this.name,{feature:K})||W;W=null==(J=this.config)?void 0:J.domain;return this._isDomainCompatible(W)?W:L}},{key:"editable",get:function(){var K;return this.layer.capabilities.operations.supportsEditing&&this.field.editable&&!1!==(null==(K=this.config)?void 0:K.editable)}},{key:"errorMessage",get:function(){return this._toErrorMessage()}},{key:"includeTime",get:function(){var K;
const J=null==(K=this.config)?void 0:K.includeTime;return void 0===J?!0:J}},{key:"label",get:function(){var K;return(null==(K=this.config)?void 0:K.label)||this.field.alias||this.field.name}},{key:"maxLength",get:function(){var K,J;if("date"===this.type)return-1;const L=null==(K=this.field)?void 0:K.length;K=null==(J=this.config)?void 0:J.maxLength;return!isNaN(K)&&-1<=K&&(-1===L||K<=L)?K:L}},{key:"minLength",get:function(){var K,J;if("date"===this.type)return-1;const L=null==(K=this.field)?void 0:
K.length;K=null==(J=this.config)?void 0:J.minLength;return!isNaN(K)&&-1<=K&&(-1===L||K<=L)?K:-1}},{key:"required",get:function(){var K,J;return this.editable?null!=(K=this.field)&&K.nullable?"boolean"===typeof this.evaluatedRequirement?this.evaluatedRequirement:!0===(null==(J=this.config)?void 0:J.required):!0:!1}},{key:"type",get:function(){const {field:K}=this;return N.isNumericField(K)?"number":N.isStringField(K)?"text":N.isDateField(K)?"date":"unsupported"}},{key:"valid",get:function(){const K=
this.editable?this._validate():null;this._set("error",K);return null===K}},{key:"value",get:function(){return this._get("value")},set:function(K){this.notifyChange("evaluatedVisibility");this._set("value",K)}},{key:"visible",get:function(){return this._isEditorField()?!1:"boolean"===typeof this.evaluatedVisibility?this.evaluatedVisibility:!!this.config||this._shownByDefault()}}]);return T}(D);A.__decorate([t.property()],w.prototype,"arcade",void 0);A.__decorate([t.property({dependsOn:["arcade","config.visibilityExpression"]})],
w.prototype,"compiledFunc",null);A.__decorate([t.property({dependsOn:["arcade","config.requiredExpression"]})],w.prototype,"compiledRequiredFunc",null);A.__decorate([t.property()],w.prototype,"config",void 0);A.__decorate([t.property({dependsOn:["compiledRequiredFunc","feature"]})],w.prototype,"evaluatedRequirement",null);A.__decorate([t.property({dependsOn:["compiledFunc","feature"]})],w.prototype,"evaluatedVisibility",null);A.__decorate([t.property()],w.prototype,"feature",void 0);A.__decorate([t.property()],
w.prototype,"field",void 0);A.__decorate([t.property()],w.prototype,"layer",void 0);A.__decorate([t.property({aliasOf:"config.description"})],w.prototype,"description",void 0);A.__decorate([t.property({dependsOn:["config","feature","field","layer"]})],w.prototype,"domain",null);A.__decorate([t.property({dependsOn:["config","field","layer"]})],w.prototype,"editable",null);A.__decorate([t.property({aliasOf:"config.editorType"})],w.prototype,"editorType",void 0);A.__decorate([t.property({readOnly:!0})],
w.prototype,"error",void 0);A.__decorate([t.property({dependsOn:["error","messages","value"],autoTracked:!1})],w.prototype,"errorMessage",null);A.__decorate([t.property({aliasOf:"config.format"})],w.prototype,"format",void 0);A.__decorate([t.property()],w.prototype,"group",void 0);A.__decorate([t.property({aliasOf:"config.hint"})],w.prototype,"hint",void 0);A.__decorate([t.property({dependsOn:["config.includeTime"]})],w.prototype,"includeTime",null);A.__decorate([t.property({dependsOn:["field","config"]})],
w.prototype,"label",null);A.__decorate([t.property({dependsOn:["field.length","config"]})],w.prototype,"maxLength",null);A.__decorate([t.property({dependsOn:["field.length","config"]})],w.prototype,"minLength",null);A.__decorate([t.property()],w.prototype,"messages",void 0);A.__decorate([t.property({aliasOf:"field.name"})],w.prototype,"name",void 0);A.__decorate([t.property({dependsOn:["config","evaluatedRequirement","field"]})],w.prototype,"required",null);A.__decorate([t.property({dependsOn:["field"]})],
w.prototype,"type",null);A.__decorate([t.property({dependsOn:["config","domain","field","layer","value"]})],w.prototype,"valid",null);A.__decorate([t.property({value:null})],w.prototype,"value",null);A.__decorate([t.property({dependsOn:["config","evaluatedVisibility","field","layer"]})],w.prototype,"visible",null);return w=A.__decorate([v.subclass("esri.widgets.FeatureForm.InputField")],w)})},"esri/widgets/FeatureForm/InputFieldGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/HandleOwner".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M){w=function(N){function z(E){E=N.call(this,E)||this;E.arcade=null;E.config=null;E.description=null;E.feature=null;E.label=null;E.state=null;E.visibilityExpression=null;return E}q._inheritsLoose(z,N);z.prototype._dirtyEvaluatedVisibility=function(){this.visibilityExpression&&this.notifyChange("evaluatedVisibility")};q._createClass(z,[{key:"compiledFunc",get:function(){const {arcade:E}=this;return E&&E.arcadeUtils.createFunction(this.visibilityExpression)}},{key:"evaluatedVisibility",
get:function(){const E=this.compiledFunc;if(E){var {arcade:r}=this;return r.arcadeUtils.executeFunction(E,r.arcadeUtils.createExecContext(this.feature))}}},{key:"inputFields",get:function(){return this._get("inputFields")},set:function(E){this.handles.removeAll();E&&this.handles.add(E.map(r=>r.watch("visible",this._dirtyEvaluatedVisibility)));this._set("inputFields",E)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibility&&this.inputFields&&this.inputFields.some(E=>E.visible)}}]);return z}(M.HandleOwnerMixin(B));
A.__decorate([t.property()],w.prototype,"arcade",void 0);A.__decorate([t.property({dependsOn:["arcade","visibilityExpression"]})],w.prototype,"compiledFunc",null);A.__decorate([t.property()],w.prototype,"config",void 0);A.__decorate([t.property({dependsOn:["compiledFunc","feature"]})],w.prototype,"evaluatedVisibility",null);A.__decorate([H.aliasOf("config.description")],w.prototype,"description",void 0);A.__decorate([t.property()],w.prototype,"feature",void 0);A.__decorate([t.property()],w.prototype,
"inputFields",null);A.__decorate([H.aliasOf("config.label")],w.prototype,"label",void 0);A.__decorate([H.aliasOf("config.state")],w.prototype,"state",void 0);A.__decorate([H.aliasOf("config.visibilityExpression")],w.prototype,"visibilityExpression",void 0);A.__decorate([t.property({dependsOn:["evaluatedVisibility","inputFields"]})],w.prototype,"visible",null);return w=A.__decorate([G.subclass("esri.widgets.FeatureForm.InputFieldGroup")],w)})},"esri/widgets/FeatureForm/support/formTemplateUtils":function(){define(["exports",
"../../../layers/support/RangeDomain","../FieldConfig","../FieldGroupConfig"],function(q,A,w,S){function I(t,H,v,G=!0){return t.map(y=>{if("field"===y.type){{const {description:D,domain:B,editable:M,fieldName:N,hint:z,input:E,label:r,requiredExpression:C,visibilityExpression:O}=y;y=new w({description:D,domain:B,editable:M,hint:z,label:r,name:N,requiredExpression:H[C]||null,visibilityExpression:H[O]||null});if(E)if("text-area"===E.type||"text-box"===E.type)y.editorType=E.type,y.minLength=E.minLength,
y.maxLength=E.maxLength;else if("datetime-picker"===E.type){y.editorType=E.type;y.includeTime=E.includeTime;const {max:P,min:T}=E;if(P||T){var u="range"===(null==B?void 0:B.type)?Math.min(null==P?void 0:P.getTime(),B.maxValue):null==P?void 0:P.getTime();const F="range"===(null==B?void 0:B.type)?Math.max(null==T?void 0:T.getTime(),B.minValue):null==T?void 0:T.getTime();y.domain=new A({maxValue:u,minValue:F,name:"__internal-range-domain-based-on-datetime-picker-input__"})}}else v.push({type:"unsupported-input-type",
details:E})}return y}if("group"===y.type){if(!G)return v.push({type:"nested-group",details:y}),null;u=H[y.visibilityExpression]||null;return new S({description:y.description,state:y.initialState,fieldConfig:I(y.elements,H,v,!1),label:y.label,visibilityExpression:u})}v.push({type:"unsupported-element-type",details:y});return null}).filter(y=>!!y)}q.fieldConfigsFromFormTemplate=function(t){var H;const v={},G=[];null==(H=t.expressionInfos)?void 0:H.map(y=>v[y.name]=y.expression);return{config:I(t.elements,
v,G),encounteredUnsupportedTypes:G}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/widgetUtils","../../chunks/index"],function(q,A,w){function S(y){const {identify:u,items:D,renderIcon:B,filterText:M,onItemMouseLeave:N,onItemMouseEnter:z,onItemSelect:E}=y;return 0===D.length?w.jsx("div",{class:G.noMatchesMessage,key:"no-matches"},y.messages.noMatches):D[0].items?w.jsx("div",{class:G.scroller,key:"item-container"},
D.map(r=>H({group:r,filterText:M,identify:u,renderIcon:B,onItemMouseLeave:N,onItemMouseEnter:z,onItemSelect:E}))):w.jsx("ul",{class:A.classes(G.list,G.scroller),key:"item-container"},D.map(r=>t({item:r,identify:u,grouped:!0,onItemMouseLeave:N,onItemMouseEnter:z,onItemSelect:E,renderIcon:B,filterText:M})))}function I(y){const u=`${y.id}-placeholder`;return w.jsx("div",{class:G.filterContainer,key:"filter"},w.jsx("input",{"aria-labelledby":u,class:A.classes(G.input,G.filterInput),oninput:D=>{D=D.currentTarget;
y.onFilterChange&&y.onFilterChange(D.value)},value:y.filterText,type:"search"}),y.filterText?null:w.jsx("div",{class:G.filterPlaceholder,id:u,key:"placeholder"},w.jsx("span",{class:G.searchIcon,"aria-hidden":"true"}),w.jsx("div",{class:G.filterPlaceholderText},y.messages.filterPlaceholder)))}function t(y){const {identify:u,item:D,grouped:B,filterText:M,onItemSelect:N,onItemMouseEnter:z,onItemMouseLeave:E,renderIcon:r}=y;y=`${u&&u(D)||D.id}__${D.label}`;return w.jsx("li",{"aria-level":B?"2":"",class:G.item,
"data-item":D,key:y,onclick:C=>{C=C.currentTarget["data-item"];N&&N(C)},onmouseenter:C=>{C=C.currentTarget["data-item"];z&&z(C)},onkeydown:C=>{if("Enter"===C.key||"Space"===C.key)C=C.currentTarget["data-item"],N&&N(C)},onmouseleave:C=>{C=C.currentTarget["data-item"];E&&E(C)},tabIndex:0},w.jsx("div",{class:G.itemContainer},r&&r({item:D}),v({text:D.label,match:M})))}function H(y){const {group:u,identify:D,onItemMouseLeave:B,onItemMouseEnter:M,onItemSelect:N,filterText:z,renderIcon:E}=y;y=`${D&&D(u)||
u.id}-heading`;return w.jsx("section",{"aria-labelledby":y,class:G.group,key:u.label},w.jsx("h4",{"aria-level":"1",id:y,class:A.classes(G.groupHeader)},v({text:u.label,match:z})),w.jsx("ul",{class:G.list},u.items.map(r=>t({item:r,identify:D,grouped:!0,onItemMouseLeave:B,onItemMouseEnter:M,onItemSelect:N,renderIcon:E,filterText:z}))))}function v(y){const {match:u,text:D}=y;y=null;if(u){y=D.toLowerCase();var B=u.toLowerCase(),M=y.indexOf(B);-1===M?y=D:(y=D.substring(0,M),B=D.substr(M,u.length),M=D.substring(M+
u.length),y=w.jsx("span",null,y,w.jsx("strong",null,B),M))}else y=D;return w.jsx("span",{class:G.itemLabel},y)}const G={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group-header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",
noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",heading:"esri-widget__heading",input:"esri-input"};q.ItemList=function(y){const {id:u,identify:D,filterEnabled:B=!0,items:M,messages:N,filterText:z="",onFilterChange:E,renderIcon:r,onItemMouseLeave:C,
onItemMouseEnter:O,onItemSelect:P}=y;return w.jsx("div",{class:A.classes(G.base,G.widget)},B?I({filterText:z,messages:N,onFilterChange:E,id:u}):null,S({identify:D,items:M,messages:N,filterText:z,renderIcon:r,onItemMouseLeave:C,onItemMouseEnter:O,onItemSelect:P}))};q.renderGroup=H;q.renderItem=t;q.renderLabel=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ../core/HandleOwner ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ./support/decorators/vmEvent ../chunks/index ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F){function K(Y){return Y.label}const J=S.getLogger("esri.widgets.FeatureTemplates"),L={filter:!0};w=function(Y){function W(oa,ta){oa=Y.call(this,oa,ta)||this;oa._iconIntersectionObserver=new IntersectionObserver((la,X)=>{la.forEach(async U=>{if(U.isIntersecting&&(U=U.target,!U["data-has-icon"])){const ka=U["data-item"];U["data-has-icon"]=!0;X.unobserve(U);await ka.fetchThumbnail();U["data-item"]===ka&&ka.thumbnail?U.appendChild(ka.thumbnail):(U["data-has-icon"]=
!1,X.observe(U))}})});oa.filterFunction=null;oa.filterText="";oa.groupBy=null;oa.label=void 0;oa.layers=null;oa.messages=null;oa.viewModel=new T;oa.visibleElements={...L};oa.renderItemIcon=oa.renderItemIcon.bind(q._assertThisInitialized(oa));oa._afterItemCreateOrUpdate=oa._afterItemCreateOrUpdate.bind(q._assertThisInitialized(oa));oa._afterItemRemoved=oa._afterItemRemoved.bind(q._assertThisInitialized(oa));return oa}q._inheritsLoose(W,Y);var aa=W.prototype;aa.initialize=function(){const oa=({label:ta})=>
!this.filterText||-1<ta.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(M.init(this,"viewModel",(ta,la)=>{ta&&!ta.filterFunction&&(this.filterFunction=oa);la&&la!==ta&&la.filterFunction===oa&&(la.filterFunction=null)}))};aa.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};aa.castVisibleElements=function(oa){return{...L,...oa}};aa.render=function(){const {filterText:oa,messages:ta,viewModel:{items:la,
state:X}}=this,U=this.visibleElements.filter;return O.jsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":ta.widgetLabel},"loading"===X?this.renderLoader():"ready"===X?F.ItemList({id:this.id,identify:K,filterText:oa,items:la,messages:{filterPlaceholder:ta.filterPlaceholder,noItems:ta.noItems,noMatches:ta.noMatches},filterEnabled:U,onItemSelect:ka=>{this.viewModel.select(ka)},onFilterChange:ka=>{this.filterText=ka;this.viewModel.refresh()},renderIcon:this.renderItemIcon}):
null)};aa.renderItemIcon=function({item:oa}){return O.jsx("span",{key:"icon",class:"esri-feature-templates__list-item-icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":oa,"data-has-icon":!1})};aa.renderLoader=function(){return O.jsx("div",{class:"esri-feature-templates__loader",key:"loader"})};aa._afterItemCreateOrUpdate=function(oa){this._iconIntersectionObserver.observe(oa)};aa._afterItemRemoved=function(oa){this._iconIntersectionObserver.unobserve(oa)};
q._createClass(W,[{key:"filterEnabled",set:function(oa){v.deprecatedProperty(J,"filterEnabled",{replacement:"visibleElements.filter",version:"4.15"});this.visibleElements={...this.visibleElements,filter:oa}}}]);return W}(N.HandleOwnerMixin(P));A.__decorate([I.property(),r.renderable()],w.prototype,"filterEnabled",null);A.__decorate([t.aliasOf("viewModel.filterFunction")],w.prototype,"filterFunction",void 0);A.__decorate([I.property(),r.renderable()],w.prototype,"filterText",void 0);A.__decorate([t.aliasOf("viewModel.groupBy")],
w.prototype,"groupBy",void 0);A.__decorate([I.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0);A.__decorate([t.aliasOf("viewModel.layers")],w.prototype,"layers",void 0);A.__decorate([I.property(),r.renderable(),E.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],w.prototype,"messages",void 0);A.__decorate([I.property(),r.renderable(["viewModel.items","viewModel.state"]),C.vmEvent("select")],w.prototype,"viewModel",void 0);A.__decorate([I.property(),
r.renderable()],w.prototype,"visibleElements",void 0);A.__decorate([H.cast("visibleElements")],w.prototype,"castVisibleElements",null);return w=A.__decorate([y.subclass("esri.widgets.FeatureTemplates")],w)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/ObjectPool ../../core/Evented ../../core/watchUtils ../../core/HandleOwner ./TemplateItem ./TemplateItemGroup".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){const r=({layer:O})=>({key:O,label:O.title}),C=({layer:O})=>O.geometryType;w=function(O){function P(F){F=O.call(this,F)||this;F._templateToLayer=new Map;F._itemPool=new D(z);F._groupPool=new D(E);F.filterFunction=null;F.groupBy="layer";return F}q._inheritsLoose(P,O);var T=P.prototype;T.destroy=function(){this._templateToLayer.clear();this._templateToLayer=null};T.refresh=function(){this.notifyChange("items")};T.select=function(F){F=F.clone();this.emit("select",
{item:F,template:F.template})};T._getTemplatesForLayer=function(F){const K=F.templates||[];F=(F.types||[]).map(J=>J.templates).reduce((J,L)=>[...J,...L],[]);return[...K,...F]};T._createItem=function(F){const K=this._itemPool.acquire();K.set({template:F,layer:this._templateToLayer.get(F)});return K};T._createGroup=function(F,K){const J=this._groupPool.acquire();J.set("label",F);J.items=K;return J};T._destroyItems=function(F){F&&(F[0]instanceof z?F.forEach(K=>this._destroyItem(K)):F.forEach(K=>this._destroyGroup(K)))};
T._destroyGroup=function(F){F.items.forEach(K=>this._destroyItem(K));F.items.length=0;this._groupPool.release(F)};T._destroyItem=function(F){F.layer=null;F.template=null;this._itemPool.release(F)};q._createClass(P,[{key:"layers",set:function(F){this.handles.removeAll();if(F){const K=()=>this.notifyChange("state");this.handles.add(F.map(J=>M.when(J,"loadStatus",K)))}this._set("layers",F)},get:function(){return this._get("layers")}},{key:"state",get:function(){const {layers:F}=this;return F&&0!==F.length?
F.some(K=>"loading"===K.loadStatus||"not-loaded"===K.loadStatus)?"loading":"ready":"disabled"}},{key:"items",get:function(){var {layers:F}=this;this._destroyItems(this._get("items"));if(!F||0===F.length)return[];this._templateToLayer.clear();F=F.filter(({capabilities:Y,loaded:W})=>W&&Y.operations.supportsEditing&&Y.operations.supportsAdd).map(Y=>{const W=this._getTemplatesForLayer(Y);if(0<W.length)return W.forEach(aa=>this._templateToLayer.set(aa,Y)),W}).filter(Y=>null!=Y);const {groupBy:K}=this;
if("none"===K)return F.map(Y=>Y.filter(({name:W})=>!this.filterFunction||this.filterFunction({label:W}))).map(Y=>Y.map(W=>this._createItem(W))).reduce((Y,W)=>[...Y,...W],[]);F=F.reduce((Y,W)=>{W.forEach(aa=>{var oa=("layer"===K?r:"geometry"===K?C:K)({template:aa,layer:this._templateToLayer.get(aa)});if(oa){const ta="string"===typeof oa?oa:oa.key;oa="string"===typeof oa?oa:oa.label;Y.has(ta)||Y.set(ta,{label:oa,templates:[]});Y.get(ta).templates.push(aa)}});return Y},new Map);if(0===F.size)return[];
const J=[],{filterFunction:L}=this;F.forEach(Y=>{const {label:W,templates:aa}=Y;!L||this.filterFunction(Y)?J.push(this._createGroup(W,aa.map(oa=>this._createItem(oa)))):(Y=aa.filter(({name:oa})=>this.filterFunction({label:oa})).map(oa=>this._createItem(oa)),0<Y.length&&J.push(this._createGroup(W,Y)))});return J}}]);return P}(N.HandleOwnerMixin(B.EventedAccessor));A.__decorate([t.property()],w.prototype,"filterFunction",void 0);A.__decorate([t.property()],w.prototype,"groupBy",void 0);A.__decorate([t.property()],
w.prototype,"layers",null);A.__decorate([t.property({dependsOn:["layers"]})],w.prototype,"state",null);A.__decorate([t.property({dependsOn:["filterFunction","groupBy","layers","state"],readOnly:!0})],w.prototype,"items",null);return w=A.__decorate([v.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],w)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../Graphic ../../core/watchUtils ../../core/HandleOwner ../../symbols/support/symbolUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){function r(O){return Object.freeze({__proto__:null,"default":O})}var C;S=C=function(O){function P(F){F=O.call(this,F)||this;F._activeFetchInfo={id:null,request:null};F.description=null;F.label=null;F.layer=null;F.template=null;F.thumbnail=null;return F}A._inheritsLoose(P,O);var T=P.prototype;T.initialize=function(){this.handles.add(N.init(this,["layer.renderer","template"],()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",
null)}))};T.clone=function(){const F=this.thumbnail?this.thumbnail.cloneNode(!0):null,K=new C({layer:this.layer,template:this.template});K._set("thumbnail",F);return K};T.fetchThumbnail=async function(){const {_activeFetchInfo:F}=this;if(`${this.label}-${this.layer.id}`===F.id)return F.request;F.id=`${this.label}-${this.layer.id}`;F.request=this._getPreviewSymbol().then(async K=>{`${this.label}-${this.layer.id}`===F.id&&(K=await E.renderPreviewHTML(K,{maxSize:36}),`${this.label}-${this.layer.id}`===
F.id&&this._set("thumbnail",K))});return F.request};T._getPreviewSymbol=async function(){const {layer:F,template:K,layer:{renderer:J}}=this;if(J){var L=new M({attributes:K.prototype.attributes});if(L=await J.getSymbolAsync(L))return L}return this._getFallbackSymbolFromGeometry(F)};T._getFallbackSymbolFromGeometry=function(F){({geometryType:F}=F);if("point"===F||"multipoint"===F)return(new Promise(function(K,J){q(["../../symbols/SimpleMarkerSymbol"],function(L){K(r(L))},J)})).then(K=>new K.default);
if("polyline"===F)return(new Promise(function(K,J){q(["../../symbols/SimpleLineSymbol"],function(L){K(r(L))},J)})).then(K=>new K.default);if("polygon"===F||"mesh"===F||"multipatch"===F)return(new Promise(function(K,J){q(["../../symbols/SimpleFillSymbol"],function(L){K(r(L))},J)})).then(K=>new K.default)};return P}(z.HandleOwnerMixin(B));w.__decorate([H.property({aliasOf:"template.description"})],S.prototype,"description",void 0);w.__decorate([H.property({aliasOf:"template.name"})],S.prototype,"label",
void 0);w.__decorate([H.property()],S.prototype,"layer",void 0);w.__decorate([H.property()],S.prototype,"template",void 0);w.__decorate([H.property({readOnly:!0})],S.prototype,"thumbnail",void 0);return S=C=w.__decorate([G.subclass("esri.widgets.FeatureTemplates.TemplateItem")],S)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./utils".split(" "),function(q,A,w,S,I,t){async function H(y,u){switch(y.type){case "web-style":var {previewWebStyleSymbol:D}=
await new Promise(function(B,M){q(["./previewWebStyleSymbol"],B,M)});return D(y,H,u);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:D}=await new Promise(function(B,M){q(["./previewSymbol3D"],B,M)}),D(y,u);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:D}=await new Promise(function(B,M){q(["./previewSymbol2D"],B,M)}),D(y,u);case "cim":return{previewCIMSymbol:D}=
await new Promise(function(B,M){q(["./previewCIMSymbol"],B,M)}),D(y,u)}}function v(y){return y&&"opacity"in y?y.opacity*v(y.parent):1}let G=null;A.getDisplayedSymbol=async function(y,u){if(y){var D=v(y.layer||y.sourceLayer);if(S.isSome(y.symbol)&&(!S.isSome(u)||!0!==u.ignoreGraphicSymbol))return y="web-style"===y.symbol.type?await y.symbol.fetchSymbol(S.isSome(u)?u.abortOptions:null):y.symbol.clone(),t.applyColorToSymbol(y,null,D),y;var B=S.isSome(u)&&u.renderer||y.get("layer.renderer")||y.get("sourceLayer.renderer"),
M=await B.getSymbolAsync(y);if(M){M="web-style"===M.type?await M.fetchSymbol(S.isSome(u)?u.abortOptions:null):M.clone();if(!("visualVariables"in B)||"visualVariables"in B&&!B.visualVariables||"visualVariables"in B&&B.visualVariables&&!B.visualVariables.length)return M;B.arcadeRequiredForVisualVariables&&(S.isNone(u)||S.isNone(u.arcade))&&(u={...S.unwrap(u)},u.arcade=await I.loadArcade());var N=await new Promise(function(O,P){q(["../../renderers/visualVariables/support/visualVariableUtils"],O,P)}),
z=[],E=[],r=[],C=[];for(const O of B.visualVariables)switch(O.type){case "color":z.push(O);break;case "opacity":E.push(O);break;case "rotation":C.push(O);break;case "size":O.target||r.push(O)}B=(B=!!z.length&&z[z.length-1])?N.getColor(B,y,u):null;E=(E=!!E.length&&E[E.length-1])?N.getOpacity(E,y,u):null;null!=D&&(E=null!=E?E*D:D);t.applyColorToSymbol(M,B,E);r.length&&(D=N.getAllSizes(r,y,u),await t.applySizesToSymbol(M,D));for(const O of C)t.applyRotationToSymbol(M,N.getRotationAngle(O,y,u),O.axis);
return M}}};A.renderColorRampPreviewHTML=function(y,u={}){const D="horizontal"===u.align,{width:B=D?75:24,height:M=D?24:75,gradient:N=!0}=u;u=window.devicePixelRatio;var z=B*u,E=M*u;u=document.createElement("canvas");u.width=z;u.height=E;u.style.width=`${B}px`;u.style.height=`${M}px`;const r=u.getContext("2d");var C=D?z:0,O=D?0:E;if(N){const P=r.createLinearGradient(0,0,C,O),T=1/(y.length-1);y.forEach((F,K)=>P.addColorStop(K*T,F.toString()));r.fillStyle=P;r.fillRect(0,0,z,E)}else{z=D?z/y.length:z;
E=D?E:E/y.length;O=C=0;for(const P of y)r.fillStyle=P.toString(),r.fillRect(C,O,z,E),C=D?C+z:0,O=D?0:O+E}y=document.createElement("div");y.style.width=`${B}px`;y.style.height=`${M}px`;y.appendChild(u);return y};A.renderDotDensityPreviewHTML=function(y,u,D){const {backgroundColor:B,outline:M,dotSize:N}=y;D=D&&D.swatchSize||22;const z=Math.round(D*D/Math.pow(N,2)*.8),E=window.devicePixelRatio;y=document.createElement("canvas");const r=D*E;y.width=r;y.height=r;y.style.width=`${y.width/E}px`;y.style.height=
`${y.height/E}px`;const C=y.getContext("2d");B&&(C.fillStyle=B.toCss(!0),C.fillRect(0,0,r,r),C.fill());C.fillStyle=u.toCss(!0);if(G&&G.length/2===z)for(u=0;u<2*z;u+=2)C.fillRect(G[u],G[u+1],N*E,N*E),C.fill();else for(G=[],u=0;u<2*z;u+=2){const O=Math.floor(Math.random()*(r-0+1)),P=Math.floor(Math.random()*(r-0+1));G.push(O,P);C.fillRect(O,P,N*E,N*E);C.fill()}M&&(M.color&&(C.strokeStyle=M.color.toCss(!0)),C.lineWidth=M.width,C.strokeRect(0,0,r,r));D=new Image(D,D);D.src=y.toDataURL();return D};A.renderPreviewHTML=
H;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../core/has ../../core/maybe ../../Color ../../core/screenUtils ./Symbol3DMaterial ../../chunks/symbols ../../core/asyncUtils ../../chunks/vec3f64 ./gfxUtils".split(" "),function(q,A,w,S,I,t,H,v,G,y,u){function D(F,K){if(null==K)return F;F=F.toRgba();F[3]*=K;return new I(F)}function B(F,K,J){if(F=F.symbolLayers){var L=Y=>{Y=S.isSome(Y)?Y:null;K=K||Y||null!=J&&T;return D(K,J)};F.forEach(Y=>
{if("object"!==Y.type||null==Y.resource.href||K)if("water"===Y.type)Y.color=L(Y.color);else{var W=S.isSome(Y.material)?Y.material.color:null;W=L(W);S.isNone(Y.material)?Y.material=new H["default"]({color:W}):Y.material.color=W;null!=J&&"outline"in Y&&S.isSome(Y.outline)&&S.isSome(Y.outline.color)&&(Y.outline.color=D(Y.outline.color,J))}})}}async function M(F,K){(F=F.symbolLayers)&&await G.forEach(F,async J=>N(J,K))}async function N(F,K){switch(F.type){case "extrude":F.size="number"===typeof K[2]?
K[2]:0;break;case "icon":case "line":case "text":K=z(K);S.isSome(K)&&(F.size=K);break;case "path":{const J=r(K,y.ONES,[F.width,void 0,F.height]);F.width=O(K[0],F.width,1,J);F.height=O(K[2],F.height,1,J)}break;case "object":await E(F,K)}}function z(F){for(const K of F)if("number"===typeof K)return K;return null}async function E(F,K){const {resourceSize:J,symbolSize:L}=await C(F),Y=r(K,J,L);F.width=O(K[0],L[0],J[0],Y);F.depth=O(K[1],L[1],J[1],Y);F.height=O(K[2],L[2],J[2],Y)}function r(F,K,J){for(let L=
0;3>L;L++){const Y=F[L];switch(Y){case "symbol-value":return null!=J[L]?J[L]/K[L]:1;case "proportional":break;default:if(Y&&K[L])return Y/K[L]}}return 1}async function C(F){const K=await (await new Promise(function(oa,ta){q(["./symbolLayerUtils"],oa,ta)})).computeObjectLayerResourceSize(F,10),{width:J,height:L,depth:Y}=F;F=[J,Y,L];let W=1;for(var aa=0;3>aa;aa++)if(null!=F[aa]){W=F[aa]/K[aa];break}for(aa=0;3>aa;aa++)null==F[aa]&&(F[aa]=K[aa]*W);return{resourceSize:K,symbolSize:F}}function O(F,K,J,
L){switch(F){case "proportional":return J*L;case "symbol-value":return null!=K?K:J;default:return F}}const P=/\/resource\/(.*?)\.svg$/,T=new I("white");A.applyColorToSymbol=function(F,K,J){if(F&&(K||null!=J))if(K&&(K=new I(K)),v.isSymbol3D(F))B(F,K,J);else if(v.isSymbol2D(F)){if(K=K||F.color)F.color=D(K,J);null!=J&&"outline"in F&&F.outline&&F.outline.color&&(F.outline.color=D(F.outline.color,J))}};A.applyOpacityToColor=D;A.applyRotationToSymbol=function(F,K,J){F&&null!=K&&(v.isSymbol3D(F)?(F=F.symbolLayers)&&
F.forEach(L=>{if(L&&"object"===L.type)switch(J){case "tilt":L.tilt=K;break;case "roll":L.roll=K;break;default:L.heading=K}}):!v.isSymbol2D(F)||"simple-marker"!==F.type&&"picture-marker"!==F.type&&"text"!==F.type||(F.angle=K))};A.applySizesToSymbol=async function(F,K){if(F&&K){if(v.isSymbol3D(F))return M(F,K);if(v.isSymbol2D(F)&&(K=z(K),!S.isNone(K)))switch(F.type){case "simple-marker":F.size=K;break;case "picture-marker":{const J=F.width/F.height;1<J?(F.width=K,F.height=K*J):(F.width=K*J,F.height=
K);break}case "simple-line":F.width=K;break;case "text":F.font.size=K}}};A.getIconHref=function(F,K){K=K.resource.href;return!w("esri-canvas-svg-support")&&F.styleOrigin&&P.test(K)?K.replace(P,"/resource/png/$1.png"):K};A.getSymbolOutlineSize=function(F){if(!F)return 0;if(v.isSymbol3D(F)){{const K=F.symbolLayers&&F.symbolLayers.length;K?(F=F.symbolLayers.getItemAt(K-1),F="outline"in F?S.get(F,"outline","size"):void 0):F=void 0}return S.isSome(F)?F:0}return(F=u.getStroke(F))&&t.px2pt(F.width)||0};
A.isVolumetricSymbol=function(F){if(!F||!F.symbolLayers)return!1;switch(F.type){case "point-3d":return F.symbolLayers.some(K=>"object"===K.type);case "line-3d":return F.symbolLayers.some(K=>"path"===K.type);case "polygon-3d":return F.symbolLayers.some(K=>"object"===K.type||"extrude"===K.type);default:return!1}};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../core/promiseUtils ../../Color ../../core/screenUtils ../../request ../../assets ../../core/ItemCache ./cimSymbolUtils".split(" "),
function(q,A,w,S,I,t,H,v){function G(N){if(!N)return null;let z;switch(N.type){case "simple-fill":case "picture-fill":case "simple-marker":z=G(N.outline);break;case "simple-line":{const E=S.pt2px(N.width);"none"!==N.style&&0!==E&&(z={color:N.color,style:M(N.style),width:E,cap:N.cap,join:"miter"===N.join?S.pt2px(N.miterLimit):N.join});break}default:z=null}return z}const y=t.getAssetUrl("esri/symbols/patterns/"),u={left:"start",center:"middle",right:"end",justify:"start"},D={top:"text-before-edge",
middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},B=new H(1E3),M=function(){const N={};return function(z){if(N[z])return N[z];const E=z.replace(/-/g,"");return N[z]=E}}();w=new w([128,128,128]);q.defaultThematicColor=w;q.getFill=function(N){const z=N.style;let E=null;if(N)switch(N.type){case "simple-marker":"cross"!==z&&"x"!==z&&(E=N.color);break;case "simple-fill":"solid"===z?E=N.color:"none"!==z&&(E={type:"pattern",x:0,y:0,src:y+z+".png",width:5,height:5});break;case "picture-fill":E=
{type:"pattern",src:N.url,width:S.pt2px(N.width)*N.xscale,height:S.pt2px(N.height)*N.yscale,x:S.pt2px(N.xoffset),y:S.pt2px(N.yoffset)};break;case "text":E=N.color;break;case "cim":E=v.getCIMSymbolColor(N)}return E};q.getPatternUrlWithColor=function(N,z){const E=N+"-"+z;return void 0!==B.get(E)?A.resolve(B.get(E)):I(N,{responseType:"image"}).then(r=>{r=r.data;const C=r.naturalWidth,O=r.naturalHeight,P=document.createElement("canvas");P.width=C;P.height=O;const T=P.getContext("2d");T.fillStyle=z;T.fillRect(0,
0,C,O);T.globalCompositeOperation="destination-in";T.drawImage(r,0,0);r=P.toDataURL();B.put(E,r);return r})};q.getSVGAlign=function(N){return N=(N=N.horizontalAlignment)&&u[N.toLowerCase()]||"middle"};q.getSVGBaseline=function(N){return(N=N.verticalAlignment)&&D[N.toLowerCase()]||"alphabetic"};q.getSVGBaselineShift=function(N){return"bottom"===N.verticalAlignment?"super":null};q.getStroke=G;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],
function(q){return function(){function A(S,I){this._storage=new q.MemCacheStorage;this._storage.maxSize=S;I&&this._storage.registerRemoveFunc("",I)}var w=A.prototype;w.put=function(S,I){this._storage.put(S,I,1,1)};w.pop=function(S){return this._storage.pop(S)};w.get=function(S){return this._storage.get(S)};w.clear=function(){this._storage.clearAll()};w.destroy=function(){this._storage.clearAll()};return A}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],
function(q,A,w){function S(D){D=w.toCIMSymbolJSON(D);if("CIMTextSymbol"===D.type)return D.height;let B=0;if(D.symbolLayers)for(const M of D.symbolLayers)w.isCIMMarker(M)&&M.size>B?B=M.size:w.isCIMStroke(M)&&M.width>B?B=M.width:w.isCIMFill(M);return B}function I(D,B,M,N){if("CIMTextSymbol"===D.type)D.height*=B;else{if(M&&D.effects)for(const z of D.effects)v(z,B);if(D.symbolLayers)for(const z of D.symbolLayers)switch(z.type){case "CIMPictureMarker":case "CIMVectorMarker":t(z,B,N);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=
N&&N.preserveOutlineWidth||(z.width*=B);break;case "CIMPictureFill":z.height*=B;z.offsetX*=B;z.offsetY*=B;break;case "CIMHatchFill":I(z.lineSymbol,B,!0,{...N,preserveOutlineWidth:!1}),z.offsetX*=B,z.offsetY*=B,z.separation*=B}}}function t(D,B,M){D.markerPlacement&&H(D.markerPlacement,B);D.offsetX*=B;D.offsetY*=B;D.anchorPoint&&"Absolute"===D.anchorPointUnits&&(D.anchorPoint={x:D.anchorPoint.x*B,y:D.anchorPoint.y*B});D.size*=B;if("CIMVectorMarker"===D.type&&D.markerGraphics)for(const N of D.markerGraphics)D.scaleSymbolsProportionally||
I(N.symbol,B,!0,M)}function H(D,B){w.isCIMMarkerStrokePlacement(D)&&(D.offset*=B);switch(D.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":D.customEndingOffset*=B;D.offsetAlongLine*=B;if(D.placementTemplate&&D.placementTemplate.length){var M=D.placementTemplate.map(N=>N*B);D.placementTemplate=M}break;case "CIMMarkerPlacementAlongLineVariableSize":D.maxRandomOffset*=B;D.placementTemplate&&D.placementTemplate.length&&(M=D.placementTemplate.map(N=>N*B),D.placementTemplate=
M);break;case "CIMMarkerPlacementOnLine":D.startPointOffset*=B;break;case "CIMMarkerPlacementAtExtremities":D.offsetAlongLine*=B;break;case "CIMMarkerPlacementAtRatioPositions":D.beginPosition*=B;D.endPosition*=B;break;case "CIMMarkerPlacementPolygonCenter":D.offsetX*=B;D.offsetY*=B;break;case "CIMMarkerPlacementInsidePolygon":D.offsetX*=B,D.offsetY*=B,D.stepX*=B,D.stepY*=B}}function v(D,B){switch(D.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":D.width*=B;break;case "CIMGeometricEffectBuffer":D.size*=
B;break;case "CIMGeometricEffectCut":D.beginCut*=B;D.endCut*=B;D.middleCut*=B;break;case "CIMGeometricEffectDashes":D.customEndingOffset*=B;D.offsetAlongLine*=B;if(D.dashTemplate&&D.dashTemplate.length){const M=D.dashTemplate.map(N=>N*B);D.dashTemplate=M}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":D.length*=B;break;case "CIMGeometricEffectMove":D.offsetX*=B;D.offsetY*=B;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":D.offset*=
B;break;case "CIMGeometricEffectRegularPolygon":D.radius*=B;break;case "CIMGeometricEffectTaperedPolygon":D.fromWidth*=B;D.length*=B;D.toWidth*=B;break;case "CIMGeometricEffectWave":D.amplitude*=B,D.period*=B}}function G(D,B){let M;M="CIMTextSymbol"===D.type?D.symbol:D;D="CIMPolygonSymbol"===D.type;if(M.symbolLayers)for(const N of M.symbolLayers)if(!(N.colorLocked||D&&(w.isCIMStroke(N)||w.isCIMMarker(N)&&N.markerPlacement&&w.isCIMMarkerStrokePlacement(N.markerPlacement))))switch(N.type){case "CIMVectorMarker":N.markerGraphics.forEach(z=>
{G(z.symbol,B)});break;case "CIMSolidStroke":case "CIMSolidFill":y(B,N.color);break;case "CIMHatchFill":G(N.lineSymbol,B)}}function y(D,B){for(const M of D)if(M.join(".")===B.join("."))return;D.push(B)}function u(D,B){var M="CIMTextSymbol"===D.type?D.symbol:D;D="CIMPolygonSymbol"===D.type?!0:!1;if(M.symbolLayers)for(const N of M.symbolLayers)if(!(N.colorLocked||D&&(w.isCIMStroke(N)||w.isCIMMarker(N)&&N.markerPlacement&&w.isCIMMarkerStrokePlacement(N.markerPlacement))))switch(M=B.toArray(0),N.type){case "CIMVectorMarker":N.markerGraphics.forEach(z=>
{u(z.symbol,B)});break;case "CIMSolidStroke":case "CIMSolidFill":N.color=M;break;case "CIMHatchFill":u(N.lineSymbol,B)}}q.applyCIMSymbolColor=function(D,B){B instanceof A||(B=new A(B));D=w.toCIMSymbolJSON(D);u(D,B)};q.applyCIMSymbolRotation=function(D,B){D=w.toCIMSymbolJSON(D);if("CIMTextSymbol"===D.type)D.angle=B;else if("CIMPointSymbol"===D.type&&D.symbolLayers){const M=B-(D.angle||0);for(const N of D.symbolLayers){if(w.isCIMMarker(N)){let z=N.rotation||0;z=N.rotateClockwise?z-M:z+M;N.rotation=
z}D.angle=B}}};q.getCIMSymbolColor=function(D){D=w.toCIMSymbolJSON(D);const B=[];G(D,B);return B.length?new A(w.fromCIMColor(B[0])):null};q.getCIMSymbolRotation=function(D){D=w.toCIMSymbolJSON(D);return"CIMTextSymbol"===D.type||"CIMPointSymbol"===D.type?D.angle||0:0};q.getCIMSymbolSize=S;q.scaleCIMMarker=t;q.scaleCIMSymbolTo=function(D,B,M){const N=w.toCIMSymbolJSON(D);D=S(D);if(0===D)if("CIMTextSymbol"===N.type)N.height=B;else{if(N.symbolLayers)for(const z of N.symbolLayers)switch(z.type){case "CIMPictureMarker":case "CIMVectorMarker":z.size=
B;break;case "CIMPictureStroke":case "CIMSolidStroke":z.width=B}}else I(N,B/D,!1,M)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(q){function A(w,S){"string"!==typeof w&&(w=String(w));switch(S){case "LowerCase":return w.toLowerCase();case "Allcaps":return w.toUpperCase();default:return w}}q._adjustTextCase=A;q.colorToArray=function(w){return[w.r,w.g,w.b,w.a]};q.createLabelOverrideFunction=function(w,S,I){const t=y=>{let u=y.length;
for(;u--;)if(-1===" /-,\n".indexOf(y.charAt(u)))return!1;return!0},H=[];var v=0;let G=-1;do G=S.indexOf("[",v),G>=v&&(G>v&&(v=S.substr(v,G-v),H.push([v,null,t(v)])),v=G+1,G=S.indexOf("]",v),G>=v&&(G>v&&(v=S.substr(v,G-v),(v=w[v])&&H.push([null,v,!1])),v=G+1));while(-1!==G);v<S.length-1&&(w=S.substr(v),H.push([w,null,t(w)]));return y=>{let u="",D=null;for(const B of H){const [M,N,z]=B;if(M)z?D=M:(D&&(u+=D,D=null),u+=M);else{const E=y.attributes[N];E&&(D&&(u+=D,D=null),u+=E)}}return A(u,I)}};q.evaluateValueOrFunction=
function(w,S,I,t){return"function"===typeof w?w(S,I,t):w};q.fromCIMColor=function(w){return w?{r:w[0],g:w[1],b:w[2],a:w[3]/255}:{r:0,g:0,b:0,a:0}};q.isCIMFill=function(w){return"CIMGradientFill"===w.type||"CIMHatchFill"===w.type||"CIMPictureFill"===w.type||"CIMSolidFill"===w.type||"CIMWaterFill"===w.type};q.isCIMMarker=function(w){return"CIMVectorMarker"===w.type||"CIMPictureMarker"===w.type||"CIMBarChartMarker"===w.type||"CIMCharacterMarker"===w.type||"CIMPieChartMarker"===w.type||"CIMStackedBarChartMarker"===
w.type};q.isCIMMarkerStrokePlacement=function(w){return"CIMMarkerPlacementAlongLineRandomSize"===w.type||"CIMMarkerPlacementAlongLineSameSize"===w.type||"CIMMarkerPlacementAlongLineVariableSize"===w.type||"CIMMarkerPlacementAtExtremities"===w.type||"CIMMarkerPlacementAtMeasuredUnits"===w.type||"CIMMarkerPlacementAtRatioPositions"===w.type||"CIMMarkerPlacementOnLine"===w.type||"CIMMarkerPlacementOnVertices"===w.type};q.isCIMStroke=function(w){return"CIMGradientStroke"===w.type||"CIMPictureStroke"===
w.type||"CIMSolidStroke"===w.type};q.resampleHermite=function(w,S,I,t,H,v,G=!0){const y=S/H;I/=v;const u=Math.ceil(y/2),D=Math.ceil(I/2);for(let N=0;N<v;N++)for(let z=0;z<H;z++){const E=4*(z+(G?v-N-1:N)*H);var B=0;let r=0,C=0,O=0,P=0,T=0,F=0;const K=(N+.5)*I;for(let J=Math.floor(N*I);J<(N+1)*I;J++){var M=Math.abs(K-(J+.5))/D;const L=(z+.5)*y;M*=M;for(let Y=Math.floor(z*y);Y<(z+1)*y;Y++){let W=Math.abs(L-(Y+.5))/u;B=Math.sqrt(M+W*W);-1<=B&&1>=B&&(B=2*B*B*B-3*B*B+1,0<B&&(W=4*(Y+J*S),F+=B*w[W+3],C+=
B,255>w[W+3]&&(B=B*w[W+3]/250),O+=B*w[W],P+=B*w[W+1],T+=B*w[W+2],r+=B))}}t[E]=O/r;t[E+1]=P/r;t[E+2]=T/r;t[E+3]=F/C}};q.toCIMSymbolJSON=function(w){var S;return null==(S=w.data)?void 0:S.symbol};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Identifiable".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){w=function(M){function N(z){z=M.call(this,z)||this;z.items=null;z.label=null;return z}q._inheritsLoose(N,M);return N}(B.IdentifiableMixin(D));A.__decorate([t.property()],w.prototype,"items",void 0);A.__decorate([t.property()],w.prototype,"label",void 0);return w=A.__decorate([v.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],w)})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/Collection ../../core/watchUtils ../../core/HandleOwner ../../layers/GraphicsLayer ../Attachments/AttachmentsViewModel ../Spinner/SpinnerViewModel ../FeatureForm/FeatureFormViewModel ../FeatureTemplates/FeatureTemplatesViewModel ../../layers/graphics/editingSupport ./CreateWorkflow ./UpdateWorkflow ../Sketch/SketchViewModel".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J){function L(ta,la,X){aa.error(new G(ta,la,X))}function Y(ta){return ta&&T.isEditableLayer(ta.layer)}function W(ta,la){return ta&&ta.find(X=>X.layer===la)}const aa=S.getLogger("esri.widgets.Editor.EditorViewModel"),oa=["create","update"];w=function(ta){function la(U){U=ta.call(this,U)||this;U._sketchGraphicsLayer=new E({listMode:"hide"});U.activeWorkflow=null;U.activityQueue=[];U.failures=[];U.attachmentsViewModel=new r({abilities:{editing:!0}});
U.featureFormViewModel=new O;U.featureTemplatesViewModel=new P;U.layerInfos=null;U.sketchViewModel=new J({layer:U._sketchGraphicsLayer});U.spinnerViewModel=new C;return U}q._inheritsLoose(la,ta);var X=la.prototype;X.initialize=function(){this.handles.add([N.on(this,"activeWorkflow","cancel",()=>this.emit("workflow-cancel")),N.on(this,"activeWorkflow","commit",()=>this.emit("workflow-commit")),N.on(this,"view.allLayerViews","change",()=>{this.handles.remove("all-layer-views-prop-watcher");this.notifyChange("editableItems")}),
N.watch(this,"editableItems",()=>{const {activeWorkflow:U}=this;if(U){var {stepId:ka}=U;"create"===U.type?(this.refreshCreationTemplates(),"awaiting-feature-creation-info"!==ka||this.canCreate||this._cancelWorkflow()):"update"===U.type&&("awaiting-feature-to-update"===ka&&!this.canUpdate||"awaiting-update-feature-candidate"===ka&&!U.data.candidates.some(sa=>{const qa=this.editableItems.find(na=>na.layer===sa.layer);return qa&&-1<qa.supports.indexOf("update")}))&&this._cancelWorkflow()}})])};X.destroy=
function(){this._cancelWorkflow().then(()=>this.view=null)};X.startCreateWorkflowAtFeatureTypeSelection=async function(){if(this.canCreate){await this._cancelWorkflow();var U=this._createCreateWorkflow();await U.start();this._set("activeWorkflow",U)}else L("editing:unsupported-workflow","Create workflow is unsupported or disabled.")};X.startCreateWorkflowAtFeatureCreation=async function(U){if(this.canCreate){await this._cancelWorkflow();var ka=this._createCreateWorkflow("awaiting-feature-to-create");
ka.data.creationInfo=U;await ka.start();this._set("activeWorkflow",ka)}else L("editing:unsupported-workflow","Update workflow is unsupported or disabled.")};X.startCreateWorkflowAtFeatureEdit=async function(U){if(this.canCreate){await this._cancelWorkflow();var ka=this._createCreateWorkflow("editing-new-feature");ka.data.edits.feature=U;await ka.start();this._set("activeWorkflow",ka)}else L("editing:unsupported-workflow","Update workflow is unsupported or disabled.")};X.startUpdateWorkflowAtFeatureSelection=
async function(){if(this.canUpdate){await this._cancelWorkflow();var U=this._createUpdateWorkflow();await U.start();this._set("activeWorkflow",U)}else L("editing:unsupported-workflow","Update workflow is unsupported or disabled.")};X.startUpdateWorkflowAtMultipleFeatureSelection=async function(U){if(this.canUpdate){await this._cancelWorkflow();var ka=this._createUpdateWorkflow("awaiting-update-feature-candidate");ka.data.candidates=U;await ka.start();this._set("activeWorkflow",ka)}else L("editing:unsupported-workflow",
"Update workflow is unsupported or disabled.")};X.startUpdateWorkflowAtFeatureEdit=async function(U){if(this.canUpdate){await this._cancelWorkflow();var ka=this._createUpdateWorkflow("editing-existing-feature");ka.data.edits.feature=U;await ka.start();this._set("activeWorkflow",ka)}else L("editing:unsupported-workflow","Update workflow is unsupported or disabled.")};X.deleteFeatureFromWorkflow=async function(){const {activeWorkflow:U}=this;U&&"create"!==U.type?(await this._delete(U.data.edits.feature),
await U.reset()):L("editing:unsupported-workflow","Deleting requires an active update workflow.")};X.cancelWorkflow=async function(U){return this._cancelWorkflow({warn:!0,...U})};X.refreshCreationTemplates=function(){this.featureTemplatesViewModel.layers=this.editableItems.filter(({supports:U})=>-1<U.indexOf("create")).map(({layer:U})=>U).toArray()};X._cancelWorkflow=async function(U){const ka=this.activeWorkflow;ka?U&&!1===U.force?(await ka.cancel(U),this._set("activeWorkflow",null)):(this.emit("workflow-cancel"),
this._set("activeWorkflow",null),await ka.cancel(U)):U&&U.warn&&L("editing:no-active-workflow","There is no active workflow to cancel.")};X._createCreateWorkflow=function(U){return F.create(this,U,ka=>this._create(ka))};X._createUpdateWorkflow=function(U){return K.create(this,U,ka=>this._update(ka))};X._create=async function(U){await this._applyEdits(U.layer,{addFeatures:[U]})};X._delete=async function(U){await this._applyEdits(U.layer,{deleteFeatures:[U]})};X._update=async function(U){await this._applyEdits(U.layer,
{updateFeatures:[U]})};X._applyEdits=async function(U,ka){await this._queueOperation(()=>U.applyEdits(ka));const sa=await this.view.whenLayerView(U);await N.whenFalseOnce(sa,"updating")};X._queueOperation=function(U){this.activityQueue.push(U);this.notifyChange("syncing");const ka=(sa,qa)=>{sa=qa.indexOf(sa);-1<sa&&qa.splice(sa,1)};return U().then(({addFeatureResults:sa,deleteFeatureResults:qa,updateFeatureResults:na})=>{if(sa=sa.find(pa=>!!pa.error)||na.find(pa=>!!pa.error)||qa.find(pa=>!!pa.error))throw sa.error;
}).catch(sa=>{L("editing:operation-error","An error occurred.",{error:sa});const qa={error:sa,retry:()=>{ka(qa,this.failures);return this._queueOperation(U)},cancel:()=>{ka(qa,this.failures)}};this._set("failures",[...this.failures,qa])}).then(()=>{ka(U,this.activityQueue);this.notifyChange("syncing")})};q._createClass(la,[{key:"allowedWorkflows",get:function(){return this._get("allowedWorkflows")},set:function(U){U&&0!==U.length||(U=[...oa]);this._set("allowedWorkflows",U)}},{key:"canCreate",get:function(){return this.editableItems.some(U=>
-1<U.supports.indexOf("create"))}},{key:"canUpdate",get:function(){return this.editableItems.some(U=>-1<U.supports.indexOf("update"))}},{key:"editableItems",get:function(){const U=this.get("view.allLayerViews");if(!U)return new M;const ka=()=>this.notifyChange("editableItems");return U.filter(Y).map(sa=>{this.handles.add(N.watch(sa,["suspended","layer.editingEnabled"],ka),"all-layer-views-prop-watcher");const {layer:qa,suspended:na}=sa,{data:pa,operations:va}=qa.capabilities,ja=W(this.layerInfos,
qa);sa="supportsAttachment"in pa&&pa.supportsAttachment&&(!ja||!1!==ja.allowAttachments);if(na)return{hasAttachments:sa,layer:qa,supports:[]};const ua=this.allowedWorkflows.filter(Na=>ja?!1!==ja.enabled&&("create"===Na&&!1!==ja.addEnabled||"update"===Na&&!1!==ja.updateEnabled):!0),Aa=Na=>ua.find(Oa=>Oa===Na),Ga=[];Aa("create")&&va.supportsAdd&&Ga.push("create");Aa("update")&&va.supportsUpdate&&Ga.push("update");!1!==(ja&&ja.deleteEnabled)&&va.supportsDelete&&Ga.push("delete");return{hasAttachments:sa,
layer:qa,supports:Ga}}).reverse()}},{key:"state",get:function(){if(!this.get("view.ready")||0===this.editableItems.length)return"disabled";var U=this.attachmentsViewModel.mode;if("add"===U)return"adding-attachment";if("edit"===U)return"editing-attachment";({activeWorkflow:U}=this);return U?U.stepId:"ready"}},{key:"syncing",get:function(){return 0<this.activityQueue.length}},{key:"view",set:function(U){this.sketchViewModel.view=U;this.spinnerViewModel.view=U;this._set("view",U)}}]);return la}(z.HandleOwnerMixin(B.EventedAccessor));
A.__decorate([t.property({readOnly:!0})],w.prototype,"activeWorkflow",void 0);A.__decorate([t.property({readOnly:!0})],w.prototype,"activityQueue",void 0);A.__decorate([t.property({value:[...oa]})],w.prototype,"allowedWorkflows",null);A.__decorate([t.property({readOnly:!0,dependsOn:["editableItems"]})],w.prototype,"canCreate",null);A.__decorate([t.property({readOnly:!0,dependsOn:["editableItems"]})],w.prototype,"canUpdate",null);A.__decorate([t.property({dependsOn:["allowedWorkflows","layerInfos",
"view.allLayerViews","view.ready"],readOnly:!0})],w.prototype,"editableItems",null);A.__decorate([t.property({readOnly:!0})],w.prototype,"failures",void 0);A.__decorate([t.property()],w.prototype,"attachmentsViewModel",void 0);A.__decorate([t.property()],w.prototype,"featureFormViewModel",void 0);A.__decorate([t.property()],w.prototype,"featureTemplatesViewModel",void 0);A.__decorate([t.property()],w.prototype,"layerInfos",void 0);A.__decorate([t.property()],w.prototype,"sketchViewModel",void 0);
A.__decorate([t.property()],w.prototype,"spinnerViewModel",void 0);A.__decorate([t.property({dependsOn:["attachmentsViewModel.mode","editableItems","activeWorkflow.stepId","view.ready"]})],w.prototype,"state",null);A.__decorate([t.property({readOnly:!0})],w.prototype,"syncing",null);A.__decorate([t.property()],w.prototype,"view",null);return w=A.__decorate([v.subclass("esri.widgets.Editor.EditorViewModel")],w)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Layer ../symbols/support/ElevationInfo ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){w=function(E){function r(O){O=E.call(this,O)||this;O.elevationInfo=null;O.graphics=new z["default"];O.screenSizePerspectiveEnabled=!0;O.type="graphics";return O}q._inheritsLoose(r,E);var C=r.prototype;C.destroy=function(){this.removeAll()};C.add=function(O){this.graphics.add(O);return this};C.addMany=function(O){this.graphics.addMany(O);return this};C.removeAll=function(){this.graphics.removeAll();return this};C.remove=function(O){this.graphics.remove(O)};
C.removeMany=function(O){this.graphics.removeMany(O)};C.on=function(O,P){return E.prototype.on.call(this,O,P)};C.graphicChanged=function(O){this.emit("graphic-update",O)};return r}(M.BlendLayer(N.ScaleRangeLayer(D)));A.__decorate([t.property({type:B})],w.prototype,"elevationInfo",void 0);A.__decorate([t.property(z.graphicsCollectionProperty())],w.prototype,"graphics",void 0);A.__decorate([t.property({type:["show","hide"]})],w.prototype,"listMode",void 0);A.__decorate([t.property()],w.prototype,"screenSizePerspectiveEnabled",
void 0);A.__decorate([t.property({readOnly:!0})],w.prototype,"type",void 0);return w=A.__decorate([v.subclass("esri.layers.GraphicsLayer")],w)})},"esri/layers/graphics/editingSupport":function(){define("exports ../../core/lang ../../core/maybe ../../core/Error ../../core/urlUtils ../../core/promiseUtils ../../core/Collection ../../Graphic ../../geometry/support/normalizeUtils".split(" "),function(q,A,w,S,I,t,H,v,G){async function y(z,E,r,C){await z.load();if(!E||null==E.applyEdits)return t.reject(new S(`${z.type}-layer:no-editing-support`,
"Layer source does not support applyEdits capability",{layer:z}));if(!z.editingEnabled)throw new S(`${z.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:z});z=await u(z,r,C);return z.addFeatures.length||z.updateFeatures.length||z.deleteFeatures.length||z.addAttachments.length||z.updateAttachments.length||z.deleteAttachments.length?{edits:z,results:await E.applyEdits(z,C)}:{edits:z,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],
updateAttachmentResults:[],deleteAttachmentResults:[]}}}function u(z,E,r){var C=E&&(E.addFeatures||E.updateFeatures||E.deleteFeatures);const O=E&&(E.addAttachments||E.updateAttachments||E.deleteAttachments);if(!E||!C&&!O)throw new S(`${z.type}-layer:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!z.capabilities.data.isVersioned&&r&&r.gdbVersion)throw new S(`${z.type}-layer:invalid-parameter`,
"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!z.capabilities.editing.supportsRollbackOnFailure&&r&&r.rollbackOnFailureEnabled)throw new S(`${z.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");if(!z.capabilities.editing.supportsGlobalId&&r&&r.globalIdUsed)throw new S(`${z.type}-layer:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");
if(!z.capabilities.editing.supportsGlobalId&&O)throw new S(`${z.type}-layer:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((!r||!r.globalIdUsed)&&O)throw new S(`${z.type}-layer:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true");C={...E};C.addFeatures=E&&H.isCollection(E.addFeatures)?
E.addFeatures.toArray():C.addFeatures||[];C.updateFeatures=E&&H.isCollection(E.updateFeatures)?E.updateFeatures.toArray():C.updateFeatures||[];C.deleteFeatures=E&&H.isCollection(E.deleteFeatures)?E.deleteFeatures.toArray():C.deleteFeatures||[];if(C.addFeatures.length&&!z.capabilities.operations.supportsAdd)throw new S(`${z.type}-layer:unsupported-operation`,"Layer does not support adding features.");if(C.updateFeatures.length&&!z.capabilities.operations.supportsUpdate)throw new S(`${z.type}-layer:unsupported-operation`,
"Layer does not support updating features.");if(C.deleteFeatures.length&&!z.capabilities.operations.supportsDelete)throw new S(`${z.type}-layer:unsupported-operation`,"Layer does not support deleting features.");C.addAttachments=C.addAttachments||[];C.updateAttachments=C.updateAttachments||[];C.deleteAttachments=C.deleteAttachments||[];C.addFeatures=C.addFeatures.map(N);C.updateFeatures=C.updateFeatures.map(N);const P=r&&r.globalIdUsed;C.addFeatures.forEach(T=>D(T,z,P));C.updateFeatures.forEach(T=>
D(T,z,P));C.deleteFeatures.forEach(T=>D(T,z,P));C.addAttachments.forEach(T=>B(T,z));C.updateAttachments.forEach(T=>B(T,z));return M(C)}function D(z,E,r){if(r){if("attributes"in z&&!z.attributes[E.globalIdField])throw new S(`${E.type}-layer:invalid-parameter`,"Feature should have 'globalId' when 'globalIdUsed' is true");if(!("attributes"in z||z.globalId))throw new S(`${E.type}-layer:invalid-parameter`,"'globalId' of the feature should be passed when 'globalIdUsed' is true");}if("geometry"in z&&w.isSome(z.geometry)){if(z.geometry.hasZ&&
!1===E.capabilities.data.supportsZ)throw new S(`${E.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(z.geometry.hasM&&!1===E.capabilities.data.supportsM)throw new S(`${E.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.");}}function B(z,E){const {feature:r,attachment:C}=z;if(!r||"attributes"in r&&!r.attributes[E.globalIdField])throw new S(`${E.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");
if(!("attributes"in r||r.globalId))throw new S(`${E.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!C.globalId)throw new S(`${E.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!C.data&&!C.uploadId)throw new S(`${E.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(C.data instanceof File&&C.data.name||C.name))throw new S(`${E.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");
if(!E.capabilities.editing.supportsUploadWithItemId&&C.uploadId)throw new S(`${E.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"===typeof C.data&&(z=I.dataComponents(C.data))&&!z.isBase64)throw new S(`${E.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string");}async function M(z){var E=z.addFeatures,r=z.updateFeatures,C=E.concat(r).map(O=>O.geometry);C=
await G.normalizeCentralMeridian(C);E=E.length;r=r.length;C.slice(0,E).forEach((O,P)=>{z.addFeatures[P].geometry=O});C.slice(E,E+r).forEach((O,P)=>{z.updateFeatures[P].geometry=O});return z}function N(z){const E=new v;z.attributes||(z.attributes={});E.geometry=z.geometry;E.attributes=z.attributes;return E}q.applyEdits=async function(z,E,r,C){let O,P;const T={edits:r,result:t.create((F,K)=>{O=F;P=K})};z.emit("apply-edits",T);try{const {results:F,edits:K}=await y(z,E,r,C);E=L=>L.filter(Y=>!Y.error).map(A.clone);
const J={edits:K,addedFeatures:E(F.addFeatureResults),updatedFeatures:E(F.updateFeatureResults),deletedFeatures:E(F.deleteFeatureResults),addedAttachments:E(F.addAttachmentResults),updatedAttachments:E(F.updateAttachmentResults),deletedAttachments:E(F.deleteAttachmentResults)};(J.addedFeatures.length||J.updatedFeatures.length||J.deletedFeatures.length||J.addedAttachments.length||J.updatedAttachments.length||J.deletedAttachments.length)&&z.emit("edits",J);O(J);return F}catch(F){throw P(F),F;}};q.isEditableLayer=
function(z){var E,r;return!0===(null==z?void 0:null==(E=z.capabilities)?void 0:null==(r=E.operations)?void 0:r.supportsEditing)&&z&&(!("editingEnabled"in z)||z.editingEnabled)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/Editor/CreateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CreateWorkflowData ./Edits ./Workflow ./workflowUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){function E(C){if(1!==C.length)return null;[C]=C;if("items"in C){if(1===C.items.length)return C.items[0]}else return C;return null}var r;w=r=function(C){function O(P){P=C.call(this,P)||this;P.type="create";return P}q._inheritsLoose(O,C);O.create=function(P,T,F){P=new B({edits:new M,viewModel:P});F=new r({data:P,afterCommit:F});F._set("steps",this._createWorkflowSteps(F,T));return F};O._createWorkflowSteps=function(P,T="awaiting-feature-creation-info"){const {data:F,
handles:K}=P,J={"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){F.creationInfo=null;K.add(F.viewModel.featureTemplatesViewModel.on("select",({item:aa})=>{F.creationInfo={layer:aa.layer,template:aa.template};F.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){K.remove(this.id)}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",async setUp(){K.add(await z.setUpFeatureAdd(F.viewModel.sketchViewModel,F.creationInfo,F.viewModel.view,
aa=>{F.edits.feature=aa;F.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){K.remove(this.id)}}),"editing-new-feature":()=>({id:"editing-new-feature",async setUp(){const aa=F.edits.feature,oa=F.viewModel,ta=z.findLayerInfo(oa.layerInfos,aa.layer);oa.featureFormViewModel.set({feature:aa,fieldConfig:ta&&ta.fieldConfig});const la=z.getVisualVariableAttributes(aa),{interactive:X,visual:U}=await z.setUpGeometryUpdate(aa,la,oa.sketchViewModel,oa.view,({geometry:ka,attributes:sa})=>{if(S.isSome(la.rotation)){var {field:qa}=
la.rotation;oa.featureFormViewModel.setValue(qa,sa[qa])}S.isSome(la.size)&&({field:qa}=la.size,oa.featureFormViewModel.setValue(qa,sa[qa]));F.edits.updateAttributes(sa);F.edits.updateGeometry(ka)});K.add([F.viewModel.featureFormViewModel.on("value-change",()=>{F.edits.updateAttributes(F.viewModel.featureFormViewModel.getValues());aa.attributes=F.edits.feature.attributes}),X,U],this.id)},async tearDown(){F.edits.feature=null;F.viewModel.featureFormViewModel.set({feature:null,fieldConfig:null});K.remove(this.id)}})};
let L=!1;P=["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature"].filter(aa=>L?!0:L=aa===T).map(aa=>J[aa]());F.viewModel.refreshCreationTemplates();const Y=E(F.viewModel.featureTemplatesViewModel.items),[W]=P;if("awaiting-feature-creation-info"===W.id&&Y){const {layer:aa,template:oa}=Y;F.creationInfo={layer:aa,template:oa};P.shift()}return P};return O}(N);return w=r=A.__decorate([G.subclass("esri.widgets.Editor.CreateWorkflow")],w)})},"esri/widgets/Editor/CreateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D){w=function(B){function M(N){N=B.call(this,N)||this;N.creationInfo=null;N.edits=null;N.viewModel=null;return N}q._inheritsLoose(M,B);return M}(D);A.__decorate([t.property()],w.prototype,"creationInfo",void 0);A.__decorate([t.property()],w.prototype,"edits",void 0);A.__decorate([t.property()],w.prototype,"viewModel",void 0);return w=A.__decorate([v.subclass("esri.widgets.Editor.CreateWorkflowData")],w)})},"esri/widgets/Editor/Edits":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/HandleOwner".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M){function N(z){return S.isNone(z)?null:JSON.stringify(z)}w=function(z){function E(C){C=z.call(this,C)||this;C._baselineAttributesJSON=null;C._baselineGeometryJSON=null;C.feature=null;return C}q._inheritsLoose(E,z);var r=E.prototype;r.trackChanges=function(){this.feature&&(this._baselineAttributesJSON=N(this.feature.attributes),this._baselineGeometryJSON=N(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))};r.updateAttributes=
function(C){this.feature.attributes=C;this.notifyChange("attributesModified")};r.updateGeometry=function(C){this.feature.geometry=C;this.notifyChange("geometryModified")};q._createClass(E,[{key:"attributesModified",get:function(){const {_baselineAttributesJSON:C,feature:O}=this;return!(!O||C===N(O.attributes))}},{key:"geometryModified",get:function(){const {_baselineGeometryJSON:C,feature:O}=this;return!(!O||C===N(O.geometry))}},{key:"modified",get:function(){return this.attributesModified||this.geometryModified}}]);
return E}(M.HandleOwnerMixin(B));A.__decorate([H.property()],w.prototype,"attributesModified",null);A.__decorate([H.property()],w.prototype,"feature",void 0);A.__decorate([H.property()],w.prototype,"geometryModified",null);A.__decorate([H.property({dependsOn:["attributesModified","geometryModified"]})],w.prototype,"modified",null);return w=A.__decorate([G.subclass("esri.widgets.Editor.Edits")],w)})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Evented ../../core/HandleOwner".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N){w=function(z){function E(C){C=z.call(this,C)||this;C._indexHistory=[];C._lastStepIndex=-1;C._stepIndex=-1;C._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};C.data=null;C.started=!1;C.steps=null;C.type=null;return C}q._inheritsLoose(E,z);var r=E.prototype;r.cancel=async function(C={force:!0}){return!1!==C.force?this._cancel():B.create((O,P)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(O)},deny:()=>P(new G("workflow:cancel-denied",
"Request to cancel workflow was denied."))}})})};r.commit=async function(){const {data:C}=this;this.handles.remove(this._handleKeys.beforeCommit);const O=C.edits.feature,P=O.clone();if(!C.edits.attributesModified){const {objectIdField:T}=O.layer;P.attributes={[T]:O.getAttribute(T)}}C.edits.geometryModified||(P.geometry=null);await this.afterCommit(P);this.handles.remove(this._handleKeys.afterCommit);this.emit("commit");this.started&&await this.reset()};r.go=async function(C){var {steps:O}=this;O=
O.findIndex(P=>P.id===C);this._indexHistory.push(this._stepIndex);await this._go(O)};r.next=async function(){this._indexHistory.push(this._stepIndex);await this._go(this._stepIndex+1)};r.previous=async function(){await this._go(this._indexHistory.pop())};r.reset=async function(){await this._cancel(!1);await this.start()};r.start=async function(){this._set("started",!0);await this._go(-1===this._stepIndex?0:this._stepIndex)};r._cancel=async function(C=!0){this.started&&(this._set("started",!1),await this.steps[this._stepIndex].tearDown());
this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]);this._resetIndexing(C);C&&this.emit("cancel")};r._go=async function(C=-1){-1>=C||C>=this.steps.length||(this.started&&(-1<this._lastStepIndex&&await this.steps[this._lastStepIndex].tearDown(),await this.steps[C].setUp(),this._lastStepIndex=C),this._stepIndex=C,this._notifyStepProps())};r._resetIndexing=function(C=!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;C&&this._notifyStepProps()};r._notifyStepProps=
function(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")};q._createClass(E,[{key:"hasNextStep",get:function(){const {steps:C}=this;return!!(C&&this._stepIndex<C.filter(O=>!O.parent).length-1)}},{key:"hasPreviousStep",get:function(){return 0<this._stepIndex}},{key:"stepId",get:function(){var {steps:C}=this;return(C=C&&C[this._stepIndex])&&C.id}}]);return E}(N.HandleOwnerMixin(M.EventedAccessor));A.__decorate([t.property()],w.prototype,"afterCommit",
void 0);A.__decorate([t.property()],w.prototype,"data",void 0);A.__decorate([t.property()],w.prototype,"hasNextStep",null);A.__decorate([t.property()],w.prototype,"hasPreviousStep",null);A.__decorate([t.property()],w.prototype,"started",void 0);A.__decorate([t.property({readOnly:!0,dependsOn:["steps"]})],w.prototype,"stepId",null);A.__decorate([t.property()],w.prototype,"steps",void 0);A.__decorate([t.property()],w.prototype,"type",void 0);A.__decorate([t.property()],w.prototype,"commit",null);return w=
A.__decorate([v.subclass("esri.widgets.Editor.Workflow")],w)})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../core/has ../../core/maybe ../../core/promiseUtils ../../layers/support/fieldUtils ../../core/screenUtils ../../chunks/symbols ../../Graphic ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/visualVariableUtils ../../core/accessorSupport/diffUtils ../../views/support/hitTestSelectUtils ../../renderers/support/clickToleranceUtils ../../views/support/drapedUtils ../../symbols/support/symbolUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){function r(aa){const oa=aa.layer;a:switch(oa.renderer.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":var ta=!0;break a;default:ta=!1}var la=(aa=ta&&D.getVisualVariableValues(oa.renderer,aa))?aa.map(U=>U.variable):[];ta=la.filter(U=>"rotation"===U.type&&(!U.axis||"heading"===U.axis));aa=ta[0];ta=1===ta.length&&aa.field&&!aa.valueExpression;var X=la.filter(U=>"size"===U.type);la=X[0];X=1===X.length&&"real-world-size"===
y.getTransformationType(la)&&la.field&&!la.useSymbolValue&&!la.valueExpression;return{rotation:ta?C(aa,oa):null,size:X?T(la,oa):null}}function C(aa,oa){const ta="heading"===(aa.axis||"heading")&&"arithmetic"===aa.rotationType?-1:1,la=aa.field,X=(aa=oa.fields&&oa.fields.filter(sa=>sa.name===la))&&1===aa.length?aa[0].type:"double";var U=0,ka=0;return{field:la,getDefault:()=>I.resolve(0),getValue:sa=>{ka=U-ta*sa;return F((ka+360)%360,X)},initValue:sa=>{U=null!=sa?sa:ka;ka=0},isUpdatingInteractively:!1}}
function O(aa,oa){switch(oa){case "width":return aa[0];case "depth":return aa[1];case "height":return aa[2];default:return aa[2]||aa[1]||aa[0]}}async function P(aa,oa,ta){if(S.isNone(oa))return 0;({symbol:oa}=v.to3D(oa));if(S.isNone(oa)||"web-style"===oa.type)return 0;oa=oa.symbolLayers.getItemAt(0);if(!oa)return 0;switch(oa.type){case "icon":return{computeIconLayerResourceSize:ta}=await new Promise(function(la,X){q(["../../symbols/support/symbolLayerUtils"],la,X)}),oa.size||Math.min(W.icon,(await ta(oa,
W.icon))[0])||W.icon;case "text":return oa.size||W.text;case "line":return oa.size||W.line;case "object":{const {computeObjectLayerResourceSize:la}=await new Promise(function(X,U){q(["../../symbols/support/symbolLayerUtils"],X,U)});aa=await la(oa,aa.scale/W.viewScaleSizeFactor);return O(aa,ta)}case "path":case "extrude":return oa.size||aa.scale/W.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}}function T(aa,oa){const ta=aa.field,la=aa.axis,X=(oa=oa.fields&&oa.fields.filter(na=>
na.name===ta))&&1===oa.length?oa[0].type:"double";var U=0,ka=0;const sa=u.meterIn[aa.valueUnit];let qa;qa="area"===aa.valueRepresentation?na=>Math.pow(na*sa/2,2)*Math.PI:"radius"===aa.valueRepresentation||"distance"===aa.valueRepresentation?na=>na*sa/2:na=>na*sa;return{field:ta,getDefault:async(na,pa)=>F(qa(await P(pa,na,la)),X),getValue:(na,pa)=>{U||(U=pa.pixelSizeAt(pa.center));ka=U*na;return F(ka,X)},initValue:na=>{U=null!=na?na:ka;ka=0},isUpdatingInteractively:!1}}function F(aa,oa){switch(oa){case "small-integer":case "integer":case "long":return Math.round(aa);
case "double":case "single":return aa;default:return 0}}async function K(aa){const oa=await E.getDisplayedSymbol(aa,{ignoreGraphicSymbol:!0}),ta=B.diff(aa.symbol,oa);S.isSome(ta)&&(aa.symbol=oa)}async function J(aa,oa,ta){var la;if("3d"===ta.type){var X=oa.layer;oa={...oa.template.prototype.attributes};X=new G({layer:X,sourceLayer:X,attributes:oa});var {rotation:U,size:ka}=r(X),sa=await E.getDisplayedSymbol(X),qa=!1;for(const na of[ka,U])S.isNone(na)||null!=oa[na.field]||(oa[na.field]=await na.getDefault(sa,
ta),qa=!0);qa&&(sa=await E.getDisplayedSymbol(X));switch(null==(la=sa)?void 0:la.type){case "simple-fill":case "polygon-3d":aa.polygonSymbol=sa;break;case "simple-line":case "line-3d":aa.polylineSymbol=sa;break;case "simple-marker":case "point-3d":aa.pointSymbol=sa}}}async function L(aa,oa,ta,la){if(0===aa.length)return[];const {updatable:X,graphicsByLayer:U}=await ta.async(async()=>{var {results:ka}=await I.whenOrAbort(M.hitTestSelectSameDistance(oa,ta),la);const sa=new Map,qa=({layer:na})=>{var pa=
sa.get(na);return pa?pa:(pa=[],sa.set(na,pa),pa)};ka.forEach(({graphic:na})=>qa(na).push(na));ka=aa.filter(({supports:na,layer:pa})=>-1<na.indexOf("update")&&sa.has(pa));0!==ka.length&&ta.stopPropagation();return{updatable:ka,graphicsByLayer:sa}});return I.eachAlways(X.map(async({layer:ka})=>{const {objectIdField:sa,displayField:qa}=ka,na=[sa];t.hasField(ka.fields,qa)&&na.push(qa);const pa=U.get(ka);if(pa.some(va=>na.some(ja=>!(ja in va.attributes)))){const va=ka.createQuery();va.outFields=na;va.returnGeometry=
!1;va.objectIds=pa.map(ja=>ja.getObjectId());return ka.queryFeatures(va,{signal:la}).then(({features:ja})=>ja)}return pa}),la)}async function Y(aa,oa,ta,la){if(0===aa.length)return[];const {results:X}=await I.whenOrAbort(oa.hitTest(ta),la);if(0===X.length)return[];const U=new Set;X.forEach(({graphic:ka})=>U.add(ka.layer));return I.eachAlways(aa.items.filter(({layer:ka,supports:sa})=>-1<sa.indexOf("update")&&U.has(ka)).map(({layer:ka})=>{const {objectIdField:sa,displayField:qa}=ka;var na=[sa];t.hasField(ka.fields,
qa)&&na.push(qa);const pa=ka.createQuery();pa.outFields=na;pa.returnGeometry=!1;na=N.calculateTolerance({renderer:ka.renderer,event:ta});pa.geometry=z.createQueryGeometry(ta.mapPoint,na,oa);return ka.queryFeatures(pa,{signal:la}).then(({features:va})=>va)}),la)}const W={icon:H.px2pt(24),text:H.px2pt(12),line:H.px2pt(1),viewScaleSizeFactor:100};A.fetchCandidates=async function(aa,oa,ta,la){switch(oa.type){case "3d":return L(aa,oa,ta,la);case "2d":return Y(aa,oa,ta,la)}};A.fetchFullFeature=async function(aa,
oa,ta){const la=aa.layer,X=la.createQuery();X.objectIds=[aa.getAttribute(la.objectIdField)];X.outFields=["*"];X.outSpatialReference=oa.spatialReference;X.returnM=la.capabilities.data.supportsM;X.returnZ=la.capabilities.data.supportsZ;return(await la.queryFeatures(X,{signal:ta})).features[0]};A.findLayerInfo=function(aa,oa){return aa&&aa.find(ta=>ta.layer===oa)};A.getVisualVariableAttributes=r;A.setUpFeatureAdd=async function(aa,oa,ta,la){const X=oa.layer;await J(aa,oa,ta);aa.layer.elevationInfo=X.elevationInfo;
await aa.create(X.geometryType,{hasZ:X.capabilities.data.supportsZ});const U=aa.on("create",async ka=>{const {state:sa,graphic:qa}=ka;"cancel"===sa?aa.create(X.geometryType,{hasZ:X.capabilities.data.supportsZ}):"complete"===sa&&(ka=qa.clone(),ka.attributes={...oa.template.prototype.attributes},ka.layer=X,aa.layer.remove(qa),await K(ka),la(ka))});ta.map.add(aa.layer);return{remove:()=>{U.remove();ta.map.remove(aa.layer);aa.cancel()}}};A.setUpGeometryUpdate=async function(aa,oa,ta,la,X){const U=aa.clone();
await K(U);ta.layer.add(U);U.sourceLayer=aa.layer;const ka=(()=>{const {layer:Aa}=aa;if("graphics"===Aa.type)return{remove(){}};const {objectIdField:Ga}=Aa,Na=aa.attributes[Ga],Oa=la.whenLayerView(Aa);Oa.then(Z=>Z.setVisibility(Na,!1),()=>{});return{remove(){Oa.then(Z=>Z.setVisibility(Na,!0),()=>{})}}})(),sa=aa.layer,qa=oa.size,na=oa.rotation,pa={multipleSelectionEnabled:!1};"point"===sa.geometryType&&(pa.enableRotation=!!na,pa.enableScaling=!!qa);ta.layer.elevationInfo=sa.elevationInfo;ta.update(U,
pa);const va=(S.isSome(qa)||S.isSome(na))&&aa.watch("attributes",async Aa=>{let Ga=!1;for(const Na in Aa){const Oa=Aa[Na];Oa!==U.attributes[Na]&&(U.setAttribute(Na,Oa),Ga=!0,S.isSome(qa)&&!qa.isUpdatingInteractively&&qa.field===Na&&qa.initValue(Oa),S.isSome(na)&&!na.isUpdatingInteractively&&na.field===Na&&na.initValue(Oa))}Ga&&"3d"===la.type&&await K(U)});[na,qa].forEach(async Aa=>{if(!S.isNone(Aa)){var Ga=aa.attributes[Aa.field];null!=Ga?Aa.initValue(Ga):(Ga=await Aa.getDefault(U.symbol,la),Aa.initValue(Ga),
U.setAttribute(Aa.field,Ga),"3d"===la.type&&await K(U))}});const ja=ta.on("update",async Aa=>{const {graphics:[Ga],state:Na,toolEventInfo:Oa}=Aa;if("complete"===Na)ta.update(Ga,pa);else{if(S.isSome(na)&&Oa){const {field:Z,getValue:ha,initValue:Ca}=na;"rotate-stop"===Oa.type?(na.isUpdatingInteractively=!1,Ca()):null!=Oa.angle&&(na.isUpdatingInteractively=!0,U.attributes[Z]=ha(Oa.angle/Math.PI*180,la))}if(S.isSome(qa)&&Oa){const {field:Z,getValue:ha,initValue:Ca}=qa;"scale-stop"===Oa.type?(qa.isUpdatingInteractively=
!1,Ca()):null!=Oa.xScale&&(qa.isUpdatingInteractively=!0,U.attributes[Z]=ha(Oa.xScale,la))}"3d"===la.type&&await K(U);X(Ga.clone())}});la.map.add(ta.layer);const ua=()=>{};return{interactive:{remove(){ja.remove();ta.cancel();va&&va.remove();this.remove=ua}},visual:{remove(){ka.remove();la.map.remove(ta.layer);ta.layer.removeAll();this.remove=ua}}}};A.sizeDefaults=W;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports"],function(q){q.hitTestSelectSameDistance=
async function(A,w){if("2d"===A.type)return A.hitTest(w);A=await A.hitTest(w);const S=A.results[0];w=A.results.findIndex(I=>I.distance!==S.distance);-1!==w&&(A.results=A.results.slice(0,w));return A};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(q){function A(I,t){return t?"xoffset"in t&&t.xoffset?Math.max(I,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(I,Math.abs(t.yoffset||0)):I:I}function w(I,t){if("number"===
typeof I)return I;if(I&&I.stops&&I.stops.length){{I=I.stops;let H=t=0;for(let v=0;v<I.length;v++){const G=I[v].size;"number"===typeof G&&(t+=G,H++)}I=t/H}return I}return t}function S(I,t){if(!t)return I;t=t.filter(G=>"size"===G.type).map(G=>{const {maxSize:y,minSize:u}=G;return(w(y,I)+w(u,I))/2});let H=0;const v=t.length;if(0===v)return I;for(let G=0;G<v;G++)H+=t[G];return Math.max(Math.floor(H/v),I)}q.calculateTolerance=function(I){const t=I&&I.renderer;I="touch"===(I&&I.event&&I.event.pointerType)?
9:6;if(!t)return I;I="visualVariables"in t?S(I,t.visualVariables):I;if("simple"===t.type)return A(I,t.symbol);if("unique-value"===t.type){let H=I;t.uniqueValueInfos.forEach(v=>{H=A(H,v.symbol)});return H}if("class-breaks"===t.type){let H=I;t.classBreakInfos.forEach(v=>{H=A(H,v.symbol)});return H}return I};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/support/drapedUtils":function(){define("exports ../../core/maybe ../../geometry/Extent ../../geometry ../../core/unitUtils ../../renderers/support/clickToleranceUtils".split(" "),
function(q,A,w,S,I,t){function H(G,y,u,D=new w){let B;if("2d"===u.type)B=y*u.resolution;else if("3d"===u.type){var M=u.overlayPixelSizeInMapUnits(G),N=u.basemapSpatialReference;B=A.isSome(N)&&!N.equals(u.spatialReference)?I.getMetersPerUnitForSR(N)/I.getMetersPerUnitForSR(u.spatialReference):y*M}y=G.x-B;M=G.y-B;N=G.x+B;G=G.y+B;({spatialReference:u}=u);D.xmin=Math.min(y,N);D.ymin=Math.min(M,G);D.xmax=Math.max(y,N);D.ymax=Math.max(M,G);D.spatialReference=u;return D}const v=new w;q.createQueryGeometry=
H;q.intersectsDrapedGeometry=function(G,y,u){G=u.toMap(G);if(A.isNone(G))return!1;const D=t.calculateTolerance();return H(G,D,u,v).intersects(y)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/handleUtils ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/watchUtils ../../views/support/layerViewUtils ./Edits ./Workflow ./workflowUtils ./UpdateWorkflowData".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O){var P;w=P=function(T){function F(J){J=T.call(this,J)||this;J.type="update";return J}q._inheritsLoose(F,T);F.create=function(J,L,Y){J=new O({edits:new E,viewModel:J});Y=new P({data:J,afterCommit:Y});Y._set("steps",this._createWorkflowSteps(Y,L));return Y};var K=F.prototype;K.highlight=function(J){var {data:{viewModel:{view:L}}}=this;L=J&&L.allLayerViews.items.find(({layer:Y})=>Y===J.layer);z.highlightsSupported(L)&&this.handles.add(L.highlight(J),"candidate-highlight")};
K.unhighlight=function(){this.handles.remove("candidate-highlight")};F._createWorkflowSteps=function(J,L="awaiting-feature-to-update"){const {data:Y,handles:W}=J,aa={"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const {spinnerViewModel:ta,view:la}=Y.viewModel;let X=null;W.add({remove(){X&&(X.abort(),X=null)}},this.id);Y.edits.feature=null;const U=la.on("immediate-click",ka=>{ta.location=ka.mapPoint;ta.visible=!0;X&&X.abort();const {editableItems:sa}=Y.viewModel;
X=M.createAbortController();M.create((qa,na)=>{M.onAbort(X.signal,()=>na(M.createAbortError()));qa(C.fetchCandidates(sa,la,ka,X.signal))}).then(qa=>{Y.viewModel.spinnerViewModel.visible=!1;M.throwIfAborted(X);Y.candidates=qa.reduce((na,pa)=>pa.error?na:[...na,...pa.value],[]);0!==Y.candidates.length&&(1===Y.candidates.length?(Y.edits.feature=Y.candidates[0],Y.viewModel.activeWorkflow.go("editing-existing-feature")):Y.viewModel.activeWorkflow.next())})});W.add(U,this.id)},async tearDown(){W.remove(this.id)}}),
"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",async setUp(){const {edits:ta}=Y;ta.feature=null;W.add(N.watch(ta,"feature",la=>{J.unhighlight();J.highlight(la)}),this.id)},async tearDown(){J.unhighlight();W.remove(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){const ta=Y.edits.feature,la=Y.viewModel;Y.editableItem=la.editableItems.find(pa=>pa.layer===ta.layer);const X=M.createAbortController();W.add({remove:()=>X.abort()},
this.id);var U=la.view.whenLayerView(ta.layer),ka=C.fetchFullFeature(ta,la.view,X.signal);U=await U;const sa=await ka;if(!M.isAborted(X)){Y.edits.updateGeometry(sa.geometry);Y.edits.updateAttributes(sa.attributes);Y.edits.trackChanges();ka=sa.layer;var qa=C.findLayerInfo(la.layerInfos,ka);qa=qa&&qa.fieldConfig;la.attachmentsViewModel.set({graphic:sa,mode:"view"});la.featureFormViewModel.set({feature:sa,fieldConfig:qa});var na="createInteractiveEditSession"in U?U.createInteractiveEditSession(ta):null;
U=[la.featureFormViewModel.on("value-change",pa=>{Y.edits.updateAttributes(la.featureFormViewModel.getValues());sa.attributes=Y.edits.feature.attributes;na&&na.setAttribute(pa.fieldName,pa.value)}),la.attachmentsViewModel.watch("mode",pa=>{"add"===pa&&Y.viewModel.activeWorkflow.go("adding-attachment");"edit"===pa&&Y.viewModel.activeWorkflow.go("editing-attachment")})];na&&(U.push(H.makeHandle(()=>na.rollback())),W.add(H.makeHandle(()=>na.commit()),J._handleKeys.afterCommit));({supportsGeometryUpdate:ka}=
ka.capabilities.editing);if(ka){const pa=C.getVisualVariableAttributes(sa),{interactive:va,visual:ja}=await C.setUpGeometryUpdate(sa,pa,la.sketchViewModel,la.view,({geometry:ua,attributes:Aa})=>{if(S.isSome(pa.rotation)){var {field:Ga}=pa.rotation;la.featureFormViewModel.setValue(Ga,Aa[Ga])}S.isSome(pa.size)&&({field:Ga}=pa.size,la.featureFormViewModel.setValue(Ga,Aa[Ga]));Y.edits.updateAttributes(Aa);Y.edits.updateGeometry(ua)});U.push(va,ja);W.add(va,J._handleKeys.beforeCommit);W.add(ja,J._handleKeys.afterCommit)}else J.highlight(sa);
W.add(U,this.id)}},async tearDown(){Y.editableItem=null;Y.viewModel.featureFormViewModel.set({feature:null,fieldConfig:null});W.remove(this.id);J.unhighlight()}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){}})};let oa=!1;return["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature",
"adding-attachment","editing-attachment"].filter(ta=>oa?!0:oa=ta===L).map(ta=>aa[ta]())};return F}(r);return w=P=A.__decorate([y.subclass("esri.widgets.Editor.UpdateWorkflow")],w)})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D){w=function(B){function M(N){N=B.call(this,N)||this;N.candidates=null;N.editableItem=null;N.edits=null;N.viewModel=null;return N}q._inheritsLoose(M,B);return M}(D);A.__decorate([t.property()],w.prototype,"candidates",void 0);A.__decorate([t.property()],w.prototype,"editableItem",void 0);A.__decorate([t.property()],w.prototype,"edits",void 0);A.__decorate([t.property()],w.prototype,"viewModel",void 0);return w=A.__decorate([v.subclass("esri.widgets.Editor.UpdateWorkflowData")],
w)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Point ../../geometry/support/coordsUtils ../../geometry ../../core/Evented ../../core/Collection ../../core/screenUtils ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleMarkerSymbol ../../chunks/symbols ../../Graphic ../../core/Handles ../../geometry/projectionEllipsoid ../../core/watchUtils ../../layers/GraphicsLayer ../../views/input/InputManager ../../views/DOMContainer ../../views/support/screenUtils ../../views/interactive/snapping/SnappingOptions ../../views/draw/support/createUtils ../../views/draw/Draw ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ./support/OperationHandle".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J,L,Y,W,aa,oa,ta,la,X,U,ka,sa,qa,na,pa,va,ja){function ua(Fa){return Object.freeze({__proto__:null,"default":Fa})}function Aa(Fa,fa){const wa=Fa.history.undo.pop().updates,ia=[];fa.forEach((ra,xa)=>{xa=wa[xa];const ya={};null!=xa&&(I.isSome(xa.geometry)&&(ya.geometry=ra.geometry,ra.geometry=xa.geometry),I.isSome(xa.symbol)&&(ya.symbol=ra.symbol,ra.symbol=xa.symbol),ia.push(ya))});Fa.history.redo.push({updates:ia})}function Ga(Fa,fa){const wa=
Fa.history.redo.pop().updates,ia=[];fa.forEach((ra,xa)=>{xa=wa[xa];const ya={};null!=xa&&(I.isSome(xa.geometry)&&(ya.geometry=ra.geometry,ra.geometry=xa.geometry),I.isSome(xa.symbol)&&(ya.symbol=ra.symbol,ra.symbol=xa.symbol),ia.push(ya))});Fa.history.undo.push({updates:ia})}function Na(Fa){return{updates:Fa.map(fa=>({geometry:fa.geometry}))}}function Oa(Fa){return{updates:Fa.map(fa=>({symbol:fa.symbol}))}}function Z(Fa){return"requireError"in Fa&&"aborted"===Fa.requireError}const ha=t.getLogger("esri.widgets.Sketch.SketchViewModel");
var Ca=["Backspace","Delete"];const Da={defaultZ:0},Ja={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0};S=function(Fa){function fa(ia){ia=Fa.call(this,ia)||this;ia._activeFillGraphic=null;ia._activeLineGraphic=null;ia._centerIndicatorGraphic=null;ia._centerSymbol=new F({style:"cross",size:6,color:[255,255,255]});ia._defaultSegmentOffset=48;ia._numUpdating=
0;ia._handles=new L;ia._internalGraphicsLayer=new aa({listMode:"hide"});ia._lineGraphic=null;ia._operationHandle=null;ia._vertexGraphics=[];ia._viewHandles=new L;ia._doUnnormalization=!1;ia.activeFillSymbol=new T({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}});ia.activeLineSymbol=new P({color:[255,127,0,1],width:2});ia.activeVertexSymbol=new F({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});ia.layer=null;ia.pointSymbol=new F({style:"circle",
size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});ia.polygonSymbol=new T({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});ia.polylineSymbol=new P({color:[130,130,130,1],width:2});ia.updateGraphics=new C;ia.updateOnGraphicClick=!0;ia.updatePointSymbol=new F({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});ia.updatePolygonSymbol=new T({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});ia.updatePolylineSymbol=new P({color:[12,207,255],
width:2});ia.vertexSymbol=new F({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});ia.snappingOptions=new X.SnappingOptions;ia._originalAutoOpenEnabled=null;ia.defaultCreateOptions=Da;ia.defaultUpdateOptions=Ja;return ia}A._inheritsLoose(fa,Fa);var wa=fa.prototype;wa.initialize=function(){this._handles.add([W.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=I.isSome(this.layer)?this.layer.elevationInfo:null}),W.on(this,"view.map.layers",
"change",ia=>{0<=ia.removed.indexOf(this.layer)&&this.cancel()}),W.on(this,"layer.graphics","change",ia=>{if(I.isSome(this._operationHandle))for(const ra of ia.removed)this.updateGraphics.includes(ra)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(ra):this._operationHandle.cancel())}),W.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=I.isSome(this.layer)?this.layer.elevationInfo:null},!0)])};wa.destroy=function(){this.cancel();
this._handles.removeAll();this._handles=null;this._viewHandles.removeAll();this._viewHandles=null;this._removeDefaultLayer();this._draw&&this._draw.destroy();this._set("view",null);this.emit("destroy")};wa.cancel=function(){this._moduleLoaderAbortController&&(this._moduleLoaderAbortController.abort(),this._moduleLoaderAbortController=null);this._operationHandle&&this._operationHandle.cancel()};wa.complete=function(){this._operationHandle&&this._operationHandle.complete()};wa.delete=function(){const {state:ia,
updateGraphics:ra}=this;if("active"===ia&&ra.length){const {activeTool:xa,layer:ya}=this,Ka=ra.toArray();ya.removeMany(Ka);this.cancel();this._emitDeleteEvent({graphics:Ka,tool:xa})}};wa.create=async function(ia,ra){if("disabled"===this.state)this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel.");else if(this.cancel(),ia){var xa=await this._setupCreateOperation(ia,
ra);I.isNone(xa)||this.destroyed||(va.addUniqueLayer(this.view,this._internalGraphicsLayer),xa.on("complete",()=>{if(xa===this._operationHandle){const ya=this.createGraphic,Ka=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer);xa.cancelled||null==ya||this.layer.add(ya);this.emit("create",{graphic:ya,state:Ka?"cancel":"complete",tool:ia,toolEventInfo:null,
type:"create"})}}),this._operationHandle=xa,this.view.ready&&ta.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")};wa.update=async function(ia,ra){const {layer:xa,state:ya,view:Ka}=this;if("disabled"===ya)xa||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),Ka||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel.");else{this.cancel();var Ha=Array.isArray(ia)?
ia:[ia];null!=ia&&Ha&&Ha.length?Ha.some(La=>La.layer!==xa?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):I.isNone(La.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):"2d"!==Ka.type||Ka.spatialReference.equals(La.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),
!0))||(ia=await this._setupUpdateOperation(Ha,ra),I.isNone(ia)||Z(ia)||(va.addUniqueLayer(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(ia,ra),this.emit("update",{graphics:Ha,state:"start",aborted:!1,tool:ia.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")}};wa.undo=function(){this.canUndo()&&this._operationHandle.undo()};wa.redo=function(){this.canRedo()&&this._operationHandle.redo()};wa.canUndo=function(){return!(!this._operationHandle||
!this._operationHandle.canUndo())};wa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};wa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};wa._getFirstHit=async function(ia){const ra=[];switch(this.view.type){case "2d":var xa=await this.view.hitTest(ia);if(0<xa.results.length&&(xa=xa.results[0],xa.graphic)){var ya,Ka;const Ha=xa.graphic;"vector-tile"!==(null==(ya=Ha.layer)?void 0:ya.type)&&
"imagery"!==(null==(Ka=Ha.layer)?void 0:Ka.type)&&ra.push(xa)}break;case "3d":{const Ha=[this.view.map.ground];this.view.map.allLayers.forEach(La=>{"integrated-mesh"===La.type&&Ha.push(La)});ya=await this.view.hitTest(ia,{exclude:Ha});0<ya.results.length&&(Ka=ya.results[0],(!ya.ground.mapPoint||1>this.view.map.ground.opacity||ya.ground.distance-Ka.distance>-Math.min(3*ya.ground.distance,"global"===this.view.viewingMode?Y.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/
this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&ra.push(Ka))}}return{screenPoint:ia,results:ra}};wa._generateViewHandles=function(ia){return[ia.on("immediate-click",ra=>{const {_operationHandle:xa,defaultUpdateOptions:ya,layer:Ka,state:Ha,updateGraphics:La,updateOnGraphicClick:Ia}=this,f="active"===Ha&&"create"===xa.type;"disabled"!==Ha&&!f&&Ia&&(this._beginAsyncOperation(),this._getFirstHit(la.createScreenPointFromEvent(ra)).then(R=>{R=R.results;if(R.length)for(let c=0;c<R.length;++c){var l=
R[c];if(l.graphic){l=l.graphic;if(-1<La.indexOf(l)||l.layer===Ka)return ra.stopPropagation(),l;"2d"!==ia.type||this._isComponentGraphic(l)||"active"!==Ha||this.cancel()}}else"active"===Ha&&this.cancel();return null}).then(R=>I.isSome(R)&&-1===La.indexOf(R)?this.update([R],{...ya}):null).then(()=>{this._endAsyncOperation()}))},oa.ViewEventPriorities.WIDGET)]};wa._setupCreateOperation=async function(ia,ra){if(!ia)return null;ra={hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...ra};let xa;
if("2d"===this.view.type)switch(ia){case "point":xa=this._setupCreatePointOperation(ia,ra);break;case "multipoint":xa=this._setupCreateMultipointOperation(ia,null);break;case "polygon":xa=this._setupCreatePolyOperation(ia,ra);break;case "polyline":xa=this._setupCreatePolyOperation(ia,ra);break;case "rectangle":xa=this._setupCreateRectangleOperation(ia,ra);break;case "circle":xa=this._setupCreateCircleOperation(ia,ra)}else{ia=await this._setupCreate3DOperation(ia,this.view,ra);if(I.isNone(ia)||Z(ia))return null;
xa=ia}return xa};wa._setupCreate3DOperation=async function(ia,ra,xa){if("multipoint"===ia)return null;const ya={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,rectangle:this.polygonSymbol,circle:this.polygonSymbol}[ia];this._removeCreateOperationGraphics();const Ka="rectangle"===ia?!1:!0,Ha="rectangle"===ia?!1:!0;this.snappingOptions.selfEnabledToggled=!1;ra={view:ra,mode:"rectangle"===ia||"circle"===ia?"hybrid":"click",...xa,elevationInfo:this.layer.elevationInfo,
geometryType:ia,createGraphicSymbol:ya,snapToScene:I.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0,snappingOptions:this.snappingOptions,forceUniformSize:Ha,centered:Ka};xa=await this._requireModule(new Promise(function(l,c){q(["../../views/3d/interactive/editingTools"],l,c)}));if(Z(xa))return xa;const La=new xa.module.DrawGraphicTool(ra);this.view.tools.add(La);let Ia=null;this.view.activeTool=La;const f=[],R=new ja.OperationHandle({activeComponent:La,tool:ia,
type:"update",onEnd:()=>{var l;f.forEach(c=>c.remove());f.length=0;null==(l=this.view.tools)?void 0:l.remove(La);La.destroy()},undo:()=>{La.canUndo&&La.undo()},redo:()=>{La.canRedo&&La.redo()},canUndo:()=>La.canUndo,canRedo:()=>La.canRedo});f.push(this.view.on("key-down",l=>{" "===l.key?(l.stopPropagation(),l.repeat||(La.enabled=!1)):"c"===l.key?(l.stopPropagation(),La.completeCreateOperation()):"z"===l.key?(l.stopPropagation(),R.undo()):"r"===l.key?(l.stopPropagation(),R.redo()):"Control"!==l.key||
"rectangle"===ia||"circle"===ia||l.repeat?"Control"!==l.key||"rectangle"!==ia&&"circle"!==ia||l.repeat?"Alt"!==l.key||l.repeat||(La.centered=!Ka,l.stopPropagation()):(La.forceUniformSize=!Ha,l.stopPropagation()):(La.snappingOptions.selfEnabledToggled=!0,l.stopPropagation())},oa.ViewEventPriorities.WIDGET),this.view.on("key-up",l=>{" "===l.key?La.enabled=!0:"Control"===l.key&&"rectangle"!==ia&&"circle"!==ia?(La.snappingOptions.selfEnabledToggled=!1,l.stopPropagation()):"Control"!==l.key||"rectangle"!==
ia&&"circle"!==ia?"Alt"===l.key&&(La.centered=Ka,l.stopPropagation()):(La.forceUniformSize=Ha,l.stopPropagation())},oa.ViewEventPriorities.WIDGET),La.on("vertex-add",l=>{Ia=I.isNone(Ia)?"start":"active";switch(l.operation){case "apply":this.emit("create",{graphic:I.unwrap(La.createGraphic),state:Ia,tool:this.activeTool,toolEventInfo:l,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[I.unwrap(La.createGraphic)],tool:ia});break;case "redo":this._emitRedoEvent({graphics:[I.unwrap(La.createGraphic)],
tool:ia})}}),La.on("cursor-update",l=>{0<La.drawOperation.numCommittedVertices&&this.emit("create",{graphic:I.unwrap(La.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:{coordinates:l.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),La.on("vertex-remove",l=>{switch(l.operation){case "apply":this.emit("create",{graphic:I.unwrap(La.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:l,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[I.unwrap(La.createGraphic)],
tool:ia});break;case "redo":this._emitRedoEvent({graphics:[I.unwrap(La.createGraphic)],tool:ia})}}),La.on("complete",l=>{this._removeCreateOperationGraphics();this._set("createGraphic",I.unwrap(l.graphic));Ia="complete";l.aborted?R&&R.cancel():R&&R.complete()}));return R};wa._setupCreatePointOperation=function(ia,ra){ra=this._draw.create(ia,{elevationInfo:this.layer.elevationInfo,hasZ:ra.hasZ,defaultZ:ra.defaultZ,interactiveUndoDisabled:!0});const xa=[ra.on("cursor-update",Ha=>{I.isSome(Ha.vertexIndex)?
this._displayCrosshairCursor():this._displayDefaultCursor()}),ra.on("draw-complete",Ha=>{Ha=this.createPointFromVertex(Ha.vertices[0]);Ha=new J(Ha,this.pointSymbol);this._set("createGraphic",Ha);Ka&&Ka.complete()})],ya=[this.view.on("key-down",Ha=>{"Escape"===Ha.key&&(Ka&&Ka.cancel(),Ha.stopPropagation())},oa.ViewEventPriorities.WIDGET)],Ka=this._operationHandleForCreateAction(ra,[...xa,...ya],ia);return Ka};wa._setupCreateMultipointOperation=function(ia,ra){ra=this._draw.create(ia,{...ra,undoDisabled:!0});
let xa=null;const ya=[],Ka=this._operationHandleForCreateAction(ra,ya,ia);ya.push(ra.on("vertex-add",Ha=>{const {type:La,vertexIndex:Ia,vertices:f}=Ha,R=f[Ia];xa=Ha;this._drawMultipointGraphic(f,!0);this.emit("create",{graphic:this.createGraphic,state:1===f.length?"start":"active",tool:ia,toolEventInfo:{added:R,vertices:[{coordinates:R,componentIndex:0,vertexIndex:Ia}],type:La},type:"create"})}),ra.on("vertex-remove",Ha=>{const {type:La,vertexIndex:Ia,vertices:f}=Ha,R=f[Ia];xa=Ha;this._drawMultipointGraphic(f,
!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{removed:R,vertices:[{coordinates:R,componentIndex:0,vertexIndex:Ia}],type:La},type:"create"})}),ra.on("vertex-update",Ha=>{const {type:La,vertexIndex:Ia,vertices:f}=Ha,R=f[Ia];xa=Ha;this._drawMultipointGraphic(f,!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{type:La,updated:R,vertices:[{coordinates:R,componentIndex:0,vertexIndex:Ia}]},type:"create"})}),ra.on("cursor-update",
Ha=>{xa=Ha}),ra.on("draw-complete",Ha=>{Ha=Ha.vertices.slice(0);(Ha=U.createMultipoint(Ha,this.view.spatialReference))&&this.createGraphic&&(this.createGraphic.geometry=Ha);Ka&&Ka.complete()}),ra.on("undo",Ha=>{Ha=Ha.vertices;const La=xa&&"cursor-update"!==xa.type;this._resetCreateOperationGraphics();Ha.length&&this._drawMultipointGraphic(Ha,La)}),ra.on("redo",Ha=>{Ha=Ha.vertices;const La=xa&&"cursor-update"!==xa.type;this._resetCreateOperationGraphics();Ha.length&&this._drawMultipointGraphic(Ha,
La)}));ya.push(this.view.on("pointer-move",()=>this._displayCrosshairCursor(),oa.ViewEventPriorities.WIDGET),this.view.on("key-down",Ha=>this._getCommonUpdateOperationKeyDownHandlers(Ka,Ha),oa.ViewEventPriorities.WIDGET));return Ka};wa._setupCreatePolyOperation=function(ia,ra){ra={...ra,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0};let xa=null;"polyline"===ia?xa=this._draw.create(ia,ra):"polygon"===ia&&(xa=this._draw.create(ia,ra));let ya=new N,Ka=null,Ha=!1;ra=[xa.on("vertex-add",
f=>{const {type:R,vertexIndex:l,vertices:c}=f,a=c[l];this._snap(ia,c,Ha);Ka=f;this._drawVertexGraphics(ia,c,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:1===c.length?"start":"active",tool:ia,toolEventInfo:{added:a,vertices:[{coordinates:a,componentIndex:0,vertexIndex:l}],type:R},type:"create"})}),xa.on("vertex-remove",f=>{const {type:R,vertexIndex:l,vertices:c}=f,a=c[l];this._snap(ia,c,Ha);Ka=f;this._drawVertexGraphics(ia,c,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,
state:"active",tool:ia,toolEventInfo:{removed:a,vertices:[{coordinates:a,componentIndex:0,vertexIndex:l}],type:R},type:"create"})}),xa.on("vertex-update",f=>{const {type:R,vertexIndex:l,vertices:c}=f,a=c[l];this._snap(ia,c,Ha);Ka=f;this._drawVertexGraphics(ia,c,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{type:R,updated:a,vertices:[{coordinates:a,componentIndex:0,vertexIndex:l}]},type:"create"})}),xa.on("cursor-update",f=>{const {type:R,vertices:l}=
f;f.mapPoint&&(this._snap(ia,l,Ha),Ka=f,ya=f.mapPoint,this._drawVertexGraphics(ia,l,{userClicked:!1}),1<l.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{coordinates:l[l.length-1],type:R},type:"create"}))}),xa.on("draw-complete",f=>{f=f.vertices.slice(0);let R=null;"polyline"===ia?R=U.createPolyline([f],this.view.spatialReference,this._doUnnormalization):"polygon"===ia&&(R=U.createPolygon([f],this.view.spatialReference,this._doUnnormalization,!0));R&&(this.createGraphic.geometry=
R);Ia&&Ia.complete()}),xa.on("undo",f=>{f=f.vertices;const R=Ka&&"cursor-update"!==Ka.type;this._resetCreateOperationGraphics();this._snap(ia,f,Ha);f.length&&this._drawVertexGraphics(ia,f,{userClicked:R})}),xa.on("redo",f=>{f=f.vertices;const R=Ka&&"cursor-update"!==Ka.type;this._resetCreateOperationGraphics();this._snap(ia,f,Ha);f.length&&this._drawVertexGraphics(ia,f,{userClicked:R})})];const La=[this.view.on("pointer-move",f=>{this.view.toMap(O.createScreenPoint(f.x,f.y))?this._displayCrosshairCursor():
this._displayDefaultCursor()},oa.ViewEventPriorities.WIDGET),this.view.on("key-down",f=>{const R=xa.vertices.slice(0),l=Ka&&"cursor-update"!==Ka.type;"Control"===f.key?"2d"!==this.view.type||Ha||(Ha=!0,this._snap(ia,R,!l),this._drawVertexGraphics(ia,R,{userClicked:l})):"z"===f.key&&Ia&&Ia.canUndo()?(f.stopPropagation(),Ia.undo()):"r"===f.key&&Ia&&Ia.canRedo()?(f.stopPropagation(),Ia.redo()):"Escape"===f.key&&Ia&&Ia.cancel()},oa.ViewEventPriorities.WIDGET),this.view.on("key-up",f=>{const R=xa.vertices.slice(0),
l=Ka&&"cursor-update"!==Ka.type;"Control"===f.key&&Ha&&(l||(R.pop(),R.push([ya.x,ya.y]),this._drawVertexGraphics(ia,R,{userClicked:l})),Ha=!1)},oa.ViewEventPriorities.WIDGET)];if("polygon"===ia){const f=(c,a,b)=>{if(!c||!c.layer||!c.visible)return!1;c=this.view.toScreen(c.geometry);return this._isWithinScreenDistance(c,a,b)},R=c=>{if(!(2>=this._vertexGraphics.length))return f(this._vertexGraphics[0],c,this._getVertexIntersectDistance())};let l=!1;La.push(this.view.on("pointer-move",()=>{l=!1},oa.ViewEventPriorities.WIDGET),
this.view.on("pointer-down",c=>{R(c)?(l=!0,c.stopPropagation()):this._vertexGraphics.some(a=>f(a,c,this._getVertexIntersectDistance()))&&c.stopPropagation()},oa.ViewEventPriorities.WIDGET),this.view.on("pointer-up",c=>{l&&(c.stopPropagation(),xa.complete())}))}const Ia=this._operationHandleForCreateAction(xa,[...ra,...La],ia);return Ia};wa._setupCreateCircleOperation=function(ia,ra){const xa=this._draw.create(ia,{...ra,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0});let ya=!1,
Ka=!0;ra=[xa.on("vertex-add",Ia=>{const {type:f,vertexIndex:R,vertices:l}=Ia;Ia=l[R];this._drawSegmentGraphic(ia,l,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem);this.emit("create",{graphic:this.createGraphic,state:1===l.length?"start":"active",tool:ia,toolEventInfo:{added:Ia,vertices:[{coordinates:Ia,componentIndex:0,vertexIndex:R}],type:f},type:"create"})}),xa.on("cursor-update",Ia=>{const {type:f,vertices:R}=Ia;this._drawSegmentGraphic(ia,R,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem);
2===R.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{coordinates:R[R.length-1],type:f},type:"create"})}),xa.on("draw-complete",Ia=>{Ia=Ia.vertices.slice(0);let f=null;1===Ia.length?(Ia.push(xa.viewAlignedCoordinateSystem.makeMapPoint(Ia[0][0]+this._defaultSegmentOffset*this.view.resolution,Ia[0][1])),f=U.createCircle(Ia,xa.viewAlignedCoordinateSystem,!0,this.view.resolution)):f=ya?U.createEllipse(Ia,xa.viewAlignedCoordinateSystem,Ka):U.createCircle(Ia,
xa.viewAlignedCoordinateSystem,Ka,this.view.resolution);this.createGraphic?this.createGraphic.geometry=f:(this._removeCreateGraphic(),this._set("createGraphic",new J(f,this.polygonSymbol)));La&&La.complete()})];const Ha=[this.view.on("pointer-move",Ia=>{I.isSome(xa.getCoordsFromScreenPoint(O.createScreenPoint(Ia.x,Ia.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},oa.ViewEventPriorities.WIDGET),this.view.on("key-down",Ia=>{"Control"===Ia.key?ya||(ya=!0,this._drawSegmentGraphic(ia,
xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Alt"===Ia.key?Ka&&(Ka=!1,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Escape"===Ia.key&&La&&La.cancel()},oa.ViewEventPriorities.WIDGET),this.view.on("key-up",Ia=>{"Control"===Ia.key?(ya=!1,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Alt"===Ia.key&&(Ka=!0,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,
constrainToggle:ya},xa.viewAlignedCoordinateSystem))},oa.ViewEventPriorities.WIDGET)],La=this._operationHandleForCreateAction(xa,[...ra,...Ha],ia);return La};wa._setupCreateRectangleOperation=function(ia,ra){const xa=this._draw.create(ia,{...ra,elevationInfo:this.layer.elevationInfo,interactiveUndoDisabled:!0});let ya=!1,Ka=!1;ra=[xa.on("vertex-add",Ia=>{const {type:f,vertexIndex:R,vertices:l}=Ia;Ia=l[R];this._drawSegmentGraphic(ia,l,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem);
this.emit("create",{graphic:this.createGraphic,state:1===l.length?"start":"active",tool:ia,toolEventInfo:{added:Ia,vertices:[{coordinates:Ia,componentIndex:0,vertexIndex:R}],type:f},type:"create"})}),xa.on("cursor-update",Ia=>{const {type:f,vertices:R}=Ia;this._drawSegmentGraphic(ia,R,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem);2===R.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:ia,toolEventInfo:{coordinates:R[R.length-1],type:f},type:"create"})}),
xa.on("draw-complete",Ia=>{Ia=Ia.vertices.slice(0);let f=null;1===Ia.length&&(Ka=ya=!1);f=ya?U.createSquare(Ia,xa.viewAlignedCoordinateSystem,Ka):U.createRectangle(Ia,xa.viewAlignedCoordinateSystem,Ka);this.createGraphic?this.createGraphic.geometry=f:(this._removeCreateGraphic(),this._set("createGraphic",new J(f,this.polygonSymbol)));La&&La.complete()})];const Ha=[this.view.on("pointer-move",Ia=>{I.isSome(xa.getCoordsFromScreenPoint(O.createScreenPoint(Ia.x,Ia.y)))?this._displayCrosshairCursor():
this._displayDefaultCursor()},oa.ViewEventPriorities.WIDGET),this.view.on("key-down",Ia=>{"Control"===Ia.key?ya||(ya=!0,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Alt"===Ia.key?Ka||(Ka=!0,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Escape"===Ia.key&&La&&La.cancel()},oa.ViewEventPriorities.WIDGET),this.view.on("key-up",Ia=>{"Control"===Ia.key?(ya=!1,this._drawSegmentGraphic(ia,
xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem)):"Alt"===Ia.key&&(Ka=!1,this._drawSegmentGraphic(ia,xa.vertices,{centered:Ka,constrainToggle:ya},xa.viewAlignedCoordinateSystem))},oa.ViewEventPriorities.WIDGET)],La=this._operationHandleForCreateAction(xa,[...ra,...Ha],ia);return La};wa._setupUpdateOperation=async function(ia,ra){const {_defaultUpdateTool:xa,defaultUpdateOptions:ya,layer:Ka,view:Ha}=this;ra={...ya,...ra};var La=ra.tool||xa;for(var Ia of ia)Ka.remove(Ia),
Ka.add(Ia);if("3d"===Ha.type){if(0===ia.length)return null;switch(La){case "move":return this._setupMove3DOperation(ia,ra,Ha,La);case "reshape":if(1<ia.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;La=na.isSupportedGraphic(ia[0]);if(0===La)return this._setupReshape3DOperation(ia[0],ra,Ha);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${sa.isSupportedGraphicResultMessage(La)}).`);return null;
case "transform":return 1===ia.length&&0===pa.isSupportedGraphic(ia[0])?this._setupPointTransform3DOperation(ia[0],ra,Ha):this._setupMove3DOperation(ia,ra,Ha,La)}}if("move"===La)return this._setupMoveOperation(ia,ra,Ha);if(1<ia.length)return"reshape"===La?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(ia,La,ra,Ha);if(1===ia.length){Ia=I.get(ia[0].geometry,"type");if("point"===Ia||"multipoint"===Ia)return this._setupMoveOperation(ia,
ra,Ha);if("transform"===La||"reshape"===La)return this._setupTransformOrReshapeOperation(ia,La,ra,Ha)}return null};wa._setupMove3DOperation=async function(ia,ra,xa,ya,Ka=!1){for(var Ha of ia){const R=qa.isSupportedGraphic(Ha);if(0!==R)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${sa.isSupportedGraphicResultMessage(R)}).`),null}Ha=await this._requireModule(new Promise(function(R,l){q(["../../views/3d/interactive/editingTools"],R,l)}));if(Z(Ha))return Ha;
const La=new Ha.module.GraphicMoveTool({view:xa,enableZ:ra.enableZ});this.view.tools.add(La);La.graphics.addMany(ia);Ka||this.updateGraphics.addMany(ia);const Ia=[],f=new ja.OperationHandle({activeComponent:La,tool:ya,type:"update",onEnd:()=>{var R;Ia.forEach(l=>l.remove());Ia.length=0;null==(R=this.view.tools)?void 0:R.remove(La);La.destroyed||La.destroy()},undo:()=>{Aa(f,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:ya})},redo:()=>{Ga(f,this.updateGraphics.toArray());
this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:ya})},addToSelection:R=>{this.updateGraphics.push(R);La.graphics.push(R);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[R],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:R=>{const l=this.updateGraphics.indexOf(R);f.history.undo.forEach(c=>c.updates.splice(l,1));f.history.redo.forEach(c=>c.updates.splice(l,1));this.updateGraphics.remove(R);
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[R],type:"selection-change"},type:"update"});0===this.updateGraphics.length?f.complete():La.graphics.remove(R)},toggleTool:async()=>{if(1===this.updateGraphics.length&&!1!==ra.toggleToolOnClick&&"transform"===ya){var R=this.updateGraphics.getItemAt(0);0===na.isSupportedGraphic(R)&&(R=await this._setupReshape3DOperation(R,ra,xa,!0),Z(R)||(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(R,
ra)))}}});Ia.push(...this._getHandlesForComponent(f,ra),this.view.on("immediate-click",R=>this._getCommonUpdateOperationClickHandlers(f,R),oa.ViewEventPriorities.WIDGET),this.view.on("key-down",R=>this._getCommonUpdateOperationKeyDownHandlers(f,R),oa.ViewEventPriorities.WIDGET));return f};wa._setupPointTransform3DOperation=async function(ia,ra,xa){const {enableRotation:ya,enableScaling:Ka,enableZ:Ha}=ra,La=await this._requireModule(new Promise(function(l,c){q(["../../views/3d/interactive/editingTools"],
l,c)}));if(Z(La))return La;const Ia=new La.module.GraphicTransformTool({graphic:ia,view:xa,enableRotation:ya,enableScaling:Ka,enableZ:Ha});this.view.tools.add(Ia);this.updateGraphics.add(ia);const f=[],R=new ja.OperationHandle({activeComponent:Ia,tool:"transform",type:"update",onEnd:()=>{var l;f.forEach(c=>c.remove());f.length=0;null==(l=this.view.tools)?void 0:l.remove(Ia);Ia.destroyed||Ia.destroy()},undo:()=>{Aa(R,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),
tool:"transform"})},redo:()=>{Ga(R,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:async l=>{this.updateGraphics.add(l);l=await this._setupMove3DOperation(this.updateGraphics.toArray(),ra,xa,"transform",!0);Z(l)||(R.onEnd(),R.destroy(),this._setUpdateOperationHandle(l,ra))}});f.push(...this._getHandlesForComponent(R,ra),this.view.on("immediate-click",l=>this._getCommonUpdateOperationClickHandlers(R,l),oa.ViewEventPriorities.WIDGET),
this.view.on("key-down",l=>this._getCommonUpdateOperationKeyDownHandlers(R,l),oa.ViewEventPriorities.WIDGET));return R};wa._setupMoveOperation=async function(ia,ra,xa){this.updateGraphics.addMany(ia);const ya=this._getCloneInfos(ia);for(const f of ya)this._internalGraphicsLayer.add(f.clone);const Ka=await this._getGraphicMover(ia,ra,xa);if(Z(Ka))return Ka;const Ha=new ja.OperationHandle({activeComponent:Ka,tool:"move",type:"update",onEnd:()=>{var f;this._displayDefaultCursor();Ia.forEach(R=>R.remove());
La.forEach(R=>R.remove());Ia=[];La=[];Ka.destroy();null==(f=this._internalGraphicsLayer)?void 0:f.removeMany([...this.updateGraphics.toArray(),...ya.map(R=>R.clone)])},undo:()=>{Aa(Ha,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"move"})},redo:()=>{Ga(Ha,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"move"})},addToSelection:f=>{this.updateGraphics.push(f);Ka.graphics=this.updateGraphics.toArray();
const R=this._createClone(f);ya.push({graphic:f,clone:R});this._internalGraphicsLayer.add(R);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:f=>{const R=this.updateGraphics.indexOf(f);Ha.history.undo.forEach(c=>c.updates.splice(R,1));Ha.history.redo.forEach(c=>c.updates.splice(R,1));var l=ya.findIndex(c=>c.graphic===f);this._internalGraphicsLayer.remove(ya[l].clone);
this.updateGraphics.remove(f);ya.splice(l,1);l=this.updateGraphics.toArray();this.emit("update",{graphics:l,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Ha.complete():Ka.graphics=l}});let La=[xa.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(Ha,f,ra),oa.ViewEventPriorities.WIDGET),xa.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(Ha,f);"Control"!==f.key||
f.repeat||(Ka.enableMoveAllGraphics=!Ka.enableMoveAllGraphics)},oa.ViewEventPriorities.WIDGET),xa.on("key-up",f=>{"Control"===f.key&&(Ka.enableMoveAllGraphics=!Ka.enableMoveAllGraphics)},oa.ViewEventPriorities.WIDGET)],Ia=this._getHandlesForComponent(Ha,ra);Ia.push(Ka.on("graphic-move",f=>{ya.forEach(R=>{const l=f.allGraphics.find(c=>c===R.graphic);l&&(R.clone.geometry=l.geometry)})}));return Ha};wa._getCloneInfos=function(ia){return(null==ia?void 0:ia.map(ra=>({graphic:ra,clone:this._createClone(ra)})))||
[]};wa._createClone=function(ia){const ra=ia.clone();ra.symbol=this._getSymbolForClone(ia);return ra};wa._getSymbolForClone=function(ia){if(I.isNone(ia.symbol))return null;switch(ia.symbol.type){case "cim":return new F({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case "picture-marker":{const {xoffset:ra,yoffset:xa,height:ya,width:Ka}=ia.symbol;return new F({xoffset:ra,yoffset:xa,size:ya===Ka?Ka:Math.max(ya,Ka),style:"square",color:[0,0,0,0],outline:{color:[255,127,
0,1],width:1}})}case "simple-marker":{const {xoffset:ra,yoffset:xa,size:ya,style:Ka}=ia.symbol;return new F({xoffset:ra,yoffset:xa,style:"circle"===Ka?"circle":"square",size:ya+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case "simple-fill":return new T({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case "simple-line":return new P({color:[255,127,0,1],style:"dash",width:1});case "text":{const {xoffset:ra,yoffset:xa}=ia.symbol;return new F({xoffset:ra,yoffset:xa,
size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}};wa._setupReshape3DOperation=async function(ia,ra,xa,ya=!1){const Ka=await this._requireModule(new Promise(function(f,R){q(["../../views/3d/interactive/editingTools"],f,R)}));if(Z(Ka))return Ka;this.snappingOptions.selfEnabledToggled=!1;const Ha=new Ka.module.GraphicReshapeTool({view:xa,graphic:ia,enableZ:ra.enableZ,enableMoveGraphic:ra.enableMoveGraphic,snappingOptions:this.snappingOptions});xa.tools.add(Ha);ya||
this.updateGraphics.add(ia);const La=[],Ia=new ja.OperationHandle({activeComponent:Ha,tool:"reshape",type:"update",onEnd:()=>{var f;La.forEach(R=>R.remove());La.length=0;null==(f=this.view.tools)?void 0:f.remove(Ha);Ha.destroyed||Ha.destroy()},undo:()=>{Ha.beforeUndo();Aa(Ia,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},redo:()=>{Ga(Ia,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},
addToSelection:async f=>{this.updateGraphics.add(f);f=await this._setupMove3DOperation(this.updateGraphics.toArray(),ra,xa,"transform",!0);Z(f)||(Ia.onEnd(),Ia.destroy(),this._setUpdateOperationHandle(f,ra))},toggleTool:async()=>{if(!1!==ra.toggleToolOnClick){var f=await this._setupMove3DOperation(this.updateGraphics.toArray(),ra,xa,"transform",!0);Z(f)||(Ia.onEnd(),Ia.destroy(),this._setUpdateOperationHandle(f,ra))}}});La.push(...this._getHandlesForComponent(Ia,ra),xa.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(Ia,
f),oa.ViewEventPriorities.WIDGET),xa.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(Ia,f);"Control"===f.key&&(Ha.snappingOptions.selfEnabledToggled=!0,f.stopPropagation())},oa.ViewEventPriorities.WIDGET),xa.on("key-up",f=>{"Control"===f.key&&(Ha.snappingOptions.selfEnabledToggled=!1,f.stopPropagation())},oa.ViewEventPriorities.WIDGET));return Ia};wa._setupTransformOrReshapeOperation=async function(ia,ra,xa,ya){const {multipleSelectionEnabled:Ka}=xa;this.updateGraphics.addMany(ia);
ra="transform"===ra?await this._getBox(ia,xa,ya):await this._getReshape(ia,xa,ya);if(Z(ra))return ra;const Ha=new ja.OperationHandle({activeComponent:ra,type:"update",onEnd:()=>{Ia.forEach(f=>f.remove());La.forEach(f=>f.remove());Ia=[];La=[];Ha.activeComponent&&!Ha.activeComponent.destroyed&&Ha.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Aa(Ha,this.updateGraphics.toArray());Ha.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),
tool:Ha.tool})},redo:()=>{Ga(Ha,this.updateGraphics.toArray());Ha.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Ha.tool})},addToSelection:f=>{const R=Ha.activeComponent;this.updateGraphics.add(f);R.graphics=this.updateGraphics.toArray();R.refresh();Ha.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:f=>
{const R=Ha.activeComponent,l=this.updateGraphics.indexOf(f);Ha.history.undo.forEach(a=>a.updates.splice(l,1));Ha.history.redo.forEach(a=>a.updates.splice(l,1));this.updateGraphics.remove(f);const c=this.updateGraphics.toArray();this.emit("update",{graphics:c,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Ha.complete():R.graphics=c},toggleTool:async()=>{if(!(1<this.updateGraphics.length)){var f=
null;"transform"===Ha.tool?f=await this._getReshape(ia,xa,ya):"reshape"===Ha.tool&&(f=await this._getBox(ia,xa,ya));Z(f)||(Ha.activeComponent.destroy(),Ha.activeComponent=f,Ha.activeComponent&&(Ia.forEach(R=>R.remove()),Ia=this._getHandlesForComponent(Ha,xa)))}}});let La=[ya.on("immediate-click",f=>{this._getFirstHit(la.createScreenPointFromEvent(f)).then(R=>{var l;if(Ha)if(null!=(l=R.results)&&l.length){var c=Ha.activeComponent;R.results.some(a=>{if(a.graphic){var b;a=a.graphic;if("box"===(null==
c?void 0:c.type)&&null!=(b=f.native)&&b.shiftKey&&Ka)return Ha.addToSelection(a),!0;a.layer===this.layer&&Ha.complete()}return!1})&&f.stopPropagation()}else Ha.complete()})},oa.ViewEventPriorities.WIDGET),ya.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(Ha,f);"Control"===f.key&&!f.repeat&&Ha&&(f=Ha.activeComponent)&&"box"===f.type&&(f.preserveAspectRatio=!f.preserveAspectRatio)},oa.ViewEventPriorities.WIDGET),ya.on("key-up",f=>{"Control"===f.key&&Ha&&(f=Ha.activeComponent)&&"box"===
f.type&&(f.preserveAspectRatio=!f.preserveAspectRatio)},oa.ViewEventPriorities.WIDGET)],Ia=this._getHandlesForComponent(Ha,xa);return Ha};wa._getGraphicMover=async function(ia,ra,xa){({enableMoveAllGraphics:ra}=ra);const ya=await this._requireModule(new Promise(function(Ka,Ha){q(["../../views/draw/support/GraphicMover"],function(La){Ka(ua(La))},Ha)}));return Z(ya)?ya:new ya.module.default({enableMoveAllGraphics:ra,graphics:ia,view:xa,callbacks:{onGraphicMoveStart:({dx:Ka,dy:Ha,graphic:La})=>{this._displayGrabbingCursor();
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:"move-start"},type:"update"})},onGraphicMove:({dx:Ka,dy:Ha,graphic:La})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:"move"},type:"update"}),onGraphicMoveStop:({dx:Ka,dy:Ha,graphic:La})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})};wa._getBox=async function(ia,ra,xa){const {enableRotation:ya,enableScaling:Ka,preserveAspectRatio:Ha}=ra;ra=await this._requireModule(new Promise(function(La,Ia){q(["../../views/draw/support/Box"],function(f){La(ua(f))},Ia)}));return Z(ra)?ra:new ra.module.default({graphics:ia,
enableRotation:ya,enableScaling:Ka,preserveAspectRatio:Ha,layer:this._internalGraphicsLayer,view:xa,callbacks:{onMoveStart:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onMove:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onMoveStop:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onScaleStart:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onScale:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onScaleStop:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{...La},type:"update"}),onRotateStart:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onRotate:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},type:"update"}),onRotateStop:La=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...La},
type:"update"})}})};wa._getReshape=async function(ia,ra,xa){({enableMidpoints:ra=!0}=ra);const ya=await this._requireModule(new Promise(function(Ka,Ha){q(["../../views/draw/support/Reshape"],function(La){Ka(ua(La))},Ha)}));return Z(ya)?ya:new ya.module.default({enableMidpoints:ra,graphic:ia[0],layer:this._internalGraphicsLayer,view:xa,callbacks:{onReshapeStart:Ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ka},type:"update"}),
onReshape:Ka=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ka},type:"update"}),onReshapeStop:({mover:Ka,type:Ha})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Ka,type:Ha},type:"update"}),onMoveStart:({dx:Ka,dy:Ha,mover:La,type:Ia})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:Ia},type:"update"}),onMove:({dx:Ka,dy:Ha,mover:La,type:Ia})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:Ia},type:"update"}),onMoveStop:({dx:Ka,dy:Ha,mover:La,type:Ia})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ka,dy:Ha,mover:La,type:Ia},type:"update"}),onVertexAdd:({added:Ka,
type:Ha,vertices:La})=>{Ka=Ka.map(Ia=>z.geometryToCoordinates(Ia.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Ka,vertices:La,type:Ha},type:"update"})},onVertexRemove:({removed:Ka,type:Ha,vertices:La})=>{Ka=Ka.map(Ia=>z.geometryToCoordinates(Ia.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Ka,vertices:La,type:Ha},
type:"update"})}}})};wa._getHandlesForComponent=function(ia,ra){const xa=ia.activeComponent;switch(xa.type){case "graphic-mover":return[xa.on("graphic-click",({graphic:ya,viewEvent:Ka})=>{var Ha;null!=(Ha=Ka.native)&&Ha.shiftKey&&(Ka.stopPropagation(),ia.removeFromSelection(ya))}),xa.on("graphic-move-start",ya=>ia.addToHistory(Na(ya.allGraphics)))];case "box":return[xa.on("graphic-click",ya=>this._onTransformOrReshape2DGraphicClick(ia,ra,ya)),xa.on("move-start",ya=>ia.addToHistory(Na(ya.graphics))),
xa.on("rotate-start",ya=>ia.addToHistory(Na(ya.graphics))),xa.on("scale-start",ya=>ia.addToHistory(Na(ya.graphics)))];case "reshape":return[xa.on("graphic-click",ya=>this._onTransformOrReshape2DGraphicClick(ia,ra,ya)),xa.on("move-start",ya=>ia.addToHistory(Na([ya.mover]))),xa.on("reshape-start",ya=>ia.addToHistory(Na([ya.graphic]))),xa.on("vertex-add",ya=>ia.addToHistory(Na([ya.oldGraphic]))),xa.on("vertex-remove",ya=>ia.addToHistory(Na([ya.oldGraphic])))];case "move-3d":return[xa.on("graphic-move-start",
ya=>{ia.addToHistory(Na(ya.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ya.allGraphics.length?ya.allGraphics[0]:null,type:"move-start"},type:"update"})}),xa.on("graphic-move",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:ya.dx,dy:ya.dy,mover:0<ya.allGraphics.length?ya.allGraphics[0]:null,type:"move"},type:"update"})}),
xa.on("graphic-move-stop",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<ya.allGraphics.length?ya.allGraphics[0]:null,type:"move-stop"},type:"update"})}),xa.on("immediate-click",ya=>{ya.shiftKey?this._toggleSelection([ya.graphic],ia,ra):ia.toggleTool()})];case "transform-3d":return[xa.on("graphic-translate-start",ya=>{ia.addToHistory(Na([ya.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,dx:ya.dxScreen,dy:ya.dyScreen,type:"move-start"},type:"update"})}),xa.on("graphic-translate-stop",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,dx:ya.dxScreen,dy:ya.dyScreen,type:"move-stop"},type:"update"})}),xa.on("graphic-rotate-start",ya=>{ia.addToHistory(Oa([ya.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,angle:ya.angle,type:"rotate-start"},type:"update"})}),xa.on("graphic-rotate-stop",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,angle:ya.angle,type:"rotate-stop"},type:"update"})}),xa.on("graphic-scale-start",ya=>{ia.addToHistory(Oa([ya.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{mover:ya.graphic,xScale:ya.scale,yScale:ya.scale,type:"scale-start"},type:"update"})}),xa.on("graphic-scale-stop",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,xScale:ya.scale,yScale:ya.scale,type:"scale-stop"},type:"update"})}),xa.on("graphic-translate",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,
dx:ya.dxScreen,dy:ya.dyScreen,type:"move"},type:"update"})}),xa.on("graphic-rotate",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,angle:ya.angle,type:"rotate"},type:"update"})}),xa.on("graphic-scale",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:ya.graphic,xScale:ya.scale,yScale:ya.scale,type:"scale"},type:"update"})})];
case "reshape-3d":return[xa.on("reshape",ya=>{"reshape-start"===ya.type&&ia.addToHistory(Na([ya.mover]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ya,type:"update"})}),xa.on("move",ya=>{"move-start"===ya.type&&ia.addToHistory(Na([ya.mover]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ya,type:"update"})}),xa.on("vertex-add",ya=>{this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ya,type:"update"})}),xa.on("vertex-remove",ya=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:ya,type:"update"})}),xa.on("immediate-click",()=>ia.toggleTool())];case "draw":case "draw-3d":return null}};wa._onTransformOrReshape2DGraphicClick=function(ia,ra,xa){var ya;const {graphic:Ka,viewEvent:Ha}=xa;null!=(ya=Ha.native)&&ya.shiftKey?
(Ha.stopPropagation(),ia.removeFromSelection(Ka)):ra.toggleToolOnClick&&(I.isNone(Ka.geometry)||"extent"!==Ka.geometry.type?(Ha.stopPropagation(),ia.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))};wa._setUpdateOperationHandle=function(ia,ra){this._operationHandle=ia;const xa=this.view.map;this._disablePopup(ra);ia.on("complete",()=>{if(ia===this._operationHandle){const ya=this.updateGraphics.toArray(),Ka=this._operationHandle.tool;
this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();xa&&xa.remove(this._internalGraphicsLayer);this._restorePopup(ra);this.emit("update",{graphics:ya,state:"complete",aborted:ia.cancelled,tool:Ka,toolEventInfo:null,type:"update"})}})};wa._getCommonUpdateOperationClickHandlers=function(ia,ra,xa){const ya=la.createScreenPointFromEvent(ra);this._getFirstHit(ya).then(Ka=>{Ka=Ka.results;Ka.length?
ra.native.shiftKey&&this._toggleSelection(Ka.map(Ha=>Ha.graphic),ia,xa)?ra.stopPropagation():Ka.some(Ha=>Ha.graphic&&-1<this.updateGraphics.indexOf(Ha.graphic))?ra.stopPropagation():ia.complete():ia.complete()})};wa._toggleSelection=function(ia,ra,xa){const ya=xa?!!xa.multipleSelectionEnabled:!0;return ia.some(Ka=>null==Ka?!1:ya&&Ka.layer===this.layer?(-1===this.updateGraphics.indexOf(Ka)?ra.addToSelection(Ka):ra.removeFromSelection(Ka),!0):!1)};wa._getCommonUpdateOperationKeyDownHandlers=function(ia,
ra){if(ia){var xa=ra.key;"z"===xa&&ia.canUndo()?(ra.stopPropagation(),ia.undo()):"r"===xa&&ia.canRedo()?(ra.stopPropagation(),ia.redo()):"Escape"===xa?(ra.stopPropagation(),ia.cancel()):0<=Ca.indexOf(xa)&&this._onDeleteKey(ra)}};wa._onDeleteKey=function(ia){if(this._operationHandle&&"update"===this._operationHandle.type){var ra=this.activeComponent;I.isNone(ra)||"reshape"===ra.type||"reshape-3d"===ra.type||(ia.stopPropagation(),ia=this.updateGraphics.toArray(),this.layer.removeMany(ia),this._emitDeleteEvent({graphics:ia,
tool:this.activeTool}))}};wa._drawMultipointGraphic=function(ia,ra){var xa=null;!ra&&1<ia.length?(xa=ia.slice(0),xa.pop(),xa=U.createMultipoint(xa,this.view.spatialReference)):xa=U.createMultipoint(ia,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=xa:this._set("createGraphic",new J(xa,this.pointSymbol));ra&&1===ia.length&&this._internalGraphicsLayer.add(this.createGraphic)};wa._drawVertexGraphics=function(ia,ra,xa){if(ra.length){var {_doUnnormalization:ya,activeLineSymbol:Ka,
activeVertexSymbol:Ha,polygonSymbol:La,polylineSymbol:Ia,vertexSymbol:f,view:{spatialReference:R}}=this;xa=!(!xa||!xa.userClicked);var l="polygon"===ia,c=l?La:Ia;if(1===ra.length){this._removeLineGraphic();this._removeActiveLineGraphic();var a=this.createPointFromVertex(ra[0]);ra=l?U.createPolygon([ra],R,ya,!0):U.createPolyline([ra],R,ya);this._vertexGraphics.length?this._vertexGraphics[0].geometry=a:this._vertexGraphics.push(new J(a,Ha));this.createGraphic?this.createGraphic.geometry=ra:this._set("createGraphic",
new J(ra,c));xa&&this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===ra.length)ia=this.createPointFromVertex(ra[1]),c=U.createPolyline([ra],R,ya),a=l?U.createPolygon([ra],R,ya,!0):U.createPolyline([ra],R,ya),this._vertexGraphics.length||(ra=this.createPointFromVertex(ra[0]),ra=new J(ra,f),this._vertexGraphics.push(ra)),1===this._vertexGraphics.length?(ra=this._vertexGraphics[0],l=new J(ia,f),this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(l),this._internalGraphicsLayer.remove(ra),
this._internalGraphicsLayer.add(ra)):this._vertexGraphics[1].geometry=ia,this._showActiveLineGraphic(c),ra=this._vertexGraphics[0],xa&&(this._activeLineGraphic.symbol=Ia,ra.symbol=f,this._internalGraphicsLayer.add(this._vertexGraphics[1])),this.createGraphic?this.createGraphic.geometry=a:this._set("createGraphic",new J(a,La)),this._internalGraphicsLayer.remove(ra),this._internalGraphicsLayer.add(ra);else if(2<ra.length){l=l?U.createPolygon([ra],R,ya,!0):U.createPolyline([ra],R,ya);"polygon"===ia&&
this._showFillGraphic(l);ia=ra.map(e=>e.slice());var b=ia.pop(),d=[ia[ia.length-1],b];b=U.createPolyline([ia],R,ya);d=U.createPolyline([d],R,ya);this._showLineGraphic(b);this._showActiveLineGraphic(d);for(b=0;b<ia.length;b++)(d=this._vertexGraphics[b])?d.symbol=xa||b!==this._vertexGraphics.length-1?f:Ha:(d=this.createPointFromVertex(ra[b]),this._showVertexGraphic(d));xa?(this._activeLineGraphic.symbol=Ia,xa=this.createPointFromVertex(ra[ra.length-1]),this._showVertexGraphic(xa)):this._activeLineGraphic.symbol=
Ka;this.createGraphic?this.createGraphic.geometry=l:(this._removeCreateGraphic(),this._set("createGraphic",new J(l,c)));for(a of this._vertexGraphics)this._internalGraphicsLayer.remove(a),this._internalGraphicsLayer.add(a)}}};wa._drawSegmentGraphic=function(ia,ra,xa,ya){if(ra.length){var Ka=!(null==xa||!xa.centered);xa=!(null==xa||!xa.constrainToggle);var Ha=null;1===ra.length?this._removeCenterIndicatorGraphic():("rectangle"===ia?Ha=xa?U.createSquare(ra,ya,Ka):U.createRectangle(ra,ya,Ka):"circle"===
ia&&(Ha=xa?U.createEllipse(ra,ya,Ka):U.createCircle(ra,ya,Ka,this.view.resolution)),Ha.extent&&Ha.extent.center&&this._showCenterIndicatorGraphic(Ha.extent.center));Ha?this.createGraphic?this.createGraphic.geometry=Ha:(this._removeCreateGraphic(),this._set("createGraphic",new J(Ha,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}};wa._showCenterIndicatorGraphic=function(ia){this._centerIndicatorGraphic?this._centerIndicatorGraphic.geometry=ia:(this._centerIndicatorGraphic=
new J(ia,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))};wa._removeCenterIndicatorGraphic=function(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)};wa._showActiveLineGraphic=function(ia){this._activeLineGraphic?(this._activeLineGraphic.geometry=ia,this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new J(ia,
this.activeLineSymbol);this._internalGraphicsLayer.add(this._activeLineGraphic)};wa._showFillGraphic=function(ia){this._activeFillGraphic?(this._activeFillGraphic.geometry=ia,this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new J(ia,this.activeFillSymbol);this._internalGraphicsLayer.add(this._activeFillGraphic)};wa._showLineGraphic=function(ia){this._lineGraphic?(this._lineGraphic.geometry=ia,this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=
new J(ia,this.polylineSymbol);this._internalGraphicsLayer.add(this._lineGraphic)};wa._showVertexGraphic=function(ia,ra){ia=new J(ia,ra?this.activeVertexSymbol:this.vertexSymbol);this._vertexGraphics.push(ia);this._internalGraphicsLayer.add(ia)};wa._resetCreateOperationGraphics=function(){this._removeActiveFillGraphic();this._removeLineGraphic();this._removeActiveLineGraphic();this._removeVertexGraphics()};wa._removeCreateGraphic=function(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),
this._set("createGraphic",null))};wa._removeCreateOperationGraphics=function(){this._removeCenterIndicatorGraphic();this._removeActiveLineGraphic();this._removeActiveFillGraphic();this._removeLineGraphic();this._removeVertexGraphics()};wa._removeActiveLineGraphic=function(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),this._activeLineGraphic.destroy(),this._activeLineGraphic=null)};wa._removeActiveFillGraphic=function(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),
this._activeFillGraphic.destroy(),this._activeFillGraphic=null)};wa._removeLineGraphic=function(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)};wa._removeVertexGraphics=function(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),this._vertexGraphics.forEach(ia=>ia.destroy()),this._vertexGraphics=[])};wa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)};wa._operationHandleForCreateAction=function(ia,ra,xa){return new ja.OperationHandle({activeComponent:this._draw,tool:xa,type:"create",onEnd:()=>{ra.forEach(ya=>ya.remove());ra.length=0;this._removeCreateOperationGraphics();this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic);this._displayDefaultCursor()},undo:()=>{ia.undo();this._emitUndoEvent({graphics:[this.createGraphic],
tool:xa})},redo:()=>{ia.redo();this._emitRedoEvent({graphics:[this.createGraphic],tool:xa})},canUndo:()=>ia&&ia.canUndo(),canRedo:()=>ia&&ia.canRedo()})};wa._isComponentGraphic=function(ia){const {activeComponent:ra}=this;return!ia||I.isNone(ra)?!1:ia.attributes&&ia.attributes.esriSketchTool?!0:("box"===ra.type||"reshape"===ra.type)&&ra.isUIGraphic(ia)};wa._snap=function(ia,ra,xa){xa&&this._snapLastVertexToAxis(ra);"polygon"===ia&&this._snapLastPolygonVertexToFirst(ra)};wa._snapLastPolygonVertexToFirst=
function(ia){if(!(2>=ia.length)){var ra=ia[0];ia=ia[ia.length-1];var xa=this.view.toScreen(new N(ra[0],ra[1],this.view.spatialReference)),ya=this.view.toScreen(new N(ia[0],ia[1],this.view.spatialReference));this._isWithinScreenDistance(xa,ya,this._getVertexIntersectDistance())&&(ia[0]=ra[0],ia[1]=ra[1])}};wa._getVertexIntersectDistance=function(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?O.pt2px(this.vertexSymbol.size)/2+3:3};wa._isWithinScreenDistance=function(ia,ra,xa){const ya=
ia.x-ra.x;ia=ia.y-ra.y;return Math.sqrt(ya*ya+ia*ia)<=xa};wa._snapLastVertexToAxis=function(ia){if(!(2>ia.length)){var ra=ia.pop(),xa=ia[ia.length-1],ya=U.createViewAlignedCoordinateSystem(this.view,xa);xa=ya.mapToLocal(xa);ra=ya.mapToLocal(ra);var Ka=Math.abs(ra.x-xa.x),Ha=Math.abs(ra.y-xa.y);ya=ya.localToMap(U.makeSurfacePoint(Ka>Ha?ra.x:xa.x,Ka>Ha?xa.y:ra.y));ia.push(ya)}};wa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};
wa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};wa._displayCrosshairCursor=function(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")};wa._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};wa._logError=function(ia,ra,xa){ha.error(new u(ia,ra,xa))};wa._requireModule=async function(ia){const ra=new AbortController;
this._moduleLoaderAbortController=ra;ia=await ia;return this._moduleLoaderAbortController!==ra||ra.signal.aborted?{requireError:"aborted"}:{module:ia}};wa._emitUndoEvent=function(ia){this.emit("undo",{...ia,type:"undo"})};wa._emitRedoEvent=function(ia){this.emit("redo",{...ia,type:"redo"})};wa._emitDeleteEvent=function(ia){this.emit("delete",{...ia,type:"delete"})};wa.createPointFromVertex=function(ia){return 2<ia.length?new N(ia[0],ia[1],ia[2],this.view.spatialReference):new N(ia[0],ia[1],this.view.spatialReference)};
wa.test=function(){return this._operationHandle};wa.wait=function(){return W.whenNotOnce(this,"updating")};wa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};wa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};wa._disablePopupEnabled=function(ia){var ra;return"3d"!==(null==(ra=this.view)?void 0:ra.type)||this.updateOnGraphicClick||ia.toggleToolOnClick};wa._disablePopup=function(ia){this._disablePopupEnabled(ia)&&(ia=this.view.popup)&&
I.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=ia.autoOpenEnabled,ia.autoOpenEnabled=!1)};wa._restorePopup=function(ia){this._disablePopupEnabled(ia)&&(ia=this.view.popup)&&I.isSome(this._originalAutoOpenEnabled)&&(ia.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)};A._createClass(fa,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"_draw",get:function(){return"ready"===this.state||"active"===
this.state?new ka({view:this.view}):null}},{key:"updating",get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return this.view&&"3d"===this.view.type&&I.isSome(this.activeComponent)&&"draw-3d"===this.activeComponent.type?I.unwrap(this.activeComponent.createGraphic):
this._get("createGraphic")}},{key:"defaultCreateOptions",set:function(ia){this._set("defaultCreateOptions",{...Da,...ia})}},{key:"defaultUpdateOptions",set:function(ia){this._set("defaultUpdateOptions",{...Ja,...ia})}},{key:"state",get:function(){var ia;const ra=!(null==(ia=this.view)||!ia.ready||!this.layer);ia=this._operationHandle;return ra&&ia?"active":ra?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},set:function(ia){const ra=this._get("view");if(ra){const {container:xa,
map:ya}=ra;xa&&(ra.cursor=null);ya&&ya.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._doUnnormalization=null!=ia&&"3d"===ia.type&&"global"===ia.viewingMode;this._handles.remove("view-ready");ia&&this._handles.add(W.when(ia,"ready",xa=>{this._viewHandles.removeAll();xa&&this._viewHandles.add(this._generateViewHandles(ia))},!0),"view-ready");this._set("view",ia)}}]);return fa}(r.EventedAccessor);w.__decorate([v.property({dependsOn:["state"],readOnly:!0})],S.prototype,
"_draw",null);w.__decorate([v.property()],S.prototype,"updating",null);w.__decorate([v.property()],S.prototype,"_operationHandle",void 0);w.__decorate([v.property({dependsOn:["_operationHandle","_operationHandle.tool"],readOnly:!0})],S.prototype,"activeTool",null);w.__decorate([v.property()],S.prototype,"activeFillSymbol",void 0);w.__decorate([v.property()],S.prototype,"activeLineSymbol",void 0);w.__decorate([v.property()],S.prototype,"activeVertexSymbol",void 0);w.__decorate([v.property({readOnly:!0})],
S.prototype,"createGraphic",null);w.__decorate([v.property()],S.prototype,"defaultCreateOptions",null);w.__decorate([v.property()],S.prototype,"defaultUpdateOptions",null);w.__decorate([v.property()],S.prototype,"layer",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"pointSymbol",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"polygonSymbol",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"polylineSymbol",void 0);w.__decorate([v.property({dependsOn:["view.ready",
"layer","_operationHandle"],readOnly:!0})],S.prototype,"state",null);w.__decorate([v.property({readOnly:!0})],S.prototype,"updateGraphics",void 0);w.__decorate([v.property()],S.prototype,"updateOnGraphicClick",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"updatePointSymbol",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"updatePolygonSymbol",void 0);w.__decorate([v.property({types:K.symbolTypes})],S.prototype,"updatePolylineSymbol",void 0);w.__decorate([v.property({types:K.symbolTypes})],
S.prototype,"vertexSymbol",void 0);w.__decorate([v.property({value:null})],S.prototype,"view",null);w.__decorate([v.property({type:X.SnappingOptions})],S.prototype,"snappingOptions",void 0);w.__decorate([v.property()],S.prototype,"cancel",null);w.__decorate([v.property()],S.prototype,"complete",null);w.__decorate([v.property()],S.prototype,"delete",null);w.__decorate([v.property()],S.prototype,"create",null);w.__decorate([v.property()],S.prototype,"update",null);w.__decorate([v.property()],S.prototype,
"undo",null);w.__decorate([v.property()],S.prototype,"redo",null);w.__decorate([v.property()],S.prototype,"canUndo",null);w.__decorate([v.property()],S.prototype,"canRedo",null);w.__decorate([v.property()],S.prototype,"toggleUpdateTool",null);return S=w.__decorate([y.subclass("esri.widgets.Sketch.SketchViewModel")],S)})},"esri/views/interactive/snapping/SnappingOptions":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){q.SnappingOptions=function(M){function N(){var z=M.apply(this,arguments)||this;z.selfEnabled=!1;z.selfEnabledToggled=!1;return z}A._inheritsLoose(N,M);A._createClass(N,[{key:"effectiveSelfEnabled",get:function(){return this.selfEnabledToggled?!this.selfEnabled:this.selfEnabled}}]);return N}(B);w.__decorate([H.property()],q.SnappingOptions.prototype,"selfEnabled",void 0);w.__decorate([H.property()],q.SnappingOptions.prototype,"selfEnabledToggled",void 0);w.__decorate([H.property({readOnly:!0})],
q.SnappingOptions.prototype,"effectiveSelfEnabled",null);q.SnappingOptions=w.__decorate([G.subclass("esri.views.interactive.snapping.SnappingOptions")],q.SnappingOptions);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/support/createUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/arrayUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/Point ../../../geometry/Multipoint ../../../geometry/support/coordsUtils ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry ../../../chunks/vec3f64 ../../../chunks/vec3 ../../../core/unitUtils ../../../chunks/quatf64 ../../../geometry/Circle ../../../geometry/geometryEngine ../../../chunks/quat ../../../chunks/mat2d ../../../chunks/mat2df64".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P){function T(W,aa,oa=null){return S.isSome(oa)?[W,aa,oa]:[W,aa]}function F(W,aa,oa=null){return S.isSome(oa)?{x:W,y:aa,z:oa}:{x:W,y:aa}}function K(W,aa){aa=new H({x:W[0],y:W[1],spatialReference:aa});2<W.length&&(aa.z=W[2]);return aa}function J(W,aa,oa,ta=!0){W=w.clone(W);W.forEach(la=>{I.equals(la[0],la[la.length-1])&&1!==la.length||la.push(la[0])});W=new y({rings:W,spatialReference:aa});W.rings.forEach(la=>{G.isClockwise(la,!1,!1)||la.reverse()});
oa&&G.unnormalizeGeometryOnDatelineCrossing(W);ta&&W.isSelfIntersecting&&t.isValid(aa)&&(W=r.simplify(W));return W}D=function(){function W(aa){this.spatialReference=aa}W.prototype.mapToLocalMultiple=function(aa){return aa.map(oa=>this.mapToLocal(oa))};A._createClass(W,[{key:"doUnnormalization",get:function(){return!1}}]);return W}();let L=function(W){function aa(ta,la,X=null){la=W.call(this,la)||this;la.defaultZ=X;la.transform=P.create();la.transformInv=P.create();la.transform=P.clone(ta);O.invert(la.transformInv,
la.transform);return la}A._inheritsLoose(aa,W);var oa=aa.prototype;oa.makeMapPoint=function(ta,la){return T(ta,la,this.defaultZ)};oa.mapToLocal=function(ta){return F(this.transform[0]*ta[0]+this.transform[2]*ta[1]+this.transform[4],this.transform[1]*ta[0]+this.transform[3]*ta[1]+this.transform[5])};oa.localToMap=function(ta){return T(this.transformInv[0]*ta.x+this.transformInv[2]*ta.y+this.transformInv[4],this.transformInv[1]*ta.x+this.transformInv[3]*ta.y+this.transformInv[5],this.defaultZ)};return aa}(D),
Y=function(W){function aa(ta,la){var X=W.call(this,ta.spatialReference)||this;X.view=ta;X.defaultZ=null;X.pWS=B.create();X.tangentFrameUpWS=B.create();X.tangentFrameRightWS=B.create();X.tangentFrameForwardWS=B.create();X.localFrameRightWS=B.create();X.localFrameUpWS=B.create();X.worldToLocalTransform=z.create();X.localToWorldTransform=z.create();X.scale=1;X.scale=ta.resolution;X.referenceMapPoint=la;X.defaultZ=la.hasZ?la.z:null;ta=ta.state.camera.viewRight;X.view.renderCoordsHelper.toRenderCoords(X.referenceMapPoint,
X.pWS);X.view.renderCoordsHelper.worldBasisAtPosition(X.pWS,0,X.tangentFrameRightWS);X.view.renderCoordsHelper.worldBasisAtPosition(X.pWS,1,X.tangentFrameUpWS);X.view.renderCoordsHelper.worldBasisAtPosition(X.pWS,2,X.tangentFrameForwardWS);la=B.create();M.scale(la,X.tangentFrameForwardWS,M.dot(ta,X.tangentFrameForwardWS));M.subtract(X.localFrameRightWS,ta,la);M.normalize(X.localFrameRightWS,X.localFrameRightWS);M.cross(X.localFrameUpWS,X.tangentFrameForwardWS,X.localFrameRightWS);C.rotationTo(X.worldToLocalTransform,
X.localFrameRightWS,X.tangentFrameRightWS);C.invert(X.localToWorldTransform,X.worldToLocalTransform);return X}A._inheritsLoose(aa,W);var oa=aa.prototype;oa.makeMapPoint=function(ta,la){return T(ta,la,this.defaultZ)};oa.mapToLocal=function(ta){const la=B.create();this.view.renderCoordsHelper.toRenderCoords(new H({x:ta[0],y:ta[1],spatialReference:this.spatialReference}),la);M.transformQuat(la,la,this.worldToLocalTransform);ta=this.view.renderCoordsHelper.fromRenderCoords(la,this.view.spatialReference);
return F(ta.x/this.scale,ta.y/this.scale)};oa.localToMap=function(ta){const la=B.create();this.view.renderCoordsHelper.toRenderCoords(new H({x:ta.x*this.scale,y:ta.y*this.scale,spatialReference:this.spatialReference}),la);M.transformQuat(la,la,this.localToWorldTransform);ta=this.view.renderCoordsHelper.fromRenderCoords(la,this.view.spatialReference);return T(ta.x,ta.y,this.defaultZ)};A._createClass(aa,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}}]);return aa}(D);
q.AffineCoordinateSystem=L;q.SceneViewCoordinateSystem=Y;q.SurfaceCoordinateSystem=D;q.createCircle=function(W,aa,oa,ta){var la=aa.mapToLocalMultiple(W),X=W=null;oa?(W=la[0],X=la[1]):(W=la[0],oa=la[1],X=Math.round(oa.x-W.x),oa=Math.round(oa.y-W.y),la=Math.max(Math.abs(X),Math.abs(oa)),W=F(0<X?W.x+la/2:W.x-la/2,0<oa?W.y+la/2:W.y-la/2),X=F(Math.abs(X)>Math.abs(oa)?W.x-la/2:W.x,Math.abs(X)>Math.abs(oa)?W.y:W.y-la/2));oa=aa.localToMap(W);la=aa.localToMap(X);aa.doUnnormalization&&G.unnormalizeVerticesOnDatelineCrossing([[oa,
la]],aa.spatialReference);oa=K(oa,aa.spatialReference);var U=K(la,aa.spatialReference);la=N.getMetersPerUnitForSR(aa.spatialReference);let ka=0;t.isValid(aa.spatialReference)?ka=la*r.distance(oa,U,null):(U=W.x-X.x,W=W.y-X.y,ka=la*Math.sqrt(U*U+W*W)*(ta||1));aa=new E({center:oa,radius:ka,radiusUnit:"meters",spatialReference:aa.spatialReference});return J(aa.rings,aa.spatialReference,!1)};q.createEllipse=function(W,aa,oa){var ta=aa.mapToLocalMultiple(W);W=ta[0];var la=ta[1];ta=Math.round(la.x-W.x);
la=Math.round(la.y-W.y);W=F(oa?W.x:W.x+ta/2,oa?W.y:W.y+la/2);ta=oa?ta:ta/2;oa=oa?la:la/2;la=[];const X=2*Math.PI/60;for(let U=0;60>U;U++){const ka=F(ta*Math.cos(U*X)+W.x,oa*Math.sin(U*X)+W.y);la.push(ka)}la.push(la[0]);return J([la.map(U=>aa.localToMap(U))],aa.spatialReference,aa.doUnnormalization,!1)};q.createMultipoint=function(W,aa){return new v({points:W,spatialReference:aa})};q.createPoint=K;q.createPolygon=J;q.createPolyline=function(W,aa,oa){W=new u({paths:W,spatialReference:aa});oa&&G.unnormalizeGeometryOnDatelineCrossing(W);
return W};q.createRectangle=function(W,aa,oa){var ta=aa.mapToLocalMultiple(W);1===ta.length&&(W=ta[0],ta=[F(W.x-48,W.y+48),F(W.x+48,W.y-48),F(W.x+48,W.y-48),F(W.x-48,W.y+48)]);W=[];var la=ta[0].x,X=ta[0].y,U=ta[1].x;ta=ta[1].y;if(oa){oa=Math.round(U-la);const ka=Math.round(ta-X);W.push(F(la-oa,X-ka),F(U,X-ka),F(U,ta),F(la-oa,ta))}else W.push(F(la,X),F(U,X),F(U,ta),F(la,ta));return J([W.map(ka=>aa.localToMap(ka))],aa.spatialReference,aa.doUnnormalization,!0)};q.createSquare=function(W,aa,oa){var ta=
aa.mapToLocalMultiple(W);W=[];var la=ta[0].x,X=ta[0].y,U=Math.round(ta[1].x-la);const ka=Math.round(ta[1].y-X);ta=Math.max(Math.abs(U),Math.abs(ka));oa?(oa=la+ta,U=X+ta,la-=ta,X-=ta,W.push(F(oa,X),F(la,X),F(la,U),F(oa,U))):(oa=0<U?la+ta:la-ta,ta=0<ka?X+ta:X-ta,W.push(F(la,X),F(oa,X),F(oa,ta),F(la,ta)));return J([W.map(sa=>aa.localToMap(sa))],aa.spatialReference,aa.doUnnormalization,!0)};q.createViewAlignedCoordinateSystem=function(W,aa){return"2d"===W.type?new L(W.state.transform,W.spatialReference,
2<aa.length?aa[2]:null):"3d"===W.type?(aa=2<aa.length?new H({x:aa[0],y:aa[1],z:aa[2],spatialReference:W.spatialReference}):new H({x:aa[0],y:aa[1],spatialReference:W.spatialReference}),new Y(W,aa)):null};q.makeMapPoint=T;q.makeSurfacePoint=F;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/quatf64":function(){define(["exports"],function(q){function A(){return[0,0,0,1]}function w(v){return[v[0],v[1],v[2],v[3]]}function S(v,G,y,u){return[v,G,y,u]}function I(v,G){return new Float64Array(v,
G,4)}const t=A();var H=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I,IDENTITY:t});q.IDENTITY=t;q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.quatf64=H})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/WKIDUnitConversion ./support/webMercatorUtils ./Point ./Polygon ./projectionEllipsoid ../core/unitUtils ./support/geodesicUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r){var C;w=C=function(O){function P(...F){F=O.call(this,...F)||this;F.center=null;F.geodesic=!1;F.numberOfPoints=60;F.radius=1E3;F.radiusUnit="meters";return F}q._inheritsLoose(P,O);var T=P.prototype;T.normalizeCtorArgs=function(F,K){if(!F||!F.center){if(F&&F.rings)return O.prototype.normalizeCtorArgs.call(this,F,K);F={center:F}}return{...O.prototype.normalizeCtorArgs.call(this),...F,...K}};T.initialize=function(){var F=this.center;const K=this.numberOfPoints;
this.hasZ=F&&F.hasZ;if(0===this.rings.length&&F){var J=E.convertUnit(this.radius,this.radiusUnit,"meters"),L=F.spatialReference,Y="geographic";if(L.isWebMercator)Y="webMercator";else if(null!=D[L.wkid]||L.wkt&&0===L.wkt.indexOf("PROJCS"))Y="projected";if(this.geodesic){let W;switch(Y){case "webMercator":W=B.webMercatorToGeographic(F);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":W=
F}F=this._createGeodesicCircle(W,J,K);"webMercator"===Y&&(F=B.geographicToWebMercator(F))}else{let W;"webMercator"===Y||"projected"===Y?W=J/this._convert2Meters(1,F.spatialReference):"geographic"===Y&&(W=E.lengthToDegrees(J,"meters",z.getReferenceEllipsoid(F.spatialReference).radius));F=this._createPlanarCircle(F,W,K)}this.spatialReference=F.spatialReference;this.addRing(F.rings[0])}};T.clone=function(){const {center:F,numberOfPoints:K,radius:J,radiusUnit:L,geodesic:Y}=this;return new C({center:F.clone(),
numberOfPoints:K,radius:J,radiusUnit:L,geodesic:Y})};T._createGeodesicCircle=function(F,K,J){let L=0;const Y=[];for(;360>L;){const W=[0,0];r.directGeodeticSolver(W,[F.x,F.y],L,K);this.hasZ&&W.push(F.z);Y.push(W);L+=360/J}Y.push(Y[0]);return new N(Y)};T._createPlanarCircle=function(F,K,J){let L=0;const Y=[];for(;L<2*Math.PI;){const W=[F.x+Math.cos(-L)*K,F.y+Math.sin(-L)*K];this.hasZ&&W.push(F.z);Y.push(W);L+=Math.PI/(J/2)}Y.push(Y[0]);return new N({spatialReference:F.spatialReference,rings:[Y]})};
T._convert2Meters=function(F,K){if(null!=D[K.wkid])K=D.values[D[K.wkid]];else{K=K.wkt;const J=K.lastIndexOf(",")+1,L=K.lastIndexOf("]]");K=parseFloat(K.substring(J,L))}return F*K};return P}(N);A.__decorate([t.property({type:M})],w.prototype,"center",void 0);A.__decorate([t.property()],w.prototype,"geodesic",void 0);A.__decorate([t.property()],w.prototype,"numberOfPoints",void 0);A.__decorate([t.property()],w.prototype,"radius",void 0);A.__decorate([t.property()],w.prototype,"radiusUnit",void 0);return w=
C=A.__decorate([v.subclass("esri.geometry.Circle")],w)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../core/Error ../SpatialReference ../Point ../Polygon ../Polyline ../../geometry ../../core/unitUtils ./geodesicConstants".split(" "),function(q,A,w,S,I,t,H,v,G){function y(E){if(!E)return null;if(E.isGeographic&&E.wkid){var r=G.spheroids[E.wkid];if(r)return r}if(E.wkt){E=G.WKT_SPHEROID_REGEX.exec(E.wkt);if(!E||2!==E.length)return null;r=E[1].split(",");if(!r||3>r.length)return null;
E=parseFloat(r[1]);r=parseFloat(r[2]);return isNaN(E)||isNaN(r)?null:{a:E,f:0===r?0:1/r}}return null}function u(E){E=y(E||w.WGS84);if("b"in E&&"eSq"in E&&"radius"in E)return E;const r=E.a*(1-E.f);return Object.assign(E,{b:r,eSq:1-(r/E.a)**2,radius:(2*E.a+r)/3,densificationRatio:1E4/((2*E.a+r)/3)})}function D(E,r,C){const {a:O,eSq:P}=u(C);C=Math.sqrt(P);const T=Math.sin(r[1]*G.toRadians);r=O*r[0]*G.toRadians;C=0<P?O*(1-P)*(T/(1-P*T*T)-1/(2*C)*Math.log((1-C*T)/(1+C*T)))*.5:O*T;E[0]=r;E[1]=C;return E}
function B(E){return null!==y(E)}function M(E,r){if("polyline"!==E.type&&"polygon"!==E.type)throw new A("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:C}=E;if(!B(C))throw new A("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var {radius:O}=u(C);O/=1E4;r<O&&(r=O);var P="polyline"===E.type?E.paths:E.rings;O=[];const T=[0,0],F={distance:null};for(const L of P){P=[];O.push(P);P.push([L[0][0],
L[0][1]]);var K=L[0][0],J=L[0][1];let Y,W;for(let aa=0;aa<L.length-1;aa++){Y=L[aa+1][0];W=L[aa+1][1];if(K===Y&&J===W)continue;const oa=[K,J];z(F,[K,J],[Y,W],C);const {azimuth:ta,distance:la}=F;K=la/r;if(1<K){for(J=1;J<=K-1;J++)N(T,oa,ta,J*r,C),P.push(T.slice(0));N(T,oa,ta,(la+Math.floor(K-1)*r)/2,C);P.push(T.slice(0))}N(T,oa,ta,la,C);P.push(T.slice(0));K=T[0];J=T[1]}}return"polyline"===E.type?new t({paths:O,spatialReference:C}):new I({rings:O,spatialReference:C})}function N(E,r,C,O,P){var T=r[0]*
G.toRadians;r=r[1]*G.toRadians;C*=G.toRadians;const {a:F,b:K,f:J}=u(P);P=Math.sin(C);C=Math.cos(C);var L=(1-J)*Math.tan(r);r=1/Math.sqrt(1+L*L);const Y=L*r,W=Math.atan2(L,C);L=r*P;const aa=L*L;var oa=1-aa,ta=oa*(F*F-K*K)/(K*K);const la=1+ta/16384*(4096+ta*(-768+ta*(320-175*ta))),X=ta/1024*(256+ta*(-128+ta*(74-47*ta)));ta=O/(K*la);let U=2*Math.PI,ka,sa,qa,na;for(;1E-12<Math.abs(ta-U);)qa=Math.cos(2*W+ta),ka=Math.sin(ta),sa=Math.cos(ta),na=X*ka*(qa+X/4*(sa*(-1+2*qa*qa)-X/6*qa*(-3+4*ka*ka)*(-3+4*qa*
qa))),U=ta,ta=O/(K*la)+na;O=Y*ka-r*sa*C;oa=J/16*oa*(4+J*(4-3*oa));O=Math.atan2(Y*sa+r*ka*C,(1-J)*Math.sqrt(aa+O*O))/G.toRadians;T=(T+(Math.atan2(ka*P,r*sa-Y*ka*C)-(1-oa)*J*L*(ta+oa*ka*(qa+oa*sa*(-1+2*qa*qa)))))/G.toRadians;E.splice(0,E.length);E.push(T,O);return E}function z(E,r,C,O){var P=r[0]*G.toRadians;r=r[1]*G.toRadians;var T=C[0]*G.toRadians;C=C[1]*G.toRadians;const {a:F,b:K,f:J,radius:L}=u(O),Y=T-P;var W=Math.atan((1-J)*Math.tan(r)),aa=Math.atan((1-J)*Math.tan(C));O=Math.sin(W);W=Math.cos(W);
const oa=Math.sin(aa);aa=Math.cos(aa);let ta=1E3,la=Y,X,U,ka;let sa,qa,na;do{var pa=Math.sin(la);var va=Math.cos(la);ka=Math.sqrt(aa*pa*aa*pa+(W*oa-O*aa*va)*(W*oa-O*aa*va));if(0===ka)return{distance:0};va=O*oa+W*aa*va;sa=Math.atan2(ka,va);qa=W*aa*pa/ka;U=1-qa*qa;pa=va-2*O*oa/U;isNaN(pa)&&(pa=0);na=J/16*U*(4+J*(4-3*U));X=la;la=Y+(1-na)*J*qa*(sa+na*ka*(pa+na*va*(-1+2*pa*pa)))}while(1E-12<Math.abs(la-X)&&0<--ta);if(0===ta)return E=T-P,{azimuth:Math.atan2(Math.sin(E)*Math.cos(C),Math.cos(r)*Math.sin(C)-
Math.sin(r)*Math.cos(C)*Math.cos(E))/G.toRadians,distance:Math.acos(Math.sin(r)*Math.sin(C)+Math.cos(r)*Math.cos(C)*Math.cos(T-P))*L};P=U*(F*F-K*K)/(K*K);r=P/1024*(256+P*(-128+P*(74-47*P)));T=Math.atan2(W*Math.sin(la),W*oa*Math.cos(la)-O*aa);E.azimuth=Math.atan2(aa*Math.sin(la),W*oa-O*aa*Math.cos(la))/G.toRadians;E.distance=K*(1+P/16384*(4096+P*(-768+P*(320-175*P))))*(sa-r*ka*(pa+r/4*(va*(-1+2*pa*pa)-r/6*pa*(-3+4*ka*ka)*(-3+4*pa*pa))));E.reverseAzimuth=T/G.toRadians;return E}q.directGeodeticSolver=
N;q.geodesicAreas=function(E,r="square-meters"){if(E.some(T=>!B(T.spatialReference)))throw new A("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const C=[];for(var O=0;O<E.length;O++){var P=E[O];const {radius:T,densificationRatio:F}=u(P.spatialReference);C.push(M(P,T*F))}E=[];O=[0,0];P=[0,0];for(let T=0;T<C.length;T++){const {rings:F,spatialReference:K}=C[T];let J=0;for(let L=0;L<F.length;L++){const Y=F[L];D(O,Y[0],K);D(P,Y[Y.length-1],K);let W=
P[0]*O[1]-O[0]*P[1];for(let aa=0;aa<Y.length-1;aa++)D(O,Y[aa+1],K),D(P,Y[aa],K),W+=P[0]*O[1]-O[0]*P[1];J+=W}J=v.convertUnit(J,"square-meters",r);E.push(J/-2)}return E};q.geodesicDensify=M;q.geodesicDistance=function(E,r,C="meters"){if(!E||!r)throw new A("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!E.spatialReference||!r.spatialReference)throw new A("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!E.spatialReference.equals(r.spatialReference))throw new A("geodesic-distance:invalid-parameters",
"spatial references of input parameters do not match");const {spatialReference:O}=E;if(!B(O))throw new A("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(E.equals(r))return{distance:0,azimuth:0,reverseAzimuth:0};const P={distance:null};z(P,[E.x,E.y],[r.x,r.y],O);P.distance=v.convertUnit(P.distance,"meters",C);return P};q.geodesicLengths=function(E,r="meters"){if(!E&&!E)throw new A("geodesic-lengths:invalid-geometries","the input geometries type is not supported");
if(E.some(P=>!B(P.spatialReference)))throw new A("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const C=[];for(let P=0;P<E.length;P++){var O=E[P];const {spatialReference:T}=O;O="polyline"===O.type?O.paths:O.rings;let F=0;for(let K=0;K<O.length;K++){const J=O[K];let L=0;for(let Y=1;Y<J.length;Y++){const W=J[Y-1][0],aa=J[Y][0],oa=J[Y-1][1],ta=J[Y][1];if(oa!==ta||W!==aa){const la={distance:null};z(la,[W,oa],[aa,ta],T);L+=la.distance}}F+=L}F=v.convertUnit(F,
"meters",r);C.push(F)}return C};q.inverseGeodeticSolver=z;q.isSupported=B;q.pointFromDistance=function(E,r,C){if(!E||null==r||null==C)throw new A("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>C||360<C)throw new A("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!E.spatialReference)throw new A("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");
const {spatialReference:O}=E;if(!B(O))throw new A("geodesic-distance:not-supported","input geometry spatial reference is not supported");const P=[0,0];N(P,[E.x,E.y],C,r,O);return new S({x:P[0],y:P[1],spatialReference:O})};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(q,A){const w=Math.PI/180;var S=A.earth.radius;const I=A.earth.eccentricitySquared;S={a1:S*I,a2:S*I*S*I,a3:S*I*I/2,a4:S*I*S*I*2.5,a5:S*
I+S*I*I/2,a6:1-I};A={4326:{a:A.earth.radius,f:A.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:A.moon.radius,f:A.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:A.mars.radius,f:A.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,
f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,
f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,
f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:A.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};q.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;q.earthEllipsoidConstants=S;q.spheroids=A;q.toRadians=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/geometryEngine":function(){define(["exports","../chunks/geometryEngineBase",
"./geometryAdapters/hydrated"],function(q,A,w){function S(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function I(t){return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?t.extent.center:null}q.buffer=function(t,H,v,G=!1){return A.geometryEngineBase$1.buffer(w.hydratedAdapter,S(t),t,H,v,G)};q.clip=function(t,H){return A.geometryEngineBase$1.clip(w.hydratedAdapter,S(t),t,H)};q.contains=function(t,H){return A.geometryEngineBase$1.contains(w.hydratedAdapter,S(t),
t,H)};q.convexHull=function(t,H=!1){return A.geometryEngineBase$1.convexHull(w.hydratedAdapter,S(t),t,H)};q.crosses=function(t,H){return A.geometryEngineBase$1.crosses(w.hydratedAdapter,S(t),t,H)};q.cut=function(t,H){return A.geometryEngineBase$1.cut(w.hydratedAdapter,S(t),t,H)};q.densify=function(t,H,v){return A.geometryEngineBase$1.densify(w.hydratedAdapter,S(t),t,H,v)};q.difference=function(t,H){return A.geometryEngineBase$1.difference(w.hydratedAdapter,S(t),t,H)};q.disjoint=function(t,H){return A.geometryEngineBase$1.disjoint(w.hydratedAdapter,
S(t),t,H)};q.distance=function(t,H,v){return A.geometryEngineBase$1.distance(w.hydratedAdapter,S(t),t,H,v)};q.equals=function(t,H){return A.geometryEngineBase$1.equals(w.hydratedAdapter,S(t),t,H)};q.extendedSpatialReferenceInfo=function(t){return A.geometryEngineBase$1.extendedSpatialReferenceInfo(t)};q.flipHorizontal=function(t,H){var v;if(null==t)throw Error("Illegal Argument Exception");const G=t.spatialReference;H=null!=(v=H)?v:I(t);if(null==H)throw Error("Illegal Argument Exception");t=t.constructor.fromJSON(A.geometryEngineBase$1.flipHorizontal(t,
H));t.spatialReference=G;return t};q.flipVertical=function(t,H){var v;if(null==t)throw Error("Illegal Argument Exception");const G=t.spatialReference;H=null!=(v=H)?v:I(t);if(null==H)throw Error("Illegal Argument Exception");t=t.constructor.fromJSON(A.geometryEngineBase$1.flipVertical(t,H));t.spatialReference=G;return t};q.generalize=function(t,H,v,G){return A.geometryEngineBase$1.generalize(w.hydratedAdapter,S(t),t,H,v,G)};q.geodesicArea=function(t,H,v){return A.geometryEngineBase$1.geodesicArea(w.hydratedAdapter,
S(t),t,H,v)};q.geodesicBuffer=function(t,H,v,G,y,u){return A.geometryEngineBase$1.geodesicBuffer(w.hydratedAdapter,S(t),t,H,v,G,y,u)};q.geodesicDensify=function(t,H,v,G=0){return A.geometryEngineBase$1.geodesicDensify(w.hydratedAdapter,S(t),t,H,v,G)};q.geodesicLength=function(t,H,v){return A.geometryEngineBase$1.geodesicLength(w.hydratedAdapter,S(t),t,H,v)};q.intersect=function(t,H){return A.geometryEngineBase$1.intersect(w.hydratedAdapter,S(t),t,H)};q.intersects=function(t,H){return A.geometryEngineBase$1.intersects(w.hydratedAdapter,
S(t),t,H)};q.isSimple=function(t){return A.geometryEngineBase$1.isSimple(w.hydratedAdapter,S(t),t)};q.nearestCoordinate=function(t,H,v=!0){return A.geometryEngineBase$1.nearestCoordinate(w.hydratedAdapter,S(t),t,H,v)};q.nearestVertex=function(t,H){return A.geometryEngineBase$1.nearestVertex(w.hydratedAdapter,S(t),t,H)};q.nearestVertices=function(t,H,v,G){return A.geometryEngineBase$1.nearestVertices(w.hydratedAdapter,S(t),t,H,v,G)};q.offset=function(t,H,v,G,y,u){return A.geometryEngineBase$1.offset(w.hydratedAdapter,
S(t),t,H,v,G,y,u)};q.overlaps=function(t,H){return A.geometryEngineBase$1.overlaps(w.hydratedAdapter,S(t),t,H)};q.planarArea=function(t,H){return A.geometryEngineBase$1.planarArea(w.hydratedAdapter,S(t),t,H)};q.planarLength=function(t,H){return A.geometryEngineBase$1.planarLength(w.hydratedAdapter,S(t),t,H)};q.relate=function(t,H,v){return A.geometryEngineBase$1.relate(w.hydratedAdapter,S(t),t,H,v)};q.rotate=function(t,H,v){var G;if(null==t)throw Error("Illegal Argument Exception");const y=t.spatialReference;
v=null!=(G=v)?G:I(t);if(null==v)throw Error("Illegal Argument Exception");t=t.constructor.fromJSON(A.geometryEngineBase$1.rotate(t,H,v));t.spatialReference=y;return t};q.simplify=function(t){return A.geometryEngineBase$1.simplify(w.hydratedAdapter,S(t),t)};q.symmetricDifference=function(t,H){return A.geometryEngineBase$1.symmetricDifference(w.hydratedAdapter,S(t),t,H)};q.touches=function(t,H){return A.geometryEngineBase$1.touches(w.hydratedAdapter,S(t),t,H)};q.union=function(t,H=null){return A.geometryEngineBase$1.union(w.hydratedAdapter,
S(t),t,H)};q.within=function(t,H){return A.geometryEngineBase$1.within(w.hydratedAdapter,S(t),t,H)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/geometryEngineBase":function(){define(["exports","./_commonjsHelpers"],function(q,A){A=A.createCommonjsModule(function(S,I){I=function(){function t(f){if("number"===typeof f)return fa.Uc.hh(f);if(null==f)return null;if(null!=Ka[f])return fa.Uc.hh(Ka[f]);throw Error("Unrecognised Unit Type");}function H(f){if("number"===typeof f)return fa.Uc.hh(f);
if(null==f)return null;if(null!=Ha[f])return fa.Uc.hh(Ha[f]);throw Error("Unrecognised Unit Type");}function v(f){if(f)switch(f){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function G(f,R,l,c){if(null==l||l.u())return null;switch(l.F()){case fa.In.Point:return f.exportPoint(R,l,c);case fa.In.Polygon:return f.exportPolygon(R,l,c);case fa.In.Polyline:return f.exportPolyline(R,l,c);case fa.In.MultiPoint:return f.exportMultipoint(R,
l,c);case fa.In.Envelope:return f.exportExtent(R,l,c)}return null}function y(f,R,l,c){if(l.F()!==fa.In.Point)throw Error("Geometry not Point");return f.exportPoint(R,l,c)}function u(f){var R=f.wkid;f=f.wkt;var l=La.get(R||f);null==l&&(-1!==R&&null!=R?(l=fa.je.create(R),La.set(R,l)):f&&(l=fa.je.AQ(f),La.set(f,l)));return l}function D(f){var R;if(null==f)return null;var l=u(f);f=l.Ld();l=l.co();return R={},R.tolerance=l,R.unitType=null==f?-1:f.nd,R.unitID=null==f?-1:f.xc(),R.unitBaseFactor=null==f?
0:f.gi,R.unitSquareDerivative=null==f?0:fa.Uc.MG(f).xc(),R}function B(f,R,l,c){if(null==l)return null;l=fa.bc.clip(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R));return G(f,Ia,l,R)}function M(f,R,l,c){l=fa.bc.jl(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R));c=[];for(var a=0;a<l.length;a++)c.push(G(f,Ia,l[a],R));return c}function N(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.contains(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,
c),u(R))}function z(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.MQ(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function E(f,R,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.vb(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R),t(a))}function r(f,R,l,c){return null==l&&null!=c||null==c&&null!=l?!1:fa.bc.Ib(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function C(f,R,l,c){if(null==
l||null==c)throw Error("Illegal Argument Exception");return fa.bc.mU(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function O(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.touches(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function P(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.XZ(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function T(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");
return fa.bc.dR(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function F(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.WV(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R))}function K(f,R,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");return fa.bc.hC(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R),a)}function J(f,R,l){if(null==l)throw Error("Illegal Argument Exception");return fa.bc.AU(f.convertToGEGeometry(Ia,
l),u(R))}function L(f,R,l){if(null==l)throw Error("Illegal Argument Exception");l=fa.bc.MC(f.convertToGEGeometry(Ia,l),u(R));return G(f,Ia,l,R)}function Y(f,R,l,c){void 0===c&&(c=!1);if(null==l)throw Error("Illegal Argument Exception");if(Array.isArray(l)){var a=c,b=[];for(c=0;c<l.length;c++)b.push(f.convertToGEGeometry(Ia,l[c]));l=fa.bc.tQ(b,a);a=Array(l.length);for(c=0;c<l.length;c++)a[c]=G(f,Ia,l[c],R);return a}c=fa.bc.sQ(f.convertToGEGeometry(Ia,l),u(R));return G(f,Ia,c,R)}function W(f,R,l,c){if(null==
l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(f.convertToGEGeometry(Ia,l[b]));l=fa.bc.aR(a,f.convertToGEGeometry(Ia,c),u(R));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=G(f,Ia,l[b],R);return c}b=fa.bc.tm(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R));return G(f,Ia,b,R)}function aa(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(f.convertToGEGeometry(Ia,
l[b]));l=fa.bc.AZ(a,f.convertToGEGeometry(Ia,c),u(R));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=G(f,Ia,l[b],R);return c}b=fa.bc.tp(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R));return G(f,Ia,b,R)}function oa(f,R,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(f.convertToGEGeometry(Ia,l[b]));l=fa.bc.kU(a,f.convertToGEGeometry(Ia,c),u(R));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=G(f,Ia,l[b],R);return c}b=
fa.bc.Ia(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),u(R));return G(f,Ia,b,R)}function ta(f,R,l,c){if(null==l)return null;var a=[];if(Array.isArray(l)){if(0===l.length)return null;for(c=0;c<l.length;c++)a.push(f.convertToGEGeometry(Ia,l[c]))}else a.push(f.convertToGEGeometry(Ia,l)),null!=c&&a.push(f.convertToGEGeometry(Ia,c));return G(f,Ia,fa.bc.SZ(a,u(R)),R)}function la(f,R,l,c,a,b,d,e){var g=0;if(null!=b)switch(b){case "round":g=0;break;case "bevel":g=1;break;case "miter":g=2;break;
case "square":g=3}if(Array.isArray(l)){if(null==l)f=null;else if(0===l.length)f=[];else{var h=[];for(b=0;b<l.length;b++)h.push(f.convertToGEGeometry(Ia,l[b]));l=fa.bc.UV(h,u(R),c,g,d,e,t(a));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=G(f,Ia,l[b],R);f=c}return f}l=fa.bc.offset(f.convertToGEGeometry(Ia,l),u(R),c,g,d,e,t(a));return G(f,Ia,l,R)}function X(f,R,l,c,a,b){void 0===b&&(b=!1);if(Array.isArray(l)){if(!Array.isArray(c)){for(var d=[],e=0;e<l.length;e++)d.push(c);c=d}if(c.length!=l.length){if(0==
c.length)throw Error("Illegal Argument Exception");d=[];var g=0;for(e=0;e<l.length;e++)void 0===c[e]?d.push(g):(d.push(c[e]),g=c[e]);c=d}return ka(f,R,l,c,a,!1,b,"geodesic",NaN)}l=fa.bc.buffer(f.convertToGEGeometry(Ia,l),u(R),c,t(a),!1,0,NaN);return G(f,Ia,l,R)}function U(f,R,l,c,a,b,d,e){if(Array.isArray(l)){if(!Array.isArray(c)){for(var g=[],h=0;h<l.length;h++)g.push(c);c=g}if(c.length!==l.length){if(0===c.length)throw Error("Illegal Argument Exception");g=[];var k=0;for(h=0;h<l.length;h++)void 0===
c[h]?g.push(k):(g.push(c[h]),k=c[h]);c=g}return ka(f,R,l,c,a,!0,b,d,e)}void 0===d&&(d=NaN);l=fa.bc.buffer(f.convertToGEGeometry(Ia,l),u(R),c,t(a),!0,v(b),d);return G(f,Ia,l,R)}function ka(f,R,l,c,a,b,d,e,g){void 0===g&&(g=NaN);if(null==l)return null;if(0===l.length)return[];for(var h=[],k=0;k<l.length;k++)h.push(f.convertToGEGeometry(Ia,l[k]));l=fa.bc.XO(h,u(R),c,t(a),b,d,v(e),g);c=Array(l.length);for(k=0;k<l.length;k++)c[k]=G(f,Ia,l[k],R);return c}function sa(f,R,l,c,a){var b;void 0===a&&(a=!0);
l=fa.bc.Xz(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),a);return b={},b.coordinate=y(f,Ia,l.Lz(),R),b.distance=l.Oz(),b.isRightSide=l.AA(),b.vertexIndex=l.Ua(),b.isEmpty=l.u(),b}function qa(f,R,l,c){var a;l=fa.bc.Yz(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c));return a={},a.coordinate=y(f,Ia,l.Lz(),R),a.distance=l.Oz(),a.isRightSide=l.AA(),a.vertexIndex=l.Ua(),a.isEmpty=l.u(),a}function na(f,R,l,c,a,b){var d;l=fa.bc.Zz(f.convertToGEGeometry(Ia,l),f.convertToGEGeometry(Ia,c),
a,b);c=[];for(a=0;a<l.length;a++)!1===l[a].u()&&c.push((d={},d.coordinate=y(f,Ia,l[a].Lz(),R),d.distance=l[a].Oz(),d.isRightSide=l[a].AA(),d.vertexIndex=l[a].Ua(),d.isEmpty=l[a].u(),d));return c}function pa(f,R,l,c,a,b){l=fa.bc.bS(f.convertToGEGeometry(Ia,l),u(R),c,a,t(b));return G(f,Ia,l,R)}function va(f,R,l,c,a){l=fa.bc.rs(f.convertToGEGeometry(Ia,l),u(R),c,t(a));return G(f,Ia,l,R)}function ja(f,R,l,c,a,b){void 0===b&&(b=0);l=fa.bc.Bz(f.convertToGEGeometry(Ia,l),u(R),c,t(a),b);return G(f,Ia,l,R)}
function ua(f,R,l,c){if(null==l)throw Error("Illegal Argument Exception");return fa.bc.bW(f.convertToGEGeometry(Ia,l),u(R),H(c))}function Aa(f,R,l,c){if(null==l)throw Error("Illegal Argument Exception");return fa.bc.cW(f.convertToGEGeometry(Ia,l),u(R),t(c))}function Ga(f,R,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return fa.bc.hS(f.convertToGEGeometry(Ia,l),u(R),H(c),v(a))}function Na(f,R,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return fa.bc.lS(f.convertToGEGeometry(Ia,
l),u(R),t(c),v(a))}function Oa(f){fa.VM.bind(f)}function Z(f,R,l,c,a){var b=null,d=null;if(c){if(!a)throw fa.f.I("AOI missing Spatial Reference");b=f.convertToGEGeometry(Ia,c);d=u(a).mh()}f=fa.Mu.nT(u(R).mh(),u(l).mh(),b,d);return null!==f?f:null}function ha(f,R,l,c,a){var b=null,d=null;if(c){if(!a)throw fa.f.I("AOI missing Spatial Reference");b=f.convertToGEGeometry(Ia,c);d=u(a).mh()}return fa.Mu.oT(u(R).mh(),u(l).mh(),b,d)}function Ca(f,R,l,c,a){void 0===a&&(a=null);if(!1===this.z_)throw Error("Projection Engine must be enabled using enableProjection");
if(0===R.length)return[];if(a){var b=a.getCachedGeTransformation(l,c);if(!b)a:{b=a;a=null;if(b){var d=b.getGTListEntry();if(null!==d){a=new fa.hy(null);for(var e=0,g=d.steps;e<g.length;e++){d=g[e];var h=new fa.Hn(d.geogtran);d.isInverse&&h.Xs();a.add(h)}a=fa.Ur.os(u(l).mh(),u(c).mh(),a);b.assignCachedGe(l,c,a);b=a;break a}}if(null===a&&b&&b.steps&&0<b.steps.length){a=new fa.hy(null);e=0;for(g=b.steps;e<g.length;e++)d=g[e],-1!=d.wkid&&null!=d.wkid?a.add(fa.Hn.create(d.wkid,d.isInverse)):a.add(fa.Hn.LF(d.wkt,
d.isInverse));a=fa.Ur.os(u(l).mh(),u(c).mh(),a);b.assignCachedGe(l,c,a);b=a}else b=fa.Ur.os(u(l).mh(),u(c).mh(),a)}}else b=fa.Ur.os(u(l).mh(),u(c).mh(),null);l=[];for(d=0;d<R.length;d++)a=R[d],l.push(Da(f,a,c,b));return l}function Da(f,R,l,c){R=fa.bc.$g(f.convertToGEGeometry(Ia,R),c);return G(f,Ia,R,l)}var Ja,Fa=this&&this.__extends||function(){function f(R,l){f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=
a[b])};return f(R,l)}return function(R,l){function c(){this.constructor=R}f(R,l);R.prototype=null===l?Object.create(l):(c.prototype=l.prototype,new c)}}(),fa;(function(f){(function(l){l[l.Unknown=0]="Unknown";l[l.Point=33]="Point";l[l.Line=322]="Line";l[l.Envelope=197]="Envelope";l[l.MultiPoint=550]="MultiPoint";l[l.Polyline=1607]="Polyline";l[l.Polygon=1736]="Polygon"})(f.In||(f.In={}));(function(l){l[l.enumMild=0]="enumMild";l[l.enumMedium=1]="enumMedium";l[l.enumHot=2]="enumHot"})(f.gM||(f.gM=
{}));var R=function(){function l(){this.description=null;this.FB=0}l.prototype.F=function(){return 0};l.prototype.pb=function(){return-1};l.prototype.rg=function(c){this.vc();c!=this.description&&this.Ln(c)};l.prototype.Ln=function(){};l.prototype.Tl=function(c){this.vc();c!=this.description&&(c=f.ke.SS(this.description,c),c!=this.description&&this.Ln(c))};l.prototype.hasAttribute=function(c){return this.description.hasAttribute(c)};l.prototype.le=function(c){this.vc();this.description.hasAttribute(c)||
(c=f.ke.RS(this.description,c),this.Ln(c))};l.prototype.Qf=function(){return null};l.prototype.qn=function(){};l.prototype.s=function(){};l.prototype.ip=function(){};l.prototype.Zb=function(c){this.s(c)};l.prototype.u=function(){return!0};l.prototype.Ka=function(){};l.prototype.Qc=function(){};l.prototype.Ga=function(){return null};l.prototype.copyTo=function(){};l.prototype.Pe=function(){return 0};l.prototype.Pb=function(){return 0};l.prototype.VG=function(){return this.hasAttribute(1)};l.Se=function(c){return((c&
192)>>6)+1>>1};l.lo=function(c){return 0!=(c&32)};l.m0=function(c){return 0!=(c&64)};l.nU=function(c){return 0!=(c&128)};l.Ic=function(c){return 0!=(c&256)};l.Rg=function(c){return 0!=(c&512)};l.Bc=function(c){return 0!=(c&1024)};l.prototype.Cf=function(){var c=this.Ga();this.copyTo(c);return c};l.prototype.sg=function(){return null};l.$d=function(c){var a=c.Ga();c.copyTo(a);return a};l.prototype.vc=function(){0<=this.FB&&(this.FB+=2147483649)};l.fy=function(c){var a=c.F();if(l.Rg(a))return c.D();
if(c.u())return 0;if(197==a)return 4;if(33==a)return 1;if(l.Ic(a))return 2;throw f.f.Y("missing type");};return l}();f.R=R})(fa||(fa={}));(function(f){var R=function(){function l(){this.y=this.x=0}l.construct=function(c,a){var b=new l;b.x=c;b.y=a;return b};l.gl=function(c){var a=new l;a.x=c.x;a.y=c.y;return a};l.prototype.ka=function(c,a){this.x=c;this.y=a};l.prototype.K=function(c){this.x=c.x;this.y=c.y};l.prototype.wq=function(c,a){return this.x===c&&this.y===a};l.prototype.xA=function(c){return 2.220446049250313E-16>=
Math.abs(this.x-c.x)&&2.220446049250313E-16>=Math.abs(this.y-c.y)};l.prototype.qb=function(c){return this.x===c.x&&this.y===c.y};l.prototype.Ib=function(c){return c==this?!0:c instanceof l?this.x==c.x&&this.y==c.y:!1};l.prototype.sub=function(c){this.x-=c.x;this.y-=c.y};l.prototype.tc=function(c,a){this.x=c.x-a.x;this.y=c.y-a.y};l.prototype.add=function(c,a){void 0!==a?(this.x=c.x+a.x,this.y=c.y+a.y):(this.x+=c.x,this.y+=c.y)};l.prototype.lr=function(){this.x=-this.x;this.y=-this.y};l.prototype.Ut=
function(c){this.x=-c.x;this.y=-c.y};l.prototype.hU=function(c,a,b){this.x=c.x*(1-b)+a.x*b;this.y=c.y*(1-b)+a.y*b};l.prototype.mu=function(c,a){this.x=this.x*c+a.x;this.y=this.y*c+a.y};l.prototype.mY=function(c,a,b){this.x=a.x*c+b.x;this.y=a.y*c+b.y};l.prototype.scale=function(c){this.x*=c;this.y*=c};l.prototype.compare=function(c){return this.y<c.y?-1:this.y>c.y?1:this.x<c.x?-1:this.x>c.x?1:0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x=1,this.y=0);this.x/=c;this.y/=c};l.prototype.length=
function(){return Math.sqrt(this.x*this.x+this.y*this.y)};l.prototype.En=function(){return this.x*this.x+this.y*this.y};l.vb=function(c,a){return Math.sqrt(this.oc(c,a))};l.uz=function(c,a,b,d){c-=b;a-=d;return Math.sqrt(c*c+a*a)};l.prototype.Vh=function(c){return this.x*c.x+this.y*c.y};l.prototype.PD=function(c){return Math.abs(this.x*c.x)+Math.abs(this.y*c.y)};l.prototype.Di=function(c){return this.x*c.y-this.y*c.x};l.prototype.lu=function(c,a){var b=-this.x*a+this.y*c;this.x=this.x*c+this.y*a;
this.y=b};l.prototype.ow=function(){var c=this.x;this.x=-this.y;this.y=c};l.prototype.yH=function(c){this.x=-c.y;this.y=c.x};l.prototype.ur=function(){var c=this.x;this.x=this.y;this.y=-c};l.prototype.iE=function(){this.y=this.x=NaN};l.prototype.Ey=function(){return isNaN(this.x)};l.prototype.Wu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};l.Wr=function(c,a){var b=c.Wu(),d=a.Wu();return d==b?(c=c.Di(a),0>c?1:0<c?-1:0):b<d?-1:1};l.I_=function(c,a){return l.Wr(c,a)};l.oc=function(c,
a){var b=c.x-a.x;c=c.y-a.y;return b*b+c*c};l.prototype.toString=function(){return"("+this.x+" , "+this.y+")"};l.prototype.Tc=function(){this.y=this.x=NaN};l.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)};l.prototype.ZN=function(){return this.Ey()?NaN:Math.abs(this.x)>=Math.abs(this.y)?Math.abs(this.x):Math.abs(this.y)};l.prototype.offset=function(c,a){var b=l.vb(c,a),d=l.construct(this.x,this.y);if(0==b)return l.vb(d,c);var e=new l;e.K(a);e.sub(c);d.sub(c);return d.Di(e)/b};l.fp=
function(c,a,b){var d=new f.Wb;d.set(a.x);d.sub(c.x);var e=new f.Wb;e.set(b.y);e.sub(c.y);var g=new f.Wb;g.set(a.y);g.sub(c.y);var h=new f.Wb;h.set(b.x);h.sub(c.x);d.Gg(e);g.Gg(h);d.sub(g);if(!d.Ys())return b=d.value(),0>b?-1:0<b?1:0;d=new f.xp(a.x);e=new f.xp(c.x);g=new f.xp(c.y);d=d.Rt(e);c=new f.xp(b.y);c=c.Rt(g);a=new f.xp(a.y);a=a.Rt(g);b=new f.xp(b.x);b=b.Rt(e);d=d.Hr(c);a=a.Hr(b);d=d.Hr(a);return d.JU()?-1:d.AT()?1:0};l.prototype.fc=function(){return f.L.Aj(f.L.Aj())};return l}();f.b=R})(fa||
(fa={}));(function(f){var R=function(){function l(c){this.jz=this.vu=0;this.tZ=c}l.prototype.reset=function(){this.jz=this.vu=0};l.prototype.add=function(c){c-=this.jz;var a=this.vu+c;this.jz=a-this.vu-c;this.vu=a};l.prototype.sub=function(c){this.add(-c)};l.prototype.Dm=function(){return this.tZ+this.vu};return l}();f.ky=R;f.Tb=function(){function l(){}l.hl=function(c,a){return 0<=a?Math.abs(c):-Math.abs(c)};l.sign=function(c){return 0>c?-1:0<c?1:0};l.ZL=function(c){return c-360*Math.floor(c/360)};
l.round=function(c){return Math.floor(c+.5)};l.Wx=function(c){return c*c};l.Aq=function(c,a,b){return.5>=b?c+(a-c)*b:a-(a-c)*(1-b)};l.AH=function(c,a,b,d){.5>=b?(d.x=c.x+(a.x-c.x)*b,d.y=c.y+(a.y-c.y)*b):(d.x=a.x-(a.x-c.x)*(1-b),d.y=a.y-(a.y-c.y)*(1-b))};l.HU=function(c,a,b,d,e,g){.5>=e?(g.x=c+(b-c)*e,g.y=a+(d-a)*e):(g.x=b-(b-c)*(1-e),g.y=d-(d-a)*(1-e))};return l}()})(fa||(fa={}));(function(f){var R=function(l){function c(){var a=l.call(this)||this;a.ra=0;a.na=0;a.pa=0;a.ma=0;a.ia=null;return a}Fa(c,
l);c.prototype.ac=function(){return f.b.construct(this.ra,this.na)};c.prototype.qq=function(a){a.x=this.ra;a.y=this.na};c.prototype.Fc=function(a){this.pm(0,a)};c.prototype.GC=function(a,b){this.pm(0,f.b.construct(a,b))};c.prototype.jp=function(a){this.SD(0,a)};c.prototype.setStart=function(a){this.fE(0,a)};c.prototype.Ks=function(a,b){return this.Pd(0,a,b)};c.prototype.Qx=function(a,b,d){this.Nn(0,a,b,d)};c.prototype.wc=function(){return f.b.construct(this.pa,this.ma)};c.prototype.vs=function(a){a.x=
this.pa;a.y=this.ma};c.prototype.Sc=function(a){this.pm(1,a)};c.prototype.am=function(a,b){this.pm(1,f.b.construct(a,b))};c.prototype.hp=function(a){this.SD(1,a)};c.prototype.setEnd=function(a){this.fE(1,a)};c.prototype.us=function(a,b){return this.Pd(1,a,b)};c.prototype.Hx=function(a,b,d){this.Nn(1,a,b,d)};c.prototype.pb=function(){return 1};c.prototype.u=function(){return this.Ac()};c.prototype.Ka=function(){};c.prototype.Pe=function(){return 0};c.prototype.Ia=function(a,b,d,e,g){return this.SN(a,
b,d,e,g)};c.prototype.isIntersecting=function(a,b){return 0!=this.Zr(a,b,!1)};c.prototype.Zs=function(a,b){return this.Xu(a,b,!1)};c.prototype.Xu=function(){return null};c.prototype.Ac=function(){return!1};c.prototype.Hy=function(a){this.vc();if(null==this.ia&&0<a)this.ia=f.L.Xf(2*a);else if(null!=this.ia&&this.ia.length<2*a){for(var b=this.ia.slice(0),d=this.ia.length;d<2*a;d++)b[d]=0;this.ia=b}};c.nN=function(a,b,d){if(0<d)var e=0;for(var g=0;g<d;g++)b[0+e]=a[0],e++};c.prototype.pm=function(a,b){0!=
a?(this.pa=b.x,this.ma=b.y):(this.ra=b.x,this.na=b.y)};c.prototype.Ln=function(a){if(null!=this.ia){for(var b=f.ke.ox(a,this.description),d=[],e=c.Mg(this.description,0),g=c.Mg(this.description,1),h=c.Mg(a,0),k=c.Mg(a,1),m=0,n=1,p=a.Ca;n<p;n++){var x=a.jd(n),Q=f.oa.Sa(x);if(-1==b[n]){var V=f.oa.me(x);for(x=0;x<Q;x++)d[h+m]=V,d[k+m]=V,m++}else for(V=this.description.dk(b[n])-2,x=0;x<Q;x++)d[h+m]=this.ia[e+V],d[k+m]=this.ia[g+V],m++,V++}this.ia=d}this.description=a};c.prototype.SD=function(a,b){if(this.Ac())throw f.f.Y("empty geometry");
b.rg(this.description);b.Ac()&&b.Mp();for(var d=0;d<this.description.Ca;d++)for(var e=this.description.Jd(d),g=0,h=f.oa.Sa(e);g<h;g++){var k=this.Pd(a,e,g);b.setAttribute(e,g,k)}};c.prototype.fE=function(a,b){this.vc();if(b.Ac())throw f.f.Y("empty geometry");for(var d=b.description,e=0,g=d.Ca;e<g;e++)for(var h=d.Jd(e),k=f.oa.Sa(h),m=0;m<k;m++){var n=b.Rc(h,m);this.Nn(a,h,m,n)}};c.prototype.Pd=function(a,b,d){if(this.Ac())throw f.f.Y("This operation was performed on an Empty Geometry.");if(0==b)return 0!=
a?0!=d?this.ma:this.pa:0!=d?this.na:this.ra;if(d>=f.oa.Sa(b))throw f.f.Gd();var e=this.description.Yf(b);return 0<=e?(null!=this.ia&&this.Hy(this.description.Ge.length-2),this.ia[c.Mg(this.description,a)+this.description.dk(e)-2+d]):f.oa.me(b)};c.prototype.Nn=function(a,b,d,e){this.vc();if(d>=f.oa.Sa(b))throw f.f.Gd();var g=this.description.Yf(b);0>g&&(this.le(b),g=this.description.Yf(b));0==b?0!=a?0!=d?this.ma=e:this.pa=e:0!=d?this.na=e:this.ra=e:(null==this.ia&&this.Hy(this.description.Ge.length-
2),this.ia[c.Mg(this.description,a)+this.description.dk(g)-2+d]=e)};c.prototype.copyTo=function(a){if(a.F()!=this.F())throw f.f.I();a.description=this.description;a.Hy(this.description.Ge.length-2);c.nN(this.ia,a.ia,2*(this.description.Ge.length-2));a.ra=this.ra;a.na=this.na;a.pa=this.pa;a.ma=this.ma;a.vc();this.Hp(a)};c.prototype.Qf=function(a,b){var d=new f.uc;if(this.Ac())return d.Ka(),d;d.fa=this.Pd(0,a,b);d.ja=d.fa;d.Sk(this.Pd(1,a,b));return d};c.prototype.QJ=function(a){this.Ac()?a.Ka():(a.fa=
this.Pd(0,0,0),a.ja=a.fa,a.Sk(this.Pd(1,0,0)))};c.prototype.zx=function(a,b){b.rg(this.description);b.nb(this.cc(a));for(var d=1,e=this.description.Ca;d<e;d++)for(var g=this.description.Jd(d),h=f.oa.Sa(g),k=0;k<h;k++){var m=this.Rc(a,g,k);b.setAttribute(g,k,m)}};c.prototype.NN=function(a){if(this.description!=a.description||this.ra!=a.ra||this.pa!=a.pa||this.na!=a.na||this.ma!=a.ma)return!1;for(var b=0;b<2*(this.description.Ge.length-2);b++)if(this.ia[b]!=a.ia[b])return!1;return!0};c.prototype.nH=
function(){return this.ra==this.pa&&this.na==this.ma};c.prototype.reverse=function(){var a=this.ra;this.ra=this.pa;this.pa=a;a=this.na;this.na=this.ma;this.ma=a;a=1;for(var b=this.description.Ca;a<b;a++)for(var d=this.description.jd(a),e=0,g=f.oa.Sa(d);e<g;e++){var h=this.Pd(0,d,e),k=this.Pd(1,d,e);this.Nn(0,d,e,k);this.Nn(1,d,e,h)}};c.prototype.Zr=function(a,b,d){var e=a.F();switch(this.F()){case 322:if(322==e)return f.zb.WN(this,a,b,d);throw f.f.za();default:throw f.f.za();}};c.prototype.SN=function(a,
b,d,e,g){var h=a.F();switch(this.F()){case 322:if(322==h)return f.zb.Dy(this,a,b,d,e,g);throw f.f.za();default:throw f.f.za();}};c.prototype.yy=function(){return null};c.Mg=function(a,b){return b*(a.Ge.length-2)};c.prototype.cc=function(a,b){if(void 0===b)return b=new f.b,this.cc(a,b),b;f.Tb.HU(this.ra,this.na,this.pa,this.ma,a,b)};c.prototype.ae=function(){return null};c.prototype.QG=function(){return null};c.prototype.uq=function(){return null};c.prototype.Qg=function(){return null};c.prototype.jo=
function(){return null};c.prototype.qg=function(){return null};c.prototype.zy=function(a,b){return void 0!==b?this.by(b)-this.by(a):this.by(a)};c.prototype.Hp=function(){};c.prototype.jl=function(){return null};c.prototype.jh=function(){};c.prototype.Rc=function(){return null};c.prototype.Te=function(){return null};c.prototype.by=function(){return null};c.prototype.zH=function(){return null};c.prototype.vb=function(a,b){if(!b&&0!=this.Zr(a,0,!1))return 0;b=1.7976931348623157E308;var d=this.ac(),e=
a.ae(d,!1);d.sub(a.cc(e));d=d.length();d<b&&(b=d);d=this.wc();e=a.ae(d,!1);d.sub(a.cc(e));d=d.length();d<b&&(b=d);d=a.ac();e=this.ae(d,!1);d.sub(this.cc(e));d=d.length();d<b&&(b=d);d=a.wc();e=this.ae(d,!1);d.sub(this.cc(e));d=d.length();d<b&&(b=d);return b};c.prototype.sg=function(){return f.yi.qm(this,null)};return c}(f.R);f.zD=R})(fa||(fa={}));new fa.b;(function(f){(function(l){l[l.Unknown=-1]="Unknown";l[l.Not=0]="Not";l[l.Weak=1]="Weak";l[l.Strong=2]="Strong"})(f.iM||(f.iM={}));(function(l){l[l.DirtyIsKnownSimple=
1]="DirtyIsKnownSimple";l[l.IsWeakSimple=2]="IsWeakSimple";l[l.IsStrongSimple=4]="IsStrongSimple";l[l.DirtyOGCFlags=8]="DirtyOGCFlags";l[l.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";l[l.DirtyExactIntervals=64]="DirtyExactIntervals";l[l.DirtyLooseIntervals=128]="DirtyLooseIntervals";l[l.DirtyIntervals=192]="DirtyIntervals";l[l.DirtyIsEnvelope=256]="DirtyIsEnvelope";l[l.DirtyLength2D=512]="DirtyLength2D";l[l.DirtyRingAreas2D=1024]="DirtyRingAreas2D";l[l.DirtyCoordinates=1993]="DirtyCoordinates";
l[l.DirtyAllInternal=65535]="DirtyAllInternal";l[l.DirtyAll=16777215]="DirtyAll"})(f.VL||(f.VL={}));var R=function(l){function c(){var a=l.call(this)||this;a.Sm=65535;a.sa=0;a.Vg=-1;a.ib=null;return a}Fa(c,l);c.prototype.Hp=function(){};c.prototype.Gy=function(){};c.prototype.Oy=function(){};c.prototype.D=function(){return this.sa};c.prototype.u=function(){return this.Ac()};c.prototype.Ac=function(){return 0==this.sa};c.prototype.ek=function(a){return 0!=(this.Sm&a)};c.prototype.Vf=function(a,b){this.Sm=
b?this.Sm|a:this.Sm&~a};c.prototype.rc=function(){this.ek(32)&&this.lO()};c.prototype.xu=function(){if(this.Ac())throw f.f.Y("This operation was performed on an Empty Geometry.");};c.prototype.ne=function(a,b){if(0>a||a>=this.sa)throw f.f.Y("index out of bounds");this.rc();b.rg(this.description);b.u()&&b.Mp();for(var d=0;d<this.description.Ca;d++)for(var e=this.description.Jd(d),g=0,h=f.oa.Sa(e);g<h;g++){var k=this.va[d].Ig(h*a+g);b.setAttribute(e,g,k)}};c.prototype.qu=function(a,b){this.rc();for(var d=
b.description,e=0;e<d.Ca;e++)for(var g=d.Jd(e),h=f.oa.Sa(g),k=0;k<h;k++){var m=b.Rc(g,k);this.setAttribute(g,a,k,m)}};c.prototype.w=function(a,b){if(0>a||a>=this.D())throw f.f.Gd();this.rc();this.va[0].mc(2*a,b)};c.prototype.xa=function(a){var b=new f.b;this.w(a,b);return b};c.prototype.Hc=function(a,b){this.va[0].mc(2*a,b)};c.prototype.nb=function(a,b,d){if(0>a||a>=this.sa)throw f.f.Gd();this.rc();var e=this.va[0];void 0!==d?(e.write(2*a,b),e.write(2*a+1,d)):e.Au(2*a,b);this.Oc(1993)};c.prototype.kA=
function(){if(void 0>=this.D())throw f.f.Gd();this.rc();var a=this.va[0],b=new f.Id;b.x=a.read(NaN);b.y=a.read(NaN);b.z=this.hasAttribute(1)?this.va[1].Ig(void 0):f.oa.me(1);return b};c.prototype.LC=function(a){if(0>a||a>=this.D())throw f.f.Gd();this.le(1);this.rc();this.Oc(1993);var b=this.va[0];b.write(2*a,(void 0).x);b.write(2*a+1,(void 0).y);this.va[1].Mr(a,(void 0).z)};c.prototype.Rc=function(a,b,d){if(0>b||b>=this.sa)throw f.f.Gd();var e=f.oa.Sa(a);if(d>=e)throw f.f.Gd();this.rc();var g=this.description.Yf(a);
return 0<=g?this.va[g].Ig(b*e+d):f.oa.me(a)};c.prototype.lG=function(a,b){return this.Rc(a,b,void 0)};c.prototype.setAttribute=function(a,b,d,e){if(0>b||b>=this.sa)throw f.f.Gd();var g=f.oa.Sa(a);if(d>=g)throw f.f.Gd();this.le(a);this.rc();a=this.description.Yf(a);this.Oc(1993);this.va[a].Mr(b*g+d,e)};c.prototype.Va=function(a){this.xu();this.le(a);this.rc();return this.va[this.description.Yf(a)]};c.prototype.yn=function(a,b){if(null!=b&&f.oa.sl(a)!=b.sl())throw f.f.I();this.le(a);a=this.description.Yf(a);
null==this.va&&(this.va=f.Xc.gJ(this.description.Ca));this.va[a]=b;this.Oc(16777215)};c.prototype.Ln=function(a){var b=null;if(null!=this.va){var d=f.ke.ox(a,this.description);b=[];for(var e=0,g=a.Ca;e<g;e++)-1!=d[e]&&(b[e]=this.va[d[e]])}this.description=a;this.va=b;this.Vg=-1;this.Oc(16777215)};c.prototype.mE=function(a){this.bv(!0);a instanceof f.g?this.X.s(a):this.X.ip(a)};c.prototype.kO=function(a){this.bv(!1);a instanceof f.g?this.X.s(a):this.X.ip(a)};c.prototype.qn=function(a){this.bv(!0);
this.X.copyTo(a)};c.prototype.s=function(a){this.mE(a)};c.prototype.ip=function(a){this.mE(a)};c.prototype.Zb=function(a){this.kO(a)};c.prototype.Qf=function(a,b){var d=new f.uc;if(this.Ac())return d.Ka(),d;this.bv(!0);return this.X.Qf(a,b)};c.prototype.fc=function(){var a=this.description.fc();if(!this.Ac())for(var b=this.D(),d=0,e=this.description.Ca;d<e;d++)a=this.va[d].Un(a,0,b*f.oa.Sa(this.description.Jd(d)));return a};c.prototype.Ib=function(a){if(a==this)return!0;if(!(a instanceof c&&this.description.Ib(a.description))||
this.Ac()!=a.Ac())return!1;if(this.Ac())return!0;var b=this.D();if(b!=a.D())return!1;for(var d=0;d<this.description.Ca;d++){var e=this.description.jd(d),g=this.Va(e),h=a.Va(e);if(!g.Ib(h,0,b*f.oa.Sa(e)))return!1}return!0};c.prototype.copyTo=function(a){if(a.F()!=this.F())throw f.f.I();this.ND(a)};c.prototype.ND=function(a){this.rc();a.description=this.description;a.va=null;var b=this.description.Ca,d=null;if(null!=this.va){d=[];for(var e=0;e<b;e++)null!=this.va[e]&&(d[e]=this.va[e].qC(this.D()*f.oa.Sa(this.description.Jd(e))))}null!=
this.X?(a.X=this.X.Ga(),this.X.copyTo(a.X)):a.X=null;a.sa=this.sa;a.Sm=this.Sm;a.va=d;try{this.Hp(a)}catch(g){throw a.Ka(),f.f.Lu();}};c.prototype.hE=function(){this.sa=0;this.Vg=-1;this.va=null;this.Oc(16777215)};c.prototype.Oc=function(a){16777215==a&&(this.Vg=-1,this.Gy());this.Sm|=a;this.tN();this.vc()};c.prototype.bv=function(a){this.rc();if(this.ek(192))if(null==this.X?this.X=new f.Ih(this.description):this.X.rg(this.description),this.u())this.X.Ka();else{this.Ny(a);for(var b=1;b<this.description.Ca;b++)for(var d=
this.description.Jd(b),e=f.oa.Sa(d),g=this.va[b],h=0;h<e;h++){var k=new f.uc;k.Ka();for(var m=0;m<this.sa;m++){var n=g.Ig(m*e+h);k.Nb(n)}this.X.setInterval(d,h,k)}a&&this.Vf(192,!1)}};c.prototype.Ny=function(){this.X.Ka();for(var a=this.va[0],b=new f.b,d=0;d<this.sa;d++)a.mc(2*d,b),this.X.Nb(b)};c.prototype.Tn=function(a){a.Ka();for(var b=this.va[0],d=new f.b,e=0;e<this.sa;e++)b.mc(2*e,d),a.Nb(d)};c.prototype.lO=function(){if(this.Vg<this.sa){null==this.va&&(this.va=f.Xc.gJ(this.description.Ca));
this.Vg=2147483647;for(var a=0;a<this.description.Ca;a++){var b=this.description.Jd(a);if(null!=this.va[a]){var d=f.oa.Sa(b),e=f.L.truncate(this.va[a].size/d);e<this.sa&&(e=f.L.truncate(this.Vg>this.sa+5?(5*this.sa+3)/4:this.sa),this.va[a].resize(e*d,f.oa.me(b)));e<this.Vg&&(this.Vg=e)}else this.va[a]=f.Xc.JF(b,this.sa),this.Vg=this.sa}}this.Oy();this.Vf(32,!1)};c.prototype.bl=function(a){if(0>a)throw f.f.I();a!=this.sa&&(this.sa=a,this.Oc(65535))};c.prototype.rk=function(a){if(!this.ek(1)){if(!this.ek(2))return 0;
if(this.iV>=a)return this.ek(8)?1:2}return-1};c.prototype.Jg=function(a,b){this.iV=b;if(-1==a)this.Vf(1,!0),this.Vf(8,!0);else if(this.Vf(1,!1),this.Vf(8,!0),0==a)this.Vf(2,!1),this.Vf(4,!1);else if(1==a)this.Vf(2,!0),this.Vf(4,!1);else if(2==a)this.Vf(2,!0),this.Vf(4,!0);else throw f.f.Y("internal error.");};c.prototype.tN=function(){null!=this.ib&&(this.ib=null)};c.prototype.VD=function(a,b,d,e){if(0>a||a>=this.sa)throw f.f.Y("index out of bounds");if(0>b||b>=this.sa)throw f.f.Y("index out of bounds");
this.rc();e.rg(this.description);e.u()&&e.Mp();for(var g=0;g<this.description.Ca;g++)for(var h=this.description.Jd(g),k=0,m=f.oa.Sa(h);k<m;k++){var n=this.va[g].Ig(m*a+k),p=this.va[g].Ig(m*b+k);e.setAttribute(h,k,f.Tb.Aq(n,p,d))}};c.prototype.Yr=function(a,b){var d=this.va[0].i,e=d[2*a]-d[2*b];a=d[2*a+1]-d[2*b+1];return Math.sqrt(e*e+a*a)};c.prototype.Hh=function(a,b){if(0>a||a>=this.sa)throw f.f.Gd();if(b.u())throw f.f.I();this.rc();for(var d=b.description,e=0;e<d.Ca;e++)for(var g=d.jd(e),h=f.oa.Sa(g),
k=0;k<h;k++){var m=b.Rc(g,k);this.setAttribute(g,a,k,m)}};c.prototype.Su=function(){return null};c.prototype.lj=function(){return null};return c}(f.R);f.ly=R})(fa||(fa={}));(function(f){var R=function(){function l(){this.lb=this.so=null;this.fn=124234251;this.xw=!0;this.Ve=-1;this.lb=new f.ad(7);this.so=null}l.prototype.kp=function(c){this.so=c};l.prototype.bR=function(){this.xw=!1};l.prototype.Le=function(c){this.lb.Le(c)};l.prototype.qs=function(c){var a=this.lb.Ke();this.VY(a);this.YY(c,a);return a};
l.prototype.XQ=function(c){this.lb.hd(c)};l.prototype.addElement=function(c,a){-1==a&&(-1==this.Ve&&(this.Ve=this.qs(-1)),a=this.Ve);return this.rE(c,0,a)};l.prototype.wE=function(c){-1==this.Ve&&(this.Ve=this.qs(-1));return this.rE(c,1,this.Ve)};l.prototype.Qn=function(c){-1==this.Ve&&(this.Ve=this.qs(-1));var a=this.Ve,b=this.lb.i;if(-1==a||-1==b[7*a])return c=this.lb.Vl([-1,-1,-1,c,this.nl(),-1,-1]),b=this.lb.i,b[7*a]=c,this.Pp(-1,c,a,b),c;var d=-1==a?-1:b[7*a+2];c=this.lb.Vl([-1,-1,d,c,this.nl(),
-1,-1]);b=this.lb.i;b[7*d+1]=c;this.Uy(c,b);-1===b[7*c+2]&&(b[7*a]=c);this.Pp(-1,c,a,b);return c};l.prototype.ev=function(c,a,b,d){var e=-1;-1==e&&(-1==this.Ve&&(this.Ve=this.qs(-1)),e=this.Ve);var g=this.lb.i;if(-1==e||-1==g[7*e])return b=this.lb.Vl([-1,-1,-1,b,this.nl(),-1,-1]),g=this.lb.i,g[7*e]=b,this.Pp(-1,b,e,g),b;if(d){d=-1!=a?this.so.compare(this,b,a):-1;var h=-1!=c?this.so.compare(this,b,c):1}else d=-1,h=1;if(0==d||0==h)return g[7*e+3]=0==d?a:c,-1;(-1!=a&&-1!=c?this.fn>f.L.MB(this.fn)>>1:
-1!=a)?c=a:d=h;for(a=!0;;){if(0>d)if(h=g[7*c],-1!=h)c=h;else{d=c;b=this.lb.Vl([-1,-1,c,b,this.nl(),-1,-1]);g=this.lb.i;g[7*c]=b;break}else if(h=g[7*c+1],-1!=h)c=h;else{d=g[7*c+6];b=this.lb.Vl([-1,-1,c,b,this.nl(),-1,-1]);g=this.lb.i;g[7*c+1]=b;break}a&&(d*=-1,a=!1)}this.Uy(b,g);-1===g[7*b+2]&&(g[7*e]=b);this.Pp(d,b,e,g);return b};l.prototype.rG=function(){return this.wS(this.Ve)};l.prototype.zd=function(c,a){a=-1==a?this.Ve:a;this.xw?this.WQ(c,a):this.RZ(c,a)};l.prototype.search=function(c,a){for(a=
this.$v(a);-1!=a;){var b=this.so.compare(this,c,a);if(0==b)return a;a=0>b?this.rl(a):this.pq(a)}return-1};l.prototype.nY=function(c){for(var a=this.$v(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?a=this.rl(a):(b=a,a=this.pq(a))}return b};l.prototype.yK=function(c){for(var a=this.$v(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?(b=a,a=this.rl(a)):a=this.pq(a)}return b};l.prototype.ga=function(c){return this.lb.S(c,3)};l.prototype.rl=function(c){return this.lb.S(c,0)};
l.prototype.pq=function(c){return this.lb.S(c,1)};l.prototype.getParent=function(c){return this.lb.S(c,2)};l.prototype.hb=function(c){return this.lb.S(c,6)};l.prototype.Be=function(c){return this.lb.S(c,5)};l.prototype.sc=function(c){return-1==c?this.ql(this.Ve):this.ql(c)};l.prototype.Gc=function(c){return-1==c?this.Fs(this.Ve):this.Fs(c)};l.prototype.qT=function(c){return-1==c?this.NG(this.Ve):this.NG(c)};l.prototype.Tj=function(c,a){this.xC(c,a)};l.prototype.$v=function(c){return-1==c?this.JG(this.Ve):
this.JG(c)};l.prototype.clear=function(){this.lb.rj(!1);this.Ve=-1};l.prototype.size=function(c){return-1==c?this.LG(this.Ve):this.LG(c)};l.prototype.VO=function(c,a){for(var b=a[7*c],d=a[7*c+1],e=a[7*c+4];-1!=b||-1!=d;){var g=-1!=b?a[7*b+4]:2147483647;d=-1!=d?a[7*d+4]:2147483647;if(e<=Math.min(g,d))break;g<=d?this.wK(b,a):this.vK(c,a);b=a[7*c];d=a[7*c+1]}};l.prototype.Uy=function(c,a){if(this.xw)for(var b=a[7*c+4],d=a[7*c+2];-1!=d&&a[7*d+4]>b;)a[7*d]==c?this.wK(c,a):this.vK(d,a),d=a[7*c+2]};l.prototype.vK=
function(c,a){var b=a[7*c+1];a[7*b+2]=a[7*c+2];a[7*c+2]=b;var d=a[7*b];a[7*c+1]=d;-1!=d&&(a[7*d+2]=c);a[7*b]=c;d=a[7*b+2];-1!=d&&(a[7*d]==c?a[7*d]=b:a[7*d+1]=b)};l.prototype.wK=function(c,a){var b=a[7*c+2];a[7*c+2]=a[7*b+2];a[7*b+2]=c;var d=a[7*c+1];a[7*b]=d;-1!=d&&(a[7*d+2]=b);a[7*c+1]=b;d=a[7*c+2];-1!=d&&(a[7*d]===b?a[7*d]=c:a[7*d+1]=c)};l.prototype.Wk=function(c,a){this.lb.P(c,2,a)};l.prototype.BC=function(c,a){this.lb.P(c,0,a)};l.prototype.FC=function(c,a){this.lb.P(c,1,a)};l.prototype.EC=function(c,
a){this.lb.P(c,5,a)};l.prototype.Mx=function(c,a){this.lb.P(c,6,a)};l.prototype.aL=function(c,a){this.lb.P(a,0,c)};l.prototype.VY=function(c){this.lb.P(c,4,0)};l.prototype.YY=function(c,a){this.lb.P(a,5,c)};l.prototype.JG=function(c){return-1==c?-1:this.lb.S(c,0)};l.prototype.ql=function(c){return-1==c?-1:this.lb.S(c,1)};l.prototype.Fs=function(c){return-1==c?-1:this.lb.S(c,2)};l.prototype.wS=function(c){return-1==c?-1:this.lb.S(c,3)};l.prototype.LG=function(c){return-1==c?0:this.lb.S(c,4)};l.prototype.NG=
function(c){return this.lb.S(c,5)};l.prototype.vx=function(){return this.lb.Vl([-1,-1,-1,void 0,this.nl(),-1,-1])};l.prototype.ml=function(c){-1!=c&&this.lb.hd(c)};l.prototype.nl=function(){this.fn=f.L.MB(this.fn);return this.fn&1073741823};l.prototype.rE=function(c,a,b){var d=this.lb.i;if(-1==b||-1==d[7*b])return c=this.lb.Vl([-1,-1,-1,c,this.nl(),-1,-1]),d=this.lb.i,d[7*b]=c,this.Pp(-1,c,b,d),c;for(var e=-1==b?-1:d[7*b];;){var g=-1==a?1:this.so.compare(this,c,e);if(0>g)if(g=this.rl(e),-1!=g)e=g;
else{a=e;c=this.lb.Vl([-1,-1,e,c,this.nl(),-1,-1]);d=this.lb.i;d[7*e]=c;break}else{if(1==a&&0==g)return d[7*b+3]=e,-1;g=d[7*e+1];if(-1!=g)e=g;else{a=d[7*e+6];c=this.lb.Vl([-1,-1,e,c,this.nl(),-1,-1]);d=this.lb.i;d[7*e+1]=c;break}}}this.Uy(c,d);-1===d[7*c+2]&&(d[7*b]=c);this.Pp(a,c,b,d);return c};l.prototype.Pp=function(c,a,b,d){if(-1!=c){var e=d[7*c+5];d[7*c+5]=a}else e=-1==b?-1:d[7*b+2];d[7*a+5]=e;-1!=e&&(d[7*e+6]=a);d[7*a+6]=c;c==(-1==b?-1:d[7*b+1])&&(d[7*b+1]=a);-1==c&&(d[7*b+2]=a);d[7*b+4]=(-1==
b?0:d[7*b+4])+1};l.prototype.jC=function(c,a){var b=this.lb.i,d=b[7*c+5];c=b[7*c+6];-1!=d?b[7*d+6]=c:b[7*a+1]=c;-1!=c?b[7*c+5]=d:b[7*a+2]=d;b[7*a+4]=-1===a?-1:b[7*a+4]-1};l.prototype.RZ=function(c,a){this.jC(c,a);var b=this.rl(c),d=this.pq(c),e=this.getParent(c),g=c;if(-1!=b&&-1!=d){this.fn=f.L.MB(this.fn);var h=1073741823<this.fn?this.hb(c):this.Be(c),k=this.getParent(h)==c;this.lb.PC(c,h,0);this.lb.PC(c,h,1);this.lb.PC(c,h,2);-1!=e?this.rl(e)==c?this.BC(e,h):this.FC(e,h):this.aL(h,a);k?(b==h?(this.BC(h,
c),this.Wk(d,h)):d==h&&(this.FC(h,c),this.Wk(b,h)),this.Wk(c,h),e=h):(this.Wk(b,h),this.Wk(d,h),e=this.getParent(c),g=h);b=this.rl(c);d=this.pq(c);-1!=b&&this.Wk(b,c);-1!=d&&this.Wk(d,c)}b=-1!=b?b:d;-1==e?this.aL(b,a):this.rl(e)==g?this.BC(e,b):this.FC(e,b);-1!=b&&this.Wk(b,e);this.ml(c)};l.prototype.WQ=function(c,a){var b=this.lb.i;b[7*c+4]=2147483647;var d=-1,e=-1,g=-1===a?-1:b[7*a],h=g==c;h&&(d=b[7*g],e=b[7*g+1],-1==d&&-1==e)?(this.jC(g,a),this.ml(g),b[7*a]=-1):(this.VO(c,b),g=b[7*c+2],-1!=g&&
(b[7*g]==c?b[7*g]=-1:b[7*g+1]=-1),this.jC(c,a),this.ml(c),h&&(b[7*a]=-1==d||-1!=b[7*d+2]?e:d))};l.prototype.xC=function(c,a){this.lb.P(c,3,a)};return l}();f.bk=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a){void 0!==c&&this.H(c,a)}l.prototype.H=function(c,a){this.fa=c;this.ja=a;this.normalize()};l.prototype.isIntersecting=function(c){return this.fa<=c.fa?this.ja>=c.fa:c.ja>=this.fa};l.prototype.move=function(c){this.u()||(this.fa+=c,this.ja+=c)};l.prototype.normalize=function(){if(!isNaN(this.fa)){if(this.fa>
this.ja){var c=this.fa;this.fa=this.ja;this.ja=c}isNaN(this.ja)&&this.Ka()}};l.prototype.Ka=function(){this.ja=this.fa=NaN};l.prototype.u=function(){return isNaN(this.fa)};l.prototype.Nb=function(c){"number"===typeof c?this.u()?this.ja=this.fa=c:this.Sk(c):c.u()||(this.u()?(this.fa=c.fa,this.ja=c.ja):(this.fa>c.fa&&(this.fa=c.fa),this.ja<c.ja&&(this.ja=c.ja),this.fa>this.ja&&this.Ka()))};l.prototype.Sk=function(c){c<this.fa?this.fa=c:c>this.ja&&(this.ja=c)};l.prototype.contains=function(c){return"number"===
typeof c?c>=this.fa&&c<=this.ja:c.fa>=this.fa&&c.ja<=this.ja};l.prototype.Ia=function(c){this.u()||c.u()?this.Ka():(this.fa<c.fa&&(this.fa=c.fa),this.ja>c.ja&&(this.ja=c.ja),this.fa>this.ja&&this.Ka())};l.prototype.O=function(c){this.u()||(this.fa-=c,this.ja+=c,this.ja<this.fa&&this.Ka())};l.prototype.Mn=function(){return this.u()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.fa)+Math.abs(this.ja)+1)};l.prototype.uC=function(c,a){c>a?(this.fa=a,this.ja=c):(this.fa=c,this.ja=a)};l.prototype.ru=
function(c){return f.L.Yj(c,this.fa,this.ja)};l.prototype.N=function(){return this.ja-this.fa};l.prototype.hf=function(){return.5*(this.fa+this.ja)};l.prototype.Ib=function(c){return c==this?!0:c instanceof l?this.u()&&c.u()?!0:this.fa!=c.fa||this.ja!=c.ja?!1:!0:!1};l.prototype.fc=function(){return f.L.Aj(f.L.Aj())};return l}();f.uc=R})(fa||(fa={}));(function(f){var R=new f.uc,l=new f.uc,c=function(){return function(){this.ue=null;this.mb=-1;this.sb=new f.zb;this.aB=55555555;this.zw=this.Bw=!1;this.cg=
new f.uc;this.cg.uC(0,0)}}();f.s_=c;var a=function(){function b(d,e,g){this.a=d;this.Ok=NaN;this.CI=this.cr=0;this.DI=NaN;this.qa=e;this.fr=10*e;this.EI=this.FI=NaN;this.yg=!1;this.Qm=this.Ot=this.bp=this.Ft=this.Et=-1;this.SA=g;this.DB=new c;this.MI=new c;f.L.truncate(3*d.pd/2)}b.prototype.ZG=function(d,e,g,h){d.ue=null===h?null:h[g[5*e]];d.zw=null!=d.ue;d.zw||(h=g[5*e+2],-1!==h&&this.a.DX(g[5*e],g[5*h],d.sb),d.ue=d.sb,d.cg.uC(d.sb.ra,d.sb.pa),d.cg.ja+=this.qa,d.sb.hJ(),d.Bw=d.sb.ma==d.sb.na,d.Bw||
(d.aB=(d.sb.pa-d.sb.ra)/(d.sb.ma-d.sb.na)))};b.prototype.YP=function(d,e){var g=d.Zr(e,this.qa,!0);if(0!=g)return 2==g?this.wz():this.Ei();d.qq(ia);d.vs(ra);e.qq(xa);e.vs(ya);wa.ka(this.cr,this.Ok);ia.qb(xa)&&this.Ok==ia.y?0>ra.compare(ya)?wa.K(ra):wa.K(ya):ia.qb(ya)&&this.Ok==ia.y?0>ra.compare(xa)?wa.K(ra):wa.K(xa):xa.qb(ra)&&this.Ok==xa.y?0>ia.compare(ya)?wa.K(ia):wa.K(ya):ra.qb(ya)&&this.Ok==ra.y&&(0>ia.compare(xa)?wa.K(ia):wa.K(xa));return d.Te(wa.y,wa.x)<e.Te(wa.y,wa.x)?-1:1};b.prototype.WP=
function(d,e){if(d.sb.na==e.sb.na&&d.sb.ra==e.sb.ra)return d.sb.ma==e.sb.ma&&d.sb.pa==e.sb.pa?this.SA?this.wz():0:this.AF(d,e);if(d.sb.ma==e.sb.ma&&d.sb.pa==e.sb.pa)return this.zF(d,e);var g=this.zF(d,e);d=this.AF(d,e);return 0>g&&0>d?-1:0<g&&0<d?1:this.Ei()};b.prototype.SP=function(d,e){if(d.pa>e.pa){if(e.pa>e.ra&&e.ma-e.na<2*this.qa&&d.Ci(e.pa,e.ma,this.qa))return this.Ei()}else if((e.ma-e.na)/(e.pa-e.ra)*(d.pa-d.ra)<this.fr&&e.Ci(d.pa,d.ma,this.qa))return this.Ei();return 1};b.prototype.TP=function(d,
e){if(d.ra<e.ra){if(e.pa>e.ra&&e.ma-e.na<2*this.qa&&d.Ci(e.pa,e.ma,this.qa))return this.Ei()}else if((e.ma-e.na)/(e.pa-e.ra)*(d.ra-d.pa)<this.fr&&e.Ci(d.ra,d.na,this.qa))return this.Ei();return-1};b.prototype.UP=function(d,e){var g=new f.b;g.tc(e.wc(),e.ac());g.ur();g.normalize();var h=new f.b;h.tc(d.ac(),e.ac());var k=new f.b;k.tc(d.wc(),e.ac());h=h.Vh(g);g=k.Vh(g);k=Math.abs(h);var m=Math.abs(g);if(k<m){if(k<this.fr&&e.Ci(d.ra,d.na,this.qa))return this.Ei()}else if(m<this.fr&&e.Ci(d.pa,d.ma,this.qa))return this.Ei();
return 0>h&&0>g?-1:0<h&&0<g?1:this.Ei()};b.prototype.yF=function(d,e){return d.na==e.na&&d.ra==e.ra?this.SP(d,e):d.ma==e.ma&&d.pa==e.pa?this.TP(d,e):this.UP(d,e)};b.prototype.VP=function(d,e){return d.ma==e.ma&&d.pa==e.pa&&d.na==e.na&&d.ra==e.ra?this.SA?this.wz():0:this.Ei()};b.prototype.zF=function(d,e){var g=1;if(d.sb.na<e.sb.na){g=-1;var h=d;d=e;e=h}d=d.sb;h=e.sb;var k=d.ra-h.ra;e=e.aB*(d.na-h.na);var m=this.fr;return k<e-m?-g:k>e+m?g:h.Ci(d.ra,d.na,this.qa)?this.Ei():k<e?-g:g};b.prototype.AF=
function(d,e){var g=1;if(e.sb.ma<d.sb.ma){g=-1;var h=d;d=e;e=h}d=d.sb;h=e.sb;var k=d.pa-h.ra;e=e.aB*(d.ma-h.na);var m=this.fr;return k<e-m?-g:k>e+m?g:h.Ci(d.pa,d.ma,this.qa)?this.Ei():k<e?-g:g};b.prototype.wz=function(){this.yg=!0;this.Ti=new f.Od(5,this.bp,this.Ot);return-1};b.prototype.Ei=function(){this.yg=!0;this.SA?this.Ti=new f.Od(4,this.bp,this.Ot):this.Ot=this.bp=this.Ft=this.Et=-1;return-1};b.prototype.XP=function(d,e,g,h){if(this.yg)return-1;var k=this.DI==this.Ok&&this.CI==this.cr;if(k&&
d==this.Et)var m=this.EI;else m=NaN,this.Et=-1;k&&e==this.Ft?k=this.FI:(k=NaN,this.Ft=-1);g.ue.QJ(R);h.ue.QJ(l);if(R.ja<l.fa)return-1;if(l.ja<R.fa)return 1;this.DI=this.Ok;this.CI=this.cr;isNaN(m)&&(this.Et=d,this.EI=m=d=g.ue.Te(this.Ok,this.cr));isNaN(k)&&(this.Ft=e,this.FI=k=d=h.ue.Te(this.Ok,this.cr));return Math.abs(m-k)<=this.qa?this.YP(g.ue,h.ue):m<k?-1:m>k?1:0};b.prototype.ks=function(){this.yg=!1};b.prototype.Dm=function(){return this.Ti};b.prototype.dL=function(d,e){this.Ok=d;this.cr=e;this.Ot=
this.bp=this.Ft=this.Et=-1};b.prototype.compare=function(d,e,g){if(this.yg)return-1;d=d.ga(g);this.Qm=g;return this.CF(e,e,d,d)};b.prototype.CF=function(d,e,g,h){if(this.bp==e)var k=this.DB;else this.bp=e,k=this.DB,this.DB.mb=d,this.ZG(k,e,this.a.ud.i,this.a.bf);if(null==m){this.Ot=h;var m=this.MI;this.MI.mb=g;this.ZG(m,h,this.a.ud.i,this.a.bf)}if(k.zw||m.zw)return this.XP(e,h,k,m);if(k.cg.ja<m.cg.fa)return-1;if(m.cg.ja<k.cg.fa)return 1;d=k.Bw?1:0;d|=m.Bw?2:0;return 0==d?this.WP(k,m):1==d?this.yF(k.sb,
m.sb):2==d?-1*this.yF(m.sb,k.sb):this.VP(k.sb,m.sb)};return b}();f.CD=a})(fa||(fa={}));(function(f){var R=function(){function l(c,a){this.a=c;this.qa=a;this.yg=!1;this.bp=-1;this.cg=new f.uc;this.$q=new f.b;this.$q.Tc();this.qe=new f.zb;this.Qm=-1;this.kB=1.7976931348623157E308}l.prototype.ks=function(){this.yg=!1;this.kB=1.7976931348623157E308};l.prototype.Hh=function(c){this.$q.K(c)};l.prototype.compare=function(c,a){return this.DF(a,c.ga(a))};l.prototype.DF=function(c,a){var b=null!=this.a.ec(a);
b||(this.a.gd(a,this.qe),this.cg.uC(this.qe.ra,this.qe.pa));if(b)throw f.f.Y("not implemented");if(this.$q.x+this.qa<this.cg.fa)return-1;if(this.$q.x-this.qa>this.cg.ja)return 1;if(this.qe.na==this.qe.ma)return this.Qm=c,this.yg=!0,0;this.qe.hJ();b=this.qe.ac();a=new f.b;a.tc(this.qe.wc(),b);a.ur();var d=new f.b;d.tc(this.$q,b);b=a.Vh(d);b/=a.length();return b<10*-this.qa?-1:b>10*this.qa?1:this.qe.Zs(this.$q,this.qa)&&(a=Math.abs(b),a<this.kB&&(this.Qm=c,this.kB=a),this.yg=!0,a<.25*this.qa)?0:0>b?
-1:1};return l}();f.hN=R})(fa||(fa={}));(function(f){function R(c,a,b,d){b=new Float64Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.Mb=this.wk=!1;this.i=null;var b=a;2>b&&(b=2);this.i=new Float64Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Mb)throw f.f.Y("invalid_call");if(b<a||b>d||a>d)throw f.f.I();a!=b&&d!=b&&(this.wi(a,b-a,1),this.wi(b,d-b,1),this.wi(a,d-a,1))};c.Af=function(a,b){var d=new c(a),e=d.i;2>a&&(a=2);if(0!==b)for(var g=0;g<a;g++)e[g]=b;return d};
c.Vn=function(a){var b=new c(0);b.i=new Float64Array(a.i);b.size=a.size;return b};c.ms=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.i=new Float64Array(b);d.i.set(a.i.length<=b?a.i:a.i.subarray(0,b),0);return d};c.prototype.Db=function(a){0>=a||(null==this.i?this.i=new Float64Array(a):a<=this.i.length||(0<this.i.length?(a=new Float64Array(a),a.set(this.i),this.i=a):this.i=new Float64Array(a)))};c.prototype.read=function(a){return this.i[a]};c.prototype.mc=function(a,
b){b.x=this.i[a];b.y=this.i[a+1]};c.prototype.get=function(a){return this.i[a]};c.prototype.write=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.set=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.Au=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.i[this.size-1]=a};c.prototype.qC=function(a){return c.ms(this,a)};c.prototype.Ig=function(a){return this.read(a)};c.prototype.resize=function(a,
b){void 0===b&&(b=0);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.i.length&&5*a/4<this.i.length){var d=new Float64Array(this.i,0,a);this.i=d}}else{a>this.i.length&&(d=f.L.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Float64Array(d),d.set(this.i),this.i=d);d=this.i;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Gh=function(a){(null==this.i||a>this.i.length)&&this.resize(a);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");
this.size=a};c.prototype.Mr=function(a,b){this.write(a,b)};c.prototype.Un=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=f.L.Aj(this.read(b));return a};c.prototype.Ib=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,g=a.size;if(d>e||d>g&&e!=g)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,g){if(this.Mb)throw f.f.Eb();if(!e&&(1>g||0!=d%g))throw f.f.I();var h=this.size;this.resize(h+d);if(e)this.i.set(a.i.subarray(b,
b+d),h);else{e=d;for(var k=0;k<d;k+=g){e-=g;for(var m=0;m<g;m++)this.i[h+k+m]=a.i[b+e+m]}}};c.prototype.fo=function(a,b,d,e,g,h,k){if(this.Mb)throw f.f.Eb();if(!g&&(1>h||0!=e%h))throw f.f.I();var m=this.size-k;m<e&&this.resize(this.size+e-m);R(this.i,a+e,a,a+(k-a));this.i==b.i&&a<d&&(d+=e);if(g)this.i.set(b.i.subarray(d,d+e),a);else for(g=e,k=0;k<e;k+=h)for(g-=h,m=0;m<h;m++)this.i[a+k+m]=b.i[d+g+m]};c.prototype.qA=function(a,b,d,e,g,h){if(this.Mb)throw f.f.Eb();0>h&&(h=this.size);this.size+2*e>this.i.length?
this.resize(this.size+2*e):this.size+=2*e;R(this.i,a+2*e,a,a+(h-a));if(g)for(g=0;g<e;g++)h=b[d++],this.i[a++]=h.x,this.i[a++]=h.y;else{g=0;for(var k=e-1;g<e;++g)h=b[d+k],this.i[a++]=h.x,this.i[a++]=h.y,k--}};c.prototype.Gm=function(a,b,d,e){if(this.Mb)throw f.f.Eb();e-=a;R(this.i,a+e,a,a+e);for(e=0;e<d;e++)this.i[a+e]=b};c.prototype.Gi=function(a,b,d){if(this.Mb)throw f.f.Eb();R(this.i,a+2,a,a+(d-a));this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.cD=function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();
if(d.length<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&this.resize(b+a),g)this.i.set(d.subarray(e,b),a);else for(g||(a+=b-1),b=e+b;e<b;e++)this.i[a]=d[e],a--};c.prototype.Bu=function(a,b,d,e,g,h){if(0>a||0>b||0>e)throw f.f.I();if(!g&&(0>=h||0!=b%h))throw f.f.I();if(d.size<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.$r(a,b,e,g,h);else if(g)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e++;else if(e=e+b-h,1==h)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e--;else for(g=0,b=f.L.truncate(b/
h);g<b;g++){for(var k=0;k<h;k++)this.i[a+k]=d.i[e+k];a+=h;e-=h}};c.prototype.Xn=function(a,b,d){if(this.Mb)throw f.f.Eb();if(a+b>this.size)throw f.f.Eb();0<d-(a+b)&&R(this.i,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.wi=function(a,b,d){if(this.Mb)throw f.f.Eb();if(1>d||0!=b%d)throw f.f.Eb();for(var e=b>>1,g=0;g<e;g+=d){b-=d;for(var h=0;h<d;h++){var k=this.i[a+g+h];this.i[a+g+h]=this.i[a+b+h];this.i[a+b+h]=k}}};c.prototype.Xj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw f.f.I();for(var e=
b;e<b+d;e++)this.i[e]=a};c.prototype.$r=function(a,b,d,e,g){if(!e||a!=d)if(this.i.set(this.i.subarray(d,d+b),a),!e)for(d=a,a=a+b-g,e=0,b=f.L.truncate(b/2);e<b;e++){for(var h=0;h<g;h++){var k=this.i[d+h];this.i[d+h]=this.i[a+h];this.i[a+h]=k}d+=g;a-=g}};c.prototype.eD=function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),g||(a+=b-1<<1),g=g?2:-2,b+=e;e<b;e++)this.i[a]=d[e].x,this.i[a+1]=d[e].y,a+=g};c.prototype.dD=function(a,b,d){if(0>a||0>b)throw f.f.I();
if(0!=b){this.size<(b<<1)+a&&this.resize((b<<1)+a);b+=0;for(var e=0;e<b;e++)this.i[a]=d[e][0],this.i[a+1]=d[e][1],a+=2}};c.prototype.hu=function(a,b,d,e,g){if(0>a||0>b||0>e||this.size<b+a)throw f.f.I();if(g)for(g=0;g<b;g++)d[e+g]=this.i[a+g];else for(e=e+b-1;a<b;a++)d[e]=this.i[a],e--};c.prototype.dC=function(a,b,d){if(0>a||0>b||this.size<(b>>1)+a)throw f.f.I();if(0!=b){b=0+b;for(var e=0;e<b;e++)d[e][0]=this.i[a],d[e][1]=this.i[a+1],a+=2}};c.prototype.clear=function(a){a?this.resize(0):this.Gh(0)};
c.prototype.Px=function(){this.wk=this.Mb=!0};c.prototype.Zd=function(a,b,d){Array.prototype.sort.call(this.i.subarray(a,b),d)};c.prototype.sl=function(){return 1};return c}();f.ie=l})(fa||(fa={}));(function(f){function R(c,a,b,d){b=new Int32Array(c.subarray(b,d));c.set(b,a)}f.YZ=function(){return function(){this.random=1973}}();var l=function(){function c(a){this.Mb=this.wk=!1;this.i=null;var b=a;2>b&&(b=2);this.i=new Int32Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Mb)throw f.f.Y("invalid_call");
if(b<a||b>d||a>d)throw f.f.I();a!=b&&d!=b&&(this.wi(a,b-a,1),this.wi(b,d-b,1),this.wi(a,d-a,1))};c.Af=function(a,b){var d=new c(a),e=d.i;2>a&&(a=2);if(0!==b)for(var g=0;g<a;g++)e[g]=b;return d};c.Vn=function(a){var b=new c(0);b.i=new Int32Array(a.i);b.size=a.size;return b};c.ms=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.i=new Int32Array(b);d.i.set(a.i.length<=b?a.i:a.i.subarray(0,b),0);return d};c.prototype.Db=function(a){0>=a||(null==this.i?this.i=new Int32Array(a):
a<=this.i.length||(0<this.i.length?(a=new Int32Array(a),a.set(this.i),this.i=a):this.i=new Int32Array(a)))};c.prototype.read=function(a){return this.i[a]};c.prototype.mc=function(a,b){b.x=this.i[a];b.y=this.i[a+1]};c.prototype.get=function(a){return this.i[a]};c.prototype.write=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.set=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.Au=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.add=
function(a){this.resize(this.size+1);this.i[this.size-1]=a};c.prototype.qC=function(a){return c.ms(this,a)};c.prototype.Ig=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.i.length&&5*a/4<this.i.length){var d=new Int32Array(this.i,0,a);this.i=d}}else{a>this.i.length&&(d=f.L.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Int32Array(d),d.set(this.i),this.i=
d);d=this.i;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Gh=function(a){(null==this.i||a>this.i.length)&&this.resize(a);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.Mr=function(a,b){this.write(a,b)};c.prototype.Un=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=f.L.Zh(this.read(b),a);return a};c.prototype.Ib=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,g=a.size;if(d>e||d>g&&e!=g)return!1;
for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,g){if(this.Mb)throw f.f.Eb();if(!e&&(1>g||0!=d%g))throw f.f.I();var h=this.size;this.resize(h+d);if(e)this.i.set(a.i.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=g){e-=g;for(var m=0;m<g;m++)this.i[h+k+m]=a.i[b+e+m]}}};c.prototype.fo=function(a,b,d,e,g,h,k){if(this.Mb)throw f.f.Eb();if(!g&&(1>h||0!=e%h))throw f.f.I();R(this.i,a+e,a,a+(k-a));this.i==b.i&&a<d&&(d+=e);if(g)this.i.set(b.i.subarray(d,
d+e),a);else for(g=e,k=0;k<e;k+=h){g-=h;for(var m=0;m<h;m++)this.i[a+k+m]=b.i[d+g+m]}};c.prototype.qA=function(a,b,d,e,g,h){if(this.Mb)throw f.f.Eb();0>h&&(h=this.size);this.size+2*e>this.i.length?this.resize(this.size+2*e):this.size+=2*e;R(this.i,a+2*e,a,a+(h-a));if(g)for(g=0;g<e;g++)h=b[d++],this.i[a++]=h.x,this.i[a++]=h.y;else{g=0;for(var k=e-1;g<e;++g)h=b[d+k],this.i[a++]=h.x,this.i[a++]=h.y,k--}};c.prototype.Gm=function(a,b,d,e){if(this.Mb)throw f.f.Eb();e-=a;R(this.i,a+e,a,a+e);for(e=0;e<d;e++)this.i[a+
e]=b};c.prototype.Gi=function(a,b,d){if(this.Mb)throw f.f.Eb();R(this.i,a+2,a,a+(d-a));this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.cD=function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();if(d.length<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&this.resize(b+a),g)this.i.set(d.subarray(e,b),a);else for(g||(a+=b-1),b=e+b;e<b;e++)this.i[a]=d[e],a--};c.prototype.Bu=function(a,b,d,e,g,h){if(0>a||0>b||0>e)throw f.f.I();if(!g&&(0>=h||0!=b%h))throw f.f.I();if(d.size<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&
this.resize(b+a),d==this)this.$r(a,b,e,g,h);else if(g)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e++;else if(e=e+b-h,1==h)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e--;else for(g=0,b=f.L.truncate(b/h);g<b;g++){for(var k=0;k<h;k++)this.i[a+k]=d.i[e+k];a+=h;e-=h}};c.prototype.Xn=function(a,b,d){if(this.Mb)throw f.f.Eb();if(a+b>this.size)throw f.f.Eb();0<d-(a+b)&&R(this.i,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.wi=function(a,b,d){if(this.Mb)throw f.f.Eb();if(1>d||0!=b%d)throw f.f.Eb();for(var e=b>>1,g=0;g<
e;g+=d){b-=d;for(var h=0;h<d;h++){var k=this.i[a+g+h];this.i[a+g+h]=this.i[a+b+h];this.i[a+b+h]=k}}};c.prototype.Xj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw f.f.I();for(var e=b;e<b+d;e++)this.i[e]=a};c.prototype.$r=function(a,b,d,e,g){if(!e||a!=d)if(this.i.set(this.i.subarray(d,d+b),a),!e)for(d=a,a=a+b-g,e=0,b=f.L.truncate(b/2);e<b;e++){for(var h=0;h<g;h++){var k=this.i[d+h];this.i[d+h]=this.i[a+h];this.i[a+h]=k}d+=g;a-=g}};c.prototype.eD=function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();
if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),g||(a+=b-1<<1),g=g?2:-2,b+=e;e<b;e++)this.i[a]=d[e].x,this.i[a+1]=d[e].y,a+=g};c.prototype.hu=function(a,b,d,e,g){if(0>a||0>b||0>e||this.size<b+a)throw f.f.I();if(g)for(g=0;g<b;g++)d[e+g]=this.i[a+g];else for(e=e+b-1;a<b;a++)d[e]=this.i[a],e--};c.prototype.clear=function(a){a?this.resize(0):this.Gh(0)};c.prototype.Px=function(){this.wk=this.Mb=!0};c.prototype.Zd=function(a,b,d){10>b-a?c.dH(this.i,a,b,d):c.$B(this.i,a,b-1,d)};c.prototype.sl=function(){return 2};
c.prototype.Gc=function(){return this.i[this.size-1]};c.prototype.Rf=function(){this.resize(this.size-1)};c.prototype.EY=function(a){this.i[this.size-1]=a};c.prototype.kX=function(a){a<this.size-1&&(this.i[a]=this.i[this.size-1]);this.resize(this.size-1)};c.prototype.ZF=function(a){for(var b=0,d=this.size;b<d;b++)if(this.i[b]==a)return b;return-1};c.prototype.UG=function(a){return 0<=this.ZF(a)};c.dH=function(a,b,d,e){for(var g=b;g<d;g++){for(var h=a[g],k=g-1;k>=b&&0<e(a[k],h);)a[k+1]=a[k],k--;a[k+
1]=h}};c.$x=function(a,b,d){var e=a[d];a[d]=a[b];a[b]=e};c.$B=function(a,b,d,e){if(!(b>=d))for(;;){if(9>d-b){c.dH(a,b,d+1,e);break}var g=a[b];c.$x(a,b,d);for(var h=b,k=b;k<d;k++)0>=e(a[k],g)&&(c.$x(a,h,k),h+=1);c.$x(a,h,d);h-b<d-h?(c.$B(a,b,h-1,e),b=h+1):(c.$B(a,h+1,d,e),d=h-1)}};return c}();f.ha=l})(fa||(fa={}));(function(f){function R(c,a,b,d){b=new Int8Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.i=null;var b=a;2>b&&(b=2);this.i=new Int8Array(b);this.size=a}c.prototype.rotate=
function(a,b,d){if(this.Mb)throw f.f.Y("invalid_call");if(b<a||b>d||a>d)throw f.f.I();a!=b&&d!=b&&(this.wi(a,b-a,1),this.wi(b,d-b,1),this.wi(a,d-a,1))};c.Af=function(a,b){var d=new c(a),e=d.i;2>a&&(a=2);if(0!==b)for(var g=0;g<a;g++)e[g]=b;return d};c.Vn=function(a){var b=new c(0);b.i=new Int8Array(a.i);b.size=a.size;return b};c.ms=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.i=new Int8Array(b);d.i.set(a.i.length<=b?a.i:a.i.subarray(0,b),0);return d};c.prototype.Db=
function(a){0>=a||(null==this.i?this.i=new Int8Array(a):a<=this.i.length||(0<this.i.length?(a=new Int8Array(a),a.set(this.i),this.i=a):this.i=new Int8Array(a)))};c.prototype.read=function(a){return this.i[a]};c.prototype.mc=function(a,b){b.x=this.i[a];b.y=this.i[a+1]};c.prototype.get=function(a){return this.i[a]};c.prototype.write=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.set=function(a,b){if(this.Mb)throw f.f.Eb();this.i[a]=b};c.prototype.Au=function(a,b){if(this.Mb)throw f.f.Eb();
this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.i[this.size-1]=a};c.prototype.qC=function(a){return c.ms(this,a)};c.prototype.Ig=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.i.length&&5*a/4<this.i.length){var d=new Int8Array(this.i,0,a);this.i=d}}else{a>this.i.length&&(d=f.L.truncate(64>a?Math.max(2*a,
4):5*a/4),d=new Int8Array(d),d.set(this.i),this.i=d);d=this.i;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Gh=function(a){(null==this.i||a>this.i.length)&&this.resize(a);if(this.wk)throw f.f.Y("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.Mr=function(a,b){this.write(a,b)};c.prototype.Un=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=f.L.Zh(this.read(b),a);return a};c.prototype.Ib=function(a,b,d){if(null==a||!(a instanceof c))return!1;
var e=this.size,g=a.size;if(d>e||d>g&&e!=g)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,g){if(this.Mb)throw f.f.Eb();if(!e&&(1>g||0!=d%g))throw f.f.I();var h=this.size;this.resize(h+d);if(e)this.i.set(a.i.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=g){e-=g;for(var m=0;m<g;m++)this.i[h+k+m]=a.i[b+e+m]}}};c.prototype.fo=function(a,b,d,e,g,h,k){if(this.Mb)throw f.f.Eb();if(!g&&(1>h||0!=e%h))throw f.f.I();R(this.i,a+e,a,a+(k-a));
this.i==b.i&&a<d&&(d+=e);if(g)this.i.set(b.i.subarray(d,d+e),a);else for(g=e,k=0;k<e;k+=h){g-=h;for(var m=0;m<h;m++)this.i[a+k+m]=b.i[d+g+m]}};c.prototype.Gm=function(a,b,d,e){if(this.Mb)throw f.f.Eb();e-=a;R(this.i,a+e,a,a+e);for(e=0;e<d;e++)this.i[a+e]=b};c.prototype.qA=function(a,b,d,e,g,h){if(this.Mb)throw f.f.Eb();0>h&&(h=this.size);this.size+2*e>this.i.length?this.resize(this.size+2*e):this.size+=2*e;R(this.i,a+2*e,a,a+(h-a));if(g)for(g=0;g<e;g++)h=b[d++],this.i[a++]=h.x,this.i[a++]=h.y;else{g=
0;for(var k=e-1;g<e;++g)h=b[d+k],this.i[a++]=h.x,this.i[a++]=h.y,k--}};c.prototype.Gi=function(a,b,d){if(this.Mb)throw f.f.Eb();R(this.i,a+2,a,a+(d-a));this.i[a]=b.x;this.i[a+1]=b.y};c.prototype.cD=function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();if(d.length<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&this.resize(b+a),g)this.i.set(d.subarray(e,b),a);else for(g||(a+=b-1),b=e+b;e<b;e++)this.i[a]=d[e],a--};c.prototype.Bu=function(a,b,d,e,g,h){if(0>a||0>b||0>e)throw f.f.I();if(!g&&(0>=h||0!=b%h))throw f.f.I();
if(d.size<e+b)throw f.f.I();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.$r(a,b,e,g,h);else if(g)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e++;else if(e=e+b-h,1==h)for(g=0;g<b;g++)this.i[a]=d.i[e],a++,e--;else for(g=0,b=f.L.truncate(b/h);g<b;g++){for(var k=0;k<h;k++)this.i[a+k]=d.i[e+k];a+=h;e-=h}};c.prototype.Xn=function(a,b,d){if(this.Mb)throw f.f.Eb();if(a+b>this.size)throw f.f.Eb();0<d-(a+b)&&R(this.i,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.wi=function(a,b,d){if(this.Mb)throw f.f.Eb();
if(1>d||0!=b%d)throw f.f.Eb();for(var e=b>>1,g=0;g<e;g+=d){b-=d;for(var h=0;h<d;h++){var k=this.i[a+g+h];this.i[a+g+h]=this.i[a+b+h];this.i[a+b+h]=k}}};c.prototype.Xj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw f.f.I();for(var e=b;e<b+d;e++)this.i[e]=a};c.prototype.$r=function(a,b,d,e,g){if(!e||a!=d)if(this.i.set(this.i.subarray(d,d+b),a),!e)for(d=a,a=a+b-g,e=0,b=f.L.truncate(b/2);e<b;e++){for(var h=0;h<g;h++){var k=this.i[d+h];this.i[d+h]=this.i[a+h];this.i[a+h]=k}d+=g;a-=g}};c.prototype.eD=
function(a,b,d,e,g){if(0>a||0>b||0>e)throw f.f.I();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),g||(a+=b-1<<1),g=g?2:-2,b+=e;e<b;e++)this.i[a]=d[e].x,this.i[a+1]=d[e].y,a+=g};c.prototype.hu=function(a,b,d,e,g){if(0>a||0>b||0>e||this.size<b+a)throw f.f.I();if(g)for(g=0;g<b;g++)d[e+g]=this.i[a+g];else for(e=e+b-1;a<b;a++)d[e]=this.i[a],e--};c.prototype.clear=function(a){a?this.resize(0):this.Gh(0)};c.prototype.Px=function(){this.wk=this.Mb=!0};c.prototype.Zd=function(a,b,d){b=this.i.subarray(a,
b);Array.prototype.sort.call(b,d);this.i.set(b,a)};c.prototype.DK=function(a,b){if(this.Mb)throw f.f.Y("invalid call. Attribute Stream is read only.");this.i[a]|=b};c.prototype.uF=function(a,b){if(this.Mb)throw f.f.Y("invalid call. Attribute Stream is read only.");this.i[a]&=~b};c.prototype.sl=function(){return 1};return c}();f.Gn=l})(fa||(fa={}));(function(f){f.Xc=function(){function R(){}R.ns=function(l,c){return f.Gn.Af(l,c)};R.Wn=function(l,c){return f.ie.Af(l,c)};R.zQ=function(l,c,a){switch(l){case 1:l=
f.ie.Af(c,a);break;case 2:l=f.ha.Af(c,a);break;case 4:l=f.Gn.Af(c,a);break;default:throw f.f.za();}return l};R.JF=function(l,c){return R.zQ(f.oa.sl(l),c*f.oa.Sa(l),f.oa.me(l))};R.Sh=function(l,c){return f.ha.Af(l,c)};R.gJ=function(l){var c,a=[];for(c=0;c<l;c++)a.push(null);return a};return R}()})(fa||(fa={}));(function(f){f.da=function(){return function(R){void 0===R&&(R=0);this.j=R}}()})(fa||(fa={}));(function(f){f.VM=function(){function R(){}R.bind=function(l){f.Pc=l.PeDefs;f.zf=l.PeFactory;f.uD=
l.PeVertcs;f.Kh=l.PeCSTransformations;f.tD=l.PeGTTransformations;f.TM=l.PeGeogtran;f.SM=l.PeFactoryCodechange;f.sD=l.PeGCSExtent;f.ng=l.PePCSInfo;f.UM=l.PeHorizon;f.RM=l.PeCoordsys;f.Dp=l.PeGTlistExtended;f.Dp.PE_GTLIST_OPTS_USE_DEFAULT=128;f.zf.initialize(null);f.ry=l.PeGTlistExtendedEntry;R.rV=f.zf.fromString(f.Pc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')};R.K0=function(){};R.rV=null;return R}();f.zf=null;f.uD=null;f.RM=null;f.UM=null;f.ng=null;f.Dp=null;f.ry=null;f.sD=null;f.SM=null;f.TM=null;f.Pc=null;
f.tD=null;f.Kh=null})(fa||(fa={}));(function(f){var R=function(){function l(){}l.ub=function(c,a){return 0<=a?l.J(c):-l.J(c)};l.J=function(c){return 0>c?-c:c};l.Ai=function(c){return 3.552713678800501E-15>c};l.rD=function(c,a,b){return l.J(c-a)<=b*(1+(l.J(c)+l.J(a))/2)};l.V=function(c,a){return l.rD(c,a,3.552713678800501E-15)};l.NM=function(c){return 3.552713678800501E-15>=l.J(c)};l.qd=function(c){return l.NM(c)};return l}();f.l=R;f.C=function(){function l(){}l.wp=function(c,a){c=R.J(c);a=R.J(a);
var b=0;0!=c+a&&(c>a?(b=a/c,b=c*Math.sqrt(1+b*b)):(b=c/a,b=a*Math.sqrt(1+b*b)));return b};l.pr=function(c,a,b,d,e){for(var g=[0,0,0],h=[0,0,0],k=0;2>=k;k++)a[k]-=c[k],b[k]-=a[k];b=g[1]*h[2]-g[2]*h[1];a=g[2]*h[0]-g[0]*h[2];g=g[0]*h[1]-g[1]*h[0];c=-1*(b*c[0]+a*c[1]+g*c[2]);d[0]=b;d[1]=a;d[2]=g;d[3]=c;h=l.Fn(d);d[0]/=h;d[1]/=h;d[2]/=h;d[3]/=h;0!=e&&(h=R.qd(g)?R.qd(c)?R.ub(1,a):-R.ub(1,c):R.ub(1,g),h*=R.ub(1,e),d[0]*=h,d[1]*=h,d[2]*=h,d[3]*=h)};l.ey=function(c,a,b){b[0]=c[1]*a[2]-a[1]*c[2];b[1]=c[2]*
a[0]-a[2]*c[0];b[2]=c[0]*a[1]-a[0]*c[1]};l.zu=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]};l.Fn=function(c){return l.wp(l.wp(c[0],c[1]),c[2])};l.hk=function(c,a,b,d,e,g,h,k){c=l.n(c,a,b);var m=Math.cos(b);g.j=(c+e)*m*Math.cos(d);h.j=(c+e)*m*Math.sin(d);k.j=(c*(1-a)+e)*Math.sin(b)};l.sP=function(c,a,b,d,e,g,h){var k=l.wp(a,b),m=1*Math.sqrt(1-c),n=m/1;if(R.V(k,0))g.j=0,e.j=R.ub(1.570796326794897,d),h.j=R.J(d)-m;else{g.j=Math.atan2(b,a);b=Math.atan2(1*d,m*k);g=Math.cos(b);var p=Math.sin(b);a=
m*c/(1-c);c*=1;b=Math.atan2(d+a*p*p*p,k-c*g*g*g);3.141592653589793<R.J(b)&&(b=R.ub(3.141592653589793,b)-b);b=Math.atan(n*Math.tan(b));p=Math.sin(b);g=Math.cos(b);e.j=Math.atan2(d+a*p*p*p,k-c*g*g*g);1.570796326794897<R.J(e.j)&&(e.j=R.ub(3.141592653589793,e.j)-e.j);b=Math.atan(n*Math.tan(e.j));p=Math.sin(b);g=Math.cos(b);h.j=(d-m*p)*Math.sin(e.j)+(k-1*g)*Math.cos(e.j)}};l.n=function(c,a,b){b=Math.sin(b);return c/Math.sqrt(1-a*b*b)};l.Wt=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))};
l.Rj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))};l.kr=function(c,a){if(R.Ai(c)||0==a||R.V(R.J(a),1.570796326794897))return a;if(.006884661117170036>c){var b=Math.sqrt(1-c),d=(1-b)/(1+b),e=d*d,g=d*e,h=d*g,k=d*h,m=d*k,n=d*m,p=1.572916666666667*g-3.2578125*k+4.295068359375*n;c=2.142578125*h-6.071484375*m;b=3.129296875*k-11.249837239583334*n;var x=4.775276692708333*m,Q=7.958636765252976*n,V=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*d-.84375*g+.525390625*k-.2688395182291667*n-p+b-Q+
V*(2*(1.3125*e-1.71875*h+1.650146484375*m)-4*c+6*x+V*(4*p-12*b+24*Q+V*(8*c-32*x+V*(16*b-80*Q+V*(32*x+64*V*Q))))))}b=1-c;d=c/2;e=R.J(a);g=e*l.Fv(c)/(1.570796326794897*b);h=9999;m=e;for(e=0;1E-16<h&&50>e;e++)n=l.gm(c,m),k=(l.XG(m,c)-d*Math.sin(2*m)/n)/b-g,n=1/(n*n*n),p=k/n,k=m-p,h=R.J(p),m=k;return 0<=a?m:-m};l.WX=function(c,a){return R.Ai(a)?c:c*l.Fv(a)/1.570796326794897};l.ba=function(c){c=l.cG(c,6.283185307179586);return 0>c?c+6.283185307179586:3.141592653589793>R.J(c)||R.V(R.J(c),3.141592653589793)?
c:c-6.283185307179586};l.cG=function(c,a){return c-Math.floor(c/a)*a};l.Hg=function(c,a){if(.006884661117170036>a){a=Math.sqrt(1-a);a=(1-a)/(1+a);var b=a*a,d=b*b;return c/(1+a)*(1+.25*b+.015625*d+.00390625*b*d)*1.570796326794897}return c*l.Fv(a)};l.nr=function(c,a){var b=R.ub(1,Math.sin(a));a=R.J(l.cG(a,3.141592653589793));a=1.570796326794897>=a?a:3.141592653589793-a;return(R.V(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*b};l.q=function(c,a,b){if(.006884661117170036>a){a=Math.sqrt(1-
a);a=(1-a)/(1+a);var d=a*a,e=a*d,g=a*e,h=a*g,k=a*h,m=a*k,n=-.7291666666666666*e+.2278645833333333*h+.03987630208333334*m,p=.615234375*g-.21533203125*k,x=-.54140625*h+.20302734375*m,Q=.48876953125*k,V=-.4488699776785715*m,ca=Math.cos(2*b);return c/(1+a)*((1+.25*d+.015625*g+.00390625*k)*b+Math.sin(2*b)*(-1.5*a+.1875*e+.0234375*h+.00732421875*m-n+x-V+ca*(2*(.9375*d-.234375*g-.03662109375*k)-4*p+6*Q+ca*(4*n-12*x+24*V+ca*(8*p-32*Q+ca*(16*x-80*V+ca*(32*Q+64*ca*V)))))))}return c*(l.XG(b,a)-.5*a*Math.sin(2*
b)/l.gm(a,b))};l.gm=function(c,a){a=Math.sin(a);return Math.sqrt(1-c*a*a)};l.Fv=function(c){return R.rD(c,1,2.220446049250313E-16)?1:1>c?l.Ex(0,1-c)-c/3*l.Cx(0,1-c):NaN};l.XG=function(c,a){var b=R.ub(1,c);c=R.J(c);var d=Math.floor(c/1.570796326794897);if(1<a)a=0==c?0:NaN;else if(R.qd(d))c=l.sin(c),a=c*l.Ex(1-c*c,1-a*c*c)-a/3*c*c*c*l.Cx(1-c*c,1-a*c*c);else{var e=f.L.truncate(d%2),g=l.Fv(a);0<e?(c=Math.sin(1.570796326794897*(d+1)-c),a=c*l.Ex(1-c*c,1-a*c*c)-a/3*c*c*c*l.Cx(1-c*c,1-a*c*c),a=g*(d+1)-a):
(c=Math.sin(c-1.570796326794897*d),a=c*l.Ex(1-c*c,1-a*c*c)-a/3*c*c*c*l.Cx(1-c*c,1-a*c*c),a=g*d+a)}return a*b};l.sin=function(c){c=l.ba(c);var a=R.ub(1,c);c=R.J(c);return R.V(c,3.141592653589793)?0:R.V(c,1.570796326794897)?1*a:Math.sin(c)*a};l.Cx=function(c,a){var b=c,d=a,e=1;a=0;c=1;for(var g,h,k,m;;){g=.2*(b+d+3*e);h=(g-b)/g;k=(g-d)/g;m=(g-e)/g;if(1E-4>R.J(h)&&1E-4>R.J(k)&&1E-4>R.J(m))break;m=Math.sqrt(d);g=Math.sqrt(e);m=Math.sqrt(b)*(m+g)+m*g;a+=c/(g*(e+m));c*=.25;b=.25*(b+m);d=.25*(d+m);e=.25*
(e+m)}b=h*k;e=m*m;d=b-e;e=b-6*e;h=e+d+d;return 3*a+c*(1+e*(-.2142857142857143+.10227272727272728*e-.1730769230769231*m*h)+m*(.1666666666666667*h+m*(-.4090909090909091*d+.1153846153846154*m*b)))/(g*Math.sqrt(g))};l.Ex=function(c,a){for(var b,d,e,g,h=1;;h=.25*(h+b)){b=(c+a+h)/3;d=2-(b+c)/b;e=2-(b+a)/b;g=2-(b+h)/b;if(1E-4>R.J(d)&&1E-4>R.J(e)&&1E-4>R.J(g))break;b=Math.sqrt(a);d=Math.sqrt(h);b=Math.sqrt(c)*(b+d)+b*d;c=.25*(c+b);a=.25*(a+b)}c=d*e-g*g;a=d*e*g;return(1+(.04166666666666666*c-.1-.06818181818181818*
a)*c+.07142857142857142*a)/Math.sqrt(b)};l.wx=function(c,a){if(R.Ai(c)||0==a||R.V(R.J(a),1.570796326794897))return a;if(.006884661117170036>c){var b=c*c,d=c*b,e=c*d,g=c*e,h=c*g,k=c*h,m=-(.02708333333333333*d+.03430059523809524*e+.03149181547619048*g+.02634359154541446*h+.02156896735835538*k),n=.007669890873015873*e+.01299603174603175*g+.0148051353064374*h+.01454454953803912*k,p=-(.002275545634920635*g+.004830845032667949*h+.006558395368616723*k),x=6.957236677288761E-4*h+.001775193002406544*k,Q=-(2.17324089394402E-4*
k),V=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*b+.09375*d+.04878472222222222*e+.02916666666666667*g+.01938905423280423*h+.01388255931712963*k)-m+p-Q+V*(2*(.1041666666666667*b+.0875*d+.06050347222222222*e+.04151785714285714*g+.02958958540013228*h+.02203667534722222*k)-4*n+6*x+V*(4*m-12*p+24*Q+V*(8*n-32*x+V*(16*p-80*Q+V*(32*x+64*V*Q))))))}0==a||R.V(R.J(a),1.570796326794897)?b=a:(d=Math.sqrt(c),e=d*Math.sin(a),b=Math.tan(.7853981633974483+a/2)*Math.pow((1-e)/(1+e),d/2),b=2*Math.atan(b)-
1.570796326794897);return b};l.IP=function(c,a){if(R.Ai(c)||0==a||R.V(R.J(a),1.570796326794897))return a;if(.006884661117170036>c){V=c*c;p=c*V;x=c*p;var b=c*x;Q=c*b;var d=c*Q,e=.05833333333333333*p+.07232142857142858*x+.05634300595238095*b+.0355325796406526*Q+.020235546186067*d,g=.02653149801587302*x+.04379960317460317*b+.0429211791776896*Q+.03255384637546096*d,h=.01294022817460318*b+.02668104344536636*Q+.03155651254609588*d,k=.00659454790965208*Q+.0163075268674227*d,m=.003463473736911237*d,n=Math.cos(2*
a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*V+.08333333333333333*p+.03611111111111111*x+.01875*b+.01195601851851852*Q+.008863673941798942*d-e+h-m+n*(2*(.1458333333333333*V+.1208333333333333*p+.07039930555555556*x+.03616071428571429*b+.01839451058201058*Q+.01017113095238095*d)-4*g+6*k+n*(4*e-12*h+24*m+n*(8*g-32*k+n*(16*h-80*m+n*(32*k+64*n*m))))))}var p=Math.sqrt(c),x=p/2,Q=Math.tan(.7853981633974483+a/2);c=0;e=1;for(var V=a;0!=e;V=d)if(b=p*Math.sin(V),d=Q*Math.pow((1+b)/(1-b),x),d=2*Math.atan(d)-
1.570796326794897,c++,R.V(d,V)||3E4<c)e=0;return V};return l}()})(fa||(fa={}));(function(f){var R=function(){function l(c){this.Dl=this.Ct=null;this.pw=!1;this.qB=this.rB=0;this.oB=new f.b;this.BB=new f.b;this.ax=!1;this.Oq=new f.g;this.jI=this.Yw=0;this.Zw=null;this.Gk=!1;this.Yo=null;this.MA=0;this.Ze=c;this.it=f.Ab.dw(this.Ze,0,!0);this.oB.Tc();this.BB.Tc();this.GI=NaN;var a=c.getCode();0<a?(this.Rk=a,f.zf.getCode(c)):this.Rk=f.zf.getCode(c);0>this.Rk&&(this.Rk=0);var b=this.Ze.getType();this.XH=
b==f.Pc.PE_TYPE_PROJCS?2:1;if(b==f.Pc.PE_TYPE_PROJCS&&!c.loadConstants())throw f.f.I("PeProjcs.loadConstants failed");a=b==f.Pc.PE_TYPE_GEOGCS?this.Ze:this.Ze.getGeogcs();b!=f.Pc.PE_TYPE_GEOGCS&&f.zf.getCode(a);this.Yo=c.getUnit();this.GI=a.getPrimem().getLongitude();this.jI=c=a.getUnit().getUnitFactor();c=Math.PI/(180*c);1E-10>Math.abs(c-1)&&(c=1);this.qB=c;0!=(b&f.Pc.PE_TYPE_PROJCS)?(a=this.Ze,this.rB=1/a.getUnit().getUnitFactor(),this.Yw=.001/this.Ze.getUnit().getUnitFactor(),this.Zw=f.ng.generate(a,
f.ng.PE_PCSINFO_OPTION_NONE),this.Gk=this.Zw.isPannableRectangle(),this.MA=f.Ab.BO(this.Zw.getCentralMeridian(),this.qB)):(this.ax=this.Gk=!0,this.rB=0,b=1/a.getUnit().getUnitFactor(),this.Yw=.001/a.getDatum().getSpheroid().getAxis()*b,this.MA=0);this.Gk&&(this.cy(),this.KL(),this.LL(),this.JL(),this.UZ(),this.VZ())}l.prototype.Gs=function(){return this.Rk};l.prototype.xj=function(){return this.Zw};l.vz=function(c,a){return c==a?!0:null!=c&&null!=a&&0==c.Rk&&0==a.Rk?c.it===a.it:!1};l.prototype.Cc=
function(){return this.Gk};l.prototype.nh=function(c){c.H(this.Lo)};l.prototype.Wv=function(){return this.Lo.o};l.prototype.Vv=function(){return this.Lo.v};l.prototype.WS=function(c){c.H(this.$w)};l.prototype.UZ=function(){var c=this.Ze.getType();if(c==f.Pc.PE_TYPE_PROJCS){c=this.Ze;var a=this.xj().getCentralMeridian(),b=c.getGeogcs();if(null==b)throw f.f.Y("internal error");b=1/b.getUnit().getUnitFactor()*Math.PI;a=[[a+b,0]];f.Kh.geogToProj(c,1,a);a=a[0][0];b=c.getParameters()[f.Pc.PE_PARM_X0].getValue();
var d=this.sk();c=new f.g;d.s(c);d=Math.abs(a-b);a=d+b;b=-1*d+b;d=c.B;c=c.A;var e=new f.g;e.H(b,c,a,d);null==this.Lo&&(this.Lo=e)}else if(c==f.Pc.PE_TYPE_GEOGCS)b=1/this.Ze.getUnit().getUnitFactor()*Math.PI,c=new f.g,c.H(-b,-b/2,b,b/2),null==this.Lo&&(this.Lo=c);else throw f.f.Y("internal error");};l.prototype.VZ=function(){var c=this.Ze.getType();if(c==f.Pc.PE_TYPE_PROJCS){var a=this.Ze;c=this.xj().getCentralMeridian();a=a.getGeogcs();if(null==a)throw f.f.Y("internal error");a=1/a.getUnit().getUnitFactor()*
Math.PI;var b=this.Bs(),d=new f.g;b.s(d);b=new f.g;b.H(c-a,d.A,c+a,d.B);null==this.$w&&(this.$w=b)}else if(c==f.Pc.PE_TYPE_GEOGCS)a=1/this.Ze.getUnit().getUnitFactor()*Math.PI,c=new f.g,c.H(-a,-a/2,a,a/2),null==this.$w&&(this.$w=c);else throw f.f.Y("internal error");};l.prototype.Sd=function(){return this.qB};l.prototype.Am=function(){return this.rB};l.prototype.Bs=function(){if(this.Gk)return this.Dl;var c=this.Dl;if(null!=c)return c;this.cy();return this.Dl};l.prototype.Cs=function(){if(this.Gk)return null;
if(null!=this.Dl)return this.JH;this.cy();return this.JH};l.prototype.cy=function(){if(this.Ze.getType()==f.Pc.PE_TYPE_PROJCS){var c=this.Ze,a=c.getGeogcs(),b=c.horizonGcsGenerate();if(null!=b){var d=b[0].getNump(),e=b[0].getKind();c=0<b[0].getInclusive();var g=this.Sd(),h=90*g,k=360*g,m=370*g,n=180*g*f.Pc.PE_HORIZON_DELTA/Math.PI,p=new f.g,x=null;if(1<d)for(var Q=1;Q<d;Q++)if(b[Q].getKind()==f.Pc.PE_HORIZON_LINE){null==x&&(x=new f.Oa);var V=b[Q].getCoord();x.Zx(V[0][0],V[0][1]);x.Cj(V[1][0],V[1][1])}if(e==
f.Pc.PE_HORIZON_RECT)b=b[0].getCoord(),p.H(b[0][0],b[0][1]),p.Nb(b[1][0],b[1][1]),Math.abs(p.B-h)<1E-7*n&&(p.B=h),Math.abs(p.A+h)<1E-7*n&&(p.A=-h),p.N()>m&&(b=-400*g,p.H(b,p.A,b+5*k,p.B)),b=new f.Ih(p),null==this.Dl&&(this.Dl=b,this.pw=c);else{m=new f.Fa;k=this.xj().isGcsHorizonMultiOverlap();p=f.Mu.OF(a,f.Nu.Integer64);if(k){m=new f.qM;n=f.Jh.local().U(m,p,null);for(Q=0;Q<d;Q++)if(b[Q].getKind()==f.Pc.PE_HORIZON_POLY){a=b[Q].getSize();g=b[Q].getCoord();e=[];for(h=0;h<a;h++)e[h]=f.b.construct(g[h][0],
g[h][1]);b[Q].getInclusive();k&&(g=new f.Fa,g.dl(e,a-1),m.FZ(g),n.xe())}m=n.next()}else for(Q=0;Q<d;Q++)if(b[Q].getKind()==f.Pc.PE_HORIZON_POLY){a=b[Q].getSize();g=b[Q].getCoord();k=[];for(h=0;h<a;h++)k[h]=f.b.construct(g[h][0],g[h][1]);b[Q].getInclusive();m.dl(k,a-1)}c?f.ak.local().Pn(m,p,1):f.Cp.local().Pn(m,p,1);f.kj.local().Pn(m,p,1);null==this.Dl&&(this.Dl=m,this.pw=c,this.JH=x)}}}};l.prototype.Ov=function(){if(this.Gk)return this.pw;null==this.Dl&&this.cy();return this.pw};l.prototype.KL=function(){if(2==
this.XH){var c=this.Ze.horizonPcsGenerate();if(null!=c){var a=c[0].getKind();c[0].getInclusive();var b=c[0].getNump(),d=!1;if(a==f.Pc.PE_HORIZON_RECT)c=c[0].getCoord(),b=new f.g,b.H(c[0][0],c[0][1]),b.Nb(c[1][0],c[1][1]),c=new f.Ih(b);else{a=-1;for(d=0;d<b;d++)c[d].getKind()==f.Pc.PE_HORIZON_POLY&&(a=d);d=c[a].getSize()-1;c=c[a].getCoord();b=[];for(a=0;a<d;a++)b[a]=f.b.construct(c[a][0],c[a][1]);c=a=new f.Fa;a.dl(b,d);d=!0}this.xj().isDensificationNeeded()&&(b=1E5*this.Am(),c=f.im.local().U(c,b,null));
d&&(d=new f.Ih,c.qn(d),c.Pe(),c.Pb(),c.DS(),f.ak.local().Pn(c,null,1));null==this.Ct&&(this.Ct=c)}}};l.prototype.sk=function(){if(this.Gk)return this.Ct;var c=this.Ct;if(null!=c)return c;this.KL();return this.Ct};l.prototype.LL=function(){if(this.Ze.getType()==f.Pc.PE_TYPE_PROJCS){var c=90*this.Sd();c=[[0,c],[0,-c]];f.Kh.geogToProj(this.Ze,2,c);var a=this.xj(),b=a.getNorthPoleLocation()!=f.ng.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=f.ng.PE_POLE_OUTSIDE_BOUNDARY;this.ax||(b&&this.oB.ka(c[0][0],
c[0][1]),a&&this.BB.ka(c[1][0],c[1][1]))}this.ax=!0};l.prototype.bA=function(c,a){this.Gk||this.ax||this.LL();c?a.K(this.BB):a.K(this.oB)};l.prototype.JL=function(){if(1==this.XH){var c=400*this.Sd();this.Oq.H(-c,-c,c,c)}else c=f.ng.generate(this.Ze,f.ng.PE_PCSINFO_OPTION_DOMAIN),c=f.g.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.Oq.u()&&this.Oq.H(c)};l.prototype.vS=function(c){this.Gk&&c.H(this.Oq);this.Oq.u()&&this.JL();c.H(this.Oq)};l.prototype.Cm=function(){return this.GI};
l.prototype.Wh=function(){return this.MA};l.prototype.Ld=function(){return this.Yo};l.prototype.Ds=function(){return this.jI};return l}();f.vD=R})(fa||(fa={}));(function(f){var R=function(){function l(c){this.cV=c;this.it=f.Ab.dw(c,0,!0);var a=c.getCode();this.$s=0<a?a:f.zf.getCode(c);0>this.$s&&(this.$s=0);this.Yo=a=this.cV.getUnit();this.xI=1/a.getUnitFactor();f.zf.getCode(c)}l.vz=function(c,a){return c==a?!0:null!=c&&null!=a&&0==c.$s&&0==a.$s?c.it===a.it:!1};l.prototype.Gs=function(){return this.$s};
return l}();f.XM=R})(fa||(fa={}));(function(f){f.gh=function(){function R(){}R.vb=function(l,c,a,b,d,e,g,h){if(null!=e||null!=g||null!=h){b=f.C.ba(b);c=f.C.ba(c);a=f.C.ba(a);d=f.C.ba(d);1.570796326794897<f.l.J(a)&&(a=f.l.ub(3.141592653589793,a)-a,c=f.C.ba(c+3.141592653589793));1.570796326794897<f.l.J(d)&&(d=f.l.ub(3.141592653589793,d)-d,b=f.C.ba(b+3.141592653589793));var k=f.C.ba(b-c);if(f.l.V(a,d)&&(f.l.V(c,b)||f.l.V(f.l.J(a),1.570796326794897)))null!=e&&(e.j=0),null!=g&&(g.j=0),null!=h&&(h.j=0);
else{if(f.l.V(a,-d)){if(f.l.V(f.l.J(a),1.570796326794897)){null!=e&&(e.j=3.141592653589793*l);null!=g&&(g.j=0<a?f.C.ba(3.141592653589793-f.C.ba(b)):f.C.ba(b));null!=h&&(h.j=0<a?f.C.ba(b):f.C.ba(3.141592653589793-f.C.ba(b)));return}if(f.l.V(f.l.J(k),3.141592653589793)){null!=e&&(e.j=3.141592653589793*l);null!=g&&(g.j=0);null!=h&&(h.j=0);return}}var m=1.570796326794897==f.l.J(a)?0:Math.cos(a),n=Math.sin(a),p=1.570796326794897==f.l.J(d)?0:Math.cos(d),x=Math.sin(d),Q=1.570796326794897==f.l.J(k)?0:Math.cos(k),
V=3.141592653589793==f.l.J(k)?0:Math.sin(k);if(null!=e){var ca=Math.sin((d-a)/2);k=Math.sin(k/2);e.j=2*Math.asin(Math.sqrt(ca*ca+m*p*k*k))*l}null!=g&&(g.j=f.l.V(f.l.J(a),1.570796326794897)?0>a?b:f.C.ba(3.141592653589793-b):Math.atan2(p*V,m*x-n*p*Q));null!=h&&(f.l.V(f.l.J(d),1.570796326794897)?h.j=0>d?c:f.C.ba(3.141592653589793-c):(h.j=Math.atan2(m*V,x*m*Q-p*n),h.j=f.C.ba(h.j+3.141592653589793)))}}};R.Bf=function(l,c,a,b,d,e,g){if(null!=e||null!=g){c=f.C.ba(c);a=f.C.ba(a);1.570796326794897<f.l.J(a)&&
(a=f.l.ub(3.141592653589793,a)-a,c=f.C.ba(c+3.141592653589793));f.l.V(f.l.J(a),1.570796326794897)&&(c=0);d=f.C.ba(d);var h=f.l.V(f.l.J(d),1.570796326794897)?0:Math.cos(d),k=f.l.V(f.l.J(d),3.141592653589793)?0:Math.sin(d),m=f.l.V(f.l.J(a),1.570796326794897)?0:Math.cos(a),n=Math.sin(a);l=b/l;b=f.l.V(f.l.J(l),1.570796326794897)?0:Math.cos(l);var p=f.l.V(f.l.J(l),3.141592653589793)?0:Math.sin(l),x=Math.asin(n*b+m*p*h);null!=g&&(g.j=x);null!=e&&(e.j=f.l.V(f.l.J(x),1.570796326794897)?f.l.V(a,-x)?0>x?d:
f.C.ba(3.141592653589793-d):c:f.l.V(f.l.J(a),1.570796326794897)&&f.l.V(l,3.141592653589793)?0>a?d:f.C.ba(3.141592653589793-d):f.C.ba(c+Math.atan2(p*k,m*b-n*p*h)))}};return R}()})(fa||(fa={}));(function(f){f.$k=function(){function R(){}R.vb=function(l,c,a,b,d,e,g,h,k){var m=new f.da(0),n=new f.da(0),p=[0,0,0],x=[0,0,0],Q=[0,0,0],V=new f.da(0),ca=new f.da(0),ba=new f.da(0),ea=new f.da(0),da=new f.da(0);if(null!=g||null!=h||null!=k)if(f.l.Ai(c))f.gh.vb(l,a,b,d,e,g,h,k);else{d=f.C.ba(d);a=f.C.ba(a);var ma=
f.C.ba(d-a);if(f.l.V(b,e)&&(f.l.V(a,d)||f.l.V(f.l.J(b),1.570796326794897)))null!=g&&(g.j=0),null!=h&&(h.j=0),null!=k&&(k.j=0);else{if(f.l.V(b,-e)){if(f.l.V(f.l.J(b),1.570796326794897)){null!=g&&(g.j=2*f.C.Hg(l,c));null!=h&&(h.j=0<b?f.C.ba(3.141592653589793-f.C.ba(d)):f.C.ba(d));null!=k&&(k.j=0<b?f.C.ba(d):f.C.ba(3.141592653589793-f.C.ba(d)));return}f.l.V(f.l.J(ma),3.141592653589793)&&(null!=g&&(g.j=2*f.C.Hg(l,c)),null!=h&&(h.j=0),null!=k&&(k.j=0))}else if(f.l.V(f.l.J(b),1.570796326794897)||f.l.V(f.l.J(e),
1.570796326794897))f.l.V(f.l.J(b),1.570796326794897)?a=d:d=a;var za=0;if(0>ma){za=1;var Ba=a;a=d;d=Ba;Ba=b;b=e;e=Ba}ma=f.C.Wt(c,b);var Ea=f.C.Wt(c,e);if(null!=h||null!=k)f.gh.vb(l,a,ma,d,Ea,null,m,n),m=Math.atan2(Math.sin(m.j)*Math.cos(b-ma),Math.cos(m.j)),n=Math.atan2(Math.sin(n.j)*Math.cos(e-Ea),Math.cos(n.j)),0!=za&&(Ba=m,m=n,n=Ba),null!=h&&(h.j=m),null!=k&&(k.j=n);null!=g&&(f.C.hk(1,c,b,a,0,ba,ea,da),p[0]=ba.j,p[1]=ea.j,p[2]=da.j,f.C.hk(1,c,e,d,0,ba,ea,da),x[0]=ba.j,x[1]=ea.j,x[2]=da.j,Q[0]=p[1]*
x[2]-x[1]*p[2],Q[1]=-(p[0]*x[2]-x[0]*p[2]),Q[2]=p[0]*x[1]-x[0]*p[1],c=1-f.C.gm(c,f.C.nr(c,f.C.Rj(c,Math.acos(Q[2]/Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]+Q[2]*Q[2]))))),c*=2-c,h=Math.atan2(-Q[1],-Q[0]),Q=f.C.ba(h-1.570796326794897),h=f.C.ba(h+1.570796326794897),Q=f.l.J(f.C.ba(a-Q))<=f.l.J(f.C.ba(a-h))?Q:h,f.gh.vb(1,Q,0,a,ma,V,null,null),f.gh.vb(1,Q,0,d,Ea,ca,null,null),3.141592653589793<V.j+ca.j&&(Q=f.C.ba(Q+3.141592653589793),f.gh.vb(1,Q,0,a,ma,V,null,null),f.gh.vb(1,Q,0,d,Ea,ca,null,null)),V.j*=f.l.ub(1,
b),ca.j*=f.l.ub(1,e),V.j=f.C.Rj(c,V.j),ca.j=f.C.Rj(c,ca.j),a=f.C.q(l,c,V.j),l=f.C.q(l,c,ca.j),g.j=f.l.J(l-a))}}};R.Bf=function(l,c,a,b,d,e,g,h){var k=0,m=new f.da(0),n=new f.da(0),p=[0,0,0],x=[0,0,0],Q=new f.da(0),V=new f.da(0),ca=new f.da(0);if(null!=g||null!=h)if(f.l.Ai(c))f.gh.Bf(l,a,b,d,e,g,h);else if(f.l.qd(d))null!=g&&(g.j=a),null!=h&&(h.j=b);else if(e=f.C.ba(e),0>d&&(d=f.l.J(d),e=f.C.ba(e+3.141592653589793)),a=f.C.ba(a),b=f.C.ba(b),1.570796326794897<f.l.J(b)&&(a=f.C.ba(a+3.141592653589793),
b=f.l.ub(3.141592653589793,b)-b),f.l.V(f.l.J(b),1.570796326794897)&&(a=0),f.l.qd(b)){var ba=f.l.J(1.570796326794897-f.l.J(e));ba=f.C.Rj(c,ba);ba=1-f.C.gm(c,f.C.nr(c,ba));ba*=2-ba;l=d/f.C.Hg(l,ba)*1.570796326794897;l=f.C.kr(ba,l);l=f.C.Wt(ba,l);f.gh.Bf(1,a,b,l,e,g,m);null!=h&&(k=m.j);null!=h&&(h.j=f.C.Rj(c,k))}else if(f.l.V(f.l.J(b),1.570796326794897))k=f.C.Hg(l,c),m=2*k,l=f.l.ub(1.570796326794897,b),e=0<l?f.C.ba(3.141592653589793-e):e,b=k-d,f.l.J(b)<=k?null!=g&&(g.j=e):(b=Math.floor(d/m),0==f.L.truncate(b%
2)?(null!=g&&(g.j=e),d-=b*m):(null!=g&&(g.j=f.C.ba(e+3.141592653589793)),d=(b+1)*m-d),b=k-d),null!=h&&(h.j=f.C.kr(c,b/k*l));else{ba=f.C.Wt(c,b);e=Math.atan2(Math.sin(e),Math.cos(e)*Math.cos(b-ba));var ea=f.L.truncate(f.l.ub(1,ba))*(1.570796326794897>=f.l.J(e)?1:-1);e=f.C.ba(a+Math.atan(Math.tan(e)*-Math.sin(ba)));f.gh.vb(l,e,0,a,ba,null,n,null);ba=f.l.J(1.570796326794897-f.l.J(n.j));ba=f.C.Rj(c,ba);ba=1-f.C.gm(c,f.C.nr(c,ba));ba*=2-ba;f.C.hk(1,c,0,e,0,Q,V,ca);p[0]=Q.j;p[1]=V.j;p[2]=ca.j;f.C.hk(1,
c,b,a,0,Q,V,ca);x[0]=Q.j;x[1]=V.j;x[2]=ca.j;b=Math.acos((p[0]*x[0]+p[1]*x[1]+p[2]*x[2])/Math.sqrt(x[0]*x[0]+x[1]*x[1]+x[2]*x[2]));b=f.C.Rj(ba,b);b=f.C.q(l,ba,b)+d*ea;d=0<b?n.j:f.C.ba(n.j+3.141592653589793);l=f.l.J(b)/f.C.Hg(l,ba)*1.570796326794897;l=f.C.kr(ba,l);l=f.C.Wt(ba,l);f.gh.Bf(1,e,0,l,d,g,m);null!=h&&(k=m.j);null!=h&&(h.j=f.C.Rj(c,k))}};return R}()})(fa||(fa={}));(function(f){f.Ju=function(){function R(){}R.vb=function(l,c,a,b,d,e,g,h,k){var m=0,n=0,p=0;if(null!=g||null!=h||null!=k)if(f.l.Ai(c))f.gh.vb(l,
a,b,d,e,g,h,k);else{var x=f.C.ba(d-a);if(f.l.V(b,e)&&(f.l.qd(x)||f.l.V(f.l.J(b),1.570796326794897)))null!=g&&(g.j=0),null!=h&&(h.j=0),null!=k&&(k.j=0);else{if(f.l.V(b,-e)){if(f.l.V(f.l.J(b),1.570796326794897)){null!=g&&(g.j=2*f.C.Hg(l,c));null!=h&&(h.j=0<b?f.C.ba(3.141592653589793-f.C.ba(d)):f.C.ba(d));null!=k&&(k.j=0<b?f.C.ba(d):f.C.ba(3.141592653589793-f.C.ba(d)));return}f.l.V(f.l.J(x),3.141592653589793)&&(null!=g&&(g.j=2*f.C.Hg(l,c)),null!=h&&(h.j=0),null!=k&&(k.j=0))}else{if(f.l.V(f.l.J(b),1.570796326794897)||
f.l.V(f.l.J(e),1.570796326794897)){f.$k.vb(l,c,a,b,d,e,g,h,k);return}if(f.l.qd(x)||f.l.V(f.l.J(x),3.141592653589793)){f.$k.vb(l,c,a,b,d,e,g,h,k);return}}var Q=1-Math.sqrt(1-c),V=c/(1-c),ca=l*(1-Q);l=f.C.nr(c,b);var ba=f.C.nr(c,e);c=1.570796326794897==f.l.J(l)?0:Math.cos(l);var ea=Math.sin(l),da=1.570796326794897==f.l.J(ba)?0:Math.cos(ba),ma=Math.sin(ba),za=x,Ba=Math.cos(za),Ea=Math.sin(za),Ma=1,Pa=0;do{var Ra=za,Qa=Math.sqrt(Math.pow(da*Ea,2)+Math.pow(c*ma-ea*da*Ba,2)),Sa=ea*ma+c*da*Ba,Ta=Math.atan2(Qa,
Sa);if(0==Qa){Ma=0;break}var Ua=c*da*Ea/Qa;m=Math.cos(Math.asin(Ua));m*=m;n=Sa-2*ea*ma/m;1<f.l.J(n)&&(n=f.l.ub(1,n));p=n*n;za=Q/16*m*(4+Q*(4-3*m));za=x+(1-za)*Q*Ua*(Ta+za*Qa*(n+za*Sa*(2*p-1)));Ba=Math.cos(za);Ea=Math.sin(za);Pa++;if(3.141592653589793<f.l.J(za)&&30<Pa){Ma=0;break}}while(5E3>=Pa&&!f.l.V(Ra,za));if(0!=Ma)V*=m,Q=V*(256+V*(-128+V*(74-47*V)))/1024,null!=g&&(g.j=ca*(1+V*(4096+V*(-768+V*(320-175*V)))/16384)*(Ta-Q*Qa*(n+Q/4*(Sa*(2*p-1)-Q/6*n*(4*Qa*Qa-3)*(4*p-3))))),null!=h&&(h.j=f.l.V(f.l.J(b),
1.570796326794897)?0>b?d:f.C.ba(3.141592653589793-d):Math.atan2(da*Ea,c*ma-ea*da*Ba)),null!=k&&(f.l.V(f.l.J(e),1.570796326794897)?k.j=0>e?a:f.C.ba(3.141592653589793-a):(k.j=Math.atan2(c*Ea,c*ma*Ba-ea*da),k.j=f.C.ba(k.j+3.141592653589793)));else{za=f.l.ub(3.141592653589793,x);Sa=ea*ma-c*da;Ta=Math.acos(Sa);Qa=Math.sin(Ta);m=1;Pa=Ua=0;do p=Ua,m*=m,Ba=m*m,Ua=Q*m*(1+Q+Q*Q),n=Q*Q*Ba*(1+2.25*Q),Ma=Q*Q*Q*Ba*m,Ba=1-.25*Ua+.1875*n-.1953125*Ma,Ua=.25*Ua-.25*n+.29296875*Ma,Ea=.03125*n-.05859375*Ma,Ma*=.00651041666666667,
n=Sa-2*ea*ma/m,1<f.l.J(n)&&(n=f.l.ub(1,n)),m=Math.acos(n),Sa=Math.cos(2*m),Ra=Math.cos(3*m),Ua=f.l.V(b,-e)?f.C.ba(3.141592653589793-x)/(3.141592653589793*Q*Ba):f.C.ba(za-x)/(Q*(Ba*Ta+Ua*Qa*n+Ea*Math.sin(2*Ta)*Sa+Ma*Math.sin(3*Ta)*Ra)),Ea=Ua*Qa/(c*da),za=1.570796326794897<f.l.J(x)?f.l.ub(3.141592653589793,Ea)-Math.asin(Ea):Math.asin(Ea),Ba=Math.cos(za),Qa=Math.sqrt(Math.pow(da*Ea,2)+Math.pow(c*ma-ea*da*Ba,2)),Ta=3.141592653589793-Math.asin(f.l.J(Qa)),Sa=Math.cos(Ta),m=Math.cos(Math.asin(Ua)),Pa++;
while(70>=Pa&&!f.l.V(p,Ua));null!=g&&(m*=m,V*=m,Ba=1+V*(4096+V*(-768+V*(320-175*V)))/16384,f.l.V(b,-e)?g.j=3.141592653589793*ca*Ba:(n=Sa-2*ea*ma/m,m=Math.acos(n),Sa=Math.cos(2*m),Ra=Math.cos(3*m),g.j=ca*(Ba*Ta+V*(-512+V*(128+V*(-60+35*V)))/2048*Qa*n+V*(-4+5*V)/6144*V*V*Math.sin(2*Ta)*Sa+Ma*Math.sin(3*Ta)*Ra+-7.62939453125E-5*V*V*V*V*Math.sin(4*Ta)*Math.cos(4*m))));null!=h&&(f.l.qd(b)&&f.l.qd(e)?(m=Math.sqrt(1-Ua*Ua),h.j=Math.acos(m),0>x&&(h.j*=-1)):f.l.V(f.l.J(b),1.570796326794897)?h.j=0>b?d:f.C.ba(3.141592653589793-
d):(g=Ua/c,ca=Math.sqrt(1-g*g),0>c*ma-ea*da*Math.cos(za)&&(ca*=-1),h.j=Math.atan2(g,ca),f.l.V(b,-e)&&f.l.J(f.C.ba(a-d))>3.141592653589793*(1-Q*Math.cos(b))&&(0<b&&1.570796326794897>f.l.J(h.j)||0>b&&1.570796326794897<f.l.J(h.j))&&(h.j=f.l.ub(3.141592653589793,h.j)-h.j)));if(null!=k)if(f.l.qd(b)&&f.l.qd(e))m=Math.sqrt(1-Ua*Ua),k.j=Math.acos(m),0<=x&&(k.j*=-1);else if(f.l.V(f.l.J(e),1.570796326794897))k.j=0>e?a:f.C.ba(3.141592653589793-a);else if(x=Ua/da,g=Math.sqrt(1-x*x),ca=Math.sin(za/2),0>Math.sin(ba-
l)-2*c*ma*ca*ca&&(g*=-1),k.j=Math.atan2(x,g),k.j=f.C.ba(k.j+3.141592653589793),f.l.V(b,-e)&&!f.l.qd(b)&&!f.l.V(f.l.J(b),1.570796326794897)&&f.l.J(f.C.ba(a-d))>3.141592653589793*(1-Q*Math.cos(b))&&(null!=h?ca=h.j:(g=Ua/c,ca=Math.sqrt(1-g*g),0>c*ma-ea*da*Math.cos(za)&&(ca*=-1),ca=Math.atan2(g,ca),f.l.V(b,-e)&&f.l.J(f.C.ba(a-d))>3.141592653589793*(1-Q*Math.cos(b))&&(0<b&&1.570796326794897>f.l.J(ca)||0>b&&1.570796326794897<f.l.J(ca))&&(ca=f.l.ub(3.141592653589793,ca)-ca)),1.570796326794897>=f.l.J(ca)&&
1.570796326794897<f.l.J(k.j)||1.570796326794897<=f.l.J(ca)&&1.570796326794897>f.l.J(k.j)))k.j=-1*f.C.ba(k.j+3.141592653589793)}}}};R.Bf=function(l,c,a,b,d,e,g,h){if(null!=g||null!=h)if(f.l.Ai(c))f.gh.Bf(l,a,b,d,e,g,h);else if(e=f.C.ba(e),f.l.V(f.l.J(b),1.570796326794897)||f.l.qd(e)||f.l.V(f.l.J(e),3.141592653589793))f.$k.Bf(l,c,a,b,d,e,g,h);else{var k=1.570796326794897==f.l.J(e)?0:Math.cos(e),m=3.141592653589793==f.l.J(e)?0:Math.sin(e);f.l.V(f.l.J(b),1.570796326794897)&&(a=0);e=1-Math.sqrt(1-c);var n=
f.C.nr(c,b);b=1.570796326794897==f.l.J(n)?0:Math.cos(n);var p=Math.sin(n);n=Math.atan2(Math.tan(n),k);var x=b*m,Q=x*x,V=1-Q,ca=c/(1-c)*V;c=ca*(256+ca*(-128+ca*(74-47*ca)))/1024;var ba=c/4,ea=c/6,da=d/(l*(1-e)*(1+ca*(4096+ca*(-768+ca*(320-175*ca)))/16384)),ma=da;do{var za=ma;d=1.570796326794897==f.l.J(ma)?0:Math.cos(ma);ca=3.141592653589793==f.l.J(ma)?0:Math.sin(ma);var Ba=ca*ca;l=Math.cos(2*n+ma);ma=l*l;ma=c*ca*(l+ba*(d*(2*ma-1)-ea*l*(4*Ba-3)*(4*ma-3)))+da}while(!f.l.V(za,ma));d=1.570796326794897==
f.l.J(ma)?0:Math.cos(ma);ca=3.141592653589793==f.l.J(ma)?0:Math.sin(ma);null!=g&&(m=Math.atan2(ca*m,b*d-p*ca*k),V=e/16*V*(4+e*(4-3*V)),l=Math.cos(2*n+ma),g.j=f.C.ba(a+(m-(1-V)*e*x*(ma+V*ca*(l+V*d*(2*l*l-1))))));null!=h&&(V=p*ca-b*d*k,V=(1-e)*Math.sqrt(Q+V*V),h.j=Math.atan2(p*d+b*ca*k,V))}};return R}()})(fa||(fa={}));(function(f){f.wD=function(){function R(){}R.vb=function(l,c,a,b,d,e,g,h,k){var m=f.C.ba(d-a),n=f.l.V(f.l.J(b),1.570796326794897),p=f.l.V(f.l.J(e),1.570796326794897);if(f.l.V(b,e)&&(f.l.qd(m)||
n))null!=g&&(g.j=0),null!=h&&(h.j=0),null!=k&&(k.j=0);else{if(f.l.Ai(c)){var x=Math.sin(b),Q=Math.sin(e);x=Math.sqrt((1+x)/(1-x));Q=Math.sqrt((1+Q)/(1-Q));x=Math.log(Q)-Math.log(x);x=Math.atan2(m,x);null!=g&&(g.j=f.l.V(b,e)?f.l.J(l*Math.cos(b)*m):f.l.J((l*e-l*b)/Math.cos(x)))}else Q=f.C.wx(c,e),x=Math.sin(f.C.wx(c,b)),Q=Math.sin(Q),x=Math.sqrt((1+x)/(1-x)),Q=Math.sqrt((1+Q)/(1-Q)),x=Math.log(Q)-Math.log(x),x=Math.atan2(m,x),null!=g&&(f.l.V(b,e)?g.j=f.l.J(l*m*Math.cos(b)/f.C.gm(c,b)):(m=f.C.q(l,c,
b),l=f.C.q(l,c,e),g.j=f.l.J((l-m)/Math.cos(x))));if(null!=h||null!=k)g=f.C.ba(x+3.141592653589793),n&&p||!n&&!p||(n?x=0>b?d:f.C.ba(3.141592653589793-d):p&&(g=0>e?a:f.C.ba(3.141592653589793-a))),null!=h&&(h.j=x),null!=k&&(k.j=g)}};R.Bf=function(l,c,a,b,d,e,g,h){e=f.C.ba(e);0>d&&(d=f.l.J(d),e=f.C.ba(e+3.141592653589793));f.l.Ai(c)?f.l.V(f.l.J(b),1.570796326794897)?(a=0>b?e:f.C.ba(3.141592653589793-e),e=d/l%6.283185307179586,3.141592653589793>=e?l=b-f.l.ub(e,b):(a=f.C.ba(a+3.141592653589793),l=-b+f.l.ub(e-
3.141592653589793,b))):f.l.V(f.l.J(e),1.570796326794897)?(a=f.C.ba(a+f.l.ub(d,e)/(l*Math.cos(b))),l=b):(l=b+d*Math.cos(e)/l,1.570796326794897<f.l.J(l)&&(l=1.570796326794897),f.l.V(f.l.J(l),1.570796326794897)&&(f.l.qd(e)||f.l.V(f.l.J(e),3.141592653589793))||(1.570796316258184<f.l.J(l)&&(l=f.l.ub(1.570796316258184,l)),c=Math.sin(b),b=Math.sin(l),c=Math.sqrt((1+c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=f.C.ba(a+Math.tan(e)*c))):f.l.V(f.l.J(b),1.570796326794897)?(a=0>b?e:f.C.ba(3.141592653589793-
e),e=d/f.C.WX(l,c),e%=6.283185307179586,3.141592653589793>=e?l=b-f.l.ub(e,b):(a=f.C.ba(a+3.141592653589793),l=-b+f.l.ub(e-3.141592653589793,b)),l=f.C.kr(c,l)):f.l.V(f.l.J(e),1.570796326794897)?(a=f.C.ba(a+f.l.ub(d,e)*f.C.gm(c,b)/(l*Math.cos(b))),l=b):(l=1.570796326794897*(d*Math.cos(e)+f.C.q(l,c,b))/f.C.Hg(l,c),1.570796326794897<f.l.J(l)&&(l=f.l.ub(1.570796326794897,l)),l=f.C.kr(c,l),f.l.V(f.l.J(l),1.570796326794897)&&(f.l.qd(e)||f.l.V(f.l.J(e),3.141592653589793))||(d=f.C.wx(c,b),b=f.C.wx(c,l),1.570796316258184<
f.l.J(b)&&(b=f.l.ub(1.570796316258184,l),l=f.C.IP(c,b)),c=Math.sin(d),b=Math.sin(b),c=Math.sqrt((1+c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=f.C.ba(a+Math.tan(e)*c)));null!=g&&(g.j=a);null!=h&&(h.j=l)};return R}()})(fa||(fa={}));(function(f){f.gb=function(){function R(){}R.Cz=function(l,c,a,b,d,e,g){f.Ju.vb(l,c,a,b,d,e,null,g,null)};R.Fi=function(l,c,a,b,d,e,g,h){f.Ju.Bf(l,c,a,b,d,e,g,h)};R.Ad=function(l,c,a,b,d,e,g,h,k,m){switch(m){case 2:f.$k.vb(l,c,a,b,d,e,g,h,k);break;case 3:f.xD.vb(l,
c,a,b,d,e,g,h,k);break;case 1:f.wD.vb(l,c,a,b,d,e,g,h,k);break;default:f.Ju.vb(l,c,a,b,d,e,g,h,k)}};R.tj=function(l,c,a,b,d,e,g,h,k){switch(k){case 2:f.$k.Bf(l,c,a,b,d,e,g,h);break;case 3:f.xD.Bf(l,c,a,b,d,e,g,h);break;case 1:f.wD.Bf(l,c,a,b,d,e,g,h);break;default:f.Ju.Bf(l,c,a,b,d,e,g,h)}};return R}()})(fa||(fa={}));(function(f){var R=function(){function c(){this.y=this.x=null}c.construct=function(a){var b=new c;b.x=new f.Wb;b.x.set(a.x);b.y=new f.Wb;b.y.set(a.y);return b};c.GF=function(a,b){var d=
new c;d.x=new f.Wb;d.x.set(a);d.y=new f.Wb;d.y.set(b);return d};c.prototype.xg=function(){return this.x.xg()&&this.y.xg()};c.prototype.value=function(){return f.b.construct(this.x.value(),this.y.value())};return c}();f.b_=R;var l=function(){function c(){this.z=this.y=this.x=null}c.construct=function(a){var b=new c;b.x=new f.Wb;b.x.set(a.x);b.y=new f.Wb;b.y.set(a.y);b.z=new f.Wb;b.z.set(a.z);return b};c.GF=function(a,b,d){var e=new c;e.x=new f.Wb;e.x.set(a);e.y=new f.Wb;e.y.set(b);e.z=new f.Wb;e.z.set(d);
return e};c.prototype.xg=function(){return this.x.xg()&&this.y.xg()&&this.z.xg()};c.prototype.value=function(){return new f.Id(this.x.value(),this.y.value(),this.z.value())};c.prototype.Vh=function(a){var b=new f.Wb,d=new f.Wb,e=new f.Wb;b.Ul(this.x,a.x);d.Ul(this.y,a.y);e.Ul(this.z,a.z);a=new f.Wb;a.nO(b,d);a.add(e);return a};c.prototype.PF=function(a){var b=new c;b.x.Ul(this.y,a.z);b.y.Ul(this.z,a.x);b.z.Ul(this.x,a.y);var d=new f.Wb,e=new f.Wb,g=new f.Wb;d.Ul(this.z,a.y);e.Ul(this.x,a.z);g.Ul(this.y,
a.x);b.x.sub(d);b.y.sub(e);b.z.sub(g);return b};return c}();f.c_=l;f.ty=function(){function c(){}c.PQ=function(a,b,d){var e=b.x;b=b.y;c.hk(1,a,Math.cos(e),Math.sin(e),Math.cos(b),Math.sin(b),d)};c.OQ=function(a,b){var d=new f.Id;c.PQ(a,b,d);return d};c.Q_=function(a,b,d,e,g,h){var k=new f.Id;c.hk(a,b,d,e,g,h,k);return k};c.hk=function(a,b,d,e,g,h,k){a/=Math.sqrt(1-b*h*h);k.H(a*g*d,a*g*e,a*(1-b)*h)};c.Ev=function(a,b){var d=new f.Wb,e=new f.Wb,g=new f.Wb,h=new f.Wb;d.cos(b.x);e.sin(b.x);g.cos(b.y);
h.sin(b.y);var k=new f.Wb;k.set(h);k.Gg(h);k.ep(a);k.ep(-1);k.uO();k.sqrt();b=new f.Wb;b.set(1);b.um(k);k=new f.Wb;k.set(b);k.Gg(g);k.Gg(d);d=new f.Wb;d.set(b);d.Gg(g);d.Gg(e);e=new f.Wb;e.set(b);e.ep(1-a);e.Gg(h);return l.GF(k,d,e)};c.tP=function(a,b,d){var e=b.x,g=b.y;d.ka(Math.atan2(g,e),Math.atan2(b.z,(1-a)*Math.sqrt(e*e+g*g)))};c.F_=function(a,b,d){a=new f.b;c.tP(b,d,a);return a};c.lU=function(a,b,d,e){if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||(Math.abs(b.y)==
.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x)return NaN;e=c.NB(e,Math.min(b.x,d.x),Math.max(b.x,d.x));if(!(new f.uc(b.x,d.x)).contains(e))return NaN;var g=R.construct(b);d=R.construct(d);g=c.Ev(a,g);d=c.Ev(a,d);d=g.PF(d);if(d.z.xg())return b=b.y;var h=new f.Wb;h.set(d.x);h.um(d.z);h.ep(-1);var k=new f.Wb;k.set(d.y);k.um(d.z);k.ep(-1);var m=new f.Wb;m.set(k);m.Gg(k);g=new f.Wb;g.set(h);g.Gg(h);g.add(m);g.sqrt();if(g.xg()||h.xg()&&k.xg())return b=b.y;b=Math.atan2(k.value(),h.value());b=Math.atan2(g.value()*
Math.cos(b-e),1-a);e=c.OQ(a,f.b.construct(e,b));a=new f.Id(e.x,e.y,-e.z);e=d.value().Vh(e);a=d.value().Vh(a);Math.abs(a)<Math.abs(e)&&(b=-b);return b};c.vA=function(a,b,d,e,g){g[0]=NaN;g[1]=NaN;if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||(Math.abs(b.y)==.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x||Math.abs(e)>=.5*Math.PI||0<b.y&&0<d.y&&b.y>e&&d.y>e||0>b.y&&0>d.y&&b.y<e&&d.y<e)return 0;var h=R.construct(b),k=R.construct(d);h=c.Ev(a,h);k=c.Ev(a,k);var m=h.PF(k);
if(m.z.xg())return(new f.uc(b.y,d.y)).contains(e)?(g[0]=b.x,1):0;k=new f.Wb;k.set(m.x);k.um(m.z);k.ep(-1);h=new f.Wb;h.set(m.y);h.um(m.z);h.ep(-1);m=new f.Wb;m.set(h);m.Gg(h);var n=new f.Wb;n.set(k);n.Gg(k);n.add(m);n.sqrt();if(n.xg()||k.xg()&&h.xg())return 0==e?(g[0]=b.x,g[1]=d.x,2):0;a=(1-a)*Math.tan(e)/n.value();if(1<Math.abs(a))return 0;a=Math.acos(a);m=Math.atan2(h.value(),k.value());k=Math.min(b.x,d.x);h=Math.max(b.x,d.x);d=c.NB(m-a,k,h);a=0!=e?c.NB(m+a,k,h):d;e=0;k<=d&&d<=h&&(g[e]=d,e++);a!=
d&&k<=a&&a<=h&&(g[e]=a,e++,2==e&&Math.abs(g[0]-b.x)>Math.abs(g[1]-b.x)&&(b=g[0],g[0]=g[1],g[1]=b));return e};c.NB=function(a,b,d){a>d?(b=Math.ceil((a-d)/(2*Math.PI)),a-=2*b*Math.PI):a<b&&(b=Math.ceil((b-a)/(2*Math.PI)),a+=2*b*Math.PI);return a};c.EA=function(a,b){b[0]>.5*Math.PI?(a[0]+=Math.PI,b[0]=Math.PI-b[0]):b[0]<-.5*Math.PI&&(a[0]-=Math.PI,b[0]=-Math.PI-b[0])};return c}()})(fa||(fa={}));(function(f){f.fM=function(){function R(){}R.GZ=function(l,c){var a=[0,0,0,0],b=new f.b;b.K(c);b.scale(9102==
f.ab.hc(l).Ld().xc()?1:f.ab.hc(l).Ld().gi/3.141592653589793*180);-180>b.x?(b.x-=b.x%360,-180>b.x&&(b.x+=360)):180<b.x&&(b.x-=b.x%360,180<b.x&&(b.x-=360));90<b.y&&(b.y=90);-90>b.y&&(b.y=-90);l=40;c=(l+31)/32;for(var d=-180,e=180,g=l-1,h=c-1;0<=h;h--)for(var k=g-32*h,m=Math.min(32,l-32*h),n=1;n<m;n+=2){var p=.5*(e+d);b.x>=p?(a[h]|=1<<k,d=p):e=p;k-=2;g-=2}d=-90;e=90;g=l-2;for(h=c-1;0<=h;h--)for(k=g-32*h,m=Math.min(32,l-32*h),n=0;n<m;n+=2)p=.5*(e+d),b.y>=p?(a[h]|=1<<k,d=p):e=p,k-=2,g-=2;return R.kR(a,
8,8)};R.kR=function(l,c,a){for(var b=[],d=0;d<c;d++)b[d]="";for(var e=d=0,g=0;g<c;g++){var h=l[d]>>e&31;e+=5;if(31<e){var k=37-e;h&=(1<<k)-1;e-=32;d++;h|=(l[d]&(1<<e)-1)<<k}b[c-1-g]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[h]}if(a>c)for(g=0;g<a-c;g++)b.push("0");else a<c&&(b.length=a);return b.join("")};return R}()})(fa||(fa={}));(function(f){var R={gcstol:[0,2E-9,1,2.241706620489156E-9,2,2.313672246530541E-9,3,8.98240164660333E-9,4,8.982433838020134E-9,5,8.982439417325895E-9,6,8.982466029667677E-9,
7,8.982476760268133E-9,8,8.982492642167149E-9,9,8.98251968292634E-9,10,8.98253685210448E-9,11,8.982546725256576E-9,12,8.982557456049832E-9,13,8.98257333682596E-9,14,8.982575482995276E-9,15,8.982578488197342E-9,16,8.982579775336987E-9,17,8.9825840676828E-9,18,8.982599090925448E-9,19,8.982605529473397E-9,20,8.982609220517402E-9,21,8.982611968030573E-9,22,8.982616260407152E-9,23,8.982620552787834E-9,24,8.982633429954492E-9,25,8.982637722351582E-9,26,8.98264416095491E-9,27,8.982646307158072E-9,28,8.982654891980968E-9,
29,8.982667769246082E-9,30,8.982674207892485E-9,31,8.982680646548117E-9,32,8.982682792768713E-9,33,8.982685798042582E-9,34,8.982689231436652E-9,35,8.98269137766135E-9,36,8.98269266624163E-9,37,8.982705114087017E-9,38,8.982706830791106E-9,39,8.982711958374661E-9,40,8.982712839964735E-9,41,8.982717991496125E-9,42,8.982721424914803E-9,43,8.982723571154887E-9,44,8.982727863638127E-9,45,8.982730868942154E-9,46,8.982734302370678E-9,47,8.982745033612112E-9,48,8.982751472369276E-9,49,8.982755764879183E-9,
50,8.982762203651733E-9,51,8.982764776628385E-9,52,8.982766496171896E-9,53,8.98277722749025E-9,54,8.98278152002477E-9,55,8.98279933943848E-9,56,8.9829143024805E-9,57,8.982922161948598E-9,58,8.98292327314211E-9,59,8.982925667349601E-9,60,8.982932222965576E-9,61,8.982961298941316E-9,62,8.982965524049989E-9,63,8.982994818246099E-9,64,8.982994895706967E-9,65,8.98299489597736E-9,66,8.983000733443498E-9,67,8.983055097289157E-9,68,8.983064111047368E-9,69,8.983111996941178E-9,70,8.983120447446023E-9,71,8.98312748954554E-9,
72,8.983134531656096E-9,73,8.983141573777694E-9,74,8.983148615910332E-9,75,8.983152841195215E-9,76,8.983153545409748E-9,77,8.983153827095593E-9,78,8.98315396793852E-9,79,8.983154249624393E-9,80,8.983155658054012E-9,81,8.983960794340072E-9,82,8.984061344391998E-9,83,8.984072829255685E-9,84,8.984194981201908E-9,85,8.984275233099427E-9,86,8.984326127007554E-9,87,8.984330099816539E-9,88,8.98433275258421E-9,89,8.984333047023206E-9,90,8.984333885258723E-9,91,8.984337959508212E-9,92,8.984365176209457E-9,
93,8.984727360418079E-9,94,8.984901041679577E-9,95,8.98542662091587E-9,96,8.98610024130669E-9,97,8.992894229037531E-9,98,8.993203677616635E-9,99,8.993206178094346E-9,100,8.993216059187305E-9,101,8.99322029394808E-9,102,8.994627867045891E-9,103,9.467559984315793E-9,104,9.46881168618118E-9,105,9.980888154931644E-9,106,9.981105353606775E-9,107,9.983807356573187E-9,108,1.687060485811522E-8,109,1.688447560354875E-8,110,2.176606011487185E-8,111,2.225078816042032E-8,112,2.348476432064694E-8,113,2.348765250187846E-8,
114,2.378108974103778E-8,115,3.14559636297708E-8,116,3.297788621680806E-8,117,3.667892343788279E-8,118,4.235973644320739E-8,119,4.794625900676345E-8,120,7.262742998235812E-8,121,7.499447580246377E-8,122,7.525056410964318E-8,123,7.979913581209237E-8,124,9.662020153976783E-8,125,9.799175562353741E-8,126,9.897353517547472E-8,127,1.02313891987647E-7,128,1.081460541960784E-7,129,1.21905913857622E-7,130,2.246893314238523E-7,131,2.297344808062643E-7,132,2.42984645941825E-7,133,2.754604784282804E-7,134,2.884548130346993E-7,
135,3.370339971357784E-7,136,4.307953346848296E-7,137,5.208707228462029E-7,138,5.509209568565608E-7,139,6.452227422644406E-7,140,6.740679942715567E-7,141,6.861770001566745E-7,142,7.252630318111686E-7,143,7.441010326374328E-7,144,7.742672907173287E-7,145,9.629542775307953E-7,146,1.061032953945969E-6,147,1.143628333594458E-6,148,1.162186197019925E-6,149,1.36418522650196E-6,150,1.367441038498385E-6,151,1.432394487827058E-6,152,1.736235742820677E-6,153,1.848250952034914E-6,154,1.909859317102744E-6,155,
1.975716534933873E-6,156,2.122065907891938E-6,157,2.72837045300392E-6,158,3.183098861837907E-6,159,3.580986219567645E-6,160,3.819718634205488E-6,161,4.09255567950588E-6,162,4.407367654852486E-6,163,4.774648292756861E-6,164,5.161781938115525E-6,165,5.20870722846203E-6,166,5.729577951308232E-6,167,6.031134685587613E-6,168,6.987290184522236E-6,169,9.241254760174569E-6,170,1.145915590261646E-5],pcstol:[0,6.666666666666667E-9,1,2E-8,2,4.970973863636364E-5,3,4.970978156565657E-5,4,4.970980410559237E-5,
5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,
2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,
2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,
2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,
2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,
102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,
102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,
102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,
104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,
4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,
5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,
6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,
6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103E3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,
6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,
6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,
6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,
6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,
6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,
6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,
6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,
103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,
103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,
54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9E3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,
102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,
31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,
5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,
5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,
5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,
10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,
5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,
5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,
7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,
5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,
8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25E3,5,25231,
5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,
32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,
10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,
10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,
5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,
5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],
pcsidc:[[2E3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,
5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,
3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],
[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,
9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],
[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,
30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32E3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,
53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],
[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,
103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,
5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],
gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,
66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,
55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,
55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,
79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,
75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,
37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,
55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,
104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,
104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,
136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],
gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},l={c:[[2E3,
2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],
[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,
9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,
4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],
[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,
9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,
7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9E3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],
[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,
24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],
[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32E3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,
9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,
102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,
103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,
103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,
9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,
3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,
9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,
3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,
9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,
3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,
9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,
5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,
9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,
6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,
9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,
6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,
9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,
6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,
9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,
7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,
9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,
7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,
9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,
8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,
9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,
8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,
9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,
9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,
9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,
9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,
9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,
9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,
9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,
9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};f.Vr=function(){function c(){}c.yz=function(a){!1===c.Rp&&c.iu();var b=c.RR(a);if(-1==b){var d=c.gy(a);d!=a&&(b=c.yz(d))}-1==b&&(d=c.OL(a),
d!=a&&(b=c.yz(d)));return b};c.RR=function(a){return void 0!==c.lx[a]?c.lx[a]:-1};c.OR=function(a){!1===c.Rp&&c.iu();var b=c.aG(a);if(1E38==b){var d=c.gy(a);d!=a&&(b=c.aG(d));if(1E38==b)return 1E-10}return b};c.sU=function(a){if(void 0!==c.qt[a])return!0;var b=c.gy(a);return b!=a&&void 0!==c.qt[b]?!0:!1};c.vU=function(a){if(void 0!==c.Qo[a])return!0;var b=c.gy(a);return b!=a&&void 0!==c.Qo[b]?!0:!1};c.aG=function(a){!1===c.Rp&&c.iu();return void 0!==c.qt[a]?c.qt[a]:void 0!==c.Qo[a]?c.Qo[a]:1E38};
c.OL=function(a){!1===c.Rp&&c.iu();return void 0!==c.GB[a]?c.GB[a]:a};c.gy=function(a){!1===c.Rp&&c.iu();return void 0!==c.HB[a]?c.HB[a]:a};c.iu=function(){for(var a=R,b,d=0;d<a.pcsid.length;d+=2)c.Qo[a.pcsid[d]]=a.pcstol[2*a.pcsid[d+1]+1];for(d=0;d<a.pcsidc.length;d+=1){b=a.pcsidc[d];for(var e=b[0];e<=b[1];e++)c.Qo[e]=a.pcstol[2*b[2]+1]}for(d=0;d<a.gcsid.length;d+=2)c.qt[a.gcsid[d]]=a.gcstol[2*a.gcsid[d+1]+1];for(d=0;d<a.gcsidc.length;d+=1)for(b=a.gcsidc[d],e=b[0];e<=b[1];e++)c.Qo[e]=a.gcstol[2*
b[2]+1];for(d=0;d<l.c.length;d+=1)for(b=l.c[d],e=b[0];e<=b[1];e++)c.lx[e]=b[2];for(d=0;d<l.nc.length;d+=2)c.lx[l.nc[d]]=l.nc[d+1];l=null;for(d=0;d<a.newtoold.length;d+=2)c.GB[a.newtoold[d+1]]=a.newtoold[d],c.HB[a.newtoold[d]]=a.newtoold[d+1];R=null;c.Rp=!0};c.Rp=!1;c.qt=[];c.Qo=[];c.GB=[];c.HB=[];c.lx=[];return c}()})(fa||(fa={}));(function(f){function R(c){return 0===c.length?'""':'"'==c[0]||"."==c[0]||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var l=[];f.FD=function(){function c(){}c.QR=function(a){try{for(var b=
0;b<l.length;b++)if(l[b].wkttext===a)return l[b].unit;for(var d,e=b="",g=!1,h=0;h<a.length;h++){var k=a[h];!0===g?'"'==k?'"'==a[h+1]?b+=k:g=g=!1:b+=k:/[\s]/.test(k)||(","==k?(e=""!==b?e+(R(b)+","):e+",",b=""):")"==k||"]"==k?(e=""!==b?e+(R(b)+"]}"):e+"]}",b=""):"("==k||"["==k?(e+='{ "entity": "'+b.toUpperCase().trim()+'", "values":[',b=""):'"'==k?(g=!0,b=""):b+=k)}d=JSON.parse(e);var m=c.$F(d);if(null===m)return null;d=null;for(k=0;k<m.values.length;k++)if("object"===typeof m.values[k]&&"UNIT"===m.values[k].entity){d=
m.values[k];break}if(null===d)return null;var n=f.Uc.iQ("GEOGCS"===m.entity?1:0,d.values[1],d.values[2]);l.push({wkttext:a,unit:n});10<l.length&&l.shift();return n}catch(p){return null}};c.$F=function(a){if(null===a)return null;if("GEOGCS"===a.entity||"PROJCS"===a.entity)return a;for(var b=[],d=0;d<a.values.length;d++)if("object"===typeof a.values[d]&&void 0!==a.values[d].entity){if("GEOGCS"===a.values[d].entity||"PROJCS"==a.values[d].entity)return a.values[d];b.push(a.values[d])}for(a=0;a<b.length;a++)if(d=
c.$F(b[a]),null!==d)return d;return null};c.PR=function(a){var b=-1;if(null!=a&&0<a.length){var d=a.indexOf("PROJCS");if(0<=d){var e=0;d=a.lastIndexOf("UNIT");if(0<=d&&(d=a.indexOf(",",d+4),0<d)){d++;var g=a.indexOf("]",d+1);if(0<g)try{e=parseFloat(a.substring(d,g))}catch(k){e=0}}0<e&&(b=.001/e)}else if(d=a.indexOf("GEOGCS"),0<=d){var h=0;e=0;d=a.indexOf("SPHEROID",d+6);if(0<d&&(d=a.indexOf(",",d+8),0<d)){d++;g=a.indexOf(",",d+1);if(0<g)try{h=parseFloat(a.substring(d,g))}catch(k){h=0}if(0<h&&(d=a.indexOf("UNIT",
g+1),0<=d&&(d=a.indexOf(",",d+4),0<d&&(d++,g=a.indexOf("]",d+1),0<g))))try{e=parseFloat(a.substring(d,g))}catch(k){e=0}}0<h&&0<e&&(b=.001/(h*e))}}return b};return c}()})(fa||(fa={}));(function(f){(function(l){l[l.NONE=0]="NONE";l[l.LINEAR=1]="LINEAR";l[l.ANGULAR=2]="ANGULAR"})(f.oM||(f.oM={}));(function(l){l[l.enumFloat=0]="enumFloat";l[l.enumDouble=1]="enumDouble";l[l.enumInt32=2]="enumInt32";l[l.enumInt64=3]="enumInt64";l[l.enumInt8=4]="enumInt8";l[l.enumInt16=5]="enumInt16"})(f.YM||(f.YM={}));
(function(l){l[l.POSITION=0]="POSITION";l[l.Z=1]="Z";l[l.M=2]="M";l[l.ID=3]="ID";l[l.NORMAL=4]="NORMAL";l[l.TEXTURE1D=5]="TEXTURE1D";l[l.TEXTURE2D=6]="TEXTURE2D";l[l.TEXTURE3D=7]="TEXTURE3D";l[l.ID2=8]="ID2";l[l.MAXSEMANTICS=10]="MAXSEMANTICS"})(f.Mh||(f.Mh={}));var R=function(){function l(c,a){this.Dt=this.Ge=null;this.gr=this.Ca=0;this.Bh=this.hg=null;this.Fl=0;if(void 0!==a){this.Ca=a.Ca;this.gr=a.gr;this.hg=a.hg.slice(0);this.Bh=a.Bh.slice(0);this.Fl=a.Fl;this.Dt=[];for(c=a=0;c<this.Ca;c++)this.Dt[c]=
a,a+=l.Sa(this.hg[c]);this.gr=a;this.Ge=[];for(c=0;c<this.Ca;c++){a=l.Sa(this.jd(c));for(var b=l.me(this.jd(c)),d=0;d<a;d++)this.Ge[this.Dt[c]+d]=b}}else this.gr=this.Ca=0}l.prototype.jd=function(c){if(0>c||c>this.Ca)throw f.f.I();return this.hg[c]};l.prototype.Yf=function(c){return this.Bh[c]};l.Uz=function(c){return l.RN[c]};l.sl=function(c){return l.$N[c]};l.aT=function(c){return l.aO[c]};l.a0=function(c){return l.aT(l.sl(c))*l.Sa(c)};l.Sa=function(c){return l.zN[c]};l.tU=function(c){return 2>
c};l.k0=function(c){return l.tU(l.sl(c))};l.prototype.hasAttribute=function(c){return 0<=this.Bh[c]};l.prototype.VG=function(){return this.hasAttribute(1)};l.me=function(c){return l.OD[c]};l.prototype.bT=function(c){return this.Dt[c]};l.pH=function(c,a){return l.OD[c]===a};l.$_=function(c){if(4==c)return 2;if(8==c)return 3;throw f.f.I();};l.prototype.Ib=function(c){return this===c};l.prototype.Un=function(){for(var c=f.L.Zh(this.hg[0]),a=1;a<this.Ca;a++)c=f.L.Zh(this.hg[a],c);return c};l.prototype.dk=
function(c){return this.Dt[c]};l.prototype.fc=function(){return this.Fl};l.prototype.Jd=function(c){return this.hg[c]};l.OD=[0,0,NaN,0,0,0,0,0,0];l.RN=[1,1,1,0,2,1,1,1,0];l.$N=[1,1,1,2,0,0,0,0,2];l.aO=[4,8,4,8,1,2];l.zN=[2,1,1,1,3,1,2,3,2];return l}();f.oa=R})(fa||(fa={}));(function(f){function R(g,h,k){var m=h-(g=new e(g)).e,n=g.Vc;n.length>++h&&l(g,m,e.Ku);for(n[0]?k?m=h:(n=g.Vc,m=g.e+m+1):++m;n.length<m;n.push(0));m=g.e;return 1===k||k&&(h<=m||m<=a)?(0>g.Fd&&n[0]?"-":"")+(1<n.length?n[0]+"."+n.join("").slice(1):
n[0])+(0>m?"e":"e+")+m:g.toString()}function l(g,h,k,m){var n=g.Vc,p=g.e+h+1;1===k?m=5<=n[p]:2===k?m=5<n[p]||5==n[p]&&(m||0>p||void 0!==n[p+1]||n[p-1]&1):3===k?m=m||void 0!==n[p]||0>p:(m=!1,0!==k&&c("!Big.RM!"));if(1>p||!n[0])m?(g.e=-h,g.Vc=[1]):g.Vc=[g.e=0];else{n.length=p--;if(m)for(;9<++n[p];)n[p]=0,p--||(++g.e,n.unshift(1));for(p=n.length;!n[--p];n.pop());}return g}function c(g){g=Error(g);g.name="BigError";throw g;}var a=-7,b=21,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,e=function(){function g(h){if(h instanceof
g)this.Fd=h.Fd,this.e=h.e,this.Vc=h.Vc.slice();else{var k,m,n;0===h&&0>1/h?h="-0":d.test(h+="")||c(NaN);this.Fd="-"==h.charAt(0)?(h=h.slice(1),-1):1;-1<(k=h.indexOf("."))&&(h=h.replace(".",""));0<(m=h.search(/e/i))?(0>k&&(k=m),k+=+h.slice(m+1),h=h.substring(0,m)):0>k&&(k=h.length);for(m=0;"0"==h.charAt(m);m++);if(m==(n=h.length))this.Vc=[this.e=0];else{for(;"0"==h.charAt(--n););this.e=k-m-1;this.Vc=[];for(k=0;m<=n;this.Vc[k++]=+h.charAt(m++));}}}g.prototype.abs=function(){var h=new g(this);h.Fd=1;
return h};g.prototype.cmp=function(h){var k=this.Vc,m=(h=new g(h)).Vc,n=this.Fd,p=h.Fd,x=this.e,Q=h.e;if(!k[0]||!m[0])return k[0]?n:m[0]?-p:0;if(n!=p)return n;h=0>n;if(x!=Q)return x>(Q^h)?1:-1;n=-1;for(p=(x=k.length)<(Q=m.length)?x:Q;++n<p;)if(k[n]!=m[n])return k[n]>(m[n]^h)?1:-1;return x==Q?0:x>(Q^h)?1:-1};g.prototype.um=function(h){var k=this.Vc,m=(h=new g(h)).Vc,n=this.Fd==h.Fd?1:-1,p=g.Pr;(p!==~~p||0>p||1E6<p)&&c("!Big.DP!");if(!k[0]||!m[0])return k[0]==m[0]&&c(NaN),m[0]||c(n/0),new g(0*n);var x,
Q,V=m.slice(),ca=x=m.length,ba=k.length,ea=k.slice(0,x),da=ea.length,ma=h,za=ma.Vc=[],Ba=0,Ea=p+(ma.e=this.e-h.e)+1;ma.Fd=n;n=0>Ea?0:Ea;for(V.unshift(0);da++<x;ea.push(0));do{for(Q=0;10>Q;Q++){if(x!=(da=ea.length))var Ma=x>da?1:-1;else{var Pa=-1;for(Ma=0;++Pa<x;)if(m[Pa]!=ea[Pa]){Ma=m[Pa]>ea[Pa]?1:-1;break}}if(0>Ma){for(h=da==x?m:V;da;){if(ea[--da]<h[da]){for(Pa=da;Pa&&!ea[--Pa];ea[Pa]=9);--ea[Pa];ea[da]+=10}ea[da]-=h[da]}for(;!ea[0];ea.shift());}else break}za[Ba++]=Ma?Q:++Q;ea[0]&&Ma?ea[da]=k[ca]||
0:ea=[k[ca]]}while((ca++<ba||void 0!==ea[0])&&n--);za[0]||1==Ba||(za.shift(),ma.e--);Ba>Ea&&l(ma,p,g.Ku,void 0!==ea[0]);return ma};g.prototype.AT=function(){return 0<this.cmp(0)};g.prototype.JU=function(){return 0>this.cmp(0)};g.prototype.Rt=function(h){var k,m=this.Fd,n=(h=new g(h)).Fd;if(m!=n)return h.Fd=-n,this.kJ(h);var p=this.Vc.slice(),x=this.e,Q=h.Vc,V=h.e;if(!p[0]||!Q[0])return Q[0]?(h.Fd=-n,h):new g(p[0]?this:0);if(m=x-V){(k=0>m)?(m=-m,x=p):(V=x,x=Q);x.reverse();for(n=m;n--;x.push(0));x.reverse()}else for(x=
((k=p.length<Q.length)?p:Q).length,m=n=0;n<x;n++)if(p[n]!=Q[n]){k=p[n]<Q[n];break}k&&(x=p,p=Q,Q=x,h.Fd=-h.Fd);if(0<(n=(x=Q.length)-(k=p.length)))for(;n--;p[k++]=0);for(n=k;x>m;){if(p[--x]<Q[x]){for(k=x;k&&!p[--k];p[k]=9);--p[k];p[x]+=10}p[x]-=Q[x]}for(;0==p[--n];p.pop());for(;0==p[0];)p.shift(),--V;p[0]||(h.Fd=1,p=[V=0]);h.Vc=p;h.e=V;return h};g.prototype.kJ=function(h){var k=this.Fd,m=(h=new g(h)).Fd;if(k!=m)return h.Fd=-m,this.Rt(h);m=this.e;var n=this.Vc,p=h.e,x=h.Vc;if(!n[0]||!x[0])return x[0]?
h:new g(n[0]?this:0*k);n=n.slice();if(k=m-p){0<k?(p=m,m=x):(k=-k,m=n);for(m.reverse();k--;m.push(0));m.reverse()}0>n.length-x.length&&(m=x,x=n,n=m);k=x.length;for(m=0;k;)m=(n[--k]=n[k]+x[k]+m)/10|0,n[k]%=10;m&&(n.unshift(m),++p);for(k=n.length;0==n[--k];n.pop());h.Vc=n;h.e=p;return h};g.prototype.pow=function(h){var k=this,m=new g(1),n=m,p=0>h;(h!==~~h||-1E6>h||1E6<h)&&c("!pow!");for(h=p?-h:h;;){h&1&&(n=n.Hr(k));h>>=1;if(!h)break;k=k.Hr(k)}return p?m.um(n):n};g.prototype.round=function(h,k){var m=
this;null==h?h=0:(h!==~~h||0>h||1E6<h)&&c("!round!");l(m=new g(m),h,null==k?g.Ku:k);return m};g.prototype.sqrt=function(){var h=this.Vc,k=this.Fd,m=this.e,n=new g("0.5");if(!h[0])return new g(this);0>k&&c(NaN);k=Math.sqrt(this.toString());0==k||k==1/0?(k=h.join(""),k.length+m&1||(k+="0"),h=new g(Math.sqrt(k).toString()),h.e=((m+1)/2|0)-(0>m||m&1)):h=new g(k.toString());k=h.e+(g.Pr+=4);do m=h,h=n.Hr(m.kJ(this.um(m)));while(m.Vc.slice(0,k).join("")!==h.Vc.slice(0,k).join(""));l(h,g.Pr-=4,g.Ku);return h};
g.prototype.Hr=function(h){var k=this.Vc,m=(h=new g(h)).Vc,n=k.length,p=m.length,x=this.e,Q=h.e;h.Fd=this.Fd==h.Fd?1:-1;if(!k[0]||!m[0])return new g(0*h.Fd);h.e=x+Q;if(n<p){var V=k;k=m;m=V;Q=n;n=p;p=Q}for(V=Array(Q=n+p);Q--;V[Q]=0);for(x=p;x--;){p=0;for(Q=n+x;Q>x;)p=V[Q]+m[x]*k[Q-x-1]+p,V[Q--]=p%10,p=p/10|0;V[Q]=(V[Q]+p)%10}p&&++h.e;V[0]||V.shift();for(x=V.length;!V[--x];V.pop());h.Vc=V;return h};g.prototype.toString=function(){var h=this.e,k=this.Vc.join(""),m=k.length;if(h<=a||h>=b)k=k.charAt(0)+
(1<m?"."+k.slice(1):"")+(0>h?"e":"e+")+h;else if(0>h){for(;++h;k="0"+k);k="0."+k}else if(0<h)if(++h>m)for(h-=m;h--;k+="0");else h<m&&(k=k.slice(0,h)+"."+k.slice(h));else 1<m&&(k=k.charAt(0)+"."+k.slice(1));return 0>this.Fd&&this.Vc[0]?"-"+k:k};g.prototype.toExponential=function(h){null==h?h=this.Vc.length-1:(h!==~~h||0>h||1E6<h)&&c("!toExp!");return R(this,h,1)};g.prototype.toFixed=function(h){var k=a,m=b;a=-(b=1/0);if(null==h)var n=this.toString();else h===~~h&&0<=h&&1E6>=h&&(n=R(this,this.e+h),
0>this.Fd&&this.Vc[0]&&0>n.indexOf("-")&&(n="-"+n));a=k;b=m;n||c("!toFix!");return n};g.prototype.toPrecision=function(h){if(null==h)return this.toString();(h!==~~h||1>h||1E6<h)&&c("!toPre!");return R(this,h-1,2)};g.Pr=20;g.Ku=1;return g}();f.xp=e})(fa||(fa={}));(function(f){var R=function(){function l(c){this.vf=c}l.prototype.Lr=function(c,a,b){var d=new f.b,e=new f.b,g=this.vf;b.Zd(c,a,function(h,k){g.mc(2*h,d);g.mc(2*k,e);return d.compare(e)})};l.prototype.sq=function(c){return this.vf.read(2*
c+1)};return l}();f.yi=function(){function l(){}l.tq=function(c){if(c.u())return!1;var a=c.F();return 1736==a?0==c.Pe()?!1:!0:1607==a?(a=[!1],l.eF(c,!0,a),a[0]):197==a||f.R.Ic(a)&&!c.nH()?!0:!1};l.qm=function(c){var a=c.F();if(1736==a)return a=new f.Oa(c.description),c.u()||c.ND(a),a;if(1607==a)return l.eF(c,!1,null);if(197==a)return a=new f.Oa(c.description),c.u()||a.bd(c,!1),a;if(f.R.Ic(a)){a=new f.Hd(c.description);if(!c.u()&&!c.nH()){var b=new f.Ra;c.jp(b);a.add(b);c.hp(b);a.add(b)}return a}if(f.R.lo(a))return null;
throw f.f.I();};l.eF=function(c,a,b){null!=b&&(b[0]=!1);var d=null;a||(d=new f.Hd(c.description));if(!c.u()){var e=new f.ha(0);e.Db(2*c.$());for(var g=0,h=c.$();g<h;g++)if(0<c.Ha(g)&&!c.ho(g)){var k=c.ua(g);e.add(k);k=c.zc(g)-1;e.add(k)}if(0<e.size){h=new f.Du;g=c.Va(0);h.sort(e,0,e.size,new R(g));h=new f.b;g.mc(2*e.get(0),h);k=0;for(var m=1,n=new f.Ra,p=new f.b,x=1,Q=e.size;x<Q;x++)if(g.mc(2*e.get(x),p),p.qb(h))e.get(k)>e.get(x)?(e.set(k,2147483647),k=x):e.set(x,2147483647),m++;else{if(0==(m&1))e.set(k,
2147483647);else if(a)return null!=b&&(b[0]=!0),null;h.K(p);k=x;m=1}if(0==(m&1))e.set(k,2147483647);else if(a)return null!=b&&(b[0]=!0),null;if(!a)for(e.Zd(0,e.size,function(V,ca){return V-ca}),x=0,Q=e.size;x<Q&&2147483647!=e.get(x);x++)c.ne(e.get(x),n),d.add(n)}}return a?null:d};return l}()})(fa||(fa={}));(function(f){var R=function(){function l(){this.Hf=new f.ha(0);this.gt=new f.ha(0);this.uI=1;this.mt=NaN}l.prototype.sort=function(c,a,b,d){if(32>b-a)d.Lr(a,b,c);else{var e=!0;try{for(var g=Infinity,
h=-Infinity,k=a;k<b;k++){var m=d.sq(c.get(k));m<g&&(g=m);m>h&&(h=m)}if(this.reset(b-a,g,h,b-a)){for(k=a;k<b;k++){var n=c.get(k);m=d.sq(n);var p=this.mG(m);this.Hf.set(p,this.Hf.get(p)+1);this.gt.write(k-a,n)}var x=this.Hf.get(0);this.Hf.set(0,0);k=1;for(var Q=this.Hf.size;k<Q;k++){var V=this.Hf.get(k);this.Hf.set(k,x);x+=V}for(k=a;k<b;k++){n=this.gt.read(k-a);m=d.sq(n);p=this.mG(m);var ca=this.Hf.get(p);c.set(ca+a,n);this.Hf.set(p,ca+1)}e=!1}}catch(ba){this.Hf.resize(0),this.gt.resize(0)}if(e)d.Lr(a,
b,c);else{k=b=0;for(Q=this.Hf.size;k<Q;k++)e=b,b=this.Hf.get(k),b>e&&d.Lr(a+e,a+b,c);100<this.Hf.size&&(this.Hf.resize(0),this.gt.resize(0))}}};l.prototype.reset=function(c,a,b,d){if(2>c||b==a)return!1;c=Math.min(l.rM,c);this.Hf.Db(c);this.Hf.resize(c);this.Hf.Xj(0,0,this.Hf.size);this.uI=a;this.gt.resize(d);this.mt=(b-a)/(c-1);return!0};l.prototype.mG=function(c){return f.L.truncate((c-this.uI)/this.mt)};l.rM=65536;return l}();f.Du=R})(fa||(fa={}));(function(f){var R;(function(e){e[e.enum_line=1]=
"enum_line";e[e.enum_arc=2]="enum_arc";e[e.enum_dummy=4]="enum_dummy";e[e.enum_concave_dip=8]="enum_concave_dip";e[e.enum_connection=3]="enum_connection"})(R||(R={}));var l=function(){function e(){}e.xv=function(g,h,k,m,n,p){var x=new e;x.Tm=new f.b;x.hn=new f.b;x.Hw=new f.b;x.Tm.K(g);x.hn.K(h);x.Hw.K(k);x.Wo=m;x.xh=n;x.zh=p;return x};e.construct=function(g,h,k,m){var n=new e;n.Tm=new f.b;n.hn=new f.b;n.Hw=new f.b;n.Tm.K(g);n.hn.K(h);n.Hw.Tc();n.Wo=4;n.xh=k;n.zh=m;return n};return e}(),c=function(){function e(g,
h,k,m,n,p){this.Ew=null;this.ya=0;this.nB=g;this.RI=this.OI=0;this.La=h;this.Oj=k;this.Ck=m;this.Xq=n;this.Vb=p}e.prototype.next=function(){for(var g=new f.Ra;;){if(this.ya==this.nB.D())return null;this.nB.ne(this.ya,g);this.ya++;if(!g.u())break}var h=!1;null==this.Ew&&(this.OI=g.Ce(),this.RI=g.lf(),this.Ew=d.buffer(g,this.La,this.Oj,this.Ck,this.Xq,this.Vb),h=!0);if(this.ya<this.nB.D()){var k=new f.Fa;this.Ew.copyTo(k)}else k=this.Ew;if(!h){h=new f.xd;var m=g.Ce()-this.OI;g=g.lf()-this.RI;h.mg(m,
g);k.Qc(h)}return k};e.prototype.Ea=function(){return 0};e.prototype.xe=function(){};return e}(),a=function(){function e(g,h){this.Wa=g;this.ya=0;this.Hq=h}e.prototype.next=function(){var g=this.Wa.W;if(this.ya<g.$()){var h=this.ya;this.ya++;if(!g.ho(h))for(var k=g.xa(g.zc(h)-1);this.ya<g.$();){var m=g.xa(g.ua(this.ya));if(g.ho(this.ya))break;if(m!=k)break;k=g.xa(g.zc(this.ya)-1);this.ya++}if(1==this.ya-h)return this.Wa.XE(this.Wa.W,h,this.Hq);k=new f.Oa(this.Wa.W.description);k.addPath(this.Wa.W,
h,!0);for(h+=1;h<this.ya;h++)k.ds(this.Wa.W,h,0,g.Zv(h),!1);return this.Wa.XE(k,0,this.Hq)}return null};e.prototype.Ea=function(){return 0};e.prototype.xe=function(){};return e}(),b=function(){function e(g){this.Wa=g;this.ya=0}e.prototype.next=function(){var g=this.Wa.W;if(this.ya<g.$()){var h=this.ya;g.rm(this.ya);for(this.ya++;this.ya<g.$()&&!(0<g.rm(this.ya));)this.ya++;return 0==h&&this.ya==g.$()?this.Wa.Vy(g,0,g.$()):this.Wa.Vy(g,h,this.ya)}return null};e.prototype.Ea=function(){return 0};e.prototype.xe=
function(){};return e}(),d=function(){function e(g){this.st=this.Sw=this.tt=this.Md=null;this.de=[];this.Vb=g;this.rb=this.rw=this.bV=this.La=this.bB=this.Jt=this.qa=0;this.ZA=this.Ck=-1;this.Hq=!0}e.buffer=function(g,h,k,m,n,p){if(null==g)throw f.f.I();if(0>m)throw f.f.I();if(g.u())return new f.Fa(g.description);var x=new f.g;g.Zb(x);0<h&&x.O(h,h);p=new e(p);p.Oj=k;p.W=g;p.qa=f.la.Qd(k,x,!0);p.Jt=f.la.Qd(null,x,!0);p.La=h;p.bV=g.F();0>=n&&(n=96);p.rb=Math.abs(p.La);p.rw=0!=p.rb?1/p.rb:0;isNaN(m)||
0==m?m=1E-5*p.rb:m>.5*p.rb&&(m=.5*p.rb);12>n&&(n=12);g=Math.abs(h)*(1-Math.cos(Math.PI/n));g>m?m=g:(g=Math.PI/Math.acos(1-m/Math.abs(h)),g<n-1&&(n=f.L.truncate(g),12>n&&(n=12,m=Math.abs(h)*(1-Math.cos(Math.PI/n)))));p.Ck=m;p.Xq=n;p.bB=Math.min(p.Jt,.25*m);return p.YE()};e.prototype.Kv=function(){if(null==this.Md)this.Md=[];else if(0!==this.Md.length)return;var g=this.cF();g=f.L.truncate((g+3)/4);var h=.5*Math.PI/g;this.ZA=h;for(var k=0;k<4*g;k++)this.Md.push(null);var m=Math.cos(h);h=Math.sin(h);
var n=f.b.construct(0,1);for(k=0;k<g;k++)this.Md[k+0*g]=f.b.construct(n.y,-n.x),this.Md[k+1*g]=f.b.construct(-n.x,-n.y),this.Md[k+2*g]=f.b.construct(-n.y,n.x),this.Md[k+3*g]=n,n=f.b.construct(n.x,n.y),n.lu(m,h)};e.prototype.YE=function(){var g=this.W.F();if(f.R.Ic(g))return g=new f.Oa(this.W.description),g.$b(this.W,!0),this.W=g,this.YE();if(this.La<=this.qa)if(f.R.nU(g)){if(0>=this.La&&(g=new f.g,this.W.s(g),g.N()<=2*-this.La||g.ca()<=2*this.La))return new f.Fa(this.W.description)}else return new f.Fa(this.W.description);
switch(this.W.F()){case 33:return this.$O();case 550:return this.ZO();case 1607:return this.bP();case 1736:return this.aP();case 197:return this.WO();default:throw f.f.za();}};e.prototype.bP=function(){if(this.qH(this.W)){var g=new f.Ra;this.W.ne(0,g);var h=new f.g;this.W.s(h);g.nb(h.hf());return this.lv(g)}this.W=this.oX(this.W);g=new a(this,this.Hq);return f.Jh.local().U(g,this.Oj,this.Vb).next()};e.prototype.aP=function(){if(0==this.La)return this.W;var g=f.jm.local();this.Kv();this.W=g.U(this.W,
null,!1,this.Vb);if(0>this.La){var h=this.W;h=this.Vy(h,0,h.$());return g.U(h,this.Oj,!1,this.Vb)}if(this.qH(this.W))return g=new f.Ra,this.W.ne(0,g),h=new f.g,this.W.s(h),g.nb(h.hf()),this.lv(g);g=new b(this);return f.Jh.local().U(g,this.Oj,this.Vb).next()};e.prototype.Vy=function(g,h,k){for(var m=new f.Fa(g.description);h<k;h++)if(!(1>g.Ha(h))){var n=g.rm(h),p=new f.g;g.Sj(h,p);if(0<this.La)if(0<n)if(this.rH(g,h))n=new f.Ra,g.ne(g.ua(h),n),n.nb(p.hf()),this.dv(m,n);else{var x=n=new f.Oa(g.description);
x=f.Fu.vH(this.W,h)||2==this.Sn(this.W,h,x,!0,1)?this.WE(g,h):this.Rn(n);m.add(x,!1)}else{if(!(p.N()+this.qa<=2*this.rb||p.ca()+this.qa<=2*this.rb||(x=n=new f.Oa(g.description),this.Sn(this.W,h,x,!0,1),n.u()))){var Q=new f.g;Q.H(p);Q.O(this.rb,this.rb);x.Np(Q);x=this.Rn(n);p=1;for(n=x.$();p<n;p++)m.addPath(x,p,!0)}}else if(0<n){if(!(p.N()+this.qa<=2*this.rb||p.ca()+this.qa<=2*this.rb||(x=n=new f.Oa(g.description),this.Sn(this.W,h,x,!0,-1),n.u())))for(Q=new f.g,x.Zb(Q),Q.O(this.rb,this.rb),x.Np(Q),
x=this.Rn(n),p=1,n=x.$();p<n;p++)m.addPath(x,p,!0)}else for(x=n=new f.Oa(g.description),this.Sn(this.W,h,x,!0,-1),x=this.Rn(n),p=0,n=x.$();p<n;p++)m.addPath(x,p,!0)}if(0<this.La)return 1<m.$()?m=this.Rn(m):e.Sx(m);g=new f.g;m.Zb(g);if(m.u())return e.Sx(m);g.O(this.rb,this.rb);m.Np(g);m=this.Rn(m);g=new f.Fa(m.description);p=1;for(n=m.$();p<n;p++)g.addPath(m,p,!1);return e.Sx(g)};e.prototype.$O=function(){return this.lv(this.W)};e.prototype.lv=function(g){var h=new f.Fa(this.W.description);this.dv(h,
g);return this.WY(h)};e.prototype.ZO=function(){var g=new c(this.W,this.La,this.Oj,this.Ck,this.Xq,this.Vb);return f.Jh.local().U(g,this.Oj,this.Vb).next()};e.prototype.WO=function(){var g=new f.Fa(this.W.description);if(0>=this.La){if(0==this.La)g.bd(this.W,!1);else{var h=new f.Ih;this.W.qn(h);h.O(this.La,this.La);g.bd(h,!1)}return g}g.bd(this.W,!1);this.W=g;return this.WE(g,0)};e.prototype.WE=function(g,h){this.Kv();var k=new f.Fa(g.description),m=new f.b,n=new f.b,p=new f.b,x=new f.b,Q=new f.b,
V=new f.b,ca=new f.b,ba=new f.b,ea=g.Ha(h),da=g.ua(h),ma=0;for(h=g.Ha(h);ma<h;ma++){g.w(da+ma,n);g.w(da+(ma+1)%ea,x);g.w(da+(ma+2)%ea,V);ca.tc(x,n);if(0==ca.length())throw f.f.za();ca.ow();ca.normalize();ca.scale(this.rb);m.add(ca,n);p.add(ca,x);0==ma?k.uu(m):k.Ii(m);k.Ii(p);ba.tc(V,x);if(0==ba.length())throw f.f.za();ba.ow();ba.normalize();ba.scale(this.rb);Q.add(ba,x);this.sE(k,x,p,Q,!1)}return e.Sx(k)};e.prototype.XE=function(g,h,k){this.Kv();if(1>g.Ha(h))return null;if(this.rH(g,h)&&0<this.La){k=
new f.Ra;g.ne(g.ua(h),k);var m=new f.g;g.Sj(h,m);k.nb(m.hf());return this.lv(k)}m=new f.Oa(g.description);if(g.ho(h))this.Sn(g,h,m,k,1),this.Sn(g,h,m,k,-1);else{var n=new f.Oa(g.description);n.addPath(g,h,!1);n.ds(g,h,0,g.Zv(h),!1);this.Sn(n,0,m,k,1)}return this.Rn(m)};e.prototype.qr=function(){this.Gt++;if(0==this.Gt%1024&&null!=this.Vb&&!this.Vb.progress(-1,-1))throw f.f.Lu("user_canceled");};e.prototype.Rn=function(g){return f.pg.Tk(g,this.Jt,!0,!0,this.Vb)};e.prototype.cF=function(){if(0==this.Ck)return this.Xq;
var g=1-this.Ck*Math.abs(this.rw);g=-1>g?4:2*Math.PI/Math.acos(g)+.5;4>g?g=4:g>this.Xq&&(g=this.Xq);return f.L.truncate(g)};e.prototype.sE=function(g,h,k,m,n){this.Kv();var p=new f.b;p.tc(k,h);p.scale(this.rw);var x=new f.b;x.tc(m,h);x.scale(this.rw);p=Math.atan2(p.y,p.x)/this.ZA;0>p&&(p=this.Md.length+p);p=this.Md.length-p;x=Math.atan2(x.y,x.x)/this.ZA;0>x&&(x=this.Md.length+x);x=this.Md.length-x;x<p&&(x+=this.Md.length);var Q=f.L.truncate(x);x=f.L.truncate(Math.ceil(p));p=new f.b;p.K(this.Md[x%
this.Md.length]);p.mu(this.rb,h);var V=10*this.qa;p.sub(k);p.length()<V&&(x+=1);p.K(this.Md[Q%this.Md.length]);p.mu(this.rb,h);p.sub(m);p.length()<V&&--Q;k=Q-x;k++;Q=0;for(x%=this.Md.length;Q<k;Q++,x=(x+1)%this.Md.length)p.K(this.Md[x]),p.mu(this.rb,h),g.Ii(p),this.qr();n&&g.Ii(m)};e.prototype.Sn=function(g,h,k,m,n){var p=new f.Yc,x=p.wO(g,h);p.$p(this.bB,!1,!1);if(2>p.D(x)){if(0>n)return 1;n=g;p=new f.Ra;n.ne(n.ua(h),p);this.dv(k,p);return 1}var Q=p.xa(p.Za(p.Kb(x))),V=new f.xd;V.mg(-Q.x,-Q.y);p.Qc(V);
if(m&&(this.FR(p,x,n),2>p.D(x))){if(0>n)return 1;n=g;p=new f.Ra;n.ne(n.ua(h),p);this.dv(k,p);return 1}this.de.length=0;var ca=p.Kb(x);h=p.Za(ca);var ba=1==n?p.Ma(h):p.T(h);g=1==n?p.T(h):p.Ma(h);var ea=!0;m=new f.b;x=new f.b;var da=new f.b,ma=new f.b,za=new f.b,Ba=new f.b,Ea=new f.b,Ma=new f.b,Pa=new f.b,Ra=new f.b,Qa=this.rb;ca=p.Ha(ca);for(var Sa=0;Sa<ca;Sa++)p.w(g,x),ea&&(p.w(h,m),p.w(ba,da),Ma.tc(m,da),Ma.normalize(),Ra.yH(Ma),Ra.scale(Qa),ma.add(Ra,m)),Ea.tc(x,m),Ea.normalize(),Pa.yH(Ea),Pa.scale(Qa),
za.add(m,Pa),ba=Ma.Di(Ea),ea=Ma.Vh(Ea),0>ba||0>ea&&0==ba?this.de.push(l.xv(ma,za,m,2,this.de.length+1,this.de.length-1)):ma.qb(za)||(this.de.push(l.construct(ma,m,this.de.length+1,this.de.length-1,"dummy")),this.de.push(l.construct(m,za,this.de.length+1,this.de.length-1,"dummy"))),Ba.add(x,Pa),this.de.push(l.xv(za,Ba,m,1,this.de.length+1,this.de.length-1)),ma.K(Ba),Ra.K(Pa),da.K(m),m.K(x),Ma.K(Ea),ba=h,h=g,ea=!1,g=1==n?p.T(h):p.Ma(h);this.de[this.de.length-1].xh=0;this.de[0].zh=this.de.length-1;this.qX(k);
V.mg(Q.x,Q.y);k.KE(V,k.$()-1);return 1};e.prototype.qX=function(g){for(var h=this.JP(),k=!0,m=h+1,n=h;m!=h;n=m){var p=this.de[n];m=-1!=p.xh?p.xh:(n+1)%this.de.length;0!=p.Wo&&(k&&g.uu(p.Tm),2==p.Wo?this.sE(g,p.Hw,p.Tm,p.hn,!0):g.Ii(p.hn),k=!1)}};e.prototype.JP=function(){null==this.st&&(this.st=[null,null,null,null,null,null,null,null,null]);for(var g=0,h=0,k=this.de.length;h<k;){var m=this.de[h];if(0!=(m.Wo&3)){g=h;break}h=m.xh}k=g+1;for(h=g;k!=g;h=k){m=this.de[h];k=m.xh;for(var n=1,p=null;k!=h;){p=
this.de[k];if(0!=(p.Wo&3))break;k=p.xh;n++}1!=n&&1==(m.Wo&p.Wo)&&(null==this.tt&&(this.tt=new f.zb,this.Sw=new f.zb),this.tt.Fc(m.Tm),this.tt.Sc(m.hn),this.Sw.Fc(p.Tm),this.Sw.Sc(p.hn),1==this.tt.Ia(this.Sw,this.st,null,null,this.Jt)&&(m.hn.K(this.st[0]),p.Tm.K(this.st[0]),m.xh=k,p.zh=h))}return g};e.prototype.lw=function(g,h,k){var m=new f.b;m.tc(k,g);k=m.length();k=this.rb*this.rb-k*k*.25;if(0<k){k=Math.sqrt(k);m.normalize();m.ur();var n=new f.b;n.tc(h,g);if(n.Vh(m)+k>=this.rb)return!0}return!1};
e.prototype.FR=function(g,h,k){for(var m=0;1>m;m++){var n=!1,p=g.Kb(h),x=g.Ha(p);if(0==x)break;var Q=x;if(3>x)break;!g.Lb(p)&&(Q=x-1);p=g.Za(p);x=0<k?g.Ma(p):g.T(p);for(var V=0<k?g.T(p):g.Ma(p),ca=x,ba=!0,ea=new f.b,da=new f.b,ma=new f.b,za=new f.b,Ba=new f.b,Ea=f.b.construct(0,0),Ma=new f.b,Pa=new f.b,Ra=new f.b,Qa=new f.b,Sa=this.rb,Ta=0,Ua=0;Ua<Q;){g.w(V,da);ba&&(g.w(p,ea),g.w(x,ma),ca=x);Pa.tc(ea,ma);Pa.normalize();Ma.tc(da,ea);Ma.normalize();if(ca==V)break;var Va=Pa.Di(Ma),Ya=Pa.Vh(Ma),ab=!0;
0>Va||0>Ya&&0==Va||!this.lw(ma,ea,da)||(Ea.K(da),ab=!1,++Ta,n=!0);if(ab){if(0<Ta)for(;;){Va=0<k?g.Ma(ca):g.T(ca);if(Va==p)break;g.w(Va,za);if(this.lw(za,ma,Ea))ma.K(za),ca=Va,ab=!1,++Ta;else{Va!=V&&this.lw(za,ma,da)&&this.lw(za,ea,da)&&(ma.K(za),ca=Va,ab=!1,++Ta);break}}if(!ab)continue;if(0<Ta){ca=0<k?g.Ma(x):g.T(x);for(ba=1;ba<Ta;ba++)ab=0<k?g.Ma(ca):g.T(ca),g.od(ca,!0),ca=ab;Ra.tc(ea,ma);Ta=Ra.length();Ta=Sa*Sa-Ta*Ta*.25;Ta=Math.sqrt(Ta);Sa-Ta>.5*this.Ck?(Ba.add(ma,ea),Ba.scale(.5),Ra.normalize(),
Ra.ur(),Qa.K(Ra),Qa.scale(Sa-Ta),Ba.add(Qa),g.wf(x,Ba)):g.od(x,!0);Ta=0}ma.K(ea);ca=p}ea.K(da);x=p;p=V;V=0<k?g.T(p):g.Ma(p);Ua++;ba=!1}if(0<Ta){ca=0<k?g.Ma(x):g.T(x);for(ba=1;ba<Ta;ba++)ab=0<k?g.Ma(ca):g.T(ca),g.od(ca,!0),ca=ab;Ba.add(ma,ea);Ba.scale(.5);Ra.tc(ea,ma);Ta=Ra.length();Ta=Sa*Sa-Ta*Ta*.25;Ta=Math.sqrt(Ta);Ra.normalize();Ra.ur();Qa.K(Ra);Qa.scale(Sa-Ta);Ba.add(Qa);g.wf(x,Ba)}g.$p(this.bB,!1,!1);if(!n)break}};e.prototype.rH=function(g,h){if(1==g.Ha(h))return!0;var k=new f.g;g.Sj(h,k);return Math.max(k.N(),
k.ca())<.5*this.Ck?!0:!1};e.prototype.qH=function(g){var h=new f.g;g.s(h);return Math.max(h.N(),h.ca())<.5*this.Ck?!0:!1};e.prototype.oX=function(g){g=f.lD.local().U(g,.25*this.Ck,!1,this.Vb);for(var h=0,k=0,m=g.$();k<m;k++)h=Math.max(g.Ha(k),h);if(32>h)return this.Hq=!1,g;this.Hq=!0;return f.pg.Tk(g,this.Jt,!1,!0,this.Vb)};e.prototype.dv=function(g,h){h=h.w();if(null!=this.Md&&0!==this.Md.length){var k=new f.b;k.K(this.Md[0]);k.mu(this.rb,h);g.uu(k);for(var m=1,n=this.Md.length;m<n;m++)k.K(this.Md[m]),
k.mu(this.rb,h),g.Ii(k)}else{m=this.cF();k=f.L.truncate((m+3)/4);m=.5*Math.PI/k;n=Math.cos(m);for(var p=Math.sin(m),x=new f.b,Q=3;0<=Q;Q--){x.ka(0,this.rb);switch(Q){case 0:for(m=0;m<k;m++)g.Cj(x.x+h.x,x.y+h.y),x.lu(n,p);break;case 1:for(m=0;m<k;m++)g.Cj(-x.y+h.x,x.x+h.y),x.lu(n,p);break;case 2:for(m=0;m<k;m++)g.Cj(-x.x+h.x,-x.y+h.y),x.lu(n,p);break;default:for(g.Zx(x.y+h.x,-x.x+h.y),m=1;m<k;m++)x.lu(n,p),g.Cj(x.y+h.x,-x.x+h.y)}this.qr()}}};e.Sx=function(g){g.Jg(1,0);return g};e.prototype.WY=function(g){g.Jg(2,
this.qa);g.cl();return g};return e}();f.QL=d})(fa||(fa={}));(function(f){var R=function(){function l(c){this.Da=c;this.a=new f.Yc;this.fd=new f.ha(0)}l.prototype.Ph=function(c,a,b){switch(a){case 0:if(c.o<b&&c.v<=b)break;else return c.o>=b?1:-1;case 1:if(c.A<b&&c.B<=b)break;else return c.A>=b?1:-1;case 2:if(c.o>=b&&c.v>b)break;else return c.v<=b?1:-1;case 3:if(!(c.A>=b&&c.B>b))return c.B<=b?1:-1}return 0};l.prototype.fz=function(c,a){return 1736==c.F()?this.hz(c,a):this.iz(c)};l.prototype.hz=function(c,
a){if(0==this.Da.N()||0==this.Da.ca())return c.Ga();var b=new f.g;c.Zb(b);this.W=this.a.Bb(c);var d=new f.g,e=new f.g,g=new f.b,h=new f.b,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new f.og;var n=new f.zb,p=new f.ha(0);p.Db(Math.min(100,c.D()));for(var x=!1,Q=0;!x&&4>Q;Q++){var V=!1,ca=0!=(Q&1),ba=0;switch(Q){case 0:ba=this.Da.o;V=b.o<=ba&&b.v>=ba;break;case 1:ba=this.Da.A;V=b.A<=ba&&b.B>=ba;break;case 2:ba=this.Da.v;V=b.o<=ba&&b.v>=ba;break;case 3:ba=this.Da.B,V=b.A<=ba&&b.B>=ba}if(V)for(x=!0,V=
this.a.Kb(this.W);-1!=V;){var ea=-1,da=-1,ma=this.a.Za(V),za=ma;do{var Ba=this.a.ec(za);null==Ba&&(Ba=n,this.a.w(za,g),Ba.Fc(g),this.a.w(this.a.T(za),h),Ba.Sc(h));Ba.s(d);var Ea=this.Ph(d,Q,ba),Ma=0,Pa=-1;if(-1==Ea){Ba=Ba.uq(ca,ba,k,m);Ma=0<Ba?this.a.em(za,m,Ba):0;Ma+=1;var Ra=za,Qa=this.a.T(Ra);for(Ba=0;Ba<Ma;Ba++){this.a.w(Ra,g);this.a.w(Qa,h);Pa=this.a.ec(Ra);null==Pa&&(Pa=n,Pa.Fc(g),Pa.Sc(h));Pa.s(e);Pa=this.Ph(e,Q,ba);if(-1==Pa){if(ca)Pa=Math.abs(g.y-ba),Sa=Math.abs(h.y-ba),Pa<Sa?(g.y=ba,this.a.wf(Ra,
g)):(h.y=ba,this.a.wf(Qa,h));else{Pa=Math.abs(g.x-ba);var Sa=Math.abs(h.x-ba);Pa<Sa?(g.x=ba,this.a.wf(Ra,g)):(h.x=ba,this.a.wf(Qa,h))}Pa=this.a.ec(Ra);null==Pa&&(Pa=n,Pa.Fc(g),Pa.Sc(h));Pa.s(e);Pa=this.Ph(e,Q,ba)}Sa=ea;ea=Pa;-1==da&&(da=ea);0==Sa&&1==ea||1==Sa&&0==ea||0!=Sa||0!=ea||p.add(Ra);1==ea&&(x=!1);Pa=Ra=Qa;Qa=this.a.T(Qa)}}0==Ma&&(Sa=ea,ea=Ea,-1==da&&(da=ea),0==Sa&&1==ea||1==Sa&&0==ea||0!=Sa||0!=ea||p.add(za),1==ea&&(x=!1),Pa=this.a.T(za));za=Pa}while(za!=ma);0==da&&0==ea&&p.add(ma);Ba=0;
for(ea=p.size;Ba<ea;Ba++)da=p.get(Ba),this.a.od(da,!1);p.clear(!1);V=3>this.a.Ha(V)?this.a.sr(V):this.a.Qb(V)}}if(x)return c.Ga();this.pC();0<a&&this.rz(a);return this.a.ye(this.W)};l.prototype.iz=function(c){var a=new f.g,b=new f.g,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],g=new f.og,h=c,k=new f.g;c.Zb(k);for(var m=0;4>m;m++){var n=!1,p=0!=(m&1),x=0;switch(m){case 0:x=this.Da.o;n=k.o<=x&&k.v>=x;break;case 1:x=this.Da.A;n=k.A<=x&&k.B>=x;break;case 2:x=this.Da.v;n=k.o<=x&&k.v>=x;break;case 3:x=this.Da.B,
n=k.A<=x&&k.B>=x}if(n){n=h;h=c.Ga();n=n.Ba();n.ej();for(var Q,V=new f.b;n.Ta();)for(var ca,ba=!0;n.Aa();){var ea=n.aa();ea.s(a);var da=this.Ph(a,m,x);if(-1==da){if(da=ea.uq(p,x,d,e),0<da){var ma=0;Q=ea.ac();for(var za=0;za<=da;za++)if(ca=za<da?e[za]:1,ma!=ca){ea.jh(ma,ca,g);var Ba=g.get();Ba.Fc(Q);za<da&&(p?(V.x=d[za],V.y=x):(V.x=x,V.y=d[za]),Ba.Sc(V));Ba.s(b);var Ea=this.Ph(b,m,x);if(-1==Ea){Q=Ba.ac();ma=Ba.wc();if(p)Ea=Math.abs(Q.y-x),Ma=Math.abs(ma.y-x),Ea<Ma?(Q.y=x,Ba.Fc(Q)):(ma.y=x,Ba.Sc(ma));
else{Ea=Math.abs(Q.x-x);var Ma=Math.abs(ma.x-x);Ea<Ma?(Q.x=x,Ba.Fc(Q)):(ma.x=x,Ba.Sc(ma))}Ba.s(b);Ea=this.Ph(b,m,x)}Q=Ba.wc();ma=ca;ca=Ea;1==ca?(h.$b(Ba,ba),ba=!1):ba=!0}}}else ca=da,1==ca?(h.$b(ea,ba),ba=!1):ba=!0}}}return h};l.prototype.pC=function(){this.si=-1;this.fm(!1,this.Da.o);this.fm(!1,this.Da.v);this.fm(!0,this.Da.A);this.fm(!0,this.Da.B);this.fd.resize(0);this.fd.Db(100);this.si=this.a.Kd();for(var c=new f.b,a=this.a.Kb(this.W);-1!=a;a=this.a.Qb(a))for(var b=this.a.Za(a),d=0,e=this.a.Ha(a);d<
e;d++,b=this.a.T(b))if(this.a.w(b,c),this.Da.o==c.x||this.Da.v==c.x||this.Da.A==c.y||this.Da.B==c.y)this.a.Qa(b,this.si,this.fd.size),this.fd.add(b);this.Yl(!1,this.Da.o);this.Yl(!1,this.Da.v);this.Yl(!0,this.Da.A);this.Yl(!0,this.Da.B);this.zz()};l.prototype.rz=function(c){for(var a=new f.b,b=new f.b,d=f.L.Xf(2048,0),e=this.a.Kb(this.W);-1!=e;e=this.a.Qb(e)){var g=this.a.Za(e),h=g;do{var k=this.a.T(h);this.a.w(h,a);var m=-1;a.x==this.Da.o?(this.a.w(k,b),b.x==this.Da.o&&(m=1)):a.x==this.Da.v&&(this.a.w(k,
b),b.x==this.Da.v&&(m=1));a.y==this.Da.A?(this.a.w(k,b),b.y==this.Da.A&&(m=0)):a.y==this.Da.B&&(this.a.w(k,b),b.y==this.Da.B&&(m=0));if(-1!=m&&(m=f.b.vb(a,b),m=f.L.truncate(Math.min(Math.ceil(m/c),2048)),!(1>=m))){for(var n=1;n<m;n++)d[n-1]=1*n/m;this.a.em(h,d,m-1)}h=k}while(h!=g)}};l.prototype.fm=function(c,a){var b=this.a.Kd(),d=new f.b,e=new f.ha(0);e.Db(100);for(var g=this.a.Kb(this.W);-1!=g;g=this.a.Qb(g))for(var h=this.a.Za(g),k=0,m=this.a.Ha(g);k<m;k++){var n=this.a.T(h);this.a.w(h,d);if(c?
d.y==a:d.x==a)if(this.a.w(n,d),c?d.y==a:d.x==a)1!=this.a.Na(h,b)&&(e.add(h),this.a.Qa(h,b,1)),1!=this.a.Na(n,b)&&(e.add(n),this.a.Qa(n,b,1));h=n}this.a.Xd(b);if(!(3>e.size)){var p=this;e.Zd(0,e.size,function(Ea,Ma){return p.Qh(Ea,Ma)});b=new f.b;g=new f.b;h=new f.b;g.Tc();var x=-1;k=new f.ha(0);m=new f.ha(0);n=this.a.Kd();for(var Q=this.a.Kd(),V=0,ca=e.size;V<ca;V++){var ba=e.get(V);this.a.w(ba,d);if(!d.qb(g)){if(-1!=x){for(var ea=x;ea<V;ea++){x=e.get(ea);var da=this.a.T(x);ba=this.a.Ma(x);var ma=
!1;0>this.Qh(x,da)&&(this.a.w(da,b),c?b.y==a:b.x==a)&&(k.add(x),ma=!0,this.a.Qa(x,Q,1));0>this.Qh(x,ba)&&(this.a.w(ba,b),c?b.y==a:b.x==a)&&(ma||k.add(x),this.a.Qa(x,n,1))}ea=0;for(ma=k.size;ea<ma;ea++){x=k.get(ea);ba=this.a.Na(x,n);da=this.a.Na(x,Q);if(1==ba){ba=this.a.Ma(x);this.a.w(ba,h);var za=[0];za[0]=0;if(!h.qb(d)){var Ba=f.b.vb(g,h);za[0]=f.b.vb(h,d)/Ba;0==za[0]?za[0]=2.220446049250313E-16:1==za[0]&&(za[0]=.9999999999999998);this.a.em(ba,za,1);ba=this.a.Ma(x);this.a.wf(ba,d);m.add(ba);this.a.Qa(ba,
n,1);this.a.Qa(ba,Q,-1)}}1==da&&(da=this.a.T(x),this.a.w(da,h),za=[0],za[0]=0,h.qb(d)||(Ba=f.b.vb(g,h),za[0]=f.b.vb(g,d)/Ba,0==za[0]?za[0]=2.220446049250313E-16:1==za[0]&&(za[0]=.9999999999999998),this.a.em(x,za,1),ba=this.a.T(x),this.a.wf(ba,d),m.add(ba),this.a.Qa(ba,n,-1),this.a.Qa(ba,Q,1)))}x=k;k=m;m=x;m.clear(!1)}x=V;g.K(d)}}this.a.Xd(n);this.a.Xd(Q)}};l.prototype.Yl=function(c,a){var b=new f.b,d=new f.ha(0);d.Db(100);for(var e=this.a.Kd(),g=0,h=this.fd.size;g<h;g++){var k=this.fd.get(g);if(-1!=
k){var m=this.a.T(k);this.a.w(k,b);if(c?b.y==a:b.x==a)if(this.a.w(m,b),c?b.y==a:b.x==a)-2!=this.a.Na(k,e)&&(d.add(k),this.a.Qa(k,e,-2)),-2!=this.a.Na(m,e)&&(d.add(m),this.a.Qa(m,e,-2))}}if(0!=d.size){var n=this;d.Zd(0,d.size,function(Ma,Pa){return n.Qh(Ma,Pa)});g=0;for(h=d.size;g<h;g++){var p=d.get(g);this.a.Qa(p,e,g)}k=new f.b;m=new f.b;m.Tc();var x=-1;g=0;for(h=d.size;g<h;g++)if(p=d.get(g),-1!=p&&(this.a.w(p,b),!b.qb(m))){if(-1!=x)for(;;){p=!1;for(var Q=1<g-x?g-1:g,V=x;V<Q;V++){var ca=d.get(V);
if(-1!=ca){var ba=-1,ea=this.a.T(ca);0>this.Qh(ca,ea)&&(this.a.w(ea,k),c?k.y==a:k.x==a)&&(ba=ea);ea=-1;var da=this.a.Ma(ca);0>this.Qh(ca,da)&&(this.a.w(da,k),c?k.y==a:k.x==a)&&(ea=da);if(-1!=ba&&-1!=ea)this.Oh(ca,d,e),this.a.od(ca,!1),this.Oh(ba,d,e),this.a.od(ba,!1),p=!0;else if(-1!=ba||-1!=ea){for(da=V+1;da<g;da++){var ma=d.get(da);if(-1!=ma){var za=this.a.T(ma),Ba=-1;0>this.Qh(ma,za)&&(this.a.w(za,k),c?k.y==a:k.x==a)&&(Ba=za);za=this.a.Ma(ma);var Ea=-1;0>this.Qh(ma,za)&&(this.a.w(za,k),c?k.y==
a:k.x==a)&&(Ea=za);if(-1!=Ba&&-1!=Ea){this.Oh(ma,d,e);this.a.od(ma,!1);this.Oh(Ba,d,e);this.a.od(Ba,!1);p=!0;break}if(-1!=ba&&-1!=Ea){this.ju(d,ca,ba,ma,Ea,e);p=!0;break}else if(-1!=ea&&-1!=Ba){this.ju(d,ma,Ba,ca,ea,e);p=!0;break}}}if(p)break}}}if(!p)break}x=g;m.K(b)}}this.a.Xd(e)};l.prototype.Oh=function(c,a,b){b=this.a.Na(c,b);a.set(b,-1);b=this.a.Na(c,this.si);this.fd.set(b,-1);a=this.a.cd(c);-1!=a&&this.a.Za(a)==c&&(this.a.Sf(a,-1),this.a.dh(a,-1))};l.prototype.ju=function(c,a,b,d,e,g){this.a.Dc(a,
d);this.a.Ec(d,a);this.a.Ec(b,e);this.a.Dc(e,b);this.Oh(d,c,g);this.a.ui(d,!1);this.Oh(e,c,g);this.a.ui(e,!0)};l.prototype.zz=function(){for(var c=0,a=this.fd.size;c<a;c++){var b=this.fd.get(c);-1!=b&&this.a.hj(b,-1)}for(var d=0,e=0,g=this.a.Kb(this.W);-1!=g;){var h=this.a.Za(g);if(-1==h||g!=this.a.cd(h)){var k=g;g=this.a.Qb(g);this.a.Sf(k,-1);this.a.tr(k)}else{b=h;k=0;do this.a.hj(b,g),k++,b=this.a.T(b);while(b!=h);2>=k?(b=this.a.Na(h,this.si),this.fd.set(b,-1),h=this.a.od(h,!1),2==k&&(b=this.a.Na(h,
this.si),this.fd.set(b,-1),this.a.od(h,!1)),k=g,g=this.a.Qb(g),this.a.Sf(k,-1),this.a.tr(k)):(this.a.sp(g,!1),this.a.dh(g,this.a.Ma(h)),this.a.Wj(g,k),e+=k,d++,g=this.a.Qb(g))}}c=0;for(a=this.fd.size;c<a;c++)if(b=this.fd.get(c),-1!=b&&(g=this.a.cd(b),-1==g)){g=this.a.Ef(this.W,-1);k=0;h=b;do this.a.hj(b,g),k++,b=this.a.T(b);while(b!=h);2>=k?(b=this.a.Na(h,this.si),this.fd.set(b,-1),h=this.a.od(h,!1),2==k&&(b=this.a.Na(h,this.si),0<=b&&this.fd.set(b,-1),this.a.od(h,!1)),k=g,this.a.Sf(k,-1),this.a.tr(k)):
(this.a.An(g,!0),this.a.Wj(g,k),this.a.Sf(g,h),this.a.dh(g,this.a.Ma(h)),this.a.sp(g,!1),e+=k,d++)}this.a.bm(this.W,d);this.a.Uj(this.W,e);c=0;for(a=this.a.kd;-1!=a;a=this.a.Ae(a))c+=this.a.D(a);this.a.JC(c)};l.gz=function(c,a,b){return(new l(a)).fz(c,b)};l.clip=function(c,a,b,d){if(c.u())return c;if(a.u())return c.Ga();b=c.F();if(33==b)return d=c.w(),a.contains(d)?c:c.Ga();if(197==b)return d=new f.g,c.s(d),d.Ia(a)?(a=new f.Ih,c.copyTo(a),a.mp(d),a):c.Ga();var e=new f.g;c.Zb(e);if(a.contains(e))return c;
if(!a.isIntersecting(e))return c.Ga();e=c.ib;if(null!=e&&(e=e.oi,null!=e)){e=e.rn(a);if(1==e){if(1736!=b)throw f.f.za();c=new f.Fa(c.description);c.Np(a);return c}if(0==e)return c.Ga()}switch(b){case 550:b=null;e=c.D();for(var g=c.Va(0),h=0,k=0;k<e;k++)d=new f.b,g.mc(2*k,d),a.contains(d)||(0==h&&(b=c.Ga()),h<k&&b.yd(c,h,k),h=k+1);0<h&&b.yd(c,h,e);return 0==h?c:b;case 1736:case 1607:return l.gz(c,a,d);default:throw f.f.za();}};l.prototype.Qh=function(c,a){var b=new f.b;this.a.w(c,b);c=new f.b;this.a.w(a,
c);return b.compare(c)};return l}();f.Yd=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a){this.Da=c;this.a=new f.Yc;this.fd=new f.ha(0);this.md=a}l.prototype.Ph=function(c,a,b){switch(a){case 0:if(c.o<b&&c.v<=b)break;else return c.o>=b?1:-1;case 1:if(c.A<b&&c.B<=b)break;else return c.A>=b?1:-1;case 2:if(c.o>=b&&c.v>b)break;else return c.v<=b?1:-1;case 3:if(!(c.A>=b&&c.B>b))return c.B<=b?1:-1}return 0};l.prototype.fz=function(c,a){return 1736==c.F()?this.hz(c,a):this.iz(c)};l.prototype.hz=
function(c,a){if(0==this.Da.N()||0==this.Da.ca())return c.Ga();var b=new f.g;c.Zb(b);this.W=this.a.Bb(c);var d=new f.g,e=new f.g,g=new f.b,h=new f.b,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],n=new f.zb,p=new f.ha(0);p.Db(256);for(var x=!1,Q=0;!x&&4>Q;Q++){var V=!1,ca=0!=(Q&1),ba=0;switch(Q){case 0:ba=this.Da.o;V=b.o<=ba&&b.v>=ba;break;case 1:ba=this.Da.A;V=b.A<=ba&&b.B>=ba;break;case 2:ba=this.Da.v;V=b.o<=ba&&b.v>=ba;break;case 3:ba=this.Da.B,V=b.A<=ba&&b.B>=ba}if(V)for(x=!0,V=this.a.Kb(this.W);-1!=
V;){var ea=!0,da=-1,ma=-1,za=this.a.Za(V),Ba=za;do{var Ea=this.a.ec(Ba);null==Ea&&(Ea=n,this.a.w(Ba,g),Ea.Fc(g),this.a.w(this.a.T(Ba),h),Ea.Sc(h));Ea.s(d);var Ma=this.Ph(d,Q,ba),Pa=0,Ra=-1;if(-1==Ma){Ea=Ea.uq(ca,ba,k,m);Pa=0<Ea?this.a.qZ(Ba,m,Ea):0;Pa+=1;var Qa=Ba,Sa=this.a.T(Qa);for(Ea=0;Ea<Pa;Ea++){this.a.w(Qa,g);this.a.w(Sa,h);Ra=this.a.ec(Qa);null==Ra&&(Ra=n,Ra.Fc(g),Ra.Sc(h));Ra.s(e);Ra=this.Ph(e,Q,ba);if(-1==Ra){if(ca)Ra=Math.abs(g.y-ba),Ta=Math.abs(h.y-ba),Ra<Ta?(g.y=ba,this.a.wf(Qa,g)):(h.y=
ba,this.a.wf(Sa,h));else{Ra=Math.abs(g.x-ba);var Ta=Math.abs(h.x-ba);Ra<Ta?(g.x=ba,this.a.wf(Qa,g)):(h.x=ba,this.a.wf(Sa,h))}Ra=this.a.ec(Qa);null==Ra&&(Ra=n,Ra.Fc(g),Ra.Sc(h));Ra.s(e);Ra=this.Ph(e,Q,ba)}Ta=da;da=Ra;-1==ma&&(ma=da);0==Ta&&1==da||1==Ta&&0==da||0!=Ta||0!=da||p.add(Qa);1==da&&(ea=x=!1);Ra=Qa=Sa;Sa=this.a.T(Sa)}}0==Pa&&(Ta=da,da=Ma,-1==ma&&(ma=da),0==Ta&&1==da||1==Ta&&0==da||0!=Ta||0!=da||p.add(Ba),1==da&&(ea=x=!1),Ra=this.a.T(Ba));Ba=Ra;if(256<=p.size){Ea=1;for(Ma=p.size-1;Ea<Ma;Ea++)Pa=
p.get(Ea),this.a.od(Pa,!1);p.set(1,p.Gc());p.Gh(2)}}while(Ba!=za);if(!ea)for(0==ma&&0==da&&p.add(za),Ea=0,Ma=p.size;Ea<Ma;Ea++)Pa=p.get(Ea),this.a.od(Pa,!1);p.clear(!1);V=ea||0==this.a.Ha(V)?this.a.sr(V):this.a.Qb(V)}}if(x)return c.Ga();this.pC();0<a&&this.rz(a);return this.a.ye(this.W)};l.prototype.iz=function(c){var a=new f.g,b=new f.g,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],g=new f.og,h=c,k=new f.g;c.Zb(k);for(var m=new f.b,n=new f.b,p=null,x=null,Q=0;4>Q;Q++){var V=!1,ca=0!=(Q&1),ba=0;switch(Q){case 0:ba=
this.Da.o;V=k.o<=ba&&k.v>=ba;break;case 1:ba=this.Da.A;V=k.A<=ba&&k.B>=ba;break;case 2:ba=this.Da.v;V=k.o<=ba&&k.v>=ba;break;case 3:ba=this.Da.B,V=k.A<=ba&&k.B>=ba}if(V)for(V=h,h=c.Ga(),V=V.Ba(),V.ej();V.Ta();)for(var ea,da=!0;V.Aa();){var ma=V.aa();ma.s(a);var za=this.Ph(a,Q,ba);if(-1==za){if(za=ma.uq(ca,ba,d,e),0<za){var Ba=0;ma.qq(m);for(var Ea=0;Ea<=za;Ea++)if(ea=Ea<za?e[Ea]:1,Ba!=ea){ma.jh(Ba,ea,g);var Ma=g.get();Ma.Fc(m);Ea<za&&(ca?(n.x=d[Ea],n.y=ba):(n.x=ba,n.y=d[Ea]),Ma.Sc(n));Ma.s(b);var Pa=
this.Ph(b,Q,ba);-1==Pa&&(null==p&&(p=new f.b),null==x&&(x=new f.b),Ma.qq(p),Ma.vs(x),ca?(Ba=Math.abs(p.y-ba),Pa=Math.abs(x.y-ba),Ba<Pa?(p.y=ba,Ma.Fc(p)):(x.y=ba,Ma.Sc(x))):(Ba=Math.abs(p.x-ba),Pa=Math.abs(x.x-ba),Ba<Pa?(p.x=ba,Ma.Fc(p)):(x.x=ba,Ma.Sc(x))),Ma.s(b),Pa=this.Ph(b,Q,ba));Ma.vs(m);Ba=ea;ea=Pa;1==ea?(h.$b(Ma,da),da=!1):da=!0}}}else ea=za,1==ea?(h.$b(ma,da),da=!1):da=!0}}return h};l.prototype.pC=function(){this.si=-1;this.fm(!1,this.Da.o);this.fm(!1,this.Da.v);this.fm(!0,this.Da.A);this.fm(!0,
this.Da.B);this.fd.resize(0);this.fd.Db(100);this.si=this.a.Kd();for(var c=new f.b,a=this.a.Kb(this.W);-1!=a;a=this.a.Qb(a))for(var b=this.a.Za(a),d=0,e=this.a.Ha(a);d<e;d++,b=this.a.T(b))if(this.a.w(b,c),this.Da.o==c.x||this.Da.v==c.x||this.Da.A==c.y||this.Da.B==c.y)this.a.Qa(b,this.si,this.fd.size),this.fd.add(b);this.Yl(!1,this.Da.o);this.Yl(!1,this.Da.v);this.Yl(!0,this.Da.A);this.Yl(!0,this.Da.B);this.zz()};l.prototype.rz=function(c){for(var a=new f.b,b=new f.b,d=null,e=null,g=f.L.Xf(2048,0),
h=this.a.Kb(this.W);-1!=h;h=this.a.Qb(h)){var k=this.a.Za(h),m=k;do{var n=this.a.T(m);this.a.w(m,a);var p=-1;a.x==this.Da.o?(this.a.w(n,b),b.x==this.Da.o&&(p=1)):a.x==this.Da.v&&(this.a.w(n,b),b.x==this.Da.v&&(p=1));a.y==this.Da.A?(this.a.w(n,b),b.y==this.Da.A&&(p=0)):a.y==this.Da.B&&(this.a.w(n,b),b.y==this.Da.B&&(p=0));if(-1!=p){null==d&&(d=new f.b);null==e&&(e=new f.b);d.K(a);e.ka(0,0);if(0==p){var x=a.x-this.Da.o;e.x=f.Tb.sign(b.x-a.x);d.x=c*f.Tb.hl(Math.floor(Math.abs(x/c)),x)+this.Da.o;0>d.x&&
(d.x+=c)}else x=a.y-this.Da.A,e.y=f.Tb.sign(b.y-a.y),d.y=c*f.Tb.hl(Math.floor(Math.abs(x/c)),x)+this.Da.A,0>d.y&&(d.y+=c);x=0!=p?b.y-a.y:b.x-a.x;var Q=Math.abs(x);if(65536<Q/c)throw f.f.Y("internal error");if(0<Q){Q=f.L.truncate(Q/c)+2;g.length<Q&&(g=f.L.Xf(Q));for(var V=Q=0;;V++){var ca=new f.b;ca.x=d.x+e.x*V*c;ca.y=d.y+e.y*V*c;ca=(0!=p?ca.y-a.y:ca.x-a.x)/x;if(1<=ca)break;0>=ca||(g[Q]=ca,Q++)}0!=Q&&this.a.em(m,g,Q)}}m=n}while(m!=k)}};l.prototype.fm=function(c,a){for(var b=-1,d=new f.b,e=null,g=this.a.Kb(this.W);-1!=
g;g=this.a.Qb(g))for(var h=this.a.Za(g),k=0,m=this.a.Ha(g);k<m;k++){var n=this.a.T(h);this.a.w(h,d);if(c?d.y==a:d.x==a)if(this.a.w(n,d),c?d.y==a:d.x==a)-1==b&&(b=this.a.Kd()),null==e&&(e=new f.ha(0),e.Db(100)),1!=this.a.Na(h,b)&&(e.add(h),this.a.Qa(h,b,1)),1!=this.a.Na(n,b)&&(e.add(n),this.a.Qa(n,b,1));h=n}-1!=b&&this.a.Xd(b);if(!(null==e||3>e.size)){var p=this;e.Zd(0,e.size,function(Ea,Ma){return p.Qh(Ea,Ma)});b=new f.b;g=new f.b;h=new f.b;g.Tc();var x=-1;k=new f.ha(0);m=new f.ha(0);n=null;for(var Q=
this.a.Kd(),V=this.a.Kd(),ca=0,ba=e.size;ca<ba;ca++){var ea=e.get(ca);this.a.w(ea,d);if(!d.qb(g)){if(-1!=x){for(var da=x;da<ca;da++){x=e.get(da);var ma=this.a.T(x);ea=this.a.Ma(x);var za=!1;this.a.w(ma,b);0>g.compare(b)&&(c?b.y==a:b.x==a)&&(k.add(x),za=!0,this.a.Qa(x,V,1));this.a.w(ea,b);0>g.compare(b)&&(c?b.y==a:b.x==a)&&(za||k.add(x),this.a.Qa(x,Q,1))}da=0;for(za=k.size;da<za;da++){x=k.get(da);ea=this.a.Na(x,Q);ma=this.a.Na(x,V);if(1==ea&&(ea=this.a.Ma(x),this.a.w(ea,h),!h.qb(d))){null==n&&(n=[]);
var Ba=f.b.vb(g,h);n[0]=f.b.vb(h,d)/Ba;0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998);this.a.em(ea,n,1);ea=this.a.Ma(x);this.a.wf(ea,d);m.add(ea);this.a.Qa(ea,Q,1);this.a.Qa(ea,V,-1)}1==ma&&(ma=this.a.T(x),this.a.w(ma,h),h.qb(d)||(null==n&&(n=[]),Ba=f.b.vb(g,h),n[0]=f.b.vb(g,d)/Ba,0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998),this.a.em(x,n,1),ea=this.a.T(x),this.a.wf(ea,d),m.add(ea),this.a.Qa(ea,Q,-1),this.a.Qa(ea,V,1)))}x=k;k=m;m=x;m.clear(!1)}x=ca;g.K(d)}}this.a.Xd(Q);
this.a.Xd(V)}};l.prototype.Yl=function(c,a){for(var b=new f.b,d=null,e=-1,g=0,h=this.fd.size;g<h;g++){var k=this.fd.get(g);if(-1!=k){var m=this.a.T(k);this.a.w(k,b);if(c?b.y==a:b.x==a)if(this.a.w(m,b),c?b.y==a:b.x==a)-1==e&&(e=this.a.Kd()),null==d&&(d=new f.ha(0),d.Db(100)),-2!=this.a.Na(k,e)&&(d.add(k),this.a.Qa(k,e,-2)),-2!=this.a.Na(m,e)&&(d.add(m),this.a.Qa(m,e,-2))}}if(null==d)-1!=e&&this.a.Xd(e);else{var n=this;d.Zd(0,d.size,function(Ma,Pa){return n.Qh(Ma,Pa)});g=0;for(h=d.size;g<h;g++){var p=
d.get(g);this.a.Qa(p,e,g)}k=new f.b;m=new f.b;m.Tc();var x=-1;g=0;for(h=d.size;g<h;g++)if(p=d.get(g),-1!=p&&(this.a.w(p,b),!b.qb(m))){if(-1!=x)for(;;){p=!1;for(var Q=1<g-x?g-1:g,V=x;V<Q;V++){var ca=d.get(V);if(-1!=ca){var ba=-1,ea=this.a.T(ca);this.a.w(ea,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ba=ea);ea=-1;var da=this.a.Ma(ca);this.a.w(da,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ea=da);if(-1!=ba&&-1!=ea)this.Oh(ca,d,e),this.a.od(ca,!1),this.Oh(ba,d,e),this.a.od(ba,!1),p=!0;else if(-1!=ba||-1!=ea){for(da=
V+1;da<g;da++){var ma=d.get(da);if(-1!=ma){var za=this.a.T(ma),Ba=-1;this.a.w(za,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(Ba=za);za=this.a.Ma(ma);var Ea=-1;this.a.w(za,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(Ea=za);if(-1!=Ba&&-1!=Ea){this.Oh(ma,d,e);this.a.od(ma,!1);this.Oh(Ba,d,e);this.a.od(Ba,!1);p=!0;break}if(-1!=ba&&-1!=Ea){this.ju(d,ca,ba,ma,Ea,e);p=!0;break}else if(-1!=ea&&-1!=Ba){this.ju(d,ma,Ba,ca,ea,e);p=!0;break}}}if(p)break}}}if(!p)break}x=g;m.K(b)}this.a.Xd(e)}};l.prototype.Oh=function(c,
a,b){b=this.a.Na(c,b);a.set(b,-1);b=this.a.Na(c,this.si);this.fd.set(b,-1);a=this.a.cd(c);-1!=a&&this.a.Za(a)==c&&(this.a.Sf(a,-1),this.a.dh(a,-1))};l.prototype.ju=function(c,a,b,d,e,g){this.a.Dc(a,d);this.a.Ec(d,a);this.a.Ec(b,e);this.a.Dc(e,b);this.Oh(d,c,g);this.a.ui(d,!1);this.Oh(e,c,g);this.a.ui(e,!0)};l.prototype.zz=function(){for(var c=0,a=this.fd.size;c<a;c++){var b=this.fd.get(c);-1!=b&&this.a.hj(b,-1)}for(var d=0,e=0,g=this.a.Kb(this.W);-1!=g;){var h=this.a.Za(g);if(-1==h||g!=this.a.cd(h)){var k=
g;g=this.a.Qb(g);this.a.Sf(k,-1);this.a.tr(k)}else{b=h;k=0;do this.a.hj(b,g),k++,b=this.a.T(b);while(b!=h);this.a.sp(g,!1);this.a.dh(g,this.a.Ma(h));this.a.Wj(g,k);e+=k;d++;g=this.a.Qb(g)}}c=0;for(a=this.fd.size;c<a;c++)if(b=this.fd.get(c),-1!=b&&(g=this.a.cd(b),-1==g)){g=this.a.Ef(this.W,-1);k=0;h=b;do this.a.hj(b,g),k++,b=this.a.T(b);while(b!=h);2>=k?(b=this.a.Na(h,this.si),this.fd.set(b,-1),h=this.a.od(h,!1),2==k&&(b=this.a.Na(h,this.si),0<=b&&this.fd.set(b,-1),this.a.od(h,!1)),k=g,this.a.Sf(k,
-1),this.a.tr(k)):(this.a.An(g,!0),this.a.Wj(g,k),this.a.Sf(g,h),this.a.dh(g,this.a.Ma(h)),this.a.sp(g,!1),e+=k,d++)}this.a.bm(this.W,d);this.a.Uj(this.W,e);c=0;for(a=this.a.kd;-1!=a;a=this.a.Ae(a))c+=this.a.D(a);this.a.JC(c)};l.gz=function(c,a,b,d){return(new l(a,d)).fz(c,b)};l.clip=function(c,a,b,d,e){return l.Tp(c,a,null,b,d,e)};l.Tp=function(c,a,b,d,e,g){var h=c.F();if(33==h)return e=c.w(),a.contains(e)?c:c.Ga();if(197==h)return e=new f.g,c.s(e),e.Ia(a)?(a=new f.Ih,c.copyTo(a),a.mp(e),a):c.Ga();
if(c.u())return c;if(a.u())return c.Ga();var k=new f.g;c.Zb(k);if(a.contains(k))return c;if(!a.isIntersecting(k))return c.Ga();(null!=b||isNaN(d))&&f.la.Yy(b,a,!1);if(!f.R.Rg(h))throw f.f.I();b=c.ib;if(null!=b&&(b=b.oi,null!=b)){b=b.rn(a);if(1==b){if(1736!=h)throw f.f.Y("internal error");c=new f.Fa(c.description);c.Np(a);return c}if(0==b)return c.Ga()}switch(h){case 550:g=null;h=c.D();b=c.Va(0);d=0;e=new f.b;for(k=0;k<h;k++)b.mc(2*k,e),a.contains(e)||(0==d&&(g=c.Ga()),d<k&&g.yd(c,d,k),d=k+1);0<d&&
g.yd(c,d,h);return 0==d?c:g;case 1736:case 1607:return l.gz(c,a,e,g);default:throw f.f.Y("internal error");}};l.prototype.Qh=function(c,a){var b=new f.b;this.a.w(c,b);c=new f.b;this.a.w(a,c);return b.compare(c)};return l}();f.fh=R})(fa||(fa={}));(function(f){var R=new f.b,l=function(){function a(b,d,e,g,h){this.bn=new f.b;this.Lk=new f.b;this.Vi=new f.b;this.a=b;this.hx=e;this.Go=g;this.bn=d;this.Hl=h;this.Lk.Tc();this.Vi.Tc()}a.prototype.iF=function(b){this.a.w(b,this.Lk);b=f.L.truncate((this.Lk.x-
this.bn.x)*this.Go+.5);var d=f.L.truncate((this.Lk.y-this.bn.y)*this.Go+.5);return c.WG(b,d)};a.prototype.Tz=function(b){return this.a.Na(b,this.Hl)};a.prototype.vz=function(b,d){this.a.w(b,this.Lk);this.a.w(d,this.Vi);return c.iw(this.Lk.x,this.Lk.y,this.Vi.x,this.Vi.y,this.hx)};return a}();f.ZZ=function(){return function(){}}();var c=function(){function a(){this.bn=new f.b;this.Iq=[0,0,0,0];this.ft=[0,0,0,0];this.Jo=this.Hl=-1}a.uR=function(b,d){var e=new a;e.a=b;e.qa=d;e.hx=d*d;e.Gw=2*d;e.Go=1/
e.Gw;return e.LP()};a.iw=function(b,d,e,g,h){b-=e;d-=g;return b*b+d*d<=h};a.WG=function(b,d){return f.L.Zh(d,f.L.Zh(b))};a.prototype.NP=function(b,d){this.a.Hc(b,R);for(var e=(R.y-this.bn.y)*this.Go,g=f.L.truncate((R.x-this.bn.x)*this.Go),h=f.L.truncate(e),k=e=0;1>=k;k+=1)for(var m=0;1>=m;m+=1){var n=a.WG(g+k,h+m),p=this.Gl.ES(n);-1!=p&&(this.Iq[e]=p,this.ft[e]=n,e++)}for(g=e-1;1<=g;g--)for(p=this.Iq[g],h=g-1;0<=h;h--)if(p==this.Iq[h]){this.ft[h]=-1;e--;g!=e&&(this.ft[g]=this.ft[e],this.Iq[g]=this.Iq[e]);
break}for(h=0;h<e;h++)this.OP(b,this.ft[h],R,this.Iq[h],d)};a.prototype.OP=function(b,d,e,g,h){for(var k=new f.b;-1!=g;g=this.Gl.US(g)){var m=this.Gl.ga(g);b==m||-1!=d&&this.a.Na(m,this.Hl)!=d||(this.a.Hc(m,k),a.iw(e.x,e.y,k.x,k.y,this.hx)&&h.add(g))}};a.prototype.ln=function(b,d,e){var g=this.a.Na(b,this.Jo),h=this.a.Na(d,this.Jo);-1==g&&(g=this.Cd.Th(),this.Cd.addElement(g,b),this.a.Qa(b,this.Jo,g));-1==h?this.Cd.addElement(g,d):this.Cd.lz(g,h);this.a.Qa(d,this.Jo,-2);d=this.qV(b,d);e&&(e=this.Rw.iF(b),
this.a.Qa(b,this.Hl,e));return d};a.oV=function(b,d,e){b.Ib(d);e=b;var g=new f.b;a.pV(b.w(),d.w(),g);e.nb(g)};a.pV=function(b,d,e){var g=b.x;b.x!=d.x&&(g=(1*b.x+1*d.x)/2);var h=b.y;b.y!=d.y&&(h=(1*b.y+1*d.y)/2);e.ka(g,h)};a.prototype.qV=function(b,d){var e=new f.b;this.a.w(b,e);var g=new f.b;this.a.w(d,g);var h=this.a.OG(b);d=this.a.OG(d);var k=h+d,m=0,n=e.x;e.x!=g.x&&(n=(e.x*h+g.x*d)/k,m++);var p=e.y;e.y!=g.y&&(p=(e.y*h+g.y*d)/k,m++);0<m&&this.a.nb(b,n,p);this.a.ZY(b,k);return 0!=m};a.prototype.LP=
function(){var b=this.a.pd,d=this.a.uG();this.bn=d.Wz();d=Math.max(d.ca(),d.N())/2147483646;this.Gw<d&&(this.Gw=d,this.Go=1/this.Gw);this.Cd=new f.Hu;this.Cd.ku(f.L.truncate(this.a.pd/3+1));this.Cd.vn(f.L.truncate(this.a.pd/3+1));this.Hl=this.a.Kd();this.Jo=this.a.Kd();this.Rw=new l(this.a,this.bn,this.hx,this.Go,this.Hl);this.Gl=new f.nM(f.L.truncate(4*b/3),this.Rw);this.Gl.fY(this.a.pd);b=!1;for(d=this.a.kd;-1!=d;d=this.a.Ae(d))for(var e=this.a.Kb(d);-1!=e;e=this.a.Qb(e))for(var g=this.a.Za(e),
h=0,k=this.a.Ha(e);h<k;h++){var m=this.Rw.iF(g);this.a.Qa(g,this.Hl,m);this.Gl.addElement(g,m);g=this.a.T(g)}var n=new f.ha(0);n.Db(10);for(d=this.a.kd;-1!=d;d=this.a.Ae(d))for(e=this.a.Kb(d);-1!=e;e=this.a.Qb(e))for(g=this.a.Za(e),h=0,k=this.a.Ha(e);h<k;h++){if(-2!=this.a.Na(g,this.Jo))for(m=this.a.Na(g,this.Hl),this.Gl.hd(g,m);;){this.NP(g,n);if(0==n.size)break;m=!1;for(var p=0,x=n.size;p<x;p++){var Q=n.get(p),V=this.Gl.ga(Q);this.Gl.zd(Q);m=this.ln(g,V,p+1==x)||m}b=b||m;n.clear(!1);if(!m)break}g=
this.a.T(g)}b&&this.GO();this.Rw=this.Gl=null;this.a.Xd(this.Hl);this.a.Xd(this.Jo);return b};a.prototype.GO=function(){for(var b=new f.b,d=this.Cd.re;-1!=d;d=this.Cd.$z(d)){var e=this.Cd.sc(d);this.a.w(this.Cd.ga(e),b);for(e=this.Cd.hb(e);-1!=e;e=this.Cd.hb(e))this.a.wf(this.Cd.ga(e),b)}};return a}();f.Eu=c})(fa||(fa={}));(function(f){var R=function(){function l(c){void 0===c&&(c=null);this.uf=null;this.Mb=!1;this.uf=null===c?[]:c}l.prototype.copyTo=function(c){if(c.Mb)throw f.f.Y("CompositeGeographicTransformation is read-only");
for(var a=0;a<this.uf.length;a++)c.uf.push(this.uf[a].Cf())};l.prototype.count=function(){return this.uf.length};l.prototype.GS=function(c){return this.uf[c]};l.prototype.add=function(c){if(this.Mb)throw f.f.Y("CompositeGeographicTransformation is read-only");this.uf.push(c.Cf())};l.prototype.clear=function(){if(this.Mb)throw f.f.Y("CompositeGeographicTransformation is read-only");this.uf.length=0};l.prototype.remove=function(c){if(this.Mb)throw f.f.Y("CompositeGeographicTransformation is read-only");
this.uf.splice(c,1)};l.prototype.Qv=function(){for(var c=this.$d(),a=0;a<c.count();a++)c.GS(a).Xs();c.uf=c.uf.reverse();return c};l.prototype.$d=function(){var c=new l;this.copyTo(c);return c};l.prototype.Cf=function(){return this.$d()};l.prototype.transform=function(c,a,b,d){if(c.length<a)throw f.f.Y("invalid Argument");var e=b;for(b=0;b<this.uf.length;b++){var g=this.uf[b];if(null!=g.Bm()){var h=g.no,k=h?1:0,m=h?g.Bm().getGeogcs2():g.Bm().getGeogcs1();m=m.getUnit().getUnitFactor();m=e/m;if(3.552713678800501E-15<
Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;f.tD.geogToGeog(g.Bm(),a,c,null,k);e=(h?g.Bm().getGeogcs1():g.Bm().getGeogcs2()).getUnit().getUnitFactor()}}m=e/d;if(3.552713678800501E-15<Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;return a};l.prototype.Ib=function(c){if(c==this)return!0;if(!(c instanceof l)||this.uf.length!=c.uf.length)return!1;for(var a=0;a<this.uf.length;a++)if(!this.uf[a].Ib(c.uf[a]))return!1;return!0};l.prototype.Px=function(){this.Mb=!0};l.prototype.toString=function(){for(var c=
"CGT ("+this.count()+") ",a=0,b=this.count();a<b;++a)c+=this.uf[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c};l.create=function(){return new l};l.N_=function(c,a){var b=new l;b.add(f.Hn.create(c,a));return b};l.O_=function(c,a){var b=new l;b.add(f.Hn.LF(c,a));return b};return l}();f.hy=R})(fa||(fa={}));(function(f){var R=Math.PI,l=2*Math.PI,c=Math.PI/2,a=function(){function e(){}e.cQ=function(g,h){var k=new e;k.x=g;k.y=h;k.type=0;k.$h=0;return k};
e.gl=function(g){var h=new e;h.x=g.x;h.y=g.y;h.type=0;h.$h=0;return h};e.bQ=function(g){var h=new e;h.x=g.x;h.y=g.y;h.type=g.type;h.$h=g.$h;return h};e.Rd=function(g,h,k){var m=new e;m.x=g.x+h*Math.cos(k);m.y=g.y+h*Math.sin(k);m.type=g.type;m.$h=g.$h;return m};e.wv=function(g,h){var k=new e;k.x=.5*(g.x+h.x);k.y=.5*(g.y+h.y);k.type=g.type;k.$h=g.$h;return k};e.EF=function(g,h){var k=new e;k.x=g.x+.001*(h.x-g.x);k.y=g.y+.001*(h.y-g.y);k.type=g.type;k.$h=g.$h;return k};return e}(),b=function(){return function(){}}();
(function(e){e[e.Round=0]="Round";e[e.Bevel=1]="Bevel";e[e.Miter=2]="Miter";e[e.Square=3]="Square"})(f.pM||(f.pM={}));var d=function(){function e(g){this.wB=this.Yb=this.Dg=null;this.md=g}e.U=function(g,h,k,m,n,p){if(null==g)throw f.f.I();if(1>g.pb())throw f.f.I();if(0==h||g.u())return g;p=new e(p);p.Do=g;p.La=h;p.qa=n;p.Qi=k;p.lB=m;return p.wy()};e.prototype.lN=function(){var g=this.Do,h=g.ac(),k=g.wc(),m=new f.b;m.tc(k,h);m.normalize();m.ow();m.scale(this.La);h.add(m);k.add(m);m=g.Ga();g.Fc(h);
g.Sc(k);return m};e.prototype.kN=function(){var g=this.Do;if(0<this.La&&2!=this.Qi){var h=new f.Fa;h.bd(g,!1);this.Do=h;return this.wy()}g=new f.Ih(g.X);g.O(this.La,this.La);return g};e.prototype.xK=function(g,h,k,m){return(h.x-g.x)*(m.x-k.x)+(h.y-g.y)*(m.y-k.y)};e.prototype.jc=function(g,h){if(void 0===h)this.Yb.push(g),this.qf++;else if(0==this.qf)this.jc(g);else{var k=this.ix,m=this.Dg[0==h?k-1:h-1],n=this.Dg[h],p=this.xK(m,n,this.Yb[this.qf-1],g);0<p?this.jc(g):0>p&&(0<this.xK(m,n,n,this.Yb[this.qf-
1])?(n=this.Dg[0==h?k-2:1==h?k-1:h-2],k=a.Rd(m,this.La,Math.atan2(m.y-n.y,m.x-n.x)-c),this.Yb[this.qf-1]=k,1==this.Qi||2==this.Qi?(k=a.wv(k,m),this.jc(k),k=a.Rd(m,this.La,this.qw+c),m=a.wv(k,m),m.type|=256,this.jc(m)):(k=a.Rd(m,this.La,this.qw+c),k.type|=256),this.jc(k),this.jc(g,h)):(k=a.Rd(n,this.La,this.qw+c),this.jc(k),1==this.Qi||2==this.Qi?(k=a.wv(k,n),this.jc(k),k=a.Rd(n,this.La,this.LA-c),m=a.wv(k,n),m.type|=256,this.jc(m)):(k=a.Rd(n,this.La,this.LA-c),k.type|=256),this.jc(k)))}};e.prototype.ZE=
function(){var g,h=this.ix;this.qf=0;var k=.5*this.qa,m=0,n=0;for(g=0;g<h;g++){var p=this.Dg[g],x=0==g?this.Dg[h-1]:this.Dg[g-1],Q=g==h-1?this.Dg[0]:this.Dg[g+1],V=x.x-p.x,ca=x.y-p.y,ba=Q.x-p.x,ea=Q.y-p.y,da=Math.atan2(ca,V),ma=Math.atan2(ea,ba);this.qw=da;this.LA=ma;0==g&&(m=da,n=ma);V=V*ea-ba*ca;ca=ma;ma<da&&(ma+=l);if(0<V*this.La)1==this.Qi||2==this.Qi?(da=a.Rd(p,this.La,da+c),this.jc(da),da=a.EF(p,da),this.jc(da),da=a.Rd(p,this.La,ma-c),p=a.EF(p,da),p.type|=256,this.jc(p),this.jc(da)):(V=.5*(ma-
da),V=this.La/Math.abs(Math.sin(V)),da=a.Rd(p,V,.5*(da+ma)),this.jc(da,g));else if(0!=(p.type&512)){V=1-k/Math.abs(this.La);x=1;Q=0>this.La?-R:R;-1<V&&1>V&&(ca=2*Math.acos(V),.017453292519943295>ca&&(ca=.017453292519943295),x=f.L.truncate(R/ca+1.5),1<x&&(Q/=x));ca=da+c;da=a.Rd(p,this.La,ca);0==g&&(da.type|=1024);this.jc(da,g);V=this.La/Math.cos(Q/2);ca+=Q/2;da=a.Rd(p,V,ca);da.type|=1024;for(this.jc(da);0<--x;)ca+=Q,da=a.Rd(p,V,ca),da.type|=1024,this.jc(da);da=a.Rd(p,this.La,ma-c);da.type|=1024;this.jc(da)}else if(1==
this.Qi)da=a.Rd(p,this.La,da+c),this.jc(da,g),da=a.Rd(p,this.La,ma-c),this.jc(da);else if(0==this.Qi)for(V=1-k/Math.abs(this.La),x=1,Q=ma-c-(da+c),-1<V&&1>V&&(ca=2*Math.acos(V),.017453292519943295>ca&&(ca=.017453292519943295),x=f.L.truncate(Math.abs(Q)/ca+1.5),1<x&&(Q/=x)),V=this.La/Math.cos(.5*Q),ca=da+c+.5*Q,da=a.Rd(p,V,ca),this.jc(da,g);0<--x;)ca+=Q,da=a.Rd(p,V,ca),this.jc(da);else 2==this.Qi?(V=x.x-p.x,ca=x.y-p.y,ba=Q.x-p.x,ea=Q.y-p.y,x=(V*ba+ca*ea)/Math.sqrt(V*V+ca*ca)/Math.sqrt(ba*ba+ea*ea),
.99999999<x?(da=a.Rd(p,1.4142135623730951*this.La,ma-.25*R),this.jc(da,g),da=a.Rd(p,1.4142135623730951*this.La,ma+.25*R),this.jc(da)):(x=Math.abs(this.La/Math.sin(.5*Math.acos(x))),Q=Math.abs(this.lB*this.La),x>Q?(V=.5*(ma-da),V=this.La/Math.abs(Math.sin(V)),da=a.Rd(p,V,.5*(da+ma)),ma=f.b.construct(da.x,da.y),da=f.b.construct(p.x,p.y),p=new f.b,p.tc(ma,da),ma=new f.b,ma.mY(Q/p.length(),p,da),da=(x-Q)*Math.abs(this.La)/Math.sqrt(x*x-this.La*this.La),0<this.La?p.ow():p.ur(),p.scale(da/p.length()),da=
new f.b,da.add(ma,p),x=new f.b,x.tc(ma,p),da=a.gl(da),this.jc(da,g),da=a.gl(x),this.jc(da)):(V=.5*(ma-da),V=this.La/Math.abs(Math.sin(V)),da=a.Rd(p,V,.5*(da+ma)),this.jc(da,g)))):(ma=ca,0<this.La?(ma>da&&(ma-=l),x=da-ma<c):(ma<da&&(ma+=l),x=ma-da<c),x?(V=1.4142135623730951*this.La,ca=0>V?da+.25*R:da+.75*R,da=a.Rd(p,V,ca),this.jc(da,g),ca=0>V?ma-.25*R:ma-.75*R,da=a.Rd(p,V,ca),this.jc(da)):(V=.5*(ma-da),V=this.La/Math.abs(Math.sin(V)),ma<da&&(ma+=l),da=a.Rd(p,V,(da+ma)/2),this.jc(da,g)))}this.qw=m;
this.LA=n;this.jc(this.Yb[0],0);p=a.bQ(this.Yb[this.qf-1]);this.Yb[0]=p;return this.bY()};e.prototype.fv=function(g,h){if(!(2>h))for(var k=0;k<h;k++){var m=this.Yb[g+k];0!=k?this.wB.Ii(f.b.construct(m.x,m.y)):this.wB.uu(f.b.construct(m.x,m.y))}};e.prototype.mN=function(g,h,k){var m=g.ua(h),n=g.zc(h);this.Yb=[];this.wB=k;if(g.Lb(h)){for(h=g.xa(m);g.xa(n-1).qb(h);)n--;if(2<=n-m){this.ix=n-m;this.Dg=[];for(h=m;h<n;h++)this.Dg.push(a.gl(g.xa(h)));this.ZE()&&this.fv(0,this.qf-1)}}else{for(h=g.xa(m);m<
n&&g.xa(m+1).qb(h);)m++;for(h=g.xa(n-1);m<n&&g.xa(n-2).qb(h);)n--;if(2<=n-m){this.ix=2*(n-m)-2;this.Dg=[];k=a.gl(g.xa(m));k.type|=1536;this.Dg.push(k);for(h=m+1;h<n-1;h++)k=a.gl(g.xa(h)),this.Dg.push(k);k=a.gl(g.xa(n-1));k.type|=512;this.Dg.push(k);for(h=n-2;h>=m+1;h--)k=a.gl(g.xa(h)),k.type|=1024,this.Dg.push(k);if(this.ZE())if(2<=this.Yb.length){g=-1;(n=0!=(this.Yb[this.qf-1].type&1024))||(g=0);for(h=1;h<this.qf;h++)(m=0!=(this.Yb[h].type&1024))?n||(n=h-1,1<n-g+1&&this.fv(g,n-g+1)):n&&(g=h-1),n=
m;n||(n=this.qf-1,1<n-g+1&&this.fv(g,n-g+1))}else g=0,n=this.qf-1,0<=g&&1<=n-g&&this.fv(g,n-g+1)}}this.Dg=null;this.ix=0;this.Yb=null;this.qf=0};e.prototype.bY=function(){for(var g=!1,h=0;h<this.qf;h++){var k=this.Yb[h];k.xh=h+1;k.zh=h-1;this.Yb[h]=k}k=this.Yb[0];k.zh=this.qf-2;this.Yb[0]=k;k=this.Yb[this.qf-2];k.xh=0;this.Yb[this.qf-2]=k;for(h=k=0;h<this.qf;h++)if(0!=(this.Yb[k].type&256)){var m=this.RQ(k);if(-1!=m)k=m;else{g=!0;break}}else k=this.Yb[k].xh;if(g)return!1;this.$P(k);return!0};e.prototype.RQ=
function(g){for(var h=this.qf-1,k=g,m,n,p=1;p<=h-2;p++){m=k=this.Yb[k].xh;n=g;for(var x=1;x<=p;x++){n=this.Yb[n].zh;if(0==(this.Yb[n].type&256)&&0==(this.Yb[m].type&256)){var Q=this.BT(n,m);if(-1!=Q)return Q}m=this.Yb[m].zh}}return-1};e.prototype.BT=function(g,h){var k=this.Yb[this.Yb[g].zh],m=this.Yb[g],n=this.Yb[this.Yb[h].zh],p=this.Yb[h];if(!this.oY(k,m,n,p))return-1;var x=new b;return this.JR(k,m,n,p,x)&&!x.OE&&f.L.fL((m.x-k.x)*(p.y-n.y)-(m.y-k.y)*(p.x-n.x))!=f.L.fL(this.La)?(k=this.Yb[g].zh,
x.pn.type=m.type,x.pn.xh=h,x.pn.zh=k,this.Yb[g]=x.pn,x.pn=this.Yb[h],x.pn.zh=g,this.Yb[h]=x.pn,h):-1};e.prototype.oY=function(g,h,k,m){return Math.max(g.x,h.x)>=Math.min(k.x,m.x)&&Math.max(k.x,m.x)>=Math.min(g.x,h.x)&&Math.max(g.y,h.y)>=Math.min(k.y,m.y)&&Math.max(k.y,m.y)>=Math.min(g.y,h.y)};e.prototype.JR=function(g,h,k,m,n){n.OE=!1;var p=(h.y-g.y)*(m.x-k.x)-(h.x-g.x)*(m.y-k.y),x=(k.y-g.y)*(h.x-g.x)-(k.x-g.x)*(h.y-g.y);p=0==p?2:x/p;if(0<=p&&1>=p){var Q=p;p=(m.y-k.y)*(h.x-g.x)-(m.x-k.x)*(h.y-g.y);
x=(g.y-k.y)*(m.x-k.x)-(g.x-k.x)*(m.y-k.y);p=0==p?2:x/p;if(0<=p&&1>=p)return n.pn=a.cQ(g.x+p*(h.x-g.x),g.y+p*(h.y-g.y)),n.pn.$h=k.$h+Q*(m.$h-k.$h),0!=Q&&1!=Q||0!=p&&1!=p||(n.OE=!0),n.C0=p,n.D0=Q,(0==Q||1==Q)&&0<p&&1>p||(0==p||1==p)&&0<Q&&1>Q?!1:!0}return!1};e.prototype.$P=function(g){for(;this.Yb[g].zh<g;)g=this.Yb[g].zh;var h=0,k=g;do k=this.Yb[k],this.Yb[h]=k,k=k.xh,h++;while(k!=g);this.Yb[h]=this.Yb[0];this.qf=h+1};e.prototype.JD=function(g){var h=this.Do,k=h.Ba();if(null!=k){k.ej();for(var m=-1;k.Ta();)m++,
this.mN(h,m,g)}};e.prototype.wy=function(){var g=this.Do.F();return 322==g?this.lN():197==g?this.kN():f.R.Ic(g)?(g=new f.Oa,g.$b(this.Do,!0),this.Do=g,this.wy()):1607==g?(g=new f.Oa,this.JD(g),g):1736==g?(g=new f.Fa,this.JD(g),g):null};return e}();f.RL=d})(fa||(fa={}));(function(f){var R=function(){function b(d){this.xk=d}b.prototype.w=function(d,e){this.xk.a.w(d,e)};b.prototype.zd=function(d){var e=this.xk.Ja.ga(d);this.xk.Ja.zd(d,-1);this.xk.a.od(e,!1)};return b}(),l=function(){function b(d){this.xk=
d}b.prototype.w=function(d,e){this.xk.aV.w(d,e)};b.prototype.zd=function(d){this.xk.Ja.zd(d,-1)};return b}(),c=function(){function b(d){this.xk=d}b.prototype.w=function(d,e){e.K(this.xk.dV[d])};b.prototype.zd=function(d){this.xk.Ja.zd(d,-1)};return b}(),a=function(){function b(d){void 0===d?(this.Ja=new f.bk,this.Ja.Le(20),this.a=new f.Yc,this.SU=this.a.Pg(550),this.At=this.a.Ef(this.SU,-1),this.ci=new R(this)):d instanceof Array?(this.Ja=new f.bk,this.Ja.Le(20),this.dV=d,this.ci=new c(this)):(this.Ja=
new f.bk,this.Ja.Le(20),this.aV=d,this.ci=new l(this))}b.prototype.Bb=function(d){var e=d.F();if(f.ly.Rg(e))this.tO(d);else if(f.Zk.Ic(e))this.zO(d);else if(197==e)this.qO(d);else if(33==e)this.xO(d);else throw f.f.I("invalid shape type");};b.prototype.qS=function(){var d=new f.Ra,e=this.Ja.sc(-1),g=new f.Fa(this.a.Pt);this.a.bj(this.Ja.ga(e),d);g.xf(d);for(e=this.Ja.hb(e);-1!=e;e=this.Ja.hb(e))this.a.bj(this.Ja.ga(e),d),g.lineTo(d);return g};b.aQ=function(d){var e=new b(d),g=d.D(),h=1,k=new f.b,
m=new f.b,n=new f.b;for(d.w(0,k);;){d.w(h,m);if(!(m.xA(k)&&h<g-1))break;h++}e.Ja.addElement(0,-1);e.Ja.Qn(h);for(g=h+1;g<d.D();g++)d.w(g,n),h=e.YC(n),-1!=h&&e.Ja.Tj(h,g);n=new f.Ra;h=e.Ja.sc(-1);g=new f.Fa(d.description);d.ne(e.Ja.ga(h),n);g.xf(n);for(h=e.Ja.hb(h);-1!=h;h=e.Ja.hb(h))d.ne(e.Ja.ga(h),n),g.lineTo(n);return g};b.construct=function(d,e,g){for(var h=new b(d),k=1,m=d[0];d[k].xA(m)&&k<e-1;)k++;h.Ja.addElement(0,-1);h.Ja.Qn(k);for(k+=1;k<e;k++)m=h.YC(d[k]),-1!=m&&h.Ja.Tj(m,k);d=0;for(e=h.Ja.sc(-1);-1!=
e;e=h.Ja.hb(e))g[d++]=h.Ja.ga(e);return d};b.vH=function(d,e){var g=d.ua(e),h=d.zc(e);e=!d.Lb(e)&&d.ho(e);d=d.Va(0);g*=2;h*=2;e&&(h-=2);if(6>h-g)return!0;e=new f.b;var k=new f.b,m=new f.b;d.mc(g,e);d.mc(g+2,k);d.mc(g+4,m);var n=b.Cv(k,m,e);if(n.Ys()||!b.Hm(n.value()))return!1;var p=f.b.construct(k.x,k.y),x=new f.b;for(g+=6;g<h;g+=2){x.K(k);k.K(m);d.mc(g,m);n=b.Cv(k,m,e);if(n.Ys()||!b.Hm(n.value()))return!1;n=b.Cv(p,m,e);if(n.Ys()||!b.Hm(n.value()))return!1;n=b.Cv(k,m,x);if(n.Ys()||!b.Hm(n.value()))return!1}return!0};
b.prototype.tO=function(d){for(var e=new f.Ra,g=new f.b,h=0;h<d.D();h++){d.w(h,g);var k=this.cs(g);if(-1!=k){d.ne(h,e);var m=this.a.jc(this.At,e);this.Ja.Tj(k,m)}}};b.prototype.qO=function(d){for(var e=new f.Ra,g=new f.b,h=0;4>h;h++){d.Ax(h,g);var k=this.cs(g);if(-1!=k){d.Pf(h,e);var m=this.a.jc(this.At,e);this.Ja.Tj(k,m)}}};b.prototype.zO=function(d){var e=new f.Ra,g=d.ac();g=this.cs(g);if(-1!=g){d.jp(e);var h=this.a.jc(this.At,e);this.Ja.Tj(g,h)}g=d.wc();g=this.cs(g);-1!=g&&(d.hp(e),d=this.a.jc(this.At,
e),this.Ja.Tj(g,d))};b.prototype.xO=function(d){var e=d.w();e=this.cs(e);-1!=e&&(d=this.a.jc(this.At,d),this.Ja.Tj(e,d))};b.prototype.cs=function(d){var e=-1;if(0==this.Ja.size(-1))return e=this.Ja.addElement(-4,-1);if(1==this.Ja.size(-1)){var g=this.a.xa(this.Ja.ga(this.Ja.sc(-1)));d.xA(g)||(e=this.Ja.Qn(-5));return e}return e=this.YC(d)};b.prototype.YC=function(d){var e=-1,g=this.Ja.sc(-1),h=this.Ja.Gc(-1),k=this.Ja.ga(g),m=this.Ja.ga(h),n=new f.b,p=new f.b;this.ci.w(k,n);this.ci.w(m,p);k=f.b.fp(p,
d,n);if(b.Hm(k))e=this.Ja.Qn(-1),n=this.WC(d,h,g),n!=g&&this.XC(d,g,this.Ja.Be(n));else if(b.oH(k)){p=this.Ja.$v(-1);var x=this.Ja.sc(-1),Q=this.Ja.Gc(-1);k=new f.b;for(m=new f.b;x!=this.Ja.Be(Q);){var V=this.Ja.ga(p);this.ci.w(V,k);V=f.b.fp(k,d,n);b.oH(V)?(Q=p,p=this.Ja.rl(p)):(x=p,p=this.Ja.pq(p))}p=Q;n=x;V=this.Ja.ga(p);x=this.Ja.ga(n);this.ci.w(V,k);this.ci.w(x,m);if(n==g||(k=f.b.fp(m,d,k),b.Hm(k)))e=this.Ja.ev(n,p,-2,!1),this.XC(d,p,h),this.WC(d,n,g)}else null==this.sb&&(this.sb=new f.zb),this.sb.Fc(p),
this.sb.Sc(n),n=this.sb.ae(d,!0),0>n?(n=this.Ja.Be(h),this.Ja.zd(h,-1),e=this.Ja.Qn(-3),this.WC(d,n,g)):1<n&&(n=this.Ja.hb(g),this.Ja.zd(g,-1),e=this.Ja.ev(-1,n,-3,!1),this.XC(d,n,h));return e};b.prototype.XC=function(d,e,g){if(e!=g){var h=this.Ja.ga(e),k=this.Ja.hb(e),m=new f.b,n=new f.b;for(this.ci.w(h,m);e!=g&&2<this.Ja.size(-1);){this.ci.w(this.Ja.ga(k),n);h=f.b.fp(n,d,m);if(b.Hm(h))break;h=e;e=k;m.K(n);k=this.Ja.hb(e);this.ci.zd(h)}}};b.prototype.WC=function(d,e,g){if(e==g)return g;var h=this.Ja.ga(e),
k=this.Ja.Be(e),m=new f.b,n=new f.b;for(this.ci.w(h,m);e!=g&&2<this.Ja.size(-1);){this.ci.w(this.Ja.ga(k),n);h=f.b.fp(m,d,n);if(b.Hm(h))break;h=e;e=k;m.K(n);k=this.Ja.Be(e);this.ci.zd(h)}return e};b.Cv=function(d,e,g){var h=new f.Wb;h.set(e.x);h.sub(d.x);var k=new f.Wb;k.set(g.y);k.sub(d.y);var m=new f.Wb;m.set(e.y);m.sub(d.y);e=new f.Wb;e.set(g.x);e.sub(d.x);h.Gg(k);m.Gg(e);h.sub(m);return h};b.Hm=function(d){return 0>d};b.oH=function(d){return 0<d};b.j0=function(d){return 0==d};return b}();f.Fu=
a})(fa||(fa={}));(function(f){var R=function(){function l(c){this.a=null;this.gI=!0;this.md=c}l.eJ=function(c,a,b){c=f.la.es(c);return f.Eu.iw(a.Ce(),a.lf(),b.Ce(),b.lf(),f.Tb.Wx(c))};l.MP=function(c,a){var b=new f.Ra;f.Eu.oV(c,a,b);return b};l.U=function(c,a,b,d){b=new l(b);b.a=c;b.qa=a;b.gI=d;return b.MN()};l.prototype.vN=function(c){return f.Eu.uR(this.a,c)};l.prototype.AN=function(c){return f.Gu.U(this.a,c,this.md)};l.prototype.MN=function(){var c=this.qa,a=f.la.es(c);c=f.la.CO(c);var b=1.00001*
c;c*=1.000001;for(var d=!1,e=30<this.a.pd+10?1E3:(this.a.pd+10)*(this.a.pd+10),g=0,h=this.a.ET();;g++){if(g>e)throw f.f.Y("Internal Error: max number of iterations exceeded");var k=this.vN(a);d=d||k;this.gI&&(k=0!=this.a.$p(a,!0,!1),d=d||k);k=!1;if(0==g||h||f.Gu.$I(!0,this.a,c,null,this.md))k=this.AN(b),d=d||k;if(!k)break;f.Ep.Sp(this.md)}return d};return l}();f.$j=R})(fa||(fa={}));(function(f){var R=function(){function c(a){this.ge=this.Nc=null;this.Gt=0;this.Vb=a;this.NA=!0}c.prototype.bw=function(a,
b){var d=this.a.ec(a);if(null==d){if(!this.a.gd(a,b))return null;d=b}return d};c.prototype.qr=function(){var a;void 0===a&&(a=!1);this.Gt++;if(a||0==(this.Gt&4095))this.Gt=0,f.Ep.Sp(this.Vb)};c.prototype.xQ=function(){var a=this.a.rr(!1),b=!1,d=new f.zb,e=new f.zb,g=new f.g;g.Ka();var h=new f.g;h.Ka();for(var k=new f.Ra,m=new f.AD,n=a.next();-1!=n;n=a.next()){f.Ep.Sp(this.Vb);var p=null,x=!1;if(!f.R.lo(this.a.dc(a.gk))){p=this.bw(n,d);if(null==p)continue;p.s(g);g.O(this.qa,this.qa);if(p.Qg(this.qa))if(p.Qg(0))x=
!0,p=null;else continue}var Q=this.a.rr(a),V=Q.next();for(-1!=V&&(V=Q.next());-1!=V;V=Q.next()){var ca=null,ba=!1;if(!f.R.lo(this.a.dc(Q.gk))){ca=this.bw(V,e);if(null==ca)continue;ca.s(h);if(ca.Qg(this.qa))if(ca.Qg(0))ba=!0,ca=null;else continue}var ea=0,da=0;if(null!=p&&null!=ca)g.tH(h)&&(m.gp(p),m.gp(ca),m.Ia(this.qa,!1),ea=m.ul(0),da=m.ul(1),0<ea+da&&(this.a.Fr(n,m,0,!0),this.a.Fr(V,m,1,!0)),m.clear());else if(null!=p){var ma=new f.b;this.a.w(V,ma);if(g.contains(ma)){m.gp(p);this.a.bj(V,k);m.rA(this.qa,
k,!1);ea=m.ul(0);if(0<ea)if(this.a.Fr(n,m,0,!0),ba){ba=-1;for(ma=this.a.T(V);-1!=ma&&ma!=V&&(ca=this.bw(ma,e),ba=ma,null!=ca&&ca.Qg(0));ma=this.a.T(ma));for(ma=V;-1!=ma&&(this.a.Hh(ma,m.Jf),ma!=ba);ma=this.a.T(ma));}else this.a.Hh(V,m.Jf);m.clear()}}else if(null!=ca){if(ma=new f.b,this.a.w(n,ma),h.O(this.qa,this.qa),h.contains(ma)){m.gp(ca);this.a.bj(n,k);m.rA(this.qa,k,!1);da=m.ul(0);if(0<da)if(this.a.Fr(V,m,0,!0),x){ba=-1;for(ma=this.a.T(n);-1!=ma&&ma!=n&&(ca=this.bw(ma,e),ba=ma,null!=ca&&ca.Qg(0));ma=
this.a.T(ma));for(ma=n;-1!=ma&&(this.a.Hh(ma,m.Jf),ma!=ba);ma=this.a.T(ma));}else this.a.Hh(n,m.Jf);m.clear()}}else continue;if(0!=ea+da){if(0!=ea){p=this.a.ec(n);if(null==p){if(!this.a.gd(n,d))continue;p=d;d.s(g)}else p.s(g);if(p.Qg(this.qa))break}b=!0}}}return b};c.prototype.yQ=function(){return this.hW()};c.prototype.hW=function(){return(new f.yD).uZ(this.a,this.qa)};c.prototype.aJ=function(){var a=!1;null==this.Nc&&(this.Nc=new f.bk);var b=new f.ha(0);b.Db(this.a.pd+1);for(var d=this.a.rr(),e=
d.next();-1!=e;e=d.next())b.add(e);this.a.Vx(b,b.size);b.add(-1);d=this.a.Kd();e=this.a.Kd();this.ge=new f.CD(this.a,this.qa,!this.NA);this.Nc.kp(this.ge);var g=new f.ha(0),h=new f.ha(0),k=0;new f.b;var m=this.a.ud;this.a.xb.rc();for(var n=this.a.xb.va[0].i,p,x,Q=b.get(k++);-1!=Q;){x=m.S(Q,0);p=n[2*x];x=n[2*x+1];var V=p,ca=x;do{var ba=m.S(Q,2),ea=m.S(Q,1);if(-1!=ba){var da=m.S(ba,0),ma=n[2*da];da=n[2*da+1];0>(ca<da?-1:ca>da?1:V<ma?-1:V>ma?1:0)&&(h.add(Q),h.add(ba))}-1!=ea&&(da=m.S(ea,0),ma=n[2*da],
da=n[2*da+1],0>(ca<da?-1:ca>da?1:V<ma?-1:V>ma?1:0)&&(h.add(ea),h.add(ea)));ma=this.a.Na(Q,d);-1!=ma&&(g.add(ma),this.a.Qa(Q,d,-1));ma=this.a.Na(Q,e);-1!=ma&&(g.add(ma),this.a.Qa(Q,e,-1));Q=b.get(k++);-1!==Q&&(ca=m.S(Q,0),V=n[2*ca],ca=n[2*ca+1])}while(-1!=Q&&V===p&&ca===x);V=1==g.size&&2==h.size;ma=ca=-1;ba=0;for(ea=g.size;ba<ea;ba++){da=g.get(ba);var za=this.Nc.Be(da);-1==za||g.UG(za)||(ca=za);da=this.Nc.hb(da);-1==da||g.UG(da)||(ma=da);if(-1!=ca&&-1!=ma)break}this.ge.dL(x,p);ba=0;for(ea=g.size;ba<
ea;ba++)da=g.get(ba),this.Nc.zd(da,-1);g.clear(!1);if(!V&&-1!=ca&&-1!=ma&&this.AP(ca,ma)){a=!0;this.Ti=this.ge.Dm();break}ba=0;for(ea=h.size;ba<ea;ba+=2){x=h.get(ba);p=h.get(ba+1);V?(x=this.Nc.ev(ca,ma,x,!0),V=!1):x=this.Nc.addElement(x,-1);if(this.ge.yg){this.Ti=this.ge.Dm();a=!0;break}-1==this.a.Na(p,d)?this.a.Qa(p,d,x):this.a.Qa(p,e,x)}if(a)break;h.Gh(0)}this.a.Xd(d);this.a.Xd(e);return a};c.prototype.AP=function(a,b){this.ge.compare(this.Nc,this.Nc.ga(a),b);a=this.ge.yg;this.ge.ks();return a};
c.jF=function(a){for(var b=a.kd;-1!=b;b=a.Ae(b))if(f.R.Bc(a.dc(b)))return!0;return!1};c.rR=function(a,b,d,e){if(!c.jF(a))return!1;b=new c(e);b.a=a;b.qa=d;if(15>a.pd)a=b.xQ();else return b.yQ();return a};c.U=function(a,b,d){return c.rR(a,a.uG(),b,d)};c.$I=function(a,b,d,e,g){if(!c.jF(b))return!1;var h=new c(g);h.a=b;h.qa=d;h.NA=a;if(h.aJ())return null!=e&&e.Or(h.Ti),!0;var k=new f.xd;k.HC();b.Qc(k);h=new c(g);h.a=b;h.qa=d;h.NA=a;a=h.aJ();k.HC();b.Qc(k);return a?(null!=e&&e.Or(h.Ti),!0):!1};c.Wl=function(a,
b){a=a.D();return 16>a?!1:2*a+Math.log(a)*Math.LOG10E/Math.log(2)*b<1*a*b};c.vQ=function(a,b,d,e){if(f.R.Bc(b.F()))return(new c(e)).wQ(a,b,d);throw f.f.Y("crack_A_with_B");};c.prototype.wQ=function(a,b,d){var e=new f.g;a.Zb(e);var g=new f.g;b.Zb(g);g.O(d,d);if(!g.isIntersecting(e))return a;var h=a.ib,k=null;null!=h&&(k=h.Hb);c.Wl(a,a.D())&&(k=f.la.pj(a,g));var m=null!=k?k.getIterator():null,n=b.Ba();b=a.Ba();var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(g=[];n.Ta();)for(;n.Aa();){var x=n.aa();if(null!=
k)for(m.wn(x,d),h=m.next();-1!=h;h=m.next()){if(this.qr(),b.Rb(k.ga(h),-1),b.Aa()){h=b.aa();var Q=h.Ia(x,null,p,null,d);for(h=0;h<Q;++h){var V=p[h];if(0!=V&&1!=V){var ca=b.wb(),ba=new l;ba.t=V;ba.index=ca;g.push(ba)}}}}else{var ea=new f.g;x.Zb(ea);ea.O(d,d);if(e.isIntersecting(ea))for(b.ej();b.Ta();)for(;b.Aa();)if(this.qr(),h=b.aa(),V=new f.g,h.Zb(V),V.isIntersecting(ea))for(Q=h.Ia(x,null,p,null,d),h=0;h<Q;++h)V=p[h],0!=V&&1!=V&&(ca=b.wb(),ba=new l,ba.t=V,ba.index=ca,g.push(ba))}}if(0==g.length)return a;
g=g.sort(l.ls);a=a.Ga();for(b.ej();b.Ta()&&!b.Aa(););d=b.aa();e=new f.og;k=-1;h=0;for(m=g.length;h<m;){p=g[h].index;for(n=h+1;n<m&&g[n].index==p;)++n;for(;b.wb()<p;){this.qr();x=b.Aa();V=b.Pa;(ea=x||!b.io()||b.jo())&&a.$b(d,k!=V);k=V;if(!x)for(;b.Ta()&&!b.Aa(););d=b.aa()}for(p=0;h<n;h++)V=g[h].t,V!=p&&(d.jh(p,V,e),p=V,V=b.Pa,a.$b(e.get(),k!=V),k=V);if(ea=(x=b.Aa())||!b.io()||b.jo())d.jh(p,1,e),a.$b(e.get(),!1);if(x)d=b.aa();else{for(;b.Ta()&&!b.Aa(););d=b.Aa()?b.aa():null}h=n}null!=d&&(V=b.Pa,(ea=
(x=b.Aa())||!b.io()||b.jo())&&a.$b(d,k!=V),k=V);for(x=b.Aa();;){if(!x){for(;b.Ta()&&!(x=b.Aa()););if(!x)break}d=b.aa();V=b.Pa;(ea=(x=b.Aa())||!b.io()||b.jo())&&a.$b(d,k!=V);k=V}return a};return c}();f.Gu=R;var l=function(){function c(){}c.ls=function(a,b){return a.index==b.index?a.t>b.t?1:a.t<b.t?-1:0:a.index>b.index?1:-1};return c}()})(fa||(fa={}));(function(f){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(f.TL||
(f.TL={}));var R=function(){return function(a,b,d,e,g,h,k,m,n,p,x){this.W=a;this.fx=b;this.vt=d;this.Ag=e;this.Ym=p;this.Il=x}}();f.a_=R;var l=function(){function a(b,d){this.yI=b;this.Ni=d}a.prototype.yN=function(b,d){var e=new f.b;this.Ni.w(b,e);var g=new f.b;this.Ni.w(d,g);e=e.compare(g);if(0!=e)return e;b=this.Ni.Na(b,this.yI);d=this.Ni.Na(d,this.yI);return b<d?-1:b==d?0:1};return a}(),c=function(){return function(a,b,d,e,g,h,k,m,n){this.Ag=a;this.vt=b;this.xB=d;this.JI=e;this.Ki=g;this.Il=h;
this.Ym=k;this.KI=m;this.gV=n}}();f.$Z=c;f.UL=function(){function a(){}a.SL=function(b,d,e,g,h,k){if(d.u())b=new R(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else{var m=new f.Yc;m.Bb(d);m.Bb(e);f.$j.U(m,g,k,!0);d=0;e=m.Kd();for(g=m.kd;-1!=g;g=m.Ae(g))for(k=m.Kb(g);-1!=k;k=m.Qb(k))for(var n=m.Za(k),p=0,x=m.Ha(k);p<x;n=m.T(n),p++)m.Qa(n,e,d++);d=a.PN(e,m);a.jN(b,d,m,h)}};a.PN=function(b,d){for(var e=d.pd,g=new f.ha(0),h=d.kd;-1!=h;h=d.Ae(h))for(var k=d.Kb(h);-1!=k;k=d.Qb(k))for(var m=
d.Za(k),n=0,p=d.Ha(k);n<p;m=d.T(m),n++)g.add(m);var x=new l(b,d);g.Zd(0,e,function(Ra,Qa){return x.yN(Ra,Qa)});b=[];var Q=[],V=d.Kd(),ca=d.Kd();h=d.kd;k=d.Ae(h);p=new f.b;var ba=new f.b,ea=g.get(0),da=d.cd(ea),ma=d.Zf(da);d.w(ea,p);var za=1;for(m=0;za<e-1;){var Ba=!1;for(n=za;n<e;n++)if(n!=m){var Ea=g.get(n),Ma=d.cd(Ea),Pa=d.Zf(Ma);d.w(Ea,ba);if(p.qb(ba))ma==h&&Pa==k&&(Ba=a.CN(V,ca,d,b,Q,da,ea,Ma,Ea));else break}if(Ba||m==za-1){Ba&&m==za-1&&za--;if(++m==e)break;ea=g.get(m);da=d.cd(ea);ma=d.Zf(da);
d.w(ea,p)}Ba||(za=m+1)}e=[];for(h=d.kd;-1!=h;h=d.Ae(h))for(k=d.Kb(h);-1!=k;k=d.Qb(k))for(g=d.Za(k),n=0,p=d.Ha(k);n<p;g=d.T(g),n++){m=d.Na(g,ca);if(0<=m)for(;m<Q.length&&Q[m].Ag==g;)e.push(Q[m++]);m=d.Na(g,V);if(0<=m)for(;m<b.length&&b[m].Ag==g;)e.push(b[m++])}d.Xd(V);d.Xd(ca);return e};a.CN=function(b,d,e,g,h,k,m,n,p){var x=e.wj(k),Q=e.wj(n),V=e.Za(k),ca=e.Za(n),ba=e.Ma(m),ea=e.Ma(p),da=!1,ma=!1,za=!1,Ba=!1;m!=V&&(p!=ca&&(da=a.DN(b,e,g,k,ba,n,ea)),p!=Q&&(ma=a.EN(b,e,g,k,ba,n,p)));m!=x&&(p!=ca&&(za=
a.FN(d,e,h,k,m,n,ea,V)),p!=Q&&(Ba=a.GN(d,e,h,k,m,n,p,V)));da&&ma&&za?(b=g.length-1,2==h[Ba?h.length-2:h.length-1].Ki&&(g[b-1]=g[b],--g.length)):da&&ma&&Ba&&2==h[h.length-1].Ki&&(h=g[g.length-1],--g.length,e.Na(h.Ag,b)==g.length&&e.Qa(h.Ag,b,-1));return da||ma||za||Ba};a.DN=function(b,d,e,g,h,k,m){var n=new f.zb,p=new f.zb,x=[0,0],Q=[0,0],V=d.ec(h);null==V&&(d.gd(h,n),V=n);n=d.ec(m);null==n&&(d.gd(m,p),n=p);V=V.Ia(n,null,x,Q,0);2>V&&(g=new c(h,g,x[0],NaN,V,m,k,Q[0],NaN),e.push(g),g=d.Na(h,b),0>g&&
d.Qa(h,b,e.length-1));return!0};a.EN=function(b,d,e,g,h,k,m){var n=new f.zb,p=new f.zb,x=[0,0],Q=[0,0],V=d.ec(h);null==V&&(d.gd(h,n),V=n);n=d.ec(m);null==n&&(d.gd(m,p),n=p);V=V.Ia(n,null,x,Q,0);return 2>V?(g=new c(h,g,x[0],NaN,V,m,k,Q[0],NaN),e.push(g),g=d.Na(h,b),0>g&&d.Qa(h,b,e.length-1),!0):!1};a.FN=function(b,d,e,g,h,k,m,n){var p=new f.zb,x=new f.zb,Q=[0,0],V=[0,0],ca=d.ec(h);null==ca&&(d.gd(h,p),ca=p);p=d.ec(m);null==p&&(d.gd(m,x),p=x);ca=ca.Ia(p,null,Q,V,0);if(2==ca)return g=new c(h,g,Q[0],
Q[1],ca,m,k,V[0],V[1]),e.push(g),g=d.Na(h,b),0>g&&d.Qa(h,b,e.length-1),!0;x=!1;h==n&&(g=new c(h,g,Q[0],NaN,ca,m,k,V[0],NaN),e.push(g),g=d.Na(h,b),0>g&&d.Qa(h,b,e.length-1),x=!0);return x};a.GN=function(b,d,e,g,h,k,m,n){var p=new f.zb,x=new f.zb,Q=[0,0],V=[0,0],ca=d.ec(h);null==ca&&(d.gd(h,p),ca=p);p=d.ec(m);null==p&&(d.gd(m,x),p=x);ca=ca.Ia(p,null,Q,V,0);if(2==ca)return g=new c(h,g,Q[0],Q[1],ca,m,k,V[0],V[1]),e.push(g),g=d.Na(h,b),0>g&&d.Qa(h,b,e.length-1),!0;x=!1;h==n&&(g=new c(h,g,Q[0],NaN,ca,m,
k,V[0],NaN),e.push(g),g=d.Na(h,b),0>g&&d.Qa(h,b,e.length-1),x=!0);return x};a.jN=function(b,d,e,g){var h=[];h[0]=new f.b;h[1]=new f.b;h[2]=new f.b;h[3]=new f.b;var k=new f.b,m=new f.b,n=new f.b,p=new f.b,x=null;null!=g&&(x=new f.og,x.ps());var Q=0,V=null,ca=new f.zb;new f.zb;for(var ba=e.Kb(e.kd);-1!=ba;ba=e.Qb(ba)){for(var ea=4,da=-1,ma=-1,za=-1,Ba=-1,Ea=NaN,Ma=!0,Pa=!1,Ra=!0,Qa=!0,Sa=!0,Ta=0,Ua=ba,Va=0,Ya=e.Za(ba),ab=e.Ha(ba),fb=0;fb<ab;Ya=e.T(Ya),fb++){var db=e.ec(Ya);if(null==db){if(!e.gd(Ya,
ca))continue;db=ca}-1==ma&&(ma=Ya);for(var Xa=0;Q<d.length&&Ya==d[Q].Ag;){da=d[Q].vt;var Za=d[Q].Ag,Wa=d[Q].xB,eb=d[Q].Ym,cb=d[Q].Il,hb=d[Q].KI;if(2==d[Q].Ki){if(Pa||(Ua=da,ma=Za,Va=Wa,za=eb,Ba=cb,Ea=hb,ea=2,null!=g?V=new f.Oa:Ta=0,Sa=!1,Qa=!0),Wa=d[Q].JI,hb=d[Q].gV,null!=g?(db.jh(Xa,d[Q].JI,x),V.$b(x.get(),Qa)):Ta++,Xa=Wa,Pa=!0,Qa=Ma=!1,Q+1==d.length||2!=d[Q+1].Ki||d[Q+1].Ag==Za&&d[Q+1].xB!=Xa){if(null!=g){var $a=new R(V,2,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea);g.push($a)}else null.add(Ta);Ua=da;
ma=Za;Va=Wa;za=eb;Ba=cb;Ea=hb;ea=2;Pa=Ma=!1;Qa=Sa=!0}}else{var gb=e.T(Za);if(Q<d.length-1&&d[Q+1].Ag==gb&&d[Q+1].Il==cb&&2==d[Q+1].Ki)Wa!=Xa&&(Sa&&(null!=g?V=new f.Oa:Ta=0),Ma=0<Q&&d[Q-1].vt==da?1==ea?0:0==ea?1:3:3,null!=g?(db.jh(Xa,Wa,x),V.$b(x.get(),Qa),$a=new R(V,Ma,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):(Ta++,null.add(Ta)),Xa=Wa,Ua=da,ma=Za,Va=Wa,za=eb,Ba=cb,Ea=hb,ea=Ma,Ma=Ra=!1,Qa=Sa=!0);else if(!a.KN(b,e,d,Q,k,m)){a.HN(e,d,Q,ba,Ya,n,p);var bb=!1;gb=!1;$a=!0;if(!(k.qb(n)||m.qb(n)||
k.qb(p)||m.qb(p))){h[0].K(k);h[1].K(m);h[2].K(n);h[3].K(p);h.sort(f.b.Wr);var ib=h[0],jb=h[1],kb=h[2],lb=h[3];ib.qb(k)?jb.qb(m)?b?(gb=bb=!0,$a=!1):bb=!1:lb.qb(m)?b?$a=gb=bb=!0:bb=!1:(bb=!0,$a=jb.qb(n)):jb.qb(k)?kb.qb(m)?b?(gb=bb=!0,$a=!1):bb=!1:ib.qb(m)?b?$a=gb=bb=!0:bb=!1:(bb=!0,$a=kb.qb(n)):kb.qb(k)?lb.qb(m)?b?(gb=bb=!0,$a=!1):bb=!1:jb.qb(m)?b?$a=gb=bb=!0:bb=!1:(bb=!0,$a=lb.qb(n)):ib.qb(m)?b?(gb=bb=!0,$a=!1):bb=!1:kb.qb(m)?b?$a=gb=bb=!0:bb=!1:(bb=!0,$a=ib.qb(n))}if(bb){bb=Ya==Za;if(Wa!=Xa||bb&&
0==Xa)Sa&&(null!=g?V=new f.Oa:Ta=0),null!=g?(db.jh(Xa,Wa,x),V.$b(x.get(),Qa)):Ta++;if($a)if(1!=ea){if(Wa!=Xa||bb&&0==Xa)null!=g?($a=new R(V,1,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta);if(!gb)ea=1;else if(Q==d.length-2||d[Q+2].vt!=da)ea=0}else{if(Wa!=Xa||bb&&0==Xa)null!=g?($a=new R(V,3,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta);ea=1}else if(0!=ea){if(Wa!=Xa||bb&&0==Xa)null!=g?($a=new R(V,0,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta);
if(!gb)ea=0;else if(Q==d.length-2||d[Q+2].vt!=da)ea=1}else{if(Wa!=Xa||bb&&0==Xa)null!=g?($a=new R(V,3,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta);ea=0}if(Wa!=Xa||bb&&0==Xa)Xa=Wa,Ua=da,ma=Za,Va=Wa,za=eb,Ba=cb,Ea=hb,Ma=Ra=!1,Qa=Sa=!0}}}Q++}1!=Xa&&(Sa&&(null!=g?V=new f.Oa:Ta=0),null!=g?(db.jh(Xa,1,x),V.$b(x.get(),Qa)):Ta++,Qa=Sa=!1,Ra=!0)}Ra&&(Wa=1,Za=e.wj(ba),Za=e.Ma(Za),cb=eb=-1,hb=NaN,Ma?null!=g?($a=new R(V,4,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta):(Ma=
1==ea?0:0==ea?1:3,null!=g?($a=new R(V,Ma,da,Za,Wa,ea,Ua,ma,Va,eb,cb,hb,za,Ba,Ea),g.push($a)):null.add(Ta)))}};a.KN=function(b,d,e,g,h,k){var m=e[g].KI;if(1==m)return a.IN(b,d,e,g,h,k);if(0==m)return a.JN(b,d,e,g,h,k);throw f.f.za();};a.IN=function(b,d,e,g,h,k){var m=new f.zb,n=e[g].Ag,p=e[g].Ym,x=e[g].Il,Q=-1,V=-1,ca=-1,ba=-1;if(!b&&0<g){var ea=e[g-1];Q=ea.Ag;V=ea.Ym;ca=ea.Il;ba=ea.Ki}var da=-1,ma=-1,za=-1,Ba=-1;g<e.length-1&&(ea=e[g+1],da=ea.Ag,ma=ea.Ym,za=ea.Il,Ba=ea.Ki);var Ea=d.T(n);ea=d.T(x);
if(!b)return 0<g&&Q==n&&V==p&&ca==ea&&2==ba||g<e.length-1&&da==Ea&&ma==p&&za==ea&&2==Ba?(b=d.ec(x),null==b&&(d.gd(x,m),b=m),k.K(b.qg()),h.Ut(k),k.normalize(),h.normalize(),!1):g<e.length-1&&da==n&&ma==p&&za==ea?(b=d.ec(x),null==b&&(d.gd(x,m),b=m),h.K(b.qg()),b=d.ec(ea),null==b&&(d.gd(ea,m),b=m),k.K(b.qg()),h.lr(),k.normalize(),h.normalize(),!1):!0;if(g==e.length-1||da!=n||ma!=p||za!=ea||2==Ba)return b=d.ec(x),null==b&&(d.gd(x,m),b=m),k.K(b.qg()),h.Ut(k),k.normalize(),h.normalize(),!1;b=d.ec(x);null==
b&&(d.gd(x,m),b=m);h.K(b.qg());b=d.ec(ea);null==b&&(d.gd(ea,m),b=m);k.K(b.qg());h.lr();k.normalize();h.normalize();return!1};a.JN=function(b,d,e,g,h,k){var m=new f.zb,n=e[g].Ag,p=e[g].Ym,x=e[g].Il,Q=-1,V=-1,ca=-1,ba=-1;if(!b&&g<e.length-1){var ea=e[g+1];Q=ea.Ag;V=ea.Ym;ca=ea.Il;ba=ea.Ki}var da=-1,ma=-1,za=-1;ea=-1;0<g&&(ea=e[g-1],da=ea.Ag,ma=ea.Ym,za=ea.Il,ea=ea.Ki);var Ba=d.T(n),Ea=d.Ma(x);return b?0==g||da!=n||ma!=p||za!=Ea||2==ea?(b=d.ec(x),null==b&&(d.gd(x,m),b=m),k.K(b.qg()),h.Ut(k),k.normalize(),
h.normalize(),!1):!0:0<g&&da==n&&ma==p&&za==Ea&&2==ea||g<e.length-1&&Q==Ba&&V==p&&ca==Ea&&2==ba?(b=d.ec(x),null==b&&(d.gd(x,m),b=m),k.K(b.qg()),h.Ut(k),k.normalize(),h.normalize(),!1):!0};a.HN=function(b,d,e,g,h,k,m){var n=new f.zb,p=b.ec(h);null==p&&(b.gd(h,n),p=n);e=d[e];d=e.Ag;e=e.xB;h=b.T(d);if(1==e)k.K(p.qg()),-1!=h&&h!=b.wj(g)?(p=b.ec(h),null==p&&(b.gd(h,n),p=n),m.K(p.qg()),p=b.ec(d),null==p&&b.gd(d,n)):m.K(k),k.lr(),m.normalize(),k.normalize();else if(0==e)m.K(p.qg()),k.Ut(m),m.normalize(),
k.normalize();else throw f.f.za();};return a}()})(fa||(fa={}));(function(f){(function(g){g[g.Linear=0]="Linear";g[g.Angular=1]="Angular";g[g.Area=2]="Area"})(f.iN||(f.iN={}));var R=function(){function g(h,k,m){this.nd=k;this.gi=m;this.eB=h}g.prototype.Ib=function(h){return h instanceof g?this.gi===h.gi:!1};g.MG=function(h){return 0!==h.nd?null:-1===h.eB?new g(-1,2,h.gi*h.gi):g.hh(d[h.eB])};g.hh=function(h){h=b[h];return void 0===h?null:h};g.iQ=function(h,k,m){var n=null;if(void 0!==m&&null!==m)try{"EPSG"===
m.values[0]&&(n=g.hh(parseInt(m.values[1])))}catch(p){}null===n&&(n=new g(-1,h,k));return n};g.prototype.xc=function(){return this.eB};g.prototype.pG=function(h){if(h.nd!=this.nd)throw f.f.Eb();return this.gi/h.gi};g.Rh=function(h,k,m){return k.pG(m)*h};g.IF=function(h,k,m,n,p){m=m.pG(n);for(n=0;n<k;n++)p[n]=h[n]*m};return g}();f.Uc=R;for(var l=[109401,1E4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,
3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2589998.4703195216,109414,1E6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,
109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988.110336,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,
1E-4,109452,1E-6,109453,6.4516E-4,109454,6.451625806477421E-4,109455,25.292852640000003,109456,25.29295381171408,109457,3434528.1495040003,109458,3434290.937856,109459,2.89612324,109460,25E8,109461,225E8,109462,.7168473118308245,109463,100,109464,1.244521604938272E-7,109465,1E-12,109466,1E-18],c=[1031,4.84813681109536E-9,9101,1,9102,.0174532925199433,9103,2.908882086657216E-4,9104,4.84813681109536E-6,9105,.01570796326794897,9106,.01570796326794897,9109,1E-6,9112,1.570796326794897E-4,9113,1.570796326794897E-6,
9114,9.817477042468104E-4],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1E3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,
109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,
109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,
109462,109016,3.527777777777778E-4,109464,109017,1E-6,109465,109018,1E-9,109466,109030,5E4,109460,109031,15E4,109461],b=[],d=[],e=0;e<l.length;e+=2)b[l[e]]=new R(l[e],2,l[e+1]);l=null;for(e=0;e<c.length;e+=2)b[c[e]]=new R(c[e],1,c[e+1]);c=null;for(e=0;e<a.length;e+=3)b[a[e]]=new R(a[e],0,a[e+1]),d[a[e]]=a[e+2];a=null})(fa||(fa={}));(function(f){var R=function(){function l(){this.yb=this.mb=0}l.prototype.set=function(c,a){void 0!==a?(this.mb=c,this.yb=a):"number"===typeof c?(this.mb=c,this.yb=0):(this.mb=
c.mb,this.yb=c.yb)};l.prototype.value=function(){return this.mb};l.prototype.add=function(c){var a=this.mb+c.mb;c=this.yb+c.yb+2.220446049250313E-16*Math.abs(a);this.mb=a;this.yb=c};l.prototype.uO=function(){var c=this.mb+1,a=this.yb+2.220446049250313E-16*Math.abs(c);this.mb=c;this.yb=a};l.prototype.nO=function(c,a){this.mb=c.mb+a.mb;this.yb=c.yb+a.yb+2.220446049250313E-16*Math.abs(this.mb)};l.prototype.sub=function(c){if("number"===typeof c){var a=this.mb-c;c=this.yb+2.220446049250313E-16*Math.abs(a)}else a=
this.mb-c.mb,c=this.yb+c.yb+2.220446049250313E-16*Math.abs(a);this.mb=a;this.yb=c};l.prototype.Gg=function(c){var a=this.mb*c.mb;this.yb=this.yb*Math.abs(c.mb)+c.yb*Math.abs(this.mb)+this.yb*c.yb+2.220446049250313E-16*Math.abs(a);this.mb=a};l.prototype.ep=function(c){var a=this.mb*c;this.yb=this.yb*Math.abs(c)+2.220446049250313E-16*Math.abs(a);this.mb=a};l.prototype.Ul=function(c,a){var b=Math.abs(c.mb)*Math.abs(a.mb);this.yb=c.yb*Math.abs(a.mb)+a.yb*Math.abs(c.mb)+c.yb*a.yb+2.220446049250313E-16*
Math.abs(b);this.mb=b};l.prototype.um=function(c){var a=Math.abs(c.mb),b=this.mb/c.mb,d=(this.yb+Math.abs(b)*c.yb)/a;c.yb>.01*a&&(c=c.yb/a,d*=1+(1+c)*c);this.mb=b;this.yb=d+2.220446049250313E-16*Math.abs(b)};l.prototype.sqrt=function(){if(0<=this.mb){var c=Math.sqrt(this.mb),a=this.mb>10*this.yb?.5*this.yb/c:this.mb>this.yb?c-Math.sqrt(this.mb-this.yb):Math.max(c,Math.sqrt(this.mb+this.yb)-c);a+=2.220446049250313E-16*Math.abs(c)}else this.mb<-1*this.yb?a=c=NaN:(c=0,a=Math.sqrt(this.yb));this.mb=c;
this.yb=a};l.prototype.sin=function(c){var a=Math.sin(c.mb),b=Math.cos(c.mb);this.mb=a;a=Math.abs(a);this.yb=(Math.abs(b)+.5*a*c.yb)*c.yb+2.220446049250313E-16*a};l.prototype.cos=function(c){var a=Math.sin(c.mb),b=Math.cos(c.mb);this.mb=b;b=Math.abs(b);this.yb=(Math.abs(a)+.5*b*c.yb)*c.yb+2.220446049250313E-16*b};l.prototype.xg=function(){return Math.abs(this.mb)<=this.yb};l.prototype.Ys=function(){return this.xg()&&0!=this.yb};return l}();f.Wb=R})(fa||(fa={}));var wa=new fa.b,ia=new fa.b,ra=new fa.b,
xa=new fa.b,ya=new fa.b;(function(f){var R;(function(c){c[c.closedPath=1]="closedPath";c[c.exteriorPath=2]="exteriorPath";c[c.ringAreaValid=4]="ringAreaValid"})(R||(R={}));var l=function(){function c(a,b,d,e,g,h,k){void 0!==b?(this.Ya=a,this.gk=b,this.il=d,this.ri=e,this.ya=h,this.TA=k,this.Nw=g):(this.Ya=a.Ya,this.gk=a.gk,this.il=a.il,this.ri=a.ri,this.ya=a.ya,this.TA=a.TA,this.Nw=a.Nw);this.PH=!0}c.prototype.next=function(){return this.PH?(this.PH=!1,this.ri):-1!=this.ri?(this.ri=this.Ya.T(this.ri),
this.ya++,-1!=this.ri&&this.ri!=this.Nw?this.ri:this.tV()):-1};c.prototype.tV=function(){this.il=this.Ya.Qb(this.il);for(this.ya=0;-1!=this.gk;){for(;-1!=this.il;this.il=this.Ya.Qb(this.il))if(this.Nw=this.ri=this.Ya.Za(this.il),-1!=this.ri)return this.ri;this.gk=this.Ya.Ae(this.gk);if(-1==this.gk)break;if(!this.TA||f.R.Bc(this.Ya.dc(this.gk)))this.il=this.Ya.Kb(this.gk)}return-1};c.LQ=function(a,b,d,e,g,h,k){return new c(a,b,d,e,g,h,k)};return c}();f.f_=l;R=function(){function c(){this.Co=this.Nm=
this.Dk=this.dd=this.Kk=this.Oo=this.Ui=this.ld=this.hi=this.Zg=this.bf=this.Sl=null;this.Ww=this.kd=-1;this.pd=0;this.QA=!1;this.Pt=this.Qt=this.xb=null}c.prototype.Yh=function(a){return null!=this.bf?this.bf[a]:null};c.prototype.eh=function(a,b){if(null==this.bf){if(null==b)return;this.bf=[];for(var d=0,e=this.xb.D();d<e;d++)this.bf.push(null)}this.bf[a]=b};c.prototype.rp=function(a,b){this.ld.P(a,1,b)};c.prototype.qp=function(a,b){this.ld.P(a,2,b)};c.prototype.DC=function(a,b){this.ld.P(a,6,b)};
c.prototype.mq=function(a){return this.ld.S(a,6)};c.prototype.Nx=function(a,b){this.ld.P(a,7,b)};c.prototype.Yv=function(a){return this.ld.S(a,0)};c.prototype.SK=function(a,b){this.dd.P(a,1,b)};c.prototype.WK=function(a,b){this.dd.P(a,0,b)};c.prototype.vG=function(a){return this.dd.S(a,7)};c.prototype.op=function(a,b){this.dd.P(a,3,b)};c.prototype.pp=function(a,b){this.dd.P(a,4,b)};c.prototype.OV=function(a){null==this.dd&&(this.dd=new f.ad(8));var b=this.dd.Ke();this.dd.P(b,2,a);this.dd.P(b,5,0);
this.dd.P(b,6,0);this.dd.P(b,7,b);return b};c.prototype.$R=function(a){this.dd.hd(a)};c.prototype.QV=function(a){null==this.ld&&(this.ld=new f.ad(8),this.ud=new f.ad(5),this.Ui=new f.ie(0),this.Oo=new f.ie(0));var b=this.ld.Ke();this.ld.P(b,0,b);this.ld.P(b,3,0);this.ld.P(b,6,0);this.Nx(b,a);b>=this.Ui.size&&(a=16>b?16:f.L.truncate(3*b/2),this.Ui.resize(a),this.Oo.resize(a));this.Ui.set(b,0);this.Oo.set(b,0);return b};c.prototype.fG=function(a){this.ld.hd(a)};c.prototype.Az=function(a){this.ud.hd(a);
this.pd--};c.prototype.dJ=function(a){null==this.ld&&(this.ld=new f.ad(8),this.ud=new f.ad(5),this.Ui=new f.ie(0),this.Oo=new f.ie(0));var b=this.ud.Ke(),d=0<=a?a:b;this.ud.P(b,0,d);if(0>a){if(d>=this.xb.D()){a=16>d?16:f.L.truncate(3*d/2);this.xb.resize(a);if(null!=this.bf)for(var e=0;e<a;e++)this.bf.push(null);null!=this.Zg&&this.Zg.resize(a);this.Qt=this.xb.Va(0)}this.xb.nb(d,-1E38,-1E38);null!=this.bf&&(this.bf[d]=null);null!=this.Zg&&this.Zg.write(d,1)}this.ud.P(b,4,2*d);this.pd++;return b};c.prototype.Bj=
function(a,b,d){var e=-1!=b?this.Ma(b):this.wj(a),g=-1!=e?this.T(e):-1,h=this.dJ(null==d?this.pd:-1),k=this.Ua(h);null!=d&&this.xb.qu(k,d);this.hj(h,a);this.Dc(h,g);this.Ec(h,e);-1!=g&&this.Ec(g,h);-1!=e&&this.Dc(e,h);d=this.Lb(a);e=this.Za(a);-1==b&&this.dh(a,h);b==e&&this.Sf(a,h);d&&-1==g&&(this.Dc(h,h),this.Ec(h,h));this.Wj(a,this.Ha(a)+1);a=this.Zf(a);this.Uj(a,this.D(a)+1);return h};c.prototype.zm=function(){null==this.Co&&(this.Co=new f.Ra(this.xb.description));return this.Co};c.prototype.np=
function(a,b){this.dd.P(a,2,this.dd.S(a,2)&-134217729||(1==b?134217728:0))};c.prototype.$n=function(a){return 0!=(this.dd.S(a,2)&134217728)?1:0};c.prototype.rO=function(a){var b=this.Pg(a.F(),a.description);1736==a.F()&&this.np(b,a.$n());this.GE(b,a);return b};c.prototype.sO=function(a){var b=this.Pg(a.F(),a.description);this.HE(b,a);return b};c.prototype.pX=function(a,b){null==this.ld&&(this.ld=new f.ad(8),this.ud=new f.ad(5),this.Ui=new f.ie(0),this.Oo=new f.ie(0));this.ld.Le(this.ld.Og+a);this.ud.Le(this.ud.Og+
b);this.Ui.Db(this.Ui.size+a);this.Oo.Db(this.Oo.size+a)};c.prototype.GE=function(a,b){this.pX(b.$(),b.D());this.Sl.yd(b,0,b.D());this.Qt=this.xb.Va(0);for(var d=null!=this.bf&&null!=b.af,e=0,g=b.$();e<g;e++)if(!(2>b.Ha(e))){var h=this.Ef(a,-1);this.An(h,b.Lb(e));for(var k=b.ua(e),m=b.zc(e);k<m;k++){var n=this.Bj(h,-1,null);if(d)if(n=this.Ua(n),0!=(b.KG(k)&1))this.eh(n,null);else{var p=new f.og;b.ec(k,p,!0);this.eh(n,p.get())}}}};c.prototype.HE=function(a,b){this.Sl.yd(b,0,b.D());this.Qt=this.xb.Va(0);
a=this.Ef(a,-1);var d=0;for(b=b.D();d<b;d++)this.Bj(a,-1,null)};c.prototype.sZ=function(a,b,d){var e=this.T(a);if(-1==e)throw f.f.za();for(var g=this.zm(),h=this.cd(a),k=0,m=b.ul(d);k<m;k++){var n=this.Ua(a),p=this.T(a),x=b.nq(d,k);0==k&&(x.jp(g),this.Hh(a,g));322==x.F()?this.eh(n,null):this.eh(n,f.R.$d(x));x.hp(g);k<m-1?a=this.Bj(h,p,g):this.Hh(e,g)}};c.prototype.rZ=function(a,b,d){var e=this.T(a);if(-1==e)throw f.f.za();for(var g=this.zm(),h=this.cd(a),k=0,m=b.ul(d);k<m;k++){var n=this.Ua(a),p=
this.T(a),x=b.nq(d,m-k-1);0==k&&(x.hp(g),this.Hh(a,g));322==x.F()?this.eh(n,null):this.eh(n,f.R.$d(x));x.jp(g);k<m-1?a=this.Bj(h,p,g):this.Hh(e,g)}};c.prototype.uG=function(){var a=new f.g;a.Ka();for(var b=this.rr(),d=new f.b,e=!0,g=b.next();-1!=g;g=b.next())this.w(g,d),e?a.Nb(d.x,d.y):a.Sk(d.x,d.y),e=!1;return a};c.prototype.Bb=function(a){var b=a.F();if(f.R.Bc(b))return this.rO(a);if(550==b)return this.sO(a);throw f.f.za();};c.prototype.FO=function(a,b){var d=b.F();if(f.R.Bc(d))this.GE(a,b);else if(550==
d)this.HE(a,b);else throw f.f.za();};c.prototype.wO=function(a,b){var d=this.Pg(1736,a.description);if(2>a.Ha(b))return d;this.Sl.yd(a,a.ua(b),a.zc(b));this.Qt=this.xb.Va(0);var e=this.Ef(d,-1);this.An(e,a.Lb(b)||!0);var g=null!=this.bf&&null!=a.af,h=a.ua(b);for(b=a.zc(b);h<b;h++){var k=this.Bj(e,-1,null);if(g)if(k=this.Ua(k),0!=(a.KG(h)&1))this.eh(k,null);else{var m=new f.og;a.ec(h,m,!0);this.eh(k,m.get())}}return d};c.prototype.ye=function(a){var b=this.dc(a),d=f.hM.Pg(b,this.Sl.description),e=
this.D(a);if(0==e)return d;if(f.R.Bc(b)){b=this.$(a);for(var g=f.Xc.Sh(b+1),h=f.Xc.ns(b+1,0),k=d.description,m=0,n=k.Ca;m<n;m++){for(var p=k.jd(m),x=f.oa.Sa(p),Q=f.Xc.JF(p,e),V=this.xb.Va(p),ca=0,ba=0,ea=0,da=this.Kb(a);-1!=da;da=this.Qb(da)){var ma=0;this.Lb(da)&&(ma|=1);this.rU(da)&&(ma|=4);0!=ma&&h.DK(ba,ma);var za=this.Ha(da);g.write(ba++,ea);ea+=za;if(0==p){za=V;var Ba=Q,Ea=new f.b;for(ma=this.Za(da);ca<ea;ma=this.T(ma),ca++){var Ma=this.Ua(ma);za.mc(2*Ma,Ea);Ba.Au(2*ca,Ea)}}else for(ma=this.Za(da);ca<
ea;ma=this.T(ma),ca++)for(Ma=this.Ua(ma),Ba=0;Ba<x;Ba++)Ea=V.Ig(Ma*x+Ba),Q.Mr(ca*x+Ba,Ea)}d.yn(p,Q);g.write(b,e)}d.TK(h);d.UK(g);d.Oc(16777215)}else if(550==b){k=d.description;d.resize(e);m=0;for(n=k.Ca;m<n;m++){p=k.jd(m);x=f.oa.Sa(p);Q=d.Va(p);V=this.xb.Va(p);ca=0;da=this.Kb(a);za=this.Ha(da);for(ma=this.Za(da);ca<za;ma=this.T(ma),ca++)for(Ma=this.Ua(ma),Ba=0;Ba<x;Ba++)Ea=V.Ig(Ma*x+Ba),Q.Mr(ca*x+Ba,Ea);d.yn(p,Q)}d.Oc(16777215)}return d};c.prototype.kC=function(a){for(var b=this.Kb(a);-1!=b;b=this.sr(b));
b=this.fT(a);var d=this.Ae(a);-1!=b?this.SK(b,d):this.kd=d;-1!=d?this.WK(d,b):this.Ww=b;this.$R(a)};c.prototype.Pg=function(a,b){return void 0===b?this.MF(a,f.ke.ug()):this.MF(a,b)};c.prototype.MF=function(a,b){a=this.OV(a);null==this.xb?this.xb=this.Sl=new f.Hd(b):this.Sl.Tl(b);this.Pt=this.Sl.description;this.QA=1<this.Pt.Ca;-1==this.kd?this.kd=a:(this.WK(a,this.Ww),this.SK(this.Ww,a));return this.Ww=a};c.prototype.Ae=function(a){return this.dd.S(a,1)};c.prototype.fT=function(a){return this.dd.S(a,
0)};c.prototype.dc=function(a){return this.dd.S(a,2)&2147483647};c.prototype.LK=function(a,b,d){b=this.Dk[b];a=this.vG(a);a>=b.size&&b.resize(Math.max(f.L.truncate(1.25*a),16),-1);b.write(a,d)};c.prototype.wG=function(a,b){a=this.vG(a);b=this.Dk[b];return a<b.size?b.read(a):-1};c.prototype.NF=function(){null==this.Dk&&(this.Dk=[]);for(var a=0;a<this.Dk.length;a++)if(null==this.Dk[a])return this.Dk[a]=f.Xc.Sh(0),a;this.Dk.push(f.Xc.Sh(0));return this.Dk.length-1};c.prototype.cY=function(a){this.Dk[a]=
null};c.prototype.Kb=function(a){return this.dd.S(a,3)};c.prototype.Rv=function(a){return this.dd.S(a,4)};c.prototype.D=function(a){return this.dd.S(a,5)};c.prototype.$=function(a){return this.dd.S(a,6)};c.prototype.$p=function(a,b,d){for(var e=0,g=this.kd;-1!=g;g=this.Ae(g)){var h=this.dc(g);if(f.R.Bc(h)&&(!d||1736==h)){h=1736==this.dc(g);for(var k=this.Kb(g);-1!=k;){for(var m=0,n=this.Za(k);m<f.L.truncate(this.Ha(k)/2);){var p=this.T(n);if(-1==p)break;var x=this.Ua(n),Q=this.Yh(x);null!=Q?x=Q.Pb():
(Q=this.Ua(p),x=this.xb.Yr(x,Q));x<=a?(0==x?0==e&&(e=-1):e=1,p!=this.wj(k)&&(this.UC(p,n),this.od(p,!0))):n=this.T(n);m++}m=this.Za(k);for(n=this.Lb(k)?m:this.wj(k);0<this.Ha(k);)if(p=this.Ma(n),-1!=p){var V=this.Ua(p);Q=this.Yh(V);null!=Q?x=Q.Pb():(x=this.Ua(n),x=this.xb.Yr(x,V));if(x<=a)0==x?0==e&&(e=-1):e=1,this.UC(p,n),this.od(p,!1),m==p&&(m=this.Za(k));else if(n=this.Ma(n),n==m)break}else{this.od(n,!0);0==e&&(e=-1);break}n=this.Ha(k);b&&(h?3>n:2>n)?(k=this.sr(k),e=0<n?1:0==e?-1:e):k=this.Qb(k)}}}return e};
c.prototype.UC=function(a,b){var d=this.Ua(a),e=this.Ua(b);null!=this.Zg&&(d=this.Zg.read(d),this.Zg.write(e,d));if(null!=this.hi)for(e=0,d=this.hi.length;e<d;e++)if(null!=this.hi[e]){var g=this.Na(a,e);-1!=g&&this.Qa(b,e,g)}};c.prototype.em=function(a,b,d){var e=0,g=this.T(a);if(-1==g)throw f.f.za();for(var h=this.Ua(a),k=this.Ua(g),m=this.Yh(h),n=null==m?this.xb.Yr(h,k):m.Pb(),p=0;p<d;p++){var x=b[p];if(0<x&&1>x){var Q=x;null!=m&&(Q=0<n?m.zy(x)/n:0);this.xb.VD(h,k,Q,this.zm());var V=this.Bj(this.cd(a),
g,this.zm());e++;if(null!=m){var ca=m.jl(0,x);Q=this.Ua(this.Ma(V));this.eh(Q,ca);this.wf(V,ca.wc());if(p==d-1||1==b[p+1])x=m.jl(x,1),this.eh(Q,x)}}}return e};c.prototype.qZ=function(a,b,d){var e=0,g=this.T(a);if(-1==g)throw f.f.Y("internal error");var h=this.Ua(a),k=this.Ua(g),m=this.Yh(h),n=null==m?this.xb.Yr(h,k):m.Pb(),p=0;a=this.cd(a);for(var x=0;x<d;x++){var Q=b[x];if(p<Q&&1>Q){var V=Q;null!=m&&(V=0<n?m.zy(Q)/n:0);this.xb.VD(h,k,V,this.zm());V=this.TT(a,g,this.zm());e++;if(null!=m){p=m.jl(p,
Q);var ca=this.Ua(this.Ma(V));this.eh(ca,p);this.nb(V,p.pa,p.ma);if(x==d-1||1==b[x+1])p=m.jl(Q,1),V=this.Ua(V),this.eh(V,p)}}p=Q}return e};c.prototype.TT=function(a,b,d){var e=-1!=b?this.Ma(b):this.wj(a),g=-1!=e?this.T(e):-1,h=this.dJ(null==d?this.pd:-1),k=this.Ua(h);null!=d&&this.xb.qu(k,d);this.hj(h,a);this.Dc(h,g);this.Ec(h,e);-1!=g&&this.Ec(g,h);-1!=e&&this.Dc(e,h);d=this.Lb(a);e=this.Za(a);-1==b&&this.dh(a,h);b==e&&(d&&-1!=e||this.Sf(a,h));d&&-1==g&&(this.Dc(h,h),this.Ec(h,h));this.Wj(a,this.Ha(a)+
1);a=this.Zf(a);this.Uj(a,this.D(a)+1);return h};c.prototype.gF=function(a,b,d){var e=this.Ua(b),g=this.Ua(d);if(0>e||g>this.pd-1)throw f.f.I("invalid call");if(e>g&&!this.Lb(a))throw f.f.I("cannot iterate across an open path");for(a=0;b!=d;b=this.T(b))e=this.Ua(b),g=this.Yh(e),null!=g?a+=g.Pb():(g=this.Ua(this.T(b)),a+=this.xb.Yr(e,g));return a};c.prototype.Hh=function(a,b){var d=this.Ua(a);this.xb.qu(d,b);d=this.Yh(d);null!=d&&d.setStart(b);a=this.Ma(a);-1!=a&&(a=this.Ua(a),null!=this.Yh(a)&&d.setEnd(b))};
c.prototype.bj=function(a,b){a=this.Ua(a);this.xb.ne(a,b)};c.prototype.wf=function(a,b){this.nb(a,b.x,b.y)};c.prototype.nb=function(a,b,d){var e=this.Ua(a);this.xb.nb(e,b,d);e=this.Yh(e);null!=e&&e.GC(b,d);a=this.Ma(a);-1!=a&&(a=this.Ua(a),null!=this.Yh(a)&&e.am(b,d))};c.prototype.w=function(a,b){this.xb.w(this.ud.S(a,0),b)};c.prototype.Hc=function(a,b){this.xb.va[0].mc(2*this.ud.S(a,0),b)};c.prototype.xa=function(a){var b=new f.b;this.xb.w(this.ud.S(a,0),b);return b};c.prototype.PG=function(a,b){this.Qt.mc(2*
a,b)};c.prototype.Rc=function(a,b,d){return this.xb.Rc(a,this.Ua(b),d)};c.prototype.setAttribute=function(a,b,d,e){this.xb.setAttribute(a,this.Ua(b),d,e)};c.prototype.Ua=function(a){return this.ud.S(a,0)};c.prototype.lf=function(){var a=new f.b;this.w(void 0,a);return a.y};c.prototype.wq=function(a,b){a=this.Ua(a);b=this.Ua(b);var d=this.xb.va[0].i;return d[2*a]===d[2*b]&&d[2*a+1]===d[2*b+1]};c.prototype.jw=function(a,b){a=this.Ua(a);var d=this.xb.va[0].i;return d[2*a]===b.x&&d[2*a+1]===b.y};c.prototype.ZY=
function(a,b){1>b&&(b=1);if(null==this.Zg){if(1==b)return;this.Zg=f.Xc.Wn(this.xb.D(),1)}a=this.Ua(a);a>=this.Zg.size&&this.Zg.resize(a+1,1);this.Zg.write(a,b)};c.prototype.OG=function(a){a=this.Ua(a);return null==this.Zg||a>=this.Zg.size?1:this.Zg.read(a)};c.prototype.Qa=function(a,b,d){b=this.hi[b];a=this.Ua(a);b.size<this.xb.D()&&b.resize(this.xb.D(),-1);b.write(a,d)};c.prototype.Na=function(a,b){a=this.Ua(a);b=this.hi[b];return a<b.size?b.read(a):-1};c.prototype.Kd=function(){null==this.hi&&(this.hi=
[]);for(var a=0;a<this.hi.length;a++)if(null==this.hi[a])return this.hi[a]=f.Xc.Sh(0,-1),a;this.hi.push(f.Xc.Sh(0,-1));return this.hi.length-1};c.prototype.Xd=function(a){this.hi[a]=null};c.prototype.ec=function(a){return null!=this.bf?(a=this.Ua(a),this.bf[a]):null};c.prototype.gd=function(a,b){var d=this.ud.S(a,2);if(-1==d)return!1;if(this.QA){var e=new f.Ra;this.bj(a,e);b.setStart(e);this.bj(d,e);b.setEnd(e)}else this.xb.Hc(this.ud.S(a,0),wa),b.pm(0,wa),this.xb.Hc(this.ud.S(d,0),wa),b.pm(1,wa);
return!0};c.prototype.DX=function(a,b,d){if(this.QA){var e=new f.Ra;this.bj(a,e);d.setStart(e);this.bj(b,e);d.setEnd(e)}else this.xb.Hc(a,wa),d.pm(0,wa),this.xb.Hc(b,wa),d.pm(1,wa)};c.prototype.Ef=function(a,b){if(-1!=b){if(a!=this.Zf(b))throw f.f.za();var d=this.Js(b)}else d=this.Rv(a);var e=this.QV(a);-1!=b&&this.rp(b,e);this.qp(e,b);this.rp(e,d);-1!=d?this.qp(d,e):this.op(a,e);-1==b&&this.pp(a,e);this.bm(a,this.$(a)+1);return e};c.prototype.$G=function(a,b,d,e){a=this.Ef(a,-1);for(var g=0,h=b,
k=!1;h==d&&(k=!0),this.hj(h,a),g++,h=this.T(h),h!=b;);this.An(a,!0);this.Wj(a,g);k&&(b=d);this.Sf(a,b);this.dh(a,this.Ma(b));this.sp(a,!1);null!=e&&(e[0]=k);return a};c.prototype.sr=function(a){var b=this.Js(a),d=this.Qb(a),e=this.Zf(a);-1!=b?this.qp(b,d):this.op(e,d);-1!=d?this.rp(d,b):this.pp(e,b);this.KP(a);this.bm(e,this.$(e)-1);this.fG(a);return d};c.prototype.KP=function(a){var b=this.Za(a);if(-1!=b){for(var d=0,e=this.Ha(a);d<e;d++){var g=b;b=this.T(b);this.Az(g)}b=this.Zf(a);this.Uj(b,this.D(b)-
this.Ha(a))}this.Wj(a,0)};c.prototype.Qb=function(a){return this.ld.S(a,2)};c.prototype.Js=function(a){return this.ld.S(a,1)};c.prototype.Ha=function(a){return this.ld.S(a,3)};c.prototype.Lb=function(a){return 0!=(this.mq(a)&1)};c.prototype.An=function(a,b){if(this.Lb(a)!=b){if(0<this.Ha(a)){var d=this.Za(a),e=this.wj(a);b?(this.Dc(e,d),this.Ec(d,e),d=this.Ua(e)):(this.Dc(e,-1),this.Ec(d,-1),d=this.Ua(e));this.eh(d,null)}this.DC(a,(this.mq(a)|1)-1|(b?1:0))}};c.prototype.Zf=function(a){return this.ld.S(a,
7)};c.prototype.rU=function(a){return 0!=(this.mq(a)&2)};c.prototype.yC=function(a,b){this.DC(a,(this.mq(a)|2)-2|(b?2:0))};c.prototype.eA=function(a){if(this.zU(a))return this.Ui.get(this.Yv(a));var b=new f.zb,d=this.Za(a);if(-1==d)return 0;var e=new f.b;this.w(d,e);for(var g=0,h=0,k=this.Ha(a);h<k;h++,d=this.T(d)){var m=this.ec(d);if(null==m){if(!this.gd(d,b))continue;m=b}g+=m.yy(e.x,e.y)}this.sp(a,!0);this.Ui.set(this.Yv(a),g);return g};c.prototype.Br=function(a,b,d){b=this.Kk[b];a=this.Yv(a);b.size<
this.Ui.size&&b.resize(this.Ui.size,-1);b.write(a,d)};c.prototype.yj=function(a,b){a=this.Yv(a);b=this.Kk[b];return a<b.size?b.read(a):-1};c.prototype.oz=function(){null==this.Kk&&(this.Kk=[]);for(var a=0;a<this.Kk.length;a++)if(null==this.Kk[a])return this.Kk[a]=f.Xc.Sh(0),a;this.Kk.push(f.Xc.Sh(0));return this.Kk.length-1};c.prototype.lC=function(a){this.Kk[a]=null};c.prototype.sV=function(a,b,d){if(-1==d)throw f.f.I();if(b!=d){var e=this.Qb(d),g=this.Js(d),h=this.Zf(d);-1==g?this.op(h,e):this.qp(g,
e);-1==e?this.pp(h,g):this.rp(e,g);this.Uj(h,this.D(h)-this.Ha(d));this.bm(h,this.$(h)-1);g=-1==b?this.Rv(a):this.Js(b);this.rp(d,g);this.qp(d,b);-1==b?this.pp(a,d):this.rp(b,d);-1==g?this.op(a,d):this.qp(g,d);this.Uj(a,this.D(a)+this.Ha(d));this.bm(a,this.$(a)+1);this.Nx(d,a)}};c.prototype.oj=function(a,b){this.xb.ne(this.Ua(b),this.zm());this.Bj(a,-1,this.zm())};c.prototype.od=function(a,b){var d=this.cd(a),e=this.Ma(a),g=this.T(a);-1!=e&&this.Dc(e,g);var h=this.Ha(d);a==this.Za(d)&&this.Sf(d,1<
h?g:-1);-1!=g&&this.Ec(g,e);a==this.wj(d)&&this.dh(d,1<h?e:-1);if(-1!=e&&-1!=g){e=this.Ua(e);var k=this.Ua(g);b?(b=this.Yh(e),null!=b&&(e=new f.b,this.xb.w(k,e),b.Sc(e))):(k=this.Ua(a),b=this.Yh(k),this.eh(e,b),null!=b&&(e=this.xb.xa(e),b.Fc(e)))}this.Wj(d,h-1);d=this.Zf(d);this.Uj(d,this.D(d)-1);this.Az(a);return g};c.prototype.Za=function(a){return this.ld.S(a,4)};c.prototype.wj=function(a){return this.ld.S(a,5)};c.prototype.T=function(a){return this.ud.S(a,2)};c.prototype.Ma=function(a){return this.ud.S(a,
1)};c.prototype.cd=function(a){return this.ud.S(a,3)};c.prototype.jc=function(a,b){return this.Bj(a,-1,b)};c.prototype.rr=function(a){if(void 0===a)return this.rr(!1);if(a instanceof l)return new l(a);var b,d=-1,e=-1,g=-1,h=0,k=!1;for(b=this.kd;-1!=b;b=this.Ae(b))if(!a||f.R.Bc(this.dc(b))){for(d=this.Kb(b);-1!=d;d=this.Qb(d))if(g=e=this.Za(d),h=0,-1!=e){k=!0;break}if(k)break}return l.LQ(this,b,d,e,g,h,a)};c.prototype.Qc=function(a){this.Sl.Qc(a);if(null!=this.bf)for(var b=0,d=this.bf.length;b<d;b++)null!=
this.bf[b]&&this.bf[b].Qc(a)};c.prototype.Fr=function(a,b,d,e){e?this.sZ(a,b,d):this.rZ(a,b,d)};c.prototype.Ec=function(a,b){this.ud.P(a,1,b)};c.prototype.Dc=function(a,b){this.ud.P(a,2,b)};c.prototype.hj=function(a,b){this.ud.P(a,3,b)};c.prototype.Wj=function(a,b){this.ld.P(a,3,b)};c.prototype.Sf=function(a,b){this.ld.P(a,4,b)};c.prototype.dh=function(a,b){this.ld.P(a,5,b)};c.prototype.bm=function(a,b){this.dd.P(a,6,b)};c.prototype.Uj=function(a,b){this.dd.P(a,5,b)};c.prototype.tK=function(a){var b=
a;do{var d=this.T(b);this.Dc(b,this.Ma(b));this.Ec(b,d);b=d}while(b!=a)};c.prototype.JC=function(a){this.pd=a};c.prototype.tr=function(a){var b=this.Js(a),d=this.Qb(a),e=this.Zf(a);-1!=b?this.qp(b,d):this.op(e,d);-1!=d?this.rp(d,b):this.pp(e,b);this.Sf(a,-1);this.dh(a,-1);this.fG(a)};c.prototype.ui=function(a,b){var d=this.Ma(a),e=this.T(a);-1!=d&&this.Dc(d,e);-1!=e&&this.Ec(e,d);if(-1!=d&&-1!=e)if(d=this.Ua(d),e=this.Ua(e),b){if(b=this.Yh(d),null!=b){var g=new f.b;this.xb.w(e,g);b.Sc(g)}}else b=
this.Ua(a),b=this.Yh(b),this.eh(d,b),null!=b&&(g=new f.b,this.xb.w(d,g),b.Fc(g));this.Az(a)};c.prototype.zU=function(a){return 0!=(this.mq(a)&4)};c.prototype.sp=function(a,b){this.DC(a,(this.mq(a)|4)-4|(b?4:0))};c.prototype.Vx=function(a,b){var d=this.ud.i;this.xb.rc();var e=this.xb.va[0].i;a.Zd(0,b,function(g,h){var k=d[5*g];g=d[5*h];h=e[2*k];k=e[2*k+1];var m=e[2*g];g=e[2*g+1];return k<g?-1:k>g?1:h<m?-1:h>m?1:0})};c.prototype.ET=function(){for(var a=this.kd;-1!=a;a=this.Ae(a))if(!f.R.Bc(this.dc(a)))return!0;
return!1};c.prototype.QC=function(a,b){for(var d=this.Kb(a),e=this.Kb(b),g=this.Rv(a),h=this.Rv(b),k=this.Kb(a);-1!=k;k=this.Qb(k))this.Nx(k,b);for(k=this.Kb(b);-1!=k;k=this.Qb(k))this.Nx(k,a);this.op(a,e);this.op(b,d);this.pp(a,h);this.pp(b,g);d=this.D(a);e=this.$(a);g=this.$(b);this.Uj(a,this.D(b));this.Uj(b,d);this.bm(a,g);this.bm(b,e);d=this.dd.S(a,2);this.dd.P(a,2,this.dd.S(b,2));this.dd.P(b,2,d)};return c}();f.Yc=R})(fa||(fa={}));(function(f){var R=function(l){function c(a,b,d,e){var g=l.call(this)||
this;g.X=new f.g;void 0===a?g.FF():"number"===typeof a?g.eQ(a,b,d,e):a instanceof f.Ra?void 0!==b?g.xv(a,b,d):g.fQ(a):a instanceof f.oa?void 0!==b?g.hQ(a,b):g.gQ(a):a instanceof f.g?g.dQ(a):g.FF();return g}Fa(c,l);c.prototype.xv=function(a,b,d){this.description=f.ke.ug();this.X.Ka();a.u()||this.Zu(a,b,d)};c.prototype.dQ=function(a){this.description=f.ke.ug();this.X.H(a);this.X.normalize()};c.prototype.gQ=function(a){if(null==a)throw f.f.I();this.description=a;this.X.Ka()};c.prototype.hQ=function(a,
b){if(null==a)throw f.f.I();this.description=a;this.X.H(b);this.X.normalize()};c.prototype.FF=function(){this.description=f.ke.ug();this.X.Ka()};c.prototype.fQ=function(a){this.description=f.ke.ug();this.X.Ka();a.u()||this.Zu(a)};c.prototype.eQ=function(a,b,d,e){this.description=f.ke.ug();this.H(a,b,d,e)};c.prototype.H=function(a,b,d,e){this.vc();if("number"===typeof a)this.X.H(a,b,d,e);else for(this.Ka(),b=0,d=a.length;b<d;b++)this.Nb(a[b])};c.prototype.mp=function(a){this.vc();if(!a.BU())throw f.f.I();
this.X.H(a)};c.prototype.Ka=function(){this.vc();this.X.Ka()};c.prototype.u=function(){return this.X.u()};c.prototype.N=function(){return this.X.N()};c.prototype.ca=function(){return this.X.ca()};c.prototype.lk=function(){return this.X.lk()};c.prototype.cq=function(){return this.X.cq()};c.prototype.bq=function(){return this.X.hf()};c.prototype.Nb=function(a){if(a instanceof f.b)this.vc(),this.X.Nb(a);else if(a instanceof f.g)this.vc(),this.X.Nb(a);else if(a instanceof f.Ra){if(this.vc(),!a.Ac()){var b=
a.description;this.description!=b&&this.Tl(b);if(this.u())this.Zu(a);else{this.X.Nb(a.w());for(var d=1,e=b.Ca;d<e;d++)for(var g=b.Jd(d),h=f.oa.Sa(g),k=0;k<h;k++){var m=a.Rc(g,k),n=this.Qf(g,k);n.Nb(m);this.setInterval(g,k,n)}}}}else if(a instanceof c&&!a.u())for(b=a.description,b!=this.description&&this.Tl(b),this.X.Nb(a.X),d=1,e=b.Ca;d<e;d++)for(g=b.jd(d),h=f.oa.Sa(g),k=0;k<h;k++)m=a.Qf(g,k),n=this.Qf(g,k),n.Nb(m),this.setInterval(g,k,n)};c.prototype.Zu=function(a,b,d){if(void 0!==b){this.X.H(a.w(),
b,d);b=a.description;d=1;for(var e=b.Ca;d<e;d++)for(var g=b.Jd(d),h=f.oa.Sa(g),k=0;k<h;k++){var m=a.Rc(g,k);this.setInterval(g,k,m,m)}}else for(this.X.H(a.ia[0],a.ia[1]),b=a.description,d=1,e=b.Ca;d<e;d++)for(g=b.Jd(d),h=f.oa.Sa(g),k=0;k<h;k++)m=a.Rc(g,k),this.setInterval(g,k,m,m)};c.prototype.setInterval=function(a,b,d,e){d="number"===typeof d?new f.uc(d,e):d;this.vc();if(0==a)if(0==b)this.X.o=d.fa,this.X.v=d.ja;else if(1==b)this.X.A=d.fa,this.X.B=d.ja;else throw f.f.Gd();else this.gE(0,a,b,d.fa),
this.gE(1,a,b,d.ja)};c.prototype.O=function(a,b){this.vc();this.X.O(a,b)};c.prototype.Qc=function(a){if(a instanceof f.xd)this.vc(),a.VC(this.X);else if(this.vc(),!this.X.u()){var b=new f.WL;this.ip(b);b.qU()?b.Ka():a.VC(b)}};c.prototype.copyTo=function(a){if(a.F()!=this.F())throw f.f.I();a.vc();a.description=this.description;a.X.H(this.X);a.ia=null;if(null!=this.ia){a.Uu();for(var b=0;b<2*(this.description.Ge.length-2);b++)a.ia[b]=this.ia[b]}};c.prototype.Ga=function(){return new c(this.description)};
c.prototype.Pe=function(){return this.X.jG()};c.prototype.Pb=function(){return this.X.AG()};c.prototype.F=function(){return 197};c.prototype.pb=function(){return 2};c.prototype.qn=function(a){this.copyTo(a)};c.prototype.s=function(a){a.o=this.X.o;a.A=this.X.A;a.v=this.X.v;a.B=this.X.B};c.prototype.ip=function(a){a.o=this.X.o;a.A=this.X.A;a.v=this.X.v;a.B=this.X.B;a.H(this.X.o,this.X.A,this.Pd(0,1,0),this.X.v,this.X.B,this.Pd(1,1,0))};c.prototype.Qf=function(a,b){var d=new f.uc;d.H(this.Pd(0,a,b),
this.Pd(1,a,b));return d};c.prototype.Pf=function(a,b){b.rg(this.description);var d=this.description.Ca-1;switch(a){case 0:for(a=0;a<d;a++)for(var e=this.description.jd(a),g=f.oa.Sa(e),h=0;h<g;h++)b.setAttribute(e,h,this.Pd(0,e,h));b.nb(this.X.o,this.X.A);break;case 1:for(a=0;a<d;a++)for(e=this.description.jd(a),g=f.oa.Sa(e),h=0;h<g;h++)b.setAttribute(e,h,this.Pd(1,e,h));b.nb(this.X.o,this.X.B);break;case 2:for(a=0;a<d;a++)for(e=this.description.jd(a),g=f.oa.Sa(e),h=0;h<g;h++)b.setAttribute(e,h,this.Pd(0,
e,h));b.nb(this.X.v,this.X.B);break;case 3:for(a=0;a<d;a++)for(e=this.description.jd(a),g=f.oa.Sa(e),h=0;h<g;h++)b.setAttribute(e,h,this.Pd(1,e,h));b.nb(this.X.v,this.X.A);break;default:throw f.f.Gd();}};c.prototype.Ax=function(a,b){a=this.X.Ax(a);b.ka(a.x,a.y)};c.prototype.yS=function(a,b){return b*(a.gr-2)};c.prototype.kG=function(a,b,d){if(this.X.u())throw f.f.Y("empty geometry");if(0==b)return 0!=a?0!=d?this.X.B:this.X.v:0!=d?this.X.A:this.X.o;if(d>=f.oa.Sa(b))throw f.f.I();var e=this.description.Yf(b);
this.Uu();return 0<=e?this.ia[this.yS(this.description,a)+this.description.bT(e)-2+d]:f.oa.me(b)};c.prototype.Uu=function(){this.vc();if(null==this.ia&&2<this.description.Ge.length){this.ia=[];for(var a=c.Mg(this.description,0),b=c.Mg(this.description,1),d=0,e=1,g=this.description.Ca;e<g;e++){var h=this.description.jd(e),k=f.oa.Sa(h);h=f.oa.me(h);for(var m=0;m<k;m++)this.ia[a+d]=h,this.ia[b+d]=h,d++}}};c.prototype.Ln=function(a){if(null!=this.ia)if(2<a.Ge.length){for(var b=f.ke.ox(a,this.description),
d=[],e=c.Mg(this.description,0),g=c.Mg(this.description,1),h=c.Mg(a,0),k=c.Mg(a,1),m=0,n=1,p=a.Ca;n<p;n++){var x=a.jd(n),Q=f.oa.Sa(x);if(-1==b[n]){var V=f.oa.me(x);for(x=0;x<Q;x++)d[h+m]=V,d[k+m]=V,m++}else for(V=this.description.dk(b[n])-2,x=0;x<Q;x++)d[h+m]=this.ia[e+V],d[k+m]=this.ia[g+V],m++,V++}this.ia=d}else this.ia=null;this.description=a};c.prototype.Pd=function(a,b,d){if(this.X.u())throw f.f.Y("This operation was performed on an Empty Geometry.");if(0==b)return 0!=a?0!=d?this.X.B:this.X.v:
0!=d?this.X.A:this.X.o;if(d>=f.oa.Sa(b))throw f.f.Gd();var e=this.description.Yf(b);return 0<=e?(this.Uu(),this.ia[c.Mg(this.description,a)+this.description.dk(e)-2+d]):f.oa.me(b)};c.prototype.gE=function(a,b,d,e){this.vc();if(0==b)0!=a?0!=d?this.X.B=e:this.X.v=e:0!=d?this.X.A=e:this.X.o=e;else{if(d>=f.oa.Sa(b))throw f.f.Gd();if(!this.hasAttribute(b)){if(f.oa.pH(b,e))return;this.le(b)}b=this.description.Yf(b);this.Uu();this.ia[c.Mg(this.description,a)+this.description.dk(b)-2+d]=e}};c.Mg=function(a,
b){return b*(a.Ge.length-2)};c.prototype.Ia=function(a){this.vc();var b=new f.g;a.s(b);return this.X.Ia(b)};c.prototype.isIntersecting=function(a){return a instanceof f.g?this.X.isIntersecting(a):this.X.isIntersecting(a.X)};c.prototype.qv=function(a,b){this.vc();a.u()?this.Ka():void 0!==b?this.Zu(a,b,void 0):this.X.qv(a.Ce(),a.lf())};c.prototype.offset=function(a,b){this.vc();this.X.offset(a,b)};c.prototype.normalize=function(){this.vc();this.X.normalize()};c.prototype.hf=function(a){if(void 0!==
a)if(a.rg(this.description),this.u())a.Ka();else{for(var b=this.description.Ca,d=1;d<b;d++)for(var e=this.description.jd(d),g=f.oa.Sa(e),h=0;h<g;h++){var k=.5*(this.kG(0,e,h)+this.kG(1,e,h));a.setAttribute(e,h,k)}a.nb(this.X.hf())}else{a=new f.Ra(this.description);if(this.u())return a;b=this.description.Ca;for(d=1;d<b;d++)for(e=this.description.Jd(d),g=f.oa.Sa(e),h=0;h<g;h++)k=.5*(this.Pd(0,e,h)+this.Pd(1,e,h)),a.setAttribute(e,h,k);a.nb(this.X.lk(),this.X.cq());return a}};c.prototype.Wz=function(){return new f.Ra(this.X.Wz())};
c.prototype.contains=function(a){return a instanceof f.Ra?a.u()?!1:this.X.contains(a.Ce(),a.lf()):this.X.contains(a.X)};c.prototype.nQ=function(a){return this.X.contains(a)};c.prototype.Ib=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.u())return a.u()?!0:!1;if(!this.X.Ib(a.X))return!1;for(var b=0,d=2*(this.description.Ge.length-2);b<d;b++)if(this.ia[b]!=a.ia[b])return!1;return!0};c.prototype.fc=function(){var a=this.description.fc();a=f.L.Zh(a,
this.X.fc());if(!this.u()&&null!=this.ia)for(var b=0,d=2*(this.description.Ge.length-2);b<d;b++)a=f.L.Zh(a,this.ia[b]);return a};c.prototype.Ms=function(){return this.X.o};c.prototype.Os=function(){return this.X.A};c.prototype.Ls=function(){return this.X.v};c.prototype.Ns=function(){return this.X.B};c.prototype.sg=function(){return f.yi.qm(this,null)};c.prototype.toString=function(){return this.u()?"Envelope: []":"Envelope: ["+this.X.o+", "+this.X.A+", "+this.X.v+", "+this.X.B+"]"};return c}(f.R);
f.Ih=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d){void 0===c?this.Ka():(this.o=c,this.A=a,this.v=b,this.B=d)}l.construct=function(c,a,b,d){var e=new l;e.o=c;e.A=a;e.v=b;e.B=d;return e};l.prototype.H=function(c,a,b,d){"number"===typeof c?void 0!==b?(this.o=c,this.A=a,this.v=b,this.B=d,this.normalize()):(this.o=c,this.A=a,this.v=c,this.B=a):c instanceof f.b?void 0!==a?(this.o=c.x-.5*a,this.v=this.o+a,this.A=c.y-.5*b,this.B=this.A+b,this.normalize()):(this.o=c.x,this.A=c.y,this.v=
c.x,this.B=c.y):c instanceof l?this.H(c.o,c.A,c.v,c.B):c instanceof f.uc&&(c.u()||a.u()?this.Ka():(this.o=c.fa,this.v=c.ja,this.A=a.fa,this.B=a.ja))};l.prototype.KS=function(c,a){var b=new l;b.H(this.o,this.A,this.v,this.B);b.O(c,a);return b};l.prototype.Ix=function(c,a){if(void 0!==a)if(0==a)this.Ka();else{this.o=c[0].x;this.A=c[0].y;this.v=this.o;this.B=this.A;for(var b=1;b<a;b++){var d=c[b];d.x<this.o?this.o=d.x:d.x>this.v&&(this.v=d.x);d.y<this.A?this.A=d.y:d.y>this.B&&(this.B=d.y)}}else if(null==
c||0==c.length)this.Ka();else for(d=c[0],this.H(d.x,d.y),b=1;b<c.length;b++)a=c[b],this.Sk(a.x,a.y)};l.prototype.Ka=function(){this.B=this.v=this.A=this.o=NaN};l.prototype.u=function(){return isNaN(this.o)};l.prototype.Nb=function(c,a){"number"===typeof c?this.u()?(this.o=c,this.A=a,this.v=c,this.B=a):(this.o>c?this.o=c:this.v<c&&(this.v=c),this.A>a?this.A=a:this.B<a&&(this.B=a)):c instanceof f.b?this.Nb(c.x,c.y):c instanceof f.Id?this.Nb(c.x,c.y):c instanceof l&&!c.u()&&(this.Nb(c.o,c.A),this.Nb(c.v,
c.B))};l.prototype.Sk=function(c,a){this.o>c?this.o=c:this.v<c&&(this.v=c);this.A>a?this.A=a:this.B<a&&(this.B=a)};l.prototype.O=function(c,a){this.u()||(this.o-=c,this.v+=c,this.A-=a,this.B+=a,(this.o>this.v||this.A>this.B)&&this.Ka())};l.prototype.scale=function(c){0>c&&this.Ka();this.u()||(this.o*=c,this.v*=c,this.A*=c,this.B*=c)};l.prototype.zoom=function(c,a){this.u()||this.H(this.hf(),c*this.N(),a*this.ca())};l.prototype.isIntersecting=function(c){return!this.u()&&!c.u()&&(this.o<=c.o?this.v>=
c.o:c.v>=this.o)&&(this.A<=c.A?this.B>=c.A:c.B>=this.A)};l.prototype.tH=function(c){return(this.o<=c.o?this.v>=c.o:c.v>=this.o)&&(this.A<=c.A?this.B>=c.A:c.B>=this.A)};l.prototype.Ia=function(c){if(this.u()||c.u())return!1;c.o>this.o&&(this.o=c.o);c.v<this.v&&(this.v=c.v);c.A>this.A&&(this.A=c.A);c.B<this.B&&(this.B=c.B);(c=this.o<=this.v&&this.A<=this.B)||this.Ka();return c};l.prototype.Ax=function(c){switch(c){case 0:return f.b.construct(this.o,this.A);case 1:return f.b.construct(this.o,this.B);
case 2:return f.b.construct(this.v,this.B);case 3:return f.b.construct(this.v,this.A);default:throw f.f.Gd();}};l.prototype.XB=function(c){if(null==c||4>c.length)throw f.f.I();null!=c[0]?c[0].ka(this.o,this.A):c[0]=f.b.construct(this.o,this.A);null!=c[1]?c[1].ka(this.o,this.B):c[1]=f.b.construct(this.o,this.B);null!=c[2]?c[2].ka(this.v,this.B):c[2]=f.b.construct(this.v,this.B);null!=c[3]?c[3].ka(this.v,this.A):c[3]=f.b.construct(this.v,this.A)};l.prototype.jG=function(){return this.u()?0:this.N()*
this.ca()};l.prototype.AG=function(){return this.u()?0:2*(this.N()+this.ca())};l.prototype.lk=function(){return(this.v+this.o)/2};l.prototype.cq=function(){return(this.B+this.A)/2};l.prototype.N=function(){return this.v-this.o};l.prototype.ca=function(){return this.B-this.A};l.prototype.move=function(c,a){this.u()||(this.o+=c,this.A+=a,this.v+=c,this.B+=a)};l.prototype.qv=function(c,a){if(void 0!==a)this.move(c-this.lk(),a-this.cq());else if(c instanceof f.b)this.qv(c.x,c.y);else if(c instanceof f.Ra){a=
(this.v-this.o)/2;var b=(this.B-this.A)/2;this.o=c.Ce()-a;this.v=c.Ce()+a;this.A=c.lf()-b;this.B=c.lf()+b}else throw f.f.I();};l.prototype.offset=function(c,a){this.o+=c;this.v+=c;this.A+=a;this.B+=a};l.prototype.normalize=function(){if(!this.u()){var c=Math.min(this.o,this.v),a=Math.max(this.o,this.v);this.o=c;this.v=a;c=Math.min(this.A,this.B);a=Math.max(this.A,this.B);this.A=c;this.B=a}};l.prototype.tn=function(c){c.ka(this.o,this.A)};l.prototype.RJ=function(c){c.ka(this.v,this.A)};l.prototype.UJ=
function(c){c.ka(this.o,this.B)};l.prototype.un=function(c){c.ka(this.v,this.B)};l.prototype.BU=function(){return this.u()||this.o<=this.v&&this.A<=this.B};l.prototype.hf=function(){return f.b.construct((this.v+this.o)/2,(this.B+this.A)/2)};l.prototype.Wz=function(){return f.b.construct(this.o,this.A)};l.prototype.contains=function(c,a){if(void 0!==a)return c>=this.o&&c<=this.v&&a>=this.A&&a<=this.B;if(c instanceof f.Ra)return this.contains(c.Ce(),c.lf());if(c instanceof f.b)return this.contains(c.x,
c.y);if(c instanceof l)return c.o>=this.o&&c.v<=this.v&&c.A>=this.A&&c.B<=this.B;throw f.f.I();};l.prototype.sm=function(c,a){if(void 0!==a)return c>this.o&&c<this.v&&a>this.A&&a<this.B;if(c instanceof f.b)return this.sm(c.x,c.y);if(c instanceof l)return c.o>this.o&&c.v<this.v&&c.A>this.A&&c.B<this.B;throw f.f.I();};l.prototype.Ib=function(c){return c==this?!0:c instanceof l?this.u()&&c.u()?!0:this.o!=c.o||this.A!=c.A||this.v!=c.v||this.B!=c.B?!1:!0:!1};l.prototype.fc=function(){var c=this.o;c=f.L.truncate(c^
c>>>32);var a=f.L.Zh(c);c=this.v;c=f.L.truncate(c^c>>>32);a=f.L.Zh(c,a);c=this.A;c=f.L.truncate(c^c>>>32);a=f.L.Zh(c,a);c=this.B;c=f.L.truncate(c^c>>>32);return a=f.L.Zh(c,a)};l.prototype.My=function(c){var a=new f.b;a.K(c);if(a.Ey())return a;if(this.u())return a.iE(),a;a.x<this.o?a.x=this.o:a.x>this.v&&(a.x=this.v);a.y<this.A?a.y=this.A:a.y>this.B&&(a.y=this.B);if(!a.Ib(c))return a;c=this.hf();(a.x<c.x?a.x-this.o:this.v-a.x)<(a.y<c.y?a.y-this.A:this.B-a.y)?a.x=a.x<c.x?this.o:this.v:a.y=a.y<c.y?this.A:
this.B;return a};l.prototype.Ru=function(c){if(this.u())return NaN;if(c.x==this.o)return c.y-this.A;var a=this.B-this.A,b=this.v-this.o;return c.y==this.B?a+c.x-this.o:c.x==this.v?a+b+this.B-c.y:c.y==this.A?2*a+b+this.v-c.x:this.Ru(this.My(c))};l.prototype.QD=function(c){if(this.u())return-1;c=this.Ru(c);var a=this.B-this.A,b=this.v-this.o;return c<a?0:(c-=a)<b?1:c-b<a?2:3};l.prototype.Mn=function(){return this.u()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.o)+Math.abs(this.v)+Math.abs(this.A)+
Math.abs(this.B)+1)};l.prototype.ez=function(c,a){var b=this.ck(c),d=this.ck(a);if(0!=(b&d))return 0;if(0==(b|d))return 4;var e=(0!=b?1:0)|(0!=d?2:0);do{var g=a.x-c.x,h=a.y-c.y;g>h?0!=(b&l.GD)?(0!=(b&l.Pu)?(c.y+=h*(this.o-c.x)/g,c.x=this.o):(c.y+=h*(this.v-c.x)/g,c.x=this.v),b=this.ck(c)):0!=(d&l.GD)?(0!=(d&l.Pu)?(a.y+=h*(this.o-a.x)/g,a.x=this.o):(a.y+=h*(this.v-a.x)/g,a.x=this.v),d=this.ck(a)):0!=b?(0!=(b&l.Qu)?(c.x+=g*(this.A-c.y)/h,c.y=this.A):(c.x+=g*(this.B-c.y)/h,c.y=this.B),b=this.ck(c)):
(0!=(d&l.Qu)?(a.x+=g*(this.A-a.y)/h,a.y=this.A):(a.x+=g*(this.B-a.y)/h,a.y=this.B),d=this.ck(a)):0!=(b&l.HD)?(0!=(b&l.Qu)?(c.x+=g*(this.A-c.y)/h,c.y=this.A):(c.x+=g*(this.B-c.y)/h,c.y=this.B),b=this.ck(c)):0!=(d&l.HD)?(0!=(d&l.Qu)?(a.x+=g*(this.A-a.y)/h,a.y=this.A):(a.x+=g*(this.B-a.y)/h,a.y=this.B),d=this.ck(a)):0!=b?(0!=(b&l.Pu)?(c.y+=h*(this.o-c.x)/g,c.x=this.o):(c.y+=h*(this.v-c.x)/g,c.x=this.v),b=this.ck(c)):(0!=(d&l.Pu)?(a.y+=h*(this.o-a.x)/g,a.x=this.o):(a.y+=h*(this.v-a.x)/g,a.x=this.v),d=
this.ck(a));if(0!=(b&d))return 0}while(0!=(b|d));return e};l.prototype.ck=function(c){return(c.x<this.o?1:0)|(c.x>this.v?1:0)<<1|(c.y<this.A?1:0)<<2|(c.y>this.B?1:0)<<3};l.prototype.Qg=function(c){return!this.u()&&(this.N()<=c||this.ca()<=c)};l.prototype.vb=function(c){return c instanceof f.b?Math.sqrt(this.nL(c)):Math.sqrt(this.Xx(c))};l.prototype.Xx=function(c){var a=0,b=0,d=this.o-c.v;d>a&&(a=d);d=this.A-c.B;d>b&&(b=d);d=c.o-this.v;d>a&&(a=d);d=c.A-this.B;d>b&&(b=d);return a*a+b*b};l.prototype.nL=
function(c){var a=0,b=0,d=this.o-c.x;d>a&&(a=d);d=this.A-c.y;d>b&&(b=d);d=c.x-this.v;d>a&&(a=d);d=c.y-this.B;d>b&&(b=d);return a*a+b*b};l.prototype.sn=function(c){this.u()?c.Ka():c.H(this.o,this.v)};l.sN=function(c,a,b,d){var e=1;isNaN(c)||(e+=Math.abs(c));isNaN(a)||(e+=Math.abs(a));isNaN(b)||(e+=Math.abs(b));isNaN(d)||(e+=Math.abs(d));return 2.220446049250313E-14*e};l.Pu=1;l.Qu=4;l.GD=3;l.HD=12;return l}();f.g=R})(fa||(fa={}));(function(f){var R;(function(c){c[c.initialize=0]="initialize";c[c.initializeRed=
1]="initializeRed";c[c.initializeBlue=2]="initializeBlue";c[c.initializeRedBlue=3]="initializeRedBlue";c[c.sweep=4]="sweep";c[c.sweepBruteForce=5]="sweepBruteForce";c[c.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";c[c.sweepRedBlue=7]="sweepRedBlue";c[c.sweepRed=8]="sweepRed";c[c.sweepBlue=9]="sweepBlue";c[c.iterate=10]="iterate";c[c.iterateRed=11]="iterateRed";c[c.iterateBlue=12]="iterateBlue";c[c.iterateBruteForce=13]="iterateBruteForce";c[c.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";
c[c.resetRed=15]="resetRed";c[c.resetBlue=16]="resetBlue"})(R||(R={}));var l=function(){function c(a,b){this.ii=a;this.RH=b}c.prototype.Lr=function(a,b,d){this.ii.oZ(d,a,b,this.RH)};c.prototype.sq=function(a){return this.ii.ss(a,this.RH)};return c}();R=function(){function c(){this.Uw=this.Ho=this.pf=this.sd=null;this.Pq=new f.g;this.Nm=this.Kj=this.Lj=this.Ed=this.Mf=this.Nd=this.Jw=this.yo=this.rd=this.Gb=null;this.Xb=-1;this.qa=0;this.Uk()}c.prototype.Gr=function(){this.Uk();this.vw=!0;null==this.Gb?
(this.yo=new f.ha(0),this.Gb=[]):(this.yo.Gh(0),this.Gb.length=0)};c.prototype.bd=function(a,b){if(!this.vw)throw f.f.Eb();var d=new f.g;d.H(b);this.yo.add(a);this.Gb.push(d)};c.prototype.Zp=function(){if(!this.vw)throw f.f.Eb();this.vw=!1;null!=this.Gb&&0<this.Gb.length&&(this.Xb=0,this.Jc=!1)};c.prototype.vL=function(){this.Uk();this.uw=!0;null==this.Gb?(this.yo=new f.ha(0),this.Gb=[]):(this.yo.Gh(0),this.Gb.length=0)};c.prototype.vE=function(a,b){if(!this.uw)throw f.f.Eb();var d=new f.g;d.H(b);
this.yo.add(a);this.Gb.push(d)};c.prototype.WF=function(){if(!this.uw)throw f.f.Eb();this.uw=!1;null!=this.Gb&&0<this.Gb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Xb?this.Xb=3:2==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=1),this.Jc=!1)};c.prototype.uL=function(){this.Uk();this.tw=!0;null==this.rd?(this.Jw=new f.ha(0),this.rd=[]):(this.Jw.Gh(0),this.rd.length=0)};c.prototype.qE=function(a,b){if(!this.tw)throw f.f.Eb();var d=new f.g;d.H(b);this.Jw.add(a);this.rd.push(d)};c.prototype.VF=function(){if(!this.tw)throw f.f.Eb();
this.tw=!1;null!=this.Gb&&0<this.Gb.length&&null!=this.rd&&0<this.rd.length&&(-1==this.Xb?this.Xb=3:1==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=2),this.Jc=!1)};c.prototype.next=function(){if(this.Jc)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.oA();break;case 1:a=this.MT();break;case 2:a=this.JT();break;case 3:a=this.LT();break;case 4:a=this.zZ();break;case 5:a=this.vZ();break;case 6:a=this.wZ();break;case 7:a=this.xZ();break;case 8:a=this.ay();break;case 9:a=this.RC();break;case 10:a=this.DA();
break;case 11:a=this.FU();break;case 12:a=this.CU();break;case 13:a=this.DU();break;case 14:a=this.EU();break;case 15:a=this.oK();break;case 16:a=this.nK();break;default:throw f.f.za();}return this.Jc?!1:!0};c.prototype.IC=function(a){this.qa=a};c.prototype.cA=function(a){return this.Gb[a]};c.prototype.Gz=function(a){return this.rd[a]};c.prototype.tl=function(a){return this.yo.read(a)};c.prototype.ol=function(a){return this.Jw.read(a)};c.CA=function(a){return 1==(a&1)};c.vq=function(a){return 0==
(a&1)};c.prototype.Uk=function(){this.vw=this.tw=this.uw=!1;this.Kf=this.Lf=this.Xg=this.we=-1;this.Jc=!0};c.prototype.oA=function(){this.If=this.dg=-1;if(10>this.Gb.length)return this.we=this.Gb.length,this.Xb=5,!0;null==this.sd&&(this.sd=new f.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new f.ha(0));this.sd.Gr();for(var a=0;a<this.Gb.length;a++){var b=this.Gb[a];this.sd.bs(b.o,b.v)}this.sd.Zp();this.Nd.Db(2*this.Gb.length);this.Nd.resize(0);for(a=0;a<2*this.Gb.length;a++)this.Nd.add(a);this.tu(this.Nd,
2*this.Gb.length,!0);this.we=2*this.Gb.length;this.Xb=4;return!0};c.prototype.MT=function(){this.If=this.dg=-1;if(10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.sd&&(this.sd=new f.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new f.ha(0));this.sd.Gr();for(var a=0;a<this.Gb.length;a++){var b=this.Gb[a];this.sd.bs(b.o,b.v)}this.sd.Zp();this.Nd.Db(2*this.Gb.length);this.Nd.resize(0);for(a=0;a<2*this.Gb.length;a++)this.Nd.add(a);this.tu(this.Nd,this.Nd.size,
!0);this.we=this.Nd.size;-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1);this.Xb=7;return this.nK()};c.prototype.JT=function(){this.If=this.dg=-1;if(10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.pf&&(this.pf=new f.Qr(!0),this.Uw=this.pf.getIterator(),this.Mf=new f.ha(0));this.pf.Gr();for(var a=0;a<this.rd.length;a++){var b=this.rd[a];this.pf.bs(b.o,b.v)}this.pf.Zp();this.Mf.Db(2*this.rd.length);this.Mf.resize(0);for(a=0;a<2*this.rd.length;a++)this.Mf.add(a);
this.tu(this.Mf,this.Mf.size,!1);this.Xg=this.Mf.size;-1!=this.Kf&&(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1);this.Xb=7;return this.oK()};c.prototype.LT=function(){this.If=this.dg=-1;if(10>this.Gb.length||10>this.rd.length)return this.we=this.Gb.length,this.Xb=6,!0;null==this.sd&&(this.sd=new f.Qr(!0),this.Ho=this.sd.getIterator(),this.Nd=new f.ha(0));null==this.pf&&(this.pf=new f.Qr(!0),this.Uw=this.pf.getIterator(),this.Mf=new f.ha(0));this.sd.Gr();for(var a=0;a<this.Gb.length;a++){var b=
this.Gb[a];this.sd.bs(b.o,b.v)}this.sd.Zp();this.pf.Gr();for(a=0;a<this.rd.length;a++)b=this.rd[a],this.pf.bs(b.o,b.v);this.pf.Zp();this.Nd.Db(2*this.Gb.length);this.Mf.Db(2*this.rd.length);this.Nd.resize(0);this.Mf.resize(0);for(a=0;a<2*this.Gb.length;a++)this.Nd.add(a);for(a=0;a<2*this.rd.length;a++)this.Mf.add(a);this.tu(this.Nd,this.Nd.size,!0);this.tu(this.Mf,this.Mf.size,!1);this.we=this.Nd.size;this.Xg=this.Mf.size;-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1);-1!=this.Kf&&
(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1);this.Xb=7;return!0};c.prototype.zZ=function(){var a=this.Nd.get(--this.we),b=a>>1;if(c.vq(a))return this.sd.remove(b),0==this.we?(this.If=this.dg=-1,this.Jc=!0,!1):!0;this.Ho.nC(this.Gb[b].o,this.Gb[b].v,this.qa);this.dg=b;this.Xb=10;return!0};c.prototype.vZ=function(){if(-1==--this.we)return this.If=this.dg=-1,this.Jc=!0,!1;this.Xg=this.dg=this.we;this.Xb=13;return!0};c.prototype.wZ=function(){if(-1==--this.we)return this.If=this.dg=-1,this.Jc=!0,
!1;this.dg=this.we;this.Xg=this.rd.length;this.Xb=14;return!0};c.prototype.xZ=function(){var a=this.Nd.get(this.we-1),b=this.Mf.get(this.Xg-1),d=this.ss(a,!0),e=this.ss(b,!1);return d>e?this.ay():d<e?this.RC():c.CA(a)?this.ay():c.CA(b)?this.RC():this.ay()};c.prototype.ay=function(){var a=this.Nd.get(--this.we),b=a>>1;if(c.vq(a))return-1!=this.Lf&&-1!=this.Lj.get(b)?(this.Ed.hd(this.Lf,this.Lj.get(b)),this.Lj.set(b,-1)):this.sd.remove(b),0==this.we?(this.If=this.dg=-1,this.Jc=!0,!1):!0;if(-1!=this.Kf&&
0<this.Ed.Hs(this.Kf))for(a=this.Ed.sc(this.Kf);-1!=a;){var d=this.Ed.getData(a);this.pf.Gi(d);this.Kj.set(d,-1);d=this.Ed.hb(a);this.Ed.hd(this.Kf,a);a=d}0<this.pf.size()?(this.Uw.nC(this.Gb[b].o,this.Gb[b].v,this.qa),this.dg=b,this.Xb=12):(-1==this.Lf&&(null==this.Ed&&(this.Ed=new f.Ap),this.Lj=new f.ha(0),this.Lj.resize(this.Gb.length,-1),this.Lj.Xj(-1,0,this.Gb.length),this.Lf=this.Ed.Th(1)),this.Lj.set(b,this.Ed.addElement(this.Lf,b)),this.Xb=7);return!0};c.prototype.RC=function(){var a=this.Mf.get(--this.Xg),
b=a>>1;if(c.vq(a))return-1!=this.Kf&&-1!=this.Kj.get(b)?(this.Ed.hd(this.Kf,this.Kj.get(b)),this.Kj.set(b,-1)):this.pf.remove(b),0==this.Xg?(this.If=this.dg=-1,this.Jc=!0,!1):!0;if(-1!=this.Lf&&0<this.Ed.Hs(this.Lf))for(a=this.Ed.sc(this.Lf);-1!=a;){var d=this.Ed.getData(a);this.sd.Gi(d);this.Lj.set(d,-1);d=this.Ed.hb(a);this.Ed.hd(this.Lf,a);a=d}0<this.sd.size()?(this.Ho.nC(this.rd[b].o,this.rd[b].v,this.qa),this.If=b,this.Xb=11):(-1==this.Kf&&(null==this.Ed&&(this.Ed=new f.Ap),this.Kj=new f.ha(0),
this.Kj.resize(this.rd.length,-1),this.Kj.Xj(-1,0,this.rd.length),this.Kf=this.Ed.Th(0)),this.Kj.set(b,this.Ed.addElement(this.Kf,b)),this.Xb=7);return!0};c.prototype.DA=function(){this.If=this.Ho.next();if(-1!=this.If)return!1;var a=this.Nd.get(this.we)>>1;this.sd.Gi(a);this.Xb=4;return!0};c.prototype.FU=function(){this.dg=this.Ho.next();if(-1!=this.dg)return!1;this.If=this.dg=-1;var a=this.Mf.get(this.Xg)>>1;this.pf.Gi(a);this.Xb=7;return!0};c.prototype.CU=function(){this.If=this.Uw.next();if(-1!=
this.If)return!1;var a=this.Nd.get(this.we)>>1;this.sd.Gi(a);this.Xb=7;return!0};c.prototype.DU=function(){if(-1==--this.Xg)return this.Xb=5,!0;this.Pq.H(this.Gb[this.we]);var a=this.Gb[this.Xg];this.Pq.O(this.qa,this.qa);return this.Pq.isIntersecting(a)?(this.If=this.Xg,!1):!0};c.prototype.EU=function(){if(-1==--this.Xg)return this.Xb=6,!0;this.Pq.H(this.Gb[this.we]);var a=this.rd[this.Xg];this.Pq.O(this.qa,this.qa);return this.Pq.isIntersecting(a)?(this.If=this.Xg,!1):!0};c.prototype.oK=function(){if(null==
this.sd)return this.Jc=!0,!1;this.we=this.Nd.size;0<this.sd.size()&&this.sd.reset();-1!=this.Lf&&(this.Ed.kh(this.Lf),this.Lj.resize(0),this.Lf=-1);this.Jc=!1;return!0};c.prototype.nK=function(){if(null==this.pf)return this.Jc=!0,!1;this.Xg=this.Mf.size;0<this.pf.size()&&this.pf.reset();-1!=this.Kf&&(this.Ed.kh(this.Kf),this.Kj.resize(0),this.Kf=-1);this.Jc=!1;return!0};c.prototype.tu=function(a,b,d){null==this.Nm&&(this.Nm=new f.Du);d=new l(this,d);this.Nm.sort(a,0,b,d)};c.prototype.oZ=function(a,
b,d,e){var g=this;a.Zd(b,d,function(h,k){var m=g.ss(h,e),n=g.ss(k,e);return m<n||m==n&&c.vq(h)&&c.CA(k)?-1:1})};c.prototype.ss=function(a,b){var d=.5*this.qa;if(b)return b=this.Gb[a>>1],a=c.vq(a)?b.A-d:b.B+d;b=this.rd[a>>1];return a=c.vq(a)?b.A-d:b.B+d};return c}();f.fD=R})(fa||(fa={}));(function(f){var R=function(){function l(){}l.construct=function(c,a,b,d,e,g){var h=new l;h.o=c;h.A=a;h.ef=b;h.v=d;h.B=e;h.Lg=g;return h};l.prototype.Ka=function(){this.ef=this.o=NaN};l.prototype.u=function(){return isNaN(this.o)};
l.prototype.qU=function(){return isNaN(this.ef)};l.prototype.H=function(c,a,b,d,e,g){void 0!==d?"number"===typeof c?(this.o=c,this.A=a,this.ef=b,this.v=d,this.B=e,this.Lg=g):(this.o=c.x-.5*a,this.v=this.o+a,this.A=c.y-.5*b,this.B=this.A+b,this.ef=c.z-.5*d,this.Lg=this.ef+d):(this.o=c,this.A=a,this.ef=b,this.v=c,this.B=a,this.Lg=b)};l.prototype.move=function(c){this.o+=c.x;this.A+=c.y;this.ef+=c.z;this.v+=c.x;this.B+=c.y;this.Lg+=c.z};l.prototype.copyTo=function(c){c.o=this.o;c.A=this.A;c.v=this.v;
c.B=this.B};l.prototype.Sk=function(c,a,b){this.o>c?this.o=c:this.v<c&&(this.v=c);this.A>a?this.A=a:this.B<a&&(this.B=a);0==isNaN(this.ef)?this.ef>b?this.ef=b:this.Lg<b&&(this.Lg=b):this.Lg=this.ef=b};l.prototype.Nb=function(c,a,b){if("number"===typeof c)this.u()?(this.o=c,this.A=a,this.ef=b,this.v=c,this.B=a,this.Lg=b):this.Sk(c,a,b);else if(c instanceof f.Id)this.Nb(c.x,c.y,c.z);else if(c instanceof l)c.u()||(this.Nb(c.o,c.A,c.ef),this.Nb(c.v,c.B,c.Lg));else throw f.f.I();};l.prototype.construct=
function(c,a,b){c.u()||a.u()?this.Ka():(this.o=c.fa,this.v=c.ja,this.A=a.fa,this.B=a.ja,this.ef=b.fa,this.Lg=b.ja)};l.prototype.XB=function(c){if(null==c||8>c.length)throw f.f.I();c[0]=new f.Id(this.o,this.A,this.ef);c[1]=new f.Id(this.o,this.B,this.ef);c[2]=new f.Id(this.v,this.B,this.ef);c[3]=new f.Id(this.v,this.A,this.ef);c[4]=new f.Id(this.o,this.A,this.Lg);c[5]=new f.Id(this.o,this.B,this.Lg);c[6]=new f.Id(this.v,this.B,this.Lg);c[7]=new f.Id(this.v,this.A,this.Lg)};l.prototype.Ix=function(c){if(null==
c||0==c.length)this.Ka();else{var a=c[0];this.H(a.x,a.y,a.z);for(a=1;a<c.length;a++){var b=c[a];this.Sk(b.x,b.y,b.z)}}};return l}();f.WL=R})(fa||(fa={}));(function(f){(function(R){R.za=function(){var l=Error();l.message="Internal Error";return l};R.Me=function(){var l=Error();l.message="Not Implemented";return l};R.al=function(){var l=Error();l.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return l};R.Eb=function(){var l=Error();l.message=
"Invalid Call";return l};R.I=function(l){var c=Error();c.message="Illegal Argument Exception";void 0!==l&&(c.message+=": "+l);return c};R.Lu=function(l){var c=Error();c.message=void 0!==l?"Runtime Exception: "+l:"Runtime Exception.";return c};R.Y=function(l){var c=Error();c.message="Geometry Exception: "+l;return c};R.PL=function(){var l=Error();l.message="Assert Failed Exception";return l};R.Gd=function(){var l=Error();l.message="IndexOutOfBoundsException";return l};R.ED=function(){var l=Error();
l.message="UserCancelException";return l}})(f.f||(f.f={}))})(fa||(fa={}));(function(f){f=f.nm||(f.nm={});f[f.forward=0]="forward";f[f.reverse=1]="reverse"})(fa||(fa={}));(function(f){var R=function(){function a(b,d){this.Wa=b;this.vI=d;this.AI=-1;this.Al=!1}a.prototype.xe=function(){};a.prototype.next=function(){if(++this.AI==this.vI.D())return null;var b=this.vI.xa(this.AI);b.scale(this.Wa.ic);var d=new f.Fa;this.Wa.Xy(b,this.Al,d);return d};a.prototype.Ea=function(){return 0};return a}(),l=function(){function a(b,
d,e){this.Wa=b;this.Xw=d;this.qo=!1;this.wo=e;this.Iw=[0];this.zk=[0];this.Pj=[0];this.ot=[0];this.Al=!1;this.Jq=new f.Fa;this.Bk=[]}a.prototype.xe=function(){};a.prototype.next=function(){if(this.qo){this.qo=!1;this.td.aa();var b=f.R.$d(this.Jq);return b=f.pg.Tk(b,this.Wa.Tq,!0,!0,this.Wa.Vb)}null==this.td&&(this.td=this.Xw.Ba(),this.td.Ta(),null!=this.wo&&this.wo.dl(null,0));if(!this.td.Aa()){if(!this.td.Ta())return null;null!=this.wo&&this.wo.dl(null,0)}b=null;this.zk[0]=0;this.pB=this.Iw[0]=0;
this.ji=NaN;this.qo=!1;for(var d=this.Bk.length=0,e=new f.b,g=new f.b,h=[0];this.td.Aa()&&8>this.pB;){var k=this.td.aa();e.K(k.ac());g.K(k.wc());e.scale(this.Wa.ic);g.scale(this.Wa.ic);f.jj.uv(e,g)?e.x=g.x:f.jj.sv(e,g)&&(g.x=e.x);this.Bk.length=0;f.jj.gG(this.Wa.Ub,this.Wa.lc,this.Wa.Fe,e,g,this.Wa.zB,this.Wa.Ht,h,this.Pj,this.ot,this.Bk,this.Iw);null!=this.wo&&(k=this.Bk.slice(0),this.wo.cH(this.wo.$()-1,k,k.length-1));f.jj.tv(e,g)?(this.Jq.Ka(),this.Wa.Xy(e,this.Al,this.Jq),this.qo=!0):(this.Jq.Ka(),
this.qo=this.cz(h[0],this.Jq));if(this.qo){this.td.ti();if(this.td.mA()){this.td.ti();this.td.aa();break}this.td.hY();break}null==b&&(b=new f.Fa,b.dl(null,0));this.AE(b);d++}this.Iw[0]=0;if(0<d){for(h=this.td.wb();0<d;)this.td.ti(),e.K(this.Xw.xa(this.td.wb())),g.K(this.Xw.xa(this.td.nk())),e.scale(this.Wa.ic),g.scale(this.Wa.ic),this.Al&&(f.jj.uv(e,g)?e.x=g.x:f.jj.sv(e,g)&&(g.x=e.x)),this.Bk.length=0,f.jj.gG(this.Wa.Ub,this.Wa.lc,this.Wa.Fe,g,e,this.Wa.zB,this.Wa.Ht,null,this.Pj,this.ot,this.Bk,
this.Iw),this.AE(b),d--;e.K(this.Xw.xa(this.td.wb()));e.scale(this.Wa.ic);c.hs(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,e,this.ji+1.570796326794897,this.ji+4.71238898038469,this.Wa.uo,this.Al,this.zk,b,NaN,NaN);this.td.Rb(h);this.td.aa();d=f.la.Ng(null,b,!0);return b=f.pg.Tk(b,d,!0,!0,this.Wa.Vb)}this.qo=!1;this.td.aa();b=f.R.$d(this.Jq);return b=f.pg.Tk(b,this.Wa.Tq,!0,!0,this.Wa.Vb)};a.prototype.AE=function(b){var d=this.Bk[0],e=this.Pj[0]-1.570796326794897,g=this.ot[0]+1.570796326794897;if(!isNaN(this.ji)){if(this.ji>=
this.Pj[0]){var h=this.ji+1.570796326794897;e=h+3.141592653589793-(this.ji-this.Pj[0])}else h=this.ji+1.570796326794897,e=h+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.ji));var k=this.ji>=this.Pj[0]&&3.141592653589793>=this.ji-this.Pj[0]?!1:this.ji<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.ji?!1:!0,m=!1;if(Math.abs(e-h)<=.5*this.Wa.uo)if(k){var n=b.xa(b.D()-2);n.scale(this.Wa.ic);var p=new f.da(0);f.gb.Cz(this.Wa.Ub,this.Wa.lc,d.x,d.y,n.x,n.y,p);for(n=p.j;n<=h;)n+=6.283185307179586;
for(;n>h;)n-=6.283185307179586;n<e&&(m=!0)}else m=!0;m?(b.mC(0,b.D()-1),this.Al||(d=new f.b,d.K(b.xa(b.D()-1)),d.scale(this.Wa.ic),-3.141592653589793>d.x-this.zk[0]?this.zk[0]-=6.283185307179586:3.141592653589793<d.x-this.zk[0]&&(this.zk[0]+=6.283185307179586)),k||(e=.5*(e+h))):(k?(h=new f.b,h.K(d),h.scale(1/this.Wa.ic),b.Ff(0,-1,h)):c.hs(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,this.Bk[0],h,e,this.Wa.uo,this.Al,this.zk,b,NaN,NaN),this.pB+=1)}c.Wy(this.Wa.Ub,this.Wa.lc,this.Wa.ic,this.Wa.rb,this.Wa.Fe,
this.Bk,e,g,this.Al,this.zk,b);this.ji=this.ot[0]};a.prototype.cz=function(b,d){return this.Wa.cz(this.Bk,b,this.Pj[0],this.ot[0],this.Al,d)};a.prototype.Ea=function(){return 0};return a}(),c=function(){function a(){}a.buffer=function(b,d,e,g,h,k){if(null==b)throw f.f.I("Geometry::Geodesic_bufferer::buffer");if(b.u())return new f.Fa(b.description);var m=new a;m.Wg=d;m.Kc=f.ab.hc(d);var n=f.ab.cw(m.Kc);m.Vb=k;m.Ub=f.ab.Mv(m.Kc);m.lc=n*(2-n);m.ic=m.Kc.Ld().gi;m.qa=m.Wg.co();m.Tq=m.Kc.co();m.Ht=m.Tq*
m.ic;m.Sq=1.570796326794897/m.ic;m.t0=3.141592653589793/m.ic;m.rt=6.283185307179586/m.ic;m.u0=m.rt/6;m.uB=0;m.s0=1.5707963267948966*m.Ub/m.uB;4==e?(m.Fe=2,m.Cw=!0):(m.Fe=e,m.Cw=!1);m.La=g;m.rb=Math.abs(g);isNaN(h)||.001>h?m.aZ():m.to=h;e=b.F();f.R.Ic(e)?(e=new f.Oa(b.description),e.$b(b,!0),b=e,e=1607):197==e&&(e=new f.g,b.s(e),e.N()<=m.qa||e.ca()<=m.qa?(e=new f.Oa(b.description),e.bd(b,!1),b=e,e=1607):(e=new f.Fa(b.description),e.bd(b,!1),b=e,e=1736));m.bZ();f.R.lo(e)||m.cZ();if(m.rb<=.5*m.to)return 1736!=
e?new f.Fa(b.description):m.Cw?b:f.jj.rs(b,m.Wg,m.Fe,m.zB,-1,k);if(0>m.La&&1736!=e)return new f.Fa(b.description);m.Cw&&f.R.Bc(e)?(d=f.jj.rs(b,d,4,NaN,m.to,k),b=f.ab.$g(d,m.Wg,m.Kc)):b=f.ab.$g(b,m.Wg,m.Kc);b=f.Lh.qj(b,m.Kc);if(b.u())return new f.Fa(b.description);!m.Cw&&f.R.Bc(e)&&(b=f.jj.fJ(m.ic,b));b=a.pZ(b,m.Kc);switch(e){case 1736:d=m.eP(b);break;case 1607:d=m.fP(b);break;case 550:d=m.cP(b);break;case 33:d=m.dP(b);break;default:throw f.f.Y("corrupted_geometry");}m=f.ab.$g(d,m.Kc,m.Wg);m.Tl(b.description);
return m};a.prototype.eP=function(b){var d=new f.Fa;b=new l(this,b,d);b=f.Jh.local().U(b,this.Kc,this.Vb).next();b=f.zp.sj(b,this.Kc,2);var e=new f.xd;e.scale(1/this.ic,1/this.ic);d.Qc(e);d=f.zp.sj(d,this.Kc,2);return 0<=this.La?f.Jh.local().U(d,b,this.Kc,this.Vb):f.Cp.local().U(d,b,this.Kc,this.Vb)};a.prototype.fP=function(b){b=new l(this,b,null);b=f.Jh.local().U(b,this.Kc,this.Vb).next();return b=f.zp.sj(b,this.Kc,2)};a.prototype.cP=function(b){b=new R(this,b);b=f.Jh.local().U(b,this.Kc,this.Vb).next();
return b=f.zp.sj(b,this.Kc,2)};a.prototype.dP=function(b){b=b.w();b.scale(this.ic);var d=new f.Fa;this.Xy(b,!1,d);return d=f.zp.sj(d,this.Kc,2)};a.prototype.cz=function(b,d,e,g,h,k){var m=b[0],n=b[b.length-1],p=m.y>n.y?m.y:n.y,x=f.C.q(this.Ub,this.lc,m.y<n.y?m.y:n.y);p=f.C.q(this.Ub,this.lc,p);if(.001<this.uB-(x+d+this.rb)&&.001<this.uB+(p-d-this.rb))return!1;d=e-1.570796326794897;e=g+1.570796326794897;x=d-3.141592653589793;p=d+3.141592653589793;var Q=e+3.141592653589793,V=[NaN],ca=[NaN],ba=[NaN],
ea=[NaN];g=!1;a.VJ(this.Ub,this.lc,this.rb,m,d,x,n,e,V,ca);a.VJ(this.Ub,this.lc,this.rb,n,Q,e,m,x,ba,ea);e<V[0]&&V[0]<Q?g=!0:e<ca[0]&&ca[0]<Q&&(g=!0);g||(x<ba[0]&&ba[0]<d?g=!0:x<ea[0]&&ea[0]<d&&(g=!0));if(!g&&h)return!1;for(var da=[],ma=b.length-1;0<=ma;ma--)da.push(b[ma]);k.Ka();k.dl(null,0);ma=[0];a.Wy(this.Ub,this.lc,this.ic,this.rb,this.Fe,b,d,e,h,ma,k);a.hs(this.Ub,this.lc,this.ic,this.rb,n,e,Q,this.uo,h,ma,k,V[0],ca[0]);a.Wy(this.Ub,this.lc,this.ic,this.rb,this.Fe,da,Q,p,h,ma,k);a.hs(this.Ub,
this.lc,this.ic,this.rb,m,x,d,this.uo,h,ma,k,ba[0],ea[0]);b=!1;h||(b=this.sF(this.ic,k));return g||b};a.prototype.Xy=function(b,d,e){e.Ka();e.dl(null,0);a.hs(this.Ub,this.lc,this.ic,this.rb,b,-this.uo,6.283185307179586,this.uo,d,[0],e,NaN,NaN);d||this.sF(this.ic,e)};a.prototype.sF=function(b,d){var e=this.FP(b,d);b=this.GP(b,d);return e||b};a.prototype.FP=function(b,d){var e=d.D(),g=!1,h=new f.g;d.s(h);if(!f.l.V(h.B*b,1.570796326794897)&&!f.l.V(h.A*b,-1.570796326794897))return!1;var k=new f.b;for(--e;0<=
e;e--)d.w(e,k),k.y==h.B&&f.l.V(k.y*b,1.570796326794897)?(g=!0,this.FJ(k,e,d)):k.y==h.A&&f.l.V(k.y*b,-1.570796326794897)&&(g=!0,this.FJ(k,e,d));return g};a.prototype.GP=function(b,d){var e=d.xa(0),g=d.xa(d.D()-1);return 3.141592653589793<Math.abs(e.x-g.x)*b?(this.nX(d),!0):this.EP(d)};a.prototype.EP=function(b){return 0>b.Pe()?(this.mX(b),!0):!1};a.prototype.FJ=function(b,d,e){var g=e.D(),h=0<d?d-1:g-1;g=e.xa(d<g-1?d+1:0);h=e.xa(h);if(!f.l.V(g.y,b.y)&&!f.l.V(g.x,b.x)){var k=new f.b;k.ka(g.x,b.y);e.nb(d,
k)}f.l.V(h.y,b.y)||f.l.V(h.x,b.x)||(g=new f.b,g.ka(h.x,b.y),e.Ff(0,d,g))};a.prototype.nX=function(b){var d=new f.Fa,e=new f.Fa,g=new f.xd,h=b.xa(0),k=b.xa(b.D()-1),m=new f.b;h.x>k.x?(k=this.Sq,g.mg(-this.rt,0)):(k=-this.Sq,g.mg(this.rt,0));d.add(b,!1);b.Ka();e.add(d,!1);e.Qc(g);h=new f.g;e.s(h);h.O((this.rt-h.N())/2,0);h.A=-this.Sq;h.B=this.Sq;for(var n=0;n<e.D();n++)e.w(n,m),d.Ff(0,-1,m);e.Qc(g);for(n=0;n<e.D();n++)e.w(n,m),d.Ff(0,-1,m);e=d.xa(0);g=d.xa(d.D()-1);m.ka(g.x,k);d.Ff(0,-1,m);m.ka(.5*
(g.x+e.x),k);d.Ff(0,-1,m);m.ka(e.x,k);d.Ff(0,-1,m);d=f.Lh.Ss(d,this.Kc,2,!0,h.o);d=f.Lh.Ss(d,this.Kc,2,!0,h.v);d=f.Yd.clip(d,h,this.Tq,NaN);b.add(d,!1)};a.prototype.mX=function(b){var d=new f.g;b.s(d);d.O((this.rt-d.N())/2,0);d.A=-this.Sq;d.B=this.Sq;b.dl(null,0);var e=new f.b;e.ka(d.o,d.A);b.Ff(1,-1,e);e.ka(d.o,d.B);b.Ff(1,-1,e);e.ka(.5*(d.o+d.v),d.B);b.Ff(1,-1,e);e.ka(d.v,d.B);b.Ff(1,-1,e);e.ka(d.v,d.A);b.Ff(1,-1,e);e.ka(.5*(d.o+d.v),d.A);b.Ff(1,-1,e)};a.Wy=function(b,d,e,g,h,k,m,n,p,x,Q){var V=
null;p||(V=new f.b,V.Tc(),0<Q.D()&&(V.K(Q.xa(Q.D()-1)),V.scale(e)));var ca=new f.da(0),ba=new f.da(0),ea=new f.da(0),da=new f.b,ma=new f.b,za=k[k.length-1];e=1/e;for(var Ba=0;Ba<k.length;Ba++){var Ea=k[Ba];if(0==Ba)var Ma=m;else Ba==k.length-1?Ma=n:(f.gb.Ad(b,d,za.x,za.y,Ea.x,Ea.y,null,null,ca,h),Ma=ca.j-1.570796326794897);f.gb.Fi(b,d,Ea.x,Ea.y,g,Ma,ba,ea);p?ma.ka(ba.j,ea.j):(da.ka(ba.j,ea.j),a.kK(Ea.x,da.x,V.x,x),ma.ka(x[0]+da.x,da.y),V.K(ma));ma.scale(e);Q.Ff(0,-1,ma)}};a.hs=function(b,d,e,g,h,
k,m,n,p,x,Q,V,ca){if(!(m-k<n)){var ba=new f.da(0),ea=new f.da(0),da=new f.b,ma=new f.b,za=null;p||(za=new f.b,za.Tc(),0<Q.D()&&(za.K(Q.xa(Q.D()-1)),za.scale(e)));var Ba=f.L.truncate(Math.ceil(k/n)),Ea=Ba++*n;Ea==k&&(Ea=Ba++*n);for(e=1/e;Ea<m+n;){k<V&&V<Ea?(Ea=V,Ba--):k<ca&&ca<Ea&&(Ea=ca,Ba--);if(Ea>=m)break;f.gb.Fi(b,d,h.x,h.y,g,Ea,ba,ea);p?ma.ka(ba.j,ea.j):(da.ka(ba.j,ea.j),a.kK(h.x,da.x,za.x,x),ma.ka(x[0]+da.x,da.y),za.K(ma));ma.scale(e);Q.Ff(0,-1,ma);k=Ea;Ea=Ba++*n}}};a.VJ=function(b,d,e,g,h,k,
m,n,p,x){var Q=new f.b,V=new f.b,ca=new f.da(0),ba=new f.da(0);f.gb.Fi(b,d,g.x,g.y,e,h,ca,ba);Q.ka(ca.j,ba.j);f.gb.Fi(b,d,g.x,g.y,e,k,ca,ba);V.ka(ca.j,ba.j);e=new f.da(0);f.gb.Cz(b,d,m.x,m.y,Q.x,Q.y,e);p[0]=e.j;f.gb.Cz(b,d,m.x,m.y,V.x,V.y,e);for(x[0]=e.j;p[0]<=x[0];)p[0]+=6.283185307179586;for(;p[0]>x[0];)p[0]-=6.283185307179586;for(;p[0]>=n;)p[0]-=6.283185307179586,x[0]-=6.283185307179586;for(;p[0]<n;)p[0]+=6.283185307179586,x[0]+=6.283185307179586};a.kK=function(b,d,e,g){if(isNaN(e)){for(;3.141592653589793<
g[0]+d-b;)g[0]-=6.283185307179586;for(;3.141592653589793<b-(g[0]+d);)g[0]+=6.283185307179586}else 3.141592653589793<g[0]+d-e?g[0]-=6.283185307179586:3.141592653589793<e-(g[0]+d)&&(g[0]+=6.283185307179586)};a.pZ=function(b,d){var e=b.F(),g=f.R.Bc(e)?b.$():550==e?b.D():1;if(1==g)return b;var h=new f.ha(0);h.resize(g);for(var k=[],m=new f.g,n=0;n<g;n++){h.write(n,n);if(f.R.Bc(e)){b.Sj(n,m);var p=m.hf()}else p=b.xa(n);p=f.fM.GZ(d,p);k[n]=p}h.Zd(0,h.size,function(x,Q){return k[x]<k[Q]?-1:k[x]>k[Q]?1:0});
d=b.Ga();for(n=0;n<g;n++)m=h.read(n),f.R.Bc(e)?d.addPath(b,m,!0):d.yd(b,m,m+1);return d};a.prototype.bZ=function(){var b=Math.min(3.141592653589793*this.Ub-this.rb,this.rb);b=Math.min(b,.39269908169872414*this.Ub);var d=new f.b;d.ka(0,10*this.ic);var e=45*this.ic,g=new f.da(0),h=new f.da(0),k=new f.da(0),m=new f.da(0),n=new f.da(0),p=new f.da(0),x=new f.da(0),Q=new f.da(0),V=new f.b,ca=new f.b,ba=new f.b,ea=new f.b;f.gb.Fi(this.Ub,this.lc,d.x,d.y,b,0,g,h);V.ka(g.j,h.j);f.gb.Fi(this.Ub,this.lc,d.x,
d.y,b,e,k,m);ca.ka(k.j,m.j);g=new f.da(0);h=new f.da(0);for(var da=new f.da(0);;){f.gb.Fi(this.Ub,this.lc,d.x,d.y,b,.5*(0+e),n,p);ba.ka(n.j,p.j);f.gb.Ad(this.Ub,this.lc,V.x,V.y,ca.x,ca.y,g,h,null,2);f.gb.tj(this.Ub,this.lc,V.x,V.y,.5*g.j,h.j,x,Q,2);ea.ka(x.j,Q.j);f.gb.Ad(this.Ub,this.lc,ba.x,ba.y,ea.x,ea.y,da,null,null,2);if(da.j<=this.to)break;e*=.9;f.gb.Fi(this.Ub,this.lc,d.x,d.y,b,e,k,m);ca.ka(k.j,m.j)}this.uo=6.283185307179586/Math.ceil(6.283185307179586/(e-0))};a.prototype.cZ=function(){var b=
Math.min(3.141592653589793*this.Ub-this.rb,this.rb);b=Math.min(b,.39269908169872414*this.Ub);var d=new f.b,e=new f.b;d.ka(0,10*this.ic);e.ka(10*this.ic,10*this.ic);var g=new f.da(0),h=new f.da(0),k=new f.da(0);f.gb.Ad(this.Ub,this.lc,d.x,d.y,e.x,e.y,k,g,h,this.Fe);var m=new f.da(0),n=new f.da(0),p=new f.da(0),x=new f.da(0),Q=new f.b,V=new f.da(0),ca=new f.da(0),ba=new f.da(0),ea=new f.da(0),da=new f.da(0),ma=new f.da(0),za=new f.da(0),Ba=new f.da(0),Ea=new f.da(0),Ma=new f.b,Pa=new f.b,Ra=new f.b,
Qa=new f.b,Sa=1;g=g.j;h=h.j+1.570796326794897;k=k.j;f.gb.Fi(this.Ub,this.lc,d.x,d.y,b,g-1.570796326794897,ca,ba);Ma.ka(ca.j,ba.j);f.gb.Fi(this.Ub,this.lc,e.x,e.y,b,h,ea,da);Pa.ka(ea.j,da.j);ca=new f.da(0);ba=new f.da(0);h=new f.da(0);for(var Ta=new f.da(0);;){f.gb.tj(this.Ub,this.lc,d.x,d.y,.5*(0+Sa)*k,g,m,n,this.Fe);Q.ka(m.j,n.j);f.gb.Ad(this.Ub,this.lc,d.x,d.y,Q.x,Q.y,null,null,V,this.Fe);f.gb.Fi(this.Ub,this.lc,Q.x,Q.y,b,V.j+1.570796326794897,ma,za);Ra.ka(ma.j,za.j);f.gb.Ad(this.Ub,this.lc,Ma.x,
Ma.y,Pa.x,Pa.y,ca,ba,null,2);f.gb.tj(this.Ub,this.lc,Ma.x,Ma.y,.5*ca.j,ba.j,Ba,Ea,2);Qa.ka(Ba.j,Ea.j);f.gb.Ad(this.Ub,this.lc,Ra.x,Ra.y,Qa.x,Qa.y,h,null,null,2);if(h.j<=this.to)break;Sa*=.9;f.gb.tj(this.Ub,this.lc,d.x,d.y,Sa*k,g,p,x,this.Fe);e.ka(p.j,x.j);f.gb.Ad(this.Ub,this.lc,d.x,d.y,e.x,e.y,null,null,Ta,this.Fe);f.gb.Fi(this.Ub,this.lc,e.x,e.y,b,Ta.j+1.570796326794897,ea,da);Pa.ka(ea.j,da.j)}b=Sa*k;1E5<b&&(b=1E5);this.zB=b};a.prototype.aZ=function(){var b=5E4<this.rb?100:1E4<this.rb?10:1;500>
this.rb/b&&(b=this.rb/500);.01>b&&(b=.01);this.to=b};return a}();f.dM=c})(fa||(fa={}));(function(f){var R=function(){function l(){}l.Wf=function(c,a){var b=new f.b;b.K(a);c.push(b)};l.Op=function(c,a){c.add(a.x);c.add(a.y)};l.SB=function(c){c.Gh(c.size-2)};l.YB=function(c,a){a.ka(c.get(c.size-2),c.get(c.size-1))};l.rs=function(c,a,b,d,e,g){if(null==c)throw f.f.I();var h=c.F();if(c.u()||f.R.lo(h))return c;var k=new l;k.Wg=a;k.Kc=f.ab.hc(a);var m=f.ab.cw(k.Kc);k.Vb=g;k.Ub=f.ab.Mv(k.Kc);k.lc=m*(2-m);
k.ic=k.Kc.Ld().gi;k.Tq=k.Kc.co();k.Ht=k.Tq*k.ic;k.jB=d;k.iB=e;k.Fe=b;197==h?(b=new f.Fa(c.description),b.bd(c,!1)):f.R.Ic(h)?(b=new f.Oa(c.description),b.$b(c,!0)):b=c;if(4!=k.Fe){a=0==k.Wg.Ib(k.Kc)?f.ab.$g(b,k.Wg,k.Kc):f.Lh.qj(b,k.Kc);if(a.u())return a;a=l.fJ(k.ic,a);a=k.Ez(a);a=f.zp.sj(a,k.Kc,k.Fe);k=f.ab.$g(a,k.Kc,k.Wg)}else{2==f.je.Fb(a)?(c=f.ab.sk(),a=f.ak.local().U(b,c,a,g),a==c&&(a=new f.Fa,c.copyTo(a))):a=f.Lh.qj(b,k.Kc);if(a.u())return a;k=k.fZ(a)}return k};l.fJ=function(c,a){var b=new f.g;
a.Zb(b);if(3.141592653589793>b.N()*c)return a;var d=!1;b=a.Ba();for(var e=new f.b,g=new f.b;b.Ta();)for(;b.Aa();){var h=b.aa();e.K(h.ac());g.K(h.wc());e.scale(c);g.scale(c);if(3.141592653589793<Math.abs(e.x-g.x)){var k=l.tv(e,g);if(!k){d=!0;break}if(6.283185307179586<Math.abs(e.x-g.x)){d=!0;break}}}if(!d)return a;d=a.Ga();var m=1<a.description.Ca,n=new f.b,p=new f.b,x=new f.b,Q=new f.b,V=new f.Ra;for(b.ej();b.Ta();)for(var ca=NaN,ba=[0];b.Aa();){h=b.aa();e.K(h.ac());g.K(h.wc());e.scale(c);g.scale(c);
isNaN(ca)?(l.cj(e.x,NaN,ba),p.K(e)):p.K(x);ca=p.x;if(k=l.tv(e,g)){if(6.283185307179586<g.x-e.x)for(;6.283185307179586<g.x-e.x;)g.x-=6.283185307179586;if(-6.283185307179586>g.x-e.x)for(;-6.283185307179586>g.x-e.x;)g.x+=6.283185307179586;l.cj(g.x,NaN,ba);x.K(g)}else n.K(g),l.TV(n),l.cj(n.x,ca,ba),x.ka(ba[0]+n.x,n.y);.5>Math.abs(x.x-g.x)&&x.K(g);m?(h.zx(0,V),Q.K(p),Q.scale(1/c),V.nb(Q),(k=b.Im())?d.xf(V):d.lineTo(V),b.ko()&&!a.Lb(b.Pa)&&(h.zx(1,V),Q.K(x),Q.scale(1/c),V.nb(Q),d.lineTo(V))):((k=b.Im())&&
d.pA(null,0),h=d.$()-1,Q.K(p),Q.scale(1/c),d.Ff(h,-1,Q),b.ko()&&!a.Lb(b.Pa)&&(Q.K(x),Q.scale(1/c),d.Ff(h,-1,Q)))}return d};l.gG=function(c,a,b,d,e,g,h,k,m,n,p,x){var Q=new f.b,V=new f.b,ca=0<d.compare(e);l.jK(ca,d,e,Q,V);l.hG(c,a,b,Q,V,g,NaN,h,k,m,n,null,p,x);ca&&l.OC(m,n,null,p)};l.prototype.Ez=function(c){var a=c.Ga(),b=c.Ba(),d=[],e=null,g=null,h=1<c.description.Ca;h&&(e=new f.ie(0),g=new f.og);for(var k=[0],m=new f.b,n=new f.b,p=new f.b,x=new f.b;b.Ta();)for(k[0]=0;b.Aa();){var Q=b.aa();m.K(Q.ac());
n.K(Q.wc());m.scale(this.ic);n.scale(this.ic);var V=0<m.compare(n);l.jK(V,m,n,p,x);d.length=0;null!=e&&e.Gh(0);0<this.jB?l.hG(this.Ub,this.lc,this.Fe,p,x,this.jB,this.iB,this.Ht,null,null,null,h?e:null,d,k):l.oS(this.Ub,this.lc,this.Fe,p,x,this.iB,this.Ht,h?e:null,d,k);V&&l.OC(null,null,h?e:null,d);d[0].K(Q.ac());d[d.length-1].K(Q.wc());for(var ca=1;ca<d.length-1;ca++)d[ca].scale(1/this.ic);h?(V=l.iK(V,Q,g),l.FE(b.Im(),b.ko()&&!c.Lb(b.Pa),Q,V,e,d,a)):l.EE(b.Im(),b.ko()&&!c.Lb(b.Pa),d,a)}return a};
l.prototype.fZ=function(c){var a=c.Ga(),b=c.Ba(),d=[],e=null,g=new f.og,h=1<c.description.Ca;for(h&&(e=new f.ie(0));b.Ta();)for(;b.Aa();){var k=b.aa(),m=k.ac(),n=k.wc();m=0<m.compare(n);n=l.iK(m,k,g);d.length=0;null!=e&&e.Gh(0);l.eZ(this.Ub,this.lc,this.ic,n,this.Wg,this.jB,this.iB,h?e:null,d);m&&l.OC(null,null,h?e:null,d);h?l.FE(b.Im(),b.ko()&&!c.Lb(b.Pa),k,n,e,d,a):l.EE(b.Im(),b.ko()&&!c.Lb(b.Pa),d,a)}return a};l.EE=function(c,a,b,d){c&&d.pA(null,0);c=d.$()-1;var e=b.slice(0);d.cH(c,e,e.length-
1);a&&d.Ff(c,-1,b[b.length-1])};l.FE=function(c,a,b,d,e,g,h){var k=new f.Ra;b.jp(k);c?h.xf(k):h.lineTo(k);if(2<g.length){c=d.Pb();for(var m=1;m<g.length-1;m++){var n=d.zH(e.get(m)*c);d.zx(n,k);k.nb(g[m]);h.lineTo(k)}}a&&(b.hp(k),h.lineTo(k))};l.hG=function(c,a,b,d,e,g,h,k,m,n,p,x,Q,V){var ca=new f.da(0),ba=new f.da(0),ea=new f.da(0);f.gb.Ad(c,a,d.x,d.y,e.x,e.y,ea,ca,ba,b);ea=ea.j;var da=ca=ca.j;ba=ba.j;0>da&&(da+=6.283185307179586);0>ba&&(ba+=6.283185307179586);null!=m&&(m[0]=ea);null!=n&&(n[0]=da);
null!=p&&(p[0]=ba);n=m=NaN;null!=x&&(n=f.C.Hg(c,a),p=f.C.q(c,a,d.y),m=(n-p)/ea,n=(n+p)/ea);p=l.uv(d,e);ba=l.sv(d,e);da=p||ba;var ma=l.pF(d,e,k),za=new f.da(0),Ba=new f.da(0),Ea=new f.b,Ma=new f.b,Pa=new f.b;l.cj(d.x,NaN,V);var Ra=[V[0]];if(ea<=g)l.Wf(Q,d),l.cj(e.x,NaN,V),null!=x&&x.add(0),da?(p&&l.VB(d,e,x,Q),ba&&l.TB(d,e,x,Q)):ma?l.UB(d,e,ca,m,n,x,Q):0<h&&(Ma.ka(d.x-Ra[0],d.y),Ea.ka(e.x-V[0],e.y),l.Dz(c,a,b,d,ea,ca,Ma,Ea,0,1,h,x,Q,Ra)),l.Wf(Q,e);else{g=1+f.L.truncate(Math.ceil(ea/g));var Qa=ea/(g-
1),Sa=new f.b,Ta=0;l.Wf(Q,d);Sa.K(d);Ma.ka(d.x-V[0],d.y);null!=x&&x.add(0);for(var Ua=1;Ua<g;Ua++){if(Ua<g-1){f.gb.tj(c,a,d.x,d.y,Ua*Qa,ca,za,Ba,b);Ea.ka(za.j,Ba.j);l.cj(Ea.x,Sa.x,V);Pa.ka(V[0]+Ea.x,Ea.y);var Va=Ua/(g-1)}else l.cj(e.x,NaN,V),Ea.ka(e.x-V[0],e.y),Pa.K(e),Va=1;da?(1==Ua&&p&&l.VB(d,Pa,x,Q),Ua==g-1&&ba&&l.TB(Sa,e,x,Q)):ma?l.oF(Sa,Pa,k)&&(d.x<e.x?Sa.x>Pa.x&&(V[0]+=6.283185307179586,Pa.ka(V[0]+Ea.x,Ea.y)):Sa.x<Pa.x&&(V[0]-=6.283185307179586,Pa.ka(V[0]+Ea.x,Ea.y)),l.UB(Sa,Pa,ca,m,n,x,Q)):
0<h&&l.Dz(c,a,b,d,ea,ca,Ma,Ea,Ta,Va,h,x,Q,Ra);l.Wf(Q,Pa);null!=x&&x.add(Va);Sa.K(Pa);Ma.K(Ea);Ra[0]=V[0];Ta=Va}}};l.oS=function(c,a,b,d,e,g,h,k,m,n){var p=new f.da(0),x=new f.da(0),Q=new f.da(0);f.gb.Ad(c,a,d.x,d.y,e.x,e.y,Q,p,x,b);x=Q.j;p=p.j;var V=Q=NaN;if(null!=k){V=f.C.Hg(c,a);var ca=f.C.q(c,a,d.y);Q=(V-ca)/x;V=(V+ca)/x}ca=l.uv(d,e);var ba=l.sv(d,e),ea=ca||ba;h=l.pF(d,e,h);var da=l.tv(d,e);da=ea||h||da;l.cj(d.x,NaN,n);var ma=new f.b;l.Wf(m,d);ma.K(d);null!=k&&k.add(0);da?(ea?(ca&&l.VB(d,e,k,m),
ba&&l.TB(d,e,k,m)):h&&l.UB(d,e,p,Q,V,k,m),l.cj(e.x,NaN,n),l.Wf(m,e)):x<=g?(l.cj(e.x,NaN,n),l.Wf(m,e)):(Q=new f.b,h=new f.b,Q.K(d),h.K(e),Q.x-=n[0],h.x-=n[0],-3.141592653589793>h.x?h.x+=6.283185307179586:3.141592653589793<h.x&&(h.x-=6.283185307179586),l.Dz(c,a,b,d,x,p,Q,h,0,1,g,k,m,n),l.Wf(m,e),l.cj(e.x,NaN,n));null!=k&&k.add(1)};l.Dz=function(c,a,b,d,e,g,h,k,m,n,p,x,Q,V){var ca=new f.b,ba=new f.b;ca.ka(h.x+V[0],h.y);new f.da(0);new f.da(0);new f.da(0);new f.da(0);var ea=new f.da(0),da=new f.da(0),
ma=new f.da(0),za=new f.b,Ba=new f.b,Ea=new f.b,Ma=new f.b;za.K(h);Ba.K(k);h=new f.ie(0);k=new f.ie(0);l.Op(h,Ba);k.add(n);var Pa=new f.b,Ra=new f.zb,Qa=[];for(l.bL(4,Qa);0<h.size;){for(var Sa=!1,Ta,Ua=NaN,Va=0;3>Va;Va++)if(Ta=Qa[Va]*n+(1-Qa[Va])*m,f.gb.tj(c,a,d.x,d.y,Ta*e,g,ea,da,b),Ea.ka(ea.j,da.j),0==Va&&(Ua=Ta,Ma.K(Ea)),l.yY(za,Ea,Ba,Ra),Ra.cc(Ra.ae(Ea,!0),Pa),f.gb.Ad(c,a,Ea.x,Ea.y,Pa.x,Pa.y,ma,null,null,2),ma.j>p){Sa=!0;break}Sa?(Ba.K(Ma),n=Ua,l.Op(h,Ba),k.add(n)):(l.SB(h),k.Xn(k.size-1,1,k.size-
1),0<h.size&&(l.cj(Ba.x,ca.x,V),ba.ka(V[0]+Ba.x,Ba.y),l.Wf(Q,ba),ca.K(ba),null!=x&&x.add(n),za.K(Ba),m=n,l.YB(h,Ba),n=k.get(k.size-1)))}};l.eZ=function(c,a,b,d,e,g,h,k,m){var n=new f.b,p=new f.b,x=new f.b,Q=new f.b,V=new f.b,ca=new f.b,ba=new f.b,ea=new f.b,da=new f.b,ma=new f.b,za=new f.da(0),Ba=new f.da(0),Ea=new f.b,Ma=[[],[]],Pa=1==f.je.Fb(e);e=e.ce(0);var Ra=d.ac(),Qa=d.wc();Pa?(ca.ka(Ra.x*b,Ra.y*b),ba.ka(Qa.x*b,Qa.y*b)):(Ma[0][0]=Ra.x,Ma[0][1]=Ra.y,Ma[1][0]=Qa.x,Ma[1][1]=Qa.y,f.ab.du(),ca.x=
Ma[0][0]*b,ca.y=Ma[0][1]*b,ba.x=Ma[1][0]*b,ba.y=Ma[1][1]*b);var Sa=0,Ta=0,Ua=1,Va=d.jo();n.K(Ra);p.K(Qa);Qa=new f.ie(0);var Ya=new f.ie(0),ab=new f.ie(0);l.Op(Qa,p);l.Op(Ya,ba);ab.add(Ua);l.Wf(m,n);null!=k&&k.add(Ta);var fb=[],db=0<h?Va?5:3:Va?5:1;l.bL(db,fb);for(var Xa=new f.da(0),Za=new f.da(0),Wa=new f.da(0),eb=new f.da(0),cb=new f.da(0),hb=new f.da(0),$a=new f.da(0);0<Ya.size;){var gb=!1,bb=NaN;f.gb.Ad(c,a,ca.x,ca.y,ba.x,ba.y,Xa,Za,null,2);for(Ra=0;Ra<db;Ra++){if(0==Ra){if(!Va&&0>=h&&Xa.j<=g&&
3.141592653589793>Math.abs(ca.x-ba.x))break;if(d.zy(Ta,Ua)<=e)break}var ib=fb[Ra]*Ua+(1-fb[Ra])*Ta;d.cc(ib,x);Pa?ea.ka(x.x*b,x.y*b):(Ma[0][0]=x.x,Ma[0][1]=x.y,f.ab.du(),ea.x=Ma[0][0]*b,ea.y=Ma[0][1]*b);if(0==Ra&&(bb=ib,V.K(x),ma.K(ea),0<g&&(Xa.j>g||3.141592653589793<=Math.abs(ca.x-ba.x)))){gb=!0;break}if(Va&&0<g){if(f.gb.Ad(c,a,ca.x,ca.y,ea.x,ea.y,Wa,null,null,2),Wa.j>g||3.141592653589793<=Math.abs(ca.x-ea.x)){gb=!0;break}}else if(0<h)if(Va?(Q.hU(n,p,fb[Ra]),Pa?da.ka(Q.x*b,Q.y*b):(Ma[0][0]=Q.x,Ma[0][1]=
Q.y,f.ab.du(),da.x=Ma[0][0]*b,da.y=Ma[0][1]*b)):(Q.K(x),da.K(ea)),f.gb.Ad(c,a,ca.x,ca.y,da.x,da.y,eb,null,null,2),eb.j<=Xa.j){f.gb.tj(c,a,ca.x,ca.y,eb.j,Za.j,za,Ba,2);Ea.ka(za.j,Ba.j);f.gb.Ad(c,a,Ea.x,Ea.y,ea.x,ea.y,cb,null,null,2);if(cb.j>h){gb=!0;break}if(Va){f.gb.Ad(c,a,Ea.x,Ea.y,da.x,da.y,hb,null,null,2);if(hb.j>h){gb=!0;break}f.gb.Ad(c,a,da.x,da.y,ea.x,ea.y,$a,null,null,2);if($a.j>h){gb=!0;break}}}else{gb=!0;break}}gb?(p.K(V),ba.K(ma),Ua=bb,l.Op(Qa,p),l.Op(Ya,ba),ab.add(Ua)):(l.SB(Qa),l.SB(Ya),
ab.Xn(ab.size-1,1,ab.size-1),l.Wf(m,p),Sa+=Xa.j,null!=k&&k.add(Sa),0<Ya.size&&(n.K(p),ca.K(ba),Ta=Ua,l.YB(Qa,p),l.YB(Ya,ba),Ua=ab.get(ab.size-1)))}if(null!=k)for(c=1/Sa,Ra=0;Ra<k.size;Ra++)k.write(Ra,k.read(Ra)*c)};l.OC=function(c,a,b,d){d.reverse();null!=b&&b.wi(0,b.size,1);b=null!=c?c[0]:NaN;d=null!=a?a[0]:NaN;null!=c&&(c[0]=d);null!=a&&(a[0]=b)};l.jK=function(c,a,b,d,e){c?(d.K(b),e.K(a)):(d.K(a),e.K(b))};l.iK=function(c,a,b){if(!c)return a;b.create(a.F());a.copyTo(b.get());b.get().reverse();return b.get()};
l.cj=function(c,a,b){if(isNaN(a)){for(;3.141592653589793<b[0]-c;)b[0]-=6.283185307179586;for(;3.141592653589793<c-b[0];)b[0]+=6.283185307179586}else 3.141592653589793<b[0]+c-a?b[0]-=6.283185307179586:3.141592653589793<a-(b[0]+c)&&(b[0]+=6.283185307179586)};l.yY=function(c,a,b,d){3.141592653589793>Math.abs(a.x-c.x)?(d.Fc(c),3.141592653589793<=b.x-c.x?d.am(b.x-6.283185307179586,b.y):3.141592653589793<=c.x-b.x?d.am(b.x+6.283185307179586,b.y):d.am(b.x,b.y)):(d.Fc(b),3.141592653589793<=c.x-b.x?d.am(c.x-
6.283185307179586,c.y):3.141592653589793<=b.x-c.x?d.am(c.x+6.283185307179586,c.y):d.am(c.x,c.y))};l.bL=function(c,a){for(var b=0;b<c;b++){var d=Math.ceil(b/2)/(c+1);0!=b%2&&(d=-d);a[b]=.5+d}};l.uv=function(c,a){return f.l.V(c.y,1.570796326794897)&&!f.l.V(a.y,1.570796326794897)||f.l.V(c.y,-1.570796326794897)&&!f.l.V(a.y,-1.570796326794897)?!0:!1};l.sv=function(c,a){return f.l.V(a.y,1.570796326794897)&&!f.l.V(c.y,1.570796326794897)||f.l.V(a.y,-1.570796326794897)&&!f.l.V(c.y,-1.570796326794897)?!0:!1};
l.pF=function(c,a,b){return!l.oF(c,a,b)||f.l.V(c.y,1.570796326794897)||f.l.V(c.y,-1.570796326794897)||f.l.V(a.y,1.570796326794897)||f.l.V(a.y,-1.570796326794897)?!1:!0};l.oF=function(c,a,b){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=b?!0:!1};l.tv=function(c,a){return f.l.V(c.y,1.570796326794897)&&f.l.V(a.y,1.570796326794897)||f.l.V(c.y,-1.570796326794897)&&f.l.V(a.y,-1.570796326794897)?!0:!1};l.VB=function(c,a,b,d){if(0<c.y){var e=new f.b;e.ka(a.x,1.570796326794897)}else e=new f.b,e.ka(a.x,
-1.570796326794897);f.l.V(c.x,e.x)||f.l.V(a.y,e.y)||(l.Wf(d,e),null!=b&&b.add(0))};l.TB=function(c,a,b,d){if(0<a.y){var e=new f.b;e.ka(c.x,1.570796326794897)}else e=new f.b,e.ka(c.x,-1.570796326794897);f.l.V(a.x,e.x)||f.l.V(c.y,e.y)||(l.Wf(d,e),null!=b&&b.add(1))};l.UB=function(c,a,b,d,e,g,h){f.l.qd(b)?(0<1.570796326794897-c.y&&(b=new f.b,b.ka(c.x,1.570796326794897),l.Wf(h,b),null!=g&&g.add(d)),0<1.570796326794897-a.y&&(b=new f.b,b.ka(a.x,1.570796326794897),l.Wf(h,b),null!=g&&g.add(d))):(0<1.570796326794897+
c.y&&(b=new f.b,b.ka(c.x,-1.570796326794897),l.Wf(h,b),null!=g&&g.add(e)),0<1.570796326794897+a.y&&(b=new f.b,b.ka(a.x,-1.570796326794897),l.Wf(h,b),null!=g&&g.add(e)))};l.TV=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586};return l}();f.jj=R})(fa||(fa={}));(function(f){f.zp=function(){function R(){}R.sj=function(l,c,a){if(null==l||null==c||!f.ab.Cc(c))throw f.f.I();if(l.u())return l;
var b=l,d=b.F();if(f.R.Bc(d)){b=f.Lh.qj(l,c);l=new f.g;b.s(l);d=f.la.Qd(c,l,!1);for(var e=f.ab.nh(c),g=Math.floor((l.o-e.o)/e.N())*e.N()+e.o;g<l.v;)g>l.o+d&&g<l.v-d&&(b=f.Lh.Ss(b,c,a,!0,g)),g+=e.N()}else{if(197==d)return l=new f.Fa(b.description),l.bd(b,!1),R.sj(l,c,a);if(f.R.Ic(d))return l=new f.Oa(b.description),l.$b(b,!0),R.sj(l,c,a)}return R.Iv(b,c)};R.Iv=function(l,c){if(null==l||null==c||!f.ab.Cc(c))throw f.f.I();if(l.u())return l;var a=l.F();197==a?(a=new f.Fa(l.description),a.bd(l,!1)):f.R.Ic(a)?
(a=new f.Oa(l.description),a.$b(l,!0)):a=l;a=f.Lh.qj(a,c);return a.u()?a:1==f.je.Fb(c)?f.Lh.vm(a,c,0,a!=l,0):R.ZR(a,c,a!=l)};R.ZR=function(l,c,a){if(!f.ab.Cc(c))throw f.f.I();if(l.u())return l;var b=f.ab.Sd(c),d=-(180*b);b*=360;2==f.je.Fb(c)&&(d=f.ab.nh(c),b=d.v,d=d.o,b-=d);return f.Lh.aq(l,d,b,c,a,0,!0)};return R}()})(fa||(fa={}));(function(f){f.bM=function(){function R(){}R.kM=function(l,c){var a=Math.abs(l%c);return isNaN(a)||a==l||a<=Math.abs(c)/2?a:0>l?-1*(a-c):0<l?a-c:0*(a-c)};R.J=function(l){return 0>
l?-l:l};R.ub=function(l,c){return 0<=c?R.J(l):-R.J(l)};R.V=function(l,c){return l==c||R.J(l-c)<=R.qD*(1+(R.J(l)+R.J(c))/2)};R.qd=function(l){return 0==l||R.J(l)<=R.qD};R.nw=function(l){l=R.kM(l,R.py);return R.J(l)<=R.Jn?l:0>l?l+R.py:l-R.py};R.EA=function(l,c){l.j=R.nw(l.j);c.j=R.nw(c.j);R.J(c.j)>R.Iu&&(l.j=R.nw(l.j+R.Jn),c.j=R.ub(R.Jn,c.j)-c.j)};R.Hg=function(l,c){c=Math.sqrt(1-c);c=(1-c)/(1+c);var a=c*c;return l/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*R.Iu};R.nS=function(l,c,a,b,d){var e,g,h=0,k=g=
0,m=0,n=0,p=0,x=0,Q,V=0,ca=new f.da,ba=new f.da;if(null!=d)if(ca.j=l,ba.j=c,R.EA(ca,ba),l=ca.j,c=ba.j,ca.j=a,ba.j=b,R.EA(ca,ba),a=ca.j,b=ba.j,a=R.nw(a-l),R.V(c,b)&&(R.qd(a)||R.V(R.J(c),R.Iu)))null!=d&&(d.j=0);else{if(R.V(c,-b)){if(R.V(R.J(c),R.Iu)){null!=d&&(d.j=2*R.Hg(6378137,.0066943799901413165));return}if(R.V(R.J(a),R.Jn)){null!=d&&(d.j=2*R.Hg(6378137,.0066943799901413165));return}}if(R.qd(.0066943799901413165))n=Math.cos(c),p=Math.cos(b),null!=d&&(h=Math.sin((b-c)/2),g=Math.sin(a/2),V=2*Math.asin(Math.sqrt(h*
h+n*p*g*g)),d.j=6378137*V);else{ca=1-Math.sqrt(.9933056200098587);l=1-ca;ba=Math.atan(l*Math.tan(c));c=Math.sin(ba);ba=Math.cos(ba);var ea=Math.atan(l*Math.tan(b));b=Math.sin(ea);ea=Math.cos(ea);var da=e=a,ma=0,za=1,Ba=a;for(Q=!0;1==Q;){ma+=1;1==za&&(x=Math.sin(Ba),g=Math.cos(Ba),h=ea*x,V=ba*b-c*ea*g,h=Math.sqrt(h*h+V*V),g=c*b+ba*ea*g,V=Math.atan2(h,g),k=1E-15>R.J(h)?ba*ea*x/R.ub(1E-15,h):ba*ea*x/h,m=1-k*k,n=1E-15>R.J(m)?g-c*b/R.ub(1E-15,m)*2:g-c*b/m*2,p=n*n,x=((-3*m+4)*ca+4)*m*ca/16);var Ea=(1-x)*
ca*(V+x*h*(n+g*x*(2*p-1)));1==za?(Ba=a+Ea*k,1E-14>R.J(Ba-da)?Q=!1:R.J(Ba)>R.Jn?(za=2,Ba=R.Jn,0>a&&(Ba=-Ba),k=0,m=1,e=da=2,V=R.Jn-R.J(Math.atan(c/ba)+Math.atan(b/ea)),h=Math.sin(V),g=Math.cos(V),x=((-3*m+4)*ca+4)*m*ca/16,1E-14>R.J(k-e)?Q=!1:(n=1E-15>R.J(m)?g-c*b/R.ub(1E-15,m)*2:g-c*b/m*2,p=n*n)):(0>(Ba-da)*(da-e)&&5<ma&&(Ba=(2*Ba+3*da+e)/6),e=da,da=Ba)):(k=(Ba-a)/Ea,0>(k-da)*(da-e)&&5<ma&&(k=(2*k+3*da+e)/6),e=da,da=k,m=1-k*k,x=k*h/(ba*ea),g=-Math.sqrt(R.J(1-x*x)),Ba=Math.atan2(x,g),h=ea*x,V=ba*b-c*
ea*g,h=Math.sqrt(h*h+V*V),g=c*b+ba*ea*g,V=Math.atan2(h,g),x=((-3*m+4)*ca+4)*m*ca/16,1E-14>R.J(k-e)?Q=!1:(n=1E-15>R.J(m)?g-c*b/R.ub(1E-15,m)*2:g-c*b/m*2,p=n*n))}null!=d&&(k=Math.sqrt(1+(1/(l*l)-1)*m),k=(k-1)/(k+1),m=k*(1-.375*k*k),d.j=(1+k*k/4)/(1-k)*l*6378137*(V-m*h*(n+m/4*(g*(-1+2*p)-m/6*n*(-3+4*h*h)*(-3+4*p)))))}}};R.Jn=3.141592653589793;R.Iu=1.5707963267948966;R.py=6.283185307179586;R.qD=3.552713678800501E-15;return R}()})(fa||(fa={}));(function(f){var R=function(){return function(c){this.He=c;
this.Rk=this.He.getCode();0>this.Rk&&(this.Rk=0)}}();f.j_=R;var l=function(){function c(a){void 0===a&&(a=null);this.Gj=null;this.no=!1;null!==a&&(this.Gj=new R(a))}c.prototype.xc=function(){return null!=this.Gj?this.Gj.Rk:0};c.prototype.Cf=function(){var a=new c;this.copyTo(a);return a};c.prototype.copyTo=function(a){a.Gj=this.Gj;a.no=this.no};c.prototype.Qv=function(){var a=this.Cf();a.Xs();return a};c.prototype.Xs=function(){this.no=!this.no};c.prototype.Bm=function(){return null!=this.Gj?this.Gj.He:
null};c.prototype.PK=function(a){if(0>=a)throw f.f.I();if(a!=this.xc()){a=f.zf.geogtran(a);if(null==a)throw f.f.I("Geogtran not found.");this.Gj=new R(a)}};c.prototype.jA=function(){return null==this.Gj?null:this.Gj.He.toString()};c.prototype.XY=function(a){if(null==a)throw f.f.I();var b=null;try{b=f.zf.fromString(f.Pc.PE_TYPE_GEOGTRAN,a)}catch(d){throw f.f.I();}this.Gj=new R(b)};c.prototype.Ib=function(a){return a==this?!0:a instanceof c&&(!(0>=this.xc()||this.xc()!=a.xc())||this.Bm().isEqual(a.Bm()))?
this.no==a.no:!1};c.prototype.toString=function(){var a="GeographicTransformation: "+this.jA();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a};c.create=function(a,b){var d=new c;d.PK(a);b&&d.Xs();return d};c.LF=function(a,b){var d=new c;d.XY(a);b&&d.Xs();return d};return c}();f.Hn=l})(fa||(fa={}));(function(f){var R=function(){function c(){}c.construct=function(a,b,d,e){var g=new c;g.Um=a;g.Vm=b;g.nI=d;g.oI=e;return g};c.ls=function(a,b){return a.Um==b.Um?a.Vm==
b.Vm?0:a.Vm<b.Vm?-1:1:a.Um<b.Um?-1:1};return c}(),l=function(){function c(){this.pI=[];this.cB=[];this.LH=this.RA=this.KH=!1;this.Jp()}c.bo=function(){null==c.oL&&(c.oL=new c);return c.oL};c.d0=function(){return c.bo().RA};c.e0=function(){return c.bo().LH};c.l_=function(a,b){if(a==b)return null;var d=c.bo();if(d.KH){var e=c.Fy(d.cB,a,b);return null!=e?e:null}e=c.Fy(d.cB,a,b);return null!=e?e:c.Fy(d.pI,a,b)};c.CQ=function(a,b,d,e,g){var h=f.hy.create();if(0<a)try{var k=f.Hn.create(a,b);if(0==k.xc())return null;
h.add(k);if(0<d){var m=f.Hn.create(d,e);if(0==m.xc())return null;h.add(m)}g&&(h=h.Qv())}catch(n){h=null}return h};c.Fy=function(a,b,d){if(b==d||0==a.length)return null;for(var e=R.construct(b,d,0,0),g=!1,h=!1,k=0,m=0,n=-1,p=0;p<a.length;p++)if(0===R.ls(e,a[p])){n=p;break}if(0>n||a[n].Um!=e.Um||a[n].Vm!=e.Vm){e=R.construct(d,b,0,0);b=-1;for(p=0;p<a.length;p++)if(0===R.ls(e,a[p])){b=p;break}0<=b&&a[b].Um==e.Um&&a[b].Vm==e.Vm&&(k=a[b].nI,m=a[b].oI,h=g=!0)}else k=a[n].nI,m=a[n].oI,g=!1,h=!0;if(!h)return null;
0==k&&(k=m,m=0);e=a=!1;0>k&&(k=-k,a=!0);0>m&&(m=-m,e=!0);return c.CQ(k,a,m,e,g)};c.prototype.Jp=function(){this.TD(this.pI)&&(this.RA=!0);this.TD(this.cB)&&(this.LH=!0);this.KH=!this.RA};c.prototype.TD=function(a){try{var b=[];b=b.sort(R.ls);for(var d=0;d<b.length;d++)a.push(b[d])}catch(e){}return!0};c.y_=function(){return null};return c}();f.i_=l})(fa||(fa={}));(function(f){var R=function(){function l(){}l.prototype.Ky=function(c){this.oi=c};l.prototype.jE=function(c){this.Hb=c};l.prototype.kE=function(c){this.To=
c};l.mF=function(c){return c.u()||1607!=c.F()&&1736!=c.F()?!1:!0};l.kF=function(c){return c.u()||1607!=c.F()&&1736!=c.F()||20>c.D()?!1:!0};l.lF=function(c){return c.u()||1607!=c.F()&&1736!=c.F()||20>c.D()?!1:!0};return l}();f.Yk=R})(fa||(fa={}));(function(f){f.bc=function(){function R(){}R.lV=function(l){var c=new f.Fa;c.Zx(l.Ms(),l.Os());c.Cj(l.Ms(),l.Ns());c.Cj(l.Ls(),l.Ns());c.Cj(l.Ls(),l.Os());return c};R.$g=function(l,c){return null===l?null:f.Rr.local().U(l,c,null)};R.SZ=function(l,c){var a=
f.Jh.local();l=new f.$c(l);return a.U(l,c,null).next()};R.tm=function(l,c,a){return f.Cp.local().U(l,c,a,null)};R.tp=function(l,c,a){return f.oy.local().U(l,c,a,null)};R.AZ=function(l,c,a){var b=f.oy.local();l=new f.$c(l);c=new f.$c(c);a=b.U(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};R.Ib=function(l,c,a){return f.kj.local().U(3,l,c,a,null)};R.dR=function(l,c,a){return f.kj.local().U(4,l,c,a,null)};R.kU=function(l,c,a){var b=f.ak.local();l=new f.$c(l);c=new f.$c(c);a=b.U(l,c,a,null);
for(b=[];null!=(c=a.next());)b.push(c);return b};R.aR=function(l,c,a){var b=f.Cp.local();l=new f.$c(l);c=new f.$c(c);a=b.U(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};R.Ia=function(l,c,a){return f.ak.local().U(l,c,a,null)};R.XZ=function(l,c,a){return f.kj.local().U(2,l,c,a,null)};R.contains=function(l,c,a){return f.kj.local().U(1,l,c,a,null)};R.MQ=function(l,c,a){return f.kj.local().U(16,l,c,a,null)};R.touches=function(l,c,a){return f.kj.local().U(8,l,c,a,null)};R.WV=function(l,c,
a){return f.kj.local().U(32,l,c,a,null)};R.mU=function(l,c,a){return f.kj.local().U(1073741824,l,c,a,null)};R.hC=function(l,c,a,b){return f.IM.local().U(l,c,a,b,null)};R.vb=function(l,c,a,b){var d=null;if(null!=a){if(d=a.Ld(),null!=b&&d.xc()!=b.xc()&&d.nd!=b.nd)throw f.f.al();}else if(null!=b)throw f.f.I();l=f.AM.local().U(l,c,null);null!==d&&null!==b&&(l=f.Uc.Rh(l,d,b));return l};R.clip=function(l,c,a){return f.uM.local().U(l,f.g.construct(c.Ms(),c.Os(),c.Ls(),c.Ns()),a,null)};R.jl=function(l,c,
a){if(null==l||null==c)return null;l=f.wM.local().U(!0,l,c,a,null);for(c=[];null!=(a=l.next());)a.u()||c.push(a);return c.slice(0)};R.XO=function(l,c,a,b,d,e,g,h){if(!0===d)return R.YO(l,c,a,b,e,g,h);d=a;if(null!=c){if(g=c.Ld(),null!=b&&g.xc()!=b.xc()){if(g.nd!=b.nd)throw f.f.al();d=[];f.Uc.IF(a,a.length,b,g,d)}}else if(null!=b)throw f.f.I();a=f.hD.local();if(e){l=new f.$c(l);c=a.U(l,c,d,e,null);for(l=[];null!=(e=c.next());)l.push(e);e=l.slice(0)}else for(e=[],b=0;b<l.length;b++)e[b]=a.U(l[b],c,d[b],
null);return e};R.YO=function(l,c,a,b,d,e,g){if(null===c)throw f.f.I();if(null===b||void 0===b)b=4326!==c.xc()?c.Ld():f.Uc.hh(9001);if(0!==b.nd)throw f.f.I();f.Uc.IF(a,a.length,b,f.Uc.hh(9001),a);b=f.mD.local();if(d){l=new f.$c(l);c=b.U(l,c,e,a,g,!1,d,null);for(a=[];null!=(e=c.next());)a.push(e);d=a.slice(0)}else{d=[];for(var h=0;h<l.length;h++)d[h]=b.U(l[h],c,e,a[h],g,!1,null)}return d};R.buffer=function(l,c,a,b,d,e,g){var h=a;if(!1===d){if(null!=c){if(d=c.Ld(),null!=b&&d.xc()!=b.xc()){if(d.nd!=
b.nd)throw f.f.al();h=f.Uc.Rh(a,b,d)}}else if(null!=b)throw f.f.I();l=f.hD.local().U(l,c,h,null)}else{if(null===c)throw f.f.I();if(null===b||void 0===b)b=4326!==c.xc()?c.Ld():f.Uc.hh(9001);if(0!==b.nd)throw f.f.I();h=f.Uc.Rh(a,b,f.Uc.hh(9001));l=f.mD.local().U(l,c,e,h,g,!1,null)}return l};R.UV=function(l,c,a,b,d,e,g){if(null!=c){var h=c.Ld();if(null!=g&&h.xc()!=g.xc()){if(h.nd!=g.nd)throw f.f.al();a=f.Uc.Rh(a,g,h)}}else if(null!=g)throw f.f.I();l=new f.$c(l);c=f.pD.local().U(l,c,a,b,d,e,null);for(a=
[];null!=(b=c.next());)a.push(b);return a.slice(0)};R.offset=function(l,c,a,b,d,e,g){if(null!=c){var h=c.Ld();if(null!=g&&h.xc()!=g.xc()){if(h.nd!=g.nd)throw f.f.al();a=f.Uc.Rh(a,g,h)}}else if(null!=g)throw f.f.I();return f.pD.local().U(l,c,a,b,d,e,null)};R.sQ=function(l){return f.jD.local().U(l,null)};R.tQ=function(l,c){var a=f.jD.local();l=new f.$c(l);c=a.U(l,c,null);for(a=[];null!=(l=c.next());)a.push(l);return a};R.Xz=function(l,c,a){return f.my.local().Xz(l,c,a)};R.Yz=function(l,c){return f.my.local().Yz(l,
c)};R.Zz=function(l,c,a,b){return f.my.local().Zz(l,c,a,b)};R.MC=function(l,c){return f.jm.local().U(l,c,!1,null)};R.AU=function(l,c){return f.jm.local().zq(l,c,null)};R.bS=function(l,c,a,b,d){var e=f.lD.local();if(null!=c){if(c=c.Ld(),null!=d&&c.xc()!=d.xc()){if(c.nd!=d.nd)throw f.f.al();a=f.Uc.Rh(a,d,c)}}else if(null!=d)throw f.f.I();return e.U(l,a,b,null)};R.rs=function(l,c,a,b){var d=f.im.local();if(null!=c){if(c=c.Ld(),null!=b&&c.xc()!=b.xc()){if(c.nd!=b.nd)throw f.f.al();a=f.Uc.Rh(a,b,c)}}else if(null!=
b)throw f.f.I();return d.U(l,a,null)};R.Bz=function(l,c,a,b,d){void 0===d&&(d=0);var e=f.CM.local();if(4==d)throw f.f.Me();if(0!==d)throw f.f.Me();if(null!==b){if(0!==b.nd)throw f.f.I("Unit must be a linear unit type");a=f.Uc.Rh(a,b,f.Uc.hh(9001))}return e.U(l,a,c,d,null)};R.hS=function(l,c,a,b){if(null===l)return 0;if(4==b)throw f.f.Me();if(0!==b)throw f.f.Me();if(197==l.F())l=R.lV(l);else if(1736!=l.F())return 0;b=f.ab.hc(c);l=f.ab.$g(l,c,b);l=f.cM.iS([l])[0];if(null!==a){if(2!==a.nd)throw f.f.I("Unit must be a area unit type");
l=f.Uc.Rh(l,f.Uc.hh(109404),a)}return l};R.lS=function(l,c,a,b){l=f.EM.local().U(l,c,b,null);if(null!==a){if(0!==a.nd)throw f.f.I("Unit must be a linear unit type");l=f.Uc.Rh(l,f.Uc.hh(9001),a)}return l};R.bW=function(l,c,a){if(null===l)return 0;var b=null;if(null!=c){b=c.Ld();if(0==b.nd&&(b=f.Uc.MG(b),null==b&&null!==a))throw f.f.I();if(null!=a&&b.xc()!=a.xc()&&b.nd!=a.nd)throw f.f.al();}else if(null!=a)throw f.f.I();return 1736==l.F()||197==l.F()?(l=l.Pe(),null!==a?f.Uc.Rh(l,b,a):l):0};R.cW=function(l,
c,a){if(null===l||l.u()||1>l.pb())return 0;var b=null;if(null!=c){if(b=c.Ld(),null!=a&&b.xc()!=a.xc()&&b.nd!=a.nd)throw f.f.al();}else if(null!=a)throw f.f.I();1736==l.F()||197==l.F()?c=l.sg():f.R.Ic(l.F())?(c=new f.Oa(l.description),c.$b(l,!0)):c=l;l=0;c=c.Ba();for(var d=new f.b,e=new f.b;c.Ta();)for(;c.Aa();){var g=c.aa();g.qq(d);g.vs(e);l+=f.b.vb(d,e)}null!==b&&null!==a&&(l=f.Uc.Rh(l,b,a));return l};R.X_=function(l,c){return f.je.kS(l,c)};R.pQ=function(l){return void 0!==l.points?R.HT(l,void 0===
l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM):void 0!==l.rings?R.YG(l.rings,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"P"):void 0!==l.paths?R.YG(l.paths,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"L"):void 0!==l.x?R.IT(l):void 0!==l.xmin?R.GT(l):null};R.IT=function(l){if(null==l.x||"NaN"==l.x)return new f.Ra;var c=new f.Ra(l.x,l.y);void 0!==l.z&&null!==l.z&&c.$Y(l.z);void 0!==l.m&&null!==l.m&&c.KY(l.m);return c};R.GT=function(l){if(null==l.xmin||"NaN"==l.xmin)return new f.Ih;var c=
new f.Ih(l.xmin,l.ymin,l.xmax,l.ymax);void 0!==l.zmin&&null!==l.zmin&&c.setInterval(1,0,l.zmin,l.zmax);void 0!==l.mmin&&null!==l.mmin&&c.setInterval(2,0,l.mmin,l.mmax);return c};R.HT=function(l,c,a){var b=0,d=new f.Hd,e=3*l.points.length;0!=e%2&&e++;2>e&&(e=2);var g=f.L.truncate(3*l.points.length/2);4>g?g=4:16>g&&(g=16);e=f.Xc.Wn(e,0);var h=f.Xc.Wn(g);g=f.Xc.Wn(g);for(var k=0;k<l.points.length;k++)e.write(2*k,l.points[k][0]),e.write(2*k+1,l.points[k][1]),h.write(k,c||a?l.points[k][2]:NaN),g.write(k,
a&&c?l.points[k][3]:NaN),b++;0!=b&&(d.resize(b),d.yn(0,e));c&&(d.le(1),d.yn(1,h));a&&(d.le(2),d.yn(2,0==c?h:g));d.Oc(16777215);return d};R.YG=function(l,c,a,b){var d=0,e=2;if("P"==b){var g=new f.Fa;d=1;e=3}else g=new f.Oa;for(var h=f.Xc.Sh(0),k=f.Xc.ns(0),m=0,n=0,p=[],x=[],Q=0;Q<l.length;Q++){var V=l[Q].length;p[Q]=!1;if("P"===b&&l[Q][0][0]===l[Q][l[Q].length-1][0]&&l[Q][0][1]===l[Q][l[Q].length-1][1]){var ca=0==a?!0:l[Q][0][3]===l[Q][l[Q].length-1][3]||void 0===l[Q][0][3]&&void 0===l[Q][l[Q].length-
1][3];(0==c||l[Q][0][2]===l[Q][l[Q].length-1][2]||void 0===l[Q][0][2]&&void 0===l[Q][l[Q].length-1][2])&&ca&&(p[Q]=!0,--V)}V>=e?(x[Q]=!1,n+=1,h.add(m),k.add(d),m+=V):x[Q]=!0}b=3*m;0!=b%2&&b++;2>b&&(b=2);Q=f.L.truncate(3*m/2);4>Q?Q=4:16>Q&&(Q=16);b=f.Xc.Wn(b,0);d=f.Xc.Wn(Q);e=f.Xc.Wn(Q);for(Q=V=0;Q<l.length;Q++)if(!1===x[Q])for(ca=0;ca<l[Q].length;ca++){var ba=!1;ca===l[Q].length-1&&!0===p[Q]&&(ba=!0);ba||(b.write(2*V,l[Q][ca][0]),b.write(2*V+1,l[Q][ca][1]),d.write(V,c||a?l[Q][ca][2]:NaN),e.write(V,
a&&c?l[Q][ca][3]:NaN),V++)}0!=m&&(l=g,h.resize(n),k.resize(n),0<m&&(h.add(m),k.add(0)),l.yn(0,b),l.TK(k),l.UK(h));c&&(g.le(1),g.yn(1,d));a&&(g.le(2),g.yn(2,0==c?d:e));g.Oc(16777215);return g};return R}()})(fa||(fa={}));(function(f){f.jy=function(){function R(){}R.vr=function(l){var c=0,a,b=l.length,d=l[0];for(a=0;a<b-1;a++){var e=l[a+1];c+=(e[0]-d[0])*(e[1]+d[1]);d=e}return 0<=c};R.rotate=function(l,c,a){c=c*Math.PI/180;var b=Math.cos(c),d=Math.sin(c);if(void 0!==l.paths){c={paths:[]};for(var e=0;e<
l.paths.length;e++){for(var g=l.paths[e],h=[],k=0;k<g.length;k++){var m=g[k].slice(0);h.push(m);var n=b*(g[k][0]-a.x)-d*(g[k][1]-a.y)+a.x,p=d*(g[k][0]-a.x)+b*(g[k][1]-a.y)+a.y;m[0]=n;m[1]=p}c.paths.push(h)}return c}if(void 0!==l.rings){c={rings:[]};for(e=0;e<l.rings.length;e++){g=l.rings[e];h=[];var x=R.vr(g);for(k=0;k<g.length;k++)m=g[k].slice(0),h.push(m),n=b*(g[k][0]-a.x)-d*(g[k][1]-a.y)+a.x,p=d*(g[k][0]-a.x)+b*(g[k][1]-a.y)+a.y,m[0]=n,m[1]=p;R.vr(h)!==x&&h.reverse();c.rings.push(h)}return c}if(void 0!==
l.x)return c={x:b*(l.x-a.x)-d*(l.y-a.y)+a.x,y:d*(l.x-a.x)+b*(l.y-a.y)+a.y},void 0!==l.z&&(c.z=l.z),void 0!==l.m&&(c.m=l.m),c;if(void 0!==l.points){c={points:[]};l=l.points;for(k=0;k<l.length;k++)e=l[k].slice(0),e[0]=b*(l[k][0]-a.x)-d*(l[k][1]-a.y)+a.x,e[1]=d*(l[k][0]-a.x)+b*(l[k][1]-a.y)+a.y,c.points.push(e);return c}return null};R.VR=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],g=0;g<d.length;g++){var h=d[g].slice(0);e.push(h);var k=
c.x-d[g][0];h[0]=d[g][0]+2*k}a.paths.push(e)}return a}if(void 0!==l.rings){a={rings:[]};for(b=0;b<l.rings.length;b++){d=l.rings[b];var m=R.vr(d);e=[];for(g=0;g<d.length;g++)h=d[g].slice(0),e.push(h),k=c.x-d[g][0],h[0]=d[g][0]+2*k;R.vr(e)!==m&&e.reverse();a.rings.push(e)}return a}if(void 0!==l.x)return k=c.x-l.x,a={x:l.x+2*k,y:l.y},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),a;if(void 0!==l.points){a={points:[]};l=l.points;for(g=0;g<l.length;g++)b=l[g].slice(0),k=c.x-b[0],b[0]+=2*k,a.points.push(b);
return a}return void 0!==l.xmin?(a={o:l.xmin,A:l.ymin,v:l.xmax,B:l.ymax},void 0!==l.zmin&&(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.x-l.xmin,a.xmax=l.xmin+2*k,k=c.x-l.xmax,a.xmin=l.xmax+2*k,a):null};R.WR=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],g=0;g<d.length;g++){var h=d[g].slice(0);e.push(h);var k=c.y-d[g][1];h[1]=d[g][1]+2*k}a.paths.push(e)}return a}if(void 0!==l.rings){a={rings:[]};for(b=
0;b<l.rings.length;b++){d=l.rings[b];var m=R.vr(d);e=[];for(g=0;g<d.length;g++)h=d[g].slice(0),e.push(h),k=c.y-d[g][1],h[1]=d[g][1]+2*k;R.vr(e)!==m&&e.reverse();a.rings.push(e)}return a}if(void 0!==l.x)return k=c.y-l.y,a={y:l.y+2*k,x:l.x},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),a;if(void 0!==l.points){a={points:[]};l=l.points;for(g=0;g<l.length;g++)b=l[g].slice(0),k=c.y-b[1],b[1]+=2*k,a.points.push(b);return a}return void 0!==l.xmin?(a={o:l.xmin,A:l.ymin,v:l.xmax,B:l.ymax},void 0!==l.zmin&&
(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.y-l.ymin,a.ymax=l.ymin+2*k,k=c.y-l.ymax,a.ymin=l.ymax+2*k,a):null};return R}()})(fa||(fa={}));(function(f){f.hM=function(){function R(){}R.Pg=function(l,c){null==c&&(c=f.ke.ug());switch(l){case 33:return new f.Ra(c);case 322:return new f.zb(c);case 197:return new f.Ih(c);case 550:return new f.Hd(c);case 1607:return new f.Oa(c);case 1736:return new f.Fa(c);default:throw f.f.Y("invalid argument.");}};return R}()})(fa||
(fa={}));(function(f){var R=function(){function l(c,a){this.Ye=f.ha.Af(c,-1);this.ta=new f.Hu;this.Fl=a}l.prototype.fY=function(c){this.ta.ku(Math.min(this.Ye.size,c));this.ta.vn(c)};l.prototype.addElement=function(c,a){if(void 0===a)return this.oO(c);a=f.L.truncate(a%this.Ye.size);var b=this.Ye.get(a);-1==b&&(b=this.ta.Th(),this.Ye.set(a,b));return this.ta.addElement(b,c)};l.prototype.oO=function(c){var a=this.Fl.Tz(c);a=f.L.truncate(a%this.Ye.size);var b=this.Ye.get(a);-1==b&&(b=this.ta.Th(),this.Ye.set(a,
b));return this.ta.addElement(b,c)};l.prototype.hd=function(c,a){if(void 0===a)this.VQ(c);else{a=f.L.truncate(a%this.Ye.size);var b=this.Ye.get(a);if(-1==b)throw f.f.I();for(var d=this.ta.sc(b),e=-1;-1!=d;){var g=this.ta.hb(d);this.ta.ga(d)==c?(this.ta.hd(b,e,d),-1==this.ta.sc(b)&&(this.ta.kh(b),this.Ye.set(a,-1))):e=d;d=g}}};l.prototype.VQ=function(c){var a=this.Fl.Tz(c);a=f.L.truncate(a%this.Ye.size);var b=this.Ye.get(a);if(-1==b)throw f.f.I();for(var d=this.ta.sc(b),e=-1;-1!=d;){var g=this.ta.hb(d);
this.ta.ga(d)==c?(this.ta.hd(b,e,d),-1==this.ta.sc(b)&&(this.ta.kh(b),this.Ye.set(a,-1))):e=d;d=g}};l.prototype.ES=function(c){c=f.L.truncate(c%this.Ye.size);c=this.Ye.get(c);return-1==c?-1:this.ta.sc(c)};l.prototype.US=function(c){return this.ta.hb(c)};l.prototype.zd=function(c){var a=this.Fl.Tz(this.ga(c));a=f.L.truncate(a%this.Ye.size);var b=this.Ye.get(a);if(-1==b)throw f.f.I();for(var d=this.ta.sc(b),e=-1;-1!=d;){if(d==c){this.ta.hd(b,e,d);-1==this.ta.sc(b)&&(this.ta.kh(b),this.Ye.set(a,-1));
return}e=d;d=this.ta.hb(d)}throw f.f.I();};l.prototype.ga=function(c){return this.ta.ga(c)};l.prototype.clear=function(){this.Ye=f.ha.Af(this.Ye.size,-1);this.ta.clear()};l.prototype.size=function(){return this.ta.FG()};return l}();f.nM=R})(fa||(fa={}));(function(f){var R=function(){function l(){this.Ri=new f.ad(3);this.ta=new f.ad(6);this.NU=!1;this.re=-1}l.prototype.ml=function(c){this.Ri.hd(c)};l.prototype.vx=function(){return this.Ri.Ke()};l.prototype.Jv=function(c){this.ta.hd(c)};l.prototype.KB=
function(){return this.ta.Ke()};l.prototype.EC=function(c,a){this.Ri.P(c,1,a)};l.prototype.Mx=function(c,a){this.Ri.P(c,2,a)};l.prototype.JY=function(c,a){this.Ri.P(c,3,a)};l.prototype.CC=function(c,a){this.ta.P(c,4,a)};l.prototype.MY=function(c,a){this.ta.P(c,3,a)};l.prototype.XK=function(c,a){this.ta.P(c,2,a)};l.prototype.Th=function(c){var a=this.KB();this.ta.P(a,3,this.re);this.ta.P(a,4,0);this.ta.P(a,5,c);-1!=this.re&&this.XK(this.re,a);return this.re=a};l.prototype.kh=function(c){this.vF(c);
var a=this.ta.S(c,2),b=this.ta.S(c,3);-1!=a?this.MY(a,b):this.re=b;-1!=b&&this.XK(b,a);this.Jv(c);return b};l.prototype.ku=function(c){this.ta.Le(c)};l.prototype.BG=function(c){return this.ta.S(c,5)};l.prototype.IY=function(c,a){this.ta.P(c,5,a)};l.prototype.addElement=function(c,a){return this.OT(c,a)};l.prototype.OT=function(c,a){var b=this.vx();this.Mx(b,-1);-1==this.ta.S(c,0)&&this.ta.P(c,0,b);var d=this.ta.S(c,1);this.EC(b,d);-1!=d&&this.Mx(d,b);this.ta.P(c,1,b);this.setData(b,a);this.CC(c,this.Hs(c)+
1);this.NU&&this.JY(b,c);return b};l.prototype.hd=function(c,a){var b=this.Be(a),d=this.hb(a);-1!=b?this.Mx(b,d):this.ta.P(c,0,d);-1!=d?this.EC(d,b):this.ta.P(c,1,b);this.ml(a);this.CC(c,this.Hs(c)-1);return d};l.prototype.vn=function(c){this.Ri.Le(c)};l.prototype.getData=function(c){return this.Ri.S(c,0)};l.prototype.setData=function(c,a){this.Ri.P(c,0,a)};l.prototype.hb=function(c){return this.Ri.S(c,2)};l.prototype.Be=function(c){return this.Ri.S(c,1)};l.prototype.sc=function(c){return this.ta.S(c,
0)};l.prototype.Gc=function(c){return this.ta.S(c,1)};l.prototype.clear=function(){for(var c=this.re;-1!=c;)c=this.kh(c)};l.prototype.vF=function(c){for(var a=this.Gc(c);-1!=a;){var b=a;a=this.Be(b);this.ml(b)}this.ta.P(c,0,-1);this.ta.P(c,1,-1);this.CC(c,0)};l.prototype.u=function(){return 0==this.Ri.size};l.prototype.FG=function(){return this.Ri.size};l.prototype.Hs=function(c){return this.ta.S(c,4)};l.prototype.$z=function(c){return this.ta.S(c,3)};return l}();f.Ap=R})(fa||(fa={}));(function(f){var R=
function(){function l(c){void 0===c?(this.Bg=new f.ad(2),this.ta=new f.ad(4),this.re=-1,this.ww=!0):(this.Bg=new f.ad(2),this.ta=new f.ad(c?4:2),this.re=-1,this.ww=c)}l.prototype.ml=function(c){this.Bg.hd(c)};l.prototype.vx=function(){return this.Bg.Ke()};l.prototype.Jv=function(c){this.ta.hd(c)};l.prototype.KB=function(){return this.ta.Ke()};l.prototype.Th=function(){var c=this.KB();this.ww&&(this.ta.P(c,3,this.re),-1!=this.re&&this.ta.P(this.re,2,c),this.re=c);return c};l.prototype.kh=function(c){for(var a=
this.sc(c);-1!=a;){var b=a;a=this.hb(a);this.ml(b)}this.ww&&(a=this.ta.S(c,2),b=this.ta.S(c,3),-1!=a?this.ta.P(a,3,b):this.re=b,-1!=b&&this.ta.P(b,2,a));this.Jv(c)};l.prototype.ku=function(c){this.ta.Le(c)};l.prototype.addElement=function(c,a){var b=this.ta.S(c,1),d=this.vx();-1!=b?this.Bg.P(b,1,d):this.ta.P(c,0,d);this.ta.P(c,1,d);this.Bg.P(d,0,a);return d};l.prototype.vn=function(c){this.Bg.Le(c)};l.prototype.hd=function(c,a,b){-1!=a?(this.Bg.P(a,1,this.Bg.S(b,1)),this.ta.S(c,1)==b&&this.ta.P(c,
1,a)):(this.ta.P(c,0,this.Bg.S(b,1)),this.ta.S(c,1)==b&&this.ta.P(c,1,-1));this.ml(b)};l.prototype.lz=function(c,a){var b=this.ta.S(c,1),d=this.ta.S(a,0);-1!=d&&(-1!=b?this.Bg.P(b,1,d):this.ta.P(c,0,d),this.ta.P(c,1,this.ta.S(a,1)));this.ww&&(c=this.ta.S(a,2),b=this.ta.S(a,3),-1!=c?this.ta.P(c,3,b):this.re=b,-1!=b&&this.ta.P(b,2,c));this.Jv(a)};l.prototype.ga=function(c){return this.Bg.S(c,0)};l.prototype.Tj=function(c,a){this.Bg.P(c,0,a)};l.prototype.hb=function(c){return this.Bg.S(c,1)};l.prototype.sc=
function(c){return this.ta.S(c,0)};l.prototype.ao=function(c){return this.ga(this.sc(c))};l.prototype.clear=function(){this.Bg.rj(!0);this.ta.rj(!0);this.re=-1};l.prototype.u=function(){return 0==this.Bg.size};l.prototype.FG=function(){return this.Bg.size};l.prototype.$z=function(c){return this.ta.S(c,3)};return l}();f.Hu=R})(fa||(fa={}));(function(f){f.la=function(){function R(){}R.uE=function(l,c,a,b,d,e,g){var h=new f.b;h.K(l);l=new f.b;l.K(c);d.My(h);d.My(l);c=d.Ru(h);var k=d.Ru(l);0==k&&(k=d.AG());
if(h.x!=l.x&&(h.y!=l.y||h.y!=d.A&&h.y!=d.B)||k>c!=e){c=d.QD(h);k=d.QD(l);var m=e?1:3;do{c=c+m&3;var n=d.Ax(c);0!=g&&(b=R.uE(h,n,a,b,d,e,g));a[b++].ka(n.x,n.y);h=n}while((c&3)!=k);0!=g&&(b=R.uE(h,l,a,b,d,e,g))}else if(d=new f.b,d.ka(l.x-h.x,l.y-h.y),0!=g&&(g=f.L.truncate(d.ZN()/g),0<g))for(d.scale(1/(g+1)),e=0;e<g;e++)h.add(d),a[b++].ka(h.x,h.y);return b};R.Qd=function(l,c,a){c=c.Mn();l=null!=l&&void 0!==l.ce?l.ce(0):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};R.es=function(l){return 2*Math.sqrt(2)*l};
R.CO=function(l){return Math.sqrt(2)*l};R.Ng=function(l,c,a){var b=new f.g;c.s(b);return R.Qd(l,b,a)};R.hF=function(l,c,a){c=c.Qf(1,0).Mn();l=null!=l?l.ce(1):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};R.Z_=function(l,c){var a=new f.g;l.Zb(a);a.Nb(c);return a};R.Tv=function(l,c){var a=new f.g;l.Zb(a);l=new f.g;c.Zb(l);a.Nb(l);return a};R.i0=function(l,c){var a=l.JS(c),b=l.ua(c),d=l.zc(c),e=l.xa(a);a==b?(d=l.xa(d-1),a=l.xa(b+1)):a==d-1?(d=l.xa(a-1),a=l.xa(b)):(d=l.xa(a-1),a=l.xa(a+1));e=f.b.fp(d,e,a);
return 0==e?0<l.rm(c):-1==e};R.iP=function(l){var c=new f.g;l.Zb(c);if(c.u())return null;var a=new f.Fp(c,8),b=-1,d=new f.g,e=!1;do for(var g=0,h=l.$();g<h;g++)if(l.Sj(g,d),b=a.ew(g,d,b),-1==b){if(e)throw f.f.Y("internal error");l.Tn(c,!1);e=!0;a.reset(c,8);break}else e=!1;while(e);return a};R.$E=function(l){var c=new f.g;l.Zb(c);for(var a=new f.Fp(c,8),b=-1,d=l.Ba(),e=new f.g,g=!1;d.Ta();)for(;d.Aa();){var h=d.aa(),k=d.wb();h.s(e);b=a.ew(k,e,b);if(-1==b){if(g)throw f.f.za();l.Tn(c,!1);g=!0;a.reset(c,
8);d.ej();break}}return a};R.pj=function(l,c){var a=new f.g;l.Zb(a);for(var b=new f.Fp(a,8),d=-1,e=new f.g,g=l.Ba(),h=!1;g.Ta();)for(;g.Aa();){var k=g.aa(),m=g.wb();k.s(e);if(e.isIntersecting(c)&&(d=b.ew(m,e,d),-1==d)){if(h)throw f.f.Y("internal error.");l.Tn(a,!1);h=!0;b.reset(a,8);g.ej();break}}return b};R.B_=function(l){var c=new f.g;l.Zb(c);for(var a=new f.Fp(c,8),b=new f.b,d=new f.g,e=!1,g=0;g<l.D();g++)if(l.w(g,b),d.H(b),-1==a.Gi(g,d)){if(e)throw f.f.za();l.Tn(c,!1);e=!0;a.reset(c,8);g=-1}return a};
R.aF=function(l,c){for(var a=new f.Fp(c,8),b=new f.b,d=!1,e=new f.g,g=0;g<l.D();g++)if(l.w(g,b),c.contains(b)&&(e.H(b),-1==a.Gi(g,e))){if(d)throw f.f.za();d=!0;g=new f.g;l.Tn(g,!1);a.reset(g,8);g=-1}return a};R.zS=function(l,c,a){var b=new f.g,d=new f.g;l.Zb(b);c.Zb(d);b.O(a,a);d.O(a,a);var e=new f.g;e.H(b);e.Ia(d);l=l.Ba();c=c.Ba();var g=new f.fD;g.IC(a);var h=!1;for(g.vL();l.Ta();)for(;l.Aa();)l.aa().s(b),b.isIntersecting(e)&&(h=!0,a=new f.g,a.H(b),g.vE(l.wb(),a));g.WF();if(!h)return null;b=!1;
for(g.uL();c.Ta();)for(;c.Aa();)c.aa().s(d),d.isIntersecting(e)&&(b=!0,a=new f.g,a.H(d),g.qE(c.wb(),a));g.VF();return b?g:null};R.AS=function(l,c,a,b,d){var e=l.F(),g=c.F(),h=new f.g,k=new f.g;l.Zb(h);c.Zb(k);h.O(a,a);k.O(a,a);var m=new f.g;m.H(h);m.Ia(k);var n=new f.fD;n.IC(a);var p=!1;n.vL();var x=0;for(a=l.$();x<a;x++)if(!b||1736!=e||l.kw(x))l.Sj(x,h),h.isIntersecting(m)&&(p=!0,n.vE(x,h));n.WF();if(!p)return null;l=!1;n.uL();b=0;for(a=c.$();b<a;b++)if(!d||1736!=g||c.kw(b))c.Sj(b,k),k.isIntersecting(m)&&
(l=!0,n.qE(b,k));n.VF();return l?n:null};R.q0=function(l,c){return 0<l.rk(c)};R.A_=function(l,c){var a=new f.g;l.EX(c,a);a=new f.Fp(a,8);var b=-1,d=new f.g;l=l.Ba();l.oC(c);if(l.Ta())for(;l.Aa();){c=l.aa();var e=l.wb();c.Zb(d);b=a.ew(e,d,b);if(-1==b)throw f.f.Y("internal error");}return a};R.yv=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==l[b]?l[b]=f.b.gl(c[b]):l[b].K(c[b])};R.nz=function(l,c,a,b){var d=0;for(b+=0;d<b;a++,d++)null==l[d]&&(l[d]=[0,0]),l[d][0]=c[a].x,l[d][1]=c[a].y};R.mz=function(l,
c,a,b){var d=c,e=0;for(c=b+c;d<c;e++,d++)null==l[d]?l[d]=f.b.construct(a[e][0],a[e][1]):l[d].ka(a[e][0],a[e][1])};R.uQ=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==l[b]?l[b]=new f.Ra(c[b]):c[b].copyTo(l[b])};R.iZ=function(l,c,a,b){var d=b.fa;b=b.ja;for(var e=0;e<c;e+=a){var g=l.read(e);g<d?l.write(e,d):g>b&&l.write(e,b)}};R.hZ=function(l,c,a,b){var d=b.fa;b=b.ja;for(var e=0;e<c;e+=a){var g=l.read(e);g<d?l.write(e,d):g>b&&l.write(e,b)}};R.hL=function(l,c,a){if(l.hasAttribute(a)){var b=l.F();if(f.R.Rg(b)){var d=
f.oa.sl(a);b=f.oa.Sa(a);var e=l.D();if(1==d){l=l.Va(a);R.iZ(l,e*b,b,c);return}if(2==d){l=l.Va(a);R.hZ(l,e*b,b,c);return}throw f.f.Y("snap_coordinate not implemented");}if(197==b)e=l.Qf(a,0),b=!1,e.fa<c.fa&&(b=!0,e.fa=c.fa),e.ja>c.ja&&(b=!0,e.ja=c.ja),b&&l.setInterval(a,0,e);else if(33==b)e=l.Rc(a,0),b=!1,e<c.fa&&(b=!0,e=c.fa),e>c.ja&&(b=!0,e=c.ja),b&&l.setAttribute(a,0,e);else if(f.R.Ic(b))e=l.Ks(a,0),b=!1,e<c.fa&&(b=!0,e=c.fa),e>c.ja&&(b=!0,e=c.ja),b&&l.Qx(a,0,e),e=l.us(a,0),e<c.fa&&(b=!0,e=c.fa),
e>c.ja&&(b=!0,e=c.ja),b&&l.Hx(a,0,e);else throw f.f.Y("snap_coordinate not implemented");}};R.js=function(l,c,a,b,d){var e=0;null!=c&&(e=c.ce(l),d&&!b||null==c||(e+=1.01*c.dA(l)));b&&(a*=4,e*=1.01);return Math.max(e,a)};R.C_=function(l,c,a,b){c=f.g.sN(c.Ce(),c.lf(),a.Ce(),a.lf());return R.js(0,l,c,b,!1)};R.Yy=function(l,c,a){return R.js(0,l,c.Mn(),a,!1)};R.D_=function(l,c,a){return R.js(1,l,c.Mn(),a,!1)};R.pP=function(l,c){var a=new f.g;c.s(a);return R.Yy(l,a,!0)};R.Zy=function(l,c){return R.js(0,
l,c.Mn(),!1,!0)};R.E_=function(l,c,a){return R.js(1,l,c.Mn(),a,!0)};R.ov=function(l,c){var a=new f.g;c.s(a);return R.Zy(l,a)};R.mH=function(l,c,a,b){b*=b;var d=new f.b;d.tc(l,c);l=new f.b;l.tc(a,c);c=d.En();a=l.En();if(c<=b&&a<=b)return!0;var e=f.Tb.Wx(d.Di(l));return e<=b*c||e<=b*a?0<=d.Vh(l):!1};R.iL=function(l,c,a,b){for(var d=0;d<c;d++){var e=l[d].y,g=f.L.Yj(e,a,b);g!=e&&(l[d].y=g)}};return R}()})(fa||(fa={}));(function(f){var R=function(){function d(e){this.Xa=e}d.prototype.compare=function(e,
g,h){e=e.ga(h);h=this.Xa.vk(g);var k=this.Xa.vk(e);return h<k?-1:h==k?b.yq(g)&&b.mw(e)?-1:b.yq(e)&&b.mw(g)?1:0:1};return d}(),l=function(){function d(e){this.Xa=e}d.prototype.Lr=function(e,g,h){this.Xa.lZ(h,e,g)};d.prototype.sq=function(e){return this.Xa.vk(e)};return d}(),c;(function(d){d[d.initialize=0]="initialize";d[d.pIn=1]="pIn";d[d.pL=2]="pL";d[d.pR=3]="pR";d[d.pT=4]="pT";d[d.right=5]="right";d[d.left=6]="left";d[d.all=7]="all"})(c||(c={}));var a=function(){function d(){this.Xa=null;this.Wi=
new f.uc;this.Yg=new f.ha(0);this.zg=[0,0]}d.prototype.vi=function(e,g){this.Wi.fa=e.fa-g;this.Wi.ja=e.ja+g;this.Yg.resize(0);this.pe=0;this.zg[0]=0};d.prototype.nC=function(e,g,h){if(e>g)throw f.f.I();this.Wi.fa=e-h;this.Wi.ja=g+h;this.Yg.resize(0);this.pe=0;this.zg[0]=0};d.prototype.wn=function(e,g){this.Wi.fa=e-g;this.Wi.ja=e+g;this.Yg.resize(0);this.pe=0;this.zg[0]=0};d.prototype.next=function(){if(!this.Xa.Eq)throw f.f.Eb();if(0>this.pe)return-1;for(var e=!0;e;)switch(this.zg[this.pe]){case 1:e=
this.YV();break;case 2:e=this.ZV();break;case 3:e=this.$V();break;case 4:e=this.aW();break;case 5:e=this.lY();break;case 6:e=this.GU();break;case 7:e=this.EO();break;case 0:e=this.oA();break;default:throw f.f.za();}return-1!=this.Ug?this.hq()>>1:-1};d.J_=function(e,g,h){var k=new d;k.Xa=e;k.Yg.Db(20);k.vi(g,h);return k};d.K_=function(e,g,h){var k=new d;k.Xa=e;k.Yg.Db(20);k.wn(g,h);return k};d.construct=function(e){var g=new d;g.Xa=e;g.Yg.Db(20);g.pe=-1;return g};d.prototype.oA=function(){this.Ug=
this.iI=this.Si=this.Mc=-1;if(null!=this.Xa.te&&0<this.Xa.te.size)return this.zg[0]=1,this.Si=this.Xa.tf,!0;this.pe=-1;return!1};d.prototype.YV=function(){this.Mc=this.Si;if(-1==this.Mc)return this.Ug=this.pe=-1,!1;var e=this.Xa.iq(this.Mc);if(this.Wi.ja<e)return e=this.Xa.uk(this.Mc),this.Si=this.Xa.vj(this.Mc),-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=6),!0;if(e<this.Wi.fa)return e=this.Xa.uk(this.Mc),this.Si=this.Xa.tk(this.Mc),-1!=e&&(this.li=this.Xa.Fs(e),this.zg[++this.pe]=5),!0;this.zg[this.pe]=
2;this.iI=this.Mc;e=this.Xa.uk(this.Mc);this.Si=this.Xa.vj(this.Mc);-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7);return!0};d.prototype.ZV=function(){this.Mc=this.Si;if(-1==this.Mc)return this.zg[this.pe]=3,this.Si=this.Xa.tk(this.iI),!0;if(this.Xa.iq(this.Mc)<this.Wi.fa){var e=this.Xa.uk(this.Mc);this.Si=this.Xa.tk(this.Mc);-1!=e&&(this.li=this.Xa.Fs(e),this.zg[++this.pe]=5);return!0}e=this.Xa.uk(this.Mc);this.Si=this.Xa.vj(this.Mc);-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7);e=this.Xa.tk(this.Mc);
-1!=e&&this.Yg.add(e);return!0};d.prototype.$V=function(){this.Mc=this.Si;if(-1==this.Mc)return this.zg[this.pe]=4,!0;if(this.Wi.ja<this.Xa.iq(this.Mc)){var e=this.Xa.uk(this.Mc);this.Si=this.Xa.vj(this.Mc);-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=6);return!0}e=this.Xa.uk(this.Mc);this.Si=this.Xa.tk(this.Mc);-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7);e=this.Xa.vj(this.Mc);-1!=e&&this.Yg.add(e);return!0};d.prototype.aW=function(){if(0==this.Yg.size)return this.Ug=this.pe=-1,!1;this.Mc=
this.Yg.get(this.Yg.size-1);this.Yg.resize(this.Yg.size-1);var e=this.Xa.uk(this.Mc);-1!=e&&(this.li=this.Xa.ql(e),this.zg[++this.pe]=7);-1!=this.Xa.vj(this.Mc)&&this.Yg.add(this.Xa.vj(this.Mc));-1!=this.Xa.tk(this.Mc)&&this.Yg.add(this.Xa.tk(this.Mc));return!0};d.prototype.GU=function(){this.Ug=this.li;if(-1!=this.Ug&&b.yq(this.hq())&&this.Xa.vk(this.hq())<=this.Wi.ja)return this.li=this.EG(),!1;this.pe--;return!0};d.prototype.lY=function(){this.Ug=this.li;if(-1!=this.Ug&&b.mw(this.hq())&&this.Xa.vk(this.hq())>=
this.Wi.fa)return this.li=this.gT(),!1;this.pe--;return!0};d.prototype.EO=function(){this.Ug=this.li;if(-1!=this.Ug&&b.yq(this.hq()))return this.li=this.EG(),!1;this.pe--;return!0};d.prototype.EG=function(){return this.Xa.ag?this.Xa.gg.hb(this.Ug):this.Xa.Zi.hb(this.Ug)};d.prototype.gT=function(){return this.Xa.ag?this.Xa.gg.Be(this.Ug):this.Xa.Zi.Be(this.Ug)};d.prototype.hq=function(){return this.Xa.ag?this.Xa.gg.ga(this.Ug):this.Xa.Zi.getData(this.Ug)};return d}();f.k_=a;var b=function(){function d(e){this.Nm=
this.fi=this.gg=this.Zi=this.Xm=this.Ij=this.te=this.Jj=null;this.ag=e;this.Eq=this.yw=!1}d.prototype.Gr=function(){this.Uk(!0)};d.prototype.bs=function(e,g){if(!this.yw)throw f.f.Eb();this.Jj.push(new f.uc(e,g))};d.prototype.Zp=function(){if(!this.yw)throw f.f.Y("invalid call");this.yw=!1;this.Eq=!0;this.ag||(this.QT(),this.Fw=this.Jj.length)};d.prototype.Gi=function(e){if(!this.ag||!this.Eq)throw f.f.I("invalid call");if(-1==this.tf){var g=this.Jj.length;if(this.UA){var h=new f.ha(0);h.Db(2*g);
this.TJ(h);this.fi.Db(2*g);this.fi.resize(0);this.SJ(h);this.Xm.resize(g,-1);this.Xm.Xj(-1,0,g);this.UA=!1}else this.Xm.Xj(-1,0,g);this.tf=this.Av()}g=this.bH(e<<1,this.tf);h=this.gg.addElement((e<<1)+1,this.fA(g));this.ZK(g,h);this.Xm.set(e,g);this.Fw++};d.prototype.remove=function(e){if(!this.ag||!this.Eq)throw f.f.Y("invalid call");var g=this.Xm.get(e);if(-1==g)throw f.f.I("the interval does not exist in the interval tree");this.Xm.set(e,-1);this.Fw--;var h=this.fA(g),k=this.gg.qT(h);this.gg.zd(this.MS(g),
h);this.gg.zd(this.jT(g),h);e=this.gg.size(h);0==e&&(this.gg.XQ(h),this.cL(k,-1));this.Ij.hd(g);h=this.GG(k);var m=this.vj(k),n=this.tk(k);for(g=0;!(0<e||k==this.tf||-1!=m&&-1!=n);)k==this.vj(h)?-1!=m?(this.Vk(h,m),this.Vj(m,h),this.Vk(k,-1)):-1!=n?(this.Vk(h,n),this.Vj(n,h),this.Xk(k,-1)):this.Vk(h,-1):-1!=m?(this.Xk(h,m),this.Vj(m,h),this.Vk(k,-1)):-1!=n?(this.Xk(h,n),this.Vj(n,h),this.Xk(k,-1)):this.Xk(h,-1),this.Vj(k,-1),g++,k=h,h=this.uk(k),e=-1!=h?this.gg.size(h):0,m=this.vj(k),n=this.tk(k),
h=this.GG(k)};d.prototype.reset=function(){if(!this.ag||!this.Eq)throw f.f.I("invalid call");this.Uk(!1)};d.prototype.size=function(){return this.Fw};d.prototype.getIterator=function(){return a.construct(this)};d.prototype.TJ=function(e){for(var g=this.Jj.length,h=0;h<2*g;h++)e.add(h);this.mZ(e,2*g)};d.prototype.SJ=function(e){for(var g=NaN,h=0;h<e.size;h++){var k=e.get(h),m=this.vk(k);m!=g&&(this.fi.add(k),g=m)}};d.prototype.QT=function(){var e=this.Jj.length,g=new f.ha(0);g.Db(2*e);this.TJ(g);this.fi.Db(2*
e);this.fi.resize(0);this.SJ(g);this.Ij.Le(e);this.Zi.vn(2*e);var h=f.Xc.Sh(e);h.Xj(-1,0,e);this.tf=this.Av();for(e=0;e<g.size;e++){var k=g.get(e),m=h.get(k>>1);-1!=m?this.ZK(m,this.Zi.addElement(this.fA(m),k)):(m=this.bH(k,this.tf),h.set(k>>1,m))}};d.prototype.bH=function(e,g){var h=g,k=g,m=-1,n=0,p=this.fi.size-1,x=0,Q=e>>1,V=NaN,ca=NaN,ba=!0,ea=this.TS(Q);for(Q=this.QS(Q);ba;){n<p?(x=n+f.L.truncate((p-n)/2),-1==this.Nz(h)&&this.JK(h,this.fi.get(x),this.fi.get(x+1))):-1==this.Nz(h)&&this.JK(h,this.fi.get(n),
this.fi.get(n));var da=this.iq(h);if(Q<da)-1!=g&&(g==h?(k=h,V=da,g=this.vj(h),ca=-1!=g?this.iq(g):NaN):ca>da&&(da<V?this.Vk(k,h):this.Xk(k,h),this.Xk(h,g),this.ag&&(this.Vj(h,k),this.Vj(g,h)),k=h,V=da,g=-1,ca=NaN)),p=this.NS(h),-1==p&&(p=this.Av(),this.GY(h,p)),h=p,p=x;else if(ea>da)-1!=g&&(g==h?(k=h,V=da,g=this.tk(h),ca=-1!=g?this.iq(g):NaN):ca<da&&(da<V?this.Vk(k,h):this.Xk(k,h),this.Vk(h,g),this.ag&&(this.Vj(h,k),this.Vj(g,h)),k=h,V=da,g=-1,ca=NaN)),n=this.kT(h),-1==n&&(n=this.Av(),this.RY(h,n)),
h=n,n=x+1;else{ba=this.uk(h);-1==ba&&(ba=this.KQ(h),this.cL(h,ba));var ma=this.pO(ba,e);m=this.IQ();this.UY(m,ba);this.FY(m,ma);h!=g&&(da<V?this.Vk(k,h):this.Xk(k,h),this.ag&&this.Vj(h,k),-1!=g&&(ca<da?this.Vk(h,g):this.Xk(h,g),this.ag&&this.Vj(g,h)));ba=!1}}return m};d.prototype.Av=function(){return this.te.Ke()};d.prototype.KQ=function(e){return this.ag?this.gg.qs(e):this.Zi.Th(e)};d.prototype.IQ=function(){return this.Ij.Ke()};d.prototype.Uk=function(e){e?(this.yw=this.UA=!0,this.Eq=!1,null==this.fi?
this.fi=f.Xc.Sh(0):this.fi.resize(0),null==this.Jj?this.Jj=[]:this.Jj.length=0):this.UA=!1;this.ag?null==this.Xm?(this.Xm=f.Xc.Sh(0),this.gg=new f.bk,this.gg.kp(new R(this))):this.gg.clear():null==this.Zi?this.Zi=new f.Ap:this.Zi.clear();null==this.te?(this.Ij=new f.ad(3),this.te=new f.ad(this.ag?8:7)):(this.Ij.rj(!1),this.te.rj(!1));this.tf=-1;this.Fw=0};d.prototype.JK=function(e,g,h){this.zY(e,g);this.AY(e,h)};d.prototype.iq=function(e){var g=this.Nz(e);if(-1==g)return NaN;g=this.vk(g);e=this.vk(this.uS(e));
return g==e?g:.5*(g+e)};d.prototype.zY=function(e,g){this.te.P(e,0,g)};d.prototype.AY=function(e,g){this.te.P(e,1,g)};d.prototype.GY=function(e,g){this.te.P(e,3,g)};d.prototype.RY=function(e,g){this.te.P(e,4,g)};d.prototype.cL=function(e,g){this.te.P(e,2,g)};d.prototype.Vk=function(e,g){this.te.P(e,5,g)};d.prototype.Xk=function(e,g){this.te.P(e,6,g)};d.prototype.Vj=function(e,g){this.te.P(e,7,g)};d.prototype.UY=function(e,g){this.Ij.P(e,0,g)};d.prototype.pO=function(e,g){return this.ag?this.gg.addElement(g,
e):this.Zi.addElement(e,g)};d.prototype.FY=function(e,g){this.Ij.P(e,1,g)};d.prototype.ZK=function(e,g){this.Ij.P(e,2,g)};d.prototype.ql=function(e){return this.ag?this.gg.sc(e):this.Zi.sc(e)};d.prototype.Fs=function(e){return this.ag?this.gg.Gc(e):this.Zi.Gc(e)};d.yq=function(e){return 0==(e&1)};d.mw=function(e){return 1==(e&1)};d.prototype.Nz=function(e){return this.te.S(e,0)};d.prototype.uS=function(e){return this.te.S(e,1)};d.prototype.uk=function(e){return this.te.S(e,2)};d.prototype.NS=function(e){return this.te.S(e,
3)};d.prototype.kT=function(e){return this.te.S(e,4)};d.prototype.vj=function(e){return this.te.S(e,5)};d.prototype.tk=function(e){return this.te.S(e,6)};d.prototype.GG=function(e){return this.te.S(e,7)};d.prototype.fA=function(e){return this.Ij.S(e,0)};d.prototype.MS=function(e){return this.Ij.S(e,1)};d.prototype.jT=function(e){return this.Ij.S(e,2)};d.prototype.TS=function(e){return this.Jj[e].fa};d.prototype.QS=function(e){return this.Jj[e].ja};d.prototype.mZ=function(e,g){null==this.Nm&&(this.Nm=
new f.Du);var h=new l(this);this.Nm.sort(e,0,g,h)};d.prototype.lZ=function(e,g,h){var k=this;e.Zd(g,h,function(m,n){var p=k.vk(m),x=k.vk(n);return p<x||p==x&&d.yq(m)&&d.mw(n)?-1:1})};d.prototype.vk=function(e){var g=this.Jj[e>>1];return d.yq(e)?g.fa:g.ja};return d}();f.Qr=b})(fa||(fa={}));(function(f){var R=function(){function l(c){if(null==c)throw f.f.Y("Invalid arguement");this.rf=c;var a=c.BS();a.CT()?c.ee.uH()?this.Eo=f.zi.PannableFold:this.Eo=f.zi.Clip:this.Eo=f.zi.DontClip;a.DT()?c.Je.uH()?
this.cn=f.zi.PannableFold:this.cn=f.zi.Clip:this.cn=f.zi.DontClip;this.Om=a.rv;this.$H=a.qz;c=this.rf.fI;this.OH=c.Ps(2147483648);this.Aw=c.Ps(1073741824)}l.$g=function(c,a,b){return a.cx.$g(c,b)};l.Kr=function(c,a,b,d){return c.cx.Kr(a,b,d)};l.yu=function(c,a,b,d){b=0>b?a.length:b;c=c.cx.Kr(a,b,d);if(c==b)return c;for(var e=a=0;e<b;e++){var g=d[e];g.isNaN()||(a<e&&d[a].K(g),a++)}for(;a<b;a++)d[a].Tc();return c};l.transform=function(c,a,b,d,e){if(c.xq())return f.la.uQ(d,a,b),b;for(var g=[],h=0,k=
0;k<b;){for(var m=Math.min(g.length,b-k),n=k,p=0;n<m;n++,p++)null==g[p]?g[p]=a[n].w():a[n].w(g[p]);var x=e?l.yu(c,g,m,g):l.Kr(c,g,m,g);for(p=n=0;n<x;n++,p++)null==d[k]&&(d[k]=new f.Ra(a[k])),d[k].nb(g[p]);k+=m;h+=x}return h};l.BL=function(c,a,b){if(0==b)return[];var d=new f.Hd;d.yO(a,2*b);a=this.$g(d,c,null);c=a.Va(0);a=2*a.D();b=f.L.Xf(a);c.hu(0,a,b,0,!0);return b};l.prototype.Kr=function(c,a,b){if(this.rf.xq())return c!=b&&f.la.yv(b,c,a),a;var d=this.rf.ee,e=this.rf.Je,g=d.Fb(),h=e.Fb();if(0==g&&
g===h){var k=d.qk();e=e.qk();e=k/e;k=new f.xd;k.Dr(e,e);k.NZ(c,a,b);return a}k=f.L.kv(Math.min(a,64));if(3==g){var m=d.Pi;d=m.kk();g=d.Fb();b!=c&&f.la.yv(b,c,a);f.Ab.fl(m,b,a,!0);m.yu(f.nm.forward,b,a);f.Ab.el(m,b,a,!0)}if(3==g||3===h)throw f.f.Y("image: transform_in_place_");if(2==g)this.Eo==f.zi.Clip?(b!=c&&f.la.yv(b,c,a),c=d.sk(),f.Ab.iU(c,d,b,a)):(b!=c&&f.la.yv(b,c,a),d.Cc()&&(g=d.ce(0),m=d.be(),f.Ab.jZ(b,a,m,g),f.Ab.dG(b,a,d,0))),f.Ab.QM(d,b,a,k);else for(g=d.ce(0),m=d.be(),d=0;d<a;d++)f.Ab.kZ(c[d],
m,g,b[d]);f.Ab.OM(this.rf,b,a,k);c=0;(h=2==h)?c=e.Wh():isNaN(this.Om)||(c=this.Om);h&&this.cn!=f.zi.Clip||f.Ab.dG(b,a,e.hc(),c);h&&(f.Ab.kH(b,a,e,this.cn),f.Ab.PM(e,b,a,k));c=a;for(d=0;d<a;++d)b[d].isNaN()&&c--;return c};l.prototype.$g=function(c,a){if(this.rf.xq()||c.u())return c;if(33==c.F())return this.OJ(c);var b=this.rf.ee,d=this.rf.Je,e=b.Fb(),g=d.Fb();if(0==e&&e==g)return a=b.qk(),d=d.qk(),a/=d,d=new f.xd,d.Dr(a,a),c=f.R.$d(c),c.Qc(d),c;switch(c.F()){case 1607:case 1736:c=this.MJ(c,a);break;
case 550:c=this.wX(c,a);break;case 197:c=this.vX(c,a);break;default:throw f.f.Y("");}return c};l.prototype.OJ=function(c){var a=c.w(),b=[];b[0]=a;this.Kr(b,1,b);c=new f.Ra(c);c.nb(b[0]);return c};l.prototype.MJ=function(c,a){if(c.Fm())throw f.f.Y("curves not supported");var b=c.F();if(1736==b)return this.xX(c,a);if(1607==b)return this.yX(c,a);throw f.f.Y("projectMultiPath");};l.prototype.xX=function(c,a){var b=this.rf.ee,d=this.rf.Je,e=b.Fb(),g=d.Fb(),h=f.L.kv(Math.min(c.D(),64)),k=f.Fa.$d(c);3==
e&&(c=b.Pi,b=c.kk(),e=b.Fb(),k=c.fl(k,!0),this.Qp(c,f.nm.forward,k),k=c.el(k,!0));c=null;3==g&&(c=d.Pi,d=c.kk(),g=d.Fb());var m=2==e,n=2==g,p=n?d.hc():d,x=!n&&!this.Aw;g=!1;var Q=k;if(m){if(Q=f.Ab.LJ(Q,b,this.Eo,a),Q.u())return Q}else{k=new f.g;Q.Zb(k);e=b.be();if(k.A<e.A||k.B>e.B){var V=f.g.construct(k.o-1,e.A,k.v+1,e.B);Q=f.fh.Tp(Q,V,b,NaN,0,a);if(Q.u())return Q}k.N()>2*e.N()&&(Q=f.Ab.aq(Q,-2*e.N(),2*e.N(),b,!0,0,!0,a))}k=this.$H;(e=!isNaN(k))&&(Q=f.im.local().U(Q,k,a));V=n?d.xj():null;var ca=NaN;
m&&(ca=b.Wh());var ba=null!=d.Cs();if(this.OH)m&&(f.Ab.Tr(b,ca,Q,h),e&&(m=b.oh(),ca=b.hc().oh(),k*=ca/m)),f.Ab.Sr(this.rf,Q,x,h),e&&(m=b.hc().oh(),ca=d.hc().oh(),k*=ca/m),b=Q;else{var ea=new f.Oa(Q.description);ea.pE(Q);m&&(f.Ab.Tr(b,ca,ea,h),e&&(m=b.oh(),ca=b.hc().oh(),k*=ca/m));f.Ab.Sr(this.rf,ea,x,h);e&&(m=b.hc().Am(),ca=d.hc().Am(),k*=ca/m);x=NaN;n?(V=d.xj(),x=d.Wh()):isNaN(this.Om)||(x=this.Om);m=l.aw(b)|l.aw(d);ca=10*p.ce(0);this.Aw&&(m=3,ca=0);b=f.Ab.fS(Q,b,ea,p,x,a,m,ca)}ba&&(b=f.Ab.JE(b,
d,a));n&&(g||(n=p.be().N(),b.Qf(0,0).N()>=n-p.ce(0)&&(p=V.getNorthPoleLocation(),n=V.getSouthPoleLocation(),Q=V.getNorthPoleGeometry(),V=V.getSouthPoleGeometry(),x=0,Q==f.ng.PE_POLE_POINT&&p!=f.ng.PE_POLE_OUTSIDE_BOUNDARY&&(x=1),V==f.ng.PE_POLE_POINT&&n!=f.ng.PE_POLE_OUTSIDE_BOUNDARY&&(x|=2),0!==x&&(g=!0))),b=f.Ab.tA(b,d,this.cn,a),e&&(b=f.im.local().U(b,k,a)),f.Ab.qy(d,b,h));if(b.u())return b;g&&(b=f.jm.local().U(b,d,!1,a));null!=c&&(b=c.el(b,!1),this.Qp(c,f.nm.reverse,b),b=c.fl(b,!1));return b};
l.aw=function(c){if(2!=c.Fb())return 0;var a=0,b=c.xj();c=b.getNorthPoleLocation();var d=b.getSouthPoleLocation(),e=b.getNorthPoleGeometry();b=b.getSouthPoleGeometry();e==f.ng.PE_POLE_POINT&&c!=f.ng.PE_POLE_OUTSIDE_BOUNDARY&&(a=1);b==f.ng.PE_POLE_POINT&&d!=f.ng.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2);return a};l.prototype.yX=function(c,a){var b=this.rf.ee,d=this.rf.Je,e=b.Fb(),g=d.Fb(),h=f.L.kv(Math.min(c.D(),64)),k=f.Oa.$d(c);3==e&&(c=b.Pi,b=c.kk(),e=b.Fb(),k=c.fl(k,!0),this.Qp(c,f.nm.forward,k),k=c.el(k,
!0));c=null;3==g&&(c=d.Pi,d=c.kk(),g=d.Fb());var m=2==e;e=(g=2==g)?d.hc():d;var n=!g&&!this.Aw;if(m){if(k=f.Ab.LJ(k,b,this.Eo,a),k.u())return k}else{var p=new f.g;k.Zb(p);var x=b.be();if(p.A<x.A||p.B>x.B)if(p=f.g.construct(p.o-1,x.A,p.v+1,x.B),k=f.fh.Tp(k,p,b,NaN,0,a),k.u())return k}var Q=NaN;m&&(Q=b.Wh());p=null!=d.Cs();x=this.$H;var V=!isNaN(x);V&&(k=f.im.local().U(k,x,a));if(this.OH)m&&f.Ab.Tr(b,Q,k,h),V&&(m=b.oh(),Q=b.hc().oh(),x*=Q/m),f.Ab.Sr(this.rf,k,n,h),V&&(m=b.hc().oh(),Q=d.hc().oh(),x*=
Q/m),b=k;else{var ca=new f.Oa(k.description);ca.pE(k);m&&(f.Ab.Tr(b,Q,ca,h),V&&(m=b.oh(),Q=b.hc().oh(),x*=Q/m));f.Ab.Sr(this.rf,ca,n,h);V&&(m=b.hc().oh(),Q=d.hc().oh(),x*=Q/m);n=NaN;g?n=d.Wh():isNaN(this.Om)||(n=this.Om);m=l.aw(b)|l.aw(d);Q=10*e.ce(0);this.Aw&&(m=3,Q=0);b=f.Ab.gS(k,b,ca,e,n,a,m,Q)}p&&(b=f.Ab.JE(b,d,a));g&&(b=f.Ab.tA(b,d,this.cn,a),V&&(b=f.im.local().U(b,x,a)),f.Ab.qy(d,b,h));if(b.u())return b;null!=c&&(b=c.el(b,!1),this.Qp(c,f.nm.reverse,b),b=c.fl(b,!1));return b};l.prototype.vX=
function(c,a){var b=(c.ca()+c.N())/400;0!=b?(b=f.im.local().U(c,b,a),b=this.MJ(b,a),a=c.Ga(),b.qn(a)):(a=new f.Ra(c.bq()),b=this.OJ(a),a=c.Ga(),b.u()?a.Ka():(c.copyTo(a),c=b.w(),a.H(c.x,c.y,c.x,c.y)));return a};l.prototype.wX=function(c,a){c=f.R.$d(c);var b=this.rf.ee,d=this.rf.Je,e=b.Fb(),g=d.Fb(),h=f.L.kv(Math.min(c.D(),64));if(3==e){var k=b.Pi;b=k.kk();e=b.Fb();c=k.el(c,!0);this.Qp(k,f.nm.forward,c);c=k.fl(c,!0)}if(2==e){this.Eo==f.zi.Clip?c=f.ak.local().U(c,b.sk(),b,a):b.Cc()&&(e=new f.g,c.Zb(e),
b.be().contains(e)||(this.Eo==f.zi.PannableFold&&(c=f.Ab.qj(c,b)),f.Ab.su(c,b.be(),b.ce(0),!0),c=f.Ab.vm(c,b,0,!0,0,a)));if(c.u())return c;f.Ab.Tr(b,0,c,h)}else f.Ab.su(c,b.be(),b.ce(0),!0);f.Ab.Sr(this.rf,c,!1,h);b=0;e=!1;k=null;3==g&&(e=!0,k=d.Pi,d=k.kk(),g=d.Fb());(g=2==g)?b=d.Wh():isNaN(this.Om)||(b=this.Om);g&&this.cn!=f.zi.Clip||(c=f.Ab.vm(c,d.hc(),b,!1,0,a));if(g&&(c=f.Ab.tA(c,d,this.cn,a),f.Ab.qy(d,c,h),c.u()))return c;e&&(c=k.el(c,!0),this.Qp(k,f.nm.reverse,c),c=k.fl(c,!0));return c};l.prototype.Qp=
function(c,a,b){var d=b.D();if(0!=d){for(var e=b.Va(0),g=f.L.Xf(200,0),h=[],k=0;k<d;){var m=Math.min(100,d-k);e.hu(2*k,2*m,g,2,!0);for(var n=0;n<m;++n)h[n]=f.b.construct(g[2*k],g[2*k+1]);c.yu(a,h,m);k+=m}b.Oc(1993)}};l.Iv=function(c,a,b){if(null==c||null==a||!a.Cc())throw f.f.Y("Invalid Arguement");if(c.u())return c;var d=c.F();197==d?(d=new f.Fa(c.description),d.bd(c,!1)):f.R.Ic(d)?(d=new f.Oa(c.description),d.$b(c,!0)):d=c;d=f.Ab.qj(d,a);return d.u()?d:f.Ab.vm(d,a,0,d!=c,0,b)};l.sj=function(c,a,
b,d){if(null==c||null==a||!a.Cc())throw f.f.Y("Invalid Arguement");if(c.u())return c;var e=c.F();if(f.R.Bc(e)){c=f.Ab.qj(c,a);e=new f.g;c.s(e);for(var g=f.la.Yy(a,e,!1),h=a.nh(),k=Math.floor((e.o-h.o)/h.N())*h.N()+h.o;k<e.v;)k>e.o+g&&k<e.v-g&&(c=f.Ab.PT(c,a,b,k)),k+=h.N()}else{if(197==e)return e=new f.Fa(c.description),e.bd(c,!1),l.sj(e,a,b,d);if(f.R.Ic(e))return e=new f.Oa(c.description),e.$b(c,!0),l.sj(e,a,b,d)}return l.Iv(c,a,d)};l.H_=function(c,a,b,d){var e=a.Fb(),g=new f.BD;a.FX(g);if(0==e)return l.wF(c,
g,a,b);d==f.yp.foldAndClipWithHorizon&&a.Cc()&&(c=l.Iv(c,a,b));c=l.wF(c,g,a,b);if(d==f.yp.clipToDomainOnly||c.u())return c;if(1==e)return d==f.yp.clipWithHorizon?(d=new f.g,c.Zb(d),e=a.be(),g=.01*e.N(),d.A=e.A,d.B=e.B,d.o-=g,d.v+=g,f.fh.Tp(c,d,a,NaN,0,b)):c;if(2==e)return e=a.sk(),d==f.yp.clipWithHorizon||d==f.yp.foldAndClipWithHorizon?(a=f.ak.local().U(c,e,a,b),a==e?f.R.$d(a):a):c;if(3==e)return c;throw f.f.Y("missing implementation");};l.wF=function(c,a,b,d){var e=a.uT(),g=c.hasAttribute(1),h=c.hasAttribute(2),
k=new f.uc;k.Ka();var m=new f.uc;m.Ka();g&&(k=a.wT());h&&(m=a.PS());a=f.fh.Tp(c,e,b,NaN,0,d);g&&(g=a.Qf(1,0),k.contains(g)||(c==a&&(a=f.R.$d(a)),f.la.hL(a,k,1)));h&&(g=a.Qf(2,0),m.contains(g)||(c==a&&(a=f.R.$d(a)),f.la.hL(a,m,2)));return a};return l}();f.Bp=R})(fa||(fa={}));(function(f){var R=function(l){function c(a,b,d,e){var g=l.call(this)||this;void 0===a?g.description=f.ke.ug():void 0===d?g.description=a:(g.description=f.ke.ug(),g.GC(a,b),g.am(d,e));return g}Fa(c,l);c.prototype.F=function(){return 322};
c.prototype.Pb=function(){var a=this.ra-this.pa,b=this.na-this.ma;return Math.sqrt(a*a+b*b)};c.prototype.Qg=function(a){var b=this.ra-this.pa,d=this.na-this.ma;return Math.sqrt(b*b+d*d)<=a};c.prototype.jo=function(){return!1};c.prototype.qg=function(){var a=new f.b;a.tc(this.wc(),this.ac());return a};c.mQ=function(a,b){return new c(a.x,a.y,b.x,b.y)};c.prototype.qn=function(a){a.Ka();a.rg(this.description);var b=new f.g;this.s(b);a.mp(b);b=1;for(var d=this.description.Ca;b<d;b++)for(var e=this.description.jd(b),
g=f.oa.Sa(e);b<g;b++){var h=this.Qf(e,0);a.setInterval(e,0,h)}};c.prototype.s=function(a){a.H(this.ra,this.na,this.pa,this.ma);a.normalize()};c.prototype.ip=function(a){a.Ka();a.Nb(this.ra,this.na,this.Pd(0,1,0));a.Nb(this.pa,this.ma,this.Pd(1,1,0))};c.prototype.Qc=function(a){if(a instanceof f.xd){this.vc();var b=new f.b;b.x=this.ra;b.y=this.na;a.Zj(b,b);this.ra=b.x;this.na=b.y;b.x=this.pa;b.y=this.ma;a.Zj(b,b);this.pa=b.x;this.ma=b.y}else this.vc(),b=new f.Id,b.x=this.ra,b.y=this.na,b.z=this.Pd(0,
1,0),b=a.vp(b),this.ra=b.x,this.na=b.y,this.Nn(0,1,0,b.z),b.x=this.pa,b.y=this.ma,b.z=this.Pd(1,1,0),b=a.vp(b),this.pa=b.x,this.ma=b.y,this.Nn(1,1,0,b.z)};c.prototype.Ga=function(){return new c(this.description)};c.prototype.yy=function(a,b){return(this.pa-a-(this.ra-a))*(this.ma-b+(this.na-b))*.5};c.prototype.by=function(a){return a*this.Pb()};c.prototype.zH=function(a){return a/this.Pb()};c.prototype.qG=function(a){return f.Tb.Aq(this.ra,this.pa,a)};c.prototype.tS=function(a){return f.Tb.Aq(this.na,
this.ma,a)};c.prototype.jl=function(a,b){var d=new f.og;this.jh(a,b,d);return d.get()};c.prototype.jh=function(a,b,d){if(null==d)throw f.f.I();d.ps();d=d.get();d.rg(this.description);var e=new f.b;this.cc(a,e);d.GC(e.x,e.y);this.cc(b,e);d.am(e.x,e.y);e=1;for(var g=this.description.Ca;e<g;e++)for(var h=this.description.Jd(e),k=f.oa.Sa(h),m=0;m<k;m++){var n=this.Rc(a,h,m);d.Qx(h,m,n);n=this.Rc(b,h,m);d.Hx(h,m,n)}};c.prototype.Rc=function(a,b,d){if(0==b)return 0==d?this.cc(a).x:this.cc(a).y;switch(f.oa.Uz(b)){case 0:return.5>
a?this.Ks(b,d):this.us(b,d);case 1:var e=this.Ks(b,d);b=this.us(b,d);return f.Tb.Aq(e,b,a);case 2:throw f.f.Y("not implemented");}throw f.f.za();};c.prototype.ae=function(a,b){var d=this.pa-this.ra,e=this.ma-this.na,g=d*d+e*e;if(0==g)return.5;a=((a.x-this.ra)*d+(a.y-this.na)*e)/g;b||(0>a?a=0:1<a&&(a=1));return a};c.prototype.uq=function(a,b,d,e){if(a){a=this.ma-this.na;if(0==a)return b==this.ma?-1:0;b=(b-this.na)/a;if(0>b||1<b)return 0;null!=d&&(d[0]=this.qG(b))}else{a=this.pa-this.ra;if(0==a)return b==
this.pa?-1:0;b=(b-this.ra)/a;if(0>b||1<b)return 0;null!=d&&(d[0]=this.tS(b))}null!=e&&(e[0]=b);return 1};c.prototype.Te=function(a,b){var d=this.ma-this.na;if(0==d)return a==this.ma?b:NaN;a=(a-this.na)/d;b=this.qG(a);1==a&&(b=this.pa);return b};c.prototype.Xu=function(a,b,d){return 0<=this.Kp(a.x,a.y,b,d)};c.prototype.Ci=function(a,b,d){return 0<=this.Kp(a,b,d,!0)};c.prototype.Zs=function(a,b){return this.Xu(a,b,!1)};c.prototype.hJ=function(){if(this.ma<this.na||this.ma==this.na&&this.pa<this.ra){var a=
this.ra;this.ra=this.pa;this.pa=a;a=this.na;this.na=this.ma;this.ma=a;a=0;for(var b=this.description.gr-2;a<b;a++){var d=this.ia[a];this.ia[a]=this.ia[a+b];this.ia[a+b]=d}}};c.prototype.$u=function(a,b){b=f.b.construct(a,b);b.sub(this.ac());var d=new f.b;d.tc(this.wc(),this.ac());a=d.Di(b);b=8.881784197001252E-16*(Math.abs(d.x*b.y)+Math.abs(d.y*b.x));return a>b?-1:a<-b?1:0};c.prototype.Kp=function(a,b,d,e){var g=this.ra,h=this.na,k=a-g,m=b-h;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,6.661338147750939E-16*
k))return e&&0==k?NaN:0;k=a-this.pa;m=b-this.ma;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,6.661338147750939E-16*k))return e&&0==k?NaN:1;k=this.pa-this.ra;m=this.ma-this.na;e=Math.sqrt(k*k+m*m);if(0<e){var n=1/e;k*=n;m*=n;var p=a-g,x=b-h,Q=p*k+x*m,V=1.7763568394002505E-15*(Math.abs(p*k)+Math.abs(x*m)),ca=k;k=-m;m=ca;V=Math.max(d,V);if(Q<-V||Q>e+V)return NaN;if(Math.abs(p*k+x*m)<=Math.max(d,1.7763568394002505E-15*(Math.abs(p*k)+Math.abs(x*m)))&&(k=f.L.Yj(Q*n,0,1),.5>=k?(m=this.ra+(this.pa-this.ra)*k,e=
this.na+(this.ma-this.na)*k):(m=this.pa-(this.pa-this.ra)*(1-k),e=this.ma-(this.ma-this.na)*(1-k)),f.b.uz(m,e,a,b)<=d)){if(.5>k){if(f.b.uz(m,e,g,h)<=d)return 0}else if(f.b.uz(m,e,this.pa,this.ma)<=d)return 1;return k}}return NaN};c.prototype.Ib=function(a){return null==a?!1:a==this?!0:a.constructor!==this.constructor?!1:this.NN(a)};c.prototype.cE=function(a,b,d){var e=d?this.ra:this.pa;d=d?this.na:this.ma;var g=new f.b;g.x=a.pa-e;g.y=a.ma-d;return b.Vh(g)>6.661338147750939E-16*b.PD(g)?(g.x=a.ra-e,
g.y=a.na-d,b.Vh(g)<=6.661338147750939E-16*b.PD(g)):!0};c.prototype.bE=function(a){var b=new f.b;b.x=this.pa-this.ra;b.y=this.ma-this.na;if(!this.cE(a,b,!1))return!1;b.lr();return this.cE(a,b,!0)?!0:!1};c.VN=function(a,b){var d=a.$u(b.ra,b.na),e=a.$u(b.pa,b.ma);if(0>d&&0>e||0<d&&0<e)return!1;d=b.$u(a.ra,a.na);e=b.$u(a.pa,a.ma);if(0>d&&0>e||0<d&&0<e)return!1;d=a.Pb();e=b.Pb();return d>e?a.bE(b):b.bE(a)};c.TN=function(a,b,d){var e=f.b.construct(NaN,NaN),g=a.pa-a.ra,h=a.ma-a.na,k=b.pa-b.ra,m=b.ma-b.na,
n=k*h-g*m;if(0==n)return e;var p=8.881784197001252E-16*(Math.abs(k*h)+Math.abs(g*m)),x=b.ra-a.ra,Q=b.na-a.na,V=k*Q-x*m,ca=V/n,ba=Math.abs(n);k=(8.881784197001252E-16*(Math.abs(k*Q)+Math.abs(x*m))*ba+p*Math.abs(V))/(n*n)+2.220446049250313E-16*Math.abs(ca);if(ca<-k||ca>1+k)return e;m=g*Q-x*h;k=m/n;g=(8.881784197001252E-16*(Math.abs(g*Q)+Math.abs(x*h))*ba+p*Math.abs(m))/(n*n)+2.220446049250313E-16*Math.abs(k);if(k<-g||k>1+g)return e;ca=f.L.Yj(ca,0,1);g=f.L.Yj(k,0,1);h=a.cc(ca);n=b.cc(g);p=new f.b;p.tc(h,
n);if(p.length()>d&&(p.add(h,n),p.scale(.5),ca=a.ae(p,!1),g=b.ae(p,!1),a=a.cc(ca),b=b.cc(g),a.sub(b),a.length()>d))return e;e.ka(ca,g);return e};c.WN=function(a,b,d,e){var g=0;if(a.ra==b.ra&&a.na==b.na||a.ra==b.pa&&a.na==b.ma)if(g++,!e)return 1;if(a.pa==b.ra&&a.ma==b.na||a.pa==b.pa&&a.ma==b.ma){g++;if(2==g)return 2;if(!e)return 1}return b.Ci(a.ra,a.na,d)||b.Ci(a.pa,a.ma,d)||a.Ci(b.ra,b.na,d)||a.Ci(b.pa,b.ma,d)?1:e&&0!=g?0:0==c.VN(a,b)?0:1};c.Dy=function(a,b,d,e,g,h){var k=0,m=a.Kp(b.ra,b.na,h,!1),
n=a.Kp(b.pa,b.ma,h,!1),p=b.Kp(a.ra,a.na,h,!1),x=b.Kp(a.pa,a.ma,h,!1);isNaN(m)||(null!=e&&(e[k]=m),null!=g&&(g[k]=0),null!=d&&(d[k]=f.b.construct(b.ra,b.na)),k++);isNaN(n)||(null!=e&&(e[k]=n),null!=g&&(g[k]=1),null!=d&&(d[k]=f.b.construct(b.pa,b.ma)),k++);2==k||isNaN(p)||0==m&&0==p||0==n&&1==p||(null!=e&&(e[k]=0),null!=g&&(g[k]=p),null!=d&&(d[k]=f.b.construct(a.ra,a.na)),k++);2==k||isNaN(x)||1==m&&0==x||1==n&&1==x||(null!=e&&(e[k]=1),null!=g&&(g[k]=x),null!=d&&(d[k]=f.b.construct(b.pa,b.ma)),k++);
if(0<k)return 2==k&&null!=e&&e[0]>e[1]&&(a=e[0],e[0]=e[1],e[1]=a,null!=g&&(e=g[0],g[0]=g[1],g[1]=e),null!=d&&(g=f.b.construct(d[0].x,d[0].y),d[0]=d[1],d[1]=g)),k;k=c.TN(a,b,h);if(isNaN(k.x))return 0;null!=d&&(d[0]=a.cc(k.x));null!=e&&(e[0]=k.x);null!=g&&(g[0]=k.y);return 1};c.prototype.QG=function(){return 0};c.prototype.Hp=function(){};c.prototype.toString=function(){return"Line: ["+this.ra.toString()+", "+this.na.toString()+", "+this.pa.toString()+", "+this.ma.toString()+"]"};return c}(f.zD);f.zb=
R})(fa||(fa={}));(function(f){var R=function(){function l(){this.Wm=[];this.ya=-1}l.prototype.Ea=function(){return this.ya};l.prototype.next=function(){if(null!=this.Wm&&0!=this.Wm.length){this.ya++;var c=this.Wm[0];this.Wm=1>=this.Wm.length?[]:this.Wm.slice(1);return c}return this.Wm=null};l.prototype.FZ=function(c){this.Wm.push(c)};l.prototype.xe=function(){};return l}();f.qM=R})(fa||(fa={}));(function(f){(function(l){l[l.enumFillRuleOddEven=0]="enumFillRuleOddEven";l[l.enumFillRuleWinding=1]="enumFillRuleWinding"})(f.$M||
(f.$M={}));var R=function(l){function c(a,b){var d=l.call(this)||this;d.Gf=!1;d.Yq=null;d.Lq=0;d.Kq=0;d.Ej=null;d.Sg=!1;d.kb=null;d.jb=null;d.af=null;d.Nj=null;d.Wd=null;d.Mq=0;d.Pa=0;d.Qq=0;if(void 0===b)d.Gf=a,d.Sg=!1,d.Mq=0,d.Lq=0,d.Kq=0,d.sa=0,d.description=f.ke.ug();else{if(null==b)throw f.f.I();d.Gf=a;d.Sg=!1;d.Mq=0;d.Lq=0;d.Kq=0;d.sa=0;d.description=b}d.Ej=null;d.Pa=0;return d}Fa(c,l);c.prototype.Fm=function(){return 0<this.Mq};c.prototype.Cy=function(){this.vc();null==this.Yq?this.Yq=new f.Ra(this.description):
this.Yq.rg(this.description)};c.prototype.Zx=function(a,b){var d=new f.b;d.x=a;d.y=b;this.uu(d)};c.prototype.uu=function(a){this.Cy();this.Yq.nb(a);this.Sg=!0};c.prototype.xf=function(a){if(a.u())throw f.f.I();this.Tl(a.description);this.Cy();a.copyTo(this.Yq);this.Sg=!0};c.prototype.xy=function(){var a=1;this.Sg&&(this.Cy(),null==this.kb?(this.kb=f.Xc.Sh(2),this.kb.write(0,0),this.jb=f.Xc.ns(2,0)):(this.kb.resize(this.kb.size+1,0),this.jb.resize(this.jb.size+1,0)),this.Gf&&this.jb.write(this.jb.size-
2,1),a++);var b=this.sa;this.kb.write(this.kb.size-1,this.sa+a);this.bl(b+a);this.jb.write(this.kb.size-1,0);this.Sg&&(this.qu(b,this.Yq),this.Sg=!1)};c.prototype.Cj=function(a,b){this.xy();this.nb(this.sa-1,a,b)};c.prototype.Ii=function(a){this.xy();this.nb(this.sa-1,a)};c.prototype.lineTo=function(a){this.xy();this.qu(this.sa-1,a)};c.prototype.VV=function(a){this.vc();if(this.Gf)throw f.f.za();var b=this.$();if(a>b)throw f.f.za();if(this.Lb(a)){if(null==this.jb)throw f.f.za();var d=this.sa,e=this.ua(a),
g=this.zc(a);this.bl(this.sa+1);this.rc();for(var h=0,k=this.description.Ca;h<k;h++)if(null!=this.va[h]){var m=f.oa.Sa(this.description.Jd(h));this.va[h].fo(m*g,this.va[h],m*e,m,!0,1,m*d)}for(;b>a;b--)d=this.kb.read(b),this.kb.write(b,d+1);this.jb.uF(a,1)}};c.prototype.Up=function(){this.xu();if(void 0===a){this.Sg=!1;var a=this.$()-1}var b=this.jb.read(a);this.jb.write(a,b|1);null!=this.af&&(a=this.zc(a)-1,this.af.write(a,1),this.Nj.write(a,-1))};c.c0=function(a){return c.eO[a]};c.prototype.Lb=function(a){return 0!=
(this.jb.read(a)&1)};c.prototype.ho=function(a){if(this.Lb(a))return!0;var b=this.ua(a);a=this.zc(a)-1;if(b>a)return!1;b=this.xa(b);a=this.xa(a);return b.qb(a)};c.prototype.Qs=function(a){return 0!=(this.jb.read(a)&2)};c.prototype.$b=function(a,b){this.Tl(a.description);if(322==a.F()){var d=new f.Ra;if(b||this.u())a.jp(d),this.xf(d);a.hp(d);this.lineTo(d)}else throw f.f.za();};c.prototype.Np=function(a){var b=0==this.sa;this.Zx(a.o,a.A);this.Cj(a.o,a.B);this.Cj(a.v,a.B);this.Cj(a.v,a.A);this.Up();
this.Sg=!1;b&&this.Vf(256,!1)};c.prototype.bd=function(a,b){if(!a.u()){for(var d=0==this.sa,e=new f.Ra(this.description),g=0;4>g;g++)a.Pf(b?4-g-1:g,e),0==g?this.xf(e):this.lineTo(e);this.Up();this.Sg=!1;d&&!b&&this.Vf(256,!1)}};c.prototype.add=function(a,b){for(var d=0;d<a.$();d++)this.addPath(a,d,!b)};c.prototype.addPath=function(a,b,d){this.Ef(-1,a,b,d)};c.prototype.dl=function(a,b){this.pA(a,b)};c.prototype.ds=function(a,b,d,e,g){g||0!=this.$()||(g=!0);0>b&&(b=a.$()-1);if(b>=a.$()||0>d||0>e||e>
a.Zv(b))throw f.f.Y("index out of bounds");if(0!=e){var h=a.Lb(b)&&d+e==a.Zv(b);if(!h||1!=e){this.Sg=!1;this.Tl(a.description);d=a.ua(b)+d+1;g&&(e++,d--);h&&e--;h=this.sa;this.bl(this.sa+e);this.rc();if(g){if(0==e)return;this.kb.add(this.sa);g=a.jb.read(b);g&=-5;this.Gf&&(g|=1);this.jb.write(this.jb.size-1,g);this.jb.add(0)}else this.kb.write(this.jb.size-1,this.sa);g=0;for(var k=this.description.Ca;g<k;g++){var m=this.description.jd(g),n=f.oa.Sa(m),p=a.description.Yf(m);0>p||null==a.va[p]?this.va[g].Gm(n*
h,f.oa.me(m),e*n,n*h):this.va[g].fo(n*h,a.va[p],n*d,e*n,!0,n,n*h)}if(this.Fm())throw f.f.za();if(a.Qs(b))throw f.f.za();this.Oc(1993)}}};c.prototype.sK=function(){for(var a=0,b=this.$();a<b;a++)this.kY(a)};c.prototype.kY=function(a){this.rc();if(a>=this.$())throw f.f.I();var b=this.ua(a),d=this.Ha(a);a=this.Lb(a)?1:0;for(var e=0,g=this.description.Ca;e<g;e++)if(null!=this.va[e]){var h=f.oa.Sa(this.description.Jd(e));this.va[e].wi(h*(b+a),h*(d-a),h)}this.Oc(1993)};c.prototype.sr=function(a){this.rc();
var b=this.$();0>a&&(a=b-1);if(a>=b)throw f.f.I();for(var d=this.ua(a),e=this.Ha(a),g=0,h=this.description.Ca;g<h;g++)if(null!=this.va[g]){var k=f.oa.Sa(this.description.Jd(g));this.va[g].Xn(k*d,k*e,k*this.sa)}for(d=a+1;d<=b;d++)g=this.kb.read(d),this.kb.write(d-1,g-e);if(null==this.jb)for(d=a+1;d<=b;d++)a=this.jb.read(d),this.jb.write(d-1,a);this.kb.resize(b);this.jb.resize(b);this.sa-=e;this.Vg-=e;this.Oc(1993)};c.prototype.Ef=function(a,b,d,e){if(b==this)throw f.f.I();if(d>=b.$())throw f.f.I();
var g=this.$();if(a>g)throw f.f.I();0>a&&(a=g);0>d&&(d=b.$()-1);this.Sg=!1;this.Tl(b.description);b.rc();var h=b.ua(d),k=b.Ha(d),m=this.sa,n=b.Lb(d)&&!e?1:0;this.bl(this.sa+k);this.rc();for(var p=a<g?this.ua(a):m,x=0,Q=this.description.Ca;x<Q;x++){var V=this.description.Jd(x),ca=b.description.Yf(V),ba=f.oa.Sa(V);0<=ca&&null!=b.va[ca]?(0!=n&&this.va[x].fo(p*ba,b.va[ca],ba*h,ba,!0,ba,ba*m),this.va[x].fo((p+n)*ba,b.va[ca],ba*(h+n),ba*(k-n),e,ba,ba*(m+n))):this.va[x].Gm(p*ba,f.oa.me(V),ba*k,ba*m)}this.kb.add(m+
k);for(e=g;e>=a+1;e--)h=this.kb.read(e-1),this.kb.write(e,h+k);b.Qs(d);this.jb.add(0);for(e=g-1;e>=a+1;e--)g=this.jb.read(e),g&=-5,this.jb.write(e+1,g);g=b.ZS().read(d);g&=-5;this.Gf&&(g|=1);this.jb.write(a,g)};c.prototype.pA=function(a,b){var d=-1,e=this.$();if(d>e)throw f.f.I();0>d&&(d=e);this.Sg=!1;var g=this.sa;this.bl(this.sa+b);this.rc();var h=d<e?this.ua(d):g;if(null!=a)this.va[0].qA(2*h,a,0,b,!0,2*g);else{var k=f.oa.me(0);this.va[0].Gm(2*h,k,2*b,2*g)}a=1;for(var m=this.description.Ca;a<m;a++){k=
this.description.jd(a);var n=f.oa.Sa(k);k=f.oa.me(k);this.va[a].Gm(h*n,k,n*b,n*g)}this.kb.add(this.sa);for(g=e;g>=d+1;g--)h=this.kb.read(g-1),this.kb.write(g,h+b);this.jb.add(0);for(g=e-1;g>=d+1;g--)b=this.jb.read(g),b&=-5,this.jb.write(g+1,b);this.Gf&&this.jb.write(d,1)};c.prototype.cH=function(a,b,d){var e=-1;0>a&&(a=this.$());if(a>this.$()||e>this.Ha(a)||d>b.length)throw f.f.Y("index out of bounds");if(0!=d){a==this.$()&&(this.kb.add(this.sa),this.Gf?this.jb.add(1):this.jb.add(0));0>e&&(e=this.Ha(a));
this.rc();var g=this.sa;this.bl(this.sa+d);this.rc();for(var h=0,k=this.description.Ca;h<k;h++){var m=this.description.Jd(h),n=f.oa.Sa(m);this.va[h].Bu(n*(this.ua(a)+e+d),(g-this.ua(a)-e)*n,this.va[h],n*(this.ua(a)+e),!0,n);0==h?this.va[h].eD(n*(this.ua(a)+e),d,b,0,!0):this.va[h].Xj(f.oa.me(m),(this.ua(a)+e)*n,d*n)}this.Fm()&&(this.af.Bu(this.ua(a)+e+d,g-this.ua(a)-e,this.af,this.ua(a)+e,!0,1),this.Nj.Bu(this.ua(a)+e+d,g-this.ua(a)-e,this.Nj,this.ua(a)+e,!0,1),this.af.Xj(1,this.ua(a)+e,d),this.Nj.Xj(-1,
this.ua(a)+e,d));a+=1;for(b=this.$();a<=b;a++)this.kb.write(a,this.kb.read(a)+d)}};c.prototype.Ff=function(a,b,d){var e=this.$();0>a&&(a=this.$());if(a>=e||b>this.Ha(a))throw f.f.Y("index out of bounds");a==this.$()&&(this.kb.add(this.sa),this.Gf?this.jb.add(1):this.jb.add(0));0>b&&(b=this.Ha(a));var g=this.sa;this.bl(this.sa+1);this.rc();var h=this.ua(a);this.va[0].Gi(2*(h+b),d,2*g);d=1;for(var k=this.description.Ca;d<k;d++){var m=this.description.Jd(d),n=f.oa.Sa(m);this.va[d].Gm(n*(h+b),f.oa.me(m),
n,n*g)}for(a+=1;a<=e;a++)this.kb.write(a,this.kb.read(a)+1)};c.prototype.mC=function(a,b){var d=this.$();0>a&&(a=d-1);if(a>=d||b>=this.Ha(a))throw f.f.Y("index out of bounds");this.rc();var e=this.ua(a);0>b&&(b=this.Ha(a)-1);b=e+b;e=0;for(var g=this.description.Ca;e<g;e++)if(null!=this.va[e]){var h=f.oa.Sa(this.description.Jd(e));this.va[e].Xn(h*b,h,h*this.sa)}for(;d>=a+1;d--)b=this.kb.read(d),this.kb.write(d,b-1);this.sa--;this.Vg--;this.Oc(1993)};c.prototype.gF=function(a,b,d,e){a=this.ua(a)+b;
d=this.ua(d)+e;if(d<a||0>a||d>this.D()-1)throw f.f.I();e=this.Ba();b=0;e.Rb(a);do{for(;e.Aa();){a=e.aa();if(e.wb()==d)break;a=a.Pb();b+=a}if(e.wb()==d)break}while(e.Ta());return b};c.prototype.oP=function(a,b,d){b=this.ua(a)+b;d=this.ua(a)+d;if(0>b||d>this.D()-1)throw f.f.I();var e=this.Ba();if(b>d){if(!this.Lb(a))throw f.f.I("cannot iterate across an open path");e.tC()}var g=a=0;e.Rb(b);do g+=a,a=e.aa().Pb();while(e.wb()!=d);return g};c.prototype.sg=function(){return f.yi.qm(this,null)};c.prototype.eU=
function(a,b,d){for(var e=a;e<d-1;e++)if(this.Lb(e))throw f.f.I("cannot interpolate across closed paths");e=this.description.Ca;if(1!=e){var g=this.gF(a,b,d,void 0);if(0!=g)for(var h=1;h<e;h++){var k=this.description.jd(h);if(2!=f.oa.Uz(k))for(var m=f.oa.Sa(k),n=0;n<m;n++)this.gU(k,a,b,d,g,n)}}};c.prototype.dU=function(a,b,d){var e=this.description.Ca;if(1!=e){var g=this.oP(a,b,d);if(0!=g)for(var h=1;h<e;h++){var k=this.description.jd(h);if(2!=f.oa.Uz(k))for(var m=f.oa.Sa(k),n=0;n<m;n++)this.fU(k,
a,b,d,g,n)}}};c.prototype.gU=function(a,b,d,e,g,h){var k=this.Ba(),m=this.ua(b)+d;e=this.ua(e)+void 0;b=this.Rc(a,m,h);d=this.Rc(a,e,h);var n=b,p=0;k.Rb(m);do if(k.Aa()){k.aa();if(k.wb()==e)break;this.setAttribute(a,k.wb(),h,n);k.ti();do{m=k.aa();if(k.nk()==e)return;m=m.Pb();p+=m;n=f.Tb.Aq(b,d,p/g);k.io()||this.setAttribute(a,k.nk(),h,n)}while(k.Aa())}while(k.Ta())};c.prototype.fU=function(a,b,d,e,g,h){var k=this.Ba(),m=this.ua(b)+d;b=this.ua(b)+e;if(b!=m){e=this.Rc(a,m,h);d=this.Rc(a,b,h);var n=
0;k.Rb(m);k.tC();m=e;do{var p=k.aa();this.setAttribute(a,k.wb(),h,m);m=p.Pb();n+=m;m=f.Tb.Aq(e,d,n/g)}while(k.nk()!=b)}};c.prototype.Ka=function(){this.Mq=0;this.Sg=!1;this.Wd=this.af=this.Nj=this.jb=this.kb=null;this.hE()};c.prototype.Qc=function(a){a instanceof f.xd?this.KE(a,-1):this.HO(a)};c.prototype.KE=function(a,b){if(!this.u()&&!a.xq()){this.rc();var d=this.va[0],e=new f.b,g=new f.b;if(0>b){var h=this.Fm(),k=0;b=this.sa}else h=this.Qs(b),k=this.ua(b),b=this.zc(b);for(;k<b;k++){e.x=d.read(2*
k);e.y=d.read(2*k+1);if(h){var m=this.Nj.read(k);if(0<=m)switch(this.af.read(k)&7){case 2:g.x=this.Wd.read(m);g.y=this.Wd.read(m+1);a.Zj(g,g);this.Wd.write(m,g.x);this.Wd.write(m+1,g.y);g.x=this.Wd.read(m+3);g.y=this.Wd.read(m+4);a.Zj(g,g);this.Wd.write(m+3,g.x);this.Wd.write(m+4,g.y);break;case 4:throw f.f.za();}}a.Zj(e,e);d.write(2*k,e.x);d.write(2*k+1,e.y)}this.Oc(1993)}};c.prototype.HO=function(a){if(!this.u()){this.le(1);this.rc();for(var b=this.va[0],d=this.va[1],e=new f.Id,g=new f.Id,h=this.Fm(),
k=0;k<this.sa;k++){e.x=b.read(2*k);e.y=b.read(2*k+1);e.z=d.read(k);if(h){var m=this.Nj.read(k);if(0<=m)switch(this.af.read(k)&7){case 2:g.x=this.Wd.read(m);g.y=this.Wd.read(m+1);g.z=this.Wd.read(m+2);g=a.vp(g);this.Wd.write(m,g.x);this.Wd.write(m+1,g.y);this.Wd.write(m+1,g.z);g.x=this.Wd.read(m+3);g.y=this.Wd.read(m+4);g.z=this.Wd.read(m+5);g=a.vp(g);this.Wd.write(m+3,g.x);this.Wd.write(m+4,g.y);this.Wd.write(m+5,g.z);break;case 4:throw f.f.za();}}e=a.vp(e);b.write(2*k,e.x);b.write(2*k+1,e.y);d.write(k,
e.z)}this.Oc(1993)}};c.prototype.Oy=function(){null==this.kb&&(this.kb=f.Xc.Sh(1,0),this.jb=f.Xc.ns(1,0));null!=this.af&&(this.af.resize(this.Vg,1),this.Nj.resize(this.Vg,-1))};c.prototype.Hp=function(a){a.Sg=!1;a.Mq=this.Mq;a.Qq=this.Qq;a.kb=null!=this.kb?f.ha.Vn(this.kb):null;a.jb=null!=this.jb?f.Gn.Vn(this.jb):null;a.Nj=null!=this.Nj?f.ha.Vn(this.Nj):null;a.af=null!=this.af?f.Gn.Vn(this.af):null;a.Wd=null!=this.Wd?f.ie.Vn(this.Wd):null;a.Lq=this.Lq;a.Kq=this.Kq;a.Ej=this.ek(1024)?null:this.Ej};
c.prototype.Pb=function(){if(!this.ek(512))return this.Lq;for(var a=this.Ba(),b=new f.ky(0);a.Ta();)for(;a.Aa();)b.add(a.aa().Pb());this.Lq=b.Dm();this.Vf(512,!1);return b.Dm()};c.prototype.Ib=function(a){if(a==this)return!0;if(!(a instanceof c&&l.prototype.Ib.call(this,a)))return!1;var b=this.$();return b!=a.$()||null!=this.kb&&!this.kb.Ib(a.kb,0,b+1)||this.Qq!=a.Qq||null!=this.jb&&!this.jb.Ib(a.jb,0,b)?!1:l.prototype.Ib.call(this,a)};c.prototype.Ba=function(){return new f.fN(this)};c.prototype.Ny=
function(a){l.prototype.Ny.call(this,a);if(this.Fm())for(a=this.Ba();a.Ta();)for(;a.Aa();)break};c.prototype.Tn=function(a,b){l.prototype.Tn.call(this,a,b);if(this.Fm())for(a=this.Ba();a.Ta();)for(;a.Aa();)break};c.prototype.Gy=function(){this.sa=null==this.kb||0==this.kb.size?0:this.kb.read(this.kb.size-1)};c.prototype.Pe=function(){if(!this.Gf)return 0;this.cv();return this.Kq};c.prototype.kw=function(a){if(!this.Gf)return!1;if(!this.ek(8))return 0!=(this.jb.read(a)&4);this.cv();return 0<this.Ej.read(a)};
c.prototype.rm=function(a){if(!this.Gf)return 0;this.cv();return this.Ej.read(a)};c.prototype.cv=function(){if(this.ek(1024)){var a=this.$();null==this.Ej?this.Ej=new f.ie(a):this.Ej.size!=a&&this.Ej.resize(a);a=new f.ky(0);for(var b=new f.ky(0),d=new f.b,e=0,g=this.Ba();g.Ta();){b.reset();for(this.w(this.ua(g.Pa),d);g.Aa();)b.add(g.aa().yy(d.x,d.y));a.add(b.Dm());var h=e++;this.Ej.write(h,b.Dm())}this.Kq=a.Dm();this.Vf(1024,!1)}};c.prototype.VS=function(){if(this.Gf){this.cl();for(var a=0,b=this.$(),
d=0;d<b;d++)0!=(this.jb.read(d)&4)&&a++}};c.prototype.cl=function(){if(this.ek(8)){this.cv();var a=this.$();if(null==this.jb||this.jb.size<a)this.jb=f.Xc.ns(a+1);for(var b=1,d=0;d<a;d++){var e=this.Ej.read(d);0==d&&(b=0<e?1:-1);0<e*b?this.jb.DK(d,4):this.jb.uF(d,4)}this.Vf(8,!1)}};c.prototype.Xv=function(a){var b=this.Pa,d=this.$();if(0<=b&&b<d){if(a<this.zc(b)){if(a>=this.ua(b))return b;b--}else b++;if(0<=b&&b<d&&a>=this.ua(b)&&a<this.zc(b))return this.Pa=b}if(5>d){for(b=0;b<d;b++)if(a<this.zc(b))return this.Pa=
b;throw f.f.Y("corrupted geometry");}b=0;for(--d;d>b;){var e=b+(d-b>>1),g=this.ua(e);if(a<g)d=e-1;else if(b=this.zc(e),a>=b)b=e+1;else return this.Pa=e}return this.Pa=b};c.prototype.JS=function(a){var b=this.Va(0);this.$S();var d=this.zc(a),e=this.ua(a);a=-1;var g=new f.b,h=new f.b;g.y=-Infinity;g.x=-Infinity;for(e+=0;e<d;e++)b.mc(2*e,h),-1==g.compare(h)&&(a=e,g.K(h));return a};c.prototype.gA=function(){var a=this.D();if(!this.Gf){a-=this.$();for(var b=0,d=this.$();b<d;b++)this.Lb(b)&&a++}return a};
c.prototype.Zv=function(a){var b=this.Ha(a);this.Lb(a)||b--;return b};c.prototype.Ga=function(){return new c(this.Gf,this.description)};c.prototype.pb=function(){return this.Gf?2:1};c.prototype.F=function(){return this.Gf?1736:1607};c.prototype.$S=function(){this.xu()};c.prototype.UK=function(a){this.kb=a;this.Oc(16777215)};c.prototype.lT=function(){this.xu();return this.af};c.prototype.ZS=function(){this.xu();return this.jb};c.prototype.TK=function(a){this.jb=a;this.Oc(16777215)};c.prototype.$=function(){return null!=
this.kb?this.kb.size-1:0};c.prototype.zc=function(a){return this.kb.read(a+1)};c.prototype.Ha=function(a){return this.kb.read(a+1)-this.kb.read(a)};c.prototype.ua=function(a){return this.kb.read(a)};c.prototype.Su=function(a,b){null==this.ib&&(this.ib=new f.Yk);b=f.sy.VX(b);var d=this.ib.oi;if(null!=d)if(d.Pk<a||b>d.hT())this.ib.Ky(null);else return!0;d=f.sy.create(this,a,b);this.ib.Ky(d);return!0};c.prototype.fc=function(){var a=l.prototype.fc.call(this);if(!this.Ac()){var b=this.$();null!=this.kb&&
this.kb.Un(a,0,b+1);null!=this.jb&&this.jb.Un(a,0,b)}return a};c.prototype.KG=function(a){return null!=this.af?this.af.read(a):1};c.prototype.ec=function(a,b,d){var e=this.Xv(a);if(a==this.zc(e)-1&&!this.Lb(e))throw f.f.Y("index out of bounds");this.rc();var g=this.af,h=1;null!=g&&(h=g.read(a)&7);switch(h){case 1:b.ps();break;case 2:throw f.f.za();case 4:throw f.f.za();default:throw f.f.za();}b=b.get();d?b.rg(f.ke.ug()):b.rg(this.description);e=a==this.zc(e)-1&&this.Lb(e)?this.ua(e):a+1;g=new f.b;
this.w(a,g);b.Fc(g);this.w(e,g);b.Sc(g);if(!d)for(d=1,g=this.description.Ca;d<g;d++){h=this.description.Jd(d);for(var k=f.oa.Sa(h),m=0;m<k;m++){var n=this.Rc(h,a,m);b.Qx(h,m,n);n=this.Rc(h,e,m);b.Hx(h,m,n)}}};c.prototype.Sj=function(a,b){if(a>=this.$())throw f.f.I();if(this.u())b.Ka();else{if(this.Qs(a))throw f.f.Y("not implemented");var d=this.Va(0),e=new f.b,g=new f.g;g.Ka();var h=this.ua(a);for(a=this.zc(a);h<a;h++)d.mc(2*h,e),g.Nb(e);b.H(g)}};c.prototype.EX=function(a,b){if(a>=this.$())throw f.f.I();
if(this.u())b.Ka();else{if(this.Qs(a))throw f.f.Y("not implemented");var d=this.Va(0),e=new f.b,g=new f.g;g.Ka();var h=this.ua(a);for(a=this.zc(a);h<a;h++)d.mc(2*h,e),g.Nb(e);b.H(g)}};c.prototype.lj=function(a){null==this.ib&&(this.ib=new f.Yk);if(0==a||16>this.D())return!1;a=f.la.$E(this);this.ib.jE(a);return!0};c.prototype.oN=function(){null==this.ib&&(this.ib=new f.Yk);if(null==this.ib.To){this.ib.kE(null);var a=f.la.iP(this);this.ib.kE(a)}};c.prototype.np=function(a){this.Qq=a};c.prototype.$n=
function(){return this.Qq};c.prototype.pE=function(a){if(this==a)throw f.f.Y("MultiPathImpl.add");for(var b=this.$(),d=0;d<a.$();d++)this.addPath(a,d,!0),this.VV(b),b++};c.prototype.uP=function(a){var b=this.Xv(a),d=this.ua(b);if(d!=a){b=this.zc(b);if(a>=b||a<d)throw f.f.Y("change_ring_start_point");for(var e=0,g=this.description.Ca;e<g;e++){var h=this.description.jd(e);h=f.oa.Sa(h);this.va[e].rotate(d*h,a*h,b*h)}}};c.eO=[0,0,6,0,8,0];return c}(f.ly);f.Zk=R})(fa||(fa={}));(function(f){var R=function(l){function c(a){var b=
l.call(this)||this;if(void 0!==a){if(null==a)throw f.f.I();b.description=a}else b.description=f.ke.ug();b.sa=0;return b}Fa(c,l);c.prototype.Ga=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.sa+1);this.Hh(this.sa-1,a)};c.prototype.gv=function(a,b){this.resize(this.sa+1);var d=new f.b;d.ka(a,b);this.nb(this.sa-1,d)};c.prototype.yd=function(a,b,d){d=0>d?a.D():d;if(0>b||b>a.D()||d<b)throw f.f.I();if(b!=d){this.Tl(a.description);d-=b;var e=this.sa;this.resize(this.sa+
d);this.rc();for(var g=0,h=a.description.Ca;g<h;g++){var k=a.description.Jd(g),m=f.oa.Sa(k),n=this.Va(k);k=a.Va(k);n.fo(e*m,k,b*m,d*m,!0,1,e*m)}}};c.prototype.tE=function(a,b){var d=a.length;b=0>b?d:b;if(0>d||0>b)throw f.f.I();if(0!=b){d=b-0;b=this.sa;this.resize(this.sa+d);for(var e=0;e<d;e++)this.nb(b+e,a[0+e])}};c.prototype.mC=function(a){if(0>a||a>=this.D())throw f.f.Y("index out of bounds");this.rc();for(var b=0,d=this.description.Ca;b<d;b++)if(null!=this.va[b]){var e=f.oa.Sa(this.description.Jd(b));
this.va[b].Xn(e*a,e,e*this.sa)}this.sa--;this.Vg--;this.Oc(1993)};c.prototype.resize=function(a){this.bl(a)};c.prototype.Hp=function(){};c.prototype.Ka=function(){l.prototype.hE.call(this)};c.prototype.Qc=function(a){if(a instanceof f.xd){if(this.u())return;this.rc();for(var b=this.va[0],d=new f.b,e=0;e<this.sa;e++)d.x=b.read(2*e),d.y=b.read(2*e+1),a.Zj(d,d),b.write(2*e,d.x),b.write(2*e+1,d.y)}else{if(this.u())return;this.rc();this.le(1);this.rc();b=this.va[0];d=this.va[1];var g=new f.Id;for(e=0;e<
this.sa;e++){g.x=b.read(2*e);g.y=b.read(2*e+1);g.z=d.read(e);var h=a.vp(g);b.write(2*e,h.x);b.write(2*e+1,h.y);d.write(e,h.z)}}this.Oc(1993)};c.prototype.pb=function(){return 0};c.prototype.F=function(){return 550};c.prototype.Pe=function(){return 0};c.prototype.Pb=function(){return 0};c.prototype.Ib=function(a){return a==this?!0:a instanceof c?l.prototype.Ib.call(this,a):!1};c.prototype.yO=function(a,b){var d=a.length;b=0>b?d:b;if(0>d||0>b)throw f.f.I();if(0!=b){d=b-0;if(0!=(d&1))throw f.f.I();b=
this.sa;this.jY(this.sa+d/2);this.va[0].cD(2*b,d,a,0,!0)}};c.prototype.jY=function(a){var b=this.sa;this.bl(a);if(this.sa>b){a=1;for(var d=this.description.Ca;a<d;a++){var e=this.description.jd(a),g=f.oa.Sa(e);this.va[a].Gm(g*b,f.oa.me(e),g*(this.sa-b),g*b)}}};c.prototype.CX=function(a,b){var d=this.sa;d=Math.min(d,b+1E3);if(0>b||b>=this.sa||d<b||1E3!=a.length)throw f.f.I();var e=this.Va(0),g=d-b,h=[];e.hu(2*b,2*g,h,0,!0);for(b=0;b<g;b++)a[b]=f.b.construct(h[2*b],h[2*b+1]);return d};c.prototype.Gy=
function(){};c.prototype.Oy=function(){};c.prototype.Su=function(){return!1};c.prototype.lj=function(){return!1};c.prototype.sg=function(){return null};return c}(f.ly);f.Hd=R})(fa||(fa={}));(function(f){(function(l){l[l.NotDetermined=0]="NotDetermined";l[l.Structure=1]="Structure";l[l.DegenerateSegments=2]="DegenerateSegments";l[l.Clustering=3]="Clustering";l[l.Cracking=4]="Cracking";l[l.CrossOver=5]="CrossOver";l[l.RingOrientation=6]="RingOrientation";l[l.RingOrder=7]="RingOrder";l[l.OGCPolylineSelfTangency=
8]="OGCPolylineSelfTangency";l[l.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";l[l.OGCDisconnectedInterior=10]="OGCDisconnectedInterior"})(f.sM||(f.sM={}));var R=function(){function l(c,a,b){void 0===c?(this.pi=0,this.Rl=this.Ql=-1):(this.pi=c,this.Ql=a,this.Rl=b)}l.prototype.Or=function(c){this.pi=c.pi;this.Ql=c.Ql;this.Rl=c.Rl};return l}();f.Od=R})(fa||(fa={}));(function(f){f.L=function(){function R(){}R.assert=function(l){if(!1===l)throw f.f.PL();};R.fL=function(l){return isNaN(l)?NaN:0===
l?l:0<l?1:-1};R.kv=function(l){var c;void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=R.Xf(2,c);return a};R.Xf=function(l,c){void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=c;return a};R.Gv=function(l,c){var a,b;void 0===a&&(a=0);for(void 0===b&&(b=l.length-1);a<=b;a++)l[a]=c};R.Yj=function(l,c,a){return l<c?c:l>a?a:l};R.H0=function(){return 4};R.Zh=function(l,c){var a=5381;a=void 0!==c?(c<<5)+c+(l&255):(a<<5)+a+(l&255);a=(a<<5)+a+(l>>8&255);a=(a<<5)+a+(l>>16&255);return(a<<5)+a+(l>>24&255)&2147483647};
R.Aj=function(){throw Error("Not Implemented");};R.y0=function(){return-Infinity};R.A0=function(){return Infinity};R.h0=function(){return 2147483647};R.U_=function(){return 2.220446049250313E-16};R.V_=function(){return 1.7976931348623157E308};R.MB=function(l){return R.uV(l)+12345&2147483647};R.IH=function(l){var c=32,a=l%R.vy|0,b=l/R.vy|0;if(0===(c&=63))return l;32>c?(l=a>>>c|b<<32-c,c=b>>c):(l=b>>c-32,c=0<=b?0:-1);return c*R.vy+(l>>>0)};R.uV=function(l){l|=0;return(1103495168*l|0)+(20077*l|0)|0};
R.truncate=function(l){return 0>l?-1*Math.floor(Math.abs(l)):Math.floor(l)};R.MAX_SAFE_INTEGER=Math.pow(2,53)-1;R.MIN_SAFE_INTEGER=-R.MAX_SAFE_INTEGER;R.DD=65536;R.t_=16777216;R.vy=R.DD*R.DD;return R}()})(fa||(fa={}));(function(f){(function(l){l[l.Project=0]="Project";l[l.Union=1]="Union";l[l.Difference=2]="Difference";l[l.Proximity2D=3]="Proximity2D";l[l.Relate=4]="Relate";l[l.Equals=5]="Equals";l[l.Disjoint=6]="Disjoint";l[l.Intersects=7]="Intersects";l[l.Within=8]="Within";l[l.Contains=9]="Contains";
l[l.Crosses=10]="Crosses";l[l.Touches=11]="Touches";l[l.Overlaps=12]="Overlaps";l[l.Buffer=13]="Buffer";l[l.Distance=14]="Distance";l[l.Intersection=15]="Intersection";l[l.Clip=16]="Clip";l[l.Cut=17]="Cut";l[l.DensifyByLength=18]="DensifyByLength";l[l.DensifyByAngle=19]="DensifyByAngle";l[l.LabelPoint=20]="LabelPoint";l[l.GeodesicBuffer=21]="GeodesicBuffer";l[l.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";l[l.ShapePreservingDensify=23]="ShapePreservingDensify";l[l.GeodeticLength=24]="GeodeticLength";
l[l.GeodeticArea=25]="GeodeticArea";l[l.Simplify=26]="Simplify";l[l.SimplifyOGC=27]="SimplifyOGC";l[l.Offset=28]="Offset";l[l.Generalize=29]="Generalize";l[l.SymmetricDifference=30]="SymmetricDifference";l[l.ConvexHull=31]="ConvexHull";l[l.Boundary=32]="Boundary";l[l.SimpleRelation=33]="SimpleRelation"})(f.LM||(f.LM={}));var R=function(){function l(){}l.prototype.F=function(){return null};l.prototype.Pn=function(){};l.prototype.pv=function(){return!1};l.R_=function(c){f.R.Rg(c.F())&&(c=c.ib,null!=
c&&(c.Ky(null),c.jE(null)))};return l}();f.Ne=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 13};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e,g){return a instanceof f.R?(g=new f.$c(a),this.U(g,b,[d],!1,e).next()):!0===e?(d=new f.iD(a,b,d,!1,g),f.Jh.local().U(d,b,g)):new f.iD(a,b,d,!1,g)};c.instance=null;return c}(f.Ne);f.hD=R})(fa||(fa=
{}));(function(f){var R=function(){function l(c,a,b,d,e){this.ya=-1;this.Vd=c;this.KA=a;this.kt=b;this.OU=new f.g;this.OU.Ka();this.xo=-1;this.Vb=e}l.prototype.next=function(){for(var c;null!=(c=this.Vd.next());)return this.ya=this.Vd.Ea(),this.xo+1<this.kt.length&&this.xo++,this.buffer(c,this.kt[this.xo]);return null};l.prototype.Ea=function(){return this.ya};l.prototype.buffer=function(c,a){return f.QL.buffer(c,a,this.KA,NaN,96,this.Vb)};l.prototype.xe=function(){};return l}();f.iD=R})(fa||(fa=
{}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 16};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d,e).next()):new f.vM(a,b,d,e)};c.instance=null;return c}(f.Ne);f.uM=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b){this.ya=-1;if(null==c)throw f.f.I();this.X=a;this.Fk=c;this.qa=f.la.Qd(b,
a,!1)}l.prototype.next=function(){var c;return null!=(c=this.Fk.next())?(this.ya=this.Fk.Ea(),f.Yd.clip(c,this.X,this.qa,0)):null};l.prototype.Ea=function(){return this.ya};l.prototype.xe=function(){};return l}();f.vM=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 31};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d){return a instanceof f.R?f.kD.dF(a):
new f.kD(b,a,d)};c.instance=null;return c}(f.Ne);f.jD=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b){this.dB=new f.Fu;this.ya=-1;if(null==a)throw f.f.I();this.QH=c;this.Jc=!1;this.Fk=a;this.Vb=b}l.prototype.next=function(){if(this.QH){if(!this.Jc){var c=this.mP(this.Fk);this.Jc=!0;return c}return null}if(!this.Jc){c=this.Fk.next();if(null!=c)return this.ya=this.Fk.Ea(),l.dF(c);this.Jc=!0}return null};l.prototype.Ea=function(){return this.ya};l.prototype.mP=function(c){for(var a;null!=
(a=c.next());)this.dB.Bb(a);return this.dB.qS()};l.prototype.xe=function(){if(!this.Jc){if(!this.QH)throw f.f.Y("Invalid call for non merging convex hull.");var c=this.Fk.next();if(null!=c)this.dB.Bb(c);else throw f.f.Y("Expects a non-null geometry.");}};l.dF=function(c){if(l.oU(c))return c;var a=c.F();if(f.Zk.Ic(a))return a=new f.Oa(c.description),a.$b(c,!0),a;if(550==a&&2==c.D()){var b=new f.Ra;a=new f.Oa(c.description);c.ne(0,b);a.xf(b);c.ne(1,b);a.lineTo(b);return a}return f.Fu.aQ(c)};l.oU=function(c){if(c.u())return!0;
var a=c.F();return 33==a||197==a?!0:f.Zk.Ic(a)?!1:550==a?1==c.D()?!0:!1:1607==a?1==c.$()&&2>=c.D()?!0:!1:1!=c.$()?!1:2>=c.D()?!0:f.Fu.vH(c,0)};return l}();f.kD=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 17};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e,g){return new f.xM(a,b,d,e,g)};c.instance=null;return c}(f.Ne);f.wM=R})(fa||(fa={}));
(function(f){var R=function(){function l(c,a,b,d,e){this.bg=null;if(null==a||null==b)throw f.f.Y("invalid argument");this.LU=c;this.YA=a;this.ZH=b;c=f.la.Tv(a,b);this.qa=f.la.Qd(d,c,!0);this.YH=-1;this.md=e}l.prototype.Ea=function(){return 0};l.prototype.next=function(){this.cS();return++this.YH<this.bg.length?this.bg[this.YH]:null};l.prototype.cS=function(){if(null==this.bg)switch(this.bg=[],this.YA.F()){case 1607:this.eS();break;case 1736:this.dS()}};l.prototype.eS=function(){var c=new f.Oa,a=new f.Oa,
b=new f.Oa;this.bg.push(c);this.bg.push(a);var d=[];f.UL.SL(this.LU,this.YA,this.ZH,this.qa,d,this.md);for(var e=0;e<d.length;e++){var g=d[e];0==g.fx?c.add(g.W,!1):1==g.fx||2==g.fx?a.add(g.W,!1):3==g.fx?this.bg.push(g.W):b.add(g.W,!1)}b.u()||c.u()&&a.u()&&!(3<=this.bg.length)||this.bg.push(b);c.u()&&a.u()&&3>this.bg.length&&(this.bg.length=0)};l.prototype.dS=function(){var c=new f.ha(0),a=new f.Yc,b=a.NF(),d=a.Bb(this.YA),e=a.Bb(this.ZH),g=new f.pg;try{g.yr(a,this.qa,this.md);g.jl(b,d,e,c);var h=
a.ye(d),k=new f.Fa,m=new f.Fa;this.bg.length=0;this.bg.push(k);this.bg.push(m);for(d=0;d<c.size;d++){var n=new f.Yc,p=n.Bb(h),x=n.Bb(a.ye(c.get(d)));g.xr(n,this.md);var Q=g.gw(p,x),V=n.ye(Q);if(!V.u()){var ca=a.wG(c.get(d),b);2==ca?k.add(V,!1):1==ca?m.add(V,!1):this.bg.push(V);var ba=new f.Yc;p=ba.Bb(h);x=ba.Bb(a.ye(c.get(d)));g.xr(ba,this.md);h=ba.ye(g.tm(p,x))}}!h.u()&&0<c.size&&this.bg.push(h);k.u()&&m.u()&&(this.bg.length=0)}finally{g.ah()}};l.prototype.xe=function(){};return l}();f.xM=R})(fa||
(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d){if(a instanceof f.R)return a=new f.$c(a),this.U(a,b,d).next();if(0>=b)throw f.f.I();return new f.yM(a,b,d)};c.instance=null;return c}(f.Ne);f.im=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a){this.ya=-1;this.Vd=c;this.xt=a}l.prototype.Ea=
function(){return this.ya};l.prototype.next=function(){var c;return null!=(c=this.Vd.next())?(this.ya=this.Vd.Ea(),this.YQ(c)):null};l.prototype.YQ=function(c){if(c.u()||1>c.pb())return c;var a=c.F();if(1736==a||1607==a)return this.sz(c);if(f.R.Ic(a))return this.$Q(c);if(197==a)return this.ZQ(c);throw f.f.za();};l.prototype.$Q=function(c){if(c.Pb()<=this.xt)return c;var a=new f.Oa(c.description);a.$b(c,!0);return this.sz(a)};l.prototype.ZQ=function(c){var a=new f.Fa(c.description);a.bd(c,!1);var b=
new f.g;c.s(b);c=b.ca();return b.N()<=this.xt&&c<=this.xt?a:this.sz(a)};l.prototype.sz=function(c){for(var a=c.Ga(),b=c.Ba();b.Ta();)for(var d=!0;b.Aa();){var e=b.aa();if(322!=e.F())throw f.f.Y("not implemented");var g=b.io(),h=e.Pb();if(h>this.xt){var k=Math.ceil(h/this.xt);h=new f.Ra(c.description);d&&(e.jp(h),a.xf(h));var m=d=1/k,n=0;for(--k;n<k;n++)e.zx(m,h),a.lineTo(h),m+=d;g?a.Up():(e.hp(h),a.lineTo(h))}else g?a.Up():a.$b(e,d);d=!1}return a};l.prototype.xe=function(){};return l}();f.yM=R})(fa||
(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.F=function(){return 2};c.prototype.U=function(a,b,d,e){return a instanceof f.R?(a=new f.$c(a),b=new f.$c(b),this.U(a,b,d,e).next()):new f.zM(a,b,d,e)};c.tm=function(a,b,d,e){if(a.u()||b.u())return a;var g=a.pb(),h=b.pb();if(g>h)return a;var k=a.F(),m=b.F(),n=new f.g,p=new f.g,x=new f.g;a.s(n);b.s(p);x.H(n);
x.Nb(p);x=f.la.Qd(d,x,!0);var Q=x*Math.sqrt(2)*1.00001,V=new f.g;V.H(n);V.O(Q,Q);if(!V.isIntersecting(p))return a;if(1==g&&2==h)return c.cX(a,b,m,d,e);if(33==k)switch(f.Zk.Ic(m)?(d=new f.Oa(b.description),d.$b(b,!0)):d=b,m){case 1736:return c.oW(a,d,x);case 1607:return c.pW(a,d,x);case 550:return c.mW(a,d,x);case 197:return c.lW(a,d,x);case 33:return c.nW(a,d,x);default:throw f.f.I();}else if(550==k)switch(m){case 1736:return c.HV(a,b,x);case 197:return c.FV(a,b,x);case 33:return c.GV(a,b,x)}return f.pg.tm(a,
b,d,e)};c.oW=function(a,b,d){return 0==f.Zc.wH(b,a,d)?a:a.Ga()};c.pW=function(a,b,d){var e=a.w();b=b.Ba();for(var g=d*Math.sqrt(2)*1.00001,h=g*g,k=new f.g;b.Ta();)for(;b.Aa();){var m=b.aa();m.s(k);k.O(g,g);if(k.contains(e)){if(m.Zs(e,d))return a.Ga();var n=m.ac();if(f.b.oc(e,n)<=h)return a.Ga();n=m.wc();if(f.b.oc(e,n)<=h)return a.Ga()}}return a};c.mW=function(a,b,d){var e=b.Va(0);b=b.D();var g=a.w(),h=new f.b;d=d*Math.sqrt(2)*1.00001;d*=d;for(var k=0;k<b;k++)if(e.mc(2*k,h),f.b.oc(h,g)<=d)return a.Ga();
return a};c.lW=function(a,b,d){var e=new f.g;b.s(e);e.O(d,d);b=a.w();return e.contains(b)?a.Ga():a};c.nW=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.w();b=b.w();return f.b.oc(e,b)<=d?a.Ga():a};c.HV=function(a,b,d){var e=new f.g;b.s(e);e.O(d,d);for(var g=a.D(),h=!1,k=[],m=0;m<g;m++)k[m]=!1;var n=new f.b;for(m=0;m<g;m++)a.w(m,n),e.contains(n)&&0!=f.Zc.Td(b,n,d)&&(h=!0,k[m]=!0);if(!h)return a;b=a.Ga();for(m=0;m<g;m++)k[m]||b.yd(a,m,m+1);return b};c.FV=function(a,b,d){var e=new f.g;b.s(e);e.O(d,
d);b=a.D();var g=!1;d=[];for(var h=0;h<b;h++)d[h]=!1;var k=new f.b;for(h=0;h<b;h++)a.w(h,k),e.contains(k)&&(g=!0,d[h]=!0);if(!g)return a;e=a.Ga();for(h=0;h<b;h++)d[h]||e.yd(a,h,h+1);return e};c.GV=function(a,b,d){var e=a.Va(0),g=a.D(),h=b.w(),k=new f.b,m=!1;b=[];for(var n=0;n<g;n++)b[n]=!1;n=d*Math.sqrt(2)*1.00001;d=n*n;for(n=0;n<g;n++)e.mc(2*n,k),f.b.oc(k,h)<=d&&(m=!0,b[n]=!0);if(!m)return a;e=a.Ga();for(n=0;n<g;n++)b[n]||e.yd(a,n,n+1);return e};c.cX=function(a,b,d,e,g){var h=new f.Ih;a.qn(h);var k=
new f.g;b.s(k);h.Nb(k);h.O(.1*h.N(),.1*h.ca());k=new f.Fa;k.bd(h,!1);1736==d?k.add(b,!0):k.bd(b,!0);return f.ak.local().U(a,k,e,g)};c.instance=null;return c}(f.Ne);f.Cp=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d){this.at=null==a;this.ya=-1;this.Vd=c;this.KA=b;this.RU=a.next();this.Vb=d}l.prototype.next=function(){if(this.at)return null;var c;return null!=(c=this.Vd.next())?(this.ya=this.Vd.Ea(),f.Cp.tm(c,this.RU,this.KA,this.Vb)):null};l.prototype.Ea=function(){return this.ya};
l.prototype.xe=function(){};return l}();f.zM=R})(fa||(fa={}));(function(f){var R=function(){function c(a){this.md=a;this.Fj=new f.g;this.Fj.Ka();this.uh=new f.g;this.uh.Ka()}c.prototype.wu=function(){var a=this.Fj.o;this.Fj.o=this.uh.o;this.uh.o=a;a=this.Fj.v;this.Fj.v=this.uh.v;this.uh.v=a;a=this.Fj.A;this.Fj.A=this.uh.A;this.uh.A=a;a=this.Fj.B;this.Fj.B=this.uh.B;this.uh.B=a};c.prototype.qR=function(a,b){if(null!=this.md&&!this.md.progress(-1,-1))throw f.f.Lu("user_canceled");var d=!this.Fj.isIntersecting(this.uh);
if(f.R.Bc(a.F())&&f.R.Bc(b.F())){if(a.D()>b.D())return this.TE(a,b,d);this.wu();a=this.TE(b,a,d);this.wu();return a}if(550==a.F()&&f.R.Bc(b.F()))return a=this.UE(b,a,d),this.wu(),a;if(550==b.F()&&f.R.Bc(a.F()))return this.UE(a,b,d);if(550==a.F()&&550==b.F()){if(a.D()>b.D())return this.VE(a,b);this.wu();a=this.VE(b,a);this.wu();return a}return 0};c.prototype.TE=function(a,b,d){var e=a.Ba(),g=b.Ba(),h=new f.g,k=new f.g,m=1.7976931348623157E308;if(!d&&this.WZ(a,b,e,g))return 0;for(;e.Ta();)for(;e.Aa();)if(a=
e.aa(),a.s(h),!(h.Xx(this.uh)>m)){for(;g.Ta();)for(;g.Aa();)if(b=g.aa(),b.s(k),h.Xx(k)<m&&(b=a.vb(b,d),b*=b,b<m)){if(0==b)return 0;m=b}g.ej()}return Math.sqrt(m)};c.prototype.UE=function(a,b,d){var e=a.Ba(),g=new f.g,h=1.7976931348623157E308,k=new f.b,m=b.D();for(d=!d&&1736==a.F();e.Ta();)for(;e.Aa();){var n=e.aa();n.s(g);if(!(1<m&&g.Xx(this.uh)>h)){for(var p=0;p<m;p++){b.w(p,k);if(d&&0!=f.Zc.Td(a,k,0))return 0;var x=n.ae(k,!1);k.sub(n.cc(x));x=k.En();if(x<h){if(0==x)return 0;h=x}}d=!1}}return Math.sqrt(h)};
c.prototype.VE=function(a,b){for(var d=1.7976931348623157E308,e=new f.b,g=new f.b,h,k=a.D(),m=b.D(),n=0;n<k;n++)if(a.w(n,e),!(1<m&&this.uh.nL(e)>d))for(var p=0;p<m;p++)if(b.w(p,g),h=f.b.oc(e,g),h<d){if(0==h)return 0;d=h}return Math.sqrt(d)};c.prototype.WZ=function(a,b,d,e){if(1736==a.F()){for(;e.Ta();)if(e.Aa()){var g=e.aa();if(0!=f.Zc.Td(a,g.wc(),0))return!0}e.ej()}if(1736==b.F()){for(;d.Ta();)if(d.Aa()&&(a=d.aa(),0!=f.Zc.Td(b,a.wc(),0)))return!0;d.ej()}return!1};c.prototype.qm=function(a,b){if(a.u()||
b.u())return NaN;a.s(this.Fj);b.s(this.uh);return this.qR(a,b)};return c}(),l=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}Fa(a,c);a.prototype.U=function(b,d,e){if(null==b||null==d)throw f.f.I();if(b.u()||d.u())return NaN;var g=b.F(),h=d.F();if(33==g){if(33==h)return f.b.vb(b.w(),d.w());if(197==h)return e=new f.g,d.s(e),e.vb(b.w());g=new f.Hd;g.add(b);b=g}else if(197==g){if(197==h)return h=new f.g,b.s(h),e=new f.g,d.s(e),e.vb(h);g=new f.Fa;g.bd(b,!1);b=g}33==h?(h=new f.Hd,
h.add(d),d=h):197==h&&(h=new f.Fa,h.bd(d,!1),d=h);return(new R(e)).qm(b,d)};a.local=function(){null===a.instance&&(a.instance=new a);return a.instance};a.prototype.F=function(){return 14};a.instance=null;return a}(f.Ne);f.AM=l})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d){this.mI=c;this.tI=a;this.md=d;this.NH=b}l.prototype.next=function(){var c=this.mI.next();return null==c?null:this.gD(c)};l.prototype.Ea=function(){return this.mI.Ea()};l.prototype.gD=function(c){var a=c.F();if(f.R.lo(a))return c;
if(197==a)return a=new f.Fa(c.description),a.bd(c,!1),this.gD(a);if(c.u())return c;if(null==c)throw f.f.za();a=c.Ga();for(var b=new f.zb,d=0,e=c.$();d<e;d++)this.aM(c,d,a,b);return a};l.prototype.aM=function(c,a,b,d){if(!(2>c.Ha(a))){var e=c.ua(a),g=c.zc(a)-1,h=c.Va(0),k=c.Lb(a),m=new f.ha(0);m.Db(c.Ha(a)+1);var n=new f.ha(0);n.Db(c.Ha(a)+1);m.add(k?e:g);m.add(e);for(e=new f.b;1<m.size;){var p=m.Gc();m.Rf();var x=m.Gc();c.w(p,e);d.Fc(e);c.w(x,e);d.Sc(e);x=this.$L(d,e,h,p,x,g);0<=x?(m.add(x),m.add(p)):
n.add(p)}k||n.add(m.get(0));if(n.size==m.size)b.addPath(c,a,!0);else if(2<=n.size&&(!this.NH||2!=n.size||!(k||f.b.vb(c.xa(n.get(0)),c.xa(n.get(1)))<=this.tI))){a=new f.Ra;d=0;for(g=n.size;d<g;d++)c.ne(n.get(d),a),0==d?b.xf(a):b.lineTo(a);k&&(this.NH||2!=n.size||b.lineTo(a),b.Up())}}};l.prototype.$L=function(c,a,b,d,e,g){var h=e-1;e<=d&&(h=g);g=e=-1;for(d+=1;d<=h;d++){b.mc(2*d,a);var k=a.x,m=a.y;c.cc(c.ae(a,!1),a);a.x-=k;a.y-=m;k=a.length();k>this.tI&&k>g&&(e=d,g=k)}return e};l.prototype.xe=function(){};
return l}();f.BM=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 29};c.prototype.U=function(a,b,d,e){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d,e).next()):new f.BM(a,b,d,e)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(f.Ne);f.lD=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}
Fa(c,l);c.prototype.F=function(){return 21};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e,g,h,k,m){return a instanceof f.R?(m=new f.$c(a),this.U(m,b,d,[e],g,h,!1,k).next()):!0===k?(d=new f.nD(a,b,d,e,g,!1,!1,m),f.Jh.local().U(d,b,m)):new f.nD(a,b,d,e,g,!1,!1,m)};c.instance=null;return c}(f.Ne);f.mD=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d,e,g,h,k){if(g)throw f.f.Me();if(null==a)throw f.f.I();this.ya=-1;this.ut=c;
this.Cg=a;this.Fe=b;this.kt=d;this.to=e;this.xo=-1;this.Vb=k;this.PU=new f.g;this.PU.Ka()}l.prototype.next=function(){for(var c;null!=(c=this.ut.next());)return this.ya=this.ut.Ea(),this.xo+1<this.kt.length&&this.xo++,this.mS(c,this.kt[this.xo]);return null};l.prototype.Ea=function(){return this.ya};l.prototype.mS=function(c,a){return f.dM.buffer(c,this.Cg,this.Fe,a,this.to,this.Vb)};l.prototype.xe=function(){};return l}();f.nD=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 24};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d){if(null==b)throw f.f.I();if(a.u()||1>a.pb())return 0;if(4==d)throw f.f.Me();var e=f.ab.hc(b),g=f.ab.cw(e),h=f.ab.Mv(e);g*=2-g;var k=e.Ld().gi,m=a.F();if(1736==m||197==m)var n=a.sg();else f.R.Ic(m)?(n=new f.Oa(a.description),n.$b(a,!0)):n=a;if(0==e.Ib(b)){if(f.ab.Cc(b)){n=f.Lh.qj(n,b);1607==m&&n==a&&(n=f.R.$d(a));a=new f.uc;
f.ab.nh(b).sn(a);m=0;for(var p=n.D();m<p;m++){var x=n.xa(m);x.x=f.Lh.nn(x.x,a);n.nb(m,x)}}a=n.Ga();n=f.Lh.NJ(b,e,n,a)?a:f.ab.$g(n,b,e)}return this.tR(n,d,h,g,k)};c.prototype.tR=function(a,b,d,e,g){var h=new f.da(0),k=0;for(a=a.Ba();a.Ta();)for(;a.Aa();){var m=a.aa(),n=m.ac();m=m.wc();n.scale(g);m.scale(g);f.gb.Ad(d,e,n.x,n.y,m.x,m.y,h,null,null,b);k+=h.j}return k};c.instance=null;return c}(f.Ne);f.EM=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||
this}Fa(c,l);c.prototype.F=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e,g){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d,e,g).next()):new f.DM(a,d,e,b,-1,-1,g)};c.instance=null;return c}(f.Ne);f.CM=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d,e,g){if(0<g)throw f.f.Me();if(4!=b&&0<e)throw f.f.Me();if(null==a)throw f.f.I();this.ya=-1;this.ut=c;this.Cg=a;this.Fe=b;this.WU=d;this.VU=e}l.prototype.next=
function(){for(var c;null!=(c=this.ut.next());)return this.ya=this.ut.Ea(),this.Ez(c);return null};l.prototype.Ea=function(){return this.ya};l.prototype.Ez=function(c){return f.jj.rs(c,this.Cg,this.Fe,this.WU,this.VU,this.Vb)};l.prototype.xe=function(){};return l}();f.DM=R})(fa||(fa={}));(function(f){(function(R){R[R.Unknown=0]="Unknown";R[R.Contains=1]="Contains";R[R.Within=2]="Within";R[R.Equals=3]="Equals";R[R.Disjoint=4]="Disjoint";R[R.Touches=8]="Touches";R[R.Crosses=16]="Crosses";R[R.Overlaps=
32]="Overlaps";R[R.NoThisRelation=64]="NoThisRelation";R[R.Intersects=1073741824]="Intersects";R[R.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(f.mM||(f.mM={}));f.FM=function(){function R(){}R.B0=function(l,c,a,b){if(c.u()||l.u())return 4;var d=l.F(),e=c.F(),g;f.R.Ic(d)&&(l=g=new f.Oa(l.description),g.$b(l,!0));f.R.Ic(e)&&(c=g=new f.Oa(c.description),g.$b(c,!0));switch(d){case 33:switch(e){case 33:return R.MX(l,c,a);case 197:return R.fj(R.WJ(c,l,a));case 550:return R.fj(R.ZJ(c,l,a));
case 1607:return R.fj(R.hK(c,l,a,b));case 1736:return R.fj(R.dK(c,l,a))}throw f.f.za();case 197:switch(e){case 33:return R.WJ(l,c,a);case 197:return R.GX(l,c,a);case 550:return R.fj(R.XJ(c,l,a,b));case 1607:return R.fj(R.fK(c,l));case 1736:return R.fj(R.bK(c,l))}throw f.f.za();case 550:switch(e){case 33:return R.ZJ(l,c,a);case 197:return R.XJ(l,c,a,b);case 550:return R.YJ(l,c,a,b);case 1607:return R.fj(R.gK(c,l));case 1736:return R.fj(R.cK(c,l))}throw f.f.za();case 1607:switch(e){case 33:return R.hK(l,
c,a,b);case 197:return R.fK(l,c);case 550:return R.gK(l,c);case 1607:return R.SX(l,c);case 1736:return R.fj(R.eK(c,l))}throw f.f.za();case 1736:switch(e){case 33:return R.dK(l,c,a);case 197:return R.bK(l,c);case 550:return R.cK(l,c);case 1607:return R.eK(l,c);case 1736:return R.PX(l,c)}throw f.f.za();default:throw f.f.za();}};R.MX=function(l,c,a){l=l.w();c=c.w();return R.aK(l,c,a)};R.aK=function(l,c,a){l.sub(c);return l.En()<=a*a?3:4};R.WJ=function(l,c,a){var b=new f.g;l.s(b);l=c.w();return R.IX(b,
l,a)};R.IX=function(l,c,a){l.O(-a,-a);if(l.contains(c))return 1;l.O(a,a);return l.contains(c)?8:4};R.JX=function(l,c,a){return c.contains(a)?1:l.contains(a)?8:4};R.GX=function(l,c,a){var b=new f.g;l.s(b);l=new f.g;c.s(l);return R.HX(b,l,a)};R.HX=function(l,c,a){var b=0;l.contains(c)&&(b|=1);c.contains(l)&&(b|=2);if(0!=b)return b;l.O(-a,-a);c.O(-a,-a);if(l.isIntersecting(c))return b=l,b.O(a,a),b=b.contains(c)?1:0,c.O(a,a),b|=c.contains(l)?2:0,0!=b?b:32;b=l;b.O(a,a);c.O(a,a);return b.isIntersecting(c)?
8:4};R.ZJ=function(l,c,a){c=c.w();return R.$J(l,c,a)};R.$J=function(l,c,a){for(var b=0,d=l.D();b<d;b++){var e=l.xa(b);e=R.aK(e,c,a);if(4!=e)return 0!=(e&2)&&1!=d?1:e}return 4};R.XJ=function(l,c,a,b){var d=new f.g;c.s(d);return R.LX(l,d,a,b)};R.LX=function(l,c,a,b){c.O(-a,-a);c.O(a,a);for(var d=a=0,e=l.D();d<e;d++){var g=l.xa(d);g=R.fj(R.JX(c,c,g));if(4!=g&&(a|=g,4==b))return 1073741824}return 0==a?4:2==a?a:32};R.YJ=function(l,c,a,b){for(var d=0,e=0,g=c.D();e<g;e++){var h=c.xa(e);h=R.$J(l,h,a);if(4!=
h&&(d++,4==b))return 1073741824}return 0<d?d==c.D()?3==b?(h=R.YJ(c,l,a,1),1==h?3:0):1:32:0};R.hK=function(l,c,a,b){c=c.w();return R.RX(l,c,a,b)};R.KX=function(l,c){var a=null;l=l.ib;null!=l&&(a=l.oi);if(null!=a){c=a.Xl(c.x,c.y);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};R.RX=function(l,c,a,b){if(0==(b&1073741839))return 64;var d=R.KX(l,c);if(0<d)return d;a*=a;for(d=l.Ba();d.Ta();){var e=d.Pa;if(!l.Lb(e)){var g=l.Ha(e);e=l.ua(e);if(0==g)continue;if(f.b.oc(l.xa(e),c)<=a||1<g&&f.b.oc(l.xa(e+
g-1),c)<=a)return 8}if(8!=b)for(;d.Aa();)if(g=d.aa(),g=g.cc(g.ae(c,!1)),f.b.oc(g,c)<=a)return 0!=(b&1073741828)?1073741824:1}return 0!=(b&1073741828)?4:64};R.fK=function(l,c){var a=new f.g;c.s(a);return R.QX(l,a)};R.QX=function(l,c){l=R.gu(l,c);return 0<l?l:0};R.gu=function(l,c){l=l.ib;if(null!=l)l=l.oi;else return-1;if(null!=l){c=l.rn(c);if(0==c)return 4;if(1==c)return 1}else return-1;return 0};R.gK=function(l,c){var a=new f.g;c.s(a);l=R.gu(l,a);return 0<l?l:0};R.Bx=function(l,c){var a=new f.g;c.s(a);
a=R.gu(l,a);return 0<a?a:-1==a&&(a=new f.g,l.s(a),a=R.gu(c,a),0<a)?R.fj(a):0};R.SX=function(l,c){l=R.Bx(l,c);return 0<l?l:0};R.dK=function(l,c,a){c=c.w();return R.OX(l,c,a)};R.OX=function(l,c,a){l=f.Zc.Td(l,c,a);if(0==l)return 4;if(1==l)return 1;if(2==l)return 8;throw f.f.za();};R.bK=function(l,c){var a=new f.g;c.s(a);return R.NX(l,a)};R.NX=function(l,c){l=R.gu(l,c);return 0<l?l:0};R.cK=function(l,c){l=R.Bx(l,c);return 0<l?l:0};R.eK=function(l,c){l=R.Bx(l,c);return 0<l?l:0};R.PX=function(l,c){l=R.Bx(l,
c);return 0<l?l:0};R.TX=function(l,c){var a=l.F(),b=c.F();if(f.R.Rg(a)){var d=l.ib;if(null!=d&&(d=d.oi,null!=d)){if(33==b){var e=c.w();d=d.Xl(e.x,e.y)}else e=new f.g,c.s(e),d=d.rn(e);if(1==d)return 1;if(0==d)return 4}}if(f.R.Rg(b)&&(d=c.ib,null!=d&&(d=d.oi,null!=d))){33==a?(l=l.w(),d=d.Xl(l.x,l.y)):(c=new f.g,l.s(c),d=d.rn(c));if(1==d)return 2;if(0==d)return 4}return 0};R.fj=function(l){0!=(l&1)&&(l=l&-2|2);0!=(l&2)&&(l=l&-3|1);return l};return R}()})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}Fa(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.F=function(){return 15};c.prototype.U=function(a,b,d,e,g){return a instanceof f.R?(a=new f.$c(a),b=new f.$c(b),this.U(a,b,d,e,g).next()):void 0===g?new f.oD(a,b,d,e,-1):new f.oD(a,b,d,e,g)};c.prototype.Pn=function(a,b,d){this.pv(a)&&(b=f.la.Ng(b,a,!1),a.lj(d)||a.Su(b,d))};c.prototype.pv=function(a){return f.sy.az(a)};c.instance=null;return c}(f.Ne);f.ak=R})(fa||(fa={}));
(function(f){var R=function(){function l(c,a,b,d,e){this.at=null==a;this.ya=-1;this.Vd=c;this.Cg=b;this.Xe=a.next();this.Hj=this.Xe.F();this.Vb=d;this.Li=e;if(-1!=this.Li&&(0>=this.Li||7<this.Li))throw f.f.I("bad dimension mask");}l.prototype.next=function(){if(this.at)return null;if(null!=this.gx){var c=this.gx.next();if(null!=c)return c;this.gx=null}for(;null!=(c=this.Vd.next());)return this.ya=this.Vd.Ea(),-1==this.Li?c=this.Ia(c):(this.gx=this.jU(c),c=this.gx.next()),c;return null};l.prototype.Ea=
function(){return this.ya};l.prototype.Ia=function(c){var a=this.GL(c);if(null!=a)return a;a=f.la.Tv(this.Xe,c);var b=f.la.Qd(this.Cg,a,!0);a=new f.g;this.Xe.s(a);var d=new f.g;c.s(d);a.O(2*b,2*b);a.Ia(d);a.O(100*b,100*b);b=f.Yd.clip(this.Xe,a,0,0);c=f.Yd.clip(c,a,0,0);return f.pg.gw(c,b,this.Cg,this.Vb)};l.prototype.GJ=function(c,a,b){var d=0;if(0!=(a&1))null==b[0]&&(b[0]=new f.Hd(c)),d++;else for(var e=0;e<b.length-1;e++)b[e]=b[e+1];if(0!=(a&2))null==b[d]&&(b[d]=new f.Oa(c)),d++;else for(e=d;e<
b.length-1;e++)b[e]=b[e+1];if(0!=(a&4))null==b[d]&&(b[d]=new f.Fa(c)),d++;else for(e=d;e<b.length-1;e++)b[e]=b[e+1];if(3!=d){c=[];for(e=0;e<d;e++)c[e]=b[e];return new f.$c(c)}return new f.$c(b)};l.prototype.jU=function(c){var a=this.GL(c);if(null!=a){var b=[null,null,null];b[a.pb()]=a;return this.GJ(c.description,this.Li,b)}a=f.la.Tv(this.Xe,c);b=f.la.Qd(this.Cg,a,!0);a=new f.g;this.Xe.s(a);a.O(2*b,2*b);var d=new f.g;c.s(d);a.Ia(d);a.O(100*b,100*b);b=f.Yd.clip(this.Xe,a,0,0);a=f.Yd.clip(c,a,0,0);
b=f.pg.wA(a,b,this.Cg,this.Vb);return this.GJ(c.description,this.Li,b)};l.prototype.GL=function(c){var a=f.la.Tv(c,this.Xe),b=f.la.Qd(this.Cg,a,!0);a=c.F();var d=c.u(),e=this.Xe.u();e=d||e;if(!e){e=new f.g;c.s(e);var g=new f.g;this.Xe.s(g);g.O(2*b,2*b);e=!e.isIntersecting(g)}if(!e)if(g=f.FM.TX(this.Xe,c),4==g)e=!0;else{if(0!=(g&2))return this.Xe;if(0!=(g&1))return c}if(e)return b=f.R.Se(a),e=f.R.Se(this.Hj),b<e?l.rC(c,d):b>e?this.rK():0==b?550==a&&33==this.Hj?this.rK():l.rC(c,d):l.rC(c,d);if((-1==
this.Li||4==this.Li)&&197==a&&197==this.Hj)return b=this.Xe,a=new f.g,c.s(a),d=new f.g,b.s(d),a.Ia(d),b=new f.Ih,c.copyTo(b),b.mp(a),b;if(197==a&&0==f.R.Se(this.Hj)||197==this.Hj&&0==f.R.Se(a))return d=197==a?c:this.Xe,c=197==a?this.Xe:c,a=new f.g,d.s(a),f.Yd.clip(c,a,b,0);if(0==f.R.Se(a)&&0<f.R.Se(this.Hj)||0<f.R.Se(a)&&0==f.R.Se(this.Hj)){b=f.la.Ng(this.Cg,c,!1);if(550==a||33==a)return f.pg.lH(c,this.Xe,b);if(550==this.Hj||33==this.Hj)return f.pg.lH(this.Xe,c,b);throw f.f.za();}return-1!=this.Li&&
2!=this.Li||1607!=a||1736!=this.Hj?-1!=this.Li&&2!=this.Li||1736!=a||1607!=this.Hj?null:this.DL(this.Xe,c):this.DL(c,this.Xe)};l.prototype.DL=function(c,a){var b=c,d=a,e=f.la.Ng(this.Cg,a,!1),g=new f.g;d.s(g);var h=new f.g;b.s(h);h.O(2*e,2*e);g.Ia(h);g.O(10*e,10*e);b=c=f.Yd.clip(c,g,0,0);h=new f.ha(0);var k=-1,m=d.ib;if(null!=m){var n=m.oi;if(null!=n){k=0;h.Db(b.D()+b.$());for(var p=new f.g,x=b.Ba();x.Ta();)for(;x.Aa();){x.aa().s(p);var Q=n.rn(p);1==Q?h.add(1):0==Q?h.add(0):(h.add(-1),k++)}}}5<a.D()&&
(d=a=f.Yd.clip(a,g,0,0),m=d.ib);0>k&&(k=b.gA());g=b.D()+d.D();if(k*d.D()>Math.log(g)*g*4)return null;g=null;k=d.Ba();null!=m&&null!=m.Hb&&(g=m.Hb);null==g&&20<d.D()&&(g=f.la.$E(d));c=c.Ga();d=null;m=b.Ba();n=[0,0,0,0,0,0,0,0,0];p=new f.ie(0);x=new f.og;Q=-1;for(var V=0,ca=0,ba=0<h.size,ea=-1;m.Ta();){ea=m.Pa;var da=0;Q=-1;for(V=0;m.Aa();){var ma=ba?f.L.truncate(h.get(ca)):-1;ca++;var za=m.aa();if(0>ma){if(null!=g)for(null==d?d=g.LS(za,e):d.wn(za,e),ma=d.next();-1!=ma;ma=d.next()){k.Rb(g.ga(ma));ma=
k.aa();var Ba=za.Ia(ma,null,n,null,e);for(ma=0;ma<Ba;ma++)p.add(n[ma])}else for(k.ej();k.Ta();)for(;k.Aa();)for(ma=k.aa(),Ba=za.Ia(ma,null,n,null,e),ma=0;ma<Ba;ma++)p.add(n[ma]);if(0<p.size){p.Zd(0,p.size,function(Qa,Sa){return Qa-Sa});var Ea=0;p.add(1);Ba=-1;ma=0;for(var Ma=p.size;ma<Ma;ma++){var Pa=p.get(ma);if(Pa!=Ea){var Ra=!1;0!=Ea||1!=Pa?(za.jh(Ea,Pa,x),Ea=x.get()):(Ea=za,Ra=!0);if(2<=da){c.ds(b,ea,Q,V,3==da);if(1!=this.CE(a,Ea.ac(),e)&&1!=this.DE(a,Ea,e))return null;c.$b(Ea,!1);da=1;V=0}else switch(Ba=
this.DE(a,Ea,e),Ba){case 1:Ra?2>da?(Q=m.wb()-b.ua(ea),V=1,da=0==da?3:2):V++:(c.$b(Ea,0==da),da=1);break;case 0:da=0;Q=-1;V=0;break;default:return null}Ea=Pa}}}else{ma=this.CE(a,za.ac(),e);if(0>ma)return null;1==ma?(2>da&&(Q=m.wb()-b.ua(ea),da=0==da?3:2),V++):(Q=-1,V=0)}p.clear(!1)}else 0!=ma&&1==ma&&(0==da?(da=3,Q=m.wb()-b.ua(ea)):1==da?(da=2,Q=m.wb()-b.ua(ea)):V++)}2<=da&&(c.ds(b,ea,Q,V,3==da),Q=-1)}return c};l.prototype.CE=function(c,a,b){return f.Oe.Jm(c,a,b)};l.prototype.DE=function(c,a,b){var d=
a.ac();a=a.wc();var e=f.Oe.Jm(c,d,b),g=f.Oe.Jm(c,a,b);if(1==e&&0==g||0==e&&1==g)return-1;if(0==e||0==g)return 0;if(1==e||1==g)return 1;e=new f.b;e.add(d,a);e.scale(.5);c=f.Oe.Jm(c,e,b);return 0==c?0:1==c?1:-1};l.rC=function(c,a){return a?c:c.Ga()};l.prototype.rK=function(){null==this.lI&&(this.lI=this.Xe.Ga());return this.lI};l.prototype.xe=function(){};return l}();f.oD=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=
function(){return 28};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e,g,h,k){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d,e,g,h,k).next()):new f.GM(a,b,d,e,g,h,k)};c.instance=null;return c}(f.Ne);f.pD=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d,e,g,h){this.ya=-1;this.Vd=c;this.Oj=a;this.La=b;this.Qi=d;this.lB=e;this.hI=g;this.md=h}l.prototype.next=function(){var c=this.Vd.next();return null!=c?(this.ya=this.Vd.Ea(),
this.tM(c)):null};l.prototype.Ea=function(){return this.ya};l.prototype.tM=function(c){var a=0>=this.hI?f.la.Ng(this.Oj,c,!1):this.hI;return f.RL.U(c,this.La,this.Qi,this.lB,a,this.md)};l.prototype.xe=function(){};return l}();f.GM=R})(fa||(fa={}));(function(f){(function(l){l[l.clipToDomainOnly=1]="clipToDomainOnly";l[l.clipWithHorizon=2]="clipWithHorizon";l[l.foldAndClipWithHorizon=3]="foldAndClipWithHorizon"})(f.yp||(f.yp={}));var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||
this}Fa(c,l);c.prototype.F=function(){return 0};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d).next()):new f.HM(a,b,d)};c.prototype.transform=function(a,b,d,e){return f.Bp.transform(a,b,d,e,!0)};c.prototype.BL=function(a,b,d){return f.Bp.BL(a,b,d)};c.prototype.yu=function(a,b,d,e){return f.Bp.yu(a,b,d,e)};c.prototype.KZ=function(a,b,d,e){return f.Bp.Kr(a,b,d,e)};c.instance=null;return c}(f.Ne);
f.Rr=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b){this.ya=-1;this.Vd=c;this.eV=a;this.md=b}l.prototype.next=function(){var c=this.Vd.next();return null!=c?(this.ya=this.Vd.Ea(),f.Bp.$g(c,this.eV,this.md)):null};l.prototype.Ea=function(){return this.ya};l.prototype.xe=function(){};return l}();f.HM=R})(fa||(fa={}));(function(f){var R=function(){function c(){}c.prototype.reset=function(){this.vh=this.Ek=-1;this.ct=this.Dq=!1};c.prototype.MR=function(a,b,d){for(a.Rb(b,d);a.Aa();){var e=
a.aa();e=e.Pb();if(0!=e)return a.wb()}for(a.Rb(b,d);a.mA();)if(e=a.ti(),e=e.Pb(),0!=e)return a.wb();return-1};c.prototype.NR=function(a,b){for(a.Rb(b,-1);a.mA();)if(0!=a.ti().Pb())return a.wb();return-1};c.prototype.LR=function(a,b){a.Rb(b,-1);for(a.aa();a.Aa();)if(0!=a.aa().Pb())return a.wb();return-1};c.prototype.KR=function(a,b,d,e){this.Ek=this.MR(b,d,e);if(-1!=this.Ek){b.Rb(this.Ek,-1);var g=b.aa(),h=g.cc(g.ae(a,!1));d=f.b.oc(h,a);e=new f.b;e.K(h);e.sub(g.ac());h=new f.b;h.K(a);h.sub(g.ac());
this.Dq=0>e.Di(h);this.vh=this.LR(b,this.Ek);if(-1!=this.vh){b.Rb(this.vh,-1);g=b.aa();var k=g.ae(a,!1);k=g.cc(k);var m=f.b.oc(k,a);m>d?this.vh=-1:(e.K(k),e.sub(g.ac()),h.K(a),h.sub(g.ac()),this.ct=0>e.Di(h))}-1==this.vh&&(this.vh=this.NR(b,this.Ek),-1!=this.vh&&(b.Rb(this.vh,-1),g=b.aa(),k=g.ae(a,!1),k=g.cc(k),m=f.b.oc(k,a),m>d?this.vh=-1:(e.K(k),e.sub(g.ac()),h.K(a),h.sub(g.ac()),this.ct=0>e.Di(h),a=this.Ek,this.Ek=this.vh,this.vh=a,a=this.Dq,this.Dq=this.ct,this.ct=a)))}};c.prototype.lP=function(a,
b,d,e,g){d=d.Ba();this.KR(a,d,e,g);if(-1!=this.Ek&&-1==this.vh)return this.Dq;if(-1!=this.Ek&&-1!=this.vh){if(this.Dq==this.ct)return this.Dq;d.Rb(this.Ek,-1);a=d.aa().qg();d.Rb(this.vh,-1);b=d.aa().qg();return 0<=a.Di(b)?!0:!1}return b};return c}(),l=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}Fa(a,c);a.local=function(){null===a.instance&&(a.instance=new a);return a.instance};a.prototype.F=function(){return 3};a.prototype.Xz=function(b,d,e){var g;void 0===g&&(g=!1);if(b.u())return new f.lm;
d=d.w();var h=b,k=b.F();197==k&&(h=new f.Fa,h.bd(b,!1),k=1736);switch(k){case 33:return this.oJ(h,d);case 550:return this.ZI(h,d);case 1607:case 1736:return this.vV(h,d,e,g);default:throw f.f.Y("not implemented");}};a.prototype.Yz=function(b,d){if(b.u())return new f.lm;d=d.w();var e=b,g=b.F();197==g&&(e=new f.Fa,e.bd(b,!1),g=1736);switch(g){case 33:return this.oJ(e,d);case 550:case 1607:case 1736:return this.ZI(e,d);default:throw f.f.Y("not implemented");}};a.prototype.Zz=function(b,d,e,g){if(0>g)throw f.f.I();
if(b.u())return[];d=d.w();var h=b,k=b.F();197==k&&(h=new f.Fa,h.bd(b,!1),k=1736);switch(k){case 33:return this.kW(h,d,e,g);case 550:case 1607:case 1736:return this.NV(h,d,e,g);default:throw f.f.Y("not implemented");}};a.prototype.vV=function(b,d,e,g){if(1736==b.F()&&e&&(e=new f.g,b.s(e),e=f.la.Qd(null,e,!1),0!=(g?f.Zc.Td(b,d,0):f.Zc.Td(b,d,e)))){var h=new f.lm(d,0,0);g&&h.$K(!0);return h}var k=b.Ba();h=new f.b;for(var m=e=-1,n=1.7976931348623157E308,p=0;k.Ta();)for(;k.Aa();){var x=k.aa();x=x.cc(x.ae(d,
!1));var Q=f.b.oc(x,d);Q<n?(p=1,h=x,e=k.wb(),m=k.Pa,n=Q):Q==n&&p++}h=new f.lm(h,e,Math.sqrt(n));g&&(k.Rb(e,m),x=k.aa(),g=0>f.b.fp(d,x.ac(),x.wc()),1<p&&(p=new R,p.reset(),g=p.lP(d,g,b,e,m)),h.$K(g));return h};a.prototype.oJ=function(b,d){b=b.w();d=f.b.vb(b,d);return new f.lm(b,0,d)};a.prototype.ZI=function(b,d){for(var e=b.Va(0),g=b.D(),h=b=0,k=0,m=1.7976931348623157E308,n=0;n<g;n++){var p=new f.b;e.mc(2*n,p);var x=f.b.oc(p,d);x<m&&(h=p.x,k=p.y,b=n,m=x)}d=new f.lm;d.Jy(h,k,b,Math.sqrt(m));return d};
a.prototype.kW=function(b,d,e,g){if(0==g)return e=[];e*=e;b=b.w();d=f.b.oc(b,d);d<=e?(e=[],g=new f.lm,g.Jy(b.x,b.y,0,Math.sqrt(d)),e[0]=g):e=[];return e};a.prototype.NV=function(b,d,e,g){if(0==g)return g=[];var h=b.Va(0),k=b.D();b=[];e*=e;for(var m=0;m<k;m++){var n=h.read(2*m),p=h.read(2*m+1),x=d.x-n,Q=d.y-p;x=x*x+Q*Q;x<=e&&(Q=new f.lm,Q.Jy(n,p,m,Math.sqrt(x)),b.push(Q))}d=b.length;b.sort(function(V,ca){return V.La<ca.La?-1:V.La==ca.La?0:1});if(g>=d)return b.slice(0);b.length=g;return b.slice(0)};
a.instance=null;return a}(f.Ne);f.my=l})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 4};c.prototype.U=function(a,b,d,e,g){return f.mm.hC(a,b,d,e,g)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.pv=function(a){return f.Cu.bz(a)};c.prototype.Pn=function(a,b,d){f.Cu.oE(a,b,d)};c.instance=null;return c}(f.Ne);f.IM=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 33};c.prototype.U=function(a,b,d,e,g){return 1073741824===a?!f.wd.iC(b,d,e,4,g):f.wd.iC(b,d,e,a,g)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.pv=function(a){return f.Cu.bz(a)};c.prototype.Pn=function(a,b,d){f.Cu.oE(a,b,d)};c.instance=null;return c}(f.Ne);f.kj=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d){this.md=d;this.MU=b;this.ya=-1;if(null==c)throw f.f.I();
this.Fk=c;this.Oj=a}l.prototype.next=function(){var c;if(null!=(c=this.Fk.next())){this.ya=this.Fk.Ea();if(null!=this.md&&!this.md.progress(-1,-1))throw f.f.Lu("user_canceled");return this.MC(c)}return null};l.prototype.Ea=function(){return this.ya};l.prototype.MC=function(c){if(null==c)throw f.f.I();return f.ny.gL(c,this.Oj,this.MU,this.md)};l.prototype.xe=function(){};return l}();f.JM=R})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,
l);c.prototype.F=function(){return 26};c.prototype.U=function(a,b,d,e){return a instanceof f.R?(a=new f.$c(a),this.U(a,b,d,e).next()):new f.JM(a,b,d,e)};c.prototype.zq=function(a,b,d,e,g){return 0<(void 0!==e?f.ny.zq(a,b,d,e,g):f.ny.zq(a,b,!1,null,d))};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(f.Ne);f.jm=R})(fa||(fa={}));(function(f){var R=function(){function g(){this.Rq=0}g.prototype.QY=function(h){this.Rq&=-2;this.Rq|=h?1:0};g.prototype.oq=
function(){return 0!=(this.Rq&1)};g.prototype.IG=function(){return this.oq()?0:1};return g}();f.d_=R;var l=function(){return function(){}}(),c=function(){return function(g,h,k,m){this.x=g;this.y=h;this.Hi=k;this.Km=m}}(),a=function(){function g(h){this.Ie=h}g.prototype.compare=function(h,k,m){h=h.ga(m);k=this.Ie.vf.read(2*k);h=this.Ie.vf.read(2*h);k-=h;return 0>k?-1:0<k?1:0};return g}(),b=function(){function g(h){this.Ie=h}g.prototype.compare=function(h,k,m){k=this.Ie.eb[k];h=this.Ie.eb[h.ga(m)];
var n=k.oq(),p=h.oq();m=k.ue.Te(this.Ie.cp,0);var x=h.ue.Te(this.Ie.cp,0);m==x&&(m=Math.min(n?k.ue.na:k.ue.ma,p?h.ue.na:h.ue.ma),n=.5*(m-this.Ie.cp)+this.Ie.cp,n==this.Ie.cp&&(n=m),m=k.ue.Te(n,0),x=h.ue.Te(n,0));return m<x?-1:m>x?1:0};return g}(),d=function(){function g(h,k){this.PJ=new f.b;this.parent=h;this.yT=k}g.prototype.Lr=function(h,k,m){var n=this.parent,p=this.yT;m.Zd(h,k,function(x,Q){return n.Qh(x,Q,p)})};g.prototype.sq=function(h){h=this.parent.ni.get(h);this.parent.vf.mc(2*(h>>1),this.PJ);
return this.PJ.y+(0!=(h&1)?this.parent.Qj:-this.parent.Qj)};return g}(),e=function(){function g(h,k,m,n,p){this.aI=h.description;this.W=h;this.Wg=k;this.Qj=f.la.Ng(this.Wg,h,!1);this.Vo=f.la.Ng(this.Wg,h,!0);this.gB=m;this.KU=this.aI.Ca;this.eb=[];this.Io=[];this.sh=new f.Ap;this.cb=new f.bk;this.fe=new f.Od;this.MH=this.yl=p}g.prototype.BA=function(){this.MH=!0;return(!f.R.Bc(this.W.F())||this.qF()&&this.nF(!1))&&this.wP()?f.R.Bc(this.W.F())?this.zP()?1607==this.W.F()?this.BP()?2:0:this.CP()?this.DP():
0:0:2:0};g.prototype.TC=function(h,k){var m=this.vf.read(2*h);h=this.vf.read(2*h+1);var n=this.vf.read(2*k);k=this.vf.read(2*k+1);var p=!f.Eu.iw(m,h,n,k,this.Qj*this.Qj);return p?p:0==this.W.pb()?!1:m==n&&h==k};g.prototype.qF=function(){for(var h=this.W,k=h.Gf?3:2,m=0,n=h.$();m<n;m++)if(h.Ha(m)<k)return this.fe=new f.Od(1,m,0),!1;return!0};g.prototype.nF=function(h){var k=this.W,m=k.Ba(),n=k.hasAttribute(1);for(k=n?f.la.hF(this.Wg,k,!1):0;m.Ta();)for(;m.Aa();){var p=m.aa();if(!(p.Pb()>this.Qj)){if(h&&
n){var x=p.Ks(1,0);p=p.Ks(1,0);if(Math.abs(p-x)>k)continue}this.fe=new f.Od(2,m.wb(),-1);return!1}}return!0};g.prototype.wP=function(){var h=this.W,k=null;f.R.Bc(this.W.F())&&(k=this.W);var m=(this.MH||this.yl)&&null!=k,n=h.D();this.vf=h.Va(0);this.ni=new f.ha(0);this.ni.Db(2*n);this.mi=new f.ha(0);this.mi.Db(2*n);m&&(null==this.Nl&&(this.Nl=new f.ha(0)),this.Nl.Db(n));for(var p=h=0;p<n;p++)if(this.ni.add(2*p),this.ni.add(2*p+1),this.mi.add(2*p),this.mi.add(2*p+1),m){for(;p>=k.zc(h);)h++;this.Nl.add(h)}(new f.Du).sort(this.mi,
0,2*n,new d(this,m));this.cb.clear();this.cb.kp(new a(this));this.cb.Le(n);k=0;for(n*=2;k<n;k++)if(m=this.mi.get(k),h=this.ni.get(m),m=h>>1,0==(h&1)){h=this.cb.addElement(m,-1);p=this.cb.Be(h);if(-1!=p&&!this.TC(this.cb.ga(p),m))return this.fe=new f.Od(3,m,this.cb.ga(p)),!1;var x=this.cb.hb(h);if(-1!=x&&!this.TC(this.cb.ga(x),m))return this.fe=new f.Od(3,m,this.cb.ga(x)),!1}else if(h=this.cb.search(m,-1),p=this.cb.Be(h),x=this.cb.hb(h),this.cb.zd(h,-1),-1!=p&&-1!=x&&!this.TC(this.cb.ga(p),this.cb.ga(x)))return this.fe=
new f.Od(3,this.cb.ga(p),this.cb.ga(x)),!1;return!0};g.prototype.zP=function(){return 10>this.W.D()?this.xP():this.yP()};g.prototype.yP=function(){var h=new f.Yc;h.Bb(this.W);var k=new f.Od;return f.Gu.$I(!1,h,this.Qj,k,this.md)?(k.Ql=h.Ua(k.Ql),k.Rl=h.Ua(k.Rl),this.fe.Or(k),!1):!0};g.prototype.xP=function(){var h=this.W,k=h.Ba();for(h=h.Ba();k.Ta();)for(;k.Aa();){var m=k.aa();if(!k.ko()||!k.uU()){h.gY(k);do for(;h.Aa();){var n=h.aa();n=m.Zr(n,this.Qj,!0);if(0!=n)return this.fe=new f.Od(2==n?5:4,
k.wb(),h.wb()),!1}while(h.Ta())}}return!0};g.prototype.CP=function(){var h=this.W;this.eb.length=0;this.Io.length=0;this.fg=h.Ba();this.fg.tC();var k=new f.ha(0);k.Db(10);var m=NaN,n=0,p=0;for(h=2*h.D();p<h;p++){var x=this.mi.get(p);x=this.ni.get(x);if(0==(x&1)){x>>=1;var Q=this.vf.read(2*x),V=this.vf.read(2*x+1);if(0!=k.size&&(Q!=m||V!=n)){if(!this.HJ(k))return!1;null!=k&&k.clear(!1)}k.add(x);m=Q;n=V}}return this.HJ(k)?!0:!1};g.prototype.BP=function(){for(var h=this.W,k=Array(h.$()),m=0,n=h.$();m<
n;m++)k[m]=h.ho(m);n=new l;var p=new f.b;m=this.mi.get(0);m=this.ni.get(m);var x=m>>1;this.vf.mc(2*x,p);m=this.Nl.get(x);var Q=k[m],V=h.ua(m),ca=h.zc(m)-1;n.kl=x==V||x==ca;n.Ty=this.yl?!Q&&n.kl:n.kl;n.Hi=m;n.x=p.x;n.y=p.y;n.Km=x;for(var ba=new l,ea=1,da=this.mi.size;ea<da;ea++)if(m=this.mi.get(ea),m=this.ni.get(m),0==(m&1)){x=m>>1;this.vf.mc(2*x,p);m=this.Nl.get(x);m!=n.Hi&&(Q=k[m],V=h.ua(m),ca=h.zc(m)-1);var ma=x==V||x==ca,za=this.yl?!Q&&n.kl:n.kl;ba.x=p.x;ba.y=p.y;ba.Hi=m;ba.Km=x;ba.Ty=za;ba.kl=
ma;if(ba.x==n.x&&ba.y==n.y)if(this.yl){if(!ba.Ty||!n.Ty)if(ba.Hi!=n.Hi||!ba.kl&&!n.kl)return this.fe=new f.Od(8,ba.Km,n.Km),!1}else if(!ba.kl||!n.kl)return this.fe=new f.Od(5,ba.Km,n.Km),!1;m=n;n=ba;ba=m}return!0};g.prototype.tF=function(){for(var h=this.W,k=[],m=-1,n=!1,p=0,x=h.$();p<x;p++)h.kw(p)&&(n=!1,m++,p<x-1&&(h.kw(p+1)||(n=!0))),k[p]=n?m:-1;n=new f.b;p=this.mi.get(0);p=this.ni.get(p);var Q=p>>1;this.vf.mc(2*Q,n);p=this.Nl.get(Q);m=new c(n.x,n.y,p,Q,k[p]);h=[];var V=1;for(x=this.mi.size;V<
x;V++)if(p=this.mi.get(V),p=this.ni.get(p),0==(p&1)){Q=p>>1;this.vf.mc(2*Q,n);p=this.Nl.get(Q);p=new c(n.x,n.y,p,Q,k[p]);if(p.x==m.x&&p.y==m.y){if(p.Hi==m.Hi)return this.fe=new f.Od(9,p.Km,m.Km),!1;0<=k[p.Hi]&&k[p.Hi]==k[m.Hi]&&(0!=h.length&&h[h.length-1]==m||h.push(m),h.push(p))}m=p}if(0==h.length)return!0;p=new f.Ap(!0);f.L.Gv(k,-1);n=-1;V=new f.b;V.Tc();m=0;for(x=h.length;m<x;m++){Q=h[m];if(Q.x!=V.x||Q.y!=V.y)n=p.Th(0),V.x=Q.x,V.y=Q.y;var ca=k[Q.Hi];-1==ca&&(ca=p.Th(2),k[Q.Hi]=ca);p.addElement(ca,
n);p.addElement(n,ca)}x=new f.ha(0);x.Db(10);for(m=p.re;-1!=m;m=p.$z(m))if(h=p.BG(m),0==(h&1)&&0!=(h&2)){h=-1;x.add(m);for(x.add(-1);0<x.size;){n=x.Gc();x.Rf();V=x.Gc();x.Rf();Q=p.BG(V);if(0!=(Q&1)){h=0==(Q&2)?n:V;break}p.IY(V,Q|1);for(Q=p.sc(V);-1!=Q;Q=p.hb(Q))ca=p.getData(Q),ca!=n&&(x.add(ca),x.add(V))}if(-1!=h){p=-1;m=0;for(x=k.length;m<x;m++)if(k[m]==h){p=m;break}this.fe=new f.Od(10,p,-1);return!1}}return!0};g.prototype.DP=function(){var h=this.W;if(0>=h.Pe())return this.fe=new f.Od(6,1==h.$()?
1:-1,-1),0;if(1==h.$())return this.yl&&!this.tF()?0:2;this.Mo=f.ha.Af(h.$(),0);this.tB=f.ha.Af(h.$(),-1);for(var k=-1,m=0,n=0,p=h.$();n<p;n++){var x=h.rm(n);this.Mo.write(n,0>x?0:256);if(0<x)k=n,m=x;else{if(0==x)return this.fe=new f.Od(6,n,-1),0;if(0>k||m<Math.abs(x))if(this.fe=new f.Od(7,n,-1),this.yl)return 0;this.tB.write(n,k)}}this.Kt=h.$();this.an=new f.ha(0);this.an.Db(10);p=h.D();this.cp=NaN;h=new f.ha(0);h.Db(10);this.jr=f.ha.Af(p,-1);this.nx=f.ha.Af(p,-1);null!=this.Dj?this.Dj.clear(!1):
this.Dj=new f.ha(0);this.Dj.Db(10);this.cb.clear();this.cb.kp(new b(this));k=0;for(p*=2;0<this.Kt&&k<p;k++)if(m=this.mi.get(k),m=this.ni.get(m),0==(m&1)){m>>=1;n=this.vf.read(2*m+1);if(n!=this.cp&&0!=h.size){if(!this.bu(h))return 0;null!=h&&h.clear(!1)}h.add(m);this.cp=n}return 0<this.Kt&&!this.bu(h)?0:this.yl?0==this.fe.pi&&this.tF()?2:0:0==this.fe.pi?2:1};g.prototype.HJ=function(h){if(1==h.size)return!0;for(var k=0,m=h.size;k<m;k++){var n=h.get(k);this.fg.Rb(n);var p=this.fg.ti();this.eb.push(this.zv(p,
n,this.fg.Pa,!0));this.fg.aa();p=this.fg.aa();this.eb.push(this.zv(p,n,this.fg.Pa,!1))}var x=this;this.eb.sort(function(ca,ba){return x.hR(ca,ba)});n=this.sh.re;-1==n&&(n=this.sh.Th(0));this.sh.vn(this.eb.length);k=0;for(m=this.eb.length;k<m;k++)this.sh.addElement(n,k);k=!0;for(var Q=m=-1;k;){k=!1;p=this.sh.sc(n);if(-1==p)break;for(var V=this.sh.hb(p);-1!=V;){m=this.sh.getData(p);Q=this.sh.getData(V);m=this.eb[m].ap;Q=this.eb[Q].ap;if(m==Q)if(k=!0,this.sh.hd(n,p),p=this.sh.Be(V),V=this.sh.hd(n,V),
-1==V||-1==p)break;else continue;p=V;V=this.sh.hb(p)}}k=this.sh.Hs(n);this.sh.vF(n);if(0<k)return this.fe=new f.Od(5,m,Q),!1;k=0;for(m=h.size;k<m;k++)this.eC(this.eb[k]);this.eb.length=0;return!0};g.prototype.bu=function(h){for(var k=0,m=h.size;k<m;k++){var n=h.get(k),p=this.jr.read(n);if(-1!=p){var x=this.cb.ga(p);this.Dj.add(x);this.cb.zd(p,-1);this.eC(this.eb[x]);this.eb[x]=null;this.jr.write(n,-1)}p=this.nx.read(n);-1!=p&&(x=this.cb.ga(p),this.Dj.add(x),this.cb.zd(p,-1),this.eC(this.eb[x]),this.eb[x]=
null,this.nx.write(n,-1))}k=0;for(m=h.size;k<m;k++){n=h.get(k);this.fg.Rb(n);p=this.fg.ti();if(p.na>p.ma){var Q=this.fg.wb(),V=this.zv(p,n,this.fg.Pa,!0);0<this.Dj.size?(x=this.Dj.Gc(),this.Dj.Rf(),this.eb[x]=V):(x=this.eb.length,this.eb.push(V));p=this.cb.addElement(x,-1);-1==this.jr.read(Q)?this.jr.write(Q,p):this.nx.write(Q,p);0==(this.Mo.read(this.fg.Pa)&3)&&this.an.add(p)}this.fg.aa();p=this.fg.aa();p.na<p.ma&&(Q=this.fg.nk(),V=this.zv(p,n,this.fg.Pa,!1),0<this.Dj.size?(x=this.Dj.Gc(),this.Dj.Rf(),
this.eb[x]=V):(x=this.eb.length,this.eb.push(V)),p=this.cb.addElement(x,-1),-1==this.jr.read(Q)?this.jr.write(Q,p):this.nx.write(Q,p),0==(this.Mo.read(this.fg.Pa)&3)&&this.an.add(p))}k=0;for(m=this.an.size;k<m&&0<this.Kt;k++)if(p=this.an.get(k),0==(this.Mo.read(this.eb[this.cb.ga(p)].sB)&3)){h=-1;n=this.cb.Be(p);var ca=p;V=null;x=-1;for(var ba=0;-1!=n;){x=this.cb.ga(n);V=this.eb[x];x=V.sB;ba=this.Mo.read(x);if(0!=(ba&3))break;ca=n;n=this.cb.Be(n)}-1==n?(Q=1,n=ca):(h=1==(ba&3)?x:this.tB.read(x),Q=
0!=V.IG()?0:1,n=this.cb.hb(n));do{x=this.cb.ga(n);V=this.eb[x];x=V.sB;ca=this.Mo.read(x);if(0==(ca&3)){if(Q!=V.IG())return this.fe=new f.Od(6,x,-1),!1;ba=0==Q||V.oq()?2:1;ca=ca&252|ba;this.Mo.write(x,ba);if(2==ba&&0==this.fe.pi&&this.tB.read(x)!=h&&(this.fe=new f.Od(7,x,-1),this.yl))return!1;this.Kt--;if(0==this.Kt)return!0}1==(ca&3)&&(h=x);ca=n;n=this.cb.hb(n);Q=0!=Q?0:1}while(ca!=p)}null!=this.an?this.an.clear(!1):this.an=new f.ha(0);return!0};g.prototype.zv=function(h,k,m,n){if(322==h.F())h=this.DQ(h);
else throw f.f.za();h.ap=k;h.sB=m;h.Rq=0;h.QY(n);return h};g.prototype.DQ=function(h){if(0<this.Io.length){var k=this.Io[this.Io.length-1];--this.Io.length;h.copyTo(k.ue)}else k=new R,k.ue=f.zD.$d(h);return k};g.prototype.eC=function(h){322==h.ue.F()&&this.Io.push(h)};g.prototype.EV=function(){for(var h=this.W.D(),k=new f.ha(0),m=0;m<h;m++)k.add(m);var n=this;k.Zd(0,h,function(p,x){return n.vv(p,x)});for(m=1;m<h;m++)if(0==this.vv(k.get(m-1),k.get(m)))return this.fe=new f.Od(3,k.get(m-1),k.get(m)),
0;return 2};g.prototype.bX=function(){return this.qF()?this.nF(!0)?2:0:0};g.prototype.HW=function(){return this.BA()};g.prototype.JV=function(){for(var h=this.W.D(),k=new f.ha(0),m=0;m<h;m++)k.add(m);var n=this;k.Zd(0,h,function(ca,ba){return n.ZP(ca,ba)});var p=Array(h);f.L.Gv(p,!1);p[k.get(0)]=!0;for(m=1;m<h;m++){var x=k.get(m-1),Q=k.get(m);0==this.vv(x,Q)?p[Q]=!1:p[Q]=!0}k=this.W.Ga();x=this.W;Q=0;var V=1;for(m=0;m<h;m++)p[m]?V=m+1:(Q<V&&k.yd(x,Q,V),Q=m+1);Q<V&&k.yd(x,Q,V);k.Jg(2,this.Vo);return k};
g.prototype.fX=function(){var h=this.W,k=h.Ba(),m=h.Ba(),n=this.W.Ga(),p=this.W,x=h.hasAttribute(1),Q=x?f.la.hF(this.Wg,h,!0):0,V=new f.ha(0),ca=new f.ha(0);V.Db(f.L.truncate(h.D()/2+1));for(ca.Db(f.L.truncate(h.D()/2+1));k.Ta();)if(m.Ta(),!(2>h.Ha(k.Pa))){m.iY();for(var ba,ea,da=!0;k.Aa();){var ma=k.aa(),za=m.ti();if(k.wb()>m.wb())break;da&&(V.add(k.wb()),ca.add(m.nk()),da=!1);ea=V.Gc();var Ba=k.nk();if(1<Ba-ea){var Ea=new f.b;Ea.tc(h.xa(ea),h.xa(Ba));ba=Ea.length()}else ba=ma.Pb();ea=ca.Gc();Ba=
m.wb();1<Ba-ea?(Ea=new f.b,Ea.tc(h.xa(ea),h.xa(Ba)),ea=Ea.length()):ea=za.Pb();ba>this.Vo?V.add(k.nk()):x&&(ba=h.Rc(1,V.Gc(),0),ma=ma.us(1,0),Math.abs(ma-ba)>Q&&V.add(k.nk()));ea>this.Vo?ca.add(m.wb()):x&&(ba=h.Rc(1,ca.Gc(),0),ma=za.us(1,0),Math.abs(ma-ba)>Q&&ca.add(m.wb()))}V.Gc()<ca.Gc()?V.size>ca.size?V.Rf():ca.Rf():(V.Gc()!=ca.Gc()&&ca.Rf(),ca.Rf());if(2<=ca.size+V.size){da=new f.Ra;za=0;for(ma=V.size;za<ma;za++)p.ne(V.get(za),da),0==za?n.xf(da):n.lineTo(da);for(za=ca.size-1;0<za;za--)p.ne(ca.get(za),
da),n.lineTo(da);p.Lb(k.Pa)?n.Up():0<ca.size&&(p.ne(ca.get(0),da),n.lineTo(da))}null!=V&&V.clear(!1);null!=ca&&ca.clear(!1)}n.Jg(2,this.Vo);return n};g.prototype.KW=function(){return this.gZ()};g.prototype.gZ=function(){if(1736==this.W.F()&&1==this.W.$n())return f.pg.Tk(this.W,this.Vo,!0,!1,this.md);this.Ni=new f.Yc;this.Ni.Bb(this.W);0!=this.Ni.pd&&(1!=this.gB&&f.$j.U(this.Ni,this.Vo,this.md,!0),1736==this.W.F()&&f.Kn.U(this.Ni,this.Ni.kd,this.gB,!1,this.md));this.W=this.Ni.ye(this.Ni.kd);1736==
this.W.F()&&(this.W.cl(),this.W.np(0));this.W.Jg(2,this.Vo);return this.W};g.p0=function(h,k,m,n){if(h.u())return 1;var p=h.F();if(33==p)return 1;if(197==p)return n=new f.g,h.s(n),n.Qg(f.la.Ng(k,h,!1))?0:1;if(f.R.Ic(p))throw f.f.za();if(!f.R.Rg(p))throw f.f.za();p=f.la.Ng(k,h,!1);var x=h.rk(p);m=m?-1:x;if(-1!=m)return m;1==m&&(p=0);m=(new g(h,k,m,n,!1)).BA();h.Jg(m,p);return m};g.zq=function(h,k,m,n,p){null!=n&&(n.pi=0,n.Ql=-1,n.Rl=-1);if(h.u())return 1;var x=h.F();if(33==x)return 1;var Q=f.la.Ng(k,
h,!1);if(197==x)return k=new f.g,h.s(k),k.Qg(Q)?(null!=n&&(n.pi=2,n.Ql=-1,n.Rl=-1),0):1;if(f.R.Ic(x))return Q=new f.Oa(h.description),Q.$b(h,!0),g.zq(Q,k,m,n,p);var V=h.rk(Q);m=m?-1:V;if(-1!=m)return m;k=new g(h,k,m,p,!1);if(550==x)m=k.EV();else if(1607==x)m=k.bX();else if(1736==x)m=k.HW();else throw f.f.za();h.Jg(m,Q);null!=n&&0==m&&n.Or(k.fe);return m};g.o0=function(h,k,m,n,p){null!=n&&(n.pi=0,n.Ql=-1,n.Rl=-1);if(h.u())return 1;var x=h.F();if(33==x)return 1;var Q=f.la.Ng(k,h,!1);if(197==x)return k=
new f.g,h.s(k),k.Qg(Q)?(null!=n&&(n.pi=2,n.Ql=-1,n.Rl=-1),0):1;if(f.R.Ic(x))return x=new f.Oa(h.description),x.$b(h,!0),g.zq(x,k,m,n,p);h=new g(h,k,-1,p,!0);if(550==x||1607==x||1736==x)k=h.BA();else throw f.f.za();null!=n&&n.Or(h.fe);return k};g.gL=function(h,k,m,n){if(h.u())return h;var p=h.F();if(33==p)return h;var x=f.la.Ng(k,h,!1);if(197==p)return k=new f.g,h.s(k),k.Qg(x)?h.Ga():h;if(f.R.Ic(p))return p=new f.Oa(h.description),p.$b(h,!0),g.gL(p,k,m,n);x=h.rk(x);m=m?-1:x;if(2==m)return h;h=new g(h,
k,m,n,!1);if(550==p)h=h.JV();else if(1607==p)h=h.fX();else if(1736==p)h=h.KW();else throw f.f.za();return h};g.NC=function(h,k,m,n){if(h.u())return h;var p=h.F();if(33==p)return h;var x=f.la.Ng(k,h,!1);if(197==p)return k=new f.g,h.s(k),k.Qg(x)?h.Ga():h;if(f.R.Ic(p))return x=new f.Oa(h.description),x.$b(h,!0),g.NC(x,k,m,n);if(!f.R.Rg(p))throw f.f.Y("OGC simplify is not implemented for this geometry type "+p);return f.pg.NC(h,x,!1,n)};g.prototype.Qh=function(h,k,m){if(h==k)return 0;h=this.ni.get(h);
var n=this.ni.get(k);k=h>>1;var p=n>>1,x=new f.b,Q=new f.b;this.vf.mc(2*k,x);x.y+=0!=(h&1)?this.Qj:-this.Qj;this.vf.mc(2*p,Q);Q.y+=0!=(n&1)?this.Qj:-this.Qj;h=x.compare(Q);return 0==h&&m?(m=this.Nl.get(k)-this.Nl.get(p),0>m?-1:0<m?1:0):h};g.prototype.vv=function(h,k){if(h==k)return 0;var m=this.W,n=m.xa(h),p=m.xa(k);if(n.x<p.x)return-1;if(n.x>p.x)return 1;if(n.y<p.y)return-1;if(n.y>p.y)return 1;for(n=1;n<this.KU;n++){p=this.aI.jd(n);for(var x=f.oa.Sa(p),Q=0;Q<x;Q++){var V=m.Rc(p,h,Q),ca=m.Rc(p,k,
Q);if(V<ca)return-1;if(V>ca)return 1}}return 0};g.prototype.ZP=function(h,k){var m=this.vv(h,k);return 0==m?h<k?-1:1:m};g.prototype.hR=function(h,k){if(h===k)return 0;var m=h.ue.qg();h.oq()&&m.lr();h=k.ue.qg();k.oq()&&h.lr();k=m.Wu();var n=h.Wu();return n==k?(k=m.Di(h),Math.abs(k)<=8.881784197001252E-16*(Math.abs(h.x*m.y)+Math.abs(h.y*m.x))&&(k--,k++),0>k?1:0<k?-1:0):k<n?-1:1};return g}();f.ny=e})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}
Fa(c,l);c.prototype.F=function(){return 30};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.U=function(a,b,d,e){return a instanceof f.R?(a=new f.$c(a),b=new f.$c(b),this.U(a,b,d,e).next()):new f.KM(a,b,d,e)};c.tp=function(a,b,d,e){var g=a.pb(),h=b.pb();if(a.u()&&b.u())return g>h?a:b;if(a.u())return b;if(b.u())return a;var k=new f.g,m=new f.g,n=new f.g;a.s(k);b.s(m);n.H(k);n.Nb(m);k=f.la.Qd(d,n,!0);m=a.F();n=b.F();return 33==m&&33==n?c.sW(a,b,k):m!=n?0<g||0<
h?g>h?a:b:550==m?c.YI(a,b,k):c.YI(b,a,k):f.pg.tp(a,b,d,e)};c.sW=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.w(),g=b.w(),h=new f.Hd(a.description);f.b.oc(e,g)>d&&(h.add(a),h.add(b));return h};c.YI=function(a,b,d){var e=a.Va(0),g=a.D(),h=b.w(),k=a.Ga();d=d*Math.sqrt(2)*1.00001;var m=new f.g;a.s(m);m.O(d,d);if(m.contains(h)){d*=d;m=!1;for(var n=[],p=0;p<g;p++)n[p]=!1;for(p=0;p<g;p++){var x=e.read(2*p),Q=e.read(2*p+1);x-=h.x;Q-=h.y;x*x+Q*Q<=d&&(m=!0,n[p]=!0)}if(m)for(p=0;p<g;p++)n[p]||k.yd(a,
p,p+1);else k.yd(a,0,g),k.add(b)}else k.yd(a,0,g),k.add(b);return k};c.instance=null;return c}(f.Ne);f.oy=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b,d){this.at=null==a;this.ya=-1;this.Vd=c;this.Cg=b;this.fV=a.next();this.Vb=d}l.prototype.next=function(){if(this.at)return null;var c;return null!=(c=this.Vd.next())?(this.ya=this.Vd.Ea(),f.oy.tp(c,this.fV,this.Cg,this.Vb)):null};l.prototype.Ea=function(){return this.ya};l.prototype.xe=function(){};return l}();f.KM=R})(fa||(fa={}));
(function(f){var R=function(){function a(){}a.prototype.nA=function(){this.Fz=null;this.fy=-1;this.HL=!1};return a}(),l=function(){function a(){this.gs=0;this.uj=[]}a.prototype.AO=function(b){this.gs+=b.fy;this.uj.push(b)};a.prototype.lX=function(){this.gs-=this.uj[this.uj.length-1].fy;--this.uj.length};a.prototype.Sy=function(){return this.uj[this.uj.length-1]};a.prototype.Ib=function(b){return b===this};return a}(),c=function(){function a(b,d,e){this.ya=-1;this.Jc=!1;this.qI=[!1,!1,!1,!1];this.Nq=
[0,0,0,0];this.VA=!1;this.Hk=-1;this.Bq=0;this.vo=-1;this.Xo=[];this.Vd=b;this.Cg=d;this.Vb=e}a.QE=function(b){var d=[],e=0;for(b=Object.keys(b);e<b.length;e++)d.push(Number(b[e]));d.sort(function(g,h){return g-h});return d};a.prototype.SG=function(b){var d=this.Xo[b],e=a.QE(d)[0],g=d[e],h=g.Sy().Fz;g=g.Sy().HL;delete d[e];g&&(h=f.jm.local().U(h,this.Cg,!1,this.Vb),0==b&&33==h.F()&&(b=new f.Hd(h.description),h.u()||b.add(h),h=b));return h};a.prototype.next=function(){if(this.Jc&&this.vo==this.Hk)return null;
for(;!this.wL(););if(-1==this.Hk)return null;if(this.VA){for(this.vo++;;){if(this.vo>this.Hk||0>this.vo)throw f.f.za();if(this.qI[this.vo])break}this.ya++;return this.SG(this.vo)}this.ya=0;this.vo=this.Hk;return this.SG(this.Hk)};a.prototype.Ea=function(){return this.ya};a.prototype.wL=function(){if(this.Jc)return!0;var b=null;null!=this.Vd&&(b=this.Vd.next(),null==b&&(this.Jc=!0,this.Vd=null));f.Ep.Sp(this.Vb);if(null!=b){var d=b.pb();this.qI[d]=!0;d>=this.Hk&&!this.VA&&(this.zE(d,!1,b),d>this.Hk&&
!this.VA&&this.eY(d))}if(0<this.Bq)for(d=0;d<=this.Hk;d++)for(;1<this.Nq[d];)if(b=this.PP(d),0!=b.length)b=f.pg.fR(b,this.Cg,this.Vb),this.zE(d,!0,b);else break;return this.Jc};a.prototype.PP=function(b){for(var d=[],e=[],g=this.Xo[b],h=a.QE(g),k=0;k<h.length;k++){var m=h[k],n=g[m];if(this.Jc||1E4<n.gs&&1<n.uj.length){this.Nq[b]-=n.uj.length;for(this.Bq-=n.uj.length;0<n.uj.length;)d.push(n.Sy().Fz),n.lX();e.push(m)}}for(k=0;k<e.length;k++)delete g[e[k]];return d};a.prototype.eY=function(b){for(var d=
0;d<b;d++)this.Xo[d]=[],this.Bq-=this.Nq[d],this.Nq[d]=0};a.prototype.zE=function(b,d,e){var g=new R;g.nA();g.Fz=e;e=a.zT(e);g.fy=e;e=a.xT(e);if(b+1>this.Xo.length)for(var h=0,k=Math.max(2,b+1);h<k;h++)this.Xo.push([]);h=this.Xo[b][e];void 0===h&&(h=new l,this.Xo[b][e]=h);g.HL=d;h.AO(g);this.Nq[b]++;this.Bq++;this.Hk=Math.max(this.Hk,b)};a.xT=function(b){return 0<b?f.L.truncate(Math.log(b)/Math.log(4)+.5):0};a.zT=function(b){var d=b.F();if(f.R.Rg(d))return b.D();if(33==d)return 1;if(197==d)return 4;
if(f.R.Ic(d))return 2;throw f.f.za();};a.prototype.xe=function(){this.wL()};return a}();f.MM=c})(fa||(fa={}));(function(f){var R=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}Fa(c,l);c.prototype.F=function(){return 1};c.prototype.U=function(a,b,d,e){return void 0===e?new f.MM(a,b,d):this.sR(a,b,d,e)};c.prototype.sR=function(a,b,d,e){a=new f.$c([a,b]);return this.U(a,d,e).next()};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(f.Ne);
f.Jh=R})(fa||(fa={}));(function(f){var R;(function(l){l[l.nextPath=0]="nextPath";l[l.nextSegment=1]="nextSegment";l[l.iterate=2]="iterate"})(R||(R={}));R=function(){function l(c,a,b,d){this.Bt=new f.g;this.ZU=c;this.$U=a;this.Fq=d;this.No=-1;this.zl=!1;var e=c.ib;null!=e&&(e=d?e.To:e.Hb,null!=e&&(this.Jc=!1,this.qa=b,this.Hb=e,this.dx=this.Hb.getIterator(),this.Gq=this.zl=!0,this.Xb=0,d?this.No=a.$():this.td=a.Ba()));this.zl||(e=a.ib,null!=e&&(e=d?e.To:e.Hb,null!=e&&(this.Jc=!1,this.qa=b,this.Hb=
e,this.dx=this.Hb.getIterator(),this.zl=!0,this.Gq=!1,this.Xb=0,d?this.No=c.$():this.td=c.Ba())));this.zl||(this.ii=d?f.la.AS(c,a,b,1<=c.rk(0),1<=a.rk(0)):f.la.zS(c,a,b))}l.prototype.next=function(){if(this.zl){if(this.Jc)return!1;for(var c=!0;c;)switch(this.Xb){case 0:c=this.RV();break;case 1:c=this.SV();break;case 2:c=this.DA();break;default:throw f.f.Y("internal error");}return this.Jc?!1:!0}return null==this.ii?!1:this.ii.next()};l.prototype.tl=function(){return this.zl?this.Gq?this.Hb.ga(this.nt):
this.Fq?this.No:this.td.wb():this.ii.tl(this.ii.dg)};l.prototype.ol=function(){return this.zl?this.Gq?this.Fq?this.No:this.td.wb():this.Hb.ga(this.nt):this.ii.ol(this.ii.If)};l.prototype.cA=function(){if(!this.Fq)throw f.f.Y("internal error");return this.zl?this.Gq?this.Hb.sG(this.nt):this.Bt:this.ii.cA(this.ii.dg)};l.prototype.Gz=function(){if(!this.Fq)throw f.f.Y("internal error");return this.zl?this.Gq?this.Bt:this.Hb.sG(this.nt):this.ii.Gz(this.ii.If)};l.prototype.RV=function(){if(!this.Fq){if(!this.td.Ta())return this.Jc=
!0,!1;this.Xb=1;return!0}if(-1==--this.No)return this.Jc=!0,!1;this.Gq?this.$U.Sj(this.No,this.Bt):this.ZU.Sj(this.No,this.Bt);this.dx.vi(this.Bt,this.qa);this.Xb=2;return!0};l.prototype.SV=function(){if(!this.td.Aa())return this.Xb=0,!0;var c=this.td.aa();this.dx.wn(c,this.qa);this.Xb=2;return!0};l.prototype.DA=function(){this.nt=this.dx.next();return-1==this.nt?(this.Xb=this.Fq?0:1,!0):!1};return l}();f.km=R})(fa||(fa={}));(function(f){f=f.WM||(f.WM={});f[f.enumClosed=1]="enumClosed";f[f.enumHasNonlinearSegments=
2]="enumHasNonlinearSegments";f[f.enumOGCStartPolygon=4]="enumOGCStartPolygon";f[f.enumCalcMask=4]="enumCalcMask"})(fa||(fa={}));(function(f){f.xD=function(){function R(){}R.vb=function(l,c,a,b,d,e,g,h,k){var m=[0,0,0],n=[0,0,0],p=[0,0,0],x=[0,0,0,0],Q=new f.da(0),V=new f.da(0),ca=new f.da(0);if(null!=g||null!=h||null!=k)if(f.l.Ai(c))f.gh.vb(l,a,b,d,e,g,h,k);else{d=f.C.ba(d);a=f.C.ba(a);var ba=f.C.ba(d-a);if(f.l.V(b,e)&&(f.l.V(a,d)||f.l.V(f.l.J(b),1.570796326794897)))null!=g&&(g.j=0),null!=h&&(h.j=
0),null!=k&&(k.j=0);else{if(f.l.V(b,-e)){if(f.l.V(f.l.J(b),1.570796326794897)){null!=g&&(g.j=2*f.C.Hg(l,c));null!=h&&(h.j=0<b?f.C.ba(3.141592653589793-f.C.ba(d)):f.C.ba(d));null!=k&&(k.j=0<b?f.C.ba(d):f.C.ba(3.141592653589793-f.C.ba(d)));return}f.l.V(f.l.J(ba),3.141592653589793)&&(null!=g&&(g.j=2*f.C.Hg(l,c)),null!=h&&(h.j=0),null!=k&&(k.j=0))}else{if(f.l.V(f.l.J(b),1.570796326794897)||f.l.V(f.l.J(e),1.570796326794897)){f.$k.vb(l,c,a,b,d,e,g,h,k);return}if(f.l.V(a,d)||f.l.V(f.l.J(ba),3.141592653589793)){f.$k.vb(l,
c,a,b,d,e,g,h,k);return}if(f.l.qd(b)){f.$k.vb(l,c,a,b,d,e,g,h,k);return}}var ea=Math.sqrt(1-c);d=f.C.ba(d-a);a=0;f.C.hk(1,c,b,a,0,Q,V,ca);m[0]=Q.j;m[1]=V.j;m[2]=ca.j;f.C.hk(1,c,e,d,0,Q,V,ca);n[0]=Q.j;n[1]=V.j;n[2]=ca.j;p[0]=0;p[1]=0;p[2]=-1*c*f.C.n(1,c,b)*Math.sin(b);0>d?f.C.pr(p,n,m,x,0):f.C.pr(p,m,n,x,0);V=[0,0,0];ca=[0,0,0];var da=[0,0,0];m=[0,0,0];Q=[0,0,0];var ma=Math.acos(x[2]/1),za=1-c,Ba=Math.tan(ma),Ea=1+Ba*Ba/za,Ma=2*p[2]*Ba/za;Ba=Math.sqrt(Ma*Ma-4*Ea*(p[2]*p[2]/za-1));Ea*=2;za=(-Ma+Ba)/
Ea;Ma=(-Ma-Ba)/Ea;Ba=Math.tan(ma);Ea=Ba*za+p[2];ma=(za+Ma)/2;p=(Ea+(Ba*Ma+p[2]))/2;Ba=f.C.wp(za-ma,Ea-p);za=p/ea*1.570796326794897;for(Ma=0;100>Ma;Ma++){Ea=f.C.gm(c,za);Ea=Ea*Ea/Math.cos(za)*(Math.sin(za)-p*Ea/(1-c));if(f.l.qd(Ea))break;za-=Ea}p=f.C.n(1,c,za)*Math.cos(za);p=Math.sqrt((p-ma)*(p+ma));Ba=1-Ba/p;Ba*=2-Ba;Ea=f.C.Fn(V);ma=f.C.Fn(ca);za=f.C.Fn(da);var Pa=f.C.zu(da,V);Ma=f.C.zu(da,ca);f.C.ey(da,V,m);f.C.ey(da,ca,Q);V=Math.acos(Pa/(za*Ea));ca=Math.acos(Ma/(za*ma));ca*=f.l.ub(1,f.C.zu(m,Q));
if(1.570796326794897<=f.l.J(V)&&1.570796326794897<=f.l.J(ca)||3.141592653589793<f.l.J(V-ca))V=(3.141592653589793-f.l.J(V))*f.l.ub(1,V),ca=(3.141592653589793-f.l.J(ca))*f.l.ub(1,ca);m=f.C.Rj(Ba,ca);Q=f.C.q(p,Ba,f.C.Rj(Ba,V));m=f.C.q(p,Ba,m);m=f.l.J(m-Q)*l;V=new f.da(0);ca=new f.da(0);da=x[1]/1;da*=-f.l.ub(1,ba);Q=Math.acos(da)*f.l.ub(1,ba);R.Bf(l,c,a,b,m,Q,V,ca);f.l.V(d,V.j)&&f.l.V(e,ca.j)||(Ba=f.C.wp(f.C.ba(d-V.j),e-ca.j),R.Bf(l,c,a,b,m,f.C.ba(Q+3.141592653589793),V,ca),Ea=f.C.wp(f.C.ba(d-V.j),e-
ca.j),Ea<Ba&&(Q=f.C.ba(Q+3.141592653589793)));V=[0,0,0,0];ca=[0,0,0,0];p=[0,0,0];Ba=[0,0,0];l=[0,0,0];a=[0,0,0];b=[0,0,0];da=[0,0,0];p[0]=0;p[1]=0;p[2]=ea;Ba[0]=0;Ba[1]=0;Ba[2]=0;f.C.pr(Ba,p,n,V,0);f.l.qd(e)?(l[0]=n[0],l[1]=n[1],l[2]=1,a[0]=1*Math.cos(d)-1*Math.sin(d),a[1]=1*Math.sin(d)+1*Math.cos(d)):(c=f.C.n(1,c,e)*Math.cos(e),l[0]=0,l[1]=0,n[2]+=Math.tan(1.570796326794897-f.l.J(e))*c*f.l.ub(1,e),a[0]=c*Math.cos(d)-c*Math.sin(d),a[1]=c*Math.sin(d)+c*Math.cos(d));a[2]=n[2];f.C.pr(n,a,l,ca,1);f.C.ey(ca,
V,b);f.C.ey(ca,x,da);da=f.C.zu(b,da)/(f.C.Fn(b)*f.C.Fn(da));da*=f.l.ub(1,ba);d=Math.acos(da)*-f.l.ub(1,ba);0<Q&&0<d?d=f.C.ba(d+3.141592653589793):0>Q&&0>d&&(d=f.C.ba(d+3.141592653589793));null!=g&&(g.j=m);null!=h&&(h.j=Q);null!=k&&(k.j=d)}}};R.Bf=function(l,c,a,b,d,e,g,h){var k=[0,0,0],m=[0,0,0],n=[0,0,0],p=[0,0,0],x=[0,0,0],Q=[0,0,0],V=[0,0,0],ca=[0,0,0,0],ba=new f.da(0),ea=new f.da(0),da=new f.da(0),ma=new f.da(0),za=new f.da(0),Ba=new f.da(0);if(null!=g&&null!=h)if(f.l.Ai(c))f.gh.Bf(l,a,b,d,e,
g,h);else if(f.l.qd(d))null!=g&&(g.j=a),null!=h&&(h.j=b);else if(e=f.C.ba(e),0>d&&(d=f.l.J(d),e=f.C.ba(e+3.141592653589793)),a=f.C.ba(a),b=f.C.ba(b),1.570796326794897<f.l.J(b)&&(a=f.C.ba(a+3.141592653589793),b=f.l.ub(3.141592653589793,b)-b),f.l.V(f.l.J(b),1.570796326794897)||f.l.qd(b)||f.l.qd(e)||f.l.V(f.l.J(e),3.141592653589793))f.$k.Bf(l,c,a,b,d,e,g,h);else{var Ea=Math.sqrt(1-c);l=d/l;f.C.hk(1,c,b,0,0,ma,za,Ba);k[0]=ma.j;k[1]=za.j;k[2]=za.j;V[0]=0;V[1]=0;V[2]=-1*c*f.C.n(1,c,b)*Math.sin(b);ma=f.C.n(1,
c,b);za=f.C.ba(1.570796326794897-e);Ba=Math.sin(za);d=Math.cos(b);b=Math.sin(b);x[0]=ma*d-b*Ba;x[1]=Math.cos(za);x[2]=(1-c)*ma*b+d*Ba;0>e?f.C.pr(V,x,k,ca,0):f.C.pr(V,k,x,ca,0);k=Math.acos(ca[2]/1);ca=Math.atan2(-ca[1],-ca[0]);b=1-c;x=Math.tan(k);za=1+x*x/b;ma=2*V[2]*x/b;x=Math.sqrt(ma*ma-4*za*(V[2]*V[2]/b-1));za*=2;b=(-ma+x)/za;ma=(-ma-x)/za;x=Math.tan(k);za=x*b+V[2];k=(b+ma)/2;V=(za+(x*ma+V[2]))/2;x=f.C.wp(b-k,za-V);Ea=V/Ea*1.570796326794897;for(b=0;100>b;b++){ma=f.C.gm(c,Ea);ma=ma*ma/Math.cos(Ea)*
(Math.sin(Ea)-V*ma/(1-c));if(f.l.qd(ma))break;Ea-=ma}Ea=f.C.n(1,c,Ea)*Math.cos(Ea);Ea=Math.sqrt((Ea-k)*(Ea+k));V=1-x/Ea;V*=2-V;Q=Math.acos(f.C.zu(Q,m)/(f.C.Fn(Q)*f.C.Fn(m)));Q*=f.l.ub(1,m[0]);e=(f.C.q(Ea,V,f.C.Rj(V,Q))+l*f.l.ub(1,e))/f.C.Hg(Ea,V);e=f.C.ba(1.570796326794897*e);e=f.C.kr(V,e);f.C.n(Ea,V,e);x=f.C.ba(ca+a);a=Math.cos(x);e=Math.sin(x);n[0]=p[0]*a+p[1]*-e;n[1]=p[0]*e+p[1]*a;n[2]=p[2];f.C.sP(c,n[0],n[1],n[2],da,ea,ba);null!=g&&(g.j=ea.j);null!=h&&(h.j=da.j)}};return R}()})(fa||(fa={}));(function(f){var R=
function(){function d(e){this.Xa=null;this.eu=new f.b;this.fu=new f.b;this.a=e}d.prototype.compare=function(e,g,h){this.a.Hc(g,this.eu);this.a.Hc(e.ga(h),this.fu);return this.eu.compare(this.fu)};return d}(),l=function(){function d(e){this.Jf=new f.b;this.Lk=new f.b;this.a=e}d.prototype.Hh=function(e){this.Jf.K(e)};d.prototype.compare=function(e,g){this.a.Hc(e.ga(g),this.Lk);return this.Jf.compare(this.Lk)};return d}(),c=function(d){function e(g){var h=d.call(this,g.a,g.qa,!1)||this;h.Ya=g;return h}
Fa(e,d);e.prototype.compare=function(g,h,k){if(this.yg)return-1;var m=this.Ya.Ud.ao(this.Ya.Xh(h));g=g.ga(k);var n=this.Ya.Ud.ao(this.Ya.Xh(g));this.Qm=k;return this.CF(h,m,g,n)};return e}(f.CD),a=function(d){function e(g){var h=d.call(this,g.a,g.qa)||this;h.Ya=g;return h}Fa(e,d);e.prototype.compare=function(g,h){if(this.yg)return-1;g=this.Ya.Ud.ao(this.Ya.Xh(g.ga(h)));this.Qm=h;return this.DF(h,g)};return e}(f.hN),b=function(){function d(){this.Nc=this.nf=this.Co=this.Ud=this.rh=this.Cd=this.eb=
this.a=null;this.Tg=!1;this.Ch=this.$m=this.qe=this.Nk=this.th=this.Ik=this.Nf=this.ge=null;this.Eh=this.br=this.EB=this.qa=0;this.Dw=this.po=!1;this.So=new f.b;this.Vi=new f.b;this.eb=new f.ad(8);this.Cd=new f.ad(5);this.rh=new f.Hu;this.Ud=new f.Hu;this.Tg=!1;this.Ch=new f.b;this.Ch.ka(0,0);this.qa=0;this.Eh=-1;this.po=!1;this.a=null;this.nf=new f.bk;this.Nc=new f.bk;this.th=new f.ha(0);this.Nk=new f.AD;this.Nf=new f.ha(0);this.Ik=new f.ha(0);this.Co=new f.Ra}d.prototype.uZ=function(e,g){var h=
new f.xd;h.HC();e.Qc(h);this.zr(e);this.po=!1;this.qa=g;this.EB=g*g;g=this.SC();e.Qc(h);g||(this.CR(),g||this.SC());-1!=this.Eh&&(this.a.Xd(this.Eh),this.Eh=-1);this.a=null;return this.po};d.prototype.yZ=function(e,g){this.zr(e);this.po=!1;this.qa=g;this.EB=g*g;this.Tg=!1;this.SC();this.Tg||(this.Tg=1==e.$p(g,!0,!1));-1!=this.Eh&&(this.a.Xd(this.Eh),this.Eh=-1);this.a=null};d.prototype.vg=function(e,g){return this.eb.S(e,0+g)};d.prototype.vC=function(e,g,h){this.eb.P(e,0+g,h)};d.prototype.Xh=function(e){return this.eb.S(e,
2)};d.prototype.BY=function(e,g){this.eb.P(e,2,g)};d.prototype.DG=function(e,g){return this.eb.S(e,3+g)};d.prototype.kq=function(e){return this.eb.S(e,7)};d.prototype.$l=function(e,g){this.eb.P(e,7,g)};d.prototype.lq=function(e,g){return this.eb.S(e,3+this.jq(e,g))};d.prototype.Ar=function(e,g,h){this.eb.P(e,3+this.jq(e,g),h)};d.prototype.dT=function(e,g){return this.eb.S(e,5+this.jq(e,g))};d.prototype.Cr=function(e,g,h){this.eb.P(e,5+this.jq(e,g),h)};d.prototype.ts=function(e){return this.Cd.S(e,
0)};d.prototype.xY=function(e,g){this.Cd.P(e,0,g)};d.prototype.Kz=function(e){return this.Cd.S(e,4)};d.prototype.wr=function(e,g){this.Cd.P(e,4,g)};d.prototype.pl=function(e){return this.Cd.S(e,1)};d.prototype.Bn=function(e,g){this.Cd.P(e,1,g)};d.prototype.Jz=function(e){return this.Cd.S(e,3)};d.prototype.ou=function(e,g){this.Cd.P(e,3,g)};d.prototype.mn=function(e){var g=this.Cd.Ke(),h=this.rh.Th();this.xY(g,h);-1!=e?(this.rh.addElement(h,e),this.a.Qa(e,this.Eh,g),this.wr(g,this.a.Ua(e))):this.wr(g,
-1);return g};d.prototype.SQ=function(e){this.Cd.hd(e)};d.prototype.xE=function(e,g){this.rh.addElement(this.ts(e),g);this.a.Qa(g,this.Eh,e)};d.prototype.Vt=function(e){var g=this.eb.Ke(),h=this.Ud.Th();this.BY(g,h);-1!=e&&this.Ud.addElement(h,e);return g};d.prototype.yE=function(e,g){this.Ud.addElement(this.Xh(e),g)};d.prototype.Bv=function(e){this.eb.hd(e);e=this.th.ZF(e);0<=e&&this.th.kX(e)};d.prototype.nj=function(e,g){if(-1==this.vg(e,0))this.vC(e,0,g);else if(-1==this.vg(e,1))this.vC(e,1,g);
else throw f.f.za();this.Qy(e,g)};d.prototype.Qy=function(e,g){var h=this.pl(g);if(-1!=h){var k=this.lq(h,g);this.Cr(k,g,e);this.Ar(e,g,k);this.Ar(h,g,e);this.Cr(e,g,h)}else this.Cr(e,g,e),this.Ar(e,g,e),this.Bn(g,e)};d.prototype.jq=function(e,g){return this.vg(e,0)==g?0:1};d.prototype.ln=function(e,g){var h=this.Jz(g);-1!=h&&(this.nf.zd(h,-1),this.ou(g,-1));var k;h=this.pl(g);if(-1!=h){var m=k=h;do{var n=!1,p=this.jq(k,g),x=this.DG(k,p);if(this.vg(k,p+1&1)==e){this.Dv(k);this.Ud.kh(this.Xh(k));this.Bv(k);
if(k==x){h=-1;break}h==k&&(h=this.pl(g),m=x,n=!0)}k=x}while(k!=m||n);if(-1!=h){do p=this.jq(k,g),x=this.DG(k,p),this.vC(k,p,e),k=x;while(k!=m);k=this.pl(e);-1!=k?(m=this.lq(k,e),n=this.lq(h,e),m==k?(this.Bn(e,h),this.Qy(k,e),this.Bn(e,k)):n==h&&this.Qy(h,e),this.Ar(h,e,m),this.Cr(m,e,h),this.Ar(k,e,n),this.Cr(n,e,k)):this.Bn(e,h)}}h=this.ts(e);k=this.ts(g);for(m=this.rh.sc(k);-1!=m;m=this.rh.hb(m))this.a.Qa(this.rh.ga(m),this.Eh,e);this.rh.lz(h,k);this.SQ(g)};d.prototype.mV=function(e,g){var h=this.vg(e,
0),k=this.vg(e,1),m=this.vg(g,0),n=this.vg(g,1);this.Ud.lz(this.Xh(e),this.Xh(g));g==this.pl(h)&&this.Bn(h,e);g==this.pl(k)&&this.Bn(k,e);this.Dv(g);this.Bv(g);h==m&&k==n||k==m&&h==n||(this.Zn(h,this.So),this.Zn(m,this.Vi),this.So.qb(this.Vi)?(h!=m&&this.ln(h,m),k!=n&&this.ln(k,n)):(k!=m&&this.ln(k,m),h!=n&&this.ln(h,n)))};d.prototype.Dv=function(e){var g=this.vg(e,1);this.QF(e,this.vg(e,0));this.QF(e,g)};d.prototype.QF=function(e,g){var h=this.lq(e,g),k=this.dT(e,g),m=this.pl(g);h!=e?(this.Ar(k,
g,h),this.Cr(h,g,k),m==e&&this.Bn(g,h)):this.Bn(g,-1)};d.prototype.IE=function(e,g,h){var k=this.Ud.sc(e),m=this.Ud.ga(k);e=this.Qe(m);var n=this.Qe(this.a.T(m));this.a.Fr(m,g,h,!0);for(k=this.Ud.hb(k);-1!=k;k=this.Ud.hb(k)){m=this.Ud.ga(k);var p=this.Qe(m)==e;this.a.Fr(m,g,h,p)}k=g.nq(h,0).ac();g=g.nq(h,g.ul(h)-1).wc();this.IL(e,k);this.IL(n,g)};d.prototype.KF=function(e,g,h){var k=this.Xh(e),m=this.vg(e,0),n=this.vg(e,1),p=this.Vt(-1);this.th.add(p);this.$l(p,-3);this.Nf.add(p);this.nj(p,m);e=1;
for(g=g.ul(h);e<g;e++)h=this.mn(-1),this.Ik.add(h),this.Nf.add(h),this.nj(p,h),p=this.Vt(-1),this.th.add(p),this.$l(p,-3),this.Nf.add(p),this.nj(p,h);this.nj(p,n);for(k=this.Ud.sc(k);-1!=k;k=this.Ud.hb(k))if(n=this.Ud.ga(k),this.Qe(n)==m){e=0;do 0<e&&(p=this.Nf.get(e-1),this.xE(p,n),-1==this.Kz(p)&&this.wr(p,this.a.Ua(n))),p=this.Nf.get(e),e+=2,this.yE(p,n),n=this.a.T(n);while(e<this.Nf.size)}else{e=this.Nf.size-1;do e<this.Nf.size-2&&(p=this.Nf.get(e+1),this.xE(p,n),0>this.Kz(p)&&this.wr(p,this.a.Ua(n))),
p=this.Nf.get(e),e-=2,this.yE(p,n),n=this.a.T(n);while(0<=e)}this.Nf.clear(!1)};d.prototype.Qe=function(e){return this.a.Na(e,this.Eh)};d.prototype.KJ=function(e,g,h){var k=this.vg(g,0),m=new f.b;this.Zn(k,m);var n=new f.b,p=this.vg(g,1);this.Zn(p,n);var x=h.ul(e),Q=h.nq(e,0),V=new f.b;Q.qq(V);if(!m.qb(V)){if(!this.Tg){var ca=m.compare(this.Ch);V=V.compare(this.Ch);0>ca*V&&(this.Tg=!0)}this.iG(k,this.Nf);this.Ik.add(k)}!this.Tg&&1<x&&(ca=m.compare(n),Q=Q.wc(),m.compare(Q)!=ca||Q.compare(n)!=ca?this.Tg=
!0:0>Q.compare(this.Ch)&&(this.Tg=!0));Q=h.nq(e,x-1);e=Q.wc();n.qb(e)||(this.Tg||(ca=n.compare(this.Ch),V=e.compare(this.Ch),0>ca*V&&(this.Tg=!0)),this.iG(p,this.Nf),this.Ik.add(p));this.Nf.add(g);n=0;for(p=this.Nf.size;n<p;n++)e=this.Nf.get(n),h=this.kq(e),f.ad.xH(h)&&(this.Nc.zd(h,-1),this.$l(e,-1)),e!=g&&-3!=this.kq(e)&&(this.th.add(e),this.$l(e,-3));this.Nf.clear(!1)};d.prototype.vP=function(e,g){this.ge.compare(this.Nc,this.Nc.ga(e),g);this.ge.yg&&(this.ge.ks(),this.bG(e,g))};d.prototype.bG=
function(e,g){this.po=!0;e=this.Nc.ga(e);g=this.Nc.ga(g);var h=this.Ud.ao(this.Xh(e)),k=this.Ud.ao(this.Xh(g)),m=this.a.ec(h);null==m&&(null==this.qe&&(this.qe=new f.zb),this.a.gd(h,this.qe),m=this.qe);h=this.a.ec(k);null==h&&(null==this.$m&&(this.$m=new f.zb),this.a.gd(k,this.$m),h=this.$m);this.Nk.gp(m);this.Nk.gp(h);this.Nk.Ia(this.qa,!0)&&(this.Tg=!0);this.mL(e,g,-1,this.Nk);this.Nk.clear()};d.prototype.SR=function(e,g){this.po=!0;g=this.Nc.ga(g);var h=this.Ud.ao(this.Xh(g)),k=this.a.ec(h);null==
k&&(null==this.qe&&(this.qe=new f.zb),this.a.gd(h,this.qe),k=this.qe);h=this.oG(e);this.Nk.gp(k);this.a.bj(h,this.Co);this.Nk.rA(this.qa,this.Co,!0);this.mL(g,-1,e,this.Nk);this.Nk.clear()};d.prototype.ST=function(){if(0!=this.th.size)for(;0!=this.th.size;){if(this.th.size>Math.max(100,this.a.pd)){this.th.clear(!1);this.Tg=!0;break}var e=this.th.Gc();this.th.Rf();this.$l(e,-1);-1!=this.pU(e)&&this.RT(e);this.oo=!1}};d.prototype.RT=function(e){if(this.oo){var g=this.Nc.ev(this.BI,this.wI,e,!0);this.oo=
!1}else g=this.Nc.wE(e);-1==g?this.mV(this.Nc.ga(this.Nc.rG()),e):(this.$l(e,g),this.ge.yg&&(this.ge.ks(),this.bG(this.ge.Qm,g)))};d.prototype.pU=function(e){var g=this.vg(e,0);e=this.vg(e,1);this.Zn(g,this.So);this.Zn(e,this.Vi);if(f.b.oc(this.So,this.Vi)<=this.EB)return this.Tg=!0,-1;var h=this.So.compare(this.Ch),k=this.Vi.compare(this.Ch);return 0>=h&&0<k?e:0>=k&&0<h?g:-1};d.prototype.AR=function(){var e=new f.ha(0);e.Db(this.a.pd);for(var g=this.a.rr(),h=g.next();-1!=h;h=g.next())-1!=this.a.Na(h,
this.Eh)&&e.add(h);this.a.Vx(e,e.size);this.BR(e)};d.prototype.BR=function(e){this.nf.clear();this.nf.Le(e.size);this.nf.kp(new R(this.a));var g=new f.b;g.Tc();for(var h=-1,k=new f.b,m=0,n=e.size;m<n;m++){var p=e.get(m);this.a.Hc(p,k);k.qb(g)?(p=this.a.Na(p,this.Eh),this.ln(h,p)):(h=this.Qe(p),this.a.Hc(p,g),p=this.nf.Qn(p),this.ou(h,p))}};d.prototype.CR=function(){var e=new f.ha(0);e.Db(this.a.pd);for(var g=this.nf.sc(-1);-1!=g;g=this.nf.hb(g))e.add(this.nf.ga(g));this.nf.clear();this.a.Vx(e,e.size);
g=0;for(var h=e.size;g<h;g++){var k=e.get(g),m=this.Qe(k);k=this.nf.Qn(k);this.ou(m,k)}};d.prototype.iG=function(e,g){var h=this.pl(e);if(-1!=h){var k=h;do f.ad.xH(this.kq(k))&&g.add(k),k=this.lq(k,e);while(k!=h)}};d.prototype.IL=function(e,g){for(e=this.rh.sc(this.ts(e));-1!=e;e=this.rh.hb(e))this.a.wf(this.rh.ga(e),g)};d.prototype.mL=function(e,g,h,k){this.Dv(e);-1!=g&&this.Dv(g);this.KJ(0,e,k);-1!=g&&this.KJ(1,g,k);-1!=h&&(k.Jf.w(this.So),this.Zn(h,this.Vi),this.Vi.qb(this.So)||this.Ik.add(h));
h=0;for(var m=this.Ik.size;h<m;h++){var n=this.Ik.get(h),p=this.Jz(n);-1!=p&&(this.nf.zd(p,-1),this.ou(n,-1))}h=this.Xh(e);m=-1!=g?this.Xh(g):-1;this.IE(h,k,0);-1!=g&&this.IE(m,k,1);this.KF(e,k,0);-1!=g&&this.KF(g,k,1);this.Ud.kh(h);this.Bv(e);-1!=g&&(this.Ud.kh(m),this.Bv(g));h=0;for(m=this.Ik.size;h<m;h++)n=this.Ik.get(h),n==this.br&&(this.Dw=!0),p=this.Jz(n),-1==p&&(p=this.nf.wE(this.oG(n)),-1==p?(e=this.Qe(this.nf.ga(this.nf.rG())),this.ln(e,n)):this.ou(n,p));this.Ik.clear(!1)};d.prototype.Zn=
function(e,g){this.a.PG(this.Kz(e),g)};d.prototype.oG=function(e){return this.rh.ao(this.ts(e))};d.prototype.SC=function(){this.Dw=!1;this.br=-1;null==this.ge&&(this.Nc.xw=!1,this.ge=new c(this),this.Nc.so=this.ge);var e=new f.ha(0),g=null,h=null;this.wI=this.BI=-1;this.oo=!1;for(var k=this.nf.sc(-1);-1!=k;){this.oo=!1;var m=this.nf.ga(k);this.br=this.Qe(m);this.a.Hc(m,this.Ch);this.ge.dL(this.Ch.y,this.Ch.x);var n=this.pl(this.br),p=-1==n;if(!p){m=n;do{var x=this.kq(m);-1==x?(this.th.add(m),this.$l(m,
-3)):-3!=x&&e.add(x);m=this.lq(m,this.br)}while(m!=n)}if(0<e.size){this.oo=1==e.size&&1==this.th.size;p=0;for(n=e.size;p<n;p++)m=this.Nc.ga(e.get(p)),this.$l(m,-2);var Q=-2,V=-2;p=0;for(n=e.size;p<n;p++){x=e.get(p);if(-2==Q){var ca=this.Nc.Be(x);-1!=ca?(m=this.Nc.ga(ca),m=this.kq(m),-2!=m&&(Q=ca)):Q=-1}-2==V&&(x=this.Nc.hb(x),-1!=x?(m=this.Nc.ga(x),m=this.kq(m),-2!=m&&(V=x)):V=-1);if(-2!=Q&&-2!=V)break}p=0;for(n=e.size;p<n;p++)x=e.get(p),m=this.Nc.ga(x),this.Nc.zd(x,-1),this.$l(m,-1);e.clear(!1);
this.BI=-1!=Q?Q:-1;this.wI=-1!=V?V:-1;-1!=Q&&-1!=V?this.oo||this.vP(Q,V):-1==Q&&-1==V&&(this.oo=!1)}else p&&(null==g&&(g=new a(this)),g.Hh(this.Ch),this.Nc.yK(g),g.yg&&(g.ks(),this.SR(this.br,g.Qm)));this.ST();this.Dw?(this.Dw=!1,null==h&&(h=new l(this.a)),h.Hh(this.Ch),k=this.nf.yK(h)):k=this.nf.hb(k)}return this.po};d.prototype.zr=function(e){this.a=e;this.Eh=this.a.Kd();this.eb.Le(e.pd+32);this.Cd.Le(e.pd);this.rh.ku(e.pd);this.rh.vn(e.pd);this.Ud.ku(e.pd+32);this.Ud.vn(e.pd+32);for(e=this.a.kd;-1!=
e;e=this.a.Ae(e))if(f.R.Bc(this.a.dc(e)))for(x=this.a.Kb(e);-1!=x;x=this.a.Qb(x)){var g=this.a.Ha(x),h=this.a.Za(x),k=this.mn(h),m=this.Vt(h);this.nj(m,k);Q=this.a.T(h);h=0;for(g-=2;h<g;h++){var n=this.a.T(Q),p=this.mn(Q);this.nj(m,p);m=this.Vt(Q);this.nj(m,p);Q=n}this.a.Lb(x)?(p=this.mn(Q),this.nj(m,p),m=this.Vt(Q),this.nj(m,p),this.nj(m,k)):(p=this.mn(Q),this.nj(m,p))}else for(var x=this.a.Kb(e);-1!=x;x=this.a.Qb(x)){var Q=this.a.Za(x);k=0;for(g=this.a.Ha(x);k<g;k++)this.mn(Q),Q=this.a.T(Q)}this.AR()};
return d}();f.yD=b})(fa||(fa={}));(function(f){var R=function(l){function c(a,b,d){var e=l.call(this)||this;if(void 0!==a)if(void 0!==d){e.description=f.ke.ug();var g=new f.Id;g.H(a,b,d);e.LC(g)}else if(void 0!==b)e.description=f.ke.ug(),e.nb(a,b);else if(a instanceof f.oa)e.description=a;else if(a instanceof f.b)e.description=f.ke.ug(),e.nb(a);else if(a instanceof c)e.description=a.description,e.nb(a.Ce(),a.lf()),null!==a.ia&&(e.ia=a.ia.slice(0));else throw f.f.I();else e.description=f.ke.ug();return e}
Fa(c,l);c.prototype.w=function(a){if(void 0!==a){if(this.Ac())throw f.f.Y("This operation should not be performed on an empty geometry.");a.ka(this.ia[0],this.ia[1])}else{if(this.Ac())throw f.f.Y("This operation should not be performed on an empty geometry.");a=new f.b;a.ka(this.ia[0],this.ia[1]);return a}};c.prototype.nb=function(a,b){"number"===typeof a?(this.vc(),null==this.ia&&this.Mp(),this.ia[0]=a,this.ia[1]=b):(this.vc(),this.nb(a.x,a.y))};c.prototype.kA=function(){if(this.Ac())throw f.f.Y("This operation should not be performed on an empty geometry.");
var a=new f.Id;a.x=this.ia[0];a.y=this.ia[1];a.z=this.description.VG()?this.ia[2]:f.oa.me(1);return a};c.prototype.LC=function(a){this.vc();var b=this.hasAttribute(1);b||f.oa.pH(1,a.z)||(this.le(1),b=!0);null==this.ia&&this.Mp();this.ia[0]=a.x;this.ia[1]=a.y;b&&(this.ia[2]=a.z)};c.prototype.Ce=function(){if(this.Ac())throw f.f.Y("This operation should not be performed on an empty geometry.");return this.ia[0]};c.prototype.KC=function(a){this.setAttribute(0,0,a)};c.prototype.lf=function(){if(this.Ac())throw f.f.Y("This operation should not be performed on an empty geometry.");
return this.ia[1]};c.prototype.eL=function(a){this.setAttribute(0,1,a)};c.prototype.vT=function(){return this.Rc(1,0)};c.prototype.$Y=function(a){this.setAttribute(1,0,a)};c.prototype.OS=function(){return this.Rc(2,0)};c.prototype.KY=function(a){this.setAttribute(2,0,a)};c.prototype.xc=function(){return this.lG(3,0)};c.prototype.PK=function(a){this.setAttribute(3,0,a)};c.prototype.Rc=function(a,b){var d=this.description.Yf(a);return 0<=d?this.ia[this.description.dk(d)+b]:f.oa.me(a)};c.prototype.lG=
function(a,b){var d=this.description.Yf(a);return 0<=d?this.ia[this.description.dk(d)+b]:f.oa.me(a)};c.prototype.setAttribute=function(a,b,d){this.vc();var e=this.description.Yf(a);0>e&&(this.le(a),e=this.description.Yf(a));null==this.ia&&this.Mp();this.ia[this.description.dk(e)+b]=d};c.prototype.F=function(){return 33};c.prototype.pb=function(){return 0};c.prototype.Ka=function(){this.vc();null!=this.ia&&(this.ia[0]=NaN,this.ia[1]=NaN)};c.prototype.Ln=function(a){if(null!=this.ia){for(var b=f.ke.ox(a,
this.description),d=[],e=0,g=0,h=a.Ca;g<h;g++){var k=a.jd(g),m=f.oa.Sa(k);if(-1==b[g]){var n=f.oa.me(k);for(k=0;k<m;k++)d[e]=n,e++}else for(n=this.description.dk(b[g]),k=0;k<m;k++)d[e]=this.ia[n],e++,n++}this.ia=d}this.description=a};c.prototype.Mp=function(){this.pK(this.description.Ge.length);c.PE(this.description.Ge,this.ia,this.description.Ge.length);this.ia[0]=NaN;this.ia[1]=NaN};c.prototype.Qc=function(a){if(a instanceof f.xd){if(!this.Ac()){var b=this.w();a.Zj(b,b);this.nb(b)}}else this.Ac()||
(this.le(1),b=this.kA(),this.LC(a.vp(b)))};c.prototype.copyTo=function(a){if(33!=a.F())throw f.f.I();a.vc();null==this.ia?(a.Ka(),a.ia=null,a.rg(this.description)):(a.rg(this.description),a.pK(this.description.Ge.length),c.PE(this.ia,a.ia,this.description.Ge.length))};c.prototype.Ga=function(){return new c(this.description)};c.prototype.u=function(){return this.Ac()};c.prototype.Ac=function(){return null==this.ia||isNaN(this.ia[0])||isNaN(this.ia[1])};c.prototype.qn=function(a){a.Ka();this.description!=
a.description&&a.rg(this.description);a.Nb(this)};c.prototype.s=function(a){this.Ac()?a.Ka():(a.o=this.ia[0],a.A=this.ia[1],a.v=this.ia[0],a.B=this.ia[1])};c.prototype.ip=function(a){if(this.Ac())a.Ka();else{var b=this.kA();a.o=b.x;a.A=b.y;a.ef=b.z;a.v=b.x;a.B=b.y;a.Lg=b.z}};c.prototype.Qf=function(a,b){var d=new f.uc;if(this.Ac())return d.Ka(),d;a=this.Rc(a,b);d.fa=a;d.ja=a;return d};c.prototype.pK=function(a){if(null==this.ia)this.ia=f.L.Xf(a);else if(this.ia.length<a){for(var b=this.ia.slice(0),
d=this.ia.length;d<a;d++)b[d]=0;this.ia=b}};c.PE=function(a,b,d){if(0<d)for(d=0;d<a.length;d++)b[d]=a[d]};c.prototype.Ib=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.Ac())return a.Ac()?!0:!1;for(var b=0,d=this.description.Ge.length;b<d;b++)if(this.ia[b]!=a.ia[b])return!1;return!0};c.prototype.fc=function(){var a=this.description.fc();if(!this.Ac())for(var b=0,d=this.description.Ge.length;b<d;b++){var e=this.ia[b];e=f.L.truncate(e^e>>>32);a=
f.L.Zh(e,a)}return a};c.prototype.sg=function(){return null};return c}(f.R);f.Ra=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b){void 0!==c&&(this.x=c,this.y=a,this.z=b)}l.construct=function(c,a,b){var d=new l;d.x=c;d.y=a;d.z=b;return d};l.prototype.H=function(c,a,b){this.x=c;this.y=a;this.z=b};l.prototype.Tx=function(){this.z=this.y=this.x=0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x/=c,this.y/=c,this.z/=c)};l.prototype.length=function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)};l.prototype.sub=function(c){return new l(this.x-c.x,this.y-c.y,this.z-c.z)};l.prototype.Gg=function(c){new l(this.x*c,this.y*c,this.z*c)};l.prototype.iE=function(){this.x=NaN};l.prototype.Ey=function(){return isNaN(this.x)};l.prototype.Vh=function(c){return this.x*c.x+this.y*c.y+this.z*c.z};return l}();f.Id=R})(fa||(fa={}));(function(f){var R=function(){function l(c,a,b){this.mx=this.mB=null;this.eg=a;this.YU=a.y-b;this.XU=a.y+b;this.ir=0;this.OA=c;this.qa=b;this.jV=
b*b;this.PA=0!=b;this.sw=!1}l.prototype.result=function(){return 0!=this.ir?1:0};l.prototype.hO=function(c){c=c.cc(c.ae(this.eg,!1));return f.b.oc(c,this.eg)<=this.jV?!0:!1};l.prototype.TF=function(c){if(!this.PA&&(this.OA&&this.eg.qb(c.ac())||this.eg.qb(c.wc())))this.sw=!0;else if(c.na==this.eg.y&&c.na==c.ma){if(this.OA&&!this.PA){var a=Math.max(c.ra,c.pa);this.eg.x>Math.min(c.ra,c.pa)&&this.eg.x<a&&(this.sw=!0)}}else{var b=!1;a=Math.max(c.ra,c.pa);this.eg.x>a?b=!0:this.eg.x>=Math.min(c.ra,c.pa)&&
(b=0<c.uq(!0,this.eg.y,this.mx,null)&&this.mx[0]<=this.eg.x);if(b){if(this.eg.y==c.ac().y){if(this.eg.y<c.wc().y)return}else if(this.eg.y==c.wc().y&&this.eg.y<c.ac().y)return;this.ir=this.OA?this.ir^1:this.ir+(c.ac().y>c.wc().y?1:-1)}}};l.prototype.cu=function(c){var a=c.Qf(0,1);if(a.fa>this.XU||a.ja<this.YU)return!1;if(this.PA&&this.hO(c))return!0;if(a.fa>this.eg.y||a.ja<this.eg.y)return!1;null==this.mB&&(this.mB=[null,null,null,null,null]);null==this.mx&&(this.mx=[0,0,0]);a=c.QG();if(0<a)for(c=
0;c<a;c++){var b=this.mB[c].get();this.TF(b);if(this.sw)return!0}else if(this.TF(c),this.sw)return!0;return!1};l.WD=function(c,a,b){a=new l(0==c.$n(),a,b);for(c=c.Ba();c.Ta();)for(;c.Aa();)if(b=c.aa(),a.cu(b))return-1;return a.result()};l.XN=function(c,a,b,d){var e=new f.g;c.Zb(e);e.O(d,d);var g=new l(0==c.$n(),b,d);c=c.Ba();var h=new f.g;h.H(e);h.v=b.x+d;h.A=b.y-d;h.B=b.y+d;b=a.Vz(h,d);for(d=b.next();-1!=d;d=b.next())if(c.Rb(a.ga(d)),c.Aa()&&(d=c.aa(),g.cu(d)))return-1;return g.result()};l.Jm=function(c,
a,b){if(c.u())return 0;var d=new f.g;c.Zb(d);d.O(b,b);if(!d.contains(a))return 0;d=c.ib;if(null!=d){var e=d.oi;if(null!=e){e=e.Xl(a.x,a.y);if(1==e)return 1;if(0==e)return 0}d=d.Hb;if(null!=d)return l.XN(c,d,a,b)}return l.WD(c,a,b)};l.yU=function(c,a,b,d){if(c.u())return 0;var e=new f.g;c.Zb(e);e.O(d,d);if(!e.contains(a,b))return 0;e=c.ib;if(null!=e&&(e=e.oi,null!=e)){e=e.Xl(a,b);if(1==e)return 1;if(0==e)return 0}return l.WD(c,f.b.construct(a,b),d)};l.wU=function(c,a,b){return a.u()?0:l.Jm(c,a.w(),
b)};l.zA=function(c,a,b,d,e){var g=new f.g;c.Zb(g);g.O(d,d);if(!g.contains(b))return 0;var h=new l(!0,b,d);if(null!=e){var k=new f.g;k.H(g);k.v=b.x+d;k.A=b.y-d;k.B=b.y+d;c=c.Ba();d=e.Vz(k,d);for(k=d.next();-1!=k;k=d.next())if(c.Rb(e.ga(k),a),c.Aa()&&c.Pa==a&&(k=c.aa(),h.cu(k)))return-1}else if(c=c.Ba(),c.oC(a),c.Ta())for(;c.Aa();)if(k=c.aa(),h.cu(k))return-1;return h.result()};l.yA=function(c,a,b){var d=new f.g;c.Zb(d);d.O(b,b);if(!d.contains(a))return 0;a=new l(!1,a,b);for(b=c.Ba();b.Ta();)if(!(0>
c.rm(b.Pa))){for(a.ir=0;b.Aa();)if(d=b.aa(),a.cu(d))return-1;if(0!=a.ir)return 1}return a.result()};l.x_=function(c,a,b,d,e){var g=c.Ba();g.oC(a);if(!g.Ta()||!g.Aa())throw f.f.Y("corrupted geometry");for(a=2;2==a&&g.Aa();)a=g.aa().cc(.5),a=l.zA(c,b,a,d,e);if(2==a)throw f.f.Y("internal error");return 1==a?!0:!1};l.Wl=function(c,a){c=c.D();return 16>c?!1:2*c+Math.log(c)/Math.log(2)*a<1*c*a};return l}();f.Oe=R})(fa||(fa={}));(function(f){var R=function(l){function c(a){return l.call(this,!0,a)||this}
Fa(c,l);c.prototype.Ga=function(){return new c(this.description)};c.prototype.pb=function(){return 2};c.prototype.F=function(){return 1736};c.prototype.jH=function(a,b,d){this.dU(a,b,d)};c.prototype.DS=function(){this.VS()};return c}(f.Zk);f.Fa=R})(fa||(fa={}));(function(f){(function(R){R[R.PiPOutside=0]="PiPOutside";R[R.PiPInside=1]="PiPInside";R[R.PiPBoundary=2]="PiPBoundary"})(f.ZM||(f.ZM={}));f.Zc=function(){function R(){}R.wH=function(l,c,a){l=f.Oe.wU(l,c,a);return 0==l?0:1==l?1:2};R.Td=function(l,
c,a){l=f.Oe.Jm(l,c,a);return 0==l?0:1==l?1:2};R.xU=function(l,c,a,b){l=f.Oe.yU(l,c,a,b);return 0==l?0:1==l?1:2};R.n0=function(l,c,a,b){return 0==f.Oe.zA(l,c,a,b,null)?0:1};R.yA=function(l,c,a){return 0==f.Oe.yA(l,c,a)?0:1};R.BZ=function(l,c,a,b,d){if(c.length<a||d.length<a)throw f.f.I();for(var e=0;e<a;e++)d[e]=R.Td(l,c[e],b)};R.CZ=function(l,c,a,b,d){if(c.length/2<a||d.length<a)throw f.f.I();for(var e=0;e<a;e++)d[e]=R.xU(l,c[2*e],c[2*e+1],b)};R.yL=function(l,c,a,b,d){if(1736==l.F())R.BZ(l,c,a,b,
d);else if(197==l.F()){var e=new f.g;l.s(e);R.iO(e,c,a,b,d)}else throw f.f.Y("invalid_call");};R.J0=function(l,c,a,b,d){if(1736==l.F())R.CZ(l,c,a,b,d);else if(197==l.F()){var e=new f.g;l.s(e);R.jO(e,c,a,b,d)}else throw f.f.Eb();};R.iO=function(l,c,a,b,d){if(c.length<a||d.length<a)throw f.f.I();if(l.u())for(b=0;b<a;b++)d[b]=0;else for(l.O(.5*-b,.5*-b),l.O(.5*b,.5*b),b=0;b<a;b++)l.contains(c[b])?d[b]=1:l.contains(c[b])?d[b]=2:d[b]=0};R.jO=function(l,c,a,b,d){if(c.length/2<a||d.length<a)throw f.f.I();
if(l.u())for(b=0;b<a;b++)d[b]=0;else for(l.O(.5*-b,.5*-b),l.O(.5*b,.5*b),b=0;b<a;b++)l.contains(c[2*b],c[2*b+1])?d[b]=1:l.contains(c[2*b],c[2*b+1])?d[b]=2:d[b]=0};R.EZ=function(l,c,a,b,d){for(var e=0;e<a;e++)d[e]=l.Zs(c[e],b)?2:0};R.DZ=function(l,c,a,b,d){var e=l.ib,g=null;null!=e&&(g=e.oi);e=a;for(var h=0;h<a;h++)if(d[h]=1,null!=g){var k=c[h];0==g.Xl(k.x,k.y)&&(d[h]=0,e--)}if(0!=e)for(l=l.Ba();l.Ta()&&0!=e;)for(;l.Aa()&&0!=e;)for(g=l.aa(),h=0;h<a&&0!=e;h++)1==d[h]&&g.Zs(c[h],b)&&(d[h]=2,e--);for(h=
0;h<a;h++)1==d[h]&&(d[h]=0)};R.zL=function(l,c,a,b,d){var e=l.F();if(1607==e)R.DZ(l,c,a,b,d);else if(f.R.Ic(e))R.EZ(l,c,a,b,d);else throw f.f.Y("Invalid call.");};return R}()})(fa||(fa={}));(function(f){var R=function(l){function c(a,b){if(2==arguments.length){var d=l.call(this,!1,a.description)||this;d.xf(a);d.lineTo(b)}else d=l.call(this,!1,a)||this;return d}Fa(c,l);c.prototype.Ga=function(){return new c(this.description)};c.prototype.pb=function(){return 1};c.prototype.F=function(){return 1607};
c.prototype.jH=function(a,b,d){this.eU(a,b,d)};return c}(f.Zk);f.Oa=R})(fa||(fa={}));(function(f){var R=function(){function l(){}l.prototype.progress=function(){return!0};l.Sp=function(c){if(null!=c&&!c.progress(-1,-1))throw f.f.ED();};return l}();f.Ep=R})(fa||(fa={}));(function(f){(function(a){a[a.clipWithInputHorizon=1]="clipWithInputHorizon";a[a.clipWithOutputHorizon=2]="clipWithOutputHorizon"})(f.XL||(f.XL={}));var R=function(){function a(){this.ll=3;this.qz=this.rv=NaN}a.prototype.CT=function(){return this.Ps(1)};
a.prototype.DT=function(){return this.Ps(2)};a.prototype.Ps=function(b){return 0!=(this.ll&b)};a.prototype.Cf=function(){var b=new a;b.rv=this.rv;b.qz=this.qz;b.ll=this.ll;return b};return a}();f.g_=R;(function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon";a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"})(f.YL||(f.YL={}));var l=function(){function a(){this.ll=0}a.prototype.Ps=function(b){return 0!=(this.ll&b)};a.$d=function(b){var d=new a;d.ll=b.ll;return d};a.prototype.uN=
function(b){this.ll=b.ll};return a}();f.h_=l;var c=function(){function a(b,d,e){this.ee=b;this.Je=d;this.cg=new f.g;this.cg.H(e);this.TU=b.fc()+d.fc()+this.cg.fc().toString()}a.prototype.fc=function(){return this.TU};a.prototype.Ib=function(b){return this==b||this.ee.Ib(b.ee)&&this.Je.Ib(b.Je)&&this.cg.Ib(b.cg)};return a}();f.p_=c;c=function(){function a(){this.Je=this.ee=null;this.eI=new R;this.fI=new l;this.cx=this.He=null;this.Wq=this.xl=!0}a.os=function(b,d,e,g){var h;void 0===g&&(g=null);void 0===
h&&(h=null);var k=new a;k.Jp(b,d,e,g,h);return k};a.prototype.Jp=function(b,d,e,g,h){if(null==b||null==d)throw f.f.Y("invalidArgument");this.ee=b;this.Je=d;this.Wq=this.xl=!1;null!=g&&(this.eI=g.Cf());null!=h&&this.fI.uN(h);h=!1;1==d.Fb()&&null!=g&&(g=g.rv,isNaN(g)||0==g||(h=!0));if(b==d)this.xl=!h,this.Wq=!0;else{g=b.Fb();var k=d.Fb();if(0==g||0==k){if(null!=e)throw f.f.I();null!=b.Ld()&&null!=d.Ld()&&(this.xl=b.Ld().Ib(d.Ld()))}else 3==g||3==k?this.xl=b.Ib(d):this.ee.FT(this.Je)?this.xl=!h:this.xl=
!1,this.He=e,null!=this.He&&this.He.Px(),this.Wq=(null==this.He||0==this.He.count())&&this.ee.hc().Ib(this.Je.hc())}this.ML()};a.prototype.Qv=function(){var b=new a;b.ee=this.Je;b.Je=this.ee;null!=this.He&&(b.He=this.He.Qv());b.xl=this.xl;b.Wq=this.Wq;b.ML();return b};a.prototype.xq=function(){return this.xl};a.prototype.BS=function(){return this.eI.Cf()};a.prototype.Ib=function(b){return b==this?!0:b instanceof a&&this.ee.Ib(b.ee)&&this.Je.Ib(b.Je)?this.He==b.He?!0:null!=this.He&&null!=b.He&&this.He.Ib(b.He)?
!0:!1:!1};a.prototype.ML=function(){this.cx=new f.Bp(this)};a.I0={};return a}();f.Ur=c})(fa||(fa={}));(function(f){var R=function(){function l(){}l.Wp=function(c){return c*l.UX};l.Ux=function(c,a){return l.qQ(a-c)};l.rQ=function(c){if(-360<=c&&720>c)return 0>c?c+=360:360<=c&&(c-=360),c;c=f.Tb.ZL(c);0>c&&(c+=360);return c};l.qQ=function(c){c=l.rQ(c);180<c&&(c-=360);return c};l.S_=.0174532925199433;l.UX=57.29577951308232;return l}();f.Nr=R;f.Lh=function(){function l(){}l.qj=function(c,a){var b=new f.g;
c.s(b);var d=f.ab.nh(a),e=new f.g;e.H(d);e.o=b.o;e.v=b.v;e.O(.01*e.ca(),0);a=f.la.Qd(a,b,!1);return e.contains(b)?c:f.Yd.clip(c,e,a,0)};l.Ss=function(c,a,b,d,e){if(!f.ab.Cc(a))throw f.f.I();var g=f.la.Ng(a,c,!1),h=f.ab.nh(a),k=f.ab.hc(a),m=k.Ld().gi,n=f.ab.cw(k);k=f.ab.Mv(k);n*=2-n;var p=new f.uc;h.sn(p);var x=[[0,0],[0,0]];2==f.je.Fb(a)?d?(x[0][0]=l.nn(e,p),x[0][1]=h.cq(),f.ab.du(),h=x[0][0]*m):(x[0][0]=h.lk(),x[0][1]=e,f.ab.du(),h=x[0][1]*m):h=e*m;if(!d&&0!=h)throw f.f.I();var Q=new f.da,V=new f.Yc;
c=V.Bb(c);for(var ca=[0],ba=new f.b,ea=new f.b,da=new f.b,ma=new f.b,za=new f.b,Ba=new f.b,Ea=V.Kb(c);-1!=Ea;Ea=V.Qb(Ea)){var Ma=V.Za(Ea);V.w(Ma,da);for(var Pa=!1,Ra=Ma=V.T(Ma);-1!=Ra;Ra=V.T(Ra)){if(Ra==Ma){if(Pa)break;Pa=!0}V.w(Ra,ma);if(d&&g<e-da.x&&ma.x-e>g||g<e-ma.x&&da.x-e>g||!d&&g<-da.y&&ma.y>g||g<-ma.y&&da.y>g){do if(!(Math.abs(da.x-ma.x)>=.5*p.N())){2==f.je.Fb(a)?(x[0][0]=l.nn(da.x,p),x[0][1]=da.y,x[1][0]=l.nn(ma.x,p),x[1][1]=ma.y,f.ab.uX(),za.x=x[0][0]*m,za.y=x[0][1]*m,Ba.x=x[1][0]*m,Ba.y=
x[1][1]*m):(za.x=da.x*m,za.y=da.y*m,Ba.x=ma.x*m,Ba.y=ma.y*m);Ba.x=6.283185307179586*(ma.x-da.x)/p.N()+za.x;if(d){if(ea.x=h,ea.y=l.uA(k,n,za,Ba,h,b),isNaN(ea.y))break}else{ea.x=l.sA(k,n,za,Ba,b);if(isNaN(ea.x))break;ea.y=0}f.gb.Ad(k,n,za.x,za.y,Ba.x,Ba.y,Q,null,null,b);var Qa=Q.j;f.gb.Ad(k,n,za.x,za.y,ea.x,ea.y,Q,null,null,b);var Sa=Q.j;2==f.je.Fb(a)?(x[0][0]=ea.x/m,x[0][1]=ea.y/m,f.ab.pS(),d?(ba.y=x[0][1],ba.x=e):(ba.x=l.Ws(x[0][0],da.x,ma.x,p),ba.y=e)):d?(ba.x=e,ba.y=ea.y/m):(ba.x=l.Ws(ea.x/m,da.x,
ma.x,p),ba.y=e);ca[0]=0<Qa?f.L.Yj(Sa/Qa,0,1):.5;0!=ca[0]&&1!=ca[0]&&(Qa=V.Ma(Ra),V.em(Qa,ca,1),V.nb(V.T(Qa),ba.x,ba.y))}while(0)}da.K(ma)}}return V.ye(c)};l.vm=function(c,a,b,d,e){if(c.u())return c;var g=f.ab.Sd(a);return l.aq(c,b-180*g,360*g,a,d,e,!0)};l.uA=function(c,a,b,d,e,g){if(3.141592653589793<=Math.abs(b.x-d.x)||!l.mo(b.x,d.x,e))return NaN;if(b.x>d.x)var h=d;else h=b,b=d;d=new f.da(0);var k=new f.da(0),m=new f.da(0);f.gb.Ad(c,a,h.x,h.y,b.x,b.y,k,d,null,g);var n=k.j,p=0,x=1,Q=new f.b;for(Q.K(h);n*
(x-p)>1E-12*c;){var V=.5*(p+x);f.gb.tj(c,a,h.x,h.y,n*V,d.j,k,m,g);Q.x=k.j;Q.y=m.j;if(Q.x==e)break;if(l.mo(h.x,Q.x,e))x=V;else if(l.mo(b.x,Q.x,e))p=V;else return NaN}return Q.y};l.mo=function(c,a,b){c=R.Wp(c);a=R.Ux(c,R.Wp(a));b=R.Ux(c,R.Wp(b));return 0==b||0<a&&0<b&&b<=a||0>a&&0>b&&b>=a?!0:!1};l.nn=function(c,a){var b=a.ja-a.fa;return a.ru(c-Math.floor((c-a.fa)/b)*b)};l.Ws=function(c,a,b,d){var e=new f.uc;e.H(a,b);b=d.N();c=Math.floor((c-a)/b)*b+c;for(e=e.hf();Math.abs(c-e)>Math.abs(c+b-e);)c+=b;
return c};l.sA=function(c,a,b,d,e){if(b.y>d.y)var g=d;else g=b,b=d;d=new f.uc;d.H(g.y,b.y);if(!d.contains(0)||3.141592653589793<=Math.abs(g.x-b.x))return NaN;if(g.x==b.x)return g.x;var h=new f.da(0),k=new f.da(0),m=new f.da(0);f.gb.Ad(c,a,g.x,g.y,b.x,b.y,k,h,null,e);var n=k.j,p=0,x=1,Q=new f.b;for(Q.K(g);n*(x-p)>1E-12*c;){var V=.5*(p+x);f.gb.tj(c,a,g.x,g.y,n*V,h.j,k,m,e);Q.x=k.j;Q.y=m.j;d.H(g.y,Q.y);if(0==Q.y)break;if(d.contains(0))x=V;else if(d.H(b.y,Q.y),d.contains(0))p=V;else return NaN}return Q.x};
l.aq=function(c,a,b,d,e,g,h){var k=new f.g;c.s(k);if(k.u())return c;var m=new f.uc;k.sn(m);var n=new f.uc;n.H(a,a+b);if(n.contains(m)&&n.ja!=m.ja)return c;var p=new f.g;p.H(k);var x=c.F();if(33==x){p=e?c:c.Cf();k=p.Ce();if(k<n.fa||k>=n.ja||h&&k==n.ja)k+=Math.ceil((n.fa-k)/b)*b,k=n.ru(k),p.KC(k);return p}if(550==x){p=e?c:c.Cf();d=p.Va(0);x=2*p.D();c=!1;for(e=0;e<x;e+=2)if(k=d.read(e),k<n.fa||k>=n.ja||h&&k==n.ja)c=!0,k+=Math.ceil((n.fa-k)/b)*b,k=n.ru(k),d.write(e,k);c&&p.Oc(1993);return p}if(n.contains(m))return c;
if(197==x)return b=e?c:c.Cf(),k.Ia(p),b.mp(k),b;var Q=.1*Math.max(k.ca(),k.N());p.O(0,Q);h=c;n=d.ce(0);c=f.Jh.local();for(e=new f.xd;;){var V=Math.floor((m.fa-a)/b),ca=Math.ceil((m.ja-a)/b);if(3<ca-V){V=Math.floor(.5*(ca+V));p.o=k.o-Q;p.v=a+b*V;var ba=f.Yd.clip(h,p,n,g);p.o=p.v;p.v=k.v+Q;var ea=f.Yd.clip(h,p,n,g);e.mg((V-ca)*b,0);ea.Qc(e);1736==x?h=c.U(ba,ea,d,null):(h=ba,h.add(ea,!1));h.s(k);k.sn(m)}else break}p.o=a;p.v=a+b;a=new f.g;a.H(p);a.O(n,0);a=Math.floor((k.o-p.o)/b)*b;0!=a?(p.move(a,0),
e.mg(-a,0)):e.zC();a=1607==x?new f.Oa(h.description):new f.Fa(h.description);g=new f.g;for(m=new f.g;k.v>p.o;){Q=f.Yd.clip(h,p,n,0);Q.s(m);if(1607==x?!Q.u()&&(m.N()>n||m.ca()>n):!Q.u()&&(1736!=x||m.N()>n))Q.Qc(e),Q.s(m),a.s(g),g.O(n,n),g.isIntersecting(m)&&1736==x?a=c.U(a,Q,d,null):a.add(Q,!1);p.move(b,0);e.shift(-b,0)}return a};l.NJ=function(c,a,b,d){var e=new f.Hd(b.description);e.yd(b,0,-1);e=f.ab.$g(e,c,a);var g=b.D();d.Ka();if(!f.ab.Cc(c)||g!=e.D())return!1;var h=new f.g;b.s(h);var k=new f.g;
e.s(k);h=h.N();k=k.N();if(0!=h&&0!=k){if(k/=h,c=f.ab.nh(a).N()/f.ab.nh(c).N(),1E-10<Math.abs(k/c-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);for(b=0;b<g;b++)c=e.xa(b),d.nb(b,c);return!0};l.vA=function(){throw f.f.Me();};return l}()})(fa||(fa={}));(function(f){var R;(function(c){c[c.Clip=0]="Clip";c[c.DontClip=1]="DontClip";c[c.PannableFold=2]="PannableFold"})(R=f.zi||(f.zi={}));var l;(function(c){c[c.Geodesic=0]="Geodesic";c[c.Loxodrome=1]="Loxodrome";c[c.GreatElliptic=2]="GreatElliptic";
c[c.NormalSection=3]="NormalSection";c[c.ShapePreserving=4]="ShapePreserving"})(l=f.eM||(f.eM={}));f.Ab=function(){function c(){}c.dw=function(a,b,d){if(d||0<b){a=a.toString(f.Pc.PE_STR_NAME_CANON|f.Pc.PE_STR_AUTH_NONE);b=[];for(d=0;d<a.length;d++)b[d]="a"<=a[d]&&"z">=a[d]?b[d]=a[d].toUpperCase():a[d];return b.join()}return a.toString(f.Pc.PE_STR_AUTH_TOP)};c.Tr=function(a,b,d,e){var g=e.length,h=d.D();if(0!=h){var k=d.Va(0),m=Math.min(h,g),n=0,p=a.wg();isNaN(b)&&(b=0);var x=a.Cc();a=x?a.hc().be().N():
0;for(var Q=179*a/360;0<h;){k.dC(n<<1,m,e);f.Kh.projToGeogCenter(p,m,e,b);if(x)for(var V=0;V<m;V++){var ca=e[V][0]-b,ba=f.Tb.sign(ca),ea=k.read(2*(n+V));0>ba*f.Tb.sign(ea)&&Math.abs(ca)>Q&&(e[V][0]+=-ba*a)}k.dD(n<<1,m,e);n+=m;h-=m;m=Math.min(h,g)}d.Oc(1993)}};c.o_=function(a,b,d,e){var g=a.wg();isNaN(b)&&(b=0);var h=d.Ce();e[0][0]=h;e[0][1]=d.lf();f.Kh.projToGeogCenter(g,1,e,b);a.Cc()&&(b=f.Tb.sign(e[0][0]-b),0>b*f.Tb.sign(h)&&(a=a.hc().be().N(),Math.abs(e[0][0])>179*a/360&&(e[0][0]-=b*a)));d.nb(e[0][0],
e[0][1])};c.QM=function(a,b,d,e){var g=0,h=a.wg();isNaN(g)&&(g=0);var k=a.Cc(),m=a.Sd();a=360*m;m*=179;for(var n=e.length,p=0;p<d;){for(var x=p;x<d&&b[x].isNaN();++x)p++;var Q=Math.min(n,d-p);if(0<Q){x=1;for(var V=p+1;x<Q;++x,++V)if(b[V].isNaN()){Q=x;break}f.la.nz(e,b,p,Q);f.Kh.projToGeogCenter(h,Q,e,g);if(k)for(x=0,V=p;x<Q;++x,++V){var ca=b[V].x,ba=e[x][0]-g,ea=f.Tb.sign(ba);0>ea*f.Tb.sign(ca)&&Math.abs(ba)>m&&(e[x][0]-=ea*a)}f.la.mz(b,p,e,Q);p+=Q}}};c.qy=function(a,b,d){var e=d.length,g=b.D();if(!(1>
g)){var h=b.Va(0),k=Math.min(g,e),m=0,n=a.wg(),p=a.Cc(),x=p?a.be().N():0,Q=179*x/360,V=0;for(p&&(V=a.Wh());0<g;){h.dC(m<<1,k,d);f.Kh.geogToProj(n,k,d);if(p)for(a=0;a<k;a++){var ca=d[a][0],ba=f.Tb.sign(ca),ea=h.read(2*(m+a))-V;0>ba*f.Tb.sign(ea)&&Math.abs(ca)>Q&&(d[a][0]+=-ba*x)}h.dD(m<<1,k,d);m+=k;g-=k;k=Math.min(g,e)}b.Oc(1993)}};c.n_=function(a,b,d){if(!b.u()){var e=a.wg();d[0][0]=b.Ce();d[0][1]=b.lf();f.Kh.geogToProj(e,1,d);if(a.Cc()){e=f.Tb.sign(d[0][0]);var g=a.Wh();0>e*f.Tb.sign(b.Ce()-g)&&
(a=a.be().N(),Math.abs(d[0][0])>179*a/360&&(d[0][0]-=e*a))}b.nb(d[0][0],d[0][1])}};c.PM=function(a,b,d,e){if(0!=d){var g=a.wg(),h=a.Cc(),k=h?a.be().N():0,m=179*k/360,n=0;h&&(n=a.Wh());for(a=0;a<d;){for(var p=a;p<d&&b[p].isNaN();++p)a++;var x=Math.min(e.length,d-a);if(0<x){p=1;for(var Q=a+1;p<x;++p,++Q)if(b[Q].isNaN()){x=p;break}f.la.nz(e,b,a,x);f.Kh.geogToProj(g,x,e);if(h)for(p=0,Q=a;p<x;p++){var V=e[p][0],ca=f.Tb.sign(V);0>ca*f.Tb.sign(b[Q].x-n)&&Math.abs(V)>m&&(e[p][0]-=ca*k)}f.la.mz(b,a,e,x);a+=
x}}}};c.Sr=function(a,b,d,e){var g=b.D();if(0!=g){var h=b.Va(0),k=a.ee,m=a.Je,n=k.hc().qk(),p=m.hc().qk(),x=k.Sd(),Q=m.Sd();a=a.He;if(null==a||0==a.count()){d=n/p;e=(k.Cm()-m.Cm())*Q;p=-90*x;a=90*x;n=!1;Q=1;for(k=2*g;Q<k;)x=h.get(Q),m=f.L.Yj(x,p,a),m!=x&&(h.set(Q,m),n=!0),Q+=2;if(0!=e||1!=d)for(n=!0,p=new f.b,Q=0;Q<g;Q++)h.mc(2*Q,p),p.x*=d,p.x+=e,p.y*=d,h.Au(2*Q,p);n&&b.Oc(1993)}else{k=e.length;m=Math.min(g,k);var V=f.L.Xf(m),ca=null,ba=0,ea=NaN,da=NaN,ma=360*Q,za=Q/x;d&&(da=90*Q,ea=89.9*x,ca=f.L.Xf(m));
for(var Ba=!0,Ea=0;0!=g;){x=!1;h.dC(ba<<1,m,e);for(Q=0;Q<m;Q++)V[Q]=e[Q][0];if(d)for(Q=0;Q<m;Q++){var Ma=Math.abs(e[Q][1])-ea;0<Ma&&(x=e[Q][1],e[Q][1]=f.Tb.hl(ea,x),ca[Q]=f.Tb.hl(Ma,x),x=!0)}Q=e[0][0];a.transform(e,m,n,p);Ba&&(Ea=e[0][0]-za*Q,Ba=!1);for(Q=0;Q<m;Q++)Ma=e[Q][0]-V[Q]*za-Ea,200<Math.abs(Ma)&&(e[Q][0]=0<Ma?e[Q][0]-ma:e[Q][0]+ma);if(x){for(Q=0;Q<m;Q++)0!=ca[Q]&&(e[Q][1]+=za*ca[Q],e[Q][1]>da?e[Q][1]=da:e[Q][1]<-da&&(e[Q][1]=-da));for(x=0;x<m;x++)ca[x]=0}h.dD(ba<<1,m,e);ba+=m;g-=m;m=Math.min(g,
k)}b.Oc(1993)}}};c.m_=function(a,b,d,e){if(b.u())return!1;var g=a.ee,h=a.Je,k=a.He,m=g.hc().qk(),n=h.hc().qk();e[0][0]=b.Ce();e[0][1]=b.lf();if(null!=k&&0<k.count()){a=!0;var p=!1,x=NaN,Q=0,V=1;d&&(d=g.Sd(),x=h.Sd(),V=x/d,x*=90,g=89.9*d,h=Math.abs(e[0][1])-g,0<h&&(p=e[0][1],e[0][1]=f.Tb.hl(g,p),Q=f.Tb.hl(h,p),p=!0));k.transform(e,1,m,n);p&&0!=Q&&(e[0][1]+=V*Q,e[0][1]>x?e[0][1]=x:e[0][1]<-x&&(e[0][1]=-x));b.nb(e[0][0],e[0][1])}else{d=g.Sd();a=f.L.Yj(e[0][1],-90*d,90*d)!=e[0][1];x=h.Sd();k=(g.Cm()-
h.Cm())*x;m/=n;if(1!=m||0!=k)a=!0,e[0][0]*=m,e[0][0]+=k,e[0][1]*=m;a&&b.nb(e[0][0],e[0][1])}return a};c.OM=function(a,b,d,e){if(a.Wq)e=90*a.ee.Sd(),f.la.iL(b,d,-e,e);else{var g=a.He,h=a.ee,k=a.Je;a=h.Ds();var m=k.Ds(),n=h.Sd(),p=90*n,x=k.Sd();if(null==g||0==g.count()){if(e=a/m,g=(h.Cm()-k.Cm())*x,f.la.iL(b,d,-p,p),0!=g||1!=e)for(x=0;x<d;x++)b[x].x*=e,b[x].x+=g,b[x].y*=e}else{h=Math.min(d,e.length);p=f.L.Xf(h);k=360*x;n=x/n;for(var Q=!0,V=0,ca=0;0!=d;){for(x=0;x<h;x++)p[x]=b[x+ca].x;x=b[0].x;f.la.nz(e,
b,ca,h);g.transform(e,h,a,m);f.la.mz(b,ca,e,h);Q&&(V=b[0].x-n*x,Q=!1);for(x=0;x<h;x++){var ba=b[ca+x].x-p[x]*n-V;200<Math.abs(ba)&&(b[ca+x].x=0<ba?b[ca+x].x-k:b[ca+x].x+k)}ca+=h;d-=h;h=Math.min(d,e.length)}}}};c.W_=function(a,b,d,e){return c.vm(a,b,isNaN(d)?0:d,!0,e,null)};c.Lv=function(a,b){a=a.nh();isNaN(b)||a.qv(b,0);return a};c.fS=function(a,b,d,e,g,h,k,m){for(var n=c.Lv(e,g),p=n.N(),x=p/360,Q=c.bF*x,V=a.Va(0),ca=b.Cc(),ba=ca?p/b.be().N():0,ea=!1,da=new f.Fa(d.description),ma=0,za=d.$();ma<za;++ma){var Ba=
ca,Ea=new f.Oa(d.description);Ea.addPath(d,ma,!0);if(0!=k){var Ma=c.BE(!0,Ea,n.B-m,n.B,k);(ea=ea||Ma)&&(Ba=!1)}var Pa=-1;Ba&&(Pa=a.ua(ma));var Ra=Ea.Va(0),Qa=Ea.D(),Sa=0,Ta=Ra.read(0),Ua=0;Ma=3*e.ce(0);var Va=!1,Ya=new f.b;Ya.Tc();var ab=new f.b;ab.Tc();for(var fb=!1,db=1;db<Qa;++db){var Xa=f.b.construct(Ra.Ig(2*db),Ra.Ig(2*db+1)),Za=Xa.x,Wa=Za+Sa,eb=Wa-Ta;Xa.x=Wa;if(Math.abs(eb)>Q){if(Ba){var cb=Pa+(db+1<Qa?db:0),hb=V.read(2*(Pa+db-1));cb=(V.read(2*cb)-hb)*ba;Math.abs(eb-cb)>1*x&&(Ba=!1)}Ba||(Sa-=
f.Tb.hl(p,Wa-Ta),Wa=Za+Sa,++Ua,fb=0!=Sa,Xa.x=Wa)}else Va||f.la.mH(ab,Ya,Xa,Ma)&&(Va=!0);fb&&Ra.write(2*db,Wa);Ta=Wa;ab.K(Ya);Ya.K(Xa)}0<Ua&&Ea.Oc(1993);Ba=Ea.xa(0);Qa=Ea.xa(Qa-1);Ea=f.b.vb(Ba,Qa)<Ma?c.GR(Ea,e,g,h,Va):c.HR(a,ma,Ea,e,g);da.add(Ea,!1)}g=e.ce(0);d=n.N()/180;c.su(da,n,.1*g,!1);g=f.fh.clip(da,n,g,d,h);da=da!=g;a=a.Pe();m=g.Pe();k=0;0<m&&0>a?k=1:0>=m&&0<a&&(0==m?(m=NaN,2==b.Fb()?m=b.sk().Pe():1==b.Fb()&&(m=b.be().jG()),a>.99*m&&(k=-1)):k=-1);0!=k&&(b=new f.Fa(g.description),b.Np(n),b=f.im.local().U(b,
d,h),b.add(g,!1),da=!0,g=b);da&&(g=f.jm.local().U(g,e,!1,h));return g};c.HR=function(a,b,d,e,g){var h=d.D(),k=d.xa(0),m=d.xa(h-1);e=c.Lv(e,g);g=e.N();k=f.Tb.sign(m.x-k.x);var n=new f.g;d.Zb(n);var p=e.lk();m=p-g;p+=g;if(0<=k){var x=Math.ceil((m-n.o)/g);for(x*=g;m>n.o+x;)x+=g;for(;m<n.v+x;)x-=g;var Q=x;720<n.N()&&(p=m+360*Math.ceil(n.N()/360))}else{x=Math.ceil((p-n.v)/g);for(x*=g;p<n.v+x;)x-=g;for(;p>n.o+x;)x+=g;Q=x;720<n.N()&&(m=p-360*Math.ceil(n.N()/360))}x=k*g;var V=f.g.construct(n.o,n.A,n.v,n.B);
V.move(Q,0);var ca=new f.xd;ca.mg(Q,0);d.Qc(ca);n=new f.Oa(d.description);n.add(d,!1);Q=d.xa(h-1);g=0;for(var ba=n.xa(0).x;0<k?V.v<p:V.o>m;)V.move(x,0),ca.Ob=x,d.Qc(ca),ba+=x,e.o<=ba&&e.v>=ba&&(g=n.D()-1),d.nb(0,Q),Q=d.xa(h-1),n.ds(d,0,0,h-1,!1);d=new f.Fa(n.description);h=0<a.rm(b);d.add(n,!1);a=n.xa(0);m=n.xa(n.D()-1);b=d.$()-1;(0>k?h:!h)?(k=f.b.construct(m.x,e.B),d.Ii(k),k=f.b.construct(e.lk(),e.B),d.Ii(k),e=f.b.construct(a.x,e.B)):(k=f.b.construct(m.x,e.A),d.Ii(k),k=f.b.construct(e.lk(),e.A),
d.Ii(k),e=f.b.construct(a.x,e.A));d.Ii(e);d.jH(0,b,0);d.uP(g);return d};c.GR=function(a,b,d,e,g){var h=new f.Fa(a.description);h.add(a,!1);h.mC(0,h.D()-1);var k=new f.g;h.Zb(k);d=c.Lv(b,d);var m=d.N(),n=Math.ceil((d.o-k.o)/m);for(n*=m;d.o>k.o+n;)n+=m;for(;d.o<k.v+n;)n-=m;n+=m;if(0!=n){k.move(n,0);var p=new f.xd;p.mg(n,0);h.Qc(p)}if(d.o<=k.o&&d.v>k.v)return g&&(g=h.Pe(),h=f.jm.local().U(h,b,!0,e),b=h.Pe(),(b=f.Tb.sign(g)!=f.Tb.sign(b))&&h.sK()),h;a=new f.Fa(a.description);a.add(h,!1);for(g=g||k.N()>
m-b.ce(0);k.o<d.v;)k.move(m,0),p=new f.xd,p.mg(m,0),h.Qc(p),a.add(h,!1);g&&(g=a.Pe(),a.np(1),a=f.jm.local().U(a,b,!0,e),b=a.Pe(),(b=f.Tb.sign(g)!=f.Tb.sign(b))&&a.sK());return a};c.BE=function(a,b,d,e,g){for(var h=b.Va(0),k=b.D(),m=!1,n=0;n<k;n++){var p=f.b.construct(h.Ig(2*n),h.Ig(2*n+1));if(0!=(g&1)&&p.y>=d){m=!0;break}if(0!=(g&2)&&p.y<=-d){m=!0;break}}if(!m)return!1;h=!1;a&&(h=b.ho(0));a=new f.Yc;k=a.Bb(b);m=a.Kb(k);var x=-1,Q=!0,V=new f.b;V.Tc();n=new f.Ra;for(var ca=-1,ba=a.Za(m);-1!=ba;ba=a.T(ba)){p=
a.xa(ba);var ea=0!=(g&1)&&90<=p.y?1:0;ea|=0!=(g&2)&&p.y<=-d?2:0;if(0<x&&x!=ea){if(V.x!=p.x){V.x=p.x;a.bj(a.Ma(ba),n);var da=a.Bj(m,ba,n);a.wf(da,V)}if(h)for(ca=-1!=ca?a.T(ca):a.Za(m),da=a.Ma(ba);ca!=da;)ca=a.od(ca,!1);ca=-1}0<ea&&(p.y=f.Tb.hl(e,p.y),a.wf(ba,p),Q||x==ea||(p.x!=V.x?(a.bj(ba,n),da=a.Bj(m,ba,n),a.nb(da,V.x,p.y),ca=da):ca=ba));x=ea;V=p;Q=!1}if(h){if(-1!=ca)for(ca=a.T(ca);-1!=ca;)ca=a.od(ca,!1);d=a.Za(m);a.wq(d,a.wj(m))||(a.bj(d,n),a.Bj(m,-1,n))}a.ye(k).copyTo(b);return!0};c.G0=function(a,
b){var d=0,e=a.Ha(b);b+=1;for(var g=a.$();b<g&&!(0<a.rm(b));++b)d++;return 64<e&&3<=d};c.tA=function(a,b,d,e){var g=a;if(g.u()||d==R.DontClip)return g;var h=g.F();if(33==h)return e=g,g=[e.w()],c.kH(g,1,b,d),g[0].isNaN()?e.Ka():e.nb(g[0]),a;a=b.hc();var k=a.Sd(),m=90*k,n=180*k,p=360*k,x=b.Wh(),Q=.5*k,V=new f.g;g.s(V);var ca=b.Bs(),ba=b.aS(),ea=197==ca.F();b=new f.g;ca.s(b);d==R.PannableFold&&(d=a.be().N(),b.o=x-.5*d,b.v=b.o+d);if(V.A<-m||V.B>m){(new f.g).H(V.o-k,-m,V.v+k,m);g=f.fh.Tp(g,b,a,NaN,0,e);
if(g.u())return g;g.s(V)}if(ba&&(b.B<V.A||b.A>V.B))return g.Ga();V.N()>p&&(g=c.aq(g,x-n,p,a,!0,0,!0,e),g.s(V));m=c.nP(V.o,V.v,b.o,b.v,p);0!=m&&V.move(m,0);if(V.v>b.v||V.o<b.o){if(V.v>b.v)for(;V.o>=b.v;)V.move(-p,0),m-=p;for(;V.o<b.v-p;)V.move(p,0),m+=p}d=f.la.ov(a,ca);0!=m&&(k=new f.xd,k.mg(m,0),g.Qc(k));if(ba){if(ea&&b.contains(V))return g;ba=[null,null];for(m=0;2>m;m++){ea?k=f.R.Bc(h)?f.fh.clip(g,b,d,Q,e):f.fh.clip(g,b,d,0,e):(k=f.ak.local().U(g,ca,a,e),k==ca&&(k=f.R.$d(k)));if(b.o<=V.o&&b.v>=V.v||
b.o>=V.o&&b.v<=V.v)return k;ba[m]=k;0==m&&(V.move(-p,0),k=new f.xd,k.mg(-p,0),g.Qc(k))}if(550==h)ba[0].yd(ba[1],0,-1);else if(f.R.Bc(h))ba[0].add(ba[1],!1);else if(33==h)ba[0].u()&&(ba[0]=ba[1]);else throw f.f.Y("intersect_with_GCS_horizon: unexpected geometry type");return ba[0]}if(b.B<V.A||b.A>V.B)return g;for(h=0;!g.u()&&V.v>b.o;)0!=h&&(k=new f.xd,k.mg(h,0),g.Qc(k)),f.kj.local().U(4,g,ca,a,e)||(g=f.Cp.local().U(g,ca,a,e),ca==g&&(g=f.R.$d(g))),0!=h&&(Q=new f.xd,Q.mg(-h,0),g.Qc(Q)),h-=p,V.move(-p,
0);return g};c.kH=function(a,b,d,e){if(0!=b&&e!=R.DontClip)if(e==R.PannableFold){e=d.XS();for(var g=b,h=0;h<b;h++)if(a[h].y>e.B||a[h].y<e.A)a[h].Tc(),g--;0!=g&&c.Hv(a,b,e.o,e.N())}else{e=d.Sd();var k=90*e,m=180*e;e*=360;g=b;for(h=0;h<b;h++)if(a[h].y>k||a[h].y<-k)a[h].Tc(),g--;if(0!=g){g=new f.g;g.Ix(a,b);k=d.Bs();var n=d.Ov();h=197==k.F();var p=new f.g;k.s(p);if(!n||!(p.B<g.A||p.A>g.B))if(n)if(c.Hv(a,b,p.lk()-m,e),g=b,h)for(h=0;h<b;h++)p.contains(a[h])||(a[h].Tc(),g--);else for(d=f.la.ov(d.hc(),k),
h=0;h<b;h++)(m=0!=f.Zc.Td(k,a[h],d))||(a[h].Tc(),g--);else for(c.Hv(a,b,-m,e),g=b,d=f.la.ov(d.hc(),k),h=0;h<b;h++)if(m=a[h],m.isNaN()&&g--,n=c.fF(m.x,p.o,p.v,e),m.x+=n,m=0!=f.Zc.Td(k,m,d))a[h].Tc(),g--}}};c.b0=function(a,b,d){if(0<=b&&!a.Lb(b))return 0;var e=0;if(1==d.Fb())return b=90*d.Sd(),b-=2*b/Math.PI*f.Pc.PE_HORIZON_DELTA,d=new f.g,a.s(d),d.B>=b&&(e=1),d.A<=-b&&(e|=2),e;var g=d.xj();if(null==g)return 0;var h=null;0<=b&&(h=a);for(var k=0;2>k;k++)if((0<k?g.getSouthPoleLocation():g.getNorthPoleLocation())!=
f.ng.PE_POLE_OUTSIDE_BOUNDARY){var m=d.bA(0<k);m.isNaN()||(m=0>b?f.Oe.yA(a,m,0):f.Oe.zA(h,b,m,0,null),e|=m<<k)}return e};c.aq=function(a,b,d,e,g,h,k,m){var n=a.F(),p=b+d;if(33===n){e=g?a:a.Cf();var x=e.Ce();if(x<b||x>=p||k&&x==p)x+=Math.ceil((b-x)/d)*d,x=f.L.Yj(x,b,p),e.KC(x);return e}if(a.u())return a;x=new f.g;a.s(x);if(x.u())return a;var Q=new f.uc;x.sn(Q);var V=new f.uc;V.H(b,p);if(V.contains(Q))return a;p=new f.g;p.H(x);if(550===n){e=g?a:a.Cf();m=e.Va(0);n=2*e.D();p=!1;for(b=0;b<n;b+=2)if(x=
m.read(b),x<V.fa||x>=V.ja||k&&x==V.ja)p=!0,x+=Math.ceil((V.fa-x)/d)*d,x=V.ru(x),m.write(b,x);p&&e.Oc(1993);return e}if(197==n)return d=g?a:a.Cf(),x.Ia(p),d.mp(x),d;var ca=.1*Math.max(x.ca(),x.N());p.O(0,ca);k=a;V=e.ce(0);a=f.Jh.local();for(g=new f.xd;;){var ba=Math.floor((Q.fa-b)/d),ea=Math.ceil((Q.ja-b)/d);if(3<ea-ba){ba=Math.floor(.5*(ea+ba));p.o=x.o-ca;p.v=b+d*ba;var da=f.fh.clip(k,p,V,h,m);p.o=p.v;p.v=x.v+ca;var ma=f.fh.clip(k,p,V,h,m);g.mg((ba-ea)*d,0);ma.Qc(g);1736==n?k=a.U(da,ma,e,null):(k=
da,k.add(ma,!1));k.s(x);x.sn(Q)}else break}p.o=b;p.v=b+d;b=new f.g;b.H(p);b.O(V,0);b=Math.floor((x.o-p.o)/d)*d;0!=b?(p.move(b,0),g.mg(-b,0)):g.zC();b=1607==n?new f.Oa(k.description):new f.Fa(k.description);h=new f.g;for(Q=new f.g;x.v>p.o;){ca=f.fh.clip(k,p,V,0,m);ca.s(Q);if(1607==n?!ca.u()&&(Q.N()>V||Q.ca()>V):!ca.u()&&(1736!=n||Q.N()>V))ca.Qc(g),ca.s(Q),b.s(h),h.O(V,V),h.isIntersecting(Q)&&1736==n?b=a.U(b,ca,e,null):b.add(ca,!1);p.move(d,0);g.shift(-d,0)}return b};c.Hv=function(a,b,d,e){for(var g=
d+e,h=0;h<b;h++){var k=a[h].x;d<=k&&k<g||!(k<d||k>g||k==g)||(k+=Math.ceil((d-k)/e)*e,k=f.L.Yj(k,d,g),a[h].x=k)}};c.vm=function(a,b,d,e,g,h){if(!b.Cc())throw f.f.Y("fold_into_360_degree_range");if(a.u())return a;if(2==b.Fb()){d=b.Wv();var k=b.Vv()-d}else{var m=b.Sd();k=360*m;d-=180*m}return c.aq(a,d,k,b,e,g,!0,h)};c.dG=function(a,b,d,e){if(2==d.Fb())e=d.Wv(),d=d.Vv()-e;else{var g=d.Sd();d=360*g;e-=180*g}c.Hv(a,b,e,d)};c.qj=function(a,b){var d=b.be();if(33==a.F()){var e=a.lf();return d.A<=e&&e<=d.B?
a:a.Ga()}e=new f.g;a.s(e);var g=new f.g;g.H(d);g.o=e.o;g.v=e.v;g.O(.01*g.ca(),0);d=f.la.Zy(b,e);return g.contains(e)?a:f.fh.clip(a,g,d,0,null)};c.Er=function(a,b,d){return a>b.v&&a-b.v<d?b.v:a<b.o&&b.o-a<d?b.o:a};c.kZ=function(a,b,d,e){e.x=c.Er(a.x,b,d);e.y=a.y};c.jZ=function(a,b,d,e){for(var g=0;g<b;g++)a[g].y<d.A||a[g].y>d.B?a[g].Tc():a[g].x=c.Er(a[g].x,d,e)};c.su=function(a,b,d,e){if(!a.u()){var g=a.F();if(!e||1736!=g)if(f.R.Rg(g)){e=a.Va(0);g=0;for(var h=a.D();g<h;g++){var k=e.read(2*g),m=c.Er(k,
b,d);m!=k&&e.write(2*g,m)}a.Oc(1993)}else if(197==g)e=new f.g,a.s(e),e.o=c.Er(e.o,b,d),e.v=c.Er(e.v,b,d),a.mp(e);else if(33==g)a.KC(c.Er(a.Ce(),b,d));else throw f.f.Y("internal error");}};c.PT=function(a,b,d,e){var g=new f.Yc,h=g.Bb(a);a=f.la.ov(b,a);c.Ss(g,h,b,a,d,!0,e);return g.ye(h)};c.Ss=function(a,b,d,e,g,h,k){if(!d.Cc())throw f.f.I("invalid call");var m=d.be(),n=d.hc(),p=n.wg().getDatum().getSpheroid();n=n.Ld().gi;var x=p.getFlattening();p=p.getAxis();x*=2-x;var Q=new f.uc;m.sn(Q);var V=null,
ca=[[0,0],[0,0]];2==d.Fb()?(V=d.wg(),h?(ca[0][0]=c.nn(k,Q),ca[0][1]=m.cq(),f.Kh.projToGeog(V,1,ca),m=ca[0][0]*n):(ca[0][0]=m.lk(),ca[0][1]=k,f.Kh.projToGeog(V,1,ca),m=ca[0][1]*n)):m=k*n;if(!h&&0!=m&&g!=l.GreatElliptic)throw f.f.Y("invalid argument");var ba=new f.da,ea=[0],da=new f.b,ma=new f.b,za=new f.b,Ba=[null,null],Ea=new f.b,Ma=new f.b,Pa=new f.b,Ra=new f.b;for(b=a.Kb(b);-1!=b;b=a.Qb(b)){var Qa=a.Za(b);a.w(Qa,Ea);for(var Sa=!1,Ta=Qa=a.T(Qa);-1!=Ta;Ta=a.T(Ta)){if(Ta==Qa){if(Sa)break;Sa=!0}a.w(Ta,
Ma);if(h&&(e<k-Ea.x&&Ma.x-k>e||e<k-Ma.x&&Ea.x-k>e)||!h&&(0!=k||e<-Ea.y&&Ma.y>e||e<-Ma.y&&Ea.y>e)){do if(!(Math.abs(Ea.x-Ma.x)>=.5*Q.N())){2==d.Fb()?(ca[0][0]=c.nn(Ea.x,Q),ca[0][1]=Ea.y,ca[1][0]=c.nn(Ma.x,Q),ca[1][1]=Ma.y,f.Kh.projToGeogCenter(V,2,ca,0),Pa.x=ca[0][0]*n,Pa.y=ca[0][1]*n,Ra.y=ca[1][1]*n):(Pa.x=Ea.x*n,Pa.y=Ea.y*n,Ra.y=Ma.y*n);Ra.x=2*(Ma.x-Ea.x)*Math.PI/Q.N()+Pa.x;if(h){ma.x=m;ma.y=c.uA(p,x,Pa,Ra,m,g);if(isNaN(ma.y))break;Ba[0]=ma;var Ua=1}else if(g==l.GreatElliptic){var Va=[0,0];Ua=f.ty.vA(x,
Pa,Ra,m,Va);if(0==Ua)break;ma.x=Va[0];ma.y=m;Ba[0]=ma;2==Ua&&(za.x=Va[1],za.y=m,Ba[1]=za)}else{ma.x=c.sA(p,x,Pa,Ra,g);if(isNaN(ma.x))break;ma.y=0;Ba[0]=ma;Ua=1}var Ya=-1;for(Va=0;Va<Ua;Va++){f.gb.Ad(p,x,Pa.x,Pa.y,Ra.x,Ra.y,ba,null,null,g);var ab=ba.j;f.gb.Ad(p,x,Pa.x,Pa.y,Ba[Va].x,Ba[Va].y,ba,null,null,g);var fb=ba.j;2==d.Fb()?(ca[0][0]=Ba[Va].x/n,ca[0][1]=Ba[Va].y/n,f.Kh.geogToProj(V,1,ca),h?(da.y=ca[0][1],da.x=k):(da.x=c.Ws(ca[0][0],Ea.x,Ma.x,Q),da.y=k)):h?(da.x=k,da.y=Ba[Va].y/n):(da.x=c.Ws(Ba[Va].x/
n,Ea.x,Ma.x,Q),da.y=k);ea[0]=0<ab?f.L.Yj(fb/ab,0,1):.5;if(0==ea[0]||1==ea[0])break;Ya>ea[0]||(Ya=a.Ma(Ta),a.em(Ya,ea,1),a.nb(a.T(Ya),da.x,da.y),Ya=ea[0])}}while(0)}Ea.K(Ma)}}};c.nn=function(a,b){var d=b.ja-b.fa;return b.ru(a-Math.floor((a-b.fa)/d)*d)};c.Ws=function(a,b,d,e){var g=new f.uc;g.H(b,d);d=e.N();a=Math.floor((a-b)/d)*d+a;for(g=g.hf();Math.abs(a-g)>Math.abs(a+d-g);)a+=d;return a};c.mo=function(a,b,d){a=f.Nr.Wp(a);b=f.Nr.Ux(a,f.Nr.Wp(b));d=f.Nr.Ux(a,f.Nr.Wp(d));return 0==d||0<b&&0<d&&d<=b||
0>b&&0>d&&d>=b?!0:!1};c.uA=function(a,b,d,e,g,h){if(h==l.GreatElliptic)return f.ty.lU(b,d,e,g);if(Math.abs(d.x-e.x)>=Math.PI||!c.mo(d.x,e.x,g))return NaN;if(d.x>e.x)var k=e;else k=d,d=e;e=new f.da;var m=new f.da,n=new f.da;f.gb.Ad(a,b,k.x,k.y,d.x,d.y,m,e,null,h);var p=m.j,x=0,Q=1,V=new f.b;for(V.K(k);p*(Q-x)>1E-12*a;){var ca=.5*(x+Q);f.gb.tj(a,b,k.x,k.y,p*ca,e.j,m,n,h);V.x=m.j;V.y=n.j;if(V.x==g)break;if(c.mo(k.x,V.x,g))Q=ca;else if(c.mo(d.x,V.x,g))x=ca;else return NaN}return V.y};c.sA=function(a,
b,d,e,g){if(g==l.GreatElliptic)return a=[0,0],f.ty.vA(b,d,e,0,a),a[0];if(d.y>e.y)var h=e;else h=d,d=e;e=new f.uc;e.H(h.y,d.y);if(!e.contains(0)||Math.abs(h.x-d.x)>=Math.PI)return NaN;if(h.x==d.x)return h.x;var k=new f.da,m=new f.da,n=new f.da;f.gb.Ad(a,b,h.x,h.y,d.x,d.y,m,k,null,g);var p=m.j,x=0,Q=1,V=new f.b;for(V.K(h);p*(Q-x)>1E-12*a;){var ca=.5*(x+Q);f.gb.tj(a,b,h.x,h.y,p*ca,k.j,m,n,g);V.x=m.j;V.y=n.j;e.H(h.y,V.y);if(0==V.y)break;if(e.contains(0))Q=ca;else if(e.H(d.y,V.y),e.contains(0))x=ca;else return NaN}return V.x};
c.L0=function(a,b,d,e,g,h){if(b==g&&d!=h)throw f.f.I();if(0>=e)return 0;if(a.xq()){h*=2;var k=2*d;a=2*e;for(d=0;d<a;d++)g[h+d]=b[k+d];return e}if(2>=e){h=[new f.b,new f.b];for(k=0;k<e;k++)h[k].ka(b[2*k],b[2*k+1]);b=f.Rr.local().KZ(a,h,e,h);for(k=0;k<e;k++)g[2*k]=h[k].x,g[2*k+1]=h[k].y;return b}var m=a.ee;k=a.Je;var n=m.Fb(),p=k.Fb();if(0==n&&n==p)return a=m.qk(),k=k.qk(),k=a/k,a=new f.xd,a.Dr(k,k),a.LZ(b,d,g,h,e),e;n=new f.Hd;n.le(3);n.resize(e);p=n.Va(0);var x=n.Va(3);k=0;for(var Q=2*d,V=2*h;k<e;k++,
V+=2){d=b[Q++];m=b[Q++];var ca=V;if(isNaN(d)||isNaN(m))m=d=0,ca=-1;x.write(k,ca);p.write(2*k,d);p.write(2*k+1,m)}n.Oc(1993);b=f.Rr.local().U(n,a,null);k=0;for(h*=2;k<e;k++,h+=2)g[h]=NaN,g[h+1]=NaN;if(b.u())return 0;h=b.Va(3);a=b.Va(0);k=n=0;for(e=b.D();k<e;k++)b=h.read(k),-1!=b&&(d=a.read(2*k),m=a.read(2*k+1),g[b]=d,g[b+1]=m,n++);return n};c.NJ=function(a,b,d,e){if(!a.ee.Cc())return!1;var g=new f.Hd(b.description);g.yd(b,0,-1);e=f.Rr.local().U(g,a,e);g=b.D();d.Ka();if(g!=e.D())return!1;var h=new f.g;
b.s(h);var k=new f.g;e.s(k);h=h.N();k=k.N();if(0!=h&&0!=k){if(k/=h,a=a.Je.nh().N()/a.ee.nh().N(),1E-10<Math.abs(k/a-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);b=new f.b;for(a=0;a<g;a++)e.w(a,b),d.nb(a,b);return!0};c.BO=function(a,b){a%=360*b;a>=180*b&&(a-=360*b);return a};c.LJ=function(a,b,d,e){if(d==R.Clip){var g=b.sk();197==g.F()?(d=new f.g,g.s(d),g=f.la.Zy(b,d),a=f.fh.clip(a,d,g,5E4*b.Am(),e)):f.kj.local().U(1,g,a,b,e)||(a=f.ak.local().U(a,g,b,e),a==g&&(a=f.Zk.$d(a)))}else b.Cc()&&(e=
new f.g,a.Zb(e),b.be().contains(e)||(c.su(a,b.be(),b.ce(0),!0),d==R.PannableFold&&(a=c.qj(a,b)),a=c.vm(a,b,0,!0,1E5*b.Am(),null)));return a};c.JE=function(a,b,d){var e=b.Cs();if(null==e)return a;b=b.hc();var g=b.be().N(),h=new f.g;a.Zb(h);var k=new f.uc;h.sn(k);h=e.Ba();e=null;for(var m=new f.xd;h.Ta();)for(;h.Aa();){var n=h.aa(),p=n.Qf(0,0),x=new f.uc;x.H(p.fa,p.ja);for(p=0;x.ja>k.fa;)x.move(-g),--p;for(;x.fa<=k.ja;){if(x.isIntersecting(k)){null==e&&(e=new f.Oa);var Q=f.zb.mQ(n.ac(),n.wc());0!=p&&
(m.mg(p*g,0),Q.Qc(m));e.$b(Q,!0)}x.move(g);++p}}return null!=e?(b=f.la.pP(b,e),b=f.la.es(b),f.Gu.vQ(a,e,b,d)):a};c.nP=function(a,b,d,e,g){return a>=d&&b<=e?0:c.fF(.5*(b+a),d,e,g)};c.fF=function(a,b,d,e){return f.Tb.round((.5*(d+b)-a)/e)*e};c.gS=function(a,b,d,e,g,h,k,m){var n=c.Lv(e,g),p=n.N(),x=p/360,Q=c.bF*x,V=a.Va(0),ca=b.Cc(),ba=ca?p/b.be().N():0;b=a.Ga();for(var ea=0,da=d.$();ea<da;++ea){var ma=ca,za=new f.Oa(d.description);za.addPath(d,ea,!0);var Ba=d.Lb(ea);0!=k&&(Ba=c.BE(Ba,za,n.B-m,n.B,k))&&
(ma=!1);var Ea=-1;Ba=za.D();var Ma=!1;ma&&(Ea=a.ua(ea),Ma=a.Lb(ea));var Pa=za.Va(0),Ra=0,Qa=Pa.read(0),Sa=0,Ta=3*e.ce(0),Ua=!1,Va=new f.b;Va.Tc();var Ya=new f.b;Ya.Tc();for(var ab=!1,fb=1;fb<Ba;++fb){var db=f.b.construct(Pa.Ig(2*fb),Pa.Ig(2*fb+1)),Xa=db.x,Za=Xa+Ra,Wa=Za-Qa;db.x=Za;if(Math.abs(Wa)>Q){if(ma){var eb=Ea+fb-1,cb=Ea;if(!Ma||fb+1<Ba)cb+=fb;eb=V.read(2*eb);cb=(V.read(2*cb)-eb)*ba;Math.abs(Wa-cb)>1*x&&(ca=!1)}ma||(Ra-=f.Tb.hl(p,Za-Qa),Za=Xa+Ra,++Sa,ab=0!=Ra,db.x=Za)}else Ua||f.la.mH(Va,Ya,
db,Ta)&&(Ua=!0);ab&&Pa.write(2*fb,Za);Qa=Za;Va.K(Ya);Ya.K(db)}0!=Sa&&za.Oc(1993);ma=za.xa(0);Ba=za.xa(Ba-1);f.b.vb(ma,Ba);za=c.IR(za,e,isNaN(g)?0:g,h);b.add(za,!1)}a=e.ce(0);d=n.N()/180;c.su(b,n,.1*a,!1);return f.fh.clip(b,n,a,d,h)};c.IR=function(a,b,d,e){return c.vm(a,b,d,!0,0,e)};c.iU=function(a,b,d,e){var g=a.F();if(1736==g)for(b=null!=b?b.ce(0):0,g=0;g<e;g++)1!=f.Zc.Td(a,d[g],b)&&d[g].Tc();else if(197==g)for(g=0;g<e;g++)a.nQ(d[g])||d[g].Tc();else throw f.f.I();};c.fl=function(a,b,d,e){if(32>d)for(var g=
new f.Ra,h=0;h<d;h++)g.nb(b[h]),a.fl(g,e).w(b[h]);else{var k=new f.Hd;k.le(3);k.tE(b,d);g=k.Va(3);for(h=0;h<d;h++)g.write(h,h);h=a.fl(k,e);a=h.Va(0);g=h.Va(3);e=f.b.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=e;d=h.D();for(h=0;h<d;h++)e=g.read(h),a.mc(2*h,b[e])}};c.el=function(a,b,d,e){if(32>d)for(var g=new f.Ra,h=0;h<d;h++)g.nb(b[h]),a.el(g,e).w(b[h]);else{var k=new f.Hd;k.le(3);k.tE(b,d);g=k.Va(3);for(h=0;h<d;h++)g.write(h,h);h=a.el(k,e);a=h.Va(0);g=h.Va(3);e=f.b.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=
e;d=h.D();for(h=0;h<d;h++)e=g.read(h),a.mc(2*h,b[e])}};c.G_="ABCDEFGHIJKLMNOPQRSTUVWXYZ";c.bF=210;return c}()})(fa||(fa={}));(function(f){(function(l){l[l.rightSide=1]="rightSide"})(f.bN||(f.bN={}));var R=function(){function l(c,a,b){this.jt=new f.b;void 0===c?this.ap=-1:(this.jt.K(c),this.ap=a,this.La=b,this.Tw=0)}l.prototype.$K=function(c){this.Tw=c?this.Tw|1:this.Tw&-2};l.prototype.u=function(){return 0>this.ap};l.prototype.Lz=function(){if(this.u())throw f.f.Y("invalid call");return new f.Ra(this.jt.x,
this.jt.y)};l.prototype.Ua=function(){if(this.u())throw f.f.Y("invalid call");return this.ap};l.prototype.Oz=function(){if(this.u())throw f.f.Y("invalid call");return this.La};l.prototype.AA=function(){return 0!=(this.Tw&1)};l.prototype.Jy=function(c,a,b,d){this.jt.x=c;this.jt.y=a;this.ap=b;this.La=d};return l}();f.lm=R})(fa||(fa={}));(function(f){var R=function(){function c(){}c.prototype.wn=function(a,b){this.Ah.resize(0);this.Oi.length=0;this.Ak=-1;a.Zb(this.Mk);this.Mk.O(b,b);this.Mk.isIntersecting(this.Hb.Da)?
((this.dt=f.R.Ic(a.F()))?(this.II=a.ac(),this.HI=a.wc(),this.qa=b):this.qa=NaN,this.Ah.add(this.Hb.tf),this.Oi.push(this.Hb.Da),this.yt=this.Hb.As(this.Hb.tf)):this.yt=-1};c.prototype.vi=function(a,b){this.Ah.resize(0);this.Oi.length=0;this.Ak=-1;this.Mk.H(a);this.Mk.O(b,b);this.qa=NaN;this.Mk.isIntersecting(this.Hb.Da)?(this.Ah.add(this.Hb.tf),this.Oi.push(this.Hb.Da),this.yt=this.Hb.As(this.Hb.tf),this.dt=!1):this.yt=-1};c.prototype.next=function(){if(0==this.Ah.size)return-1;this.Ak=this.yt;var a=
null,b=null,d=null,e=null;this.dt&&(a=new f.b,b=new f.b,d=new f.g);for(var g=!1;!g;){for(;-1!=this.Ak;){var h=this.Hb.Hz(this.Hb.Nv(this.Ak));if(h.isIntersecting(this.Mk))if(this.dt){if(a.K(this.II),b.K(this.HI),d.H(h),d.O(this.qa,this.qa),0<d.ez(a,b)){g=!0;break}}else{g=!0;break}this.Ak=this.Hb.Uv(this.Ak)}if(-1==this.Ak){h=this.Ah.Gc();var k=this.Oi[this.Oi.length-1];null==e&&(e=[],e[0]=new f.g,e[1]=new f.g,e[2]=new f.g,e[3]=new f.g);l.IK(k,e);this.Ah.Rf();--this.Oi.length;for(k=0;4>k;k++){var m=
this.Hb.fq(h,k);if(-1!=m&&0<this.Hb.mT(m)&&e[k].isIntersecting(this.Mk))if(this.dt){if(a.K(this.II),b.K(this.HI),d.H(e[k]),d.O(this.qa,this.qa),0<d.ez(a,b)){var n=new f.g;n.H(e[k]);this.Ah.add(m);this.Oi.push(n)}}else n=new f.g,n.H(e[k]),this.Ah.add(m),this.Oi.push(n)}if(0==this.Ah.size)return-1;this.Ak=this.Hb.As(this.Ah.get(this.Ah.size-1))}}this.yt=this.Hb.Uv(this.Ak);return this.Ak};c.lQ=function(a,b,d){var e=new c;e.Hb=a;e.Mk=new f.g;e.Ah=new f.ha(0);e.Oi=[];e.wn(b,d);return e};c.kQ=function(a,
b,d){var e=new c;e.Hb=a;e.Mk=new f.g;e.Ah=new f.ha(0);e.Oi=[];e.vi(b,d);return e};c.jQ=function(a){var b=new c;b.Hb=a;b.Mk=new f.g;b.Ah=new f.ha(0);b.Oi=[];return b};return c}();f.q_=R;var l=function(){function c(a,b){this.sf=new f.ad(11);this.ei=new f.ad(5);this.et=[];this.Pw=new f.ha(0);this.Da=new f.g;this.Uk(a,b)}c.prototype.reset=function(a,b){this.sf.rj(!1);this.ei.rj(!1);this.et.length=0;this.Pw.clear(!1);this.Uk(a,b)};c.prototype.Gi=function(a,b){return this.fw(a,b,0,this.Da,this.tf,!1,-1)};
c.prototype.ew=function(a,b,d){d=-1==d?this.tf:this.HG(d);var e=this.ca(d),g=this.CS(d);return this.fw(a,b,e,g,d,!1,-1)};c.prototype.ga=function(a){return this.xS(a)};c.prototype.sG=function(a){return this.Hz(this.Nv(a))};c.prototype.ca=function(a){return this.Pv(a)};c.prototype.CS=function(a){var b=new f.g;b.H(this.Da);var d=this.Pv(a);a=this.CG(a);for(var e=0;e<2*d;e+=2){var g=f.L.truncate(3&a>>e);0==g?(b.o=.5*(b.o+b.v),b.A=.5*(b.A+b.B)):1==g?(b.v=.5*(b.o+b.v),b.A=.5*(b.A+b.B)):(2==g?b.v=.5*(b.o+
b.v):b.o=.5*(b.o+b.v),b.B=.5*(b.A+b.B))}return b};c.prototype.mT=function(a){return this.iA(a)};c.prototype.LS=function(a,b){return R.lQ(this,a,b)};c.prototype.Vz=function(a,b){return R.kQ(this,a,b)};c.prototype.getIterator=function(){return R.jQ(this)};c.prototype.Uk=function(a,b){if(0>b||32<2*b)throw f.f.I("invalid height");this.UU=b;this.Da.H(a);this.tf=this.sf.Ke();this.Rx(this.tf,0);this.Kx(this.tf,0);this.RK(this.tf,0);this.OK(this.tf,0)};c.prototype.fw=function(a,b,d,e,g,h,k){if(!e.contains(b))return 0==
d?-1:this.fw(a,b,0,this.Da,this.tf,h,k);if(!h)for(var m=g;-1!=m;m=this.YS(m))this.Rx(m,this.iA(m)+1);m=new f.g;m.H(e);e=g;var n=[];n[0]=new f.g;n[1]=new f.g;n[2]=new f.g;for(n[3]=new f.g;d<this.UU&&this.rP(e);d++){c.IK(m,n);for(var p=!1,x=0;4>x;x++)if(n[x].contains(b)){p=!0;var Q=this.fq(e,x);-1==Q&&(Q=this.BQ(e,x));this.Rx(Q,this.iA(Q)+1);e=Q;m.H(n[x]);break}if(!p)break}return this.NT(a,b,d,m,e,h,g,k)};c.prototype.NT=function(a,b,d,e,g,h,k,m){var n=this.yG(g);if(h){if(g==k)return m;this.cR(m);h=
m}else h=this.EQ(),this.xC(h,a),this.pY(this.Nv(h),b);this.PY(h,g);-1!=n?(this.Ox(h,n),this.Lx(n,h)):this.KK(g,h);this.AC(g,h);this.Kx(g,this.Sv(g)+1);this.qP(g)&&this.YR(d,e,g);return h};c.prototype.cR=function(a){var b=this.HG(a),d=this.yG(b),e=this.eT(a),g=this.Uv(a);this.As(b)==a?(-1!=g?this.Ox(g,-1):this.AC(b,-1),this.KK(b,g)):d==a?(this.Lx(e,-1),this.AC(b,e)):(this.Ox(g,e),this.Lx(e,g));this.Ox(a,-1);this.Lx(a,-1);this.Kx(b,this.Sv(b)-1)};c.IK=function(a,b){var d=.5*(a.o+a.v),e=.5*(a.A+a.B);
b[0].H(d,e,a.v,a.B);b[1].H(a.o,e,d,a.B);b[2].H(a.o,a.A,d,e);b[3].H(d,a.A,a.v,e)};c.prototype.qP=function(a){return 8==this.Sv(a)&&!this.TG(a)};c.prototype.YR=function(a,b,d){var e=this.As(d);do{var g=this.Nv(e),h=this.ei.S(e,0);g=this.Hz(g);this.fw(h,g,a,b,d,!0,e);e=h=this.Uv(e)}while(-1!=e)};c.prototype.rP=function(a){return 8<=this.Sv(a)||this.TG(a)};c.prototype.TG=function(a){return-1!=this.fq(a,0)||-1!=this.fq(a,1)||-1!=this.fq(a,2)||-1!=this.fq(a,3)};c.prototype.BQ=function(a,b){var d=this.sf.Ke();
this.tY(a,b,d);this.Rx(d,0);this.Kx(d,0);this.Wk(d,a);this.OK(d,this.Pv(a)+1);this.RK(d,b<<2*this.Pv(a)|this.CG(a));return d};c.prototype.EQ=function(){var a=this.ei.Ke();if(0<this.Pw.size){var b=this.Pw.Gc();this.Pw.Rf()}else b=this.et.length,this.et.push(new f.g);this.qY(a,b);return a};c.prototype.fq=function(a,b){return this.sf.S(a,b)};c.prototype.tY=function(a,b,d){this.sf.P(a,b,d)};c.prototype.As=function(a){return this.sf.S(a,4)};c.prototype.KK=function(a,b){this.sf.P(a,4,b)};c.prototype.yG=
function(a){return this.sf.S(a,5)};c.prototype.AC=function(a,b){this.sf.P(a,5,b)};c.prototype.CG=function(a){return this.sf.S(a,6)};c.prototype.RK=function(a,b){this.sf.P(a,6,b)};c.prototype.Sv=function(a){return this.sf.S(a,7)};c.prototype.iA=function(a){return this.sf.S(a,8)};c.prototype.Kx=function(a,b){this.sf.P(a,7,b)};c.prototype.Rx=function(a,b){this.sf.P(a,8,b)};c.prototype.YS=function(a){return this.sf.S(a,9)};c.prototype.Wk=function(a,b){this.sf.P(a,9,b)};c.prototype.Pv=function(a){return this.sf.S(a,
10)};c.prototype.OK=function(a,b){this.sf.P(a,10,b)};c.prototype.xS=function(a){return this.ei.S(a,0)};c.prototype.xC=function(a,b){this.ei.P(a,0,b)};c.prototype.eT=function(a){return this.ei.S(a,1)};c.prototype.Uv=function(a){return this.ei.S(a,2)};c.prototype.Ox=function(a,b){this.ei.P(a,1,b)};c.prototype.Lx=function(a,b){this.ei.P(a,2,b)};c.prototype.HG=function(a){return this.ei.S(a,3)};c.prototype.PY=function(a,b){this.ei.P(a,3,b)};c.prototype.Nv=function(a){return this.ei.S(a,4)};c.prototype.qY=
function(a,b){this.ei.P(a,4,b)};c.prototype.Hz=function(a){return this.et[a]};c.prototype.pY=function(a,b){this.et[a].H(b)};return c}();f.Fp=l})(fa||(fa={}));(function(f){(function(c){c[c.Outside=0]="Outside";c[c.Inside=1]="Inside";c[c.Border=2]="Border"})(f.jM||(f.jM={}));var R=function(){function c(a,b){this.hV=b;this.ai=a}c.prototype.Gx=function(a,b){this.WH!=b&&a.flush();this.WH=b};c.prototype.UF=function(a,b){for(var d=0;d<b;)for(var e=a[d++],g=a[d++],h=a[d++]*this.hV;e<g;e++)this.ai[h+(e>>4)]|=
this.WH<<2*(e&15)};return c}();f.r_=R;var l=function(){function c(a,b,d){this.ai=null;this.CB=this.Pk=this.SI=this.QI=this.mt=this.dI=this.Of=this.gn=0;this.Xi=this.Qk=this.El=null;this.nA(a,b,d)}c.create=function(a,b,d){if(!c.az(a))throw f.f.I();return c.GQ(a,b,d)};c.P_=function(a,b,d){if(!c.az(a))throw f.f.I();return c.HQ(a,b,d)};c.VX=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw f.f.Y("Internal Error");}return a};c.az=function(a){return a.u()||
1607!=a.F()&&1736!=a.F()?!1:!0};c.prototype.DR=function(a,b){b=b.Ba();for(var d=new f.b,e=new f.b;b.Ta();)for(;b.Aa();){var g=b.aa();if(322!=g.F())throw f.f.Y("Internal Error");a.Zj(g.ac(),d);a.Zj(g.wc(),e);this.Xi.Py(d.x,d.y,e.x,e.y)}this.Xi.mK(f.uy.iy)};c.prototype.ER=function(){throw f.f.Y("Internal Error");};c.prototype.xz=function(a,b){for(var d=1;4>d;d++)a.Py(b[d-1].x,b[d-1].y,b[d].x,b[d].y);a.Py(b[3].x,b[3].y,b[0].x,b[0].y);this.Xi.mK(f.uy.iy)};c.prototype.xL=function(a,b,d){for(var e=[null,
null,null,null],g=0;g<e.length;g++)e[g]=new f.b;b=b.Ba();d=this.Qk.MZ(d)+1.5;g=new f.b;for(var h=new f.b,k=new f.b,m=new f.b,n=new f.b,p=new f.g,x=new f.b;b.Ta();){var Q=!1,V=!0;for(x.ka(0,0);b.Aa();){var ca=b.aa();m.x=ca.ra;m.y=ca.na;n.x=ca.pa;n.y=ca.ma;p.Ka();p.Nb(m.x,m.y);p.Sk(n.x,n.y);if(this.El.tH(p)){this.Qk.Zj(n,n);V?(this.Qk.Zj(m,m),x.K(m),V=!1):m.K(x);g.tc(n,m);ca=g.length();var ba=.5>ca;0==ca?g.ka(1,0):(ba||x.K(n),g.scale(d/ca),h.ka(-g.y,g.x),k.ka(g.y,-g.x),m.sub(g),n.add(g),e[0].add(m,
h),e[1].add(m,k),e[2].add(n,k),e[3].add(n,h),ba?Q=!0:this.xz(a,e))}else Q&&(this.xz(a,e),Q=!1),V=!0}Q&&this.xz(a,e)}};c.prototype.aD=function(a){return f.L.truncate(a*this.dI+this.QI)};c.prototype.bD=function(a){return f.L.truncate(a*this.mt+this.SI)};c.GQ=function(a,b,d){return new c(a,b,d)};c.HQ=function(a,b,d){return new c(a,b,d)};c.prototype.nA=function(a,b,d){this.Of=Math.max(f.L.truncate(2*Math.sqrt(d)+.5),64);this.gn=f.L.truncate((2*this.Of+31)/32);this.El=new f.g;this.Pk=b;d=0;for(var e=this.Of,
g=this.gn;8<=e;)d+=e*g,e=f.L.truncate(e/2),g=f.L.truncate((2*e+31)/32);this.ai=f.L.Xf(d,0);this.Xi=new f.uy;d=new R(this.ai,this.gn,this);this.Xi.dZ(this.Of,this.Of,d);a.s(this.El);this.El.O(b,b);e=new f.g;g=f.g.construct(1,1,this.Of-2,this.Of-2);var h=b*g.N();b*=g.ca();e.H(this.El.hf(),Math.max(h,this.El.N()),Math.max(b,this.El.ca()));this.CB=this.Pk;this.Qk=new f.xd;this.Qk.KT(e,g);new f.xd;switch(a.F()){case 550:d.Gx(this.Xi,2);this.ER();break;case 1607:d.Gx(this.Xi,2);this.xL(this.Xi,a,this.CB);
break;case 1736:d.Gx(this.Xi,1),this.DR(this.Qk,a),d.Gx(this.Xi,2),this.xL(this.Xi,a,this.CB)}this.dI=this.Qk.fb;this.mt=this.Qk.bb;this.QI=this.Qk.Ob;this.SI=this.Qk.Sb;this.hP()};c.prototype.hP=function(){this.Xi.flush();for(var a=0,b=this.Of*this.gn,d=this.Of,e=f.L.truncate(this.Of/2),g=this.gn,h=f.L.truncate((2*e+31)/32);8<d;){for(d=0;d<e;d++)for(var k=2*d,m=2*d+1,n=0;n<e;n++){var p=2*n,x=2*n+1,Q=p>>4;p=2*(p&15);var V=x>>4;x=2*(x&15);var ca=this.ai[a+g*k+Q]>>p&3;ca|=this.ai[a+g*k+V]>>x&3;ca|=
this.ai[a+g*m+Q]>>p&3;ca|=this.ai[a+g*m+V]>>x&3;this.ai[b+h*d+(n>>4)]|=ca<<2*(n&15)}d=e;g=h;a=b;e=f.L.truncate(d/2);h=f.L.truncate((2*e+31)/32);b=a+g*d}};c.prototype.Xl=function(a,b){if(!this.El.contains(a,b))return 0;a=this.aD(a);b=this.bD(b);if(0>a||a>=this.Of||0>b||b>=this.Of)return 0;b=this.ai[this.gn*b+(a>>4)]>>2*(a&15)&3;return 0==b?0:1==b?1:2};c.prototype.rn=function(a){if(!a.Ia(this.El))return 0;var b=this.aD(a.o),d=this.aD(a.v),e=this.bD(a.A);a=this.bD(a.B);0>b&&(b=0);0>e&&(e=0);d>=this.Of&&
(d=this.Of-1);a>=this.Of&&(a=this.Of-1);if(b>d||e>a)return 0;for(var g=Math.max(d-b,1)*Math.max(a-e,1),h=0,k=this.gn,m=this.Of,n=0;;){if(32>g||16>m){for(g=e;g<=a;g++)for(var p=b;p<=d;p++)if(n=this.ai[h+k*g+(p>>4)]>>2*(p&15)&3,1<n)return 2;if(0==n)return 0;if(1==n)return 1}h+=k*m;m=f.L.truncate(m/2);k=f.L.truncate((2*m+31)/32);b=f.L.truncate(b/2);e=f.L.truncate(e/2);d=f.L.truncate(d/2);a=f.L.truncate(a/2);g=Math.max(d-b,1)*Math.max(a-e,1)}};c.prototype.hT=function(){return this.Of*this.gn};return c}();
f.sy=l})(fa||(fa={}));(function(f){(function(c){c[c.contains=1]="contains";c[c.within=2]="within";c[c.equals=3]="equals";c[c.disjoint=4]="disjoint";c[c.touches=8]="touches";c[c.crosses=16]="crosses";c[c.overlaps=32]="overlaps";c[c.unknown=0]="unknown";c[c.intersects=1073741824]="intersects"})(f.cN||(f.cN={}));var R=function(){function c(){}c.construct=function(a,b,d,e,g,h,k,m){var n=new c;n.Vw=a;n.Zm=b;n.Mj=d;n.Yi=e;n.rI=g;n.v0=h;n.w0=k;n.x0=m;return n};return c}();f.Cu=function(){function c(){}c.oE=
function(a,b,d){if(c.bz(a)){var e=f.la.Ng(b,a,!1);b=!1;f.Yk.mF(a)&&(b=b||a.Su(e,d));e=a.F();1736!=e&&1607!=e||!f.Yk.kF(a)||0==d||(b=b||a.lj(d));1736!=e&&1607!=e||!f.Yk.lF(a)||0==d||b||a.oN()}};c.bz=function(a){return f.Yk.mF(a)||f.Yk.kF(a)||f.Yk.lF(a)};return c}();var l=function(){function c(){this.yh=[]}c.iC=function(a,b,d,e,g){var h=a.F(),k=b.F();if(197==h){if(197==k)return c.ZX(a,b,d,e);if(33==k)return 2==e?e=1:1==e&&(e=2),c.lK(b,a,d,e)}else if(33==h){if(197==k)return c.lK(a,b,d,e);if(33==k)return c.aY(a,
b,d,e)}if(a.u()||b.u())return 4==e?!0:!1;var m=new f.g;a.s(m);var n=new f.g;b.s(n);var p=new f.g;p.H(m);p.Nb(n);d=f.la.Qd(d,p,!1);if(c.ik(m,n,d))return 4==e?!0:!1;m=!1;f.Zk.Ic(h)&&(h=new f.Oa(a.description),h.$b(a,!0),a=h,h=1607);f.Zk.Ic(k)&&(k=new f.Oa(b.description),k.$b(b,!0),b=k,k=1607);if(197!=h&&197!=k){if(a.pb()<b.pb()||33==h&&550==k)2==e?e=1:1==e&&(e=2)}else 1736!=h&&197!=k&&(2==e?e=1:1==e&&(e=2));switch(h){case 1736:switch(k){case 1736:m=c.Zt(a,b,d,e,g);break;case 1607:m=c.on(a,b,d,e,g);
break;case 33:m=c.Yt(a,b,d,e);break;case 550:m=c.Xt(a,b,d,e,g);break;case 197:m=c.xJ(a,b,d,e,g)}break;case 1607:switch(k){case 1736:m=c.on(b,a,d,e,g);break;case 1607:m=c.RB(a,b,d,e,g);break;case 33:m=c.au(a,b,d,e,g);break;case 550:m=c.$t(a,b,d,e,g);break;case 197:m=c.DJ(a,b,d,e)}break;case 33:switch(k){case 1736:m=c.Yt(b,a,d,e);break;case 1607:m=c.au(b,a,d,e,g);break;case 550:m=c.Tt(b,a,d,e)}break;case 550:switch(k){case 1736:m=c.Xt(b,a,d,e,g);break;case 1607:m=c.$t(b,a,d,e,g);break;case 550:m=c.JB(a,
b,d,e,g);break;case 33:m=c.Tt(a,b,d,e);break;case 197:m=c.XI(a,b,d,e)}break;case 197:switch(k){case 1736:m=c.xJ(b,a,d,e,g);break;case 1607:m=c.DJ(b,a,d,e);break;case 550:m=c.XI(b,a,d,e)}}return m};c.ZX=function(a,b,d,e){if(a.u()||b.u())return 4==e?!0:!1;var g=new f.g,h=new f.g,k=new f.g;a.s(g);b.s(h);k.H(g);k.Nb(h);a=f.la.Qd(d,k,!1);switch(e){case 4:return c.ik(g,h,a);case 2:return c.XF(h,g,a);case 1:return c.XF(g,h,a);case 3:return c.jk(g,h,a);case 8:return c.nR(g,h,a);case 32:return c.mR(g,h,a);
case 16:return c.lR(g,h,a)}return!1};c.lK=function(a,b,d,e){if(a.u()||b.u())return 4==e?!0:!1;a=a.w();var g=new f.g,h=new f.g;b.s(g);h.H(a);h.Nb(g);b=f.la.Qd(d,h,!1);switch(e){case 4:return c.xx(a,g,b);case 2:return c.PB(a,g,b);case 1:return c.iW(a,g,b);case 3:return c.mJ(a,g,b);case 8:return c.OB(a,g,b)}return!1};c.aY=function(a,b,d,e){if(a.u()||b.u())return 4==e?!0:!1;a=a.w();b=b.w();var g=new f.g;g.H(a);g.Nb(b);d=f.la.Qd(d,g,!1);switch(e){case 4:return c.jW(a,b,d);case 2:return c.lJ(b,a,d);case 1:return c.lJ(a,
b,d);case 3:return c.nJ(a,b,d)}return!1};c.Zt=function(a,b,d,e,g){switch(e){case 4:return c.DW(a,b,d);case 2:return c.yx(b,a,d,g);case 1:return c.yx(a,b,d,g);case 3:return c.GW(a,b,d);case 8:return c.OW(a,b,d);case 32:return c.JW(a,b,d,g)}return!1};c.on=function(a,b,d,e,g){switch(e){case 4:return c.EW(a,b,d);case 1:return c.QB(a,b,d,g);case 8:return c.PW(a,b,d,g);case 16:return c.yW(a,b,d)}return!1};c.Yt=function(a,b,d,e){switch(e){case 4:return c.BW(a,b,d);case 1:return c.vW(a,b,d);case 8:return c.NW(a,
b,d)}return!1};c.Xt=function(a,b,d,e){switch(e){case 4:return c.AW(a,b,d);case 1:return c.uW(a,b,d);case 8:return c.MW(a,b,d);case 16:return c.xW(a,b,d)}return!1};c.xJ=function(a,b,d,e,g){if(c.zW(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.QW(a,b,d);case 1:return c.tW(a,b,d);case 3:return c.FW(a,b,d);case 8:return c.LW(a,b,d,g);case 32:return c.IW(a,b,d,g);case 16:return c.wW(a,b,d,g)}return!1};c.RB=function(a,b,d,e){switch(e){case 4:return c.ZW(a,b,d);case 2:return c.BJ(b,
a,d);case 1:return c.BJ(a,b,d);case 3:return c.aX(a,b,d);case 8:return c.EJ(a,b,d);case 32:return c.eX(a,b,d);case 16:return c.CJ(a,b,d)}return!1};c.au=function(a,b,d,e){switch(e){case 4:return c.YW(a,b,d);case 1:return c.TW(a,b,d);case 8:return c.iX(a,b,d)}return!1};c.$t=function(a,b,d,e){switch(e){case 4:return c.XW(a,b,d);case 1:return c.SW(a,b,d);case 8:return c.hX(a,b,d);case 16:return c.VW(a,b,d)}return!1};c.DJ=function(a,b,d,e){if(c.WW(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.jX(a,
b,d);case 1:return c.RW(a,b,d);case 3:return c.$W(a,b,d);case 8:return c.gX(a,b,d);case 32:return c.dX(a,b,d);case 16:return c.UW(a,b,d)}return!1};c.JB=function(a,b,d,e){switch(e){case 4:return c.AV(a,b,d);case 2:return c.UI(b,a,d);case 1:return c.UI(a,b,d);case 3:return c.CV(a,b,d);case 32:return c.IV(a,b,d)}return!1};c.Tt=function(a,b,d,e){switch(e){case 4:return c.VI(a,b,d);case 2:return c.MV(a,b,d);case 1:return c.xV(a,b,d);case 3:return c.tx(a,b,d)}return!1};c.XI=function(a,b,d,e){switch(e){case 4:return c.zV(a,
b,d);case 2:return c.LV(a,b,d);case 1:return c.wV(a,b,d);case 3:return c.BV(a,b,d);case 8:return c.KV(a,b,d);case 16:return c.yV(a,b,d)}return!1};c.GW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!c.jk(e,g,d))return!1;e=c.qc(a,b,!1);if(4==e||1==e||2==e)return!1;if(c.TI(a,b,d))return!0;e=a.Pb();g=b.Pb();return Math.abs(e-g)>4*Math.max(a.D(),b.D())*d?!1:c.GA(a,b,d,!0)};c.DW=function(a,b,d){var e=c.qc(a,b,!0);return 4==e?!0:1==e||2==e||1073741824==e?!1:c.vJ(a,b,d)};c.OW=function(a,b,d){var e=
c.qc(a,b,!1);return 4==e||1==e||2==e?!1:c.zJ(a,b,d,null)};c.JW=function(a,b,d,e){var g=c.qc(a,b,!1);return 4==g||1==g||2==g?!1:c.wJ(a,b,d,e)};c.yx=function(a,b,d,e){var g=new f.g,h=new f.g;a.s(g);b.s(h);if(!c.yc(g,h,d))return!1;g=c.qc(a,b,!1);return 4==g||2==g?!1:1==g?!0:c.sJ(a,b,d,e)};c.EW=function(a,b,d){var e=c.qc(a,b,!0);return 4==e?!0:1==e||1073741824==e?!1:c.vJ(a,b,d)};c.PW=function(a,b,d,e){var g=c.qc(a,b,!1);return 4==g||1==g?!1:c.AJ(a,b,d,e)};c.yW=function(a,b,d){var e=c.qc(a,b,!1);return 4==
e||1==e?!1:c.uJ(a,b,d,null)};c.QB=function(a,b,d,e){var g=new f.g,h=new f.g;a.s(g);b.s(h);if(!c.yc(g,h,d))return!1;g=c.qc(a,b,!1);return 4==g?!1:1==g?!0:c.tJ(a,b,d,e)};c.BW=function(a,b,d){return 0==f.Zc.wH(a,b,d)?!0:!1};c.NW=function(a,b,d){b=b.w();return c.yJ(a,b,d)};c.vW=function(a,b,d){b=b.w();return c.rJ(a,b,d)};c.AW=function(a,b,d){var e=c.qc(a,b,!1);if(4==e)return!0;if(1==e)return!1;e=new f.g;a.s(e);e.O(d,d);for(var g=new f.b,h=0;h<b.D();h++)if(b.w(h,g),e.contains(g)){var k=f.Zc.Td(a,g,d);
if(1==k||2==k)return!1}return!0};c.MW=function(a,b,d){var e=this.qc(a,b,!1);if(4==e||1==e)return!1;e=new f.g;a.s(e);e.O(d,d);for(var g=!1,h=a,k=!1,m=0;m<b.D();m++){var n=b.xa(m);if(e.contains(n))if(n=f.Zc.Td(h,n,d),2==n)g=!0;else if(1==n)return!1;k||(!f.Oe.Wl(a,b.D()-1)||null!=a.ib&&null!=a.ib.Hb?h=a:(h=new f.Fa,a.copyTo(h),h.lj(1)),k=!0)}return g?!0:!1};c.xW=function(a,b,d){var e=this.qc(a,b,!1);if(4==e||1==e)return!1;var g=new f.g;e=new f.g;var h=new f.g;a.s(g);b.s(h);e.H(g);e.O(d,d);h=g=!1;for(var k=
a,m=!1,n=0;n<b.D();n++){var p=b.xa(n);e.contains(p)?(p=f.Zc.Td(k,p,d),0==p?h=!0:1==p&&(g=!0)):h=!0;if(g&&h)return!0;m||(!f.Oe.Wl(a,b.D()-1)||null!=a.ib&&null!=a.ib.Hb?k=a:(k=new f.Fa,a.copyTo(k),k.lj(1)),m=!0)}return!1};c.uW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!this.yc(e,g,d))return!1;g=this.qc(a,b,!1);if(4==g)return!1;if(1==g)return!0;g=!1;for(var h=a,k=!1,m=0;m<b.D();m++){var n=b.xa(m);if(!e.contains(n))return!1;n=f.Zc.Td(h,n,d);if(1==n)g=!0;else if(0==n)return!1;k||(!f.Oe.Wl(a,
b.D()-1)||null!=a.ib&&null!=a.ib.Hb?h=a:(h=new f.Fa,a.copyTo(h),h.lj(1)),k=!0)}return g};c.FW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!c.jk(e,g,d))return!1;e=new f.Fa;e.bd(b,!1);return c.GA(a,e,d,!0)};c.zW=function(a,b,d){var e=c.qc(a,b,!1);if(4==e)return!0;if(1==e||2==e)return!1;var g=new f.g;e=new f.g;a.s(g);b.s(e);if(c.yc(e,g,d))return!1;g=new f.b;e.tn(g);b=f.Zc.Td(a,g,d);if(0!=b)return!1;e.RJ(g);b=f.Zc.Td(a,g,d);if(0!=b)return!1;e.un(g);b=f.Zc.Td(a,g,d);if(0!=b)return!1;e.UJ(g);
b=f.Zc.Td(a,g,d);if(0!=b)return!1;b=a.Va(0);g=new f.g;g.H(e);g.O(d,d);for(var h=0,k=a.D();h<k;h++){var m=b.read(2*h),n=b.read(2*h+1);if(g.contains(m,n))return!1}return!c.EH(a,e,d)};c.LW=function(a,b,d,e){var g=c.qc(a,b,!1);if(4==g||1==g||2==g)return!1;g=new f.g;var h=new f.g;a.s(g);b.s(h);if(c.yc(h,g,d))return!1;if(h.N()<=d&&h.ca()<=d)return b=b.bq(),c.yJ(a,b,d);if(h.N()<=d||h.ca()<=d)return g=new f.Oa,h=new f.Ra,b.Pf(0,h),g.xf(h),b.Pf(2,h),g.lineTo(h),c.AJ(a,g,d,e);g=new f.Fa;g.bd(b,!1);return c.zJ(a,
g,d,e)};c.IW=function(a,b,d,e){var g=c.qc(a,b,!1);if(4==g||1==g||2==g)return!1;g=new f.g;var h=new f.g;a.s(g);b.s(h);if(c.yc(h,g,d)||h.N()<=d||h.ca()<=d)return!1;g=new f.Fa;g.bd(b,!1);return c.wJ(a,g,d,e)};c.QW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.yc(g,e,d)};c.tW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!c.yc(e,g,d))return!1;e=c.qc(a,b,!1);if(4==e||2==e)return!1;if(1==e)return!0;if(g.N()<=d&&g.ca()<=d)return b=b.bq(),c.rJ(a,b,d);if(g.N()<=d||g.ca()<=d)return g=
new f.Oa,e=new f.Ra,b.Pf(0,e),g.xf(e),b.Pf(2,e),g.lineTo(e),c.tJ(a,g,d,null);g=new f.Fa;g.bd(b,!1);return c.sJ(a,g,d,null)};c.wW=function(a,b,d,e){var g=new f.g,h=new f.g;a.s(g);b.s(h);if(c.yc(h,g,d)||h.ca()>d&&h.N()>d||h.ca()<=d&&h.N()<=d)return!1;g=new f.Oa;h=new f.Ra;b.Pf(0,h);g.xf(h);b.Pf(2,h);g.lineTo(h);return c.uJ(a,g,d,e)};c.aX=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.jk(e,g,d)&&4!=c.qc(a,b,!1)?c.TI(a,b,d)?!0:c.GA(a,b,d,!1):!1};c.ZW=function(a,b,d){return 4==this.qc(a,
b,!1)?!0:(new f.km(a,b,d,!0)).next()?!this.FH(a,b,d):!1};c.EJ=function(a,b,d){if(4==c.qc(a,b,!1))return!1;var e=new f.ie(0);if(0!=c.HA(a,b,d,e))return!1;for(var g=new f.Hd,h=0;h<e.size;h+=2){var k=e.read(h),m=e.read(h+1);g.gv(k,m)}a=a.sg();b=b.sg();a.yd(b,0,b.D());return c.sx(a,g,d)};c.CJ=function(a,b,d){if(4==c.qc(a,b,!1))return!1;var e=new f.ie(0);if(0!=c.HA(a,b,d,e))return!1;for(var g=new f.Hd,h=0;h<e.size;h+=2){var k=e.read(h),m=e.read(h+1);g.gv(k,m)}a=a.sg();b=b.sg();a.yd(b,0,b.D());return!c.sx(a,
g,d)};c.eX=function(a,b,d){return 4==c.qc(a,b,!1)?!1:c.HH(a,b,d)};c.BJ=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.yc(e,g,d)&&4!=c.qc(a,b,!1)?c.Lm(b,a,d,!1):!1};c.YW=function(a,b,d){if(4==c.qc(a,b,!1))return!0;b=b.w();return!c.IA(a,b,d)};c.iX=function(a,b,d){if(4==c.qc(a,b,!1))return!1;b=b.w();return c.JA(a,b,d)};c.TW=function(a,b,d){if(4==c.qc(a,b,!1))return!1;b=b.w();return c.DH(a,b,d)};c.XW=function(a,b,d){return 4==c.qc(a,b,!1)?!0:!c.GH(a,b,d,!1)};c.hX=function(a,b,d){if(4==
this.qc(a,b,!1))return!1;var e=a.Ba(),g=new f.g,h=new f.g,k=new f.g;a.s(g);b.s(h);g.O(d,d);h.O(d,d);k.H(g);k.Ia(h);g=null;var m=a.ib;if(null!=m){var n=m.Hb;g=m.To;null==n&&(n=m=f.la.pj(a,k))}else n=m=f.la.pj(a,k);var p=n.getIterator(),x=null;null!=g&&(x=g.getIterator());var Q=new f.b,V=new f.b,ca=!1,ba=d*d;g=new f.Gn(b.D());for(m=0;m<b.D();m++)g.write(m,0);for(m=0;m<b.D();m++)if(b.w(m,Q),k.contains(Q))if(h.H(Q.x,Q.y,Q.x,Q.y),null==x||(x.vi(h,d),-1!=x.next())){p.vi(h,d);for(var ea=p.next();-1!=ea;ea=
p.next())if(e.Rb(n.ga(ea)),ea=e.aa(),ea.cc(ea.ae(Q,!1),V),f.b.oc(Q,V)<=ba){g.write(m,1);ca=!0;break}}if(!ca)return!1;a=a.sg();e=new f.Hd;h=new f.b;for(m=0;m<b.D();m++)0!=g.read(m)&&(b.w(m,h),e.gv(h.x,h.y));return this.sx(a,e,d)};c.VW=function(a,b,d){if(4==this.qc(a,b,!1))return!1;var e=a.Ba(),g=new f.g,h=new f.g,k=new f.g;a.s(g);b.s(h);g.O(d,d);h.O(d,d);k.H(g);k.Ia(h);g=null;var m=a.ib;if(null!=m){var n=m.Hb;g=m.To;null==n&&(n=m=f.la.pj(a,k))}else n=m=f.la.pj(a,k);var p=n.getIterator(),x=null;null!=
g&&(x=g.getIterator());var Q=new f.b,V=new f.b,ca=!1,ba=!1,ea=d*d;g=new f.Gn(b.D());for(m=0;m<b.D();m++)g.write(m,0);for(m=0;m<b.D();m++)if(b.w(m,Q),k.contains(Q))if(h.H(Q.x,Q.y,Q.x,Q.y),null!=x&&(x.vi(h,d),-1==x.next()))ba=!0;else{p.vi(h,d);for(var da=!1,ma=p.next();-1!=ma;ma=p.next())if(e.Rb(n.ga(ma)),ma=e.aa(),ma.cc(ma.ae(Q,!1),V),f.b.oc(Q,V)<=ea){g.write(m,1);da=ca=!0;break}da||(ba=!0)}else ba=!0;if(!ca||!ba)return!1;a=a.sg();e=new f.Hd;h=new f.b;for(m=0;m<b.D();m++)0!=g.read(m)&&(b.w(m,h),e.gv(h.x,
h.y));return!this.sx(a,e,d)};c.SW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!c.yc(e,g,d)||4==c.qc(a,b,!1)||!c.GH(a,b,d,!0))return!1;a=a.sg();return!c.WI(a,b,d)};c.$W=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return g.ca()>d&&g.N()>d?!1:c.jk(e,g,d)};c.WW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.yc(g,e,d)?!1:!c.EH(a,g,d)};c.gX=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(g.ca()<=d&&g.N()<=d)return g=b.bq(),c.JA(a,g,d);if(g.ca()<=d||g.N()<=
d)return g=new f.Oa,e=new f.Ra,b.Pf(0,e),g.xf(e),b.Pf(2,e),g.lineTo(e),c.EJ(a,g,d);a=a.Ba();b=new f.g;e=new f.g;b.H(g);e.H(g);b.O(-d,-d);e.O(d,d);g=!1;for(var h=new f.g,k=new f.g;a.Ta();)for(;a.Aa();){a.aa().s(h);k.H(b);k.Ia(h);if(!k.u()&&(k.ca()>d||k.N()>d))return!1;k.H(e);k.Ia(h);k.u()||(g=!0)}return g};c.dX=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(c.yc(e,g,d)||c.yc(g,e,d)||c.yc(g,e,d)||g.ca()>d&&g.N()>d||g.ca()<=d&&g.N()<=d)return!1;e=new f.Oa;g=new f.Ra;b.Pf(0,g);e.xf(g);b.Pf(2,
g);e.lineTo(g);return c.HH(a,e,d)};c.jX=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(!c.yc(g,e,d)||g.ca()<=d&&g.N()<=d)return!1;if(g.ca()<=d||g.N()<=d)return c.yc(g,e,d);a=a.Ba();b=new f.g;b.H(g);b.O(-d,-d);g=!1;e=new f.g;for(var h=new f.g;a.Ta();)for(;a.Aa();)a.aa().s(e),b.sm(e)?g=!0:(h.H(b),h.Ia(e),!h.u()&&(h.ca()>d||h.N()>d)&&(g=!0));return g};c.RW=function(a,b,d){var e=new f.g,g=new f.g;b.s(g);a.s(e);if(!c.yc(e,g,d)||g.ca()>d&&g.N()>d)return!1;if(g.ca()<=d&&g.N()<=d)return b=b.bq(),
c.DH(a,b,d);e=new f.Oa;g=new f.Ra;b.Pf(0,g);e.xf(g);b.Pf(2,g);e.lineTo(g);return c.Lm(e,a,d,!1)};c.UW=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(c.yc(g,e,d)||g.ca()<=d&&g.N()<=d)return!1;if(g.ca()<=d||g.N()<=d)return e=new f.Oa,g=new f.Ra,b.Pf(0,g),e.xf(g),b.Pf(2,g),e.lineTo(g),c.CJ(a,e,d);a=a.Ba();b=new f.g;e=new f.g;e.H(g);b.H(g);e.O(-d,-d);b.O(d,d);for(var h=g=!1,k=new f.g,m=new f.g;a.Ta();)for(;a.Aa();)if(a.aa().s(k),h||b.contains(k)||(h=!0),g||(m.H(e),m.Ia(k),!m.u()&&(m.ca()>d||
m.N()>d)&&(g=!0)),g&&h)return!0;return!1};c.CV=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.jk(e,g,d)?c.DV(a,b,d)?!0:c.IB(a,b,d,!1,!0,!1):!1};c.AV=function(a,b,d){return!c.WI(a,b,d)};c.IV=function(a,b,d){return c.IB(a,b,d,!1,!1,!0)};c.UI=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.yc(e,g,d)?c.IB(b,a,d,!0,!1,!1):!1};c.sx=function(a,b,d){d*=d;for(var e=new f.b,g=new f.b,h=0;h<b.D();h++){b.w(h,g);for(var k=!1,m=0;m<a.D();m++)if(a.w(m,e),f.b.oc(e,g)<=d){k=!0;break}if(!k)return!1}return!0};
c.tx=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return c.jk(e,g,d)};c.VI=function(a,b,d){b=b.w();return c.St(a,b,d)};c.MV=function(a,b,d){return c.tx(a,b,d)};c.xV=function(a,b,d){return!c.VI(a,b,d)};c.BV=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);return g.ca()>d||g.N()>d?!1:c.jk(e,g,d)};c.zV=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(c.yc(g,e,d))return!1;b=new f.g;b.H(g);b.O(d,d);d=new f.b;for(g=0;g<a.D();g++)if(a.w(g,d),b.contains(d))return!1;return!0};c.KV=function(a,
b,d){var e=new f.g,g=new f.g,h=new f.g;b.s(e);if(e.ca()<=d&&e.N()<=d)return!1;if(e.ca()<=d||e.N()<=d){b=new f.b;var k=!1;g.H(e);h.H(e);g.O(d,d);e.ca()>d?h.O(0,-d):h.O(-d,0);for(var m=0;m<a.D();m++)if(a.w(m,b),g.contains(b)){if(e.ca()>d){if(b.y>h.A&&b.y<h.B)return!1}else if(b.x>h.o&&b.x<h.v)return!1;k=!0}return k}g.H(e);h.H(e);g.O(d,d);h.O(-d,-d);b=new f.b;k=!1;for(m=0;m<a.D();m++)if(a.w(m,b),g.contains(b)){if(h.sm(b))return!1;k=!0}return k};c.LV=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);
if(!c.yc(g,e,d))return!1;if(g.ca()<=d&&g.N()<=d)return c.jk(e,g,d);if(g.ca()<=d||g.N()<=d){b=!1;e=new f.g;var h=new f.g;e.H(g);h.H(g);g.ca()>d?e.O(0,-d):e.O(-d,0);h.O(d,d);for(var k=new f.b,m=0;m<a.D();m++){a.w(m,k);if(!h.contains(k))return!1;g.ca()>d?k.y>e.A&&k.y<e.B&&(b=!0):k.x>e.o&&k.x<e.v&&(b=!0)}return b}b=!1;e=new f.g;h=new f.g;e.H(g);h.H(g);e.O(-d,-d);h.O(d,d);k=new f.b;for(m=0;m<a.D();m++){a.w(m,k);if(!h.contains(k))return!1;e.sm(k)&&(b=!0)}return b};c.wV=function(a,b,d){var e=new f.g,g=new f.g;
a.s(e);b.s(g);if(!c.yc(e,g,d)||g.ca()>d||g.N()>d)return!1;b=b.bq();return!c.St(a,b,d)};c.yV=function(a,b,d){var e=new f.g,g=new f.g;a.s(e);b.s(g);if(c.yc(g,e,d)||g.ca()<=d&&g.N()<=d)return!1;if(g.ca()<=d||g.N()<=d){b=new f.g;e=new f.g;b.H(g);g.ca()>d?b.O(0,-d):b.O(-d,0);e.H(g);e.O(d,d);for(var h=new f.b,k=!1,m=!1,n=0;n<a.D();n++)if(a.w(n,h),k||(g.ca()>d?h.y>b.A&&h.y<b.B&&(k=!0):h.x>b.o&&h.x<b.v&&(k=!0)),m||e.contains(h)||(m=!0),k&&m)return!0;return!1}b=new f.g;e=new f.g;b.H(g);b.O(-d,-d);e.H(g);e.O(d,
d);h=new f.b;m=k=!1;for(n=0;n<a.D();n++)if(a.w(n,h),!k&&b.sm(h)&&(k=!0),m||e.contains(h)||(m=!0),k&&m)return!0;return!1};c.nJ=function(a,b,d){return f.b.oc(a,b)<=d*d?!0:!1};c.jW=function(a,b,d){return f.b.oc(a,b)>d*d?!0:!1};c.lJ=function(a,b,d){return c.nJ(a,b,d)};c.mJ=function(a,b,d){var e=new f.g;e.H(a);return c.jk(e,b,d)};c.xx=function(a,b,d){var e=new f.g;e.H(b);e.O(d,d);return!e.contains(a)};c.OB=function(a,b,d){if(b.ca()<=d&&b.N()<=d)return!1;var e=new f.g,g=new f.g;e.H(b);e.O(d,d);if(!e.contains(a))return!1;
if(b.ca()<=d||b.N()<=d){g.H(b);b.ca()>d?g.O(0,-d):g.O(-d,0);if(b.ca()>d){if(a.y>g.A&&a.y<g.B)return!1}else if(a.x>g.o&&a.x<g.v)return!1;return!0}g.H(b);g.O(-d,-d);return g.sm(a)?!1:!0};c.PB=function(a,b,d){if(b.ca()<=d&&b.N()<=d)return!0;if(b.ca()<=d||b.N()<=d){var e=new f.g;e.H(b);b.ca()>d?e.O(0,-d):e.O(-d,0);var g=!1;b.ca()>d?a.y>e.A&&a.y<e.B&&(g=!0):a.x>e.o&&a.x<e.v&&(g=!0);return g}e=new f.g;e.H(b);e.O(-d,-d);return e.sm(a)};c.iW=function(a,b,d){return c.mJ(a,b,d)};c.jk=function(a,b,d){return c.yc(a,
b,d)&&c.yc(b,a,d)};c.ik=function(a,b,d){var e=new f.g;e.H(b);e.O(d,d);return!a.isIntersecting(e)};c.nR=function(a,b,d){if(a.ca()<=d&&a.N()<=d){var e=a.hf();return c.OB(e,b,d)}if(b.ca()<=d&&b.N()<=d)return e=b.hf(),c.OB(e,a,d);a.ca()>d&&a.N()>d&&(b.ca()<=d||b.N()<=d)?e=b:(e=a,a=b);if(e.ca()<=d||e.N()<=d){if(a.ca()<=d||a.N()<=d){b=new f.zb;var g=new f.zb,h=[0,0],k=[0,0],m=new f.b;e.tn(m);b.Fc(m);e.un(m);b.Sc(m);a.tn(m);g.Fc(m);a.un(m);g.Sc(m);b.Ia(g,null,h,k,d);return 1!=b.Ia(g,null,null,null,d)?!1:
0==h[0]||1==h[1]||0==k[0]||1==k[1]}b=new f.g;g=new f.g;b.H(a);b.O(-d,-d);g.H(b);g.Ia(e);return!g.u()&&(g.ca()>d||g.N()>d)?!1:!0}a.O(d,d);g=new f.g;g.H(e);g.Ia(a);return g.u()||!g.u()&&g.ca()>d&&g.N()>d?!1:!0};c.mR=function(a,b,d){if(c.yc(a,b,d)||c.yc(b,a,d)||a.ca()<=d&&a.N()<=d||b.ca()<=d&&b.N()<=d)return!1;if(a.ca()<=d||a.N()<=d){if(b.ca()>d&&b.N()>d)return!1;var e=new f.zb,g=new f.zb,h=[0,0],k=[0,0],m=new f.b;a.tn(m);e.Fc(m);a.un(m);e.Sc(m);b.tn(m);g.Fc(m);b.un(m);g.Sc(m);e.Ia(g,null,h,k,d);return 2!=
e.Ia(g,null,null,null,d)?!1:(0<h[0]||1>h[1])&&(0<k[0]||1>k[1])}if(b.ca()<=d||b.N()<=d)return!1;e=new f.g;e.H(a);e.Ia(b);return e.u()||e.ca()<=d||e.N()<=d?!1:!0};c.XF=function(a,b,d){if(!c.yc(a,b,d))return!1;if(a.ca()<=d&&a.N()<=d)return a=a.hf(),c.PB(a,b,d);if(b.ca()<=d&&b.N()<=d)return b=b.hf(),c.PB(b,a,d);if(a.ca()<=d||a.N()<=d)return c.yc(a,b,d);if(b.ca()<=d||b.N()<=d){var e=new f.g;e.H(a);e.O(-d,-d);if(e.sm(b))return!0;a=new f.g;a.H(e);a.Ia(b);return a.u()||a.ca()<=d&&a.N()<=d?!1:!0}return c.yc(a,
b,d)};c.lR=function(a,b,d){if(c.yc(a,b,d)||c.yc(b,a,d)||a.ca()<=d&&a.N()<=d||b.ca()<=d&&b.N()<=d||b.ca()>d&&b.N()>d&&a.ca()>d&&a.N()>d)return!1;if(a.ca()>d&&a.N()>d)var e=b;else e=a,a=b;if(a.ca()>d&&a.N()>d){b=new f.g;var g=new f.g;g.H(a);g.O(-d,-d);b.H(g);b.Ia(e);return b.u()||b.ca()<=d&&b.N()<=d?!1:!0}b=new f.zb;g=new f.zb;var h=[0,0],k=[0,0],m=new f.b;e.tn(m);b.Fc(m);e.un(m);b.Sc(m);a.tn(m);g.Fc(m);a.un(m);g.Sc(m);b.Ia(g,null,h,k,d);return 1!=b.Ia(g,null,null,null,d)?!1:0<h[0]&&1>h[1]&&0<k[0]&&
1>k[1]};c.vJ=function(a,b,d){var e=new f.g,g=new f.g,h=new f.km(a,b,d,!0);if(!h.next())return!0;if(this.FH(a,b,d))return!1;var k=a,m=null;1736==b.F()&&(m=b);var n=!1,p=!1;do{var x=h.tl(),Q=h.ol();Q=b.xa(b.ua(Q));e.H(h.cA());e.O(d,d);if(e.contains(Q)&&(Q=f.Zc.Td(k,Q,0),0!=Q)||1736==b.F()&&(x=a.xa(a.ua(x)),g.H(h.Gz()),g.O(d,d),g.contains(x)&&(Q=f.Zc.Td(m,x,0),0!=Q)))return!1;n||(!f.Oe.Wl(a,b.$()-1)||null!=a.ib&&null!=a.ib.Hb?k=a:(k=new f.Fa,a.copyTo(k),k.lj(1)),n=!0);1736!=b.F()||p||(p=b,!f.Oe.Wl(p,
a.$()-1)||null!=b.ib&&null!=b.ib.Hb?m=b:(m=new f.Fa,p.copyTo(m),m.lj(1)),p=!0)}while(h.next());return!0};c.yc=function(a,b,d){var e=new f.g;e.H(a);e.O(d,d);return e.contains(b)};c.Ts=function(a,b,d){var e=new f.g;e.H(b);e.O(d,d);b=new f.b;a.tn(b);if(!e.contains(b))return!0;a.RJ(b);if(!e.contains(b))return!0;a.UJ(b);if(!e.contains(b))return!0;a.un(b);return e.contains(b)?!1:!0};c.TI=function(a,b,d){if(a.$()!=b.$()||a.D()!=b.D())return!1;var e=new f.b,g=new f.b,h=!0;d*=d;for(var k=0;k<a.$();k++){if(a.zc(k)!=
b.zc(k)){h=!1;break}for(var m=a.ua(k);m<b.zc(k);m++)if(a.w(m,e),b.w(m,g),f.b.oc(e,g)>d){h=!1;break}if(!h)break}return h?!0:!1};c.DV=function(a,b,d){if(a.D()!=b.D())return!1;var e=new f.b,g=new f.b,h=!0;d*=d;for(var k=0;k<a.D();k++)if(a.w(k,e),b.w(k,g),f.b.oc(e,g)>d){h=!1;break}return h?!0:!1};c.IB=function(a,b,d,e,g,h){var k=!1;if(a.D()>b.D()){e&&(e=!1,k=!0);var m=b}else m=a,a=b;b=null;if(g||h||k){b=new f.Gn(a.D());for(var n=0;n<a.D();n++)b.write(n,0)}n=new f.g;var p=new f.g,x=new f.g;m.s(n);a.s(p);
n.O(d,d);p.O(d,d);x.H(n);x.Ia(p);p=new f.b;for(var Q=new f.b,V=!0,ca=f.la.aF(a,x),ba=ca.getIterator(),ea=d*d,da=0;da<m.D();da++)if(m.w(da,p),x.contains(p)){var ma=!1;n.H(p.x,p.y,p.x,p.y);ba.vi(n,d);for(var za=ba.next();-1!=za&&!(za=ca.ga(za),a.w(za,Q),f.b.oc(p,Q)<=ea&&((g||h||k)&&b.write(za,1),ma=!0,e));za=ba.next());if(!ma&&(V=!1,g||e))return!1}else{if(g||e)return!1;V=!1}if(h&&V)return!1;if(e)return!0;for(n=0;n<a.D();n++)if(1==b.read(n)){if(h)return!0}else if(g||k)return!1;return h?!1:!0};c.WI=function(a,
b,d){if(a.D()>b.D())var e=b;else e=a,a=b;b=new f.g;var g=new f.g,h=new f.g;e.s(b);a.s(g);b.O(d,d);g.O(d,d);h.H(b);h.Ia(g);g=new f.b;for(var k=new f.b,m=d*d,n=f.la.aF(a,h),p=n.getIterator(),x=0;x<e.D();x++)if(e.w(x,g),h.contains(g)){b.H(g.x,g.y,g.x,g.y);p.vi(b,d);for(var Q=p.next();-1!=Q;Q=p.next())if(a.w(n.ga(Q),k),f.b.oc(g,k)<=m)return!0}return!1};c.GA=function(a,b,d,e){return c.Lm(a,b,d,e)&&c.Lm(b,a,d,e)};c.Lm=function(a,b,d,e){function g(Sa,Ta){return x.BF(Sa,Ta)}var h=!0,k=[0,0],m=[0,0],n=0,p=
new f.ha(0),x=new c,Q,V=new f.g,ca=new f.g,ba=new f.g;a.s(V);b.s(ca);V.O(d,d);ca.O(d,d);ba.H(V);ba.Ia(ca);a=a.Ba();ca=b.Ba();var ea=null,da=ea=null,ma=b.ib;null!=ma?(ea=ma.Hb,da=ma.To,null==ea&&(ea=f.la.pj(b,ba))):ea=f.la.pj(b,ba);b=ea.getIterator();ma=null;for(null!=da&&(ma=da.getIterator());a.Ta();)for(;a.Aa();){var za=!1,Ba=a.aa();Ba.s(V);if(!V.isIntersecting(ba))return!1;if(null!=ma&&(ma.vi(V,d),-1==ma.next()))return h=!1;da=Ba.Pb();b.wn(Ba,d);for(Q=b.next();-1!=Q;Q=b.next()){ca.Rb(ea.ga(Q));
Q=ca.aa();var Ea=Ba.Ia(Q,null,k,m,d);if(2==Ea&&(!e||m[0]<=m[1])){Ea=k[0];var Ma=k[1],Pa=m[0],Ra=m[1];if(Ea*da<=d&&(1-Ma)*da<=d){za=!0;n=0;p.resize(0);x.yh.length=0;var Qa=a.wb();for(Pa=!0;Pa;){if(a.Aa()){Ba=a.aa();da=Ba.Pb();Ea=Ba.Ia(Q,null,k,m,d);if(2==Ea&&(!e||m[0]<=m[1])&&(Ea=k[0],Ma=k[1],Ea*da<=d&&(1-Ma)*da<=d)){Qa=a.wb();continue}if(ca.Aa()&&(Q=ca.aa(),Ea=Ba.Ia(Q,null,k,m,d),2==Ea&&(!e||m[0]<=m[1])&&(Ea=k[0],Ma=k[1],Ea*da<=d&&(1-Ma)*da<=d))){Qa=a.wb();continue}}Pa=!1}Qa!=a.wb()&&(a.Rb(Qa),a.aa());
break}else Qa=a.wb(),Q=R.construct(Qa,a.Pa,Ea,Ma,ca.wb(),ca.Pa,Pa,Ra),x.yh.push(Q),p.add(p.size)}}if(!za){if(n==x.yh.length)return!1;1<p.size-n&&p.Zd(n,p.size,g);for(za=0;n<x.yh.length;n++)if(Q=x.yh[p.get(n)],!(Q.Mj<za&&Q.Yi<za)){if(da*(Q.Mj-za)>d)return!1;za=Q.Yi;if(da*(1-za)<=d||1==za)break}if(da*(1-za)>d)return!1;n=0;p.resize(0);x.yh.length=0}}return h};c.HH=function(a,b,d){if(1>c.HA(a,b,d,null))return!1;var e=new f.g,g=new f.g;a.s(e);b.s(g);var h=c.Ts(e,g,d);e=c.Ts(g,e,d);return h&&e?!0:h&&!e?
!c.Lm(b,a,d,!1):e&&!h?!c.Lm(a,b,d,!1):!c.Lm(a,b,d,!1)&&!c.Lm(b,a,d,!1)};c.HA=function(a,b,d,e){function g(Ya,ab){return V.BF(Ya,ab)}if(a.gA()>b.gA())var h=b,k=a;else h=a,k=b;a=h.Ba();b=k.Ba();var m=[0,0],n=[0,0],p=-1,x=0,Q=new f.ha(0),V=new c,ca=new f.g,ba=new f.g,ea=new f.g;h.s(ca);k.s(ba);ca.O(d,d);ba.O(d,d);ea.H(ca);ea.Ia(ba);h=null;null!=e&&(h=new f.b);var da=ba=ba=null,ma=k.ib;null!=ma?(ba=ma.Hb,da=ma.To,null==ba&&(ba=f.la.pj(k,ea))):ba=f.la.pj(k,ea);k=ba.getIterator();ma=null;for(null!=da&&
(ma=da.getIterator());a.Ta();)for(da=0;a.Aa();){var za=a.aa();za.s(ca);if(ca.isIntersecting(ea)&&(null==ma||(ma.vi(ca,d),-1!=ma.next()))){var Ba=za.Pb();k.wn(za,d);for(var Ea=k.next();-1!=Ea;Ea=k.next()){var Ma=ba.ga(Ea);b.Rb(Ma);var Pa=b.aa(),Ra=Pa.Pb(),Qa=za.Ia(Pa,null,m,n,d);if(0<Qa){Ea=m[0];p=n[0];var Sa=2==Qa?m[1]:NaN,Ta=2==Qa?n[1]:NaN;if(2==Qa){if(Ba*(Sa-Ea)>d)return p=1;var Ua=Ba*(Sa-Ea);if(b.Aa()){Pa=b.aa();Qa=za.Ia(Pa,null,m,null,d);if(2==Qa){Qa=m[0];var Va=m[1];Qa=Ba*(Va-Qa);if(Ua+Qa>d)return p=
1}b.Rb(Ma);b.aa()}if(!b.Im()){b.ti();Pa=b.ti();Qa=za.Ia(Pa,null,m,null,d);if(2==Qa&&(Qa=m[0],Va=m[1],Qa=Ba*(Va-Qa),Ua+Qa>d))return p=1;b.Rb(Ma);b.aa()}if(a.Aa()){Ma=a.wb();za=a.aa();Qa=za.Ia(Pa,null,m,null,d);if(2==Qa&&(Qa=m[0],Va=m[1],Qa=Ba*(Va-Qa),Ua+Qa>d))return p=1;a.Rb(Ma);a.aa()}if(!a.Im()){Ma=a.wb();a.ti();za=a.ti();Qa=za.Ia(Pa,null,m,null,d);if(2==Qa&&(Qa=m[0],Va=m[1],Qa=Ra*(Va-Qa),Ua+Qa>d))return p=1;a.Rb(Ma);a.aa()}Pa=R.construct(a.wb(),a.Pa,Ea,Sa,b.wb(),b.Pa,p,Ta);V.yh.push(Pa);Q.add(Q.size)}p=
0;null!=e&&(za.cc(Ea,h),e.add(h.x),e.add(h.y))}}if(x<V.yh.length){Q.Zd(x,Q.size,g);za=0;for(Ea=V.yh[Q.get(x)].Zm;x<V.yh.length;x++)if(Pa=V.yh[Q.get(x)],!(Pa.Mj<za&&Pa.Yi<za))if(Ba*(Pa.Mj-za)>d)da=Ba*(Pa.Yi-Pa.Mj),za=Pa.Yi,Ea=Pa.Zm;else{Pa.Zm!=Ea?(da=Ba*(Pa.Yi-Pa.Mj),Ea=Pa.Zm):da+=Ba*(Pa.Yi-Pa.Mj);if(da>d)return p=1;za=Pa.Yi;if(1==za)break}Ba*(1-za)>d&&(da=0);x=0;Q.resize(0);V.yh.length=0}}}return p};c.FH=function(a,b,d){var e=a.Ba(),g=b.Ba();for(a=new f.km(a,b,d,!1);a.next();){b=a.tl();var h=a.ol();
e.Rb(b);g.Rb(h);b=e.aa();if(0<g.aa().Ia(b,null,null,null,d))return!0}return!1};c.GH=function(a,b,d,e){var g=a.Ba(),h=new f.g,k=new f.g,m=new f.g;a.s(h);b.s(k);h.O(d,d);h.contains(k);k.O(d,d);m.H(h);m.Ia(k);h=a.ib;null!=h?(h=h.Hb,null==h&&(h=f.la.pj(a,m))):h=f.la.pj(a,m);a=h.getIterator();for(var n=new f.b,p=new f.b,x=d*d,Q=0;Q<b.D();Q++)if(b.w(Q,n),m.contains(n)){k.H(n.x,n.y,n.x,n.y);a.vi(k,d);for(var V=!1,ca=a.next();-1!=ca;ca=a.next())if(g.Rb(h.ga(ca)),ca=g.aa(),ca.cc(ca.ae(n,!1),p),f.b.oc(p,n)<=
x){V=!0;break}if(e){if(!V)return!1}else if(V)return!0}return e?!0:!1};c.IA=function(a,b,d){var e=new f.b,g=d*d,h=a.Ba();a=a.ib;if(null!=a&&(a=a.Hb,null!=a)){var k=new f.g;k.H(b);d=a.Vz(k,d);for(k=d.next();-1!=k;k=d.next())if(h.Rb(a.ga(k)),h.Aa()){k=h.aa();var m=k.ae(b,!1);k.cc(m,e);if(f.b.oc(b,e)<=g)return!0}return!1}for(a=new f.g;h.Ta();)for(;h.Aa();)if(k=h.aa(),k.s(a),a.O(d,d),a.contains(b)&&(m=k.ae(b,!1),k.cc(m,e),f.b.oc(b,e)<=g))return!0;return!1};c.DH=function(a,b,d){return c.IA(a,b,d)&&!c.JA(a,
b,d)};c.JA=function(a,b,d){a=a.sg();return!c.St(a,b,d)};c.EH=function(a,b,d){if(a.Fm()){var e=new f.zb(b.o,b.A,b.o,b.B),g=new f.zb(b.o,b.B,b.v,b.B),h=new f.zb(b.v,b.B,b.v,b.A);b=new f.zb(b.v,b.A,b.o,b.A);for(a=a.Ba();a.Ta();)for(;a.Aa();){var k=a.aa();if(k.isIntersecting(e,d)||k.isIntersecting(g,d)||k.isIntersecting(h,d)||k.isIntersecting(b,d))return!0}}else{e=new f.g;e.H(b);e.O(d,d);d=a.Va(0);g=new f.b;h=new f.b;b=new f.b;k=new f.b;for(var m=0,n=a.$();m<n;m++)for(var p=!0,x=a.ua(m),Q=a.zc(m);x<Q;x++)if(p)d.mc(2*
x,h),p=!1;else{d.mc(2*x,g);b.K(h);k.K(g);if(0!=e.ez(b,k))return!0;h.K(g)}}return!1};c.qc=function(a,b,d){var e=a.F(),g=b.F();if(f.R.Rg(e)){var h=a.ib;if(null!=h&&(h=h.oi,null!=h))if(33==g){var k=b.w();k=h.Xl(k.x,k.y);if(1==k)return 1;if(0==k)return 4}else{k=new f.g;b.s(k);k=h.rn(k);if(1==k)return 1;if(0==k)return 4;if(d&&f.R.Rg(g)&&c.rF(b,h))return 1073741824}}if(f.R.Rg(g)&&(h=b.ib,null!=h&&(h=h.oi,null!=h)))if(33==e){a=a.w();k=h.Xl(a.x,a.y);if(1==k)return 2;if(0==k)return 4}else{b=new f.g;a.s(b);
k=h.rn(b);if(1==k)return 2;if(0==k)return 4;if(d&&f.R.Rg(e)&&c.rF(a,h))return 1073741824}return 0};c.rF=function(a,b){for(var d=a.D(),e=new f.b,g=0;g<d;g++)if(a.w(g,e),1==b.Xl(e.x,e.y))return!0;return!1};c.zJ=function(a,b,d,e){for(var g=1<=a.rk(0)&&1<=b.rk(0),h=a.Ba(),k=b.Ba(),m=[0,0],n=[0,0],p=new f.km(a,b,d,!1),x=!1;p.next();){var Q=p.tl(),V=p.ol();h.Rb(Q);k.Rb(V);Q=h.aa();V=k.aa().Ia(Q,null,n,m,d);if(2==V){x=m[0];V=m[1];Q=Q.Pb();if(g&&(V-x)*Q>d)return!1;x=!0}else if(0!=V){x=m[0];Q=n[0];if(0<x&&
1>x&&0<Q&&1>Q)return!1;x=!0}}if(!x)return!1;h=new f.g;k=new f.g;g=new f.g;a.s(h);b.s(k);h.O(1E3*d,1E3*d);k.O(1E3*d,1E3*d);g.H(h);g.Ia(k);return 10<a.D()&&(a=f.Yd.clip(a,g,d,0),a.u())||10<b.D()&&(b=f.Yd.clip(b,g,d,0),b.u())?!1:f.mm.Zt(a,b,d,"F********",e)};c.wJ=function(a,b,d,e){var g=1<=a.rk(0)&&1<=b.rk(0),h=new f.g,k=new f.g,m=new f.g;a.s(h);b.s(k);for(var n=!1,p=c.Ts(h,k,d),x=c.Ts(k,h,d),Q=a.Ba(),V=b.Ba(),ca=[0,0],ba=[0,0],ea=new f.km(a,b,d,!1);ea.next();){var da=ea.tl(),ma=ea.ol();Q.Rb(da);V.Rb(ma);
ma=Q.aa();da=V.aa().Ia(ma,null,ba,ca,d);if(2==da){da=ca[0];var za=ca[1];ma=ma.Pb();if(g&&(za-da)*ma>d&&(n=!0,p&&x))return!0}else if(0!=da&&(da=ca[0],ma=ba[0],0<da&&1>da&&0<ma&&1>ma))return!0}g=new f.g;Q=new f.g;g.H(h);g.O(1E3*d,1E3*d);Q.H(k);Q.O(1E3*d,1E3*d);m.H(g);m.Ia(Q);h="";h=n?h+"**":h+"T*";if(p){if(10<b.D()&&(b=f.Yd.clip(b,m,d,0),b.u()))return!1;h+="****"}else h+="T***";if(x){if(10<a.D()&&(a=f.Yd.clip(a,m,d,0),a.u()))return!1;h+="***"}else h+="T**";return f.mm.Zt(a,b,d,h.toString(),e)};c.sJ=
function(a,b,d,e){var g=[!1],h=c.qJ(a,b,d,g);if(g[0])return h;g=new f.g;b.s(g);g.O(1E3*d,1E3*d);return 10<a.D()&&(a=f.Yd.clip(a,g,d,0),a.u())?!1:f.mm.yx(a,b,d,e)};c.qJ=function(a,b,d,e){e[0]=!1;for(var g=a.Ba(),h=b.Ba(),k=[0,0],m=[0,0],n=new f.km(a,b,d,!1),p=!1;n.next();){var x=n.tl(),Q=n.ol();g.Rb(x,-1);h.Rb(Q,-1);x=g.aa();x=h.aa().Ia(x,null,m,k,d);if(0!=x&&(p=!0,1==x&&(x=k[0],Q=m[0],0<x&&1>x&&0<Q&&1>Q)))return e[0]=!0,!1}if(!p){e[0]=!0;k=new f.g;a.s(k);k.O(d,d);n=a;p=!1;m=new f.g;e=0;for(g=b.$();e<
g;e++)if(0<b.Ha(e)){b.Sj(e,m);if(k.isIntersecting(m)){if(h=b.xa(b.ua(e)),h=f.Oe.Jm(n,h,0),0==h)return!1}else return!1;p||(!f.Oe.Wl(a,b.$()-1)||null!=a.ib&&null!=a.ib.Hb?n=a:(h=new f.Fa,a.copyTo(h),h.lj(1),n=h),p=!0)}if(1==a.$()||1607==b.F())return!0;k=new f.g;b.s(k);k.O(d,d);m=b;n=!1;d=new f.g;e=0;for(g=a.$();e<g;e++)if(0<a.Ha(e)){a.Sj(e,d);if(k.isIntersecting(d)&&(h=a.xa(a.ua(e)),h=f.Oe.Jm(m,h,0),1==h))return!1;n||(!f.Oe.Wl(b,a.$()-1)||null!=b.ib&&null!=b.ib.Hb?m=b:(h=new f.Fa,b.copyTo(h),h.lj(1),
m=h),n=!0)}return!0}return!1};c.AJ=function(a,b,d,e){for(var g=a.Ba(),h=b.Ba(),k=[0,0],m=[0,0],n=new f.km(a,b,d,!1),p=!1;n.next();){var x=n.tl(),Q=n.ol();g.Rb(x);h.Rb(Q);x=g.aa();x=h.aa().Ia(x,null,m,k,d);if(2==x)p=!0;else if(0!=x){p=k[0];x=m[0];if(0<p&&1>p&&0<x&&1>x)return!1;p=!0}}if(!p)return!1;h=new f.g;k=new f.g;g=new f.g;a.s(h);b.s(k);h.O(1E3*d,1E3*d);k.O(1E3*d,1E3*d);g.H(h);g.Ia(k);return 10<a.D()&&(a=f.Yd.clip(a,g,d,0),a.u())||10<b.D()&&(b=f.Yd.clip(b,g,d,0),b.u())?!1:f.mm.on(a,b,d,"F********",
e)};c.uJ=function(a,b,d,e){for(var g=a.Ba(),h=b.Ba(),k=[0,0],m=[0,0],n=new f.km(a,b,d,!1),p=!1;n.next();){var x=n.tl(),Q=n.ol();g.Rb(x);h.Rb(Q);x=g.aa();x=h.aa().Ia(x,null,m,k,d);if(2==x)p=!0;else if(0!=x){p=k[0];x=m[0];if(0<p&&1>p&&0<x&&1>x)return!0;p=!0}}if(!p)return!1;h=new f.g;k=new f.g;m=new f.g;n=new f.g;g=new f.g;a.s(h);b.s(k);return c.Ts(k,h,d)?(m.H(h),m.O(1E3*d,1E3*d),n.H(k),n.O(1E3*d,1E3*d),g.H(m),g.Ia(n),10<a.D()&&(a=f.Yd.clip(a,g,d,0),a.u())||10<b.D()&&(b=f.Yd.clip(b,g,d,0),b.u())?!1:
d=f.mm.on(a,b,d,"T********",e)):d=f.mm.on(a,b,d,"T*****T**",e)};c.tJ=function(a,b,d,e){var g=[!1],h=c.qJ(a,b,d,g);if(g[0])return h;g=new f.g;b.s(g);g.O(1E3*d,1E3*d);return 10<a.D()&&(a=f.Yd.clip(a,g,d,0),a.u())?!1:f.mm.QB(a,b,d,e)};c.rJ=function(a,b,d){return 1==f.Zc.Td(a,b,d)?!0:!1};c.yJ=function(a,b,d){return 2==f.Zc.Td(a,b,d)?!0:!1};c.St=function(a,b,d){var e=new f.b;d*=d;for(var g=0;g<a.D();g++)if(a.w(g,e),f.b.oc(e,b)<=d)return!1;return!0};c.prototype.BF=function(a,b){a=this.yh[a];b=this.yh[b];
return a.Zm<b.Zm||a.Zm==b.Zm&&(a.Vw<b.Vw||a.Vw==b.Vw&&(a.Mj<b.Mj||a.Mj==b.Mj&&(a.Yi<b.Yi||a.Yi==b.Yi&&a.rI<b.rI)))?-1:1};return c}();f.wd=l})(fa||(fa={}));(function(f){var R;(function(c){c[c.InteriorInterior=0]="InteriorInterior";c[c.InteriorBoundary=1]="InteriorBoundary";c[c.InteriorExterior=2]="InteriorExterior";c[c.BoundaryInterior=3]="BoundaryInterior";c[c.BoundaryBoundary=4]="BoundaryBoundary";c[c.BoundaryExterior=5]="BoundaryExterior";c[c.ExteriorInterior=6]="ExteriorInterior";c[c.ExteriorBoundary=
7]="ExteriorBoundary";c[c.ExteriorExterior=8]="ExteriorExterior"})(R||(R={}));var l;(function(c){c[c.AreaAreaPredicates=0]="AreaAreaPredicates";c[c.AreaLinePredicates=1]="AreaLinePredicates";c[c.LineLinePredicates=2]="LineLinePredicates";c[c.AreaPointPredicates=3]="AreaPointPredicates";c[c.LinePointPredicates=4]="LinePointPredicates";c[c.PointPointPredicates=5]="PointPointPredicates"})(l||(l={}));R=function(){function c(){this.se=0;this.h=new f.Ou;this.G=[0,0,0,0,0,0,0,0,0];this.$a=[0,0,0,0,0,0,0,
0,0];this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.en=this.bx=-1}c.hC=function(a,b,d,e,g){if(9!=e.length)throw f.f.Y("relation string length has to be 9 characters");for(var h=0;9>h;h++){var k=e.charAt(h);if("*"!=k&&"T"!=k&&"F"!=k&&"0"!=k&&"1"!=k&&"2"!=k)throw f.f.Y("relation string");}h=this.cT(e,a.pb(),b.pb());if(0!=h)return f.wd.iC(a,b,d,h,g);h=new f.g;a.s(h);k=new f.g;b.s(k);var m=new f.g;m.H(h);m.Nb(k);d=f.la.Qd(d,m,!1);a=this.HF(a,d);b=this.HF(b,d);if(a.u()||b.u())return this.$X(a,b,e);h=b.F();
k=!1;switch(a.F()){case 1736:switch(h){case 1736:k=this.Zt(a,b,d,e,g);break;case 1607:k=this.on(a,b,d,e,g);break;case 33:k=this.Yt(a,b,d,e);break;case 550:k=this.Xt(a,b,d,e,g)}break;case 1607:switch(h){case 1736:k=this.on(b,a,d,this.rq(e),g);break;case 1607:k=this.RB(a,b,d,e,g);break;case 33:k=this.au(a,b,d,e,g);break;case 550:k=this.$t(a,b,d,e,g)}break;case 33:switch(h){case 1736:k=this.Yt(b,a,d,this.rq(e));break;case 1607:k=this.au(b,a,d,this.rq(e),g);break;case 33:k=this.rW(a,b,d,e);break;case 550:k=
this.Tt(b,a,d,this.rq(e))}break;case 550:switch(h){case 1736:k=this.Xt(b,a,d,this.rq(e),g);break;case 1607:k=this.$t(b,a,d,this.rq(e),g);break;case 550:k=this.JB(a,b,d,e,g);break;case 33:k=this.Tt(a,b,d,e)}break;default:k=!1}return k};c.Zt=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.BK();var k=new f.g,m=new f.g;a.s(k);b.s(m);e=!1;f.wd.ik(k,m,d)&&(h.hv(a,b),e=!0);e||(k=f.wd.qc(a,b,!1),4==k?(h.hv(a,b),e=!0):1==k?(h.Ry(b),e=!0):2==k&&(h.LE(a),e=!0));e||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),
h.Vp(a,b),h.h.ah());return c.lg(h.G,h.Wc)};c.yx=function(a,b,d,e){var g=new c;g.dj();g.ij("T*****F**");g.BK();var h=new f.g,k=new f.g;a.s(h);b.s(k);var m=!1;f.wd.ik(h,k,d)&&(g.hv(a,b),m=!0);m||(h=f.wd.qc(a,b,!1),4==h?(g.hv(a,b),m=!0):1==h?(g.Ry(b),m=!0):2==h&&(g.LE(a),m=!0));if(m)return h=this.lg(g.G,g.Wc);m=new f.Yc;a=m.Bb(a);h=m.Bb(b);f.$j.U(m,d,e,!1);d=m.ye(h).sg();m.$p(0,!0,!0);f.Kn.U(m,a,-1,!1,e);if(0==m.D(a))return!1;f.Kn.U(m,h,-1,!1,e);g.zr(m,e);b=0==m.D(h);if(!b&&(g.Vp(a,h),g.h.ah(),h=this.lg(g.G,
g.Wc),!h))return h;a=m.ye(a);m=new f.Yc;a=m.Bb(a);h=m.Bb(d);g.zr(m,e);g.se=0;g.dj();g.ij(b?"T*****F**":"******F**");g.sC();g.Vp(a,h);g.h.ah();return h=this.lg(g.G,g.Wc)};c.on=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.sC();var k=new f.g,m=new f.g;a.s(k);b.s(m);e=!1;f.wd.ik(k,m,d)&&(h.iv(a,b),e=!0);e||(k=f.wd.qc(a,b,!1),4==k?(h.iv(a,b),e=!0):1==k&&(h.ME(b),e=!0));e||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),h.qh=h.h.Xp(),c.px(b,h.h,h.qh),h.Vp(a,b),h.h.Yp(h.qh),h.h.ah());return c.lg(h.G,h.Wc)};
c.QB=function(a,b,d,e){var g=new c;g.dj();g.ij("T*****F**");g.sC();var h=new f.g,k=new f.g;a.s(h);b.s(k);var m=!1;f.wd.ik(h,k,d)&&(g.iv(a,b),m=!0);m||(h=f.wd.qc(a,b,!1),4==h?(g.iv(a,b),m=!0):1==h&&(g.ME(b),m=!0));if(m)return d=this.lg(g.G,g.Wc);m=new f.Yc;a=m.Bb(a);b=m.Bb(b);g.lp(m,d,e);if(0==m.D(a))return!1;g.Vp(a,b);g.h.ah();return d=this.lg(g.G,g.Wc)};c.Xt=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.CK();var k=new f.g,m=new f.g;a.s(k);b.s(m);e=!1;f.wd.ik(k,m,d)&&(h.jv(a),e=!0);e||(k=f.wd.qc(a,
b,!1),4==k?(h.jv(a),e=!0):1==k&&(h.KO(),e=!0));e||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),h.kz(a,b),h.h.ah());return c.lg(h.G,h.Wc)};c.RB=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.HY();e=new f.g;var k=new f.g;a.s(e);b.s(k);var m=!1;f.wd.ik(e,k,d)&&(h.BH(a,b),m=!0);m||4!=f.wd.qc(a,b,!1)||(h.BH(a,b),m=!0);m||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),h.di=h.h.Xp(),h.qh=h.h.Xp(),c.px(a,h.h,h.di),c.px(b,h.h,h.qh),h.Vp(a,b),h.h.Yp(h.di),h.h.Yp(h.qh),h.h.ah());return c.lg(h.G,h.Wc)};c.$t=function(a,
b,d,e,g){var h=new c;h.dj();h.ij(e);h.QK();e=new f.g;var k=new f.g;a.s(e);b.s(k);var m=!1;f.wd.ik(e,k,d)&&(h.FA(a),m=!0);m||4!=f.wd.qc(a,b,!1)||(h.FA(a),m=!0);m||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),h.di=h.h.Xp(),c.px(a,h.h,h.di),h.kz(a,b),h.h.Yp(h.di),h.h.ah());return c.lg(h.G,h.Wc)};c.JB=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.VK();e=new f.g;var k=new f.g;a.s(e);b.s(k);var m=!1;f.wd.ik(e,k,d)&&(h.pJ(),m=!0);m||(e=new f.Yc,a=e.Bb(a),b=e.Bb(b),h.lp(e,d,g),h.kz(a,b),h.h.ah());return c.lg(h.G,
h.Wc)};c.Yt=function(a,b,d,e){var g=new c;g.dj();g.ij(e);g.CK();var h=new f.g;a.s(h);b=b.w();var k=!1;f.wd.xx(b,h,d)&&(g.jv(a),k=!0);k||(d=f.Zc.Td(a,b,d),1==d?(g.G[0]=0,g.G[2]=2,g.G[3]=-1,g.G[5]=1,g.G[6]=-1):2==d?(g.G[6]=-1,0!=a.Pe()?(g.G[0]=-1,g.G[3]=0,g.G[2]=2,g.G[5]=1):(g.G[0]=0,g.G[3]=-1,g.G[5]=-1,d=new f.g,a.s(d),g.G[2]=0==d.ca()&&0==d.N()?-1:1)):g.jv(a));return this.lg(g.G,e)};c.au=function(a,b,d,e,g){var h=new c;h.dj();h.ij(e);h.QK();var k=new f.g;a.s(k);e=b.w();var m=!1;f.wd.xx(e,k,d)&&(h.FA(a),
m=!0);if(!m){k=null;var n=m=!1;if(h.ea[0]||h.ea[6])f.wd.IA(a,e,d)?(h.ea[0]&&(k=f.yi.qm(a,g),n=!f.wd.St(k,e,d),m=!0,h.G[0]=n?-1:0),h.G[6]=-1):(h.G[0]=-1,h.G[6]=0);h.ea[3]&&(null!=k&&k.u()?h.G[3]=-1:(m||(null==k&&(k=f.yi.qm(a,g)),n=!f.wd.St(k,e,d),m=!0),h.G[3]=n?0:-1));h.ea[5]&&(null!=k&&k.u()?h.G[5]=-1:m&&!n?h.G[5]=0:(null==k&&(k=f.yi.qm(a,g)),g=f.wd.tx(k,b,d),h.G[5]=g?-1:0));h.ea[2]&&(0!=a.Pb()?h.G[2]=1:(g=new f.Hd(a.description),g.yd(a,0,a.D()),a=f.wd.tx(g,b,d),h.G[2]=a?-1:0))}return this.lg(h.G,
h.Wc)};c.Tt=function(a,b,d,e){var g=new c;g.dj();g.ij(e);g.VK();var h=new f.g;a.s(h);b=b.w();var k=!1;f.wd.xx(b,h,d)&&(g.pJ(),k=!0);if(!k){h=!1;k=!0;d*=d;for(var m=0;m<a.D();m++){var n=a.xa(m);f.b.oc(n,b)<=d?h=!0:k=!1;if(h&&!k)break}h?(g.G[0]=0,g.G[2]=k?-1:0,g.G[6]=-1):(g.G[0]=-1,g.G[2]=0,g.G[6]=0)}return c.lg(g.G,e)};c.rW=function(a,b,d,e){a=a.w();b=b.w();for(var g=[],h=0;9>h;h++)g[h]=-1;f.b.oc(a,b)<=d*d?g[0]=0:(g[2]=0,g[6]=0);g[8]=2;return c.lg(g,e)};c.lg=function(a,b){for(var d=0;9>d;d++)switch(b.charAt(d)){case "T":if(-1==
a[d])return!1;break;case "F":if(-1!=a[d])return!1;break;case "0":if(0!=a[d])return!1;break;case "1":if(1!=a[d])return!1;break;case "2":if(2!=a[d])return!1}return!0};c.$X=function(a,b,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.u()&&b.u()){for(var g=0;9>g;g++)e[g]=-1;return this.lg(e,d)}g=!1;a.u()&&(a=b,g=!0);e[0]=-1;e[1]=-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;b=a.F();f.R.Bc(b)?1736==b?0!=a.Pe()?(e[2]=2,e[5]=1):(e[5]=-1,b=new f.g,a.s(b),e[2]=0==b.ca()&&0==b.N()?0:1):(b=0!=a.Pb(),e[2]=b?1:0,e[5]=
f.yi.tq(a)?0:-1):(e[2]=0,e[5]=-1);g&&this.CL(e);return this.lg(e,d)};c.cT=function(a,b,d){return c.oR(a)?3:c.eR(a)?4:c.JZ(a,b,d)?8:c.NQ(a,b,d)?16:c.oQ(a)?1:c.XV(a,b,d)?32:0};c.oR=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.eR=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==
a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.JZ=function(a,b,d){if(0==b&&0==d)return!1;if(2!=b||2!=d)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||1==b&&1==d&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=d&&"F"==a.charAt(0)&&"*"==a.charAt(1)&&
"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.NQ=function(a,b,d){return b>d?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1:1==b&&1==d&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?
!0:!1};c.oQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.XV=function(a,b,d){if(b==d){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&
"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};c.px=function(a,b,d){a=b.Ea(a);for(var e=b.We;-1!=e;e=b.$f(e))if(0!=(b.Bd(e)&a)){var g=b.Re(e);if(-1==g)b.Dn(e,d,0);else{var h=g,k=0;do 0!=(b.lh(h)&a)&&k++,h=b.kc(b.wa(h));while(h!=g);b.Dn(e,d,k)}}};c.rq=function(a){var b=""+a.charAt(0);b+=a.charAt(3);b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+=a.charAt(8)};c.prototype.dj=function(){for(var a=0;9>a;a++)this.G[a]=
-2,this.$a[a]=-2};c.CL=function(a){var b=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=d;a[7]=e};c.prototype.ij=function(a){this.Wc=a;for(a=0;9>a;a++)"*"!=this.Wc.charAt(a)?(this.ea[a]=!0,this.se++):this.ea[a]=!1};c.prototype.YK=function(){for(var a=0;9>a;a++)this.ea[a]&&-2==this.G[a]&&(this.G[a]=-1,this.ea[a]=!1)};c.prototype.pc=function(a){if(-2==this.G[a])return!1;if(-1==this.G[a])return this.ea[a]=!1,this.se--,!0;if("T"!=this.Wc.charAt(a)&&"F"!=this.Wc.charAt(a)){if(this.G[a]<this.$a[a])return!1;
this.ea[a]=!1;this.se--;return!0}this.ea[a]=!1;this.se--;return!0};c.prototype.BK=function(){this.bx=0;this.$a[0]=2;this.$a[1]=1;this.$a[2]=2;this.$a[3]=1;this.$a[4]=1;this.$a[5]=1;this.$a[6]=2;this.$a[7]=1;this.$a[8]=2;this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.sC=function(){this.bx=1;this.en=3;this.$a[0]=1;this.$a[1]=0;this.$a[2]=2;this.$a[3]=1;this.$a[4]=0;this.$a[5]=1;this.$a[6]=1;this.$a[7]=0;this.$a[8]=2;this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.HY=function(){this.bx=
2;this.en=4;this.$a[0]=1;this.$a[1]=0;this.$a[2]=1;this.$a[3]=0;this.$a[4]=0;this.$a[5]=0;this.$a[6]=1;this.$a[7]=0;this.$a[8]=2;this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.CK=function(){this.en=3;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=2;this.$a[3]=0;this.$a[4]=-1;this.$a[5]=1;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--);this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--);this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--);this.ea[8]&&
(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.QK=function(){this.en=4;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=1;this.$a[3]=0;this.$a[4]=-1;this.$a[5]=0;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--);this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--);this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--);this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.VK=function(){this.en=5;this.$a[0]=0;this.$a[1]=-1;this.$a[2]=0;this.$a[3]=-1;this.$a[4]=-1;
this.$a[5]=-1;this.$a[6]=0;this.$a[7]=-1;this.$a[8]=2;this.ea[1]&&(this.G[1]=-1,this.ea[1]=!1,this.se--);this.ea[3]&&(this.G[3]=-1,this.ea[3]=!1,this.se--);this.ea[4]&&(this.G[4]=-1,this.ea[4]=!1,this.se--);this.ea[5]&&(this.G[5]=-1,this.ea[5]=!1,this.se--);this.ea[7]&&(this.G[7]=-1,this.ea[7]=!1,this.se--);this.ea[8]&&(this.G[8]=2,this.ea[8]=!1,this.se--)};c.prototype.IO=function(a,b,d){var e=!0;this.ea[0]&&(this.XT(a,b,d),e=e&&this.pc(0));this.ea[1]&&(this.eH(a,b,1),e=e&&this.pc(1));this.ea[2]&&
(this.fH(a,b,d,2),e=e&&this.pc(2));this.ea[3]&&(this.eH(a,d,3),e=e&&this.pc(3));this.ea[4]&&(this.MO(a,b,d),e=e&&this.pc(4));this.ea[5]&&(this.RE(a,d,5),e=e&&this.pc(5));this.ea[6]&&(this.fH(a,d,b,6),e=e&&this.pc(6));this.ea[7]&&(this.RE(a,b,7),e=e&&this.pc(7));return e};c.prototype.hv=function(a,b){this.G[0]=-1;this.G[1]=-1;this.G[3]=-1;this.G[4]=-1;this.fs(a,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5));this.fs(b,this.ea[6]?6:-1,this.Wc.charAt(6),this.ea[7]?7:-1,this.Wc.charAt(7))};
c.prototype.fs=function(a,b,d,e,g){if(-1!=b||-1!=e)("T"!=d&&"F"!=d&&-1!=b||"T"!=g&&"F"!=g&&-1!=e?0!=a.Pe():1)?(-1!=b&&(this.G[b]=2),-1!=e&&(this.G[e]=1)):(-1!=e&&(this.G[e]=-1),-1!=b&&(d=new f.g,a.s(d),this.G[b]=0==d.ca()&&0==d.N()?0:1))};c.prototype.Ry=function(a){this.G[2]=2;this.G[3]=-1;this.G[4]=-1;this.G[5]=1;this.G[6]=-1;this.G[7]=-1;this.fs(a,this.ea[0]?0:-1,this.Wc.charAt(0),this.ea[1]?1:-1,this.Wc.charAt(1))};c.prototype.LE=function(a){this.Ry(a);c.CL(this.G)};c.prototype.iv=function(a,b){this.G[0]=
-1;this.G[1]=-1;this.G[3]=-1;this.G[4]=-1;if(this.ea[6]){var d=this.Wc.charAt(6);d="T"!=d&&"F"!=d?0!=b.Pb():!0;this.G[6]=d?1:0}this.ea[7]&&(b=f.yi.tq(b),this.G[7]=b?0:-1);this.fs(a,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5))};c.prototype.ME=function(a){if(this.ea[0]){var b=this.Wc.charAt(0);b="T"!=b&&"F"!=b?0!=a.Pb():!0;this.G[0]=b?1:0}this.ea[1]&&(a=f.yi.tq(a),this.G[1]=a?0:-1);this.G[2]=2;this.G[3]=-1;this.G[4]=-1;this.G[5]=1;this.G[6]=-1;this.G[7]=-1};c.prototype.jv=function(a){this.G[0]=
-1;this.G[3]=-1;this.G[6]=0;this.fs(a,this.ea[2]?2:-1,this.Wc.charAt(2),this.ea[5]?5:-1,this.Wc.charAt(5))};c.prototype.KO=function(){this.G[0]=0;this.G[2]=2;this.G[3]=-1;this.G[5]=1;this.G[6]=-1};c.prototype.BH=function(a,b){this.G[0]=-1;this.G[1]=-1;this.G[3]=-1;this.G[4]=-1;if(this.ea[2]){var d=this.Wc.charAt(2);d="T"!=d&&"F"!=d?0!=a.Pb():!0;this.G[2]=d?1:0}this.ea[5]&&(a=f.yi.tq(a),this.G[5]=a?0:-1);this.ea[6]&&(d=this.Wc.charAt(6),d="T"!=d&&"F"!=d?0!=b.Pb():!0,this.G[6]=d?1:0);this.ea[7]&&(b=
f.yi.tq(b),this.G[7]=b?0:-1)};c.prototype.FA=function(a){this.G[0]=-1;this.G[3]=-1;if(this.ea[2]){var b=this.Wc.charAt(2);b="T"!=b&&"F"!=b?0!=a.Pb():!0;this.G[2]=b?1:0}this.ea[5]&&(a=f.yi.tq(a),this.G[5]=a?0:-1);this.G[6]=0};c.prototype.pJ=function(){this.G[0]=-1;this.G[2]=0;this.G[6]=0};c.prototype.JO=function(a,b,d){var e=!0;this.ea[0]&&(this.YT(a,b),e=e&&this.pc(0));this.ea[1]&&(this.UT(a,b,d,this.qh),e=e&&this.pc(1));this.ea[2]&&(this.VT(a,b),e=e&&this.pc(2));this.ea[3]&&(this.QO(a,b,d,this.qh),
e=e&&this.pc(3));this.ea[4]&&(this.NO(a,b,d,this.qh),e=e&&this.pc(4));this.ea[5]&&(this.OO(a,b,d),e=e&&this.pc(5));this.ea[6]&&(this.xR(a,b),e=e&&this.pc(6));this.ea[7]&&(this.wR(a,b,d,this.qh),e=e&&this.pc(7));return e};c.prototype.IU=function(a,b,d){var e=!0;this.ea[0]&&(this.aU(a,b,d,this.di,this.qh),e=e&&this.pc(0));this.ea[1]&&(this.gH(a,b,d,this.di,this.qh,1),e=e&&this.pc(1));this.ea[2]&&(this.hH(a,b,d,2),e=e&&this.pc(2));this.ea[3]&&(this.gH(a,d,b,this.qh,this.di,3),e=e&&this.pc(3));this.ea[4]&&
(this.SO(a,b,d,this.di,this.qh),e=e&&this.pc(4));this.ea[5]&&(this.SE(a,d,this.di,5),e=e&&this.pc(5));this.ea[6]&&(this.hH(a,d,b,6),e=e&&this.pc(6));this.ea[7]&&(this.SE(a,b,this.qh,7),e=e&&this.pc(7));return e};c.prototype.NE=function(a,b,d){var e=!0;this.ea[0]&&(this.ZT(a,b),e=e&&this.pc(0));this.ea[2]&&(this.WT(a,b),e=e&&this.pc(2));this.ea[3]&&(this.RO(a,b,d),e=e&&this.pc(3));this.ea[5]&&(this.PO(a,b),e=e&&this.pc(5));this.ea[6]&&(this.yR(a,b),e=e&&this.pc(6));return e};c.prototype.CH=function(a,
b,d){var e=!0;this.ea[0]&&(this.bU(a,b,d,this.di),e=e&&this.pc(0));this.ea[2]&&(this.$T(a,d),e=e&&this.pc(2));this.ea[3]&&(this.UO(a,b,d,this.di),e=e&&this.pc(3));this.ea[5]&&(this.TO(a,b,d,this.di),e=e&&this.pc(5));this.ea[6]&&(this.zR(a,b,d),e=e&&this.pc(6));return e};c.prototype.qW=function(a,b,d){var e=!0;this.ea[0]&&(this.cU(a,b,d),e=e&&this.pc(0));this.ea[2]&&(this.iH(a,b,d,2),e=e&&this.pc(2));this.ea[6]&&(this.iH(a,d,b,6),e=e&&this.pc(6));return e};c.prototype.XT=function(a,b,d){2!=this.G[0]&&
(a=this.h.kf(a),0!=(a&b)&&0!=(a&d)&&(this.G[0]=2))};c.prototype.eH=function(a,b,d){if(1!=this.G[d]){var e=this.h.kf(this.h.wa(a));0!=(this.h.kf(a)&b)&&0!=(e&b)&&(this.G[d]=1)}};c.prototype.fH=function(a,b,d,e){2!=this.G[e]&&(a=this.h.kf(a),0!=(a&b)&&0==(a&d)&&(this.G[e]=2))};c.prototype.MO=function(a,b,d){if(1!=this.G[4]){var e=this.h.lh(a);0!=(e&b)&&0!=(e&d)?this.G[4]=1:0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)&&(a=this.h.Bd(this.h.Df(a)),0!=(a&b)&&0!=(a&d)&&(this.G[4]=0))}};c.prototype.RE=
function(a,b,d){if(1!=this.G[d]){var e=this.h.kf(this.h.wa(a));0==(this.h.kf(a)&b)&&0==(e&b)&&(this.G[d]=1)}};c.prototype.YT=function(a,b){if(1!=this.G[0]){var d=this.h.kf(this.h.wa(a));0!=(this.h.kf(a)&b)&&0!=(d&b)&&(this.G[0]=1)}};c.prototype.UT=function(a,b,d,e){if(0!=this.G[1]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)){var g=this.h.Df(a),h=this.h.Bd(g);0==(h&b)&&0!=(this.h.kf(a)&b)&&(a=this.h.tg(g,e),0!=(h&d)&&0!=a%2&&(this.G[1]=0))}};c.prototype.VT=function(a,b){2!=this.G[2]&&0!=(this.h.lh(a)&
b)&&(this.G[2]=2)};c.prototype.QO=function(a,b,d,e){if(1!=this.G[3]){var g=this.h.lh(a);0!=(g&b)&&0!=(g&d)?this.G[3]=1:0!=this.G[3]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)&&(g=this.h.Df(a),a=this.h.Bd(g),0!=(a&b)&&(b=this.h.tg(g,e),0!=(a&d)&&0==b%2&&(this.G[3]=0)))}};c.prototype.NO=function(a,b,d,e){if(0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)){var g=this.h.Df(a);a=this.h.Bd(g);0!=(a&b)&&(b=this.h.tg(g,e),0!=(a&d)&&0!=b%2&&(this.G[4]=0))}};c.prototype.OO=function(a,b,d){1!=
this.G[5]&&(a=this.h.lh(a),0!=(a&b)&&0==(a&d)&&(this.G[5]=1))};c.prototype.xR=function(a,b){if(1!=this.G[6]){var d=this.h.kf(this.h.wa(a));0==(this.h.kf(a)&b)&&0==(d&b)&&(this.G[6]=1)}};c.prototype.wR=function(a,b,d,e){if(0!=this.G[7]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)){var g=this.h.Df(a),h=this.h.Bd(g);0==(h&b)&&0==(this.h.kf(a)&b)&&(a=this.h.tg(g,e),0!=(h&d)&&0!=a%2&&(this.G[7]=0))}};c.prototype.aU=function(a,b,d,e,g){if(1!=this.G[0]){var h=this.h.lh(a);0!=(h&b)&&0!=(h&d)?this.G[0]=
1:0!=this.G[0]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)&&(a=this.h.Df(a),h=this.h.Bd(a),0!=(h&b)&&0!=(h&d)&&(b=this.h.tg(a,e),g=this.h.tg(a,g),0==b%2&&0==g%2&&(this.G[0]=0)))}};c.prototype.gH=function(a,b,d,e,g,h){if(0!=this.G[h]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)){a=this.h.Df(a);var k=this.h.Bd(a);0!=(k&b)&&0!=(k&d)&&(b=this.h.tg(a,e),g=this.h.tg(a,g),0==b%2&&0!=g%2&&(this.G[h]=0))}};c.prototype.hH=function(a,b,d,e){1!=this.G[e]&&(a=this.h.lh(a),0!=(a&b)&&0==(a&d)&&(this.G[e]=1))};
c.prototype.SO=function(a,b,d,e,g){if(0!=this.G[4]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)){a=this.h.Df(a);var h=this.h.Bd(a);0!=(h&b)&&0!=(h&d)&&(b=this.h.tg(a,e),g=this.h.tg(a,g),0!=b%2&&0!=g%2&&(this.G[4]=0))}};c.prototype.SE=function(a,b,d,e){0!=this.G[e]&&1!=this.h.Cb(this.h.ze(this.h.wa(a)),this.aj)&&(a=this.h.Df(a),0==(this.h.Bd(a)&b)&&0!=this.h.tg(a,d)%2&&(this.G[e]=0))};c.prototype.ZT=function(a,b){0!=this.G[0]&&0==(this.h.Bd(a)&b)&&0!=(this.h.mk(this.h.Iz(a))&b)&&(this.G[0]=0)};c.prototype.WT=
function(a,b){2!=this.G[2]&&0!=(this.h.Bd(a)&b)&&(this.G[2]=2)};c.prototype.RO=function(a,b,d){0!=this.G[3]&&(a=this.h.Bd(a),0!=(a&b)&&0!=(a&d)&&(this.G[3]=0))};c.prototype.PO=function(a,b){1!=this.G[5]&&0!=(this.h.Bd(a)&b)&&(this.G[5]=1)};c.prototype.yR=function(a,b){0!=this.G[6]&&0==(this.h.Bd(a)&b)&&0==(this.h.mk(this.h.Iz(a))&b)&&(this.G[6]=0)};c.prototype.bU=function(a,b,d,e){if(0!=this.G[0]){var g=this.h.Bd(a);0!=(g&b)&&0!=(g&d)&&0==this.h.tg(a,e)%2&&(this.G[0]=0)}};c.prototype.$T=function(a,
b){1!=this.G[2]&&(-1!=this.h.Re(a)?this.G[2]=1:0!=this.G[2]&&0==(this.h.Bd(a)&b)&&(this.G[2]=0))};c.prototype.UO=function(a,b,d,e){if(0!=this.G[3]){var g=this.h.Bd(a);0!=(g&b)&&0!=(g&d)&&0!=this.h.tg(a,e)%2&&(this.G[3]=0)}};c.prototype.TO=function(a,b,d,e){if(0!=this.G[5]){var g=this.h.Bd(a);0!=(g&b)&&0==(g&d)&&0!=this.h.tg(a,e)%2&&(this.G[5]=0)}};c.prototype.zR=function(a,b,d){0!=this.G[6]&&(a=this.h.Bd(a),0==(a&b)&&0!=(a&d)&&(this.G[6]=0))};c.prototype.cU=function(a,b,d){0!=this.G[0]&&(a=this.h.Bd(a),
0!=(a&b)&&0!=(a&d)&&(this.G[0]=0))};c.prototype.iH=function(a,b,d,e){0!=this.G[e]&&(a=this.h.Bd(a),0!=(a&b)&&0==(a&d)&&(this.G[e]=0))};c.prototype.Vp=function(a,b){var d=!1;a=this.h.Ea(a);b=this.h.Ea(b);this.aj=this.h.ih();for(var e=this.h.We;-1!=e;e=this.h.$f(e)){var g=this.h.Re(e);if(-1==g){if(-1!=this.en)switch(this.en){case 3:d=this.NE(e,a,b);break;case 4:d=this.CH(e,a,b);break;default:throw f.f.Y("internal error");}}else{var h=g;do{var k=h;if(1!=this.h.Cb(k,this.aj)){do{switch(this.bx){case 0:d=
this.IO(k,a,b);break;case 1:d=this.JO(k,a,b);break;case 2:d=this.IU(k,a,b);break;default:throw f.f.Y("internal error");}if(d)break;this.h.Jb(k,this.aj,1);k=this.h.kc(k)}while(k!=h&&!d)}if(d)break;h=this.h.kc(this.h.wa(k))}while(h!=g);if(d)break}}d||this.YK();this.h.Uh(this.aj)};c.prototype.kz=function(a,b){var d=!1;a=this.h.Ea(a);b=this.h.Ea(b);for(var e=this.h.We;-1!=e;e=this.h.$f(e)){switch(this.en){case 3:d=this.NE(e,a,b);break;case 4:d=this.CH(e,a,b);break;case 5:d=this.qW(e,a,b);break;default:throw f.f.za();
}if(d)break}d||this.YK()};c.prototype.zr=function(a,b){this.h.xr(a,b)};c.prototype.lp=function(a,b,d){this.iR(a,b,d);this.zr(a,d)};c.prototype.iR=function(a,b,d){f.$j.U(a,b,d,!1);a.$p(0,!0,!0);for(b=a.kd;-1!=b;b=a.Ae(b))1736==a.dc(b)&&f.Kn.U(a,b,-1,!1,d)};c.HF=function(a,b){var d=a.F();if(f.R.Ic(d))return b=new f.Oa(a.description),b.$b(a,!0),b;if(197==d){d=new f.g;a.s(d);if(d.ca()<=b&&d.N()<=b)return b=new f.Ra(a.description),a.hf(b),b;if(d.ca()<=b||d.N()<=b)return b=new f.Oa(a.description),d=new f.Ra,
a.Pf(0,d),b.xf(d),a.Pf(2,d),b.lineTo(d),b;b=new f.Fa(a.description);b.bd(a,!1);return b}return a};return c}();f.mm=R})(fa||(fa={}));(function(f){var R=function(){function a(b){this.Rm=new f.ha(0);this.Kw=new f.ha(0);this.eu=new f.b;this.fu=new f.b;this.a=b;this.pt=-1}a.prototype.ec=function(b){return this.a.ec(this.hA(b))};a.prototype.hw=function(b){var d=this.Pz(b);b=this.tG(b);if(this.a.Ma(d)==b){var e=d;d=b;b=e}this.a.Hc(d,this.eu);this.a.Hc(b,this.fu);return this.eu.y<this.fu.y};a.prototype.hA=
function(b){var d=this.Pz(b);b=this.tG(b);return this.a.T(d)==b?d:b};a.prototype.Pz=function(b){return this.Rm.get(b)};a.prototype.tG=function(b){return this.Kw.get(b)};a.prototype.eG=function(b){this.Rm.set(b,this.pt);this.pt=b};a.prototype.cJ=function(b){if(-1!=this.pt){var d=this.pt;this.pt=this.Rm.get(d);this.Rm.set(d,b);this.Kw.set(d,this.a.T(b));return d}null==this.Rm&&(this.Rm=new f.ha(0),this.Kw=new f.ha(0));d=this.Rm.size;this.Rm.add(b);this.Kw.add(this.a.T(b));return d};a.prototype.aA=function(b){return this.a.cd(this.Pz(b))};
return a}();f.e_=R;var l=function(){function a(b){this.Ie=b;this.qe=new f.zb;this.$m=new f.zb;this.sI=0;this.Uo=null;this.hB=-1}a.prototype.compare=function(b,d,e){e=b.ga(e);var g=this.Ie.eb;if(this.hB==d)var h=this.sI;else this.Uo=g.ec(d),null==this.Uo?(b=g.a,b.gd(g.hA(d),this.qe),this.Uo=this.qe,h=this.qe.Te(this.Ie.Fh,0)):h=this.Uo.Te(this.Ie.Fh,0),this.sI=h,this.hB=d;b=g.ec(e);if(null==b){b=g.a;b.gd(g.hA(e),this.$m);b=this.$m;var k=this.$m.Te(this.Ie.Fh,0)}else k=b.Te(this.Ie.Fh,0);h==k&&(d=g.hw(d),
e=g.hw(e),e=Math.min(d?this.Uo.ma:this.Uo.na,e?b.ma:b.na),d=.5*(e+this.Ie.Fh),d==this.Ie.Fh&&(d=e),h=this.Uo.Te(d,0),k=b.Te(d,0));return h<k?-1:h>k?1:0};a.prototype.reset=function(){this.hB=-1};return a}(),c=function(){function a(){this.kn=this.Ol=null;this.cb=new f.bk;this.cb.bR();this.ge=new l(this);this.cb.kp(this.ge)}a.prototype.TR=function(){var b=!1;this.Ow&&(b=this.UR());if(1==this.a.$(this.W)){var d=this.a.Kb(this.W);b=this.a.eA(d);this.a.yC(d,!0);return 0>b?(b=this.a.Za(d),this.a.tK(b),this.a.dh(d,
this.a.Ma(b)),!0):!1}this.Ml=this.a.oz();this.Po=this.a.oz();for(d=this.a.Kb(this.W);-1!=d;d=this.a.Qb(d))this.a.Br(d,this.Ml,0),this.a.Br(d,this.Po,-1);d=new f.ha(0);this.Fh=NaN;var e=new f.b;this.Lt=this.a.$(this.W);this.Ko=this.a.Kd();this.zt=this.a.Kd();for(var g=this.Ol.sc(this.Ol.re);-1!=g;g=this.Ol.hb(g)){var h=this.Ol.getData(g);this.a.Hc(h,e);e.y!=this.Fh&&0!=d.size&&(b=this.bu(d)||b,this.ge.reset(),d.clear(!1));d.add(h);this.Fh=e.y;if(0==this.Lt)break}0<this.Lt&&(b=this.bu(d)||b,d.clear(!1));
this.a.Xd(this.Ko);this.a.Xd(this.zt);for(d=this.a.Kb(this.W);-1!=d;)if(3==this.a.yj(d,this.Ml)){this.a.yC(d,!0);e=d;for(d=this.a.yj(d,this.Po);-1!=d;)g=this.a.yj(d,this.Po),this.a.sV(this.W,this.a.Qb(e),d),e=d,d=g;d=this.a.Qb(e)}else this.a.yC(d,!1),d=this.a.Qb(d);this.a.lC(this.Ml);this.a.lC(this.Po);return b};a.prototype.bu=function(b){return this.sX(b)};a.prototype.sX=function(b){var d=!1;null==this.eb&&(this.eb=new R(this.a));null==this.kn?(this.kn=new f.ha(0),this.kn.Db(16)):this.kn.clear(!1);
this.rX(b);for(var e=0,g=b.size;e<g;e++){var h=b.get(e);-1!=h&&this.aH(h,-1)}for(e=0;e<this.kn.size&&0<this.Lt;e++)if(b=this.kn.get(e),h=this.eb.aA(this.cb.ga(b)),g=-1,0==this.a.yj(h,this.Ml)){h=this.cb.Be(b);for(var k=b,m;-1!=h;){var n=this.cb.ga(h),p=this.eb.aA(n),x=this.a.yj(p,this.Ml);if(0!=x){g=p;break}k=h;h=this.cb.Be(h)}-1==h?(m=!0,h=k):(n=this.cb.ga(h),m=this.eb.hw(n),h=this.cb.hb(h),m=!m);do{n=this.cb.ga(h);p=this.eb.aA(n);x=this.a.yj(p,this.Ml);if(0==x&&(m!=this.eb.hw(n)&&(d=this.a.Za(p),
this.a.tK(d),this.a.dh(p,this.a.Ma(d)),d=!0),this.a.Br(p,this.Ml,m?3:2),m||(k=this.a.yj(g,this.Po),this.a.Br(g,this.Po,p),this.a.Br(p,this.Po,k)),this.Lt--,0==this.Lt))return d;g=p;k=h;h=this.cb.hb(h);m=!m}while(k!=b)}return d};a.prototype.rX=function(b){for(var d=0,e=b.size;d<e;d++){var g=b.get(d),h=this.a.Na(g,this.Ko),k=this.a.Na(g,this.zt);if(-1!=h){var m=this.cb.ga(h);this.eb.eG(m);this.a.Qa(g,this.Ko,-1)}-1!=k&&(m=this.cb.ga(k),this.eb.eG(m),this.a.Qa(g,this.zt,-1));m=-1;-1!=h&&-1!=k?(this.cb.zd(h,
-1),this.cb.zd(k,-1),b.set(d,-1)):m=-1!=h?h:k;-1!=m&&(this.aH(g,m)||this.cb.zd(m,-1),b.set(d,-1))}};a.prototype.aH=function(b,d){var e=new f.b,g=new f.b;this.a.Hc(b,e);var h=this.a.T(b);this.a.Hc(h,g);var k=!1;if(e.y<g.y){k=!0;var m=this.eb.cJ(b);if(-1==d)var n=this.cb.addElement(m,-1);else n=d,this.cb.Tj(n,m);m=this.a.Na(h,this.Ko);-1==m?this.a.Qa(h,this.Ko,n):this.a.Qa(h,this.zt,n);h=this.a.cd(b);0==this.a.yj(h,this.Ml)&&this.kn.add(n)}h=this.a.Ma(b);this.a.Hc(h,g);e.y<g.y&&(k=!0,m=this.eb.cJ(h),
-1==d?n=this.cb.addElement(m,-1):(n=d,this.cb.Tj(n,m)),m=this.a.Na(h,this.Ko),-1==m?this.a.Qa(h,this.Ko,n):this.a.Qa(h,this.zt,n),h=this.a.cd(b),0==this.a.yj(h,this.Ml)&&this.kn.add(n));return k};a.U=function(b,d,e,g){var h=new a;h.a=b;h.W=d;h.Ol=e;h.Ow=g;return h.TR()};a.prototype.UR=function(){var b=new f.ha(0),d=new f.ha(0),e=-1,g=-1,h=new f.b;h.Tc();for(var k=-1,m=-1,n=-1,p=new f.b,x=this.Ol.sc(this.Ol.re);-1!=x;x=this.Ol.hb(x)){var Q=this.Ol.getData(x);this.a.Hc(Q,p);var V=this.a.cd(Q);h.qb(p)&&
m==V?(-1==g&&(e=this.a.oz(),g=this.a.Kd()),-1==n&&(n=d.size,this.a.Qa(k,g,n),d.add(1),-1==this.a.yj(V,e)&&(this.a.Br(V,e,k),b.add(V))),this.a.Qa(Q,g,n),d.EY(d.Gc()+1)):(n=-1,h.K(p));k=Q;m=V}if(0==b.size)return!1;h=new f.ha(0);k=new f.ha(0);m=0;for(n=b.size;m<n;m++){V=b.get(m);var ca=this.a.yj(V,e);Q=this.a.Na(ca,g);h.clear(!1);k.clear(!1);h.add(ca);k.add(Q);for(Q=this.a.T(ca);Q!=ca;Q=this.a.T(Q)){var ba=Q;p=this.a.Na(ba,g);if(-1!=p)if(0==k.size)k.add(p),h.add(ba);else if(k.Gc()==p){x=h.Gc();var ea=
this.a.T(x);ca=this.a.T(ba);this.a.Dc(x,ca);this.a.Ec(ca,x);this.a.Dc(ba,ea);this.a.Ec(ea,ba);ba=[!1];ea=this.a.$G(this.W,ea,this.a.Za(V),ba);this.a.Qa(Q,g,-1);ba[0]&&this.a.Sf(V,ca);Q=this.a.Ha(V);ca=this.a.Ha(ea);Q-=ca;this.a.Wj(V,Q);d.set(p,d.get(p)-1);1==d.get(p)&&(d.set(p,0),k.Rf(),h.Rf());Q=ca=x}else h.add(Q),k.add(p)}}this.a.lC(e);this.a.Xd(g);return!0};return a}();f.dN=c})(fa||(fa={}));(function(f){var R=function(){function l(){}l.prototype.og=function(){this.yB=this.sb=null};l.prototype.get=
function(){return this.yB};l.prototype.set=function(c){this.yB=c;if(null!=c)throw 322==c.F()&&(this.sb=c),f.f.za();};l.prototype.create=function(c){if(322==c)this.ps();else throw f.f.Y("Not Implemented");};l.prototype.ps=function(){null==this.sb&&(this.sb=new f.zb);this.yB=this.sb};return l}();f.og=R})(fa||(fa={}));(function(f){f=f.eN||(f.eN={});f[f.enumLineSeg=1]="enumLineSeg";f[f.enumBezierSeg=2]="enumBezierSeg";f[f.enumArcSeg=4]="enumArcSeg";f[f.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";
f[f.enumSegmentMask=7]="enumSegmentMask";f[f.enumDensified=8]="enumDensified"})(fa||(fa={}));(function(f){var R=function(){return function(c){this.gj=c;this.ZC=this.$C=1;this.bC=this.aC=this.cC=0}}(),l=function(){function c(){this.Zq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Jk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Jf=new f.Ra;this.qa=this.kx=0;this.Fo=[];this.It=[];this.ex=[];this.ar=[];this.vB=[]}c.prototype.fC=function(a){if(null!=a){for(var b=0,d=a.length;b<d;b++)this.XX(a[b]);a.length=0}};c.prototype.XX=
function(a){a.gj=null;this.ar.push(a)};c.prototype.ux=function(a){if(0===this.ar.length)var b=new R(a);else b=this.ar[this.ar.length-1],b.gj=a,--this.ar.length;return b};c.prototype.iT=function(a,b){return 0==a?this.It[b]:this.ex[b]};c.prototype.LB=function(){this.kx>=this.vB.length&&this.vB.push(new f.og);var a=this.vB[this.kx];this.kx++;return a};c.prototype.clear=function(){this.fC(this.Fo);this.fC(this.It);this.fC(this.ex);this.kx=0};c.prototype.gp=function(a){this.Fo.push(this.ux(a))};c.prototype.ul=
function(a){return 0==a?this.It.length:this.ex.length};c.prototype.nq=function(a,b){return this.iT(a,b).gj};c.prototype.Ia=function(a,b){if(2!=this.Fo.length)throw f.f.za();this.qa=a;var d=f.Tb.Wx(.01*a),e=!1,g=this.Fo[0],h=this.Fo[1];if(b||0!=(g.gj.Zr(h.gj,a,!0)&5)){if(322==g.gj.F()){var k=g.gj;if(322==h.gj.F()){b=h.gj;var m=f.zb.Dy(k,b,null,this.Zq,this.Jk,a);if(0==m)throw f.zb.Dy(k,b,null,this.Zq,this.Jk,a),f.f.za();a=Array(9);f.L.Gv(a,null);for(var n=0;n<m;n++){var p=this.Zq[n],x=this.Jk[n],Q=
g.bC,V=1;0==p?(Q=g.cC,V=g.$C):1==p&&(Q=g.aC,V=g.ZC);var ca=h.bC,ba=1;0==x?(ca=h.cC,ba=h.$C):1==x&&(ca=h.aC,ba=h.ZC);var ea=new f.b;Q==ca?(Q=new f.b,k.cc(p,Q),p=new f.b,b.cc(x,p),x=V+ba,ba/=x,f.Tb.AH(Q,p,ba,ea),f.b.oc(ea,Q)+f.b.oc(ea,p)>d&&(e=!0)):Q>ca?(k.cc(p,ea),p=new f.b,b.cc(x,p),f.b.oc(ea,p)>d&&(e=!0)):(b.cc(x,ea),Q=new f.b,k.cc(p,Q),f.b.oc(ea,Q)>d&&(e=!0));a[n]=ea}g=0;h=-1;for(n=0;n<=m;n++)ba=n<m?this.Zq[n]:1,ba!=g&&(d=this.LB(),k.jh(g,ba,d),-1!=h&&d.get().Fc(a[h]),n!=m&&d.get().Sc(a[n]),g=ba,
this.It.push(this.ux(d.get()))),h=n;k=[0,0,0,0,0,0,0,0,0];for(n=0;n<m;n++)k[n]=n;1<m&&this.Jk[0]>this.Jk[1]&&(ba=this.Jk[0],this.Jk[0]=this.Jk[1],this.Jk[1]=ba,n=k[0],k[0]=k[1],k[1]=n);g=0;h=-1;for(n=0;n<=m;n++)ba=n<m?this.Jk[n]:1,ba!=g&&(d=this.LB(),b.jh(g,ba,d),-1!=h&&(g=k[h],d.get().Fc(a[g])),n!=m&&(g=k[n],d.get().Sc(a[g])),g=ba,this.ex.push(this.ux(d.get()))),h=n;return e}}throw f.f.za();}return!1};c.prototype.rA=function(a,b,d){b.copyTo(this.Jf);if(1!=this.Fo.length)throw f.f.za();this.qa=a;
var e=this.Fo[0];if(d||e.gj.Xu(b.w(),a,!0))if(322==e.gj.F()){a=e.gj;var g=a.ae(b.w(),!1);this.Zq[0]=g;var h=e.bC;d=1;0==g?(h=e.cC,d=e.$C):1==g&&(h=e.aC,d=e.ZC);e=new f.b;0==h?(h=new f.b,a.cc(g,h),b=b.w(),f.Tb.AH(h,b,1/(d+1),e)):0<h?(e=new f.b,a.cc(g,e)):e=b.w();d=0;g=-1;for(h=0;1>=h;h++){b=1>h?this.Zq[h]:1;if(b!=d){var k=this.LB();a.jh(d,b,k);-1!=g&&k.get().Fc(e);1!=h&&k.get().Sc(e);d=b;this.It.push(this.ux(k.get()))}g=h}this.Jf.nb(e)}else throw f.f.za();};return c}();f.AD=l})(fa||(fa={}));(function(f){var R=
function(){function l(c){this.lt=this.yk=this.sb=null;this.Ll=this.$e=0;this.wl=this.Mm=!1;this.Ue=-1;this.ki=this.ed=0;this.Pa=-1;this.Ya=c;this.$e=this.Xr(this.ki);this.Mm=!1;this.yk=null;this.Ll=-1;this.wl=!1;this.lt=new f.b}l.M_=function(c,a){if(0>a||a>=c.D())throw f.f.Gd();var b=new l(c),d=c.Xv(a);b.ed=a-c.ua(d);b.ki=d+1;b.Pa=d;b.$e=b.Xr(b.Pa);b.Ll=b.Ya.ua(b.Pa);b.wl=b.Ya.Lb(b.Pa);return b};l.L_=function(c,a,b){if(0>a||a>=c.$()||0>b)throw f.f.Gd();var d=c.Lb(a)?0:1;if(b>=c.Ha(a)-d)throw f.f.Gd();
c=new l(c);c.Ue=-1;c.ed=b;c.Pa=a;c.ki=c.ed+1;c.$e=c.Xr(c.ki);c.Ll=c.Ya.ua(c.Pa);c.wl=c.Ya.Lb(c.Pa);return c};l.prototype.gY=function(c){if(this.Ya!=c.Ya)throw f.f.Eb();this.Ue=c.Ue;this.ed=c.ed;this.Pa=c.Pa;this.ki=c.ki;this.$e=c.$e;this.Mm=c.Mm;this.Ll=c.Ll;this.yk=null;this.wl=c.wl};l.prototype.aa=function(){this.Ue!=this.ed&&this.nE();if(this.Mm)this.ed=(this.ed+1)%this.$e;else{if(this.ed==this.$e)throw f.f.Gd();this.ed++}return this.yk};l.prototype.ti=function(){if(this.Mm)this.ed=(this.$e+this.ed-
1)%this.$e;else{if(0==this.ed)throw f.f.Gd();this.ed--}this.ed!=this.Ue&&this.nE();return this.yk};l.prototype.hY=function(){this.Ue=-1;this.ed=0};l.prototype.iY=function(){this.ed=this.$e;this.Ue=-1};l.prototype.Rb=function(c,a){void 0===a&&(a=-1);if(0<=this.Pa&&this.Pa<this.Ya.$()){var b=this.QN();if(c>=b&&c<this.Ya.zc(this.Pa)){this.Ue=-1;this.ed=c-b;return}}a=0<=a&&a<this.Ya.$()&&c>=this.Ya.ua(a)&&c<this.Ya.zc(a)?a:this.Ya.Xv(c);this.ki=a+1;this.Pa=a;this.Ue=-1;this.ed=c-this.Ya.ua(a);this.$e=
this.Xr(a);this.Ll=this.Ya.ua(this.Pa);this.wl=this.Ya.Lb(this.Pa)};l.prototype.Ta=function(){this.Pa=this.ki;if(this.Pa>=this.Ya.$())return!1;this.Ue=-1;this.ed=0;this.$e=this.Xr(this.Pa);this.Ll=this.Ya.ua(this.Pa);this.wl=this.Ya.Lb(this.Pa);this.ki++;return!0};l.prototype.ej=function(){this.$e=this.ed=this.Ue=-1;this.ki=0;this.Pa=-1;this.wl=!1;this.Ll=-1};l.prototype.oC=function(c){if(0>c)throw f.f.Gd();this.ki=c;this.Ll=this.$e=this.ed=this.Ue=this.Pa=-1;this.wl=!1};l.prototype.Xr=function(c){if(this.Ya.Ac())return 0;
var a=1;this.Ya.Lb(c)&&(a=0);return this.Ya.Ha(c)-a};l.prototype.io=function(){return this.Ue==this.$e-1&&this.Ya.Lb(this.Pa)};l.prototype.tC=function(){this.Mm=!0};l.prototype.wb=function(){return this.Ya.kb.i[this.Pa]+this.Ue};l.prototype.QN=function(){return this.Ya.ua(this.Pa)};l.prototype.nk=function(){return this.io()?this.Ya.ua(this.Pa):this.wb()+1};l.prototype.Im=function(){return 0==this.Ue};l.prototype.ko=function(){return this.Ue==this.$e-1};l.prototype.Aa=function(){return this.ed<this.$e};
l.prototype.mA=function(){return 0<this.ed};l.prototype.Cf=function(){var c=new l(this.Ya);c.Ue=this.Ue;c.ed=this.ed;c.$e=this.$e;c.Pa=this.Pa;c.ki=this.ki;c.Ya=this.Ya;c.Mm=this.Mm;return c};l.prototype.nE=function(){if(0>this.ed||this.ed>=this.$e)throw f.f.Gd();this.Ue=this.ed;var c=this.wb();this.Ya.rc();var a=this.Ya.af,b=1;null!=a&&(b=a.read(c)&7);a=this.Ya.description;switch(b){case 1:null==this.sb&&(this.sb=new f.zb);this.yk=this.sb;break;case 2:throw f.f.Y("internal error");case 4:throw f.f.za();
default:throw f.f.za();}this.yk.rg(a);b=this.nk();this.Ya.Hc(c,this.lt);this.yk.Fc(this.lt);this.Ya.Hc(b,this.lt);this.yk.Sc(this.lt);for(var d=1,e=a.Ca;d<e;d++)for(var g=a.jd(d),h=f.oa.Sa(g),k=0;k<h;k++){var m=this.Ya.Rc(g,c,k);this.yk.Qx(g,k,m);m=this.Ya.Rc(g,b,k);this.yk.Hx(g,k,m)}};l.prototype.uU=function(){return this.Pa==this.Ya.$()-1};l.prototype.jo=function(){var c=this.Ya.lT();return null!=c?1!=(c.read(this.Ue)&7):!1};return l}();f.fN=R})(fa||(fa={}));(function(f){var R=function(){function l(c){c instanceof
f.R?(this.kI=c,this.ya=-1,this.Ki=1):(this.QU=c.slice(0),this.ya=-1,this.Ki=c.length)}l.prototype.Ea=function(){return this.ya};l.prototype.next=function(){return this.ya<this.Ki-1?(this.ya++,null!=this.kI?this.kI:this.QU[this.ya]):null};l.prototype.xe=function(){};return l}();f.$c=R})(fa||(fa={}));(function(f){var R=function(){return function(){this.next=null}}(),l=function(){function c(){this.mr=this.qx=this.rx=0;this.YF=!1;this.lL=0;this.xn=this.Tf=this.hm=this.Nh=null;this.Zl=0;this.$y=null;this.vl=
this.xi=-1}c.prototype.dZ=function(a,b,d){this.xi=a;this.vl=b;this.Nh=this.hm=null;this.mr=0;this.$y=d;null==this.xn&&(this.xn=f.L.Xf(384,0));this.tL()};c.prototype.N=function(){return this.xi};c.prototype.ca=function(){return this.vl};c.prototype.flush=function(){0<this.Zl&&(this.$y.UF(this.xn,this.Zl),this.Zl=0)};c.prototype.tL=function(){if(0<this.mr){for(var a=0;a<this.vl;a++){for(var b=this.hm[a];null!=b;){var d=b;b=b.next;d.next=null}this.hm[a]=null}this.Nh=null}this.rx=this.vl;this.qx=-1;this.mr=
0};c.prototype.mK=function(a){this.YF=a==c.iy;for(a=this.rx;a<=this.qx;a++)this.DO(),this.vO(a),this.jR();this.tL()};c.prototype.Py=function(a,b,d,e){if(b!=e){var g=1;b>e&&(g=a,a=d,d=g,g=b,b=e,e=g,g=-1);if(!(0>e||b>=this.vl)){0>a&&0>d?d=a=-1:a>=this.xi&&d>=this.xi&&(d=a=this.xi);var h=(d-a)/(e-b);e>this.vl&&(e=this.vl,d=h*(e-b)+a);0>b&&(a=h*(0-b)+a,b=0);var k=Math.max(this.xi+1,8388607);-8388607>a?(b=(0-a)/h+b,a=0):a>k&&(b=(this.xi-a)/h+b,a=this.xi);-8388607>d?e=(0-a)/h+b:d>k&&(e=(this.xi-a)/h+b);
b=f.L.truncate(b);e=f.L.truncate(e);b!=e&&(d=new R,d.x=f.L.truncate(4294967296*a),d.y=b,d.B=e,d.gR=f.L.truncate(4294967296*h),d.dir=g,null==this.hm&&(this.hm=f.L.Xf(this.vl,null)),d.next=this.hm[d.y],this.hm[d.y]=d,d.y<this.rx&&(this.rx=d.y),d.B>this.qx&&(this.qx=d.B),this.mr++)}}};c.prototype.DO=function(){if(null!=this.Nh){for(var a=!1,b=null,d=this.Nh;null!=d;)if(d.y++,d.y==d.B){var e=d;d=d.next;null!=b?b.next=d:this.Nh=d;e.next=null}else d.x+=d.gR,null!=b&&b.x>d.x&&(a=!0),b=d,d=d.next;a&&(this.Nh=
this.kL(this.Nh))}};c.prototype.vO=function(a){if(!(a>=this.vl)){var b=this.hm[a];if(null!=b){this.hm[a]=null;b=this.kL(b);this.mr-=this.lL;a=this.Nh;for(var d=!0,e=b,g=null;null!=a&&null!=e;)a.x>e.x?(d&&(this.Nh=e),d=e.next,e.next=a,null!=g&&(g.next=e),g=e,e=d):(d=a.next,a.next=e,null!=g&&(g.next=a),g=a,a=d),d=!1;null==this.Nh&&(this.Nh=b)}}};c.jL=function(a,b){return 0>a?0:a>b?b:a};c.prototype.jR=function(){if(null!=this.Nh)for(var a=0,b=this.Nh,d=f.L.truncate(f.L.IH(b.x)),e=b.next;null!=e;e=e.next)if(a=
this.YF?a^1:a+e.dir,e.x>b.x){var g=f.L.truncate(f.L.IH(e.x));0!=a&&(b=c.jL(d,this.xi),d=c.jL(g,this.xi),d>b&&b<this.xi&&(this.xn[this.Zl++]=b,this.xn[this.Zl++]=d,this.xn[this.Zl++]=e.y,this.Zl==this.xn.length&&(this.$y.UF(this.xn,this.Zl),this.Zl=0)));b=e;d=g}};c.prototype.kL=function(a){for(var b=0,d=a;null!=d;d=d.next)b++;this.lL=b;if(1==b)return a;null==this.Tf?this.Tf=f.L.Xf(Math.max(b,16),null):this.Tf.length<b&&(this.Tf=f.L.Xf(Math.max(b,2*this.Tf.length),null));var e=0;for(d=a;null!=d;d=d.next)this.Tf[e++]=
d;2==b?this.Tf[0].x>this.Tf[1].x&&(a=this.Tf[0],this.Tf[0]=this.Tf[1],this.Tf[1]=a):c.LO(this.Tf,b,function(g,h){return g==h?0:g.x<h.x?-1:g.x>h.x?1:0});a=this.Tf[0];this.Tf[0]=null;d=a;for(e=1;e<b;e++)d.next=this.Tf[e],d=this.Tf[e],this.Tf[e]=null;d.next=null;return a};c.LO=function(a,b,d){if(b==a.length)a.sort(d);else{var e=a.slice(0,0),g=a.slice(b);b=a.slice(0,b).sort(d);a.length=0;a.push.apply(a,e.concat(b).concat(g))}};c.iy=0;c.v_=1;return c}();f.uy=l})(fa||(fa={}));(function(f){var R=function(){function l(){}
l.prototype.Bi=function(c,a){var b=this.a.Na(c,this.hr);this.Kl==b&&(this.Kl=this.ve.hb(this.Kl));this.zo==b&&(this.zo=this.ve.hb(this.zo));this.ve.hd(this.AB,b);this.fk(c);if(a&&(a=this.a.cd(c),-1!=a&&this.a.Za(a)==c)){var d=this.a.T(c);if(d!=c){b=this.a.cd(d);if(b==a){this.a.Sf(a,d);return}d=this.a.Ma(c);if(d!=c&&(b=this.a.cd(d),b==a)){this.a.Sf(a,d);return}}this.a.Sf(a,-1);this.a.dh(a,-1)}};l.prototype.aE=function(){for(var c=!1,a=new f.b;;){null==this.bi?(this.bi=new f.ha(0),this.ht=new f.ha(0),
this.De=new f.ha(0)):(this.bi.clear(!1),this.ht.clear(!1),this.De.clear(!1));for(var b=this.zo,d=0,e=!0;b!=this.Kl;){var g=this.ve.getData(b),h=new f.b;this.a.Hc(g,h);e&&(this.a.Hc(g,a),e=!1);h=this.a.Ma(g);var k=this.a.T(g);-559038737!=this.a.Na(h,this.Fg)&&(this.bi.add(h),this.a.Qa(h,this.Fg,-559038737),this.ht.add(g),this.De.add(d++));-559038737!=this.a.Na(k,this.Fg)&&(this.bi.add(k),this.a.Qa(k,this.Fg,-559038737),this.ht.add(g),this.De.add(d++));b=this.ve.hb(b)}if(2>this.bi.size)break;var m=
this;this.De.Zd(0,this.De.size,function(n,p){return m.xN(n,p)});b=0;for(d=this.De.size;b<d;b++)e=this.De.get(b),e=this.bi.get(e),this.a.Qa(e,this.Fg,b),h=new f.b,this.a.Hc(e,h);h=this.bO(a);b=0;for(d=this.De.size;b<d;b++)e=this.De.get(b),-1!=e&&(e=this.bi.get(e),this.a.Qa(e,this.Fg,-1));if(h)c=!0;else break}return c};l.prototype.bO=function(c){for(var a=!1,b=!0;b;){b=!1;var d=0;-1==this.De.get(d)&&(d=this.om(d));for(var e=this.om(d),g=0,h=this.De.size;g<h&&-1!=d&&-1!=e&&d!=e;g++){var k=this.De.get(d);
e=this.De.get(e);k=this.bi.get(k);e=this.bi.get(e);var m=this.a.T(k);this.a.jw(m,c)||(m=this.a.Ma(k));var n=this.a.T(e);this.a.jw(n,c)||(n=this.a.Ma(e));var p=this.Vu(m,k),x=this.Vu(n,e),Q=p?this.a.Ma(m):this.a.T(m),V=x?this.a.Ma(n):this.a.T(n),ca=!1;this.Lp(m)?ca=!0:this.Lp(n)?ca=!0:this.Lp(k)?ca=!0:this.Lp(e)?ca=!0:this.Lp(Q)?ca=!0:this.Lp(V)&&(ca=!0);!ca&&this.a.wq(k,e)&&(ca=!0,this.eE(p,x,m,k,n,e));!ca&&this.a.wq(Q,V)&&(ca=!0,this.eE(!p,!x,m,Q,n,V));ca&&(a=!0);b=b||ca;d=this.om(d);e=this.om(d)}}if(!a)for(d=
0,-1==this.De.get(d)&&(d=this.om(d)),e=this.om(d),g=0,h=this.De.size;g<h&&-1!=d&&-1!=e&&d!=e;g++)k=this.De.get(d),e=this.De.get(e),k=this.bi.get(k),e=this.bi.get(e),m=this.a.T(k),this.a.jw(m,c)||(m=this.a.Ma(k)),n=this.a.T(e),this.a.jw(n,c)||(n=this.a.Ma(e)),p=this.Vu(m,k),x=this.Vu(n,e),Q=p?this.a.Ma(m):this.a.T(m),V=x?this.a.Ma(n):this.a.T(n),this.LN(p,x,k,m,Q,e,n,V)&&(a=!0),d=this.om(d),e=this.om(d);return a};l.prototype.fO=function(){1736==this.a.dc(this.W)&&1==this.a.$n(this.W)&&(new f.pg).dW(this.Ow,
this.a,this.W,this.md);var c=!1,a=!0;this.Fg=this.hr=-1;var b=this.a.D(this.W),d=new f.ha(0);d.Db(b);for(var e=this.a.Kb(this.W);-1!=e;e=this.a.Qb(e))for(var g=this.a.Za(e),h=0,k=this.a.Ha(e);h<k;h++)d.add(g),g=this.a.T(g);var m=this.a.ud.i,n=this.a.ud.Uf;this.a.xb.rc();var p=this.a.xb.va[0].i;d.Zd(0,b,function(Q,V){var ca=m[n*Q],ba=m[n*V],ea=p[2*ca];ca=p[2*ca+1];var da=p[2*ba];ba=p[2*ba+1];ea=ca<ba?-1:ca>ba?1:ea<da?-1:ea>da?1:0;0==ea&&(Q=m[n*Q+3],V=m[n*V+3],ea=Q<V?-1:Q==V?0:1);return ea});this.hr=
this.a.Kd();this.ve=new f.Ap;this.AB=this.ve.Th(0);this.ve.vn(b);for(e=0;e<b;e++)g=d.get(e),h=this.ve.addElement(this.AB,g),this.a.Qa(g,this.hr,h);this.Fg=this.a.Kd();this.Kl=-1;for(this.MD()&&(c=!0);a;){a=!1;b=0;d=!1;do{d=!1;this.zo=-1;k=0;e=new f.b;h=new f.b;for(var x=this.ve.sc(this.AB);-1!=x;)g=this.ve.getData(x),-1!=this.zo?(this.a.Hc(g,h),e.qb(h))?k++:(e.K(h),this.Kl=x,0<k&&(g=this.aE())&&(d=!0,-1!=this.Kl&&(g=this.ve.getData(this.Kl),this.a.Hc(g,e))),this.zo=x=this.Kl,k=0):(this.zo=x,this.a.Hc(this.ve.getData(x),
e),k=0),-1!=x&&(x=this.ve.hb(x));this.Kl=-1;0<k&&(g=this.aE())&&(d=!0);if(10<b++)throw f.f.za();d&&this.ON();this.MD()&&(d=!0);a=a||d&&!1;c=c||d}while(d)}this.a.Xd(this.hr);this.a.Xd(this.Fg);return c=f.dN.U(this.a,this.W,this.ve,this.Ow)||c};l.prototype.Vu=function(c,a){return this.a.T(a)==c?!1:!0};l.prototype.LN=function(c,a,b,d,e,g,h,k){if(d==h)return this.fk(b),this.fk(g),!1;var m=this.a.Na(b,this.Fg),n=this.a.Na(e,this.Fg),p=this.a.Na(g,this.Fg),x=this.a.Na(k,this.Fg);b=[0,0,0,0,0,0,0,0];var Q=
[0,0,0,0];b[0]=0;Q[0]=m;b[1]=0;Q[1]=n;b[2]=1;Q[2]=p;b[3]=1;Q[3]=x;for(m=1;4>m;m++){n=Q[m];p=b[m];for(x=m-1;0<=x&&Q[x]>n;)Q[x+1]=Q[x],b[x+1]=b[x],x--;Q[x+1]=n;b[x+1]=p}Q=0;0!=b[0]&&(Q|=1);0!=b[1]&&(Q|=2);0!=b[2]&&(Q|=4);0!=b[3]&&(Q|=8);if(5!=Q&&10!=Q)return!1;c==a?c?(this.a.Dc(k,d),this.a.Ec(d,k),this.a.Dc(e,h),this.a.Ec(h,e)):(this.a.Ec(k,d),this.a.Dc(d,k),this.a.Ec(e,h),this.a.Dc(h,e)):c?(this.a.Ec(d,g),this.a.Dc(g,d),this.a.Ec(h,e),this.a.Dc(e,h)):(this.a.Dc(d,g),this.a.Ec(g,d),this.a.Dc(h,e),this.a.Ec(e,
h));return!0};l.prototype.eE=function(c,a,b,d,e,g){this.r0?this.dO():this.cO(c,a,b,d,e,g)};l.prototype.dO=function(){throw f.f.Y("not implemented.");};l.prototype.cO=function(c,a,b,d,e,g){if(c!=a)c?(this.a.Dc(b,e),this.a.Ec(e,b),this.a.Dc(g,d),this.a.Ec(d,g),this.On(e,b),this.Bi(e,!0),this.a.ui(e,!0),this.fk(b),this.On(g,d),this.Bi(g,!0),this.a.ui(g,!1)):(this.a.Dc(e,b),this.a.Ec(b,e),this.a.Dc(d,g),this.a.Ec(g,d),this.On(e,b),this.Bi(e,!0),this.a.ui(e,!1),this.fk(b),this.On(g,d),this.Bi(g,!0),this.a.ui(g,
!0)),this.fk(d);else{var h=c?b:d,k=a?e:g;c=c?d:b;a=a?g:e;e=!1;this.a.Dc(h,k);this.a.Dc(k,h);this.a.Ec(c,a);this.a.Ec(a,c);for(g=a;g!=k;)b=this.a.Ma(g),d=this.a.T(g),this.a.Ec(g,d),this.a.Dc(g,b),e=e||g==h,g=d;e||(b=this.a.Ma(k),d=this.a.T(k),this.a.Ec(k,d),this.a.Dc(k,b));this.On(k,h);this.Bi(k,!0);this.a.ui(k,!1);this.fk(h);this.On(a,c);this.Bi(a,!0);this.a.ui(a,!1);this.fk(c)}};l.prototype.MD=function(){for(var c=!1,a=this.a.Kb(this.W);-1!=a;){for(var b=this.a.Za(a),d=0,e=this.a.Ha(a);d<e&&1<e;){var g=
this.a.Ma(b),h=this.a.T(b);this.a.wq(g,h)?(c=!0,this.Bi(b,!1),this.a.od(b,!0),this.Bi(h,!1),this.a.od(h,!0),b=g,d=0,e=this.a.Ha(a)):(b=h,d++)}if(2>this.a.Ha(a)){c=this.a.Za(a);d=0;for(e=this.a.Ha(a);d<e;d++)this.Bi(c,!1),c=this.a.T(c);a=this.a.sr(a);c=!0}else a=this.a.Qb(a)}return c};l.prototype.Lp=function(c){for(var a=!1;;){var b=this.a.T(c),d=this.a.Ma(c);if(b==c)return this.Bi(c,!0),this.a.ui(c,!1),!0;if(!this.a.wq(b,d))break;a=!0;this.fk(d);this.fk(b);this.Bi(c,!0);this.a.ui(c,!1);this.On(b,
d);this.Bi(b,!0);this.a.ui(b,!0);if(b==d)break;c=d}return a};l.prototype.ON=function(){for(var c=0,a=this.ve.sc(this.ve.re);-1!=a;a=this.ve.hb(a)){var b=this.ve.getData(a);this.a.hj(b,-1)}for(var d=0,e=this.a.Kb(this.W);-1!=e;)if(a=this.a.Za(e),-1==a||-1!=this.a.cd(a))b=e,e=this.a.Qb(e),this.a.tr(b);else{this.a.hj(a,e);var g=1;for(b=this.a.T(a);b!=a;b=this.a.T(b))this.a.hj(b,e),g++;this.a.sp(e,!1);this.a.Wj(e,g);this.a.dh(e,this.a.Ma(a));d+=g;c++;e=this.a.Qb(e)}for(a=this.ve.sc(this.ve.re);-1!=a;a=
this.ve.hb(a))b=this.ve.getData(a),-1==this.a.cd(b)&&(e=this.a.$G(this.W,b,b,null),d+=this.a.Ha(e),c++);this.a.bm(this.W,c);this.a.Uj(this.W,d);c=0;for(d=this.a.kd;-1!=d;d=this.a.Ae(d))c+=this.a.D(d);this.a.JC(c)};l.prototype.om=function(c){for(var a=0,b=this.De.size-1;a<b;a++)if(c=(c+1)%this.De.size,-1!=this.De.get(c))return c;return-1};l.prototype.On=function(c,a){var b=this.a.Na(a,this.hr),d=this.a.Na(a,this.Fg);this.a.UC(c,a);this.a.Qa(a,this.hr,b);this.a.Qa(a,this.Fg,d)};l.prototype.fk=function(c){var a=
this.a.Na(c,this.Fg);-1!=a&&(this.De.set(a,-1),this.a.Qa(c,this.Fg,-1))};l.U=function(c,a,b,d,e){var g=new l;g.a=c;g.W=a;g.gB=b;g.Ow=d;g.md=e;return g.fO()};l.prototype.xN=function(c,a){var b=this.bi.get(c),d=new f.b;this.a.Hc(b,d);b=new f.b;var e=this.bi.get(a);this.a.Hc(e,b);if(d.qb(b))return 0;e=this.ht.get(c);c=new f.b;this.a.Hc(e,c);e=this.ht.get(a);a=new f.b;this.a.Hc(e,a);e=new f.b;e.tc(d,c);d=new f.b;d.tc(b,a);return f.b.Wr(e,d)};return l}();f.Kn=R})(fa||(fa={}));(function(f){(function(l){l[l.Local=
0]="Local";l[l.Geographic=1]="Geographic";l[l.Projected=2]="Projected";l[l.Image=3]="Image";l[l.Unknown=4]="Unknown"})(f.gN||(f.gN={}));(function(l){l[l.Integer32=0]="Integer32";l[l.Integer64=1]="Integer64";l[l.FloatingPoint=2]="FloatingPoint"})(f.aN||(f.aN={}));var R=function(){function l(){this.Ip="";this.Yu=null;this.jg=0;this.NI=this.$o=-1;this.Dh=null}l.prototype.xc=function(){return this.jg};l.prototype.xs=function(){return 0};l.prototype.ys=function(){return 0};l.prototype.zs=function(){return 0};
l.prototype.ws=function(){return 0};l.prototype.Rz=function(){return 5.7295779513082306E10};l.prototype.Sz=function(){return 1E3};l.prototype.Qz=function(){return 1E3};l.prototype.Is=function(){return 1};l.prototype.ce=function(){var c=.001;0!=this.jg?c=f.Vr.OR(this.jg):null!=this.Dh&&(c=f.FD.PR(this.Dh));return c};l.prototype.jA=function(){return this.Dh};l.prototype.Ld=function(){if(0!=this.jg)return f.Uc.hh(f.Vr.yz(this.jg));if(null!=this.Dh)return f.FD.QR(this.Dh)};l.Fb=function(c){if(0!=c.jg){if(!0===
f.Vr.sU(c.jg))return 1;if(!0===f.Vr.vU(c.jg))return 2}return 4};l.prototype.Gs=function(){var c=this.xc();if(-1!=this.$o)return this.$o;this.$o=f.Vr.OL(c);return-1!=this.$o?this.$o:c};l.create=function(c){if(0>=c)throw f.f.I("Invalid or unsupported wkid: "+c);var a=new l;a.jg=c;return a};l.AQ=function(c){if(null==c||0==c.length)throw f.f.I("Cannot create SpatialReference from null or empty text.");var a=new l;a.Dh=c;return a};l.prototype.Ib=function(c){return this==c?!0:null==c||this.constructor!=
c.constructor||this.jg!=c.jg||0==this.jg&&this.Dh!==c.Dh?!1:!0};l.kS=function(c,a){var b=Math.PI/180,d=new f.da;f.bM.nS(c.w().x*b,c.w().y*b,a.w().x*b,a.w().y*b,d);return d.j};l.prototype.toString=function(){return"[ tol: "+this.co()+"; wkid: "+this.xc()+"; wkt: "+this.jA()+"]"};l.prototype.fc=function(){if(""!==this.Ip)return this.Ip;var c=this.toString();if(Array.prototype.reduce)return this.Ip="S"+c.split("").reduce(function(d,e){d=(d<<5)-d+e.charCodeAt(0);return d&d},0);var a=0;if(0===c.length)return"";
for(var b=0;b<c.length;b++)a=(a<<5)-a+c.charCodeAt(b),a&=a;return this.Ip="S"+a};l.prototype.co=function(){return this.ce(0)};l.prototype.mh=function(){return null!==this.Yu?this.Yu:this.Yu=f.Mu.JQ(this)};l.z0=!0;l.mv=2147483645;l.nv=9007199254740990;return l}();f.je=R})(fa||(fa={}));(function(f){var R=function(l){function c(){var a=null!==l&&l.apply(this,arguments)||this;a.Pi=null;a.kV=null;a.Ro=new f.BD;a.Yo=null;a.Qw=null;return a}Fa(c,l);c.JQ=function(a){var b=new c;b.jg=a.jg;b.$o=a.$o;b.NI=a.NI;
b.Dh=a.Dh;if(""!==b.Dh&&null!==b.Dh){a=c.rN(b.Dh);var d=c.pN(b.Dh);b.Ro.By(a,d,f.Nu.Integer64);b.Iy(a);b.Ly(d);b.jg=a.Gs()}else a=c.qN(b.jg),b.Iy(a),b.Ly(null),b.Ro.By(a,null,f.Nu.Integer64);return b};c.prototype.ce=function(a){return this.Ro.co(a)};c.pN=function(a){if(0>=a.length)throw f.f.I();var b=null;try{b=f.uD.fromString(a)}catch(d){b=null}return null==b?null:c.LD(b,!0)};c.prototype.Iy=function(a){this.Dd=a;this.Yo=this.Dd.Ld()};c.prototype.Ly=function(a){this.zI=a;this.kV=null!=this.zI?this.zI.Yo:
null};c.prototype.Cc=function(){return 0==this.Fb()||3==this.Fb()?!1:this.Dd.Cc()};c.prototype.uH=function(){return 0==this.Fb()?!1:3==this.Fb()?this.Pi.kk().Cc():this.Dd.Cc()};c.prototype.wg=function(){return null!=this.Dd?this.Dd.Ze:null};c.prototype.Am=function(){return this.Dd.Am()};c.prototype.Sd=function(){return this.Dd.Sd()};c.prototype.oh=function(){return null!=this.Dd?this.Dd.Yw:NaN};c.prototype.Cm=function(){return this.Dd.Cm()};c.prototype.Cs=function(){return this.Dd.Cs()};c.prototype.xj=
function(){return this.Dd.xj()};c.prototype.FT=function(a){return f.vD.vz(this.Dd,a.Dd)};c.prototype.sk=function(){return this.Dd.sk()};c.prototype.Bs=function(){return this.Dd.Bs()};c.prototype.Wh=function(){return 3==this.Fb()?this.Pi.kk().Wh():this.Dd.Wh()};c.prototype.nh=function(){if(!this.Cc())throw f.f.I("!isPannable()");var a=new f.g;this.Dd.nh(a);return a};c.prototype.be=function(){if(!this.Cc())throw f.f.I("!isPannable()");return this.Dd.Lo};c.prototype.XS=function(){if(!this.Cc())throw f.f.I("!isPannable()");
var a=new f.g;this.Dd.WS(a);return a};c.prototype.Wv=function(){if(!this.Cc())throw f.f.I("!isPannable()");return this.Dd.Wv()};c.prototype.Vv=function(){if(!this.Cc())throw f.f.I("!isPannable()");return this.Dd.Vv()};c.prototype.Ds=function(){return null!=this.Pi?this.Pi.kk().Ds():this.Dd.Ds()};c.prototype.aS=function(){return this.Dd.Ov()};c.prototype.FX=function(a){a.assign(this.Ro)};c.prototype.qk=function(){return this.Yo.getUnitFactor()};c.prototype.dA=function(a){return this.Ro.dA(a)};c.prototype.hc=
function(){var a=this.Fb();if(1==a)return this;if(3==a)return this.Pi.kk().hc();if(0==a)throw f.f.Y("invalid call");if(4===a)throw f.f.Y("invalid call");if(null!==this.Qw)return this.Qw;a=this.wg().getGeogcs();if(null==a)throw f.f.za();return this.Qw=c.OF(a,this.Ro.Is())};c.OF=function(a,b){if(null==a)throw f.f.I("null pointer.");var d=new c;a=c.Tu(a,!0);d.Ro.By(a,null,b);d.Iy(a);d.Ly(null);d.jg=a.Gs();return d};c.prototype.Fb=function(){var a=this.wg();if(null!=a)switch(a.getType()){case f.Pc.PE_TYPE_GEOGCS:return 1;
case f.Pc.PE_TYPE_PROJCS:return 2}return 4};c.prototype.bA=function(a){var b=new f.b;this.Dd.bA(a,b);return b};c.prototype.Ov=function(){return this.Dd.Ov()};c.Tu=function(a,b){var d=a.getCode();if(0>=d&&(d=f.zf.getCode(a),0<d)){a=f.zf.coordsys(d);if(null==a)throw f.f.I("Text to wkid mapping had failed: "+d);return c.Tu(a,b)}if(b&&0<d&&(b=c.Yx[d]))return b;b=f.Ab.dw(a,d,!1);var e=c.rL[b];if(e)return e;a=0>=d?a:f.zf.coordsys(d);a=new f.vD(a);c.rL[b]=a;0<d&&(c.Yx[d]=a);return a};c.qN=function(a){if(0>=
a)throw f.f.I("Invalid or unsupported wkid: "+a);var b=c.Yx[a];if(null!=b)return b;b=f.zf.coordsys(a);if(null==b)throw f.f.I("Invalid or unsupported wkid: "+a);b=c.Tu(b,!1);b.Gs()!=a&&(c.Yx[a]=b);return b};c.rN=function(a){if(null==a||void 0===a||0==a.length)throw f.f.I("Cannot create SpatialReference from null or empty text.");var b=null;try{b=f.zf.fromString(f.Pc.PE_TYPE_COORDSYS,a)}catch(d){throw f.f.I("Cannot create SpatialReference from text. "+d.message);}if(null===b)throw f.f.I("Cannot create SpatialReference from text. ");
return c.Tu(b,!0)};c.LD=function(a,b){var d=a.getCode();if(0>=d&&(d=f.zf.getCode(a),0<d)){d=f.zf.vertcs(d);if(null===d)throw f.f.I();return c.LD(d,b)}if(b&&0<d&&(b=c.qL[d]))return b;a=f.Ab.dw(a,d,!1);if(b=c.sL[a])return b;var e;0>=d||(e=f.zf.vertcs(d));if(null===e)throw f.f.I();e=new f.XM(e);c.sL[a]=e;0<d&&(c.qL[d]=e);return e};c.iJ=function(a,b){if(null===b||b.u())return null;var d=new f.g;if(null!==b&&1!=a.Fb()){var e=a.hc(),g=e.wg();a=f.Ur.os(a,e,null,null);b=f.Rr.local().U(b,a,null)}else g=a.wg();
b.s(d);b=g.getPrimem().getLongitude();g=g.getUnit().getUnitFactor();return new f.sD(d.o,d.A,d.v,d.B,b,g)};c.XD=function(a){var b={name:"",steps:[],_pt:null,_entry:null},d=0;for(a=a.getEntries();d<a.length;d++){var e=a[d],g={l0:!1,N0:"",M0:-1,geogtran:null};0===e.getDirection()?g.isInverse=!1:g.isInverse=!0;var h=e.getGeogtran().getCode();-1<h?g.wkid=h:g.wkt=e.getGeogtran().toString();b.steps.push(g)}return b};c.nT=function(a,b,d,e){void 0===d&&(d=null);d=c.iJ(e,d);a=f.Dp.getGTlist(a.wg(),b.wg(),2,
f.Dp.PE_GTLIST_OPTS_COMMON,d,1);b=null;a&&0<a.length&&(b=this.XD(a[0]),f.ry.destroy(a));null!==d&&d.destroy();return b};c.oT=function(a,b,d,e){var g;void 0===d&&(d=null);void 0===e&&(e=null);void 0===g&&(g=30);d=c.iJ(e,d);a=f.Dp.getGTlist(a.wg(),b.wg(),2,f.Dp.PE_GTLIST_OPTS_COMMON,d,g);b=[];if(a&&0<a.length){for(g=0;g<a.length;g++)b.push(this.XD(a[g]));f.ry.destroy(a)}null!==d&&d.destroy();return b};c.Yx={};c.rL={};c.qL={};c.sL={};return c}(f.je);f.Mu=R})(fa||(fa={}));(function(f){var R;(function(c){c[c.Integer32=
0]="Integer32";c[c.Integer64=1]="Integer64";c[c.FloatingPoint=2]="FloatingPoint"})(R=f.Nu||(f.Nu={}));var l=function(){function c(){this.Jp()}c.prototype.assign=function(a){this.Bl=a.Bl;this.Cl=a.Cl;this.$i=a.$i;this.Mw=a.Mw;this.jn=a.jn;this.Lw=a.Lw;this.jx=a.jx;this.Pk=a.Pk;this.er=a.er;this.dr=a.dr;this.dn=a.dn};c.prototype.xs=function(){return this.Bl};c.prototype.ys=function(){return this.Cl};c.prototype.zs=function(){return this.Mw};c.prototype.ws=function(){return this.Lw};c.prototype.Rz=function(){return this.$i};
c.prototype.Sz=function(){return this.jn};c.prototype.Qz=function(){return this.jx};c.prototype.Is=function(){return this.dn};c.prototype.Jp=function(){this.Cl=this.Bl=0;this.$i=1;this.Mw=0;this.jn=1;this.Lw=0;this.jx=1;this.dr=this.er=this.Pk=2.220446049250313E-14;this.dn=R.FloatingPoint};c.prototype.By=function(a,b,d){this.Jp();this.dn=d;if(d!=R.FloatingPoint){var e=new f.g;a.vS(e);this.Bl=e.o;this.Cl=e.A}else this.Cl=this.Bl=-1.7976931348623157E308;e=a.Ze.getType();e==f.Pc.PE_TYPE_GEOGCS?(e=(d==
R.Integer64?1E-9:1/18E5)*a.Sd(),this.$i=1/e):e==f.Pc.PE_TYPE_PROJCS&&(e=(d==R.Integer64?1E-4:.001)*a.Am(),this.$i=1/e);null!=b?(e=(d==R.Integer32?.001:1E-4)*b.xI,this.jn=1/e):this.jn=1E4;this.jx=1E4;this.gO();this.Pk=a.Yw;this.er=null!=b?.001*b.xI:.001;this.dr=2.220446049250313E-14};c.prototype.gO=function(){if(this.dn!=R.FloatingPoint){var a=this.dn==R.Integer64?f.je.nv:f.je.mv,b=a/this.$i,d=this.Bl+b,e=f.L.truncate((d-this.Bl)*this.$i);e>a&&(this.$i=a/(d-this.Bl));b=this.Cl+b;e=f.L.truncate((b-
this.Cl)*this.$i);e>a&&(this.$i=a/(b-this.Cl))}};c.prototype.IC=function(a){switch(a){case 0:this.Pk=void 0;case 1:this.er=void 0;case 2:this.dr=void 0}};c.prototype.co=function(a){switch(a){case 0:return this.Pk;case 1:return this.er;case 2:return this.dr}return 0};c.prototype.uT=function(){var a=new f.g;switch(this.Is()){case R.Integer32:var b=f.je.mv/this.Rz();a.H(this.xs(),this.ys(),this.xs()+b,this.ys()+b);break;case R.Integer64:b=f.je.nv/this.Rz();a.H(this.xs(),this.ys(),this.xs()+b,this.ys()+
b);break;case R.FloatingPoint:a.H(-1.7976931348623157E308,-1*1.7976931348623157E308,1.7976931348623157E308,1.7976931348623157E308);break;default:throw f.f.Y("internal error");}return a};c.prototype.wT=function(){var a=new f.uc;switch(this.Is()){case R.Integer32:var b=f.je.mv/this.Sz();a.H(this.zs(),this.zs()+b);break;case R.Integer64:b=f.je.nv/this.Sz();a.H(this.zs(),this.zs()+b);break;case R.FloatingPoint:a.H(-1*1.7976931348623157E308,1.7976931348623157E308);break;default:throw f.f.Y("internal error");
}return a};c.prototype.PS=function(){var a=new f.uc;switch(this.Is()){case R.Integer32:var b=f.je.mv/this.Qz();a.H(this.ws(),this.ws()+b);break;case R.Integer64:b=f.je.nv/this.Qz();a.H(this.ws(),this.ws()+b);break;case R.FloatingPoint:a.H(-1*1.7976931348623157E308,1.7976931348623157E308);break;default:throw f.f.Y("internal error");}return a};c.prototype.dA=function(a){if(this.dn==R.FloatingPoint)return 0;switch(a){case 0:return 1/this.$i;case 1:return 1/this.jn;case 2:return 1/this.jn;default:return 0}};
c.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Pk.toString();a=a+";m_falseX: "+this.Bl.toString();a=a+";m_falseY: "+this.Cl.toString();a=a+";m_unitsXY: "+this.$i.toString();a=a+";m_falseZ: "+this.Mw.toString();a=a+";m_unitsZ: "+this.jn.toString();a=a+";m_falseM: "+this.Lw.toString();a=a+";m_toleranceZ: "+this.er.toString();a=a+";m_toleranceM: "+this.dr.toString();a=a+";m_precision: "+this.dn.toString();return a+"] "};return c}();f.BD=l})(fa||(fa={}));(function(f){function R(e,
g){89.99999<g?g=89.99999:-89.99999>g&&(g=-89.99999);g*=.017453292519943;return[111319.49079327169*e,3189068.5*Math.log((1+Math.sin(g))/(1-Math.sin(g)))]}function l(e,g,h){e=e/6378137*57.29577951308232;return h?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*g/6378137)))]}function c(e,g,h){var k=e.Cf();if(33===e.F())g=g(k.Ce(),k.lf()),k.nb(g[0],g[1]);else if(197===e.F()){var m=
g(e.Ms(),e.Os(),h);g=g(e.Ls(),e.Ns(),h);k.H(m[0],m[1],g[0],g[1])}else for(m=new f.b,e=0;e<k.D();e++){k.w(e,m);var n=g(m.x,m.y,h);m.ka(n[0],n[1]);k.nb(e,m)}return k}function a(e){return c(e,l,!0)}function b(e){return c(e,R,!0)}var d=Math.PI/180;f.cM=function(){function e(){}e.av=function(g){var h=Math.sqrt(.006694379990197414),k=Math.sin(g.y*d);return f.b.construct(6378137*g.x*d,3167719.6636462314*(k/(1-.006694379990197414*k*k)-1/(2*h)*Math.log((1-h*k)/(1+h*k))))};e.Ay=function(g,h,k,m){var n=1/298.257223563,
p=Math.sin(k);k=Math.cos(k);var x=(1-n)*Math.tan(g);g=1/Math.sqrt(1+x*x);var Q=x*g,V=Math.atan2(x,k);x=g*p;var ca=x*x,ba=1-ca,ea=2.7233160610754688E11*ba/4.040829998466145E13,da=1+ea/16384*(4096+ea*(-768+ea*(320-175*ea))),ma=ea/1024*(256+ea*(-128+ea*(74-47*ea)));ea=m/(6356752.31424518*da);for(var za=2*Math.PI,Ba,Ea,Ma,Pa;1E-12<Math.abs(ea-za);)Ma=Math.cos(2*V+ea),Ba=Math.sin(ea),Ea=Math.cos(ea),Pa=ma*Ba*(Ma+ma/4*(Ea*(-1+2*Ma*Ma)-ma/6*Ma*(-3+4*Ba*Ba)*(-3+4*Ma*Ma))),za=ea,ea=m/(6356752.31424518*da)+
Pa;m=Q*Ba-g*Ea*k;ba=n/16*ba*(4+n*(4-3*ba));return f.b.construct((h+(Math.atan2(Ba*p,g*Ea-Q*Ba*k)-(1-ba)*n*x*(ea+ba*Ba*(Ma+ba*Ea*(-1+2*Ma*Ma)))))/d,Math.atan2(Q*Ea+g*Ba*k,(1-n)*Math.sqrt(ca+m*m))/d)};e.UN=function(g,h,k,m){var n=1/298.257223563,p=m-h,x=Math.atan((1-n)*Math.tan(g)),Q=Math.atan((1-n)*Math.tan(k)),V=Math.sin(x);x=Math.cos(x);var ca=Math.sin(Q);Q=Math.cos(Q);var ba=p,ea=1E3;do{var da=Math.sin(ba),ma=Math.cos(ba),za=Math.sqrt(Q*da*Q*da+(x*ca-V*Q*ma)*(x*ca-V*Q*ma));if(0===za)return 0;ma=
V*ca+x*Q*ma;var Ba=Math.atan2(za,ma),Ea=x*Q*da/za,Ma=1-Ea*Ea;da=ma-2*V*ca/Ma;isNaN(da)&&(da=0);var Pa=n/16*Ma*(4+n*(4-3*Ma)),Ra=ba;ba=p+(1-Pa)*n*Ea*(Ba+Pa*za*(da+Pa*ma*(-1+2*da*da)))}while(1E-12<Math.abs(ba-Ra)&&0<--ea);if(0===ea)return V=m-h,{azimuth:Math.atan2(Math.sin(V)*Math.cos(k),Math.cos(g)*Math.sin(k)-Math.sin(g)*Math.cos(k)*Math.cos(V)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(g)*Math.sin(k)+Math.cos(g)*Math.cos(k)*Math.cos(m-h))};g=2.7233160610754688E11*Ma/4.040829998466145E13;
h=g/1024*(256+g*(-128+g*(74-47*g)));return{azimuth:Math.atan2(Q*Math.sin(ba),x*ca-V*Q*Math.cos(ba)),jS:6356752.31424518*(1+g/16384*(4096+g*(-768+g*(320-175*g))))*(Ba-h*za*(da+h/4*(ma*(-1+2*da*da)-h/6*da*(-3+4*za*za)*(-3+4*da*da)))),F0:Math.atan2(x*Math.sin(ba),x*ca*Math.cos(ba)-V*Q)}};e.vR=function(g){var h=g.hasAttribute(1),k=g.hasAttribute(2),m=[],n=g.$(),p=null,x=null;h&&(p=g.Va(1));k&&(x=g.Va(2));for(var Q=new f.b,V=0;V<n;V++){for(var ca=g.ua(V),ba=g.Ha(V),ea=0,da=0,ma=NaN,za=NaN,Ba=NaN,Ea=NaN,
Ma=g.Lb(V),Pa=[],Ra=ca;Ra<ca+ba;Ra++){g.w(Ra,Q);Ea=Ba=NaN;var Qa=[Q.x,Q.y];h&&(Ba=p.get(Ra),Qa.push(Ba));k&&(n=x.get(Ra),Qa.push(Ea));Ra==ca&&Ma&&(ea=Q.x,da=Q.y,ma=Ba,za=Ea);Pa.push(Qa)}!Ma||ea==Q.x&&da==Q.y&&(!h||isNaN(ma)&&isNaN(Ba)||ma==Ba)&&(!k||isNaN(za)&&isNaN(Ea)||za==Ea)||Pa.push(Pa[0].slice(0));m.push(Pa)}return m};e.Bz=function(g,h){g=e.vR(g);637.100877141506>h&&(h=637.100877141506);for(var k=[],m,n=0;n<g.length;n++){var p=g[n];k.push(m=[]);m.push([p[0][0],p[0][1]]);var x,Q,V=p[0][0]*d,
ca=p[0][1]*d;for(x=0;x<p.length-1;x++){var ba=p[x+1][0]*d,ea=p[x+1][1]*d;if(V!==ba||ca!==ea){ea=e.UN(ca,V,ea,ba);ba=ea.azimuth;ea=ea.jS;var da=ea/h;if(1<da){for(Q=1;Q<=da-1;Q++){var ma=e.Ay(ca,V,ba,Q*h);m.push([ma.x,ma.y])}Q=e.Ay(ca,V,ba,(ea+Math.floor(da-1)*h)/2);m.push([Q.x,Q.y])}ca=e.Ay(ca,V,ba,ea);m.push([ca.x,ca.y]);V=ca.x*d;ca=ca.y*d}}}return{uK:k}};e.iS=function(g){for(var h=[],k=0;k<g.length;k++){var m=g[k];m=e.Bz(m,1E4);h.push(m)}g=[];for(var n=0;n<h.length;n++){m=h[n];var p=0;for(k=0;k<
m.uK.length;k++){var x=m.uK[k],Q=e.av(f.b.construct(x[0][0],x[0][1])),V=e.av(f.b.construct(x[x.length-1][0],x[x.length-1][1])),ca=V.x*Q.y-Q.x*V.y,ba;for(ba=0;ba<x.length-1;ba++)Q=e.av(f.b.construct(x[ba+1][0],x[ba+1][1])),V=e.av(f.b.construct(x[ba][0],x[ba][1])),ca+=V.x*Q.y-Q.x*V.y;p+=ca}p/=1;g.push(p/-2)}return g};return e}();f.ab=function(){function e(){}e.gC=function(g,h,k,m,n,p,x){e.RD[g.fc()]=h;0==isNaN(k)&&(e.YD[g.fc()]=k);0==isNaN(m)&&(e.lE[g.fc()]=m);0==isNaN(n)&&(e.KD[g.fc()]=n);e.ZD[g.fc()]=
p;null!==x&&(e.$D[g.fc()]=x)};e.Dx=function(g,h,k){e.dE[g.fc()+"-"+h.fc()]=k};e.hc=function(g){g=e.RD[g.fc()];if(void 0==g)throw f.f.Me();return g};e.Sd=function(g){g=e.YD[g.fc()];if(void 0==g)throw f.f.Me();return g};e.cw=function(g){g=e.lE[g.fc()];if(void 0==g)throw f.f.Me();return g};e.Mv=function(g){g=e.KD[g.fc()];if(void 0==g)throw f.f.Me();return g};e.nh=function(g){g=e.$D[g.fc()];if(void 0==g)throw f.f.Me();return f.g.construct(g[0],g[1],g[2],g[3])};e.Cc=function(g){g=e.ZD[g.fc()];if(void 0==
g)throw f.f.Me();return g};e.$g=function(g,h,k){if(h.Ib(k))return g;var m=e.dE[h.fc()+"-"+k.fc()];if(void 0!==m)return m(g,h,k);throw f.f.Me();};e.du=function(){throw f.f.Me();};e.pS=function(){throw f.f.Me();};e.uX=function(){throw f.f.Me();};e.sk=function(){throw f.f.Me();};e.YX=function(){var g=f.je.create(102100),h=f.je.create(3857),k=f.je.create(4326);f.ab.gC(g,k,NaN,NaN,NaN,!1,null);f.ab.gC(k,k,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]);f.ab.gC(h,k,NaN,NaN,NaN,!1,null);f.ab.Dx(g,k,
a);f.ab.Dx(k,g,b);f.ab.Dx(h,k,a);f.ab.Dx(k,h,b)};e.RD=[];e.YD=[];e.lE=[];e.KD=[];e.ZD=[];e.$D=[];e.dE=[];return e}()})(fa||(fa={}));fa.ab.YX();(function(f){var R=function(){function l(c){this.i=new Int32Array(0);this.Ao=-1;this.Og=this.size=this.Jl=0;this.Uf=c}l.prototype.hd=function(c){c<this.Jl?(this.i[c*this.Uf]=this.Ao,this.Ao=c):this.Jl--;this.size--};l.prototype.S=function(c,a){return this.i[c*this.Uf+a]};l.prototype.P=function(c,a,b){this.i[c*this.Uf+a]=b};l.prototype.Ke=function(){var c=this.Ao;
if(-1==c){if(this.Jl==this.Og){c=0!=this.Og?f.L.truncate(3*(this.Og+1)/2):1;2147483647<c&&(c=2147483647);if(c==this.Og)throw f.f.Gd();this.lA(c)}c=this.Jl;this.Jl++}else this.Ao=this.i[c*this.Uf];this.size++;for(var a=c*this.Uf;a<c*this.Uf+this.Uf;a++)this.i[a]=-1;return c};l.prototype.Vl=function(c){var a=this.Ao;if(-1==a){if(this.Jl==this.Og){a=0!=this.Og?f.L.truncate(3*(this.Og+1)/2):1;2147483647<a&&(a=2147483647);if(a==this.Og)throw f.f.Gd();this.lA(a)}a=this.Jl;this.Jl++}else this.Ao=this.i[a*
this.Uf];this.size++;for(var b=a*this.Uf,d=0;d<c.length;d++)this.i[b+d]=c[d];return a};l.prototype.rj=function(c){this.Ao=-1;this.size=this.Jl=0;c&&(this.i=null,this.Og=0)};l.prototype.Le=function(c){c>this.Og&&this.lA(c)};l.prototype.$x=function(c,a){c*=this.Uf;a*=this.Uf;for(var b=0;b<this.Uf;b++){var d=this.i[a+b];this.i[a+b]=this.i[c+b];this.i[c+b]=d}};l.prototype.PC=function(c,a,b){var d=this.i[this.Uf*a+b];this.i[this.Uf*a+b]=this.i[this.Uf*c+b];this.i[this.Uf*c+b]=d};l.f0=function(){return-2};
l.g0=function(){return-3};l.xH=function(c){return 0<=c};l.prototype.lA=function(c){null==this.i&&(this.i=new Int32Array(0));var a=new Int32Array(this.Uf*c);a.set(this.i,0);this.i=a;this.Og=c};return l}();f.ad=R})(fa||(fa={}));(function(f){var R;(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(R||
(R={}));var l=function(){function a(b){this.Ie=b;this.Fh=NaN;this.SH=new f.og;this.TH=new f.og;this.Us=new f.uc;this.Vs=new f.uc}a.prototype.compare=function(b,d,e){b=b.ga(e);this.Ie.ZB(d,this.SH);this.Ie.ZB(b,this.TH);d=this.SH.get();b=this.TH.get();this.Us.H(d.ra,d.pa);this.Vs.H(b.ra,b.pa);if(this.Us.ja<this.Vs.fa)return-1;if(this.Us.fa>this.Vs.ja)return 1;e=d.na==d.ma;var g=b.na==b.ma;if(e||g){if(e&&g)return 0;if(d.na==b.na&&d.ra==b.ra)return e?1:-1;if(d.ma==b.ma&&d.pa==b.pa)return e?-1:1}e=d.Te(this.Fh,
this.Us.fa);g=b.Te(this.Fh,this.Vs.fa);e==g&&(e=Math.min(d.ma,b.ma),g=.5*(e+this.Fh),g==this.Fh&&(g=e),e=d.Te(g,this.Us.fa),g=b.Te(g,this.Vs.fa));return e<g?-1:e>g?1:0};a.prototype.eL=function(b){this.Fh=b};return a}(),c=function(){function a(b){this.Ya=b;this.LI=new f.og;this.Jf=new f.b;this.fB=new f.uc}a.prototype.NY=function(b){this.Jf.K(b)};a.prototype.compare=function(b,d){this.Ya.ZB(b.ga(d),this.LI);b=this.LI.get();this.fB.H(b.ra,b.pa);if(this.Jf.x<this.fB.fa)return-1;if(this.Jf.x>this.fB.ja)return 1;
b=b.Te(this.Jf.y,this.Jf.x);return this.Jf.x<b?-1:this.Jf.x>b?1:0};return a}();R=function(){function a(){this.VH=this.Ji=this.Mi=this.WA=this.ro=this.Ee=this.Lc=this.ph=this.oe=null;this.Zo=this.Eg=-1;this.UH=!0;this.$A=!1;this.XA=NaN;this.Ti=new f.Od;this.kP=2147483647;this.jP=f.L.truncate(-2147483648);this.ig=this.he=this.Pl=this.Vq=this.Pm=this.Uq=this.wt=this.We=-1;this.sa=0}a.prototype.dz=function(b){this.XA=b};a.prototype.mn=function(){null==this.oe&&(this.oe=new f.ad(8));var b=this.oe.Ke();
this.oe.P(b,1,0);return b};a.prototype.PV=function(){null==this.Lc&&(this.Lc=new f.ad(8));var b=this.Lc.Ke();this.Lc.P(b,2,0);this.Lc.P(b,3,0);var d=this.Lc.Ke();this.Lc.P(d,2,0);this.Lc.P(d,3,0);this.NK(b,d);this.NK(d,b);return b};a.prototype.bJ=function(){null==this.Ee&&(this.Ee=new f.ad(8));var b=this.Ee.Ke();this.Ee.P(b,2,0);return b};a.prototype.wY=function(b,d){this.oe.P(b,7,d)};a.prototype.Cn=function(b,d){this.oe.P(b,2,d)};a.prototype.vY=function(b,d){this.oe.P(b,1,d)};a.prototype.OY=function(b,
d){this.oe.P(b,3,d)};a.prototype.LY=function(b,d){this.oe.P(b,4,d)};a.prototype.wr=function(b,d){this.oe.P(b,5,d)};a.prototype.sS=function(b){return this.oe.S(b,5)};a.prototype.uY=function(b,d){this.oe.P(b,6,d)};a.prototype.mO=function(b,d){this.uY(d,b)};a.prototype.MK=function(b,d){this.Lc.P(b,1,d)};a.prototype.NK=function(b,d){this.Lc.P(b,4,d)};a.prototype.dm=function(b,d){this.Lc.P(b,5,d)};a.prototype.cm=function(b,d){this.Lc.P(b,6,d)};a.prototype.CY=function(b,d){this.Lc.P(b,2,d)};a.prototype.Jx=
function(b,d){this.Lc.P(b,3,d)};a.prototype.xG=function(b){return this.Lc.S(b,3)};a.prototype.pu=function(b,d){this.Lc.P(b,7,d)};a.prototype.NL=function(b,d){if(-1!=this.ym(b))for(d=d?-1:b,b=this.ym(b);-1!=b;b=this.Rs(b))this.a.Qa(this.zj(b),this.Vq,d)};a.prototype.dy=function(b,d){-1!=b&&(this.NL(b,d),this.NL(this.wa(b),d))};a.prototype.nu=function(b,d){this.Ee.P(b,1,d)};a.prototype.bh=function(b,d){this.Ee.P(b,2,d)};a.prototype.zn=function(b,d){this.Ee.P(b,3,d);this.sY(b,this.rS(d));this.rY(d,b)};
a.prototype.rY=function(b,d){this.Ee.P(b,4,d)};a.prototype.sY=function(b,d){this.Ee.P(b,5,d)};a.prototype.HK=function(b,d){this.Ee.P(b,6,d)};a.prototype.FK=function(b,d){this.Ee.P(b,7,d)};a.prototype.EK=function(b,d){this.ro.write(b,d)};a.prototype.GK=function(b,d){this.WA.write(b,d)};a.prototype.TZ=function(b){var d=0,e=0,g=this.nG(b),h=new f.b,k=new f.b,m=new f.b;this.Es(g,h);k.K(h);var n=g;do this.xm(n,m),e+=f.b.vb(k,m),this.jf(this.wa(n))!=b&&(d+=(m.x-h.x-(k.x-h.x))*(m.y-h.y+(k.y-h.y))*.5),k.K(m),
n=this.kc(n);while(n!=g);this.ro.write(b,d);this.WA.write(b,e)};a.prototype.gW=function(b,d){var e=new l(this),g=new f.bk;g.Le(f.L.truncate(this.sa/2));g.kp(e);for(var h=new f.ha(0),k=this.ih(),m=null,n=0,p=new f.b,x=this.We;-1!=x;x=this.$f(x)){n++;if(0==(n&255)&&null!=d&&!d.progress(-1,-1))throw f.f.ED();var Q=this.Re(x);if(-1!=Q){h.Gh(0);if(!this.PZ(g,k,h,Q)){this.w(x,p);e.eL(p.y);var V=Q;do{var ca=this.Cb(V,k);-1!=ca&&(g.zd(ca,-1),this.Jb(V,k,-2));V=this.kc(this.wa(V))}while(Q!=V);V=Q;do ca=this.Cb(V,
k),-1==ca&&(ca=g.addElement(V,-1),h.add(ca)),V=this.kc(this.wa(V));while(Q!=V)}for(Q=h.size-1;0<=Q;Q--)ca=h.get(Q),V=g.ga(ca),this.Jb(this.wa(V),k,ca),this.fW(g,ca,b)}else-1==this.Iz(x)&&(null==m&&(m=new c(this)),this.w(x,p),m.NY(p),V=g.nY(m),Q=this.Pl,-1!=V&&(ca=g.ga(V),this.jf(ca)==this.jf(this.wa(ca))&&(ca=this.zG(g,V)),-1!=ca&&(Q=this.jf(ca))),this.mO(Q,x))}this.Uh(k)};a.prototype.fW=function(b,d,e){var g=b.ga(d),h=this.jf(g);if(-1==this.Yn(h)){var k=this.zG(b,d),m=this.wa(g),n=this.jf(m);this.eq(h);
this.eq(n);var p=this.Yn(h),x=this.Yn(n);-1==k&&-1==p&&(n==h?(this.zn(n,this.Pl),p=x=this.Pl):(-1==x&&(this.zn(n,this.Pl),x=this.Pl),this.zn(h,n),p=n));if(-1!=k){var Q=this.jf(k);-1==x&&(0>=this.eq(Q)?(x=this.Yn(Q),this.zn(n,x)):(this.zn(n,Q),x=Q),n==h&&(p=x))}-1==p&&this.QZ(h,n);0==e?this.AX(b,d,g,k,h,n):5==e?this.BX(b,d,g,m,h,n):4==e&&this.zX(g,k,h,n)}};a.prototype.AX=function(b,d,e,g,h,k){var m=this.mk(h);if(-1!=g){var n=this.mk(k),p=this.mk(this.jf(g));g=m&n&p;p^=p&this.lh(e);p|=g;0!=p&&(this.bh(k,
n|p),this.bh(h,p|m),m=m||p)}for(d=b.hb(d);-1!=d;d=b.hb(d)){g=b.ga(d);e=this.jf(this.wa(g));h=this.mk(e);k=this.lh(g);n=this.jf(g);p=this.mk(n);g=h&p&m;m^=m&k;m|=g;if(0==m)break;this.bh(e,h|m);this.bh(n,p|m)}};a.prototype.BX=function(b,d,e,g,h,k){if(h!=k){e=this.Cb(e,this.ig);e+=this.Cb(g,this.ig);g=0;var m=new f.ha(0),n=new f.ha(0);n.add(0);for(var p=b.sc(-1);p!=d;p=b.hb(p)){var x=b.ga(p),Q=this.wa(x),V=this.jf(x),ca=this.jf(Q);if(V!=ca){x=this.Cb(x,this.ig);x+=this.Cb(Q,this.ig);g+=x;Q=!1;0!=m.size&&
m.Gc()==ca&&(n.Rf(),m.Rf(),Q=!0);if(-1==this.Yn(ca))throw f.f.za();Q&&this.Yn(ca)==V||(n.add(g),m.add(V))}}g+=e;0!=m.size&&m.Gc()==k&&(n.Rf(),m.Rf());0!=g?0==n.Gc()&&(b=this.a.kd,b=this.Ea(b),this.bh(h,b)):0!=n.Gc()&&(b=this.a.kd,b=this.Ea(b),this.bh(h,b))}};a.prototype.zX=function(b,d,e,g){var h=this.Ea(this.a.kd);if(-1==d)this.bh(g,this.Zo),b=this.Cb(b,this.Eg),0!=(b&1)?this.bh(e,h):this.bh(e,this.Zo);else{var k=this.mk(g);0==k?(k=this.mk(this.jf(d)),this.bh(g,k),b=this.Cb(b,this.Eg),0!=(b&1)?this.bh(e,
k==h?this.Zo:h):this.bh(e,k)):(b=this.Cb(b,this.Eg),0!=(b&1)?this.bh(e,k==h?this.Zo:h):this.bh(e,k))}};a.prototype.PZ=function(b,d,e,g){var h=g,k=-1,m=-1,n=0;do{if(2==n)return!1;var p=this.Cb(h,d);if(-1!=p){if(-1!=k)return!1;k=p}else{if(-1!=m)return!1;m=h}n++;h=this.kc(this.wa(h))}while(g!=h);if(-1==m||-1==k)return!1;this.Jb(b.ga(k),d,-2);b.Tj(k,m);e.add(k);return!0};a.prototype.QZ=function(b,d){var e=this.eq(b);if(0!=e){var g=this.eq(d);0<e&&0>g?this.zn(b,d):0>e&&0<g?this.zn(b,d):(d=this.Yn(d),-1!=
d&&this.zn(b,d))}};a.prototype.FQ=function(b,d){this.Vq=this.a.Kd();for(var e=0,g=d.size;e<g;e++){var h=d.get(e),k=this.a.Na(h,this.Pm),m=this.a.Zf(this.a.cd(h)),n=this.a.dc(m);if(f.R.Bc(n)){var p=this.a.T(h);if(-1!=p){var x=this.a.Na(p,this.Pm);if(k!=x){var Q=this.PV(),V=this.wa(Q),ca=this.ph.Ke();this.ph.P(ca,0,h);this.ph.P(ca,1,-1);this.pu(Q,ca);this.MK(Q,k);ca=this.Re(k);-1==ca?(this.Cn(k,Q),this.dm(Q,V),this.cm(V,Q)):(k=this.ze(ca),this.dm(ca,V),this.cm(V,ca),this.cm(k,Q),this.dm(Q,k));this.MK(V,
x);k=this.Re(x);-1==k?(this.Cn(x,V),this.cm(Q,V),this.dm(V,Q)):(x=this.ze(k),this.dm(k,Q),this.cm(Q,k),this.cm(x,V),this.dm(V,x));m=this.Ea(m);0==b?(this.Jb(V,this.he,0),this.Jb(Q,this.he,1736==n?m:0)):5==b?(x=new f.b,this.a.w(h,x),h=new f.b,this.a.w(p,h),k=p=0,0>x.compare(h)?p=1:k=-1,this.Jb(V,this.he,0),this.Jb(Q,this.he,0),this.Jb(Q,this.ig,p),this.Jb(V,this.ig,k)):7==b?(this.Jb(V,this.he,this.Zo),this.Jb(Q,this.he,1736==n?m:0)):4==b&&(this.Jb(V,this.he,0),this.Jb(Q,this.he,0),this.Jb(Q,this.Eg,
1),this.Jb(V,this.Eg,1));n=1736==n?this.jP:0;this.Jx(Q,m|n);this.Jx(V,m|n)}}}}};a.prototype.nV=function(b,d){var e=this.ym(d);if(-1!=e){var g=this.ym(b);this.ph.P(e,1,g);this.pu(b,e);this.pu(d,-1)}b=this.wa(b);d=this.wa(d);e=this.ym(d);-1!=e&&(g=this.ym(b),this.ph.P(e,1,g),this.pu(b,e),this.pu(d,-1))};a.prototype.nZ=function(b){function d(za,Ba){return g.RP(za,Ba)}var e=new f.ha(0);e.Db(10);for(var g=this,h=this.We;-1!=h;h=this.$f(h)){e.clear(!1);var k=this.Re(h);if(-1!=k){var m=k;do e.add(m),m=this.kc(this.wa(m));
while(m!=k);if(1<e.size){m=!0;if(2<e.size)e.Zd(0,e.size,d),e.add(e.get(0));else if(0<this.QP(e.get(0),e.get(1))){var n=e.get(0);e.set(0,e.get(1));e.set(1,n)}else m=!1;for(var p=n=e.get(0),x=this.Df(p),Q=this.wa(p),V=-1,ca=1,ba=e.size;ca<ba;ca++){var ea=e.get(ca),da=this.wa(ea),ma=this.pk(da);if(ma==x&&ea!=p){if(0==b)V=this.xG(p)|this.xG(ea),this.Jx(p,V),this.Jx(Q,V),this.Jb(p,this.he,this.Cb(p,this.he)|this.Cb(ea,this.he)),this.Jb(Q,this.he,this.Cb(Q,this.he)|this.Cb(da,this.he));else if(-1!=this.ig)V=
this.Cb(p,this.ig)+this.Cb(ea,this.ig),da=this.Cb(Q,this.ig)+this.Cb(da,this.ig),this.Jb(p,this.ig,V),this.Jb(Q,this.ig,da);else{if(7==b){this.Ti=new f.Od(5,h,-1);return}-1!=this.Eg&&(V=this.Cb(p,this.Eg)+this.Cb(ea,this.Eg),da=this.Cb(Q,this.Eg)+this.Cb(da,this.Eg),this.Jb(p,this.Eg,V),this.Jb(Q,this.Eg,da))}this.nV(p,ea);this.pz(ea);V=p;e.set(ca,-1);ea==n&&(e.set(0,-1),n=-1)}else this.dy(V,!1),V=-1,p=ea,x=ma,Q=da}this.dy(V,!1);V=-1;if(m){n=-1;ca=0;for(ba=e.size;ca<ba;ca++)if(ea=e.get(ca),-1!=ea)if(-1==
n)p=n=ea,x=this.Df(p),Q=this.wa(p);else if(ea!=p&&(da=this.wa(ea),ma=this.pk(da),this.cm(Q,ea),this.dm(ea,Q),p=ea,x=ma,Q=da,7==b&&(this.Cb(ea,this.he)|this.Cb(this.ze(ea),this.he))==(this.Zo|1))){this.Ti=new f.Od(5,h,-1);return}this.Cn(h,n)}else{n=-1;ca=0;for(ba=e.size;ca<ba;ca++)if(ea=e.get(ca),-1!=ea){n=ea;break}k!=n&&this.Cn(h,n)}}}}};a.prototype.gP=function(){for(var b=-1,d=this.ih(),e=this.We;-1!=e;e=this.$f(e)){var g=this.Re(e);if(-1!=g){var h=g;do{if(1!=this.Cb(h,d)){var k=this.bJ();this.nu(k,
h);this.FK(k,b);-1!=b&&this.HK(b,k);b=k;var m=0,n=h;do m|=this.Cb(n,this.he),this.CY(n,k),this.Jb(n,d,1),n=this.kc(n);while(n!=h);this.bh(k,m)}h=this.kc(this.wa(h))}while(h!=g)}}k=this.bJ();this.nu(k,-1);this.FK(k,b);-1!=b&&this.HK(b,k);this.Pl=k;this.ro=f.ie.Af(this.Ee.size,NaN);this.WA=f.ie.Af(this.Ee.size,NaN);this.EK(this.Pl,Infinity);this.GK(this.Pl,Infinity);this.Uh(d)};a.prototype.FS=function(b,d,e){d=-1!=d?d:this.Re(b);if(-1==d)return-1;for(b=d;;){if(1!=this.Cb(d,e))return d;d=this.kc(this.wa(d));
if(d==b)return-1}};a.prototype.dY=function(){for(var b=this.ih(),d=this.We;-1!=d;d=this.$f(d))for(var e=-1;;){var g=this.FS(d,e,b);if(-1==g)break;e=this.kc(this.wa(g));for(var h=g;;){var k=this.kc(h),m=this.ze(h),n=this.wa(h);if(m==n){this.TQ(h);if(e==h||e==n)e=-1;if(h==g||m==g){g=k;if(h==g||m==g)break;h=k;continue}}else this.Jb(h,b,1);h=k;if(h==g)break}}};a.prototype.wC=function(b,d,e,g,h){this.ah();this.UH=h;this.a=b;this.Uq=this.a.NF();b=new f.ha(0);b.Db(null!=e?this.a.D(e.get(0)):this.a.pd);var k=
0,m=1,n=null!=e?e.get(0):this.a.kd;for(h=1;-1!=n;){this.a.LK(n,this.Uq,m);m<<=1;for(var p=this.a.Kb(n);-1!=p;p=this.a.Qb(p))for(var x=this.a.Za(p),Q=0,V=this.a.Ha(p);Q<V;Q++)b.add(x),x=this.a.T(x);f.R.lo(this.a.dc(n))||(k+=this.a.$(n));null!=e?(n=h<e.size?e.get(h):-1,h++):n=this.a.Ae(n)}this.Zo=m;this.sa=b.size;this.a.Vx(b,this.sa);null==this.ph&&(this.ph=new f.ad(2),this.oe=new f.ad(8),this.Lc=new f.ad(8),this.Ee=new f.ad(8));this.ph.Le(this.sa);f.Ep.Sp(g);this.oe.Le(this.sa+10);this.Lc.Le(2*this.sa+
32);this.Ee.Le(Math.max(32,k));this.Pm=this.a.Kd();e=new f.b;h=0;k=new f.b;e.Tc();for(m=0;m<=this.sa;m++)if(m<this.sa?(x=b.get(m),this.a.w(x,k)):k.Tc(),!e.qb(k)){if(h<m){x=this.mn();for(V=Q=-1;h<m;h++)V=b.get(h),this.a.Qa(V,this.Pm,x),n=this.ph.Ke(),this.ph.P(n,0,V),this.ph.P(n,1,Q),Q=n,p=this.a.cd(V),n=this.a.Zf(p),n=this.Ea(n),this.vY(x,this.Bd(x)|n);this.wY(x,Q);this.wr(x,this.a.Ua(V));-1!=this.wt&&this.LY(this.wt,x);this.OY(x,this.wt);this.wt=x;-1==this.We&&(this.We=x)}h=m;e.K(k)}f.Ep.Sp(g);this.he=
this.ih();5==d&&(this.ig=this.ih());4==d&&(this.Eg=this.ih());this.FQ(d,b);0==this.Ti.pi&&(this.nZ(d),0==this.Ti.pi&&(isNaN(this.XA)||this.HP()?(this.gP(),0==this.Ti.pi&&(this.Uh(this.he),this.he=-1,this.UH&&this.gW(d,g))):this.$A=!0))};a.prototype.pz=function(b){var d=this.kc(b),e=this.ze(b),g=this.wa(b),h=this.kc(g),k=this.ze(g);d!=g&&(this.cm(k,d),this.dm(d,k));e!=g&&(this.cm(e,h),this.dm(h,e));e=this.pk(b);this.Re(e)==b&&(h!=b?this.Cn(e,h):this.Cn(e,-1));h=this.pk(g);this.Re(h)==g&&(d!=g?this.Cn(h,
d):this.Cn(h,-1));this.Lc.hd(b);this.Lc.hd(g)};a.prototype.zG=function(b,d){for(;;)if(d=b.Be(d),-1!=d){var e=b.ga(d);if(this.jf(e)!=this.jf(this.wa(e)))return e}else return-1};a.prototype.xr=function(b,d){var e;void 0===e&&(e=!0);this.wC(b,0,null,d,e)};a.prototype.zK=function(b,d,e){var g=new f.ha(0);g.add(d);this.wC(b,4,g,e,1736==b.dc(d))};a.prototype.AK=function(b,d,e){var g=new f.ha(0);g.add(d);this.wC(b,5,g,e,!0)};a.prototype.ah=function(){null!=this.a&&(-1!=this.Uq&&(this.a.cY(this.Uq),this.Uq=
-1),-1!=this.Pm&&(this.a.Xd(this.Pm),this.Pm=-1),-1!=this.Vq&&(this.a.Xd(this.Vq),this.Vq=-1),-1!=this.he&&(this.Uh(this.he),this.he=-1),-1!=this.ig&&(this.Uh(this.ig),this.ig=-1),-1!=this.Eg&&(this.Uh(this.Eg),this.Eg=-1),this.a=null,this.oe.rj(!0),this.ph.rj(!0),this.wt=this.We=-1,null!=this.Lc&&this.Lc.rj(!0),null!=this.Mi&&(this.Mi.length=0),null!=this.Ji&&(this.Ji.length=0),null!=this.VH&&(this.VH.length=0),null!=this.Ee&&this.Ee.rj(!0),this.Pl=-1,this.ro=null)};a.prototype.Re=function(b){return this.oe.S(b,
2)};a.prototype.w=function(b,d){this.a.PG(this.sS(b),d)};a.prototype.Bd=function(b){return this.oe.S(b,1)};a.prototype.$f=function(b){return this.oe.S(b,4)};a.prototype.Iz=function(b){return this.oe.S(b,6)};a.prototype.wm=function(b){return this.oe.S(b,7)};a.prototype.Rs=function(b){return this.ph.S(b,1)};a.prototype.zj=function(b){return this.ph.S(b,0)};a.prototype.tg=function(b,d){d=this.Ji[d];return d.size<=b?-1:d.read(b)};a.prototype.Dn=function(b,d,e){d=this.Ji[d];d.size<=b&&d.resize(this.oe.size,
-1);d.write(b,e)};a.prototype.Xp=function(){null==this.Ji&&(this.Ji=[]);for(var b=f.ha.Af(this.oe.Og,-1),d=0,e=this.Ji.length;d<e;d++)if(null==this.Ji[d])return this.Ji[d]=b,d;this.Ji.push(b);return this.Ji.length-1};a.prototype.Yp=function(b){this.Ji[b]=null};a.prototype.pk=function(b){return this.Lc.S(b,1)};a.prototype.Df=function(b){return this.pk(this.wa(b))};a.prototype.wa=function(b){return this.Lc.S(b,4)};a.prototype.ze=function(b){return this.Lc.S(b,5)};a.prototype.kc=function(b){return this.Lc.S(b,
6)};a.prototype.jf=function(b){return this.Lc.S(b,2)};a.prototype.kf=function(b){return this.mk(this.Lc.S(b,2))};a.prototype.ym=function(b){return this.Lc.S(b,7)};a.prototype.Es=function(b,d){this.w(this.pk(b),d)};a.prototype.xm=function(b,d){this.w(this.Df(b),d)};a.prototype.lh=function(b){return this.Lc.S(b,3)&this.kP};a.prototype.Cb=function(b,d){d=this.Mi[d];return d.size<=b?-1:d.read(b)};a.prototype.Jb=function(b,d,e){d=this.Mi[d];d.size<=b&&d.resize(this.Lc.size,-1);d.write(b,e)};a.prototype.ih=
function(){null==this.Mi&&(this.Mi=[]);for(var b=f.ha.Af(this.Lc.Og,-1),d=0,e=this.Mi.length;d<e;d++)if(null==this.Mi[d])return this.Mi[d]=b,d;this.Mi.push(b);return this.Mi.length-1};a.prototype.Uh=function(b){this.Mi[b]=null};a.prototype.TQ=function(b){var d=this.jf(b),e=this.kc(b);e==this.wa(b)&&(e=this.kc(e),e==b&&(e=-1));this.nG(d)==b&&this.nu(d,e);e=this.ro.read(d);isNaN(e)||(this.EK(d,NaN),this.GK(d,NaN));this.dy(b,!0);this.pz(b)};a.prototype.UQ=function(b){for(var d=0,e=b.size;d<e;d++){var g=
b.get(d),h=this.jf(this.wa(g));this.nu(this.jf(g),-1);this.nu(h,-1);this.dy(g,!0);this.pz(g)}};a.prototype.nG=function(b){return this.Ee.S(b,1)};a.prototype.mk=function(b){return this.Ee.S(b,2)};a.prototype.Yn=function(b){return this.Ee.S(b,3)};a.prototype.rS=function(b){return this.Ee.S(b,4)};a.prototype.eq=function(b){var d=this.ro.read(b);isNaN(d)&&(this.TZ(b),d=this.ro.read(b));return d};a.prototype.Ea=function(b){return this.a.wG(b,this.Uq)};a.prototype.Qe=function(b){return this.a.Na(b,this.Pm)};
a.prototype.IS=function(b){return this.a.Na(b,this.Vq)};a.prototype.HS=function(b,d){var e=this.Re(b);if(-1==e)return-1;var g=e,h=-1,k=-1;do{if(this.Df(g)==d)return g;if(-1==h){h=this.Re(d);if(-1==h)break;k=h}if(this.Df(k)==b)return g=this.wa(k);g=this.kc(this.wa(g));k=this.kc(this.wa(k))}while(g!=e&&k!=h);return-1};a.prototype.ZB=function(b,d){d.ps();d=d.get();var e=new f.b;this.Es(b,e);d.Fc(e);this.xm(b,e);d.Sc(e)};a.prototype.RP=function(b,d){if(b==d)return 0;var e=new f.b;this.xm(b,e);var g=new f.b;
this.xm(d,g);if(e.qb(g))return 0;d=new f.b;this.Es(b,d);b=new f.b;b.tc(e,d);e=new f.b;e.tc(g,d);return f.b.Wr(b,e)};a.prototype.QP=function(b,d){if(b==d)return 0;var e=new f.b;this.xm(b,e);var g=new f.b;this.xm(d,g);if(e.qb(g))return 0;d=new f.b;this.Es(b,d);b=new f.b;b.tc(e,d);e=new f.b;e.tc(g,d);return 0<=e.y&&0<b.y?f.b.Wr(b,e):0};a.prototype.HP=function(){for(var b=f.Tb.Wx(this.XA),d=new f.b,e=new f.b,g=new f.b,h=new f.b,k=new f.b,m=this.We;-1!=m;m=this.$f(m)){var n=this.Re(m);if(-1!=n){var p=
n;this.Es(p,d);this.xm(p,e);k.tc(e,d);var x=k.En();do{var Q=p;p=this.kc(this.wa(p));if(p!=Q){this.xm(p,g);h.tc(g,d);Q=h.En();var V=h.Di(k);if(V*V/(Q*x)*Math.min(Q,x)<=b)return!1;k.K(h);x=Q;e.K(g)}}while(p!=n)}}return!0};return a}();f.Ou=R})(fa||(fa={}));(function(f){var R=function(){function l(){this.h=null;this.bI=new f.b;this.cI=new f.b;this.wh=null;this.bt=!1;this.Bo=-1}l.prototype.mf=function(c){return c<this.wh.length?this.wh[c]:!1};l.prototype.jl=function(c,a,b,d){var e=f.R.Se(this.h.a.dc(b));
if(2==f.R.Se(this.h.a.dc(a))&&1==e)this.QQ(c,a,b,d);else throw f.f.za();};l.prototype.xr=function(c,a){null==this.h&&(this.h=new f.Ou);this.h.xr(c,a)};l.prototype.yr=function(c,a,b){f.$j.U(c,a,b,!0);for(a=c.kd;-1!=a;a=c.Ae(a))1736==c.dc(a)&&f.Kn.U(c,a,-1,this.bt,b);this.xr(c,b)};l.prototype.xF=function(c,a,b,d,e){var g=this.h.a;if(1736==g.dc(c))for(c=g.Kb(c);-1!=c;c=g.Qb(c)){var h=g.Za(c);this.h.Qe(h);this.h.Qe(g.T(h));var k=this.h.IS(h);if(-1!=k){var m=this.h.Cb(k,b);if(1!=m&&2!=m)if(this.mf(this.h.kf(k))){this.h.Jb(k,
b,1);m=g.Ef(a,-1);var n=k,p=this.h.Qe(h),x=1;do{var Q=this.Em(h,e);g.oj(m,Q);-1!=d&&this.h.Dn(p,d,1);this.h.Jb(n,b,1);n=this.h.kc(n);do{Q=1==x?g.T(h):g.Ma(h);var V=-1!=Q?this.h.Qe(Q):-1}while(V==p);var ca=this.h.pk(n);if(ca!=V){do Q=1==x?g.Ma(h):g.T(h),V=-1!=Q?this.h.Qe(Q):-1;while(V==p);ca!=V?(V=ca,Q=this.h.zj(this.h.wm(V))):x=-x}p=V;h=Q}while(n!=k);g.An(m,!0)}else this.h.Jb(k,b,2)}}};l.prototype.SF=function(){for(var c=this.h.ih(),a=new f.ha(0),b=this.h.We;-1!=b;b=this.h.$f(b)){var d=this.h.Re(b),
e=d;if(-1!=d){do{if(1!=this.h.Cb(e,c)){var g=this.h.wa(e);this.h.Jb(g,c,1);this.h.Jb(e,c,1);this.mf(this.h.kf(e))&&this.mf(this.h.kf(g))&&a.add(e)}e=this.h.kc(this.h.wa(e))}while(e!=d)}}this.h.Uh(c);this.h.UQ(a)};l.prototype.Em=function(c,a){return-1==a?c:this.tT(c,a)};l.prototype.tT=function(c,a){var b=this.h.a,d=this.h.wm(this.h.Qe(c));do{var e=this.h.zj(d);if(b.Zf(b.cd(e))==a)return e;d=this.h.Rs(d)}while(-1!=d);return c};l.prototype.Ir=function(c,a,b){this.SF();var d=this.h.a,e=d.Pg(1736),g=this.h.ih();
this.AL(c,a,e,b,g,-1);this.h.Uh(g);f.Kn.U(d,e,1,this.bt,null);return e};l.prototype.AL=function(c,a,b,d,e,g){this.xF(c,b,e,g,d);-1!=a&&this.xF(a,b,e,g,d);c=this.h.a;for(a=this.h.We;-1!=a;a=this.h.$f(a)){var h=this.h.Re(a);if(-1!=h){var k=h;do{var m=this.h.Cb(k,e);if(1!=m&&2!=m)if(this.mf(this.h.kf(k))){m=c.Ef(b,-1);var n=k;do{var p=this.h.ym(n);-1!=p?p=this.h.zj(p):(p=this.h.zj(this.h.ym(this.h.wa(n))),p=this.h.a.T(p));p=this.Em(p,d);c.oj(m,p);this.h.Jb(n,e,1);-1!=g&&(p=this.h.Qe(p),this.h.Dn(p,g,
1));n=this.h.kc(n)}while(n!=k);c.An(m,!0)}else this.h.Jb(k,e,2);k=this.h.kc(this.h.wa(k))}while(k!=h)}}};l.prototype.HZ=function(c,a,b){var d=this.h.a,e=d.Pg(1736),g=d.Pg(1607),h=d.Pg(550);this.SF();var k=-1,m=this.h.ih(),n=this.h.Xp();this.AL(c,a,e,b,m,n);for(c=this.h.We;-1!=c;c=this.h.$f(c))if(a=this.h.Re(c),-1!=a){var p=a;do{var x=this.h.Cb(p,m),Q=this.h.Cb(this.h.wa(p),m);x|=Q;if(2==x)if(x=this.h.lh(p),this.mf(x)){var V=d.Ef(g,-1),ca=p;x=this.Fx(c,d);x=this.Em(x,b);d.oj(V,x);this.h.Dn(c,n,1);
do{x=this.h.Df(ca);Q=this.Fx(x,d);Q=this.Em(Q,b);d.oj(V,Q);this.h.Jb(ca,m,1);this.h.Jb(this.h.wa(ca),m,1);this.h.Dn(x,n,1);ca=this.h.kc(ca);x=this.h.Cb(ca,m);Q=this.h.Cb(this.h.wa(ca),m);x|=Q;if(2!=x)break;x=this.h.lh(ca);if(!this.mf(x)){this.h.Jb(ca,m,1);this.h.Jb(this.h.wa(ca),m,1);break}}while(ca!=p)}else this.h.Jb(p,m,1),this.h.Jb(this.h.wa(p),m,1);p=this.h.kc(this.h.wa(p))}while(p!=a)}for(c=this.h.We;-1!=c;c=this.h.$f(c))x=this.h.tg(c,n),1!=x&&(x=this.h.Bd(c),this.mf(x)&&(-1==k&&(k=d.Ef(h,-1)),
a=this.h.wm(c),-1!=a&&(a=this.h.zj(a),x=this.Em(a,b),d.oj(k,x))));this.h.Yp(n);this.h.Uh(m);f.Kn.U(d,e,1,this.bt,null);b=[];b[0]=h;b[1]=g;b[2]=e;return b};l.prototype.Fx=function(c,a){var b=-1;for(c=this.h.wm(c);-1!=c;c=this.h.Rs(c)){var d=this.h.zj(c);-1==b&&(b=d);var e=this.h.Ea(a.Zf(a.cd(d)));if(this.mf(e)){b=d;break}}return b};l.prototype.WB=function(c,a){for(var b=this.h.pk(a),d=this.h.Df(a),e=0,g=0,h=this.h.wm(b);-1!=h;h=this.h.Rs(h)){var k=this.h.zj(h),m=c.cd(k),n=this.h.Ea(c.Zf(m)),p=c.T(k),
x=c.Ma(k);m=c.Za(m);m==k&&(this.Bo=a);-1!=p&&this.h.Qe(p)==d?(e++,this.mf(n)&&(m==p&&(this.Bo=this.h.kc(a)),g++)):-1!=x&&this.h.Qe(x)==d&&(e--,this.mf(n)&&(m==x&&(this.Bo=this.h.kc(a)),g--))}this.h.w(b,this.bI);this.h.w(d,this.cI);c=f.b.vb(this.bI,this.cI);return(0!=g?g:e)*c};l.prototype.gq=function(c){return this.h.lh(c)|this.h.kf(c)|this.h.kf(this.h.wa(c))};l.prototype.EL=function(c){for(var a=this.h.wa(this.h.ze(c)),b=-1;a!=c;){if(this.mf(this.gq(a))){if(-1!=b)return-1;b=a}a=this.h.wa(this.h.ze(a))}return-1!=
b?this.h.wa(b):-1};l.prototype.FL=function(c){for(var a=this.h.wa(this.h.kc(c)),b=-1;a!=c;){if(this.mf(this.gq(a))){if(-1!=b)return-1;b=a}a=this.h.wa(this.h.kc(a))}return-1!=b?this.h.wa(b):-1};l.prototype.qK=function(c,a,b,d,e){var g=this.h.a,h=c,k=this.h.wa(h);this.h.Jb(h,b,1);this.h.Jb(k,b,1);var m=this.WB(g,h);this.Bo=-1;for(var n=h,p=-1,x=!1,Q=1;;){var V=this.h.ze(h);if(V==k)break;k=this.h.kc(k);if(this.h.wa(V)!=k)if(h=this.EL(h),-1==h)break;else x=!0,k=this.h.wa(h);else h=V;if(h==c){p=c;break}V=
this.gq(h);if(!this.mf(V))break;this.h.Jb(h,b,1);this.h.Jb(k,b,1);n=h;m+=this.WB(g,h);Q++}if(-1==p)for(h=c,k=this.h.wa(h),p=h;;){c=this.h.kc(h);if(c==k)break;k=this.h.ze(k);if(this.h.wa(c)!=k)if(h=this.FL(h),-1==h){x=!0;break}else k=this.h.wa(h);else h=c;V=this.gq(h);if(!this.mf(V))break;this.h.Jb(h,b,1);this.h.Jb(k,b,1);p=h;m+=this.WB(g,h);Q++}else if(-1!=this.Bo&&(n=this.Bo,p=this.h.ze(this.Bo),this.h.wa(p)!=this.h.kc(this.h.wa(n))&&(p=this.EL(n),-1==p)))throw f.f.za();0<=m||(h=p,p=this.h.wa(n),
n=this.h.wa(h));b=g.Ef(a,-1);h=n;n=this.h.pk(n);x=this.h.Df(p)==n&&x;m=this.Fx(n,g);m=this.Em(m,e);g.oj(b,m);-1!=d&&this.h.Dn(n,d,1);n=0;for(Q=x?f.L.truncate((Q+1)/2):-1;;){c=this.h.Df(h);m=this.Fx(c,g);m=this.Em(m,e);g.oj(b,m);n++;-1!=d&&this.h.Dn(c,d,1);x&&n==Q&&(b=g.Ef(a,-1),g.oj(b,m));if(h==p)break;c=this.h.kc(h);if(this.h.ze(this.h.wa(h))!=this.h.wa(c)){if(h=this.FL(h),-1==h)throw f.f.za();}else h=c}};l.prototype.Jr=function(c){for(var a=this.h.a.Pg(1607),b=this.h.ih(),d=this.h.We;-1!=d;d=this.h.$f(d)){var e=
this.h.Re(d),g=e;do 1!=this.h.Cb(g,b)&&this.mf(this.gq(g))&&this.qK(g,a,b,-1,c),g=this.h.kc(this.h.wa(g));while(g!=e)}this.h.Uh(b);return a};l.prototype.IZ=function(c){for(var a=this.h.a,b=a.Pg(1607),d=a.Pg(550),e=this.h.ih(),g=this.h.Xp(),h=-1,k=this.h.We;-1!=k;k=this.h.$f(k)){var m=this.h.Re(k),n=m;do{var p=this.h.Cb(n,e);1!=p&&(p=this.gq(n),this.mf(p)&&this.qK(n,b,e,g,c));n=this.h.kc(this.h.wa(n))}while(n!=m)}for(k=this.h.We;-1!=k;k=this.h.$f(k))p=this.h.tg(k,g),1!=p&&(p=this.h.Bd(k),this.mf(p)&&
(-1==h&&(h=a.Ef(d,-1)),m=this.h.wm(k),-1!=m&&(m=this.h.zj(m),m=this.Em(m,c),a.oj(h,m))));this.h.Uh(e);this.h.Yp(g);c=[];c[0]=d;c[1]=b;return c};l.prototype.up=function(){for(var c=this.h.a,a=c.Pg(550),b=c.Ef(a,-1),d=this.h.We;-1!=d;d=this.h.$f(d))if(this.mf(this.h.Bd(d))){for(var e=-1,g=this.h.wm(d);-1!=g;g=this.h.Rs(g)){var h=this.h.zj(g);-1==e&&(e=h);var k=this.h.Ea(c.Zf(c.cd(h)));if(this.mf(k)){e=h;break}}c.oj(b,e)}return a};l.prototype.eo=function(c){this.wh=[];for(var a=0;a<c;a++)this.wh[a]=
!1};l.IJ=function(c,a,b,d){var e=c.Ga(),g=Array(1E3);f.L.Gv(g,null);var h=f.L.Xf(1E3,0),k=c.D(),m=!0,n=2==a.pb();if(1!=a.pb()&&2!=a.pb())throw f.f.za();for(var p=0;p<k;){var x=f.L.truncate(c.CX(g,p)-p);n?f.Zc.yL(a,g,x,b,h):f.Zc.zL(a,g,x,b,h);for(var Q=0,V=0;V<x;V++){var ca=0==h[V];d||(ca=!ca);ca&&(m&&(m=!1,e.yd(c,0,p)),Q!=V&&e.yd(c,p+Q,p+V),Q=V+1)}m||Q==x||e.yd(c,p+Q,p+x);p+=x}return m?c:e};l.lH=function(c,a,b){return c instanceof f.Hd?l.IJ(c,a,b,!0):a instanceof f.Ra?c.u()||a.u()?c.Ga():f.$j.eJ(b,
c,a)?f.$j.MP(c,a):c.Ga():l.JJ(c,a,b,!0)};l.gw=function(c,a,b,d){var e=new f.g;c.s(e);var g=new f.g;a.s(g);var h=new f.g;h.H(e);h.Nb(g);b=f.la.Qd(b,h,!0);h=new f.g;h.H(g);g=f.la.es(b);h.O(g,g);if(!e.isIntersecting(h)){if(c.pb()<=a.pb())return l.kg(l.vd(c.Ga()),c,"\x26");if(c.pb()>a.pb())return l.kg(l.vd(a.Ga()),c,"\x26")}g=new l;e=new f.Yc;h=e.Bb(l.vd(c));a=e.Bb(l.vd(a));g.yr(e,b,d);d=g.gw(h,a);c=l.kg(e.ye(d),c,"\x26");f.R.Bc(c.F())&&(c.Jg(2,b),1736==c.F()&&c.cl());return c};l.JJ=function(c,a,b,d){if(c.u())return c.Ga();
if(a.u())return d?c.Ga():null;var e=[null],g=[0],h=2==a.pb();if(1!=a.pb()&&2!=a.pb())throw f.f.za();e[0]=c.w();h?f.Zc.yL(a,e,1,b,g):f.Zc.zL(a,e,1,b,g);a=0==g[0];d||(a=!a);return a?c.Ga():c};l.T_=function(c,a,b){return c instanceof f.Hd?l.IJ(c,a,b,!1):a instanceof f.Ra?c.u()?c.Ga():a.u()?c:f.$j.eJ(b,c,a)?c.Ga():c:l.JJ(c,a,b,!1)};l.prototype.jJ=function(c,a,b,d,e){if(c.u())return c;var g=new f.Yc;c=g.Bb(c);return this.Tk(g,c,a,b,d,e)};l.prototype.eW=function(c,a,b,d,e,g){if(e&&550!=c.dc(a)){var h=new f.yD;
h.yZ(c,b);h.Tg?(f.$j.U(c,b,g,!0),e=!1):this.h.dz(b)}else f.$j.U(c,b,g,!0),e=!1;d&&550!=c.dc(a)?this.h.AK(c,a,g):this.h.zK(c,a,g);if(this.h.$A)return this.h.ah(),this.h=null,this.Tk(c,a,b,d,!1,g);this.h.dz(NaN);g=this.h.Ea(a);this.eo(g+1);this.wh[g]=!0;if(1736==c.dc(a)||d&&550!=c.dc(a))return c.np(a,0),a=this.Ir(a,-1,-1),c=c.ye(a),c.np(0),e?c.Jg(1,0):(c.Jg(2,b),c.cl()),c;if(1607==c.dc(a))return a=this.Jr(-1),c=c.ye(a),e||c.Jg(2,b),c;if(550==c.dc(a))return a=this.up(),c=c.ye(a),e||c.Jg(2,b),c;throw f.f.za();
};l.prototype.Tk=function(c,a,b,d,e,g){this.h=new f.Ou;try{return this.eW(c,a,b,d,e,g)}finally{this.h.ah()}};l.Tk=function(c,a,b,d,e){return(new l).jJ(c,a,b,d,e)};l.prototype.dW=function(c,a,b,d){this.bt=c;this.h=new f.Ou;c=a.$n(b);var e=a.dc(b);1!=c||550==e?this.h.zK(a,b,d):this.h.AK(a,b,d);if(!this.h.$A)if(this.h.dz(NaN),d=this.h.Ea(b),this.eo(d+1),this.wh[d]=!0,1736==a.dc(b)||1==c&&550!=a.dc(b))a.np(b,0),d=this.Ir(b,-1,-1),a.QC(d,b),a.kC(d);else if(1607==a.dc(b))d=this.Jr(-1),a.QC(d,b),a.kC(d);
else if(550==a.dc(b))d=this.up(),a.QC(d,b),a.kC(d);else throw f.f.Y("internal error");};l.NC=function(c,a,b,d){var e=new l;e.bt=!0;return e.jJ(c,a,!1,b,d)};l.prototype.tm=function(c,a){var b=f.R.Se(this.h.a.dc(c)),d=f.R.Se(this.h.a.dc(a));if(b>d)return c;var e=this.h.Ea(c),g=this.h.Ea(a);this.eo((e|g)+1);this.wh[this.h.Ea(c)]=!0;if(2==b&&2==d)return this.Ir(c,a,-1);if(1==b&&2==d||1==b&&1==d)return this.Jr(-1);if(0==b)return this.up();throw f.f.za();};l.prototype.RF=function(c,a){var b=f.R.Se(this.h.a.dc(c)),
d=f.R.Se(this.h.a.dc(a));if(b>d)return c;if(b<d)return a;var e=this.h.Ea(c),g=this.h.Ea(a);this.eo((e|g)+1);this.wh[this.h.Ea(c)]=!0;this.wh[this.h.Ea(a)]=!0;this.wh[this.h.Ea(c)|this.h.Ea(a)]=!0;if(2==b&&2==d)return this.Ir(c,a,-1);if(1==b&&1==d)return this.Jr(-1);if(0==b&&0==d)return this.up();throw f.f.za();};l.prototype.gw=function(c,a){var b=f.R.Se(this.h.a.dc(c)),d=f.R.Se(this.h.a.dc(a)),e=this.h.Ea(c),g=this.h.Ea(a);this.eo((e|g)+1);this.wh[this.h.Ea(c)|this.h.Ea(a)]=!0;e=-1;1<this.h.a.Pt.Ca&&
(e=c);if(2==b&&2==d)return this.Ir(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.Jr(e);if(0==b||0==d)return this.up();throw f.f.za();};l.prototype.wA=function(c,a){var b=f.R.Se(this.h.a.dc(c)),d=f.R.Se(this.h.a.dc(a)),e=this.h.Ea(c),g=this.h.Ea(a);this.eo((e|g)+1);this.wh[this.h.Ea(c)|this.h.Ea(a)]=!0;e=-1;1<this.h.a.Pt.Ca&&(e=c);if(2==b&&2==d)return this.HZ(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.IZ(e);if(0==b||0==d)return c=[],c[0]=this.up(),c;throw f.f.za();};l.prototype.tp=function(c,a){var b=
f.R.Se(this.h.a.dc(c)),d=f.R.Se(this.h.a.dc(a)),e=this.h.Ea(c),g=this.h.Ea(a);this.eo((e|g)+1);this.wh[this.h.Ea(c)]=!0;this.wh[this.h.Ea(a)]=!0;if(2==b&&2==d)return this.Ir(c,a,-1);if(1==b&&1==d)return this.Jr(-1);if(0==b&&0==d)return this.up();throw f.f.za();};l.vd=function(c){var a=c.F();return 197==a?(a=new f.Fa(c.description),c.u()||a.bd(c,!1),a):33==a?(a=new f.Hd(c.description),c.u()||a.add(c),a):322==a?(a=new f.Oa(c.description),c.u()||a.$b(c,!0),a):c};l.kg=function(c,a,b){var d=c.F();return 197==
d?(a=new f.Fa(c.description),c.u()||a.bd(c,!1),a):33!=d||"|"!=b&&"^"!=b?322==d?(a=new f.Oa(c.description),c.u()||a.$b(c,!0),a):33==d&&"-"==b&&33==a.F()||550==d&&"\x26"==b&&33==a.F()?(a=new f.Ra(c.description),c.u()||c.ne(0,a),a):c:(a=new f.Hd(c.description),c.u()||a.add(c),a)};l.tm=function(c,a,b,d){if(c.u()||a.u()||c.pb()>a.pb())return l.kg(l.vd(c),c,"-");var e=new f.g;c.s(e);var g=new f.g;a.s(g);if(!e.isIntersecting(g))return l.kg(l.vd(c),c,"-");var h=new f.g;h.H(e);h.Nb(g);b=f.la.Qd(b,h,!0);g=
new l;e=new f.Yc;h=e.Bb(l.vd(c));a=e.Bb(l.vd(a));g.yr(e,b,d);d=g.tm(h,a);d=e.ye(d);c=l.kg(d,c,"-");f.R.Bc(c.F())&&(c.Jg(2,b),1736==c.F()&&c.cl());return c};l.RF=function(c,a){if(c.pb()>a.pb())return l.kg(l.vd(c),c,"|");if(c.pb()<a.pb()||c.u())return l.kg(l.vd(a),c,"|");if(a.u())return l.kg(l.vd(c),c,"|");var b=new f.g;c.s(b);var d=new f.g;a.s(d);var e=new f.g;e.H(b);e.Nb(d);e=f.la.Qd(void 0,e,!0);if(!b.isIntersecting(d.KS(e,e)))switch(c=l.vd(c),e=l.vd(a),c.F()){case 550:return c=f.R.$d(c),c.yd(e,
0,-1),c;case 1607:return c=f.R.$d(c),c.add(e,!1),c;case 1736:return c=f.R.$d(c),c.add(e,!1),c;default:throw f.f.za();}d=new l;b=new f.Yc;var g=b.Bb(l.vd(c));a=b.Bb(l.vd(a));d.yr(b,e,void 0);a=d.RF(g,a);c=l.kg(b.ye(a),c,"|");f.R.Bc(c.F())&&(c.Jg(2,e),1736==c.F()&&c.cl());return c};l.fR=function(c,a,b){if(2>c.length)throw f.f.I("not enough geometries to dissolve");for(var d=0,e=0,g=c.length;e<g;e++)d=Math.max(c[e].pb(),d);var h=new f.g;h.Ka();var k=new f.Yc,m=-1,n=0,p=-1;e=0;for(g=c.length;e<g;e++)if(c[e].pb()==
d)if(c[e].u())-1==p&&(p=e);else{p=e;-1==m?m=k.Bb(l.vd(c[e])):k.FO(m,l.vd(c[e]));var x=new f.g;c[e].Zb(x);h.Nb(x);n++}if(2>n)return l.vd(c[p]);c=2==d;a=f.la.Qd(0==d?a:null,h,!0);return(new l).Tk(k,m,a,c,!0,b)};l.wA=function(c,a,b,d){var e=[null,null,null],g=new f.g;c.s(g);var h=new f.g;a.s(h);var k=new f.g;k.H(g);k.Nb(h);b=f.la.Qd(b,k,!0);k=new f.g;k.H(h);h=f.la.es(b);k.O(h,h);if(!g.isIntersecting(k)){if(c.pb()<=a.pb())return c=l.kg(l.vd(c.Ga()),c,"\x26"),e[c.pb()]=c,e;if(c.pb()>a.pb())return c=l.kg(l.vd(a.Ga()),
c,"\x26"),e[c.pb()]=c,e}h=new l;g=new f.Yc;k=g.Bb(l.vd(c));a=g.Bb(l.vd(a));h.yr(g,b,d);d=h.wA(k,a);for(a=0;a<d.length;a++)h=l.kg(g.ye(d[a]),c,"\x26"),f.R.Bc(h.F())&&(h.Jg(2,b),1736==h.F()&&h.cl()),e[h.pb()]=h;return e};l.tp=function(c,a,b,d){if(c.pb()>a.pb())return l.kg(l.vd(c),c,"^");if(c.pb()<a.pb()||c.u())return l.kg(l.vd(a),c,"^");if(a.u())return l.kg(l.vd(c),c,"^");var e=new f.g;c.s(e);var g=new f.g;a.s(g);var h=new f.g;h.H(e);h.Nb(g);b=f.la.Qd(b,h,!0);g=new l;e=new f.Yc;h=e.Bb(l.vd(c));a=e.Bb(l.vd(a));
g.yr(e,b,d);d=g.tp(h,a);c=l.kg(e.ye(d),c,"^");f.R.Bc(c.F())&&(c.Jg(2,b),1736==c.F()&&c.cl());return c};l.w_=function(c,a,b){a=a.F();b=b.F();return 550==c.F()&&(33==a||33==b)&&1>=c.D()?(b=new f.Ra(c.description),c.u()||c.ne(0,b),b):c};l.prototype.XR=function(c,a){var b=this.h.a;c=b.Ef(c,-1);for(var d=a.size,e=0;e<d;e++){var g=a.get(e);b.oj(c,g)}b.An(c,!0)};l.prototype.DY=function(c,a){for(var b=this.h.a,d=b.kd;-1!=d;d=b.Ae(d))if(d==a)for(var e=b.Kb(d);-1!=e;e=b.Qb(e)){var g=b.Za(e);if(-1!=g)for(var h=
b.T(g);-1!=h;){g=this.h.Qe(g);var k=this.h.Qe(h);g=this.h.HS(g,k);-1!=g&&(k=this.h.wa(g),this.h.Jb(g,c,1),this.h.Jb(k,c,2));g=h;h=b.T(g)}}};l.prototype.tX=function(c,a,b,d){b=this.h.Ea(b);d=this.h.Ea(d);var e=new f.ha(0);e.Db(256);for(var g=this.h.a,h=this.h.ih(),k=this.h.We;-1!=k;k=this.h.$f(k)){var m=this.h.Re(k);if(-1!=m){var n=m;do{if(1!=this.h.Cb(n,h)){var p=n,x=n,Q=!1,V=0;do{this.h.Jb(p,h,1);if(!Q){var ca=this.h.lh(p);0!=(ca&d)&&0!=(this.h.kf(p)&b)&&(x=p,Q=!0)}Q&&(e.add(this.h.zj(this.h.wm(this.h.pk(p)))),
-1!=c&&(ca=this.h.lh(p),0!=(ca&d)&&(ca=this.h.Cb(p,c),V|=ca)));p=this.h.kc(p)}while(p!=x);Q&&0<this.h.eq(this.h.jf(x))&&(p=g.Pg(1736),this.XR(p,e),-1!=a&&g.LK(p,a,V));e.clear(!1)}n=this.h.kc(this.h.wa(n))}while(n!=m)}}this.h.Uh(h)};l.prototype.QQ=function(c,a,b,d){this.h.dY();var e=-1;-1!=c&&(e=this.h.ih(),this.DY(e,b));this.tX(e,c,a,b);var g=this.h.a;c=0;for(e=g.kd;-1!=e;e=g.Ae(e))e!=a&&e!=b&&(d.add(e),c++);d.Zd(0,c,function(h,k){h=g.eA(g.Kb(h));k=g.eA(g.Kb(k));return h<k?-1:h==k?0:1})};l.prototype.ah=
function(){null!=this.h&&(this.h.ah(),this.h=null)};return l}();f.pg=R})(fa||(fa={}));(function(f){var R=function(){function l(c){void 0!==c?this.Dr(c):this.zC()}l.prototype.Tx=function(){this.Sb=this.Ob=this.tb=this.ob=this.bb=this.fb=0};l.prototype.Ib=function(c){return this==c?!0:c instanceof l?this.fb==c.fb&&this.ob==c.ob&&this.Ob==c.Ob&&this.tb==c.tb&&this.bb==c.bb&&this.Sb==c.Sb:!1};l.prototype.fc=function(){f.L.Aj();f.L.Aj();f.L.Aj();f.L.Aj();f.L.Aj();return f.L.Aj()};l.prototype.Zj=function(c,
a){var b=this.tb*c.x+this.bb*c.y+this.Sb;a.x=this.fb*c.x+this.ob*c.y+this.Ob;a.y=b};l.prototype.LZ=function(c,a,b,d,e){var g=2*a;d*=2;for(a=2*(a+e);g<a;g+=2,d+=2){e=c[g];var h=c[g+1];b[d]=this.fb*e+this.ob*h+this.Ob;b[d+1]=this.tb*e+this.bb*h+this.Sb}};l.prototype.NZ=function(c,a,b){for(var d=0;d<a;d++){var e=c[d].x,g=c[d].y,h=this.fb*e+this.ob*g+this.Ob;e=this.tb*e+this.bb*g+this.Sb;null!=b[d]?b[d].ka(h,e):b[d]=f.b.construct(h,e)}};l.prototype.multiply=function(c){l.multiply(this,c,this)};l.multiply=
function(c,a,b){var d=c.fb*a.fb+c.tb*a.ob,e=c.ob*a.fb+c.bb*a.ob,g=c.Ob*a.fb+c.Sb*a.ob+a.Ob,h=c.fb*a.tb+c.tb*a.bb,k=c.ob*a.tb+c.bb*a.bb;c=c.Ob*a.tb+c.Sb*a.bb+a.Sb;b.fb=d;b.ob=e;b.Ob=g;b.tb=h;b.bb=k;b.Sb=c};l.prototype.Cf=function(){var c=new l;c.fb=this.fb;c.ob=this.ob;c.Ob=this.Ob;c.tb=this.tb;c.bb=this.bb;c.Sb=this.Sb;return c};l.prototype.VC=function(c){if(!c.u()){for(var a=[],b=0;4>b;b++)a[b]=new f.b;c.XB(a);this.OZ(a,a);c.Ix(a,4)}};l.prototype.OZ=function(c,a){for(var b=0;b<c.length;b++){var d=
new f.b,e=c[b];d.x=this.fb*e.x+this.ob*e.y+this.Ob;d.y=this.tb*e.x+this.bb*e.y+this.Sb;a[b]=d}};l.prototype.KT=function(c,a){c.u()||a.u()||0==c.N()||0==c.ca()?this.Tx():(this.ob=this.tb=0,this.fb=a.N()/c.N(),this.bb=a.ca()/c.ca(),this.Ob=a.o-c.o*this.fb,this.Sb=a.A-c.A*this.bb)};l.prototype.MZ=function(c){var a=new f.b,b=new f.b;a.ka(this.fb,this.tb);b.ka(this.ob,this.bb);a.sub(a);var d=.5*a.En();a.ka(this.fb,this.tb);b.ka(this.ob,this.bb);a.add(b);a=.5*a.En();return c*(d>a?Math.sqrt(d):Math.sqrt(a))};
l.prototype.zC=function(){this.fb=1;this.tb=this.Ob=this.ob=0;this.bb=1;this.Sb=0};l.prototype.xq=function(){return 1==this.fb&&1==this.bb&&0==this.ob&&0==this.Ob&&0==this.tb&&0==this.Sb};l.prototype.Qg=function(c){return Math.abs(this.fb*this.bb-this.tb*this.ob)<=2*c*(Math.abs(this.fb*this.bb)+Math.abs(this.tb*this.ob))};l.prototype.mg=function(c,a){this.fb=1;this.ob=0;this.Ob=c;this.tb=0;this.bb=1;this.Sb=a};l.prototype.Dr=function(c,a){void 0!==a?(this.fb=c,this.tb=this.Ob=this.ob=0,this.bb=a,
this.Sb=0):this.Dr(c,c)};l.prototype.HC=function(){this.fb=0;this.ob=1;this.Ob=0;this.tb=1;this.Sb=this.bb=0};l.prototype.SY=function(c){this.TY(Math.cos(c),Math.sin(c))};l.prototype.TY=function(c,a){this.fb=c;this.ob=-a;this.Ob=0;this.tb=a;this.bb=c;this.Sb=0};l.prototype.shift=function(c,a){this.Ob+=c;this.Sb+=a};l.prototype.scale=function(c,a){this.fb*=c;this.ob*=c;this.Ob*=c;this.tb*=a;this.bb*=a;this.Sb*=a};l.prototype.rotate=function(c){var a=new l;a.SY(c);this.multiply(a)};l.prototype.inverse=
function(c){if(void 0!==c){var a=this.fb*this.bb-this.ob*this.tb;0==a?c.Tx():(a=1/a,c.Ob=(this.ob*this.Sb-this.Ob*this.bb)*a,c.Sb=(this.Ob*this.tb-this.fb*this.Sb)*a,c.fb=this.bb*a,c.ob=-this.ob*a,c.tb=-this.tb*a,c.bb=this.fb*a)}else this.inverse(this)};return l}();f.xd=R})(fa||(fa={}));(function(f){var R=function(){function l(){}l.prototype.Tx=function(){this.Kg=this.Sb=this.Ob=this.gf=this.df=this.cf=this.ff=this.bb=this.ob=this.yf=this.tb=this.fb=0};l.prototype.Dr=function(c,a){this.fb=c;this.ob=
this.yf=this.tb=0;this.bb=a;this.df=this.cf=this.ff=0;this.gf=void 0;this.Kg=this.Sb=this.Ob=0};l.prototype.translate=function(c,a,b){this.Ob+=c;this.Sb+=a;this.Kg+=b};l.prototype.VC=function(c){if(!c.u()){for(var a=new f.Id[8],b=0;8>b;b++)a[b]=new f.Id;c.XB(a);this.transform(a,8,a);c.Ix(a)}};l.prototype.transform=function(c,a,b){for(var d=0;d<a;d++){var e=new f.Id,g=c[d];e.x=this.fb*g.x+this.ob*g.y+this.cf*g.z+this.Ob;e.y=this.tb*g.x+this.bb*g.y+this.df*g.z+this.Sb;e.z=this.yf*g.x+this.ff*g.y+this.gf*
g.z+this.Kg;b[d]=e}};l.prototype.vp=function(c){var a=new f.Id;a.x=this.fb*c.x+this.ob*c.y+this.cf*c.z+this.Ob;a.y=this.tb*c.x+this.bb*c.y+this.df*c.z+this.Sb;a.z=this.yf*c.x+this.ff*c.y+this.gf*c.z+this.Kg;return a};l.prototype.Gg=function(c){l.multiply(this,c,this)};l.multiply=function(c,a,b){var d=c.fb*a.fb+c.tb*a.ob+c.yf*a.cf,e=c.fb*a.tb+c.tb*a.bb+c.yf*a.df,g=c.fb*a.yf+c.tb*a.ff+c.yf*a.gf,h=c.ob*a.fb+c.bb*a.ob+c.ff*a.cf,k=c.ob*a.tb+c.bb*a.bb+c.ff*a.df,m=c.ob*a.yf+c.bb*a.ff+c.ff*a.gf,n=c.cf*a.fb+
c.df*a.ob+c.gf*a.cf,p=c.cf*a.tb+c.df*a.bb+c.gf*a.df,x=c.cf*a.yf+c.df*a.ff+c.gf*a.gf,Q=c.Ob*a.fb+c.Sb*a.ob+c.Kg*a.cf+a.Ob,V=c.Ob*a.tb+c.Sb*a.bb+c.Kg*a.df+a.Sb;c=c.Ob*a.yf+c.Sb*a.ff+c.Kg*a.gf+a.Kg;b.fb=d;b.tb=e;b.yf=g;b.ob=h;b.bb=k;b.ff=m;b.cf=n;b.df=p;b.gf=x;b.Ob=Q;b.Sb=V;b.Kg=c};l.inverse=function(c,a){var b=c.fb*(c.bb*c.gf-c.ff*c.df)-c.tb*(c.ob*c.gf-c.ff*c.cf)+c.yf*(c.ob*c.df-c.bb*c.cf);if(0!=b){var d=1/b;b=(c.bb*c.gf-c.ff*c.df)*d;var e=-(c.ob*c.gf-c.ff*c.cf)*d,g=(c.ob*c.df-c.bb*c.cf)*d,h=-(c.tb*
c.gf-c.df*c.yf)*d,k=(c.fb*c.gf-c.yf*c.cf)*d,m=-(c.fb*c.df-c.tb*c.cf)*d,n=(c.tb*c.ff-c.yf*c.bb)*d,p=-(c.fb*c.ff-c.yf*c.ob)*d;d*=c.fb*c.bb-c.tb*c.ob;var x=-(c.Ob*b+c.Sb*e+c.Kg*g),Q=-(c.Ob*h+c.Sb*k+c.Kg*m);c=-(c.Ob*n+c.Sb*p+c.Kg*d);a.fb=b;a.tb=h;a.yf=n;a.ob=e;a.bb=k;a.ff=p;a.cf=g;a.df=m;a.gf=d;a.Ob=x;a.Sb=Q;a.Kg=c}else throw f.f.Y("math singularity");};l.prototype.Cf=function(){var c=new l;c.fb=this.fb;c.tb=this.tb;c.yf=this.yf;c.ob=this.ob;c.bb=this.bb;c.ff=this.ff;c.cf=this.cf;c.df=this.df;c.gf=this.gf;
c.Ob=this.Ob;c.Sb=this.Sb;c.Kg=this.Kg;return c};return l}();f.u_=R})(fa||(fa={}));(function(f){var R=function(c){function a(b){if(void 0!==b)b=c.call(this,b.fc(),b)||this;else{b=c.call(this)||this;b.hg=[];b.hg[0]=0;b.Ca=1;b.Bh=[];for(var d=0;10>d;d++)b.Bh[d]=-1;b.Bh[b.hg[0]]=0}b.Cq=!0;return b}Fa(a,c);a.prototype.le=function(b){this.hasAttribute(b)||(this.Bh[b]=0,this.UD())};a.prototype.removeAttribute=function(b){if(0==b)throw f.f.I("Position attribue cannot be removed");this.hasAttribute(b)&&(this.Bh[b]=
-1,this.UD())};a.prototype.reset=function(){this.hg[0]=0;this.Ca=1;for(var b=0;b<this.Bh.length;b++)this.Bh[b]=-1;this.Bh[this.hg[0]]=0;this.Cq=!0};a.prototype.Mz=function(){return l.bo().add(this)};a.ug=function(){return l.bo().rT()};a.Y_=function(){return l.bo().sT()};a.prototype.BN=function(){var b=this.fc();return new f.oa(b,this)};a.prototype.UD=function(){for(var b=this.Ca=0,d=0;10>b;b++)0<=this.Bh[b]&&(this.hg[d]=b,this.Bh[b]=d,d++,this.Ca++);this.Cq=!0};a.prototype.fc=function(){this.Cq&&
(this.Fl=this.Un(),this.Cq=!1);return this.Fl};a.prototype.Ib=function(b){if(null==b)return!1;if(b==this)return!0;if(!(b instanceof a)||b.Ca!=this.Ca)return!1;for(var d=0;d<this.Ca;d++)if(this.hg[d]!=b.hg[d])return!1;return this.Cq!=b.Cq?!1:!0};a.prototype.sH=function(b){if(b.Ca!=this.Ca)return!1;for(var d=0;d<this.Ca;d++)if(this.hg[d]!=b.hg[d])return!1;return!0};a.ox=function(b,d){for(var e=[],g=0;g<b.Ca;g++)e[g]=-1;g=0;for(var h=b.Ca;g<h;g++)e[g]=d.Yf(b.jd(g));return e};a.RS=function(b,d){b=new a(b);
b.le(d);return b.Mz()};a.SS=function(b,d){for(var e=null,g=0;10>g;g++)!b.hasAttribute(g)&&d.hasAttribute(g)&&(null==e&&(e=new a(b)),e.le(g));return null!=e?e.Mz():b};a.E0=function(b,d){b=new a(b);b.removeAttribute(d);return b.Mz()};return a}(f.oa);f.ke=R;var l=function(){function c(){this.map=[];var a=new R;this.add(a);a=new R;a.le(1);this.add(a)}c.bo=function(){return c.lM};c.prototype.rT=function(){return c.Mt};c.prototype.sT=function(){return c.Nt};c.prototype.add=function(a){var b=a.fc();if(null!=
c.Mt&&c.Mt.fc()==b&&a.sH(c.Mt))return c.Mt;if(null!=c.Nt&&c.Nt.fc()==b&&a.sH(c.Nt))return c.Nt;var d=null;void 0!==this.map[b]&&(d=this.map[b]);null==d&&(d=a.BN(),1==d.Ca?c.Mt=d:2==d.Ca&&1==d.jd(1)?c.Nt=d:this.map[b]=d);return d};c.lM=new c;return c}()})(fa||(fa={}));var Ka={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},Ha={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},
La=new (function(){function f(){this.YN=50;this.Gp=new Map;this.mj=[]}f.prototype.clear=function(){this.mj.length=0;this.Gp.clear()};f.prototype.delete=function(R){return this.Gp.delete(R)?(this.mj.splice(this.mj.indexOf(R),1),!0):!1};f.prototype.get=function(R){var l=this.Gp.get(R);if(void 0!==l)return this.mj[0]!==R&&(this.mj.splice(this.mj.indexOf(R),1),this.mj.unshift(R)),l};f.prototype.has=function(R){return this.Gp.has(R)};f.prototype.set=function(R,l){void 0!==this.get(R)&&this.delete(R);this.mj.unshift(R);
this.Gp.set(R,l);this.wN();return this};f.prototype.wN=function(){for(;this.mj.length&&this.mj.length>this.YN;){var R=this.mj.pop();this.Gp.delete(R)}};return f}()),Ia=(Ja={},Ja.convertJSONToGeometry=function(f){return fa.bc.pQ(f)},Ja.hasM=function(f){return f.hasAttribute(fa.Mh.M)},Ja.hasZ=function(f){return f.hasAttribute(fa.Mh.Z)},Ja.getPointX=function(f){return f.Ce()},Ja.getPointY=function(f){return f.lf()},Ja.getPointZ=function(f){return f.vT()},Ja.getPointM=function(f){return f.OS()},Ja.getXMin=
function(f){return f.Ms()},Ja.getYMin=function(f){return f.Os()},Ja.getXMax=function(f){return f.Ls()},Ja.getYMax=function(f){return f.Ns()},Ja.getZExtent=function(f){return f.Qf(fa.Mh.Z,0)},Ja.getMExtent=function(f){return f.Qf(fa.Mh.M,0)},Ja.exportPaths=function(f){var R=[],l=f.$(),c=null,a=null,b=f.hasAttribute(fa.Mh.Z),d=f.hasAttribute(fa.Mh.M);b&&(c=f.Va(fa.Mh.Z));d&&(a=f.Va(fa.Mh.M));for(var e=new fa.b,g=0;g<l;g++){for(var h=f.ua(g),k=f.Ha(g),m=0,n=0,p=NaN,x=NaN,Q=NaN,V=NaN,ca=f.Lb(g),ba=[],
ea=h;ea<h+k;ea++){f.w(ea,e);V=Q=NaN;var da=[e.x,e.y];b&&(Q=c.get(ea),da.push(Q));d&&(V=a.get(ea),da.push(V));ea==h&&ca&&(m=e.x,n=e.y,p=Q,x=V);ba.push(da)}!ca||m==e.x&&n==e.y&&(!b||isNaN(p)&&isNaN(Q)||p==Q)&&(!d||isNaN(x)&&isNaN(V)||x==V)||ba.push(ba[0].slice(0));R.push(ba)}return R},Ja.exportPathsFlat=function(){},Ja.exportPoints=function(f){var R=f.hasAttribute(fa.Mh.Z),l=f.hasAttribute(fa.Mh.M),c=null,a=null;R&&(c=f.Va(fa.Mh.Z));l&&(a=f.Va(fa.Mh.M));for(var b=new fa.b,d=f.D(),e=[],g=0;g<d;g++){f.w(g,
b);var h=[b.x,b.y];R&&h.push(c.get(g));l&&h.push(a.get(g));e.push(h)}return e},Ja.exportPointsFlat=function(){},Ja);return function(){function f(){}f.buffer=X;f.clip=B;f.contains=N;f.convexHull=Y;f.crosses=z;f.cut=M;f.densify=va;f.difference=W;f.disjoint=T;f.distance=E;f.equals=r;f.extendedSpatialReferenceInfo=D;f.generalize=pa;f.geodesicArea=Ga;f.geodesicBuffer=U;f.geodesicDensify=ja;f.geodesicLength=Na;f.intersect=oa;f.intersects=C;f.isSimple=J;f.nearestCoordinate=sa;f.nearestVertex=qa;f.nearestVertices=
na;f.offset=la;f.overlaps=F;f.planarArea=ua;f.planarLength=Aa;f.relate=K;f.simplify=L;f.symmetricDifference=aa;f.touches=O;f.union=ta;f.within=P;f.rotate=fa.jy.rotate;f.flipHorizontal=fa.jy.VR;f.flipVertical=fa.jy.WR;f._enableProjection=Oa;f._project=Ca;f._getTransformation=Z;f._getTransformationBySuitability=ha;return f}()}();void 0!==I&&(S.exports=I)});var w=Object.freeze(Object.assign(Object.create(null),A,{"default":A}));q.geometryEngineBase=w;q.geometryEngineBase$1=A})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(q){function A(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}q.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};q.commonjsRequire=A;q.createCommonjsModule=function(w,S,I){return I={path:S,exports:{},require:function(t,H){return A(t,void 0===H||null===H?I.path:H)}},w(I,I.exports),I.exports};q.getDefaultExportFromCjs=function(w){return w&&
w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w["default"]:w}})},"esri/geometry/geometryAdapters/hydrated":function(){define("exports ../Point ../Extent ../Multipoint ../Polygon ../Polyline".split(" "),function(q,A,w,S,I,t){q.hydratedAdapter={convertToGEGeometry:function(H,v){if(null==v)return null;let G="cache"in v?v.cache._geVersion:void 0;null==G&&(G=H.convertJSONToGeometry(v),"cache"in v&&(v.cache._geVersion=G));return G},exportPoint:function(H,v,G){const y=H.hasZ(v),u=H.hasM(v);
G=new A({x:H.getPointX(v),y:H.getPointY(v),spatialReference:G});y&&(G.z=H.getPointZ(v));u&&(G.m=H.getPointM(v));G.cache._geVersion=v;return G},exportPolygon:function(H,v,G){H=new I({rings:H.exportPaths(v),hasZ:H.hasZ(v),hasM:H.hasM(v),spatialReference:G});H.cache._geVersion=v;return H},exportPolyline:function(H,v,G){H=new t({paths:H.exportPaths(v),hasZ:H.hasZ(v),hasM:H.hasM(v),spatialReference:G});H.cache._geVersion=v;return H},exportMultipoint:function(H,v,G){H=new S({hasZ:H.hasZ(v),hasM:H.hasM(v),
points:H.exportPoints(v),spatialReference:G});H.cache._geVersion=v;return H},exportExtent:function(H,v,G){var y=H.hasZ(v);const u=H.hasM(v);G=new w({xmin:H.getXMin(v),ymin:H.getYMin(v),xmax:H.getXMax(v),ymax:H.getYMax(v),spatialReference:G});y&&(y=H.getZExtent(v),G.zmin=y.vmin,G.zmax=y.vmax);u&&(H=H.getMExtent(v),G.mmin=H.vmin,G.mmax=H.vmax);G.cache._geVersion=v;return G}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./vec3f64 ./common ./vec3 ./mat3f64 ./quatf64 ./vec4".split(" "),
function(q,A,w,S,I,t,H){function v(ua){ua[0]=0;ua[1]=0;ua[2]=0;ua[3]=1;return ua}function G(ua,Aa,Ga){Ga*=.5;const Na=Math.sin(Ga);ua[0]=Na*Aa[0];ua[1]=Na*Aa[1];ua[2]=Na*Aa[2];ua[3]=Math.cos(Ga);return ua}function y(ua,Aa){const Ga=2*Math.acos(Aa[3]),Na=Math.sin(Ga/2);Na>w.EPSILON?(ua[0]=Aa[0]/Na,ua[1]=Aa[1]/Na,ua[2]=Aa[2]/Na):(ua[0]=1,ua[1]=0,ua[2]=0);return Ga}function u(ua,Aa,Ga){const Na=Aa[0],Oa=Aa[1],Z=Aa[2];Aa=Aa[3];const ha=Ga[0],Ca=Ga[1],Da=Ga[2];Ga=Ga[3];ua[0]=Na*Ga+Aa*ha+Oa*Da-Z*Ca;ua[1]=
Oa*Ga+Aa*Ca+Z*ha-Na*Da;ua[2]=Z*Ga+Aa*Da+Na*Ca-Oa*ha;ua[3]=Aa*Ga-Na*ha-Oa*Ca-Z*Da;return ua}function D(ua,Aa,Ga){Ga*=.5;const Na=Aa[0],Oa=Aa[1],Z=Aa[2];Aa=Aa[3];const ha=Math.sin(Ga);Ga=Math.cos(Ga);ua[0]=Na*Ga+Aa*ha;ua[1]=Oa*Ga+Z*ha;ua[2]=Z*Ga-Oa*ha;ua[3]=Aa*Ga-Na*ha;return ua}function B(ua,Aa,Ga){Ga*=.5;const Na=Aa[0],Oa=Aa[1],Z=Aa[2];Aa=Aa[3];const ha=Math.sin(Ga);Ga=Math.cos(Ga);ua[0]=Na*Ga-Z*ha;ua[1]=Oa*Ga+Aa*ha;ua[2]=Z*Ga+Na*ha;ua[3]=Aa*Ga-Oa*ha;return ua}function M(ua,Aa,Ga){Ga*=.5;const Na=
Aa[0],Oa=Aa[1],Z=Aa[2];Aa=Aa[3];const ha=Math.sin(Ga);Ga=Math.cos(Ga);ua[0]=Na*Ga+Oa*ha;ua[1]=Oa*Ga-Na*ha;ua[2]=Z*Ga+Aa*ha;ua[3]=Aa*Ga-Z*ha;return ua}function N(ua,Aa){const Ga=Aa[0],Na=Aa[1];Aa=Aa[2];ua[0]=Ga;ua[1]=Na;ua[2]=Aa;ua[3]=Math.sqrt(Math.abs(1-Ga*Ga-Na*Na-Aa*Aa));return ua}function z(ua,Aa,Ga,Na){const Oa=Aa[0],Z=Aa[1],ha=Aa[2];Aa=Aa[3];let Ca=Ga[0],Da=Ga[1],Ja=Ga[2];Ga=Ga[3];let Fa;let fa;var wa=Oa*Ca+Z*Da+ha*Ja+Aa*Ga;0>wa&&(wa=-wa,Ca=-Ca,Da=-Da,Ja=-Ja,Ga=-Ga);1-wa>w.EPSILON?(Fa=Math.acos(wa),
fa=Math.sin(Fa),wa=Math.sin((1-Na)*Fa)/fa,Na=Math.sin(Na*Fa)/fa):wa=1-Na;ua[0]=wa*Oa+Na*Ca;ua[1]=wa*Z+Na*Da;ua[2]=wa*ha+Na*Ja;ua[3]=wa*Aa+Na*Ga;return ua}function E(ua){var Aa=w.RANDOM();const Ga=w.RANDOM(),Na=w.RANDOM(),Oa=Math.sqrt(1-Aa);Aa=Math.sqrt(Aa);ua[0]=Oa*Math.sin(2*Math.PI*Ga);ua[1]=Oa*Math.cos(2*Math.PI*Ga);ua[2]=Aa*Math.sin(2*Math.PI*Na);ua[3]=Aa*Math.cos(2*Math.PI*Na);return ua}function r(ua,Aa){const Ga=Aa[0],Na=Aa[1],Oa=Aa[2];Aa=Aa[3];var Z=Ga*Ga+Na*Na+Oa*Oa+Aa*Aa;Z=Z?1/Z:0;ua[0]=
-Ga*Z;ua[1]=-Na*Z;ua[2]=-Oa*Z;ua[3]=Aa*Z;return ua}function C(ua,Aa){ua[0]=-Aa[0];ua[1]=-Aa[1];ua[2]=-Aa[2];ua[3]=Aa[3];return ua}function O(ua,Aa){var Ga=Aa[0]+Aa[4]+Aa[8];if(0<Ga)Ga=Math.sqrt(Ga+1),ua[3]=.5*Ga,Ga=.5/Ga,ua[0]=(Aa[5]-Aa[7])*Ga,ua[1]=(Aa[6]-Aa[2])*Ga,ua[2]=(Aa[1]-Aa[3])*Ga;else{let Na=0;Aa[4]>Aa[0]&&(Na=1);Aa[8]>Aa[3*Na+Na]&&(Na=2);const Oa=(Na+1)%3,Z=(Na+2)%3;Ga=Math.sqrt(Aa[3*Na+Na]-Aa[3*Oa+Oa]-Aa[3*Z+Z]+1);ua[Na]=.5*Ga;Ga=.5/Ga;ua[3]=(Aa[3*Oa+Z]-Aa[3*Z+Oa])*Ga;ua[Oa]=(Aa[3*Oa+Na]+
Aa[3*Na+Oa])*Ga;ua[Z]=(Aa[3*Z+Na]+Aa[3*Na+Z])*Ga}return ua}function P(ua,Aa,Ga,Na){var Oa=.5*Math.PI/180;Aa*=Oa;Ga*=Oa;Na*=Oa;Oa=Math.sin(Aa);Aa=Math.cos(Aa);const Z=Math.sin(Ga);Ga=Math.cos(Ga);const ha=Math.sin(Na);Na=Math.cos(Na);ua[0]=Oa*Ga*Na-Aa*Z*ha;ua[1]=Aa*Z*Na+Oa*Ga*ha;ua[2]=Aa*Ga*ha-Oa*Z*Na;ua[3]=Aa*Ga*Na+Oa*Z*ha;return ua}function T(ua){return"quat("+ua[0]+", "+ua[1]+", "+ua[2]+", "+ua[3]+")"}function F(ua,Aa,Ga){const Na=S.dot(Aa,Ga);if(-.999999>Na)return S.cross(sa,qa,Aa),1E-6>S.len(sa)&&
S.cross(sa,na,Aa),S.normalize(sa,sa),G(ua,sa,Math.PI),ua;if(.999999<Na)return ua[0]=0,ua[1]=0,ua[2]=0,ua[3]=1,ua;S.cross(sa,Aa,Ga);ua[0]=sa[0];ua[1]=sa[1];ua[2]=sa[2];ua[3]=1+Na;return U(ua,ua)}function K(ua,Aa,Ga,Na,Oa,Z){z(pa,Aa,Oa,Z);z(va,Ga,Na,Z);z(ua,pa,va,2*Z*(1-Z));return ua}function J(ua,Aa,Ga,Na){const Oa=ja;Oa[0]=Ga[0];Oa[3]=Ga[1];Oa[6]=Ga[2];Oa[1]=Na[0];Oa[4]=Na[1];Oa[7]=Na[2];Oa[2]=-Aa[0];Oa[5]=-Aa[1];Oa[8]=-Aa[2];return U(ua,O(ua,Oa))}const L=H.copy,Y=H.set,W=H.add,aa=H.scale,oa=H.dot,
ta=H.lerp,la=H.length,X=H.squaredLength,U=H.normalize,ka=H.exactEquals;H=H.equals;const sa=A.create(),qa=A.fromValues(1,0,0),na=A.fromValues(0,1,0),pa=t.create(),va=t.create(),ja=I.create();A=Object.freeze({__proto__:null,identity:v,setAxisAngle:G,getAxisAngle:y,multiply:u,rotateX:D,rotateY:B,rotateZ:M,calculateW:N,slerp:z,random:E,invert:r,conjugate:C,fromMat3:O,fromEuler:P,str:T,copy:L,set:Y,add:W,mul:u,scale:aa,dot:oa,lerp:ta,length:la,len:la,squaredLength:X,sqrLen:X,normalize:U,exactEquals:ka,
equals:H,rotationTo:F,sqlerp:K,setAxes:J});q.add=W;q.calculateW=N;q.conjugate=C;q.copy=L;q.dot=oa;q.equals=H;q.exactEquals=ka;q.fromEuler=P;q.fromMat3=O;q.getAxisAngle=y;q.identity=v;q.invert=r;q.len=la;q.length=la;q.lerp=ta;q.mul=u;q.multiply=u;q.normalize=U;q.quat=A;q.random=E;q.rotateX=D;q.rotateY=B;q.rotateZ=M;q.rotationTo=F;q.scale=aa;q.set=Y;q.setAxes=J;q.setAxisAngle=G;q.slerp=z;q.sqlerp=K;q.sqrLen=X;q.squaredLength=X;q.str=T})},"esri/chunks/mat3f64":function(){define(["exports"],function(q){function A(){return[1,
0,0,0,1,0,0,0,1]}function w(H){return[H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],H[8]]}function S(H,v,G,y,u,D,B,M,N){return[H,v,G,y,u,D,B,M,N]}function I(H,v){return new Float64Array(H,v,9)}var t=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I});q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.mat3f64=t})},"esri/chunks/vec4":function(){define(["exports","./common"],function(q,A){function w(la,X){la[0]=X[0];la[1]=X[1];la[2]=X[2];la[3]=X[3];return la}function S(la,X,U,ka,sa){la[0]=
X;la[1]=U;la[2]=ka;la[3]=sa;return la}function I(la,X,U){la[0]=X[0]+U[0];la[1]=X[1]+U[1];la[2]=X[2]+U[2];la[3]=X[3]+U[3];return la}function t(la,X,U){la[0]=X[0]-U[0];la[1]=X[1]-U[1];la[2]=X[2]-U[2];la[3]=X[3]-U[3];return la}function H(la,X,U){la[0]=X[0]*U[0];la[1]=X[1]*U[1];la[2]=X[2]*U[2];la[3]=X[3]*U[3];return la}function v(la,X,U){la[0]=X[0]/U[0];la[1]=X[1]/U[1];la[2]=X[2]/U[2];la[3]=X[3]/U[3];return la}function G(la,X){la[0]=Math.ceil(X[0]);la[1]=Math.ceil(X[1]);la[2]=Math.ceil(X[2]);la[3]=Math.ceil(X[3]);
return la}function y(la,X){la[0]=Math.floor(X[0]);la[1]=Math.floor(X[1]);la[2]=Math.floor(X[2]);la[3]=Math.floor(X[3]);return la}function u(la,X,U){la[0]=Math.min(X[0],U[0]);la[1]=Math.min(X[1],U[1]);la[2]=Math.min(X[2],U[2]);la[3]=Math.min(X[3],U[3]);return la}function D(la,X,U){la[0]=Math.max(X[0],U[0]);la[1]=Math.max(X[1],U[1]);la[2]=Math.max(X[2],U[2]);la[3]=Math.max(X[3],U[3]);return la}function B(la,X){la[0]=Math.round(X[0]);la[1]=Math.round(X[1]);la[2]=Math.round(X[2]);la[3]=Math.round(X[3]);
return la}function M(la,X,U){la[0]=X[0]*U;la[1]=X[1]*U;la[2]=X[2]*U;la[3]=X[3]*U;return la}function N(la,X,U,ka){la[0]=X[0]+U[0]*ka;la[1]=X[1]+U[1]*ka;la[2]=X[2]+U[2]*ka;la[3]=X[3]+U[3]*ka;return la}function z(la,X){const U=X[0]-la[0],ka=X[1]-la[1],sa=X[2]-la[2];la=X[3]-la[3];return Math.sqrt(U*U+ka*ka+sa*sa+la*la)}function E(la,X){const U=X[0]-la[0],ka=X[1]-la[1],sa=X[2]-la[2];la=X[3]-la[3];return U*U+ka*ka+sa*sa+la*la}function r(la){const X=la[0],U=la[1],ka=la[2];la=la[3];return Math.sqrt(X*X+U*
U+ka*ka+la*la)}function C(la){const X=la[0],U=la[1],ka=la[2];la=la[3];return X*X+U*U+ka*ka+la*la}function O(la,X){la[0]=-X[0];la[1]=-X[1];la[2]=-X[2];la[3]=-X[3];return la}function P(la,X){la[0]=1/X[0];la[1]=1/X[1];la[2]=1/X[2];la[3]=1/X[3];return la}function T(la,X){const U=X[0],ka=X[1],sa=X[2];X=X[3];let qa=U*U+ka*ka+sa*sa+X*X;0<qa&&(qa=1/Math.sqrt(qa),la[0]=U*qa,la[1]=ka*qa,la[2]=sa*qa,la[3]=X*qa);return la}function F(la,X){return la[0]*X[0]+la[1]*X[1]+la[2]*X[2]+la[3]*X[3]}function K(la,X,U,ka){const sa=
X[0],qa=X[1],na=X[2];X=X[3];la[0]=sa+ka*(U[0]-sa);la[1]=qa+ka*(U[1]-qa);la[2]=na+ka*(U[2]-na);la[3]=X+ka*(U[3]-X);return la}function J(la,X){X=X||1;let U,ka,sa,qa;let na;do{U=2*A.RANDOM()-1;ka=2*A.RANDOM()-1;var pa=U*U+ka*ka}while(1<=pa);do sa=2*A.RANDOM()-1,qa=2*A.RANDOM()-1,na=sa*sa+qa*qa;while(1<=na);pa=Math.sqrt((1-pa)/na);la[0]=X*U;la[1]=X*ka;la[2]=X*sa*pa;la[3]=X*qa*pa;return la}function L(la,X,U){const ka=X[0],sa=X[1],qa=X[2];X=X[3];la[0]=U[0]*ka+U[4]*sa+U[8]*qa+U[12]*X;la[1]=U[1]*ka+U[5]*
sa+U[9]*qa+U[13]*X;la[2]=U[2]*ka+U[6]*sa+U[10]*qa+U[14]*X;la[3]=U[3]*ka+U[7]*sa+U[11]*qa+U[15]*X;return la}function Y(la,X,U){var ka=X[0];const sa=X[1],qa=X[2],na=U[0],pa=U[1],va=U[2];U=U[3];const ja=U*ka+pa*qa-va*sa,ua=U*sa+va*ka-na*qa,Aa=U*qa+na*sa-pa*ka;ka=-na*ka-pa*sa-va*qa;la[0]=ja*U+ka*-na+ua*-va-Aa*-pa;la[1]=ua*U+ka*-pa+Aa*-na-ja*-va;la[2]=Aa*U+ka*-va+ja*-pa-ua*-na;la[3]=X[3];return la}function W(la){return"vec4("+la[0]+", "+la[1]+", "+la[2]+", "+la[3]+")"}function aa(la,X){return la[0]===
X[0]&&la[1]===X[1]&&la[2]===X[2]&&la[3]===X[3]}function oa(la,X){const U=la[0],ka=la[1],sa=la[2];la=la[3];const qa=X[0],na=X[1],pa=X[2];X=X[3];return Math.abs(U-qa)<=A.EPSILON*Math.max(1,Math.abs(U),Math.abs(qa))&&Math.abs(ka-na)<=A.EPSILON*Math.max(1,Math.abs(ka),Math.abs(na))&&Math.abs(sa-pa)<=A.EPSILON*Math.max(1,Math.abs(sa),Math.abs(pa))&&Math.abs(la-X)<=A.EPSILON*Math.max(1,Math.abs(la),Math.abs(X))}var ta=Object.freeze({__proto__:null,copy:w,set:S,add:I,subtract:t,multiply:H,divide:v,ceil:G,
floor:y,min:u,max:D,round:B,scale:M,scaleAndAdd:N,distance:z,squaredDistance:E,length:r,squaredLength:C,negate:O,inverse:P,normalize:T,dot:F,lerp:K,random:J,transformMat4:L,transformQuat:Y,str:W,exactEquals:aa,equals:oa,sub:t,mul:H,div:v,dist:z,sqrDist:E,len:r,sqrLen:C});q.add=I;q.ceil=G;q.copy=w;q.dist=z;q.distance=z;q.div=v;q.divide=v;q.dot=F;q.equals=oa;q.exactEquals=aa;q.floor=y;q.inverse=P;q.len=r;q.length=r;q.lerp=K;q.max=D;q.min=u;q.mul=H;q.multiply=H;q.negate=O;q.normalize=T;q.random=J;q.round=
B;q.scale=M;q.scaleAndAdd=N;q.set=S;q.sqrDist=E;q.sqrLen=C;q.squaredDistance=E;q.squaredLength=C;q.str=W;q.sub=t;q.subtract=t;q.transformMat4=L;q.transformQuat=Y;q.vec4=ta})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(q,A){function w(K,J){K[0]=J[0];K[1]=J[1];K[2]=J[2];K[3]=J[3];K[4]=J[4];K[5]=J[5];return K}function S(K){K[0]=1;K[1]=0;K[2]=0;K[3]=1;K[4]=0;K[5]=0;return K}function I(K,J,L,Y,W,aa,oa){K[0]=J;K[1]=L;K[2]=Y;K[3]=W;K[4]=aa;K[5]=oa;return K}function t(K,J){const L=
J[0],Y=J[1],W=J[2],aa=J[3],oa=J[4];J=J[5];let ta=L*aa-Y*W;if(!ta)return null;ta=1/ta;K[0]=aa*ta;K[1]=-Y*ta;K[2]=-W*ta;K[3]=L*ta;K[4]=(W*J-aa*oa)*ta;K[5]=(Y*oa-L*J)*ta;return K}function H(K){return K[0]*K[3]-K[1]*K[2]}function v(K,J,L){const Y=J[0],W=J[1],aa=J[2],oa=J[3],ta=J[4];J=J[5];const la=L[0],X=L[1],U=L[2],ka=L[3],sa=L[4];L=L[5];K[0]=Y*la+aa*X;K[1]=W*la+oa*X;K[2]=Y*U+aa*ka;K[3]=W*U+oa*ka;K[4]=Y*sa+aa*L+ta;K[5]=W*sa+oa*L+J;return K}function G(K,J,L){const Y=J[0],W=J[1],aa=J[2],oa=J[3],ta=J[4];
J=J[5];const la=Math.sin(L);L=Math.cos(L);K[0]=Y*L+aa*la;K[1]=W*L+oa*la;K[2]=Y*-la+aa*L;K[3]=W*-la+oa*L;K[4]=ta;K[5]=J;return K}function y(K,J,L){const Y=J[1],W=J[2],aa=J[3],oa=J[4],ta=J[5],la=L[0];L=L[1];K[0]=J[0]*la;K[1]=Y*la;K[2]=W*L;K[3]=aa*L;K[4]=oa;K[5]=ta;return K}function u(K,J,L){const Y=J[0],W=J[1],aa=J[2],oa=J[3],ta=J[4];J=J[5];const la=L[0];L=L[1];K[0]=Y;K[1]=W;K[2]=aa;K[3]=oa;K[4]=Y*la+aa*L+ta;K[5]=W*la+oa*L+J;return K}function D(K,J){const L=Math.sin(J);J=Math.cos(J);K[0]=J;K[1]=L;K[2]=
-L;K[3]=J;K[4]=0;K[5]=0;return K}function B(K,J){K[0]=J[0];K[1]=0;K[2]=0;K[3]=J[1];K[4]=0;K[5]=0;return K}function M(K,J){K[0]=1;K[1]=0;K[2]=0;K[3]=1;K[4]=J[0];K[5]=J[1];return K}function N(K){return"mat2d("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+", "+K[4]+", "+K[5]+")"}function z(K){return Math.sqrt(Math.pow(K[0],2)+Math.pow(K[1],2)+Math.pow(K[2],2)+Math.pow(K[3],2)+Math.pow(K[4],2)+Math.pow(K[5],2)+1)}function E(K,J,L){K[0]=J[0]+L[0];K[1]=J[1]+L[1];K[2]=J[2]+L[2];K[3]=J[3]+L[3];K[4]=J[4]+L[4];K[5]=
J[5]+L[5];return K}function r(K,J,L){K[0]=J[0]-L[0];K[1]=J[1]-L[1];K[2]=J[2]-L[2];K[3]=J[3]-L[3];K[4]=J[4]-L[4];K[5]=J[5]-L[5];return K}function C(K,J,L){K[0]=J[0]*L;K[1]=J[1]*L;K[2]=J[2]*L;K[3]=J[3]*L;K[4]=J[4]*L;K[5]=J[5]*L;return K}function O(K,J,L,Y){K[0]=J[0]+L[0]*Y;K[1]=J[1]+L[1]*Y;K[2]=J[2]+L[2]*Y;K[3]=J[3]+L[3]*Y;K[4]=J[4]+L[4]*Y;K[5]=J[5]+L[5]*Y;return K}function P(K,J){return K[0]===J[0]&&K[1]===J[1]&&K[2]===J[2]&&K[3]===J[3]&&K[4]===J[4]&&K[5]===J[5]}function T(K,J){const L=K[0],Y=K[1],
W=K[2],aa=K[3],oa=K[4];K=K[5];const ta=J[0],la=J[1],X=J[2],U=J[3],ka=J[4];J=J[5];return Math.abs(L-ta)<=A.EPSILON*Math.max(1,Math.abs(L),Math.abs(ta))&&Math.abs(Y-la)<=A.EPSILON*Math.max(1,Math.abs(Y),Math.abs(la))&&Math.abs(W-X)<=A.EPSILON*Math.max(1,Math.abs(W),Math.abs(X))&&Math.abs(aa-U)<=A.EPSILON*Math.max(1,Math.abs(aa),Math.abs(U))&&Math.abs(oa-ka)<=A.EPSILON*Math.max(1,Math.abs(oa),Math.abs(ka))&&Math.abs(K-J)<=A.EPSILON*Math.max(1,Math.abs(K),Math.abs(J))}var F=Object.freeze({__proto__:null,
copy:w,identity:S,set:I,invert:t,determinant:H,multiply:v,rotate:G,scale:y,translate:u,fromRotation:D,fromScaling:B,fromTranslation:M,str:N,frob:z,add:E,subtract:r,multiplyScalar:C,multiplyScalarAndAdd:O,exactEquals:P,equals:T,mul:v,sub:r});q.add=E;q.copy=w;q.determinant=H;q.equals=T;q.exactEquals=P;q.frob=z;q.fromRotation=D;q.fromScaling=B;q.fromTranslation=M;q.identity=S;q.invert=t;q.mat2d=F;q.mul=v;q.multiply=v;q.multiplyScalar=C;q.multiplyScalarAndAdd=O;q.rotate=G;q.scale=y;q.set=I;q.str=N;q.sub=
r;q.subtract=r;q.translate=u})},"esri/chunks/mat2df64":function(){define(["exports"],function(q){function A(){return[1,0,0,1,0,0]}function w(H){return[H[0],H[1],H[2],H[3],H[4],H[5]]}function S(H,v,G,y,u,D){return[H,v,G,y,u,D]}function I(H,v){return new Float64Array(H,v,6)}var t=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I});q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.mat2df64=t})},"esri/views/draw/Draw":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../chunks/MultipointDrawAction ./PointDrawAction ./PolygonDrawAction ./PolylineDrawAction ./SegmentDrawAction".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){w=function(r){function C(){var P=r.apply(this,arguments)||this;P.activeAction=null;P.type="draw";P.view=null;return P}q._inheritsLoose(C,r);var O=C.prototype;O.destroy=function(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)};O.create=function(P,T){this.reset();T={view:this.view,...T};switch(P){case "point":this.activeAction=new M.PointDrawAction(T);break;case "polygon":this.activeAction=new N.PolygonDrawAction(T);break;case "polyline":this.activeAction=
new z.PolylineDrawAction(T);break;case "multipoint":this.activeAction=new B.MultipointDrawAction(T);break;case "rectangle":case "circle":case "ellipse":case "triangle":this.activeAction=new E.SegmentDrawAction(T)}return this.activeAction};O.complete=function(){this.activeAction&&this.activeAction.complete();this.activeAction=null};O.reset=function(){this.activeAction&&this.activeAction.destroy();this.activeAction=null};return C}(D);A.__decorate([t.property()],w.prototype,"activeAction",void 0);A.__decorate([t.property({readOnly:!0})],
w.prototype,"type",void 0);A.__decorate([t.property()],w.prototype,"view",void 0);return w=A.__decorate([v.subclass("esri.views.draw.Draw")],w)})},"esri/chunks/MultipointDrawAction":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Handles ../views/input/InputManager ../views/support/screenUtils ../views/draw/DrawAction ../views/draw/input/DrawEvents ../views/draw/input/Keys".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C){q.MultipointDrawAction=function(O){function P(F){F=O.call(this,F)||this;F._cursorMoved=!1;F._cursorScreenPoint=null;F._dragEnabled=!0;F._pointerDownEvent=null;F._viewHandles=new M;F.vertices=[];return F}A._inheritsLoose(P,O);var T=P.prototype;T.initialize=function(){this._addViewHandles()};T.destroy=function(){this._removeViewHandles();this._viewHandles.destroy();this.emit("destroy")};T.addVertex=function(F,K){isNaN(K)?(K=this.vertices.length,this.vertices.push(F)):
this.vertices.splice(K,0,F);this.history.push({vertex:F,vertexIndex:K,undo:()=>this._undoVertexAdd(null,K),redo:()=>this._redoVertexAdd(null,F,K)});this._set("redoHistory",[]);const J=new r.VertexAddEvent(this.view,null,K,this.vertices);this.emit("vertex-add",J);J.defaultPrevented&&(this._cursorMoved=!0,this.history.pop())};T.removeVertex=function(F){const K=this.vertices.splice(F,1)[0];this.history.push({vertex:K,vertexIndex:F,undo:()=>this._undoVertexRemove(null,K,F),redo:()=>this._redoVertexRemove(null,
F)});this._set("redoHistory",[]);this.emit("vertex-remove",new r.VertexRemoveEvent(this.view,null,F,this.vertices))};T.updateVertex=function(F,K){const J=this.vertices[K];this.vertices[K]=F;this.history.push({vertex:F,vertexIndex:K,undo:()=>this._undoVertexUpdate(null,J,K),redo:()=>this._redoVertexUpdate(null,F,K)});this._set("redoHistory",[]);this.emit("vertex-update",new r.VertexUpdateEvent(this.view,null,K,this.vertices))};T.complete=function(){this._completeDrawing()};T._addViewHandles=function(){this._removeViewHandles();
this._viewHandles.add([this.view.on("click",F=>{F.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",F=>{this._cursorMoved&&this.vertices.pop();this._pointerDownEvent=F;this._cursorMoved=!1;this._cursorScreenPoint=z.createScreenPointFromEvent(F)},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",F=>{this._cursorMoved&&this.vertices.pop();this._cursorMoved=!0;this._cursorScreenPoint=z.createScreenPointFromEvent(F);this._cursorUpdateHandler(F)},N.ViewEventPriorities.TOOL),
this.view.on("pointer-up",F=>{this._pointerDownEvent&&(this._cursorMoved?(this.vertices.pop(),this._cursorMoved=!1):(this._pointerDownEvent=null,this._vertexAddHandler(F)))},N.ViewEventPriorities.TOOL),this.view.on("drag",F=>{this._dragEnabled&&this._pointerDownEvent&&F.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],F=>{F.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("double-click",F=>{F.stopPropagation();this._drawCompleteHandler(F)},N.ViewEventPriorities.TOOL),
this.view.on("double-click",["Control"],F=>{F.stopPropagation();this._drawCompleteHandler(F)},N.ViewEventPriorities.TOOL),this.view.on("key-down",F=>{F.key===C.KEYS.vertexAddKey&&!F.repeat&&this._cursorScreenPoint?(this._cursorMoved&&(this.vertices.pop(),this._cursorMoved=!1),this._vertexAddHandler(F)):F.key===C.KEYS.drawCompleteKey&&!F.repeat&&this._cursorScreenPoint?(this._cursorMoved&&(this.vertices.pop(),this._cursorMoved=!1),this._vertexAddHandler(F),this._drawCompleteHandler(F)):F.key!==C.KEYS.undoKey||
this.interactiveUndoDisabled||F.repeat?F.key!==C.KEYS.redoKey||this.interactiveUndoDisabled||F.repeat||(F.stopPropagation(),this.redo()):(F.stopPropagation(),this.undo())},N.ViewEventPriorities.TOOL)])};T._removeViewHandles=function(){this._viewHandles.removeAll()};T._addVertex=function(F,K){this.vertices.push(F);const J=this.vertices.indexOf(F);this.history.push({vertex:F,vertexIndex:J,undo:()=>this._undoVertexAdd(K,J),redo:()=>this._redoVertexAdd(K,F,J)});this._set("redoHistory",[]);const L=new r.VertexAddEvent(this.view,
K,J,this.vertices);this.emit("vertex-add",L);L.defaultPrevented&&(this._cursorMoved=!0,this.history.pop())};T._updateCursor=function(F,K){this.vertices.push(F);F=this.vertices.indexOf(F);K=new r.CursorUpdateEvent(this.view,K,F,this.vertices);this.emit("cursor-update",K)};T._completeDrawing=function(F){this._cursorMoved=!1;this._pointerDownEvent=null;1>this.vertices.length||(F=new r.DrawCompleteEvent(F,this.vertices),this.emit("draw-complete",F),F.defaultPrevented?this._cursorMoved=!0:this._removeViewHandles())};
T._undoVertexAdd=function(F,K){this.vertices.splice(K,1);this.emit("undo",new r.VertexRemoveEvent(this.view,F,K,this.vertices))};T._redoVertexAdd=function(F,K,J){this.vertices.splice(J,0,K);this.emit("redo",new r.VertexAddEvent(this.view,F,J,this.vertices))};T._undoVertexRemove=function(F,K,J){this.vertices.splice(J,0,K);this.emit("undo",new r.VertexAddEvent(this.view,F,J,this.vertices))};T._redoVertexRemove=function(F,K){this.vertices.splice(K,1);this.emit("redo",new r.VertexRemoveEvent(this.view,
F,K,this.vertices))};T._undoVertexUpdate=function(F,K,J){this.vertices[J]=K;this.emit("undo",new r.VertexUpdateEvent(this.view,F,J,this.vertices))};T._redoVertexUpdate=function(F,K,J){this.vertices[J]=K;this.emit("redo",new r.VertexUpdateEvent(this.view,F,J,this.vertices))};T._vertexAddHandler=function(F){const K=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(K)&&this._addVertex(K,F.native)};T._cursorUpdateHandler=function(F){const K=this.getCoordsFromScreenPoint(this._cursorScreenPoint);
I.isSome(K)&&this._updateCursor(K,F.native)};T._drawCompleteHandler=function(F){this._completeDrawing(F.native)};return P}(E);w.__decorate([v.property({readOnly:!0})],q.MultipointDrawAction.prototype,"vertices",void 0);q.MultipointDrawAction=w.__decorate([y.subclass("esri.views.draw.MultipointDrawAction")],q.MultipointDrawAction);w=Object.freeze({__proto__:null,get MultipointDrawAction(){return q.MultipointDrawAction}});q.MultipointDrawAction$1=w})},"esri/views/draw/DrawAction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/screenUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M){w=function(E){function r(){var O=E.apply(this,arguments)||this;O._hasZ=null;O.interactiveUndoDisabled=!1;O.history=[];O.redoHistory=[];O.snapToScene=!1;O.view=null;O.elevationInfo=null;O.defaultZ=0;return O}q._inheritsLoose(r,E);var C=r.prototype;C.canUndo=function(){return 0<this.history.length};C.canRedo=function(){return 0<this.redoHistory.length};C.undo=function(){if(this.canUndo()){var O=this.history.pop();O.undo();this.redoHistory.push(O)}};C.redo=function(){if(this.canRedo()){var O=
this.redoHistory.pop();O.redo();this.history.push(O)}};C.getCoordsFromScreenPoint=function(O){O=this.screenToMap(O);return S.isSome(O)?O.hasZ?[O.x,O.y,O.z]:[O.x,O.y]:null};C.getCoordsAndPointFromScreenPoint=function(O){O=this.screenToMap(O);return S.isSome(O)?O.hasZ?{vertex:[O.x,O.y,O.z],mapPoint:O}:{vertex:[O.x,O.y],mapPoint:O}:null};C.isDuplicateVertex=function(O,P){if(O.length){const [T,F]=O[O.length-1];return T===P[0]&&F===P[1]}return!1};C.getGeometryZValue=function(){return this.defaultZ};C.screenToMap=
function(O){var P=null;"3d"===this.view.type?this.hasZ?(P=S.unwrapOr(this.elevationInfo,N),P=this.view.sceneIntersectionHelper.intersectElevationFromScreen(M.createScreenPointArray(O.x,O.y),P,this.getGeometryZValue())):(P=S.unwrapOr(this.elevationInfo,z),P=this.view.sceneIntersectionHelper.intersectElevationFromScreen(M.createScreenPointArray(O.x,O.y),P,0),S.isSome(P)&&(P.z=void 0)):(P=this.view.toMap(O),S.isSome(P)&&(P.z=this.hasZ?this.getGeometryZValue():void 0));return P};q._createClass(r,[{key:"hasZ",
get:function(){return S.isSome(this._hasZ)?this._hasZ:"3d"===this.view.type},set:function(O){this._hasZ=O;this.notifyChange("hasZ")}}]);return r}(B.EventedAccessor);A.__decorate([H.property({type:Boolean,nonNullable:!0})],w.prototype,"interactiveUndoDisabled",void 0);A.__decorate([H.property({readOnly:!0})],w.prototype,"history",void 0);A.__decorate([H.property({readOnly:!0})],w.prototype,"redoHistory",void 0);A.__decorate([H.property()],w.prototype,"snapToScene",void 0);A.__decorate([H.property()],
w.prototype,"view",void 0);A.__decorate([H.property()],w.prototype,"elevationInfo",void 0);A.__decorate([H.property({nonNullable:!0})],w.prototype,"defaultZ",void 0);A.__decorate([H.property({dependsOn:["view"]})],w.prototype,"hasZ",null);w=A.__decorate([G.subclass("esri.views.draw.DrawAction")],w);const N={mode:"absolute-height",offset:0},z={mode:"on-the-ground",offset:0};return w})},"esri/views/draw/input/DrawEvents":function(){define(["exports"],function(q){let A=function(){function H(v,G,y,u){this.view=
v;this.native=G;this.vertexIndex=y;this.vertices=u;this.defaultPrevented=!1;this.type="vertex-add"}H.prototype.preventDefault=function(){this.defaultPrevented=!0};return H}(),w=function(){function H(v,G,y,u){this.view=v;this.native=G;this.vertexIndex=y;this.vertices=u;this.defaultPrevented=!1;this.type="vertex-update"}H.prototype.preventDefault=function(){this.defaultPrevented=!0};return H}(),S=function(){function H(v,G,y,u){this.view=v;this.native=G;this.vertexIndex=y;this.vertices=u;this.defaultPrevented=
!1;this.type="vertex-remove"}H.prototype.preventDefault=function(){this.defaultPrevented=!0};return H}(),I=function(){function H(v,G,y,u,D=null){this.view=v;this.native=G;this.vertexIndex=y;this.vertices=u;this.mapPoint=D;this.coordinates=null;this.defaultPrevented=!1;this.type="cursor-update";this.coordinates=1===u.length?u[0]:null}H.prototype.preventDefault=function(){this.defaultPrevented=!0};return H}(),t=function(){function H(v,G){this.native=v;this.vertices=G;this.coordinates=null;this.defaultPrevented=
!1;this.type="draw-complete";this.coordinates=1===G.length?G[0]:null}H.prototype.preventDefault=function(){this.defaultPrevented=!0};return H}();q.CursorUpdateEvent=I;q.DrawCompleteEvent=t;q.VertexAddEvent=A;q.VertexRemoveEvent=S;q.VertexUpdateEvent=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/input/Keys":function(){define(["exports"],function(q){q.KEYS={drawCompleteKey:"c",redoKey:"r",undoKey:"z",vertexAddKey:"f",panKey:" "};Object.defineProperty(q,"__esModule",{value:!0})})},
"esri/views/draw/PointDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Handles ../input/InputManager ../support/screenUtils ../input/recognizers/PointerClickHoldAndDrag ./DrawAction ./input/DrawEvents ./input/Keys ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P){q.PointDrawAction=function(T){function F(J){J=T.call(this,J)||this;J._clickDelay=E.DefaultParameters.maximumClickDelay;J._cursorMoved=!1;J._cursorScreenPoint=null;J._pointerDownEvent=null;J._viewHandles=new M;J.coordinates=[];return J}A._inheritsLoose(F,T);var K=F.prototype;K.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};K.destroy=function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):
this._removeDrawTool();this.emit("destroy")};K.complete=function(){if("2d"===this.view.type){if(this._cursorScreenPoint){const J=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(J)&&(this._set("coordinates",J),this._completeDrawing())}}else this._drawTool.completeCreateOperation()};K._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",J=>{J.stopPropagation();const L=this.getCoordsFromScreenPoint(J.screenPoint);I.isSome(L)&&(this._set("coordinates",
L),this._drawCompleteHandler(J))},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",J=>{this._pointerDownEvent=J;this._cursorMoved=!1},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",J=>{this._cursorMoved=!0;this._cursorScreenPoint=z.createScreenPointFromEvent(J);this._cursorUpdateHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("pointer-up",J=>{if(this._pointerDownEvent&&!this._cursorMoved&&J.timestamp-this._pointerDownEvent.timestamp>this._clickDelay){this._cursorScreenPoint=z.createScreenPointFromEvent(J);
const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(L)&&(this._set("coordinates",L),this._drawCompleteHandler(J))}},N.ViewEventPriorities.TOOL),this.view.on("key-down",J=>{if(J.key===O.KEYS.drawCompleteKey&&this._cursorScreenPoint){const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(L)&&(this._set("coordinates",L),this._drawCompleteHandler(J))}},N.ViewEventPriorities.TOOL)])};K._removeViewHandles=function(){this._viewHandles.removeAll()};K._addDrawTool=function(J){this._drawTool=
new P.DrawTool({view:J,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("cursor-update",L=>{1===L.vertices.length&&this.emit("cursor-update",new C.CursorUpdateEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",L=>{this.emit("draw-complete",new C.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));
this._removeDrawTool()})};K._removeDrawTool=function(){I.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};K._updateCursor=function(J,L){I.isSome(J)?this.emit("cursor-update",new C.CursorUpdateEvent(this.view,L,0,[J])):this.emit("cursor-update",new C.CursorUpdateEvent(this.view,L,null,null))};K._completeDrawing=function(J){this._cursorMoved=!1;this._pointerDownEvent=null;J=new C.DrawCompleteEvent(J,[this.coordinates]);this.emit("draw-complete",
J);J.defaultPrevented||this._removeViewHandles()};K._cursorUpdateHandler=function(J){this._updateCursor(this.getCoordsFromScreenPoint(this._cursorScreenPoint),J.native)};K._drawCompleteHandler=function(J){this._completeDrawing(J.native)};return F}(r);w.__decorate([v.property({readOnly:!0})],q.PointDrawAction.prototype,"coordinates",void 0);q.PointDrawAction=w.__decorate([y.subclass("esri.views.draw.PointDrawAction")],q.PointDrawAction);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(q,A,w,S,I){const t={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};S=function(H){function v(y=t.maximumClickDelay,u=t.movementUntilMouseDrag,D=t.movementUntilPenDrag,B=t.movementUntilTouchDrag,M=t.holdDelay,N=w["default"]){var z=H.call(this,!1)||this;z.maximumClickDelay=y;z.movementUntilMouseDrag=u;z.movementUntilPenDrag=D;z.movementUntilTouchDrag=
B;z.holdDelay=M;z._clock=N;z._pointerState=new Map;z._pointerDrag=z.registerOutgoing("pointer-drag");z._immediateClick=z.registerOutgoing("immediate-click");z._pointerHold=z.registerOutgoing("hold");z.registerIncoming("pointer-down",z._handlePointerDown.bind(A._assertThisInitialized(z)));z.registerIncoming("pointer-up",E=>{z._handlePointerLoss(E,"pointer-up")});z.registerIncoming("pointer-capture-lost",E=>{z._handlePointerLoss(E,"pointer-capture-lost")});z.registerIncoming("pointer-cancel",E=>{z._handlePointerLoss(E,
"pointer-cancel")});z._moveHandle=z.registerIncoming("pointer-move",z._handlePointerMove.bind(A._assertThisInitialized(z)));z._moveHandle.pause();return z}A._inheritsLoose(v,H);var G=v.prototype;G.onUninstall=function(){this._pointerState.forEach(y=>{null!=y.holdTimeout&&(y.holdTimeout.remove(),y.holdTimeout=null)});H.prototype.onUninstall.call(this)};G._handlePointerDown=function(y){const u=y.data,D=u.native.pointerId;var B=null;0===this._pointerState.size&&(B=this._clock.setTimeout(()=>{const M=
this._pointerState.get(D);M&&(M.isDragging||(this._pointerHold.emit(M.previousEvent,void 0,y.modifiers),M.holdEmitted=!0),M.holdTimeout=null)},this.holdDelay));B={startEvent:u,previousEvent:u,startTimestamp:y.timestamp,isDragging:!1,downButton:u.native.button,holdTimeout:B,modifiers:new Set};this._pointerState.set(D,B);this.startCapturingPointer(u.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(y)};G._createPointerDragData=function(y,u,D){return{action:y,startEvent:u.startEvent,
previousEvent:u.previousEvent,currentEvent:D}};G._handlePointerMove=function(y){const u=y.data,D=this._pointerState.get(u.native.pointerId);if(D){if(D.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",D,u),void 0,D.modifiers);else{const B=I.euclideanDistance(u,D.startEvent),M=this._getDragThreshold(u.native.pointerType);B>M&&this.startDragging(y)}D.previousEvent=u}};G._getDragThreshold=function(y){switch(y){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;
default:return this.movementUntilMouseDrag}};G.startDragging=function(y){const u=y.data,D=u.native.pointerId;this._pointerState.forEach(B=>{null!=B.holdTimeout&&(B.holdTimeout.remove(),B.holdTimeout=null);B.isDragging||(B.modifiers=y.modifiers,B.isDragging=!0,D===B.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",B,u)):this._pointerDrag.emit(this._createPointerDragData("start",B,B.previousEvent),y.timestamp))})};G._handlePointerLoss=function(y,u){const D=y.data,
B=D.native.pointerId,M=this._pointerState.get(B);M&&(null!=M.holdTimeout&&(M.holdTimeout.remove(),M.holdTimeout=null),M.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",M,"pointer-up"===u?D:M.previousEvent),void 0,M.modifiers):"pointer-up"===u&&M.downButton===D.native.button&&y.timestamp-M.startTimestamp<=this.maximumClickDelay&&!M.holdEmitted&&this._immediateClick.emit(D),this._pointerState.delete(B),this.stopCapturingPointer(D.native),0===this._pointerState.size&&this._moveHandle.pause())};
return v}(S.InputHandler);q.DefaultParameters=t;q.PointerClickHoldAndDrag=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(q,A){q.euclideanDistance=function(w,S){const I=S.x-w.x;w=S.y-w.y;return Math.sqrt(I*I+w*w)};q.fitCircleLSQ=function(w,S){S?(S.radius=0,S.center.x=0,S.center.y=0):S={radius:0,center:A.createScreenPoint()};if(0===w.length)return S;if(1===w.length)return S.center.x=w[0].x,
S.center.y=w[0].y,S;if(2===w.length){const [z,E]=w,[r,C]=[E.x-z.x,E.y-z.y];S.radius=Math.sqrt(r*r+C*C)/2;S.center.x=(z.x+E.x)/2;S.center.y=(z.y+E.y)/2;return S}let I=0,t=0;for(S=0;S<w.length;S++)I+=w[S].x,t+=w[S].y;I/=w.length;t/=w.length;var H=w.map(z=>z.x-I),v=w.map(z=>z.y-t);let G=S=0;var y=0,u=0,D=0,B=0,M=0;for(var N=0;N<H.length;N++){const z=H[N],E=v[N],r=z*z,C=E*E;S+=r;G+=C;y+=z*E;u+=r*z;D+=C*E;B+=z*C;M+=E*r}H=S;v=y;N=G;u=.5*(u+B);D=.5*(D+M);M=H*N-y*v;B=(u*N-D*v)/M;D=(H*D-y*u)/M;M=A.createScreenPoint(B+
I,D+t);return{radius:Math.sqrt(B*B+D*D+(S+G)/w.length),center:M}};q.manhattanDistance=function(w,S){return Math.abs(S.x-w.x)+Math.abs(S.y-w.y)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Evented ./drawSurfaces ./DrawOperation ../../../../interactive/InteractiveToolBase ../../../../interactive/snapping/SnappingOptions".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r){q.DrawTool=function(C){function O(T){T=C.call(this,T)||this;T.drawOperation=null;T.hasZ=!0;T.defaultZ=0;T.elevationInfo=null;T.snapToScene=null;T.snappingOptions=new r.SnappingOptions;T.mode=null;T.geometryType=null;T.type="draw-3d";return T}A._inheritsLoose(O,C);var P=O.prototype;P.initialize=function(){const T=I.unwrapOr(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new z.DrawOperation({view:this.view,
manipulators:this.manipulators,geometryType:this.geometryType,drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new N.SceneDrawSurface(this.view,T),hasM:!1,elevationInfo:T,snappingOptions:this.snappingOptions});this.drawOperation.on("vertex-add",F=>this.onVertexAdd(F));this.drawOperation.on("vertex-remove",F=>this.onVertexRemove(F));this.drawOperation.on("vertex-update",F=>this.onVertexUpdate(F));this.drawOperation.on("cursor-update",
F=>this.onCursorUpdate(F));this.drawOperation.on("complete",F=>this.onComplete(F))};P.destroy=function(){this.drawOperation.destroy();this.drawOperation=null;this._set("view",null)};P.onInputEvent=function(T){this.drawOperation.onInputEvent(T)};P.reset=function(){};P.redo=function(){this.drawOperation.redo()};P.undo=function(){this.drawOperation.undo()};P.completeCreateOperation=function(){this.drawOperation.complete()};P.activate=function(){};P.deactivate=function(){this.drawOperation.isCompleted||
this.drawOperation.cancel()};P.getVertexCoords=function(){return this.drawOperation.vertices};P.onVertexAdd=function(T){this.emit("vertex-add",T)};P.onVertexRemove=function(T){this.emit("vertex-remove",T)};P.onVertexUpdate=function(T){this.emit("vertex-update",T)};P.onCursorUpdate=function(T){this.emit("cursor-update",T)};P.onComplete=function(T){this.emit("complete",T)};A._createClass(O,[{key:"enabled",set:function(T){this.drawOperation.interactive=T;this._set("enabled",T)}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},
{key:"canUndo",get:function(){return this.drawOperation.canUndo}}]);return O}(M.EventedMixin(E.InteractiveToolBase));w.__decorate([v.property({constructOnly:!0,nonNullable:!0})],q.DrawTool.prototype,"view",void 0);w.__decorate([v.property({value:!0})],q.DrawTool.prototype,"enabled",null);w.__decorate([v.property({constructOnly:!0})],q.DrawTool.prototype,"hasZ",void 0);w.__decorate([v.property({constructOnly:!0,nonNullable:!0})],q.DrawTool.prototype,"defaultZ",void 0);w.__decorate([v.property({constructOnly:!0})],
q.DrawTool.prototype,"elevationInfo",void 0);w.__decorate([v.property()],q.DrawTool.prototype,"snapToScene",void 0);w.__decorate([v.property({constructOnly:!0})],q.DrawTool.prototype,"snappingOptions",void 0);w.__decorate([v.property({constructOnly:!0})],q.DrawTool.prototype,"mode",void 0);w.__decorate([v.property({constructOnly:!0})],q.DrawTool.prototype,"geometryType",void 0);w.__decorate([v.property({readOnly:!0})],q.DrawTool.prototype,"type",void 0);q.DrawTool=w.__decorate([y.subclass("esri.views.3d.interactive.editingTools.draw.DrawTool")],
q.DrawTool);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/drawSurfaces":function(){define(["exports","../../../../../core/maybe","../../../../../core/screenUtils","../../../../../support/elevationInfoUtils","../../../../../layers/graphics/dehydratedFeatures"],function(q,A,w,S,I){let t=function(){function v(y,u,D){this.elevationInfo=y;this.defaultZ=u;this.view=D}var G=v.prototype;G.screenToMap=function(y){if(A.isSome(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(y.x,
y.y),this.elevationInfo,this.defaultZ);y=this.view.sceneIntersectionHelper.intersectElevationFromScreen(w.createScreenPointArray(y.x,y.y),this.elevationInfo,0);A.isSome(y)&&(y.z=void 0);return y};G.mapToScreen=function(y){y=I.makeDehydratedPoint(y.x,y.y,S.getConvertedElevation(this.view,y,this.elevationInfo),y.spatialReference);return this.view.toScreen(y)};return v}(),H=function(){function v(y,u,D=[]){this.view=y;this.elevationInfo=u;this.exclude=D}var G=v.prototype;G.screenToMap=function(y){y=this.view.toMap(y,
{exclude:this.exclude});A.isSome(y)&&(y.z=S.getZForElevationMode(y,this.view,this.elevationInfo));return y};G.mapToScreen=function(y){let u=y;A.isSome(this.elevationInfo)&&(u=I.makeDehydratedPoint(y.x,y.y,S.getConvertedElevation(this.view,y,this.elevationInfo),y.spatialReference));return this.view.toScreen(u)};return v}();q.ElevationDrawSurface=t;q.SceneDrawSurface=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe",
"../symbols/support/unitConversionUtils"],function(q,A,w){function S(G,y){return A.isNone(y)||!y.mode?G?"absolute-height":"on-the-ground":y.mode}function I(G,y){return S(A.isSome(G)?G.hasZ:!1,y)}function t(G){const y=H(G);return I(G.geometry,y)}function H(G){return G.layer&&"elevationInfo"in G.layer?G.layer.elevationInfo:null}function v(G,y,u,D,B,M,N=null){if(!A.isNone(M)){var z=A.isSome(N)?N.mode:"absolute-height";if("on-the-ground"===z)return 0;a:{const E=A.isSome(M.offset)?M.offset:0;switch(M.mode){case "absolute-height":M=
D+E;break a;case "on-the-ground":M=G.elevationProvider.getElevation(y,u,0,B,"ground")||0;break a;case "relative-to-ground":M=D+(G.elevationProvider.getElevation(y,u,D,B,"ground")||0)+E;break a;case "relative-to-scene":M=D+(G.elevationProvider.getElevation(y,u,D,B,"scene")||0)+E;break a}M=void 0}a:{N=A.isSome(N)&&A.isSome(N.offset)?N.offset:0;switch(z){case "absolute-height":G=M-N;break a;case "relative-to-ground":G=M-((G.elevationProvider.getElevation(y,u,D,B,"ground")||0)+N);break a;case "relative-to-scene":G=
M-((G.elevationProvider.getElevation(y,u,D,B,"scene")||0)+N);break a}G=void 0}return G}}q.getConvertedElevation=function(G,y,u,D=null){return v(G,y.x,y.y,y.hasZ?y.z:0,y.spatialReference,u,D)};q.getConvertedElevationFromMapPoint=function(G,y,u,D,B=null){return v(G,y[0],y[1],2<y.length?y[2]:0,u,D,B)};q.getEffectiveElevationMode=S;q.getGeometryEffectiveElevationMode=I;q.getGraphicEffectiveElevationInfo=function(G){var y=H(G);G=I(G.geometry,y);y=A.isSome(y)&&"on-the-ground"!==G?A.unwrapOr(y.offset,0)*
w.getMetersPerUnit(A.unwrapOr(y.unit,"meters")):0;return{mode:G,offset:y}};q.getGraphicEffectiveElevationMode=t;q.getZForElevationMode=function(G,y,u){if(!A.isNone(u)&&u.mode){var D=G.hasZ?G.z:0,B=A.isSome(u.offset)?u.offset:0;switch(u.mode){case "absolute-height":return D-B;case "on-the-ground":return 0;case "relative-to-ground":return G=(y.elevationProvider.getElevation(G.x,G.y,G.z,G.spatialReference,"ground")||0)+B,D-G;case "relative-to-scene":return G=(y.elevationProvider.getElevation(G.x,G.y,
G.z,G.spatialReference,"scene")||0)+B,D-G}}};q.hasGraphicFeatureExpressionInfo=function(G){if("on-the-ground"===t(G))return!1;G=H(G);G=A.isSome(G)&&G.featureExpressionInfo?G.featureExpressionInfo.expression:null;return!(!G||"0"===G)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatures":function(){define("exports ../../core/has ../../core/typedArrayUtil ../../core/maybe ../../geometry/SpatialReference ../../geometry/support/typeUtils ../../core/uid ../../geometry/support/aaBoundingRect ../support/Field ../../core/byteSizeEstimations ../../geometry/support/aaBoundingBox ../../geometry/support/quantizationUtils ./dehydratedFeatureComparison".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){function M(P,T,F){if(!P)return null;switch(T){case "point":return{x:P.x,y:P.y,z:P.z,m:P.m,hasZ:null!=P.z,hasM:null!=P.m,type:"point",spatialReference:F};case "polyline":return{paths:P.paths,hasZ:!!P.hasZ,hasM:!!P.hasM,type:"polyline",spatialReference:F};case "polygon":return{rings:P.rings,hasZ:!!P.hasZ,hasM:!!P.hasM,type:"polygon",spatialReference:F};case "multipoint":return{points:P.points,hasZ:!!P.hasZ,hasM:!!P.hasM,type:"multipoint",spatialReference:F}}}function N(P){if(!P)return 0;
let T=32;for(const F in P)if(P.hasOwnProperty(F)){const K=P[F];switch(typeof K){case "string":T+=y.estimateStringByteSize(K);break;default:case "number":T+=y.estimateNumberByteSize()}}return T}function z(P){if(S.isNone(P))return 0;let T=32;switch(P.type){case "point":T+=42;break;case "polyline":case "polygon":{var F=0;const K=2+(P.hasZ?1:0)+(P.hasM?1:0);P="polyline"===P.type?P.paths:P.rings;for(const J of P)F+=J.length;T+=8*F*K+64;T+=128*F;T=T+34+32*(P.length+1);break}case "multipoint":F=P.points.length;
T+=8*F*(2+(P.hasZ?1:0)+(P.hasM?1:0))+64;T+=128*F;T=T+34+32;break;case "extent":T+=98;P.hasM&&(T+=32);P.hasZ&&(T+=32);break;case "mesh":T+=w.estimateSize(P.vertexAttributes.position),T+=w.estimateSize(P.vertexAttributes.normal),T+=w.estimateSize(P.vertexAttributes.uv),T+=w.estimateSize(P.vertexAttributes.tangent)}return T}function E(P,T){u.empty(T);"mesh"===P.type&&(P=P.extent);switch(P.type){case "point":T[0]=T[3]=P.x;T[1]=T[4]=P.y;P.hasZ&&(T[2]=T[5]=P.z);break;case "polyline":for(var F=0;F<P.paths.length;F++)u.expandWithNestedArray(T,
P.paths[F],P.hasZ);break;case "polygon":for(F=0;F<P.rings.length;F++)u.expandWithNestedArray(T,P.rings[F],P.hasZ);break;case "multipoint":u.expandWithNestedArray(T,P.points,P.hasZ);break;case "extent":T[0]=P.xmin,T[1]=P.ymin,T[3]=P.xmax,T[4]=P.ymax,null!=P.zmin&&(T[2]=P.zmin),null!=P.zmax&&(T[5]=P.zmax)}}function r(P,T){v.empty(T);"mesh"===P.type&&(P=P.extent);switch(P.type){case "point":T[0]=T[2]=P.x;T[1]=T[3]=P.y;break;case "polyline":for(var F=0;F<P.paths.length;F++)v.expandWithNestedArray(T,P.paths[F]);
break;case "polygon":for(F=0;F<P.rings.length;F++)v.expandWithNestedArray(T,P.rings[F]);break;case "multipoint":v.expandWithNestedArray(T,P.points);break;case "extent":T[0]=P.xmin,T[1]=P.ymin,T[2]=P.xmax,T[3]=P.ymax}}const C=u.create(),O=v.create();q.equals=B.equals;q.DehydratedFeatureClass=function(P,T,F){this.uid=P;this.geometry=T;this.attributes=F;this.visible=!0;this.centroid=this.objectId=null};q.DehydratedFeatureSetClass=function(){this.exceededTransferLimit=!1;this.features=[];this.fields=
[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null};q.computeAABB=E;q.computeAABR=r;q.estimateAttributesObjectSize=N;q.estimateGeometryObjectSize=z;q.estimateSize=function(P){let T;T=32+N(P.attributes);return T=T+3+(8+z(P.geometry))};q.expandAABB=function(P,T){E(P,C);u.expandWithAABB(T,C)};q.expandAABR=function(P,T){r(P,O);v.expand(T,O)};q.fromFeatureSetJSON=function(P){const T=
t.featureGeometryTypeKebabDictionary.fromJSON(P.geometryType),F=I.fromJSON(P.spatialReference),K=P.transform,J=P.features.map(L=>{var Y=P.objectIdFieldName;L={uid:H.generateUID(),objectId:Y&&L.attributes?L.attributes[Y]:null,attributes:L.attributes,geometry:M(L.geometry,T,F),visible:!0};if((Y=L.geometry)&&K)switch(Y.type){case "point":L.geometry=D.unquantizePoint(K,Y,Y,Y.hasZ,Y.hasM);break;case "multipoint":L.geometry=D.unquantizeMultipoint(K,Y,Y,Y.hasZ,Y.hasM);break;case "polygon":L.geometry=D.unquantizePolygon(K,
Y,Y,Y.hasZ,Y.hasM);break;case "polyline":L.geometry=D.unquantizePolyline(K,Y,Y,Y.hasZ,Y.hasM)}return L});return{geometryType:T,features:J,spatialReference:F,fields:P.fields?P.fields.map(L=>G.fromJSON(L)):null,objectIdFieldName:P.objectIdFieldName,globalIdFieldName:P.globalIdFieldName,geohashFieldName:P.geohashFieldName,geometryProperties:P.geometryProperties,hasZ:P.hasZ,hasM:P.hasM,exceededTransferLimit:P.exceededTransferLimit,transform:null}};q.fromJSONGeometry=M;q.getObjectId=function(P,T){return null!=
P.objectId?P.objectId:P.attributes&&T?P.attributes[T]:null};q.hasGeometry=function(P){return S.isSome(P.geometry)};q.hasVertices=function(P){if(!P)return!1;switch(P.type){case "extent":case "point":return!0;case "polyline":for(const T of P.paths)if(0<T.length)return!0;return!1;case "polygon":for(const T of P.rings)if(0<T.length)return!0;return!1;case "multipoint":return 0<P.points.length;case "mesh":return P.vertexAttributes&&P.vertexAttributes.position&&0<P.vertexAttributes.position.length}};q.isDehydratedPoint=
function(P){return"point"===P.type};q.isFeatureGeometry=function(P){return t.isFeatureGeometryType(P.type)};q.makeDehydratedPoint=function(P,T,F,K){return{x:P,y:T,z:F,hasZ:null!=F,hasM:!1,spatialReference:K,type:"point"}};q.numVertices=function(P){if(S.isNone(P))return 0;switch(P.type){case "point":return 1;case "polyline":var T=0;for(var F of P.paths)T+=F.length;return T;case "polygon":F=0;for(T of P.rings)F+=T.length;return F;case "multipoint":return P.points.length;case "extent":return 2;case "mesh":return(P=
P.vertexAttributes&&P.vertexAttributes.position)?P.length/3:0}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(q,A,w){function S(B=D){return[B[0],B[1],B[2],B[3]]}function I(B){return B[0]>=B[2]?0:B[2]-B[0]}function t(B){return B[1]>=B[3]?0:B[3]-B[1]}function H(B,M,N){return M>=B[0]&&N>=B[1]&&M<=B[2]&&N<=B[3]}function v(B,M){B[0]=M[0];B[1]=M[1];B[2]=M[2];B[3]=M[3];return B}function G(B){return 4===
B.length}function y(B,M,N){return B<M?M:B>N?N:B}const u=[Infinity,Infinity,-Infinity,-Infinity],D=[0,0,0,0];q.NEGATIVE_INFINITY=u;q.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];q.UNIT=[0,0,1,1];q.ZERO=D;q.allFinite=function(B){for(let M=0;4>M;M++)if(!isFinite(B[M]))return!1;return!0};q.area=function(B){return I(B)*t(B)};q.center=function(B,M=[0,0]){M[0]=(B[0]+B[2])/2;M[1]=(B[1]+B[3])/2;return M};q.clone=function(B){return[B[0],B[1],B[2],B[3]]};q.contains=function(B,M){return M[0]>=B[0]&&
M[2]<=B[2]&&M[1]>=B[1]&&M[3]<=B[3]};q.containsPoint=function(B,M){return H(B,M[0],M[1])};q.containsPointObject=function(B,M){return H(B,M.x,M.y)};q.containsPointWithMargin=function(B,M,N){return M[0]>=B[0]-N&&M[1]>=B[1]-N&&M[0]<=B[2]+N&&M[1]<=B[3]+N};q.containsXY=H;q.create=S;q.diameter=function(B){const M=I(B);B=t(B);return Math.sqrt(M*M+B*B)};q.distance=function(B,M){const N=(B[1]+B[3])/2,z=Math.max(Math.abs(M[0]-(B[0]+B[2])/2)-I(B)/2,0);B=Math.max(Math.abs(M[1]-N)-t(B)/2,0);return Math.sqrt(z*
z+B*B)};q.empty=function(B){return B?v(B,u):S(u)};q.equals=function(B,M,N){if(null==B||null==M)return B===M;if(!G(B)||!G(M))return!1;if(N)for(let z=0;z<B.length;z++){if(!N(B[z],M[z]))return!1}else for(N=0;N<B.length;N++)if(B[N]!==M[N])return!1;return!0};q.expand=function(B,M,N=B){if("length"in M)if(G(M))N[0]=Math.min(B[0],M[0]),N[1]=Math.min(B[1],M[1]),N[2]=Math.max(B[2],M[2]),N[3]=Math.max(B[3],M[3]);else{if(2===M.length||3===M.length)N[0]=Math.min(B[0],M[0]),N[1]=Math.min(B[1],M[1]),N[2]=Math.max(B[2],
M[0]),N[3]=Math.max(B[3],M[1])}else switch(M.type){case "extent":N[0]=Math.min(B[0],M.xmin);N[1]=Math.min(B[1],M.ymin);N[2]=Math.max(B[2],M.xmax);N[3]=Math.max(B[3],M.ymax);break;case "point":N[0]=Math.min(B[0],M.x),N[1]=Math.min(B[1],M.y),N[2]=Math.max(B[2],M.x),N[3]=Math.max(B[3],M.y)}return N};q.expandPointInPlace=function(B,M){M[0]<B[0]&&(B[0]=M[0]);M[0]>B[2]&&(B[2]=M[0]);M[1]<B[1]&&(B[1]=M[1]);M[1]>B[3]&&(B[3]=M[1])};q.expandWithNestedArray=function(B,M,N=B){const z=M.length;let E=B[0],r=B[1],
C=B[2];B=B[3];for(let O=0;O<z;O++){const P=M[O];E=Math.min(E,P[0]);r=Math.min(r,P[1]);C=Math.max(C,P[0]);B=Math.max(B,P[1])}N[0]=E;N[1]=r;N[2]=C;N[3]=B;return N};q.fromExtent=function(B,M=S()){M[0]=B.xmin;M[1]=B.ymin;M[2]=B.xmax;M[3]=B.ymax;return M};q.fromValues=function(B,M,N,z,E=S()){E[0]=B;E[1]=M;E[2]=N;E[3]=z;return E};q.height=t;q.intersection=function(B,M,N=B){const z=M[0],E=M[1],r=M[2];M=M[3];N[0]=y(B[0],z,r);N[1]=y(B[1],E,M);N[2]=y(B[2],z,r);N[3]=y(B[3],E,M);return N};q.intersects=function(B,
M){return Math.max(M[0],B[0])<=Math.min(M[2],B[2])&&Math.max(M[1],B[1])<=Math.min(M[3],B[3])};q.is=G;q.isPoint=function(B){return(0===I(B)||!isFinite(B[0]))&&(0===t(B)||!isFinite(B[1]))};q.offset=function(B,M,N,z=B){z[0]=B[0]+M;z[1]=B[1]+N;z[2]=B[2]+M;z[3]=B[3]+N;return z};q.pad=function(B,M,N=B){N[0]=B[0]-M;N[1]=B[1]-M;N[2]=B[2]+M;N[3]=B[3]+M;return N};q.set=v;q.setMax=function(B,M,N=B){N[2]=M[0];N[3]=M[1];N!==B&&(N[0]=B[0],N[1]=B[1]);return B};q.setMin=function(B,M,N=B){N[0]=M[0];N[1]=M[1];N!==
B&&(N[2]=B[2],N[3]=B[3]);return N};q.size=function(B,M){M[0]=B[2]-B[0];M[1]=B[3]-B[1]};q.toExtent=function(B,M){return new w({xmin:B[0],ymin:B[1],xmax:B[2],ymax:B[3],spatialReference:M})};q.width=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(q){q.estimateNumberByteSize=function(){return 16};q.estimateStringByteSize=function(A){return 32+A.length};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../../core/maybe","../Extent","./aaBoundingRect"],function(q,A,w,S){function I(z=M){return[z[0],z[1],z[2],z[3],z[4],z[5]]}function t(z,E,r,C,O,P,T=I()){T[0]=z;T[1]=E;T[2]=r;T[3]=C;T[4]=O;T[5]=P;return T}function H(z){return z[0]>=z[3]?0:z[3]-z[0]}function v(z){return z[1]>=z[4]?0:z[4]-z[1]}function G(z){return z[2]>=z[5]?0:z[5]-z[2]}function y(z,E){return Math.max(E[0],z[0])<=Math.min(E[3],z[3])&&Math.max(E[1],z[1])<=Math.min(E[4],z[4])&&Math.max(E[2],z[2])<=Math.min(E[5],z[5])}function u(z,E){z[0]=
E[0];z[1]=E[1];z[2]=E[2];z[3]=E[3];z[4]=E[4];z[5]=E[5];return z}function D(z){return 6===z.length}const B=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],M=[0,0,0,0,0,0],N=I();q.NEGATIVE_INFINITY=B;q.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];q.ZERO=M;q.allFinite=function(z){for(let E=0;6>E;E++)if(!isFinite(z[E]))return!1;return!0};q.center=function(z,E=[0,0,0]){E[0]=z[0]+H(z)/2;E[1]=z[1]+v(z)/2;E[2]=z[2]+G(z)/2;return E};q.contains=function(z,E){return E[0]>=
z[0]&&E[1]>=z[1]&&E[2]>=z[2]&&E[3]<=z[3]&&E[4]<=z[4]&&E[5]<=z[5]};q.containsPoint=function(z,E){return E[0]>=z[0]&&E[1]>=z[1]&&E[2]>=z[2]&&E[0]<=z[3]&&E[1]<=z[4]&&E[2]<=z[5]};q.containsPointWithMargin=function(z,E,r){return E[0]>=z[0]-r&&E[1]>=z[1]-r&&E[2]>=z[2]-r&&E[0]<=z[3]+r&&E[1]<=z[4]+r&&E[2]<=z[5]+r};q.create=I;q.depth=v;q.diameter=function(z){const E=H(z),r=G(z);z=v(z);return Math.sqrt(E*E+r*r+z*z)};q.empty=function(z){return z?u(z,B):I(B)};q.equals=function(z,E,r){if(A.isNone(z)||A.isNone(E))return z===
E;if(!D(z)||!D(E))return!1;if(r)for(let C=0;C<z.length;C++){if(!r(z[C],E[C]))return!1}else for(r=0;r<z.length;r++)if(z[r]!==E[r])return!1;return!0};q.expandWithAABB=function(z,E){z[0]=Math.min(z[0],E[0]);z[1]=Math.min(z[1],E[1]);z[2]=Math.min(z[2],E[2]);z[3]=Math.max(z[3],E[3]);z[4]=Math.max(z[4],E[4]);z[5]=Math.max(z[5],E[5])};q.expandWithBuffer=function(z,E,r=0,C=E.length/3){let O=z[0],P=z[1],T=z[2],F=z[3],K=z[4],J=z[5];for(let L=0;L<C;L++)O=Math.min(O,E[r+3*L]),P=Math.min(P,E[r+3*L+1]),T=Math.min(T,
E[r+3*L+2]),F=Math.max(F,E[r+3*L]),K=Math.max(K,E[r+3*L+1]),J=Math.max(J,E[r+3*L+2]);z[0]=O;z[1]=P;z[2]=T;z[3]=F;z[4]=K;z[5]=J};q.expandWithNestedArray=function(z,E,r){const C=E.length;let O=z[0],P=z[1],T=z[2],F=z[3],K=z[4],J=z[5];if(r)for(r=0;r<C;r++){var L=E[r];O=Math.min(O,L[0]);P=Math.min(P,L[1]);T=Math.min(T,L[2]);F=Math.max(F,L[0]);K=Math.max(K,L[1]);J=Math.max(J,L[2])}else for(r=0;r<C;r++)L=E[r],O=Math.min(O,L[0]),P=Math.min(P,L[1]),F=Math.max(F,L[0]),K=Math.max(K,L[1]);z[0]=O;z[1]=P;z[2]=
T;z[3]=F;z[4]=K;z[5]=J};q.expandWithOffset=function(z,E,r,C){z[0]=Math.min(z[0],z[0]+E);z[3]=Math.max(z[3],z[3]+E);z[1]=Math.min(z[1],z[1]+r);z[4]=Math.max(z[4],z[4]+r);z[2]=Math.min(z[2],z[2]+C);z[5]=Math.max(z[5],z[5]+C)};q.expandWithRect=function(z,E){z[0]=Math.min(z[0],E[0]);z[1]=Math.min(z[1],E[1]);z[3]=Math.max(z[3],E[2]);z[4]=Math.max(z[4],E[3])};q.expandWithVec3=function(z,E){z[0]=Math.min(z[0],E[0]);z[1]=Math.min(z[1],E[1]);z[2]=Math.min(z[2],E[2]);z[3]=Math.max(z[3],E[0]);z[4]=Math.max(z[4],
E[1]);z[5]=Math.max(z[5],E[2])};q.fromExtent=function(z,E=I()){E[0]=z.xmin;E[1]=z.ymin;E[2]=z.zmin;E[3]=z.xmax;E[4]=z.ymax;E[5]=z.zmax;return E};q.fromMinMax=function(z,E,r=I()){r[0]=z[0];r[1]=z[1];r[2]=z[2];r[3]=E[0];r[4]=E[1];r[5]=E[2];return r};q.fromRect=function(z,E){z[0]=E[0];z[1]=E[1];z[2]=Number.NEGATIVE_INFINITY;z[3]=E[2];z[4]=E[3];z[5]=Number.POSITIVE_INFINITY;return z};q.fromValues=t;q.getMax=function(z,E){E[0]=z[3];E[1]=z[4];E[2]=z[5];return E};q.getMin=function(z,E){E[0]=z[0];E[1]=z[1];
E[2]=z[2];return E};q.height=G;q.intersects=y;q.intersectsClippingArea=function(z,E){return A.isNone(E)?!0:y(z,E)};q.is=D;q.isPoint=function(z){return 0===H(z)&&0===v(z)&&0===G(z)};q.maximumDimension=function(z){return Math.max(H(z),G(z),v(z))};q.offset=function(z,E,r,C,O=z){O[0]=z[0]+E;O[1]=z[1]+r;O[2]=z[2]+C;O[3]=z[3]+E;O[4]=z[4]+r;O[5]=z[5]+C;return O};q.scale=function(z,E,r=z){const C=z[0]+H(z)/2,O=z[1]+v(z)/2,P=z[2]+G(z)/2;r[0]=C+(z[0]-C)*E;r[1]=O+(z[1]-O)*E;r[2]=P+(z[2]-P)*E;r[3]=C+(z[3]-C)*
E;r[4]=O+(z[4]-O)*E;r[5]=P+(z[5]-P)*E;return r};q.set=u;q.setMax=function(z,E,r=z){r[3]=E[0];r[4]=E[1];r[5]=E[2];r!==z&&(r[0]=z[0],r[1]=z[1],r[2]=z[2]);return z};q.setMin=function(z,E,r=z){r[0]=E[0];r[1]=E[1];r[2]=E[2];r!==z&&(r[3]=z[3],r[4]=z[4],r[5]=z[5]);return r};q.size=function(z,E=[0,0,0]){E[0]=H(z);E[1]=v(z);E[2]=G(z);return E};q.toExtent=function(z,E){return isFinite(z[2])||isFinite(z[5])?new w({xmin:z[0],xmax:z[3],ymin:z[1],ymax:z[4],zmin:z[2],zmax:z[5],spatialReference:E}):new w({xmin:z[0],
xmax:z[3],ymin:z[1],ymax:z[4],spatialReference:E})};q.toRect=function(z,E){E||(E=S.create());E[0]=z[0];E[1]=z[1];E[2]=z[3];E[3]=z[4];return E};q.width=H;q.wrap=function(z,E,r,C,O,P){return t(z,E,r,C,O,P,N)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(q,A){function w({scale:L,translate:Y},W){return Math.round((W-Y[0])/L[0])}function S({scale:L,translate:Y},W){return Math.round((Y[1]-W)/L[1])}function I(L,
Y,W){const aa=[];let oa,ta,la,X;for(let U=0;U<W.length;U++){const ka=W[U];if(0<U){if(la=w(L,ka[0]),X=S(L,ka[1]),la!==oa||X!==ta)aa.push(Y(ka,la-oa,X-ta)),oa=la,ta=X}else oa=w(L,ka[0]),ta=S(L,ka[1]),aa.push(Y(ka,oa,ta))}return 0<aa.length?aa:null}function t(L,Y,W,aa){return I(L,W?aa?J:K:aa?K:F,Y)}function H(L,Y,W,aa){const oa=[];W=W?aa?J:K:aa?K:F;for(aa=0;aa<Y.length;aa++){const ta=I(L,W,Y[aa]);ta&&3<=ta.length&&oa.push(ta)}return oa.length?oa:null}function v(L,Y,W,aa){const oa=[];W=W?aa?J:K:aa?K:
F;for(aa=0;aa<Y.length;aa++){const ta=I(L,W,Y[aa]);ta&&2<=ta.length&&oa.push(ta)}return oa.length?oa:null}function G({scale:L,translate:Y},W){return W*L[0]+Y[0]}function y({scale:L,translate:Y},W){return Y[1]-W*L[1]}function u(L,Y,W){const aa=Array(W.length);if(!W.length)return aa;const [oa,ta]=L.scale;let la=G(L,W[0][0]);L=y(L,W[0][1]);aa[0]=Y(W[0],la,L);for(let X=1;X<W.length;X++){const U=W[X];la+=U[0]*oa;L-=U[1]*ta;aa[X]=Y(U,la,L)}return aa}function D(L,Y,W){const aa=Array(W.length);for(let oa=
0;oa<W.length;oa++)aa[oa]=u(L,Y,W[oa]);return aa}function B(L,Y,W,aa){return u(L,W?aa?J:K:aa?K:F,Y)}function M(L,Y,W,aa){return D(L,W?aa?J:K:aa?K:F,Y)}function N(L,Y,W,aa){return D(L,W?aa?J:K:aa?K:F,Y)}function z(L,Y,W){let [aa,oa]=W[0],ta=Math.min(aa,Y[0]),la=Math.min(oa,Y[1]),X=Math.max(aa,Y[2]);Y=Math.max(oa,Y[3]);for(let U=1;U<W.length;U++){const [ka,sa]=W[U];aa+=ka;oa+=sa;0>ka&&(ta=Math.min(ta,aa));0<ka&&(X=Math.max(X,aa));0>sa?la=Math.min(la,oa):0<sa&&(Y=Math.max(Y,oa))}L[0]=ta;L[1]=la;L[2]=
X;L[3]=Y;return L}function E(L,Y){if(!Y.length)return null;L[0]=L[1]=Number.POSITIVE_INFINITY;L[2]=L[3]=Number.NEGATIVE_INFINITY;for(let W=0;W<Y.length;W++)z(L,L,Y[W]);return L}function r(L,Y,W,aa,oa){Y.xmin=w(L,W.xmin);Y.ymin=S(L,W.ymin);Y.xmax=w(L,W.xmax);Y.ymax=S(L,W.ymax);Y!==W&&(aa&&(Y.zmin=W.zmin,Y.zmax=W.zmax),oa&&(Y.mmin=W.mmin,Y.mmax=W.mmax));return Y}function C(L,Y,W,aa,oa){Y.points=t(L,W.points,aa,oa);return Y}function O(L,Y,W,aa,oa){Y.x=w(L,W.x);Y.y=S(L,W.y);Y!==W&&(aa&&(Y.z=W.z),oa&&
(Y.m=W.m));return Y}function P(L,Y,W,aa,oa){L=H(L,W.rings,aa,oa);if(!L)return null;Y.rings=L;return Y}function T(L,Y,W,aa,oa){L=v(L,W.paths,aa,oa);if(!L)return null;Y.paths=L;return Y}const F=(L,Y,W)=>[Y,W],K=(L,Y,W)=>[Y,W,L[2]],J=(L,Y,W)=>[Y,W,L[2],L[3]];q.equals=function(L,Y){if(L===Y||null==L&&null==Y)return!0;if(null==L||null==Y)return!1;let W,aa,oa,ta;L&&"upperLeft"===L.originPosition?(W=L.translate[0],aa=L.translate[1],L=L.scale[0]):(W=L.extent.xmin,aa=L.extent.ymax,L=L.tolerance);Y&&"upperLeft"===
Y.originPosition?(oa=Y.translate[0],ta=Y.translate[1],Y=Y.scale[0]):(oa=Y.extent.xmin,ta=Y.extent.ymax,Y=Y.tolerance);return W===oa&&aa===ta&&L===Y};q.getQuantizedBoundsCoordsArray=z;q.getQuantizedBoundsCoordsArrayArray=E;q.getQuantizedBoundsPaths=function(L){return E([0,0,0,0],L)};q.getQuantizedBoundsPoints=function(L){const Y=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return z(Y,Y,L)};q.getQuantizedBoundsRings=function(L){return E([0,0,
0,0],L)};q.quantizeBounds=function(L,Y,W){Y[0]=w(L,W[0]);Y[3]=S(L,W[1]);Y[2]=w(L,W[2]);Y[1]=S(L,W[3]);return Y};q.quantizeExtent=r;q.quantizeGeometry=function(L,Y){return L&&Y?A.isPoint(Y)?O(L,{},Y,!1,!1):A.isPolyline(Y)?T(L,{},Y,!1,!1):A.isPolygon(Y)?P(L,{},Y,!1,!1):A.isMultipoint(Y)?C(L,{},Y,!1,!1):A.isExtent(Y)?r(L,{},Y,!1,!1):null:null};q.quantizeMultipoint=C;q.quantizePaths=v;q.quantizePoint=O;q.quantizePoints=t;q.quantizePolygon=P;q.quantizePolyline=T;q.quantizeRings=H;q.quantizeX=w;q.quantizeY=
S;q.toQuantizationTransform=function(L){return L?{originPosition:"upper-left"===L.originPosition?"upperLeft":"lower-left"===L.originPosition?"lowerLeft":L.originPosition,scale:[L.tolerance,L.tolerance],translate:[L.extent.xmin,L.extent.ymax]}:null};q.unquantizeBounds=function(L,Y,W){return W?(Y[0]=G(L,W[0]),Y[1]=y(L,W[3]),Y[2]=G(L,W[2]),Y[3]=y(L,W[1]),Y):[G(L,Y[0]),y(L,Y[3]),G(L,Y[2]),y(L,Y[1])]};q.unquantizeCoordsArray=u;q.unquantizeCoordsArrayArray=D;q.unquantizeExtent=function(L,Y,W,aa,oa){Y.xmin=
G(L,W.xmin);Y.ymin=y(L,W.ymin);Y.xmax=G(L,W.xmax);Y.ymax=y(L,W.ymax);Y!==W&&(aa&&(Y.zmin=W.zmin,Y.zmax=W.zmax),oa&&(Y.mmin=W.mmin,Y.mmax=W.mmax));return Y};q.unquantizeMultipoint=function(L,Y,W,aa,oa){Y.points=B(L,W.points,aa,oa);return Y};q.unquantizePaths=M;q.unquantizePoint=function(L,Y,W,aa,oa){Y.x=G(L,W.x);Y.y=y(L,W.y);Y!==W&&(aa&&(Y.z=W.z),oa&&(Y.m=W.m));return Y};q.unquantizePoints=B;q.unquantizePolygon=function(L,Y,W,aa,oa){Y.rings=N(L,W.rings,aa,oa);return Y};q.unquantizePolyline=function(L,
Y,W,aa,oa){Y.paths=M(L,W.paths,aa,oa);return Y};q.unquantizeRings=N;q.unquantizeX=G;q.unquantizeY=y;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/maybe"],function(q,A,w){function S(G,y){if(G===y)return!0;if(null==G||null==y||G.length!==y.length)return!1;for(let u=0;u<G.length;u++){const D=G[u],B=y[u];if(D.length!==B.length)return!1;for(let M=0;M<D.length;M++)if(D[M]!==B[M])return!1}return!0}
function I(G,y){if(G===y)return!0;if(null==G||null==y||G.length!==y.length)return!1;for(let u=0;u<G.length;u++)if(!S(G[u],y[u]))return!1;return!0}function t(G,y){return G===y||G&&y&&G.equals(y)}function H(G,y){if(G===y)return!0;if(w.isNone(G)||w.isNone(y)||G.type!==y.type)return!1;switch(G.type){case "point":return G=t(G.spatialReference,y.spatialReference)?G.x===y.x&&G.y===y.y&&G.z===y.z&&G.m===y.m:!1,G;case "extent":return G=G.hasZ!==y.hasZ||G.hasM!==y.hasM?!1:t(G.spatialReference,y.spatialReference)?
G.xmin===y.xmin&&G.ymin===y.ymin&&G.zmin===y.zmin&&G.xmax===y.xmax&&G.ymax===y.ymax&&G.zmax===y.zmax:!1,G;case "polyline":return G=G.hasZ!==y.hasZ||G.hasM!==y.hasM?!1:t(G.spatialReference,y.spatialReference)?I(G.paths,y.paths):!1,G;case "polygon":return G=G.hasZ!==y.hasZ||G.hasM!==y.hasM?!1:t(G.spatialReference,y.spatialReference)?I(G.rings,y.rings):!1,G;case "multipoint":return G=G.hasZ!==y.hasZ||G.hasM!==y.hasM?!1:t(G.spatialReference,y.spatialReference)?S(G.points,y.points):!1,G;case "mesh":return!1}}
function v(G,y){if(G===y)return!0;if(!G||!y)return!1;const u=Object.keys(G),D=Object.keys(y);if(u.length!==D.length)return!1;for(const B of u)if(G[B]!==y[B])return!1;return!0}q.equals=function(G,y){return G===y?!0:null!=G&&null!=y&&G.objectId===y.objectId&&H(G.geometry,y.geometry)&&v(G.attributes,y.attributes)?!0:!1};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawOperation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../geometry/Point ../../../../../geometry ../../../../../core/Evented ../../../../../core/screenUtils ../../../../../core/Handles ../../../../../core/watchUtils ../coordinateHelper ./DrawManipulator ./drawSurfaces ../editGeometry/EditGeometry ../editGeometry/EditGeometryHelper ../../../../draw/DrawingMode ../../../../interactive/dragEventPipeline ../../../../interactive/snapping/SnappingAlgorithm ../../../../interactive/snapping/SnappingEngine".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J,L,Y,W){q.DrawOperation=function(oa){function ta(X){var U=oa.call(this)||this;U._manipulator=null;U._stagedVertex=null;U.geometryType=null;U.elevationInfo=null;U.snapToSceneEnabled=null;U._handles=new r;U._defaultZ=0;U._elevationDrawSurface=null;U._snappingDrawSurface=null;U._snappingEnabled=!1;U._createOperationCompleted=!1;U._pointerDownStates=new Set;U.view=X.view;U.drawingMode=I.unwrapOr(X.drawingMode,J.defaultDrawingMode);U.geometryType=
X.geometryType;U.elevationInfo=X.elevationInfo;U.coordinateHelper=O.createCoordinateHelper(X.hasZ,X.hasM,U.view.spatialReference,U.view.viewingMode);U._defaultZ=X.defaultZ;U.snapToSceneEnabled=X.snapToSceneEnabled;U.snappingEngine=new W.SnappingEngine(X.snappingOptions);U._snappingEnabled=X.snappingOptions.selfEnabled;U._handles.add(C.watch(X.snappingOptions,"selfEnabled",()=>{U._snappingEnabled=X.snappingOptions.selfEnabled}));U._snappingDrawSurface=I.unwrap(X.snappingDrawSurface);U._elevationDrawSurface=
new T.ElevationDrawSurface(U.elevationInfo,U._defaultZ,U.view);U._editGeometry=new K.EditGeometryHelper(new F.EditGeometry(U.coordinateHelper),"segment"===U.geometryType?"polyline":U.geometryType);U._activeComponent=new F.Component(U._editGeometry.data);U._editGeometry.data.components.push(U._activeComponent);U._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],na=>{const pa=na.vertices.map(ja=>({componentIndex:0,vertexIndex:ja.index,coordinates:U.coordinateHelper.toArray(ja.pos)})),
va=pa.map(ja=>ja.coordinates);switch(na.type){case "vertex-add":U.emit(na.type,{...na,added:va,vertices:pa});break;case "vertex-update":U.emit(na.type,{...na,updated:va,vertices:pa});break;case "vertex-remove":U.emit(na.type,{...na,removed:va,vertices:pa})}});U._manipulator=new P.DrawManipulator({grabbableForEvent:na=>"click"!==U.drawingMode?!0:"touch"===na.pointerType&&U._snappingEnabled&&1===U._pointerDownStates.size});X.manipulators.add(U._manipulator);U._manipulator.grabbable="point"!==U.geometryType;
const ka=U.createManipulatorDragPipeline(U._manipulator),sa=U._manipulator.events.on("immediate-double-click",na=>{U._manipulator.dragging||"point"===U.geometryType||(U.complete(),na.stopPropagation())}),qa=U._manipulator.events.on("immediate-click",na=>{if(!U._manipulator.dragging){var pa=U._activeComponent,va=U._closeOnClickVertexIndex(na.screenPoint);if(I.isSome(va))U.discardStagedVertex(),U.complete();else if(va=U._screenToMap(na.screenPoint),I.isSome(va))switch(U.drawingMode){case "click":case "hybrid":U.hasStagedVertex?
U.commitStagedVertex():U._editGeometry.appendVertex(U.coordinateHelper.fromPoint(va)),("point"===U.geometryType||"segment"===U.geometryType&&2===pa.vertices.length||"segment"===U.geometryType&&"hybrid"===U.drawingMode&&1===pa.vertices.length)&&U.complete()}na.stopPropagation()}});U._handles.add([ka,qa,sa]);return U}A._inheritsLoose(ta,oa);var la=ta.prototype;la.createManipulatorDragPipeline=function(X){switch(this.drawingMode){case "click":return this.createManipulatorDragPipelineClick(X);case "freehand":return this.createManipulatorDragPipelineFreehand(X);
case "hybrid":return this.createManipulatorDragPipelineHybrid(X)}};la.createManipulatorDragPipelineClick=function(X){return L.createManipulatorDragEventPipeline(X,(U,ka,sa,qa)=>{const na="touch"===qa&&this._snappingEnabled;if(!this.isCompleted&&na){var pa=null;ka.next(this._screenToMapDragEventStep()).next(va=>{"start"===va.action&&(this.stagedVertex=va.mapStart,("segment"===this.geometryType||na&&0===this.vertices.length)&&this.commitStagedVertex());return va}).next(va=>{switch(va.action){case "start":case "update":"start"===
va.action&&na&&(pa=new Y.SnappingContext(this._editGeometry,this.view,this.elevationInfo,qa));na&&(this.stagedVertex=this.snappingEngine.snap(va.mapEnd,I.unwrap(pa)));break;case "end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete(),na&&(this.commitStagedVertex(),this.snappingEngine.doneSnapping())}return va});sa.next(()=>{na&&this.snappingEngine.doneSnapping()})}})};la.createManipulatorDragPipelineFreehand=function(X){return L.createManipulatorDragEventPipeline(X,(U,ka)=>
{this.isCompleted||ka.next(this._screenToMapDragEventStep()).next(sa=>{"start"===sa.action&&(this.stagedVertex=sa.mapStart,"segment"===this.geometryType&&this.commitStagedVertex());return sa}).next(sa=>{switch(sa.action){case "start":case "update":this.stagedVertex=sa.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":this.complete()}return sa})})};la.createManipulatorDragPipelineHybrid=function(X){return L.createManipulatorDragEventPipeline(X,
(U,ka)=>{this.isCompleted||ka.next(this._screenToMapDragEventStep()).next(sa=>{"start"===sa.action&&(this.stagedVertex=sa.mapStart,this.commitStagedVertex());return sa}).next(sa=>{switch(sa.action){case "start":case "update":this.stagedVertex=sa.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return sa})})};la.destroy=function(){this._handles.destroy();this._handles=
null};la.onInputEvent=function(X){switch(X.type){case "pointer-down":this._pointerDownStates.add(X.pointerId);break;case "pointer-up":this._pointerDownStates.delete(X.pointerId)}switch(X.type){case "pointer-move":{if(this._manipulator.dragging||this._pointerDownStates.has(X.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)break;var U=E.createScreenPoint(X.x,X.y);const ka=this._closeOnClickVertexIndex(U);I.isSome(ka)?(this.discardStagedVertex(),U={componentIndex:0,vertexIndex:ka,
coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[ka].pos)},this.emit("cursor-update",{updated:null,vertices:[U],operation:"apply",type:"vertex-update"})):(U=this._screenToMap(U),I.isSome(U)?(this.stagedVertex=this.snappingEngine.snap(U,new Y.SnappingContext(this._editGeometry,this.view,this.elevationInfo,X.pointerType)),this._manipulator.cursor="crosshair"):this._manipulator.cursor=null);X.stopPropagation();break}case "hold":"click"===this.drawingMode&&"touch"===X.pointerType&&
this._snappingEnabled&&(this.stagedVertex=X.mapPoint),X.stopPropagation()}};la.redo=function(){this._editGeometry.redo()};la.undo=function(){this.snappingEngine.doneSnapping();this._editGeometry.undo()};la.complete=function(X=!1){this.commitStagedVertex();this._createOperationCompleted=!0;this.snappingEngine.doneSnapping();this.emit("complete",{vertices:this.vertices.map((U,ka)=>({componentIndex:0,vertexIndex:ka,coordinates:U})),aborted:X,type:"complete"})};la.cancel=function(){this.complete(!0)};
la.commitStagedVertex=function(){if(I.isSome(this._stagedVertex)){const X=this._stagedVertex;this._stagedVertex=null;this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(X))}};la.discardStagedVertex=function(){this._stagedVertex=null};la._screenToMapDragEventStep=function(){let X=null;return U=>{"start"===U.action&&(X=this._screenToMap(U.screenStart));if(I.isNone(X))return null;const ka=this._screenToMap(U.screenEnd);return I.isSome(ka)?{...U,mapStart:X,mapEnd:ka}:null}};la._screenToMap=
function(X){return this._getDrawSurface().screenToMap(X)};la._mapToScreen=function(X){return this._getDrawSurface().mapToScreen(X)};la._getDrawSurface=function(){var X=null;if(this.coordinateHelper.hasZ){X=this._defaultZ;let U=!1;I.isSome(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(U=!0);I.isSome(this.snapToSceneEnabled)&&(U=this.snapToSceneEnabled);I.isSome(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(U=!1);const ka=this._activeComponent.vertices.length;
("segment"===this.geometryType||"polygon"===this.geometryType)&&0<ka&&(X=this.coordinateHelper.zFromArray(this._activeComponent.vertices[0].pos),U=!1);U?X=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=X,X=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,X=this._elevationDrawSurface;return X};la._vertexWithinPointerDistance=function(X,U){const ka=this._mapToScreen(X);I.isSome(ka)?(X=ka.x-U.x,U=ka.y-U.y,U=25>=X*X+U*U):U=!1;return U};la._closeOnClickVertexIndex=
function(X){const U=this._activeComponent;if("polygon"===this.geometryType&&2<U.vertices.length){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(U.vertices[0].pos,aa),X))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(U.vertices[U.vertices.length-1].pos,aa),X))return U.vertices.length-1}return null};A._createClass(ta,[{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"canRedo",get:function(){return this._editGeometry.canRedo}},
{key:"canUndo",get:function(){return this._editGeometry.canUndo}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(X){this._manipulator.interactive=X}},{key:"numVertices",get:function(){return I.isSome(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"vertices",get:function(){const X=this._activeComponent.vertices.map(U=>
this.coordinateHelper.toArray(U.pos));I.isSome(this._stagedVertex)&&X.push(this.coordinateHelper.pointToArray(this._stagedVertex));return X}},{key:"spatialReference",get:function(){return this.view.spatialReference}},{key:"hasStagedVertex",get:function(){return I.isSome(this._stagedVertex)}},{key:"stagedVertex",get:function(){return this._stagedVertex},set:function(X){I.isNone(X)?this.discardStagedVertex():(this._stagedVertex=X,X={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,
coordinates:this.coordinateHelper.pointToArray(X)},this.emit("cursor-update",{updated:null,vertices:[X],operation:"apply",type:"vertex-update"}))}}]);return ta}(z);q.DrawOperation=w.__decorate([y.subclass("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],q.DrawOperation);const aa=new M({x:0,y:0,z:0});Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/coordinateHelper":function(){define("exports ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Point ../../../../geometry ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/vec2f64 ../../../../chunks/vec4f64 ../../../../chunks/vec2 ../../../../chunks/vec4".split(" "),
function(q,A,w,S,I,t,H,v,G,y){function u(z,E){if(E.supported){var r=Infinity,C=-Infinity,O=E.upperBoundX-E.lowerBoundX;z.forEach(T=>{let F=T.pos[0];for(;F<E.lowerBoundX;)F+=O;for(;F>E.upperBoundX;)F-=O;r=Math.min(r,F);C=Math.max(C,F);T.pos[0]=F});var P=C-r;O-P<P&&z.forEach(T=>{0>T.pos[0]&&(T.pos[0]+=O)})}}function D(z,E){z=A.getInfo(z);return"global"===E&&z?{supported:!0,lowerBoundX:z.valid[0],upperBoundX:z.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let B=function(){function z(r,C){this.spatialReference=
r;this.viewingMode=C;this._unnormalizationInfo=D(r,C)}var E=z.prototype;E.tag=function(r){return r};E.createNew=function(){return this.tag(H.create())};E.fromPoint=function(r){return this.tag(H.fromValues(r.x,r.y))};E.fromArray=function(r){return this.tag(H.fromValues(r[0],r[1]))};E.toArray=function(r){return[r[0],r[1]]};E.clone=function(r){return this.tag(H.fromArray(r))};E.toPoint=function(r,C){C.x=r[0];C.y=r[1];C.hasZ=!1;C.hasM=!1;C.spatialReference=this.spatialReference;return C};E.createPoint=
function(r){return new w({x:r[0],y:r[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};E.createPointFromArray=function(r){return new w({x:r[0],y:r[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};E.createDehydratedPoint=function(r){return{x:r[0],y:r[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}};E.lerp=function(r,C,O,P){return G.lerp(P,r,C,O)};E.addDelta=function(r,C,O){r[0]+=C;r[1]+=O};E.pointToArray=function(r){return[r.x,r.y]};
E.zFromArray=function(r){};E.hasZ=function(){return!1};E.unnormalize=function(r){u(r,this._unnormalizationInfo)};E.fromXYZ=function(r){return this.tag(H.fromValues(r[0],r[1]))};E.toXYZ=function(r,C=0){return I.fromValues(r[0],r[1],C)};return z}(),M=function(){function z(r,C,O){this.valueType=r;this.spatialReference=C;this._unnormalizationInfo=D(C,O)}var E=z.prototype;E.tag=function(r){return r};E.createNew=function(){return this.tag(I.create())};E.fromPoint=function(r){return this.tag(I.fromValues(r.x,
r.y,0===this.valueType?r.z:r.m))};E.fromArray=function(r){return this.tag(I.fromValues(r[0],r[1],r[2]||0))};E.toArray=function(r){return[r[0],r[1],r[2]]};E.clone=function(r){return this.tag(I.fromArray(r))};E.toPoint=function(r,C){C.x=r[0];C.y=r[1];0===this.valueType?(C.z=r[2],C.hasZ=!0,C.hasM=!1):(C.m=r[2],C.hasZ=!1,C.hasM=!0);C.spatialReference=this.spatialReference;return C};E.createPoint=function(r){return new w({x:r[0],y:r[1],z:0===this.valueType?r[2]:void 0,m:1===this.valueType?r[2]:void 0,
spatialReference:this.spatialReference})};E.createPointFromArray=function(r){return new w({x:r[0],y:r[1],z:0===this.valueType?r[2]:void 0,m:1===this.valueType?r[2]:void 0,spatialReference:this.spatialReference})};E.createDehydratedPoint=function(r){const C=0===this.valueType,O=1===this.valueType;return{x:r[0],y:r[1],z:C?r[2]:void 0,m:O?r[2]:void 0,hasZ:C,hasM:O,spatialReference:this.spatialReference,type:"point"}};E.lerp=function(r,C,O,P){return t.lerp(P,r,C,O)};E.addDelta=function(r,C,O,P){r[0]+=
C;r[1]+=O;0===this.valueType&&(r[2]+=P)};E.pointToArray=function(r){return 0===this.valueType?[r.x,r.y,r.z]:[r.x,r.y,r.m]};E.zFromArray=function(r){return 0===this.valueType?r[2]:void 0};E.hasZ=function(){return 0===this.valueType};E.unnormalize=function(r){u(r,this._unnormalizationInfo)};E.fromXYZ=function(r,C=0,O=0){return this.tag(I.fromValues(r[0],r[1],0===this.valueType?2<r.length?r[2]:C:O))};E.toXYZ=function(r,C=0){return this.tag(I.fromValues(r[0],r[1],0===this.valueType?r[2]:C))};return z}(),
N=function(){function z(r,C){this.spatialReference=r;this._unnormalizationInfo=D(r,C)}var E=z.prototype;E.tag=function(r){return r};E.createNew=function(){return this.tag(v.create())};E.fromPoint=function(r){return this.tag(v.fromValues(r.x,r.y,r.z,r.m))};E.fromArray=function(r){return this.tag(v.fromValues(r[0],r[1],r[2]||0,r[3]||0))};E.toArray=function(r){return[r[0],r[1],r[2],r[3]]};E.clone=function(r){return this.tag(v.fromArray(r))};E.toPoint=function(r,C){C.x=r[0];C.y=r[1];C.z=r[2];C.m=r[3];
C.hasZ=!0;C.hasM=!0;C.spatialReference=this.spatialReference;return C};E.createPoint=function(r){return new w({x:r[0],y:r[1],z:r[2],m:r[3],spatialReference:this.spatialReference})};E.createPointFromArray=function(r){return new w({x:r[0],y:r[1],z:r[2],m:r[3],spatialReference:this.spatialReference})};E.createDehydratedPoint=function(r){return{x:r[0],y:r[1],z:r[2],m:r[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}};E.lerp=function(r,C,O,P){return y.lerp(P,r,C,O)};E.addDelta=
function(r,C,O,P){r[0]+=C;r[1]+=O;r[2]+=P};E.pointToArray=function(r){return[r.x,r.y,r.z,r.m]};E.zFromArray=function(r){return r[2]};E.hasZ=function(){return!0};E.unnormalize=function(r){u(r,this._unnormalizationInfo)};E.fromXYZ=function(r,C=0,O=0){return this.tag(v.fromValues(r[0],r[1],2<r.length?r[2]:C,O))};E.toXYZ=function(r){return I.fromValues(r[0],r[1],r[2])};return z}();q.CoordinateHelper2D=B;q.CoordinateHelper3D=M;q.CoordinateHelper4D=N;q.createCoordinateHelper=function(z,E,r,C){return z&&
E?new N(r,C):E?new M(1,r,C):z?new M(0,r,C):new B(r,C)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(q){function A(){return[0,0]}function w(z){return[z[0],z[1]]}function S(z,E){return[z,E]}function I(z){const E=[0,0],r=Math.min(2,z.length);for(let C=0;C<r;++C)E[C]=z[C];return E}function t(z,E){return new Float64Array(z,E,2)}function H(){return[0,0]}function v(){return[1,1]}function G(){return[1,0]}function y(){return[0,1]}const u=
[0,0],D=[1,1],B=[1,0],M=[0,1];var N=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,fromArray:I,createView:t,zeros:H,ones:v,unitX:G,unitY:y,ZEROS:u,ONES:D,UNIT_X:B,UNIT_Y:M});q.ONES=D;q.UNIT_X=B;q.UNIT_Y=M;q.ZEROS=u;q.clone=w;q.create=A;q.createView=t;q.fromArray=I;q.fromValues=S;q.ones=v;q.unitX=G;q.unitY=y;q.vec2f64=N;q.zeros=H})},"esri/chunks/vec4f64":function(){define(["exports"],function(q){function A(){return[0,0,0,0]}function w(O){return[O[0],O[1],O[2],O[3]]}function S(O,P,T,F){return[O,
P,T,F]}function I(O){const P=A(),T=Math.min(4,O.length);for(let F=0;F<T;++F)P[F]=O[F];return P}function t(O,P){return new Float64Array(O,P,4)}function H(){return A()}function v(){return[1,1,1,1]}function G(){return[1,0,0,0]}function y(){return[0,1,0,0]}function u(){return[0,0,1,0]}function D(){return[0,0,0,1]}const B=A(),M=v(),N=G(),z=y(),E=u(),r=D();var C=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,fromArray:I,createView:t,zeros:H,ones:v,unitX:G,unitY:y,unitZ:u,unitW:D,ZEROS:B,ONES:M,
UNIT_X:N,UNIT_Y:z,UNIT_Z:E,UNIT_W:r});q.ONES=M;q.UNIT_W=r;q.UNIT_X=N;q.UNIT_Y=z;q.UNIT_Z=E;q.ZEROS=B;q.clone=w;q.create=A;q.createView=t;q.fromArray=I;q.fromValues=S;q.ones=v;q.unitW=D;q.unitX=G;q.unitY=y;q.unitZ=u;q.vec4f64=C;q.zeros=H})},"esri/chunks/vec2":function(){define(["exports","./common"],function(q,A){function w(qa,na){qa[0]=na[0];qa[1]=na[1];return qa}function S(qa,na,pa){qa[0]=na;qa[1]=pa;return qa}function I(qa,na,pa){qa[0]=na[0]+pa[0];qa[1]=na[1]+pa[1];return qa}function t(qa,na,pa){qa[0]=
na[0]-pa[0];qa[1]=na[1]-pa[1];return qa}function H(qa,na,pa){qa[0]=na[0]*pa[0];qa[1]=na[1]*pa[1];return qa}function v(qa,na,pa){qa[0]=na[0]/pa[0];qa[1]=na[1]/pa[1];return qa}function G(qa,na){qa[0]=Math.ceil(na[0]);qa[1]=Math.ceil(na[1]);return qa}function y(qa,na){qa[0]=Math.floor(na[0]);qa[1]=Math.floor(na[1]);return qa}function u(qa,na,pa){qa[0]=Math.min(na[0],pa[0]);qa[1]=Math.min(na[1],pa[1]);return qa}function D(qa,na,pa){qa[0]=Math.max(na[0],pa[0]);qa[1]=Math.max(na[1],pa[1]);return qa}function B(qa,
na){qa[0]=Math.round(na[0]);qa[1]=Math.round(na[1]);return qa}function M(qa,na,pa){qa[0]=na[0]*pa;qa[1]=na[1]*pa;return qa}function N(qa,na,pa,va){qa[0]=na[0]+pa[0]*va;qa[1]=na[1]+pa[1]*va;return qa}function z(qa,na){const pa=na[0]-qa[0];qa=na[1]-qa[1];return Math.sqrt(pa*pa+qa*qa)}function E(qa,na){const pa=na[0]-qa[0];qa=na[1]-qa[1];return pa*pa+qa*qa}function r(qa){const na=qa[0];qa=qa[1];return Math.sqrt(na*na+qa*qa)}function C(qa){const na=qa[0];qa=qa[1];return na*na+qa*qa}function O(qa,na){qa[0]=
-na[0];qa[1]=-na[1];return qa}function P(qa,na){qa[0]=1/na[0];qa[1]=1/na[1];return qa}function T(qa,na){var pa=na[0];const va=na[1];pa=pa*pa+va*va;0<pa&&(pa=1/Math.sqrt(pa),qa[0]=na[0]*pa,qa[1]=na[1]*pa);return qa}function F(qa,na){return qa[0]*na[0]+qa[1]*na[1]}function K(qa,na,pa){na=na[0]*pa[1]-na[1]*pa[0];qa[0]=qa[1]=0;qa[2]=na;return qa}function J(qa,na,pa,va){const ja=na[0];na=na[1];qa[0]=ja+va*(pa[0]-ja);qa[1]=na+va*(pa[1]-na);return qa}function L(qa,na){na=na||1;const pa=2*A.RANDOM()*Math.PI;
qa[0]=Math.cos(pa)*na;qa[1]=Math.sin(pa)*na;return qa}function Y(qa,na,pa){const va=na[0];na=na[1];qa[0]=pa[0]*va+pa[2]*na;qa[1]=pa[1]*va+pa[3]*na;return qa}function W(qa,na,pa){const va=na[0];na=na[1];qa[0]=pa[0]*va+pa[2]*na+pa[4];qa[1]=pa[1]*va+pa[3]*na+pa[5];return qa}function aa(qa,na,pa){const va=na[0];na=na[1];qa[0]=pa[0]*va+pa[3]*na+pa[6];qa[1]=pa[1]*va+pa[4]*na+pa[7];return qa}function oa(qa,na,pa){const va=na[0];na=na[1];qa[0]=pa[0]*va+pa[4]*na+pa[12];qa[1]=pa[1]*va+pa[5]*na+pa[13];return qa}
function ta(qa,na,pa,va){const ja=na[0]-pa[0];na=na[1]-pa[1];const ua=Math.sin(va);va=Math.cos(va);qa[0]=ja*va-na*ua+pa[0];qa[1]=ja*ua+na*va+pa[1];return qa}function la(qa,na){var pa=qa[0];qa=qa[1];const va=na[0];na=na[1];let ja=pa*pa+qa*qa;0<ja&&(ja=1/Math.sqrt(ja));let ua=va*va+na*na;0<ua&&(ua=1/Math.sqrt(ua));pa=(pa*va+qa*na)*ja*ua;return 1<pa?0:-1>pa?Math.PI:Math.acos(pa)}function X(qa){return"vec2("+qa[0]+", "+qa[1]+")"}function U(qa,na){return qa[0]===na[0]&&qa[1]===na[1]}function ka(qa,na){const pa=
qa[0];qa=qa[1];const va=na[0];na=na[1];return Math.abs(pa-va)<=A.EPSILON*Math.max(1,Math.abs(pa),Math.abs(va))&&Math.abs(qa-na)<=A.EPSILON*Math.max(1,Math.abs(qa),Math.abs(na))}var sa=Object.freeze({__proto__:null,copy:w,set:S,add:I,subtract:t,multiply:H,divide:v,ceil:G,floor:y,min:u,max:D,round:B,scale:M,scaleAndAdd:N,distance:z,squaredDistance:E,length:r,squaredLength:C,negate:O,inverse:P,normalize:T,dot:F,cross:K,lerp:J,random:L,transformMat2:Y,transformMat2d:W,transformMat3:aa,transformMat4:oa,
rotate:ta,angle:la,str:X,exactEquals:U,equals:ka,len:r,sub:t,mul:H,div:v,dist:z,sqrDist:E,sqrLen:C});q.add=I;q.angle=la;q.ceil=G;q.copy=w;q.cross=K;q.dist=z;q.distance=z;q.div=v;q.divide=v;q.dot=F;q.equals=ka;q.exactEquals=U;q.floor=y;q.inverse=P;q.len=r;q.length=r;q.lerp=J;q.max=D;q.min=u;q.mul=H;q.multiply=H;q.negate=O;q.normalize=T;q.random=L;q.rotate=ta;q.round=B;q.scale=M;q.scaleAndAdd=N;q.set=S;q.sqrDist=E;q.sqrLen=C;q.squaredDistance=E;q.squaredLength=C;q.str=X;q.sub=t;q.subtract=t;q.transformMat2=
Y;q.transformMat2d=W;q.transformMat3=aa;q.transformMat4=oa;q.vec2=sa})},"esri/views/3d/interactive/editingTools/draw/DrawManipulator":function(){define(["exports","../../../../../core/Evented"],function(q,A){let w=function(){function S({grabbableForEvent:t}){this.events=new A;this.interactive=!0;this.selectable=!1;this.cursor=null;this.grabbable=!0;this.grabbableForEvent=t}var I=S.prototype;I.intersectionDistance=function(t,H){return 0};I.attach=function(){};I.detach=function(){};return S}();q.DrawManipulator=
w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/editGeometry/EditGeometry":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry/Polygon ../../../../../geometry/Polyline ../../../../../geometry ../coordinateHelper".split(" "),function(q,A,w,S,I,t){let H=function(){function y(u){this.right=this.left=null;this.type="vertex";this.index=null;this.component=u}A._createClass(y,[{key:"pos",get:function(){return this._pos},
set:function(u){this._pos=u;this.component.unnormalizeVertexPositions()}}]);return y}(),v=function(y,u,D){this.type="edge";this.component=y;this.left=u;this.right=D;u.right=this;D.left=this},G=function(){function y(D){this.vertices=[];this.edges=[];this.data=D}var u=y.prototype;u.unnormalizeVertexPositions=function(){1>=this.vertices.length||this.data.coordinateHelper.unnormalize(this.vertices)};u.updateVertexIndex=function(D,B){if(0!==this.vertices.length){var M=this.vertices[0],N=null;do N=D,N.index=
B++,D=N.right?N.right.right:null;while(null!=D&&D!==M);N.left&&N!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(N),this.vertices.length-1)}};u.findEndVertex=function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]};u.swapVertices=function(D,B){const M=this.vertices[D];this.vertices[D]=this.vertices[B];this.vertices[B]=M};return y}();I=function(){function y(D){this.coordinateHelper=D;this.undoStack=[];this.redoStack=[];this.components=
[]}var u=y.prototype;u.apply=function(D){D.apply();this.undoStack.push(D);this.redoStack=[]};u.undo=function(){if(0<this.undoStack.length){const D=this.undoStack.pop();D.undo();this.redoStack.push(D)}};u.redo=function(){if(0<this.redoStack.length){const D=this.redoStack.pop();D.apply();this.undoStack.push(D)}};u.toPoint=function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)};u.toPolyline=function(){const D=
[],B=this.coordinateHelper.toArray;this.components.forEach((M,N)=>{N=[];const z=M=M.vertices.find(E=>null==E.left);do N.push(B(M.pos)),M=M.right?M.right.right:null;while(M&&M!==z);D.push(N)});return new S({paths:D,spatialReference:this.coordinateHelper.spatialReference})};u.toPolygon=function(){const D=[],B=this.coordinateHelper.toArray;this.components.forEach((M,N)=>{N=[];let z=M=M.vertices[0];const E=z;do N.push(B(z.pos)),z=z.right.right;while(z&&z!==E);N.push(B(M.pos));D.push(N)});return new w({rings:D,
spatialReference:this.coordinateHelper.spatialReference})};y.fromGeometry=function(D,B){B=t.createCoordinateHelper(D.hasZ,D.hasM,D.spatialReference,B);const M=new y(B);switch(D.type){case "polygon":D=D.rings;for(var N=0;N<D.length;++N){var z=D[N],E=new G(M),r=z.length-1;for(var C=0;C<r;++C){var O=B.fromArray(z[C]),P=new H(E);E.vertices.push(P);P.pos=O;P.index=C}z=E.vertices.length-1;for(r=0;r<z;++r)C=new v(E,E.vertices[r],E.vertices[r+1]),E.edges.push(C);z=new v(E,E.vertices[E.vertices.length-1],
E.vertices[0]);E.edges.push(z);M.components.push(E)}break;case "polyline":for(D=D.paths,N=0;N<D.length;++N){z=D[N];E=new G(M);r=z.length;for(C=0;C<r;++C)O=B.fromArray(z[C]),P=new H(E),E.vertices.push(P),P.pos=O,P.index=C;z=E.vertices.length-1;for(r=0;r<z;++r)C=new v(E,E.vertices[r],E.vertices[r+1]),E.edges.push(C);M.components.push(E)}}return M};A._createClass(y,[{key:"canUndo",get:function(){return 0<this.undoStack.length}},{key:"lastOperation",get:function(){return 0<this.undoStack.length?this.undoStack[this.undoStack.length-
1]:null}},{key:"canRedo",get:function(){return 0<this.redoStack.length}}]);return y}();q.Component=G;q.Edge=v;q.EditGeometry=I;q.Vertex=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/editGeometry/EditGeometryHelper":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../../core/Evented","./EditGeometry"],function(q,A,w,S,I){S=function(y){function u(B,M){var N=y.call(this)||this;N.data=B;
N.type=M;N._dirty=!0;N._geometry=null;return N}A._inheritsLoose(u,y);var D=u.prototype;D.splitEdge=function(B,M){B=new t(this,B,M);this.data.apply(B);this._dirty=!0;return B};D.moveVertices=function(B,M,N,z){let E=null;this.data.lastOperation instanceof H&&this.data.lastOperation.canAccumulate(B)?(E=this.data.lastOperation,E.accumulate(M,N,z)):(E=new H(this,B,M,N,z),this.data.apply(E));this._dirty=!0;return E};D.removeVertices=function(B){let M=0;switch(this.type){case "point":M=1;break;case "polyline":M=
2;break;case "polygon":M=3}B=new v(this,B,M);this.data.apply(B);this._dirty=!0;return B};D.appendVertex=function(B){if(0===this.data.components.length)return null;B=new G(this,this.data.components[0],B);this.data.apply(B);this._dirty=!0;return B};D.canRemoveVertex=function(){let B=0;switch(this.type){case "point":B=1;break;case "polyline":B=2;break;case "polygon":B=3}return this.data.components[0].vertices.length>B};D.undo=function(){this.data.undo();this._dirty=!0};D.redo=function(){this.data.redo();
this._dirty=!0};A._createClass(u,[{key:"canUndo",get:function(){return this.data.canUndo}},{key:"canRedo",get:function(){return this.data.canRedo}},{key:"geometry",get:function(){if(this._dirty){switch(this.type){case "point":this._geometry=this.data.toPoint();break;case "polyline":this._geometry=this.data.toPolyline();break;case "polygon":this._geometry=this.data.toPolygon()}this._dirty=!1}return this._geometry}}]);return u}(S);let t=function(){function y(D,B,M){this.helper=D;this.edge=B;this.t=
M;this.right=this.left=this.createdVertex=null}var u=y.prototype;u.apply=function(){let D="redo";const B=this.edge,M=B.component,N=B.component.data,z=B.left,E=B.right;M.edges.splice(M.edges.indexOf(B),1);w.isNone(this.createdVertex)&&(D="apply",this.createdVertex=new I.Vertex(B.component));M.vertices.push(this.createdVertex);this.createdVertex.pos=N.coordinateHelper.lerp(B.left.pos,B.right.pos,this.t,N.coordinateHelper.createNew());w.isNone(this.left)&&(this.left=new I.Edge(M,z,this.createdVertex));
this.left.left.left?M.edges.push(this.left):M.edges.unshift(this.left);z.right=this.left;w.isNone(this.right)&&(this.right=new I.Edge(M,this.createdVertex,E));M.edges.push(this.right);E.left=this.right;M.updateVertexIndex(this.createdVertex,z.index+1);this.helper.emit("vertex-add",{type:"vertex-add",vertices:[this.createdVertex],operation:D})};u.undo=function(){if(w.isNone(this.createdVertex)||w.isNone(this.left)||w.isNone(this.right))return null;const D=this.edge,B=D.component,M=this.createdVertex.left.left,
N=this.createdVertex.right.right;B.vertices.splice(B.vertices.indexOf(this.createdVertex),1);B.edges.splice(B.edges.indexOf(this.left),1);B.edges.splice(B.edges.indexOf(this.right),1);this.edge.left.left?B.edges.push(this.edge):B.edges.unshift(this.edge);M.right=D;N.left=D;B.updateVertexIndex(M,M.index);this.helper.emit("vertex-remove",{type:"vertex-remove",vertices:[this.createdVertex],operation:"undo"})};return y}(),H=function(){function y(D,B,M,N,z){this.helper=D;this.applied=!1;this.vertices=
B;this.dx=M;this.dy=N;this.dz=z}var u=y.prototype;u.apply=function(){this.vertices.forEach(D=>{this.helper.data.coordinateHelper.addDelta(D.pos,this.dx,this.dy,this.dz)});this.helper.data.components.forEach(D=>{D.unnormalizeVertexPositions()});this.helper.emit("vertex-update",{type:"vertex-update",vertices:this.vertices,operation:this.applied?"redo":"apply"});this.applied=!0};u.undo=function(){this.vertices.forEach(D=>{this.helper.data.coordinateHelper.addDelta(D.pos,-this.dx,-this.dy,-this.dz)});
this.helper.emit("vertex-update",{type:"vertex-update",vertices:this.vertices,operation:"undo"})};u.canAccumulate=function(D){if(D.length!==this.vertices.length)return!1;for(let B=0;B<D.length;++B)if(D[B]!==this.vertices[B])return!1;return!0};u.accumulate=function(D,B,M){this.vertices.forEach(N=>{this.helper.data.coordinateHelper.addDelta(N.pos,D,B,M)});this.dx+=D;this.dy+=B;this.dz+=M;this.helper.emit("vertex-update",{type:"vertex-update",vertices:this.vertices,operation:"apply"})};return y}(),v=
function(){function y(D,B,M=0){this.helper=D;this.removedVertices=null;this._minNumberOfVertices=0;this.vertices=B;this._minNumberOfVertices=M}var u=y.prototype;u.apply=function(){let D="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach(B=>{B=this._removeVertex(B);w.isSome(B)&&this.removedVertices.push(B)}),D="apply"):this.removedVertices.forEach(B=>{this._redoRemoveVertex(B)});this.helper.emit("vertex-remove",{type:"vertex-remove",vertices:this.vertices,operation:D})};
u.undo=function(){this.removedVertices.forEach(D=>{this._undoRemoveVertex(D)});this.helper.emit("vertex-add",{type:"vertex-add",vertices:this.vertices,operation:"undo"})};u._removeVertex=function(D){const B=D.component;if(B.vertices.length<=this._minNumberOfVertices)return null;const M={removedVertex:D,createdEdge:null},N=D.left,z=D.right;B.vertices.splice(B.vertices.indexOf(D),1);N&&(B.edges.splice(B.edges.indexOf(N),1),N.left.right=null);z&&(B.edges.splice(B.edges.indexOf(z),1),z.right.left=null);
0===D.index&&z&&0<this.vertices.length&&B.swapVertices(B.vertices.indexOf(z.right),0);N&&z&&(M.createdEdge=new I.Edge(B,N.left,z.right),B.edges.push(M.createdEdge));z&&B.updateVertexIndex(z.right,z.right.index-1);return M};u._redoRemoveVertex=function(D){console.warn("redo remove vertex not implemented yet")};u._undoRemoveVertex=function(D){const B=D.removedVertex,M=D.removedVertex.component,N=B.left,z=B.right;D.createdEdge&&M.edges.splice(M.edges.indexOf(D.createdEdge),1);M.vertices.push(B);N&&(M.edges.push(N),
N.left.right=N);z&&(M.edges.push(z),z.right.left=z);M.updateVertexIndex(B,B.index)};return y}(),G=function(){function y(D,B,M){this.helper=D;this.component=B;this.pos=M;this.right=this.left=this.originalEdge=this.addedVertex=null}var u=y.prototype;u.apply=function(){let D="redo";w.isNone(this.addedVertex)&&(D="apply",this.addedVertex=new I.Vertex(this.component));if(0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=
0;else{const B=w.unwrap(this.component.findEndVertex());let M=null;B.right&&(this.originalEdge=B.right,M=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1));this.component.vertices.push(this.addedVertex);this.addedVertex.pos=this.pos;w.isNone(this.left)&&(this.left=new I.Edge(this.component,B,this.addedVertex));this.component.edges.push(this.left);B.right=this.left;w.isSome(this.originalEdge)&&w.isSome(M)&&(w.isNone(this.right)&&(this.right=new I.Edge(this.component,
this.addedVertex,M)),this.component.edges.push(this.right),M.left=this.right);this.component.updateVertexIndex(this.addedVertex,B.index+1)}this.helper.emit("vertex-add",{type:"vertex-add",vertices:[this.addedVertex],operation:D})};u.undo=function(){if(w.isNone(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1);w.isSome(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null);w.isSome(this.right)&&
(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null);w.isSome(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge);w.isSome(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);this.helper.emit("vertex-remove",{type:"vertex-remove",vertices:[this.addedVertex],operation:"undo"})};
return y}();q.Component=I.Component;q.Edge=I.Edge;q.EditGeometry=I.EditGeometry;q.Vertex=I.Vertex;q.AppendVertexOperation=G;q.EditGeometryHelper=S;q.RemoveVerticesOperation=v;q.SplitEdgeOperation=t;q.UpdateVerticesOperation=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/DrawingMode":function(){define(["exports"],function(q){q.defaultDrawingMode="click";q.drawingModes=["freehand","hybrid","click"];Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/dragEventPipeline":function(){define("exports ../../core/lang ../../core/maybe ../../core/handleUtils ../../geometry/support/webMercatorUtils ../../core/mathUtils ../../core/screenUtils ../draw/support/drawUtils".split(" "),
function(q,A,w,S,I,t,H,v){function G(z,E){let r=null,C=null;return O=>{if("cancel"===O.action)w.isSome(C)&&(C.execute({action:"cancel"}),C=r=null);else{var P={action:O.action,screenStart:O.start,screenEnd:O.screenPoint};"start"===O.action&&w.isNone(r)&&(r=new N,C=new N,E(z,r,C,O.pointerType,P));w.isSome(r)&&r.execute(P);"end"===O.action&&w.isSome(r)&&(C=r=null)}}}function y(z,E){return z.events.on("drag",G(z,E))}function u(z,E){let r=null;const C=w.isSome(z[E])?z[E].spatialReference:null;return O=>
{if("start"===O.action&&w.isSome(z[E])){var P=z[E],T=O.mapStart.spatialReference;r=w.isNone(P)||"mesh"===P.type?null:P.spatialReference.equals(T)?P.clone():I.canProject(P,T)?I.project(P,T):null}if(w.isNone(r))return null;P=O.mapEnd.x-O.mapStart.x;T=O.mapEnd.y-O.mapStart.y;const F=O.mapEnd.z-O.mapStart.z,K=v.move(r.clone(),P,T,F);K.spatialReference.equals(C)?z[E]=K:z[E]=I.project(K,C);return{...O,translationX:P,translationY:T,translationZ:F}}}function D(z){return u(z,"geometry")}function B(z,E){const r=
new Map;for(const C of E)r.set(C,A.clone(z[C]));return C=>{r.forEach((O,P)=>{z[P]=O});return C}}function M(z){return B(z,["geometry"])}let N=function(){function z(){this.execute=()=>{}}z.prototype.next=function(E,r=new z){w.isSome(E)&&(this.execute=C=>{C=E(C);w.isSome(C)&&r.execute(C)});return r};return z}();q.EventPipeline=N;q.addMapDelta=function(){let z=0,E=0,r=0;return C=>{"start"===C.action&&(z=C.mapStart.x,E=C.mapStart.y,r=C.mapStart.z);const O=C.mapEnd.x-z,P=C.mapEnd.y-E,T=C.mapEnd.z-r;z=C.mapEnd.x;
E=C.mapEnd.y;r=C.mapEnd.z;return{...C,mapDeltaX:O,mapDeltaY:P,mapDeltaZ:T,mapDeltaSpatialReference:C.mapStart.spatialReference}}};q.addScreenDelta=function(){let z=0,E=0;return r=>{"start"===r.action&&(z=r.screenStart.x,E=r.screenStart.y);const C=r.screenEnd.x-z,O=r.screenEnd.y-E;z=r.screenEnd.x;E=r.screenEnd.y;return{...r,screenDeltaX:C,screenDeltaY:O}}};q.constrainToMapAxis=function(z,E){const r=[z.x,z.y,z.z],C=[Math.cos(E),Math.sin(E)];z=Math.sqrt(C[0]*C[0]+C[1]*C[1]);if(0===z)return null;C[0]/=
z;C[1]/=z;const O=P=>{const T=(P.x-r[0])*C[0]+(P.y-r[1])*C[1];P.x=r[0]+T*C[0];P.y=r[1]+T*C[1]};return P=>{O(P.mapStart);O(P.mapEnd);return P}};q.createDragEventPipelineCallback=G;q.createManipulatorDragEventPipeline=y;q.createManipulatorDragEventPipelineMany=function(z,E){const r=[];for(const C of z)r.push(y(C,E));return S.handlesGroup(r)};q.dragAtLocation=function(z,E){let r=null,C=0,O=0;return P=>{"start"===P.action&&(r=z.toScreen(E),0>r.x||r.x>z.width||0>r.y||r.y>z.height?r=null:(C=P.screenStart.x-
r.x,O=P.screenStart.y-r.y));if(null==r)return null;var T=t.clamp(P.screenEnd.x-C,0,z.width);const F=t.clamp(P.screenEnd.y-O,0,z.height);T=H.createScreenPoint(T,F);P.screenStart=r;P.screenEnd=T;return P}};q.dragGeometry=u;q.dragGraphic=D;q.dragGraphicMany=function(z){const E=z.map(r=>w.unwrap(D(r))).filter(r=>w.isSome(r));return r=>{const C=r.mapEnd.x-r.mapStart.x,O=r.mapEnd.y-r.mapStart.y,P=r.mapEnd.z-r.mapStart.z;E.forEach(T=>T(r));return{...r,translationX:C,translationY:O,translationZ:P}}};q.resetGraphic=
M;q.resetGraphicMany=function(z){const E=z.map(r=>w.unwrap(M(r))).filter(r=>w.isSome(r));return r=>{E.forEach(C=>C(r));return r}};q.resetProperties=B;q.resetSymbol=function(z){const E=w.isSome(z.symbol)?z.symbol.clone():null;return r=>{z.symbol=E;return r}};q.screenToMap=function(z,E=null,r){let C=null;const O=w.isSome(E)&&!z.spatialReference.equals(E)?T=>w.isSome(T)?I.project(T,E):T:T=>T,P={exclude:[],...r};return T=>{"start"===T.action&&(C=O(z.toMap(T.screenStart,P)));if(w.isNone(C))return null;
const F=O(z.toMap(T.screenEnd,P));return w.isSome(F)?{...T,mapStart:C,mapEnd:F}:null}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/support/drawUtils":function(){define(["exports","../../../geometry/support/coordsUtils","../../../geometry/support/boundsUtils","../../../geometry/support/aaBoundingRect"],function(q,A,w,S){function I(v,G,y,u){null==u||v.hasZ||(u=void 0);if("point"===v.type)return v.x+=G,v.y+=y,v.hasZ&&null!=u&&(v.z+=u),v;if("multipoint"===v.type){var D=v.points;
for(var B=0;B<D.length;B++)D[B]=t(D[B],G,y,u);return v}if("extent"===v.type)return v.xmin+=G,v.xmax+=G,v.ymin+=y,v.ymax+=y,null!=u&&(v.zmin+=u,v.zmax+=u),v;D=A.geometryToCoordinates(v);B="polyline"===v.type?v.paths:v.rings;for(let M=0;M<D.length;M++){const N=D[M];for(let z=0;z<N.length;z++)N[z]=t(N[z],G,y,u)}"paths"in v?v.paths=B:v.rings=B;return v}function t(v,G,y,u){return H(v,v[0]+G,v[1]+y,null!=v[2]&&null!=u?v[2]+u:void 0)}function H(v,G,y,u){G=[G,y];2<v.length&&G.push(null!=u?u:v[2]);3<v.length&&
G.push(v[3]);return G}q.cloneMove=function(v,G,y,u,D){v=v.clone();var B=u.resolution;if("point"===v.type)return D?I(v,G*B,-y*B):(D=u.state.transform,u=u.state.inverseTransform,B=D[0]*v.x+D[2]*v.y+D[4],D=D[1]*v.x+D[3]*v.y+D[5],v.x=u[0]*(B+G)+u[2]*(D+y)+u[4],v.y=u[1]*(B+G)+u[3]*(D+y)+u[5]),v;if("multipoint"===v.type){if(D)I(v,G*B,-y*B);else{D=v.points;B=u.state.transform;u=u.state.inverseTransform;for(var M=0;M<D.length;M++){var N=D[M],z=B[0]*N[0]+B[2]*N[1]+B[4],E=B[1]*N[0]+B[3]*N[1]+B[5];D[M]=H(N,
u[0]*(z+G)+u[2]*(E+y)+u[4],u[1]*(z+G)+u[3]*(E+y)+u[5],void 0)}}return v}if("extent"===v.type)return D?I(v,G*B,-y*B):(D=u.state.transform,u=u.state.inverseTransform,B=D[0]*v.xmin+D[2]*v.ymin+D[4],M=D[1]*v.xmin+D[3]*v.ymin+D[5],N=D[0]*v.xmax+D[2]*v.ymax+D[4],D=D[1]*v.xmax+D[3]*v.ymax+D[5],v.xmin=u[0]*(B+G)+u[2]*(M+y)+u[4],v.ymin=u[1]*(B+G)+u[3]*(M+y)+u[5],v.xmax=u[0]*(N+G)+u[2]*(D+y)+u[4],v.ymax=u[1]*(N+G)+u[3]*(D+y)+u[5]),v;if(D)I(v,G*B,-y*B);else{D=A.geometryToCoordinates(v);B="polyline"===v.type?
v.paths:v.rings;M=u.state.transform;u=u.state.inverseTransform;for(N=0;N<D.length;N++)for(z=D[N],E=0;E<z.length;E++){const r=z[E],C=M[0]*r[0]+M[2]*r[1]+M[4],O=M[1]*r[0]+M[3]*r[1]+M[5];z[E]=H(r,u[0]*(C+G)+u[2]*(O+y)+u[4],u[1]*(C+G)+u[3]*(O+y)+u[5],void 0)}"paths"in v?v.paths=B:v.rings=B}return v};q.getRotationAngle=function(v,G,y,u,D,B){return 180*Math.atan2(G-B,v-D)/Math.PI-180*Math.atan2(G-u,v-y)/Math.PI};q.getScaleRatio=function(v,G,y,u,D,B){return Math.sqrt((D-v)*(D-v)+(B-G)*(B-G))/Math.sqrt((y-
v)*(y-v)+(u-G)*(u-G))};q.move=I;q.scale=function(v,G,y,u){if("point"===v.type){const {x:O,y:P}=v;var D=u?u[0]:O,B=u?u[1]:P;v=v.clone();y=(P-B)*y+B;v.x=(O-D)*G+D;v.y=y;return v}if("multipoint"===v.type){D=A.geometryToCoordinates(v);B=S.create();const [O,P,T,F]=w.getRingsOrPathsBounds(B,[D]);D=u?u[0]:(O+T)/2;B=u?u[1]:(F+P)/2;v=v.clone();u=v.points;for(var M=0;M<u.length;M++){var N=u[M];const [K,J]=N;u[M]=H(N,(K-D)*G+D,(J-B)*y+B,void 0)}return v}if("extent"===v.type){const {xmin:O,xmax:P,ymin:T,ymax:F}=
v;D=u?u[0]:(O+P)/2;B=u?u[1]:(F+T)/2;v=v.clone();v.xmin=(O-D)*G+D;v.ymax=(F-B)*y+B;v.xmax=(P-D)*G+D;v.ymin=(T-B)*y+B;v.xmin>v.xmax&&(G=v.xmin,v.xmin=v.xmax,v.xmax=G);v.ymin>v.ymax&&(G=v.ymin,v.ymin=v.ymax,v.ymax=G);return v}D=A.geometryToCoordinates(v);B=S.create();const [z,E,r,C]=w.getRingsOrPathsBounds(B,D);B=u?u[0]:(z+r)/2;u=u?u[1]:(C+E)/2;v=v.clone();M="polyline"===v.type?v.paths:v.rings;for(N=0;N<D.length;N++){const O=D[N];for(let P=0;P<O.length;P++){const T=O[P],[F,K]=T;M[N][P]=H(T,(F-B)*G+B,
(K-u)*y+u,void 0)}}"paths"in v?v.paths=M:v.rings=M;return v};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports","../../../core/maybe","./Settings","./snappingUtils"],function(q,A,w,S){let I=function(){function t({proximityThreshold:v,enabled:G=!0,shortLineThreshold:y=w.defaults.shortLineThreshold}){this.enabled=G;this.squaredShortLineThreshold=y*y;G=v*w.defaults.touchSensitivityMultiplier;this._squaredTouchProximityThreshold=
G*G;this._squaredMouseProximityTreshold=v*v}var H=t.prototype;H.snap=function(v,G){return this.enabled?A.isSome(G.vertexHandle)?"vertex"!==G.vertexHandle.type?[]:this.snapExistingVertex(v,G):this.snapNewVertex(v,G):[]};H.edgeExceedsShortLineThreshold=function(v,G){return this.exceedsShortLineThreshold(v.left.pos,v.right.pos,G)};H.exceedsShortLineThreshold=function(v,G,{elevationInfo:y,view:u,geometry:D}){D=D.data.coordinateHelper;return 0===this.squaredShortLineThreshold||S.squareDistance(S.anyMapPointToScreenPoint(G,
D,y,u),S.anyMapPointToScreenPoint(v,D,y,u))>this.squaredShortLineThreshold};H.squaredProximityTreshold=function(v){return"touch"===v?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold};return t}();q.SnappingAlgorithm=I;q.SnappingContext=function(t,H,v,G,y=null){this.geometry=t;this.view=H;this.elevationInfo=v;this.pointer=G;this.vertexHandle=y};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ../../../core/JSONSupport ../../../Color".split(" "),
function(q,A,w,S,I,t,H){let v=function(D){function B(){var M=D.apply(this,arguments)||this;M.enabled=!0;return M}A._inheritsLoose(B,D);return B}(t.JSONSupport);w.__decorate([S.property({type:Boolean})],v.prototype,"enabled",void 0);v=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.snapping.Settings.LineSnapperDefaults")],v);let G=function(D){function B(){var M=D.apply(this,arguments)||this;M.enabled=!0;return M}A._inheritsLoose(B,D);return B}(t.JSONSupport);w.__decorate([S.property({type:Boolean})],
G.prototype,"enabled",void 0);G=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.snapping.Settings.ParallelLineSnapperDefaults")],G);let y=function(D){function B(){var M=D.apply(this,arguments)||this;M.enabled=!0;return M}A._inheritsLoose(B,D);return B}(t.JSONSupport);w.__decorate([S.property({type:Boolean})],y.prototype,"enabled",void 0);y=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.snapping.Settings.RightAngleSnapperDefaults")],y);let u=function(D){function B(){var M=
D.apply(this,arguments)||this;M.enabled=!0;return M}A._inheritsLoose(B,D);return B}(t.JSONSupport);w.__decorate([S.property({type:Boolean})],u.prototype,"enabled",void 0);u=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.snapping.Settings.RightAngleTriangleSnapperDefaults")],u);t=function(D){function B(M){M=D.call(this,M)||this;M.lineSnapper=new v;M.parallelLineSnapper=new G;M.rightAngleSnapper=new y;M.rightAngleTriangleSnapper=new u;M.shortLineThreshold=15;M.lineProximityThreshold=
5;M.circleProximityThreshold=5;M.pointProximityThreshold=5;M.intersectionParallelLineThreshold=1E-6;M.parallelLineThreshold=1E-6;M.touchSensitivityMultiplier=1.5;M.pointOnLineThreshold=1E-6;M.orange=new H([255,127,0]);M.lineHintWidthReference=3;M.lineHintWidthTarget=3;M.lineHintFadedExtensions=.3;M.parallelLineHintWidth=2;M.parallelLineHintLength=24;M.parallelLineHintOffset=1.5;M.rightAngleHintSize=24;M.rightAngleHintOutlineSize=1.5;return M}A._inheritsLoose(B,D);return B}(t.JSONSupport);w.__decorate([S.property({type:v,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"lineSnapper",void 0);w.__decorate([S.property({type:G,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"parallelLineSnapper",void 0);w.__decorate([S.property({type:y,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"rightAngleSnapper",void 0);w.__decorate([S.property({type:u,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"rightAngleTriangleSnapper",void 0);w.__decorate([S.property({type:Number,
nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],t.prototype,"shortLineThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],t.prototype,"lineProximityThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],t.prototype,"circleProximityThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:1,max:50,step:1},json:{write:!0}})],t.prototype,
"pointProximityThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"intersectionParallelLineThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"parallelLineThreshold",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"touchSensitivityMultiplier",void 0);w.__decorate([S.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"pointOnLineThreshold",void 0);w.__decorate([S.property({type:H,nonNullable:!0})],t.prototype,"orange",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"lineHintWidthReference",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"lineHintWidthTarget",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,
range:{min:0,max:1},json:{write:!0}})],t.prototype,"lineHintFadedExtensions",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"parallelLineHintWidth",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],t.prototype,"parallelLineHintLength",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],t.prototype,"parallelLineHintOffset",void 0);w.__decorate([S.property({type:Number,
nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],t.prototype,"rightAngleHintSize",void 0);w.__decorate([S.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],t.prototype,"rightAngleHintOutlineSize",void 0);t=w.__decorate([I.subclass("esri.views.3d.interactive.editingTools.snapping.Settings.Defaults")],t);w=new t;q.defaults=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/has ../../../Color ../../../core/screenUtils ../../../chunks/vec3f64 ../../../support/elevationInfoUtils ./Settings ../../3d/interactive/visualElements/ExtendedLineVisualElement ../../3d/interactive/visualElements/RightAngleQuadVisualElement".split(" "),
function(q,A,w,S,I,t,H,v,G){function y(M,N,z,E,r=I.create()){M=N.toXYZ(M);M[2]=t.getConvertedElevationFromMapPoint(E,M,N.spatialReference,z);E.renderCoordsHelper.toRenderCoords(M,N.spatialReference,r);return r}function u(M,N,z,E,r=!0,C=!0){N=new v.ExtendedLineVisualElement({view:N,extensionType:3,start:z,end:E,color:w.toUnitRGBA(H.defaults.orange),renderOccluded:16});switch(M){case 0:N.width=H.defaults.lineHintWidthTarget;N.fadedExtensions={start:0,end:H.defaults.lineHintFadedExtensions};break;case 3:N.width=
H.defaults.lineHintWidthReference;N.fadedExtensions={start:0,end:0};break;case 1:case 2:N.width=H.defaults.lineHintWidthReference,N.fadedExtensions={start:r?H.defaults.lineHintFadedExtensions:0,end:C?H.defaults.lineHintFadedExtensions:0}}N.attached=!0;return N}const D=I.create(),B=S.createScreenPointArray();q.anyMapPointToRender=y;q.anyMapPointToScreenPoint=function(M,N,z,E){y(M,N,z,E,D);E.state.camera.projectToScreen(D,B);return S.createScreenPoint(B[0],B[1])};q.createLineSegmentHint=u;q.createLineSegmentHintFromEdge=
function(M,N,z,E,r,C=!0,O=!0){return u(M,r,y(N.left.pos,z,E,r),y(N.right.pos,z,E,r),C,O)};q.createLineSegmentHintFromMap=function(M,N,z,E,r,C){return u(M,C,y(N,E,r,C),y(z,E,r,C))};q.createQuadHint=function(M,N,z,E,r,C){return new G.RightAngleQuadVisualElement({view:C,attached:!0,color:w.toUnitRGBA(H.defaults.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:w.toUnitRGBA(H.defaults.orange),outlineSize:H.defaults.rightAngleHintOutlineSize,size:H.defaults.rightAngleHintSize,geometry:{previous:y(M,
E,r,C),center:y(N,E,r,C),next:y(z,E,r,C)}})};q.objectEqual=function(M,N){const z=M.length===N.length&&M[0]===N[0]&&M[1]===N[1];switch(M.length){case 2:return z;case 3:return z&&M[2]===N[2];case 4:return z&&M[3]===N[3]}return!1};q.squareDistance=function(M,N){const z=M.x-N.x;M=M.y-N.y;return z*z+M*M};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/ExtendedLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/vec4 ../../../../chunks/clipRay ../../support/geometryUtils ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Geometry ../../webgl-engine/shaders/RibbonLineTechnique ../../webgl-engine/materials/RibbonLineMaterial ../../../../chunks/vec4f32 ./LaserlineVisualElement ./Object3DVisualElement".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){w=function(F){function K(L){var Y=F.call(this,L)||this;Y._ray=y.ray.create();Y._externalResources=null;Y._handles=new H;Y._isWorldDown=!1;Y._start=I.create();Y._end=I.fromValues(1,0,0);Y._width=1;Y._color=N.fromValues(1,0,1,1);Y._polygonOffset=!1;Y._writeDepthEnabled=!0;Y._innerWidth=0;Y._innerColor=N.fromValues(1,1,1,1);Y._stippleIntegerRepeats=!0;Y._stipplePattern=null;Y._stippleOffColor=null;Y._falloff=0;Y._extensionType=0;Y._laserlineStyle=null;Y._laserlineEnabled=
!1;Y._renderOccluded=4;Y._fadedExtensions=T;Y.applyProps(L);return Y}A._inheritsLoose(K,F);var J=K.prototype;J.createExternalResources=function(){const L=new M.RibbonLineMaterial(this.materialParameters,"lineVisualElement");this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));const Y=new z.LaserlineVisualElement({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:L,laserline:Y}};J.destroyExternalResources=function(){S.isSome(this._externalResources)&&
this._externalResources.laserline.destroy();this._externalResources=null;this._handles.removeAll()};J.forEachExternalResource=function(L){S.isSome(this._externalResources)&&L(this._externalResources.material)};J.createGeometries=function(L){var Y=[I.create(),I.create()];const W=3===this.extensionType;W&&Y.push(I.create(),I.create());Y=new D(u.createPolylineGeometry(Y),"lineVisualElement");W&&(Y.data.vertexAttributes[B.RibbonVertexAttributeConstants.COLOR]={size:4,data:new Float32Array([1,1,1,0,1,
1,1,1,1,1,1,1,1,1,1,0]),offsetIdx:0,strideIdx:4},Y.data.indices[B.RibbonVertexAttributeConstants.COLOR]=new Uint32Array([0,1,2,3]));L.addGeometry(Y,S.unwrap(this._externalResources).material);this.updateVertices(Y)};J.updateVisibility=function(L){F.prototype.updateVisibility.call(this,L);S.isSome(this._externalResources)&&(this._externalResources.laserline.visible=L)};J.setStartEndFromWorldDownAtLocation=function(L){this._isWorldDown=!0;t.copy(this._start,L);this.view.renderCoordsHelper.worldUpAtPosition(L,
this._end);t.subtract(this._end,L,this._end);y.ray.fromPoints(this._start,this._end,this._ray);this.updateGeometry()};J.updateMaterial=function(){S.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};J.updateGeometry=function(){S.isSome(this.object)&&this.updateVertices(this.object.geometries[0])};J.updateVertices=function(L){const Y=3===this._extensionType?this.updateLineSegmentFinite(P):this.updateLineSegmentInfinite(this._extensionType,
P);this.updateVertexAttributes(L,Y);S.isSome(this._externalResources)&&(this._externalResources.laserline.intersectsLine=Y)};J.updateLineSegmentFinite=function(L){return y.lineSegment.fromPoints(this._start,this._end,L)};J.updateLineSegmentInfinite=function(L,Y){var W=this.view.state.camera;G.fromRay(this._ray,r);switch(L){case 0:r.c0=-Number.MAX_VALUE;break;case 1:case 2:var aa=this._ray.origin;L=this.view.elevationProvider.getElevation(aa[0],aa[1],aa[2],this.view.renderCoordsHelper.spatialReference,
"ground")||0;aa=this.view.renderCoordsHelper.getAltitude(aa);this._isWorldDown&&aa<L&&t.negate(r.ray.direction,r.ray.direction);2===this._extensionType&&null!=L&&(r.c1=Math.abs(aa-L))}if(!y.frustum.intersectClipRay(W.frustum.planes,r))return y.lineSegment.fromPoints(this._start,this._end,Y);W=G.getStart(r,C);L=G.getEnd(r,O);return y.lineSegment.fromPoints(W,L,Y)};J.updateVertexAttributes=function(L,Y){L=L.data.getVertexAttr()[B.RibbonVertexAttributeConstants.POSITION].data;if(3===this.extensionType){var W=
y.lineSegment.pointAt(Y,-this.fadedExtensions.start,C);L[0]=W[0];L[1]=W[1];L[2]=W[2];W=y.lineSegment.pointAt(Y,0,C);L[3]=W[0];L[4]=W[1];L[5]=W[2];W=y.lineSegment.pointAt(Y,1,C);L[6]=W[0];L[7]=W[1];L[8]=W[2];Y=y.lineSegment.pointAt(Y,1+this.fadedExtensions.end,C);L[9]=Y[0];L[10]=Y[1];L[11]=Y[2]}else W=y.lineSegment.pointAt(Y,0,C),L[0]=W[0],L[1]=W[1],L[2]=W[2],Y=y.lineSegment.pointAt(Y,1,C),L[3]=Y[0],L[4]=Y[1],L[5]=Y[2];S.isSome(this.object)&&this.object.geometryVertexAttrsUpdated(0)};A._createClass(K,
[{key:"start",get:function(){return this._start},set:function(L){this._isWorldDown=!1;t.exactEquals(this._start,L)||(t.copy(this._start,L),y.ray.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"end",get:function(){return this._end},set:function(L){this._isWorldDown=!1;t.exactEquals(this._end,L)||(t.copy(this._end,L),y.ray.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(L){L!==this._width&&(this._width=
L,this.updateMaterial())}},{key:"color",get:function(){return this._color},set:function(L){v.exactEquals(L,this._color)||(v.copy(this._color,L),this.updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(L){L!==this._polygonOffset&&(this._polygonOffset=L,this.updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(L){this._writeDepthEnabled!==L&&(this._writeDepthEnabled=L,this.updateMaterial())}},{key:"innerWidth",
get:function(){return this._innerWidth},set:function(L){L!==this._innerWidth&&(this._innerWidth=L,this.updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(L){v.exactEquals(L,this._innerColor)||(v.copy(this._innerColor,L),this.updateMaterial())}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(L){L!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=L,this.updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},
set:function(L){const Y=S.isSome(L)!==S.isSome(this._stipplePattern);this._stipplePattern=L;Y?this.recreate():this.updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(L){if(S.isNone(L)||S.isNone(this._stippleOffColor)||!v.exactEquals(L,this._stippleOffColor))this._stippleOffColor=S.isSome(L)?N.clone(L):null,this.updateMaterial()}},{key:"falloff",get:function(){return this._falloff},set:function(L){L!==this._falloff&&(this._falloff=L,this.updateMaterial())}},
{key:"extensionType",get:function(){return this._extensionType},set:function(L){L!==this._extensionType&&(this._extensionType=L,this.updateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&S.isSome(this._laserlineStyle)}},{key:"laserlineStyle",get:function(){return this._laserlineStyle},set:function(L){this._laserlineStyle=L;S.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,S.isSome(L)&&(this._externalResources.laserline.style=
L))}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(L){this._laserlineEnabled!==L&&(this._laserlineEnabled=L,S.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(L){L!==this._renderOccluded&&(this._renderOccluded=L,this.updateMaterial())}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},set:function(L){this._fadedExtensions=
S.unwrapOr(L,T);this.recreateGeometry()}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}}]);return K}(E.Object3DVisualElement);const r=G.create(),C=I.create(),
O=I.create(),P=y.lineSegment.create();E=1/3;const T={start:E,end:E};q.ExtendedLineVisualElement=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/clipRay":function(){define(["exports","./vec3","../core/ObjectStack","../views/3d/support/stack","./ray"],function(q,A,w,S,I){function t(E){return E?{ray:I.create(E.ray),c0:E.c0,c1:E.c1}:{ray:I.create(),c0:0,c1:Number.MAX_VALUE}}function H(E,r,C){const O=z.get();O.ray=E;O.c0=r;O.c1=C;return O}function v(E,r=t()){return G(E.ray,E.c0,E.c1,
r)}function G(E,r,C,O=t()){I.copy(E,O.ray);O.c0=r;O.c1=C;return O}function y(E,r=t()){I.copy(E,r.ray);r.c0=0;r.c1=Number.MAX_VALUE;return r}function u(E,r=t()){const C=A.normalize(S.sv3d.get(),E.vector);return D(E,C,r)}function D(E,r,C=t()){const O=A.length(E.vector);I.fromValues(E.origin,r,C.ray);C.c0=0;C.c1=O;return C}function B(E,r){return N(E,E.c0,r)}function M(E,r){return N(E,E.c1,r)}function N(E,r,C){return A.add(C,E.ray.origin,A.scale(C,E.ray.direction,r))}const z=new w.ObjectStack(()=>({c0:0,
c1:0,ray:null}));w=Object.freeze({__proto__:null,create:t,wrap:H,copy:v,fromValues:G,fromRay:y,fromLineSegment:u,fromLineSegmentAndDirection:D,getStart:B,getEnd:M,getAt:N});q.clipRayModule=w;q.copy=v;q.create=t;q.fromLineSegment=u;q.fromLineSegmentAndDirection=D;q.fromRay=y;q.fromValues=G;q.getAt=N;q.getEnd=M;q.getStart=B;q.wrap=H})},"esri/core/ObjectStack":function(){define(["exports","./maybe","./nextTick"],function(q,A,w){let S=function(){function I(H){this.allocator=H;this.items=[];this.itemsPtr=
0;this.tickHandle=w.before(()=>this.reset());this.grow()}var t=I.prototype;t.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=A.nullifyNonnullableForDispose(this.tickHandle));this.items=A.nullifyNonnullableForDispose(this.items)};t.get=function(){0===this.itemsPtr&&w(()=>{});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};t.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3072),this.items.length);
this.itemsPtr=0};t.grow=function(){for(let H=0;H<Math.max(8,Math.min(this.items.length,1024));H++)this.items.push(this.allocator())};return I}();q.ObjectStack=S;q.default=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/stack":function(){define(["exports","../../../core/VectorStack"],function(q,A){const w=A.VectorStack.createVec2f64(),S=A.VectorStack.createVec3f64(),I=A.VectorStack.createVec4f64(),t=A.VectorStack.createMat3f64(),H=A.VectorStack.createMat4f64();A=A.VectorStack.createQuatf64();
q.sm3d=t;q.sm4d=H;q.sq4d=A;q.sv2d=w;q.sv3d=S;q.sv4d=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/vec3f64 ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec4f64".split(" "),function(q,A,w,S,I,t,H,v,G,y){let u=function(){function D(M,N,z){this.itemByteSize=M;this.itemCreate=N;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;
this.itemsPerBuffer=Math.ceil(z/this.itemByteSize);this.tickHandle=S.before(()=>this.reset())}var B=D.prototype;B.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=w.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=w.nullifyNonnullableForDispose(this.items);this.buffers=w.nullifyNonnullableForDispose(this.buffers)};B.get=function(){0===this.itemsPtr&&S(()=>{});const M=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=M;){const N=
new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let z=0;z<this.itemsPerBuffer;++z)this.items.push(this.itemCreate(N,z*this.itemByteSize));this.buffers.push(N)}return this.items[this.itemsPtr++]};B.reset=function(){const M=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>M;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0};D.createVec2f64=function(M=4096){return new D(16,G.createView,M)};D.createVec3f64=function(M=4096){return new D(24,
I.createView,M)};D.createVec4f64=function(M=4096){return new D(32,y.createView,M)};D.createMat3f64=function(M=4096){return new D(72,t.createView,M)};D.createMat4f64=function(M=4096){return new D(128,H.createView,M)};D.createQuatf64=function(M=4096){return new D(32,v.createView,M)};A._createClass(D,[{key:"test",get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}}}]);return D}();q.VectorStack=u;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/mat4f64":function(){define(["exports"],
function(q){function A(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function w(v){return[v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]]}function S(v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F){return[v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F]}function I(v,G){return new Float64Array(v,G,16)}const t=A();var H=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I,IDENTITY:t});q.IDENTITY=t;q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.mat4f64=H})},"esri/chunks/ray":function(){define("exports ../core/maybe ../core/screenUtils ./vec3f64 ./vec3 ../core/ObjectStack ./vec2 ../views/3d/support/stack".split(" "),
function(q,A,w,S,I,t,H,v){function G(F){return F?{origin:S.clone(F.origin),direction:S.clone(F.direction)}:{origin:S.create(),direction:S.create()}}function y(F,K){const J=T.get();J.origin=F;J.direction=K;return J}function u(F,K=G()){return B(F.origin,F.direction,K)}function D(F,K,J=G()){I.copy(J.origin,F);I.subtract(J.direction,K,F);return J}function B(F,K,J=G()){I.copy(J.origin,F);I.copy(J.direction,K);return J}function M(F,K,J=G()){return N(F,F.screenToRender(K,w.castRenderScreenPointArray3(v.sv3d.get())),
J)}function N(F,K,J=G()){const L=w.castRenderScreenPointArray3(H.copy(v.sv3d.get(),K));L[2]=0;if(!F.unprojectFromRenderScreen(L,J.origin))return null;K=w.castRenderScreenPointArray3(H.copy(v.sv3d.get(),K));K[2]=1;F=F.unprojectFromRenderScreen(K,v.sv3d.get());if(A.isNone(F))return null;I.subtract(J.direction,F,J.origin);return J}function z(F,K,J=G()){return E(F,F.screenToRender(K,w.castRenderScreenPointArray3(v.sv3d.get())),J)}function E(F,K,J=G()){I.copy(J.origin,F.eye);K=I.set(v.sv3d.get(),K[0],
K[1],1);F=F.unprojectFromRenderScreen(K,v.sv3d.get());if(A.isNone(F))return null;I.subtract(J.direction,F,J.origin);return J}function r(F,K){F=I.cross(v.sv3d.get(),I.normalize(v.sv3d.get(),F.direction),I.subtract(v.sv3d.get(),K,F.origin));return I.dot(F,F)}function C(F,K){return Math.sqrt(r(F,K))}function O(F,K,J){K=I.dot(F.direction,I.subtract(J,K,F.origin));I.add(J,F.origin,I.scale(J,F.direction,K));return J}function P(){return{origin:null,direction:null}}const T=new t.ObjectStack(P);t=Object.freeze({__proto__:null,
create:G,wrap:y,copy:u,fromPoints:D,fromValues:B,fromScreen:M,fromRender:N,fromScreenAtEye:z,fromRenderAtEye:E,distance2:r,distance:C,closestPoint:O,createWrapper:P});q.closestPoint=O;q.copy=u;q.create=G;q.createWrapper=P;q.distance=C;q.distance2=r;q.fromPoints=D;q.fromRender=N;q.fromRenderAtEye=E;q.fromScreen=M;q.fromScreenAtEye=z;q.fromValues=B;q.rayModule=t;q.wrap=y})},"esri/views/3d/support/geometryUtils":function(){define("exports ../../../chunks/vector ../../../chunks/axisAngle ../../../chunks/lineSegment ../../../chunks/plane ../../../chunks/ray ../../../chunks/boundedPlane ../../../chunks/clipRay ../../../chunks/frustum ../../../chunks/sphere ../../../chunks/triangle".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u){I=I.planeModule;H=H.boundedPlaneModule;u=u.triangleModule;S=S.lineSegmentModule;t=t.rayModule;v=v.clipRayModule;y=y.sphereModule;G=G.frustumModule;A=A.vectorModule;q.axisAngle=w.axisAngleModule;q.boundedPlane=H;q.clipRay=v;q.frustum=G;q.lineSegment=S;q.plane=I;q.ray=t;q.sphere=y;q.triangle=u;q.vector=A;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/vector":function(){define(["exports","../core/mathUtils","./vec3f64","./vec3"],function(q,A,w,S){function I(u,
D,B){D=S.dot(u,D)/S.dot(u,u);return S.scale(B,u,D)}function t(u,D){return S.dot(u,D)/S.length(u)}function H(u,D){u=S.dot(u,D)/(S.length(u)*S.length(D));return-A.acosClamped(u)}function v(u,D,B){S.normalize(G,u);S.normalize(y,D);u=S.dot(G,y);u=A.acosClamped(u);D=S.cross(G,G,y);return 0>S.dot(D,B)?2*Math.PI-u:u}const G=w.create(),y=w.create();w=Object.freeze({__proto__:null,projectPoint:I,projectPointSignedLength:t,angle:H,angleAroundAxis:v});q.angle=H;q.angleAroundAxis=v;q.projectPoint=I;q.projectPointSignedLength=
t;q.vectorModule=w})},"esri/chunks/axisAngle":function(){define(["exports","./vec3","../views/3d/support/stack","./vector"],function(q,A,w,S){function I(N=B){return[N[0],N[1],N[2],N[3]]}function t(N,z,E,r){return G(N,z,E,r,w.sv4d.get())}function H(N,z){return G(N[0],N[1],N[2],z,w.sv4d.get())}function v(N,z=I()){return G(N[0],N[1],N[2],N[3],z)}function G(N,z,E,r,C=I()){C[0]=N;C[1]=z;C[2]=E;C[3]=r;return C}function y(N,z,E=I()){A.copy(E,N);E[3]=z;return E}function u(N,z,E=I()){A.cross(E,N,z);A.normalize(E,
E);E[3]=S.angle(N,z);return E}function D(N){return N}const B=[0,0,1,0];var M=Object.freeze({__proto__:null,create:I,wrap:t,wrapAxisAngle:H,copy:v,fromValues:G,fromAxisAndAngle:y,fromPoints:u,axis:D,UP:B});q.UP=B;q.axis=D;q.axisAngleModule=M;q.copy=v;q.create=I;q.fromAxisAndAngle=y;q.fromPoints=u;q.fromValues=G;q.wrap=t;q.wrapAxisAngle=H})},"esri/chunks/lineSegment":function(){define("exports ../core/mathUtils ./vec3f64 ./vec3 ../core/ObjectStack ../views/3d/support/stack".split(" "),function(q,A,
w,S,I,t){function H(F){return F?{origin:w.clone(F.origin),vector:w.clone(F.vector)}:{origin:w.create(),vector:w.create()}}function v(F,K){const J=T.get();J.origin=F;J.vector=K;return J}function G(F,K=H()){return y(F.origin,F.vector,K)}function y(F,K,J=H()){S.copy(J.origin,F);S.copy(J.vector,K);return J}function u(F,K,J=H()){S.copy(J.origin,F);S.subtract(J.vector,K,F);return J}function D(F,K){K=S.subtract(t.sv3d.get(),K,F.origin);var J=S.dot(F.vector,K);const L=S.dot(F.vector,F.vector);J=A.clamp(J/
L,0,1);F=S.subtract(t.sv3d.get(),S.scale(t.sv3d.get(),F.vector,J),K);return S.dot(F,F)}function B(F,K){return Math.sqrt(D(F,K))}function M(F,K,J){return z(F,K,0,1,J)}function N(F,K,J){return S.add(J,F.origin,S.scale(J,F.vector,K))}function z(F,K,J,L,Y){const {vector:W,origin:aa}=F;K=S.subtract(t.sv3d.get(),K,aa);const oa=S.length(W);K=S.dot(W,K)/oa;S.scale(Y,W,A.clamp(K,J,L));return S.add(Y,Y,F.origin)}function E(F,K){if(O(F,v(K.origin,K.direction),!1,P)){const {tA:J,pB:L,distance2:Y}=P;if(0<=J&&
1>=J)return Y;if(0>J)return S.squaredDistance(F.origin,L);if(1<J)return S.squaredDistance(S.add(t.sv3d.get(),F.origin,F.vector),L)}return null}function r(F,K,J){return O(F,K,!0,P)?(S.copy(J,P.pA),!0):!1}function C(F,K){return O(F,K,!0,P)?P.distance2:null}function O(F,K,J,L){const Y=F.origin;var W=S.add(t.sv3d.get(),Y,F.vector);F=K.origin;var aa=S.add(t.sv3d.get(),F,K.vector),oa=t.sv3d.get();K=t.sv3d.get();oa[0]=Y[0]-F[0];oa[1]=Y[1]-F[1];oa[2]=Y[2]-F[2];K[0]=aa[0]-F[0];K[1]=aa[1]-F[1];K[2]=aa[2]-F[2];
if(1E-6>Math.abs(K[0])&&1E-6>Math.abs(K[1])&&1E-6>Math.abs(K[2]))return!1;aa=t.sv3d.get();aa[0]=W[0]-Y[0];aa[1]=W[1]-Y[1];aa[2]=W[2]-Y[2];if(1E-6>Math.abs(aa[0])&&1E-6>Math.abs(aa[1])&&1E-6>Math.abs(aa[2]))return!1;W=oa[0]*K[0]+oa[1]*K[1]+oa[2]*K[2];var ta=K[0]*aa[0]+K[1]*aa[1]+K[2]*aa[2];const la=K[0]*K[0]+K[1]*K[1]+K[2]*K[2],X=(aa[0]*aa[0]+aa[1]*aa[1]+aa[2]*aa[2])*la-ta*ta;if(1E-6>Math.abs(X))return!1;oa=(W*ta-(oa[0]*aa[0]+oa[1]*aa[1]+oa[2]*aa[2])*la)/X;W=(W+ta*oa)/la;J&&(oa=A.clamp(oa,0,1),W=A.clamp(W,
0,1));J=t.sv3d.get();ta=t.sv3d.get();J[0]=Y[0]+oa*aa[0];J[1]=Y[1]+oa*aa[1];J[2]=Y[2]+oa*aa[2];ta[0]=F[0]+W*K[0];ta[1]=F[1]+W*K[1];ta[2]=F[2]+W*K[2];L.tA=oa;L.tB=W;L.pA=J;L.pB=ta;L.distance2=S.squaredDistance(J,ta);return!0}const P={tA:0,tB:0,pA:w.create(),pB:w.create(),distance2:0},T=new I.ObjectStack(()=>({origin:null,vector:null}));I=Object.freeze({__proto__:null,create:H,wrap:v,copy:G,fromValues:y,fromPoints:u,distance2:D,distance:B,projectPoint:M,pointAt:N,projectPointClamp:z,closestRayDistance2:E,
closestLineSegmentPoint:r,closestLineSegmentDistance2:C});q.closestLineSegmentDistance2=C;q.closestLineSegmentPoint=r;q.closestRayDistance2=E;q.copy=G;q.create=H;q.distance=B;q.distance2=D;q.fromPoints=u;q.fromValues=y;q.lineSegmentModule=I;q.pointAt=N;q.projectPoint=M;q.projectPointClamp=z;q.wrap=v})},"esri/chunks/plane":function(){define("exports ../core/maybe ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/stack".split(" "),function(q,A,w,S,I,t){function H(ja=va){return[ja[0],ja[1],ja[2],
ja[3]]}function v(ja,ua,Aa,Ga){return y(ja,ua,Aa,Ga,t.sv4d.get())}function G(ja,ua=H()){return y(ja[0],ja[1],ja[2],ja[3],ua)}function y(ja,ua,Aa,Ga,Na=H()){Na[0]=ja;Na[1]=ua;Na[2]=Aa;Na[3]=Ga;return Na}function u(ja,ua,Aa=H()){I.copy(Aa,ja);Aa[3]=ua;return Aa}function D(ja,ua,Aa=H()){I.copy(Aa,ua);ua=I.dot(ua,ua);1E-5<Math.abs(ua-1)&&1E-12<ua&&I.scale(Aa,Aa,1/Math.sqrt(ua));z(Aa,ja,Aa);return Aa}function B(ja,ua,Aa,Ga=H()){return r(I.subtract(t.sv3d.get(),ja,ua),I.subtract(t.sv3d.get(),Aa,ua),ja,
Ga)}function M(ja,ua){return N(ja,ua,0,1,2)}function N(ja,ua,Aa,Ga,Na){if(3>ja.count)return!1;ja.getVec(Aa,ka);let Oa=Ga,Z=!1;for(;Oa<ja.count-1&&!Z;)ja.getVec(Oa,sa),Oa++,Z=!I.exactEquals(ka,sa);if(!Z)return!1;Oa=Math.max(Oa,Na);for(Z=!1;Oa<ja.count&&!Z;)ja.getVec(Oa,qa),Oa++,I.subtract(na,ka,sa),I.normalize(na,na),I.subtract(pa,sa,qa),I.normalize(pa,pa),Z=!I.exactEquals(ka,qa)&&!I.exactEquals(sa,qa)&&.99619469809>Math.abs(I.dot(na,pa));if(!Z)return 0===Aa&&1===Ga&&2===Na?!1:N(ja,ua,0,1,2);B(ka,
sa,qa,ua);return!0}function z(ja,ua,Aa){ja!==Aa&&G(ja,Aa);Aa[3]=-I.dot(Aa,ua);return Aa}function E(ja,ua){ua[0]=-ja[0];ua[1]=-ja[1];ua[2]=-ja[2];ua[3]=-ja[3];return ua}function r(ja,ua,Aa,Ga=H()){ja=I.cross(t.sv3d.get(),ua,ja);return D(Aa,ja,Ga)}function C(ja,ua,Aa){return A.isSome(ua)?X(ja,ua.origin,ua.direction,!0,!1,Aa):!1}function O(ja,ua,Aa){return X(ja,ua.origin,ua.vector,!1,!1,Aa)}function P(ja,ua,Aa){return X(ja,ua.origin,ua.vector,!1,!0,Aa)}function T(ja,ua){const {center:Aa,radius:Ga}=ua;
return 0<=la(ja,Aa)-Ga}function F(ja,ua){const {center:Aa,radius:Ga}=ua;return 0>la(ja,Aa)+Ga}function K(ja,ua){return 0<=la(ja,ua)}function J(ja,ua){return 0>la(ja,ua)}function L(ja,ua){const Aa=ua[0],Ga=ua[1],Na=ua[2],Oa=ua[3],Z=ua[4];ua=ua[5];return 0<=ja[0]*(0<ja[0]?Aa:Oa)+ja[1]*(0<ja[1]?Ga:Z)+ja[2]*(0<ja[2]?Na:ua)+ja[3]}function Y(ja,ua){const Aa=I.dot(ja,ua.ray.direction);ja=-la(ja,ua.ray.origin);if(0>ja&&0<=Aa)return!1;if(-1E-6<Aa&&1E-6>Aa)return 0<ja;if((0>ja||0>Aa)&&!(0>ja&&0>Aa))return!0;
ja/=Aa;0<Aa?ja<ua.c1&&(ua.c1=ja):ja>ua.c0&&(ua.c0=ja);return ua.c0<=ua.c1}function W(ja,ua){const Aa=I.dot(ja,ua.ray.direction);ja=-la(ja,ua.ray.origin);if(-1E-6<Aa&&1E-6>Aa)return 0<ja;ja/=Aa;0<Aa?ja<ua.c1&&(ua.c1=ja):ja>ua.c0&&(ua.c0=ja);return ua.c0<=ua.c1}function aa(ja,ua,Aa){const Ga=I.scale(t.sv3d.get(),ja,-ja[3]);ua=I.subtract(t.sv3d.get(),ua,Ga);ja=oa(ja,ua,t.sv3d.get());I.add(Aa,ja,Ga);return Aa}function oa(ja,ua,Aa){ja=I.scale(t.sv3d.get(),ja,I.dot(ja,ua));I.subtract(Aa,ua,ja);return Aa}
function ta(ja,ua){return Math.abs(la(ja,ua))}function la(ja,ua){return I.dot(ja,ua)+ja[3]}function X(ja,ua,Aa,Ga,Na,Oa){const Z=I.dot(ja,Aa);if(0===Z)return!1;ja=-(I.dot(ja,ua)+ja[3])/Z;Na&&(ja=Ga?Math.max(0,ja):w.clamp(ja,0,1));if(0>ja||!Ga&&1<ja)return!1;I.add(Oa,ua,I.scale(Oa,Aa,ja));return!0}function U(ja){return ja}const ka=S.create(),sa=S.create(),qa=S.create(),na=S.create(),pa=S.create(),va=[0,0,1,0];S=Object.freeze({__proto__:null,create:H,wrap:v,copy:G,fromValues:y,fromNormalAndOffset:u,
fromPositionAndNormal:D,fromPoints:B,fromManyPoints:M,fromManyPointsSampleAt:N,setOffsetFromPoint:z,negate:E,fromVectorsAndPoint:r,intersectRay:C,intersectLineSegment:O,intersectLineSegmentClamp:P,isSphereFullyInside:T,isSphereFullyOutside:F,isPointInside:K,isPointOutside:J,isAABBFullyInside:L,clip:Y,clipInfinite:W,projectPoint:aa,projectVector:oa,distance:ta,signedDistance:la,normal:U,UP:va});q.UP=va;q.clip=Y;q.clipInfinite=W;q.copy=G;q.create=H;q.distance=ta;q.fromManyPoints=M;q.fromManyPointsSampleAt=
N;q.fromNormalAndOffset=u;q.fromPoints=B;q.fromPositionAndNormal=D;q.fromValues=y;q.fromVectorsAndPoint=r;q.intersectLineSegment=O;q.intersectLineSegmentClamp=P;q.intersectRay=C;q.isAABBFullyInside=L;q.isPointInside=K;q.isPointOutside=J;q.isSphereFullyInside=T;q.isSphereFullyOutside=F;q.negate=E;q.normal=U;q.planeModule=S;q.projectPoint=aa;q.projectVector=oa;q.setOffsetFromPoint=z;q.signedDistance=la;q.wrap=v})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/mathUtils ./mat4 ../core/ObjectStack ./mat4f64 ../views/3d/support/stack ./vector ./lineSegment ./plane ./ray".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N){function z(wa=Oa){return{plane:M.create(wa.plane),origin:I.clone(wa.origin),basis1:I.clone(wa.basis1),basis2:I.clone(wa.basis2)}}function E(wa,ia,ra){const xa=Da.get();xa.origin=wa;xa.basis1=ia;xa.basis2=ra;xa.plane=M.wrap(0,0,0,0);O(xa);return xa}function r(wa,ia=z()){return C(wa.origin,wa.basis1,wa.basis2,ia)}function C(wa,ia,ra,xa=z()){t.copy(xa.origin,wa);t.copy(xa.basis1,ia);t.copy(xa.basis2,ra);O(xa);1E-6<Math.abs(t.dot(xa.basis1,xa.basis2)/(t.length(xa.basis1)*
t.length(xa.basis2)))&&Na.warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(t.dot(xa.basis1,va(xa)))&&Na.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-t.dot(va(xa),xa.origin)-xa.plane[3])&&Na.warn("fromValues()","Plane offset is not consistent with plane origin");return xa}function O(wa){M.fromVectorsAndPoint(wa.basis2,wa.basis1,wa.origin,wa.plane)}function P(wa,ia,ra){wa!==ra&&r(wa,ra);wa=t.scale(u.sv3d.get(),va(wa),ia);
t.add(ra.origin,ra.origin,wa);ra.plane[3]-=ia;return ra}function T(wa,ia,ra){F(ia,ra);P(ra,ka(wa,wa.origin),ra);return ra}function F(wa,ia=z()){const ra=(wa[2]-wa[0])/2,xa=(wa[3]-wa[1])/2;t.set(ia.origin,wa[0]+ra,wa[1]+xa,0);t.set(ia.basis1,ra,0,0);t.set(ia.basis2,0,xa,0);M.fromValues(0,0,1,0,ia.plane);return ia}function K(wa,ia,ra){return M.intersectRay(wa.plane,ia,ra)?ja(wa,ra):!1}function J(wa,ia,ra){if(K(wa,ia,ra))return ra;wa=L(wa,ia,u.sv3d.get());t.add(ra,ia.origin,t.scale(u.sv3d.get(),ia.direction,
t.distance(ia.origin,wa)/t.length(ia.direction)));return ra}function L(wa,ia,ra){const xa=Z.get();var ya=Z.get();Ga(wa,ia,xa,ya);ya=Number.POSITIVE_INFINITY;for(const Ha of Ja){var Ka=Aa(wa,Ha,ha.get());const La=u.sv3d.get();M.intersectLineSegment(xa,Ka,La)&&(Ka=H.directionFromTo(u.sv3d.get(),ia.origin,La),Ka=Math.abs(S.acosClamped(t.dot(ia.direction,Ka))),Ka<ya&&(ya=Ka,t.copy(ra,La)))}return ya===Number.POSITIVE_INFINITY?Y(wa,ia,ra):ra}function Y(wa,ia,ra){if(K(wa,ia,ra))return ra;const xa=Z.get(),
ya=Z.get();Ga(wa,ia,xa,ya);let Ka=Number.POSITIVE_INFINITY;for(const La of Ja){var Ha=Aa(wa,La,ha.get());const Ia=u.sv3d.get();M.intersectLineSegmentClamp(xa,Ha,Ia)&&(Ha=N.distance2(ia,Ia),M.isPointInside(ya,Ia)&&Ha<Ka&&(Ka=Ha,t.copy(ra,Ia)))}oa(wa,ia.origin)<Ka&&W(wa,ia.origin,ra);return ra}function W(wa,ia,ra){var xa=M.projectPoint(wa.plane,ia,u.sv3d.get());ia=B.projectPointClamp(ua(wa,wa.basis1),xa,-1,1,u.sv3d.get());xa=B.projectPointClamp(ua(wa,wa.basis2),xa,-1,1,u.sv3d.get());t.subtract(ra,t.add(u.sv3d.get(),
ia,xa),wa.origin);return ra}function aa(wa,ia,ra){const {origin:xa,basis1:ya,basis2:Ka}=wa,Ha=t.subtract(u.sv3d.get(),ia,xa);ia=D.projectPointSignedLength(ya,Ha);const La=D.projectPointSignedLength(Ka,Ha);wa=D.projectPointSignedLength(va(wa),Ha);return t.set(ra,ia,La,wa)}function oa(wa,ia){ia=aa(wa,ia,u.sv3d.get());const {basis1:ra,basis2:xa}=wa;wa=t.length(ra);var ya=t.length(xa);wa=Math.max(Math.abs(ia[0])-wa,0);ya=Math.max(Math.abs(ia[1])-ya,0);ia=ia[2];return wa*wa+ya*ya+ia*ia}function ta(wa,
ia){return Math.sqrt(oa(wa,ia))}function la(wa,ia){let ra=Number.NEGATIVE_INFINITY;for(const ya of Ja){var xa=Aa(wa,ya,ha.get());xa=B.distance2(xa,ia);xa>ra&&(ra=xa)}return Math.sqrt(ra)}function X(wa,ia){return M.isPointInside(wa.plane,ia)&&ja(wa,ia)}function U(wa,ia,ra,xa){switch(ra){case 0:t.copy(xa,wa.basis1);t.normalize(xa,xa);break;case 1:t.copy(xa,wa.basis2);t.normalize(xa,xa);break;case 2:t.copy(xa,va(wa))}return xa}function ka(wa,ia){const ra=-wa.plane[3];return D.projectPointSignedLength(va(wa),
ia)-ra}function sa(wa,ia,ra,xa){const ya=ka(wa,ia);wa=t.scale(Ca,va(wa),ra-ya);t.add(xa,ia,wa);return xa}function qa(wa,ia){return t.exactEquals(wa.basis1,ia.basis1)&&t.exactEquals(wa.basis2,ia.basis2)&&t.exactEquals(wa.origin,ia.origin)}function na(wa,ia,ra){wa!==ra&&r(wa,ra);v.invert(Fa,ia);v.transpose(Fa,Fa);t.transformMat4(ra.basis1,wa.basis1,Fa);t.transformMat4(ra.basis2,wa.basis2,Fa);t.transformMat4(M.normal(ra.plane),M.normal(wa.plane),Fa);t.transformMat4(ra.origin,wa.origin,ia);M.setOffsetFromPoint(ra.plane,
ra.origin,ra.plane);return ra}function pa(wa,ia,ra,xa){wa!==xa&&r(wa,xa);v.rotate(fa,v.identity(fa),ia,ra);t.transformMat4(xa.basis1,wa.basis1,fa);t.transformMat4(xa.basis2,wa.basis2,fa);O(xa);return xa}function va(wa){return M.normal(wa.plane)}function ja(wa,ia){const ra=t.subtract(u.sv3d.get(),ia,wa.origin);ia=t.squaredLength(wa.basis1);const xa=t.squaredLength(wa.basis2),ya=t.dot(wa.basis1,ra);wa=t.dot(wa.basis2,ra);return 0>-ya-ia&&0>ya-ia&&0>-wa-xa&&0>wa-xa}function ua(wa,ia){const ra=ha.get();
t.copy(ra.origin,wa.origin);t.copy(ra.vector,ia);return ra}function Aa(wa,ia,ra){const {basis1:xa,basis2:ya,origin:Ka}=wa;wa=t.scale(u.sv3d.get(),xa,ia.origin[0]);const Ha=t.scale(u.sv3d.get(),ya,ia.origin[1]);t.add(ra.origin,wa,Ha);t.add(ra.origin,ra.origin,Ka);wa=t.scale(u.sv3d.get(),xa,ia.direction[0]);ia=t.scale(u.sv3d.get(),ya,ia.direction[1]);t.scale(ra.vector,t.add(wa,wa,ia),2);return ra}function Ga(wa,ia,ra,xa){wa=va(wa);M.fromVectorsAndPoint(wa,ia.direction,ia.origin,ra);M.fromVectorsAndPoint(M.normal(ra),
wa,ia.origin,xa)}const Na=w.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");A=function(){this.plane=M.create();this.origin=I.create();this.basis1=I.create();this.basis2=I.create()};const Oa={plane:M.create(),origin:I.fromValues(0,0,0),basis1:I.fromValues(1,0,0),basis2:I.fromValues(0,1,0)},Z=new G.ObjectStack(M.create),ha=new G.ObjectStack(B.create),Ca=I.create(),Da=new G.ObjectStack(()=>({origin:null,basis1:null,basis2:null,plane:null})),Ja=[{origin:[-1,-1],direction:[1,0]},{origin:[1,
-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],Fa=y.create(),fa=y.create();G=Object.freeze({__proto__:null,BoundedPlaneClass:A,create:z,wrap:E,copy:r,fromValues:C,updateUnboundedPlane:O,elevate:P,setExtent:T,fromAABoundingRect:F,intersectRay:K,intersectRayClosestSilhouette:J,closestPointOnSilhouette:L,closestPoint:Y,projectPoint:W,projectPointLocal:aa,distance2:oa,distance:ta,distanceToSilhouette:la,extrusionContainsPoint:X,axisAt:U,altitudeAt:ka,setAltitudeAt:sa,
equals:qa,transform:na,rotate:pa,normal:va,UP:Oa});q.BoundedPlaneClass=A;q.UP=Oa;q.altitudeAt=ka;q.axisAt=U;q.boundedPlaneModule=G;q.closestPoint=Y;q.closestPointOnSilhouette=L;q.copy=r;q.create=z;q.distance=ta;q.distance2=oa;q.distanceToSilhouette=la;q.elevate=P;q.equals=qa;q.extrusionContainsPoint=X;q.fromAABoundingRect=F;q.fromValues=C;q.intersectRay=K;q.intersectRayClosestSilhouette=J;q.normal=va;q.projectPoint=W;q.projectPointLocal=aa;q.rotate=pa;q.setAltitudeAt=sa;q.setExtent=T;q.transform=
na;q.updateUnboundedPlane=O;q.wrap=E})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(q,A,w){function S(Z,ha){Z[0]=ha[0];Z[1]=ha[1];Z[2]=ha[2];Z[3]=ha[3];Z[4]=ha[4];Z[5]=ha[5];Z[6]=ha[6];Z[7]=ha[7];Z[8]=ha[8];Z[9]=ha[9];Z[10]=ha[10];Z[11]=ha[11];Z[12]=ha[12];Z[13]=ha[13];Z[14]=ha[14];Z[15]=ha[15];return Z}function I(Z,ha,Ca,Da,Ja,Fa,fa,wa,ia,ra,xa,ya,Ka,Ha,La,Ia,f){Z[0]=ha;Z[1]=Ca;Z[2]=Da;Z[3]=Ja;Z[4]=Fa;Z[5]=fa;Z[6]=wa;Z[7]=ia;Z[8]=ra;Z[9]=xa;Z[10]=ya;Z[11]=Ka;
Z[12]=Ha;Z[13]=La;Z[14]=Ia;Z[15]=f;return Z}function t(Z){Z[0]=1;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=1;Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[10]=1;Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function H(Z,ha){if(Z===ha){const Ca=ha[1],Da=ha[2],Ja=ha[3],Fa=ha[6],fa=ha[7],wa=ha[11];Z[1]=ha[4];Z[2]=ha[8];Z[3]=ha[12];Z[4]=Ca;Z[6]=ha[9];Z[7]=ha[13];Z[8]=Da;Z[9]=Fa;Z[11]=ha[14];Z[12]=Ja;Z[13]=fa;Z[14]=wa}else Z[0]=ha[0],Z[1]=ha[4],Z[2]=ha[8],Z[3]=ha[12],Z[4]=ha[1],Z[5]=ha[5],Z[6]=ha[9],Z[7]=ha[13],Z[8]=ha[2],
Z[9]=ha[6],Z[10]=ha[10],Z[11]=ha[14],Z[12]=ha[3],Z[13]=ha[7],Z[14]=ha[11],Z[15]=ha[15];return Z}function v(Z,ha){const Ca=ha[0],Da=ha[1],Ja=ha[2],Fa=ha[3],fa=ha[4],wa=ha[5],ia=ha[6],ra=ha[7],xa=ha[8],ya=ha[9],Ka=ha[10],Ha=ha[11],La=ha[12],Ia=ha[13],f=ha[14];ha=ha[15];const R=Ca*wa-Da*fa,l=Ca*ia-Ja*fa,c=Ca*ra-Fa*fa,a=Da*ia-Ja*wa,b=Da*ra-Fa*wa,d=Ja*ra-Fa*ia,e=xa*Ia-ya*La,g=xa*f-Ka*La,h=xa*ha-Ha*La,k=ya*f-Ka*Ia,m=ya*ha-Ha*Ia,n=Ka*ha-Ha*f;let p=R*n-l*m+c*k+a*h-b*g+d*e;if(!p)return null;p=1/p;Z[0]=(wa*
n-ia*m+ra*k)*p;Z[1]=(Ja*m-Da*n-Fa*k)*p;Z[2]=(Ia*d-f*b+ha*a)*p;Z[3]=(Ka*b-ya*d-Ha*a)*p;Z[4]=(ia*h-fa*n-ra*g)*p;Z[5]=(Ca*n-Ja*h+Fa*g)*p;Z[6]=(f*c-La*d-ha*l)*p;Z[7]=(xa*d-Ka*c+Ha*l)*p;Z[8]=(fa*m-wa*h+ra*e)*p;Z[9]=(Da*h-Ca*m-Fa*e)*p;Z[10]=(La*b-Ia*c+ha*R)*p;Z[11]=(ya*c-xa*b-Ha*R)*p;Z[12]=(wa*g-fa*k-ia*e)*p;Z[13]=(Ca*k-Da*g+Ja*e)*p;Z[14]=(Ia*l-La*a-f*R)*p;Z[15]=(xa*a-ya*l+Ka*R)*p;return Z}function G(Z,ha){const Ca=ha[0],Da=ha[1],Ja=ha[2],Fa=ha[3],fa=ha[4],wa=ha[5],ia=ha[6],ra=ha[7],xa=ha[8],ya=ha[9],Ka=
ha[10],Ha=ha[11],La=ha[12],Ia=ha[13],f=ha[14];ha=ha[15];Z[0]=wa*(Ka*ha-Ha*f)-ya*(ia*ha-ra*f)+Ia*(ia*Ha-ra*Ka);Z[1]=-(Da*(Ka*ha-Ha*f)-ya*(Ja*ha-Fa*f)+Ia*(Ja*Ha-Fa*Ka));Z[2]=Da*(ia*ha-ra*f)-wa*(Ja*ha-Fa*f)+Ia*(Ja*ra-Fa*ia);Z[3]=-(Da*(ia*Ha-ra*Ka)-wa*(Ja*Ha-Fa*Ka)+ya*(Ja*ra-Fa*ia));Z[4]=-(fa*(Ka*ha-Ha*f)-xa*(ia*ha-ra*f)+La*(ia*Ha-ra*Ka));Z[5]=Ca*(Ka*ha-Ha*f)-xa*(Ja*ha-Fa*f)+La*(Ja*Ha-Fa*Ka);Z[6]=-(Ca*(ia*ha-ra*f)-fa*(Ja*ha-Fa*f)+La*(Ja*ra-Fa*ia));Z[7]=Ca*(ia*Ha-ra*Ka)-fa*(Ja*Ha-Fa*Ka)+xa*(Ja*ra-Fa*ia);
Z[8]=fa*(ya*ha-Ha*Ia)-xa*(wa*ha-ra*Ia)+La*(wa*Ha-ra*ya);Z[9]=-(Ca*(ya*ha-Ha*Ia)-xa*(Da*ha-Fa*Ia)+La*(Da*Ha-Fa*ya));Z[10]=Ca*(wa*ha-ra*Ia)-fa*(Da*ha-Fa*Ia)+La*(Da*ra-Fa*wa);Z[11]=-(Ca*(wa*Ha-ra*ya)-fa*(Da*Ha-Fa*ya)+xa*(Da*ra-Fa*wa));Z[12]=-(fa*(ya*f-Ka*Ia)-xa*(wa*f-ia*Ia)+La*(wa*Ka-ia*ya));Z[13]=Ca*(ya*f-Ka*Ia)-xa*(Da*f-Ja*Ia)+La*(Da*Ka-Ja*ya);Z[14]=-(Ca*(wa*f-ia*Ia)-fa*(Da*f-Ja*Ia)+La*(Da*ia-Ja*wa));Z[15]=Ca*(wa*Ka-ia*ya)-fa*(Da*Ka-Ja*ya)+xa*(Da*ia-Ja*wa);return Z}function y(Z){const ha=Z[0],Ca=Z[1],
Da=Z[2],Ja=Z[3],Fa=Z[4],fa=Z[5],wa=Z[6],ia=Z[7],ra=Z[8],xa=Z[9],ya=Z[10],Ka=Z[11],Ha=Z[12],La=Z[13],Ia=Z[14];Z=Z[15];return(ha*fa-Ca*Fa)*(ya*Z-Ka*Ia)-(ha*wa-Da*Fa)*(xa*Z-Ka*La)+(ha*ia-Ja*Fa)*(xa*Ia-ya*La)+(Ca*wa-Da*fa)*(ra*Z-Ka*Ha)-(Ca*ia-Ja*fa)*(ra*Ia-ya*Ha)+(Da*ia-Ja*wa)*(ra*La-xa*Ha)}function u(Z,ha,Ca){const Da=ha[0],Ja=ha[1],Fa=ha[2],fa=ha[3],wa=ha[4],ia=ha[5],ra=ha[6],xa=ha[7],ya=ha[8],Ka=ha[9],Ha=ha[10],La=ha[11],Ia=ha[12],f=ha[13],R=ha[14];ha=ha[15];let l=Ca[0],c=Ca[1],a=Ca[2],b=Ca[3];Z[0]=
l*Da+c*wa+a*ya+b*Ia;Z[1]=l*Ja+c*ia+a*Ka+b*f;Z[2]=l*Fa+c*ra+a*Ha+b*R;Z[3]=l*fa+c*xa+a*La+b*ha;l=Ca[4];c=Ca[5];a=Ca[6];b=Ca[7];Z[4]=l*Da+c*wa+a*ya+b*Ia;Z[5]=l*Ja+c*ia+a*Ka+b*f;Z[6]=l*Fa+c*ra+a*Ha+b*R;Z[7]=l*fa+c*xa+a*La+b*ha;l=Ca[8];c=Ca[9];a=Ca[10];b=Ca[11];Z[8]=l*Da+c*wa+a*ya+b*Ia;Z[9]=l*Ja+c*ia+a*Ka+b*f;Z[10]=l*Fa+c*ra+a*Ha+b*R;Z[11]=l*fa+c*xa+a*La+b*ha;l=Ca[12];c=Ca[13];a=Ca[14];b=Ca[15];Z[12]=l*Da+c*wa+a*ya+b*Ia;Z[13]=l*Ja+c*ia+a*Ka+b*f;Z[14]=l*Fa+c*ra+a*Ha+b*R;Z[15]=l*fa+c*xa+a*La+b*ha;return Z}
function D(Z,ha,Ca){const Da=Ca[0],Ja=Ca[1];Ca=Ca[2];let Fa=void 0,fa=void 0,wa=void 0,ia=void 0,ra=void 0,xa=void 0,ya=void 0,Ka=void 0,Ha=void 0,La=void 0,Ia=void 0,f=void 0;ha===Z?(Z[12]=ha[0]*Da+ha[4]*Ja+ha[8]*Ca+ha[12],Z[13]=ha[1]*Da+ha[5]*Ja+ha[9]*Ca+ha[13],Z[14]=ha[2]*Da+ha[6]*Ja+ha[10]*Ca+ha[14],Z[15]=ha[3]*Da+ha[7]*Ja+ha[11]*Ca+ha[15]):(Fa=ha[0],fa=ha[1],wa=ha[2],ia=ha[3],ra=ha[4],xa=ha[5],ya=ha[6],Ka=ha[7],Ha=ha[8],La=ha[9],Ia=ha[10],f=ha[11],Z[0]=Fa,Z[1]=fa,Z[2]=wa,Z[3]=ia,Z[4]=ra,Z[5]=
xa,Z[6]=ya,Z[7]=Ka,Z[8]=Ha,Z[9]=La,Z[10]=Ia,Z[11]=f,Z[12]=Fa*Da+ra*Ja+Ha*Ca+ha[12],Z[13]=fa*Da+xa*Ja+La*Ca+ha[13],Z[14]=wa*Da+ya*Ja+Ia*Ca+ha[14],Z[15]=ia*Da+Ka*Ja+f*Ca+ha[15]);return Z}function B(Z,ha,Ca){const Da=Ca[0],Ja=Ca[1];Ca=Ca[2];Z[0]=ha[0]*Da;Z[1]=ha[1]*Da;Z[2]=ha[2]*Da;Z[3]=ha[3]*Da;Z[4]=ha[4]*Ja;Z[5]=ha[5]*Ja;Z[6]=ha[6]*Ja;Z[7]=ha[7]*Ja;Z[8]=ha[8]*Ca;Z[9]=ha[9]*Ca;Z[10]=ha[10]*Ca;Z[11]=ha[11]*Ca;Z[12]=ha[12];Z[13]=ha[13];Z[14]=ha[14];Z[15]=ha[15];return Z}function M(Z,ha,Ca,Da){let Ja=
Da[0],Fa=Da[1];Da=Da[2];let fa=Math.sqrt(Ja*Ja+Fa*Fa+Da*Da);var wa=void 0,ia=void 0;let ra=void 0,xa=void 0,ya=void 0,Ka=void 0,Ha=void 0,La=void 0,Ia=void 0,f=void 0,R=void 0,l=void 0,c=void 0,a=void 0,b=void 0,d=void 0,e=void 0,g=void 0,h=void 0,k=void 0,m=void 0,n=void 0;ia=wa=void 0;if(fa<w.EPSILON)return null;fa=1/fa;Ja*=fa;Fa*=fa;Da*=fa;wa=Math.sin(Ca);ia=Math.cos(Ca);ra=1-ia;xa=ha[0];ya=ha[1];Ka=ha[2];Ha=ha[3];La=ha[4];Ia=ha[5];f=ha[6];R=ha[7];l=ha[8];c=ha[9];a=ha[10];b=ha[11];d=Ja*Ja*ra+ia;
e=Fa*Ja*ra+Da*wa;g=Da*Ja*ra-Fa*wa;h=Ja*Fa*ra-Da*wa;k=Fa*Fa*ra+ia;m=Da*Fa*ra+Ja*wa;n=Ja*Da*ra+Fa*wa;wa=Fa*Da*ra-Ja*wa;ia=Da*Da*ra+ia;Z[0]=xa*d+La*e+l*g;Z[1]=ya*d+Ia*e+c*g;Z[2]=Ka*d+f*e+a*g;Z[3]=Ha*d+R*e+b*g;Z[4]=xa*h+La*k+l*m;Z[5]=ya*h+Ia*k+c*m;Z[6]=Ka*h+f*k+a*m;Z[7]=Ha*h+R*k+b*m;Z[8]=xa*n+La*wa+l*ia;Z[9]=ya*n+Ia*wa+c*ia;Z[10]=Ka*n+f*wa+a*ia;Z[11]=Ha*n+R*wa+b*ia;ha!==Z&&(Z[12]=ha[12],Z[13]=ha[13],Z[14]=ha[14],Z[15]=ha[15]);return Z}function N(Z,ha,Ca){const Da=Math.sin(Ca);Ca=Math.cos(Ca);const Ja=
ha[4],Fa=ha[5],fa=ha[6],wa=ha[7],ia=ha[8],ra=ha[9],xa=ha[10],ya=ha[11];ha!==Z&&(Z[0]=ha[0],Z[1]=ha[1],Z[2]=ha[2],Z[3]=ha[3],Z[12]=ha[12],Z[13]=ha[13],Z[14]=ha[14],Z[15]=ha[15]);Z[4]=Ja*Ca+ia*Da;Z[5]=Fa*Ca+ra*Da;Z[6]=fa*Ca+xa*Da;Z[7]=wa*Ca+ya*Da;Z[8]=ia*Ca-Ja*Da;Z[9]=ra*Ca-Fa*Da;Z[10]=xa*Ca-fa*Da;Z[11]=ya*Ca-wa*Da;return Z}function z(Z,ha,Ca){const Da=Math.sin(Ca);Ca=Math.cos(Ca);const Ja=ha[0],Fa=ha[1],fa=ha[2],wa=ha[3],ia=ha[8],ra=ha[9],xa=ha[10],ya=ha[11];ha!==Z&&(Z[4]=ha[4],Z[5]=ha[5],Z[6]=ha[6],
Z[7]=ha[7],Z[12]=ha[12],Z[13]=ha[13],Z[14]=ha[14],Z[15]=ha[15]);Z[0]=Ja*Ca-ia*Da;Z[1]=Fa*Ca-ra*Da;Z[2]=fa*Ca-xa*Da;Z[3]=wa*Ca-ya*Da;Z[8]=Ja*Da+ia*Ca;Z[9]=Fa*Da+ra*Ca;Z[10]=fa*Da+xa*Ca;Z[11]=wa*Da+ya*Ca;return Z}function E(Z,ha,Ca){const Da=Math.sin(Ca);Ca=Math.cos(Ca);const Ja=ha[0],Fa=ha[1],fa=ha[2],wa=ha[3],ia=ha[4],ra=ha[5],xa=ha[6],ya=ha[7];ha!==Z&&(Z[8]=ha[8],Z[9]=ha[9],Z[10]=ha[10],Z[11]=ha[11],Z[12]=ha[12],Z[13]=ha[13],Z[14]=ha[14],Z[15]=ha[15]);Z[0]=Ja*Ca+ia*Da;Z[1]=Fa*Ca+ra*Da;Z[2]=fa*Ca+
xa*Da;Z[3]=wa*Ca+ya*Da;Z[4]=ia*Ca-Ja*Da;Z[5]=ra*Ca-Fa*Da;Z[6]=xa*Ca-fa*Da;Z[7]=ya*Ca-wa*Da;return Z}function r(Z,ha){Z[0]=1;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=1;Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[10]=1;Z[11]=0;Z[12]=ha[0];Z[13]=ha[1];Z[14]=ha[2];Z[15]=1;return Z}function C(Z,ha){Z[0]=ha[0];Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=ha[1];Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[10]=ha[2];Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function O(Z,ha,Ca){let Da=Ca[0],Ja=Ca[1];Ca=Ca[2];let Fa=Math.sqrt(Da*Da+Ja*Ja+Ca*Ca),fa=
void 0,wa=void 0,ia=void 0;if(Fa<w.EPSILON)return null;Fa=1/Fa;Da*=Fa;Ja*=Fa;Ca*=Fa;fa=Math.sin(ha);wa=Math.cos(ha);ia=1-wa;Z[0]=Da*Da*ia+wa;Z[1]=Ja*Da*ia+Ca*fa;Z[2]=Ca*Da*ia-Ja*fa;Z[3]=0;Z[4]=Da*Ja*ia-Ca*fa;Z[5]=Ja*Ja*ia+wa;Z[6]=Ca*Ja*ia+Da*fa;Z[7]=0;Z[8]=Da*Ca*ia+Ja*fa;Z[9]=Ja*Ca*ia-Da*fa;Z[10]=Ca*Ca*ia+wa;Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function P(Z,ha){const Ca=Math.sin(ha);ha=Math.cos(ha);Z[0]=1;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=ha;Z[6]=Ca;Z[7]=0;Z[8]=0;Z[9]=-Ca;Z[10]=ha;Z[11]=
0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function T(Z,ha){const Ca=Math.sin(ha);ha=Math.cos(ha);Z[0]=ha;Z[1]=0;Z[2]=-Ca;Z[3]=0;Z[4]=0;Z[5]=1;Z[6]=0;Z[7]=0;Z[8]=Ca;Z[9]=0;Z[10]=ha;Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function F(Z,ha){const Ca=Math.sin(ha);ha=Math.cos(ha);Z[0]=ha;Z[1]=Ca;Z[2]=0;Z[3]=0;Z[4]=-Ca;Z[5]=ha;Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[10]=1;Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function K(Z,ha,Ca){var Da=ha[0],Ja=ha[1],Fa=ha[2],fa=ha[3],wa=Da+Da,ia=Ja+Ja;const ra=
Fa+Fa;ha=Da*wa;const xa=Da*ia;Da*=ra;const ya=Ja*ia;Ja*=ra;Fa*=ra;wa*=fa;ia*=fa;fa*=ra;Z[0]=1-(ya+Fa);Z[1]=xa+fa;Z[2]=Da-ia;Z[3]=0;Z[4]=xa-fa;Z[5]=1-(ha+Fa);Z[6]=Ja+wa;Z[7]=0;Z[8]=Da+ia;Z[9]=Ja-wa;Z[10]=1-(ha+ya);Z[11]=0;Z[12]=Ca[0];Z[13]=Ca[1];Z[14]=Ca[2];Z[15]=1;return Z}function J(Z,ha){const Ca=Oa,Da=-ha[0],Ja=-ha[1],Fa=-ha[2],fa=ha[3],wa=ha[4],ia=ha[5],ra=ha[6],xa=ha[7],ya=Da*Da+Ja*Ja+Fa*Fa+fa*fa;0<ya?(Ca[0]=2*(wa*fa+xa*Da+ia*Fa-ra*Ja)/ya,Ca[1]=2*(ia*fa+xa*Ja+ra*Da-wa*Fa)/ya,Ca[2]=2*(ra*fa+xa*
Fa+wa*Ja-ia*Da)/ya):(Ca[0]=2*(wa*fa+xa*Da+ia*Fa-ra*Ja),Ca[1]=2*(ia*fa+xa*Ja+ra*Da-wa*Fa),Ca[2]=2*(ra*fa+xa*Fa+wa*Ja-ia*Da));K(Z,ha,Ca);return Z}function L(Z,ha){Z[0]=ha[12];Z[1]=ha[13];Z[2]=ha[14];return Z}function Y(Z,ha){const Ca=ha[0],Da=ha[1],Ja=ha[2],Fa=ha[4],fa=ha[5],wa=ha[6],ia=ha[8],ra=ha[9];ha=ha[10];Z[0]=Math.sqrt(Ca*Ca+Da*Da+Ja*Ja);Z[1]=Math.sqrt(Fa*Fa+fa*fa+wa*wa);Z[2]=Math.sqrt(ia*ia+ra*ra+ha*ha);return Z}function W(Z,ha){const Ca=ha[0]+ha[5]+ha[10];let Da=0;0<Ca?(Da=2*Math.sqrt(Ca+1),
Z[3]=.25*Da,Z[0]=(ha[6]-ha[9])/Da,Z[1]=(ha[8]-ha[2])/Da,Z[2]=(ha[1]-ha[4])/Da):ha[0]>ha[5]&&ha[0]>ha[10]?(Da=2*Math.sqrt(1+ha[0]-ha[5]-ha[10]),Z[3]=(ha[6]-ha[9])/Da,Z[0]=.25*Da,Z[1]=(ha[1]+ha[4])/Da,Z[2]=(ha[8]+ha[2])/Da):ha[5]>ha[10]?(Da=2*Math.sqrt(1+ha[5]-ha[0]-ha[10]),Z[3]=(ha[8]-ha[2])/Da,Z[0]=(ha[1]+ha[4])/Da,Z[1]=.25*Da,Z[2]=(ha[6]+ha[9])/Da):(Da=2*Math.sqrt(1+ha[10]-ha[0]-ha[5]),Z[3]=(ha[1]-ha[4])/Da,Z[0]=(ha[8]+ha[2])/Da,Z[1]=(ha[6]+ha[9])/Da,Z[2]=.25*Da);return Z}function aa(Z,ha,Ca,Da){var Ja=
ha[0],Fa=ha[1],fa=ha[2],wa=ha[3],ia=Ja+Ja,ra=Fa+Fa,xa=fa+fa;ha=Ja*ia;const ya=Ja*ra;Ja*=xa;const Ka=Fa*ra;Fa*=xa;fa*=xa;ia*=wa;ra*=wa;wa*=xa;xa=Da[0];const Ha=Da[1];Da=Da[2];Z[0]=(1-(Ka+fa))*xa;Z[1]=(ya+wa)*xa;Z[2]=(Ja-ra)*xa;Z[3]=0;Z[4]=(ya-wa)*Ha;Z[5]=(1-(ha+fa))*Ha;Z[6]=(Fa+ia)*Ha;Z[7]=0;Z[8]=(Ja+ra)*Da;Z[9]=(Fa-ia)*Da;Z[10]=(1-(ha+Ka))*Da;Z[11]=0;Z[12]=Ca[0];Z[13]=Ca[1];Z[14]=Ca[2];Z[15]=1;return Z}function oa(Z,ha,Ca,Da,Ja){var Fa=ha[0],fa=ha[1],wa=ha[2],ia=ha[3],ra=Fa+Fa,xa=fa+fa,ya=wa+wa;ha=
Fa*ra;var Ka=Fa*xa,Ha=Fa*ya;Fa=fa*xa;fa*=ya;var La=wa*ya;wa=ia*ra;xa*=ia;const Ia=ia*ya;var f=Da[0],R=Da[1];ya=Da[2];Da=Ja[0];ia=Ja[1];Ja=Ja[2];ra=(1-(Fa+La))*f;const l=(Ka+Ia)*f;f*=Ha-xa;Ka=(Ka-Ia)*R;La=(1-(ha+La))*R;R*=fa+wa;Ha=(Ha+xa)*ya;fa=(fa-wa)*ya;ha=(1-(ha+Fa))*ya;Z[0]=ra;Z[1]=l;Z[2]=f;Z[3]=0;Z[4]=Ka;Z[5]=La;Z[6]=R;Z[7]=0;Z[8]=Ha;Z[9]=fa;Z[10]=ha;Z[11]=0;Z[12]=Ca[0]+Da-(ra*Da+Ka*ia+Ha*Ja);Z[13]=Ca[1]+ia-(l*Da+La*ia+fa*Ja);Z[14]=Ca[2]+Ja-(f*Da+R*ia+ha*Ja);Z[15]=1;return Z}function ta(Z,ha){var Ca=
ha[0],Da=ha[1],Ja=ha[2];ha=ha[3];var Fa=Ca+Ca,fa=Da+Da;const wa=Ja+Ja;Ca*=Fa;const ia=Da*Fa;Da*=fa;const ra=Ja*Fa,xa=Ja*fa;Ja*=wa;Fa*=ha;fa*=ha;ha*=wa;Z[0]=1-Da-Ja;Z[1]=ia+ha;Z[2]=ra-fa;Z[3]=0;Z[4]=ia-ha;Z[5]=1-Ca-Ja;Z[6]=xa+Fa;Z[7]=0;Z[8]=ra+fa;Z[9]=xa-Fa;Z[10]=1-Ca-Da;Z[11]=0;Z[12]=0;Z[13]=0;Z[14]=0;Z[15]=1;return Z}function la(Z,ha,Ca,Da,Ja,Fa,fa){const wa=1/(Ca-ha),ia=1/(Ja-Da),ra=1/(Fa-fa);Z[0]=2*Fa*wa;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=2*Fa*ia;Z[6]=0;Z[7]=0;Z[8]=(Ca+ha)*wa;Z[9]=(Ja+Da)*ia;Z[10]=
(fa+Fa)*ra;Z[11]=-1;Z[12]=0;Z[13]=0;Z[14]=fa*Fa*2*ra;Z[15]=0;return Z}function X(Z,ha,Ca,Da,Ja){ha=1/Math.tan(ha/2);let Fa=void 0;Z[0]=ha/Ca;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=ha;Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[11]=-1;Z[12]=0;Z[13]=0;Z[15]=0;null!=Ja&&Infinity!==Ja?(Fa=1/(Da-Ja),Z[10]=(Ja+Da)*Fa,Z[14]=2*Ja*Da*Fa):(Z[10]=-1,Z[14]=-2*Da);return Z}function U(Z,ha,Ca,Da){const Ja=Math.tan(ha.upDegrees*Math.PI/180),Fa=Math.tan(ha.downDegrees*Math.PI/180),fa=Math.tan(ha.leftDegrees*Math.PI/180);ha=Math.tan(ha.rightDegrees*
Math.PI/180);const wa=2/(fa+ha),ia=2/(Ja+Fa);Z[0]=wa;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=ia;Z[6]=0;Z[7]=0;Z[8]=-((fa-ha)*wa*.5);Z[9]=(Ja-Fa)*ia*.5;Z[10]=Da/(Ca-Da);Z[11]=-1;Z[12]=0;Z[13]=0;Z[14]=Da*Ca/(Ca-Da);Z[15]=0;return Z}function ka(Z,ha,Ca,Da,Ja,Fa,fa){const wa=1/(ha-Ca),ia=1/(Da-Ja),ra=1/(Fa-fa);Z[0]=-2*wa;Z[1]=0;Z[2]=0;Z[3]=0;Z[4]=0;Z[5]=-2*ia;Z[6]=0;Z[7]=0;Z[8]=0;Z[9]=0;Z[10]=2*ra;Z[11]=0;Z[12]=(ha+Ca)*wa;Z[13]=(Ja+Da)*ia;Z[14]=(fa+Fa)*ra;Z[15]=1;return Z}function sa(Z,ha,Ca,Da){let Ja=void 0,
Fa=void 0;var fa=void 0,wa=void 0;let ia=void 0,ra=void 0;var xa=void 0,ya=void 0;let Ka=void 0,Ha=void 0;const La=ha[0],Ia=ha[1];ha=ha[2];fa=Da[0];wa=Da[1];Da=Da[2];xa=Ca[0];ya=Ca[1];Ca=Ca[2];if(Math.abs(La-xa)<w.EPSILON&&Math.abs(Ia-ya)<w.EPSILON&&Math.abs(ha-Ca)<w.EPSILON)return t(Z);xa=La-xa;ya=Ia-ya;Ka=ha-Ca;Ha=1/Math.sqrt(xa*xa+ya*ya+Ka*Ka);xa*=Ha;ya*=Ha;Ka*=Ha;Ja=wa*Ka-Da*ya;Fa=Da*xa-fa*Ka;fa=fa*ya-wa*xa;(Ha=Math.sqrt(Ja*Ja+Fa*Fa+fa*fa))?(Ha=1/Ha,Ja*=Ha,Fa*=Ha,fa*=Ha):fa=Fa=Ja=0;wa=ya*fa-Ka*
Fa;ia=Ka*Ja-xa*fa;ra=xa*Fa-ya*Ja;(Ha=Math.sqrt(wa*wa+ia*ia+ra*ra))?(Ha=1/Ha,wa*=Ha,ia*=Ha,ra*=Ha):ra=ia=wa=0;Z[0]=Ja;Z[1]=wa;Z[2]=xa;Z[3]=0;Z[4]=Fa;Z[5]=ia;Z[6]=ya;Z[7]=0;Z[8]=fa;Z[9]=ra;Z[10]=Ka;Z[11]=0;Z[12]=-(Ja*La+Fa*Ia+fa*ha);Z[13]=-(wa*La+ia*Ia+ra*ha);Z[14]=-(xa*La+ya*Ia+Ka*ha);Z[15]=1;return Z}function qa(Z,ha,Ca,Da){const Ja=ha[0],Fa=ha[1];ha=ha[2];var fa=Da[0];const wa=Da[1];var ia=Da[2];Da=Ja-Ca[0];let ra=Fa-Ca[1];Ca=ha-Ca[2];let xa=Da*Da+ra*ra+Ca*Ca;0<xa&&(xa=1/Math.sqrt(xa),Da*=xa,ra*=
xa,Ca*=xa);let ya=wa*Ca-ia*ra;ia=ia*Da-fa*Ca;fa=fa*ra-wa*Da;xa=ya*ya+ia*ia+fa*fa;0<xa&&(xa=1/Math.sqrt(xa),ya*=xa,ia*=xa,fa*=xa);Z[0]=ya;Z[1]=ia;Z[2]=fa;Z[3]=0;Z[4]=ra*fa-Ca*ia;Z[5]=Ca*ya-Da*fa;Z[6]=Da*ia-ra*ya;Z[7]=0;Z[8]=Da;Z[9]=ra;Z[10]=Ca;Z[11]=0;Z[12]=Ja;Z[13]=Fa;Z[14]=ha;Z[15]=1;return Z}function na(Z){return"mat4("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+", "+Z[9]+", "+Z[10]+", "+Z[11]+", "+Z[12]+", "+Z[13]+", "+Z[14]+", "+Z[15]+")"}function pa(Z){return Math.sqrt(Math.pow(Z[0],
2)+Math.pow(Z[1],2)+Math.pow(Z[2],2)+Math.pow(Z[3],2)+Math.pow(Z[4],2)+Math.pow(Z[5],2)+Math.pow(Z[6],2)+Math.pow(Z[7],2)+Math.pow(Z[8],2)+Math.pow(Z[9],2)+Math.pow(Z[10],2)+Math.pow(Z[11],2)+Math.pow(Z[12],2)+Math.pow(Z[13],2)+Math.pow(Z[14],2)+Math.pow(Z[15],2))}function va(Z,ha,Ca){Z[0]=ha[0]+Ca[0];Z[1]=ha[1]+Ca[1];Z[2]=ha[2]+Ca[2];Z[3]=ha[3]+Ca[3];Z[4]=ha[4]+Ca[4];Z[5]=ha[5]+Ca[5];Z[6]=ha[6]+Ca[6];Z[7]=ha[7]+Ca[7];Z[8]=ha[8]+Ca[8];Z[9]=ha[9]+Ca[9];Z[10]=ha[10]+Ca[10];Z[11]=ha[11]+Ca[11];Z[12]=
ha[12]+Ca[12];Z[13]=ha[13]+Ca[13];Z[14]=ha[14]+Ca[14];Z[15]=ha[15]+Ca[15];return Z}function ja(Z,ha,Ca){Z[0]=ha[0]-Ca[0];Z[1]=ha[1]-Ca[1];Z[2]=ha[2]-Ca[2];Z[3]=ha[3]-Ca[3];Z[4]=ha[4]-Ca[4];Z[5]=ha[5]-Ca[5];Z[6]=ha[6]-Ca[6];Z[7]=ha[7]-Ca[7];Z[8]=ha[8]-Ca[8];Z[9]=ha[9]-Ca[9];Z[10]=ha[10]-Ca[10];Z[11]=ha[11]-Ca[11];Z[12]=ha[12]-Ca[12];Z[13]=ha[13]-Ca[13];Z[14]=ha[14]-Ca[14];Z[15]=ha[15]-Ca[15];return Z}function ua(Z,ha,Ca){Z[0]=ha[0]*Ca;Z[1]=ha[1]*Ca;Z[2]=ha[2]*Ca;Z[3]=ha[3]*Ca;Z[4]=ha[4]*Ca;Z[5]=ha[5]*
Ca;Z[6]=ha[6]*Ca;Z[7]=ha[7]*Ca;Z[8]=ha[8]*Ca;Z[9]=ha[9]*Ca;Z[10]=ha[10]*Ca;Z[11]=ha[11]*Ca;Z[12]=ha[12]*Ca;Z[13]=ha[13]*Ca;Z[14]=ha[14]*Ca;Z[15]=ha[15]*Ca;return Z}function Aa(Z,ha,Ca,Da){Z[0]=ha[0]+Ca[0]*Da;Z[1]=ha[1]+Ca[1]*Da;Z[2]=ha[2]+Ca[2]*Da;Z[3]=ha[3]+Ca[3]*Da;Z[4]=ha[4]+Ca[4]*Da;Z[5]=ha[5]+Ca[5]*Da;Z[6]=ha[6]+Ca[6]*Da;Z[7]=ha[7]+Ca[7]*Da;Z[8]=ha[8]+Ca[8]*Da;Z[9]=ha[9]+Ca[9]*Da;Z[10]=ha[10]+Ca[10]*Da;Z[11]=ha[11]+Ca[11]*Da;Z[12]=ha[12]+Ca[12]*Da;Z[13]=ha[13]+Ca[13]*Da;Z[14]=ha[14]+Ca[14]*Da;
Z[15]=ha[15]+Ca[15]*Da;return Z}function Ga(Z,ha){return Z[0]===ha[0]&&Z[1]===ha[1]&&Z[2]===ha[2]&&Z[3]===ha[3]&&Z[4]===ha[4]&&Z[5]===ha[5]&&Z[6]===ha[6]&&Z[7]===ha[7]&&Z[8]===ha[8]&&Z[9]===ha[9]&&Z[10]===ha[10]&&Z[11]===ha[11]&&Z[12]===ha[12]&&Z[13]===ha[13]&&Z[14]===ha[14]&&Z[15]===ha[15]}function Na(Z,ha){const Ca=Z[0],Da=Z[1],Ja=Z[2],Fa=Z[3],fa=Z[4],wa=Z[5],ia=Z[6],ra=Z[7],xa=Z[8],ya=Z[9],Ka=Z[10],Ha=Z[11],La=Z[12],Ia=Z[13],f=Z[14];Z=Z[15];const R=ha[0],l=ha[1],c=ha[2],a=ha[3],b=ha[4],d=ha[5],
e=ha[6],g=ha[7],h=ha[8],k=ha[9],m=ha[10],n=ha[11],p=ha[12],x=ha[13],Q=ha[14];ha=ha[15];return Math.abs(Ca-R)<=w.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(R))&&Math.abs(Da-l)<=w.EPSILON*Math.max(1,Math.abs(Da),Math.abs(l))&&Math.abs(Ja-c)<=w.EPSILON*Math.max(1,Math.abs(Ja),Math.abs(c))&&Math.abs(Fa-a)<=w.EPSILON*Math.max(1,Math.abs(Fa),Math.abs(a))&&Math.abs(fa-b)<=w.EPSILON*Math.max(1,Math.abs(fa),Math.abs(b))&&Math.abs(wa-d)<=w.EPSILON*Math.max(1,Math.abs(wa),Math.abs(d))&&Math.abs(ia-e)<=w.EPSILON*
Math.max(1,Math.abs(ia),Math.abs(e))&&Math.abs(ra-g)<=w.EPSILON*Math.max(1,Math.abs(ra),Math.abs(g))&&Math.abs(xa-h)<=w.EPSILON*Math.max(1,Math.abs(xa),Math.abs(h))&&Math.abs(ya-k)<=w.EPSILON*Math.max(1,Math.abs(ya),Math.abs(k))&&Math.abs(Ka-m)<=w.EPSILON*Math.max(1,Math.abs(Ka),Math.abs(m))&&Math.abs(Ha-n)<=w.EPSILON*Math.max(1,Math.abs(Ha),Math.abs(n))&&Math.abs(La-p)<=w.EPSILON*Math.max(1,Math.abs(La),Math.abs(p))&&Math.abs(Ia-x)<=w.EPSILON*Math.max(1,Math.abs(Ia),Math.abs(x))&&Math.abs(f-Q)<=
w.EPSILON*Math.max(1,Math.abs(f),Math.abs(Q))&&Math.abs(Z-ha)<=w.EPSILON*Math.max(1,Math.abs(Z),Math.abs(ha))}const Oa=A.create();A=Object.freeze({__proto__:null,copy:S,set:I,identity:t,transpose:H,invert:v,adjoint:G,determinant:y,multiply:u,translate:D,scale:B,rotate:M,rotateX:N,rotateY:z,rotateZ:E,fromTranslation:r,fromScaling:C,fromRotation:O,fromXRotation:P,fromYRotation:T,fromZRotation:F,fromRotationTranslation:K,fromQuat2:J,getTranslation:L,getScaling:Y,getRotation:W,fromRotationTranslationScale:aa,
fromRotationTranslationScaleOrigin:oa,fromQuat:ta,frustum:la,perspective:X,perspectiveFromFieldOfView:U,ortho:ka,lookAt:sa,targetTo:qa,str:na,frob:pa,add:va,subtract:ja,multiplyScalar:ua,multiplyScalarAndAdd:Aa,exactEquals:Ga,equals:Na,mul:u,sub:ja});q.add=va;q.adjoint=G;q.copy=S;q.determinant=y;q.equals=Na;q.exactEquals=Ga;q.frob=pa;q.fromQuat=ta;q.fromQuat2=J;q.fromRotation=O;q.fromRotationTranslation=K;q.fromRotationTranslationScale=aa;q.fromRotationTranslationScaleOrigin=oa;q.fromScaling=C;q.fromTranslation=
r;q.fromXRotation=P;q.fromYRotation=T;q.fromZRotation=F;q.frustum=la;q.getRotation=W;q.getScaling=Y;q.getTranslation=L;q.identity=t;q.invert=v;q.lookAt=sa;q.mat4=A;q.mul=u;q.multiply=u;q.multiplyScalar=ua;q.multiplyScalarAndAdd=Aa;q.ortho=ka;q.perspective=X;q.perspectiveFromFieldOfView=U;q.rotate=M;q.rotateX=N;q.rotateY=z;q.rotateZ=E;q.scale=B;q.set=I;q.str=na;q.sub=ja;q.subtract=ja;q.targetTo=qa;q.translate=D;q.transpose=H})},"esri/chunks/frustum":function(){define("exports ./vec3f64 ./vec3 ./mat4 ../core/ObjectStack ./vec4f64 ./vec4 ../views/3d/support/stack ./plane ./clipRay".split(" "),
function(q,A,w,S,I,t,H,v,G,y){function u(L){if(L){const {planes:Y,points:W}=L;return{planes:[G.create(Y[0]),G.create(Y[1]),G.create(Y[2]),G.create(Y[3]),G.create(Y[4]),G.create(Y[5])],points:[A.clone(W[0]),A.clone(W[1]),A.clone(W[2]),A.clone(W[3]),A.clone(W[4]),A.clone(W[5]),A.clone(W[6]),A.clone(W[7])]}}return{planes:[G.create(),G.create(),G.create(),G.create(),G.create(),G.create()],points:[A.create(),A.create(),A.create(),A.create(),A.create(),A.create(),A.create(),A.create()]}}function D(L,Y=
u()){return B(L.planes,L.points,Y)}function B(L,Y,W=u()){for(let aa=0;6>aa;aa++)G.copy(L[aa],W.planes[aa]);for(L=0;8>L;L++)w.copy(W.points[L],Y[L]);return W}function M(L,Y,W=u()){const {points:aa}=W;L=S.multiply(v.sm4d.get(),Y,L);S.invert(L,L);for(Y=0;8>Y;++Y){const oa=H.transformMat4(v.sv4d.get(),K[Y],L);w.set(aa[Y],oa[0]/oa[3],oa[1]/oa[3],oa[2]/oa[3])}N(W);return W}function N(L){const {planes:Y,points:W}=L;G.fromPoints(W[4],W[0],W[3],Y[0]);G.fromPoints(W[1],W[5],W[6],Y[1]);G.fromPoints(W[4],W[5],
W[1],Y[2]);G.fromPoints(W[3],W[2],W[6],Y[3]);G.fromPoints(W[0],W[1],W[2],Y[4]);G.fromPoints(W[5],W[4],W[7],Y[5])}function z(L,Y){for(let W=0;6>W;W++)if(G.isSphereFullyInside(L[W],Y))return!1;return!0}function E(L,Y){return T(L,y.fromRay(Y,J.get()))}function r(L,Y){for(let W=0;6>W;W++)if(!G.clipInfinite(L[W],Y))return!1;return!0}function C(L,Y,W){return T(L,y.fromLineSegmentAndDirection(Y,W,J.get()))}function O(L,Y){for(let W=0;6>W;W++)if(0<G.signedDistance(L[W],Y))return!1;return!0}function P(L,Y){for(let W=
0;6>W;W++)if(G.isAABBFullyInside(L[W],Y))return!1;return!0}function T(L,Y){for(let W=0;6>W;W++)if(!G.clip(L[W],Y))return!1;return!0}const F={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},K=[t.fromValues(-1,-1,-1,1),t.fromValues(1,-1,-1,1),t.fromValues(1,1,-1,1),t.fromValues(-1,1,-1,1),t.fromValues(-1,-1,1,1),t.fromValues(1,-1,1,1),t.fromValues(1,1,1,1),t.fromValues(-1,1,1,1)],J=new I.ObjectStack(y.create);I=Object.freeze({__proto__:null,create:u,copy:D,
fromValues:B,fromMatrix:M,recomputePlanes:N,intersectsSphere:z,intersectsRay:E,intersectClipRay:r,intersectsLineSegment:C,intersectsPoint:O,intersectsAABB:P,planePointIndices:F});q.copy=D;q.create=u;q.fromMatrix=M;q.fromValues=B;q.frustumModule=I;q.intersectClipRay=r;q.intersectsAABB=P;q.intersectsLineSegment=C;q.intersectsPoint=O;q.intersectsRay=E;q.intersectsSphere=z;q.planePointIndices=F;q.recomputePlanes=N})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/maybe ../core/Logger ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/mathUtils ./mat4 ../core/ObjectStack ../views/3d/support/stack ./vector ./ray".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B){function M(na){return na?{radius:na.radius,center:t.clone(na.center)}:{radius:1,center:t.create()}}function N(na,pa){const va=U.get();va.radius=na;va.center=pa||sa;return va}function z(na,pa=M()){return E(na.radius,na.center,pa)}function E(na,pa,va=M()){H.copy(va.center,pa);va.radius=na;return va}function r(na,pa,va){na!==va&&H.copy(va.center,na.center);va.radius=na.radius+pa;return va}function C(na,pa,va){la.error("sphere.setExtent is not yet supported");return na===
va?va:z(na,va)}function O(na,pa,va){if(w.isNone(pa))return!1;var ja=H.subtract(u.sv3d.get(),pa.origin,na.center),ua=H.dot(pa.direction,pa.direction);const Aa=2*H.dot(pa.direction,ja);na=H.dot(ja,ja)-na.radius*na.radius;na=Aa*Aa-4*ua*na;if(0>na)return!1;ja=Math.sqrt(na);na=(-Aa-ja)/(2*ua);ua=(-Aa+ja)/(2*ua);if(0>na||ua<na&&0<ua)na=ua;if(0>na)return!1;va&&H.add(va,pa.origin,H.scale(u.sv3d.get(),pa.direction,na));return!0}function P(na,pa,va,ja){pa=B.fromScreenAtEye(pa,va,ka);return O(na,pa,ja)}function T(na,
pa){return O(na,pa,null)}function F(na,pa,va){if(O(na,pa,va))return va;na=K(na,pa,u.sv3d.get());H.add(va,pa.origin,H.scale(u.sv3d.get(),pa.direction,H.distance(pa.origin,na)/H.length(pa.direction)));return va}function K(na,pa,va){const ja=u.sv3d.get(),ua=u.sm4d.get();H.cross(ja,pa.origin,pa.direction);H.cross(va,ja,pa.origin);H.scale(va,va,1/H.length(va)*na.radius);na=W(na,pa.origin);pa=D.angle(pa.origin,va);G.identity(ua);G.rotate(ua,ua,pa+na,ja);H.transformMat4(va,va,ua);return va}function J(na,
pa,va){if(O(na,pa,va))return va;B.closestPoint(pa,na.center,va);return L(na,va,va)}function L(na,pa,va){pa=H.subtract(u.sv3d.get(),pa,na.center);pa=H.scale(u.sv3d.get(),pa,na.radius/H.length(pa));return H.add(va,pa,na.center)}function Y(na,pa){pa=H.subtract(u.sv3d.get(),pa,na.center);pa=H.squaredLength(pa);return Math.sqrt(Math.abs(pa-na.radius*na.radius))}function W(na,pa){pa=H.subtract(u.sv3d.get(),pa,na.center);pa=H.length(pa);return I.acosClamped(na.radius/(na.radius+Math.abs(na.radius-pa)))}
function aa(na,pa,va,ja){na=H.subtract(X,pa,na.center);switch(va){case 0:return va=v.cartesianToSpherical(na,X)[2],H.set(ja,-Math.sin(va),Math.cos(va),0);case 1:return na=v.cartesianToSpherical(na,X),va=na[1],na=na[2],pa=Math.sin(va),H.set(ja,-pa*Math.cos(na),-pa*Math.sin(na),Math.cos(va));case 2:return H.normalize(ja,na)}}function oa(na,pa){pa=H.subtract(qa,pa,na.center);return H.length(pa)-na.radius}function ta(na,pa,va,ja){const ua=oa(na,pa);na=aa(na,pa,2,qa);va=H.scale(qa,na,va-ua);H.add(ja,pa,
va);return ja}const la=S.getLogger("esri.views.3d.support.geometryUtils.sphere"),X=t.create(),U=new y.ObjectStack(()=>({center:null,radius:0})),ka=B.create(),sa=t.create(),qa=t.create();Object.freeze(sa);A=Object.freeze({__proto__:null,create:M,wrap:N,copy:z,fromValues:E,elevate:r,setExtent:C,intersectRay:O,intersectScreen:P,intersectsRay:T,intersectRayClosestSilhouette:F,closestPointOnSilhouette:K,closestPoint:J,projectPoint:L,distanceToSilhouette:Y,angleToSilhouette:W,axisAt:aa,altitudeAt:oa,setAltitudeAt:ta});
q.altitudeAt=oa;q.angleToSilhouette=W;q.axisAt=aa;q.closestPoint=J;q.closestPointOnSilhouette=K;q.copy=z;q.create=M;q.distanceToSilhouette=Y;q.elevate=r;q.fromValues=E;q.intersectRay=O;q.intersectRayClosestSilhouette=F;q.intersectScreen=P;q.intersectsRay=T;q.projectPoint=L;q.setAltitudeAt=ta;q.setExtent=C;q.sphereModule=A;q.wrap=N})},"esri/chunks/triangle":function(){define("exports ./vec3f64 ./vec3 ../core/ObjectStack ./vec2 ../views/3d/support/stack ./lineSegment".split(" "),function(q,A,w,S,I,
t,H){function v(P){return P?{p0:A.clone(P.p0),p1:A.clone(P.p1),p2:A.clone(P.p2)}:{p0:A.create(),p1:A.create(),p2:A.create()}}function G(P,T,F){const K=r.get();K.p0=P;K.p1=T;K.p2=F;return K}function y(P,T=v()){return u(P.p0,P.p1,P.p2,T)}function u(P,T,F,K=v()){w.copy(K.p0,P);w.copy(K.p1,T);w.copy(K.p2,F);return K}function D(P,T){var F=P.p0,K=P.p1;P=P.p2;const J=w.subtract(t.sv3d.get(),K,F),L=w.subtract(t.sv3d.get(),P,K),Y=w.subtract(t.sv3d.get(),F,P),W=w.subtract(t.sv3d.get(),T,F);var aa=w.subtract(t.sv3d.get(),
T,K),oa=w.subtract(t.sv3d.get(),T,P);const ta=w.cross(J,J,Y),la=w.dot(w.cross(t.sv3d.get(),J,ta),W);aa=w.dot(w.cross(t.sv3d.get(),L,ta),aa);oa=w.dot(w.cross(t.sv3d.get(),Y,ta),oa);if(0<la&&0<aa&&0<oa)return T=w.dot(ta,W),T*T/w.dot(ta,ta);F=H.distance2(H.fromValues(F,J,E.get()),T);K=H.distance2(H.fromValues(K,L,E.get()),T);T=H.distance2(H.fromValues(P,Y,E.get()),T);return Math.min(F,K,T)}function B(P,T,F){const {direction:K,origin:J}=T,{p0:L,p1:Y,p2:W}=P;var aa=Y[0]-L[0],oa=Y[1]-L[1],ta=Y[2]-L[2];
P=W[0]-L[0];T=W[1]-L[1];const la=W[2]-L[2];var X=K[1]*la-T*K[2],U=K[2]*P-la*K[0];const ka=K[0]*T-P*K[1];var sa=aa*X+oa*U+ta*ka;if(-1E-5<sa&&1E-5>sa)return!1;sa=1/sa;const qa=J[0]-L[0],na=J[1]-L[1],pa=J[2]-L[2];X=sa*(qa*X+na*U+pa*ka);if(0>X||1<X)return!1;U=na*ta-oa*pa;ta=pa*aa-ta*qa;aa=qa*oa-aa*na;oa=sa*(K[0]*U+K[1]*ta+K[2]*aa);if(0>oa||1<X+oa)return!1;F&&(w.scale(F,K,sa*(P*U+T*ta+la*aa)),w.add(F,J,F));return!0}function M(P,T,F){var K=I.distance(P,T);T=I.distance(T,F);P=I.distance(F,P);F=(K+T+P)/2;
K=F*(F-K)*(F-T)*(F-P);return 0>=K?0:Math.sqrt(K)}function N(P){return M(P.p0,P.p1,P.p2)}function z(P,T,F){w.subtract(C,T,P);w.subtract(O,F,P);return w.length(w.cross(C,C,O))/2}const E=new S.ObjectStack(H.create),r=new S.ObjectStack(()=>({p0:null,p1:null,p2:null})),C=A.create(),O=A.create();S=Object.freeze({__proto__:null,create:v,wrap:G,copy:y,fromValues:u,distance2:D,intersectRay:B,areaPoints2d:M,area2d:N,areaPoints3d:z});q.area2d=N;q.areaPoints2d=M;q.areaPoints3d=z;q.copy=y;q.create=v;q.distance2=
D;q.fromValues=u;q.intersectRay=B;q.triangleModule=S;q.wrap=G})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../support/geometryUtils ./BufferVectorMath ./Util ./GeometryData".split(" "),function(q,A,w,S,I,t,H){const v=I.Vec3Compact;var G;(function(M){const N=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],z=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,
0,-1],E=[0,0,1,0,1,1,0,1],r=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],C=Array(36);for(var O=0;6>O;O++)for(let T=0;6>T;T++)C[6*O+T]=O;const P=Array(36);for(O=0;6>O;O++)P[6*O]=0,P[6*O+1]=1,P[6*O+2]=2,P[6*O+3]=2,P[6*O+4]=3,P[6*O+5]=0;M.createGeometry=function(T){Array.isArray(T)||(T=[T,T,T]);const F=new Float32Array(24);for(var K=0;8>K;K++)F[3*K]=N[K][0]*T[0],F[3*K+1]=N[K][1]*T[1],F[3*K+2]=N[K][2]*T[2];T={};T[t.VertexAttrConstants.POSITION]=new Uint32Array(r);T[t.VertexAttrConstants.NORMAL]=
new Uint32Array(C);T[t.VertexAttrConstants.UV0]=new Uint32Array(P);K={};K[t.VertexAttrConstants.POSITION]={size:3,data:F};K[t.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(z)};K[t.VertexAttrConstants.UV0]={size:2,data:new Float32Array(E)};return new H.GeometryData(K,T)}})(G||(G={}));var y;(function(M){const N=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],z=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],E=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],r=
[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];M.createGeometry=function(C){Array.isArray(C)||(C=[C,C,C]);const O=new Float32Array(18);for(var P=0;6>P;P++)O[3*P]=N[P][0]*C[0],O[3*P+1]=N[P][1]*C[1],O[3*P+2]=N[P][2]*C[2];C={};C[t.VertexAttrConstants.POSITION]=new Uint32Array(E);C[t.VertexAttrConstants.NORMAL]=new Uint32Array(r);P={};P[t.VertexAttrConstants.POSITION]={size:3,data:O};P[t.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(z)};return new H.GeometryData(P,C)}})(y||(y={}));var u;
(function(M){const N=w.fromValues(-.5,0,-.5),z=w.fromValues(.5,0,-.5),E=w.fromValues(0,0,.5),r=w.fromValues(0,.5,0),C=w.create(),O=w.create(),P=w.create(),T=w.create(),F=w.create();A.subtract(C,N,r);A.subtract(O,N,z);A.cross(P,C,O);A.normalize(P,P);A.subtract(C,z,r);A.subtract(O,z,E);A.cross(T,C,O);A.normalize(T,T);A.subtract(C,E,r);A.subtract(O,E,N);A.cross(F,C,O);A.normalize(F,F);const K=[N,z,E,r],J=[0,-1,0,P[0],P[1],P[2],T[0],T[1],T[2],F[0],F[1],F[2]],L=[0,1,2,3,1,0,3,2,1,3,0,2],Y=[0,0,0,1,1,1,
2,2,2,3,3,3];M.createGeometry=function(W){Array.isArray(W)||(W=[W,W,W]);const aa=new Float32Array(12);for(var oa=0;4>oa;oa++)aa[3*oa]=K[oa][0]*W[0],aa[3*oa+1]=K[oa][1]*W[1],aa[3*oa+2]=K[oa][2]*W[2];W={};W[t.VertexAttrConstants.POSITION]=new Uint32Array(L);W[t.VertexAttrConstants.NORMAL]=new Uint32Array(Y);oa={};oa[t.VertexAttrConstants.POSITION]={size:3,data:aa};oa[t.VertexAttrConstants.NORMAL]={size:3,data:new Float32Array(J)};return new H.GeometryData(oa,W)}})(u||(u={}));var D;(function(M){function N(r,
C,O,P,T){if(Math.abs(A.dot(C,r))>T)return!1;A.cross(O,r,C);A.normalize(O,O);A.cross(P,O,r);A.normalize(P,P);return!0}function z(r,C,O,P,T,F,K){return N(r,C,T,F,K)||N(r,O,T,F,K)||N(r,P,T,F,K)}M.createBoxGeometry=G.createGeometry;M.createDiamondGeometry=y.createGeometry;M.createTetrahedronGeometry=u.createGeometry;M.createSphereGeometry=function(r,C,O,P){const {phiStart:T=-Math.PI,phiLength:F=2*Math.PI,thetaStart:K=-Math.PI/2,thetaLength:J=Math.PI}=P||{},{position:L=t.VertexAttrConstants.POSITION,normal:Y=
t.VertexAttrConstants.NORMAL,uv:W=t.VertexAttrConstants.UV0}=(null==P?void 0:P.attributes)||{};P=Math.max(3,Math.floor(C));var aa=Math.max(2,Math.floor(O)),oa=(P+1)*(aa+1);O=new Float32Array(3*oa);C=new Float32Array(3*oa);oa=new Float32Array(2*oa);const ta=[];let la=0;for(var X=0;X<=aa;X++){var U=[],ka=X/aa,sa=K+ka*J,qa=Math.cos(sa);for(var na=0;na<=P;na++){const va=na/P;var pa=T+va*F;const ja=Math.cos(pa)*qa,ua=Math.sin(sa);pa=-Math.sin(pa)*qa;O[3*la]=ja*r;O[3*la+1]=ua*r;O[3*la+2]=pa*r;C[3*la]=ja;
C[3*la+1]=ua;C[3*la+2]=pa;oa[2*la]=va;oa[2*la+1]=ka;U.push(la);++la}ta.push(U)}r=new Uint32Array(2*P*(aa-1)*3);la=0;for(X=0;X<aa;X++)for(U=0;U<P;U++)ka=ta[X][U],sa=ta[X][U+1],qa=ta[X+1][U+1],na=ta[X+1][U],0===X?(r[la++]=ka,r[la++]=qa,r[la++]=na):X===aa-1?(r[la++]=ka,r[la++]=sa,r[la++]=qa):(r[la++]=ka,r[la++]=sa,r[la++]=qa,r[la++]=qa,r[la++]=na,r[la++]=ka);P={};P[L]=r;P[Y]=r;aa={};aa[L]={size:3,data:O};aa[Y]={size:3,data:C};W&&(aa[W]={size:2,data:oa},P[W]=r);return new H.GeometryData(aa,P)};M.createPolySphereGeometry=
function(r,C,O){function P(J,L){J>L&&([J,L]=[L,J]);const Y=J.toString()+"."+L.toString();if(K[Y])return K[Y];let W=T.length;T.length+=3;v.add(T,3*J,T,3*L,T,W);v.scale(T,W,r/v.length(T,W));W/=3;return K[Y]=W}let T;O?(T=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],O=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1])):(O=r*(1+Math.sqrt(5))/2,T=[-r,O,0,r,O,0,-r,-O,0,r,-O,0,0,-r,O,0,r,O,0,-r,-O,0,r,-O,O,0,-r,O,0,r,-O,0,-r,-O,0,r],O=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,
11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]));for(var F=0;F<T.length;F+=3)v.scale(T,F,r/v.length(T,F));let K={};for(F=0;F<C;F++){const J=O.length,L=new Uint32Array(4*J);for(let Y=0;Y<J;Y+=3){const W=O[Y],aa=O[Y+1],oa=O[Y+2],ta=P(W,aa),la=P(aa,oa),X=P(oa,W),U=4*Y;L[U]=W;L[U+1]=ta;L[U+2]=X;L[U+3]=aa;L[U+4]=la;L[U+5]=ta;L[U+6]=oa;L[U+7]=X;L[U+8]=la;L[U+9]=ta;L[U+10]=la;L[U+11]=X}O=L;K={}}C=new Float32Array(T);for(F=0;F<C.length;F+=3)v.normalize(C,F);F={};
F[t.VertexAttrConstants.POSITION]=O;F[t.VertexAttrConstants.NORMAL]=O;O={};O[t.VertexAttrConstants.POSITION]={size:3,data:new Float32Array(T)};O[t.VertexAttrConstants.NORMAL]={size:3,data:C};return new H.GeometryData(O,F)};M.createPointGeometry=function(r,C,O,P,T,F,K,J){C=C?new Float64Array([C[0],C[1],C[2]]):new Float32Array([0,0,0]);r=r?new Float32Array([r[0],r[1],r[2]]):new Float32Array([0,0,1]);F=F?new Float32Array(F):new Float32Array([0,0]);O=O?new Uint8Array([255*O[0],255*O[1],255*O[2],3<O.length?
255*O[3]:255]):new Uint8Array([255,255,255,255]);const L=null!=P&&2===P.length?new Float32Array(P):new Float32Array([1,1]);P={};P[t.VertexAttrConstants.POSITION]={size:3,data:C};P[t.VertexAttrConstants.NORMAL]={size:3,data:r};P[t.VertexAttrConstants.UV0]={size:F.length,data:F};P[t.VertexAttrConstants.COLOR]={size:4,data:O};P[t.VertexAttrConstants.SIZE]={size:2,data:L};null!=T&&(T=new Float32Array([T[0],T[1],T[2],T[3]]),P[t.VertexAttrConstants.AUXPOS1]={size:4,data:T});null!=K&&(K=new Float32Array([K[0],
K[1],K[2],K[3]]),P[t.VertexAttrConstants.AUXPOS2]={size:4,data:K});return null!=J?(J.initialize(P,H.GeometryData.DefaultIndices,"point"),J):new H.GeometryData(P,H.GeometryData.DefaultIndices,"point")};M.updatePointGeometry=function(r,C,O,P,T,F,K,J){const L=J.vertexAttributes;if(null!=r){const {data:Y}=L[t.VertexAttrConstants.NORMAL];Y[0]=r[0];Y[1]=r[1];Y[2]=r[2]}null!=C&&({data:r}=L[t.VertexAttrConstants.POSITION],r[0]=C[0],r[1]=C[1],r[2]=C[2]);null!=O&&({data:C}=L[t.VertexAttrConstants.COLOR],C[0]=
O[0],C[1]=O[1],C[2]=O[2],C[3]=O[3]);null!=P&&({data:O}=L[t.VertexAttrConstants.SIZE],O[0]=P[0],O[1]=P[1]);null!=T&&({data:P}=L[t.VertexAttrConstants.AUXPOS1],P[0]=T[0],P[1]=T[1],P[2]=T[2],P[3]=T[3]);null!=F&&({data:T}=L[t.VertexAttrConstants.UV0],T[0]=F[0],T[1]=F[1]);null!=K&&({data:F}=L[t.VertexAttrConstants.AUXPOS2],F[0]=K[0],F[1]=K[1],F[2]=K[2],F[3]=K[3]);return J};M.createPointArrayGeometry=function(r,C){const O=new Float32Array(3*r.length),P=new Float32Array(C?3*r.length:3),T=new Uint32Array(r.length),
F=new Uint32Array(r.length);for(var K=0;K<r.length;K++)O[3*K]=r[K][0],O[3*K+1]=r[K][1],O[3*K+2]=r[K][2],C&&(P[3*K]=C[K][0],P[3*K+1]=C[K][1],P[3*K+2]=C[K][2]),T[K]=K,F[K]=0;C||(P[0]=0,P[1]=1,P[2]=0);r=new Float32Array(2);r[0]=0;r[1]=0;K={};K[t.VertexAttrConstants.POSITION]=T;K[t.VertexAttrConstants.NORMAL]=C?T:F;K[t.VertexAttrConstants.UV0]=F;C={};C[t.VertexAttrConstants.POSITION]={size:3,data:O};C[t.VertexAttrConstants.NORMAL]={size:3,data:P};C[t.VertexAttrConstants.UV0]={size:2,data:r};return new H.GeometryData(C,
K,"point")};M.createTriangleGeometry=function(){const r=new Float32Array([0,0,0,0,0,100,100,0,0]);var C=new Uint32Array([0,1,2]);const O=new Float32Array([0,1,0]),P=new Uint32Array([0,0,0]),T=new Float32Array([0,0]),F=new Uint32Array([0,0,0]),K={};K[t.VertexAttrConstants.POSITION]=C;K[t.VertexAttrConstants.NORMAL]=P;K[t.VertexAttrConstants.UV0]=F;C={};C[t.VertexAttrConstants.POSITION]={size:3,data:r};C[t.VertexAttrConstants.NORMAL]={size:3,data:O};C[t.VertexAttrConstants.UV0]={size:2,data:T};return new H.GeometryData(C,
K)};const E=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];M.createSquareGeometry=function(r=E){const C=new Float64Array(12);for(var O=0;4>O;O++)for(var P=0;3>P;P++)C[3*O+P]=r[O][P];r=new Uint32Array([0,1,2,2,3,0]);O=new Float32Array([0,0,1]);P=new Uint32Array([0,0,0,0,0,0]);const T=new Float32Array([0,0,1,0,1,1,0,1]),F=new Uint8Array([255,255,255,255]);return new H.GeometryData({[t.VertexAttrConstants.POSITION]:{size:3,data:C},[t.VertexAttrConstants.NORMAL]:{size:3,data:O},[t.VertexAttrConstants.UV0]:{size:2,
data:T},[t.VertexAttrConstants.COLOR]:{size:4,data:F}},{[t.VertexAttrConstants.POSITION]:r,[t.VertexAttrConstants.NORMAL]:P,[t.VertexAttrConstants.UV0]:r,[t.VertexAttrConstants.COLOR]:P})};M.createConeGeometry=function(r,C,O,P,T=!0,F=!0){var K=0,J=w.fromValues(0,K,0),L=w.fromValues(0,K+r,0),Y=w.fromValues(0,-1,0),W=w.fromValues(0,1,0);P&&(K=r,L=w.fromValues(0,0,0),J=w.fromValues(0,K,0),Y=w.fromValues(0,1,0),W=w.fromValues(0,-1,0));J=[L,J];Y=[Y,W];W=O+2;L=Math.sqrt(r*r+C*C);if(P)for(P=O-1;0<=P;P--){var aa=
2*Math.PI/O*P,oa=w.fromValues(Math.cos(aa)*C,K,Math.sin(aa)*C);J.push(oa);aa=w.fromValues(r*Math.cos(aa)/L,-C/L,r*Math.sin(aa)/L);Y.push(aa)}else for(P=0;P<O;P++)aa=2*Math.PI/O*P,oa=w.fromValues(Math.cos(aa)*C,K,Math.sin(aa)*C),J.push(oa),aa=w.fromValues(r*Math.cos(aa)/L,C/L,r*Math.sin(aa)/L),Y.push(aa);r=new Uint32Array(6*(O+2));O=new Uint32Array(6*(O+2));K=C=0;if(T){for(T=3;T<J.length;T++)r[C++]=1,r[C++]=T-1,r[C++]=T,O[K++]=0,O[K++]=0,O[K++]=0;r[C++]=J.length-1;r[C++]=2;r[C++]=1;O[K++]=0;O[K++]=
0;O[K++]=0}if(F){for(F=3;F<J.length;F++)r[C++]=F,r[C++]=F-1,r[C++]=0,O[K++]=F,O[K++]=F-1,O[K++]=1;r[C++]=0;r[C++]=2;r[C++]=J.length-1;O[K++]=1;O[K++]=2;O[K++]=Y.length-1}F=new Float32Array(3*W);for(T=0;T<W;T++)F[3*T]=J[T][0],F[3*T+1]=J[T][1],F[3*T+2]=J[T][2];J=new Float32Array(3*W);for(T=0;T<W;T++)J[3*T]=Y[T][0],J[3*T+1]=Y[T][1],J[3*T+2]=Y[T][2];Y={};Y[t.VertexAttrConstants.POSITION]=r;Y[t.VertexAttrConstants.NORMAL]=O;W={};W[t.VertexAttrConstants.POSITION]={size:3,data:F};W[t.VertexAttrConstants.NORMAL]=
{size:3,data:J};return new H.GeometryData(W,Y)};M.createCylinderGeometry=function(r,C,O,P,T,F){P=P?w.clone(P):w.fromValues(1,0,0);T=T?w.clone(T):w.fromValues(0,0,0);var K=void 0===F?!0:F,J=w.create();A.normalize(J,P);const L=w.create();A.scale(L,J,Math.abs(r));const Y=w.create();A.scale(Y,L,-.5);A.add(Y,Y,T);const W=w.fromValues(0,1,0);.2>Math.abs(1-A.dot(J,W))&&A.set(W,0,0,1);const aa=w.create();A.cross(aa,J,W);A.normalize(aa,aa);A.cross(W,aa,J);F=2*O+(K?2:0);const oa=O+(K?2:0);r=new Float32Array(3*
F);T=new Float32Array(3*oa);P=new Float32Array(2*F);const ta=new Uint32Array(3*O*(K?4:2)),la=new Uint32Array(3*O*(K?4:2));K&&(r[3*(F-2)]=Y[0],r[3*(F-2)+1]=Y[1],r[3*(F-2)+2]=Y[2],P[2*(F-2)]=0,P[2*(F-2)+1]=0,r[3*(F-1)]=r[3*(F-2)]+L[0],r[3*(F-1)+1]=r[3*(F-2)+1]+L[1],r[3*(F-1)+2]=r[3*(F-2)+2]+L[2],P[2*(F-1)]=1,P[2*(F-1)+1]=1,T[3*(oa-2)]=-J[0],T[3*(oa-2)+1]=-J[1],T[3*(oa-2)+2]=-J[2],T[3*(oa-1)]=J[0],T[3*(oa-1)+1]=J[1],T[3*(oa-1)+2]=J[2]);J=function(qa,na,pa){ta[qa]=na;la[qa]=pa};let X=0;const U=w.create(),
ka=w.create();for(let qa=0;qa<O;qa++){var sa=2*Math.PI/O*qa;A.scale(U,W,Math.sin(sa));A.scale(ka,aa,Math.cos(sa));A.add(U,U,ka);T[3*qa]=U[0];T[3*qa+1]=U[1];T[3*qa+2]=U[2];A.scale(U,U,C);A.add(U,U,Y);r[3*qa]=U[0];r[3*qa+1]=U[1];r[3*qa+2]=U[2];P[2*qa]=qa/O;P[2*qa+1]=0;r[3*(qa+O)]=r[3*qa]+L[0];r[3*(qa+O)+1]=r[3*qa+1]+L[1];r[3*(qa+O)+2]=r[3*qa+2]+L[2];P[2*(qa+O)]=qa/O;P[2*qa+1]=1;sa=(qa+1)%O;J(X++,qa,qa);J(X++,qa+O,qa);J(X++,sa,sa);J(X++,sa,sa);J(X++,qa+O,qa);J(X++,sa+O,sa)}if(K){for(C=0;C<O;C++)K=(C+
1)%O,J(X++,F-2,oa-2),J(X++,C,oa-2),J(X++,K,oa-2);for(C=0;C<O;C++)K=(C+1)%O,J(X++,C+O,oa-1),J(X++,F-1,oa-1),J(X++,K+O,oa-1)}O={};O[t.VertexAttrConstants.POSITION]=ta;O[t.VertexAttrConstants.NORMAL]=la;O[t.VertexAttrConstants.UV0]=ta;C={};C[t.VertexAttrConstants.POSITION]={size:3,data:r};C[t.VertexAttrConstants.NORMAL]={size:3,data:T};C[t.VertexAttrConstants.UV0]={size:2,data:P};return new H.GeometryData(C,O)};M.createTubeGeometry=function(r,C,O,P,T){O=O||10;P=null!=P?P:!0;t.assert(1<r.length);const F=
[],K=[];for(let J=0;J<O;J++){F.push([0,-J-1,-((J+1)%O)-1]);const L=J/O*2*Math.PI;K.push([Math.cos(L)*C,Math.sin(L)*C])}return M.createPathExtrusionGeometry(K,r,[[0,0,0]],F,P,T)};M.createPathExtrusionGeometry=function(r,C,O,P,T,F=w.fromValues(0,0,0)){var K=r.length;const J=new Float32Array(C.length*K*3+(6*O.length||0)),L=new Float32Array(C.length*K+(2*O.length||0)),Y=new Float32Array(C.length*K*3+(O?6:0));var W=(C.length-1)*K*6+6*P.length,aa=new Uint32Array(W);W=new Uint32Array(W);let oa=0;var ta=
0;let la=0,X=0,U=0;const ka=w.create(),sa=w.create(),qa=w.create(),na=w.create(),pa=w.create(),va=w.create(),ja=w.create(),ua=q.create(),Aa=w.create(),Ga=w.create(),Na=w.create(),Oa=w.create(),Z=w.create(),ha=S.plane.create();A.set(Aa,0,1,0);A.subtract(sa,C[1],C[0]);A.normalize(sa,sa);T?(A.add(ua,C[0],F),A.normalize(qa,ua)):A.set(qa,0,0,1);z(sa,qa,Aa,Aa,pa,qa,.99619469809);A.copy(na,qa);A.copy(Oa,pa);for(var Ca=0;Ca<O.length;Ca++)A.scale(va,pa,O[Ca][0]),A.scale(ua,qa,O[Ca][2]),A.add(va,va,ua),A.add(va,
va,C[0]),J[oa++]=va[0],J[oa++]=va[1],J[oa++]=va[2],L[la++]=0;Y[ta++]=-sa[0];Y[ta++]=-sa[1];Y[ta++]=-sa[2];for(Ca=0;Ca<P.length;Ca++)aa[X++]=0<P[Ca][0]?P[Ca][0]:-P[Ca][0]-1+O.length,aa[X++]=0<P[Ca][1]?P[Ca][1]:-P[Ca][1]-1+O.length,aa[X++]=0<P[Ca][2]?P[Ca][2]:-P[Ca][2]-1+O.length,W[U++]=0,W[U++]=0,W[U++]=0;Ca=O.length;const Da=O.length-1;for(let Fa=0;Fa<C.length;Fa++){let fa=!1;0<Fa&&(A.copy(ka,sa),Fa<C.length-1?(A.subtract(sa,C[Fa+1],C[Fa]),A.normalize(sa,sa)):fa=!0,A.add(Ga,ka,sa),A.normalize(Ga,
Ga),A.add(Na,C[Fa-1],na),S.plane.fromPositionAndNormal(C[Fa],Ga,ha),S.plane.intersectRay(ha,S.ray.wrap(Na,ka),ua)?(A.subtract(ua,ua,C[Fa]),A.normalize(qa,ua),A.cross(pa,Ga,qa),A.normalize(pa,pa)):z(Ga,na,Oa,Aa,pa,qa,.99619469809),A.copy(na,qa),A.copy(Oa,pa));T&&(A.add(ua,C[Fa],F),A.normalize(Z,ua));for(let wa=0;wa<K;wa++)if(A.scale(va,pa,r[wa][0]),A.scale(ua,qa,r[wa][1]),A.add(va,va,ua),A.normalize(ja,va),Y[ta++]=ja[0],Y[ta++]=ja[1],Y[ta++]=ja[2],T?L[la++]=A.dot(va,Z):L[la++]=va[2],A.add(va,va,C[Fa]),
J[oa++]=va[0],J[oa++]=va[1],J[oa++]=va[2],!fa){var Ja=(wa+1)%K;aa[X++]=Ca+wa;aa[X++]=Ca+K+wa;aa[X++]=Ca+Ja;aa[X++]=Ca+Ja;aa[X++]=Ca+K+wa;aa[X++]=Ca+K+Ja;for(Ja=0;6>Ja;Ja++)W[U++]=aa[X-6+Ja]-Da}Ca+=K}r=C[C.length-1];for(C=0;C<O.length;C++)A.scale(va,pa,O[C][0]),A.scale(ua,qa,O[C][1]),A.add(va,va,ua),A.add(va,va,r),J[oa++]=va[0],J[oa++]=va[1],J[oa++]=va[2],L[la++]=0;O=ta/3;Y[ta++]=sa[0];Y[ta++]=sa[1];Y[ta++]=sa[2];K=Ca-K;for(ta=0;ta<P.length;ta++)aa[X++]=0<=P[ta][0]?Ca+P[ta][0]:-P[ta][0]-1+K,aa[X++]=
0<=P[ta][2]?Ca+P[ta][2]:-P[ta][2]-1+K,aa[X++]=0<=P[ta][1]?Ca+P[ta][1]:-P[ta][1]-1+K,W[U++]=O,W[U++]=O,W[U++]=O;P={};P[t.VertexAttrConstants.POSITION]=aa;P[t.VertexAttrConstants.NORMAL]=W;aa={};aa[t.VertexAttrConstants.POSITION]={size:3,data:J};aa.zOffset={size:1,data:L};aa[t.VertexAttrConstants.NORMAL]={size:3,data:Y};return new H.GeometryData(aa,P)};M.createPolylineGeometry=function(r,C){t.assert(1<r.length,"createPolylineGeometry(): polyline needs at least 2 points");t.assert(3===r[0].length,"createPolylineGeometry(): malformed vertex");
t.assert(void 0===C||C.length===r.length,"createPolylineGeometry: need same number of points and normals");t.assert(void 0===C||3===C[0].length,"createPolylineGeometry(): malformed normal");var O=new Float64Array(3*r.length);const P=new Uint32Array(2*(r.length-1));var T=0,F=0;for(var K=0;K<r.length;K++){for(var J=0;3>J;J++)O[T++]=r[K][J];0<K&&(P[F++]=K-1,P[F++]=K)}T={};F={};T[t.VertexAttrConstants.POSITION]=P;F[t.VertexAttrConstants.POSITION]={size:3,data:O};if(C){O=new Float32Array(3*C.length);K=
0;for(J=0;J<r.length;J++)for(let L=0;3>L;L++)O[K++]=C[J][L];T[t.VertexAttrConstants.NORMAL]=P;F[t.VertexAttrConstants.NORMAL]={size:3,data:O}}return new H.GeometryData(F,T,"line")};M.createExtrudedTriangle=function(r,C,O,P){const T=new Float32Array(18);r=[[-C,0,P/2],[O,0,P/2],[0,r,P/2],[-C,0,-P/2],[O,0,-P/2],[0,r,-P/2]];for(C=0;6>C;C++)T[3*C]=r[C][0],T[3*C+1]=r[C][1],T[3*C+2]=r[C][2];r={[t.VertexAttrConstants.POSITION]:new Uint32Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5])};return new H.GeometryData({[t.VertexAttrConstants.POSITION]:{size:3,
data:T}},r)};M.transformInPlace=function(r,C){r=r.vertexAttributes[t.VertexAttrConstants.POSITION].data;for(let O=0;O<r.length;O+=3)A.set(B,r[O],r[O+1],r[O+2]),A.transformMat4(B,B,C),r[O]=B[0],r[O+1]=B[1],r[O+2]=B[2]};M.cgToGIS=function(r,C=r){var O=r.getVertexAttr();r=O.position.data;var P=O.normal.data,T=C.getVertexAttr();O=T.position.data;T=T.normal.data;if(P)for(let F=0;F<P.length;F+=3){const K=P[F+1];T[F+1]=-P[F+2];T[F+2]=K}if(r)for(P=0;P<r.length;P+=3)T=r[P+1],O[P+1]=-r[P+2],O[P+2]=T;return C};
M.makeOrthoBasisDirUp=N;M.makeOrthoBasisDirUpFallback=z})(D||(D={}));const B=w.create();return D})},"esri/chunks/vec3f32":function(){define(["exports"],function(q){function A(){return new Float32Array(3)}function w(E){const r=new Float32Array(3);r[0]=E[0];r[1]=E[1];r[2]=E[2];return r}function S(E,r,C){const O=new Float32Array(3);O[0]=E;O[1]=r;O[2]=C;return O}function I(E,r){return new Float32Array(E,r,3)}function t(){return A()}function H(){return S(1,1,1)}function v(){return S(1,0,0)}function G(){return S(0,
1,0)}function y(){return S(0,0,1)}const u=A(),D=H(),B=v(),M=G(),N=y();var z=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I,zeros:t,ones:H,unitX:v,unitY:G,unitZ:y,ZEROS:u,ONES:D,UNIT_X:B,UNIT_Y:M,UNIT_Z:N});q.ONES=D;q.UNIT_X=B;q.UNIT_Y=M;q.UNIT_Z=N;q.ZEROS=u;q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.ones=H;q.unitX=v;q.unitY=G;q.unitZ=y;q.vec3f32=z;q.zeros=t})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["exports"],function(q){(function(A){A.length=
function(w,S){const I=w[S],t=w[S+1];w=w[S+2];return Math.sqrt(I*I+t*t+w*w)};A.normalize=function(w,S){var I=w[S];const t=w[S+1],H=w[S+2];I=1/Math.sqrt(I*I+t*t+H*H);w[S]*=I;w[S+1]*=I;w[S+2]*=I};A.scale=function(w,S,I){w[S]*=I;w[S+1]*=I;w[S+2]*=I};A.add=function(w,S,I,t,H,v=S){H=H||w;H[v]=w[S]+I[t];H[v+1]=w[S+1]+I[t+1];H[v+2]=w[S+2]+I[t+2]};A.subtract=function(w,S,I,t,H,v=S){H=H||w;H[v]=w[S]-I[t];H[v+1]=w[S+1]-I[t+1];H[v+2]=w[S+2]-I[t+2]}})(q.Vec3Compact||(q.Vec3Compact={}));Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../chunks/vec2f64 ../../../../chunks/vec4f64 ../../../../chunks/vec2 ../../../../chunks/vec4".split(" "),function(q,A,w,S,I,t,H,v){function G(C,O){if(!C)throw O=O||"assert",C=Error(O),C.stack&&console.log(C.stack),new N(O);}function y(C){for(const O in C)return O}function u(C,O){C[12]=O[0];C[13]=O[1];C[14]=O[2]}function D(C,
O=0){let P=0;for(let T=0;4>T;T++)P+=C[O+T]*E[T];return P}function B(C){return C-Math.floor(C)}const M=t.create();let N=function(){function C(O){this.message=O}C.prototype.toString=function(){return`AssertException: ${this.message}`};return C}();const z=[1,256,65536,16777216],E=[1/256,1/65536,1/16777216,1/4294967296],r=D(new Uint8ClampedArray([255,255,255,255]));q.AssertException=N;q.VertexAttrConstants={POSITION:"position",NORMAL:"normal",UV0:"uv0",UVMAPSPACE:"uvMapSpace",MEANVERTEXPOSITION:"meanVertexPosition",
AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",BOUND1:"bound1",BOUND2:"bound2",BOUND3:"bound3",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent"};q.assert=G;q.createTranslationMatrix=function(C,O){C=S.identity(C);u(C,O);return C};q.dec2hex=function(C){C=C.toString(16);return"00000000".substr(0,8-C.length)+C};q.encodeInt16=function(C){return A.clamp(Math.round(32767*C),-32767,32767)};q.encodeNormal=function(C,O){const P=Math.abs(C[0]),T=Math.abs(C[1]),F=1/(P+T+Math.abs(C[2])),K=Math.min(C[2]*
F,0);O[0]=(0>C[0]?-1:1)*(P*F-K);O[1]=(0>C[1]?-1:1)*(T*F-K)};q.fallbackIfUndefined=function(C,O){return void 0===C?O:C};q.fovd2fovx=function(C,O,P){return 2*Math.atan(O*Math.tan(.5*C)/Math.sqrt(O*O+P*P))};q.fovd2fovy=function(C,O,P){return 2*Math.atan(P*Math.tan(.5*C)/Math.sqrt(O*O+P*P))};q.fovx2fovd=function(C,O,P){return 2*Math.atan(Math.sqrt(O*O+P*P)*Math.tan(.5*C)/O)};q.fovx2fovy=function(C,O,P){return 2*Math.atan(P*Math.tan(.5*C)/O)};q.fovy2fovd=function(C,O,P){return 2*Math.atan(Math.sqrt(O*
O+P*P)*Math.tan(.5*C)/P)};q.fovy2fovx=function(C,O,P){return 2*Math.atan(O*Math.tan(.5*C)/P)};q.getFirstObjectKey=y;q.getFirstObjectValue=function(C){return C[y(C)]};q.getMatrixTranslation=function(C,O=w.create()){O[0]=C[12];O[1]=C[13];O[2]=C[14];return O};q.hex2rgb=function(C){C=Math.floor(C);return[(C>>16&255)/255,(C>>8&255)/255,(C&255)/255]};q.inverseProjectionInfo=function(C,O,P,T,F){0===C[11]?(T[0]=2/(O*C[0]),T[1]=2/(P*C[5]),T[2]=(1+C[12])/C[0],T[3]=(1+C[13])/C[5],H.set(F,0,1)):(T[0]=-2/(O*C[0]),
T[1]=-2/(P*C[5]),T[2]=(1-C[8])/C[0],T[3]=(1-C[9])/C[5],H.set(F,1,0))};q.isTranslationMatrix=function(C){return 1===C[0]&&0===C[1]&&0===C[2]&&0===C[3]&&0===C[4]&&1===C[5]&&0===C[6]&&0===C[7]&&0===C[8]&&0===C[9]&&1===C[10]&&0===C[11]&&1===C[15]};q.logWithBase=function(C,O){return Math.log(C)/Math.log(O)};q.objectEmpty=function(C){for(const O in C)return!1;return!0};q.packFloatRGBA=function(C,O,P=0){C=A.clamp(C,0,r);for(let T=0;4>T;T++)O[P+T]=Math.floor(256*B(C*z[T]))};q.project=function(C,O,P,T,F){F||
(F=C);M[0]=C[0];M[1]=C[1];M[2]=C[2];M[3]=1;v.transformMat4(M,M,O);2<F.length&&(F[2]=-M[2]);v.transformMat4(M,M,P);G(0!==M[3]);F[0]=M[0]/M[3];F[1]=M[1]/M[3];F[2]=M[2]/M[3];F[0]=(.5*F[0]+.5)*T[2]+T[0];F[1]=(.5*F[1]+.5)*T[3]+T[1]};q.rayBoxTest=function(C,O,P,T){let F,K=(P[0]-C[0])/O[0],J=(T[0]-C[0])/O[0];K>J&&(F=K,K=J,J=F);let L=(P[1]-C[1])/O[1],Y=(T[1]-C[1])/O[1];L>Y&&(F=L,L=Y,Y=F);if(K>Y||L>J)return!1;L>K&&(K=L);Y<J&&(J=Y);P=(P[2]-C[2])/O[2];C=(T[2]-C[2])/O[2];P>C&&(F=P,P=C,C=F);if(K>C||P>J)return!1;
C<J&&(J=C);return 0>J?!1:!0};q.rayRay2D=function(C,O,P,T,F,K=I.create()){const J=(T[F]-P[F])*(O[0]-C[0])-(T[0]-P[0])*(O[F]-C[F]);if(0===J)return!1;P=((T[0]-P[0])*(C[F]-P[F])-(T[F]-P[F])*(C[0]-P[0]))/J;K[0]=C[0]+P*(O[0]-C[0]);K[1]=C[F]+P*(O[F]-C[F]);return!0};q.rayTriangle3D=function(C,O,P,T,F,K,J,L,Y=w.create()){var W=T[J]-P[K];const aa=T[J+1]-P[K+1],oa=T[J+2]-P[K+2];T=F[L]-P[K];J=F[L+1]-P[K+1];F=F[L+2]-P[K+2];const ta=O[1]*F-J*O[2],la=O[2]*T-F*O[0],X=O[0]*J-T*O[1];L=W*ta+aa*la+oa*X;if(-1E-5<L&&1E-5>
L)return!1;L=1/L;const U=C[0]-P[K],ka=C[1]-P[K+1];C=C[2]-P[K+2];Y[1]=L*(U*ta+ka*la+C*X);if(0>Y[1]||1<Y[1])return!1;P=ka*oa-aa*C;C=C*W-oa*U;W=U*aa-W*ka;Y[2]=L*(O[0]*P+O[1]*C+O[2]*W);if(0>Y[2]||1<Y[1]+Y[2])return!1;Y[0]=L*(T*P+J*C+F*W);return!0};q.rgb2hex=function(C){const O=A.clamp(Math.round(255*C[0]),0,255),P=A.clamp(Math.round(255*C[1]),0,255);C=A.clamp(Math.round(255*C[2]),0,255);return"0x"+((O<<16)+(P<<8)+C).toString(16)};q.setMatrixTranslation=u;q.setMatrixTranslation3=function(C,O,P,T){C[12]=
O;C[13]=P;C[14]=T};q.unpackFloatRGBA=D;q.verify=function(C,O){C||console.warn("Verify failed: "+(O||"")+"\n"+Error("verify").stack)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryData":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./geometryDataUtils","./Util"],function(q,A,w,S){let I=function(){function t(v,G=t.DefaultIndices,y="triangle"){this.initialize(v,G,y)}var H=t.prototype;H.getVertexAttr=function(){return this.vertexAttributes};
H.initialize=function(v,G=t.DefaultIndices,y="triangle"){const u={};for(const D in v){const {data:B,size:M}=v[D];u[D]={data:B,size:M,offsetIdx:0,strideIdx:M}}if(G===t.DefaultIndices){G=S.getFirstObjectValue(u);G=null==G?0:G.data.length/G.size;v=w.generateDefaultIndexArray(G);G={};for(const D in u)G[D]=v}this._id=w.getNewId();this._vertexAttributes=u;this._indices=G;this._primitiveType=y};H.toRenderData=function(){return{id:this._id.toString(),indices:this._indices,vertexAttr:this._vertexAttributes}};
H.getIndices=function(v){return this._indices[v]};H.getAttribute=function(v){return this._vertexAttributes[v]};H.estimateGpuMemoryUsage=function(){let v=0;this._indices[S.VertexAttrConstants.POSITION]&&(v+=12*this._indices[S.VertexAttrConstants.POSITION].length);this._indices[S.VertexAttrConstants.NORMAL]&&(v+=12*this._indices[S.VertexAttrConstants.NORMAL].length);this._indices[S.VertexAttrConstants.UV0]&&(v+=8*this._indices[S.VertexAttrConstants.UV0].length);this._indices[S.VertexAttrConstants.COLOR]&&
(v+=4*this._indices[S.VertexAttrConstants.COLOR].length);return v};A._createClass(t,[{key:"id",get:function(){return this._id}},{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",get:function(){const v=S.getFirstObjectValue(this._indices);return null==v?0:v.length}},{key:"primitiveType",get:function(){return this._primitiveType}}]);return t}();I.DefaultIndices={};q.GeometryData=I;Object.defineProperty(q,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/triangle"],function(q,A,w,S){let I=1,t=null;const H=new Uint32Array([0]);let v=0;const G=A.create(),y=A.create(),u=A.create(),D=A.create();q.computeAttachmentOriginLines=function(B,M,N,z){if(!B)return!1;const {strideIdx:E,offsetIdx:r,data:C}=B;w.set(z,0,0,0);w.set(D,0,0,0);let O=B=0;const P=M?M.length-1:C.length/E-1;N=P+(N?2:0);for(let K=
0;K<N;K+=2){var T=K<P?K:P,F=K<P?K+1:0;T=(M?M[T]:T)*E+r;F=(M?M[F]:F)*E+r;G[0]=C[T+0];G[1]=C[T+1];G[2]=C[T+2];y[0]=C[F+0];y[1]=C[F+1];y[2]=C[F+2];w.scale(G,w.add(G,G,y),.5);F=w.dist(G,y);0<F?(w.add(z,z,w.scale(G,G,F)),B+=F):(w.add(D,D,G),O++)}return 0!==B?(w.scale(z,z,1/B),!0):0!==O?(w.scale(z,D,1/O),!0):!1};q.computeAttachmentOriginPoints=function(B,M,N){if(!B||!M)return!1;const {strideIdx:z,offsetIdx:E,data:r}=B;w.set(N,0,0,0);B=-1;let C=0;for(let O=0;O<M.length;O++){const P=M[O]*z+E;B!==P&&(N[0]+=
r[P+0],N[1]+=r[P+1],N[2]+=r[P+2],C++);B=P}1<C&&w.scale(N,N,1/C);return 0<C};q.computeAttachmentOriginTriangles=function(B,M,N){if(!B)return!1;const {strideIdx:z,offsetIdx:E,data:r}=B;w.set(N,0,0,0);w.set(D,0,0,0);let C=B=0;for(let P=0;P<M.length-2;P+=3){var O=M[P+0]*z+E;const T=M[P+1]*z+E,F=M[P+2]*z+E;w.set(G,r[O+0],r[O+1],r[O+2]);w.set(y,r[T+0],r[T+1],r[T+2]);w.set(u,r[F+0],r[F+1],r[F+2]);(O=S.areaPoints3d(G,y,u))?(w.add(G,G,y),w.add(G,G,u),w.scale(G,G,1/3*O),w.add(N,N,G),B+=O):(w.add(D,D,G),w.add(D,
D,y),w.add(D,D,u),C+=3)}return 0===C&&0===B?!1:0!==B?(w.scale(N,N,1/B),!0):0!==C?(w.scale(N,D,1/C),!0):!1};q.generateDefaultIndexArray=function(B){if(1===B)return H;if(B>I||null==t){for(;B>I;)I*=2;t=new Uint32Array(I);for(let M=0;M<I;M++)t[M]=M}return new Uint32Array(t.buffer,0,B)};q.getNewId=function(){return v++};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./geometryDataUtils ./Util ./IdGen ./BoundingInfo".split(" "),
function(q,A,w,S,I,t){let H=function(){function v(y,u){this._boundingInfo=null;this._id=v.__idGen.gen(u);this._data=y}var G=v.prototype;G.getIndices=function(y){return this.data.getIndices(y)};G.getAttribute=function(y){return this.data.getAttribute(y)};G.computeAttachmentOrigin=function(y){return"triangle"===this.data.primitiveType?this.computeAttachmentOriginTriangles(y):this.computeAttachmentOriginPoints(y)};G.computeAttachmentOriginTriangles=function(y){const u=this.getIndices(S.VertexAttrConstants.POSITION),
D=this.getAttribute(S.VertexAttrConstants.POSITION);return w.computeAttachmentOriginTriangles(D,u,y)};G.computeAttachmentOriginPoints=function(y){const u=this.getIndices(S.VertexAttrConstants.POSITION),D=this.getAttribute(S.VertexAttrConstants.POSITION);return w.computeAttachmentOriginPoints(D,u,y)};G.invalidateBoundingInfo=function(){this._boundingInfo=null};G._calculateBoundingInfo=function(){let y=this.data.getIndices(S.VertexAttrConstants.POSITION);const u=this.data.getAttribute(S.VertexAttrConstants.POSITION),
D="triangle"===this.data.primitiveType?3:1;if(0===y.length){y=new Uint32Array(D);for(var B=0;B<D;++B)y[B]=B}B=y.length;S.assert(0===B%D,"Indexing error: "+B.toFixed(0)+" not divisible by "+D.toFixed(0));B=w.generateDefaultIndexArray(B/D);return new t(B,D,y,u)};q._createClass(v,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"indexCount",get:function(){return this.data.indexCount}},{key:"vertexCount",get:function(){return this.data.indexCount}},{key:"faceCount",
get:function(){return this.data.indexCount/3}},{key:"boundingInfo",get:function(){A.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}}]);return v}();H.__idGen=new I.IdGen;return H})},"esri/views/3d/webgl-engine/lib/IdGen":function(){define(["exports"],function(q){let A=function(){function w(){this._count=0}w.prototype.gen=function(S){null==S&&(S="a");return S+"_"+this._count++};return w}();q.IdGen=A;Object.defineProperty(q,"__esModule",{value:!0})})},
"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["../../../../core/PooledArray","../../../../chunks/vec3f64","../../../../chunks/vec3","./Util"],function(q,A,w,S){let I=function(){function t(v,G,y,u){this.primitiveIndices=v;this._numIndexPerPrimitive=G;this.indices=y;this._position=u;this.center=A.create();S.assert(1<=v.length);S.assert(0===y.length%this._numIndexPerPrimitive);S.assert(y.length>=v.length*this._numIndexPerPrimitive);S.assert(3===this._position.size||4===this._position.size);
const {data:D,offsetIdx:B,strideIdx:M}=this._position;G=0;var N=v.length;u=B+M*y[this._numIndexPerPrimitive*v[G]];t.tmpIndices.clear();t.tmpIndices.push(u);this.bbMin=A.fromValues(D[u],D[u+1],D[u+2]);for(this.bbMax=A.clone(this.bbMin);G<N;++G){var z=this._numIndexPerPrimitive*v[G];for(var E=0;E<this._numIndexPerPrimitive;++E){u=B+M*y[z+E];t.tmpIndices.push(u);let r=D[u];this.bbMin[0]=Math.min(r,this.bbMin[0]);this.bbMax[0]=Math.max(r,this.bbMax[0]);r=D[u+1];this.bbMin[1]=Math.min(r,this.bbMin[1]);
this.bbMax[1]=Math.max(r,this.bbMax[1]);r=D[u+2];this.bbMin[2]=Math.min(r,this.bbMin[2]);this.bbMax[2]=Math.max(r,this.bbMax[2])}}w.lerp(this.center,this.bbMin,this.bbMax,.5);this.bsRadius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);v=this.bsRadius*this.bsRadius;for(G=0;G<t.tmpIndices.length;++G)u=t.tmpIndices.data[G],y=D[u]-this.center[0],N=D[u+1]-this.center[1],u=D[u+2]-this.center[2],z=y*y+N*N+u*u,z<=v||(z=Math.sqrt(z),E=.5*(z-this.bsRadius),
this.bsRadius+=E,v=this.bsRadius*this.bsRadius,z=E/z,this.center[0]+=y*z,this.center[1]+=N*z,this.center[2]+=u*z);t.tmpIndices.clear()}var H=t.prototype;H.getCenter=function(){return this.center};H.getBSRadius=function(){return this.bsRadius};H.getBBMin=function(){return this.bbMin};H.getBBMax=function(){return this.bbMax};H.getPrimitiveIndices=function(){return this.primitiveIndices};H.getIndices=function(){return this.indices};H.getPosition=function(){return this._position};H.getChildren=function(){if(this._children)return this._children;
if(1<w.squaredDistance(this.bbMin,this.bbMax)){var v=w.lerp(A.create(),this.bbMin,this.bbMax,.5),G=this.primitiveIndices.length;const B=new Uint8Array(G),M=Array(8);for(var y=0;8>y;++y)M[y]=0;const {data:N,offsetIdx:z,strideIdx:E}=this._position;for(y=0;y<G;++y){var u=0;const r=this._numIndexPerPrimitive*this.primitiveIndices[y];var D=z+E*this.indices[r];let C=N[D],O=N[D+1],P=N[D+2];for(let T=1;T<this._numIndexPerPrimitive;++T){D=z+E*this.indices[r+T];const F=N[D],K=N[D+1];D=N[D+2];F<C&&(C=F);K<O&&
(O=K);D<P&&(P=D)}C<v[0]&&(u|=1);O<v[1]&&(u|=2);P<v[2]&&(u|=4);B[y]=u;++M[u]}v=0;for(y=0;8>y;++y)0<M[y]&&++v;if(2>v)return;v=Array(8);for(y=0;8>y;++y)v[y]=0<M[y]?new Uint32Array(M[y]):void 0;for(y=0;8>y;++y)M[y]=0;for(y=0;y<G;++y)u=B[y],v[u][M[u]++]=this.primitiveIndices[y];this._children=Array(8);for(G=0;8>G;++G)void 0!==v[G]&&(this._children[G]=new t(v[G],this._numIndexPerPrimitive,this.indices,this._position))}return this._children};return t}();(I||(I={})).tmpIndices=new q({deallocator:null});return I})},
"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../lib/OrderIndependentTransparency ../lib/StencilUtils ../../../../chunks/RibbonLine.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){const r={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};H=function(O){function P(F,K){K=O.call(this,F,K)||this;K.stipplePattern=null;K.stippleTextureBind=null;K.stippleTextureRepository=F.stippleTextureRepository;return K}w._inheritsLoose(P,O);var T=P.prototype;T.initializeProgram=function(F){var K=P.shader.get();const J=this.configuration;K=K.build({OITEnabled:0===
J.transparencyPassType,output:J.output,slicePlaneEnabled:J.slicePlaneEnabled,sliceHighlightDisabled:J.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,stippleEnabled:J.stippleEnabled,stippleOffColorEnabled:J.stippleOffColorEnabled,stippleUVMaxEnabled:J.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:J.stippleIntegerRepeatsEnabled,roundCaps:J.roundCaps,roundJoins:J.roundJoins,vvColor:J.vvColor,vvSize:J.vvSize,vvInstancingEnabled:!0,vvOpacity:J.vvOpacity,falloffEnabled:J.falloffEnabled,
innerColorEnabled:J.innerColorEnabled});return new G(F.rctx,K.generateSource("vertex"),K.generateSource("fragment"),r)};T.dispose=function(){O.prototype.dispose.call(this);this.stippleTextureRepository.release(this.stipplePattern);this.stippleTextureBind=this.stipplePattern=null};T.bindPass=function(F,K,J){u.View.bindProjectionMatrix(this.program,J.camera.projectionMatrix);4===this.configuration.output&&B.OutputHighlight.bindOutputHighlight(F,this.program,J);this.program.setUniform1f("intrinsicWidth",
K.width);this.program.setUniform4fv("intrinsicColor",K.color);this.program.setUniform1f("miterLimit","miter"!==K.join?0:K.miterLimit);this.program.setUniform2fv("nearFar",J.camera.nearFar);this.program.setUniform1f("pixelRatio",J.camera.pixelRatio);this.program.setUniform2f("screenSize",J.camera.fullViewport[2],J.camera.fullViewport[3]);M.VisualVariables.bindUniformsWithOpacity(this.program,K);if(this.stipplePattern!==K.stipplePattern){const L=K.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,
L);this.stipplePattern=L}this.configuration.stippleEnabled&&(F=I.isSome(this.stippleTextureBind)?this.stippleTextureBind(F,0)*J.camera.pixelRatio:1,this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/F),this.configuration.stippleOffColorEnabled&&(F=I.unwrap(K.stippleOffColor),this.program.setUniform4f("stippleOffColor",F[0],F[1],F[2],3<F.length?F[3]:1)));this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",K.falloff);this.configuration.innerColorEnabled&&
(this.program.setUniform4fv("innerColor",I.unwrapOr(K.innerColor,K.color)),this.program.setUniform1f("innerWidth",K.innerWidth*J.camera.pixelRatio))};T.bindDraw=function(F){u.View.bindView(this.program,F);D.Slice.bindUniformsWithOrigin(this.program,this.configuration,F)};T.setPipelineState=function(F,K){const J=this.configuration,L=3===F,Y=2===F;return y.makePipelineState({blending:0===J.output||7===J.output?L?N.blendingDefault:N.OITBlending(F):null,depthTest:{func:N.OITDepthTest(F)},depthWrite:L?
!J.transparent&&J.writeDepth&&y.defaultDepthWriteParams:N.OITDepthWrite(F),colorWrite:y.defaultColorWriteParams,stencilWrite:J.sceneHasOcludees?z.stencilWriteMaskOn:null,stencilTest:J.sceneHasOcludees?K?z.stencilToolMaskBaseParams:z.stencilBaseAllZerosParams:null,polygonOffset:L||Y?J.polygonOffset&&C:N.OITPolygonOffset})};T.initializePipeline=function(){const F=this.configuration,K=F.polygonOffset&&C;F.occluder&&(this._occluderPipelineTransparent=y.makePipelineState({blending:N.blendingDefault,polygonOffset:K,
depthTest:z.depthCompareAlways,depthWrite:null,colorWrite:y.defaultColorWriteParams,stencilWrite:null,stencilTest:z.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=y.makePipelineState({blending:N.blendingDefault,polygonOffset:K,depthTest:z.depthCompareAlways,depthWrite:null,colorWrite:y.defaultColorWriteParams,stencilWrite:z.stencilWriteMaskOff,stencilTest:z.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=y.makePipelineState({blending:null,polygonOffset:K,depthTest:z.depthCompareLess,
depthWrite:null,colorWrite:null,stencilWrite:z.stencilWriteMaskOn,stencilTest:z.stencilToolMaskBaseParams}));this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,!1)};T.getPipelineState=function(F,K){return K?this._occludeePipelineState:this.configuration.occluder?11===F?this._occluderPipelineTransparent:10===F?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline};w._createClass(P,
[{key:"primitiveType",get:function(){return 5}}]);return P}(H.ShaderTechnique);H.shader=new t.ReloadableShaderModule(E.RibbonLineShader,()=>new Promise(function(O,P){q(["./RibbonLine.glsl"],O,P)}));const C={factor:0,units:-4};t=function(O){function P(){var T=O.apply(this,arguments)||this;T.output=0;T.occluder=!1;T.slicePlaneEnabled=!1;T.sliceHighlightDisabled=!1;T.vertexColors=!1;T.transparent=!1;T.polygonOffset=!1;T.writeDepth=!1;T.stippleEnabled=!1;T.stippleOffColorEnabled=!1;T.stippleIntegerRepeatsEnabled=
!1;T.roundCaps=!1;T.roundJoins=!1;T.vvSize=!1;T.vvColor=!1;T.vvOpacity=!1;T.falloffEnabled=!1;T.innerColorEnabled=!1;T.sceneHasOcludees=!1;T.transparencyPassType=3;return T}w._inheritsLoose(P,O);return P}(v.ShaderTechniqueConfiguration);S.__decorate([v.parameter({count:8})],t.prototype,"output",void 0);S.__decorate([v.parameter()],t.prototype,"occluder",void 0);S.__decorate([v.parameter()],t.prototype,"slicePlaneEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"sliceHighlightDisabled",void 0);
S.__decorate([v.parameter()],t.prototype,"vertexColors",void 0);S.__decorate([v.parameter()],t.prototype,"transparent",void 0);S.__decorate([v.parameter()],t.prototype,"polygonOffset",void 0);S.__decorate([v.parameter()],t.prototype,"writeDepth",void 0);S.__decorate([v.parameter()],t.prototype,"stippleEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"stippleOffColorEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"stippleIntegerRepeatsEnabled",void 0);S.__decorate([v.parameter()],
t.prototype,"roundCaps",void 0);S.__decorate([v.parameter()],t.prototype,"roundJoins",void 0);S.__decorate([v.parameter()],t.prototype,"vvSize",void 0);S.__decorate([v.parameter()],t.prototype,"vvColor",void 0);S.__decorate([v.parameter()],t.prototype,"vvOpacity",void 0);S.__decorate([v.parameter()],t.prototype,"falloffEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"innerColorEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"sceneHasOcludees",void 0);S.__decorate([v.parameter({count:4})],
t.prototype,"transparencyPassType",void 0);A.RibbonLineTechnique=H;A.RibbonLineTechniqueConfiguration=t;A.RibbonVertexAttributeConstants={POSITION:"position",SUBDIVISIONFACTOR:"subdivisionFactor",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",SUBDIVISIONS:"subdivisions",COLOR:"color",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",SIZE:"size",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute"};A.ribbonVertexAttributeLocations=r;Object.defineProperty(A,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports"],function(q){let A=function(){function w(I,t){this._module=I;this._loadModule=t}var S=w.prototype;S.get=function(){return this._module};S.reload=async function(){return this._module=await this._loadModule()};return w}();q.ReloadableShaderModule=A;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers"],function(q,A){let w=function(){function S(t,H){H&&(this._config=H.snapshot());this._program=this.initializeProgram(t);t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program));this._pipeline=this.initializePipeline(t)}var I=S.prototype;I.dispose=function(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),
this._program=null)};I.reload=function(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose());this._program=this.initializeProgram(t);this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)};I.bindPass=function(t,H,v){};I.bindMaterial=function(t,H,v){};I.bindDraw=function(t,H,v){};I.bindPipelineState=function(t){t.setPipelineState(this.pipeline)};I.ensureAttributeLocations=function(t){this.program.assertCompatibleVertexAttributeLocations(t)};
A._createClass(S,[{key:"program",get:function(){return this._program}},{key:"pipeline",get:function(){return this._pipeline}},{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"primitiveType",get:function(){return 4}}]);return S}();q.ShaderTechnique=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/mathUtils"],function(q,A,w){let S=function(){function I(){this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits.map(()=>0)}I.prototype.snapshot=function(){const t=this._parameterNames,H={key:this.key};for(const v of t)H[v]=this[v];return H};A._createClass(I,[{key:"key",get:function(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key}}]);return I}();q.ShaderTechniqueConfiguration=S;q.parameter=
function(I={}){return(t,H)=>{var v,G;t._parameterNames=null!=(v=t._parameterNames)?v:[];t._parameterNames.push(H);const y=t._parameterNames.length-1;v=Math.ceil(w.log2(I.count||2));const u=null!=(G=t._parameterBits)?G:[0];let D=0;for(;16<u[D]+v;)D++,D>=u.length&&u.push(0);t._parameterBits=u;const B=u[D],M=(1<<v)-1<<B;u[D]+=v;Object.defineProperty(t,H,{get(){return this[y]},set(N){if(this[y]!==N&&(this[y]=N,this._keyDirty=!0,this._parameterBits[D]=this._parameterBits[D]&~M|+N<<B&M,"number"!==typeof N&&
"boolean"!==typeof N))throw"Configuration values must be booleans or numbers!";}})}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/Program":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/maybe","./ShaderTranspiler"],function(q,A,w,S){function I(H,v){if(w.isNone(H)||H.length!==v.length)return!0;for(let G=0;G<H.length;++G)if(H[G]!==v[G])return!0;return!1}let t=0;return function(){function H(G,y,u,D,B={}){this._glName=this._context=null;
this._locations={};this.id=t++;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};G||console.error("RenderingContext isn't initialized!");0===y.length&&console.error("Shaders source should not be empty!");G.instanceCounter.increment(3,this);
this._context=G;this._vertexShaderSource=y;this._fragmentShaderSource=u;if(Array.isArray(B))for(const M of B)this._defines[M]="1";else this._defines=B;this._locations=D}var v=H.prototype;v.getDefine=function(G){return this._defines[G]};v.dispose=function(){if(this._context){var G=this._context.gl;this._vShader&&(G.deleteShader(this._vShader),this._vShader=null);this._fShader&&(G.deleteShader(this._fShader),this._fShader=null);this._glName&&(G.deleteProgram(this._glName),this._glName=null);this._context.instanceCounter.decrement(3,
this);this._context=null}};v.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var G=this._context.gl,y=G.createProgram();G.attachShader(y,this._vShader);G.attachShader(y,this._fShader);for(const u in this._locations)G.bindAttribLocation(y,this._locations[u],u);G.linkProgram(y);this._glName=y;this._initialized=!0}};v.getUniformLocation=function(G){this.initialize();
void 0===this._nameToUniformLocation[G]&&(this._nameToUniformLocation[G]=this._context.gl.getUniformLocation(this._glName,G));return this._nameToUniformLocation[G]};v.hasUniform=function(G){return null!==this.getUniformLocation(G)};v.getAttribLocation=function(G){this.initialize();void 0===this._nameToAttribLocation[G]&&(this._nameToAttribLocation[G]=this._context.gl.getAttribLocation(this._glName,G));return this._nameToAttribLocation[G]};v.setUniform1i=function(G,y){const u=this._nameToUniform1[G];
if(void 0===u||y!==u)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(G),y),this._nameToUniform1[G]=y};v.setUniform1iv=function(G,y){const u=this._nameToUniform1v[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform1v[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform2iv=function(G,y){const u=this._nameToUniform2[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(G),
y),void 0===u?this._nameToUniform2[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform3iv=function(G,y){const u=this._nameToUniform3[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform3[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform4iv=function(G,y){const u=this._nameToUniform4[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform4[G]=
H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform1f=function(G,y){const u=this._nameToUniform1[G];if(void 0===u||y!==u)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(G),y),this._nameToUniform1[G]=y};v.setUniform1fv=function(G,y){const u=this._nameToUniform1v[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform1v[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform2f=function(G,y,u){const D=
this._nameToUniform2[G];if(void 0===D||y!==D[0]||u!==D[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(G),y,u),void 0===D?this._nameToUniform2[G]=[y,u]:(D[0]=y,D[1]=u)};v.setUniform2fv=function(G,y){const u=this._nameToUniform2[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform2[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform3f=function(G,y,u,D){const B=this._nameToUniform3[G];
if(void 0===B||y!==B[0]||u!==B[1]||D!==B[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(G),y,u,D),void 0===B?this._nameToUniform3[G]=[y,u,D]:(B[0]=y,B[1]=u,B[2]=D)};v.setUniform3fv=function(G,y){const u=this._nameToUniform3[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform3[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniform4f=function(G,y,u,D,B){const M=this._nameToUniform4[G];
if(void 0===M||y!==M[0]||u!==M[1]||D!==M[2]||B!==M[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(G),y,u,D,B),void 0===M?this._nameToUniform4[G]=[y,u,D,B]:(M[0]=y,M[1]=u,M[2]=D,M[3]=B)};v.setUniform4fv=function(G,y){const u=this._nameToUniform4[G];I(u,y)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(G),y),void 0===u?this._nameToUniform4[G]=H._arrayCopy(y):H._arrayAssign(y,u))};v.setUniformMatrix3fv=function(G,y,u=!1){const D=
this._nameToUniformMatrix3[G];var B=w.isNone(D)?!0:9!==D.length?I(D,y):9!==D.length||D[0]!==y[0]||D[1]!==y[1]||D[2]!==y[2]||D[3]!==y[3]||D[4]!==y[4]||D[5]!==y[5]||D[6]!==y[6]||D[7]!==y[7]||D[8]!==y[8];B&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(G),u,y),void 0===D?this._nameToUniformMatrix3[G]=H._arrayCopy(y):H._arrayAssign(y,D))};v.setUniformMatrix4fv=function(G,y,u=!1){const D=this._nameToUniformMatrix4[G];var B=w.isNone(D)?!0:16!==D.length?I(D,y):
16!==D.length||D[0]!==y[0]||D[1]!==y[1]||D[2]!==y[2]||D[3]!==y[3]||D[4]!==y[4]||D[5]!==y[5]||D[6]!==y[6]||D[7]!==y[7]||D[8]!==y[8]||D[9]!==y[9]||D[10]!==y[10]||D[11]!==y[11]||D[12]!==y[12]||D[13]!==y[13]||D[14]!==y[14]||D[15]!==y[15];B&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(G),u,y),void 0===D?this._nameToUniformMatrix4[G]=H._arrayCopy(y):H._arrayAssign(y,D))};v.assertCompatibleVertexAttributeLocations=function(G){(G=G.locations===this.locations)||
console.error("VertexAttributeLocations are incompatible");return G};H._padToThree=function(G){let y=G.toString();1E3>G&&(y=("  "+G).slice(-3));return y};v._addLineNumbers=function(G){let y=2;return G.replace(/\n/g,()=>"\n"+H._padToThree(y++)+":")};v._loadShader=function(G){var y=35633===G,u=y?this._vertexShaderSource:this._fragmentShaderSource;let D="";for(const B in this._defines)D+=`#define ${B} ${this._defines[B]}\n`;u=D+u;"webgl2"===this._context.contextVersion&&(u=S.transpileShader(u,y?"vertex":
"fragment"));y=this._context.gl;G=y.createShader(G);y.shaderSource(G,u);y.compileShader(G);return G};H._arrayCopy=function(G){const y=[];for(let u=0;u<G.length;++u)y.push(G[u]);return y};H._arrayAssign=function(G,y){for(let u=0;u<G.length;++u)y[u]=G[u]};q._createClass(H,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}}]);return H}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../chunks/_commonjsHelpers","./reservedWordsGLSL3"],
function(q,A,w){function S(){function z(qa){qa.length&&aa.push({type:M[J],data:qa,position:la,line:oa,column:ta})}function E(){W=W.length?[]:W;if("/"===Y&&"*"===L)return la=K+F-1,J=0,Y=L,F+1;if("/"===Y&&"/"===L)return la=K+F-1,J=1,Y=L,F+1;if("#"===L)return J=2,la=K+F,F;if(/\s/.test(L))return J=9,la=K+F,F;X=/\d/.test(L);U=/[^\w_]/.test(L);la=K+F;J=X?4:U?3:9999;return F}function r(){if(("\r"===L||"\n"===L)&&"\\"!==Y)return z(W.join("")),J=999,F;W.push(L);Y=L;return F+1}function C(){if("."===Y&&/\d/.test(L))return J=
5,F;if("/"===Y&&"*"===L)return J=0,F;if("/"===Y&&"/"===L)return J=1,F;if("."===L&&W.length){for(;O(W););J=5;return F}if(";"===L||")"===L||"("===L){if(W.length)for(;O(W););z(L);J=999;return F+1}var qa=2===W.length&&"\x3d"!==L;if(/[\w_\d\s]/.test(L)||qa){for(;O(W););J=999;return F}W.push(L);Y=L;return F+1}function O(qa){var na=0;do{var pa=D.indexOf(qa.slice(0,qa.length+na).join(""));var va=D[pa];if(-1===pa){if(0<na--+qa.length)continue;va=qa.slice(0,1).join("")}z(va);la+=va.length;W=W.slice(va.length);
return W.length}while(1)}function P(){if("."===L||/[eE]/.test(L))return W.push(L),J=5,Y=L,F+1;if("x"===L&&1===W.length&&"0"===W[0])return J=11,W.push(L),Y=L,F+1;if(/[^\d]/.test(L))return z(W.join("")),J=999,F;W.push(L);Y=L;return F+1}function T(){"f"===L&&(W.push(L),Y=L,F+=1);if(/[eE]/.test(L)||"-"===L&&/[eE]/.test(Y))return W.push(L),Y=L,F+1;if(/[^\d]/.test(L))return z(W.join("")),J=999,F;W.push(L);Y=L;return F+1}var F=0,K=0,J=999,L,Y,W=[],aa=[],oa=1,ta=0,la=0,X=!1,U=!1,ka="",sa;return function(qa){aa=
[];if(null!==qa){qa=qa.replace?qa.replace(/\r\n/g,"\n"):qa;F=0;ka+=qa;for(sa=ka.length;L=ka[F],F<sa;){qa=F;switch(J){case 0:"/"===L&&"*"===Y?(W.push(L),z(W.join("")),J=999):(W.push(L),Y=L);F+=1;break;case 1:F=r();break;case 2:F=r();break;case 3:F=C();break;case 4:F=P();break;case 11:/[^a-fA-F0-9]/.test(L)?(z(W.join("")),J=999):(W.push(L),Y=L,F+=1);break;case 5:F=T();break;case 9999:if(/[^\d\w_]/.test(L)){var na=W.join("");J=-1<u.indexOf(na)?8:-1<B.indexOf(na)?7:6;z(W.join(""));J=999}else W.push(L),
Y=L,F+=1;break;case 9:/[^\s]/g.test(L)?(z(W.join("")),J=999):(W.push(L),Y=L,F+=1);break;case 999:F=E()}if(qa!==F)switch(ka[qa]){case "\n":ta=0;++oa;break;default:++ta}}K+=F;ka=ka.slice(F);return aa}W.length&&z(W.join(""));J=10;z("(eof)");return aa}}function I(z){return z.map(E=>"eof"!==E.type?E.data:"").join("")}function t(z,E="100",r="300 es"){const C=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const O of z)if("preprocessor"===O.type){const P=C.exec(O.data);if(P){z=P[1].replace(/\s\s+/g," ");
if(z===r)return z;if(z===E)return O.data="#version "+r,E;throw Error("unknown glsl version: "+z);}}z.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"});return null}function H(z,E,r,C){C=C||r;for(const O of z)if("ident"===O.type&&O.data===r)return C in E?E[C]++:E[C]=0,H(z,E,C+"_"+E[C],C);return r}function v(z,E,r="afterVersion"){const C={data:"\n",type:"whitespace"},O=T=>T<z.length?/[^\r\n]$/.test(z[T].data):!1;let P=function(T){let F=-1,K=0,J=-1;for(let Y=0;Y<T.length;Y++){var L=
T[Y];"preprocessor"===L.type&&(L.data.match(/#(if|ifdef|ifndef)\s+.+/)?++K:L.data.match(/#endif\s*.*/)&&--K);("afterVersion"===r||"afterPrecision"===r)&&"preprocessor"===L.type&&/^#version/.test(L.data)&&(J=Math.max(J,Y));if("afterPrecision"===r&&"keyword"===L.type&&"precision"===L.data){a:{for(L=Y;L<T.length;L++){const W=T[L];if("operator"===W.type&&";"===W.data)break a}L=null}if(null===L)throw Error("precision statement not followed by any semicolons!");J=Math.max(J,L)}F<J&&0===K&&(F=Y)}return F+
1}(z);O(P-1)&&z.splice(P++,0,C);for(const T of E)z.splice(P++,0,T);O(P-1)&&O(P)&&z.splice(P,0,C)}function G(z,E,r,C="lowp"){v(z,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:C},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:E},{type:"operator",data:";"}],"afterPrecision")}function y(z,E,r,C,O="lowp"){v(z,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",
data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:C.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:O},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:E},{type:"operator",data:";"}],"afterPrecision")}var u=A.createCommonjsModule(function(z){(function(E){E=E();void 0!==E&&(z.exports=E)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})}),
D=A.createCommonjsModule(function(z){(function(E){E=E();void 0!==E&&(z.exports=E)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})}),B=A.createCommonjsModule(function(z){(function(E){E=E();void 0!==E&&(z.exports=E)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})}),
M="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const N=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];q.transpileShader=function(z,E){var r=S(),C=[];C=C.concat(r(z));z=C=C.concat(r(null));if("300 es"===t(z,"100","300 es"))throw Error("shader is already glsl 300 es");C=r=null;const O={},P={};for(let J=0;J<z.length;++J){const L=z[J];switch(L.type){case "keyword":"vertex"===
E&&"attribute"===L.data?L.data="in":"varying"===L.data&&(L.data="vertex"===E?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(L.data.trim())&&(L.data=L.data.replace(/(2D|Cube|EXT)/g,""));"fragment"===E&&"gl_FragColor"===L.data&&(r||(r=H(z,O,"fragColor"),G(z,r,"vec4")),L.data=r);if("fragment"===E&&"gl_FragData"===L.data){{var T=void 0;let Y=void 0;var F=z;var K=J+1;let W=-1;for(;K<F.length;K++){const aa=F[K];if("operator"===aa.type&&("["===aa.data&&(Y=K),"]"===aa.data)){T=
K;break}"integer"===aa.type&&(W=parseInt(aa.data,10))}Y&&T&&F.splice(Y,T-Y+1);F=W}T=H(z,O,"fragData");y(z,T,"vec4",F,"mediump");L.data=T}else"fragment"===E&&"gl_FragDepthEXT"===L.data&&(C||(C=H(z,O,"gl_FragDepth")),L.data=C);break;case "ident":if(0<=w.indexOf(L.data)){if(F="vertex"===E)a:{for(F=J-1;0<=F;F--)if(T=z[F],"whitespace"!==T.type&&"block-comment"!==T.type)if("keyword"===T.type){if("attribute"===T.data||"in"===T.data){F=!0;break a}}else break;F=!1}if(F)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
L.data in P||(P[L.data]=H(z,O,L.data));L.data=P[L.data]}}}for(E=z.length-1;0<=E;--E)r=z[E],"preprocessor"===r.type&&((C=r.data.match(/#extension\s+(.*):/))&&C[1]&&0<=N.indexOf(C[1].trim())&&(C=z[E+1],z.splice(E,C&&"whitespace"===C.type?2:1)),(C=r.data.match(/#ifdef\s+(.*)/))&&C[1]&&0<=N.indexOf(C[1].trim())&&(r.data="#if 1"),(C=r.data.match(/#ifndef\s+(.*)/))&&C[1]&&0<=N.indexOf(C[1].trim())&&(r.data="#if 0"));return I(z)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/renderState":function(){define(["exports"],function(q){function A(aa){return O.intern(aa)}function w(aa){return P.intern(aa)}function S(aa){return T.intern(aa)}function I(aa){return F.intern(aa)}function t(aa){return K.intern(aa)}function H(aa){return J.intern(aa)}function v(aa){return L.intern(aa)}function G(aa){return Y.intern(aa)}function y(aa){return"["+aa.join(",")+"]"}function u(aa){return aa?y([aa.srcRgb,aa.srcAlpha,aa.dstRgb,aa.dstAlpha,aa.opRgb,aa.opAlpha,aa.color.r,aa.color.g,
aa.color.b,aa.color.a]):null}function D(aa){return aa?y([aa.face,aa.mode]):null}function B(aa){return aa?y([aa.factor,aa.units]):null}function M(aa){return aa?y([aa.func]):null}function N(aa){return aa?y([aa.function.func,aa.function.ref,aa.function.mask,aa.operation.fail,aa.operation.zFail,aa.operation.zPass]):null}function z(aa){return aa?y([aa.zNear,aa.zFar]):null}function E(aa){return aa?y([aa.r,aa.g,aa.b,aa.a]):null}function r(aa){return aa?y([aa.mask]):null}var C=function(){function aa(oa,ta){this.makeKey=
oa;this.makeRef=ta;this.interns=new Map}aa.prototype.intern=function(oa){if(!oa)return null;const ta=this.makeKey(oa),la=this.interns;la.has(ta)||la.set(ta,this.makeRef(oa));return la.get(ta)};return aa}();const O=new C(u,aa=>({__tag:"Blending",...aa})),P=new C(D,aa=>({__tag:"Culling",...aa})),T=new C(B,aa=>({__tag:"PolygonOffset",...aa})),F=new C(M,aa=>({__tag:"DepthTest",...aa})),K=new C(N,aa=>({__tag:"StencilTest",...aa})),J=new C(z,aa=>({__tag:"DepthWrite",...aa})),L=new C(E,aa=>({__tag:"ColorWrite",
...aa})),Y=new C(r,aa=>({__tag:"StencilWrite",...aa})),W=new C(function(aa){return aa?y([u(aa.blending),D(aa.culling),B(aa.polygonOffset),M(aa.depthTest),N(aa.stencilTest),z(aa.depthWrite),E(aa.colorWrite),r(aa.stencilWrite)]):null},aa=>({blending:A(aa.blending),culling:w(aa.culling),polygonOffset:S(aa.polygonOffset),depthTest:I(aa.depthTest),stencilTest:t(aa.stencilTest),depthWrite:H(aa.depthWrite),colorWrite:v(aa.colorWrite),stencilWrite:G(aa.stencilWrite)}));C=function(){function aa(ta){this._stencilWriteInvalid=
this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=ta}var oa=aa.prototype;oa.setPipeline=function(ta){if(this._pipelineInvalid||ta!==this._pipeline)this.setBlending(ta.blending),this.setCulling(ta.culling),this.setPolygonOffset(ta.polygonOffset),this.setDepthTest(ta.depthTest),this.setStencilTest(ta.stencilTest),this.setDepthWrite(ta.depthWrite),
this.setColorWrite(ta.colorWrite),this.setStencilWrite(ta.stencilWrite),this._pipeline=ta;this._pipelineInvalid=!1};oa.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};oa.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};oa.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};oa.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};oa.invalidateStencilTest=function(){this._pipelineInvalid=
this._stencilTestInvalid=!0};oa.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};oa.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};oa.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};oa.setBlending=function(ta){this._blending=this.setSubState(ta,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};oa.setCulling=function(ta){this._culling=this.setSubState(ta,
this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};oa.setPolygonOffset=function(ta){this._polygonOffset=this.setSubState(ta,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};oa.setDepthTest=function(ta){this._depthTest=this.setSubState(ta,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};oa.setStencilTest=function(ta){this._stencilTest=this.setSubState(ta,
this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};oa.setDepthWrite=function(ta){this._depthWrite=this.setSubState(ta,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};oa.setColorWrite=function(ta){this._colorWrite=this.setSubState(ta,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};oa.setStencilWrite=function(ta){this._stencilWrite=this.setSubState(ta,
this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};oa.setSubState=function(ta,la,X,U){if(X||ta!==la)U(ta),this._pipelineInvalid=!0;return ta};return aa}();q.StateTracker=C;q.backFaceCullingParams={face:1029,mode:2305};q.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};q.defaultDepthWriteParams={zNear:0,zFar:1};q.makeBlending=A;q.makeColorWrite=v;q.makeCulling=w;q.makeDepthTest=I;q.makeDepthWrite=H;q.makePipelineState=function(aa){return W.intern(aa)};
q.makePolygonOffset=S;q.makeStencilTest=t;q.makeStencilWrite=G;q.separateBlendingParams=function(aa,oa,ta,la,X=32774,U=32774,ka=[0,0,0,0]){return{srcRgb:aa,srcAlpha:oa,dstRgb:ta,dstAlpha:la,opRgb:X,opAlpha:U,color:{r:ka[0],g:ka[1],b:ka[2],a:ka[3]}}};q.simpleBlendingParams=function(aa,oa,ta=32774,la=[0,0,0,0]){return{srcRgb:aa,srcAlpha:aa,dstRgb:oa,dstAlpha:oa,opRgb:ta,opAlpha:ta,color:{r:la[0],g:la[1],b:la[2],a:la[3]}}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define(["exports",
"../../../../../../chunks/mat4","../../../../../../chunks/mat4f32"],function(q,A,w){(function(I){function t(H,v,G){A.translate(S,G,v);H.setUniform3fv("localOrigin",v);H.setUniformMatrix4fv("view",S)}I.bindCamPosition=function(H,v,G){H.setUniform3f("camPos",G[3]-v[0],G[7]-v[1],G[11]-v[2])};I.bindProjectionMatrix=function(H,v){H.setUniformMatrix4fv("proj",v)};I.bindNearFar=function(H,v){H.setUniform2fv("nearFar",v)};I.bindViewCustomOrigin=t;I.bindView=function(H,v){t(H,v.origin,v.camera.viewMatrix)};
I.bindViewport=function(H,v){H.setUniform4fv("viewport",v.camera.fullViewport)}})(q.View||(q.View={}));const S=w.create();Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/mat4f32":function(){define(["exports"],function(q){function A(){const v=new Float32Array(16);v[0]=1;v[5]=1;v[10]=1;v[15]=1;return v}function w(v){const G=new Float32Array(16);G[0]=v[0];G[1]=v[1];G[2]=v[2];G[3]=v[3];G[4]=v[4];G[5]=v[5];G[6]=v[6];G[7]=v[7];G[8]=v[8];G[9]=v[9];G[10]=v[10];G[11]=v[11];G[12]=v[12];G[13]=
v[13];G[14]=v[14];G[15]=v[15];return G}function S(v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F){const K=new Float32Array(16);K[0]=v;K[1]=G;K[2]=y;K[3]=u;K[4]=D;K[5]=B;K[6]=M;K[7]=N;K[8]=z;K[9]=E;K[10]=r;K[11]=C;K[12]=O;K[13]=P;K[14]=T;K[15]=F;return K}function I(v,G){return new Float32Array(v,G,16)}const t=A();var H=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,createView:I,IDENTITY:t});q.IDENTITY=t;q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.mat4f32=H})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define(["exports",
"../../../../../core/maybe","../../../../../chunks/vec3f64","../../../../../chunks/vec3","../shaderModules/interfaces"],function(q,A,w,S,I){function t(v,G){if(G.slicePlaneEnabled){v.extensions.add("GL_OES_standard_derivatives");G.sliceEnabledForVertexPrograms&&(v.vertex.uniforms.add("slicePlaneOrigin","vec3"),v.vertex.uniforms.add("slicePlaneBasis1","vec3"),v.vertex.uniforms.add("slicePlaneBasis2","vec3"));v.fragment.uniforms.add("slicePlaneOrigin","vec3");v.fragment.uniforms.add("slicePlaneBasis1",
"vec3");v.fragment.uniforms.add("slicePlaneBasis2","vec3");var y=I.glsl`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,u=I.glsl`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `;u=G.sliceHighlightDisabled?I.glsl`#define highlightSlice(_color_, _pos_) (_color_)`:I.glsl`
        ${u}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;G.sliceEnabledForVertexPrograms&&v.vertex.code.add(y);v.fragment.code.add(y);v.fragment.code.add(u)}else y=I.glsl`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `,G.sliceEnabledForVertexPrograms&&v.vertex.code.add(y),v.fragment.code.add(y)}(function(v){v.bindUniformsWithOrigin=function(G,y,u){v.bindUniforms(G,y,u.slicePlane,u.origin)};v.bindUniforms=function(G,y,u,D){y.slicePlaneEnabled&&(A.isSome(u)?(D?(S.subtract(H,u.origin,D),G.setUniform3fv("slicePlaneOrigin",H)):G.setUniform3fv("slicePlaneOrigin",u.origin),G.setUniform3fv("slicePlaneBasis1",u.basis1),G.setUniform3fv("slicePlaneBasis2",u.basis2)):(G.setUniform3fv("slicePlaneBasis1",w.ZEROS),G.setUniform3fv("slicePlaneBasis2",
w.ZEROS),G.setUniform3fv("slicePlaneOrigin",w.ZEROS)))}})(t||(t={}));const H=w.create();q.Slice=t;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(q){function A(w,...S){let I="";for(let t=0;t<S.length;t++)I+=w[t]+S[t];return I+=w[w.length-1]}(function(w){w.int=function(S){return Math.round(S).toString()};w.float=function(S){return S.toPrecision(8)}})(A||(A={}));q.glsl=A;Object.defineProperty(q,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){function w(S){S.fragment.uniforms.add("depthTex","sampler2D");S.fragment.uniforms.add("highlightViewportPixelSz","vec4");S.fragment.code.add(A.glsl`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
      }
      else {
        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
      }
    }
  `)}(function(S){S.bindOutputHighlight=function(I,t,H){I.bindTexture(H.highlightDepthTexture,5);t.setUniform1i("depthTex",5);t.setUniform4f("highlightViewportPixelSz",0,0,H.inverseViewport[0],H.inverseViewport[1])}})(w||(w={}));q.OutputHighlight=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){function w(S,I){I.vvInstancingEnabled&&(I.vvSize||
I.vvColor)&&S.attributes.add("instanceFeatureAttribute","vec4");I.vvSize?(S.vertex.uniforms.add("vvSizeMinSize","vec3"),S.vertex.uniforms.add("vvSizeMaxSize","vec3"),S.vertex.uniforms.add("vvSizeOffset","vec3"),S.vertex.uniforms.add("vvSizeFactor","vec3"),S.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),S.vertex.uniforms.add("vvSymbolAnchor","vec3"),S.vertex.code.add(A.glsl`
      vec3 vvScale(vec4 _featureAttribute) {
        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
      }

      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
      }
    `),S.vertex.code.add(A.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${I.vvInstancingEnabled?A.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):S.vertex.code.add(A.glsl`
      vec4 localPosition() { return vec4(position, 1.0); }

      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }
    `);I.vvColor?(S.vertex.defines.addInt("VV_COLOR_N",8),S.vertex.code.add(A.glsl`
      uniform float vvColorValues[VV_COLOR_N];
      uniform vec4 vvColorColors[VV_COLOR_N];

      vec4 vvGetColor(vec4 featureAttribute, float values[VV_COLOR_N], vec4 colors[VV_COLOR_N]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < VV_COLOR_N; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[VV_COLOR_N - 1];
      }

      ${I.vvInstancingEnabled?A.glsl`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):S.vertex.code.add(A.glsl`
      vec4 vvColor() { return vec4(1.0); }
    `)}(function(S){function I(t,H){H.vvSizeEnabled&&(t.setUniform3fv("vvSizeMinSize",H.vvSizeMinSize),t.setUniform3fv("vvSizeMaxSize",H.vvSizeMaxSize),t.setUniform3fv("vvSizeOffset",H.vvSizeOffset),t.setUniform3fv("vvSizeFactor",H.vvSizeFactor));H.vvColorEnabled&&(t.setUniform1fv("vvColorValues",H.vvColorValues),t.setUniform4fv("vvColorColors",H.vvColorColors))}S.bindUniforms=I;S.bindUniformsWithOpacity=function(t,H){I(t,H);H.vvOpacityEnabled&&(t.setUniform1fv("vvOpacityValues",H.vvOpacityValues),
t.setUniform1fv("vvOpacityOpacities",H.vvOpacityOpacities))};S.bindUniformsForSymbols=function(t,H){I(t,H);H.vvSizeEnabled&&(t.setUniform3fv("vvSymbolAnchor",H.vvSymbolAnchor),t.setUniformMatrix3fv("vvSymbolRotationMatrix",H.vvSymbolRotationMatrix))}})(w||(w={}));q.VisualVariables=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","../../../webgl/renderState"],function(q,A){const w=A.separateBlendingParams(770,
1,771,771),S=A.simpleBlendingParams(1,1),I=A.simpleBlendingParams(0,771),t={factor:-1,units:-2};q.OITBlending=function(H){return 2===H?null:1===H?I:S};q.OITDepthTest=function(H){return 3===H||2===H?513:515};q.OITDepthWrite=function(H){return 2===H?A.defaultDepthWriteParams:null};q.OITPolygonOffset=t;q.OITPolygonOffsetLimit=5E5;q.blendingAlpha=I;q.blendingColor=S;q.blendingDefault=w;q.getOITPolygonOffset=function(H){return H?t:null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports"],
function(q){q.depthCompareAlways={func:519};q.depthCompareLess={func:513};q.renderWhenBitIsNotSet=A=>({function:{func:517,ref:A,mask:A},operation:{fail:7680,zFail:7680,zPass:7680}});q.replaceBitWhenDepthTestPasses=A=>({function:{func:519,ref:A,mask:A},operation:{fail:7680,zFail:7680,zPass:7681}});q.stencilBaseAllZerosParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}};q.stencilToolMaskBaseParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}};
q.stencilToolMaskOccluderParams={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};q.stencilToolTransparentOccluderParams={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};q.stencilWriteMaskOff={mask:0};q.stencilWriteMaskOn={mask:255};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y){function u(B){const M=new w.ShaderBuilder;M.extensions.add("GL_OES_standard_derivatives");M.include(y.PiUtils);M.include(v.RibbonVertexPosition,B);M.include(G.LineStipple,B);1===B.output&&M.include(H.OutputDepth,B);M.vertex.uniforms.add("proj","mat4").add("view","mat4").add("nearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2");M.attributes.add("position","vec3");M.attributes.add("subdivisionFactor","float");M.attributes.add("uv0",
"vec2");M.attributes.add("auxpos1","vec3");M.attributes.add("auxpos2","vec3");M.varyings.add("vColor","vec4");M.varyings.add("vpos","vec3");M.varyings.add("linearDepth","float");const N=B.falloffEnabled,z=B.innerColorEnabled;z&&M.varyings.add("vLineDistance","float");N&&M.varyings.add("vLineDistanceNorm","float");B.falloffEnabled&&M.fragment.uniforms.add("falloff","float");B.innerColorEnabled&&(M.fragment.uniforms.add("innerColor","vec4"),M.fragment.uniforms.add("innerWidth","float"));M.vertex.code.add(A.glsl`
		#define PERPENDICULAR(v) vec2(v.y, -v.x);
		#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0

		float interp(float ncp, vec4 a, vec4 b) {
			return (-ncp - a.z) / (b.z - a.z);
		}

		vec2 rotate(vec2 v, float a) {
			float s = sin(a);
			float c = cos(a);
			mat2 m = mat2(c, -s, s, c);
			return m * v;
		}
`);M.vertex.code.add(A.glsl`
    vec4 projectAndScale(vec4 pos) {
      vec4 posNdc = proj * pos;

      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system
      // that is twice scaled (going from -size:size).
      posNdc.xy *= screenSize / posNdc.w;
      return posNdc;
    }
`);M.vertex.code.add(A.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      //current pos behind ncp --> we need to clip
      if(pos.z > -nearFar[0]) {
        if (!isStartVertex) {
          //previous in front of ncp
          if(prev.z < -nearFar[0]) {
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
        //next in front of ncp
        if(isStartVertex) {
          if(next.z < -nearFar[0]) {
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        //previous behind ncp
        if (prev.z > -nearFar[0]) {
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        //next behind ncp
        if (next.z > -nearFar[0]) {
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      linearDepth = (-pos.z - nearFar[0]) / (nearFar[1] - nearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
`);M.vertex.code.add(A.glsl`
  void main(void) {
    float coverage = 1.0;
    vpos = position;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;
      bool isJoin = abs(uv0.y)-3.0 < 0.0;

      float lineWidth = getSize() * pixelRatio;

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `);B.stippleEnabled&&M.vertex.code.add(A.glsl`
      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment
      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment
      // vector
      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);
      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;

      // Scale s.t. it's in units of stipple pattern size.
      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;
    `);M.vertex.code.add(A.glsl`
    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);

    vec2 capDisplacementDir = vec2(0, 0);
    vec2 joinDisplacementDir = vec2(0, 0);
    float displacementLen = lineWidth;

    if (isJoin) {

      // JOIN handling ---------------------------------------------------
      // determine if vertex is on the "outside or "inside" of the join
      bool isOutside = ISOUTSIDE;

      // compute miter join position first
      joinDisplacementDir = normalize(left + right);
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      // compute miter stretch
      if (leftLen > 0.001 && rightLen > 0.001) {
        float nDotSeg = dot(joinDisplacementDir, left);
        displacementLen /= length(nDotSeg * left - joinDisplacementDir);

        // limit displacement of inner vertices
        if (!isOutside) {
          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
        }
      }

      if (isOutside && (displacementLen > miterLimit * lineWidth)) {
    `);B.roundJoins?M.vertex.code.add(A.glsl`
        vec2 startDir;
        vec2 endDir;

        if (leftLen < 0.001) {
          startDir = right;
        }
        else{
          startDir = left;
        }
        startDir = normalize(startDir);
        startDir = PERPENDICULAR(startDir);

        if (rightLen < 0.001) {
          endDir = left;
        }
        else{
          endDir = right;
        }
        endDir = normalize(endDir);
        endDir = PERPENDICULAR(endDir);

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);
      `):M.vertex.code.add(A.glsl`
        // convert to bevel join if miterLimit is exceeded
        if (leftLen < 0.001) {
          joinDisplacementDir = right;
        }
        else if (rightLen < 0.001) {
          joinDisplacementDir = left;
        }
        else {
          joinDisplacementDir = isStartVertex ? right : left;
        }
        joinDisplacementDir = normalize(joinDisplacementDir);
        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
  `);M.vertex.code.add(A.glsl`
        displacementLen = lineWidth;
      }
    } else {
    // CAP handling ---------------------------------------------------
    if (leftLen < 0.001) {
      joinDisplacementDir = right;
    }
    else if (rightLen < 0.001) {
      joinDisplacementDir = left;
    }
    else {
      joinDisplacementDir = isStartVertex ? right : left;
    }
    joinDisplacementDir = normalize(joinDisplacementDir);
    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
    displacementLen = lineWidth;

    capDisplacementDir = isStartVertex ? -right : left;
  `);B.roundCaps?M.vertex.code.add(A.glsl`
    float angle = subdivisionFactor*PI*0.5;
    joinDisplacementDir *= cos(angle);
    capDisplacementDir *= sin(angle);
    `):M.vertex.code.add(A.glsl`
    capDisplacementDir *= subdivisionFactor;
    `);M.vertex.code.add(A.glsl`
  }

  // Displacement (in pixels) caused by join/or cap
  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

  ${N||z?A.glsl`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:""}

  ${z?A.glsl`vLineDistance = lineDist;`:""}
  ${N?A.glsl`vLineDistanceNorm = lineDist / lineWidth;`:""}

  pos.xy += dpos;
  `);B.stippleEnabled&&(M.vertex.code.add(A.glsl`
    {
      // Compute the stipple pattern UV coordinate from the actual position, based on the origin
      // and direction of the line segment on which the stipple pattern is based.

      // Project the vector from the origin of the segment to the vertex onto the line segment.
      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)
      vec2 posVec = pos.xy - stippleSegmentOrigin;

      float stippleSegmentDirectionLength = length(stippleSegmentDirection);
    `),B.stippleIntegerRepeatsEnabled&&M.vertex.code.add(A.glsl`
      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;
      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);
      stipplePatternUvMax = roundedNumberOfPatternRepeats;
      `),M.vertex.code.add(A.glsl`
      if (stippleSegmentDirectionLength >= 0.001) {
        // Project the vertex position onto the line segment.
        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;
     ${B.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale \x3d roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale \x3d 1.0;"}
        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;
        } else {
          stipplePatternUv = 1.0;
        }
      }
    `));M.vertex.code.add(A.glsl`
      // Convert back into NDC
      pos.xy = pos.xy / screenSize * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      gl_Position = pos;
    }
  }
  `);M.include(I.Slice,B);M.fragment.uniforms.add("intrinsicColor","vec4");M.fragment.include(S.ColorConversion);M.fragment.code.add(A.glsl`
  void main() {
    discardBySlice(vpos);
    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, STIPPLE_ALPHA_COLOR_DISCARD);

    vec4 color = intrinsicColor * vColor;
  `);B.innerColorEnabled&&(M.fragment.uniforms.add("pixelRatio","float"),M.fragment.code.add(A.glsl`
    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);
    `));M.fragment.code.add(A.glsl`
    vec4 finalColor = blendStipple(color, stippleAlpha);
  `);B.falloffEnabled&&M.fragment.code.add(A.glsl`
    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);
    `);M.fragment.code.add(A.glsl`
    if (finalColor.a < ${A.glsl.float(t.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===B.output?A.glsl`gl_FragColor = vec4(finalColor.a);`:""}
    ${0===B.output?A.glsl`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${0===B.output&&B.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    ${4===B.output?A.glsl`gl_FragColor = vec4(1.0);`:""}
    ${1===B.output?A.glsl`outputDepth(linearDepth);`:""}
  }
  `);return M}var D=Object.freeze({__proto__:null,build:u});q.RibbonLineShader=D;q.build=u})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Logger"],function(q,A,w){const S=w.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");w=function(){function B(){this.includedModules=new Map}B.prototype.include=function(M,N){this.includedModules.has(M)?this.includedModules.get(M)!==
N&&S.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(M,N),M(this.builder,N))};return B}();let I=function(B){function M(){var N=B.apply(this,arguments)||this;N.vertex=new v;N.fragment=new v;N.attributes=new G;N.varyings=new y;N.extensions=new u;N.defines=new D;return N}A._inheritsLoose(M,B);M.prototype.generateSource=function(N){const z=this.extensions.generateSource(N),E=this.attributes.generateSource(N),r=this.varyings.generateSource();
var C="vertex"===N?this.vertex:this.fragment;const O=C.uniforms.generateSource(),P=C.code.generateSource();N="vertex"===N?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";C=this.defines.generateSource().concat(C.defines.generateSource());return`
${z.join("\n")}

${C.join("\n")}

${N}

${O.join("\n")}

${E.join("\n")}

${r.join("\n")}

${P.join("\n")}`};A._createClass(M,[{key:"builder",get:function(){return this}}]);return M}(w),t=function(){function B(){this._entries=[];this._set=new Set}var M=B.prototype;M.add=function(N,z,E){const r=`${N}_${z}_${E}`;this._set.has(r)||(this._entries.push([N,z,E]),this._set.add(r));return this};M.generateSource=function(){return this._entries.map(N=>{var z=N[2];return`uniform ${N[1]} ${N[0]}${z?`[${z}]`:""};`})};return B}(),H=function(){function B(){this._entries=[]}var M=B.prototype;M.add=function(N){this._entries.push(N)};
M.generateSource=function(){return this._entries};return B}(),v=function(B){function M(){var N=B.apply(this,arguments)||this;N.uniforms=new t;N.code=new H;N.defines=new D;return N}A._inheritsLoose(M,B);A._createClass(M,[{key:"builder",get:function(){return this}}]);return M}(w),G=function(){function B(){this._entries=[]}var M=B.prototype;M.add=function(N,z){this._entries.push([N,z])};M.generateSource=function(N){return"fragment"===N?[]:this._entries.map(z=>`attribute ${z[1]} ${z[0]};`)};return B}(),
y=function(){function B(){this._entries=[]}var M=B.prototype;M.add=function(N,z){this._entries.push([N,z])};M.generateSource=function(){return this._entries.map(N=>`varying ${N[1]} ${N[0]};`)};return B}(),u=function(){function B(){this._entries=new Set}var M=B.prototype;M.add=function(N){this._entries.add(N)};M.generateSource=function(N){const z="vertex"===N?B.ALLOWLIST_VERTEX:B.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(E=>z.includes(E)).map(E=>`#extension ${E} : enable`)};return B}();
u.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];u.ALLOWLIST_VERTEX=[];let D=function(){function B(){this._entries=new Map}var M=B.prototype;M.addInt=function(N,z){z=0===z%1?z.toFixed(0):z.toString();this._entries.set(N,z)};M.addFloat=function(N,z){z=0===z%1?z.toFixed(1):z.toString();this._entries.set(N,z)};M.generateSource=function(){return Array.from(this._entries,([N,z])=>`#define ${N} ${z}`)};return B}();q.Code=H;q.Includes=w;q.ShaderBuilder=I;q.Stage=v;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.ColorConversion=function(w){w.code.add(A.glsl`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.DiscardOrAdjustAlpha=function(w,S){const I=w.fragment;switch(S.alphaDiscardMode){case 0:I.code.add(A.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < ${A.glsl.float(.001)}) { discard; } }
      `);break;case 1:I.code.add(A.glsl`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:I.uniforms.add("textureAlphaCutoff","float");I.code.add(A.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:w.fragment.uniforms.add("textureAlphaCutoff","float"),w.fragment.code.add(A.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}};q.defaultMaskAlphaCutoff=.1;q.symbolAlphaCutoff=.001;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/RgbaFloatEncoding.glsl"],function(q,A,w){q.OutputDepth=function(S,I){S.fragment.include(w.RgbaFloatEncoding);3===I.output?(S.extensions.add("GL_OES_standard_derivatives"),S.fragment.code.add(A.glsl`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===I.output&&S.fragment.code.add(A.glsl`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.RgbaFloatEncoding=function(w){w.code.add(A.glsl`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.RibbonVertexPosition=function(w,S){w.vertex.uniforms.add("intrinsicWidth","float");S.vvSize?(w.attributes.add("sizeFeatureAttribute","float"),w.vertex.uniforms.add("vvSizeMinSize","vec3"),w.vertex.uniforms.add("vvSizeMaxSize","vec3"),w.vertex.uniforms.add("vvSizeOffset","vec3"),
w.vertex.uniforms.add("vvSizeFactor","vec3"),w.vertex.code.add(A.glsl`
    float getSize() {
      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
    }
    `)):(w.attributes.add("size","float"),w.vertex.code.add(A.glsl`
    float getSize(){
      return intrinsicWidth * size;
    }
    `));S.vvOpacity?(w.attributes.add("opacityFeatureAttribute","float"),w.vertex.defines.addInt("VV_OPACITY_N",8),w.vertex.code.add(A.glsl`
    uniform float vvOpacityValues[VV_OPACITY_N];
    uniform float vvOpacityOpacities[VV_OPACITY_N];

    float interpolateOpacity( float value ){
      if (value <= vvOpacityValues[0]) {
        return vvOpacityOpacities[0];
      }

      for (int i = 1; i < VV_OPACITY_N; ++i) {
        if (vvOpacityValues[i] >= value) {
          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
        }
      }

      return vvOpacityOpacities[VV_OPACITY_N - 1];
    }

    vec4 applyOpacity( vec4 color ){
      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
    }
    `)):w.vertex.code.add(A.glsl`
    vec4 applyOpacity( vec4 color ){
      return color;
    }
    `);S.vvColor?(w.attributes.add("colorFeatureAttribute","float"),w.vertex.defines.addInt("VV_COLOR_N",8),w.vertex.code.add(A.glsl`
    uniform float vvColorValues[VV_COLOR_N];
    uniform vec4 vvColorColors[VV_COLOR_N];

    vec4 interpolateColor( float value ) {
      if (value <= vvColorValues[0]) {
        return vvColorColors[0];
      }

      for (int i = 1; i < VV_COLOR_N; ++i) {
        if (vvColorValues[i] >= value) {
          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
          return mix(vvColorColors[i-1], vvColorColors[i], f);
        }
      }

      return vvColorColors[VV_COLOR_N - 1];
    }

    vec4 getColor(){
      return applyOpacity(interpolateColor(colorFeatureAttribute));
    }
    `)):(w.attributes.add("color","vec4"),w.vertex.code.add(A.glsl`
    vec4 getColor(){
      return applyOpacity(color);
    }
    `))};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.LineStipple=function(w,S){w.defines.addFloat("STIPPLE_ALPHA_COLOR_DISCARD",.001);w.defines.addFloat("STIPPLE_ALPHA_HIGHLIGHT_DISCARD",.5);S.stippleEnabled?(w.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),S.stippleUVMaxEnabled&&w.varyings.add("stipplePatternUvMax","float"),w.varyings.add("stipplePatternUv",
"float"),w.fragment.uniforms.add("stipplePatternTexture","sampler2D"),S.stippleOffColorEnabled&&w.fragment.uniforms.add("stippleOffColor","vec4"),w.fragment.code.add(A.glsl`
  float getStippleAlpha() {
    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;
    ${S.stippleUVMaxEnabled?"stipplePatternUvClamped \x3d clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":""}

    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;
  }`),S.stippleOffColorEnabled?w.fragment.code.add(A.glsl`
    #define discardByStippleAlpha(stippleAlpha, threshold) {}
    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)
    `):w.fragment.code.add(A.glsl`
    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)
    `)):w.fragment.code.add(A.glsl`
  float getStippleAlpha() { return 1.0; }

  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
  #define blendStipple(color, _stippleAlpha_) color
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.PiUtils=function(w){w.vertex.code.add(A.glsl`
    const float PI = 3.141592653589793;
  `);w.fragment.code.add(A.glsl`
    const float PI = 3.141592653589793;
    const float LIGHT_NORMALIZATION = 1.0 / PI;
    const float INV_PI = 0.3183098861837907;
    const float HALF_PI = 1.570796326794897;
    `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/vec2 ../../support/buffer/InterleavedLayout ../../support/geometryUtils ../lib/geometryDataUtils ../lib/Util ./renderers/utils ../lib/GLMaterial ../lib/Material ./VisualVariableMaterialParameters ../shaders/RibbonLineTechnique".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r){function C(Na,Oa,Z,ha,Ca){for(let Da=0;Da<Ca;Da++)Z[ha++]=Na[Oa++];return ha}function O(Na,Oa,Z){Z=Z?Z[r.RibbonVertexAttributeConstants.POSITION]:null;return Na.isClosed?Z?2<Z.length:6<Oa[r.RibbonVertexAttributeConstants.POSITION].data.length:!1}const P=S.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");S=function(Na){function Oa(ha,Ca){ha=Na.call(this,Ca,ha,F)||this;ha._vertexAttributeLocations=r.ribbonVertexAttributeLocations;ha.techniqueConfig=
new r.RibbonLineTechniqueConfiguration;ha.layout=ha.createLayout();return ha}A._inheritsLoose(Oa,Na);var Z=Oa.prototype;Z.isClosed=function(ha,Ca){return this.params.isClosed?Ca?2<Ca.length:6<ha.length:!1};Z.dispose=function(){};Z.getPassParameters=function(){return this.params};Z.getTechniqueConfig=function(ha,Ca){this.techniqueConfig.output=ha;ha=w.isSome(this.params.stipplePattern);this.techniqueConfig.stippleEnabled=ha;this.techniqueConfig.stippleIntegerRepeatsEnabled=ha&&this.params.stippleIntegerRepeats;
this.techniqueConfig.stippleOffColorEnabled=ha&&w.isSome(this.params.stippleOffColor);this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.roundJoins="round"===this.params.join;this.techniqueConfig.roundCaps="round"===this.params.cap;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;
this.techniqueConfig.vvColor=this.params.vvColorEnabled;this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled;this.techniqueConfig.vvSize=this.params.vvSizeEnabled;this.techniqueConfig.innerColorEnabled=0<this.params.innerWidth&&w.isSome(this.params.innerColor);this.techniqueConfig.falloffEnabled=0<this.params.falloff;this.techniqueConfig.occluder=8===this.params.renderOccluded;this.techniqueConfig.transparencyPassType=Ca?Ca.transparencyPassType:3;return this.techniqueConfig};Z.intersect=function(ha,
Ca,Da,Ja,Fa,fa,wa,ia,ra){ra?this.intersectDrapedLineGeometry(ha,Ja,fa,wa):this.intersectLineGeometry(ha,Ca,Da,Ja,this.params.width,wa)};Z.intersectDrapedLineGeometry=function(ha,Ca,Da,Ja){if(Ca.options.selectionMode){Ca=ha.getAttribute(r.RibbonVertexAttributeConstants.POSITION).data;var Fa=ha.getAttribute(r.RibbonVertexAttributeConstants.SIZE),fa=this.params.width;this.params.vvSizeEnabled?(Fa=ha.getAttribute(r.RibbonVertexAttributeConstants.SIZEFEATUREATTRIBUTE).data[0],fa*=I.clamp(this.params.vvSizeOffset[0]+
Fa*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])):Fa&&(fa*=Fa.data[0]);Fa=Da[0];Da=Da[1];ha=(fa/2+4)*ha.screenToWorldRatio;fa=Number.MAX_VALUE;for(let ya=0;ya<Ca.length-5;ya+=3){var wa=Ca[ya],ia=Ca[ya+1],ra=Fa-wa,xa=Da-ia;wa=Ca[ya+3]-wa;ia=Ca[ya+4]-ia;const Ka=I.clamp((wa*ra+ia*xa)/(wa*wa+ia*ia),0,1);ra=wa*Ka-ra;xa=ia*Ka-xa;xa=ra*ra+xa*xa;xa<fa&&(fa=xa)}fa<ha*ha&&Ja()}};Z.intersectLineGeometry=function(ha,Ca,Da,Ja,Fa,fa){if(Ja.options.selectionMode&&!M.isInstanceHidden(Ca))if(B.isTranslationMatrix(Da)){var wa=
ha.data,ia=wa.getVertexAttr();ha=ia[r.RibbonVertexAttributeConstants.POSITION].data;this.params.vvSizeEnabled?Fa*=I.clamp(this.params.vvSizeOffset[0]+ia[r.RibbonVertexAttributeConstants.SIZEFEATUREATTRIBUTE].data[0]*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0]):ia[r.RibbonVertexAttributeConstants.SIZE]&&(Fa*=ia[r.RibbonVertexAttributeConstants.SIZE].data[0]);Ca=Ja.camera;var ra=aa;G.copy(ra,Ja.point);Fa=Fa*Ca.pixelRatio/2+4*Ca.pixelRatio;v.set(pa[0],ra[0]-
Fa,ra[1]+Fa,0);v.set(pa[1],ra[0]+Fa,ra[1]+Fa,0);v.set(pa[2],ra[0]+Fa,ra[1]-Fa,0);v.set(pa[3],ra[0]-Fa,ra[1]-Fa,0);for(var xa=0;4>xa;xa++)if(!Ca.unprojectFromRenderScreen(pa[xa],va[xa]))return;u.plane.fromPoints(Ca.eye,va[0],va[1],ja);u.plane.fromPoints(Ca.eye,va[1],va[2],ua);u.plane.fromPoints(Ca.eye,va[2],va[3],Aa);u.plane.fromPoints(Ca.eye,va[3],va[0],Ga);xa=Number.MAX_VALUE;wa=O(this.params,ia,wa.indices)?ha.length-2:ha.length-5;for(ia=0;ia<wa;ia+=3){J[0]=ha[ia]+Da[12];J[1]=ha[ia+1]+Da[13];J[2]=
ha[ia+2]+Da[14];var ya=(ia+3)%ha.length;L[0]=ha[ya]+Da[12];L[1]=ha[ya+1]+Da[13];L[2]=ha[ya+2]+Da[14];if(!(0>u.plane.signedDistance(ja,J)&&0>u.plane.signedDistance(ja,L)||0>u.plane.signedDistance(ua,J)&&0>u.plane.signedDistance(ua,L)||0>u.plane.signedDistance(Aa,J)&&0>u.plane.signedDistance(Aa,L)||0>u.plane.signedDistance(Ga,J)&&0>u.plane.signedDistance(Ga,L))){Ca.projectToRenderScreen(J,oa);Ca.projectToRenderScreen(L,ta);if(0>oa[2]&&0<ta[2])v.subtract(Y,J,L),ya=Ca.frustum,ya=-u.plane.signedDistance(ya.planes[4],
J)/v.dot(Y,u.plane.normal(ya.planes[4])),v.scale(Y,Y,ya),v.add(J,J,Y),Ca.projectToRenderScreen(J,oa);else if(0<oa[2]&&0>ta[2])v.subtract(Y,L,J),ya=Ca.frustum,ya=-u.plane.signedDistance(ya.planes[4],L)/v.dot(Y,u.plane.normal(ya.planes[4])),v.scale(Y,Y,ya),v.add(L,L,Y),Ca.projectToRenderScreen(L,ta);else if(0>oa[2]&&0>ta[2])continue;oa[2]=0;ta[2]=0;ya=u.lineSegment.distance2(u.lineSegment.fromPoints(oa,ta,U),ra);ya<xa&&(xa=ya,v.copy(la,J),v.copy(X,L))}}Da=Ja.rayBeginPoint;Ja=Ja.rayEndPoint;xa<Fa*Fa&&
(ha=Number.MAX_VALUE,u.lineSegment.closestLineSegmentPoint(u.lineSegment.fromPoints(la,X,U),u.lineSegment.fromPoints(Da,Ja,ka),W)&&(v.subtract(W,W,Da),ha=v.length(W),v.scale(W,W,1/ha),ha/=v.distance(Da,Ja)),fa(ha,W))}else P.error("intersection assumes a translation-only matrix")};Z.computeAttachmentOrigin=function(ha,Ca){var Da=ha.data;ha="getVertexAttr"in Da?Da.getVertexAttr():"vertexAttr"in Da?Da.vertexAttr:null;if(!ha)return null;const Ja=r.RibbonVertexAttributeConstants.POSITION;Da="getVertexAttr"in
Da?Da.indices:null;return D.computeAttachmentOriginLines(ha[Ja],Da?Da[Ja]:null,Da&&O(this.params,ha,Da),Ca)};Z.createLayout=function(){const ha=y.newLayout().vec3f(r.RibbonVertexAttributeConstants.POSITION).f32(r.RibbonVertexAttributeConstants.SUBDIVISIONFACTOR).vec2f(r.RibbonVertexAttributeConstants.UV0).vec3f(r.RibbonVertexAttributeConstants.AUXPOS1).vec3f(r.RibbonVertexAttributeConstants.AUXPOS2);this.params.vvSizeEnabled?ha.f32(r.RibbonVertexAttributeConstants.SIZEFEATUREATTRIBUTE):ha.f32(r.RibbonVertexAttributeConstants.SIZE);
this.params.vvColorEnabled?ha.f32(r.RibbonVertexAttributeConstants.COLORFEATUREATTRIBUTE):ha.vec4f(r.RibbonVertexAttributeConstants.COLOR);this.params.vvOpacityEnabled&&ha.f32(r.RibbonVertexAttributeConstants.OPACITYFEATUREATTRIBUTE);return ha};Z.createBufferWriter=function(){return new K(this.layout,this.params)};Z.getGLMaterial=function(ha){return 0===ha.output||7===ha.output||4===ha.output||1===ha.output?new T(ha):void 0};Z.validateParameterValues=function(ha){"miter"!==ha.join&&(ha.miterLimit=
0);this.requiresTransparent(ha)&&(ha.transparent=!0)};Z.requiresTransparent=function(ha){return!!(1>(ha.color&&ha.color[3])||0<ha.innerWidth&&this.colorRequiresTransparent(ha.innerColor)||ha.stipplePattern&&this.colorRequiresTransparent(ha.stippleOffColor)||0<ha.falloff)};Z.colorRequiresTransparent=function(ha){return w.isSome(ha)&&1>ha[3]&&0<ha[3]};return Oa}(z.Material);let T=function(Na){function Oa(ha){ha=Na.call(this,ha)||this;ha.updateParameters();return ha}A._inheritsLoose(Oa,Na);var Z=Oa.prototype;
Z.updateParameters=function(ha){this.technique=this.techniqueRep.acquireAndReleaseExisting(r.RibbonLineTechnique,this.material.getTechniqueConfig(this.output,ha),this.technique)};Z.beginSlot=function(ha){return this.technique.configuration.occluder?3===ha||10===ha||11===ha:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,ha===this.targetSlot):3===ha};Z._updateOccludeeState=function(ha){ha.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:ha.hasOccludees})};
Z.ensureParameters=function(ha){0!==this.output&&7!==this.output||this._updateOccludeeState(ha);this.updateParameters(ha)};Z.bind=function(ha,Ca){ha.bindProgram(this.technique.program);this.technique.bindPass(ha,this.material.getPassParameters(),Ca)};Z.getPipelineState=function(ha,Ca){return this.technique.getPipelineState(ha,Ca)};return Oa}(N);const F={width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,
slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...z.materialParametersDefaults,...E.Default};let K=function(){function Na(Z,ha){this.params=ha;this.numJoinSubdivisions=0;this.vertexBufferLayout=Z;switch(this.params.join){case "miter":case "bevel":this.numJoinSubdivisions=ha.stipplePattern?1:0;break;case "round":this.numJoinSubdivisions=1}}var Oa=Na.prototype;Oa.isClosed=function(Z){return O(this.params,Z.vertexAttr,Z.indices)};
Oa.numCapSubdivisions=function(Z){if(this.isClosed(Z))return 0;switch(this.params.cap){case "butt":return 0;case "square":return 1;case "round":return 3}};Oa.allocate=function(Z){return this.vertexBufferLayout.createBuffer(Z)};Oa.elementCount=function(Z){var ha=2*this.numCapSubdivisions(Z)+2,Ca=Z.indices[r.RibbonVertexAttributeConstants.POSITION].length/2+1;const Da=this.isClosed(Z);ha=Da?2:2*ha;var Ja=Da?0:1;Ca=Da?Ca:Ca-1;if(Z.vertexAttr[r.RibbonVertexAttributeConstants.SUBDIVISIONS])for(Z=Z.vertexAttr[r.RibbonVertexAttributeConstants.SUBDIVISIONS].data;Ja<
Ca;++Ja)ha+=4+2*Z[Ja];else ha+=(Ca-Ja)*(2*this.numJoinSubdivisions+4);return ha+2};Oa.write=function(Z,ha,Ca,Da){const Ja=sa,Fa=qa,fa=na;var wa=ha.vertexAttr[r.RibbonVertexAttributeConstants.POSITION].data,ia=ha.indices&&ha.indices[r.RibbonVertexAttributeConstants.POSITION];const ra=this.numCapSubdivisions(ha);ia&&ia.length!==2*(wa.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");ia=null;ha.vertexAttr[r.RibbonVertexAttributeConstants.SUBDIVISIONS]&&(ia=ha.vertexAttr[r.RibbonVertexAttributeConstants.SUBDIVISIONS].data);
let xa=1,ya=0;this.params.vvSizeEnabled?ya=ha.vertexAttr[r.RibbonVertexAttributeConstants.SIZEFEATUREATTRIBUTE].data[0]:ha.vertexAttr[r.RibbonVertexAttributeConstants.SIZE]&&(xa=ha.vertexAttr[r.RibbonVertexAttributeConstants.SIZE].data[0]);let Ka=[1,1,1,1],Ha=0;this.params.vvColorEnabled?Ha=ha.vertexAttr[r.RibbonVertexAttributeConstants.COLORFEATUREATTRIBUTE].data[0]:ha.vertexAttr[r.RibbonVertexAttributeConstants.COLOR]&&(Ka=ha.vertexAttr[r.RibbonVertexAttributeConstants.COLOR].data);let La=0;this.params.vvOpacityEnabled&&
(La=ha.vertexAttr[r.RibbonVertexAttributeConstants.OPACITYFEATUREATTRIBUTE].data[0]);const Ia=wa.length/3;Z=Z.transformation;const f=new Float32Array(Ca.buffer);Ca=this.vertexBufferLayout.stride/4;let R=Da*Ca;Da=R;const l=(d,e,g,h,k,m,n)=>{f[R++]=e[0];f[R++]=e[1];f[R++]=e[2];f[R++]=h;f[R++]=k;f[R++]=m;f[R++]=d[0];f[R++]=d[1];f[R++]=d[2];f[R++]=g[0];f[R++]=g[1];f[R++]=g[2];this.params.vvSizeEnabled?f[R++]=ya:f[R++]=xa;this.params.vvColorEnabled?f[R++]=Ha:(d=Math.min(4*n,Ka.length-4),f[R++]=Ka[d+0],
f[R++]=Ka[d+1],f[R++]=Ka[d+2],f[R++]=Ka[d+3]);this.params.vvOpacityEnabled&&(f[R++]=La)};R+=Ca;v.set(Fa,wa[0],wa[1],wa[2]);Z&&v.transformMat4(Fa,Fa,Z);if(ha=this.isClosed(ha)){var c=wa.length-3;v.set(Ja,wa[c],wa[c+1],wa[c+2]);Z&&v.transformMat4(Ja,Ja,Z)}else{v.copy(Ja,Fa);v.set(fa,wa[3],wa[4],wa[5]);Z&&v.transformMat4(fa,fa,Z);for(c=0;c<ra;++c){var a=1-c/ra;l(Ja,Fa,fa,a,1,-4,0);l(Ja,Fa,fa,a,1,4,0)}l(Ja,Fa,fa,0,0,-4,0);l(Ja,Fa,fa,0,0,4,0);v.copy(Ja,Fa);v.copy(Fa,fa)}a=ha?0:1;for(c=ha?Ia:Ia-1;a<c;a++){var b=
(a+1)%Ia*3;v.set(fa,wa[b+0],wa[b+1],wa[b+2]);Z&&v.transformMat4(fa,fa,Z);l(Ja,Fa,fa,0,1,-1,a);l(Ja,Fa,fa,0,1,1,a);b=ia?ia[a]:this.numJoinSubdivisions;for(let d=0;d<b;++d){const e=(d+1)/(b+1);l(Ja,Fa,fa,e,1,-2,a);l(Ja,Fa,fa,e,1,2,a)}l(Ja,Fa,fa,1,0,-2,a);l(Ja,Fa,fa,1,0,2,a);v.copy(Ja,Fa);v.copy(Fa,fa)}if(ha)R=C(f,Da+Ca,f,R,2*Ca);else for(l(Ja,Fa,fa,0,1,-5,c),l(Ja,Fa,fa,0,1,5,c),wa=0;wa<ra;++wa)ia=(wa+1)/ra,l(Ja,Fa,fa,ia,1,-5,c),l(Ja,Fa,fa,ia,1,5,c);C(f,Da+Ca,f,Da,Ca);R=C(f,R-Ca,f,R,Ca)};return Na}();
const J=H.create(),L=H.create(),Y=H.create(),W=H.create(),aa=H.create(),oa=t.createRenderScreenPointArray3(),ta=t.createRenderScreenPointArray3(),la=H.create(),X=H.create(),U=u.lineSegment.create(),ka=u.lineSegment.create(),sa=H.create(),qa=H.create(),na=H.create(),pa=[t.createRenderScreenPointArray3(),t.createRenderScreenPointArray3(),t.createRenderScreenPointArray3(),t.createRenderScreenPointArray3()],va=[H.create(),H.create(),H.create(),H.create()],ja=u.plane.create(),ua=u.plane.create(),Aa=u.plane.create(),
Ga=u.plane.create();q.RibbonLineMaterial=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./BufferView","./types"],function(q,A,w,S){let I=function(){function H(G,y){this.layout=G;this.buffer="number"===typeof y?new ArrayBuffer(y*G.stride):y;for(const u of G.fieldNames)y=G.fields.get(u),this[u]=new y.constructor(this.buffer,y.offset,this.stride)}var v=H.prototype;v.getField=
function(G,y){return(G=this[G])&&G.elementCount===y.ElementCount&&G.elementType===y.ElementType?G:null};v.slice=function(G,y){return new H(this.layout,this.buffer.slice(G*this.stride,y*this.stride))};v.copyFrom=function(G,y,u,D){const B=this.stride;0===B%4?(G=new Uint32Array(G.buffer,y*B,D*B/4),(new Uint32Array(this.buffer,u*B,D*B/4)).set(G)):(G=new Uint8Array(G.buffer,y*B,D*B),(new Uint8Array(this.buffer,u*B,D*B)).set(G))};A._createClass(H,[{key:"stride",get:function(){return this.layout.stride}},
{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);return H}(),t=function(){function H(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var v=H.prototype;v.vec2f=function(G,y){this.appendField(G,w.BufferViewVec2f,y);return this};v.vec2f64=function(G,y){this.appendField(G,w.BufferViewVec2f64,y);return this};v.vec3f=function(G,y){this.appendField(G,w.BufferViewVec3f,y);return this};v.vec3f64=function(G,y){this.appendField(G,
w.BufferViewVec3f64,y);return this};v.vec4f=function(G,y){this.appendField(G,w.BufferViewVec4f,y);return this};v.vec4f64=function(G,y){this.appendField(G,w.BufferViewVec4f64,y);return this};v.mat3f=function(G,y){this.appendField(G,w.BufferViewMat3f,y);return this};v.mat3f64=function(G,y){this.appendField(G,w.BufferViewMat3f64,y);return this};v.mat4f=function(G,y){this.appendField(G,w.BufferViewMat4f,y);return this};v.mat4f64=function(G,y){this.appendField(G,w.BufferViewMat4f64,y);return this};v.vec4u8=
function(G,y){this.appendField(G,w.BufferViewVec4u8,y);return this};v.f32=function(G,y){this.appendField(G,w.BufferViewFloat,y);return this};v.f64=function(G,y){this.appendField(G,w.BufferViewFloat64,y);return this};v.u8=function(G,y){this.appendField(G,w.BufferViewUint8,y);return this};v.u16=function(G,y){this.appendField(G,w.BufferViewUint16,y);return this};v.i8=function(G,y){this.appendField(G,w.BufferViewInt8,y);return this};v.vec2i8=function(G,y){this.appendField(G,w.BufferViewVec2i8,y);return this};
v.vec2i16=function(G,y){this.appendField(G,w.BufferViewVec2i16,y);return this};v.vec2u8=function(G,y){this.appendField(G,w.BufferViewVec2u8,y);return this};v.vec4u16=function(G,y){this.appendField(G,w.BufferViewVec4u16,y);return this};v.u32=function(G,y){this.appendField(G,w.BufferViewUint32,y);return this};v.appendField=function(G,y,u){const D=y.ElementCount*S.elementTypeSize(y.ElementType);this.fields.set(G,{size:D,constructor:y,offset:this.stride,optional:u});this.stride+=D;this.fieldNames.push(G)};
v.alignTo=function(G){this.stride=Math.floor((this.stride+G-1)/G)*G;return this};v.hasField=function(G){return 0<=this.fieldNames.indexOf(G)};v.createBuffer=function(G){return new I(this,G)};v.createView=function(G){return new I(this,G)};v.clone=function(){const G=new H;G.stride=this.stride;G.fields=new Map;this.fields.forEach((y,u)=>G.fields.set(u,y));G.fieldNames=this.fieldNames.slice();G.BufferType=this.BufferType;return G};return H}();q.InterleavedBuffer=I;q.InterleavedLayout=t;q.newLayout=function(){return new t};
Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/BufferView":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(q,A,w,S,I,t,H,v){let G=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);G.ElementType="f32";let y=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);y.ElementType="f32";let u=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;
ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);u.ElementType="f32";let D=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);D.ElementType=
"f32";let B=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(w.BufferViewMat3Impl);B.ElementType="f32";w=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType="f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(w.BufferViewMat3Impl);w.ElementType="f64";let M=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float32Array,ja,ua,Aa,Ga)||this;ja.elementType="f32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(S.BufferViewMat4Impl);M.ElementType="f32";S=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType=
"f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(S.BufferViewMat4Impl);S.ElementType="f64";let N=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType="f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);N.ElementType=
"f64";let z=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType="f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);z.ElementType="f64";let E=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType="f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);E.ElementType="f64";let r=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Float64Array,ja,ua,Aa,Ga)||this;ja.elementType="f64";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);r.ElementType="f64";let C=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint8Array,ja,ua,Aa,Ga)||this;ja.elementType=
"u8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);C.ElementType="u8";let O=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint8Array,ja,ua,Aa,Ga)||this;ja.elementType="u8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);O.ElementType="u8";
let P=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint8Array,ja,ua,Aa,Ga)||this;ja.elementType="u8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);P.ElementType="u8";let T=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint8Array,ja,ua,Aa,Ga)||this;ja.elementType="u8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);T.ElementType="u8";let F=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint16Array,ja,ua,Aa,Ga)||this;ja.elementType="u16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);F.ElementType="u16";let K=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint16Array,ja,ua,Aa,Ga)||this;ja.elementType=
"u16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);K.ElementType="u16";let J=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint16Array,ja,ua,Aa,Ga)||this;ja.elementType="u16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);J.ElementType="u16";
let L=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint16Array,ja,ua,Aa,Ga)||this;ja.elementType="u16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);L.ElementType="u16";let Y=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint32Array,ja,ua,Aa,Ga)||this;ja.elementType="u32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);Y.ElementType="u32";let W=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint32Array,ja,ua,Aa,Ga)||this;ja.elementType="u32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);W.ElementType="u32";let aa=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint32Array,ja,ua,Aa,Ga)||this;
ja.elementType="u32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);aa.ElementType="u32";let oa=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Uint32Array,ja,ua,Aa,Ga)||this;ja.elementType="u32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);
oa.ElementType="u32";let ta=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int8Array,ja,ua,Aa,Ga)||this;ja.elementType="i8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);ta.ElementType="i8";let la=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int8Array,ja,ua,Aa,Ga)||this;ja.elementType="i8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,
ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);la.ElementType="i8";let X=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int8Array,ja,ua,Aa,Ga)||this;ja.elementType="i8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);X.ElementType="i8";let U=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int8Array,
ja,ua,Aa,Ga)||this;ja.elementType="i8";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);U.ElementType="i8";let ka=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int16Array,ja,ua,Aa,Ga)||this;ja.elementType="i16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);
ka.ElementType="i16";let sa=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int16Array,ja,ua,Aa,Ga)||this;ja.elementType="i16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);sa.ElementType="i16";let qa=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int16Array,ja,ua,Aa,Ga)||this;ja.elementType="i16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,
ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);qa.ElementType="i16";let na=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int16Array,ja,ua,Aa,Ga)||this;ja.elementType="i16";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);na.ElementType="i16";I=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int32Array,
ja,ua,Aa,Ga)||this;ja.elementType="i32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(I.BufferViewScalarImpl);I.ElementType="i32";t=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int32Array,ja,ua,Aa,Ga)||this;ja.elementType="i32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(t.BufferViewVec2Impl);
t.ElementType="i32";H=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int32Array,ja,ua,Aa,Ga)||this;ja.elementType="i32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(H.BufferViewVec3Impl);H.ElementType="i32";v=function(pa){function va(ja,ua=0,Aa,Ga){ja=pa.call(this,Int32Array,ja,ua,Aa,Ga)||this;ja.elementType="i32";return ja}A._inheritsLoose(va,pa);va.fromTypedArray=function(ja,ua){return new va(ja.buffer,
ja.byteOffset,ua,ja.byteOffset+ja.byteLength)};return va}(v.BufferViewVec4Impl);v.ElementType="i32";q.BufferViewFloat=G;q.BufferViewFloat64=N;q.BufferViewInt16=ka;q.BufferViewInt32=I;q.BufferViewInt8=ta;q.BufferViewMat3f=B;q.BufferViewMat3f64=w;q.BufferViewMat4f=M;q.BufferViewMat4f64=S;q.BufferViewUint16=F;q.BufferViewUint32=Y;q.BufferViewUint8=C;q.BufferViewVec2f=y;q.BufferViewVec2f64=z;q.BufferViewVec2i16=sa;q.BufferViewVec2i32=t;q.BufferViewVec2i8=la;q.BufferViewVec2u16=K;q.BufferViewVec2u32=W;
q.BufferViewVec2u8=O;q.BufferViewVec3f=u;q.BufferViewVec3f64=E;q.BufferViewVec3i16=qa;q.BufferViewVec3i32=H;q.BufferViewVec3i8=X;q.BufferViewVec3u16=J;q.BufferViewVec3u32=aa;q.BufferViewVec3u8=P;q.BufferViewVec4f=D;q.BufferViewVec4f64=r;q.BufferViewVec4i16=na;q.BufferViewVec4i32=v;q.BufferViewVec4i8=U;q.BufferViewVec4u16=L;q.BufferViewVec4u32=oa;q.BufferViewVec4u8=T;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],
function(q,A){let w=function(){function S(t,H,v=0,G,y){this.TypedArrayConstructor=t;this.elementCount=9;t=this.TypedArrayConstructor;void 0===G&&(G=9*t.BYTES_PER_ELEMENT);const u=0===H.byteLength?0:v;this.typedBuffer=null==y?new t(H,u):new t(H,u,(y-v)/t.BYTES_PER_ELEMENT);this.typedBufferStride=G/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var I=S.prototype;I.getMat=function(t,
H){t*=this.typedBufferStride;for(let v=0;9>v;v++)H[v]=this.typedBuffer[t+v];return H};I.setMat=function(t,H){t*=this.typedBufferStride;for(let v=0;9>v;v++)this.typedBuffer[t+v]=H[v]};I.get=function(t,H){return this.typedBuffer[t*this.typedBufferStride+H]};I.set=function(t,H,v){this.typedBuffer[t*this.typedBufferStride+H]=v};I.copyFrom=function(t,H,v){const G=this.typedBuffer,y=H.typedBuffer;t*=this.typedBufferStride;H=v*H.typedBufferStride;for(v=0;9>v;++v)G[t+v]=y[H+v]};A._createClass(S,[{key:"buffer",
get:function(){return this.typedBuffer.buffer}}]);return S}();w.ElementCount=9;q.BufferViewMat3Impl=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(q,A){let w=function(){function S(t,H,v=0,G,y){this.TypedArrayConstructor=t;this.elementCount=16;t=this.TypedArrayConstructor;void 0===G&&(G=16*t.BYTES_PER_ELEMENT);const u=0===H.byteLength?0:v;this.typedBuffer=null==
y?new t(H,u):new t(H,u,(y-v)/t.BYTES_PER_ELEMENT);this.typedBufferStride=G/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var I=S.prototype;I.getMat=function(t,H){t*=this.typedBufferStride;for(let v=0;16>v;v++)H[v]=this.typedBuffer[t+v];return H};I.setMat=function(t,H){t*=this.typedBufferStride;for(let v=0;16>v;v++)this.typedBuffer[t+v]=H[v]};I.get=function(t,H){return this.typedBuffer[t*
this.typedBufferStride+H]};I.set=function(t,H,v){this.typedBuffer[t*this.typedBufferStride+H]=v};I.copyFrom=function(t,H,v){const G=this.typedBuffer,y=H.typedBuffer;t*=this.typedBufferStride;H=v*H.typedBufferStride;for(v=0;16>v;++v)G[t+v]=y[H+v]};A._createClass(S,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return S}();w.ElementCount=16;q.BufferViewMat4Impl=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Scalar":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers"],function(q,A){let w=function(){function S(t,H,v=0,G,y){this.TypedArrayConstructor=t;this.elementCount=1;t=this.TypedArrayConstructor;void 0===G&&(G=t.BYTES_PER_ELEMENT);const u=0===H.byteLength?0:v;this.typedBuffer=null==y?new t(H,u):new t(H,u,(y-v)/t.BYTES_PER_ELEMENT);this.typedBufferStride=G/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var I=S.prototype;I.get=function(t){return this.typedBuffer[t*this.typedBufferStride]};I.set=function(t,H){this.typedBuffer[t*this.typedBufferStride]=H};A._createClass(S,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return S}();w.ElementCount=1;q.BufferViewScalarImpl=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec2"],function(q,
A,w){let S=function(){function I(H,v,G=0,y,u){this.TypedArrayConstructor=H;this.elementCount=2;H=this.TypedArrayConstructor;void 0===y&&(y=2*H.BYTES_PER_ELEMENT);const D=0===v.byteLength?0:G;this.typedBuffer=null==u?new H(v,D):new H(v,D,(u-G)/H.BYTES_PER_ELEMENT);this.typedBufferStride=y/H.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=I.prototype;t.getVec=function(H,v){return w.set(v,
this.typedBuffer[H*this.typedBufferStride],this.typedBuffer[H*this.typedBufferStride+1])};t.setVec=function(H,v){this.typedBuffer[H*this.typedBufferStride]=v[0];this.typedBuffer[H*this.typedBufferStride+1]=v[1]};t.get=function(H,v){return this.typedBuffer[H*this.typedBufferStride+v]};t.set=function(H,v,G){this.typedBuffer[H*this.typedBufferStride+v]=G};t.setValues=function(H,v,G){this.typedBuffer[H*this.typedBufferStride]=v;this.typedBuffer[H*this.typedBufferStride+1]=G};t.copyFrom=function(H,v,G){const y=
this.typedBuffer,u=v.typedBuffer;H*=this.typedBufferStride;v=G*v.typedBufferStride;y[H]=u[v];y[H+1]=u[v+1]};A._createClass(I,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return I}();S.ElementCount=2;q.BufferViewVec2Impl=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec3"],function(q,A,w){let S=function(){function I(H,v,G=0,
y,u){this.TypedArrayConstructor=H;this.elementCount=3;H=this.TypedArrayConstructor;void 0===y&&(y=3*H.BYTES_PER_ELEMENT);const D=0===v.byteLength?0:G;this.typedBuffer=null==u?new H(v,D):new H(v,D,(u-G)/H.BYTES_PER_ELEMENT);this.typedBufferStride=y/H.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=I.prototype;t.getVec=function(H,v){return w.set(v,this.typedBuffer[H*this.typedBufferStride],
this.typedBuffer[H*this.typedBufferStride+1],this.typedBuffer[H*this.typedBufferStride+2])};t.setVec=function(H,v){this.typedBuffer[H*this.typedBufferStride]=v[0];this.typedBuffer[H*this.typedBufferStride+1]=v[1];this.typedBuffer[H*this.typedBufferStride+2]=v[2]};t.get=function(H,v){return this.typedBuffer[H*this.typedBufferStride+v]};t.set=function(H,v,G){this.typedBuffer[H*this.typedBufferStride+v]=G};t.setValues=function(H,v,G,y){this.typedBuffer[H*this.typedBufferStride]=v;this.typedBuffer[H*
this.typedBufferStride+1]=G;this.typedBuffer[H*this.typedBufferStride+2]=y};t.copyFrom=function(H,v,G){const y=this.typedBuffer,u=v.typedBuffer;H*=this.typedBufferStride;v=G*v.typedBufferStride;y[H]=u[v];y[H+1]=u[v+1];y[H+2]=u[v+2]};A._createClass(I,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return I}();S.ElementCount=3;q.BufferViewVec3Impl=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../chunks/vec4"],function(q,A,w){let S=function(){function I(H,v,G=0,y,u){this.TypedArrayConstructor=H;this.elementCount=4;H=this.TypedArrayConstructor;void 0===y&&(y=4*H.BYTES_PER_ELEMENT);const D=0===v.byteLength?0:G;this.typedBuffer=null==u?new H(v,D):new H(v,D,(u-G)/H.BYTES_PER_ELEMENT);this.typedBufferStride=y/H.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=
I.prototype;t.getVec=function(H,v){return w.set(v,this.typedBuffer[H*this.typedBufferStride],this.typedBuffer[H*this.typedBufferStride+1],this.typedBuffer[H*this.typedBufferStride+2],this.typedBuffer[H*this.typedBufferStride+3])};t.setVec=function(H,v){this.typedBuffer[H*this.typedBufferStride]=v[0];this.typedBuffer[H*this.typedBufferStride+1]=v[1];this.typedBuffer[H*this.typedBufferStride+2]=v[2];this.typedBuffer[H*this.typedBufferStride+3]=v[3]};t.get=function(H,v){return this.typedBuffer[H*this.typedBufferStride+
v]};t.set=function(H,v,G){this.typedBuffer[H*this.typedBufferStride+v]=G};t.setValues=function(H,v,G,y,u){this.typedBuffer[H*this.typedBufferStride]=v;this.typedBuffer[H*this.typedBufferStride+1]=G;this.typedBuffer[H*this.typedBufferStride+2]=y;this.typedBuffer[H*this.typedBufferStride+3]=u};t.copyFrom=function(H,v,G){const y=this.typedBuffer,u=v.typedBuffer;H*=this.typedBufferStride;v=G*v.typedBufferStride;y[H]=u[v];y[H+1]=u[v+1];y[H+2]=u[v+2];y[H+3]=u[v+3]};A._createClass(I,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);
return I}();S.ElementCount=4;q.BufferViewVec4Impl=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/types":function(){define(["exports","../../../../core/has"],function(q,A){q.elementTypeSize=function(w){switch(w){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};q.isInteger=function(w){switch(w){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;
case "f32":case "f64":return!1}};q.isSigned=function(w){switch(w){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};q.maximumValue=function(w){switch(w){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../lib/doublePrecisionUtils".split(" "),
function(q,A,w,S,I,t){const H=new Float64Array(3),v=new Float32Array(6),G=S.create();q.acquireMaterials=function(y,u){const D=new Map;D.set(0,u.acquire(y,0));D.set(1,u.acquire(y,7));D.set(4,u.acquire(y,3));D.set(3,u.acquire(y,2));D.set(2,u.acquire(y,1));D.set(5,u.acquire(y,4));return D};q.addObject3DStateID=function(y,u){A.isNone(y)&&(y=[]);y.push(u);return y};q.calculateTransformRelToOrigin=function(y,u,D){const B=y.origin.vec3;I.setMatrixTranslation3(G,-B[0],-B[1],-B[2]);A.isSome(y.transformation)?
w.multiply(u,G,y.transformation):w.copy(u,G);D&&(w.invert(D,u),w.transpose(D,D))};q.encodeDoubleVec3=function(y,u,D,B,M){H[0]=y.get(u,0);H[1]=y.get(u,1);H[2]=y.get(u,2);t.encodeDoubleArray(H,v,3);D.set(M,0,v[0]);B.set(M,0,v[1]);D.set(M,1,v[2]);B.set(M,1,v[3]);D.set(M,2,v[4]);B.set(M,2,v[5])};q.isInstanceHidden=function(y){return A.isSome(y)?!y.visible:!1};q.releaseMaterials=function(y,u){u.release(y,0);u.release(y,7);u.release(y,3);u.release(y,2);u.release(y,1);u.release(y,4)};q.removeObject3DStateID=
function(y,u){if(A.isNone(y))return y;y=y.filter(D=>D!==u);return 0===y.length?null:y};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["exports"],function(q){function A(I,t,H){for(let v=0;v<H;++v)t[2*v]=I[v],t[2*v+1]=I[v]-t[2*v]}const w=new Float64Array(1),S=new Float32Array(2);q.decodeDoubleArray=function(I,t,H){for(let v=0;v<H;++v)t[v]=I[2*v]+I[2*v+1]};q.encodeDouble=function(I,t){S[0]=I;S[1]=I-S[0];t[0]=S[0];t[1]=S[1]};
q.encodeDoubleArray=A;q.encodeDoubleArraySplit=function(I,t,H,v){for(let G=0;G<v;++G)w[0]=I[G],A(w,S,1),t[G]=S[0],H[G]=S[1]};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./AutoDisposable"],function(q,A){return function(w){function S(t){var H=w.call(this)||this;H.material=t.material;H.techniqueRep=t.techniqueRep;H.output=t.output;return H}q._inheritsLoose(S,w);var I=S.prototype;I.getTechnique=
function(){return this.technique};I.getPipelineState=function(t,H){return this.getTechnique().pipeline};I.ensureResources=function(t){return 2};I.ensureParameters=function(t){};return S}(A.AutoDisposable)})},"esri/views/3d/webgl-engine/lib/AutoDisposable":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(q,A){const w=I=>function(t){function H(){var v=t.apply(this,arguments)||this;v._isDisposed=!1;return v}A._inheritsLoose(H,t);H.prototype.dispose=function(){for(const G of null!=
(v=this._managedDisposables)?v:[]){var v;v=this[G];this[G]=null;v&&"function"===typeof v.dispose&&v.dispose()}this._isDisposed=!0};A._createClass(H,[{key:"isDisposed",get:function(){return this._isDisposed}}]);return H}(I);let S=function(I){function t(){return I.apply(this,arguments)||this}A._inheritsLoose(t,I);return t}(w(function(){return function(){}}()));q.AutoDisposable=S;q.AutoDisposableMixin=w;q.autoDispose=function(){return(I,t)=>{if(!I.hasOwnProperty("_managedDisposables")){var H,v;I._managedDisposables=
null!=(H=null==(v=I._managedDisposables)?void 0:v.slice())?H:[]}I._managedDisposables.unshift(t)}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./DefaultVertexAttributeLocations ./IdGen ../materials/internal/MaterialUtil".split(" "),function(q,A,w,S,I,t){let H=function(){function v(y,u,D){this.supportsEdges=!1;this._visible=!0;this._insertOrder=this._renderPriority=
0;this._vertexAttributeLocations=S.Default3D;this.id=v._idGen.gen(y);this._params=t.copyParameters(u,D);this.validateParameterValues(this._params)}var G=v.prototype;G.dispose=function(){};G.update=function(){return!1};G.setParameterValues=function(y){t.updateParameters(this._params,y)&&(this.validateParameterValues(this._params),this.parametersChanged())};G.validateParameterValues=function(){};G.isVisibleInPass=function(y){return!0};G.isVisible=function(){return this._visible};G.parametersChanged=
function(){w.isSome(this.materialRepository)&&this.materialRepository.materialChanged(this)};A._createClass(v,[{key:"params",get:function(){return this._params}},{key:"visible",get:function(){return this._visible},set:function(y){y!==this._visible&&(this._visible=y,this.parametersChanged())}},{key:"renderOccluded",get:function(){return this.params.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(y){y!==this._renderPriority&&(this._renderPriority=y,this.parametersChanged())}},
{key:"insertOrder",get:function(){return this._insertOrder},set:function(y){y!==this._insertOrder&&(this._insertOrder=y,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}}]);return v}();H._idGen=new I.IdGen;q.Material=H;q.materialParametersDefaults={renderOccluded:1};q.materialPredicate=function(v,G){return v.isVisible()&&v.isVisibleInPass(G.pass)&&0!==(v.renderOccluded&G.renderOccludedMask)};Object.defineProperty(q,"__esModule",{value:!0})})},
"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports"],function(q){q.Default3D={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,uvMapSpace:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,bound1:5,bound2:6,bound3:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/maybe ../../../../../core/mathUtils ../../../../../chunks/vec3f64 ../../../../../chunks/vec3 ../../../../../geometry/support/aaBoundingBox ../../lib/Util ../renderers/utils ../../lib/screenSizePerspectiveUtils".split(" "),
function(q,A,w,S,I,t,H,v,G){function y(J,L,Y,W,aa,oa){var ta=B(L,Y,O);t.setMin(r,J.getBBMin());t.setMax(r,J.getBBMax());A.isSome(aa)&&aa.applyToAabb(r);if(M(r,L,ta,W)){ta=J.getPrimitiveIndices();const la=J.getIndices(),X=J.getPosition(),U=ta?ta.length:la.length/3;if(1E3<U&&(J=J.getChildren(),void 0!==J)){for(ta=0;8>ta;++ta)void 0!==J[ta]&&y(J[ta],L,Y,W,aa,oa);return}u(L,Y,0,U,la,X,ta,aa,oa)}}function u(J,L,Y,W,aa,oa,ta,la,X){if(ta){{const {data:fa,offsetIdx:wa,strideIdx:ia}=oa;oa=J[0];var U=J[1];
J=J[2];var ka=L[0]-oa,sa=L[1]-U;for(L=L[2]-J;Y<W;++Y){var qa=ta[Y],na=3*qa,pa=wa+ia*aa[na++],va=fa[pa++],ja=fa[pa++],ua=fa[pa];pa=wa+ia*aa[na++];var Aa=fa[pa++],Ga=fa[pa++],Na=fa[pa];pa=wa+ia*aa[na];na=fa[pa++];var Oa=fa[pa++];pa=fa[pa];A.isSome(la)&&([va,ja,ua]=la.applyToVertex(va,ja,ua,Y),[Aa,Ga,Na]=la.applyToVertex(Aa,Ga,Na,Y),[na,Oa,pa]=la.applyToVertex(na,Oa,pa,Y));Aa-=va;Ga-=ja;Na-=ua;na-=va;Oa-=ja;pa-=ua;var Z=sa*pa-Oa*L,ha=L*na-pa*ka;const ra=ka*Oa-na*sa;var Ca=Aa*Z+Ga*ha+Na*ra;if(!(Math.abs(Ca)<=
P)){va=oa-va;ja=U-ja;ua=J-ua;Z=va*Z+ja*ha+ua*ra;if(0<Ca){if(0>Z||Z>Ca)continue}else if(0<Z||Z<Ca)continue;ha=ja*Na-Ga*ua;ua=ua*Aa-Na*va;ja=va*Ga-Aa*ja;va=ka*ha+sa*ua+L*ja;if(0<Ca){if(0>va||Z+va>Ca)continue}else if(0<va||Z+va<Ca)continue;ua=(na*ha+Oa*ua+pa*ja)/Ca;0<=ua&&(Aa=D(Aa,Ga,Na,na,Oa,pa,T),X(ua,Aa,qa))}}}}else{var {data:Da,offsetIdx:Ja,strideIdx:Fa}=oa;ta=J[0];oa=J[1];U=J[2];J=L[0]-ta;ka=L[1]-oa;sa=L[2]-U;for(let fa=Y,wa=3*Y;fa<W;++fa)if(na=Ja+Fa*aa[wa++],ja=Da[na++],ua=Da[na++],Na=Da[na],na=
Ja+Fa*aa[wa++],L=Da[na++],Y=Da[na++],qa=Da[na],na=Ja+Fa*aa[wa++],Aa=Da[na++],Ga=Da[na++],na=Da[na],A.isSome(la)&&([ja,ua,Na]=la.applyToVertex(ja,ua,Na,fa),[L,Y,qa]=la.applyToVertex(L,Y,qa,fa),[Aa,Ga,na]=la.applyToVertex(Aa,Ga,na,fa)),L-=ja,Y-=ua,qa-=Na,Aa-=ja,Ga-=ua,na-=Na,pa=ka*na-Ga*sa,va=sa*Aa-na*J,Ca=J*Ga-Aa*ka,Oa=L*pa+Y*va+qa*Ca,!(Math.abs(Oa)<=P)){ja=ta-ja;ua=oa-ua;Na=U-Na;pa=ja*pa+ua*va+Na*Ca;if(0<Oa){if(0>pa||pa>Oa)continue}else if(0<pa||pa<Oa)continue;va=ua*qa-Y*Na;Na=Na*L-qa*ja;ua=ja*Y-
L*ua;ja=J*va+ka*Na+sa*ua;if(0<Oa){if(0>ja||pa+ja>Oa)continue}else if(0<ja||pa+ja<Oa)continue;Na=(Aa*va+Ga*Na+na*ua)/Oa;0<=Na&&(L=D(L,Y,qa,Aa,Ga,na,T),X(Na,L,fa))}}}function D(J,L,Y,W,aa,oa,ta){I.set(F,J,L,Y);I.set(K,W,aa,oa);I.cross(ta,F,K);I.normalize(ta,ta);return ta}function B(J,L,Y){return I.set(Y,1/(L[0]-J[0]),1/(L[1]-J[1]),1/(L[2]-J[2]))}function M(J,L,Y,W){return N(J,L,Y,W,Infinity)}function N(J,L,Y,W,aa){var oa=(J[0]-W-L[0])*Y[0],ta=(J[3]+W-L[0])*Y[0];let la=Math.min(oa,ta);oa=Math.max(oa,
ta);ta=(J[1]-W-L[1])*Y[1];const X=(J[4]+W-L[1])*Y[1];oa=Math.min(oa,Math.max(ta,X));if(0>oa)return!1;la=Math.max(la,Math.min(ta,X));if(la>oa)return!1;ta=(J[2]-W-L[2])*Y[2];J=(J[5]+W-L[2])*Y[2];oa=Math.min(oa,Math.max(ta,J));if(0>oa)return!1;la=Math.max(la,Math.min(ta,J));return la>oa?!1:la<aa}function z(J,L){L=L?z(L):{};for(const Y in J){let W=J[Y];W&&W.forEach&&(W=E(W));null==W&&Y in L||(L[Y]=W)}return L}function E(J){const L=[];J.forEach(Y=>L.push(Y));return L}const r=t.create(),C=H.VertexAttrConstants,
O=S.create(),P=2**-52,T=S.create(),F=S.create(),K=S.create();q.bindScreenSizePerspective=function(J,L,Y){if(J){var W=J.parameters;L.setUniform4f(Y,W.divisor,W.offset,W.minPixelSize,J.paddingPixelsOverride)}};q.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};q.computeInvDir=B;q.computeNormal=D;q.copyParameters=z;q.intersectAabbInvDir=M;q.intersectAabbInvDirBefore=N;q.intersectDrapedRenderLineGeometry=function(J,L,Y,W,aa){if(L.options.selectionMode){L=J.getAttribute(C.POSITION).data;var oa=J.getAttribute(C.SIZE),
ta=Y[0];Y=Y[1];J=(((oa&&oa.data[0])+W)/2+4)*J.screenToWorldRatio;W=Number.MAX_VALUE;for(oa=0;oa<L.length-5;oa+=3){var la=L[oa],X=L[oa+1],U=ta-la,ka=Y-X;la=L[oa+3]-la;X=L[oa+4]-X;const sa=w.clamp((la*U+X*ka)/(la*la+X*X),0,1);U=la*sa-U;ka=X*sa-ka;ka=U*U+ka*ka;ka<W&&(W=ka)}W<J*J&&aa()}};q.intersectTriangleGeometry=function(J,L,Y,W,aa,oa,ta){L=v.isInstanceHidden(L);Y=Y.tolerance;L||(J.boundingInfo?(H.assert("triangle"===J.data.primitiveType),y(J.boundingInfo,W,aa,Y,oa,ta)):(Y=J.getIndices(C.POSITION),
J=J.getAttribute(C.POSITION),u(W,aa,0,Y.length/3,Y,J,void 0,oa,ta)))};q.intersectTriangles=u;q.updateParameters=function(J,L){let Y=!1;for(const W in L){const aa=L[W];void 0!==aa&&(Y=!0,Array.isArray(aa)?J[W]=aa.slice():J[W]=aa)}return Y};q.verticalOffsetAtDistance=function(J,L,Y,W,aa){let oa=(Y.screenLength||0)*J.pixelRatio;aa&&(oa=G.scale(oa,W,L,aa));return w.glClamp(oa*Math.tan(.5*J.fovY)/(.5*J.fullHeight)*L,Y.minWorldLength||0,null!=Y.maxWorldLength?Y.maxWorldLength:Infinity)};Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils"],function(q,A,w){function S(u,D,B){const M=B.parameters;B=B.paddingPixelsOverride;G.scale=Math.min(M.divisor/(D-M.offset),1);G.factor=Math.abs(u*u*u);G.minPixelSize=M.minPixelSize;G.paddingPixels=B;return G}function I(u,D){return 0===u?D.minPixelSize:D.minPixelSize*(1+2*D.paddingPixels/u)}function t(u,D){return Math.max(w.lerp(u*
D.scale,u,D.factor),I(u,D))}let H=function(){function u(B,M,N,z={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},E){this.viewingMode=B;this.description=M;this.ellipsoidRadius=N;this.parameters=z;this._paddingPixelsOverride=E;2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=
this.calculateCurvatureDependentParametersGlobal)}var D=u.prototype;D.update=function(B){if(this.parameters&&this.parameters.camera.fovY===B.fovY&&this.parameters.camera.distance===B.distance)return!1;this.calculateParameters(B,this.ellipsoidRadius,this.parameters);return!0};D.overridePadding=function(B){return B!==this.paddingPixelsOverride?new u(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,B):this};D.calculateParameters=function(B,M,N){const {scaleStart:z,scaleFallOffRange:E,
minPixelSize:r}=this.description,{fovY:C,distance:O}=B;var P=this.calculateCurvatureDependentParameters(B,M);M=this.coverageCompensation(B,M,P);const {tiltAngle:T,scaleFallOffFactor:F}=P,K=Math.sin(T)*O,J=.5*Math.PI-T-C*(.5-z*M);P=K/Math.cos(J);M=(P-K/Math.cos(J+C*E*M)*F)/(1-F);N.camera.fovY=B.fovY;N.camera.distance=B.distance;N.offset=M;N.divisor=P-M;N.minPixelSize=r;return N};D.calculateCurvatureDependentParametersLocal=function(B,M,N=y){N.tiltAngle=this.description.curvatureDependent.min.tiltAngle;
N.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return N};D.calculateCurvatureDependentParametersGlobal=function(B,M,N=y){const z=this.description.curvatureDependent;B=1+B.distance/M;B=Math.sqrt(B*B-1);const [E,r]=[z.min.curvature,z.max.curvature];B=w.clamp((B-E)/(r-E),0,1);const [C,O]=[z.min,z.max];N.tiltAngle=w.lerp(C.tiltAngle,O.tiltAngle,B);N.scaleFallOffFactor=w.lerp(C.scaleFallOffFactor,O.scaleFallOffFactor,B);return N};D.surfaceCoverageCompensationLocal=function(B,
M,N){return(B.fovY-N.tiltAngle)/B.fovY};D.surfaceCoverageCompensationGlobal=function(B,M,N){const z=M*M;N=N.tiltAngle+.5*Math.PI;const {fovY:E,distance:r}=B;B=r*r+z-2*Math.cos(N)*r*M;const C=Math.sqrt(B);return(Math.acos(Math.sqrt(B-z)/C)-Math.asin(M/(C/Math.sin(N)))+.5*E)/E};A._createClass(u,[{key:"paddingPixelsOverride",get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels}}]);return u}();const v={curvatureDependent:{min:{curvature:w.deg2rad(10),tiltAngle:w.deg2rad(12),
scaleFallOffFactor:.5},max:{curvature:w.deg2rad(70),tiltAngle:w.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},G={scale:0,factor:0,minPixelSize:0,paddingPixels:0},y={tiltAngle:0,scaleFallOffFactor:0};q.applyPrecomputedScaleFactor=function(u,D,B=[0,0]){D=Math.min(Math.max(D.scale,I(u[1],D)/u[1]),1);B[0]=u[0]*D;B[1]=u[1]*D;return B};q.applyScaleFactor=t;q.applyScaleFactorVec2=function(u,D,B=[0,0]){const M=Math.min(Math.max(D.scale,I(u[1],D)/u[1]),1);B[0]=w.lerp(u[0]*
M,u[0],D.factor);B[1]=w.lerp(u[1]*M,u[1],D.factor);return B};q.getLabelSettings=function(u,D){const {curvatureDependent:B,scaleStart:M,scaleFallOffRange:N}=v;return new H(u,{curvatureDependent:{min:{curvature:B.min.curvature,tiltAngle:B.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:B.max.curvature,tiltAngle:B.max.tiltAngle,scaleFallOffFactor:.95}},scaleStart:M,scaleFallOffRange:N,minPixelSize:14},D)};q.getSettings=function(u,D){return new H(u,v,D)};q.precomputeScaleFactor=function(u,D,B,M){u=
S(u,D,B);u.minPixelSize=0;u.paddingPixels=0;u=t(1,u);M.scale=u;M.factor=0;M.minPixelSize=B.parameters.minPixelSize;M.paddingPixels=B.paddingPixelsOverride};q.scale=function(u,D,B,M){return t(u,S(D,B,M))};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["../../../../chunks/mat3f64","../../../../chunks/vec3f32"],function(q,A){var w;(w||(w={})).Default={vvSizeEnabled:!1,vvSizeMinSize:A.fromValues(1,1,1),vvSizeMaxSize:A.fromValues(100,
100,100),vvSizeOffset:A.fromValues(0,0,0),vvSizeFactor:A.fromValues(1,1,1),vvSizeValue:A.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:q.create()};return w})},"esri/chunks/vec4f32":function(){define(["exports"],function(q){function A(){return new Float32Array(4)}
function w(C){const O=new Float32Array(4);O[0]=C[0];O[1]=C[1];O[2]=C[2];O[3]=C[3];return O}function S(C,O,P,T){const F=new Float32Array(4);F[0]=C;F[1]=O;F[2]=P;F[3]=T;return F}function I(C,O){return new Float32Array(C,O,4)}function t(){return A()}function H(){return S(1,1,1,1)}function v(){return S(1,0,0,0)}function G(){return S(0,1,0,0)}function y(){return S(0,0,1,0)}function u(){return S(0,0,0,1)}const D=A(),B=H(),M=v(),N=G(),z=y(),E=u();var r=Object.freeze({__proto__:null,create:A,clone:w,fromValues:S,
createView:I,zeros:t,ones:H,unitX:v,unitY:G,unitZ:y,unitW:u,ZEROS:D,ONES:B,UNIT_X:M,UNIT_Y:N,UNIT_Z:z,UNIT_W:E});q.ONES=B;q.UNIT_W=E;q.UNIT_X=M;q.UNIT_Y=N;q.UNIT_Z=z;q.ZEROS=D;q.clone=w;q.create=A;q.createView=I;q.fromValues=S;q.ones=H;q.unitW=u;q.unitX=v;q.unitY=G;q.unitZ=y;q.vec4f32=r;q.zeros=t})},"esri/views/3d/interactive/visualElements/LaserlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/geometryUtils ./VisualElement ../../../../chunks/Laserlines.glsl ../../support/LaserLineRenderer".split(" "),
function(q,A,w,S,I,t,H,v,G){H=function(u){function D(M){var N=u.call(this,M.view)||this;N._angleCutoff=v.defaultAngleCutoff;N._style={};N._heightManifoldTarget=S.create();N._heightManifoldEnabled=!1;N._intersectsLine=t.lineSegment.create();N._intersectsLineEnabled=!1;N._intersectsLineInfinite=!1;N._lineVerticalPlaneSegment=null;N._pathVerticalPlaneBuffers=null;N._pointDistanceLine=null;N.applyProps(M);return N}A._inheritsLoose(D,u);var B=D.prototype;B.createResources=function(){this.ensureRenderer()};
B.destroyResources=function(){this.disposeRenderer()};B.updateVisibility=function(){this.syncHeightManifold();this.syncIntersectsLine();this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance()};B.syncRenderer=function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||w.isSome(this._pointDistanceLine)||w.isSome(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()};B.ensureRenderer=function(){w.isSome(this.renderer)||(this.renderer=
new G.LaserLineRenderer(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))};B.syncStyle=function(){w.isNone(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&
(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))};B.syncAngleCutoff=function(){w.isNone(this.renderer)||this.renderer.setParameterValues({angleCutoff:this._angleCutoff})};B.syncHeightManifold=function(){w.isNone(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))};B.syncIntersectsLine=function(){w.isNone(this.renderer)||(this.renderer.intersectsLineEnabled=
this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))};B.syncIntersectsLineInfinite=function(){w.isNone(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)};B.syncPathVerticalPlane=function(){w.isNone(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=w.isSome(this._pathVerticalPlaneBuffers)&&this.visible,w.isSome(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=
this._pathVerticalPlaneBuffers))};B.syncLineVerticalPlane=function(){w.isNone(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=w.isSome(this._lineVerticalPlaneSegment)&&this.visible,w.isSome(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};B.syncPointDistance=function(){w.isNone(this.renderer)||(this.renderer.pointDistanceEnabled=w.isSome(this._pointDistanceLine)&&this.visible,w.isSome(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=
this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))};B.disposeRenderer=function(){w.isSome(this.renderer)&&this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)};A._createClass(D,[{key:"testData",get:function(){return this.renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(M){this._angleCutoff!==M&&(this._angleCutoff=M,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},
set:function(M){this._style=M;this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:null},set:function(M){w.isSome(M)?(I.copy(this._heightManifoldTarget,M),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this.syncRenderer();this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(M){if(w.isNone(M))this.intersectsLine=null;else{var N=this.view.renderCoordsHelper.worldUpAtPosition(M,y);this.intersectsLine=
t.lineSegment.fromValues(M,N);this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:null},set:function(M){w.isSome(M)?(t.lineSegment.copy(M,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this.syncIntersectsLine();this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(M){this._intersectsLineInfinite=M;this.syncIntersectsLineInfinite()}},
{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(M){this._lineVerticalPlaneSegment=w.isSome(M)?t.lineSegment.copy(M):null;this.syncLineVerticalPlane();this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(M){this._pathVerticalPlaneBuffers=M;this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance();this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},
set:function(M){this._pointDistanceLine=w.isSome(M)?{origin:S.clone(M.origin),target:S.clone(M.target)}:null;this.syncPointDistance();this.syncRenderer()}}]);return D}(H.VisualElement);const y=S.create();q.LaserlineVisualElement=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(q,A){let w=function(){function S(t){this._resourcesCreated=this._attached=!1;
this._visible=!0;this.view=t;this.view.watch("ready",H=>{this._resourcesCreated&&(H?this._createResources():this._destroyResources())})}var I=S.prototype;I.applyProps=function(t){let H=!1;for(const v in t)v in this?"attached"===v?H=t[v]:this[v]=t[v]:console.error("Cannot set unknown property",v);this.attached=H};I.destroy=function(){this.attached=!1};I._createResources=function(){this.createResources();this._resourcesCreated=!0;this.visible||this.updateVisibility(!1)};I._destroyResources=function(){this.destroyResources();
this._resourcesCreated=!1};A._createClass(S,[{key:"attached",get:function(){return this._attached},set:function(t){t!==this._attached&&((this._attached=t)&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}}]);return S}();q.VisualElement=w;Object.defineProperty(q,"__esModule",{value:!0})})},
"esri/chunks/Laserlines.glsl":function(){define("exports ../core/mathUtils ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl".split(" "),function(q,A,w,S,I,t){function H(G){const y=new S.ShaderBuilder;y.extensions.add("GL_OES_standard_derivatives");y.include(I.ScreenSpacePass);y.include(t.Laserline,G);y.fragment.uniforms.add("angleCutoff",
"vec2");y.fragment.uniforms.add("globalAlpha","float");G.heightManifoldEnabled&&y.fragment.uniforms.add("heightPlane","vec4");G.pointDistanceEnabled&&y.fragment.uniforms.add("pointDistanceSphere","vec4");G.lineVerticalPlaneEnabled&&y.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart","vec3").add("lineVerticalEnd","vec3");(G.heightManifoldEnabled||G.pointDistanceEnabled||G.lineVerticalPlaneEnabled)&&y.fragment.uniforms.add("maxPixelDistance","float");G.intersectsLineEnabled&&
y.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float");(G.lineVerticalPlaneEnabled||G.heightManifoldEnabled)&&y.fragment.code.add(w.glsl`
      float planeDistancePixels(vec4 plane, vec3 pos) {
        float dist = dot(plane.xyz, pos) + plane.w;
        float width = fwidth(dist);
        dist /= min(width, maxPixelDistance);
        return abs(dist);
      }`);G.pointDistanceEnabled&&y.fragment.code.add(w.glsl`
    float sphereDistancePixels(vec4 sphere, vec3 pos) {
      float dist = distance(sphere.xyz, pos) - sphere.w;
      float width = fwidth(dist);
      dist /= min(width, maxPixelDistance);
      return abs(dist);
    }
    `);G.intersectsLineEnabled&&y.fragment.code.add(w.glsl`
    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
      return abs(dist) - radius;
    }
    `);(G.lineVerticalPlaneEnabled||G.intersectsLineEnabled)&&y.fragment.code.add(w.glsl`
    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
      vec3 dir = end - start;
      float t2 = dot(dir, pos - start);
      float l2 = dot(dir, dir);
      return t2 >= 0.0 && t2 <= l2;
    }
    `);y.fragment.code.add(w.glsl`
  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    vec4 color = vec4(0, 0, 0, 0);
  `);G.heightManifoldEnabled&&y.fragment.code.add(w.glsl`
    {
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));
      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);
    }
    `);G.pointDistanceEnabled&&y.fragment.code.add(w.glsl`
    {
      // distance to sphere
      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));

      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
    }
    `);G.lineVerticalPlaneEnabled&&y.fragment.code.add(w.glsl`
    {
      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);

        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));

        color = max(color, lineVerticalColor * lineVerticalAlpha);
      }
    }
    `);G.intersectsLineEnabled&&y.fragment.code.add(w.glsl`
    {
      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));

        color = max(color, intersectsLineColor * intersectsLineAlpha);
      }
    }
    `);y.fragment.code.add(w.glsl`
    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);
  }
  `);return y}A=A.deg2rad(6);var v=Object.freeze({__proto__:null,defaultAngleCutoff:A,build:H});q.LaserlinesShader=v;q.build=H;q.defaultAngleCutoff=A})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass":function(){define(["exports","../shaderModules/interfaces"],function(q,A){q.ScreenSpacePass=function(w){w.attributes.add("position","vec2");w.varyings.add("uv","vec2");w.vertex.code.add(A.glsl`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      uv = position * 0.5 + vec2(0.5);
    }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl":function(){define(["exports","../shaderModules/interfaces","./output/ReadLinearDepth.glsl","./util/CameraSpace.glsl"],function(q,A,w,S){q.Laserline=function(I,t){I.extensions.add("GL_OES_standard_derivatives");I.include(w.ReadLinearDepth);I.include(S.CameraSpace);I.fragment.uniforms.add("glowColor","vec3");I.fragment.uniforms.add("glowWidth","float");I.fragment.uniforms.add("glowFalloff",
"float");I.fragment.uniforms.add("innerColor","vec3");I.fragment.uniforms.add("innerWidth","float");I.fragment.uniforms.add("depthMap","sampler2D");I.fragment.uniforms.add("nearFar","vec2");I.fragment.uniforms.add("frameColor","sampler2D");t.contrastControlEnabled&&I.fragment.uniforms.add("globalAlphaContrastBoost","float");I.fragment.code.add(A.glsl`
  vec4 blendPremultiplied(vec4 source, vec4 dest) {
    float oneMinusSourceAlpha = 1.0 - source.a;

    return vec4(
      source.rgb + dest.rgb * oneMinusSourceAlpha,
      source.a + dest.a * oneMinusSourceAlpha
    );
  }
  `);I.fragment.code.add(A.glsl`
  vec4 premultipliedColor(vec3 rgb, float alpha) {
    return vec4(rgb * alpha, alpha);
  }
  `);I.fragment.code.add(A.glsl`
  vec4 laserlineProfile(float dist) {
    if (dist > glowWidth) {
      return vec4(0.0);
    }

    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);

    return blendPremultiplied(
      premultipliedColor(innerColor, innerAlpha),
      premultipliedColor(glowColor, glowAlpha)
    );
  }
  `);I.fragment.code.add(A.glsl`
  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
    float depth = linearDepthFromTexture(depthMap, uv, nearFar);

    if (-depth == nearFar[0]) {
      return false;
    }

    pos = reconstructPosition(gl_FragCoord.xy, depth);
    normal = normalize(cross(dFdx(pos), dFdy(pos)));

    float ddepth = fwidth(depth);
    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);

    return true;
  }
  `);t.contrastControlEnabled?I.fragment.code.add(A.glsl`
    float rgbToLuminance(vec3 color) {
      return dot(vec3(0.2126, 0.7152, 0.0722), color);
    }

    vec4 laserlineOutput(vec4 color) {
      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);
      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);

      return color * alpha;
    }
    `):I.fragment.code.add(A.glsl`
    vec4 laserlineOutput(vec4 color) {
      return color * globalAlpha;
    }
    `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/RgbaFloatEncoding.glsl"],function(q,A,w){q.ReadLinearDepth=function(S){S.fragment.include(w.RgbaFloatEncoding);S.fragment.code.add(A.glsl`
    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
      return -(rgba2float(texture2D(depthTex, uv)) * (nearFar[1] - nearFar[0]) + nearFar[0]);
    }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.CameraSpace=function(w){w.fragment.uniforms.add("projInfo","vec4");w.fragment.uniforms.add("zScale","vec2");w.fragment.code.add(A.glsl`
    vec3 reconstructPosition(vec2 fragCoord, float depth) {
      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
    }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/LaserLineRenderer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/mathUtils ../../../chunks/vec3f64 ../../../chunks/vec3 ../../../chunks/vec2f64 ../../../chunks/vec4f64 ../../../chunks/vec4 ./geometryUtils ../webgl-engine/lib/Util ../webgl-engine/lib/glUtil3D ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/LaserlinePathTechnique ./LaserlinePathData ../webgl-engine/shaders/LaserlineTechnique".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){function E(K,J,L,Y){const W=r,aa=C;t.transformMat4(W,J,Y);t.copy(aa,L);aa[3]=0;G.transformMat4(aa,aa,Y);y.plane.fromPositionAndNormal(W,aa,K)}const r=I.create(),C=v.create(),O={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:S.deg2rad(6),globalAlphaContrastBoost:2};S=function(){function K(L,Y={},W={contrastControlEnabled:!1}){this._technique=null;this._projInfo=v.create();this._zScale=H.create();this._heightManifoldEnabled=
!1;this._heightManifoldTarget=I.create();this._pointDistanceEnabled=!1;this._pointDistanceOrigin=I.create();this._pointDistanceTarget=I.create();this._lineVerticalPlaneEnabled=!1;this._lineVerticalPlaneSegment=y.lineSegment.create();this._intersectsLineEnabled=!1;this._intersectsLineSegment=y.lineSegment.create();this._intersectsLineRadius=3;this._pathVerticalPlaneEnabled=this._intersectsLineInfinite=!1;this._pathTechnique=this._pathVerticalPlaneData=null;this.canRender=!0;this._tempNormal=I.create();
this._tempDir=I.create();this._tempUp=I.create();this._tempVec3A=I.create();this._tempVec3B=I.create();this._tempVec4=v.create();this._tempPlane=y.plane.create();this._tempSphere=y.sphere.create();this._renderCoordsHelper=L;this._params=B.copyParameters(Y,O);this._config=W}var J=K.prototype;J.setParameterValues=function(L){B.updateParameters(this._params,L)&&this._requestRender()};J.initializeRenderContext=function(L){this._initContext=L;this._quadVAO=D.createQuadVAO(L.rctx);this._techniqueRepository=
L.shaderTechniqueRep;this._techniqueConfig=new z.LaserlineTechniqueConfiguration;this._pathTechniqueConfig=new M.LaserlinePathTechniqueConfiguration};J.uninitializeRenderContext=function(){this._quadVAO.dispose();this._quadVAO=null;w.isSome(this._technique)&&this._techniqueRepository.release(this._technique);w.isSome(this._pathVerticalPlaneData)&&this._pathVerticalPlaneData.dispose();w.isSome(this._pathTechnique)&&this._techniqueRepository.release(this._pathTechnique)};J.render=function(L){const Y=
this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,W=this.pathVerticalPlaneEnabled;if(!Y&&!W)return!0;const aa=L.camera;u.inverseProjectionInfo(aa.projectionMatrix,aa.fullWidth,aa.fullHeight,this._projInfo,this._zScale);Y&&this.renderUnified(L);W&&this.renderPath(L);return!0};J.renderUnified=function(L){const Y=L.rctx,W=this._selectTechnique(),aa=W.program;Y.bindProgram(aa);W.bindPipelineState(Y);this.bindGlobalUniforms(L,aa);this.bindHeightManifoldUniforms(L,
aa);this.bindPointDistanceUniforms(L,aa);this.bindLineVerticalPlaneUniforms(L,aa);this.bindIntersectsLineUniforms(L,aa);W.bind(this._params,L.camera);Y.bindVAO(this._quadVAO);Y.drawArrays(5,0,4)};J.renderPath=function(L){if(!w.isNone(this._pathVerticalPlaneData)){this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled;this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(M.LaserlinePathTechnique,this._pathTechniqueConfig,this._pathTechnique);var Y=L.rctx,
W=this._pathTechnique,aa=W.program;Y.bindProgram(aa);W.bindPipelineState(Y);this.bindGlobalUniforms(L,aa);W.bind(this._params,this._pathVerticalPlaneData.origin,L.camera);this._pathVerticalPlaneData.draw(L.rctx)}};J.bindHeightManifoldUniforms=function(L,Y){if(this.heightManifoldEnabled){var W=this._tempVec3A,aa=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,W);E(aa,this._heightManifoldTarget,W,L.camera.viewMatrix);Y.setUniform4fv("heightPlane",aa)}};J.bindPointDistanceUniforms=
function(L,Y){if(this._pointDistanceEnabled){L=L.camera;var W=this._tempSphere;t.copy(W.center,this._pointDistanceOrigin);t.transformMat4(W.center,W.center,L.viewMatrix);W.radius=t.distance(this._pointDistanceOrigin,this._pointDistanceTarget);Y.setUniform4f("pointDistanceSphere",W.center[0],W.center[1],W.center[2],W.radius)}};J.bindLineVerticalPlaneUniforms=function(L,Y){if(this._lineVerticalPlaneEnabled){var W=this._renderCoordsHelper;L=L.camera;var aa=this._tempPlane,oa=this._tempVec3A,ta=this._tempUp,
la=this._tempDir,X=this._tempNormal;y.lineSegment.pointAt(this._lineVerticalPlaneSegment,.5,oa);W.worldUpAtPosition(oa,ta);t.normalize(la,this._lineVerticalPlaneSegment.vector);t.cross(X,ta,la);t.normalize(X,X);E(aa,this._lineVerticalPlaneSegment.origin,X,L.viewMatrix);Y.setUniform4fv("lineVerticalPlane",aa);aa=this._tempVec3A;t.copy(aa,this._lineVerticalPlaneSegment.origin);W.setAltitude(0,aa);t.transformMat4(aa,aa,L.viewMatrix);Y.setUniform3fv("lineVerticalStart",aa);aa=this._tempVec3B;t.add(aa,
this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector);W.setAltitude(0,aa);t.transformMat4(aa,aa,L.viewMatrix);Y.setUniform3fv("lineVerticalEnd",aa)}};J.bindIntersectsLineUniforms=function(L,Y){if(this._intersectsLineEnabled){var W=T,aa=F;if(this._intersectsLineInfinite){var oa=L.camera;y.clipRay.fromRay(y.ray.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),P);P.c0=-Number.MAX_VALUE;if(!y.frustum.intersectClipRay(oa.frustum.planes,P))return;y.clipRay.getStart(P,
W);y.clipRay.getEnd(P,aa)}else t.copy(W,this._intersectsLineSegment.origin),t.add(aa,this._intersectsLineSegment.origin,this._intersectsLineSegment.vector);oa=this._tempVec3A;t.transformMat4(oa,W,L.camera.viewMatrix);Y.setUniform3fv("intersectsLineStart",oa);W=this._tempVec4;t.copy(W,this._intersectsLineSegment.vector);this._tempVec4[3]=0;G.transformMat4(this._tempVec4,this._tempVec4,L.camera.viewMatrix);t.transformMat4(aa,aa,L.camera.viewMatrix);Y.setUniform3fv("intersectsLineEnd",aa);t.normalize(W,
W);Y.setUniform3f("intersectsLineDirection",W[0],W[1],W[2]);Y.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}};J.bindGlobalUniforms=function(L,Y){const W=L.camera;Y.setUniform4fv("projInfo",this._projInfo);Y.setUniform2fv("zScale",this._zScale);Y.setUniform2f("nearFar",W.near,W.far);this._heightManifoldEnabled?Y.setUniform1f("maxPixelDistance",2*W.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?Y.setUniform1f("maxPixelDistance",2*W.computeScreenPixelSizeAt(this._pointDistanceTarget)):
this._lineVerticalPlaneEnabled&&Y.setUniform1f("maxPixelDistance",2*W.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin));Y.setUniform1i("depthMap",0);L.rctx.bindTexture(L.offscreenRenderingHelper.linearDepthTexture,0);Y.setUniform1i("frameColor",1);L.rctx.bindTexture(L.offscreenRenderingHelper.mainColorTexture,1)};J._requestRender=function(){this._initContext&&this._initContext.requestRender()};J._selectTechnique=function(){this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled;
this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled;this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled;this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled;this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled;return this._technique=this._techniqueRepository.acquireAndReleaseExisting(z.LaserlineTechnique,this._techniqueConfig,this._technique)};A._createClass(K,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?
17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},set:function(L){this._heightManifoldEnabled!==L&&(this._heightManifoldEnabled=L,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(L){t.copy(this._heightManifoldTarget,L);this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(L){L!==this._pointDistanceEnabled&&
(this._pointDistanceEnabled=L,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},set:function(L){t.copy(this._pointDistanceTarget,L);this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(L){t.copy(this._pointDistanceOrigin,L);this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(L){L!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=
L,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(L){y.lineSegment.copy(L,this._lineVerticalPlaneSegment);this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(L){L!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=L,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(L){y.lineSegment.copy(L,
this._intersectsLineSegment);this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},set:function(L){L!==this._intersectsLineRadius&&(this._intersectsLineRadius=L,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(L){L!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=L,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},
set:function(L){L!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=L,w.isSome(this._pathVerticalPlaneData)&&this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(L){w.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new N.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.vertices=L;this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(L){w.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=
new N.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.buffers=L;this.pathVerticalPlaneEnabled&&this._requestRender()}}]);return K}();const P=y.clipRay.create(),T=I.create(),F=I.create();q.LaserLineRenderer=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/glUtil3D":function(){define("exports ./DefaultVertexAttributeLocations ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ./DefaultVertexBufferLayouts".split(" "),
function(q,A,w,S,I,t){q.createColorTexture=function(H,v,G=4){const y=new Uint8Array(G*G*4);for(let u=0;u<y.length;u+=4)y[u+0]=255*v[0],y[u+1]=255*v[1],y[u+2]=255*v[2],y[u+3]=255*v[3];return new S(H,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:G,height:G},y)};q.createEmptyDepthTexture=function(H){return new S(H,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))};q.createEmptyTexture=function(H,v=4){return new S(H,
{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:v,height:v})};q.createQuadVAO=function(H,v=t.Pos2,G=A.Default3D,y=-1,u=1){let D=null;switch(v){case t.Pos2Tex:D=new Float32Array([y,y,0,0,u,y,1,0,y,u,0,1,u,u,1,1]);break;default:D=new Float32Array([y,y,u,y,y,u,u,u])}return new I(H,G,{geometry:v},{geometry:w.createVertex(H,35044,D)})};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil"],
function(q,A){let w=0;return function(){function S(t,H,v,G,y){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this.id=w++;t.instanceCounter.increment(1,this);this._context=t;this._bufferType=H;this._usage=v;this._glName=this._context.gl.createBuffer();G&&this.setData(G,y)}S.createIndex=function(t,H,v,G){return new S(t,34963,H,v,G)};S.createVertex=function(t,H,v){return new S(t,34962,H,v)};var I=S.prototype;I.dispose=function(){this._context&&
(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)};I.setData=function(t,H){if(t){if("number"===typeof t){if(0>t&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&H)switch(this._indexType=H,this._size=t,H){case 5123:t*=2;break;case 5125:t*=4}}else H=t.byteLength,A.isUint16Array(t)&&(H/=2,this._indexType=5123),A.isUint32Array(t)&&(H/=4,this._indexType=5125),this._size=H;H=this._context.getBoundVAO();
this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,t,this._usage);this._context.bindVAO(H)}};I.setSubData=function(t,H=0,v=0,G){if(t){(0>H||H>=this._size)&&console.error("offset is out of range!");var y=H,u=v,D=G,B=t.byteLength;A.isUint16Array(t)&&(B/=2,y*=2,u*=2,D*=2);A.isUint32Array(t)&&(B/=4,y*=4,u*=4,D*=4);void 0===G&&(G=B-1);v>=G&&console.error("end must be bigger than start!");H+v-G>this._size&&console.error("An attempt to write beyond the end of the buffer!");
H=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);v=this._context.gl;t=ArrayBuffer.isView(t)?t.buffer:t;v.bufferSubData(this._bufferType,y,t.slice(u,D));this._context.bindVAO(H)}};q._createClass(S,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"usage",get:function(){return this._usage}},{key:"bufferType",get:function(){return this._bufferType}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",
get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return S}()})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/mathUtils"],function(q,A,w){let S=0;return function(){function I(H,v,G=null){this._glName=this._context=null;this.id=S++;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;H.instanceCounter.increment(0,this);this._context=
H;this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...v};this.setData(G)}var t=I.prototype;t.dispose=function(){if(this._context&&this._context.gl){if(this._glName){const H=this._context.gl;this._boundToUnits.forEach(v=>{this._context.bindTexture(null,v)});H.deleteTexture(this._glName);this._glName=null}this._context.instanceCounter.decrement(0,this);this._context=null}};t.release=function(){this.dispose()};t.resize=
function(H,v){const G=this._descriptor;if(G.width!==H||G.height!==v)G.width=H,G.height=v,this.setData(null)};t.setData=function(H){if(this._context&&this._context.gl){var v=this._context.gl;this._glName||(this._glName=v.createTexture());void 0===H&&(H=null);null===H&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var G=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var y=this._descriptor;I._validateTexture(y);v.pixelStorei(v.UNPACK_ALIGNMENT,
y.unpackAlignment);v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,y.flipped?1:0);v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y.preMultiplyAlpha?1:0);var u=y.pixelFormat,D=y.internalFormat?y.internalFormat:u;if(H instanceof ImageData||H instanceof HTMLImageElement||H instanceof HTMLCanvasElement||H instanceof HTMLVideoElement){var B=H.width,M=H.height;H instanceof HTMLVideoElement&&(B=H.videoWidth,M=H.videoHeight);y.width&&y.height&&console.assert(B===y.width&&M===y.height);v.texImage2D(v.TEXTURE_2D,0,D,u,
y.dataType,H);y.hasMipmap&&this.generateMipmap();void 0===y.width&&(y.width=B);void 0===y.height&&(y.height=M)}else{null!=y.width&&null!=y.height||console.error("Width and height must be specified!");v.DEPTH24_STENCIL8&&D===v.DEPTH_STENCIL&&(D=v.DEPTH24_STENCIL8);B=y.width;M=y.height;var N=H;if(A.isSome(N)&&"type"in N&&"compressed"===N.type)for(u=Math.round(Math.log(Math.max(B,M))/Math.LN2)+1,y.hasMipmap=y.hasMipmap&&u===H.levels.length,u=0;;++u){v.compressedTexImage2D(v.TEXTURE_2D,u,D,B,M,0,H.levels[Math.min(u,
H.levels.length-1)]);if(1===B&&1===M||!y.hasMipmap)break;B=Math.max(1,B>>1);M=Math.max(1,M>>1)}else if(A.isSome(H))v.texImage2D(v.TEXTURE_2D,0,D,B,M,0,u,y.dataType,H),y.hasMipmap&&this.generateMipmap();else for(H=0;;++H){v.texImage2D(v.TEXTURE_2D,H,D,B,M,0,u,y.dataType,null);if(1===B&&1===M||!y.hasMipmap)break;B=Math.max(1,B>>1);M=Math.max(1,M>>1)}}I._applySamplingMode(v,this._descriptor);I._applyWrapMode(v,this._descriptor);I._applyAnisotropicFilteringParameters(this._context,this._descriptor);this._context.bindTexture(G,
0)}};t.updateData=function(H,v,G,y,u,D){D||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const B=this._context.gl,M=this._descriptor,N=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>v||0>G||y>M.width||u>M.height||v+y>M.width||G+u>M.height)&&console.error("An attempt to update out of bounds of the texture!");B.pixelStorei(B.UNPACK_ALIGNMENT,M.unpackAlignment);B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,
M.flipped?1:0);B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.preMultiplyAlpha?1:0);D instanceof ImageData||D instanceof HTMLImageElement||D instanceof HTMLCanvasElement||D instanceof HTMLVideoElement?B.texSubImage2D(B.TEXTURE_2D,H,v,G,M.pixelFormat,M.dataType,D):B.texSubImage2D(B.TEXTURE_2D,H,v,G,y,u,M.pixelFormat,M.dataType,D);this._context.bindTexture(N,0)};t.generateMipmap=function(){var H=this._descriptor;H.hasMipmap||(this._samplingModeDirty=H.hasMipmap=!0,I._validateTexture(H));9729===H.samplingMode?
(this._samplingModeDirty=!0,H.samplingMode=9985):9728===H.samplingMode&&(this._samplingModeDirty=!0,H.samplingMode=9984);H=this._context.getBoundTexture(0);this._context.bindTexture(this,0);const v=this._context.gl;v.generateMipmap(v.TEXTURE_2D);this._context.bindTexture(H,0)};t.setSamplingMode=function(H){H!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=H,I._validateTexture(this._descriptor),this._samplingModeDirty=!0)};t.setWrapMode=function(H){H!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=
H,I._validateTexture(this._descriptor),this._wrapModeDirty=!0)};t.applyChanges=function(){const H=this._context.gl,v=this._descriptor;this._samplingModeDirty&&(I._applySamplingMode(H,v),this._samplingModeDirty=!1);this._wrapModeDirty&&(I._applyWrapMode(H,v),this._wrapModeDirty=!1)};t.setBoundToUnit=function(H,v){v?this._boundToUnits.add(H):this._boundToUnits.delete(H)};I._validateTexture=function(H){(0>H.width||0>H.height)&&console.error("Negative dimension parameters are not allowed!");w.isPowerOfTwo(H.width)&&
w.isPowerOfTwo(H.height)||("number"===typeof H.wrapMode?33071!==H.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==H.wrapMode.s||33071!==H.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),H.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};I._applySamplingMode=function(H,v){let G=v.samplingMode,y=v.samplingMode;if(9985===G||9987===G)G=9729,v.hasMipmap||(y=9729);else if(9984===
G||9986===G)G=9728,v.hasMipmap||(y=9728);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,G);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,y)};I._applyWrapMode=function(H,v){"number"===typeof v.wrapMode?(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,v.wrapMode),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,v.wrapMode)):(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,v.wrapMode.s),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,v.wrapMode.t))};I._applyAnisotropicFilteringParameters=function(H,v){if(null!=
v.maxAnisotropy){var G=H.capabilities.textureFilterAnisotropic;G&&(H=H.gl,H.texParameterf(H.TEXTURE_2D,G.TEXTURE_MAX_ANISOTROPY,v.maxAnisotropy))}};q._createClass(I,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return I}()})},"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","./Util"],function(q,A){let w=0;return function(){function S(t,H,v,G,y){this._context=t;this._locations=H;this._layout=
v;this._buffers=G;this._indexBuffer=y;this._glName=null;this.id=w++;this._initialized=!1;t.instanceCounter.increment(2,this)}var I=S.prototype;I.dispose=function(t=!0){if(this._context){var H=this._context.capabilities.vao;H&&this._glName&&(H.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(t){for(const v in this._buffers)this._buffers[v].dispose(),delete this._buffers[v];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=
null)}this._context.instanceCounter.decrement(2,this);this._context=null}};I.initialize=function(){if(!this._initialized){var t=this._context.capabilities.vao;if(t){const H=t.createVertexArray();t.bindVertexArray(H);this._bindLayout();t.bindVertexArray(null);this._glName=H}this._initialized=!0}};I.bind=function(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};I._bindLayout=function(){const t=this._buffers,
H=!!this._context.capabilities.vao,v=this._layout,G=this._indexBuffer;t||console.error("Vertex buffer dictionary is empty!");const y=this._context.gl;for(const u in t){const D=t[u];D||console.error("Vertex buffer is uninitialized!");const B=v[u];B||console.error("Vertex element descriptor is empty!");A.bindVertexBufferLayout(this._context,this._locations,D,B)}G&&(H?y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,G.glName):this._context.bindBuffer(G))};I.unbind=function(){this.initialize();const t=this._context.capabilities.vao;
t?t.bindVertexArray(null):this._unbindLayout()};I._unbindLayout=function(){var t=this._buffers;const H=this._layout;t||console.error("Vertex buffer dictionary is empty!");for(const v in t){const G=t[v];G||console.error("Vertex buffer is uninitialized!");A.unbindVertexBufferLayout(this._context,this._locations,G,H[v])}(t=this._indexBuffer)&&this._context.unbindBuffer(t.bufferType)};q._createClass(S,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},
{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((t,H)=>t+this._buffers[H].size,this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return S}()})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],function(q,A,w){function S(v){return v[0].stride}function I(v){switch(v){case 5126:return 4;
case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function t(v){switch(v){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:return 4;case 34041:return 4;case 33325:return 2;case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1}return 0}
function H(v){if(w.isNone(v))return 0;if("colorAttachment"in v)return v.glName?H(v.colorAttachment)+H(v.depthStencilAttachment):0;if("descriptor"in v)return v.glName?H(v.descriptor):0;const G=v.internalFormat||"pixelFormat"in v&&v.pixelFormat;if(!G)return 0;const y="hasMipmap"in v&&v.hasMipmap?1.3:1;v=v.width*v.height;return t(G)*v*y}q.addDescriptor=function(v,G,y,u,D,B){const M=I(u);if(0<v.length){const N=v[0].stride,z=N+M*y;v.forEach(E=>E.stride=z);v.push({name:G,count:y,type:u,offset:N,stride:z,
normalized:D,divisor:B})}else v.push({name:G,count:y,type:u,offset:0,stride:M*y,normalized:D,divisor:B})};q.bindVertexBufferLayout=function(v,G,y,u,D){const B=v.gl,M=v.capabilities.instancing;v.bindBuffer(y);for(const N of u)if(v=G[N.name],y=(D?D:0+N.baseInstance?N.baseInstance:0)*N.stride,void 0===v&&console.error(`There is no location for vertex attribute '${N.name}' defined.`),N.baseInstance&&!N.divisor&&console.error(`Vertex attribute '${N.name}' uses baseInstanceOffset without divisor.`),4>=
N.count)B.vertexAttribPointer(v,N.count,N.type,N.normalized,N.stride,N.offset+y),B.enableVertexAttribArray(v),N.divisor&&0<N.divisor&&M&&M.vertexAttribDivisor(v,N.divisor);else if(9===N.count)for(u=0;3>u;u++)B.vertexAttribPointer(v+u,3,N.type,N.normalized,N.stride,N.offset+12*u+y),B.enableVertexAttribArray(v+u),N.divisor&&0<N.divisor&&M&&M.vertexAttribDivisor(v+u,N.divisor);else if(16===N.count)for(u=0;4>u;u++)B.vertexAttribPointer(v+u,4,N.type,N.normalized,N.stride,N.offset+16*u+y),B.enableVertexAttribArray(v+
u),N.divisor&&0<N.divisor&&M&&M.vertexAttribDivisor(v+u,N.divisor);else console.error("Unsupported vertex attribute element count: "+N.count)};q.copyFramebufferToTexture=function(v,G,y,u,D=0){const B=v.getBoundFramebufferObject(),M=v.getBoundTexture(0);v.bindFramebuffer(G);v.bindTexture(y,0);v.gl.copyTexImage2D(v.gl.TEXTURE_2D,D,y.descriptor.pixelFormat,u[0],u[1],u[2],u[3],0);v.gl.flush();v.bindFramebuffer(B);v.bindTexture(M,0)};q.findAttribute=function(v,G){for(let y=0;y<v.length;y++)if(v[y].name===
G)return v[y];return null};q.getBytesPerElement=I;q.getBytesPerElementFormat=t;q.getGpuMemoryUsage=H;q.getStride=S;q.getTypedArrayConstructor=function(v){switch(v){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array;default:throw Error("Unknown data type");}};q.hasAttribute=function(v,G){for(let y=0;y<v.length;y++)if(v[y].name===G)return!0;return!1};q.setBaseInstanceOffset=
function(v,G){const y={};for(const u in v)y[u]=v[u].map(D=>D.divisor?{...D,baseInstance:G}:D);return y};q.unbindVertexBufferLayout=function(v,G,y,u){const D=v.gl,B=v.capabilities.instancing;v.bindBuffer(y);for(const M of u)if(y=G[M.name],4>=M.count)D.disableVertexAttribArray(y),M.divisor&&0<M.divisor&&B&&B.vertexAttribDivisor(y,0);else if(9===M.count)for(u=0;3>u;u++)D.disableVertexAttribArray(y+u),M.divisor&&0<M.divisor&&B&&B.vertexAttribDivisor(y+u,0);else if(16===M.count)for(u=0;4>u;u++)D.disableVertexAttribArray(y+
u),M.divisor&&0<M.divisor&&B&&B.vertexAttribDivisor(y+u,0);else console.error("Unsupported vertex attribute element count: "+M.count);v.unbindBuffer(34962)};q.vertexCount=function(v,G){return v.vertexBuffers[G].size/S(v.layout[G])};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["exports"],function(q){q.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];q.Pos2Tex=[{name:"position",count:2,type:5126,
offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];q.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];q.Pos3Col=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",count:4,type:5121,offset:12,stride:16,normalized:!1}];q.Pos3NormalTex=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,
offset:24,stride:32,normalized:!1}];q.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../../../../chunks/LaserlinePath.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D){v=function(M){function N(){return M.apply(this,arguments)||this}w._inheritsLoose(N,M);var z=N.prototype;z.initializeProgram=function(E){const r=N.shader.get().build(this.configuration);return new y(E.rctx,r.generateSource("vertex"),r.generateSource("fragment"),N.attributeLocations)};z.bind=function(E,r,C){this.program.setUniform3fv("innerColor",E.innerColor);this.program.setUniform1f("innerWidth",E.innerWidth*C.pixelRatio);this.program.setUniform3fv("glowColor",E.glowColor);
this.program.setUniform1f("glowWidth",E.glowWidth*C.pixelRatio);this.program.setUniform1f("glowFalloff",E.glowFalloff);this.program.setUniform1f("globalAlpha",E.globalAlpha);this.program.setUniform1f("perScreenPixelRatio",C.perScreenPixelRatio);this.program.setUniform2f("pixelToNDC",2/C.fullWidth,2/C.fullHeight);this.program.setUniformMatrix4fv("uProjectionMatrix",C.projectionMatrix);I.translate(B,C.viewMatrix,r);this.program.setUniformMatrix4fv("uModelViewMatrix",B);this.configuration.contrastControlEnabled&&
this.program.setUniform1f("globalAlphaContrastBoost",null!=E.globalAlphaContrastBoost?E.globalAlphaContrastBoost:1)};z.initializePipeline=function(){return u.makePipelineState({blending:u.simpleBlendingParams(1,771),colorWrite:u.defaultColorWriteParams})};z.bindPipelineState=function(E){E.setPipelineState(this.pipeline)};return N}(v.ShaderTechnique);v.shader=new H.ReloadableShaderModule(D.LaserlinePathShader,()=>new Promise(function(M,N){q(["./LaserlinePath.glsl"],M,N)}));v.attributeLocations={start:0,
end:1,up:2,extrude:3};H=function(M){function N(){var z=M.apply(this,arguments)||this;z.contrastControlEnabled=!1;return z}w._inheritsLoose(N,M);return N}(G.ShaderTechniqueConfiguration);S.__decorate([G.parameter()],H.prototype,"contrastControlEnabled",void 0);const B=t.create();A.LaserlinePathTechnique=v;A.LaserlinePathTechniqueConfiguration=H;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/chunks/LaserlinePath.glsl":function(){define(["exports","../views/3d/webgl-engine/core/shaderModules/interfaces",
"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder","../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl"],function(q,A,w,S){function I(H){const v=new w.ShaderBuilder;v.include(S.Laserline,H);v.vertex.uniforms.add("uModelViewMatrix","mat4");v.vertex.uniforms.add("uProjectionMatrix","mat4");v.attributes.add("start","vec3");v.attributes.add("end","vec3");v.attributes.add("up","vec3");v.attributes.add("extrude","vec2");v.varyings.add("uv","vec2");v.varyings.add("vViewStart","vec3");v.varyings.add("vViewEnd",
"vec3");v.varyings.add("vViewPlane","vec4");v.vertex.uniforms.add("glowWidth","float");v.vertex.uniforms.add("pixelToNDC","vec2");v.vertex.code.add(A.glsl`
  void main() {
    vec3 pos = mix(start, end, extrude.x);

    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);
    vec4 projPos = uProjectionMatrix * viewPos;
    vec2 ndcPos = projPos.xy / projPos.w;

    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;
    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);
    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);

    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
    ndcPos += length(lxy) * projExtrudeDir;

    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;

    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;
    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;
    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));

    // Add enough padding in the X screen space direction for glow
    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
    ndcPos.x += xPaddingPixels * pixelToNDC.x;

    uv = ndcPos * 0.5 + 0.5;
    gl_Position = vec4(ndcPos, 0, 1);
  }
  `);v.fragment.uniforms.add("globalAlpha","float");v.fragment.uniforms.add("perScreenPixelRatio","float");v.fragment.code.add(A.glsl`
  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
    vec3 origin = mix(start, end, 0.5);
    vec3 basis = end - origin;
    vec3 posAtOrigin = pos - origin;

    float x = dot(normalize(basis), posAtOrigin);
    float y = dot(plane.xyz, posAtOrigin);

    float dx = max(abs(x) - length(basis), 0.0);
    float dy = y;

    float dist = length(vec2(dx, dy));

    float width = fwidth(y);
    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
    float pixelDist = dist / min(width, maxPixelDistance);
    return abs(pixelDist);
  }

  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);

    vec4 color = laserlineProfile(distance);
    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));

    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
  }
  `);return v}var t=Object.freeze({__proto__:null,build:I});q.LaserlinePathShader=t;q.build=I})},"esri/views/3d/support/LaserlinePathData":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3f64 ../../../chunks/vec3 ../../webgl/Program ./buffer/glUtil ./buffer/InterleavedLayout ../../webgl/BufferObject ../../webgl/Texture ../../webgl/VertexArrayObject ../../webgl/Renderbuffer ../../webgl/FramebufferObject ../../webgl/ProgramCache ../../webgl/RenderingContext ../../webgl/ShaderCompiler ../webgl-engine/shaders/LaserlinePathTechnique".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){t=function(){function P(F){this._renderCoordsHelper=F;this._buffers=null;this._origin=S.create();this._dirty=!1;this._count=0;this._vao=null}var T=P.prototype;T.draw=function(F){const K=this.ensureVAO(F);w.isSome(K)&&(F.bindVAO(K),F.drawArrays(4,0,this._count))};T.dispose=function(){w.isSome(this._vao)&&this._vao.dispose()};T.ensureVAO=function(F){if(w.isNone(this._buffers))return null;w.isNone(this._vao)&&(this._vao=this.createVAO(F,this._buffers));this.ensureVertexData(this._vao,
this._buffers);return this._vao};T.createVAO=function(F,K){K=this.createDataBuffer(K);this._dirty=!1;return new u(F,E.LaserlinePathTechnique.attributeLocations,{data:H.glLayout(O)},{data:G.createVertex(F,35044,K)})};T.ensureVertexData=function(F,K){this._dirty&&(K=this.createDataBuffer(K),F.vertexBuffers.data.setData(K),this._dirty=!1)};T.numberOfRenderVertices=function(F){return 6*(F.length/3-1)};T.createDataBuffer=function(F){var K=F.reduce((oa,ta)=>oa+this.numberOfRenderVertices(ta),0);this._count=
K;K=O.createBuffer(K);const J=this._origin;let L=0,Y=0;for(const oa of F){for(F=0;F<oa.length;F+=3){var W=I.set(C,oa[F+0],oa[F+1],oa[F+2]);0===F?Y=this._renderCoordsHelper.getAltitude(W):this._renderCoordsHelper.setAltitude(Y,W);var aa=this._renderCoordsHelper.worldUpAtPosition(W,r);const ta=L+2*F;W=I.subtract(C,W,J);if(F<oa.length-3){K.up.setVec(ta,aa);K.up.setVec(ta+3,aa);K.up.setVec(ta+5,aa);for(let la=0;6>la;la++)K.start.setVec(ta+la,W);K.extrude.setValues(ta+0,0,-1);K.extrude.setValues(ta+1,
1,-1);K.extrude.setValues(ta+2,1,1);K.extrude.setValues(ta+3,0,-1);K.extrude.setValues(ta+4,1,1);K.extrude.setValues(ta+5,0,1)}if(0<F)for(K.up.setVec(ta-2,aa),K.up.setVec(ta-4,aa),K.up.setVec(ta-5,aa),aa=-6;0>aa;aa++)K.end.setVec(ta+aa,W)}L+=this.numberOfRenderVertices(oa)}return K.buffer};A._createClass(P,[{key:"vertices",set:function(F){const K=new Float64Array(3*F.length);let J=0;for(const L of F)K[J++]=L[0],K[J++]=L[1],K[J++]=L[2];this.buffers=[K]}},{key:"buffers",set:function(F){this._buffers=
F;if(0<this._buffers.length){F=this._buffers[0];const K=3*Math.floor(F.length/3/2);I.set(this._origin,F[K+0],F[K+1],F[K+2])}else I.set(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}}]);return P}();const r=S.create(),C=S.create(),O=v.newLayout().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude");q.LaserlinePathData=t;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports"],function(q){const A=
{divisor:0},w={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};q.glLayout=function(S,I={}){I={...A,...I};const t=S.stride;return S.fieldNames.filter(H=>{H=S.fields.get(H).optional;return!(H&&H.glPadding)}).map(H=>{const v=S.fields.get(H),G=v.constructor.ElementCount;var y=w[v.constructor.ElementType];if(!y)throw Error("BufferType not supported in WebGL");return{name:H,stride:t,count:G,type:y,offset:v.offset,normalized:!(!v.optional||!v.optional.glNormalized),divisor:I.divisor}})};Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(q){let A=0;return function(){function w(I,t){this._context=I;this._desc=t;this.id=++A;this._context.instanceCounter.increment(5,this);I=this._context.gl;this.glName=I.createRenderbuffer();this._context.bindRenderbuffer(this);I.renderbufferStorage(I.RENDERBUFFER,t.internalFormat,t.width,t.height)}var S=w.prototype;S.resize=function(I,t){const H=this._desc;if(H.width!==I||
H.height!==t)H.width=I,H.height=t,I=this._context.gl,this._context.bindRenderbuffer(this),I.renderbufferStorage(I.RENDERBUFFER,H.internalFormat,H.width,H.height)};S.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)};q._createClass(w,[{key:"descriptor",get:function(){return this._desc}}]);return w}()})},"esri/views/webgl/FramebufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../../core/has","../../core/Logger","./Texture","./Renderbuffer"],function(q,A,w,S,I){const t=w.getLogger("esri.views.webgl.FrameBufferObject");A=function(){function v(y,u,D,B){this._glName=this._context=null;this.id=H++;this._stencilAttachment=this._depthAttachment=null;this._colorAttachments=new Map;this._initialized=!1;y.instanceCounter.increment(4,this);this._context=y;this._desc={...u};if(D)if(Array.isArray(D))for(const z of D){const {attachmentPoint:E,texture:r}=z;D=r instanceof S?r:new S(y,
r);u=D.descriptor;this._colorAttachments.set(E,D);this._validateColorAttachmentPoint(E);this._validateTextureDimensions(u,this._desc)}else{var M;D instanceof S?(u=D.descriptor,this._colorAttachments.set(36064,D)):(u=D,this._colorAttachments.set(36064,new S(y,D)));0!==(null==(M=this._desc)?void 0:M.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");this._validateTextureDimensions(u,this._desc)}if(B instanceof
I){var N;y=null!=(N=this._desc.depthStencilTarget)?N:3;2===y?this._stencilAttachment=B:1===y||3===y?this._depthAttachment=B:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');v._validateBufferDimensions(B.descriptor,this._desc)}else B&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
B instanceof S?(this._depthStencilTexture=B,B=this._depthStencilTexture.descriptor):this._depthStencilTexture=new S(this._context,B),this._validateTextureDimensions(B,this._desc))}var G=v.prototype;G.dispose=function(){if(this._context){var y=this._context,u=y.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(y.gl.deleteFramebuffer(this._glName),this._glName=null);y.bindFramebuffer(u);y.instanceCounter.decrement(4,this);this._context=
null}};G.getColorTexture=function(y){return(y=this._colorAttachments.get(y))&&y instanceof S?y:null};G.attachColorTexture=function(y,u=36064){if(y){this._validateColorAttachmentPoint(u);this._validateTextureDimensions(y.descriptor,this._desc);this._disposeColorAttachments();if(this._initialized){this._context.bindFramebuffer(this);const D=this._context.gl;D.framebufferTexture2D(D.FRAMEBUFFER,u,D.TEXTURE_2D,y.glName,0)}this._colorAttachments.set(u,y)}};G.detachColorTexture=function(y=36064){const u=
this._colorAttachments.get(y);if(u instanceof S){if(this._initialized){this._context.bindFramebuffer(this);const D=this._context.gl;D.framebufferTexture2D(D.FRAMEBUFFER,y,D.TEXTURE_2D,null,0)}this._colorAttachments.delete(y);return u}};G.attachDepthStencilTexture=function(y){if(y){var u=y.descriptor;34041!==u.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==u.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");
this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");this._validateTextureDimensions(u,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),u=this._context.gl,u.framebufferTexture2D(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.TEXTURE_2D,
y.glName,0));this._depthStencilTexture=y}};G.detachDepthStencilTexture=function(){const y=this._depthStencilTexture;if(y&&this._initialized){this._context.bindFramebuffer(this);const u=this._context.gl;this._context.gl.framebufferTexture2D(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return y};G.attachDepthStencilBuffer=function(y){if(y){var u=y.descriptor;34041!==u.internalFormat&&33189!==u.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");
v._validateBufferDimensions(u,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===u.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),u=this._context.gl,u.framebufferRenderbuffer(u.FRAMEBUFFER,1===this._desc.depthStencilTarget?u.DEPTH_ATTACHMENT:u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,y.glName));this._depthAttachment=y}};G.detachDepthStencilBuffer=function(){const y=this._context.gl,u=this._depthAttachment;u&&this._initialized&&(this._context.bindFramebuffer(this),
y.framebufferRenderbuffer(y.FRAMEBUFFER,1===this._desc.depthStencilTarget?y.DEPTH_ATTACHMENT:y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,null));this._depthAttachment=null;return u};G.copyToTexture=function(y,u,D,B,M,N,z){(0>y||0>u||0>M||0>N)&&console.error("Offsets cannot be negative!");(0>=D||0>=B)&&console.error("Copy width and height must be greater than zero!");var E=this._desc;const r=z.descriptor;3553!==z.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(y+D>E.width||u+B>
E.height||M+D>r.width||N+B>r.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");E=this._context;E.bindTexture(z,0);E.bindFramebuffer(this);E.gl.copyTexSubImage2D(3553,0,M,N,y,u,D,B)};G.readPixels=function(y,u,D,B,M,N,z){(0>=D||0>=B)&&console.error("Copy width and height must be greater than zero!");z||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(y,u,D,B,M,N,z)};G.resize=
function(y,u){const D=this._desc;if(D.width!==y||D.height!==u)if(this._initialized){D.width=y;D.height=u;this._colorAttachments.forEach(B=>{B&&B.resize(y,u)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(y,u);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(y,u),this._stencilAttachment&&this._stencilAttachment.resize(y,u);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=
!1}else D.width=y,D.height=u,this._colorAttachments.forEach(B=>{B&&B.resize(y,u)}),this._depthStencilTexture&&this._depthStencilTexture.resize(y,u)};G.initialize=function(){var y,u,D,B;if(this._initialized)return!1;const M=this._context,N=M.gl;this._glName&&N.deleteFramebuffer(this._glName);const z=N.createFramebuffer(),E=this._desc,r=null!=(y=E.colorTarget)?y:1;y=null!=(u=E.width)?u:1;u=null!=(D=E.height)?D:1;N.bindFramebuffer(N.FRAMEBUFFER,z);0===this._colorAttachments.size&&(0===r?this._colorAttachments.set(36064,
new S(M,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:E.width,height:E.height})):(D=new I(M,{internalFormat:32854,width:y,height:u}),this._colorAttachments.set(36064,D)));this._colorAttachments.forEach((C,O)=>{C&&(C instanceof S?N.framebufferTexture2D(N.FRAMEBUFFER,O,N.TEXTURE_2D,C.glName,0):N.framebufferRenderbuffer(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.RENDERBUFFER,C.glName))});D=null!=(B=E.depthStencilTarget)?B:0;switch(D){case 1:case 3:this._depthAttachment||
(this._depthAttachment=new I(M,{internalFormat:1===E.depthStencilTarget?33189:34041,width:y,height:u}));N.framebufferRenderbuffer(N.FRAMEBUFFER,1===D?N.DEPTH_ATTACHMENT:N.DEPTH_STENCIL_ATTACHMENT,N.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new I(M,{internalFormat:36168,width:y,height:u}));N.framebufferRenderbuffer(N.FRAMEBUFFER,N.STENCIL_ATTACHMENT,N.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||
(M.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new S(M,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:y,height:u})),N.framebufferTexture2D(N.FRAMEBUFFER,N.DEPTH_STENCIL_ATTACHMENT,N.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=z;return this._initialized=!0};G._disposeColorAttachments=function(){this._colorAttachments.forEach((y,
u)=>{if(y instanceof S){if(this._initialized){this._context.bindFramebuffer(this);var D=this._context.gl;D.framebufferTexture2D(D.FRAMEBUFFER,u,D.TEXTURE_2D,null,0)}y.dispose()}else y instanceof WebGLRenderbuffer&&(D=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),D.framebufferRenderbuffer(D.FRAMEBUFFER,u,D.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(y))});this._colorAttachments.clear()};G._disposeDepthStencilAttachments=function(){const y=this._context.gl;this._depthAttachment&&
(this._initialized&&(this._context.bindFramebuffer(this),y.framebufferRenderbuffer(y.FRAMEBUFFER,1===this._desc.depthStencilTarget?y.DEPTH_ATTACHMENT:y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),y.framebufferRenderbuffer(y.FRAMEBUFFER,y.STENCIL_ATTACHMENT,y.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&
(this._initialized&&(this._context.bindFramebuffer(this),y.framebufferTexture2D(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};v._validateBufferDimensions=function(y,u){console.assert(0<=y.width&&0<=y.height);void 0!==u.width&&0<=u.width&&void 0!==u.height&&0<=u.height?u.width===y.width&&u.height===y.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(u.width=y.width,u.height=y.height)};
G._validateTextureDimensions=function(y,u){console.assert(0<=y.width&&0<=y.height);3553!==y.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==u.width&&0<=u.width&&void 0!==u.height&&0<=u.height?u.width===y.width&&u.height===y.height||console.error("Color attachment texture must match the framebuffer's!"):(u.width=y.width,u.height=y.height)};G._validateColorAttachmentPoint=function(y){if(-1===v._MAX_COLOR_ATTACHMENTS){const u=this._context.capabilities.drawBuffers;v._MAX_COLOR_ATTACHMENTS=
u?this._context.gl.getParameter(u.MAX_COLOR_ATTACHMENTS):1}y-=36064;y+1>v._MAX_COLOR_ATTACHMENTS&&t.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${y+1}. Implementation supports up to ${v._MAX_COLOR_ATTACHMENTS} color attachments`)};q._createClass(v,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const y=this._colorAttachments.get(36064);return y&&y instanceof S?y:null}},{key:"colorAttachment",
get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}}]);return v}();A._MAX_COLOR_ATTACHMENTS=-1;let H=0;return A})},"esri/views/webgl/ProgramCache":function(){define(["./programUtils"],
function(q){return function(){function A(S){this._programCacheByTemplate=new Map;this._rctx=S}var w=A.prototype;w.dispose=function(){this._programCacheByTemplate.forEach(S=>{S.programs.forEach(I=>{I.dispose()})});this._programCacheByTemplate=null};w.getProgram=function(S,I){this._programCacheByTemplate.has(S)||this.addProgramTemplate(S,t=>q.createProgram(this._rctx,S,t));return this.getProgramTemplateInstance(S,I)};w.addProgramTemplate=function(S,I){this._programCacheByTemplate.set(S,{constructor:I,
programs:new Map})};w.getProgramTemplateInstance=function(S,I){if(S=this._programCacheByTemplate.get(S)){const t=I?JSON.stringify(I):"default";S.programs.has(t)||(I=S.constructor(I),S.programs.set(t,I));return S.programs.get(t)}return null};return A}()})},"esri/views/webgl/programUtils":function(){define(["exports","./Program"],function(q,A){q.createProgram=function(w,S,I,t){I=I||{};t=t||"";I="function"===typeof S.shaders?S.shaders(I):S.shaders;return new A(w,t+I.vertexShader,t+I.fragmentShader,S.attributes)};
q.glslifyDefineMap=function(w){let S="";for(const I in w){const t=w[I];if("boolean"===typeof t)t&&(S+=`#define ${I}\n`);else if("number"===typeof t)S+=`#define ${I} ${t.toFixed()}\n`;else if("object"===typeof t){const H=t.options;let v=0;for(const G in H)S+=`#define ${H[G]} ${(v++).toFixed()}\n`;S+=`#define ${I} ${H[t.value]}\n`}}return S};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/RenderingContext":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./renderState ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(q,A,w,S,I,t,H,v){A=function(){function G(u,D){this.gl=null;this.instanceCounter=new t.InstanceCounter;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=
!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=
this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=H(u)?"webgl2":"webgl";this.gl=u;u instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=v.loadCapabilities(u,D);u=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:u[0],y:u[1],width:u[2],height:u[3]};this._stateTracker=new S.StateTracker({setBlending:B=>{B?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(B.opRgb,
B.opAlpha),this.setBlendFunctionSeparate(B.srcRgb,B.dstRgb,B.srcAlpha,B.dstAlpha),B=B.color,this.setBlendColor(B.r,B.g,B.b,B.a)):this.setBlendingEnabled(!1)},setCulling:B=>{B?(this.setFaceCullingEnabled(!0),this.setCullFace(B.face),this.setFrontFace(B.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:B=>{B?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(B.factor,B.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:B=>{B?(this.setDepthTestEnabled(!0),this.setDepthFunction(B.func)):
this.setDepthTestEnabled(!1)},setStencilTest:B=>{if(B){this.setStencilTestEnabled(!0);const M=B.function;this.setStencilFunction(M.func,M.ref,M.mask);B=B.operation;this.setStencilOp(B.fail,B.zFail,B.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:B=>{B?(this.setDepthWriteEnabled(!0),this.setDepthRange(B.zNear,B.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:B=>{B?this.setColorMask(B.r,B.g,B.b,B.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:B=>{B?this.setStencilWriteMask(B.mask):
this.setStencilWriteMask(0)}});this.enforceState()}var y=G.prototype;y.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this._capabilities=this.gl=null};y.setPipelineState=function(u){this._stateTracker.setPipeline(u)};y.setBlendingEnabled=function(u){this._blendEnabled!==u&&(!0===u?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=u,this._stateTracker.invalidateBlending())};y.setBlendColor=function(u,D,B,
M){if(u!==this._blendColorState.r||D!==this._blendColorState.g||B!==this._blendColorState.b||M!==this._blendColorState.a)this.gl.blendColor(u,D,B,M),this._blendColorState.r=u,this._blendColorState.g=D,this._blendColorState.b=B,this._blendColorState.a=M,this._stateTracker.invalidateBlending()};y.setBlendFunction=function(u,D){if(u!==this._blendFunctionState.srcRGB||D!==this._blendFunctionState.dstRGB)this.gl.blendFunc(u,D),this._blendFunctionState.srcRGB=u,this._blendFunctionState.srcAlpha=u,this._blendFunctionState.dstRGB=
D,this._blendFunctionState.dstAlpha=D,this._stateTracker.invalidateBlending()};y.setBlendFunctionSeparate=function(u,D,B,M){if(this._blendFunctionState.srcRGB!==u||this._blendFunctionState.srcAlpha!==B||this._blendFunctionState.dstRGB!==D||this._blendFunctionState.dstAlpha!==M)this.gl.blendFuncSeparate(u,D,B,M),this._blendFunctionState.srcRGB=u,this._blendFunctionState.srcAlpha=B,this._blendFunctionState.dstRGB=D,this._blendFunctionState.dstAlpha=M,this._stateTracker.invalidateBlending()};y.setBlendEquation=
function(u){this._blendEquationState.mode!==u&&(this.gl.blendEquation(u),this._blendEquationState.mode=u,this._blendEquationState.modeAlpha=u,this._stateTracker.invalidateBlending())};y.setBlendEquationSeparate=function(u,D){if(this._blendEquationState.mode!==u||this._blendEquationState.modeAlpha!==D)this.gl.blendEquationSeparate(u,D),this._blendEquationState.mode=u,this._blendEquationState.modeAlpha=D,this._stateTracker.invalidateBlending()};y.setColorMask=function(u,D,B,M){if(this._colorMaskState.r!==
u||this._colorMaskState.g!==D||this._colorMaskState.b!==B||this._colorMaskState.a!==M)this.gl.colorMask(u,D,B,M),this._colorMaskState.r=u,this._colorMaskState.g=D,this._colorMaskState.b=B,this._colorMaskState.a=M,this._stateTracker.invalidateColorWrite()};y.setClearColor=function(u,D,B,M){if(this._clearColor.r!==u||this._clearColor.g!==D||this._clearColor.b!==B||this._clearColor.a!==M)this.gl.clearColor(u,D,B,M),this._clearColor.r=u,this._clearColor.g=D,this._clearColor.b=B,this._clearColor.a=M};
y.setFaceCullingEnabled=function(u){this._polygonCullingEnabled!==u&&(!0===u?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=u,this._stateTracker.invalidateCulling())};y.setPolygonOffsetFillEnabled=function(u){this._polygonOffsetFillEnabled!==u&&(!0===u?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=u,this._stateTracker.invalidatePolygonOffset())};y.setPolygonOffset=function(u,
D){if(this._polygonOffset[0]!==u||this._polygonOffset[1]!==D)this._polygonOffset[0]=u,this._polygonOffset[1]=D,this.gl.polygonOffset(u,D),this._stateTracker.invalidatePolygonOffset()};y.setCullFace=function(u){this._cullFace!==u&&(this.gl.cullFace(u),this._cullFace=u,this._stateTracker.invalidateCulling())};y.setFrontFace=function(u){this._frontFace!==u&&(this.gl.frontFace(u),this._frontFace=u,this._stateTracker.invalidateCulling())};y.setScissorTestEnabled=function(u){this._scissorTestEnabled!==
u&&(!0===u?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=u)};y.setScissorRect=function(u,D,B,M){if(this._scissorRect.x!==u||this._scissorRect.y!==D||this._scissorRect.width!==B||this._scissorRect.height!==M)this.gl.scissor(u,D,B,M),this._scissorRect.x=u,this._scissorRect.y=D,this._scissorRect.width=B,this._scissorRect.height=M};y.setDepthTestEnabled=function(u){this._depthTestEnabled!==u&&(!0===u?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),
this._depthTestEnabled=u,this._stateTracker.invalidateDepthTest())};y.setClearDepth=function(u){this._clearDepth!==u&&(this.gl.clearDepth(u),this._clearDepth=u)};y.setDepthFunction=function(u){this._depthFunction!==u&&(this.gl.depthFunc(u),this._depthFunction=u,this._stateTracker.invalidateDepthTest())};y.setDepthWriteEnabled=function(u){this._depthWriteEnabled!==u&&(this.gl.depthMask(u),this._depthWriteEnabled=u,this._stateTracker.invalidateDepthWrite())};y.setDepthRange=function(u,D){if(this._depthRange.zNear!==
u||this._depthRange.zFar!==D)this.gl.depthRange(u,D),this._depthRange.zNear=u,this._depthRange.zFar=D,this._stateTracker.invalidateDepthWrite()};y.setStencilTestEnabled=function(u){this._stencilTestEnabled!==u&&(!0===u?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=u,this._stateTracker.invalidateStencilTest())};y.setClearStencil=function(u){u!==this._clearStencil&&(this.gl.clearStencil(u),this._clearStencil=u)};y.setStencilFunction=function(u,D,
B){if(this._stencilFunction.func!==u||this._stencilFunction.ref!==D||this._stencilFunction.mask!==B)this.gl.stencilFunc(u,D,B),this._stencilFunction.face=1032,this._stencilFunction.func=u,this._stencilFunction.ref=D,this._stencilFunction.mask=B,this._stateTracker.invalidateStencilTest()};y.setStencilFunctionSeparate=function(u,D,B,M){if(this._stencilFunction.face!==u||this._stencilFunction.func!==D||this._stencilFunction.ref!==B||this._stencilFunction.mask!==M)this.gl.stencilFuncSeparate(u,D,B,M),
this._stencilFunction.face=u,this._stencilFunction.func=D,this._stencilFunction.ref=B,this._stencilFunction.mask=M,this._stateTracker.invalidateStencilTest()};y.setStencilWriteMask=function(u){this._stencilWriteMask!==u&&(this.gl.stencilMask(u),this._stencilWriteMask=u,this._stateTracker.invalidateStencilWrite())};y.setStencilOp=function(u,D,B){if(this._stencilOperation.fail!==u||this._stencilOperation.zFail!==D||this._stencilOperation.zPass!==B)this.gl.stencilOp(u,D,B),this._stencilOperation.face=
1032,this._stencilOperation.fail=u,this._stencilOperation.zFail=D,this._stencilOperation.zPass=B,this._stateTracker.invalidateStencilTest()};y.setStencilOpSeparate=function(u,D,B,M){if(this._stencilOperation.face!==u||this._stencilOperation.fail!==D||this._stencilOperation.zFail!==B||this._stencilOperation.zPass!==M)this.gl.stencilOpSeparate(u,D,B,M),this._stencilOperation.face=u,this._stencilOperation.face=u,this._stencilOperation.fail=D,this._stencilOperation.zFail=B,this._stencilOperation.zPass=
M,this._stateTracker.invalidateStencilTest()};y.setActiveTexture=function(u){const D=this._activeTextureUnit;0<=u&&u!==this._activeTextureUnit&&(this.gl.activeTexture(I.BASE_TEXTURE_UNIT+u),this._activeTextureUnit=u);return D};y.clear=function(u){u&&this.gl.clear(u)};y.clearSafe=function(u,D=255){u&&(u&16384&&this.setColorMask(!0,!0,!0,!0),u&256&&this.setDepthWriteEnabled(!0),u&1024&&this.setStencilWriteMask(D),this.gl.clear(u))};y.drawArrays=function(u,D,B){this.gl.drawArrays(u,D,B)};y.drawElements=
function(u,D,B,M){5123===B?this.gl.drawElements(u,D,B,M):5125===B&&this.gl.drawElements(u,D,B,M)};y.logIno=function(){};y.setViewport=function(u,D,B,M){const N=this._viewport;if(N.x!==u||N.y!==D||N.width!==B||N.height!==M)N.x=u,N.y=D,N.width=B,N.height=M,this.gl.viewport(u,D,B,M)};y.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};y.bindProgram=function(u){u?this._activeShaderProgram!==u&&(u.initialize(),this.gl.useProgram(u.glName),
this._activeShaderProgram=u):(this.gl.useProgram(null),this._activeShaderProgram=null)};y.bindTexture=function(u,D){-1===G._MAX_TEXTURE_IMAGE_UNITS&&(G._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(D>=G._MAX_TEXTURE_IMAGE_UNITS||0>D)&&console.error("Input texture unit is out of range of available units!");const B=this._textureUnitMap[D];this.setActiveTexture(D);null==u||null==u.glName?(null!=B&&(this.gl.bindTexture(B.descriptor.target,null),B.setBoundToUnit(D,!1)),
this._textureUnitMap[D]=null):B&&B.id===u.id?u.applyChanges():(B&&B.setBoundToUnit(D,!1),this.gl.bindTexture(u.descriptor.target,u.glName),u.setBoundToUnit(D,!0),u.applyChanges(),this._textureUnitMap[D]=u)};y.bindFramebuffer=function(u){w.isNone(u)?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null):this._activeFramebuffer!==u&&(u.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,u.glName),this._activeFramebuffer=u)};y.bindBuffer=function(u){u&&(34962===u.bufferType?
this._activeVertexBuffer=G._bindBuffer(this.gl,u,u.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=G._bindBuffer(this.gl,u,u.bufferType,this._activeIndexBuffer))};y.bindRenderbuffer=function(u){const D=this.gl;u||(D.bindRenderbuffer(D.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==u&&(D.bindRenderbuffer(D.RENDERBUFFER,u.glName),this._activeRenderbuffer=u)};y.unbindBuffer=function(u){34962===u?this._activeVertexBuffer=G._bindBuffer(this.gl,null,u,this._activeVertexBuffer):
this._activeIndexBuffer=G._bindBuffer(this.gl,null,u,this._activeIndexBuffer)};y.bindVAO=function(u){u?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===u.id||(u.bind(),this._activeVertexArrayObject=u):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};y.getBoundTexture=function(u){return this._textureUnitMap[u]};y.getBoundFramebufferObject=function(){return this._activeFramebuffer};y.getBoundVAO=function(){return this._activeVertexArrayObject};
y.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(let u=0;u<this.parameters.maxTextureImageUnits;u++)this.bindTexture(null,u);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);
this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};y.enforceState=function(){const u=
this.gl;var D=this.capabilities.vao;D&&D.bindVertexArray(null);for(var B=0;B<this.parameters.maxVertexAttributes;B++)u.disableVertexAttribArray(B);this._activeVertexBuffer?u.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):u.bindBuffer(34962,null);this._activeIndexBuffer?u.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):u.bindBuffer(34963,null);if(D&&this._activeVertexArrayObject){if(D=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null;this.bindVAO(D)}u.bindFramebuffer(u.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);u.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);u.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);u.bindRenderbuffer(u.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?u.enable(this.gl.BLEND):u.disable(this.gl.BLEND);
u.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);u.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);u.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);u.clearDepth(this._clearDepth);u.clearStencil(this._clearStencil);u.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);
u.cullFace(this._cullFace);u.depthFunc(this._depthFunction);u.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST);u.depthMask(this._depthWriteEnabled);u.frontFace(this._frontFace);u.lineWidth(1);!0===this._polygonCullingEnabled?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE);u.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?u.enable(u.POLYGON_OFFSET_FILL):u.disable(u.POLYGON_OFFSET_FILL);
u.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?u.enable(u.SCISSOR_TEST):u.disable(u.SCISSOR_TEST);u.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);u.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST);u.stencilMask(this._stencilWriteMask);
for(D=0;D<this.parameters.maxTextureImageUnits;D++)u.activeTexture(I.BASE_TEXTURE_UNIT+D),u.bindTexture(3553,null),(B=this._textureUnitMap[D])&&u.bindTexture(B.descriptor.target,B.glName);u.activeTexture(I.BASE_TEXTURE_UNIT+this._activeTextureUnit);u.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};G._bindBuffer=function(u,D,B,M){D?M!==D&&u.bindBuffer(B,D.glName):u.bindBuffer(B,null);return D};q._createClass(G,[{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},
{key:"parameters",get:function(){if(!this._parameters){const u=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:u?this.gl.getParameter(u.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}},
{key:"capabilities",get:function(){return this._capabilities}}]);return G}();A._MAX_TEXTURE_IMAGE_UNITS=-1;return A})},"esri/views/webgl/enums":function(){define(["exports"],function(q){q.BASE_TEXTURE_UNIT=33984;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/InstanceCounter":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(q,A){let w=function(){function S(){this._current=[];this._max=[];for(this._allocations=new Map;6>this._current.length;)this._current.push(0),
this._max.push(0)}var I=S.prototype;I.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};I.increment=function(t,H){H=++this._current[t];this._max[t]=Math.max(H,this._max[t])};I.decrement=function(t,H){--this._current[t]};I.printResourceCount=function(){console.log("Live objects:");console.log(`Textures: ${this._current[0]}`);console.log(`Buffers: ${this._current[1]}`);console.log(`VAOs: ${this._current[2]}`);console.log(`Programs: ${this._current[3]}`);
console.log(`Framebuffers: ${this._current[4]}`);console.log(`Renderbuffers: ${this._current[5]}`);if(0<this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const t=new Map;this._allocations.forEach(H=>{var v;t.set(H,(null!=(v=t.get(H))?v:0)+1)});t.forEach((H,v)=>console.log(H," : ",v))}};A._createClass(S,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}}]);return S}();q.InstanceCounter=w;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(q){return window.WebGL2RenderingContext&&q instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/capabilities/load":function(){define("exports ./isWebGL2Context ./DisjointTimerQuery ./DrawBuffers ./Instancing ./LoseContext ./VertexArrayObjects".split(" "),function(q,A,w,S,I,t,H){function v(G,y,u,D,B){if(D&&A(G))return!0;if(y[u])return!1;for(const M of B)if(G.getExtension(M))return!0;
return!1}q.loadCapabilities=function(G,y){const u=y&&y.disabledExtensions||{},D=y&&y.debugWebGLExtensions||{};let B,M,N,z,E,r,C,O,P,T,F=null,K=null,J=null,L=null;return{get drawBuffers(){T||(T=S.load(G,u));return T},get instancing(){B||(B=I.load(G));return B},get vao(){M||(M=H.load(G,u));return M},get compressedTextureS3TC(){if(!N)if(u.compressedTextureS3TC)N=null;else{var Y=G.getExtension("WEBGL_compressed_texture_s3tc");N=Y?{COMPRESSED_RGB_S3TC_DXT1:Y.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:Y.COMPRESSED_RGBA_S3TC_DXT1_EXT,
COMPRESSED_RGBA_S3TC_DXT3:Y.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:Y.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return N},get textureFilterAnisotropic(){if(!z)if(u.textureFilterAnisotropic)z=null;else{var Y=G.getExtension("EXT_texture_filter_anisotropic")||G.getExtension("MOZ_EXT_texture_filter_anisotropic")||G.getExtension("WEBKIT_EXT_texture_filter_anisotropic");z=Y?{MAX_TEXTURE_MAX_ANISOTROPY:Y.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:Y.TEXTURE_MAX_ANISOTROPY_EXT}:null}return z},
get disjointTimerQuery(){E||(E=w.createDisjointTimerQuery(G,u));return E},get textureFloat(){if(!r)if(A(G))r={textureFloat:!0,textureFloatLinear:!u.textureFloatLinear&&!!G.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!u.textureHalfFloatLinear&&!!G.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:G.HALF_FLOAT};else if(G instanceof WebGLRenderingContext){const Y=!u.textureHalfFloat&&G.getExtension("OES_texture_half_float");r={textureFloat:!u.textureFloat&&
!!G.getExtension("OES_texture_float"),textureFloatLinear:!u.textureFloatLinear&&!!G.getExtension("OES_texture_float_linear"),textureHalfFloat:!!Y,textureHalfFloatLinear:!u.textureHalfFloatLinear&&!!G.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:Y?Y.HALF_FLOAT_OES:void 0}}else r=null;return r},get colorBufferFloat(){if(!C)if(A(G)){var Y=!u.colorBufferFloat&&G.getExtension("EXT_color_buffer_half_float"),W=!u.colorBufferFloat&&G.getExtension("EXT_color_buffer_float");C=Y||W?{textureFloat:!!W,
textureHalfFloat:!!Y,R16F:G.R16F,RG16F:G.RG16F,RGBA16F:G.RGBA16F,R32F:G.R32F,RG32F:G.RG32F,RGBA32F:G.RGBA32F,R11F_G11F_B10F:G.R11F_G11F_B10F,RGB16F:G.RGB16F}:null}else G instanceof WebGLRenderingContext?(Y=!u.colorBufferFloat&&G.getExtension("EXT_color_buffer_half_float"),W=!u.colorBufferFloat&&G.getExtension("WEBGL_color_buffer_float"),C=Y||W?{textureFloat:!!W,textureHalfFloat:!!Y,RGBA16F:Y?Y.RGBA16F_EXT:void 0,RGB16F:Y?Y.RGB16F_EXT:void 0,RGBA32F:W?W.RGBA32F_EXT:void 0}:null):C=null;return C},get blendMinMax(){if(!O)if(A(G))O=
{MIN:G.MIN,MAX:G.MAX};else if(u.blendMinMax)O=null;else{{const Y=G.getExtension("EXT_blend_minmax");O=Y?{MIN:Y.MIN_EXT,MAX:Y.MAX_EXT}:null}}return O},get depthTexture(){null===F&&(F=v(G,u,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return F},get standardDerivatives(){null===K&&(K=v(G,u,"standardDerivatives",!0,["OES_standard_derivatives"]));return K},get shaderTextureLOD(){null===J&&(J=v(G,u,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));
return J},get fragDepth(){null===L&&(L=v(G,u,"fragDepth",!0,["EXT_frag_depth"]));return L},get loseContext(){P||(P=t.load(G,D));return P}}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(q,A){let w=function(S,I,t,H,v,G,y,u){this.createQuery=S;this.resultAvailable=I;this.getResult=t;this.disjoint=H;this.beginTimeElapsed=v;this.endTimeElapsed=G;this.createTimestamp=y;this.timestampBits=
u};q.DisjointTimerQuery=w;q.createDisjointTimerQuery=function(S,I){if(I.disjointTimerQuery)return null;let t=S.getExtension("EXT_disjoint_timer_query_webgl2");return t&&A(S)?new w(()=>S.createQuery(),H=>S.getQueryParameter(H,S.QUERY_RESULT_AVAILABLE),H=>S.getQueryParameter(H,S.QUERY_RESULT),()=>S.getParameter(t.GPU_DISJOINT_EXT),H=>S.beginQuery(t.TIME_ELAPSED_EXT,H),()=>S.endQuery(t.TIME_ELAPSED_EXT),H=>t.queryCounterEXT(H,t.TIMESTAMP_EXT),()=>S.getQuery(t.TIMESTAMP_EXT,t.QUERY_COUNTER_BITS_EXT)):
(t=S.getExtension("EXT_disjoint_timer_query"))?new w(()=>t.createQueryEXT(),H=>t.getQueryObjectEXT(H,t.QUERY_RESULT_AVAILABLE_EXT),H=>t.getQueryObjectEXT(H,t.QUERY_RESULT_EXT),()=>S.getParameter(t.GPU_DISJOINT_EXT),H=>t.beginQueryEXT(t.TIME_ELAPSED_EXT,H),()=>t.endQueryEXT(t.TIME_ELAPSED_EXT),H=>t.queryCounterEXT(H,t.TIMESTAMP_EXT),()=>t.getQueryEXT(t.TIMESTAMP_EXT,t.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports",
"./isWebGL2Context"],function(q,A){q.load=function(w,S){return S.disjointTimerQuery?null:A(w)?{drawBuffers:w.drawBuffers.bind(w),MAX_DRAW_BUFFERS:w.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:w.MAX_COLOR_ATTACHMENTS}:S.drawBuffers?null:(w=w.getExtension("WEBGL_draw_buffers"))?{drawBuffers:w.drawBuffersWEBGL.bind(w),MAX_DRAW_BUFFERS:w.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:w.MAX_COLOR_ATTACHMENTS_WEBGL}:null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports",
"./isWebGL2Context"],function(q,A){q.load=function(w){return A(w)?{drawArraysInstanced:w.drawArraysInstanced.bind(w),drawElementsInstanced:w.drawElementsInstanced.bind(w),vertexAttribDivisor:w.vertexAttribDivisor.bind(w)}:(w=w.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:w.drawArraysInstancedANGLE.bind(w),drawElementsInstanced:w.drawElementsInstancedANGLE.bind(w),vertexAttribDivisor:w.vertexAttribDivisorANGLE.bind(w)}:null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],
function(q){q.load=function(A,w){const S=w.loseContext&&A.getExtension("WEBGL_lose_context");return S?{loseRenderingContext:()=>S.loseContext()}:null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports","./isWebGL2Context"],function(q,A){q.load=function(w,S){return A(w)?{createVertexArray:w.createVertexArray.bind(w),deleteVertexArray:w.deleteVertexArray.bind(w),bindVertexArray:w.bindVertexArray.bind(w)}:S.vao?null:(w=
w.getExtension("OES_vertex_array_object")||w.getExtension("MOZ_OES_vertex_array_object")||w.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:w.createVertexArrayOES.bind(w),deleteVertexArray:w.deleteVertexArrayOES.bind(w),bindVertexArray:w.bindVertexArrayOES.bind(w)}:null};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/webgl/ShaderCompiler":function(){define(function(){return function(){function q(w){this.readFile=w}var A=q.prototype;A.resolveIncludes=function(w){return this.resolve(w)};
A.resolve=function(w,S=new Map){if(S.has(w))return S.get(w);const I=this.read(w);if(!I)throw Error(`cannot find shader file ${w}`);const t=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let H=t.exec(I);const v=[];for(;null!=H;)v.push({path:H[1],start:H.index,length:H[0].length}),H=t.exec(I);let G=0,y="";v.forEach(u=>{y+=I.slice(G,u.start);y+=S.has(u.path)?"":this.resolve(u.path,S);G=u.start+u.length});y+=I.slice(G);S.set(w,y);return y};A.read=function(w){return this.readFile(w)};return q}()})},"esri/views/3d/webgl-engine/shaders/LaserlineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/mathUtils ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../../../../chunks/Laserlines.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D){H=function(B){function M(){return B.apply(this,arguments)||this}w._inheritsLoose(M,B);var N=M.prototype;N.initializeProgram=function(z){const E=M.shader.get().build(this.configuration);return new y(z.rctx,E.generateSource("vertex"),E.generateSource("fragment"),G.Default3D)};N.bind=function(z,E){this.program.setUniform3fv("innerColor",z.innerColor);this.program.setUniform1f("innerWidth",z.innerWidth*E.pixelRatio);this.program.setUniform3fv("glowColor",z.glowColor);
this.program.setUniform1f("glowWidth",z.glowWidth*E.pixelRatio);this.program.setUniform1f("glowFalloff",z.glowFalloff);this.program.setUniform1f("globalAlpha",z.globalAlpha);this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=z.globalAlphaContrastBoost?z.globalAlphaContrastBoost:1);z=null!=z.angleCutoff?z.angleCutoff:D.defaultAngleCutoff;this.program.setUniform2f("angleCutoff",Math.cos(z),Math.cos(Math.max(0,z-I.deg2rad(2))));this.configuration.intersectsLineEnabled&&
this.program.setUniform1f("perScreenPixelRatio",E.perScreenPixelRatio)};N.initializePipeline=function(){return u.makePipelineState({blending:u.simpleBlendingParams(1,771),colorWrite:u.defaultColorWriteParams})};return M}(H.ShaderTechnique);H.shader=new t.ReloadableShaderModule(D.LaserlinesShader,()=>new Promise(function(B,M){q(["./Laserlines.glsl"],B,M)}));t=function(B){function M(){var N=B.apply(this,arguments)||this;N.heightManifoldEnabled=!1;N.pointDistanceEnabled=!1;N.lineVerticalPlaneEnabled=
!1;N.intersectsLineEnabled=!1;N.contrastControlEnabled=!1;return N}w._inheritsLoose(M,B);return M}(v.ShaderTechniqueConfiguration);S.__decorate([v.parameter()],t.prototype,"heightManifoldEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"pointDistanceEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"lineVerticalPlaneEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"intersectsLineEnabled",void 0);S.__decorate([v.parameter()],t.prototype,"contrastControlEnabled",void 0);A.LaserlineTechnique=
H;A.LaserlineTechniqueConfiguration=t;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/Object3DVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Layer ../../webgl-engine/lib/Texture ./VisualElement".split(" "),function(q,A,w,S,I,t,H,v){v=function(G){function y(D){D=G.call(this,D.view)||this;D._resources=null;
return D}A._inheritsLoose(y,G);var u=y.prototype;u.recreate=function(){this.attached&&this.createResources()};u.recreateGeometry=function(){if(!w.isNone(this._resources)){var D=this._resources.object,B=this.view._stage;D.geometries.forEach(M=>{B.remove(2,M.id)});D.removeAllGeometries();this.createGeometries(D);this.visible||D.setVisible(this.visible);D.geometries.forEach(M=>{B.add(2,M)})}};u.createResources=function(){this.destroyResources();const D=this.view._stage;if(D){var B=new t("element",{isPickable:!1});
D.add(0,B);D.addToViewContent([B.id]);var M=new S({idHint:"element",castShadow:!1});this.createExternalResources();this.createGeometries(M);M.geometries.forEach(N=>{D.add(2,N)});this.forEachExternalResource(N=>{D.add(this._contentTypeFromResource(N),N)});D.add(1,M);B.addObject(M);this.visible||M.setVisible(!1);this._resources={layer:B,object:M}}};u._contentTypeFromResource=function(D){return D instanceof I?2:D instanceof H?4:3};u.destroyResources=function(){const D=this.view._stage;!w.isNone(this._resources)&&
D&&(D.remove(1,this._resources.object.id),D.remove(0,this._resources.layer.id),this.forEachExternalResource(B=>{D.remove(this._contentTypeFromResource(B),B.id);B.dispose()}),this._resources.object.geometries.forEach(B=>{D.remove(2,B.id)}),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};u.updateVisibility=function(D){w.isNone(this._resources)||this._resources.object.setVisible(D)};A._createClass(y,[{key:"object",get:function(){return w.isSome(this._resources)?
this._resources.object:null}}]);return y}(v.VisualElement);q.Object3DVisualElement=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/mathUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ./Util ./IdGen ./GeometryRecord ./Object3DStateSet ../materials/renderers/utils".split(" "),function(q,A,w,S,
I,t,H,v,G,y,u,D){let B=function(){function z(r={}){this._objectTransformation=H.create();this._bvObjectSpace=new N;this._bvWorldSpace=new N;this._bvDirty=!0;this._hasVolatileTransformation=!1;this._visible=!0;this.id=z._idGen.gen(r.idHint);this.castShadow=null!=r.castShadow?r.castShadow:!0;(this.metadata=r.metadata)&&this.metadata.isElevationSource&&(this.metadata.lastValidElevationBB=new M);this.objectTransformation=H.create();this._initializeGeometryRecords(r.geometries,r.materials,r.transformations,
r.origins)}var E=z.prototype;E.dispose=function(){for(const r of this._geometryRecords)y.pool.release(r);this._geometries=this._geometryRecords=null};E._initializeGeometryRecords=function(r,C,O,P){if(Array.isArray(r)){v.assert(C.length===r.length,"Object3D: materials don't match geometries");v.assert(O.length===r.length,"Object3D: transformations don't match geometries");this._geometryRecords=Array(r.length);this._geometries=r.slice();for(let T=0;T<r.length;T++)this._geometryRecords[T]=y.pool.acquire(r[T],
C[T],H.clone(O[T]),{highlights:null,occludees:null,visible:!0},P&&P[T]);this._hasVolatileTransformation=!1}else this._geometryRecords=[],this._geometries=[]};E.getNumGeometryRecords=function(){return this._geometryRecords.length};E.getGeometryRecord=function(r){v.assert(0<=r&&r<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range");return this._geometryRecords[r]};E.addGeometry=function(r,C,O,P,T,F){O=O?O:H.IDENTITY;this._geometries.push(r);r=y.pool.acquire(r,C,O,P||{highlights:null,
occludees:null,visible:!0},T,F);this._geometryRecords.push(r);this._hasVolatileTransformation=this._geometryRecords.some(K=>!!K.shaderTransformation);this._notifyDirty("objGeometryAdded",r);this._invalidateBoundingVolume();return r};E.removeGeometry=function(r){const C=this._geometryRecords.splice(r,1)[0];y.pool.release(C);this._hasVolatileTransformation=this._geometryRecords.some(O=>!!O.shaderTransformation);this._geometries.splice(r,1);this._notifyDirty("objGeometryRemoved",C);this._invalidateBoundingVolume();
return C};E.removeAllGeometries=function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};E.geometryVertexAttrsUpdated=function(r){this._notifyDirty("vertexAttrsUpdated",this._geometryRecords[r]);this._invalidateBoundingVolume()};E.setVisible=function(r){this._visible=r;for(const C of this._geometryRecords)C.instanceParameters.visible=this._visible;this._notifyDirty("visibilityChanged")};E.maskOccludee=function(){const r=u.generateObject3DStateId(1);for(const C of this._geometryRecords)C.instanceParameters.occludees=
D.addObject3DStateID(C.instanceParameters.occludees,r);this._notifyDirty("occlusionChanged");return r};E.removeOcclude=function(r){for(const C of this._geometryRecords)C.instanceParameters.occludees=D.removeObject3DStateID(C.instanceParameters.occludees,r);this._notifyDirty("occlusionChanged")};E.highlight=function(){const r=u.generateObject3DStateId(0);for(const C of this._geometryRecords)C.instanceParameters.highlights=D.addObject3DStateID(C.instanceParameters.highlights,r);this._notifyDirty("highlightChanged");
return r};E.removeHighlight=function(r){for(const C of this._geometryRecords)C.instanceParameters.highlights=D.removeObject3DStateID(C.instanceParameters.highlights,r);this._notifyDirty("highlightChanged")};E.getCombinedStaticTransformation=function(r,C){return t.multiply(A.unwrapOr(C,H.create()),this.objectTransformation,r.getStaticTransformation())};E.getCombinedShaderTransformation=function(r,C){C=C||H.create();t.multiply(C,this.objectTransformation,r.getShaderTransformation());return C};E.hasVolativeTransformation=
function(){return this._hasVolatileTransformation};E.getBBMin=function(r){this._validateBoundingVolume();return r?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin};E.getBBMax=function(r){this._validateBoundingVolume();return r?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax};E.getCenter=function(r){this._validateBoundingVolume();return r?this._bvObjectSpace.center:this._bvWorldSpace.center};E.getBSRadius=function(r){this._validateBoundingVolume();return r?this._bvObjectSpace.bsRadius:this._bvWorldSpace.bsRadius};
E._validateBoundingVolume=function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var r=0;r<this._geometryRecords.length;++r){var C=this._geometryRecords[r],O=this._geometries[r].boundingInfo;this._calculateTransformedBoundingVolume(O,this._bvObjectSpace,C.getShaderTransformation());this._calculateTransformedBoundingVolume(O,this._bvWorldSpace,this.getCombinedShaderTransformation(C))}S.lerp(this._bvObjectSpace.center,this._bvObjectSpace.bbMin,
this._bvObjectSpace.bbMax,.5);S.lerp(this._bvWorldSpace.center,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);r=w.create();C=w.create();O=I.maxScale(this.objectTransformation);for(let K=0;K<this._geometryRecords.length;++K){var P=this._geometries[K],T=this._geometryRecords[K].getShaderTransformation(),F=I.maxScale(T);P=P.boundingInfo;S.transformMat4(r,P.getCenter(),T);T=S.distance(r,this._bvObjectSpace.center);F*=P.getBSRadius();this._bvObjectSpace.bsRadius=Math.max(this._bvObjectSpace.bsRadius,
T+F);S.transformMat4(C,r,this.objectTransformation);T=S.distance(C,this._bvWorldSpace.center);this._bvWorldSpace.bsRadius=Math.max(this._bvWorldSpace.bsRadius,T+F*O)}this._bvDirty=!1}};E._calculateTransformedBoundingVolume=function(r,C,O){const P=r.getBBMin();r=r.getBBMax();const T=w.clone(P),F=w.clone(r);S.transformMat4(T,T,O);S.transformMat4(F,F,O);for(var K=0;3>K;++K)C.bbMin[K]=Math.min(C.bbMin[K],T[K],F[K]),C.bbMax[K]=Math.max(C.bbMax[K],T[K],F[K]);for(K=0;3>K;++K){S.copy(T,P);S.copy(F,r);T[K]=
r[K];F[K]=P[K];S.transformMat4(T,T,O);S.transformMat4(F,F,O);for(let J=0;3>J;++J)C.bbMin[J]=Math.min(C.bbMin[J],T[J],F[J]),C.bbMax[J]=Math.max(C.bbMax[J],T[J],F[J])}};E._invalidateBoundingVolume=function(){this._bvDirty=!0;this._parentLayer&&this._parentLayer.notifyObjectBBChanged(this,{center:this._bvWorldSpace.center,radius:this._bvWorldSpace.bsRadius})};E._notifyDirty=function(r,C,O,P){this._parentLayer&&this._parentLayer.notifyDirty(r,C,O||1,P||this)};q._createClass(z,[{key:"geometryRecords",
get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},{key:"objectTransformation",get:function(){return this._objectTransformation},set:function(r){t.copy(this._objectTransformation,r);this._invalidateBoundingVolume();this._notifyDirty("objTransformation")}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(r){v.assert(null==this._parentLayer||null==r,"Object3D can only be added to a single Layer");this._parentLayer=r}},{key:"isVisible",
get:function(){return this._visible}},{key:"test",get:function(){const r=this;return{hasGeometry:C=>-1<r._geometries.indexOf(C),getGeometryIndex:C=>r._geometries.indexOf(C)}}}]);return z}();B._idGen=new G.IdGen;let M=function(){function z(){this.bbMin=w.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.bbMax=w.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}z.prototype.isEmpty=function(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<
this.bbMin[2]};return z}(),N=function(z){function E(){var C=z.call(this)||this;C.center=w.create();C.bsRadius=0;return C}q._inheritsLoose(E,z);var r=E.prototype;r.init=function(){S.set(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);S.set(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);S.set(this.center,0,0,0);this.bsRadius=0};r.getCenter=function(){return this.center};r.getBSRadius=function(){return this.bsRadius};return E}(M);return B})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define(["../../../../core/ObjectPool",
"../../../../chunks/vec3","./IdGen"],function(q,A,w){let S=function(){function I(){}var t=I.prototype;t.acquire=function(H,v,G,y,u,D){this.id=I._idGen.gen(H&&H.id);this.geometry=H;this.material=v;this.transformation=G;this.instanceParameters=y;this.origin=u;this.shaderTransformation=D};t.getStaticTransformation=function(){return this.transformation};t.getShaderTransformation=function(){return this.shaderTransformation?this.shaderTransformation(this.transformation):this.transformation};t.computeAttachmentOrigin=
function(H){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,H):this.geometry.computeAttachmentOrigin(H))?(A.transformMat4(H,H,this.getStaticTransformation()),!0):!1};return I}();S._idGen=new w.IdGen;S.pool=new q(S);return S})},"esri/views/3d/webgl-engine/lib/Object3DStateSet":function(){define(["exports","./IdGen"],function(q,A){const w=new A.IdGen;A=function(){function S(){this.items=[]}var I=S.prototype;I.addObject=function(t,H){this.items.push({type:0,
objectStateId:H,object:t})};I.addRenderGeometry=function(t,H,v){this.items.push({type:1,objectStateId:H,renderGeometry:t,owner:v})};I.addExternal=function(t,H){this.items.push({type:2,objectStateId:H,remove:t})};I.remove=function(t){for(let H=this.items.length-1;0<=H;--H){const v=this.items[H];v.objectStateId===t&&(this._removeObjectStateItem(v),this.items.splice(H,1))}};I.removeObject=function(t){for(let H=this.items.length-1;0<=H;--H){const v=this.items[H];0===v.type&&v.object===t&&(this._removeObjectStateItem(v),
this.items.splice(H,1))}};I.removeRenderGeometry=function(t){for(let H=this.items.length-1;0<=H;--H){const v=this.items[H];1===v.type&&v.renderGeometry===t&&(this._removeObjectStateItem(v),this.items.splice(H,1))}};I.removeAll=function(){this.items.forEach(t=>{this._removeObjectStateItem(t)});this.items=[]};I._removeObjectStateItem=function(t){switch(t.type){case 0:0===t.objectStateId.channel?t.object.removeHighlight(t.objectStateId):1===t.objectStateId.channel&&t.object.removeOcclude(t.objectStateId);
break;case 1:t.owner.removeRenderGeometryObjectState(t.renderGeometry,t.objectStateId);break;case 2:t.remove(t.objectStateId)}};return S}();q.Object3DStateSet=A;q.generateObject3DStateId=function(S){return{id:w.gen(0===S?"highlight":"occludee"),channel:S}};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Layer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/Evented","../../../../chunks/vec3f64","./IdGen","./Octree"],function(q,
A,w,S,I){A=function(t){function H(G,y,u){var D=t.call(this)||this;D._parentStages=new Map;D._objects=new Set;D.id=H._idGen.gen(G);D.apiLayerUid=u;D.name=G;y=y||{};D.group=y.group||"";D.isVisible=null!=y.isVisible?y.isVisible:!0;D.isPickable=null!=y.isPickable?y.isPickable:!0;D.isSliceable=!1;D.translation=y.translation?w.clone(y.translation):w.create();return D}q._inheritsLoose(H,t);var v=H.prototype;v.addParentStage=function(G){if(!this._parentStages.has(G)){const y=this.on("dirty",u=>{G.notifyDirty(u.origin,
u.dirtyType,u.subObject)});this._parentStages.set(G,y)}};v.removeParentStage=function(G){const y=this._parentStages.get(G);y&&(y.remove(),this._parentStages.delete(G));this.invalidateSpatialQueryAccelerator()};v.getName=function(){return this.name};v.getGroup=function(){return this.group};v.getTranslation=function(){return this.translation};v.getObjectIds=function(){return Array.from(this._objects,G=>G.id)};v.getObjects=function(){return[...this._objects]};v.addObject=function(G){this._objects.add(G);
G.parentLayer=this;this.notifyDirty("layerObjectAdded",G);this._octree&&this._octree.add(G)};v.hasObject=function(G){return this._objects.has(G)};v.removeObject=function(G){if(!this._objects.delete(G))return!1;G.parentLayer=null;this.notifyDirty("layerObjectRemoved",G);this._octree&&this._octree.remove(G);return!0};v.notifyObjectBBChanged=function(G,y){this._octree&&this._octree.update(G,y)};v.getSpatialQueryAccelerator=function(){!this._octree&&50<this._objects.size&&this._createOctree();return this._octree};
v.shaderTransformationChanged=function(){this.notifyDirty("shaderTransformationChanged",null)};v.invalidateSpatialQueryAccelerator=function(){this._octree&&(this._octree.destroy(),this._octree=null)};v.notifyDirty=function(G,y,u,D){this.emit("dirty",{origin:D||this,dirtyType:G,subObject:y})};v._createOctree=function(){this._octree=new I({getRadius:G=>G.getBSRadius(),getCenter:G=>G.getCenter()});this._octree.add([...this._objects])};return H}(A);A._idGen=new S.IdGen;return A})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/geometryUtils ./Util".split(" "),
function(q,A,w,S,I,t,H){function v(la,X,U){U=U||la;U[0]=la[0]+X;U[1]=la[1]+X;U[2]=la[2]+X;return U}function G(la,X,U){return!t.frustum.intersectsSphere(U.planes,t.sphere.wrap(X,la))}function y(la,X,U){if(!oa.length)for(var ka=0;8>ka;++ka)oa.push({index:0,distance:0});for(ka=0;8>ka;++ka){const sa=z[ka];oa.data[ka].index=ka;oa.data[ka].distance=D(la,X,sa)}oa.sort((sa,qa)=>sa.distance-qa.distance);U.clear();for(la=0;8>la;++la)U.push(oa.data[la].index)}function u(la,X){let U=Infinity,ka=null;for(let sa=
0;8>sa;++sa){const qa=D(la,X,E[sa]);qa<U&&(U=qa,ka=E[sa])}return ka}function D(la,X,U){return X*(la[0]*U[0]+la[1]*U[1]+la[2]*U[2])}function B(la){if(Array.isArray(la))return la;C[0]=la;return C}let M=function(){function la(U,ka){this._objectToBoundingSphere=U;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._objectCount=0;ka&&(void 0!==ka.maximumObjectsPerNode&&(this._maximumObjectsPerNode=ka.maximumObjectsPerNode),void 0!==ka.maximumDepth&&(this._maximumDepth=
ka.maximumDepth));this._root=new N(null,S.fromValues(0,0,0),0)}var X=la.prototype;X.destroy=function(){this._degenerateObjects.clear();this._root=null;N.clearPool();C[0]=null;K.prune();oa.prune();ta.prune()};X.add=function(U,ka){U=B(U);ka=null==ka?U.length:ka;this._objectCount+=ka;this._grow(U,ka);const sa=N.acquire();for(let qa=0;qa<ka;qa++){const na=U[qa];this._isDegenerate(na)?this._degenerateObjects.add(na):(sa.init(this._root),this._add(na,sa))}N.release(sa)};X.remove=function(U,ka){var sa=B(U);
this._objectCount-=sa.length;U=N.acquire();for(const qa of sa)sa=ka||this._boundingSphereFromObject(qa,J),this._isValidRadius(sa.radius)?(U.init(this._root),this._remove(qa,sa,U)):this._degenerateObjects.delete(qa);N.release(U);this._shrink()};X.update=function(U,ka){if(this._isValidRadius(ka.radius)||!this._isDegenerate(U))this.remove(U,ka),this.add(U)};X.forEachAlongRay=function(U,ka,sa){const qa=t.ray.wrap(U,ka);this._forEachNode(this._root,na=>{if(!this._intersectsNode(qa,na))return!1;na=na.node;
na.terminals.forAll(pa=>{this._intersectsObject(qa,pa)&&sa(pa)});null!==na.residents&&na.residents.forAll(pa=>{this._intersectsObject(qa,pa)&&sa(pa)});return!0})};X.forEachAlongRayWithVerticalOffset=function(U,ka,sa,qa){const na=t.ray.wrap(U,ka);this._forEachNode(this._root,pa=>{if(!this._intersectsNodeWithOffset(na,pa,qa))return!1;pa=pa.node;pa.terminals.forAll(va=>{this._intersectsObjectWithOffset(na,va,qa)&&sa(va)});null!==pa.residents&&pa.residents.forAll(va=>{this._intersectsObjectWithOffset(na,
va,qa)&&sa(va)});return!0})};X.forEach=function(U){this._forEachNode(this._root,ka=>{ka=ka.node;ka.terminals.forAll(U);null!==ka.residents&&ka.residents.forAll(U);return!0});this._degenerateObjects.forEach(U)};X.forEachDegenerateObject=function(U){this._degenerateObjects.forEach(U)};X.findClosest=function(U,ka,sa,qa,na){return this._findClosest(U,"front-to-back"===ka?1:-1,sa,qa,na)};X.forEachInDepthRange=function(U,ka,sa,qa,na,pa,va,ja){this._forEachInDepthRange(U,ka,"front-to-back"===sa?1:-1,qa,
na,pa,va,ja)};X.forEachNode=function(U){this._forEachNode(this._root,ka=>U(ka.node,ka.center,2*ka.halfSize))};X._intersectsNode=function(U,ka){v(ka.center,2*-ka.halfSize,T);v(ka.center,2*ka.halfSize,F);return H.rayBoxTest(U.origin,U.direction,T,F)};X._intersectsNodeWithOffset=function(U,ka,sa){v(ka.center,2*-ka.halfSize,T);v(ka.center,2*ka.halfSize,F);sa.applyToMinMax(T,F);return H.rayBoxTest(U.origin,U.direction,T,F)};X._intersectsObject=function(U,ka){const sa=this._objectToBoundingSphere.getRadius(ka);
return 0<sa?t.sphere.intersectsRay(t.sphere.wrap(sa,this._objectToBoundingSphere.getCenter(ka)),U):!0};X._intersectsObjectWithOffset=function(U,ka,sa){const qa=this._objectToBoundingSphere.getRadius(ka);return 0<qa?t.sphere.intersectsRay(sa.applyToBoundingSphere(qa,this._objectToBoundingSphere.getCenter(ka)),U):!0};X._forEachNode=function(U,ka){U=N.acquire().init(U);const sa=[U];for(;0!==sa.length;){U=sa.pop();if(ka(U)&&!U.isLeaf())for(let qa=0;qa<U.node.children.length;qa++)U.node.children[qa]&&
sa.push(N.acquire().init(U).advance(qa));N.release(U)}};X._forEachNodeDepthOrdered=function(U,ka,sa,qa=1){U=N.acquire().init(U);const na=[U];for(y(sa,qa,ta);0!==na.length;){U=na.pop();if(ka(U)&&!U.isLeaf())for(sa=7;0<=sa;--sa)qa=ta.data[sa],qa>=U.node.children.length||U.node.children[qa]&&na.push(N.acquire().init(U).advance(qa));N.release(U)}};X._findClosest=function(U,ka,sa,qa,na){let pa=Infinity,va=Infinity,ja=null;const ua=u(U,ka);let Aa=0;const Ga=Na=>{++Aa;if(!qa||qa(Na)){var Oa=this._objectToBoundingSphere.getCenter(Na),
Z=this._objectToBoundingSphere.getRadius(Na);if(!sa||!G(Oa,Z,sa)){Oa=D(U,ka,Oa);var ha=Oa-Z;ha<pa&&(pa=ha,va=Oa+Z,ja=Na)}}};this._forEachNodeDepthOrdered(this._root,Na=>{if(null!=na&&Aa>=na||sa&&G(Na.center,Na.halfSize*r,sa))return!1;I.scale(P,ua,Na.halfSize);I.add(P,P,Na.center);if(D(U,ka,P)>va)return!1;Na=Na.node;Na.terminals.forAll(Oa=>{Ga(Oa)});null!==Na.residents&&Na.residents.forAll(Oa=>{Ga(Oa)});return!0},U,ka);return ja};X._forEachInDepthRange=function(U,ka,sa,qa,na,pa,va,ja){let ua=-Infinity,
Aa=Infinity;const Ga={setRange:Da=>{1===sa?(ua=Math.max(ua,Da.near),Aa=Math.min(Aa,Da.far)):(ua=Math.max(ua,-Da.far),Aa=Math.min(Aa,-Da.near))}};Ga.setRange(qa);const Na=D(ka,sa,U),Oa=u(ka,sa),Z=u(ka,-1*sa);let ha=0;const Ca=Da=>{++ha;if(!va||va(Da)){var Ja=this._objectToBoundingSphere.getCenter(Da),Fa=this._objectToBoundingSphere.getRadius(Da),fa=D(ka,sa,Ja)-Na;fa-Fa>Aa||fa+Fa<ua||pa&&G(Ja,Fa,pa)||na(Da,Ga)}};this._forEachNodeDepthOrdered(this._root,Da=>{if(null!=ja&&ha>=ja||pa&&G(Da.center,Da.halfSize*
r,pa))return!1;I.scale(P,Oa,Da.halfSize);I.add(P,P,Da.center);if(D(ka,sa,P)-Na>Aa)return!1;I.scale(P,Z,Da.halfSize);I.add(P,P,Da.center);if(D(ka,sa,P)-Na<ua)return!1;Da=Da.node;Da.terminals.forAll(Ja=>{Ca(Ja)});null!==Da.residents&&Da.residents.forAll(Ja=>{Ca(Ja)});return!0},ka,sa)};X._remove=function(U,ka,sa){K.clear();ka=sa.advanceTo(ka,(qa,na)=>{K.push(qa.node);K.push(na)})?sa.node.terminals:sa.node.residents;ka.removeUnordered(U);if(0===ka.length)for(U=K.length-2;0<=U&&this._purge(K.data[U],K.data[U+
1]);U-=2);};X._nodeIsEmpty=function(U){if(0!==U.terminals.length)return!1;if(null!==U.residents)return 0===U.residents.length;for(let ka=0;ka<U.children.length;ka++)if(U.children[ka])return!1;return!0};X._purge=function(U,ka){0<=ka&&(U.children[ka]=null);return this._nodeIsEmpty(U)?(null===U.residents&&(U.residents=new w({shrink:!0})),!0):!1};X._add=function(U,ka){ka.advanceTo(this._boundingSphereFromObject(U,J))?ka.node.terminals.push(U):(ka.node.residents.push(U),ka.node.residents.length>this._maximumObjectsPerNode&&
ka.depth<this._maximumDepth&&this._split(ka))};X._split=function(U){const ka=U.node.residents;U.node.residents=null;for(let sa=0;sa<ka.length;sa++){const qa=N.acquire().init(U);this._add(ka.data[sa],qa);N.release(qa)}};X._grow=function(U,ka){0!==ka&&(U=this._boundingSphereFromObjects(U,ka,(sa,qa)=>this._boundingSphereFromObject(sa,qa),L),this._isValidRadius(U.radius)&&!this._fitsInsideTree(U)&&(this._nodeIsEmpty(this._root.node)?(I.copy(this._root.center,U.center),this._root.halfSize=1.25*U.radius):
(ka=N.acquire(),this._rootBoundsForRootAsSubNode(U,ka),this._placingRootViolatesMaxDepth(ka)?this._rebuildTree(U,ka):this._growRootAsSubNode(ka),N.release(ka))))};X._rebuildTree=function(U,ka){I.copy(Y.center,ka.center);Y.radius=ka.halfSize;U=this._boundingSphereFromObjects([U,Y],2,sa=>sa,W);ka=N.acquire().init(this._root);this._root.initFrom(null,U.center,1.25*U.radius);this._forEachNode(ka,sa=>{this.add(sa.node.terminals.data,sa.node.terminals.length);null!==sa.node.residents&&this.add(sa.node.residents.data,
sa.node.residents.length);return!0});N.release(ka)};X._placingRootViolatesMaxDepth=function(U){let ka=0;this._forEachNode(this._root,sa=>{ka=Math.max(ka,sa.depth);return!0});return ka+Math.log(U.halfSize/this._root.halfSize)*Math.LOG2E>this._maximumDepth};X._rootBoundsForRootAsSubNode=function(U,ka){var sa=U.radius,qa=U.center;U=-Infinity;const na=this._root.center,pa=this._root.halfSize;for(var va=0;3>va;va++){var ja=Math.max(0,Math.ceil((na[va]-pa-(qa[va]-sa))/(2*pa)));const ua=Math.max(0,Math.ceil((qa[va]+
sa-(na[va]+pa))/(2*pa)))+1;U=Math.max(U,Math.pow(2,Math.ceil(Math.log(ja+ua)*Math.LOG2E)));aa[va].min=ja;aa[va].max=ua}for(sa=0;3>sa;sa++)qa=aa[sa].min,va=aa[sa].max,ja=(U-(qa+va))/2,qa+=Math.ceil(ja),va+=Math.floor(ja),O[sa]=na[sa]-pa-qa*pa*2+(va+qa)*pa;return ka.initFrom(null,O,U*pa,0)};X._growRootAsSubNode=function(U){const ka=this._root.node;I.copy(L.center,this._root.center);L.radius=this._root.halfSize;this._root.init(U);U.advanceTo(L,null,!0);U.node.children=ka.children;U.node.residents=ka.residents;
U.node.terminals=ka.terminals};X._shrink=function(){for(;;){const U=this._findShrinkIndex();if(-1===U)break;this._root.advance(U);this._root.depth=0}};X._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let U=null;const ka=this._root.node.children;let sa=0,qa=0;for(;qa<ka.length&&null==U;)sa=qa++,U=ka[sa];for(;qa<ka.length;)if(ka[qa++])return-1;return sa};X._isDegenerate=function(U){U=this._objectToBoundingSphere.getRadius(U);return!this._isValidRadius(U)};
X._isValidRadius=function(U){return!isNaN(U)&&-Infinity!==U&&Infinity!==U&&0<U};X._fitsInsideTree=function(U){const ka=this._root.center,sa=this._root.halfSize,qa=U.center;return U.radius<=sa&&qa[0]>=ka[0]-sa&&qa[0]<=ka[0]+sa&&qa[1]>=ka[1]-sa&&qa[1]<=ka[1]+sa&&qa[2]>=ka[2]-sa&&qa[2]<=ka[2]+sa};X._boundingSphereFromObject=function(U,ka){I.copy(ka.center,this._objectToBoundingSphere.getCenter(U));ka.radius=this._objectToBoundingSphere.getRadius(U);return ka};X._boundingSphereFromObjects=function(U,
ka,sa,qa){if(1===ka)U=sa(U[0],L),I.copy(qa.center,U.center),qa.radius=U.radius;else{T[0]=Infinity;T[1]=Infinity;T[2]=Infinity;F[0]=-Infinity;F[1]=-Infinity;F[2]=-Infinity;for(let ua=0;ua<ka;ua++){var na=sa(U[ua],L);if(this._isValidRadius(na.radius)){var pa=T,va=na.center,ja=na.radius;pa[0]=Math.min(pa[0],va[0]-ja);pa[1]=Math.min(pa[1],va[1]-ja);pa[2]=Math.min(pa[2],va[2]-ja);pa=F;va=na.center;na=na.radius;pa[0]=Math.max(pa[0],va[0]+na);pa[1]=Math.max(pa[1],va[1]+na);pa[2]=Math.max(pa[2],va[2]+na)}}I.lerp(qa.center,
T,F,.5);qa.radius=Math.max(F[0]-T[0],F[1]-T[1],F[2]-T[2])/2}return qa};q._createClass(la,[{key:"center",get:function(){return this._root.center}},{key:"size",get:function(){return 2*this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}}]);return la}(),N=function(){function la(U,
ka,sa=0){this.center=S.create();this.initFrom(U,ka,sa,0)}var X=la.prototype;X.init=function(U){return this.initFrom(U.node,U.center,U.halfSize,U.depth)};X.initFrom=function(U=null,ka,sa=this.halfSize,qa=this.depth){this.node=U||la.createEmptyNode();ka&&I.copy(this.center,ka);this.halfSize=sa;this.depth=qa;return this};X.advance=function(U){let ka=this.node.children[U];ka||(ka=la.createEmptyNode(),this.node.children[U]=ka);this.node=ka;this.halfSize/=2;this.depth++;U=z[U];this.center[0]+=U[0]*this.halfSize;
this.center[1]+=U[1]*this.halfSize;this.center[2]+=U[2]*this.halfSize;return this};X.advanceTo=function(U,ka,sa=!1){for(;;){if(this.isTerminalFor(U))return ka&&ka(this,-1),!0;if(this.isLeaf()&&!sa)return ka&&ka(this,-1),!1;this.isLeaf()&&(this.node.residents=null);const qa=this._childIndex(U);ka&&ka(this,qa);this.advance(qa)}};X.isLeaf=function(){return null!=this.node.residents};X.isTerminalFor=function(U){return U.radius>this.halfSize/2};X._childIndex=function(U){U=U.center;const ka=this.center;
let sa=0;for(let qa=0;3>qa;qa++)ka[qa]<U[qa]&&(sa|=1<<qa);return sa};la.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new w({shrink:!0}),residents:new w({shrink:!0})}};la.acquire=function(){return la._pool.acquire()};la.release=function(U){la._pool.release(U)};la.clearPool=function(){la._pool.prune()};return la}();N._pool=new A(N);const z=[S.fromValues(-1,-1,-1),S.fromValues(1,-1,-1),S.fromValues(-1,1,-1),S.fromValues(1,1,-1),S.fromValues(-1,-1,1),
S.fromValues(1,-1,1),S.fromValues(-1,1,1),S.fromValues(1,1,1)],E=[S.fromValues(-1,-1,-1),S.fromValues(-1,-1,1),S.fromValues(-1,1,-1),S.fromValues(-1,1,1),S.fromValues(1,-1,-1),S.fromValues(1,-1,1),S.fromValues(1,1,-1),S.fromValues(1,1,1)],r=Math.sqrt(3),C=[null],O=S.create(),P=S.create(),T=S.create(),F=S.create(),K=new w,J={center:S.create(),radius:0},L={center:S.create(),radius:0},Y={center:S.create(),radius:0},W={center:S.create(),radius:0},aa=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],oa=new w,
ta=new w;return M})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/compilerUtils ../../../../core/typedArrayUtil ../../../../core/maybe ../../../../core/Error ../../../../core/urlUtils ../../../../core/promiseUtils ../../../../core/Evented ../../../../core/mathUtils ../../../../support/requestUtils ../../../../support/requestImageUtils ./Util ../../../webgl/Texture ../../../webgl/Util ./glUtil3D ./IdGen ../../../webgl/FramebufferObject ../../../webgl/capabilities/isWebGL2Context ./DDSUtil".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C){let O=function(){function P(F,K,J){this.data=F;this.loadingController=this.loadingPromise=this.powerOfTwoStretchInfo=this.glTexture=null;this.events=new v;this.data=F;this.id=P.idGen.gen(K);this.params=J||{};this.params.mipmap=!1!==this.params.mipmap;this.params.noUnpackFlip=this.params.noUnpackFlip||!1;this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1;this.params.wrap=this.params.wrap||{s:10497,t:10497};this.params.powerOfTwoResizeMode=
this.params.powerOfTwoResizeMode||1;this.estimatedTexMemRequired=P.estimateTexMemRequired(this.data,this.params);this.startPreload()}var T=P.prototype;T.startPreload=function(){const F=this.data;S.isNone(F)||(F instanceof HTMLVideoElement?this.startPreloadVideoElement(F):F instanceof HTMLImageElement&&this.startPreloadImageElement(F))};T.startPreloadVideoElement=function(F){t.isBlobProtocol(F.src)||"auto"===F.preload&&F.crossOrigin||(F.preload="auto",F.crossOrigin="anonymous",F.src=F.src)};T.startPreloadImageElement=
function(F){t.isDataProtocol(F.src)||t.isBlobProtocol(F.src)||F.crossOrigin||(F.crossOrigin="anonymous",F.src=F.src)};P.getDataDimensions=function(F){return F instanceof HTMLVideoElement?{width:F.videoWidth,height:F.videoHeight}:F};P.estimateTexMemRequired=function(F,K){if(S.isNone(F))return 0;if(w.isArrayBuffer(F)||w.isUint8Array(F))return F.byteLength;const {width:J,height:L}=F instanceof Image||F instanceof ImageData||F instanceof HTMLCanvasElement||F instanceof HTMLVideoElement?P.getDataDimensions(F):
K;return(K.mipmap?4/3:1)*J*L*(K.components||4)||0};T.dispose=function(){this.data=void 0};T.createDescriptor=function(F){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.mipmap&&!this.params.disableAnisotropy?F.parameters.maxMaxAnisotropy:void 0}};T.load=function(F,K){if(S.isSome(this.glTexture))return this.glTexture;
if(S.isSome(this.loadingPromise))return this.loadingPromise;const J=this.data;return S.isNone(J)?(this.glTexture=new B(F,this.createDescriptor(F),null),F.bindTexture(this.glTexture,0),this.glTexture):"string"===typeof J?this.loadFromURL(F,K,J):J instanceof Image?this.loadFromImageElement(F,K,J):J instanceof HTMLVideoElement?this.loadFromVideoElement(F,K,J):J instanceof ImageData||J instanceof HTMLCanvasElement?this.loadFromImage(F,J,K):(w.isArrayBuffer(J)||w.isUint8Array(J))&&this.params.encoding===
P.DDS_ENCODING?this.loadFromDDSData(F,J):w.isUint8Array(J)?this.loadFromPixelData(F,J):w.isArrayBuffer(J)?this.loadFromPixelData(F,new Uint8Array(J)):null};T.frameUpdate=function(F,K,J){if(!(this.data instanceof HTMLVideoElement)||S.isNone(this.glTexture)||2>this.data.readyState||J===this.data.currentTime)return J;if(S.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:L,vao:Y,sourceTexture:W}=this.powerOfTwoStretchInfo;W.setData(this.data);this.drawStretchedTexture(F,K,L,Y,W,this.glTexture)}else{const {width:L,
height:Y}=this.data,{width:W,height:aa}=this.glTexture.descriptor;L!==W||Y!==aa?this.glTexture.updateData(0,0,0,Math.min(L,W),Math.min(Y,aa),this.data):this.glTexture.setData(this.data)}this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap();return this.data.currentTime};T.loadFromDDSData=function(F,K){this.glTexture=C.createDDSTexture(F,this.createDescriptor(F),K,this.params.mipmap);F.bindTexture(this.glTexture,0);return this.glTexture};T.loadFromPixelData=function(F,K){D.assert(0<this.params.width&&
0<this.params.height);const J=this.createDescriptor(F);J.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408;J.width=this.params.width;J.height=this.params.height;this.glTexture=new B(F,J,K);F.bindTexture(this.glTexture,0);return this.glTexture};T.loadAsync=async function(F){const K=H.createAbortController();this.loadingController=K;const J=F(K.signal);this.loadingPromise=J;F=()=>{this.loadingController===K&&(this.loadingController=null);this.loadingPromise===J&&(this.loadingPromise=
null)};J.then(F,F);return J};T.loadFromURL=function(F,K,J){return this.loadAsync(async L=>{L=await u.requestImage(J,{signal:L});return this.loadFromImage(F,L,K)})};T.loadFromImageElement=function(F,K,J){return J.complete?this.loadFromImage(F,J,K):this.loadAsync(async L=>{L=await y.loadImageAsync(J,J.src,!1,L);return this.loadFromImage(F,L,K)})};T.loadFromVideoElement=function(F,K,J){return 2<=J.readyState?this.loadFromImage(F,J,K):this.loadFromVideoElementAsync(F,K,J)};T.loadFromVideoElementAsync=
function(F,K,J){return this.loadAsync(L=>H.create((Y,W)=>{const aa=()=>{J.removeEventListener("loadeddata",oa);J.removeEventListener("error",ta);S.isSome(la)&&la.remove()},oa=()=>{2<=J.readyState&&(aa(),Y(this.loadFromImage(F,J,K)))},ta=X=>{aa();W(X||new I("Failed to load video"))};J.addEventListener("loadeddata",oa);J.addEventListener("error",ta);const la=H.onAbort(L,()=>ta(H.createAbortError()))}))};T.loadFromImage=function(F,K,J){const L=P.getDataDimensions(K);this.params.width=L.width;this.params.height=
L.height;const Y=this.createDescriptor(F);Y.pixelFormat=3===this.params.components?6407:6408;if(this.requiresPowerOfTwo(F,Y)&&(!G.isPowerOfTwo(L.width)||!G.isPowerOfTwo(L.height)))return this.glTexture=this.makePowerOfTwoTexture(F,K,L,Y,J),F.bindTexture(this.glTexture,0),this.glTexture;Y.width=L.width;Y.height=L.height;this.glTexture=new B(F,Y,K);F.bindTexture(this.glTexture,0);return this.glTexture};T.requiresPowerOfTwo=function(F,K){const J="number"===typeof K.wrapMode?33071===K.wrapMode:33071===
K.wrapMode.s&&33071===K.wrapMode.t;return!r(F.gl)&&(K.hasMipmap||!J)};T.makePowerOfTwoTexture=function(F,K,J,L,Y){const {width:W,height:aa}=J;J=G.nextHighestPowerOfTwo(W);const oa=G.nextHighestPowerOfTwo(aa);L.width=J;L.height=oa;let ta;switch(this.params.powerOfTwoResizeMode){case 2:L.textureCoordinateScaleFactor=[W/J,aa/oa];ta=new B(F,L);ta.updateData(0,0,0,W,aa,K);break;case 1:case null:case void 0:ta=this.stretchToPowerOfTwo(F,K,L,Y);break;default:A.neverReached(this.params.powerOfTwoResizeMode)}L.hasMipmap&&
ta.generateMipmap();return ta};T.stretchToPowerOfTwo=function(F,K,J,L){const Y=new B(F,J),W=new E(F,{colorTarget:0,depthStencilTarget:0},Y);K=new B(F,{target:3553,pixelFormat:J.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!J.flipped,maxAnisotropy:8,preMultiplyAlpha:J.preMultiplyAlpha},K);J=N.createQuadVAO(F);this.drawStretchedTexture(F,L,W,J,K,Y);this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:J,sourceTexture:K,framebuffer:W}:(J.dispose(!0),K.dispose(),W.detachColorTexture(),
F.bindFramebuffer(null),W.dispose());return Y};T.drawStretchedTexture=function(F,K,J,L,Y,W){F.bindFramebuffer(J);J=F.getViewport();F.setViewport(0,0,W.descriptor.width,W.descriptor.height);W=K.program;F.bindProgram(W);W.setUniform4f("color",1,1,1,1);W.setUniform1i("tex",0);F.bindTexture(Y,0);F.bindVAO(L);F.setPipelineState(K.pipeline);F.drawArrays(5,0,M.vertexCount(L,"geometry"));F.bindFramebuffer(null);F.setViewport(J.x,J.y,J.width,J.height)};T.unload=function(){if(S.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:F,
vao:K,sourceTexture:J}=this.powerOfTwoStretchInfo;K.dispose(!0);J.dispose();F.dispose();this.powerOfTwoStretchInfo=this.glTexture=null}S.isSome(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null);if(S.isSome(this.loadingController)){const F=this.loadingController;this.loadingPromise=this.loadingController=null;F.abort()}this.events.emit("unloaded")};q._createClass(P,[{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}},{key:"requiresFrameUpdates",
get:function(){return this.data instanceof HTMLVideoElement}}]);return P}();O.idGen=new z.IdGen;O.DDS_ENCODING="image/vnd-ms.dds";return O})},"esri/support/requestImageUtils":function(){define(["exports","../request"],function(q,A){q.requestImage=async function(w,S){({data:w}=await A(w,{responseType:"image",...S}));return w};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["exports","../../../../core/Logger","../../../../core/mathUtils",
"../../../webgl/Texture"],function(q,A,w,S){function I(u){return u.charCodeAt(0)+(u.charCodeAt(1)<<8)+(u.charCodeAt(2)<<16)+(u.charCodeAt(3)<<24)}function t(u,D){var B=new Int32Array(u,0,31);if(542327876!==B[0])return H.error("Invalid magic number in DDS header"),null;if(!(B[20]&4))return H.error("Unsupported format, must contain a FourCC code"),null;var M=B[21];let N;switch(M){case v:M=8;N=33776;break;case G:M=16;N=33778;break;case y:M=16;N=33779;break;default:return H.error("Unsupported FourCC code:",
String.fromCharCode(M&255,M>>8&255,M>>16&255,M>>24&255)),null}let z=1,E=B[4],r=B[3];if(0!==(E&3)||0!==(r&3))H.warn("Rounding up compressed texture size to nearest multiple of 4."),E=E+3&-4,r=r+3&-4;const C=E,O=r;B[2]&131072&&!1!==D&&(z=Math.max(1,B[7]));1===z||w.isPowerOfTwo(E)&&w.isPowerOfTwo(r)||(H.warn("Ignoring mipmaps of non power of two sized compressed texture."),z=1);let P=B[1]+4;const T=[];for(let F=0;F<z;++F)B=(E+3>>2)*(r+3>>2)*M,D=new Uint8Array(u,P,B),T.push(D),P+=B,E=Math.max(1,E>>1),
r=Math.max(1,r>>1);return{textureData:{type:"compressed",levels:T},internalFormat:N,width:C,height:O}}const H=A.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),v=I("DXT1"),G=I("DXT3"),y=I("DXT5");q.createDDSTexture=function(u,D,B,M){const {textureData:N,internalFormat:z,width:E,height:r}=t(B,M);D.samplingMode=1<N.levels.length?9987:9729;D.hasMipmap=1<N.levels.length;D.internalFormat=z;D.width=E;D.height=r;D=new S(u,D,N);u.bindTexture(D,0);return D};q.createDDSTextureData=t;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/RightAngleQuadVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec4 ../../support/stack ../../webgl-engine/lib/GeometryData ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Geometry ../../webgl-engine/materials/RibbonLineMaterial ../../webgl-engine/materials/ColorMaterial ../../../../chunks/vec4f32 ./Object3DVisualElement".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E){E=function(r){function C(P){var T=r.call(this,P)||this;T._handles=new t;T._quadMaterial=null;T._outlineMaterial=null;T._maxSize=0;T._position=S.create();T._up=S.create();T._right=S.create();T._transform=v.create();T._renderOccluded=4;T._color=z.fromValues(1,0,0,1);T._outlineColor=z.fromValues(0,0,0,1);T._outlineSize=0;T._size=32;T._outlineRenderOccluded=16;T.applyProps(P);return T}A._inheritsLoose(C,r);var O=C.prototype;O.createExternalResources=function(){this._quadMaterial=
new N.ColorMaterial(this.quadMaterialParameters,"right-angle-quad");this._outlineMaterial=new M.RibbonLineMaterial(this.outlineMaterialParameters,"right-angle-quad-outline");this._handles.add(this.view.state.watch("camera",()=>{this._updateTransform()}))};O.destroyExternalResources=function(){this._outlineMaterial=this._quadMaterial=null;this._handles.removeAll()};O.forEachExternalResource=function(P){P(this._quadMaterial);P(this._outlineMaterial)};O.createGeometries=function(P){this._createQuadGeometry(P);
this._createOutlineGeometry(P);this._updateTransform(P)};O._createQuadGeometry=function(P){const T=new B(this._quadGeometryData(this._up,this._right),"right-angle-quad");P.addGeometry(T,this._quadMaterial)};O._createOutlineGeometry=function(P){if(0!==this._outlineSize){var T=I.add(y.sv3d.get(),this._up,this._right);T=new B(D.createPolylineGeometry([this._up,T,this._right]),"right-angle-quad-outline");P.addGeometry(T,this._outlineMaterial)}};O._updateTransform=function(P=this.object){var T=this._size*
this.view.state.camera.computeScreenPixelSizeAt(this._position);T=Math.min(this._maxSize,T);H.identity(this._transform);H.translate(this._transform,this._transform,this._position);H.scale(this._transform,this._transform,[T,T,T]);w.isSome(P)&&(P.objectTransformation=this._transform)};O._quadGeometryData=function(P,T){const F=I.add(y.sv3d.get(),P,T);return new u.GeometryData({position:{size:3,data:[0,0,0,...T,...P,...F]}},{position:new Uint32Array([0,1,2,1,2,3])})};O._updateQuadMaterial=function(){this._quadMaterial&&
this._quadMaterial.setParameterValues(this.quadMaterialParameters)};O._updateOutlineMaterial=function(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)};A._createClass(C,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(P){P!==this._renderOccluded&&(this._renderOccluded=P,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(P){G.copy(this._color,P);this._updateQuadMaterial()}},{key:"outlineColor",
get:function(){return this._outlineColor},set:function(P){G.copy(this._outlineColor,P);this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(P){const T=0===this._outlineSize!==(0===P);this._outlineSize=P;T?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(P){P!==this._size&&(this._size=P,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},
set:function(P){this._outlineRenderOccluded=P;this._updateOutlineMaterial()}},{key:"geometry",set:function({previous:P,center:T,next:F}){this._maxSize=Math.min(I.distance(T,P),I.distance(T,F))/3;I.normalize(this._up,I.subtract(this._up,P,T));I.normalize(this._right,I.subtract(this._right,F,T));I.copy(this._position,T);this.recreateGeometry()}},{key:"quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},
{key:"outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}}]);return C}(E.Object3DVisualElement);q.RightAngleQuadVisualElement=E;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/ColorMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../lib/GLMaterial ./internal/MaterialUtil ../lib/Material ../lib/OrderIndependentTransparency ./internal/DefaultBufferWriter ../shaders/ColorMaterialTechnique".split(" "),
function(q,A,w,S,I,t,H,v){let G=function(D){function B(N,z){N=D.call(this,z,N,u)||this;N.supportsEdges=!0;N.techniqueConfig=new v.ColorMaterialTechniqueConfiguration;return N}A._inheritsLoose(B,D);var M=B.prototype;M.getTechniqueConfig=function(N,z){this.techniqueConfig.output=N;this.techniqueConfig.cullFace=this.params.cullFace;this.techniqueConfig.vertexColors=this.params.vertexColors;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;
this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.transparencyPassType=z?z.transparencyPassType:3;this.techniqueConfig.enableOffset=z?z.camera.relativeElevation<t.OITPolygonOffsetLimit:!0;return this.techniqueConfig};M.getPassParameters=function(){return this.params};M.intersect=function(N,z,E,r,C,O,P){S.intersectTriangleGeometry(N,z,r,C,O,void 0,
P)};M.getGLMaterial=function(N){return 0===N.output||7===N.output||4===N.output||1===N.output&&this.params.writeLinearDepth?new y(N):void 0};M.createBufferWriter=function(){return new H.DefaultBufferWriter(H.PositionColorLayout)};return B}(I.Material),y=function(D){function B(N){N=D.call(this,N)||this;N.updateParameters();return N}A._inheritsLoose(B,D);var M=B.prototype;M.updateParameters=function(N){this.technique=this.techniqueRep.acquireAndReleaseExisting(v.ColorMaterialTechnique,this.material.getTechniqueConfig(this.output,
N),this.technique)};M.beginSlot=function(N){return 4===this.output?3===N:N===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)};M._updateOccludeeState=function(N){N.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:N.hasOccludees})};M.ensureParameters=function(N){0!==this.output&&7!==this.output||this._updateOccludeeState(N);this.updateParameters(N)};M.bind=function(N,z){N.bindProgram(this.technique.program);
this.technique.bindPass(N,this.material.getPassParameters(),z)};M.getPipelineState=function(N,z){return this.technique.getPipelineState(z)};return B}(w);const u={color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,...I.materialParametersDefaults};q.ColorMaterial=G;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/DefaultBufferWriter":function(){define(["exports",
"../../../support/buffer/InterleavedLayout","../../lib/Util","./bufferWriterUtils"],function(q,A,w,S){const I=A.newLayout().vec3f(w.VertexAttrConstants.POSITION),t=A.newLayout().vec3f(w.VertexAttrConstants.POSITION).vec2f(w.VertexAttrConstants.UV0),H=A.newLayout().vec3f(w.VertexAttrConstants.POSITION).vec4u8(w.VertexAttrConstants.COLOR),v=A.newLayout().vec3f(w.VertexAttrConstants.POSITION).vec4u8(w.VertexAttrConstants.COLOR).vec4f(w.VertexAttrConstants.UVMAPSPACE).vec3f(w.VertexAttrConstants.MEANVERTEXPOSITION);
A=A.newLayout().vec3f(w.VertexAttrConstants.POSITION).vec4u8(w.VertexAttrConstants.COLOR).vec4f(w.VertexAttrConstants.UVMAPSPACE).vec3f(w.VertexAttrConstants.BOUND1).vec3f(w.VertexAttrConstants.BOUND2).vec3f(w.VertexAttrConstants.BOUND3);let G=function(){function y(D){this.vertexBufferLayout=D}var u=y.prototype;u.allocate=function(D){return this.vertexBufferLayout.createBuffer(D)};u.elementCount=function(D){return D.indices[w.VertexAttrConstants.POSITION].length};u.write=function(D,B,M,N){S.writeDefaultAttributes(B,
this.vertexBufferLayout,D.transformation,D.invTranspTransformation,M,N)};return y}();q.DefaultBufferWriter=G;q.PositionColorLayout=H;q.PositionColorMapSpaceUVBoundsLayout=A;q.PositionColorMapSpaceUVLayout=v;q.PositionLayout=I;q.PositionUVLayout=t;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/bufferWriterUtils":function(){define(["exports","../../../support/buffer/BufferView","../../lib/Util"],function(q,A,w){function S(y,u,D,B,M){const N=D.typedBuffer;
D=D.typedBufferStride;const z=y.length;B*=D;if(null==M||1===M)for(M=0;M<z;++M){var E=2*y[M];N[B]=u[E];N[B+1]=u[E+1];B+=D}else for(E=0;E<z;++E){const r=2*y[E];for(let C=0;C<M;++C)N[B]=u[r],N[B+1]=u[r+1],B+=D}}function I(y,u,D,B,M){const N=D.typedBuffer;D=D.typedBufferStride;const z=y.length;B*=D;if(null==M||1===M)for(M=0;M<z;++M){var E=3*y[M];N[B]=u[E];N[B+1]=u[E+1];N[B+2]=u[E+2];B+=D}else for(E=0;E<z;++E){const r=3*y[E];for(let C=0;C<M;++C)N[B]=u[r],N[B+1]=u[r+1],N[B+2]=u[r+2],B+=D}}function t(y,
u,D,B,M){const N=D.typedBuffer;D=D.typedBufferStride;const z=y.length;B*=D;if(null==M||1===M)for(M=0;M<z;++M){var E=4*y[M];N[B]=u[E];N[B+1]=u[E+1];N[B+2]=u[E+2];N[B+3]=u[E+3];B+=D}else for(E=0;E<z;++E){const r=4*y[E];for(let C=0;C<M;++C)N[B]=u[r],N[B+1]=u[r+1],N[B+2]=u[r+2],N[B+3]=u[r+3],B+=D}}function H(y,u,D,B,M,N){if(D){const P=B.typedBuffer;B=B.typedBufferStride;const T=y.length;M*=B;if(null==N||1===N)for(N=0;N<T;++N){var z=3*y[N],E=u[z],r=u[z+1];z=u[z+2];P[M]=D[0]*E+D[4]*r+D[8]*z+D[12];P[M+1]=
D[1]*E+D[5]*r+D[9]*z+D[13];P[M+2]=D[2]*E+D[6]*r+D[10]*z+D[14];M+=B}else for(E=0;E<T;++E){r=3*y[E];var C=u[r],O=u[r+1];const F=u[r+2];r=D[0]*C+D[4]*O+D[8]*F+D[12];z=D[1]*C+D[5]*O+D[9]*F+D[13];C=D[2]*C+D[6]*O+D[10]*F+D[14];for(O=0;O<N;++O)P[M]=r,P[M+1]=z,P[M+2]=C,M+=B}}else I(y,u,B,M,N)}function v(y,u,D,B,M,N){if(D){const P=B.typedBuffer;B=B.typedBufferStride;const T=y.length,F=D[0],K=D[1],J=D[2],L=D[4],Y=D[5],W=D[6],aa=D[8],oa=D[9];D=D[10];const ta=1E-5<Math.abs(1-F*F+L*L+aa*aa)||1E-5<Math.abs(1-K*
K+Y*Y+oa*oa)||1E-5<Math.abs(1-J*J+W*W+D*D);M*=B;if(null==N||1===N)for(N=0;N<T;++N){var z=3*y[N],E=u[z],r=u[z+1],C=u[z+2];z=F*E+L*r+aa*C;var O=K*E+Y*r+oa*C;E=J*E+W*r+D*C;ta&&(r=z*z+O*O+E*E,.999999>r&&1E-6<r&&(r=Math.sqrt(r),z/=r,O/=r,E/=r));P[M+0]=z;P[M+1]=O;P[M+2]=E;M+=B}else for(z=0;z<T;++z){O=3*y[z];r=u[O];C=u[O+1];const la=u[O+2];O=F*r+L*C+aa*la;E=K*r+Y*C+oa*la;r=J*r+W*C+D*la;ta&&(C=O*O+E*E+r*r,.999999>C&&1E-6<C&&(C=Math.sqrt(C),O/=C,E/=C,r/=C));for(C=0;C<N;++C)P[M+0]=O,P[M+1]=E,P[M+2]=r,M+=B}}else I(y,
u,B,M,N)}function G(y,u,D,B,M,N){const z=B.typedBuffer;B=B.typedBufferStride;const E=y.length;M*=B;if(null==N||1===N)if(4===D)for(N=0;N<E;++N)D=4*y[N],z[M]=u[D],z[M+1]=u[D+1],z[M+2]=u[D+2],z[M+3]=u[D+3],M+=B;else{if(3===D)for(N=0;N<E;++N)D=3*y[N],z[M]=u[D],z[M+1]=u[D+1],z[M+2]=u[D+2],z[M+3]=255,M+=B}else if(4===D)for(D=0;D<E;++D){var r=4*y[D];for(var C=0;C<N;++C)z[M]=u[r],z[M+1]=u[r+1],z[M+2]=u[r+2],z[M+3]=u[r+3],M+=B}else if(3===D)for(D=0;D<E;++D)for(r=3*y[D],C=0;C<N;++C)z[M]=u[r],z[M+1]=u[r+1],
z[M+2]=u[r+2],z[M+3]=255,M+=B}q.writeBufferMat3f=function(y,u,D,B){const M=D.typedBuffer;D=D.typedBufferStride;const N=y.length;B*=D;for(let z=0;z<N;++z){const E=9*y[z];for(let r=0;9>r;++r)M[B+r]=u[E+r];B+=D}};q.writeBufferMat4f=function(y,u,D,B){const M=D.typedBuffer;D=D.typedBufferStride;const N=y.length;B*=D;for(let z=0;z<N;++z){const E=16*y[z];for(let r=0;16>r;++r)M[B+r]=u[E+r];B+=D}};q.writeBufferVec2=S;q.writeBufferVec3=I;q.writeBufferVec4=t;q.writeColor=G;q.writeDefaultAttributes=function(y,
u,D,B,M,N){for(const E of u.fieldNames){u=y.vertexAttr[E];const r=y.indices[E];if(u&&r)switch(E){case w.VertexAttrConstants.POSITION:w.assert(3===u.size);var z=M.getField(E,A.BufferViewVec3f);z&&H(r,u.data,D,z,N);break;case w.VertexAttrConstants.NORMAL:w.assert(3===u.size);(z=M.getField(E,A.BufferViewVec3f))&&v(r,u.data,B,z,N);break;case w.VertexAttrConstants.UV0:w.assert(2===u.size);(z=M.getField(E,A.BufferViewVec2f))&&S(r,u.data,z,N);break;case w.VertexAttrConstants.UVMAPSPACE:w.assert(4===u.size);
(z=M.getField(E,A.BufferViewVec4f))&&t(r,u.data,z,N);break;case w.VertexAttrConstants.MEANVERTEXPOSITION:w.assert(3===u.size);(z=M.getField(E,A.BufferViewVec3f))&&H(r,u.data,D,z,N);break;case w.VertexAttrConstants.BOUND1:case w.VertexAttrConstants.BOUND2:case w.VertexAttrConstants.BOUND3:w.assert(3===u.size);(z=M.getField(E,A.BufferViewVec3f))&&H(r,u.data,D,z,N);break;case w.VertexAttrConstants.COLOR:w.assert(3===u.size||4===u.size);(z=M.getField(E,A.BufferViewVec4u8))&&G(r,u.data,u.size,z,N);break;
case w.VertexAttrConstants.SYMBOLCOLOR:w.assert(3===u.size||4===u.size);(z=M.getField(E,A.BufferViewVec4u8))&&G(r,u.data,u.size,z,N);break;case w.VertexAttrConstants.TANGENT:w.assert(4===u.size),(z=M.getField(E,A.BufferViewVec4f))&&t(r,u.data,z,N)}}};q.writeMultipliedColor=function(y,u,D,B,M,N,z){const E=M.typedBuffer;M=M.typedBufferStride;const r=y.length;N*=M;if(null==z||1===z)if(4===D)for(z=0;z<r;++z)D=4*y[z],E[N]=u[D]*B[0],E[N+1]=u[D+1]*B[1],E[N+2]=u[D+2]*B[2],E[N+3]=u[D+3]*B[3],N+=M;else{if(3===
D)for(z=255*B[3],D=0;D<r;++D){var C=3*y[D];E[N]=u[C]*B[0];E[N+1]=u[C+1]*B[1];E[N+2]=u[C+2]*B[2];E[N+3]=z;N+=M}}else if(4===D)for(D=0;D<r;++D){C=4*y[D];for(var O=0;O<z;++O)E[N]=u[C]*B[0],E[N+1]=u[C+1]*B[1],E[N+2]=u[C+2]*B[2],E[N+3]=u[C+3]*B[3],N+=M}else if(3===D)for(D=255*B[3],C=0;C<r;++C){O=3*y[C];for(let P=0;P<z;++P)E[N]=u[O]*B[0],E[N+1]=u[O+1]*B[1],E[N+2]=u[O+2]*B[2],E[N+3]=D,N+=M}};q.writeNormal=v;q.writePosition=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/ColorMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../lib/OrderIndependentTransparency ../lib/StencilUtils ../../../../chunks/ColorMaterial.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){t=function(r){function C(){return r.apply(this,arguments)||this}w._inheritsLoose(C,r);var O=C.prototype;O.initializeProgram=function(P){var T=C.shader.get();const F=this.configuration;T=T.build({output:F.output,OITEnabled:0===F.transparencyPassType,attributeColor:F.vertexColors,slicePlaneEnabled:F.slicePlaneEnabled,sliceHighlightDisabled:F.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1});return new G(P.rctx,T.generateSource("vertex"),T.generateSource("fragment"),
v.Default3D)};O.bindPass=function(P,T,F){u.View.bindProjectionMatrix(this.program,F.camera.projectionMatrix);this.program.setUniform4fv("eColor",T.color);4===this.configuration.output&&B.OutputHighlight.bindOutputHighlight(P,this.program,F);1===this.configuration.output&&this.program.setUniform2fv("nearFar",F.camera.nearFar)};O.bindDraw=function(P){u.View.bindView(this.program,P);D.Slice.bindUniformsWithOrigin(this.program,this.configuration,P)};O.setPipelineState=function(P,T){const F=this.configuration,
K=3===P,J=2===P;return y.makePipelineState({blending:0!==F.output&&7!==F.output||!F.transparent?null:K?M.blendingDefault:M.OITBlending(P),culling:(L=>0!==L&&{face:1===L?1028:1029,mode:2305})(F.cullFace),depthTest:{func:M.OITDepthTest(P)},depthWrite:K||J?F.writeDepth&&y.defaultDepthWriteParams:null,colorWrite:y.defaultColorWriteParams,stencilWrite:F.sceneHasOcludees?N.stencilWriteMaskOn:null,stencilTest:F.sceneHasOcludees?T?N.stencilToolMaskBaseParams:N.stencilBaseAllZerosParams:null,polygonOffset:K||
J?F.polygonOffset&&E:M.getOITPolygonOffset(F.enableOffset)})};O.initializePipeline=function(){this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,!1)};O.getPipelineState=function(P){return P?this._occludeePipelineState:this.pipeline};return C}(t.ShaderTechnique);t.shader=new I.ReloadableShaderModule(z.ColorMaterialShader,()=>new Promise(function(r,C){q(["./ColorMaterial.glsl"],r,C)}));const E=
{factor:1,units:1};I=function(r){function C(){var O=r.apply(this,arguments)||this;O.output=0;O.cullFace=0;O.slicePlaneEnabled=!1;O.sliceHighlightDisabled=!1;O.vertexColors=!1;O.transparent=!1;O.polygonOffset=!1;O.enableOffset=!0;O.writeDepth=!0;O.sceneHasOcludees=!1;O.transparencyPassType=3;return O}w._inheritsLoose(C,r);return C}(H.ShaderTechniqueConfiguration);S.__decorate([H.parameter({count:8})],I.prototype,"output",void 0);S.__decorate([H.parameter({count:3})],I.prototype,"cullFace",void 0);
S.__decorate([H.parameter()],I.prototype,"slicePlaneEnabled",void 0);S.__decorate([H.parameter()],I.prototype,"sliceHighlightDisabled",void 0);S.__decorate([H.parameter()],I.prototype,"vertexColors",void 0);S.__decorate([H.parameter()],I.prototype,"transparent",void 0);S.__decorate([H.parameter()],I.prototype,"polygonOffset",void 0);S.__decorate([H.parameter()],I.prototype,"enableOffset",void 0);S.__decorate([H.parameter()],I.prototype,"writeDepth",void 0);S.__decorate([H.parameter()],I.prototype,
"sceneHasOcludees",void 0);S.__decorate([H.parameter({count:4})],I.prototype,"transparencyPassType",void 0);A.ColorMaterialTechnique=t;A.ColorMaterialTechniqueConfiguration=I;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/chunks/ColorMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y){function u(B){const M=new S.ShaderBuilder,N=1===B.output;M.include(w.Transform,{linearDepth:N});M.include(G.VertexColor,B);M.vertex.uniforms.add("proj","mat4").add("view","mat4");M.attributes.add("position","vec3");M.varyings.add("vpos","vec3");N&&(M.include(y.OutputDepth,B),M.vertex.uniforms.add("nearFar","vec2"),M.varyings.add("linearDepth","float"));M.vertex.code.add(A.glsl`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      gl_Position = ${N?A.glsl`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:A.glsl`transformPosition(proj, view, vpos);`}
    }
  `);M.include(t.Slice,B);M.fragment.include(I.ColorConversion);M.fragment.uniforms.add("eColor","vec4");4===B.output&&M.include(H.OutputHighlight);M.fragment.code.add(A.glsl`
  void main() {
    discardBySlice(vpos);
    vec4 color = ${B.attributeColor?"vColor * eColor;":"eColor;"}

    if (color.a < ${A.glsl.float(v.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===B.output?A.glsl`gl_FragColor = vec4(color.a);`:""}

    ${0===B.output?A.glsl`gl_FragColor = highlightSlice(color, vpos); ${B.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}`:""}
    ${4===B.output?A.glsl`outputHighlight();`:""};
    ${1===B.output?A.glsl`outputDepth(linearDepth);`:""};
  }
  `);return M}var D=Object.freeze({__proto__:null,build:u});q.ColorMaterialShader=D;q.build=u})},"esri/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl":function(){define(["exports","../shaderModules/interfaces"],function(q,A){q.Transform=function(w,S){S.linearDepth?w.vertex.code.add(A.glsl`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):w.vertex.code.add(A.glsl`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,A){q.VertexColor=function(w,S){S.attributeColor?(w.attributes.add("color","vec4"),w.varyings.add("vColor","vec4"),w.vertex.code.add(A.glsl`
      void forwardVertexColor() { vColor = color; }
    `),w.vertex.code.add(A.glsl`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):w.vertex.code.add(A.glsl`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingEngine":function(){define("exports ../../../core/maybe ../../../core/handleUtils ../../../core/Collection ../../../core/watchUtils ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ../../3d/support/geometryUtils/vector2d ./SnappingConstraint ./IntersectionSnappingCandidate ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper".split(" "),function(q,
A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){function E(C,O){let P=-1;for(let T=0;T<C.length;++T)if(O.constraint.objectEqual(C[T].constraint)){P=T;break}return P}let r=function(){function C(P){this._snapper=new S;this._currentSnappingCandidate=null;this._visualElementHandles=w.makeHandle();this._optionsHandle=w.makeHandle();this._squaredMouseProximityTreshold=v.defaults.pointProximityThreshold*v.defaults.pointProximityThreshold;this._squaredTouchProximityThreshold=v.defaults.pointProximityThreshold*v.defaults.pointProximityThreshold*
v.defaults.touchSensitivityMultiplier*v.defaults.touchSensitivityMultiplier;this._snapper.push(new M.ParallelLineSnapper({enabled:P.effectiveSelfEnabled}));this._snapper.push(new B.LineSnapper({enabled:P.effectiveSelfEnabled}));this._snapper.push(new N.RightAngleSnapper({enabled:P.effectiveSelfEnabled}));this._snapper.push(new z.RightAngleTriangleSnapper({enabled:P.effectiveSelfEnabled}));this._optionsHandle=I.watch(P,"effectiveSelfEnabled",()=>{for(const T of this._snapper)T.enabled=P.effectiveSelfEnabled;
this.doneSnapping()})}var O=C.prototype;O.snap=function(P,T){const F=[];for(const K of this._snapper.items)F.push(...K.snap(P,T));return this._aggregateSnappingCandidates(F,P,T)};O.destroy=function(){this.doneSnapping();this._optionsHandle.remove()};O.doneSnapping=function(){this._visualElementHandles.remove();this._currentSnappingCandidate=null};O._aggregateSnappingCandidates=function(P,T,F){const K=P.length,J=F.geometry.data.coordinateHelper.fromPoint(T);if(A.isSome(this._currentSnappingCandidate)){if(this.isCurrentIntersectionConstraintStillActive(P)&&
H.distance(J,this._currentSnappingCandidate.targetPoint)<this.squaredPointProximityThreshold(F.pointer))return F.geometry.data.coordinateHelper.createDehydratedPoint(this._currentSnappingCandidate.targetPoint);var L=E(P,this._currentSnappingCandidate);this.doneSnapping();if(0<=L){T=P[L];var Y=[];if(T.constraint instanceof u.LineLikeConstraint){for(var W=0;W<K;++W)if(W!==L){var aa=P[W];if(aa.constraint instanceof u.LineLikeConstraint&&(aa=this._intersectRaysAndLines(T,aa,F),A.isSome(aa))){const oa=
G.squareDistance(G.anyMapPointToScreenPoint(J,F.geometry.data.coordinateHelper,F.elevationInfo,F.view),G.anyMapPointToScreenPoint(aa.targetPoint,F.geometry.data.coordinateHelper,F.elevationInfo,F.view));Y.push([aa,oa])}}if(0<Y.length&&(Y.sort((oa,ta)=>oa[1]-ta[1]),Y[0][1]<this.squaredPointProximityThreshold(F.pointer)))return this.updateSnappingCandidate(Y[0][0],P,F)}return this.updateSnappingCandidate(T,P,F)}}if(0<K){L=0;T=H.distance(J,P[0].targetPoint);for(Y=1;Y<K;++Y)W=H.distance(J,P[Y].targetPoint),
W<T&&(T=W,L=Y);return this.updateSnappingCandidate(P[L],P,F)}return T};O._intersectRaysAndLines=function(P,T,F){const K=P.constraint.start;var J=P.constraint.end,L=T.constraint.start,Y=T.constraint.end;J=H.subtract(t.create(),J,K);const W=H.subtract(t.create(),Y,L);Y=y.cross(J,W);if(Math.abs(Y)<=v.defaults.intersectionParallelLineThreshold)return null;const aa=H.subtract(t.create(),K,L);L=y.cross(W,aa)/Y;Y=y.cross(J,aa)/Y;F=F.geometry.data.coordinateHelper;if(0<=L){if(0<=Y||T.constraint instanceof
u.LineConstraint)return Y=F.clone(P.targetPoint),H.scaleAndAdd(Y,K,J,L),new D.IntersectionSnappingCandidate(F,Y,P,T)}else if(P.constraint instanceof u.LineConstraint&&(0<=Y||T.constraint instanceof u.LineConstraint))return Y=F.clone(P.targetPoint),H.scaleAndAdd(Y,K,J,L),new D.IntersectionSnappingCandidate(F,Y,P,T);return null};O.isCurrentIntersectionConstraintStillActive=function(P){if(this._currentSnappingCandidate instanceof D.IntersectionSnappingCandidate){const T=this._currentSnappingCandidate.right,
F=E(P,this._currentSnappingCandidate.left);P=E(P,T);return 0<=F&&0<=P}return!1};O.updateSnappingCandidate=function(P,T,F){this._currentSnappingCandidate=P;const K=this._currentSnappingCandidate.targetPoint,J=[P.visualize(F.view,F.elevationInfo,K)];for(const L of T){if(P instanceof D.IntersectionSnappingCandidate){if(L.constraint.objectEqual(P.left.constraint)||L.constraint.objectEqual(P.right.constraint))continue}else if(L.constraint.objectEqual(P.constraint))continue;L.constraint.check(K)&&J.push(L.visualizeReferenceHints(F.view,
F.elevationInfo,K))}this._visualElementHandles=w.handlesGroup(J);return F.geometry.data.coordinateHelper.createDehydratedPoint(K)};O.squaredPointProximityThreshold=function(P){return"touch"===P?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold};return C}();q.SnappingEngine=r;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/geometryUtils/vector2d":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec2"],function(q,A,w){function S(v,
G,y){G=w.dot(y,G)/w.squaredLength(y);return w.scale(v,y,G)}const I=A.create(),t=A.create(),H=A.create();q.cross=function(v,G){return v[0]*G[1]-v[1]*G[0]};q.pointToLineDistance=function(v,G,y){return Math.abs((G[0]-v[0])*(y[1]-v[1])-(G[1]-v[1])*(y[0]-v[0]))/w.distance(G,y)};q.projectPoint=S;q.projectPointToCircle=function(v,G,y,u){w.subtract(I,G,y);G=u/w.length(I);return w.scaleAndAdd(v,y,I,G)};q.projectPointToLine=function(v,G,y,u,D=y){w.subtract(I,u,y);w.subtract(t,G,D);S(H,t,I);return w.add(v,D,
H)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ../../3d/support/geometryUtils/vector2d".split(" "),function(q,A,w,S,I,t,H){let v=function(){},G=function(N){function z(E,r){var C=N.call(this)||this;C.start=E;C.end=r;return C}A._inheritsLoose(z,N);z.prototype.objectEqual=function(E){return E instanceof
z?t.objectEqual(this.start,E.start)&&t.objectEqual(this.end,E.end):!1};return z}(v),y=function(N){function z(r,C){r=N.call(this,r,C)||this;r.dir=w.create();r.p=w.create();return r}A._inheritsLoose(z,N);var E=z.prototype;E.objectEqual=function(r){return r instanceof z?N.prototype.objectEqual.call(this,r):!1};E.check=function(r){S.subtract(this.dir,this.end,this.start);S.subtract(this.p,r,this.start);const C=S.dot(this.dir,this.p);return 0<=C&&C<=S.squaredLength(this.dir)?H.pointToLineDistance(r,this.start,
this.end)<I.defaults.pointOnLineThreshold:!1};return z}(G),u=function(N){function z(r,C){r=N.call(this,r,C)||this;r.dir=w.create();r.p=w.create();return r}A._inheritsLoose(z,N);var E=z.prototype;E.objectEqual=function(r){return r instanceof z?N.prototype.objectEqual.call(this,r):!1};E.check=function(r){S.subtract(this.dir,this.end,this.start);S.subtract(this.p,r,this.start);return 0<=S.dot(this.dir,this.p)?H.pointToLineDistance(r,this.start,this.end)<I.defaults.pointOnLineThreshold:!1};return z}(G),
D=function(N){function z(r,C){return N.call(this,r,C)||this}A._inheritsLoose(z,N);var E=z.prototype;E.objectEqual=function(r){return r instanceof z?N.prototype.objectEqual.call(this,r):!1};E.check=function(r){return H.pointToLineDistance(r,this.start,this.end)<I.defaults.pointOnLineThreshold};return z}(G),B=function(N){function z(r,C){var O=N.call(this)||this;O.left=r;O.right=C;return O}A._inheritsLoose(z,N);var E=z.prototype;E.objectEqual=function(r){return r instanceof z?this.left.objectEqual(r.left)&&
this.right.objectEqual(r.right):!1};E.check=function(){return!1};return z}(v),M=function(N){function z(r,C){var O=N.call(this)||this;O.point1=r;O.point2=C;return O}A._inheritsLoose(z,N);var E=z.prototype;E.objectEqual=function(r){return r instanceof z?t.objectEqual(this.point1,r.point1)&&t.objectEqual(this.point2,r.point2):!1};E.check=function(){return!1};return z}(v);q.LineConstraint=D;q.LineLikeConstraint=G;q.LineLikeIntersectionConstraint=B;q.PlanarCircleConstraint=M;q.RayConstraint=u;q.SegmentConstraint=
y;q.SnappingConstraint=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/IntersectionSnappingCandidate":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ../../../Color ./Settings ../../3d/interactive/visualElements/PointVisualElement ./SnappingCandidate ./SnappingConstraint".split(" "),function(q,A,w,S,I,t,H,v){H=function(G){function y(D,B,M,N){D=G.call(this,D,B,new v.LineLikeIntersectionConstraint(M.constraint,N.constraint))||
this;D.left=M;D.right=N;return D}A._inheritsLoose(y,G);var u=y.prototype;u.visualizeTargetHints=function(D,B,M){return w.handlesGroup([this.left.visualize(D,B,M),this.right.visualize(D,B,M)])};u.visualizeReferenceHints=function(D,B,M){return w.destroyHandle(new t.PointVisualElement({view:D,primitive:"circle",geometry:this.coordinateHelper.createPoint(M),elevationInfo:B,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:S.toUnitRGBA(I.defaults.orange),pixelSnappingEnabled:!1}))};return y}(H.SnappingCandidate);
q.IntersectionSnappingCandidate=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/PointVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../geometry/projection ../../../../chunks/vec4f64 ../../../../chunks/vec4 ../../../../geometry/support/aaBoundingBox ../../support/stack ../../webgl-engine/lib/Util ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/HUDMaterial ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../webgl-engine/lib/Geometry ../../layers/graphics/sdfPrimitives ../../webgl-engine/lib/Texture ./VisualElementResources".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O){let P=function(){function K(L){this._geometry=this.view=null;this._size=3;this._color=v.fromValues(1,0,1,1);this._pixelSnappingEnabled=!0;this._primitive="square";this._outlineSize=1;this._outlineColor=v.fromValues(1,1,1,1);this._elevationInfo=null;this.resources=new O.VisualElementResources({view:L.view,createResources:W=>this.createResources(W),recreateGeometry:(W,aa)=>{W.geometry=this.recreateGeometry(aa,W.material);return w.isSome(W.geometry)?
[W.geometry]:[]}});let Y=!0;for(const W in L)W in this?"attached"===W?Y=L[W]:this[W]=L[W]:console.error("Cannot set unknown property",W);this.attached=Y}var J=K.prototype;J.destroy=function(){this.resources.destroy()};J.updateMaterial=function(){const L=this.resources.resources;w.isNone(L)||L.material.setParameterValues(this.materialParameters(L.texture.id))};J.updateSizeAttribute=function(){var L=this.resources.resources;const Y=this.resources.object;if(!w.isNone(L)&&!w.isNone(Y)&&(L=L.geometry,
!w.isNone(L))){L=L.data.getVertexAttr()[D.VertexAttrConstants.SIZE].data;var W=this.geometrySize;L[0]=W;L[1]=W;Y.geometryVertexAttrsUpdated(0)}};J.materialParameters=function(L){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:T,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:L,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}};J.recreateGeometry=function(L,
Y){const W=this.createRenderGeometry();w.isSome(W)&&L.addGeometry(W,Y);return W};J.createResources=function(L){const Y=this.createTexture(),W=new M.HUDMaterial(this.materialParameters(Y.id),"pointVisualElement");L=this.recreateGeometry(L,W);return{material:W,texture:Y,geometry:L,forEach(aa){aa(Y);aa(W);w.isSome(this.geometry)&&aa(this.geometry)}}};J.createTexture=function(){const L=this.preferredTextureSize;return new C(r.createType(this._primitive,L,.5*L),"pointVisualElement",{mipmap:!1,wrap:{s:33071,
t:33071},width:L,height:L,components:4,noUnpackFlip:!0})};J.calculateMapBounds=function(L){if(w.isNone(this.resources.resources)||w.isNone(this.resources.resources.geometry))return!1;const Y=this.resources.resources.geometry.data.getAttribute("position");H.projectVectorToVector(Y.data,this.view.renderCoordsHelper.spatialReference,F,this.view.spatialReference);y.expandWithBuffer(L,F);return!0};J.createRenderGeometry=function(){var L=this.geometry;if(w.isNone(L))return null;const Y=this.view.renderCoordsHelper;
var W=N.evaluateElevationAlignmentAtPoint(L,this.view.elevationProvider,z.ElevationContext.fromElevationInfo(this.elevationInfo),Y);const aa=t.set(u.sv3d.get(),L.x,L.y,W);W=u.sv3d.get();H.projectVectorToVector(aa,L.spatialReference,W,Y.spatialReference);L=this.geometrySize;L=B.createPointGeometry(null,W,null,[L,L],[0,0,0,1]);return new E(L)};A._createClass(K,[{key:"visible",get:function(){return this.resources.visible},set:function(L){this.resources.visible=L}},{key:"attached",get:function(){return this.resources.attached},
set:function(L){this.resources.attached=L}},{key:"geometry",get:function(){return this._geometry},set:function(L){this._geometry=L;this.resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(L){if(L!==this._size){const Y=this.preferredTextureSize;this._size=L;Y<this.preferredTextureSize?w.isSome(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(L){G.exactEquals(L,this._color)||(G.copy(this._color,
L),this.updateMaterial())}},{key:"pixelSnappingEnabled",get:function(){return this._pixelSnappingEnabled},set:function(L){this._pixelSnappingEnabled!==L&&(this._pixelSnappingEnabled=L,this.updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(L){this._primitive!==L&&(this._primitive=L,w.isSome(this.resources)&&this.resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(L){L!==this._outlineSize&&(this._outlineSize=L,this.updateMaterial())}},
{key:"outlineColor",get:function(){return this._outlineColor},set:function(L){G.exactEquals(L,this._outlineColor)||(G.copy(this._outlineColor,L),this.updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(L){this._elevationInfo=L;this.resources&&this.resources.recreateGeometry()}},{key:"geometrySize",get:function(){return this._size/.5}},{key:"preferredTextureSize",get:function(){return S.clamp(S.nextHighestPowerOfTwo(2*this.geometrySize),16,128)}}]);return K}();
const T=[.25,.25,.75,.75],F=I.create();q.PointVisualElement=P;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F){function K(){return!!R&&O.isLoaded()}function J(ba){S.isNone(c)&&(c=t.all([O.load(),(new Promise(function(ea,da){q(["../chunks/geometryEngineBase"],ea,da)})).then(function(ea){return ea.geometryEngineBase}),new Promise(function(ea,da){q(["./geometryAdapters/hydrated"],ea,da)})]));return c.then(([,ea,{hydratedAdapter:da}])=>{t.throwIfAborted(ba);l=da;R=ea.default;R._enableProjection(O.pe)})}function L(ba,ea,da,ma,za=null){if(S.isNone(da)||S.isNone(ma))return ea;
if(W(da,ma,za))return ea.map(Ba=>aa(Ba,da,ma));if(S.isNone(za)){const Ba=F.cacheKey(da,ma);void 0!==a[Ba]?za=a[Ba]:(za=Y(da,ma,null),S.isNone(za)&&(za=new F),a[Ba]=za)}if(S.isNone(R))throw new b;return R._project(ba,ea,da,ma,za)}function Y(ba,ea,da=null){if(S.isNone(R))throw new b;if(S.isNone(ba)||S.isNone(ea))return null;ba=R._getTransformation(l,ba,ea,da,null==da?void 0:da.spatialReference);return null!==ba?F.fromGE(ba):null}function W(ba,ea,da){return da?!1:H.equals(ba,ea)?!0:H.isValid(ba)&&H.isValid(ea)&&
!!La(ba,ea,h)}function aa(ba,ea,da){if(!ba)return ba;if("x"in ba){var ma=new G;return oa(ba,ea,ma,da)?ma:null}return"xmin"in ba?(ma=new y,U(ba,ea,ma,da)?ma:null):"rings"in ba?(ma=new D,X(ba,ea,ma,da)?ma:null):"paths"in ba?(ma=new B,la(ba,ea,ma,da)?ma:null):"points"in ba?(ma=new u,ta(ba,ea,ma,da)?ma:null):null}function oa(ba,ea,da,ma,za=0){V[0]=ba.x;V[1]=ba.y;const Ba=ba.z;V[2]=void 0!==Ba?Ba:za;if(!na(V,ea,0,V,ma,0,1))return!1;da.x=V[0];da.y=V[1];da.spatialReference=ma;void 0===Ba?(da.z=void 0,da.hasZ=
!1):(da.z=V[2],da.hasZ=!0);void 0===ba.m?(da.m=void 0,da.hasM=!1):(da.m=ba.m,da.hasM=!0);return!0}function ta(ba,ea,da,ma,za=0){const {points:Ba,hasZ:Ea,hasM:Ma}=ba;ba=[];const Pa=Ba.length,Ra=[];for(var Qa of Ba)Ra.push(Qa[0],Qa[1],Ea?Qa[2]:za);if(!na(Ra,ea,0,Ra,ma,0,Pa))return!1;for(ea=0;ea<Pa;++ea){za=3*ea;Qa=Ra[za];const Sa=Ra[za+1];Ea&&Ma?ba.push([Qa,Sa,Ra[za+2],Ba[ea][3]]):Ea?ba.push([Qa,Sa,Ra[za+2]]):Ma?ba.push([Qa,Sa,Ba[ea][2]]):ba.push([Qa,Sa])}da.points=ba;da.spatialReference=ma;da.hasZ=
Ea;da.hasM=Ma;return!0}function la(ba,ea,da,ma,za=0){const {paths:Ba,hasZ:Ea,hasM:Ma}=ba;ba=[];if(!pa(Ba,Ea,Ma,ea,ba,ma,za))return!1;da.paths=ba;da.spatialReference=ma;da.hasZ=Ea;da.hasM=Ma;return!0}function X(ba,ea,da,ma,za=0){const {rings:Ba,hasZ:Ea,hasM:Ma}=ba;ba=[];if(!pa(Ba,Ea,Ma,ea,ba,ma,za))return!1;da.rings=ba;da.spatialReference=ma;da.hasZ=Ea;da.hasM=Ma;return!0}function U(ba,ea,da,ma,za=0){const {xmin:Ba,ymin:Ea,xmax:Ma,ymax:Pa,hasZ:Ra,hasM:Qa}=ba;if(!ka(Ba,Ea,Ra?ba.zmin:za,ea,V,ma))return!1;
da.xmin=V[0];da.ymin=V[1];Ra&&(da.zmin=V[2]);if(!ka(Ma,Pa,Ra?ba.zmax:za,ea,V,ma))return!1;da.xmax=V[0];da.ymax=V[1];Ra&&(da.zmax=V[2]);Qa&&(da.mmin=ba.mmin,da.mmax=ba.mmax);da.spatialReference=ma;return!0}function ka(ba,ea,da,ma,za,Ba){p[0]=ba;p[1]=ea;p[2]=da;return na(p,ma,0,za,Ba,0,1)}function sa(ba,ea,da,ma){if(S.isNone(ea)||S.isNone(ma)||2>ba.length)return!1;2===ba.length&&(p[0]=ba[0],p[1]=ba[1],p[2]=0,ba=p);return na(ba,ea,0,da,ma,0,1)}function qa(ba,ea,da){S.isNone(ea)?ba=!1:(ea=ja(ea,e),ea=
d[ea][6],S.isNone(ea)?ba=!1:(ea(ba,0,p,0),da!==p&&(da[0]=p[0],da[1]=p[1],2<da.length&&(da[2]=p[2])),ba=!0));return ba}function na(ba,ea,da,ma,za,Ba,Ea=1){ea=La(ea,za,h);if(S.isNone(ea))return!1;if(ea===ua){if(ba===ma&&da===Ba)return!0;Ea=da+3*Ea;for(let Ma=da,Pa=Ba;Ma<Ea;Ma++,Pa++)ma[Pa]=ba[Ma];return!0}Ea=da+3*Ea;for(let Ma=da,Pa=Ba;Ma<Ea;Ma+=3,Pa+=3)ea(ba,Ma,ma,Pa);return!0}function pa(ba,ea,da,ma,za,Ba,Ea=0){const Ma=[];for(const Pa of ba)for(const Ra of Pa)Ma.push(Ra[0],Ra[1],ea?Ra[2]:Ea);if(!na(Ma,
ma,0,Ma,Ba,0,Ma.length/3))return!1;ma=0;za.length=0;for(const Pa of ba){ba=[];for(const Ra of Pa)ea&&da?ba.push([Ma[ma++],Ma[ma++],Ma[ma++],Ra[3]]):ea?ba.push([Ma[ma++],Ma[ma++],Ma[ma++]]):(da?ba.push([Ma[ma++],Ma[ma++],Ra[2]]):ba.push([Ma[ma++],Ma[ma++]]),ma++);za.push(ba)}return!0}function va(ba,ea,da){const ma=Math.sin(ea);ea=Math.cos(ea);const za=Math.sin(ba);ba=Math.cos(ba);da[0]=-ma;da[4]=-za*ea;da[8]=ba*ea;da[12]=0;da[1]=ea;da[5]=-za*ma;da[9]=ba*ma;da[13]=0;da[2]=0;da[6]=ba;da[10]=za;da[14]=
0;da[3]=0;da[7]=0;da[11]=0;da[15]=1;return da}function ja(ba,ea){if(ea.spatialReference===ba)return ea.spatialReferenceId;ea.spatialReference=ba;"metersPerUnit"in ea&&(ea.metersPerUnit=r.getMetersPerUnitForSR(ba,1));return ba.wkt===E.SphericalECEFSpatialReference.wkt?ea.spatialReferenceId=1:H.isWGS84(ba)?ea.spatialReferenceId=2:H.isWebMercator(ba)?ea.spatialReferenceId=3:ba.wkt===E.WGS84ECEFSpatialReference.wkt?ea.spatialReferenceId=4:4490===ba.wkid?ea.spatialReferenceId=5:ba.wkt===E.SphericalPCPFMars.wkt?
ea.spatialReferenceId=7:ba.wkt===E.SphericalPCPFMoon.wkt?ea.spatialReferenceId=9:H.isMars(ba)?ea.spatialReferenceId=8:H.isMoon(ba)?ea.spatialReferenceId=10:ea.spatialReferenceId=0}function ua(ba,ea,da,ma){ba!==da&&(da[ma++]=ba[ea++],da[ma++]=ba[ea++],da[ma]=ba[ea])}function Aa(ba,ea,da,ma){da[ma++]=n*(ba[ea++]/v.earth.radius);da[ma++]=n*(Math.PI/2-2*Math.atan(Math.exp(-1*ba[ea++]/v.earth.radius)));da[ma]=ba[ea]}function Ga(ba,ea,da,ma){Aa(ba,ea,da,ma);Da(da,ma,da,ma)}function Na(ba,ea,da,ma){Aa(ba,
ea,da,ma);xa(da,ma,da,ma)}function Oa(ba,ea,da,ma){var za=.4999999*Math.PI;za=M.clamp(m*ba[ea+1],-za,za);za=Math.sin(za);da[ma++]=m*ba[ea]*v.earth.radius;da[ma++]=v.earth.halfSemiMajorAxis*Math.log((1+za)/(1-za));da[ma]=ba[ea+2]}function Z(ba,ea,da,ma,za){za+=ba[ea+2];const Ba=m*ba[ea+1];ba=m*ba[ea];ea=Math.cos(Ba);da[ma++]=Math.cos(ba)*ea*za;da[ma++]=Math.sin(ba)*ea*za;da[ma]=Math.sin(Ba)*za}function ha(ba,ea,da,ma){Z(ba,ea,da,ma,v.moon.radius)}function Ca(ba,ea,da,ma){Z(ba,ea,da,ma,v.mars.radius)}
function Da(ba,ea,da,ma){Z(ba,ea,da,ma,v.earth.radius)}function Ja(ba,ea,da,ma,za){var Ba=ba[ea];const Ea=ba[ea+1];ea=ba[ea+2];ba=Math.sqrt(Ba*Ba+Ea*Ea+ea*ea);ea=M.asinClamped(ea/(0===ba?1:ba));Ba=Math.atan2(Ea,Ba);da[ma++]=n*Ba;da[ma++]=n*ea;da[ma]=ba-za}function Fa(ba,ea,da,ma){Ja(ba,ea,da,ma,v.moon.radius)}function fa(ba,ea,da,ma){Ja(ba,ea,da,ma,v.mars.radius)}function wa(ba,ea,da,ma){Ja(ba,ea,da,ma,v.earth.radius)}function ia(ba,ea,da,ma){wa(ba,ea,da,ma);Oa(da,ma,da,ma)}function ra(ba,ea,da,ma){wa(ba,
ea,da,ma);xa(da,ma,da,ma)}function xa(ba,ea,da,ma){{var za=v.earth;const Ea=m*ba[ea];var Ba=m*ba[ea+1];ba=ba[ea+2];ea=Math.sin(Ba);Ba=Math.cos(Ba);const Ma=za.radius/Math.sqrt(1-za.eccentricitySquared*ea*ea);da[ma++]=(Ma+ba)*Ba*Math.cos(Ea);da[ma++]=(Ma+ba)*Ba*Math.sin(Ea);da[ma++]=(Ma*(1-za.eccentricitySquared)+ba)*ea}}function ya(ba,ea,da,ma){var za=T.earthEllipsoidConstants,Ba=ba[ea],Ea=ba[ea+1];ba=ba[ea+2];let Ma;ea=Math.abs(ba);var Pa=Ba*Ba+Ea*Ea;var Ra=Math.sqrt(Pa);var Qa=Pa+ba*ba;var Sa=Math.sqrt(Qa);
Ba=Math.atan2(Ea,Ba);var Ta=ba*ba/Qa;Qa=Pa/Qa;Ea=za.a2/Sa;Pa=za.a3-za.a4/Sa;.3<Qa?(Ta=ea/Sa*(1+Qa*(za.a1+Ea+Ta*Pa)/Sa),Sa=Math.asin(Ta),Ea=Ta*Ta,Qa=Math.sqrt(1-Ea)):(Qa=Ra/Sa*(1-Ta*(za.a5-Ea-Qa*Pa)/Sa),Sa=Math.acos(Qa),Ea=1-Qa*Qa,Ta=Math.sqrt(Ea));Ma=1-v.earth.eccentricitySquared*Ea;Ea=v.earth.radius/Math.sqrt(Ma);za=za.a6*Ea;Ea=Ra-Ea*Qa;Pa=ea-za*Ta;ea=Qa*Ea+Ta*Pa;Ra=Qa*Pa-Ta*Ea;za=Ra/(za/Ma+ea);Sa+=za;0>ba&&(Sa=-Sa);da[ma++]=n*Ba;da[ma++]=n*Sa;da[ma]=ea+Ra*za/2}function Ka(ba,ea,da,ma){ya(ba,ea,
da,ma);Da(da,ma,da,ma)}function Ha(ba,ea,da,ma){ya(ba,ea,da,ma);Oa(da,ma,da,ma)}function La(ba,ea,da=f()){return S.isNone(ba)||S.isNone(ea)?null:Ia(ba,ea,da).projector}function Ia(ba,ea,da){if(S.isNone(ba)||S.isNone(ea)||da.source.spatialReference===ba&&da.dest.spatialReference===ea)return da;const ma=ja(ba,da.source),za=ja(ea,da.dest);0===ma&&0===za?H.equals(ba,ea)?da.projector=ua:da.projector=null:da.projector=d[ma][za];return da}function f(){return{source:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ua}}let R=null,l=null,c=null,a={},b=function(ba){function ea(){return ba.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}w._inheritsLoose(ea,ba);return ea}(I);(function(ba){ba.x2lon=function(ea){return ea/v.earth.radius};ba.y2lat=function(ea){return Math.PI/2-2*Math.atan(Math.exp(-1*ea/v.earth.radius))};ba.lon2x=function(ea){return ea*v.earth.radius};ba.lat2y=
function(ea){ea=Math.sin(ea);return v.earth.radius/2*Math.log((1+ea)/(1-ea))}})(A.webMercator||(A.webMercator={}));const d={[2]:{[5]:null,[8]:null,[10]:null,[6]:ua,[1]:Da,[7]:null,[9]:null,[0]:null,[3]:Oa,[2]:ua,[4]:xa},[5]:{[5]:ua,[8]:null,[10]:null,[6]:ua,[1]:Da,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:xa},[8]:{[5]:null,[8]:ua,[10]:null,[6]:null,[1]:null,[7]:Ca,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ua,[6]:null,[1]:null,[7]:null,[9]:ha,[0]:null,[3]:null,
[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:Aa,[1]:Ga,[7]:null,[9]:null,[0]:null,[3]:ua,[2]:Aa,[4]:Na},[4]:{[5]:ya,[8]:null,[10]:null,[6]:ya,[1]:Ka,[7]:null,[9]:null,[0]:null,[3]:Ha,[2]:ya,[4]:ua},[1]:{[5]:wa,[8]:null,[10]:null,[6]:wa,[1]:ua,[7]:null,[9]:null,[0]:null,[3]:ia,[2]:wa,[4]:ra},[7]:{[5]:null,[8]:fa,[10]:null,[6]:null,[1]:null,[7]:ua,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:Fa,[6]:null,[1]:null,[7]:null,[9]:ua,[0]:null,[3]:null,[2]:null,[4]:null},
[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ua,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:ua,[1]:Da,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ua,[4]:xa}},e={spatialReference:null,spatialReferenceId:0},g={spatialReference:null,spatialReferenceId:0},h=f(),k=f(),m=M.deg2rad(1),n=M.rad2deg(1),p=N.create(),x=N.create(),Q=N.create(),V=N.create(),ca=N.create();A.canProjectToWGS84ComparableLonLat=function(ba){if(S.isNone(ba))return!1;ba=ja(ba,e);return!!d[ba][6]};
A.canProjectWithoutEngine=W;A.computeLatLonToENURotation=va;A.computeLinearTransformation=function(ba,ea,da,ma){if(S.isNone(ba)||S.isNone(ma))return!1;var za=ja(ba,e),Ba=ja(ma,g);if(za===Ba&&1!==Ba&&(0!==za||H.equals(ba,ma)))return C.identity(da),C.translate(da,da,ea),!0;if(1===Ba||7===Ba||9===Ba){ma=ba=0;if(1===Ba){za=d[za][6];Ba=d[6][Ba];if(S.isNone(za)||S.isNone(Ba))return!1;za(ea,0,x,0);Ba(x,0,Q,0);ba=m*x[0];ma=m*x[1]}else if(7===Ba||9===Ba){Ba=d[za][Ba];if(S.isNone(Ba))return!1;Ba(ea,0,Q,0);
ba=m*ea[0];ma=m*ea[1]}va(ma,ba,da);da[12]=Q[0];da[13]=Q[1];da[14]=Q[2];return!0}if(3===Ba&&(2===za||1===za)){Ba=d[za][6];if(S.isNone(Ba))return!1;Ba(ea,0,x,0);ea=m*x[1];Oa(x,0,Q,0);C.identity(da);C.translate(da,da,Q);ea=1/Math.cos(ea);C.scale(da,da,[ea,ea,1]);return!0}return!1};A.getProjectorName=function(ba,ea){switch(La(ba,ea,h)){case ua:return"copy3";case Da:return"wgs84ToSphericalECEF";case Oa:return"wgs84ToWebMercator";case xa:return"wgs84ToWGS84ECEF";case Aa:return"webMercatorToWGS84";case Ga:return"webMercatorToSphericalECEF";
case Na:return"webMercatorToWGS84ECEF";case ya:return"wgs84ECEFToWGS84";case Ka:return"wgs84ECEFToSphericalECEF";case Ha:return"wgs84ECEFToWebMercator";case wa:return"sphericalECEFToWGS84";case ia:return"sphericalECEFToWebMercator";case fa:return"sphericalECEFToMars2000";case Fa:return"sphericalECEFToMoon2000";case ra:return"sphericalECEFToWGS84ECEF";case Ca:return"mars2000ToSphericalPCPF";case ha:return"moon2000ToSphericalPCPF";default:return null}};A.getTransformation=Y;A.getTransformations=function(ba,
ea,da=null){if(S.isNone(R))throw new b;ba=R._getTransformationBySuitability(l,ba,ea,da,null==da?void 0:da.spatialReference);if(null!==ba){ea=[];for(const ma of ba)ea.push(F.fromGE(ma));return ea}return[]};A.initializeProjection=async function(ba,ea){if(!K())for(const {source:da,dest:ma,geographicTransformation:za}of ba)if(!W(da,ma,za))return J(ea)};A.isLoaded=K;A.isSupported=function(){return!0};A.load=J;A.localLinearScaleFactors=function(ba,ea,da,ma){if(S.isNone(ea)||S.isNone(ma))return!1;const za=
ja(ea,e);var Ba=ja(ma,g);if(za===Ba&&0!==za||H.equals(ea,ma))return da[0]=1,da[1]=1,da[2]=1,!0;if(1===za){ea=z.length(ba);ba=ea/Math.sqrt(ba[0]*ba[0]+ba[1]*ba[1]);ea/=v.earth.radius;if(3===Ba)return da[0]=ba*ea,da[1]=ba*ea,da[2]=1,!0;if(2===Ba||5===Ba)return Ba=180/(v.earth.radius*Math.PI),da[0]=Ba*ba*ea,da[1]=Ba*ea,da[2]=1,!0}return!1};A.lonLatToSphericalPCPF=function(ba,ea,da,ma,za=0){ma+=za;za=Math.cos(da);ba[0]=Math.cos(ea)*za*ma;ba[1]=Math.sin(ea)*za*ma;ba[2]=Math.sin(da)*ma};A.project=function(ba,
ea,da=null){return Array.isArray(ba)?0===ba.length?[]:L(l,ba,ba[0].spatialReference,ea,da):L(l,[ba],ba.spatialReference,ea,da)[0]};A.projectBoundingRect=function(ba,ea,da,ma){if(null==ba)return!1;if(H.equals(ea,ma))return P.set(da,ba),!0;p[0]=ba[0];p[1]=ba[1];p[2]=0;if(!na(p,ea,0,p,ma,0,1))return!1;da[0]=p[0];da[1]=p[1];p[0]=ba[2];p[1]=ba[3];p[2]=0;if(!na(p,ea,0,p,ma,0,1))return!1;da[2]=p[0];da[3]=p[1];return!0};A.projectBoundingSphere=function(ba,ea,da,ma){if(S.isNone(ea)||S.isNone(ma))return!1;
ea=Ia(ea,ma,k);if(ea.projector===ua)return da[0]=ba[0],da[1]=ba[1],da[2]=ba[2],da[3]=ba[3],!0;if(S.isNone(ea.projector))return!1;const {source:za,dest:Ba}=ea;if(3===Ba.spatialReferenceId){ea=d[za.spatialReferenceId][2];if(S.isNone(ea))return!1;ea(ba,0,x,0);ea=Math.abs(m*x[1])+Math.asin(ba[3]/(v.earth.radius+ba[2]));Oa(x,0,da,0);da[3]=ea>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ea)*ba[3];return!0}ea.projector(ba,0,da,0);da[3]=ba[3]*za.metersPerUnit/Ba.metersPerUnit;return!0};A.projectBuffer=na;A.projectDirection=
function(ba,ea,da,ma,za){z.copy(V,ba);z.add(ca,ba,ea);sa(V,da,V,za);sa(ca,da,ca,za);z.subtract(ma,ca,V);z.normalize(ma,ma)};A.projectExtent=function(ba,ea,da=ea.spatialReference,ma=0){return S.isNone(da)?!1:U(ba,ba.spatialReference,ea,da,ma)};A.projectMany=L;A.projectMultipoint=function(ba,ea,da=ea.spatialReference,ma=0){return S.isNone(da)?!1:ta(ba,ba.spatialReference,ea,da,ma)};A.projectPoint=function(ba,ea,da=ea.spatialReference,ma=0){return S.isNone(da)?!1:oa(ba,ba.spatialReference,ea,da,ma)};
A.projectPointToVector=function(ba,ea,da,ma=0){V[0]=ba.x;V[1]=ba.y;const za=ba.z;V[2]=void 0!==za?za:ma;return na(V,ba.spatialReference,0,ea,da,0,1)};A.projectPointToWGS84ComparableLonLat=function(ba,ea){V[0]=ba.x;V[1]=ba.y;const da=ba.z;V[2]=void 0!==da?da:0;return qa(V,ba.spatialReference,ea)};A.projectPolygon=function(ba,ea,da=ea.spatialReference,ma=0){return S.isNone(da)?!1:X(ba,ba.spatialReference,ea,da,ma)};A.projectPolyline=function(ba,ea,da=ea.spatialReference,ma=0){return S.isNone(da)?!1:
la(ba,ba.spatialReference,ea,da,ma)};A.projectVectorToDehydratedPoint=function(ba,ea,da,ma){S.isNone(ma)&&(ma=da.spatialReference);return na(ba,ea,0,V,ma,0,1)?(da.x=V[0],da.y=V[1],da.z=V[2],da.spatialReference=ma,da):null};A.projectVectorToPoint=function(ba,ea,da,ma){if(S.isNone(ea)||S.isNone(da))return null;ma=S.isSome(ma)?ma:new G({spatialReference:da});return na(ba,ea,0,V,da,0,1)?(ma.x=V[0],ma.y=V[1],ma.z=V[2],ma.spatialReference=da,ma):null};A.projectVectorToVector=sa;A.projectVectorToWGS84ComparableLonLat=
qa;A.projectXYZToVector=ka;A.sphericalECEFToSphericalPCPF=Ja;A.unload=function(){c=l=R=null;a={}};Object.defineProperty(A,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),function(q,A,w,S,I,t){function H(){return!!A._pe}function v(){return!!S("esri-wasm")}function G(){return N?N:N=I.create((E,r)=>{(new Promise(function(C,O){q(["./pe-wasm"],C,O)})).then(function(C){return C.peWasm}).then(({default:C})=>
{C({locateFile:O=>t.getAssetUrl(`esri/geometry/support/${O}`),onAbort:O=>{r(Error(O))}}).then(O=>{y(O);E()})})})}function y(E){function r(P,T,F){P[T]=F(P[T])}A._pe=E;A.PeDefs.init();A.PeGTlistExtended.init();A.PeNotationMgrs.init();A.PeNotationUtm.init();A.PePCSInfo.init();A.PeGCSExtent=function(P){function T(){return P.apply(this,arguments)||this}w._inheritsLoose(T,P);T.prototype.destroy=function(){A._pe.destroy(this)};return T}(A._pe.PeGCSExtent);E=[A._pe.PeDatum,A._pe.PeGeogcs,A._pe.PeGeogtran,
A._pe.PeObject,A._pe.PeParameter,A._pe.PePrimem,A._pe.PeProjcs,A._pe.PeSpheroid,A._pe.PeUnit];for(var C of E)r(C.prototype,"getName",P=>function(){return P.call(this,Array(A.PeDefs.PE_NAME_MAX))});for(const P of[A._pe.PeGeogtran,A._pe.PeProjcs])r(P.prototype,"getParameters",T=>function(){const F=Array(A.PeDefs.PE_PARM_MAX);let K=T.call(this);for(let J=0;J<F.length;J++){const L=A._pe.getValue(K,"*");F[J]=L?A._pe.wrapPointer(L,A._pe.PeParameter):null;K+=Int32Array.BYTES_PER_ELEMENT}return F});r(A._pe.PeHorizon.prototype,
"getCoord",P=>function(){const T=this.getSize();if(!T)return null;const F=[],K=P.call(this);M(F,T,K);return F});r(A._pe.PeGTlistExtendedEntry.prototype,"getEntries",P=>{const T=A._pe._pe_getPeGTlistExtendedGTsSize();return function(){let F=null;var K=P.call(this);if(!A._pe.compare(K,A._pe.NULL)){F=[K];const J=this.getSteps();if(1<J){K=A._pe.getPointer(K);for(let L=1;L<J;L++)F.push(A._pe.wrapPointer(K+T*L,A._pe.PeGTlistExtendedGTs))}}return F}});const O=A._pe._pe_getPeHorizonSize();C=P=>function(){let T=
this._cache;T||(this._cache=T=new Map);if(T.has(P))return T.get(P);let F=null;var K=P.call(this);if(!A._pe.compare(K,A._pe.NULL)){F=[K];const J=K.getNump();if(1<J){K=A._pe.getPointer(K);for(let L=1;L<J;L++)F.push(A._pe.wrapPointer(K+O*L,A._pe.PeHorizon))}}T.set(P,F);return F};r(A._pe.PeProjcs.prototype,"horizonGcsGenerate",C);r(A._pe.PeProjcs.prototype,"horizonPcsGenerate",C);A._pe.PeObject.prototype.toString=function(P=A.PeDefs.PE_STR_OPTS_NONE){A._pe.ensureCache.prepare();const T=A._pe.getPointer(this),
F=A._pe.ensureInt8(Array(A.PeDefs.PE_BUFFER_MAX));return A._pe.UTF8ToString(A._pe._pe_object_to_string_ext(T,P,F))}}function u(E){if(E){var r=A._pe.getClass(E);r&&(r=A._pe.getCache(r))&&(E=A._pe.getPointer(E))&&delete r[E]}}function D(E,r){const C=[];r=Array(r);for(let O=0;O<E;O++)C.push(A._pe.ensureInt8(r));return C}function B(E){let r;Array.isArray(E[0])?(r=[],E.forEach(C=>{r.push(C[0],C[1])})):r=E;return r}function M(E,r,C,O=!1){if(O)for(O=0;O<2*r;O++)E[O]=A._pe.getValue(C+O*Float64Array.BYTES_PER_ELEMENT,
"double");else{O=0===E.length;for(let P=0;P<r;P++)O&&(E[P]=Array(2)),E[P][0]=A._pe.getValue(C,"double"),E[P][1]=A._pe.getValue(C+Float64Array.BYTES_PER_ELEMENT,"double"),C+=2*Float64Array.BYTES_PER_ELEMENT}}let N;A._pe=null;(function(E){function r(P,T,F){A._pe.ensureCache.prepare();var K=B(F);const J=F===K;K=A._pe.ensureFloat64(K);(P=A._pe._pe_geog_to_proj(A._pe.getPointer(P),T,K))&&M(F,T,K,J);return P}function C(P,T,F){return O(P,T,F,0)}function O(P,T,F,K){A._pe.ensureCache.prepare();var J=B(F);
const L=F===J;J=A._pe.ensureFloat64(J);(P=A._pe._pe_proj_to_geog_center(A._pe.getPointer(P),T,J,K))&&M(F,T,J,L);return P}E.geogToProj=r;E.projGeog=function(P,T,F,K){switch(K){case A.PeDefs.PE_TRANSFORM_P_TO_G:return C(P,T,F);case A.PeDefs.PE_TRANSFORM_G_TO_P:return r(P,T,F)}return 0};E.projToGeog=C;E.projToGeogCenter=O})(A.PeCSTransformations||(A.PeCSTransformations={}));(function(E){E.init=function(){E.PE_BUFFER_MAX=A._pe.PeDefs.prototype.PE_BUFFER_MAX;E.PE_NAME_MAX=A._pe.PeDefs.prototype.PE_NAME_MAX;
E.PE_MGRS_MAX=A._pe.PeDefs.prototype.PE_MGRS_MAX;E.PE_USNG_MAX=A._pe.PeDefs.prototype.PE_USNG_MAX;E.PE_DD_MAX=A._pe.PeDefs.prototype.PE_DD_MAX;E.PE_DDM_MAX=A._pe.PeDefs.prototype.PE_DDM_MAX;E.PE_DMS_MAX=A._pe.PeDefs.prototype.PE_DMS_MAX;E.PE_UTM_MAX=A._pe.PeDefs.prototype.PE_UTM_MAX;E.PE_PARM_MAX=A._pe.PeDefs.prototype.PE_PARM_MAX;E.PE_TYPE_NONE=A._pe.PeDefs.prototype.PE_TYPE_NONE;E.PE_TYPE_GEOGCS=A._pe.PeDefs.prototype.PE_TYPE_GEOGCS;E.PE_TYPE_PROJCS=A._pe.PeDefs.prototype.PE_TYPE_PROJCS;E.PE_TYPE_GEOGTRAN=
A._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;E.PE_TYPE_COORDSYS=A._pe.PeDefs.prototype.PE_TYPE_COORDSYS;E.PE_TYPE_UNIT=A._pe.PeDefs.prototype.PE_TYPE_UNIT;E.PE_STR_OPTS_NONE=A._pe.PeDefs.prototype.PE_STR_OPTS_NONE;E.PE_STR_AUTH_NONE=A._pe.PeDefs.prototype.PE_STR_AUTH_NONE;E.PE_STR_AUTH_TOP=A._pe.PeDefs.prototype.PE_STR_AUTH_TOP;E.PE_STR_NAME_CANON=A._pe.PeDefs.prototype.PE_STR_NAME_CANON;E.PE_PARM_X0=A._pe.PeDefs.prototype.PE_PARM_X0;E.PE_PARM_ND=A._pe.PeDefs.prototype.PE_PARM_ND;E.PE_TRANSFORM_1_TO_2=
A._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;E.PE_TRANSFORM_2_TO_1=A._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;E.PE_TRANSFORM_P_TO_G=A._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;E.PE_TRANSFORM_G_TO_P=A._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;E.PE_HORIZON_RECT=A._pe.PeDefs.prototype.PE_HORIZON_RECT;E.PE_HORIZON_POLY=A._pe.PeDefs.prototype.PE_HORIZON_POLY;E.PE_HORIZON_LINE=A._pe.PeDefs.prototype.PE_HORIZON_LINE;E.PE_HORIZON_DELTA=A._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(A.PeDefs||(A.PeDefs={}));(function(E){function r(T,
F){let K=null,J=O[T];J||(J={},O[T]=J);J.hasOwnProperty(String(F))?K=J[F]:(T=A._pe.PeFactory.prototype.factoryByType(T,F),A._pe.compare(T,A._pe.NULL)||(K=T,J[F]=K));return K=C(K)}function C(T){if(T){const F=T.getType();switch(F){case A.PeDefs.PE_TYPE_GEOGCS:T=A._pe.castObject(T,A._pe.PeGeogcs);break;case A.PeDefs.PE_TYPE_PROJCS:T=A._pe.castObject(T,A._pe.PeProjcs);break;case A.PeDefs.PE_TYPE_GEOGTRAN:T=A._pe.castObject(T,A._pe.PeGeogtran);break;default:F&A.PeDefs.PE_TYPE_UNIT&&(T=A._pe.castObject(T,
A._pe.PeUnit))}}return T}const O={},P={};E.initialize=function(){A._pe.PeFactory.prototype.initialize(null)};E.coordsys=function(T){return r(A.PeDefs.PE_TYPE_COORDSYS,T)};E.factoryByType=r;E.fromString=function(T,F){let K=null,J=P[T];J||(J={},P[T]=J);J.hasOwnProperty(F)?K=J[F]:(T=A._pe.PeFactory.prototype.fromString(T,F),A._pe.compare(T,A._pe.NULL)||(K=T,J[F]=K));return K=C(K)};E.geogcs=function(T){return r(A.PeDefs.PE_TYPE_GEOGCS,T)};E.geogtran=function(T){return r(A.PeDefs.PE_TYPE_GEOGTRAN,T)};
E.getCode=function(T){return A._pe.PeFactory.prototype.getCode(T)};E.projcs=function(T){return r(A.PeDefs.PE_TYPE_PROJCS,T)};E.unit=function(T){return r(A.PeDefs.PE_TYPE_UNIT,T)}})(A.PeFactory||(A.PeFactory={}));A.PeGCSExtent=null;(function(E){let r;E.init=function(){E.PE_GTLIST_OPTS_COMMON=A._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;r=A._pe._pe_getPeGTlistExtendedEntrySize()};E.getGTlist=function(C,O,P,T,F,K){let J=null;const L=new A._pe.PeInteger(K);try{const Y=A._pe.PeGTlistExtended.prototype.getGTlist(C,
O,P,T,F,L);if(K=L.val)if(J=[Y],1<K){const W=A._pe.getPointer(Y);for(C=1;C<K;C++)J.push(A._pe.wrapPointer(W+r*C,A._pe.PeGTlistExtendedEntry))}}finally{A._pe.destroy(L)}return J}})(A.PeGTlistExtended||(A.PeGTlistExtended={}));(function(E){E.destroy=function(r){if(r&&r.length){for(const C of r)u(C),C.getEntries().forEach(O=>{u(O);O=O.getGeogtran();u(O);O.getParameters().forEach(u);[O.getGeogcs1(),O.getGeogcs2()].forEach(P=>{u(P);const T=P.getDatum();u(T);u(T.getSpheroid());u(P.getPrimem());u(P.getUnit())})});
A._pe.PeGTlistExtendedEntry.prototype.Delete(r[0])}}})(A.PeGTlistExtendedEntry||(A.PeGTlistExtendedEntry={}));(function(E){E.geogToGeog=function(r,C,O,P,T){A._pe.ensureCache.prepare();var F=B(O);const K=O===F;F=A._pe.ensureFloat64(F);let J=0;P&&(J=A._pe.ensureFloat64(P));(r=A._pe._pe_geog_to_geog(A._pe.getPointer(r),C,F,J,T))&&M(O,C,F,K);return r}})(A.PeGTTransformations||(A.PeGTTransformations={}));(function(E){function r(O,P,T,F,K,J){A._pe.ensureCache.prepare();switch(O){case "dd":var L=A._pe._pe_geog_to_dd;
var Y=A.PeDefs.PE_DD_MAX;break;case "ddm":L=A._pe._pe_geog_to_ddm;Y=A.PeDefs.PE_DDM_MAX;break;case "dms":L=A._pe._pe_geog_to_dms,Y=A.PeDefs.PE_DMS_MAX}O=0;P&&(O=A._pe.getPointer(P));P=B(F);P=A._pe.ensureFloat64(P);Y=D(T,Y);F=A._pe.ensureInt32(Y);if(K=L(O,T,P,K,F))for(L=0;L<T;L++)J[L]=A._pe.UTF8ToString(Y[L]);return K}function C(O,P,T,F,K){A._pe.ensureCache.prepare();switch(O){case "dd":var J=A._pe._pe_dd_to_geog;break;case "ddm":J=A._pe._pe_ddm_to_geog;break;case "dms":J=A._pe._pe_dms_to_geog}O=0;
P&&(O=A._pe.getPointer(P));P=F.map(L=>A._pe.ensureString(L));F=A._pe.ensureInt32(P);P=A._pe.ensureFloat64(Array(2*T));(J=J(O,T,F,P))&&M(K,T,P);return J}E.geog_to_dms=function(O,P,T,F,K){return r("dms",O,P,T,F,K)};E.dms_to_geog=function(O,P,T,F){return C("dms",O,P,T,F)};E.geog_to_ddm=function(O,P,T,F,K){return r("ddm",O,P,T,F,K)};E.ddm_to_geog=function(O,P,T,F){return C("ddm",O,P,T,F)};E.geog_to_dd=function(O,P,T,F,K){return r("dd",O,P,T,F,K)};E.dd_to_geog=function(O,P,T,F){return C("dd",O,P,T,F)}})(A.PeNotationDms||
(A.PeNotationDms={}));(function(E){E.init=function(){E.PE_MGRS_STYLE_NEW=A._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;E.PE_MGRS_STYLE_OLD=A._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;E.PE_MGRS_STYLE_AUTO=A._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;E.PE_MGRS_180_ZONE_1_PLUS=A._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;E.PE_MGRS_ADD_SPACES=A._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};E.geog_to_mgrs_extended=function(r,C,O,P,T,F,K){A._pe.ensureCache.prepare();let J=0;r&&
(J=A._pe.getPointer(r));r=B(O);O=A._pe.ensureFloat64(r);r=D(C,A.PeDefs.PE_MGRS_MAX);const L=A._pe.ensureInt32(r);if(P=A._pe._pe_geog_to_mgrs_extended(J,C,O,P,T,F,L))for(T=0;T<C;T++)K[T]=A._pe.UTF8ToString(r[T]);return P};E.mgrs_to_geog_extended=function(r,C,O,P,T){A._pe.ensureCache.prepare();let F=0;r&&(F=A._pe.getPointer(r));r=O.map(K=>A._pe.ensureString(K));O=A._pe.ensureInt32(r);r=A._pe.ensureFloat64(Array(2*C));(P=A._pe._pe_mgrs_to_geog_extended(F,C,O,P,r))&&M(T,C,r);return P}})(A.PeNotationMgrs||
(A.PeNotationMgrs={}));(function(E){E.geog_to_usng=function(r,C,O,P,T,F,K){A._pe.ensureCache.prepare();let J=0;r&&(J=A._pe.getPointer(r));r=B(O);O=A._pe.ensureFloat64(r);r=D(C,A.PeDefs.PE_MGRS_MAX);const L=A._pe.ensureInt32(r);if(P=A._pe._pe_geog_to_usng(J,C,O,P,T,F,L))for(T=0;T<C;T++)K[T]=A._pe.UTF8ToString(r[T]);return P};E.usng_to_geog=function(r,C,O,P){A._pe.ensureCache.prepare();var T=0;r&&(T=A._pe.getPointer(r));r=O.map(F=>A._pe.ensureString(F));O=A._pe.ensureInt32(r);r=A._pe.ensureFloat64(Array(2*
C));(T=A._pe._pe_usng_to_geog(T,C,O,r))&&M(P,C,r);return T}})(A.PeNotationUsng||(A.PeNotationUsng={}));(function(E){E.init=function(){E.PE_UTM_OPTS_NONE=A._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;E.PE_UTM_OPTS_ADD_SPACES=A._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;E.PE_UTM_OPTS_NS=A._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};E.geog_to_utm=function(r,C,O,P,T){A._pe.ensureCache.prepare();var F=0;r&&(F=A._pe.getPointer(r));r=B(O);O=A._pe.ensureFloat64(r);r=D(C,A.PeDefs.PE_UTM_MAX);const K=
A._pe.ensureInt32(r);if(P=A._pe._pe_geog_to_utm(F,C,O,P,K))for(F=0;F<C;F++)T[F]=A._pe.UTF8ToString(r[F]);return P};E.utm_to_geog=function(r,C,O,P,T){A._pe.ensureCache.prepare();let F=0;r&&(F=A._pe.getPointer(r));r=O.map(K=>A._pe.ensureString(K));O=A._pe.ensureInt32(r);r=A._pe.ensureFloat64(Array(2*C));(P=A._pe._pe_utm_to_geog(F,C,O,P,r))&&M(T,C,r);return P}})(A.PeNotationUtm||(A.PeNotationUtm={}));(function(E){const r=new Map;E.init=function(){E.PE_PCSINFO_OPTION_NONE=A._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;
E.PE_PCSINFO_OPTION_DOMAIN=A._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;E.PE_POLE_OUTSIDE_BOUNDARY=A._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;E.PE_POLE_POINT=A._pe.PePCSInfo.prototype.PE_POLE_POINT};E.generate=function(C,O=E.PE_PCSINFO_OPTION_DOMAIN){let P,T;r.has(C)&&(T=r.get(C),T[O]&&(P=T[O]));P||(P=A._pe.PePCSInfo.prototype.generate(C,O),T||(T=[],r.set(C,T)),T[O]=P);return P}})(A.PePCSInfo||(A.PePCSInfo={}));(function(E){E.version_string=function(){return A._pe.PeVersion.prototype.version_string()}})(A.PeVersion||
(A.PeVersion={}));var z=Object.freeze({__proto__:null,get _pe(){return A._pe},isLoaded:H,isSupported:v,load:G,get PeCSTransformations(){return A.PeCSTransformations},get PeDefs(){return A.PeDefs},get PeFactory(){return A.PeFactory},get PeGCSExtent(){return A.PeGCSExtent},get PeGTlistExtended(){return A.PeGTlistExtended},get PeGTlistExtendedEntry(){return A.PeGTlistExtendedEntry},get PeGTTransformations(){return A.PeGTTransformations},get PeNotationDms(){return A.PeNotationDms},get PeNotationMgrs(){return A.PeNotationMgrs},
get PeNotationUsng(){return A.PeNotationUsng},get PeNotationUtm(){return A.PeNotationUtm},get PePCSInfo(){return A.PePCSInfo},get PeVersion(){return A.PeVersion},_init:y});A._init=y;A.isLoaded=H;A.isSupported=v;A.load=G;A.pe=z})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(q){return function(){function A(S){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(S&&S.steps)for(const I of S.steps)I instanceof
q?this.steps.push(I):this.steps.push(new q({wkid:I.wkid,wkt:I.wkt,isInverse:I.isInverse}))}A.cacheKey=function(S,I){return[void 0!==S.wkid&&null!==S.wkid?S.wkid.toString():"-1",void 0!==S.wkt&&null!==S.wkt?S.wkt.toString():"",void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==I.wkt?I.wkt.toString():""].join()};A.fromGE=function(S){const I=new A;let t="";for(const H of S.steps)S=q.fromGE(H),I.steps.push(S),t+=S.uid.toString()+",";I._cached_projection={};I._gtlistentry=null;
I._chain=t;return I};var w=A.prototype;w.getInverse=function(){const S=new A;S.steps=[];for(let I=this.steps.length-1;0<=I;I--)S.steps.push(this.steps[I].getInverse());return S};w.getGTListEntry=function(){let S="";for(const I of this.steps)S+=I.uid.toString()+",";S!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=S);return this._gtlistentry};w.assignCachedGe=function(S,I,t){this._cached_projection[A.cacheKey(S,I)]=t};w.getCachedGeTransformation=function(S,I){let t="";
for(const H of this.steps)t+=H.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t);S=this._cached_projection[A.cacheKey(S,I)];return void 0===S?null:S};return A}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(q){let A=0;return function(){function w(S=null){this.uid=A++;S?(this._wkt=void 0!==S.wkt?S.wkt:null,this._wkid=void 0!==S.wkid?S.wkid:-1,this._isInverse=void 0!==
S.isInverse?!0===S.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}w.fromGE=function(S){const I=new w;I._wkt=S.wkt;I._wkid=S.wkid;I._isInverse=S.isInverse;return I};w.prototype.getInverse=function(){const S=new w;S._wkt=this.wkt;S._wkid=this._wkid;S._isInverse=!this.isInverse;return S};q._createClass(w,[{key:"wkt",get:function(){return this._wkt},set:function(S){this._wkt=S;this.uid=A++}},{key:"wkid",get:function(){return this._wkid},set:function(S){this._wkid=S;this.uid=A++}},{key:"isInverse",
get:function(){return this._isInverse},set:function(S){this._isInverse=S;this.uid=A++}}]);return w}()})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/mat4 ../../../../geometry/support/aaBoundingRect ../../../../chunks/mat3f64 ../../../../chunks/mat4f64 ../../../../chunks/vec2f64 ../../../../chunks/mat3 ../../../../chunks/vec2 ../../support/buffer/InterleavedLayout ../lib/geometryDataUtils ../lib/Util ./renderers/utils ../lib/screenSizePerspectiveUtils ../../../../core/libs/gl-matrix-2/types/mat4 ../lib/GLMaterialTexture ./internal/MaterialUtil ../lib/Material ./internal/bufferWriterUtils ../../../../chunks/HUDMaterial.glsl ../shaders/HUDMaterialTechnique".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J,L){function Y(Da,Ja,Fa,fa=X){M.copy(fa,Da.anchorPos);fa[0]*=-Ja[0];fa[1]*=-Ja[1];fa[0]+=Da.screenOffset[0]*Fa;fa[1]+=Da.screenOffset[1]*Fa;return fa}function W(Da,Ja,Fa,fa,wa,ia,ra,xa){Ja=Ja-wa-(0<xa[0]?fa[0]*xa[0]:0);let ya=Ja+fa[0]+2*wa;Fa=Fa-wa-(0<xa[1]?fa[1]*xa[1]:0);wa=Fa+fa[1]+2*wa;ra.textureIsSignedDistanceField&&(ra=ra.distanceFieldBoundingBox,Ja+=fa[0]*ra[0],Fa+=fa[1]*ra[1],ya-=fa[0]*(1-ra[2]),wa-=fa[1]*(1-ra[3]),Ja-=ia,ya+=ia,Fa-=
ia,wa+=ia);return Da[0]>Ja&&Da[0]<ya&&Da[1]>Fa&&Da[1]<wa}let aa=function(Da){function Ja(fa,wa){fa=Da.call(this,wa,fa,Z)||this;fa.techniqueConfig=new L.HUDMaterialTechniqueConfiguration;return fa}A._inheritsLoose(Ja,Da);var Fa=Ja.prototype;Fa.getTechniqueConfig=function(fa,wa){this.techniqueConfig.output=fa;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.verticalOffset=!!this.params.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective;
this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0;this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset;this.techniqueConfig.isDraped=this.params.isDraped;this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest;this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled;this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField;this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled;this.techniqueConfig.vvColor=
!!this.params.vvColorEnabled;0===fa&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder);4===fa&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion);this.techniqueConfig.depthEnabled=this.params.depthEnabled;this.techniqueConfig.transparencyPassType=wa?wa.transparencyPassType:3;return this.techniqueConfig};Fa.intersect=function(fa,wa,ia,ra,xa,ya,Ka,Ha,La){La?this.intersectDrapedHudGeometry(fa,ya,Ka,Ha):this.intersectHudGeometry(fa,wa,ia,ra,Ka,Ha)};
Fa.intersectDrapedHudGeometry=function(fa,wa,ia,ra){const xa=fa.getAttribute(E.VertexAttrConstants.POSITION),ya=fa.getAttribute(E.VertexAttrConstants.SIZE),Ka=this.params,Ha=J.calculateAnchorPosForRendering(Ka);let La=1;var Ia=1;ra&&(Ia=ra(Ga),La=Ia[0],Ia=Ia[5]);La*=fa.screenToWorldRatio;Ia*=fa.screenToWorldRatio;ra=2*fa.screenToWorldRatio;for(let R=0;R<xa.data.length/xa.size;R++){var f=R*xa.size;const l=xa.data[f];f=xa.data[f+1];const c=R*ya.size;Na[0]=ya.data[c]*La;Na[1]=ya.data[c+1]*Ia;let a;Ka.textureIsSignedDistanceField&&
(a=Ka.outlineSize*fa.screenToWorldRatio/2);W(wa,l,f,Na,ra,a,Ka,Ha)&&ia()}};Fa.intersectHudGeometry=function(fa,wa,ia,ra,xa,ya){if(ra.options.selectionMode&&ra.options.hud&&!r.isInstanceHidden(wa)){var Ka=fa.data;fa=this.params;var Ha=wa=1;B.fromMat4(pa,ia);if(ya){Ha=ya(Ga);wa=Ha[0];Ha=Ha[5];{ya=pa;var La=ya[0],Ia=ya[1],f=ya[2],R=ya[3],l=ya[4],c=ya[5],a=ya[6],b=ya[7],d=ya[8],e=1/Math.sqrt(La*La+Ia*Ia+f*f);const g=1/Math.sqrt(R*R+l*l+c*c),h=1/Math.sqrt(a*a+b*b+d*d);ya[0]=La*e;ya[1]=Ia*e;ya[2]=f*e;ya[3]=
R*g;ya[4]=l*g;ya[5]=c*g;ya[6]=a*h;ya[7]=b*h;ya[8]=d*h}}ya=Ka.getVertexAttr()[E.VertexAttrConstants.POSITION];La=Ka.getVertexAttr()[E.VertexAttrConstants.SIZE];Ia=Ka.getVertexAttr()[E.VertexAttrConstants.NORMAL];Ka=Ka.getVertexAttr()[E.VertexAttrConstants.AUXPOS1];E.assert(3<=ya.size);f=ra.point;R=ra.camera;l=J.calculateAnchorPosForRendering(fa);wa*=R.pixelRatio;Ha*=R.pixelRatio;c="screen"===this.params.centerOffsetUnits;for(a=0;a<ya.data.length/ya.size;a++)if(b=a*ya.size,H.set(U,ya.data[b],ya.data[b+
1],ya.data[b+2]),H.transformMat4(U,U,ia),b=a*La.size,Na[0]=La.data[b]*wa,Na[1]=La.data[b+1]*Ha,H.transformMat4(U,U,R.viewMatrix),b=a*Ka.size,H.set(ua,Ka.data[b+0],Ka.data[b+1],Ka.data[b+2]),c||(U[0]+=ua[0],U[1]+=ua[1],0!==ua[2]&&(b=ua[2],H.normalize(ua,U),H.subtract(U,U,H.scale(ua,ua,b)))),b=a*Ia.size,H.set(ka,Ia.data[b],Ia.data[b+1],Ia.data[b+2]),this.normalAndViewAngle(ka,pa,R,Aa),this.applyVerticalOffsetTransformationView(U,Aa,R,la),R.applyProjection(U,sa),-1<sa[0]){b=Math.floor(sa[0])+this.params.screenOffset[0];
d=Math.floor(sa[1])+this.params.screenOffset[1];c&&(b+=ua[0],0!==ua[1]&&(d+=C.applyScaleFactor(ua[1],la.factorAlignment)));C.applyPrecomputedScaleFactor(Na,la.factor,Na);e=1*R.pixelRatio;let g;fa.textureIsSignedDistanceField&&(g=fa.outlineSize*R.pixelRatio/2);W(f,b,d,Na,e,g,fa,l)&&(d=ra.ray,H.transformMat4(na,U,v.invert(ja,R.viewMatrix)),sa[0]=f[0],sa[1]=f[1],R.unprojectFromRenderScreen(sa,U)&&(b=t.create(),H.copy(b,d.direction),e=1/H.length(b),H.scale(b,b,e),d=H.distance(d.origin,U)*e,xa(d,b,-1,
1,!0,na)))}}};Fa.computeAttachmentOrigin=function(fa,wa){fa=fa.data;var ia="getVertexAttr"in fa?fa.getVertexAttr():"vertexAttr"in fa?fa.vertexAttr:null;if(!ia)return null;const ra=E.VertexAttrConstants.POSITION;ia=ia[ra];fa="getIndices"in fa?fa.getIndices(ra):"indices"in fa?fa.indices[ra]:null;return z.computeAttachmentOriginPoints(ia,fa,wa)};Fa.createBufferWriter=function(){return new Ca(this)};Fa.normalAndViewAngle=function(fa,wa,ia,ra){O.isMat4(wa)&&(wa=B.fromMat4(va,wa));H.transformMat3(ra.normal,
fa,wa);H.transformMat4(ra.normal,ra.normal,ia.viewInverseTransposeMatrix);ra.cosAngle=H.dot(qa,Oa);return ra};Fa.updateScaleInfo=function(fa,wa,ia){const ra=this.params;ra.screenSizePerspective?C.precomputeScaleFactor(ia,wa,ra.screenSizePerspective,fa.factor):(fa.factor.scale=1,fa.factor.factor=0,fa.factor.minPixelSize=0,fa.factor.paddingPixels=0);ra.screenSizePerspectiveAlignment?C.precomputeScaleFactor(ia,wa,ra.screenSizePerspectiveAlignment,fa.factorAlignment):(fa.factorAlignment.factor=fa.factor.factor,
fa.factorAlignment.scale=fa.factor.scale,fa.factorAlignment.minPixelSize=fa.factor.minPixelSize,fa.factorAlignment.paddingPixels=fa.factor.paddingPixels)};Fa.applyShaderOffsetsView=function(fa,wa,ia,ra,xa,ya,Ka){wa=this.normalAndViewAngle(wa,ia,xa,Aa);this.applyVerticalGroundOffsetView(fa,wa,xa,Ka);this.applyVerticalOffsetTransformationView(Ka,wa,xa,ya);this.applyPolygonOffsetView(Ka,wa,ra[3],xa,Ka);this.applyCenterOffsetView(Ka,ra,Ka);return Ka};Fa.applyShaderOffsetsNDC=function(fa,wa,ia,ra,xa){this.applyCenterOffsetNDC(fa,
wa,ia,ra);w.isSome(xa)&&H.copy(xa,ra);this.applyPolygonOffsetNDC(ra,wa,ia,ra);return ra};Fa.applyPolygonOffsetView=function(fa,wa,ia,ra,xa){var ya=ra.aboveGround?1:-1;ia=S.sign(ia);0===ia&&(ia=ya);ya*=ia;if(0>=this.params.shaderPolygonOffset)return H.copy(xa,fa);wa=S.clamp(Math.abs(wa.cosAngle),.01,1);ra=1-Math.sqrt(1-wa*wa)/wa/ra.viewport[2];0<ya?H.scale(xa,fa,ra):H.scale(xa,fa,1/ra);return xa};Fa.applyVerticalGroundOffsetView=function(fa,wa,ia,ra){const xa=H.length(fa),ya=ia.aboveGround?1:-1;ia=
.5*ia.computeRenderPixelSizeAtDist(xa);wa=H.scale(U,wa.normal,ya*ia);H.add(ra,fa,wa);return ra};Fa.applyVerticalOffsetTransformationView=function(fa,wa,ia,ra){const xa=this.params;if(!xa.verticalOffset||!xa.verticalOffset.screenLength){if(xa.screenSizePerspective||xa.screenSizePerspectiveAlignment){var ya=H.length(fa);this.updateScaleInfo(ra,ya,wa.cosAngle)}else ra.factor.scale=1,ra.factorAlignment.scale=1;return fa}ya=H.length(fa);ia=T.verticalOffsetAtDistance(ia,ya,xa.verticalOffset,wa.cosAngle,
xa.screenSizePerspectiveAlignment||xa.screenSizePerspective);this.updateScaleInfo(ra,ya,wa.cosAngle);H.scale(wa.normal,wa.normal,ia);return H.add(fa,fa,wa.normal)};Fa.applyCenterOffsetView=function(fa,wa,ia){const ra="screen"!==this.params.centerOffsetUnits;ia!==fa&&H.copy(ia,fa);ra&&(ia[0]+=wa[0],ia[1]+=wa[1],wa[2]&&(H.normalize(ka,ia),H.add(ia,ia,H.scale(ka,ka,wa[2]))));return ia};Fa.applyCenterOffsetNDC=function(fa,wa,ia,ra){const xa="screen"!==this.params.centerOffsetUnits;ra!==fa&&H.copy(ra,
fa);xa||(ra[0]+=wa[0]/ia.fullWidth*2,ra[1]+=wa[1]/ia.fullHeight*2);return ra};Fa.applyPolygonOffsetNDC=function(fa,wa,ia,ra){const xa=this.params.shaderPolygonOffset;fa!==ra&&H.copy(ra,fa);xa&&(fa=ia.aboveGround?1:-1,wa=fa*S.sign(wa[3]),ra[2]-=(wa||fa)*xa);return ra};Fa.getGLMaterial=function(fa){if(0===fa.output||7===fa.output)return new oa(fa);if(4===fa.output)return new ta(fa)};Fa.calculateRelativeScreenBounds=function(fa,wa,ia=G.create()){Y(this.params,fa,wa,ia);ia[2]=ia[0]+fa[0];ia[3]=ia[1]+
fa[1];return ia};return Ja}(F.Material);P=function(Da){function Ja(fa){fa=Da.call(this,{...fa,...fa.material.params})||this;fa.updateParameters();return fa}A._inheritsLoose(Ja,Da);var Fa=Ja.prototype;Fa.beginSlot=function(fa){return fa===(this.material.params.drawInSecondSlot?19:18)};Fa.updateParameters=function(fa){this.updateTexture(this.material.params.textureId);this.selectProgram(fa)};Fa.selectProgram=function(fa){this.technique=this.techniqueRep.acquireAndReleaseExisting(L.HUDMaterialTechnique,
this.material.getTechniqueConfig(this.output,fa),this.technique)};Fa.ensureParameters=function(fa){this.updateParameters(fa)};Fa.bind=function(fa,wa){fa.bindProgram(this.technique.program);this.bindTexture(fa,this.technique.program);this.bindTextureScale(fa,this.technique.program);this.technique.bindPass(fa,this.material.params,wa)};return Ja}(P);let oa=function(Da){function Ja(fa){fa=Da.call(this,fa)||this;fa.isOcclusionSlot=!1;return fa}A._inheritsLoose(Ja,Da);var Fa=Ja.prototype;Fa.beginSlot=function(fa){const wa=
this.material.params.drawInSecondSlot?19:18;if(this.material.params.occlusionTest)return this.isOcclusionSlot=12===fa,12===fa||fa===wa;this.isOcclusionSlot=!1;return fa===wa};Fa.getTechnique=function(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique};Fa.selectProgram=function(fa){this.technique=this.techniqueRep.acquireAndReleaseExisting(L.HUDMaterialTechnique,this.material.getTechniqueConfig(this.output,fa),this.technique);this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting(L.HUDMaterialTechnique,
this.material.getTechniqueConfig(6,fa),this.occlusionTechnique)};Fa.bind=function(fa,wa){const ia=this.getTechnique();fa.bindProgram(ia.program);this.isOcclusionSlot||(this.bindTexture(fa,ia.program),this.bindTextureScale(fa,ia.program));ia.bindPass(fa,this.material.params,wa)};return Ja}(P),ta=function(Da){function Ja(Fa){return Da.call(this,{...Fa,output:4})||this}A._inheritsLoose(Ja,Da);return Ja}(P);const la={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,
minPixelSize:0,paddingPixels:0}},X=D.create(),U=t.create(),ka=t.create(),sa=I.createRenderScreenPointArray3(),qa=t.create(),na=t.create(),pa=y.create(),va=y.create(),ja=u.create(),ua=t.create(),Aa={normal:qa,cosAngle:0},Ga=u.create(),Na=[0,0],Oa=t.fromValues(0,0,1),Z={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,
1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:D.fromValues(.5,.5),shaderPolygonOffset:1E-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1,
...F.materialParametersDefaults},ha=N.newLayout().vec3f(E.VertexAttrConstants.POSITION).vec3f(E.VertexAttrConstants.NORMAL).vec2f(E.VertexAttrConstants.UV0).vec4u8(E.VertexAttrConstants.COLOR).vec2f(E.VertexAttrConstants.SIZE).vec4f(E.VertexAttrConstants.AUXPOS1).vec4f(E.VertexAttrConstants.AUXPOS2);let Ca=function(){function Da(Fa){this.material=Fa;this.vertexBufferLayout=ha}var Ja=Da.prototype;Ja.allocate=function(Fa){return this.vertexBufferLayout.createBuffer(Fa)};Ja.elementCount=function(Fa){return 6*
Fa.indices[E.VertexAttrConstants.POSITION].length};Ja.write=function(Fa,fa,wa,ia){K.writePosition(fa.indices[E.VertexAttrConstants.POSITION],fa.vertexAttr[E.VertexAttrConstants.POSITION].data,Fa.transformation,wa.position,ia,6);K.writeNormal(fa.indices[E.VertexAttrConstants.NORMAL],fa.vertexAttr[E.VertexAttrConstants.NORMAL].data,Fa.invTranspTransformation,wa.normal,ia,6);var ra=fa.vertexAttr[E.VertexAttrConstants.UV0].data;if(null==ra||4>ra.length){ra=this.material.params;var xa=Fa=0;var ya=ra.texCoordScale[0];
ra=ra.texCoordScale[1]}else Fa=ra[0],xa=ra[1],ya=ra[2],ra=ra[3];ya=Math.min(1.99999,ya+1);ra=Math.min(1.99999,ra+1);var Ka=fa.indices[E.VertexAttrConstants.POSITION].length,Ha=wa.uv0,La=ia;for(var Ia=0;Ia<Ka;++Ia)Ha.set(La,0,Fa),Ha.set(La,1,xa),La+=1,Ha.set(La,0,ya),Ha.set(La,1,xa),La+=1,Ha.set(La,0,ya),Ha.set(La,1,ra),La+=1,Ha.set(La,0,ya),Ha.set(La,1,ra),La+=1,Ha.set(La,0,Fa),Ha.set(La,1,ra),La+=1,Ha.set(La,0,Fa),Ha.set(La,1,xa),La+=1;K.writeColor(fa.indices[E.VertexAttrConstants.COLOR],fa.vertexAttr[E.VertexAttrConstants.COLOR].data,
4,wa.color,ia,6);Fa=fa.indices[E.VertexAttrConstants.SIZE];xa=fa.vertexAttr[E.VertexAttrConstants.SIZE].data;ya=Fa.length;ra=wa.size;Ka=ia;for(Ha=0;Ha<ya;++Ha){La=xa[2*Fa[Ha]];Ia=xa[2*Fa[Ha]+1];for(let f=0;6>f;++f)ra.set(Ka,0,La),ra.set(Ka,1,Ia),Ka+=1}fa.indices[E.VertexAttrConstants.AUXPOS1]&&fa.vertexAttr[E.VertexAttrConstants.AUXPOS1]&&K.writeBufferVec4(fa.indices[E.VertexAttrConstants.AUXPOS1],fa.vertexAttr[E.VertexAttrConstants.AUXPOS1].data,wa.auxpos1,ia,6);fa.indices[E.VertexAttrConstants.AUXPOS2]&&
fa.vertexAttr[E.VertexAttrConstants.AUXPOS2]&&K.writeBufferVec4(fa.indices[E.VertexAttrConstants.AUXPOS2],fa.vertexAttr[E.VertexAttrConstants.AUXPOS2].data,wa.auxpos2,ia,6)};return Da}();q.HUDMaterial=aa;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(q,A){function w(X,U){X[0]=U[0];X[1]=U[1];X[2]=U[2];X[3]=U[4];X[4]=U[5];X[5]=U[6];X[6]=U[8];X[7]=U[9];X[8]=U[10];return X}function S(X,U){X[0]=U[0];X[1]=U[1];X[2]=U[2];X[3]=U[3];
X[4]=U[4];X[5]=U[5];X[6]=U[6];X[7]=U[7];X[8]=U[8];return X}function I(X,U,ka,sa,qa,na,pa,va,ja,ua){X[0]=U;X[1]=ka;X[2]=sa;X[3]=qa;X[4]=na;X[5]=pa;X[6]=va;X[7]=ja;X[8]=ua;return X}function t(X){X[0]=1;X[1]=0;X[2]=0;X[3]=0;X[4]=1;X[5]=0;X[6]=0;X[7]=0;X[8]=1;return X}function H(X,U){if(X===U){const ka=U[1],sa=U[2],qa=U[5];X[1]=U[3];X[2]=U[6];X[3]=ka;X[5]=U[7];X[6]=sa;X[7]=qa}else X[0]=U[0],X[1]=U[3],X[2]=U[6],X[3]=U[1],X[4]=U[4],X[5]=U[7],X[6]=U[2],X[7]=U[5],X[8]=U[8];return X}function v(X,U){const ka=
U[0],sa=U[1],qa=U[2],na=U[3],pa=U[4],va=U[5],ja=U[6],ua=U[7];U=U[8];const Aa=U*pa-va*ua,Ga=-U*na+va*ja,Na=ua*na-pa*ja;let Oa=ka*Aa+sa*Ga+qa*Na;if(!Oa)return null;Oa=1/Oa;X[0]=Aa*Oa;X[1]=(-U*sa+qa*ua)*Oa;X[2]=(va*sa-qa*pa)*Oa;X[3]=Ga*Oa;X[4]=(U*ka-qa*ja)*Oa;X[5]=(-va*ka+qa*na)*Oa;X[6]=Na*Oa;X[7]=(-ua*ka+sa*ja)*Oa;X[8]=(pa*ka-sa*na)*Oa;return X}function G(X,U){const ka=U[0],sa=U[1],qa=U[2],na=U[3],pa=U[4],va=U[5],ja=U[6],ua=U[7];U=U[8];X[0]=pa*U-va*ua;X[1]=qa*ua-sa*U;X[2]=sa*va-qa*pa;X[3]=va*ja-na*
U;X[4]=ka*U-qa*ja;X[5]=qa*na-ka*va;X[6]=na*ua-pa*ja;X[7]=sa*ja-ka*ua;X[8]=ka*pa-sa*na;return X}function y(X){const U=X[3],ka=X[4],sa=X[5],qa=X[6],na=X[7],pa=X[8];return X[0]*(pa*ka-sa*na)+X[1]*(-pa*U+sa*qa)+X[2]*(na*U-ka*qa)}function u(X,U,ka){const sa=U[0],qa=U[1],na=U[2],pa=U[3],va=U[4],ja=U[5],ua=U[6],Aa=U[7];U=U[8];const Ga=ka[0],Na=ka[1],Oa=ka[2],Z=ka[3],ha=ka[4],Ca=ka[5],Da=ka[6],Ja=ka[7];ka=ka[8];X[0]=Ga*sa+Na*pa+Oa*ua;X[1]=Ga*qa+Na*va+Oa*Aa;X[2]=Ga*na+Na*ja+Oa*U;X[3]=Z*sa+ha*pa+Ca*ua;X[4]=
Z*qa+ha*va+Ca*Aa;X[5]=Z*na+ha*ja+Ca*U;X[6]=Da*sa+Ja*pa+ka*ua;X[7]=Da*qa+Ja*va+ka*Aa;X[8]=Da*na+Ja*ja+ka*U;return X}function D(X,U,ka){const sa=U[0],qa=U[1],na=U[2],pa=U[3],va=U[4],ja=U[5],ua=U[6],Aa=U[7];U=U[8];const Ga=ka[0];ka=ka[1];X[0]=sa;X[1]=qa;X[2]=na;X[3]=pa;X[4]=va;X[5]=ja;X[6]=Ga*sa+ka*pa+ua;X[7]=Ga*qa+ka*va+Aa;X[8]=Ga*na+ka*ja+U;return X}function B(X,U,ka){const sa=U[0],qa=U[1],na=U[2],pa=U[3],va=U[4],ja=U[5],ua=U[6],Aa=U[7];U=U[8];const Ga=Math.sin(ka);ka=Math.cos(ka);X[0]=ka*sa+Ga*pa;
X[1]=ka*qa+Ga*va;X[2]=ka*na+Ga*ja;X[3]=ka*pa-Ga*sa;X[4]=ka*va-Ga*qa;X[5]=ka*ja-Ga*na;X[6]=ua;X[7]=Aa;X[8]=U;return X}function M(X,U,ka){const sa=ka[0],qa=ka[1];ka=ka[2];X[0]=sa*U[0];X[1]=sa*U[1];X[2]=sa*U[2];X[3]=qa*U[3];X[4]=qa*U[4];X[5]=qa*U[5];X[6]=ka*U[6];X[7]=ka*U[7];X[8]=ka*U[8];return X}function N(X,U,ka){const sa=ka[0];ka=ka[1];X[0]=sa*U[0];X[1]=sa*U[1];X[2]=sa*U[2];X[3]=ka*U[3];X[4]=ka*U[4];X[5]=ka*U[5];return X}function z(X,U){X[0]=1;X[1]=0;X[2]=0;X[3]=0;X[4]=1;X[5]=0;X[6]=U[0];X[7]=U[1];
X[8]=1;return X}function E(X,U){const ka=Math.sin(U);U=Math.cos(U);X[0]=U;X[1]=ka;X[2]=0;X[3]=-ka;X[4]=U;X[5]=0;X[6]=0;X[7]=0;X[8]=1;return X}function r(X,U){X[0]=U[0];X[1]=0;X[2]=0;X[3]=0;X[4]=U[1];X[5]=0;X[6]=0;X[7]=0;X[8]=1;return X}function C(X,U){X[0]=U[0];X[1]=U[1];X[2]=0;X[3]=U[2];X[4]=U[3];X[5]=0;X[6]=U[4];X[7]=U[5];X[8]=1;return X}function O(X,U){var ka=U[0],sa=U[1],qa=U[2];U=U[3];var na=ka+ka,pa=sa+sa;const va=qa+qa;ka*=na;const ja=sa*na;sa*=pa;const ua=qa*na,Aa=qa*pa;qa*=va;na*=U;pa*=U;
U*=va;X[0]=1-sa-qa;X[3]=ja-U;X[6]=ua+pa;X[1]=ja+U;X[4]=1-ka-qa;X[7]=Aa-na;X[2]=ua-pa;X[5]=Aa+na;X[8]=1-ka-sa;return X}function P(X,U){const ka=U[0],sa=U[1],qa=U[2],na=U[4],pa=U[5],va=U[6],ja=U[8],ua=U[9];U=U[10];const Aa=U*pa-va*ua,Ga=-U*na+va*ja,Na=ua*na-pa*ja;var Oa=ka*Aa+sa*Ga+qa*Na;if(!Oa)return null;Oa=1/Oa;X[0]=Aa*Oa;X[1]=(-U*sa+qa*ua)*Oa;X[2]=(va*sa-qa*pa)*Oa;X[3]=Ga*Oa;X[4]=(U*ka-qa*ja)*Oa;X[5]=(-va*ka+qa*na)*Oa;X[6]=Na*Oa;X[7]=(-ua*ka+sa*ja)*Oa;X[8]=(pa*ka-sa*na)*Oa;return X}function T(X,
U){const ka=U[0],sa=U[1],qa=U[2],na=U[3],pa=U[4],va=U[5],ja=U[6],ua=U[7];var Aa=U[8],Ga=U[9],Na=U[10],Oa=U[11];const Z=U[12],ha=U[13],Ca=U[14];U=U[15];const Da=ka*va-sa*pa,Ja=ka*ja-qa*pa,Fa=ka*ua-na*pa,fa=sa*ja-qa*va,wa=sa*ua-na*va,ia=qa*ua-na*ja,ra=Aa*ha-Ga*Z,xa=Aa*Ca-Na*Z;Aa=Aa*U-Oa*Z;const ya=Ga*Ca-Na*ha;Ga=Ga*U-Oa*ha;Na=Na*U-Oa*Ca;Oa=Da*Na-Ja*Ga+Fa*ya+fa*Aa-wa*xa+ia*ra;if(!Oa)return null;Oa=1/Oa;X[0]=(va*Na-ja*Ga+ua*ya)*Oa;X[1]=(ja*Aa-pa*Na-ua*xa)*Oa;X[2]=(pa*Ga-va*Aa+ua*ra)*Oa;X[3]=(qa*Ga-sa*
Na-na*ya)*Oa;X[4]=(ka*Na-qa*Aa+na*xa)*Oa;X[5]=(sa*Aa-ka*Ga-na*ra)*Oa;X[6]=(ha*ia-Ca*wa+U*fa)*Oa;X[7]=(Ca*Fa-Z*ia-U*Ja)*Oa;X[8]=(Z*wa-ha*Fa+U*Da)*Oa;return X}function F(X,U,ka){X[0]=2/U;X[1]=0;X[2]=0;X[3]=0;X[4]=-2/ka;X[5]=0;X[6]=-1;X[7]=1;X[8]=1;return X}function K(X){return"mat3("+X[0]+", "+X[1]+", "+X[2]+", "+X[3]+", "+X[4]+", "+X[5]+", "+X[6]+", "+X[7]+", "+X[8]+")"}function J(X){return Math.sqrt(Math.pow(X[0],2)+Math.pow(X[1],2)+Math.pow(X[2],2)+Math.pow(X[3],2)+Math.pow(X[4],2)+Math.pow(X[5],
2)+Math.pow(X[6],2)+Math.pow(X[7],2)+Math.pow(X[8],2))}function L(X,U,ka){X[0]=U[0]+ka[0];X[1]=U[1]+ka[1];X[2]=U[2]+ka[2];X[3]=U[3]+ka[3];X[4]=U[4]+ka[4];X[5]=U[5]+ka[5];X[6]=U[6]+ka[6];X[7]=U[7]+ka[7];X[8]=U[8]+ka[8];return X}function Y(X,U,ka){X[0]=U[0]-ka[0];X[1]=U[1]-ka[1];X[2]=U[2]-ka[2];X[3]=U[3]-ka[3];X[4]=U[4]-ka[4];X[5]=U[5]-ka[5];X[6]=U[6]-ka[6];X[7]=U[7]-ka[7];X[8]=U[8]-ka[8];return X}function W(X,U,ka){X[0]=U[0]*ka;X[1]=U[1]*ka;X[2]=U[2]*ka;X[3]=U[3]*ka;X[4]=U[4]*ka;X[5]=U[5]*ka;X[6]=
U[6]*ka;X[7]=U[7]*ka;X[8]=U[8]*ka;return X}function aa(X,U,ka,sa){X[0]=U[0]+ka[0]*sa;X[1]=U[1]+ka[1]*sa;X[2]=U[2]+ka[2]*sa;X[3]=U[3]+ka[3]*sa;X[4]=U[4]+ka[4]*sa;X[5]=U[5]+ka[5]*sa;X[6]=U[6]+ka[6]*sa;X[7]=U[7]+ka[7]*sa;X[8]=U[8]+ka[8]*sa;return X}function oa(X,U){return X[0]===U[0]&&X[1]===U[1]&&X[2]===U[2]&&X[3]===U[3]&&X[4]===U[4]&&X[5]===U[5]&&X[6]===U[6]&&X[7]===U[7]&&X[8]===U[8]}function ta(X,U){const ka=X[0],sa=X[1],qa=X[2],na=X[3],pa=X[4],va=X[5],ja=X[6],ua=X[7];X=X[8];const Aa=U[0],Ga=U[1],
Na=U[2],Oa=U[3],Z=U[4],ha=U[5],Ca=U[6],Da=U[7];U=U[8];return Math.abs(ka-Aa)<=A.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Aa))&&Math.abs(sa-Ga)<=A.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Ga))&&Math.abs(qa-Na)<=A.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Na))&&Math.abs(na-Oa)<=A.EPSILON*Math.max(1,Math.abs(na),Math.abs(Oa))&&Math.abs(pa-Z)<=A.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Z))&&Math.abs(va-ha)<=A.EPSILON*Math.max(1,Math.abs(va),Math.abs(ha))&&Math.abs(ja-Ca)<=A.EPSILON*Math.max(1,Math.abs(ja),
Math.abs(Ca))&&Math.abs(ua-Da)<=A.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Da))&&Math.abs(X-U)<=A.EPSILON*Math.max(1,Math.abs(X),Math.abs(U))}var la=Object.freeze({__proto__:null,fromMat4:w,copy:S,set:I,identity:t,transpose:H,invert:v,adjoint:G,determinant:y,multiply:u,translate:D,rotate:B,scale:M,scaleByVec2:N,fromTranslation:z,fromRotation:E,fromScaling:r,fromMat2d:C,fromQuat:O,normalFromMat4Legacy:P,normalFromMat4:T,projection:F,str:K,frob:J,add:L,subtract:Y,multiplyScalar:W,multiplyScalarAndAdd:aa,
exactEquals:oa,equals:ta,mul:u,sub:Y});q.add=L;q.adjoint=G;q.copy=S;q.determinant=y;q.equals=ta;q.exactEquals=oa;q.frob=J;q.fromMat2d=C;q.fromMat4=w;q.fromQuat=O;q.fromRotation=E;q.fromScaling=r;q.fromTranslation=z;q.identity=t;q.invert=v;q.mat3=la;q.mul=u;q.multiply=u;q.multiplyScalar=W;q.multiplyScalarAndAdd=aa;q.normalFromMat4=T;q.normalFromMat4Legacy=P;q.projection=F;q.rotate=B;q.scale=M;q.scaleByVec2=N;q.set=I;q.str=K;q.sub=Y;q.subtract=Y;q.translate=D;q.transpose=H})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["exports"],
function(q){function A(S){return S instanceof Float32Array&&16<=S.length}function w(S){return Array.isArray(S)&&16<=S.length}q.isMat4=function(S){return A(S)||w(S)};q.isMat4f32=A;q.isMat4f64=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterialTexture":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./DefaultTextureUnits","./GLMaterial"],function(q,A,w,S){return function(I){function t(v){var G=I.call(this,v)||this;
G._textureIDs=new Set;G._textureRepository=v.textureRep;G._textureId=v.textureId;G._initTransparent=!!v.initTextureTransparent;G._texture=G._acquireIfNotUndefined(G._textureId);G._textureNormal=G._acquireIfNotUndefined(v.normalTextureId);G._textureEmissive=G._acquireIfNotUndefined(v.emissiveTextureId);G._textureOcclusion=G._acquireIfNotUndefined(v.occlusionTextureId);G._textureMetallicRoughness=G._acquireIfNotUndefined(v.metallicRoughnessTextureId);return G}q._inheritsLoose(t,I);var H=t.prototype;
H.dispose=function(){this._textureIDs.forEach(v=>this._textureRepository.release(v));this._textureIDs.clear()};H.updateTexture=function(v){v!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=v,this._texture=this._acquireIfNotUndefined(this._textureId))};H.bindTexture=function(v,G){A.isSome(this._texture)&&(G.setUniform1i("tex",w.DefaultTextureUnits.DIFFUSE),v.bindTexture(this._texture.glTexture,w.DefaultTextureUnits.DIFFUSE));A.isSome(this._textureNormal)&&(G.setUniform1i("normalTexture",
w.DefaultTextureUnits.NORMAL),v.bindTexture(this._textureNormal.glTexture,w.DefaultTextureUnits.NORMAL));A.isSome(this._textureEmissive)&&(G.setUniform1i("texEmission",w.DefaultTextureUnits.EMISSION),v.bindTexture(this._textureEmissive.glTexture,w.DefaultTextureUnits.EMISSION));A.isSome(this._textureOcclusion)&&(G.setUniform1i("texOcclusion",w.DefaultTextureUnits.OCCLUSION),v.bindTexture(this._textureOcclusion.glTexture,w.DefaultTextureUnits.OCCLUSION));A.isSome(this._textureMetallicRoughness)&&(G.setUniform1i("texMetallicRoughness",
w.DefaultTextureUnits.METALLIC_ROUGHNESS),v.bindTexture(this._textureMetallicRoughness.glTexture,w.DefaultTextureUnits.METALLIC_ROUGHNESS))};H.bindTextureScale=function(v,G){(v=A.isSome(this._texture)&&this._texture.glTexture)&&v.descriptor.textureCoordinateScaleFactor?G.setUniform2fv("textureCoordinateScaleFactor",v.descriptor.textureCoordinateScaleFactor):G.setUniform2f("textureCoordinateScaleFactor",1,1)};H._acquireIfNotUndefined=function(v){if(!A.isNone(v))return this._textureIDs.add(v),this._textureRepository.acquire(v,
this._initTransparent)};H._releaseIfNotUndefined=function(v){void 0!==v&&(this._textureIDs.delete(v),this._textureRepository.release(v))};return t}(S)})},"esri/views/3d/webgl-engine/lib/DefaultTextureUnits":function(){define(["exports"],function(q){q.DefaultTextureUnits={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/chunks/HUDMaterial.glsl":function(){define("exports ./vec2f64 ./vec4f64 ./vec2 ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){function E(O){const P=new t.ShaderBuilder;var T=O.signedDistanceFieldEnabled;P.include(v.AlignPixel);P.include(u.HUD,O);P.include(G.Slice,O);if(6===O.output)return P.include(D.HUDOcclusionPass,O),P;P.include(y.ScreenSizePerspective);P.fragment.include(z.RgbaFloatEncoding);P.fragment.include(H.ColorConversion);P.include(M.VisualVariables,O);P.varyings.add("vcolor","vec4");P.varyings.add("vtc","vec2");P.varyings.add("vsize","vec2");O.binaryHighlightOcclusionEnabled&&
P.varyings.add("voccluded","float");P.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4");T&&P.vertex.uniforms.add("outlineColor","vec4");O.screenSizePerspectiveEnabled&&P.vertex.uniforms.add("screenSizePerspective","vec4");(O.debugDrawBorder||O.binaryHighlightOcclusionEnabled)&&P.varyings.add("debugBorderCoords","vec4");P.attributes.add("uv0","vec2");P.attributes.add("color","vec4");P.attributes.add("size","vec2");
P.attributes.add("auxpos2","vec4");P.vertex.code.add(I.glsl`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${O.screenSizePerspectiveEnabled?I.glsl`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:I.glsl`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${O.vvSize?"inputSize *\x3d vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${O.occlusionTestEnabled||O.binaryHighlightOcclusionEnabled?"bool visible \x3d testVisibilityHUD(posProj);":""}

      ${O.binaryHighlightOcclusionEnabled?"voccluded \x3d visible ? 0.0 : 1.0;":""}
    `);var F=I.glsl`
      vec2 uv01 = floor(uv0);
      vec2 uv = uv0 - uv01;
      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;
  `;const K=O.pixelSnappingEnabled?T?I.glsl`
  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:I.glsl`
  posProj += quadOffset;
  if (inputSize.x == size.x) {
    posProj = alignToPixelOrigin(posProj, viewport.zw);
  }`:I.glsl`posProj += quadOffset;`;P.vertex.code.add(I.glsl`
      ${O.occlusionTestEnabled?"if (visible) {":""}
      ${F}
      ${O.vvColor?"vcolor \x3d vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor \x3d color / 255.0 * materialColor;"}

      bool alphaDiscard = vcolor.a < ${I.glsl.float(N.symbolAlphaCutoff)};
      ${T?`alphaDiscard = alphaDiscard && outlineColor.a < ${I.glsl.float(N.symbolAlphaCutoff)};`:""}
      if (alphaDiscard) {
        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      } else {
        ${K}
        gl_Position = posProj;
      }

      vtc = uv * textureCoordinateScaleFactor;

      ${O.debugDrawBorder?"debugBorderCoords \x3d vec4(uv01, 1.5 / combinedSize);":""}
      vsize = inputSize;
      ${O.occlusionTestEnabled?I.glsl`} else { vtc = vec2(0.0);
        ${O.debugDrawBorder?"debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
    }
    `);P.fragment.uniforms.add("tex","sampler2D");T&&(P.fragment.uniforms.add("outlineColor","vec4"),P.fragment.uniforms.add("outlineSize","float"));F=O.debugDrawBorder?I.glsl`(isBorder > 0.0 ? 0.0 : ${I.glsl.float(N.defaultMaskAlphaCutoff)})`:I.glsl.float(N.defaultMaskAlphaCutoff);T=I.glsl`
    ${O.debugDrawBorder?I.glsl`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${T?I.glsl`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = 128.0;
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${F} ||
          fillPixelColor.a + outlinePixelColor.a < ${I.glsl.float(N.symbolAlphaCutoff)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        gl_FragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${F}) {
          discard;
        }

        gl_FragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:I.glsl`
          vec4 texColor = texture2D(tex, vtc, -0.5);
          if (texColor.a < ${F}) {
            discard;
          }
          gl_FragColor = texColor * premultiplyAlpha(vcolor);
          `}

    ${O.debugDrawBorder?I.glsl`gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);`:""}
  `;7===O.output&&P.fragment.code.add(I.glsl`
      void main() {
        ${T}
        gl_FragColor = vec4(gl_FragColor.a);
      }
      `);0===O.output&&P.fragment.code.add(I.glsl`
    void main() {
      ${T}
      ${O.FrontFacePass?"gl_FragColor.rgb /\x3d gl_FragColor.a;":""}
    }
    `);4===O.output&&(P.include(B.OutputHighlight),P.fragment.code.add(I.glsl`
    void main() {
      ${T}
      ${O.binaryHighlightOcclusionEnabled?I.glsl`
          if (voccluded == 1.0) {
            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `));return P}function r(O,P=C){if(O.textureIsSignedDistanceField){var T=O.anchorPos;O=O.distanceFieldBoundingBox;P[0]=T[0]*(O[2]-O[0])+O[0];P[1]=T[1]*(O[3]-O[1])+O[1]}else S.copy(P,O.anchorPos);return P}(function(O){O.bindUniforms=function(P,T,F){P.setUniform4fv("materialColor",T.color);T.textureIsSignedDistanceField&&(0>=T.outlineColor[3]||0>=T.outlineSize?(P.setUniform4fv("outlineColor",w.ZEROS),P.setUniform1f("outlineSize",0)):(P.setUniform4fv("outlineColor",T.outlineColor),P.setUniform1f("outlineSize",
T.outlineSize)));P.setUniform2f("screenOffset",2*T.screenOffset[0]*F,2*T.screenOffset[1]*F);P.setUniform2fv("anchorPos",r(T))}})(q.HUDMaterial||(q.HUDMaterial={}));const C=A.create();A=Object.freeze({__proto__:null,build:E,get HUDMaterial(){return q.HUDMaterial},calculateAnchorPosForRendering:r});q.HUDMaterialShader=A;q.build=E;q.calculateAnchorPosForRendering=r})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(q,
A){q.AlignPixel=function(w){const S=A.glsl`
    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `,I=A.glsl`

    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `;w.vertex.code.add(S);w.vertex.code.add(I);w.fragment.code.add(S);w.fragment.code.add(I)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../materials/internal/MaterialUtil"],function(q,A,w){function S(I){I.vertex.code.add(A.glsl`
    float screenSizePerspectiveMinSize(float size, vec4 factor) {
      float nonZeroSize = 1.0 - step(size, 0.0);

      return (
        factor.z * (
          1.0 +
          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding
          nonZeroSize *
          2.0 * factor.w / (
            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1
          )
        )
      );
    }
  `);I.vertex.code.add(A.glsl`
    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
      return absCosAngle * absCosAngle * absCosAngle;
    }
  `);I.vertex.code.add(A.glsl`
    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
      return vec4(
        min(params.x / (distanceToCamera - params.y), 1.0),
        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
        params.z,
        params.w
      );
    }
  `);I.vertex.code.add(A.glsl`
    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
    }
  `);I.vertex.code.add(A.glsl`
    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorFloat(
        size,
        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
      );
    }
  `);I.vertex.code.add(A.glsl`
    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);
    }
  `);I.vertex.code.add(A.glsl`
    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
    }
  `)}(function(I){I.bindUniforms=function(t,H){H.screenSizePerspective&&(w.bindScreenSizePerspective(H.screenSizePerspective,t,"screenSizePerspective"),w.bindScreenSizePerspective(H.screenSizePerspectiveAlignment||H.screenSizePerspective,t,"screenSizePerspectiveAlignment"))}})(S||(S={}));q.ScreenSizePerspective=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/ScreenSizePerspective.glsl"],
function(q,A,w){function S(I,t){I.include(w.ScreenSizePerspective);I.attributes.add("position","vec3");I.attributes.add("normal","vec3");I.attributes.add("auxpos1","vec4");I.vertex.uniforms.add("proj","mat4");I.vertex.uniforms.add("view","mat4");I.vertex.uniforms.add("viewNormal","mat4");I.vertex.uniforms.add("viewport","vec4");I.vertex.uniforms.add("camPos","vec3");I.vertex.uniforms.add("polygonOffset","float");I.vertex.uniforms.add("cameraGroundRelative","float");I.vertex.uniforms.add("pixelRatio",
"float");I.vertex.uniforms.add("perDistancePixelRatio","float");I.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float");t.verticalOffsetEnabled&&I.vertex.uniforms.add("verticalOffset","vec4");t.screenSizePerspectiveEnabled&&I.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4");I.vertex.uniforms.add("hudVisibilityTexture","sampler2D");I.vertex.defines.addFloat("SMALL_OFFSET_ANGLE",.984807753012208);I.vertex.code.add(A.glsl`
    struct ProjectHUDAux {
      vec3 posModel;
      vec3 posView;
      vec3 vnormal;

      float distanceToCamera;
      float absCosAngle;
    };
  `);I.vertex.code.add(A.glsl`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = sign(pointGroundDistance);

      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation
      // we take the absolute value because the sign that is dropped is
      // instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);

        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `);t.isDraped||I.vertex.code.add(A.glsl`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `);I.vertex.code.add(A.glsl`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.screenSizePerspectiveEnabled?t.verticalOffsetEnabled||1===t.screenCenterOffsetUnitsEnabled?"vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"":""}

      ${t.verticalOffsetEnabled?t.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight \x3d verticalOffset.x;":""}

      ${t.verticalOffsetEnabled?A.glsl`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${1!==t.screenCenterOffsetUnitsEnabled?A.glsl`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${1===t.screenCenterOffsetUnitsEnabled?t.screenSizePerspectiveEnabled?"float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY \x3d centerOffset.y;":""}

      ${1===t.screenCenterOffsetUnitsEnabled?"posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `);I.vertex.code.add(A.glsl`
    bool testVisibilityHUD(vec4 posProj) {
      // For occlusion testing, use the nearest pixel center to avoid
      // subpixel filtering messing up the color we use to test for
      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);

      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written
      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)
      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts

      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here
      if (uRenderTransparentlyOccludedHUD > 0.5) {
        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if
        // uRenderTransparentlyOccludedHUD = 0.75
        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;
      }

      // and visible pixels that are not occluded by semi-transparent geometry here
      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
    }
  `)}(function(I){I.bindUniforms=function(t,H){t.setUniform1f("uRenderTransparentlyOccludedHUD",0===H.renderTransparentlyOccludedHUD?1:1===H.renderTransparentlyOccludedHUD?0:.75)};I.bindVisibilityTexture=function(t,H,v){H.setUniform1i("hudVisibilityTexture",4);t.bindTexture(v.hudVisibilityTexture,4);t.setActiveTexture(0)}})(S||(S={}));q.HUD=S;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl":function(){define(["exports","../../shaderModules/interfaces"],
function(q,A){(function(w){w.bindUniforms=function(S){S.setUniform4f("color",1,1,1,1)}})(q.HUDOcclusion||(q.HUDOcclusion={}));q.HUDOcclusionPass=function(w){w.vertex.code.add(A.glsl`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }
    }
    else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `);w.fragment.uniforms.add("color","vec4");w.fragment.code.add(A.glsl`
  void main() {
    gl_FragColor = color;
  }
  `)};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/HUDMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/hud/HUDOcclusionPass.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../../../../chunks/HUDMaterial.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../lib/OrderIndependentTransparency".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O){t=function(F){function K(){return F.apply(this,arguments)||this}w._inheritsLoose(K,F);var J=K.prototype;J.initializeProgram=function(L){var Y=K.shader.get();const W=this.configuration;Y=Y.build({output:W.output,FrontFacePass:2===W.transparencyPassType,viewingMode:L.viewingMode,occlusionTestEnabled:W.occlusionTestEnabled,signedDistanceFieldEnabled:W.sdf,slicePlaneEnabled:W.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,
debugDrawBorder:W.debugDrawBorder,binaryHighlightOcclusionEnabled:W.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:W.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:W.screenSizePerspective,verticalOffsetEnabled:W.verticalOffset,pixelSnappingEnabled:W.pixelSnappingEnabled,vvSize:W.vvSize,vvColor:W.vvColor,vvInstancingEnabled:!1,isDraped:W.isDraped});return new G(L.rctx,Y.generateSource("vertex"),Y.generateSource("fragment"),v.Default3D)};J.bindPass=function(L,Y,W){u.View.bindProjectionMatrix(this.program,
W.camera.projectionMatrix);this.program.setUniform1f("cameraGroundRelative",W.camera.aboveGround?1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(W.camera.fovY/2)/(W.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",W.camera.viewInverseTransposeMatrix);this.program.setUniform1f("polygonOffset",Y.shaderPolygonOffset);C.VerticalOffset.bindUniforms(this.program,Y,W);B.ScreenSizePerspective.bindUniforms(this.program,Y);this.program.setUniform1f("pixelRatio",W.camera.pixelRatio||
1);u.View.bindViewport(this.program,W);6===this.configuration.output?N.HUDOcclusion.bindUniforms(this.program):(M.HUD.bindUniforms(this.program,W),r.HUDMaterial.bindUniforms(this.program,Y,W.camera.pixelRatio||1),E.VisualVariables.bindUniforms(this.program,Y),this.configuration.occlusionTestEnabled&&M.HUD.bindVisibilityTexture(L,this.program,W));4===this.configuration.output&&z.OutputHighlight.bindOutputHighlight(L,this.program,W)};J.bindDraw=function(L){u.View.bindView(this.program,L);u.View.bindCamPosition(this.program,
L.origin,L.camera.viewInverseTransposeMatrix);D.Slice.bindUniformsWithOrigin(this.program,this.configuration,L)};J.setPipelineState=function(L){const Y=this.configuration,W=3===L,aa=this.configuration.polygonOffsetEnabled&&P,oa=!W&&2!==L||4===Y.output?null:(Y.depthEnabled||6===Y.output)&&y.defaultDepthWriteParams;return y.makePipelineState({blending:0===Y.output||7===Y.output||4===Y.output?W?T:O.OITBlending(L):null,depthTest:{func:515},depthWrite:oa,colorWrite:y.defaultColorWriteParams,polygonOffset:aa})};
J.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};w._createClass(K,[{key:"primitiveType",get:function(){return 6===this.configuration.output?0:4}}]);return K}(t.ShaderTechnique);t.shader=new I.ReloadableShaderModule(r.HUDMaterialShader,()=>new Promise(function(F,K){q(["./HUDMaterial.glsl"],F,K)}));const P={factor:0,units:-4},T=y.simpleBlendingParams(1,771);I=function(F){function K(){var J=F.apply(this,arguments)||this;J.output=0;J.occlusionTestEnabled=
!0;J.sdf=!1;J.vvSize=!1;J.vvColor=!1;J.verticalOffset=!1;J.screenSizePerspective=!1;J.screenCenterOffsetUnitsEnabled=0;J.debugDrawBorder=!0;J.binaryHighlightOcclusion=!0;J.slicePlaneEnabled=!1;J.polygonOffsetEnabled=!1;J.depthEnabled=!0;J.transparencyPassType=3;J.pixelSnappingEnabled=!0;J.isDraped=!1;return J}w._inheritsLoose(K,F);return K}(H.ShaderTechniqueConfiguration);S.__decorate([H.parameter({count:8})],I.prototype,"output",void 0);S.__decorate([H.parameter()],I.prototype,"occlusionTestEnabled",
void 0);S.__decorate([H.parameter()],I.prototype,"sdf",void 0);S.__decorate([H.parameter()],I.prototype,"vvSize",void 0);S.__decorate([H.parameter()],I.prototype,"vvColor",void 0);S.__decorate([H.parameter()],I.prototype,"verticalOffset",void 0);S.__decorate([H.parameter()],I.prototype,"screenSizePerspective",void 0);S.__decorate([H.parameter({count:2})],I.prototype,"screenCenterOffsetUnitsEnabled",void 0);S.__decorate([H.parameter()],I.prototype,"debugDrawBorder",void 0);S.__decorate([H.parameter()],
I.prototype,"binaryHighlightOcclusion",void 0);S.__decorate([H.parameter()],I.prototype,"slicePlaneEnabled",void 0);S.__decorate([H.parameter()],I.prototype,"polygonOffsetEnabled",void 0);S.__decorate([H.parameter()],I.prototype,"depthEnabled",void 0);S.__decorate([H.parameter({count:4})],I.prototype,"transparencyPassType",void 0);S.__decorate([H.parameter()],I.prototype,"pixelSnappingEnabled",void 0);S.__decorate([H.parameter()],I.prototype,"isDraped",void 0);A.HUDMaterialTechnique=t;A.HUDMaterialTechniqueConfiguration=
I;Object.defineProperty(A,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/ScreenSizePerspective.glsl"],function(q,A,w){function S(H,v){const G=H.vertex.code;v.verticalOffsetEnabled?(H.vertex.uniforms.add("verticalOffset","vec4"),v.screenSizePerspectiveEnabled&&(H.include(w.ScreenSizePerspective),H.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),G.add(A.glsl`
    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
      ${1===v.viewingMode?A.glsl`vec3 worldNormal = normalize(worldPos + localOrigin);`:A.glsl`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
      ${v.screenSizePerspectiveEnabled?A.glsl`
          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));
          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:A.glsl`
          float verticalOffsetScreenHeight = verticalOffset.x;`}
      // Screen sized offset in world space, used for example for line callouts
      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
      return worldNormal * worldOffset;
    }

    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      return worldPos + calculateVerticalOffset(worldPos, localOrigin);
    }
    `)):G.add(A.glsl`
    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }
    `)}function I(H,v,G,y=t){y.screenLength=H.screenLength;y.perDistance=Math.tan(.5*v)/(.5*G);y.minWorldLength=H.minWorldLength;y.maxWorldLength=H.maxWorldLength;return y}(function(H){H.bindUniforms=function(v,G,y){G.verticalOffset&&(G=I(G.verticalOffset,y.camera.fovY,y.camera.fullViewport[3]),v.setUniform4f("verticalOffset",G.screenLength*(y.camera.pixelRatio||1),G.perDistance,G.minWorldLength,G.maxWorldLength))}})(S||(S={}));const t={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0};
q.VerticalOffset=S;q.calculateVerticalOffsetFactors=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/elevationAlignmentUtils":function(){define("exports ../../../../core/compilerUtils ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../geometry/projection ../../../../chunks/mat4f64 ../../../../layers/graphics/dehydratedFeatures ../../support/ElevationProvider ./graphicUtils".split(" "),function(q,A,w,S,I,t,H,v,G){function y(N,z,E,r,C){const O=(H.isDehydratedPoint(N)?
N.z:v.isSamplePosition(N)?N.array[N.offset+2]:N[2])||0;switch(E.mode){case "on-the-ground":return E=v.getElevationAtPoint(z,N,"ground")||0,C&&(C.verticalDistanceToGround=0,C.sampledElevation=E),E;case "relative-to-ground":return N=v.getElevationAtPoint(z,N,"ground")||0,E=E.geometryZWithOffset(O,r),C&&(C.verticalDistanceToGround=E,C.sampledElevation=N),E+N;case "relative-to-scene":return N=v.getElevationAtPoint(z,N,"scene")||0,E=E.geometryZWithOffset(O,r),C&&(C.verticalDistanceToGround=E,C.sampledElevation=
N),E+N;case "absolute-height":return E=E.geometryZWithOffset(O,r),C&&(r=v.getElevationAtPoint(z,N,"ground")||0,C.verticalDistanceToGround=E-r,C.sampledElevation=r),E;default:return A.neverReached(E.mode),0}}(function(N){N[N.NONE=0]="NONE";N[N.UPDATE=1]="UPDATE";N[N.RECREATE=2]="RECREATE"})(q.SymbolUpdateType||(q.SymbolUpdateType={}));const u={"absolute-height":{applyElevationAlignmentBuffer:function(N,z,E,r,C,O,P,T){O=T.calculateOffsetRenderUnits(P);T=T.featureExpressionInfoContext;z*=3;r*=3;for(P=
0;P<C;++P){const F=N[z+1],K=N[z+2];E[r+0]=N[z+0];E[r+1]=F;E[r+2]=null==T?K+O:O;z+=3;r+=3}return 0},requiresAlignment:function(N){const z=N.featureExpressionInfoContext;return 0!==N.meterUnitOffset||null!=z}},"on-the-ground":{applyElevationAlignmentBuffer:function(N,z,E,r,C,O){let P=0;const T=O.spatialReference;z*=3;r*=3;for(let F=0;F<C;++F){const K=N[z+0],J=N[z+1],L=O.getElevation(K,J,N[z+2],T,"ground")||0;P+=L;E[r+0]=K;E[r+1]=J;E[r+2]=L;z+=3;r+=3}return P/C},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(N,
z,E,r,C,O,P,T){let F=0;P=T.calculateOffsetRenderUnits(P);T=T.featureExpressionInfoContext;const K=O.spatialReference;z*=3;r*=3;for(let J=0;J<C;++J){const L=N[z+0],Y=N[z+1],W=N[z+2],aa=O.getElevation(L,Y,W,K,"ground")||0;F+=aa;E[r+0]=L;E[r+1]=Y;E[r+2]=null==T?W+aa+P:aa+P;z+=3;r+=3}return F/C},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(N,z,E,r,C,O,P,T){let F=0;P=T.calculateOffsetRenderUnits(P);T=T.featureExpressionInfoContext;const K=O.spatialReference;z*=
3;r*=3;for(let J=0;J<C;++J){const L=N[z+0],Y=N[z+1],W=N[z+2],aa=O.getElevation(L,Y,W,K,"scene")||0;F+=aa;E[r+0]=L;E[r+1]=Y;E[r+2]=null==T?W+aa+P:aa+P;z+=3;r+=3}return F/C},requiresAlignment:()=>!0}},D=t.create(),B={verticalDistanceToGround:0,sampledElevation:0},M=w.create();q.applyElevationAlignmentForHUD=function(N,z,E,r,C){E=y(z,E,C,r,B);G.updateVertexAttributeAuxpos1w(N,B.verticalDistanceToGround);C=B.sampledElevation;const O=S.copy(D,N.objectTransformation);M[0]=z.x;M[1]=z.y;M[2]=E;I.computeLinearTransformation(z.spatialReference,
M,O,r.spatialReference)?N.objectTransformation=O:console.warn("Could not locate symbol object properly, it might be misplaced");return C};q.applyPerVertexElevationAlignment=function(N,z,E,r,C,O,P,T,F,K,J){const L=u[J.mode];let Y=0;if(I.projectBuffer(N,z,E,r,F.spatialReference,C,T)&&(L.requiresAlignment(J)?(Y=L.applyElevationAlignmentBuffer(r,C,O,P,T,F,K,J),N=O,C=P):N=r,I.projectBuffer(N,F.spatialReference,C,O,K.spatialReference,P,T)))return Y};q.elevationModeChangeUpdateType=function(N,z,E){return null==
z||null==E?N.definedChanged:"on-the-ground"===z&&"on-the-ground"===E?N.staysOnTheGround:z===E||"on-the-ground"!==z&&"on-the-ground"!==E?q.SymbolUpdateType.UPDATE:N.onTheGroundChanged};q.evaluateElevationAlignmentAtPoint=y;q.needsElevationUpdates2D=function(N){return"relative-to-ground"===N||"relative-to-scene"===N};q.needsElevationUpdates3D=function(N){return"absolute-height"!==N};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports",
"../../../layers/graphics/dehydratedFeatures"],function(q,A){function w(S){return"array"in S}q.SamplePosition=function(S,I=0){this.array=S;this.offset=I};q.getElevationAtPoint=function(S,I,t="ground"){if(A.isDehydratedPoint(I))return S.getElevation(I.x,I.y,I.z||0,I.spatialReference,t);if(w(I)){let H=I.offset;return S.getElevation(I.array[H++],I.array[H++],I.array[H]||0,S.spatialReference,t)}return S.getElevation(I[0],I[1],I[2]||0,S.spatialReference,t)};q.isSamplePosition=w;Object.defineProperty(q,
"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("exports ../../../../core/maybe ../../../../geometry/support/coordsUtils ../../../../geometry/support/centroid ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../geometry/support/aaBoundingRect ../../../../geometry/projection ../../../../chunks/mat4f64 ../../../../chunks/vec2f64 ../../../../chunks/vec4f64 ../../../../chunks/vec4 ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/hydratedFeatures".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){function E(O){var P=O.paths[0];if(!P||0===P.length)return null;P=w.getPointOnPath(P,w.getPathLength(P)/2);return N.makeDehydratedPoint(P[0],P[1],P[2],O.spatialReference)}function r(O,P,T){T=T?O:z.clonePoint(O);return P&&O?G.projectPoint(O,T,P)?T:null:T}function C(O){if(Array.isArray(O)){for(const P of O)if(!C(P))return!1;return!0}return null==O||0<=O}u={"bottom-left":u.fromValues(0,0),bottom:u.fromValues(.5,0),"bottom-right":u.fromValues(1,0),left:u.fromValues(0,
.5),center:u.fromValues(.5,.5),right:u.fromValues(1,.5),"top-left":u.fromValues(0,1),top:u.fromValues(.5,1),"top-right":u.fromValues(1,1)};q.computeCentroid=function(O,P){if("point"===O.type)return r(O,P,!1);if(z.isHydratedGeometry(O))switch(O.type){case "extent":return r(O.center,P,!1);case "polygon":return r(O.centroid,P,!1);case "polyline":return r(E(O),P,!0);case "mesh":return r(O.extent.center,P,!1)}else switch(O.type){case "extent":var T=I.isFinite(O.zmin);O=N.makeDehydratedPoint(.5*(O.xmax+
O.xmin),.5*(O.ymax+O.ymin),T?.5*(O.zmax+O.zmin):void 0,O.spatialReference);return r(O,P,!0);case "polygon":return(T=O.rings[0])&&0!==T.length?(T=S.ringsCentroid(O.rings,O.hasZ),O=N.makeDehydratedPoint(T[0],T[1],T[2],O.spatialReference)):O=null,r(O,P,!0);case "polyline":return r(E(O),P,!0)}};q.computeObjectRotation=function(O,P,T,F=y.create()){O=O||0;P=P||0;T=T||0;0!==O&&H.rotateZ(F,F,-O/180*Math.PI);0!==P&&H.rotateX(F,F,P/180*Math.PI);0!==T&&H.rotateY(F,F,T/180*Math.PI);return F};q.computeObjectScale=
function(O=t.ONES,P,T,F=1){const K=Array(3);if(A.isNone(P)||A.isNone(T))K[0]=1,K[1]=1,K[2]=1;else{let L=0;for(let Y=2;0<=Y;Y--){const W=O[Y];let aa;const oa=null!=W,ta=0===Y&&!J&&!oa,la=T[Y];"symbol-value"===W||ta?aa=0!==la?P[Y]/la:1:oa&&"proportional"!==W&&isFinite(W)&&(aa=0!==la?W/la:1);if(null!=aa){var J=K[Y]=aa;L=Math.max(L,Math.abs(aa))}}for(O=2;0<=O;O--)null==K[O]?K[O]=J:0===K[O]&&(K[O]=.001*L)}for(J=2;0<=J;J--)K[J]/=F;return t.fromArray(K)};q.demResolutionForBoundingBox=function(O,P){return null!=
P.minDemResolution?P.minDemResolution:M.isPoint(O)?P.minDemResolutionForPoints:.01*M.maximumDimension(O)};q.enlargeExtent=function(O,P,T,F=0){if(O){P||(P=v.create());let K=.5*O.width*(T-1);T=.5*O.height*(T-1);O.width<1E-7*O.height?K+=T/20:O.height<1E-7*O.width&&(T+=K/20);B.set(P,O.xmin-K-F,O.ymin-T-F,O.xmax+K+F,O.ymax+T+F);return P}return null};q.isValidSize=C;q.mixinColorAndOpacity=function(O,P){const T=D.clone(D.ONES);A.isSome(O)&&(T[0]=O[0],T[1]=O[1],T[2]=O[2]);A.isSome(P)?T[3]=P:A.isSome(O)&&
3<O.length&&(T[3]=O[3]);return T};q.namedAnchorToHUDMaterialAnchorPos=u;q.overrideColor=function(O,P,T,F,K,J=[0,0,0,0]){for(let L=0;3>L;++L)A.isSome(O)&&null!=O[L]?J[L]=O[L]:A.isSome(T)&&null!=T[L]?J[L]=T[L]:J[L]=K[L];A.isSome(P)?J[3]=P:A.isSome(F)?J[3]=F:J[3]=K[3];return J};q.updateVertexAttributeAuxpos1w=function(O,P){for(let T=0;T<O.geometries.length;++T){const F=O.geometries[T].data.vertexAttributes.auxpos1;F&&F.data[3]!==P&&(F.data[3]=P,O.geometryVertexAttrsUpdated(T))}};q.validateSymbolLayerSize=
function(O){null!=O.isPrimitive&&(O=[O.width,O.depth,O.height]);return C(O)?null:"Symbol sizes may not be negative values"};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/layers/graphics/hydratedFeatures":function(){define("exports ../../core/has ../../core/typedArrayUtil ../../core/lang ../../core/maybe ../../geometry/support/jsonUtils ../../Graphic ./dehydratedFeatures".split(" "),function(q,A,w,S,I,t,H,v){function G(r){return"declaredClass"in r}function y(r){return"declaredClass"in r}
function u(r){return"declaredClass"in r}function D(r){return I.isNone(r)?null:G(r)?r:t.fromJSON(B(r))}function B(r){const C=r.spatialReference.toJSON();switch(r.type){case "point":{const {x:O,y:P,z:T,m:F}=r;return{x:O,y:P,z:T,m:F,spatialReference:C}}case "polygon":{const {rings:O,hasZ:P,hasM:T}=r;return{rings:M(O),hasZ:P,hasM:T,spatialReference:C}}case "polyline":{const {paths:O,hasZ:P,hasM:T}=r;return{paths:M(O),hasZ:P,hasM:T,spatialReference:C}}case "extent":{const {xmin:O,xmax:P,ymin:T,ymax:F,
zmin:K,zmax:J,mmin:L,mmax:Y,hasZ:W,hasM:aa}=r;return{xmin:O,xmax:P,ymin:T,ymax:F,zmin:K,zmax:J,mmin:L,mmax:Y,hasZ:W,hasM:aa,spatialReference:C}}case "multipoint":{const {points:O,hasZ:P,hasM:T}=r;return{points:E(O)?N(O):O,hasZ:P,hasM:T,spatialReference:C}}}}function M(r){return z(r)?r.map(C=>N(C)):r}function N(r){return r.map(C=>w.toArray(C))}function z(r){for(const C of r)if(0!==C.length)return E(C);return!1}function E(r){return r.length&&(w.isFloat32Array(r[0])||w.isFloat64Array(r[0]))}q.clonePoint=
function(r,C){if(!r)return null;if(y(r)){if(null==C)return r.clone();if(y(C))return C.copy(r)}null!=C?(C.x=r.x,C.y=r.y,C.spatialReference=r.spatialReference,r.hasZ?(C.z=r.z,C.hasZ=r.hasZ):(C.z=null,C.hasZ=!1),r.hasM?(C.m=r.m,C.hasM=!0):(C.m=null,C.hasM=!1)):(C=v.makeDehydratedPoint(r.x,r.y,r.z,r.spatialReference),r.hasM&&(C.m=r.m,C.hasM=!0));return C};q.hydrateGeometry=D;q.hydrateGraphic=function(r,C){if(!r)return null;if(u(r))return r;C=new H({layer:C,sourceLayer:C});C.visible=r.visible;C.symbol=
S.clone(r.symbol);C.attributes=S.clone(r.attributes);C.geometry=D(r.geometry);return C};q.isHydratedGeometry=G;q.isHydratedGraphic=u;q.isHydratedPoint=y;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/ElevationContext":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(q,A,w,S,I){let t=function(){function H(){this._renderUnitOffset=
this._meterUnitOffset=0;this._unit="meters";this._metersPerElevationInfoUnit=1;this.mode=this.centerPointInElevationSR=this._featureExpressionInfoContext=null}var v=H.prototype;v.reset=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this._featureExpressionInfoContext=null;this.unit="meters"};v.addOffsetRenderUnits=function(G){this._renderUnitOffset+=G};v.geometryZWithOffset=function(G,y){y=this.calculateOffsetRenderUnits(y);return null!=this.featureExpressionInfoContext?y:
G+y};v.calculateOffsetRenderUnits=function(G){let y=this._meterUnitOffset;const u=this.featureExpressionInfoContext;null!=u&&(y+=I.execute(u)*this._metersPerElevationInfoUnit);return y/G.unitInMeters+this._renderUnitOffset};v.setFromElevationInfo=function(G){this.mode=G.mode;this.unit=S.supportsUnit(G.unit)?G.unit:"meters";this.offsetElevationInfoUnits=w.unwrapOr(G.offset,0)};v.updateFeatureExpressionInfoContext=function(G,y,u){if(w.isNone(G))this._featureExpressionInfoContext=null;else{var D=G&&
G.arcade;D&&w.isSome(y)&&w.isSome(u)?(this._featureExpressionInfoContext=I.clone(G),I.setContextFeature(this._featureExpressionInfoContext,I.createFeature(D.modules,y,u))):this._featureExpressionInfoContext=G}};H.fromElevationInfo=function(G){const y=new H;w.isSome(G)&&y.setFromElevationInfo(G);return y};A._createClass(H,[{key:"featureExpressionInfoContext",get:function(){return this._featureExpressionInfoContext}},{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},
set:function(G){this._unit=G;this._metersPerElevationInfoUnit=S.getMetersPerUnit(G)}},{key:"offsetMeters",set:function(G){this._meterUnitOffset=G;this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(G){this._meterUnitOffset=G*this._metersPerElevationInfoUnit;this._renderUnitOffset=0}}]);return H}();q.ElevationContext=t;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/featureExpressionInfoUtils":function(){define(["exports","../../../../core/Logger",
"../../../../support/arcadeOnDemand","../../../../layers/graphics/hydratedFeatures"],function(q,A,w,S){const I=A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");q.clone=function(t){return{cachedResult:t.cachedResult,arcade:t.arcade?{func:t.arcade.func,context:t.arcade.modules.arcadeUtils.createExecContext(null,{sr:t.arcade.context.spatialReference}),modules:t.arcade.modules}:null}};q.createContext=async function(t,H,v){t=t&&t.expression;if("string"!==typeof t)return null;var G=
"0"===t?0:null;if(null!=G)return{cachedResult:G};G=await w.loadArcade();const y=G.arcadeUtils;t=y.createSyntaxTree(t);return y.dependsOnView(t)?(null!=v&&v.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:y.createFunction(t),context:y.createExecContext(null,{sr:H}),modules:G}}};q.createContextWithoutExpressionSupport=function(t){t=t&&t.expression;return"string"===typeof t&&(t="0"===t?0:null,null!=t)?{cachedResult:t}:null};q.createFeature=function(t,
H,v){return t.arcadeUtils.createFeature(H.attributes,H.geometry,v)};q.execute=function(t){if(null!=t){if(null!=t.cachedResult)return t.cachedResult;var H=t.arcade;H=t.arcade.modules.arcadeUtils.executeFunction(H.func,H.context);"number"!==typeof H&&(H=t.cachedResult=0);return H}return 0};q.extractExpressionInfo=function(t,H=!1){const v=(t=t&&t.featureExpressionInfo)&&t.expression;H||"0"===v||(t=null);return t};q.setContextFeature=function(t,H){null!=t&&null==t.cachedResult&&(H&&t.arcade?(H._geometry&&
(H._geometry=S.hydrateGeometry(H._geometry)),t.arcade.modules.arcadeUtils.updateExecContext(t.arcade.context,H)):I.errorOncePerTick("Arcade support required but not provided"))};q.zeroContext={cachedResult:0};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/sdfPrimitives":function(){define(["exports","../../../../core/has","../../webgl-engine/lib/Util"],function(q,A,w){function S(D,B){const M=new Uint8Array(4*D*D),N=D/2-.5;B/=2;for(let E=0;E<D;E++)for(let r=0;r<D;r++){const C=
r+D*E;var z=r-N;const O=E-N;z=Math.sqrt(z*z+O*O)-B;z=z/D+.5;w.packFloatRGBA(z,M,4*C)}return M}function I(D,B){return y(D,B,!1)}function t(D,B){return y(D,B,!0)}function H(D,B){return u(D,B,!1)}function v(D,B){return u(D,B,!0)}function G(D,B){const M=new Uint8Array(4*D*D),N=Math.sqrt(1.25),z=(D-B)/2;for(let E=0;E<D;E++)for(let r=0;r<D;r++){const C=(r-z)/B,O=(E-z+.75)/B;w.packFloatRGBA(Math.max(-(1*C+-.5*O)/N,(C-1+-.5*-O)/N,-O)*B/D+.5,M,4*(E*D+r))}return M}function y(D,B,M){M&&(B/=Math.SQRT2);const N=
new Uint8Array(4*D*D);for(let E=0;E<D;E++)for(let r=0;r<D;r++){var z=r-.5*D+.25;let C=-E+.5*D-.75;const O=E*D+r;if(M){const P=(z+C)/Math.SQRT2;C=(C-z)/Math.SQRT2;z=P}z=Math.max(Math.abs(z),Math.abs(C))-.5*B;z=z/D+.5;w.packFloatRGBA(z,N,4*O)}return N}function u(D,B,M){M&&(B*=Math.SQRT2);B*=.5;const N=new Uint8Array(4*D*D);for(let E=0;E<D;E++)for(let r=0;r<D;r++){var z=r-.5*D;let C=-E+.5*D-1;const O=E*D+r;if(M){const P=(z+C)/Math.SQRT2;C=(C-z)/Math.SQRT2;z=P}z=Math.abs(z);C=Math.abs(C);z=z>C?z>B?Math.sqrt((z-
B)*(z-B)+C*C):C:C>B?Math.sqrt(z*z+(C-B)*(C-B)):z;z=z/D+.5;w.packFloatRGBA(z,N,4*O)}return N}q.createCircle=S;q.createCross=H;q.createKite=t;q.createSquare=I;q.createTriangle=G;q.createType=function(D,B,M){switch(D){case "circle":return S(B,M);case "square":return I(B,M);case "cross":return H(B,M);case "x":return v(B,M);case "kite":return t(B,M);case "triangle":return G(B,M);default:return S(B,M)}};q.createX=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/watchUtils ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Layer ../../webgl-engine/lib/Texture".split(" "),
function(q,A,w,S,I,t,H,v){let G=function(){function y(D){this.resourceFactory=D;this._resources=null;this._visible=!0;this._attached=!1}var u=y.prototype;u.destroy=function(){this._destroyResources()};u.recreate=function(){this.attached&&this._createResources()};u.recreateGeometry=function(){if(this.resourceFactory.recreateGeometry){var D=this.resourceFactory.view._stage;if(!w.isNone(this._resources)&&D){var B=this._resources.object;this._resources.external.forEach(M=>{M instanceof t&&D.remove(2,
M.id)});B.removeAllGeometries();B=this.resourceFactory.recreateGeometry(this._resources.external,B,this._resources.layer);for(const M of B)D.add(2,M)}}else this.recreate()};u._createOrDestroyResources=function(){this._attached?this._resources||this._createResources():this._destroyResources()};u._createResources=function(){this._destroyResources();const D=this.resourceFactory.view._stage;if(D){var B=new H("element",{isPickable:!1});D.add(0,B);D.addToViewContent([B.id]);var M=new I({idHint:"element",
castShadow:!1}),N=this.resourceFactory.createResources(M,B);N.forEach(E=>{D.add(this._contentTypeFromResource(E),E)});D.add(1,M);B.addObject(M);M.setVisible(this._visible);var z=this.resourceFactory.cameraChanged?S.init(this.resourceFactory.view.state,"camera",E=>this.resourceFactory.cameraChanged(E)):null;this._resources={layer:B,object:M,external:N,cameraHandle:z}}};u._contentTypeFromResource=function(D){return D instanceof t?2:D instanceof v?4:3};u._destroyResources=function(){if(!w.isNone(this._resources)){var D=
this.resourceFactory.view._stage;null==D?void 0:D.remove(1,this._resources.object.id);null==D?void 0:D.remove(0,this._resources.layer.id);this._resources.external.forEach(B=>{null==D?void 0:D.remove(this._contentTypeFromResource(B),B.id);"dispose"in B&&B.dispose()});this._resources.object.dispose();this._resources.cameraHandle&&this._resources.cameraHandle.remove();this._resources=null}};u._syncVisible=function(){w.isNone(this._resources)||this._resources.object.setVisible(this._visible)};A._createClass(y,
[{key:"object",get:function(){return w.isSome(this._resources)?this._resources.object:null}},{key:"resources",get:function(){return w.isSome(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(D){D!==this._visible&&(this._visible=D,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(D){D!==this._attached&&(this._attached=D,this._createOrDestroyResources())}}]);return y}();q.VisualElementResources=G;
Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingCandidate":function(){define(["exports","../../../core/handleUtils"],function(q,A){let w=function(){function S(I,t,H){this.coordinateHelper=I;this.targetPoint=t;this.constraint=H}S.prototype.visualize=function(I,t,H){return A.handlesGroup([this.visualizeTargetHints(I,t,H),this.visualizeReferenceHints(I,t,H)])};return S}();q.SnappingCandidate=w;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./Settings ./snappingUtils ./SnappingAlgorithm ../../3d/support/geometryUtils/vector2d ./LineSnappingCandidate".split(" "),
function(q,A,w,S,I,t,H,v,G){H=function(y){function u({enabled:B=I.defaults.lineSnapper.enabled,proximityThreshold:M=I.defaults.lineProximityThreshold,shortLineThreshold:N=I.defaults.shortLineThreshold}={}){return y.call(this,{enabled:B,proximityThreshold:M,shortLineThreshold:N})||this}A._inheritsLoose(u,y);var D=u.prototype;D.snapNewVertex=function(B,M){var N=M.geometry.data.components[0],z=N.edges.length;const E=[];if(1>z)return E;var r=M.geometry.data.coordinateHelper;const C=r.fromPoint(B);r=t.anyMapPointToScreenPoint(C,
r,M.elevationInfo,M.view);z=N=N.edges[z-1];do this.edgeExceedsShortLineThreshold(z,M)&&this._processCandidateProposal(z.left.pos,z.right.pos,B,r,M,E),z=z.left.left;while(z&&z!==N);return E};D.snapExistingVertex=function(B,M){const N=[],z=w.unwrap(M.vertexHandle);var E=z.component;if(2>E.edges.length)return N;var r=M.geometry.data.coordinateHelper,C=r.fromPoint(B);r=t.anyMapPointToScreenPoint(C,r,M.elevationInfo,M.view);C=z.left;const O=z.right;C&&O&&this.edgeExceedsShortLineThreshold(C,M)&&this.edgeExceedsShortLineThreshold(O,
M)&&this._processCandidateProposal(C.left.pos,O.right.pos,B,r,M,N);C=E=E.edges[0];do C!==z.left&&C!==z.right&&this.edgeExceedsShortLineThreshold(C,M)&&this._processCandidateProposal(C.left.pos,C.right.pos,B,r,M,N),C=C.right.right;while(C&&C!==E);return N};D._processCandidateProposal=function(B,M,N,z,E,r){const C=v.projectPointToLine(S.create(),S.fromValues(N.x,N.y),B,M),O=E.geometry.data.coordinateHelper;N=O.fromXYZ(C,N.hasZ?N.z:0);t.squareDistance(z,t.anyMapPointToScreenPoint(N,O,E.elevationInfo,
E.view))<this.squaredProximityTreshold(E.pointer)&&r.push(new G.LineSnappingCandidate({coordinateHelper:E.geometry.data.coordinateHelper,lineStart:B,lineEnd:M,targetPoint:N}))};return u}(H.SnappingAlgorithm);q.LineSnapper=H;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnappingCandidate":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ../../../core/mathUtils ../../../chunks/vec2f64 ../../../chunks/vec2 ./snappingUtils ./SnappingCandidate ./SnappingConstraint".split(" "),
function(q,A,w,S,I,t,H,v,G){v=function(D){function B({coordinateHelper:N,lineStart:z,lineEnd:E,targetPoint:r}){return D.call(this,N,r,new G.LineConstraint(z,E))||this}A._inheritsLoose(B,D);var M=B.prototype;M.visualizeReferenceHints=function(N,z){return w.destroyHandle(H.createLineSegmentHintFromMap(3,this.lineStart(),this.lineEnd(),this.coordinateHelper,z,N))};M.visualizeTargetHints=function(N,z,E){return w.destroyHandle(H.createLineSegmentHintFromMap(0,this.lineEndClosestToTarget(),E,this.coordinateHelper,
z,N))};M.lineEndClosestToTarget=function(){const N=this.lineStart(),z=this.lineEnd();return 0<S.sign(t.dot(t.subtract(u,z,N),t.subtract(y,this.targetPoint,N)))?z:N};M.lineStart=function(){return this.constraint.start};M.lineEnd=function(){return this.constraint.end};return B}(v.SnappingCandidate);const y=I.create(),u=I.create();q.LineSnappingCandidate=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingAlgorithm ../../3d/support/geometryUtils/vector2d ./ParallelLineSnappingCandidate".split(" "),
function(q,A,w,S,I,t,H,v,G,y){v=function(u){function D({enabled:M=t.defaults.lineSnapper.enabled,proximityThreshold:N=t.defaults.lineProximityThreshold,shortLineThreshold:z=t.defaults.shortLineThreshold}={}){M=u.call(this,{enabled:M,proximityThreshold:N,shortLineThreshold:z})||this;M._tmpProjection=S.create();return M}A._inheritsLoose(D,u);var B=D.prototype;B.snapNewVertex=function(M,N){var z=N.geometry.data.components[0],E=z.edges.length,r=z.vertices.length;const C=[];if(2>E)return C;var O=N.geometry.data.coordinateHelper.fromPoint(M);
O=H.anyMapPointToScreenPoint(O,N.geometry.data.coordinateHelper,N.elevationInfo,N.view);r=z.vertices[r-1];const P=z.vertices[0];E=z=z.edges[E-1];do this.edgeExceedsShortLineThreshold(E,N)&&(this._checkEdgeForParalleLines(E,r.pos,M,O,N,C),this._checkEdgeForParalleLines(E,P.pos,M,O,N,C)),E=E.left.left;while(E&&E!==z);return C};B.snapExistingVertex=function(M,N){const z=[],E=w.unwrap(N.vertexHandle);var r=E.component;if(3>r.edges.length)return z;var C=N.geometry.data.coordinateHelper.fromPoint(M);C=
H.anyMapPointToScreenPoint(C,N.geometry.data.coordinateHelper,N.elevationInfo,N.view);const O=E.left,P=E.right,T=r.vertices[0],F=r.vertices[r.vertices.length-1];let K=r=r.edges[0];do K!==O&&K!==P&&this.edgeExceedsShortLineThreshold(K,N)&&(O&&this._checkEdgeForParalleLines(K,O.left.pos,M,C,N,z),P&&this._checkEdgeForParalleLines(K,P.right.pos,M,C,N,z),E===T?this._checkEdgeForParalleLines(K,F.pos,M,C,N,z):E===F&&this._checkEdgeForParalleLines(K,T.pos,M,C,N,z)),K=K.right.right;while(K&&K!==r);return z};
B._checkEdgeForParalleLines=function(M,N,z,E,r,C){var O=M.left.pos;const P=M.right.pos;G.projectPointToLine(this._tmpProjection,N,O,P);I.squaredDistance(this._tmpProjection,N)<t.defaults.parallelLineThreshold||(G.projectPointToLine(this._tmpProjection,S.fromValues(z.x,z.y),O,P,N),O=r.geometry.data.coordinateHelper,z=O.fromXYZ(this._tmpProjection,z.hasZ?z.z:0),H.squareDistance(E,H.anyMapPointToScreenPoint(z,O,r.elevationInfo,r.view))<this.squaredProximityTreshold(r.pointer)&&!this.parallelToPreviousCandidate(M,
C)&&C.push(new y.ParallelLineSnappingCandidate({coordinateHelper:O,referenceLine:M,lineStart:N,targetPoint:z})))};B.parallelToPreviousCandidate=function(M,N){const z=M.left.pos,E=M.right.pos;for(const r of N)if(G.projectPointToLine(this._tmpProjection,E,r.constraint.start,r.constraint.end,z),I.squaredDistance(this._tmpProjection,E)<t.defaults.parallelLineThreshold)return r.addReferenceLine(M),!0;return!1};return D}(v.SnappingAlgorithm);q.ParallelLineSnapper=v;Object.defineProperty(q,"__esModule",
{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnappingCandidate":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ../../../Color ../../../chunks/vec3 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingCandidate ./SnappingConstraint ../../3d/interactive/visualElements/ParallelLineVisualElement".split(" "),function(q,A,w,S,I,t,H,v,G,y,u){G=function(D){function B({coordinateHelper:N,referenceLine:z,lineStart:E,targetPoint:r}){const C=
N.clone(E);t.subtract(C,t.add(C,C,z.right.pos),z.left.pos);N=D.call(this,N,r,new y.LineConstraint(E,C))||this;N._referenceLines=[{edge:z,fadeLeft:!0,fadeRight:!0}];return N}A._inheritsLoose(B,D);var M=B.prototype;M.visualizeReferenceHints=function(N,z,E){return w.handlesGroup([...this._referenceLines.map(r=>w.destroyHandle(v.createLineSegmentHintFromEdge(1,r.edge,this.coordinateHelper,z,N,r.fadeLeft,r.fadeRight))),w.destroyHandle(this.createParallelLineVisualElement(N,z,this.constraint.start,E))])};
M.visualizeTargetHints=function(N,z,E){return w.handlesGroup([w.destroyHandle(v.createLineSegmentHintFromMap(0,this.constraint.start,E,this.coordinateHelper,z,N))])};M.addReferenceLine=function(N){const z={edge:N,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(E=>{N.right.right===E.edge&&(E.fadeLeft=!1,z.fadeRight=!1);N.left.left===E.edge&&(E.fadeRight=!1,z.fadeLeft=!1)});this._referenceLines.push(z)};M.createParallelLineVisualElement=function(N,z,E,r){E=v.anyMapPointToRender(E,this.coordinateHelper,
z,N);z=v.anyMapPointToRender(r,this.coordinateHelper,z,N);z=I.lerp(z,E,z,.5);N=new u.ParallelLineVisualElement({view:N,attached:!1,offset:H.defaults.parallelLineHintOffset,length:H.defaults.parallelLineHintLength,width:H.defaults.parallelLineHintWidth,color:S.toUnitRGBA(H.defaults.orange),location:z,renderOccluded:16});N.setDirectionFromPoints(E,z);N.attached=!0;return N};return B}(G.SnappingCandidate);q.ParallelLineSnappingCandidate=G;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/ParallelLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec4 ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Geometry ../../webgl-engine/shaders/RibbonLineTechnique ../../webgl-engine/materials/RibbonLineMaterial ../../../../chunks/vec4f32 ./Object3DVisualElement".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){z=function(F){function K(L){var Y=F.call(this,L)||this;Y._handles=new H;Y._location=I.create();Y._direction=I.fromValues(1,0,0);Y._width=1;Y._offset=1;Y._length=18;Y._color=N.fromValues(1,0,1,1);Y._renderOccluded=4;Y.applyProps(L);return Y}A._inheritsLoose(K,F);var J=K.prototype;J.setDirectionFromPoints=function(L,Y){t.normalize(this._direction,t.subtract(this._direction,Y,L));this.updateGeometry()};J.createExternalResources=function(){const L=new M.RibbonLineMaterial(this.materialParameters,
"parallelLineVisualElement");this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));this._externalResources={material:L}};J.destroyExternalResources=function(){this._handles.removeAll();this._externalResources=null};J.createGeometries=function(L){const Y=new D(u.createPolylineGeometry([I.create(),I.create()]),"parallelLineVisualElement"),W=new D(u.createPolylineGeometry([I.create(),I.create()]),"parallelLineVisualElement"),aa=w.unwrap(this._externalResources).material;L.addGeometry(Y,
aa,v.IDENTITY);L.addGeometry(W,aa,v.IDENTITY);this.updateVertices(L)};J.forEachExternalResource=function(L){w.isSome(this._externalResources)&&L(this._externalResources.material)};J.updateMaterial=function(){w.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};J.updateGeometry=function(){const L=this.object;w.isNone(L)||this.updateVertices(L)};J.updateVertices=function(L){const Y=this.view.state.camera;Y.projectToScreen(this.location,r);
t.add(E,this.location,this.direction);Y.projectToScreen(E,C);G.normalize(C,G.subtract(C,C,r));this.updateVertexAttributes(Y,L,0,r,C,1);this.updateVertexAttributes(Y,L,1,r,C,-1)};J.updateVertexAttributes=function(L,Y,W,aa,oa,ta){const la=Y.geometryRecords[W].geometry.data.getVertexAttr()[B.RibbonVertexAttributeConstants.POSITION].data;ta=G.scale(O,G.set(O,oa[1]*ta,oa[0]*-ta),this.offset+this.width/2);aa=G.add(P,G.add(P,G.add(P,aa,G.scale(P,oa,this.length/2)),ta),ta);oa=G.add(T,aa,G.scale(T,oa,-this.length));
L.unprojectFromScreen(aa,E);la[0]=E[0];la[1]=E[1];la[2]=E[2];L.unprojectFromScreen(oa,E);la[3]=E[0];la[4]=E[1];la[5]=E[2];Y.geometryVertexAttrsUpdated(W)};A._createClass(K,[{key:"location",get:function(){return this._location},set:function(L){t.exactEquals(this._location,L)||(t.copy(this._location,L),this.updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(L){t.exactEquals(this._direction,L)||(t.copy(this._direction,L),this.updateGeometry())}},{key:"width",get:function(){return this._width},
set:function(L){L!==this._width&&(this._width=L,this.updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(L){L!==this._offset&&(this._offset=L,this.updateGeometry())}},{key:"length",get:function(){return this._length},set:function(L){L!==this._length&&(this._length=L,this.updateGeometry())}},{key:"color",get:function(){return this._color},set:function(L){y.exactEquals(L,this._color)||(y.copy(this._color,L),this.updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},
set:function(L){L!==this._renderOccluded&&(this._renderOccluded=L,this.updateMaterial())}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}}]);return K}(z.Object3DVisualElement);const E=I.create(),r=S.createScreenPointArray(),C=S.createScreenPointArray(),O=S.createScreenPointArray(),P=S.createScreenPointArray(),T=S.createScreenPointArray();q.ParallelLineVisualElement=z;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/mathUtils ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingAlgorithm ./SnappingConstraint ./RightAngleSnappingCandidate".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u){G=function(D){function B({enabled:N=H.defaults.lineSnapper.enabled,proximityThreshold:z=H.defaults.lineProximityThreshold,shortLineThreshold:E=H.defaults.shortLineThreshold}={}){N=D.call(this,{enabled:N,proximityThreshold:z,shortLineThreshold:E})||this;N._tmp=I.create();return N}A._inheritsLoose(B,D);var M=B.prototype;M.snapNewVertex=function(N,z){var E=z.geometry.data.components[0],r=E.vertices.length;const C=[];if(2>r)return C;const O=z.geometry.data.coordinateHelper;
var P=O.fromPoint(N);P=v.anyMapPointToScreenPoint(P,z.geometry.data.coordinateHelper,z.elevationInfo,z.view);r=E.vertices[r-1];this._checkForSnappingCandidate(C,r.left,r.pos,O.fromPoint(N),r.left.left.pos,r.pos,z,N,P);E=E.vertices[0];this._checkForSnappingCandidate(C,E.right,E.pos,O.fromPoint(N),E.right.right.pos,E.pos,z,N,P);return C};M.snapExistingVertex=function(N,z){const E=[];var r=w.unwrap(z.vertexHandle),C=r.component;const O=C.vertices.length;if(3>O)return E;const P=z.geometry.data.coordinateHelper.fromPoint(N),
T=v.anyMapPointToScreenPoint(P,z.geometry.data.coordinateHelper,z.elevationInfo,z.view);var F=r.left;r=r.right;const K=C.vertices[0];C=C.vertices[O-1];if(!F)return this._checkForSnappingCandidate(E,K.right.right.right,K.right.right.pos,P,K.right.right.right.right.pos,K.right.right.pos,z,N,T),E;if(!r)return this._checkForSnappingCandidate(E,C.left.left.left,C.left.left.pos,P,C.left.left.left.left.pos,C.left.left.pos,z,N,T),E;F&&F.left.left&&(C=F.left.left,this._checkForSnappingCandidate(E,C,F.left.pos,
P,C.left.pos,F.left.pos,z,N,T));r&&r.right.right&&(F=r.right.right,this._checkForSnappingCandidate(E,F,r.right.pos,P,F.right.pos,r.right.pos,z,N,T));return E};M._checkForSnappingCandidate=function(N,z,E,r,C,O,P,T,F){this.edgeExceedsShortLineThreshold(z,P)&&(t.subtract(this._tmp,z.right.pos,z.left.pos),z=I.fromValues(this._tmp[1],-this._tmp[0]),E=t.dot(z,t.subtract(this._tmp,r,E))/t.squaredLength(z),r=P.geometry.data.coordinateHelper,T=r.fromXYZ(t.scaleAndAdd(I.create(),O,z,E),T.hasZ?T.z:0),v.squareDistance(F,
v.anyMapPointToScreenPoint(T,r,P.elevationInfo,P.view))<this.squaredProximityTreshold(P.pointer)&&N.push(new u.RightAngleSnappingCandidate({coordinateHelper:r,targetPoint:T,constraint:new y.RayConstraint(O,t.scaleAndAdd(r.createNew(),O,z,S.sign(E))),previousVertex:C,centerVertex:O})))};return B}(G.SnappingAlgorithm);q.RightAngleSnapper=G;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnappingCandidate":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/handleUtils","./snappingUtils","./SnappingCandidate"],function(q,A,w,S,I){I=function(t){function H({coordinateHelper:G,targetPoint:y,constraint:u,previousVertex:D,centerVertex:B}){G=t.call(this,G,y,u)||this;G._previousVertex=D;G._centerVertex=B;return G}A._inheritsLoose(H,t);var v=H.prototype;v.visualizeTargetHints=function(G,y,u){return w.destroyHandle(S.createLineSegmentHintFromMap(0,this.constraint.start,u,this.coordinateHelper,y,G))};v.visualizeReferenceHints=function(G,y,u){return w.handlesGroup([w.destroyHandle(S.createLineSegmentHintFromMap(2,
this._previousVertex,this.constraint.start,this.coordinateHelper,y,G)),w.destroyHandle(S.createQuadHint(this._previousVertex,this._centerVertex,u,this.coordinateHelper,y,G))])};return H}(I.SnappingCandidate);q.RightAngleSnappingCandidate=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingAlgorithm ../../3d/support/geometryUtils/vector2d ./RightAngleTriangleSnappingCandidate".split(" "),
function(q,A,w,S,I,t,H,v,G,y){v=function(u){function D({enabled:M=t.defaults.lineSnapper.enabled,proximityThreshold:N=t.defaults.lineProximityThreshold,shortLineThreshold:z=t.defaults.shortLineThreshold}={}){return u.call(this,{enabled:M,proximityThreshold:N,shortLineThreshold:z})||this}A._inheritsLoose(D,u);var B=D.prototype;B.snapNewVertex=function(M,N){const z=N.geometry.data.components[0],E=[],r=z.vertices.length;if("polygon"!==N.geometry.type||2>r)return E;this._processCandidateProposal(z.vertices[0].pos,
z.vertices[r-1].pos,M,N,E);return E};B.snapExistingVertex=function(M,N){const z=[],E=w.unwrap(N.vertexHandle),r=E.component;if(2>r.edges.length||"polyline"===N.geometry.type&&(0===E.index||E.index===r.vertices.length-1))return z;this._processCandidateProposal(E.left.left.pos,E.right.right.pos,M,N,z);return z};B._processCandidateProposal=function(M,N,z,E,r){if(this.exceedsShortLineThreshold(M,N,E)){var C=I.lerp(S.create(),M,N,.5),O=.5*I.distance(M,N);O=G.projectPointToCircle(S.create(),[z.x,z.y],C,
O);C=E.geometry.data.coordinateHelper;O=C.fromXYZ(O,z.hasZ?z.z:0);z=C.fromPoint(z);z=H.anyMapPointToScreenPoint(z,C,E.elevationInfo,E.view);H.squareDistance(z,H.anyMapPointToScreenPoint(O,C,E.elevationInfo,E.view))<this.squaredProximityTreshold(E.pointer)&&r.push(new y.RightAngleTriangleSnappingCandidate({coordinateHelper:C,targetPoint:O,point1:M,point2:N}))}};return D}(v.SnappingAlgorithm);q.RightAngleTriangleSnapper=v;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ./snappingUtils ./SnappingCandidate ./SnappingConstraint".split(" "),
function(q,A,w,S,I,t){I=function(H){function v({coordinateHelper:y,targetPoint:u,point1:D,point2:B}){return H.call(this,y,u,new t.PlanarCircleConstraint(D,B))||this}A._inheritsLoose(v,H);var G=v.prototype;G.visualizeTargetHints=function(){return w.destroyHandle(null)};G.visualizeReferenceHints=function(y,u,D){return w.handlesGroup([w.destroyHandle(S.createLineSegmentHintFromMap(2,D,this.constraint.point1,this.coordinateHelper,u,y)),w.destroyHandle(S.createLineSegmentHintFromMap(2,D,this.constraint.point2,
this.coordinateHelper,u,y)),w.destroyHandle(S.createQuadHint(this.constraint.point1,D,this.constraint.point2,this.coordinateHelper,u,y))])};return v}(I.SnappingCandidate);q.RightAngleTriangleSnappingCandidate=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/InteractiveToolBase":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Accessor ./interactiveToolUtils ./ManipulatorCollection".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z){q.InteractiveToolBase=function(E){function r(O){O=E.call(this,O)||this;O.attached=!1;O.created=!1;O.completed=!1;O.manipulators=new z.ManipulatorCollection;O.deferCreation=!1;O._editableFlags=[];O._creationResolver=B.createResolver();return O}A._inheritsLoose(r,E);var C=r.prototype;C.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();this.onAttach();if(this.visible)this.onShow();this._set("attached",!0)}};C.detach=function(){this.attached&&
(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))};C.handleInputEvent=function(O){if(this.attached)this.onInputEvent(O)};C.handleInputEventAfter=function(O){if(this.attached)this.onInputEventAfter(O)};C.destroy=function(){this.manipulators.destroy();this._set("view",null)};C.setEditableFlag=function(O,P){this._editableFlags[O]=P;this.manipulators.isToolEditable=this._editableFlags.every(T=>null==T||T);this._updateManipulatorAttachment();0===O&&this.notifyChange("editable");
this.onEditableChange()};C.hasEditableFlag=function(O){O=this._editableFlags[O];return null==O?!0:O};C.when=function(){return this._creationResolver.promise};C.rejectCreation=function(O){this._creationResolver.reject(O)};C.initialize=function(){this.deferCreation||this.complete()};C.onAttach=function(){};C.onDetach=function(){};C.onShow=function(){};C.onHide=function(){};C.onEditableChange=function(){};C.onInputEvent=function(O){};C.onInputEventAfter=function(O){};C.create=function(){this.created||
(this._set("created",!0),this._creationResolver(this))};C.complete=function(){this.create();this._set("completed",!0)};C._show=function(){this._updateManipulatorAttachment();this.onShow()};C._hide=function(){this._updateManipulatorAttachment();this.onHide()};C._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};A._createClass(r,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"isSupported",
get:function(){return!0}},{key:"visible",set:function(O){this._set("visible",O);O||N.setActive(this,!1);this.attached&&(O?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(O){this.setEditableFlag(0,O)}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}}]);return r}(M);w.__decorate([H.property({constructOnly:!0})],q.InteractiveToolBase.prototype,"view",void 0);w.__decorate([H.property({dependsOn:["view.activeTool"],
readOnly:!0})],q.InteractiveToolBase.prototype,"active",null);w.__decorate([H.property({value:!0})],q.InteractiveToolBase.prototype,"visible",null);w.__decorate([H.property({value:!0})],q.InteractiveToolBase.prototype,"editable",null);w.__decorate([H.property({readOnly:!0})],q.InteractiveToolBase.prototype,"attached",void 0);w.__decorate([H.property({readOnly:!0})],q.InteractiveToolBase.prototype,"created",void 0);w.__decorate([H.property({readOnly:!0})],q.InteractiveToolBase.prototype,"completed",
void 0);w.__decorate([H.property({readOnly:!0})],q.InteractiveToolBase.prototype,"manipulators",void 0);w.__decorate([H.property({constructOnly:!0})],q.InteractiveToolBase.prototype,"deferCreation",void 0);q.InteractiveToolBase=w.__decorate([G.subclass("esri.views.interactive.InteractiveToolBase")],q.InteractiveToolBase);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/interactive/ManipulatorCollection":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe",
"../../core/Collection"],function(q,A,w,S){let I=function(){function t(){this._isToolEditable=!0;this._manipulators=new S;this._nextManipulatorId=0;this._resourceContexts={manipulator3D:{}};this._attached=!1}var H=t.prototype;H.add=function(v,G=0){return this.addMany([v],G)[0]};H.addMany=function(v,G=0){return v.map(y=>{const u=this._nextManipulatorId++;y={id:u,manipulator:y,visibilityPredicate:G,attached:!1};this._manipulators.add(y);this._attached&&this._updateManipulatorAttachment(y);return u})};
H.remove=function(v){if("number"===typeof v){for(var G=0;G<this._manipulators.length;G++)if(this._manipulators.getItemAt(G).id===v)return v=this._manipulators.splice(G,1)[0],this._detachManipulator(v),v.id;return null}for(G=0;G<this._manipulators.length;G++)if(this._manipulators.getItemAt(G).manipulator===v)return v=this._manipulators.splice(G,1)[0],this._detachManipulator(v),v.id;return null};H.removeAll=function(){this._manipulators.forEach(v=>{this._detachManipulator(v)});this._manipulators.removeAll()};
H.attach=function(){this._manipulators.forEach(v=>{this._updateManipulatorAttachment(v)});this._attached=!0};H.detach=function(){this._manipulators.forEach(v=>{this._detachManipulator(v)});this._attached=!1};H.destroy=function(){this._manipulators.forEach(({manipulator:v})=>{v.destroy&&v.destroy()});this._manipulators.destroy();this._resourceContexts=null};H.on=function(v,G){return this._manipulators.on(v,y=>{G(y)})};H.forEach=function(v){for(const G of this._manipulators.items)v(G)};H.some=function(v){return this._manipulators.items.some(v)};
H.toArray=function(){const v=[];this.forEach(G=>v.push(G.manipulator));return v};H.intersect=function(v,G){let y=null,u=Number.MAX_VALUE;this._manipulators.forEach(({id:D,manipulator:B,attached:M})=>{M&&B.interactive&&(B=B.intersectionDistance(v,G),w.isSome(B)&&B<u&&(u=B,y=D))});return y};H.findById=function(v){if(w.isNone(v))return null;for(const G of this._manipulators.items)if(v===G.id)return G.manipulator;return null};H._updateManipulatorAttachment=function(v){this._isManipulatorItemVisible(v)?
this._attachManipulator(v):this._detachManipulator(v)};H._attachManipulator=function(v){v.attached||(v.manipulator.attach&&v.manipulator.attach(this._resourceContexts),v.attached=!0)};H._detachManipulator=function(v){if(v.attached){var G=v.manipulator;G.grabbing=!1;G.dragging=!1;G.hovering=!1;G.selected=!1;G.detach&&G.detach(this._resourceContexts);v.attached=!1}};H._isManipulatorItemVisible=function(v){return 2===v.visibilityPredicate?!0:this._isToolEditable?0===v.visibilityPredicate:1===v.visibilityPredicate};
A._createClass(t,[{key:"isToolEditable",set:function(v){this._isToolEditable=v}},{key:"length",get:function(){return this._manipulators.length}}]);return t}();q.ManipulatorCollection=I;Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/PolygonDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ./DrawingMode ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P){q.PolygonDrawAction=function(T){function F(J){J=T.call(this,J)||this;J._cursorScreenPoint=null;J._panEnabled=!1;J._cursorVertexAdded=!1;J._popVertexOnPointerMove=!1;J._addVertexOnPointerUp=!1;J._activePointerId=null;J._viewHandles=new M;J.mode=O.defaultDrawingMode;J.vertices=[];return J}A._inheritsLoose(F,T);var K=F.prototype;K.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};K.destroy=function(){"2d"===
this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};K.addVertex=function(J,L){this.vertices.splice(L,0,J);this.history.push({vertex:J,vertexIndex:L,undo:()=>this._undoVertexAdd(null,L),redo:()=>this._redoVertexAdd(null,J,L)});this._set("redoHistory",[]);const Y=new r.VertexAddEvent(this.view,null,L,this.vertices);this.emit("vertex-add",Y);Y.defaultPrevented&&(this._popVertexOnPointerMove=!0,this.history.pop())};K.removeVertex=function(J){const L=
this.vertices.splice(J,1)[0];this.history.push({vertex:L,vertexIndex:J,undo:()=>this._undoVertexRemove(null,L,J),redo:()=>this._redoVertexRemove(null,J)});this._set("redoHistory",[]);this.emit("vertex-remove",new r.VertexRemoveEvent(this.view,null,J,this.vertices))};K.updateVertex=function(J,L){const Y=this.vertices[L];this.vertices[L]=J;this.history.push({vertex:J,vertexIndex:L,undo:()=>this._undoVertexUpdate(null,Y,L),redo:()=>this._redoVertexUpdate(null,J,L)});this._set("redoHistory",[]);this.emit("vertex-update",
new r.VertexUpdateEvent(this.view,null,L,this.vertices))};K.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};K.getGeometryZValue=function(){return 0<this.vertices.length&&2<this.vertices[0].length?this.vertices[0][2]:this._get("defaultZ")};K._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",J=>{this._shouldHandlePointerEvent(J)&&
!this._panEnabled&&(this._activePointerId=J.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=z.createScreenPointFromEvent(J),"touch"===J.pointerType&&this._updateCursor(J.native))},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",J=>{this._popVertexOnPointerMove&&(this.vertices.pop(),this._popVertexOnPointerMove=!1);this._cursorScreenPoint=z.createScreenPointFromEvent(J);"touch"!==J.pointerType&&this._updateCursor(J.native)},N.ViewEventPriorities.TOOL),this.view.on("pointer-drag",
J=>{this._shouldHandlePointerEvent(J)&&(this._cursorScreenPoint=z.createScreenPointFromEvent(J),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(J):this._addVertexOnPointerUp=!1)},N.ViewEventPriorities.TOOL),this.view.on("pointer-up",J=>{this._shouldHandlePointerEvent(J)&&(this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(J):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(J)):this._updateCursor(J.native,"touch"===J.pointerType))},
N.ViewEventPriorities.TOOL),this.view.on("drag",J=>{this._dragEnabled&&I.isSome(this._activePointerId)&&!this._panEnabled&&J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("double-click",J=>{J.stopPropagation();this._drawCompleteHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],J=>{J.stopPropagation();this._drawCompleteHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("key-down",
J=>{const {key:L,repeat:Y}=J;L===C.KEYS.vertexAddKey&&!Y&&this._cursorScreenPoint?(J.stopPropagation(),this._vertexAddHandler(J)):L===C.KEYS.drawCompleteKey&&!Y&&this._cursorScreenPoint&&2<this.vertices.length?(J.stopPropagation(),this._vertexAddHandler(J),this._drawCompleteHandler(J)):L!==C.KEYS.undoKey||this.interactiveUndoDisabled||Y?L!==C.KEYS.redoKey||this.interactiveUndoDisabled||Y?L!==C.KEYS.panKey||Y||(J.stopPropagation(),this._panEnabled=!0):(J.stopPropagation(),this.redo()):(J.stopPropagation(),
this.undo())},N.ViewEventPriorities.TOOL),this.view.on("key-up",J=>{J.key===C.KEYS.panKey&&(J.stopPropagation(),this._panEnabled=!1)},N.ViewEventPriorities.TOOL)])};K._removeViewHandles=function(){this._viewHandles.removeAll()};K._addDrawTool=function(J){this._drawTool=new P.DrawTool({view:J,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",
L=>{1===L.vertices.length&&this.emit("vertex-add",new r.VertexAddEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",L=>{1===L.vertices.length&&this.emit("cursor-update",new r.CursorUpdateEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",L=>{this.emit("draw-complete",new r.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};K._removeDrawTool=
function(){I.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};K._addVertex=function(J,L){this._popCursorVertex();if(!this.isDuplicateVertex(this.vertices,J)){var Y=this.vertices.length;this.vertices.push(J);this.history.push({vertex:J,vertexIndex:Y,undo:()=>this._undoVertexAdd(L,Y),redo:()=>this._redoVertexAdd(L,J,Y)});this._set("redoHistory",[]);var W=new r.VertexAddEvent(this.view,L,Y,this.vertices);this.emit("vertex-add",W);W.defaultPrevented&&
(this._popVertexOnPointerMove=!0,this.history.pop())}};K._updateCursor=function(J,L=!1){this._popCursorVertex();if(this._cursorScreenPoint){var Y=null,W=null,aa=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);I.isSome(aa)&&(Y=aa.mapPoint,L||(W=this._pushCursorVertex(aa.vertex)));J=new r.CursorUpdateEvent(this.view,J,W,this.vertices,Y);this.emit("cursor-update",J)}};K._completeDrawing=function(J){this._activePointerId=null;this._popCursorVertex();3>this.vertices.length||(J=new r.DrawCompleteEvent(J,
this.vertices),this.emit("draw-complete",J),J.defaultPrevented||this._removeViewHandles())};K._undoVertexAdd=function(J,L){this.vertices.splice(L,1);this.emit("undo",new r.VertexRemoveEvent(this.view,J,L,this.vertices))};K._redoVertexAdd=function(J,L,Y){this.vertices.splice(Y,0,L);this.emit("redo",new r.VertexAddEvent(this.view,J,Y,this.vertices))};K._undoVertexRemove=function(J,L,Y){this.vertices.splice(Y,0,L);this.emit("undo",new r.VertexAddEvent(this.view,J,Y,this.vertices))};K._redoVertexRemove=
function(J,L){this.vertices.splice(L,1);this.emit("redo",new r.VertexRemoveEvent(this.view,J,L,this.vertices))};K._undoVertexUpdate=function(J,L,Y){this.vertices[Y]=L;this.emit("undo",new r.VertexUpdateEvent(this.view,J,Y,this.vertices))};K._redoVertexUpdate=function(J,L,Y){this.vertices[Y]=L;this.emit("redo",new r.VertexUpdateEvent(this.view,J,Y,this.vertices))};K._pushCursorVertex=function(J){this._popCursorVertex();this.vertices.push(J);this._cursorVertexAdded=!0;return this.vertices.length-1};
K._popCursorVertex=function(){this._cursorVertexAdded&&(this.vertices.pop(),this._cursorVertexAdded=!1)};K._shouldHandlePointerEvent=function(J){return("mouse"!==J.pointerType||0===J.button)&&(I.isNone(this._activePointerId)||this._activePointerId===J.pointerId)};K._vertexAddHandler=function(J){if(this._cursorVertexAdded)this._addVertex(this.vertices[this.vertices.length-1],J.native);else{const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(L)&&this._addVertex(L,J.native)}};K._drawCompleteHandler=
function(J){this._completeDrawing(J.native)};A._createClass(F,[{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}}]);return F}(E);w.__decorate([v.property({dependsOn:["mode"]})],q.PolygonDrawAction.prototype,"_clickEnabled",null);w.__decorate([v.property({dependsOn:["mode"]})],q.PolygonDrawAction.prototype,"_dragEnabled",null);w.__decorate([v.property({type:O.drawingModes})],q.PolygonDrawAction.prototype,
"mode",void 0);w.__decorate([v.property({readOnly:!0})],q.PolygonDrawAction.prototype,"vertices",void 0);q.PolygonDrawAction=w.__decorate([y.subclass("esri.views.draw.PolygonDrawAction")],q.PolygonDrawAction);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/PolylineDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ./DrawingMode ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P){q.PolylineDrawAction=function(T){function F(J){J=T.call(this,J)||this;J._cursorScreenPoint=null;J._panEnabled=!1;J._cursorVertexAdded=!1;J._popVertexOnPointerMove=!1;J._addVertexOnPointerUp=!1;J._activePointerId=null;J._viewHandles=new M;J.mode=O.defaultDrawingMode;J.vertices=[];return J}A._inheritsLoose(F,T);var K=F.prototype;K.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};K.destroy=function(){"2d"===
this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};K.addVertex=function(J,L){this.vertices.splice(L,0,J);this.history.push({vertex:J,vertexIndex:L,undo:()=>this._undoVertexAdd(null,L),redo:()=>this._redoVertexAdd(null,J,L)});this._set("redoHistory",[]);const Y=new r.VertexAddEvent(this.view,null,L,this.vertices);this.emit("vertex-add",Y);Y.defaultPrevented&&(this._popVertexOnPointerMove=!0,this.history.pop())};K.removeVertex=function(J){const L=
this.vertices.splice(J,1)[0];this.history.push({vertex:L,vertexIndex:J,undo:()=>this._undoVertexRemove(null,L,J),redo:()=>this._redoVertexRemove(null,J)});this._set("redoHistory",[]);this.emit("vertex-remove",new r.VertexRemoveEvent(this.view,null,J,this.vertices))};K.updateVertex=function(J,L){const Y=this.vertices[L];this.vertices[L]=J;this.history.push({vertex:J,vertexIndex:L,undo:()=>this._undoVertexUpdate(null,Y,L),redo:()=>this._redoVertexUpdate(null,J,L)});this._set("redoHistory",[]);this.emit("vertex-update",
new r.VertexUpdateEvent(this.view,null,L,this.vertices))};K.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};K._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",J=>{this._shouldHandlePointerEvent(J)&&!this._panEnabled&&(this._activePointerId=J.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=z.createScreenPointFromEvent(J),
"touch"===J.pointerType&&this._updateCursor(J.native))},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",J=>{this._popVertexOnPointerMove&&(this.vertices.pop(),this._popVertexOnPointerMove=!1);this._cursorScreenPoint=z.createScreenPointFromEvent(J);"touch"!==J.pointerType&&this._updateCursor(J.native)},N.ViewEventPriorities.TOOL),this.view.on("pointer-drag",J=>{this._shouldHandlePointerEvent(J)&&(this._cursorScreenPoint=z.createScreenPointFromEvent(J),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(J):
this._addVertexOnPointerUp=!1)},N.ViewEventPriorities.TOOL),this.view.on("pointer-up",J=>{this._shouldHandlePointerEvent(J)&&(this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(J):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(J)):this._updateCursor(J.native,"touch"===J.pointerType))},N.ViewEventPriorities.TOOL),this.view.on("drag",J=>{this._dragEnabled&&I.isSome(this._activePointerId)&&!this._panEnabled&&J.stopPropagation()},
N.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("double-click",J=>{J.stopPropagation();this._drawCompleteHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],J=>{J.stopPropagation();this._drawCompleteHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("key-down",J=>{const {key:L,repeat:Y}=J;L===C.KEYS.vertexAddKey&&!Y&&this._cursorScreenPoint?(J.stopPropagation(),this._vertexAddHandler(J)):L===
C.KEYS.drawCompleteKey&&!Y&&this._cursorScreenPoint&&1<this.vertices.length?(J.stopPropagation(),this._vertexAddHandler(J),this._drawCompleteHandler(J)):L!==C.KEYS.undoKey||this.interactiveUndoDisabled||Y?L!==C.KEYS.redoKey||this.interactiveUndoDisabled||Y?L!==C.KEYS.panKey||Y||(J.stopPropagation(),this._panEnabled=!0):(J.stopPropagation(),this.redo()):(J.stopPropagation(),this.undo())},N.ViewEventPriorities.TOOL),this.view.on("key-up",J=>{J.key===C.KEYS.panKey&&(J.stopPropagation(),this._panEnabled=
!1)},N.ViewEventPriorities.TOOL)])};K._removeViewHandles=function(){this._viewHandles.removeAll()};K._addDrawTool=function(J){this._drawTool=new P.DrawTool({view:J,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",L=>{1===L.vertices.length&&this.emit("vertex-add",new r.VertexAddEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});
this._drawTool.on("cursor-update",L=>{1===L.vertices.length&&this.emit("cursor-update",new r.CursorUpdateEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",L=>{this.emit("draw-complete",new r.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};K._removeDrawTool=function(){I.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=I.destroyMaybe(this._drawTool))};K._addVertex=function(J,
L){this._popCursorVertex();if(!this.isDuplicateVertex(this.vertices,J)){this.vertices.push(J);var Y=this.vertices.length-1;this.history.push({vertex:J,vertexIndex:Y,undo:()=>this._undoVertexAdd(L,Y),redo:()=>this._redoVertexAdd(L,J,Y)});this._set("redoHistory",[]);var W=new r.VertexAddEvent(this.view,L,Y,this.vertices);this.emit("vertex-add",W);W.defaultPrevented&&(this._popVertexOnPointerMove=!0,this.history.pop())}};K._updateCursor=function(J,L=!1){this._popCursorVertex();if(this._cursorScreenPoint){var Y=
null,W=null,aa=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);I.isSome(aa)&&(Y=aa.mapPoint,L||(W=this._pushCursorVertex(aa.vertex)));J=new r.CursorUpdateEvent(this.view,J,W,this.vertices,Y);this.emit("cursor-update",J)}};K._completeDrawing=function(J){this._activePointerId=null;this._popCursorVertex();2>this.vertices.length||(J=new r.DrawCompleteEvent(J,this.vertices),this.emit("draw-complete",J),J.defaultPrevented||this._removeViewHandles())};K._undoVertexAdd=function(J,L){this.vertices.splice(L,
1);this.emit("undo",new r.VertexRemoveEvent(this.view,J,L,this.vertices))};K._redoVertexAdd=function(J,L,Y){this.vertices.splice(Y,0,L);this.emit("redo",new r.VertexAddEvent(this.view,J,Y,this.vertices))};K._undoVertexRemove=function(J,L,Y){this.vertices.splice(Y,0,L);this.emit("undo",new r.VertexAddEvent(this.view,J,Y,this.vertices))};K._redoVertexRemove=function(J,L){this.vertices.splice(L,1);this.emit("redo",new r.VertexRemoveEvent(this.view,J,L,this.vertices))};K._undoVertexUpdate=function(J,
L,Y){this.vertices[Y]=L;this.emit("undo",new r.VertexUpdateEvent(this.view,J,Y,this.vertices))};K._redoVertexUpdate=function(J,L,Y){this.vertices[Y]=L;this.emit("redo",new r.VertexUpdateEvent(this.view,J,Y,this.vertices))};K._pushCursorVertex=function(J){this._popCursorVertex();this.vertices.push(J);this._cursorVertexAdded=!0;return this.vertices.length-1};K._popCursorVertex=function(){this._cursorVertexAdded&&(this.vertices.pop(),this._cursorVertexAdded=!1)};K._shouldHandlePointerEvent=function(J){return("mouse"!==
J.pointerType||0===J.button)&&(I.isNone(this._activePointerId)||this._activePointerId===J.pointerId)};K._vertexAddHandler=function(J){if(this._cursorVertexAdded)this._addVertex(this.vertices[this.vertices.length-1],J.native);else{const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(L)&&this._addVertex(L,J.native)}};K._drawCompleteHandler=function(J){this._completeDrawing(J.native)};A._createClass(F,[{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},
{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}}]);return F}(E);w.__decorate([v.property({dependsOn:["mode"]})],q.PolylineDrawAction.prototype,"_clickEnabled",null);w.__decorate([v.property({dependsOn:["mode"]})],q.PolylineDrawAction.prototype,"_dragEnabled",null);w.__decorate([v.property({type:O.drawingModes})],q.PolylineDrawAction.prototype,"mode",void 0);w.__decorate([v.property({readOnly:!0})],q.PolylineDrawAction.prototype,"vertices",void 0);q.PolylineDrawAction=
w.__decorate([y.subclass("esri.views.draw.PolylineDrawAction")],q.PolylineDrawAction);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/SegmentDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ../3d/interactive/editingTools/draw/DrawTool ./support/createUtils".split(" "),
function(q,A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P){q.SegmentDrawAction=function(T){function F(J){J=T.call(this,J)||this;J._isDragging=!1;J._panEnabled=!1;J._cursorScreenPoint=null;J._viewHandles=new M;J._cursorVertexAdded=!1;J._activePointerId=null;J.viewAlignedCoordinateSystem=null;J.mode="freehand";J.vertices=[];return J}A._inheritsLoose(F,T);var K=F.prototype;K.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};K.destroy=function(){"2d"===this.view.type?
(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};K.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};K.getGeometryZValue=function(){return 0<this.vertices.length&&2<this.vertices[0].length?this.vertices[0][2]:this._get("defaultZ")};K._addViewHandles=function(){this._removeViewHandles();"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())};
K._getDragModeViewHandles=function(){return[this.view.on("immediate-click",J=>{J.stopPropagation();if(J.mapPoint&&!this._panEnabled){const L=this.getCoordsFromScreenPoint(z.createScreenPointFromEvent(J));I.isSome(L)&&(this._set("vertices",[L]),this._drawCompleteHandler(J))}},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",J=>{this._shouldHandlePointerEvent(J)&&!this._panEnabled&&(this._cursorScreenPoint=z.createScreenPointFromEvent(J),this._set("vertices",[]),this._activePointerId=J.pointerId,
this._vertexAddHandler(J),this._isDragging=!1,"touch"===J.pointerType&&this._cursorUpdateHandler(J))},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",J=>{this._cursorScreenPoint=z.createScreenPointFromEvent(J);I.isNone(this._activePointerId)&&"touch"!==J.pointerType&&0===this.vertices.length&&this._cursorUpdateHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("pointer-drag",J=>{this._shouldHandlePointerEvent(J)&&(this._isDragging=!0,this._cursorScreenPoint=z.createScreenPointFromEvent(J),
this._cursorUpdateHandler(J))},N.ViewEventPriorities.TOOL),this.view.on("pointer-up",J=>{this._shouldHandlePointerEvent(J)&&(this._activePointerId=null,this._popCursorVertex(),this._isDragging&&!this._panEnabled&&(this._vertexAddHandler(J),this._drawCompleteHandler(J)),this._isDragging=!1)},N.ViewEventPriorities.TOOL),this.view.on("key-down",J=>{J.key===C.KEYS.drawCompleteKey&&this._cursorScreenPoint?this._drawCompleteHandler(J):J.key===C.KEYS.panKey&&(this._panEnabled=!0)},N.ViewEventPriorities.TOOL),
this.view.on("key-up",J=>{J.key===C.KEYS.panKey&&(this._panEnabled=!1)},N.ViewEventPriorities.TOOL),this.view.on("drag",J=>{I.isSome(this._activePointerId)&&J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL)]};K._getClickModeViewHandles=function(){return[this.view.on("immediate-click",J=>{J.stopPropagation()},N.ViewEventPriorities.TOOL),this.view.on("pointer-down",J=>{this._cursorScreenPoint=z.createScreenPointFromEvent(J);
this._activePointerId=J.pointerId;this._isDragging=!1;"touch"===J.pointerType&&this._cursorUpdateHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("pointer-move",J=>{this._cursorScreenPoint=z.createScreenPointFromEvent(J);I.isNone(this._activePointerId)&&"touch"!==J.pointerType&&this._cursorUpdateHandler(J)},N.ViewEventPriorities.TOOL),this.view.on("pointer-drag",J=>{this._shouldHandlePointerEvent(J)&&(this._isDragging=!0)},N.ViewEventPriorities.TOOL),this.view.on("pointer-up",J=>{this._shouldHandlePointerEvent(J)&&
(this._activePointerId=null,this._isDragging||this._vertexAddHandler(J),2!==this.vertices.length||this._isDragging||this._drawCompleteHandler(J),this._isDragging=!1)},N.ViewEventPriorities.TOOL),this.view.on("key-down",J=>{J.key===C.KEYS.vertexAddKey&&this._cursorScreenPoint&&(this._vertexAddHandler(J),2===this.vertices.length&&this._drawCompleteHandler(J));J.key===C.KEYS.drawCompleteKey&&this._cursorScreenPoint&&2===this.vertices.length&&this._drawCompleteHandler(J)},N.ViewEventPriorities.TOOL)]};
K._removeViewHandles=function(){this._viewHandles.removeAll()};K._addDrawTool=function(J){this._drawTool=new O.DrawTool({view:J,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",L=>{1===L.vertices.length&&this.emit("vertex-add",new r.VertexAddEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",
L=>{1===L.vertices.length&&this.emit("cursor-update",new r.CursorUpdateEvent(this.view,null,L.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",L=>{this.emit("draw-complete",new r.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};K._removeDrawTool=function(){I.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};K._addVertex=function(J,L){this._popCursorVertex();this.isDuplicateVertex(this.vertices,
J)||(this.vertices.push(J),1===this.vertices.length&&(this.viewAlignedCoordinateSystem=P.createViewAlignedCoordinateSystem(this.view,this.vertices[0])),J=this.vertices.indexOf(J),L=new r.VertexAddEvent(this.view,L,J,this.vertices),this.emit("vertex-add",L))};K._updateCursor=function(J,L){let Y=null;I.isSome(J)&&(Y=this._pushCursorVertex(J));J=new r.CursorUpdateEvent(this.view,L,Y,this.vertices);this.emit("cursor-update",J)};K._completeDrawing=function(J){this._activePointerId=null;this._popCursorVertex();
this._isDragging=!1;this._cursorScreenPoint=null;1>this.vertices.length||(J=new r.DrawCompleteEvent(J,this.vertices),this.emit("draw-complete",J),J.defaultPrevented||this._removeViewHandles())};K._pushCursorVertex=function(J){this._popCursorVertex();this.vertices.push(J);this._cursorVertexAdded=!0;return this.vertices.length-1};K._popCursorVertex=function(){this._cursorVertexAdded&&(this.vertices.pop(),this._cursorVertexAdded=!1)};K._shouldHandlePointerEvent=function(J){return("mouse"!==J.pointerType||
0===J.button)&&(I.isNone(this._activePointerId)||this._activePointerId===J.pointerId)};K._vertexAddHandler=function(J){const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);I.isSome(L)&&this._addVertex(L,J.native)};K._cursorUpdateHandler=function(J){const L=this.getCoordsFromScreenPoint(this._cursorScreenPoint);this._updateCursor(L,J.native)};K._drawCompleteHandler=function(J){this._completeDrawing(J.native)};return F}(E);w.__decorate([v.property({type:["freehand","click"]})],q.SegmentDrawAction.prototype,
"mode",void 0);w.__decorate([v.property({readOnly:!0})],q.SegmentDrawAction.prototype,"vertices",void 0);q.SegmentDrawAction=w.__decorate([y.subclass("esri/views/2d/engine/markup/SegmentDrawAction")],q.SegmentDrawAction);Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(q,A){q.isSupportedGraphicResultMessage=function(w){switch(w){case 1:return"not owned by a graphics layer";
case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";case 5:return"the symbol type is not supported"}return""};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(q,A,w,S){q.isSupportedGraphic=function(I){var t;if("graphics"!==
(null==(t=I.layer)?void 0:t.type))return 1;if(w.isNone(I.geometry))return 2;switch(I.geometry.type){case "polygon":case "point":case "polyline":break;case "multipoint":case "extent":case "mesh":return 3;default:return 3}return"on-the-ground"!==S.getGraphicEffectiveElevationMode(I)&&S.hasGraphicFeatureExpressionInfo(I)?4:0};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has",
"../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(q,A,w,S,I){q.isSupportedGraphic=function(t){var H;if("graphics"!==(null==(H=t.layer)?void 0:H.type))return 1;H=t.geometry;if(w.isNone(H))return 2;switch(H.type){case "polygon":if(H instanceof S)return 3;break;case "polyline":break;case "point":case "multipoint":case "extent":case "mesh":return 3;default:return 3}return"on-the-ground"!==I.getGraphicEffectiveElevationMode(t)&&I.hasGraphicFeatureExpressionInfo(t)?
4:0};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(q,A,w,S){q.isSupportedGraphic=function(I){var t;if("graphics"!==(null==(t=I.layer)?void 0:t.type))return 1;if(w.isNone(I.geometry))return 2;switch(I.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return 3;
default:return 3}return(t=w.isSome(I.symbol)&&"point-3d"===I.symbol.type&&I.symbol.symbolLayers)&&0<t.length&&t.some(H=>"object"===H.type)?"on-the-ground"!==S.getGraphicEffectiveElevationMode(I)&&S.hasGraphicFeatureExpressionInfo(I)?4:0:5};Object.defineProperty(q,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],function(q){q.addUniqueLayer=function(A,w){w&&A&&A.map&&({map:A}=A,A.layers.find(S=>S===w)||A.add(w))};Object.defineProperty(q,"__esModule",{value:!0})})},
"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/compilerUtils ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Evented".split(" "),function(q,A,
w,S,I,t,H,v,G,y,u,D,B,M){q.OperationHandle=function(N){function z(r){r=N.call(this,r)||this;r.cancelled=!1;r.history={undo:[],redo:[]};r.type=null;return r}A._inheritsLoose(z,N);var E=z.prototype;E.addToHistory=function(r){this.history.redo=[];this.history.undo.push(r)};E.resetHistory=function(){this.history.redo=[];this.history.undo=[]};E.canUndo=function(){return 0<this.history.undo.length};E.canRedo=function(){return 0<this.history.redo.length};E.complete=function(){this.reset();this.onEnd();this.emit("complete")};
E.cancel=function(){this.cancelled=!0;this.complete()};E.reset=function(){this.activeComponent.reset()};E.refreshComponent=function(){const r=this.activeComponent;r&&("box"!==r.type&&"reshape"!==r.type||r.refresh())};A._createClass(z,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";case "draw":case "draw-3d":break;
default:I.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(r){this._set("undo",()=>{this.canUndo()&&r()})}},{key:"redo",set:function(r){this._set("redo",()=>{this.canRedo()&&r()})}}]);return z}(M.EventedAccessor);w.__decorate([v.property()],q.OperationHandle.prototype,"activeComponent",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"cancelled",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"history",void 0);w.__decorate([v.property({dependsOn:["activeComponent"]})],
q.OperationHandle.prototype,"tool",null);w.__decorate([v.property()],q.OperationHandle.prototype,"type",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"canUndo",null);w.__decorate([v.property()],q.OperationHandle.prototype,"canRedo",null);w.__decorate([v.property()],q.OperationHandle.prototype,"onEnd",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"undo",null);w.__decorate([v.property()],q.OperationHandle.prototype,"redo",null);w.__decorate([v.property()],q.OperationHandle.prototype,
"toggleTool",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"addToSelection",void 0);w.__decorate([v.property()],q.OperationHandle.prototype,"removeFromSelection",void 0);q.OperationHandle=w.__decorate([y.subclass("esri.widgets.Sketch.support.OperationHandle")],q.OperationHandle);Object.defineProperty(q,"__esModule",{value:!0})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../layers/support/fieldUtils ../intl/substitute ../intl ../core/watchUtils ../core/HandleOwner ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ./support/decorators/vmEvent ../chunks/index ./Widget ./Attachments ./Spinner ./FeatureForm ./FeatureTemplates/ItemList ./FeatureTemplates ./Editor/EditorViewModel".split(" "),function(q,
A,w,S,I,t,H,v,G,y,u,D,B,M,N,z,E,r,C,O,P,T,F,K,J,L,Y,W,aa,oa,ta){function la(X){X.focus()}w=function(X){function U(sa,qa){var na=X.call(this,sa,qa)||this;na._candidateCommitted=!1;na._featureForm=new W;na._attachments=new L({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});na._featureTemplates=new oa;na._filterText="";na._prompt=null;na._spinner=new Y;na.activeWorkflow=null;na.allowedWorkflows=null;na.iconClass=
"esri-icon-edit";na.label=void 0;na.layerInfos=null;na.messages=null;na.messagesCommon=null;na.messagesTemplates=null;na.supportingWidgetDefaults=null;na.view=null;na.viewModel=new ta;na._handleHeaderClickOrKeyDown=pa=>{pa.currentTarget["data-prevent-back"]||na._handleBack.call(q._assertThisInitialized(na),pa)};na._setCandidateFeature=(pa,va=!1)=>{if(!na._candidateCommitted){var ja=na.viewModel.activeWorkflow;ja.data.edits.feature=pa;va&&(ja.next(),na._candidateCommitted=!0)}};na._handleSave=na._handleSave.bind(q._assertThisInitialized(na));
na._handleBack=na._handleBack.bind(q._assertThisInitialized(na));na._handleDone=na._handleDone.bind(q._assertThisInitialized(na));na._handleDelete=na._handleDelete.bind(q._assertThisInitialized(na));na._handleAdd=na._handleAdd.bind(q._assertThisInitialized(na));na._handleEdit=na._handleEdit.bind(q._assertThisInitialized(na));na._handleAttachmentAdd=na._handleAttachmentAdd.bind(q._assertThisInitialized(na));na._handleAttachmentUpdate=na._handleAttachmentUpdate.bind(q._assertThisInitialized(na));na._handleAttachmentDelete=
na._handleAttachmentDelete.bind(q._assertThisInitialized(na));return na}q._inheritsLoose(U,X);var ka=U.prototype;ka.initialize=function(){const {messages:sa,messagesCommon:qa}=this;this.own([E.init(this,"viewModel",na=>{this._featureForm.viewModel=na?na.featureFormViewModel:null;this._attachments.viewModel=na?na.attachmentsViewModel:null;this._featureTemplates.viewModel=na?na.featureTemplatesViewModel:null;this._spinner.viewModel=na?na.spinnerViewModel:null}),E.init(this,"view",(na,pa)=>{const va=
`editor-${this.id}-spinner`;pa&&pa.ui.remove(this._spinner,va);na&&na.ui.add(this._spinner,{key:va,position:"manual"})}),E.on(this,"viewModel.sketchViewModel","create",()=>{this.scheduleRender()}),E.on(this,"viewModel.activeWorkflow","cancel-request",({controller:na})=>{this._prompt={title:sa.cancelRequestTitle,message:sa.cancelRequestWarningMessage,options:[{label:qa.form.no,type:"neutral",action:()=>{na.deny();return this._prompt=null}},{label:qa.form.yes,type:"negative",action:()=>{na.allow();
this._prompt=null}}]};this.scheduleRender()}),E.init(this,"supportingWidgetDefaults",na=>{na&&(this._featureForm.set(na.featureForm),this._attachments.set(na.attachments),this._featureTemplates.set(na.featureTemplates),this.viewModel.sketchViewModel.set(na.sketch))}),E.watch(this,"_attachments.error",na=>{na&&(this._prompt={title:sa.errorWarningTitle,message:na.message,options:[{label:qa.form.ok,type:"neutral",action:()=>{this._prompt=null}}]})}),E.watch(this,"viewModel.failures",na=>{if(na){var [{error:pa,
retry:va,cancel:ja}]=na;this._prompt={title:sa.errorWarningTitle,message:N.substitute(sa.errorWarningMessageTemplate,{errorMessage:pa.message}),options:[{label:sa.retry,type:"positive",action:()=>{va();this._prompt=null}},{label:sa.ignore,type:"neutral",action:()=>{ja();return this._prompt=null}}]}}}),E.watch(this,"viewModel.state",na=>{"awaiting-update-feature-candidate"===na&&(this._candidateCommitted=!1)}),E.watch(this,["_attachments.selectedFile","_attachments.submitting"],()=>this.scheduleRender()),
E.whenNot(this,"viewModel.activeWorkflow",()=>this._featureTemplates.filterText="")])};ka.destroy=function(){this._attachments.destroy();this._featureForm.destroy();this._featureTemplates.destroy()};ka.startCreateWorkflowAtFeatureTypeSelection=function(){return this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};ka.startCreateWorkflowAtFeatureCreation=function(sa){return this.viewModel.startCreateWorkflowAtFeatureCreation(sa)};ka.startCreateWorkflowAtFeatureEdit=function(sa){return this.viewModel.startCreateWorkflowAtFeatureEdit(sa)};
ka.startUpdateWorkflowAtFeatureSelection=function(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()};ka.startUpdateWorkflowAtMultipleFeatureSelection=function(sa){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(sa)};ka.startUpdateWorkflowAtFeatureEdit=function(sa){return this.viewModel.startUpdateWorkflowAtFeatureEdit(sa)};ka.deleteFeatureFromWorkflow=function(){return this.viewModel.deleteFeatureFromWorkflow()};ka.cancelWorkflow=function(sa){return this.viewModel.cancelWorkflow(sa)};
ka.render=function(){const {_attachments:sa,viewModel:qa}=this;if(!qa)return K.jsx("div",{class:"esri-editor esri-widget esri-widget--panel"});const {state:na}=qa,pa=this._prompt?K.jsx("div",{class:"esri-editor__overlay",key:"overlay"},this.renderPrompt({message:this._prompt.message,title:this._prompt.title,options:this._prompt.options})):null;return K.jsx("div",{class:"esri-editor esri-widget esri-widget--panel"},qa.syncing||sa.submitting?this.renderProgressBar():null,"disabled"===na?null:"ready"===
na?this.renderLanding():"awaiting-feature-creation-info"===na?this.renderTemplates():"editing-new-feature"===na||"editing-existing-feature"===na?this.renderAttributeEditing():"awaiting-feature-to-update"===na?this.renderFeatureUpdating():"awaiting-update-feature-candidate"===na?this.renderFeatureList():"awaiting-feature-to-create"===na?this.renderFeatureCreation():"adding-attachment"===na?this.renderAttachmentAdding():"editing-attachment"===na?this.renderAttachmentEditing():null,pa)};ka.renderTemplates=
function(){return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(this.messages.selectTemplate,!0),K.jsx("div",{key:"content",class:"esri-editor__content"},this._featureTemplates.render()))};ka.renderAttributeEditing=function(){const {activeWorkflow:sa,featureFormViewModel:qa}=this.viewModel;var na=sa.data.edits.feature,pa="update"===sa.type&&!sa.data.edits.modified||0<qa.inputFields.length&&!qa.valid;const {messages:va,messagesCommon:ja}=this,ua="create"===sa.type?
ja.add:ja.update;pa=[{label:ua,type:"primary",disabled:pa,clickHandler:this._handleSave}];let Aa=!1;"update"===sa.type&&(sa.data.editableItem.hasAttachments&&(Aa=!0),-1<sa.data.editableItem.supports.indexOf("delete")&&pa.push({label:ja.delete,type:"tertiary",clickHandler:this._handleDelete}));na=this._getLabel(na);return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(na,!0),K.jsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},
K.jsx("div",{class:"esri-editor__content-group"},0<qa.inputFields.length?this._featureForm.render():this.renderMessage(N.substitute(va.clickToFinishTemplate,{button:ua})),Aa?K.jsx("div",{key:"attachments"},K.jsx("div",null,va.attachments),this._attachments.render()):null)),this.renderControls(pa))};ka.renderAttachmentAdding=function(){const {_attachments:sa,messages:qa,messagesCommon:na}=this,pa=[{label:sa.submitting?na.cancel:na.add,disabled:sa.submitting||!sa.selectedFile,type:"primary",clickHandler:this._handleAttachmentAdd}];
return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(qa.addAttachment,!0,sa.submitting),K.jsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},sa.render()),this.renderControls(pa))};ka.renderAttachmentEditing=function(){const {_attachments:sa,messages:qa,messagesCommon:na}=this,pa=[{label:na.update,disabled:sa.submitting||!sa.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate},{label:na.delete,disabled:sa.submitting,
type:"tertiary",clickHandler:this._handleAttachmentDelete}];return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(qa.editAttachment,!0,sa.submitting),K.jsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},sa.render()),this.renderControls(pa))};ka.renderFeatureUpdating=function(){const {messages:sa}=this;return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(sa.selectFeature,!0),K.jsx("div",{key:"content",
class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(sa.selectFeatureToEdit)))};ka.renderMessage=function(sa){return K.jsx("div",{class:"esri-editor__message"},sa)};ka.renderFeatureCreation=function(){const {messages:sa,viewModel:qa}=this;var na=qa.sketchViewModel,pa=qa.activeWorkflow.data.creationInfo.layer;na=na.canUndo()&&na.createGraphic?na.createGraphic:null;pa=this._getSketchingTip(pa.geometryType,na);return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},
this.renderHeader(sa.placeFeature,!0),K.jsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},this.renderMessage(pa)))};ka.renderControls=function(sa){return K.jsx("div",{class:"esri-editor__controls",key:"controls"},sa.map(({disabled:qa=!1,label:na,type:pa,clickHandler:va},ja)=>this.renderButton({label:na,class:this.classes("esri-editor__control-button","esri-button","secondary"===pa?"esri-button--secondary":"tertiary"===pa?"esri-button--tertiary":null,qa?"esri-button--disabled":
null),disabled:qa,clickHandler:va,key:ja})))};ka.renderPrompt=function({title:sa,message:qa,options:na=[]}){return K.jsx("div",{class:"esri-editor__warning-card",role:"alert"},K.jsx("div",{class:"esri-editor__warning-header"},K.jsx("span",{class:"esri-icon-notice-triangle","aria-hidden":"true"}),K.jsx("h4",{class:this.classes("esri-heading","esri-editor__warning-heading")},sa)),K.jsx("div",{class:"esri-editor__warning-message"},qa),K.jsx("div",{class:"esri-editor__warning-divider"}),na.map(({label:pa,
action:va,type:ja},ua)=>{const Aa=0===ua;return K.jsx("div",{afterCreate:Aa?la:null,class:this.classes("esri-editor__warning-option",Aa?"esri-editor__warning-option--primary":null,"positive"===ja?"esri-editor__warning-option--positive":"negative"===ja?"esri-editor__warning-option--negative":null),key:ua,onclick:va,onkeydown:Ga=>{const Na=B.eventKey(Ga);if("Enter"===Na||" "===Na)Ga.preventDefault(),va.call(null)},tabIndex:0,role:"button"},pa)}))};ka.renderProgressBar=function(){return K.jsx("div",
{class:this.classes("esri-editor__progress-bar"),key:"progress-bar"})};ka.renderButton=function(sa){return K.jsx("button",{class:sa.class,disabled:sa.disabled,key:sa.key,onclick:sa.clickHandler,type:"button"},sa.label)};ka.renderHeader=function(sa,qa=!1,na=!1){const {messagesCommon:pa}=this;return K.jsx("header",{class:"esri-editor__header",key:"header"},qa?K.jsx("div",{"aria-label":pa.back,class:this.classes("esri-editor__back-button","esri-interactive",na?"esri-button--disabled":null),key:"back-button",
"data-prevent-back":na,onclick:this._handleHeaderClickOrKeyDown,onkeydown:this._handleHeaderClickOrKeyDown,role:"button",tabIndex:0,title:pa.back},K.jsx("span",{"aria-hidden":"true",class:C.isRTL()?"esri-icon-right":"esri-icon-left"})):null,K.jsx("h4",{class:this.classes("esri-editor__title","esri-heading")},sa))};ka.renderLanding=function(){const {messages:sa}=this,{allowedWorkflows:qa,canCreate:na,canUpdate:pa}=this.viewModel,va=C.isRTL()?"esri-icon-left":"esri-icon-right";return K.jsx("div",{class:"esri-editor__temp-wrapper",
key:"wrapper"},this.renderHeader(sa.widgetLabel),K.jsx("div",{key:"content",class:"esri-editor__content",role:"group"},K.jsx("div",{class:"esri-editor__mode-selection",key:"mode-selection"},-1<qa.indexOf("update")?K.jsx("div",{"aria-disabled":pa?"false":"true",class:this.classes("esri-editor__feature-list-item",pa?null:"esri-editor__feature-list-item--disabled"),key:"update",onclick:this._handleEdit,onkeydown:this._handleEdit,role:"button",tabIndex:pa?0:-1},K.jsx("span",{class:"esri-editor__feature-list-name"},
sa.editFeature),K.jsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",va)})):null,-1<qa.indexOf("create")?K.jsx("div",{class:this.classes("esri-editor__feature-list-item",na?null:"esri-editor__feature-list-item--disabled"),key:"create",onclick:this._handleAdd,onkeydown:this._handleAdd,role:"button",tabIndex:na?0:-1},K.jsx("span",{class:"esri-editor__feature-list-name"},sa.addFeature),K.jsx("span",{"aria-hidden":"true",class:this.classes("esri-editor__feature-list-icon",
va)})):null)))};ka.renderFeatureList=function(){const {messages:sa,messagesTemplates:qa,viewModel:{editableItems:na,activeWorkflow:pa}}=this;var va=pa.data.candidates;const ja=N.substitute(sa.multipleFeaturesTemplate,{total:va.length}),ua=new Map;va.map(Aa=>({label:this._getLabel(Aa),id:Aa.attributes[Aa.layer.objectIdField],data:Aa})).filter(Aa=>{const {label:Ga,data:Na}=Aa;Aa=this._filterText.toLowerCase();const {title:Oa}=Na.layer;return-1<this.viewModel.editableItems.find(Z=>Z.layer===Na.layer).supports.indexOf("update")&&
(!Aa||-1<Ga.toLowerCase().indexOf(Aa)||-1<Oa.toLowerCase().indexOf(Aa))}).forEach(Aa=>{const Ga=Aa.data.layer;ua.has(Ga)?ua.get(Ga).items.push(Aa):ua.set(Ga,{id:`${Ga.id}`,label:Ga.title,items:[Aa]})});va=na.filter(({layer:Aa})=>ua.has(Aa)).map(({layer:Aa})=>ua.get(Aa)).toArray();return K.jsx("div",{class:"esri-editor__temp-wrapper",key:"wrapper"},this.renderHeader(ja,!0),K.jsx("div",{key:"content",class:this.classes("esri-editor__content","esri-editor__scroller")},aa.ItemList({id:this.id,filterText:this._filterText,
items:va,messages:{filterPlaceholder:qa.filterPlaceholder,noItems:qa.noItems,noMatches:qa.noMatches},onItemMouseEnter:({data:Aa})=>this._setCandidateFeature(Aa),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:Aa})=>this._setCandidateFeature(Aa,!0),onFilterChange:Aa=>this._filterText=Aa})))};ka._getSketchingTip=function(sa,qa){const {messages:na}=this;if("point"===sa)return na.tips.clickToAddPoint;if("polygon"===sa||"polyline"===sa){if(!qa)return na.tips.clickToStart;[qa]=
qa.geometry["polygon"===sa?"rings":"paths"];return"polygon"===sa&&4>qa?na.tips.clickToContinue:na.tips.clickToContinueThenDoubleClickToEnd}return na.tips.clickToAddFeature};ka._getLabel=function(sa){var qa=sa.layer;const {objectIdField:na}=qa;({attributes:sa}=sa);return(qa=M.getDisplayFieldName(qa))&&sa[qa]&&`${sa[qa]}`||N.substitute(this.messages.untitledFeatureTemplate,{id:sa[na]})};ka._handleDelete=function(){const {messages:sa,messagesCommon:qa}=this;this._prompt={title:sa.deleteWarningTitle,
message:sa.deleteWarningMessage,options:[{label:sa.keepFeature,type:"neutral",action:()=>this._prompt=null},{label:qa.delete,type:"positive",action:()=>{this.viewModel.deleteFeatureFromWorkflow();this._prompt=null}}]}};ka._handleSave=function(){this.viewModel.activeWorkflow.commit()};ka._handleAttachmentAdd=function(){const {_attachments:sa}=this,{activeWorkflow:qa}=this.viewModel;sa.addAttachment().then(()=>qa.previous())};ka._handleAttachmentUpdate=function(){const {_attachments:sa}=this,{activeWorkflow:qa}=
this.viewModel;sa.updateAttachment().then(()=>qa.previous())};ka._handleAttachmentDelete=function(){const {messages:sa,messagesCommon:qa}=this;this._prompt={title:sa.deleteAttachmentWarningTitle,message:sa.deleteAttachmentWarningMessage,options:[{label:sa.keepAttachment,type:"neutral",action:()=>this._prompt=null},{label:qa.delete,type:"positive",action:()=>{const {_attachments:na}=this,{activeWorkflow:pa}=this.viewModel;na.deleteAttachment(na.viewModel.activeAttachmentInfo).then(()=>{pa.previous();
this._prompt=null})}}]}};ka._handleAdd=function(){this.viewModel.canCreate&&this.viewModel.startCreateWorkflowAtFeatureTypeSelection()};ka._handleEdit=function(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()};ka._handleDone=function(){this.viewModel.cancelWorkflow({force:!0})};ka._handleBack=function(){const {messages:sa}=this,{activeWorkflow:qa}=this.viewModel,{stepId:na,data:pa,type:va}=qa,ja=()=>{qa.hasPreviousStep?qa.previous():this.viewModel.cancelWorkflow({force:!0})};
"editing-new-feature"===na||"editing-existing-feature"===na&&pa.edits.modified?this._prompt={title:"create"===va?sa.cancelAddTitle:sa.cancelEditTitle,message:"create"===va?sa.cancelAddWarningMessage:sa.cancelEditWarningMessage,options:[{label:"create"===va?sa.continueAdding:sa.continueEditing,type:"neutral",action:()=>this._prompt=null},{label:"create"===va?sa.discardFeature:sa.discardEdits,type:"negative",action:()=>{ja();this._prompt=null}}]}:ja()};return U}(r.HandleOwnerMixin(J));A.__decorate([t.property()],
w.prototype,"_attachments",void 0);A.__decorate([H.aliasOf("viewModel.activeWorkflow")],w.prototype,"activeWorkflow",void 0);A.__decorate([H.aliasOf("viewModel.allowedWorkflows")],w.prototype,"allowedWorkflows",void 0);A.__decorate([t.property()],w.prototype,"iconClass",void 0);A.__decorate([t.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w.prototype,"label",void 0);A.__decorate([H.aliasOf("viewModel.layerInfos")],w.prototype,"layerInfos",void 0);A.__decorate([t.property(),T.renderable(),
P.messageBundle("esri/widgets/Editor/t9n/Editor")],w.prototype,"messages",void 0);A.__decorate([t.property(),T.renderable(),P.messageBundle("esri/t9n/common")],w.prototype,"messagesCommon",void 0);A.__decorate([t.property(),T.renderable(),P.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],w.prototype,"messagesTemplates",void 0);A.__decorate([t.property()],w.prototype,"supportingWidgetDefaults",void 0);A.__decorate([H.aliasOf("viewModel.view")],w.prototype,"view",void 0);A.__decorate([t.property(),
T.renderable("viewModel.canCreate viewModel.canUpdate viewModel.failures viewModel.state viewModel.syncing viewModel.activeWorkflow.data.edits.modified".split(" ")),F.vmEvent(["workflow-cancel","workflow-commit"])],w.prototype,"viewModel",void 0);A.__decorate([O.accessibleHandler()],w.prototype,"_handleDelete",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleAttachmentAdd",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleAttachmentUpdate",null);A.__decorate([O.accessibleHandler()],
w.prototype,"_handleAttachmentDelete",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleAdd",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleEdit",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleDone",null);A.__decorate([O.accessibleHandler()],w.prototype,"_handleBack",null);return w=A.__decorate([G.subclass("esri.widgets.Editor")],w)});