// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/chunks/sortable.esm":function(){define(["exports"],function(ca){function A(a){A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return A(a)}function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return w.apply(this,
arguments)}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},e=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(c).filter(function(g){return Object.getOwnPropertyDescriptor(c,g).enumerable})));e.forEach(function(g){var m=c[g];g in a?Object.defineProperty(a,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[g]=m})}return a}function T(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),
g;for(g=0;g<e.length;g++){var m=e[g];0<=b.indexOf(m)||(c[m]=a[m])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),m=0;m<g.length;m++)e=g[m],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function aa(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function I(a,b,c){a.addEventListener(b,c,!C&&Ua)}function r(a,b,c){a.removeEventListener(b,c,!C&&Ua)}function H(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));
if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}function Y(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&H(a,b):H(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function fa(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(Ma,
" ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(Ma," ")}}function F(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function P(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=F(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&
(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function oa(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<e;b++)c(a[b],b);return a}return[]}function da(){var a=document.scrollingElement;return a?a:document.documentElement}function U(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==da()){var m=a.getBoundingClientRect();var q=m.top;var B=m.left;var G=m.bottom;var L=m.right;var N=m.height;
var W=m.width}else B=q=0,G=window.innerHeight,L=window.innerWidth,N=window.innerHeight,W=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!C)){do if(g&&g.getBoundingClientRect&&("none"!==F(g,"transform")||c&&"static"!==F(g,"position"))){G=g.getBoundingClientRect();q-=G.top+parseInt(F(g,"border-top-width"));B-=G.left+parseInt(F(g,"border-left-width"));G=q+m.height;L=B+m.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=P(g||a))&&a.a,g=a&&a.d,a&&(q/=g,B/=e,W/=e,N/=g,G=q+N,L=B+W));return{top:q,
left:B,bottom:G,right:L,width:W,height:N}}}function pa(a,b,c){var e=l(a,!0);for(a=U(a)[b];e;){b=U(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===da())break;e=l(e,!1)}return!1}function Aa(a,b,c){for(var e=0,g=0,m=a.children;g<m.length;){if("none"!==m[g].style.display&&m[g]!==p.ghost&&m[g]!==p.dragged&&Y(m[g],c.draggable,a,!1)){if(e===b)return m[g];e++}g++}return null}function la(a,b){for(a=a.lastElementChild;a&&(a===p.ghost||"none"===F(a,"display")||b&&!H(a,b));)a=a.previousElementSibling;
return a||null}function ha(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===p.clone||b&&!H(a,b)||c++;return c}function R(a){var b=0,c=0,e=da();if(a){do{var g=P(a),m=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*m}while(a!==e&&(a=a.parentNode))}return[b,c]}function v(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&b[e]===a[c][e])return Number(c);return-1}function l(a,b){if(!a||!a.getBoundingClientRect)return da();
var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=F(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return da()}function D(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===
Math.round(b.width)}function O(a,b){return function(){if(!Qa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Qa=setTimeout(function(){Qa=void 0},b)}}}function ba(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function na(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function xa(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==
F(c,"display")&&c!==p.ghost){a.push({target:c,rect:U(c)});var e=t({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=P(c,!0);g&&(e.top-=g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(v(a,{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,m=0;a.forEach(function(q){var B=0,G=q.target,L=G.fromRect,N=U(G),W=G.prevFromRect,ta=G.prevToRect;q=q.rect;var qa=P(G,!0);qa&&(N.top-=qa.f,N.left-=qa.e);
G.toRect=N;G.thisAnimationDuration&&D(W,N)&&!D(L,N)&&(q.top-N.top)/(q.left-N.left)===(L.top-N.top)/(L.left-N.left)&&(B=Math.sqrt(Math.pow(W.top-q.top,2)+Math.pow(W.left-q.left,2))/Math.sqrt(Math.pow(W.top-ta.top,2)+Math.pow(W.left-ta.left,2))*e.options.animation);D(N,L)||(G.prevFromRect=L,G.prevToRect=N,B||(B=e.options.animation),e.animate(G,q,N,B));B&&(g=!0,m=Math.max(m,B),clearTimeout(G.animationResetTimer),G.animationResetTimer=setTimeout(function(){G.animationTime=0;G.prevFromRect=null;G.fromRect=
null;G.prevToRect=null;G.thisAnimationDuration=null},B),G.thisAnimationDuration=B)});clearTimeout(b);g?b=setTimeout(function(){"function"===typeof c&&c()},m):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,m){if(m){F(c,"transition","");F(c,"transform","");var q=P(this.el),B=(e.left-g.left)/(q&&q.a||1);e=(e.top-g.top)/(q&&q.d||1);c.animatingX=!!B;c.animatingY=!!e;F(c,"transform","translate3d("+B+"px,"+e+"px,0)");F(c,"transition","transform "+
m+"ms"+(this.options.easing?" "+this.options.easing:""));F(c,"transform","translate3d(0,0,0)");"number"===typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){F(c,"transition","");F(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},m)}}}}function S(a){var b=t({putSortable:ya,cloneEl:n,targetEl:x,rootEl:V,oldIndex:Q,oldDraggableIndex:Ea,newIndex:Z,newDraggableIndex:Fa},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,m=b.cloneEl,q=b.toEl,B=b.fromEl,G=b.oldIndex,
L=b.newIndex,N=b.oldDraggableIndex,W=b.newDraggableIndex,ta=b.originalEvent,qa=b.putSortable,Ba=b.extraEventProperties;if(a=a||c&&c[Ca]){var ja=a.options,Ga="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||C||M?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=q||c;b.from=B||c;b.item=g||c;b.clone=m;b.oldIndex=G;b.newIndex=L;b.oldDraggableIndex=N;b.newDraggableIndex=W;b.originalEvent=ta;b.pullMode=qa?qa.lastPutMode:void 0;e=t({},
Ba,Ja.getEventProperties(e,a));for(var Ka in e)b[Ka]=e[Ka];c&&c.dispatchEvent(b);ja[Ga]&&ja[Ga].call(a,b)}}function p(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=w({},b);a[Ca]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,
this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(m,q){m.setData("Text",q.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,
y:0},supportPointer:!1!==p.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Ja.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);zb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?I(a,"pointerdown",this._onTapStart):(I(a,"mousedown",this._onTapStart),I(a,"touchstart",this._onTapStart));this.nativeDraggable&&(I(a,"dragover",
this),I(a,"dragenter",this));gb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);w(this,xa())}function ma(a,b,c,e,g,m,q,B){var G=a[Ca],L=G.options.onMove,N;if(!window.CustomEvent||C||M){var W=document.createEvent("Event");W.initEvent("move",!0,!0)}else W=new CustomEvent("move",{bubbles:!0,cancelable:!0});W.to=b;W.from=a;W.dragged=c;W.draggedRect=e;W.related=g||b;W.relatedRect=m||U(b);W.willInsertAfter=B;W.originalEvent=q;a.dispatchEvent(W);L&&(N=L.call(G,W,q));return N}function ra(a){a.draggable=
!1}function $a(){pb=!1}function Ra(a,b,c){c=U(la(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function Na(a,b,c,e,g,m,q,B){a=e?a.clientY:a.clientX;var G=e?c.height:c.width,L=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!q)if(B&&hb<G*g)if(!ab&&(1===bb?a>L+G*m/2:a<c-G*m/2)&&(ab=!0),ab)e=!0;else{if(1===bb?a<L+hb:a>c-hb)return-bb}else if(a>L+G*(1-g)/2&&a<
c-G*(1-g)/2)return b=ha(x)<ha(b)?1:-1,b;if(e||q)if(a<L+G*m/2||a>c-G*m/2)return a>L+G/2?1:-1;return 0}function J(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function d(a){ib.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&ib.push(c)}}function h(a){return setTimeout(a,0)}function k(){sa.forEach(function(a){clearInterval(a.pid)});sa=[]}function u(){}function z(){}var C=aa(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),
M=aa(/Edge/i),X=aa(/firefox/i),ia=aa(/safari/i)&&!aa(/chrome/i)&&!aa(/android/i),ua=aa(/iP(ad|od|hone)/i),Ha=aa(/chrome/i)&&aa(/android/i),Ua={capture:!1,passive:!1},Ma=/\s+/g,Qa,Ca="Sortable"+(new Date).getTime(),va=[],Sa={initializeByDefault:!0},Ja={mount:function(a){for(var b in Sa)!Sa.hasOwnProperty(b)||b in a||(a[b]=Sa[b]);va.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";va.forEach(function(m){if(b[m.pluginName]){if(b[m.pluginName][g])b[m.pluginName][g](t({sortable:b},
c));if(b.options[m.pluginName]&&b[m.pluginName][a])b[m.pluginName][a](t({sortable:b},c))}})},initializePlugins:function(a,b,c,e){va.forEach(function(m){var q=m.pluginName;if(a.options[q]||m.initializeByDefault)m=new m(a,b,a.options),m.sortable=a,m.options=a.options,a[q]=m,w(c,m.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};va.forEach(function(e){"function"===
typeof e.eventProperties&&w(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;va.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],c))});return e}},wa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=T(c,["evt"]);Ja.pluginEvent.bind(p)(a,b,t({dragEl:x,parentEl:ea,ghostEl:E,rootEl:V,nextEl:K,lastDownEl:f,cloneEl:n,cloneHidden:y,
dragStarted:cb,putSortable:ya,activeSortable:p.active,originalEvent:e,oldIndex:Q,oldDraggableIndex:Ea,newIndex:Z,newDraggableIndex:Fa,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){y=!0},cloneNowShown:function(){y=!1},dispatchSortableEvent:function(g){S({sortable:b,name:g,originalEvent:e})}},c))},x,ea,E,V,K,f,n,y,Q,Z,Ea,Fa,jb,ya,Xa=!1,kb=!1,gb=[],Va,Ia,qb,rb,Cb,Db,cb,Ya,bb,ab=!1,lb=!1,hb,Da,sb=[],pb=!1,ib=[],mb="undefined"!==typeof document,Eb=M||C?"cssFloat":"float",Ib=mb&&
!Ha&&!ua&&"draggable"in document.createElement("div"),Fb=function(){if(mb){if(C)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,b){var c=F(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),g=Aa(a,0,b);a=Aa(a,1,b);var m=g&&F(g);b=a&&F(a);var q=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+U(g).width,B=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+
U(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&m["float"]&&"none"!==m["float"]?(c="left"===m["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):g&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===m.display||q>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&q+B>e)?"vertical":"horizontal"},Jb=
function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var m=c?b.left:b.top,q=c?b.right:b.bottom;b=c?b.width:b.height;return e===m||g===q||e+a/2===m+b/2},Kb=function(a,b){var c;gb.some(function(e){if(!la(e)){var g=U(e),m=e[Ca].options.emptyInsertThreshold,q=a>=g.left-m&&a<=g.right+m;g=b>=g.top-m&&b<=g.bottom+m;if(m&&q&&g)return c=e}});return c},zb=function(a){function b(g,m){return function(q,B,G,L){var N=q.options.group.name&&B.options.group.name&&q.options.group.name===B.options.group.name;
if(null==g&&(m||N))return!0;if(null==g||!1===g)return!1;if(m&&"clone"===g)return g;if("function"===typeof g)return b(g(q,B,G,L),m)(q,B,G,L);q=(m?q:B).options.group.name;return!0===g||"string"===typeof g&&g===q||g.join&&-1<g.indexOf(q)}}var c={},e=a.group;e&&"object"==A(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Ab=function(){!Fb&&E&&F(E,"display","none")},Bb=function(){!Fb&&E&&F(E,"display","")};mb&&document.addEventListener("click",
function(a){if(kb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),kb=!1},!0);var Wa=function(a){if(x){a=a.touches?a.touches[0]:a;var b=Kb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[Ca]._onDragOver(c)}}},Lb=function(a){x&&x.parentNode[Ca]._isOutsideThisEl(a.target)};p.prototype={constructor:p,_isOutsideThisEl:function(a){this.el.contains(a)||
a===this.el||(Ya=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,x):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,m=a.type,q=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,B=(q||a).target,G=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||B,L=e.filter;d(c);if(!(x||/mousedown|pointerdown/.test(m)&&0!==a.button||
e.disabled||G.isContentEditable||(B=Y(B,e.draggable,c,!1),B&&B.animated||f===B))){Q=ha(B);Ea=ha(B,e.draggable);if("function"===typeof L){if(L.call(this,a,B,this)){S({sortable:b,rootEl:G,name:"filter",targetEl:B,toEl:c,fromEl:c});wa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(L&&(L=L.split(",").some(function(N){if(N=Y(G,N.trim(),c,!1))return S({sortable:b,rootEl:N,name:"filter",targetEl:B,fromEl:c,toEl:c}),wa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();
return}e.handle&&!Y(G,e.handle,c,!1)||this._prepareDragStart(a,q,B)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,m=e.options,q=g.ownerDocument;if(c&&!x&&c.parentNode===g){var B=U(c);V=g;x=c;ea=x.parentNode;K=x.nextSibling;f=c;jb=m.group;p.dragged=x;Va={target:x,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Va.clientX-B.left;Db=Va.clientY-B.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;x.style["will-change"]="all";c=function(){wa("delayEnded",e,{evt:a});p.eventCanceled?e._onDrop():
(e._disableDelayedDragEvents(),!X&&e.nativeDraggable&&(x.draggable=!0),e._triggerDragStart(a,b),S({sortable:e,name:"choose",originalEvent:a}),fa(x,m.chosenClass,!0))};m.ignore.split(",").forEach(function(G){oa(x,G.trim(),ra)});I(q,"dragover",Wa);I(q,"mousemove",Wa);I(q,"touchmove",Wa);I(q,"mouseup",e._onDrop);I(q,"touchend",e._onDrop);I(q,"touchcancel",e._onDrop);X&&this.nativeDraggable&&(this.options.touchStartThreshold=4,x.draggable=!0);wa("delayStart",this,{evt:a});!m.delay||m.delayOnTouchOnly&&
!b||this.nativeDraggable&&(M||C)?c():p.eventCanceled?this._onDrop():(I(q,"mouseup",e._disableDelayedDrag),I(q,"touchend",e._disableDelayedDrag),I(q,"touchcancel",e._disableDelayedDrag),I(q,"mousemove",e._delayedDragTouchMoveHandler),I(q,"touchmove",e._delayedDragTouchMoveHandler),m.supportPointer&&I(q,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,m.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),
Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){x&&ra(x);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;r(a,"mouseup",this._disableDelayedDrag);r(a,"touchend",this._disableDelayedDrag);r(a,"touchcancel",this._disableDelayedDrag);r(a,"mousemove",this._delayedDragTouchMoveHandler);
r(a,"touchmove",this._delayedDragTouchMoveHandler);r(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?I(document,"pointermove",this._onTouchMove):b?I(document,"touchmove",this._onTouchMove):I(document,"mousemove",this._onTouchMove):(I(x,"dragend",this),I(V,"dragstart",this._onDragStart));try{document.selection?h(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},
_dragStarted:function(a,b){Xa=!1;if(V&&x){wa("dragStarted",this,{evt:b});this.nativeDraggable&&I(document,"dragover",Lb);var c=this.options;!a&&fa(x,c.dragClass,!1);fa(x,c.ghostClass,!0);p.active=this;a&&this._appendGhost();S({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(Ia){this._lastX=Ia.clientX;this._lastY=Ia.clientY;Ab();for(var a=document.elementFromPoint(Ia.clientX,Ia.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(Ia.clientX,
Ia.clientY);if(a===b)break;b=a}x.parentNode[Ca]._isOutsideThisEl(a);if(b){do{if(b[Ca]){var c=void 0;if((c=b[Ca]._onDragOver({clientX:Ia.clientX,clientY:Ia.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Va){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=E&&P(E,!0),m=E&&g&&g.a,q=E&&g&&g.d,B=ua&&Da&&R(Da);m=(b.clientX-Va.clientX+e.x)/(m||1)+(B?B[0]-sb[0]:0)/(m||1);e=(b.clientY-
Va.clientY+e.y)/(q||1)+(B?B[1]-sb[1]:0)/(q||1);if(!p.active&&!Xa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}E&&(g?(g.e+=m-(qb||0),g.f+=e-(rb||0)):g={a:1,b:0,c:0,d:1,e:m,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),F(E,"webkitTransform",c),F(E,"mozTransform",c),F(E,"msTransform",c),F(E,"transform",c),qb=m,rb=e,Ia=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!E){var a=
this.options.fallbackOnBody?document.body:V,b=U(x,!0,ua,!0,a),c=this.options;if(ua){for(Da=a;"static"===F(Da,"position")&&"none"===F(Da,"transform")&&Da!==document;)Da=Da.parentNode;Da!==document.body&&Da!==document.documentElement?(Da===document&&(Da=da()),b.top+=Da.scrollTop,b.left+=Da.scrollLeft):Da=da();sb=R(Da)}E=x.cloneNode(!0);fa(E,c.ghostClass,!1);fa(E,c.fallbackClass,!0);fa(E,c.dragClass,!0);F(E,"transition","");F(E,"transform","");F(E,"box-sizing","border-box");F(E,"margin",0);F(E,"top",
b.top);F(E,"left",b.left);F(E,"width",b.width);F(E,"height",b.height);F(E,"opacity","0.8");F(E,"position",ua?"absolute":"fixed");F(E,"zIndex","100000");F(E,"pointerEvents","none");p.ghost=E;a.appendChild(E);F(E,"transform-origin",Cb/parseInt(E.style.width)*100+"% "+Db/parseInt(E.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;wa("dragStart",this,{evt:a});p.eventCanceled?this._onDrop():(wa("setupClone",this),p.eventCanceled||(n=na(x),n.draggable=!1,n.style["will-change"]=
"",this._hideClone(),fa(n,this.options.chosenClass,!1),p.clone=n),c.cloneId=h(function(){wa("clone",c);p.eventCanceled||(c.options.removeCloneOnHide||V.insertBefore(n,x),c._hideClone(),S({sortable:c,name:"clone"}))}),!b&&fa(x,g.dragClass,!0),b?(kb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(r(document,"mouseup",c._onDrop),r(document,"touchend",c._onDrop),r(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,x)),I(document,"drop",c),F(x,"transform","translateZ(0)")),
Xa=!0,c._dragStartId=h(c._dragStarted.bind(c,b,a)),I(document,"selectstart",c),cb=!0,ia&&F(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ta,nb){wa(Ta,ja,t({evt:a,isOwner:ta,axis:Ka?"vertical":"horizontal",revert:G,dragRect:Oa,targetRect:B,canSort:qa,fromSortable:Ba,target:q,completed:e,onMove:function(Gb,Mb){return ma(V,m,x,Oa,Gb,U(Gb),a,Mb)},changed:g},nb))}function c(){b("dragOverAnimationCapture");ja.captureAnimationState();ja!==Ba&&Ba.captureAnimationState()}function e(Ta){b("dragOverCompleted",
{insertion:Ta});Ta&&(ta?W._hideClone():W._showClone(ja),ja!==Ba&&(fa(x,ya?ya.options.ghostClass:W.options.ghostClass,!1),fa(x,L.ghostClass,!0)),ya!==ja&&ja!==p.active?ya=ja:ja===p.active&&ya&&(ya=null),Ba===ja&&(ja._ignoreWhileAnimating=q),ja.animateAll(function(){b("dragOverAnimationComplete");ja._ignoreWhileAnimating=null}),ja!==Ba&&(Ba.animateAll(),Ba._ignoreWhileAnimating=null));if(q===x&&!x.animated||q===m&&!q.animated)Ya=null;L.dragoverBubble||a.rootEl||q===document||(x.parentNode[Ca]._isOutsideThisEl(a.target),
!Ta&&Wa(a));!L.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return Ga=!0}function g(){Z=ha(x);Fa=ha(x,L.draggable);S({sortable:ja,name:"change",toEl:m,newIndex:Z,newDraggableIndex:Fa,originalEvent:a})}var m=this.el,q=a.target,B,G,L=this.options,N=L.group,W=p.active,ta=jb===N,qa=L.sort,Ba=ya||W,ja=this,Ga=!1;if(!pb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();q=Y(q,L.draggable,m,!0);b("dragOver");if(p.eventCanceled)return Ga;if(x.contains(a.target)||q.animated&&q.animatingX&&
q.animatingY||ja._ignoreWhileAnimating===q)return e(!1);kb=!1;if(W&&!L.disabled&&(ta?qa||(G=!V.contains(x)):ya===this||(this.lastPutMode=jb.checkPull(this,W,x,a))&&N.checkPut(this,W,x,a))){var Ka="vertical"===this._getDirection(a,q);var Oa=U(x);b("dragOverValid");if(p.eventCanceled)return Ga;if(G)return ea=V,c(),this._hideClone(),b("revert"),p.eventCanceled||(K?V.insertBefore(x,K):V.appendChild(x)),e(!0);N=la(m,L.draggable);if(!N||Ra(a,Ka,this)&&!N.animated){if(N===x)return e(!1);N&&m===a.target&&
(q=N);q&&(B=U(q));if(!1!==ma(V,m,x,Oa,q,B,a,!!q))return c(),m.appendChild(x),ea=m,g(),e(!0)}else if(q.parentNode===m){B=U(q);var za=0;za=x.parentNode!==m;var ka=!Jb(x.animated&&x.toRect||Oa,q.animated&&q.toRect||B,Ka);N=Ka?"top":"left";var Pa=pa(q,"top","top")||pa(x,"top","top"),db=Pa?Pa.scrollTop:void 0;if(Ya!==q){var eb=B[N];ab=!1;lb=!ka&&L.invertSwap||za}za=Na(a,q,B,Ka,ka?1:L.swapThreshold,null==L.invertedSwapThreshold?L.swapThreshold:L.invertedSwapThreshold,lb,Ya===q);if(0!==za){ka=ha(x);do{ka-=
za;var La=ea.children[ka]}while(La&&("none"===F(La,"display")||La===E))}if(0===za||La===q)return e(!1);Ya=q;bb=za;La=q.nextElementSibling;ka=!1;ka=1===za;za=ma(V,m,x,Oa,q,B,a,ka);if(!1!==za){if(1===za||-1===za)ka=1===za;pb=!0;setTimeout($a,30);c();ka&&!La?m.appendChild(x):q.parentNode.insertBefore(x,ka?La:q);Pa&&ba(Pa,0,db-Pa.scrollTop);ea=x.parentNode;void 0===eb||lb||(hb=Math.abs(eb-U(q)[N]));g();return e(!0)}}if(m.contains(x))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){r(document,
"mousemove",this._onTouchMove);r(document,"touchmove",this._onTouchMove);r(document,"pointermove",this._onTouchMove);r(document,"dragover",Wa);r(document,"mousemove",Wa);r(document,"touchmove",Wa)},_offUpEvents:function(){var a=this.el.ownerDocument;r(a,"mouseup",this._onDrop);r(a,"touchend",this._onDrop);r(a,"pointerup",this._onDrop);r(a,"touchcancel",this._onDrop);r(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;Z=ha(x);Fa=ha(x,c.draggable);wa("drop",this,{evt:a});
ea=x&&x.parentNode;Z=ha(x);Fa=ha(x,c.draggable);if(!p.eventCanceled&&(ab=lb=Xa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(r(document,"drop",this),r(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ia&&F(document.body,"user-select",""),F(x,"transform",""),a&&(cb&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),
(V===ea||ya&&"clone"!==ya.lastPutMode)&&n&&n.parentNode&&n.parentNode.removeChild(n),x&&(this.nativeDraggable&&r(x,"dragend",this),ra(x),x.style["will-change"]="",cb&&!Xa&&fa(x,ya?ya.options.ghostClass:this.options.ghostClass,!1),fa(x,this.options.chosenClass,!1),S({sortable:this,name:"unchoose",toEl:ea,newIndex:null,newDraggableIndex:null,originalEvent:a}),V!==ea?(0<=Z&&(S({rootEl:ea,name:"add",toEl:ea,fromEl:V,originalEvent:a}),S({sortable:this,name:"remove",toEl:ea,originalEvent:a}),S({rootEl:ea,
name:"sort",toEl:ea,fromEl:V,originalEvent:a}),S({sortable:this,name:"sort",toEl:ea,originalEvent:a})),ya&&ya.save()):Z!==Q&&0<=Z&&(S({sortable:this,name:"update",toEl:ea,originalEvent:a}),S({sortable:this,name:"sort",toEl:ea,originalEvent:a})),p.active)))){if(null==Z||-1===Z)Z=Q,Fa=Ea;S({sortable:this,name:"end",toEl:ea,originalEvent:a});this.save()}this._nulling()},_nulling:function(){wa("nulling",this);V=x=ea=E=K=n=f=y=Va=Ia=cb=Z=Fa=Q=Ea=Ya=bb=ya=jb=p.dragged=p.ghost=p.clone=p.active=null;ib.forEach(function(a){a.checked=
!0});ib.length=qb=rb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":x&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,m=this.options;e<g;e++)b=c[e],Y(b,m.draggable,this.el,!1)&&a.push(b.getAttribute(m.dataIdAttr)||J(b));return a},sort:function(a){var b=
{},c=this.el;this.toArray().forEach(function(e,g){g=c.children[g];Y(g,this.options.draggable,c,!1)&&(b[e]=g)},this);a.forEach(function(e){b[e]&&(c.removeChild(b[e]),c.appendChild(b[e]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return Y(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ja.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&zb(c)},destroy:function(){wa("destroy",
this);var a=this.el;a[Ca]=null;r(a,"mousedown",this._onTapStart);r(a,"touchstart",this._onTapStart);r(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(r(a,"dragover",this),r(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();gb.splice(gb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){y||(wa("hideClone",this),p.eventCanceled||(F(n,"display","none"),this.options.removeCloneOnHide&&
n.parentNode&&n.parentNode.removeChild(n),y=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():y&&(wa("showClone",this),p.eventCanceled||(V.contains(x)&&!this.options.group.revertClone?V.insertBefore(n,x):K?V.insertBefore(n,K):V.appendChild(n),this.options.group.revertClone&&this.animate(x,n),F(n,"display",""),y=!1))}};mb&&I(document,"touchmove",function(a){(p.active||Xa)&&a.cancelable&&a.preventDefault()});p.utils={on:I,off:r,css:F,find:oa,is:function(a,b){return!!Y(a,b,a,!1)},
extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:O,closest:Y,toggleClass:fa,clone:na,index:ha,nextTick:h,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:Aa};p.get=function(a){return a[Ca]};p.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));
e.utils&&(p.utils=t({},p.utils,e.utils));Ja.mount(e)})};p.create=function(a,b){return new p(a,b)};p.version="1.10.2";var sa=[],fb,tb,ub=!1,vb,wb,ob,Za,xb=O(function(a,b,c,e){if(b.scroll){var g=(a.touches?a.touches[0]:a).clientX,m=(a.touches?a.touches[0]:a).clientY,q=b.scrollSensitivity,B=b.scrollSpeed,G=da(),L=!1;if(tb!==c){tb=c;k();fb=b.scroll;var N=b.scrollFn;!0===fb&&(fb=l(c,!0))}c=0;var W=fb;do{var ta=W,qa=U(ta),Ba=qa.top,ja=qa.bottom,Ga=qa.left,Ka=qa.right,Oa=qa.width;qa=qa.height;var za=void 0,
ka=void 0,Pa=ta.scrollWidth,db=ta.scrollHeight;ka=F(ta);var eb=ta.scrollLeft,La=ta.scrollTop;ta===G?(za=Oa<Pa&&("auto"===ka.overflowX||"scroll"===ka.overflowX||"visible"===ka.overflowX),ka=qa<db&&("auto"===ka.overflowY||"scroll"===ka.overflowY||"visible"===ka.overflowY)):(za=Oa<Pa&&("auto"===ka.overflowX||"scroll"===ka.overflowX),ka=qa<db&&("auto"===ka.overflowY||"scroll"===ka.overflowY));Ga=za&&(Math.abs(Ka-g)<=q&&eb+Oa<Pa)-(Math.abs(Ga-g)<=q&&!!eb);Ba=ka&&(Math.abs(ja-m)<=q&&La+qa<db)-(Math.abs(Ba-
m)<=q&&!!La);if(!sa[c])for(ja=0;ja<=c;ja++)sa[ja]||(sa[ja]={});if(sa[c].vx!=Ga||sa[c].vy!=Ba||sa[c].el!==ta)if(sa[c].el=ta,sa[c].vx=Ga,sa[c].vy=Ba,clearInterval(sa[c].pid),0!=Ga||0!=Ba)L=!0,sa[c].pid=setInterval(function(){e&&0===this.layer&&p.active._onTouchMove(ob);var Ta=sa[this.layer].vy?sa[this.layer].vy*B:0,nb=sa[this.layer].vx?sa[this.layer].vx*B:0;"function"===typeof N&&"continue"!==N.call(p.dragged.parentNode[Ca],nb,Ta,a,ob,sa[this.layer].el)||ba(sa[this.layer].el,nb,Ta)}.bind({layer:c}),
24);c++}while(b.bubbleScroll&&W!==G&&(W=l(W,!1)));ub=L}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,m=a.dispatchSortableEvent,q=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||g,q(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(m("spill"),this.onSpill({dragEl:e,putSortable:c})))};u.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},
onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Aa(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Hb};w(u,{pluginName:"revertOnSpill"});z.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};
w(z,{pluginName:"removeOnSpill"});p.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):this.options.supportPointer?I(document,"pointermove",this._handleFallbackAutoScroll):b.touches?I(document,"touchmove",this._handleFallbackAutoScroll):
I(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?r(document,"dragover",this._handleAutoScroll):(r(document,"pointermove",this._handleFallbackAutoScroll),r(document,"touchmove",this._handleFallbackAutoScroll),r(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Za);k();clearTimeout(Qa);Qa=void 0},nulling:function(){ob=
tb=fb=ub=Za=vb=wb=null;sa.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,m=(b.touches?b.touches[0]:b).clientY,q=document.elementFromPoint(g,m);ob=b;if(c||M||C||ia){xb(b,this.options,q,c);var B=l(q,!0);!ub||Za&&g===vb&&m===wb||(Za&&clearInterval(Za),Za=setInterval(function(){var G=l(document.elementFromPoint(g,m),!0);G!==B&&(B=G,k());xb(b,e.options,G,c)},10),vb=g,wb=m)}else this.options.bubbleScroll&&
l(q,!0)!==da()?xb(b,this.options,l(q,!1),!1):k()}};return w(a,{pluginName:"scroll",initializeByDefault:!0})});p.mount(z,u);ca.Sortable=p})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(ca){function A(r){if(r)return null!=r.listMode?r.listMode:void 0}function w(r){if(r)return null!=r.minScale?r.minScale:void 0}function t(r){if(r)return null!=r.maxScale?r.maxScale:void 0}function T(r){if(r&&r.listMode!==I.hideChildren&&"wmts"!==r.type)return"group"===r.type?
"layers":"sublayers"}function aa(r,H){r&&r.sort((Y,fa)=>{Y=H.indexOf(Y.uid);fa=H.indexOf(fa.uid);return Y>fa?-1:Y<fa?1:0})}const I={hide:"hide",hideChildren:"hide-children"};ca.canDisplayLayer=function(r){return A(r)!==I.hide};ca.canSortSublayers=function(r){r=r&&(r.get("layer.layer")||r.layer);if(!r)return!1;r=r.get("capabilities.exportMap.supportsSublayersChanges");return"boolean"===typeof r?r:!0};ca.findLayerListMode=A;ca.findLayerMaxScale=t;ca.findLayerMinScale=w;ca.findLayerVisibilityMode=function(r){if(!r)return"inherited";
var H=r.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof H)return H?"independent":"inherited";H=r.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof H?H?"independent":"inherited":null!=r.visibilityMode?r.visibilityMode:"independent"};ca.findSelectedItem=function(r,H){var Y;const fa=null==(Y=r.layer)?void 0:Y.uid;return fa&&H.find(F=>{var P;return(null==(P=F.layer)?void 0:P.uid)===fa})};ca.getItemLayers=function(r){return(r=null==r?
void 0:r.layer)&&"group"===r.type?r.layers:null};ca.getNormalizedChildLayerProperty=T;ca.isLayerOutsideScaleRange=function(r,H){if(!r||isNaN(H))return!1;var Y=w(r);r=t(r);Y=!isNaN(Y)&&0<Y&&H>Y;H=!isNaN(r)&&0<r&&H<r;return Y||H};ca.sortChildLayersToIds=function(r,H){if(r=null==r?void 0:r.layer){var Y=T(r);Y&&(r=r.get(Y),aa(r,H))}};ca.sortLayersToIds=aa;Object.defineProperty(ca,"__esModule",{value:!0})})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Collection ../../core/Identifiable ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../core/watchUtils ../../core/HandleOwner ../../layers/support/Sublayer ../../support/actions/ActionSlider ./ListItemPanel ./support/layerListUtils".split(" "),
function(ca,A,w,t,T,aa,I,r,H,Y,fa,F,P,oa,da,U,pa,Aa,la,ha,R,v,l,D){var O;w=oa.ofType({key:"type",defaultKeyValue:"button",base:U,typeMap:{button:pa,toggle:Aa,slider:v}});const ba=oa.ofType(w);P=O=function(na){function xa(p){p=na.call(this,p)||this;p.actionsSections=new ba;p.actionsOpen=!1;p.children=new (oa.ofType(O));p.childrenSortable=!0;p.error=null;p.layer=null;p.layerView=null;p.open=!1;p.panel=null;p.parent=null;p.sortable=!0;p.view=null;p.visible=null;return p}ca._inheritsLoose(xa,na);var S=
xa.prototype;S.initialize=function(){this.handles.add([la.init(this,"layer",p=>this._watchLayerProperties(p)),la.init(this,"view",p=>this._updateChildren(p)),la.init(this,"panel",p=>this._setListItemOnPanel(p)),la.init(this,["layer","view"],()=>this._getLayerView())])};S.destroy=function(){this.view=null};S.castPanel=function(p){this.get("panel.open")&&!p.hasOwnProperty("open")&&(p.open=!0);return p?new l(p):null};S.clone=function(){return new O({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,
children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};S._setListItemOnPanel=function(p){p&&(p.listItem=this)};S._updateChildren=function(p){const ma=this.children;ma&&ma.forEach(ra=>ra.view=p)};S._addChildren=function(p){this.handles.remove("child-list-mode");this.children.removeAll();if(p){p.forEach(ra=>{this.handles.add(la.watch(ra,"listMode",()=>this._addChildren(p)),"child-list-mode")});var ma=[];p.filter(ra=>"hide"!==
D.findLayerListMode(ra)).forEach(ra=>{D.canDisplayLayer(ra)&&(ra=new O({layer:ra,parent:this,view:this.view}),ma.unshift(ra))});this.children.addMany(ma)}};S._watchSublayerChanges=function(p){p&&this.handles.add(p.on("change",()=>{this._addChildren(p)}),"layer")};S._initializeChildLayers=function(p){this._addChildren(p);this._watchSublayerChanges(p)};S._watchLayerProperties=function(p){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),p))if(this.handles.add(la.watch(p,
"listMode",()=>this._watchLayerProperties(p)),"layer"),"hide-children"===D.findLayerListMode(p))this.children.removeAll();else{var ma=D.getNormalizedChildLayerProperty(p);ma&&this.handles.add(la.init(p,ma,()=>{p.hasOwnProperty(ma)&&this._initializeChildLayers(p[ma])}),"layer")}};S._getLayerView=async function(){const {layer:p,view:ma}=this;if(p&&ma)try{const ra=await ma.whenLayerView(p);ra.layer===this.layer&&this._set("layerView",ra)}catch{}};S._isLayerUpdating=function(p){return p instanceof R?
!1:p&&"loading"===p.loadStatus};ca._createClass(xa,[{key:"title",get:function(){const p=this.get("layer.layer");return(!p||p&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(p){void 0===p?this._clearOverride("title"):this._override("title",p)}},{key:"updating",get:function(){const p=this.layerView;return p?p.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!D.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",
get:function(){return D.findLayerVisibilityMode(this.layer)}}]);return xa}(da.IdentifiableMixin(ha.HandleOwnerMixin(P)));A.__decorate([T.property({type:ba})],P.prototype,"actionsSections",void 0);A.__decorate([T.property()],P.prototype,"actionsOpen",void 0);A.__decorate([T.property({type:oa})],P.prototype,"children",void 0);A.__decorate([T.property()],P.prototype,"childrenSortable",void 0);A.__decorate([aa.aliasOf("layer.loadError?")],P.prototype,"error",void 0);A.__decorate([T.property()],P.prototype,
"layer",void 0);A.__decorate([T.property({readOnly:!0})],P.prototype,"layerView",void 0);A.__decorate([T.property()],P.prototype,"open",void 0);A.__decorate([T.property({type:l})],P.prototype,"panel",void 0);A.__decorate([I.cast("panel")],P.prototype,"castPanel",null);A.__decorate([T.property()],P.prototype,"parent",void 0);A.__decorate([T.property()],P.prototype,"sortable",void 0);A.__decorate([T.property({dependsOn:["layer.layer?.loaded","layer.title"]})],P.prototype,"title",null);A.__decorate([T.property({dependsOn:["layer.loadStatus?",
"layerView.updating"],readOnly:!0})],P.prototype,"updating",null);A.__decorate([T.property({value:null})],P.prototype,"view",void 0);A.__decorate([aa.aliasOf("layer.visible")],P.prototype,"visible",void 0);A.__decorate([T.property({dependsOn:["layer.minScale?","layer.maxScale?","view.scale"],readOnly:!0})],P.prototype,"visibleAtCurrentScale",null);A.__decorate([T.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],
readOnly:!0})],P.prototype,"visibilityMode",null);return P=O=A.__decorate([H.subclass("esri.widgets.LayerList.ListItem")],P)})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/PropertyOrigin ../../portal/support/resourceExtension ../../core/promiseUtils ../../geometry/Extent ../../geometry ../../core/Collection ./fieldUtils ../../core/Identifiable ../../PopupTemplate ../../request ../../core/Loadable ../../chunks/symbols ../../renderers/Renderer ../../renderers/ClassBreaksRenderer ../../renderers/UniqueValueRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/SimpleRenderer ../../renderers/support/types ../../renderers/support/jsonUtils ../../core/MultiOriginJSONSupport ./Field ./FieldsIndex ./LabelClass ./FeatureType ./source/MapLayerSource ../../chunks/DataLayerSource ../../support/popupUtils ../../tasks/support/Query ../../core/HandleOwner".split(" "),
function(ca,A,w,t,T,aa,I,r,H,Y,fa,F,P,oa,da,U,pa,Aa,la,ha,R,v,l,D,O,ba,na,xa,S,p,ma,ra,$a,Ra,Na,J,d,h,k,u,z,C,M,X,ia,ua,Ha,Ua){function Ma(E){return E&&"esriSMS"===E.type}function Qa(E,V,K){var f;return{ignoreOrigin:!0,enabled:K?"map-image"===(null==(f=K.layer)?void 0:f.type)&&(K.writeSublayerStructure||this.originIdOf(V)>=Aa.nameToId(K.origin)):!1}}function Ca(E,V,K){var f;return{enabled:K?"tile"===(null==(f=K.layer)?void 0:f.type)&&this._isOverridden(V):!1}}function va(E,V,K){return{ignoreOrigin:!0,
enabled:K&&K.writeSublayerStructure||!1}}function Sa(E,V,K){return{ignoreOrigin:!0,enabled:K?K.writeSublayerStructure||this.originIdOf(V)>=Aa.nameToId(K.origin):!1}}var Ja;const wa=aa.getLogger("esri.layers.support.Sublayer");let x=0;const ea=new Set;ea.add("layer");ea.add("parent");ea.add("loaded");ea.add("loadStatus");ea.add("loadError");ea.add("loadWarnings");t=Ja=function(E){function V(f){f=E.call(this,f)||this;f.capabilities=void 0;f.fields=null;f.fullExtent=null;f.globalIdField=null;f.legendEnabled=
!0;f.objectIdField=null;f.popupEnabled=!0;f.popupTemplate=null;f.sourceJSON=null;f.title=null;f.typeIdField=null;f.types=null;return f}A._inheritsLoose(V,E);var K=V.prototype;K.load=async function(f){this.addResolvingPromise((async()=>{var n;if(!this.layer&&!this.url)throw new da("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let y=null;if(!this.layer||2<this.originIdOf("url")||"data-layer"===(null==(n=this.source)?void 0:n.type))y=(await na(this.url,
{responseType:"json",query:{f:"json"},...f})).data;else{var Q;n=this.id;"map-layer"===(null==(Q=this.source)?void 0:Q.type)&&(n=this.source.mapLayerId);y=await this.layer.fetchSublayerInfo(n,f)}y&&(this.sourceJSON=y,this.read({layerDefinition:y},{origin:"service"}))})());return this};K.readCapabilities=function(f,n){n=n.layerDefinition||n;f=(f=n.capabilities||f)?f.toLowerCase().split(",").map(y=>y.trim()):[];return{exportMap:{supportsModification:!!n.canModifyLayer},operations:{supportsQuery:-1!==
f.indexOf("query")}}};K.readGlobalIdFieldFromService=function(f,n){n=n.layerDefinition||n;if(n.globalIdField)return n.globalIdField;if(n.fields)for(const y of n.fields)if("esriFieldTypeGlobalID"===y.type)return y.name};K.writeLabelingInfo=function(f,n,y,Q){f&&f.length&&(n.layerDefinition={drawingInfo:{labelingInfo:f.map(Z=>Z.write({},Q))}})};K.readMinScale=function(f,n){return n.minScale||n.layerDefinition&&n.layerDefinition.minScale||0};K.readMaxScale=function(f,n){return n.maxScale||n.layerDefinition&&
n.layerDefinition.maxScale||0};K.readObjectIdFieldFromService=function(f,n){n=n.layerDefinition||n;if(n.objectIdField)return n.objectIdField;if(n.fields)for(const y of n.fields)if("esriFieldTypeOID"===y.type)return y.name};K.readOpacity=function(f,n){f=n.layerDefinition;return 1-.01*(null!=f.transparency?f.transparency:f.drawingInfo.transparency)};K.writeOpacity=function(f,n,y,Q){n.layerDefinition={drawingInfo:{transparency:100-100*f}}};K.writeParent=function(f,n){n.parentLayerId=this.parent&&this.parent!==
this.layer?I.ensureInteger(this.parent.id):-1};K.castSublayers=function(f){return I.ensureType(l.ofType(Ja),f)};K.writeSublayers=function(f,n,y){this.get("sublayers.length")&&(n[y]=this.sublayers.map(Q=>Q.id).toArray().reverse())};K.readTypeIdField=function(f,n){n=n.layerDefinition||n;if(f=n.typeIdField)if(n=D.getField(n.fields,f))return n.name;return null};K.writeVisible=function(f,n,y,Q){n[y]=this.getAtOrigin("defaultVisibility","service")||f};K.clone=function(){const {store:f}=r.getProperties(this),
n=new Ja;r.getProperties(n).store=f.clone(ea);this.url;n._lastParsedUrl=this._lastParsedUrl;return n};K.createPopupTemplate=function(f){return ua.createPopupTemplate(this,f)};K.createQuery=function(){return new Ha({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};K.createFeatureLayer=async function(){var f,n;if(this.hasOwnProperty("sublayers"))return null;const y=null==(f=this.layer)?void 0:f.parsedUrl;f=new (await new Promise(function(Q,Z){ca(["../FeatureLayer"],function(Ea){Q(Object.freeze({__proto__:null,
"default":Ea}))},Z)})).default({url:y.path});y&&this.source&&("map-layer"===this.source.type?f.layerId=this.source.mapLayerId:f.dynamicDataSource=this.source);null!=this.layer.refreshInterval&&(f.refreshInterval=this.layer.refreshInterval);this.definitionExpression&&(f.definitionExpression=this.definitionExpression);2<this.originIdOf("labelingInfo")&&(f.labelingInfo=T.clone(this.labelingInfo));0<this.originIdOf("labelsVisible")&&(f.labelsVisible=this.labelsVisible);0<this.originIdOf("legendEnabled")&&
(f.legendEnabled=this.legendEnabled);0<this.originIdOf("visible")&&(f.visible=this.visible);0<this.originIdOf("minScale")&&(f.minScale=this.minScale);0<this.originIdOf("maxScale")&&(f.maxScale=this.maxScale);0<this.originIdOf("opacity")&&(f.opacity=this.opacity);0<this.originIdOf("popupTemplate")&&(f.popupTemplate=T.clone(this.popupTemplate));2<this.originIdOf("renderer")&&(f.renderer=T.clone(this.renderer));"data-layer"===(null==(n=this.source)?void 0:n.type)&&(f.dynamicDataSource=this.source.clone());
0<this.originIdOf("title")&&(f.title=this.title);"map-image"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(f.customParameters=this.layer.customParameters);"tile"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(f.customParameters=this.layer.customParameters);return f};K.getFeatureType=function(f){const {typeIdField:n,types:y}=this;if(!n||!f)return null;const Q=f.attributes?f.attributes[n]:void 0;if(null==Q)return null;let Z=null;y.some(Ea=>{const {id:Fa}=Ea;if(null==
Fa)return!1;Fa.toString()===Q.toString()&&(Z=Ea);return!!Z});return Z};K.getFieldDomain=function(f,n){return(n=this.getFeatureType(n&&n.feature))&&(n=n.domains&&n.domains[f])&&"inherited"!==n.type?n:this._getLayerDomain(f)};K.queryFeatures=function(f=this.createQuery(),n){return this.load().then(()=>{if(!this.get("capabilities.operations.supportsQuery"))throw new da("Sublayer.queryFeatures","this layer doesn't support queries.");return ha.all([new Promise(function(y,Q){ca(["../../tasks/operations/query"],
y,Q)}),new Promise(function(y,Q){ca(["../../tasks/support/FeatureSet"],function(Z){y(Object.freeze({__proto__:null,"default":Z}))},Q)})])}).then(([{executeQuery:y},{default:Q}])=>y(this.url,Ha.from(f),this.layer?this.layer.spatialReference:null,{...n,query:{...this.layer.customParameters}}).then(Z=>Q.fromJSON(Z.data))).then(y=>{y&&y.features&&y.features.forEach(Q=>{Q.sourceLayer=this});return y})};K.toExportImageJSON=function(){var f;const n={id:this.id,source:(null==(f=this.source)?void 0:f.toJSON())||
{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(n.definitionExpression=this.definitionExpression);const y=["renderer","labelingInfo","opacity","labelsVisible"].reduce((Q,Z)=>{Q[Z]=this.originIdOf(Z);return Q},{});Object.keys(y).some(Q=>2<y[Q])&&(f=n.drawingInfo={},2<y.renderer&&(f.renderer=this.renderer?this.renderer.toJSON():null),2<y.labelsVisible&&(f.showLabels=this.labelsVisible),this.labelsVisible&&2<y.labelingInfo&&(f.labelingInfo=this.labelingInfo?this.labelingInfo.map(Q=>
Q.write({},{origin:"service"})):null,f.showLabels=!0),2<y.opacity&&(f.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(f.renderer));return n};K._assignDefaultSymbolColors=function(f){this._forEachSimpleMarkerSymbols(f,n=>{n.color||"esriSMSX"!==n.style&&"esriSMSCross"!==n.style||(n.color=n.outline&&n.outline.color?n.outline.color:[0,0,0,0])})};K._forEachSimpleMarkerSymbols=function(f,n){if(f){const y="uniqueValueInfos"in f?f.uniqueValueInfos:"classBreakInfos"in f?f.classBreakInfos:
[];for(const Q of y)Ma(Q.symbol)&&n(Q.symbol);"symbol"in f&&Ma(f.symbol)&&n(f.symbol);"defaultSymbol"in f&&Ma(f.defaultSymbol)&&n(f.defaultSymbol)}};K._setAndNotifyLayer=function(f,n){const y=this.layer,Q=this._get(f);let Z,Ea;switch(f){case "definitionExpression":Z="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":Z="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":Z="supportsDynamicLayers",
Ea="supportsModification"}const Fa=r.getProperties(this).getDefaultOrigin();if("service"!==Fa){if(Z&&!1===this.get(`layer.capabilities.exportMap.${Z}`)){this._logLockedError(f,`capability not available 'layer.capabilities.exportMap.${Z}'`);return}if(Ea&&!1===this.get(`capabilities.exportMap.${Ea}`)){this._logLockedError(f,`capability not available 'capabilities.exportMap.${Ea}'`);return}}"source"===f&&"not-loaded"!==this.loadStatus?this._logLockedError(f,"'source' can't be changed after calling sublayer.load()"):
(this._set(f,n),"service"!==Fa&&Q!==n&&y&&y.emit&&y.emit("sublayer-update",{propertyName:f,target:this}))};K._handleSublayersChange=function(f,n){n&&(n.forEach(y=>{y.parent=null;y.layer=null}),this.handles.removeAll());f&&(f.forEach(y=>{y.parent=this;y.layer=this.layer}),this.handles.add([f.on("after-add",({item:y})=>{y.parent=this;y.layer=this.layer}),f.on("after-remove",({item:y})=>{y.parent=null;y.layer=null}),f.on("before-changes",y=>{const Q=this.get("layer.capabilities.exportMap.supportsSublayersChanges");
null==Q||Q||(wa.error(new da("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),y.preventDefault())})]))};K._logLockedError=function(f,n){wa.error(new da("sublayer:locked",`Property '${f}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:n,sublayer:this,layer:this.layer}))};K._getLayerDomain=function(f){return(f=this.fieldsIndex.get(f))?f.domain:null};A._createClass(V,[{key:"definitionExpression",
set:function(f){this._setAndNotifyLayer("definitionExpression",f)}},{key:"fieldsIndex",get:function(){return new z(this.fields||[])}},{key:"id",get:function(){const f=this._get("id");return null==f?x++:f},set:function(f){this._get("id")!==f&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",f))}},{key:"labelingInfo",set:function(f){this._setAndNotifyLayer("labelingInfo",
f)}},{key:"labelsVisible",set:function(f){this._setAndNotifyLayer("labelsVisible",f)}},{key:"layer",set:function(f){this._set("layer",f);this.sublayers&&this.sublayers.forEach(n=>n.layer=f)}},{key:"listMode",set:function(f){this._set("listMode",f)}},{key:"minScale",set:function(f){this._setAndNotifyLayer("minScale",f)}},{key:"maxScale",set:function(f){this._setAndNotifyLayer("maxScale",f)}},{key:"opacity",set:function(f){this._setAndNotifyLayer("opacity",f)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"renderer",set:function(f){if(f)for(const n of f.getSymbols())if(S.isSymbol3D(n)){wa.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",f)}},{key:"source",get:function(){return this._get("source")||new X.MapLayerSource({mapLayerId:this.id})},set:function(f){this._setAndNotifyLayer("source",f)}},{key:"sublayers",set:function(f){this._handleSublayersChange(f,this._get("sublayers"));this._set("sublayers",f)}},{key:"url",get:function(){var f,n;const y=null!=
(f=null==(n=this.layer)?void 0:n.parsedUrl)?f:this._lastParsedUrl;f=this.source;if(!y)return null;this._lastParsedUrl=y;if("map-layer"===(null==f?void 0:f.type))return`${y.path}/${f.mapLayerId}`;f={layer:JSON.stringify({source:this.source})};return`${y.path}/dynamicLayer?${U.objectToQuery(f)}`},set:function(f){f?this._override("url",f):this._clearOverride("url")}},{key:"visible",set:function(f){this._setAndNotifyLayer("visible",f)}}]);return V}(Ua.HandleOwnerMixin(k.MultiOriginJSONMixin(O.IdentifiableMixin(xa))));
t.test={isMapImageLayerOverridePolicy:E=>E===va||E===Qa,isTileImageLayerOverridePolicy:E=>E===Ca};w.__decorate([H.property({readOnly:!0})],t.prototype,"capabilities",void 0);w.__decorate([F.reader("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],t.prototype,"readCapabilities",null);w.__decorate([H.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:Qa}}})],
t.prototype,"definitionExpression",null);w.__decorate([H.property({type:[u],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],t.prototype,"fields",void 0);w.__decorate([H.property({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null);w.__decorate([H.property({type:R,json:{read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0);w.__decorate([H.property({type:String})],t.prototype,"globalIdField",void 0);w.__decorate([F.reader("service","globalIdField",
["layerDefinition.globalIdField","layerDefinition.fields"])],t.prototype,"readGlobalIdFieldFromService",null);w.__decorate([H.property({type:I.Integer,json:{write:{ignoreOrigin:!0}}})],t.prototype,"id",null);w.__decorate([H.property({value:null,type:[C],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:va}}})],t.prototype,"labelingInfo",null);w.__decorate([oa.writer("labelingInfo")],t.prototype,"writeLabelingInfo",
null);w.__decorate([H.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:va}}})],t.prototype,"labelsVisible",null);w.__decorate([H.property({value:null})],t.prototype,"layer",null);w.__decorate([H.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Sa}}})],t.prototype,"legendEnabled",void 0);w.__decorate([H.property({type:["show",
"hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"listMode",null);w.__decorate([H.property({type:Number,value:0,json:{write:{overridePolicy:va}}})],t.prototype,"minScale",null);w.__decorate([F.reader("minScale",["minScale","layerDefinition.minScale"])],t.prototype,"readMinScale",null);w.__decorate([H.property({type:Number,value:0,json:{write:{overridePolicy:va}}})],t.prototype,"maxScale",null);w.__decorate([F.reader("maxScale",["maxScale",
"layerDefinition.maxScale"])],t.prototype,"readMaxScale",null);w.__decorate([H.property({type:String})],t.prototype,"objectIdField",void 0);w.__decorate([F.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],t.prototype,"readObjectIdFieldFromService",null);w.__decorate([H.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:va}}})],t.prototype,"opacity",null);w.__decorate([F.reader("opacity",["layerDefinition.drawingInfo.transparency",
"layerDefinition.transparency"])],t.prototype,"readOpacity",null);w.__decorate([oa.writer("opacity")],t.prototype,"writeOpacity",null);w.__decorate([H.property({json:{type:I.Integer,write:{target:"parentLayerId",allowNull:!0,overridePolicy:va}}})],t.prototype,"parent",void 0);w.__decorate([oa.writer("parent")],t.prototype,"writeParent",null);w.__decorate([H.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(E,V){return!V.disablePopup}},write:{target:"disablePopup",overridePolicy:Sa,
writer(E,V,K){V[K]=!E}}}})],t.prototype,"popupEnabled",void 0);w.__decorate([H.property({type:ba,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Sa}}})],t.prototype,"popupTemplate",void 0);w.__decorate([H.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null);w.__decorate([H.property({types:d.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:va},origins:{"web-scene":{types:d.webSceneRendererTypes,
name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:va}}}}})],t.prototype,"renderer",null);w.__decorate([H.property({types:{key:"type",base:null,typeMap:{"data-layer":ia.DataLayerSource,"map-layer":X.MapLayerSource}},cast(E){if(E){if("mapLayerId"in E)return I.ensureClass(X.MapLayerSource,E);if("dataSource"in E)return I.ensureClass(ia.DataLayerSource,E)}return E},json:{name:"layerDefinition.source",write:{overridePolicy:va}}})],t.prototype,"source",null);w.__decorate([H.property()],t.prototype,
"sourceJSON",void 0);w.__decorate([H.property({value:null,json:{type:[I.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:va}}})],t.prototype,"sublayers",null);w.__decorate([Y.cast("sublayers")],t.prototype,"castSublayers",null);w.__decorate([oa.writer("sublayers")],t.prototype,"writeSublayers",null);w.__decorate([H.property({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:Sa}}})],t.prototype,"title",void 0);w.__decorate([H.property({type:String})],
t.prototype,"typeIdField",void 0);w.__decorate([F.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null);w.__decorate([H.property({type:[M],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],t.prototype,"types",void 0);w.__decorate([H.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:Ca}}})],t.prototype,"url",null);w.__decorate([H.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},
write:{target:"defaultVisibility",overridePolicy:va}}})],t.prototype,"visible",null);w.__decorate([oa.writer("visible")],t.prototype,"writeVisible",null);return t=Ja=w.__decorate([P.subclass("esri.layers.support.Sublayer")],t)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),
function(ca,A,w,t,T,aa,I,r,H,Y,fa,F){var P;w=P=function(oa){function da(U){U=oa.call(this,U)||this;U.displayValueEnabled=!1;U.max=1;U.min=0;U.step=.1;U.type="slider";U.value=null;return U}ca._inheritsLoose(da,oa);da.prototype.clone=function(){return new P({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};
return da}(F);A.__decorate([aa.property()],w.prototype,"displayValueEnabled",void 0);A.__decorate([aa.property()],w.prototype,"max",void 0);A.__decorate([aa.property()],w.prototype,"min",void 0);A.__decorate([aa.property()],w.prototype,"step",void 0);A.__decorate([aa.property()],w.prototype,"value",void 0);return w=P=A.__decorate([r.subclass("esri.support.Action.ActionSlider")],w)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Identifiable ../../core/Handles ../../core/watchUtils ../support/decorators/renderable ../../chunks/index ../support/widget ../Widget".split(" "),
function(ca,A,w,t,T,aa,I,r,H,Y,fa,F,P,oa,da,U,pa,Aa,la){t=function(ha){function R(l,D){l=ha.call(this,l,D)||this;l._legend=null;l._handles=new oa;l.content=null;l.image=null;l.listItem=null;l.open=!1;l.visible=!0;return l}A._inheritsLoose(R,ha);var v=R.prototype;v.initialize=function(){this.own([da.init(this,"content",l=>this._createLegend(l))])};v.destroy=function(){const {_legend:l}=this;l&&l.destroy();this._legend=null};v.render=function(){return pa.jsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
v._renderContent=function(l){const {_legend:D,listItem:O}=this;return l?"legend"===l?O&&O.view&&O.layer&&D?pa.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:D},D.render()):null:"string"===typeof l?pa.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:l,innerHTML:l}):Aa.isWidget(l)?pa.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:l},l.render()):l instanceof HTMLElement?pa.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:l,bind:l,afterCreate:this._attachToNode}):null:null};v._renderContents=function(){const {content:l}=this;return Array.isArray(l)?l.map(D=>this._renderContent(D)):this._renderContent(l)};v._getLegendOptions=function(l){if(l){var {layer:D,view:O}=l;if(D&&O)return{view:O,layerInfos:[{layer:D,title:""}]}}};v._createLegend=function(l){this._hasLegend(l)&&
!this._legend&&(new Promise(function(D,O){ca(["../Legend"],function(ba){D(Object.freeze({__proto__:null,"default":ba}))},O)})).then(({default:D})=>{const {_handles:O,listItem:ba}=this,na=new D(this._getLegendOptions(ba));this._legend=na;this.notifyChange("className");this.notifyChange("title");D=da.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(na));O.add(D,"legends");this.scheduleRender()})};v._hasLegend=function(l){return"legend"===l?!0:Array.isArray(l)?l.some(D=>"legend"===
D):!1};v._attachToNode=function(l){l.appendChild(this)};v._updateLegend=function(l){const {listItem:D}=this;if(D){var {layer:O,view:ba}=D;l.view=ba;l.layerInfos=[{layer:O,title:null}];this.scheduleRender()}};v._getWidget=function(l){return"legend"===l?this._legend:Aa.isWidget(l)?l:null};v._getFirstWidget=function(){const {content:l}=this;if(Array.isArray(l)){let D=null;l.some(O=>{(O=this._getWidget(O))&&(D=O);return!!O});return D}return this._getWidget(l)};A._createClass(R,[{key:"className",get:function(){const {image:l}=
this,D=this._getFirstWidget();return this._get("className")||!l&&D?D.iconClass:""},set:function(l){void 0===l?this._clearOverride("className"):this._override("className",l)}},{key:"title",get:function(){const l=this._getFirstWidget();return this._get("title")||l?l.label:""},set:function(l){void 0===l?this._clearOverride("title"):this._override("title",l)}}]);return R}(P.IdentifiableMixin(la));w.__decorate([I.property({dependsOn:["content","image"]})],t.prototype,"className",null);w.__decorate([I.property(),
U.renderable()],t.prototype,"content",void 0);w.__decorate([I.property()],t.prototype,"image",void 0);w.__decorate([I.property()],t.prototype,"listItem",void 0);w.__decorate([I.property({dependsOn:["content"]})],t.prototype,"title",null);w.__decorate([I.property(),U.renderable()],t.prototype,"open",void 0);w.__decorate([I.property()],t.prototype,"visible",void 0);return t=w.__decorate([H.subclass("esri.widgets.LayerList.ListItemPanel")],t)})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/Collection ../../core/Handles ../../core/watchUtils ./support/layerListUtils ./ListItem".split(" "),
function(ca,A,w,t,T,aa,I,r,H,Y,fa,F,P,oa,da,U,pa){const Aa=P.ofType(pa);w=function(la){function ha(v){v=la.call(this,v)||this;v._handles=new oa;v.listItemCreatedFunction=null;v.operationalItems=new Aa;v.view=null;return v}ca._inheritsLoose(ha,la);var R=ha.prototype;R.initialize=function(){this._handles.add(da.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};R.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};R.triggerAction=
function(v,l){v&&!v.disabled&&this.emit("trigger-action",{action:v,item:l})};R.moveListItem=function(v,l,D,O){var ba,na;const xa=null==v?void 0:v.layer;if(xa){var S=null==(ba=this.view)?void 0:null==(na=ba.map)?void 0:na.layers;ba=l?U.getItemLayers(l):S;S=D?U.getItemLayers(D):S;ba&&S&&({operationalItems:na}=this,l=(null==l?void 0:l.children)||na,na=(null==D?void 0:D.children)||na,O=S.length-O,v.parent=D||null,l.includes(v)&&l.remove(v),ba.includes(xa)&&ba.remove(xa),na.includes(v)||na.add(v,O),S.includes(xa)||
S.add(xa,O))}};R._createLayerViewHandles=function(v){const {_handles:l}=this;l.remove("layer-views");this._compileList();v&&l.add(v.on("change",()=>this._compileList()),"layer-views")};R._createMapLayerHandles=function(v){const {_handles:l}=this;l.remove("map-layers");this._compileList();v&&l.add(v.on("change",()=>this._compileList()),"map-layers")};R._watchItemProperties=function(v){this._handles.add([v.children.on("change",()=>{this._modifyListItemChildren(v.children)})],`children-change-${v.uid}`)};
R._modifyListItemChildren=function(v){v.forEach(l=>this._modifyListItem(l))};R._modifyListItem=function(v){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:v});this._modifyListItemChildren(v.children)};R._createListItem=function(v){const {view:l}=this;v=new pa({layer:v,view:l});this._watchItemProperties(v);return v};R._removeAllItems=function(){const {_handles:v,operationalItems:l}=this;l.forEach(D=>{v.remove(`children-change-${D.uid}`)});l.removeAll()};
R._getViewableLayers=function(v){if(v)return v.filter(l=>"hide"!==U.findLayerListMode(l))};R._watchLayersListMode=function(v){const {_handles:l}=this;l.remove("layer-list-mode");v&&v.forEach(D=>{l.add(da.watch(D,"listMode",()=>this._compileList()),"layer-list-mode")})};R._compileList=function(){var v=this.get("view.map.layers");this._watchLayersListMode(v);(v=this._getViewableLayers(v))&&v.length?(this._createNewItems(v),this._modifyOrRemoveItems(v),this._sortItems(v)):this._removeAllItems()};R._createNewItems=
function(v){const {operationalItems:l}=this;v.forEach(D=>{l.find(O=>O.layer===D)||l.add(this._createListItem(D))})};R._modifyOrRemoveItems=function(v){const {_handles:l,operationalItems:D}=this,O=[];D.forEach(ba=>{ba&&v&&v.find(na=>ba.layer===na)?this._modifyListItem(ba):(l.remove(`children-change-${ba.uid}`),O.push(ba))});D.removeMany(O)};R._sortItems=function(v){const {operationalItems:l}=this;l.sort((D,O)=>{D=v.indexOf(D.layer);O=v.indexOf(O.layer);return D>O?-1:D<O?1:0})};R._viewHandles=function(){const {_handles:v,
view:l}=this;v.remove(["map-layers","layer-views","view-layers"]);this._compileList();l&&l.ready&&v.add([da.init(this,"view.map.layers",D=>this._createMapLayerHandles(D)),da.init(this,"view.layerViews",D=>this._createLayerViewHandles(D)),da.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};ca._createClass(ha,[{key:"state",get:function(){const v=this.get("view");return this.get("view.ready")?"ready":v?"loading":"disabled"}}]);return ha}(F.EventedAccessor);A.__decorate([aa.property()],
w.prototype,"listItemCreatedFunction",void 0);A.__decorate([aa.property({type:Aa})],w.prototype,"operationalItems",void 0);A.__decorate([aa.property({dependsOn:["view.ready"],readOnly:!0})],w.prototype,"state",null);A.__decorate([aa.property()],w.prototype,"view",void 0);return w=A.__decorate([r.subclass("esri.widgets.LayerList.LayerListViewModel")],w)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../core/Collection ../core/Handles ../core/watchUtils ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ./support/decorators/vmEvent ../chunks/index ./Widget ../chunks/sortable.esm ./LayerList/support/layerListUtils ./LayerList/ListItem ./LayerList/LayerListViewModel".split(" "),function(ca,
A,w,t,T,aa,I,r,H,Y,fa,F,P,oa,da,U,pa,Aa,la,ha,R,v,l,D,O,ba,na,xa){function S(Ra){const {actionsOpen:Na,children:J}=Ra;Na&&(Ra.actionsOpen=!1);J.forEach(d=>S(d))}const p=da.ofType(na),ma={exclusive:"exclusive",inherited:"inherited",independent:"independent"},ra=t.getLogger("esri.widgets.LayerList"),$a={statusIndicators:!0};t=function(Ra){function Na(d,h){var k=Ra.call(this,d,h)||this;k._handles=new U;k._sortableNodes=new Map;k._sortableMap=new Map;k._focusSortUid=null;k._newUI=w("esri-layerlist-new-ui");
k.visibleItems=null;k.iconClass="esri-icon-layers";k.label=void 0;k.listItemCreatedFunction=null;k.messages=null;k.messagesCommon=null;k.multipleSelectionEnabled=!1;k.operationalItems=null;k.selectionEnabled=!1;k.selectedItems=new p;k.view=null;k.viewModel=new xa;k.visibleElements={...$a};k._onSortableSort=({to:u,from:z,item:C,newIndex:M})=>{z&&u&&(z===u?k._sortLayers(k._sortableMap.get(z.dataset.group)):k._moveLayerFromChildList({to:u,from:z,item:C,newIndex:M}))};k._sortableCanPut=(u,z,C)=>{var M,
X;const ia=u.el.dataset.group;z=z.el.dataset.group;u=u.el["data-item"];C=C["data-item"];C=null==C?void 0:null==(M=C.layer)?void 0:M.type;M=null==u?void 0:null==(X=u.layer)?void 0:X.type;return ia&&z&&C&&!("group"===M&&"group"===C)};k._sortableCanPull=(u,z,C)=>{var M;u=u.el.dataset.group;z=z.el.dataset.group;C=C["data-item"];C=null==C?void 0:null==(M=C.layer)?void 0:M.type;return u&&z&&!!C};k._onSortableEnd=({oldIndex:u,from:z,to:C,item:M})=>{z!==C&&z.insertBefore(M,z.children[u])};return k}ca._inheritsLoose(Na,
Ra);var J=Na.prototype;J.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.own(pa.on(this,"operationalItems","change",()=>this._itemsChanged(d)),pa.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};J.destroy=function(){this._destroySortables();this._handles.destroy();this._handles=null};J.castVisibleElements=function(d){return{...$a,...d}};J.triggerAction=function(d,h){this.viewModel.triggerAction(d,h)};J.render=function(){var d;const {visibleItems:h,_newUI:k}=
this,u=null==(d=this.viewModel)?void 0:d.state;return l.jsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",{["esri-layer-list--new-ui"]:k,["esri-hidden"]:"loading"===u,["esri-disabled"]:"disabled"===u})},null!=h&&h.length?this.renderItems():this.renderNoItems())};J.renderNoItems=function(){return l.jsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};J.renderItems=function(){const {visibleItems:d,selectionEnabled:h,messages:k}=this;return l.jsx("ul",
{"aria-label":k.widgetLabel,role:h?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(u=>this.renderItem(u,null)).toArray())};J.renderActionsMenuIcon=function(d,h){var {messages:k}=this;k=d.actionsOpen?k.closeActions:k.openActions;return l.jsx("div",{key:"actions-menu-toggle",
"data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),tabindex:"0",role:"button","aria-controls":h,"aria-label":k,title:k},l.jsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};J.renderActionsMenu=function(d,h,k,u){var {panel:z}=d;z=z&&z.visible?this.renderPanelButton(z):null;const C=(h=1===k&&this._getSingleActionButton(h))?
this.renderAction({item:d,action:h,singleAction:!0}):null;return(d=!h&&k?this.renderActionsMenuIcon(d,u):null)||z||h?l.jsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},z,C,d):null};J.renderChildList=function(d,h){var k;const {selectionEnabled:u}=this,{visibilityMode:z,children:C}=d;var M=!!d.error;M=!!C.length&&!M;const X=!M&&u&&"group"===(null==(k=d.layer)?void 0:k.type),{exclusive:ia,inherited:ua}=ma;k={["esri-layer-list__list--exclusive"]:z===ia,["esri-layer-list__list--inherited"]:z===
ua,["esri-layer-list__list--independent"]:z!==ua&&z!==ia};return M||X?l.jsx("ul",{bind:this,key:"list-items",id:h,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",k),"aria-expanded":d.open?"true":"false",role:u?"listbox":z===ia?"radiogroup":"group",hidden:d.open||X?null:!0},null==C?void 0:C.map(Ha=>this.renderItem(Ha,d)).toArray()):null};J.renderChildrenToggle=function(d,
h){var {messagesCommon:k}=this;const {children:u}=d,z=!!d.error,C={["esri-layer-list__child-toggle--open"]:d.open};k=d.open?k.collapse:k.expand;return u.length&&!z?l.jsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",C),tabindex:"0",role:"button","aria-controls":h,"aria-label":k,title:k},l.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed",
"esri-icon-right-triangle-arrow")}),l.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),l.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null};J.renderError=function(d){return d.error?l.jsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},l.jsx("span",null,this.messages.layerError)):null};J.renderItemContent=
function(d,h,k){var {id:u}=this,z=`${u}_${d.uid}`;u=`${z}_actions`;z=`${z}__list`;const {panel:C}=d,M=this._filterActions(d.actionsSections),X=this._countActions(M);return[l.jsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,z),this.renderLabel(d,h,k),this.renderActionsMenu(d,M,X,u)),this.renderError(d),X?this.renderActionsSections(d,M,u):null,C&&C.open?C.render():null,this.renderChildList(d,z)]};J.renderItem=function(d,h){const {_newUI:k,id:u,
selectionEnabled:z,selectedItems:C,visibleElements:M}=this;var {children:X}=d;const ia=`${`${u}_${d.uid}`}__title`;var ua=!!d.error;X={["esri-layer-list__item--has-children"]:!!X.length&&!ua,["esri-layer-list__item--error"]:!!ua,["esri-layer-list__item--updating"]:d.updating&&!h&&M.statusIndicators,["esri-layer-list__item--invisible"]:k&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:z};if(z){var Ha;ua={["data-layer-uid"]:null==
(Ha=d.layer)?void 0:Ha.uid,["data-sort-filter"]:(!d.sortable).toString()};return l.jsx("li",Object.assign({key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",X),"aria-labelledby":ia,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":h?h.uid:"root",tabIndex:0,"aria-selected":ba.findSelectedItem(d,C)?"true":"false",role:"option"},ua),this.renderItemContent(d,h,
ia))}return l.jsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",X),"aria-labelledby":ia},this.renderItemContent(d,h,ia))};J.renderItemTitle=function(d,h){const {messages:k}=this,u=d.title||k.untitledLayer;d=d.visibleAtCurrentScale?u:`${u} (${k.layerInvisibleAtScale})`;return l.jsx("span",{key:"layer-title-container",id:h,title:d,"aria-label":d,class:"esri-layer-list__item-title"},u)};J.renderItemToggleIcon=
function(d,h){const {_newUI:k}=this,{exclusive:u}=ma;h=h&&h.visibilityMode;return l.jsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:k,["esri-layer-list__item-toggle-icon"]:k&&h!==u,["esri-layer-list__item-radio-icon"]:k&&h===u,["esri-icon-radio-checked"]:h===u&&d.visible,["esri-icon-radio-unchecked"]:h===u&&!d.visible,["esri-icon-visible"]:h!==u&&d.visible,["esri-icon-non-visible"]:h!==u&&!d.visible}),"aria-hidden":"true"})};J.renderItemToggle=function(d,
h,k){const {selectionEnabled:u}=this,{exclusive:z}=ma,C=h&&h.visibilityMode;return u?l.jsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":C,tabIndex:0,"aria-checked":d.visible?"true":"false",role:C===z?"radio":"switch","aria-labelledby":k},this.renderItemToggleIcon(d,h)):l.jsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,
h))};J.renderItemError=function(d){return d.error?l.jsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null};J.renderLabel=function(d,h,k){const {selectionEnabled:u,_newUI:z}=this,{inherited:C,exclusive:M}=ma,X=null==h?void 0:h.visibilityMode;var ia=X===M?"radio":"switch";h=[this.renderItemToggle(d,h,k),this.renderItemTitle(d,k)];z&&h.reverse();ia=u?l.jsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},h):l.jsx("div",{key:`item-label-with-selection-${d.uid}`,
class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":X,tabIndex:0,"aria-checked":d.visible?"true":"false",role:ia,"aria-labelledby":k},h);return X===C||d.error?l.jsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemError(d),this.renderItemTitle(d,k)):ia};J.renderPanelButton=function(d){const {className:h,open:k,title:u,image:z}=d,C=z||h?h:"esri-icon-default-action",
M=this._getIconImageStyles(d),X={["esri-layer-list__item-actions-menu-item--active"]:k},ia={["esri-layer-list__item-action-image"]:!!M["background-image"]};C&&(ia[C]=!!C);return l.jsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",X),role:"button",tabindex:"0",title:u,"aria-label":u},l.jsx("span",{class:this.classes(ia),styles:M}))};J.renderActionsSections=function(d,h,k){h=h.toArray().map((u,
z)=>l.jsx("ul",{key:`${d}-action-section-${z}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,u)));return l.jsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:k,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},h)};J.renderActionSection=function(d,h){return(h&&h.toArray()).map(k=>this.renderAction({item:d,action:k}))};J.renderActionIcon=function(d){const {active:h,className:k}=d,u=this._getIconImageStyles(d);d="button"!==
d.type||d.image||k?k:"esri-icon-default-action";const z={["esri-layer-list__item-action-image"]:!h&&!!u["background-image"],["esri-icon-loading-indicator"]:h,["esri-rotating"]:h};d&&!h&&(z[d]=!0);return l.jsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",z),styles:u})};J.renderActionTitle=function(d,h){return h?null:l.jsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};J.renderAction=function(d){const {item:h,action:k,
singleAction:u}=d,{active:z,disabled:C,title:M}=k;d={["esri-layer-list__item-actions-menu-item"]:u&&"button"===k.type,["esri-layer-list__item-action"]:z||!u&&"toggle"!==k.type,["esri-layer-list__action-toggle"]:!z&&"toggle"===k.type,["esri-layer-list__action-toggle--on"]:!z&&"toggle"===k.type&&k.value,["esri-disabled-element"]:C};const X=[this.renderActionIcon(k),this.renderActionTitle(M,u)];return u?l.jsx("div",{bind:this,"data-item":h,"data-action":k,role:"button",key:`single-action-${k.uid}`,onclick:this._triggerAction,
onkeydown:this._triggerAction,classes:d,tabindex:"0",title:M,"aria-label":M},X):l.jsx("li",{bind:this,"data-item":h,"data-action":k,key:`action-${k.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:M,"aria-label":M},X)};J._sortNodeRemoved=function(d){const {_sortableMap:h}=this;d=d.dataset.group;const k=h.get(d);k&&k.destroy();h.delete(d)};J._destroySortables=function(){const {_sortableMap:d,_sortableNodes:h}=this;d.forEach(k=>k&&k.destroy());
d.clear();h.clear()};J._moveLayerFromChildList=function({to:d,from:h,item:k,newIndex:u}){this.viewModel.moveListItem(k["data-item"],h["data-item"],d["data-item"],u)};J._sortLayers=function(d){if(d){var h=d.el["data-item"];d=d.toArray();if(h)ba.sortChildLayersToIds(h,d);else{var k,u;ba.sortLayersToIds(null==(k=this.view)?void 0:null==(u=k.map)?void 0:u.layers,d)}}};J._toggleSorting=function(d,h){const {_sortableMap:k,selectionEnabled:u}=this,z=k.get(h);var C=d["data-item"];C=("root"===h?!0:C.childrenSortable&&
ba.canSortSublayers(C))&&u;z?z.option("disabled",!C):C&&(d=O.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:h,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!C,chosenClass:"esri-layer-list--chosen"}),k.set(h,d))};J._toggleAllSorting=function(){this._sortableNodes.forEach((d,h)=>this._toggleSorting(d,h))};J._sortNodeCreated=function(d){const h=d.dataset.group;h&&
(this._sortableNodes.set(h,d),this._toggleSorting(d,h))};J._setVisibleItems=function(d){this.visibleItems=null==d?void 0:d.filter(h=>this.errorsVisible||!h.error)};J._getSingleActionButton=function(d){return d.reduce(h=>h).filter(h=>h&&"button"===h.type).getItemAt(0)};J._focusListItem=function(d){var h;const {_focusSortUid:k}=this;d&&k&&(null==(h=d["data-item"].layer)?void 0:h.uid)===k&&(d.focus(),this._focusSortUid=null)};J._watchActionSectionChanges=function(d,h){const k="action-section"+h;this._handles.add(d.on("change",
this.scheduleRender.bind(this)),k);d.forEach(u=>this._renderOnActionChanges(u,h))};J._renderOnActionChanges=function(d,h){h="actions"+h;"toggle"===d.type?this._handles.add([pa.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],h):"slider"===d.type?this._handles.add([pa.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],h):this._handles.add([pa.init(d,["className","image","id","title","visible"],()=>
this.scheduleRender())],h)};J._renderOnItemChanges=function(d){const h=d.uid,k="items"+h;this._handles.add([pa.init(d,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],k);d.children.forEach(u=>this._renderOnItemChanges(u));d.actionsSections.forEach(u=>
this._watchActionSectionChanges(u,h))};J._itemsChanged=function(d){this._handles.removeAll();d.forEach(h=>this._renderOnItemChanges(h));this._setVisibleItems(d);this.scheduleRender()};J._filterActions=function(d){return d.map(h=>h.filter(k=>k.visible))};J._countActions=function(d){return d.reduce((h,k)=>h+k.length,0)};J._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===
d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};J._selectionKeydown=function(d){var h=oa.eventKey(d);if(-1===["ArrowDown","ArrowUp"].indexOf(h))this._toggleSelection(d);else{d.stopPropagation();var k=d.currentTarget,u=k["data-item"],{_sortableMap:z,selectedItems:C}=this;if(k=z.get(k.dataset.group)){var M=ba.findSelectedItem(u,C),X=k.toArray();d=X.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===h){const Ma=d+1;if(Ma>=X.length)return;if(M){var ia;X.splice(Ma,
0,X.splice(d,1)[0]);k.sort(X);this._sortLayers(k);this._focusSortUid=null==(ia=u.layer)?void 0:ia.uid}else{var ua;this._focusSortUid=null==(ua=u.layer)?void 0:ua.uid;this.scheduleRender()}}if("ArrowUp"===h&&(h=d-1,!(-1>=h)))if(M){var Ha;X.splice(h,0,X.splice(d,1)[0]);k.sort(X);this._sortLayers(k);this._focusSortUid=null==(Ha=u.layer)?void 0:Ha.uid}else{var Ua;this._focusSortUid=null==(Ua=u.layer)?void 0:Ua.uid;this.scheduleRender()}}}}};J._toggleActionsOpen=function(d){const h=d.currentTarget["data-item"];
var {actionsOpen:k}=h;(k=!k)&&this.operationalItems.forEach(u=>S(u));h.actionsOpen=k;d.stopPropagation()};J._triggerPanel=function(d){const h=d.currentTarget["data-panel"];h&&(h.open=!h.open);d.stopPropagation()};J._triggerAction=function(d){var h=d.currentTarget;const k=h["data-action"];h=h["data-item"];"toggle"===k.type&&(k.value=!k.value);this.triggerAction(k,h);d.stopPropagation()};J._toggleVisibility=function(d){var h=d.currentTarget;const k=h.getAttribute("data-parent-visibility");h=h["data-item"];
k===ma.exclusive&&h.visible||(h.visible=!h.visible);d.stopPropagation()};J._toggleChildrenClick=function(d){const h=d.currentTarget["data-item"];h.open=!h.open;d.stopPropagation()};J._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:h,selectedItems:k}=this,u=h&&(d.metaKey||d.ctrlKey);d=d.currentTarget["data-item"];const z=ba.findSelectedItem(d,k),{length:C}=k,M=z&&1===C;u?z?k.remove(z):k.add(d):C&&!M?(k.removeAll(),k.add(d)):z?k.remove(z):k.add(d)};ca._createClass(Na,
[{key:"statusIndicatorsVisible",set:function(d){r.deprecatedProperty(ra,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"});this.visibleElements={...this.visibleElements,statusIndicators:d}}}]);return Na}(D);A.__decorate([T.property()],t.prototype,"visibleItems",void 0);A.__decorate([T.property()],t.prototype,"iconClass",void 0);A.__decorate([T.property(),R.renderable()],t.prototype,"errorsVisible",void 0);A.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],t.prototype,"label",void 0);A.__decorate([aa.aliasOf("viewModel.listItemCreatedFunction"),R.renderable()],t.prototype,"listItemCreatedFunction",void 0);A.__decorate([T.property(),R.renderable(),ha.messageBundle("esri/widgets/LayerList/t9n/LayerList")],t.prototype,"messages",void 0);A.__decorate([T.property(),R.renderable(),ha.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0);A.__decorate([T.property()],t.prototype,"multipleSelectionEnabled",void 0);A.__decorate([aa.aliasOf("viewModel.operationalItems"),
R.renderable()],t.prototype,"operationalItems",void 0);A.__decorate([T.property(),R.renderable()],t.prototype,"selectionEnabled",void 0);A.__decorate([T.property(),R.renderable()],t.prototype,"selectedItems",void 0);A.__decorate([T.property(),R.renderable()],t.prototype,"statusIndicatorsVisible",null);A.__decorate([aa.aliasOf("viewModel.view"),R.renderable()],t.prototype,"view",void 0);A.__decorate([v.vmEvent("trigger-action"),T.property({type:xa}),R.renderable("viewModel.state")],t.prototype,"viewModel",
void 0);A.__decorate([T.property(),R.renderable()],t.prototype,"visibleElements",void 0);A.__decorate([I.cast("visibleElements")],t.prototype,"castVisibleElements",null);A.__decorate([aa.aliasOf("viewModel.triggerAction")],t.prototype,"triggerAction",null);A.__decorate([la.accessibleHandler()],t.prototype,"_toggleActionsOpen",null);A.__decorate([la.accessibleHandler()],t.prototype,"_triggerPanel",null);A.__decorate([la.accessibleHandler()],t.prototype,"_triggerAction",null);A.__decorate([la.accessibleHandler()],
t.prototype,"_toggleVisibility",null);A.__decorate([la.accessibleHandler()],t.prototype,"_toggleChildrenClick",null);A.__decorate([la.accessibleHandler()],t.prototype,"_toggleSelection",null);return t=A.__decorate([Y.subclass("esri.widgets.LayerList")],t)});