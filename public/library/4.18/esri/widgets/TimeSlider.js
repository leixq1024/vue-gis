// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/compilerUtils ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/arrayUtils ../core/events ../core/Collection ../intl/date ../core/mathUtils ../layers/support/timeUtils ../TimeInterval ../core/watchUtils ../core/throttle ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Slider ./TimeSlider/TimeSliderViewModel".split(" "),
function(M,f,d,N,ia,ja,q,m,ka,W,O,la,ma,na,P,X,Y,B,Z,Q,b,aa,ba,oa,I,R,p,c,ca,da,S){const ea=new Y([{minor:new b({value:100,unit:"milliseconds"}),major:new b({value:1,unit:"seconds"}),format:{second:"numeric"}},{minor:new b({value:500,unit:"milliseconds"}),major:new b({value:5,unit:"seconds"}),format:{second:"numeric"}},{minor:new b({value:1,unit:"seconds"}),major:new b({value:20,unit:"seconds"}),format:{minute:"numeric",second:"numeric"}},{minor:new b({value:2,unit:"seconds"}),major:new b({value:30,
unit:"seconds"}),format:{minute:"numeric",second:"numeric"}},{minor:new b({value:10,unit:"seconds"}),major:new b({value:1,unit:"minutes"}),format:{minute:"numeric"}},{minor:new b({value:15,unit:"seconds"}),major:new b({value:5,unit:"minutes"}),format:{hour:"numeric",minute:"numeric"}},{minor:new b({value:1,unit:"minutes"}),major:new b({value:20,unit:"minutes"}),format:{hour:"numeric",minute:"numeric"}},{minor:new b({value:5,unit:"minutes"}),major:new b({value:2,unit:"hours"}),format:{hour:"numeric",
minute:"numeric"}},{minor:new b({value:15,unit:"minutes"}),major:new b({value:6,unit:"hours"}),format:{hour:"numeric",minute:"numeric"}},{minor:new b({value:1,unit:"hours"}),major:new b({value:1,unit:"days"}),format:{day:"numeric",month:"short"}},{minor:new b({value:6,unit:"hours"}),major:new b({value:1,unit:"weeks"}),format:{day:"numeric",month:"short"}},{minor:new b({value:1,unit:"days"}),major:new b({value:1,unit:"months"}),format:{month:"long"}},{minor:new b({value:2,unit:"days"}),major:new b({value:1,
unit:"months"}),format:{month:"short"}},{minor:new b({value:3,unit:"days"}),major:new b({value:1,unit:"months"}),format:{month:"short"}},{minor:new b({value:4,unit:"days"}),major:new b({value:3,unit:"months"}),format:{month:"short",year:"numeric"}},{minor:new b({value:1,unit:"weeks"}),major:new b({value:1,unit:"years"}),format:{year:"numeric"}},{minor:new b({value:1,unit:"months"}),major:new b({value:1,unit:"years"}),format:{year:"numeric"}},{minor:new b({value:2,unit:"months"}),major:new b({value:2,
unit:"years"}),format:{year:"numeric"}},{minor:new b({value:1,unit:"years"}),major:new b({value:1,unit:"decades"}),format:{year:"numeric"}},{minor:new b({value:2,unit:"years"}),major:new b({value:5,unit:"decades"}),format:{year:"numeric"}},{minor:new b({value:5,unit:"decades"}),major:new b({value:10,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:1,unit:"centuries"}),major:new b({value:10,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:2,unit:"centuries"}),
major:new b({value:20,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:5,unit:"centuries"}),major:new b({value:50,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:10,unit:"centuries"}),major:new b({value:100,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:20,unit:"centuries"}),major:new b({value:200,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:50,unit:"centuries"}),major:new b({value:500,
unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:100,unit:"centuries"}),major:new b({value:1E3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:200,unit:"centuries"}),major:new b({value:1E3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:500,unit:"centuries"}),major:new b({value:5E3,unit:"centuries"}),format:{era:"short",year:"numeric"}},{minor:new b({value:1E3,unit:"centuries"}),major:new b({value:1E4,unit:"centuries"}),
format:{era:"short",year:"numeric"}}]);d=function(T){function F(a,e){a=T.call(this,a,e)||this;a._slider=new da({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1});a._tickFormat=null;a.disabled=!1;a.effectiveStops=null;a.fullTimeExtent=null;a.iconClass="esri-icon-time-clock";a.label=void 0;a.labelFormatFunction=null;a.loop=!1;a.messages=null;a.messagesCommon=null;a.mode="time-window";a.playRate=1E3;a.stops={count:10};a.tickConfigs=null;a.timeExtent=null;a.timeVisible=!1;a.values=
null;a.view=null;a.viewModel=new S;return a}M._inheritsLoose(F,T);var k=F.prototype;k.initialize=function(){this.own([this._slider.watch("values",a=>{var e;const v=null==(e=this.values)?void 0:e.map(z=>z.getTime());P.equals(a,v)||this.set("values",a.map(z=>new Date(z)))}),X.on(window,"resize",ba.throttle(()=>this.scheduleRender(),100)),aa.init(this,"effectiveStops",()=>this._updateSliderSteps())]);this._validateTimeExtent()};k.destroy=function(){this._slider.destroy();this._tickFormat=null};k.next=
function(){};k.play=function(){};k.previous=function(){};k.stop=function(){return null};k.render=function(){var a;const {_slider:e,domNode:v,effectiveStops:z,fullTimeExtent:w,interactive:t,messagesCommon:x,mode:J,tickConfigs:K,timeVisible:G,values:u,viewModel:fa}=this;if(null!=w){const {start:H,end:U}=w;if(null!=H&&null!=U){var y=H.getTime(),l=U.getTime(),h=e.min!==y||e.max!==l;h&&(e.min=y,e.max=l);if(null!=K)e.tickConfigs!==K&&(e.tickConfigs=K);else{var g,n,r=null!=(g=null==(n=e.trackElement)?void 0:
n.offsetWidth)?g:400;const ha=(l-y)/r,A=ea.find(C=>C.minor.toMilliseconds()>3*ha);if(g=this._tickFormat!==A&&null!=A)this._tickFormat=A;if(h||g)h={mode:"position",values:this._getTickPositions(A.minor),labelsVisible:!1,tickCreatedFunction:(C,L)=>{L.classList.add("minorTick")}},g={mode:"position",values:this._getTickPositions(A.major),labelsVisible:!0,tickCreatedFunction:(C,L)=>{L.classList.add("majorTick")},labelFormatFunction:C=>B.formatDate(C,A.format)},e.tickConfigs=[h,g]}}}h=null==u?void 0:u.map(H=>
H.getTime());P.equals(e.values,h)||(e.values=h);e.disabled=!t;l=null==w?void 0:w.start;h=null==w?void 0:w.end;r=(g=null!=(a=null==u?void 0:u.length)?a:0)&&this._formatDate(u[0]);var D=g&&G&&this._formatTime(u[0]),E=1<g&&"time-window"===J&&this._formatDate(u[1]);const V=1<g&&"time-window"===J&&G&&this._formatTime(u[1]);({state:a}=fa);y="ready"===a;g="playing"===a;n=!t||0===z.length;a="auto"===this.layout?858>v.clientWidth?"compact":"wide":this.layout;y=c.jsx("div",{class:"esri-time-slider__animation"},
c.jsx("button",{"aria-disabled":n?"true":"false","aria-label":g?x.control.stop:x.control.play,bind:this,class:this.classes("esri-widget--button","esri-time-slider__animation-button",n&&"esri-button--disabled"),disabled:n,title:g?x.control.stop:x.control.play,onclick:this._playOrStopClick,type:"button"},c.jsx("div",{class:this.classes((y||n)&&"esri-icon-play",g&&"esri-icon-pause")})));r=this.labelFormatFunction?c.jsx("div",{key:"extent",bind:this,class:"esri-time-slider__time-extent-date","data-type":"extent",
"data-layout":a,"data-date":u,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[r&&c.jsx("div",{key:"start-date-group",class:"esri-time-slider__time-extent-group"},c.jsx("div",{key:"start-date",class:"esri-time-slider__time-extent-date"},r),D&&c.jsx("div",{key:"start-time",class:"esri-time-slider__time-extent-time"},D)),E&&c.jsx("div",{key:"separator",class:"esri-time-slider__time-extent-separator"},"\u2013"),r&&c.jsx("div",{key:"end-date-group",class:"esri-time-slider__time-extent-group"},
c.jsx("div",{key:"end-date",class:"esri-time-slider__time-extent-date"},E),V&&c.jsx("div",{key:"end-time",class:"esri-time-slider__time-extent-time"},V))];r=c.jsx("div",{class:this.classes("esri-time-slider__time-extent",!t&&"esri-button--disabled")},[r]);l=this.labelFormatFunction?c.jsx("div",{key:"min-date",bind:this,class:"esri-time-slider__min-date","data-date":l,"data-type":"min","data-layout":a,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[l&&c.jsx("div",{key:"min-date",class:"esri-time-slider__min-date"},
this._formatDate(l)),l&&G&&c.jsx("div",{key:"min-time"},this._formatTime(l))];l=c.jsx("div",{class:this.classes("esri-time-slider__min",!t&&"esri-button--disabled")},[l]);D=c.jsx("div",{class:"esri-time-slider__slider"},e.render());h=this.labelFormatFunction?c.jsx("div",{key:"max-date",bind:this,class:"esri-time-slider__max-date","data-date":h,"data-type":"max","data-layout":a,afterCreate:this._createLabel,afterUpdate:this._createLabel}):[h&&c.jsx("div",{key:"max-date",class:"esri-time-slider__max-date"},
this._formatDate(h)),h&&G&&c.jsx("div",{key:"max-time"},this._formatTime(h))];h=c.jsx("div",{class:this.classes("esri-time-slider__max",!t&&"esri-button--disabled")},[h]);E=c.jsx("div",{class:"esri-time-slider__previous"},c.jsx("button",{"aria-disabled":n?"true":"false","aria-label":x.pagination.previous,bind:this,class:this.classes("esri-widget--button","esri-time-slider__previous-button",(g||n)&&"esri-button--disabled"),disabled:n,title:x.pagination.previous,onclick:this._previousClick,type:"button"},
c.jsx("div",{class:"esri-icon-reverse"})));g=c.jsx("div",{class:"esri-time-slider__next"},c.jsx("button",{"aria-disabled":n?"true":"false","aria-label":x.pagination.next,bind:this,class:this.classes("esri-widget--button","esri-time-slider__next-button",(g||n)&&"esri-button--disabled"),disabled:n,title:x.pagination.next,onclick:this._nextClick,type:"button"},c.jsx("div",{class:"esri-icon-forward"})));return c.jsx("div",{class:this.classes("esri-time-slider","esri-widget",`${"esri-time-slider__mode--"}${J}`,
`${"esri-time-slider__layout--"}${a}`,!t&&"esri-disabled")},"wide"===a&&c.jsx("div",{class:"esri-time-slider__row"},[y,r,l,D,h,E,g]),"compact"===a&&[c.jsx("div",{key:"time-slider-row-1",class:"esri-time-slider__row"},[r]),c.jsx("div",{key:"time-slider-row-2",class:"esri-time-slider__row"},[D]),c.jsx("div",{key:"time-slider-row-3",class:"esri-time-slider__row"},[l,E,y,g,h])])};k.updateWebDocument=function(a){var e;null==(e=this.viewModel)?void 0:e.updateWebDocument(a)};k._createLabel=function(a){const e=
a.getAttribute("data-type"),v=a.getAttribute("data-layout");this.labelFormatFunction(a["data-date"],e,a,v)};k._getTickPositions=function(a){var {fullTimeExtent:e}=this;const {start:v,end:z}=e;e=[];const {value:w,unit:t}=a;for(a=Q.truncateDate(v,t);a.getTime()<=z.getTime();)a.getTime()>=v.getTime()&&e.push(a.getTime()),a=Q.offsetDate(a,w,t);return e};k._formatDate=function(a){return B.formatDate(a,B.convertDateFormatToIntlOptions("short-date"))};k._formatTime=function(a){return B.formatDate(a,B.convertDateFormatToIntlOptions("long-time"))};
k._updateSliderSteps=function(){this._slider.steps=this.effectiveStops&&0<this.effectiveStops.length?this.effectiveStops.map(a=>a.getTime()):null};k._validateTimeExtent=function(){if(this.fullTimeExtent&&this.mode&&this.values){if(!Array.isArray(this.values))throw new O("time-slider:invalid-values","Values must be an array of dates.");if(0===this.values.length||this.values.some(a=>!(a instanceof Date)))throw new O("time-slider:invalid-values","Values must be an array of dates.");this.values=this.values.map(a=>
{a=a.getTime();a=Z.clamp(a,this.fullTimeExtent.start.getTime(),this.fullTimeExtent.end.getTime());return new Date(a)});switch(this.mode){case "instant":case "cumulative-from-start":case "cumulative-from-end":1<this.values.length&&this.values.splice(1);break;case "time-window":1===this.values.length?this.values.push(this.fullTimeExtent.end):2<this.values.length&&this.values.splice(2);this.values.sort((a,e)=>a.getTime()-e.getTime());break;default:N.neverReached(this.mode)}}};k._playOrStopClick=function(){switch(this.viewModel.state){case "ready":this.viewModel.play();
break;case "playing":this.viewModel.stop();break;case "disabled":break;default:N.neverReached(this.viewModel.state)}};k._previousClick=function(){this.viewModel.previous()};k._nextClick=function(){this.viewModel.next()};M._createClass(F,[{key:"interactive",get:function(){return!this.disabled&&this.viewModel&&"disabled"!==this.viewModel.state}},{key:"layout",set:function(a){-1===["auto","compact","wide"].indexOf(a)&&(a="auto");this._set("layout",a)}}]);return F}(ca);f.__decorate([q.property()],d.prototype,
"disabled",void 0);f.__decorate([m.aliasOf("viewModel.effectiveStops"),p.renderable()],d.prototype,"effectiveStops",void 0);f.__decorate([m.aliasOf("viewModel.fullTimeExtent"),p.renderable()],d.prototype,"fullTimeExtent",void 0);f.__decorate([q.property()],d.prototype,"iconClass",void 0);f.__decorate([q.property({dependsOn:["disabled","viewModel.state"],readOnly:!0}),p.renderable()],d.prototype,"interactive",null);f.__decorate([q.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
d.prototype,"label",void 0);f.__decorate([q.property(),p.renderable()],d.prototype,"labelFormatFunction",void 0);f.__decorate([q.property({value:"auto"}),p.renderable()],d.prototype,"layout",null);f.__decorate([m.aliasOf("viewModel.loop")],d.prototype,"loop",void 0);f.__decorate([q.property(),p.renderable(),R.messageBundle("esri/widgets/TimeSlider/t9n/TimeSlider")],d.prototype,"messages",void 0);f.__decorate([q.property(),p.renderable(),R.messageBundle("esri/t9n/common")],d.prototype,"messagesCommon",
void 0);f.__decorate([m.aliasOf("viewModel.mode"),p.renderable()],d.prototype,"mode",void 0);f.__decorate([m.aliasOf("viewModel.playRate")],d.prototype,"playRate",void 0);f.__decorate([m.aliasOf("viewModel.stops")],d.prototype,"stops",void 0);f.__decorate([q.property(),p.renderable()],d.prototype,"tickConfigs",void 0);f.__decorate([m.aliasOf("viewModel.timeExtent")],d.prototype,"timeExtent",void 0);f.__decorate([q.property({nonNullable:!0}),p.renderable()],d.prototype,"timeVisible",void 0);f.__decorate([m.aliasOf("viewModel.values"),
p.renderable()],d.prototype,"values",void 0);f.__decorate([m.aliasOf("viewModel.view")],d.prototype,"view",void 0);f.__decorate([q.property({type:S}),p.renderable(["viewModel.state"])],d.prototype,"viewModel",void 0);f.__decorate([m.aliasOf("viewModel.next")],d.prototype,"next",null);f.__decorate([m.aliasOf("viewModel.play")],d.prototype,"play",null);f.__decorate([m.aliasOf("viewModel.previous")],d.prototype,"previous",null);f.__decorate([m.aliasOf("viewModel.stop")],d.prototype,"stop",null);f.__decorate([I.accessibleHandler()],
d.prototype,"_playOrStopClick",null);f.__decorate([I.accessibleHandler()],d.prototype,"_previousClick",null);f.__decorate([I.accessibleHandler()],d.prototype,"_nextClick",null);return d=f.__decorate([W.subclass("esri.widgets.TimeSlider")],d)});