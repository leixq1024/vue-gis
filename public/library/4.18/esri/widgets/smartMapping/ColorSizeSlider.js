// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../renderers/visualVariables/support/ColorStop ../../renderers/visualVariables/support/SizeStop ../support/widgetUtils ../support/decorators/messageBundle ../support/decorators/renderable ../../chunks/index ./support/utils ./SmartMappingSliderBase ../../renderers/visualVariables/support/ColorSizeStop ./ColorSizeSlider/ColorSizeSliderViewModel".split(" "),
function(M,t,q,v,S,T,B,z,U,N,F,V,W,X,G,H,O,P,I,u,J,Q,K,R){var C;q=C=function(L){function A(a,b){a=L.call(this,a,b)||this;a._bgFillId=null;a._backgroundFillColor="#e0e0e0";a._minRampFillWidth=.2;a._rampFillId=null;a._rampNode=null;a._maxRampFillWidth=1;a.handlesSyncedToPrimary=null;a.label=void 0;a.messages=null;a.primaryHandleEnabled=null;a.stops=null;a.viewModel=new R;a.zoomOptions=null;a._bgFillId=`${a.id}-bg-fill`;a._rampFillId=`${a.id}-linear-gradient`;return a}M._inheritsLoose(A,L);A.fromRendererResult=
function(a,b){const {renderer:{authoringInfo:{univariateTheme:f}},color:{visualVariable:{stops:e}},size:{visualVariables:g},statistics:n}=a,{avg:d,stddev:k}=n;if(!e)throw new F("ColorSizeSlider-fromRendererResult:invalid-renderer-result","'result' must include 'color' variable.");const p="above-and-below"===f;var h=a.renderer.authoringInfo.visualVariables[0];a=h.minSliderValue;h=h.maxSliderValue;const l=g.find(c=>"outline"!==(null==c?void 0:c.target)&&!!(null==c||!c.axis||null!=c&&c.field||null!=
c&&c.valueExpression)&&((null==c?void 0:c.field)||(null==c?void 0:c.valueExpression))),m=l.stops,y=e.map((c,r)=>{const {color:x,label:D,value:E}=c;return new K({color:x,label:D,value:E,size:m&&0<m.length?m[r].size:0===r?l.minSize:r===e.length-1?l.maxSize:null})});return new C({max:h,min:a,stops:y,primaryHandleEnabled:p,handlesSyncedToPrimary:p,histogramConfig:{average:d,standardDeviation:k,bins:b?b.bins:[]}})};var w=A.prototype;w.updateFromRendererResult=function(a,b){const {renderer:{authoringInfo:{univariateTheme:f}},
color:{visualVariable:{stops:e}},size:{visualVariables:g},statistics:n}=a,{avg:d,stddev:k}=n;if(!e)throw new F("ColorSizeSlider-fromRendererResult:invalid-renderer-result","'result' must include 'color' variable.");const p="above-and-below"===f;var h=a.renderer.authoringInfo.visualVariables[0];a=h.minSliderValue;h=h.maxSliderValue;const l=g.find(c=>"outline"!==(null==c?void 0:c.target)&&!!(null==c||!c.axis||null!=c&&c.field||null!=c&&c.valueExpression)&&((null==c?void 0:c.field)||(null==c?void 0:
c.valueExpression))),m=l.stops,y=e.map((c,r)=>{const {color:x,label:D,value:E}=c;return new K({color:x,label:D,value:E,size:m&&0<m.length?m[r].size:0===r?l.minSize:r===e.length-1?l.maxSize:null})});this.set({max:h,min:a,stops:y,primaryHandleEnabled:p,handlesSyncedToPrimary:p,histogramConfig:{average:d,standardDeviation:k,bins:b?b.bins:[]}})};w.updateRenderer=function(a){const {stops:b}=this,f=b[0],e=b[b.length-1];var g=b[Math.floor(b.length/2)];a=a.clone();const n=a.visualVariables.map(d=>{if("size"===
d.type){if("outline"===(null==d?void 0:d.target)||!(null==d||!d.axis||null!=d&&d.field||null!=d&&d.valueExpression))return d;v.isSome(d.minSize)&&v.isSome(d.maxSize)?d.set({maxDataValue:e.value,minDataValue:f.value,maxSize:e.size,minSize:f.size}):d.stops&&d.set({stops:b.map(k=>{const {label:p,size:h,value:l}=k;return new H({label:p,size:h,value:l})})})}else"color"===d.type&&d.set({stops:this.stops.map(k=>{const {color:p,label:h,value:l}=k;return new G({color:p,label:h,value:l})})});return d});a.visualVariables=
n;1<a.classBreakInfos.length&&(g=g.value,a.classBreakInfos[0].maxValue=g,a.classBreakInfos[1].minValue=g);return a};w.updateVisualVariables=function(a){return a.map(b=>{const f=b.clone();if("size"===b.type){if("outline"===(null==b?void 0:b.target)||!(null==b||!b.axis||null!=b&&b.field||null!=b&&b.valueExpression))return f;if(v.isSome(b.minSize)&&v.isSome(b.maxSize)){var {stops:e}=this;b=e[0];e=e[e.length-1];f.set({maxDataValue:e.value,minDataValue:b.value,maxSize:e.size,minSize:b.size})}else b.stops&&
f.set({stops:this.stops.map(g=>{const {label:n,size:d,value:k}=g;return new H({label:n,size:d,value:k})})})}else"color"===b.type&&f.set({stops:this.stops.map(g=>{const {color:n,label:d,value:k}=g;return new G({color:n,label:d,value:k})})});return f})};w.render=function(){const {state:a,label:b}=this,f="disabled"===a,e=this.classes("esri-color-size-slider","esri-widget","esri-widget--panel",{["esri-disabled"]:f});return u.jsx("div",{"aria-label":b,class:e},f?null:this.renderContent(this.renderRamp(),
"esri-color-size-slider__slider-container","esri-color-size-slider__histogram-container"))};w.renderRamp=function(){const {_bgFillId:a,_rampFillId:b,viewModel:f,zoomOptions:e}=this,g=f.getStopInfo();return u.jsx("div",{afterCreate:O.storeNode,bind:this,class:"esri-color-size-slider__ramp","data-node-ref":"_rampNode"},u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg"},u.jsx("defs",null,this.renderRampFillDefinition(b,g),this.renderBackgroundFillDefinition(a)),u.jsx("rect",{x:"0",y:"0",fill:this._backgroundFillColor,
height:"100%",width:"100%"}),this.renderPaths()),e?this.renderZoomCaps():null)};w.renderPaths=function(){if(this._rampNode){var {offsetHeight:a=0,offsetWidth:b=0}=this._rampNode;if(v.isSome(a)&&v.isSome(b)){var {primaryHandleEnabled:f,stops:e,values:g,viewModel:{max:n,min:d},_bgFillId:k,_maxRampFillWidth:p,_minRampFillWidth:h,_rampFillId:l}=this,m=[p,h];e[0].size<e[e.length-1].size&&m.reverse();var [y,c]=m,[r,x]=g;m=f?J.getDynamicPathForSizeStops({max:n,min:d,pathHeight:a,pathWidth:b,stops:e,padding:c}):
J.getPathForSizeStops({bottomValue:r,bottomWidth:y,max:n,min:d,pathHeight:a,pathWidth:b,topValue:x,topWidth:c});return[u.jsx("path",{key:"background",d:m,fill:`url(#${k})`}),u.jsx("path",{key:"fill",d:m,fill:`url(#${l})`})]}}};return A}(Q.SmartMappingSliderBase);t.__decorate([z.aliasOf("viewModel.handlesSyncedToPrimary")],q.prototype,"handlesSyncedToPrimary",void 0);t.__decorate([B.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],q.prototype,"label",void 0);t.__decorate([B.property(),
I.renderable(),P.messageBundle("esri/widgets/smartMapping/ColorSizeSlider/t9n/ColorSizeSlider")],q.prototype,"messages",void 0);t.__decorate([z.aliasOf("viewModel.primaryHandleEnabled")],q.prototype,"primaryHandleEnabled",void 0);t.__decorate([z.aliasOf("viewModel.stops")],q.prototype,"stops",void 0);t.__decorate([B.property(),I.renderable("viewModel.handlesSyncedToPrimary viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.primaryHandleEnabled viewModel.stops viewModel.values viewModel.zoomOptions".split(" "))],
q.prototype,"viewModel",void 0);t.__decorate([z.aliasOf("viewModel.zoomOptions")],q.prototype,"zoomOptions",void 0);return q=C=t.__decorate([N.subclass("esri.widgets.smartMapping.ColorSizeSlider")],q)});