// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../renderers/visualVariables/support/SizeStop ../../symbols/support/cimSymbolUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/decorators/renderable ../../chunks/index ./support/utils ./SmartMappingSliderBase ./BinaryColorSizeSlider/BinaryColorSizeSliderViewModel".split(" "),
function(K,k,e,F,R,x,z,L,S,M,T,U,V,A,G,H,N,O,B,q,C,P,Q){var D;const I={trackBackgroundColor:new A([224,224,224]),trackAboveFillColor:new A([149,149,149]),trackBelowFillColor:new A([149,149,149])};e=D=function(J){function y(a,b){a=J.call(this,a,b)||this;a._minRampFillWidth=.2;a._rampNode=null;a._rampFillId=null;a.handlesSyncedToPrimary=null;a.label=void 0;a.messages=null;a.stops=null;a.style={...I};a.viewModel=new Q;a.zoomOptions=null;a._rampFillId=`${a.id}-linear-gradient`;return a}K._inheritsLoose(y,
J);var l=y.prototype;l.castStyle=function(a){return{...I,...a}};y.fromRendererResult=function(a,b){const {size:{visualVariables:c},statistics:d}=a,{avg:f,stddev:m}=d,r=c[0].stops;var g=a.renderer.authoringInfo.visualVariables[0];const E=g.minSliderValue;g=g.maxSliderValue;a=a.renderer.classBreakInfos;let t,u=null;const n=h=>{if("cim"===h.type)return H.getCIMSymbolColor(h);if(h.symbolLayers){var v,w;return null==(w=(null==(v=h.symbolLayers)?void 0:v.getItemAt(0)).material)?void 0:w.color}return h.color};
if(1<a.length){var p=a[1].symbol;t=n(a[0].symbol);p=n(p)}1===a.length&&(u=n(a[0].symbol));return new D({max:g,min:E,stops:r,histogramConfig:{average:f,standardDeviation:m,bins:b?b.bins:[]},style:{trackAboveFillColor:p,trackBelowFillColor:t,trackFillColor:u},handlesSyncedToPrimary:!0})};l.updateFromRendererResult=function(a,b){const {size:{visualVariables:c},statistics:d}=a,{avg:f,stddev:m}=d,r=c[0].stops;var g=a.renderer.authoringInfo.visualVariables[0];const E=g.minSliderValue;g=g.maxSliderValue;
a=a.renderer.classBreakInfos;let t,u=null;const n=h=>{if("cim"===h.type)return H.getCIMSymbolColor(h);if(h.symbolLayers){var v,w;return null==(w=(null==(v=h.symbolLayers)?void 0:v.getItemAt(0)).material)?void 0:w.color}return h.color};if(1<a.length){var p=a[1].symbol;t=n(a[0].symbol);p=n(p)}1===a.length&&(u=n(a[0].symbol));this.set({max:g,min:E,stops:r,histogramConfig:{average:f,standardDeviation:m,bins:b?b.bins:[]},style:{trackAboveFillColor:p,trackBelowFillColor:t,trackFillColor:u},handlesSyncedToPrimary:!0})};
l.updateRenderer=function(a){var b,c;if("univariate-color-size"!==(null==(b=a.authoringInfo)?void 0:b.type)||"above-and-below"!==(null==(c=a.authoringInfo)?void 0:c.univariateTheme))return console.error("Input renderer must be a univariate renderer with an above-and-below theme."),null;a=a.clone();b=a.visualVariables.find(f=>"size"===f.type&&"outline"!==f.target&&f.stops);({stops:c}=this);if(!b||!c)return console.error("No size stops available."),null;const d=a.visualVariables.indexOf(b);a.visualVariables.splice(d,
1);b.stops=c;a.visualVariables.push(b);b=c[5===c.length?2:1].value;a.classBreakInfos[0].maxValue=b;a.classBreakInfos[1].minValue=b;return a};l.updateFromVisualVariable=function(a){if(a){var {maxDataValue:b,minDataValue:c,stops:d}=a;if(d)this.stops=d;else{const [f,m]=C.getSizesFromVariable(a);this.stops=[new G({value:c,size:m}),new G({value:b,size:f})]}}};l.render=function(){const {state:a,label:b}=this,c="disabled"===a,d=this.classes("esri-binary-color-size-slider","esri-widget","esri-widget--panel",
{["esri-disabled"]:c});return q.jsx("div",{"aria-label":b,class:d},c?null:this.renderContent(this.renderRamp(),"esri-binary-color-size-slider__slider-container","esri-binary-color-size-slider__histogram-container"))};l.renderRamp=function(){const {style:{trackBackgroundColor:a},zoomOptions:b}=this;return q.jsx("div",{afterCreate:N.storeNode,bind:this,class:"esri-binary-color-size-slider__ramp","data-node-ref":"_rampNode"},q.jsx("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},q.jsx("rect",
{x:"0",y:"0",fill:C.getFillFromColor(a),height:"100%",width:"100%"}),this.renderPrimaryRamp(),this.renderPath()),b?this.renderZoomCaps():null)};l.renderPrimaryRamp=function(){const {_rampFillId:a,style:{trackAboveFillColor:b,trackBelowFillColor:c},viewModel:d}=this;return[q.jsx("defs",null,this.renderRampFillDefinition(a,d.getGradientStopInfo(b,c)))]};l.renderPath=function(){if(this._rampNode){var {offsetHeight:a=0,offsetWidth:b=0}=this._rampNode;if(F.isSome(a)&&F.isSome(b)){var {stops:c,viewModel:{max:d,
min:f},_rampFillId:m,_minRampFillWidth:r}=this,g=C.getDynamicPathForSizeStops({max:d,min:f,pathHeight:a,pathWidth:b,stops:c,padding:r});return q.jsx("path",{d:g,fill:`url(#${m})`})}}};return y}(P.SmartMappingSliderBase);k.__decorate([z.aliasOf("viewModel.handlesSyncedToPrimary")],e.prototype,"handlesSyncedToPrimary",void 0);k.__decorate([x.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],e.prototype,"label",void 0);k.__decorate([x.property(),B.renderable(),O.messageBundle("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],
e.prototype,"messages",void 0);k.__decorate([z.aliasOf("viewModel.stops")],e.prototype,"stops",void 0);k.__decorate([x.property(),B.renderable()],e.prototype,"style",void 0);k.__decorate([L.cast("style")],e.prototype,"castStyle",null);k.__decorate([x.property(),B.renderable("viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values viewModel.zoomOptions".split(" "))],e.prototype,"viewModel",
void 0);k.__decorate([z.aliasOf("viewModel.zoomOptions")],e.prototype,"zoomOptions",void 0);return e=D=k.__decorate([M.subclass("esri.widgets.smartMapping.BinaryColorSizeSlider")],e)});