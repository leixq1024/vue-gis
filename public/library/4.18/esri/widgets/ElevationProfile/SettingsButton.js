// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/handleUtils ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/events ../../core/unitUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/decorators/renderable ../../chunks/index ../Widget ../support/Popover ./css".split(" "),
function(e,t,h,A,d,B,C,u,l,D,v,E,F,G,p,w,H,q,m,f,x,y,k){e.SettingsButton=function(r){function n(a,b){a=r.call(this,a,b)||this;a._messagesUnits=null;a._popover=null;a._buttonElement=null;a._clickOutsideHandle=null;a._requestFocusOnCreate=!1;return a}t._inheritsLoose(n,r);var c=n.prototype;c.destroy=function(){this._destroyPopover()};c.render=function(){const a=d.isSome(this._popover)&&this._popover.open?this._messages.hideSettings:this._messages.showSettings;return f.jsx("button",{class:this.classes(k.SETTINGS_CSS.base),
title:a,bind:this,afterCreate:this._initializePopover,onclick:this._togglePopover,"aria-label":a})};c._initializePopover=function(a){this._destroyPopover();this._buttonElement=a;const b=parseInt(getComputedStyle(a).getPropertyValue("--button-offset"),10);this._popover=new y({owner:this,placement:"bottom-end",offset:[b,0],anchorElement:a,renderContentFunction:()=>this._renderPopoverContent()})};c._destroyPopover=function(){d.applySome(this._clickOutsideHandle,a=>a.remove());d.destroyMaybe(this._popover)};
c._renderPopoverContent=function(){const a=this._messagesUnits,{unit:b,unitOptions:z}=this.viewModel;return f.jsx("div",{class:k.SETTINGS_CSS.popoverContent,bind:this,onkeydown:this._onPopoverKeyDown,afterCreate:this._onPopoverContentAfterCreate},f.jsx("label",{class:k.SETTINGS_CSS.selectLabel},this._messages.unitSelectLabel),f.jsx("select",{class:k.SETTINGS_CSS.select,value:b,bind:this,onchange:this._onUnitChange,afterCreate:this._onUnitSelectAfterCreate},z.map(g=>f.jsx("option",{key:g,value:g},
w.isMeasurementSystem(g)?a.systems[g]:a.units[g].pluralCapitalized))))};c._onUnitChange=function(a){this.viewModel.unit=a.target.value;this._closePopover()};c._onUnitSelectAfterCreate=function(a){this._requestFocusOnCreate&&(this._requestFocusOnCreate=!1,a.focus())};c._onPopoverKeyDown=function(a){switch(a.key){case "Enter":case "Escape":a.stopPropagation(),a.preventDefault(),this._closePopover()}};c._togglePopover=function(a){d.isSome(this._popover)&&this._popover.open?this._closePopover():this._openPopover()};
c._openPopover=function(){d.applySome(this._popover,a=>a.open=!0);this._requestFocusOnCreate=!0};c._closePopover=function({focusOnButton:a=!0}={}){d.applySome(this._popover,b=>b.open=!1);d.applySome(this._clickOutsideHandle,b=>b.remove());a&&d.applySome(this._buttonElement,b=>b.focus())};c._onPopoverContentAfterCreate=function(a){d.applySome(this._clickOutsideHandle,b=>b.remove());this._clickOutsideHandle=u.handlesGroup([p.on(a,"click",b=>b.stopPropagation()),p.on(window,"click",()=>this._closePopover({focusOnButton:!1}))])};
return n}(x);h.__decorate([l.property(),m.renderable(["unit","unitOptions"])],e.SettingsButton.prototype,"viewModel",void 0);h.__decorate([l.property(),m.renderable(),q.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],e.SettingsButton.prototype,"_messages",void 0);h.__decorate([l.property(),m.renderable(),q.messageBundle("esri/core/t9n/Units")],e.SettingsButton.prototype,"_messagesUnits",void 0);e.SettingsButton=h.__decorate([v.subclass("esri.widgets.ElevationProfile.SettingsButton")],
e.SettingsButton);Object.defineProperty(e,"__esModule",{value:!0})});