// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../core/maybe ../../../geometry/Polyline ../../../Color ../../../core/throttle ../../../chunks/vec4f64 ./constants ../../../views/3d/interactive/visualElements/OutlineVisualElement".split(" "),function(l,f,n,p,q,r,g,t){let w=function(){function m(a){this._params=a;this._visualElements=[];this.updateGeometry=q.throttle(c=>this._updateGeometry(c),100)}var h=m.prototype;h.destroy=function(){this.updateGeometry.remove();this._destroyVisualElements()};h._updateGeometry=function(a){if(f.isNone(a)||
1!==a.progress)this._destroyVisualElements();else{for(var c=a.lines.length;this._visualElements.length>c;)this._visualElements.pop().destroy();for(;this._visualElements.length<c;){var b=new t.OutlineVisualElement({view:this._params.view,elevationInfo:{mode:"absolute-height",offset:0},renderOccluded:4,innerWidth:g.PROFILE_LINES_STYLE_3D.width-g.PROFILE_LINES_STYLE_3D.outlineSize,width:g.PROFILE_LINES_STYLE_3D.width,falloff:g.PROFILE_LINES_STYLE_3D.falloff});this._visualElements.push(b)}for(b=0;b<c;++b){const d=
a.lines[b],e=this._visualElements[b];e.geometry=this._createLineGeometry(d);e.innerColor=r.fromArray(p.toUnitRGBA(d.color))}}};h._createLineGeometry=function(a){a=f.unwrapOr(a.samples,[]);const c=a.length-1,b=[];let d=[];for(let e=0;e<=c;e++){const {x:u,y:v,z:k}=a[e];f.isSome(k)&&d.push([u,v,k]);(e===c||f.isNone(k))&&d.length&&(b.push(d),d=[])}return new n({paths:b,hasZ:!0,spatialReference:this._params.view.spatialReference})};h._destroyVisualElements=function(){this._visualElements.forEach(a=>a.destroy());
this._visualElements.length=0};return m}();l.ProfileLines3D=w;Object.defineProperty(l,"__esModule",{value:!0})});