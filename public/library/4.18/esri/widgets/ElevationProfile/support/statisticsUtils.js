// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/maybe","../../../core/unitUtils"],function(r,e,q){function u(a,b){return e.isNone(b)?a:e.isSome(a)?Math.min(a,b):b}function k(a,b){return e.isNone(b)?a:e.isSome(a)?Math.max(a,b):b}function v(a,b){return e.isSome(a)&&e.isSome(b)?a*b:null}r.getBoundsInMeters=function(a){let b=null,c=null,d=null;for(const h of a){if(e.isNone(h))continue;const {statistics:g,spatialReference:l}=h;e.isNone(g)||(a=q.getMetersPerUnitForSR(l),b=k(b,v(g.maxDistance,a)),a=q.getMetersPerVerticalUnitForSR(l),
d=u(d,v(g.minElevation,a)),c=k(c,v(g.maxElevation,a)))}return{minDistance:0,maxDistance:e.unwrapOr(b,0),minElevation:e.unwrapOr(d,0),maxElevation:e.unwrapOr(c,0)}};r.getStatistics=function(a,b){const c=a.length;if(0===c)return null;var d=a[0].z;let h=d,g=d,l=0,m=0,w=null,x=null,A=e.isSome(d)?d:0,B=0,C=0;d=e.isSome(d)?1:0;let y=0,z=0;for(let t=1;t<c;++t){var p=a[t-1],f=a[t],n=f.z;f=f.distance-p.distance;0===f||e.isNone(n)||(d++,A+=n,h=u(h,n),g=k(g,n),p=p.z,e.isNone(p)||(n-=p,p=n*q.getMetersPerVerticalUnitForSR(b),
f*=q.getMetersPerUnitForSR(b),f=q.convertUnit(Math.atan2(p,f),"radians","degrees"),0<f?(l+=n,B+=f,w=k(w,f),y++):0>f&&(m-=n,C-=f,x=k(x,-f),z++)))}return 0===d?null:{maxDistance:a[c-1].distance,minElevation:h,maxElevation:g,avgElevation:0===d?null:A/d,elevationGain:l,elevationLoss:m,maxPositiveSlope:w,maxNegativeSlope:x,avgPositiveSlope:0===y?null:B/y,avgNegativeSlope:0===z?null:C/z}};r.mergeStatistics=function(a){a=a.filter(e.isSome);var b=a.length;if(0===b)return null;var c=a[0];if(1===b)return c;
b=c.maxDistance;let d=c.minElevation,h=c.maxElevation,g=c.maxPositiveSlope;c=c.maxNegativeSlope;for(let l=1;l<a.length;++l){const m=a[l];b=k(b,m.maxDistance);d=u(d,m.minElevation);h=k(h,m.maxElevation);g=k(g,m.maxPositiveSlope);c=k(c,m.maxNegativeSlope)}return{maxDistance:b,minElevation:d,maxElevation:h,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:g,maxNegativeSlope:c,avgPositiveSlope:null,avgNegativeSlope:null}};Object.defineProperty(r,"__esModule",{value:!0})});