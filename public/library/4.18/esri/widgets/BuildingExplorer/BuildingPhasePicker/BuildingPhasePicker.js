// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/aliasOf ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../support/widgetUtils ../../support/decorators/renderable ../../../chunks/index ../../Widget ../BuildingPhase".split(" "),
function(p,h,e,k,y,z,l,u,A,v,B,C,D,q,m,f,w,r){const x={nextPhase:"nextPhase",previousPhase:"previousPhase",currentPhase:"{{value}}"};e=function(t){function n(a,b){a=t.call(this,a,b)||this;a._defaultViewModel=new r;a.viewModel=a._defaultViewModel;a.messages=x;a._phasesContainer=null;a._shouldScrollCurrentPhaseIntoView=!0;a._shouldFocusCurrentPhase=!1;return a}p._inheritsLoose(n,t);var d=n.prototype;d.initialize=function(){this.own(this.watch(["_currentPhase","_container"],()=>{this._shouldScrollCurrentPhaseIntoView=
!0}))};d.destroy=function(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()};d.render=function(){if(2>this._phases.length)return f.jsx("div",null);const a=q.isRTL(),b=this.messages.previousPhase,c=this.messages.nextPhase;return f.jsx("div",{bind:this,key:this,class:this.classes("esri-widget","esri-building-phase-picker"),onkeydown:this._onKeyDown},f.jsx("button",{bind:this,class:a?"esri-building-phase-picker__arrow-right":"esri-building-phase-picker__arrow-left",disabled:!this.viewModel.hasPrevious,
onclick:this._onArrowLeftClick,"aria-label":b,title:b,type:"button"}),f.jsx("div",{bind:this,class:"esri-building-phase-picker__phases-container",afterCreate:q.storeNode,"data-node-ref":"_phasesContainer",afterUpdate:this._onPhasesContainerAfterUpdate},this._renderPhaseButtons()),f.jsx("button",{bind:this,class:a?"esri-building-phase-picker__arrow-left":"esri-building-phase-picker__arrow-right",disabled:!this.viewModel.hasNext,onclick:this._onArrowRightClick,"aria-label":c,title:c,type:"button"}))};
d._renderPhaseButtons=function(){const a=this._phases,b=[];for(let g=0;g<a.length;++g){var c=a[g];c={phase:c,active:k.isSome(this._currentPhase)?c<=this._currentPhase:!1,current:k.isSome(this._currentPhase)?c===this._currentPhase:!1};0<g&&b.push(this._renderDivider(c));b.push(this._renderPhaseButton(c))}return b};d._renderPhaseButton=function({phase:a,active:b,current:c}){const g=k.unwrap(this.viewModel.getValueLabel(a));return f.jsx("button",{key:`phase-${a}`,class:this.classes("esri-building-phase-picker__phase",
{["esri-building-phase-picker__phase--active"]:b,["esri-building-phase-picker__phase--current"]:c}),"aria-label":g,title:g,onclick:()=>this.viewModel.select(a),type:"button"},a)};d._renderDivider=function({phase:a,active:b}){return f.jsx("div",{key:`phase-divider-${a}`,class:this.classes("esri-building-phase-picker__divider",{["esri-building-phase-picker__divider--active"]:b})})};d._onKeyDown=function(a){switch(a.key){case "ArrowDown":case "ArrowLeft":a.stopPropagation();a.preventDefault();this.viewModel.previous();
this._shouldFocusCurrentPhase=!0;break;case "ArrowUp":case "ArrowRight":a.stopPropagation(),a.preventDefault(),this.viewModel.next(),this._shouldFocusCurrentPhase=!0}};d._onArrowLeftClick=function(){this.viewModel.previous()};d._onArrowRightClick=function(){this.viewModel.next()};d._onPhasesContainerAfterUpdate=function(){if(!k.isNone(this._phasesContainer)){var a=this._phasesContainer.querySelector(".esri-building-phase-picker__phase--current");k.isNone(a)||(this._shouldScrollCurrentPhaseIntoView&&
(this._phasesContainer.scrollLeft=-(this._phasesContainer.offsetWidth/2)+a.offsetLeft-a.offsetWidth/2,this._shouldScrollCurrentPhaseIntoView=!1),this._shouldFocusCurrentPhase&&(a.focus(),this._shouldFocusCurrentPhase=!1))}};p._createClass(n,[{key:"_currentPhase",get:function(){return this.viewModel.enabled?this.viewModel.value:null}}]);return n}(w);h.__decorate([l.property({type:r}),m.renderable(["viewModel.layers.length","viewModel.hasNext","viewModel.hasPrevious"])],e.prototype,"viewModel",void 0);
h.__decorate([l.property(),m.renderable()],e.prototype,"messages",void 0);h.__decorate([u.aliasOf("viewModel.allowedValues"),m.renderable()],e.prototype,"_phases",void 0);h.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.enabled","viewModel.value"]}),m.renderable()],e.prototype,"_currentPhase",null);h.__decorate([l.property()],e.prototype,"_phasesContainer",void 0);return e=h.__decorate([v.subclass("esri.widgets.BuildingExplorer.BuildingPhasePicker.BuildingPhasePicker")],e)});