// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../core/maybe ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/stack".split(" "),function(d,X,Y,p,e,m){function n(a=y){return[a[0],a[1],a[2],a[3]]}function G(a,b,c,f){return u(a,b,c,f,m.sv4d.get())}function z(a,b=n()){return u(a[0],a[1],a[2],a[3],b)}function u(a,b,c,f,h=n()){h[0]=a;h[1]=b;h[2]=c;h[3]=f;return h}function H(a,b,c=n()){e.copy(c,a);c[3]=b;return c}function A(a,b,c=n()){e.copy(c,b);b=e.dot(b,b);1E-5<Math.abs(b-1)&&1E-12<b&&e.scale(c,c,1/Math.sqrt(b));B(c,a,c);return c}
function C(a,b,c,f=n()){return D(e.subtract(m.sv3d.get(),a,b),e.subtract(m.sv3d.get(),c,b),a,f)}function I(a,b){return v(a,b,0,1,2)}function v(a,b,c,f,h){if(3>a.count)return!1;a.getVec(c,r);let g=f,k=!1;for(;g<a.count-1&&!k;)a.getVec(g,q),g++,k=!e.exactEquals(r,q);if(!k)return!1;g=Math.max(g,h);for(k=!1;g<a.count&&!k;)a.getVec(g,t),g++,e.subtract(w,r,q),e.normalize(w,w),e.subtract(x,q,t),e.normalize(x,x),k=!e.exactEquals(r,t)&&!e.exactEquals(q,t)&&.99619469809>Math.abs(e.dot(w,x));if(!k)return 0===
c&&1===f&&2===h?!1:v(a,b,0,1,2);C(r,q,t,b);return!0}function B(a,b,c){a!==c&&z(a,c);c[3]=-e.dot(c,b);return c}function J(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b}function D(a,b,c,f=n()){a=e.cross(m.sv3d.get(),b,a);return A(c,a,f)}function K(a,b,c){return X.isSome(b)?E(a,b.origin,b.direction,!0,!1,c):!1}function L(a,b,c){return E(a,b.origin,b.vector,!1,!1,c)}function M(a,b,c){return E(a,b.origin,b.vector,!1,!0,c)}function N(a,b){const {center:c,radius:f}=b;return 0<=l(a,c)-f}function O(a,
b){const {center:c,radius:f}=b;return 0>l(a,c)+f}function P(a,b){return 0<=l(a,b)}function Q(a,b){return 0>l(a,b)}function R(a,b){const c=b[0],f=b[1],h=b[2],g=b[3],k=b[4];b=b[5];return 0<=a[0]*(0<a[0]?c:g)+a[1]*(0<a[1]?f:k)+a[2]*(0<a[2]?h:b)+a[3]}function S(a,b){const c=e.dot(a,b.ray.direction);a=-l(a,b.ray.origin);if(0>a&&0<=c)return!1;if(-1E-6<c&&1E-6>c)return 0<a;if((0>a||0>c)&&!(0>a&&0>c))return!0;a/=c;0<c?a<b.c1&&(b.c1=a):a>b.c0&&(b.c0=a);return b.c0<=b.c1}function T(a,b){const c=e.dot(a,b.ray.direction);
a=-l(a,b.ray.origin);if(-1E-6<c&&1E-6>c)return 0<a;a/=c;0<c?a<b.c1&&(b.c1=a):a>b.c0&&(b.c0=a);return b.c0<=b.c1}function U(a,b,c){const f=e.scale(m.sv3d.get(),a,-a[3]);b=e.subtract(m.sv3d.get(),b,f);a=F(a,b,m.sv3d.get());e.add(c,a,f);return c}function F(a,b,c){a=e.scale(m.sv3d.get(),a,e.dot(a,b));e.subtract(c,b,a);return c}function V(a,b){return Math.abs(l(a,b))}function l(a,b){return e.dot(a,b)+a[3]}function E(a,b,c,f,h,g){const k=e.dot(a,c);if(0===k)return!1;a=-(e.dot(a,b)+a[3])/k;h&&(a=f?Math.max(0,
a):Y.clamp(a,0,1));if(0>a||!f&&1<a)return!1;e.add(g,b,e.scale(g,c,a));return!0}function W(a){return a}const r=p.create(),q=p.create(),t=p.create(),w=p.create(),x=p.create(),y=[0,0,1,0];p=Object.freeze({__proto__:null,create:n,wrap:G,copy:z,fromValues:u,fromNormalAndOffset:H,fromPositionAndNormal:A,fromPoints:C,fromManyPoints:I,fromManyPointsSampleAt:v,setOffsetFromPoint:B,negate:J,fromVectorsAndPoint:D,intersectRay:K,intersectLineSegment:L,intersectLineSegmentClamp:M,isSphereFullyInside:N,isSphereFullyOutside:O,
isPointInside:P,isPointOutside:Q,isAABBFullyInside:R,clip:S,clipInfinite:T,projectPoint:U,projectVector:F,distance:V,signedDistance:l,normal:W,UP:y});d.UP=y;d.clip=S;d.clipInfinite=T;d.copy=z;d.create=n;d.distance=V;d.fromManyPoints=I;d.fromManyPointsSampleAt=v;d.fromNormalAndOffset=H;d.fromPoints=C;d.fromPositionAndNormal=A;d.fromValues=u;d.fromVectorsAndPoint=D;d.intersectLineSegment=L;d.intersectLineSegmentClamp=M;d.intersectRay=K;d.isAABBFullyInside=R;d.isPointInside=P;d.isPointOutside=Q;d.isSphereFullyInside=
N;d.isSphereFullyOutside=O;d.negate=J;d.normal=W;d.planeModule=p;d.projectPoint=U;d.projectVector=F;d.setOffsetFromPoint=B;d.signedDistance=l;d.wrap=G});