// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry/Polygon ../../../../../geometry/Polyline ../../../../../geometry ../coordinateHelper".split(" "),function(n,u,w,x,v,y){let q=function(){function h(f){this.right=this.left=null;this.type="vertex";this.index=null;this.component=f}u._createClass(h,[{key:"pos",get:function(){return this._pos},set:function(f){this._pos=f;this.component.unnormalizeVertexPositions()}}]);return h}(),p=function(h,f,a){this.type="edge";
this.component=h;this.left=f;this.right=a;f.right=this;a.left=this},r=function(){function h(a){this.vertices=[];this.edges=[];this.data=a}var f=h.prototype;f.unnormalizeVertexPositions=function(){1>=this.vertices.length||this.data.coordinateHelper.unnormalize(this.vertices)};f.updateVertexIndex=function(a,g){if(0!==this.vertices.length){var d=this.vertices[0],c=null;do c=a,c.index=g++,a=c.right?c.right.right:null;while(null!=a&&a!==d);c.left&&c!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(c),
this.vertices.length-1)}};f.findEndVertex=function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]};f.swapVertices=function(a,g){const d=this.vertices[a];this.vertices[a]=this.vertices[g];this.vertices[g]=d};return h}();v=function(){function h(a){this.coordinateHelper=a;this.undoStack=[];this.redoStack=[];this.components=[]}var f=h.prototype;f.apply=function(a){a.apply();this.undoStack.push(a);this.redoStack=[]};f.undo=function(){if(0<this.undoStack.length){const a=this.undoStack.pop();
a.undo();this.redoStack.push(a)}};f.redo=function(){if(0<this.redoStack.length){const a=this.redoStack.pop();a.apply();this.undoStack.push(a)}};f.toPoint=function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)};f.toPolyline=function(){const a=[],g=this.coordinateHelper.toArray;this.components.forEach((d,c)=>{c=[];const e=d=d.vertices.find(b=>null==b.left);do c.push(g(d.pos)),d=d.right?d.right.right:
null;while(d&&d!==e);a.push(c)});return new x({paths:a,spatialReference:this.coordinateHelper.spatialReference})};f.toPolygon=function(){const a=[],g=this.coordinateHelper.toArray;this.components.forEach((d,c)=>{c=[];let e=d=d.vertices[0];const b=e;do c.push(g(e.pos)),e=e.right.right;while(e&&e!==b);c.push(g(d.pos));a.push(c)});return new w({rings:a,spatialReference:this.coordinateHelper.spatialReference})};h.fromGeometry=function(a,g){g=y.createCoordinateHelper(a.hasZ,a.hasM,a.spatialReference,g);
const d=new h(g);switch(a.type){case "polygon":a=a.rings;for(var c=0;c<a.length;++c){var e=a[c],b=new r(d),k=e.length-1;for(var l=0;l<k;++l){var t=g.fromArray(e[l]),m=new q(b);b.vertices.push(m);m.pos=t;m.index=l}e=b.vertices.length-1;for(k=0;k<e;++k)l=new p(b,b.vertices[k],b.vertices[k+1]),b.edges.push(l);e=new p(b,b.vertices[b.vertices.length-1],b.vertices[0]);b.edges.push(e);d.components.push(b)}break;case "polyline":for(a=a.paths,c=0;c<a.length;++c){e=a[c];b=new r(d);k=e.length;for(l=0;l<k;++l)t=
g.fromArray(e[l]),m=new q(b),b.vertices.push(m),m.pos=t,m.index=l;e=b.vertices.length-1;for(k=0;k<e;++k)l=new p(b,b.vertices[k],b.vertices[k+1]),b.edges.push(l);d.components.push(b)}}return d};u._createClass(h,[{key:"canUndo",get:function(){return 0<this.undoStack.length}},{key:"lastOperation",get:function(){return 0<this.undoStack.length?this.undoStack[this.undoStack.length-1]:null}},{key:"canRedo",get:function(){return 0<this.redoStack.length}}]);return h}();n.Component=r;n.Edge=p;n.EditGeometry=
v;n.Vertex=q;Object.defineProperty(n,"__esModule",{value:!0})});