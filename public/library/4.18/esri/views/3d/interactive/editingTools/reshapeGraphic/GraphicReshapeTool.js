// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/watchUtils ../../../../interactive/InteractiveToolBase ../../../../interactive/snapping/SnappingOptions ./isSupportedGraphic ./ReshapeOperation".split(" "),
function(b,g,d,v,h,w,x,e,y,m,z,A,B,n,p,q,r,t,k,u){b.GraphicReshapeTool=function(l){function f(a){a=l.call(this,a)||this;a._handles=new p;a._reshapeOperation=null;a._internalGeometryUpdate=!1;a.enableZ=!0;a.enableMoveGraphic=!0;a.type="reshape-3d";a.snappingOptions=new t.SnappingOptions;return a}g._inheritsLoose(f,l);var c=f.prototype;c.destroy=function(){this._handles.removeAll();this._reshapeOperation&&(this._reshapeOperation.destroy(),this._reshapeOperation=null);this._set("view",null);this._set("graphic",
null)};c._updateGeometry=function(){const a=this.graphic.geometry;0!==k.isSupportedGraphic(this.graphic)||!h.isSome(a)||"polygon"!==a.type&&"polyline"!==a.type?this._reshapeOperation.inputGeometry=null:this._reshapeOperation.inputGeometry=a.clone()};c._updateGraphic=function(){this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(0===k.isSupportedGraphic(this.graphic)){var a=this.watch("graphic.geometry",()=>{!1===this._internalGeometryUpdate&&this._updateGeometry()},!0);this._handles.add(a,
"onGraphicGeometryChange")}};c.manipulatorSelectionChanged=function(){this._reshapeOperation&&this._reshapeOperation.manipulatorSelectionChanged()};c._onReshapeGeometryChanged=function(){h.isNone(this.graphic)||(this._internalGeometryUpdate=!0,this.graphic.geometry=this._reshapeOperation.outputGeometry.clone(),this._internalGeometryUpdate=!1)};c.initialize=function(){this._reshapeOperation=new u.ReshapeOperation({tool:this});this._handles.add([this._reshapeOperation.on("reshape",a=>{"reshape"===a.type&&
this._onReshapeGeometryChanged();this.emit("reshape",a)}),this._reshapeOperation.on("move",a=>{"move"===a.type&&this._onReshapeGeometryChanged();this.emit("move",a)}),this._reshapeOperation.on("vertex-add",a=>{this._onReshapeGeometryChanged();this.emit("vertex-add",a)}),this._reshapeOperation.on("vertex-remove",a=>{this._onReshapeGeometryChanged();this.emit("vertex-remove",a)}),this._reshapeOperation.on("immediate-click",()=>this.emit("immediate-click")),q.init(this,"graphic",()=>{this._updateGraphic()},
!0)])};c.beforeUndo=function(){this._reshapeOperation.snappingEngine.doneSnapping()};c.onInputEvent=function(a){"key-down"!==a.type||"Delete"!==a.key&&"Backspace"!==a.key||this._reshapeOperation.removeSelectedVertices()};c.reset=function(){};g._createClass(f,[{key:"selectionManagementDisabled",get:function(){return!0}}]);return f}(n.EventedMixin(r.InteractiveToolBase));d.__decorate([e.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"view",void 0);d.__decorate([e.property({constructOnly:!0})],
b.GraphicReshapeTool.prototype,"graphic",void 0);d.__decorate([e.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableZ",void 0);d.__decorate([e.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableMoveGraphic",void 0);d.__decorate([e.property({readOnly:!0})],b.GraphicReshapeTool.prototype,"type",void 0);d.__decorate([e.property()],b.GraphicReshapeTool.prototype,"snappingOptions",void 0);b.GraphicReshapeTool=d.__decorate([m.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshapeTool")],
b.GraphicReshapeTool);Object.defineProperty(b,"__esModule",{value:!0})});