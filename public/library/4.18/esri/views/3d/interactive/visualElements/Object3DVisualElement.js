// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/Layer ../../webgl-engine/lib/Texture ./VisualElement".split(" "),function(k,l,e,n,p,q,r,h){h=function(m){function f(a){a=m.call(this,a.view)||this;a._resources=null;return a}l._inheritsLoose(f,m);var d=f.prototype;d.recreate=function(){this.attached&&this.createResources()};d.recreateGeometry=function(){if(!e.isNone(this._resources)){var a=
this._resources.object,b=this.view._stage;a.geometries.forEach(c=>{b.remove(2,c.id)});a.removeAllGeometries();this.createGeometries(a);this.visible||a.setVisible(this.visible);a.geometries.forEach(c=>{b.add(2,c)})}};d.createResources=function(){this.destroyResources();const a=this.view._stage;if(a){var b=new q("element",{isPickable:!1});a.add(0,b);a.addToViewContent([b.id]);var c=new n({idHint:"element",castShadow:!1});this.createExternalResources();this.createGeometries(c);c.geometries.forEach(g=>
{a.add(2,g)});this.forEachExternalResource(g=>{a.add(this._contentTypeFromResource(g),g)});a.add(1,c);b.addObject(c);this.visible||c.setVisible(!1);this._resources={layer:b,object:c}}};d._contentTypeFromResource=function(a){return a instanceof p?2:a instanceof r?4:3};d.destroyResources=function(){const a=this.view._stage;!e.isNone(this._resources)&&a&&(a.remove(1,this._resources.object.id),a.remove(0,this._resources.layer.id),this.forEachExternalResource(b=>{a.remove(this._contentTypeFromResource(b),
b.id);b.dispose()}),this._resources.object.geometries.forEach(b=>{a.remove(2,b.id)}),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};d.updateVisibility=function(a){e.isNone(this._resources)||this._resources.object.setVisible(a)};l._createClass(f,[{key:"object",get:function(){return e.isSome(this._resources)?this._resources.object:null}}]);return f}(h.VisualElement);k.Object3DVisualElement=h;Object.defineProperty(k,"__esModule",{value:!0})});