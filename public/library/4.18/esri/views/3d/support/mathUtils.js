// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../chunks/vec3f64","../../../chunks/vec3"],function(g,n,l,f){function p(a){for(const c in a){const b=a[c];b instanceof Function&&(a[c]=b.bind(a))}return a}let m=function(){function a(b,d){this.min=b;this.max=d;this.range=d-b}var c=a.prototype;c.ndiff=function(b,d=0){return Math.ceil((b-d)/this.range)*this.range+d};c._normalize=function(b,d,e,h=0,k=!1){e-=h;e<b?e+=this.ndiff(b-e):e>d&&(e-=this.ndiff(e-d));k&&e===d&&(e=b);return e+h};c.normalize=function(b,
d=0,e=!1){return this._normalize(this.min,this.max,b,d,e)};c.clamp=function(b,d=0){return n.clamp(b-d,this.min,this.max)+d};c.monotonic=function(b,d,e){return b<d?d:d+this.ndiff(b-d,e)};c.minimalMonotonic=function(b,d,e){return this._normalize(b,b+this.range,d,e)};c.center=function(b,d,e){d=this.monotonic(b,d,e);return this.normalize((b+d)/2,e)};c.diff=function(b,d,e){return this.monotonic(b,d,e)-b};c.shortestSignedDiff=function(b,d){b=this.normalize(b);d=this.normalize(d);const e=d-b;b=d<b?this.minimalMonotonic(b,
d)-b:d-this.minimalMonotonic(d,b);return Math.abs(e)<Math.abs(b)?e:b};c.contains=function(b,d,e){d=this.minimalMonotonic(b,d);e=this.minimalMonotonic(b,e);return e>b&&e<d};return a}();const t=l.create(),u=l.create(),w=p(new m(0,2*Math.PI)),x=p(new m(-Math.PI,Math.PI)),y=p(new m(0,360)),z=l.create(),q=l.create(),r=l.create();g.Cyclical=m;g.angle=function(a,c,b){a=f.normalize(q,a);c=f.normalize(r,c);const d=n.acosClamped(f.dot(a,c));return b&&(a=f.cross(z,a,c),0>f.dot(a,b))?-d:d};g.bilerp=function(a,
c,b,d,e,h){a+=(c-a)*e;return a+(b+(d-b)*e-a)*h};g.cartesianToSpherical=function(a,c){const b=f.length(a),d=n.asinClamped(a[2]/b);f.set(c,b,d,Math.atan2(a[1]/b,a[0]/b));return c};g.cosCapped=function(a,c){return a>c?Math.cos(c):Math.cos(a)};g.cyclical2PI=w;g.cyclicalDeg=y;g.cyclicalPI=x;g.directionFromTo=function(a,c,b){const d=b[0]-c[0],e=b[1]-c[1];c=b[2]-c[2];b=d*d+e*e+c*c;if(!b)return a[0]=0,a[1]=0,a[2]=0,a;b=1/Math.sqrt(b);a[0]=d*b;a[1]=e*b;a[2]=c*b;return a};g.fovx2fovy=function(a,c,b){return 2*
Math.atan(b*Math.tan(.5*a)/c)};g.fovy2fovx=function(a,c,b){return 2*Math.atan(c*Math.tan(.5*a)/b)};g.makeOrthonormal=function(a,c,b){b=b||a;const d=f.dot(a,c);f.set(b,a[0]-d*c[0],a[1]-d*c[1],a[2]-d*c[2]);f.normalize(b,b)};g.makePiecewiseLinearFunction=function(a){const c=a.length;return function(b){if(b<=a[0][0])return a[0][1];if(b>=a[c-1][0])return a[c-1][1];let d=1;for(;b>a[d][0];)d++;const e=a[d][0];b=(e-b)/(e-a[d-1][0]);return b*a[d-1][1]+(1-b)*a[d][1]}};g.maxScale=function(a){return Math.sqrt(Math.max(Math.max(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8],a[1]*a[1]+a[5]*a[5]+a[9]*a[9]),a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};g.moduloPositive=function(a,c){return(a%c+c)%c};g.planeFromPoints=function(a,c,b,d){f.subtract(t,c,a);f.subtract(u,b,a);f.cross(d,t,u);f.normalize(d,d);d[3]=-f.dot(a,d)};g.scaleFromMatrix=function(a,c){f.set(a,Math.sqrt(c[0]*c[0]+c[4]*c[4]+c[8]*c[8]),Math.sqrt(c[1]*c[1]+c[5]*c[5]+c[9]*c[9]),Math.sqrt(c[2]*c[2]+c[6]*c[6]+c[10]*c[10]));return a};g.slerp=function(a,c,b,d=l.create()){const e=f.length(a);var h=f.length(c),
k=f.dot(a,c)/(e*h);if(.9999999999999999>k){k=Math.acos(k);const v=((1-b)*e+b*h)/Math.sin(k);h=v/h*Math.sin(b*k);f.scale(q,a,v/e*Math.sin((1-b)*k));f.scale(r,c,h);return f.add(d,q,r)}return f.lerp(d,a,c,b)};g.sphericalToCartesian=function(a,c){const b=a[0],d=a[1];a=a[2];const e=Math.cos(d);f.set(c,b*e*Math.cos(a),b*e*Math.sin(a),b*Math.sin(d))};g.tangentFrame=function(a,c,b){Math.abs(a[0])>Math.abs(a[1])?f.set(c,0,1,0):f.set(c,1,0,0);f.cross(b,a,c);f.normalize(c,c);f.cross(c,b,a);f.normalize(b,b)};
Object.defineProperty(g,"__esModule",{value:!0})});