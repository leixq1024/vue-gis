// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/triangle"],function(t,w,a,z){let v=1,x=null;const A=new Uint32Array([0]);let B=0;const c=w.create(),q=w.create(),y=w.create(),m=w.create();t.computeAttachmentOriginLines=function(b,d,e,n){if(!b)return!1;const {strideIdx:r,offsetIdx:g,data:f}=b;a.set(n,0,0,0);a.set(m,0,0,0);let k=b=0;const h=d?d.length-1:f.length/r-1;e=h+(e?2:0);for(let u=0;u<e;u+=2){var p=u<h?u:h,l=u<h?u+1:0;p=(d?d[p]:p)*r+g;l=(d?d[l]:l)*
r+g;c[0]=f[p+0];c[1]=f[p+1];c[2]=f[p+2];q[0]=f[l+0];q[1]=f[l+1];q[2]=f[l+2];a.scale(c,a.add(c,c,q),.5);l=a.dist(c,q);0<l?(a.add(n,n,a.scale(c,c,l)),b+=l):(a.add(m,m,c),k++)}return 0!==b?(a.scale(n,n,1/b),!0):0!==k?(a.scale(n,m,1/k),!0):!1};t.computeAttachmentOriginPoints=function(b,d,e){if(!b||!d)return!1;const {strideIdx:n,offsetIdx:r,data:g}=b;a.set(e,0,0,0);b=-1;let f=0;for(let k=0;k<d.length;k++){const h=d[k]*n+r;b!==h&&(e[0]+=g[h+0],e[1]+=g[h+1],e[2]+=g[h+2],f++);b=h}1<f&&a.scale(e,e,1/f);return 0<
f};t.computeAttachmentOriginTriangles=function(b,d,e){if(!b)return!1;const {strideIdx:n,offsetIdx:r,data:g}=b;a.set(e,0,0,0);a.set(m,0,0,0);let f=b=0;for(let h=0;h<d.length-2;h+=3){var k=d[h+0]*n+r;const p=d[h+1]*n+r,l=d[h+2]*n+r;a.set(c,g[k+0],g[k+1],g[k+2]);a.set(q,g[p+0],g[p+1],g[p+2]);a.set(y,g[l+0],g[l+1],g[l+2]);(k=z.areaPoints3d(c,q,y))?(a.add(c,c,q),a.add(c,c,y),a.scale(c,c,1/3*k),a.add(e,e,c),b+=k):(a.add(m,m,c),a.add(m,m,q),a.add(m,m,y),f+=3)}return 0===f&&0===b?!1:0!==b?(a.scale(e,e,1/
b),!0):0!==f?(a.scale(e,m,1/f),!0):!1};t.generateDefaultIndexArray=function(b){if(1===b)return A;if(b>v||null==x){for(;b>v;)v*=2;x=new Uint32Array(v);for(let d=0;d<v;d++)x[d]=d}return new Uint32Array(x.buffer,0,b)};t.getNewId=function(){return B++};Object.defineProperty(t,"__esModule",{value:!0})});