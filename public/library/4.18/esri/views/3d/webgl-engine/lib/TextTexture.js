// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/Evented ../../../../core/mathUtils ../../../webgl/Texture ../../../webgl/capabilities/isWebGL2Context ./Texture ./TextRenderer".split(" "),function(k,f,l,g,m,n,p,h){const q={canvas:null};return function(){function d(a,c,b,r){this._idHint=r;this._glTexture=null;this.events=new l;this._requiresPowerOfTwo=!n(a.gl);this._renderer=new h.TextRenderer(c,b)}var e=d.prototype;e.createDescriptor=function(a){return{target:3553,
pixelFormat:6408,dataType:5121,wrapMode:33071,flipped:!0,samplingMode:9987,hasMipmap:!0,preMultiplyAlpha:!0,maxAnisotropy:a.parameters.maxMaxAnisotropy}};e.load=function(a){if(f.isSome(this._glTexture))return this._glTexture;const c=h.getTextHelperCanvas(q,this.textureWidth,this.textureHeight),b=c.getContext("2d");b.save();this._renderer.render(b,0,this.textureHeight-this._renderer.renderedHeight);this._glTexture=new m(a,this.createDescriptor(a),c);b.restore();return this._glTexture};e.unload=function(){f.isSome(this._glTexture)&&
(this._glTexture.dispose(),this._glTexture=null);this.events.emit("unloaded")};k._createClass(d,[{key:"id",get:function(){null==this._id&&(this._id=p.idGen.gen(this._idHint));return this._id}},{key:"width",get:function(){return this._renderer.renderedWidth}},{key:"height",get:function(){return this._renderer.renderedHeight}},{key:"textureWidth",get:function(){const a=this.width;return this._requiresPowerOfTwo?g.nextHighestPowerOfTwo(a):a}},{key:"textureHeight",get:function(){const a=this.height;return this._requiresPowerOfTwo?
g.nextHighestPowerOfTwo(a):a}},{key:"displayWidth",get:function(){return this._renderer.displayWidth}},{key:"displayHeight",get:function(){return this._renderer.displayHeight}},{key:"texcoordScale",get:function(){return[this._renderer.renderedWidth/this.textureWidth,this._renderer.renderedHeight/this.textureHeight]}},{key:"requiresFrameUpdates",get:function(){return!1}}]);return d}()});