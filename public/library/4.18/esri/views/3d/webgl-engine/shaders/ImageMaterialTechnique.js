// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../lib/OrderIndependentTransparency ../lib/StencilUtils ../../../../chunks/ImageMaterial.glsl".split(" "),
function(w,p,t,f,c,l,e,x,y,m,u,z,n,q,A){l=function(k){function g(){return k.apply(this,arguments)||this}t._inheritsLoose(g,k);var a=g.prototype;a.initializeProgram=function(d){var h=g.shader.get();const b=this.configuration;h=h.build({output:b.output,slicePlaneEnabled:b.slicePlaneEnabled,sliceHighlightDisabled:b.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,OITEnabled:0===b.transparencyPassType});return new y(d.rctx,h.generateSource("vertex"),h.generateSource("fragment"),x.Default3D)};a.bindPass=
function(d,h,b){u.View.bindProjectionMatrix(this.program,b.camera.projectionMatrix);this.program.setUniform1f("opacity",h.opacity)};a.bindDraw=function(d){u.View.bindView(this.program,d);z.Slice.bindUniformsWithOrigin(this.program,this.configuration,d)};a.setPipelineState=function(d,h){const b=this.configuration,r=3===d,B=2===d;return m.makePipelineState({blending:0!==b.output&&7!==b.output||!b.transparent?null:r?C:n.OITBlending(d),culling:(v=>0!==v&&{face:1===v?1028:1029,mode:2305})(b.cullFace),
depthTest:{func:n.OITDepthTest(d)},depthWrite:r?b.writeDepth&&m.defaultDepthWriteParams:n.OITDepthWrite(d),colorWrite:m.defaultColorWriteParams,stencilWrite:b.sceneHasOcludees?q.stencilWriteMaskOn:null,stencilTest:b.sceneHasOcludees?h?q.stencilToolMaskBaseParams:q.stencilBaseAllZerosParams:null,polygonOffset:r||B?b.polygonOffset&&D:n.getOITPolygonOffset(b.enableOffset)})};a.initializePipeline=function(){this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);
return this.setPipelineState(this.configuration.transparencyPassType,!1)};a.getPipelineState=function(d){return d?this._occludeePipelineState:this.pipeline};return g}(l.ShaderTechnique);l.shader=new c.ReloadableShaderModule(A.ImageMaterialShader,()=>new Promise(function(k,g){w(["./ImageMaterial.glsl"],k,g)}));const D={factor:1,units:1},C=m.simpleBlendingParams(1,771);c=function(k){function g(){var a=k.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.sliceHighlightDisabled=
!1;a.transparent=!1;a.polygonOffset=!1;a.enableOffset=!0;a.writeDepth=!0;a.sceneHasOcludees=!1;a.transparencyPassType=3;return a}t._inheritsLoose(g,k);return g}(e.ShaderTechniqueConfiguration);f.__decorate([e.parameter({count:8})],c.prototype,"output",void 0);f.__decorate([e.parameter({count:3})],c.prototype,"cullFace",void 0);f.__decorate([e.parameter()],c.prototype,"slicePlaneEnabled",void 0);f.__decorate([e.parameter()],c.prototype,"sliceHighlightDisabled",void 0);f.__decorate([e.parameter()],
c.prototype,"transparent",void 0);f.__decorate([e.parameter()],c.prototype,"polygonOffset",void 0);f.__decorate([e.parameter()],c.prototype,"enableOffset",void 0);f.__decorate([e.parameter()],c.prototype,"writeDepth",void 0);f.__decorate([e.parameter()],c.prototype,"sceneHasOcludees",void 0);f.__decorate([e.parameter({count:4})],c.prototype,"transparencyPassType",void 0);p.ImageMaterialTechnique=l;p.ImageMaterialTechniqueConfiguration=c;Object.defineProperty(p,"__esModule",{value:!0})});