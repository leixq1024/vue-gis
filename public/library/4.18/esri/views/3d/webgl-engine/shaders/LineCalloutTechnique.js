// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../materials/internal/MaterialUtil ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../../../../chunks/LineCallout.glsl".split(" "),
function(t,p,q,h,c,m,g,u,v,l,n,w,x,y,r){m=function(k){function e(){return k.apply(this,arguments)||this}q._inheritsLoose(e,k);var b=e.prototype;b.initializeProgram=function(f){var d=e.shader.get();const a=this.configuration;d=d.build({occlusionTestEnabled:a.occlusionTestEnabled,verticalOffsetEnabled:a.verticalOffset,screenSizePerspectiveEnabled:a.screenSizePerspective,depthHudEnabled:a.depthHudEnabled,depthHudAlignStartEnabled:a.depthHudAlignStartEnabled,screenCenterOffsetUnitsEnabled:a.screenCenterOffsetUnitsEnabled,
slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,viewingMode:f.viewingMode,isDraped:!1});return new v(f.rctx,d.generateSource("vertex"),d.generateSource("fragment"),u.Default3D)};b.bindPass=function(f,d,a){n.View.bindProjectionMatrix(this.program,a.camera.projectionMatrix);r.LineCallout.bindUniforms(this.program,d,a.camera.pixelRatio||1);y.VerticalOffset.bindUniforms(this.program,d,a);this.program.setUniform1i("hudVisibilityTexture",0);f.bindTexture(a.hudVisibilityTexture,
0);this.program.setUniform1f("cameraGroundRelative",a.camera.aboveGround?1:-1);this.program.setUniform1f("polygonOffset",d.shaderPolygonOffset);n.View.bindViewport(this.program,a);this.program.setUniform1f("perDistancePixelRatio",Math.tan(a.camera.fovY/2)/(a.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix);this.program.setUniform2f("pixelToNDC",2/a.camera.fullViewport[2],2/a.camera.fullViewport[3]);this.program.setUniform1f("lineSize",Math.ceil(d.size)*
(a.camera.pixelRatio||1));w.bindScreenSizePerspective(d.screenSizePerspective,this.program,"screenSizePerspectiveAlignment")};b.bindDraw=function(f){n.View.bindView(this.program,f);n.View.bindCamPosition(this.program,f.origin,f.camera.viewInverseTransposeMatrix);x.Slice.bindUniformsWithOrigin(this.program,this.configuration,f)};b.initializePipeline=function(){return this.configuration.depthHudEnabled?l.makePipelineState({depthTest:{func:513},depthWrite:l.defaultDepthWriteParams}):l.makePipelineState({blending:l.separateBlendingParams(1,
770,771,771),depthTest:{func:513},colorWrite:l.defaultColorWriteParams})};return e}(m.ShaderTechnique);m.shader=new c.ReloadableShaderModule(r.LineCalloutShader,()=>new Promise(function(k,e){t(["./LineCallout.glsl"],k,e)}));c=function(k){function e(){var b=k.apply(this,arguments)||this;b.occlusionTestEnabled=!0;b.verticalOffset=!1;b.screenSizePerspective=!1;b.depthHudEnabled=!1;b.depthHudAlignStartEnabled=!1;b.screenCenterOffsetUnitsEnabled=0;b.slicePlaneEnabled=!1;return b}q._inheritsLoose(e,k);
return e}(g.ShaderTechniqueConfiguration);h.__decorate([g.parameter()],c.prototype,"occlusionTestEnabled",void 0);h.__decorate([g.parameter()],c.prototype,"verticalOffset",void 0);h.__decorate([g.parameter()],c.prototype,"screenSizePerspective",void 0);h.__decorate([g.parameter()],c.prototype,"depthHudEnabled",void 0);h.__decorate([g.parameter()],c.prototype,"depthHudAlignStartEnabled",void 0);h.__decorate([g.parameter({count:2})],c.prototype,"screenCenterOffsetUnitsEnabled",void 0);h.__decorate([g.parameter()],
c.prototype,"slicePlaneEnabled",void 0);p.LineCalloutTechnique=m;p.LineCalloutTechniqueConfiguration=c;Object.defineProperty(p,"__esModule",{value:!0})});