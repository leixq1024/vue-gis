// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/hud/HUDOcclusionPass.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../../../../chunks/HUDMaterial.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../lib/OrderIndependentTransparency".split(" "),
function(u,p,q,f,c,l,d,v,w,m,n,x,y,r,z,A,B,t,C,D){l=function(k){function h(){return k.apply(this,arguments)||this}q._inheritsLoose(h,k);var b=h.prototype;b.initializeProgram=function(g){var e=h.shader.get();const a=this.configuration;e=e.build({output:a.output,FrontFacePass:2===a.transparencyPassType,viewingMode:g.viewingMode,occlusionTestEnabled:a.occlusionTestEnabled,signedDistanceFieldEnabled:a.sdf,slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,
debugDrawBorder:a.debugDrawBorder,binaryHighlightOcclusionEnabled:a.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:a.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:a.screenSizePerspective,verticalOffsetEnabled:a.verticalOffset,pixelSnappingEnabled:a.pixelSnappingEnabled,vvSize:a.vvSize,vvColor:a.vvColor,vvInstancingEnabled:!1,isDraped:a.isDraped});return new w(g.rctx,e.generateSource("vertex"),e.generateSource("fragment"),v.Default3D)};b.bindPass=function(g,e,a){n.View.bindProjectionMatrix(this.program,
a.camera.projectionMatrix);this.program.setUniform1f("cameraGroundRelative",a.camera.aboveGround?1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(a.camera.fovY/2)/(a.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",a.camera.viewInverseTransposeMatrix);this.program.setUniform1f("polygonOffset",e.shaderPolygonOffset);C.VerticalOffset.bindUniforms(this.program,e,a);y.ScreenSizePerspective.bindUniforms(this.program,e);this.program.setUniform1f("pixelRatio",a.camera.pixelRatio||
1);n.View.bindViewport(this.program,a);6===this.configuration.output?z.HUDOcclusion.bindUniforms(this.program):(r.HUD.bindUniforms(this.program,a),t.HUDMaterial.bindUniforms(this.program,e,a.camera.pixelRatio||1),B.VisualVariables.bindUniforms(this.program,e),this.configuration.occlusionTestEnabled&&r.HUD.bindVisibilityTexture(g,this.program,a));4===this.configuration.output&&A.OutputHighlight.bindOutputHighlight(g,this.program,a)};b.bindDraw=function(g){n.View.bindView(this.program,g);n.View.bindCamPosition(this.program,
g.origin,g.camera.viewInverseTransposeMatrix);x.Slice.bindUniformsWithOrigin(this.program,this.configuration,g)};b.setPipelineState=function(g){const e=this.configuration,a=3===g,F=this.configuration.polygonOffsetEnabled&&E,G=!a&&2!==g||4===e.output?null:(e.depthEnabled||6===e.output)&&m.defaultDepthWriteParams;return m.makePipelineState({blending:0===e.output||7===e.output||4===e.output?a?H:D.OITBlending(g):null,depthTest:{func:515},depthWrite:G,colorWrite:m.defaultColorWriteParams,polygonOffset:F})};
b.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};q._createClass(h,[{key:"primitiveType",get:function(){return 6===this.configuration.output?0:4}}]);return h}(l.ShaderTechnique);l.shader=new c.ReloadableShaderModule(t.HUDMaterialShader,()=>new Promise(function(k,h){u(["./HUDMaterial.glsl"],k,h)}));const E={factor:0,units:-4},H=m.simpleBlendingParams(1,771);c=function(k){function h(){var b=k.apply(this,arguments)||this;b.output=0;b.occlusionTestEnabled=
!0;b.sdf=!1;b.vvSize=!1;b.vvColor=!1;b.verticalOffset=!1;b.screenSizePerspective=!1;b.screenCenterOffsetUnitsEnabled=0;b.debugDrawBorder=!0;b.binaryHighlightOcclusion=!0;b.slicePlaneEnabled=!1;b.polygonOffsetEnabled=!1;b.depthEnabled=!0;b.transparencyPassType=3;b.pixelSnappingEnabled=!0;b.isDraped=!1;return b}q._inheritsLoose(h,k);return h}(d.ShaderTechniqueConfiguration);f.__decorate([d.parameter({count:8})],c.prototype,"output",void 0);f.__decorate([d.parameter()],c.prototype,"occlusionTestEnabled",
void 0);f.__decorate([d.parameter()],c.prototype,"sdf",void 0);f.__decorate([d.parameter()],c.prototype,"vvSize",void 0);f.__decorate([d.parameter()],c.prototype,"vvColor",void 0);f.__decorate([d.parameter()],c.prototype,"verticalOffset",void 0);f.__decorate([d.parameter()],c.prototype,"screenSizePerspective",void 0);f.__decorate([d.parameter({count:2})],c.prototype,"screenCenterOffsetUnitsEnabled",void 0);f.__decorate([d.parameter()],c.prototype,"debugDrawBorder",void 0);f.__decorate([d.parameter()],
c.prototype,"binaryHighlightOcclusion",void 0);f.__decorate([d.parameter()],c.prototype,"slicePlaneEnabled",void 0);f.__decorate([d.parameter()],c.prototype,"polygonOffsetEnabled",void 0);f.__decorate([d.parameter()],c.prototype,"depthEnabled",void 0);f.__decorate([d.parameter({count:4})],c.prototype,"transparencyPassType",void 0);f.__decorate([d.parameter()],c.prototype,"pixelSnappingEnabled",void 0);f.__decorate([d.parameter()],c.prototype,"isDraped",void 0);p.HUDMaterialTechnique=l;p.HUDMaterialTechniqueConfiguration=
c;Object.defineProperty(p,"__esModule",{value:!0})});