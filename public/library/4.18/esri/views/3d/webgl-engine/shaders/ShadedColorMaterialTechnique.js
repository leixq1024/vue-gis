// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../chunks/vec4f64 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../lib/OrderIndependentTransparency ../core/shaderLibrary/ScreenSizeScaling.glsl ../../../../chunks/ShadedColorMaterial.glsl".split(" "),
function(x,n,u,h,y,e,p,f,z,r,t,A,q,B,C){p=function(m){function k(){return m.apply(this,arguments)||this}u._inheritsLoose(k,m);var d=k.prototype;d.initializeProgram=function(c){var a=k.shader.get();const b=this.configuration;a=a.build({output:b.output,slicePlaneEnabled:b.slicePlaneEnabled,sliceHighlightDisabled:b.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:b.screenSizeEnabled,shadingEnabled:b.shadingEnabled,OITEnabled:0===b.transparencyPassType});return new z(c.rctx,a.generateSource("vertex"),
a.generateSource("fragment"),v)};d.bindPass=function(c,a,b){const {screenSizeEnabled:l,shadingEnabled:g}=this.configuration,{color:w,shadingTint:D,shadingDirection:E}=a;t.View.bindProjectionMatrix(this.program,b.camera.projectionMatrix);this.program.setUniform4fv("color",w);g&&(this.program.setUniform4fv("shadedColor",this.blendColor(F,D,w)),this.program.setUniform3fv("shadingDirection",E),this.program.setUniformMatrix4fv("viewNormal",b.camera.viewInverseTransposeMatrix));l&&B.ScreenSizeScaling.bindPassUniforms(this.program,
a,b)};d.blendColor=function(c,a,b){const l=1-a[3],g=a[3]+b[3]*l;if(0===g)return c[3]=g,c;c[0]=(a[0]*a[3]+b[0]*b[3]*l)/g;c[1]=(a[1]*a[3]+b[1]*b[3]*l)/g;c[2]=(a[2]*a[3]+b[2]*b[3]*l)/g;c[3]=b[3];return c};d.bindDraw=function(c){t.View.bindView(this.program,c);t.View.bindCamPosition(this.program,c.origin,c.camera.viewInverseTransposeMatrix);A.Slice.bindUniformsWithOrigin(this.program,this.configuration,c)};d.setPipelineState=function(c){const a=this.configuration,b=3===c,l=2===c;return r.makePipelineState({blending:0!==
a.output&&7!==a.output||!a.transparent?null:b?q.blendingDefault:q.OITBlending(c),culling:(g=>0!==g&&{face:1===g?1028:1029,mode:2305})(a.cullFace),depthTest:{func:l?513:a.shadingEnabled?515:513},depthWrite:b?a.writeDepth&&r.defaultDepthWriteParams:q.OITDepthWrite(c),colorWrite:r.defaultColorWriteParams,polygonOffset:b||l?null:q.OITPolygonOffset})};d.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};return k}(p.ShaderTechnique);p.shader=new e.ReloadableShaderModule(C.ShadedColorMaterialShader,
()=>new Promise(function(m,k){x(["./ShadedColorMaterial.glsl"],m,k)}));e=function(m){function k(){var d=m.apply(this,arguments)||this;d.output=0;d.cullFace=0;d.slicePlaneEnabled=!1;d.sliceHighlightDisabled=!1;d.transparent=!1;d.writeDepth=!0;d.screenSizeEnabled=!0;d.shadingEnabled=!0;d.transparencyPassType=3;return d}u._inheritsLoose(k,m);return k}(f.ShaderTechniqueConfiguration);h.__decorate([f.parameter({count:8})],e.prototype,"output",void 0);h.__decorate([f.parameter({count:3})],e.prototype,"cullFace",
void 0);h.__decorate([f.parameter()],e.prototype,"slicePlaneEnabled",void 0);h.__decorate([f.parameter()],e.prototype,"sliceHighlightDisabled",void 0);h.__decorate([f.parameter()],e.prototype,"transparent",void 0);h.__decorate([f.parameter()],e.prototype,"writeDepth",void 0);h.__decorate([f.parameter()],e.prototype,"screenSizeEnabled",void 0);h.__decorate([f.parameter()],e.prototype,"shadingEnabled",void 0);h.__decorate([f.parameter({count:4})],e.prototype,"transparencyPassType",void 0);const v={position:0,
normal:1,offset:2},F=y.create();n.ShadedColorMaterialTechnique=p;n.ShadedColorMaterialTechniqueConfiguration=e;n.ShadedColorMaterialVertexAttrConstants={POSITION:"position",NORMAL:"normal",OFFSET:"offset"};n.ShadedColorMaterialVertexAttrLocations=v;Object.defineProperty(n,"__esModule",{value:!0})});