// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/tslib.es6 ../../../../../../core/maybe ../../../../../../chunks/vec3 ../../../../../../chunks/vec4f64 ../../../../../../chunks/vec4 ../../../../../../chunks/vec3f32 ../../../core/shaderLibrary/util/AlphaDiscard.glsl ../../../../../../chunks/vec4f32 ../../../../../../chunks/ComponentShader.glsl ./ComponentTechnique ../../../core/material/MaterialBase".split(" "),function(u,q,d,m,n,x,t,y,B,z,C,A,b){function D(l){switch(l){case 0:return 0;
case 1:return 7;case 2:return 1;case 3:return 2;case 4:return 8}}let f=function(l){function h(){var a=l.call(this)||this;a.baseColor=z.fromValues(1,1,1,1);a.usePBR=!1;a.mrrFactors=y.fromValues(1,1,.5);a.emissiveFactor=y.fromValues(0,0,0);a.baseColorTexture=null;a.metallicRoughnessTexture=null;a.emissionTexture=null;a.occlusionTexture=null;a.normalTexture=null;a.overlayTexOffset=x.fromValues(-1,-1,-1,-1);a.overlayTexScale=x.fromValues(0,0,0,0);a.overlayColorInner=null;a.overlayColorOuter=null;a.overlayHighlightInner=
null;a.overlayHighlightOuter=null;a.overlayNormalInner=null;a.overlayNormalOuter=null;a.objectOpacity=1;a.commonMaterialParameters=new v;a.componentParameters=new w;a.alphaCutoff=B.defaultMaskAlphaCutoff;a.alphaDiscardMode=1;a.isIntegratedMesh=!1;a.polygonOffsetEnabled=!1;a.ellipsoidMode=1;a.sceneHasOcludees=!1;a._techniqueConfig=new A.ComponentTechniqueConfiguration;return a}q._inheritsLoose(h,l);var g=h.prototype;g.dispose=function(a){this._technique&&(a.release(this._technique),this._technique=
void 0);this.normalTexture=this.occlusionTexture=this.emissionTexture=this.metallicRoughnessTexture=this.baseColorTexture=null};g.getTechnique=function(a,e,k){const c=this._techniqueConfig;c.hasVertexColors=k.colors;c.hasNormals=k.normals;c.vertexTextureCoordinates=k.textureCoordinates;c.usePBR=this.usePBR;c.hasMetalnessAndRoughnessTexture=m.isSome(this.metallicRoughnessTexture);c.hasEmissionTexture=m.isSome(this.emissionTexture);c.hasOcclusionTexture=m.isSome(this.occlusionTexture);c.hasNormalTexture=
m.isSome(this.normalTexture);c.transparencyPassType=0===e.identifier&&null!=e.transparencyPassType?e.transparencyPassType:3;c.ellipsoidMode=this.ellipsoidMode;this.dirty&&(c.componentData=this.componentParameters.type,c.cullFace=this.commonMaterialParameters.cullFace,c.doubleSidedMode=this.commonMaterialParameters.doubleSided?1:0,c.baseColorTexture=m.isSome(this.baseColorTexture),k=this._computeWhichMaterialPass(),c.blendingEnabled=1===k||2===k,c.alphaDiscardMode=this.alphaDiscardMode,c.integratedMeshMode=
this.isIntegratedMesh?this.overlayColorInner||this.overlayColorOuter?this.overlayNormalInner||this.overlayNormalOuter?3:2:1:0,c.polygonOffsetEnabled=this.polygonOffsetEnabled,this._setClean());c.slicePlaneEnabled=e.slicePlaneEnabled&&this.commonMaterialParameters.slicePlaneEnabled;1===e.identifier?(c.output=3,c.vertexDiscardMode=0):2===e.identifier?(c.output=4,c.vertexDiscardMode=0):(2===this._computeWhichMaterialPass()?c.vertexDiscardMode=e.transparent?2:1:c.vertexDiscardMode=0,c.output=D(e.subPass),
1===e.subPass&&(c.sceneHasOcludees=e.sceneHasOcludees),0===e.subPass?(c.receiveAmbientOcclusion=e.ambientOcclusionEnabled,c.sceneHasOcludees=e.sceneHasOcludees,c.receiveShadows=e.shadowsEnabled,c.ssrEnabled=e.ssrParams.ssrEnabled):(c.receiveAmbientOcclusion=!1,c.receiveShadows=!1));return this._technique=a.repository.acquireAndReleaseExisting(A.ComponentTechnique,c,this._technique)};g.submit=function(a,e){const k=e.renderable.geometry;var c=e.components;const p=e.renderable.drawParameters;e=e.renderable.meta.cameraDepthSquared;
const r=c.geometryRanges;c=c.highlightRanges;switch(this._computeWhichMaterialPass()){case 0:a.materialOpaque.submitDraw(this,k,r,p,e);break;case 1:a.materialTransparent.submitDraw(this,k,r,p,e);break;case 2:a.materialOpaque.submitDraw(this,k,r,p,e);a.materialTransparent.submitDraw(this,k,r,p,e);break;case 3:a.materialIntegratedMesh.submitDraw(this,k,r,p,e),(this.overlayHighlightInner||this.overlayHighlightOuter)&&a.highlightIntegratedMesh.submitDraw(this,k,r,p,e)}m.isSome(a.shadowMap)&&2!==this.componentParameters.castShadows&&
a.shadowMap.submitDraw(this,k,r,p,e);m.isSome(a.highlight)&&m.isSome(c)&&a.highlight.submitDraw(this,k,c,p,e)};g._computeWhichMaterialPass=function(){return this.isIntegratedMesh?3:1>this.objectOpacity?1:0===this.componentParameters.opaqueOverride?0:1>this.baseColor[3]||0===this.alphaDiscardMode||3===this.alphaDiscardMode?1:2===this.componentParameters.transparent?0:0===this.componentParameters.transparent?1:2};q._createClass(h,[{key:"attributeLocations",get:function(){return C.attributeLocations}}]);
return h}(b.MaterialBase);d.__decorate([b.parameter({vectorOps:t.vec4})],f.prototype,"baseColor",void 0);d.__decorate([b.parameter()],f.prototype,"usePBR",void 0);d.__decorate([b.parameter({vectorOps:n.vec3})],f.prototype,"mrrFactors",void 0);d.__decorate([b.parameter({vectorOps:n.vec3})],f.prototype,"emissiveFactor",void 0);d.__decorate([b.parameter({dispose:!0})],f.prototype,"baseColorTexture",void 0);d.__decorate([b.parameter({dispose:!0})],f.prototype,"metallicRoughnessTexture",void 0);d.__decorate([b.parameter({dispose:!0})],
f.prototype,"emissionTexture",void 0);d.__decorate([b.parameter({dispose:!0})],f.prototype,"occlusionTexture",void 0);d.__decorate([b.parameter({dispose:!0})],f.prototype,"normalTexture",void 0);d.__decorate([b.parameter({vectorOps:{equals:t.exactEquals,copy:t.copy}})],f.prototype,"overlayTexOffset",void 0);d.__decorate([b.parameter({vectorOps:{equals:t.exactEquals,copy:t.copy}})],f.prototype,"overlayTexScale",void 0);d.__decorate([b.parameter()],f.prototype,"overlayColorInner",void 0);d.__decorate([b.parameter()],
f.prototype,"overlayColorOuter",void 0);d.__decorate([b.parameter()],f.prototype,"overlayHighlightInner",void 0);d.__decorate([b.parameter()],f.prototype,"overlayHighlightOuter",void 0);d.__decorate([b.parameter()],f.prototype,"overlayNormalInner",void 0);d.__decorate([b.parameter()],f.prototype,"overlayNormalOuter",void 0);d.__decorate([b.parameter()],f.prototype,"objectOpacity",void 0);d.__decorate([b.parameterBlock()],f.prototype,"commonMaterialParameters",void 0);d.__decorate([b.parameterBlock()],
f.prototype,"componentParameters",void 0);d.__decorate([b.parameter()],f.prototype,"alphaCutoff",void 0);d.__decorate([b.parameter()],f.prototype,"alphaDiscardMode",void 0);d.__decorate([b.parameter()],f.prototype,"isIntegratedMesh",void 0);d.__decorate([b.parameter()],f.prototype,"polygonOffsetEnabled",void 0);d.__decorate([b.parameter()],f.prototype,"ellipsoidMode",void 0);d.__decorate([b.parameter()],f.prototype,"sceneHasOcludees",void 0);let v=function(l){function h(){var g=l.apply(this,arguments)||
this;g.doubleSided=!1;g.cullFace=2;g.slicePlaneEnabled=!0;return g}q._inheritsLoose(h,l);return h}(b.MaterialParameterBlock);d.__decorate([b.parameter()],v.prototype,"doubleSided",void 0);d.__decorate([b.parameter()],v.prototype,"cullFace",void 0);d.__decorate([b.parameter()],v.prototype,"slicePlaneEnabled",void 0);let w=function(l){function h(){var g=l.apply(this,arguments)||this;g.externalColor=z.fromValues(1,1,1,1);g.externalColorMixMode=1;g.castShadows=0;return g}q._inheritsLoose(h,l);q._createClass(h,
[{key:"transparent",get:function(){return 1>this.externalColor[3]?0:2}},{key:"opaqueOverride",get:function(){return 3===this.externalColorMixMode&&1===this.externalColor[3]?0:2}},{key:"visible",get:function(){return 0<this.externalColor[3]?0:2}},{key:"type",get:function(){return 0}}]);return h}(b.MaterialParameterBlock);d.__decorate([b.parameter({vectorOps:t.vec4})],w.prototype,"externalColor",void 0);d.__decorate([b.parameter()],w.prototype,"externalColorMixMode",void 0);d.__decorate([b.parameter()],
w.prototype,"castShadows",void 0);n=function(l){function h(){var g=l.apply(this,arguments)||this;g.texture=null;g.transparent=2;g.opaqueOverride=2;g.castShadows=2;return g}q._inheritsLoose(h,l);q._createClass(h,[{key:"type",get:function(){return 1}}]);return h}(b.MaterialParameterBlock);d.__decorate([b.parameter()],n.prototype,"texture",void 0);d.__decorate([b.parameter()],n.prototype,"transparent",void 0);d.__decorate([b.parameter()],n.prototype,"opaqueOverride",void 0);d.__decorate([b.parameter()],
n.prototype,"castShadows",void 0);u.CommonMaterialParameters=v;u.ComponentMaterial=f;u.ComponentParametersUniform=w;u.ComponentParametersVarying=n;Object.defineProperty(u,"__esModule",{value:!0})});