// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/buffer/InterleavedLayout ../lib/Util ../lib/GLMaterial ../lib/Material ../shaders/MeasurementArrowTechnique".split(" "),function(z,A,p,c,H,k,I,B,C){let M=function(h){function e(a,g){a=h.call(this,g,a,J)||this;a.techniqueConfig=new C.MeasurementArrowTechniqueConfiguration;return a}A._inheritsLoose(e,h);var b=e.prototype;b.getTechniqueConfig=function(){this.techniqueConfig.polygonOffsetEnabled=
this.params.polygonOffset;return this.techniqueConfig};b.dispose=function(){};b.getPassParameters=function(){return this.params};b.intersect=function(){};b.createBufferWriter=function(){return new K};b.getGLMaterial=function(a){return 0===a.output?new L(a):void 0};return e}(B.Material),L=function(h){function e(a){a=h.call(this,a)||this;a.updateParameters();return a}A._inheritsLoose(e,h);var b=e.prototype;b.updateParameters=function(){this.technique=this.techniqueRep.acquireAndReleaseExisting(C.MeasurementArrowTechnique,
this.material.getTechniqueConfig(),this.technique)};b.beginSlot=function(a){return 3===a};b.bind=function(a,g){a.bindProgram(this.technique.program);this.technique.bindPass(a,this.material.getPassParameters(),g)};return e}(I);const J={width:32,outlineSize:.2,outlineColor:[1,.5,0,1],stripeLength:1,stripeEvenColor:[1,1,1,1],stripeOddColor:[1,.5,0,1],polygonOffset:!1,...B.materialParametersDefaults},N=H.newLayout().vec3f(k.VertexAttrConstants.POSITION).vec3f(k.VertexAttrConstants.NORMAL).vec2f(k.VertexAttrConstants.UV0).f32(k.VertexAttrConstants.AUXPOS1),
l=p.create(),q=p.create(),u=p.create(),m=p.create(),v=p.create();let K=function(){function h(){this.vertexBufferLayout=N}var e=h.prototype;e.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};e.elementCount=function(b){return 2*(b.indices[k.VertexAttrConstants.POSITION].length/2+1)};e.write=function(b,a,g,D){var f=a.vertexAttr[k.VertexAttrConstants.POSITION].data;const y=a.vertexAttr[k.VertexAttrConstants.NORMAL].data,r=f.length/3;(a=a&&a.indices&&a.indices.position)&&a.length!==
2*(r-1)&&console.warn("MeasurementArrowMaterial does not support indices");a=b.transformation;const E=b.invTranspTransformation,F=g.position,G=g.normal,w=g.uv0;b=0;for(let n=0;n<r;++n){var d=3*n;c.set(l,f[d],f[d+1],f[d+2]);n<r-1&&(d=3*(n+1),c.set(q,f[d],f[d+1],f[d+2]),c.set(v,y[d],y[d+1],y[d+2]),c.normalize(v,v),c.subtract(u,q,l),c.normalize(u,u),c.cross(m,v,u),c.normalize(m,m));d=c.distance(l,q);a&&E&&(c.transformMat4(l,l,a),c.transformMat4(q,q,a),c.transformMat4(m,m,E));const t=D+2*n,x=t+1;F.setVec(t,
l);F.setVec(x,l);G.setVec(t,m);G.setVec(x,m);w.set(t,0,b);w.set(t,1,-1);w.set(x,0,b);w.set(x,1,1);n<r-1&&(b+=d)}g=g.auxpos1;for(f=0;f<2*r;++f)g.set(D+f,b)};return h}();z.MeasurementArrowMaterial=M;Object.defineProperty(z,"__esModule",{value:!0})});