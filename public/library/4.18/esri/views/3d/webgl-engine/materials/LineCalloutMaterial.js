// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2f32 ../../support/buffer/InterleavedLayout ../lib/Util ../lib/GLMaterial ../lib/Material ./internal/bufferWriterUtils ../shaders/LineCalloutTechnique".split(" "),function(n,k,h,r,d,t,p,l,m){let x=function(e){function c(a,f){a=e.call(this,f,a,u)||this;a.techniqueConfig=new m.LineCalloutTechniqueConfiguration;a._uniqueMaterialIdentifier=c.uniqueMaterialIdentifier(a.params);return a}k._inheritsLoose(c,e);var b=c.prototype;
b.dispose=function(){};b.getGLMaterial=function(a){return 0===a.output?new v(a):void 0};b.getPassParameters=function(){return this.params};b.getTechniqueConfig=function(a){this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest;this.techniqueConfig.verticalOffset=!!this.params.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective;this.techniqueConfig.depthHudEnabled=a;this.techniqueConfig.depthHudAlignStartEnabled=!!this.params.depthHUDAlignStart;
this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;return this.techniqueConfig};b.intersect=function(){};b.createBufferWriter=function(){return new w};b.validateParameterValues=function(a){a=c.uniqueMaterialIdentifier(a);a!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=a)};c.uniqueMaterialIdentifier=function(a){return JSON.stringify({screenOffset:a.screenOffset||[0,
0],centerOffsetUnits:a.centerOffsetUnits||"world"})};k._createClass(c,[{key:"uniqueMaterialIdentifier",get:function(){return this._uniqueMaterialIdentifier}}]);return c}(p.Material),v=function(e){function c(a){a=e.call(this,a)||this;a.isRenderSlot=!0;a.updateParameters();return a}k._inheritsLoose(c,e);var b=c.prototype;b.updateParameters=function(){this.technique=this.techniqueRep.acquireAndReleaseExisting(m.LineCalloutTechnique,this.material.getTechniqueConfig(!1),this.technique);this.depthTechnique=
this.techniqueRep.acquireAndReleaseExisting(m.LineCalloutTechnique,this.material.getTechniqueConfig(!0),this.depthTechnique)};b.beginSlot=function(a){switch(a){case 20:return this.isRenderSlot=!0;case 21:return this.isRenderSlot=!1,!0}return!1};b.getTechnique=function(){return this.isRenderSlot?this.technique:this.depthTechnique};b.bind=function(a,f){const g=this.getTechnique();a.bindProgram(g.program);g.bindPass(a,this.material.getPassParameters(),f)};return c}(t);const u={verticalOffset:null,screenSizePerspective:null,
screenOffset:[0,0],color:[0,0,0,1],size:1,borderColor:null,occlusionTest:!1,shaderPolygonOffset:1E-5,depthHUDAlignStart:!1,centerOffsetUnits:"world",slicePlaneEnabled:!1,...p.materialParametersDefaults},y=r.newLayout().vec3f(d.VertexAttrConstants.POSITION).vec3f(d.VertexAttrConstants.NORMAL).vec2f(d.VertexAttrConstants.UV0).vec4f(d.VertexAttrConstants.AUXPOS1),q=[h.fromValues(0,0),h.fromValues(1,0),h.fromValues(0,1),h.fromValues(1,0),h.fromValues(1,1),h.fromValues(0,1)];let w=function(){function e(){this.vertexBufferLayout=
y}var c=e.prototype;c.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};c.elementCount=function(b){return 6*b.indices[d.VertexAttrConstants.POSITION].length};c.write=function(b,a,f,g){l.writePosition(a.indices[d.VertexAttrConstants.POSITION],a.vertexAttr[d.VertexAttrConstants.POSITION].data,b.transformation,f.position,g,6);l.writeNormal(a.indices[d.VertexAttrConstants.NORMAL],a.vertexAttr[d.VertexAttrConstants.NORMAL].data,b.invTranspTransformation,f.normal,g,6);l.writeBufferVec4(a.indices[d.VertexAttrConstants.AUXPOS1],
a.vertexAttr[d.VertexAttrConstants.AUXPOS1].data,f.auxpos1,g,6);for(b=0;b<q.length;++b)f.uv0.setVec(g+b,q[b])};return e}();n.LineCalloutMaterial=x;Object.defineProperty(n,"__esModule",{value:!0})});