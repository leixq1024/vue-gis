// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../core/Accessor ../../../../../assets ../../../../../support/requestImageUtils ../../../../webgl/Texture".split(" "),
function(c,h,g,y,p,z,k,A,q,B,C,D,r,t,l,u,v){const w=p.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils"),m=[l.getAssetUrl("esri/images/materials/water/normals.jpg"),l.getAssetUrl("esri/images/materials/water/perturbation.jpg")];c.WaterTextureRepository=function(n){function e(){var a=n.apply(this,arguments)||this;a.data=[];a.loadingState=0;return a}h._inheritsLoose(e,n);var f=e.prototype;f.dispose=function(){this.loadingState=0;this.data.forEach(a=>{a.dispose();a=null});
this.data=null};f.getTextureProps=function(a,b,d=!1){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,hasMipmap:d,maxAnisotropy:8,width:a,height:b}};f.loadTextures=function(a){this.loadingState=1;r.all(m.map(b=>u.requestImage(b))).then(b=>{b.forEach((d,x)=>{this.data[x]=new v(a,this.getTextureProps(d.width,d.height,!0),d)});this.loadingState=2}).catch(b=>{w.error("Failed to load textures for water material.",b);this.loadingState=0})};f.bindRepo=function(a){for(let b=
0;b<this.data.length;b++)a.bindTexture(this.data[b],b)};h._createClass(e,[{key:"updating",get:function(){return 1===this.loadingState}},{key:"ready",get:function(){return 2===this.loadingState}}]);return e}(t);g.__decorate([k.property()],c.WaterTextureRepository.prototype,"loadingState",void 0);g.__decorate([k.property({type:Boolean,readOnly:!0,dependsOn:["loadingState"]})],c.WaterTextureRepository.prototype,"updating",null);c.WaterTextureRepository=g.__decorate([q.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],
c.WaterTextureRepository);c.waveAndPertubationTextureUrls=m;Object.defineProperty(c,"__esModule",{value:!0})});