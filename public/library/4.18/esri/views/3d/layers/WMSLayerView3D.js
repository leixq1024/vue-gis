// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/Extent ../../../layers/support/ExportWMSImageParameters ../../layers/WMSLayerView ./DynamicLayerView3D".split(" "),
function(m,g,d,x,y,n,z,p,q,A,B,C,r,t,u,v,w){d=function(h){function f(){return h.apply(this,arguments)||this}m._inheritsLoose(f,h);var e=f.prototype;e.initialize=function(){this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(r.reject(new q("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view")));const {layer:c,view:b}=this;this._exportWMSImageParameters=new u({layer:c,
view:b});this.updatingHandles.add(this._exportWMSImageParameters,"version",()=>{this.updatingHandles.addPromise(this.refreshDebounced())})};e.destroy=function(){this._exportWMSImageParameters&&(this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null)};e.createFetchPopupFeaturesQuery=function(c){var b=this.findExtentInfoAt(c),a=b.extent;a=new t(a[0],a[1],a[2],a[3],b.spatialReference);b=b.imageSize;const k=b.width,l=a.width/k;return{extent:a,
width:k,height:b.height,x:Math.round((c.x-a.xmin)/l),y:Math.round((a.ymax-c.y)/l)}};e.getFetchOptions=function(){return{timeExtent:this._exportWMSImageParameters.timeExtent}};return f}(v.WMSLayerView(w));g.__decorate([n.property({dependsOn:["view.spatialReference","layer.spatialReferences"]})],d.prototype,"suspended",void 0);return d=g.__decorate([p.subclass("esri.views.3d.layers.WMSLayerView3D")],d)});