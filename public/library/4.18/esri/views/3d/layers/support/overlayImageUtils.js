// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../../../geometry/support/aaBoundingRect","../../webgl-engine/lib/Util","../../webgl-engine/lib/GeometryData","../../webgl-engine/lib/GeometryUtil"],function(r,g,k,A,B){function w(a,b){return B.createSquareGeometry([[a[0],a[1],b],[a[2],a[1],b],[a[2],a[3],b],[a[0],a[3],b]])}const C=new Float32Array([0,0,1]);r.computeImageExportSize=function(a,b,c){const d=g.width(a)/g.height(a),e={width:c,height:c};1.0001<d?e.height=c/d:.9999>d&&(e.width=c*d);e.width=Math.round(e.width/(g.width(a)/
g.width(b)));e.height=Math.round(e.height/(g.height(a)/g.height(b)));return e};r.createGeometryForExtent=w;r.createOuterImageGeometry=function(a,b,c){if(!g.intersects(a,b))return w(b,c);var d=[a[1]-b[1],Math.min(a[3],b[3])-Math.max(a[1],b[1]),b[3]-a[3],123456];const e=[a[0]-b[0],Math.min(a[2],b[2])-Math.max(a[0],b[0]),b[2]-a[2],123456],D=b[2]-b[0],E=b[3]-b[1],n=0<e[0]&&0<e[2]?3:2;a=0<d[0]&&0<d[2]?3:2;var l=(a+1)*(n+1),f=new Float64Array(3*l);l=new Float32Array(2*l);a=new Uint32Array(6*(a*n-1));let t=
0,u=0,x=0,h=0,m=0;for(let p=0;4>p;p++){const y=d[p];if(0>=y)continue;let v=0;for(let q=0;4>q;q++){const z=e[q];0>=z||(f[u++]=b[0]+v,f[u++]=b[1]+t,f[u++]=c,l[x++]=v/D,l[x++]=t/E,3>q&&3>p&&(1!==q||1!==p)&&(a[m++]=h,a[m++]=h+1,a[m++]=h+n+1,a[m++]=h+1,a[m++]=h+n+2,a[m++]=h+n+1),h++,v+=z)}t+=y}b={};b[k.VertexAttrConstants.POSITION]={size:3,data:f};b[k.VertexAttrConstants.NORMAL]={size:3,data:C};b[k.VertexAttrConstants.UV0]={size:2,data:l};c={};d=new Uint32Array(a.length);for(f=0;f<d.length;f++)d[f]=0;
c[k.VertexAttrConstants.POSITION]=a;c[k.VertexAttrConstants.NORMAL]=d;c[k.VertexAttrConstants.UV0]=a;return new A.GeometryData(b,c)};Object.defineProperty(r,"__esModule",{value:!0})});