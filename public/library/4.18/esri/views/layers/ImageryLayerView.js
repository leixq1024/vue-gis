// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../geometry/Point ../../layers/support/commonProperties ../../tasks/support/Query ./support/popupUtils".split(" "),
function(l,q,e,C,r,D,E,f,F,t,m,G,H,I,u,n,v,w,x){l.ImageryLayerView=b=>{b=function(h){function k(){var a=h.apply(this,arguments)||this;a.view=null;return a}q._inheritsLoose(k,h);var p=k.prototype;p.fetchPopupFeatures=async function(a,d){const {layer:g}=this;if(!a)return u.reject(new m("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:g}));var {popupEnabled:c}=g;d=x.getFetchPopupTemplate(g,d);if(!c||!r.isSome(d))throw new m("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",
{popupEnabled:c,popupTemplate:d});const y=await d.getRequiredFields();c=new w;c.geometry=a;c.outFields=y;c.outSpatialReference=a.spatialReference;a=this.view.resolution;a="2d"===this.view.type?new n(a,a,this.view.spatialReference):new n(.5*a,.5*a,this.view.spatialReference);const {returnTopmostRaster:z,showNoDataRecords:A}=d.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};return g.queryVisibleRasters(c,{returnDomainValues:!0,returnTopmostRaster:z,pixelSize:a,showNoDataRecords:A}).then(B=>
B)};p.canResume=function(){var a;return!h.prototype.canResume.call(this)||null!=(a=this.timeExtent)&&a.isEmpty?!1:!0};return k}(b);e.__decorate([f.property()],b.prototype,"layer",void 0);e.__decorate([f.property({dependsOn:["timeExtent"]})],b.prototype,"suspended",void 0);e.__decorate([f.property(v.combinedViewLayerTimeExtentProperty)],b.prototype,"timeExtent",void 0);e.__decorate([f.property()],b.prototype,"view",void 0);return b=e.__decorate([t.subclass("esri.views.layers.ImageryLayerView")],b)};
Object.defineProperty(l,"__esModule",{value:!0})});