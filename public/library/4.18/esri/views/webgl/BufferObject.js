// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil"],function(n,g){let p=0;return function(){function e(a,b,c,d,f){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this.id=p++;a.instanceCounter.increment(1,this);this._context=a;this._bufferType=b;this._usage=c;this._glName=this._context.gl.createBuffer();d&&this.setData(d,f)}e.createIndex=function(a,b,c,d){return new e(a,34963,b,c,d)};e.createVertex=function(a,
b,c){return new e(a,34962,b,c)};var h=e.prototype;h.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)};h.setData=function(a,b){if(a){if("number"===typeof a){if(0>a&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&b)switch(this._indexType=b,this._size=a,b){case 5123:a*=2;break;case 5125:a*=4}}else b=a.byteLength,g.isUint16Array(a)&&(b/=2,this._indexType=
5123),g.isUint32Array(a)&&(b/=4,this._indexType=5125),this._size=b;b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,a,this._usage);this._context.bindVAO(b)}};h.setSubData=function(a,b=0,c=0,d){if(a){(0>b||b>=this._size)&&console.error("offset is out of range!");var f=b,k=c,l=d,m=a.byteLength;g.isUint16Array(a)&&(m/=2,f*=2,k*=2,l*=2);g.isUint32Array(a)&&(m/=4,f*=4,k*=4,l*=4);void 0===d&&(d=m-1);c>=d&&console.error("end must be bigger than start!");
b+c-d>this._size&&console.error("An attempt to write beyond the end of the buffer!");b=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);c=this._context.gl;a=ArrayBuffer.isView(a)?a.buffer:a;c.bufferSubData(this._bufferType,f,a.slice(k,l));this._context.bindVAO(b)}};n._createClass(e,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"usage",get:function(){return this._usage}},{key:"bufferType",get:function(){return this._bufferType}},
{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return e}()});