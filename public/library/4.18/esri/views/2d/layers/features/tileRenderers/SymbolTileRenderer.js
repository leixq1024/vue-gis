// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/HandleOwner".split(" "),
function(r,l,f,x,h,m,t,q,v,a,g,n){f=function(p){function w(c){c=p.call(this,c)||this;c.tiles=new Map;return c}r._inheritsLoose(w,p);var k=w.prototype;k.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.tiles=null};k.acquireTile=function(c){const u=this.createTile(c);u.once("isReady",()=>this.notifyChange("updating"));this.tiles.set(c.id,u);return u};k.forceAttributeTextureUpload=function(){};k.forEachTile=function(c){this.tiles.forEach(c)};k.releaseTile=function(c){this.tiles.delete(c.key.id);
this.disposeTile(c)};k.isUpdating=function(){let c=!0;this.tiles.forEach(u=>{c=c&&u.isReady});return!c};k.setHighlight=function(){};k.invalidateLabels=function(){};k.requestUpdate=function(){this.layerView.requestUpdate()};r._createClass(w,[{key:"updating",get:function(){return this.isUpdating()}}]);return w}(n.HandleOwner);l.__decorate([m.property()],f.prototype,"layer",void 0);l.__decorate([m.property()],f.prototype,"layerView",void 0);l.__decorate([m.property()],f.prototype,"tileInfoView",void 0);
l.__decorate([m.property()],f.prototype,"updating",null);return f=l.__decorate([q.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],f)})},"esri/views/2d/layers/features/tileRenderers/support/WGLFeatureView":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/promiseUtils ../../../../engine/webgl/enums ../../../../engine/brushes ../../../../engine/FeatureContainer".split(" "),function(r,l,f,x,h,m){m=function(t){function q(a,g,
n){a=t.call(this,a)||this;a._pointToCallbacks=new Map;a._layer=n;a._layerView=g;return a}l._inheritsLoose(q,t);var v=q.prototype;v.renderChildren=function(a){this.attributeView.update();this.hasAnimation&&a.painter.effects.integrate.draw(a,a.attributeView);t.prototype.renderChildren.call(this,a)};v.hitTest=function(a,g){a=[a,g];g=f.createResolver();this._pointToCallbacks.set(a,g);this.requestRender();return g.promise};v.doRender=function(a){const {minScale:g,maxScale:n}=this._layer,p=a.state.scale;
p<=(g||Infinity)&&p>=n&&t.prototype.doRender.call(this,a)};v.prepareRenderPasses=function(a){const g=a.registerRenderPass({name:"label",brushes:[h.brushes.label],target:()=>this.hasLabels?this.children:null,drawPhase:x.WGLDrawPhase.LABEL|x.WGLDrawPhase.LABEL_ALPHA}),n=a.registerRenderPass({name:"geometry",brushes:[h.brushes.fill,h.brushes.line,h.brushes.marker,h.brushes.text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.hasEffects,effects:[{apply:a.effects.outsideEffect,enable:()=>
this._layerView.hasEffects,args:()=>this._layerView.effectLists.excluded},{apply:a.effects.insideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.included},{apply:a.effects.hittest,enable:()=>!!this._pointToCallbacks.size,args:()=>this._pointToCallbacks}]}),p=a.registerRenderPass({name:"highlight",brushes:[h.brushes.fill,h.brushes.line,h.brushes.marker,h.brushes.text],target:()=>this.children,drawPhase:x.WGLDrawPhase.HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:a.effects.highlight,
enable:()=>!!this._layerView.hasHighlight()}]});return[...t.prototype.prepareRenderPasses.call(this,a),n,p,g]};l._createClass(q,[{key:"hasAnimation",get:function(){return this.hasLabels}},{key:"hasLabels",get:function(){var a=this._layer.featureReduction;a=a&&"cluster"===a.type&&a.labelsVisible&&a.labelingInfo&&a.labelingInfo.length;return this._layer.labelingInfo&&this._layer.labelingInfo.length&&this._layer.labelsVisible||!!a}},{key:"labelsVisible",get:function(){return this._layer.labelsVisible}}]);
return q}(m.FeatureContainer);r.WGLFeatureView=m;Object.defineProperty(r,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../geometry/support/aaBoundingRect ../../../engine/webgl/WGLTile ../support/rendererUtils ./support/visualVariablesUtils ./BaseTileRenderer ./support/WGLFeatureView".split(" "),function(r,
l,f,x,h,m,t,q,v,a,g,n,p,w,k,c,u){f=function(B){function A(){return B.apply(this,arguments)||this}r._inheritsLoose(A,B);var d=A.prototype;d.install=function(b){const e=new u.WGLFeatureView(this.tileInfoView,this.layerView,this.layer);this.featuresView=e;b.addChild(e)};d.uninstall=function(b){b.removeChild(this.featuresView);this.featuresView.destroy()};d.hitTest=function(b,e){return this.featuresView.hitTest(b,e)};d.supportsRenderer=function(b){return null!=b&&-1!==["simple","class-breaks","unique-value",
"dot-density","dictionary"].indexOf(b.type)};d.onConfigUpdate=function(b){var e=null;"visualVariables"in b&&(e=(w.simplifyVVRenderer(b).visualVariables||[]).map(y=>{const z=y.clone();"normalizationField"in y&&(z.normalizationField=null);y.valueExpression&&"$view.scale"!==y.valueExpression&&(z.valueExpression=null,z.field="nop");return z}),e=k.convertVisualVariables(e));this.featuresView.setRendererInfo(b,e,this.layerView.effects)};d.onTileData=function(b){const e=this.tiles.get(b.tileKey);if(e)this.featuresView.onTileData(e,
b.data);this.layerView.view.labelManager.requestUpdate()};d.onTileError=function(b){if(b=this.tiles.get(b.tileKey))this.featuresView.onTileError(b)};d.forceAttributeTextureUpload=function(){this.featuresView.attributeView.forceTextureUpload()};d.lockGPUUploads=function(){this.featuresView.attributeView.lockTextureUpload();this.tiles.forEach(b=>b.lockUploads())};d.unlockGPUUploads=function(){this.featuresView.attributeView.unlockTextureUpload();this.tiles.forEach(b=>b.unlockUploads())};d.getMaterialItems=
async function(b){return this.featuresView.getMaterialItems(b)};d.invalidateLabels=function(){this.featuresView.hasLabels&&(this.tiles.forEach(b=>b.isDirty=!0),this.layerView.view.labelManager.requestUpdate())};d.createTile=function(b){const e=this.tileInfoView.getTileBounds(n.create(),b);b=new p.WGLTile(b,e);this.featuresView.hasLabels&&this.layerView.view.labelManager.addTile(this.layerView,b);return b};d.disposeTile=function(b){this.featuresView.removeChild(b);this.featuresView.hasLabels&&this.layerView.view.labelManager.removeTile(this.layerView,
b.key.id);b.destroy();this.layerView.view.labelManager.requestUpdate()};return A}(c);return f=l.__decorate([q.subclass("esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer")],f)});