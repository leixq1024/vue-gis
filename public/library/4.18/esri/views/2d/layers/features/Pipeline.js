// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Handles ../views/support/WatchUpdatingTracking".split(" "),function(n,l,p,z,y,w,f,k){const m=c=>{c=function(e){function q(){return e.apply(this,arguments)||this}l._inheritsLoose(q,e);q.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};l._createClass(q,
[{key:"handles",get:function(){return this._get("handles")||new f}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new k.WatchUpdatingTracking}}]);return q}(c);p.__decorate([z.property({readOnly:!0})],c.prototype,"handles",null);p.__decorate([z.property({readOnly:!0})],c.prototype,"updatingHandles",null);return c=p.__decorate([y.subclass("esri.core.HandleOwner")],c)};n.HandleOwner=function(c){function e(){return c.apply(this,arguments)||this}l._inheritsLoose(e,c);return e}(m(w));
n.HandleOwner=p.__decorate([y.subclass("esri.core.HandleOwner")],n.HandleOwner);n.HandleOwnerMixin=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Collection".split(" "),function(n,l,p,z,y,w,f){w=function(k){function m(e){e=k.call(this,e)||this;e._groups=new Map;return e}n._inheritsLoose(m,k);var c=m.prototype;
c.destroy=function(){this.removeAll()};c.add=function(e,q){if(!this._isHandle(e)&&!Array.isArray(e)&&!f.isCollection(e))return this;const d=this._getOrCreateGroup(q);Array.isArray(e)||f.isCollection(e)?e.forEach(g=>this._isHandle(g)&&d.push(g)):d.push(e);this.notifyChange("size");return this};c.forEach=function(e,q){if("function"===typeof e)this._groups.forEach(d=>d.forEach(e));else{const d=this._getGroup(e);d&&q&&d.forEach(q)}};c.has=function(e){return this._groups.has(this._ensureGroupKey(e))};
c.remove=function(e){if(Array.isArray(e)||f.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const q=this._getGroup(e);for(let d=0;d<q.length;d++)q[d].remove();this._deleteGroup(e);this.notifyChange("size");return this};c.removeAll=function(){this._groups.forEach(e=>{for(let q=0;q<e.length;q++)e[q].remove()});this._groups.clear();this.notifyChange("size");return this};c._isHandle=function(e){return e&&!!e.remove};c._getOrCreateGroup=function(e){if(this.has(e))return this._getGroup(e);
const q=[];this._groups.set(this._ensureGroupKey(e),q);return q};c._getGroup=function(e){return p.assumeNonNull(this._groups.get(this._ensureGroupKey(e)))};c._deleteGroup=function(e){return this._groups.delete(this._ensureGroupKey(e))};c._ensureGroupKey=function(e){return e||"_default_"};n._createClass(m,[{key:"size",get:function(){let e=0;this._groups.forEach(q=>{e+=q.length});return e}}]);return m}(w);l.__decorate([z.property({readOnly:!0})],w.prototype,"size",null);return w=l.__decorate([y.subclass("esri.core.Handles")],
w)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./lang ./maybe ./accessorSupport/ensureType ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./ObjectPool ./ArrayPool ./scheduling ./Evented".split(" "),function(n,l,p,z,y,w,f,k,m,c,e){function q(A){return A?A instanceof B?A.toArray():A.length?Array.prototype.slice.apply(A):[]:[]}function d(A){if(A&&A.length)return A[0]}function g(A,C,E,F){C&&C.forEach((G,J,K)=>{A.push(G);
g(A,E.call(F,G,J,K),E,F)})}var b;let a=function(){function A(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var C=A.prototype;C.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};C.reset=function(E){this.defaultPrevented=!1;this.item=E};return A}();const h=new k(a,void 0,A=>{A.item=null;A.target=null;A.defaultPrevented=!1;A.cancellable=!1}),r=()=>{},t=new Set,v=new Set,x=new Set,u=new Map;let D=0,B=b=function(A){function C(F){F=A.call(this,
F)||this;F._chgListeners=[];F._notifications=null;F._timer=null;F.length=0;F._items=[];Object.defineProperty(n._assertThisInitialized(F),"uid",{value:D++});return F}n._inheritsLoose(C,A);C.isCollection=function(F){return null!=F&&F instanceof b};var E=C.prototype;E.normalizeCtorArgs=function(F){return F?Array.isArray(F)||F instanceof b?{items:F}:F:{}};E[Symbol.iterator]=function*(){yield*this.items};E.hasEventListener=function(F){return"change"===F?0<this._chgListeners.length:this._emitter.hasEventListener(F)};
E.on=function(F,G){if("change"===F){const J=this._chgListeners,K={removed:!1,callback:G};J.push(K);this._notifications&&this._notifications.push({listeners:J.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=r;K.removed=!0;J.splice(J.indexOf(K),1)}}}return this._emitter.on(F,G)};E.once=function(F,G){const J=this.on(F,G);return{remove(){J.remove()}}};E.add=function(F,G){if(this._emitBeforeChanges(1))return this;G=this.getNextIndex(null!=G?G:null);this._splice(G,0,F);this._emitAfterChanges(1);
return this};E.addMany=function(F,G=this._items.length){if(!F||!F.length||this._emitBeforeChanges(1))return this;G=this.getNextIndex(G);this._splice(G,0,...q(F));this._emitAfterChanges(1);return this};E.removeAll=function(){if(!this.length||this._emitBeforeChanges(2))return[];const F=this._splice(0,this.length)||[];this._emitAfterChanges(2);return F};E.clone=function(){return this._createNewInstance({items:this._items.map(p.clone)})};E.concat=function(...F){F=F.map(q);return this._createNewInstance({items:this._items.concat(...F)})};
E.drain=function(F,G){if(this.length&&!this._emitBeforeChanges(2)){var J=z.assumeNonNull(this._splice(0,this.length)),K=J.length;for(let L=0;L<K;L++)F.call(G,J[L],L,J);this._emitAfterChanges(2)}};E.every=function(F,G){return this._items.every(F,G)};E.filter=function(F,G){let J;J=2===arguments.length?this._items.filter(F,G):this._items.filter(F);return this._createNewInstance({items:J})};E.find=function(F,G){return this._items.find(F,G)};E.findIndex=function(F,G){return this._items.findIndex(F,G)};
E.flatten=function(F,G){const J=[];g(J,this,F,G);return new b(J)};E.forEach=function(F,G){return this._items.forEach(F,G)};E.getItemAt=function(F){return this._items[F]};E.getNextIndex=function(F){const G=this.length;F=null==F?G:F;0>F?F=0:F>G&&(F=G);return F};E.includes=function(F,G=0){return this._items.includes(F,G)};E.indexOf=function(F,G=0){return this._items.indexOf(F,G)};E.join=function(F=","){return this._items.join(F)};E.lastIndexOf=function(F,G=this.length-1){return this._items.lastIndexOf(F,
G)};E.map=function(F,G){F=this._items.map(F,G);return new b({items:F})};E.reorder=function(F,G=this.length-1){const J=this.indexOf(F);if(-1!==J){0>G?G=0:G>=this.length&&(G=this.length-1);if(J!==G){if(this._emitBeforeChanges(4))return F;this._splice(J,1);this._splice(G,0,F);this._emitAfterChanges(4)}return F}};E.pop=function(){if(this.length&&!this._emitBeforeChanges(2)){var F=d(this._splice(this.length-1,1));this._emitAfterChanges(2);return F}};E.push=function(...F){if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...F);this._emitAfterChanges(1);return this.length};E.reduce=function(F,G){const J=this._items;return 2===arguments.length?J.reduce(F,G):J.reduce(F)};E.reduceRight=function(F,G){const J=this._items;return 2===arguments.length?J.reduceRight(F,G):J.reduceRight(F)};E.remove=function(F){return this.removeAt(this.indexOf(F))};E.removeAt=function(F){if(!(0>F||F>=this.length||this._emitBeforeChanges(2)))return F=d(this._splice(F,1)),this._emitAfterChanges(2),F};E.removeMany=function(F){if(!F||
!F.length||this._emitBeforeChanges(2))return[];F=F instanceof b?F.toArray():F;const G=this._items,J=[],K=F.length;for(let P=0;P<K;P++){var L=G.indexOf(F[P]);if(-1<L){{var I=P+1;var N=L+1;const R=Math.min(F.length-I,G.length-N);let T=0;for(;T<R&&F[I+T]===G[N+T];)T++;I=T}I=1+I;(L=this._splice(L,I))&&0<L.length&&J.push.apply(J,L);P+=I-1}}this._emitAfterChanges(2);return J};E.reverse=function(){if(this._emitBeforeChanges(4))return this;const F=this._splice(0,this.length);F&&(F.reverse(),this._splice(0,
0,...F));this._emitAfterChanges(4);return this};E.shift=function(){if(this.length&&!this._emitBeforeChanges(2)){var F=d(this._splice(0,1));this._emitAfterChanges(2);return F}};E.slice=function(F=0,G=this.length){return this._createNewInstance({items:this._items.slice(F,G)})};E.some=function(F,G){return this._items.some(F,G)};E.sort=function(F){if(!this.length||this._emitBeforeChanges(4))return this;const G=z.assumeNonNull(this._splice(0,this.length));arguments.length?G.sort(F):G.sort();this._splice(0,
0,...G);this._emitAfterChanges(4);return this};E.splice=function(F,G,...J){const K=(G?2:0)|(J.length?1:0);if(this._emitBeforeChanges(K))return[];F=this._splice(F,G,...J)||[];this._emitAfterChanges(K);return F};E.toArray=function(){return this._items.slice()};E.toJSON=function(){return this.toArray()};E.toLocaleString=function(){return this._items.toLocaleString()};E.toString=function(){return this._items.toString()};E.unshift=function(...F){if(!F.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...F);this._emitAfterChanges(1);return this.length};E._createNewInstance=function(F){return new this.constructor(F)};E._splice=function(F,G,...J){const K=this._items;var L=this.constructor.prototype.itemType;let I=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=c.schedule(()=>this._dispatchChange()));if(G){I=K.splice(F,G);if(this.hasEventListener("before-remove")){var N=
h.acquire();N.target=this;N.cancellable=!0;for(let T=0,W=I.length;T<W;T++)G=I[T],N.reset(G),this.emit("before-remove",N),N.defaultPrevented&&(I.splice(T,1),K.splice(F,0,G),F+=1,--T,--W);h.release(N)}this.length=this._items.length;if(this.hasEventListener("after-remove")){G=h.acquire();G.target=this;G.cancellable=!1;N=I.length;for(let T=0;T<N;T++)G.reset(I[T]),this.emit("after-remove",G);h.release(G)}}if(J&&J.length){if(L){G=[];for(var P of J)J=L.ensureType(P),null==J&&null!=P||G.push(J);J=G}L=this.hasEventListener("before-add");
P=this.hasEventListener("after-add");G=F===this.length;if(L||P){var R=h.acquire();R.target=this;R.cancellable=!0;N=h.acquire();N.target=this;N.cancellable=!1;for(const T of J)L?(R.reset(T),this.emit("before-add",R),R.defaultPrevented||(G?K.push(T):K.splice(F++,0,T),this._set("length",K.length),P&&(N.reset(T),this.emit("after-add",N)))):(G?K.push(T):K.splice(F++,0,T),this._set("length",K.length),N.reset(T),this.emit("after-add",N));h.release(N);h.release(R)}else{if(G)for(R of J)K.push(R);else K.splice(F,
0,...J);this._set("length",K.length)}}(J&&J.length||I&&I.length)&&this._notifyChangeEvent(J,I);return I};E._emitBeforeChanges=function(F){let G=!1;if(this.hasEventListener("before-changes")){const J=h.acquire();J.target=this;J.cancellable=!0;J.type=F;this.emit("before-changes",J);G=J.defaultPrevented;h.release(J)}return G};E._emitAfterChanges=function(F){if(this.hasEventListener("after-changes")){const G=h.acquire();G.target=this;G.cancellable=!1;G.type=F;this.emit("after-changes",G);h.release(G)}};
E._notifyChangeEvent=function(F,G){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:F,removed:G})};E._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var F=this._notifications;this._notifications=null;for(const G of F){F=G.changes;t.clear();v.clear();x.clear();for(const {added:P,removed:R}of F){if(P)if(0===x.size&&0===v.size)for(const T of P)t.add(T);else for(const T of P)v.has(T)?
(x.add(T),v.delete(T)):x.has(T)||t.add(T);if(R)if(0===x.size&&0===t.size)for(const T of R)v.add(T);else for(const T of R)t.has(T)?t.delete(T):(x.delete(T),v.add(T))}const J=m.acquire();t.forEach(P=>{J.push(P)});const K=m.acquire();v.forEach(P=>{K.push(P)});const L=this._items,I=G.items,N=m.acquire();x.forEach(P=>{I.indexOf(P)!==L.indexOf(P)&&N.push(P)});if(G.listeners&&(J.length||K.length||N.length)){F={target:this,added:J,removed:K,moved:N};const P=G.listeners.length;for(let R=0;R<P;R++){const T=
G.listeners[R];T.removed||T.callback.call(this,F)}}m.release(J);m.release(K);m.release(N)}t.clear();v.clear();x.clear()}};n._createClass(C,[{key:"items",get:function(){return this._items},set:function(F){this._emitBeforeChanges(1)||(this._splice(0,this.length,...q(F)),this._emitAfterChanges(1))}}]);return C}(e.EventedAccessor);B.ofType=A=>{if(!A)return b;if(u.has(A))return u.get(A);var C=null;if("function"===typeof A)C=A.prototype.declaredClass;else if(A.base)C=A.base.prototype.declaredClass;else for(var E in A.typeMap){const F=
A.typeMap[E].prototype.declaredClass;C=C?C+` | ${F}`:F}E=function(F){function G(){return F.apply(this,arguments)||this}n._inheritsLoose(G,F);return G}(b);E=l.__decorate([f.subclass(`esri.core.Collection<${C}>`)],E);C={Type:A,ensureType:"function"===typeof A?y.ensureType(A):y.ensureOneOfType(A)};Object.defineProperty(E.prototype,"itemType",{value:C});u.set(A,E);return E};l.__decorate([w.property()],B.prototype,"length",void 0);l.__decorate([w.property()],B.prototype,"items",null);return B=b=l.__decorate([f.subclass("esri.core.Collection")],
B)})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(n,l,p,z,y){let w=function(){function f(){this._emitter=new f.EventEmitter(this)}var k=f.prototype;k.emit=function(m,c){return this._emitter.emit(m,c)};k.on=function(m,c){return this._emitter.on(m,c)};k.once=function(m,c){return this._emitter.once(m,c)};k.hasEventListener=function(m){return this._emitter.hasEventListener(m)};
return f}();(function(f){let k=function(){function c(q=null){this.target=q;this._listenersMap=null}var e=c.prototype;e.clear=function(){this._listenersMap&&this._listenersMap.clear()};e.emit=function(q,d){q=this._listenersMap&&this._listenersMap.get(q);if(!q)return!1;const g=this.target||this;[...q].forEach(b=>{b.call(g,d)});return 0<q.length};e.on=function(q,d){if(Array.isArray(q)){var g=q.map(b=>this.on(b,d));return p.handlesGroup(g)}if(-1<q.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);g=this._listenersMap.get(q)||[];g.push(d);this._listenersMap.set(q,g);return{remove:()=>{const b=this._listenersMap&&this._listenersMap.get(q)||[],a=b.indexOf(d);0<=a&&b.splice(a,1)}}};e.once=function(q,d){let g;return g=this.on(q,b=>{g.remove();d.call(null,b)})};e.hasEventListener=function(q){q=this._listenersMap&&this._listenersMap.get(q);return null!=q&&0<q.length};return c}();f.EventEmitter=k;f.EventedMixin=c=>{c=function(e){function q(){var g=
e.apply(this,arguments)||this;g._emitter=new k;return g}n._inheritsLoose(q,e);var d=q.prototype;d.emit=function(g,b){return this._emitter.emit(g,b)};d.on=function(g,b){return this._emitter.on(g,b)};d.once=function(g,b){return this._emitter.once(g,b)};d.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return q}(c);return c=l.__decorate([z.subclass("esri.core.Evented")],c)};let m=function(c){function e(){var d=c.apply(this,arguments)||this;d._emitter=new w.EventEmitter(n._assertThisInitialized(d));
return d}n._inheritsLoose(e,c);var q=e.prototype;q.emit=function(d,g){return this._emitter.emit(d,g)};q.on=function(d,g){return this._emitter.on(d,g)};q.once=function(d,g){return this._emitter.once(d,g)};q.hasEventListener=function(d){return this._emitter.hasEventListener(d)};return e}(y);m=l.__decorate([z.subclass("esri.core.Evented")],m);f.EventedAccessor=m})(w||(w={}));return w})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/get ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/scheduling ../../core/accessorSupport/wire ../../core/Accessor ../../core/Handles ../../core/watchUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){n.WatchUpdatingTracking=function(q){function d(){var b=q.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new c;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}l._inheritsLoose(d,q);var g=d.prototype;g.destroy=function(){this.removeAll();this.handles.destroy()};g.add=function(b,a,h,r=0){const t=0!==(r&1),v=++this.handleId;t||this.installSyncUpdatingWatch(b,a,v);b=0!==(r&2)?e.init(b,a,h,t):b.watch(a,h,t);this.handles.add(b,v);return{remove:()=>
{this.handles.remove(v)}}};g.addOnCollectionPropertyChange=function(b,a,h,r=0){r=0!==(r&2);const t=++this.handleId;this.handles.add([e.on(b,a,"after-changes",this.createSyncUpdatingCallback()),e.on(b,a,"change",h,r?v=>{h({added:v.items,removed:[],moved:[],target:v})}:void 0)],t);return{remove:()=>{this.handles.remove(t)}}};g.addOnCollectionChange=function(b,a,h=0){h=0!==(h&2);const r=++this.handleId;this.handles.add([b.on("after-changes",this.createSyncUpdatingCallback()),b.on("change",a)],r);h&&
a({added:b.items,removed:[],moved:[],target:b});return{remove:()=>{this.handles.remove(r)}}};g.addPromise=function(b){if(!b)return b;const a=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(b)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},a);this.pendingPromises.add(b);this._set("updating",!0);const h=()=>this.handles.remove(a);b.then(h,h);return b};g.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",
!1)};g.installSyncUpdatingWatch=function(b,a,h){var r=this.createSyncUpdatingCallback();r=k.wire(()=>z.valueOf(b,a),r);this.handles.add(r,h);return r};g.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const b=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(f.schedule(()=>{b===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return d}(m);p.__decorate([y.property({readOnly:!0})],
n.WatchUpdatingTracking.prototype,"updating",void 0);n.WatchUpdatingTracking=p.__decorate([w.subclass("esri.views.support.WatchUpdatingTracking")],n.WatchUpdatingTracking);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u){var D;p=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=D=function(B){function A(E){E=B.call(this,E)||this;E.dpi=96;E.format=null;E.origin=null;E.minScale=0;E.maxScale=0;E.size=null;E.spatialReference=null;return E}n._inheritsLoose(A,B);A.create=function(E=
{size:256,spatialReference:a.WebMercator}){var F=E.resolutionFactor||1,G=E.scales;const J=E.size||256,K=E.spatialReference||a.WebMercator;if(!b.isValid(K)){F=[];if(G)for(E=0;E<G.length;E++){var L=G[E];F.push({level:E,scale:L,resolution:L})}else for(G=5E-4,E=23;0<=E;E--)F.unshift({level:E,scale:G,resolution:G}),G*=2;return new D({dpi:96,lods:F,origin:new r(0,0,K),size:[J,J],spatialReference:K})}L=b.getInfo(K);E=E.origin?new r({x:E.origin.x,y:E.origin.y,spatialReference:K}):L?new r({x:L.origin[0],y:L.origin[1],
spatialReference:K}):new r({x:0,y:0,spatialReference:K});L=1/(39.37*v.getMetersPerUnitForSR(K)*96);const I=[];if(G)for(F=0;F<G.length;F++){var N=G[F];I.push({level:F,scale:N,resolution:N*L})}else{var P=b.isGeographic(K)?512/J*5.916575275917094E8:256/J*5.91657527591555E8;G=Math.ceil(24/F);I.push({level:0,scale:P,resolution:P*L});for(N=1;N<G;N++)P/=Math.pow(2,F),I.push({level:N,scale:P,resolution:P*L})}return new D({dpi:96,lods:I,origin:E,size:[J,J],spatialReference:K})};var C=A.prototype;C.readOrigin=
function(E,F){return r.fromJSON({spatialReference:F.spatialReference,...E})};C.readSize=function(E,F){return[F.cols,F.rows]};C.writeSize=function(E,F){F.cols=E[0];F.rows=E[0]};C.zoomToScale=function(E){const F=this.scales;if(0>=E)return F[0];if(E>=F.length)return F[F.length-1];{const G=Math.round(E);return F[G]+(G-E)*(F[Math.round(E-.5)]-F[G])}};C.scaleToZoom=function(E){const F=this.scales,G=F.length-1;let J=0;for(;J<G;J++){const K=F[J],L=F[J+1];if(K<=E)break;if(L===E)return J+1;if(K>E&&L<E)return J+
1-(E-L)/(K-L)}return J};C.snapScale=function(E,F=.95){E=this.scaleToZoom(E);return E%Math.floor(E)>=F?this.zoomToScale(Math.ceil(E)):this.zoomToScale(Math.floor(E))};C.tileAt=function(E,F,G,J){var K=this.lodAt(E);if(!K)return null;let L;if("number"===typeof F)L=F,F=G;else{if(b.equals(F.spatialReference,this.spatialReference))L=F.x,F=F.y;else{J=h.project(F,this.spatialReference);if(!J)return null;L=J.x;F=J.y}J=G}G=K.resolution*this.size[0];K=K.resolution*this.size[1];J||(J={id:null,level:0,row:0,col:0,
extent:x.create()});J.level=E;J.row=Math.floor((this.origin.y-F)/K+.001);J.col=Math.floor((L-this.origin.x)/G+.001);this.updateTileInfo(J);return J};C.updateTileInfo=function(E){var F=this.lodAt(E.level);if(F){var G=F.resolution*this.size[0];F=F.resolution*this.size[1];E.id=`${E.level}/${E.row}/${E.col}`;E.extent||(E.extent=x.create());E.extent[0]=this.origin.x+E.col*G;E.extent[1]=this.origin.y-(E.row+1)*F;E.extent[2]=E.extent[0]+G;E.extent[3]=E.extent[1]+F}};C.upsampleTile=function(E){const F=this._upsampleLevels[E.level];
if(!F||-1===F.parentLevel)return!1;E.level=F.parentLevel;E.row=Math.floor(E.row/F.factor+.001);E.col=Math.floor(E.col/F.factor+.001);this.updateTileInfo(E);return!0};C.getTileBounds=function(E,F){var {resolution:G}=this.lodAt(F.level);const J=G*this.size[0];G*=this.size[1];E[0]=this.origin.x+F.col*J;E[1]=this.origin.y-(F.row+1)*G;E[2]=E[0]+J;E[3]=E[1]+G;return E};C.lodAt=function(E){return this._levelToLOD&&this._levelToLOD[E]||null};C.clone=function(){return D.fromJSON(this.write({}))};C._initializeUpsampleLevels=
function(){const E=this.lods;this._upsampleLevels=[];let F=null;for(let G=0;G<E.length;G++){const J=E[G];this._upsampleLevels[J.level]={parentLevel:F?F.level:-1,factor:F?F.resolution/J.resolution:0};F=J}};n._createClass(A,[{key:"isWrappable",get:function(){const {spatialReference:E,origin:F}=this;if(E&&F){const G=b.getInfo(E);return E.isWrappable&&Math.abs(G.origin[0]-F.x)<=G.dx}return!1}},{key:"lods",set:function(E){let F=0,G=0;const J=[];this._levelToLOD={};E&&(F=-Infinity,G=Infinity,E.forEach(K=>
{J.push(K.scale);F=K.scale>F?K.scale:F;G=K.scale<G?K.scale:G;this._levelToLOD[K.level]=K}));this._set("scales",J);this._set("minScale",F);this._set("maxScale",G);this._set("lods",E);this._initializeUpsampleLevels()}}]);return A}(g.JSONSupport);l.__decorate([w.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);l.__decorate([w.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);l.__decorate([w.property({type:String,json:{read:p.read,write:p.write,origins:{"web-scene":{read:!1,
write:!1}}}})],g.prototype,"format",void 0);l.__decorate([w.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],g.prototype,"isWrappable",null);l.__decorate([w.property({type:r,json:{write:!0}})],g.prototype,"origin",void 0);l.__decorate([k.reader("origin")],g.prototype,"readOrigin",null);l.__decorate([w.property({type:[u],value:null,json:{write:!0}})],g.prototype,"lods",null);l.__decorate([w.property({readOnly:!0})],g.prototype,"minScale",void 0);l.__decorate([w.property({readOnly:!0})],
g.prototype,"maxScale",void 0);l.__decorate([w.property({readOnly:!0})],g.prototype,"scales",void 0);l.__decorate([w.property({cast:B=>Array.isArray(B)?B:"number"===typeof B?[B,B]:[256,256]})],g.prototype,"size",void 0);l.__decorate([k.reader("size",["rows","cols"])],g.prototype,"readSize",null);l.__decorate([c.writer("size",{cols:{type:y.Integer},rows:{type:y.Integer}})],g.prototype,"writeSize",null);l.__decorate([w.property({type:a,json:{write:!0}})],g.prototype,"spatialReference",void 0);return g=
D=l.__decorate([m.subclass("esri.layers.support.TileInfo")],g)})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(n,l,p,z,y,w,f,k){function m(G){if(G=F[G])return G;throw Error("unknown measure");}function c(G){return E[G].baseUnit}function e(G,J=null){J=J||m(G);return E[J].baseUnit===G}function q(G,
J,K){if(J===K)return G;const L=m(J);if(L!==m(K))throw Error("incompatible units");G=e(J,L)?G:G*E[L].units[J].inBaseUnits;return e(K,L)?G:G/E[L].units[K].inBaseUnits}function d(G,J){return 3E3>q(G,J,"meters")?"meters":"kilometers"}function g(G,J){return 1E5>q(G,J,"meters")?"meters":"kilometers"}function b(G,J){return 1E3>q(G,J,"feet")?"feet":"miles"}function a(G,J){return 1E5>q(G,J,"feet")?"feet":"miles"}function h(G){return C.fromJSON(G.toLowerCase())||null}function r(G,J=f.earth.metersPerDegree){return t(G,
!0)||J}function t(G,J=!1){let K,L,I=null;null!=G&&("object"===typeof G?(K=G.wkid,L=G.wkt):"number"===typeof G?K=G:"string"===typeof G&&(L=G));if(K){if(y.isWKIDFromMars(K))return f.mars.metersPerDegree;if(y.isWKIDFromMoon(K))return f.moon.metersPerDegree;I=D.values[D[K]];!I&&J&&A.has(K)&&(I=x)}else L&&(-1!==L.search(/^PROJCS/i)?(G=u.exec(L))&&G[1]&&(I=parseFloat(G[1].split(",")[1])):-1!==L.search(/^GEOCCS/i)&&(G=B.exec(L))&&G[1]&&(I=parseFloat(G[1].split(",")[1])));return I}function v(G){let J,K,L=
null;null!=G&&("object"===typeof G?(J=G.wkid,K=G.wkt):"number"===typeof G?J=G:"string"===typeof G&&(K=G));J?L=D.units[D[J]]:K&&-1!==K.search(/^PROJCS/i)&&(G=u.exec(K))&&G[1]&&(L=(G=/[\\"\\']{1}([^\\"\\']+)/.exec(G[1]))&&G[1]);return L?h(L):null}const x=f.earth.radius*Math.PI/200,u=/UNIT\[([^\]]+)\]\]$/i,D=z,B=/UNIT\[([^\]]+)\]/i,A=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),C=p.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});l={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};p={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(G=>G*G)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const E={length:{baseUnit:"meters",units:l},area:{baseUnit:"square-meters",units:p},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},F=function(){const G={};for(const J in E)for(const K in E[J].units)G[K]=J;return G}();n.baseUnitForMeasure=c;n.baseUnitForUnit=function(G){return c(m(G))};n.convertUnit=q;n.getDefaultUnitSystem=function(G){if(!G)return null;switch(v(G)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};n.getMetersPerUnit=t;n.getMetersPerUnitForSR=r;n.getMetersPerVerticalUnitForSR=function(G){if(G&&"object"===typeof G&&!y.isEarth(G))return 1;G=r(G);return 1E5<G?1:G};n.getUnitString=v;n.getVerticalUnitStringForSR=function(G){const J=r(G),K=G instanceof w?k.getReferenceEllipsoid(G).metersPerDegree:1E5;return J>=K?"meters":v(G)};n.inchesPerMeter=39.37;n.isBaseUnit=e;n.isMeasurementSystem=function(G){return"imperial"===
G||"metric"===G};n.lengthToDegrees=function(G,J,K){return q(G,J,"meters")/(K*Math.PI/180)};n.measureForUnit=m;n.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");n.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");n.preferredImperialAreaUnit=function(G,J){return 1E6>q(G,J,"square-feet")?"square-feet":"square-miles"};
n.preferredImperialLengthUnit=b;n.preferredImperialVerticalLengthUnit=a;n.preferredLengthUnit=function(G,J,K){switch(K){case "metric":return d(G,J);case "imperial":return b(G,J);default:return K}};n.preferredMetricAreaUnit=function(G,J){return 3E6>q(G,J,"square-meters")?"square-meters":"square-kilometers"};n.preferredMetricLengthUnit=d;n.preferredMetricVerticalLengthUnit=g;n.preferredVerticalLengthUnit=function(G,J,K){switch(K){case "metric":return g(G,J);case "imperial":return a(G,J);default:return K}};
n.unitFromRESTJSON=h;n.unitToRESTJSON=function(G){return C.toJSON(G)||null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(n,l,p,z){function y(c){return new p({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${c.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const w=y(z.earth),f=y(z.mars),k=y(z.moon),m=new p({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${z.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});n.SphericalECEFSpatialReference=w;n.SphericalPCPFMars=f;n.SphericalPCPFMoon=k;n.WGS84ECEFSpatialReference=m;n.createSphericalPCPF=y;n.getReferenceEllipsoid=function(c){return c&&(l.isMars(c)||c===f)?z.mars:c&&(l.isMoon(c)||c===k)?z.moon:z.earth};n.getReferenceEllipsoidFromWKID=function(c){return l.isWKIDFromMars(c)?z.mars:l.isWKIDFromMoon(c)?z.moon:z.earth};n.getSphericalPCPF=function(c){return c&&(l.isMars(c)||c===f)?f:c&&(l.isMoon(c)||c===k)?k:w};n.getSphericalPCPFForEllipsoid=function(c){return c&&
c===z.mars?f:c&&c===z.moon?k:w};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(n,l,p){function z(d=q){return[d[0],d[1],d[2],d[3]]}function y(d){return d[0]>=d[2]?0:d[2]-d[0]}function w(d){return d[1]>=d[3]?0:d[3]-d[1]}function f(d,g,b){return g>=d[0]&&b>=d[1]&&g<=d[2]&&b<=d[3]}function k(d,g){d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];return d}function m(d){return 4===d.length}function c(d,
g,b){return d<g?g:d>b?b:d}const e=[Infinity,Infinity,-Infinity,-Infinity],q=[0,0,0,0];n.NEGATIVE_INFINITY=e;n.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];n.UNIT=[0,0,1,1];n.ZERO=q;n.allFinite=function(d){for(let g=0;4>g;g++)if(!isFinite(d[g]))return!1;return!0};n.area=function(d){return y(d)*w(d)};n.center=function(d,g=[0,0]){g[0]=(d[0]+d[2])/2;g[1]=(d[1]+d[3])/2;return g};n.clone=function(d){return[d[0],d[1],d[2],d[3]]};n.contains=function(d,g){return g[0]>=d[0]&&g[2]<=d[2]&&g[1]>=
d[1]&&g[3]<=d[3]};n.containsPoint=function(d,g){return f(d,g[0],g[1])};n.containsPointObject=function(d,g){return f(d,g.x,g.y)};n.containsPointWithMargin=function(d,g,b){return g[0]>=d[0]-b&&g[1]>=d[1]-b&&g[0]<=d[2]+b&&g[1]<=d[3]+b};n.containsXY=f;n.create=z;n.diameter=function(d){const g=y(d);d=w(d);return Math.sqrt(g*g+d*d)};n.distance=function(d,g){const b=(d[1]+d[3])/2,a=Math.max(Math.abs(g[0]-(d[0]+d[2])/2)-y(d)/2,0);d=Math.max(Math.abs(g[1]-b)-w(d)/2,0);return Math.sqrt(a*a+d*d)};n.empty=function(d){return d?
k(d,e):z(e)};n.equals=function(d,g,b){if(null==d||null==g)return d===g;if(!m(d)||!m(g))return!1;if(b)for(let a=0;a<d.length;a++){if(!b(d[a],g[a]))return!1}else for(b=0;b<d.length;b++)if(d[b]!==g[b])return!1;return!0};n.expand=function(d,g,b=d){if("length"in g)if(m(g))b[0]=Math.min(d[0],g[0]),b[1]=Math.min(d[1],g[1]),b[2]=Math.max(d[2],g[2]),b[3]=Math.max(d[3],g[3]);else{if(2===g.length||3===g.length)b[0]=Math.min(d[0],g[0]),b[1]=Math.min(d[1],g[1]),b[2]=Math.max(d[2],g[0]),b[3]=Math.max(d[3],g[1])}else switch(g.type){case "extent":b[0]=
Math.min(d[0],g.xmin);b[1]=Math.min(d[1],g.ymin);b[2]=Math.max(d[2],g.xmax);b[3]=Math.max(d[3],g.ymax);break;case "point":b[0]=Math.min(d[0],g.x),b[1]=Math.min(d[1],g.y),b[2]=Math.max(d[2],g.x),b[3]=Math.max(d[3],g.y)}return b};n.expandPointInPlace=function(d,g){g[0]<d[0]&&(d[0]=g[0]);g[0]>d[2]&&(d[2]=g[0]);g[1]<d[1]&&(d[1]=g[1]);g[1]>d[3]&&(d[3]=g[1])};n.expandWithNestedArray=function(d,g,b=d){const a=g.length;let h=d[0],r=d[1],t=d[2];d=d[3];for(let v=0;v<a;v++){const x=g[v];h=Math.min(h,x[0]);r=
Math.min(r,x[1]);t=Math.max(t,x[0]);d=Math.max(d,x[1])}b[0]=h;b[1]=r;b[2]=t;b[3]=d;return b};n.fromExtent=function(d,g=z()){g[0]=d.xmin;g[1]=d.ymin;g[2]=d.xmax;g[3]=d.ymax;return g};n.fromValues=function(d,g,b,a,h=z()){h[0]=d;h[1]=g;h[2]=b;h[3]=a;return h};n.height=w;n.intersection=function(d,g,b=d){const a=g[0],h=g[1],r=g[2];g=g[3];b[0]=c(d[0],a,r);b[1]=c(d[1],h,g);b[2]=c(d[2],a,r);b[3]=c(d[3],h,g);return b};n.intersects=function(d,g){return Math.max(g[0],d[0])<=Math.min(g[2],d[2])&&Math.max(g[1],
d[1])<=Math.min(g[3],d[3])};n.is=m;n.isPoint=function(d){return(0===y(d)||!isFinite(d[0]))&&(0===w(d)||!isFinite(d[1]))};n.offset=function(d,g,b,a=d){a[0]=d[0]+g;a[1]=d[1]+b;a[2]=d[2]+g;a[3]=d[3]+b;return a};n.pad=function(d,g,b=d){b[0]=d[0]-g;b[1]=d[1]-g;b[2]=d[2]+g;b[3]=d[3]+g;return b};n.set=k;n.setMax=function(d,g,b=d){b[2]=g[0];b[3]=g[1];b!==d&&(b[0]=d[0],b[1]=d[1]);return d};n.setMin=function(d,g,b=d){b[0]=g[0];b[1]=g[1];b!==d&&(b[2]=d[2],b[3]=d[3]);return b};n.size=function(d,g){g[0]=d[2]-
d[0];g[1]=d[3]-d[1]};n.toExtent=function(d,g){return new p({xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3],spatialReference:g})};n.width=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return b}(q.JSONSupport);l.__decorate([w.property({type:y.Integer,json:{write:!0}})],p.prototype,"level",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"levelValue",
void 0);l.__decorate([w.property({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0);l.__decorate([w.property({type:Number,json:{write:!0}})],p.prototype,"scale",void 0);return p=d=l.__decorate([k.subclass("esri.layers.support.LOD")],p)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/Extent ../../geometry ../../chunks/common ../../Viewpoint ../../chunks/vec2f64 ../../chunks/mat3 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64 ./viewpointUtils ../../chunks/mat2df32 ../../chunks/mat3f32 ../../chunks/vec2f32 ../../core/libs/gl-matrix-2/types/vec2".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E){var F;const G=[0,0];p=F=function(J){function K(...I){I=J.call(this,...I)||this;I._viewpoint2D={center:r.create(),rotation:0,scale:0,spatialReference:null};I.center=[0,0];I.extent=new g;I.id=0;I.inverseTransform=u.create();I.resolution=0;I.rotation=0;I.scale=0;I.transform=u.create();I.transformNoRotation=u.create();I.displayMat3=A.create();I.displayViewMat3=A.create();I.viewMat3=A.create();I.viewMat2d=B.create();I.worldScreenWidth=0;I.size=
[0,0];return I}n._inheritsLoose(K,J);var L=K.prototype;L.copy=function(I){const N=this.size,P=this.viewpoint;P&&N?(this.viewpoint=D.copy(P,I.viewpoint),this._set("size",v.copy(N,I.size))):(this.viewpoint=I.viewpoint.clone(),this._set("size",[I.size[0],I.size[1]]));this._set("pixelRatio",I.pixelRatio);return this};L.clone=function(){return new F({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};L.toMap=function(I,N,P){if(E.isVec2(N))return v.transformMat2d(I,N,this.inverseTransform);
G[0]=N;G[1]=P;return v.transformMat2d(I,G,this.inverseTransform)};L.toScreen=function(I,N,P){if(E.isVec2(N))return v.transformMat2d(I,N,this.transform);G[0]=N;G[1]=P;return v.transformMat2d(I,G,this.transform)};L.toScreenNoRotation=function(I,N,P){if(E.isVec2(N))return v.transformMat2d(I,N,this.transformNoRotation);G[0]=N;G[1]=P;return v.transformMat2d(I,G,this.transformNoRotation)};L.getScreenTransform=function(I,N){const {center:P}=this._viewpoint2D,R=this._get("pixelRatio")||1,T=this._get("size");
D.getMatrix(I,P,T,N,0,R);return I};L._update=function(){const {center:I,spatialReference:N,scale:P,rotation:R}=this._viewpoint2D,T=this._get("pixelRatio")||1,W=this._get("size"),Z=new h({targetGeometry:new d(I[0],I[1],N),scale:P,rotation:R});this._set("viewpoint",Z);if(W&&N&&P){this.resolution=D.getResolution(Z);this.rotation=R;this.scale=P;this.spatialReference=N;v.copy(this.center,I);t.set(this.displayMat3,0!==W[0]?2/W[0]:0,0,0,0,0!==W[1]?-2/W[1]:0,0,-1,1,1);var la=t.identity(this.viewMat3),ea=
C.fromValues(W[0]/2,W[1]/2),O=C.fromValues(-W[0]/2,-W[1]/2),U=a.toRadian(R);t.translate(la,la,ea);t.rotate(la,la,U);t.translate(la,la,O);t.multiply(this.displayViewMat3,this.displayMat3,la);la=x.identity(this.viewMat2d);x.translate(la,la,ea);x.rotate(la,la,U);x.translate(la,la,O);D.getExtent(this.extent,Z,W);D.getTransform(this.transform,Z,W,T);x.invert(this.inverseTransform,this.transform);D.getTransformNoRotation(this.transformNoRotation,Z,W,T);this.worldScreenWidth=D.getWorldScreenWidth(this.spatialReference,
this.resolution);this._set("id",this.id+1);return this}};n._createClass(K,[{key:"pixelRatio",set:function(I){this._set("pixelRatio",I);this._update()}},{key:"size",set:function(I){this._set("size",I);this._update()}},{key:"viewpoint",set:function(I){if(I){const N=this._viewpoint2D,P=I.targetGeometry;N.center[0]=P.x;N.center[1]=P.y;N.rotation=I.rotation;N.scale=I.scale;N.spatialReference=P.spatialReference}this._update()}}]);return K}(q.JSONSupport);l.__decorate([w.property({readOnly:!0})],p.prototype,
"id",void 0);l.__decorate([w.property({value:1,json:{write:!0}})],p.prototype,"pixelRatio",null);l.__decorate([w.property({json:{write:!0}})],p.prototype,"size",null);l.__decorate([w.property({type:h,json:{write:!0}})],p.prototype,"viewpoint",null);return p=F=l.__decorate([k.subclass("esri.views.2d.ViewState")],p)})},"esri/chunks/common":function(){define(["exports"],function(n){function l(m){return m*w}function p(m){return m*f}function z(m,c){return Math.abs(m-c)<=1E-6*Math.max(1,Math.abs(m),Math.abs(c))}
const y=Math.random,w=Math.PI/180,f=180/Math.PI;var k=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:y,toRadian:l,toDegree:p,equals:z});n.EPSILON=1E-6;n.RANDOM=y;n.common=k;n.equals=z;n.toDegree=p;n.toRadian=l})},"esri/Viewpoint":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/maybe ./core/Logger ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./geometry/support/jsonUtils ./geometry ./Camera".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){function h(){return{enabled:!this.camera}}var r;p=r=function(t){function v(u){u=t.call(this,u)||this;u.rotation=0;u.scale=0;u.targetGeometry=null;u.camera=null;return u}n._inheritsLoose(v,t);var x=v.prototype;x.castRotation=function(u){u%=360;0>u&&(u+=360);return u};x.clone=function(){return new r({rotation:this.rotation,scale:this.scale,targetGeometry:z.isSome(this.targetGeometry)?this.targetGeometry.clone():null,camera:z.isSome(this.camera)?this.camera.clone():
null})};return v}(d.JSONSupport);l.__decorate([w.property({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:h}}}}})],p.prototype,"rotation",void 0);l.__decorate([f.cast("rotation")],p.prototype,"castRotation",null);l.__decorate([w.property({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:h}}}}})],p.prototype,"scale",void 0);l.__decorate([w.property({types:b.geometryTypes,json:{read:g.fromJSON,
write:!0,origins:{"web-scene":{read:g.fromJSON,write:{overridePolicy:h}}}}})],p.prototype,"targetGeometry",void 0);l.__decorate([w.property({type:a,json:{write:!0}})],p.prototype,"camera",void 0);return p=r=l.__decorate([m.subclass("esri.Viewpoint")],p)})},"esri/Camera":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./geometry/Point ./core/mathUtils ./views/3d/support/mathUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){var t;p=t=function(v){function x(...D){D=v.call(this,...D)||this;D.position=new a([0,0,0]);D.heading=0;D.tilt=0;D.fov=55;return D}n._inheritsLoose(x,v);var u=x.prototype;u.normalizeCtorArgs=function(D,B,A,C){return D&&"object"===typeof D&&("x"in D||Array.isArray(D))?(D={position:D},null!=B&&(D.heading=B),null!=A&&(D.tilt=A),null!=C&&(D.fov=C),D):D};u.writePosition=function(D,B,A,C){const E=D.clone();E.x=y.ensureNumber(D.x||0);E.y=y.ensureNumber(D.y||0);
E.z=D.hasZ?y.ensureNumber(D.z||0):D.z;B[A]=E.write(null,C)};u.readPosition=function(D,B){const A=new a;A.read(D,B);A.x=y.ensureNumber(A.x||0);A.y=y.ensureNumber(A.y||0);A.z=A.hasZ?y.ensureNumber(A.z||0):A.z;return A};u.equals=function(D){return D?this.tilt===D.tilt&&this.heading===D.heading&&this.fov===D.fov&&this.position.equals(D.position):!1};u.clone=function(){return new t({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};return x}(b.JSONSupport);l.__decorate([w.property({type:a,
json:{write:{isRequired:!0}}})],p.prototype,"position",void 0);l.__decorate([e.writer("position")],p.prototype,"writePosition",null);l.__decorate([m.reader("position")],p.prototype,"readPosition",null);l.__decorate([w.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),f.cast(v=>r.cyclicalDeg.normalize(y.ensureNumber(v)))],p.prototype,"heading",void 0);l.__decorate([w.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),f.cast(v=>h.clamp(y.ensureNumber(v),-180,180))],
p.prototype,"tilt",void 0);l.__decorate([w.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],p.prototype,"fov",void 0);return p=t=l.__decorate([c.subclass("esri.Camera")],p)})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3f64","../../../chunks/vec3"],function(n,l,p,z){function y(b){for(const a in b){const h=b[a];h instanceof Function&&(b[a]=h.bind(b))}return b}let w=function(){function b(h,r){this.min=h;this.max=r;this.range=
r-h}var a=b.prototype;a.ndiff=function(h,r=0){return Math.ceil((h-r)/this.range)*this.range+r};a._normalize=function(h,r,t,v=0,x=!1){t-=v;t<h?t+=this.ndiff(h-t):t>r&&(t-=this.ndiff(t-r));x&&t===r&&(t=h);return t+v};a.normalize=function(h,r=0,t=!1){return this._normalize(this.min,this.max,h,r,t)};a.clamp=function(h,r=0){return l.clamp(h-r,this.min,this.max)+r};a.monotonic=function(h,r,t){return h<r?r:r+this.ndiff(h-r,t)};a.minimalMonotonic=function(h,r,t){return this._normalize(h,h+this.range,r,t)};
a.center=function(h,r,t){r=this.monotonic(h,r,t);return this.normalize((h+r)/2,t)};a.diff=function(h,r,t){return this.monotonic(h,r,t)-h};a.shortestSignedDiff=function(h,r){h=this.normalize(h);r=this.normalize(r);const t=r-h;h=r<h?this.minimalMonotonic(h,r)-h:r-this.minimalMonotonic(r,h);return Math.abs(t)<Math.abs(h)?t:h};a.contains=function(h,r,t){r=this.minimalMonotonic(h,r);t=this.minimalMonotonic(h,t);return t>h&&t<r};return b}();const f=p.create(),k=p.create(),m=y(new w(0,2*Math.PI)),c=y(new w(-Math.PI,
Math.PI)),e=y(new w(0,360)),q=p.create(),d=p.create(),g=p.create();n.Cyclical=w;n.angle=function(b,a,h){b=z.normalize(d,b);a=z.normalize(g,a);const r=l.acosClamped(z.dot(b,a));return h&&(b=z.cross(q,b,a),0>z.dot(b,h))?-r:r};n.bilerp=function(b,a,h,r,t,v){b+=(a-b)*t;return b+(h+(r-h)*t-b)*v};n.cartesianToSpherical=function(b,a){const h=z.length(b),r=l.asinClamped(b[2]/h);z.set(a,h,r,Math.atan2(b[1]/h,b[0]/h));return a};n.cosCapped=function(b,a){return b>a?Math.cos(a):Math.cos(b)};n.cyclical2PI=m;n.cyclicalDeg=
e;n.cyclicalPI=c;n.directionFromTo=function(b,a,h){const r=h[0]-a[0],t=h[1]-a[1];a=h[2]-a[2];h=r*r+t*t+a*a;if(!h)return b[0]=0,b[1]=0,b[2]=0,b;h=1/Math.sqrt(h);b[0]=r*h;b[1]=t*h;b[2]=a*h;return b};n.fovx2fovy=function(b,a,h){return 2*Math.atan(h*Math.tan(.5*b)/a)};n.fovy2fovx=function(b,a,h){return 2*Math.atan(a*Math.tan(.5*b)/h)};n.makeOrthonormal=function(b,a,h){h=h||b;const r=z.dot(b,a);z.set(h,b[0]-r*a[0],b[1]-r*a[1],b[2]-r*a[2]);z.normalize(h,h)};n.makePiecewiseLinearFunction=function(b){const a=
b.length;return function(h){if(h<=b[0][0])return b[0][1];if(h>=b[a-1][0])return b[a-1][1];let r=1;for(;h>b[r][0];)r++;const t=b[r][0];h=(t-h)/(t-b[r-1][0]);return h*b[r-1][1]+(1-h)*b[r][1]}};n.maxScale=function(b){return Math.sqrt(Math.max(Math.max(b[0]*b[0]+b[4]*b[4]+b[8]*b[8],b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),b[2]*b[2]+b[6]*b[6]+b[10]*b[10]))};n.moduloPositive=function(b,a){return(b%a+a)%a};n.planeFromPoints=function(b,a,h,r){z.subtract(f,a,b);z.subtract(k,h,b);z.cross(r,f,k);z.normalize(r,r);r[3]=
-z.dot(b,r)};n.scaleFromMatrix=function(b,a){z.set(b,Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9]),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]));return b};n.slerp=function(b,a,h,r=p.create()){const t=z.length(b);var v=z.length(a),x=z.dot(b,a)/(t*v);if(.9999999999999999>x){x=Math.acos(x);const u=((1-h)*t+h*v)/Math.sin(x);v=u/v*Math.sin(h*x);z.scale(d,b,u/t*Math.sin((1-h)*x));z.scale(g,a,v);return z.add(r,d,g)}return z.lerp(r,b,a,h)};n.sphericalToCartesian=function(b,
a){const h=b[0],r=b[1];b=b[2];const t=Math.cos(r);z.set(a,h*t*Math.cos(b),h*t*Math.sin(b),h*Math.sin(r))};n.tangentFrame=function(b,a,h){Math.abs(b[0])>Math.abs(b[1])?z.set(a,0,1,0):z.set(a,1,0,0);z.cross(h,b,a);z.normalize(a,a);z.cross(a,h,b);z.normalize(h,h)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(n){function l(){return[0,0,0]}function p(r){return[r[0],r[1],r[2]]}function z(r,t,v){return[r,t,v]}function y(r){const t=l(),v=
Math.min(3,r.length);for(let x=0;x<v;++x)t[x]=r[x];return t}function w(r,t){return new Float64Array(r,t,3)}function f(){return l()}function k(){return[1,1,1]}function m(){return[1,0,0]}function c(){return[0,1,0]}function e(){return[0,0,1]}const q=l(),d=k(),g=m(),b=c(),a=e();var h=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,fromArray:y,createView:w,zeros:f,ones:k,unitX:m,unitY:c,unitZ:e,ZEROS:q,ONES:d,UNIT_X:g,UNIT_Y:b,UNIT_Z:a});n.ONES=d;n.UNIT_X=g;n.UNIT_Y=b;n.UNIT_Z=a;n.ZEROS=q;
n.clone=p;n.create=l;n.createView=w;n.fromArray=y;n.fromValues=z;n.ones=k;n.unitX=m;n.unitY=c;n.unitZ=e;n.vec3f64=h;n.zeros=f})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(n,l,p){function z(O){const U=O[0],ba=O[1];O=O[2];return Math.sqrt(U*U+ba*ba+O*O)}function y(O,U){O[0]=U[0];O[1]=U[1];O[2]=U[2];return O}function w(O,U,ba,ka){O[0]=U;O[1]=ba;O[2]=ka;return O}function f(O,U,ba){O[0]=U[0]+ba[0];O[1]=U[1]+ba[1];O[2]=U[2]+ba[2];return O}function k(O,U,ba){O[0]=U[0]-
ba[0];O[1]=U[1]-ba[1];O[2]=U[2]-ba[2];return O}function m(O,U,ba){O[0]=U[0]*ba[0];O[1]=U[1]*ba[1];O[2]=U[2]*ba[2];return O}function c(O,U,ba){O[0]=U[0]/ba[0];O[1]=U[1]/ba[1];O[2]=U[2]/ba[2];return O}function e(O,U){O[0]=Math.ceil(U[0]);O[1]=Math.ceil(U[1]);O[2]=Math.ceil(U[2]);return O}function q(O,U){O[0]=Math.floor(U[0]);O[1]=Math.floor(U[1]);O[2]=Math.floor(U[2]);return O}function d(O,U,ba){O[0]=Math.min(U[0],ba[0]);O[1]=Math.min(U[1],ba[1]);O[2]=Math.min(U[2],ba[2]);return O}function g(O,U,ba){O[0]=
Math.max(U[0],ba[0]);O[1]=Math.max(U[1],ba[1]);O[2]=Math.max(U[2],ba[2]);return O}function b(O,U){O[0]=Math.round(U[0]);O[1]=Math.round(U[1]);O[2]=Math.round(U[2]);return O}function a(O,U,ba){O[0]=U[0]*ba;O[1]=U[1]*ba;O[2]=U[2]*ba;return O}function h(O,U,ba,ka){O[0]=U[0]+ba[0]*ka;O[1]=U[1]+ba[1]*ka;O[2]=U[2]+ba[2]*ka;return O}function r(O,U){const ba=U[0]-O[0],ka=U[1]-O[1];O=U[2]-O[2];return Math.sqrt(ba*ba+ka*ka+O*O)}function t(O,U){const ba=U[0]-O[0],ka=U[1]-O[1];O=U[2]-O[2];return ba*ba+ka*ka+
O*O}function v(O){const U=O[0],ba=O[1];O=O[2];return U*U+ba*ba+O*O}function x(O,U){O[0]=-U[0];O[1]=-U[1];O[2]=-U[2];return O}function u(O,U){O[0]=1/U[0];O[1]=1/U[1];O[2]=1/U[2];return O}function D(O,U){var ba=U[0];const ka=U[1],oa=U[2];ba=ba*ba+ka*ka+oa*oa;0<ba&&(ba=1/Math.sqrt(ba),O[0]=U[0]*ba,O[1]=U[1]*ba,O[2]=U[2]*ba);return O}function B(O,U){return O[0]*U[0]+O[1]*U[1]+O[2]*U[2]}function A(O,U,ba){const ka=U[0],oa=U[1];U=U[2];const M=ba[0],V=ba[1];ba=ba[2];O[0]=oa*ba-U*V;O[1]=U*M-ka*ba;O[2]=ka*
V-oa*M;return O}function C(O,U,ba,ka){const oa=U[0],M=U[1];U=U[2];O[0]=oa+ka*(ba[0]-oa);O[1]=M+ka*(ba[1]-M);O[2]=U+ka*(ba[2]-U);return O}function E(O,U,ba,ka,oa,M){const V=M*M,ha=V*(2*M-3)+1,Q=V*(M-2)+M,X=V*(M-1);M=V*(3-2*M);O[0]=U[0]*ha+ba[0]*Q+ka[0]*X+oa[0]*M;O[1]=U[1]*ha+ba[1]*Q+ka[1]*X+oa[1]*M;O[2]=U[2]*ha+ba[2]*Q+ka[2]*X+oa[2]*M;return O}function F(O,U,ba,ka,oa,M){var V=1-M,ha=V*V;const Q=M*M,X=ha*V;ha*=3*M;V*=3*Q;M*=Q;O[0]=U[0]*X+ba[0]*ha+ka[0]*V+oa[0]*M;O[1]=U[1]*X+ba[1]*ha+ka[1]*V+oa[1]*M;
O[2]=U[2]*X+ba[2]*ha+ka[2]*V+oa[2]*M;return O}function G(O,U){U=U||1;const ba=2*p.RANDOM()*Math.PI,ka=2*p.RANDOM()-1,oa=Math.sqrt(1-ka*ka)*U;O[0]=Math.cos(ba)*oa;O[1]=Math.sin(ba)*oa;O[2]=ka*U;return O}function J(O,U,ba){const ka=U[0],oa=U[1];U=U[2];O[0]=ba[0]*ka+ba[4]*oa+ba[8]*U+ba[12];O[1]=ba[1]*ka+ba[5]*oa+ba[9]*U+ba[13];O[2]=ba[2]*ka+ba[6]*oa+ba[10]*U+ba[14];return O}function K(O,U,ba){const ka=U[0],oa=U[1];U=U[2];O[0]=ka*ba[0]+oa*ba[3]+U*ba[6];O[1]=ka*ba[1]+oa*ba[4]+U*ba[7];O[2]=ka*ba[2]+oa*
ba[5]+U*ba[8];return O}function L(O,U,ba){const ka=ba[0],oa=ba[1],M=ba[2],V=U[0],ha=U[1];U=U[2];let Q=oa*U-M*ha,X=M*V-ka*U,aa=ka*ha-oa*V;ba=2*ba[3];O[0]=V+Q*ba+2*(oa*aa-M*X);O[1]=ha+X*ba+2*(M*Q-ka*aa);O[2]=U+aa*ba+2*(ka*X-oa*Q);return O}function I(O,U,ba,ka){const oa=[],M=[];oa[0]=U[0]-ba[0];oa[1]=U[1]-ba[1];oa[2]=U[2]-ba[2];M[0]=oa[0];M[1]=oa[1]*Math.cos(ka)-oa[2]*Math.sin(ka);M[2]=oa[1]*Math.sin(ka)+oa[2]*Math.cos(ka);O[0]=M[0]+ba[0];O[1]=M[1]+ba[1];O[2]=M[2]+ba[2];return O}function N(O,U,ba,ka){const oa=
[],M=[];oa[0]=U[0]-ba[0];oa[1]=U[1]-ba[1];oa[2]=U[2]-ba[2];M[0]=oa[2]*Math.sin(ka)+oa[0]*Math.cos(ka);M[1]=oa[1];M[2]=oa[2]*Math.cos(ka)-oa[0]*Math.sin(ka);O[0]=M[0]+ba[0];O[1]=M[1]+ba[1];O[2]=M[2]+ba[2];return O}function P(O,U,ba,ka){const oa=[],M=[];oa[0]=U[0]-ba[0];oa[1]=U[1]-ba[1];oa[2]=U[2]-ba[2];M[0]=oa[0]*Math.cos(ka)-oa[1]*Math.sin(ka);M[1]=oa[0]*Math.sin(ka)+oa[1]*Math.cos(ka);M[2]=oa[2];O[0]=M[0]+ba[0];O[1]=M[1]+ba[1];O[2]=M[2]+ba[2];return O}function R(O,U){y(la,O);y(ea,U);D(la,la);D(ea,
ea);O=B(la,ea);return 1<O?0:-1>O?Math.PI:Math.acos(O)}function T(O){return"vec3("+O[0]+", "+O[1]+", "+O[2]+")"}function W(O,U){return O[0]===U[0]&&O[1]===U[1]&&O[2]===U[2]}function Z(O,U){const ba=O[0],ka=O[1];O=O[2];const oa=U[0],M=U[1];U=U[2];return Math.abs(ba-oa)<=p.EPSILON*Math.max(1,Math.abs(ba),Math.abs(oa))&&Math.abs(ka-M)<=p.EPSILON*Math.max(1,Math.abs(ka),Math.abs(M))&&Math.abs(O-U)<=p.EPSILON*Math.max(1,Math.abs(O),Math.abs(U))}const la=l.create(),ea=l.create();l=Object.freeze({__proto__:null,
length:z,copy:y,set:w,add:f,subtract:k,multiply:m,divide:c,ceil:e,floor:q,min:d,max:g,round:b,scale:a,scaleAndAdd:h,distance:r,squaredDistance:t,squaredLength:v,negate:x,inverse:u,normalize:D,dot:B,cross:A,lerp:C,hermite:E,bezier:F,random:G,transformMat4:J,transformMat3:K,transformQuat:L,rotateX:I,rotateY:N,rotateZ:P,angle:R,str:T,exactEquals:W,equals:Z,sub:k,mul:m,div:c,dist:r,sqrDist:t,len:z,sqrLen:v});n.add=f;n.angle=R;n.bezier=F;n.ceil=e;n.copy=y;n.cross=A;n.dist=r;n.distance=r;n.div=c;n.divide=
c;n.dot=B;n.equals=Z;n.exactEquals=W;n.floor=q;n.hermite=E;n.inverse=u;n.len=z;n.length=z;n.lerp=C;n.max=g;n.min=d;n.mul=m;n.multiply=m;n.negate=x;n.normalize=D;n.random=G;n.rotateX=I;n.rotateY=N;n.rotateZ=P;n.round=b;n.scale=a;n.scaleAndAdd=h;n.set=w;n.sqrDist=t;n.sqrLen=v;n.squaredDistance=t;n.squaredLength=v;n.str=T;n.sub=k;n.subtract=k;n.transformMat3=K;n.transformMat4=J;n.transformQuat=L;n.vec3=l})},"esri/chunks/vec2f64":function(){define(["exports"],function(n){function l(){return[0,0]}function p(a){return[a[0],
a[1]]}function z(a,h){return[a,h]}function y(a){const h=[0,0],r=Math.min(2,a.length);for(let t=0;t<r;++t)h[t]=a[t];return h}function w(a,h){return new Float64Array(a,h,2)}function f(){return[0,0]}function k(){return[1,1]}function m(){return[1,0]}function c(){return[0,1]}const e=[0,0],q=[1,1],d=[1,0],g=[0,1];var b=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,fromArray:y,createView:w,zeros:f,ones:k,unitX:m,unitY:c,ZEROS:e,ONES:q,UNIT_X:d,UNIT_Y:g});n.ONES=q;n.UNIT_X=d;n.UNIT_Y=g;n.ZEROS=
e;n.clone=p;n.create=l;n.createView=w;n.fromArray=y;n.fromValues=z;n.ones=k;n.unitX=m;n.unitY=c;n.vec2f64=b;n.zeros=f})},"esri/chunks/mat3":function(){define(["exports","./common"],function(n,l){function p(I,N){I[0]=N[0];I[1]=N[1];I[2]=N[2];I[3]=N[4];I[4]=N[5];I[5]=N[6];I[6]=N[8];I[7]=N[9];I[8]=N[10];return I}function z(I,N){I[0]=N[0];I[1]=N[1];I[2]=N[2];I[3]=N[3];I[4]=N[4];I[5]=N[5];I[6]=N[6];I[7]=N[7];I[8]=N[8];return I}function y(I,N,P,R,T,W,Z,la,ea,O){I[0]=N;I[1]=P;I[2]=R;I[3]=T;I[4]=W;I[5]=Z;
I[6]=la;I[7]=ea;I[8]=O;return I}function w(I){I[0]=1;I[1]=0;I[2]=0;I[3]=0;I[4]=1;I[5]=0;I[6]=0;I[7]=0;I[8]=1;return I}function f(I,N){if(I===N){const P=N[1],R=N[2],T=N[5];I[1]=N[3];I[2]=N[6];I[3]=P;I[5]=N[7];I[6]=R;I[7]=T}else I[0]=N[0],I[1]=N[3],I[2]=N[6],I[3]=N[1],I[4]=N[4],I[5]=N[7],I[6]=N[2],I[7]=N[5],I[8]=N[8];return I}function k(I,N){const P=N[0],R=N[1],T=N[2],W=N[3],Z=N[4],la=N[5],ea=N[6],O=N[7];N=N[8];const U=N*Z-la*O,ba=-N*W+la*ea,ka=O*W-Z*ea;let oa=P*U+R*ba+T*ka;if(!oa)return null;oa=1/
oa;I[0]=U*oa;I[1]=(-N*R+T*O)*oa;I[2]=(la*R-T*Z)*oa;I[3]=ba*oa;I[4]=(N*P-T*ea)*oa;I[5]=(-la*P+T*W)*oa;I[6]=ka*oa;I[7]=(-O*P+R*ea)*oa;I[8]=(Z*P-R*W)*oa;return I}function m(I,N){const P=N[0],R=N[1],T=N[2],W=N[3],Z=N[4],la=N[5],ea=N[6],O=N[7];N=N[8];I[0]=Z*N-la*O;I[1]=T*O-R*N;I[2]=R*la-T*Z;I[3]=la*ea-W*N;I[4]=P*N-T*ea;I[5]=T*W-P*la;I[6]=W*O-Z*ea;I[7]=R*ea-P*O;I[8]=P*Z-R*W;return I}function c(I){const N=I[3],P=I[4],R=I[5],T=I[6],W=I[7],Z=I[8];return I[0]*(Z*P-R*W)+I[1]*(-Z*N+R*T)+I[2]*(W*N-P*T)}function e(I,
N,P){const R=N[0],T=N[1],W=N[2],Z=N[3],la=N[4],ea=N[5],O=N[6],U=N[7];N=N[8];const ba=P[0],ka=P[1],oa=P[2],M=P[3],V=P[4],ha=P[5],Q=P[6],X=P[7];P=P[8];I[0]=ba*R+ka*Z+oa*O;I[1]=ba*T+ka*la+oa*U;I[2]=ba*W+ka*ea+oa*N;I[3]=M*R+V*Z+ha*O;I[4]=M*T+V*la+ha*U;I[5]=M*W+V*ea+ha*N;I[6]=Q*R+X*Z+P*O;I[7]=Q*T+X*la+P*U;I[8]=Q*W+X*ea+P*N;return I}function q(I,N,P){const R=N[0],T=N[1],W=N[2],Z=N[3],la=N[4],ea=N[5],O=N[6],U=N[7];N=N[8];const ba=P[0];P=P[1];I[0]=R;I[1]=T;I[2]=W;I[3]=Z;I[4]=la;I[5]=ea;I[6]=ba*R+P*Z+O;I[7]=
ba*T+P*la+U;I[8]=ba*W+P*ea+N;return I}function d(I,N,P){const R=N[0],T=N[1],W=N[2],Z=N[3],la=N[4],ea=N[5],O=N[6],U=N[7];N=N[8];const ba=Math.sin(P);P=Math.cos(P);I[0]=P*R+ba*Z;I[1]=P*T+ba*la;I[2]=P*W+ba*ea;I[3]=P*Z-ba*R;I[4]=P*la-ba*T;I[5]=P*ea-ba*W;I[6]=O;I[7]=U;I[8]=N;return I}function g(I,N,P){const R=P[0],T=P[1];P=P[2];I[0]=R*N[0];I[1]=R*N[1];I[2]=R*N[2];I[3]=T*N[3];I[4]=T*N[4];I[5]=T*N[5];I[6]=P*N[6];I[7]=P*N[7];I[8]=P*N[8];return I}function b(I,N,P){const R=P[0];P=P[1];I[0]=R*N[0];I[1]=R*N[1];
I[2]=R*N[2];I[3]=P*N[3];I[4]=P*N[4];I[5]=P*N[5];return I}function a(I,N){I[0]=1;I[1]=0;I[2]=0;I[3]=0;I[4]=1;I[5]=0;I[6]=N[0];I[7]=N[1];I[8]=1;return I}function h(I,N){const P=Math.sin(N);N=Math.cos(N);I[0]=N;I[1]=P;I[2]=0;I[3]=-P;I[4]=N;I[5]=0;I[6]=0;I[7]=0;I[8]=1;return I}function r(I,N){I[0]=N[0];I[1]=0;I[2]=0;I[3]=0;I[4]=N[1];I[5]=0;I[6]=0;I[7]=0;I[8]=1;return I}function t(I,N){I[0]=N[0];I[1]=N[1];I[2]=0;I[3]=N[2];I[4]=N[3];I[5]=0;I[6]=N[4];I[7]=N[5];I[8]=1;return I}function v(I,N){var P=N[0],
R=N[1],T=N[2];N=N[3];var W=P+P,Z=R+R;const la=T+T;P*=W;const ea=R*W;R*=Z;const O=T*W,U=T*Z;T*=la;W*=N;Z*=N;N*=la;I[0]=1-R-T;I[3]=ea-N;I[6]=O+Z;I[1]=ea+N;I[4]=1-P-T;I[7]=U-W;I[2]=O-Z;I[5]=U+W;I[8]=1-P-R;return I}function x(I,N){const P=N[0],R=N[1],T=N[2],W=N[4],Z=N[5],la=N[6],ea=N[8],O=N[9];N=N[10];const U=N*Z-la*O,ba=-N*W+la*ea,ka=O*W-Z*ea;var oa=P*U+R*ba+T*ka;if(!oa)return null;oa=1/oa;I[0]=U*oa;I[1]=(-N*R+T*O)*oa;I[2]=(la*R-T*Z)*oa;I[3]=ba*oa;I[4]=(N*P-T*ea)*oa;I[5]=(-la*P+T*W)*oa;I[6]=ka*oa;I[7]=
(-O*P+R*ea)*oa;I[8]=(Z*P-R*W)*oa;return I}function u(I,N){const P=N[0],R=N[1],T=N[2],W=N[3],Z=N[4],la=N[5],ea=N[6],O=N[7];var U=N[8],ba=N[9],ka=N[10],oa=N[11];const M=N[12],V=N[13],ha=N[14];N=N[15];const Q=P*la-R*Z,X=P*ea-T*Z,aa=P*O-W*Z,ca=R*ea-T*la,ia=R*O-W*la,ja=T*O-W*ea,qa=U*V-ba*M,sa=U*ha-ka*M;U=U*N-oa*M;const ta=ba*ha-ka*V;ba=ba*N-oa*V;ka=ka*N-oa*ha;oa=Q*ka-X*ba+aa*ta+ca*U-ia*sa+ja*qa;if(!oa)return null;oa=1/oa;I[0]=(la*ka-ea*ba+O*ta)*oa;I[1]=(ea*U-Z*ka-O*sa)*oa;I[2]=(Z*ba-la*U+O*qa)*oa;I[3]=
(T*ba-R*ka-W*ta)*oa;I[4]=(P*ka-T*U+W*sa)*oa;I[5]=(R*U-P*ba-W*qa)*oa;I[6]=(V*ja-ha*ia+N*ca)*oa;I[7]=(ha*aa-M*ja-N*X)*oa;I[8]=(M*ia-V*aa+N*Q)*oa;return I}function D(I,N,P){I[0]=2/N;I[1]=0;I[2]=0;I[3]=0;I[4]=-2/P;I[5]=0;I[6]=-1;I[7]=1;I[8]=1;return I}function B(I){return"mat3("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+", "+I[8]+")"}function A(I){return Math.sqrt(Math.pow(I[0],2)+Math.pow(I[1],2)+Math.pow(I[2],2)+Math.pow(I[3],2)+Math.pow(I[4],2)+Math.pow(I[5],2)+Math.pow(I[6],
2)+Math.pow(I[7],2)+Math.pow(I[8],2))}function C(I,N,P){I[0]=N[0]+P[0];I[1]=N[1]+P[1];I[2]=N[2]+P[2];I[3]=N[3]+P[3];I[4]=N[4]+P[4];I[5]=N[5]+P[5];I[6]=N[6]+P[6];I[7]=N[7]+P[7];I[8]=N[8]+P[8];return I}function E(I,N,P){I[0]=N[0]-P[0];I[1]=N[1]-P[1];I[2]=N[2]-P[2];I[3]=N[3]-P[3];I[4]=N[4]-P[4];I[5]=N[5]-P[5];I[6]=N[6]-P[6];I[7]=N[7]-P[7];I[8]=N[8]-P[8];return I}function F(I,N,P){I[0]=N[0]*P;I[1]=N[1]*P;I[2]=N[2]*P;I[3]=N[3]*P;I[4]=N[4]*P;I[5]=N[5]*P;I[6]=N[6]*P;I[7]=N[7]*P;I[8]=N[8]*P;return I}function G(I,
N,P,R){I[0]=N[0]+P[0]*R;I[1]=N[1]+P[1]*R;I[2]=N[2]+P[2]*R;I[3]=N[3]+P[3]*R;I[4]=N[4]+P[4]*R;I[5]=N[5]+P[5]*R;I[6]=N[6]+P[6]*R;I[7]=N[7]+P[7]*R;I[8]=N[8]+P[8]*R;return I}function J(I,N){return I[0]===N[0]&&I[1]===N[1]&&I[2]===N[2]&&I[3]===N[3]&&I[4]===N[4]&&I[5]===N[5]&&I[6]===N[6]&&I[7]===N[7]&&I[8]===N[8]}function K(I,N){const P=I[0],R=I[1],T=I[2],W=I[3],Z=I[4],la=I[5],ea=I[6],O=I[7];I=I[8];const U=N[0],ba=N[1],ka=N[2],oa=N[3],M=N[4],V=N[5],ha=N[6],Q=N[7];N=N[8];return Math.abs(P-U)<=l.EPSILON*Math.max(1,
Math.abs(P),Math.abs(U))&&Math.abs(R-ba)<=l.EPSILON*Math.max(1,Math.abs(R),Math.abs(ba))&&Math.abs(T-ka)<=l.EPSILON*Math.max(1,Math.abs(T),Math.abs(ka))&&Math.abs(W-oa)<=l.EPSILON*Math.max(1,Math.abs(W),Math.abs(oa))&&Math.abs(Z-M)<=l.EPSILON*Math.max(1,Math.abs(Z),Math.abs(M))&&Math.abs(la-V)<=l.EPSILON*Math.max(1,Math.abs(la),Math.abs(V))&&Math.abs(ea-ha)<=l.EPSILON*Math.max(1,Math.abs(ea),Math.abs(ha))&&Math.abs(O-Q)<=l.EPSILON*Math.max(1,Math.abs(O),Math.abs(Q))&&Math.abs(I-N)<=l.EPSILON*Math.max(1,
Math.abs(I),Math.abs(N))}var L=Object.freeze({__proto__:null,fromMat4:p,copy:z,set:y,identity:w,transpose:f,invert:k,adjoint:m,determinant:c,multiply:e,translate:q,rotate:d,scale:g,scaleByVec2:b,fromTranslation:a,fromRotation:h,fromScaling:r,fromMat2d:t,fromQuat:v,normalFromMat4Legacy:x,normalFromMat4:u,projection:D,str:B,frob:A,add:C,subtract:E,multiplyScalar:F,multiplyScalarAndAdd:G,exactEquals:J,equals:K,mul:e,sub:E});n.add=C;n.adjoint=m;n.copy=z;n.determinant=c;n.equals=K;n.exactEquals=J;n.frob=
A;n.fromMat2d=t;n.fromMat4=p;n.fromQuat=v;n.fromRotation=h;n.fromScaling=r;n.fromTranslation=a;n.identity=w;n.invert=k;n.mat3=L;n.mul=e;n.multiply=e;n.multiplyScalar=F;n.multiplyScalarAndAdd=G;n.normalFromMat4=u;n.normalFromMat4Legacy=x;n.projection=D;n.rotate=d;n.scale=g;n.scaleByVec2=b;n.set=y;n.str=B;n.sub=E;n.subtract=E;n.translate=q;n.transpose=f})},"esri/chunks/vec2":function(){define(["exports","./common"],function(n,l){function p(T,W){T[0]=W[0];T[1]=W[1];return T}function z(T,W,Z){T[0]=W;
T[1]=Z;return T}function y(T,W,Z){T[0]=W[0]+Z[0];T[1]=W[1]+Z[1];return T}function w(T,W,Z){T[0]=W[0]-Z[0];T[1]=W[1]-Z[1];return T}function f(T,W,Z){T[0]=W[0]*Z[0];T[1]=W[1]*Z[1];return T}function k(T,W,Z){T[0]=W[0]/Z[0];T[1]=W[1]/Z[1];return T}function m(T,W){T[0]=Math.ceil(W[0]);T[1]=Math.ceil(W[1]);return T}function c(T,W){T[0]=Math.floor(W[0]);T[1]=Math.floor(W[1]);return T}function e(T,W,Z){T[0]=Math.min(W[0],Z[0]);T[1]=Math.min(W[1],Z[1]);return T}function q(T,W,Z){T[0]=Math.max(W[0],Z[0]);T[1]=
Math.max(W[1],Z[1]);return T}function d(T,W){T[0]=Math.round(W[0]);T[1]=Math.round(W[1]);return T}function g(T,W,Z){T[0]=W[0]*Z;T[1]=W[1]*Z;return T}function b(T,W,Z,la){T[0]=W[0]+Z[0]*la;T[1]=W[1]+Z[1]*la;return T}function a(T,W){const Z=W[0]-T[0];T=W[1]-T[1];return Math.sqrt(Z*Z+T*T)}function h(T,W){const Z=W[0]-T[0];T=W[1]-T[1];return Z*Z+T*T}function r(T){const W=T[0];T=T[1];return Math.sqrt(W*W+T*T)}function t(T){const W=T[0];T=T[1];return W*W+T*T}function v(T,W){T[0]=-W[0];T[1]=-W[1];return T}
function x(T,W){T[0]=1/W[0];T[1]=1/W[1];return T}function u(T,W){var Z=W[0];const la=W[1];Z=Z*Z+la*la;0<Z&&(Z=1/Math.sqrt(Z),T[0]=W[0]*Z,T[1]=W[1]*Z);return T}function D(T,W){return T[0]*W[0]+T[1]*W[1]}function B(T,W,Z){W=W[0]*Z[1]-W[1]*Z[0];T[0]=T[1]=0;T[2]=W;return T}function A(T,W,Z,la){const ea=W[0];W=W[1];T[0]=ea+la*(Z[0]-ea);T[1]=W+la*(Z[1]-W);return T}function C(T,W){W=W||1;const Z=2*l.RANDOM()*Math.PI;T[0]=Math.cos(Z)*W;T[1]=Math.sin(Z)*W;return T}function E(T,W,Z){const la=W[0];W=W[1];T[0]=
Z[0]*la+Z[2]*W;T[1]=Z[1]*la+Z[3]*W;return T}function F(T,W,Z){const la=W[0];W=W[1];T[0]=Z[0]*la+Z[2]*W+Z[4];T[1]=Z[1]*la+Z[3]*W+Z[5];return T}function G(T,W,Z){const la=W[0];W=W[1];T[0]=Z[0]*la+Z[3]*W+Z[6];T[1]=Z[1]*la+Z[4]*W+Z[7];return T}function J(T,W,Z){const la=W[0];W=W[1];T[0]=Z[0]*la+Z[4]*W+Z[12];T[1]=Z[1]*la+Z[5]*W+Z[13];return T}function K(T,W,Z,la){const ea=W[0]-Z[0];W=W[1]-Z[1];const O=Math.sin(la);la=Math.cos(la);T[0]=ea*la-W*O+Z[0];T[1]=ea*O+W*la+Z[1];return T}function L(T,W){var Z=T[0];
T=T[1];const la=W[0];W=W[1];let ea=Z*Z+T*T;0<ea&&(ea=1/Math.sqrt(ea));let O=la*la+W*W;0<O&&(O=1/Math.sqrt(O));Z=(Z*la+T*W)*ea*O;return 1<Z?0:-1>Z?Math.PI:Math.acos(Z)}function I(T){return"vec2("+T[0]+", "+T[1]+")"}function N(T,W){return T[0]===W[0]&&T[1]===W[1]}function P(T,W){const Z=T[0];T=T[1];const la=W[0];W=W[1];return Math.abs(Z-la)<=l.EPSILON*Math.max(1,Math.abs(Z),Math.abs(la))&&Math.abs(T-W)<=l.EPSILON*Math.max(1,Math.abs(T),Math.abs(W))}var R=Object.freeze({__proto__:null,copy:p,set:z,add:y,
subtract:w,multiply:f,divide:k,ceil:m,floor:c,min:e,max:q,round:d,scale:g,scaleAndAdd:b,distance:a,squaredDistance:h,length:r,squaredLength:t,negate:v,inverse:x,normalize:u,dot:D,cross:B,lerp:A,random:C,transformMat2:E,transformMat2d:F,transformMat3:G,transformMat4:J,rotate:K,angle:L,str:I,exactEquals:N,equals:P,len:r,sub:w,mul:f,div:k,dist:a,sqrDist:h,sqrLen:t});n.add=y;n.angle=L;n.ceil=m;n.copy=p;n.cross=B;n.dist=a;n.distance=a;n.div=k;n.divide=k;n.dot=D;n.equals=P;n.exactEquals=N;n.floor=c;n.inverse=
x;n.len=r;n.length=r;n.lerp=A;n.max=q;n.min=e;n.mul=f;n.multiply=f;n.negate=v;n.normalize=u;n.random=C;n.rotate=K;n.round=d;n.scale=g;n.scaleAndAdd=b;n.set=z;n.sqrDist=h;n.sqrLen=t;n.squaredDistance=h;n.squaredLength=t;n.str=I;n.sub=w;n.subtract=w;n.transformMat2=E;n.transformMat2d=F;n.transformMat3=G;n.transformMat4=J;n.vec2=R})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(n,l){function p(B,A){B[0]=A[0];B[1]=A[1];B[2]=A[2];B[3]=A[3];B[4]=A[4];B[5]=A[5];return B}function z(B){B[0]=
1;B[1]=0;B[2]=0;B[3]=1;B[4]=0;B[5]=0;return B}function y(B,A,C,E,F,G,J){B[0]=A;B[1]=C;B[2]=E;B[3]=F;B[4]=G;B[5]=J;return B}function w(B,A){const C=A[0],E=A[1],F=A[2],G=A[3],J=A[4];A=A[5];let K=C*G-E*F;if(!K)return null;K=1/K;B[0]=G*K;B[1]=-E*K;B[2]=-F*K;B[3]=C*K;B[4]=(F*A-G*J)*K;B[5]=(E*J-C*A)*K;return B}function f(B){return B[0]*B[3]-B[1]*B[2]}function k(B,A,C){const E=A[0],F=A[1],G=A[2],J=A[3],K=A[4];A=A[5];const L=C[0],I=C[1],N=C[2],P=C[3],R=C[4];C=C[5];B[0]=E*L+G*I;B[1]=F*L+J*I;B[2]=E*N+G*P;B[3]=
F*N+J*P;B[4]=E*R+G*C+K;B[5]=F*R+J*C+A;return B}function m(B,A,C){const E=A[0],F=A[1],G=A[2],J=A[3],K=A[4];A=A[5];const L=Math.sin(C);C=Math.cos(C);B[0]=E*C+G*L;B[1]=F*C+J*L;B[2]=E*-L+G*C;B[3]=F*-L+J*C;B[4]=K;B[5]=A;return B}function c(B,A,C){const E=A[1],F=A[2],G=A[3],J=A[4],K=A[5],L=C[0];C=C[1];B[0]=A[0]*L;B[1]=E*L;B[2]=F*C;B[3]=G*C;B[4]=J;B[5]=K;return B}function e(B,A,C){const E=A[0],F=A[1],G=A[2],J=A[3],K=A[4];A=A[5];const L=C[0];C=C[1];B[0]=E;B[1]=F;B[2]=G;B[3]=J;B[4]=E*L+G*C+K;B[5]=F*L+J*C+
A;return B}function q(B,A){const C=Math.sin(A);A=Math.cos(A);B[0]=A;B[1]=C;B[2]=-C;B[3]=A;B[4]=0;B[5]=0;return B}function d(B,A){B[0]=A[0];B[1]=0;B[2]=0;B[3]=A[1];B[4]=0;B[5]=0;return B}function g(B,A){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=A[0];B[5]=A[1];return B}function b(B){return"mat2d("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+")"}function a(B){return Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2)+Math.pow(B[2],2)+Math.pow(B[3],2)+Math.pow(B[4],2)+Math.pow(B[5],2)+1)}function h(B,A,C){B[0]=
A[0]+C[0];B[1]=A[1]+C[1];B[2]=A[2]+C[2];B[3]=A[3]+C[3];B[4]=A[4]+C[4];B[5]=A[5]+C[5];return B}function r(B,A,C){B[0]=A[0]-C[0];B[1]=A[1]-C[1];B[2]=A[2]-C[2];B[3]=A[3]-C[3];B[4]=A[4]-C[4];B[5]=A[5]-C[5];return B}function t(B,A,C){B[0]=A[0]*C;B[1]=A[1]*C;B[2]=A[2]*C;B[3]=A[3]*C;B[4]=A[4]*C;B[5]=A[5]*C;return B}function v(B,A,C,E){B[0]=A[0]+C[0]*E;B[1]=A[1]+C[1]*E;B[2]=A[2]+C[2]*E;B[3]=A[3]+C[3]*E;B[4]=A[4]+C[4]*E;B[5]=A[5]+C[5]*E;return B}function x(B,A){return B[0]===A[0]&&B[1]===A[1]&&B[2]===A[2]&&
B[3]===A[3]&&B[4]===A[4]&&B[5]===A[5]}function u(B,A){const C=B[0],E=B[1],F=B[2],G=B[3],J=B[4];B=B[5];const K=A[0],L=A[1],I=A[2],N=A[3],P=A[4];A=A[5];return Math.abs(C-K)<=l.EPSILON*Math.max(1,Math.abs(C),Math.abs(K))&&Math.abs(E-L)<=l.EPSILON*Math.max(1,Math.abs(E),Math.abs(L))&&Math.abs(F-I)<=l.EPSILON*Math.max(1,Math.abs(F),Math.abs(I))&&Math.abs(G-N)<=l.EPSILON*Math.max(1,Math.abs(G),Math.abs(N))&&Math.abs(J-P)<=l.EPSILON*Math.max(1,Math.abs(J),Math.abs(P))&&Math.abs(B-A)<=l.EPSILON*Math.max(1,
Math.abs(B),Math.abs(A))}var D=Object.freeze({__proto__:null,copy:p,identity:z,set:y,invert:w,determinant:f,multiply:k,rotate:m,scale:c,translate:e,fromRotation:q,fromScaling:d,fromTranslation:g,str:b,frob:a,add:h,subtract:r,multiplyScalar:t,multiplyScalarAndAdd:v,exactEquals:x,equals:u,mul:k,sub:r});n.add=h;n.copy=p;n.determinant=f;n.equals=u;n.exactEquals=x;n.frob=a;n.fromRotation=q;n.fromScaling=d;n.fromTranslation=g;n.identity=z;n.invert=w;n.mat2d=D;n.mul=k;n.multiply=k;n.multiplyScalar=t;n.multiplyScalarAndAdd=
v;n.rotate=m;n.scale=c;n.set=y;n.str=b;n.sub=r;n.subtract=r;n.translate=e})},"esri/chunks/mat2df64":function(){define(["exports"],function(n){function l(){return[1,0,0,1,0,0]}function p(f){return[f[0],f[1],f[2],f[3],f[4],f[5]]}function z(f,k,m,c,e,q){return[f,k,m,c,e,q]}function y(f,k){return new Float64Array(f,k,6)}var w=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,createView:y});n.clone=p;n.create=l;n.createView=y;n.fromValues=z;n.mat2df64=w})},"esri/views/2d/viewpointUtils":function(){define("exports ../../core/maybe ../../core/promiseUtils ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/support/Ellipsoid ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry/Extent ../../core/Collection ../../chunks/common ../../core/unitUtils ../../Viewpoint ../../chunks/vec2f64 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){function t(Q,X,aa,ca){return ca&&aa&&!ca.equals(aa)&&k.canProject(ca,aa)&&ca.isWebMercator?(ca.isWebMercator?(aa=X[1],89.99999<aa?aa=89.99999:-89.99999>aa&&(aa=-89.99999),aa=Math.sin(q.toRadian(aa)),Q=a.set(Q,q.toRadian(X[0])*f.earth.radius,.5*f.earth.radius*Math.log((1+aa)/(1-aa)))):(aa=q.toDegree(X[0]/f.earth.radius),Q=a.set(Q,aa-360*Math.floor((aa+180)/360),q.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*X[1]/f.earth.radius))))),Q):a.copy(Q,X)}function v(Q){return Q.wkid?
Q:Q.spatialReference||y.WGS84}function x(Q,X){return X.type?a.set(Q,X.x,X.y):a.copy(Q,X)}function u(Q,X){return Math.max(Q.width/X[0],Q.height/X[1])*J(Q.spatialReference)}async function D(Q,X,aa,ca){if(!Q||Array.isArray(Q)&&!Q.length)return null;e.isCollection(Q)&&(Q=Q.toArray());if(Array.isArray(Q)&&Q.length&&"object"===typeof Q[0]){var ia=Q.every(wa=>"attributes"in wa);var ja=Q.some(wa=>!wa.geometry),qa=Q;if(ia&&ja&&X&&X.allLayerViews){ia=new Map;for(var sa of Q)Q=sa.layer,ja=ia.get(Q)||[],qa=sa.attributes[Q.objectIdField],
null!=qa&&ja.push(qa),ia.set(Q,ja);const wa=[];ia.forEach((Aa,Ca)=>{const Da=X.allLayerViews.find(Fa=>Fa.layer.id===Ca.id);if("queryFeatures"in Da){const Fa=Ca.createQuery();Fa.objectIds=Aa;Fa.returnGeometry=!0;wa.push(Da.queryFeatures(Fa))}});sa=await p.all(wa);Q=[];for(var ta of sa)if(ta&&ta.features&&ta.features.length)for(var va of ta.features)l.isSome(va.geometry)&&Q.push(va.geometry);qa=Q}for(const wa of qa)ca=await D(wa,X,aa,ca);return ca}if(Array.isArray(Q)&&2===Q.length&&"number"===typeof Q[0]&&
"number"===typeof Q[1])ia=new m(Q);else if(Q instanceof w)ia=Q;else if("geometry"in Q)if(Q.geometry)ia=Q.geometry;else if(Q.layer){const wa=Q.layer;ta=X.allLayerViews.find(Aa=>Aa.layer.id===wa.id);"queryFeatures"in ta&&(va=wa.createQuery(),va.objectIds=[Q.attributes[wa.objectIdField]],va.returnGeometry=!0,ta=await ta.queryFeatures(va),ia=l.get(ta,"features",0,"geometry"))}if(l.isNone(ia))return null;ta="point"===ia.type?new c({xmin:ia.x,ymin:ia.y,xmax:ia.x,ymax:ia.y,spatialReference:ia.spatialReference}):
ia.extent;if(!ta)return null;va=k.canProject(ta,aa);if(!ta.spatialReference.equals(aa)&&va)ta=k.project(ta,aa);else if(!va)return null;return ca=ca?ca.union(ta):ta.clone()}function B(Q){if(Q&&(!Array.isArray(Q)||"number"!==typeof Q[0])&&("object"===typeof Q||Array.isArray(Q)&&"object"===typeof Q[0])){if("layer"in Q&&Q.layer&&Q.layer.minScale&&Q.layer.maxScale){var X=Q.layer;return{min:X.minScale,max:X.maxScale}}if(Array.isArray(Q)&&Q.length&&Q.every(aa=>"layer"in aa)){let aa=X=0;for(const ca of Q)(Q=
ca.layer)&&Q.minScale&&Q.maxScale&&(X=Q.minScale<X?Q.minScale:X,aa=Q.maxScale>aa?Q.maxScale:aa);return X&&aa?{min:X,max:aa}:null}}}async function A(Q,X){if(!Q||!X)return new g({targetGeometry:new m,scale:0,rotation:0});let aa=X.spatialReference;const {constraints:ca,padding:ia,viewpoint:ja,size:qa}=X,sa=[ia?qa[0]-ia.left-ia.right:qa[0],ia?qa[1]-ia.top-ia.bottom:qa[1]];let ta=null;Q instanceof g?ta=Q:Q.viewpoint?ta=Q.viewpoint:Q.target&&"esri.Viewpoint"===Q.target.declaredClass&&(ta=Q.target);let va=
null;if(ta&&ta.targetGeometry)va=ta.targetGeometry;else if(Q instanceof c)va=Q;else if(Q||Q&&("center"in Q||"extent"in Q||"target"in Q))va=await D(Q.center,X,aa)||await D(Q.extent,X,aa)||await D(Q.target,X,aa)||await D(Q,X,aa);!va&&ja&&ja.targetGeometry?va=ja.targetGeometry:!va&&X.extent&&(va=X.extent);var wa=v(va);aa||(aa=v(X.spatialReference||X.extent||va));if(!k.canProject(va,aa)&&wa&&!wa.equals(aa))return null;var Aa=x(b.create(),va.center?va.center:va);wa=new m(t(Aa,Aa,wa,aa),aa);Aa=null;Aa=
ta&&l.isSome(ta.targetGeometry)&&"point"===ta.targetGeometry.type?ta.scale:Q.hasOwnProperty("scale")&&Q.scale?Q.scale:Q.hasOwnProperty("zoom")&&-1!==Q.zoom&&ca&&ca.effectiveLODs?ca.zoomToScale(Q.zoom):Array.isArray(va)||"point"===va.type||"extent"===va.type&&0===va.width&&0===va.height?X.extent&&k.canProject(X.extent,aa)?u(k.project(X.extent,aa),sa):X.extent?u(X.extent,sa):ja.scale:k.canProject(va.extent,aa)?u(k.project(va.extent,aa),sa):u(va.extent,sa);if(X=B(Q))X.min&&X.min>Aa?Aa=X.min:X.max&&X.max<
Aa&&(Aa=X.max);X=0;ta?X=ta.rotation:Q.hasOwnProperty("rotation")?X=Q.rotation:ja&&(X=ja.rotation);Q=new g({targetGeometry:wa,scale:Aa,rotation:X});ca&&(Q=ca.fit(Q),ca.constrainByGeometry(Q),ca.rotationEnabled||(Q.rotation=X));return Q}function C(Q,X){const aa=Q.targetGeometry,ca=X.targetGeometry;aa.x=ca.x;aa.y=ca.y;aa.spatialReference=ca.spatialReference;Q.scale=X.scale;Q.rotation=X.rotation;return Q}function E(Q,X,aa){return aa?a.set(Q,.5*(X[0]-aa.right+aa.left),.5*(X[1]-aa.bottom+aa.top)):a.scale(Q,
X,.5)}function F(Q,X,aa,ca){T(Q,X,aa,ca);return h.invert(Q,Q)}function G(Q){var X=Q.scale;Q=Q.targetGeometry;Q=l.isSome(Q)&&z.isValid(Q.spatialReference)?1/(39.37*d.getMetersPerUnitForSR(Q.spatialReference)*96):1;return X*Q}function J(Q){return z.isValid(Q)?39.37*d.getMetersPerUnitForSR(Q)*96:1}function K(Q){return Q.isWrappable?(Q=z.getInfo(Q),Q.valid[1]-Q.valid[0]):0}const L=180/Math.PI,I=function(){const Q=b.create();return function(X,aa,ca){const ia=aa.targetGeometry;x(Q,ia);aa=.5*G(aa);X.xmin=
Q[0]-aa*ca[0];X.ymin=Q[1]-aa*ca[1];X.xmax=Q[0]+aa*ca[0];X.ymax=Q[1]+aa*ca[1];X.spatialReference=ia.spatialReference;return X}}(),N=function(){const Q=b.create();return function(X,aa,ca){return a.sub(X,a.scale(X,aa,.5),E(Q,aa,ca))}}(),P=function(){const Q=r.create(),X=b.create();return function(aa,ca,ia,ja){const qa=G(ca);ca=q.toRadian(ca.rotation)||0;a.set(X,qa,qa);h.fromScaling(Q,X);h.rotate(Q,Q,ca);h.translate(Q,Q,N(X,ia,ja));h.translate(Q,Q,[0,ja.top-ja.bottom]);return a.set(aa,Q[4],Q[5])}}(),
R=function(){const Q=b.create(),X=b.create(),aa=b.create();return function(ca,ia,ja,qa,sa,ta){a.negate(Q,ia);a.scale(X,ja,.5*ta);a.set(aa,1/qa*ta,-1/qa*ta);h.identity(ca);h.translate(ca,ca,X);sa&&h.rotate(ca,ca,sa);h.scale(ca,ca,aa);h.translate(ca,ca,Q);return ca}}(),T=function(){const Q=b.create();return function(X,aa,ca,ia){const ja=G(aa),qa=q.toRadian(aa.rotation)||0;x(Q,aa.targetGeometry);return R(X,Q,ca,ja,qa,ia)}}(),W=function(){const Q=b.create();return function(X,aa,ca,ia){const ja=G(aa);
x(Q,aa.targetGeometry);return R(X,Q,ca,ja,0,ia)}}(),Z=function(){const Q=b.create(),X=b.create(),aa=[0,0,0];return function(ca,ia,ja){a.subtract(Q,ca,ia);a.normalize(Q,Q);a.subtract(X,ca,ja);a.normalize(X,X);a.cross(aa,Q,X);ca=Math.acos(a.dot(Q,X)/(a.length(Q)*a.length(X)))*L;0>aa[2]&&(ca=-ca);isNaN(ca)&&(ca=0);return ca}}(),la=function(){const Q=b.create();return function(X,aa,ca,ia){const ja=X.targetGeometry;C(X,aa);P(Q,aa,ca,ia);ja.x+=Q[0];ja.y+=Q[1];return X}}(),ea=function(){const Q=b.create();
return function(X,aa,ca,ia){const ja=X.targetGeometry;C(X,aa);P(Q,aa,ca,ia);ja.x-=Q[0];ja.y-=Q[1];return X}}(),O=function(){const Q=b.create();return function(X,aa,ca){C(X,aa);aa=X.targetGeometry;const ia=v(ca),ja=v(aa);x(Q,ca);t(Q,Q,ia,ja);aa.x=Q[0];aa.y=Q[1];return X}}(),U=function(){const Q=b.create();return function(X,aa,ca,ia,ja){ja||(ja="center");a.sub(Q,ca,ia);a.scale(Q,Q,.5);ca=Q[0];ia=Q[1];switch(ja){case "center":a.set(Q,0,0);break;case "left":a.set(Q,-ca,0);break;case "top":a.set(Q,0,ia);
break;case "right":a.set(Q,ca,0);break;case "bottom":a.set(Q,0,-ia);break;case "top-left":a.set(Q,-ca,ia);break;case "bottom-left":a.set(Q,-ca,-ia);break;case "top-right":a.set(Q,ca,ia);break;case "bottom-right":a.set(Q,ca,-ia)}ha(X,aa,Q);return X}}(),ba=function(){const Q=b.create();return function(X,aa,ca,ia,ja){C(X,aa);isNaN(ca)||0===ca||(M(Q,ia,aa,ja),X.scale=aa.scale*ca,V(Q,Q,X,ja),ha(X,X,a.set(Q,Q[0]-ia[0],ia[1]-Q[1])));return X}}(),ka=function(){const Q=b.create();return function(X,aa,ca,ia,
ja,qa){C(X,aa);isNaN(ca)||0===ca||(M(Q,ja,aa,qa),X.scale=aa.scale*ca,X.rotation+=ia,V(Q,Q,X,qa),ha(X,X,a.set(Q,Q[0]-ja[0],ja[1]-Q[1])));return X}}(),oa=function(){const Q=b.create(),X=b.create();return function(aa,ca,ia,ja,qa,sa,ta){N(X,sa,ta);a.add(Q,qa,X);return ja?ka(aa,ca,ia,ja,Q,sa):ba(aa,ca,ia,Q,sa)}}(),M=function(){const Q=r.create();return function(X,aa,ca,ia){return a.transformMat2d(X,aa,F(Q,ca,ia,1))}}(),V=function(){const Q=r.create();return function(X,aa,ca,ia){return a.transformMat2d(X,
aa,T(Q,ca,ia,1))}}(),ha=function(){const Q=b.create(),X=r.create();return function(aa,ca,ia){C(aa,ca);const ja=G(ca),qa=aa.targetGeometry;h.fromRotation(X,q.toRadian(ca.rotation)||0);h.scale(X,X,b.fromValues(ja,ja));a.transformMat2d(Q,ia,X);qa.x+=Q[0];qa.y+=Q[1];return aa}}();n.addPadding=la;n.angleBetween=Z;n.centerAt=O;n.copy=C;n.create=A;n.createAsync=function(Q,X){return A(Q,X)};n.extentToScale=u;n.getAnchor=E;n.getExtent=I;n.getMatrix=R;n.getOuterSize=function(Q,X,aa){var ca=q.toRadian(X.rotation)||
0;X=Math.abs(Math.cos(ca));ca=Math.abs(Math.sin(ca));return a.set(Q,Math.round(aa[1]*ca+aa[0]*X),Math.round(aa[1]*X+aa[0]*ca))};n.getPaddingMapTranslation=P;n.getPaddingScreenTranslation=N;n.getResolution=G;n.getResolutionToScaleFactor=J;n.getTransform=T;n.getTransformNoRotation=W;n.getWorldScreenWidth=function(Q,X){return Math.round(K(Q)/X)};n.getWorldWidth=K;n.padAndScaleAndRotateBy=oa;n.pixelSize=function(Q){return G(Q)};n.removePadding=ea;n.resize=U;n.rotateBy=function(Q,X,aa){C(Q,X);Q.rotation+=
aa;return Q};n.rotateTo=function(Q,X,aa){C(Q,X);Q.rotation=aa;return Q};n.scaleAndRotateBy=ka;n.scaleBy=ba;n.scaleTo=function(Q,X,aa){C(Q,X);Q.scale=aa;return Q};n.setExtent=function(Q,X,aa,ca,ia){O(Q,X,aa.center);Q.scale=u(aa,ca);ia&&ia.constraints&&ia.constraints.constrain(Q);return Q};n.toMap=M;n.toScreen=V;n.translateBy=ha;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat2df32":function(){define(["exports"],function(n){function l(){const m=new Float32Array(6);m[0]=1;m[3]=1;
return m}function p(m){const c=new Float32Array(6);c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];return c}function z(m,c,e,q,d,g){const b=new Float32Array(6);b[0]=m;b[1]=c;b[2]=e;b[3]=q;b[4]=d;b[5]=g;return b}function y(m,c){return new Float32Array(m,c,6)}function w(m,c,e,q){const d=c[q];c=c[q+1];m[q]=e[0]*d+e[2]*c+e[4];m[q+1]=e[1]*d+e[3]*c+e[5]}function f(m,c,e,q=0,d=0,g=2){for(d=d||c.length/g;q<d;q++)w(m,c,e,q*g)}var k=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,createView:y,
transform:w,transformMany:f});n.clone=p;n.create=l;n.createView=y;n.fromValues=z;n.mat2df32=k;n.transform=w;n.transformMany=f})},"esri/chunks/mat3f32":function(){define(["exports"],function(n){function l(){const f=new Float32Array(9);f[0]=1;f[4]=1;f[8]=1;return f}function p(f){const k=new Float32Array(9);k[0]=f[0];k[1]=f[1];k[2]=f[2];k[3]=f[3];k[4]=f[4];k[5]=f[5];k[6]=f[6];k[7]=f[7];k[8]=f[8];return k}function z(f,k,m,c,e,q,d,g,b){const a=new Float32Array(9);a[0]=f;a[1]=k;a[2]=m;a[3]=c;a[4]=e;a[5]=
q;a[6]=d;a[7]=g;a[8]=b;return a}function y(f,k){return new Float32Array(f,k,9)}var w=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,createView:y});n.clone=p;n.create=l;n.createView=y;n.fromValues=z;n.mat3f32=w})},"esri/chunks/vec2f32":function(){define(["exports"],function(n){function l(){return new Float32Array(2)}function p(b){const a=new Float32Array(2);a[0]=b[0];a[1]=b[1];return a}function z(b,a){const h=new Float32Array(2);h[0]=b;h[1]=a;return h}function y(b,a){return new Float32Array(b,
a,2)}function w(){return l()}function f(){return z(1,1)}function k(){return z(1,0)}function m(){return z(0,1)}const c=l(),e=f(),q=k(),d=m();var g=Object.freeze({__proto__:null,create:l,clone:p,fromValues:z,createView:y,zeros:w,ones:f,unitX:k,unitY:m,ZEROS:c,ONES:e,UNIT_X:q,UNIT_Y:d});n.ONES=e;n.UNIT_X=q;n.UNIT_Y=d;n.ZEROS=c;n.clone=p;n.create=l;n.createView=y;n.fromValues=z;n.ones=f;n.unitX=k;n.unitY=m;n.vec2f32=g;n.zeros=w})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],
function(n){function l(z){return z instanceof Float32Array&&2<=z.length}function p(z){return Array.isArray(z)&&2<=z.length}n.isVec2=function(z){return l(z)||p(z)};n.isVec2f32=l;n.isVec2f64=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./TileKey ./LODInfo ./TileCoverage ./TileSpan".split(" "),function(n,l,p,z,y,w){const f=new p("0/0/0/0");let k=function(){function c(q,
d,g,b,a,h,r,t){this.x=q;this.ymin=d;this.ymax=g;this.invM=b;this.leftAdjust=a;this.rightAdjust=h;this.leftBound=r;this.rightBound=t}c.create=function(q,d){q[1]>d[1]&&([q,d]=[d,q]);const [g,b]=q,[a,h]=d;q=a-g;d=h-b;d=0!==d?q/d:0;const r=(Math.ceil(b)-b)*d,t=(Math.floor(b)-b)*d;return new c(g,Math.floor(b),Math.ceil(h),d,0>q?r:t,0>q?t:r,0>q?a:g,0>q?g:a)};var e=c.prototype;e.incrRow=function(){this.x+=this.invM};e.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};e.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return c}();const m=[[0,0],[0,0],[0,0],[0,0]];return function(){function c(q,d){this.tileInfo=q;this.fullExtent=d;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const g=q.lods.slice();g.sort(function(a,h){return h.scale-a.scale});const b=this._lodInfos=g.map(a=>z.create(q,a,d));g.forEach((a,h)=>{this._infoByLevel[a.level]=b[h];this._infoByScale[a.scale]=b[h];this.scales[h]=a.scale},this);this._wrap=
q.isWrappable}var e=c.prototype;e.getLODInfoAt=function(q){return this._infoByLevel["number"===typeof q?q:q.level]};e.getTileBounds=function(q,d,g=!1){f.set(d);return(d=this._infoByLevel[f.level])?d.getTileBounds(q,f,g):q};e.getTileCoords=function(q,d,g=!1){f.set(d);return(d=this._infoByLevel[f.level])?d.getTileCoords(q,f,g):q};e.getTileCoverage=function(q,d=192,g="closest"){g="closest"===g?this.getClosestInfoForScale(q.scale):this.getSmallestInfoForScale(q.scale);const b=y.pool.acquire(g),a=this._wrap;
var h=Infinity;let r=-Infinity;const t=b.spans;m[0][0]=m[0][1]=m[1][1]=m[3][0]=-d;m[1][0]=m[2][0]=q.size[0]+d;m[2][1]=m[3][1]=q.size[1]+d;for(v of m)q.toMap(v,v),v[0]=g.getColumnForX(v[0]),v[1]=g.getRowForY(v[1]);q=[];var v=3;for(d=0;4>d;d++)m[d][1]===m[v][1]?v=d:(v=k.create(m[d],m[v]),h=Math.min(v.ymin,h),r=Math.max(v.ymax,r),void 0===q[v.ymin]&&(q[v.ymin]=[]),q[v.ymin].push(v),v=d);if(null==h||null==r||100<r-h)return null;for(d=[];h<r;){null!=q[h]&&(d=d.concat(q[h]));v=Infinity;var x=-Infinity;
for(var u=d.length-1;0<=u;u--){var D=d[u];v=Math.min(v,D.getLeftCol());x=Math.max(x,D.getRightCol())}v=Math.floor(v);x=Math.floor(x);if(h>=g.first[1]&&h<=g.last[1])if(a)if(g.size[0]<g.worldSize[0])for(u=Math.floor(x/g.worldSize[0]),D=Math.floor(v/g.worldSize[0]);D<=u;D++)t.push(new w(h,Math.max(g.getFirstColumnForWorld(D),v),Math.min(g.getLastColumnForWorld(D),x)));else t.push(new w(h,v,x));else v>g.last[0]||x<g.first[0]||(v=Math.max(v,g.first[0]),x=Math.min(x,g.last[0]),t.push(new w(h,v,x)));h+=
1;for(v=d.length-1;0<=v;v--)x=d[v],x.ymax>=h?x.incrRow():d.splice(v,1)}return b};e.getTileParentId=function(q){f.set(q);q=this._lodInfos.indexOf(this._infoByLevel[f.level])-1;if(0>q)return null;this._getTileIdAtLOD(f,this._lodInfos[q],f);return f.id};e.getTileResolution=function(q){return(q=this._infoByLevel["object"===typeof q?q.level:q])?q.resolution:-1};e.getTileScale=function(q){return(q=this._infoByLevel[q.level])?q.scale:-1};e.intersects=function(q,d){f.set(d);d=this._infoByLevel[f.level];const g=
q.lodInfo;if(g.resolution>d.resolution){this._getTileIdAtLOD(f,g,f);var b=g.denormalizeCol(f.col,f.world);for(var a of q.spans)if(a.row===f.row&&a.colFrom<=b&&a.colTo>=b)return!0}if(g.resolution<d.resolution){const [r,t,v,x]=q.spans.reduce((u,D)=>{u[0]=Math.min(u[0],D.row);u[1]=Math.max(u[1],D.row);u[2]=Math.min(u[2],D.colFrom);u[3]=Math.max(u[3],D.colTo);return u},[Infinity,-Infinity,Infinity,-Infinity]);b=d.denormalizeCol(f.col,f.world);q=g.getColumnForX(d.getXForColumn(b));a=g.getRowForY(d.getYForRow(f.row));
b=g.getColumnForX(d.getXForColumn(b+1))-1;d=g.getRowForY(d.getYForRow(f.row+1))-1;return!(q>x||b<v||a>t||d<r)}const h=g.denormalizeCol(f.col,f.world);return q.spans.some(r=>r.row===f.row&&r.colFrom<=h&&r.colTo>=h)};e.normalizeBounds=function(q,d,g){q[0]=d[0];q[1]=d[1];q[2]=d[2];q[3]=d[3];this._wrap&&(d=l.getInfo(this.tileInfo.spatialReference),g=-g*(d.valid[1]-d.valid[0]),q[0]+=g,q[2]+=g);return q};e.getSmallestInfoForScale=function(q){const d=this.scales;if(this._infoByScale[q])return this._infoByScale[q];
if(q>d[0])return this._infoByScale[d[0]];for(let g=1;g<d.length-1;g++)if(q>d[g]+1E-6)return this._infoByScale[d[g-1]];return this._infoByScale[d[d.length-1]]};e.getClosestInfoForScale=function(q){const d=this.scales;if(this._infoByScale[q])return this._infoByScale[q];q=d.reduce((g,b)=>Math.abs(b-q)<Math.abs(g-q)?b:g,d[0]);return this._infoByScale[q]};e.scaleToLevel=function(q){const d=this.scales;if(this._infoByScale[q])return this._infoByScale[q].level;for(let g=d.length-1;0<=g;g--)if(q<d[g])return g===
d.length-1?this._infoByScale[d[d.length-1]].level:this._infoByScale[d[g]].level+(d[g]-q)/(d[g]-d[g+1]);return this._infoByScale[d[0]].level};e.scaleToZoom=function(q){return this.tileInfo.scaleToZoom(q)};e._getTileIdAtLOD=function(q,d,g){const b=this._infoByLevel[g.level];q.set(g);if(d.resolution<b.resolution)return null;if(d.resolution===b.resolution)return q;q.level=d.level;q.col=Math.floor(g.col*b.resolution/d.resolution+.01);q.row=Math.floor(g.row*b.resolution/d.resolution+.01);return q};n._createClass(c,
[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return c}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(n,l){let p=function(){function z(w,f,k,m){this.set(w,f,k,m)}z.getId=function(w,f,k,m){return"object"===typeof w?`${w.level}/${w.row}/${w.col}/${w.world}`:`${w}/${f}/${k}/${m}`};var y=z.prototype;y.acquire=function(w,f,k,m){this.set(w,f,k,m)};y.contains=function(w){const f=
w.level-this.level;return this.row===w.row>>f&&this.col===w.col>>f&&this.world===w.world};y.equals=function(w){return this.level===w.level&&this.row===w.row&&this.col===w.col&&this.world===w.world};y.clone=function(){return new z(this)};y.release=function(){this.world=this.col=this.row=this.level=0};y.set=function(w,f,k,m){if(null==w)this.world=this.col=this.row=this.level=0;else if("object"===typeof w)this.level=w.level||0,this.row=w.row||0,this.col=w.col||0,this.world=w.world||0;else if("string"===
typeof w){const [c,e,q,d]=w.split("/");this.level=parseFloat(c);this.row=parseFloat(e);this.col=parseFloat(q);this.world=parseFloat(d)}else this.level=+w,this.row=+f,this.col=+k,this.world=+m||0;return this};y.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};y.getParentKey=function(){return 0>=this.level?null:new z(this.level-1,this.row>>1,this.col>>1,this.world)};y.getChildKeys=function(){const w=this.level+1,f=this.row<<1,k=this.col<<1,m=this.world;return[new z(w,
f,k,m),new z(w,f,k+1,m),new z(w,f+1,k,m),new z(w,f+1,k+1,m)]};y.compareRowMajor=function(w){return this.row<w.row?-1:this.row>w.row?1:this.col<w.col?-1:this.col>w.col?1:0};n._createClass(z,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(w){this.set(w)}}]);return z}();p.pool=new l(p,null,null,25,50);return p})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(n,l){function p(y,
w,f){y[0]=w;y[1]=f;return y}const z=new l("0/0/0/0");return function(){function y(f,k,m,c,e,q,d,g,b,a,h,r){this.level=f;this.resolution=k;this.scale=m;this.origin=c;this.first=e;this.last=q;this.size=d;this.norm=g;this.worldStart=b;this.worldEnd=a;this.worldSize=h;this.wrap=r}y.create=function(f,k,m){var c=n.getInfo(f.spatialReference);const e=[f.origin.x,f.origin.y],q=[f.size[0]*k.resolution,f.size[1]*k.resolution],d=[-Infinity,-Infinity],g=[Infinity,Infinity],b=[Infinity,Infinity];m&&(p(d,Math.max(0,
Math.floor((m.xmin-e[0])/q[0])),Math.max(0,Math.floor((e[1]-m.ymax)/q[1]))),p(g,Math.max(0,Math.floor((m.xmax-e[0])/q[0])),Math.max(0,Math.floor((e[1]-m.ymin)/q[1]))),p(b,g[0]-d[0]+1,g[1]-d[1]+1));let a;f.isWrappable?(f=[Math.ceil(Math.round((c.valid[1]-c.valid[0])/k.resolution)/f.size[0]),b[1]],c=[Math.floor((c.origin[0]-e[0])/q[0]),d[1]],m=[f[0]+c[0]-1,g[1]],a=!0):(c=d,m=g,f=b,a=!1);return new y(k.level,k.resolution,k.scale,e,d,g,b,q,c,m,f,a)};var w=y.prototype;w.normalizeCol=function(f){if(!this.wrap)return f;
const k=this.worldSize[0];return 0>f?k-1-Math.abs((f+1)%k):f%k};w.denormalizeCol=function(f,k){return this.wrap?this.worldSize[0]*k+f:f};w.getWorldForColumn=function(f){return this.wrap?Math.floor(f/this.worldSize[0]):0};w.getFirstColumnForWorld=function(f){return f*this.worldSize[0]+this.first[0]};w.getLastColumnForWorld=function(f){return f*this.worldSize[0]+this.first[0]+this.size[0]-1};w.getColumnForX=function(f){return(f-this.origin[0])/this.norm[0]};w.getXForColumn=function(f){return this.origin[0]+
f*this.norm[0]};w.getRowForY=function(f){return(this.origin[1]-f)/this.norm[1]};w.getYForRow=function(f){return this.origin[1]-f*this.norm[1]};w.getTileBounds=function(f,k,m=!1){z.set(k);var c=m?z.col:this.denormalizeCol(z.col,z.world),e=z.row;k=this.getXForColumn(c);m=this.getYForRow(e+1);c=this.getXForColumn(c+1);e=this.getYForRow(e);f[0]=k;f[1]=m;f[2]=c;f[3]=e;return f};w.getTileCoords=function(f,k,m=!1){z.set(k);k=m?z.col:this.denormalizeCol(z.col,z.world);Array.isArray(f)?p(f,this.getXForColumn(k),
this.getYForRow(z.row)):(f.x=this.getXForColumn(k),f.y=this.getYForRow(z.row));return f};return y}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(n){let l=function(){function p(){this.spans=[]}var z=p.prototype;z.acquire=function(y){this.lodInfo=y};z.release=function(){this.lodInfo=null;this.spans.length=0};z.forEach=function(y,w){const {spans:f,lodInfo:k}=this,{level:m}=k;if(0!==f.length)for(const {row:c,colFrom:e,colTo:q}of f)for(let d=e;d<=q;d++)y.call(w,
m,c,k.normalizeCol(d),k.getWorldForColumn(d))};return p}();l.pool=new n(l);return l})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(n,l,p){this.row=n;this.colFrom=l;this.colTo=p}})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/Evented ../../../tiling/TileKey ../../../tiling/TileCoverage ../../../../../chunks/rbush ./Tile".split(" "),function(n,l,p,z,y,
w,f){const k={added:[],removed:[]},m=new Set,c=new z(0,0,0,0);return function(e){function q(g){var b=e.call(this)||this;b._tiles=new Map;b._index=w.rbush(9,l("csp-restrictions")?a=>({minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);b.tiles=[];b.tileScheme=g;return b}n._inheritsLoose(q,e);var d=q.prototype;d.destroy=function(){this.clear()};d.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};d.has=
function(g){return this._tiles.has(g)};d.get=function(g){return this._tiles.get(g)};d.findByKey=function(g){return this._tiles.get(g.id)};d.intersections=function(g,b){var a="string"===typeof g?this.get(g):g;if(!a)return[];var h=b*a.resolution;b=a.bounds[0]-h;g=a.bounds[1]-h;const r=a.bounds[2]+h;a=a.bounds[3]+h;h=[];for(const t of this._index.search({minX:b,minY:g,maxX:r,maxY:a})){const v=t.bounds.slice();v[0]=Math.max(v[0],b);v[1]=Math.max(v[1],g);v[2]=Math.min(v[2],r);v[3]=Math.min(v[3],a);0<v[2]-
v[0]&&0<v[3]-v[1]&&h.push({bounds:v,tile:t})}return h};d.boundsIntersections=function(g){return this._index.search({minX:g[0],minY:g[1],maxX:g[2],maxY:g[3]})};d.updateTiles=function(g){const b={added:[],removed:[]};for(const a of g.added)if(!this.has(a)){const h=new f.Tile(this.tileScheme,a);this._tiles.set(a,h);this._index.insert(h);b.added.push(h)}for(const a of g.removed)this.has(a)&&(g=this.get(a),this._tiles.delete(a),this._index.remove(g),b.removed.push(g));this.tiles.length=0;this._tiles.forEach(a=>
this.tiles.push(a));(b.added.length||b.removed.length)&&this.emit("update",b)};d.setViewState=function(g){if(g=this.tileScheme.getTileCoverage(g,0)){var {spans:b,lodInfo:a}=g,{level:h}=a;if(0<b.length)for(const {row:t,colFrom:v,colTo:x}of b)for(var r=v;r<=x;r++){const u=c.set(h,t,a.normalizeCol(r),a.getWorldForColumn(r)).id;m.add(u);if(!this.has(u)){const D=new f.Tile(this.tileScheme,u);this._tiles.set(u,D);this._index.insert(D);this.tiles.push(D);k.added.push(D)}}for(h=this.tiles.length-1;0<=h;h--)r=
this.tiles[h],m.has(r.id)||(this._tiles.delete(r.id),this.tiles.splice(h,1),this._index.remove(r),k.removed.push(r));(k.added.length||k.removed.length)&&this.emit("update",k);y.pool.release(g);m.clear();k.added.length=0;k.removed.length=0}};return q}(p)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(n,l){function p(b,a){if(!(this instanceof p))return new p(b,a);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));a&&("function"===
typeof a?this.toBBox=a:this._initFormat(a));this.clear()}function z(b,a){y(b,0,b.children.length,a,b)}function y(b,a,h,r,t){t||(t=d(null));t.minX=Infinity;t.minY=Infinity;t.maxX=-Infinity;t.maxY=-Infinity;for(var v;a<h;a++)v=b.children[a],w(t,b.leaf?r(v):v);return t}function w(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function f(b,a){return b.minX-a.minX}function k(b,a){return b.minY-a.minY}function m(b){return(b.maxX-
b.minX)*(b.maxY-b.minY)}function c(b){return b.maxX-b.minX+(b.maxY-b.minY)}function e(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function q(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function d(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function g(b,a,h,r,t){for(var v=[a,h],x;v.length;)h=v.pop(),a=v.pop(),h-a<=r||(x=a+Math.ceil((h-a)/r/2)*r,l.quickselect(b,x,a,h,t),v.push(a,x,x,h))}
p.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,h=[],r=this.toBBox;if(!q(b,a))return h;for(var t=[],v,x,u,D;a;){v=0;for(x=a.children.length;v<x;v++)u=a.children[v],D=a.leaf?r(u):u,q(b,D)&&(a.leaf?h.push(u):e(b,D)?this._all(u,h):t.push(u));a=t.pop()}return h},collides:function(b){var a=this.data,h=this.toBBox;if(!q(b,a))return!1;for(var r=[],t,v,x,u;a;){t=0;for(v=a.children.length;t<v;t++)if(x=a.children[t],u=a.leaf?h(x):x,q(b,u)){if(a.leaf||e(b,u))return!0;
r.push(x)}a=r.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,h=b.length;a<h;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,this.data.height-1);return this},clear:function(){this.data=
d([]);return this},remove:function(b,a){if(!b)return this;for(var h=this.data,r=this.toBBox(b),t=[],v=[],x,u,D,B;h||t.length;){h||(h=t.pop(),u=t[t.length-1],x=v.pop(),B=!0);if(h.leaf){a:{D=b;var A=h.children,C=a;if(C){for(var E=0;E<A.length;E++)if(C(D,A[E])){D=E;break a}D=-1}else D=A.indexOf(D)}if(-1!==D){h.children.splice(D,1);t.push(h);this._condense(t);break}}B||h.leaf||!e(h,r)?u?(x++,h=u.children[x],B=!1):h=null:(t.push(h),v.push(x),x=0,u=h,h=h.children[0])}return this},toBBox:function(b){return b},
compareMinX:f,compareMinY:k,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var h=[];b;)b.leaf?a.push.apply(a,b.children):h.push.apply(h,b.children),b=h.pop();return a},_build:function(b,a,h,r){var t=h-a+1,v=this._maxEntries;if(t<=v){var x=d(b.slice(a,h+1));z(x,this.toBBox);return x}r||(r=Math.ceil(Math.log(t)/Math.log(v)),v=Math.ceil(t/Math.pow(v,r-1)));x=d([]);x.leaf=!1;x.height=r;t=Math.ceil(t/v);v=t*Math.ceil(Math.sqrt(v));var u;for(g(b,
a,h,v,this.compareMinX);a<=h;a+=v){var D=Math.min(a+v-1,h);g(b,a,D,t,this.compareMinY);for(u=a;u<=D;u+=t){var B=Math.min(u+t-1,D);x.children.push(this._build(b,u,B,r-1))}}z(x,this.toBBox);return x},_chooseSubtree:function(b,a,h,r){for(var t,v,x,u,D,B,A,C;;){r.push(a);if(a.leaf||r.length-1===h)break;A=C=Infinity;t=0;for(v=a.children.length;t<v;t++)x=a.children[t],D=m(x),B=(Math.max(x.maxX,b.maxX)-Math.min(x.minX,b.minX))*(Math.max(x.maxY,b.maxY)-Math.min(x.minY,b.minY))-D,B<C?(C=B,A=D<A?D:A,u=x):B===
C&&D<A&&(A=D,u=x);a=u||a.children[0]}return a},_insert:function(b,a,h){var r=this.toBBox;h=h?b:r(b);r=[];var t=this._chooseSubtree(h,this.data,a,r);t.children.push(b);for(w(t,h);0<=a;)if(r[a].children.length>this._maxEntries)this._split(r,a),a--;else break;this._adjustParentBBoxes(h,r,a)},_split:function(b,a){var h=b[a],r=h.children.length,t=this._minEntries;this._chooseSplitAxis(h,t,r);r=this._chooseSplitIndex(h,t,r);r=d(h.children.splice(r,h.children.length-r));r.height=h.height;r.leaf=h.leaf;z(h,
this.toBBox);z(r,this.toBBox);a?b[a-1].children.push(r):this._splitRoot(h,r)},_splitRoot:function(b,a){this.data=d([b,a]);this.data.height=b.height+1;this.data.leaf=!1;z(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,h){var r,t;var v=t=Infinity;for(r=a;r<=h-a;r++){var x=y(b,0,r,this.toBBox);var u=y(b,r,h,this.toBBox);var D=Math.max(0,Math.min(x.maxX,u.maxX)-Math.max(x.minX,u.minX))*Math.max(0,Math.min(x.maxY,u.maxY)-Math.max(x.minY,u.minY));x=m(x)+m(u);if(D<v){v=D;var B=r;t=x<t?x:t}else D===
v&&x<t&&(t=x,B=r)}return B},_chooseSplitAxis:function(b,a,h){var r=b.leaf?this.compareMinX:f,t=b.leaf?this.compareMinY:k,v=this._allDistMargin(b,a,h,r);a=this._allDistMargin(b,a,h,t);v<a&&b.children.sort(r)},_allDistMargin:function(b,a,h,r){b.children.sort(r);r=this.toBBox;var t=y(b,0,a,r),v=y(b,h-a,h,r),x=c(t)+c(v),u;for(u=a;u<h-a;u++){var D=b.children[u];w(t,b.leaf?r(D):D);x+=c(t)}for(u=h-a-1;u>=a;u--)D=b.children[u],w(v,b.leaf?r(D):D),x+=c(v);return x},_adjustParentBBoxes:function(b,a,h){for(;0<=
h;h--)w(a[h],b)},_condense:function(b){for(var a=b.length-1,h;0<=a;a--)0===b[a].children.length?0<a?(h=b[a-1].children,h.splice(h.indexOf(b[a]),1)):this.clear():z(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}};n.rbush=p})},"esri/chunks/quickselect":function(){define(["exports",
"./_commonjsHelpers"],function(n,l){l=l.createCommonjsModule(function(p){(function(z){z=z();void 0!==z&&(p.exports=z)})(function(){function z(f,k,m,c,e){for(;c>m;){if(600<c-m){var q=c-m+1,d=k-m+1,g=Math.log(q),b=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*b*(q-b)/q)*(0>d-q/2?-1:1);z(f,k,Math.max(m,Math.floor(k-d*b/q+g)),Math.min(c,Math.floor(k+(q-d)*b/q+g)),e)}q=f[k];d=m;b=c;y(f,m,k);for(0<e(f[c],q)&&y(f,m,c);d<b;){y(f,d,b);d++;for(b--;0>e(f[d],q);)d++;for(;0<e(f[b],q);)b--}0===e(f[m],q)?y(f,m,b):(b++,y(f,
b,c));b<=k&&(m=b+1);k<=b&&(c=b-1)}}function y(f,k,m){var c=f[k];f[k]=f[m];f[m]=c}function w(f,k){return f<k?-1:f>k?1:0}return function(f,k,m,c,e){z(f,k,m||0,c||f.length-1,e||w)}})});n.quickselect=l})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(n,l,p,z,y,w,f){function k(c,e){const q=c.bounds,d=e.bounds;return c.key.id!==e.key.id&&c.key.world===e.key.world&&q[0]<=d[0]&&q[1]<=d[1]&&q[2]>=d[2]&&q[3]>=d[3]}let m=function(){function c(q,d){this.key=new f(0,0,0,0);this.bounds=y.create();this.objectIds=new Set;this.key.set(d);d=q.getLODInfoAt(this.key);this.tileInfoView=q;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=d.resolution;this.scale=d.scale;this.level=d.level;this.needsClear=!0}var e=c.prototype;e.clone=
function(){return new c(this.tileInfoView,this.key)};e.createChildTiles=function(){const q=this.key.getChildKeys(),d=p.acquire();for(let g=0;g<q.length;g++)d[g]=new c(this.tileInfoView,q[g]);return d};e.getQuantizationParameters=function(){return w.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};l._createClass(c,[{key:"id",
get:function(){return this.key.id}},{key:"extent",get:function(){return z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"bbox",get:function(){const q=this.bounds;return{minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}}}]);return c}();n.Tile=m;n.default=m;n.isChildOf=function(c,e){return k(e,c)};n.isParentOf=k;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/tasks/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent ../../geometry".split(" "),function(n,
l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=new k.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});d=a=function(h){function r(t){t=h.call(this,t)||this;t.extent=null;t.mode="view";t.originPosition="upper-left";t.tolerance=1;return t}n._inheritsLoose(r,h);r.prototype.clone=function(){return new a(z.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return r}(d.JSONSupport);l.__decorate([f.property({type:g,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],d.prototype,"extent",void 0);l.__decorate([f.property({type:["view","edit"],json:{write:!0}})],d.prototype,"mode",void 0);l.__decorate([f.property({type:String,json:{read:p.read,write:p.write}})],d.prototype,"originPosition",void 0);l.__decorate([f.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],d.prototype,"tolerance",void 0);return d=a=l.__decorate([m.subclass("esri.tasks.support.QuantizationParameters")],d)})},"esri/views/2d/layers/features/processors":function(){define(["require",
"exports"],function(n,l){l.loadProcessorModule=function(p){return"heatmap"===p?new Promise(function(z,y){n(["./processors/HeatmapProcessor"],function(w){z(Object.freeze({__proto__:null,"default":w}))},y)}):new Promise(function(z,y){n(["./processors/SymbolProcessor"],function(w){z(Object.freeze({__proto__:null,"default":w}))},y)})};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/UpdateToken":function(){define(["exports"],function(n){let l=function(){function p(){this.source=
!1;this.targets={feature:!1,aggregate:!1};this.storage={filters:!1,data:!1};this.queryFilter=this.mesh=!1;this.why={mesh:[],source:[]}}p.create=function(y){const w=new p;for(const f in y){const k=y[f];if("object"===typeof k)for(const m in k)w[f][m]=k[m];w[f]=k}return w};p.empty=function(){return p.create({})};p.all=function(){return p.create({source:!0,targets:{feature:!0,aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})};var z=p.prototype;z.any=function(){return this.source||this.mesh||this.storage.filters||
this.storage.data||this.targets.feature||this.targets.aggregate||this.queryFilter};z.describe=function(){let y=0,w="";if(this.mesh){y+=20;w+="-\x3e (20) Mesh needs update\n";for(const f of this.why.mesh)w+=`    + ${f}\n`}if(this.source){y+=10;w+="-\x3e (10) The source needs update\n";for(const f of this.why.source)w+=`    + ${f}\n`}this.targets.feature&&(y+=5,w+="-\x3e (5) Feature target parameters changed\n");this.storage.filters&&(y+=5,w+="-\x3e (5) Feature filter parameters changed\n");this.targets.aggregate&&
(y+=4,w+="-\x3e (4) Aggregate target parameters changed\n");this.storage.data&&(y+=1,w+="-\x3e (1) Texture storage parameters changed");console.debug(`Applying ${5>y?"Fastest":10>y?"Fast":15>y?"Moderate":20>y?"Slow":"Very Slow"} update of cost ${y}/45 `);console.debug(w)};z.toJSON=function(){return{source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh,queryFilter:this.queryFilter}};return p}();n.UpdateToken=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/FeatureController2D":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/FieldsIndex ../../../../../core/HandleOwner ../support/FeatureSetReaderJSON ../../../../support/QueueProcessor ../support/AttributeStore ../support/ComputedAttributeStorage ../FeatureStore2D ../../../../../layers/graphics/data/QueryEngine ../support/UpdateToken ../Source2D ../support/ClusterStore".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C){function E(F){if(!d.isAbortError(F)&&"worker:port-closed"!==F.name)throw F;}y=function(F){function G(){var K=F.apply(this,arguments)||this;K._storage=new x.ComputedAttributeStorage;K._markedIdsBufId=K._storage.createBitset();K._lastCleanup=performance.now();K._cleanupNeeded=!1;K._invalidated=!1;K._tileToResolver=new Map;K.tileStore=null;K.config=null;K.processor=null;K.remoteClient=null;K.service=null;K._editing=!1;return K}n._inheritsLoose(G,
F);var J=G.prototype;J.initialize=function(){this._initAttributeStore();this._initStores();this._initQueryEngine();this._initSource();this._updateQueue=new t.QueueProcessor({concurrency:4,process:(K,L)=>this._onDisplayTilePatch(K,{signal:L})});this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this)),this.watch("updating",K=>!K&&this.onIdle())])};J.startup=async function(){this._initAttributeStore()};J._initSource=function(){this._source=new A.Source2D(this.service,this.spatialReference,
this.tileStore.tileScheme);this._source.onDisplayTilePatch=(L,I)=>{this._invalidated=!0;return this._patchTile(L,I)};this._source.canAcceptPatch=()=>50>this._updateQueue.length;var K=this._source.sourceEvents;"geoevent"===K.type&&(K=K.events,this.handles.add([K.on("connectionStatus",L=>this.remoteClient.invoke("setProperty",{propertyName:"connectionStatus",value:L}).catch(E)),K.on("errorString",L=>this.remoteClient.invoke("setProperty",{propertyName:"errorString",value:L}).catch(E)),K.on("feature",
L=>this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:L.attributes,centroid:L.centroid,geometry:L.geometry}}).catch(E)),K.on("updateRate",L=>this.remoteClient.invoke("emitEvent",{name:"update-rate",event:{...L}}).catch(E))]))};J._initAttributeStore=function(){this.attributeStore?this.attributeStore.invalidateResources():this.attributeStore=new v["default"]({type:"remote",initialize:(K,L)=>d.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",
K,{signal:L}).catch(E)),update:(K,L)=>d.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",K,{signal:L}).catch(E)),render:K=>d.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.requestRender",void 0,{signal:K}).catch(E))},this.config)};J._initStores=function(){const K={geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};
this.featureStore=new u.FeatureStore2D(K,this._storage);this.aggregateStore=new C.ClusterStore(K,this.spatialReference,this._storage);this.handles.add(this.aggregateStore.events.on("valueRangesChanged",L=>{this.remoteClient.invoke("emitEvent",{name:"valueRangesChanged",event:{valueRanges:L.valueRanges}}).catch(E)}))};J._initQueryEngine=function(){var K;const L=this;null==(K=this.queryEngine)?void 0:K.destroy();this.queryEngine=new D["default"]({definitionExpression:this.config.definitionExpression,
fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(I){return L.aggregateStore.getFeatureDisplayIdsForAggregate(I).map(N=>L.getObjectId(N))}},timeInfo:this.service.timeInfo})};J.destroy=function(){this._updateQueue.destroy();this._source.destroy();this.queryEngine.destroy();this.attributeStore&&
this.attributeStore.destroy()};J.isUpdating=function(){return this._source.updating||!!this._updateQueue.length};J.enableEvent=function(K){this._source.enableEvent(K.name,K.value)};J.invalidate=async function(K){if(K.any()){p("esri-2d-update-debug")&&K.describe();var L=this.tileStore.tiles.map(({key:N})=>{const P=d.createResolver();this._tileToResolver.set(N.id,P);return P.promise}),I=this._updateQueue.takeAll();this._updateQueue.resume();this.hasAggregates&&K.mesh&&K.targets.aggregate&&!K.queryFilter?
this._repushAggregateMeshTiles(K):(this._source.resubscribe(K),d.all(L).then(()=>{this._source.resume()}),K.mesh&&await g.whenFalseOnce(this,"updating"));this.notifyChange("updating");await d.all(L);this._updateQueue.pause();for(const N of I)this._patchTile(N);K.source&&(this._cleanupNeeded=!0)}};J.resume=function(){this._updateQueue.resume();return this._source.resume()};J.update=async function(K,L,I=!1){this._editing&&await g.whenFalseOnce(this,"updating");I&&(this._source.pause(),this._updateQueue.pause());
this._set("config",L);this._schema=L.schema;this._initQueryEngine();await d.all([this._source.update(K,L.schema.source),this.featureStore.updateSchema(K,L.schema.targets.feature),this.attributeStore.update(K,L),this.attributeStore.updateFilters(K,this)]);await this.aggregateStore.updateSchema(K,L.schema.targets.aggregate)};J.refresh=async function(){this._source.resubscribe(B.UpdateToken.all(),!0);this._cleanupNeeded=!0;this.notifyChange("updating");await g.whenFalseOnce(this,"updating",!0)};J.onTileUpdate=
function(K){this.aggregateStore.onTileUpdate(K);for(const L of K.added)this._source.subscribe(L),this._level=L.level;for(const L of K.removed)this._source.unsubscribe(L),this._cleanupNeeded=!0,this._tileToResolver.has(L.id)&&(this._tileToResolver.get(L.id).resolve(),this._tileToResolver.delete(L.id));this.notifyChange("updating")};J.onIdle=function(){this.hasAggregates&&this._invalidated&&(this._repushAggregateMeshTiles(),this._invalidated=!1);this._markAndSweep()};J.onEdits=async function(K){if(this._editing)return await g.whenFalseOnce(this,
"updating"),await d.after(16),this.onEdits(K);this._editing=!0;try{await this._source.onEdits(K),await g.whenFalseOnce(this,"updating")}catch(L){}this._editing=!1};J.queryExtent=function(K){return this.queryEngine.executeQueryForExtent(K)};J.queryFeatures=function(K){return this.queryEngine.executeQuery(K)};J.queryFeatureCount=function(K){return this.queryEngine.executeQueryForCount(K)};J.queryLatestObservations=function(K){return this.queryEngine.executeQueryForLatestObservations(K)};J.queryObjectIds=
function(K){return this.queryEngine.executeQueryForIds(K)};J.queryStatistics=async function(){return{...this.featureStore.storeStatistics,displayedFeatureCount:0,displayedVertexCount:0,displayPreProcessTime:0}};J.getObjectId=function(K){return this.featureStore.lookupObjectId(K,this._storage)};J.getDisplayId=function(K){if(this._schema.targets.aggregate){const L=this.aggregateStore.getDisplayId(K);return z.isNone(L)?(K=this.featureStore.lookupDisplayId(K),this.aggregateStore.getDisplayIdForReferenceId(K)):
L}return this.featureStore.lookupDisplayId(K)};J.getFeature=function(K){K=this.featureStore.lookupFeatureByDisplayId(K,this._storage);if(z.isNone(K))return null;var L=K.readHydratedGeometry();L=b.convertToGeometry(L,K.geometryType,K.hasZ,K.hasM);return{attributes:K.readAttributes(),geometry:L}};J.getAggregate=function(K){return this.aggregateStore.getAggregate(K)};J.setHighlight=async function(K){const L=K.map(I=>this.getDisplayId(I));return this.attributeStore.setHighlight(K,L)};J._repushAggregateMeshTiles=
function(K){for(const L of this.tileStore.tiles)this._patchTile({type:"replace",id:L.key.id,addOrUpdate:r.FeatureSetReaderJSON.fromOptimizedFeatures([],this.service.geometryType),remove:[],end:!0,noData:!1,update:K||B.UpdateToken.create({mesh:!0,targets:{aggregate:!0}})})};J._maybeForceCleanup=function(){5E3<performance.now()-this._lastCleanup&&this._markAndSweep()};J._patchTile=function(K,L){K=this._updateQueue.push(K,L).then(()=>{this.notifyChange("updating")}).catch(I=>{this.notifyChange("updating")});
this.notifyChange("updating");return K};J._onDisplayTilePatch=async function(K,L){d.throwIfAborted(L);const I=this.tileStore.get(K.id);if(I){var N=K.update;K.remove.length&&(this._cleanupNeeded=!0);var P=[];for(const W of K.remove)P.push(this.featureStore.lookupDisplayId(W));K.remove=P;try{if(z.isNone(K.addOrUpdate))this.processor.onTileData(I,{...K,addOrUpdate:null},L).catch(W=>{d.throwIfNotAbortError(W)});else{K.addOrUpdate._storage=this._storage;var R=K.addOrUpdate.hasFilter(),T=K.addOrUpdate.instance;
K.addOrUpdate._arcadeSpatialReference=this.spatialReference;if(!this.featureStore.hasInstance(T)||N.targets.feature&&!R)this.featureStore.onTileData(I,K,this._storage);!N.storage.data&&!N.storage.filters||R||(this.attributeStore.onTileData(I,K),this._source.isStream?await this.attributeStore.sendUpdates():this.attributeStore.sendUpdates());this.hasAggregates&&N.targets.aggregate&&(this.aggregateStore.onTileData(I,K,this._storage,this.attributeStore,N.mesh),N.mesh&&(this.attributeStore.onTileData(I,
K),await this.attributeStore.sendUpdates()));N.mesh&&await this.processor.onTileData(I,K,L);this._maybeForceCleanup()}this._finishedPatch(K)}catch(W){d.throwIfNotAbortError(W)}}};J._finishedPatch=function(K){(K.noData||K.end)&&this._tileToResolver.has(K.id)&&(this._tileToResolver.get(K.id).resolve(),this._tileToResolver.delete(K.id))};J._markAndSweep=function(){this._lastCleanup=performance.now();if(this._cleanupNeeded||this._source.isStream){this._cleanupNeeded=!1;var K=this._storage.getBitset(this._markedIdsBufId),
L=new Set;K.clear();var I=N=>{N=this.featureStore.lookupDisplayId(N);const P=this._storage.getInstanceId(N);N&&(L.add((4294901760&P)>>>16),K.set(N))};for(const N of this.tileStore.tiles)this._source.forEachRequest(N.key.id,P=>{if(!z.isNone(P.features))for(P=P.features.getCursor();P.next();){const R=P.getObjectId();I(R)}});this._source.forEachPendingEdit(N=>I(N));this._updateQueue.forEach(N=>{for(const P of N.remove)I(P)});this.config.schema.targets.aggregate&&(this.aggregateStore.sweepFeatures(K,
this.featureStore),this.aggregateStore.sweepClusters(this._storage,this.attributeStore,this._level));this.featureStore.sweepFeatures(K,this._storage,this.attributeStore);this.featureStore.sweepFeatureSets(L)}};n._createClass(G,[{key:"fieldsIndex",get:function(){return new a(this.service.fields)}},{key:"hasAggregates",get:function(){return!!this.config.schema.targets.aggregate}},{key:"spatialReference",get:function(){return this.tileStore.tileScheme.spatialReference}},{key:"updating",get:function(){return this.isUpdating()}}]);
return G}(h.HandleOwner);l.__decorate([f.property({constructOnly:!0})],y.prototype,"tileStore",void 0);l.__decorate([f.property()],y.prototype,"config",void 0);l.__decorate([f.property({readOnly:!0,dependsOn:["service"]})],y.prototype,"fieldsIndex",null);l.__decorate([f.property()],y.prototype,"processor",void 0);l.__decorate([f.property({constructOnly:!0})],y.prototype,"remoteClient",void 0);l.__decorate([f.property({constructOnly:!0})],y.prototype,"service",void 0);l.__decorate([f.property({dependsOn:["tileStore"]})],
y.prototype,"spatialReference",null);l.__decorate([f.property()],y.prototype,"updating",null);return y=l.__decorate([m.subclass("esri.views.2d.layers.features.controllers.FeatureController2D")],y)})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(n,l,p,z,y,w,f){function k(Q,X){return Q?X?4:3:X?3:2}function m(Q,X,aa,ca){if(Q){if(aa)return X&&
ca?M:ka;if(X&&ca)return oa}else if(X&&ca)return ka;return ba}function c({scale:Q,translate:X},aa){return Math.round((aa-X[0])/Q[0])}function e({scale:Q,translate:X},aa){return Math.round((X[1]-aa)/Q[1])}function q({scale:Q,translate:X},aa){return aa*Q[0]+X[0]}function d({scale:Q,translate:X},aa){return X[1]-aa*Q[1]}function g(Q){Q=Q.coords;return{x:Q[0],y:Q[1]}}function b(Q,X){Q.coords[0]=X.x;Q.coords[1]=X.y;return Q}function a(Q){Q=Q.coords;return{x:Q[0],y:Q[1],z:Q[2]}}function h(Q,X){Q.coords[0]=
X.x;Q.coords[1]=X.y;Q.coords[2]=X.z;return Q}function r(Q){Q=Q.coords;return{x:Q[0],y:Q[1],m:Q[2]}}function t(Q,X){Q.coords[0]=X.x;Q.coords[1]=X.y;Q.coords[2]=X.m;return Q}function v(Q){Q=Q.coords;return{x:Q[0],y:Q[1],z:Q[2],m:Q[3]}}function x(Q,X){Q.coords[0]=X.x;Q.coords[1]=X.y;Q.coords[2]=X.z;Q.coords[3]=X.m;return Q}function u(Q,X){return Q&&X?x:Q?h:X?t:b}function D(Q,X,aa,ca,ia){aa=u(aa,ca);for(const ja of X){const {geometry:qa,attributes:sa}=ja;let ta;qa&&(ta=aa(new f,qa));Q.push(new y(ta,sa,
null,sa[ia]))}return Q}function B(Q,X,aa,ca){for(const ia of X){const {geometry:ja,attributes:qa}=ia;let sa;ja&&(sa=A(ja,aa,ca));Q.push({attributes:qa,geometry:sa})}return Q}function A(Q,X,aa){if(!Q)return null;const ca=k(X,aa),ia=[];for(let ja=0;ja<Q.coords.length;ja+=ca){const qa=[];for(let sa=0;sa<ca;sa++)qa.push(Q.coords[ja+sa]);ia.push(qa)}return X?aa?{points:ia,hasZ:X,hasM:aa}:{points:ia,hasZ:X}:aa?{points:ia,hasM:aa}:{points:ia}}function C(Q,X,aa,ca,ia){aa=k(aa,ca);for(const ja of X){X=ja.geometry;
ca=ja.attributes;let qa;X&&(qa=E(new f,X,aa));Q.push(new y(qa,ca,null,ca[ia]))}return Q}function E(Q,X,aa=k(X.hasZ,X.hasM)){Q.lengths[0]=X.points.length;const ca=Q.coords;let ia=0;for(const ja of X.points)for(X=0;X<aa;X++)ca[ia++]=ja[X];return Q}function F(Q,X,aa){if(!Q)return null;const ca=k(X,aa),{coords:ia,lengths:ja}=Q;Q=[];let qa=0;for(const sa of ja){const ta=[];for(let va=0;va<sa;va++){const wa=[];for(let Aa=0;Aa<ca;Aa++)wa.push(ia[qa++]);ta.push(wa)}Q.push(ta)}return X?aa?{paths:Q,hasZ:X,
hasM:aa}:{paths:Q,hasZ:X}:aa?{paths:Q,hasM:aa}:{paths:Q}}function G(Q,X,aa,ca,ia){aa=k(aa,ca);for(const ja of X){X=ja.geometry;ca=ja.attributes;let qa;X&&(qa=J(new f,X,aa));Q.push(new y(qa,ca,null,ca[ia]))}return Q}function J(Q,X,aa=k(X.hasZ,X.hasM)){const {lengths:ca,coords:ia}=Q;let ja=0;for(const qa of X.paths){for(const sa of qa)for(X=0;X<aa;X++)ia[ja++]=sa[X];ca.push(qa.length)}return Q}function K(Q,X,aa){if(!Q)return null;const ca=k(X,aa),{coords:ia,lengths:ja}=Q;Q=[];let qa=0;for(const sa of ja){const ta=
[];for(let va=0;va<sa;va++){const wa=[];for(let Aa=0;Aa<ca;Aa++)wa.push(ia[qa++]);ta.push(wa)}Q.push(ta)}return X?aa?{rings:Q,hasZ:X,hasM:aa}:{rings:Q,hasZ:X}:aa?{rings:Q,hasM:aa}:{rings:Q}}function L(Q,X,aa,ca,ia){for(const ja of X){X=ja.geometry;const qa=ja.centroid,sa=ja.attributes;let ta;X&&(ta=I(new f,X,aa,ca));qa?Q.push(new y(ta,sa,b(new f,qa),sa[ia])):Q.push(new y(ta,sa,null,sa[ia]))}return Q}function I(Q,X,aa=X.hasZ,ca=X.hasM){N(Q,X.rings,aa,ca);return Q}function N(Q,X,aa,ca){aa=k(aa,ca);
const {lengths:ia,coords:ja}=Q;ca=0;ia.length=ja.length=0;for(const qa of X){for(const sa of qa)for(X=0;X<aa;X++)ja[ca++]=sa[X];ia.push(qa.length)}return Q}function P(Q,X,aa,ca,ia,ja){Q.length=0;if(!aa){for(const qa of X)Q.push(new y(null,qa.attributes,null,qa.attributes[ja]));return Q}switch(aa){case "esriGeometryPoint":return D(Q,X,ca,ia,ja);case "esriGeometryMultipoint":return C(Q,X,ca,ia,ja);case "esriGeometryPolyline":return G(Q,X,ca,ia,ja);case "esriGeometryPolygon":return L(Q,X,ca,ia,ja);default:O.error("convertToFeatureSet:unknown-geometry",
new p(`Unable to parse unknown geometry type '${aa}'`)),Q.length=0}return Q}function R(Q,X,aa,ca){Q=Q&&("coords"in Q?Q:Q.geometry);if(!Q)return null;switch(X){case "esriGeometryPoint":return X=g,aa&&ca?X=v:aa?X=a:ca&&(X=r),X(Q);case "esriGeometryMultipoint":return A(Q,aa,ca);case "esriGeometryPolyline":return F(Q,aa,ca);case "esriGeometryPolygon":return K(Q,aa,ca);default:O.error("convertToGeometry:unknown-geometry",new p(`Unable to parse unknown geometry type '${X}'`))}}function T(Q,X,aa,ca,ia){Q.length=
0;switch(aa){case "esriGeometryPoint":var ja=g;ca&&ia?ja=v:ca?ja=a:ia&&(ja=r);for(var qa of X){const {geometry:sa,attributes:ta}=qa;ca=sa?ja(sa):null;Q.push({attributes:ta,geometry:ca})}break;case "esriGeometryMultipoint":return B(Q,X,ca,ia);case "esriGeometryPolyline":for(const sa of X){const {geometry:ta,attributes:va}=sa;let wa;ta&&(wa=F(ta,ca,ia));Q.push({attributes:va,geometry:wa})}break;case "esriGeometryPolygon":for(ja of X){const {geometry:sa,attributes:ta,centroid:va}=ja;let wa;sa&&(wa=K(sa,
ca,ia));va?(qa=g(va),Q.push({attributes:ta,centroid:qa,geometry:wa})):Q.push({attributes:ta,geometry:wa})}break;default:O.error("convertToFeatureSet:unknown-geometry",new p(`Unable to parse unknown geometry type '${aa}'`))}return Q}function W(Q,X,aa,ca,ia,ja,qa=aa,sa=ca){Q.lengths.length&&(Q.lengths.length=0);Q.coords.length&&(Q.coords.length=0);if(!X||!X.coords.length)return null;ia=U[ia];const {coords:ta,lengths:va}=X;X=k(aa,ca);const wa=k(aa&&qa,ca&&sa);aa=m(aa,ca,qa,sa);if(!va.length)return aa(Q.coords,
ta,0,0,c(ja,ta[0]),e(ja,ta[1])),Q.lengths.length&&(Q.lengths.length=0),Q.coords.length=X,Q;let Aa,Ca=0,Da,Fa=0;for(const Ha of va){if(Ha<ia)continue;let Ka=0;Da=Fa;sa=ca=c(ja,ta[Ca]);Aa=qa=e(ja,ta[Ca+1]);aa(Q.coords,ta,Da,Ca,sa,Aa);Ka++;Ca+=X;Da+=wa;for(let Ia=1;Ia<Ha;Ia++,Ca+=X)if(sa=c(ja,ta[Ca]),Aa=e(ja,ta[Ca+1]),sa!==ca||Aa!==qa)aa(Q.coords,ta,Da,Ca,sa-ca,Aa-qa),Da+=wa,Ka++,ca=sa,qa=Aa;Ka>=ia&&(Q.lengths.push(Ka),Fa=Da)}Q.coords.length=Fa;return Q.coords.length?Q:null}function Z(Q,X,aa,ca,ia,ja,
qa){let sa=ca,ta=0;for(let wa=ja+aa;wa<qa;wa+=aa){{var va=X[wa];const Aa=X[wa+1],Ca=X[qa],Da=X[qa+1];let Fa=X[ja],Ha=X[ja+1],Ka=Ca-Fa,Ia=Da-Ha;if(0!==Ka||0!==Ia){const Ja=((va-Fa)*Ka+(Aa-Ha)*Ia)/(Ka*Ka+Ia*Ia);1<Ja?(Fa=Ca,Ha=Da):0<Ja&&(Fa+=Ka*Ja,Ha+=Ia*Ja)}Ka=va-Fa;Ia=Aa-Ha;va=Ka*Ka+Ia*Ia}va>sa&&(ta=wa,sa=va)}sa>ca&&(ta-ja>aa&&Z(Q,X,aa,ca,ia,ja,ta),ia(Q,X,Q.length,ta,X[ta],X[ta+1]),qa-ta>aa&&Z(Q,X,aa,ca,ia,ta,qa))}function la(Q,X,aa,ca,ia){const {coords:ja,lengths:qa}=X,sa=aa?ca?M:ka:ca?ka:ba;aa=k(aa,
ca);if(!ja.length)return Q!==X&&(Q.lengths.length=0,Q.coords.length=0),Q;if(!qa.length)return sa(Q.coords,ja,0,0,q(ia,ja[0]),d(ia,ja[1])),Q!==X&&(Q.lengths.length=0,Q.coords.length=aa),Q;const [ta,va]=ia.scale;ca=0;for(let wa=0;wa<qa.length;wa++){const Aa=qa[wa];Q.lengths[wa]=Aa;let Ca=q(ia,ja[ca]),Da=d(ia,ja[ca+1]);sa(Q.coords,ja,ca,ca,Ca,Da);ca+=aa;for(let Fa=1;Fa<Aa;Fa++,ca+=aa)Ca+=ja[ca]*ta,Da-=ja[ca+1]*va,sa(Q.coords,ja,ca,ca,Ca,Da)}Q!==X&&(Q.lengths.length=qa.length,Q.coords.length=ja.length);
return Q}function ea(Q,X,aa,ca){let ia=0,ja=Q[ca*X],qa=Q[ca*(X+1)];for(let sa=1;sa<aa;sa++){const ta=ja+Q[ca*(X+sa)],va=qa+Q[ca*(X+sa)+1],wa=(ta-ja)*(va+qa);ja=ta;qa=va;ia+=wa}return.5*ia}const O=l.getLogger("esri.tasks.support.optimizedFeatureSet"),U={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ba=(Q,X,aa,ca,ia,ja)=>{Q[aa]=ia;Q[aa+1]=ja},ka=(Q,X,aa,ca,ia,ja)=>{Q[aa]=ia;Q[aa+1]=ja;Q[aa+2]=X[ca+2]},oa=(Q,X,aa,ca,ia,ja)=>{Q[aa]=ia;Q[aa+1]=ja;Q[aa+2]=X[ca+
3]},M=(Q,X,aa,ca,ia,ja)=>{Q[aa]=ia;Q[aa+1]=ja;Q[aa+2]=X[ca+2];Q[aa+3]=X[ca+3]},V=[],ha=[];n.convertFromFeature=function(Q,X,aa,ca,ia){V[0]=Q;[Q]=P(ha,V,X,aa,ca,ia);V.length=ha.length=0;return Q};n.convertFromFeatureSet=function(Q,X){const aa=new w,{hasM:ca,hasZ:ia,features:ja,objectIdFieldName:qa,spatialReference:sa,geometryType:ta,exceededTransferLimit:va,transform:wa,fields:Aa}=Q;Aa&&(aa.fields=Aa);aa.geometryType=ta;aa.objectIdFieldName=qa||X;aa.spatialReference=sa;if(!aa.objectIdFieldName)return O.error(new p("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),aa;ja&&P(aa.features,ja,ta,ia,ca,aa.objectIdFieldName);va&&(aa.exceededTransferLimit=va);ca&&(aa.hasM=ca);ia&&(aa.hasZ=ia);wa&&(aa.transform=wa);return aa};n.convertFromFeatures=P;n.convertFromGeometry=function(Q,X,aa){if(!Q)return null;const ca=new f;"hasZ"in Q&&null==X&&(X=Q.hasZ);"hasM"in Q&&null==aa&&(aa=Q.hasM);if(z.isPoint(Q))return u(null!=X?X:null!=Q.z,null!=aa?aa:null!=Q.m)(ca,Q);if(z.isPolygon(Q))return I(ca,Q,X,aa);if(z.isPolyline(Q))return J(ca,Q,k(X,aa));
if(z.isMultipoint(Q))return E(ca,Q,k(X,aa));O.error("convertFromGeometry:unknown-geometry",new p(`Unable to parse unknown geometry type '${Q}'`))};n.convertFromGraphics=function(Q,X,aa,ca,ia,ja){const qa=Q.length;switch(aa){case "esriGeometryPoint":D(Q,X,ca,ia,ja);break;case "esriGeometryMultipoint":C(Q,X,ca,ia,ja);break;case "esriGeometryPolyline":G(Q,X,ca,ia,ja);break;case "esriGeometryPolygon":L(Q,X,ca,ia,ja);break;default:O.error("convertToFeatureSet:unknown-geometry",new p(`Unable to parse unknown geometry type '${aa}'`))}for(ca=
0;ca<X.length;ca++)Q[ca+qa].geometryType=aa,Q[ca+qa].insertAfter=X[ca].insertAfter,Q[ca+qa].groupId=X[ca].groupId;return Q};n.convertFromMultipoint=E;n.convertFromMultipointFeatures=C;n.convertFromNestedArray=N;n.convertFromPoint=function(Q,X,aa=u(null!=X.z,null!=X.m)){return aa(Q,X)};n.convertFromPointFeatures=D;n.convertFromPolygon=I;n.convertFromPolyline=J;n.convertFromPolylineFeatures=G;n.convertToFeature=function(Q,X,aa,ca){ha[0]=Q;T(V,ha,X,aa,ca);Q=V[0];V.length=ha.length=0;return Q};n.convertToFeatureSet=
function(Q){const {objectIdFieldName:X,spatialReference:aa,transform:ca,fields:ia,hasM:ja,hasZ:qa,features:sa,geometryType:ta,exceededTransferLimit:va,uniqueIdField:wa,queryGeometry:Aa,queryGeometryType:Ca}=Q;Q=T([],sa,ta,qa,ja);const Da=R(Aa,Ca,!1,!1);Q={features:Q,fields:ia,geometryType:ta,objectIdFieldName:X,spatialReference:aa,uniqueIdField:wa,queryGeometry:Da};ca&&(Q.transform=ca);va&&(Q.exceededTransferLimit=va);ja&&(Q.hasM=ja);qa&&(Q.hasZ=qa);return Q};n.convertToFeatures=T;n.convertToGeometry=
R;n.convertToMultipoint=A;n.convertToMultipointFeatures=B;n.convertToPoint=function(Q,X,aa){return Q?X?aa?v(Q):a(Q):aa?r(Q):g(Q):null};n.convertToPolygon=K;n.convertToPolyline=F;n.deltaDecodeGeometry=function(Q,X){const aa=Q.clone(),ca=Q.coords;Q=Q.lengths;let ia=0;for(let sa=0;sa<Q.length;sa++){const ta=Q[sa];var ja=ca[X*ia],qa=ca[X*ia+1];for(let va=1;va<ta;va++)ja+=ca[X*(ia+va)],qa+=ca[X*(ia+va)+1],aa.coords[X*(ia+va)]=ja,aa.coords[X*(ia+va)+1]=qa;ia+=ta}return aa};n.deltaEncodeGeometry=function(Q,
X){const aa=Q.clone(),ca=Q.coords;Q=Q.lengths;let ia=0;for(let qa=0;qa<Q.length;qa++){const sa=Q[qa];let ta=ca[X*ia];var ja=ca[X*ia+1];for(let va=1;va<sa;va++){const wa=ca[X*(ia+va)],Aa=ca[X*(ia+va)+1];ja=Aa-ja;aa.coords[X*(ia+va)]=wa-ta;aa.coords[X*(ia+va)+1]=ja;ta=wa;ja=Aa}ia+=sa}return aa};n.generalizeOptimizedGeometry=function(Q,X,aa,ca,ia,ja,qa=aa,sa=ca){Q.lengths.length&&(Q.lengths.length=0);Q.coords.length&&(Q.coords.length=0);if(!X||!X.coords.length)return null;ia=U[ia];const {coords:ta,lengths:va}=
X;X=k(aa,ca);const wa=k(aa&&qa,ca&&sa);aa=m(aa,ca,qa,sa);if(!va.length)return aa(Q.coords,ta,0,0,ta[0],ta[1]),Q.lengths.length&&(Q.lengths.length=0),Q.coords.length=X,Q;ca=0;ja*=ja;for(const Aa of va){if(Aa<ia){ca+=Aa*X;continue}qa=Q.coords.length/wa;sa=ca;const Ca=ca+(Aa-1)*X;aa(Q.coords,ta,Q.coords.length,sa,ta[sa],ta[sa+1]);Z(Q.coords,ta,X,ja,aa,sa,Ca);aa(Q.coords,ta,Q.coords.length,Ca,ta[Ca],ta[Ca+1]);sa=Q.coords.length/wa-qa;sa>=ia?Q.lengths.push(sa):Q.coords.length=qa*wa;ca+=Aa*X}return Q.coords.length?
Q:null};n.getBoundsOptimizedGeometry=function(Q,X,aa,ca){if(!X||!X.coords||!X.coords.length)return null;aa=k(aa,ca);let ia=ca=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,qa=Number.NEGATIVE_INFINITY;if(X&&X.coords){X=X.coords;for(let sa=0;sa<X.length;sa+=aa){const ta=X[sa],va=X[sa+1];ca=Math.min(ca,ta);ja=Math.max(ja,ta);ia=Math.min(ia,va);qa=Math.max(qa,va)}}Q[0]=ca;Q[1]=ia;Q[2]=ja;Q[3]=qa;return Q};n.getQuantizedArea=function(Q,X){const {coords:aa,lengths:ca}=Q;let ia=Q=0;for(let ja=0;ja<
ca.length;ja++)ia+=ea(aa,Q,ca[ja],X),Q+=ja;return Math.abs(ia)};n.getQuantizedBoundsOptimizedGeometry=function(Q,X,aa,ca){aa=k(aa,ca);const {lengths:ia,coords:ja}=X;ca=X=Number.POSITIVE_INFINITY;let qa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,ta=0;for(const va of ia){let wa=ja[ta],Aa=ja[ta+1];X=Math.min(wa,X);ca=Math.min(Aa,ca);qa=Math.max(wa,qa);sa=Math.max(Aa,sa);ta+=aa;for(let Ca=1;Ca<va;Ca++,ta+=aa){const Da=ja[ta],Fa=ja[ta+1];wa+=Da;Aa+=Fa;0>Da&&(X=Math.min(X,wa));0<Da&&(qa=Math.max(qa,
wa));0>Fa?ca=Math.min(ca,Aa):0<Fa&&(sa=Math.max(sa,Aa))}}Q[0]=X;Q[1]=ca;Q[2]=qa;Q[3]=sa;return Q};n.getSignedQuantizedRingArea=ea;n.quantizeOptimizedFeatureSet=function(Q,X){const {geometryType:aa,features:ca,hasM:ia,hasZ:ja}=X;if(!Q)return X;for(let qa=0;qa<ca.length;qa++){const sa=ca[qa],ta=sa.weakClone();ta.geometry=new f;W(ta.geometry,sa.geometry,ia,ja,aa,Q);sa.centroid&&(ta.centroid=new f,W(ta.centroid,sa.centroid,ia,ja,"esriGeometryPoint",Q));ca[qa]=ta}X.transform=Q;return X};n.quantizeOptimizedGeometry=
W;n.quantizeX=c;n.quantizeY=e;n.removeCollinearVectices=function(Q,X,aa,ca,ia){if(!X||!X.coords||!X.coords.length)return null;aa=U[aa];const {coords:ja,lengths:qa}=X;X=m(ca,ia,ca,ia);ca=k(ca,ia);let sa=ia=0,ta=0,va=0;for(const Ca of qa){sa=va;X(Q.coords,ja,sa,ia,ja[ia],ja[ia+1]);ia+=ca;var wa=ja[ia];let Da=ja[ia+1],Fa=wa,Ha=Da;var Aa=Da/wa;sa+=ca;X(Q.coords,ja,sa,ia,Fa,Ha);ia+=ca;for(let Ka=2;Ka<Ca;Ka++){wa=ja[ia];Da=ja[ia+1];const Ia=Da/wa,Ja=Aa===Ia||!isFinite(Aa)&&!isFinite(Ia);Aa=Ja&&isFinite(Ia)?
0<=Aa&&0<=Ia||0>=Aa&&0>=Ia:0<=Ha&&0<=Da||0>=Ha&&0>=Da;Ja&&Aa?(Fa+=wa,Ha+=Da):(Fa=wa,Ha=Da,sa+=ca);X(Q.coords,ja,sa,ia,Fa,Ha);ia+=ca;Aa=Ia}sa+=ca;wa=(sa-va)/ca;wa>=aa&&(Q.lengths[ta]=wa,va=sa,ta++)}Q.coords.length>va&&(Q.coords.length=va);Q.lengths.length>ta&&(Q.lengths.length=ta);return Q.coords.length&&Q.lengths.length?Q:null};n.removeZMValues=function(Q,X,aa,ca,ia,ja){const qa=k(aa,ca);aa=m(aa,ca,ia,ja);ca=X.coords;Q.coords.length=0;Q.lengths.length=0;Q.lengths.push(...X.lengths);for(X=0;X<ca.length;X+=
qa)aa(Q.coords,ca,Q.coords.length,X,ca[X],ca[X+1]);return Q};n.unquantizeOptimizedFeatureSet=function(Q){const {transform:X,features:aa,hasM:ca,hasZ:ia}=Q;if(!X)return Q;for(const ja of aa)ja.geometry&&la(ja.geometry,ja.geometry,ca,ia,X),ja.centroid&&la(ja.centroid,ja.centroid,ca,ia,X);Q.transform=null;return Q};n.unquantizeOptimizedGeometry=la;n.unquantizeX=q;n.unquantizeY=d;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(n){return function(){function l(p=null,z={},y,w){this.displayId=0;this.geohashIndexed=!1;this.geohashY=this.geohashX=0;this.geometry=p;z&&(this.attributes=z);y&&(this.centroid=y);null!=w&&(this.objectId=w)}l.prototype.weakClone=function(){const p=new l(this.geometry,this.attributes,this.centroid,this.objectId);p.displayId=this.displayId;p.geohashIndexed=this.geohashIndexed;p.geohashX=this.geohashX;p.geohashY=this.geohashY;return p};n._createClass(l,[{key:"hasGeometry",get:function(){return!(!this.geometry||
!this.geometry.coords||!this.geometry.coords.length)}}]);return l}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function n(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}n.prototype.weakClone=
function(){const l=new n;l.objectIdFieldName=this.objectIdFieldName;l.globalIdFieldName=this.globalIdFieldName;l.geohashFieldName=this.geohashFieldName;l.geometryProperties=this.geometryProperties;l.geometryType=this.geometryType;l.spatialReference=this.spatialReference;l.hasZ=this.hasZ;l.hasM=this.hasM;l.features=this.features;l.fields=this.fields;l.transform=this.transform;l.exceededTransferLimit=this.exceededTransferLimit;l.uniqueIdField=this.uniqueIdField;l.queryGeometry=this.queryGeometry;l.queryGeometryType=
this.queryGeometryType;return l};return n}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function l(z=[],y=[],w=!1){this.lengths=null!=z?z:[];this.coords=null!=y?y:[];this.hasIndeterminateRingOrder=w}var p=l.prototype;p.forEachVertex=function(z){let y=0;this.lengths.length||z(this.coords[0],this.coords[1]);for(let w=0;w<this.lengths.length;w++){const f=this.lengths[w];for(let k=0;k<f;k++)z(this.coords[2*(k+
y)],this.coords[2*(k+y)+1]);y+=f}};p.clone=function(){return new l(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};n._createClass(l,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return l}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function n(p){this.fields=p;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(p){var z=[];for(const y of p)if(p=y&&y.name){const w=p.toLowerCase().trim();this._fieldsMap.set(p,
y);this._fieldsMap.set(w,y);z.push(w);if("date"===y.type||"esriFieldTypeDate"===y.type)this.dateFields.push(y),this._dateFieldsSet.add(y)}z.sort();this.uid=z.join(",")}}var l=n.prototype;l.destroy=function(){this._fieldsMap.clear()};l.has=function(p){return null!=this.get(p)};l.get=function(p){return null!=p?this._fieldsMap.get(p)||this._fieldsMap.get(p.toLowerCase().trim()):void 0};l.isDateField=function(p){return this._dateFieldsSet.has(this.get(p))};l.normalizeFieldName=function(p){if(p=this.get(p))return p.name};
return n}()})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../layers/graphics/featureConversionUtils","./FeatureSetReader"],function(n,l,p,z){function y({coords:f,lengths:k}){let m=0;for(const c of k){for(k=1;k<c;k++)f[2*(m+k)]+=f[2*(m+k)-2],f[2*(m+k)+1]+=f[2*(m+k)-1];m+=c}}let w=function(f){function k(c,e,q){c=f.call(this,c)||this;c._featureIndex=-1;c._dateFields=new Set;c._geometryType=q;
c._features=e;return c}l._inheritsLoose(k,f);k.fromFeatures=function(c,e,q){q=p.convertFromFeatures([],c,e,!1,!1,q);for(let d=0;d<q.length;d++)q[d].displayId=c[d].displayId;return k.fromOptimizedFeatures(q,e)};k.fromFeatureSet=function(c,e){c=p.convertFromFeatureSet(c,e);return k.fromOptimizedFeatureSet(c)};k.fromOptimizedFeatureSet=function(c){const {features:e,geometryType:q}=c,d=k.fromOptimizedFeatures(e,q);d._exceededTransferLimit=c.exceededTransferLimit;d._transform=c.transform;for(const g of c.fields)"esriFieldTypeDate"===
g.type&&d._dateFields.add(g.name);return d};k.fromOptimizedFeatures=function(c,e,q){const d=z.FeatureSetReader.createInstance();c=new k(d,c,e);c._transform=q;return c};var m=k.prototype;m.getApproximateSize=function(){return this._features.length};m.getCursor=function(){return this.copy()};m.getQuantizationTransform=function(){return this._transform};m.getAttributeHash=function(){let c="";for(const e in this._current.attributes)c+=this._current.attributes[e];return c};m.getIndex=function(){return this._featureIndex};
m.setIndex=function(c){this._featureIndex=c};m.getObjectId=function(){return this._current.objectId};m.getDisplayId=function(){return this._current.displayId};m.setDisplayId=function(c){this._current.displayId=c};m.getGroupId=function(){return this._current.groupId};m.setGroupId=function(c){this._current.groupId=c};m.copy=function(){const c=new k(this.instance,this._features,this.geometryType);this.copyInto(c);return c};m.next=function(){if(!this._hasFilter)return++this._featureIndex<this._features.length;
for(;++this._featureIndex<this._features.length&&!this._passesFilter(););return this._featureIndex<this._features.length};m.readLegacyFeature=function(){return p.convertToFeature(this._current,this.geometryType,this.hasZ,this.hasM)};m.readOptimizedFeature=function(){return this._current};m.readLegacyPointGeometry=function(){const c=this.readGeometry();return c?{x:c.coords[0],y:c.coords[1]}:null};m.readLegacyGeometry=function(){const c=this.readGeometry();return p.convertToGeometry(c,this.geometryType,
this.hasZ,this.hasM)};m.readLegacyCentroid=function(){const c=this.readCentroid();return c?{x:c.coords[0],y:c.coords[1]}:null};m.readGeometryArea=function(){return p.getQuantizedArea(this._current.geometry,2)};m.readUnquantizedGeometry=function(){var c=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!c)return c;c=c.clone();y(c);return c};m.readHydratedGeometry=function(){var c=this._current.geometry;if(!c)return null;c=c.clone();p.unquantizeOptimizedGeometry(c,c,this.hasZ,this.hasM,
this._transform);return c};m.getXHydrate=function(){const c=this._current.geometry.coords[0]+this._tx,e=this.getQuantizationTransform();return c*e.scale[0]+e.translate[0]};m.getYHydrate=function(){const c=this._current.geometry.coords[1]+this._ty,e=this.getQuantizationTransform();return e.translate[1]-c*e.scale[1]};m.readGeometry=function(){if(!this._current.hasGeometry)return null;const c=this._current.geometry.clone();if(c.isPoint)return c.coords[0]+=this._tx,c.coords[1]+=this._ty,c;let e=0;for(const q of c.lengths)c.coords[2*
e]+=this._tx,c.coords[2*e+1]+=this._ty,e+=q;return c};m.readCentroid=function(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){var c=this._computeCentroid();if(!c)return null;c.coords[0]-=this._tx;c.coords[1]-=this._ty;this._current.centroid=c}c=this._current.centroid.clone();c.coords[0]+=this._tx;c.coords[1]+=this._ty;return c};m._readAttribute=function(c,e){const q=this._current.attributes[c];if(void 0!==q)return e&&this._dateFields.has(c)?new Date(q):q;e=this.readAttributes();
c=c.toLocaleLowerCase().trim();for(const d in e)if(d.toLocaleLowerCase().trim()===c)return c=this._current.attributes[d],this._dateFields.has(d)?new Date(c):c};m.copyInto=function(c){f.prototype.copyInto.call(this,c);c._featureIndex=this._featureIndex;c._transform=this._transform;c._dateFields=this._dateFields};m._readAttributes=function(){return this._current.attributes};m._passesFilter=function(){if(!this._hasFilter)return!0;var c=0;let e=0;switch(this.geometryType){case "esriGeometryPoint":c=this._current.geometry;
if(!c)return!1;[c,e]=c.coords;break;case "esriGeometryPolygon":c=this.readCentroid();if(!c)return!1;[c,e]=c.coords;c-=this._tx;e-=this._ty;break;default:return!1}return c>=this._xmin&&c<=this._xmax&&e>=this._ymin&&e<=this._ymax?!0:!1};l._createClass(k,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+
1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return k}(z.FeatureSetReader);n.FeatureSetReaderJSON=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../geometry/support/jsonUtils ../../../../../geometry ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/centroid".split(" "),
function(n,l,p,z,y,w,f){let k=0;z=function(){function m(e){this.type="FeatureSetReader";this.seen=!1;this._ty=this._tx=this.instance=0;this._xmin=-1;this._ymax=this._ymin=this._xmax=0;this._joined=[];this.instance=e}m.createInstance=function(){k++;return k=65535<k?0:k};var c=m.prototype;c.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");};c.getStorage=function(){return this._storage};c.getComputedNumeric=function(e){return this.getComputedNumericAtIndex(0)};
c.setComputedNumeric=function(e,q){return this.setComputedNumericAtIndex(q,0)};c.getComputedString=function(e){return this.getComputedStringAtIndex(0)};c.setComputedString=function(e,q){return this.setComputedStringAtIndex(0,q)};c.getComputedNumericAtIndex=function(e){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),e)};c.setComputedNumericAtIndex=function(e,q){this._storage.setComputedNumericAtIndex(this.getDisplayId(),e,q)};c.getComputedStringAtIndex=function(e){return this._storage.getComputedStringAtIndex(this.getDisplayId(),
e)};c.setComputedStringAtIndex=function(e,q){return this._storage.setComputedStringAtIndex(this.getDisplayId(),e,q)};c.transform=function(e,q){const d=this.copy();d._tx=e;d._ty=q;return d};c.extent=function(e,q,d,g){const b=this.copy();b._xmin=e;b._xmax=d;b._ymin=q;b._ymax=g;return b};c.hasFilter=function(){return this._hasFilter};c.readAttribute=function(e,q=!1){var d=this._readAttribute(e,q);if(void 0!==d)return d;for(const g of this._joined)if(g.setIndex(this.getIndex()),d=g._readAttribute(e,q),
void 0!==d)return d};c.readAttributes=function(){return this._readAttributes()};c.joinAttributes=function(e){this._joined.push(e)};c.readArcadeFeature=function(){return this};c.geometry=function(){var e=this.readHydratedGeometry();e=w.convertToGeometry(e,this.geometryType,this.hasZ,this.hasM);e=p.fromJSON(e);e.spatialReference=this._arcadeSpatialReference;return e};c.field=function(e){return this.readAttribute(e,!0)};c.hasField=function(e){return!0};c.setField=function(e,q){};c.keys=function(){return[]};
c.castToText=function(){return""};c._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const e=this.readUnquantizedGeometry();if(!e||e.hasIndeterminateRingOrder)return null;const q=this.getQuantizationTransform();return f.getCentroidOptimizedGeometry(new y,e,this.hasM,this.hasZ,q)};c.copyInto=function(e){e.seen=this.seen;e._storage=this._storage;e._arcadeSpatialReference=this._arcadeSpatialReference;e._joined=this._joined;e._tx=this._tx;e._ty=this._ty;e._xmin=this._xmin;
e._xmax=this._xmax;e._ymin=this._ymin;e._ymax=this._ymax};l._createClass(m,[{key:"_hasFilter",get:function(){return-1!==this._xmin}}]);return m}();n.FeatureSetReader=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(n){function l(z,y,w,f,k,m,c=1){m=k?m?4:3:m?3:2;let e=w,q=w+m,d=0,g=0,b=w=0,a=0;for(let h=0,r=f-1;h<r;h++,e+=m,q+=m){f=y[e];const t=y[e+1],v=y[e+2],x=y[q],u=y[q+1],D=y[q+2];let B=f*u-x*t;b+=B;d+=(f+x)*B;g+=(t+u)*
B;k&&(B=f*D-x*v,w+=(v+D)*B,a+=B);f<z[0]&&(z[0]=f);f>z[1]&&(z[1]=f);t<z[2]&&(z[2]=t);t>z[3]&&(z[3]=t);k&&(v<z[4]&&(z[4]=v),v>z[5]&&(z[5]=v))}0<b*c&&(b*=-1);0<a*c&&(a*=-1);if(!b)return null;z=[d,g,.5*b];k&&(z[3]=w,z[4]=.5*a);return z}function p(z,y,w,f,k){k=f?k?4:3:k?3:2;let m=y,c=y+k,e=0,q=0,d=0,g=0;for(let r=0,t=w-1;r<t;r++,m+=k,c+=k){var b=z[m];const v=z[m+1],x=z[m+2],u=z[c],D=z[c+1],B=z[c+2];if(f){{var a=u-b;var h=D-v;const A=B-x;a=Math.sqrt(a*a+h*h+A*A)}}else a=u-b,h=D-v,a=Math.sqrt(a*a+h*h);a&&
(e+=a,f?(b=[b+.5*(u-b),v+.5*(D-v),x+.5*(B-x)],q+=a*b[0],d+=a*b[1],g+=a*b[2]):(b=[b+.5*(u-b),v+.5*(D-v)],q+=a*b[0],d+=a*b[1]))}return 0<e?f?[q/e,d/e,g/e]:[q/e,d/e]:0<w?f?[z[y],z[y+1],z[y+2]]:[z[y],z[y+1]]:null}n.getCentroidOptimizedGeometry=function(z,y,w,f,k){if(!y||!y.lengths.length)return null;const m="upperLeft"===(null==k?void 0:k.originPosition)?-1:1;z.lengths.length&&(z.lengths.length=0);z.coords.length&&(z.coords.length=0);k=z.coords;const c=[],e=w?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:q,coords:d}=y,g=w?f?4:3:f?3:2;let b=0;for(var a of q){const h=l(e,d,b,a,w,f,m);h&&c.push(h);b+=a*g}c.sort((h,r)=>{let t=m*h[2]-m*r[2];0===t&&w&&(t=h[4]-r[4]);return t});c.length&&(a=6*c[0][2],k[0]=c[0][0]/a,k[1]=c[0][1]/a,w&&(a=6*c[0][4],k[2]=0!==a?c[0][3]/a:0),k[0]<e[0]||k[0]>e[1]||k[1]<
e[2]||k[1]>e[3]||w&&(k[2]<e[4]||k[2]>e[5]))&&(k.length=0);if(!k.length)if(y=y.lengths[0]?p(d,0,q[0],w,f):null)k[0]=y[0],k[1]=y[1],w&&2<y.length&&(k[2]=y[2]);else return null;return z};n.lineCentroid=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/scheduling ../../core/Queue".split(" "),function(n,l,p,z,y,w){let f=function(m,c){this.item=m;
this.controller=c;this.promise=null},k=function(){function m(e){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;e.concurrency&&(this.concurrency=e.concurrency);this._queue=new w(e.peeker);this.process=e.process;const q=e.scheduler;e.task&&p.isSome(q)&&(this._task=q.registerTask(e.task,d=>this.update(d),()=>this.needsUpdate()))}var c=m.prototype;c.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),
this._schedule=null);this._task&&(this._task.remove(),this._task=null)};c.abort=function(e){(e=this._controllers.get(e))&&e.abort()};c.clear=function(){this._queue.clear();const e=[];this._controllers.forEach(q=>e.push(q));this._controllers.clear();e.forEach(q=>q.abort());this._processingItems.clear();this._cancelNext()};c.forEach=function(e){this._deferreds.forEach((q,d)=>e(d))};c.get=function(e){return(e=this._deferreds.get(e))?e.promise:void 0};c.isOngoing=function(e){return this._processingItems.has(e)};
c.has=function(e){return this._deferreds.has(e)};c.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};c.push=function(e,q){const d=this.get(e);if(d)return d;let g;const b=z.createAbortController();let a=null;q&&(a=z.onAbort(q,()=>b.abort()));const h=()=>{r.remove();p.isSome(a)&&a.remove();this._deferreds.delete(e);this._controllers.delete(e);this._queue.remove(e);this._processingItems.delete(e);this._scheduleNext()},r=z.onAbortOrThrow(b.signal,()=>{const t=this._processingItems.get(e);
t&&t.controller.abort();h();g.reject(z.createAbortError())});g=z.createDeferred();this._deferreds.set(e,g);this._controllers.set(e,b);g.promise.then(h,h);this._queue.push(e);this._scheduleNext();return g.promise};c.reset=function(){const e=[];this._processingItems.forEach(q=>e.push(q));this._processingItems.clear();for(const q of e)this._queue.push(q.item),q.controller.abort();this._scheduleNext()};c.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};c.takeAll=function(){const e=
[];for(;this._queue.length;)e.push(this._queue.pop());this.clear();return e};c.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};c.update=function(e){for(;!e.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()};c._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=y.schedule(()=>{this._schedule=null;this._next()}))};c._next=function(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};c._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};c._processResult=function(e,q){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(q))};c._processError=function(e,q){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(q))};c._canProcessFulfillment=function(e){return this._deferreds.get(e.item)&&
this._processingItems.get(e.item)===e?!0:!1};c._process=function(e){if(!p.isNone(e)){var q=z.createAbortController(),d=new f(e,q);this._processingItems.set(e,d);try{var g=this.process(e,q.signal)}catch(b){this._processError(d,b)}g&&"function"===typeof g.then?(d.promise=g,g.then(b=>this._processResult(d,b),b=>this._processError(d,b))):this._processResult(d,g)}};l._createClass(m,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"test",get:function(){return{update:e=>
this.update(e)}}}]);return m}();n.QueueProcessor=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Queue":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(n,l){return function(){function p(y=w=>w.values().next().value){this._peeker=y;this._items=new Set}var z=p.prototype;z.clear=function(){this._items.clear()};z.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};z.push=function(y){this.contains(y)||this._items.add(y)};z.contains=function(y){return this._items.has(y)};
z.pop=function(){if(0!==this.length){var y=this.peek();this._items.delete(l.assumeNonNull(y));return y}};z.remove=function(y){this._items.delete(y)};z.filter=function(y){this._items.forEach(w=>{y(w)||this._items.delete(w)});return this};n._createClass(p,[{key:"length",get:function(){return this._items.size}}]);return p}()})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../core/mathUtils ../../../../../core/accessorSupport/diffUtils ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){function a(u,D){return B=>D(u(B))}const h=w.getLogger("esri.views.layers.2d.features.support.AttributeStore"),r=g.createDebugLogger(g.DEBUG_ATTR_UPDATES,h);var t=z("esri-shared-array-buffer"),v=z("esri-atomics");let x=function(){function u(B,A,C,E){this.size=0;this.texelSize=4;const {pixelType:F,layout:G,textureOnly:J}=E;this.textureOnly=J||!1;this.pixelType=F;this._ctype=A;this.layout=G;this._resetRange();this._shared=B;this.size=C;J||(this.data=this._initData(F,
C,B,A))}var D=u.prototype;D.unsetComponentAllTexels=function(B,A){const C=y.unwrap(this.data);for(let E=0;E<this.size*this.size;E++)C[E*this.texelSize+B]&=~A;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};D.setComponentAllTexels=function(B,A){const C=y.unwrap(this.data);for(let E=0;E<this.size*this.size;E++)C[E*this.texelSize+B]|=255&A;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};D.setComponent=function(B,A,C){const E=y.unwrap(this.data);for(const F of C)E[F*this.texelSize+B]|=A,
this.dirtyStart=Math.min(this.dirtyStart,F),this.dirtyEnd=Math.max(this.dirtyEnd,F)};D.setComponentTexel=function(B,A,C){y.unwrap(this.data)[C*this.texelSize+B]|=A;this.dirtyStart=Math.min(this.dirtyStart,C);this.dirtyEnd=Math.max(this.dirtyEnd,C)};D.unsetComponentTexel=function(B,A,C){y.unwrap(this.data)[C*this.texelSize+B]&=~A;this.dirtyStart=Math.min(this.dirtyStart,C);this.dirtyEnd=Math.max(this.dirtyEnd,C)};D.getData=function(B,A){B&=2147483647;return y.unwrap(this.data)[B*this.texelSize+A]};
D.setData=function(B,A,C){B&=2147483647;0===(this.layout&1<<A)?h.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[B*this.texelSize+A]=C,this.dirtyStart=Math.min(this.dirtyStart,B),this.dirtyEnd=Math.max(this.dirtyEnd,B))};D.lock=function(){5121===this.pixelType&&this._shared&&v&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};D.unlock=function(){5121===this.pixelType&&this._shared&&v&&"local"!==this._ctype&&Atomics.store(this.data,0,0)};D.expand=
function(B){this.size=B;if(!this.textureOnly){B=this._initData(this.pixelType,B,this._shared,this._ctype);const A=y.unwrap(this.data);B.set(A);this.data=B}};D.toMessage=function(){const B=this.dirtyStart,A=this.dirtyEnd;var C=this.texelSize;if(B>A)return null;this._resetRange();const E=!this._shared&&"local"!==this._ctype,F=this.pixelType,G=this.layout,J=y.unwrap(this.data);if(!J.slice){if(!E)return{start:B,end:A,data:null,pixelType:F,layout:G};C=new (d.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,
B*C,(A+1)*C));return{start:B,end:A,data:C,pixelType:F,layout:G}}C=E&&J.slice(B*C,(A+1)*C)||null;return{start:B,end:A,data:C,pixelType:F,layout:G}};D._initData=function(B,A,C,E){C=C&&"local"!==E?SharedArrayBuffer:ArrayBuffer;B=d.getPixelArrayCtor(B);A=new B(new C(A*A*4*B.BYTES_PER_ELEMENT));for(B=0;B<A.length;B+=4)A[B+1]=255;return A};D._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};p._createClass(u,[{key:"buffer",get:function(){return y.andThen(this.data,B=>B.buffer)}}]);return u}();
w=function(){function u(B,A){this._client=B;this.config=A;this._attributeComputeMap=new Map;this._blocks=[];this._filters=Array(q.MAX_FILTERS);this._targetType=0;this._abortController=k.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idsToHighlight=new Set;B=A.supportsTextureFloat?5126:5121;r(`Creating AttributeStore ${t?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:B,layout:15},{pixelType:B,
layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var D=u.prototype;D.destroy=function(){this._abortController.abort()};D.update=function(B,A){this.config=A;A=A.schema.processors[0].storage;const C=c.diff(this._schema,A);if(B.targets.feature||B.targets.aggregate)B.storage.data=!0;if(C&&(z("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",C),B.storage.data=!0,this._schema=A,this._attributeComputeMap.clear(),!y.isNone(A))){switch(A.target){case "feature":this._targetType=
0;break;case "aggregate":this._targetType=1}for(const E of A.mapping)this._bindAttribute(E)}};D.onTileData=function(B,A){if(!y.isNone(A.addOrUpdate))for(B=A.addOrUpdate.getCursor();B.next();)A=B.getDisplayId(),this.setAttributeData(A,B)};D.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=k.createAbortController()};D.setHighlight=async function(B,A){const C=this._getBlock(0);A=A.map(E=>E&2147483647);C.lock();C.unsetComponentAllTexels(0,
1);C.setComponent(0,1,A);C.unlock();this._idsToHighlight.clear();for(const E of B)this._idsToHighlight.add(E);await this.sendUpdates()};D.updateFilters=async function(B,A){const {config:C,service:E,spatialReference:F}=A;({filters:A}=C);A=A.map((G,J)=>this._updateFilter(G,J,E,F));(await k.all(A)).some(G=>G)&&(B.storage.filters=!0,z("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))};D.setData=function(B,A,C,E){this._ensureSizeForTexel(B&2147483647);this._getBlock(A).setData(B,
C,E)};D.getData=function(B,A,C){return this._getBlock(A).getData(B,C)};D.getHighlightFlag=function(B){return this._idsToHighlight.has(B)?q.HIGHLIGHT_FLAG:0};D.unsetAttributeData=function(B){B&=2147483647;this._getBlock(0).setData(B,0,0)};D.setAttributeData=function(B,A){const C=B&2147483647;this._ensureSizeForTexel(C);this._getBlock(0).setData(C,0,this.getFilterFlags(A));if(this._targetType===(B&2147483648)>>>31){B=this._attributeComputeMap;var E=this.config.supportsTextureFloat?1:2;B.size&&B.forEach((F,
G)=>{const J=G*E%4;G=this._getBlock(Math.floor(G*E/4)+q.ATTRIBUTE_DATA_VV);F=F(A);if(this.config.supportsTextureFloat)G.setData(C,J,F);else if(F===q.NAN_MAGIC_NUMBER)G.setData(C,J,255),G.setData(C,J+1,255);else{F=m.clamp(Math.round(F),-32767,32766)+32768;const K=(F&65280)>>8;G.setData(C,J,F&255);G.setData(C,J+1,K)}})}};D.sendUpdates=function(){if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=k.createResolver(),this._nextUpdate.promise;const B={blocks:this._blocks.map(A=>
y.isSome(A)?A.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var A=()=>{this._currUpdate=null;if(this._nextUpdate){const C=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>C.resolve())}};A=this._client.update(B,this._signal).then(A).catch(A);this._client.render(this._signal);return A}).catch(A=>{if(k.isAbortError(A))return this._createResourcesPromise=null,this._createResources();h.error(new f("mapview-attribute-store","Encountered an error during client update",
A));return k.resolve()})};D._ensureSizeForTexel=function(B){for(;B>=this._size*this._size&&!this._expand(););};D._bindAttribute=function(B){function A(){return B.normalizationField?F=>{const G=F.readAttribute(B.normalizationField);return G?F.readAttribute(B.field)/G:null}:F=>F.readAttribute(B.field)}function C(){B.normalizationField&&h.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");return F=>F.getComputedNumericAtIndex(B.fieldIndex)}
let E;if(null!=B.fieldIndex)E=C();else if(B.field)E=A();else return;B.valueRepresentation&&(E=a(E,F=>b.getVisualVariableSizeValueRepresentationRatio(F,B.valueRepresentation)));this._attributeComputeMap.set(B.binding,a(E,F=>null===F||isNaN(F)||Infinity===F?q.NAN_MAGIC_NUMBER:F))};D._createResources=function(){if(y.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(q.ATTRIBUTE_DATA_ANIMATION);r("Initializing AttributeStore");var B={shared:t&&"local"!==this._client.type,
size:this._size,blocks:y.mapMany(this._blocks,A=>({textureOnly:A.textureOnly,buffer:A.buffer,pixelType:A.pixelType}))};this._createResourcesPromise=B=this._client.initialize(B,this._signal).catch(A=>{k.isAbortError(A)?this._createResourcesPromise=null:h.error(new f("mapview-attribute-store","Encountered an error during client initialization",A))});B.then(()=>y.isNone(this._createResourcesPromise)?this._createResources():void 0);return B};D._getBlock=function(B){var A=this._blocks[B];if(y.isSome(A))return A;
r(`Initializing AttributeBlock at index ${B}`);A=new x(t,this._client.type,this._size,this._blockDescriptors[B]);this._blocks[B]=A;this._createResourcesPromise=null;return A};D._expand=function(){if(this._size<this.config.maxTextureSize){const B=this._size<<=1;r("Expanding block size to",B,this._blocks);y.forEachSome(this._blocks,A=>A.expand(B));this._createResourcesPromise=null;this._size=B;return 0}h.error(new f("mapview-limitations","Maximum number of onscreen features exceeded."));return-1};D._updateFilter=
async function(B,A,C,E){const F=this._filters[A],G=y.isSome(F)&&F.hash;if(!F&&!B||G===JSON.stringify(B))return!1;if(y.isNone(B))return B=1<<A+1,C=this._getBlock(0),this._filters[A]=null,C.setComponentAllTexels(0,B),this.sendUpdates(),!0;await (await this._getFilter(A,C)).update(B,E);return!0};D._getFilter=async function(B,A){var C=this._filters[B];if(y.isSome(C))return C;({default:C}=await new Promise(function(E,F){n(["../../../../../layers/graphics/data/FeatureFilter"],function(G){E(Object.freeze({__proto__:null,
"default":G}))},F)}));A=new C({geometryType:A.geometryType,hasM:!1,hasZ:!1,timeInfo:A.timeInfo,fieldsIndex:new e(A.fields)});return this._filters[B]=A};D.isVisible=function(B){return!!(this._getBlock(0).getData(B,0)&2)};D.getFilterFlags=function(B){let A=0;var C=1===(B.getDisplayId()&2147483648)>>>31?254:255;for(let F=0;F<this._filters.length;F++){var E=this._filters[F];E=!(C&1<<F)||y.isNone(E)||E.check(B);A|=(E?1:0)<<F}C=0;this._idsToHighlight.size&&(B=B.getObjectId(),C=this.getHighlightFlag(B));
return A<<1|C};p._createClass(u,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}}]);return u}();l.DISPLAY_ID_TYPE_AGGREGATE=1;l.DISPLAY_ID_TYPE_FEATURE=0;l.default=w;l.isAggregateId=function(u){return 1===(u&2147483648)>>>31};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/accessorSupport/diffUtils":function(){define(["exports","../maybe","./utils","../Accessor","../Collection"],function(n,l,p,z,y){function w(g){return g instanceof
y?Object.keys(g.items):g instanceof z?p.getProperties(g).keys():g?Object.keys(g):[]}function f(g,b){return g instanceof y?g.items[b]:g[b]}function k(g,b){return Array.isArray(g)&&Array.isArray(b)?g.length!==b.length:!1}function m(g){return g?g.declaredClass:null}function c(g,b){const a=g.diff;if(a&&"function"===typeof a)return a(g,b);const h=w(g),r=w(b);if(0!==h.length||0!==r.length){if(!h.length||!r.length||k(g,b))return{type:"complete",oldValue:g,newValue:b};var t=r.filter(u=>-1===h.indexOf(u)),
v=h.filter(u=>-1===r.indexOf(u));v=h.filter(u=>-1<r.indexOf(u)&&f(g,u)!==f(b,u)).concat(t,v).sort();if((t=m(g))&&-1<d.indexOf(t)&&v.length)return{type:"complete",oldValue:g,newValue:b};var x;t=g instanceof z&&b instanceof z;for(const u of v){v=f(g,u);const D=f(b,u);!(t||"function"!==typeof v&&"function"!==typeof D)||v===D||null==v&&null==D||(v=a&&a[u]&&"function"===typeof a[u]?a[u](v,D):"object"===typeof v&&"object"===typeof D&&m(v)===m(D)?c(v,D):{type:"complete",oldValue:v,newValue:D},l.isSome(v)&&
(l.isSome(x)?x.diff[u]=v:x={type:"partial",diff:{[u]:v}}))}return x}}function e(g,b){if(l.isNone(g))return!1;b=b.split(".");for(const a of b){if("complete"===g.type)break;if("partial"===g.type){if(g=g.diff[a],!g)return!1}else return!1}return!0}function q(g){if(l.isNone(g))return!0;switch(g.type){case "complete":return!1;case "collection":for(const b of g.added)if(!q(b))return!1;for(const b of g.removed)if(!q(b))return!1;for(const b of g.changed)if(!q(b))return!1;return!0;case "partial":for(const b in g.diff)if(!q(g.diff[b]))return!1;
return!0}}const d=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];n.diff=function(g,b){if("function"!==typeof g&&"function"!==typeof b&&(g||b))return!g||!b||"object"===typeof g&&"object"===typeof b&&m(g)!==m(b)?{type:"complete",oldValue:g,newValue:b}:c(g,b)};n.hasDiff=e;n.hasDiffAny=function(g,b){for(const a of b)if(e(g,a))return!0;return!1};n.isEmpty=q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Logger ../../../../core/Error ../../../../core/mathUtils ../../../../core/screenUtils ../../../webgl/Program ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../../webgl/Renderbuffer ../../../webgl/FramebufferObject ../../../webgl/ProgramCache ../../../webgl/RenderingContext ../../../webgl/ShaderCompiler ./enums ./color ./SymbolProperties".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){function r(R){const T={};for(const W of R)T[W.name]=W.strideInBytes;return T}function t(R){switch(R){case b.WGLGeometryType.MARKER:return J;case b.WGLGeometryType.FILL:return K;case b.WGLGeometryType.LINE:return L;case b.WGLGeometryType.TEXT:return I;case b.WGLGeometryType.LABEL:return N}}function v(R){switch(R%4){case 0:case 2:return 4;case 1:case 3:return 1}}function x(R){switch(R){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}
function u(R){const T={};for(const W in R){let Z=0;T[W]=R[W].map(la=>{const ea={...la,normalized:la.normalized||!1,divisor:la.divisor||0,offset:Z,stride:0};Z+=la.count*x(la.type);return ea});T[W].forEach(la=>la.stride=Z)}return T}const D=l.getLogger("esri.views.2d.engine.webgl.Utils");l=[{name:"geometry",strideInBytes:32,divisor:0}];w=[{name:"geometry",strideInBytes:32,divisor:0}];f=[{name:"geometry",strideInBytes:12,divisor:0}];m=[{name:"geometry",strideInBytes:36,divisor:0}];c=[{name:"geometry",
strideInBytes:32,divisor:0}];e=[{name:"geometry",strideInBytes:36,divisor:0}];const B=r(l),A=r(w),C=r(f),E=r(m),F=r(c),G=r(e),J=["geometry"],K=["geometry"],L=["geometry"],I=["geometry"],N=["geometry"],P=new Map;n.C_FILL_STRIDE_SPEC=A;n.C_FILL_STRIDE_SPEC_DD=C;n.C_FILL_VERTEX_DEF=w;n.C_FILL_VERTEX_DEF_DD=f;n.C_ICON_STRIDE_SPEC=B;n.C_ICON_VERTEX_DEF=l;n.C_LABEL_STRIDE_SPEC=G;n.C_LABEL_VERTEX_DEF=e;n.C_LINE_STRIDE_SPEC=E;n.C_LINE_VERTEX_DEF=m;n.C_TEXT_STRIDE_SPEC=F;n.C_TEXT_VERTEX_DEF=c;n.C_VBO_GEOMETRY=
"geometry";n.C_VBO_INFO={["geometry"]:35044};n.C_VBO_PERINSTANCE="per_instance";n.C_VBO_PERINSTANCE_VV="per_instance_vv";n.allocateTypedArrayBuffer=function(R,T){switch(T%4){case 0:case 2:return new Uint32Array(Math.floor(R*T/4));case 1:case 3:return new Uint8Array(R*T)}};n.allocateTypedArrayBufferwithData=function(R,T){switch(T%4){case 0:case 2:return new Uint32Array(R);case 1:case 3:return new Uint8Array(R)}};n.copyMeshData=function(R,T,W,Z,la,ea,O){for(const ka in ea){var U=ea[ka].stride,ba=v(U);
const oa=ea[ka].data,M=W[ka].data,V=U*la.vertexCount/ba,ha=U*R/ba;U=U*la.vertexFrom/ba;for(ba=0;ba<V;++ba)M[ba+ha]=oa[ba+U]}W=la.indexCount;for(ea=0;ea<W;++ea)Z[ea+T]=O[ea+la.indexFrom]-la.vertexFrom+R};n.createGeometryData=function(R,T){const W=[];for(let Z=0;5>Z;++Z){const la=t(Z),ea={};for(const O of la)ea[O]={data:T(Z,O)};W.push({data:R(Z),buffers:ea})}return W};n.createProgramDescriptor=(R,T)=>{if(!P.has(R)){const la=u(T);var W=la;var Z={};for(const ea in W){const O=W[ea];Z[ea]=O.length?O[0].stride:
0}W=Z;Z={};for(const ea in T)for(const O of T[ea])Z[O.name]=O.location;T=Z;P.set(R,{strides:W,bufferLayouts:la,attributes:T})}return P.get(R)};n.createTextureFromTexelData=function(R,T){let W,Z;z.isPowerOfTwo(T.width)&&z.isPowerOfTwo(T.height)?(W=!0,Z=9987):(W=!1,Z=9729);return new k(R,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:W,samplingMode:Z,wrapMode:33071,flipped:!0},T)};n.geometryToMappedGeometry=function(R){return{vertexFrom:void 0,vertexTo:void 0,geometry:R}};
n.getBytes=x;n.getCapType=function(R,T){switch(R){case "butt":return 0;case "round":return T?2:1;case "square":return 2;default:return D.error(new p("mapview-invalid-type",`Cap type ${R} is not a valid option. Defaulting to round`)),1}};n.getJoinType=function(R){switch(R){case "miter":return 2;case "bevel":return 0;case "round":return 1;default:return D.error(new p("mapview-invalid-type",`Join type ${R} is not a valid option. Defaulting to round`)),1}};n.getNamedBuffers=t;n.getPixelArrayCtor=function(R){switch(R){case 5121:return Uint8Array;
case 32819:return Uint16Array;case 5126:return Float32Array;default:D.error(new p("webgl-utils",`Unable to handle type ${R}`))}};n.getPixelBytes=function(R){switch(R){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:D.error(new p("webgl-utils",`Unable to handle type ${R}`))}};n.getStrides=function(R,T){switch(R){case b.WGLGeometryType.MARKER:return B;case b.WGLGeometryType.FILL:return T?C:A;case b.WGLGeometryType.LINE:return E;case b.WGLGeometryType.TEXT:return F;case b.WGLGeometryType.LABEL:return G}};
n.getTextProperties=function(R){return h.TextProperties.pool.acquire(R.color?a.copyAndPremultiply(R.color):[255,255,255,255],R.haloColor?a.copyAndPremultiply(R.haloColor):[255,255,255,255],y.pt2px(R.haloSize),y.pt2px(R.font.size),R.angle*Math.PI/180,R.xoffset/R.font.size,R.yoffset/R.font.size,"left"===R.horizontalAlignment?0:"right"===R.horizontalAlignment?1:.5,"top"===R.verticalAlignment?0:"bottom"===R.verticalAlignment?1:.5)};n.getTransformParams=function(R){const {transform:T,hasZ:W,hasM:Z}=R;
return{transform:T,hasZ:W,hasM:Z}};n.getVVType=function(R){switch(R){case "opacity":return b.VVType.OPACITY;case "color":return b.VVType.COLOR;case "rotation":return b.VVType.ROTATION;case "size":return b.VVType.SIZE;default:return D.error(`Cannot interpret unknown vv: ${R}`),null}};n.isDefined=function(R){return null!=R};n.isNumber=function(R){return"number"===typeof R};n.strideToPackingFactor=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/screenUtils":function(){define(["exports"],
function(n){function l(z){return z?72*z/96:0}const p=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;n.castRenderScreenPointArray=function(z){return z};n.castRenderScreenPointArray3=function(z){return z};n.castScreenPointArray=function(z){return z};n.createRenderScreenPoint=function(z=0,y=0){return{x:z,y}};n.createRenderScreenPointArray=function(z=0,y=0){return[z,y]};n.createRenderScreenPointArray3=function(z=0,y=0,w=0){return[z,y,w]};n.createScreenPoint=function(z=0,y=0){return{x:z,y}};n.createScreenPointArray=
function(z=0,y=0){return[z,y]};n.pt2px=function(z){return z?z/72*96:0};n.px2pt=l;n.screenPointArrayToObject=function(z,y){return y?(y.x=z[0],y.y=z[1],y):{x:z[0],y:z[1]}};n.screenPointObjectToArray=function(z,y){return y?(y[0]=z.x,y[1]=z.y,2<y.length&&(y[2]=0),y):[z.x,z.y]};n.toPt=function(z){if("string"===typeof z){if(p.test(z)){var y=z.match(p),w=Number(y[1]);y=y[3]&&y[3].toLowerCase();z="-"===z.charAt(0);w="px"===y?l(w):w;return z?-w:w}console.warn("screenUtils.toPt: input not recognized!");return null}return z};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/Program":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/maybe","./ShaderTranspiler"],function(n,l,p,z){function y(f,k){if(p.isNone(f)||f.length!==k.length)return!0;for(let m=0;m<f.length;++m)if(f[m]!==k[m])return!0;return!1}let w=0;return function(){function f(m,c,e,q,d={}){this._glName=this._context=null;this._locations={};this.id=w++;this._initialized=!1;this._fShader=this._vShader=null;
this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};m||console.error("RenderingContext isn't initialized!");0===c.length&&console.error("Shaders source should not be empty!");m.instanceCounter.increment(3,this);this._context=m;this._vertexShaderSource=c;this._fragmentShaderSource=e;if(Array.isArray(d))for(const g of d)this._defines[g]=
"1";else this._defines=d;this._locations=q}var k=f.prototype;k.getDefine=function(m){return this._defines[m]};k.dispose=function(){if(this._context){var m=this._context.gl;this._vShader&&(m.deleteShader(this._vShader),this._vShader=null);this._fShader&&(m.deleteShader(this._fShader),this._fShader=null);this._glName&&(m.deleteProgram(this._glName),this._glName=null);this._context.instanceCounter.decrement(3,this);this._context=null}};k.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);
this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var m=this._context.gl,c=m.createProgram();m.attachShader(c,this._vShader);m.attachShader(c,this._fShader);for(const e in this._locations)m.bindAttribLocation(c,this._locations[e],e);m.linkProgram(c);this._glName=c;this._initialized=!0}};k.getUniformLocation=function(m){this.initialize();void 0===this._nameToUniformLocation[m]&&(this._nameToUniformLocation[m]=this._context.gl.getUniformLocation(this._glName,
m));return this._nameToUniformLocation[m]};k.hasUniform=function(m){return null!==this.getUniformLocation(m)};k.getAttribLocation=function(m){this.initialize();void 0===this._nameToAttribLocation[m]&&(this._nameToAttribLocation[m]=this._context.gl.getAttribLocation(this._glName,m));return this._nameToAttribLocation[m]};k.setUniform1i=function(m,c){const e=this._nameToUniform1[m];if(void 0===e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(m),c),this._nameToUniform1[m]=
c};k.setUniform1iv=function(m,c){const e=this._nameToUniform1v[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform1v[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform2iv=function(m,c){const e=this._nameToUniform2[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform2[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform3iv=function(m,c){const e=
this._nameToUniform3[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform3[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform4iv=function(m,c){const e=this._nameToUniform4[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform4[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform1f=function(m,c){const e=this._nameToUniform1[m];if(void 0===
e||c!==e)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(m),c),this._nameToUniform1[m]=c};k.setUniform1fv=function(m,c){const e=this._nameToUniform1v[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform1v[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform2f=function(m,c,e){const q=this._nameToUniform2[m];if(void 0===q||c!==q[0]||e!==q[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(m),
c,e),void 0===q?this._nameToUniform2[m]=[c,e]:(q[0]=c,q[1]=e)};k.setUniform2fv=function(m,c){const e=this._nameToUniform2[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform2[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform3f=function(m,c,e,q){const d=this._nameToUniform3[m];if(void 0===d||c!==d[0]||e!==d[1]||q!==d[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(m),c,e,q),void 0===
d?this._nameToUniform3[m]=[c,e,q]:(d[0]=c,d[1]=e,d[2]=q)};k.setUniform3fv=function(m,c){const e=this._nameToUniform3[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform3[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniform4f=function(m,c,e,q,d){const g=this._nameToUniform4[m];if(void 0===g||c!==g[0]||e!==g[1]||q!==g[2]||d!==g[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(m),c,
e,q,d),void 0===g?this._nameToUniform4[m]=[c,e,q,d]:(g[0]=c,g[1]=e,g[2]=q,g[3]=d)};k.setUniform4fv=function(m,c){const e=this._nameToUniform4[m];y(e,c)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(m),c),void 0===e?this._nameToUniform4[m]=f._arrayCopy(c):f._arrayAssign(c,e))};k.setUniformMatrix3fv=function(m,c,e=!1){const q=this._nameToUniformMatrix3[m];var d=p.isNone(q)?!0:9!==q.length?y(q,c):9!==q.length||q[0]!==c[0]||q[1]!==c[1]||q[2]!==c[2]||q[3]!==c[3]||
q[4]!==c[4]||q[5]!==c[5]||q[6]!==c[6]||q[7]!==c[7]||q[8]!==c[8];d&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(m),e,c),void 0===q?this._nameToUniformMatrix3[m]=f._arrayCopy(c):f._arrayAssign(c,q))};k.setUniformMatrix4fv=function(m,c,e=!1){const q=this._nameToUniformMatrix4[m];var d=p.isNone(q)?!0:16!==q.length?y(q,c):16!==q.length||q[0]!==c[0]||q[1]!==c[1]||q[2]!==c[2]||q[3]!==c[3]||q[4]!==c[4]||q[5]!==c[5]||q[6]!==c[6]||q[7]!==c[7]||q[8]!==c[8]||q[9]!==
c[9]||q[10]!==c[10]||q[11]!==c[11]||q[12]!==c[12]||q[13]!==c[13]||q[14]!==c[14]||q[15]!==c[15];d&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(m),e,c),void 0===q?this._nameToUniformMatrix4[m]=f._arrayCopy(c):f._arrayAssign(c,q))};k.assertCompatibleVertexAttributeLocations=function(m){(m=m.locations===this.locations)||console.error("VertexAttributeLocations are incompatible");return m};f._padToThree=function(m){let c=m.toString();1E3>m&&(c=("  "+m).slice(-3));
return c};k._addLineNumbers=function(m){let c=2;return m.replace(/\n/g,()=>"\n"+f._padToThree(c++)+":")};k._loadShader=function(m){var c=35633===m,e=c?this._vertexShaderSource:this._fragmentShaderSource;let q="";for(const d in this._defines)q+=`#define ${d} ${this._defines[d]}\n`;e=q+e;"webgl2"===this._context.contextVersion&&(e=z.transpileShader(e,c?"vertex":"fragment"));c=this._context.gl;m=c.createShader(m);c.shaderSource(m,e);c.compileShader(m);return m};f._arrayCopy=function(m){const c=[];for(let e=
0;e<m.length;++e)c.push(m[e]);return c};f._arrayAssign=function(m,c){for(let e=0;e<m.length;++e)c[e]=m[e]};n._createClass(f,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}}]);return f}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../chunks/_commonjsHelpers","./reservedWordsGLSL3"],function(n,l,p){function z(){function a(T){T.length&&G.push({type:g[A],data:T,position:L,line:J,column:K})}function h(){F=F.length?
[]:F;if("/"===E&&"*"===C)return L=B+D-1,A=0,E=C,D+1;if("/"===E&&"/"===C)return L=B+D-1,A=1,E=C,D+1;if("#"===C)return A=2,L=B+D,D;if(/\s/.test(C))return A=9,L=B+D,D;I=/\d/.test(C);N=/[^\w_]/.test(C);L=B+D;A=I?4:N?3:9999;return D}function r(){if(("\r"===C||"\n"===C)&&"\\"!==E)return a(F.join("")),A=999,D;F.push(C);E=C;return D+1}function t(){if("."===E&&/\d/.test(C))return A=5,D;if("/"===E&&"*"===C)return A=0,D;if("/"===E&&"/"===C)return A=1,D;if("."===C&&F.length){for(;v(F););A=5;return D}if(";"===
C||")"===C||"("===C){if(F.length)for(;v(F););a(C);A=999;return D+1}var T=2===F.length&&"\x3d"!==C;if(/[\w_\d\s]/.test(C)||T){for(;v(F););A=999;return D}F.push(C);E=C;return D+1}function v(T){var W=0;do{var Z=q.indexOf(T.slice(0,T.length+W).join(""));var la=q[Z];if(-1===Z){if(0<W--+T.length)continue;la=T.slice(0,1).join("")}a(la);L+=la.length;F=F.slice(la.length);return F.length}while(1)}function x(){if("."===C||/[eE]/.test(C))return F.push(C),A=5,E=C,D+1;if("x"===C&&1===F.length&&"0"===F[0])return A=
11,F.push(C),E=C,D+1;if(/[^\d]/.test(C))return a(F.join("")),A=999,D;F.push(C);E=C;return D+1}function u(){"f"===C&&(F.push(C),E=C,D+=1);if(/[eE]/.test(C)||"-"===C&&/[eE]/.test(E))return F.push(C),E=C,D+1;if(/[^\d]/.test(C))return a(F.join("")),A=999,D;F.push(C);E=C;return D+1}var D=0,B=0,A=999,C,E,F=[],G=[],J=1,K=0,L=0,I=!1,N=!1,P="",R;return function(T){G=[];if(null!==T){T=T.replace?T.replace(/\r\n/g,"\n"):T;D=0;P+=T;for(R=P.length;C=P[D],D<R;){T=D;switch(A){case 0:"/"===C&&"*"===E?(F.push(C),a(F.join("")),
A=999):(F.push(C),E=C);D+=1;break;case 1:D=r();break;case 2:D=r();break;case 3:D=t();break;case 4:D=x();break;case 11:/[^a-fA-F0-9]/.test(C)?(a(F.join("")),A=999):(F.push(C),E=C,D+=1);break;case 5:D=u();break;case 9999:if(/[^\d\w_]/.test(C)){var W=F.join("");A=-1<e.indexOf(W)?8:-1<d.indexOf(W)?7:6;a(F.join(""));A=999}else F.push(C),E=C,D+=1;break;case 9:/[^\s]/g.test(C)?(a(F.join("")),A=999):(F.push(C),E=C,D+=1);break;case 999:D=h()}if(T!==D)switch(P[T]){case "\n":K=0;++J;break;default:++K}}B+=D;
P=P.slice(D);return G}F.length&&a(F.join(""));A=10;a("(eof)");return G}}function y(a){return a.map(h=>"eof"!==h.type?h.data:"").join("")}function w(a,h="100",r="300 es"){const t=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const v of a)if("preprocessor"===v.type){const x=t.exec(v.data);if(x){a=x[1].replace(/\s\s+/g," ");if(a===r)return a;if(a===h)return v.data="#version "+r,h;throw Error("unknown glsl version: "+a);}}a.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"});
return null}function f(a,h,r,t){t=t||r;for(const v of a)if("ident"===v.type&&v.data===r)return t in h?h[t]++:h[t]=0,f(a,h,t+"_"+h[t],t);return r}function k(a,h,r="afterVersion"){const t={data:"\n",type:"whitespace"},v=u=>u<a.length?/[^\r\n]$/.test(a[u].data):!1;let x=function(u){let D=-1,B=0,A=-1;for(let E=0;E<u.length;E++){var C=u[E];"preprocessor"===C.type&&(C.data.match(/#(if|ifdef|ifndef)\s+.+/)?++B:C.data.match(/#endif\s*.*/)&&--B);("afterVersion"===r||"afterPrecision"===r)&&"preprocessor"===
C.type&&/^#version/.test(C.data)&&(A=Math.max(A,E));if("afterPrecision"===r&&"keyword"===C.type&&"precision"===C.data){a:{for(C=E;C<u.length;C++){const F=u[C];if("operator"===F.type&&";"===F.data)break a}C=null}if(null===C)throw Error("precision statement not followed by any semicolons!");A=Math.max(A,C)}D<A&&0===B&&(D=E)}return D+1}(a);v(x-1)&&a.splice(x++,0,t);for(const u of h)a.splice(x++,0,u);v(x-1)&&v(x)&&a.splice(x,0,t)}function m(a,h,r,t="lowp"){k(a,[{type:"keyword",data:"out"},{type:"whitespace",
data:" "},{type:"keyword",data:t},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:h},{type:"operator",data:";"}],"afterPrecision")}function c(a,h,r,t,v="lowp"){k(a,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:t.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",
data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:v},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:h},{type:"operator",data:";"}],"afterPrecision")}var e=l.createCommonjsModule(function(a){(function(h){h=h();void 0!==h&&(a.exports=h)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})}),
q=l.createCommonjsModule(function(a){(function(h){h=h();void 0!==h&&(a.exports=h)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})}),d=l.createCommonjsModule(function(a){(function(h){h=h();void 0!==h&&(a.exports=h)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})}),
g="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const b=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];n.transpileShader=function(a,h){var r=z(),t=[];t=t.concat(r(a));a=t=t.concat(r(null));if("300 es"===w(a,"100","300 es"))throw Error("shader is already glsl 300 es");t=r=null;const v={},x={};for(let A=0;A<a.length;++A){const C=a[A];switch(C.type){case "keyword":"vertex"===
h&&"attribute"===C.data?C.data="in":"varying"===C.data&&(C.data="vertex"===h?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(C.data.trim())&&(C.data=C.data.replace(/(2D|Cube|EXT)/g,""));"fragment"===h&&"gl_FragColor"===C.data&&(r||(r=f(a,v,"fragColor"),m(a,r,"vec4")),C.data=r);if("fragment"===h&&"gl_FragData"===C.data){{var u=void 0;let E=void 0;var D=a;var B=A+1;let F=-1;for(;B<D.length;B++){const G=D[B];if("operator"===G.type&&("["===G.data&&(E=B),"]"===G.data)){u=
B;break}"integer"===G.type&&(F=parseInt(G.data,10))}E&&u&&D.splice(E,u-E+1);D=F}u=f(a,v,"fragData");c(a,u,"vec4",D,"mediump");C.data=u}else"fragment"===h&&"gl_FragDepthEXT"===C.data&&(t||(t=f(a,v,"gl_FragDepth")),C.data=t);break;case "ident":if(0<=p.indexOf(C.data)){if(D="vertex"===h)a:{for(D=A-1;0<=D;D--)if(u=a[D],"whitespace"!==u.type&&"block-comment"!==u.type)if("keyword"===u.type){if("attribute"===u.data||"in"===u.data){D=!0;break a}}else break;D=!1}if(D)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
C.data in x||(x[C.data]=f(a,v,C.data));C.data=x[C.data]}}}for(h=a.length-1;0<=h;--h)r=a[h],"preprocessor"===r.type&&((t=r.data.match(/#extension\s+(.*):/))&&t[1]&&0<=b.indexOf(t[1].trim())&&(t=a[h+1],a.splice(h,t&&"whitespace"===t.type?2:1)),(t=r.data.match(/#ifdef\s+(.*)/))&&t[1]&&0<=b.indexOf(t[1].trim())&&(r.data="#if 1"),(t=r.data.match(/#ifndef\s+(.*)/))&&t[1]&&0<=b.indexOf(t[1].trim())&&(r.data="#if 0"));return y(a)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil"],function(n,l){let p=0;return function(){function z(w,f,k,m,c){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this.id=p++;w.instanceCounter.increment(1,this);this._context=w;this._bufferType=f;this._usage=k;this._glName=this._context.gl.createBuffer();m&&this.setData(m,c)}z.createIndex=function(w,f,k,m){return new z(w,
34963,f,k,m)};z.createVertex=function(w,f,k){return new z(w,34962,f,k)};var y=z.prototype;y.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)};y.setData=function(w,f){if(w){if("number"===typeof w){if(0>w&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&f)switch(this._indexType=f,this._size=w,f){case 5123:w*=2;break;case 5125:w*=4}}else f=w.byteLength,
l.isUint16Array(w)&&(f/=2,this._indexType=5123),l.isUint32Array(w)&&(f/=4,this._indexType=5125),this._size=f;f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,w,this._usage);this._context.bindVAO(f)}};y.setSubData=function(w,f=0,k=0,m){if(w){(0>f||f>=this._size)&&console.error("offset is out of range!");var c=f,e=k,q=m,d=w.byteLength;l.isUint16Array(w)&&(d/=2,c*=2,e*=2,q*=2);l.isUint32Array(w)&&(d/=4,c*=4,e*=4,q*=
4);void 0===m&&(m=d-1);k>=m&&console.error("end must be bigger than start!");f+k-m>this._size&&console.error("An attempt to write beyond the end of the buffer!");f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);k=this._context.gl;w=ArrayBuffer.isView(w)?w.buffer:w;k.bufferSubData(this._bufferType,c,w.slice(e,q));this._context.bindVAO(f)}};n._createClass(z,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"usage",
get:function(){return this._usage}},{key:"bufferType",get:function(){return this._bufferType}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return z}()})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/mathUtils"],function(n,l,p){let z=0;return function(){function y(f,k,m=null){this._glName=
this._context=null;this.id=z++;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;f.instanceCounter.increment(0,this);this._context=f;this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...k};this.setData(m)}var w=y.prototype;w.dispose=function(){if(this._context&&this._context.gl){if(this._glName){const f=this._context.gl;this._boundToUnits.forEach(k=>{this._context.bindTexture(null,
k)});f.deleteTexture(this._glName);this._glName=null}this._context.instanceCounter.decrement(0,this);this._context=null}};w.release=function(){this.dispose()};w.resize=function(f,k){const m=this._descriptor;if(m.width!==f||m.height!==k)m.width=f,m.height=k,this.setData(null)};w.setData=function(f){if(this._context&&this._context.gl){var k=this._context.gl;this._glName||(this._glName=k.createTexture());void 0===f&&(f=null);null===f&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=
this._descriptor.height||4);var m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var c=this._descriptor;y._validateTexture(c);k.pixelStorei(k.UNPACK_ALIGNMENT,c.unpackAlignment);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,c.flipped?1:0);k.pixelStorei(k.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c.preMultiplyAlpha?1:0);var e=c.pixelFormat,q=c.internalFormat?c.internalFormat:e;if(f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement){var d=
f.width,g=f.height;f instanceof HTMLVideoElement&&(d=f.videoWidth,g=f.videoHeight);c.width&&c.height&&console.assert(d===c.width&&g===c.height);k.texImage2D(k.TEXTURE_2D,0,q,e,c.dataType,f);c.hasMipmap&&this.generateMipmap();void 0===c.width&&(c.width=d);void 0===c.height&&(c.height=g)}else{null!=c.width&&null!=c.height||console.error("Width and height must be specified!");k.DEPTH24_STENCIL8&&q===k.DEPTH_STENCIL&&(q=k.DEPTH24_STENCIL8);d=c.width;g=c.height;var b=f;if(l.isSome(b)&&"type"in b&&"compressed"===
b.type)for(e=Math.round(Math.log(Math.max(d,g))/Math.LN2)+1,c.hasMipmap=c.hasMipmap&&e===f.levels.length,e=0;;++e){k.compressedTexImage2D(k.TEXTURE_2D,e,q,d,g,0,f.levels[Math.min(e,f.levels.length-1)]);if(1===d&&1===g||!c.hasMipmap)break;d=Math.max(1,d>>1);g=Math.max(1,g>>1)}else if(l.isSome(f))k.texImage2D(k.TEXTURE_2D,0,q,d,g,0,e,c.dataType,f),c.hasMipmap&&this.generateMipmap();else for(f=0;;++f){k.texImage2D(k.TEXTURE_2D,f,q,d,g,0,e,c.dataType,null);if(1===d&&1===g||!c.hasMipmap)break;d=Math.max(1,
d>>1);g=Math.max(1,g>>1)}}y._applySamplingMode(k,this._descriptor);y._applyWrapMode(k,this._descriptor);y._applyAnisotropicFilteringParameters(this._context,this._descriptor);this._context.bindTexture(m,0)}};w.updateData=function(f,k,m,c,e,q){q||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const d=this._context.gl,g=this._descriptor,b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>k||0>m||c>
g.width||e>g.height||k+c>g.width||m+e>g.height)&&console.error("An attempt to update out of bounds of the texture!");d.pixelStorei(d.UNPACK_ALIGNMENT,g.unpackAlignment);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,g.flipped?1:0);d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g.preMultiplyAlpha?1:0);q instanceof ImageData||q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof HTMLVideoElement?d.texSubImage2D(d.TEXTURE_2D,f,k,m,g.pixelFormat,g.dataType,q):d.texSubImage2D(d.TEXTURE_2D,f,
k,m,c,e,g.pixelFormat,g.dataType,q);this._context.bindTexture(b,0)};w.generateMipmap=function(){var f=this._descriptor;f.hasMipmap||(this._samplingModeDirty=f.hasMipmap=!0,y._validateTexture(f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=!0,f.samplingMode=9984);f=this._context.getBoundTexture(0);this._context.bindTexture(this,0);const k=this._context.gl;k.generateMipmap(k.TEXTURE_2D);this._context.bindTexture(f,0)};w.setSamplingMode=
function(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,y._validateTexture(this._descriptor),this._samplingModeDirty=!0)};w.setWrapMode=function(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=f,y._validateTexture(this._descriptor),this._wrapModeDirty=!0)};w.applyChanges=function(){const f=this._context.gl,k=this._descriptor;this._samplingModeDirty&&(y._applySamplingMode(f,k),this._samplingModeDirty=!1);this._wrapModeDirty&&(y._applyWrapMode(f,k),this._wrapModeDirty=
!1)};w.setBoundToUnit=function(f,k){k?this._boundToUnits.add(f):this._boundToUnits.delete(f)};y._validateTexture=function(f){(0>f.width||0>f.height)&&console.error("Negative dimension parameters are not allowed!");p.isPowerOfTwo(f.width)&&p.isPowerOfTwo(f.height)||("number"===typeof f.wrapMode?33071!==f.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==f.wrapMode.s||33071!==f.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),
f.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};y._applySamplingMode=function(f,k){let m=k.samplingMode,c=k.samplingMode;if(9985===m||9987===m)m=9729,k.hasMipmap||(c=9729);else if(9984===m||9986===m)m=9728,k.hasMipmap||(c=9728);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,m);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,c)};y._applyWrapMode=function(f,k){"number"===typeof k.wrapMode?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,k.wrapMode),f.texParameteri(f.TEXTURE_2D,
f.TEXTURE_WRAP_T,k.wrapMode)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,k.wrapMode.s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,k.wrapMode.t))};y._applyAnisotropicFilteringParameters=function(f,k){if(null!=k.maxAnisotropy){var m=f.capabilities.textureFilterAnisotropic;m&&(f=f.gl,f.texParameterf(f.TEXTURE_2D,m.TEXTURE_MAX_ANISOTROPY,k.maxAnisotropy))}};n._createClass(y,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return y}()})},
"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","./Util"],function(n,l){let p=0;return function(){function z(w,f,k,m,c){this._context=w;this._locations=f;this._layout=k;this._buffers=m;this._indexBuffer=c;this._glName=null;this.id=p++;this._initialized=!1;w.instanceCounter.increment(2,this)}var y=z.prototype;y.dispose=function(w=!0){if(this._context){var f=this._context.capabilities.vao;f&&this._glName&&(f.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(w){for(const k in this._buffers)this._buffers[k].dispose(),delete this._buffers[k];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}this._context.instanceCounter.decrement(2,this);this._context=null}};y.initialize=function(){if(!this._initialized){var w=this._context.capabilities.vao;if(w){const f=w.createVertexArray();w.bindVertexArray(f);this._bindLayout();w.bindVertexArray(null);this._glName=f}this._initialized=
!0}};y.bind=function(){this.initialize();const w=this._context.capabilities.vao;w?w.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};y._bindLayout=function(){const w=this._buffers,f=!!this._context.capabilities.vao,k=this._layout,m=this._indexBuffer;w||console.error("Vertex buffer dictionary is empty!");const c=this._context.gl;for(const e in w){const q=w[e];q||console.error("Vertex buffer is uninitialized!");const d=k[e];d||console.error("Vertex element descriptor is empty!");
l.bindVertexBufferLayout(this._context,this._locations,q,d)}m&&(f?c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m.glName):this._context.bindBuffer(m))};y.unbind=function(){this.initialize();const w=this._context.capabilities.vao;w?w.bindVertexArray(null):this._unbindLayout()};y._unbindLayout=function(){var w=this._buffers;const f=this._layout;w||console.error("Vertex buffer dictionary is empty!");for(const k in w){const m=w[k];m||console.error("Vertex buffer is uninitialized!");l.unbindVertexBufferLayout(this._context,
this._locations,m,f[k])}(w=this._indexBuffer)&&this._context.unbindBuffer(w.bufferType)};n._createClass(z,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((w,f)=>w+this._buffers[f].size,this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);
return z}()})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],function(n,l,p){function z(k){return k[0].stride}function y(k){switch(k){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function w(k){switch(k){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:return 4;case 34041:return 4;case 33325:return 2;
case 33326:return 4;case 35898:return 4;case 33327:return 4;case 33328:return 8;case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1}return 0}function f(k){if(p.isNone(k))return 0;if("colorAttachment"in k)return k.glName?f(k.colorAttachment)+f(k.depthStencilAttachment):0;if("descriptor"in k)return k.glName?f(k.descriptor):0;const m=k.internalFormat||"pixelFormat"in k&&k.pixelFormat;if(!m)return 0;const c="hasMipmap"in k&&k.hasMipmap?
1.3:1;k=k.width*k.height;return w(m)*k*c}n.addDescriptor=function(k,m,c,e,q,d){const g=y(e);if(0<k.length){const b=k[0].stride,a=b+g*c;k.forEach(h=>h.stride=a);k.push({name:m,count:c,type:e,offset:b,stride:a,normalized:q,divisor:d})}else k.push({name:m,count:c,type:e,offset:0,stride:g*c,normalized:q,divisor:d})};n.bindVertexBufferLayout=function(k,m,c,e,q){const d=k.gl,g=k.capabilities.instancing;k.bindBuffer(c);for(const b of e)if(k=m[b.name],c=(q?q:0+b.baseInstance?b.baseInstance:0)*b.stride,void 0===
k&&console.error(`There is no location for vertex attribute '${b.name}' defined.`),b.baseInstance&&!b.divisor&&console.error(`Vertex attribute '${b.name}' uses baseInstanceOffset without divisor.`),4>=b.count)d.vertexAttribPointer(k,b.count,b.type,b.normalized,b.stride,b.offset+c),d.enableVertexAttribArray(k),b.divisor&&0<b.divisor&&g&&g.vertexAttribDivisor(k,b.divisor);else if(9===b.count)for(e=0;3>e;e++)d.vertexAttribPointer(k+e,3,b.type,b.normalized,b.stride,b.offset+12*e+c),d.enableVertexAttribArray(k+
e),b.divisor&&0<b.divisor&&g&&g.vertexAttribDivisor(k+e,b.divisor);else if(16===b.count)for(e=0;4>e;e++)d.vertexAttribPointer(k+e,4,b.type,b.normalized,b.stride,b.offset+16*e+c),d.enableVertexAttribArray(k+e),b.divisor&&0<b.divisor&&g&&g.vertexAttribDivisor(k+e,b.divisor);else console.error("Unsupported vertex attribute element count: "+b.count)};n.copyFramebufferToTexture=function(k,m,c,e,q=0){const d=k.getBoundFramebufferObject(),g=k.getBoundTexture(0);k.bindFramebuffer(m);k.bindTexture(c,0);k.gl.copyTexImage2D(k.gl.TEXTURE_2D,
q,c.descriptor.pixelFormat,e[0],e[1],e[2],e[3],0);k.gl.flush();k.bindFramebuffer(d);k.bindTexture(g,0)};n.findAttribute=function(k,m){for(let c=0;c<k.length;c++)if(k[c].name===m)return k[c];return null};n.getBytesPerElement=y;n.getBytesPerElementFormat=w;n.getGpuMemoryUsage=f;n.getStride=z;n.getTypedArrayConstructor=function(k){switch(k){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;
case 5123:return Uint16Array;default:throw Error("Unknown data type");}};n.hasAttribute=function(k,m){for(let c=0;c<k.length;c++)if(k[c].name===m)return!0;return!1};n.setBaseInstanceOffset=function(k,m){const c={};for(const e in k)c[e]=k[e].map(q=>q.divisor?{...q,baseInstance:m}:q);return c};n.unbindVertexBufferLayout=function(k,m,c,e){const q=k.gl,d=k.capabilities.instancing;k.bindBuffer(c);for(const g of e)if(c=m[g.name],4>=g.count)q.disableVertexAttribArray(c),g.divisor&&0<g.divisor&&d&&d.vertexAttribDivisor(c,
0);else if(9===g.count)for(e=0;3>e;e++)q.disableVertexAttribArray(c+e),g.divisor&&0<g.divisor&&d&&d.vertexAttribDivisor(c+e,0);else if(16===g.count)for(e=0;4>e;e++)q.disableVertexAttribArray(c+e),g.divisor&&0<g.divisor&&d&&d.vertexAttribDivisor(c+e,0);else console.error("Unsupported vertex attribute element count: "+g.count);k.unbindBuffer(34962)};n.vertexCount=function(k,m){return k.vertexBuffers[m].size/z(k.layout[m])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(n){let l=0;return function(){function p(y,w){this._context=y;this._desc=w;this.id=++l;this._context.instanceCounter.increment(5,this);y=this._context.gl;this.glName=y.createRenderbuffer();this._context.bindRenderbuffer(this);y.renderbufferStorage(y.RENDERBUFFER,w.internalFormat,w.width,w.height)}var z=p.prototype;z.resize=function(y,w){const f=this._desc;if(f.width!==y||f.height!==w)f.width=y,f.height=w,y=this._context.gl,this._context.bindRenderbuffer(this),y.renderbufferStorage(y.RENDERBUFFER,
f.internalFormat,f.width,f.height)};z.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)};n._createClass(p,[{key:"descriptor",get:function(){return this._desc}}]);return p}()})},"esri/views/webgl/FramebufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/Logger","./Texture","./Renderbuffer"],function(n,l,p,z,y){const w=p.getLogger("esri.views.webgl.FrameBufferObject");
l=function(){function k(c,e,q,d){this._glName=this._context=null;this.id=f++;this._stencilAttachment=this._depthAttachment=null;this._colorAttachments=new Map;this._initialized=!1;c.instanceCounter.increment(4,this);this._context=c;this._desc={...e};if(q)if(Array.isArray(q))for(const a of q){const {attachmentPoint:h,texture:r}=a;q=r instanceof z?r:new z(c,r);e=q.descriptor;this._colorAttachments.set(h,q);this._validateColorAttachmentPoint(h);this._validateTextureDimensions(e,this._desc)}else{var g;
q instanceof z?(e=q.descriptor,this._colorAttachments.set(36064,q)):(e=q,this._colorAttachments.set(36064,new z(c,q)));0!==(null==(g=this._desc)?void 0:g.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");this._validateTextureDimensions(e,this._desc)}if(d instanceof y){var b;c=null!=(b=this._desc.depthStencilTarget)?b:3;2===c?this._stencilAttachment=d:1===c||3===c?this._depthAttachment=d:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');
k._validateBufferDimensions(d.descriptor,this._desc)}else d&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),d instanceof z?(this._depthStencilTexture=d,d=this._depthStencilTexture.descriptor):this._depthStencilTexture=new z(this._context,d),this._validateTextureDimensions(d,this._desc))}var m=k.prototype;m.dispose=function(){if(this._context){var c=this._context,
e=c.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(c.gl.deleteFramebuffer(this._glName),this._glName=null);c.bindFramebuffer(e);c.instanceCounter.decrement(4,this);this._context=null}};m.getColorTexture=function(c){return(c=this._colorAttachments.get(c))&&c instanceof z?c:null};m.attachColorTexture=function(c,e=36064){if(c){this._validateColorAttachmentPoint(e);this._validateTextureDimensions(c.descriptor,this._desc);this._disposeColorAttachments();
if(this._initialized){this._context.bindFramebuffer(this);const q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,e,q.TEXTURE_2D,c.glName,0)}this._colorAttachments.set(e,c)}};m.detachColorTexture=function(c=36064){const e=this._colorAttachments.get(c);if(e instanceof z){if(this._initialized){this._context.bindFramebuffer(this);const q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,c,q.TEXTURE_2D,null,0)}this._colorAttachments.delete(c);return e}};m.attachDepthStencilTexture=function(c){if(c){var e=
c.descriptor;34041!==e.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==e.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");this._validateTextureDimensions(e,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&
(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,c.glName,0));this._depthStencilTexture=c}};m.detachDepthStencilTexture=function(){const c=this._depthStencilTexture;if(c&&this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,
e.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return c};m.attachDepthStencilBuffer=function(c){if(c){var e=c.descriptor;34041!==e.internalFormat&&33189!==e.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");k._validateBufferDimensions(e,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===e.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferRenderbuffer(e.FRAMEBUFFER,
1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,c.glName));this._depthAttachment=c}};m.detachDepthStencilBuffer=function(){const c=this._context.gl,e=this._depthAttachment;e&&this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,null));this._depthAttachment=null;return e};m.copyToTexture=function(c,e,q,d,g,b,a){(0>c||
0>e||0>g||0>b)&&console.error("Offsets cannot be negative!");(0>=q||0>=d)&&console.error("Copy width and height must be greater than zero!");var h=this._desc;const r=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(c+q>h.width||e+d>h.height||g+q>r.width||b+d>r.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");h=this._context;h.bindTexture(a,0);h.bindFramebuffer(this);h.gl.copyTexSubImage2D(3553,
0,g,b,c,e,q,d)};m.readPixels=function(c,e,q,d,g,b,a){(0>=q||0>=d)&&console.error("Copy width and height must be greater than zero!");a||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(c,e,q,d,g,b,a)};m.resize=function(c,e){const q=this._desc;if(q.width!==c||q.height!==e)if(this._initialized){q.width=c;q.height=e;this._colorAttachments.forEach(d=>{d&&d.resize(c,e)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(c,
e);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(c,e),this._stencilAttachment&&this._stencilAttachment.resize(c,e);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else q.width=c,q.height=e,this._colorAttachments.forEach(d=>{d&&d.resize(c,e)}),this._depthStencilTexture&&this._depthStencilTexture.resize(c,e)};m.initialize=function(){var c,e,q,d;if(this._initialized)return!1;const g=
this._context,b=g.gl;this._glName&&b.deleteFramebuffer(this._glName);const a=b.createFramebuffer(),h=this._desc,r=null!=(c=h.colorTarget)?c:1;c=null!=(e=h.width)?e:1;e=null!=(q=h.height)?q:1;b.bindFramebuffer(b.FRAMEBUFFER,a);0===this._colorAttachments.size&&(0===r?this._colorAttachments.set(36064,new z(g,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:h.width,height:h.height})):(q=new y(g,{internalFormat:32854,width:c,height:e}),this._colorAttachments.set(36064,
q)));this._colorAttachments.forEach((t,v)=>{t&&(t instanceof z?b.framebufferTexture2D(b.FRAMEBUFFER,v,b.TEXTURE_2D,t.glName,0):b.framebufferRenderbuffer(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.RENDERBUFFER,t.glName))});q=null!=(d=h.depthStencilTarget)?d:0;switch(q){case 1:case 3:this._depthAttachment||(this._depthAttachment=new y(g,{internalFormat:1===h.depthStencilTarget?33189:34041,width:c,height:e}));b.framebufferRenderbuffer(b.FRAMEBUFFER,1===q?b.DEPTH_ATTACHMENT:b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,
this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new y(g,{internalFormat:36168,width:c,height:e}));b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(g.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new z(g,{target:3553,
pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c,height:e})),b.framebufferTexture2D(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=a;return this._initialized=!0};m._disposeColorAttachments=function(){this._colorAttachments.forEach((c,e)=>{if(c instanceof z){if(this._initialized){this._context.bindFramebuffer(this);var q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,e,q.TEXTURE_2D,null,0)}c.dispose()}else c instanceof
WebGLRenderbuffer&&(q=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),q.framebufferRenderbuffer(q.FRAMEBUFFER,e,q.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(c))});this._colorAttachments.clear()};m._disposeDepthStencilAttachments=function(){const c=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,1===this._desc.depthStencilTarget?c.DEPTH_ATTACHMENT:c.DEPTH_STENCIL_ATTACHMENT,
c.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),c.framebufferRenderbuffer(c.FRAMEBUFFER,c.STENCIL_ATTACHMENT,c.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),c.framebufferTexture2D(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};k._validateBufferDimensions=function(c,e){console.assert(0<=c.width&&0<=c.height);void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height?e.width===c.width&&e.height===c.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(e.width=c.width,e.height=c.height)};m._validateTextureDimensions=function(c,e){console.assert(0<=c.width&&0<=c.height);3553!==c.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==e.width&&0<=e.width&&
void 0!==e.height&&0<=e.height?e.width===c.width&&e.height===c.height||console.error("Color attachment texture must match the framebuffer's!"):(e.width=c.width,e.height=c.height)};m._validateColorAttachmentPoint=function(c){if(-1===k._MAX_COLOR_ATTACHMENTS){const e=this._context.capabilities.drawBuffers;k._MAX_COLOR_ATTACHMENTS=e?this._context.gl.getParameter(e.MAX_COLOR_ATTACHMENTS):1}c-=36064;c+1>k._MAX_COLOR_ATTACHMENTS&&w.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${c+
1}. Implementation supports up to ${k._MAX_COLOR_ATTACHMENTS} color attachments`)};n._createClass(k,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const c=this._colorAttachments.get(36064);return c&&c instanceof z?c:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},
{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}}]);return k}();l._MAX_COLOR_ATTACHMENTS=-1;let f=0;return l})},"esri/views/webgl/ProgramCache":function(){define(["./programUtils"],function(n){return function(){function l(z){this._programCacheByTemplate=new Map;this._rctx=z}var p=l.prototype;p.dispose=function(){this._programCacheByTemplate.forEach(z=>{z.programs.forEach(y=>
{y.dispose()})});this._programCacheByTemplate=null};p.getProgram=function(z,y){this._programCacheByTemplate.has(z)||this.addProgramTemplate(z,w=>n.createProgram(this._rctx,z,w));return this.getProgramTemplateInstance(z,y)};p.addProgramTemplate=function(z,y){this._programCacheByTemplate.set(z,{constructor:y,programs:new Map})};p.getProgramTemplateInstance=function(z,y){if(z=this._programCacheByTemplate.get(z)){const w=y?JSON.stringify(y):"default";z.programs.has(w)||(y=z.constructor(y),z.programs.set(w,
y));return z.programs.get(w)}return null};return l}()})},"esri/views/webgl/programUtils":function(){define(["exports","./Program"],function(n,l){n.createProgram=function(p,z,y,w){y=y||{};w=w||"";y="function"===typeof z.shaders?z.shaders(y):z.shaders;return new l(p,w+y.vertexShader,w+y.fragmentShader,z.attributes)};n.glslifyDefineMap=function(p){let z="";for(const y in p){const w=p[y];if("boolean"===typeof w)w&&(z+=`#define ${y}\n`);else if("number"===typeof w)z+=`#define ${y} ${w.toFixed()}\n`;else if("object"===
typeof w){const f=w.options;let k=0;for(const m in f)z+=`#define ${f[m]} ${(k++).toFixed()}\n`;z+=`#define ${y} ${f[w.value]}\n`}}return z};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/RenderingContext":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./renderState ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(n,l,p,z,y,w,f,k){l=function(){function m(e,q){this.gl=null;this.instanceCounter=
new w.InstanceCounter;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange=
{zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap=
{};this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=f(e)?"webgl2":"webgl";this.gl=e;e instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=k.loadCapabilities(e,q);e=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:e[0],y:e[1],width:e[2],height:e[3]};this._stateTracker=new z.StateTracker({setBlending:d=>{d?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(d.opRgb,d.opAlpha),this.setBlendFunctionSeparate(d.srcRgb,d.dstRgb,
d.srcAlpha,d.dstAlpha),d=d.color,this.setBlendColor(d.r,d.g,d.b,d.a)):this.setBlendingEnabled(!1)},setCulling:d=>{d?(this.setFaceCullingEnabled(!0),this.setCullFace(d.face),this.setFrontFace(d.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:d=>{d?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(d.factor,d.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:d=>{d?(this.setDepthTestEnabled(!0),this.setDepthFunction(d.func)):this.setDepthTestEnabled(!1)},setStencilTest:d=>{if(d){this.setStencilTestEnabled(!0);
const g=d.function;this.setStencilFunction(g.func,g.ref,g.mask);d=d.operation;this.setStencilOp(d.fail,d.zFail,d.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:d=>{d?(this.setDepthWriteEnabled(!0),this.setDepthRange(d.zNear,d.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:d=>{d?this.setColorMask(d.r,d.g,d.b,d.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:d=>{d?this.setStencilWriteMask(d.mask):this.setStencilWriteMask(0)}});this.enforceState()}var c=m.prototype;c.dispose=function(){this.bindVAO(null);
this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};this._capabilities=this.gl=null};c.setPipelineState=function(e){this._stateTracker.setPipeline(e)};c.setBlendingEnabled=function(e){this._blendEnabled!==e&&(!0===e?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=e,this._stateTracker.invalidateBlending())};c.setBlendColor=function(e,q,d,g){if(e!==this._blendColorState.r||q!==this._blendColorState.g||d!==this._blendColorState.b||g!==this._blendColorState.a)this.gl.blendColor(e,
q,d,g),this._blendColorState.r=e,this._blendColorState.g=q,this._blendColorState.b=d,this._blendColorState.a=g,this._stateTracker.invalidateBlending()};c.setBlendFunction=function(e,q){if(e!==this._blendFunctionState.srcRGB||q!==this._blendFunctionState.dstRGB)this.gl.blendFunc(e,q),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=q,this._blendFunctionState.dstAlpha=q,this._stateTracker.invalidateBlending()};c.setBlendFunctionSeparate=function(e,
q,d,g){if(this._blendFunctionState.srcRGB!==e||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==q||this._blendFunctionState.dstAlpha!==g)this.gl.blendFuncSeparate(e,q,d,g),this._blendFunctionState.srcRGB=e,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=q,this._blendFunctionState.dstAlpha=g,this._stateTracker.invalidateBlending()};c.setBlendEquation=function(e){this._blendEquationState.mode!==e&&(this.gl.blendEquation(e),this._blendEquationState.mode=e,
this._blendEquationState.modeAlpha=e,this._stateTracker.invalidateBlending())};c.setBlendEquationSeparate=function(e,q){if(this._blendEquationState.mode!==e||this._blendEquationState.modeAlpha!==q)this.gl.blendEquationSeparate(e,q),this._blendEquationState.mode=e,this._blendEquationState.modeAlpha=q,this._stateTracker.invalidateBlending()};c.setColorMask=function(e,q,d,g){if(this._colorMaskState.r!==e||this._colorMaskState.g!==q||this._colorMaskState.b!==d||this._colorMaskState.a!==g)this.gl.colorMask(e,
q,d,g),this._colorMaskState.r=e,this._colorMaskState.g=q,this._colorMaskState.b=d,this._colorMaskState.a=g,this._stateTracker.invalidateColorWrite()};c.setClearColor=function(e,q,d,g){if(this._clearColor.r!==e||this._clearColor.g!==q||this._clearColor.b!==d||this._clearColor.a!==g)this.gl.clearColor(e,q,d,g),this._clearColor.r=e,this._clearColor.g=q,this._clearColor.b=d,this._clearColor.a=g};c.setFaceCullingEnabled=function(e){this._polygonCullingEnabled!==e&&(!0===e?this.gl.enable(this.gl.CULL_FACE):
this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=e,this._stateTracker.invalidateCulling())};c.setPolygonOffsetFillEnabled=function(e){this._polygonOffsetFillEnabled!==e&&(!0===e?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=e,this._stateTracker.invalidatePolygonOffset())};c.setPolygonOffset=function(e,q){if(this._polygonOffset[0]!==e||this._polygonOffset[1]!==q)this._polygonOffset[0]=e,this._polygonOffset[1]=q,
this.gl.polygonOffset(e,q),this._stateTracker.invalidatePolygonOffset()};c.setCullFace=function(e){this._cullFace!==e&&(this.gl.cullFace(e),this._cullFace=e,this._stateTracker.invalidateCulling())};c.setFrontFace=function(e){this._frontFace!==e&&(this.gl.frontFace(e),this._frontFace=e,this._stateTracker.invalidateCulling())};c.setScissorTestEnabled=function(e){this._scissorTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=
e)};c.setScissorRect=function(e,q,d,g){if(this._scissorRect.x!==e||this._scissorRect.y!==q||this._scissorRect.width!==d||this._scissorRect.height!==g)this.gl.scissor(e,q,d,g),this._scissorRect.x=e,this._scissorRect.y=q,this._scissorRect.width=d,this._scissorRect.height=g};c.setDepthTestEnabled=function(e){this._depthTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=e,this._stateTracker.invalidateDepthTest())};c.setClearDepth=function(e){this._clearDepth!==
e&&(this.gl.clearDepth(e),this._clearDepth=e)};c.setDepthFunction=function(e){this._depthFunction!==e&&(this.gl.depthFunc(e),this._depthFunction=e,this._stateTracker.invalidateDepthTest())};c.setDepthWriteEnabled=function(e){this._depthWriteEnabled!==e&&(this.gl.depthMask(e),this._depthWriteEnabled=e,this._stateTracker.invalidateDepthWrite())};c.setDepthRange=function(e,q){if(this._depthRange.zNear!==e||this._depthRange.zFar!==q)this.gl.depthRange(e,q),this._depthRange.zNear=e,this._depthRange.zFar=
q,this._stateTracker.invalidateDepthWrite()};c.setStencilTestEnabled=function(e){this._stencilTestEnabled!==e&&(!0===e?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=e,this._stateTracker.invalidateStencilTest())};c.setClearStencil=function(e){e!==this._clearStencil&&(this.gl.clearStencil(e),this._clearStencil=e)};c.setStencilFunction=function(e,q,d){if(this._stencilFunction.func!==e||this._stencilFunction.ref!==q||this._stencilFunction.mask!==d)this.gl.stencilFunc(e,
q,d),this._stencilFunction.face=1032,this._stencilFunction.func=e,this._stencilFunction.ref=q,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};c.setStencilFunctionSeparate=function(e,q,d,g){if(this._stencilFunction.face!==e||this._stencilFunction.func!==q||this._stencilFunction.ref!==d||this._stencilFunction.mask!==g)this.gl.stencilFuncSeparate(e,q,d,g),this._stencilFunction.face=e,this._stencilFunction.func=q,this._stencilFunction.ref=d,this._stencilFunction.mask=g,this._stateTracker.invalidateStencilTest()};
c.setStencilWriteMask=function(e){this._stencilWriteMask!==e&&(this.gl.stencilMask(e),this._stencilWriteMask=e,this._stateTracker.invalidateStencilWrite())};c.setStencilOp=function(e,q,d){if(this._stencilOperation.fail!==e||this._stencilOperation.zFail!==q||this._stencilOperation.zPass!==d)this.gl.stencilOp(e,q,d),this._stencilOperation.face=1032,this._stencilOperation.fail=e,this._stencilOperation.zFail=q,this._stencilOperation.zPass=d,this._stateTracker.invalidateStencilTest()};c.setStencilOpSeparate=
function(e,q,d,g){if(this._stencilOperation.face!==e||this._stencilOperation.fail!==q||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==g)this.gl.stencilOpSeparate(e,q,d,g),this._stencilOperation.face=e,this._stencilOperation.face=e,this._stencilOperation.fail=q,this._stencilOperation.zFail=d,this._stencilOperation.zPass=g,this._stateTracker.invalidateStencilTest()};c.setActiveTexture=function(e){const q=this._activeTextureUnit;0<=e&&e!==this._activeTextureUnit&&(this.gl.activeTexture(y.BASE_TEXTURE_UNIT+
e),this._activeTextureUnit=e);return q};c.clear=function(e){e&&this.gl.clear(e)};c.clearSafe=function(e,q=255){e&&(e&16384&&this.setColorMask(!0,!0,!0,!0),e&256&&this.setDepthWriteEnabled(!0),e&1024&&this.setStencilWriteMask(q),this.gl.clear(e))};c.drawArrays=function(e,q,d){this.gl.drawArrays(e,q,d)};c.drawElements=function(e,q,d,g){5123===d?this.gl.drawElements(e,q,d,g):5125===d&&this.gl.drawElements(e,q,d,g)};c.logIno=function(){};c.setViewport=function(e,q,d,g){const b=this._viewport;if(b.x!==
e||b.y!==q||b.width!==d||b.height!==g)b.x=e,b.y=q,b.width=d,b.height=g,this.gl.viewport(e,q,d,g)};c.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};c.bindProgram=function(e){e?this._activeShaderProgram!==e&&(e.initialize(),this.gl.useProgram(e.glName),this._activeShaderProgram=e):(this.gl.useProgram(null),this._activeShaderProgram=null)};c.bindTexture=function(e,q){-1===m._MAX_TEXTURE_IMAGE_UNITS&&(m._MAX_TEXTURE_IMAGE_UNITS=
this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));(q>=m._MAX_TEXTURE_IMAGE_UNITS||0>q)&&console.error("Input texture unit is out of range of available units!");const d=this._textureUnitMap[q];this.setActiveTexture(q);null==e||null==e.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(q,!1)),this._textureUnitMap[q]=null):d&&d.id===e.id?e.applyChanges():(d&&d.setBoundToUnit(q,!1),this.gl.bindTexture(e.descriptor.target,e.glName),e.setBoundToUnit(q,!0),e.applyChanges(),
this._textureUnitMap[q]=e)};c.bindFramebuffer=function(e){p.isNone(e)?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null):this._activeFramebuffer!==e&&(e.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e.glName),this._activeFramebuffer=e)};c.bindBuffer=function(e){e&&(34962===e.bufferType?this._activeVertexBuffer=m._bindBuffer(this.gl,e,e.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=m._bindBuffer(this.gl,e,e.bufferType,this._activeIndexBuffer))};
c.bindRenderbuffer=function(e){const q=this.gl;e||(q.bindRenderbuffer(q.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==e&&(q.bindRenderbuffer(q.RENDERBUFFER,e.glName),this._activeRenderbuffer=e)};c.unbindBuffer=function(e){34962===e?this._activeVertexBuffer=m._bindBuffer(this.gl,null,e,this._activeVertexBuffer):this._activeIndexBuffer=m._bindBuffer(this.gl,null,e,this._activeIndexBuffer)};c.bindVAO=function(e){e?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===
e.id||(e.bind(),this._activeVertexArrayObject=e):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};c.getBoundTexture=function(e){return this._textureUnitMap[e]};c.getBoundFramebufferObject=function(){return this._activeFramebuffer};c.getBoundVAO=function(){return this._activeVertexArrayObject};c.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(let e=
0;e<this.parameters.maxTextureImageUnits;e++)this.bindTexture(null,e);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);
this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};c.enforceState=function(){const e=this.gl;var q=this.capabilities.vao;q&&q.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)e.disableVertexAttribArray(d);
this._activeVertexBuffer?e.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):e.bindBuffer(34962,null);this._activeIndexBuffer?e.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):e.bindBuffer(34963,null);if(q&&this._activeVertexArrayObject){if(q=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(q)}e.bindFramebuffer(e.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);e.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);e.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);e.bindRenderbuffer(e.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?e.enable(this.gl.BLEND):e.disable(this.gl.BLEND);e.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);e.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);e.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);e.clearDepth(this._clearDepth);e.clearStencil(this._clearStencil);e.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);e.cullFace(this._cullFace);e.depthFunc(this._depthFunction);e.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST);e.depthMask(this._depthWriteEnabled);e.frontFace(this._frontFace);e.lineWidth(1);!0===this._polygonCullingEnabled?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE);e.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?e.enable(e.POLYGON_OFFSET_FILL):e.disable(e.POLYGON_OFFSET_FILL);e.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?e.enable(e.SCISSOR_TEST):
e.disable(e.SCISSOR_TEST);e.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);e.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST);e.stencilMask(this._stencilWriteMask);for(q=0;q<this.parameters.maxTextureImageUnits;q++)e.activeTexture(y.BASE_TEXTURE_UNIT+q),e.bindTexture(3553,null),(d=this._textureUnitMap[q])&&
e.bindTexture(d.descriptor.target,d.glName);e.activeTexture(y.BASE_TEXTURE_UNIT+this._activeTextureUnit);e.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};m._bindBuffer=function(e,q,d,g){q?g!==q&&e.bindBuffer(d,q.glName):e.bindBuffer(d,null);return q};n._createClass(m,[{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",get:function(){if(!this._parameters){const e=this.capabilities.textureFilterAnisotropic;this._parameters=
{versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:e?this.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}},{key:"capabilities",get:function(){return this._capabilities}}]);
return m}();l._MAX_TEXTURE_IMAGE_UNITS=-1;return l})},"esri/views/webgl/renderState":function(){define(["exports"],function(n){function l(G){return v.intern(G)}function p(G){return x.intern(G)}function z(G){return u.intern(G)}function y(G){return D.intern(G)}function w(G){return B.intern(G)}function f(G){return A.intern(G)}function k(G){return C.intern(G)}function m(G){return E.intern(G)}function c(G){return"["+G.join(",")+"]"}function e(G){return G?c([G.srcRgb,G.srcAlpha,G.dstRgb,G.dstAlpha,G.opRgb,
G.opAlpha,G.color.r,G.color.g,G.color.b,G.color.a]):null}function q(G){return G?c([G.face,G.mode]):null}function d(G){return G?c([G.factor,G.units]):null}function g(G){return G?c([G.func]):null}function b(G){return G?c([G.function.func,G.function.ref,G.function.mask,G.operation.fail,G.operation.zFail,G.operation.zPass]):null}function a(G){return G?c([G.zNear,G.zFar]):null}function h(G){return G?c([G.r,G.g,G.b,G.a]):null}function r(G){return G?c([G.mask]):null}var t=function(){function G(J,K){this.makeKey=
J;this.makeRef=K;this.interns=new Map}G.prototype.intern=function(J){if(!J)return null;const K=this.makeKey(J),L=this.interns;L.has(K)||L.set(K,this.makeRef(J));return L.get(K)};return G}();const v=new t(e,G=>({__tag:"Blending",...G})),x=new t(q,G=>({__tag:"Culling",...G})),u=new t(d,G=>({__tag:"PolygonOffset",...G})),D=new t(g,G=>({__tag:"DepthTest",...G})),B=new t(b,G=>({__tag:"StencilTest",...G})),A=new t(a,G=>({__tag:"DepthWrite",...G})),C=new t(h,G=>({__tag:"ColorWrite",...G})),E=new t(r,G=>
({__tag:"StencilWrite",...G})),F=new t(function(G){return G?c([e(G.blending),q(G.culling),d(G.polygonOffset),g(G.depthTest),b(G.stencilTest),a(G.depthWrite),h(G.colorWrite),r(G.stencilWrite)]):null},G=>({blending:l(G.blending),culling:p(G.culling),polygonOffset:z(G.polygonOffset),depthTest:y(G.depthTest),stencilTest:w(G.stencilTest),depthWrite:f(G.depthWrite),colorWrite:k(G.colorWrite),stencilWrite:m(G.stencilWrite)}));t=function(){function G(K){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=
this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=K}var J=G.prototype;J.setPipeline=function(K){if(this._pipelineInvalid||K!==this._pipeline)this.setBlending(K.blending),this.setCulling(K.culling),this.setPolygonOffset(K.polygonOffset),this.setDepthTest(K.depthTest),this.setStencilTest(K.stencilTest),this.setDepthWrite(K.depthWrite),this.setColorWrite(K.colorWrite),this.setStencilWrite(K.stencilWrite),
this._pipeline=K;this._pipelineInvalid=!1};J.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};J.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};J.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};J.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};J.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};J.invalidateDepthWrite=function(){this._pipelineInvalid=
this._depthWriteInvalid=!0};J.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};J.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};J.setBlending=function(K){this._blending=this.setSubState(K,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};J.setCulling=function(K){this._culling=this.setSubState(K,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};
J.setPolygonOffset=function(K){this._polygonOffset=this.setSubState(K,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};J.setDepthTest=function(K){this._depthTest=this.setSubState(K,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};J.setStencilTest=function(K){this._stencilTest=this.setSubState(K,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=
!1};J.setDepthWrite=function(K){this._depthWrite=this.setSubState(K,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};J.setColorWrite=function(K){this._colorWrite=this.setSubState(K,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};J.setStencilWrite=function(K){this._stencilWrite=this.setSubState(K,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=
!1};J.setSubState=function(K,L,I,N){if(I||K!==L)N(K),this._pipelineInvalid=!0;return K};return G}();n.StateTracker=t;n.backFaceCullingParams={face:1029,mode:2305};n.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};n.defaultDepthWriteParams={zNear:0,zFar:1};n.makeBlending=l;n.makeColorWrite=k;n.makeCulling=p;n.makeDepthTest=y;n.makeDepthWrite=f;n.makePipelineState=function(G){return F.intern(G)};n.makePolygonOffset=z;n.makeStencilTest=w;n.makeStencilWrite=m;n.separateBlendingParams=function(G,J,K,L,I=
32774,N=32774,P=[0,0,0,0]){return{srcRgb:G,srcAlpha:J,dstRgb:K,dstAlpha:L,opRgb:I,opAlpha:N,color:{r:P[0],g:P[1],b:P[2],a:P[3]}}};n.simpleBlendingParams=function(G,J,K=32774,L=[0,0,0,0]){return{srcRgb:G,srcAlpha:G,dstRgb:J,dstAlpha:J,opRgb:K,opAlpha:K,color:{r:L[0],g:L[1],b:L[2],a:L[3]}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],function(n){n.BASE_TEXTURE_UNIT=33984;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/InstanceCounter":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers"],function(n,l){let p=function(){function z(){this._current=[];this._max=[];for(this._allocations=new Map;6>this._current.length;)this._current.push(0),this._max.push(0)}var y=z.prototype;y.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};y.increment=function(w,f){f=++this._current[w];this._max[w]=Math.max(f,this._max[w])};y.decrement=function(w,f){--this._current[w]};y.printResourceCount=function(){console.log("Live objects:");
console.log(`Textures: ${this._current[0]}`);console.log(`Buffers: ${this._current[1]}`);console.log(`VAOs: ${this._current[2]}`);console.log(`Programs: ${this._current[3]}`);console.log(`Framebuffers: ${this._current[4]}`);console.log(`Renderbuffers: ${this._current[5]}`);if(0<this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const w=new Map;this._allocations.forEach(f=>{var k;w.set(f,(null!=(k=w.get(f))?k:0)+1)});w.forEach((f,k)=>console.log(f," : ",k))}};
l._createClass(z,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}}]);return z}();n.InstanceCounter=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/capabilities/load":function(){define("exports ./isWebGL2Context ./DisjointTimerQuery ./DrawBuffers ./Instancing ./LoseContext ./VertexArrayObjects".split(" "),
function(n,l,p,z,y,w,f){function k(m,c,e,q,d){if(q&&l(m))return!0;if(c[e])return!1;for(const g of d)if(m.getExtension(g))return!0;return!1}n.loadCapabilities=function(m,c){const e=c&&c.disabledExtensions||{},q=c&&c.debugWebGLExtensions||{};let d,g,b,a,h,r,t,v,x,u,D=null,B=null,A=null,C=null;return{get drawBuffers(){u||(u=z.load(m,e));return u},get instancing(){d||(d=y.load(m));return d},get vao(){g||(g=f.load(m,e));return g},get compressedTextureS3TC(){if(!b)if(e.compressedTextureS3TC)b=null;else{var E=
m.getExtension("WEBGL_compressed_texture_s3tc");b=E?{COMPRESSED_RGB_S3TC_DXT1:E.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:E.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:E.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:E.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return b},get textureFilterAnisotropic(){if(!a)if(e.textureFilterAnisotropic)a=null;else{var E=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
a=E?{MAX_TEXTURE_MAX_ANISOTROPY:E.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:E.TEXTURE_MAX_ANISOTROPY_EXT}:null}return a},get disjointTimerQuery(){h||(h=p.createDisjointTimerQuery(m,e));return h},get textureFloat(){if(!r)if(l(m))r={textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!m.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!m.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:m.HALF_FLOAT};else if(m instanceof
WebGLRenderingContext){const E=!e.textureHalfFloat&&m.getExtension("OES_texture_half_float");r={textureFloat:!e.textureFloat&&!!m.getExtension("OES_texture_float"),textureFloatLinear:!e.textureFloatLinear&&!!m.getExtension("OES_texture_float_linear"),textureHalfFloat:!!E,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!m.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:E?E.HALF_FLOAT_OES:void 0}}else r=null;return r},get colorBufferFloat(){if(!t)if(l(m)){var E=!e.colorBufferFloat&&m.getExtension("EXT_color_buffer_half_float"),
F=!e.colorBufferFloat&&m.getExtension("EXT_color_buffer_float");t=E||F?{textureFloat:!!F,textureHalfFloat:!!E,R16F:m.R16F,RG16F:m.RG16F,RGBA16F:m.RGBA16F,R32F:m.R32F,RG32F:m.RG32F,RGBA32F:m.RGBA32F,R11F_G11F_B10F:m.R11F_G11F_B10F,RGB16F:m.RGB16F}:null}else m instanceof WebGLRenderingContext?(E=!e.colorBufferFloat&&m.getExtension("EXT_color_buffer_half_float"),F=!e.colorBufferFloat&&m.getExtension("WEBGL_color_buffer_float"),t=E||F?{textureFloat:!!F,textureHalfFloat:!!E,RGBA16F:E?E.RGBA16F_EXT:void 0,
RGB16F:E?E.RGB16F_EXT:void 0,RGBA32F:F?F.RGBA32F_EXT:void 0}:null):t=null;return t},get blendMinMax(){if(!v)if(l(m))v={MIN:m.MIN,MAX:m.MAX};else if(e.blendMinMax)v=null;else{{const E=m.getExtension("EXT_blend_minmax");v=E?{MIN:E.MIN_EXT,MAX:E.MAX_EXT}:null}}return v},get depthTexture(){null===D&&(D=k(m,e,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return D},get standardDerivatives(){null===B&&(B=k(m,e,"standardDerivatives",!0,["OES_standard_derivatives"]));
return B},get shaderTextureLOD(){null===A&&(A=k(m,e,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return A},get fragDepth(){null===C&&(C=k(m,e,"fragDepth",!0,["EXT_frag_depth"]));return C},get loseContext(){x||(x=w.load(m,q));return x}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(n,l){let p=function(z,y,w,f,k,m,c,e){this.createQuery=z;this.resultAvailable=y;this.getResult=w;
this.disjoint=f;this.beginTimeElapsed=k;this.endTimeElapsed=m;this.createTimestamp=c;this.timestampBits=e};n.DisjointTimerQuery=p;n.createDisjointTimerQuery=function(z,y){if(y.disjointTimerQuery)return null;let w=z.getExtension("EXT_disjoint_timer_query_webgl2");return w&&l(z)?new p(()=>z.createQuery(),f=>z.getQueryParameter(f,z.QUERY_RESULT_AVAILABLE),f=>z.getQueryParameter(f,z.QUERY_RESULT),()=>z.getParameter(w.GPU_DISJOINT_EXT),f=>z.beginQuery(w.TIME_ELAPSED_EXT,f),()=>z.endQuery(w.TIME_ELAPSED_EXT),
f=>w.queryCounterEXT(f,w.TIMESTAMP_EXT),()=>z.getQuery(w.TIMESTAMP_EXT,w.QUERY_COUNTER_BITS_EXT)):(w=z.getExtension("EXT_disjoint_timer_query"))?new p(()=>w.createQueryEXT(),f=>w.getQueryObjectEXT(f,w.QUERY_RESULT_AVAILABLE_EXT),f=>w.getQueryObjectEXT(f,w.QUERY_RESULT_EXT),()=>z.getParameter(w.GPU_DISJOINT_EXT),f=>w.beginQueryEXT(w.TIME_ELAPSED_EXT,f),()=>w.endQueryEXT(w.TIME_ELAPSED_EXT),f=>w.queryCounterEXT(f,w.TIMESTAMP_EXT),()=>w.getQueryEXT(w.TIMESTAMP_EXT,w.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports","./isWebGL2Context"],function(n,l){n.load=function(p,z){return z.disjointTimerQuery?null:l(p)?{drawBuffers:p.drawBuffers.bind(p),MAX_DRAW_BUFFERS:p.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:p.MAX_COLOR_ATTACHMENTS}:z.drawBuffers?null:(p=p.getExtension("WEBGL_draw_buffers"))?{drawBuffers:p.drawBuffersWEBGL.bind(p),MAX_DRAW_BUFFERS:p.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:p.MAX_COLOR_ATTACHMENTS_WEBGL}:
null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports","./isWebGL2Context"],function(n,l){n.load=function(p){return l(p)?{drawArraysInstanced:p.drawArraysInstanced.bind(p),drawElementsInstanced:p.drawElementsInstanced.bind(p),vertexAttribDivisor:p.vertexAttribDivisor.bind(p)}:(p=p.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:p.drawArraysInstancedANGLE.bind(p),drawElementsInstanced:p.drawElementsInstancedANGLE.bind(p),
vertexAttribDivisor:p.vertexAttribDivisorANGLE.bind(p)}:null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],function(n){n.load=function(l,p){const z=p.loseContext&&l.getExtension("WEBGL_lose_context");return z?{loseRenderingContext:()=>z.loseContext()}:null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports","./isWebGL2Context"],function(n,
l){n.load=function(p,z){return l(p)?{createVertexArray:p.createVertexArray.bind(p),deleteVertexArray:p.deleteVertexArray.bind(p),bindVertexArray:p.bindVertexArray.bind(p)}:z.vao?null:(p=p.getExtension("OES_vertex_array_object")||p.getExtension("MOZ_OES_vertex_array_object")||p.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:p.createVertexArrayOES.bind(p),deleteVertexArray:p.deleteVertexArrayOES.bind(p),bindVertexArray:p.bindVertexArrayOES.bind(p)}:null};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/views/webgl/ShaderCompiler":function(){define(function(){return function(){function n(p){this.readFile=p}var l=n.prototype;l.resolveIncludes=function(p){return this.resolve(p)};l.resolve=function(p,z=new Map){if(z.has(p))return z.get(p);const y=this.read(p);if(!y)throw Error(`cannot find shader file ${p}`);const w=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let f=w.exec(y);const k=[];for(;null!=f;)k.push({path:f[1],start:f.index,length:f[0].length}),f=w.exec(y);let m=
0,c="";k.forEach(e=>{c+=y.slice(m,e.start);c+=z.has(e.path)?"":this.resolve(e.path,z);m=e.start+e.length});c+=y.slice(m);z.set(p,c);return c};l.read=function(p){return this.readFile(p)};return n}()})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(n){(function(l){l[l.FILL=0]="FILL";l[l.LINE=1]="LINE";l[l.MARKER=2]="MARKER";l[l.TEXT=3]="TEXT";l[l.LABEL=4]="LABEL"})(n.WGLGeometryType||(n.WGLGeometryType={}));(function(l){l[l.SUCCEEDED=0]="SUCCEEDED";l[l.FAILED_OUT_OF_MEMORY=
1]="FAILED_OUT_OF_MEMORY"})(n.WGLGeometryTransactionStatus||(n.WGLGeometryTransactionStatus={}));(function(l){l[l.NONE=0]="NONE";l[l.MAP=1]="MAP";l[l.LABEL=2]="LABEL";l[l.LABEL_ALPHA=4]="LABEL_ALPHA";l[l.HITTEST=8]="HITTEST";l[l.HIGHLIGHT=16]="HIGHLIGHT";l[l.CLIP=32]="CLIP";l[l.DEBUG=64]="DEBUG";l[l.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(n.WGLDrawPhase||(n.WGLDrawPhase={}));(function(l){l[l.SIZE=0]="SIZE";l[l.COLOR=1]="COLOR";l[l.OPACITY=2]="OPACITY";l[l.ROTATION=3]="ROTATION"})(n.VVType||(n.VVType=
{}));(function(l){l[l.NONE=0]="NONE";l[l.OPACITY=1]="OPACITY";l[l.COLOR=2]="COLOR";l[l.ROTATION=4]="ROTATION";l[l.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";l[l.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";l[l.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";l[l.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(n.WGLVVFlag||(n.WGLVVFlag={}));(function(l){l[l.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";l[l.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";l[l.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";l[l.UNIT_TARGETS_OUTLINE=
1024]="UNIT_TARGETS_OUTLINE"})(n.WGLVVTarget||(n.WGLVVTarget={}));(function(l){l[l.SPRITE=0]="SPRITE";l[l.GLYPH=1]="GLYPH"})(n.MosaicType||(n.MosaicType={}));Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/color":function(){define(["exports","./number"],function(n,l){function p(w,f){Array.isArray(f)?(w[0]=f[0],w[1]=f[1],w[2]=f[2],w[3]=f[3]):(w[0]=f.r,w[1]=f.g,w[2]=f.b,w[3]=f.a);return w}function z(w,f=0,k=!1){const m=w[f+3];w[f+0]*=m;w[f+1]*=m;w[f+2]*=m;k||(w[f+3]*=
255);return w}const y=[0,0,0,0];n.copyAndPremultiply=function(w){return z(p([],w))};n.premultiplyAlpha=z;n.premultiplyAlphaRGBA=function(w){if(!w)return 0;const {r:f,g:k,b:m,a:c}=w;return l.i8888to32(f*c,k*c,m*c,255*c)};n.premultiplyAlphaRGBAArray=function(w){if(!w)return 0;const [f,k,m,c]=w;return l.i8888to32(c/255*f,c/255*k,c/255*m,c)};n.premultiplyAlphaUint32=function(w){z(p(y,w));return l.i8888to32(y[0],y[1],y[2],y[3])};n.white=[255,255,255,1];Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(n){function l(y,w,f){return Math.round(Math.max(Math.min(y,f),w))}const p=new Float32Array(1),z=new Uint32Array(p.buffer);n.i16=function(y){return l(y,-32768,32767)};n.i1616to32=function(y,w){return 65535&y|w<<16};n.i32=function(y){return l(y,-2147483648,2147483647)};n.i8=function(y){return l(y,-128,127)};n.i8816to32=function(y,w,f){return y&255|(w&255)<<8|f<<16};n.i8888to32=function(y,w,f,k){return y&255|(w&255)<<8|(f&255)<<
16|k<<24};n.numTo32=function(y){return y|0};n.toFloat32=function(y){z[0]=y;return p[0]};n.toUint32=function(y){p[0]=y;return z[0]};n.u16=function(y){return l(y,0,65535)};n.u32=function(y){return l(y,0,4294967295)};n.u32to4Xu8=function(y){return[y&255,(y&65280)>>>8,(y&16711680)>>>16,(y&4278190080)>>>24]};n.u8=function(y){return l(y,0,255)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["exports","../../../../core/ObjectPool"],function(n,
l){let p=function(){function z(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}var y=z.prototype;y.acquire=function(w,f,k,m,c,e,q,d,g){this.color=w;this.haloColor=f;this.haloSize=k;this.size=m;this.angle=c;this.offsetX=e;this.offsetY=q;this.hAnchor=d;this.vAnchor=g};y.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=
this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};return z}();p.pool=new l(p);n.TextProperties=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(n){n.DEBUG_ATTR_UPDATES=!1;n.createDebugLogger=(l,p)=>l&&((...z)=>p.warn("DEBUG:",...z))||(()=>null);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/color ../../../../engine/webgl/visualVariablesUtils".split(" "),
function(n,l,p,z,y,w,f){function k(b){return{value:b.value,size:p.toPt(b.size)}}function m(b){return b.map(a=>k(a))}function c(b){return"string"===typeof b||"number"===typeof b?p.toPt(b):{type:"size",expression:b.expression,stops:m(b.stops)}}function e(b){const a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;b=b.stops;for(var h=0;8>h;++h){const r=b[Math.min(h,b.length-1)];a.values[h]=r.value;a.opacities[h]=r.opacity}}else return null;
else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].opacity,h=0;8>h;h++)a.values[h]=Infinity,a.opacities[h]=b;else return null;return a}function q(b,a,h){b[4*a]=h.r/255;b[4*a+1]=h.g/255;b[4*a+2]=h.b/255;b[4*a+3]=h.a}function d(b){if(l.isNone(b)||b.normalizationField)return null;const a={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;a.field=
b.field;b=b.stops;for(var h=0;8>h;++h){const r=b[Math.min(h,b.length-1)];a.values[h]=r.value;q(a.colors,h,r.color)}}else return null;else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].color,h=0;8>h;h++)a.values[h]=Infinity,q(a.colors,h,b);else return null;for(b=0;32>b;b+=4)w.premultiplyAlpha(a.colors,b,!0);return a}const g=b=>{const a=[],h=[];b=m(b);const r=b.length;for(let t=0;6>t;t++){const v=b[Math.min(t,r-1)];a.push(v.value);h.push(null==v.size?z.NAN_MAGIC_NUMBER:
p.pt2px(v.size))}return{values:new Float32Array(a),sizes:new Float32Array(h)}};n.convertColorVariable=d;n.convertVisualVariables=function(b){const a=b&&0<b.length?{}:null,h=a?{}:null;if(!a)return{vvFields:a,vvRanges:h};for(const r of b)if(r.field&&(a[r.type]=r.field),"size"===r.type)switch(h.size||(h.size={}),b=r,f.getTypeOfSizeVisualVariable(b)){case y.WGLVVFlag.SIZE_MINMAX_VALUE:h.size.minMaxValue={minDataValue:b.minDataValue,maxDataValue:b.maxDataValue,minSize:c(b.minSize),maxSize:c(b.maxSize)};
break;case y.WGLVVFlag.SIZE_SCALE_STOPS:h.size.scaleStops={stops:m(b.stops)};break;case y.WGLVVFlag.SIZE_FIELD_STOPS:if(b.levels){const t={};for(const v in b.levels)t[v]=g(b.levels[v]);h.size.fieldStops={type:"level-dependent",levels:t}}else h.size.fieldStops={type:"static",...g(b.stops)};break;case y.WGLVVFlag.SIZE_UNIT_VALUE:h.size.unitValue={unit:b.valueUnit,valueRepresentation:b.valueRepresentation}}else"color"===r.type?h.color=d(r):"opacity"===r.type?h.opacity=e(r):"rotation"===r.type&&(h.rotation=
{type:r.rotationType});return{vvFields:a,vvRanges:h}};n.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};n.getVisualVariablesFields=function(b){const a=b&&0<b.length?{}:null;a&&b.forEach(h=>{const r=h.type;h.field&&(a[r]=h.field)});return a};n.normalizeSizeElement=c;n.normalizeSizeStops=m;n.stopToSizeStop=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports",
"../../../../core/Logger","../../../../core/Error","./enums","./Utils"],function(n,l,p,z,y){const w=l.getLogger("esri.views.2d.engine.webgl");n.getTypeOfSizeVisualVariable=function(f){if(y.isNumber(f.minDataValue)&&y.isNumber(f.maxDataValue)&&null!=f.minSize&&null!=f.maxSize)return z.WGLVVFlag.SIZE_MINMAX_VALUE;if((f.expression&&"view.scale"===f.expression||f.valueExpression&&"$view.scale"===f.valueExpression)&&Array.isArray(f.stops))return z.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=f.field||f.expression&&
"view.scale"!==f.expression||f.valueExpression&&"$view.scale"!==f.valueExpression)&&(Array.isArray(f.stops)||"levels"in f&&f.levels))return z.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=f.field||f.expression&&"view.scale"!==f.expression||f.valueExpression&&"$view.scale"!==f.valueExpression)&&null!=f.valueUnit)return z.WGLVVFlag.SIZE_UNIT_VALUE;w.error(new p("mapview-bad-type","Found invalid size VisualVariable",f));return z.WGLVVFlag.NONE};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports",
"./displayIdUtils","./StaticBitSet"],function(n,l,p){function z(w,f,k){if(!(w.length>f))for(;w.length<=f;)w.push(k)}let y=function(){function w(){this._numerics=[];this._strings=[];this._idGenerator=new l.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var f=w.prototype;f.createBitset=function(){const k=this._bitsets.length;this._bitsets.push(p.StaticBitSet.create(this._allocatedSize,2147483647));return k+1};f.getBitset=function(k){return this._bitsets[k-
1]};f._expand=function(){this._allocatedSize<<=1;for(const k of this._bitsets)k.resize(this._allocatedSize)};f._ensureNumeric=function(k,m){this._numerics[k]||(this._numerics[k]=[]);z(this._numerics[k],m,0)};f._ensureInstanceId=function(k){z(this._instanceIds,k,0)};f._ensureString=function(k,m){this._strings[k]||(this._strings[k]=[]);z(this._strings[k],m,null)};f.createDisplayId=function(k=!1){const m=this._idGenerator.createId();m>this._allocatedSize&&this._expand();return((k?2147483648:0)|m)>>>
0};f.releaseDisplayId=function(k){for(const m of this._bitsets)m.unset(k);return this._idGenerator.releaseId(k&2147483647)};f.getComputedNumeric=function(k,m){return this.getComputedNumericAtIndex(k&2147483647,0)};f.setComputedNumeric=function(k,m,c){return this.setComputedNumericAtIndex(k&2147483647,c,0)};f.getComputedString=function(k,m){return this.getComputedStringAtIndex(k&2147483647,0)};f.setComputedString=function(k,m,c){return this.setComputedStringAtIndex(k&2147483647,0,c)};f.getComputedNumericAtIndex=
function(k,m){k&=2147483647;this._ensureNumeric(m,k);return this._numerics[m][k]};f.setComputedNumericAtIndex=function(k,m,c){k&=2147483647;this._ensureNumeric(m,k);this._numerics[m][k]=c};f.getInstanceId=function(k){k&=2147483647;this._ensureInstanceId(k);return this._instanceIds[k]};f.setInstanceId=function(k,m){k&=2147483647;this._ensureInstanceId(k);this._instanceIds[k]=m};f.getComputedStringAtIndex=function(k,m){k&=2147483647;this._ensureString(m,k);return this._strings[m][k]};f.setComputedStringAtIndex=
function(k,m,c){k&=2147483647;this._ensureString(m,k);this._strings[m][k]=c};f.getXMin=function(k){return this._bounds[4*(k&2147483647)]};f.getYMin=function(k){return this._bounds[4*(k&2147483647)+1]};f.getXMax=function(k){return this._bounds[4*(k&2147483647)+2]};f.getYMax=function(k){return this._bounds[4*(k&2147483647)+3]};f.setBounds=function(k,m){m=m.readHydratedGeometry();if(!m||!m.coords.length)return!1;let c=Infinity,e=Infinity,q=-Infinity,d=-Infinity;m.forEachVertex((g,b)=>{c=Math.min(c,g);
e=Math.min(e,b);q=Math.max(q,g);d=Math.max(d,b)});k&=2147483647;z(this._bounds,4*k+4,0);this._bounds[4*k]=c;this._bounds[4*k+1]=e;this._bounds[4*k+2]=q;this._bounds[4*k+3]=d;return!0};return w}();n.ComputedAttributeStorage=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/displayIdUtils":function(){define(["exports"],function(n){let l=function(){function p(){this._freeIds=[];this._idCounter=1}var z=p.prototype;z.createId=function(y=!1){var w=this._getFreeId();
return((y?2147483648:0)|w)>>>0};z.releaseId=function(y){this._freeIds.push(y)};z._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return p}();n.DISPLAY_ID_TYPE_AGGREGATE=1;n.DISPLAY_ID_TYPE_FEATURE=0;n.DisplayIdGenerator=l;n.getDisplayIdIndex=function(p){return p&2147483647};n.getDisplayIdType=function(p){return(p&2147483648)>>>31};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports"],
function(n){let l=function(){function p(y,w){this._mask=0;this._buf=y;this._mask=w}p.fromBuffer=function(y,w){return new p(y,w)};p.create=function(y,w=4294967295){y=new Uint32Array(Math.ceil(y/32));return new p(y,w)};var z=p.prototype;z._getIndex=function(y){return Math.floor(y/32)};z.has=function(y){y&=this._mask;return!!(this._buf[this._getIndex(y)]&1<<y%32)};z.set=function(y){y&=this._mask;const w=this._getIndex(y);this._buf[w]|=1<<y%32};z.unset=function(y){y&=this._mask;const w=this._getIndex(y);
this._buf[w]&=4294967295^1<<y%32};z.resize=function(y){const w=this._buf;y=new Uint32Array(Math.ceil(y/32));y.set(w);this._buf=y};z.or=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]|=y._buf[w];return this};z.and=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]&=y._buf[w];return this};z.xor=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]^=y._buf[w];return this};z.ior=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]|=~y._buf[w];return this};z.iand=function(y){for(let w=
0;w<this._buf.length;w++)this._buf[w]&=~y._buf[w];return this};z.ixor=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]^=~y._buf[w];return this};z.any=function(){for(let y=0;y<this._buf.length;y++)if(this._buf[y])return!0;return!1};z.copy=function(y){for(let w=0;w<this._buf.length;w++)this._buf[w]=y._buf[w];return this};z.clone=function(){return new p(this._buf.slice(),this._mask)};z.clear=function(){for(let y=0;y<this._buf.length;y++)this._buf[y]=0};z.forEachSet=function(y){for(let w=0;w<
this._buf.length;w++){let f=this._buf[w],k=32*w;if(f)for(;f;)f&1&&y(k),f>>>=1,k++}};z.countSet=function(){let y=0;this.forEachSet(w=>{y++});return y};return p}();n.StaticBitSet=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/FeatureStore2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/Evented ../../../../geometry/support/aaBoundingBox ../../../../chunks/rbush ./Store2D".split(" "),function(n,l,
p,z,y,w,f){const k={getObjectId(m){return m.getObjectId()},getAttributes(m){return m.readAttributes()},getAttribute(m,c){return m.readAttribute(c)},cloneWithGeometry(m,c){return m},getGeometry(m){return m.readHydratedGeometry()},getCentroid(m,c){return m.readCentroid()}};f=function(m){function c(q,d){var g=m.call(this,q,d)||this;g.featureAdapter=k;g.events=new z;g._featureSetsByInstance=new Map;g._objectIdToDisplayId=new Map;g._spatialIndexInvalid=!0;g._index=w.rbush(9,b=>({minX:g._storage.getXMin(b),
minY:g._storage.getYMin(b),maxX:g._storage.getXMax(b),maxY:g._storage.getYMax(b)}));return g}l._inheritsLoose(c,m);var e=c.prototype;e.onTileData=function(q,d,g){if(p.isNone(d.addOrUpdate))return d;this._featureSetsByInstance.set(d.addOrUpdate.instance,d.addOrUpdate);this._storage=g;d.addOrUpdate._storage=g;const b=d.addOrUpdate.getCursor();for(;b.next();){const h=b.getObjectId();var a=b.getIndex();a|=b.instance<<16;let r=this._objectIdToDisplayId.get(h);r||(r=g.createDisplayId(),this._objectIdToDisplayId.set(h,
r),this._spatialIndexInvalid=!0);b.setDisplayId(r);g.setInstanceId(r,a);this.setComputedAttributes(g,b,r,q.scale)}"update"===d.type&&(this._spatialIndexInvalid=!0);this.events.emit("changed");return d};e.forEach=function(q){this._objectIdToDisplayId.forEach(d=>{d=this._storage.getInstanceId(d);d=this._lookupFeature(d);q(d)})};e.forEachUnsafe=function(q){this._objectIdToDisplayId.forEach(d=>{var g=this._storage.getInstanceId(d);d=65535&g;g=this._getFeatureSet((4294901760&g)>>>16);g.setIndex(d);q(g)})};
e.forEachInBounds=function(q,d){q=this._searchIndex(q);for(const g of q)q=this.lookupFeatureByDisplayId(g,this._storage),d(p.unwrap(q))};e.forEachBounds=function(q,d,g){this._rebuildIndex();const b=[0,0,0,0];for(const a of q)a.readGeometry()&&(q=a.getDisplayId(),b[0]=this._storage.getXMin(q),b[1]=this._storage.getYMin(q),b[2]=this._storage.getXMax(q),b[3]=this._storage.getYMax(q),d(y.fromRect(g,b)))};e.sweepFeatures=function(q,d,g){this._objectIdToDisplayId.forEach((b,a)=>{q.has(b)||(d.releaseDisplayId(b),
g.unsetAttributeData(b),this._objectIdToDisplayId.delete(a))});this.events.emit("changed")};e.sweepFeatureSets=function(q){this._featureSetsByInstance.forEach((d,g)=>{q.has(g)||this._featureSetsByInstance.delete(g)})};e.lookupObjectId=function(q,d){q=this.lookupFeatureByDisplayId(q,d);return p.isNone(q)?null:q.getObjectId()};e.lookupDisplayId=function(q){return this._objectIdToDisplayId.get(q)};e.lookupFeatureByDisplayId=function(q,d){q=d.getInstanceId(q);return this._lookupFeature(q)};e.lookupByDisplayIdUnsafe=
function(q){var d=this._storage.getInstanceId(q);q=65535&d;d=this._getFeatureSet((4294901760&d)>>>16);if(!d)return null;d.setIndex(q);return d};e.hasInstance=function(q){return this._featureSetsByInstance.has(q)};e._rebuildIndex=function(){if(this._spatialIndexInvalid){this._index.clear();var q=[];this._objectIdToDisplayId.forEach(d=>{const g=this._storage.getInstanceId(d);this._storage.setBounds(d,this._lookupFeature(g))&&q.push(d)});this._index.load(q);this._spatialIndexInvalid=!1}};e._lookupFeature=
function(q){const d=65535&q;q=this._getFeatureSet((4294901760&q)>>>16);if(!q)return null;q=q.getCursor();q.setIndex(d);return q};e._getFeatureSet=function(q){return this._featureSetsByInstance.get(q)};e._searchIndex=function(q){this._rebuildIndex();return this._index.search({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]})};l._createClass(c,[{key:"storeStatistics",get:function(){return{featureCount:0,vertexCount:0}}}]);return c}(f.Store2D);n.FeatureStore2D=f;n.featureAdapter=k;Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(n,l,p,z){function y(a=g){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function w(a,h,r,t,v,x,u=y()){u[0]=a;u[1]=h;u[2]=r;u[3]=t;u[4]=v;u[5]=x;return u}function f(a){return a[0]>=a[3]?0:a[3]-a[0]}function k(a){return a[1]>=a[4]?0:a[4]-a[1]}function m(a){return a[2]>=a[5]?0:a[5]-a[2]}function c(a,h){return Math.max(h[0],a[0])<=Math.min(h[3],a[3])&&Math.max(h[1],a[1])<=
Math.min(h[4],a[4])&&Math.max(h[2],a[2])<=Math.min(h[5],a[5])}function e(a,h){a[0]=h[0];a[1]=h[1];a[2]=h[2];a[3]=h[3];a[4]=h[4];a[5]=h[5];return a}function q(a){return 6===a.length}const d=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],b=y();n.NEGATIVE_INFINITY=d;n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.ZERO=g;n.allFinite=function(a){for(let h=0;6>h;h++)if(!isFinite(a[h]))return!1;return!0};n.center=function(a,h=[0,0,0]){h[0]=a[0]+
f(a)/2;h[1]=a[1]+k(a)/2;h[2]=a[2]+m(a)/2;return h};n.contains=function(a,h){return h[0]>=a[0]&&h[1]>=a[1]&&h[2]>=a[2]&&h[3]<=a[3]&&h[4]<=a[4]&&h[5]<=a[5]};n.containsPoint=function(a,h){return h[0]>=a[0]&&h[1]>=a[1]&&h[2]>=a[2]&&h[0]<=a[3]&&h[1]<=a[4]&&h[2]<=a[5]};n.containsPointWithMargin=function(a,h,r){return h[0]>=a[0]-r&&h[1]>=a[1]-r&&h[2]>=a[2]-r&&h[0]<=a[3]+r&&h[1]<=a[4]+r&&h[2]<=a[5]+r};n.create=y;n.depth=k;n.diameter=function(a){const h=f(a),r=m(a);a=k(a);return Math.sqrt(h*h+r*r+a*a)};n.empty=
function(a){return a?e(a,d):y(d)};n.equals=function(a,h,r){if(l.isNone(a)||l.isNone(h))return a===h;if(!q(a)||!q(h))return!1;if(r)for(let t=0;t<a.length;t++){if(!r(a[t],h[t]))return!1}else for(r=0;r<a.length;r++)if(a[r]!==h[r])return!1;return!0};n.expandWithAABB=function(a,h){a[0]=Math.min(a[0],h[0]);a[1]=Math.min(a[1],h[1]);a[2]=Math.min(a[2],h[2]);a[3]=Math.max(a[3],h[3]);a[4]=Math.max(a[4],h[4]);a[5]=Math.max(a[5],h[5])};n.expandWithBuffer=function(a,h,r=0,t=h.length/3){let v=a[0],x=a[1],u=a[2],
D=a[3],B=a[4],A=a[5];for(let C=0;C<t;C++)v=Math.min(v,h[r+3*C]),x=Math.min(x,h[r+3*C+1]),u=Math.min(u,h[r+3*C+2]),D=Math.max(D,h[r+3*C]),B=Math.max(B,h[r+3*C+1]),A=Math.max(A,h[r+3*C+2]);a[0]=v;a[1]=x;a[2]=u;a[3]=D;a[4]=B;a[5]=A};n.expandWithNestedArray=function(a,h,r){const t=h.length;let v=a[0],x=a[1],u=a[2],D=a[3],B=a[4],A=a[5];if(r)for(r=0;r<t;r++){var C=h[r];v=Math.min(v,C[0]);x=Math.min(x,C[1]);u=Math.min(u,C[2]);D=Math.max(D,C[0]);B=Math.max(B,C[1]);A=Math.max(A,C[2])}else for(r=0;r<t;r++)C=
h[r],v=Math.min(v,C[0]),x=Math.min(x,C[1]),D=Math.max(D,C[0]),B=Math.max(B,C[1]);a[0]=v;a[1]=x;a[2]=u;a[3]=D;a[4]=B;a[5]=A};n.expandWithOffset=function(a,h,r,t){a[0]=Math.min(a[0],a[0]+h);a[3]=Math.max(a[3],a[3]+h);a[1]=Math.min(a[1],a[1]+r);a[4]=Math.max(a[4],a[4]+r);a[2]=Math.min(a[2],a[2]+t);a[5]=Math.max(a[5],a[5]+t)};n.expandWithRect=function(a,h){a[0]=Math.min(a[0],h[0]);a[1]=Math.min(a[1],h[1]);a[3]=Math.max(a[3],h[2]);a[4]=Math.max(a[4],h[3])};n.expandWithVec3=function(a,h){a[0]=Math.min(a[0],
h[0]);a[1]=Math.min(a[1],h[1]);a[2]=Math.min(a[2],h[2]);a[3]=Math.max(a[3],h[0]);a[4]=Math.max(a[4],h[1]);a[5]=Math.max(a[5],h[2])};n.fromExtent=function(a,h=y()){h[0]=a.xmin;h[1]=a.ymin;h[2]=a.zmin;h[3]=a.xmax;h[4]=a.ymax;h[5]=a.zmax;return h};n.fromMinMax=function(a,h,r=y()){r[0]=a[0];r[1]=a[1];r[2]=a[2];r[3]=h[0];r[4]=h[1];r[5]=h[2];return r};n.fromRect=function(a,h){a[0]=h[0];a[1]=h[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=h[2];a[4]=h[3];a[5]=Number.POSITIVE_INFINITY;return a};n.fromValues=w;n.getMax=
function(a,h){h[0]=a[3];h[1]=a[4];h[2]=a[5];return h};n.getMin=function(a,h){h[0]=a[0];h[1]=a[1];h[2]=a[2];return h};n.height=m;n.intersects=c;n.intersectsClippingArea=function(a,h){return l.isNone(h)?!0:c(a,h)};n.is=q;n.isPoint=function(a){return 0===f(a)&&0===k(a)&&0===m(a)};n.maximumDimension=function(a){return Math.max(f(a),m(a),k(a))};n.offset=function(a,h,r,t,v=a){v[0]=a[0]+h;v[1]=a[1]+r;v[2]=a[2]+t;v[3]=a[3]+h;v[4]=a[4]+r;v[5]=a[5]+t;return v};n.scale=function(a,h,r=a){const t=a[0]+f(a)/2,
v=a[1]+k(a)/2,x=a[2]+m(a)/2;r[0]=t+(a[0]-t)*h;r[1]=v+(a[1]-v)*h;r[2]=x+(a[2]-x)*h;r[3]=t+(a[3]-t)*h;r[4]=v+(a[4]-v)*h;r[5]=x+(a[5]-x)*h;return r};n.set=e;n.setMax=function(a,h,r=a){r[3]=h[0];r[4]=h[1];r[5]=h[2];r!==a&&(r[0]=a[0],r[1]=a[1],r[2]=a[2]);return a};n.setMin=function(a,h,r=a){r[0]=h[0];r[1]=h[1];r[2]=h[2];r!==a&&(r[3]=a[3],r[4]=a[4],r[5]=a[5]);return r};n.size=function(a,h=[0,0,0]){h[0]=f(a);h[1]=k(a);h[2]=m(a);return h};n.toExtent=function(a,h){return isFinite(a[2])||isFinite(a[5])?new p({xmin:a[0],
xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:h}):new p({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:h})};n.toRect=function(a,h){h||(h=z.create());h[0]=a[0];h[1]=a[1];h[2]=a[3];h[3]=a[4];return h};n.width=f;n.wrap=function(a,h,r,t,v,x){return w(a,h,r,t,v,x,b)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/Store2D":function(){define("require exports ../../../../core/has ../../../../core/maybe ../../../../core/promiseUtils ../../../../support/arcadeOnDemand ../../../../core/accessorSupport/diffUtils ../../arcade/callExpressionWithCursor".split(" "),
function(n,l,p,z,y,w,f,k){const m=new Promise(function(e,q){n(["../../../../layers/support/labelFormatUtils"],e,q)});let c=function(){function e(d,g){this._canCacheExpressionValue=!1;this._sourceInfo=d;this._bitsets={computed:g.getBitset(g.createBitset())}}var q=e.prototype;q.updateSchema=async function(d,g){var b=f.diff(this._schema,g);if((this._schema=g)&&!z.isNone(b)&&f.hasDiff(b,"attributes")){p("esri-2d-update-debug")&&console.debug("Applying Update - Store:",b);this._bitsets.computed.clear();
d.targets[g.name]=!0;d=g.attributes;g=[];b=[];for(const a in d){const h=d[a];switch(h.type){case "expression":g.push(this._createArcadeComputedField(h));break;case "label-expression":g.push(this._createLabelArcadeComputedField(h));break;case "statistic":b.push(h)}}this._computedFields=await y.all(g);this._canCacheExpressionValue=!this._computedFields.some(a=>"expression"===a.type&&a.expression.referencesScale());this._statisticFields=b}};q.setComputedAttributes=function(d,g,b,a){var h=this._bitsets.computed;
if(!this._canCacheExpressionValue||!h.has(b)){h.set(b);for(const r of this._computedFields)switch(h=this._evaluateField(g,r,a),r.resultType){case "numeric":d.setComputedNumericAtIndex(b,r.fieldIndex,h);break;case "string":d.setComputedStringAtIndex(b,r.fieldIndex,h)}}};q._createArcadeComputedField=async function(d){return{...d,expression:await w.createRendererExpression(d.valueExpression,this._sourceInfo.spatialReference,this._sourceInfo.fieldsIndex)}};q._createLabelArcadeComputedField=async function(d){var g=
this._sourceInfo.spatialReference;const b=this._sourceInfo.fields,{createLabelFunction:a}=await m;g=await a(d.label,b,g);return{...d,builder:g}};q._evaluateField=function(d,g,b){switch(g.type){case "label-expression":return d=d.readArcadeFeature(),g.builder.evaluate(d)||"";case "expression":return{expression:g}=g,k(g,d,{$view:{scale:b}})}};return e}();l.Store2D=c;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/maybe ../core/promiseUtils ../geometry/SpatialReference ../geometry".split(" "),
function(n,l,p,z,y,w){async function f(){k||(k=(async()=>{const c=await new Promise(function(e,q){n(["./arcadeUtils"],e,q)});await c.arcade.load();return{arcade:c.arcade,arcadeUtils:c,Dictionary:c.Dictionary,Feature:c.arcadeFeature}})());return k}let k;w=(c,e,q)=>m.create(c,e,q,null,["$feature","$view"]);let m=function(){function c(q,d,g,b,a,h,r,t){this.script=q;this.evaluate=a;this.fields=r;this._syntaxTree=b;this._arcade=d;this._arcadeDictionary=g;this._arcadeFeature=h;this._spatialReference=t;
this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}c.create=async function(q,d,g,b,a,h){const {arcade:r,Feature:t,Dictionary:v}=await f(),x=y.fromJSON(d);d=r.parseScript(q,h);a=a.reduce((C,E)=>({...C,[E]:null}),{});let u=null;p.isSome(b)&&(u=new v(b),u.immutable=!0,a.$config=null);b=r.scriptUsesGeometryEngine(d)&&r.enableGeometrySupport();h=r.scriptUsesFeatureSet(d)&&r.enableFeatureSetSupport();const D=r.scriptIsAsync(d)&&
r.enableAsyncSupport();a={vars:a,spatialReference:x,useAsync:!!D};const B=new v;B.immutable=!1;B.setField("scale",0);const A=r.compileScript(d,a);await z.all([b,h,D]);return new c(q,r,v,d,C=>{"$view"in C&&C.$view&&(B.setField("scale",C.$view.scale),C.$view=B);u&&(C.$config=u);return A({vars:C,spatialReference:x})},new t,g,x)};var e=c.prototype;e.repurposeFeature=function(q){q.geometry&&!q.geometry.spatialReference&&(q.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(q.geometry,
q.attributes,{fields:this.fields});return this._arcadeFeature};e.repurposeAdapter=function(q){this._arcadeFeature.repurposeFromAdapter(q,{fields:this.fields});return this._arcadeFeature};e.createDictionary=function(){return new this._arcadeDictionary};e.referencesMember=function(q){return this._arcade.referencesMember(this._syntaxTree,q)};e.referencesFunction=function(q){return this._arcade.referencesFunction(this._syntaxTree,q)};e.referencesGeometry=function(){return this._referencesGeometry};e.referencesScale=
function(){return this._referencesScale};e.extractFieldLiterals=function(q){return this._arcade.extractFieldLiterals(this._syntaxTree,q)};return c}();l.ArcadeExpression=m;l.createDictionaryExpression=(c,e,q,d)=>m.create(c,e,q,d,["$feature","$view"]);l.createLabelExpression=(c,e,q)=>m.create(c,e,q,null,["$feature"]);l.createRendererExpression=w;l.createVVExpression=w;l.default=m;l.loadArcade=f;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithCursor":function(){define(["../../../core/Logger"],
function(n){return function(l,p,z){l.referencesGeometry();p=p.readArcadeFeature();try{return l.evaluate({...z,$feature:p})}catch(y){return n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",y),null}}})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ../../../chunks/spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x){function u(G){return G.every(J=>"exceedslimit"!==J.statisticType)}const D=new Set,B=new e.MemCacheStorage(2E6);let A=0,C=function(){function G(K){this.capabilities={query:b.queryCapabilities};this.geometryType=K.geometryType;this.hasM=K.hasM;this.hasZ=K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new e.MemCache(A++ +"$$",B));this.fieldsIndex=new g(K.fields);K.scheduler&&K.task&&(this._frameQueue=new d,this._frameTask=K.scheduler.registerTask(K.task,L=>this._update(L),()=>0<this._frameQueue.length))}var J=G.prototype;J.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};J.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};J.executeQuery=async function(K={},L){let I=p.clone(K),N;try{I=await this._schedule(()=>t.normalizeQuery(I,this.definitionExpression,this.spatialReference),L),I=await this._reschedule(()=>this._checkQuerySupport(I),
L),N=await this._reschedule(()=>this._executeGeometryQuery(I,L),L),N=await this._reschedule(()=>N.executeAggregateIdsQuery(I),L),N=await this._reschedule(()=>N.executeObjectIdsQuery(I),L),N=await this._reschedule(()=>N.executeTimeQuery(I),L),N=await this._reschedule(()=>N.executeAttributesQuery(I),L)}catch(P){if(P!==t.QUERY_ENGINE_EMPTY_RESULT)throw P;N=new x([],null,this)}return N.createQueryResponse(I)};J.executeQueryForCount=async function(K={},L){let I=p.clone(K),N;I.returnGeometry=!1;I.returnCentroid=
!1;I.outSR=null;try{I=await this._schedule(()=>t.normalizeQuery(I,this.definitionExpression,this.spatialReference),L),I=await this._reschedule(()=>this._checkQuerySupport(I),L),N=await this._reschedule(()=>this._executeGeometryQuery(I,L),L),N=await this._reschedule(()=>N.executeAggregateIdsQuery(I),L),N=await this._reschedule(()=>N.executeObjectIdsQuery(I),L),N=await this._reschedule(()=>N.executeTimeQuery(I),L),N=await this._reschedule(()=>N.executeAttributesQuery(I),L)}catch(P){if(P!==t.QUERY_ENGINE_EMPTY_RESULT)throw P;
return 0}return N.createQueryResponseForCount(I)};J.executeQueryForExtent=async function(K={},L){let I=p.clone(K),N;K=I.outSR;try{I=await this._schedule(()=>t.normalizeQuery(I,this.definitionExpression,this.spatialReference),L);I=await this._reschedule(()=>this._checkQuerySupport(I),L);I.returnGeometry=!0;I.returnCentroid=!1;I.outSR=null;N=await this._reschedule(()=>this._executeGeometryQuery(I,L),L);N=await this._reschedule(()=>N.executeAggregateIdsQuery(I),L);N=await this._reschedule(()=>N.executeObjectIdsQuery(I),
L);N=await this._reschedule(()=>N.executeTimeQuery(I),L);N=await this._reschedule(()=>N.executeAttributesQuery(I),L);const P=N.size;if(!P)return{count:P,extent:null};a.set(F,a.NEGATIVE_INFINITY);this.featureStore.forEachBounds(N.items,W=>a.expandWithAABB(F,W),E);const R={xmin:F[0],ymin:F[1],xmax:F[3],ymax:F[4],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(F[2])&&isFinite(F[5])&&(R.zmin=F[2],R.zmax=F[5]);const T=h.project(R,N.spatialReference,K);T.spatialReference=
t.cleanFromGeometryEngine(K||this.spatialReference);if(0===T.xmax-T.xmin){const W=c.getMetersPerUnitForSR(T.spatialReference);T.xmin-=W;T.xmax+=W}if(0===T.ymax-T.ymin){const W=c.getMetersPerUnitForSR(T.spatialReference);T.ymin-=W;T.ymax+=W}if(this.hasZ&&null!=T.zmin&&null!=T.zmax&&0===T.zmax-T.zmin){const W=c.getMetersPerUnitForSR(T.spatialReference);T.zmin-=W;T.zmax+=W}return{count:P,extent:T}}catch(P){if(P===t.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw P;}};J.executeQueryForIds=
async function(K={},L){return this.executeQueryForIdSet(K,L).then(I=>Array.from(I))};J.executeQueryForIdSet=async function(K={},L){let I=p.clone(K),N;I.returnGeometry=!1;I.returnCentroid=!1;I.outSR=null;try{I=await this._schedule(()=>t.normalizeQuery(I,this.definitionExpression,this.spatialReference),L);I=await this._reschedule(()=>this._checkQuerySupport(I),L);N=await this._reschedule(()=>this._executeGeometryQuery(I,L),L);N=await this._reschedule(()=>N.executeAggregateIdsQuery(I),L);N=await this._reschedule(()=>
N.executeObjectIdsQuery(I),L);N=await this._reschedule(()=>N.executeTimeQuery(I),L);N=await this._reschedule(()=>N.executeAttributesQuery(I),L);const P=N.items,R=new Set;await this._reschedule(()=>{for(const T of P)R.add(N.featureAdapter.getObjectId(T))},L);return R}catch(P){if(P===t.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw P;}};J.executeQueryForLatestObservations=async function(K={},L){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",
{query:K,timeInfo:this.timeInfo});let I=p.clone(K),N;try{I=await this._schedule(()=>t.normalizeQuery(I,this.definitionExpression,this.spatialReference),L),I=await this._reschedule(()=>this._checkQuerySupport(I),L),N=await this._reschedule(()=>this._executeGeometryQuery(I,L),L),N=await this._reschedule(()=>N.executeAggregateIdsQuery(I),L),N=await this._reschedule(()=>N.executeObjectIdsQuery(I),L),N=await this._reschedule(()=>N.executeTimeQuery(I),L),N=await this._reschedule(()=>N.executeAttributesQuery(I),
L),N=await this._reschedule(()=>N.filterLatest(),L)}catch(P){if(P!==t.QUERY_ENGINE_EMPTY_RESULT)throw P;N=new x([],null,this)}return N.createQueryResponse(I)};J._schedule=async function(K,L){return this._frameQueue?this._frameQueue.push(K,L):K()};J._reschedule=async function(K,L){return this._frameQueue?this._frameQueue.unshift(K,L):K()};J._update=function(K){for(this._budget=K;!K.done&&this._frameQueue&&this._frameQueue.process();)K.madeProgress();this._budget=null};J._getAll=function(){if(!this._allItems){const K=
[];this.featureStore.forEach(L=>K.push(L));this._allItems=new x(K,null,this)}return this._allItems};J._executeGeometryQuery=async function(K,L){const {geometry:I,outSR:N,spatialRel:P}=K,R=f.isValid(N)&&!f.equals(this.spatialReference,N),T=this._geometryQueryCache?R?JSON.stringify({geometry:I,spatialRelationship:P,outSpatialReference:N}):JSON.stringify({geometry:I,spatialRelationship:P}):null;if(T){var W=this._geometryQueryCache.get(T);if(!z.isUndefined(W))return W}W=async O=>{if(R&&(K.returnGeometry||
K.returnCentroid))return O=await O.project(N),T&&this._geometryQueryCache.put(T,O,O.size||1),O;T&&this._geometryQueryCache.put(T,O,O.size||1);return O};if(!I)return W(this._getAll());const Z=this.featureAdapter;if("esriSpatialRelDisjoint"===P){const O=this._searchFeatures(this._getQueryBBoxes(I));if(!O.length)return W(this._getAll());let U,ba;const ka=new Set;for(var la of O)ka.add(Z.getObjectId(la));await this._reschedule(()=>{let oa=0;U=Array(ka.size);this.featureStore.forEach(M=>U[oa++]=M);ba=
ka},L);la=await this._reschedule(async()=>{const oa=await t.getSpatialQueryOperator(P,I,this.geometryType,this.hasZ,this.hasM);return new x(await this._runSpatialFilter(U,M=>!ba.has(Z.getObjectId(M))||oa(Z.getGeometry(M)),L),I,this)},L);return W(la)}la=this._searchFeatures(this._getQueryBBoxes(I));if(!la.length)return W=new x([],I,this),T&&this._geometryQueryCache.put(T,W,W.size||1),W;if(this._canExecuteSoloPass(I,K))return W(new x(la,I,this));const ea=await t.getSpatialQueryOperator(P,I,this.geometryType,
this.hasZ,this.hasM);la=await this._runSpatialFilter(la,O=>ea(Z.getGeometry(O)),L);return W(new x(la,I,this))};J._runSpatialFilter=async function(K,L,I){if(!L)return K;if(!this._budget)return K.filter(T=>L(T));let N=0;const P=[],R=async()=>{for(;N<K.length;){const T=K[N];L(T)&&P.push(T);this._budget.done&&await this._reschedule(()=>R(),I);++N}};return this._reschedule(()=>R(),I).then(()=>P)};J._canExecuteSoloPass=function(K,L){const {geometryType:I}=this;({spatialRel:L}=L);return t.canQueryWithRBush(K)&&
("esriSpatialRelEnvelopeIntersects"===L||"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L||"esriSpatialRelWithin"===L))};J._getQueryBBoxes=function(K){if(t.canQueryWithRBush(K)){if(m.isExtent(K))return[q.fromValues(K.xmin,K.ymin,K.xmax,K.ymax)];if(m.isPolygon(K))return K.rings.map(L=>q.fromValues(Math.min(L[0][0],L[2][0]),Math.min(L[0][1],L[2][1]),Math.max(L[0][0],L[2][0]),Math.max(L[0][1],L[2][1])))}return[k.getBoundsXY(q.create(),K)]};J._searchFeatures=function(K){for(const N of K)this.featureStore.forEachInBounds(N,
P=>{D.add(P)});const L=Array(D.size);let I=0;D.forEach(N=>L[I++]=N);D.clear();return L};J._checkQuerySupport=async function(K){if(0>K.distance||null!=K.geometryPrecision||K.multipatchOption||K.pixelSize||K.relationParam||K.text)throw new y("feature-store:unsupported-query","Unsupported query options",{query:K});return w.all([this._checkAttributesQuerySupport(K),this._checkStatisticsQuerySupport(K),t.checkSpatialQuerySupport(K,this.geometryType,this.spatialReference),h.checkProjectionSupport(this.spatialReference,
K.outSR)]).then(()=>K)};J._checkAttributesQuerySupport=function(K){const {outFields:L,orderByFields:I,returnDistinctValues:N,outStatistics:P}=K,R=P?P.map(T=>T.outStatisticFieldName&&T.outStatisticFieldName.toLowerCase()):[];if(I&&0<I.length){const T=I.map(W=>{const Z=W.toLowerCase();return-1<Z.indexOf(" asc")?Z.split(" asc")[0]:-1<Z.indexOf(" desc")?Z.split(" desc")[0]:W}).filter(W=>-1===R.indexOf(W));r.validateFields(this.fieldsIndex,T,"orderByFields contains missing fields")}if(L&&0<L.length)r.validateFields(this.fieldsIndex,
L,"outFields contains missing fields");else if(N)throw new y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:K});r.validateWhere(this.fieldsIndex,K.where)};J._checkStatisticsQuerySupport=async function(K){const {outStatistics:L,groupByFieldsForStatistics:I,having:N}=K;var P=I&&I.length,R=L&&L.length;if(N){if(!P||!R)throw new y("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:K});
r.validateHaving(this.fieldsIndex,N,L)}if(R&&u(L)){R=L.map(T=>T.onStatisticField);r.validateFields(this.fieldsIndex,R,"onStatisticFields contains missing fields");P&&r.validateFields(this.fieldsIndex,I,"groupByFieldsForStatistics contains missing fields");for(const T of L){const {onStatisticField:W,statisticType:Z}=T;if(("percentile_disc"===Z||"percentile_cont"===Z)&&"statisticParameters"in T){if({statisticParameters:P}=T,!P)throw new y("feature-store:unsupported-query","statisticParamters should be set for percentile type",
{definition:T,query:K});}else if("count"!==Z&&W&&r.hasInvalidFieldType(W,this.fieldsIndex))throw new y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:T,query:K});}}};l._createClass(G,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const K=this.featureStore.fullBounds;return K?{xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",
get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=v.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return G}();const E=a.create(),F=a.create();n.Feature=function(G,J=null,K,L,I){this.attributes=G;this.geometry=K;this.centroid=L;this.filterFlags=I;this.groupId=-1;this.displayId=J};n.default=C;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(n,
l,p){let z=function(){function w(k,m,c){this._namespace=k;this._storage=m;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";c&&(this._storage.registerRemoveFunc(this._namespace,c),this._removeFunc=!0)}var f=w.prototype;f.resetHitRate=function(){this._hit=this._miss=0};f.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};f.put=function(k,m,c,e=0){this._storage.put(this._namespace+
k,m,c,e)};f.get=function(k){k=this._storage.get(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};f.pop=function(k){k=this._storage.pop(this._namespace+k);void 0===k?++this._miss:++this._hit;return k};f.updateSize=function(k,m,c){this._storage.updateSize(this._namespace+k,m,c)};f.clear=function(){this._storage.clear(this._namespace)};f.clearAll=function(){this._storage.clearAll()};f.getStats=function(){return this._storage.getStats()};f.resetStats=function(){this._storage.resetStats()};
l._createClass(w,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return w}(),y=function(){function w(k=10485760){this._maxSize=k;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new p}var f=w.prototype;f.register=function(k){this._users.push(k)};f.deregister=
function(k){this._users.removeUnordered(k)};f.registerRemoveFunc=function(k,m){this._removeFuncs.push([k,m])};f.deregisterRemoveFunc=function(k){this._removeFuncs=this._removeFuncs.filter(m=>m[0]!==k)};f.put=function(k,m,c,e){const q=this._db.get(k);q&&(this._size-=q.size,this._db.delete(k),q.entry!==m&&this._notifyRemoved(k,q.entry));c>this._maxSize?this._notifyRemoved(k,m):void 0===m?console.warn("Refusing to cache undefined entry "):!c||0>c?console.warn("Refusing to cache entry with invalid size "+
c):(e=1+Math.max(e,-3)- -3,this._db.set(k,{entry:m,size:c,lifetime:e,lives:e}),this._size+=c,this._checkSizeLimit())};f.updateSize=function(k,m,c){const e=this._db.get(k);e&&e.entry===m&&(this._size-=e.size,c>this._maxSize?this._notifyRemoved(k,m):(e.size=c,this._size+=c,this._checkSizeLimit()))};f.pop=function(k){const m=this._db.get(k);if(m)return this._size-=m.size,this._db.delete(k),++this._hit,m.entry;++this._miss};f.get=function(k){const m=this._db.get(k);if(void 0===m)++this._miss;else return this._db.delete(k),
m.lives=m.lifetime,this._db.set(k,m),++this._hit,m.entry};f.getStats=function(){const k={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},c=[];this._db.forEach((d,g)=>{const b=d.lifetime;c[b]=(c[b]||0)+d.size;this._users.forAll(a=>{a=a.namespace;g.startsWith(a)&&(m[a]=(m[a]||0)+d.size)})});const e={};this._users.forAll(d=>{const g=d.namespace;!isNaN(d.hitRate)&&0<d.hitRate?(m[g]=
m[g]||0,e[g]=Math.round(100*d.hitRate)+"%"):e[g]="0%"});var q=Object.keys(m);q.forEach(d=>m[d]=m[d]/this._size*100);q.sort((d,g)=>m[g]-m[d]);q.forEach(d=>k[d]=Math.round(m[d])+"% / "+e[d]);for(q=c.length-1;0<=q;--q){const d=c[q];d&&(k["Priority "+(q+-3-1)]=Math.round(d/this.size*100)+"%")}return k};f.resetStats=function(){this._hit=this._miss=0;this._users.forAll(k=>k.resetHitRate())};f.clear=function(k){this._db.forEach((m,c)=>{c.startsWith(k)&&(this._size-=m.size,this._db.delete(c),this._notifyRemoved(c,
m.entry))})};f.clearAll=function(){this._db.forEach((k,m)=>this._notifyRemoved(m,k.entry));this._size=0;this._db.clear()};f._getHitRate=function(){return this._hit/(this._hit+this._miss)};f._notifyRemoved=function(k,m){this._removeFuncs.forEach(c=>{if(k.startsWith(c[0]))c[1](m)})};f._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [k,m]of this._db)if(this._db.delete(k),1>=m.lives?(this._size-=m.size,this._notifyRemoved(k,m.entry)):(--m.lives,this._db.set(k,m)),this._size<=.9*this.maxSize)break};
l._createClass(w,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(k){this._maxSize=Math.max(k,0);this._checkSizeLimit()}}]);return w}();n.MIN_PRIORITY=-3;n.MemCache=z;n.MemCacheStorage=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(n){n.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,
supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,
standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json".split(" "),function(n,l,p,z,y,w){function f(g,b){if(!b)return null;if("x"in b){var a={x:0,y:0};[a.x,a.y]=g(b.x,b.y,c);null!=b.z&&(a.z=
b.z);null!=b.m&&(a.m=b.m);return a}if("xmin"in b)return a={xmin:0,ymin:0,xmax:0,ymax:0},[a.xmin,a.ymin]=g(b.xmin,b.ymin,c),[a.xmax,a.ymax]=g(b.xmax,b.ymax,c),b.hasZ&&(a.zmin=b.zmin,a.zmax=b.zmax,a.hasZ=!0),b.hasM&&(a.mmin=b.mmin,a.mmax=b.mmax,a.hasM=!0),a;if("rings"in b)return{rings:k(b.rings,g),hasM:b.hasM,hasZ:b.hasZ};if("paths"in b)return{paths:k(b.paths,g),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:m(b.points,g),hasM:b.hasM,hasZ:b.hasZ}}function k(g,b){const a=[];for(const h of g)a.push(m(h,
b));return a}function m(g,b){const a=[];for(const h of g)g=b(h[0],h[1],[0,0]),a.push(g),2<h.length&&g.push(h[2]),3<h.length&&g.push(h[3]);return a}const c=[0,0],e=f.bind(null,z.lngLatToXY),q=f.bind(null,z.xyToLngLat),d=new (function(){function g(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var b=g.prototype;b.push=async function(a,h,r){a&&a.length&&h&&r&&p.equals(h,r);const t={geometries:a,inSpatialReference:h,outSpatialReference:r,resolve:null};this._jobs.push(t);return l.create(v=>
{t.resolve=v;null===this._timer&&(this._timer=setTimeout(this._process,10))})};b._process=function(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:h,inSpatialReference:r,outSpatialReference:t,resolve:v}=a;z.canProject(r,t)?p.isWebMercator(t)?v(h.map(e)):v(h.map(q)):v(y.projectMany(w.jsonAdapter,h,r,t,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return g}());n.checkProjectionSupport=async function(g,b){b&&(g=Array.isArray(g)?g.map(a=>{var h;return null==
(h=a.geometry)?void 0:h.spatialReference}):[g],await y.initializeProjection(g.map(a=>({source:a,dest:b}))))};n.project=function(g,b,a){if(!g)return g;a||(a=b,b=g.spatialReference);return p.isValid(b)&&p.isValid(a)&&!p.equals(b,a)?z.canProject(b,a)?p.isWebMercator(a)?e(g):q(g):y.projectMany(w.jsonAdapter,[g],b,a,null)[0]:g};n.projectMany=async function(g,b,a){return d.push(g,b,a)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D){function B(){return!!Fa&&v.isLoaded()}function A(ma){z.isNone(Ka)&&(Ka=w.all([v.load(),(new Promise(function(pa,ra){n(["../chunks/geometryEngineBase"],pa,ra)})).then(function(pa){return pa.geometryEngineBase}),new Promise(function(pa,ra){n(["./geometryAdapters/hydrated"],pa,ra)})]));return Ka.then(([,pa,{hydratedAdapter:ra}])=>{w.throwIfAborted(ma);Ha=ra;Fa=pa.default;Fa._enableProjection(v.pe)})}function C(ma,pa,ra,ua,Ba=null){if(z.isNone(ra)||
z.isNone(ua))return pa;if(F(ra,ua,Ba))return pa.map(Ea=>G(Ea,ra,ua));if(z.isNone(Ba)){const Ea=D.cacheKey(ra,ua);void 0!==Ia[Ea]?Ba=Ia[Ea]:(Ba=E(ra,ua,null),z.isNone(Ba)&&(Ba=new D),Ia[Ea]=Ba)}if(z.isNone(Fa))throw new Ja;return Fa._project(ma,pa,ra,ua,Ba)}function E(ma,pa,ra=null){if(z.isNone(Fa))throw new Ja;if(z.isNone(ma)||z.isNone(pa))return null;ma=Fa._getTransformation(Ha,ma,pa,ra,null==ra?void 0:ra.spatialReference);return null!==ma?D.fromGE(ma):null}function F(ma,pa,ra){return ra?!1:f.equals(ma,
pa)?!0:f.isValid(ma)&&f.isValid(pa)&&!!Aa(ma,pa,eb)}function G(ma,pa,ra){if(!ma)return ma;if("x"in ma){var ua=new m;return J(ma,pa,ua,ra)?ua:null}return"xmin"in ma?(ua=new c,N(ma,pa,ua,ra)?ua:null):"rings"in ma?(ua=new q,I(ma,pa,ua,ra)?ua:null):"paths"in ma?(ua=new d,L(ma,pa,ua,ra)?ua:null):"points"in ma?(ua=new e,K(ma,pa,ua,ra)?ua:null):null}function J(ma,pa,ra,ua,Ba=0){Ra[0]=ma.x;Ra[1]=ma.y;const Ea=ma.z;Ra[2]=void 0!==Ea?Ea:Ba;if(!W(Ra,pa,0,Ra,ua,0,1))return!1;ra.x=Ra[0];ra.y=Ra[1];ra.spatialReference=
ua;void 0===Ea?(ra.z=void 0,ra.hasZ=!1):(ra.z=Ra[2],ra.hasZ=!0);void 0===ma.m?(ra.m=void 0,ra.hasM=!1):(ra.m=ma.m,ra.hasM=!0);return!0}function K(ma,pa,ra,ua,Ba=0){const {points:Ea,hasZ:Na,hasM:Pa}=ma;ma=[];const Za=Ea.length,Ya=[];for(var Va of Ea)Ya.push(Va[0],Va[1],Na?Va[2]:Ba);if(!W(Ya,pa,0,Ya,ua,0,Za))return!1;for(pa=0;pa<Za;++pa){Ba=3*pa;Va=Ya[Ba];const gb=Ya[Ba+1];Na&&Pa?ma.push([Va,gb,Ya[Ba+2],Ea[pa][3]]):Na?ma.push([Va,gb,Ya[Ba+2]]):Pa?ma.push([Va,gb,Ea[pa][2]]):ma.push([Va,gb])}ra.points=
ma;ra.spatialReference=ua;ra.hasZ=Na;ra.hasM=Pa;return!0}function L(ma,pa,ra,ua,Ba=0){const {paths:Ea,hasZ:Na,hasM:Pa}=ma;ma=[];if(!Z(Ea,Na,Pa,pa,ma,ua,Ba))return!1;ra.paths=ma;ra.spatialReference=ua;ra.hasZ=Na;ra.hasM=Pa;return!0}function I(ma,pa,ra,ua,Ba=0){const {rings:Ea,hasZ:Na,hasM:Pa}=ma;ma=[];if(!Z(Ea,Na,Pa,pa,ma,ua,Ba))return!1;ra.rings=ma;ra.spatialReference=ua;ra.hasZ=Na;ra.hasM=Pa;return!0}function N(ma,pa,ra,ua,Ba=0){const {xmin:Ea,ymin:Na,xmax:Pa,ymax:Za,hasZ:Ya,hasM:Va}=ma;if(!P(Ea,
Na,Ya?ma.zmin:Ba,pa,Ra,ua))return!1;ra.xmin=Ra[0];ra.ymin=Ra[1];Ya&&(ra.zmin=Ra[2]);if(!P(Pa,Za,Ya?ma.zmax:Ba,pa,Ra,ua))return!1;ra.xmax=Ra[0];ra.ymax=Ra[1];Ya&&(ra.zmax=Ra[2]);Va&&(ra.mmin=ma.mmin,ra.mmax=ma.mmax);ra.spatialReference=ua;return!0}function P(ma,pa,ra,ua,Ba,Ea){Ma[0]=ma;Ma[1]=pa;Ma[2]=ra;return W(Ma,ua,0,Ba,Ea,0,1)}function R(ma,pa,ra,ua){if(z.isNone(pa)||z.isNone(ua)||2>ma.length)return!1;2===ma.length&&(Ma[0]=ma[0],Ma[1]=ma[1],Ma[2]=0,ma=Ma);return W(ma,pa,0,ra,ua,0,1)}function T(ma,
pa,ra){z.isNone(pa)?ma=!1:(pa=ea(pa,xa),pa=Sa[pa][6],z.isNone(pa)?ma=!1:(pa(ma,0,Ma,0),ra!==Ma&&(ra[0]=Ma[0],ra[1]=Ma[1],2<ra.length&&(ra[2]=Ma[2])),ma=!0));return ma}function W(ma,pa,ra,ua,Ba,Ea,Na=1){pa=Aa(pa,Ba,eb);if(z.isNone(pa))return!1;if(pa===O){if(ma===ua&&ra===Ea)return!0;Na=ra+3*Na;for(let Pa=ra,Za=Ea;Pa<Na;Pa++,Za++)ua[Za]=ma[Pa];return!0}Na=ra+3*Na;for(let Pa=ra,Za=Ea;Pa<Na;Pa+=3,Za+=3)pa(ma,Pa,ua,Za);return!0}function Z(ma,pa,ra,ua,Ba,Ea,Na=0){const Pa=[];for(const Za of ma)for(const Ya of Za)Pa.push(Ya[0],
Ya[1],pa?Ya[2]:Na);if(!W(Pa,ua,0,Pa,Ea,0,Pa.length/3))return!1;ua=0;Ba.length=0;for(const Za of ma){ma=[];for(const Ya of Za)pa&&ra?ma.push([Pa[ua++],Pa[ua++],Pa[ua++],Ya[3]]):pa?ma.push([Pa[ua++],Pa[ua++],Pa[ua++]]):(ra?ma.push([Pa[ua++],Pa[ua++],Ya[2]]):ma.push([Pa[ua++],Pa[ua++]]),ua++);Ba.push(ma)}return!0}function la(ma,pa,ra){const ua=Math.sin(pa);pa=Math.cos(pa);const Ba=Math.sin(ma);ma=Math.cos(ma);ra[0]=-ua;ra[4]=-Ba*pa;ra[8]=ma*pa;ra[12]=0;ra[1]=pa;ra[5]=-Ba*ua;ra[9]=ma*ua;ra[13]=0;ra[2]=
0;ra[6]=ma;ra[10]=Ba;ra[14]=0;ra[3]=0;ra[7]=0;ra[11]=0;ra[15]=1;return ra}function ea(ma,pa){if(pa.spatialReference===ma)return pa.spatialReferenceId;pa.spatialReference=ma;"metersPerUnit"in pa&&(pa.metersPerUnit=r.getMetersPerUnitForSR(ma,1));return ma.wkt===h.SphericalECEFSpatialReference.wkt?pa.spatialReferenceId=1:f.isWGS84(ma)?pa.spatialReferenceId=2:f.isWebMercator(ma)?pa.spatialReferenceId=3:ma.wkt===h.WGS84ECEFSpatialReference.wkt?pa.spatialReferenceId=4:4490===ma.wkid?pa.spatialReferenceId=
5:ma.wkt===h.SphericalPCPFMars.wkt?pa.spatialReferenceId=7:ma.wkt===h.SphericalPCPFMoon.wkt?pa.spatialReferenceId=9:f.isMars(ma)?pa.spatialReferenceId=8:f.isMoon(ma)?pa.spatialReferenceId=10:pa.spatialReferenceId=0}function O(ma,pa,ra,ua){ma!==ra&&(ra[ua++]=ma[pa++],ra[ua++]=ma[pa++],ra[ua]=ma[pa])}function U(ma,pa,ra,ua){ra[ua++]=ab*(ma[pa++]/k.earth.radius);ra[ua++]=ab*(Math.PI/2-2*Math.atan(Math.exp(-1*ma[pa++]/k.earth.radius)));ra[ua]=ma[pa]}function ba(ma,pa,ra,ua){U(ma,pa,ra,ua);Q(ra,ua,ra,
ua)}function ka(ma,pa,ra,ua){U(ma,pa,ra,ua);sa(ra,ua,ra,ua)}function oa(ma,pa,ra,ua){var Ba=.4999999*Math.PI;Ba=g.clamp(H*ma[pa+1],-Ba,Ba);Ba=Math.sin(Ba);ra[ua++]=H*ma[pa]*k.earth.radius;ra[ua++]=k.earth.halfSemiMajorAxis*Math.log((1+Ba)/(1-Ba));ra[ua]=ma[pa+2]}function M(ma,pa,ra,ua,Ba){Ba+=ma[pa+2];const Ea=H*ma[pa+1];ma=H*ma[pa];pa=Math.cos(Ea);ra[ua++]=Math.cos(ma)*pa*Ba;ra[ua++]=Math.sin(ma)*pa*Ba;ra[ua]=Math.sin(Ea)*Ba}function V(ma,pa,ra,ua){M(ma,pa,ra,ua,k.moon.radius)}function ha(ma,pa,
ra,ua){M(ma,pa,ra,ua,k.mars.radius)}function Q(ma,pa,ra,ua){M(ma,pa,ra,ua,k.earth.radius)}function X(ma,pa,ra,ua,Ba){var Ea=ma[pa];const Na=ma[pa+1];pa=ma[pa+2];ma=Math.sqrt(Ea*Ea+Na*Na+pa*pa);pa=g.asinClamped(pa/(0===ma?1:ma));Ea=Math.atan2(Na,Ea);ra[ua++]=ab*Ea;ra[ua++]=ab*pa;ra[ua]=ma-Ba}function aa(ma,pa,ra,ua){X(ma,pa,ra,ua,k.moon.radius)}function ca(ma,pa,ra,ua){X(ma,pa,ra,ua,k.mars.radius)}function ia(ma,pa,ra,ua){X(ma,pa,ra,ua,k.earth.radius)}function ja(ma,pa,ra,ua){ia(ma,pa,ra,ua);oa(ra,
ua,ra,ua)}function qa(ma,pa,ra,ua){ia(ma,pa,ra,ua);sa(ra,ua,ra,ua)}function sa(ma,pa,ra,ua){{var Ba=k.earth;const Na=H*ma[pa];var Ea=H*ma[pa+1];ma=ma[pa+2];pa=Math.sin(Ea);Ea=Math.cos(Ea);const Pa=Ba.radius/Math.sqrt(1-Ba.eccentricitySquared*pa*pa);ra[ua++]=(Pa+ma)*Ea*Math.cos(Na);ra[ua++]=(Pa+ma)*Ea*Math.sin(Na);ra[ua++]=(Pa*(1-Ba.eccentricitySquared)+ma)*pa}}function ta(ma,pa,ra,ua){var Ba=u.earthEllipsoidConstants,Ea=ma[pa],Na=ma[pa+1];ma=ma[pa+2];let Pa;pa=Math.abs(ma);var Za=Ea*Ea+Na*Na;var Ya=
Math.sqrt(Za);var Va=Za+ma*ma;var gb=Math.sqrt(Va);Ea=Math.atan2(Na,Ea);var jb=ma*ma/Va;Va=Za/Va;Na=Ba.a2/gb;Za=Ba.a3-Ba.a4/gb;.3<Va?(jb=pa/gb*(1+Va*(Ba.a1+Na+jb*Za)/gb),gb=Math.asin(jb),Na=jb*jb,Va=Math.sqrt(1-Na)):(Va=Ya/gb*(1-jb*(Ba.a5-Na-Va*Za)/gb),gb=Math.acos(Va),Na=1-Va*Va,jb=Math.sqrt(Na));Pa=1-k.earth.eccentricitySquared*Na;Na=k.earth.radius/Math.sqrt(Pa);Ba=Ba.a6*Na;Na=Ya-Na*Va;Za=pa-Ba*jb;pa=Va*Na+jb*Za;Ya=Va*Za-jb*Na;Ba=Ya/(Ba/Pa+pa);gb+=Ba;0>ma&&(gb=-gb);ra[ua++]=ab*Ea;ra[ua++]=ab*gb;
ra[ua]=pa+Ya*Ba/2}function va(ma,pa,ra,ua){ta(ma,pa,ra,ua);Q(ra,ua,ra,ua)}function wa(ma,pa,ra,ua){ta(ma,pa,ra,ua);oa(ra,ua,ra,ua)}function Aa(ma,pa,ra=Da()){return z.isNone(ma)||z.isNone(pa)?null:Ca(ma,pa,ra).projector}function Ca(ma,pa,ra){if(z.isNone(ma)||z.isNone(pa)||ra.source.spatialReference===ma&&ra.dest.spatialReference===pa)return ra;const ua=ea(ma,ra.source),Ba=ea(pa,ra.dest);0===ua&&0===Ba?f.equals(ma,pa)?ra.projector=O:ra.projector=null:ra.projector=Sa[ua][Ba];return ra}function Da(){return{source:{spatialReference:null,
spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:O}}let Fa=null,Ha=null,Ka=null,Ia={},Ja=function(ma){function pa(){return ma.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}p._inheritsLoose(pa,ma);return pa}(y);(function(ma){ma.x2lon=function(pa){return pa/k.earth.radius};ma.y2lat=function(pa){return Math.PI/2-2*Math.atan(Math.exp(-1*pa/k.earth.radius))};ma.lon2x=function(pa){return pa*
k.earth.radius};ma.lat2y=function(pa){pa=Math.sin(pa);return k.earth.radius/2*Math.log((1+pa)/(1-pa))}})(l.webMercator||(l.webMercator={}));const Sa={[2]:{[5]:null,[8]:null,[10]:null,[6]:O,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:oa,[2]:O,[4]:sa},[5]:{[5]:O,[8]:null,[10]:null,[6]:O,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:sa},[8]:{[5]:null,[8]:O,[10]:null,[6]:null,[1]:null,[7]:ha,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:O,[6]:null,[1]:null,[7]:null,[9]:V,
[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:U,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:O,[2]:U,[4]:ka},[4]:{[5]:ta,[8]:null,[10]:null,[6]:ta,[1]:va,[7]:null,[9]:null,[0]:null,[3]:wa,[2]:ta,[4]:O},[1]:{[5]:ia,[8]:null,[10]:null,[6]:ia,[1]:O,[7]:null,[9]:null,[0]:null,[3]:ja,[2]:ia,[4]:qa},[7]:{[5]:null,[8]:ca,[10]:null,[6]:null,[1]:null,[7]:O,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:aa,[6]:null,[1]:null,[7]:null,[9]:O,[0]:null,[3]:null,[2]:null,
[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:O,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:O,[1]:Q,[7]:null,[9]:null,[0]:null,[3]:null,[2]:O,[4]:sa}},xa={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},eb=Da(),db=Da(),H=g.deg2rad(1),ab=g.rad2deg(1),Ma=b.create(),ib=b.create(),lb=b.create(),Ra=b.create(),wb=b.create();l.canProjectToWGS84ComparableLonLat=function(ma){if(z.isNone(ma))return!1;ma=ea(ma,
xa);return!!Sa[ma][6]};l.canProjectWithoutEngine=F;l.computeLatLonToENURotation=la;l.computeLinearTransformation=function(ma,pa,ra,ua){if(z.isNone(ma)||z.isNone(ua))return!1;var Ba=ea(ma,xa),Ea=ea(ua,fb);if(Ba===Ea&&1!==Ea&&(0!==Ba||f.equals(ma,ua)))return t.identity(ra),t.translate(ra,ra,pa),!0;if(1===Ea||7===Ea||9===Ea){ua=ma=0;if(1===Ea){Ba=Sa[Ba][6];Ea=Sa[6][Ea];if(z.isNone(Ba)||z.isNone(Ea))return!1;Ba(pa,0,ib,0);Ea(ib,0,lb,0);ma=H*ib[0];ua=H*ib[1]}else if(7===Ea||9===Ea){Ea=Sa[Ba][Ea];if(z.isNone(Ea))return!1;
Ea(pa,0,lb,0);ma=H*pa[0];ua=H*pa[1]}la(ua,ma,ra);ra[12]=lb[0];ra[13]=lb[1];ra[14]=lb[2];return!0}if(3===Ea&&(2===Ba||1===Ba)){Ea=Sa[Ba][6];if(z.isNone(Ea))return!1;Ea(pa,0,ib,0);pa=H*ib[1];oa(ib,0,lb,0);t.identity(ra);t.translate(ra,ra,lb);pa=1/Math.cos(pa);t.scale(ra,ra,[pa,pa,1]);return!0}return!1};l.getProjectorName=function(ma,pa){switch(Aa(ma,pa,eb)){case O:return"copy3";case Q:return"wgs84ToSphericalECEF";case oa:return"wgs84ToWebMercator";case sa:return"wgs84ToWGS84ECEF";case U:return"webMercatorToWGS84";
case ba:return"webMercatorToSphericalECEF";case ka:return"webMercatorToWGS84ECEF";case ta:return"wgs84ECEFToWGS84";case va:return"wgs84ECEFToSphericalECEF";case wa:return"wgs84ECEFToWebMercator";case ia:return"sphericalECEFToWGS84";case ja:return"sphericalECEFToWebMercator";case ca:return"sphericalECEFToMars2000";case aa:return"sphericalECEFToMoon2000";case qa:return"sphericalECEFToWGS84ECEF";case ha:return"mars2000ToSphericalPCPF";case V:return"moon2000ToSphericalPCPF";default:return null}};l.getTransformation=
E;l.getTransformations=function(ma,pa,ra=null){if(z.isNone(Fa))throw new Ja;ma=Fa._getTransformationBySuitability(Ha,ma,pa,ra,null==ra?void 0:ra.spatialReference);if(null!==ma){pa=[];for(const ua of ma)pa.push(D.fromGE(ua));return pa}return[]};l.initializeProjection=async function(ma,pa){if(!B())for(const {source:ra,dest:ua,geographicTransformation:Ba}of ma)if(!F(ra,ua,Ba))return A(pa)};l.isLoaded=B;l.isSupported=function(){return!0};l.load=A;l.localLinearScaleFactors=function(ma,pa,ra,ua){if(z.isNone(pa)||
z.isNone(ua))return!1;const Ba=ea(pa,xa);var Ea=ea(ua,fb);if(Ba===Ea&&0!==Ba||f.equals(pa,ua))return ra[0]=1,ra[1]=1,ra[2]=1,!0;if(1===Ba){pa=a.length(ma);ma=pa/Math.sqrt(ma[0]*ma[0]+ma[1]*ma[1]);pa/=k.earth.radius;if(3===Ea)return ra[0]=ma*pa,ra[1]=ma*pa,ra[2]=1,!0;if(2===Ea||5===Ea)return Ea=180/(k.earth.radius*Math.PI),ra[0]=Ea*ma*pa,ra[1]=Ea*pa,ra[2]=1,!0}return!1};l.lonLatToSphericalPCPF=function(ma,pa,ra,ua,Ba=0){ua+=Ba;Ba=Math.cos(ra);ma[0]=Math.cos(pa)*Ba*ua;ma[1]=Math.sin(pa)*Ba*ua;ma[2]=
Math.sin(ra)*ua};l.project=function(ma,pa,ra=null){return Array.isArray(ma)?0===ma.length?[]:C(Ha,ma,ma[0].spatialReference,pa,ra):C(Ha,[ma],ma.spatialReference,pa,ra)[0]};l.projectBoundingRect=function(ma,pa,ra,ua){if(null==ma)return!1;if(f.equals(pa,ua))return x.set(ra,ma),!0;Ma[0]=ma[0];Ma[1]=ma[1];Ma[2]=0;if(!W(Ma,pa,0,Ma,ua,0,1))return!1;ra[0]=Ma[0];ra[1]=Ma[1];Ma[0]=ma[2];Ma[1]=ma[3];Ma[2]=0;if(!W(Ma,pa,0,Ma,ua,0,1))return!1;ra[2]=Ma[0];ra[3]=Ma[1];return!0};l.projectBoundingSphere=function(ma,
pa,ra,ua){if(z.isNone(pa)||z.isNone(ua))return!1;pa=Ca(pa,ua,db);if(pa.projector===O)return ra[0]=ma[0],ra[1]=ma[1],ra[2]=ma[2],ra[3]=ma[3],!0;if(z.isNone(pa.projector))return!1;const {source:Ba,dest:Ea}=pa;if(3===Ea.spatialReferenceId){pa=Sa[Ba.spatialReferenceId][2];if(z.isNone(pa))return!1;pa(ma,0,ib,0);pa=Math.abs(H*ib[1])+Math.asin(ma[3]/(k.earth.radius+ma[2]));oa(ib,0,ra,0);ra[3]=pa>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(pa)*ma[3];return!0}pa.projector(ma,0,ra,0);ra[3]=ma[3]*Ba.metersPerUnit/
Ea.metersPerUnit;return!0};l.projectBuffer=W;l.projectDirection=function(ma,pa,ra,ua,Ba){a.copy(Ra,ma);a.add(wb,ma,pa);R(Ra,ra,Ra,Ba);R(wb,ra,wb,Ba);a.subtract(ua,wb,Ra);a.normalize(ua,ua)};l.projectExtent=function(ma,pa,ra=pa.spatialReference,ua=0){return z.isNone(ra)?!1:N(ma,ma.spatialReference,pa,ra,ua)};l.projectMany=C;l.projectMultipoint=function(ma,pa,ra=pa.spatialReference,ua=0){return z.isNone(ra)?!1:K(ma,ma.spatialReference,pa,ra,ua)};l.projectPoint=function(ma,pa,ra=pa.spatialReference,
ua=0){return z.isNone(ra)?!1:J(ma,ma.spatialReference,pa,ra,ua)};l.projectPointToVector=function(ma,pa,ra,ua=0){Ra[0]=ma.x;Ra[1]=ma.y;const Ba=ma.z;Ra[2]=void 0!==Ba?Ba:ua;return W(Ra,ma.spatialReference,0,pa,ra,0,1)};l.projectPointToWGS84ComparableLonLat=function(ma,pa){Ra[0]=ma.x;Ra[1]=ma.y;const ra=ma.z;Ra[2]=void 0!==ra?ra:0;return T(Ra,ma.spatialReference,pa)};l.projectPolygon=function(ma,pa,ra=pa.spatialReference,ua=0){return z.isNone(ra)?!1:I(ma,ma.spatialReference,pa,ra,ua)};l.projectPolyline=
function(ma,pa,ra=pa.spatialReference,ua=0){return z.isNone(ra)?!1:L(ma,ma.spatialReference,pa,ra,ua)};l.projectVectorToDehydratedPoint=function(ma,pa,ra,ua){z.isNone(ua)&&(ua=ra.spatialReference);return W(ma,pa,0,Ra,ua,0,1)?(ra.x=Ra[0],ra.y=Ra[1],ra.z=Ra[2],ra.spatialReference=ua,ra):null};l.projectVectorToPoint=function(ma,pa,ra,ua){if(z.isNone(pa)||z.isNone(ra))return null;ua=z.isSome(ua)?ua:new m({spatialReference:ra});return W(ma,pa,0,Ra,ra,0,1)?(ua.x=Ra[0],ua.y=Ra[1],ua.z=Ra[2],ua.spatialReference=
ra,ua):null};l.projectVectorToVector=R;l.projectVectorToWGS84ComparableLonLat=T;l.projectXYZToVector=P;l.sphericalECEFToSphericalPCPF=X;l.unload=function(){Ka=Ha=Fa=null;Ia={}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(n,l,p){function z(M,V){M[0]=V[0];M[1]=V[1];M[2]=V[2];M[3]=V[3];M[4]=V[4];M[5]=V[5];M[6]=V[6];M[7]=V[7];M[8]=V[8];M[9]=V[9];M[10]=V[10];M[11]=V[11];M[12]=V[12];M[13]=V[13];M[14]=V[14];M[15]=V[15];
return M}function y(M,V,ha,Q,X,aa,ca,ia,ja,qa,sa,ta,va,wa,Aa,Ca,Da){M[0]=V;M[1]=ha;M[2]=Q;M[3]=X;M[4]=aa;M[5]=ca;M[6]=ia;M[7]=ja;M[8]=qa;M[9]=sa;M[10]=ta;M[11]=va;M[12]=wa;M[13]=Aa;M[14]=Ca;M[15]=Da;return M}function w(M){M[0]=1;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=1;M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[10]=1;M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function f(M,V){if(M===V){const ha=V[1],Q=V[2],X=V[3],aa=V[6],ca=V[7],ia=V[11];M[1]=V[4];M[2]=V[8];M[3]=V[12];M[4]=ha;M[6]=V[9];M[7]=V[13];M[8]=Q;M[9]=aa;
M[11]=V[14];M[12]=X;M[13]=ca;M[14]=ia}else M[0]=V[0],M[1]=V[4],M[2]=V[8],M[3]=V[12],M[4]=V[1],M[5]=V[5],M[6]=V[9],M[7]=V[13],M[8]=V[2],M[9]=V[6],M[10]=V[10],M[11]=V[14],M[12]=V[3],M[13]=V[7],M[14]=V[11],M[15]=V[15];return M}function k(M,V){const ha=V[0],Q=V[1],X=V[2],aa=V[3],ca=V[4],ia=V[5],ja=V[6],qa=V[7],sa=V[8],ta=V[9],va=V[10],wa=V[11],Aa=V[12],Ca=V[13],Da=V[14];V=V[15];const Fa=ha*ia-Q*ca,Ha=ha*ja-X*ca,Ka=ha*qa-aa*ca,Ia=Q*ja-X*ia,Ja=Q*qa-aa*ia,Sa=X*qa-aa*ja,xa=sa*Ca-ta*Aa,fb=sa*Da-va*Aa,eb=sa*
V-wa*Aa,db=ta*Da-va*Ca,H=ta*V-wa*Ca,ab=va*V-wa*Da;let Ma=Fa*ab-Ha*H+Ka*db+Ia*eb-Ja*fb+Sa*xa;if(!Ma)return null;Ma=1/Ma;M[0]=(ia*ab-ja*H+qa*db)*Ma;M[1]=(X*H-Q*ab-aa*db)*Ma;M[2]=(Ca*Sa-Da*Ja+V*Ia)*Ma;M[3]=(va*Ja-ta*Sa-wa*Ia)*Ma;M[4]=(ja*eb-ca*ab-qa*fb)*Ma;M[5]=(ha*ab-X*eb+aa*fb)*Ma;M[6]=(Da*Ka-Aa*Sa-V*Ha)*Ma;M[7]=(sa*Sa-va*Ka+wa*Ha)*Ma;M[8]=(ca*H-ia*eb+qa*xa)*Ma;M[9]=(Q*eb-ha*H-aa*xa)*Ma;M[10]=(Aa*Ja-Ca*Ka+V*Fa)*Ma;M[11]=(ta*Ka-sa*Ja-wa*Fa)*Ma;M[12]=(ia*fb-ca*db-ja*xa)*Ma;M[13]=(ha*db-Q*fb+X*xa)*Ma;
M[14]=(Ca*Ha-Aa*Ia-Da*Fa)*Ma;M[15]=(sa*Ia-ta*Ha+va*Fa)*Ma;return M}function m(M,V){const ha=V[0],Q=V[1],X=V[2],aa=V[3],ca=V[4],ia=V[5],ja=V[6],qa=V[7],sa=V[8],ta=V[9],va=V[10],wa=V[11],Aa=V[12],Ca=V[13],Da=V[14];V=V[15];M[0]=ia*(va*V-wa*Da)-ta*(ja*V-qa*Da)+Ca*(ja*wa-qa*va);M[1]=-(Q*(va*V-wa*Da)-ta*(X*V-aa*Da)+Ca*(X*wa-aa*va));M[2]=Q*(ja*V-qa*Da)-ia*(X*V-aa*Da)+Ca*(X*qa-aa*ja);M[3]=-(Q*(ja*wa-qa*va)-ia*(X*wa-aa*va)+ta*(X*qa-aa*ja));M[4]=-(ca*(va*V-wa*Da)-sa*(ja*V-qa*Da)+Aa*(ja*wa-qa*va));M[5]=ha*(va*
V-wa*Da)-sa*(X*V-aa*Da)+Aa*(X*wa-aa*va);M[6]=-(ha*(ja*V-qa*Da)-ca*(X*V-aa*Da)+Aa*(X*qa-aa*ja));M[7]=ha*(ja*wa-qa*va)-ca*(X*wa-aa*va)+sa*(X*qa-aa*ja);M[8]=ca*(ta*V-wa*Ca)-sa*(ia*V-qa*Ca)+Aa*(ia*wa-qa*ta);M[9]=-(ha*(ta*V-wa*Ca)-sa*(Q*V-aa*Ca)+Aa*(Q*wa-aa*ta));M[10]=ha*(ia*V-qa*Ca)-ca*(Q*V-aa*Ca)+Aa*(Q*qa-aa*ia);M[11]=-(ha*(ia*wa-qa*ta)-ca*(Q*wa-aa*ta)+sa*(Q*qa-aa*ia));M[12]=-(ca*(ta*Da-va*Ca)-sa*(ia*Da-ja*Ca)+Aa*(ia*va-ja*ta));M[13]=ha*(ta*Da-va*Ca)-sa*(Q*Da-X*Ca)+Aa*(Q*va-X*ta);M[14]=-(ha*(ia*Da-ja*
Ca)-ca*(Q*Da-X*Ca)+Aa*(Q*ja-X*ia));M[15]=ha*(ia*va-ja*ta)-ca*(Q*va-X*ta)+sa*(Q*ja-X*ia);return M}function c(M){const V=M[0],ha=M[1],Q=M[2],X=M[3],aa=M[4],ca=M[5],ia=M[6],ja=M[7],qa=M[8],sa=M[9],ta=M[10],va=M[11],wa=M[12],Aa=M[13],Ca=M[14];M=M[15];return(V*ca-ha*aa)*(ta*M-va*Ca)-(V*ia-Q*aa)*(sa*M-va*Aa)+(V*ja-X*aa)*(sa*Ca-ta*Aa)+(ha*ia-Q*ca)*(qa*M-va*wa)-(ha*ja-X*ca)*(qa*Ca-ta*wa)+(Q*ja-X*ia)*(qa*Aa-sa*wa)}function e(M,V,ha){const Q=V[0],X=V[1],aa=V[2],ca=V[3],ia=V[4],ja=V[5],qa=V[6],sa=V[7],ta=V[8],
va=V[9],wa=V[10],Aa=V[11],Ca=V[12],Da=V[13],Fa=V[14];V=V[15];let Ha=ha[0],Ka=ha[1],Ia=ha[2],Ja=ha[3];M[0]=Ha*Q+Ka*ia+Ia*ta+Ja*Ca;M[1]=Ha*X+Ka*ja+Ia*va+Ja*Da;M[2]=Ha*aa+Ka*qa+Ia*wa+Ja*Fa;M[3]=Ha*ca+Ka*sa+Ia*Aa+Ja*V;Ha=ha[4];Ka=ha[5];Ia=ha[6];Ja=ha[7];M[4]=Ha*Q+Ka*ia+Ia*ta+Ja*Ca;M[5]=Ha*X+Ka*ja+Ia*va+Ja*Da;M[6]=Ha*aa+Ka*qa+Ia*wa+Ja*Fa;M[7]=Ha*ca+Ka*sa+Ia*Aa+Ja*V;Ha=ha[8];Ka=ha[9];Ia=ha[10];Ja=ha[11];M[8]=Ha*Q+Ka*ia+Ia*ta+Ja*Ca;M[9]=Ha*X+Ka*ja+Ia*va+Ja*Da;M[10]=Ha*aa+Ka*qa+Ia*wa+Ja*Fa;M[11]=Ha*ca+Ka*
sa+Ia*Aa+Ja*V;Ha=ha[12];Ka=ha[13];Ia=ha[14];Ja=ha[15];M[12]=Ha*Q+Ka*ia+Ia*ta+Ja*Ca;M[13]=Ha*X+Ka*ja+Ia*va+Ja*Da;M[14]=Ha*aa+Ka*qa+Ia*wa+Ja*Fa;M[15]=Ha*ca+Ka*sa+Ia*Aa+Ja*V;return M}function q(M,V,ha){const Q=ha[0],X=ha[1];ha=ha[2];let aa=void 0,ca=void 0,ia=void 0,ja=void 0,qa=void 0,sa=void 0,ta=void 0,va=void 0,wa=void 0,Aa=void 0,Ca=void 0,Da=void 0;V===M?(M[12]=V[0]*Q+V[4]*X+V[8]*ha+V[12],M[13]=V[1]*Q+V[5]*X+V[9]*ha+V[13],M[14]=V[2]*Q+V[6]*X+V[10]*ha+V[14],M[15]=V[3]*Q+V[7]*X+V[11]*ha+V[15]):(aa=
V[0],ca=V[1],ia=V[2],ja=V[3],qa=V[4],sa=V[5],ta=V[6],va=V[7],wa=V[8],Aa=V[9],Ca=V[10],Da=V[11],M[0]=aa,M[1]=ca,M[2]=ia,M[3]=ja,M[4]=qa,M[5]=sa,M[6]=ta,M[7]=va,M[8]=wa,M[9]=Aa,M[10]=Ca,M[11]=Da,M[12]=aa*Q+qa*X+wa*ha+V[12],M[13]=ca*Q+sa*X+Aa*ha+V[13],M[14]=ia*Q+ta*X+Ca*ha+V[14],M[15]=ja*Q+va*X+Da*ha+V[15]);return M}function d(M,V,ha){const Q=ha[0],X=ha[1];ha=ha[2];M[0]=V[0]*Q;M[1]=V[1]*Q;M[2]=V[2]*Q;M[3]=V[3]*Q;M[4]=V[4]*X;M[5]=V[5]*X;M[6]=V[6]*X;M[7]=V[7]*X;M[8]=V[8]*ha;M[9]=V[9]*ha;M[10]=V[10]*ha;
M[11]=V[11]*ha;M[12]=V[12];M[13]=V[13];M[14]=V[14];M[15]=V[15];return M}function g(M,V,ha,Q){let X=Q[0],aa=Q[1];Q=Q[2];let ca=Math.sqrt(X*X+aa*aa+Q*Q);var ia=void 0,ja=void 0;let qa=void 0,sa=void 0,ta=void 0,va=void 0,wa=void 0,Aa=void 0,Ca=void 0,Da=void 0,Fa=void 0,Ha=void 0,Ka=void 0,Ia=void 0,Ja=void 0,Sa=void 0,xa=void 0,fb=void 0,eb=void 0,db=void 0,H=void 0,ab=void 0;ja=ia=void 0;if(ca<p.EPSILON)return null;ca=1/ca;X*=ca;aa*=ca;Q*=ca;ia=Math.sin(ha);ja=Math.cos(ha);qa=1-ja;sa=V[0];ta=V[1];
va=V[2];wa=V[3];Aa=V[4];Ca=V[5];Da=V[6];Fa=V[7];Ha=V[8];Ka=V[9];Ia=V[10];Ja=V[11];Sa=X*X*qa+ja;xa=aa*X*qa+Q*ia;fb=Q*X*qa-aa*ia;eb=X*aa*qa-Q*ia;db=aa*aa*qa+ja;H=Q*aa*qa+X*ia;ab=X*Q*qa+aa*ia;ia=aa*Q*qa-X*ia;ja=Q*Q*qa+ja;M[0]=sa*Sa+Aa*xa+Ha*fb;M[1]=ta*Sa+Ca*xa+Ka*fb;M[2]=va*Sa+Da*xa+Ia*fb;M[3]=wa*Sa+Fa*xa+Ja*fb;M[4]=sa*eb+Aa*db+Ha*H;M[5]=ta*eb+Ca*db+Ka*H;M[6]=va*eb+Da*db+Ia*H;M[7]=wa*eb+Fa*db+Ja*H;M[8]=sa*ab+Aa*ia+Ha*ja;M[9]=ta*ab+Ca*ia+Ka*ja;M[10]=va*ab+Da*ia+Ia*ja;M[11]=wa*ab+Fa*ia+Ja*ja;V!==M&&(M[12]=
V[12],M[13]=V[13],M[14]=V[14],M[15]=V[15]);return M}function b(M,V,ha){const Q=Math.sin(ha);ha=Math.cos(ha);const X=V[4],aa=V[5],ca=V[6],ia=V[7],ja=V[8],qa=V[9],sa=V[10],ta=V[11];V!==M&&(M[0]=V[0],M[1]=V[1],M[2]=V[2],M[3]=V[3],M[12]=V[12],M[13]=V[13],M[14]=V[14],M[15]=V[15]);M[4]=X*ha+ja*Q;M[5]=aa*ha+qa*Q;M[6]=ca*ha+sa*Q;M[7]=ia*ha+ta*Q;M[8]=ja*ha-X*Q;M[9]=qa*ha-aa*Q;M[10]=sa*ha-ca*Q;M[11]=ta*ha-ia*Q;return M}function a(M,V,ha){const Q=Math.sin(ha);ha=Math.cos(ha);const X=V[0],aa=V[1],ca=V[2],ia=
V[3],ja=V[8],qa=V[9],sa=V[10],ta=V[11];V!==M&&(M[4]=V[4],M[5]=V[5],M[6]=V[6],M[7]=V[7],M[12]=V[12],M[13]=V[13],M[14]=V[14],M[15]=V[15]);M[0]=X*ha-ja*Q;M[1]=aa*ha-qa*Q;M[2]=ca*ha-sa*Q;M[3]=ia*ha-ta*Q;M[8]=X*Q+ja*ha;M[9]=aa*Q+qa*ha;M[10]=ca*Q+sa*ha;M[11]=ia*Q+ta*ha;return M}function h(M,V,ha){const Q=Math.sin(ha);ha=Math.cos(ha);const X=V[0],aa=V[1],ca=V[2],ia=V[3],ja=V[4],qa=V[5],sa=V[6],ta=V[7];V!==M&&(M[8]=V[8],M[9]=V[9],M[10]=V[10],M[11]=V[11],M[12]=V[12],M[13]=V[13],M[14]=V[14],M[15]=V[15]);M[0]=
X*ha+ja*Q;M[1]=aa*ha+qa*Q;M[2]=ca*ha+sa*Q;M[3]=ia*ha+ta*Q;M[4]=ja*ha-X*Q;M[5]=qa*ha-aa*Q;M[6]=sa*ha-ca*Q;M[7]=ta*ha-ia*Q;return M}function r(M,V){M[0]=1;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=1;M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[10]=1;M[11]=0;M[12]=V[0];M[13]=V[1];M[14]=V[2];M[15]=1;return M}function t(M,V){M[0]=V[0];M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=V[1];M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[10]=V[2];M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function v(M,V,ha){let Q=ha[0],X=ha[1];ha=ha[2];let aa=Math.sqrt(Q*
Q+X*X+ha*ha),ca=void 0,ia=void 0,ja=void 0;if(aa<p.EPSILON)return null;aa=1/aa;Q*=aa;X*=aa;ha*=aa;ca=Math.sin(V);ia=Math.cos(V);ja=1-ia;M[0]=Q*Q*ja+ia;M[1]=X*Q*ja+ha*ca;M[2]=ha*Q*ja-X*ca;M[3]=0;M[4]=Q*X*ja-ha*ca;M[5]=X*X*ja+ia;M[6]=ha*X*ja+Q*ca;M[7]=0;M[8]=Q*ha*ja+X*ca;M[9]=X*ha*ja-Q*ca;M[10]=ha*ha*ja+ia;M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function x(M,V){const ha=Math.sin(V);V=Math.cos(V);M[0]=1;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=V;M[6]=ha;M[7]=0;M[8]=0;M[9]=-ha;M[10]=V;M[11]=0;M[12]=
0;M[13]=0;M[14]=0;M[15]=1;return M}function u(M,V){const ha=Math.sin(V);V=Math.cos(V);M[0]=V;M[1]=0;M[2]=-ha;M[3]=0;M[4]=0;M[5]=1;M[6]=0;M[7]=0;M[8]=ha;M[9]=0;M[10]=V;M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function D(M,V){const ha=Math.sin(V);V=Math.cos(V);M[0]=V;M[1]=ha;M[2]=0;M[3]=0;M[4]=-ha;M[5]=V;M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[10]=1;M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function B(M,V,ha){var Q=V[0],X=V[1],aa=V[2],ca=V[3],ia=Q+Q,ja=X+X;const qa=aa+aa;V=Q*ia;const sa=Q*ja;Q*=
qa;const ta=X*ja;X*=qa;aa*=qa;ia*=ca;ja*=ca;ca*=qa;M[0]=1-(ta+aa);M[1]=sa+ca;M[2]=Q-ja;M[3]=0;M[4]=sa-ca;M[5]=1-(V+aa);M[6]=X+ia;M[7]=0;M[8]=Q+ja;M[9]=X-ia;M[10]=1-(V+ta);M[11]=0;M[12]=ha[0];M[13]=ha[1];M[14]=ha[2];M[15]=1;return M}function A(M,V){const ha=oa,Q=-V[0],X=-V[1],aa=-V[2],ca=V[3],ia=V[4],ja=V[5],qa=V[6],sa=V[7],ta=Q*Q+X*X+aa*aa+ca*ca;0<ta?(ha[0]=2*(ia*ca+sa*Q+ja*aa-qa*X)/ta,ha[1]=2*(ja*ca+sa*X+qa*Q-ia*aa)/ta,ha[2]=2*(qa*ca+sa*aa+ia*X-ja*Q)/ta):(ha[0]=2*(ia*ca+sa*Q+ja*aa-qa*X),ha[1]=2*
(ja*ca+sa*X+qa*Q-ia*aa),ha[2]=2*(qa*ca+sa*aa+ia*X-ja*Q));B(M,V,ha);return M}function C(M,V){M[0]=V[12];M[1]=V[13];M[2]=V[14];return M}function E(M,V){const ha=V[0],Q=V[1],X=V[2],aa=V[4],ca=V[5],ia=V[6],ja=V[8],qa=V[9];V=V[10];M[0]=Math.sqrt(ha*ha+Q*Q+X*X);M[1]=Math.sqrt(aa*aa+ca*ca+ia*ia);M[2]=Math.sqrt(ja*ja+qa*qa+V*V);return M}function F(M,V){const ha=V[0]+V[5]+V[10];let Q=0;0<ha?(Q=2*Math.sqrt(ha+1),M[3]=.25*Q,M[0]=(V[6]-V[9])/Q,M[1]=(V[8]-V[2])/Q,M[2]=(V[1]-V[4])/Q):V[0]>V[5]&&V[0]>V[10]?(Q=2*
Math.sqrt(1+V[0]-V[5]-V[10]),M[3]=(V[6]-V[9])/Q,M[0]=.25*Q,M[1]=(V[1]+V[4])/Q,M[2]=(V[8]+V[2])/Q):V[5]>V[10]?(Q=2*Math.sqrt(1+V[5]-V[0]-V[10]),M[3]=(V[8]-V[2])/Q,M[0]=(V[1]+V[4])/Q,M[1]=.25*Q,M[2]=(V[6]+V[9])/Q):(Q=2*Math.sqrt(1+V[10]-V[0]-V[5]),M[3]=(V[1]-V[4])/Q,M[0]=(V[8]+V[2])/Q,M[1]=(V[6]+V[9])/Q,M[2]=.25*Q);return M}function G(M,V,ha,Q){var X=V[0],aa=V[1],ca=V[2],ia=V[3],ja=X+X,qa=aa+aa,sa=ca+ca;V=X*ja;const ta=X*qa;X*=sa;const va=aa*qa;aa*=sa;ca*=sa;ja*=ia;qa*=ia;ia*=sa;sa=Q[0];const wa=Q[1];
Q=Q[2];M[0]=(1-(va+ca))*sa;M[1]=(ta+ia)*sa;M[2]=(X-qa)*sa;M[3]=0;M[4]=(ta-ia)*wa;M[5]=(1-(V+ca))*wa;M[6]=(aa+ja)*wa;M[7]=0;M[8]=(X+qa)*Q;M[9]=(aa-ja)*Q;M[10]=(1-(V+va))*Q;M[11]=0;M[12]=ha[0];M[13]=ha[1];M[14]=ha[2];M[15]=1;return M}function J(M,V,ha,Q,X){var aa=V[0],ca=V[1],ia=V[2],ja=V[3],qa=aa+aa,sa=ca+ca,ta=ia+ia;V=aa*qa;var va=aa*sa,wa=aa*ta;aa=ca*sa;ca*=ta;var Aa=ia*ta;ia=ja*qa;sa*=ja;const Ca=ja*ta;var Da=Q[0],Fa=Q[1];ta=Q[2];Q=X[0];ja=X[1];X=X[2];qa=(1-(aa+Aa))*Da;const Ha=(va+Ca)*Da;Da*=wa-
sa;va=(va-Ca)*Fa;Aa=(1-(V+Aa))*Fa;Fa*=ca+ia;wa=(wa+sa)*ta;ca=(ca-ia)*ta;V=(1-(V+aa))*ta;M[0]=qa;M[1]=Ha;M[2]=Da;M[3]=0;M[4]=va;M[5]=Aa;M[6]=Fa;M[7]=0;M[8]=wa;M[9]=ca;M[10]=V;M[11]=0;M[12]=ha[0]+Q-(qa*Q+va*ja+wa*X);M[13]=ha[1]+ja-(Ha*Q+Aa*ja+ca*X);M[14]=ha[2]+X-(Da*Q+Fa*ja+V*X);M[15]=1;return M}function K(M,V){var ha=V[0],Q=V[1],X=V[2];V=V[3];var aa=ha+ha,ca=Q+Q;const ia=X+X;ha*=aa;const ja=Q*aa;Q*=ca;const qa=X*aa,sa=X*ca;X*=ia;aa*=V;ca*=V;V*=ia;M[0]=1-Q-X;M[1]=ja+V;M[2]=qa-ca;M[3]=0;M[4]=ja-V;M[5]=
1-ha-X;M[6]=sa+aa;M[7]=0;M[8]=qa+ca;M[9]=sa-aa;M[10]=1-ha-Q;M[11]=0;M[12]=0;M[13]=0;M[14]=0;M[15]=1;return M}function L(M,V,ha,Q,X,aa,ca){const ia=1/(ha-V),ja=1/(X-Q),qa=1/(aa-ca);M[0]=2*aa*ia;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=2*aa*ja;M[6]=0;M[7]=0;M[8]=(ha+V)*ia;M[9]=(X+Q)*ja;M[10]=(ca+aa)*qa;M[11]=-1;M[12]=0;M[13]=0;M[14]=ca*aa*2*qa;M[15]=0;return M}function I(M,V,ha,Q,X){V=1/Math.tan(V/2);let aa=void 0;M[0]=V/ha;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=V;M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[11]=-1;M[12]=0;M[13]=
0;M[15]=0;null!=X&&Infinity!==X?(aa=1/(Q-X),M[10]=(X+Q)*aa,M[14]=2*X*Q*aa):(M[10]=-1,M[14]=-2*Q);return M}function N(M,V,ha,Q){const X=Math.tan(V.upDegrees*Math.PI/180),aa=Math.tan(V.downDegrees*Math.PI/180),ca=Math.tan(V.leftDegrees*Math.PI/180);V=Math.tan(V.rightDegrees*Math.PI/180);const ia=2/(ca+V),ja=2/(X+aa);M[0]=ia;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=ja;M[6]=0;M[7]=0;M[8]=-((ca-V)*ia*.5);M[9]=(X-aa)*ja*.5;M[10]=Q/(ha-Q);M[11]=-1;M[12]=0;M[13]=0;M[14]=Q*ha/(ha-Q);M[15]=0;return M}function P(M,
V,ha,Q,X,aa,ca){const ia=1/(V-ha),ja=1/(Q-X),qa=1/(aa-ca);M[0]=-2*ia;M[1]=0;M[2]=0;M[3]=0;M[4]=0;M[5]=-2*ja;M[6]=0;M[7]=0;M[8]=0;M[9]=0;M[10]=2*qa;M[11]=0;M[12]=(V+ha)*ia;M[13]=(X+Q)*ja;M[14]=(ca+aa)*qa;M[15]=1;return M}function R(M,V,ha,Q){let X=void 0,aa=void 0;var ca=void 0,ia=void 0;let ja=void 0,qa=void 0;var sa=void 0,ta=void 0;let va=void 0,wa=void 0;const Aa=V[0],Ca=V[1];V=V[2];ca=Q[0];ia=Q[1];Q=Q[2];sa=ha[0];ta=ha[1];ha=ha[2];if(Math.abs(Aa-sa)<p.EPSILON&&Math.abs(Ca-ta)<p.EPSILON&&Math.abs(V-
ha)<p.EPSILON)return w(M);sa=Aa-sa;ta=Ca-ta;va=V-ha;wa=1/Math.sqrt(sa*sa+ta*ta+va*va);sa*=wa;ta*=wa;va*=wa;X=ia*va-Q*ta;aa=Q*sa-ca*va;ca=ca*ta-ia*sa;(wa=Math.sqrt(X*X+aa*aa+ca*ca))?(wa=1/wa,X*=wa,aa*=wa,ca*=wa):ca=aa=X=0;ia=ta*ca-va*aa;ja=va*X-sa*ca;qa=sa*aa-ta*X;(wa=Math.sqrt(ia*ia+ja*ja+qa*qa))?(wa=1/wa,ia*=wa,ja*=wa,qa*=wa):qa=ja=ia=0;M[0]=X;M[1]=ia;M[2]=sa;M[3]=0;M[4]=aa;M[5]=ja;M[6]=ta;M[7]=0;M[8]=ca;M[9]=qa;M[10]=va;M[11]=0;M[12]=-(X*Aa+aa*Ca+ca*V);M[13]=-(ia*Aa+ja*Ca+qa*V);M[14]=-(sa*Aa+ta*
Ca+va*V);M[15]=1;return M}function T(M,V,ha,Q){const X=V[0],aa=V[1];V=V[2];var ca=Q[0];const ia=Q[1];var ja=Q[2];Q=X-ha[0];let qa=aa-ha[1];ha=V-ha[2];let sa=Q*Q+qa*qa+ha*ha;0<sa&&(sa=1/Math.sqrt(sa),Q*=sa,qa*=sa,ha*=sa);let ta=ia*ha-ja*qa;ja=ja*Q-ca*ha;ca=ca*qa-ia*Q;sa=ta*ta+ja*ja+ca*ca;0<sa&&(sa=1/Math.sqrt(sa),ta*=sa,ja*=sa,ca*=sa);M[0]=ta;M[1]=ja;M[2]=ca;M[3]=0;M[4]=qa*ca-ha*ja;M[5]=ha*ta-Q*ca;M[6]=Q*ja-qa*ta;M[7]=0;M[8]=Q;M[9]=qa;M[10]=ha;M[11]=0;M[12]=X;M[13]=aa;M[14]=V;M[15]=1;return M}function W(M){return"mat4("+
M[0]+", "+M[1]+", "+M[2]+", "+M[3]+", "+M[4]+", "+M[5]+", "+M[6]+", "+M[7]+", "+M[8]+", "+M[9]+", "+M[10]+", "+M[11]+", "+M[12]+", "+M[13]+", "+M[14]+", "+M[15]+")"}function Z(M){return Math.sqrt(Math.pow(M[0],2)+Math.pow(M[1],2)+Math.pow(M[2],2)+Math.pow(M[3],2)+Math.pow(M[4],2)+Math.pow(M[5],2)+Math.pow(M[6],2)+Math.pow(M[7],2)+Math.pow(M[8],2)+Math.pow(M[9],2)+Math.pow(M[10],2)+Math.pow(M[11],2)+Math.pow(M[12],2)+Math.pow(M[13],2)+Math.pow(M[14],2)+Math.pow(M[15],2))}function la(M,V,ha){M[0]=V[0]+
ha[0];M[1]=V[1]+ha[1];M[2]=V[2]+ha[2];M[3]=V[3]+ha[3];M[4]=V[4]+ha[4];M[5]=V[5]+ha[5];M[6]=V[6]+ha[6];M[7]=V[7]+ha[7];M[8]=V[8]+ha[8];M[9]=V[9]+ha[9];M[10]=V[10]+ha[10];M[11]=V[11]+ha[11];M[12]=V[12]+ha[12];M[13]=V[13]+ha[13];M[14]=V[14]+ha[14];M[15]=V[15]+ha[15];return M}function ea(M,V,ha){M[0]=V[0]-ha[0];M[1]=V[1]-ha[1];M[2]=V[2]-ha[2];M[3]=V[3]-ha[3];M[4]=V[4]-ha[4];M[5]=V[5]-ha[5];M[6]=V[6]-ha[6];M[7]=V[7]-ha[7];M[8]=V[8]-ha[8];M[9]=V[9]-ha[9];M[10]=V[10]-ha[10];M[11]=V[11]-ha[11];M[12]=V[12]-
ha[12];M[13]=V[13]-ha[13];M[14]=V[14]-ha[14];M[15]=V[15]-ha[15];return M}function O(M,V,ha){M[0]=V[0]*ha;M[1]=V[1]*ha;M[2]=V[2]*ha;M[3]=V[3]*ha;M[4]=V[4]*ha;M[5]=V[5]*ha;M[6]=V[6]*ha;M[7]=V[7]*ha;M[8]=V[8]*ha;M[9]=V[9]*ha;M[10]=V[10]*ha;M[11]=V[11]*ha;M[12]=V[12]*ha;M[13]=V[13]*ha;M[14]=V[14]*ha;M[15]=V[15]*ha;return M}function U(M,V,ha,Q){M[0]=V[0]+ha[0]*Q;M[1]=V[1]+ha[1]*Q;M[2]=V[2]+ha[2]*Q;M[3]=V[3]+ha[3]*Q;M[4]=V[4]+ha[4]*Q;M[5]=V[5]+ha[5]*Q;M[6]=V[6]+ha[6]*Q;M[7]=V[7]+ha[7]*Q;M[8]=V[8]+ha[8]*
Q;M[9]=V[9]+ha[9]*Q;M[10]=V[10]+ha[10]*Q;M[11]=V[11]+ha[11]*Q;M[12]=V[12]+ha[12]*Q;M[13]=V[13]+ha[13]*Q;M[14]=V[14]+ha[14]*Q;M[15]=V[15]+ha[15]*Q;return M}function ba(M,V){return M[0]===V[0]&&M[1]===V[1]&&M[2]===V[2]&&M[3]===V[3]&&M[4]===V[4]&&M[5]===V[5]&&M[6]===V[6]&&M[7]===V[7]&&M[8]===V[8]&&M[9]===V[9]&&M[10]===V[10]&&M[11]===V[11]&&M[12]===V[12]&&M[13]===V[13]&&M[14]===V[14]&&M[15]===V[15]}function ka(M,V){const ha=M[0],Q=M[1],X=M[2],aa=M[3],ca=M[4],ia=M[5],ja=M[6],qa=M[7],sa=M[8],ta=M[9],va=
M[10],wa=M[11],Aa=M[12],Ca=M[13],Da=M[14];M=M[15];const Fa=V[0],Ha=V[1],Ka=V[2],Ia=V[3],Ja=V[4],Sa=V[5],xa=V[6],fb=V[7],eb=V[8],db=V[9],H=V[10],ab=V[11],Ma=V[12],ib=V[13],lb=V[14];V=V[15];return Math.abs(ha-Fa)<=p.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Fa))&&Math.abs(Q-Ha)<=p.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ha))&&Math.abs(X-Ka)<=p.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ka))&&Math.abs(aa-Ia)<=p.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ia))&&Math.abs(ca-Ja)<=p.EPSILON*Math.max(1,Math.abs(ca),
Math.abs(Ja))&&Math.abs(ia-Sa)<=p.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Sa))&&Math.abs(ja-xa)<=p.EPSILON*Math.max(1,Math.abs(ja),Math.abs(xa))&&Math.abs(qa-fb)<=p.EPSILON*Math.max(1,Math.abs(qa),Math.abs(fb))&&Math.abs(sa-eb)<=p.EPSILON*Math.max(1,Math.abs(sa),Math.abs(eb))&&Math.abs(ta-db)<=p.EPSILON*Math.max(1,Math.abs(ta),Math.abs(db))&&Math.abs(va-H)<=p.EPSILON*Math.max(1,Math.abs(va),Math.abs(H))&&Math.abs(wa-ab)<=p.EPSILON*Math.max(1,Math.abs(wa),Math.abs(ab))&&Math.abs(Aa-Ma)<=p.EPSILON*
Math.max(1,Math.abs(Aa),Math.abs(Ma))&&Math.abs(Ca-ib)<=p.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(ib))&&Math.abs(Da-lb)<=p.EPSILON*Math.max(1,Math.abs(Da),Math.abs(lb))&&Math.abs(M-V)<=p.EPSILON*Math.max(1,Math.abs(M),Math.abs(V))}const oa=l.create();l=Object.freeze({__proto__:null,copy:z,set:y,identity:w,transpose:f,invert:k,adjoint:m,determinant:c,multiply:e,translate:q,scale:d,rotate:g,rotateX:b,rotateY:a,rotateZ:h,fromTranslation:r,fromScaling:t,fromRotation:v,fromXRotation:x,fromYRotation:u,
fromZRotation:D,fromRotationTranslation:B,fromQuat2:A,getTranslation:C,getScaling:E,getRotation:F,fromRotationTranslationScale:G,fromRotationTranslationScaleOrigin:J,fromQuat:K,frustum:L,perspective:I,perspectiveFromFieldOfView:N,ortho:P,lookAt:R,targetTo:T,str:W,frob:Z,add:la,subtract:ea,multiplyScalar:O,multiplyScalarAndAdd:U,exactEquals:ba,equals:ka,mul:e,sub:ea});n.add=la;n.adjoint=m;n.copy=z;n.determinant=c;n.equals=ka;n.exactEquals=ba;n.frob=Z;n.fromQuat=K;n.fromQuat2=A;n.fromRotation=v;n.fromRotationTranslation=
B;n.fromRotationTranslationScale=G;n.fromRotationTranslationScaleOrigin=J;n.fromScaling=t;n.fromTranslation=r;n.fromXRotation=x;n.fromYRotation=u;n.fromZRotation=D;n.frustum=L;n.getRotation=F;n.getScaling=E;n.getTranslation=C;n.identity=w;n.invert=k;n.lookAt=R;n.mat4=l;n.mul=e;n.multiply=e;n.multiplyScalar=O;n.multiplyScalarAndAdd=U;n.ortho=P;n.perspective=I;n.perspectiveFromFieldOfView=N;n.rotate=g;n.rotateX=b;n.rotateY=a;n.rotateZ=h;n.scale=d;n.set=y;n.str=W;n.sub=ea;n.subtract=ea;n.targetTo=T;
n.translate=q;n.transpose=f})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),function(n,l,p,z,y,w){function f(){return!!l._pe}function k(){return!!z("esri-wasm")}function m(){return b?b:b=y.create((h,r)=>{(new Promise(function(t,v){n(["./pe-wasm"],t,v)})).then(function(t){return t.peWasm}).then(({default:t})=>{t({locateFile:v=>w.getAssetUrl(`esri/geometry/support/${v}`),onAbort:v=>{r(Error(v))}}).then(v=>{c(v);
h()})})})}function c(h){function r(x,u,D){x[u]=D(x[u])}l._pe=h;l.PeDefs.init();l.PeGTlistExtended.init();l.PeNotationMgrs.init();l.PeNotationUtm.init();l.PePCSInfo.init();l.PeGCSExtent=function(x){function u(){return x.apply(this,arguments)||this}p._inheritsLoose(u,x);u.prototype.destroy=function(){l._pe.destroy(this)};return u}(l._pe.PeGCSExtent);h=[l._pe.PeDatum,l._pe.PeGeogcs,l._pe.PeGeogtran,l._pe.PeObject,l._pe.PeParameter,l._pe.PePrimem,l._pe.PeProjcs,l._pe.PeSpheroid,l._pe.PeUnit];for(var t of h)r(t.prototype,
"getName",x=>function(){return x.call(this,Array(l.PeDefs.PE_NAME_MAX))});for(const x of[l._pe.PeGeogtran,l._pe.PeProjcs])r(x.prototype,"getParameters",u=>function(){const D=Array(l.PeDefs.PE_PARM_MAX);let B=u.call(this);for(let A=0;A<D.length;A++){const C=l._pe.getValue(B,"*");D[A]=C?l._pe.wrapPointer(C,l._pe.PeParameter):null;B+=Int32Array.BYTES_PER_ELEMENT}return D});r(l._pe.PeHorizon.prototype,"getCoord",x=>function(){const u=this.getSize();if(!u)return null;const D=[],B=x.call(this);g(D,u,B);
return D});r(l._pe.PeGTlistExtendedEntry.prototype,"getEntries",x=>{const u=l._pe._pe_getPeGTlistExtendedGTsSize();return function(){let D=null;var B=x.call(this);if(!l._pe.compare(B,l._pe.NULL)){D=[B];const A=this.getSteps();if(1<A){B=l._pe.getPointer(B);for(let C=1;C<A;C++)D.push(l._pe.wrapPointer(B+u*C,l._pe.PeGTlistExtendedGTs))}}return D}});const v=l._pe._pe_getPeHorizonSize();t=x=>function(){let u=this._cache;u||(this._cache=u=new Map);if(u.has(x))return u.get(x);let D=null;var B=x.call(this);
if(!l._pe.compare(B,l._pe.NULL)){D=[B];const A=B.getNump();if(1<A){B=l._pe.getPointer(B);for(let C=1;C<A;C++)D.push(l._pe.wrapPointer(B+v*C,l._pe.PeHorizon))}}u.set(x,D);return D};r(l._pe.PeProjcs.prototype,"horizonGcsGenerate",t);r(l._pe.PeProjcs.prototype,"horizonPcsGenerate",t);l._pe.PeObject.prototype.toString=function(x=l.PeDefs.PE_STR_OPTS_NONE){l._pe.ensureCache.prepare();const u=l._pe.getPointer(this),D=l._pe.ensureInt8(Array(l.PeDefs.PE_BUFFER_MAX));return l._pe.UTF8ToString(l._pe._pe_object_to_string_ext(u,
x,D))}}function e(h){if(h){var r=l._pe.getClass(h);r&&(r=l._pe.getCache(r))&&(h=l._pe.getPointer(h))&&delete r[h]}}function q(h,r){const t=[];r=Array(r);for(let v=0;v<h;v++)t.push(l._pe.ensureInt8(r));return t}function d(h){let r;Array.isArray(h[0])?(r=[],h.forEach(t=>{r.push(t[0],t[1])})):r=h;return r}function g(h,r,t,v=!1){if(v)for(v=0;v<2*r;v++)h[v]=l._pe.getValue(t+v*Float64Array.BYTES_PER_ELEMENT,"double");else{v=0===h.length;for(let x=0;x<r;x++)v&&(h[x]=Array(2)),h[x][0]=l._pe.getValue(t,"double"),
h[x][1]=l._pe.getValue(t+Float64Array.BYTES_PER_ELEMENT,"double"),t+=2*Float64Array.BYTES_PER_ELEMENT}}let b;l._pe=null;(function(h){function r(x,u,D){l._pe.ensureCache.prepare();var B=d(D);const A=D===B;B=l._pe.ensureFloat64(B);(x=l._pe._pe_geog_to_proj(l._pe.getPointer(x),u,B))&&g(D,u,B,A);return x}function t(x,u,D){return v(x,u,D,0)}function v(x,u,D,B){l._pe.ensureCache.prepare();var A=d(D);const C=D===A;A=l._pe.ensureFloat64(A);(x=l._pe._pe_proj_to_geog_center(l._pe.getPointer(x),u,A,B))&&g(D,
u,A,C);return x}h.geogToProj=r;h.projGeog=function(x,u,D,B){switch(B){case l.PeDefs.PE_TRANSFORM_P_TO_G:return t(x,u,D);case l.PeDefs.PE_TRANSFORM_G_TO_P:return r(x,u,D)}return 0};h.projToGeog=t;h.projToGeogCenter=v})(l.PeCSTransformations||(l.PeCSTransformations={}));(function(h){h.init=function(){h.PE_BUFFER_MAX=l._pe.PeDefs.prototype.PE_BUFFER_MAX;h.PE_NAME_MAX=l._pe.PeDefs.prototype.PE_NAME_MAX;h.PE_MGRS_MAX=l._pe.PeDefs.prototype.PE_MGRS_MAX;h.PE_USNG_MAX=l._pe.PeDefs.prototype.PE_USNG_MAX;h.PE_DD_MAX=
l._pe.PeDefs.prototype.PE_DD_MAX;h.PE_DDM_MAX=l._pe.PeDefs.prototype.PE_DDM_MAX;h.PE_DMS_MAX=l._pe.PeDefs.prototype.PE_DMS_MAX;h.PE_UTM_MAX=l._pe.PeDefs.prototype.PE_UTM_MAX;h.PE_PARM_MAX=l._pe.PeDefs.prototype.PE_PARM_MAX;h.PE_TYPE_NONE=l._pe.PeDefs.prototype.PE_TYPE_NONE;h.PE_TYPE_GEOGCS=l._pe.PeDefs.prototype.PE_TYPE_GEOGCS;h.PE_TYPE_PROJCS=l._pe.PeDefs.prototype.PE_TYPE_PROJCS;h.PE_TYPE_GEOGTRAN=l._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;h.PE_TYPE_COORDSYS=l._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
h.PE_TYPE_UNIT=l._pe.PeDefs.prototype.PE_TYPE_UNIT;h.PE_STR_OPTS_NONE=l._pe.PeDefs.prototype.PE_STR_OPTS_NONE;h.PE_STR_AUTH_NONE=l._pe.PeDefs.prototype.PE_STR_AUTH_NONE;h.PE_STR_AUTH_TOP=l._pe.PeDefs.prototype.PE_STR_AUTH_TOP;h.PE_STR_NAME_CANON=l._pe.PeDefs.prototype.PE_STR_NAME_CANON;h.PE_PARM_X0=l._pe.PeDefs.prototype.PE_PARM_X0;h.PE_PARM_ND=l._pe.PeDefs.prototype.PE_PARM_ND;h.PE_TRANSFORM_1_TO_2=l._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;h.PE_TRANSFORM_2_TO_1=l._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
h.PE_TRANSFORM_P_TO_G=l._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;h.PE_TRANSFORM_G_TO_P=l._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;h.PE_HORIZON_RECT=l._pe.PeDefs.prototype.PE_HORIZON_RECT;h.PE_HORIZON_POLY=l._pe.PeDefs.prototype.PE_HORIZON_POLY;h.PE_HORIZON_LINE=l._pe.PeDefs.prototype.PE_HORIZON_LINE;h.PE_HORIZON_DELTA=l._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(l.PeDefs||(l.PeDefs={}));(function(h){function r(u,D){let B=null,A=v[u];A||(A={},v[u]=A);A.hasOwnProperty(String(D))?B=A[D]:(u=l._pe.PeFactory.prototype.factoryByType(u,
D),l._pe.compare(u,l._pe.NULL)||(B=u,A[D]=B));return B=t(B)}function t(u){if(u){const D=u.getType();switch(D){case l.PeDefs.PE_TYPE_GEOGCS:u=l._pe.castObject(u,l._pe.PeGeogcs);break;case l.PeDefs.PE_TYPE_PROJCS:u=l._pe.castObject(u,l._pe.PeProjcs);break;case l.PeDefs.PE_TYPE_GEOGTRAN:u=l._pe.castObject(u,l._pe.PeGeogtran);break;default:D&l.PeDefs.PE_TYPE_UNIT&&(u=l._pe.castObject(u,l._pe.PeUnit))}}return u}const v={},x={};h.initialize=function(){l._pe.PeFactory.prototype.initialize(null)};h.coordsys=
function(u){return r(l.PeDefs.PE_TYPE_COORDSYS,u)};h.factoryByType=r;h.fromString=function(u,D){let B=null,A=x[u];A||(A={},x[u]=A);A.hasOwnProperty(D)?B=A[D]:(u=l._pe.PeFactory.prototype.fromString(u,D),l._pe.compare(u,l._pe.NULL)||(B=u,A[D]=B));return B=t(B)};h.geogcs=function(u){return r(l.PeDefs.PE_TYPE_GEOGCS,u)};h.geogtran=function(u){return r(l.PeDefs.PE_TYPE_GEOGTRAN,u)};h.getCode=function(u){return l._pe.PeFactory.prototype.getCode(u)};h.projcs=function(u){return r(l.PeDefs.PE_TYPE_PROJCS,
u)};h.unit=function(u){return r(l.PeDefs.PE_TYPE_UNIT,u)}})(l.PeFactory||(l.PeFactory={}));l.PeGCSExtent=null;(function(h){let r;h.init=function(){h.PE_GTLIST_OPTS_COMMON=l._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;r=l._pe._pe_getPeGTlistExtendedEntrySize()};h.getGTlist=function(t,v,x,u,D,B){let A=null;const C=new l._pe.PeInteger(B);try{const E=l._pe.PeGTlistExtended.prototype.getGTlist(t,v,x,u,D,C);if(B=C.val)if(A=[E],1<B){const F=l._pe.getPointer(E);for(t=1;t<B;t++)A.push(l._pe.wrapPointer(F+
r*t,l._pe.PeGTlistExtendedEntry))}}finally{l._pe.destroy(C)}return A}})(l.PeGTlistExtended||(l.PeGTlistExtended={}));(function(h){h.destroy=function(r){if(r&&r.length){for(const t of r)e(t),t.getEntries().forEach(v=>{e(v);v=v.getGeogtran();e(v);v.getParameters().forEach(e);[v.getGeogcs1(),v.getGeogcs2()].forEach(x=>{e(x);const u=x.getDatum();e(u);e(u.getSpheroid());e(x.getPrimem());e(x.getUnit())})});l._pe.PeGTlistExtendedEntry.prototype.Delete(r[0])}}})(l.PeGTlistExtendedEntry||(l.PeGTlistExtendedEntry=
{}));(function(h){h.geogToGeog=function(r,t,v,x,u){l._pe.ensureCache.prepare();var D=d(v);const B=v===D;D=l._pe.ensureFloat64(D);let A=0;x&&(A=l._pe.ensureFloat64(x));(r=l._pe._pe_geog_to_geog(l._pe.getPointer(r),t,D,A,u))&&g(v,t,D,B);return r}})(l.PeGTTransformations||(l.PeGTTransformations={}));(function(h){function r(v,x,u,D,B,A){l._pe.ensureCache.prepare();switch(v){case "dd":var C=l._pe._pe_geog_to_dd;var E=l.PeDefs.PE_DD_MAX;break;case "ddm":C=l._pe._pe_geog_to_ddm;E=l.PeDefs.PE_DDM_MAX;break;
case "dms":C=l._pe._pe_geog_to_dms,E=l.PeDefs.PE_DMS_MAX}v=0;x&&(v=l._pe.getPointer(x));x=d(D);x=l._pe.ensureFloat64(x);E=q(u,E);D=l._pe.ensureInt32(E);if(B=C(v,u,x,B,D))for(C=0;C<u;C++)A[C]=l._pe.UTF8ToString(E[C]);return B}function t(v,x,u,D,B){l._pe.ensureCache.prepare();switch(v){case "dd":var A=l._pe._pe_dd_to_geog;break;case "ddm":A=l._pe._pe_ddm_to_geog;break;case "dms":A=l._pe._pe_dms_to_geog}v=0;x&&(v=l._pe.getPointer(x));x=D.map(C=>l._pe.ensureString(C));D=l._pe.ensureInt32(x);x=l._pe.ensureFloat64(Array(2*
u));(A=A(v,u,D,x))&&g(B,u,x);return A}h.geog_to_dms=function(v,x,u,D,B){return r("dms",v,x,u,D,B)};h.dms_to_geog=function(v,x,u,D){return t("dms",v,x,u,D)};h.geog_to_ddm=function(v,x,u,D,B){return r("ddm",v,x,u,D,B)};h.ddm_to_geog=function(v,x,u,D){return t("ddm",v,x,u,D)};h.geog_to_dd=function(v,x,u,D,B){return r("dd",v,x,u,D,B)};h.dd_to_geog=function(v,x,u,D){return t("dd",v,x,u,D)}})(l.PeNotationDms||(l.PeNotationDms={}));(function(h){h.init=function(){h.PE_MGRS_STYLE_NEW=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;
h.PE_MGRS_STYLE_OLD=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;h.PE_MGRS_STYLE_AUTO=l._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;h.PE_MGRS_180_ZONE_1_PLUS=l._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;h.PE_MGRS_ADD_SPACES=l._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};h.geog_to_mgrs_extended=function(r,t,v,x,u,D,B){l._pe.ensureCache.prepare();let A=0;r&&(A=l._pe.getPointer(r));r=d(v);v=l._pe.ensureFloat64(r);r=q(t,l.PeDefs.PE_MGRS_MAX);const C=l._pe.ensureInt32(r);if(x=l._pe._pe_geog_to_mgrs_extended(A,
t,v,x,u,D,C))for(u=0;u<t;u++)B[u]=l._pe.UTF8ToString(r[u]);return x};h.mgrs_to_geog_extended=function(r,t,v,x,u){l._pe.ensureCache.prepare();let D=0;r&&(D=l._pe.getPointer(r));r=v.map(B=>l._pe.ensureString(B));v=l._pe.ensureInt32(r);r=l._pe.ensureFloat64(Array(2*t));(x=l._pe._pe_mgrs_to_geog_extended(D,t,v,x,r))&&g(u,t,r);return x}})(l.PeNotationMgrs||(l.PeNotationMgrs={}));(function(h){h.geog_to_usng=function(r,t,v,x,u,D,B){l._pe.ensureCache.prepare();let A=0;r&&(A=l._pe.getPointer(r));r=d(v);v=
l._pe.ensureFloat64(r);r=q(t,l.PeDefs.PE_MGRS_MAX);const C=l._pe.ensureInt32(r);if(x=l._pe._pe_geog_to_usng(A,t,v,x,u,D,C))for(u=0;u<t;u++)B[u]=l._pe.UTF8ToString(r[u]);return x};h.usng_to_geog=function(r,t,v,x){l._pe.ensureCache.prepare();var u=0;r&&(u=l._pe.getPointer(r));r=v.map(D=>l._pe.ensureString(D));v=l._pe.ensureInt32(r);r=l._pe.ensureFloat64(Array(2*t));(u=l._pe._pe_usng_to_geog(u,t,v,r))&&g(x,t,r);return u}})(l.PeNotationUsng||(l.PeNotationUsng={}));(function(h){h.init=function(){h.PE_UTM_OPTS_NONE=
l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;h.PE_UTM_OPTS_ADD_SPACES=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;h.PE_UTM_OPTS_NS=l._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};h.geog_to_utm=function(r,t,v,x,u){l._pe.ensureCache.prepare();var D=0;r&&(D=l._pe.getPointer(r));r=d(v);v=l._pe.ensureFloat64(r);r=q(t,l.PeDefs.PE_UTM_MAX);const B=l._pe.ensureInt32(r);if(x=l._pe._pe_geog_to_utm(D,t,v,x,B))for(D=0;D<t;D++)u[D]=l._pe.UTF8ToString(r[D]);return x};h.utm_to_geog=function(r,t,v,x,u){l._pe.ensureCache.prepare();
let D=0;r&&(D=l._pe.getPointer(r));r=v.map(B=>l._pe.ensureString(B));v=l._pe.ensureInt32(r);r=l._pe.ensureFloat64(Array(2*t));(x=l._pe._pe_utm_to_geog(D,t,v,x,r))&&g(u,t,r);return x}})(l.PeNotationUtm||(l.PeNotationUtm={}));(function(h){const r=new Map;h.init=function(){h.PE_PCSINFO_OPTION_NONE=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;h.PE_PCSINFO_OPTION_DOMAIN=l._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;h.PE_POLE_OUTSIDE_BOUNDARY=l._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;
h.PE_POLE_POINT=l._pe.PePCSInfo.prototype.PE_POLE_POINT};h.generate=function(t,v=h.PE_PCSINFO_OPTION_DOMAIN){let x,u;r.has(t)&&(u=r.get(t),u[v]&&(x=u[v]));x||(x=l._pe.PePCSInfo.prototype.generate(t,v),u||(u=[],r.set(t,u)),u[v]=x);return x}})(l.PePCSInfo||(l.PePCSInfo={}));(function(h){h.version_string=function(){return l._pe.PeVersion.prototype.version_string()}})(l.PeVersion||(l.PeVersion={}));var a=Object.freeze({__proto__:null,get _pe(){return l._pe},isLoaded:f,isSupported:k,load:m,get PeCSTransformations(){return l.PeCSTransformations},
get PeDefs(){return l.PeDefs},get PeFactory(){return l.PeFactory},get PeGCSExtent(){return l.PeGCSExtent},get PeGTlistExtended(){return l.PeGTlistExtended},get PeGTlistExtendedEntry(){return l.PeGTlistExtendedEntry},get PeGTTransformations(){return l.PeGTTransformations},get PeNotationDms(){return l.PeNotationDms},get PeNotationMgrs(){return l.PeNotationMgrs},get PeNotationUsng(){return l.PeNotationUsng},get PeNotationUtm(){return l.PeNotationUtm},get PePCSInfo(){return l.PePCSInfo},get PeVersion(){return l.PeVersion},
_init:c});l._init=c;l.isLoaded=f;l.isSupported=k;l.load=m;l.pe=a})},"esri/assets":function(){define(["exports","./config","./core/urlUtils","./request"],function(n,l,p,z){function y(w){return p.join(l.assetsPath,w)}n.fetchAsset=function(w,f){return z(y(w),f)};n.getAssetUrl=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/requestUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){async function q(N,P){var R=k.isDataProtocol(N);const T=k.isBlobProtocol(N);T||R||(N=k.normalize(N));const W={url:N,requestOptions:{...w.unwrap(P)}};let Z=k.getInterceptor(N);if(Z){N=await x(Z,W);if(null!=N)return{data:N,getHeader:I,requestOptions:W.requestOptions,url:W.url};Z.after||Z.error||(Z=null)}N=W.url;P=W.requestOptions;if("image"===P.responseType){if(p("host-webworker")||p("host-node"))throw b("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),
W);}else if(R)throw b("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+P.responseType),W);if("head"===P.method){if(P.body)throw b("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),W);if(R||T)throw b("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),W);}await a();if(E)return E.execute(N,P);const la=m.createAbortController();m.onAbort(P,()=>la.abort());R=await B({controller:la,credential:null,
credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Z,params:W,redoRequest:!1,useIdentity:F.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});Z&&Z.after&&Z.after(R);return R}function d(N){k.isBlobProtocol(N)||k.isDataProtocol(N)||(N=k.getOrigin(N))&&-1===q._corsServers.indexOf(N)&&q._corsServers.push(N)}function g(N){N=k.getOrigin(N);return!N||N.endsWith(".arcgis.com")||-1!==q._corsServers.indexOf(N)||k.isTrustedServer(N)}function b(N,P,R,T){let W="Error";const Z={url:R.url,requestOptions:R.requestOptions,
getHeader:I,ssl:!1};if(P instanceof f)return P.details?(P.details=z.clone(P.details),P.details.url=R.url,P.details.requestOptions=R.requestOptions):P.details=Z,P;if(P){R=T&&(O=>T.headers.get(O));const la=T&&T.status,ea=P.message;ea&&(W=ea);R&&(Z.getHeader=R);Z.httpStatus=(null!=P.httpCode?P.httpCode:P.code)||la||0;Z.subCode=P.subcode;Z.messageCode=P.messageCode;Z.messages="string"===typeof P.details?[P.details]:P.details}return m.isAbortError(P)?m.createAbortError():new f(N,W,Z)}async function a(){p("host-webworker")?
E||(E=await new Promise(function(N,P){n(["./core/workers/request"],N,P)})):q._abortableFetch||(q._abortableFetch=l.fetch.bind(l))}async function h(){c.id||await new Promise(function(N,P){n(["./identity/IdentityManager"],function(R){N(Object.freeze({__proto__:null,"default":R}))},P)})}async function r(N){const P=N.params.url,R=N.params.requestOptions,T=N.controller.signal;var W=R.body;let Z=null,la=null,ea=null;G&&"HTMLFormElement"in l&&(W instanceof FormData?Z=W:W instanceof HTMLFormElement&&(la=
W,Z=new FormData(la)));"string"===typeof W&&(ea=W);N.fetchOptions={cache:R.cacheBust&&!q._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:R.headers||{},method:"head"===R.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:T};if(Z||ea)N.fetchOptions.body=Z||ea;"anonymous"===R.authMode&&(N.useIdentity=!1);N.hasToken=!!(/token=/i.test(P)||R.query&&R.query.token||Z&&Z.get&&Z.get("token")||la&&la.elements.token);(W=k.getOrigin(P,!0))&&!N.hasToken&&y.apiKey&&W.endsWith(".arcgis.com")&&
"js.arcgis.com"!==W&&"jsdev.arcgis.com"!==W&&"jsqa.arcgis.com"!==W&&(R.query||(R.query={}),R.query.token=y.apiKey,N.hasToken=!0);if(N.useIdentity&&!N.hasToken&&!N.credentialToken&&!t(P)&&!m.isAborted(T)){let O;"immediate"===R.authMode?(await h(),O=await c.id.getCredential(P,{signal:T}),N.credential=O):"no-prompt"===R.authMode?(await h(),O=await c.id.getCredential(P,{prompt:!1,signal:T}).catch(()=>{}),N.credential=O):c.id&&(O=c.id.findCredential(P));O&&(N.credentialToken=O.token,N.useSSL=!!O.ssl)}}
function t(N){return L.some(P=>P.test(N))}async function v(N){let P=N.params.url;const R=N.params.requestOptions,T=N.fetchOptions,W=k.isBlobProtocol(P)||k.isDataProtocol(P),Z=R.responseType||"json",la=W?0:null!=R.timeout?R.timeout:F.timeout;var ea=!1;if(!W){N.useSSL&&(P=k.toHTTPS(P));R.cacheBust&&"default"===T.cache&&(P=k.addQueryParameter(P,"request.preventCache",Date.now()));var O={...R.query};N.credentialToken&&(O.token=N.credentialToken);ea=k.objectToQuery(O);p("esri-url-encodes-apostrophe")&&
(ea=ea.replace(/'/g,"%27"));const M=P.length+1+ea.length;ea="post"===R.method||!!R.body||M>F.maxUrlLength;const V=R.useProxy||!!k.getProxyRule(P);if(V){const ha=k.getProxyUrl(P);var U=ha.path;!ea&&U.length+1+M>F.maxUrlLength&&(ea=!0);ha.query&&(O={...ha.query,...O})}if("HEAD"===T.method&&(ea||V)){if(ea){if(M>F.maxUrlLength)throw b("request:invalid-parameters",Error("URL exceeds maximum length"),N.params);throw b("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),N.params);
}if(V)throw b("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),N.params);}ea?(T.method="POST",R.body?P=k.addQueryParameters(P,O):(T.body=k.objectToQuery(O),T.headers["Content-Type"]="application/x-www-form-urlencoded")):P=k.addQueryParameters(P,O);V&&(N.useProxy=!0,P=`${U}?${P}`);O.token&&G&&T.body instanceof FormData&&(U=T.body,U.set?U.set("token",O.token):U.append("token",O.token));R.hasOwnProperty("withCredentials")?N.withCredentials=R.withCredentials:k.isTrustedServer(P)?
N.withCredentials=!0:c.id&&(O=c.id.findServerInfo(P))&&O.webTierAuth&&(N.withCredentials=!0);N.withCredentials&&(T.credentials="include")}O=0;let ba=!1;0<la&&(O=setTimeout(()=>{ba=!0;N.controller.abort()},la));let ka,oa;try{if("image"!==R.responseType||"default"!==T.cache||"GET"!==T.method||ea||u(R.headers)||!W&&!N.useProxy&&F.proxyUrl&&!g(P)){if(ka=await q._abortableFetch(P,T),N.useProxy||d(P),ka.ok&&"HEAD"!==T.method){switch(Z){case "array-buffer":oa=await ka.arrayBuffer();break;case "blob":case "image":oa=
await ka.blob();break;default:oa=await ka.text()}O&&(clearTimeout(O),O=0);if("json"===Z||"xml"===Z||"document"===Z)if(oa)switch(Z){case "json":oa=JSON.parse(oa);break;case "xml":oa=D(oa,"application/xml");break;case "document":oa=D(oa,"text/html")}else oa=null;if(oa){if("array-buffer"===Z||"blob"===Z){const M=ka.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(M)&&750>=oa["blob"===Z?"size":"byteLength"])try{const V=await (new Response(oa)).json();V.error&&(oa=V)}catch{}}"image"===
Z&&oa instanceof Blob&&(oa=await C(URL.createObjectURL(oa),N,!0))}}}else oa=await C(P,N)}catch(M){if("AbortError"===M.name){if(ba)throw Error("Timeout exceeded");throw m.createAbortError("Request canceled");}if(!ka&&M instanceof TypeError&&F.proxyUrl&&!R.body&&"post"!==R.method&&"head"!==R.method&&!N.useProxy)N.redoRequest=!0,k.addProxyRule({proxyUrl:F.proxyUrl,urlPrefix:k.removeFile(k.urlToObject(P).path)});else throw M;}finally{O&&clearTimeout(O)}return[ka,oa]}async function x(N,P){if(null!=N.responseData)return N.responseData;
N.headers&&(P.requestOptions.headers={...P.requestOptions.headers,...N.headers});N.query&&(P.requestOptions.query={...P.requestOptions.query,...N.query});if(N.before){let R,T;try{T=await N.before(P)}catch(W){R=b("request:interceptor",W,P)}if(T instanceof Error||T instanceof f)R=b("request:interceptor",T,P);if(R)throw N.error&&N.error(R),R;return T}}function u(N){if(N)for(const P of Object.getOwnPropertyNames(N))if(N[P])return!0;return!1}function D(N,P){let R;try{R=(new DOMParser).parseFromString(N,
P)}catch{}if(!R||R.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return R}async function B(N){await r(N);let P;try{do[P,R]=await v(N);while(!await A(N,P,R))}catch(Z){var R=b("request:server",Z,N.params,P);R.details.ssl=N.useSSL;N.interceptor&&N.interceptor.error&&N.interceptor.error(R);throw R;}var T=N.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(T)&&!N.hasToken&&!N.credentialToken&&R&&R.user&&R.user.username&&!k.isTrustedServer(T)&&(T=k.getOrigin(T,
!0))&&F.trustedServers.push(T);if((T=N.credential)&&c.id){var W=c.id.findServerInfo(T.server);if(W=W&&W.owningSystemUrl)W=W.replace(/\/?$/,"/sharing"),(T=c.id.findCredential(W,T.userId))&&-1===c.id._getIdenticalSvcIdx(W,T)&&T.resources.unshift(W)}return{data:R,getHeader:P?Z=>P.headers.get(Z):I,requestOptions:N.params.requestOptions,ssl:N.useSSL,url:N.params.url}}async function A(N,P,R){var T;if(N.redoRequest)return N.redoRequest=!1;if(!P)return!0;if(!P.ok)throw Error(`Unable to load ${P.url} status: ${P.status}`);
let W;R&&R.error&&(W=z.mixin(Error(),R.error));let Z,la,ea;W&&(Z=Number(W.code),la=W.hasOwnProperty("subcode")?Number(W.subcode):null,ea=(ea=W.messageCode)&&ea.toUpperCase());P=N.params.requestOptions.authMode;R=String(null==(T=N.params.requestOptions.query)?void 0:T.token);if(403===Z&&(4===la||W.message&&-1<W.message.toLowerCase().indexOf("ssl")&&-1===W.message.toLowerCase().indexOf("permission"))){if(!N.useSSL)return N.useSSL=!0,!1}else if(N.useIdentity&&("no-prompt"!==P||498===Z)&&-1!==J.indexOf(Z)&&
!t(N.params.url)&&!R.startsWith("AAPK")&&(403!==Z||-1===K.indexOf(ea)&&(null==la||2===la&&N.credentialToken))){await h();try{const O=await c.id.getCredential(N.params.url,{error:b("request:server",W,N.params),prompt:"no-prompt"!==P,signal:N.controller.signal,token:N.credentialToken});N.credential=O;N.credentialToken=O.token;N.useSSL=N.useSSL||O.ssl;return!1}catch(O){if("no-prompt"===P)return N.credential=null,N.credentialToken=null,!1;W=O}}if(W)throw W;return!0}function C(N,P,R=!1){const T=P.controller.signal,
W=new Image;W.crossOrigin=P.withCredentials?"use-credentials":"anonymous";W.alt="";W.src=N;return e.loadImageAsync(W,N,R,T)}let E;const F=y.request,G="FormData"in l,J=[499,498,403,401],K=["COM_0056","COM_0057","SB_0008"],L=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],I=()=>null;q._abortableFetch=null;q._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return q})},"esri/support/requestUtils":function(){define(["exports","../core/has",
"../core/maybe","../core/promiseUtils"],function(n,l,p,z){function y(){try{return new DOMException("Aborted","AbortError")}catch{const w=Error();w.name="AbortError";return w}}n.loadImageAsync=function(w,f,k=!1,m){return z.create((c,e)=>{if(z.isAborted(m))e(y());else{var q=()=>{b();e(Error(`Unable to load ${f}`))},d=()=>{const a=w;b();c(a)},g=()=>{if(w){var a=w;b();a.src="";e(y())}},b=()=>{l("esri-image-decode")||(w.removeEventListener("error",q),w.removeEventListener("load",d));w=d=q=null;p.isSome(m)&&
m.removeEventListener("abort",g);g=null;k&&URL.revokeObjectURL(f)};p.isSome(m)&&m.addEventListener("abort",g);l("esri-image-decode")?w.decode().then(d,q):(w.addEventListener("error",q),w.addEventListener("load",d))}})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(n,l){const p=Math.PI/180;var z=l.earth.radius;const y=l.earth.eccentricitySquared;z={a1:z*y,a2:z*y*z*y,a3:z*y*y/2,a4:z*y*z*y*2.5,a5:z*y+
z*y*y/2,a6:1-y};l={4326:{a:l.earth.radius,f:l.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:l.moon.radius,f:l.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:l.mars.radius,f:l.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,
f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,
f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,
f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:l.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};n.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;n.earthEllipsoidConstants=z;n.spheroids=l;n.toRadians=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(n){return function(){function l(z){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(z&&z.steps)for(const y of z.steps)y instanceof n?this.steps.push(y):this.steps.push(new n({wkid:y.wkid,wkt:y.wkt,isInverse:y.isInverse}))}l.cacheKey=function(z,y){return[void 0!==z.wkid&&null!==z.wkid?z.wkid.toString():"-1",void 0!==z.wkt&&null!==z.wkt?z.wkt.toString():"",void 0!==y.wkid&&null!==y.wkid?y.wkid.toString():"-1",void 0!==y.wkt&&null!==y.wkt?y.wkt.toString():""].join()};
l.fromGE=function(z){const y=new l;let w="";for(const f of z.steps)z=n.fromGE(f),y.steps.push(z),w+=z.uid.toString()+",";y._cached_projection={};y._gtlistentry=null;y._chain=w;return y};var p=l.prototype;p.getInverse=function(){const z=new l;z.steps=[];for(let y=this.steps.length-1;0<=y;y--)z.steps.push(this.steps[y].getInverse());return z};p.getGTListEntry=function(){let z="";for(const y of this.steps)z+=y.uid.toString()+",";z!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
z);return this._gtlistentry};p.assignCachedGe=function(z,y,w){this._cached_projection[l.cacheKey(z,y)]=w};p.getCachedGeTransformation=function(z,y){let w="";for(const f of this.steps)w+=f.uid.toString()+",";w!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=w);z=this._cached_projection[l.cacheKey(z,y)];return void 0===z?null:z};return l}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){let l=
0;return function(){function p(z=null){this.uid=l++;z?(this._wkt=void 0!==z.wkt?z.wkt:null,this._wkid=void 0!==z.wkid?z.wkid:-1,this._isInverse=void 0!==z.isInverse?!0===z.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}p.fromGE=function(z){const y=new p;y._wkt=z.wkt;y._wkid=z.wkid;y._isInverse=z.isInverse;return y};p.prototype.getInverse=function(){const z=new p;z._wkt=this.wkt;z._wkid=this._wkid;z._isInverse=!this.isInverse;return z};n._createClass(p,[{key:"wkt",get:function(){return this._wkt},
set:function(z){this._wkt=z;this.uid=l++}},{key:"wkid",get:function(){return this._wkid},set:function(z){this._wkid=z;this.uid=l++}},{key:"isInverse",get:function(){return this._isInverse},set:function(z){this._isInverse=z;this.uid=l++}}]);return p}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(n){let l=function(f,k,m){this.x=f;this.y=k;this.spatialReference=m;this.m=this.z=void 0},p=function(f,k,m,c){this.rings=f;this.spatialReference=k;this.hasM=this.hasZ=void 0;
m&&(this.hasZ=m);c&&(this.hasM=c)},z=function(f,k,m,c){this.paths=f;this.spatialReference=k;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);c&&(this.hasM=c)},y=function(f,k,m,c){this.points=f;this.spatialReference=k;this.hasM=this.hasZ=void 0;m&&(this.hasZ=m);c&&(this.hasM=c)},w=function(f,k,m,c,e){this.xmin=f;this.ymin=k;this.xmax=m;this.ymax=c;this.spatialReference=e;this.mmax=this.mmin=this.zmax=this.zmin=void 0};n.jsonAdapter={convertToGEGeometry:function(f,k){return null==k?null:f.convertJSONToGeometry(k)},
exportPoint:function(f,k,m){m=new l(f.getPointX(k),f.getPointY(k),m);const c=f.hasZ(k),e=f.hasM(k);c&&(m.z=f.getPointZ(k));e&&(m.m=f.getPointM(k));return m},exportPolygon:function(f,k,m){return new p(f.exportPaths(k),m,f.hasZ(k),f.hasM(k))},exportPolyline:function(f,k,m){return new z(f.exportPaths(k),m,f.hasZ(k),f.hasM(k))},exportMultipoint:function(f,k,m){return new y(f.exportPoints(k),m,f.hasZ(k),f.hasM(k))},exportExtent:function(f,k,m){var c=f.hasZ(k);const e=f.hasM(k);m=new w(f.getXMin(k),f.getYMin(k),
f.getXMax(k),f.getYMax(k),m);c&&(c=f.getZExtent(k),m.zmin=c.vmin,m.zmax=c.vmax);e&&(f=f.getMExtent(k),m.mmin=f.vmin,m.mmax=f.vmax);return m}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(n,l,p){function z(m,c){return m?f.get(m,c):null}function y(m,c,e,q=!0){const d=[];for(const g of c)if("*"!==g&&!m.has(g))if(q){c=w(g);try{const b=z(c,m);if(!b)throw new l("feature-store:unsupported-query",
"invalid SQL expression",{where:c});if(!b.isStandardized)throw new l("feature-store:unsupported-query","expression is not standard",{clause:b});y(m,b.fieldNames,"expression contains missing fields")}catch(b){if((c=b&&b.details)&&(c.clause||c.where))throw b;c&&c.missingFields?d.push(...c.missingFields):d.push(g)}}else d.push(g);if(d.length)throw new l("feature-store:unsupported-query",e,{missingFields:d});}function w(m){return m.split(" as ")[0]}const f=new p.WhereClauseCache(50,500),k=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
n.getAliasFromFieldName=function(m){return m.split(" as ")[1]};n.getExpressionFromFieldName=w;n.getWhereClause=z;n.hasInvalidFieldType=function(m,c){return(m=c.get(m))?!k.has(m.type):!1};n.validateFields=y;n.validateHaving=function(m,c,e){if(!c)return!0;const q=f.get(c,m);if(!q)throw new l("feature-store:unsupported-query","invalid SQL expression",{having:c});if(!q.isAggregate)throw new l("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:c});y(m,q.fieldNames,
"having contains missing fields");if(!q.getExpressions().every(d=>{const {aggregateType:g,field:b}=d,a=m.has(b)&&m.get(b).name;return e.some(h=>{const {onStatisticField:r,statisticType:t}=h;return(m.has(r)&&m.get(r).name)===a&&t.toLowerCase().trim()===g})}))throw new l("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:c});return!0};n.validateWhere=function(m,c){if(!c)return!0;const e=f.get(c,m);if(!e)throw new l("feature-store:unsupported-query",
"invalid SQL expression",{where:c});if(!e.isStandardized)throw new l("feature-store:unsupported-query","where clause is not standard",{where:c});y(m,e.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(n,l,p){let z=function(){function y(w,f){this._cache=new l(w);this._invalidCache=new l(f)}y.prototype.get=function(w,f){const k=`${f.uid}:${w}`,
m=this._cache.get(k);if(m)return m;if(void 0!==this._invalidCache.get(k))return null;try{const c=p.WhereClause.create(w,f);this._cache.put(k,c);return c}catch{return this._invalidCache.put(k,null),null}};return y}();n.WhereClauseCache=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(n){return function(){function l(z,y){this._storage=new n.MemCacheStorage;this._storage.maxSize=z;y&&this._storage.registerRemoveFunc("",y)}var p=l.prototype;
p.put=function(z,y){this._storage.put(z,y,1,1)};p.pop=function(z){return this._storage.pop(z)};p.get=function(z){return this._storage.get(z)};p.clear=function(){this._storage.clearAll()};p.destroy=function(){this._storage.clearAll()};return l}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(n,l,p,z,y,w){function f(J,K){J+="";return J.length>=K?J:Array(K-J.length+
1).join("0")+J}function k(J,K,L="0",I="0",N="0",P="0",R="",T="0",W="0"){return"+"===R||"-"===R?(J=`${f(parseInt(J,10),4)}-${f(parseInt(K,10),2)}-${f(parseInt(L,10),2)}`,K="",10>parseFloat(P)&&(K="0"),I=`${f(parseInt(I,10),2)}:${f(parseInt(N,10),2)}:${K+parseFloat(P).toString()}`,R=`${R}${f(parseInt(T,10),2)}:${f(parseInt(W,10),2)}`,new Date(J+"T"+I+R)):new Date(parseInt(J,10),parseInt(K,10)-1,parseInt(L,10),parseInt(I,10),parseInt(N,10),parseFloat(P))}function m(J){let K=D.exec(J);if(null!==K){const [,
L,I,N,P,R,T]=K;return k(L,I,N,P,R,T)}K=B.exec(J);if(null!==K){const [,L,I,N,P,R,T,W,Z,la]=K;return k(L,I,N,P,R,T,W,Z,la)}K=A.exec(J);if(null!==K){const [,L,I,N,P,R,T,W,Z]=K;return k(L,I,N,P,R,"0",T,W,Z)}K=C.exec(J);if(null!==K){const [,L,I,N,P,R]=K;return k(L,I,N,P,R)}K=u.exec(J);if(null!==K){const [,L,I,N]=K;return k(L,I,N)}throw Error("SQL Invalid Timestamp");}function c(J){J=u.exec(J);if(null===J)throw Error("SQL Invalid Date");const [,K,L,I]=J;return new Date(parseInt(K,10),parseInt(L,10)-1,parseInt(I,
10))}function e(J){return Array.isArray(J)?J:[J]}function q(J){return null!==J?!0!==J:null}function d(J,K){return null!=J&&null!=K?!0===J&&!0===K:!1===J||!1===K?!1:null}function g(J,K){return null!=J&&null!=K?!0===J||!0===K:!0===J||!0===K?!0:null}function b(J,K){if(null==J)return null;let L=!1;for(const I of K)if(null==I)L=null;else if(J===I){L=!0;break}return L}function a(J,K,L){if(null==J)return null;let I="",N=0;for(let P=0;P<K.length;P++){const R=K.charAt(P);switch(N){case 0:R===L?N=1:I=0<="-[]/{}()*+?.\\^$|".indexOf(R)?
I+("\\"+R):"%"===R?I+".*":"_"===R?I+".":I+R;break;case 1:I=0<="-[]/{}()*+?.\\^$|".indexOf(R)?I+("\\"+R):I+R,N=0}}return(new RegExp("^"+I+"$")).test(J)}function h(J){return J instanceof Date?J.valueOf():J}function r(J,K,L){if(null==K||null==L)return null;K=h(K);L=h(L);switch(J){case "\x3c\x3e":return K!==L;case "\x3d":return K===L;case "\x3e":return K>L;case "\x3c":return K<L;case "\x3e\x3d":return K>=L;case "\x3c\x3d":return K<=L}}function t(J){const K=[],L={};for(const I of J)J=I.toLowerCase(),void 0===
L[J]&&(K.push(I),L[J]=1);return K}function v(J,K,L){if(K instanceof y.SqlInterval)if(L instanceof Date)switch(J){case "+":return new Date(K.valueInMilliseconds()+L.getTime());case "-":return K.valueInMilliseconds()-L.getTime();case "*":return K.valueInMilliseconds()*L.getTime();case "/":return K.valueInMilliseconds()/L.getTime()}else if(L instanceof y.SqlInterval)switch(J){case "+":return y.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()+L.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()-
L.valueInMilliseconds());case "*":return K.valueInMilliseconds()*L.valueInMilliseconds();case "/":return K.valueInMilliseconds()/L.valueInMilliseconds()}else K=K.valueInMilliseconds();else if(L instanceof y.SqlInterval)if(K instanceof Date)switch(J){case "+":return new Date(L.valueInMilliseconds()+K.getTime());case "-":return new Date(K.getTime()-L.valueInMilliseconds());case "*":return K.getTime()*L.valueInMilliseconds();case "/":return K.getTime()/L.valueInMilliseconds()}else L=L.valueInMilliseconds();
else if(K instanceof Date&&"number"===typeof L)switch(L*=864E5,K=K.getTime(),J){case "+":return new Date(K+L);case "-":return new Date(K-L);case "*":return new Date(K*L);case "/":return new Date(K/L)}else if(L instanceof Date&&"number"===typeof K)switch(K*=864E5,L=L.getTime(),J){case "+":return new Date(K+L);case "-":return new Date(K-L);case "*":return new Date(K*L);case "/":return new Date(K/L)}switch(J){case "+":return K+L;case "-":return K-L;case "*":return K*L;case "/":return K/L}}function x(J,
K,L,I){J=I.getAttribute(J,K);return null!=J&&1===L[K]?new Date(J):J}const u=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let E=function(){function J(){}J.makeBool=function(K){return!0===K};J.featureValue=
function(K,L,I,N){return x(K,L,I,N)};J.equalsNull=function(K){return null===K};J.applyLike=function(K,L,I){return a(K,L,I)};J.ensureArray=function(K){return e(K)};J.applyIn=function(K,L){return b(K,L)};J.currentDate=function(){const K=new Date;K.setHours(0,0,0,0);return K};J.makeSqlInterval=function(K,L,I){return y.SqlInterval.createFromValueAndQualifer(K,L,I)};J.convertInterval=function(K){return K instanceof y.SqlInterval?K.valueInMilliseconds():K};J.currentTimestamp=function(){return new Date};
J.compare=function(K,L,I){return r(K,L,I)};J.calculate=function(K,L,I){return v(K,L,I)};J.makeComparable=function(K){return h(K)};J.evaluateFunction=function(K,L){return y.evaluateFunction(K,L)};J.lookup=function(K,L){K=L[K];return void 0===K?null:K};J.between=function(K,L){return null==K||null==L[0]||null==L[1]?null:K>=L[0]&&K<=L[1]};J.notbetween=function(K,L){return null==K||null==L[0]||null==L[1]?null:K<L[0]||K>L[1]};J.ternaryNot=function(K){return q(K)};J.ternaryAnd=function(K,L){return d(K,L)};
J.ternaryOr=function(K,L){return g(K,L)};return J}(),F=function(){function J(L,I){this.fieldsIndex=I;this.datefields={};this.parameters={};this.parseTree=w.WhereGrammar.parse(L);const {isStandardized:N,isAggregate:P,referencedFieldNames:R}=this.extractExpressionInfo(I);this.referencedFieldNames=R;this.isStandardized=N;this.isAggregate=P}J.create=function(L,I){return new J(L,I)};var K=J.prototype;K.testSet=function(L,I=G){const N={};for(const P of this.fieldNames)N[P]=L.map(R=>I.getAttribute(R,P));
return!!this.evaluateNode(this.parseTree,{attributes:N},G)};K.calculateValue=function(L,I=G){L=this.evaluateNode(this.parseTree,L,I);return L instanceof y.SqlInterval?L.valueInMilliseconds()/864E5:L};K.calculateValueCompiled=function(L,I=G){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(L,this.parameters,I,this.datefields);if(p("csp-restrictions"))return this.calculateValue(L,I);this.compileMe();return this.parseTree._compiledVersion(L,this.parameters,I,this.datefields)};
K.testFeature=function(L,I=G){return!!this.evaluateNode(this.parseTree,L,I)};K.testFeatureCompiled=function(L,I=G){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(L,this.parameters,I,this.datefields);if(p("csp-restrictions"))return this.testFeature(L,I);this.compileMe();return!!this.parseTree._compiledVersion(L,this.parameters,I,this.datefields)};K.getFunctions=function(){const L=[];this.visitAll(this.parseTree,I=>{"function"===I.type&&L.push(I.name.toLowerCase())});
return t(L)};K.getExpressions=function(){const L=new Map;this.visitAll(this.parseTree,I=>{if("function"===I.type){const N=I.name.toLowerCase();I=I.args.value[0];if("column_ref"===I.type){I=I.column;const P=`${N}-${I}`;L.has(P)||L.set(P,{aggregateType:N,field:I})}}});return[...L.values()]};K.getVariables=function(){const L=[];this.visitAll(this.parseTree,I=>{"param"===I.type&&L.push(I.value.toLowerCase())});return t(L)};K.compileMe=function(){const L="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",L)).bind(E)};K.extractExpressionInfo=function(L){const I=[];let N=!0,P=!0;this.visitAll(this.parseTree,R=>{switch(R.type){case "column_ref":{const T=L.get(R.column),W=T&&T.name;!T||"date"!==T.type&&"esriFieldTypeDate"!==T.type||(this.datefields[T.name]=1);void 0!==W?(I.push(W),R.column=W):I.push(R.column);break}case "function":{const {name:T,args:W}=R;R=W.value.length;N&&(N=y.isStandardized(T,R));
P&&(P=z.isAggregate(T,R))}}});return{referencedFieldNames:t(I),isStandardized:N,isAggregate:P}};K.visitAll=function(L,I){if(null!=L)switch(I(L),L.type){case "when_clause":this.visitAll(L.operand,I);this.visitAll(L.value,I);break;case "case_expression":for(const N of L.clauses)this.visitAll(N,I);"simple"===L.format&&this.visitAll(L.operand,I);null!==L.else&&this.visitAll(L.else,I);break;case "expr_list":for(const N of L.value)this.visitAll(N,I);break;case "unary_expr":this.visitAll(L.expr,I);break;
case "binary_expr":this.visitAll(L.left,I);this.visitAll(L.right,I);break;case "function":this.visitAll(L.args,I)}};K.evaluateNodeToJavaScript=function(L){switch(L.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(L.value)+", "+JSON.stringify(L.qualifier)+","+JSON.stringify(L.op)+")";case "case_expression":var I="";if("simple"===L.format){var N="this.makeComparable("+this.evaluateNodeToJavaScript(L.operand)+")";I="( ";for(let P=0;P<L.clauses.length;P++)I+=" ("+N+" \x3d\x3d\x3d this.makeComparable("+
this.evaluateNodeToJavaScript(L.clauses[P].operand)+")) ? ("+this.evaluateNodeToJavaScript(L.clauses[P].value)+") : "}else for(I="( ",N=0;N<L.clauses.length;N++)I+=" this.makeBool("+this.evaluateNodeToJavaScript(L.clauses[N].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(L.clauses[N].value)+") : ";I=null!==L.else?I+this.evaluateNodeToJavaScript(L.else):I+"null";return I+=" )";case "param":return"this.lookup("+JSON.stringify(L.value.toLowerCase())+",lookups)";case "expr_list":I="[";
for(N of L.value)"["!==I&&(I+=","),I+=this.evaluateNodeToJavaScript(N);return I+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(L.expr)+")";case "binary_expr":switch(L.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+" )";case "IS":if("null"!==L.right.type)throw Error("Unsupported RHS for IS");
return"this.equalsNull("+this.evaluateNodeToJavaScript(L.left)+")";case "ISNOT":if("null"!==L.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(L.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(L.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(L.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(L.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(L.right)+")))";
case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+","+JSON.stringify(L.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+
","+JSON.stringify(L.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(L.operator)+","+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(L.operator)+","+this.evaluateNodeToJavaScript(L.left)+","+this.evaluateNodeToJavaScript(L.right)+")"}throw Error("Not Supported Operator "+L.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(L.value);
case "date":return"(new Date("+c(L.value).getTime().toString()+"))";case "timestamp":return"(new Date("+m(L.value).getTime().toString()+"))";case "current_time":return"date"===L.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(L.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(L.name)+","+this.evaluateNodeToJavaScript(L.args)+")"}throw Error("Unsupported sql syntax "+L.type);
};K.evaluateNode=function(L,I,N){switch(L.type){case "interval":return I=this.evaluateNode(L.value,I,N),y.SqlInterval.createFromValueAndQualifer(I,L.qualifier,L.op);case "case_expression":if("simple"===L.format){var P=h(this.evaluateNode(L.operand,I,N));for(var R=0;R<L.clauses.length;R++)if(P===h(this.evaluateNode(L.clauses[R].operand,I,N)))return this.evaluateNode(L.clauses[R].value,I,N)}else for(P=0;P<L.clauses.length;P++)if(!0===this.evaluateNode(L.clauses[P].operand,I,N))return this.evaluateNode(L.clauses[P].value,
I,N);return null!==L.else?this.evaluateNode(L.else,I,N):null;case "param":return this.parameters[L.value.toLowerCase()];case "expr_list":P=[];for(R of L.value)P.push(this.evaluateNode(R,I,N));return P;case "unary_expr":return q(this.evaluateNode(L.expr,I,N));case "binary_expr":switch(L.operator){case "AND":return d(this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N));case "OR":return g(this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N));case "IS":if("null"!==L.right.type)throw Error("Unsupported RHS for IS");
return null===this.evaluateNode(L.left,I,N);case "ISNOT":if("null"!==L.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(L.left,I,N);case "IN":return P=e(this.evaluateNode(L.right,I,N)),b(this.evaluateNode(L.left,I,N),P);case "NOT IN":return P=e(this.evaluateNode(L.right,I,N)),q(b(this.evaluateNode(L.left,I,N),P));case "BETWEEN":return P=this.evaluateNode(L.left,I,N),L=this.evaluateNode(L.right,I,N),null==P||null==L[0]||null==L[1]?null:P>=h(L[0])&&P<=h(L[1]);case "NOTBETWEEN":return P=
this.evaluateNode(L.left,I,N),L=this.evaluateNode(L.right,I,N),null==P||null==L[0]||null==L[1]?null:P<h(L[0])||P>h(L[1]);case "LIKE":return a(this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N),L.escape);case "NOT LIKE":return q(a(this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N),L.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return r(L.operator,this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N));case "-":case "+":case "*":case "/":return v(L.operator,
this.evaluateNode(L.left,I,N),this.evaluateNode(L.right,I,N))}case "null":case "bool":case "string":case "number":return L.value;case "date":return c(L.value);case "timestamp":return m(L.value);case "current_time":return I=new Date,"date"===L.mode&&I.setHours(0,0,0,0),I;case "column_ref":return x(I,L.column,this.datefields,N);case "function":return I=this.evaluateNode(L.args,I,N),this.isAggregate?z.aggregateFunction(L.name,I):y.evaluateFunction(L.name,I)}throw Error("Unsupported sql syntax "+L.type);
};l._createClass(J,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return J}();const G={getAttribute(J,K){return(J&&"object"===typeof J.attributes?J.attributes:J)[K]}};n.WhereClause=F;n.defaultAttributeAdapter=G;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(n){function l(y){let w=0;for(let f=0;f<y.length;f++)w+=y[f];return w/y.length}function p(y){const w=l(y),f=y.length;let k=0;for(const m of y)k+=
Math.pow(m-w,2);return 1<f?k/(f-1):0}const z={min:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.min.apply(Math,y[0])},max:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.max.apply(Math,y[0])},avg:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:l(y[0])},sum:{minParams:1,maxParams:1,evaluate:y=>{if(null==y[0])y=null;else{{y=y[0];let w=0;for(let f=0;f<y.length;f++)w+=y[f];y=w}}return y}},stddev:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.sqrt(p(y[0]))},count:{minParams:1,
maxParams:1,evaluate:y=>null==y[0]?null:y[0].length},var:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:p(y[0])}};n.aggregateFunction=function(y,w){const f=z[y.toLowerCase()];if(null==f)throw Error("Function Not Recognised");if(w.length<f.minParams||w.length>f.maxParams)throw Error(`Invalid Parameter count for call to ${y.toUpperCase()}`);return f.evaluate(w)};n.isAggregate=function(y,w){y=z[y.toLowerCase()];return null!=y&&w>=y.minParams&&w<=y.maxParams};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(n,l){let p=function(){function y(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}y.fixDefaults=function(w){if(null!==w.precision||null!==w.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};y.createFromMilliseconds=function(w){const f=new y;f.second=w/1E3;return f};y.createFromValueAndQualifer=function(w,f,k){let m=null;const c=
new y;c.op="-"===k?"-":"+";if("interval-period"===f.type){y.fixDefaults(f);if("year"===f.period||"month"===f.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(w))c[f.period]=parseFloat(w);else throw Error("Illegal Interval");}else{y.fixDefaults(f.start);y.fixDefaults(f.end);if("year"===f.start.period||"month"===f.start.period)throw Error("Year-Month Intervals not supported");if("year"===f.end.period||"month"===f.end.period)throw Error("Year-Month Intervals not supported");
switch(f.start.period){case "day":switch(f.end.period){case "hour":m=/^[0-9]{1,} [0-9]{1,}$/;if(m.test(w))c[f.start.period]=parseFloat(w.split(" ")[0]),c[f.end.period]=parseFloat(w.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":m=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(m.test(w))c[f.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),c.hour=parseFloat(w[0]),c.minute=parseFloat(w[1]);else throw Error("Illegal Interval");break;case "second":m=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(m.test(w))c[f.start.period]=parseFloat(w.split(" ")[0]),w=w.split(" ")[1].split(":"),c.hour=parseFloat(w[0]),c.minute=parseFloat(w[1]),c.second=parseFloat(w[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(f.end.period){case "minute":m=/^[0-9]{1,}:[0-9]{1,}$/;if(m.test(w))c.hour=parseFloat(w.split(":")[0]),c.minute=parseFloat(w.split(":")[1]);else throw Error("Illegal Interval");break;case "second":m=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(m.test(w))w=w.split(":"),c.hour=parseFloat(w[0]),c.minute=parseFloat(w[1]),c.second=parseFloat(w[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(f.end.period){case "second":m=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(m.test(w))w=w.split(":"),c.minute=parseFloat(w[0]),c.second=parseFloat(w[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return c};y.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return y}();const z={extract:{minParams:2,maxParams:2,evaluate:([y,w])=>{if(null==w)return null;if(w instanceof Date)switch(y.toUpperCase()){case "SECOND":return w.getSeconds();case "MINUTE":return w.getMinutes();case "HOUR":return w.getHours();case "DAY":return w.getDate();case "MONTH":return w.getMonth()+1;case "YEAR":return w.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:y=>{if(2===y.length){const [w,f]=y;return null==w||null==f?null:w.toString().substring(f-1)}if(3===y.length){const [w,f,k]=y;return null==w||null==f||null==k?null:0>=k?"":w.toString().substring(f-1,f+k-1)}}},position:{minParams:2,maxParams:2,evaluate:([y,w])=>null==y||null==w?null:w.indexOf(y)+1},trim:{minParams:2,maxParams:3,evaluate:y=>{var w=3===y.length,f=w?y[1]:" ";w=w?y[2]:y[1];if(null==f||null==w)return null;f=`(${l.escapeRegExpString(f)})`;switch(y[0]){case "BOTH":return w.replace(new RegExp(`^${f}*|${f}*$`,
"g"),"");case "LEADING":return w.replace(new RegExp(`^${f}*`,"g"),"");case "TRAILING":return w.replace(new RegExp(`${f}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.abs(y[0])},ceiling:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.ceil(y[0])},floor:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.floor(y[0])},log:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.log(y[0])},log10:{minParams:1,
maxParams:1,evaluate:y=>null==y[0]?null:Math.log(y[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.sin(y[0])},cos:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.cos(y[0])},tan:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.tan(y[0])},asin:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.asin(y[0])},acos:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.acos(y[0])},atan:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.atan(y[0])},
sign:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:0<y[0]?1:0>y[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:y=>null==y[0]||null==y[1]?null:Math.pow(y[0],y[1])},mod:{minParams:2,maxParams:2,evaluate:y=>null==y[0]||null==y[1]?null:y[0]%y[1]},round:{minParams:1,maxParams:2,evaluate:y=>{const w=y[0];y=2===y.length?Math.pow(10,y[1]):1;return null==w?null:Math.round(w*y)/y}},truncate:{minParams:1,maxParams:2,evaluate:y=>null==y[0]?null:1===y.length?parseInt(y[0].toFixed(0),10):parseFloat(y[0].toFixed(y[1]))},
char_length:{minParams:1,maxParams:1,evaluate:y=>"string"===typeof y[0]||y[0]instanceof String?y[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:y=>{let w="";for(let f=0;f<y.length;f++){if(null==y[f])return null;w+=y[f].toString()}return w}},lower:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:y[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:y[0].toString().toUpperCase()}};n.SqlInterval=p;n.evaluateFunction=function(y,w){const f=z[y.toLowerCase()];
if(null==f)throw Error("Function Not Recognised");if(w.length<f.minParams||w.length>f.maxParams)throw Error(`Invalid Parameter count for call to ${y.toUpperCase()}`);return f.evaluate(w)};n.isStandardized=function(y,w){y=z[y.toLowerCase()];return null!=y&&w>=y.minParams&&w<=y.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(n,l){var p=l.createCommonjsModule(function(y){(function(w,f){y.exports&&
(y.exports=f())})(l.commonjsGlobal,function(){function w(f,k,m,c){this.message=f;this.expected=k;this.found=m;this.location=c;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,w)}(function(f,k){function m(){this.constructor=f}m.prototype=k.prototype;f.prototype=new m})(w,Error);w.buildMessage=function(f,k){function m(d){return d.charCodeAt(0).toString(16).toUpperCase()}function c(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,
"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+m(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+m(g)})}function e(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+m(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+m(g)})}var q={literal:function(d){return'"'+
c(d.text)+'"'},"class":function(d){var g="",b;for(b=0;b<d.parts.length;b++)g+=d.parts[b]instanceof Array?e(d.parts[b][0])+"-"+e(d.parts[b][1]):e(d.parts[b]);return"["+(d.inverted?"^":"")+g+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};return"Expected "+function(d){var g=Array(d.length),b;for(b=0;b<d.length;b++){var a=b;var h=d[b];h=q[h.type](h);g[a]=h}g.sort();if(0<g.length){for(d=b=1;b<g.length;b++)g[b-1]!==g[b]&&(g[d]=
g[b],d++);g.length=d}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}(f)+" but "+(k?'"'+c(k)+'"':"end of input")+" found."};return{SyntaxError:w,parse:function(f,k){function m(Y,fa){return{type:"literal",text:Y,ignoreCase:fa}}function c(Y,fa,da){return{type:"class",parts:Y,inverted:fa,ignoreCase:da}}function e(Y){var fa=Yb[Y],da;if(!fa){for(da=Y-1;!Yb[da];)da--;fa=Yb[da];for(fa={line:fa.line,column:fa.column};da<Y;)10===
f.charCodeAt(da)?(fa.line++,fa.column=1):fa.column++,da++;Yb[Y]=fa}return fa}function q(Y,fa){var da=e(Y),na=e(fa);return{start:{offset:Y,line:da.line,column:da.column},end:{offset:fa,line:na.line,column:na.column}}}function d(Y){S<rb||(S>rb&&(rb=S,nc=[]),nc.push(Y))}function g(){var Y=S;var fa=xa();if(fa!==H)if(fa=a(),fa!==H){var da=xa();da!==H?Y=fa:(S=Y,Y=H)}else S=Y,Y=H;else S=Y,Y=H;return Y}function b(){var Y=S;var fa=a();if(fa!==H){var da=[];var na=S;var za=xa();if(za!==H){var Ga=Ia();if(Ga!==
H){var La=xa();if(La!==H){var Qa=a();Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;for(;na!==H;)da.push(na),na=S,za=xa(),za!==H?(Ga=Ia(),Ga!==H?(La=xa(),La!==H?(Qa=a(),Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);if(da!==H){Y={type:"expr_list"};fa=[fa];for(na=0;na<da.length;na++)fa.push(da[na][3]);Y.value=fa}else S=Y,Y=H}else S=Y,Y=H;return Y}function a(){var Y=S;var fa=h();if(fa!==H){var da=[];var na=S;var za=xa();if(za!==H){var Ga=
aa();if(Ga!==H){var La=xa();if(La!==H){var Qa=h();Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;for(;na!==H;)da.push(na),na=S,za=xa(),za!==H?(Ga=aa(),Ga!==H?(La=xa(),La!==H?(Qa=h(),Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);da!==H?Y=fa=db(fa,da):(S=Y,Y=H)}else S=Y,Y=H;return Y}function h(){var Y=S;var fa=r();if(fa!==H){var da=[];var na=S;var za=xa();if(za!==H){var Ga=X();if(Ga!==H){var La=xa();if(La!==H){var Qa=r();Qa!==H?na=
za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;for(;na!==H;)da.push(na),na=S,za=xa(),za!==H?(Ga=X(),Ga!==H?(La=xa(),La!==H?(Qa=r(),Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);da!==H?Y=fa=db(fa,da):(S=Y,Y=H)}else S=Y,Y=H;return Y}function r(){var Y=S;var fa=Q();if(fa===H){fa=S;if(33===f.charCodeAt(S)){var da=ib;S++}else da=H,0===ya&&d(lb);if(da!==H){var na=S;ya++;if(61===f.charCodeAt(S)){var za=Ra;S++}else za=H,0===ya&&d(wb);ya--;za===H?
na=void 0:(S=na,na=H);na!==H?fa=da=[da,na]:(S=fa,fa=H)}else S=fa,fa=H}fa!==H?(da=xa(),da!==H?(na=r(),na!==H?Y=fa={type:"unary_expr",operator:"NOT",expr:na}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H);if(Y===H)if(Y=S,fa=u(),fa!==H)if(da=xa(),da!==H){da=[];na=S;za=xa();if(za!==H){var Ga=t();if(Ga!==H){var La=xa();if(La!==H){var Qa=u();Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;if(na!==H)for(;na!==H;)da.push(na),na=S,za=xa(),za!==H?(Ga=t(),Ga!==H?(La=xa(),La!==H?(Qa=u(),
Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);else da=H;da!==H&&(da={type:"arithmetic",tail:da});da===H&&(da=S,na=x(),na!==H?(za=xa(),za!==H?(za=Ja(),za!==H?(za=xa(),za!==H?(za=b(),za!==H?(Ga=xa(),Ga!==H?(Ga=Sa(),Ga!==H?da=na={op:na,right:za}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=x(),na!==H?(za=xa(),za!==H?(za=Ja(),za!==H?(za=xa(),za!==H?(za=Sa(),za!==H?da=na={op:na,right:{type:"expr_list",value:[]}}:
(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=x(),na!==H?(za=xa(),za!==H?(za=K(),za!==H?da=na={op:na,right:za}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H))),da===H&&(da=S,za=Q(),za!==H?(na=xa(),na!==H?(na=ca(),na!==H?(Ga=xa(),Ga!==H?(Ga=u(),Ga!==H?(La=xa(),La!==H?(La=X(),La!==H?(za=xa(),za!==H?(za=u(),za!==H?da=za={op:"NOT"+na,right:{type:"expr_list",value:[Ga,za]}}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):
(S=da,da=H),da===H&&(da=S,za=ca(),za!==H?(na=xa(),na!==H?(na=u(),na!==H?(Ga=xa(),Ga!==H?(Ga=X(),Ga!==H?(La=xa(),La!==H?(La=u(),La!==H?da=za={op:za,right:{type:"expr_list",value:[na,La]}}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)),da===H&&(da=S,na=V(),na!==H?(za=xa(),za!==H?(za=Q(),za!==H?(za=xa(),za!==H?(za=u(),za!==H?da=na={op:na+"NOT",right:za}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=V(),na!==H?(za=xa(),za!==
H?(za=u(),za!==H?da=na={op:na,right:za}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)),da===H&&(da=S,na=v(),na!==H?(za=xa(),za!==H?(za=T(),za!==H?(Ga=xa(),Ga!==H?(Ga=S,f.substr(S,6).toLowerCase()===ud?(La=f.substr(S,6),S+=6):(La=H,0===ya&&d(vd)),La!==H?(La=S,ya++,Qa=G(),ya--,Qa===H?La=void 0:(S=La,La=H),La!==H?Ga="ESCAPE":(S=Ga,Ga=H)):(S=Ga,Ga=H),Ga!==H?(Ga=xa(),Ga!==H?(Ga=W(),Ga!==H?da=na={op:na,right:za,escape:Ga.value}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,
da=H),da===H&&(da=S,na=v(),na!==H?(za=xa(),za!==H?(za=T(),za!==H?da=na={op:na,right:za,escape:""}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H))))));da===H&&(da=null);da!==H?(Y=fa,fa=da,""==fa||void 0==fa||null==fa?fa=Y:(da=null,fa=da="arithmetic"==fa.type?db(Y,fa.tail):eb(fa.op,Y,fa.right,fa.escape)),Y=fa):(S=Y,Y=H)}else S=Y,Y=H;else S=Y,Y=H;return Y}function t(){if(f.substr(S,2)===ma){var Y=ma;S+=2}else Y=H,0===ya&&d(pa);Y===H&&(62===f.charCodeAt(S)?(Y=ra,S++):(Y=H,0===ya&&d(ua)),Y===H&&(f.substr(S,2)===
Ba?(Y=Ba,S+=2):(Y=H,0===ya&&d(Ea)),Y===H&&(f.substr(S,2)===Na?(Y=Na,S+=2):(Y=H,0===ya&&d(Pa)),Y===H&&(60===f.charCodeAt(S)?(Y=Za,S++):(Y=H,0===ya&&d(Ya)),Y===H&&(61===f.charCodeAt(S)?(Y=Ra,S++):(Y=H,0===ya&&d(wb)),Y===H&&(f.substr(S,2)===Va?(Y=Va,S+=2):(Y=H,0===ya&&d(gb))))))));return Y}function v(){var Y=Y=S;var fa=Q();if(fa!==H){var da=xa();if(da!==H){var na=ha();na!==H?Y=fa=[fa,da,na]:(S=Y,Y=H)}else S=Y,Y=H}else S=Y,Y=H;Y!==H&&(Y=Y[0]+" "+Y[2]);Y===H&&(Y=ha());return Y}function x(){var Y=Y=S;var fa=
Q();if(fa!==H){var da=xa();if(da!==H){var na=M();na!==H?Y=fa=[fa,da,na]:(S=Y,Y=H)}else S=Y,Y=H}else S=Y,Y=H;Y!==H&&(Y=Y[0]+" "+Y[2]);Y===H&&(Y=M());return Y}function u(){var Y=S;var fa=B();if(fa!==H){var da=[];var na=S;var za=xa();if(za!==H){var Ga=D();if(Ga!==H){var La=xa();if(La!==H){var Qa=B();Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;for(;na!==H;)da.push(na),na=S,za=xa(),za!==H?(Ga=D(),Ga!==H?(La=xa(),La!==H?(Qa=B(),Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=
H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);da!==H?Y=fa=db(fa,da):(S=Y,Y=H)}else S=Y,Y=H;return Y}function D(){if(43===f.charCodeAt(S)){var Y=jb;S++}else Y=H,0===ya&&d(oc);Y===H&&(45===f.charCodeAt(S)?(Y=pc,S++):(Y=H,0===ya&&d(qc)));return Y}function B(){var Y=S;var fa=C();if(fa!==H){var da=[];var na=S;var za=xa();if(za!==H){var Ga=A();if(Ga!==H){var La=xa();if(La!==H){var Qa=C();Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)}else S=na,na=H}else S=na,na=H}else S=na,na=H;for(;na!==H;)da.push(na),na=S,za=xa(),
za!==H?(Ga=A(),Ga!==H?(La=xa(),La!==H?(Qa=C(),Qa!==H?na=za=[za,Ga,La,Qa]:(S=na,na=H)):(S=na,na=H)):(S=na,na=H)):(S=na,na=H);da!==H?Y=fa=db(fa,da):(S=Y,Y=H)}else S=Y,Y=H;return Y}function A(){if(42===f.charCodeAt(S)){var Y=wd;S++}else Y=H,0===ya&&d(xd);Y===H&&(47===f.charCodeAt(S)?(Y=yd,S++):(Y=H,0===ya&&d(zd)));return Y}function C(){var Y=W();if(Y===H){var fa=S;var da=S;var na=O();if(na!==H){var za=U();if(za!==H){var Ga=ba();Ga!==H?da=na=parseFloat(na+za+Ga):(S=da,da=H)}else S=da,da=H}else S=da,da=
H;da===H&&(da=S,na=O(),na!==H?(za=U(),za!==H?da=na=parseFloat(na+za):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=O(),na!==H?(za=ba(),za!==H?da=na=parseFloat(na+za):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=O(),na!==H&&(na=parseFloat(na)),da=na)));var La=da;if(La!==H){var Qa=S;ya++;var Ad=F();ya--;Ad===H?Qa=void 0:(S=Qa,Qa=H);Qa!==H?fa=La={type:"number",value:La}:(S=fa,fa=H)}else S=fa,fa=H;Y=fa;if(Y===H){var Kb=S;var Ab=S;if(f.substr(S,4).toLowerCase()===Bd){var Zb=f.substr(S,4);S+=4}else Zb=H,0===ya&&
d(Cd);if(Zb!==H){var Lb=S;ya++;var Dd=G();ya--;Dd===H?Lb=void 0:(S=Lb,Lb=H);Lb!==H?Ab=Zb=[Zb,Lb]:(S=Ab,Ab=H)}else S=Ab,Ab=H;var xb=Ab;xb!==H&&(xb={type:"bool",value:!0});Kb=xb;if(Kb===H){Kb=S;var Bb=S;if(f.substr(S,5).toLowerCase()===Ed){var $b=f.substr(S,5);S+=5}else $b=H,0===ya&&d(Fd);if($b!==H){var Mb=S;ya++;var Gd=G();ya--;Gd===H?Mb=void 0:(S=Mb,Mb=H);Mb!==H?Bb=$b=[$b,Mb]:(S=Bb,Bb=H)}else S=Bb,Bb=H;xb=Bb;xb!==H&&(xb={type:"bool",value:!1});Kb=xb}Y=Kb;if(Y===H){var Cb=S;if(f.substr(S,4).toLowerCase()===
Hd){var ac=f.substr(S,4);S+=4}else ac=H,0===ya&&d(Id);if(ac!==H){var Nb=S;ya++;var Jd=G();ya--;Jd===H?Nb=void 0:(S=Nb,Nb=H);Nb!==H?Cb=ac=[ac,Nb]:(S=Cb,Cb=H)}else S=Cb,Cb=H;var rc=Cb;rc!==H&&(rc={type:"null",value:null});Y=rc;if(Y===H){var ub=S;var Db=S;if(f.substr(S,4).toLowerCase()===Kd){var sc=f.substr(S,4);S+=4}else sc=H,0===ya&&d(Ld);if(sc!==H){var bc=S;ya++;var Md=G();ya--;Md===H?bc=void 0:(S=bc,bc=H);bc!==H?Db=sc="DATE":(S=Db,Db=H)}else S=Db,Db=H;var Rc=Db;if(Rc!==H){var Nd=xa();if(Nd!==H){var Sc=
T();Sc!==H?ub=Rc={type:"date",value:Sc.value}:(S=ub,ub=H)}else S=ub,ub=H}else S=ub,ub=H;Y=ub;if(Y===H){var vb=S;var Eb=S;if(f.substr(S,9).toLowerCase()===Od){var tc=f.substr(S,9);S+=9}else tc=H,0===ya&&d(Pd);if(tc!==H){var cc=S;ya++;var Qd=G();ya--;Qd===H?cc=void 0:(S=cc,cc=H);cc!==H?Eb=tc="TIMESTAMP":(S=Eb,Eb=H)}else S=Eb,Eb=H;var Tc=Eb;if(Tc!==H){var Rd=xa();if(Rd!==H){var Uc=T();Uc!==H?vb=Tc={type:"timestamp",value:Uc.value}:(S=vb,vb=H)}else S=vb,vb=H}else S=vb,vb=H;Y=vb;if(Y===H){var Wa=S;var Ob=
qa();if(Ob!==H){var uc=xa();if(uc!==H){if(45===f.charCodeAt(S)){var sb=pc;S++}else sb=H,0===ya&&d(qc);sb===H&&(43===f.charCodeAt(S)?(sb=jb,S++):(sb=H,0===ya&&d(oc)));if(sb!==H){var vc=xa();if(vc!==H){var Pb=T();if(Pb!==H){var Sd=xa();if(Sd!==H){var Vc=I();Vc!==H?Wa=Ob={type:"interval",value:Pb,qualifier:Vc,op:sb}:(S=Wa,Wa=H)}else S=Wa,Wa=H}else S=Wa,Wa=H}else S=Wa,Wa=H}else S=Wa,Wa=H}else S=Wa,Wa=H}else S=Wa,Wa=H;Wa===H&&(Wa=S,Ob=qa(),Ob!==H?(uc=xa(),uc!==H?(sb=T(),sb!==H?(vc=xa(),vc!==H?(Pb=I(),
Pb!==H?Wa=Ob={type:"interval",value:sb,qualifier:Pb,op:""}:(S=Wa,Wa=H)):(S=Wa,Wa=H)):(S=Wa,Wa=H)):(S=Wa,Wa=H)):(S=Wa,Wa=H));Y=Wa}}}}}}var Ua=Y;if(Ua===H){var bb=S;var Fb=S;if(f.substr(S,7).toLowerCase()===Td){var wc=f.substr(S,7);S+=7}else wc=H,0===ya&&d(Ud);if(wc!==H){var dc=S;ya++;var Vd=G();ya--;Vd===H?dc=void 0:(S=dc,dc=H);dc!==H?Fb=wc="EXTRACT":(S=Fb,Fb=H)}else S=Fb,Fb=H;var Wc=Fb;if(Wc!==H){var Wd=xa();if(Wd!==H){var Xd=Ja();if(Xd!==H){var Yd=xa();if(Yd!==H){var ob=sa();ob===H&&(ob=ta(),ob===
H&&(ob=va(),ob===H&&(ob=wa(),ob===H&&(ob=Aa(),ob===H&&(ob=Ca())))));var Xc=ob;if(Xc!==H){var Zd=xa();if(Zd!==H){var $d=ia();if($d!==H){var ae=xa();if(ae!==H){var Yc=a();if(Yc!==H){var be=xa();if(be!==H){var ce=Sa();ce!==H?bb=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(S=bb,bb=H)}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H}else S=bb,bb=H;Ua=bb;if(Ua===H){var $a=
S;var Gb=S;if(f.substr(S,9).toLowerCase()===de){var xc=f.substr(S,9);S+=9}else xc=H,0===ya&&d(ee);if(xc!==H){var ec=S;ya++;var fe=G();ya--;fe===H?ec=void 0:(S=ec,ec=H);ec!==H?Gb=xc="SUBSTRING":(S=Gb,Gb=H)}else S=Gb,Gb=H;var Zc=Gb;if(Zc!==H){var ge=xa();if(ge!==H){var he=Ja();if(he!==H){var ie=xa();if(ie!==H){var yc=a();if(yc!==H){var je=xa();if(je!==H){var ke=ia();if(ke!==H){var le=xa();if(le!==H){var zc=a();if(zc!==H){var me=xa();if(me!==H){var kb=S;var Hb=S;if(f.substr(S,3).toLowerCase()===ne){var Ac=
f.substr(S,3);S+=3}else Ac=H,0===ya&&d(oe);if(Ac!==H){var fc=S;ya++;var pe=G();ya--;pe===H?fc=void 0:(S=fc,fc=H);fc!==H?Hb=Ac="FOR":(S=Hb,Hb=H)}else S=Hb,Hb=H;var Qb=Hb;if(Qb!==H){var $c=xa();if($c!==H){var ad=a();if(ad!==H){var bd=xa();bd!==H?kb=Qb=[Qb,$c,ad,bd]:(S=kb,kb=H)}else S=kb,kb=H}else S=kb,kb=H}else S=kb,kb=H;kb===H&&(kb=null);kb!==H?(Qb=Sa(),Qb!==H?$a=Zc={type:"function",name:"substring",args:{type:"expr_list",value:kb?[yc,zc,kb[2]]:[yc,zc]}}:(S=$a,$a=H)):(S=$a,$a=H)}else S=$a,$a=H}else S=
$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H}else S=$a,$a=H;Ua=$a;if(Ua===H){var Oa=S;var Rb=ja();if(Rb!==H){var Bc=xa();if(Bc!==H){var Cc=Ja();if(Cc!==H){var Dc=xa();if(Dc!==H){var pb=L();pb===H&&(pb=null);if(pb!==H){var Ec=xa();if(Ec!==H){var Sb=a();if(Sb!==H){var Fc=xa();if(Fc!==H){var Gc=ia();if(Gc!==H){var qe=xa();if(qe!==H){var cd=a();if(cd!==H){var re=xa();if(re!==H){var se=Sa();se!==H?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",
value:[{type:"string",value:null==pb?"BOTH":pb},Sb,cd]}}:(S=Oa,Oa=H)}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H}else S=Oa,Oa=H;Oa===H&&(Oa=S,Rb=ja(),Rb!==H?(Bc=xa(),Bc!==H?(Cc=Ja(),Cc!==H?(Dc=xa(),Dc!==H?(pb=L(),pb===H&&(pb=null),pb!==H?(Ec=xa(),Ec!==H?(Sb=a(),Sb!==H?(Fc=xa(),Fc!==H?(Gc=Sa(),Gc!==H?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",
value:null==pb?"BOTH":pb},Sb]}}:(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H)):(S=Oa,Oa=H));Ua=Oa;if(Ua===H){var cb=S;var Ib=S;if(f.substr(S,8).toLowerCase()===te){var Hc=f.substr(S,8);S+=8}else Hc=H,0===ya&&d(ue);if(Hc!==H){var gc=S;ya++;var ve=G();ya--;ve===H?gc=void 0:(S=gc,gc=H);gc!==H?Ib=Hc="POSITION":(S=Ib,Ib=H)}else S=Ib,Ib=H;var dd=Ib;if(dd!==H){var we=xa();if(we!==H){var xe=Ja();if(xe!==H){var ye=xa();if(ye!==H){var ed=a();if(ed!==
H){var ze=xa();if(ze!==H){var Ae=M();if(Ae!==H){var Be=xa();if(Be!==H){var fd=a();if(fd!==H){var Ce=xa();if(Ce!==H){var De=Sa();De!==H?cb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(S=cb,cb=H)}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H}else S=cb,cb=H;Ua=cb;if(Ua===H){var hb=S;var Tb;var qb=S;qb=Tb=E();if(qb===H)if(qb=S,96===f.charCodeAt(S)?(Tb=gd,S++):(Tb=H,0===ya&&d(hd)),Tb!==
H){var hc=[];if(id.test(f.charAt(S))){var tb=f.charAt(S);S++}else tb=H,0===ya&&d(jd);if(tb!==H)for(;tb!==H;)hc.push(tb),id.test(f.charAt(S))?(tb=f.charAt(S),S++):(tb=H,0===ya&&d(jd));else hc=H;hc!==H?(96===f.charCodeAt(S)?(tb=gd,S++):(tb=H,0===ya&&d(hd)),tb!==H?qb=Tb=hc.join(""):(S=qb,qb=H)):(S=qb,qb=H)}else S=qb,qb=H;var Ic=qb;if(Ic!==H){var Ee=xa();if(Ee!==H){var Fe=Ja();if(Fe!==H){var Ge=xa();if(Ge!==H){var Ub=b();Ub===H&&(Ub=null);if(Ub!==H){var He=xa();if(He!==H){var Ie=Sa();Ie!==H?hb=Ic={type:"function",
name:Ic,args:Ub?Ub:{type:"expr_list",value:[]}}:(S=hb,hb=H)}else S=hb,hb=H}else S=hb,hb=H}else S=hb,hb=H}else S=hb,hb=H}else S=hb,hb=H}else S=hb,hb=H;Ua=hb;if(Ua===H){var mb;var Ta=S;var Vb=Da();if(Vb!==H){var Jc=xa();if(Jc!==H){var Wb=a();if(Wb!==H){var Kc=xa();if(Kc!==H){var yb=[];for(mb=la();mb!==H;)yb.push(mb),mb=la();if(yb!==H)if(mb=xa(),mb!==H){var ic=Fa();ic!==H?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:null}:(S=Ta,Ta=H)}else S=Ta,Ta=H;else S=Ta,Ta=H}else S=Ta,
Ta=H}else S=Ta,Ta=H}else S=Ta,Ta=H}else S=Ta,Ta=H;if(Ta===H)if(Ta=S,Vb=Da(),Vb!==H)if(Jc=xa(),Jc!==H)if(Wb=a(),Wb!==H)if(Kc=xa(),Kc!==H){yb=[];for(mb=la();mb!==H;)yb.push(mb),mb=la();if(yb!==H)if(mb=xa(),mb!==H)if(ic=ea(),ic!==H){var Je=xa();if(Je!==H){var Ke=Fa();Ke!==H?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:ic.value}:(S=Ta,Ta=H)}else S=Ta,Ta=H}else S=Ta,Ta=H;else S=Ta,Ta=H;else S=Ta,Ta=H}else S=Ta,Ta=H;else S=Ta,Ta=H;else S=Ta,Ta=H;else S=Ta,Ta=H;var Lc=Ta;if(Lc===
H){var nb;var Xa=S;var Xb=Da();if(Xb!==H){var Mc=xa();if(Mc!==H){var zb=[];for(nb=Z();nb!==H;)zb.push(nb),nb=Z();if(zb!==H)if(nb=xa(),nb!==H){var jc=Fa();jc!==H?Xa=Xb={type:"case_expression",format:"searched",clauses:zb,else:null}:(S=Xa,Xa=H)}else S=Xa,Xa=H;else S=Xa,Xa=H}else S=Xa,Xa=H}else S=Xa,Xa=H;if(Xa===H)if(Xa=S,Xb=Da(),Xb!==H)if(Mc=xa(),Mc!==H){zb=[];for(nb=Z();nb!==H;)zb.push(nb),nb=Z();if(zb!==H)if(nb=xa(),nb!==H)if(jc=ea(),jc!==H){var Le=xa();if(Le!==H){var Me=Fa();Me!==H?Xa=Xb={type:"case_expression",
format:"searched",clauses:zb,else:jc.value}:(S=Xa,Xa=H)}else S=Xa,Xa=H}else S=Xa,Xa=H;else S=Xa,Xa=H;else S=Xa,Xa=H}else S=Xa,Xa=H;else S=Xa,Xa=H;Lc=Xa}Ua=Lc;if(Ua===H){var kc;var Jb=S;var kd=F();if(kd!==H){var Nc=[];for(kc=J();kc!==H;)Nc.push(kc),kc=J();Nc!==H?Jb=kd+=Nc.join(""):(S=Jb,Jb=H)}else S=Jb,Jb=H;var lc=Jb;if(lc!==H){var Oc=lc;lc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",
column:Oc}}Ua=lc;if(Ua===H&&(Ua=K(),Ua===H)){Ua=S;var ld=Ja();if(ld!==H){var Ne=xa();if(Ne!==H){var Pc=a();if(Pc!==H){var Oe=xa();if(Oe!==H){var Pe=Sa();Pe!==H?(Pc.paren=!0,Ua=ld=Pc):(S=Ua,Ua=H)}else S=Ua,Ua=H}else S=Ua,Ua=H}else S=Ua,Ua=H}else S=Ua,Ua=H}}}}}}}}return Ua}function E(){var Y;var fa=S;var da=F();if(da!==H){var na=[];for(Y=G();Y!==H;)na.push(Y),Y=G();na!==H?fa=da+=na.join(""):(S=fa,fa=H)}else S=fa,fa=H;return fa}function F(){if(Qe.test(f.charAt(S))){var Y=f.charAt(S);S++}else Y=H,0===
ya&&d(Re);return Y}function G(){if(Se.test(f.charAt(S))){var Y=f.charAt(S);S++}else Y=H,0===ya&&d(Te);return Y}function J(){if(Ue.test(f.charAt(S))){var Y=f.charAt(S);S++}else Y=H,0===ya&&d(Ve);return Y}function K(){var Y=S;if(64===f.charCodeAt(S)){var fa=We;S++}else fa=H,0===ya&&d(Xe);if(fa!==H){var da=E();da!==H?Y=fa=[fa,da]:(S=Y,Y=H)}else S=Y,Y=H;Y!==H&&(Y={type:"param",value:Y[1]});return Y}function L(){var Y=S;if(f.substr(S,7).toLowerCase()===Ye){var fa=f.substr(S,7);S+=7}else fa=H,0===ya&&d(Ze);
if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="LEADING":(S=Y,Y=H)}else S=Y,Y=H;Y===H&&(Y=S,f.substr(S,8).toLowerCase()===$e?(fa=f.substr(S,8),S+=8):(fa=H,0===ya&&d(af)),fa!==H?(fa=S,ya++,da=G(),ya--,da===H?fa=void 0:(S=fa,fa=H),fa!==H?Y="TRAILING":(S=Y,Y=H)):(S=Y,Y=H),Y===H&&(Y=S,f.substr(S,4).toLowerCase()===bf?(fa=f.substr(S,4),S+=4):(fa=H,0===ya&&d(cf)),fa!==H?(fa=S,ya++,da=G(),ya--,da===H?fa=void 0:(S=fa,fa=H),fa!==H?Y="BOTH":(S=Y,Y=H)):(S=Y,Y=H)));return Y}function I(){var Y=
S;var fa=S;var da=N();if(da!==H){var na=xa();if(na!==H)if(na=Ja(),na!==H)if(na=xa(),na!==H)if(na=R(),na!==H){var za=xa();za!==H?(za=Sa(),za!==H?fa=da={type:"interval-period",period:da.value,precision:na,secondary:null}:(S=fa,fa=H)):(S=fa,fa=H)}else S=fa,fa=H;else S=fa,fa=H;else S=fa,fa=H;else S=fa,fa=H}else S=fa,fa=H;fa===H&&(fa=S,da=N(),da!==H&&(da=md(da)),fa=da);if(fa!==H)if(da=xa(),da!==H)if(da=S,f.substr(S,2).toLowerCase()===df?(na=f.substr(S,2),S+=2):(na=H,0===ya&&d(ef)),na!==H?(na=S,ya++,za=
G(),ya--,za===H?na=void 0:(S=na,na=H),na!==H?da="TO":(S=da,da=H)):(S=da,da=H),da!==H)if(da=xa(),da!==H){da=S;na=N();na!==H&&(na={type:"interval-period",period:na.value,precision:null,secondary:null});da=na;if(da===H){da=S;na=Ca();if(na!==H)if(na=xa(),na!==H)if(na=Ja(),na!==H)if(na=xa(),na!==H)if(na=R(),na!==H)if(za=xa(),za!==H)if(za=Ia(),za!==H)if(za=xa(),za!==H)if(za=P(),za!==H){var Ga=xa();Ga!==H?(Ga=Sa(),Ga!==H?da=na=nd(na,za):(S=da,da=H)):(S=da,da=H)}else S=da,da=H;else S=da,da=H;else S=da,da=
H;else S=da,da=H;else S=da,da=H;else S=da,da=H;else S=da,da=H;else S=da,da=H;else S=da,da=H;da===H&&(da=S,na=Ca(),na!==H?(na=xa(),na!==H?(na=Ja(),na!==H?(na=xa(),na!==H?(na=R(),na!==H?(za=xa(),za!==H?(za=Sa(),za!==H?da=na={type:"interval-period",period:"second",precision:na,secondary:null}:(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H)):(S=da,da=H),da===H&&(da=S,na=Ca(),na!==H&&(na={type:"interval-period",period:"second",precision:null,secondary:null}),da=na))}da!==H?
Y=fa={type:"interval-qualifier",start:fa,end:da}:(S=Y,Y=H)}else S=Y,Y=H;else S=Y,Y=H;else S=Y,Y=H;else S=Y,Y=H;Y===H&&(Y=S,da=N(),da!==H?(fa=xa(),fa!==H?(fa=Ja(),fa!==H?(fa=xa(),fa!==H?(fa=P(),fa!==H?(na=xa(),na!==H?(na=Sa(),na!==H?Y=da={type:"interval-period",period:da.value,precision:fa,secondary:null}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H),Y===H&&(Y=S,da=N(),da!==H&&(da=md(da)),Y=da,Y===H&&(Y=S,da=Ca(),da!==H?(fa=xa(),fa!==H?(fa=Ja(),fa!==H?(fa=xa(),fa!==H?
(fa=R(),fa!==H?(na=xa(),na!==H?(na=Ia(),na!==H?(da=xa(),da!==H?(da=P(),da!==H?(na=xa(),na!==H?(na=Sa(),na!==H?Y=da=nd(fa,da):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H),Y===H&&(Y=S,da=Ca(),da!==H?(fa=xa(),fa!==H?(fa=Ja(),fa!==H?(fa=xa(),fa!==H?(fa=P(),fa!==H?(na=xa(),na!==H?(na=Sa(),na!==H?Y=da={type:"interval-period",period:"second",precision:fa,secondary:null}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,
Y=H)):(S=Y,Y=H),Y===H&&(Y=S,da=Ca(),da!==H&&(da={type:"interval-period",period:"second",precision:null,secondary:null}),Y=da)))));return Y}function N(){var Y=S;Y=va();Y!==H&&(Y={type:"string",value:"day"});Y===H&&(Y=S,Y=wa(),Y!==H&&(Y={type:"string",value:"hour"}),Y===H&&(Y=S,Y=Aa(),Y!==H&&(Y={type:"string",value:"minute"}),Y===H&&(Y=S,Y=ta(),Y!==H&&(Y={type:"string",value:"month"}),Y===H&&(Y=S,Y=sa(),Y!==H&&(Y={type:"string",value:"year"})))));return Y}function P(){var Y=ka();Y!==H&&(Y=parseFloat(Y));
return Y}function R(){var Y=ka();Y!==H&&(Y=parseFloat(Y));return Y}function T(){var Y=W();Y===H&&(Y=K());return Y}function W(){var Y=S;if(39===f.charCodeAt(S)){var fa=od;S++}else fa=H,0===ya&&d(pd);fa===H&&(f.substr(S,2)===qd?(fa=qd,S+=2):(fa=H,0===ya&&d(ff)));if(fa!==H){fa=[];var da=S;f.substr(S,2)===mc?(da=mc,S+=2):(da=H,0===ya&&d(rd));da!==H&&(da="'");da===H&&(sd.test(f.charAt(S))?(da=f.charAt(S),S++):(da=H,0===ya&&d(td)));for(;da!==H;)fa.push(da),da=S,f.substr(S,2)===mc?(da=mc,S+=2):(da=H,0===
ya&&d(rd)),da!==H&&(da="'"),da===H&&(sd.test(f.charAt(S))?(da=f.charAt(S),S++):(da=H,0===ya&&d(td)));fa!==H?(39===f.charCodeAt(S)?(da=od,S++):(da=H,0===ya&&d(pd)),da!==H?Y=fa={type:"string",value:fa.join("")}:(S=Y,Y=H)):(S=Y,Y=H)}else S=Y,Y=H;return Y}function Z(){var Y=S;var fa=Ha();if(fa!==H)if(fa=xa(),fa!==H)if(fa=a(),fa!==H){var da=xa();da!==H?(da=Ka(),da!==H?(da=xa(),da!==H?(da=a(),da!==H?Y=fa={type:"when_clause",operand:fa,value:da}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)}else S=Y,Y=H;else S=
Y,Y=H;else S=Y,Y=H;return Y}function la(){var Y=S;var fa=Ha();if(fa!==H)if(fa=xa(),fa!==H)if(fa=a(),fa!==H){var da=xa();da!==H?(da=Ka(),da!==H?(da=xa(),da!==H?(da=a(),da!==H?Y=fa={type:"when_clause",operand:fa,value:da}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H)}else S=Y,Y=H;else S=Y,Y=H;else S=Y,Y=H;return Y}function ea(){var Y=S;var fa=S;if(f.substr(S,4).toLowerCase()===gf){var da=f.substr(S,4);S+=4}else da=H,0===ya&&d(hf);if(da!==H){da=S;ya++;var na=G();ya--;na===H?da=void 0:(S=da,da=H);da!==H?
fa="ELSE":(S=fa,fa=H)}else S=fa,fa=H;fa!==H?(fa=xa(),fa!==H?(fa=a(),fa!==H?Y={type:"else_clause",value:fa}:(S=Y,Y=H)):(S=Y,Y=H)):(S=Y,Y=H);return Y}function O(){var Y=ka();if(Y===H){Y=S;if(45===f.charCodeAt(S)){var fa=pc;S++}else fa=H,0===ya&&d(qc);fa===H&&(43===f.charCodeAt(S)?(fa=jb,S++):(fa=H,0===ya&&d(oc)));if(fa!==H){var da=ka();da!==H?Y=fa=fa[0]+da:(S=Y,Y=H)}else S=Y,Y=H}return Y}function U(){var Y=S;if(46===f.charCodeAt(S)){var fa=jf;S++}else fa=H,0===ya&&d(kf);fa!==H?(fa=ka(),fa===H&&(fa=
null),fa!==H?Y="."+(null!=fa?fa:""):(S=Y,Y=H)):(S=Y,Y=H);return Y}function ba(){var Y;var fa=Y=S;if(lf.test(f.charAt(S))){var da=f.charAt(S);S++}else da=H,0===ya&&d(mf);da!==H?(nf.test(f.charAt(S))?(da=f.charAt(S),S++):(da=H,0===ya&&d(of)),da===H&&(da=null),da!==H?fa="e"+(null===da?"":da):(S=fa,fa=H)):(S=fa,fa=H);fa!==H?(da=ka(),da!==H?Y=fa+da:(S=Y,Y=H)):(S=Y,Y=H);return Y}function ka(){var Y=[];var fa=oa();if(fa!==H)for(;fa!==H;)Y.push(fa),fa=oa();else Y=H;Y!==H&&(Y=Y.join(""));return Y}function oa(){if(pf.test(f.charAt(S))){var Y=
f.charAt(S);S++}else Y=H,0===ya&&d(qf);return Y}function M(){var Y=S;if(f.substr(S,2).toLowerCase()===rf){var fa=f.substr(S,2);S+=2}else fa=H,0===ya&&d(sf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="IN":(S=Y,Y=H)}else S=Y,Y=H;return Y}function V(){var Y=S;if(f.substr(S,2).toLowerCase()===tf){var fa=f.substr(S,2);S+=2}else fa=H,0===ya&&d(uf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="IS":(S=Y,Y=H)}else S=Y,Y=H;return Y}function ha(){var Y=
S;if(f.substr(S,4).toLowerCase()===vf){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(wf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="LIKE":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Q(){var Y=S;if(f.substr(S,3).toLowerCase()===xf){var fa=f.substr(S,3);S+=3}else fa=H,0===ya&&d(yf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="NOT":(S=Y,Y=H)}else S=Y,Y=H;return Y}function X(){var Y=S;if(f.substr(S,3).toLowerCase()===zf){var fa=f.substr(S,3);
S+=3}else fa=H,0===ya&&d(Af);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="AND":(S=Y,Y=H)}else S=Y,Y=H;return Y}function aa(){var Y=S;if(f.substr(S,2).toLowerCase()===Bf){var fa=f.substr(S,2);S+=2}else fa=H,0===ya&&d(Cf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="OR":(S=Y,Y=H)}else S=Y,Y=H;return Y}function ca(){var Y=S;if(f.substr(S,7).toLowerCase()===Df){var fa=f.substr(S,7);S+=7}else fa=H,0===ya&&d(Ef);if(fa!==H){fa=S;ya++;var da=G();
ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="BETWEEN":(S=Y,Y=H)}else S=Y,Y=H;return Y}function ia(){var Y=S;if(f.substr(S,4).toLowerCase()===Ff){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(Gf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="FROM":(S=Y,Y=H)}else S=Y,Y=H;return Y}function ja(){var Y=S;if(f.substr(S,4).toLowerCase()===Hf){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(If);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="TRIM":(S=
Y,Y=H)}else S=Y,Y=H;return Y}function qa(){var Y=S;if(f.substr(S,8).toLowerCase()===Jf){var fa=f.substr(S,8);S+=8}else fa=H,0===ya&&d(Kf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="INTERVAL":(S=Y,Y=H)}else S=Y,Y=H;return Y}function sa(){var Y=S;if(f.substr(S,4).toLowerCase()===Lf){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(Mf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="YEAR":(S=Y,Y=H)}else S=Y,Y=H;return Y}function ta(){var Y=S;
if(f.substr(S,5).toLowerCase()===Nf){var fa=f.substr(S,5);S+=5}else fa=H,0===ya&&d(Of);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="MONTH":(S=Y,Y=H)}else S=Y,Y=H;return Y}function va(){var Y=S;if(f.substr(S,3).toLowerCase()===Pf){var fa=f.substr(S,3);S+=3}else fa=H,0===ya&&d(Qf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="DAY":(S=Y,Y=H)}else S=Y,Y=H;return Y}function wa(){var Y=S;if(f.substr(S,4).toLowerCase()===Rf){var fa=f.substr(S,
4);S+=4}else fa=H,0===ya&&d(Sf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="HOUR":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Aa(){var Y=S;if(f.substr(S,6).toLowerCase()===Tf){var fa=f.substr(S,6);S+=6}else fa=H,0===ya&&d(Uf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="MINUTE":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Ca(){var Y=S;if(f.substr(S,6).toLowerCase()===Vf){var fa=f.substr(S,6);S+=6}else fa=H,0===ya&&d(Wf);if(fa!==H){fa=S;ya++;
var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="SECOND":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Da(){var Y=S;if(f.substr(S,4).toLowerCase()===Xf){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(Yf);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="CASE":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Fa(){var Y=S;if(f.substr(S,3).toLowerCase()===Zf){var fa=f.substr(S,3);S+=3}else fa=H,0===ya&&d($f);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y=
"END":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Ha(){var Y=S;if(f.substr(S,4).toLowerCase()===ag){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(bg);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="WHEN":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Ka(){var Y=S;if(f.substr(S,4).toLowerCase()===cg){var fa=f.substr(S,4);S+=4}else fa=H,0===ya&&d(dg);if(fa!==H){fa=S;ya++;var da=G();ya--;da===H?fa=void 0:(S=fa,fa=H);fa!==H?Y="THEN":(S=Y,Y=H)}else S=Y,Y=H;return Y}function Ia(){if(44===
f.charCodeAt(S)){var Y=eg;S++}else Y=H,0===ya&&d(fg);return Y}function Ja(){if(40===f.charCodeAt(S)){var Y=gg;S++}else Y=H,0===ya&&d(hg);return Y}function Sa(){if(41===f.charCodeAt(S)){var Y=ig;S++}else Y=H,0===ya&&d(jg);return Y}function xa(){var Y;var fa=[];for(Y=fb();Y!==H;)fa.push(Y),Y=fb();return fa}function fb(){if(kg.test(f.charAt(S))){var Y=f.charAt(S);S++}else Y=H,0===ya&&d(lg);return Y}function eb(Y,fa,da,na){Y={type:"binary_expr",operator:Y,left:fa,right:da};void 0!==na&&(Y.escape=na);
return Y}function db(Y,fa){for(var da=0;da<fa.length;da++)Y=eb(fa[da][1],Y,fa[da][3]);return Y}k=void 0!==k?k:{};var H={},ab={start:g},Ma=g,ib="!",lb=m("!",!1),Ra="\x3d",wb=m("\x3d",!1),ma="\x3e\x3d",pa=m("\x3e\x3d",!1),ra="\x3e",ua=m("\x3e",!1),Ba="\x3c\x3d",Ea=m("\x3c\x3d",!1),Na="\x3c\x3e",Pa=m("\x3c\x3e",!1),Za="\x3c",Ya=m("\x3c",!1),Va="!\x3d",gb=m("!\x3d",!1),jb="+",oc=m("+",!1),pc="-",qc=m("-",!1),wd="*",xd=m("*",!1),yd="/",zd=m("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=c([["A","Z"],["a","z"],
"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=c([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=c([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=m("@",!1),md=function(Y){return{type:"interval-period",period:Y.value,precision:null,secondary:null}},nd=function(Y,fa){return{type:"interval-period",period:"second",precision:Y,secondary:fa}},od="'",pd=m("'",!1),qd="N'",ff=m("N'",!1),mc="''",rd=m("''",!1),sd=/^[^']/,td=c(["'"],!0,!1),jf=
".",kf=m(".",!1),pf=/^[0-9]/,qf=c([["0","9"]],!1,!1),lf=/^[eE]/,mf=c(["e","E"],!1,!1),nf=/^[+\-]/,of=c(["+","-"],!1,!1),Hd="null",Id=m("NULL",!0),Bd="true",Cd=m("TRUE",!0),Ed="false",Fd=m("FALSE",!0),rf="in",sf=m("IN",!0),tf="is",uf=m("IS",!0),vf="like",wf=m("LIKE",!0),ud="escape",vd=m("ESCAPE",!0),xf="not",yf=m("NOT",!0),zf="and",Af=m("AND",!0),Bf="or",Cf=m("OR",!0),Df="between",Ef=m("BETWEEN",!0),Ff="from",Gf=m("FROM",!0),ne="for",oe=m("FOR",!0),de="substring",ee=m("SUBSTRING",!0),Td="extract",
Ud=m("EXTRACT",!0),Hf="trim",If=m("TRIM",!0),te="position",ue=m("POSITION",!0),Od="timestamp",Pd=m("TIMESTAMP",!0),Kd="date",Ld=m("DATE",!0),Ye="leading",Ze=m("LEADING",!0),$e="trailing",af=m("TRAILING",!0),bf="both",cf=m("BOTH",!0),df="to",ef=m("TO",!0),Jf="interval",Kf=m("INTERVAL",!0),Lf="year",Mf=m("YEAR",!0),Nf="month",Of=m("MONTH",!0),Pf="day",Qf=m("DAY",!0),Rf="hour",Sf=m("HOUR",!0),Tf="minute",Uf=m("MINUTE",!0),Vf="second",Wf=m("SECOND",!0),Xf="case",Yf=m("CASE",!0),Zf="end",$f=m("END",!0),
ag="when",bg=m("WHEN",!0),cg="then",dg=m("THEN",!0),gf="else",hf=m("ELSE",!0),eg=",",fg=m(",",!1),gg="(",hg=m("(",!1),ig=")",jg=m(")",!1),kg=/^[ \t\n\r]/,lg=c([" ","\t","\n","\r"],!1,!1),gd="`",hd=m("`",!1),id=/^[^`]/,jd=c(["`"],!0,!1),S=0,Yb=[{line:1,column:1}],rb=0,nc=[],ya=0;if("startRule"in k){if(!(k.startRule in ab))throw Error("Can't start parsing from rule \""+k.startRule+'".');Ma=ab[k.startRule]}var Qc=Ma();if(Qc!==H&&S===f.length)return Qc;Qc!==H&&S<f.length&&d({type:"end"});throw function(Y,
fa,da){return new w(w.buildMessage(Y,fa),Y,fa,da)}(nc,rb<f.length?f.charAt(rb):null,rb<f.length?q(rb,rb+1):q(rb,rb));}}})});let z=function(){function y(){}y.parse=function(w){return p.parse(w)};return y}();n.WhereGrammar=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/spatialQuerySupport":function(){define("require exports ../core/maybe ../core/jsonMap ../core/Error ../core/promiseUtils ../geometry/support/spatialReferenceUtils ../geometry/support/contains ../geometry/support/intersects ../geometry/support/extentUtils ../geometry/support/jsonUtils ../core/unitUtils ../geometry/support/normalizeUtils ../layers/graphics/OptimizedGeometry ../layers/graphics/featureConversionUtils ../layers/graphics/centroid ../layers/graphics/data/projectionSupport ../layers/graphics/contains".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){function t(R,T,W,Z=R.hasZ,la=R.hasM){const ea=R.hasZ&&Z,O=R.hasM&&la;return W?(R=b.quantizeOptimizedGeometry(G,T,R.hasZ,R.hasM,"esriGeometryPoint",W,Z,la),b.convertToPoint(R,ea,O)):b.convertToPoint(T,ea,O)}function v(R,T,W,Z,la,ea,O=T,U=W){const ba=T&&O,ka=W&&U;Z=Z?"coords"in Z?Z:Z.geometry:null;if(!Z)return null;if(la)return T=b.generalizeOptimizedGeometry(F,Z,T,W,R,la,O,U),ea&&(T=b.quantizeOptimizedGeometry(G,T,ba,ka,R,ea)),J[R](T,ba,ka);if(ea)return ea=
b.quantizeOptimizedGeometry(G,Z,T,W,R,ea,O,U),J[R](ea,ba,ka);b.removeZMValues(E,Z,T,W,O,U);return J[R](E,ba,ka)}async function x(R,T,W){if(!R)return null;var {where:Z}=R;R.where=Z=Z&&Z.trim();if(!Z||/^1 *= *1$/.test(Z)||T&&T===Z)R.where=null;if(!R.geometry)return R;T=await u(R);R.distance=0;R.units=null;"esriSpatialRelEnvelopeIntersects"===R.spatialRel&&({spatialReference:Z}=R.geometry,T=c.getGeometryExtent(T),T.spatialReference=Z);R.geometry=T;await h.checkProjectionSupport(T.spatialReference,W);
T=(await d.normalizeCentralMeridian(e.fromJSON(T)))[0];if(p.isNone(T))throw C;T=T.toJSON();T=await h.project(T,T.spatialReference,W);if(!T)throw C;T.spatialReference=W;R.geometry=T;return R}async function u(R){const {geometry:T,distance:W,units:Z}=R;if(null==W||"vertexAttributes"in T)return T;var la=T.spatialReference;R=Z?A.fromJSON(Z):q.getUnitString(la);la=la&&(f.isGeographic(la)||f.isWebMercator(la))?T:await h.checkProjectionSupport(la,f.WGS84).then(()=>h.project(T,f.WGS84));return(await B())(la.spatialReference,
la,W,R)}function D(){return new Promise(function(R,T){n(["../geometry/geometryEngineJSON"],R,T)})}function B(){return D().then(R=>R.geodesicBuffer)}const A=new z.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),C=Object.freeze({}),E=new g,F=new g,G=new g,J={esriGeometryPoint:b.convertToPoint,esriGeometryPolyline:b.convertToPolyline,esriGeometryPolygon:b.convertToPolygon,
esriGeometryMultipoint:b.convertToMultipoint},K=(R,T)=>"_geVersion"!==R?T:void 0,L={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var I={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,
esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},N={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},P={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};l.QUERY_ENGINE_EMPTY_RESULT=C;l.canQueryWithRBush=function(R){if(e.isExtent(R))return!0;
if(e.isPolygon(R)){for(const T of R.rings)if(5!==T.length||T[0][0]!==T[1][0]||T[0][0]!==T[4][0]||T[2][0]!==T[3][0]||T[0][1]!==T[3][1]||T[0][1]!==T[4][1]||T[1][1]!==T[2][1])return!1;return!0}return!1};l.checkSpatialQuerySupport=async function(R,T,W){const {spatialRel:Z,geometry:la}=R;if(la){if(!0!==I[Z])throw new y("feature-store:unsupported-query","Unsupported query spatial relationship",{query:R});if(f.isValid(la.spatialReference)&&f.isValid(W)){if(!0!==N[e.getJsonType(la)])throw new y("feature-store:unsupported-query",
"Unsupported query geometry type",{query:R});if(!0!==P[T])throw new y("feature-store:unsupported-query","Unsupported layer geometry type",{query:R});if(R.outSR)return h.checkProjectionSupport(R.geometry&&R.geometry.spatialReference,R.outSR)}}};l.cleanFromGeometryEngine=function(R){return R&&"_geVersion"in R?JSON.parse(JSON.stringify(R,K)):R};l.getCentroid=function(R,T,W){if("esriGeometryPolygon"!==R.geometryType||!T||!T.centroid&&!T.geometry)return null;T.centroid||(T.centroid=a.getCentroidOptimizedGeometry(new g,
T.geometry,R.hasZ,R.hasM));return t(R,T.centroid,W)};l.getGeodesicBufferOperator=B;l.getGeometry=v;l.getSpatialQueryOperator=function(R,T,W,Z,la){if(e.isPolygon(T)&&"esriGeometryPoint"===W&&("esriSpatialRelIntersects"===R||"esriSpatialRelContains"===R)){const ea=b.convertFromPolygon(new g,T,!1,!1);return w.resolve(O=>r.polygonContainsPoint(ea,!1,!1,O))}if(e.isPolygon(T)&&"esriGeometryMultipoint"===W){const ea=b.convertFromPolygon(new g,T,!1,!1);if("esriSpatialRelContains"===R)return w.resolve(O=>
r.polygonContainsMultipoint(ea,!1,!1,O,Z,la))}if(e.isExtent(T)&&"esriGeometryPoint"===W&&("esriSpatialRelIntersects"===R||"esriSpatialRelContains"===R))return w.resolve(ea=>k.extentContainsPoint(T,v(W,Z,la,ea)));if(e.isExtent(T)&&"esriGeometryMultipoint"===W&&"esriSpatialRelContains"===R)return w.resolve(ea=>k.extentContainsMultipoint(T,v(W,Z,la,ea)));if(e.isExtent(T)&&"esriSpatialRelIntersects"===R){const ea=m.getExtentIntersector(W);return w.resolve(O=>ea(T,v(W,Z,la,O)))}return D().then(ea=>{const O=
ea[L[R]].bind(null,T.spatialReference,T);return U=>O(v(W,Z,la,U))})};l.importGeometryEngine=D;l.normalizeFilter=async function(R,T,W){return x(R,T,W)};l.normalizeQuery=async function(R,T,W){const {outFields:Z,orderByFields:la,groupByFieldsForStatistics:ea,outStatistics:O}=R;if(Z)for(var U=0;U<Z.length;U++)Z[U]=Z[U].trim();if(la)for(U=0;U<la.length;U++)la[U]=la[U].trim();if(ea)for(U=0;U<ea.length;U++)ea[U]=ea[U].trim();if(O)for(U=0;U<O.length;U++)O[U].onStatisticField&&(O[U].onStatisticField=O[U].onStatisticField.trim());
R.geometry&&!R.outSR&&(R.outSR=R.geometry.spatialReference);return x(R,T,W)};l.normalizeQueryLike=x;l.transformCentroid=t})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ../../core/promiseUtils ./spatialReferenceUtils ../SpatialReference ./webMercatorUtils ../Polygon ../Polyline ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){function g(A){return"polygon"===
A.type?A.rings:A.paths}function b(A,C){return Math.ceil((A-C)/(2*C))}function a(A,C){const E=g(A);for(const F of E)for(const G of F)G[0]+=C;return A}function h(A){const C=[];let E=0,F=0;for(let G=0;G<A.length;G++){const J=A[G];let K=null;for(let L=0;L<J.length;L++)K=J[L],C.push(K),0===L?F=E=K[0]:(E=Math.min(E,K[0]),F=Math.max(F,K[0]));K&&C.push([(E+F)/2,0])}return C}function r(A,C){if(!(A instanceof e||A instanceof c))throw D.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
new y("straightLineDensify: the input geometry is neither polyline nor polygon");var E=g(A);const F=[];for(const J of E){E=[];F.push(E);E.push([J[0][0],J[0][1]]);for(let K=0;K<J.length-1;K++){const L=J[K][0],I=J[K][1],N=J[K+1][0],P=J[K+1][1];var G=Math.sqrt((N-L)*(N-L)+(P-I)*(P-I));const R=(P-I)/G,T=(N-L)/G,W=G/C;if(1<W){for(let Z=1;Z<=W-1;Z++){const la=Z*C;E.push([T*la+L,R*la+I])}G=(G+Math.floor(W-1)*C)/2;E.push([T*G+L,R*G+I])}E.push([N,P])}}return"polygon"===A.type?new c({rings:F,spatialReference:A.spatialReference}):
new e({paths:F,spatialReference:A.spatialReference})}function t(A,C,E){C&&(A=r(A,1E6),A=m.webMercatorToGeographic(A,!0));E&&(A=a(A,E));return A}function v(A,C,E){if(Array.isArray(A)){var F=A[0];F>C?(E=b(F,C),A[0]=F+-2*E*C):F<E&&(C=b(F,E),A[0]=F+-2*C*E)}else F=A.x,F>C?(E=b(F,C),A=A.clone().offset(-2*E*C,0)):F<E&&(C=b(F,E),A=A.clone().offset(-2*C*E,0));return A}function x(A,C){let E=-1;for(let F=0;F<C.cutIndexes.length;F++){const G=C.cutIndexes[F],J=C.geometries[F],K=g(J);for(let L=0;L<K.length;L++){const I=
K[L];I.some(N=>{if(180>N[0])return!0;N=0;for(var P=0;P<I.length;P++){var R=I[P][0];N=R>N?R:N}N=Number(N.toFixed(9));N=-360*b(N,180);for(P=0;P<I.length;P++)R=J.getPoint(L,P),J.setPoint(L,P,R.clone().offset(N,0));return!0})}if(G===E)if("polygon"===A[0].type)for(const L of g(J))A[G]=A[G].addRing(L);else{if("polyline"===A[0].type)for(const L of g(J))A[G]=A[G].addPath(L)}else E=G,A[G]=J}return A}async function u(A,C,E){if(!Array.isArray(A))return u([A],C);var F=C?C.url:l.geometryServiceUrl;let G,J,K;let L=
0;var I=[];C=[];for(var N of A)if(p.isNone(N))C.push(N);else{if(!P){var P=N.spatialReference;var R=f.getInfo(P);var T=(G=P.isWebMercator)?102100:4326;J=B[T].maxX;K=B[T].minX;var W=B[T].plus180Line;T=B[T].minus180Line}if(R)if("mesh"===N.type)C.push(N);else if("point"===N.type)C.push(v(N.clone(),J,K));else if("multipoint"===N.type){var Z=N.clone();Z.points=Z.points.map(la=>v(la,J,K));C.push(Z)}else if("extent"===N.type)Z=N.clone()._normalize(!1,!1,R),C.push(Z.rings?new c(Z):Z);else if(N.extent){Z=N.extent;
const la=2*b(Z.xmin,K)*J;let ea=0===la?N.clone():a(N.clone(),la);Z.offset(la,0);Z.intersects(W)&&Z.xmax!==J?(L=Z.xmax>L?Z.xmax:L,ea=t(ea,G),I.push(ea),C.push("cut")):Z.intersects(T)&&Z.xmin!==K?(L=2*Z.xmax*J>L?2*Z.xmax*J:L,ea=t(ea,G,360),I.push(ea),C.push("cut")):C.push(ea)}else C.push(N.clone());else C.push(N)}P=b(L,J);R=-90;W=P;for(N=new e;0<P;)T=-180+360*P,N.addPath([[T,R],[T,-1*R]]),R*=-1,P--;if(0<I.length&&0<W){P=await q.cut(F,I,N,E);P=x(I,P);R=[];I=[];for(W=0;W<C.length;W++)N=C[W],"cut"!==N?
I.push(N):(N=P.shift(),T=A[W],p.isSome(T)&&"polygon"===T.type&&T.rings&&1<T.rings.length&&N.rings.length>=T.rings.length?(R.push(N),I.push("simplify")):I.push(G?m.geographicToWebMercator(N):N));if(!R.length)return I;C=await d.simplify(F,R,E);A=[];for(E=0;E<I.length;E++)F=I[E],"simplify"!==F?A.push(F):A.push(G?m.geographicToWebMercator(C.shift()):C.shift());return A}A=[];for(E=0;E<C.length;E++)F=C[E],"cut"!==F?A.push(F):(F=I.shift(),A.push(!0===G?m.geographicToWebMercator(F):F));return w.resolve(A)}
const D=z.getLogger("esri.geometry.support.normalizeUtils"),B={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],
spatialReference:k.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:k.WGS84})}};n.getDenormalizedExtent=function(A){if(!A)return null;const C=A.extent;if(!C)return null;var E=A.spatialReference&&f.getInfo(A.spatialReference);if(!E)return C;const [F,G]=E.valid;({width:E}=C);let {xmin:J,xmax:K}=C;[J,K]=[K,J];if("extent"===A.type||0===E||E<=G||E>2*G||J<F||K>G)return C;let L;switch(A.type){case "polygon":if(1<A.rings.length)L=h(A.rings);else return C;break;case "polyline":if(1<
A.paths.length)L=h(A.paths);else return C;break;case "multipoint":L=A.points}A=C.clone();for(let I=0;I<L.length;I++){let N=L[I][0];0>N?(N+=G,K=Math.max(N,K)):(N-=G,J=Math.min(N,J))}A.xmin=J;A.xmax=K;return A.width<E?(A.xmin-=G,A.xmax-=G,A):C};n.normalizeCentralMeridian=u;n.normalizeMapX=function(A,C){if(C=f.getInfo(C)){const [E,F]=C.valid;C=F-E;if(A<E)for(;A<E;)A+=C;if(A>F)for(;A>F;)A-=C}return A};n.straightLineDensify=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports",
"../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(n,l,p,z,y){n.cut=async function(w,f,k,m){w="string"===typeof w?l.urlToObject(w):w;const c=f[0].spatialReference;f={...m,query:{...w.query,f:"json",sr:JSON.stringify(c),target:JSON.stringify({geometryType:p.getJsonType(f[0]),geometries:f}),cutter:JSON.stringify(k)}};f=await y(w.path+"/cut",f);const {cutIndexes:e,geometries:q=[]}=f.data;return{cutIndexes:e,geometries:q.map(d=>{d=p.fromJSON(d);d.spatialReference=
c;return d})}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(n,l,p,z){function y(f){return{geometryType:p.getJsonType(f[0]),geometries:f.map(k=>k.toJSON())}}function w(f,k,m){const c=p.getGeometryType(k);return f.map(e=>{e=c.fromJSON(e);e.spatialReference=m;return e})}n.simplify=async function(f,k,m){const c="string"===typeof f?l.urlToObject(f):f;f=k[0].spatialReference;
const e=p.getJsonType(k[0]);k={...m,query:{...c.query,f:"json",sr:f.wkid?f.wkid:JSON.stringify(f),geometries:JSON.stringify(y(k))}};k=await z(c.path+"/simplify",k);return w(k.data,e,f)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(n){function l(p,z,y,w,f){if(!p)return!1;z=z?y?4:3:y?3:2;const {coords:k,lengths:m}=p;y=!1;p=0;for(const e of m){var c=p;for(let q=p,d=p+e*z;q<d;q+=z){c=q+z;c===d&&(c=p);const g=k[q],b=k[q+1],a=
k[c];c=k[c+1];(b<f&&c>=f||c<f&&b>=f)&&g+(f-b)/(c-b)*(a-g)<w&&(y=!y)}p+=e*z}return y}n.polygonContainsCoords=l;n.polygonContainsMultipoint=function(p,z,y,w,f,k){f=f?k?4:3:k?3:2;const {coords:m,lengths:c}=w;if(!c)return!1;for(let e=0,q=0;e<c.length;e++,q+=f)if(!l(p,z,y,m[q],m[q+1]))return!1;return!0};n.polygonContainsPoint=function(p,z,y,w){return l(p,z,y,w.coords[0],w.coords[1])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],
function(n){function l(y,w,f,k,m){if(null!=k&&null!=m)return c=>{const e=y.getAttribute(c,w);c=y.getAttribute(c,f);return(null==e||e<=m)&&(null==c||c>=k)};if(null!=k)return c=>{c=y.getAttribute(c,f);return null==c||c>=k};if(null!=m)return c=>{c=y.getAttribute(c,w);return null==c||c<=m}}function p(y,w,f,k){if(null!=f&&null!=k&&f===k)return m=>y.getAttribute(m,w)===f;if(null!=f&&null!=k)return m=>{m=y.getAttribute(m,w);return m>=f&&m<=k};if(null!=f)return m=>y.getAttribute(m,w)>=f;if(null!=k)return m=>
y.getAttribute(m,w)<=k}function z(){return()=>!1}n.getTimeExtent=function(y,w){if(!y)return null;const f=w.featureAdapter,{startTimeField:k,endTimeField:m}=y;let c=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY;if(k&&m)w.forEach(q=>{const d=f.getAttribute(q,k);q=f.getAttribute(q,m);null==d||isNaN(d)||(c=Math.min(c,d));null==q||isNaN(q)||(e=Math.max(e,q))});else{const q=k||m;w.forEach(d=>{d=f.getAttribute(d,q);null==d||isNaN(d)||(c=Math.min(c,d),e=Math.max(e,d))})}return{start:c,end:e}};n.getTimeOperator=
function(y,w,f){if(!w||!y)return null;const {startTimeField:k,endTimeField:m}=y;if(!k&&!m)return null;const {start:c,end:e}=w;return null===c&&null===e?null:void 0===c&&void 0===e?z():k&&m?l(f,k,m,c,e):p(f,k||m,c,e)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./projectionSupport ../../../geometry/support/quantizationUtils ./attributeSupport ./AttributesBuilder ../../../chunks/spatialQuerySupport ./timeSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){function q(g){return g.substr(24,12)+g.substr(19,4)+g.substr(16,2)+g.substr(14,2)+g.substr(11,2)+g.substr(9,2)+g.substr(6,2)+g.substr(4,2)+g.substr(2,2)+g.substr(0,2)}function d(g,b,a,h){if(a&&"esriFieldTypeDate"===a.type){const r=(new Date(g)).getTime(),t=(new Date(b)).getTime();if(!isNaN(r)&&!isNaN(t))return h?t-r:r-t}return"number"===typeof g&&"number"===typeof b?h?b-g:g-b:"string"===typeof g&&"string"===typeof b?(g=g.toUpperCase(),b=b.toUpperCase(),!a||"esriFieldTypeGUID"!==
a.type&&"esriFieldTypeGlobalID"!==a.type?h=(h?g>b:g<b)?-1:(h?g<b:g>b)?1:0:(a=q(g),b=q(b),h=(h?a>b:a<b)?-1:(h?a<b:a>b)?1:0),h):h?1:-1}return function(){function g(a,h,r){this.items=a;this.queryGeometry=h;this.definitionExpression=r.definitionExpression;this.geometryType=r.geometryType;this.hasM=r.hasM;this.hasZ=r.hasZ;this.objectIdField=r.objectIdField;this.spatialReference=r.spatialReference;this.fieldsIndex=r.fieldsIndex;this.timeInfo=r.timeInfo;this.featureAdapter=r.featureAdapter;this.aggregateAdapter=
r.aggregateAdapter}var b=g.prototype;b.createQueryResponseForCount=function(a){const h=new m(a,this.featureAdapter,this.fieldsIndex);if(!a.outStatistics)return h.countDistinctValues(this.items);const {groupByFieldsForStatistics:r,having:t}=a;if(null==r||!r.length)return 1;const v=new Map,x=new Map,u=new Set;a=a.outStatistics;for(const B of a){({statisticType:a}=B);a="exceedslimit"!==a?B.onStatisticField:void 0;if(!x.has(a)){var D=[];for(const A of r){const C=this._getAttributeValues(h,A,v);D.push(C)}x.set(a,
this._calculateUniqueValues(D))}a=x.get(a);for(const A in a){const {data:C,items:E}=a[A];D=C.join(",");t&&!h.validateItems(E,t)||u.add(D)}}return u.size};b.createQueryResponse=function(a){let h;h=a.outStatistics?a.outStatistics.some(r=>"exceedslimit"===r.statisticType)?this._createExceedsLimitQueryResponse(a):this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a);a.returnQueryGeometry&&(z.isValid(a.outSR)&&!z.equals(this.queryGeometry.spatialReference,a.outSR)?h.queryGeometry=
c.cleanFromGeometryEngine({spatialReference:a.outSR,...w.project(this.queryGeometry,this.queryGeometry.spatialReference,a.outSR)}):h.queryGeometry=c.cleanFromGeometryEngine({spatialReference:a.outSR,...this.queryGeometry}));return h};b.executeAttributesQuery=function(a){var h=k.getWhereClause(a.where,this.fieldsIndex);if(!h)return p.resolve(this);if(h.isStandardized){let r=0;const t=[];for(const v of this.items)h.testFeature(v,this.featureAdapter)&&(t[r++]=v);h=new g(t,this.queryGeometry,this);h.definitionExpression=
a.where;return p.resolve(h)}return p.reject(new TypeError("Where clause is not standardized"))};b.executeAggregateIdsQuery=function(a){if(!a.aggregateIds||!a.aggregateIds.length||l.isNone(this.aggregateAdapter))return p.resolve(this);const h=new Set;for(const t of a.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(t).forEach(v=>h.add(v));const r=this.featureAdapter.getObjectId;return p.resolve(new g(this.items.filter(t=>h.has(r(t))),this.queryGeometry,this))};b.executeObjectIdsQuery=function(a){if(!a.objectIds||
!a.objectIds.length)return p.resolve(this);const h=new Set(a.objectIds),r=this.featureAdapter.getObjectId;return p.resolve(new g(this.items.filter(t=>h.has(r(t))),this.queryGeometry,this))};b.executeTimeQuery=function(a){a=e.getTimeOperator(this.timeInfo,a.timeExtent,this.featureAdapter);if(!l.isSome(a))return p.resolve(this);a=this.items.filter(a);return p.resolve(new g(a,this.queryGeometry,this))};b.filterLatest=function(){const {trackIdField:a,startTimeField:h,endTimeField:r}=this.timeInfo;var t=
r||h;const v=new Map,x=this.featureAdapter.getAttribute;for(const u of this.items){const D=x(u,a),B=x(u,t),A=v.get(D);(!A||B>x(A,t))&&v.set(D,u)}t=Array.from(v.values());return p.resolve(new g(t,this.queryGeometry,this))};b.project=async function(a){if(!a||z.equals(this.spatialReference,a))return this;const h=this.featureAdapter,r=(await w.projectMany(this.items.map(t=>c.getGeometry(this.geometryType,this.hasZ,this.hasM,h.getGeometry(t))),this.spatialReference,a)).map((t,v)=>h.cloneWithGeometry(this.items[v],
y.convertFromGeometry(t,this.hasZ,this.hasM)));return new g(r,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:a,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};b._sortFeatures=function(a,h,r){if(1<a.length&&h&&h.length)for(const t of h.reverse()){h=t.split(" ");const v=h[0],x=this.fieldsIndex.get(v),u=h[1]&&"desc"===h[1].toLowerCase();
a.sort((D,B)=>{D=r(D,v,x);B=r(B,v,x);return d(D,B,x,u)})}};b._createFeatureQueryResponse=function(a){const h=this.items,{geometryType:r,hasM:t,hasZ:v,objectIdField:x,spatialReference:u}=this,{outFields:D,outSR:B,quantizationParameters:A,resultRecordCount:C,resultOffset:E,returnZ:F,returnM:G}=a,J=null!=C?h.length>(E||0)+C:!1,K=D&&(-1<D.indexOf("*")?[...this.fieldsIndex.fields]:D.map(L=>this.fieldsIndex.get(L)));return{exceededTransferLimit:J,features:this._createFeatures(a,h),fields:K,geometryType:r,
hasM:t&&G,hasZ:v&&F,objectIdFieldName:x,spatialReference:c.cleanFromGeometryEngine(B?B:u),transform:A&&f.toQuantizationTransform(A)||null}};b._createFeatures=function(a,h){const r=new m(a,this.featureAdapter,this.fieldsIndex),{hasM:t,hasZ:v}=this,{orderByFields:x,quantizationParameters:u,returnGeometry:D,returnCentroid:B,maxAllowableOffset:A,resultOffset:C,resultRecordCount:E,returnZ:F=!1,returnM:G=!1}=a,J=v&&F,K=t&&G;a=[];var L=0;h=[...h];this._sortFeatures(h,x,(P,R,T)=>r.getFieldValue(P,R,T));if(D||
B){var I=f.toQuantizationTransform(u);if(D&&!B)for(var N of h)a[L++]={attributes:r.getAttributes(N),geometry:c.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(N),A,I,J,K)};else if(!D&&B)for(const P of h)a[L++]={attributes:r.getAttributes(P),centroid:c.transformCentroid(this,this.featureAdapter.getCentroid(P,this),I)};else for(const P of h)a[L++]={attributes:r.getAttributes(P),centroid:c.transformCentroid(this,this.featureAdapter.getCentroid(P,this),I),geometry:c.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(P),A,I,J,K)}}else for(I of h)(N=r.getAttributes(I))&&(a[L++]={attributes:N});L=C||0;null!=E&&(a=a.slice(L,Math.min(a.length,L+E)));return a};b._createExceedsLimitQueryResponse=function(a){var h=!1;let r=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY;h=Number.POSITIVE_INFINITY;for(const v of a.outStatistics)if("exceedslimit"===v.statisticType){r=null!=v.maxPointCount?v.maxPointCount:Number.POSITIVE_INFINITY;t=null!=v.maxRecordCount?v.maxRecordCount:
Number.POSITIVE_INFINITY;h=null!=v.maxVertexCount?v.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)h=this.items.length>r;else if(this.items.length>t)h=!0;else{a=this.hasZ?this.hasM?4:3:this.hasM?3:2;const v=this.featureAdapter;h=this.items.reduce((x,u)=>{u=v.getGeometry(u);return x+(u&&u.coords.length||0)},0)/a>h}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(h)}}]}};
b._createStatisticsQueryResponse=function(a){var h={attributes:{}};const r=[],t=new Map,v=new Map,x=new Map,u=new Map,D=new m(a,this.featureAdapter,this.fieldsIndex);var B=a.outStatistics;const {groupByFieldsForStatistics:A,having:C,orderByFields:E}=a;a=A&&A.length;const F=!!a,G=F&&A[0],J=F&&!this.fieldsIndex.get(G);for(const P of B){const {outStatisticFieldName:R,statisticType:T}=P;B=P;var K="exceedslimit"!==T?P.onStatisticField:void 0;const W="percentile_disc"===T||"percentile_cont"===T,Z=F&&1===
a&&(K===G||J)&&"count"===T;if(F){if(!x.has(K)){var L=[];for(const la of A){var I=this._getAttributeValues(D,la,t);L.push(I)}x.set(K,this._calculateUniqueValues(L))}L=x.get(K);for(const la in L){const {count:ea,data:O,items:U,itemPositions:ba}=L[la];I=O.join(",");if(!C||D.validateItems(U,C)){const ka=u.get(I)||{attributes:{}};var N=null;if(Z)N=ea;else{const oa=this._getAttributeValues(D,K,t);N=ba.map(M=>oa[M]);N=W&&"statisticParameters"in B?this._getPercentileValue(B,N):this._getStatisticValue(B,N)}ka.attributes[R]=
N;A.forEach((oa,M)=>ka.attributes[this.fieldsIndex.get(oa)?oa:`EXPR_${M+1}`]=O[M]);u.set(I,ka)}}}else K=this._getAttributeValues(D,K,t),h.attributes[R]=W&&"statisticParameters"in B?this._getPercentileValue(B,K):this._getStatisticValue(B,K,v);r.push({name:R,alias:R,type:"esriFieldTypeDouble"})}h=F?Array.from(u.values()):[h];this._sortFeatures(h,E,(P,R)=>P.attributes[R]);return{fields:r,features:h}};b._getStatisticValue=function(a,h,r){const {onStatisticField:t,statisticType:v}=a;a=r&&r.has(t)?r.get(t):
this._calculateStatistics(h);r&&r.set(t,a);return a["var"===v?"variance":v]};b._getPercentileValue=function(a,h){const {onStatisticField:r,statisticParameters:t,statisticType:v}=a,{value:x,orderBy:u}=t,D="desc"===u,B=this.fieldsIndex.get(r);a=[...h].filter(A=>null!=A).sort((A,C)=>d(A,C,B,D));return this._calculatePercentile(a,x,"percentile_disc"===v)};b._getAttributeValues=function(a,h,r){if(r.has(h))return r.get(h);const t=this.fieldsIndex.get(h),v=this.items.map(x=>a.getFieldValue(x,h,t));r.set(h,
v);return v};b._calculateStatistics=function(a){let h=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=null,v=null,x=null,u=null;const D=[];let B=0;for(const A of a)"string"===typeof A?B++:null==A||isNaN(A)||(t+=A,h=Math.min(h,A),r=Math.max(r,A),D.push(A),B++);if(B){v=t/B;a=0;for(const A of D)a+=Math.pow(A-v,2);u=1<B?a/(B-1):0;x=Math.sqrt(u)}else r=h=null;return{avg:v,count:B,max:r,min:h,stddev:x,sum:t,variance:u}};b._calculateUniqueValues=function(a){const h={},r=this.items,t=r.length;for(let v=
0;v<t;v++){const x=r[v],u=[];for(const B of a)u.push(B[v]);const D=u.join(",");null==h[D]?h[D]={count:1,data:u,items:[x],itemPositions:[v]}:(h[D].count++,h[D].items.push(x),h[D].itemPositions.push(v))}return h};b._calculatePercentile=function(a,h,r){if(0===a.length)return null;if(0>=h)return a[0];if(1<=h)return a[a.length-1];var t=(a.length-1)*h,v=Math.floor(t);h=v+1;t%=1;v=a[v];const x=a[h];return h>=a.length||r||"string"===typeof v||"string"===typeof x?v:v*(1-t)+x*t};n._createClass(g,[{key:"size",
get:function(){return this.items.length}}]);return g}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(n,l){function p({scale:C,translate:E},F){return Math.round((F-E[0])/C[0])}function z({scale:C,translate:E},F){return Math.round((E[1]-F)/C[1])}function y(C,E,F){const G=[];let J,K,L,I;for(let N=0;N<F.length;N++){const P=F[N];if(0<N){if(L=p(C,P[0]),I=z(C,P[1]),L!==J||I!==K)G.push(E(P,L-J,I-K)),J=L,K=I}else J=p(C,P[0]),K=z(C,P[1]),G.push(E(P,J,K))}return 0<
G.length?G:null}function w(C,E,F,G){return y(C,F?G?A:B:G?B:D,E)}function f(C,E,F,G){const J=[];F=F?G?A:B:G?B:D;for(G=0;G<E.length;G++){const K=y(C,F,E[G]);K&&3<=K.length&&J.push(K)}return J.length?J:null}function k(C,E,F,G){const J=[];F=F?G?A:B:G?B:D;for(G=0;G<E.length;G++){const K=y(C,F,E[G]);K&&2<=K.length&&J.push(K)}return J.length?J:null}function m({scale:C,translate:E},F){return F*C[0]+E[0]}function c({scale:C,translate:E},F){return E[1]-F*C[1]}function e(C,E,F){const G=Array(F.length);if(!F.length)return G;
const [J,K]=C.scale;let L=m(C,F[0][0]);C=c(C,F[0][1]);G[0]=E(F[0],L,C);for(let I=1;I<F.length;I++){const N=F[I];L+=N[0]*J;C-=N[1]*K;G[I]=E(N,L,C)}return G}function q(C,E,F){const G=Array(F.length);for(let J=0;J<F.length;J++)G[J]=e(C,E,F[J]);return G}function d(C,E,F,G){return e(C,F?G?A:B:G?B:D,E)}function g(C,E,F,G){return q(C,F?G?A:B:G?B:D,E)}function b(C,E,F,G){return q(C,F?G?A:B:G?B:D,E)}function a(C,E,F){let [G,J]=F[0],K=Math.min(G,E[0]),L=Math.min(J,E[1]),I=Math.max(G,E[2]);E=Math.max(J,E[3]);
for(let N=1;N<F.length;N++){const [P,R]=F[N];G+=P;J+=R;0>P&&(K=Math.min(K,G));0<P&&(I=Math.max(I,G));0>R?L=Math.min(L,J):0<R&&(E=Math.max(E,J))}C[0]=K;C[1]=L;C[2]=I;C[3]=E;return C}function h(C,E){if(!E.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let F=0;F<E.length;F++)a(C,C,E[F]);return C}function r(C,E,F,G,J){E.xmin=p(C,F.xmin);E.ymin=z(C,F.ymin);E.xmax=p(C,F.xmax);E.ymax=z(C,F.ymax);E!==F&&(G&&(E.zmin=F.zmin,E.zmax=F.zmax),J&&(E.mmin=F.mmin,E.mmax=
F.mmax));return E}function t(C,E,F,G,J){E.points=w(C,F.points,G,J);return E}function v(C,E,F,G,J){E.x=p(C,F.x);E.y=z(C,F.y);E!==F&&(G&&(E.z=F.z),J&&(E.m=F.m));return E}function x(C,E,F,G,J){C=f(C,F.rings,G,J);if(!C)return null;E.rings=C;return E}function u(C,E,F,G,J){C=k(C,F.paths,G,J);if(!C)return null;E.paths=C;return E}const D=(C,E,F)=>[E,F],B=(C,E,F)=>[E,F,C[2]],A=(C,E,F)=>[E,F,C[2],C[3]];n.equals=function(C,E){if(C===E||null==C&&null==E)return!0;if(null==C||null==E)return!1;let F,G,J,K;C&&"upperLeft"===
C.originPosition?(F=C.translate[0],G=C.translate[1],C=C.scale[0]):(F=C.extent.xmin,G=C.extent.ymax,C=C.tolerance);E&&"upperLeft"===E.originPosition?(J=E.translate[0],K=E.translate[1],E=E.scale[0]):(J=E.extent.xmin,K=E.extent.ymax,E=E.tolerance);return F===J&&G===K&&C===E};n.getQuantizedBoundsCoordsArray=a;n.getQuantizedBoundsCoordsArrayArray=h;n.getQuantizedBoundsPaths=function(C){return h([0,0,0,0],C)};n.getQuantizedBoundsPoints=function(C){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(E,E,C)};n.getQuantizedBoundsRings=function(C){return h([0,0,0,0],C)};n.quantizeBounds=function(C,E,F){E[0]=p(C,F[0]);E[3]=z(C,F[1]);E[2]=p(C,F[2]);E[1]=z(C,F[3]);return E};n.quantizeExtent=r;n.quantizeGeometry=function(C,E){return C&&E?l.isPoint(E)?v(C,{},E,!1,!1):l.isPolyline(E)?u(C,{},E,!1,!1):l.isPolygon(E)?x(C,{},E,!1,!1):l.isMultipoint(E)?t(C,{},E,!1,!1):l.isExtent(E)?r(C,{},E,!1,!1):null:null};n.quantizeMultipoint=t;n.quantizePaths=
k;n.quantizePoint=v;n.quantizePoints=w;n.quantizePolygon=x;n.quantizePolyline=u;n.quantizeRings=f;n.quantizeX=p;n.quantizeY=z;n.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":C.originPosition,scale:[C.tolerance,C.tolerance],translate:[C.extent.xmin,C.extent.ymax]}:null};n.unquantizeBounds=function(C,E,F){return F?(E[0]=m(C,F[0]),E[1]=c(C,F[3]),E[2]=m(C,F[2]),E[3]=c(C,F[1]),E):[m(C,E[0]),c(C,E[3]),
m(C,E[2]),c(C,E[1])]};n.unquantizeCoordsArray=e;n.unquantizeCoordsArrayArray=q;n.unquantizeExtent=function(C,E,F,G,J){E.xmin=m(C,F.xmin);E.ymin=c(C,F.ymin);E.xmax=m(C,F.xmax);E.ymax=c(C,F.ymax);E!==F&&(G&&(E.zmin=F.zmin,E.zmax=F.zmax),J&&(E.mmin=F.mmin,E.mmax=F.mmax));return E};n.unquantizeMultipoint=function(C,E,F,G,J){E.points=d(C,F.points,G,J);return E};n.unquantizePaths=g;n.unquantizePoint=function(C,E,F,G,J){E.x=m(C,F.x);E.y=c(C,F.y);E!==F&&(G&&(E.z=F.z),J&&(E.m=F.m));return E};n.unquantizePoints=
d;n.unquantizePolygon=function(C,E,F,G,J){E.rings=b(C,F.rings,G,J);return E};n.unquantizePolyline=function(C,E,F,G,J){E.paths=g(C,F.paths,G,J);return E};n.unquantizeRings=b;n.unquantizeX=m;n.unquantizeY=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport"],function(n,l){return function(){function p(y,w,f){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=
y.returnDistinctValues;this.fieldsIndex=f;this.featureAdapter=w;if((w=y.outFields)&&-1===w.indexOf("*")){this.outFields=w;y=0;for(const m of w){var k=l.getExpressionFromFieldName(m);k=(w=this.fieldsIndex.get(k))?null:l.getWhereClause(k,f);w=w?w.name:l.getAliasFromFieldName(m)||`FIELD_EXP_${y++}`;this._fieldDataCache.set(m,{alias:w,clause:k})}}}var z=p.prototype;z.countDistinctValues=function(y){if(!this.returnDistinctValues)return y.length;y.forEach(w=>this.getAttributes(w));return this._returnDistinctMap.size};
z.getAttributes=function(y){y=this._processAttributesForOutFields(y);return this._processAttributesForDistinctValues(y)};z.getFieldValue=function(y,w,f){const k=f?f.name:w;let m=null;this._fieldDataCache.has(k)?m=this._fieldDataCache.get(k).clause:f||(m=l.getWhereClause(w,this.fieldsIndex),this._fieldDataCache.set(k,{alias:k,clause:m}));return f?this.featureAdapter.getAttribute(y,k):m.calculateValue(y,this.featureAdapter)};z.validateItem=function(y,w){this._fieldDataCache.has(w)||this._fieldDataCache.set(w,
{alias:w,clause:l.getWhereClause(w,this.fieldsIndex)});return this._fieldDataCache.get(w).clause.testFeature(y,this.featureAdapter)};z.validateItems=function(y,w){this._fieldDataCache.has(w)||this._fieldDataCache.set(w,{alias:w,clause:l.getWhereClause(w,this.fieldsIndex)});return this._fieldDataCache.get(w).clause.testSet(y,this.featureAdapter)};z._processAttributesForOutFields=function(y){const w=this.outFields;if(!w||!w.length)return this.featureAdapter.getAttributes(y);const f={};for(const k of w){const {alias:m,
clause:c}=this._fieldDataCache.get(k);f[m]=c?c.calculateValue(y,this.featureAdapter):this.featureAdapter.getAttribute(y,m)}return f};z._processAttributesForDistinctValues=function(y){if(n.isNone(y)||!this.returnDistinctValues)return y;var w=this.outFields,f=[];if(w)for(const m of w){var {alias:k}=this._fieldDataCache.get(m);f.push(y[k])}else for(k in y)f.push(y[k]);w=`${(w||["*"]).join(",")}=${f.join(",")}`;f=this._returnDistinctMap.get(w)||0;this._returnDistinctMap.set(w,++f);return 1<f?null:y};
return p}()})},"esri/views/2d/layers/features/Source2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/diffUtils ../../../../TimeExtent ../../../../tasks/support/Query ../../engine/webgl/definitions ./sources/createSource ./support/tileUtils ./support/UpdateToken".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){function d(r,t){const v=[];v.push(new a([0,0],r,null));if(0===
t)return v;t=Math.min(t,m.TILE_SIZE);const x=m.TILE_SIZE;v.push(new a([-x,-x],e.getPow2NeighborTile(r,-1,-1),[x-t,x-t,x,x]));v.push(new a([0,-x],e.getPow2NeighborTile(r,0,-1),[0,x-t,x,x]));v.push(new a([x,-x],e.getPow2NeighborTile(r,1,-1),[0,x-t,t,x]));v.push(new a([-x,0],e.getPow2NeighborTile(r,-1,0),[x-t,0,x,x]));v.push(new a([x,0],e.getPow2NeighborTile(r,1,0),[0,0,t,x]));v.push(new a([-x,x],e.getPow2NeighborTile(r,-1,1),[x-t,0,x,t]));v.push(new a([0,x],e.getPow2NeighborTile(r,0,1),[0,0,x,t]));
v.push(new a([x,x],e.getPow2NeighborTile(r,1,1),[0,0,t,t]));return v}let g=0,b=function(){function r(v,x){this.didSend=!1;this.dataTileCount=0;this.update=q.UpdateToken.all();this._abortController=new AbortController;this.invalid=!1;this.displayTile=v;this._pixelBuffer=x;this.partitions=d(v,x)}var t=r.prototype;t.setUpdate=function(v,x){this.update=v;this.dataTileCount=0;x!==this._pixelBuffer&&(this._pixelBuffer=x,this.partitions=d(this.displayTile,x));v.mesh&&(this.didSend=!1)};t.abort=function(){this._abortController.abort()};
l._createClass(r,[{key:"signal",get:function(){return this._abortController.signal}}]);return r}(),a=function(){function r(t,v,x){this.resolved=!1;this.tile=v;this.offset=t;this.extent=x}r.prototype.reset=function(){this.resolved=!1};return r}(),h=function(){function r(v,x,u){this.type="remote";this._pendingEdits=new Set;this._queryInfo=null;this._subscriptions={display:new Map};this._invalid={outFields:!1,queryFilterParameters:!1};const D=this._onDataTileRequest.bind(this);this._source=c.createSource(v,
x,u,D,()=>this.canAcceptPatch());this._serviceInfo=v;this._geometryType=v.geometryType;this._outSR=x}var t=r.prototype;t.destroy=function(){this._getSubscriptions().map(({displayTile:v})=>this.unsubscribe(v));this._source.destroy()};t.enableEvent=function(v,x){this._source.enableEvent(v,x)};t.setViewState=function(v){this._source.setViewState(v)};t.update=function(v,x){var u,D,B,A,C=this._serviceInfo.fields.length;const E=null!=(u=null==(D=this._schema)?void 0:D.outFields)?u:[];u=null!=(B=null==(A=
this._schema)?void 0:A.pixelBuffer)?B:0;B=x.outFields.filter(F=>-1===E.indexOf(F));B=[...E,...B];x.pixelBuffer=0===x.pixelBuffer?0:Math.max(x.pixelBuffer,u);x.outFields=B.length>=.75*C?["*"]:B;x.outFields.sort();u=w.diff(this._schema,x);this._subscriptions.display.forEach(F=>{F.invalid&&(v.queryFilter=!0)});u&&(C=this._schema&&w.hasDiff(u,"outFields"),B=this._schema&&w.hasDiff(u,"pixelBuffer"),A=this._schema&&w.hasDiffAny(u,["definitionExpression","gdbVersion","historicMoment"]),p("esri-2d-update-debug")&&
console.debug("Applying Update - Source:",u),u={returnCentroid:"esriGeometryPolygon"===this._geometryType,returnGeometry:!0,outFields:x.outFields,outSpatialReference:this._outSR,orderByFields:[`${this._serviceInfo.objectIdField} ASC`],where:x.definitionExpression||"1\x3d1",gdbVersion:x.gdbVersion,historicMoment:x.historicMoment?new Date(x.historicMoment):null,timeExtent:f.fromJSON(x.timeExtent)},v.source=!0,B&&(v.why.mesh.push("Pixel buffer changed"),v.mesh=!0),A&&(v.why.mesh.push("Layer filter changed"),
v.why.source.push("Layer filter changed"),v.mesh=!0,v.queryFilter=!0,this._invalid.queryFilterParameters=!0),C&&(v.why.source.push("Layer required fields changed"),this._invalid.outFields=!0),this._schema=x,this._source.update(u),this._queryInfo=u)};t.subscribe=function(v){this._subscriptions.display.has(v.id)||this._subscribeDisplayTile(v)};t.unsubscribe=function(v){if(this._subscriptions.display.has(v.id)){var x=this._subscriptions.display.get(v.id);this._subscriptions.display.delete(v.id);this._source.unsubscribe(v);
x.abort()}};t.forEachRequest=function(v,x){this._source.forEachRequest(v,x)};t.query=function(v){return this._source.query(v)};t.createQuery=function(){return new k({...this._queryInfo})};t.createTileQuery=function(v){if("stream"===this._serviceInfo.type)throw Error("Service does not support tile  queries");const x=this.createQuery();x.quantizationParameters=v.getQuantizationParameters();x.resultType="tile";x.geometry=v.extent;"esriGeometryPolyline"===this._serviceInfo.geometryType&&(x.maxAllowableOffset=
v.resolution);this._serviceInfo.capabilities.query.supportsQuantization||(x.quantizationParameters=null,x.maxAllowableOffset=v.resolution);return x};t.invalidate=function(){this._subscriptions.display.forEach(v=>v.invalid=!0)};t.forEachPendingEdit=function(v){this._getSubscriptions().some(({invalid:x})=>x)?this._pendingEdits.forEach(v):this._pendingEdits.clear()};t.onEdits=async function(v){const x=v.addedFeatures.filter(A=>!A.error).map(A=>A.objectId),u=v.updatedFeatures.filter(A=>!A.error).map(A=>
A.objectId),D=v.deletedFeatures.filter(A=>!A.error).map(A=>A.objectId),B=[...x,...u];D.forEach(A=>{this._pendingEdits.has(A)&&this._pendingEdits.delete(A)});B.forEach(A=>this._pendingEdits.add(A));v=this._getSubscriptions().map(({displayTile:A})=>A).map(A=>{const C=this.createTileQuery(A);C.objectIds=B;return{tile:A,query:C}}).map(async({tile:A,query:C})=>({tile:A,result:await this._source.query(C)}));(await y.all(v)).forEach(({tile:A,result:C})=>{var E=this._subscriptions.display.get(A.key.id);if(E){E=
E.signal;var F=q.UpdateToken.all();this.onDisplayTilePatch({type:"update",id:A.key.id,version:g++,update:F,addOrUpdate:C,remove:[...u,...D],end:!0,noData:!1},{signal:E})}});this.invalidate()};t.resubscribe=async function(v,x=!1){const u=this._schema.pixelBuffer;this._subscriptions.display.forEach(B=>B.setUpdate(v,u));let D=!1;this._subscriptions.display.forEach(B=>{B.invalid&&(D=!0)});this._invalid.outFields&&(this._invalid.outFields=!1);x||this._invalid.queryFilterParameters||D?(x=this._getSubscriptions().map(({displayTile:B})=>
B),x.forEach(B=>this.unsubscribe(B)),x.forEach(B=>this.subscribe(B)),this._source.resume(),this._invalid.queryFilterParameters=!1):v.mesh?await this._source.resend({dataTileOnly:!1}):await this._source.resend({dataTileOnly:!0})};t.pause=function(){this._source.pause()};t.resume=function(){this._source.resume()};t._getSubscriptions=function(){const v=[];this._subscriptions.display.forEach(x=>{v.push(x)});return v};t._subscribeDisplayTile=function(v){var x=new b(v,this._schema.pixelBuffer);this._subscriptions.display.set(v.id,
x);this._source.subscribe(v);for(const u of x.partitions)if(x=this._source.get(u.tile.id),z.isSome(x))for(const D of x.requests.done)this._onPartitionMessage(v.id,u,D.request,"new")};t._onDataTileRequest=function(v,x,u){const D=this._subscriptions.display.get(v.id);if(u&&u.dataTileOnly)for(const B of D.partitions){if(B.tile.id===v.id){this._onPartitionMessage(v.id,B,v,x);break}}else{for(const B of D.partitions)if(B.tile.id===v.id){this._onPartitionMessage(v.id,B,v,x);break}this._subscriptions.display.forEach((B,
A)=>{if(A!==v.id)for(const C of B.partitions)if(C.tile.id===v.id){this._onPartitionMessage(A,C,v,x);break}})}};t._onPartitionMessage=function(v,x,u,D){const B=z.andThen(u.features,G=>{if(!z.isNone(x.extent)){var {offset:J,extent:K}=x,[L,I,N,P]=K,[R,T]=J;G=G.extent(L,I,N,P).transform(R,T)}return G}),A=this._subscriptions.display.get(v),C=A.signal;let E=A.update;A.didSend||(D="replace");z.isSome(B)&&!B.seen&&(E=q.UpdateToken.all(),B.seen=!0);let F=!1;u.end&&(x.resolved=!0,F=v===x.tile.id);A.didSend=
!0;this.onDisplayTilePatch({type:D,id:v,version:g++,update:E,addOrUpdate:B,remove:u.remove||[],noData:u.noData,end:F},{signal:C})};l._createClass(r,[{key:"updating",get:function(){return this._source.updating||this._getSubscriptions().some(v=>!v.didSend)}},{key:"isStream",get:function(){return"geoevent"===this._source.type}},{key:"sourceEvents",get:function(){return"geoevent"===this._source.type?{type:"geoevent",events:this._source.events}:{type:"feature",events:this._source.events}}}]);return r}();
n.Source2D=h;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./layers/support/timeUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(t){function v(u){u=t.call(this,u)||this;u.end=null;u.start=null;return u}n._inheritsLoose(v,t);var x=v.prototype;x.readEnd=function(u,D){return null!=D.end?new Date(D.end):null};x.writeEnd=function(u,D){D.end=u?u.getTime():null};x.readStart=function(u,D){return null!=D.start?new Date(D.start):null};x.writeStart=function(u,D){D.start=u?u.getTime():null};x.clone=function(){return new a({end:this.end,start:this.start})};x.expandTo=function(u){if(this.isEmpty||
this.isAllTime)return this.clone();const D=this.start?b.truncateDate(this.start,u):null;u=this.end?b.offsetDate(b.truncateDate(this.end,u),1,u):null;return new a({start:D,end:u})};x.intersection=function(u){var D,B,A,C,E,F,G,J;if(!u)return this.clone();if(this.isEmpty||u.isEmpty)return a.empty;if(this.isAllTime)return u.clone();if(u.isAllTime)return this.clone();const K=null!=(D=null==(B=this.start)?void 0:B.getTime())?D:-Infinity;D=null!=(A=null==(C=this.end)?void 0:C.getTime())?A:Infinity;A=null!=
(E=null==(F=u.start)?void 0:F.getTime())?E:-Infinity;u=null!=(G=null==(J=u.end)?void 0:J.getTime())?G:Infinity;let L,I;A>=K&&A<=D?L=A:K>=A&&K<=u&&(L=K);D>=A&&D<=u?I=D:u>=K&&u<=D&&(I=u);return isNaN(L)||isNaN(I)?a.empty:(G=new a,G.start=-Infinity===L?null:new Date(L),G.end=Infinity===I?null:new Date(I),G)};x.offset=function(u,D){if(this.isEmpty||this.isAllTime)return this.clone();const B=new a,{start:A,end:C}=this;A&&(B.start=b.offsetDate(A,u,D));C&&(B.end=b.offsetDate(C,u,D));return B};x.equals=function(u){if(!u)return!1;
const D=this.start?this.start.getTime():this.start,B=this.end?this.end.getTime():this.end,A=u.start?u.start.getTime():u.start;u=u.end?u.end.getTime():u.end;return D===A&&B===u};x.union=function(u){if(!u||u.isEmpty)return this.clone();if(this.isEmpty)return u.clone();if(this.isAllTime||u.isAllTime)return h.clone();const D=this.start&&u.start?new Date(Math.min(this.start.getTime(),u.start.getTime())):null;u=this.end&&u.end?new Date(Math.max(this.end.getTime(),u.end.getTime())):null;return new a({start:D,
end:u})};n._createClass(v,[{key:"isAllTime",get:function(){return this.equals(a.allTime)}},{key:"isEmpty",get:function(){return this.equals(a.empty)}}],[{key:"allTime",get:function(){return h}},{key:"empty",get:function(){return r}}]);return v}(g.JSONSupport);l.__decorate([w.property({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0);l.__decorate([k.reader("end")],p.prototype,"readEnd",null);l.__decorate([c.writer("end")],p.prototype,"writeEnd",null);l.__decorate([w.property({dependsOn:["start",
"end"],readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null);l.__decorate([w.property({dependsOn:["start","end"],readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null);l.__decorate([w.property({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0);l.__decorate([k.reader("start")],p.prototype,"readStart",null);l.__decorate([c.writer("start")],p.prototype,"writeStart",null);p=a=l.__decorate([m.subclass("esri.TimeExtent")],p);const h=new p,r=new p({start:void 0,end:void 0});return p})},
"esri/layers/support/timeUtils":function(){define(["exports","../../core/has","../../core/jsonMap"],function(n,l,p){const z={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",
setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};l=p.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",
esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});n.Milliseconds=function(y){return y};n.millisecondsPerTimeUnit={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};n.offsetDate=function(y,w,f){y=new Date(y.getTime());if(w&&f){const {getter:k,setter:m,multiplier:c}=z[f];y[m](y[k]()+w*c)}return y};n.timeUnitKebabDictionary=l;n.truncateDate=function(y,w){switch(w){case "milliseconds":return new Date(y.getTime());
case "seconds":return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),y.getSeconds());case "minutes":return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes());case "hours":return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours());case "days":return new Date(y.getFullYear(),y.getMonth(),y.getDate());case "weeks":return new Date(y.getFullYear(),y.getMonth(),y.getDate()-y.getDay());case "months":return new Date(y.getFullYear(),y.getMonth(),
1);case "years":return new Date(y.getFullYear(),0,1);case "decades":return new Date(y.getFullYear()-y.getFullYear()%10,0,1);case "centuries":return new Date(y.getFullYear()-y.getFullYear()%100,0,1);default:return null}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../geometry ../../chunks/symbols ../../TimeExtent ../../chunks/DataLayerSource ./QuantizationParameters ./StatisticDefinition".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B){var A;p=new c.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});c=new c.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});a=A=function(C){function E(G){G=C.call(this,G)||this;G.aggregateIds=null;G.cacheHint=void 0;G.datumTransformation=null;G.distance=void 0;G.dynamicDataSource=void 0;G.gdbVersion=null;G.geometry=null;G.geometryPrecision=void 0;G.groupByFieldsForStatistics=null;G.having=null;G.historicMoment=null;G.maxAllowableOffset=void 0;G.maxRecordCountFactor=1;G.multipatchOption=
null;G.num=void 0;G.objectIds=null;G.orderByFields=null;G.outFields=null;G.outSpatialReference=null;G.outStatistics=null;G.parameterValues=null;G.pixelSize=null;G.quantizationParameters=null;G.rangeValues=null;G.relationParameter=null;G.resultType=null;G.returnCentroid=!1;G.returnDistinctValues=!1;G.returnExceededLimitFeatures=!0;G.returnGeometry=!1;G.returnQueryGeometry=!1;G.returnM=void 0;G.returnZ=void 0;G.spatialRelationship="intersects";G.start=void 0;G.sqlFormat=null;G.text=null;G.timeExtent=
null;G.units=null;G.where=null;return G}n._inheritsLoose(E,C);E.from=function(G){return f.ensureClass(A,G)};var F=E.prototype;F.castDatumTransformation=function(G){return"number"===typeof G||"object"===typeof G?G:null};F.writeHistoricMoment=function(G,J){J.historicMoment=G&&G.getTime()};F.writeParameterValues=function(G,J){if(G){const K={};for(const L in G){const I=G[L];Array.isArray(I)?K[L]=I.map(N=>N instanceof Date?N.getTime():N):K[L]=I instanceof Date?I.getTime():I}J.parameterValues=K}};F.writeStart=
function(G,J){J.resultOffset=this.start;J.resultRecordCount=this.num||10;J.where="1\x3d1"};F.writeWhere=function(G,J){J.where=G||"1\x3d1"};F.clone=function(){return new A(z.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:y.isSome(this.historicMoment)?
new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,
resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};return E}(a.JSONSupport);
a.MAX_MAX_RECORD_COUNT_FACTOR=5;l.__decorate([k.property({json:{write:!0}})],a.prototype,"aggregateIds",void 0);l.__decorate([k.property({type:Boolean,json:{write:{writer:(C,E)=>{null!=C&&(E.cacheHint=C)}}}})],a.prototype,"cacheHint",void 0);l.__decorate([k.property({json:{write:!0}})],a.prototype,"datumTransformation",void 0);l.__decorate([m.cast("datumTransformation")],a.prototype,"castDatumTransformation",null);l.__decorate([k.property({type:Number,json:{write:{overridePolicy(C){return{enabled:0<
C}}}}})],a.prototype,"distance",void 0);l.__decorate([k.property({type:u.DataLayerSource,json:{write:!0}})],a.prototype,"dynamicDataSource",void 0);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0);l.__decorate([k.property({types:t.geometryTypes,json:{read:r.fromJSON,write:!0}})],a.prototype,"geometry",void 0);l.__decorate([k.property({type:Number,json:{write:!0}})],a.prototype,"geometryPrecision",void 0);l.__decorate([k.property({type:[String],json:{write:!0}})],
a.prototype,"groupByFieldsForStatistics",void 0);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"having",void 0);l.__decorate([k.property({type:Date})],a.prototype,"historicMoment",void 0);l.__decorate([q.writer("historicMoment")],a.prototype,"writeHistoricMoment",null);l.__decorate([k.property({type:Number,json:{write:!0}})],a.prototype,"maxAllowableOffset",void 0);l.__decorate([k.property({type:Number,cast(C){return 1>C?1:C>A.MAX_MAX_RECORD_COUNT_FACTOR?A.MAX_MAX_RECORD_COUNT_FACTOR:
C},json:{write:{overridePolicy(C){return{enabled:1<C}}}}})],a.prototype,"maxRecordCountFactor",void 0);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"multipatchOption",void 0);l.__decorate([k.property({type:Number,json:{read:{source:"resultRecordCount"}}})],a.prototype,"num",void 0);l.__decorate([k.property({json:{write:!0}})],a.prototype,"objectIds",void 0);l.__decorate([k.property({type:[String],json:{write:!0}})],a.prototype,"orderByFields",void 0);l.__decorate([k.property({type:[String],
json:{write:!0}})],a.prototype,"outFields",void 0);l.__decorate([k.property({type:h,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);l.__decorate([k.property({type:[B],json:{write:{enabled:!0,overridePolicy(){return{enabled:y.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],a.prototype,"outStatistics",void 0);l.__decorate([k.property({json:{write:!0}})],a.prototype,"parameterValues",void 0);l.__decorate([q.writer("parameterValues")],a.prototype,
"writeParameterValues",null);l.__decorate([k.property({types:v.symbolTypes,json:{write:!0}})],a.prototype,"pixelSize",void 0);l.__decorate([k.property({type:D,json:{write:!0}})],a.prototype,"quantizationParameters",void 0);l.__decorate([k.property({type:[Object],json:{write:!0}})],a.prototype,"rangeValues",void 0);l.__decorate([k.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],a.prototype,
"relationParameter",void 0);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"resultType",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:C}}}}})],a.prototype,"returnCentroid",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:C}}}}})],a.prototype,"returnDistinctValues",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:!C}}}}})],a.prototype,"returnExceededLimitFeatures",
void 0);l.__decorate([k.property({type:Boolean,json:{write:!0}})],a.prototype,"returnGeometry",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:C}}}}})],a.prototype,"returnQueryGeometry",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:C}}}}})],a.prototype,"returnM",void 0);l.__decorate([k.property({type:Boolean,json:{write:{overridePolicy(C){return{enabled:C}}}}})],a.prototype,"returnZ",void 0);l.__decorate([k.property({type:String,
json:{read:{source:"spatialRel",reader:p.read},write:{target:"spatialRel",writer:p.write}}})],a.prototype,"spatialRelationship",void 0);l.__decorate([k.property({type:Number,json:{read:{source:"resultOffset"}}})],a.prototype,"start",void 0);l.__decorate([q.writer("start"),q.writer("num")],a.prototype,"writeStart",null);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"sqlFormat",void 0);l.__decorate([k.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);l.__decorate([k.property({type:x,
json:{write:!0}})],a.prototype,"timeExtent",void 0);l.__decorate([k.property({type:String,json:{read:c.read,write:{writer:c.write,overridePolicy(C){return{enabled:C&&0<this.distance}}}}})],a.prototype,"units",void 0);l.__decorate([k.property({type:String,json:{write:{overridePolicy(C){return{enabled:null!=C||0<this.start}}}}})],a.prototype,"where",void 0);l.__decorate([q.writer("where")],a.prototype,"writeWhere",null);return a=A=l.__decorate([e.subclass("esri.tasks.support.Query")],a)})},"esri/chunks/symbols":function(){define("exports ../core/accessorSupport/ensureType ../core/accessorSupport/extensions/serializableProperty/reader ../core/Error ../symbols/Symbol ../symbols/CIMSymbol ../symbols/Symbol3DLayer ../symbols/ExtrudeSymbol3DLayer ../symbols/SimpleLineSymbol ../symbols/FillSymbol ../symbols/FillSymbol3DLayer ../symbols/Font ../symbols/IconSymbol3DLayer ../symbols/LineSymbol3DLayer ../symbols/ObjectSymbol3DLayer ../symbols/PathSymbol3DLayer ../symbols/TextSymbol3DLayer ../symbols/WaterSymbol3DLayer ../symbols/Symbol3D ./LineCallout3DBorder ../symbols/callouts/LineCallout3D ../symbols/support/Symbol3DVerticalOffset ../symbols/LabelSymbol3D ../symbols/LineSymbol3D ../symbols/MarkerSymbol ../symbols/MeshSymbol3D ../symbols/PictureFillSymbol ../symbols/PictureMarkerSymbol ../symbols/PointSymbol3D ../symbols/PolygonSymbol3D ../symbols/SimpleFillSymbol ../symbols/SimpleMarkerSymbol ../symbols/TextSymbol ../symbols/WebStyleSymbol".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E,F,G,J,K,L,I,N){function P(Z,la=!1,ea=!1,O=!0){if(!Z)return{symbol:null};if(T(Z)||Z instanceof N)O=Z.clone();else if("cim"===Z.type)O=G.fromCIMSymbol(Z);else if(Z instanceof m)O=B.fromSimpleLineSymbol(Z);else if(Z instanceof L)O=G.fromSimpleMarkerSymbol(Z);else if(Z instanceof F)O=G.fromPictureMarkerSymbol(Z);else if(Z instanceof K)O=J.fromSimpleFillSymbol(Z);else if(Z instanceof I)O=O?D.fromTextSymbol(Z):G.fromTextSymbol(Z);else return{error:new z("symbol-conversion:unsupported-2d-symbol",
`2D symbol of type '${Z.type||Z.declaredClass}' is unsupported in 3D`,{symbol:Z})};la&&(O.id=Z.id);if(ea&&T(O))for(Z=0;Z<O.symbolLayers.length;++Z)O.symbolLayers.getItemAt(Z)._ignoreDrivers=!0;return{symbol:O}}function R(Z,la,ea){if(!Z)return null;if(!(!ea||"web-scene"!==ea.origin||Z instanceof t||Z instanceof N)){const O="cim"!==Z.type?P(Z):{symbol:null,error:new z("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:Z})};if(O.symbol)return O.symbol.write(la,
ea);ea.messages&&ea.messages.push(new z("symbol:unsupported",`Symbols of type '${Z.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:Z,context:ea,error:O.error}));return null}return ea&&"web-map"===ea.origin&&"web-style"===Z.type?(ea.messages&&ea.messages.push(new z("symbol:unsupported",`Symbols of type '${Z.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:Z,context:ea})),
null):Z.write(la,ea)}function T(Z){if(!Z)return!1;switch(Z.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}}f={base:y,key:"type",typeMap:{"simple-fill":K,"picture-fill":E,"picture-marker":F,"simple-line":m,"simple-marker":L,text:I,"label-3d":D,"line-3d":B,"mesh-3d":C,"point-3d":G,"polygon-3d":J,"web-style":N,cim:w},errorContext:"symbol"};const W=p.createTypeReader({types:f});p={base:y,key:"type",typeMap:{"simple-fill":K,"picture-fill":E,
"picture-marker":F,"simple-line":m,"simple-marker":L,text:I,"line-3d":B,"mesh-3d":C,"point-3d":G,"polygon-3d":J,"web-style":N,cim:w},errorContext:"symbol"};w={base:y,key:"type",typeMap:{text:I,"label-3d":D},errorContext:"symbol"};E={base:y,key:"type",typeMap:{"label-3d":D,"line-3d":B,"mesh-3d":C,"point-3d":G,"polygon-3d":J,"web-style":N},errorContext:"symbol"};C={base:y,key:"type",typeMap:{"line-3d":B,"mesh-3d":C,"point-3d":G,"polygon-3d":J,"web-style":N},errorContext:"symbol"};k={base:y,key:"type",
typeMap:{"label-3d":D},errorContext:"symbol"};l=l.ensureOneOfType(f);n.ensureType=l;n.fromJSON=function(Z,la){return W(Z,null,la)};n.isSymbol=function(Z){return Z instanceof y};n.isSymbol2D=function(Z){if(!Z)return!1;switch(Z.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;default:return!1}};n.isSymbol3D=T;n.readSymbol=W;n.symbolTypes=f;n.symbolTypes3D=E;n.symbolTypesLabel=w;n.symbolTypesLabel3D=k;n.symbolTypesRenderer=
p;n.symbolTypesRenderer3D=C;n.to3D=P;n.write=function(Z,la,ea,O){(Z=R(Z,{},O))&&(la[ea]=Z)}})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){p=new f.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let b=0;d=function(a){function h(t){t=a.call(this,t)||this;t.id=`sym${b++}`;t.type=null;return t}n._inheritsLoose(h,
a);var r=h.prototype;r.readColor=function(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t};r.collectRequiredFields=async function(t,v){};r.hash=function(){return JSON.stringify(this.toJSON())};r.clone=function(){};n._createClass(h,[{key:"color",set:function(t){this._set("color",t)}}]);return h}(d.JSONSupport);l.__decorate([w.property({type:p.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p.write}}})],d.prototype,"type",void 0);l.__decorate([w.property({type:g,value:new g([0,
0,0,1]),json:{write:{allowNull:!0}}})],d.prototype,"color",null);l.__decorate([k.reader("color")],d.prototype,"readColor",null);return d=l.__decorate([m.subclass("esri.symbols.Symbol")],d)})},"esri/symbols/CIMSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/string ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../layers/support/fieldUtils ./Symbol".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){var t;p=t=function(v){function x(D){D=v.call(this,D)||this;D.data=null;D.type="cim";return D}n._inheritsLoose(x,v);var u=x.prototype;u.readData=function(D,B){return B};u.writeData=function(D,B){if(D)for(const A in D)B[A]=D[A]};u.collectRequiredFields=async function(D,B){if("CIMSymbolReference"===this.data.type){var A=this.data.primitiveOverrides;A&&(A=A.map(C=>h.collectArcadeFieldNames(D,B,C.valueExpressionInfo.expression)),await a.all(A))}};u.clone=function(){return new t({data:z.clone(this.data)})};
u.hash=function(){return y.numericHash(JSON.stringify(this.data)).toString()};return x}(r);l.__decorate([k.property({json:{write:!1}})],p.prototype,"color",void 0);l.__decorate([k.property({json:{write:!0}})],p.prototype,"data",void 0);l.__decorate([c.reader("data",["symbol"])],p.prototype,"readData",null);l.__decorate([q.writer("data")],p.prototype,"writeData",null);l.__decorate([m.enumeration({CIMSymbolReference:"cim"},{readOnly:!0})],p.prototype,"type",void 0);return p=t=l.__decorate([e.subclass("esri.symbols.CIMSymbol")],
p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","./property","../../jsonMap"],function(n,l,p){n.enumeration=function(z,y={ignoreUnknown:!0}){z=z instanceof p.JSONMap?z:new p.JSONMap(z,y);z={type:null!=y&&y.ignoreUnknown?z.apiValues:String,readOnly:null==y?void 0:y.readOnly,json:{type:z.jsonValues,read:null!=y&&y.readOnly?!1:{reader:z.read},write:{writer:z.write}}};void 0!==(null==y?void 0:y.default)&&(z.json.default=y.default);return l.property(z)};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),function(n,l,p,z,y,w,f,k){function m(O,U,ba){if(O)for(const ka of O)(O=(O=p.getDeepValue(ka,U))&&"function"!==typeof O&&d(ba,O))&&p.setDeepValue(ka,O.name,U)}function c(O,U){if(!O||!U)return[];N.clear();e(N,O,U);return Array.from(N).sort()}function e(O,U,ba){if(ba)if(U&&U.length)if(ba.includes("*"))for(const {name:ka}of U)O.add(ka);
else for(const ka of ba)q(O,U,ka);else if(ba.includes("*"))O.clear(),O.add("*");else for(const ka of ba)O.add(ka)}function q(O,U,ba){U&&U.length?(U=d(U,ba))&&O.add(U.name):"string"===typeof ba&&O.add(ba)}function d(O,U){if("string"!==typeof U)return null;if(null!=O){U=U.toLowerCase();for(const ba of O)if(ba&&ba.name.toLowerCase()===U)return ba}return null}async function g(O,U,ba){if(ba){var {arcadeUtils:ka}=await k.loadArcade();ba=ka.extractFieldNames(ba);for(const oa of ba)q(O,U,oa)}}function b(O,
U){for(const ba of O)if(ba&&ba.valueType&&ba.valueType===U)return ba.name;return null}async function a(O,U){if(U){var {fields:ba}=U;if(U=p.getDeepValue("elevationInfo.featureExpressionInfo",U))return U.collectRequiredFields(O,ba)}}async function h(O,U,ba){ba.outStatistic.onStatisticValueExpression?g(O,U,ba.outStatistic.onStatisticValueExpression):O.add(ba.outStatistic.onStatisticField)}async function r(O,U){const {labelingInfo:ba,fields:ka}=U;ba&&ba.length&&await w.all(ba.map(oa=>t(O,ka,oa)))}async function t(O,
U,ba){if(ba){var ka=ba.getLabelExpression();ba=ba.where;"arcade"===ka.type?await g(O,U,ka.expression):(ka=ka.expression.match(/{[^}]*}/g))&&ka.forEach(oa=>{q(O,U,oa.slice(1,-1))});ka=/['"]+/g;ba&&(ba=ba.split(" "),3===ba.length&&q(O,U,ba[0].replace(ka,"")),7===ba.length&&(q(O,U,ba[0].replace(ka,"")),q(O,U,ba[4].replace(ka,""))))}}function v(O){return"number"===typeof O&&!isNaN(O)&&isFinite(O)}function x(O){return null===O||v(O)}function u(O){return null===O||P(O)}function D(O){return null!=O&&"string"===
typeof O}function B(O){return null===O||D(O)}function A(){return!0}function C(O,U){let ba;switch(O.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ba=O.nullable?u:P;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ba=O.nullable?x:v;break;case "string":case "esriFieldTypeString":ba=O.nullable?B:D;break;default:ba=A}return 1===arguments.length?
ba:ba(U)}function E(O){return null!=O&&T.has(O.type)}function F(O,U){return O.nullable&&null===U?null:E(O)&&!G(O.type,Number(U))?l.NumericRangeValidationError.OUT_OF_RANGE:C(O,U)?O.domain?f.validateDomainValue(O.domain,U):null:l.TypeValidationError.INVALID_TYPE}function G(O,U){return(O="string"===typeof O?J(O):O)?O.isInteger?P(U)&&U>=O.min&&U<=O.max:U>=O.min&&U<=O.max:!1}function J(O){switch(O){case "esriFieldTypeSmallInteger":case "small-integer":return W;case "esriFieldTypeInteger":case "integer":return Z;
case "esriFieldTypeSingle":case "single":return la;case "esriFieldTypeDouble":case "double":return ea}}function K(O,U,ba){if(!U||!U.attributes||!O){if(z.isSome(ba))for(var ka of O)ba.add(ka);return!0}U=U.attributes;ka=!1;for(const oa of O)if(!(oa in U))if(ka=!0,z.isSome(ba))ba.add(oa);else break;return ka}const L="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
I=["field","normalizationField"],N=new Set,P=(()=>"isInteger"in Number?Number.isInteger:O=>"number"===typeof O&&isFinite(O)&&Math.floor(O)===O)(),R=["integer","small-integer","single","double"],T=new Set([...R,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);(l.NumericRangeValidationError||(l.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(l.TypeValidationError||(l.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";
const W={min:-32768,max:32767,isInteger:!0},Z={min:-2147483648,max:2147483647,isInteger:!0},la={min:-3.4E38,max:1.2E38,isInteger:!1},ea={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};l.collectArcadeFieldNames=g;l.collectElevationFields=a;l.collectFeatureReductionFields=async function(O,U,ba){U&&ba&&"cluster"===ba.type&&ba.fields&&await w.all(ba.fields.map(ka=>h(O,U.fields,ka)))};l.collectField=q;l.collectFields=e;l.collectFilterFields=async function(O,U,ba){if(U&&ba&&(ba.where&&"1\x3d1"!==
ba.where||ba.timeExtent)&&(U.timeInfo&&ba.timeExtent&&e(O,U.fields,[U.timeInfo.startField,U.timeInfo.endField]),z.isSome(ba.where)&&ba.where)){ba=(await new Promise(function(ka,oa){n(["../../core/sql/WhereClause"],ka,oa)})).WhereClause.create(ba.where,U.fieldsIndex);if(!ba.isStandardized)throw new y("fieldUtils:collectFilterFields","Where clause is not standardized");e(O,U.fields,ba.fieldNames)}};l.collectLabelingFields=r;l.doubleRange=ea;l.featureHasFields=function(O,U){return!K(O,U,null)};l.fixFields=
c;l.fixRendererFields=function(O,U){if(null!=O&&null!=U)for(const ba of Array.isArray(O)?O:[O])if(m(L,ba,U),"visualVariables"in ba&&ba.visualVariables)for(const ka of ba.visualVariables)m(I,ka,U)};l.fixTimeInfoFields=function(O,U){if(null!=O&&null!=U)if("startField"in O){var ba=d(U,O.startField);U=d(U,O.endField);O.startField=ba&&ba.name||null;O.endField=U&&U.name||null}else ba=d(U,O.startTimeField),U=d(U,O.endTimeField),O.startTimeField=ba&&ba.name||null,O.endTimeField=U&&U.name||null};l.getDisplayFieldName=
function({displayField:O,fields:U}){if(O)return O;if(!U||!U.length)return null;if(!(O=b(U,"name-or-title")||b(U,"unique-identifier")||b(U,"type-or-category")))a:{for(const ba of U)if(ba&&ba.name&&(U=ba.name.toLowerCase(),-1<U.indexOf("name")||-1<U.indexOf("title"))){O=ba.name;break a}O=null}return O};l.getElevationFields=async function(O){if(!O)return[];const U=new Set;await a(U,O);return Array.from(U).sort()};l.getExpressionFields=async function(O,U){const ba=new Set;for(const ka of U)await g(ba,
O.fields,ka);return Array.from(ba).sort()};l.getFeatureEditFields=function(O){if(!O)return[];const U="editFieldsInfo"in O&&O.editFieldsInfo;return U?c(O.fields,[U&&U.creatorField,U&&U.creationDateField,U&&U.editorField,U&&U.editDateField]):[]};l.getFeatureGeometryFields=function(O){if(!O)return[];const U="geometryProperties"in O&&O.geometryProperties;return U?c(O.fields,[U&&U.shapeAreaFieldName,U&&U.shapeLengthFieldName]):[]};l.getField=d;l.getFieldDefaultValue=function(O){const U=O.defaultValue;
if(void 0!==U&&C(O,U))return U;if(O.nullable)return null};l.getFieldRange=function(O){const U=f.getDomainRange(O.domain);if(U)return U;if(E(O))return J(O.type)};l.getLabelingFields=async function(O){if(!O)return[];const U=new Set;await r(U,O);return Array.from(U).sort()};l.getNumericTypeForValue=function(O){if(!v(O))return null;if(P(O)){if(O>=W.min&&O<=W.max)return"esriFieldTypeSmallInteger";if(O>=Z.min&&O<=Z.max)return"esriFieldTypeInteger"}return O>=la.min&&O<=la.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};
l.getTimeFields=async function(O){if(!O)return[];const U="timeInfo"in O&&O.timeInfo;return U?c(O.fields,[O.trackIdField,U.startField,U.endField]):[]};l.hasField=function(O,U){if(!O||!U||"string"!==typeof U)return!1;U=U.toLowerCase();for(const ba of O)if(ba&&ba.name.toLowerCase()===U)return!0;return!1};l.integerRange=Z;l.isDateField=function(O){return null!=O&&("date"===O.type||"esriFieldTypeDate"===O.type)};l.isNumberInRange=G;l.isNumericField=E;l.isStringField=function(O){return null!=O&&("string"===
O.type||"esriFieldTypeString"===O.type)};l.isValidFieldValue=function(O,U){return null===F(O,U)};l.isValueMatchingFieldType=C;l.numericTypes=R;l.packFields=function(O,U,ba=1){if(!U||!O)return[];if(U.includes("*"))return["*"];U=c(O,U);return U.length/O.length>=ba?["*"]:U};l.populateMissingFields=K;l.rendererFields=L;l.sanitizeNullFieldValue=function(O){return null==O||"number"===typeof O&&isNaN(O)?null:O};l.singleRange=la;l.smallIntegerRange=W;l.unpackFieldNames=function(O,U){return z.isNone(U)||z.isNone(O)?
[]:U.includes("*")?O.map(ba=>ba.name):U};l.validateFieldValue=F;l.validationErrorToString=function(O,U,ba){switch(O){case f.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ba} is not in the coded domain - field: ${U.name}, domain: ${JSON.stringify(U.domain)}`;case f.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ba} is out of the range of valid values - field: ${U.name}, domain: ${JSON.stringify(U.domain)}`;case l.TypeValidationError.INVALID_TYPE:return`Value ${ba} is not a valid value for the field type - field: ${U.name}, type: ${U.type}, nullable: ${U.nullable}`;
case l.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ka,max:oa}=J(U.type);return`Value ${ba} is out of range for the number type - field: ${U.name}, type: ${U.type}, value range is ${ka} to ${oa}`}}};l.visualVariableFields=I;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),function(n,l,p,z,y,w){function f(k,m){switch(k.type){case "range":{const c=
"range"in k?k.range[1]:k.maxValue;if(+m<("range"in k?k.range[0]:k.minValue)||+m>c)return n.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==k.codedValues||k.codedValues.every(c=>null==c||c.code!==m))return n.DomainValidationError.INVALID_CODED_VALUE}return null}(function(k){k.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";k.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n.DomainValidationError||(n.DomainValidationError=
{}));l={key:"type",base:p,typeMap:{range:w,"coded-value":z,inherited:y}};n.DomainBase=p;n.CodedValueDomain=z;n.InheritedDomain=y;n.RangeDomain=w;n.fromJSON=function(k){if(!k||!k.type)return null;switch(k.type){case "range":return w.fromJSON(k);case "codedValue":return z.fromJSON(k);case "inherited":return y.fromJSON(k)}return null};n.getDomainRange=function(k){if(k&&"range"===k.type)return{min:"range"in k?k.range[0]:k.minValue,max:"range"in k?k.range[1]:k.maxValue}};n.isValidDomainValue=function(k,
m){return null===f(k,m)};n.types=l;n.validateDomainValue=f;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=new f.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});d=function(g){function b(a){a=g.call(this,a)||this;a.name=null;a.type=null;return a}n._inheritsLoose(b,g);return b}(d.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);l.__decorate([k.enumeration(p)],d.prototype,"type",void 0);return d=l.__decorate([m.subclass("esri.layers.support.Domain")],d)})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;p=b=function(a){function h(t){t=a.call(this,t)||this;t.codedValues=null;t.type="coded-value";return t}n._inheritsLoose(h,a);var r=h.prototype;r.getName=function(t){let v=null;if(this.codedValues){const x=String(t);this.codedValues.some(u=>{String(u.code)===x&&(v=u.name);return!!v})}return v};r.clone=function(){return new b({codedValues:z.clone(this.codedValues),name:this.name})};return h}(g);l.__decorate([f.property({type:[d["default"]],json:{write:!0}})],
p.prototype,"codedValues",void 0);l.__decorate([k.enumeration({codedValue:"coded-value"})],p.prototype,"type",void 0);return p=b=l.__decorate([m.subclass("esri.layers.support.CodedValueDomain")],p)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.CodedValue=g=function(b){function a(h){h=b.call(this,h)||this;h.name=null;h.code=null;return h}l._inheritsLoose(a,b);a.prototype.clone=function(){return new g({name:this.name,code:this.code})};return a}(d.JSONSupport);p.__decorate([f.property({type:String,json:{write:!0}})],n.CodedValue.prototype,"name",void 0);p.__decorate([f.property({type:[String,Number],json:{write:!0}})],n.CodedValue.prototype,"code",void 0);n.CodedValue=g=p.__decorate([m.subclass("esri.layers.support.CodedValue")],
n.CodedValue);n.default=n.CodedValue;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.type="inherited";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d};return b}(q);l.__decorate([f.enumeration({inherited:"inherited"})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.layers.support.InheritedDomain")],p)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.maxValue=null;a.minValue=null;a.type="range";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return b}(q);l.__decorate([w.property({type:Number,json:{type:[Number],read:{source:"range",reader(g,b){return b.range&&b.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(g,b,a){b[a]=[this.minValue||0,g]}}}})],p.prototype,"maxValue",void 0);l.__decorate([w.property({type:Number,json:{type:[Number],read:{source:"range",reader(g,b){return b.range&&b.range[0]}},write:{target:"range",writer(g,b,a){b[a]=[g,this.maxValue||0]}}}})],p.prototype,"minValue",void 0);l.__decorate([f.enumeration({range:"range"})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.layers.support.RangeDomain")],p)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.enabled=!0;a.type=null;return a}n._inheritsLoose(b,g);b.prototype.writeEnabled=function(a,h,r){a||(h[r]=a)};return b}(d.JSONSupport);l.__decorate([w.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p.prototype,"enabled",void 0);l.__decorate([m.writer("enabled")],p.prototype,"writeEnabled",null);l.__decorate([w.property({type:"icon object line path fill water extrude text".split(" "),
readOnly:!0})],p.prototype,"type",void 0);return p=l.__decorate([k.subclass("esri.symbols.Symbol3DLayer")],p)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(t){t=h.call(this,t)||this;t.type="extrude";t.size=1;t.material=null;t.castShadows=!0;t.edges=null;return t}n._inheritsLoose(r,h);r.prototype.clone=function(){return new a({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};return r}(d);l.__decorate([k.enumeration({Extrude:"extrude"},{readOnly:!0})],p.prototype,"type",
void 0);l.__decorate([f.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],p.prototype,"size",void 0);l.__decorate([f.property({type:b["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],p.prototype,"castShadows",void 0);l.__decorate([f.property(g.symbol3dEdgesProperty)],p.prototype,"edges",void 0);return p=a=l.__decorate([m.subclass("esri.symbols.ExtrudeSymbol3DLayer")],p)})},
"esri/symbols/edges/utils":function(){define(["exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(n,l,p,z){n.symbol3dEdgesProperty={types:{key:"type",base:l,typeMap:{solid:z,sketch:p}},json:{write:!0}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ../../core/screenUtils ../support/materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){p=function(h){function r(v){v=h.call(this,v)||this;v.color=new g([0,0,0,1]);v.extensionLength=0;v.size=b.px2pt(1);return v}n._inheritsLoose(r,h);var t=r.prototype;t.clone=function(){};t.cloneProperties=function(){return{color:z.clone(this.color),size:this.size,extensionLength:this.extensionLength}};return r}(d.JSONSupport);l.__decorate([f.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],p.prototype,"type",void 0);l.__decorate([f.property(a.colorAndTransparencyProperty)],
p.prototype,"color",void 0);l.__decorate([f.property({...a.screenSizeProperty,json:{write:{overridePolicy(h){return{enabled:!!h}}}}})],p.prototype,"extensionLength",void 0);l.__decorate([f.property(a.screenSizeProperty)],p.prototype,"size",void 0);return p=l.__decorate([m.subclass("esri.symbols.edges.Edges3D")],p)})},"esri/symbols/support/materialUtils":function(){define(["exports","../../core/accessorSupport/ensureType","../../Color","../../core/screenUtils","../../webdoc/support/opacityUtils"],
function(n,l,p,z,y){const w={type:Number,cast:z.toPt,json:{write:!0}},f={type:[Number],cast(k){return null!=k?k:Array.isArray(k)?k.map(z.toPt):null},json:{read:!1,write:!1}};n.colorAndTransparencyProperty={type:p,json:{type:[l.Integer],default:null,read:{source:["color","transparency"],reader:function(k,m){k=null!=m.transparency?y.transparencyToOpacity(m.transparency):1;return(m=m.color)&&Array.isArray(m)?new p([m[0]||0,m[1]||0,m[2]||0,k]):null}},write:{target:{color:{type:[l.Integer]},transparency:{type:l.Integer}},
writer:function(k,m){m.color=k.toJSON().slice(0,3);k=y.opacityToTransparency(k.a);0!==k&&(m.transparency=k)}}}};n.screenSizeProperty=w;n.stipplePatternProperty=f;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(n,l){n.opacityToTransparency=function(p){p=l.ensureInteger(100*(1-p));return Math.max(0,Math.min(p,100))};n.transparencyToOpacity=function(p){return Math.max(0,Math.min(1-p/
100,1))};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Edges3D".split(" "),function(n,l,
p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.type="sketch";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d(this.cloneProperties())};return b}(q);l.__decorate([f.enumeration({sketch:"sketch"},{readOnly:!0})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.symbols.edges.SketchEdges3D")],p)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Edges3D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.type="solid";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d(this.cloneProperties())};return b}(q);l.__decorate([f.enumeration({solid:"solid"},{readOnly:!0})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.symbols.support.SolidEdges3D")],p)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;n.Symbol3DMaterial=a=function(h){function r(){var t=h.apply(this,arguments)||this;t.color=null;return t}l._inheritsLoose(r,h);r.prototype.clone=function(){return new a({color:y.isSome(this.color)?this.color.clone():null})};return r}(g.JSONSupport);p.__decorate([k.property(b.colorAndTransparencyProperty)],n.Symbol3DMaterial.prototype,"color",void 0);n.Symbol3DMaterial=a=p.__decorate([c.subclass("esri.symbols.support.Symbol3DMaterial")],n.Symbol3DMaterial);
n.default=n.Symbol3DMaterial;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./LineSymbol ./LineSymbolMarker".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;p=new k.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});b=h=function(r){function t(...x){x=r.call(this,...x)||this;
x.type="simple-line";x.style="solid";x.cap="round";x.join="round";x.marker=null;x.miterLimit=2;return x}n._inheritsLoose(t,r);var v=t.prototype;v.normalizeCtorArgs=function(x,u,D,B,A,C){if(x&&"string"!==typeof x)return x;const E={};null!=x&&(E.style=x);null!=u&&(E.color=u);null!=D&&(E.width=g.toPt(D));null!=B&&(E.cap=B);null!=A&&(E.join=A);null!=C&&(E.miterLimit=g.toPt(C));return E};v.clone=function(){var x;return new h({color:z.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,
miterLimit:this.miterLimit,marker:null==(x=this.marker)?void 0:x.clone()})};v.hash=function(){var x,u;return`${r.prototype.hash.call(this)}.${null==(x=this.color)?void 0:x.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(u=this.marker)?void 0:u.hash()}`};return t}(b);l.__decorate([m.enumeration({esriSLS:"simple-line"},{readOnly:!0})],b.prototype,"type",void 0);l.__decorate([f.property({type:p.apiValues,json:{read:p.read,write:p.write}})],b.prototype,"style",void 0);l.__decorate([f.property({type:["butt",
"round","square"],json:{write:{overridePolicy:(r,t,v)=>({enabled:"round"!==r&&(null==v||null==v.origin)})}}})],b.prototype,"cap",void 0);l.__decorate([f.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(r,t,v)=>({enabled:"round"!==r&&(null==v||null==v.origin)})}}})],b.prototype,"join",void 0);l.__decorate([f.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":a}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],b.prototype,"marker",void 0);
l.__decorate([f.property({type:Number,json:{read:!1,write:!1}})],b.prototype,"miterLimit",void 0);return b=h=l.__decorate([c.subclass("esri.symbols.SimpleLineSymbol")],b)})},"esri/symbols/LineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ../core/screenUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.type="simple-line";a.width=.75;return a}n._inheritsLoose(b,g);b.prototype.hash=function(){return`${this.type}.${this.width}`};return b}(q);l.__decorate([f.enumeration({esriSLS:"simple-line"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([w.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"width",void 0);return p=l.__decorate([k.subclass("esri.symbols.LineSymbol")],p)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;p=h=function(r){function t(x){x=r.call(this,x)||this;x.placement="begin-end";x.type="line-marker";x.style="arrow";return x}n._inheritsLoose(t,r);var v=t.prototype;v.writeStyle=function(x,u,D,B){u[D]="web-map"===(null==B?void 0:B.origin)?"arrow":x};v.readColor=function(x){return x&&null!=x[0]?[x[0],x[1],x[2],x[3]/255]:x};v.writeColor=function(x,u,D,B){"web-map"!==(null==B?void 0:B.origin)&&(u[D]=x)};v.clone=function(){return new h({color:z.clone(this.color),
placement:this.placement,style:this.style})};v.hash=function(){var x;return`${this.placement}.${null==(x=this.color)?void 0:x.hash()}.${this.style}`};n._createClass(t,[{key:"color",set:function(x){this._set("color",x)}}]);return t}(b.JSONSupport);l.__decorate([f.property({type:["begin","end","begin-end"],json:{default:"begin-end",write:!0}})],p.prototype,"placement",void 0);l.__decorate([k.enumeration({"line-marker":"line-marker"},{readOnly:!0}),f.property({json:{origins:{"web-map":{write:!1}}}})],
p.prototype,"type",void 0);l.__decorate([f.property({type:"arrow circle square diamond cross x".split(" ")})],p.prototype,"style",void 0);l.__decorate([e.writer("style")],p.prototype,"writeStyle",null);l.__decorate([f.property({type:a,value:null,json:{write:{allowNull:!0}}})],p.prototype,"color",null);l.__decorate([m.reader("color")],p.prototype,"readColor",null);l.__decorate([e.writer("color")],p.prototype,"writeColor",null);return p=h=l.__decorate([c.subclass("esri.symbols.LineSymbolMarker")],p)})},
"esri/symbols/FillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ./SimpleLineSymbol".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.outline=null;a.type=null;return a}n._inheritsLoose(b,
g);b.prototype.hash=function(){return`${this.type}.${this.outline&&this.outline.hash()}`};return b}(q);l.__decorate([w.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d}},json:{default:null,write:!0}})],p.prototype,"outline",void 0);l.__decorate([w.property({type:["simple-fill","picture-fill"],readOnly:!0})],p.prototype,"type",void 0);return p=l.__decorate([k.subclass("esri.symbols.FillSymbol")],p)})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./edges/utils ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t){var v;p=v=function(x){function u(D){D=x.call(this,D)||this;D.type="fill";D.material=null;D.pattern=null;D.castShadows=!0;D.outline=null;D.edges=null;return D}n._inheritsLoose(u,x);u.prototype.clone=function(){return new v({edges:z.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,pattern:z.isSome(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:z.isSome(this.outline)?
this.outline.clone():null})};u.fromSimpleFillSymbol=function(D){return new v({material:{color:(D.color||h.transparentWhite).clone()},pattern:D.style&&"solid"!==D.style?new b({style:D.style}):null,outline:D.outline?new t["default"]({size:D.outline.width||0,color:(D.outline.color||h.white).clone()}):null})};return u}(d);l.__decorate([k.enumeration({Fill:"fill"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property({type:r["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([f.property(a.symbol3dPatternProperty)],
p.prototype,"pattern",void 0);l.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],p.prototype,"castShadows",void 0);l.__decorate([f.property({type:t["default"],json:{write:!0}})],p.prototype,"outline",void 0);l.__decorate([f.property(g.symbol3dEdgesProperty)],p.prototype,"edges",void 0);return p=v=l.__decorate([m.subclass("esri.symbols.FillSymbol3DLayer")],p)})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Pattern3D ./styles".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.type="style";h.style="solid";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({style:this.style})};return a}(q);l.__decorate([w.property({type:["style"]})],p.prototype,"type",void 0);l.__decorate([w.property({type:d,json:{read:!0,write:!0}})],p.prototype,"style",void 0);return p=g=l.__decorate([k.subclass("esri.symbols.patterns.StylePattern3D")],p)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(b){return d.call(this,b)||this}n._inheritsLoose(g,d);g.prototype.clone=function(){};return g}(q.JSONSupport);l.__decorate([w.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],p.prototype,"type",void 0);return p=l.__decorate([k.subclass("esri.symbols.patterns.Pattern3D")],p)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./Pattern3D","./StylePattern3D"],function(n,l,p){function z(y,w,f){if(!y)return y;switch(y.type){case "style":return w=new p,w.read(y,f),w}}l={types:{key:"type",base:l,typeMap:{style:p}},json:{read:z,write:!0}};n.read=z;n.symbol3dPatternProperty=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(n,l){const p=new l("white"),z=new l("black");l=new l([255,
255,255,0]);n.black=z;n.isBlack=function(y){return 0===y.r&&0===y.g&&0===y.b};n.transparentWhite=l;n.white=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Symbol3DMaterial".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;n.Symbol3DFillMaterial=b=function(a){function h(){return a.apply(this,arguments)||this}l._inheritsLoose(h,a);h.prototype.clone=function(){return new b({color:y.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};return h}(g["default"]);p.__decorate([m.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],n.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);n.Symbol3DFillMaterial=b=p.__decorate([c.subclass("esri.symbols.support.Symbol3DFillMaterial")],
n.Symbol3DFillMaterial);n.default=n.Symbol3DFillMaterial;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ../../core/screenUtils ./materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){var r;n.Symbol3DOutline=r=function(t){function v(){var x=t.apply(this,arguments)||this;x.color=new b([0,0,0,1]);x.size=a.px2pt(1);x.stipplePattern=null;x.stippleOffColor=null;return x}l._inheritsLoose(v,t);v.prototype.clone=function(){return new r({color:y.isSome(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};
return v}(g.JSONSupport);p.__decorate([k.property(h.colorAndTransparencyProperty)],n.Symbol3DOutline.prototype,"color",void 0);p.__decorate([k.property(h.screenSizeProperty)],n.Symbol3DOutline.prototype,"size",void 0);p.__decorate([k.property(h.stipplePatternProperty)],n.Symbol3DOutline.prototype,"stipplePattern",void 0);p.__decorate([k.property({type:b})],n.Symbol3DOutline.prototype,"stippleOffColor",void 0);n.Symbol3DOutline=r=p.__decorate([c.subclass("esri.symbols.support.Symbol3DOutline")],n.Symbol3DOutline);
n.default=n.Symbol3DOutline;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/Font":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../core/screenUtils".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;
p=g=function(b){function a(r){r=b.call(this,r)||this;r.decoration="none";r.family="sans-serif";r.size=9;r.style="normal";r.weight="normal";return r}n._inheritsLoose(a,b);var h=a.prototype;h.castSize=function(r){return d.toPt(r)};h.clone=function(){return new g({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};h.hash=function(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`};return a}(q.JSONSupport);l.__decorate([y.property({type:["underline",
"line-through","none"],json:{default:"none",write:!0}})],p.prototype,"decoration",void 0);l.__decorate([y.property({type:String,json:{write:!0}})],p.prototype,"family",void 0);l.__decorate([y.property({type:Number,json:{write:{overridePolicy(b,a,h){return{enabled:!h||!h.textSymbol3D}}}}})],p.prototype,"size",void 0);l.__decorate([w.cast("size")],p.prototype,"castSize",null);l.__decorate([y.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],p.prototype,"style",void 0);
l.__decorate([y.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],p.prototype,"weight",void 0);return p=g=l.__decorate([k.subclass("esri.symbols.Font")],p)})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DMaterial ./support/colors ./support/Symbol3DOutline ./support/IconSymbol3DLayerResource ./support/Symbol3DAnchorPosition2D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t){function v(A){const C="width"in A?A.width:A.size,E="height"in A?A.height:A.size,F=x(A.xoffset);A=x(A.yoffset);return(F||A)&&C&&E?{x:-F/C,y:A/E}:null}function x(A){return isFinite(A)?A:0}var u;const D=y.getLogger("esri.symbols.IconSymbol3DLayer");p=u=function(A){function C(E){E=A.call(this,E)||this;E.material=null;E.resource=null;E.type="icon";E.size=12;E.anchor="center";E.anchorPosition=void 0;E.outline=void 0;return E}n._inheritsLoose(C,A);C.prototype.clone=
function(){return new u({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,outline:z.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};C.fromSimpleMarkerSymbol=function(E){const F=E.color||a.white,G=v(E),J=E.outline&&0<E.outline.width?{size:E.outline.width,color:(E.outline.color||a.white).clone()}:null;var K=u,L=E.size;{E=E.style;
const I=B[E];I?E=I:(D.warn(`${E} cannot be mapped to Icon symbol. Fallback to "circle"`),E="circle")}return new K({size:L,resource:{primitive:E},material:{color:F},outline:J,anchor:G?"relative":void 0,anchorPosition:G})};C.fromPictureMarkerSymbol=function(E){const F=!E.color||a.isBlack(E.color)?a.white:E.color,G=v(E);return new u({size:E.width<=E.height?E.height:E.width,resource:{href:E.url},material:{color:F.clone()},anchor:G?"relative":void 0,anchorPosition:G})};C.fromCIMSymbol=function(E){return new u({resource:{href:c.makeData({mediaType:"application/json",
data:JSON.stringify(E.data)})}})};return C}(d);l.__decorate([f.property({type:b["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([f.property({type:r["default"],json:{write:!0}})],p.prototype,"resource",void 0);l.__decorate([k.enumeration({Icon:"icon"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property(g.screenSizeProperty)],p.prototype,"size",void 0);l.__decorate([k.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",
topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),f.property({json:{default:"center"}})],p.prototype,"anchor",void 0);l.__decorate([f.property({type:t.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:A=>new t.Symbol3DAnchorPosition2D({x:A[0],y:A[1]})},write:{writer:(A,C)=>{C.anchorPosition=[A.x,A.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],p.prototype,"anchorPosition",void 0);l.__decorate([f.property({type:h["default"],
json:{write:!0}})],p.prototype,"outline",void 0);p=u=l.__decorate([m.subclass("esri.symbols.IconSymbol3DLayer")],p);const B={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return p})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){var r;z=k.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});n.IconSymbol3DLayerResource=r=function(t){function v(u){return t.call(this,u)||this}l._inheritsLoose(v,t);var x=v.prototype;x.readHref=function(u,D,B){return u?a.fromJSON(u,B):D.dataURI};x.writeHref=function(u,D,B,A){u&&(d.isDataProtocol(u)?D.dataURI=u:(D.href=a.toJSON(u,A),d.isAbsolute(D.href)&&(D.href=d.normalize(D.href))))};x.clone=function(){return new r({href:this.href,
primitive:this.primitive})};return v}(h.JSONSupport);p.__decorate([f.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],n.IconSymbol3DLayerResource.prototype,"href",void 0);p.__decorate([c.reader("href")],n.IconSymbol3DLayerResource.prototype,"readHref",null);p.__decorate([q.writer("href",{href:{type:String},dataURI:{type:String}})],n.IconSymbol3DLayerResource.prototype,"writeHref",null);p.__decorate([m.enumeration(z)],n.IconSymbol3DLayerResource.prototype,"primitive",void 0);
n.IconSymbol3DLayerResource=r=p.__decorate([e.subclass("esri.symbols.support.IconSymbol3DLayerResource")],n.IconSymbol3DLayerResource);n.default=n.IconSymbol3DLayerResource;n.defaultPrimitive="circle";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(n,l,p){function z(d,g){var b=g&&g.url&&g.url.path;d&&b&&(d=p.makeAbsolute(d,b,{preserveProtocolRelative:!0}),g.portalItem&&g.readResourcePaths&&
(b=p.makeRelative(d,g.portalItem.itemUrl),e.test(b)&&g.readResourcePaths.push(g.portalItem.resourceFromPath(b).path)));return m(d,g&&g.portal)}function y(d,g){if(!d)return d;!p.isAbsolute(d)&&g&&g.blockedRelativeUrls&&g.blockedRelativeUrls.push(d);let b=p.makeAbsolute(d);if(g){var a=g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.rootPath||g.url&&g.url.path;a&&(a=m(a,g.portal),b=p.makeRelative(m(b,g.portal),a,a),b!==d&&g.verifyItemRelativeUrls&&g.verifyItemRelativeUrls.writtenUrls.push(b))}d=b;
b=(g=g&&g.portal)&&!g.isPortal&&g.urlKey&&g.customBaseUrl?p.changeDomain(d,`${g.urlKey}.${g.customBaseUrl}`,g.portalHostname):d;p.isAbsolute(b)&&(b=p.normalize(b));return b}function w(d,g,b){return z(d,b)}function f(d,g,b,a){d=y(d,a);void 0!==d&&(g[b]=d)}function k(d){d=l.isSome(d)?d.match(c):null;return l.isSome(d)?d[1]:null}function m(d,g){if(!g||g.isPortal||!g.urlKey||!g.customBaseUrl)return d;const b=`${g.urlKey}.${g.customBaseUrl}`;return p.hasSameOrigin(p.appUrl,`${p.appUrl.scheme}://${b}`)?
p.changeDomain(d,g.portalHostname,b):p.changeDomain(d,b,g.portalHostname)}const c=/\/items\/([^\/]+)\/resources\//,e=/^\.\/resources\//;var q=Object.freeze({__proto__:null,fromJSON:z,toJSON:y,read:w,write:f,itemIdFromResourceUrl:k});n.fromJSON=z;n.itemIdFromResourceUrl=k;n.persistableUrlUtils=q;n.read=w;n.toJSON=y;n.write=f})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.Symbol3DAnchorPosition2D=g=function(b){function a(){var h=b.apply(this,arguments)||this;h.x=0;h.y=0;return h}l._inheritsLoose(a,b);a.prototype.clone=function(){return new g({x:this.x,y:this.y})};return a}(d);p.__decorate([f.property({type:Number})],n.Symbol3DAnchorPosition2D.prototype,"x",void 0);p.__decorate([f.property({type:Number})],n.Symbol3DAnchorPosition2D.prototype,"y",void 0);n.Symbol3DAnchorPosition2D=g=p.__decorate([m.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],
n.Symbol3DAnchorPosition2D);n.default=n.Symbol3DAnchorPosition2D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol3DLayer ../core/screenUtils ./support/materialUtils ./support/Symbol3DMaterial ./support/colors".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){var t;p=t=function(v){function x(u){u=v.call(this,u)||this;u.material=null;u.type="line";u.join="miter";u.cap="butt";u.size=b.px2pt(1);u.stipplePattern=null;u.stippleOffColor=null;return u}n._inheritsLoose(x,v);x.prototype.clone=function(){return new t({enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?
this.stippleOffColor.clone():null})};x.fromSimpleLineSymbol=function(u){return new t({size:u.width||1,cap:u.cap||"butt",join:u.join||"miter",material:{color:(u.color||r.white).clone()}})};return x}(g);l.__decorate([f.property({type:h["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([k.enumeration({Line:"line"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],p.prototype,"join",void 0);l.__decorate([f.property({type:["butt",
"square","round"],json:{write:!0,default:"butt"}})],p.prototype,"cap",void 0);l.__decorate([f.property(a.screenSizeProperty)],p.prototype,"size",void 0);l.__decorate([f.property(a.stipplePatternProperty)],p.prototype,"stipplePattern",void 0);l.__decorate([f.property({type:d})],p.prototype,"stippleOffColor",void 0);return p=t=l.__decorate([m.subclass("esri.symbols.LineSymbol3DLayer")],p)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/Symbol3DMaterial ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;p=h=function(r){function t(v){v=r.call(this,v)||this;v.material=null;v.castShadows=!0;v.resource=null;v.type="object";v.width=void 0;v.height=void 0;v.depth=void 0;v.anchor=void 0;v.anchorPosition=void 0;v.heading=void 0;v.tilt=void 0;v.roll=void 0;return v}n._inheritsLoose(t,r);t.prototype.clone=function(){return new h({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),
depth:this.depth,enabled:this.enabled,height:this.height,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};n._createClass(t,[{key:"isPrimitive",get:function(){return!this.resource||"string"!==typeof this.resource.href}}]);return t}(d);l.__decorate([f.property({type:g["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,
default:!0}})],p.prototype,"castShadows",void 0);l.__decorate([f.property({type:b["default"],json:{write:!0}})],p.prototype,"resource",void 0);l.__decorate([k.enumeration({Object:"object"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"width",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"height",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"depth",void 0);l.__decorate([k.enumeration({center:"center",
top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),f.property({json:{default:"origin"}})],p.prototype,"anchor",void 0);l.__decorate([f.property({type:a.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:r=>new a.Symbol3DAnchorPosition3D({x:r[0],y:r[1],z:r[2]})},write:{writer:(r,t)=>{t.anchorPosition=[r.x,r.y,r.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],p.prototype,"anchorPosition",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,
"heading",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"tilt",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"roll",void 0);l.__decorate([f.property({readOnly:!0,dependsOn:["resource","resource.href"]})],p.prototype,"isPrimitive",null);return p=h=l.__decorate([m.subclass("esri.symbols.ObjectSymbol3DLayer")],p)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;z=k.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});n.ObjectSymbol3DLayerResource=a=function(h){function r(){return h.apply(this,arguments)||this}l._inheritsLoose(r,h);r.prototype.clone=function(){return new a({href:this.href,primitive:this.primitive})};return r}(b.JSONSupport);p.__decorate([f.property({type:String,json:{read:g.read,write:g.write}})],n.ObjectSymbol3DLayerResource.prototype,
"href",void 0);p.__decorate([m.enumeration(z)],n.ObjectSymbol3DLayerResource.prototype,"primitive",void 0);n.ObjectSymbol3DLayerResource=a=p.__decorate([c.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],n.ObjectSymbol3DLayerResource);n.default=n.ObjectSymbol3DLayerResource;n.defaultPrimitive="sphere";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.Symbol3DAnchorPosition3D=g=function(b){function a(){var h=b.apply(this,arguments)||this;h.x=0;h.y=0;h.z=0;return h}l._inheritsLoose(a,b);a.prototype.clone=function(){return new g({x:this.x,y:this.y,z:this.z})};return a}(d);p.__decorate([f.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,"x",void 0);p.__decorate([f.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,"y",void 0);p.__decorate([f.property({type:Number})],n.Symbol3DAnchorPosition3D.prototype,
"z",void 0);n.Symbol3DAnchorPosition3D=g=p.__decorate([m.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],n.Symbol3DAnchorPosition3D);n.default=n.Symbol3DAnchorPosition3D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(v){v=h.call(this,v)||this;v.material=null;v.castShadows=!0;v.type="path";v.profile="circle";v.join="miter";v.cap="butt";v.width=void 0;v.height=void 0;v.anchor="center";v.profileRotation="all";return v}n._inheritsLoose(r,h);var t=r.prototype;t.readSize=function(v,x){return x.height||x.width?v:x.size};t.clone=function(){return new a({enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,
size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};n._createClass(r,[{key:"size",get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(v){this.height=this.width=v}}]);return r}(g);l.__decorate([f.property({type:b["default"],json:{write:!0}})],p.prototype,"material",void 0);
l.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],p.prototype,"castShadows",void 0);l.__decorate([k.enumeration({Path:"path"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property({type:Number})],p.prototype,"size",null);l.__decorate([m.reader("size")],p.prototype,"readSize",null);l.__decorate([f.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],p.prototype,"profile",void 0);l.__decorate([f.property({type:["miter","bevel","round"],
json:{write:!0,default:"miter"}})],p.prototype,"join",void 0);l.__decorate([f.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],p.prototype,"cap",void 0);l.__decorate([f.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],p.prototype,"width",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"height",void 0);l.__decorate([f.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],
p.prototype,"anchor",void 0);l.__decorate([f.property({type:["heading","all"],json:{write:!0,default:"all"}})],p.prototype,"profileRotation",void 0);return p=a=l.__decorate([c.subclass("esri.symbols.PathSymbol3DLayer")],p)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DMaterial ./Font ./support/Symbol3DHalo".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t){var v;p=v=function(x){function u(B){B=x.call(this,B)||this;B._userSize=void 0;B.halo=null;B.material=null;B.text=void 0;B.type="text";return B}n._inheritsLoose(u,x);var D=u.prototype;D.writeFont=function(B,A,C,E){A.font=B.write({},{...E,textSymbol3D:!0});delete A.font.size};D.clone=function(){return new v({enabled:this.enabled,font:this.font&&z.clone(this.font),halo:this.halo&&z.clone(this.halo),material:y.isSome(this.material)?this.material.clone():
null,size:this.size,text:this.text})};u.fromTextSymbol=function(B){var A=B.haloColor;var C=B.haloSize;A=A&&0<C?{color:z.clone(A),size:C}:null;C=B.font?B.font.clone():new r;return new v({size:C.size,font:C,halo:A,material:B.color?{color:B.color.clone()}:null,text:B.text})};n._createClass(u,[{key:"font",get:function(){return this._get("font")||null},set:function(B){B&&this._userSize&&(B.size=this._userSize);this._set("font",B)}},{key:"size",get:function(){return null!=this._userSize?this._userSize:
this.font&&null!=this.font.size?this.font.size:9},set:function(B){this._userSize=B;this.font&&(this.font.size=this._userSize);this.notifyChange("size")}}]);return u}(b);l.__decorate([k.property({type:r,json:{write:!0}})],p.prototype,"font",null);l.__decorate([e.writer("font")],p.prototype,"writeFont",null);l.__decorate([k.property({type:t["default"],json:{write:!0}})],p.prototype,"halo",void 0);l.__decorate([k.property({type:h["default"],json:{write:!0}})],p.prototype,"material",void 0);l.__decorate([k.property(a.screenSizeProperty),
k.property({dependsOn:["font.size"]})],p.prototype,"size",null);l.__decorate([k.property({type:String,json:{write:!0}})],p.prototype,"text",void 0);l.__decorate([m.enumeration({Text:"text"},{readOnly:!0})],p.prototype,"type",void 0);return p=v=l.__decorate([c.subclass("esri.symbols.TextSymbol3DLayer")],p)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ./materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;n.Symbol3DHalo=h=function(r){function t(){var v=r.apply(this,arguments)||this;v.color=new b([0,0,0,1]);v.size=0;return v}l._inheritsLoose(t,r);t.prototype.clone=function(){return new h({color:y.clone(this.color),size:this.size})};return t}(g.JSONSupport);p.__decorate([k.property(a.colorAndTransparencyProperty)],n.Symbol3DHalo.prototype,"color",void 0);p.__decorate([k.property(a.screenSizeProperty)],n.Symbol3DHalo.prototype,"size",void 0);n.Symbol3DHalo=
h=p.__decorate([c.subclass("esri.symbols.support.Symbol3DHalo")],n.Symbol3DHalo);n.default=n.Symbol3DHalo;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol3DLayer".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;p=b=function(h){function r(t){t=h.call(this,t)||this;t.color=a.clone();t.type="water";t.waterbodySize="medium";t.waveDirection=null;t.waveStrength="moderate";return t}n._inheritsLoose(r,h);r.prototype.clone=function(){return new b({color:z.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};return r}(g);l.__decorate([f.property({type:d,nonNullable:!0,json:{type:[w.Integer],write:(h,r,t)=>
r[t]=h.toArray(1),default:()=>a.clone(),defaultEquals:h=>h.toCss(!0)===a.toCss(!0)}})],p.prototype,"color",void 0);l.__decorate([k.enumeration({Water:"water"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],p.prototype,"waterbodySize",void 0);l.__decorate([f.property({type:Number,json:{write:!0,default:null}})],p.prototype,"waveDirection",void 0);l.__decorate([f.property({type:["calm","rippled","slight","moderate"],
json:{write:!0,default:"moderate"}})],p.prototype,"waveStrength",void 0);p=b=l.__decorate([m.subclass("esri.symbols.WaterSymbol3DLayer")],p);const a=new d([0,119,190]);return p})},"esri/symbols/Symbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/Warning ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../chunks/persistableUrlUtils ../core/Collection ./Symbol ./Symbol3DLayer ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ../core/collectionUtils ../portal/Portal ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E,F,G,J){const K={icon:x,object:A,line:B,path:C,fill:v,extrude:t,text:E,water:F};p=a.ofType({base:r,key:"type",typeMap:K,errorContext:"symbol-layer"});const L=z.getLogger("esri.symbols.Symbol3D");z=function(I){function N(R){R=I.call(this,R)||this;R.styleOrigin=null;R.thumbnail=null;R.type=null;const T=R.__accessor__&&R.__accessor__.metadatas&&R.__accessor__.metadatas.symbolLayers;R._set("symbolLayers",new (T&&T.type||a));return R}n._inheritsLoose(N,
I);var P=N.prototype;P.readStyleOrigin=function(R,T,W){if(R.styleUrl&&R.name)return T=b.fromJSON(R.styleUrl,W),new G({styleUrl:T,name:R.name});if(R.styleName&&R.name)return new G({portal:W&&W.portal||D.getDefault(),styleName:R.styleName,name:R.name});W&&W.messages&&W.messages.push(new m("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:W,definition:R}))};P.writeStyleOrigin=function(R,T,W,Z){R.styleUrl&&R.name?(W=b.toJSON(R.styleUrl,
Z),q.isAbsolute(W)&&(W=q.normalize(W)),T.styleOrigin={styleUrl:W,name:R.name}):R.styleName&&R.name&&(R.portal&&Z&&Z.portal&&!q.hasSamePortal(R.portal.restUrl,Z.portal.restUrl)?Z&&Z.messages&&Z.messages.push(new m("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):T.styleOrigin={styleName:R.styleName,name:R.name})};P.normalizeCtorArgs=function(R){return R instanceof r||R&&K[R.type]?{symbolLayers:[R]}:
Array.isArray(R)?{symbolLayers:R}:R};n._createClass(N,[{key:"color",get:function(){return null},set:function(R){L.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(R){u.referenceSetter(R,this._get("symbolLayers"))}}]);return N}(h);l.__decorate([y.property({json:{read:!1,write:!1}})],z.prototype,"color",null);l.__decorate([y.property({type:p,nonNullable:!0,json:{write:!0}}),w.cast(u.castForReferenceSetter)],
z.prototype,"symbolLayers",null);l.__decorate([y.property({type:G})],z.prototype,"styleOrigin",void 0);l.__decorate([k.reader("styleOrigin")],z.prototype,"readStyleOrigin",null);l.__decorate([e.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],z.prototype,"writeStyleOrigin",null);l.__decorate([y.property({type:J["default"],json:{read:!1}})],z.prototype,"thumbnail",void 0);l.__decorate([y.property({type:["point-3d",
"line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],z.prototype,"type",void 0);return z=l.__decorate([c.subclass("esri.symbols.Symbol3D")],z)})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(n,l){n.castForReferenceSetter=function(p){return p};n.referenceSetter=function(p,z,y=l){z||(z=new y);if(z===p)return z;z.removeAll();p&&(Array.isArray(p)||"items"in p&&Array.isArray(p.items))?z.addMany(p):p&&z.add(p);return z};Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../config ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/promiseUtils ../core/JSONSupport ../geometry/Extent ../intl/locale ../kernel ../request ../intl ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E,F){function G(I){return Object.freeze({__proto__:null,"default":I})}var J;let K;const L={PortalGroup:()=>new Promise(function(I,N){n(["./PortalGroup"],function(P){I(G(P))},N)}),PortalItem:()=>new Promise(function(I,N){n(["./PortalItem"],function(P){I(G(P))},N)}),PortalUser:()=>new Promise(function(I,N){n(["./PortalUser"],function(P){I(G(P))},N)})};z=J=function(I){function N(R){R=I.call(this,R)||this;R.access=null;R.allSSL=!1;R.authMode=
"auto";R.authorizedCrossOriginDomains=null;R.basemapGalleryGroupQuery=null;R.bingKey=null;R.canListApps=!1;R.canListData=!1;R.canListPreProvisionedItems=!1;R.canProvisionDirectPurchase=!1;R.canSearchPublic=!0;R.canShareBingPublic=!1;R.canSharePublic=!1;R.canSignInArcGIS=!1;R.canSignInIDP=!1;R.colorSetsGroupQuery=null;R.commentsEnabled=!1;R.created=null;R.culture=null;R.customBaseUrl=null;R.defaultBasemap=null;R.defaultExtent=null;R.defaultVectorBasemap=null;R.description=null;R.eueiEnabled=null;R.featuredGroups=
null;R.featuredItemsGroupQuery=null;R.galleryTemplatesGroupQuery=null;R.livingAtlasGroupQuery=null;R.hasCategorySchema=!1;R.helperServices=null;R.homePageFeaturedContent=null;R.homePageFeaturedContentCount=null;R.httpPort=null;R.httpsPort=null;R.id=null;R.ipCntryCode=null;R.isPortal=!1;R.isReadOnly=!1;R.layerTemplatesGroupQuery=null;R.maxTokenExpirationMinutes=null;R.modified=null;R.name=null;R.portalHostname=null;R.portalMode=null;R.portalProperties=null;R.region=null;R.rotatorPanels=null;R.showHomePageDescription=
!1;R.sourceJSON=null;R.supportsHostedServices=!1;R.symbolSetsGroupQuery=null;R.templatesGroupQuery=null;R.units=null;R.url=w.portalUrl;R.urlKey=null;R.user=null;R.useStandardizedQuery=!1;R.useVectorBasemaps=!1;R.vectorBasemapGalleryGroupQuery=null;return R}l._inheritsLoose(N,I);var P=N.prototype;P.normalizeCtorArgs=function(R){return"string"===typeof R?{url:R}:R};P.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};P.readAuthorizedCrossOriginDomains=function(R){if(R)for(const T of R)-1===w.request.trustedServers.indexOf(T)&&w.request.trustedServers.push(T);return R};P.readDefaultBasemap=function(R){return R?(R=K.fromJSON(R),R.portalItem={portal:this},R):null};P.readDefaultVectorBasemap=function(R){return R?(R=K.fromJSON(R),R.portalItem={portal:this},R):null};P.readUrlKey=function(R){return R?R.toLowerCase():R};P.readUser=function(R){let T=null;R&&(T=F.fromJSON(R),T.portal=this);return T};P.load=function(R){const T=
(new Promise(function(W,Z){n(["../Basemap"],function(la){W(G(la))},Z)})).then(({default:W})=>{r.throwIfAborted(R);K=W}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,R)).then(W=>{if(u.id){const Z=u.id;this.credential=Z.findCredential(this.restUrl);this.credential||this.authMode!==J.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=Z.on("credential-create",()=>{Z.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=W;this.read(W)});this.addResolvingPromise(T);
return r.resolve(this)};P.createClosestFacilityTask=async function(){await this.load();const R=this._getHelperServiceUrl("closestFacility");return new (await new Promise(function(T,W){n(["../tasks/ClosestFacilityTask"],function(Z){T(G(Z))},W)})).default(R)};P.createElevationLayers=async function(){await this.load();const R=this._getHelperService("defaultElevationLayers"),T=(await new Promise(function(W,Z){n(["../layers/ElevationLayer"],function(la){W(G(la))},Z)})).default;return R?R.map(W=>new T({id:W.id,
url:W.url})):[]};P.createGeometryService=async function(){await this.load();const R=this._getHelperServiceUrl("geometry");return new (await new Promise(function(T,W){n(["../tasks/GeometryService"],function(Z){T(G(Z))},W)})).default({url:R})};P.createPrintTask=async function(){await this.load();const R=this._getHelperServiceUrl("printTask");return new (await new Promise(function(T,W){n(["../tasks/PrintTask"],function(Z){T(G(Z))},W)})).default(R)};P.createRouteTask=async function(){await this.load();
const R=this._getHelperServiceUrl("route");return new (await new Promise(function(T,W){n(["../tasks/RouteTask"],function(Z){T(G(Z))},W)})).default(R)};P.createServiceAreaTask=async function(){await this.load();const R=this._getHelperServiceUrl("serviceArea");return new (await new Promise(function(T,W){n(["../tasks/ServiceAreaTask"],function(Z){T(G(Z))},W)})).default(R)};P.fetchBasemaps=function(R,T){const W=new C;W.query=R||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);
W.disableExtraQuery=!0;return this.queryGroups(W,T).then(Z=>{W.num=100;W.query='type:"Web Map" -type:"Web Application"';return Z.total?(Z=Z.results[0],W.sortField=Z.sortField||"name",W.sortOrder=Z.sortOrder||"desc",Z.queryItems(W,T)):null}).then(Z=>Z&&Z.total?Z.results.filter(la=>"Web Map"===la.type).map(la=>new K({portalItem:la})):[])};P.fetchCategorySchema=function(R){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",R).then(T=>T.categorySchema):r.isAborted(R)?
r.reject(r.createAbortError()):r.resolve([])};P.fetchFeaturedGroups=function(R){const T=this.featuredGroups,W=new C;W.num=100;W.sortField="title";if(T&&T.length){const Z=[];for(const la of T)Z.push(`(title:"${la.title}" AND owner:${la.owner})`);W.query=Z.join(" OR ");return this.queryGroups(W,R).then(la=>la.results)}return r.isAborted(R)?r.reject(r.createAbortError()):r.resolve([])};P.fetchRegions=function(R){const T=this.user&&this.user.culture||this.culture||x.getLocale();return this._request(this.restUrl+
"/portals/regions",{...R,query:{culture:T}})};N.getDefault=function(){if(!J._default||J._default.destroyed)J._default=new J;return J._default};P.queryGroups=function(R,T){return this._queryPortal("/community/groups",R,"PortalGroup",T)};P.queryItems=function(R,T){return this._queryPortal("/search",R,"PortalItem",T)};P.queryUsers=function(R,T){R.sortField||(R.sortField="username");return this._queryPortal("/community/users",R,"PortalUser",T)};P.toJSON=function(){throw new g("internal:not-yet-implemented",
"Portal.toJSON is not yet implemented");};N.fromJSON=function(R){if(!R)return null;if(R.declaredClass)throw Error("JSON object is already hydrated");return new J({sourceJSON:R})};P._getHelperService=function(R){const T=this.helperServices&&this.helperServices[R];if(!T)throw new g("portal:service-not-found",`The \`helperServices\` do not include an entry named "${R}"`);return T};P._getHelperServiceUrl=function(R){const T=this._getHelperService(R);if(!T.url)throw new g("portal:service-url-not-found",
`The \`helperServices\` entry "${R}" does not include a \`url\` value`);return T.url};P._fetchSelf=function(R=this.authMode,T=!1,W){const Z=this.restUrl+"/portals/self";R={authMode:R,query:{culture:x.getLocale().toLowerCase()},...W};"auto"===R.authMode&&(R.authMode="no-prompt");T&&(R.query.default=!0);return this._request(Z,R)};P._queryPortal=function(R,T,W,Z){const la=m.ensureType(C,T),ea=O=>this._request(this.restUrl+R,{...la.toRequestOptions(this),...Z}).then(U=>{const ba=la.clone();ba.start=U.nextStart;
return new E({nextQueryParams:ba,queryParams:la,total:U.total,results:J._resultsToTypedArray(O,{portal:this},U,Z)})}).then(U=>r.all(U.results.map(ba=>"function"===typeof ba.when?ba.when():U)).then(()=>U,ba=>{r.throwIfAbortError(ba);return U}));return W&&L[W]?L[W]().then(({default:O})=>{r.throwIfAborted(Z);return ea(O)}):ea()};P._signIn=function(){if(this.authMode===J.AUTH_MODE_ANONYMOUS)return r.reject(new g("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return r.reject(this.loadError);
const R=T=>r.resolve().then(()=>{if("not-loaded"===this.loadStatus)return T||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=T;return this._fetchSelf("immediate")});if(this.user&&this.credential===T)return null;this.credential=T;return this._fetchSelf("immediate")}).then(W=>{W&&(this.sourceJSON=W,this.read(W))});return u.id?u.id.getCredential(this.restUrl).then(T=>R(T)):R(this.credential)};
P._normalizeSSL=function(R){return R.replace(/^http:/i,"https:").replace(":7080",":7443")};P._normalizeUrl=function(R){const T=this.credential&&this.credential.token;return this._normalizeSSL(T?R+(-1<R.indexOf("?")?"\x26":"?")+"token\x3d"+T:R)};P._requestToTypedArray=function(R,T,W){return this._request(R,T).then(Z=>{const la=J._resultsToTypedArray(W,{portal:this},Z);return r.all(la.map(ea=>"function"===typeof ea.when?ea.when():Z)).then(()=>la,()=>la)})};P._request=function(R,T={}){const W={f:"json",
...T.query},{authMode:Z=this.authMode===J.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:la=null,cacheBust:ea=!1,method:O="auto",responseType:U="json",signal:ba}=T;T={authMode:Z,body:la,cacheBust:ea,method:O,query:W,responseType:U,timeout:0,signal:ba};return D(this._normalizeSSL(R),T).then(ka=>ka.data)};N._resultsToTypedArray=function(R,T,W,Z){if(W){const la=f.isSome(Z)?Z.signal:null;W=W.listings||W.notifications||W.userInvitations||W.tags||W.items||W.groups||W.comments||W.provisions||W.results||W.relatedItems||
W;if(R||T)W=W.map(ea=>{ea=y.mixin(R?R.fromJSON(ea):ea,T);"function"===typeof ea.load&&ea.load(la);return ea})}else W=[];return W};l._createClass(N,[{key:"extraQuery",get:function(){const R=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!R?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let R=this.url;if(R){const T=R.indexOf("/sharing");R=0<T?R.substring(0,T):this.url.replace(/\/+$/,"");R+="/sharing/rest"}return R}},
{key:"thumbnailUrl",get:function(){const R=this.restUrl,T=this.thumbnail;return R&&T?this._normalizeSSL(R+"/portals/self/resources/"+T):null}}]);return N}(t.JSONSupportMixin(A));z.AUTH_MODE_ANONYMOUS="anonymous";z.AUTH_MODE_AUTO="auto";z.AUTH_MODE_IMMEDIATE="immediate";p.__decorate([c.property()],z.prototype,"access",void 0);p.__decorate([c.property()],z.prototype,"allSSL",void 0);p.__decorate([c.property()],z.prototype,"authMode",void 0);p.__decorate([c.property()],z.prototype,"authorizedCrossOriginDomains",
void 0);p.__decorate([q.reader("authorizedCrossOriginDomains")],z.prototype,"readAuthorizedCrossOriginDomains",null);p.__decorate([c.property()],z.prototype,"basemapGalleryGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"bingKey",void 0);p.__decorate([c.property()],z.prototype,"canListApps",void 0);p.__decorate([c.property()],z.prototype,"canListData",void 0);p.__decorate([c.property()],z.prototype,"canListPreProvisionedItems",void 0);p.__decorate([c.property()],z.prototype,"canProvisionDirectPurchase",
void 0);p.__decorate([c.property()],z.prototype,"canSearchPublic",void 0);p.__decorate([c.property()],z.prototype,"canShareBingPublic",void 0);p.__decorate([c.property()],z.prototype,"canSharePublic",void 0);p.__decorate([c.property()],z.prototype,"canSignInArcGIS",void 0);p.__decorate([c.property()],z.prototype,"canSignInIDP",void 0);p.__decorate([c.property()],z.prototype,"colorSetsGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"commentsEnabled",void 0);p.__decorate([c.property({type:Date})],
z.prototype,"created",void 0);p.__decorate([c.property()],z.prototype,"credential",void 0);p.__decorate([c.property()],z.prototype,"culture",void 0);p.__decorate([c.property()],z.prototype,"currentVersion",void 0);p.__decorate([c.property()],z.prototype,"customBaseUrl",void 0);p.__decorate([c.property()],z.prototype,"defaultBasemap",void 0);p.__decorate([q.reader("defaultBasemap")],z.prototype,"readDefaultBasemap",null);p.__decorate([c.property({type:v})],z.prototype,"defaultExtent",void 0);p.__decorate([c.property()],
z.prototype,"defaultVectorBasemap",void 0);p.__decorate([q.reader("defaultVectorBasemap")],z.prototype,"readDefaultVectorBasemap",null);p.__decorate([c.property()],z.prototype,"description",void 0);p.__decorate([c.property()],z.prototype,"eueiEnabled",void 0);p.__decorate([c.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],z.prototype,"extraQuery",null);p.__decorate([c.property()],z.prototype,"featuredGroups",void 0);p.__decorate([c.property()],z.prototype,"featuredItemsGroupQuery",
void 0);p.__decorate([c.property()],z.prototype,"galleryTemplatesGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"livingAtlasGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"hasCategorySchema",void 0);p.__decorate([c.property()],z.prototype,"helpBase",void 0);p.__decorate([c.property()],z.prototype,"helperServices",void 0);p.__decorate([c.property()],z.prototype,"helpMap",void 0);p.__decorate([c.property()],z.prototype,"homePageFeaturedContent",void 0);p.__decorate([c.property()],
z.prototype,"homePageFeaturedContentCount",void 0);p.__decorate([c.property()],z.prototype,"httpPort",void 0);p.__decorate([c.property()],z.prototype,"httpsPort",void 0);p.__decorate([c.property()],z.prototype,"id",void 0);p.__decorate([c.property()],z.prototype,"ipCntryCode",void 0);p.__decorate([c.property({dependsOn:["access"],readOnly:!0})],z.prototype,"isOrganization",null);p.__decorate([c.property()],z.prototype,"isPortal",void 0);p.__decorate([c.property()],z.prototype,"isReadOnly",void 0);
p.__decorate([c.property()],z.prototype,"layerTemplatesGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"maxTokenExpirationMinutes",void 0);p.__decorate([c.property({type:Date})],z.prototype,"modified",void 0);p.__decorate([c.property()],z.prototype,"name",void 0);p.__decorate([c.property()],z.prototype,"portalHostname",void 0);p.__decorate([c.property()],z.prototype,"portalMode",void 0);p.__decorate([c.property()],z.prototype,"portalProperties",void 0);p.__decorate([c.property()],z.prototype,
"region",void 0);p.__decorate([c.property({dependsOn:["url"],readOnly:!0})],z.prototype,"restUrl",null);p.__decorate([c.property()],z.prototype,"rotatorPanels",void 0);p.__decorate([c.property()],z.prototype,"showHomePageDescription",void 0);p.__decorate([c.property()],z.prototype,"sourceJSON",void 0);p.__decorate([c.property()],z.prototype,"staticImagesUrl",void 0);p.__decorate([c.property()],z.prototype,"stylesGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"supportsHostedServices",
void 0);p.__decorate([c.property()],z.prototype,"symbolSetsGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"templatesGroupQuery",void 0);p.__decorate([c.property()],z.prototype,"thumbnail",void 0);p.__decorate([c.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],z.prototype,"thumbnailUrl",null);p.__decorate([c.property()],z.prototype,"units",void 0);p.__decorate([c.property()],z.prototype,"url",void 0);p.__decorate([c.property()],z.prototype,"urlKey",void 0);p.__decorate([q.reader("urlKey")],
z.prototype,"readUrlKey",null);p.__decorate([c.property()],z.prototype,"user",void 0);p.__decorate([q.reader("user")],z.prototype,"readUser",null);p.__decorate([c.property()],z.prototype,"useStandardizedQuery",void 0);p.__decorate([c.property()],z.prototype,"useVectorBasemaps",void 0);p.__decorate([c.property()],z.prototype,"vectorBasemapGalleryGroupQuery",void 0);return z=J=p.__decorate([d.subclass("esri.portal.Portal")],z)})},"esri/intl/locale":function(){define(["exports","../core/global"],function(n,
l){function p(){var b,a;return null!=(b=null!=e?e:null==(a=l.navigator)?void 0:a.language)?b:"en"}function z(){void 0===c&&(c=p());return c}function y(){var b;const a=null!=(b=m)?b:p();c!==a&&(c=a,[...g].forEach(h=>{h.call(null,a)}),[...d].forEach(h=>{h.call(null,a)}))}var w,f,k;let m=void 0,c=void 0;const e=null!=(w=null==(f=l.esriConfig)?void 0:f.locale)?w:null==(k=l.dojoConfig)?void 0:k.locale,q={he:!0,ar:!0},d=[],g=[];null==l.addEventListener?void 0:l.addEventListener("languagechange",y);n.beforeLocaleChange=
function(b){g.push(b);return{remove(){d.splice(g.indexOf(b),1)}}};n.getDefaultLocale=p;n.getLocale=z;n.onLocaleChange=function(b){d.push(b);return{remove(){d.splice(d.indexOf(b),1)}}};n.prefersRTL=function(b=z()){b=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(b);b=null==b?void 0:b[1].toLowerCase();return void 0!==b&&(q[b]||!1)};n.setLocale=function(b){m=b?b:void 0;y()};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl":function(){define("exports ./intl/locale ./intl/date ./intl/number ./intl/substitute ./intl/messages ./intl/t9n ./assets".split(" "),
function(n,l,p,z,y,w,f,k){w.registerMessageBundleLoader(f.createJSONLoader({pattern:"esri/",location:k.getAssetUrl}));n.getLocale=l.getLocale;n.onLocaleChange=l.onLocaleChange;n.prefersRTL=l.prefersRTL;n.setLocale=l.setLocale;n.convertDateFormatToIntlOptions=p.convertDateFormatToIntlOptions;n.formatDate=p.formatDate;n.convertNumberFormatToIntlOptions=z.convertNumberFormatToIntlOptions;n.formatNumber=z.formatNumber;n.substitute=y.substitute;n.fetchMessageBundle=w.fetchMessageBundle;n.normalizeMessageBundleLocale=
w.normalizeMessageBundleLocale;n.registerMessageBundleLoader=w.registerMessageBundleLoader;n.createJSONLoader=f.createJSONLoader;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(n,l,p){function z(b){b=b||g;if(!d.has(b)){var a=p.getLocale();a=q[p.getLocale()]||a;d.set(b,new Intl.DateTimeFormat(a,b))}return d.get(b)}var y={year:"numeric",month:"numeric",day:"numeric"},w={year:"numeric",month:"long",day:"numeric"},
f={year:"numeric",month:"short",day:"numeric"};const k={year:"numeric",month:"long",weekday:"long",day:"numeric"},m={hour:"numeric",minute:"numeric"},c={...m,second:"numeric"},e={"short-date":y,"short-date-short-time":{...y,...m},"short-date-short-time-24":{...y,...m,hour12:!1},"short-date-long-time":{...y,...c},"short-date-long-time-24":{...y,...c,hour12:!1},"short-date-le":y,"short-date-le-short-time":{...y,...m},"short-date-le-short-time-24":{...y,...m,hour12:!1},"short-date-le-long-time":{...y,
...c},"short-date-le-long-time-24":{...y,...c,hour12:!1},"long-month-day-year":w,"long-month-day-year-short-time":{...w,...m},"long-month-day-year-short-time-24":{...w,...m,hour12:!1},"long-month-day-year-long-time":{...w,...c},"long-month-day-year-long-time-24":{...w,...c,hour12:!1},"day-short-month-year":f,"day-short-month-year-short-time":{...f,...m},"day-short-month-year-short-time-24":{...f,...m,hour12:!1},"day-short-month-year-long-time":{...f,...c},"day-short-month-year-long-time-24":{...f,
...c,hour12:!1},"long-date":k,"long-date-short-time":{...k,...m},"long-date-short-time-24":{...k,...m,hour12:!1},"long-date-long-time":{...k,...c},"long-date-long-time-24":{...k,...c,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":m,"long-time":c};l=l.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});y=l.apiValues;w=l.toJSON.bind(l);f=l.fromJSON.bind(l);const q={ar:"ar-u-nu-latn-ca-gregory"};let d=new WeakMap,g=e["short-date-short-time"];p.beforeLocaleChange(()=>{d=new WeakMap;g=e["short-date-short-time"]});n.convertDateFormatToIntlOptions=function(b){return e[b]||null};n.dateFormats=y;n.dictionary=l;n.formatDate=function(b,a){return z(a).format(b)};n.fromJSON=f;n.getDateTimeFormatter=z;n.toJSON=w;Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(n,l,p){function z(k){const m=k||f;if(!w.has(m)){var c=p.getLocale();c=y[p.getLocale()]||c;w.set(m,new Intl.NumberFormat(c,k))}return l.assumeNonNull(w.get(m))}const y={ar:"ar-u-nu-latn"};let w=new WeakMap,f={};p.beforeLocaleChange(()=>{w=new WeakMap;f={}});n.convertNumberFormatToIntlOptions=function(k={}){const m={};null!=k.digitSeparator&&(m.useGrouping=k.digitSeparator);null!=k.places&&(m.minimumFractionDigits=
m.maximumFractionDigits=k.places);return m};n.formatNumber=function(k,m){return z(m).format(k)};n.getFormatter=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/object ../core/string ../core/Logger ./date ./number".split(" "),function(n,l,p,z,y,w){function f(m){switch(typeof m){case "string":return m;case "number":return w.formatNumber(m);case "boolean":return""+m;default:return m instanceof Date?y.formatDate(m):""}}const k=z.getLogger("esri.intl");
n.substitute=function(m,c,e={}){const {format:q={}}=e;return p.replace(m,d=>{{const a=d.indexOf(":");if(-1===a)var g=d.trim();else{g=d.slice(0,a).trim();var b=d.slice(a+1).trim()}if(g)if(d=l.getDeepValue(g,c),null==d)b="";else if(g=q[b]||q[g])b:switch(g.type){case "date":b=y.formatDate(d,g.intlOptions);break b;case "number":b=w.formatNumber(d,g.intlOptions);break b;default:k.warn("missing format descriptor for key {key}"),b=f(d)}else if(b)b:switch(b.toLowerCase()){case "dateformat":b=y.formatDate(d);
break b;case "numberformat":b=w.formatNumber(d);break b;default:k.warn(`inline format is unsupported since 4.12: ${b}`),b=/^(dateformat|datestring)/i.test(b)?y.formatDate(d):/^numberformat/i.test(b)?w.formatNumber(d):f(d)}else b=f(d);else b=""}return b})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../core/Error","../core/promiseUtils","./locale"],function(n,l,p,z){async function y(d,g){const b=[];for(const a of m)if(w(a.pattern,d))try{return await a.fetchMessageBundle(d,
g)}catch(h){b.push(h)}if(b.length)throw new l("intl:message-bundle-error",`Errors occurred while loading "${d}"`,{errors:b});throw new l("intl:no-message-bundle-loader",`No loader found for message bundle "${d}"`);}function w(d,g){return"string"===typeof d?g.startsWith(d):d.test(g)}const f=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,k=new Set("ar bs ca cs da de el en es et fi fr he hi hr hu id it ja ko lt lv nb nl pl pt-BR pt-PT ro ru sk sl sr sv th tr uk vi zh-CN zh-HK zh-TW".split(" ")),m=[],c=new Map;
z.beforeLocaleChange(()=>{c.clear()});const e=new (function(){function d(){this._numLoading=0}var g=d.prototype;g.waitForAll=async function(){this._dfd&&await this._dfd.promise};g.add=function(b){this._increase();b.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};g._increase=function(){this._numLoading++;this._dfd||(this._dfd=p.createDeferred())};g._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=
null)};return d}()),q={cache:c,loaders:m};n.fetchMessageBundle=async function(d){const g=z.getLocale();c.has(d)||c.set(d,y(d,g));d=c.get(d);await e.add(d);return d};n.normalizeMessageBundleLocale=function(d){if(!f.test(d))return null;const [,g,b]=f.exec(d);d=g+(b?"-"+b.toUpperCase():"");return k.has(d)?d:k.has(g)?g:null};n.registerMessageBundleLoader=function(d){if(!m.includes(d)){for(const g of c.keys())w(d.pattern,g)&&c.delete(g);m.unshift(d)}};n.test=q;Object.defineProperty(n,"__esModule",{value:!0})})},
"esri/intl/t9n":function(){define("exports ../core/global ../core/maybe ../core/Error ./messages ../request".split(" "),function(n,l,p,z,y,w){async function f(e,q,d,g){var b=q.exec(d);if(!b)throw new z("esri-intl:invalid-bundle",`Bundle id "${d}" is not compatible with the pattern "${q}"`);q=b[1]?`${b[1]}/`:"";b=b[2];const a=y.normalizeMessageBundleLocale(g);g=`${q}${b}.json`;q=a?`${q}${b}_${a}.json`:g;let h;try{h=await k(e(q))}catch(r){if(q===g)throw r;try{h=await k(e(g))}catch{throw new z("intl:unknown-bundle",
`Bundle "${d}" cannot be loaded`,{error:r});}}return h}async function k(e){return p.isSome(c.fetchBundleAsset)?c.fetchBundleAsset(e):(await w(e,{responseType:"json"})).data}let m=function(){function e({base:q="",pattern:d,location:g=new URL(window.location.href)}){let b;b="string"===typeof g?a=>(new URL(a,new URL(g,l.location))).href:g instanceof URL?a=>(new URL(a,g)).href:g;this.pattern="string"===typeof d?new RegExp(`^${d}`):d;this.getAssetUrl=b;q=q?q.endsWith("/")?q:q+"/":"";this.matcher=new RegExp(`^${q}(?:(.*)\/)?(.*)$`)}
e.prototype.fetchMessageBundle=function(q,d){return f(this.getAssetUrl,this.matcher,q,d)};return e}();const c={};n.JSONLoader=m;n.createJSONLoader=function(e){return new m(e)};n.test=c;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./Warning ./accessorSupport/decorators/subclass ./Error ./promiseUtils ./Promise".split(" "),function(n,l,p,z,y,w,f,k){const m=c=>
{c=function(e){function q(...g){var b=e.call(this,...g)||this;b._loadController=null;b.loadError=null;b.loadStatus="not-loaded";b._set("loadWarnings",[]);b.addResolvingPromise(new Promise(a=>{const h=b.load.bind(n._assertThisInitialized(b));b.load=r=>{const t=new Promise((v,x)=>{const u=f.onAbortOrThrow(r,x);b.destroyed&&x(new w("load:instance-destroyed",`Instance of '${b.declaredClass||b.constructor.name}' is already destroyed`,{instance:n._assertThisInitialized(b)}));b._promiseProps.when(v,x).finally(()=>
{u&&u.remove()})});if("not-loaded"===b.loadStatus){b._set("loadStatus","loading");const v=b._loadController=f.createAbortController();h({signal:v.signal});f.onAbort(v.signal,()=>{b._promiseProps.abort()})}a();return t}}));b.when(()=>{b._set("loadStatus","loaded");b._loadController=null},a=>{b._set("loadStatus","failed");b._set("loadError",a);b._loadController=null});return b}n._inheritsLoose(q,e);var d=q.prototype;d.load=function(){return null};d.cancelLoad=function(){var g;if(this.isFulfilled())return this;
this._set("loadError",new w("load:cancelled","Cancelled"));null==(g=this._loadController)?void 0:g.abort();return this};n._createClass(q,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return q}(c);l.__decorate([p.property({readOnly:!0,dependsOn:["loadStatus"]})],c.prototype,"loaded",null);l.__decorate([p.property({readOnly:!0})],c.prototype,"loadError",void 0);l.__decorate([p.property()],c.prototype,"loadStatus",
void 0);l.__decorate([p.property({type:[z],readOnly:!0})],c.prototype,"loadWarnings",null);return c=l.__decorate([y.subclass("esri.core.Loadable")],c)};k=function(c){function e(){return c.apply(this,arguments)||this}n._inheritsLoose(e,c);return e}(m(k.EsriPromise));k=l.__decorate([y.subclass("esri.core.Loadable")],k);(function(c){c.LoadableMixin=m;c.isLoadable=function(e){return!(!e||!e.load)}})(k||(k={}));return k})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./maybe ./accessorSupport/decorators/subclass ./promiseUtils ./Accessor".split(" "),
function(n,l,p,z,y,w,f){let k=function(){function c(q){this.instance=q;this._resolver=w.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var e=c.prototype;e.addResolvingPromise=function(q){this._resolvingPromises.push(q);this._tryResolve()};e.isResolved=function(){return 1===this._status};e.isRejected=function(){return 2===this._status};e.isFulfilled=function(){return 0!==this._status};
e.abort=function(){this._resolver.reject(w.createAbortError())};e.when=function(q,d){return this._resolver.promise.then(q,d)};e._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};e._tryResolve=function(){if(!this.isFulfilled()){var q=w.createDeferred(),d=[...this._resolvingPromises,z.assumeNonNull(q.promise)],g=this._allPromise=w.all(d);g.then(()=>{this.isFulfilled()||this._allPromise!==g||this._resolver.resolve(this.instance)},b=>{this.isFulfilled()||this._allPromise!==
g||w.isAbortError(b)||this._resolver.reject(b)});q.resolve()}};return c}();const m=c=>{c=function(e){function q(...g){g=e.call(this,...g)||this;g._promiseProps=new k(l._assertThisInitialized(g));g.addResolvingPromise(w.resolve());return g}l._inheritsLoose(q,e);var d=q.prototype;d.isResolved=function(){return this._promiseProps.isResolved()};d.isRejected=function(){return this._promiseProps.isRejected()};d.isFulfilled=function(){return this._promiseProps.isFulfilled()};d.when=function(g,b){return w.create((a,
h)=>{this._promiseProps.when(a,h)}).then(g,b)};d.catch=function(g){return this.when(null,g)};d.addResolvingPromise=function(g){g&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in g?g.when():g)};return q}(c);return c=p.__decorate([y.subclass("esri.core.Promise")],c)};n.EsriPromise=function(c){function e(){return c.apply(this,arguments)||this}l._inheritsLoose(e,c);return e}(m(f));n.EsriPromise=p.__decorate([y.subclass("esri.core.Promise")],n.EsriPromise);n.EsriPromiseMixin=
m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/Accessor ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../geometry/Extent".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;const r=new k.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});p=h=function(t){function v(u){u=t.call(this,u)||this;u.categories=null;u.disableExtraQuery=!1;u.extent=null;u.num=10;u.query=null;u.sortField=null;u.start=1;return u}n._inheritsLoose(v,t);var x=v.prototype;x.clone=function(){return new h({categories:this.categories?z.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,
extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};x.toRequestOptions=function(u,D){let B;this.categories&&(B=this.categories.map(E=>Array.isArray(E)?JSON.stringify(E):E));let A;if(this.extent){var C=b.project(this.extent,g.WGS84);C&&(A=`${C.xmin},${C.ymin},${C.xmax},${C.ymax}`)}C=this.query;!this.disableExtraQuery&&u.extraQuery&&(C="("+C+")"+u.extraQuery);u={categories:B,bbox:A,q:C,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(u.sortField=this.sortField.split(",").map(E=>r.toJSON(E.trim())).join(","),u.sortOrder=this.sortOrder);return{query:{...D,...u}}};n._createClass(v,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(u){"asc"!==u&&"desc"!==u||this._set("sortOrder",u)}}]);return v}(d);l.__decorate([f.property()],p.prototype,"categories",void 0);l.__decorate([f.property()],p.prototype,"disableExtraQuery",void 0);l.__decorate([f.property({type:a})],
p.prototype,"extent",void 0);l.__decorate([f.property()],p.prototype,"num",void 0);l.__decorate([f.property()],p.prototype,"query",void 0);l.__decorate([f.property()],p.prototype,"sortField",void 0);l.__decorate([f.property()],p.prototype,"sortOrder",null);l.__decorate([f.property()],p.prototype,"start",void 0);return p=h=l.__decorate([m.subclass("esri.portal.PortalQueryParams")],p)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/Accessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(b){b=d.call(this,b)||this;b.nextQueryParams=null;b.queryParams=null;b.results=null;b.total=null;return b}n._inheritsLoose(g,d);return g}(q);l.__decorate([w.property()],p.prototype,"nextQueryParams",void 0);l.__decorate([w.property()],p.prototype,"queryParams",void 0);l.__decorate([w.property()],p.prototype,"results",void 0);l.__decorate([w.property()],p.prototype,"total",void 0);return p=l.__decorate([k.subclass("esri.portal.PortalQueryResult")],
p)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/promiseUtils ../core/JSONSupport ./PortalFolder ./PortalGroup".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){var r;z=r=function(t){function v(...u){u=
t.call(this,...u)||this;u.access=null;u.created=null;u.culture=null;u.description=null;u.email=null;u.fullName=null;u.modified=null;u.orgId=null;u.portal=null;u.preferredView=null;u.privileges=null;u.region=null;u.role=null;u.roleId=null;u.sourceJSON=null;u.units=null;u.username=null;u.userType=null;return u}l._inheritsLoose(v,t);var x=v.prototype;x.addItem=function(u){const D=u&&u.item;var B=u&&u.data;u=u&&u.folder;const A={method:"post"};D&&(A.query=D.createPostQuery(),null!=B&&("string"===typeof B?
A.query.text=B:"object"===typeof B&&(A.query.text=JSON.stringify(B))));B=this.userContentUrl;u&&(B+="/"+("string"===typeof u?u:u.id));return this.portal._request(B+"/addItem",A).then(C=>{D.id=C.id;D.portal=this.portal;return D.loaded?D.reload():D.load()})};x.deleteItem=function(u){let D=this.userContentUrl;u.ownerFolder&&(D+="/"+u.ownerFolder);return this.portal._request(D+`/items/${u.id}/delete`,{method:"post"}).then(()=>{u.id=null;u.portal=null})};x.deleteItems=function(u){const D=this.userContentUrl+
"/deleteItems";var B=u.map(A=>A.id);return B.length?(B={method:"post",query:{items:B.join(",")}},this.portal._request(D,B).then(()=>{u.forEach(A=>{A.id=null;A.portal=null})})):g.resolve(void 0)};x.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(u=>u&&u.folders?u.folders.map(D=>{D=a.fromJSON(D);D.portal=this.portal;return D}):[])};x.fetchGroups=function(){return this.portal._request(this.url).then(u=>u&&u.groups?u.groups.map(D=>{D=h.fromJSON(D);D.portal=
this.portal;return D}):[])};x.fetchItems=function(u){u||(u={});let D=this.userContentUrl;u.folder&&(D+="/"+u.folder.id);let B;return(new Promise(function(A,C){n(["./PortalItem"],function(E){A(Object.freeze({__proto__:null,"default":E}))},C)})).then(({default:A})=>{B=A;return this.portal._request(D,{query:{folders:!1,num:u.num||10,start:u.start||1,sortField:u.sortField||"created",sortOrder:u.sortOrder||"asc"}})}).then(A=>{let C;return A&&A.items?(C=A.items.map(E=>{E=B.fromJSON(E);E.portal=this.portal;
return E}),g.all(C.map(E=>E.load())).catch(E=>E).then(()=>({items:C,nextStart:A.nextStart,total:A.total}))):{items:[],nextStart:-1,total:0}})};x.fetchTags=function(){return this.portal._request(this.url+"/tags").then(u=>u.tags)};x.getThumbnailUrl=function(u){let D=this.thumbnailUrl;D&&u&&(D+=`&w=${u}`);return D};x.queryFavorites=function(u){return this.favGroupId?(this._favGroup||(this._favGroup=new h({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(u)):g.reject(new c("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))};x.toJSON=function(){throw new c("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};v.fromJSON=function(u){if(!u)return null;if(u.declaredClass)throw Error("JSON object is already hydrated");const D=new r;D.sourceJSON=u;D.read(u);return D};l._createClass(v,[{key:"thumbnailUrl",get:function(){const u=this.url,D=this.thumbnail;return u&&D?this.portal._normalizeUrl(`${u}/info/${D}?f=json`):null}},{key:"userContentUrl",
get:function(){const u=this.get("portal.restUrl");return u?`${u}/content/users/${this.username}`:null}},{key:"url",get:function(){const u=this.get("portal.restUrl");return u?`${u}/community/users/${this.username}`:null}}]);return v}(b.JSONSupport);p.__decorate([f.property()],z.prototype,"access",void 0);p.__decorate([f.property({type:Date})],z.prototype,"created",void 0);p.__decorate([f.property()],z.prototype,"culture",void 0);p.__decorate([f.property()],z.prototype,"description",void 0);p.__decorate([f.property()],
z.prototype,"email",void 0);p.__decorate([f.property()],z.prototype,"favGroupId",void 0);p.__decorate([f.property()],z.prototype,"fullName",void 0);p.__decorate([f.property({type:Date})],z.prototype,"modified",void 0);p.__decorate([f.property()],z.prototype,"orgId",void 0);p.__decorate([f.property()],z.prototype,"portal",void 0);p.__decorate([f.property()],z.prototype,"preferredView",void 0);p.__decorate([f.property()],z.prototype,"privileges",void 0);p.__decorate([f.property()],z.prototype,"region",
void 0);p.__decorate([f.property()],z.prototype,"role",void 0);p.__decorate([f.property()],z.prototype,"roleId",void 0);p.__decorate([f.property()],z.prototype,"sourceJSON",void 0);p.__decorate([f.property()],z.prototype,"thumbnail",void 0);p.__decorate([f.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],z.prototype,"thumbnailUrl",null);p.__decorate([f.property()],z.prototype,"units",void 0);p.__decorate([f.property({dependsOn:["portal.restUrl"],readOnly:!0})],z.prototype,
"userContentUrl",null);p.__decorate([f.property({dependsOn:["portal.restUrl"],readOnly:!0})],z.prototype,"url",null);p.__decorate([f.property()],z.prototype,"username",void 0);p.__decorate([f.property()],z.prototype,"userType",void 0);return z=r=p.__decorate([m.subclass("esri.portal.PortalUser")],z)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.created=null;a.id=null;a.portal=null;a.title=null;a.username=null;return a}n._inheritsLoose(b,g);b.prototype.toJSON=function(){throw new m("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};n._createClass(b,[{key:"url",get:function(){const a=this.get("portal.restUrl");return a?`${a}/content/users/${this.username}/${this.id}`:null}}]);return b}(d.JSONSupport);l.__decorate([w.property({type:Date})],
p.prototype,"created",void 0);l.__decorate([w.property()],p.prototype,"id",void 0);l.__decorate([w.property()],p.prototype,"portal",void 0);l.__decorate([w.property()],p.prototype,"title",void 0);l.__decorate([w.property({dependsOn:["portal.restUrl"],readOnly:!0})],p.prototype,"url",null);l.__decorate([w.property()],p.prototype,"username",void 0);return p=l.__decorate([k.subclass("esri.portal.PortalFolder")],p)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/JSONSupport ./PortalQueryParams".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){p=function(b){function a(r){r=b.call(this,r)||this;r.access=null;r.created=null;r.description=null;r.id=null;r.isInvitationOnly=!1;r.modified=null;r.owner=null;r.portal=null;r.snippet=null;r.sortField=null;r.sortOrder=null;r.tags=null;r.title=null;return r}n._inheritsLoose(a,b);var h=a.prototype;h.fetchCategorySchema=function(r){return this.portal._request(this.url+"/categorySchema",r).then(t=>{t=t.categorySchema||[];return t.some(v=>"contentCategorySetsGroupQuery.LivingAtlas"===
v.source)?this._fetchCategorySchemaSet("LivingAtlas",r):t})};h.fetchMembers=function(r){return this.portal._request(this.url+"/users",r)};h.getThumbnailUrl=function(r){let t=this.thumbnailUrl;t&&r&&(t+=`&w=${r}`);return t};h.toJSON=function(){throw new m("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};h.queryItems=function(r,t){r=y.ensureType(g,r);if(5<parseFloat(this.portal.currentVersion))return r=r||new g,this.portal._queryPortal(`/content/groups/${this.id}/search`,
r,"PortalItem",t);r=r?r.clone():new g;r.query="group:"+this.id+(r.query?" "+r.query:"");return this.portal.queryItems(r,t)};h._fetchCategorySchemaSet=function(r,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(v=>{if(v=v.contentCategorySetsGroupQuery){const x=new g;x.disableExtraQuery=!0;x.num=1;x.query=v;return this.portal.queryGroups(x,t)}throw new m("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(v=>{if(v.total){v=v.results[0];const x=
new g;x.num=1;x.query=`typekeywords:"${r}"`;return v.queryItems(x,t)}throw new m("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(v=>v.total?v.results[0].fetchData("json",t).then(x=>(x=x&&x.categorySchema)&&x.length?x:[]):[])};n._createClass(a,[{key:"thumbnailUrl",get:function(){const r=this.url,t=this.thumbnail;return r&&t?this.portal._normalizeUrl(`${r}/info/${t}?f=json`):null}},{key:"url",get:function(){const r=this.get("portal.restUrl");return r?r+"/community/groups/"+
this.id:null}}]);return a}(d.JSONSupport);l.__decorate([w.property()],p.prototype,"access",void 0);l.__decorate([w.property({type:Date})],p.prototype,"created",void 0);l.__decorate([w.property()],p.prototype,"description",void 0);l.__decorate([w.property()],p.prototype,"id",void 0);l.__decorate([w.property()],p.prototype,"isInvitationOnly",void 0);l.__decorate([w.property({type:Date})],p.prototype,"modified",void 0);l.__decorate([w.property()],p.prototype,"owner",void 0);l.__decorate([w.property()],
p.prototype,"portal",void 0);l.__decorate([w.property()],p.prototype,"snippet",void 0);l.__decorate([w.property()],p.prototype,"sortField",void 0);l.__decorate([w.property()],p.prototype,"sortOrder",void 0);l.__decorate([w.property()],p.prototype,"tags",void 0);l.__decorate([w.property()],p.prototype,"thumbnail",void 0);l.__decorate([w.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],p.prototype,"thumbnailUrl",null);l.__decorate([w.property()],p.prototype,"title",void 0);
l.__decorate([w.property({dependsOn:["portal.restUrl"],readOnly:!0})],p.prototype,"url",null);return p=l.__decorate([k.subclass("esri.portal.PortalGroup")],p)})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../portal/Portal".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(){var h=b.apply(this,arguments)||this;h.portal=null;return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return a}(q);l.__decorate([w.property({type:String})],p.prototype,"name",void 0);l.__decorate([w.property({type:String})],p.prototype,"styleUrl",void 0);l.__decorate([w.property({type:String})],p.prototype,"styleName",void 0);
l.__decorate([w.property({type:d})],p.prototype,"portal",void 0);return p=g=l.__decorate([k.subclass("esri.symbols.support.StyleOrigin")],p)})},"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.Thumbnail=g=function(b){function a(){return b.apply(this,arguments)||this}l._inheritsLoose(a,b);a.prototype.clone=function(){return new g({url:this.url})};return a}(d);p.__decorate([f.property({type:String})],n.Thumbnail.prototype,"url",void 0);n.Thumbnail=g=p.__decorate([m.subclass("esri.symbols.support.Thumbnail")],n.Thumbnail);n.default=n.Thumbnail;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/LineCallout3DBorder":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color ../symbols/support/materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;n.LineCallout3DBorder$2=h=function(r){function t(){var v=r.apply(this,arguments)||this;v.color=new b("white");return v}l._inheritsLoose(t,r);t.prototype.clone=function(){return new h({color:y.clone(this.color)})};return t}(g.JSONSupport);p.__decorate([k.property(a.colorAndTransparencyProperty)],n.LineCallout3DBorder$2.prototype,"color",void 0);n.LineCallout3DBorder$2=h=p.__decorate([c.subclass("esri.symbols.callouts.LineCallout3DBorder")],n.LineCallout3DBorder$2);
p=n.LineCallout3DBorder$2;z=Object.freeze({__proto__:null,get LineCallout3DBorder(){return n.LineCallout3DBorder$2},"default":p});n.LineCallout3DBorder=z;n.LineCallout3DBorder$1=p})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../core/screenUtils ../support/materialUtils ./Callout3D ../../chunks/LineCallout3DBorder".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){var t;p=t=function(v){function x(u){u=v.call(this,u)||this;u.type="line";u.color=new g([0,0,0,1]);u.size=b.px2pt(1);u.border=null;return u}n._inheritsLoose(x,v);x.prototype.clone=function(){return new t({color:z.clone(this.color),size:this.size,border:z.clone(this.border)})};n._createClass(x,[{key:"visible",get:function(){return 0<this.size&&y.isSome(this.color)&&0<this.color.a}}]);return x}(h);l.__decorate([m.enumeration({line:"line"},{readOnly:!0})],
p.prototype,"type",void 0);l.__decorate([k.property(a.colorAndTransparencyProperty)],p.prototype,"color",void 0);l.__decorate([k.property(a.screenSizeProperty)],p.prototype,"size",void 0);l.__decorate([k.property({type:r.LineCallout3DBorder$1,json:{write:!0}})],p.prototype,"border",void 0);l.__decorate([k.property({dependsOn:["size","color"],readOnly:!0})],p.prototype,"visible",null);return p=t=l.__decorate([c.subclass("esri.symbols.callouts.LineCallout3D")],p)})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(b){b=d.call(this,b)||this;b.visible=!0;return b}n._inheritsLoose(g,d);g.prototype.clone=function(){};return g}(q.JSONSupport);l.__decorate([w.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],p.prototype,"type",void 0);l.__decorate([w.property({readOnly:!0})],p.prototype,"visible",void 0);return p=l.__decorate([k.subclass("esri.symbols.callouts.Callout3D")],p)})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./materialUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;n.Symbol3DVerticalOffset=b=function(a){function h(){var r=a.apply(this,arguments)||this;r.screenLength=0;r.minWorldLength=0;return r}l._inheritsLoose(h,a);h.prototype.clone=function(){return new b({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return h}(d.JSONSupport);p.__decorate([f.property(g.screenSizeProperty)],n.Symbol3DVerticalOffset.prototype,"screenLength",void 0);p.__decorate([f.property({type:Number,
json:{write:!0,default:0}})],n.Symbol3DVerticalOffset.prototype,"minWorldLength",void 0);p.__decorate([f.property({type:Number,json:{write:!0}})],n.Symbol3DVerticalOffset.prototype,"maxWorldLength",void 0);n.Symbol3DVerticalOffset=b=p.__decorate([m.subclass("esri.symbols.support.Symbol3DVerticalOffset")],n.Symbol3DVerticalOffset);n.default=n.Symbol3DVerticalOffset;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./TextSymbol3DLayer ./Symbol3D ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){var r;const t=d.ofType({base:null,key:"type",typeMap:{text:g}});p=r=function(v){function x(D){D=v.call(this,D)||this;D.verticalOffset=null;D.callout=null;D.styleOrigin=null;D.symbolLayers=new t;D.type="label-3d";return D}n._inheritsLoose(x,v);var u=x.prototype;u.supportsCallout=function(){return!0};u.hasVisibleCallout=function(){return a.hasVisibleCallout(this)};u.hasVisibleVerticalOffset=function(){return a.hasVisibleVerticalOffset(this)};u.clone=function(){return new r({styleOrigin:z.clone(this.styleOrigin),
symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail),callout:z.clone(this.callout),verticalOffset:z.clone(this.verticalOffset)})};x.fromTextSymbol=function(D){return new r({symbolLayers:[g.fromTextSymbol(D)]})};return x}(b);l.__decorate([f.property({type:h["default"],json:{write:!0}})],p.prototype,"verticalOffset",void 0);l.__decorate([f.property(a.calloutProperty)],p.prototype,"callout",void 0);l.__decorate([f.property({json:{read:!1,write:!1}})],p.prototype,"styleOrigin",void 0);
l.__decorate([f.property({type:t})],p.prototype,"symbolLayers",void 0);l.__decorate([k.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],p.prototype,"type",void 0);return p=r=l.__decorate([m.subclass("esri.symbols.LabelSymbol3D")],p)})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(n,l,p){function z(y){if(!y)return!1;y=y.verticalOffset;return!y||0>=y.screenLength||0>=y.maxWorldLength?!1:!0}n.calloutProperty={types:{key:"type",base:l,
typeMap:{line:p}},json:{write:!0}};n.hasVisibleCallout=function(y){if(!y||!y.supportsCallout||!y.supportsCallout())return!1;const w=y.callout;return w&&w.visible?z(y)?!0:!1:!1};n.hasVisibleVerticalOffset=z;n.isCalloutSupport=function(y){return"point-3d"===y.type||"label-3d"===y.type};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;const r=d.ofType({base:null,key:"type",typeMap:{line:g,path:b}});p=d.ofType({base:null,key:"type",typeMap:{line:g,path:b}});a=h=function(t){function v(x){x=t.call(this,x)||this;x.symbolLayers=new r;x.type="line-3d";return x}n._inheritsLoose(v,t);v.prototype.clone=function(){return new h({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};v.fromSimpleLineSymbol=function(x){return new h({symbolLayers:[g.fromSimpleLineSymbol(x)]})};
return v}(a);l.__decorate([f.property({type:r,json:{type:p}})],a.prototype,"symbolLayers",void 0);l.__decorate([k.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],a.prototype,"type",void 0);return a=h=l.__decorate([m.subclass("esri.symbols.LineSymbol3D")],a)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ../core/screenUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.angle=0;a.type=null;a.xoffset=0;a.yoffset=0;a.size=9;return a}n._inheritsLoose(b,g);b.prototype.hash=function(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`};return b}(q);l.__decorate([w.property({type:Number,json:{read:g=>g&&-1*g,write:(g,b)=>b.angle=g&&-1*g}})],p.prototype,"angle",void 0);l.__decorate([w.property({type:["simple-marker","picture-marker"],readOnly:!0})],p.prototype,
"type",void 0);l.__decorate([w.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"xoffset",void 0);l.__decorate([w.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"yoffset",void 0);l.__decorate([w.property({type:Number,cast:g=>"auto"===g?g:d.toPt(g),json:{write:!0}})],p.prototype,"size",void 0);return p=l.__decorate([k.subclass("esri.symbols.MarkerSymbol")],p)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;const h=d.ofType({base:null,key:"type",typeMap:{fill:g}});p=a=function(r){function t(v){v=r.call(this,v)||this;v.symbolLayers=new h;v.type="mesh-3d";return v}n._inheritsLoose(t,r);t.prototype.clone=function(){return new a({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};return t}(b);l.__decorate([f.property({type:h})],p.prototype,"symbolLayers",void 0);l.__decorate([k.enumeration({MeshSymbol3D:"mesh-3d"},
{readOnly:!0})],p.prototype,"type",void 0);return p=a=l.__decorate([m.subclass("esri.symbols.MeshSymbol3D")],p)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(...v){v=h.call(this,...v)||this;v.type="picture-fill";v.url=null;v.xscale=1;v.yscale=1;v.width=12;v.height=12;v.xoffset=0;v.yoffset=0;v.source=null;return v}n._inheritsLoose(r,h);var t=r.prototype;t.normalizeCtorArgs=function(v,x,u,D){if(v&&"string"!==typeof v&&null==v.imageData)return v;const B={};v&&(B.url=v);x&&(B.outline=x);null!=u&&(B.width=d.toPt(u));null!=D&&(B.height=d.toPt(D));return B};t.clone=function(){const v=new a({color:z.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});v._set("source",z.clone(this.source));return v};t.hash=function(){var v;return`${h.prototype.hash.call(this)}.${null==(v=this.color)?void 0:v.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`};return r}(g);l.__decorate([k.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],
p.prototype,"type",void 0);l.__decorate([f.property(b.urlPropertyDefinition)],p.prototype,"url",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"xscale",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],p.prototype,"yscale",void 0);l.__decorate([f.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"width",void 0);l.__decorate([f.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"height",void 0);l.__decorate([f.property({type:Number,
cast:d.toPt,json:{write:!0}})],p.prototype,"xoffset",void 0);l.__decorate([f.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"yoffset",void 0);l.__decorate([f.property(b.sourcePropertyDefinition)],p.prototype,"source",void 0);return p=a=l.__decorate([m.subclass("esri.symbols.PictureFillSymbol")],p)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(n,l,p){function z(k,m,c){return m.imageData?l.makeData({mediaType:m.contentType||
"image/png",isBase64:!0,data:m.imageData}):y(m.url,c)}function y(k,m){return!m||"service"!==m.origin&&"portal-item"!==m.origin||!m.layer||"feature"!==m.layer.type&&"stream"!==m.layer.type||l.isAbsolute(k)||!m.layer.parsedUrl?p.fromJSON(k,m):l.join(m.layer.parsedUrl.path,"images",k)}function w(k,m,c,e){l.isDataProtocol(k)?(k=l.dataComponents(k),m.contentType=k.mediaType,m.imageData=k.data,c&&c.imageData===m.imageData&&c.url&&p.write(c.url,m,"url",e)):p.write(k,m,"url",e)}const f={json:{read:{source:["imageData",
"url"],reader:z},write:{writer(k,m,c,e){w(k,m,this.source,e)}}}};n.read=y;n.readImageDataOrUrl=z;n.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader(k,m,c){k={};m.imageData&&(k.imageData=m.imageData);m.contentType&&(k.contentType=m.contentType);m.url&&(k.url=y(m.url,c));return k}}}};n.urlPropertyDefinition=f;n.writeImageDataAndUrl=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;p=h=function(r){function t(...x){x=r.call(this,...x)||this;x.color=null;x.type="picture-marker";x.url=null;x.source=null;x.height=12;x.width=12;x.size=null;return x}n._inheritsLoose(t,r);var v=t.prototype;v.normalizeCtorArgs=function(x,u,D){if(x&&"string"!==typeof x&&null==x.imageData)return x;const B={};x&&(B.url=x);null!=u&&(B.width=g.toPt(u));null!=D&&(B.height=g.toPt(D));return B};v.readHeight=function(x,u){return u.size||x};v.readWidth=function(x,
u){return u.size||x};v.clone=function(){const x=new h({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});x._set("source",z.clone(this.source));return x};v.hash=function(){return`${r.prototype.hash.call(this)}.${this.height}.${this.url}.${this.width}`};return t}(b);l.__decorate([f.property({json:{write:!1}})],p.prototype,"color",void 0);l.__decorate([k.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([f.property(a.urlPropertyDefinition)],
p.prototype,"url",void 0);l.__decorate([f.property(a.sourcePropertyDefinition)],p.prototype,"source",void 0);l.__decorate([f.property({type:Number,cast:g.toPt,json:{write:!0}})],p.prototype,"height",void 0);l.__decorate([m.reader("height",["height","size"])],p.prototype,"readHeight",null);l.__decorate([f.property({type:Number,cast:g.toPt,json:{write:!0}})],p.prototype,"width",void 0);l.__decorate([f.property({json:{write:!1}})],p.prototype,"size",void 0);return p=h=l.__decorate([c.subclass("esri.symbols.PictureMarkerSymbol")],
p)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./TextSymbol3DLayer ./Symbol3D ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x){var u;const D=b.ofType({base:null,key:"type",typeMap:{icon:a,object:h,text:r}});p=b.ofType({base:null,key:"type",typeMap:{icon:a,object:h}});t=u=function(B){function A(E){E=B.call(this,E)||this;E.verticalOffset=null;E.callout=null;E.symbolLayers=new D;E.type="point-3d";return E}n._inheritsLoose(A,B);var C=A.prototype;C.writeSymbolLayers=function(E,F,G,J){const K=E.filter(L=>"text"!==L.type);J&&J.messages&&K.length<E.length&&(E=E.find(L=>"text"===
L.type),J.messages.push(new e("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:E})));F[G]=K.map(L=>L.write({},J)).toArray()};C.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const E of this.symbolLayers.items)switch(E.type){case "icon":case "text":case "object":continue;default:return!1}return!0};C.hasVisibleCallout=function(){return v.hasVisibleCallout(this)};C.hasVisibleVerticalOffset=function(){return v.hasVisibleVerticalOffset(this)};
C.clone=function(){return new u({verticalOffset:z.clone(this.verticalOffset),callout:z.clone(this.callout),styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};A.fromSimpleMarkerSymbol=function(E){return new u({symbolLayers:[a.fromSimpleMarkerSymbol(E)]})};A.fromPictureMarkerSymbol=function(E){return new u({symbolLayers:[a.fromPictureMarkerSymbol(E)]})};A.fromCIMSymbol=function(E){return new u({symbolLayers:[a.fromCIMSymbol(E)],callout:{type:"line",
size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})};A.fromTextSymbol=function(E){return new u({symbolLayers:[r.fromTextSymbol(E)]})};return A}(t);l.__decorate([f.property({type:x["default"],json:{write:!0}})],t.prototype,"verticalOffset",void 0);l.__decorate([f.property(v.calloutProperty)],t.prototype,"callout",void 0);l.__decorate([f.property({type:D,json:{type:p,origins:{"web-scene":{type:p}}}})],t.prototype,"symbolLayers",void 0);l.__decorate([c.writer("web-scene","symbolLayers")],t.prototype,
"writeSymbolLayers",null);l.__decorate([k.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],t.prototype,"type",void 0);return t=u=l.__decorate([m.subclass("esri.symbols.PointSymbol3D")],t)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./Symbol3D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B){var A;p=a.ofType({base:null,key:"type",typeMap:{extrude:h,fill:r,icon:t,line:v,object:x,text:u,water:D}});a=a.ofType({base:null,key:"type",typeMap:{extrude:h,fill:r,icon:t,line:v,object:x,water:D}});B=A=function(C){function E(G){G=C.call(this,G)||this;G.type="polygon-3d";return G}n._inheritsLoose(E,C);var F=E.prototype;F.writeSymbolLayers=function(G,J,K,L){const I=G.filter(N=>"text"!==N.type);L&&L.messages&&I.length<G.length&&(G=G.find(N=>
"text"===N.type),L.messages.push(new q("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:G})));J[K]=I.map(N=>N.write({},L)).toArray()};F.clone=function(){return new A({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};E.fromJSON=function(G){const J=new A;J.read(G);if(2===J.symbolLayers.length&&"fill"===J.symbolLayers.getItemAt(0).type&&"line"===J.symbolLayers.getItemAt(1).type){const K=
J.symbolLayers.getItemAt(0),L=J.symbolLayers.getItemAt(1);!L.enabled||G.symbolLayers&&G.symbolLayers[1]&&!1===G.symbolLayers[1].enable||(K.outline={size:L.size,color:y.isSome(L.material)?L.material.color:null});J.symbolLayers.removeAt(1)}return J};E.fromSimpleFillSymbol=function(G){return new A({symbolLayers:[r.fromSimpleFillSymbol(G)]})};return E}(B);l.__decorate([k.property({type:p,json:{type:a}})],B.prototype,"symbolLayers",void 0);l.__decorate([e.writer("web-scene","symbolLayers")],B.prototype,
"writeSymbolLayers",null);l.__decorate([m.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],B.prototype,"type",void 0);return B=A=l.__decorate([c.subclass("esri.symbols.PolygonSymbol3D")],B)})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./SimpleLineSymbol ./FillSymbol".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;p=new k.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});a=h=function(r){function t(...x){x=r.call(this,...x)||this;x.color=new g([0,0,0,.25]);x.outline=new b;x.type="simple-fill";x.style="solid";return x}n._inheritsLoose(t,r);var v=t.prototype;v.normalizeCtorArgs=
function(x,u,D){if(x&&"string"!==typeof x)return x;const B={};x&&(B.style=x);u&&(B.outline=u);D&&(B.color=D);return B};v.clone=function(){return new h({color:z.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};v.hash=function(){return`${r.prototype.hash.call(this)}${this.style}.${this.color&&this.color.hash()}`};return t}(a);l.__decorate([f.property()],a.prototype,"color",void 0);l.__decorate([f.property()],a.prototype,"outline",void 0);l.__decorate([m.enumeration({esriSFS:"simple-fill"},
{readOnly:!0})],a.prototype,"type",void 0);l.__decorate([f.property({type:p.apiValues,json:{read:p.read,write:p.write}})],a.prototype,"style",void 0);return a=h=l.__decorate([c.subclass("esri.symbols.SimpleFillSymbol")],a)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ../core/screenUtils ./SimpleLineSymbol ./MarkerSymbol".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){var t;p=new k.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});r=t=function(v){function x(...D){D=v.call(this,...D)||this;D.color=new b([255,255,255,.25]);D.type="simple-marker";D.size=12;D.style="circle";D.outline=new h;return D}n._inheritsLoose(x,v);var u=x.prototype;u.normalizeCtorArgs=function(D,B,A,C){if(D&&"string"!==typeof D)return D;
const E={};D&&(E.style=D);null!=B&&(E.size=a.toPt(B));A&&(E.outline=A);C&&(E.color=C);return E};u.writeColor=function(D,B){D&&"x"!==this.style&&"cross"!==this.style&&(B.color=D.toJSON());null===D&&(B.color=null)};u.clone=function(){return new t({angle:this.angle,color:z.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};u.hash=function(){var D;return`${v.prototype.hash.call(this)}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==
(D=this.outline)?void 0:D.hash()}`};n._createClass(x,[{key:"path",set:function(D){this.style="path";this._set("path",D)}}]);return x}(r);l.__decorate([f.property()],r.prototype,"color",void 0);l.__decorate([e.writer("color")],r.prototype,"writeColor",null);l.__decorate([m.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],r.prototype,"type",void 0);l.__decorate([f.property()],r.prototype,"size",void 0);l.__decorate([f.property({type:p.apiValues,json:{read:p.read,write:p.write}})],r.prototype,"style",
void 0);l.__decorate([f.property({type:String,json:{write:!0}})],r.prototype,"path",null);l.__decorate([f.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":h}},json:{default:null,write:!0}})],r.prototype,"outline",void 0);return r=t=l.__decorate([c.subclass("esri.symbols.SimpleMarkerSymbol")],r)})},"esri/symbols/TextSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol ../core/screenUtils ./Font".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){var r;p=r=function(t){function v(...u){u=t.call(this,...u)||this;u.backgroundColor=null;u.borderLineColor=null;u.borderLineSize=null;u.font=new h;u.horizontalAlignment="center";u.kerning=!0;u.haloColor=null;u.haloSize=null;u.rightToLeft=null;u.rotated=!1;u.text="";u.type="text";u.verticalAlignment=null;u.xoffset=0;u.yoffset=0;u.angle=0;u.width=null;u.lineWidth=192;u.lineHeight=1;return u}n._inheritsLoose(v,t);var x=v.prototype;x.normalizeCtorArgs=function(u,
D,B){if(u&&"string"!==typeof u)return u;const A={};u&&(A.text=u);D&&(A.font=D);B&&(A.color=B);return A};x.writeLineWidth=function(u,D,B,A){A&&"string"!==typeof A||(D[B]=u)};x.castLineWidth=function(u){return a.toPt(u)};x.writeLineHeight=function(u,D,B,A){A&&"string"!==typeof A||(D[B]=u)};x.clone=function(){return new r({angle:this.angle,backgroundColor:z.clone(this.backgroundColor),borderLineColor:z.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:z.clone(this.color),font:this.font&&
this.font.clone(),haloColor:z.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};x.hash=function(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&
this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`};return v}(b);l.__decorate([w.property({type:g,json:{write:!0}})],p.prototype,"backgroundColor",void 0);l.__decorate([w.property({type:g,json:{write:!0}})],p.prototype,"borderLineColor",void 0);l.__decorate([w.property({type:Number,
json:{write:!0}})],p.prototype,"borderLineSize",void 0);l.__decorate([w.property({type:h,json:{write:!0}})],p.prototype,"font",void 0);l.__decorate([w.property({type:["left","right","center","justify"],json:{write:!0}})],p.prototype,"horizontalAlignment",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"kerning",void 0);l.__decorate([w.property({type:g,json:{write:!0}})],p.prototype,"haloColor",void 0);l.__decorate([w.property({type:Number,cast:a.toPt,json:{write:!0}})],
p.prototype,"haloSize",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"rightToLeft",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"rotated",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"text",void 0);l.__decorate([k.enumeration({esriTS:"text"},{readOnly:!0})],p.prototype,"type",void 0);l.__decorate([w.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],p.prototype,"verticalAlignment",
void 0);l.__decorate([w.property({type:Number,cast:a.toPt,json:{write:!0}})],p.prototype,"xoffset",void 0);l.__decorate([w.property({type:Number,cast:a.toPt,json:{write:!0}})],p.prototype,"yoffset",void 0);l.__decorate([w.property({type:Number,json:{read:t=>t&&-1*t,write:(t,v)=>v.angle=t&&-1*t}})],p.prototype,"angle",void 0);l.__decorate([w.property({type:Number,json:{write:!0}})],p.prototype,"width",void 0);l.__decorate([w.property({type:Number})],p.prototype,"lineWidth",void 0);l.__decorate([c.writer("lineWidth")],
p.prototype,"writeLineWidth",null);l.__decorate([f.cast("lineWidth")],p.prototype,"castLineWidth",null);l.__decorate([w.property({type:Number})],p.prototype,"lineHeight",void 0);l.__decorate([c.writer("lineHeight")],p.prototype,"writeLineHeight",null);return p=r=l.__decorate([m.subclass("esri.symbols.TextSymbol")],p)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../chunks/persistableUrlUtils ../core/promiseUtils ./Symbol ../portal/Portal ./support/Thumbnail".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){function r(){return new Promise(function(x,u){n(["./support/styleUtils"],x,u)})}var t;const v=y.getLogger("esri.symbols.WebStyleSymbol");z=t=function(x){function u(B){B=x.call(this,B)||this;B.styleName=null;B.portal=null;B.styleUrl=null;B.thumbnail=null;B.name=null;B.type="web-style";return B}l._inheritsLoose(u,x);var D=u.prototype;D.read=function(B,A){this.portal=A?A.portal:void 0;x.prototype.read.call(this,B,A)};D.clone=function(){return new t({name:this.name,
styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};D.fetchSymbol=function(B){return this._fetchSymbol("webRef",B)};D.fetchCIMSymbol=function(B){return this._fetchSymbol("cimRef",B)};D._fetchSymbol=async function(B,A){const C=await r();g.throwIfAborted(A);B=C.resolveWebStyleSymbol(this,{portal:this.portal},B,A);B.catch(E=>{v.error("#fetchSymbol()","Failed to create symbol from style",E)});return B};return u}(b);p.__decorate([f.property({json:{write:!1}})],z.prototype,"color",void 0);
p.__decorate([f.property({type:String,json:{write:!0}})],z.prototype,"styleName",void 0);p.__decorate([f.property({type:a,json:{write:!1}})],z.prototype,"portal",void 0);p.__decorate([f.property({type:String,json:{read:d.read,write:d.write}})],z.prototype,"styleUrl",void 0);p.__decorate([f.property({type:h["default"],json:{read:!1}})],z.prototype,"thumbnail",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);p.__decorate([k.enumeration({styleSymbolReference:"web-style"},
{readOnly:!0})],z.prototype,"type",void 0);return z=t=p.__decorate([m.subclass("esri.symbols.WebStyleSymbol")],z)})},"esri/chunks/DataLayerSource":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/extensions/serializableProperty/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../layers/support/Field ../layers/support/source/MapLayerSource ../layers/support/source/QueryTableDataSource ../layers/support/source/RasterDataSource ../layers/support/source/TableDataSource".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u){function D(){C||(C=q.createTypeReader({types:B()}));return C}function B(){E||(E={key:"type",base:null,typeMap:{"data-layer":n.DataLayerSource,"map-layer":t.MapLayerSource}});return E}var A;z=m.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});n.JoinTableDataSource=A=function(G){function J(L){L=G.call(this,L)||this;L.type="join-table";return L}l._inheritsLoose(J,G);var K=J.prototype;K.readLeftTableSource=function(L,
I,N){return D()(L,I,N)};K.castLeftTableSource=function(L){return w.ensureOneOfType(B(),L)};K.readRightTableSource=function(L,I,N){return D()(L,I,N)};K.castRightTableSource=function(L){return w.ensureOneOfType(B(),L)};K.clone=function(){var L,I;const {leftTableKey:N,rightTableKey:P,leftTableSource:R,rightTableSource:T,joinType:W}=this,Z={leftTableKey:N,rightTableKey:P,leftTableSource:null!=(L=null==R?void 0:R.clone())?L:void 0,rightTableSource:null!=(I=null==T?void 0:T.clone())?I:void 0,joinType:W};
return new A(Z)};return J}(h.JSONSupport);p.__decorate([c.enumeration({joinTable:"join-table"})],n.JoinTableDataSource.prototype,"type",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.JoinTableDataSource.prototype,"leftTableKey",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.JoinTableDataSource.prototype,"rightTableKey",void 0);p.__decorate([f.property({json:{write:!0}})],n.JoinTableDataSource.prototype,"leftTableSource",void 0);p.__decorate([e.reader("leftTableSource")],
n.JoinTableDataSource.prototype,"readLeftTableSource",null);p.__decorate([k.cast("leftTableSource")],n.JoinTableDataSource.prototype,"castLeftTableSource",null);p.__decorate([f.property({json:{write:!0}})],n.JoinTableDataSource.prototype,"rightTableSource",void 0);p.__decorate([e.reader("rightTableSource")],n.JoinTableDataSource.prototype,"readRightTableSource",null);p.__decorate([k.cast("rightTableSource")],n.JoinTableDataSource.prototype,"castRightTableSource",null);p.__decorate([c.enumeration(z)],
n.JoinTableDataSource.prototype,"joinType",void 0);n.JoinTableDataSource=A=p.__decorate([d.subclass("esri.layers.support.source.JoinTableDataSource")],n.JoinTableDataSource);let C=null,E=null;var F;k={key:"type",base:null,typeMap:{"join-table":n.JoinTableDataSource,"query-table":v.QueryTableDataSource,raster:x.RasterDataSource,table:u.TableDataSource}};n.DataLayerSource=F=function(G){function J(K){K=G.call(this,K)||this;K.type="data-layer";return K}l._inheritsLoose(J,G);J.prototype.clone=function(){const {fields:K,
dataSource:L}=this;return new F({fields:K,dataSource:L})};return J}(h.JSONSupport);p.__decorate([c.enumeration({dataLayer:"data-layer"})],n.DataLayerSource.prototype,"type",void 0);p.__decorate([f.property({type:[r],json:{write:!0}})],n.DataLayerSource.prototype,"fields",void 0);p.__decorate([f.property({types:k,json:{write:!0}})],n.DataLayerSource.prototype,"dataSource",void 0);n.DataLayerSource=F=p.__decorate([d.subclass("esri.layers.support.source.DataLayerSource")],n.DataLayerSource);n.DataLayerSource.from=
w.ensureType(n.DataLayerSource)})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./domains ./fieldType".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;const r=new f.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});p=h=function(t){function v(u){u=t.call(this,
u)||this;u.alias=null;u.defaultValue=void 0;u.description=null;u.domain=null;u.editable=!0;u.length=-1;u.name=null;u.nullable=!0;u.type=null;u.valueType=null;return u}n._inheritsLoose(v,t);var x=v.prototype;x.readDescription=function(u,{description:D}){let B;try{B=JSON.parse(D)}catch(A){}return B?B.value:null};x.readValueType=function(u,{description:D}){let B;try{B=JSON.parse(D)}catch(A){}return B?r.fromJSON(B.fieldValueType):null};x.clone=function(){return new h({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return v}(g.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"alias",void 0);l.__decorate([w.property({type:[String,Number],json:{write:{allowNull:!0}}})],p.prototype,"defaultValue",void 0);l.__decorate([w.property()],p.prototype,"description",void 0);l.__decorate([m.reader("description")],
p.prototype,"readDescription",null);l.__decorate([w.property({types:b.types,json:{read:{reader:b.fromJSON},write:!0}})],p.prototype,"domain",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"editable",void 0);l.__decorate([w.property({type:y.Integer,json:{write:!0}})],p.prototype,"length",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"name",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"nullable",void 0);l.__decorate([k.enumeration(a.kebabDict)],
p.prototype,"type",void 0);l.__decorate([w.property()],p.prototype,"valueType",void 0);l.__decorate([m.reader("valueType",["description"])],p.prototype,"readValueType",null);return p=h=l.__decorate([c.subclass("esri.layers.support.Field")],p)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(n,l){l=new l.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",
esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});n.kebabDict=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.MapLayerSource=g=function(b){function a(h){h=b.call(this,h)||this;h.type="map-layer";return h}l._inheritsLoose(a,b);a.prototype.clone=function(){const {mapLayerId:h,gdbVersion:r}=this;return new g({mapLayerId:h,gdbVersion:r})};return a}(d.JSONSupport);p.__decorate([k.enumeration({mapLayer:"map-layer"})],n.MapLayerSource.prototype,"type",void 0);p.__decorate([f.property({type:w.Integer,json:{write:!0}})],n.MapLayerSource.prototype,"mapLayerId",void 0);p.__decorate([f.property({type:String,
json:{write:!0}})],n.MapLayerSource.prototype,"gdbVersion",void 0);n.MapLayerSource=g=p.__decorate([m.subclass("esri.layers.support.source.MapLayerSource")],n.MapLayerSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../geometry/SpatialReference ../../../geometry/support/typeUtils ../../../geometry".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;n.QueryTableDataSource=h=function(r){function t(v){v=r.call(this,v)||this;v.type="query-table";return v}l._inheritsLoose(t,r);t.prototype.clone=function(){var v;const {workspaceId:x,query:u,oidFields:D,spatialReference:B,geometryType:A}=this,C={workspaceId:x,query:u,oidFields:D,spatialReference:null!=(v=null==B?void 0:B.clone())?v:void 0,geometryType:A};return new h(C)};return t}(d.JSONSupport);p.__decorate([k.enumeration({queryTable:"query-table"})],
n.QueryTableDataSource.prototype,"type",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"workspaceId",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"query",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.QueryTableDataSource.prototype,"oidFields",void 0);p.__decorate([f.property({type:g,json:{write:!0}})],n.QueryTableDataSource.prototype,"spatialReference",void 0);p.__decorate([k.enumeration(b.featureGeometryTypeKebabDictionary)],
n.QueryTableDataSource.prototype,"geometryType",void 0);n.QueryTableDataSource=h=p.__decorate([m.subclass("esri.layers.support.source.QueryTableDataSource")],n.QueryTableDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.RasterDataSource=g=function(b){function a(h){h=b.call(this,h)||this;h.type="raster";return h}l._inheritsLoose(a,b);a.prototype.clone=function(){const {workspaceId:h,dataSourceName:r}=this;return new g({workspaceId:h,dataSourceName:r})};return a}(d.JSONSupport);p.__decorate([k.enumeration({raster:"raster"})],n.RasterDataSource.prototype,"type",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.RasterDataSource.prototype,"dataSourceName",void 0);
p.__decorate([f.property({type:String,json:{write:!0}})],n.RasterDataSource.prototype,"workspaceId",void 0);n.RasterDataSource=g=p.__decorate([m.subclass("esri.layers.support.source.RasterDataSource")],n.RasterDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.TableDataSource=g=function(b){function a(h){h=b.call(this,h)||this;h.type="table";return h}l._inheritsLoose(a,b);a.prototype.clone=function(){const {workspaceId:h,gdbVersion:r,dataSourceName:t}=this;return new g({workspaceId:h,gdbVersion:r,dataSourceName:t})};return a}(d.JSONSupport);p.__decorate([k.enumeration({table:"table"})],n.TableDataSource.prototype,"type",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,
"workspaceId",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,"gdbVersion",void 0);p.__decorate([f.property({type:String,json:{write:!0}})],n.TableDataSource.prototype,"dataSourceName",void 0);n.TableDataSource=g=p.__decorate([m.subclass("esri.layers.support.source.TableDataSource")],n.TableDataSource);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;p=new k.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});g=b=function(a){function h(t){t=a.call(this,t)||this;t.maxPointCount=void 0;t.maxRecordCount=void 0;t.maxVertexCount=void 0;t.onStatisticField=null;t.outStatisticFieldName=null;t.statisticType=null;t.statisticParameters=null;return t}n._inheritsLoose(h,
a);var r=h.prototype;r.writeStatisticParameters=function(t,v){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)v.statisticParameters=z.clone(t)};r.clone=function(){return new b({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:z.clone(this.statisticParameters)})};
return h}(g.JSONSupport);l.__decorate([f.property({type:Number,json:{write:!0}})],g.prototype,"maxPointCount",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],g.prototype,"maxRecordCount",void 0);l.__decorate([f.property({type:Number,json:{write:!0}})],g.prototype,"maxVertexCount",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],g.prototype,"onStatisticField",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],g.prototype,"outStatisticFieldName",void 0);
l.__decorate([f.property({type:String,json:{read:{source:"statisticType",reader:p.read},write:{target:"statisticType",writer:p.write}}})],g.prototype,"statisticType",void 0);l.__decorate([f.property({type:Object})],g.prototype,"statisticParameters",void 0);l.__decorate([c.writer("statisticParameters")],g.prototype,"writeStatisticParameters",null);return g=b=l.__decorate([m.subclass("esri.tasks.support.StatisticDefinition")],g)})},"esri/views/2d/layers/features/sources/createSource":function(){define(["exports",
"../../../../../layers/support/arcgisLayerUrl","./DrillDownFeatureSource","./GeoEventSource","./PagedFeatureSource"],function(n,l,p,z,y){n.createSource=function(w,f,k,m,c){a:{switch(w.type){case "stream":w={type:"geoevent",serviceInfo:w,onRequest:m,outSR:f,canAcceptRequest:c};break a;case "memory":case "on-demand":var e=w.source;e=Array.isArray(e)?"local":"path"in e&&l.isHostedAgolService(e.path)?"hosted":"unknown";w={type:"feature",serviceInfo:w,onRequest:m,outSR:f,origin:e,tileInfoView:k,canAcceptRequest:c};
break a}w=void 0}switch(w.type){case "feature":switch(w.origin){case "hosted":case "local":return new y.PagedFeatureSource(w);case "unknown":return new p.DrillDownFeatureSource(w)}case "geoevent":return new z.GeoEventSource(w)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(n,l,p,z){function y(c){c=p.urlToObject(c);c=c.path.match(k)||c.path.match(m);
if(!c)return null;const [,e,q,d,g]=c;c=q.indexOf("/");return{title:w(-1!==c?q.slice(c+1):q),serverType:d,sublayer:null!=g&&""!==g?parseInt(g,10):null,url:{path:e}}}function w(c){c=c.replace(/\s*[/_]+\s*/g," ");return c[0].toUpperCase()+c.slice(1)}const f="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" "),k=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${f.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),m=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${f.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,
"i");n.cleanTitle=w;n.isArcGISUrl=function(c){return!!k.test(c)};n.isHostedAgolService=function(c){if(!c)return!1;c=c.toLowerCase();const e=-1!==c.indexOf(".arcgis.com/");c=-1!==c.indexOf("//services")||-1!==c.indexOf("//tiles")||-1!==c.indexOf("//features");return e&&c};n.isHostedSecuredProxyService=function(c,e){return e&&c&&-1!==c.toLowerCase().indexOf(e.toLowerCase())};n.isServerOrServicesAGOLUrl=function(c){if(!c)return!1;c=(new p.Url(p.makeAbsolute(c))).authority.toLowerCase();return"server.arcgisonline.com"===
c||"services.arcgisonline.com"===c};n.isWmsServer=function(c){if(!c)return!1;var e=c.toLowerCase();c=-1!==e.indexOf("/services/");const q=-1!==e.indexOf("/mapserver/wmsserver"),d=-1!==e.indexOf("/imageserver/wmsserver");e=-1!==e.indexOf("/wmsserver");return c&&(q||d||e)};n.parse=y;n.sanitizeUrl=function(c,e){return c?p.removeTrailingSlash(p.removeQueryParameters(c,e)):c};n.sanitizeUrlWithLayerId=function(c,e,q){if(!e)return{url:e};e=p.removeQueryParameters(e,q);q=p.urlToObject(e);q=y(q.path);let d;
l.isSome(q)&&(null!=q.sublayer&&null==c.layerId&&(d=q.sublayer),e=q.url.path);return{url:p.removeTrailingSlash(e),layerId:d}};n.serverTypes=f;n.titleFromUrlAndName=function(c,e){const q=[];c&&(c=y(c),l.isSome(c)&&c.title&&q.push(c.title));e&&(e=w(e),q.push(e));if(2===q.length){if(-1!==q[0].toLowerCase().indexOf(q[1].toLowerCase()))return q[0];if(-1!==q[1].toLowerCase().indexOf(q[0].toLowerCase()))return q[1]}return q.join(" - ")};n.writeUrlWithLayerId=function(c,e,q,d,g){z.write(e,d,"url",g);d.url&&
null!=c.layerId&&(d.url=p.join(d.url,q,c.layerId.toString()))};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DrillDownFeatureSource":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/promiseUtils","./BaseFeatureSource"],function(n,l,p,z,y){const w=p("esri-featurelayer-webgl");p=p("esri-mobile");var f=w&&"object"===typeof w&&null!=w.maxDrillLevel?w.maxDrillLevel:p?1:4,k=w&&"object"===
typeof w&&null!=w.maxRecordCountFactor?w.maxRecordCountFactor:p?1:3;y=function(m){function c(e){return m.call(this,e)||this}l._inheritsLoose(c,m);c.prototype._fetchDataTile=async function(e){const q=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,d=this._subscriptions.get(e.key.id),g=d.signal,b=e.getQuantizationParameters();let a=0;const h=async(r,t)=>{const v=this._sourceQueryInfo,x=this._createQuery(r,{maxRecordCountFactor:q?k:void 0,returnExceededLimitFeatures:!1,quantizationParameters:b});
a++;try{const D=await this._queue.push({tile:e,query:x,signal:g,depth:t});a--;z.throwIfAborted(g);if(D)if(v!==this._sourceQueryInfo)h(r,t);else if(D.exceededTransferLimit&&t<f)for(const B of r.createChildTiles())h(B,t+1);else{var u={tile:e,id:e.id,features:D,end:0===a};d.requests.done.push({query:x,request:u});this._onRequest(u,"new")}}catch(D){z.isAbortError(D)||this._onRequest({tile:e,id:e.id,features:null,end:!0},"new")}};h(e,0)};return c}(y.BaseFeatureSource);n.DrillDownFeatureSource=y;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/BaseFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../request ../../../../../tasks/support/Query ../../../../support/QueueProcessor ../controllers/support/sources ./DataTileSource".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){const d=y.getLogger("esri.views.2d.layers.features.sources.BaseFeatureSource");
y=function(g){function b(h){var r=g.call(this,h)||this;r.type="feature";r._adapter=e.createSourceAdapter(h.serviceInfo);r._queue=new c.QueueProcessor({concurrency:8,process:async t=>{f.throwIfAborted(t);var v=t.tile.key.id;const {tile:x,signal:u}=t;v={query:p("esri-tiles-debug")?{tile:v.replace(/\//g,"."),depth:t.depth}:void 0,signal:u,transform:x.transform};return r._adapter.executeQuery(t.query,v)}});r._patchQueue=new c.QueueProcessor({concurrency:8,process:async t=>{f.throwIfAborted(t);var v=t.tile.key.id;
const {tile:x,signal:u}=t;v={query:p("esri-tiles-debug")?{tile:v.replace(/\//g,"."),depth:t.depth}:void 0,signal:u,transform:x.transform};return r._adapter.executeQuery(t.query,v)}});return r}l._inheritsLoose(b,g);var a=b.prototype;a.destroy=function(){this._adapter.destroy();this._queue.destroy();this._patchQueue.destroy()};a.setViewState=function(h){};a.subscribe=function(h){g.prototype.subscribe.call(this,h);this._fetchDataTile(h).catch(r=>{f.isAbortError(r)||d.error(new w("mapview-query-error",
"Encountered error when fetching tile",{tile:h,error:r}))})};a.unsubscribe=function(h){g.prototype.unsubscribe.call(this,h)};a.pause=function(){this._queue.pause()};a.resume=function(){this._queue.resume()};a.query=async function(h,r){return this._adapter.executeQuery(h,r)};a.queryLastEditDate=async function(){const h=this._serviceInfo.source;return(await k(h.path,{query:{...h.query,f:"json"},responseType:"json"})).data.editingInfo.lastEditDate};a.forEachRequest=function(h,r){h=this._subscriptions.get(h);
const {requests:t,signal:v}=h;for(const x of t.done)r(x.request,{signal:v})};a._executePatchQuery=async function(h,r,t,v){r=r.clone();r.outFields=[this._serviceInfo.objectIdField,...t];r.returnCentroid=!1;r.returnGeometry=!1;t=z.isSome(r.start)?r.start/8E3:0;return this._patchQueue.push({tile:h,query:r,signal:v.signal,depth:t})};a._resendRequest=async function(h,r){const {query:t,request:v}=h,x=z.isSome(t.outFields)?t.outFields:[];h=this._sourceQueryInfo.outFields;const u=h.filter(D=>-1===x.indexOf(D));
if(!z.isNone(v.features))if(u.length)try{const D=await this._executePatchQuery(v.tile,t,u,r);f.throwIfAborted(r);t.outFields=h;v.features.joinAttributes(D);this._onRequest({...v,end:v.end||r.end},"new",r)}catch(D){}else this._onRequest({...v,end:v.end||r.end},"new",r)};a.resend=async function({dataTileOnly:h}){let r=0,t=!1;const v=[];for(this._subscriptions.forEach(x=>{x.requests.done.length||(x=x.tile,this._onRequest({tile:x,id:x.id,features:null,noData:!0,end:!1},"new",{dataTileOnly:!0}))});!t;)t=
!0,this._subscriptions.forEach(({requests:x,signal:u})=>{x.done.length>r&&(t=!1,v.push(this._resendRequest(x.done[r],{signal:u,dataTileOnly:h,end:x.done.length===r+1})))}),r++;await f.all(v)};a._createQuery=function(h,r){const t=new m({...this._serviceQueryInfo,...this._sourceQueryInfo,...r});this._serviceInfo.capabilities.query.supportsQuantization||(r.quantizationParameters=null,t.maxAllowableOffset=h.resolution);r.quantizationParameters&&"esriGeometryPolyline"===this.geometryType&&(t.maxAllowableOffset=
h.resolution);t.resultType="tile";t.geometry=h.extent;return t};l._createClass(b,[{key:"updating",get:function(){return!!this._queue.length}}]);return b}(q.DataTileSource);n.BaseFeatureSource=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/support/sources":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../../../../../core/workers/workers ../../../../../../tasks/operations/query ../../support/FeatureSetReaderJSON ../../../../../../layers/ogc/ogcFeatureUtils ../../support/FeatureSetReaderPBF".split(" "),
function(n,l,p,z,y,w,f,k,m){let c=function(){function b(a){this.service=a}b.prototype.destroy=function(){};return b}(),e=function(b){function a(r){var t=b.call(this,r)||this;t._portsOpen=y.openWithPorts(r.source).then(v=>t.client=v);return t}l._inheritsLoose(a,b);var h=a.prototype;h.destroy=function(){this.client.close();this.client=null};h.executeQuery=async function(r,t){await this._portsOpen;r=await this.client.invoke("queryFeatures",r.toJSON(),t);return f.FeatureSetReaderJSON.fromFeatureSet(r,
this.service.objectIdField)};return a}(c),q=function(b){function a(){return b.apply(this,arguments)||this}l._inheritsLoose(a,b);a.prototype.executeQuery=async function(h,r){({data:h}=await w.executeQueryPBFBuffer(this.service.source,h,{...r,query:{...this.service.customParameters,...null==r?void 0:r.query}}));return m.FeatureSetReaderPBF.fromBuffer(h,this.service.geometryType)};return a}(c),d=function(b){function a(){return b.apply(this,arguments)||this}l._inheritsLoose(a,b);a.prototype.executeQuery=
async function(h,r){const {source:t,capabilities:v,spatialReference:x,objectIdField:u}=this.service;if(h.quantizationParameters&&!v.query.supportsQuantization)return h=h.clone(),h.quantizationParameters=null,{data:h}=await w.executeQuery(t,h,x,{...r,query:{...this.service.customParameters,...null==r?void 0:r.query}}),h=z.convertFromFeatureSet(h,u),z.quantizeOptimizedFeatureSet(r.transform,h),f.FeatureSetReaderJSON.fromOptimizedFeatureSet(h);({data:r}=await w.executeQuery(t,h,this.service.spatialReference,
{...r,query:{...p.unwrap(this.service.customParameters),...null==r?void 0:r.query}}));return f.FeatureSetReaderJSON.fromFeatureSet(r,this.service.objectIdField)};return a}(c),g=function(b){function a(){return b.apply(this,arguments)||this}l._inheritsLoose(a,b);a.prototype.executeQuery=async function(h,r){const {capabilities:t}=this.service;if(h.quantizationParameters&&!t.query.supportsQuantization)return h.clone().quantizationParameters=null,h=await k.queryOptimizedFeatureSet(this.service.source,
h,r),z.quantizeOptimizedFeatureSet(r.transform,h),f.FeatureSetReaderJSON.fromOptimizedFeatureSet(h);r=await k.queryOptimizedFeatureSet(this.service.source,h,r);return f.FeatureSetReaderJSON.fromOptimizedFeatureSet(r)};return a}(c);n.SourceAdapter=c;n.createSourceAdapter=function(b){const {capabilities:a}=b;var h=b.source;return h&&h.capabilities&&h.collectionId&&h.layerDefinition&&h.url?new g(b):Array.isArray(b.source)?new e(b):a.query.supportsFormatPBF?new q(b):new d(b)};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/core/workers/workers":function(){define("require exports ../has ../Error ../promiseUtils ./RemoteClient ./Connection ./WorkerOwner".split(" "),function(n,l,p,z,y,w,f,k){function m(h){if(h&&h.__esModule)return h;var r=Object.create(null);h&&Object.keys(h).forEach(function(t){if("default"!==t){var v=Object.getOwnPropertyDescriptor(h,t);Object.defineProperty(r,t,v.get?v:{enumerable:!0,get:function(){return h[t]}})}});r["default"]=h;return Object.freeze(r)}async function c(h,
r){const t=new f;await t.open(h,r);return t}async function e(){if(b)return b;a=y.createAbortController();const h=[];for(let r=0;r<q;r++){const t=k.create(r).then(v=>g[r]=v);h.push(t)}return b=y.all(h)}let q=p("esri-workers-debug")?1:p("host-browser")?navigator.hardwareConcurrency-1:0;q||(q=p("safari")&&p("mac")||p("trident")?7:2);let d=0;const g=[];let b=null,a;l.RemoteClient=w;l.Connection=f;l.initialize=function(){e()};l.open=async function(h,r={}){if("string"!==typeof h)throw new z("workers:undefined-module",
"modulePath is missing");var t=r.strategy||"distributed";p("host-webworker")&&!p("esri-workers")&&(t="local");if("local"===t){var v=await w.loadWorker(h);v||(v=await new Promise(function(x,u){n([h],function(D){x(m(D))},u)}));y.throwIfAborted(r.signal);t=r.client||v;v=w.connect(v);return c([v],{...r,client:t})}await e();y.throwIfAborted(r.signal);if("dedicated"===t)return t=d++%q,t=await g[t].open(h,r),c([t],r);if(r.maxNumWorkers&&0<r.maxNumWorkers&&(t=Math.min(r.maxNumWorkers,q),t<q)){v=Array(t);
for(let x=0;x<t;++x){const u=d++%q;v[x]=g[u].open(h,r)}return c(v,r)}t=g.map(x=>x.open(h,r));return c(t,r)};l.openWithPorts=function(h,r){return c(h,{client:r})};l.terminate=function(){b&&(a.abort(),b=null);for(let h=0;h<g.length;h++)g[h]&&g[h].terminate();g.length=0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/workers/Connection":function(){define(["../../chunks/_rollupPluginBabelHelpers","../Logger","../handleUtils","../promiseUtils","./RemoteClient"],function(n,l,p,z,y){const w=
l.getLogger("esri.core.workers.Connection");return function(){function f(){this._clients=[];this._clientPromises=[];this._clientIdx=0}var k=f.prototype;k.destroy=function(){this.close()};k.open=function(m,c){return z.create((e,q)=>{let d=!0;const g=b=>{z.throwIfAborted(c.signal);d&&(d=!1,b())};this._clients.length=m.length;this._clientPromises.length=m.length;for(let b=0;b<m.length;++b){const a=m[b];z.isThenable(a)?this._clientPromises[b]=a.then(h=>{this._clients[b]=new y(h,c);g(e);return this._clients[b]},
()=>{g(q);return null}):(this._clients[b]=new y(a,c),this._clientPromises[b]=z.resolve(this._clients[b]),g(e))}})};k.broadcast=function(m,c,e){const q=Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d)q[d]=this._clientPromises[d].then(g=>g.invoke(m,c,e));return q};k.close=function(){for(const m of this._clientPromises)m.then(c=>c.close());this._clients.length=0;this._clientPromises.length=0};k.getAvailableClient=function(){let m;for(let c=0;c<this._clients.length;++c){const e=
this._clients[c];if(!e)m=m||[],m.push(this._clientPromises[c]);else if(!e.isBusy())return z.resolve(e)}return m?z.first(m):(this._clientIdx=(this._clientIdx+1)%this._clients.length,z.resolve(this._clients[this._clientIdx]))};k.invoke=function(m,c,e){let q=null;Array.isArray(e)?(w.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),q={transferList:e}):q=e;return this.closed?z.reject(Error("Connection closed")):this.getAvailableClient().then(d=>d.invoke(m,c,q))};
k.on=function(m,c){return z.all(this._clientPromises).then(()=>p.handlesGroup(this._clients.map(e=>e.on(m,c))))};k.openPorts=function(){return z.create(m=>{const c=Array(this._clientPromises.length);let e=c.length;for(let q=0;q<this._clientPromises.length;++q)this._clientPromises[q].then(d=>{c[q]=d.openPort();0===--e&&m(c)})})};n._createClass(f,[{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"test",get:function(){return{numClients:this._clients.length}}}]);return f}()})},
"esri/core/workers/WorkerOwner":function(){define("../Logger ../Error ../promiseUtils ../../kernel ./utils ./workerFactory".split(" "),function(n,l,p,z,y,w){const f=n.getLogger("esri.core.workers"),{ABORT:k,INVOKE:m,OPEN:c,OPENED:e,RESPONSE:q}=y.MessageType;return function(){function d(b,a){this._outJobs=new Map;this._inJobs=new Map;this.worker=b;this.id=a;b.addEventListener("message",this._onMessage.bind(this));b.addEventListener("error",h=>{h.preventDefault();f.error(h)})}d.create=async function(b){const a=
await w.createWorker();return new d(a,b)};var g=d.prototype;g.terminate=function(){this.worker.terminate()};g.open=async function(b,a={}){const {signal:h}=a,r=y.newJobId();return p.create((t,v)=>{const x=p.onAbortOrThrow(h,()=>{this._outJobs.delete(r);this._post({type:k,jobId:r})});this._outJobs.set(r,{resolve:t,reject:v,abortHandle:x});this._post({type:c,jobId:r,modulePath:b})})};g._onMessage=function(b){if(b=y.receiveMessage(b))switch(b.type){case e:this._onOpenedMessage(b);break;case q:this._onResponseMessage(b);
break;case k:this._onAbortMessage(b);break;case m:this._onInvokeMessage(b)}};g._onAbortMessage=function(b){const a=this._inJobs;b=b.jobId;const h=a.get(b);h&&(h.controller&&h.controller.abort(),a.delete(b))};g._onInvokeMessage=function(b){const {methodName:a,jobId:h,data:r,abortable:t}=b;b=t?p.createAbortController():null;const v=this._inJobs,x=z.workerMessages[a];let u;try{if("function"!==typeof x)throw new TypeError(`${a} is not a function`);u=x.call(null,r,{signal:b?b.signal:null})}catch(D){this._post({type:q,
jobId:h,error:y.toInvokeError(D)});return}p.isPromiseLike(u)?(v.set(h,{controller:b,promise:u}),u.then(D=>{v.has(h)&&(v.delete(h),this._post({type:q,jobId:h},D))},D=>{v.has(h)&&(v.delete(h),D||(D={message:"Error encountered at method"+a}),p.isAbortError(D)||this._post({type:q,jobId:h,error:y.toInvokeError(D||{message:`Error encountered at method ${a}`})}))})):this._post({type:q,jobId:h},u)};g._onOpenedMessage=function(b){var a;const {jobId:h,data:r}=b;if(b=this._outJobs.get(h))this._outJobs.delete(h),
null==(a=b.abortHandle)?void 0:a.remove(),b.resolve(r)};g._onResponseMessage=function(b){var a;const {jobId:h,error:r,data:t}=b;if(b=this._outJobs.get(h))this._outJobs.delete(h),null==(a=b.abortHandle)?void 0:a.remove(),r?b.reject(l.fromJSON(JSON.parse(r))):b.resolve(t)};g._post=function(b,a,h){return y.postMessage(this.worker,b,a,h)};return d}()})},"esri/core/workers/workerFactory":function(){define("exports ../has ../../config ../Logger ../urlUtils ../promiseUtils ../../intl/locale ../../request ../../intl ./utils ./loaderConfig ./WorkerFallback".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){async function d(t){return w.create(v=>{function x(D){if(D=c.receiveMessage(D))switch(D.type){case h:D=t;if(null!=p["default"]){var B={...p};delete B["default"];B=JSON.parse(JSON.stringify(B))}else B=JSON.parse(JSON.stringify(p));B.assetsPath=y.makeAbsolute(B.assetsPath);B.locale=f.getLocale();B.has={"csp-restrictions":l("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":l("esri-2d-update-debug"),"esri-atomics":l("esri-atomics"),"esri-secure-context":l("esri-secure-context"),
"esri-shared-array-buffer":l("esri-shared-array-buffer"),"esri-tiles-debug":l("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":l("esri-workers-arraybuffer-transfer"),"host-webworker":1};B.workers.loaderUrl?B.workers.loaderUrl=y.makeAbsolute(B.workers.loaderUrl):e.DEFAULT_LOADER_URL&&(B.workers.loaderUrl=e.DEFAULT_LOADER_URL);B.workers.workerPath=B.workers.workerPath?y.makeAbsolute(B.workers.workerPath):"esri/core/workers/RemoteClient";var A=p.workers.loaderConfig;A=e["default"]({baseUrl:null==
A?void 0:A.baseUrl,locale:f.getLocale(),has:{"csp-restrictions":l("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==A?void 0:A.has},map:{...null==A?void 0:A.map},paths:{...null==A?void 0:A.paths},packages:(null==A?void 0:A.packages)||[]});D.postMessage({type:a,configure:{esriConfig:B,loaderConfig:A}});break;case b:t.removeEventListener("message",x),t.removeEventListener("error",u),v(t)}}function u(D){D.preventDefault();t.removeEventListener("message",x);t.removeEventListener("error",
u);g.warn("Failed to create Worker. Fallback to execute module in main thread",D);t=new q;t.addEventListener("message",x);t.addEventListener("error",u)}t.addEventListener("message",x);t.addEventListener("error",u)})}const g=z.getLogger("esri.core.workers");l.add("esri-workers-arraybuffer-transfer",!l("safari")||12<=l("safari"));const {CONFIGURED:b,CONFIGURE:a,HANDSHAKE:h}=c.MessageType;let r;try{r=URL.createObjectURL(new Blob(['var esriConfig,workerPath,globalId\x3d0,outgoing\x3dnew Map,configured\x3d!1,HANDSHAKE\x3d0,CONFIGURE\x3d1,CONFIGURED\x3d2,OPEN\x3d3,OPENED\x3d4,RESPONSE\x3d5,INVOKE\x3d6,ABORT\x3d7;function createAbortError(){var e\x3dnew Error("Aborted");return e.name\x3d"AbortError",e}function receiveMessage(e){return e\x26\x26e.data?"string"\x3d\x3dtypeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,r,t){var o\x3dt\x26\x26t.signal,n\x3dglobalId++;return new Promise((function(t,a){if(o){if(o.aborted)return a(createAbortError());o.addEventListener("abort",(function(){outgoing.get(n)\x26\x26(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),a(createAbortError()))}))}outgoing.set(n,{resolve:t,reject:a}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!\x3do,data:r})}))}function messageHandler(e){var r\x3dreceiveMessage(e);if(r){var t\x3dr.jobId;switch(r.type){case CONFIGURE:var o\x3dr.configure;if(configured)return;configured\x3d!0,esriConfig\x3do.esriConfig,workerPath\x3desriConfig.workers.workerPath,self.dojoConfig\x3do.loaderConfig,esriConfig.workers.loaderUrl\x26\x26(self.importScripts(esriConfig.workers.loaderUrl),"function"\x3d\x3dtypeof require\x26\x26"function"\x3d\x3dtypeof require.config\x26\x26require.config(o.loaderConfig)),self.postMessage({type:CONFIGURED});break;case OPEN:var n;function a(e){var r\x3dn.connect(e);self.postMessage({type:OPENED,jobId:t,data:r},[r])}"function"\x3d\x3dtypeof define\x26\x26define.amd?require([workerPath],(function(e){(n\x3de.default||e).loadWorker(r.modulePath).then((function(e){return e||new Promise((function(e){require([r.modulePath],e)}))})).then(a)})):"System"in self\x26\x26"function"\x3d\x3dtypeof System.import?System.import(workerPath).then((function(e){return(n\x3de.default).loadWorker(r.modulePath)})).then((function(e){return e||System.import(r.modulePath)})).then(a):(self.RemoteClient||importScripts(workerPath),(n\x3dself.RemoteClient.default||self.RemoteClient).loadWorker(r.modulePath).then(a));break;case RESPONSE:if(outgoing.has(t)){var i\x3doutgoing.get(t);outgoing.delete(t),r.error?i.reject(JSON.parse(r.error)):i.resolve(r.data)}}}}self.addEventListener("message",messageHandler),self.postMessage({type:HANDSHAKE});'],
{type:"text/javascript"}))}catch(t){}n.createWorker=async function(){if(!l("esri-workers"))return d(new q);let t;if(r)try{t=new Worker(r)}catch(v){g.warn("Failed to create Worker. Fallback to execute module in main thread",event),t=new q}else g.warn("Failed to create Worker. Fallback to execute module in main thread",event),t=new q;return d(t)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/workers/loaderConfig":function(){define(["exports","../has","../urlUtils","../../assets"],function(n,
l,p,z){n.DEFAULT_LOADER_URL=null;n.DEFAULT_LOADER_URL=p.makeAbsolute(z.getAssetUrl("esri/core/workers/init.js"));var y=p.makeAbsolute(z.getAssetUrl("dojo/"));var w=[{name:"esri",location:"../esri"}];n.default=function(f){const k={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:{...f.has},map:{...f.map},packages:f.packages&&f.packages.concat()||[],paths:{...f.paths}};f.hasOwnProperty("async")||(k.async=!0);f.hasOwnProperty("isDebug")||(k.isDebug=!1);f.baseUrl||(k.baseUrl=y);null==
w?void 0:w.forEach(m=>{a:{var c=k.packages;for(const e of c)if(e.name===m.name)break a;c.push(m)}});return k};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/workers/WorkerFallback":function(){define(["require","../../chunks/_rollupPluginBabelHelpers","../global","./utils","./RemoteClient"],function(n,l,p,z,y){function w(e){if(e&&e.__esModule)return e;var q=Object.create(null);e&&Object.keys(e).forEach(function(d){if("default"!==d){var g=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(q,
d,g.get?g:{enumerable:!0,get:function(){return e[d]}})}});q["default"]=e;return Object.freeze(q)}let f=function(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(q=>{this[q]=(...d)=>e[q](...d)})};const k=p.MutationObserver||p.WebKitMutationObserver,m=function(){let e;if(p.process&&p.process.nextTick)e=q=>{p.process.nextTick(q)};else if(p.Promise)e=q=>{p.Promise.resolve().then(q)};else if(k){const q=[],d=document.createElement("div");(new k(()=>
{for(;0<q.length;)q.shift()()})).observe(d,{attributes:!0});e=g=>{q.push(g);d.setAttribute("queueStatus","1")}}return e}(),c=(()=>{const e=p.MessageEvent;try{new e("message",{data:null})}catch{return(q,d={})=>{const {data:g,bubbles:b=!1,cancelable:a=!1}=d;d=document.createEvent("Event");d.initEvent(q,b,a);d.data=g;return d}}return(q,d)=>new e(q,d)})();return function(){function e(){this._dispatcher=new f;this._isInitialized=!1;this._workerPostMessage({type:z.MessageType.HANDSHAKE})}var q=e.prototype;
q.terminate=function(){};q.postMessage=function(d){m(()=>{this._workerMessageHandler(c("message",{data:d}))})};q.dispatchEvent=function(d){return this._dispatcher.dispatchEvent(d)};q.addEventListener=function(d,g,b){this._dispatcher.addEventListener(d,g,b)};q.removeEventListener=function(d,g,b){this._dispatcher.removeEventListener(d,g,b)};q._workerPostMessage=function(d){m(()=>{this.dispatchEvent(c("message",{data:d}))})};q._workerMessageHandler=async function(d){if(d=z.receiveMessage(d))switch(d.type){case z.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:z.MessageType.CONFIGURED});break;case z.MessageType.OPEN:{const {modulePath:g,jobId:b}=d;(d=await y.loadWorker(g))||(d=await new Promise(function(a,h){n([g],function(r){a(w(r))},h)}));d=y.connect(d);this._workerPostMessage({type:z.MessageType.OPENED,jobId:b,data:d})}}};l._createClass(e,[{key:"onmessage",get:function(){return this._onmessageHandler},set:function(d){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=
d)&&this.addEventListener("message",d)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(d){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler);(this._onmessageerrorHandler=d)&&this.addEventListener("messageerror",d)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(d){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=d)&&this.addEventListener("error",
d)}}]);return e}()})},"esri/tasks/operations/query":function(){define("exports ../../core/maybe ../../core/urlUtils ../../core/promiseUtils ../../geometry/support/jsonUtils ../../request ../../geometry/support/normalizeUtils ./queryZScale ./pbfQueryUtils ./urlUtils".split(" "),function(n,l,p,z,y,w,f,k,m,c){function e(g,b){const a=g.geometry;g=g.toJSON();l.isSome(a)&&(g.geometry=JSON.stringify(a),g.geometryType=y.getJsonType(a),g.inSR=a.spatialReference.wkid||JSON.stringify(a.spatialReference));g.groupByFieldsForStatistics&&
(g.groupByFieldsForStatistics=g.groupByFieldsForStatistics.join(","));g.objectIds&&(g.objectIds=g.objectIds.join(","));g.orderByFields&&(g.orderByFields=g.orderByFields.join(","));!g.outFields||!g.returnDistinctValues&&(null!=b&&b.returnCountOnly||null!=b&&b.returnExtentOnly||null!=b&&b.returnIdsOnly)?delete g.outFields:-1!==g.outFields.indexOf("*")?g.outFields="*":g.outFields=g.outFields.join(",");g.outSR?g.outSR=g.outSR.wkid||JSON.stringify(g.outSR):a&&(g.returnGeometry||g.returnCentroid)&&(g.outSR=
g.inSR);g.returnGeometry&&delete g.returnGeometry;g.outStatistics&&(g.outStatistics=JSON.stringify(g.outStatistics));g.pixelSize&&(g.pixelSize=JSON.stringify(g.pixelSize));g.quantizationParameters&&(g.quantizationParameters=JSON.stringify(g.quantizationParameters));g.parameterValues&&(g.parameterValues=JSON.stringify(g.parameterValues));g.rangeValues&&(g.rangeValues=JSON.stringify(g.rangeValues));g.dynamicDataSource&&(g.layer=JSON.stringify({source:g.dynamicDataSource}),delete g.dynamicDataSource);
if(g.timeExtent){const {start:h,end:r}=g.timeExtent;if(null!=h||null!=r)g.time=h===r?h:`${null==h?"null":h},${null==r?"null":r}`;delete g.timeExtent}return g}function q(g,b,a){return d(g,b,"pbf",a)}function d(g,b,a,h={},r){const t="string"===typeof g?p.urlToObject(g):g;g=b.geometry?[b.geometry]:[];h.responseType="pbf"===a?"array-buffer":"json";return f.normalizeCentralMeridian(g,null,h).then(v=>{v=v&&v[0];l.isSome(v)&&(b=b.clone(),b.geometry=v);v=c.mapParameters({...t.query,f:a,...r,...e(b,r)});return w(p.join(t.path,
"query"),{...h,query:{...v,...h.query}})})}n.executeQuery=async function(g,b,a,h){g=l.isSome(b.timeExtent)&&b.timeExtent.isEmpty?{data:{features:[]}}:await d(g,b,"json",h);k.applyFeatureSetZUnitScaling(b,a,g.data);return g};n.executeQueryForCount=function(g,b,a){return l.isSome(b.timeExtent)&&b.timeExtent.isEmpty?z.resolve({data:{count:0}}):d(g,b,"json",a,{returnIdsOnly:!0,returnCountOnly:!0})};n.executeQueryForExtent=function(g,b,a){return l.isSome(b.timeExtent)&&b.timeExtent.isEmpty?z.resolve({data:{count:0,
extent:null}}):d(g,b,"json",a,{returnExtentOnly:!0,returnCountOnly:!0}).then(h=>{const r=h.data;if(r.hasOwnProperty("extent"))return h;if(r.features)throw Error("Layer does not support extent calculation.");if(r.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return h})};n.executeQueryForIds=function(g,b,a){return l.isSome(b.timeExtent)&&b.timeExtent.isEmpty?z.resolve({data:{objectIds:[]}}):d(g,b,"json",a,{returnIdsOnly:!0})};n.executeQueryPBF=async function(g,b,
a,h){if(l.isSome(b.timeExtent)&&b.timeExtent.isEmpty)return z.resolve({data:a.createFeatureResult()});g=await q(g,b,h);g.data=m.parsePBFFeatureQuery(g.data,a);return g};n.executeQueryPBFBuffer=q;n.queryToQueryStringParameters=e;n.runQuery=d;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/queryZScale":function(){define(["exports","./zscale"],function(n,l){n.applyFeatureSetZUnitScaling=function(p,z,y){if(y&&y.features&&y.hasZ&&(p=l.getGeometryZScaler(y.geometryType,z,p.outSpatialReference)))for(const w of y.features)p(w.geometry)};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/zscale":function(){define(["exports","../../core/maybe","../../geometry/support/spatialReferenceUtils","../../core/unitUtils"],function(n,l,p,z){function y(f,k,m){if(null==f.hasM||f.hasZ)for(const c of k)for(const e of c)2<e.length&&(e[2]*=m)}function w(f,k,m){if(f)for(const e of f){f=e.geometry;var c=m;if(f&&f.spatialReference&&!p.equals(f.spatialReference,k)&&(c=z.getMetersPerVerticalUnitForSR(f.spatialReference)/c,1!==c))if("x"in
f)null!=f.z&&(f.z*=c);else if("rings"in f)y(f,f.rings,c);else if("paths"in f)y(f,f.paths,c);else if("points"in f&&(null==f.hasM||f.hasZ))for(const q of f.points)2<q.length&&(q[2]*=c)}}n.getGeometryZScaler=function(f,k,m){if(l.isNone(k)||l.isNone(m)||m.vcsWkid||p.equals(k,m))return null;k=z.getMetersPerVerticalUnitForSR(k);m=z.getMetersPerVerticalUnitForSR(m);const c=k/m;if(1===c)return null;switch(f){case "point":case "esriGeometryPoint":return e=>{e&&null!=e.z&&(e.z*=c)};case "polyline":case "esriGeometryPolyline":return e=>
{if(e)for(const q of e.paths)for(const d of q)2<d.length&&(d[2]*=c)};case "polygon":case "esriGeometryPolygon":return e=>{if(e)for(const q of e.rings)for(const d of q)2<d.length&&(d[2]*=c)};case "multipoint":case "esriGeometryMultipoint":return e=>{if(e)for(const q of e.points)2<q.length&&(q[2]*=c)};default:return null}};n.unapplyEditsZUnitScaling=function(f,k,m){if((f||k)&&m){var c=z.getMetersPerVerticalUnitForSR(m);w(f,m,c);w(k,m,c)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/pbfQueryUtils":function(){define(["exports",
"./pbfFeatureServiceParser"],function(n,l){n.parsePBFFeatureQuery=function(p,z){var y=l.parseFeatureQuery(p,z);p=y.queryResult.featureResult;z=y.queryResult.queryGeometry;y=y.queryResult.queryGeometryType;if(p&&p.features&&p.features.length&&p.objectIdFieldName){const w=p.objectIdFieldName;for(const f of p.features)f.attributes&&(f.objectId=f.attributes[w])}p&&(p.queryGeometry=z,p.queryGeometryType=y);return p};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("exports ../../core/maybe ../../core/Logger ../../core/Error ../../layers/graphics/OptimizedGeometry ../../core/pbf ./pbfOptimizedFeatureSet".split(" "),
function(n,l,p,z,y,w,f){function k(E){return E>=B.length?null:B[E]}function m(E,F,G){for(G=F.createPointGeometry(G);E.next();)switch(E.tag()){case 3:{var J=E.getUInt32();J=E.pos()+J;let K=0;for(;E.pos()<J;)F.addCoordinatePoint(G,E.getSInt64(),K++);break}default:E.skip()}return G}function c(E,F,G){const J=F.createGeometry(G);for(G=2+(G.hasZ?1:0)+(G.hasM?1:0);E.next();)switch(E.tag()){case 2:var K=E.getUInt32();K=E.pos()+K;for(var L=0;E.pos()<K;)F.addLength(J,E.getUInt32(),L++);break;case 3:K=E.getUInt32();
K=E.pos()+K;for(L=0;E.pos()<K;)F.addCoordinate(J,E.getSInt64(),L),L++,L===G&&(L=0);break;default:E.skip()}return J}function e(E){const F=new y;let G="esriGeometryPoint";for(;E.next();)switch(E.tag()){case 2:var J=E.getUInt32();for(J=E.pos()+J;E.pos()<J;)F.lengths.push(E.getUInt32());break;case 3:J=E.getUInt32();for(J=E.pos()+J;E.pos()<J;)F.coords.push(E.getSInt64());break;case 1:G=f.OPTIMIZED_GEOMETRY_TYPES[E.getEnum()];break;default:E.skip()}return{queryGeometry:F,queryGeometryType:G}}function q(E){for(;E.next();)switch(E.tag()){case 1:return E.getString();
case 2:return E.getFloat();case 3:return E.getDouble();case 4:return E.getSInt32();case 5:return E.getUInt32();case 6:return E.getInt64();case 7:return E.getUInt64();case 8:return E.getSInt64();case 9:return E.getBool();default:return E.skip(),null}return null}function d(E){const F={type:k(0)};for(;E.next();)switch(E.tag()){case 1:F.name=E.getString();break;case 2:F.type=k(E.getEnum());break;case 3:F.alias=E.getString();break;case 4:var G=E.getEnum();G=G>=A.length?null:A[G];F.sqlType=G;break;case 5:try{F.domain=
JSON.parse(E.getString())}catch(J){D.error(new z("query:parsing-pbf","Failed to parse domain",{error:J})),F.domain=null}break;case 6:F.defaultValue=E.getString();break;default:E.skip()}return F}function g(E){const F={};for(;E.next();)switch(E.tag()){case 1:F.name=E.getString();break;case 2:F.isSystemMaintained=E.getBool();break;default:E.skip()}return F}function b(E,F,G,J){const K=F.createFeature(G);let L=0;for(;E.next();)switch(E.tag()){case 1:{const I=J[L++].name;K.attributes[I]=E.processMessage(q);
break}case 2:K.geometry=E.processMessageWithArgs(c,F,G);break;case 4:K.centroid=E.processMessageWithArgs(m,F,G);break;default:E.skip()}return K}function a(E){const F=[1,1,1,1];for(;E.next();)switch(E.tag()){case 1:F[0]=E.getDouble();break;case 2:F[1]=E.getDouble();break;case 4:F[2]=E.getDouble();break;case 3:F[3]=E.getDouble();break;default:E.skip()}return F}function h(E){const F=[0,0,0,0];for(;E.next();)switch(E.tag()){case 1:F[0]=E.getDouble();break;case 2:F[1]=E.getDouble();break;case 4:F[2]=E.getDouble();
break;case 3:F[3]=E.getDouble();break;default:E.skip()}return F}function r(E){const F={originPosition:0>=C.length?null:C[0]};for(;E.next();)switch(E.tag()){case 1:var G=E.getEnum();F.originPosition=G>=C.length?null:C[G];break;case 2:F.scale=E.processMessage(a);break;case 3:F.translate=E.processMessage(h);break;default:E.skip()}return F}function t(E){const F={};for(;E.next();)switch(E.tag()){case 1:F.shapeAreaFieldName=E.getString();break;case 2:F.shapeLengthFieldName=E.getString();break;case 3:F.units=
E.getString();break;default:E.skip()}return F}function v(E,F){for(F=F.createSpatialReference();E.next();)switch(E.tag()){case 1:F.wkid=E.getUInt32();break;case 5:F.wkt=E.getString();break;case 2:F.latestWkid=E.getUInt32();break;case 3:F.vcsWkid=E.getUInt32();break;case 4:F.latestVcsWkid=E.getUInt32();break;default:E.skip()}return F}function x(E,F){const G=F.createFeatureResult();G.geometryType=0>=F.geometryTypes.length?null:F.geometryTypes[0];let J=!1;for(;E.next();)switch(E.tag()){case 1:G.objectIdFieldName=
E.getString();break;case 3:G.globalIdFieldName=E.getString();break;case 4:G.geohashFieldName=E.getString();break;case 5:G.geometryProperties=E.processMessage(t);break;case 7:var K=E.getEnum();G.geometryType=K>=F.geometryTypes.length?null:F.geometryTypes[K];break;case 8:G.spatialReference=E.processMessageWithArgs(v,F);break;case 10:G.hasZ=E.getBool();break;case 11:G.hasM=E.getBool();break;case 12:G.transform=E.processMessage(r);break;case 9:K=E.getBool();G.exceededTransferLimit=K;break;case 13:F.addField(G,
E.processMessage(d));break;case 15:J||(F.prepareFeatures(G),J=!0);F.addFeature(G,E.processMessageWithArgs(b,F,G,G.fields));break;case 2:G.uniqueIdField=E.processMessage(g);break;default:E.skip()}F.finishFeatureResult(G);return G}function u(E,F){const G={};let J=null;for(;E.next();)switch(E.tag()){case 4:J=E.processMessageWithArgs(e);break;case 1:G.featureResult=E.processMessageWithArgs(x,F);break;default:E.skip()}l.isSome(J)&&G.featureResult&&F.addQueryGeometry(G,J);return G}const D=p.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
B="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),A="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
C=["upperLeft","lowerLeft"];n.parseFeatureQuery=function(E,F){try{const G=new w(new Uint8Array(E),new DataView(E));for(E={};G.next();)switch(G.tag()){case 2:E.queryResult=G.processMessageWithArgs(u,F);break;default:G.skip()}return E}catch(G){throw new z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:G});}};n.parseFieldType=k;n.parseTransform=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define("exports ../../geometry/support/spatialReferenceUtils ../../core/unitUtils ../../layers/graphics/OptimizedFeature ../../layers/graphics/OptimizedFeatureSet ../../layers/graphics/OptimizedGeometry".split(" "),
function(n,l,p,z,y,w){const f=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let k=function(){function m(e){this.options=e;this.geometryTypes=f}var c=m.prototype;c.createFeatureResult=function(){return new y};c.prepareFeatures=function(){};c.finishFeatureResult=function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!l.equals(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var q=
p.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),d=p.getMetersPerVerticalUnitForSR(e.spatialReference);q/=d;if(1!==q)for(const g of e.features)if(g.geometry&&g.geometry.coords)for(e=g.geometry.coords,d=2;d<e.length;d+=3)e[d]*=q}};c.addFeature=function(e,q){e.features.push(q)};c.createFeature=function(){return new z};c.createSpatialReference=function(){return{wkid:0}};c.createGeometry=function(){return new w};c.addField=function(e,q){e.fields.push(q)};c.addCoordinate=function(e,
q){e.coords.push(q)};c.addCoordinatePoint=function(e,q){e.coords.push(q)};c.addLength=function(e,q){e.lengths.push(q)};c.addQueryGeometry=function(e,q){e.queryGeometry=q.queryGeometry;e.queryGeometryType=q.queryGeometryType};c.createPointGeometry=function(){return new w};return m}();n.OPTIMIZED_GEOMETRY_TYPES=f;n.OptimizedFeatureSetParserContext=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(n){function l(p){const z={};
for(const y in p){if("declaredClass"===y)continue;const w=p[y];if(null!=w&&"function"!==typeof w)if(Array.isArray(w)){z[y]=[];for(let f=0;f<w.length;f++)z[y][f]=l(w[f])}else"object"===typeof w?w.toJSON&&(z[y]=JSON.stringify(w)):z[y]=w}return z}n.mapParameters=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/ogc/ogcFeatureUtils":function(){define("exports ../../core/maybe ../../core/Logger ../../core/Error ../../geometry/support/spatialReferenceUtils ../../request ../support/fieldType ../graphics/OptimizedFeatureSet ../graphics/featureConversionUtils ../support/FieldsIndex ../../tasks/support/FeatureSet ../graphics/data/projectionSupport ../graphics/sources/geojson/geojson ../graphics/sources/support/clientSideDefaults".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){async function b(x,u,D){x=await a(x,u,D);return m.convertToFeatureSet(x)}async function a(x,u,D){var B;const {capabilities:{query:{maxRecordCount:A}},collectionId:C,layerDefinition:E,url:F}=x;x=`${F}/collections/${C}/items`;const {geometry:G,num:J,start:K,timeExtent:L,where:I}=u;u=l.isSome(u.outSpatialReference)?u.outSpatialReference:y.WGS84;var N=q.project(G,y.WGS84);N=h(N);const P=r(L),R=t(I);({data:D}=await w(x,{...D,query:{bbox:N,datetime:P,query:R,limit:null!=
J?J:null!=K&&void 0!==K?10:A,startindex:K,f:"json"}}));x=null==(B=D.links)?void 0:B.filter(U=>"next"===U.rel);B=0!==(null==x?void 0:x.length);const {fields:T,globalIdField:W,hasM:Z,hasZ:la,objectIdField:ea}=E;x=E.geometryType;D=d.createOptimizedFeatures(D,{geometryType:x,hasZ:la,objectIdFieldName:ea});if(!y.equals(u,y.WGS84))for(var O of D)O.geometry&&(O.geometry=m.convertFromGeometry(q.project(m.convertToGeometry(O.geometry,x,la,!1),y.WGS84,u)));for(const U of D)U.objectId=U.attributes[ea];O=new k;
O.exceededTransferLimit=B;O.features=D;O.fields=T;O.geometryType=x;O.globalIdFieldName=W;O.hasM=Z;O.hasZ=la;O.objectIdFieldName=ea;O.spatialReference=u||y.WGS84;return O}function h(x){if(l.isNone(x))return null;const {xmin:u,ymin:D,xmax:B,ymax:A}=x;return`${u},${D},${B},${A}`}function r(x){if(l.isNone(x))return null;const {start:u,end:D}=x;return`${u?u.toISOString():".."}/${D?D.toISOString():".."}`}function t(x){return l.isNone(x)||!x||"1\x3d1"===x?null:x}const v=p.getLogger("esri.layers.graphics.sources.ogcfeature");
n.getCollectionDefinition=async function(x,u,D,B,A=5){try{await q.checkProjectionSupport(y.WGS84,D.spatialReference)}catch{throw new z("ogc-feature-layer:projection-not-supported","Projection not supported");}({data:x}=await w(`${x}/collections/${u}/items`,{signal:B,query:{limit:A,f:"json"}}));await d.validateGeoJSON(x);const C=d.inferLayerProperties(x,{geometryType:D.geometryType});x=D.fields||C.fields||[];u=null!=D.hasZ?D.hasZ:C.hasZ;B=C.geometryType;const E=D.objectIdField||C.objectIdFieldName||
"OBJECTID";D=D.timeInfo;if(A=x.find(G=>G.name===E))A.type="esriFieldTypeOID",A.editable=!1,A.nullable=!1;else{if(!C.objectIdFieldType)throw new z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");x.unshift({name:E,alias:E,type:"esriFieldTypeOID",editable:!1,nullable:!1})}E!==C.objectIdFieldName&&(A=x.find(G=>G.name===C.objectIdFieldName))&&(A.type="esriFieldTypeInteger");if(!B)throw new z("ogc-feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");
x===C.fields&&0<C.unknownFields.length&&v.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:C.unknownFields}});for(var F of x){null==F.name&&(F.name=F.alias);null==F.alias&&(F.alias=F.name);"esriFieldTypeOID"!==F.type&&"esriFieldTypeGlobalID"!==F.type&&(F.editable=null==F.editable?!0:!!F.editable,F.nullable=null==F.nullable?!0:!!F.nullable);if(!F.name)throw new z("ogc-feature-layer:invalid-field-name",
"field name is missing",{field:F});if(-1===f.kebabDict.jsonValues.indexOf(F.type))throw new z("ogc-feature-layer:invalid-field-type",`invalid type for field "${F.name}"`,{field:F});}D&&(F=new c(x),D.startTimeField&&((A=F.get(D.startTimeField))?(D.startTimeField=A.name,A.type="esriFieldTypeDate"):D.startTimeField=null),D.endTimeField&&((A=F.get(D.endTimeField))?(D.endTimeField=A.name,A.type="esriFieldTypeDate"):D.endTimeField=null),D.trackIdField&&((F=F.get(D.trackIdField))?D.trackIdField=F.name:(D.trackIdField=
null,v.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:D}}))),D.startTimeField||D.endTimeField||(v.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:D}}),D=null));return{drawingInfo:g.createDrawingInfo(B),geometryType:B,fields:x,hasZ:!!u,objectIdField:E,timeInfo:D}};n.getServerCollection=async function(x,u,D){({data:x}=await w(`${x}/collections/${u}`,{signal:D,query:{f:"json"}}));
return x};n.getServerCollections=async function(x,u){({data:x}=await w(`${x}/collections`,{signal:u,query:{f:"json"}}));return x};n.getServerConformance=async function(x,u){({data:x}=await w(`${x}/conformance`,{signal:u,query:{f:"json"}}));return x};n.getServerLandingPage=async function(x,u){({data:x}=await w(x,{signal:u,query:{f:"json"}}));return x};n.queryFeatureSet=async function(x,u,D){x=await b(x,u,D);return e.fromJSON(x)};n.queryFeatureSetJSON=b;n.queryOptimizedFeatureSet=a;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/tasks/support/FeatureSet":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../geometry ../../Graphic ../../layers/support/Field".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v){const x=new k.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});p=function(u){function D(A){A=u.call(this,A)||this;A.displayFieldName=null;A.exceededTransferLimit=!1;A.features=[];A.fields=null;A.geometryType=null;A.hasM=!1;A.hasZ=!1;A.queryGeometry=null;A.spatialReference=null;return A}n._inheritsLoose(D,u);var B=
D.prototype;B.readFeatures=function(A,C){C=a.fromJSON(C.spatialReference);const E=[];for(let G=0;G<A.length;G++){var F=A[G];const J=t.fromJSON(F);F=F.geometry&&F.geometry.spatialReference;z.isSome(J.geometry)&&!F&&(J.geometry.spatialReference=C);E.push(J)}return E};B.writeGeometryType=function(A,C,E,F){if(A)x.write(A,C,E,F);else if({features:A}=this,A)for(const G of A)if(G&&z.isSome(G.geometry)){x.write(G.geometry.type,C,E,F);break}};B.readQueryGeometry=function(A,C){if(!A)return null;const E=!!A.spatialReference;
A=h.fromJSON(A);!E&&C.spatialReference&&(A.spatialReference=a.fromJSON(C.spatialReference));return A};B.writeSpatialReference=function(A,C){if(A)C.spatialReference=A.toJSON();else if({features:A}=this,A)for(const E of A)E&&z.isSome(E.geometry)&&E.geometry.spatialReference&&(C.spatialReference=E.geometry.spatialReference.toJSON())};B.toJSON=function(A){const C=this.write(null);if(C.features&&Array.isArray(A)&&0<A.length)for(let E=0;E<C.features.length;E++){const F=C.features[E];if(F.geometry){const G=
A&&A[E];F.geometry=G&&G.toJSON()||F.geometry}}return C};B.quantize=function(A){const {scale:[C,E],translate:[F,G]}=A,J=this.features,K=this._getQuantizationFunction(this.geometryType,L=>Math.round((L-F)/C),L=>Math.round((G-L)/E));for(let L=0,I=J.length;L<I;L++)K(z.unwrap(J[L].geometry))||(J.splice(L,1),L--,I--);this.transform=A;return this};B.unquantize=function(){const {geometryType:A,features:C,transform:E}=this;if(!E)return this;const {translate:[F,G],scale:[J,K]}=E,L=this._getHydrationFunction(A,
I=>I*J+F,I=>G-I*K);for(const {geometry:I}of C)z.isSome(I)&&L(I);this.transform=null;return this};B._quantizePoints=function(A,C,E){let F,G;const J=[];for(let L=0,I=A.length;L<I;L++){var K=A[L];if(0<L){const N=C(K[0]);K=E(K[1]);if(N!==F||K!==G)J.push([N-F,K-G]),F=N,G=K}else F=C(K[0]),G=E(K[1]),J.push([F,G])}return 0<J.length?J:null};B._getQuantizationFunction=function(A,C,E){return"point"===A?F=>{F.x=C(F.x);F.y=E(F.y);return F}:"polyline"===A||"polygon"===A?F=>{const G=h.isPolygon(F)?F.rings:F.paths,
J=[];for(let K=0,L=G.length;K<L;K++){const I=this._quantizePoints(G[K],C,E);I&&J.push(I)}return 0<J.length?(h.isPolygon(F)?F.rings=J:F.paths=J,F):null}:"multipoint"===A?F=>{let G;G=this._quantizePoints(F.points,C,E);return 0<G.length?(F.points=G,F):null}:"extent"===A?F=>F:null};B._getHydrationFunction=function(A,C,E){if("point"===A)return F=>{F.x=C(F.x);F.y=E(F.y)};if("polyline"===A||"polygon"===A)return F=>{F=h.isPolygon(F)?F.rings:F.paths;let G,J;for(let K=0,L=F.length;K<L;K++){const I=F[K];for(let N=
0,P=I.length;N<P;N++){const R=I[N];0<N?(G+=R[0],J+=R[1]):(G=R[0],J=R[1]);R[0]=C(G);R[1]=E(J)}}};if("extent"===A)return F=>{F.xmin=C(F.xmin);F.ymin=E(F.ymin);F.xmax=C(F.xmax);F.ymax=E(F.ymax)};if("multipoint"===A)return F=>{F=F.points;let G,J;for(let K=0,L=F.length;K<L;K++){const I=F[K];0<K?(G+=I[0],J+=I[1]):(G=I[0],J=I[1]);I[0]=C(G);I[1]=E(J)}}};return D}(b.JSONSupport);l.__decorate([f.property({type:String,json:{write:!0}})],p.prototype,"displayFieldName",void 0);l.__decorate([f.property({type:Boolean,
json:{write:{overridePolicy(u){return{enabled:u}}}}})],p.prototype,"exceededTransferLimit",void 0);l.__decorate([f.property({type:[t],json:{write:!0}})],p.prototype,"features",void 0);l.__decorate([m.reader("features")],p.prototype,"readFeatures",null);l.__decorate([f.property({type:[v],json:{write:!0}})],p.prototype,"fields",void 0);l.__decorate([f.property({type:"point multipoint polyline polygon extent mesh".split(" "),json:{read:{reader:x.read}}})],p.prototype,"geometryType",void 0);l.__decorate([e.writer("geometryType")],
p.prototype,"writeGeometryType",null);l.__decorate([f.property({type:Boolean,json:{write:{overridePolicy(u){return{enabled:u}}}}})],p.prototype,"hasM",void 0);l.__decorate([f.property({type:Boolean,json:{write:{overridePolicy(u){return{enabled:u}}}}})],p.prototype,"hasZ",void 0);l.__decorate([f.property({types:r.geometryTypes,json:{write:!0}})],p.prototype,"queryGeometry",void 0);l.__decorate([m.reader("queryGeometry")],p.prototype,"readQueryGeometry",null);l.__decorate([f.property({type:a,json:{write:!0}})],
p.prototype,"spatialReference",void 0);l.__decorate([e.writer("spatialReference")],p.prototype,"writeSpatialReference",null);l.__decorate([f.property({json:{write:!0}})],p.prototype,"transform",void 0);p=l.__decorate([c.subclass("esri.tasks.support.FeatureSet")],p);p.prototype.toJSON.isDefaultToJSON=!0;(function(u){})(p||(p={}));return p})},"esri/Graphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/maybe ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./geometry/support/jsonUtils ./geometry ./PopupTemplate ./chunks/symbols ./core/uid".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t){var v;p=v=function(x){function u(...B){B=x.call(this,...B)||this;B.isAggregate=!1;B.layer=null;B.popupTemplate=null;B.sourceLayer=null;Object.defineProperty(n._assertThisInitialized(B),"uid",{value:t.generateUID(),configurable:!0});return B}n._inheritsLoose(u,x);var D=u.prototype;D.normalizeCtorArgs=function(B,A,C,E){return B&&!B.declaredClass?B:{geometry:B,symbol:A,attributes:C,popupTemplate:E}};D.getEffectivePopupTemplate=function(B=!1){return this.popupTemplate?
this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:B&&"defaultPopupTemplate"in this.sourceLayer&&y.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null};D.getAttribute=function(B){return this.attributes&&this.attributes[B]};D.setAttribute=function(B,A){if(this.attributes){const C=this.getAttribute(B);this.attributes[B]=A;this._notifyLayer("attributes",C,A,B)}else this.attributes=
{[B]:A},this._notifyLayer("attributes",void 0,A,B)};D.getObjectId=function(){return this.sourceLayer?"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null};D.toJSON=function(){return{geometry:y.isSome(this.geometry)?this.geometry.toJSON():null,symbol:y.isSome(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};D.clone=function(){return new v(this.cloneProperties())};
D.cloneProperties=function(){return{attributes:z.clone(this.attributes),geometry:z.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:z.clone(this.symbol),visible:this.visible}};D._notifyLayer=function(B,A,C,E){this.layer&&"graphicChanged"in this.layer&&(A={graphic:this,property:B,oldValue:A,newValue:C},"attributes"===B&&(A.attributeName=E),this.layer.graphicChanged(A))};n._createClass(u,[{key:"attributes",set:function(B){const A=
this._get("attributes");A!==B&&(this._set("attributes",B),this._notifyLayer("attributes",A,B))}},{key:"geometry",set:function(B){const A=this._get("geometry");A!==B&&(this._set("geometry",B),this._notifyLayer("geometry",A,B))}},{key:"symbol",set:function(B){const A=this._get("symbol");A!==B&&(this._set("symbol",B),this._notifyLayer("symbol",A,B))}},{key:"visible",set:function(B){const A=this._get("visible");A!==B&&(this._set("visible",B),this._notifyLayer("visible",A,B))}}]);return u}(g.JSONSupport);
l.__decorate([k.property({value:null})],p.prototype,"attributes",null);l.__decorate([k.property({value:null,types:a.geometryTypes,json:{read:b.fromJSON}})],p.prototype,"geometry",null);l.__decorate([k.property({type:Boolean})],p.prototype,"isAggregate",void 0);l.__decorate([k.property()],p.prototype,"layer",void 0);l.__decorate([k.property({type:h})],p.prototype,"popupTemplate",void 0);l.__decorate([k.property()],p.prototype,"sourceLayer",void 0);l.__decorate([k.property({value:null,types:r.symbolTypes})],
p.prototype,"symbol",null);l.__decorate([k.property({type:Boolean,value:!0})],p.prototype,"visible",null);p=v=l.__decorate([c.subclass("esri.Graphic")],p);(p||(p={})).generateUID=t.generateUID;return p})},"esri/PopupTemplate":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/promiseUtils ./core/JSONSupport ./core/Collection ./layers/support/fieldUtils ./popup/content/Content ./popup/content/AttachmentsContent ./popup/content/CustomContent ./popup/FieldInfo ./popup/content/FieldsContent ./popup/content/support/mediaInfoTypes ./popup/content/MediaContent ./popup/content/TextContent ./popup/content ./popup/ExpressionInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E,F,G,J,K,L,I,N){var P;p=r.ofType({key:"type",defaultKeyValue:"button",base:L,typeMap:{button:I,toggle:N}});const R={base:v,key:"type",typeMap:{media:C,custom:u,text:E,attachments:x,fields:B}},T=y.getLogger("esri.PopupTemplate"),W=["attachments","fields","media","text"];y=P=function(Z){function la(){var O=Z.apply(this,arguments)||this;O.actions=null;O.content="";O.expressionInfos=null;O.fieldInfos=null;O.layerOptions=null;O.lastEditInfoEnabled=
!0;O.outFields=null;O.overwriteActions=!1;O.returnGeometry=!1;O.title="";O.relatedRecordsInfo=null;return O}n._inheritsLoose(la,Z);var ea=la.prototype;ea.castContent=function(O){if(Array.isArray(O))return O.map(U=>w.ensureOneOfType(R,U));if("string"===typeof O||"function"===typeof O||O instanceof HTMLElement||a.isPromiseLike(O))return O;T.error("content error","unsupported content value",{value:O});return null};ea.readContent=function(O,U){({popupElements:O}=U);return Array.isArray(O)&&0<O.length?
this._readPopupInfoElements(U):this._readPopupInfo(U)};ea.writeContent=function(O,U){"string"===typeof O?U.description=O:Array.isArray(O)&&(U.popupElements=O.filter(ba=>-1!==W.indexOf(ba.type)).map(ba=>ba&&ba.toJSON()),U.popupElements.forEach(ba=>{"attachments"===ba.type?this._writeAttachmentContent(U):"media"===ba.type?this._writeMediaContent(ba,U):"text"===ba.type&&this._writeTextContent(ba,U)}))};ea.writeFieldInfos=function(O,U){var {content:ba}=this;ba=Array.isArray(ba)?ba:null;if(O){const ka=
ba?ba.some(oa=>"fields"===oa.type&&(!oa.fieldInfos||0===oa.fieldInfos.length)):!1;U.fieldInfos=O.filter(Boolean).map(oa=>{oa=oa.toJSON();ka||(oa.visible=!1);return oa})}if(ba)for(const ka of ba)"fields"===ka.type&&this._writeFieldsContent(ka,U)};ea.writeLayerOptions=function(O,U){U.layerOptions=!O||null===O.showNoDataRecords&&null===O.returnTopmostRaster?null:O.toJSON()};ea.writeTitle=function(O,U){U.title=O||""};ea.clone=function(){var {actions:O}=this;O=O?z.clone(O.toArray()):[];return new P({actions:O,
content:Array.isArray(this.content)?z.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?z.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null,layerOptions:this.layerOptions?z.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?
z.clone(this.relatedRecordsInfo):null})};ea.collectRequiredFields=async function(O,U){await this._collectExpressionInfoFields(O,U,this.expressionInfos);t.collectFields(O,U,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])};ea.getRequiredFields=async function(O){const U=new Set;await this.collectRequiredFields(U,O);return[...U].sort()};ea._writeFieldsContent=function(O,U){Array.isArray(O.fieldInfos)&&O.fieldInfos.length&&
(O=z.clone(O.fieldInfos),Array.isArray(U.fieldInfos)?O.forEach(ba=>{const ka=U.fieldInfos.find(oa=>oa.fieldName.toLowerCase()===ba.fieldName.toLowerCase());ka?ka.visible=!0:U.fieldInfos.push(ba)}):U.fieldInfos=O)};ea._writeAttachmentContent=function(O){O.showAttachments||(O.showAttachments=!0)};ea._writeTextContent=function(O,U){!U.description&&O.text&&(U.description=O.text)};ea._writeMediaContent=function(O,U){Array.isArray(O.mediaInfos)&&O.mediaInfos.length&&(O=z.clone(O.mediaInfos),Array.isArray(U.mediaInfos)?
U.mediaInfos=[...U.mediaInfos,...O]:U.mediaInfos=O)};ea._readPopupInfoElements=function({description:O,mediaInfos:U,popupElements:ba}){var ka=!1,oa=!1;return ba.map(M=>{if("media"===M.type)return M.mediaInfos||!U||oa||(M.mediaInfos=U,oa=!0),C.fromJSON(M);if("text"===M.type)return M.text||!O||ka||(M.text=O,ka=!0),E.fromJSON(M);if("attachments"===M.type)return x.fromJSON(M);if("fields"===M.type)return B.fromJSON(M)}).filter(Boolean)};ea._readPopupInfo=function({description:O,mediaInfos:U,showAttachments:ba}){const ka=
[];O?ka.push(new E({text:O})):ka.push(new B);Array.isArray(U)&&U.length&&ka.push(C.fromJSON({mediaInfos:U}));ba&&ka.push(x.fromJSON({displayType:"list"}));return ka.length?ka:O};ea._getContentElementFields=function(O){if(!O||"attachments"===O.type)return[];if("custom"===O.type)return O.outFields||[];if("fields"===O.type)return this._getFieldInfoFields(O.fieldInfos||this.fieldInfos);if("media"===O.type)return(O.mediaInfos||[]).reduce((U,ba)=>[...U,...this._getMediaInfoFields(ba)],[]);if("text"===O.type)return this._extractFieldNames(O.text)};
ea._getMediaInfoFields=function(O){const {caption:U,title:ba,value:ka}=O,{fields:oa=[],normalizeField:M,tooltipField:V,sourceURL:ha,linkURL:Q}=ka||{};O=[...this._extractFieldNames(ba),...this._extractFieldNames(U),...this._extractFieldNames(ha),...this._extractFieldNames(Q),...oa];M&&O.push(M);V&&O.push(V);return O};ea._getContentFields=function(O){return"string"===typeof O?this._extractFieldNames(O):Array.isArray(O)?O.reduce((U,ba)=>[...U,...this._getContentElementFields(ba)],[]):[]};ea._collectExpressionInfoFields=
async function(O,U,ba){ba&&await a.all(ba.map(ka=>t.collectArcadeFieldNames(O,U,ka.expression)))};ea._getFieldInfoFields=function(O){return O?O.filter(U=>"undefined"===typeof U.visible?!0:!!U.visible).map(U=>U.fieldName).filter(U=>-1===U.indexOf("relationships/")&&-1===U.indexOf("expression/")):[]};ea._getActionsFields=function(O){return O?O.toArray().reduce((U,ba)=>[...U,...this._getActionFields(ba)],[]):[]};ea._getActionFields=function(O){const {className:U,title:ba,type:ka}=O;O="button"===ka||
"toggle"===ka?O.image:"";return[...this._extractFieldNames(ba),...this._extractFieldNames(U),...this._extractFieldNames(O)]};ea._getTitleFields=function(O){return"string"===typeof O?this._extractFieldNames(O):[]};ea._extractFieldNames=function(O){if(!O||"string"!==typeof O)return[];O=O.match(/{[^}]*}/g);if(!O)return[];const U=/\{(\w+):.+\}/;return(O=O.filter(ba=>!(0===ba.indexOf("{relationships/")||0===ba.indexOf("{expression/"))).map(ba=>ba.replace(U,"{$1}")))?O.map(ba=>ba.slice(1,-1)):[]};return la}(h.JSONSupport);
l.__decorate([f.property({type:p})],y.prototype,"actions",void 0);l.__decorate([f.property()],y.prototype,"content",void 0);l.__decorate([k.cast("content")],y.prototype,"castContent",null);l.__decorate([c.reader("content",["description","popupElements","mediaInfos","showAttachments"])],y.prototype,"readContent",null);l.__decorate([q.writer("content",{popupElements:{type:r.ofType(F.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:r.ofType(A.types)},description:{type:String}})],y.prototype,
"writeContent",null);l.__decorate([f.property({type:[G],json:{write:!0}})],y.prototype,"expressionInfos",void 0);l.__decorate([f.property({type:[D]})],y.prototype,"fieldInfos",void 0);l.__decorate([q.writer("fieldInfos")],y.prototype,"writeFieldInfos",null);l.__decorate([f.property({type:J})],y.prototype,"layerOptions",void 0);l.__decorate([q.writer("layerOptions")],y.prototype,"writeLayerOptions",null);l.__decorate([f.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},
default:!0}})],y.prototype,"lastEditInfoEnabled",void 0);l.__decorate([f.property()],y.prototype,"outFields",void 0);l.__decorate([f.property()],y.prototype,"overwriteActions",void 0);l.__decorate([f.property()],y.prototype,"returnGeometry",void 0);l.__decorate([f.property({json:{type:String}})],y.prototype,"title",void 0);l.__decorate([q.writer("title")],y.prototype,"writeTitle",null);l.__decorate([f.property({type:K,json:{write:!0}})],y.prototype,"relatedRecordsInfo",void 0);return y=P=l.__decorate([e.subclass("esri.PopupTemplate")],
y)})},"esri/popup/content/Content":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(b){b=d.call(this,b)||this;b.type=
null;return b}n._inheritsLoose(g,d);return g}(q.JSONSupport);l.__decorate([w.property({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=l.__decorate([k.subclass("esri.popup.content.Content")],p)})},"esri/popup/content/AttachmentsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.displayType=null;a.type="attachments";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({displayType:this.displayType})};return b}(q);l.__decorate([w.property({type:["preview","list"],json:{write:!0}})],p.prototype,"displayType",void 0);l.__decorate([w.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.popup.content.AttachmentsContent")],
p)})},"esri/popup/content/CustomContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,
h)||this;h.creator=null;h.destroyer=null;h.outFields=null;h.type="custom";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null})};return a}(d);l.__decorate([f.property()],p.prototype,"creator",void 0);l.__decorate([f.property()],p.prototype,"destroyer",void 0);l.__decorate([f.property()],p.prototype,"outFields",void 0);l.__decorate([f.property({type:["custom"],readOnly:!0})],
p.prototype,"type",void 0);return p=g=l.__decorate([m.subclass("esri.popup.content.CustomContent")],p)})},"esri/popup/FieldInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/FieldInfoFormat".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(t){t=h.call(this,t)||this;t.fieldName=null;t.format=null;t.isEditable=!1;t.label=null;t.stringFieldOption="text-box";t.statisticType=null;t.tooltip=null;t.visible=!0;return t}n._inheritsLoose(r,h);r.prototype.clone=function(){return new a({fieldName:this.fieldName,format:this.format?z.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,
tooltip:this.tooltip,visible:this.visible})};return r}(g.JSONSupport);l.__decorate([f.property({type:String,json:{write:!0}})],p.prototype,"fieldName",void 0);l.__decorate([f.property({type:b,json:{write:!0}})],p.prototype,"format",void 0);l.__decorate([f.property({type:Boolean,json:{write:!0,default:!1}})],p.prototype,"isEditable",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],p.prototype,"label",void 0);l.__decorate([m.enumeration(new k.JSONMap({richtext:"rich-text",textarea:"text-area",
textbox:"text-box"}),{default:"text-box"})],p.prototype,"stringFieldOption",void 0);l.__decorate([f.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],p.prototype,"statisticType",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],p.prototype,"tooltip",void 0);l.__decorate([f.property({type:Boolean,json:{write:!0}})],p.prototype,"visible",void 0);return p=a=l.__decorate([c.subclass("esri.popup.FieldInfo")],p)})},"esri/popup/support/FieldInfoFormat":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/date ../../intl/date ../../intl/number".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(v){v=h.call(this,v)||this;v.dateFormat=null;v.digitSeparator=!1;v.places=null;return v}n._inheritsLoose(r,h);var t=r.prototype;t.clone=function(){return new a({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};t.format=function(v){return this.dateFormat?g.formatDate(v,g.convertDateFormatToIntlOptions(this.dateFormat)):b.formatNumber(v,b.convertNumberFormatToIntlOptions(this))};return r}(q.JSONSupport);
l.__decorate([f.enumeration(d.dictionary)],p.prototype,"dateFormat",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"digitSeparator",void 0);l.__decorate([w.property({type:y.Integer,json:{write:!0}})],p.prototype,"places",void 0);return p=a=l.__decorate([k.subclass("esri.popup.support.FieldInfoFormat")],p)})},"esri/core/date":function(){define(["exports","./jsonMap"],function(n,l){const p={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",
"day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};l=l.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",
shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",
longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});const z=l.toJSON.bind(l),y=l.fromJSON.bind(l);n.dictionary=l;n.formats=p;n.fromJSON=y;n.getFormat=function(w){return p[w]};n.toJSON=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/FieldsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content ../FieldInfo".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){var a;p=a=function(h){function r(v){v=h.call(this,v)||this;v.fieldInfos=null;v.type="fields";return v}n._inheritsLoose(r,h);var t=r.prototype;t.writeFieldInfos=function(v,x){x.fieldInfos=v&&v.map(u=>u.toJSON())};t.clone=function(){return new a({fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null})};return r}(g);l.__decorate([f.property({type:[b]})],p.prototype,"fieldInfos",void 0);l.__decorate([c.writer("fieldInfos")],p.prototype,"writeFieldInfos",
null);l.__decorate([f.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=a=l.__decorate([m.subclass("esri.popup.content.FieldsContent")],p)})},"esri/popup/content/support/mediaInfoTypes":function(){define("exports ../mixins/MediaInfo ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo".split(" "),function(n,l,p,z,y,w,f){l={base:l,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":p,"column-chart":z,
"line-chart":w,"pie-chart":f,image:y}};n.default=l;n.types=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/mixins/MediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(b){b=d.call(this,b)||this;b.altText=null;b.caption="";b.title="";b.type=null;return b}n._inheritsLoose(g,d);return g}(q.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"altText",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"caption",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"title",void 0);l.__decorate([w.property({type:["image","bar-chart",
"column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=l.__decorate([k.subclass("esri.popup.content.mixins.MediaInfo")],p)})},"esri/popup/content/BarChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.type="bar-chart";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(q);l.__decorate([w.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:d.chartTypeKebabDict.write}})],p.prototype,"type",void 0);return p=g=l.__decorate([k.subclass("esri.popup.content.BarChartMediaInfo")],
p)})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(n,l,p,z,y,w,f,k,
m,c,e,q,d){p=function(g){function b(a){a=g.call(this,a)||this;a.type=null;a.value=null;return a}n._inheritsLoose(b,g);return b}(q);l.__decorate([w.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);l.__decorate([w.property({type:d,json:{write:!0}})],p.prototype,"value",void 0);return p=l.__decorate([k.subclass("esri.popup.content.mixins.ChartMediaInfo")],p)})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ./ChartMediaInfoValueSeries".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;p=b=function(a){function h(r){r=a.call(this,r)||this;r.fields=[];r.normalizeField=null;r.series=[];r.tooltipField=null;return r}n._inheritsLoose(h,a);h.prototype.clone=function(){return new b({fields:z.clone(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})};return h}(d.JSONSupport);l.__decorate([f.property({type:[String],json:{write:!0}})],p.prototype,"fields",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],
p.prototype,"normalizeField",void 0);l.__decorate([f.property({type:[g],json:{read:!1}})],p.prototype,"series",void 0);l.__decorate([f.property({type:String,json:{write:!0}})],p.prototype,"tooltipField",void 0);return p=b=l.__decorate([m.subclass("esri.popup.content.support.ChartMediaInfoValue")],p)})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/aliasOf ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.tooltip=null;h.value=null;h.x=null;h.y=null;return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({tooltip:this.tooltip,value:this.value})};return a}(d);l.__decorate([w.property()],p.prototype,"tooltip",void 0);l.__decorate([w.property()],p.prototype,"value",void 0);l.__decorate([f.aliasOf("value")],p.prototype,"x",void 0);l.__decorate([f.aliasOf("tooltip")],p.prototype,"y",void 0);
return p=g=l.__decorate([m.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],p)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["exports","./property"],function(n,l){n.aliasOf=function(p,z){return l.property({aliasOf:z?{...z,source:p}:p})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(n,l){l=l.strict()({barchart:"bar-chart",columnchart:"column-chart",
linechart:"line-chart",piechart:"pie-chart"});n.chartTypeKebabDict=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.type="column-chart";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(q);l.__decorate([w.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:d.chartTypeKebabDict.write}})],p.prototype,"type",void 0);return p=g=l.__decorate([k.subclass("esri.popup.content.ColumnChartMediaInfo")],
p)})},"esri/popup/content/ImageMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=
b.call(this,h)||this;h.refreshInterval=null;h.type="image";h.value=null;return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};return a}(q);l.__decorate([w.property({type:Number,json:{write:!0}})],p.prototype,"refreshInterval",void 0);l.__decorate([w.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);
l.__decorate([w.property({type:d,json:{write:!0}})],p.prototype,"value",void 0);return p=g=l.__decorate([k.subclass("esri.popup.content.ImageMediaInfo")],p)})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.linkURL=null;a.sourceURL=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({linkURL:this.linkURL,sourceURL:this.sourceURL})};return b}(q.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"linkURL",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"sourceURL",void 0);return p=d=l.__decorate([k.subclass("esri.popup.content.support.ImageMediaInfoValue")],
p)})},"esri/popup/content/LineChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=
b.call(this,h)||this;h.type="line-chart";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(q);l.__decorate([w.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:d.chartTypeKebabDict.write}})],p.prototype,"type",void 0);return p=g=l.__decorate([k.subclass("esri.popup.content.LineChartMediaInfo")],p)})},"esri/popup/content/PieChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.type="pie-chart";return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(q);l.__decorate([w.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:d.chartTypeKebabDict.write}})],p.prototype,"type",void 0);return p=g=l.__decorate([k.subclass("esri.popup.content.PieChartMediaInfo")],
p)})},"esri/popup/content/MediaContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content ./BarChartMediaInfo ./ColumnChartMediaInfo ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x){var u;p=u=function(D){function B(C){C=D.call(this,C)||this;C.activeMediaInfoIndex=null;C.mediaInfos=null;C.type="media";return C}n._inheritsLoose(B,D);var A=B.prototype;A.readMediaInfos=function(C){return C&&C.map(E=>{if("image"===E.type)return r.fromJSON(E);if("barchart"===E.type)return a.fromJSON(E);if("columnchart"===E.type)return h.fromJSON(E);if("linechart"===E.type)return t.fromJSON(E);if("piechart"===E.type)return v.fromJSON(E)}).filter(Boolean)};
A.writeMediaInfos=function(C,E){E.mediaInfos=C&&C.map(F=>F.toJSON())};A.clone=function(){return new u({activeMediaInfoIndex:this.activeMediaInfoIndex,mediaInfos:this.mediaInfos?z.clone(this.mediaInfos):null})};return B}(b);l.__decorate([f.property()],p.prototype,"activeMediaInfoIndex",void 0);l.__decorate([f.property({types:[x.types]})],p.prototype,"mediaInfos",void 0);l.__decorate([m.reader("mediaInfos")],p.prototype,"readMediaInfos",null);l.__decorate([e.writer("mediaInfos")],p.prototype,"writeMediaInfos",
null);l.__decorate([f.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=u=l.__decorate([c.subclass("esri.popup.content.MediaContent")],p)})},"esri/popup/content/TextContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.text=null;a.type="text";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({text:this.text})};return b}(q);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"text",void 0);l.__decorate([w.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,"type",void 0);return p=d=l.__decorate([k.subclass("esri.popup.content.TextContent")],p)})},"esri/popup/content":function(){define("exports ./content/Content ./content/AttachmentsContent ./content/CustomContent ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),
function(n,l,p,z,y,w,f){const k={base:null,key:"type",typeMap:{attachment:p,media:w,text:f,field:y}};n.BaseContent=l;n.AttachmentsContent=p;n.CustomContent=z;n.FieldsContent=y;n.MediaContent=w;n.TextContent=f;n.isContent=function(m){return m instanceof l};n.persistableTypes=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/popup/ExpressionInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.name=null;a.title=null;a.expression=null;a.returnType=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};return b}(q.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"name",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"title",
void 0);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"expression",void 0);l.__decorate([w.property({type:["string","number"],json:{write:!0}})],p.prototype,"returnType",void 0);return p=d=l.__decorate([k.subclass("esri.popup.ExpressionInfo")],p)})},"esri/popup/LayerOptions":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.returnTopmostRaster=null;a.showNoDataRecords=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};return b}(q.JSONSupport);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"returnTopmostRaster",void 0);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,
"showNoDataRecords",void 0);return p=d=l.__decorate([k.subclass("esri.popup.LayerOptions")],p)})},"esri/popup/RelatedRecordsInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/RelatedRecordsInfoFieldOrder".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){var b;p=b=function(a){function h(r){r=a.call(this,r)||this;r.showRelatedRecords=null;r.orderByFields=null;return r}n._inheritsLoose(h,a);h.prototype.clone=function(){return new b({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?z.clone(this.orderByFields):null})};return h}(d.JSONSupport);l.__decorate([f.property({type:Boolean,json:{write:!0}})],p.prototype,"showRelatedRecords",void 0);l.__decorate([f.property({type:[g],json:{write:!0}})],
p.prototype,"orderByFields",void 0);return p=b=l.__decorate([m.subclass("esri.popup.RelatedRecordsInfo")],p)})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.field=null;a.order=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({field:this.field,order:this.order})};return b}(q.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"field",void 0);l.__decorate([w.property({type:["asc","desc"],json:{write:!0}})],p.prototype,"order",void 0);return p=d=l.__decorate([k.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],
p)})},"esri/support/actions/ActionBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Identifiable".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=
b.call(this,h)||this;h.active=!1;h.className=null;h.disabled=!1;h.id=null;h.indicator=!1;h.title=null;h.type=null;h.visible=!0;return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};return a}(d.IdentifiableMixin(q));l.__decorate([w.property()],p.prototype,"active",void 0);l.__decorate([w.property()],p.prototype,"className",void 0);l.__decorate([w.property()],
p.prototype,"disabled",void 0);l.__decorate([w.property()],p.prototype,"id",void 0);l.__decorate([w.property()],p.prototype,"indicator",void 0);l.__decorate([w.property()],p.prototype,"title",void 0);l.__decorate([w.property()],p.prototype,"type",void 0);l.__decorate([w.property()],p.prototype,"visible",void 0);return p=g=l.__decorate([k.subclass("esri.support.actions.ActionBase")],p)})},"esri/core/Identifiable":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./accessorSupport/decorators/subclass"],function(n,l,p,z){let y=0;const w=f=>{f=function(k){function m(...c){c=k.call(this,...c)||this;Object.defineProperty(l._assertThisInitialized(c),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+y++});return c}l._inheritsLoose(m,k);return m}(f);return f=p.__decorate([z.subclass("esri.core.Identifiable")],f)};n.Identifiable=function(f){function k(){return f.apply(this,arguments)||this}l._inheritsLoose(k,f);return k}(w(function(){return function(){}}()));
n.Identifiable=p.__decorate([z.subclass("esri.core.Identifiable")],n.Identifiable);n.IdentifiableMixin=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/actions/ActionButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.image=null;a.type="button";return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};return b}(q);l.__decorate([w.property()],p.prototype,"image",void 0);return p=d=l.__decorate([k.subclass("esri.support.Action.ActionButton")],p)})},
"esri/support/actions/ActionToggle":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(a){a=g.call(this,a)||this;a.image=
null;a.type="toggle";a.value=!1;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};return b}(q);l.__decorate([w.property()],p.prototype,"image",void 0);l.__decorate([w.property()],p.prototype,"value",void 0);return p=d=l.__decorate([k.subclass("esri.support.Action.ActionToggle")],p)})},"esri/core/uid":function(){define(["exports"],
function(n){let l=0;n.generateUID=function(){return l++};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(n,l,p,z){function y(t){const v=[];t.forEach(x=>v.push(x));return v}function*w(t){switch(t.type){case "Feature":yield t;break;case "FeatureCollection":for(const v of t.features)v&&(yield v)}}function*f(t){if(!t)return null;switch(t.type){case "Point":yield t.coordinates;
break;case "LineString":case "MultiPoint":yield*t.coordinates;break;case "MultiLineString":case "Polygon":for(const v of t.coordinates)yield*v;break;case "MultiPolygon":for(const v of t.coordinates)for(const x of v)yield*x}}function*k(t,v={}){const {geometryType:x,objectIdFieldName:u}=v;for(;;){const {value:D,done:B}=t.next();if(B)break;const {geometry:A,properties:C,id:E}=D;if(A&&r[A.type]!==x)continue;const F=C||{};u&&null!=E&&!F[u]&&(F[u]=E);yield new p(A?q(new z,A,v):null,F)}}function m(t){for(;;){const {value:v,
done:x}=t.next();if(x)return!1;if(2<v.length)return!0}}function c(t){let v=0;for(let x=0;x<t.length;x++){const u=t[x],D=t[(x+1)%t.length];v+=u[0]*D[1]-D[0]*u[1]}return 0>=v}function e(t){const v=t[0],x=t[t.length-1];v[0]===x[0]&&v[1]===x[1]&&v[2]===x[2]||t.push(v);return t}function q(t,v,x){switch(v.type){case "LineString":return b(t,v.coordinates,x),t;case "MultiLineString":for(const D of v.coordinates)b(t,D,x);return t;case "MultiPoint":return b(t,v.coordinates,x),t;case "MultiPolygon":for(var u of v.coordinates)for(d(t,
u[0],x),v=1;v<u.length;v++)g(t,u[v],x);return t;case "Point":return h(t,v.coordinates,x),t;case "Polygon":u=v.coordinates;d(t,u[0],x);for(v=1;v<u.length;v++)g(t,u[v],x);return t}}function d(t,v,x){v=e(v);c(v)?b(t,v,x):a(t,v,x)}function g(t,v,x){v=e(v);c(v)?a(t,v,x):b(t,v,x)}function b(t,v,x){for(const u of v)h(t,u,x);t.lengths.push(v.length)}function a(t,v,x){for(let u=v.length-1;0<=u;u--)h(t,v[u],x);t.lengths.push(v.length)}function h(t,v,x){const [u,D,B]=v;t.coords.push(u,D);x.hasZ&&t.coords.push(B||
0)}const r={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};n.createOptimizedFeatures=function(t,v){a:for(t=k(w(t),v),v=[];;){const {value:x,done:u}=t.next();if(u){t=v;break a}v.push(x)}return t};n.inferLayerProperties=function(t,v={}){const x=w(t);t=[];const u=new Set,D=new Set;var B=!1;let A=Number.NEGATIVE_INFINITY,C=null,E=!1,F=void 0;({geometryType:v=
null}=v);for(var G=!1;;){const {value:L,done:I}=x.next();if(I){var J=C&&1===C.length&&C[0]||null;if(J)for(const T of t)T.name===J&&(T.type="esriFieldTypeOID");return{fields:t,geometryType:v,hasZ:B,maxObjectId:Math.max(0,A),objectIdFieldName:J,objectIdFieldType:F,unknownFields:y(D)}}const {geometry:N,properties:P,id:R}=L;if(N&&(v||(v=r[N.type]),r[N.type]!==v))continue;B||(B=f(N),B=m(B));!E&&(E=null!=R)&&(F=typeof R,"number"===F&&(C=Object.keys(P).filter(T=>P[T]===R)));E&&"number"===F&&null!=R&&(A=
Math.max(A,R),1<C.length?C=C.filter(T=>P[T]===R):1===C.length&&(C=P[C[0]]===R?C:[]));if(!G&&P)for(J in G=!0,P)if(!u.has(J)){var K=P[J];if(null==K)G=!1,D.add(J);else{a:switch(typeof K){case "string":K="esriFieldTypeString";break a;case "number":K="esriFieldTypeDouble";break a;default:K="unknown"}"unknown"===K?D.add(J):(D.delete(J),u.add(J),t.push({name:J,alias:J,type:K}))}}}};n.validateGeoJSON=function(t){if(!t)throw new l("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==t.type&&"FeatureCollection"!==
t.type)throw new l("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:t});({crs:t}=t);if(t){var v="string"===typeof t?t:"name"===t.type?t.properties.name:null,x=/.*(CRS84H?|4326)$/i;if(!v||!x.test(v))throw new l("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t});}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang",
"../../../../symbols/support/defaultsJSON"],function(n,l,p,z){n.createDefaultAttributesFunction=function(y,w){if(l("csp-restrictions"))return()=>({[w]:null,...y});try{let f=`this.${w} = null;`;for(const m in y){const c=m.indexOf(".")?`["${m}"]`:`.${m}`;f+=`this${c} = ${JSON.stringify(y[m])};`}const k=new Function(f);return()=>new k}catch(f){return()=>({[w]:null,...y})}};n.createDefaultTemplate=function(y={}){return[{name:"New Feature",description:"",prototype:{attributes:p.clone(y)}}]};n.createDrawingInfo=
function(y){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===y||"esriGeometryMultipoint"===y?z.defaultPointSymbolJSON:"esriGeometryPolyline"===y?z.defaultPolylineSymbolJSON:z.defaultPolygonSymbolJSON}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(n){const l=[252,146,31,255],p={type:"esriSMS",style:"esriSMSCircle",size:6,color:l,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},
z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:l};n.defaultColor=l;n.defaultOutlineColor=[153,153,153,255];n.defaultPointSymbolJSON=p;n.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};n.defaultPolylineSymbolJSON=z;n.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,
0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};n.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};n.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};n.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBF":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Logger ../../../../../core/Error ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ./FeatureSetReader ../../../../../core/pbf ./FeatureSetReaderPBFHeader".split(" "),
function(n,l,p,z,y,w,f,k,m,c){function e(d){var g=d.getLength();for(g=d.pos()+g;d.pos()<g&&d.next();)switch(d.tag()){case 1:return d=d.getString(),""===d?null:d;case 2:return d.getFloat();case 3:return d.getDouble();case 4:return d.getSInt32();case 5:return d.getUInt32();case 6:return d.getInt64();case 7:return d.getUInt64();case 8:return d.getSInt64();case 9:return d.getBool();default:return d.skip(),null}return null}const q=p.getLogger("esri.view.2d.layers.features.support.FeatureSetReaderPBF");
p=function(d){function g(a,h,r,t){a=d.call(this,a)||this;a._hasNext=!1;a._isPoints=!1;a._isPolygons=!1;a._featureIndex=-1;a._featureOffset=0;a._cache={area:0,unquantGeometry:void 0,geometry:void 0,centroid:void 0,legacyFeature:void 0,optFeature:void 0};a._geometryType=t;a._reader=h;a._header=r;a._hasNext=r.hasFeatures;a._isPoints="esriGeometryPoint"===t;a._isPolygons="esriGeometryPolygon"===t;return a}l._inheritsLoose(g,d);g.fromBuffer=function(a,h){a:{try{const v=new m(new Uint8Array(a),new DataView(a));
for(;v.next();)switch(v.tag()){case 2:b:{for(var r=v.getMessage();r.next();)switch(r.tag()){case 1:var t=r.getMessage();break b;default:r.skip()}t=null}break a;default:v.skip()}}catch(v){a=new z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:v}),q.error(a)}t=null}a=t;t=c.parseHeader(a,"esriGeometryPoint"===h);r=k.FeatureSetReader.createInstance();return new g(r,a,t,h)};var b=g.prototype;b.getApproximateSize=function(){return this._hasFilter?Math.max(Math.round(this.size*Math.abs(this._xmax-
this._xmin)*Math.abs(this._ymax-this._ymin)/262144),0):this.size};b.getQuantizationTransform=function(){return this._header.transform};b.getCursor=function(){return this.copy()};b.getIndex=function(){return this._featureIndex};b.setIndex=function(a){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;this._featureIndex=a};b.getAttributeHash=function(){let a="";this._header.fieldIndexMap.forEach(h=>
{a+=this._readAttributeAtIndex(h)+"."});return a};b.getObjectId=function(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)};b.getDisplayId=function(){return this._header.displayIds[this._featureIndex]};b.setDisplayId=function(a){this._header.displayIds[this._featureIndex]=a};b.getGroupId=function(){return this._header.groupIds[this._featureIndex]};b.setGroupId=function(a){this._header.groupIds[this._featureIndex]=a};b.readLegacyFeature=function(){if(void 0===this._cache.legacyFeature){var a,
h=this.readCentroid();h={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:null!=(a=h&&{x:h.coords[0],y:h.coords[1]})?a:null};return this._cache.legacyFeature=h}return this._cache.legacyFeature};b.readOptimizedFeature=function(){if(void 0===this._cache.optFeature){const a=new y(this.readGeometry(),this.readAttributes(),this.readCentroid());return this._cache.optFeature=a}return this._cache.optFeature};b.getXHydrate=function(){const a=
this._header.centroid[2*this._featureIndex],h=this.getQuantizationTransform();return a*h.scale[0]+h.translate[0]};b.getYHydrate=function(){const a=this._header.centroid[2*this._featureIndex+1],h=this.getQuantizationTransform();return h.translate[1]-a*h.scale[1]};b.readLegacyPointGeometry=function(){return{x:this._header.centroid[2*this._featureIndex]+this._tx,y:this._header.centroid[2*this._featureIndex+1]+this._ty}};b.readLegacyGeometry=function(){const a=this.readGeometry();return f.convertToGeometry(a,
this.geometryType,!1,!1)};b.readLegacyCentroid=function(){const a=this.readCentroid();if(!a)return null;const [h,r]=a.coords;return{x:h,y:r}};b.readGeometryArea=function(){this._cache.area||this.readGeometry();return this._cache.area};b.readUnquantizedGeometry=function(){if(void 0===this._cache.unquantGeometry){var a=this.readGeometry();if(!a)return this._cache.unquantGeometry=null;a=a.clone();const h=a.lengths,r=a.coords;for(let t=0,v=2;t<h.length;t++,v+=2){const x=h[t];for(let u=1;u<x;u+=1,v+=2)r[v]+=
r[v-2],r[v+1]+=r[v-1]}return this._cache.unquantGeometry=a}return this._cache.unquantGeometry};b.readHydratedGeometry=function(){var a=this.readGeometry();if(!a)return null;a=a.clone();this._isPoints&&(a.coords[0]-=this._tx,a.coords[1]-=this._ty);f.unquantizeOptimizedGeometry(a,a,this.hasZ,this.hasM,this.getQuantizationTransform());return a};b.readGeometry=function(){if(void 0===this._cache.geometry){let a=null;if(this._isPoints)a=new w([],[this._header.centroid[2*this._featureIndex]+this._tx,this._header.centroid[2*
this._featureIndex+1]+this._ty]);else{const h=this._header.offsets.geometry[this._featureIndex],r=this._reader;if(0===h)return null;r.move(h);try{a=this._parseGeometry(r)}catch(t){return console.error("Failed to parse geometry!",t),null}}return this._cache.geometry=a}return this._cache.geometry};b.readCentroid=function(){if(void 0===this._cache.centroid){var a=null;a=this._header.centroid[2*this._featureIndex]+this._tx;const h=this._header.centroid[2*this._featureIndex+1]+this._ty;if(268435455===
a){if(a=this._computeCentroid())this._header.centroid[2*this._featureIndex]=a.coords[0]-this._tx,this._header.centroid[2*this._featureIndex+1]=a.coords[1]-this._ty}else a=new w([],[a,h]);return this._cache.centroid=a}return this._cache.centroid};b.copy=function(){var a=this._reader.clone();a=new g(this.instance,a,this._header,this.geometryType);this.copyInto(a);return a};b.next=function(){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;
this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;if(!this._hasFilter)return++this._featureIndex<this.size;for(;++this._featureIndex<this.size&&!this._passesFilter(););return this._featureIndex<this.size};b._readAttribute=function(a,h){a=this._header.hasFieldIndex(a)?a:a.toLowerCase().trim();var r=this._header.getFieldIndex(a);if(null!=r)return r=this._readAttributeAtIndex(r),h?this._header.isDateField(a)?new Date(r):r:r};b._readAttributes=function(){const a={};this._header.fieldIndexMap.forEach((h,
r)=>{a[r]=this._readAttributeAtIndex(h)});return a};b.copyInto=function(a){d.prototype.copyInto.call(this,a);a._featureIndex=this._featureIndex;a._featureOffset=this._featureOffset;a._hasNext=this._hasNext};b._passesFilter=function(){if(!this._hasFilter)return!0;let a=this._header.centroid[2*this._featureIndex],h=this._header.centroid[2*this._featureIndex+1];if(268435455===a){if(this._isPolygons&&!this.readCentroid())return!1;a=this._header.centroid[2*this._featureIndex];h=this._header.centroid[2*
this._featureIndex+1]}return a>=this._xmin&&a<=this._xmax&&h>=this._ymin&&h<=this._ymax?!0:!1};b._readAttributeAtIndex=function(a){const h=this._reader;h.move(this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+a]);return e(h)};b._preprocessPolygon=function(a,h){let r=0,t=0,v=0;var x=!1,u=!1;let D=!1,B=-1;const A=[];let C=0,E=!1;for(let L=0;L<h.length;L++){const I=h[L];var F=a[2*r],G=a[2*r+1],J=0;for(var K=1;K<I;K++){const N=F+a[2*(r+K)],P=G+a[2*(r+K)+1],R=(N-F)*(P+G);F=N;G=
P;J+=.5*R}(F=0<J)&&E&&(t+=I);F||(B++,E=!1);if(1E6<=B)break;C+=J;x&&F&&u&&(D=!0);a[2*v]=a[2*t];a[2*v++ +1]=a[2*t++ +1];x=1;u=a[2*t];J=a[2*t++ +1];for(F=2;F<I;F++)G=a[2*t],K=a[2*t++ +1],0===u*K-G*J?(u+=G,J+=K):(a[2*v]=u,a[2*v++ +1]=J,x++,u=G,J=K);a[2*v]=u;a[2*v++ +1]=J;x++;A.push(x);x=!1;u=!0;r+=I}return A.length?(this._cache.area=Math.abs(C),new w(A,a,D)):null};b._parseGeometry=function(a){var h=a.getLength();const r=a.pos()+h;h=[];const t=[];for(;a.pos()<r&&a.next();)switch(a.tag()){case 2:var v=
a.getUInt32();for(v=a.pos()+v;a.pos()<v;)t.push(a.getUInt32());break;case 3:v=a.getUInt32();for(v=a.pos()+v;a.pos()<v;)h.push(a.getSInt32()),h.push(a.getSInt32()),this.hasZ&&a.getSInt32(),this.hasM&&a.getSInt32();break;default:a.skip()}a=0;for(const x of t)h[2*a]+=this._tx,h[2*a+1]+=this._ty,a+=x;return this._isPolygons?this._preprocessPolygon(h,t):new w(t,h)};l._createClass(g,[{key:"geometryType",get:function(){return this._geometryType}},{key:"size",get:function(){return this._header.featureCount}},
{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"stride",get:function(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}},{key:"hasFeatures",get:function(){return this._header.hasFeatures}},{key:"hasNext",get:function(){return this._hasNext}},{key:"exceededTransferLimit",get:function(){return this._header.exceededTransferLimit}}]);return g}(k.FeatureSetReader);n.FeatureSetReaderPBF=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFHeader":function(){define(["exports",
"../../../../../core/Error","../../../../../tasks/operations/pbfFeatureServiceParser"],function(n,l,p){let z=function(){function y(){this.hasFeatures=!1;this.fieldIndexMap=new Map;this.objectIdFieldIndex=this.featureCount=this.fieldCount=0;this.dateFields=new Set;this.offsets={attributes:[],geometry:[]};this.centroid=[]}var w=y.prototype;w.hasFieldIndex=function(f){return this.fieldIndexMap.has(f)};w.isDateField=function(f){return this.dateFields.has(f)};w.getFieldIndex=function(f){return this.fieldIndexMap.get(f)};
return y}();n.FeatureSetHeader=z;n.parseHeader=function(y,w){const f=y.pos(),k=new z;let m=0,c=0,e=null,q=null,d=null,g=!1;for(;y.next();)switch(y.tag()){case 1:e=y.getString();break;case 3:q=y.getString();break;case 12:d=y.processMessage(p.parseTransform);break;case 9:k.exceededTransferLimit=y.getBool();k.exceededTransferLimit&&(k.offsets.geometry=new Int32Array(8E3),k.centroid=new Int32Array(16E3));break;case 13:var b=y;var a=b.getLength();a=b.pos()+a;for(var h={name:"",isDate:!1};b.pos()<a&&b.next();)switch(b.tag()){case 1:h.name=
b.getString();break;case 2:"esriFieldTypeDate"===p.parseFieldType(b.getEnum())&&(h.isDate=!0);break;default:b.skip()}b=h;a=b.name.toLowerCase().trim();h=m++;k.fieldIndexMap.set(b.name,h);k.fieldIndexMap.set(a,h);b.isDate&&(k.dateFields.add(b.name),k.dateFields.add(a));break;case 15:b=y.getLength();b=y.pos()+b;k.exceededTransferLimit||(a=k.centroid,k.offsets.geometry.push(0),a.push(268435455),a.push(268435455));!g&&k.exceededTransferLimit&&(g=!0,k.offsets.attributes=new Uint32Array(8E3*m));for(a=c*
m;y.pos()<b&&y.next();)switch(y.tag()){case 1:g?k.offsets.attributes[a++]=y.pos():k.offsets.attributes.push(y.pos());h=y.getLength();y.skipLen(h);break;case 2:if(w)for(h=y.getLength(),h=y.pos()+h;y.pos()<h&&y.next();)switch(y.tag()){case 3:y.getUInt32();var r=y.getSInt32(),t=y.getSInt32();k.centroid[2*c]=r;k.centroid[2*c+1]=t;break;default:y.skip()}else k.offsets.geometry[c]=y.pos(),h=y.getLength(),y.skipLen(h);break;case 4:h=y.getLength();for(h=y.pos()+h;y.pos()<h&&y.next();)switch(y.tag()){case 3:y.getUInt32();
r=y.getSInt32();t=y.getSInt32();k.centroid[2*c]=r;k.centroid[2*c+1]=t;break;default:y.skip()}break;default:y.skip()}c++;k.hasFeatures=!0;break;default:y.skip()}w=e||q;if(!w)throw new l("FeatureSet has no objectId or globalId field name");k.featureCount=c;k.fieldCount=m;k.objectIdFieldIndex=k.getFieldIndex(w);k.transform=d;k.displayIds=new Uint32Array(k.featureCount);k.groupIds=new Uint16Array(k.featureCount);y.move(f);return k};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSource":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../../../../../core/Evented","../../../../../core/accessorSupport/diffUtils"],function(n,l,p,z,y){let w=function(){function k(c){this._abortController=new AbortController;this.requests={pending:[],done:[]};this.tile=c}var m=k.prototype;m.add=function(c){this.requests.done.push(c);c.request.end&&(this.resolved=!0)};m.abort=function(){this._abortController.abort()};l._createClass(k,[{key:"signal",get:function(){return this._abortController.signal}}]);
return k}(),f=function(){function k(c){this.events=new z;this._subscriptions=new Map;this._serviceQueryInfo={outSpatialReference:c.outSR};this._serviceInfo=c.serviceInfo;this._onRequest=c.onRequest}var m=k.prototype;m.queryLastEditDate=async function(){throw Error("Service does not support query type");};m.query=async function(c,e){throw Error("Service does not support query");};m.update=function(c){y.diff(c,this._sourceQueryInfo)&&(this._sourceQueryInfo=c)};m.updateSubscriptions=function(){};m.setViewState=
function(c){};m.subscribe=function(c){const e=new w(c);this._subscriptions.set(c.id,e)};m.unsubscribe=function(c){const e=this.get(c.id);p.isSome(e)&&e.abort();this._subscriptions.delete(c.id)};m.pause=function(){};m.resume=function(){};m.get=function(c){return this._subscriptions.has(c)?this._subscriptions.get(c):null};m.enableEvent=function(c,e){};l._createClass(k,[{key:"geometryType",get:function(){return this._serviceInfo.geometryType}}]);return k}();n.DataTileSource=f;n.DataTileSubscription=
w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/GeoEventSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../support/FeatureSetReaderJSON ../../../../../chunks/rbush ../../../../../layers/graphics/data/StreamFeatureManager ../../../../../layers/graphics/sources/connections/createConnection ./DataTileSource".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){function q(r,t){const v=r.weakClone(),x=w.quantizeX(t,r.geometry.coords[0]);r=w.quantizeY(t,r.geometry.coords[1]);v.geometry=new y([],[x,r]);return v}function d(r){switch(r){case "esriGeometryPoint":return q;default:return(t,v)=>{const x=t.weakClone(),u=new y;t=w.quantizeOptimizedGeometry(u,t.geometry,!1,!1,r,v,!1,!1);x.geometry=t;return x}}}function g(r){switch(r){case "esriGeometryPoint":return t=>({minX:t.geometry.coords[0],minY:t.geometry.coords[1],maxX:t.geometry.coords[0],
maxY:t.geometry.coords[1]});default:return t=>{let v=Infinity,x=Infinity,u=-Infinity,D=-Infinity;t.geometry.forEachVertex((B,A)=>{v=Math.min(v,B);x=Math.min(x,A);u=Math.max(u,B);D=Math.max(D,A)});return{minX:v,minY:x,maxX:u,maxY:D}}}}function b(r,t){t=k.rbush(9,g(t));t.load(r);return t}function a(r,t){return r.search({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]})}let h=function(){function r(v,x){this.onUpdate=v;this._geometryType=x;this._objectIdToFeature=new Map}var t=r.prototype;
t.add=function(v){this._objectIdToFeature.set(v.objectId,v);this._index=null};t.get=function(v){return this._objectIdToFeature.has(v)?this._objectIdToFeature.get(v):null};t.forEach=function(v){this._objectIdToFeature.forEach(v)};t.search=function(v){this._index||(this._index=b(this._features,this._geometryType));return a(this._index,v)};t.removeById=function(v){const x=this._objectIdToFeature.get(v);return x?(this._objectIdToFeature.delete(v),this._index=null,x):null};t.update=function(v,x){this.onUpdate(v,
x)};l._createClass(r,[{key:"_features",get:function(){const v=[];this._objectIdToFeature.forEach(x=>v.push(x));return v}},{key:"size",get:function(){return this._objectIdToFeature.size}}]);return r}();p=function(r){function t(x){var u=r.call(this,x)||this;u.type="geoevent";u._dataReceiveEventEnabled=!1;u._updateInfo={websocket:0,client:0};var {outSR:D}=x;const {geometryType:B,objectIdField:A,timeInfo:C,purgeOptions:E,source:F,spatialReference:G,serviceFilter:J,maxReconnectionAttempts:K,maxReconnectionInterval:L,
updateInterval:I}=x.serviceInfo,N=new h(u._onUpdate.bind(l._assertThisInitialized(u)),B),P=new m["default"](N,A,C,E);D=c.createConnection(F,G,D,B,J,K,L);u._store=N;u._manager=P;u._connection=D;u._quantize=d(B);u._handles=[u._connection.on("feature",T=>u._onFeature(T)),u._connection.watch("connectionStatus",T=>u.events.emit("connectionStatus",T)),u._connection.watch("errorString",T=>u.events.emit("errorString",T))];let R=performance.now();u._updateIntervalId=setInterval(()=>{var T=performance.now(),
W=T-R;2500<W&&(R=T,T=Math.round(u._updateInfo.client/(W/1E3)),W=Math.round(u._updateInfo.websocket/(W/1E3)),u._updateInfo.client=0,u._updateInfo.websocket=0,u.events.emit("updateRate",{client:T,websocket:W}));x.canAcceptRequest()&&u._manager.checkForUpdates()},I);return u}l._inheritsLoose(t,r);var v=t.prototype;v.destroy=function(){clearInterval(this._updateIntervalId);this._handles.forEach(x=>x.remove());this._connection.destroy()};v._fetchDataTile=function(){};v.enableEvent=function(x,u){"data-received"===
x&&(this._dataReceiveEventEnabled=u)};v.subscribe=function(x){r.prototype.subscribe.call(this,x);const u=this._getTileFeatures(x);this._onRequest({tile:x,id:x.key.id,features:u,end:!0},"new")};v.unsubscribe=function(x){r.prototype.unsubscribe.call(this,x)};v.forEachRequest=function(x,u){const D=this._subscriptions.get(x),{tile:B,signal:A}=D;x={tile:B,id:x,features:this._getTileFeatures(B),end:!0};u(x,{signal:A})};v.resend=async function(x){this._subscriptions.forEach(u=>{({tile:u}=u);u={tile:u,id:u.id,
features:this._getTileFeatures(u),end:!0};this._onRequest(u,"update",x)})};v._getTileFeatures=function(x){const u=this._store.search(x).map(D=>this._quantize(D,x.transform));return f.FeatureSetReaderJSON.fromOptimizedFeatures(u,this.geometryType,x.transform)};v._onFeature=function(x){this._updateInfo.websocket++;try{this._dataReceiveEventEnabled&&this.events.emit("feature",x);const u=w.convertFromFeature(x,this.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(u)}catch(u){}};v._onUpdate=
async function(x,u){const D=z.andThen(x,A=>b(A,this.geometryType)),B=z.andThen(u,A=>b(A,this.geometryType));z.isSome(x)&&(this._updateInfo.client+=x.length);this._subscriptions.forEach((A,C)=>{const E=A.tile;A=z.andThen(D,G=>a(G,E));A=z.andThen(A,G=>G.map(J=>this._quantize(J,E.transform)));A=z.andThen(A,G=>f.FeatureSetReaderJSON.fromOptimizedFeatures(G,this.geometryType,E.transform));var F=z.andThen(B,G=>a(G,E));F=z.andThen(F,G=>G.map(J=>J.objectId));this._onRequest({tile:E,id:C,features:A,remove:z.unwrapOr(F,
[]),end:!0},"update")})};l._createClass(t,[{key:"updating",get:function(){return!1}}]);return t}(e.DataTileSource);n.GeoEventSource=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/StreamFeatureManager":function(){define(["exports","../../../core/maybe","../../../core/mathUtils","../../../core/CircularArray"],function(n,l,p,z){let y=function(){function w(k,m,c,e,q=128){this._trackIdToObservations=new Map;this._idCounter=0;this._lastPurge=performance.now();this._addOrUpdated=
new Map;this._removed=[];this._maxAge=0;this._timeInfo=c;this._purgeOptions=e;this.store=k;this.objectIdField=m;this.purgeInterval=q;this._useGeneratedIds="__esri_stream_id__"===this.objectIdField}var f=w.prototype;f.add=function(k){if(this._useGeneratedIds){var m=this._nextId();k.attributes[this.objectIdField]=m;k.objectId=m}else k.objectId=k.attributes[this.objectIdField];this._addOrUpdated.set(k.objectId,k);this._maxAge=Math.max(this._maxAge,k.attributes[this._timeInfo.startTimeField]);if(this._timeInfo.trackIdField){m=
k.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(m)){var c=l.isSome(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1E3;c=p.clamp(c,0,1E3);this._trackIdToObservations.set(m,new z(c))}k=this._trackIdToObservations.get(m).enqueue(k.objectId);l.isSome(k)&&(this._addOrUpdated.has(k)?this._addOrUpdated.delete(k):this._removed.push(k))}};f.checkForUpdates=function(){const k=this._getToAdd();var m=this._getToRemove();const c=performance.now();
c-this._lastPurge>=this.purgeInterval&&(this._purge(c),this._lastPurge=c);const e=[];if(l.isSome(m))for(const q of m)m=this.store.removeById(q),l.isSome(m)&&e.push(m);if(l.isSome(k))for(const q of k)q.attributes.__esri_timestamp__=c,this.store.add(q);(k||e)&&this.store.update(k,e)};f._getToAdd=function(){if(!this._addOrUpdated.size)return null;const k=Array(this._addOrUpdated.size);let m=0;this._addOrUpdated.forEach(c=>k[m++]=c);this._addOrUpdated.clear();return k};f._getToRemove=function(){const k=
this._removed;if(!this._removed.length)return null;this._removed=[];return k};f._nextId=function(){const k=this._idCounter;this._idCounter=(this._idCounter+1)%4294967294+1;return k};f._purge=function(k){const m=this._purgeOptions;l.isSome(m)&&(this._purgeSomeByDisplayCount(m),this._purgeByAge(m),this._purgeByAgeReceived(k,m),this._purgeTracks())};f._purgeSomeByDisplayCount=function(k){if(k.displayCount){var m=this.store.size;m>k.displayCount&&this._trackIdToObservations.forEach(c=>{m>k.displayCount&&
c.size&&(c=l.unwrap(c.dequeue()),this._removed.push(c),m--)})}};f._purgeByAge=function(k){var m;if(k.age&&null!=(m=this._timeInfo)&&m.startTimeField){var c=this._maxAge-6E4*k.age;this.store.forEach(e=>{e.attributes[this._timeInfo.startTimeField]<c&&this._removed.push(e.objectId)})}};f._purgeByAgeReceived=function(k,m){if(m.ageReceived){var c=k+6E4*m.ageReceived;this.store.forEach(e=>{e.attributes.__esri_timestamp__<c&&this._removed.push(e.objectId)})}};f._purgeTracks=function(){this._trackIdToObservations.forEach((k,
m)=>{0===k.size&&this._trackIdToObservations.delete(m)})};return w}();n.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";n.ESRI_TIMESTAMP="__esri_timestamp__";n.default=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(n,l){return function(){function p(y=Number.POSITIVE_INFINITY){this._start=this.size=0;this.maxSize=y;this._buffer=isFinite(y)?Array(y):[]}var z=p.prototype;z.enqueue=function(y){if(this.size===
this.maxSize){const w=this._buffer[this._start];this._buffer[this._start]=y;this._start=(this._start+1)%this.maxSize;return w}isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=y:this._buffer[this._start+this.size++]=y;return null};z.dequeue=function(){if(0===this.size)return null;const y=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+1)%this.maxSize;return y};z.clear=function(){for(;l.isSome(this.dequeue()););};n._createClass(p,
[{key:"entries",get:function(){return this._buffer}}]);return p}()})},"esri/layers/graphics/sources/connections/createConnection":function(){define(["exports","./WebSocketConnection","./GeoEventConnection"],function(n,l,p){n.createConnection=function(z,y,w,f,k,m,c){const e=0===z.path.indexOf("wss://")||0===z.path.indexOf("ws://");z={source:z,sourceSpatialReference:y,spatialReference:w,geometryType:f,filter:k,maxReconnectionAttempts:m,maxReconnectionInterval:c};return e?new l.WebSocketConnection(z):
new p(z)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/WebSocketConnection":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/Error ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/promiseUtils ../../../../tasks/operations/zscale ./StreamConnection".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h){const r=w.getLogger("esri.layers.graphics.sources.connections.WebSocketConnection");(function(t){t[t.CONNECTING=0]="CONNECTING";t[t.OPEN=1]="OPEN";t[t.CLOSING=2]="CLOSING";t[t.CLOSED=3]="CLOSED"})(n.ReadyState||(n.ReadyState={}));n.WebSocketConnection=function(t){function v(u){var D=t.call(this)||this;D.errorString=null;const {geometryType:B,spatialReference:A,sourceSpatialReference:C}=u;D._config=u;D._featureZScaler=a.getGeometryZScaler(B,C,A);D._open();
return D}l._inheritsLoose(v,t);var x=v.prototype;x._open=async function(){await this._tryCreateWebSocket();this.destroyed||await this._handshake()};x.destroy=function(){y.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close());this._websocket=null};x._tryCreateWebSocket=async function(u=this._config.source.path,D=1E3,B=0){try{this.destroyed||(this._websocket=await this._createWebSocket(u),
this.notifyChange("connectionStatus"))}catch(A){const C=D/1E3;if(this._config.maxReconnectionAttempts&&B>=this._config.maxReconnectionAttempts)r.error(new e("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),this.destroy();else return r.error(new e("websocket-connection",`Failed to connect. Attempting to reconnect in ${C}s`,A)),await b.after(D),this._tryCreateWebSocket(u,Math.min(1.5*D,1E3*this._config.maxReconnectionInterval),B+1)}};x._createWebSocket=
function(u){const D=new WebSocket(u);u=b.create((B,A)=>{D.onopen=()=>B(D);D.onclose=C=>A(C)});u.then(()=>{this.destroyed?(D.onclose=()=>{},D.close()):(D.onclose=B=>this._onClose(B),D.onerror=B=>this._onError(B),D.onmessage=B=>this._onMessage(B))});return u};x._handshake=async function(u=1E4){const D=this._websocket;if(!y.isNone(D)){var B=b.createResolver(),A=D.onmessage,{filter:C,outFields:E,spatialReference:F}=this._config;B.timeout(u);D.onmessage=G=>{var J;let K=null;try{K=JSON.parse(G.data)}catch(L){}K&&
"object"===typeof K||(r.error(new e("websocket-connection","Protocol violation. Handshake failed - malformed message",G.data)),B.reject(),this.destroy());(null==(J=K.spatialReference)?void 0:J.wkid)!==(null==F?void 0:F.wkid)&&(r.error(new e("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${F.wkid}`,G.data)),B.reject(),this.destroy());"json"!==K.format&&(r.error(new e("websocket-connection","Protocol violation. Handshake failed - format is not set",G.data)),B.reject(),
this.destroy());C&&K.filter!==C&&r.error(new e("websocket-connection","Tried to set filter, but server doesn't support it"));E&&K.outFields!==E&&r.error(new e("websocket-connection","Tried to set outFields, but server doesn't support it"));D.onmessage=A;B.resolve()};D.send(JSON.stringify({filter:C,outFields:E,format:"json",spatialReference:{wkid:F.wkid}}));return B.promise}};x._onMessage=function(u){try{const D=JSON.parse(u.data);if("featureResult"!==D.type)throw new e("websocket-connection","Protocol violation - Expected to find message of type 'featureResult'",
D);for(const B of D.features)this._featureZScaler&&this._featureZScaler(B.geometry),this.onFeature(B)}catch(D){r.error(new e("websocket-connection","Failed to parse message",D)),this.destroy()}};x._onError=function(u){this._set("errorString","Encountered an error over WebSocket connection");r.error("websocket-connection","Encountered an error over WebSocket connection")};x._onClose=function(u){this._websocket=null;this.notifyChange("connectionStatus");1E3!==u.code&&r.error("websocket-connection",
`WebSocket closed unexpectedly with error code ${u.code}`);this.destroyed||this._open()};l._createClass(v,[{key:"connectionStatus",get:function(){if(y.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case n.ReadyState.CONNECTING:case n.ReadyState.OPEN:return"connected";case n.ReadyState.CLOSING:case n.ReadyState.CLOSED:return"disconnected"}}}]);return v}(h);p.__decorate([k.property()],n.WebSocketConnection.prototype,"connectionStatus",null);p.__decorate([k.property()],
n.WebSocketConnection.prototype,"errorString",void 0);n.WebSocketConnection=p.__decorate([c.subclass("esri.layers.graphics.sources.connections.WebSocketConnection")],n.WebSocketConnection);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/StreamConnection":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/Evented ../../../../core/HandleOwner".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){p=function(g){function b(){return g.apply(this,arguments)||this}n._inheritsLoose(b,g);b.prototype.onFeature=function(a){this.emit("feature",a)};return b}(q.EventedMixin(d.HandleOwner));return p=l.__decorate([k.subclass("esri.layers.graphics.sources.connections.StreamConnection")],p)})},"esri/layers/graphics/sources/connections/GeoEventConnection":function(){define("require ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/Error ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/promiseUtils ../../../../geometry/SpatialReference ../../../../geometry/support/jsonUtils ../../../../geometry ../../../../request ../../../../tasks/support/Query ../../../../tasks/operations/query ./WebSocketConnection".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u){const D=w.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection"),B={maxQueryDepth:5,maxRecordCountFactor:3};z=function(A){function C(F){return A.call(this,{...B,...F})||this}l._inheritsLoose(C,A);var E=C.prototype;E._open=async function(){var F=await this._fetchServiceDefinition(this._config.source);F.timeInfo.trackIdField||D.warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");
F=await this._fetchWebSocketUrl(F.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices());await this._buddyServicesQuery;await this._tryCreateWebSocket(F);const {filter:G,outFields:J}=this._config;this.destroyed||this._setFilter(G,J)};E._onMessage=function(F){let G;try{G=this._enrich(JSON.parse(F.data)),this._featureZScaler&&this._featureZScaler(G.geometry)}catch(J){D.error(new e("geoevent-connection","Failed to parse message",J));
return}this.onFeature(G)};E._fetchServiceDefinition=async function(F){return this._serviceDefinition=F=(await t(F.path,{query:{f:"json"},responseType:"json"})).data};E._fetchWebSocketUrl=async function(F,G){const {urls:J,token:K}=F[0];return`${this._inferWebSocketBaseUrl(J)}/subscribe?outSR=${G.wkid}${K?"\x26token\x3d"+K:""}`};E._inferWebSocketBaseUrl=function(F){if(1===F.length)return F[0];for(const G of F)if(-1!==G.indexOf("wss"))return G;D.error(new e("geoevent-connection","Unable to infer WebSocket url",
F));return null};E._setFilter=async function(F,G){const J=this._websocket;if(!(y.isNone(J)||y.isNone(F)&&y.isNone(G))){F=JSON.stringify({filter:this._serializeFilter(F,G)});var K=!1,L=b.createResolver();J.onmessage=I=>{I=JSON.parse(I.data);I.filter&&(I.error&&(D.error(new e("geoevent-connection","Failed to set service filter",I.error)),this._set("errorString",`Could not set service filter - ${I.error}`),L.reject(I.error)),J.onmessage=this._onMessage.bind(this),K=!0,L.resolve())};J.send(F);setTimeout(()=>
{K||(this.destroyed||this._websocket!==J||D.error(new e("geoevent-connection","Server timed out when setting filter")),L.reject())},1E4);return L.promise}};E._serializeFilter=function(F,G){const J={};if(y.isNone(F)&&y.isNone(G))return J;if(y.isSome(F)&&F.geometry)try{const K=h.fromJSON(F.geometry);if("extent"!==K.type)throw new e(`Expected extent but found type ${K.type}`);J.geometry=JSON.stringify(K.shiftCentralMeridian())}catch(K){D.error(new e("geoevent-connection","Encountered an error when setting connection geometryDefinition",
K))}y.isSome(F)&&F.where&&"1 \x3d 1"!==F.where&&(J.where=F.where);y.isSome(G)&&(J.outFields=G.join(","));return J};E._enrich=function(F){if(!this._relatedFeatures)return F;const G=F.attributes[this._serviceDefinition.relatedFeatures.joinField];if(!this._relatedFeatures.has(G))return D.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",F),F;const {attributes:J,geometry:K}=this._relatedFeatures.get(G);for(const L in J)F.attributes[L]=J[L];K&&(F.geometry=K);F.geometry||
F.centroid||D.error(new e("geoevent-connection","Found malformed feature - no geometry found",F));return F};E._queryBuddyServices=async function(){try{const {relatedFeatures:F,keepLatestArchive:G}=this._serviceDefinition,J=this._queryRelatedFeatures(F),K=this._queryArchive(G);await J;const L=await K;if(L)for(const I of L.features)this.onFeature(this._enrich(I))}catch(F){D.error(new e("geoevent-connection","Encountered an error when querying buddy services",{error:F}))}};E._queryRelatedFeatures=async function(F){F&&
(F=await this._queryBuddy(F.featuresUrl),this._addRelatedFeatures(F))};E._queryArchive=async function(F){if(F)return this._queryBuddy(F.featuresUrl)};E._queryBuddy=async function(F){const G=new (await new Promise(function(R,T){n(["../../../FeatureLayer"],function(W){R(Object.freeze({__proto__:null,"default":W}))},T)})).default({url:F});var {capabilities:J}=await G.load();const K=J.query.supportsMaxRecordCountFactor,L=J.query.supportsPagination;J=J.query.supportsCentroid;const I=this._config.maxRecordCountFactor;
var N=G.capabilities.query.maxRecordCount;N=K?N*I:N;const P=new v;P.outFields=y.unwrapOr(this._config.outFields,["*"]);P.where=y.unwrapOr(y.get(this._config.filter,"where"),"1\x3d1");P.returnGeometry=!0;P.returnExceededLimitFeatures=!0;P.outSpatialReference=a.fromJSON(this._config.spatialReference);J&&(P.returnCentroid=!0);K&&(P.maxRecordCountFactor=I);if(L)return P.num=N,G.destroy(),this._queryPages(F,P);F=await x.executeQuery(F,P,this._config.sourceSpatialReference);G.destroy();return F.data};E._queryPages=
async function(F,G,J=[],K=0){G.start=y.isSome(G.num)?K*G.num:null;const {data:L}=await x.executeQuery(F,G,this._config.sourceSpatialReference);if(L.exceededTransferLimit&&K<this._config.maxQueryDepth)return L.features.forEach(I=>J.push(I)),this._queryPages(F,G,J,K+1);J.forEach(I=>L.features.push(I));return L};E._addRelatedFeatures=function(F){const G=new Map;F=F.features;const J=this._serviceDefinition.relatedFeatures.joinField;for(const K of F)G.set(K.attributes[J],K);this._relatedFeatures=G};return C}(u.WebSocketConnection);
return z=p.__decorate([c.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],z)})},"esri/views/2d/layers/features/sources/PagedFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ./BaseFeatureSource".split(" "),function(n,l,p,z,y,w){const f=p.getLogger("esri.views.2d.layers.features.sources.FeatureSource");p=function(k){function m(e){return k.call(this,e)||
this}l._inheritsLoose(m,k);var c=m.prototype;c._fetchDataTile=async function(e){const q=this._subscriptions.get(e.key.id);let d=!1,g=0,b=0;const a=(t,v)=>{b--;y.throwIfAborted(q);const x=t.reader;t=t.query;x.exceededTransferLimit?(v={tile:e,id:e.id,features:x,end:d&&0===b},q.requests.done.push({request:v,query:t}),this._onRequest(v,"new")):(d=!0,v={tile:e,id:e.id,features:x,end:0===b},q.requests.done.push({request:v,query:t}),this._onRequest(v,"new"))};let h=0,r=0;for(;!d&&20>r++;){let t;for(let v=
0;v<h+1;v++){const x=g++;b++;t=this._fetchDataTilePage(e,x,q).then(u=>u&&a(u,x)).catch(u=>{d=!0;y.isAbortError(u)||(f.error(new z("mapview-query-error","Encountered error when fetching tile",{tile:e,error:u})),this._onRequest({tile:e,id:e.id,features:null,end:d},"new"))})}await t;y.throwIfAborted(q);h=Math.min(h+2,6)}};c._fetchDataTilePage=async function(e,q,d){const g=this._sourceQueryInfo,b=this._createQuery(e,{start:8E3*q,num:8E3,maxRecordCountFactor:3,returnExceededLimitFeatures:!0,quantizationParameters:e.getQuantizationParameters()});
try{const a=await this._queue.push({tile:e,query:b,signal:d.signal,depth:q});y.throwIfAborted(d);return a?g!==this._sourceQueryInfo?this._fetchDataTilePage(e,q,d):{reader:a,query:b}:null}catch(a){return y.throwIfNotAbortError(a),null}};return m}(w.BaseFeatureSource);n.PagedFeatureSource=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports","./Tile"],function(n,l){function p(z,y,w){z=z.clone();const f=1<<z.level;y=z.col+
y;w=z.row+w;0>y&&y!==z.col?(z.col=y+f,--z.world):y>=f?(z.col=y-f,z.world+=1):z.col=y;z.row=w;return z}n.getPow2NeighborKey=p;n.getPow2NeighborTile=function(z,y,w){y=p(z.key,y,w);return new l.Tile(z.tileInfoView,y)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ClusterStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../geometry/support/spatialReferenceUtils ../../../../../geometry/SpatialReference ../../../../../geometry/support/Ellipsoid ../../../../../geometry ../../../../../core/Evented ../../../../../core/accessorSupport/diffUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../../../../../geohash/geohashUtils ./FeatureSetReaderJSON ../../../../../geohash/GeohashTree ../../../../../layers/graphics/data/projectionSupport ../../../engine/webgl/definitions ../Store2D".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t){let v=function(x){function u(B,A,C,E,F){A=new q([],[A,C]);B=x.call(this,A,E,null,B)||this;B.geohashBoundsInfo=F;return B}l._inheritsLoose(u,x);u.create=function(B,A,C,E,F,G,J,K){A=new u(A,C,E,G,J);A.displayId=B.createDisplayId(!0);A.referenceId=K;A.tileLevel=F;return A};var D=u.prototype;D.update=function(B,A,C,E,F,G){this.geometry.coords[0]=B;this.geometry.coords[1]=A;this.tileLevel=C;this.attributes=E;this.geohashBoundsInfo=F;this.referenceId=null;
this.referenceId=G;return this};D.toJSON=function(){return{objectId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null,attributes:{...this.attributes,clusterId:this.objectId},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}};l._createClass(u,[{key:"count",get:function(){return this.attributes.cluster_count}}]);return u}(e);k=function(x){function u(B,A,C){var E=x.call(this,B,C)||this;E.events=new m;E._geohashLevel=0;E._aggregateValueRanges={};E._aggregateValueRangesChanged=
!1;E._geohashBuf=[];E._clusters=new Map;E._tiles=new Map;E.geometryInfo=B.geometryInfo;E._spatialReference=A;E._projectionSupportCheck=h.checkProjectionSupport(A,w.WGS84);E._bitsets.geohash=C.getBitset(C.createBitset());E._bitsets.inserted=C.getBitset(C.createBitset());return E}l._inheritsLoose(u,x);var D=u.prototype;D.updateSchema=async function(B,A){var C=this._schema;try{await x.prototype.updateSchema.call(this,B,A),await this._projectionSupportCheck}catch(E){}C=c.diff(C,A);B.mesh&&(B.targets.aggregate=
!0);if(A&&(!z.isNone(C)||B.source||B.storage.filters)){if(c.hasDiff(C,"params.fields")||!this._tree||B.source)this._tree=new a.GeohashTree(this._statisticFields),this._rebuildTree(),p("esri-2d-update-debug")&&console.debug("Aggregate mesh needs update due to tree changing");p("esri-2d-update-debug")&&console.debug("Applying Update - ClusterStore:",C);B.mesh=!0;B.targets[A.name]=!0;this._aggregateValueRanges={}}};D.sweepFeatures=function(B,A){this._bitsets.inserted.forEachSet(C=>{B.has(C)||(C=A.lookupByDisplayIdUnsafe(C),
this._remove(C))})};D.sweepClusters=function(B,A,C){this._clusters.forEach((E,F)=>{E&&E.tileLevel!==C&&(B.releaseDisplayId(E.displayId),A.unsetAttributeData(E.displayId),this._clusters.delete(F))})};D.onTileData=function(B,A,C,E,F){if(!this._schema||z.isNone(A.addOrUpdate))return A;var G=this._tree,J=this._getTransforms(B,this._spatialReference);{const K=A.addOrUpdate.getCursor();for(;K.next();)this._update(K,E,G)}if(!F)return A;E=[];this._getClustersForTile(E,B,this._schema.params.clusterRadius,
C,G,J);A.type="replace"===A.type?"replace":"update";A.addOrUpdate=b.FeatureSetReaderJSON.fromOptimizedFeatures(E,"esriGeometryPoint");A.addOrUpdate._storage=C;for(G=A.addOrUpdate.getCursor();G.next();)J=G.getDisplayId(),this._bitsets.computed.unset(J),this.setComputedAttributes(C,G,J,B.scale);this._aggregateValueRangesChanged&&A.end&&(this.events.emit("valueRangesChanged",{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=!1);return A};D.onTileUpdate=function({added:B,removed:A}){B.length&&
this._setGeohashLevel(B[0].level);if(this._schema){var C=this._schema.params.clusterRadius;A.forEach(E=>{this._tiles.delete(E.key.id);this._markTileClustersForDeletion(E,C)})}};D.getAggregate=function(B){let A=null;this._clusters.forEach(C=>{C&&C.displayId===B&&(A=C.toJSON())});return A};D.getDisplayId=function(B){return(B=this._clusters.get(B))?B.displayId:null};D.getFeatureDisplayIdsForAggregate=function(B){B=this._clusters.get(B);if(!B)return[];B=B.geohashBoundsInfo;return this._tree.getRegionDisplayIds(B.xLL,
B.yLL,B.xTR,B.yTR,B.level)};D.getDisplayIdForReferenceId=function(B){let A;this._clusters.forEach(C=>{C&&C.referenceId===B&&(A=C.displayId)});return A};D.getAggregateValueRanges=function(){return this._aggregateValueRanges};D.forEach=function(B){this._clusters.forEach((A,C)=>{A&&B(A,C)})};D.size=function(){let B=0;this.forEach(A=>B++);return B};D._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();this._bitsets.geohash.clear();this._tree&&this._tree.clear()};D._remove=
function(B){const A=B.getDisplayId(),C=B.getXHydrate(),E=B.getYHydrate(),F=this._geohashBuf[2*A],G=this._geohashBuf[2*A+1];this._bitsets.inserted.has(A)&&(this._bitsets.inserted.unset(A),this._tree.removeCursor(B,C,E,F,G,this._geohashLevel))};D._update=function(B,A,C){const E=B.getDisplayId(),F=this._bitsets.inserted;A=A.isVisible(E);var G=F.has(E);A!==G&&(A?(A=B.getXHydrate(),G=B.getYHydrate(),this._setGeohash(E,A,G)&&(C.insertCursor(B,E,A,G,this._geohashBuf[2*E],this._geohashBuf[2*E+1],this._geohashLevel),
F.set(E))):this._remove(B))};D._setGeohash=function(B,A,C){if(this._bitsets.geohash.has(B))return!0;const E=this._geohashBuf;if(this._spatialReference.isWebMercator)A=A/f.earth.radius*57.29577951308232,g.setGeohashBuf(E,B,57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*C/f.earth.radius))),A-360*Math.floor((A+180)/360),12);else{C=h.project({x:A,y:C},this._spatialReference,w.WGS84);if(!C)return!1;g.setGeohashBuf(E,B,C.y,C.x,12)}this._bitsets.geohash.set(B);return!0};D._getClustersForTile=function(B,
A,C,E,F,G,J=!0){var K=this._schema.params.clusterPixelBuffer,L=2*C;C=this._getGeohashLevel(A.key.level);const I=Math.ceil(Math.pow(2,A.key.level)*r.TILE_SIZE/L);var N=Math.ceil(K/L)+0,P=Math.ceil(r.TILE_SIZE/L);const {row:R,col:T}=A.key;var W=Math.floor(T*r.TILE_SIZE/L)-N;L=Math.floor(R*r.TILE_SIZE/L)-N;K=W+P+2*N;N=L+P+2*N;for(P=A.tileInfoView.getLODInfoAt(A.key.level);W<=K;W++)for(let ea=L;ea<=N;ea++){var Z=W;P.wrap&&(Z=0>W?W+I:W%I);const O=P.wrap&&0>W,U=P.wrap&&W%I!==W;Z=this._lookupCluster(E,P,
A.key.level,Z,ea,C,F);if(z.isSome(Z)){var la=z.andThen(G,ba=>O?ba.left:U?ba.right:ba.tile);if((!J||!z.isNone(la))&&Z.count&&z.isSome(la)&&J){const ba=Z.geometry.clone();let ka=Z.attributes;ba.coords[0]=d.quantizeX(la,ba.coords[0]);ba.coords[1]=d.quantizeY(la,ba.coords[1]);1===Z.count&&z.isSome(Z.referenceId)&&(ka={...Z.attributes,referenceId:Z.referenceId});la=new e(ba,ka);la.displayId=Z.displayId;B.push(la)}}}};D._getGeohashLevel=function(B){return Math.min(Math.ceil(B/2+2),12)};D._setGeohashLevel=
function(B){B=this._getGeohashLevel(B);B=1*(Math.floor(B/1)+1)-1;this._geohashLevel!==B&&(this._geohashLevel=B,this._rebuildTree())};D._getTransforms=function(B,A){const C={originPosition:"upperLeft",scale:[B.resolution,B.resolution],translate:[B.bounds[0],B.bounds[3]]};A=y.getInfo(A);if(!A)return{tile:C,left:null,right:null};const [E,F]=A.valid;return{tile:C,left:{...C,translate:[F,B.bounds[3]]},right:{...C,translate:[E-F+B.bounds[0],B.bounds[3]]}}};D._getClusterId=function(B,A,C){return(B&15)<<
28|(A&16383)<<14|C&16383};D._markForDeletion=function(B,A,C){B=this._getClusterId(B,A,C);this._clusters.delete(B)};D._getClusterBounds=function(B,A,C){var E=this._schema.params.clusterRadius,F=2*E;A=C%2?A*F:A*F-E;const G=C*F;E=A+F;C=Math.pow(2,B.level)*r.TILE_SIZE;B.wrap&&0>A&&(A=0);B.wrap&&E>C&&(E=C);C=G/r.TILE_SIZE;E/=r.TILE_SIZE;F=(G-F)/r.TILE_SIZE;A=B.getXForColumn(A/r.TILE_SIZE);C=B.getYForRow(C);E=B.getXForColumn(E);B=B.getYForRow(F);return[A,C,E,B]};D._lookupCluster=function(B,A,C,E,F,G,J){const K=
this._getClusterId(C,E,F),L=this._clusters.get(K),[I,N,P,R]=this._getClusterBounds(A,E,F);var T={x:I,y:N};F={x:P,y:R};var W=E=A=0,Z=0;if(this._spatialReference.isWebMercator)A=T.x/f.earth.radius*57.29577951308232,A-=360*Math.floor((A+180)/360),E=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*T.y/f.earth.radius))),W=F.x/f.earth.radius*57.29577951308232,W-=360*Math.floor((W+180)/360),Z=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*F.y/f.earth.radius)));else{E=h.project(T,this._spatialReference,
w.WGS84);F=h.project(F,this._spatialReference,w.WGS84);if(!E||!F)return null;A=E.x;E=E.y;W=F.x;Z=F.y}T={geohashX:0,geohashY:0};F={geohashX:0,geohashY:0};g.setGeohashXY(T,E,A,G);g.setGeohashXY(F,Z,W,G);E=T.geohashX;W=T.geohashY;Z=F.geohashX;F=F.geohashY;A={xLL:E,yLL:W,xTR:Z,yTR:F,level:G};E=J.getRegionStatistics(E,W,Z,F,G);const {count:la,xTotal:ea,yTotal:O,referenceId:U}=E;G=la?ea/la:0;J=la?O/la:0;if(0===la)return this._clusters.set(K,null),null;E={cluster_count:la,...E.attributes};B=z.isSome(L)?
L.update(G,J,C,E,A,U):v.create(B,K,G,J,C,E,A,U);0===la&&(B.geometry.coords[0]=(I+P)/2,B.geometry.coords[1]=(N+R)/2);this._clusters.set(K,B);this._updateAggregateValueRangeForCluster(B,B.tileLevel);return B};D._updateAggregateValueRangeForCluster=function(B,A){const C=this._aggregateValueRanges[A]||{minValue:Infinity,maxValue:0},E=C.minValue,F=C.maxValue;C.minValue=Math.min(E,B.count);C.maxValue=Math.max(F,B.count);this._aggregateValueRanges[A]=C;if(E!==C.minValue||F!==C.maxValue)this._aggregateValueRangesChanged=
!0};D._markTileClustersForDeletion=function(B,A){var C=2*A;A=Math.ceil(r.TILE_SIZE/C);const {row:E,col:F}=B.key,G=Math.floor(F*r.TILE_SIZE/C);C=Math.floor(E*r.TILE_SIZE/C);for(let J=G;J<G+A;J++)for(let K=C;K<C+A;K++)this._markForDeletion(B.key.level,J,K)};return u}(t.Store2D);n.ClusterInfo=v;n.ClusterStore=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geohash/geohashUtils":function(){define(["exports"],function(n){function l(b){return 57>=b?b-48:104>=b?b-88:107>=b?b-89:110>=b?b-90:b-
91}function p(b,a,h){b[0]=a;b[1]=h;return b}function z(b,a){const h=(b[0]+b[1])/2,r=!a;b[0]=r*b[0]+a*h;b[1]=r*h+a*b[1]}function y(b,a){a=a>(b[0]+b[1])/2;z(b,a);return a}function w(b,a){const h=p(d,-90,90),r=p(g,-180,180);for(let v=0;v<a.length;v++){var t=a.charCodeAt(v);t=l(t);0===v%2?(z(r,!!(16&t)),z(r,!!(4&t)),z(r,!!(1&t)),z(h,!!(8&t)),z(h,!!(2&t))):(z(h,!!(16&t)),z(h,!!(4&t)),z(h,!!(1&t)),z(r,!!(8&t)),z(r,!!(2&t)))}b[0]=(h[0]+h[1])/2;b[1]=(r[0]+r[1])/2;return b}function f(b,a,h){let r="";const t=
p(d,-90,90),v=p(g,-180,180);for(let x=0;x<h;x++){let u=0;x%2?(u|=y(t,b)<<4,u|=y(v,a)<<3,u|=y(t,b)<<2,u|=y(v,a)<<1,u|=y(t,b)<<0):(u|=y(v,a)<<4,u|=y(t,b)<<3,u|=y(v,a)<<2,u|=y(t,b)<<1,u|=y(v,a)<<0);r+="0123456789bcdefghjkmnpqrstuvwxyz"[u]}return r}function k(b){return 180/Math.pow(2,Math.floor(5*b/2))}function m(b){return 360/Math.pow(2,Math.ceil(5*b/2))}function c(b,a){return a?1&b|(4&b)>>1|(16&b)>>2:(2&b)>>1|(8&b)>>2}function e(b,a){return a?(2&b)>>1|(8&b)>>2:1&b|(4&b)>>1|(16&b)>>2}function q(b,a,
h){var r=!((b.length-1)%2);const t=b.substring(0,b.length-1);var v=l(b.charCodeAt(b.length-1)),x=0,u=0;let D=0;var B=0;r?(x=8,u=4,D=1&v|(4&v)>>1|(16&v)>>2,B=(2&v)>>1|(8&v)>>2):(x=4,u=8,B=1&v|(4&v)>>1|(16&v)>>2,D=(2&v)>>1|(8&v)>>2);a=D+a;v=B+h;h=Math.floor(a/x);B=Math.floor(v/u);x=a-h*x;u=v-B*u;r="0123456789bcdefghjkmnpqrstuvwxyz"[r?x&1|(u&1)<<1|(x&2)<<1|(u&2)<<2|(x&4)<<2:u&1|(x&1)<<1|(u&2)<<1|(x&2)<<2|(u&4)<<2];return 1<b.length&&(h||B)?q(t,h,B)+r:t+r}const d=new Float64Array(2),g=new Float64Array(2);
n.convertGeohash32ToXY=function(b,a){let h=b=0,r=30,t=30;for(let u=0;u<a.length;u++){var v=a.charCodeAt(u),x=l(v);v=0===u%2;const D=c(x,v);x=e(x,v);r-=v?3:2;t-=v?2:3;b|=D<<r;h|=x<<t}return{geohashX:b,geohashY:h}};n.decodeBase32Char=l;n.decodeGeohash=w;n.decodeGeohashXY=function(b,a){let h=-90,r=90,t=-180,v=180;for(let C=0;C<a;C++){var x=Math.ceil((C+1)/2),u=Math.floor((C+1)/2),D=1-C%2,B=30-(3*x+2*u),A=30-(2*x+3*u);u=3*D+2*(1-D);x=2*D+3*(1-D);B=(7*D+3*(1-D)<<B&b.geohashX)>>B;D=(3*D+7*(1-D)<<A&b.geohashY)>>
A;for(--u;0<=u;u--){A=(t+v)/2;const E=B&1<<u?1:0;t=(1-E)*t+E*A;v=(1-E)*A+E*v}for(--x;0<=x;x--)B=(h+r)/2,u=D&1<<x?1:0,h=(1-u)*h+u*B,r=(1-u)*B+u*r}return[t,h,v,r]};n.encodeBase32Char=function(b){return"0123456789bcdefghjkmnpqrstuvwxyz"[b]};n.encodeGeohash=f;n.forEachIntersectingGeohash=function(b,a,h,r,t,v){var x=Math.abs(h-b),u=Math.abs(r-a);const D=k(t),B=m(t);u=Math.ceil(u/B);x=Math.ceil(x/D);t=f(b,a,t);for(let A=0;A<u;A++)for(let C=0;C<x;C++){const E=q(t,A,C),[F,G]=w([0,0],E);v(E,Math.abs((Math.min(h,
F+D/2)-Math.max(b,F-D/2))*(Math.min(r,G+B/2)-Math.max(a,G-B/2)))/(D*B))}};n.getIntersectingGeohashes=function(b,a,h,r,t){h=Math.abs(h-b);r=Math.abs(r-a);var v=k(t);const x=m(t);r=Math.ceil(r/x);h=Math.ceil(h/v);b=f(b,a,t);a=[];for(t=0;t<r;t++)for(v=0;v<h;v++)a.push(q(b,t,v));return a};n.getRelativeGeohash=q;n.latDistPerGeohash=k;n.lonDistPerGeohash=m;n.setGeohashBuf=function(b,a,h,r,t){t%2&&(t+=1);let v=0,x=0,u=-90,D=90,B=-180,A=180;for(let G=0;G<t/2;G++){for(var C=0;5>C;C++){var E=(B+A)/2,F=r>E?
1:0;v|=F<<29-(C+5*G);B=(1-F)*B+F*E;A=(1-F)*E+F*A}for(C=0;5>C;C++)E=(u+D)/2,F=h>E?1:0,x|=F<<29-(C+5*G),u=(1-F)*u+F*E,D=(1-F)*E+F*D}b[2*a]=v;b[2*a+1]=x};n.setGeohashXY=function(b,a,h,r){r%2&&(r+=1);let t=0,v=0,x=-90,u=90,D=-180,B=180;for(let F=0;F<r/2;F++){for(var A=0;5>A;A++){var C=(D+B)/2,E=h>C?1:0;t|=E<<29-(A+5*F);D=(1-E)*D+E*C;B=(1-E)*C+E*B}for(A=0;5>A;A++)C=(x+u)/2,E=a>C?1:0,v|=E<<29-(A+5*F),x=(1-E)*x+E*C,u=(1-E)*C+E*u}b.geohashX=t;b.geohashY=v};n.unpackXBits=c;n.unpackYBits=e;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/geohash/GeohashTree":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/CircularArray ./geohashUtils ../views/2d/layers/features/support/FeatureSetReaderJSON".split(" "),function(n,l,p,z,y,w){let f=function(){function m(e=[],q=8096){this._nodes=0;this._root=new k(0,0,0);this._statisticFields=e;this._pool=q?new z(8096):null}var c=m.prototype;c._acquire=function(e,q,d){this._nodes++;let g=null;p.isSome(this._pool)&&(g=this._pool.dequeue());
return p.isSome(g)?g.realloc(e,q,d):new k(e,q,d)};c._release=function(e){this._nodes--;p.isSome(this._pool)&&this._pool.enqueue(e)};c.dropLevels=function(e){this._forEachNode(q=>{if(q.depth>=e)for(let d=0;d<q.children.length;d++){const g=q.children[d];q.children[d]=null;g&&this._release(g)}})};c.clear=function(){this.dropLevels(0)};c.insert=function(e,q,d=0){const g=w.FeatureSetReaderJSON.fromOptimizedFeatures([e],"esriGeometryPoint").getCursor();g.next();const b=g.readGeometry();if(b){var [a,h]=
b.coords;this.insertCursor(g,e.displayId,a,h,e.geohashX,e.geohashY,q,d)}};c.insertCursor=function(e,q,d,g,b,a,h,r=0){let t=this._root,v=0,x=0,u=0;for(;null!==t;){t.depth>=r&&(t.count+=1,t.xTotal+=d,t.yTotal+=g,t.xGeohashTotal+=b,t.yGeohashTotal+=a,t.displayId=q,this._updateStatisticsCursor(e,t,1));if(v>=h){t.add(q);break}var D=Math.ceil((v+1)/2),B=Math.floor((v+1)/2);const C=1-v%2;var A=30-(3*D+2*B);D=30-(2*D+3*B);A=(b&7*C+3*(1-C)<<A)>>A;D=(a&3*C+7*(1-C)<<D)>>D;B=A+D*(8*C+4*(1-C));const E=2*C+3*(1-
C);x=x<<3*C+2*(1-C)|A;u=u<<E|D;null==t.children[B]&&(t.children[B]=this._acquire(x,u,v+1));v+=1;t=t.children[B]}};c.remove=function(e,q){const d=w.FeatureSetReaderJSON.fromOptimizedFeatures([e],"esriGeometryPoint").getCursor();d.next();const g=d.readGeometry();if(g){var [b,a]=g.coords;this.removeCursor(d,b,a,e.geohashX,e.geohashY,q)}};c.removeCursor=function(e,q,d,g,b,a){let h=this._root,r=0;for(;null!==h;){--h.count;h.xTotal-=q;h.yTotal-=d;h.xGeohashTotal-=g;h.yGeohashTotal-=b;this._updateStatisticsCursor(e,
h,-1);if(r>=a){h.remove(e.getDisplayId());break}var t=Math.ceil((r+1)/2);const u=Math.floor((r+1)/2);var v=1-r%2,x=30-(3*t+2*u);t=30-(2*t+3*u);v=((g&7*v+3*(1-v)<<x)>>x)+((b&3*v+7*(1-v)<<t)>>t)*(8*v+4*(1-v));x=h.children[v];1===x.count&&(this._release(x),h.children[v]=null);r+=1;h=x}};c.find=function(e,q,d){return this._root.find(e,q,d,0,0,0)};c.findSingleOccupancyNode=function(e,q,d,g,b){let a=this._root;for(;null!==a;){var h=a.depth,r=a.xNode,t=a.yNode;const A=1-h%2;var v=a.xGeohashTotal/a.count,
x=a.yGeohashTotal/a.count;if(1===a.count&&e<v&&v<=d&&q<x&&x<=g)return a;if(h>=b)a=a.next;else{x=Math.ceil((h+1)/2);h=Math.floor((h+1)/2);v=30-(3*x+2*h);var u=30-(2*x+3*h),D=~((1<<v)-1),B=~((1<<u)-1);r<<=3*A+2*(1-A);t<<=2*A+3*(1-A);h=Math.max(r,(e&D)>>v);x=Math.max(t,(q&B)>>u);v=Math.min(r+8*A+4*(1-A),(d&D)>>v);u=Math.min(t+4*A+8*(1-A),(g&B)>>u);for(D=B=null;x<=u;x++)for(let C=h;C<=v;C++){const E=a.children[C-r+(x-t)*(8*A+4*(1-A))];E&&(B||(B=E,B.next=a.next),D&&(D.next=E),D=E,E.next=a.next)}a=B||a.next}}return null};
c.getRegionDisplayIds=function(e,q,d,g,b){let a=this._root;const h=[];for(;null!==a;){var r=a.depth,t=a.xNode,v=a.yNode;if(r>=b)r=a.xGeohashTotal/a.count,t=a.yGeohashTotal/a.count,e<=r&&r<=d&&q<=t&&t<=g&&a.displayIds.forEach(E=>h.push(E)),a=a.next;else{var x=Math.ceil((r+1)/2),u=Math.floor((r+1)/2);r=1-r%2;var D=30-(3*x+2*u),B=30-(2*x+3*u),A=~((1<<D)-1),C=~((1<<B)-1);t<<=3*r+2*(1-r);v<<=2*r+3*(1-r);x=Math.max(t,(e&A)>>D);u=Math.max(v,(q&C)>>B);D=Math.min(t+8*r+4*(1-r),(d&A)>>D);B=Math.min(v+4*r+8*
(1-r),(g&C)>>B);for(A=C=null;u<=B;u++)for(let E=x;E<=D;E++){const F=a.children[E-t+(u-v)*(8*r+4*(1-r))];F&&(C||(C=F,C.next=a.next),A&&(A.next=F),A=F,F.next=a.next)}a=C||a.next}}return h};c.getRegionStatistics=function(e,q,d,g,b){let a=this._root,h=0,r=0,t=0;const v={};let x=0;for(;null!==a;){var u=a.depth,D=a.xNode,B=a.yNode;if(u>=b)u=a.xGeohashTotal/a.count,D=a.yGeohashTotal/a.count,e<u&&u<=d&&q<D&&D<=g&&(h+=a.count,r+=a.xTotal,t+=a.yTotal,1===a.count&&(x=a.displayId),this._aggregateStatistics(v,
a.statistics)),a=a.next;else{var A=Math.ceil((u+1)/2),C=Math.floor((u+1)/2);u=1-u%2;var E=30-(3*A+2*C),F=30-(2*A+3*C),G=~((1<<E)-1),J=~((1<<F)-1);D<<=3*u+2*(1-u);B<<=2*u+3*(1-u);A=Math.max(D,(e&G)>>E);C=Math.max(B,(q&J)>>F);E=Math.min(D+8*u+4*(1-u),(d&G)>>E);F=Math.min(B+4*u+8*(1-u),(g&J)>>F);G=J=null;for(let K=C;K<=F;K++)for(let L=A;L<=E;L++){const I=a.children[L-D+(K-B)*(8*u+4*(1-u))];if(I)if(K!==C&&K!==F&&L!==A&&L!==E){const N=I.xGeohashTotal/I.count,P=I.yGeohashTotal/I.count;e<N&&N<=d&&q<P&&P<=
g&&(h+=I.count,r+=I.xTotal,t+=I.yTotal,1===I.count&&(x=I.displayId),this._aggregateStatistics(v,I.statistics))}else J||(J=I,J.next=a.next),G&&(G.next=I),G=I,I.next=a.next}a=J||a.next}}e=this._normalizeStatistics(v,h);return{count:h,attributes:e,xTotal:r,yTotal:t,referenceId:x}};c._forEachNode=function(e){let q=this._root;for(;null!==q;){const d=this._linkChildren(q)||q.next;e(q);q=d}};c._linkChildren=function(e){let q=null,d=null;for(let g=0;g<=e.children.length;g++){const b=e.children[g];b&&(q||
(q=b,q.next=e.next),d&&(d.next=b),d=b,b.next=e.next)}return q};c._updateStatisticsCursor=function(e,q,d){for(const h of this._statisticFields){const r=h.name,t=h.inField?e.readAttribute(h.inField):e.getComputedNumericAtIndex(h.inFieldIndex);switch(h.statisticType){case "norm":q.statistics[r]||(q.statistics[r]={});var g=e.readAttribute(h.inNormalizationField),b=q.statistics[r].onStatisticField||0,a=q.statistics[r].onStatisticNormalizationField||0;null==t||isNaN(t)||null==g||0===g||isNaN(g)||(q.statistics[r].onStatisticField=
b+d*t,q.statistics[r].onStatisticNormalizationField=a+d*g);break;case "sum":case "avg":q.statistics[r]||(q.statistics[r]={value:0,nanCount:0});g=q.statistics[r].value;b=q.statistics[r].nanCount;null==t||isNaN(t)?q.statistics[r].nanCount=b+d:q.statistics[r].value=g+d*t;break;case "avg_angle":{q.statistics[r]||(q.statistics[r]={x:0,y:0,nanCount:0});g=q.statistics[r].x;b=q.statistics[r].y;a=q.statistics[r].nanCount;const v=Math.PI/180;null==t||isNaN(t)?q.statistics[r].nanCount=a+d:(q.statistics[r].x=
g+d*Math.cos(t*v),q.statistics[r].y=b+d*Math.sin(t*v));break}case "mode":q.statistics[r]||(q.statistics[r]={}),q.statistics[r][t]=(q.statistics[r][t]||0)+d}}};c._aggregateStatistics=function(e,q){for(const d of this._statisticFields){const g=d.name;switch(d.statisticType){case "sum":case "avg":case "avg_angle":case "mode":case "norm":e[g]||(e[g]={});for(const b in q[g])e[g][b]=(e[g][b]||0)+q[g][b]}}};c._normalizeStatistics=function(e,q){const d={};for(const b of this._statisticFields){const a=b.name;
switch(b.statisticType){case "norm":var g=e[a];if(q&&null==g.onStatisticNormalizationField)break;if(q&&g.onStatisticNormalizationField){d[a]=g.onStatisticField/g.onStatisticNormalizationField;break}d[a]=0;break;case "sum":{if(!q)break;const {value:h,nanCount:r}=e[a];if(!(q-r))break;d[a]=h;break}case "avg":{if(!q)break;const {value:h,nanCount:r}=e[a];if(!(q-r))break;d[a]=h/(q-r);break}case "avg_angle":{if(!q)break;const {x:h,y:r,nanCount:t}=e[a];if(!(q-t))break;d[a]=180/Math.PI*Math.atan2(r/(q-t),
h/(q-t));break}case "mode":{g=e[a];let h=0,r=null;for(const t in g){const v=g[t];v>h&&(h=v,r=t)}d[a]="null"===r?null:r}}}return d};l._createClass(m,[{key:"count",get:function(){return this._root.count}},{key:"size",get:function(){return this._nodes}},{key:"poolSize",get:function(){return p.mapOr(this._pool,0,e=>e.size)}},{key:"depth",get:function(){let e=0;this._forEachNode(q=>e=Math.max(e,q.depth));return e}}]);return m}(),k=function(){function m(e,q,d){this.yTotal=this.xTotal=this.count=0;this.statistics=
{};this.displayId=0;this.displayIds=new Set;this.next=null;this.yGeohashTotal=this.xGeohashTotal=this.yNode=this.xNode=this.depth=0;this.children=Array(32);for(let g=0;g<this.children.length;g++)this.children[g]=null;this.xNode=e;this.yNode=q;this.depth=d}var c=m.prototype;c.realloc=function(e,q,d){for(let g=0;g<this.children.length;g++)this.children[g]=null;this.xNode=e;this.yNode=q;this.depth=d;this.next=null;this.count=this.yTotal=this.xTotal=this.yGeohashTotal=this.xGeohashTotal=0;this.statistics=
{};this.displayIds.clear();return this};c.add=function(e){this.displayIds.add(e)};c.remove=function(e){this.displayIds.delete(e)};c.getLngLatBounds=function(){var e=this.depth;const q=Math.ceil(e/2);e=Math.floor(e/2);return y.decodeGeohashXY({geohashX:this.xNode<<30-(3*q+2*e),geohashY:this.yNode<<30-(2*q+3*e)},this.depth)};c.find=function(e,q,d,g,b,a){if(g>=d)return this;var h=1-g%2;const r=3*h+2*(1-h),t=2*h+3*(1-h),v=30-b-r,x=30-a-t;h=this.children[((e&7*h+3*(1-h)<<v)>>v)+((q&3*h+7*(1-h)<<x)>>x)*
(8*h+4*(1-h))];return null==h?null:h.find(e,q,d,g+1,b+r,a+t)};return m}();n.GeohashTree=f;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/Error ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../geometry/SpatialReference ../../../../../core/accessorSupport/diffUtils ../../../engine/webgl/definitions ../../../engine/webgl/util/BidiText ../../../engine/webgl/mesh/factories/matcherUtils ../textUtils ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/mesh/factories/WGLMeshFactory ../support/AttributeStore ../../../engine/webgl/collisions/CollisionGrid ./BaseProcessor".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x,u,D,B,A){y.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");y=function(C){function E(){var G=C.apply(this,arguments)||this;G.type="symbol";return G}n._inheritsLoose(E,C);var F=E.prototype;F.destroy=function(){};F.update=async function(G,J){J=J.schema.processors[0];if("symbol"===J.type){var K=a.diff(this._schema,J);a.hasDiff(K,"mesh")&&(p("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",K),G.mesh=!0,G.why.mesh.push("Symbology changed"),
this._schema=J,this._factory=this._createFactory(J),this._factory.update(J,this.tileStore.tileScheme.tileInfo))}};F.onTileData=function(G,J,K){g.throwIfAborted(K);return this._onTileData(G,J,K)};F.onTileError=function(G,J,K){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:G.id,error:J},{signal:K.signal})};F._createFactory=function(G){const {geometryType:J,objectIdField:K,fields:L}=this.service;var I=b.fromJSON(this.spatialReference);I={geometryType:J,fields:L,spatialReference:I};
const N=new x.WGLTemplateStore((P,R)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",P,R),!1);this._store=N;this._matcher=t.createMatcher(G.mesh.matcher,N,I);return new u.WGLMeshFactory(J,K,N)};F._onTileData=async function(G,J,K){const {type:L,addOrUpdate:I,remove:N,end:P}=J;if(!I)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:G.id,data:{type:L,addOrUpdate:null,remove:N,clear:!1,end:P}},K);const R=this._processFeatures(G,I,K);J=K.signal;try{var T=await R;const W=z.andThen(T,
ea=>ea.message),Z=z.andThen(T,ea=>ea.transferList)||[];T={type:L,addOrUpdate:W,remove:N,clear:!1,end:P};const la={transferList:z.unwrap(Z)||[],signal:J};g.throwIfAborted(la);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:G.id,data:T},la)}catch(W){this._handleError(G,W,K)}};F._processFeatures=async function(G,J,K){if(z.isNone(J)||!J.hasFeatures)return null;const L={transform:G.transform,hasZ:!1,hasM:!1},I=this._factory,N={viewingMode:"",scale:G.scale},P=await this._matcher;g.throwIfAborted(K);
const R=this._getLabelInfos(G,J);await I.analyze(J.getCursor(),P,L,N);g.throwIfAborted(K);return this._writeFeatureSet(G,J,L,R,I)};F._writeFeatureSet=function(G,J,K,L,I){const N=I.createMeshData(J.getApproximateSize()),P={viewingMode:"",scale:G.scale};for(J=J.getCursor();J.next();)try{const R=J.getDisplayId(),T=z.isSome(L)?L.get(R):null;I.writeCursor(N,J,K,P,G.level,T)}catch(R){}return this._encodeDisplayData(N)};F._encodeDisplayData=function(G){const J={},K=[];G.encode(J,K);return{message:J,transferList:K}};
F._handleError=function(G,J,K){if(!g.isAbortError(J))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:G.id,error:J.message},{signal:K.signal})};F._shouldDiscard=function(G,J){switch(this.service.geometryType){case "esriGeometryPoint":return J=J.readLegacyPointGeometry(),!J||G.checkOverlap(J.x,J.y);case "esriGeometryPolygon":return J=J.readLegacyCentroid(),!J||G.checkOverlap(J.x,J.y);default:return!1}};F._markUsed=function(G,J){switch(this.service.geometryType){case "esriGeometryPoint":{const {x:K,
y:L}=J.readLegacyPointGeometry();return G.markUsed(K,L)}case "esriGeometryPolygon":{const {x:K,y:L}=J.readLegacyCentroid();return G.markUsed(K,L)}}};F._getLabelInfos=function(G,J){const K=z.andThen(this._schema.mesh.labels,R=>R.filter(T=>{var W=G.scale;return(!T.minScale||T.minScale>=W)&&(!T.maxScale||T.maxScale<=W)}));if(z.isNone(K)||0===K.length)return null;const L=new Map,I=new B.CollisionGrid(h.COLLISION_EARLY_REJECT_BUCKET_SIZE);for(J=J.getCursor();J.next();){const R=J.getDisplayId();if(this._shouldDiscard(I,
J)){L.has(R)||L.set(R,null);continue}var N=!1;const T=[],W=D.isAggregateId(R),Z=W&&1!==J.readAttribute("cluster_count")?"aggregate":"feature";for(const la of K){if(la.target!==Z)continue;var P=J.getStorage();P=W&&"feature"===Z?P.getComputedStringAtIndex(J.readAttribute("referenceId"),la.fieldIndex):P.getComputedStringAtIndex(R,la.fieldIndex);if(!P)continue;N=r.bidiText(P.toString());const ea=N[1];this._store.getMosaicItem(la.symbol,v.codepoints(N[0])).then(O=>{T[la.index]={glyphs:O.glyphMosaicItems,
rtl:ea,index:la.index}});N=!0}L.set(R,T);N&&this._markUsed(I,J)}return L};n._createClass(E,[{key:"supportsTileUpdates",get:function(){return!0}}]);return E}(A);return y=l.__decorate([m.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],y)})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["exports","../../../../../core/BidiEngine"],function(n,l){const p=new l;n.bidiText=function(z){if(!p.hasBidiChar(z))return[z,!1];let y;y="rtl"===p.checkContextual(z)?"IDNNN":"ICNNN";
return[p.bidiTransform(z,y,"VLYSN"),!0]};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define(["exports","../../../../../../core/Logger","../../../../../../core/Error","../../util/Matcher"],function(n,l,p,z){const y=l.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");n.createMatcher=async function(w,f,k){switch(w.type){case "simple":return z.FeatureMatcher.fromBasicRenderer(w,f,k);case "map":return z.MapMatcher.fromUVRenderer(w,
f,k);case "interval":return z.IntervalMatcher.fromCBRenderer(w,f,k);case "dictionary":return z.DictionaryMatcher.fromDictionaryRenderer(w,f,k);default:return y.error(new p("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../support/arcadeOnDemand ../../../../../symbols/cim/utils ../../../../../core/LRUCache ../../../arcade/callExpressionWithFeature ../../../../../symbols/cim/cimSymbolUtils ../../../layers/features/schemaUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){async function d(r,t){const v=r||1;if("number"===typeof v)return(u,D,B)=>v;const x=await f.createRendererExpression(v,t.spatialReference,t.fields);return(u,D,B)=>c(x,u,{$view:B},t.geometryType,D)||1}const g=z.getLogger("esri/views/2d/engine/webgl/util/Matcher");z=function(){function r(){this.type="feature";this._defaultResult=null}r.fromBasicRenderer=async function(v,x,u){const D=new r;v.symbol&&(v=await e.expandSymbol(v.symbol,u),x=x.createTemplateGroup(v,null),
D.setDefault(x));return D};var t=r.prototype;t.size=function(){return 1};t.getDefault=function(){return this._defaultResult};t.setDefault=function(v){this._defaultResult=v};t.match=function(v,x,u,D,B){return this.getDefault()};t.analyze=async function(v,x,u,D,B){return null};return r}();let b=function(r){function t(x,u,D,B){var A=r.call(this)||this;A.type="interval";A._intervals=[];A._isMaxInclusive=u;A._fieldIndex=B;A._field=x;A._normalizationInfo=D;return A}p._inheritsLoose(t,r);t.fromCBRenderer=
async function(x,u,D){const {isMaxInclusive:B,normalizationField:A,normalizationTotal:C,normalizationType:E}=x,F=new t(x.field,B,{normalizationField:A,normalizationTotal:C,normalizationType:E},x.fieldIndex),G=await e.expandSymbol(x.backgroundFillSymbol,D);await w.all(x.intervals.map(async J=>{var K=await e.expandSymbol(J.symbol,D);K=await u.createTemplateGroup(K,G);F.add({min:J.min,max:J.max},K)}));if(x=await e.expandSymbol(x.defaultSymbol,D))x=await u.createTemplateGroup(x,G),F.setDefault(x);return F};
var v=t.prototype;v.add=function(x,u){this._intervals.push({interval:x,result:u});this._intervals.sort((D,B)=>D.interval.min-B.interval.min)};v.size=function(){return r.prototype.size.call(this)+this._intervals.length};v.match=function(x,u,D,B,A){if(null==this._fieldIndex&&!this._field)return this.getDefault();x=null!=this._fieldIndex?u.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(u);if(!x&&(null===x||void 0===x||isNaN(x)))return this.getDefault();for(u=0;u<this._intervals.length;u++){const {interval:C,
result:E}=this._intervals[u];D=this._isMaxInclusive?x<=C.max:x<C.max;if(x>=C.min&&D)return E}return this.getDefault()};v._needsNormalization=function(){const x=this._normalizationInfo;return x&&(x.normalizationField||x.normalizationTotal||x.normalizationType)};v._getValueFromField=function(x){const u=x.readAttribute(this._field);if(!this._needsNormalization())return u;const {normalizationField:D,normalizationTotal:B,normalizationType:A}=this._normalizationInfo;x=!!D&&x.readAttribute(D);if(A)switch(A){case "esriNormalizeByField":return(x||
void 0)&&u/x;case "esriNormalizeByLog":return Math.log(u)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return u/B*100;default:g.error(`Found unknown normalization type: ${A}`)}else g.error("Normalization is required, but no type was set!")};return t}(z),a=function(r){function t(x,u,D){var B=r.call(this)||this;B.type="map";B._nullResult=null;B._resultsMap=new Map;B._fieldsIndex=D;B._fields=x;B._seperator=u||"";return B}p._inheritsLoose(t,r);t.fromUVRenderer=async function(x,u,D){const B=x.fieldDelimiter,
A=[x.field];x.field2&&A.push(x.field2);x.field3&&A.push(x.field3);const C=await e.expandSymbol(x.backgroundFillSymbol,D),E=new t(A,B,x.fieldIndex);await w.all(x.map.map(async F=>{var G=await e.expandSymbol(F.symbol,D);G=await u.createTemplateGroup(G,C);"\x3cNull\x3e"===F.value?E.setNullResult(G):E.add(F.value,G)}));if(x=await e.expandSymbol(x.defaultSymbol,D))x=await u.createTemplateGroup(x,C),E.setDefault(x);return E};var v=t.prototype;v.setNullResult=function(x){this._nullResult=x};v.add=function(x,
u){this._resultsMap.set(x.toString(),u)};v.size=function(){return r.prototype.size.call(this)+this._resultsMap.size};v.match=function(x,u,D,B,A){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();x=null!=this._fieldsIndex?u.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(u);if(null!==this._nullResult&&(null==x||""===x||"\x3cNull\x3e"===x))return this._nullResult;if(!x&&null==x)return this.getDefault();x=x.toString();return this._resultsMap.has(x)?this._resultsMap.get(x):
this.getDefault()};v._getValueFromFields=function(x){const u=[];for(const D of this._fields){const B=x.readAttribute(D);u.push(B)}return u.join(this._seperator)};return t}(z),h=function(r){function t(x,u,D,B){var A=r.call(this)||this;A.type="dictionary";A._groupIdCache=new m(100);A._renderer=x;A._fieldMap=x.fieldMap;A._symbolFields=x.getSymbolFields();A._templates=u;A._info=D;A._scaleFn=B;return A}p._inheritsLoose(t,r);t.fromDictionaryRenderer=async function(x,u,D){x=(await new Promise(function(A,
C){n(["../../../../../renderers/DictionaryRenderer"],function(E){A(Object.freeze({__proto__:null,"default":E}))},C)})).default.fromJSON(x.renderer);await x.fetchResources({spatialReference:D.spatialReference,fields:D.fields});const B=await d(x.scaleExpression,D);return new t(x,u,D,B)};var v=t.prototype;v._analyzeFeature=async function(x,u,D,B){x=x.readLegacyFeature();const A=this._scaleFn(x,u,D);u=this._attributeHash(x)+"-"+A;const C=this._groupIdCache.get(u);if(C)return C;D=await this._renderer.getSymbolAsync(x,
{...D,spatialReference:this._info.spatialReference,abortOptions:B,fields:this._info.fields});D=q.createSymbolSchema(D,this._renderer);B=e.expandSymbol(D,this._info,B).then(E=>{if("expanded-cim"!==E.type)return g.error(new y("mapview-bad-type",`Found unexpected type ${E.type} in dictionary response`)),null;E.hash+="-"+A;for(const F of E.layers)F.scaleFactor=A,F.templateHash+="-"+A,"text"===F.type&&"string"===typeof F.text&&-1<F.text.indexOf("[")&&(F.text=k.createLabelOverrideFunction(this._fieldMap,
F.text,F.cim.textCase));return this._templates.createTemplateGroup(E,null)});this._groupIdCache.put(u,B,1);return B};v.analyze=async function(x,u,D,B,A){x=u.getCursor();for(u=[];x.next();)u.push(this._analyzeFeature(x,D,B,A));return w.all(u)};v.match=function(x,u,D,B,A){return null};v._attributeHash=function(x){let u="";for(const D of this._symbolFields){const B=this._fieldMap[D];B&&(u+=x.attributes[B]+"-")}return u};return t}(z);l.DictionaryMatcher=h;l.FeatureMatcher=z;l.IntervalMatcher=b;l.MapMatcher=
a;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(n){function l(p,z){"string"!==typeof p&&(p=String(p));switch(z){case "LowerCase":return p.toLowerCase();case "Allcaps":return p.toUpperCase();default:return p}}n._adjustTextCase=l;n.colorToArray=function(p){return[p.r,p.g,p.b,p.a]};n.createLabelOverrideFunction=function(p,z,y){const w=c=>{let e=c.length;for(;e--;)if(-1===" /-,\n".indexOf(c.charAt(e)))return!1;return!0},f=[];var k=
0;let m=-1;do m=z.indexOf("[",k),m>=k&&(m>k&&(k=z.substr(k,m-k),f.push([k,null,w(k)])),k=m+1,m=z.indexOf("]",k),m>=k&&(m>k&&(k=z.substr(k,m-k),(k=p[k])&&f.push([null,k,!1])),k=m+1));while(-1!==m);k<z.length-1&&(p=z.substr(k),f.push([p,null,w(p)]));return c=>{let e="",q=null;for(const d of f){const [g,b,a]=d;if(g)a?q=g:(q&&(e+=q,q=null),e+=g);else{const h=c.attributes[b];h&&(q&&(e+=q,q=null),e+=h)}}return l(e,y)}};n.evaluateValueOrFunction=function(p,z,y,w){return"function"===typeof p?p(z,y,w):p};
n.fromCIMColor=function(p){return p?{r:p[0],g:p[1],b:p[2],a:p[3]/255}:{r:0,g:0,b:0,a:0}};n.isCIMFill=function(p){return"CIMGradientFill"===p.type||"CIMHatchFill"===p.type||"CIMPictureFill"===p.type||"CIMSolidFill"===p.type||"CIMWaterFill"===p.type};n.isCIMMarker=function(p){return"CIMVectorMarker"===p.type||"CIMPictureMarker"===p.type||"CIMBarChartMarker"===p.type||"CIMCharacterMarker"===p.type||"CIMPieChartMarker"===p.type||"CIMStackedBarChartMarker"===p.type};n.isCIMMarkerStrokePlacement=function(p){return"CIMMarkerPlacementAlongLineRandomSize"===
p.type||"CIMMarkerPlacementAlongLineSameSize"===p.type||"CIMMarkerPlacementAlongLineVariableSize"===p.type||"CIMMarkerPlacementAtExtremities"===p.type||"CIMMarkerPlacementAtMeasuredUnits"===p.type||"CIMMarkerPlacementAtRatioPositions"===p.type||"CIMMarkerPlacementOnLine"===p.type||"CIMMarkerPlacementOnVertices"===p.type};n.isCIMStroke=function(p){return"CIMGradientStroke"===p.type||"CIMPictureStroke"===p.type||"CIMSolidStroke"===p.type};n.resampleHermite=function(p,z,y,w,f,k,m=!0){const c=z/f;y/=
k;const e=Math.ceil(c/2),q=Math.ceil(y/2);for(let b=0;b<k;b++)for(let a=0;a<f;a++){const h=4*(a+(m?k-b-1:b)*f);var d=0;let r=0,t=0,v=0,x=0,u=0,D=0;const B=(b+.5)*y;for(let A=Math.floor(b*y);A<(b+1)*y;A++){var g=Math.abs(B-(A+.5))/q;const C=(a+.5)*c;g*=g;for(let E=Math.floor(a*c);E<(a+1)*c;E++){let F=Math.abs(C-(E+.5))/e;d=Math.sqrt(g+F*F);-1<=d&&1>=d&&(d=2*d*d*d-3*d*d+1,0<d&&(F=4*(E+A*z),D+=d*p[F+3],t+=d,255>p[F+3]&&(d=d*p[F+3]/250),v+=d*p[F],x+=d*p[F+1],u+=d*p[F+2],r+=d))}}w[h]=v/r;w[h+1]=x/r;w[h+
2]=u/r;w[h+3]=D/t}};n.toCIMSymbolJSON=function(p){var z;return null==(z=p.data)?void 0:z.symbol};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(n,l){return function(){function p(y,w){this._storage=new l.MemCacheStorage;this._storage.maxSize=y;w&&this._storage.registerRemoveFunc("",w)}var z=p.prototype;z.put=function(y,w,f){this._storage.put(y,w,f,1)};z.pop=function(y){return this._storage.pop(y)};
z.get=function(y){return this._storage.get(y)};z.clear=function(){this._storage.clearAll()};z.destroy=function(){this._storage.clearAll()};n._createClass(p,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(y){this._storage.maxSize=y}}]);return p}()})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Logger","../../../core/Error","../../../geometry/support/quantizationUtils"],function(n,l,p){function z(w){const f={};switch(w){case "esriGeometryPoint":return(k,
m,c,e)=>p.unquantizePoint(m,f,k,c,e);case "esriGeometryPolygon":return(k,m,c,e)=>p.unquantizePolygon(m,f,k,c,e);case "esriGeometryPolyline":return(k,m,c,e)=>p.unquantizePolyline(m,f,k,c,e);case "esriGeometryMultipoint":return(k,m,c,e)=>p.unquantizeMultipoint(m,f,k,c,e);default:return n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l("mapview-arcade",`Unable to handle geometryType: ${w}`)),k=>k}}const y=new Map;return function(w,f,k,m,c){if(w.referencesGeometry()&&c){{const {transform:e,
hasZ:q,hasM:d}=c;y.has(m)||y.set(m,z(m));m=y.get(m)(f.geometry,e,q,d);f={...f,geometry:m}}}f=w.repurposeFeature(f);try{return w.evaluate({...k,$feature:f})}catch(e){return n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}})},"esri/symbols/cim/cimSymbolUtils":function(){define("exports ../../core/promiseUtils ../WebStyleSymbol ../../chunks/symbols ./cimAnalyzer ./ExpandedCIM".split(" "),function(n,l,p,z,y,w){const f=async(m,c)=>new w.ExpandedCIM(await y.analyzeCIMSymbol(m.data,
c),m.data,m.rendererKey),k=async(m,c,e)=>m?"cim"===m.type?f(m,c):"web-style"===m.type?(m={type:"cim",data:(await p.fromJSON(m).fetchCIMSymbol(e)).data,rendererKey:m.rendererKey},f(m,c)):m:null;n.expandSymbol=k;n.expandSymbols=async(m,c,e)=>l.all(m.map(q=>k(q,c,e)));Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../core/string ../../core/Logger ../../core/promiseUtils ../../support/arcadeOnDemand ../../Color ../../core/screenUtils ./utils ../../views/2d/arcade/callExpressionWithFeature ./CIMSymbolHelper ./SDFHelper".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){function q(P){switch(P){case "Butt":return 0;case "Square":return 2;default:return 1}}function d(P){switch(P){case "Bevel":return 0;case "Miter":return 2;default:return 1}}function g(P){switch(P){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"justify"}}function b(P){switch(P){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function a(P){let R="normal",
T="normal";P&&(P=P.toLowerCase(),-1!==P.indexOf("italic")?R="italic":-1!==P.indexOf("oblique")&&(R="oblique"),-1!==P.indexOf("bold")?T="bold":-1!==P.indexOf("light")&&(T="lighter"));return{style:R,weight:T}}function h(P,R,T,W){let Z;P[R]?Z=P[R]:(Z={},P[R]=Z);Z[T]=W}function r(P){return(P=P.markerPlacement)&&P.angleToLine?1:0}function t(P,R,T,W,Z,la){if(P){var ea=P.symbolLayers;if(ea){var O,U=c.CIMSymbolHelper.getSize(P);"CIMPointSymbol"===P.type&&"Map"===P.angleAlignment&&(O=1);for(var ba=ea.length;ba--;){var ka=
ea[ba];if(ka&&!1!==ka.enable){var oa=[];c.OverrideHelper.findApplicableOverrides(ka,R,oa);switch(ka.type){case "CIMSolidFill":v(ka,T,oa,W,Z);break;case "CIMPictureFill":x(ka,T,oa,W,Z);break;case "CIMHatchFill":u(ka,T,oa,W,Z);break;case "CIMGradientFill":var M=T,V=W,ha=Z,Q=l.numericHash(JSON.stringify(ka)).toString();ha.push({type:"fill",templateHash:Q,materialHash:0===oa.length?Q:I(Q,M,oa,V),cim:ka,materialOverrides:null,colorLocked:ka.colorLocked,effects:ka.effects,color:{r:128,g:128,b:128,a:1},
height:0,angle:0,offsetX:0,offsetY:0,scaleX:1});break;case "CIMSolidStroke":D(ka,T,oa,W,Z,"CIMPolygonSymbol"===P.type,U);break;case "CIMPictureStroke":B(ka,T,oa,W,Z,"CIMPolygonSymbol"===P.type,U);break;case "CIMGradientStroke":{M=T;V=W;ha=Z;Q="CIMPolygonSymbol"===P.type;var X=U,aa=ka.primitiveName,ca=void 0!==ka.width?ka.width:4,ia=q(ka.capStyle),ja=d(ka.joinStyle);const qa=ka.miterLimit,sa=l.numericHash(JSON.stringify(ka)).toString();ha.push({type:"line",templateHash:sa,materialHash:0===oa.length?
sa:I(sa,M,oa,V),cim:ka,materialOverrides:null,isOutline:Q,colorLocked:ka.colorLocked,effects:ka.effects,color:{r:128,g:128,b:128,a:1},width:L(aa,M,"Width",V,ca),cap:L(aa,M,"CapStyle",V,ia),join:L(aa,M,"JoinStyle",V,ja),miterLimit:L(aa,M,"MiterLimit",V,qa),referenceWidth:X,zOrder:J(ka.name),isDashed:!1})}break;case "CIMCharacterMarker":A(ka,T,oa,W,Z);break;case "CIMPictureMarker":if(A(ka,T,oa,W,Z))break;"CIMLineSymbol"===P.type&&(O=r(ka));C(ka,T,oa,W,Z,O,U);break;case "CIMVectorMarker":if(A(ka,T,oa,
W,Z))break;"CIMLineSymbol"===P.type&&(O=r(ka));M=T;V=W;ha=Z;Q=O;X=U;aa=la;if(ia=ka.markerGraphics){ca=0;ka.scaleSymbolsProportionally&&(ja=ka.frame)&&(ca=ja.ymax-ja.ymin);for(const qa of ia)if(qa&&(ia=qa.symbol))switch(ia.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":F(ka,qa,oa,M,V,ha,Q,X,ca,aa);break;case "CIMTextSymbol":E(ka,qa,M,oa,V,ha,Q,X,ca)}}break;default:N.error("Cannot analyze CIM layer",ka.type)}}}}}}function v(P,R,T,W,Z){const la=P.primitiveName,ea=k.fromCIMColor(P.color),
O=l.numericHash(JSON.stringify(P)).toString();Z.push({type:"fill",templateHash:O,materialHash:0===T.length?O:()=>O,cim:P,materialOverrides:null,colorLocked:P.colorLocked,color:L(la,R,"Color",W,ea,K),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:P.effects})}function x(P,R,T,W,Z){const la=P.primitiveName,ea=P.tintColor?k.fromCIMColor(P.tintColor):{r:255,g:255,b:255,a:1},O=l.numericHash(JSON.stringify(P)).toString(),U=l.numericHash(`${P.url}${JSON.stringify(P.colorSubstitutions)}`).toString();
Z.push({type:"fill",templateHash:O,materialHash:0===T.length?U:()=>U,cim:P,materialOverrides:null,colorLocked:P.colorLocked,effects:P.effects,color:L(la,R,"TintColor",W,ea,K),height:L(la,R,"Height",W,P.height),scaleX:L(la,R,"ScaleX",W,P.scaleX),angle:L(la,R,"Rotation",W,P.rotation),offsetX:L(la,R,"OffsetX",W,P.offsetX),offsetY:L(la,R,"OffsetY",W,P.offsetY)})}function u(P,R,T,W,Z){const la=["Rotation","OffsetX","OffsetY"],ea=T.filter(ka=>ka.primitiveName!==P.primitiveName&&-1===la.indexOf(ka.propertyName)),
O=P.primitiveName,U=l.numericHash(JSON.stringify(P)).toString(),ba=l.numericHash(`${P.separation}${JSON.stringify(P.lineSymbol)}`).toString();Z.push({type:"fill",templateHash:U,materialHash:0===T.length?ba:I(ba,R,ea,W),cim:P,materialOverrides:ea,colorLocked:P.colorLocked,effects:P.effects,color:{r:255,g:255,b:255,a:1},height:L(O,R,"Separation",W,P.separation),scaleX:1,angle:L(O,R,"Rotation",W,P.rotation),offsetX:L(O,R,"OffsetX",W,P.offsetX),offsetY:L(O,R,"OffsetY",W,P.offsetY)})}function D(P,R,T,
W,Z,la,ea){const O=l.numericHash(JSON.stringify(P)).toString(),U=P.primitiveName,ba=k.fromCIMColor(P.color),ka=void 0!==P.width?P.width:4,oa=q(P.capStyle),M=d(P.joinStyle),V=P.miterLimit;Z.push({type:"line",templateHash:O,materialHash:0===T.length?O:()=>O,cim:P,materialOverrides:null,isOutline:la,colorLocked:P.colorLocked,effects:P.effects,color:L(U,R,"Color",W,ba,K),width:L(U,R,"Width",W,ka),cap:L(U,R,"CapStyle",W,oa),join:L(U,R,"JoinStyle",W,M),miterLimit:L(U,R,"MiterLimit",W,V),referenceWidth:ea,
zOrder:J(P.name),isDashed:!1})}function B(P,R,T,W,Z,la,ea){const O=l.numericHash(`${P.url}${JSON.stringify(P.colorSubstitutions)}`).toString(),U=P.primitiveName,ba=k.fromCIMColor(P.tintColor),ka=void 0!==P.width?P.width:4,oa=q(P.capStyle),M=d(P.joinStyle),V=P.miterLimit,ha=l.numericHash(JSON.stringify(P)).toString();Z.push({type:"line",templateHash:ha,materialHash:0===T.length?O:()=>O,cim:P,materialOverrides:null,isOutline:la,colorLocked:P.colorLocked,effects:P.effects,color:L(U,R,"TintColor",W,ba,
K),width:L(U,R,"Width",W,ka),cap:L(U,R,"CapStyle",W,oa),join:L(U,R,"JoinStyle",W,M),miterLimit:L(U,R,"MiterLimit",W,V),referenceWidth:ea,zOrder:J(P.name),isDashed:!1})}function A(P,R,T,W,Z){const la=P.markerPlacement;if(!la||"CIMMarkerPlacementInsidePolygon"!==la.type)return!1;const ea=["Rotation","OffsetX","OffsetY"],O=T.filter(ba=>ba.primitiveName!==P.primitiveName&&-1===ea.indexOf(ba.propertyName)),U=l.numericHash(JSON.stringify(P)).toString();Z.push({type:"fill",templateHash:U,materialHash:0===
T.length?U:I(U,R,O,W),cim:P,materialOverrides:O,colorLocked:P.colorLocked,effects:P.effects,color:{r:255,g:255,b:255,a:1},height:L(la.primitiveName,R,"StepY",W,la.stepY),scaleX:1,angle:L(la.primitiveName,R,"GridAngle",W,la.gridAngle),offsetX:L(la.primitiveName,R,"OffsetX",W,la.offsetX),offsetY:L(la.primitiveName,R,"OffsetY",W,la.offsetY)});return!0}function C(P,R,T,W,Z,la,ea){const O=P.primitiveName,U=P.size,ba=P.scaleX,ka=P.rotation,oa=P.offsetX,M=P.offsetY,V=k.fromCIMColor(P.tintColor),ha=l.numericHash(`${P.url}${JSON.stringify(P.colorSubstitutions)}`).toString();
let Q=!1,X="";for(const aa of T)aa.primitiveName===O&&(void 0!==aa.value?X+=`-${aa.primitiveName}-${aa.propertyName}-${JSON.stringify(aa.value)}`:aa.valueExpressionInfo&&(Q=!0));Z.push({type:"marker",templateHash:l.numericHash(JSON.stringify(P)+X).toString(),materialHash:Q?()=>ha:ha,cim:P,materialOverrides:null,colorLocked:P.colorLocked,effects:P.effects,scaleSymbolsProportionally:!1,alignment:la,size:L(O,R,"Size",W,U),scaleX:L(O,R,"ScaleX",W,ba),rotation:L(O,R,"Rotation",W,ka),offsetX:L(O,R,"OffsetX",
W,oa),offsetY:L(O,R,"OffsetY",W,M),color:L(O,R,"TintColor",W,V,K),anchorPoint:P.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==P.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:P.rotateClockwise,referenceSize:ea,sizeRatio:1,markerPlacement:P.markerPlacement})}function E(P,R,T,W,Z,la,ea,O,U){c.OverrideHelper.findApplicableOverrides(R,W,[]);var ba=R.geometry;if("x"in ba&&"y"in ba){var ka=R.symbol;var oa=ka.underline?"underline":ka.strikethrough?"line-through":
"none";var M=a(ka.fontStyleName);ka.font={family:ka.fontFamilyName,decoration:oa,...M};var V=P.frame,ha=P.size/U;U=P.primitiveName;oa=(ka.height||0)*ha;M=ka.angle||0;var Q=((ka.offsetX||0)+(ba.x-.5*(V.xmin+V.xmax)))*ha;ba=((ka.offsetY||0)+(ba.y-.5*(V.ymin+V.ymax)))*ha;V=k.fromCIMColor(c.CIMSymbolHelper.getFillColor(ka));var X=k.fromCIMColor(c.CIMSymbolHelper.getStrokeColor(ka)),aa=c.CIMSymbolHelper.getStrokeWidth(ka);aa||(X=k.fromCIMColor(c.CIMSymbolHelper.getFillColor(ka.haloSymbol)),aa=ka.haloSize*
ha);ha="";for(const ca of W)ca.primitiveName===U&&void 0!==ca.value&&(ha+=`-${ca.primitiveName}-${ca.propertyName}-${JSON.stringify(ca.value)}`);W=JSON.stringify(P.effects)+Number(P.colorLocked)+JSON.stringify(P.anchorPoint)+P.anchorPointUnits+JSON.stringify(P.markerPlacement);W=l.numericHash(JSON.stringify(R)+W+ha).toString();la.push({type:"text",templateHash:W,materialHash:()=>l.numericHash(JSON.stringify(ka.font)).toString(),cim:ka,materialOverrides:null,colorLocked:P.colorLocked,effects:P.effects,
alignment:ea,anchorPoint:{x:P.anchorPoint?P.anchorPoint.x:0,y:P.anchorPoint?P.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==P.anchorPointUnits,fontName:ka.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:L(U,T,"Size",Z,oa),angle:L(U,T,"Rotation",Z,M),offsetX:L(U,T,"OffsetX",Z,Q),offsetY:L(U,T,"OffsetY",Z,ba),horizontalAlignment:g(ka.horizontalAlignment),verticalAlignment:b(ka.verticalAlignment),text:L(R.primitiveName,T,"TextString",Z,R.textString,k._adjustTextCase,ka.textCase),
color:V,outlineColor:X,outlineSize:aa,referenceSize:O,sizeRatio:1,markerPlacement:P.markerPlacement})}}function F(P,R,T,W,Z,la,ea,O,U,ba){const ka=R.geometry;if(ka){var oa=R.symbol.symbolLayers;if(oa)if(ba)G(P,R,W,T,Z,la,ea,O,U);else for(ba=oa.length;ba--;){var M=oa[ba];if(M&&!1!==M.enable)switch(M.type){case "CIMSolidFill":case "CIMSolidStroke":{var V=e.getExtent(ka);if(!V)continue;const [X,aa,ca]=e.getSDFMetrics(V,P.frame,P.size,P.anchorPoint,"Relative"!==P.anchorPointUnits);var ha="CIMSolidFill"===
M.type;V={type:"sdf",geom:ka,asFill:ha};var Q=P.primitiveName;const ia=P.size,ja=P.rotation||0,qa=P.offsetX,sa=P.offsetY,ta=M.primitiveName,va=ha?k.fromCIMColor(c.CIMSymbolHelper.getFillColor(M)):k.fromCIMColor(c.CIMSymbolHelper.getStrokeColor(M)),wa=ha?{r:0,g:0,b:0,a:0}:k.fromCIMColor(c.CIMSymbolHelper.getStrokeColor(M)),Aa=c.CIMSymbolHelper.getStrokeWidth(M);if(!ha&&!Aa)break;ha=!1;let Ca="";for(const Fa of T)if(Fa.primitiveName===ta||Fa.primitiveName===Q)void 0!==Fa.value?Ca+=`-${Fa.primitiveName}-${Fa.propertyName}-${JSON.stringify(Fa.value)}`:
Fa.valueExpressionInfo&&(ha=!0);Q=JSON.stringify({...P,markerGraphics:null});const Da=l.numericHash(JSON.stringify(V)).toString();M={type:"marker",templateHash:l.numericHash(JSON.stringify(R)+JSON.stringify(M)+Q+Ca).toString(),materialHash:ha?()=>Da:Da,cim:V,materialOverrides:null,colorLocked:P.colorLocked,effects:P.effects,scaleSymbolsProportionally:P.scaleSymbolsProportionally,alignment:ea,anchorPoint:{x:aa,y:ca},isAbsoluteAnchorPoint:!1,size:L(P.primitiveName,W,"Size",Z,ia),rotation:L(P.primitiveName,
W,"Rotation",Z,ja),offsetX:L(P.primitiveName,W,"OffsetX",Z,qa),offsetY:L(P.primitiveName,W,"OffsetY",Z,sa),scaleX:1,frameHeight:U,rotateClockwise:P.rotateClockwise,referenceSize:O,sizeRatio:X,color:L(ta,W,"Color",Z,va,K),outlineColor:L(ta,W,"Color",Z,wa,K),outlineWidth:L(ta,W,"Width",Z,Aa),markerPlacement:P.markerPlacement};la.push(M);break}default:G(P,R,W,T,Z,la,ea,O,U)}}}}function G(P,R,T,W,Z,la,ea,O,U){R={type:P.type,enable:!0,name:P.name,colorLocked:P.colorLocked,primitiveName:P.primitiveName,
anchorPoint:P.anchorPoint,anchorPointUnits:P.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:P.rotateClockwise,rotation:0,size:P.size,billboardMode3D:P.billboardMode3D,depth3D:P.depth3D,frame:P.frame,markerGraphics:[R],scaleSymbolsProportionally:P.scaleSymbolsProportionally,respectFrame:P.respectFrame,clippingPath:P.clippingPath,effects:P.effects};let ba=[];const ka=["Rotation","OffsetX","OffsetY"];ba=W.filter(ca=>ca.primitiveName!==P.primitiveName||-1===ka.indexOf(ca.propertyName));var oa="";
for(var M of W)void 0!==M.value&&(oa+=`-${M.primitiveName}-${M.propertyName}-${JSON.stringify(M.value)}`);const [V,ha,Q]=c.CIMSymbolHelper.getTextureAnchor(R);W=P.primitiveName;M=P.rotation||0;const X=P.offsetX||0,aa=P.offsetY||0;oa=l.numericHash(JSON.stringify(R)+oa).toString();T={type:"marker",templateHash:oa,materialHash:0===ba.length?oa:I(oa,T,ba,Z),cim:R,materialOverrides:ba,colorLocked:P.colorLocked,effects:P.effects,scaleSymbolsProportionally:P.scaleSymbolsProportionally,alignment:ea,anchorPoint:{x:V,
y:ha},isAbsoluteAnchorPoint:!1,size:P.size,rotation:L(W,T,"Rotation",Z,M),offsetX:L(W,T,"OffsetX",Z,X),offsetY:L(W,T,"OffsetY",Z,aa),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:U,rotateClockwise:P.rotateClockwise,referenceSize:O,sizeRatio:Q/f.pt2px(P.size),markerPlacement:P.markerPlacement};la.push(T)}function J(P){return P&&0===P.indexOf("Level_")?parseInt(P.substr(6),10):0}function K(P){if(!P||0===P.length)return null;P=(new w(P)).toRgba();return{r:P[0],
g:P[1],b:P[2],a:P[3]}}function L(P,R,T,W,Z,la,ea){if(P=R[P]){const O=P[T];if("string"===typeof O||"number"===typeof O||O instanceof Array)return la?la.call(null,O,ea):O;if(null!=O&&O instanceof y.ArcadeExpression)return(U,ba,ka)=>{U=m(O,U,{$view:ka},W.geometryType,ba);null!==U&&la&&(U=la.call(null,U,ea));return null!==U?U:Z}}return Z}function I(P,R,T,W){for(const Z of T)if(Z.valueExpressionInfo){const la=R[Z.primitiveName]&&R[Z.primitiveName][Z.propertyName];la instanceof y.ArcadeExpression&&(Z.fn=
(ea,O,U)=>m(la,ea,{$view:U},W.geometryType,O))}return(Z,la,ea)=>{for(const O of T)O.fn&&(O.value=O.fn(Z,la,ea));return l.numericHash(P+c.OverrideHelper.buildOverrideKey(T)).toString()}}const N=p.getLogger("esri.symbols.cim.cimAnalyzer");n.analyzeCIMResource=function(P,R){if(!R||0===R.length)return P;P=JSON.parse(JSON.stringify(P));c.OverrideHelper.applyOverrides(P,R);return P};n.analyzeCIMSymbol=async function(P,R,T,W){T=T?T:[];if(!P)return T;let Z;const la={};if("CIMSymbolReference"===P.type){if(Z=
P.symbol,P=P.primitiveOverrides){const O=[];for(const U of P){var ea=U.valueExpressionInfo;ea&&R?(ea=y.createRendererExpression(ea.expression,R.spatialReference,R.fields).then(ba=>{ba&&h(la,U.primitiveName,U.propertyName,ba)}),O.push(ea)):null!=U.value&&h(la,U.primitiveName,U.propertyName,U.value)}await z.all(O)}}else return N.error("Expect cim type to be 'CIMSymbolReference'"),T;switch(Z.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":t(Z,P,la,R,T,W)}return T};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../core/Logger ../../core/mathUtils ../../Color ./CIMPlacements ./CIMSymbolDrawHelper ./packingUtils".split(" "),function(n,l,p,z,y,w,f){function k(g,b){switch(b.type){case "CIMSymbolReference":g.drawSymbol(b.symbol,{type:"point",x:0,y:0});break;case "CIMPointSymbol":g.drawSymbol(b,{type:"point",x:0,y:0});break;case "CIMVectorMarker":{const a=new y.Placement;g.drawMarker(b,a)}}return g.envelope()}const m=
Math.PI,c=m/2,e=l.getLogger("esri.symbols.cim.CIMSymbolHelper");l=function(){function g(){}g.getEnvelope=function(b){const a=new w.EnvDrawHelper;if(Array.isArray(b)){let h;for(const r of b)h?h.union(k(a,r)):h=k(a,r);return h}return k(a,b)};g.getTextureAnchor=function(b){b=this.getEnvelope(b);if(!b||0>=b.width||0>=b.height)return[0,0,0];const a=96/72,h=b.height*a+2;return[(b.x+.5*b.width)*a/(b.width*a+2),-(b.y+.5*b.height)*a/h,h]};g.rasterize=function(b,a,h,r=!0){var t=h||this.getEnvelope(a);if(!t||
0>=t.width||0>=t.height)return[null,0,0,0,0];var v=96/72;const x=(t.x+.5*t.width)*v,u=(t.y+.5*t.height)*v;b.width=t.width*v;b.height=t.height*v;h||(b.width+=2,b.height+=2);h=b.getContext("2d");v=w.Transformation.createScale(v,-v);v.translate(.5*b.width-x,.5*b.height+u);v=new w.CanvasDrawHelper(h,v);switch(a.type){case "CIMPointSymbol":v.drawSymbol(a,{type:"point",x:0,y:0});break;case "CIMVectorMarker":t=new y.Placement,v.drawMarker(a,t)}a=h.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);
if(r)for(h=0;h<a.length;h+=4)r=a[h+3]/255,a[h]*=r,a[h+1]*=r,a[h+2]*=r;return[a,b.width,b.height,-x/b.width,-u/b.height]};g.fromSimpleMarker=function(b){var a=b.style;if("circle"===a||"esriSMSCircle"===a){var h=Math.acos(.995);var r=Math.ceil(m/h/4);0===r&&(r=1);h=c/r;r*=4;a=[];a.push([50,0]);for(let v=1;v<r;v++)a.push([50*Math.cos(v*h),-50*Math.sin(v*h)]);a.push([50,0]);h={rings:[a]};r={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===a||"esriSMSCross"===a)h={rings:[[[0,50],[0,0],[50,0],[50,-0],
[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],[0,50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===a||"esriSMSDiamond"===a)h={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===a||"esriSMSSquare"===a)h={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===a||"esriSMSX"===a)h={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],
[-0,0],[-50,50],[-50,50],[0,0]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===a||"esriSMSTriangle"===a)r=2/3*100,a=r-100,h={rings:[[[-57.735026918962575,a],[0,r],[57.735026918962575,a],[-57.735026918962575,a]]]},r={xmin:-57.735026918962575,ymin:a,xmax:57.735026918962575,ymax:r};else if("arrow"===a||"esriSMSArrow"===a)h={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},r={xmin:-50,ymin:-50,xmax:50,ymax:50};if(h&&r){var t=[{type:"CIMSolidFill",enable:!0,color:b.color}];
b.outline&&t.push({type:"CIMSolidStroke",enable:!0,width:b.outline.width,color:b.outline.color});t={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:b.angle,size:b.size,offsetX:b.xoffset,offsetY:b.yoffset,frame:r,markerGraphics:[{type:"CIMMarkerGraphic",geometry:h,symbol:{type:"CIMPolygonSymbol",symbolLayers:t}}]}]}}return t};g.fromCIMHatchFill=function(b){const a=void 0!==b.separation?b.separation:4,h=a/2;for(var r=this._getLineSymbolPeriod(b.lineSymbol)||4;4>r;)r*=
2;r/=2;return{type:"CIMVectorMarker",frame:{xmin:-r,xmax:r,ymin:-h,ymax:h},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-r,0],[r,0]]]},symbol:b.lineSymbol}],size:a}};g._getLineSymbolPeriod=function(b){if(b){const a=this._getEffectsRepeat(b.effects);if(a)return a;if(b.symbolLayers)for(const h of b.symbolLayers)if((b=this._getEffectsRepeat(h.effects))||h&&(b=this._getPlacementRepeat(h.markerPlacement)))return b}return 0};g._getEffectsRepeat=function(b){if(b)for(var a of b)if(a)switch(a.type){case "CIMGeometricEffectDashes":if((b=
a.dashTemplate)&&b.length){a=0;for(const h of b)a+=h;b.length&1&&(a*=2);return a}break;case "CIMGeometricEffectWave":return a.period;default:e.error(`unsupported geometric effect type ${a.type}`)}return 0};g._getPlacementRepeat=function(b){if(b)switch(b.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((b=b.placementTemplate)&&b.length){let a=0;for(const h of b)a+=h;b.length&1&&(a*=2);return a}}return 0};
g.fromCIMInsidePolygon=function(b){const a=b.markerPlacement,h=a.stepX/2,r=a.stepY/2;return{type:"CIMVectorMarker",frame:{xmin:-h,xmax:h,ymin:-r,ymax:r},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[{type:b.type,...b,markerPlacement:null,anchorPoint:null}]}}],size:a.stepY}};g.getFillColor=function(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=g.getFillColor(a),null!=b)return b;
break;case "CIMTextSymbol":return g.getFillColor(b.symbol);case "CIMSolidFill":return b.color}};g.getStrokeColor=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=g.getStrokeColor(a),void 0!==b)return b;break;case "CIMTextSymbol":return g.getStrokeColor(b.symbol);case "CIMSolidStroke":return b.color}};g.getStrokeWidth=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=
g.getStrokeWidth(a),void 0!==b)return b;break;case "CIMTextSymbol":return g.getStrokeWidth(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}};g.getSize=function(b){if(b)switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":{let a=0;if(b.symbolLayers)for(const h of b.symbolLayers)b=g.getSize(h),b>a&&(a=b);return a}case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return b.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return b.size}};
g.getMarkerScaleRatio=function(b){if(b)switch(b.type){case "CIMVectorMarker":if(!1!==b.scaleSymbolsProportionally&&b.frame)return b.size/(b.frame.ymax-b.frame.ymin)}return 1};return g}();let q=function(){function g(){}g.rasterizeSimpleFill=function(b,a,h){"solid"!==a&&"none"!==a&&"esriSFSSolid"!==a&&"esriSFSNull"!==a||console.error("Unexpected: style does not require rasterization");h=p.nextPowerOfTwo(Math.ceil(h));var r=this._isHorizontalOrVertical(a)?8*h:16*h;const t=2*h;b.width=r;b.height=r;const v=
b.getContext("2d");v.strokeStyle="#FFFFFF";v.lineWidth=h;v.beginPath();if("vertical"===a||"cross"===a||"esriSFSCross"===a||"esriSFSVertical"===a)v.moveTo(r/2,-t),v.lineTo(r/2,r+t);if("horizontal"===a||"cross"===a||"esriSFSCross"===a||"esriSFSHorizontal"===a)v.moveTo(-t,r/2),v.lineTo(r+t,r/2);if("forward-diagonal"===a||"diagonal-cross"===a||"esriSFSDiagonalCross"===a||"esriSFSForwardDiagonal"===a)v.moveTo(-t,-t),v.lineTo(r+t,r+t),v.moveTo(r-t,-t),v.lineTo(r+t,t),v.moveTo(-t,r-t),v.lineTo(t,r+t);if("backward-diagonal"===
a||"diagonal-cross"===a||"esriSFSBackwardDiagonal"===a||"esriSFSDiagonalCross"===a)v.moveTo(r+t,-t),v.lineTo(-t,r+t),v.moveTo(t,-t),v.lineTo(-t,t),v.moveTo(r+t,r-t),v.lineTo(r-t,r+t);v.stroke();a=v.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);for(r=0;r<a.length;r+=4)h=a[r+3]/255,a[r]*=h,a[r+1]*=h,a[r+2]*=h;return[a,b.width,b.height]};g.rasterizeSimpleLine=function(b,a){switch(a){case "butt":a="Butt";break;case "square":a="Square";break;default:a="Round"}const h="Butt"===a;switch(b){case "dash":case "esriSLSDash":b=
h?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":b=h?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":b=h?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":b=h?[8,3]:[7,4];break;case "long-dash-dot":case "esriSLSLongDashDot":b=h?[8,3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":b=h?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":b=h?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":b=h?[4,1,1,1]:[3,2,0,2];
break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":b=h?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":b=h?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":e.error("Unexpected: style does not require rasterization");b=[0,0];break;default:e.error(`Tried to rasterize SLS, but found an unexpected style: ${b}!`),b=[0,0]}return this.rasterizeDash(b,a)};g.rasterizeDash=function(b,a){var h="Butt"===a,r="Square"===a;a=!h&&!r;var t=0;for(var v of b)t+=v;v=
15*t;var x=31*v;t=new Float32Array(x);var u=a?225:15;for(var D=0;D<x;++D)t[D]=u;u=x=0;D=!0;for(var B of b){x=u;u+=15*B;for(b=x;b<u;){let A=0;for(;31>A;){const C=a?(A-15)*(A-15):Math.abs(A-15);t[A*v+b]=D?h?Math.max(Math.max(x+7.5-b,C),Math.max(b-u+7.5,C)):C:a?Math.min((b-x)*(b-x)+C,(b-u)*(b-u)+C):r?Math.min(Math.max(b-x,C),Math.max(u-b,C)):Math.min(Math.max(b-x+7.5,C),Math.max(u+7.5-b,C));A++}b++}D=!D}h=t.length;B=new Uint8Array(4*h);for(r=0;r<h;++r)f.packFloatRGBA((a?Math.sqrt(t[r]):t[r])/15,B,4*
r);return[B,v,31]};g._isHorizontalOrVertical=function(b){return"vertical"===b||"horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b||"esriSFSHorizontal"===b};return g}(),d=function(){function g(){}g.findApplicableOverrides=function(b,a,h){if(a){if(b.primitiveName){let r=!1;for(const t of h)if(t.primitiveName===b.primitiveName){r=!0;break}if(!r)for(const t of a)t.primitiveName===b.primitiveName&&h.push(t)}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const r of b.effects)g.findApplicableOverrides(r,
a,h);if(b.symbolLayers)for(const r of b.symbolLayers)g.findApplicableOverrides(r,a,h);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(b.effects)for(const r of b.effects)g.findApplicableOverrides(r,a,h);b.markerPlacement&&g.findApplicableOverrides(b.markerPlacement,a,h);if("CIMVectorMarker"===b.type){if(b.markerGraphics)for(const r of b.markerGraphics)g.findApplicableOverrides(r,
a,h),g.findApplicableOverrides(r.symbol,a,h)}else"CIMCharacterMarker"===b.type?g.findApplicableOverrides(b.symbol,a,h):"CIMHatchFill"===b.type&&g.findApplicableOverrides(b.lineSymbol,a,h)}}};g.applyOverrides=function(b,a,h,r){if(a){if(b.primitiveName)for(const v of a)if(v.primitiveName===b.primitiveName){var t=(t=v.propertyName)?t.charAt(0).toLowerCase()+t.substr(1):t;r&&r.push({cim:b,nocapPropertyName:t,value:b[t]});v.expression&&(v.value=g.toValue(v.propertyName,v.expression));if(h){let x=!1;for(const u of h)u.primitiveName===
b.primitiveName&&(x=!0);x||h.push(v)}b[t]=v.value}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const v of b.effects)g.applyOverrides(v,a,h,r);if(b.symbolLayers)for(const v of b.symbolLayers)g.applyOverrides(v,a,h,r);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(const v of b.effects)g.applyOverrides(v,a,h,r);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const v of b.markerGraphics)g.applyOverrides(v,
a,h,r),g.applyOverrides(v.symbol,a,h,r)}}};g.restoreOverrides=function(b){for(const a of b)a.cim[a.nocapPropertyName]=a.value};g.buildOverrideKey=function(b){let a="";for(const h of b)void 0!==h.value&&(a+=`${h.primitiveName}${h.propertyName}${JSON.stringify(h.value)}`);return a};g.toValue=function(b,a){return"DashTemplate"===b?a.split(" ").map(h=>Number(h)):"Color"===b?(b=(new z(a)).toRgba(),b[3]*=255,b):a};return g}();n.CIMSymbolHelper=l;n.OverrideHelper=d;n.SymbolHelper=q;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports"],function(n){let l=function(){function z(){this.setIdentity()}var y=z.prototype;y.getAngle=function(){if(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)this.rz=Math.atan2(this.rz_s,this.rz_c);return this.rz};y.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;this.rz_c=1;this.rz_s=0};y.setTranslate=function(w,f){this.tx=w;this.ty=f};y.setTranslateZ=function(w){this.tz=
w};y.setRotateCS=function(w,f){this.rz=void 0;this.rz_c=w;this.rz_s=f};y.setRotate=function(w){this.rz=w;this.rz_s=this.rz_c=void 0};y.setRotateY=function(w){this.ry=w};y.setScale=function(w){this.s=w};y.setMeasure=function(w){this.m=w};return z}(),p=function(){function z(){}z.prototype.next=function(){return null};return z}();n.EmptyPlacementCursor=p;n.Placement=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../geometry/support/boundsUtils ../../geometry/support/jsonUtils ../../geometry/support/aaBoundingRect ./CIMPlacements ./CIMEffects ./CIMOperators ./Rect".split(" "),
function(n,l,p,z,y,w,f,k,m,c){const e=Math.PI/180,q=p.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let d=function(){function a(r){this._t=r}a.createIdentity=function(){return new a([1,0,0,0,1,0])};var h=a.prototype;h.clone=function(){return new a(this._t.slice())};h.transform=function(r){const t=this._t;return[t[0]*r[0]+t[1]*r[1]+t[2],t[3]*r[0]+t[4]*r[1]+t[5]]};a.createScale=function(r,t){return new a([r,0,0,0,t,0])};h.scale=function(r,t){const v=this._t;v[0]*=r;v[1]*=r;v[2]*=r;v[3]*=t;v[4]*=
t;v[5]*=t;return this};h.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(r,t){return new a([0,0,r,0,0,t])};h.translate=function(r,t){const v=this._t;v[2]+=r;v[5]+=t;return this};a.createRotate=function(r){const t=Math.cos(r);r=Math.sin(r);return new a([t,-r,0,r,t,0])};h.rotate=function(r){return this.multiply(a.createRotate(r))};h.multiply=function(r){const t=this._t;r=r._t;const v=t[1]*r[0]+t[4]*r[1],x=t[2]*r[0]+t[5]*r[1]+r[2],u=t[0]*
r[3]+t[3]*r[4],D=t[1]*r[3]+t[4]*r[4],B=t[2]*r[3]+t[5]*r[4]+r[5];t[0]=t[0]*r[0]+t[3]*r[1];t[1]=v;t[2]=x;t[3]=u;t[4]=D;t[5]=B;return this};return a}();p=function(){function a(r){this._transfos=[];this._sizeTransfos=[];this._transfos.push(r||d.createIdentity());this._sizeTransfos.push(r?r.scaleRatio():1)}var h=a.prototype;h.transformPt=function(r){return this._transfos[this._transfos.length-1].transform(r)};h.transformSize=function(r){return r*this._sizeTransfos[this._sizeTransfos.length-1]};h.back=
function(){return this._transfos[this._transfos.length-1]};h.push=function(r,t){t=t?r.scaleRatio():1;r.multiply(this.back());this._transfos.push(r);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*t)};h.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};h.drawSymbol=function(r,t){if(r)switch(r.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(r,t)}};h.drawMultiLayerSymbol=function(r,t){if(r){var v=r.symbolLayers;
if(v)if(r=r.effects){if(t=this.executeEffects(r,t))for(r=t.next();r;)this.drawSymbolLayers(v,r),r=t.next()}else this.drawSymbolLayers(v,t)}};h.executeEffects=function(r,t){t=new k.SimpleGeometryCursor(t);for(const v of r)(r=m.getEffectOperator(v))&&(t=r.execute(t,v,1));return t};h.drawSymbolLayers=function(r,t){let v=r.length;for(;v--;){const u=r[v];if(u&&!1!==u.enable){var x=u.effects;if(x){if(x=this.executeEffects(x,t)){let D=x.next();for(;D;)this.drawSymbolLayer(u,D),D=x.next()}}else this.drawSymbolLayer(u,
t)}}};h.drawSymbolLayer=function(r,t){switch(r.type){case "CIMSolidFill":this.drawSolidFill(t,r.color);break;case "CIMHatchFill":this.drawHatchFill(r,t);break;case "CIMSolidStroke":this.drawSolidStroke(t,r.color,r.width,r.capStyle,r.joinStyle,r.miterLimit);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(r,t)}};h.drawHatchFill=function(r,t){const v=this._buildHatchPolyline(r,t,1);v&&(this.pushClipPath(t),this.drawMultiLayerSymbol(r.lineSymbol,v),
this.popClipPath())};h.drawMarkerLayer=function(r,t){var v=r.markerPlacement;if(v){const u=m.getPlacementOperator(v);if(u){var x="CIMMarkerPlacementInsidePolygon"===v.type;x&&this.pushClipPath(t);if(t=u.execute(t,v,1))for(v=t.next();v;)this.drawMarker(r,v),v=t.next();x&&this.popClipPath()}}else x=new f.Placement,x.tx=t.x,x.ty=t.y,this.drawMarker(r,x)};h.drawMarker=function(r,t){switch(r.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(r,t);break;case "CIMVectorMarker":this.drawVectorMarker(r,
t)}};h.drawPictureMarker=function(r,t){};h.drawVectorMarker=function(r,t){if(r){var v=r.markerGraphics;if(v){var x=r.size,u=r.frame,D=u?u.ymax-u.ymin:0;x=x&&D?x/D:1;D=d.createIdentity();u&&D.translate(.5*-(u.xmax+u.xmin),.5*-(u.ymax+u.ymin));var B=r.anchorPoint;if(B){let A=B.x;B=B.y;"Absolute"!==r.anchorPointUnits&&u&&(A*=u.xmax-u.xmin,B*=u.ymax-u.ymin);D.translate(-A,-B)}1!==x&&D.scale(x,x);r.rotation&&D.rotate(r.rotation*e);D.translate(r.offsetX||0,r.offsetY||0);D.translate(t.tx,t.ty);this.push(D,
r.scaleSymbolsProportionally);for(const A of v)A&&A.symbol&&A.geometry||q.error("Invalid marker graphic",A),this.drawSymbol(A.symbol,A.geometry);this.pop()}}};h._buildHatchPolyline=function(r,t,v){var x=(void 0!==r.separation?r.separation:4)*v,u=void 0!==r.rotation?r.rotation:0;if(0===x)return null;0>x&&(x=-x);for(var D=0,B=.5*x;D>B;)D-=x;for(;D<-B;)D+=x;D=w.create();z.getBoundsXY(D,t);D[0]-=B;D[1]-=B;D[2]+=B;D[3]+=B;for(var A=[[D[0],D[1]],[D[0],D[3]],[D[2],D[3]],[D[2],D[1]]];180<u;)u-=180;for(;0>
u;)u+=180;B=Math.cos(u*e);var C=Math.sin(u*e);u=-x*C;t=x*B;D=(void 0!==r.offsetX?r.offsetX*v:0)*C-(void 0!==r.offsetY?r.offsetY*v:0)*B;let E;var F=r=Number.MAX_VALUE;E=v=-Number.MAX_VALUE;for(var G of A){var J=G[0];const K=G[1];A=B*J+C*K;J=-C*J+B*K;F=Math.min(F,A);r=Math.min(r,J);E=Math.max(E,A);v=Math.max(v,J)}r=Math.floor(r/x)*x;G=B*F-C*r-u*D/x;F=C*F+B*r-t*D/x;A=B*E-C*r-u*D/x;D=C*E+B*r-t*D/x;x=1+Math.round((v-r)/x);B=[];for(C=0;C<x;C++)G+=u,F+=t,A+=u,D+=t,B.push([[G,F],[A,D]]);return{paths:B}};
return a}();let g=function(a){function h(){var t=a.call(this)||this;t.reset();return t}l._inheritsLoose(h,a);var r=h.prototype;r.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};r.envelope=function(){return new c(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};r.drawSolidFill=function(t){!t||0<this._clipCount||(y.isPolygon(t)?this._processPath(t.rings,0):y.isPolyline(t)&&this._processPath(t.paths,0))};r.drawSolidStroke=function(t,
v,x){!t||0<this._clipCount||(v=.5*this.transformSize(x),y.isPolygon(t)?this._processPath(t.rings,v):y.isPolyline(t)&&this._processPath(t.paths,v))};r.pushClipPath=function(t){this.drawSolidFill(t);++this._clipCount};r.popClipPath=function(){--this._clipCount};r._processPath=function(t,v){if(t)for(const x of t)if(t=x?x.length:0,1<t){this._merge(this.transformPt(x[0]),v);for(let u=1;u<t;++u)this._merge(this.transformPt(x[u]),v)}};r._merge=function(t,v){t[0]-v<this._xmin&&(this._xmin=t[0]-v);t[0]+v>
this._xmax&&(this._xmax=t[0]+v);t[1]-v<this._ymin&&(this._ymin=t[1]-v);t[1]+v>this._ymax&&(this._ymax=t[1]+v)};return h}(p),b=function(a){function h(t,v){v=a.call(this,v)||this;v._ctx=t;return v}l._inheritsLoose(h,a);var r=h.prototype;r.drawSolidFill=function(t,v){if(t){if(y.isPolygon(t))this._buildPath(t.rings,!0);else if(y.isPolyline(t))this._buildPath(t.paths,!0);else return;t=this._ctx;t.fillStyle="string"===typeof v?v:"rgba("+Math.round(v[0])+","+Math.round(v[1])+","+Math.round(v[2])+","+v[3]/
255+")";t.fill("evenodd")}};r.drawSolidStroke=function(t,v,x,u,D,B){if(t&&v&&0!==x){if(y.isPolygon(t))this._buildPath(t.rings,!0);else if(y.isPolyline(t))this._buildPath(t.paths,!1);else return;t=this._ctx;t.strokeStyle="string"===typeof v?v:"rgba("+Math.round(v[0])+","+Math.round(v[1])+","+Math.round(v[2])+","+v[3]/255+")";t.lineWidth=this.transformSize(x)+.5;this._setCapStyle(u);this._setJoinStyle(D);t.miterLimit=B;t.stroke()}};r.pushClipPath=function(t){this._ctx.save();y.isPolygon(t)?this._buildPath(t.rings,
!0):y.isPolyline(t)&&this._buildPath(t.paths,!0);this._ctx.clip("evenodd")};r.popClipPath=function(){this._ctx.restore()};r._buildPath=function(t,v){const x=this._ctx;x.beginPath();if(t)for(const u of t)if(t=u?u.length:0,1<t){let D=this.transformPt(u[0]);x.moveTo(D[0],D[1]);for(let B=1;B<t;++B)D=this.transformPt(u[B]),x.lineTo(D[0],D[1]);v&&x.closePath()}};r._setCapStyle=function(t){switch(t){case "Butt":this._ctx.lineCap="butt";break;case "Round":this._ctx.lineCap="round";break;case "Square":this._ctx.lineCap=
"square"}};r._setJoinStyle=function(t){switch(t){case "Bevel":this._ctx.lineJoin="bevel";break;case "Round":this._ctx.lineJoin="round";break;case "Miter":this._ctx.lineJoin="miter"}};return h}(p);n.CIMSymbolDrawHelper=p;n.C_DEG_TO_RAD=e;n.CanvasDrawHelper=b;n.EnvDrawHelper=g;n.Transformation=d;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../core/lang"],function(n,l){let p=function(){function z(y){this._geometry=y}z.prototype.next=
function(){const y=this._geometry;this._geometry=null;return y};return z}();n.SimpleGeometryCursor=p;n.clone=function(z){return l.clone(z)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x){n.getEffectOperator=function(u){if(!u)return null;switch(u.type){case "CIMGeometricEffectAddControlPoints":return l.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return p.EffectArrow.local();case "CIMGeometricEffectBuffer":return z.EffectBuffer.local();case "CIMGeometricEffectCut":return y.EffectCut.local();case "CIMGeometricEffectDashes":return w.EffectDashes.local();case "CIMGeometricEffectDonut":return f.EffectDonut.local();case "CIMGeometricEffectJog":return k.EffectJog.local();
case "CIMGeometricEffectMove":return m.EffectMove.local();case "CIMGeometricEffectOffset":return c.EffectOffset.local();case "CIMGeometricEffectReverse":return e.EffectReverse.local();case "CIMGeometricEffectRotate":return q.EffectRotate.local();case "CIMGeometricEffectScale":return d.EffectScale.local();case "CIMGeometricEffectWave":return g.EffectWave.local()}return null};n.getPlacementOperator=function(u){if(!u)return null;switch(u.type){case "CIMMarkerPlacementAlongLineSameSize":return b.PlacementAlongLineSameSize.local();
case "CIMMarkerPlacementAtExtremities":return a.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return h.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return r.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return t.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return v.PlacementOnVertices.local();case "CIMMarkerPlacementPolygonCenter":return x.PlacementPolygonCenter.local()}return null};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(){function f(m,c,e){this._inputGeometries=m;this._angleTolerance=void 0!==c.angleTolerance?c.angleTolerance:
120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var k=f.prototype;k.next=function(){for(var m=this._inputGeometries.next();m;){if(p.isPolygon(m))return this._isClosed=!0,m=l.clone(m),this._processMultipath(m.rings),m;if(p.isPolyline(m))return this._isClosed=!1,m=l.clone(m),this._processMultipath(m.paths),m;if(p.isExtent(m)){if(this._maxCosAngle)return m;this._isClosed=!0;m=[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]];this._processPath(m);
return{rings:[m]}}m=this._inputGeometries.next()}return null};k._processMultipath=function(m){if(m)for(const c of m)this._processPath(c)};k._processPath=function(m){if(m){let c=m.length,e=m[0],q,d,g,b,a,h;this._isClosed&&++c;for(let r=1;r<c;++r){let t;t=this._isClosed&&r===c-1?m[0]:m[r];const v=t[0]-e[0],x=t[1]-e[1],u=Math.sqrt(v*v+x*x);1<r&&0<u&&0<g&&(q*v+d*x)/u/g<=this._maxCosAngle&&z.setId(e,1);1===r&&(b=v,a=x,h=u);0<u&&(e=t,q=v,d=x,g=u)}this._isClosed&&0<g&&0<h&&(q*b+d*a)/h/g<=this._maxCosAngle&&
z.setId(m[0],1)}};return f}();n.EffectAddControlPoints=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CIMCursor":function(){define(["exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(n,l,p,z){function y(g){if(g){var b=g.length;for(--b;0<b;--b)g[b][0]-=g[b-1][0],g[b][1]-=g[b-1][1]}}function w(g){if(g)for(const b of g)y(b)}function f(g){if(g){const b=g.length;for(let a=1;a<b;++a)g[a][0]+=g[a-1][0],g[a][1]+=g[a-1][1]}}function k(g){if(g)for(const b of g)f(b)}
function m(g){g&&(p.isPolygon(g)?k(g.rings):p.isPolyline(g)?k(g.paths):p.isMultipoint(g)&&f(g.points))}function c(g){g&&g.reverse()}function e(g){return{rings:[[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]}}let q=function(){function g(b,a,h,r){this.acceptPolygon=a;this.acceptPolyline=h;this.geomUnitsPerPoint=r;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;b&&(p.isPolygon(b)?a&&(this.multiPath=b.rings,this.isClosed=!0):p.isPolyline(b)?h&&(this.multiPath=
b.paths,this.isClosed=!1):p.isExtent(b)&&a&&(this.multiPath=e(b).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new z.Placement}g.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const b=this.processPath(this.multiPath[this.pathIndex]);if(b)return b}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return g}(),d=function(){function g(b,
a,h,r){this.inputGeometries=b;this.acceptPolygon=a;this.acceptPolyline=h;this.geomUnitsPerPoint=r;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}g.prototype.next=function(){for(;;){if(!this.multiPath){for(var b=this.inputGeometries.next();b;)if(p.isPolygon(b)?this.acceptPolygon&&(this.multiPath=b.rings,this.isClosed=!0):p.isPolyline(b)?this.acceptPolyline&&(this.multiPath=b.paths,this.isClosed=!1):p.isExtent(b)&&this.acceptPolygon&&(this.multiPath=e(b).rings,this.isClosed=!0),this.multiPath){this.pathCount=
this.multiPath.length;this.pathIndex=-1;break}else b=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,b=this.processPath(this.multiPath[this.pathIndex]))return b;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return g}();n.PathGeometryCursor=d;n.PathTransformationCursor=q;n.cloneAndDecodeGeometry=function(g){g=l.clone(g);m(g);return g};n.deltaDecodeGeometry=m;n.deltaEncodeGeometry=function(g){g&&
(p.isPolygon(g)?w(g.rings):p.isPolyline(g)?w(g.paths):p.isMultipoint(g)&&y(g.points))};n.getCoord2D=function(g,b,a){return[g[0]+(b[0]-g[0])*a,g[1]+(b[1]-g[1])*a]};n.getId=function(g){return g[4]};n.isClosedPath=function(g){return g&&0!==g.length?g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]:!1};n.reverseMultipath=function(g){if(g)for(const b of g)c(b)};n.reversePath=c;n.setId=function(g,b){g[4]=b};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectArrow":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(f){function k(c,e,q){c=f.call(this,c,!1,!0)||this;c._curveHelper=new z.CurveHelper;c._width=(void 0!==e.width?e.width:5)*q;c._arrowType=void 0!==e.geometricEffectArrowType?e.geometricEffectArrowType:
"OpenEnded";c._offsetFlattenError=z.PIXEL_TOLERANCE*q;return c}l._inheritsLoose(k,f);var m=k.prototype;m.processPath=function(c){switch(this._arrowType){default:return this._constructSimpleArrow(c,!0);case "Block":return this._constructSimpleArrow(c,!1);case "Crossed":return this._constructCrossedArrow(c)}};m._constructSimpleArrow=function(c,e){var q=this._curveHelper.calculatePathLength(c),d=this._width;q<2*d&&(d=q/2);q=this._curveHelper.getSubCurve(c,0,q-d);if(!q)return null;var g=d/2;if(this._curveHelper.isEmpty(q,
!1))return null;d=this._constructOffset(q,-g);if(!d)return null;q=this._constructOffset(q,g);if(!q)return null;const b=this._constructArrowBasePoint(d,-g/2);if(!b)return null;g=this._constructArrowBasePoint(q,g/2);if(!g)return null;c=c[c.length-1];e||(this._makeControlPoint(q,!0),this._makeControlPoint(d,!0));const a=new z.PathHelper;a.addPath(q,!0);a.lineTo(g);this._makeControlPoint(a.path());a.lineTo(c);this._makeControlPoint(a.path());a.lineTo(b);this._makeControlPoint(a.path());a.addPath(d,!1);
return e?{paths:[a.path()]}:(a.close(),{rings:[a.path()]})};m._constructCrossedArrow=function(c){var e=this._curveHelper.calculatePathLength(c),q=this._width;e<3.732050807568877*q&&(q=e/3.732050807568877);var d=this._curveHelper.getSubCurve(c,0,e-2.732050807568877*q);if(!d)return null;var g=q/2;if(this._curveHelper.isEmpty(d,!1))return null;const b=this._constructOffset(d,g);if(!b)return null;d=this._constructOffset(d,-g);if(!d)return null;e=this._curveHelper.getSubCurve(c,0,e-q);if(!e||this._curveHelper.isEmpty(e,
!1))return null;q=this._constructOffset(e,g);if(!q)return null;var a=this._constructOffset(e,-g);if(!a)return null;e=q[q.length-1];q=this._constructArrowBasePoint(q,g/2);if(!q)return null;const h=a[a.length-1];g=this._constructArrowBasePoint(a,-g/2);if(!g)return null;c=c[c.length-1];this._makeControlPoint(b,!1);this._makeControlPoint(d,!1);a=new z.PathHelper;a.addPath(b,!0);this._makeControlPoint(a.path());a.lineTo(h);a.lineTo(g);this._makeControlPoint(a.path());a.lineTo(c);this._makeControlPoint(a.path());
a.lineTo(q);this._makeControlPoint(a.path());a.lineTo(e);this._makeControlPoint(a.path());a.addPath(d,!1);return{paths:[a.path()]}};m._constructOffset=function(c,e){return this._curveHelper.offset(c,e,"Rounded",4,this._offsetFlattenError)};m._constructArrowBasePoint=function(c,e){if(!c||2>c.length)return null;var q=c[c.length-2];c=c[c.length-1];q=[c[0]-q[0],c[1]-q[1]];this._curveHelper.normalize(q);return[c[0]+q[1]*e,c[1]-q[0]*e]};m._makeControlPoint=function(c,e=!1){e?p.setId(c[0],1):p.setId(c[c.length-
1],1)};return k}(p.PathGeometryCursor);n.EffectArrow=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/CurveHelper":function(){define(["exports"],function(n){let l=function(){function z(){this._path=[]}var y=z.prototype;y.path=function(){return this._path};y.addPath=function(w,f){f||w.reverse();Array.prototype.push.apply(this._path,w);f||w.reverse()};z.mergePath=function(w,f){f&&Array.prototype.push.apply(w,f)};y.startPath=function(w){this._path.push(w)};y.lineTo=function(w){this._path.push(w)};
y.close=function(){const w=this._path;1<w.length&&(w[0][0]!==w[w.length-1][0]||w[0][1]!==w[w.length-1][1])&&w.push([w[0][0],w[0][1]])};return z}(),p=function(){function z(w,f){}var y=z.prototype;y.normalize=function(w){const f=Math.sqrt(w[0]*w[0]+w[1]*w[1]);w[0]/=f;w[1]/=f};y.calculateLength=function(w,f){const k=f[0]-w[0];w=f[1]-w[1];return Math.sqrt(k*k+w*w)};y.calculateSegLength=function(w,f){return this.calculateLength(w[f],w[f+1])};y.calculatePathLength=function(w){let f=0;const k=w?w.length:
0;for(let m=0;m<k-1;++m)f+=this.calculateSegLength(w,m);return f};y.calculatePathArea=function(w){let f=0;const k=w?w.length:0;for(let m=0;m<k-1;++m)f+=(w[m+1][0]-w[m][0])*(w[m+1][1]+w[m][1]);return f/2};y.getCoord2D=function(w,f,k){return[w[0]+(f[0]-w[0])*k,w[1]+(f[1]-w[1])*k]};y.getSegCoord2D=function(w,f,k){return this.getCoord2D(w[f],w[f+1],k)};y.getAngle=function(w,f,k){return Math.atan2(f[1]-w[1],f[0]-w[0])};y.getSegAngle=function(w,f,k){return this.getAngle(w[f],w[f+1],k)};y.getAngleCS=function(w,
f,k){k=f[0]-w[0];w=f[1]-w[1];f=Math.sqrt(k*k+w*w);return 0<f?[k/f,w/f]:[1,0]};y.getSegAngleCS=function(w,f,k){return this.getAngleCS(w[f],w[f+1],k)};y.cut=function(w,f,k,m){k=0>=k?w[f]:this.getSegCoord2D(w,f,k);w=1<=m?w[f+1]:this.getSegCoord2D(w,f,m);return[k,w]};y.addSegment=function(w,f,k){k&&w.push(f[0]);w.push(f[1])};y.getSubCurve=function(w,f,k){const m=[];return this.appendSubCurve(m,w,f,k)?m:null};y.appendSubCurve=function(w,f,k,m){const c=f?f.length-1:0;let e=0,q=!0,d=0;for(;d<c;){const b=
this.calculateSegLength(f,d);if(0!==b){if(q){if(e+b>k){var g=(k-e)/b;let a=1,h=!1;e+b>=m&&(a=(m-e)/b,h=!0);(g=this.cut(f,d,g,a))&&this.addSegment(w,g,q);if(h)break;q=!1}}else{if(e+b>m){(f=this.cut(f,d,0,(m-e)/b))&&this.addSegment(w,f,q);break}this.addSegment(w,[f[d],f[d+1]],q)}e+=b}++d}return!0};y.getCIMPointAlong=function(w,f){const k=w?w.length-1:0;let m=0,c=-1;for(;c<k;){++c;const e=this.calculateSegLength(w,c);if(0!==e){if(m+e>f)return this.getCoord2D(w[c],w[c+1],(f-m)/e);m+=e}}return null};y.isEmpty=
function(w,f){if(!w||1>=w.length)return!0;const k=w?w.length-1:0;let m=-1;for(;m<k;)if(++m,w[m+1][0]!==w[m][0]||w[m+1][1]!==w[m][1]||f&&w[m+1][2]!==w[m][2])return!1;return!0};y.offset=function(w,f,k,m,c){if(!w||2>w.length)return null;c=w.length;const e=w[0][0]===w[c-1][0]&&w[0][1]===w[c-1][1];if(e){if(3>w.length)return null;--c}const q=[];var d=e?w[c-1]:null;let g=w[0];for(let r=0;r<c;r++){const t=r===c-1?e?w[0]:null:w[r+1];if(d)if(t){var b=[t[0]-g[0],t[1]-g[1]];this.normalize(b);d=[g[0]-d[0],g[1]-
d[1]];this.normalize(d);var a=d[0]*b[1]-d[1]*b[0],h=d[0]*b[0]+d[1]*b[1];if(0<=a===0>=f)b=[b[0]-d[0],b[1]-d[1]],this.normalize(b),d=-Math.abs(f)/Math.sqrt((1+h)/2),q.push([g[0]-b[0]*d,g[1]-b[1]*d]);else switch(k){case "Mitered":if(h=Math.sqrt((1+h)/2),0<h&&1/h<m){b=[b[0]-d[0],b[1]-d[1]];this.normalize(b);d=Math.abs(f)/h;q.push([g[0]-b[0]*d,g[1]-b[1]*d]);break}case "Bevelled":q.push([g[0]+d[1]*f,g[1]-d[0]*f]);q.push([g[0]+b[1]*f,g[1]-b[0]*f]);break;case "Rounded":q.push([g[0]+d[1]*f,g[1]-d[0]*f]);h=
.2;for(a=1;5>a;a++,h+=.2){const v=[d[1]*(1-h)+b[1]*h,-d[0]*(1-h)-b[0]*h];this.normalize(v);q.push([g[0]+v[0]*f,g[1]+v[1]*f])}q.push([g[0]+b[1]*f,g[1]-b[0]*f]);break;default:0>a?(q.push([g[0]+(d[1]+d[0])*f,g[1]+(d[1]-d[0])*f]),q.push([g[0]+(b[1]-b[0])*f,g[1]-(b[0]+b[1])*f])):(h=Math.sqrt((1+Math.abs(h))/2),b=[b[0]-d[0],b[1]-d[1]],this.normalize(b),d=f/h,q.push([g[0]-b[0]*d,g[1]-b[1]*d]))}}else b=[g[0]-d[0],g[1]-d[1]],this.normalize(b),q.push([g[0]+b[1]*f,g[1]-b[0]*f]);else b=[t[0]-g[0],t[1]-g[1]],
this.normalize(b),q.push([g[0]+b[1]*f,g[1]-b[0]*f]);d=g;g=t}e&&q.push([q[0][0],q[0][1]]);return q};return z}();n.CurveHelper=p;n.PIXEL_TOLERANCE=.03;n.PathHelper=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectBuffer":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(n,l,p){let z=function(){function w(){}w.local=function(){null===w.instance&&(w.instance=new w);return w.instance};w.prototype.execute=function(f,k,m){return new y(f,
k,m)};return w}();z.instance=null;let y=function(){function w(f,k,m){this._inputGeometries=f;this._curveHelper=new p.CurveHelper;this._size=(void 0!==k.size?k.size:1)*m;this._offsetFlattenError=p.PIXEL_TOLERANCE*m}w.prototype.next=function(){let f=this._inputGeometries.next();for(;f;){if(l.isExtent(f))if(0<this._size){var k=this._curveHelper.offset([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]],this._size,"Rounded",4,this._offsetFlattenError);if(k)return{rings:[k]}}else if(0>
this._size){if(0<Math.min(f.xmax-f.xmin,f.ymax-f.ymin)+2*this._size)return{xmin:f.xmin-this._size,xmax:f.xmax+this._size,ymin:f.ymin-this._size,ymax:f.ymax+this._size}}else return f;if(l.isPolygon(f)){if(0===this._size)return f;k=[];for(const c of f.rings){var m=this._curveHelper.offset(c,this._size,"Rounded",4,this._offsetFlattenError);m&&k.push(m)}if(k.length)return{rings:k}}if(l.isPolyline(f)&&0<this._size){k=[];for(const c of f.paths)if(c&&1<c.length){m=this._curveHelper.offset(c,this._size,"Rounded",
4,this._offsetFlattenError);const e=this._curveHelper.offset(c,-this._size,"Rounded",4,this._offsetFlattenError);if(m&&e){for(let q=e.length-1;0<=q;q--)m.push(e[q]);m.push([m[0][0],m[0][1]]);k.push(m)}}if(k.length)return{rings:k}}l.isPoint(f);f=this._inputGeometries.next()}return null};return w}();n.EffectBuffer=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],
function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(f){function k(m,c,e){m=f.call(this,m,!0,!0)||this;m._curveHelper=new z.CurveHelper;m._beginCut=(void 0!==c.beginCut?c.beginCut:1)*e;m._endCut=(void 0!==c.endCut?c.endCut:1)*e;m._middleCut=(void 0!==c.middleCut?c.middleCut:0)*e;m._invert=void 0!==c.invert?c.invert:!1;0>m._beginCut&&
(m._beginCut=0);0>m._endCut&&(m._endCut=0);0>m._middleCut&&(m._middleCut=0);return m}l._inheritsLoose(k,f);k.prototype.processPath=function(m){var c=this._beginCut;const e=this._endCut,q=this._middleCut,d=this._curveHelper.calculatePathLength(m),g=[];if(!this._invert)0===c&&0===e&&0===q?g.push(m):c+e+q>=d||(0===q?(m=this._curveHelper.getSubCurve(m,c,d-e))&&g.push(m):((c=this._curveHelper.getSubCurve(m,c,.5*(d-q)))&&g.push(c),(c=this._curveHelper.getSubCurve(m,.5*(d+q),d-e))&&g.push(c)));else if(0!==
c||0!==e||0!==q)c+e+q>=d?g.push(m):((c=this._curveHelper.getSubCurve(m,0,c))&&g.push(c),(c=this._curveHelper.getSubCurve(m,.5*(d-q),.5*(d+q)))&&g.push(c),(c=this._curveHelper.getSubCurve(m,d-e,e))&&g.push(c));return 0===g.length?null:{paths:g}};return k}(p.PathGeometryCursor);n.EffectCut=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDashes":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../GeometryWalker"],
function(n,l,p,z,y){let w=function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(m,c,e){return new f(m,c,e)};return k}();w.instance=null;let f=function(k){function m(c,e,q){c=k.call(this,c,!0,!0)||this;c._walker=new y.GeometryWalker;c._walker.updateTolerance(q);c._endings=e.lineDashEnding;c._customDashPos=void 0!==e.offsetAlongLine?e.offsetAlongLine*q:0;c._offsetAtEnd=void 0!==e.customEndingOffset?e.customEndingOffset*q:0;
c._pattern=new y.DashPattern;c._pattern.init(e.dashTemplate,!0);c._pattern.scale(q);return c}l._inheritsLoose(m,k);m.prototype.processPath=function(c){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[c]};if(!this.iteratePath){var e=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;case "FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case "FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case "NoConstraint":this.isClosed||
(e=!1);break;case "Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var q=this._walker.calculatePathLength(c);if(this._pattern.isEmpty()||q<.1*this._pattern.length()||!this._walker.init(c,this._pattern,e))return{paths:[c]}}if(this.iteratePath)c=this._pattern.nextValue();else{switch(this._endings){default:e=.5*this._pattern.firstValue();break;case "HalfGap":e=.5*-this._pattern.lastValue();break;case "FullGap":e=-this._pattern.lastValue();break;case "FullPattern":e=0;break;case "NoConstraint":case "Custom":e=
-this._customDashPos}c=e/this._pattern.length();c-=Math.floor(c);e=c*this._pattern.length();this._pattern.reset();c=this._pattern.nextValue();for(q=!1;e>=c;)e-=c,c=this._pattern.nextValue(),q=!q;c-=e;q?(this._walker.nextPosition(c),c=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(c),c=this._pattern.nextValue(),this._walker.nextPosition(c),c=this._pattern.nextValue())}(e=this._walker.nextCurve(c))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,
1),z.PathHelper.mergePath(e,this._firstCurve),this._firstCurve=null)):(c=this._pattern.nextValue(),!this._walker.nextPosition(c)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(e=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,e=this._firstCurve,this._firstCurve=null);return{paths:[e]}};return m}(p.PathGeometryCursor);n.EffectDashes=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","./CIMCursor","./CurveHelper"],function(n,l,p,z){let y=function(){function k(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=this.extPtGap=0}var m=k.prototype;m.isEmpty=function(){return 0===this._values.length};m.size=function(){return this._values.length};m.init=function(c,e,q=!0){this._setEmpty();if(!c||0===c.length)return!1;for(let d=0;d<c.length;d++){let g=Math.abs(c[d]);q&&1E-7>g&&(g=1E-7);this._values.push(g);this._length+=g}e&&c.length&
1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};m.scale=function(c){const e=this._values?this._values.length:0;for(let q=0;q<e;++q)this._values[q]*=c;this._length*=c;this.extPtGap*=c;this.ctrlPtGap*=c};m.addValue=function(c){this._length+=c;this._values.push(c)};m.firstValue=function(){return this._values[0]};m.lastValue=function(){return this._values[this._values.length-1]};m.nextValue=function(){this._currentValue++;this._currentValue===
this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};m.reset=function(){this._currentValue=-1};m.length=function(){return this._length};m._setEmpty=function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=-1;this._values.length=0};return k}(),w=function(){function k(){this.reset()}var m=k.prototype;m.reset=function(){this.segment=-1;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};m.isValid=function(){return-1!==this.segment};m.copyTo=
function(c){c.segment=this.segment;c.segmentLength=this.segmentLength;c.abscissa=this.abscissa;c.isPathEnd=this.isPathEnd;c.isPartEnd=this.isPartEnd};return k}(),f=function(k){function m(e=0,q=!1){e=k.call(this,e,q)||this;e._tolerance=z.PIXEL_TOLERANCE;e._currentPosition=new w;return e}l._inheritsLoose(m,k);var c=m.prototype;c.updateTolerance=function(e){this._tolerance=z.PIXEL_TOLERANCE*e};c.init=function(e,q,d=!0){d?(this._patternLength=q.length(),this._partExtPtGap=q.extPtGap,this._partCtrlPtGap=
q.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._path=e;this._seg=-1;return this.setPosAtNextPart()};c.curPositionIsValid=function(){return this._currentPosition.isValid()};c.nextPosition=function(e,q=0){const d=new w;if(!this._nextPosition(e,d,null,q))return!1;d.copyTo(this._currentPosition);return!0};c.curPointAndAngle=function(e){e.pt=this._getPoint(this._currentPosition);const [q,d]=this._getAngle(this._currentPosition);
e.ca=q;e.sa=d};c.nextPointAndAngle=function(e,q,d=0){const g=new w;if(!this._nextPosition(e,g,null,d))return!1;g.copyTo(this._currentPosition);q.pt=this._getPoint(g);const [b,a]=this._getAngle(g);q.ca=b;q.sa=a;return!0};c.nextCurve=function(e){if(0===e)return null;const q=[],d=new w;if(!this._nextPosition(e,d,q,1))return null;d.copyTo(this._currentPosition);return q};c.isPathEnd=function(){return this._currentPosition.isPathEnd};c.getPathEnd=function(){if(-1===this._currentPosition.segment)throw Error("missing segment");
return this._path[this._currentPosition.segment+1]};c._nextPosition=function(e,q,d,g){if(this._currentPosition.isPathEnd)return!1;var b=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&(b/=this._currentPosition.segmentLength);for(this._currentPosition.copyTo(q);q.abscissa+e*this._partLengthRatio>q.segmentLength+this._tolerance;)if(d&&(0===d.length&&(0===b?(b=this._path[q.segment],d.push([b[0],b[1]])):d.push(this.getSegCoord2D(this._path,q.segment,b))),b=this._path[q.segment+1],
d.push([b[0],b[1]])),b=0,e-=(q.segmentLength-q.abscissa)/this._partLengthRatio,this._partSegCount)q.segment=this.nextSegment(),q.segmentLength=this.calculateSegLength(this._path,q.segment),q.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart()){if(0===g)return!1;q.segmentLength=this.calculateSegLength(this._path,q.segment);q.isPartEnd=!0;1===g?(q.abscissa=q.segmentLength,q.isPathEnd=!0):q.abscissa=q.segmentLength+e;return!0}this._currentPosition.copyTo(q)}q.abscissa+=e*this._partLengthRatio;
d&&(0===d.length&&(0===b?(e=this._path[q.segment],d.push([e[0],e[1]])):d.push(this.getSegCoord2D(this._path,q.segment,b))),e=q.abscissa/q.segmentLength,1===e?(e=this._path[q.segment+1],d.push([e[0],e[1]])):d.push(this.getSegCoord2D(this._path,q.segment,e)));!this._partSegCount&&Math.abs(q.abscissa-q.segmentLength)<this._tolerance&&(q.isPathEnd=this._partIsLast,q.isPartEnd=!0);return!0};c._getPoint=function(e){if(-1===e.segment)throw Error("missing segment");return this.getSegCoord2D(this._path,e.segment,
0>=e.segmentLength?0:e.abscissa/e.segmentLength)};c._getAngle=function(e){if(-1===e.segment)throw Error("missing segment");return this.getSegAngleCS(this._path,e.segment,0>=e.segmentLength?0:e.abscissa/e.segmentLength)};c.setPosAtNextPart=function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;this._partLength=0;this._partIsLast=!0;for(this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,
this.nextSegment()),this._partSegCount++,1===p.getId(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var e=this._partSegCount;e;)this.previousSegment(),--e;this._currentPosition.segment=this.nextSegment();this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1;--this._partSegCount;e=this.getStartPointIndex();this._ctrlPtBegin=
1===p.getId(this._path[e]);e=e+this._partSegCount+1;e>=this._path.length&&(e=0);this._ctrlPtEnd=1===p.getId(this._path[e]);if(0<this._patternLength){e=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap;const q=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let d=Math.round((this._partLength-(e+q))/this._patternLength);0>=d&&(d=0<e+q?0:1);this._partLengthRatio=this._partLength/(e+q+d*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=
1;return!0};c.hasNextSegment=function(){return this._seg<this._path.length-2};c.previousSegment=function(){return--this._seg};c.nextSegment=function(){return++this._seg};c.getStartPointIndex=function(){return this._seg};c.getEndPointIndex=function(){return this._seg+1};return m}(z.CurveHelper);n.DashPattern=y;n.GeometryWalker=f;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDonut":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],
function(n,l,p){let z=function(){function w(){}w.local=function(){null===w.instance&&(w.instance=new w);return w.instance};w.prototype.execute=function(f,k,m){return new y(f,k,m)};return w}();z.instance=null;let y=function(){function w(f,k,m){this._inputGeometries=f;this._curveHelper=new p.CurveHelper;this._width=(void 0!==k.width?k.width:2)*m;switch(k.method){default:this._method="Mitered";break;case "Bevelled":this._method="Bevelled";break;case "Rounded":case "TrueBuffer":this._method="Rounded";
break;case "Square":this._method="Square"}this._option=k.option;this._offsetFlattenError=p.PIXEL_TOLERANCE*m;this._option}w.prototype.next=function(){for(var f=this._inputGeometries.next();f;){if(l.isExtent(f)&&0<this._width){if(0>Math.min(f.xmax-f.xmin,f.ymax-f.ymin)-2*this._width)return f;var k=[];k.push([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]);k.push([[f.xmin+this._width,f.ymin+this._width],[f.xmax-this._width,f.ymin+this._width],[f.xmax-this._width,f.ymax-
this._width],[f.xmin+this._width,f.ymax-this._width],[f.xmin+this._width,f.ymin+this._width]]);return{rings:k}}if(l.isPolygon(f)&&0<this._width){k=[];for(const m of f.rings){f=this._curveHelper.calculatePathLength(m);const c=this._curveHelper.offset(m,this._width,this._method,4,this._offsetFlattenError);c&&(0>f&&c.reverse(),k.push(c))}if(k.length)return{rings:k}}f=this._inputGeometries.next()}return null};return w}();n.EffectDonut=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(f){function k(m,c,e){m=f.call(this,m,!1,!0)||this;m._curveHelper=new z.CurveHelper;m._length=(void 0!==c.length?c.length:20)*e;m._angle=void 0!==c.angle?c.angle:225;m._position=void 0!==c.position?c.position:
50;0>m._length&&(m._length=-m._length);20>m._position&&(m._position=20);80<m._position&&(m._position=80);m._mirror=!1;return m}l._inheritsLoose(k,f);k.prototype.processPath=function(m){if(this._curveHelper.isEmpty(m,!1))return null;const c=m[0];m=m[m.length-1];this._curveHelper.normalize([m[0]-c[0],m[1]-c[1]]);const e=[c[0]+(m[0]-c[0])*this._position/100,c[1]+(m[1]-c[1])*this._position/100],q=Math.cos((90-this._angle)/180*Math.PI);let d=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(d=-d);
this._mirror=!this._mirror;return{paths:[[c,[e[0]-this._length/2*q,e[1]-this._length/2*d],[e[0]+this._length/2*q,e[1]+this._length/2*d],m]]}};return k}(p.PathGeometryCursor);n.EffectJog=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils"],function(n,l,p){let z=function(){function w(){}w.local=function(){null===w.instance&&(w.instance=new w);return w.instance};w.prototype.execute=
function(f,k,m){return new y(f,k,m)};return w}();z.instance=null;let y=function(){function w(k,m,c){this._inputGeometries=k;this._offsetX=void 0!==m.offsetX?m.offsetX*c:0;this._offsetY=void 0!==m.offsetY?-m.offsetY*c:0}var f=w.prototype;f.next=function(){for(var k=this._inputGeometries.next();k;){if(p.isExtent(k))return{xmin:k.xmin+this._offsetX,xmax:k.xmax+this._offsetX,ymin:k.ymin+this._offsetY,ymax:k.ymax+this._offsetY};if(p.isPolygon(k))return k=l.clone(k),this._moveMultipath(k.rings,this._offsetX,
this._offsetY),k;if(p.isPolyline(k))return k=l.clone(k),this._moveMultipath(k.paths,this._offsetX,this._offsetY),k;if(p.isMultipoint(k))return k=l.clone(k),this._movePath(k.points,this._offsetX,this._offsetY),k;if(p.isPoint(k))return{x:k.x+this._offsetX,y:k.y+this._offsetY};k=this._inputGeometries.next()}return null};f._moveMultipath=function(k,m,c){if(k)for(const e of k)this._movePath(e,m,c)};f._movePath=function(k,m,c){if(k)for(const e of k)e[0]+=m,e[1]+=c};return w}();n.EffectMove=z;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectOffset":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(n,l,p){let z=function(){function w(){}w.local=function(){null===w.instance&&(w.instance=new w);return w.instance};w.prototype.execute=function(f,k,m){return new y(f,k,m)};return w}();z.instance=null;let y=function(){function w(f,k,m){this._inputGeometries=f;this._curveHelper=new p.CurveHelper;this._offset=(void 0!==k.offset?k.offset:1)*m;
this._method=k.method;this._option=k.option;this._offsetFlattenError=p.PIXEL_TOLERANCE*m;this._option}w.prototype.next=function(){for(var f=this._inputGeometries.next();f;){if(0===this._offset)return f;if(l.isExtent(f)){if("Rounded"===this._method&&0<this._offset){var k=this._curveHelper.offset([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]],this._offset,this._method,4,this._offsetFlattenError);return k?{rings:[k]}:null}if(0<Math.min(f.xmax-f.xmin,f.ymax-f.ymin)+
2*this._offset)return{xmin:f.xmin-this._offset,xmax:f.xmax+this._offset,ymin:f.ymin-this._offset,ymax:f.ymax+this._offset}}if(l.isPolygon(f)){var m=[];for(k of f.rings){const c=this._curveHelper.offset(k,this._offset,this._method,4,this._offsetFlattenError);c&&m.push(c)}if(m.length)return{rings:m}}if(l.isPolyline(f)){m=[];for(const c of f.paths)(f=this._curveHelper.offset(c,this._offset,this._method,4,this._offsetFlattenError))&&m.push(f);if(m.length)return{paths:m}}f=this._inputGeometries.next()}return null};
return w}();n.EffectOffset=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(){function f(k,m,c){this._inputGeometries=k;this._reverse=
void 0!==m.reverse?m.reverse:!0}f.prototype.next=function(){for(var k=this._inputGeometries.next();k;){if(!this._reverse)return k;if(p.isPolyline(k))return k=l.clone(k),z.reverseMultipath(k.paths),k;k=this._inputGeometries.next()}return null};return f}();n.EffectReverse=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports","../../../core/lang","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils","../../../geometry/support/aaBoundingRect"],
function(n,l,p,z,y){let w=function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(m,c,e){return new f(m,c,e)};return k}();w.instance=null;let f=function(){function k(c,e,q){this._inputGeometries=c;this._rotateAngle=void 0!==e.angle?-e.angle*Math.PI/180:0}var m=k.prototype;m.next=function(){for(var c=this._inputGeometries.next();c;){if(0===this._rotateAngle)return c;var e=y.create();p.getBoundsXY(e,c);const q=(e[2]+e[0])/2;e=
(e[3]+e[1])/2;if(z.isExtent(c))return c={rings:[[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]]},this._rotateMultipath(c.rings,q,e),c;if(z.isPolygon(c))return c=l.clone(c),this._rotateMultipath(c.rings,q,e),c;if(z.isPolyline(c))return c=l.clone(c),this._rotateMultipath(c.paths,q,e),c;if(z.isMultipoint(c))return c=l.clone(c),this._rotatePath(c.points,q,e),c;if(z.isPoint(c))return c;c=this._inputGeometries.next()}return null};m._rotateMultipath=function(c,e,q){if(c)for(const d of c)this._rotatePath(d,
e,q)};m._rotatePath=function(c,e,q){if(c){const d=Math.cos(this._rotateAngle),g=Math.sin(this._rotateAngle);for(const b of c){c=b[0]-e;const a=b[1]-q;b[0]=e+c*d-a*g;b[1]=q+c*g+a*d}}};return k}();n.EffectRotate=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../core/lang","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils","../../../geometry/support/aaBoundingRect"],function(n,l,p,z,y){let w=
function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(m,c,e){return new f(m,c,e)};return k}();w.instance=null;let f=function(){function k(c,e,q){this._inputGeometries=c;this._xFactor=void 0!==e.xScaleFactor?e.xScaleFactor:1.15;this._yFactor=void 0!==e.yScaleFactor?e.yScaleFactor:1.15}var m=k.prototype;m.next=function(){for(var c=this._inputGeometries.next();c;){if(1===this._xFactor&&1===this._yFactor)return c;var e=y.create();
p.getBoundsXY(e,c);const q=(e[2]+e[0])/2;e=(e[3]+e[1])/2;if(z.isExtent(c))return c={rings:[[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]]},this._scaleMultipath(c.rings,q,e),c;if(z.isPolygon(c))return c=l.clone(c),this._scaleMultipath(c.rings,q,e),c;if(z.isPolyline(c))return c=l.clone(c),this._scaleMultipath(c.paths,q,e),c;if(z.isMultipoint(c))return c=l.clone(c),this._scalePath(c.points,q,e),c;if(z.isPoint(c))return c;c=this._inputGeometries.next()}return null};
m._scaleMultipath=function(c,e,q){if(c)for(const d of c)this._scalePath(d,e,q)};m._scalePath=function(c,e,q){if(c)for(const d of c)c=(d[1]-q)*this._yFactor,d[0]=e+(d[0]-e)*this._xFactor,d[1]=q+c};return k}();n.EffectScale=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../GeometryWalker"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&
(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(){function f(m,c,e){this._inputGeometries=m;this._height=(void 0!==c.amplitude?c.amplitude:2)*e;this._period=(void 0!==c.period?c.period:3)*e;this._style=c.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=Math.abs(this._period));this._pattern=new z.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);
this._walker=new z.GeometryWalker;this._walker.updateTolerance(e)}var k=f.prototype;k.next=function(){for(var m=this._inputGeometries.next();m;){if(0===this._height||0===this._period)return m;if(l.isPolyline(m)){const c=this._processGeom(m.paths);if(c.length)return{paths:c}}if(l.isPolygon(m)&&(m=this._processGeom(m.rings),m.length))return{rings:m};m=this._inputGeometries.next()}return null};k._processGeom=function(m){const c=[];for(const e of m)if(this._walker.init(e,this._pattern))switch(this._style){default:c.push(this._constructCurve(e,
!1));break;case "Square":c.push(this._constructSquare(e));break;case "Triangle":c.push(this._constructTriangle(e));break;case "Random":c.push(this._constructCurve(e,!0))}else c.push(e);return c};k._constructCurve=function(m,c){const e=new p.PathHelper;var q=this._walker.calculatePathLength(m),d=Math.round(q/this._period);0===d&&(d=1);const g=this._period/16,b=1/(16*d+1);q=2*Math.PI*q/(q/d);d=2*Math.PI*Math.random();const a=2*Math.PI*Math.random(),h=2*Math.PI*Math.random(),r=.75-Math.random()/2,t=
.75-Math.random()/2,v={};this._walker.curPointAndAngle(v);e.startPath(v.pt);let x=0;for(;;)if(this._walker.nextPointAndAngle(g,v)){const u=x;x+=b;let D;if(c){const B=this._height/2*(1+.3*Math.sin(r*q*u+d));D=B*Math.sin(q*u+a);D+=B*Math.sin(t*q*u+h);D/=2}else D=.5*this._height*Math.sin(.5*q*u);e.lineTo([v.pt[0]-D*v.sa,v.pt[1]+D*v.ca])}else{e.lineTo(m[m.length-1]);break}return e.path()};k._constructSquare=function(m){const c=new p.PathHelper;m=this._walker.calculatePathLength(m);m=Math.round(m/this._period);
0===m&&(m=1);for(m=!0;;){let e=!1;if(this._walker.curPositionIsValid()){const q={};this._walker.curPointAndAngle(q);const d={};if(this._walker.nextPointAndAngle(this._period,d)){const g={};this._walker.nextPointAndAngle(this._period,g)&&(m?(c.startPath(q.pt),m=!1):c.lineTo(q.pt),c.lineTo([q.pt[0]-this._height/2*q.sa,q.pt[1]+this._height/2*q.ca]),c.lineTo([d.pt[0]-this._height/2*d.sa,d.pt[1]+this._height/2*d.ca]),c.lineTo([d.pt[0]+this._height/2*d.sa,d.pt[1]-this._height/2*d.ca]),c.lineTo([g.pt[0]+
this._height/2*g.sa,g.pt[1]-this._height/2*g.ca]),e=!0)}}if(!e){c.lineTo(this._walker.getPathEnd());break}}return c.path()};k._constructTriangle=function(m){const c=new p.PathHelper;m=this._walker.calculatePathLength(m);m=Math.round(m/this._period);0===m&&(m=1);for(m=!0;;){let e=!1;if(this._walker.curPositionIsValid()){const q={};this._walker.curPointAndAngle(q);const d={};if(this._walker.nextPointAndAngle(this._period/2,d)){const g={};this._walker.nextPointAndAngle(this._period,g)&&(this._walker.nextPosition(this._period/
2)&&(m?(c.startPath(q.pt),m=!1):c.lineTo(q.pt),c.lineTo([d.pt[0]-this._height/2*d.sa,d.pt[1]+this._height/2*d.ca]),c.lineTo([g.pt[0]+this._height/2*g.sa,g.pt[1]-this._height/2*g.ca])),e=!0)}}if(!e){c.lineTo(this._walker.getPathEnd());break}}return c.path()};return f}();n.EffectWave=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker",
"../enums"],function(n,l,p,z,y){let w=function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(m,c,e){return new f(m,c,e)};return k}();w.instance=null;let f=function(k){function m(e,q,d){e=k.call(this,e,!0,!0)||this;e._grometryWalker=new z.GeometryWalker;e._grometryWalker.updateTolerance(d);e._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;e._offset=void 0!==q.offset?q.offset*d:0;e._originalEndings=q.endings;e._offsetAtEnd=
void 0!==q.customEndingOffset?q.customEndingOffset*d:0;e._position=void 0!==q.offsetAlongLine?q.offsetAlongLine*d:0;e._pattern=new z.DashPattern;e._pattern.init(q.placementTemplate,!1);e._pattern.scale(d);e._endings=e._originalEndings;return e}l._inheritsLoose(m,k);var c=m.prototype;c.processPath=function(e){if(this._pattern.isEmpty())return null;if(this.iteratePath)var q=this._pattern.nextValue();else{this._endings=this._originalEndings===y.PlacementEndings.WithFullGap&&this.isClosed?y.PlacementEndings.WithMarkers:
this._originalEndings;this._pattern.extPtGap=0;let d=!0;switch(this._endings){case y.PlacementEndings.NoConstraint:q=-this._position;q=this._adjustPosition(q);d=!1;break;default:q=-this._pattern.lastValue()/2;break;case y.PlacementEndings.WithFullGap:q=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case y.PlacementEndings.WithMarkers:q=0;break;case y.PlacementEndings.Custom:q=-this._position,q=this._adjustPosition(q),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(e,
this._pattern,d))return null;this._pattern.reset();for(e=0;q>e;)q-=e,e=this._pattern.nextValue();q=e-=q;this.iteratePath=!0}e={};if(!this._grometryWalker.nextPointAndAngle(q,e)||this._endings===y.PlacementEndings.WithFullGap&&this._grometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===y.PlacementEndings.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;this.internalPlacement.setTranslate(e.pt[0]+this._offset*e.sa,e.pt[1]-this._offset*
e.ca);this._angleToLine&&this.internalPlacement.setRotateCS(e.ca,e.sa);return this.internalPlacement};c._adjustPosition=function(e){e/=this._pattern.length();e-=Math.floor(e);return e*this._pattern.length()};return m}(p.PathTransformationCursor);n.PlacementAlongLineSameSize=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/enums":function(){define(["exports"],function(n){var l=n.PlacementEndings||(n.PlacementEndings={});l.NoConstraint="NoConstraint";l.WithMarkers="WithMarkers";
l.WithFullGap="WithFullGap";l.WithHalfGap="WithHalfGap";l.Custom="Custom";Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=
function(f){function k(c,e,q){c=f.call(this,c,!1,!0)||this;c._curveHelper=new z.CurveHelper;c._angleToLine=void 0!==e.angleToLine?e.angleToLine:!0;c._offset=void 0!==e.offset?e.offset*q:0;c._type=e.extremityPlacement;c._position=void 0!==e.offsetAlongLine?e.offsetAlongLine*q:0;c._beginProcessed=!1;return c}l._inheritsLoose(k,f);var m=k.prototype;m.processPath=function(c){let e;switch(this._type){default:this._beginProcessed?(e=this._atExtremities(c,this._position,!1),this.iteratePath=this._beginProcessed=
!1):(e=this._atExtremities(c,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case "JustBegin":e=this._atExtremities(c,this._position,!0);break;case "JustEnd":e=this._atExtremities(c,this._position,!1);case "None":}return e};m._atExtremities=function(c,e,q){var d=c.length;if(2>d)return null;var g=q?1:d-2;const b=q?d:-1,a=q?1:-1;let h=0;q=q?c[0]:c[d-1];for(d=g;d!==b;d+=a){g=q;q=c[d];const r=this._curveHelper.calculateLength(g,q);if(h+r>e){c=(e-h)/r;const [t,v]=this._curveHelper.getAngleCS(g,
q,c);c=p.getCoord2D(g,q,c);this.internalPlacement.setTranslate(c[0]-this._offset*v,c[1]+this._offset*t);this._angleToLine&&this.internalPlacement.setRotateCS(-t,-v);return this.internalPlacement}h+=r}return null};return k}(p.PathTransformationCursor);n.PlacementAtExtremities=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker"],function(n,
l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(f){function k(m,c,e){m=f.call(this,m,!0,!0)||this;m._walker=new z.GeometryWalker;m._walker.updateTolerance(e);m._angleToLine=void 0!==c.angleToLine?c.angleToLine:!0;m._offset=void 0!==c.offset?c.offset*e:0;m._beginGap=void 0!==c.beginPosition?c.beginPosition*e:0;m._endGap=void 0!==c.endPosition?
c.endPosition*e:0;m._flipFirst=void 0!==c.flipFirst?c.flipFirst:!0;m._pattern=new z.DashPattern;m._pattern.init(c.positionArray,!1,!1);m._subPathLen=0;m._posCount=m._pattern.size();m._isFirst=!0;m._prevPos=0;return m}l._inheritsLoose(k,f);k.prototype.processPath=function(m){if(this._pattern.isEmpty())return null;if(this.iteratePath){m=this._pattern.nextValue()*this._subPathLen;var c=this._beginGap+m;m=c-this._prevPos;this._prevPos=c}else{this._posCount=this._pattern.size();this._isFirst=!0;this._prevPos=
0;this._subPathLen=this._walker.calculatePathLength(m)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(m,this._pattern,!1))return null;this._pattern.reset();m=this._pattern.nextValue()*this._subPathLen;c=this._beginGap+m;m=c-this._prevPos;this._prevPos=c;this.iteratePath=!0}c={};if(!this._walker.nextPointAndAngle(m,c,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(c.pt[0]+this._offset*c.sa,c.pt[1]-this._offset*c.ca);m=
this._isFirst&&this._flipFirst;let e;this._angleToLine?(e=c.ca,c=c.sa):(e=1,c=0);m&&(e=-e,c=-c);this.internalPlacement.setRotateCS(e,c);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return k}(p.PathTransformationCursor);n.PlacementAtRatioPositions=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../CIMPlacements"],function(n,l){let p=function(){function y(){}
y.local=function(){null===y.instance&&(y.instance=new y);return y.instance};y.prototype.execute=function(w,f,k){return new z(w,f,k)};return y}();p.instance=null;let z=function(){function y(f,k,m){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=(void 0!==k.stepX?Math.abs(k.stepX):16)*m;this._stepY=(void 0!==k.stepY?Math.abs(k.stepY):16)*m;if(0!==this._stepX&&0!==this._stepY&&f&&void 0!==f.rings&&f.rings){this._gridType=void 0!==k.gridType?k.gridType:"Fixed";
if("Random"===this._gridType)this._randomness=void 0!==k.randomness?k.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0;else{this._randomness=0;this._gridAngle=void 0!==k.gridAngle?k.gridAngle:0;this._shiftOddRows=void 0!==k.shiftOddRows?k.shiftOddRows:!1;this._offsetX=void 0!==k.offsetX?k.offsetX*m:0;this._offsetY=void 0!==k.offsetY?k.offsetY*m:0;this._cosAngle=Math.cos(this._gridAngle/180*Math.PI);this._sinAngle=-Math.sin(this._gridAngle/
180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new l.Placement;this._calculateMinMax(f);this._geometry=f}}var w=y.prototype;w.next=function(){return this._geometry?
this._nextInside():null};w._calculateMinMax=function(f){this._yMax=this._yMin=this._xMax=this._xMin=0;let k,m,c,e,q;m=c=Number.MAX_VALUE;e=q=-Number.MAX_VALUE;for(const g of f.rings){const b=g?g.length:0;for(let a=0;a<b;++a){var d=g[a][0]-this._graphicOriginX-this._offsetX;k=g[a][1]-this._graphicOriginY-this._offsetY;f=this._cosAngle*d-this._sinAngle*k;d=this._sinAngle*d+this._cosAngle*k;m=Math.min(m,f);e=Math.max(e,f);c=Math.min(c,d);q=Math.max(q,d)}}m+=this._graphicOriginX;e+=this._graphicOriginX;
c+=this._graphicOriginY;q+=this._graphicOriginY;this._xMin=Math.round(m/this._stepX);this._xMax=Math.round(e/this._stepX);this._yMin=Math.round(c/this._stepY);this._yMax=Math.round(q/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};w._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%2&&this._currentX--}var f=this._currentX*this._stepX+this._offsetX;
this._shiftOddRows&&this._currentY%2&&(f+=.5*this._stepX);const k=this._currentY*this._stepY+this._offsetY;this._currentX++;let m;"Random"===this._gridType?(m=this._graphicOriginX+f+this._stepX*this._randomness*(.5-Math.random())*2/3,f=this._graphicOriginY+k+this._stepY*this._randomness*(.5-Math.random())*2/3):(m=this._graphicOriginX+this._cosAngle*f+this._sinAngle*k,f=this._graphicOriginY-this._sinAngle*f+this._cosAngle*k);this._internalPlacement.setTranslate(m,f);return this._internalPlacement}};
return y}();n.PlacementInsidePolygon=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(f){function k(c,e,q){c=f.call(this,
c,!0,!0)||this;c._curveHelper=new z.CurveHelper;c._angleToLine=void 0!==e.angleToLine?e.angleToLine:!0;c._offset=void 0!==e.offset?e.offset*q:0;c._relativeTo=e.relativeTo;c._position=void 0!==e.startPointOffset?e.startPointOffset*q:0;c._epsilon=.001*q;return c}l._inheritsLoose(k,f);var m=k.prototype;m.processPath=function(c){var e=this._position;if("SegmentMidpoint"===this._relativeTo){this.iteratePath||(this._segmentCount=c.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<this._segmentCount;){var q=
this._curSegment;this._curSegment++;e=c[q-1];q=c[q];const d=this._curveHelper.calculateLength(e,q);if(d<this._epsilon)continue;c=.5+this._position/d;const [g,b]=this._curveHelper.getAngleCS(e,q,c);c=p.getCoord2D(e,q,c);this.internalPlacement.setTranslate(c[0]-this._offset*b,c[1]+this._offset*g);this._angleToLine&&this.internalPlacement.setRotateCS(g,b);return this.internalPlacement}this.iteratePath=!1;return null}"LineEnd"===this._relativeTo&&p.reversePath(c);e=this.onLine(c,e);"LineEnd"===this._relativeTo&&
p.reversePath(c);return e};m.onLine=function(c,e){let q,d=!1;switch(this._relativeTo){default:q=this._curveHelper.calculatePathLength(c)/2+e;break;case "LineBeginning":q=e;break;case "LineEnd":q=e,d=!0}const g=c.length;let b=0,a=c[0];for(let h=1;h<g;++h){e=a;a=c[h];const r=this._curveHelper.calculateLength(e,a);if(b+r>q){c=(q-b)/r;const [t,v]=this._curveHelper.getAngleCS(e,a,c);c=p.getCoord2D(e,a,c);e=d?this._offset:-this._offset;this.internalPlacement.setTranslate(c[0]-e*v,c[1]+e*t);this._angleToLine&&
(d?this.internalPlacement.setRotateCS(-t,-v):this.internalPlacement.setRotateCS(t,v));return this.internalPlacement}b+=r}return null};return k}(p.PathTransformationCursor);n.PlacementOnLine=y;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(n,l,p,z){function y(k,m){const c=Math.PI;for(;Math.abs(m-k)>c+2E-15;)m=m-k>c?m-2*c:m+2*c;return(k+
m)/2}let w=function(){function k(){}k.local=function(){null===k.instance&&(k.instance=new k);return k.instance};k.prototype.execute=function(m,c,e){return new f(m,c,e)};return k}();w.instance=null;let f=function(k){function m(e,q,d){e=k.call(this,e,!0,!0)||this;e._curveHelper=new z.CurveHelper;e._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;e._offset=void 0!==q.offset?q.offset*d:0;e._endPoints=void 0!==q.placeOnEndPoints?q.placeOnEndPoints:!0;e._controlPoints=void 0!==q.placeOnControlPoints?
q.placeOnControlPoints:!0;e._regularVertices=void 0!==q.placeOnRegularVertices?q.placeOnRegularVertices:!0;e._tags=[];e._tagIterator=0;return e}l._inheritsLoose(m,k);var c=m.prototype;c.processPath=function(e){this.iteratePath||(this._preparePath(e),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);let q=e[0],d=e[1];if(0!==this._offset){const g=
Math.cos(e[2]);q-=this._offset*Math.sin(e[2]);d+=this._offset*g}this.internalPlacement.setTranslate(q,d);this._tagIterator++;return this.internalPlacement};c._preparePath=function(e){this._tagIterator=this._tags.length=0;const q=p.isClosedPath(e),d=e.length-1;let g=0,b=0,a=0,h=0,r=0,t,v;for(;g<d;){g++;t=e[g-1];v=e[g];const x=p.getId(t),u=p.getId(v);if(this._angleToLine||0!==this._offset)h=this._curveHelper.getAngle(t,v,0);1===g?q?(b=h,a=x):this._endPoints&&this._tags.push([t[0],t[1],h]):1===x?this._controlPoints&&
this._tags.push([t[0],t[1],y(r,h)]):this._regularVertices&&this._tags.push([t[0],t[1],y(r,h)]);if(this._angleToLine||0!==this._offset)r=this._curveHelper.getAngle(t,v,1);g===d&&(q?1===u||1===a?this._controlPoints&&this._tags.push([v[0],v[1],y(r,b)]):this._regularVertices&&this._tags.push([v[0],v[1],y(r,b)]):this._endPoints&&this._tags.push([v[0],v[1],r]))}this._tagIterator=0};return m}(p.PathTransformationCursor);n.PlacementOnVertices=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define(["exports",
"../../../geometry/support/boundsUtils","../../../geometry/support/aaBoundingRect","../CIMPlacements"],function(n,l,p,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(k,m,c){return new w(k,m,c)};return f}();y.instance=null;let w=function(){function f(m,c,e){this._geometry=m;this._offsetX=void 0!==c.offsetX?c.offsetX*e:0;this._offsetY=void 0!==c.offsetY?c.offsetY*e:0;this._method=void 0!==c.method?c.method:"OnPolygon";
this._internalPlacement=new z.Placement}var k=f.prototype;k.next=function(){const m=this._geometry;this._geometry=null;return m&&void 0!==m.rings?this._polygonCenter(m):null};k._polygonCenter=function(m){switch(this._method){default:case "CenterOfMass":case "BoundingBoxCenter":{const c=p.create();l.getBoundsXY(c,m);this._internalPlacement.setTranslate((c[2]+c[0])/2+this._offsetX,(c[3]+c[1])/2-this._offsetY)}}return this._internalPlacement};return f}();n.PlacementPolygonCenter=y;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function l(p=0,z=0,y=0,w=0){this.x=p;this.y=z;this.width=y;this.height=w}l.prototype.union=function(p){this.x=Math.min(this.x,p.x);this.y=Math.min(this.y,p.y);this.width=Math.max(this.width,p.width);this.height=Math.max(this.height,p.height)};n._createClass(l,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return l}()})},"esri/symbols/cim/packingUtils":function(){define(["exports"],
function(n){function l(f,k=0){let m=0;for(let c=0;4>c;c++)m+=f[k+c]*y[c];return m}function p(f){return f-Math.floor(f)}const z=[1,256,65536,16777216],y=[1/256,1/65536,1/16777216,1/4294967296],w=l(new Uint8ClampedArray([255,255,255,255]));n.packFloatRGBA=function(f,k,m=0){f=0>f?0:f>w?w:f;for(let c=0;4>c;c++)k[m+c]=Math.floor(256*p(f*z[c]))};n.unpackFloatRGBA=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../geometry/support/jsonUtils",
"./Rect","./packingUtils"],function(n,l,p,z){function y(f){if(!f)return null;switch(f.type){case "CIMPointSymbol":f=f.symbolLayers;if(!f||1!==f.length)break;return y(f[0]);case "CIMVectorMarker":f=f.markerGraphics;if(!f||1!==f.length)break;var k=f[0];if(!k)break;f=k.geometry;if(!f)break;k=k.symbol;if(!k||"CIMPolygonSymbol"!==k.type&&"CIMLineSymbol"!==k.type)break;return{geom:f,asFill:"CIMPolygonSymbol"===k.type};case "sdf":return{geom:f.geom,asFill:f.asFill}}return null}function w(f){let k=Infinity,
m=-Infinity,c=Infinity,e=-Infinity;for(const q of f)for(const d of q)d[0]<k&&(k=d[0]),d[0]>m&&(m=d[0]),d[1]<c&&(c=d[1]),d[1]>e&&(e=d[1]);return[k,c,m,e]}n.buildSDF=function(f){var k=f.geom;var m=k?k.rings?k.rings:k.paths?k.paths:void 0!==k.xmin&&void 0!==k.ymin&&void 0!==k.xmax&&void 0!==k.ymax?[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]]:null:null;k=Infinity;var c=-Infinity;var e=Infinity,q=-Infinity;for(var d of m)for(var g of d)g[0]<k&&(k=g[0]),g[0]>c&&(c=
g[0]),g[1]<e&&(e=g[1]),g[1]>q&&(q=g[1]);c=new p(k,e,c-k,q-e);e=64/Math.max(c.width,c.height);d=Math.round(c.width*e)+62;g=Math.round(c.height*e)+62;k=[];for(var b of m)if(b&&1<b.length){m=[];for(var a of b){let [C,E]=a;C-=c.x;E-=c.y;C*=e;E*=e;C+=30.5;E+=30.5;m.push([C,E])}f.asFill&&(q=m.length-1,m[0][0]===m[q][0]&&m[0][1]===m[q][1]||m.push(m[0]));k.push(m)}var h;b=d*g;a=Array(b);for(m=0;m<b;++m)a[m]=962;for(h of k)for(m=h.length,c=1;c<m;++c){e=h[c-1];q=h[c];var r=void 0,t=void 0;e[0]<q[0]?(r=e[0],
t=q[0]):(r=q[0],t=e[0]);var v=void 0,x=void 0;e[1]<q[1]?(v=e[1],x=q[1]):(v=q[1],x=e[1]);var u=Math.floor(r)-31;t=Math.floor(t)+31;v=Math.floor(v)-31;x=Math.floor(x)+31;0>u&&(u=0);t>d&&(t=d);0>v&&(v=0);x>g&&(x=g);r=q[0]-e[0];const C=q[1]-e[1],E=r*r+C*C;for(;u<t;u++)for(let F=v;F<x;F++){var D=(u-e[0])*r+(F-e[1])*C,B=void 0;0>D?(B=e[0],D=e[1]):D>E?(B=q[0],D=q[1]):(D/=E,B=e[0]+D*r,D=e[1]+D*C);B=(u-B)*(u-B)+(F-D)*(F-D);D=(g-F-1)*d+u;B<a[D]&&(a[D]=B)}}for(h=0;h<b;++h)a[h]=Math.sqrt(a[h]);h=a;if(f.asFill)for(var A of k)for(f=
A.length,k=1;k<f;++k)for(b=A[k-1],a=A[k],b[0]<a[0]?(m=b[0],c=a[0]):(m=a[0],c=b[0]),b[1]<a[1]?(q=b[1],e=a[1]):(q=a[1],e=b[1]),m=Math.floor(m),c=Math.floor(c)+1,q=Math.floor(q),e=Math.floor(e)+1,31>m&&(m=31),c>d-31&&(c=d-31),31>q&&(q=31),e>g-31&&(e=g-31);q<e;++q)if(b[1]>q!==a[1]>q){t=(g-q-1)*d;for(v=m;v<c;++v)v<(a[0]-b[0])*(q-b[1])/(a[1]-b[1])+b[0]&&(h[t+v]=-h[t+v]);for(v=31;v<m;++v)h[t+v]=-h[t+v]}A=h.length;f=new Uint8Array(4*A);for(k=0;k<A;++k)z.packFloatRGBA(.5-h[k]/62,f,4*k);A=f;return[A,d,g]};
n.getExtent=function(f){return f?f.rings?w(f.rings):f.paths?w(f.paths):l.isExtent(f)?[f.xmin,f.ymin,f.xmax,f.ymax]:null:null};n.getSDFInfo=y;n.getSDFMetrics=function(f,k,m,c,e){const [q,d,g,b]=f;if(g<q||b<d)return[0,0,0];var a=g-q,h=b-d;f=64/Math.max(a,h);a=Math.round(a*f);h=Math.round(h*f)+62;let r=1;k&&(r=h/f/(k.ymax-k.ymin));let t=0,v=0;c&&(e?k&&m&&0<k.ymax-k.ymin&&(t=c.x/((k.xmax-k.xmin)/(k.ymax-k.ymin)*m),v=c.y/m):(t=c.x,v=c.y));t=.5*(k.xmax+k.xmin)+t*(k.xmax-k.xmin);v=.5*(k.ymax+k.ymin)+v*(k.ymax-
k.ymin);t=(t-q)*f+31;v=(v-d)*f+31;return[r,t/(a+62)-.5,-(v/h-.5)]};n.getSDFSymbol=function(f){f=f.markerGraphics;if(!f||1!==f.length)return null;f=f[0];if(!f)return null;f=f.symbol;return!f||"CIMPolygonSymbol"!==f.type&&"CIMLineSymbol"!==f.type?null:f};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(n,
l,p,z){const y={marker:p.WGLGeometryType.MARKER,fill:p.WGLGeometryType.FILL,line:p.WGLGeometryType.LINE,text:p.WGLGeometryType.TEXT};p=function(){function w(f,k,m){this.layers=f;this.data=k;this.hash=this._createHash();this.rendererKey=m;for(const c of f)c.materialKey=z.createMaterialKey(y[c.type],this.rendererKey,!1,!1)}w.prototype._createHash=function(){let f="";for(const k of this.layers)f+=k.templateHash;return f};l._createClass(w,[{key:"type",get:function(){return"expanded-cim"}}]);return w}();
n.ExpandedCIM=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../enums","../mesh/templates/meshUtils"],function(n,l,p,z,y){function w(r,t=!1){const v=z.WGLVVFlag.SIZE_FIELD_STOPS|z.WGLVVFlag.SIZE_MINMAX_VALUE|z.WGLVVFlag.SIZE_SCALE_STOPS|z.WGLVVFlag.SIZE_UNIT_VALUE;r=(r&(z.WGLVVTarget.FIELD_TARGETS_OUTLINE|z.WGLVVTarget.MINMAX_TARGETS_OUTLINE|
z.WGLVVTarget.SCALE_TARGETS_OUTLINE|z.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return t?v&r:v&~r}function f(r){const t=w(r,!1);return r&(z.WGLVVFlag.COLOR|z.WGLVVFlag.OPACITY|z.WGLVVFlag.ROTATION|t)}let k=function(){function r(v){this._data=0;this._data=v}r.load=function(v){const x=this.shared;x.data=v;return x};var t=r.prototype;t.setBit=function(v,x){v=1<<v;this._data=x?this._data|v:this._data&~v};t.bit=function(v){return(this._data&1<<v)>>v};t.setBits=function(v,x,u){for(let D=x,B=0;D<u;D++,B++)this.setBit(D,
0!==(v&1<<B))};t.bits=function(v,x){let u=0;for(let D=v,B=0;D<x;D++,B++)u|=this.bit(D)<<B;return u};t.hasVV=function(){return!1};t.setVV=function(v,x){};t.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}};t.getVariationHash=function(){return this._data&~(7&this.textureBinding)};l._createClass(r,[{key:"data",set:function(v){this._data=v},get:function(){return this._data}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(v){this.setBits(v,
8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(v){this.setBit(20,v)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(v){this.setBit(11,v)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(v){this.setBit(12,v)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(v){this.setBits(v,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case z.WGLGeometryType.FILL:return"fill";case z.WGLGeometryType.MARKER:return"marker";
case z.WGLGeometryType.LINE:return"line";case z.WGLGeometryType.TEXT:return"text";case z.WGLGeometryType.LABEL:return"label";default:throw new p(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return r}();k.shared=new k(0);const m=r=>function(t){function v(){return t.apply(this,arguments)||this}l._inheritsLoose(v,t);var x=v.prototype;x.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};
x.setVV=function(u,D){t.prototype.setVV.call(this,u,D);u&=w(u,D);this.vvSizeMinMaxValue=!!(u&z.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(u&z.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(u&z.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(u&z.WGLVVFlag.SIZE_SCALE_STOPS)};l._createClass(v,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(u){this.setBit(16,u)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(u){this.setBit(17,
u)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(u){this.setBit(18,u)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(u){this.setBit(19,u)}}]);return v}(r),c=r=>function(t){function v(){return t.apply(this,arguments)||this}l._inheritsLoose(v,t);var x=v.prototype;x.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvRotation};x.setVV=function(u,D){t.prototype.setVV.call(this,u,D);this.vvRotation=!D&&!!(u&z.WGLVVFlag.ROTATION)};
l._createClass(v,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(u){this.setBit(15,u)}}]);return v}(r),e=r=>function(t){function v(){return t.apply(this,arguments)||this}l._inheritsLoose(v,t);var x=v.prototype;x.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvColor};x.setVV=function(u,D){t.prototype.setVV.call(this,u,D);this.vvColor=!D&&!!(u&z.WGLVVFlag.COLOR)};l._createClass(v,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(u){this.setBit(13,
u)}}]);return v}(r),q=r=>function(t){function v(){return t.apply(this,arguments)||this}l._inheritsLoose(v,t);var x=v.prototype;x.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvOpacity};x.setVV=function(u,D){t.prototype.setVV.call(this,u,D);this.vvOpacity=!D&&!!(u&z.WGLVVFlag.OPACITY)};l._createClass(v,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(u){this.setBit(14,u)}}]);return v}(r);let d=function(r){function t(){return r.apply(this,arguments)||this}l._inheritsLoose(t,
r);t.load=function(v){const x=this.shared;x.data=v;return x};t.from=function(v,x){const u=this.load(0);u.geometryType=z.WGLGeometryType.FILL;x?u.dotDensity=!0:u.setVV(v,!1);return u.data};t.prototype.getVariation=function(){return{...r.prototype.getVariation.call(this),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}};l._createClass(t,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(v){this.setBit(15,v)}}]);return t}(e(q(k)));d.shared=new d(0);let g=function(r){function t(){return r.apply(this,
arguments)||this}l._inheritsLoose(t,r);t.load=function(v){const x=this.shared;x.data=v;return x};t.from=function(v){const x=this.load(0);x.geometryType=z.WGLGeometryType.MARKER;x.setVV(v,!1);return x.data};t.prototype.getVariation=function(){return{...r.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};
return t}(e(q(c(m(k)))));g.shared=new g(0);let b=function(r){function t(){return r.apply(this,arguments)||this}l._inheritsLoose(t,r);t.load=function(v){const x=this.shared;x.data=v;return x};t.from=function(v,x){const u=this.load(0);u.geometryType=z.WGLGeometryType.LINE;u.setVV(v,x);return u.data};t.prototype.getVariation=function(){return{...r.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,
vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return t}(e(q(m(k))));b.shared=new b(0);let a=function(r){function t(){return r.apply(this,arguments)||this}l._inheritsLoose(t,r);t.load=function(v){const x=this.shared;x.data=v;return x};t.from=function(v){const x=this.load(v);x.geometryType=z.WGLGeometryType.TEXT;x.setVV(v,!1);return x.data};t.prototype.getVariation=function(){return{...r.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,
vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return t}(e(q(c(m(k)))));a.shared=new a(0);let h=function(r){function t(){return r.apply(this,arguments)||this}l._inheritsLoose(t,r);t.load=function(v){const x=this.shared;x.data=v;return x};t.from=function(v,x){const u=this.load(0);u.geometryType=z.WGLGeometryType.LABEL;u.setVV(v,!1);u.mapAligned=!!y.isMapAligned(x);
return u.data};t.prototype.getVariation=function(){return{...r.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return t}(m(k));h.shared=new h(0);n.FillMaterialKey=d;n.LabelMaterialKey=h;n.LineMaterialKey=b;n.MarkerMaterialKey=g;n.MaterialKeyBase=k;n.TextMaterialKey=a;n.createMaterialKey=function(r,t,v,x,u){switch(r){case z.WGLGeometryType.FILL:return d.from(t,
x);case z.WGLGeometryType.LINE:return b.from(t,v);case z.WGLGeometryType.MARKER:return g.from(t);case z.WGLGeometryType.TEXT:return a.from(t);case z.WGLGeometryType.LABEL:return h.from(t,u);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${r}`);}};n.getFillVVFlags=function(r){return r&(z.WGLVVFlag.COLOR|z.WGLVVFlag.OPACITY)};n.getLabelVVFlags=function(r){const t=w(r,!1);return r&t};n.getLineVVFlags=function(r,t){if(t)return t=w(r,!0),r&t;t=w(r,!1);return r&(z.WGLVVFlag.COLOR|
z.WGLVVFlag.OPACITY|t)};n.getMarkerVVFlags=f;n.getSizeFlagsMask=w;n.getTextVVFlags=function(r){return f(r)};n.hydrateMaterialKey=function(r){switch(k.load(r).geometryType){case z.WGLGeometryType.MARKER:return new g(r);case z.WGLGeometryType.FILL:return new d(r);case z.WGLGeometryType.LINE:return new b(r);case z.WGLGeometryType.TEXT:return new a(r);case z.WGLGeometryType.LABEL:return new h(r)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/meshUtils":function(){define(["exports"],
function(n){n.isMapAligned=function(l){switch(l){case "above-along":case "below-along":case "center-along":return 1;default:return 0}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/schemaUtils":function(){define("exports ../../../../core/has ../../../../core/lang ../../../../core/maybe ../../../../core/Logger ../../../../core/Error ../../../../core/screenUtils ../../../../chunks/symbols ../support/clusterUtils ../../engine/webgl/enums ../../engine/webgl/materialKey/MaterialKey ../../engine/webgl/Utils ../../engine/webgl/util/vvFlagUtils ./support/rendererUtils ../support/util".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){function a(ea){switch(ea.type){case "line-marker":var O;return{type:"line-marker",color:null==(O=ea.color)?void 0:O.toJSON(),placement:ea.placement,style:ea.style};default:return k.fromJSON(ea.toJSON()).toJSON()}}function h(ea,O,U){if(!ea)return null;let ba=0,ka=!1;z.isSome(O)&&"visualVariables"in O&&(ba=d.getVVFlags(O.visualVariables||[]),ka="dot-density"===O.type);switch(ea.type){case "simple-fill":case "picture-fill":return r(ea,ba,ka,U);case "simple-marker":case "picture-marker":return O=
e.createMaterialKey(c.WGLGeometryType.MARKER,ba,!1,!1),U=U?e.hydrateMaterialKey(O):O,O=a(ea),ea={materialKey:U,hash:ea.hash(),...O,angle:ea.angle};case "simple-line":return t(ea,ba,U);case "text":return O=e.createMaterialKey(c.WGLGeometryType.TEXT,ba,!1,!1),U=U?e.hydrateMaterialKey(O):O,O=a(ea),ea={materialKey:U,hash:ea.hash(),...O,angle:ea.angle};case "label":return O=e.createMaterialKey(c.WGLGeometryType.LABEL,ba,!1,!1,ea.labelPlacement),ea={materialKey:U?e.hydrateMaterialKey(O):O,hash:ea.hash(),
...ea.toJSON(),labelPlacement:ea.labelPlacement};case "cim":return{type:"cim",rendererKey:ba,data:ea.data};case "web-style":return{...a(ea),type:"web-style",hash:ea.hash(),rendererKey:ba};default:throw Error(`symbol not supported ${ea.type}`);}}function r(ea,O,U,ba){U=e.createMaterialKey(c.WGLGeometryType.FILL,O,!1,U);var ka=ba?e.hydrateMaterialKey(U):U;const oa=ea.clone();U=oa.outline;oa.outline=null;ea=[];ka={materialKey:ka,hash:oa.hash(),...a(oa)};ea.push(ka);U&&(O=e.createMaterialKey(c.WGLGeometryType.LINE,
O,!0,!1),ba={materialKey:ba?e.hydrateMaterialKey(O):O,hash:U.hash(),...a(U)},ea.push(ba));return{type:"composite-symbol",layers:ea,hash:ea.reduce((M,V)=>V.hash+M,"")}}function t(ea,O,U){var ba=e.createMaterialKey(c.WGLGeometryType.LINE,O,!1,!1);const ka=U?e.hydrateMaterialKey(ba):ba;ea=ea.clone();ba=ea.marker;ea.marker=null;const oa=[];oa.push({materialKey:ka,hash:ea.hash(),...a(ea)});if(ba){var M;O=e.createMaterialKey(c.WGLGeometryType.MARKER,O,!1,!1);U=U?e.hydrateMaterialKey(O):O;ba.color=null!=
(M=ba.color)?M:ea.color;oa.push({materialKey:U,hash:ba.hash(),lineWidth:ea.width,...a(ba)})}return{type:"composite-symbol",layers:oa,hash:oa.reduce((V,ha)=>ha.hash+V,"")}}function v(ea,O){const U=ea.labelPlacement;var ba=la[O];if(!ea.symbol)return Z.warn("No LabelClass symbol specified."),!0;if(!ba)return Z.error(new w("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${O} is not supported`)),!0;ba.some(ka=>ka===U)||(ba=ba[0],U&&Z.warn(`Found invalid label placement type ${U} for ${O}. Defaulting to ${ba}`),
ea.labelPlacement=ba);return!1}function x(ea,O){ea=p.clone(ea);return ea.some(U=>v(U,O))?[]:ea}function u(ea,O=!1){try{var U,ba;const ka=F(ea,O),oa={};ka.map(M=>{a:{switch(M.target){case "feature":A(oa,B(ea),M);M=void 0;break a;case "aggregate":var V=ea.featureReduction;if("selection"===V.type)throw new w("ValidationError","Mapview does not support `selection` reduction type",V);A(oa,B(ea),M);oa.aggregate||(oa.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:f.pt2px(V.clusterRadius/
2),clusterPixelBuffer:64*Math.ceil(f.pt2px(V.clusterMaxSize)/64),fields:M.aggregateFields}});D(oa.aggregate,M.attributes.fields);M=void 0;break a}M=void 0}return M});return{source:{definitionExpression:ea.definitionExpression,fields:ea.fields.map(M=>M.toJSON()),gdbVersion:ea.gdbVersion,historicMoment:null==(U=ea.historicMoment)?void 0:U.getTime(),outFields:ea.availableFields,pixelBuffer:ea.pixelBuffer,spatialReference:ea.spatialReference.toJSON(),timeExtent:null==(ba=ea.timeExtent)?void 0:ba.toJSON()},
attributes:{fields:{},indexCount:0},processors:ka,targets:oa}}catch(ka){if("ValidationError"===ka.fieldName)return Z.error(ka),null;throw ka;}}function D(ea,O){for(const U in O){const ba=O[U];if(ba.target!==ea.name)continue;const ka=ea.attributes[U];ka?(ka.context.mesh=ka.context.mesh||ba.context.mesh,ka.context.storage=ka.context.storage||ba.context.storage):ea.attributes[U]=ba}return ea}function B(ea){var O,U,ba,ka,oa;return[null!=(O=null==(U=ea.filter)?void 0:U.toJSON())?O:null,null!=(ba=null==
(ka=ea.effect)?void 0:null==(oa=ka.filter)?void 0:oa.toJSON())?ba:null]}function A(ea,O,U){ea.feature||(ea.feature={name:"feature",input:"source",filters:O,attributes:{}});D(ea.feature,U.attributes.fields);return ea}function C(ea,O){return O.field?E(ea,{...O,type:"field",field:O.field}):O.valueExpression?E(ea,{...O,type:"expression",valueExpression:O.valueExpression}):{field:null,fieldIndex:null}}function E(ea,O){switch(O.type){case "expression":var U=O.valueExpression;if(!ea.fields[U]){var ba=ea.indexCount++;
ea.fields[U]={...O,name:U,fieldIndex:ba}}return{fieldIndex:ea.fields[U].fieldIndex};case "label-expression":return U=JSON.stringify(O.label),ea.fields[U]||(ba=ea.indexCount++,ea.fields[U]={...O,name:U,fieldIndex:ba}),{fieldIndex:ea.fields[U].fieldIndex};case "field":U=O.field;if("aggregate"===O.target&&ea.fields[U])return{field:U};ea.fields[U]={...O,name:U};return{field:U};case "statistic":return ea.fields[O.name]={...O},{field:O.name}}}function F(ea,O=!1){const U=[];let ba=0;U.push(J(ea,ba++,O));
return U}function G(ea,O,U,ba,ka,oa=!1){O=E(O,{type:"label-expression",target:ba,context:{mesh:!0},resultType:"string",label:{labelExpression:U.labelExpression,labelExpressionInfo:U.labelExpressionInfo?{expression:U.labelExpressionInfo.expression}:null,symbol:!!U.symbol,where:U.where}});({fieldIndex:O}=O);return{...h(U,ea,oa),fieldIndex:O,target:ba,index:ka}}function J(ea,O,U=!1){const ba={indexCount:0,fields:{}};var ka="featureReduction"in ea&&ea.featureReduction;O=ka?"aggregate":"feature";switch(ea.renderer.type){case "heatmap":{const {blurRadius:oa,
fieldOffset:M,field:V}=ea.renderer;return{type:"heatmap",aggregateFields:[],attributes:ba,target:O,storage:null,mesh:{blurRadius:oa,fieldOffset:M,field:C(ba,{target:O,field:V,resultType:"numeric"}).field}}}default:{const oa=[],M="aggregate"===O?m.createClusterRenderer(oa,ea.renderer,ka,null):ea.renderer;K(ba,oa);const V=P(ba,O,M,U),ha=L(ba,O,M),Q=b.toJSONGeometryType(ea.geometryType);ea=ea.labelsVisible&&ea.labelingInfo||[];let X=[];if(ka){if("selection"===ka.type)throw new w("ValidationError","Mapview does not support `selection` reduction type",
ka);X=ka&&ka.labelsVisible&&ka.labelingInfo||[]}ea=x(ea,Q);X=x(X,Q);let aa=0;ka=[...ea.map(ca=>G(M,ba,ca,"feature",aa++,U)),...X.map(ca=>G(M,ba,ca,"aggregate",aa++,U))];return{type:"symbol",target:O,attributes:ba,aggregateFields:oa,storage:ha,mesh:{matcher:V,labels:ka}}}}}function K(ea,O){const U={mesh:!0,storage:!0};for(const ba of O){const {name:ka,outStatistic:oa}=ba,{statisticType:M,onStatisticField:V}=oa;let ha=O=null,Q=null;"onStatisticValueExpression"in oa?ha=E(ea,{type:"expression",target:"feature",
valueExpression:oa.onStatisticValueExpression,resultType:"numeric"}).fieldIndex:"onStatisticNormalizationField"in oa?(O=E(ea,{type:"field",target:"feature",field:V,resultType:"numeric"}).field,Q=oa.onStatisticNormalizationField):O=E(ea,{type:"field",target:"feature",field:V,resultType:"numeric"}).field;E(ea,{type:"statistic",target:"aggregate",name:ka,context:U,inField:O,inNormalizationField:Q,inFieldIndex:ha,statisticType:M})}}function L(ea,O,U){switch(U.type){case "dot-density":return I(ea,O,U.attributes);
case "simple":case "class-breaks":case "unique-value":return N(ea,O,U.visualVariables);case "heatmap":case "dictionary":return null}}function I(ea,O,U){return U&&U.length?{type:"dot-density",mapping:U.map((ba,ka)=>{const {field:oa,fieldIndex:M}=C(ea,{valueExpression:ba.valueExpression,field:ba.field,resultType:"numeric",target:O});return{binding:ka,field:oa,fieldIndex:M}}),target:O}:{type:"dot-density",mapping:[],target:O}}function N(ea,O,U){if(!U||!U.length)return{type:"visual-variable",mapping:[],
target:O};const ba={storage:!0};return{type:"visual-variable",mapping:g.simplifyVisualVariables(U).map(ka=>{var oa;const M=q.getVVType(ka.type),{field:V,fieldIndex:ha}=C(ea,{target:O,valueExpression:ka.valueExpression,field:ka.field,context:ba,resultType:"numeric"});switch(ka.type){case "size":return"$view.scale"===ka.valueExpression?null:{type:"size",binding:M,field:V,fieldIndex:ha,normalizationField:C(ea,{target:O,field:ka.normalizationField,context:ba,resultType:"numeric"}).field,valueRepresentation:null!=
(oa=ka.valueRepresentation)?oa:null};case "color":return{type:"color",binding:M,field:V,fieldIndex:ha,normalizationField:C(ea,{target:O,field:ka.normalizationField,context:ba,resultType:"numeric"}).field};case "opacity":return{type:"opacity",binding:M,field:V,fieldIndex:ha,normalizationField:C(ea,{target:O,field:ka.normalizationField,context:ba,resultType:"numeric"}).field};case "rotation":return{type:"rotation",binding:M,field:V,fieldIndex:ha}}}).filter(ka=>ka),target:O}}function P(ea,O,U,ba=!1){ea=
z.unwrapOr(ea,{indexCount:0,fields:{}});switch(U.type){case "simple":case "dot-density":return R(ea,U,"dot-density"===U.type,ba);case "class-breaks":return T(ea,O,U,ba);case "unique-value":return W(ea,O,U,ba);case "dictionary":return{type:"dictionary",renderer:U.toJSON()}}}function R(ea,O,U,ba=!1){ea=O.getSymbols();return{type:"simple",symbol:h(ea.length?ea[0]:null,O,ba),isDotDensity:U}}function T(ea,O,U,ba=!1){const ka=U.backgroundFillSymbol,{field:oa,fieldIndex:M}=C(ea,{target:O,field:U.field,valueExpression:U.valueExpression,
resultType:"numeric",context:{mesh:!0,use:"renderer.field"}});O=U.normalizationType;O="log"===O?"esriNormalizeByLog":"percent-of-total"===O?"esriNormalizeByPercentOfTotal":"field"===O?"esriNormalizeByField":null;const V=U.classBreakInfos.map(ha=>({symbol:h(ha.symbol,U,ba),min:ha.minValue,max:ha.maxValue})).sort((ha,Q)=>ha.min-Q.min);return{type:"interval",attributes:ea.fields,field:oa,fieldIndex:M,backgroundFillSymbol:h(ka,U,ba),defaultSymbol:h(U.defaultSymbol,U,ba),intervals:V,normalizationField:U.normalizationField,
normalizationTotal:U.normalizationTotal,normalizationType:O,isMaxInclusive:U.isMaxInclusive}}function W(ea,O,U,ba=!1){const ka=[],oa=U.backgroundFillSymbol;O={target:O,context:{mesh:!0},resultType:"string"};if(U.field&&"string"!==typeof U.field)throw new w("ValidationError","Expected renderer.field to be a string",U);const {field:M,fieldIndex:V}=C(ea,{...O,field:U.field,valueExpression:U.valueExpression});for(const ha of U.uniqueValueInfos)ka.push({value:""+ha.value,symbol:h(ha.symbol,U,ba)});return{type:"map",
attributes:ea.fields,field:M,fieldIndex:V,field2:C(ea,{...O,field:U.field2}).field,field3:C(ea,{...O,field:U.field3}).field,fieldDelimiter:U.fieldDelimiter,backgroundFillSymbol:h(oa,U),defaultSymbol:h(U.defaultSymbol,U),map:ka}}const Z=y.getLogger("esri.views.2d.layers.features.schemaUtils"),la={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],
esriGeometryMultipoint:null};n.addAggregateFields=K;n.createMatcherSchema=P;n.createSchema=function(ea){l("esri-2d-update-debug")&&console.debug("Created new schema",u(ea,!0));return u(ea)};n.createSymbolSchema=h;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/support/clusterUtils":function(){define("exports ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/Error ../../../../renderers/visualVariables/support/SizeStop ../../../../renderers/visualVariables/SizeVariable ../../../../core/MD5 ../../engine/LevelDependentSizeVariable".split(" "),
function(n,l,p,z,y,w,f,k,m){function c(v,x,u){switch(v){case "avg":case "avg_angle":return`cluster_avg_${x}`;case "mode":return`cluster_type_${x}`;case "norm":return v=x.toLowerCase()+",norm:field,"+u.toLowerCase(),"cluster_avg_"+k.createMD5Hash(v)}}function e(v,x){const {name:u,outStatistic:D}=x,{onStatisticField:B,onStatisticValueExpression:A,statisticType:C}=D;A?(x=k.createMD5Hash(A.toLowerCase()),v.push({name:u,outStatistic:{onStatisticField:x,onStatisticValueExpression:A,statisticType:C}})):
B?v.push({name:u,outStatistic:{onStatisticField:B,statisticType:C}}):g.error(new y("mapview-unsupported-field","Unable to handle field",{field:x}))}function q(v,x,u){const D=k.createMD5Hash(x),B="mode"===u?`cluster_type_${D}`:`cluster_avg_${D}`;v.some(A=>A.name===B)||v.push({name:B,outStatistic:{onStatisticField:D,onStatisticValueExpression:x,statisticType:u}});return B}function d(v,x,u,D){if("cluster_count"===x||v.some(A=>A.name===x))return x;const B=c(u,x,D);v.some(A=>A.name===B)||("norm"===u?v.push({name:B,
outStatistic:{onStatisticField:x,onStatisticNormalizationField:D,statisticType:u}}):v.push({name:B,outStatistic:{onStatisticField:x,statisticType:u}}));return B}const g=z.getLogger("esri.views.2d.layers.support.clusterUtils");l.add("esri-cluster-arcade-enabled",1);const b=l("esri-cluster-arcade-enabled"),a=v=>{for(const x of v)if("size"===x.type)return x;return null},h=v=>{for(const x of v)if("cluster_count"===x.field)return!0;return!1},r=(v,x)=>{const u=[new w({value:0,size:0}),new w({value:1})];
if(p.isNone(x))return new f({field:"cluster_count",stops:[...u,new w({value:2,size:0})]});const D=Object.keys(x).reduce((B,A)=>({...B,[A]:[...u,new w({value:Math.max(2,x[A].minValue),size:v.clusterMinSize}),new w({value:Math.max(3,x[A].maxValue),size:v.clusterMaxSize})]}),{});return new m.LevelDependentSizeVariable({field:"cluster_count",levels:D})},t=v=>{const x=u=>g.error(new y("Unsupported-renderer",u,{renderer:v}));if("unique-value"===v.type){if(v.field2||v.field3)return x("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),
!1}else if("class-breaks"===v.type){if(v.normalizationField){const u=v.normalizationType;if("field"!==u)return x(`FeatureReductionCluster does not support a normalizationType of ${u}`),!1}}else if("simple"!==v.type)return x(`FeatureReductionCluster does not support renderers of type ${v.type}`),!1;if(!b){if("valueExpression"in v&&v.valueExpression)return x("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in
v&&v.visualVariables||[]).some(u=>!!("valueExpression"in u&&u.valueExpression)))return x("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};n.createClusterCountSizeVariable=r;n.createClusterRenderer=(v,x,u,D)=>{x=x.clone();if(!t(x))return x;if(u.fields)for(var B of u.fields)e(v,B);if("visualVariables"in x){B=(x.visualVariables||[]).filter(C=>"$view.scale"!==C.valueExpression);const A=a(B);B.forEach(C=>
{"rotation"===C.type?C.field?C.field=d(v,C.field,"avg_angle"):C.valueExpression&&(C.field=q(v,C.valueExpression,"avg_angle"),C.valueExpression=null):C.normalizationField?(C.field=d(v,C.field,"norm",C.normalizationField),C.normalizationField=null):C.field?C.field=d(v,C.field,"avg"):(C.field=q(v,C.valueExpression,"avg"),C.valueExpression=null)});p.isNone(A)&&!h(B)&&(B.push(r(u,D)),x.dynamicClusterSize=!0);x.visualVariables=B}switch(x.type){case "unique-value":x.field?x.field=d(v,x.field,"mode"):x.valueExpression&&
(x.field=q(v,x.valueExpression,"mode"),x.valueExpression=null);break;case "class-breaks":x.normalizationField?(x.field=d(v,x.field,"norm",x.normalizationField),x.normalizationField=null):x.field?x.field=d(v,x.field,"avg"):(x.field=q(v,x.valueExpression,"avg"),x.valueExpression=null)}return x};n.findSizeVV=a;n.hasClusterCountVV=h;n.isClusterCompatibleRenderer=t;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/SizeStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../core/screenUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;p=g=function(b){function a(h){h=b.call(this,h)||this;h.label=null;h.size=null;h.value=null;return h}n._inheritsLoose(a,b);a.prototype.clone=function(){return new g({label:this.label,size:this.size,value:this.value})};return a}(q.JSONSupport);l.__decorate([w.property({type:String,json:{write:!0}})],p.prototype,"label",void 0);l.__decorate([w.property({type:Number,cast:d.toPt,json:{write:!0}})],p.prototype,"size",void 0);l.__decorate([w.property({type:Number,
json:{write:!0}})],p.prototype,"value",void 0);return p=g=l.__decorate([k.subclass("esri.renderers.visualVariables.support.SizeStop")],p)})},"esri/renderers/visualVariables/SizeVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/screenUtils ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ./support/visualVariableUtils".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v){function x(E){if(null!=E){if("string"===typeof E||"number"===typeof E)return b.toPt(E);if("size"===E.type){if(t.isSizeVariable(E))return E;E={...E};delete E.type;return new C(E)}}}function u(E,F,G){if("object"!==typeof E)return E;F=new C;F.read(E,G);return F}var D;const B=z.getLogger("esri.renderers.visualVariables.SizeVariable");p=new f.JSONMap({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"});const A=new f.JSONMap({unknown:"unknown",
inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});let C=D=function(E){function F(J){J=E.call(this,J)||this;J.axis=null;J.legendOptions=null;J.normalizationField=null;J.scaleBy=null;J.target=null;J.type="size";J.useSymbolValue=null;J.valueExpression=null;J.valueRepresentation=null;J.valueUnit=null;return J}n._inheritsLoose(F,
E);var G=F.prototype;G.castMaxSize=function(J){return x(J)};G.readMaxSize=function(J,K,L){return u(J,K,L)};G.castMinSize=function(J){return x(J)};G.readMinSize=function(J,K,L){return u(J,K,L)};G.readValueExpression=function(J,K){return J||K.expression&&"$view.scale"};G.writeValueExpressionWebScene=function(J,K,L,I){"$view.scale"===J?I&&I.messages&&(J=this.index,I.messages.push(new e("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:("string"===typeof J?J:`visualVariables[${J}]`)+".valueExpression",context:I}))):K[L]=J};G.readValueUnit=function(J){return J?A.read(J):null};G.clone=function(){return new D({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:t.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:t.isSizeVariable(this.minSize)?this.minSize.clone():
this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(J=>J.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};G.flipSizes=function(){if("clamped-linear"===this.transformationType){const {minSize:J,maxSize:K}=this;this.minSize=K;this.maxSize=J;return this}if("stops"===this.transformationType){const J=this.stops,K=J.map(I=>
I.size).reverse(),L=J.length;for(let I=0;I<L;I++)J[I].size=K[I]}return this};G.getAttributeHash=function(){return`${E.prototype.getAttributeHash.call(this)}-${this.target}-${this.normalizationField}`};G._interpolateData=function(){return this.stops&&this.stops.map(J=>J.value||0)};n._createClass(F,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:v.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(J){B.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===J?(this.valueExpression="$view.scale",this._set("expression",J)):this._set("expression",null)}},{key:"index",set:function(J){t.isSizeVariable(this.maxSize)&&(this.maxSize.index=`visualVariables[${J}].maxSize`);t.isSizeVariable(this.minSize)&&(this.minSize.index=`visualVariables[${J}].minSize`);this._set("index",J)}},{key:"inputValueType",get:function(){return t.getInputValueType(this)}},{key:"maxDataValue",set:function(J){J&&this.stops&&(B.warn("cannot set maxDataValue when stops is not null."),
J=null);this._set("maxDataValue",J)}},{key:"maxSize",set:function(J){J&&this.stops&&(B.warn("cannot set maxSize when stops is not null."),J=null);this._set("maxSize",J)}},{key:"minDataValue",set:function(J){J&&this.stops&&(B.warn("cannot set minDataValue when stops is not null."),J=null);this._set("minDataValue",J)}},{key:"minSize",set:function(J){J&&this.stops&&(B.warn("cannot set minSize when stops is not null."),J=null);this._set("minSize",J)}},{key:"arcadeRequired",get:function(){return this.valueExpression?
!0:this.minSize&&"object"===typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"===typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(J){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?J&&Array.isArray(J)&&(J=J.filter(K=>!!K),J.sort((K,L)=>K.value-L.value)):J&&(B.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),J=null);this._set("stops",J)}},{key:"transformationType",
get:function(){return t.getTransformationType(this,this.inputValueType)}}]);return F}(a);l.__decorate([y.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],C.prototype,"cache",null);l.__decorate([y.property({type:p.apiValues,json:{type:p.jsonValues,origins:{"web-map":{read:!1}},read:p.read,write:p.write}})],C.prototype,"axis",void 0);l.__decorate([y.property({type:String,value:null,json:{read:!1}})],C.prototype,"expression",null);l.__decorate([y.property()],C.prototype,"index",null);l.__decorate([y.property({type:String,
readOnly:!0,dependsOn:["field","valueExpression"]})],C.prototype,"inputValueType",null);l.__decorate([y.property({type:r,json:{write:!0}})],C.prototype,"legendOptions",void 0);l.__decorate([y.property({type:Number,value:null,json:{write:!0}})],C.prototype,"maxDataValue",null);l.__decorate([y.property({type:Number,value:null,json:{write:!0}})],C.prototype,"maxSize",null);l.__decorate([w.cast("maxSize")],C.prototype,"castMaxSize",null);l.__decorate([k.reader("maxSize")],C.prototype,"readMaxSize",null);
l.__decorate([y.property({type:Number,value:null,json:{write:!0}})],C.prototype,"minDataValue",null);l.__decorate([y.property({type:Number,value:null,json:{write:!0}})],C.prototype,"minSize",null);l.__decorate([w.cast("minSize")],C.prototype,"castMinSize",null);l.__decorate([k.reader("minSize")],C.prototype,"readMinSize",null);l.__decorate([y.property({type:String,json:{write:!0}})],C.prototype,"normalizationField",void 0);l.__decorate([y.property({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired",
"maxSize.arcadeRequired"]})],C.prototype,"arcadeRequired",null);l.__decorate([y.property({type:String})],C.prototype,"scaleBy",void 0);l.__decorate([y.property({type:[h],value:null,json:{write:!0}})],C.prototype,"stops",null);l.__decorate([y.property({type:["outline"],json:{write:!0}})],C.prototype,"target",void 0);l.__decorate([y.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],C.prototype,"transformationType",null);
l.__decorate([y.property({type:["size"],json:{type:["sizeInfo"]}})],C.prototype,"type",void 0);l.__decorate([y.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],C.prototype,"useSymbolValue",void 0);l.__decorate([y.property({type:String,json:{write:!0}})],C.prototype,"valueExpression",void 0);l.__decorate([k.reader("valueExpression",["valueExpression","expression"])],C.prototype,"readValueExpression",null);l.__decorate([c.writer("web-scene","valueExpression")],C.prototype,"writeValueExpressionWebScene",
null);l.__decorate([y.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],C.prototype,"valueRepresentation",void 0);l.__decorate([y.property({type:A.apiValues,json:{write:A.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],C.prototype,"valueUnit",void 0);l.__decorate([k.reader("valueUnit")],C.prototype,"readValueUnit",null);return C=D=l.__decorate([m.subclass("esri.renderers.visualVariables.SizeVariable")],C)})},"esri/renderers/visualVariables/VisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./support/VisualVariableLegendOptions".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g){const b=z.getLogger("esri.renderers.visualVariables.VisualVariable");p=new k.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});d=function(a){function h(t){t=a.call(this,t)||this;t.index=null;t.type=null;t.field=null;t.valueExpression=null;t.valueExpressionTitle=null;t.legendOptions=null;return t}n._inheritsLoose(h,a);var r=h.prototype;r.castField=function(t){return null==t?t:"function"===typeof t?(b.error(".field: field must be a string value"),
null):y.ensureString(t)};r.clone=function(){};r.getAttributeHash=function(){return`${this.type}-${this.field}-${this.valueExpression}`};n._createClass(h,[{key:"arcadeRequired",get:function(){return!!this.valueExpression}}]);return h}(d.JSONSupport);l.__decorate([w.property()],d.prototype,"index",void 0);l.__decorate([w.property({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],d.prototype,"type",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],d.prototype,"field",void 0);
l.__decorate([f.cast("field")],d.prototype,"castField",null);l.__decorate([w.property({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0);l.__decorate([w.property({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0);l.__decorate([w.property({readOnly:!0,dependsOn:["valueExpression"]})],d.prototype,"arcadeRequired",null);l.__decorate([w.property({type:g,json:{write:!0}})],d.prototype,"legendOptions",void 0);return d=l.__decorate([m.subclass("esri.renderers.visualVariables.VisualVariable")],
d)})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../support/LegendOptions".split(" "),function(n,l,
p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(){var a=g.apply(this,arguments)||this;a.showLegend=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend})};return b}(q["default"]);l.__decorate([w.property({type:Boolean,json:{write:!0}})],p.prototype,"showLegend",void 0);return p=d=l.__decorate([k.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p)})},"esri/renderers/support/LegendOptions":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d){var g;n.LegendOptions=g=function(b){function a(){var h=b.apply(this,arguments)||this;h.title=null;return h}l._inheritsLoose(a,b);a.prototype.clone=function(){return new g({title:this.title})};return a}(d.JSONSupport);p.__decorate([f.property({type:String,json:{write:!0}})],n.LegendOptions.prototype,"title",void 0);n.LegendOptions=g=p.__decorate([m.subclass("esri.renderers.support.LegendOptions")],n.LegendOptions);n.default=n.LegendOptions;Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ./VisualVariableLegendOptions".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){var d;p=d=function(g){function b(){var a=g.apply(this,arguments)||this;a.customValues=null;return a}n._inheritsLoose(b,g);b.prototype.clone=function(){return new d({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};return b}(q);l.__decorate([w.property({type:[Number],json:{write:!0}})],p.prototype,"customValues",void 0);return p=d=l.__decorate([k.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],
p)})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["exports"],function(n){function l(p){return p.valueExpression?"expression":p.field&&"string"===typeof p.field?"field":"unknown"}n.getInputValueType=l;n.getTransformationType=function(p,z){return"unknown"===(z||l(p))?"constant":p.stops?"stops":null!=p.minSize&&null!=p.maxSize&&null!=p.minDataValue&&null!=p.maxDataValue?"clamped-linear":"unknown"===(p.valueUnit||"unknown")?null!=p.minSize&&null!=p.minDataValue?p.minSize&&
p.minDataValue?"proportional":"additive":"identity":"real-world-size"};n.isSizeVariable=function(p){return p&&"esri.renderers.visualVariables.SizeVariable"===p.declaredClass};n.isValidNumber=function(p){return null!=p&&!isNaN(p)&&isFinite(p)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define("exports ../../../core/compilerUtils ../../../core/maybe ../../../core/Logger ../../../Color ../../../Graphic ./sizeVariableUtils ../../support/lengthUtils".split(" "),
function(n,l,p,z,y,w,f,k){function m(x,u,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"color"===K.type)[0]:x)if("esri.renderers.visualVariables.ColorVariable"!==x.declaredClass)r.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");else{var B="number"===typeof u,A=B?null:u,C=A&&A.attributes,E=B?u:null,F=x.field,{ipData:G,hasExpression:J}=x.cache;u=x.cache.compiledFunc;if(!F&&!J)return(D=x.stops)&&D[0]&&D[0].color;if("number"!==
typeof E)if(J){if(!p.isSome(D)||!p.isSome(D.arcade)){r.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;F=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});A=E.createExecContext(A,F);u||(u=E.createSyntaxTree(x.valueExpression),u=E.createFunction(u),x.cache.compiledFunc=u);E=E.executeFunction(u,A)}else C&&(E=C[F]);A=x.normalizationField;C=C?parseFloat(C[A]):void 0;if(null!=E&&(!A||B||!isNaN(C)&&0!==C)&&(isNaN(C)||
B||(E/=C),B=h(E,G)))return C=B[0],A=B[1],D=C===A?x.stops[C].color:y.blendColors(x.stops[C].color,x.stops[A].color,B[2],p.isSome(D)?D.color:void 0),new y(D)}}function c(x,u,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"opacity"===K.type)[0]:x)if("esri.renderers.visualVariables.OpacityVariable"!==x.declaredClass)r.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");else{var B="number"===typeof u,A=B?null:u,C=A&&A.attributes,
E=B?u:null,F=x.field,{ipData:G,hasExpression:J}=x.cache;u=x.cache.compiledFunc;if(!F&&!J)return(x=x.stops)&&x[0]&&x[0].opacity;if("number"!==typeof E)if(J){if(p.isNone(D)||p.isNone(D.arcade)){r.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(A,D);u||(A=E.createSyntaxTree(x.valueExpression),u=E.createFunction(A),x.cache.compiledFunc=u);E=E.executeFunction(u,
D)}else C&&(E=C[F]);D=x.normalizationField;C=C?parseFloat(C[D]):void 0;if(null!=E&&(!D||B||!isNaN(C)&&0!==C)&&(isNaN(C)||B||(E/=C),B=h(E,G))){D=B[0];C=B[1];if(D===C)return x.stops[D].opacity;D=x.stops[D].opacity;return D+(x.stops[C].opacity-D)*B[2]}}}function e(x,u,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(K=>"rotation"===K.type)[0]:x)if("esri.renderers.visualVariables.RotationVariable"!==x.declaredClass)r.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");
else{var B=x.axis||"heading",A="heading"===B&&"arithmetic"===x.rotationType?90:0;B="heading"===B&&"arithmetic"===x.rotationType?-1:1;var C="number"===typeof u?null:u,E=C&&C.attributes,F=x.field,{hasExpression:G}=x.cache;u=x.cache.compiledFunc;var J=0;if(!F&&!G)return J;if(G){if(p.isNone(D)||p.isNone(D.arcade)){r.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});
D=E.createExecContext(C,D);u||(u=E.createSyntaxTree(x.valueExpression),u=E.createFunction(u),x.cache.compiledFunc=u);J=E.executeFunction(u,D)}else E&&(J=E[F]||0);return J="number"!==typeof J||isNaN(J)?null:A+B*J}}function q(x,u,D){const B="number"===typeof u;var A=B?null:u;const C=A&&A.attributes;var E=B?u:null;const {isScaleDriven:F}=x.cache;u=x.cache.compiledFunc;if(F)A=p.isSome(D)?D.scale:void 0,D=p.isSome(D)?D.view:void 0,null==A||"3d"===D?(A=D=null,(A=x.stops)?(D=A[0].value,A=A[A.length-1].value):
(D=x.minDataValue||0,A=x.maxDataValue||0),D=(D+A)/2):D=A,E=D;else if(!B)switch(x.inputValueType){case "expression":if(p.isNone(D)||p.isNone(D.arcade)){r.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(A,D);u||(A=E.createSyntaxTree(x.valueExpression),u=E.createFunction(A),x.cache.compiledFunc=u);E=E.executeFunction(u,D);break;case "field":C&&
(E=C[x.field]);break;case "unknown":E=null}if(!f.isValidNumber(E))return null;if(B||!x.normalizationField)return E;x=C?parseFloat(C[x.normalizationField]):null;return f.isValidNumber(x)&&0!==x?E/x:null}function d(x,u,D){if(x="visualVariables"in x&&x.visualVariables?x.visualVariables.filter(A=>"size"===A.type)[0]:x)if("esri.renderers.visualVariables.SizeVariable"!==x.declaredClass)r.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");else{var B=q(x,u,D);
u=a(B,x,u,D,x.cache.ipData);return null===u||void 0===u||isNaN(u)?0:u}}function g(x,u,D){return null==x?null:f.isSizeVariable(x)?d(x,u,D):f.isValidNumber(x)?x:null}function b(x,u,D){return f.isValidNumber(D)&&x>D?D:f.isValidNumber(u)&&x<u?u:x}function a(x,u,D,B,A){switch(u.transformationType){case "additive":return B=g(u.minSize,D,B),u=x+(B||u.minDataValue);case "constant":return x=(x=u.stops)&&x.length&&x[0].size,null==x&&(x=u.minSize),u=g(x,D,B);case "clamped-linear":A=(x-u.minDataValue)/(u.maxDataValue-
u.minDataValue);var C=g(u.minSize,D,B);D=g(u.maxSize,D,B);B=p.isSome(B)?B.shape:void 0;x<=u.minDataValue?u=C:x>=u.maxDataValue?u=D:"area"===u.scaleBy&&B?(x=(u="circle"===B)?v*Math.pow(C/2,2):C*C,x+=A*((u?v*Math.pow(D/2,2):D*D)-x),u=u?2*Math.sqrt(x/v):Math.sqrt(x)):u=C+A*(D-C);return u;case "proportional":return A=p.isSome(B)?B.shape:void 0,x/=u.minDataValue,C=g(u.minSize,D,B),u=g(u.maxSize,D,B),B=null,B="circle"===A?2*Math.sqrt(x*Math.pow(C/2,2)):"square"===A||"diamond"===A||"image"===A?Math.sqrt(x*
Math.pow(C,2)):x*C,u=b(B,C,u);case "stops":{const [E,F,G]=h(x,A);E===F?u=g(u.stops[E].size,D,B):(x=g(u.stops[E].size,D,B),u=g(u.stops[F].size,D,B),u=x+(u-x)*G)}return u;case "real-world-size":return A=(p.isSome(B)&&B.resolution?B.resolution:1)*k.meterIn[u.valueUnit],C=g(u.minSize,D,B),B=g(u.maxSize,D,B),{valueRepresentation:u}=u,D=null,D="area"===u?2*Math.sqrt(x/v)/A:"radius"===u||"distance"===u?2*x/A:x/A,u=b(D,C,B);case "identity":return x;case "unknown":return null}}function h(x,u){if(u){var D=
0,B=u.length-1;u.some((A,C)=>{if(x<A)return B=C,!0;D=C;return!1});return[D,B,(x-u[D])/(u[B]-u[D])]}}const r=z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),t=new w,v=Math.PI;n.getAllSizes=function(x,u,D){const B=["proportional","proportional","proportional"];for(const A of x)switch(x=A.useSymbolValue?"symbol-value":d(A,u,D),A.axis){case "width":B[0]=x;break;case "depth":B[1]=x;break;case "height":B[2]=x;break;case "width-and-depth":B[0]=x;B[1]=x;break;case "all":case void 0:case null:B[0]=
x;B[1]=x;B[2]=x;break;default:l.neverReached(A.axis)}return B};n.getColor=m;n.getOpacity=c;n.getRotationAngle=e;n.getSize=d;n.getSizeForValue=a;n.getSizeFromNumberOrVariable=g;n.getSizeRangeAtScale=function(x,u,D){const {isScaleDriven:B}=x.cache;if(!(B&&"3d"===D||u))return null;D={scale:u,view:D};u=g(x.minSize,t,D);x=g(x.maxSize,t,D);if(null!=u||null!=x)return u>x&&(D=x,x=u,u=D),{minSize:u,maxSize:x}};n.getVisualVariableValues=function(x,u,D){if(x.visualVariables){var B=[],A=[],C=[],E=[],F=[];for(const G of x.visualVariables)switch(G.type){case "color":A.push(G);
break;case "opacity":C.push(G);break;case "rotation":F.push(G);break;case "size":E.push(G)}A.forEach(G=>{const J=m(G,u,D);B.push({variable:G,value:J})});C.forEach(G=>{const J=c(G,u,D);B.push({variable:G,value:J})});F.forEach(G=>{const J=e(G,u,D);B.push({variable:G,value:J})});E.forEach(G=>{const J=d(G,u,D);B.push({variable:G,value:J})});return B.filter(G=>null!=G.value)}};n.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/compilerUtils":function(){define(["exports",
"./has"],function(n,l){n.neverReached=function(p){};n.neverReachedSilent=function(p){};n.tuple=(...p)=>p;n.typeCast=function(p){return()=>p};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../geometry/support/Ellipsoid","../../core/unitUtils"],function(n,l,p){l={inches:p.convertUnit(1,"meters","inches"),feet:p.convertUnit(1,"meters","feet"),"us-feet":p.convertUnit(1,"meters","us-feet"),yards:p.convertUnit(1,"meters","yards"),
miles:p.convertUnit(1,"meters","miles"),"nautical-miles":p.convertUnit(1,"meters","nautical-miles"),millimeters:p.convertUnit(1,"meters","millimeters"),centimeters:p.convertUnit(1,"meters","centimeters"),decimeters:p.convertUnit(1,"meters","decimeters"),meters:p.convertUnit(1,"meters","meters"),kilometers:p.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/p.lengthToDegrees(1,"meters",l.earth.radius)};n.meterIn=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MD5":function(){define(["exports"],
function(n){function l(k,m){const c=(k&65535)+(m&65535);return(k>>16)+(m>>16)+(c>>16)<<16|c&65535}function p(k,m,c,e,q,d){k=l(l(m,k),l(e,d));return l(k<<q|k>>>32-q,c)}function z(k,m,c,e,q,d,g){return p(m&c|~m&e,k,m,q,d,g)}function y(k,m,c,e,q,d,g){return p(m&e|c&~e,k,m,q,d,g)}function w(k,m,c,e,q,d,g){return p(c^(m|~e),k,m,q,d,g)}const f={Base64:0,Hex:1,String:2,Raw:3};n.createMD5Hash=function(k,m=f.Hex){m=m||f.Base64;var c=[];for(let q=0,d=8*k.length;q<d;q+=8)c[q>>5]|=(k.charCodeAt(q/8)&255)<<q%
32;{k=8*k.length;c[k>>5]|=128<<k%32;c[(k+64>>>9<<4)+14]=k;k=1732584193;var e=-271733879;let q=-1732584194,d=271733878;for(let g=0;g<c.length;g+=16){const b=k,a=e,h=q,r=d;k=z(k,e,q,d,c[g+0],7,-680876936);d=z(d,k,e,q,c[g+1],12,-389564586);q=z(q,d,k,e,c[g+2],17,606105819);e=z(e,q,d,k,c[g+3],22,-1044525330);k=z(k,e,q,d,c[g+4],7,-176418897);d=z(d,k,e,q,c[g+5],12,1200080426);q=z(q,d,k,e,c[g+6],17,-1473231341);e=z(e,q,d,k,c[g+7],22,-45705983);k=z(k,e,q,d,c[g+8],7,1770035416);d=z(d,k,e,q,c[g+9],12,-1958414417);
q=z(q,d,k,e,c[g+10],17,-42063);e=z(e,q,d,k,c[g+11],22,-1990404162);k=z(k,e,q,d,c[g+12],7,1804603682);d=z(d,k,e,q,c[g+13],12,-40341101);q=z(q,d,k,e,c[g+14],17,-1502002290);e=z(e,q,d,k,c[g+15],22,1236535329);k=y(k,e,q,d,c[g+1],5,-165796510);d=y(d,k,e,q,c[g+6],9,-1069501632);q=y(q,d,k,e,c[g+11],14,643717713);e=y(e,q,d,k,c[g+0],20,-373897302);k=y(k,e,q,d,c[g+5],5,-701558691);d=y(d,k,e,q,c[g+10],9,38016083);q=y(q,d,k,e,c[g+15],14,-660478335);e=y(e,q,d,k,c[g+4],20,-405537848);k=y(k,e,q,d,c[g+9],5,568446438);
d=y(d,k,e,q,c[g+14],9,-1019803690);q=y(q,d,k,e,c[g+3],14,-187363961);e=y(e,q,d,k,c[g+8],20,1163531501);k=y(k,e,q,d,c[g+13],5,-1444681467);d=y(d,k,e,q,c[g+2],9,-51403784);q=y(q,d,k,e,c[g+7],14,1735328473);e=y(e,q,d,k,c[g+12],20,-1926607734);k=p(e^q^d,k,e,c[g+5],4,-378558);d=p(k^e^q,d,k,c[g+8],11,-2022574463);q=p(d^k^e,q,d,c[g+11],16,1839030562);e=p(q^d^k,e,q,c[g+14],23,-35309556);k=p(e^q^d,k,e,c[g+1],4,-1530992060);d=p(k^e^q,d,k,c[g+4],11,1272893353);q=p(d^k^e,q,d,c[g+7],16,-155497632);e=p(q^d^k,e,
q,c[g+10],23,-1094730640);k=p(e^q^d,k,e,c[g+13],4,681279174);d=p(k^e^q,d,k,c[g+0],11,-358537222);q=p(d^k^e,q,d,c[g+3],16,-722521979);e=p(q^d^k,e,q,c[g+6],23,76029189);k=p(e^q^d,k,e,c[g+9],4,-640364487);d=p(k^e^q,d,k,c[g+12],11,-421815835);q=p(d^k^e,q,d,c[g+15],16,530742520);e=p(q^d^k,e,q,c[g+2],23,-995338651);k=w(k,e,q,d,c[g+0],6,-198630844);d=w(d,k,e,q,c[g+7],10,1126891415);q=w(q,d,k,e,c[g+14],15,-1416354905);e=w(e,q,d,k,c[g+5],21,-57434055);k=w(k,e,q,d,c[g+12],6,1700485571);d=w(d,k,e,q,c[g+3],10,
-1894986606);q=w(q,d,k,e,c[g+10],15,-1051523);e=w(e,q,d,k,c[g+1],21,-2054922799);k=w(k,e,q,d,c[g+8],6,1873313359);d=w(d,k,e,q,c[g+15],10,-30611744);q=w(q,d,k,e,c[g+6],15,-1560198380);e=w(e,q,d,k,c[g+13],21,1309151649);k=w(k,e,q,d,c[g+4],6,-145523070);d=w(d,k,e,q,c[g+11],10,-1120210379);q=w(q,d,k,e,c[g+2],15,718787259);e=w(e,q,d,k,c[g+9],21,-343485551);k=l(k,b);e=l(e,a);q=l(q,h);d=l(d,r)}c=[k,e,q,d]}switch(m){case f.Raw:return c;case f.Hex:m=[];for(let q=0,d=4*c.length;q<d;q++)m.push("0123456789abcdef".charAt(c[q>>
2]>>q%4*8+4&15)+"0123456789abcdef".charAt(c[q>>2]>>q%4*8&15));return m=m.join("");case f.String:m=[];for(let q=0,d=32*c.length;q<d;q+=8)m.push(String.fromCharCode(c[q>>5]>>>q%32&255));return m=m.join("");case f.Base64:m=[];for(let q=0,d=4*c.length;q<d;q+=3)for(k=(c[q>>2]>>q%4*8&255)<<16|(c[q+1>>2]>>(q+1)%4*8&255)<<8|c[q+2>>2]>>(q+2)%4*8&255,e=0;4>e;e++)8*q+6*e>32*c.length?m.push("\x3d"):m.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(k>>6*(3-e)&63));return m=m.join("")}};
n.outputTypes=f;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/LevelDependentSizeVariable":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../renderers/visualVariables/support/sizeVariableUtils ../../../renderers/visualVariables/SizeVariable".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){var h;n.LevelDependentSizeVariable=h=function(r){function t(){return r.apply(this,arguments)||this}l._inheritsLoose(t,r);var v=t.prototype;v.writeLevels=function(x,u,D){for(const B in x){u.stops=this.levels[B];break}};v.clone=function(){return new h({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:b.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,
minDataValue:this.minDataValue,minSize:b.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(x=>x.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:y.clone(this.levels)})};return t}(a);p.__decorate([k.property()],n.LevelDependentSizeVariable.prototype,"levels",void 0);
p.__decorate([e.writer("levels")],n.LevelDependentSizeVariable.prototype,"writeLevels",null);n.LevelDependentSizeVariable=h=p.__decorate([c.subclass("esri.views.2d.engine.LevelDependentSizeVariable")],n.LevelDependentSizeVariable);Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["exports","../enums","../visualVariablesUtils"],function(n,l,p){n.getVVFlags=function(z){if(!z)return l.WGLVVFlag.NONE;let y=0;for(const w of z)"size"===
w.type?(z=p.getTypeOfSizeVisualVariable(w),y|=z,"outline"===w.target&&(y|=z<<4)):"color"===w.type?y|=l.WGLVVFlag.COLOR:"opacity"===w.type?y|=l.WGLVVFlag.OPACITY:"rotation"===w.type&&(y|=l.WGLVVFlag.ROTATION);return y};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/rendererUtils":function(){define(["exports","../../../../../core/Logger","../../../../../core/screenUtils"],function(n,l,p){function z(f){return("size"===f.type||"color"===f.type||"opacity"===
f.type)&&null!=f.stops}function y(f){var k=f.type;var m=f.stops;if(8>=m.length)k=m;else if(w.warn(`Found ${m.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<m.length){{const [r,...t]=m;var c=t.pop(),e=t[0].value,q=t[t.length-1].value,d=(q-e)/6;const v=[];for(;e<q;e+=d){for(var g=0;e>=t[g].value;)g++;var b=t[g],a=m[g-1],h=e-a.value;b=b.value===a.value?1:h/(b.value-a.value);"color"===k?(a=t[g],g=m[g-1],h=a.color.clone(),h.r=(1-b)*g.color.r+b*h.r,
h.g=(1-b)*g.color.g+b*h.g,h.b=(1-b)*g.color.b+b*h.b,h.a=(1-b)*g.color.a+b*h.a,v.push({value:e,color:h,label:a.label})):"size"===k?(a=t[g],h=m[g-1],g=p.toPt(a.size),h=p.toPt(h.size),v.push({value:e,size:(1-b)*h+b*g,label:a.label})):(a=t[g],v.push({value:e,opacity:(1-b)*m[g-1].opacity+b*a.opacity,label:a.label}))}k=[r,...v,c]}}else{{const [r,...t]=m;for(k=t.pop();6<t.length;){c=m=0;for(q=1;q<t.length;q++)d=Math.abs(t[q].value-t[q-1].value),d>c&&(c=d,m=q);t.splice(m,1)}k=[r,...t,k]}}f.stops=k;return f}
const w=l.getLogger("esri.renderers.visualVariables.support.utils");n.simplifyVVRenderer=f=>{if(!("visualVariables"in f&&f.visualVariables&&f.visualVariables.length))return f;f=f.clone();const k=f.visualVariables.map(m=>z(m)?y(m):m);f.visualVariables=k;return f};n.simplifyVisualVariables=function(f){return f.map(k=>z(k)?y(k.clone()):k)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap"],function(n,l){const p=
new l.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});n.analyzeRings=function(z,y,w){const f=[],k=[];let m=0,c=0;for(const e of z){z=c;let q=e[0][0],d=e[0][1];f[c++]=q;f[c++]=d;let g=0;for(let b=1;b<e.length;++b){const a=q,h=d;q=e[b][0];d=e[b][1];g+=d*a-q*h;f[c++]=q;f[c++]=d}y(g/2);0<g?(0<z-m&&(w(m,z,f,k),m=z),k.length=0):0>g?0<z-m?k.push(.5*(z-m)):c=z:c=z}0<c-m&&
w(m,c,f,k)};n.toJSONGeometryType=function(z){return p.toJSON(z)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(n){n.codepoints=function(l){const p=Array(l.length);for(let z=0;z<l.length;z++)p[z]=l.charCodeAt(z);return p};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaults ../../util/Result ../../../../layers/features/schemaUtils ./WGLTextTemplate ./WGLMarkerTemplate ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ../../../../layers/features/textUtils ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ../../util/Lock".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r){function t(D,B){const A=D.length;D.push(null);B.then(C=>D[A]=C);return D}function v(D){return!!(D&1)}const x=p.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),u=[];p=function(){function D(A,C){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new r["default"];this._fetchResource=
A;this._joinOnUTurn=C}var B=D.prototype;B.createTemplateGroup=function(A,C){this._initErrorTemplates();const E=A.hash;if(this._symbolToTemplate.has(E))return this._symbolToTemplate.get(E);const F=[];C&&this._createMeshTemplates(F,C,!0);this._createMeshTemplates(F,A,!1);A=this._createGroupId("expanded-cim"===A.type);this._idToTemplateGroup.set(A,F);this._symbolToTemplate.set(E,A);return A};B.getTemplateGroup=function(A){return this._idToTemplateGroup.has(A)?this._idToTemplateGroup.get(A):u};B.getDynamicTemplateGroup=
function(A){if(!this._idToTemplateGroup.has(A))return u;v(A)||x.error("mapview-template-store",`Id ${A} does not refer to a dynamic template`);return this._idToTemplateGroup.get(A)};B.getMosaicItem=function(A,C){const E=this._createTemplateId(),F=y.create(G=>this._idToResolver.set(E,G));this._fetchQueue.push({symbol:A,id:E,glyphIds:C});return F};B.finalize=function(A){return this._fetchQueue.length||this._lock.isHeld()?r.withLock(this._lock,this._fetchAllQueuedResources.bind(this),A):y.resolve()};
B._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],k.createSymbolSchema(w.errorPolygonSymbol2D),!1),marker:this._createMeshTemplates([],k.createSymbolSchema(w.errorPointSymbol2D),!1),line:this._createMeshTemplates([],k.createSymbolSchema(w.errorPolylineSymbol2D),!1)})};B._fetchAllQueuedResources=function(A){if(!this._fetchQueue.length)return y.resolve();const C=this._fetchQueue,E=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=[];
return y.all(E).then(()=>this._fetchResource(C,A).then(F=>{for(const {id:G,mosaicItem:J}of F)this._idToResolver.get(G)(J),this._idToResolver.delete(G)})).catch(F=>{y.isAbortError(F)?this._fetchQueue=this._fetchQueue.concat(C):"worker:port-closed"!==F.name&&x.error(new z("mapview-template-store","Unable to fetch requested texture resources",F))})};B._createGroupId=function(A){return this._idCounter++<<1|(A?1:0)};B._createTemplateId=function(){return this._templateIdCounter++};B._createSMS=async function(A){const {spriteMosaicItem:C}=
await this.getMosaicItem(A);return f.ok(C,x)?c.fromSimpleMarker(A,C):this._markerError};B._createPMS=async function(A){const {spriteMosaicItem:C}=await this.getMosaicItem(A);return f.ok(C,x)?c.fromPictureMarker(A,C):this._markerError};B._createSFS=async function(A,C){const {spriteMosaicItem:E}=await this.getMosaicItem(A);return f.ok(E,x)?a.fromSimpleFill(A,E,C):this._fillError};B._createPFS=async function(A,C){const {spriteMosaicItem:E}=await this.getMosaicItem(A);return f.ok(E,x)?a.fromPictureFill(A,
E,C):this._fillError};B._createSLS=async function(A,C){({spriteMosaicItem:C}=await this.getMosaicItem(A));return f.ok(C,x)?h.fromSimpleLine(A,C,this._joinOnUTurn):this._lineError};B._createLMS=async function(A){const {spriteMosaicItem:C}=await this.getMosaicItem(A);return f.ok(C,x)?c.fromLineSymbolMarker(A,C):this._markerError};B._createTS=async function(A){const {glyphMosaicItems:C}=await this.getMosaicItem(A);return m.fromText(A,C)};B._createCIMText=async function(A){const {glyphMosaicItems:C}=
await this.getMosaicItem(A.cim,g.codepoints(A.text));A.cim.mosaicHash=A.materialHash;return f.ok(C,x)?m.fromCIMText(A,C):this._textError};B._createCIMFill=async function(A){A.cim.mosaicHash=A.materialHash;const {spriteMosaicItem:C}=await this.getMosaicItem(A.cim);return f.ok(C,x)?a.fromCIMFill(A,C):this._fillError};B._createCIMLine=async function(A){A.cim.mosaicHash=A.materialHash;const {spriteMosaicItem:C}=await this.getMosaicItem(A.cim);return f.ok(C,x)?h.fromCIMLine(A,C,this._joinOnUTurn):this._lineError};
B._createCIMMarker=async function(A){A.cim.mosaicHash=A.materialHash;const {spriteMosaicItem:C}=await this.getMosaicItem(A.cim);return f.ok(C,x)?c.fromCIMMarker(A,C):this._markerError};B._createCIM=async function(A){const C=A.templateHash;if(this._cimTemplateCache.has(C))return this._cimTemplateCache.get(C);let E;switch(A.type){case "marker":E=this._createCIMMarker(A);break;case "line":E=this._createCIMLine(A);break;case "fill":E=this._createCIMFill(A);break;case "text":E=this._createCIMText(A)}E.then(F=>
this._cimTemplateCache.set(C,F));return E};B._createDynamicCIM=function(A){const C=A.templateHash;if(this._cimTemplateCache.has(C))return this._cimTemplateCache.get(C);let E;switch(A.type){case "marker":E=d.fromCIMMarker(A);break;case "line":E=q.fromCIMLine(A);break;case "fill":E=e.fromCIMFill(A);break;case "text":E=b.fromCIMText(A)}this._cimTemplateCache.set(C,E);return E};B._createPrimitiveMeshTemplates=function(A,C,E){switch(C.type){case "esriSMS":return t(A,this._createSMS(C));case "esriPMS":return t(A,
this._createPMS(C));case "esriSFS":return t(A,this._createSFS(C,E));case "line-marker":return t(A,this._createLMS(C));case "esriPFS":return t(A,this._createPFS(C,E));case "esriSLS":return t(A,this._createSLS(C,!1));case "esriTS":return t(A,this._createTS(C));default:return x.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),A}};B._createMeshTemplates=function(A,C,E){if(-1!==C.type.indexOf("3d"))return x.error("3D symbols are not supported with MapView"),A;if("expanded-cim"===
C.type){for(const F of C.layers)"function"===typeof F.materialHash?A.push(this._createDynamicCIM(F)):t(A,this._createCIM(F));return A}if("composite-symbol"===C.type){for(const F of C.layers)this._createPrimitiveMeshTemplates(A,F,E);return A}return"cim"===C.type||"label"===C.type||"web-style"===C.type?A:this._createPrimitiveMeshTemplates(A,C,E)};l._createClass(D,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},
{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);return D}();n.WGLTemplateStore=p;n.isDynamicId=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaults":function(){define("exports ../../core/has ../../core/maybe ../SimpleLineSymbol ../SimpleFillSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(n,l,p,z,y,w,f,k){const m=w.fromJSON(k.defaultPointSymbolJSON),
c=z.fromJSON(k.defaultPolylineSymbolJSON),e=y.fromJSON(k.defaultPolygonSymbolJSON);l=f.fromJSON(k.defaultTextSymbolJSON);w=w.fromJSON(k.errorPointSymbolJSON);z=z.fromJSON(k.errorPolylineSymbolJSON);y=y.fromJSON(k.errorPolygonSymbolJSON);n.defaultPointSymbol2D=m;n.defaultPolygonSymbol2D=e;n.defaultPolylineSymbol2D=c;n.defaultTextSymbol2D=l;n.errorPointSymbol2D=w;n.errorPolygonSymbol2D=y;n.errorPolylineSymbol2D=z;n.getDefaultSymbol2D=function(q){if(p.isNone(q))return null;switch(q.type){case "point":case "multipoint":return m;
case "polyline":return c;case "polygon":case "extent":return e}return null};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports","../../../../../core/Error"],function(n,l){n.ok=function(p,z){return p&&"name"in p?(z&&z.error(new l(p.name,p.message,p.details)),!1):!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../util/BidiText ../../materialKey/MaterialKey ../../color ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),
function(n,l,p,z,y,w,f,k){return function(m){function c(e,q,d,g,b,a,h,r,t,v,x,u,D,B,A,C,E,F=!1){var G=m.call(this)||this;G._xOffset=l.pt2px(u);G._yOffset=l.pt2px(D);G._decoration=t||"none";G._color=g;G._haloColor=b;G._haloSize=Math.min(Math.floor(5*l.pt2px(l.toPt(d))),127);G._size=Math.min(Math.round(l.pt2px(q)),127);q=Math.min(Math.round(l.pt2px(q)),127);G._referenceSize=Math.round(Math.sqrt(256*q));G._scale=G._size/24;G._angle=x;G._justify=p.getJustification(a||"center");G._xAlignD=p.getXAnchorDirection(a||
"center");G._yAlignD=p.getYAnchorDirection(h||"baseline");G._baseline="baseline"===(h||"baseline");G._bitset=(1===r?1:0)|(v?1:0)<<1;e=y.MaterialKeyBase.load(e);e.sdf=!0;G._materialKey=e.data;G._lineWidth=l.pt2px(B)||512;G._lineHeight=A||1;G._textPlacement=C;G.effects=E;G._isCIM=F;return G}n._inheritsLoose(c,m);c.fromText=function(e,q){const d=new c(e.materialKey,e.font.size,e.haloSize||0,e.color&&w.premultiplyAlphaRGBAArray(e.color)||0,e.haloColor&&w.premultiplyAlphaRGBAArray(e.haloColor)||0,e.horizontalAlignment,
e.verticalAlignment,0,e.font.decoration,!1,e.angle||0,e.xoffset,e.yoffset,e.lineWidth,e.lineHeight,null,null,!1);[,e]=z.bidiText(e.text);d.bindTextInfo(q,e);return d};c.fromCIMText=function(e,q){var d=e.scaleFactor||1;d=new c(e.materialKey,e.size*e.sizeRatio*d,e.outlineSize*e.sizeRatio,w.premultiplyAlphaRGBA(e.color),w.premultiplyAlphaRGBA(e.outlineColor),e.horizontalAlignment,e.verticalAlignment,e.alignment,e.decoration,e.colorLocked,e.angle,e.offsetX*e.sizeRatio*d,e.offsetY*e.sizeRatio*d,512,1,
e.markerPlacement,e.effects,!0);[,e]=z.bidiText(e.text);d.bindTextInfo(q,e);return d};return c}(f(k))})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],function(n){(function(l){l[l.Left=-1]="Left";l[l.Center=0]="Center";l[l.Right=1]="Right"})(n.HAlign||(n.HAlign={}));(function(l){l[l.Top=1]="Top";l[l.Center=0]="Center";l[l.Bottom=-1]="Bottom";l[l.Baseline=2]="Baseline"})(n.VAlign||(n.VAlign={}));n.getAlignmentFromPlacement=function(l){switch(l){case "above-left":return[n.HAlign.Right,
n.VAlign.Bottom];case "above-center":case "above-along":return[n.HAlign.Center,n.VAlign.Bottom];case "above-right":return[n.HAlign.Left,n.VAlign.Bottom];case "center-left":return[n.HAlign.Right,n.VAlign.Center];case "center-center":case "center-along":return[n.HAlign.Center,n.VAlign.Center];case "center-right":return[n.HAlign.Left,n.VAlign.Center];case "below-left":return[n.HAlign.Right,n.VAlign.Top];case "below-center":case "below-along":return[n.HAlign.Center,n.VAlign.Top];case "below-right":return[n.HAlign.Left,
n.VAlign.Top];case "always-horizontal":return[n.HAlign.Center,n.VAlign.Baseline];default:return console.debug(`Found invalid placement type ${l}`),[n.HAlign.Center,n.VAlign.Center]}};n.getJustification=function(l){switch(l){case "left":return n.HAlign.Left;case "right":return n.HAlign.Right;case "center":case "justify":return n.HAlign.Center}};n.getXAnchorDirection=function(l){switch(l){case "left":return n.HAlign.Left;case "right":return n.HAlign.Right;case "center":case "justify":return n.HAlign.Center}};
n.getXDirection=function(l){switch(l){case n.HAlign.Right:return-1;case n.HAlign.Center:return 0;case n.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${l}`),0}};n.getYAnchorDirection=function(l){switch(l){case "top":return n.VAlign.Top;case "middle":return n.VAlign.Center;case "baseline":return n.VAlign.Baseline;case "bottom":return n.VAlign.Bottom}};n.getYDirection=function(l){switch(l){case n.VAlign.Top:return 1;case n.VAlign.Center:return 0;case n.VAlign.Bottom:case n.VAlign.Baseline:return-1;
default:return console.debug(`Found invalid vertical alignment ${l}`),0}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../definitions ../../number ./shapingUtils ../../enums ../../materialKey/MaterialKey ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper".split(" "),
function(n,l,p,z,y,w,f,k,m,c){return e=>function(q){function d(...b){b=q.call(this,...b)||this;b._isCIM=!1;b.geometryType=k.WGLGeometryType.TEXT;b._aux=w.i8888to32(0,0,b._referenceSize,b._bitset);return b}n._inheritsLoose(d,q);var g=d.prototype;g.bindTextInfo=function(b,a){this._shapingInfo=b&&b.length?l.andThen(b,h=>f.shapeGlyphs(h,a,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,Math.min(this._lineWidth,
512)),lineHeight:y.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null};g.writeMeshWithGeometry=function(b,a,h,r,t,v){if(l.isSome(this._textPlacement))return h=null!=v?v:h.readLegacyGeometry(),this._writePlacedText(b,a,t,h);if(h=v?z.deltaDecodeGeometry(z.convertFromGeometry(v),2):"esriGeometryPolygon"===r?h.readCentroid():h.readUnquantizedGeometry()){if(h.isPoint){const [x,u]=h.coords;return this._writeGlyphs(b,a,t,{x,y:u})}h.forEachVertex((x,
u)=>this._writeGlyphs(b,a,t,{x,y:u}))}};g._writePlacedText=function(b,a,h,r){const t=this._shapingInfo;if(!l.isNone(t)){var v=m.MaterialKeyBase.load(this._materialKey),x=l.unwrap(this._textPlacement);if(r=c.CIMMarkerPlacementHelper.getPlacement(r,x,p.pt2px(1))){var u;for(u=r.next();null!=u;){x=w.i1616to32(Math.round(8*u.tx),Math.round(8*u.ty));u=u.getAngle();t.setRotation(u);for(const D of t.glyphs){v.textureBinding=D.textureBinding;const B=a.getVector("geometry").vertexCount,A=a.indexVector.length,
C=this._writeIndices(a),E=this._writeVertex(a,h,x,D);b.writeDisplayRecord(this.geometryType,v.data,B,E,A,C)}t.setRotation(-u);u=r.next()}}}};g._writeGlyphs=function(b,a,h,r){var t=this._shapingInfo;if(!l.isNone(t)){var v=m.MaterialKeyBase.load(this._materialKey);r=w.i1616to32(Math.round(8*r.x),Math.round(8*r.y));for(const x of t.glyphs){v.textureBinding=x.textureBinding;t=a.getVector("geometry").vertexCount;const u=a.indexVector.length,D=this._writeIndices(a),B=this._writeVertex(a,h,r,x);b.writeDisplayRecord(this.geometryType,
v.data,t,B,u,D)}}};g._writeVertexCommon=function(b,a,h,r){r=this._color;const t=this._haloColor,v=w.i8888to32(0,0,this._referenceSize,this._bitset),x=w.i8888to32(0,0,this._size,this._haloSize);b.push(h);b.push(a);b.push(r);b.push(t);b.push(x);b.push(v)};g._writeVertex=function(b,a,h,r){b=b.get("geometry");this._writeVertexCommon(b,a,h,r);b.push(r.offsets.upperLeft);b.push(r.texcoords.upperLeft);this._writeVertexCommon(b,a,h,r);b.push(r.offsets.upperRight);b.push(r.texcoords.upperRight);this._writeVertexCommon(b,
a,h,r);b.push(r.offsets.lowerLeft);b.push(r.texcoords.lowerLeft);this._writeVertexCommon(b,a,h,r);b.push(r.offsets.lowerRight);b.push(r.texcoords.lowerRight);return 4};g._writeIndices=function(b){const a=b.getVector("geometry").vertexCount;b=b.indexVector;b.push(a+0);b.push(a+1);b.push(a+2);b.push(a+1);b.push(a+3);b.push(a+2);return 6};return d}(e)})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/vec2 ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),
function(n,l,p,z,y,w,f,k,m,c){const e=Math.PI/180;let q=function(){function a(r,t,v,x){this._rotationT=y.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;const u=v.rect,D=new Float32Array(8);r*=x;t*=x;const B=v.code?u.width*x:v.metrics.width,A=v.code?u.height*x:v.metrics.height;D[0]=r;D[1]=t;D[2]=r+B;D[3]=t;D[4]=r;D[5]=t+A;D[6]=r+B;D[7]=t+A;this._data=D;this._setTextureCoords(u);this._scale=x;this._mosaic=v;this.x=r;this.y=t}var h=a.prototype;h.setTransform=function(r){this._T=
r;this._offsets=null};h._setOffsets=function(r){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const t=this._offsets,v=new Float32Array(8),x=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(v,r,x);t.upperLeft=k.i1616to32(8*v[0],8*v[1]);t.upperRight=k.i1616to32(8*v[2],8*v[3]);t.lowerLeft=k.i1616to32(8*v[4],8*v[5]);t.lowerRight=k.i1616to32(8*v[6],8*v[7])};h._setTextureCoords=function({x:r,y:t,width:v,height:x}){this._texcoords={upperLeft:k.i1616to32(r,
t),upperRight:k.i1616to32(r+v,t),lowerLeft:k.i1616to32(r,t+x),lowerRight:k.i1616to32(r+v,t+x)}};l._createClass(a,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",set:function(r){this._angle=r;z.identity(this._rotationT);z.rotate(this._rotationT,this._rotationT,-r);this._setOffsets(this._data)},get:function(){return this._angle}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},
{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){const {height:r,
width:t}=this._mosaic.metrics;var v=t*this._scale,x=Math.abs(r)*this._scale,u=new Float32Array(8);u[0]=this.x;u[1]=this.y;u[2]=this.x+v;u[3]=this.y;u[4]=this.x;u[5]=this.y+x;u[6]=this.x+v;u[7]=this.y+x;v=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(u,u,v);x=v=Infinity;let D=0;var B=0;for(let A=0;4>A;A++){const C=u[2*A],E=u[2*A+1];v=Math.min(v,C);x=Math.min(x,E);D=Math.max(D,C);B=Math.max(B,E)}u=D-v;B-=x;return new c(v+u/2,x+B/2,u,B)}}]);return a}();const d=(a,h)=>({code:0,page:0,
sdf:!0,rect:new m(0,0,11,8),textureBinding:h,metrics:{advance:0,height:4,width:a,left:0,top:0}});let g=function(){function a(r,t,v){this._rotation=0;this._decorate(r,t,v);this.glyphs=r;this.bounds=this._createBounds(r);this.isMultiline=1<t.length;this._hasRotation=0!==v.angle;this._T=this._createGlyphTransform(this.bounds,v);for(const x of r)x.setTransform(this._T)}var h=a.prototype;h.setRotation=function(r){if(0!==r||0!==this._rotation){this._rotation=r;var t=this._T;r=z.fromRotation(y.create(),
r);z.multiply(t,r,t);for(const v of this.glyphs)v.setTransform(this._T)}};h._decorate=function(r,t,v){if(v.decoration&&"none"!==v.decoration&&r.length){var x=v.scale;v="underline"===v.decoration?30:20;var u=r[0].textureBinding;for(const D of t)r.push(new q(D.startX*x,D.startY*x+v*x,d((D.width+D.glyphWidthEnd)*x,u),1))}};h._createBounds=function(r){let t=Infinity,v=Infinity,x=0;var u=0;for(const D of r)t=Math.min(t,D.xTopLeft),v=Math.min(v,D.yTopLeft),x=Math.max(x,D.xTopLeft+D.width),u=Math.max(u,
D.yBottomRight);r=x-t;u-=v;return new c(t+r/2,v+u/2,r,u)};h._createGlyphTransform=function(r,t){const v=e*t.angle,x=y.create(),u=w.create();z.translate(x,x,p.set(u,t.xOffset,-t.yOffset));t.isCIM?z.rotate(x,x,v):(z.translate(x,x,p.set(u,r.x,r.y)),z.rotate(x,x,v),z.translate(x,x,p.set(u,-r.x,-r.y)));return x};l._createClass(a,[{key:"boundsT",get:function(){var r=this.bounds;const t=p.set(w.create(),r.x,r.y);p.transformMat2d(t,t,this._T);return this._hasRotation?(r=Math.max(r.width,r.height),new c(t[0],
t[1],r,r)):new c(t[0],t[1],r.width,r.height)}}]);return a}(),b=function(a,h,r,t,v,x){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(h,r));this.end=Math.max(0,Math.max(h,r));this.end<a.length&&(this.glyphWidthEnd=a[this.end].metrics.width);this.width=t;this.yMin=v;this.yMax=x};n.ShapedGlyph=q;n.ShapingInfo=g;n.shapeGlyphs=function(a,h,r){const t=r.scale,v=[];{var x=[];var u=1/r.scale*r.maxLineWidth;var D=h?a.length-1:0;var B=h?-1:a.length;h=h?-1:1;var A=D,C=0,E=0;let K=
A,L=K,I=0,N=Infinity,P=0;for(;A!==B;){const {code:R,metrics:T}=a[A];var F=Math.abs(T.top);10!==R&&32!==R&&(N=Math.min(N,F),P=Math.max(P,F+T.height));10===R?(A!==D&&(x.push(new b(a,K,A-h,C,N,P)),N=Infinity,P=0),C=0,K=A+h,L=A+h,E=0):32===R?(L=A+h,E=0,I=T.advance,C+=T.advance):(C>u&&(L!==K?(F=L-2*h,C-=I,x.push(new b(a,K,F,C-E,N,P)),N=Infinity,P=0,K=L,C=E):(x.push(new b(a,K,A-h,C,N,P)),N=Infinity,P=0,L=K=A,C=0)),C+=T.advance,E+=T.advance);A+=h}u=new b(a,K,A-h,C,N,P);0<=u.start&&u.end<a.length&&x.push(u)}for(u=
0;u<x.length;u++);u=D=x[0].yMin;D=x[x.length-1].yMax+r.lineHeight*(x.length-1)+("underline"===r.decoration?4:0)-D;const {vAlign:G,hAlign:J}=r;B=G===f.VAlign.Baseline?1:0;u=(1-B)*-u+D/2*(B?0:G-1)+-26*(B?1:0);for(D=0;D<x.length;D++){const {start:K,end:L,width:I}=x[D];B=I/2*(J+1)*-1-3;h=D*r.lineHeight+u-3;x[D].startX=B;x[D].startY=h;for(A=K;A<=L;A++)C=a[A],10!==C.code&&(E=new q(B+C.metrics.left,h-C.metrics.top,C,t),B+=C.metrics.advance,v.push(E))}return new g(v,x,r)};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils","../../../../../chunks/vec2f32"],function(n,l,p){return function(){function z(w,f,k,m){this.center=p.fromValues(w,f);this.centerT=p.create();this.halfWidth=k/2;this.halfHeight=m/2;this.width=k;this.height=m}var y=z.prototype;y.clone=function(){return new z(this.x,this.y,this.width,this.height)};y.serialize=function(w){w.writeF32(this.center[0]);
w.writeF32(this.center[1]);w.push(this.width);w.push(this.height);return w};y.findCollisionDelta=function(w,f=4){return l.log2(Math.min((w.halfWidth+this.halfWidth+f)/Math.abs(w.centerT[0]-this.centerT[0]),(w.halfHeight+this.halfHeight+f)/Math.abs(w.centerT[1]-this.centerT[1])))};y.extend=function(w){const f=Math.min(this.xmin,w.xmin),k=Math.min(this.ymin,w.ymin),m=Math.max(this.xmax,w.xmax)-f;w=Math.max(this.ymax,w.ymax)-k;this.width=m;this.height=w;this.halfWidth=m/2;this.halfHeight=w/2;this.x=
f+m/2;this.y=k+w/2};z.deserialize=function(w){const f=w.readF32(),k=w.readF32(),m=w.readInt32();w=w.readInt32();return new z(f,k,m,w)};n._createClass(z,[{key:"x",get:function(){return this.center[0]},set:function(w){this.center[0]=w}},{key:"y",get:function(){return this.center[1]},set:function(w){this.center[1]=w}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},
{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}}]);return z}()})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports","../CIMCursor","../CIMOperators"],function(n,l,p){let z=function(){function y(){}y.getPlacement=function(w,
f,k){const m=p.getPlacementOperator(f);if(!m)return null;w=l.cloneAndDecodeGeometry(w);return m.execute(w,f,k)};return y}();n.CIMMarkerPlacementHelper=z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe","../../../../../../geometry/support/jsonUtils","../../enums","../../../../../../symbols/cim/effects/CIMEffectHelper"],function(n,l,p,
z,y){return function(){function w(){}var f=w.prototype;f.writeMesh=function(k,m,c,e,q){if(l.isNone(this.effects))return this.writeMeshWithGeometry(k,m,c,e,q);e=y.CIMEffectHelper.executeEffects(this.effects,c.readLegacyGeometry());let d=y.CIMEffectHelper.next(e);for(;d;)this.writeMeshWithGeometry(k,m,c,p.getJsonType(d),q,d),d=y.CIMEffectHelper.next(e)};f.writeMeshWithGeometry=function(k,m,c,e,q,d){};f.bindFeature=function(k,m,c){};n._createClass(w,[{key:"needsPixelBuffer",get:function(){return!!this.effects||
this.geometryType===z.WGLGeometryType.MARKER||this.geometryType===z.WGLGeometryType.TEXT||this.geometryType===z.WGLGeometryType.LABEL}}]);return w}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define(["exports","../CIMEffects","../CIMCursor","../CIMOperators"],function(n,l,p,z){const y=96/72;let w=function(){function f(){}f.executeEffects=function(k,m){m=p.cloneAndDecodeGeometry(m);m=new l.SimpleGeometryCursor(m);for(const c of k)(k=z.getEffectOperator(c))&&(m=k.execute(m,c,y));return m};
f.next=function(k){k=k.next();p.deltaEncodeGeometry(k);return k};return f}();n.CIMEffectHelper=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../definitions ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../materialKey/MaterialKey ../../color ./WGLMeshTemplate ./WGLBaseMarkerTemplate".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){return function(q){function d(g,b,a,h,r,t,v,x,u,D,B,A,C,E,F,G,J,K,L,I,N){var P=q.call(this)||this;P.angle=h;P.height=v;P.width=t;P.xOffset=b*L;P.yOffset=a*L;P._markerPlacement=I;P.effects=N;P._anchorX=.5-(.5+G)*F.width/F.width;P._anchorY=.5-(.5+J)*F.height/F.height;b=(1===E?1:0)|(B?1:0)<<1|(C?1:0)<<2|(A?1:0)<<3;a=F&&F.sdf;g=k.MarkerMaterialKey.load(g);g.sdf=a;g.pattern=!0;g.textureBinding=F.textureBinding;P._materialKey=g.data;P._fillColor=r;P._outlineColor=u;P._sizeOutlineWidth=
f.i8888to32(Math.round(Math.min(Math.sqrt(128*t),255)),Math.round(Math.min(Math.sqrt(128*v),255)),Math.round(Math.min(Math.sqrt(128*D),255)),Math.round(Math.min(Math.sqrt(128*x),255)));r=F.rect.x+z.SPRITE_PADDING;x=F.rect.y+z.SPRITE_PADDING;u=r+F.width;F=x+F.height;P._texUpperLeft=f.i1616to32(r,x);P._texUpperRight=f.i1616to32(u,x);P._texBottomLeft=f.i1616to32(r,F);P._texBottomRight=f.i1616to32(u,F);t=t*K*L;v=v*K*L;P._bitestAndDistRatio=f.i8888to32(0,0,b,Math.round(Math.min(64*K,255)));P._computedWidth=
t;P._computedHeight=v;t=w.create();v=y.create();P._applyTransformation(v,t);return P}n._inheritsLoose(d,q);d.fromCIMMarker=function(g,b){const a=g.size,h=(b&&b.width||1)/(b&&b.height||1)*g.scaleX;var r=g.scaleSymbolsProportionally&&g.frameHeight?a/g.frameHeight:1;const t=m.premultiplyAlphaRGBA(g.color),v=m.premultiplyAlphaRGBA(g.outlineColor),x=p.pt2px(a),u=x*h,D=p.pt2px(g.offsetX||0),B=p.pt2px(g.offsetY||0);r*=p.pt2px(g.outlineWidth||0);const A=g.alignment||0,C=p.pt2px(g.referenceSize);let E=g.rotation||
0;g.rotateClockwise||(E=-E);let F=0,G=0;const J=g.anchorPoint;J&&(g.isAbsoluteAnchorPoint?a&&(F=-J.x/(a*h),G=J.y/a):(F=J.x,G=J.y));return new d(g.materialKey,D,B,E,t,u,x,C,v,r,g.colorLocked,g.scaleSymbolsProportionally,!1,A,b,F,G,g.sizeRatio,l.unwrapOr(g.scaleFactor,1),g.markerPlacement,g.effects)};d.fromPictureMarker=function(g,b){const a=Math.round(p.pt2px(g.width)),h=Math.round(p.pt2px(g.height)),r=z.PICTURE_FILL_COLOR,t=Math.round(p.pt2px(g.xoffset||0)),v=Math.round(p.pt2px(g.yoffset||0));return new d(g.materialKey,
t,v,g.angle,r,a,h,h,0,0,!1,!1,!1,0,b,0,0,1,1,null,null)};d.fromSimpleMarker=function(g,b){const a=m.premultiplyAlphaRGBAArray(g.color),h=Math.round(p.pt2px(g.size)),r=Math.round(p.pt2px(g.xoffset||0)),t=Math.round(p.pt2px(g.yoffset||0)),v=g.style;var x=g.outline;const u=(x&&x.color&&m.premultiplyAlphaRGBAArray(x.color))|0;x=(x&&x.width&&Math.round(p.pt2px(x.width)))|0;g=new d(g.materialKey,r,t,g.angle,a,h,h,h,u,x,!1,!1,"esriSMSCross"===v||"esriSMSX"===v,0,b,0,0,1.96875,1,null,null);g.boundsType="esriSMSCircle"===
v?"circle":"square";return g};d.fromLineSymbolMarker=function(g,b){const a=m.premultiplyAlphaRGBAArray(g.color),h=Math.round(p.pt2px(6*g.lineWidth)),r="cross"===g.style||"x"===g.style;switch(g.placement){case "begin-end":var t="Both";break;case "begin":t="JustBegin";break;case "end":t="JustEnd";break;default:t="None"}t={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:t,offsetAlongLine:0};b=new d(g.materialKey,0,0,0,a,h,h,h/6,a,r?Math.round(p.pt2px(g.lineWidth)):0,
!1,!1,r,1,b,0,0,1.96875,1,t,null);b.boundsType="circle"===g.style?"circle":"square";return b};return d}(e(c))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../chunks/vec2 ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../enums ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e){const q=3.14159265359/180;return d=>function(g){function b(...h){h=g.call(this,...h)||this;h.angle=0;h.xOffset=0;h.yOffset=0;h.width=0;h.height=0;h.boundsType="square";h._anchorX=0;h._anchorY=0;h._computedWidth=0;h._computedHeight=0;h.geometryType=c.WGLGeometryType.MARKER;return h}n._inheritsLoose(b,g);var a=b.prototype;a.writeMeshWithGeometry=function(h,r,t,v,x,u){const D=r.indexVector,B=r.get("geometry"),A=r.getVector("geometry"),C=A.vertexCount,E=D.length;if(l.isSome(this._markerPlacement))t=
null!=u?u:t.readLegacyGeometry(),this._writePlacedMarkers(B,D,C,x,t);else{t=u?z.deltaDecodeGeometry(z.convertFromGeometry(u),2):"esriGeometryPolygon"===v?t.readCentroid():t.readUnquantizedGeometry();if(!t)return;if(t.isPoint){const [F,G]=t.coords;this._writeVertices(B,x,this._getPos(F,G));this._writeIndices(D,C)}else t.forEachVertex((F,G)=>{const J=A.vertexCount;this._writeVertices(B,x,this._getPos(F,G));this._writeIndices(D,J)})}r=r.getVector("geometry").vertexCount-C;h.writeDisplayRecord(this.geometryType,
this._materialKey,C,r,E,D.length-E)};a._applyTransformation=function(h,r,t=0){w.identity(h);w.translate(h,h,k.fromValues(this.xOffset,-this.yOffset));0!==this.angle+t&&w.rotate(h,h,q*(this.angle+t));t=this._computedWidth;const v=this._computedHeight,x=(this._anchorX-.5)*t,u=(this._anchorY-.5)*v;y.set(r,x,u);y.transformMat2d(r,r,h);this._offsetUpperLeft=m.i1616to32(16*r[0],16*r[1]);y.set(r,x+t,u);y.transformMat2d(r,r,h);this._offsetUpperRight=m.i1616to32(16*r[0],16*r[1]);y.set(r,x,u+v);y.transformMat2d(r,
r,h);this._offsetBottomLeft=m.i1616to32(16*r[0],16*r[1]);y.set(r,x+t,u+v);y.transformMat2d(r,r,h);this._offsetBottomRight=m.i1616to32(16*r[0],16*r[1])};a._writePlacedMarkers=function(h,r,t,v,x){if(x=e.CIMMarkerPlacementHelper.getPlacement(x,l.unwrap(this._markerPlacement),p.pt2px(1)))for(var u=k.create(),D=f.create(),B=0,A=x.next();null!=A;)-128<=A.tx&&640>=A.tx&&-128<=A.ty&&640>=A.ty&&(this._applyTransformation(D,u,A.getAngle()/q),this._writeVertices(h,v,this._getPos(A.tx,A.ty)),this._writeIndices(r,
t+B),B+=4),A=x.next()};a._getPos=function(h,r){return m.i1616to32(Math.round(8*h),Math.round(8*r))};a._writeVertices=function(h,r,t){h.push(t);h.push(this._offsetUpperLeft);h.push(this._texUpperLeft);h.push(this._bitestAndDistRatio);h.push(r);h.push(this._fillColor);h.push(this._outlineColor);h.push(this._sizeOutlineWidth);h.push(t);h.push(this._offsetUpperRight);h.push(this._texUpperRight);h.push(this._bitestAndDistRatio);h.push(r);h.push(this._fillColor);h.push(this._outlineColor);h.push(this._sizeOutlineWidth);
h.push(t);h.push(this._offsetBottomLeft);h.push(this._texBottomLeft);h.push(this._bitestAndDistRatio);h.push(r);h.push(this._fillColor);h.push(this._outlineColor);h.push(this._sizeOutlineWidth);h.push(t);h.push(this._offsetBottomRight);h.push(this._texBottomRight);h.push(this._bitestAndDistRatio);h.push(r);h.push(this._fillColor);h.push(this._outlineColor);h.push(this._sizeOutlineWidth)};a._writeIndices=function(h,r){h.push(r+0);h.push(r+1);h.push(r+2);h.push(r+1);h.push(r+3);h.push(r+2)};return b}(d)})},
"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../GeometryUtils ../../util/Result ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){return function(d){function g(b){var a=d.call(this,b)||this;if(c.isFunction(b.color))a._dynamicPropertyMap.set("_fillColor",
(u,D,B)=>(u=b.color(u,D,B))&&f.premultiplyAlphaRGBA(u)||0);else{const u=b.color;a.fillColor=u&&f.premultiplyAlphaRGBA(u)||0}let h=0;c.isFunction(b.height)||(h=b.height||0);a._dynamicPropertyMap.set("_height",(u,D,B)=>c.isFunction(b.height)?b.height(u,D,B):h);let r=0;c.isFunction(b.offsetX)||(r=p.pt2px(b.offsetX||0)+128,255<r&&(r=255));a._dynamicPropertyMap.set("_offsetX",(u,D,B)=>c.isFunction(b.offsetX)?(u=p.pt2px(b.offsetX(u,D,B))+128,255<u&&(u=255),u):r);let t=1;c.isFunction(b.scaleX)||(t=b.scaleX||
1);a._dynamicPropertyMap.set("_scaleX",(u,D,B)=>c.isFunction(b.scaleX)?b.scaleX(u,D,B):t);let v=0;c.isFunction(b.offsetY)||(v=p.pt2px(-b.offsetY||0)+128,255<v&&(v=255));a._dynamicPropertyMap.set("_offsetY",(u,D,B)=>c.isFunction(b.offsetY)?(u=p.pt2px(-b.offsetY(u,D,B))+128,255<u&&(u=255),u):v);let x=0;c.isFunction(b.angle)||(x=k.radToByte(b.angle)||0);a._dynamicPropertyMap.set("_angle",(u,D,B)=>c.isFunction(b.angle)?k.radToByte(b.angle(u,D,B)):x);a.effects=b.effects;a._cimFillLayer=b;a._fillMaterialKey=
w.FillMaterialKey.load(b.materialKey);return a}n._inheritsLoose(g,d);g.fromCIMFill=function(b){return new g(b)};g.prototype.bindFeature=function(b,a,h){const r=b.readLegacyFeature();this._dynamicPropertyMap.forEach((x,u)=>{this[u]=x(r,a,h)});b=this._fillMaterialKey;var t=this._materialCache,v=this._cimFillLayer;this.aux3=y.i8888to32(0,0,this._angle,v.colorLocked?1:0);v=v.materialHash;v=v(r,a,h);v=t.get(v);t=null;v&&m.ok(v.spriteMosaicItem)&&(t=v.spriteMosaicItem);if(t){const {rect:x,width:u,height:D}=
t;v=x.x+z.SPRITE_PADDING;const B=x.y+z.SPRITE_PADDING,A=v+u,C=B+D;let E=l.nextHighestPowerOfTwo(p.pt2px(this._height));255<E?E=255:0>=E&&(E=l.nextHighestPowerOfTwo(C-B));let F=l.nextHighestPowerOfTwo(p.pt2px(this._height/D*u||0));255<F?F=255:0>=F&&(F=l.nextHighestPowerOfTwo(A-v));const G=this._scaleX;this.tl=y.i1616to32(v,B);this.br=y.i1616to32(A,C);this.aux1=y.i8888to32(F,E,this._offsetX,this._offsetY);this.aux2=y.i1616to32(128*G,128);b.sdf=t.sdf;b.pattern=!0;b.textureBinding=t.textureBinding}else this.aux2=
this.aux1=this.br=this.tl=0,b.sdf=!1,b.pattern=!1,b.textureBinding=0;this._materialKey=b.data};return g}(e(q))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../layers/graphics/featureConversionUtils ../../number ../../enums ../../materialKey/MaterialKey ./templateUtils".split(" "),function(n,l,p,z,y,w){return f=>function(k){function m(...e){e=k.call(this,...e)||this;e.forceLibtess=!1;e.geometryType=
z.WGLGeometryType.FILL;return e}n._inheritsLoose(m,k);var c=m.prototype;c.writeMeshWithGeometry=function(e,q,d,g,b,a){g=y.FillMaterialKey.load(this._materialKey);const h=q.indexVector;q=q.getVector("geometry");const r=q.vertexCount,t=h.length;if(a=a?l.deltaDecodeGeometry(l.convertFromGeometry(a),2):d.readUnquantizedGeometry())if(a=w.clipMarshall(a)){var v=a.coords;if(this.forceLibtess||!w.triangulate(h,a,r))v=[],w.triangulateLibtess(v,h,a,r);this._write(q,d,b,v,g);e.writeDisplayRecord(this.geometryType,
this._materialKey,r,q.vertexCount-r,t,h.length-t)}};c._write=function(e,q,d,g,b){for(let a=0;a<g.length;a+=2){const h=p.i1616to32(1*g[a],1*g[a+1]);e.data.push(h);e.data.push(d);b.dotDensity?e.data.writeF32(1/Math.abs(q.readGeometryArea())):(e.data.push(this.fillColor),e.data.push(this.tl),e.data.push(this.br),e.data.push(this.aux1),e.data.push(this.aux2),e.data.push(this.aux3))}};return m}(f)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../layers/graphics/OptimizedGeometry ../../../../../../core/libs/earcut/earcut ../../definitions ../../TileClipper ../bufcut ../Tesselator".split(" "),
function(n,l,p,z,y,w,f){function k(d,g,b){let a=0;for(let h=1;h<b;h++)a+=(d[2*(g+h)]-d[2*(g+h-1)])*(d[2*(g+h)+1]+d[2*(g+h-1)+1]);return a}function m(d,g,b,a,h){let r=0;for(;b<a;b+=3){const t=2*(d.getValue(b)-h),v=2*(d.getValue(b+1)-h),x=2*(d.getValue(b+2)-h);r+=Math.abs((g[t]-g[x])*(g[v+1]-g[t+1])-(g[t]-g[v])*(g[x+1]-g[t+1]))}return r}function c(d,g,b,a,h,r,t,v){h=((d-h)*(r-v)-(g-v)*(h-t))/((d-b)*(r-v)-(g-a)*(h-t));return 0>h||1<h?null:{x:Math.round(d+h*(b-d)),y:Math.round(g+h*(a-g))}}const e=new f,
q=new y.TileClipper(0,0,0,1,128);q.setExtent(z.TILE_SIZE);n.area=k;n.clip=function(d,g,b=0){const a=-b;g+=b;let h=b=0,r=0;for(let v=0;v<d.lengths.length;v++){const x=d.lengths[v],u=r+x;let D=0,B=null;for(;b!==u;){let A=d.coords[2*b],C=d.coords[2*b++ +1],E=A<a||A>=g||C<a||C>=g;for(var t=E;b!==u&&E===t;)E||(d.coords[2*h]=A,d.coords[2*h++ +1]=C,D++),A=d.coords[2*b],C=d.coords[2*b++ +1],E=A<a||A>=g||C<a||C>=g;if(b===u){E?B&&(d.coords[2*h]=B.x,d.coords[2*h++ +1]=B.y,D++):(d.coords[2*h]=A,d.coords[2*h++ +
1]=C,D++);continue}t=d.coords[2*(b-2)];const F=d.coords[2*(b-2)+1];if(t=c(t,F,A,C,a,a,g,a)||c(t,F,A,C,g,a,g,g)||c(t,F,A,C,g,g,a,g)||c(t,F,A,C,a,a,a,g))d.coords[2*h]=t.x,d.coords[2*h++ +1]=t.y,D++,B||(B=t);E||(d.coords[2*h]=A,d.coords[2*h++ +1]=C,D++)}d.lengths[v]=D;r+=x}};n.clipMarshall=function(d){a:{var g=z.TILE_SIZE+128;var b=0;for(var a=0;a<d.lengths.length;a++){var h=d.lengths[a];for(var r=0;r<h;r++){var t=d.coords[2*(r+b)];const v=d.coords[2*(r+b)+1];if(-128>t||t>g||-128>v||v>g){g=!0;break a}}b+=
h}g=!1}if(!g)return d;q.reset(3);g=0;for(b=0;b<d.lengths.length;b++){a=d.lengths[b];h=d.coords[2*(0+g)];r=d.coords[2*(0+g)+1];q.moveTo(h,r);for(t=1;t<a;t++)h=d.coords[2*(t+g)],r=d.coords[2*(t+g)+1],q.lineTo(h,r);q.close();g+=a}b=q.result(!1);if(!b)return null;d=[];g=[];for(const v of b){b=0;for(const x of v)g.push(x.x),g.push(x.y),b++;d.push(b)}return new l(d,g)};n.triangleArea=m;n.triangulate=function(d,g,b){const {coords:a,lengths:h,hasIndeterminateRingOrder:r}=g;if(r)return!1;g=d.length;let t=
0;for(var v=0;v<h.length;){let D=v,B=h[v];v=k(a,t,B);for(var x=[];++D<h.length;){var u=h[D];const A=k(a,t+B,u);if(!(0<A))break;v+=A;x.push(t+B);B+=u}u=d.length;w.bufcut(d,a,t,t+B,x,2,b);x=m(d,a,u,d.length,b);v=Math.abs(v);if(1E-5<Math.abs((x-v)/Math.max(1E-7,v)))return d.seek(g),!1;v=D;t+=B}return!0};n.triangulateEarcut=function(d,g,b){const {coords:a,lengths:h,hasIndeterminateRingOrder:r}=g;if(r)return!1;let t=0;for(var v=0;v<h.length;){let u=v,D=h[v];for(v=[];++u<h.length;){var x=h[u];if(!(0<k(a,
t+D,x)))break;v.push(t+D-t);D+=x}x=g.coords.slice(2*t,2*(t+D));v=p.earcut(x,v,2);for(const B of v)d.push(B+b+t);v=u;t+=D}return!0};n.triangulateLibtess=function(d,g,b,a){const h=[],{coords:r,lengths:t}=b;e.beginPolygon(d,h);d=0;for(let v=0;v<t.length;v++){const x=b.lengths[v];e.beginContour();for(let u=0;u<x;u++){const D=[r[2*(d+u)],r[2*(d+u)+1],0];e.addVertex(D,D)}e.endContour();d+=x}e.endPolygon();for(b=0;b<h.length;b++)g.push(h[b]+a)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports"],
function(n){function l(u,D,B,A,C,E,F){let G;B=0;for(let J=A,K=C-E;J<C;J+=E)B+=(u[K+D*E]-u[J+D*E])*(u[J+1+D*E]+u[K+1+D*E]),K=J;if(F===0<B)for(;A<C;A+=E)G=w(A+D*E,u[A+D*E],u[A+1+D*E],G);else for(C-=E;C>=A;C-=E)G=w(C+D*E,u[C+D*E],u[C+1+D*E],G);G&&a(G,G.next)&&(f(G),G=G.next);return G}function p(u,D=u){if(!u)return u;let B;do if(B=!1,u.steiner||!a(u,u.next)&&0!==e(u.prev,u,u.next))u=u.next;else{f(u);u=D=u.prev;if(u===u.next)break;B=!0}while(B||u!==D);return D}function z(u,D,B,A,C,E,F,G){if(u){!G&&E&&
(u=c(u,A,C,E));for(var J=u;u.prev!==u.next;){var K=u.prev,L=u.next;if(E)var I=y(u,A,C,E);else a:{I=u;var N=I.prev,P=I;const R=I.next;if(0<=e(N,P,R)){I=!1;break a}let T=I.next.next;const W=T;let Z=0;for(;T!==I.prev&&(0===Z||T!==W);){Z++;if(d(N.x,N.y,P.x,P.y,R.x,R.y,T.x,T.y)&&0<=e(T.prev,T,T.next)){I=!1;break a}T=T.next}I=!0}if(I)D.push(K.index/B+F),D.push(u.index/B+F),D.push(L.index/B+F),f(u),J=u=L.next;else if(u=L,u===J){if(!G)z(p(u),D,B,A,C,E,F,1);else if(1===G){G=D;J=B;K=F;L=u;do I=L.prev,N=L.next.next,
!a(I,N)&&q(I,L,L.next,N)&&g(I,N)&&g(N,I)&&(G.push(I.index/J+K),G.push(L.index/J+K),G.push(N.index/J+K),f(L),f(L.next),L=u=N),L=L.next;while(L!==u);u=L;z(u,D,B,A,C,E,F,2)}else if(2===G)a:{G=u;do{for(J=G.next.next;J!==G.prev;){if(K=G.index!==J.index){I=I=I=void 0;K=G;L=J;if(I=K.next.index!==L.index&&K.prev.index!==L.index){b:{I=K;do{if(I.index!==K.index&&I.next.index!==K.index&&I.index!==L.index&&I.next.index!==L.index&&q(I,I.next,K,L)){I=!0;break b}I=I.next}while(I!==K);I=!1}I=!I}if(I=I&&g(K,L)&&g(L,
K)){I=K;N=!1;P=(K.x+L.x)/2;L=(K.y+L.y)/2;do I.y>L!==I.next.y>L&&I.next.y!==I.y&&P<(I.next.x-I.x)*(L-I.y)/(I.next.y-I.y)+I.x&&(N=!N),I=I.next;while(I!==K);I=N}K=I}if(K){u=r(G,J);G=p(G,G.next);u=p(u,u.next);z(G,D,B,A,C,E,F,0);z(u,D,B,A,C,E,F,0);break a}J=J.next}G=G.next}while(G!==u)}break}}}}function y(u,D,B,A){const C=u.prev,E=u.next;if(0<=e(C,u,E))return!1;const F=C.x>u.x?C.x>E.x?C.x:E.x:u.x>E.x?u.x:E.x,G=C.y>u.y?C.y>E.y?C.y:E.y:u.y>E.y?u.y:E.y,J=b(C.x<u.x?C.x<E.x?C.x:E.x:u.x<E.x?u.x:E.x,C.y<u.y?
C.y<E.y?C.y:E.y:u.y<E.y?u.y:E.y,D,B,A);D=b(F,G,D,B,A);B=u.prevZ;for(A=u.nextZ;B&&B.z>=J&&A&&A.z<=D;){if(B!==u.prev&&B!==u.next&&d(C.x,C.y,u.x,u.y,E.x,E.y,B.x,B.y)&&0<=e(B.prev,B,B.next))return!1;B=B.prevZ;if(A!==u.prev&&A!==u.next&&d(C.x,C.y,u.x,u.y,E.x,E.y,A.x,A.y)&&0<=e(A.prev,A,A.next))return!1;A=A.nextZ}for(;B&&B.z>=J;){if(B!==u.prev&&B!==u.next&&d(C.x,C.y,u.x,u.y,E.x,E.y,B.x,B.y)&&0<=e(B.prev,B,B.next))return!1;B=B.prevZ}for(;A&&A.z<=D;){if(A!==u.prev&&A!==u.next&&d(C.x,C.y,u.x,u.y,E.x,E.y,A.x,
A.y)&&0<=e(A.prev,A,A.next))return!1;A=A.nextZ}return!0}function w(u,D,B,A){u=t.create(u,D,B);A?(u.next=A.next,u.prev=A,A.next.prev=u,A.next=u):(u.prev=u,u.next=u);return u}function f(u){u.next.prev=u.prev;u.prev.next=u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function k(u){let D=u,B=u;do{if(D.x<B.x||D.x===B.x&&D.y<B.y)B=D;D=D.next}while(D!==u);return B}function m(u,D){let B=D;const A=u.x,C=u.y;let E=-Infinity,F;do{if(C<=B.y&&C>=B.next.y&&B.next.y!==B.y){var G=B.x+(C-
B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(G<=A&&G>E){E=G;if(G===A){if(C===B.y)return B;if(C===B.next.y)return B.next}F=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!F)return null;if(A===E)return F.prev;D=F;G=F.x;const J=F.y;let K=Infinity,L;for(B=F.next;B!==D;)A>=B.x&&B.x>=G&&A!==B.x&&d(C<J?A:E,C,G,J,C<J?E:A,C,B.x,B.y)&&(L=Math.abs(C-B.y)/(A-B.x),(L<K||L===K&&B.x>F.x)&&g(B,u)&&(F=B,K=L)),B=B.next;return F}function c(u,D,B,A){for(var C;C!==u;C=C.next){C=C||u;null===C.z&&(C.z=b(C.x,C.y,D,B,A));if(C.prev.next!==
C||C.next.prev!==C)return C.prev.next=C,C.next.prev=C,c(u,D,B,A);C.prevZ=C.prev;C.nextZ=C.next}u.prevZ.nextZ=null;u.prevZ=null;a:for(B=1;;){A=u;D=u=null;let E=0;for(;A;){E++;C=A;let F=0;for(;F<B&&C;F++)C=C.nextZ;let G=B;for(;0<F||0<G&&C;){let J;0===F?(J=C,C=C.nextZ,G--):0!==G&&C?A.z<=C.z?(J=A,A=A.nextZ,F--):(J=C,C=C.nextZ,G--):(J=A,A=A.nextZ,F--);D?D.nextZ=J:u=J;J.prevZ=D;D=J}A=C}D.nextZ=null;B*=2;if(2>E)break a}return u}function e(u,D,B){return(D.y-u.y)*(B.x-D.x)-(D.x-u.x)*(B.y-D.y)}function q(u,
D,B,A){return a(u,D)&&a(B,A)||a(u,A)&&a(B,D)?!0:0<e(u,D,B)!==0<e(u,D,A)&&0<e(B,A,u)!==0<e(B,A,D)}function d(u,D,B,A,C,E,F,G){return 0<=(C-F)*(D-G)-(u-F)*(E-G)&&0<=(u-F)*(A-G)-(B-F)*(D-G)&&0<=(B-F)*(E-G)-(C-F)*(A-G)}function g(u,D){return 0>e(u.prev,u,u.next)?0<=e(u,D,u.next)&&0<=e(u,u.prev,D):0>e(u,D,u.prev)||0>e(u,u.next,D)}function b(u,D,B,A,C){u=32767*(u-B)*C;D=32767*(D-A)*C;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;
return(u|u<<1)&1431655765|((D|D<<1)&1431655765)<<1}function a(u,D){return u.x===D.x&&u.y===D.y}function h(u,D){return u.x-D.x}function r(u,D){const B=t.create(u.index,u.x,u.y),A=t.create(D.index,D.x,D.y),C=u.next,E=D.prev;u.next=D;D.prev=u;B.next=C;C.prev=B;A.next=B;B.prev=A;E.next=A;A.prev=E;return A}let t=function(){function u(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}u.create=function(D,B,A){const C=v[x++];C.index=D;C.x=B;C.y=A;C.prev=null;
C.next=null;C.z=null;C.prevZ=null;C.nextZ=null;C.steiner=!1;return C};return u}();const v=[];let x=0;for(let u=0;8096>u;u++)v.push(new t);n.bufcut=function(u,D,B,A,C,E,F){x=0;var G=(A-B)*E,J=C&&C.length;const K=J?(C[0]-B)*E:G;var L=l(D,B,A,0,K,E,!0);if(L&&L.next!==L.prev){var I;if(J){J=[];for(let T=0,W=C.length;T<W;T++){const Z=l(D,B,A,C[T]*E,T<W-1?C[T+1]*E:A*E,E,!1);Z===Z.next&&(Z.steiner=!0);J.push(k(Z))}J.sort(h);for(var N of J){A=N;C=L;if(C=m(A,C))A=r(C,A),p(A,A.next);L=p(L,L.next)}}if(G>80*E){var P=
G=D[B*E];var R=I=D[1+B*E];for(N=E;N<K;N+=E)A=D[N+B*E],C=D[N+1+B*E],P=Math.min(P,A),R=Math.min(R,C),G=Math.max(G,A),I=Math.max(I,C);I=Math.max(G-P,I-R);I=0!==I?1/I:0}z(L,u,E,P,R,I,F,0)}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../core/promiseUtils","../../../../../../symbols/cim/cimAnalyzer","./WGLMeshTemplate"],
function(n,l,p,z,y){const w=l.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(f){function k(m){var c=f.call(this)||this;c._ongoingMaterialRequestMap=new Map;c._materialCache=new Map;c._dynamicPropertyMap=new Map;c._cimLayer=m;return c}n._inheritsLoose(k,f);k.prototype.analyze=function(m,c,e,q){c=c.readLegacyFeature();const d=this._materialCache,g=this._cimLayer.materialHash;if(!g)return w.error("A Dynamic mesh template must have a material hash value or function!"),
p.reject(null);const b="function"===typeof g?g(c,e,q):g;if(d.has(b))return m=d.get(b),p.resolve(m);if(this._ongoingMaterialRequestMap.has(b))return this._ongoingMaterialRequestMap.get(b);e=z.analyzeCIMResource(this._cimLayer.cim,this._cimLayer.materialOverrides);e.mosaicHash=b;m=m.getMosaicItem(e).then(a=>{this._ongoingMaterialRequestMap.delete(b);d.set(b,a);return a}).catch(a=>{this._ongoingMaterialRequestMap.delete(b);w.error(".analyze()",a.message);return null});this._ongoingMaterialRequestMap.set(b,
m);return m};return k}(y)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../util/Result ./util ./WGLDynamicMeshTemplate ./WGLBaseLineTemplate".split(" "),function(n,l,p,z,y,w,f,k,m,c){return function(e){function q(d){var g=e.call(this,d)||this;g._cimLineLayer=d;let b=0;k.isFunction(d.width)||(b=.5*
l.pt2px(d.width));g._dynamicPropertyMap.set("_halfWidth",(a,h,r)=>k.isFunction(d.width)?.5*l.pt2px(d.width(a,h,r)):b);k.isFunction(d.cap)?g._dynamicPropertyMap.set("_capType",d.cap):g._capType=d.cap;k.isFunction(d.join)?g._dynamicPropertyMap.set("_joinType",d.join):g._joinType=d.join;if(k.isFunction(d.color))g._dynamicPropertyMap.set("_fillColor",(a,h,r)=>(a=d.color(a,h,r))&&w.premultiplyAlphaRGBA(a)||0);else{const a=d.color;g._fillColor=a&&w.premultiplyAlphaRGBA(a)||0}k.isFunction(d.miterLimit)?
g._dynamicPropertyMap.set("_miterLimitCosine",(a,h,r)=>k.getLimitCosine(d.miterLimit(a,h,r))):g._miterLimitCosine=k.getLimitCosine(d.miterLimit);g._scaleFactor=d.scaleFactor||1;g._isDashed=d.isDashed;g.effects=d.effects;g.tessellationProperties._bitset=d.colorLocked?1:0;g._materialKey=d.materialKey;g._initializeTessellator(!0);return g}n._inheritsLoose(q,e);q.fromCIMLine=function(d){return new q(d)};q.prototype.bindFeature=function(d,g,b){const a=d.readLegacyFeature();this._dynamicPropertyMap.forEach((r,
t)=>{this[t]=r(a,g,b)});this._halfWidth*=this._scaleFactor;d=this._materialCache;var h=this._cimLineLayer.materialHash;h=h(a,g,b);h=d.get(h);d=null;h&&f.ok(h.spriteMosaicItem)&&(d=h.spriteMosaicItem);if(d){this._hasPattern=!0;const {rect:r,width:t,height:v}=d;h=r.x+p.SPRITE_PADDING;const x=r.y+p.SPRITE_PADDING,u=h+t,D=x+v;this.tessellationProperties._tl=z.i1616to32(h,x);this.tessellationProperties._br=z.i1616to32(u,D)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=
0;this.tessellationProperties._fillColor=this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;h=y.LineMaterialKey.load(this._materialKey);d&&(h.sdf=d.sdf,h.pattern=!0,h.textureBinding=d.textureBinding);this._materialKey=h.data};return q}(c(m))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../definitions ../../number ../../enums ../../materialKey/MaterialKey ../../TileClipper ../../TurboLine".split(" "),
function(n,l,p,z,y,w,f,k){const m=p.TILE_SIZE+16,c=1/3.8,e=new f.TileClipper(0,0,0,1,16);e.setExtent(p.TILE_SIZE);const q=new Uint32Array(9),d=new Uint32Array(36),g=new Uint32Array(3),b=new Uint32Array(6),a=v=>x=>{var u=Math.ceil(1024*v._halfWidth);const D=Math.ceil(1024*v._halfReferenceWidth);x.entry0=v.offset+v.vertexCount++;var B=z.i1616to32(x.distance,u),A=z.i8888to32(Math.round(31*x.prevNormal.x),Math.round(31*x.prevNormal.y),0,-31),C=z.i8888to32(0,0,0,v._bitset);d[0]=z.i1616to32(8*x.currentVertex.x,
8*x.currentVertex.y);d[1]=v.id;d[2]=v._fillColor;d[3]=A;d[4]=B;d[5]=v._tl;d[6]=v._br;d[7]=C;d[8]=z.i1616to32(D,0);x.entry2=v.offset+v.vertexCount++;B=z.i1616to32(x.distance,u);A=z.i8888to32(Math.round(31*-x.prevNormal.x),Math.round(31*-x.prevNormal.y),0,31);C=z.i8888to32(0,0,0,v._bitset);d[9]=z.i1616to32(8*x.currentVertex.x,8*x.currentVertex.y);d[10]=v.id;d[11]=v._fillColor;d[12]=A;d[13]=B;d[14]=v._tl;d[15]=v._br;d[16]=C;d[17]=z.i1616to32(D,0);x.exit0=v.offset+v.vertexCount++;B=z.i1616to32(x.distance,
u);A=z.i8888to32(Math.round(31*x.nextNormal.x),Math.round(31*x.nextNormal.y),0,-31);C=z.i8888to32(0,0,0,v._bitset);d[18]=z.i1616to32(8*x.currentVertex.x,8*x.currentVertex.y);d[19]=v.id;d[20]=v._fillColor;d[21]=A;d[22]=B;d[23]=v._tl;d[24]=v._br;d[25]=C;d[26]=z.i1616to32(D,0);x.exit2=v.offset+v.vertexCount++;u=z.i1616to32(x.distance,u);B=z.i8888to32(Math.round(31*-x.nextNormal.x),Math.round(31*-x.nextNormal.y),0,31);A=z.i8888to32(0,0,0,v._bitset);d[27]=z.i1616to32(8*x.currentVertex.x,8*x.currentVertex.y);
d[28]=v.id;d[29]=v._fillColor;d[30]=B;d[31]=u;d[32]=v._tl;d[33]=v._br;d[34]=A;d[35]=z.i1616to32(D,0);v.geometryBuf.writeRegion(d)},h=v=>x=>{b[0]=x.leftExit0;b[1]=x.rightEntry0;b[2]=x.leftExit2;b[3]=x.rightEntry0;b[4]=x.rightEntry2;b[5]=x.leftExit2;v.indexCount+=6;v.indexBuf.writeRegion(b)},r=v=>(x,u,D,B,A,C,E,F,G)=>{G=z.i1616to32(G,Math.ceil(1024*v._halfWidth));A=z.i8888to32(Math.round(31*A),Math.round(31*C),Math.round(31*E),Math.round(31*F));D=z.i8888to32(31*D,31*B,0,v._bitset);q[0]=z.i1616to32(8*
x,8*u);q[1]=v.id;q[2]=v._fillColor;q[3]=A;q[4]=G;q[5]=v._tl;q[6]=v._br;q[7]=D;q[8]=z.i1616to32(Math.ceil(1024*v._halfReferenceWidth),0);v.geometryBuf.writeRegion(q);return v.offset+v.vertexCount++},t=v=>(x,u,D)=>{g[0]=x;g[1]=u;g[2]=D;v.indexCount+=3;v.indexBuf.writeRegion(g)};return v=>function(x){function u(...B){B=x.call(this,...B)||this;B.tessellationProperties={_fillColor:null,_tl:null,_br:null,_halfWidth:null,_bitset:null,_halfReferenceWidth:null,id:null,indexBuf:null,indexCount:null,geometryBuf:null,
vertexCount:null,offset:null};B._tessellationOptions={};B.geometryType=y.WGLGeometryType.LINE;return B}n._inheritsLoose(u,x);var D=u.prototype;D.writeMeshWithGeometry=function(B,A,C,E,F,G){const J=A.indexVector,K=A.get("geometry");A=A.getVector("geometry").vertexCount;const L=J.length;if(C=null!=G?G:C.readLegacyGeometry()){switch(E){case "esriGeometryPolyline":E=this._clipLines(C.paths);if(0===E.length)return;this._write(J,K,A,F,E);break;case "esriGeometryPolygon":E=this._clipLines(C.rings);if(0===
E.length)return;this._write(J,K,A,F,E)}B.writeDisplayRecord(this.geometryType,this._materialKey,A,this.tessellationProperties.vertexCount,L,this.tessellationProperties.indexCount)}};D._clipLines=function(B){const A=[];var C=!1;let E=0;for(;E<B.length;){const F=[],G=B[E];e.reset(2);let [J,K]=G[0];if(C)e.moveTo(J,K);else{if(-16>J||J>m||-16>K||K>m){C=!0;continue}F.push({x:J,y:K})}let L=!1;const I=G.length;for(let N=1;N<I;++N)if(J+=G[N][0],K+=G[N][1],C)e.lineTo(J,K);else{if(-16>J||J>m||-16>K||K>m){L=
!0;break}F.push({x:J,y:K})}if(L)C=!0;else{if(C){if(C=e.resultWithStarts())for(const N of C)A.push(N)}else A.push({line:F,start:0});E++;C=!1}}return A};D._write=function(B,A,C,E,F){this.tessellationProperties.id=E;this.tessellationProperties.indexBuf=B;this.tessellationProperties.indexCount=0;this.tessellationProperties.geometryBuf=A;this.tessellationProperties.vertexCount=0;this.tessellationProperties.offset=C;for(const G of F)B=G.line,2>B.length||(this._tessellationOptions.initialDistance=G.start%
65535,this._tessellationCallbacks instanceof k.StandardTessellationCallbacks&&(this._tessellationCallbacks.capType=this._capType,this._tessellationCallbacks.joinType=this._joinType),k.tessellate(B,this._tessellationOptions,this._tessellationCallbacks),k.cleanup())};D._initializeTessellator=function(B){const A=w.LineMaterialKey.load(this._materialKey);this._tessellationOptions.trackDistance=this._isDashed||this._hasPattern;this._tessellationOptions.thin=!B&&this.tessellationProperties._halfWidth<p.THIN_LINE_THRESHOLD/
2&&!(A.vvSizeFieldStops||A.vvSizeMinMaxValue||A.vvSizeScaleStops||A.vvSizeUnitValue);this._tessellationOptions.wrapDistance=65535;this._tessellationOptions.outerBisectorAutoSplitThreshold=c;this._tessellationOptions.enableOuterBisectorSplit=this._isDashed||this._hasPattern;this._tessellationOptions.innerBisectorAutoSplitThreshold=c;this._tessellationOptions.enableInnerBisectorSplit=this._isDashed||this._hasPattern;this._tessellationOptions.thin?this._tessellationCallbacks={vertex:a(this.tessellationProperties),
bridge:h(this.tessellationProperties)}:(B=new k.StandardTessellationCallbacks(r(this.tessellationProperties),t(this.tessellationProperties)),B.miterLimitCosine=this._miterLimitCosine,B.textured=this._isDashed||this._hasPattern,B.joinOnUTurn=this._joinOnUTurn,this._tessellationCallbacks=B)};return u}(v)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/screenUtils ../../definitions ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../materialKey/MaterialKey ../../color ../../util/Result ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b){const a=k.create(),h=f.create(),r=p.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");return function(t){function v(x){var u=t.call(this,x)||this;u._cimMarkerLayer=x;d.isFunction(x.color)?u._dynamicPropertyMap.set("_fillColor",(D,B,A)=>e.premultiplyAlphaRGBA(x.color(D,B,A))):u._fillColor=e.premultiplyAlphaRGBA(x.color);d.isFunction(x.outlineColor)?u._dynamicPropertyMap.set("_outlineColor",(D,B,A)=>e.premultiplyAlphaRGBA(x.outlineColor(D,B,A))):
u._outlineColor=e.premultiplyAlphaRGBA(x.outlineColor);d.isFunction(x.size)?u._dynamicPropertyMap.set("_size",(D,B,A)=>y.pt2px(x.size(D,B,A))):u._size=y.pt2px(x.size);d.isFunction(x.scaleX)?u._dynamicPropertyMap.set("_scaleX",x.scaleX):u._scaleX=x.scaleX;d.isFunction(x.offsetX)?u._dynamicPropertyMap.set("xOffset",(D,B,A)=>y.pt2px(x.offsetX(D,B,A))):u.xOffset=y.pt2px(x.offsetX);d.isFunction(x.offsetY)?u._dynamicPropertyMap.set("yOffset",(D,B,A)=>y.pt2px(x.offsetY(D,B,A))):u.yOffset=y.pt2px(x.offsetY);
d.isFunction(x.outlineWidth)?u._dynamicPropertyMap.set("_outlineWidth",(D,B,A)=>y.pt2px(x.outlineWidth(D,B,A))):u._outlineWidth=y.pt2px(x.outlineWidth);d.isFunction(x.rotation)?u._dynamicPropertyMap.set("_angle",x.rotation):u._angle=x.rotation;u._scaleFactor=l.unwrapOr(x.scaleFactor,1);u._markerPlacement=x.markerPlacement;u.effects=x.effects;u._bitSet=(1===x.alignment?1:0)|(x.colorLocked?1:0)<<1|(x.scaleSymbolsProportionally?1:0)<<3;u._materialKey=x.materialKey;return u}n._inheritsLoose(v,t);v.fromCIMMarker=
function(x){return new v(x)};v.prototype.bindFeature=function(x,u,D){const B=x.readLegacyFeature();this._dynamicPropertyMap.forEach((T,W)=>{this[W]=T(B,u,D)});x=this._cimMarkerLayer.materialHash;x="function"===typeof x?x(B,u,D):x;if((x=this._materialCache.get(x))&&q.ok(x.spriteMosaicItem)&&x.spriteMosaicItem){x=x.spriteMosaicItem;var A=this._cimMarkerLayer.sizeRatio,C=x.width/x.height*this._scaleX,E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,F=this._size,G=F*C,J=this.xOffset,K=
this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var L=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/y.pt2px(this._cimMarkerLayer.frameHeight):1,I=this._outlineWidth*L,N=y.pt2px(this._cimMarkerLayer.referenceSize),P=L=0,R=this._cimMarkerLayer.anchorPoint;R&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(L=-R.x/(this._size*C),P=R.y/this._size):(L=R.x,P=R.y));this._sizeOutlineWidth=m.i8888to32(Math.round(Math.min(Math.sqrt(128*
G),255)),Math.round(Math.min(Math.sqrt(128*F),255)),Math.round(Math.min(Math.sqrt(128*I),255)),Math.round(Math.min(Math.sqrt(128*N),255)));this.angle=E;this._bitestAndDistRatio=m.i8888to32(0,0,this._bitSet,Math.round(Math.min(64*A,255)));C=x.rect.x+w.SPRITE_PADDING;E=x.rect.y+w.SPRITE_PADDING;I=C+x.width;N=E+x.height;this._texUpperLeft=m.i1616to32(C,E);this._texUpperRight=m.i1616to32(I,E);this._texBottomLeft=m.i1616to32(C,N);this._texBottomRight=m.i1616to32(I,N);C=c.MarkerMaterialKey.load(this._materialKey);
C.sdf=x.sdf;C.pattern=!0;C.textureBinding=x.textureBinding;this._materialKey=C.data;this._anchorX=.5-(.5+L)*x.width/x.width;this._anchorY=.5-(.5+P)*x.height/x.height;G=G*A*this._scaleFactor;F=F*A*this._scaleFactor;G*=x.rect.width/x.width;F*=x.rect.height/x.height;this._computedWidth=G;this._computedHeight=F;this._applyTransformation(h,a);this.xOffset=J;this.yOffset=K}else r.error(new z("mapview-cim","Encountered an error when binding feature"))};return v}(g(b))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../materialKey/MaterialKey ../../color ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),
function(n,l,p,z,y,w,f,k,m){return function(c){function e(d){var g=c.call(this,d)||this;g._horizontalAlignment="center";g._verticalAlignment="middle";g._textToGlyphs=new Map;var b=d.scaleFactor||1;g._cimTextLayer=d;w.isFunction(d.color)?g._dynamicPropertyMap.set("_color",(t,v,x)=>y.premultiplyAlphaRGBA(d.color(t,v,x))):g._color=y.premultiplyAlphaRGBA(d.color);w.isFunction(d.color)?g._dynamicPropertyMap.set("_haloColor",(t,v,x)=>y.premultiplyAlphaRGBA(d.outlineColor(t,v,x))):g._haloColor=y.premultiplyAlphaRGBA(d.outlineColor);
let a;w.isFunction(d.size)||(a=Math.min(Math.round(l.pt2px(d.size*d.sizeRatio)),127));g._dynamicPropertyMap.set("_size",(t,v,x)=>w.isFunction(d.size)?Math.min(Math.round(l.pt2px(d.size(t,v,x)*d.sizeRatio)),127):a);w.isFunction(d.outlineSize)?g._dynamicPropertyMap.set("_haloSize",(t,v,x)=>Math.min(Math.floor(5*l.pt2px(d.outlineSize(t,v,x)*d.sizeRatio)),127)):g._haloSize=Math.min(Math.floor(5*l.pt2px(d.outlineSize*d.sizeRatio)),127);let h;w.isFunction(d.offsetX)||(h=Math.round(l.pt2px(d.offsetX*d.sizeRatio)));
g._dynamicPropertyMap.set("_xOffset",(t,v,x)=>w.isFunction(d.offsetX)?Math.round(l.pt2px(d.offsetX(t,v,x)*d.sizeRatio)):h);let r;w.isFunction(d.offsetY)||(r=Math.round(l.pt2px(d.offsetY*d.sizeRatio)));g._dynamicPropertyMap.set("_yOffset",(t,v,x)=>w.isFunction(d.offsetY)?Math.round(l.pt2px(d.offsetY(t,v,x)*d.sizeRatio)):r);w.isFunction(d.angle)?g._dynamicPropertyMap.set("_angle",d.angle):g._angle=d.angle;w.isFunction(d.horizontalAlignment)?g._dynamicPropertyMap.set("_horizontalAlignment",d.horizontalAlignment):
g._horizontalAlignment=d.horizontalAlignment;w.isFunction(d.verticalAlignment)?g._dynamicPropertyMap.set("_verticalAlignment",d.verticalAlignment):g._verticalAlignment=d.verticalAlignment;g._scaleFactor=b;w.isFunction(d.text)?g._dynamicPropertyMap.set("_text",d.text):g._text=d.text;b=Math.min(Math.round(l.pt2px(d.referenceSize*d.sizeRatio)),127);g._referenceSize=Math.round(Math.sqrt(256*b));g._materialKey=d.materialKey;b=z.TextMaterialKey.load(g._materialKey);b.sdf=!0;g._bitset=(1===d.alignment?1:
0)|(d.colorLocked?1:0)<<1;g._materialKey=b.data;g._decoration="none";g._lineHeight=1;g._lineWidth=512;g._textPlacement=d.markerPlacement;g.effects=d.effects;g._isCIM=!0;return g}n._inheritsLoose(e,c);e.fromCIMText=function(d){return new e(d)};var q=e.prototype;q.analyze=async function(d,g,b,a){g=g.readLegacyFeature();var h=this._cimTextLayer;b="string"===typeof h.text?h.text:"function"===typeof h.text?h.text(g,b,a):"";d=await d.getMosaicItem(this._cimTextLayer.cim,m.codepoints(b));this._textToGlyphs.set(b,
d.glyphMosaicItems);return d};q.bindFeature=function(d,g,b){const a=d.readLegacyFeature();this._dynamicPropertyMap.forEach((h,r)=>{this[r]=h(a,g,b)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=p.getXAnchorDirection(this._horizontalAlignment||"center"),this._yAlignD=p.getYAnchorDirection(this._verticalAlignment||"baseline"),d=this._textToGlyphs.get(this._text),this.bindTextInfo(d,
!1)):this._shapingInfo=null};return e}(f(k))})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../GeometryUtils ./WGLMeshTemplate ./WGLBaseFillTemplate".split(" "),function(n,l,p,z,y,w,f,k,m,c){return function(e){function q(d,g,b,a,h,r,t,v,x){var u=e.call(this)||this;u.effects=
x;d=w.FillMaterialKey.load(d);g&&(d.sdf=g.sdf,d.pattern=!0,d.textureBinding=g.textureBinding);u.fillColor=b;u.tl=a;u.br=h;u.aux1=r;u.aux2=t;u.aux3=v;u._materialKey=d.data;return u}n._inheritsLoose(q,e);q.fromCIMFill=function(d,g){var b=d.color;b=b&&f.premultiplyAlphaRGBA(b)||0;const a=d.materialKey;if(!g)return g=y.i8888to32(0,0,0,d.colorLocked?1:0),new q(a,null,b,0,0,0,0,g,d.effects);const {rect:h,width:r,height:t}=g;var v=h.x+z.SPRITE_PADDING;const x=h.y+z.SPRITE_PADDING;var u=v+r;const D=x+t;var B=
l.nextHighestPowerOfTwo(p.pt2px(d.height||0));255<B?B=255:0>=B&&(B=l.nextHighestPowerOfTwo(D-x));var A=l.nextHighestPowerOfTwo(p.pt2px(d.height/t*r||0));255<A?A=255:0>=A&&(A=l.nextHighestPowerOfTwo(u-v));let C=p.pt2px(d.offsetX||0)+128;255<C&&(C=255);let E=p.pt2px(-d.offsetY||0)+128;255<E&&(E=255);var F=d.scaleX||1;v=y.i1616to32(v,x);u=y.i1616to32(u,D);B=y.i8888to32(A,B,C,E);F=y.i1616to32(128*F,128);A=y.i8888to32(0,0,k.degToByte(d.angle),d.colorLocked?1:0);return new q(a,g,b,v,u,B,F,A,d.effects)};
q.fromSimpleFill=function(d,g,b=!1){var {color:a}=d;a=a&&"esriSFSNull"!==d.style&&f.premultiplyAlphaRGBAArray(a)||0;b=y.i8888to32(0,0,0,b?255:0);d=d.materialKey;if(!g)return new q(d,null,a,0,0,0,0,b,null);const {rect:h,width:r,height:t}=g;var v=h.x+z.SPRITE_PADDING,x=h.y+z.SPRITE_PADDING;const u=v+r,D=x+t,B=y.i1616to32(v,x),A=y.i1616to32(u,D);v=y.i8888to32(l.nextHighestPowerOfTwo(u-v),l.nextHighestPowerOfTwo(D-x),0,0);x=y.i1616to32(128,128);return new q(d,g,a,B,A,v,x,b,null)};q.fromPictureFill=function(d,
g,b=!1){const a=z.PICTURE_FILL_COLOR,{rect:h,width:r,height:t}=g;var v=h.x+z.SPRITE_PADDING,x=h.y+z.SPRITE_PADDING,u=v+r,D=x+t;v=y.i1616to32(v,x);u=y.i1616to32(u,D);D=l.nextHighestPowerOfTwo(p.pt2px(d.width));255<D&&(D=255);x=l.nextHighestPowerOfTwo(p.pt2px(d.height));255<x&&(x=255);let B=p.pt2px(d.xoffset)+128;255<B&&(B=255);let A=p.pt2px(-d.yoffset)+128;255<A&&(A=255);D=y.i8888to32(D,x,B,A);x=y.i1616to32(128*d.xscale,128*d.yscale);b=y.i8888to32(0,0,0,b?255:0);return new q(d.materialKey,g,a,v,u,
D,x,b,null)};return q}(c(m))})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../Utils ./util ./WGLMeshTemplate ./WGLBaseLineTemplate".split(" "),function(n,l,p,z,y,w,f,k,m,c,e){const q=l.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(d){function g(b,
a,h,r,t,v,x,u,D,B,A,C,E,F,G,J){var K=d.call(this)||this;b=w.LineMaterialKey.load(b);a&&(b.sdf=a.sdf,b.pattern=!0,b.textureBinding=a.textureBinding);K._capType=r;K._joinType=t;K._miterLimitCosine=m.getLimitCosine(v);K.tessellationProperties._fillColor=x;K.tessellationProperties._tl=u;K.tessellationProperties._br=D;K._hasPattern=B;K._isDashed=A;K._joinOnUTurn=G;K._isColorLocked=C;K._zOrder=F;K.effects=J;K._materialKey=b.data;K.tessellationProperties._bitset=C?1:0;K.tessellationProperties._halfWidth=
.5*h;K.tessellationProperties._halfReferenceWidth=.5*E;K._initializeTessellator(!1);return K}n._inheritsLoose(g,d);g.fromCIMLine=function(b,a,h){var r=b.color,t=b.scaleFactor||1;const v=b.isDashed;let x=b.cap;v&&1===x&&(x=2);const u=b.join;t*=p.pt2px(b.width);const D=p.pt2px(b.referenceWidth),B=p.pt2px(b.miterLimit);r=r&&f.premultiplyAlphaRGBA(r)||0;if(!a)return new g(b.materialKey,a,t,x,u,B,r,0,0,!1,v,b.colorLocked,D,b.zOrder,h,b.effects);const {rect:A,width:C,height:E}=a;var F=A.x+z.SPRITE_PADDING;
const G=A.y+z.SPRITE_PADDING;var J=F+C;const K=G+E;F=y.i1616to32(F,G);J=y.i1616to32(J,K);return new g(b.materialKey,a,t,x,u,B,r,F,J,!0,v,b.colorLocked,D,b.zOrder,h,b.effects)};g.fromSimpleLine=function(b,a,h){var {color:r}=b;const t="esriSLSSolid"!==b.style&&"esriSLSNull"!==b.style,v=k.getCapType(b.cap||"round",t),x=k.getJoinType(b.join||"round");r=r&&"esriSLSNull"!==b.style&&f.premultiplyAlphaRGBAArray(r)||0;"esriSLSNull"===b.style&&(r=0);const u=p.pt2px(b.width),D=b.miterLimit;if(!a)return new g(b.materialKey,
a,u,v,x,D,r,0,0,!1,t,!1,u,0,h,null);const {rect:B,width:A,height:C}=a;var E=B.x+z.SPRITE_PADDING;const F=B.y+z.SPRITE_PADDING;var G=E+A;const J=F+C;E=y.i1616to32(E,F);G=y.i1616to32(G,J);return new g(b.materialKey,a,u,v,x,D,r,E,G,!0,t,!1,u,0,h,null)};g.fromPictureLineSymbol=function(b,a,h,r){q.error("PictureLineSymbol support does not exist!");return null};return g}(e(c))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports","../../../../../core/promiseUtils"],function(n,l){let p=
function(){function z(){this._resolver=null}var y=z.prototype;y.isHeld=function(){return!!this._resolver};y.acquire=function(){return this._resolver?this._resolver.promise.then(()=>this.acquire()):(this._resolver=l.createResolver(),l.resolve())};y.release=function(){const w=this._resolver;this._resolver=null;w.resolve()};return z}();n.default=p;n.withLock=function(z,y,w){return z.acquire().then(()=>y(w)).then(()=>z.release()).catch(f=>{z.release();throw f;})};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/promiseUtils ../../definitions ../../enums ../MeshData ../VertexVector ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore".split(" "),function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(){function d(b,a,h){this._isDD=!1;this._geometryType=
b;this._idField=a;this._templateStore=h}var g=d.prototype;g.update=function(b,a){this._isDD="simple"===b.mesh.matcher.type&&b.mesh.matcher.isDotDensity;z.isSome(b.mesh.labels)&&this._setLabelTemplates(b.mesh.labels,a)};g._setLabelTemplates=function(b,a){this._labelTemplates=b.map(h=>c.fromLabelClass(h,a))};g.createMeshData=function(b){const a=Array(5),h=this._labelTemplates&&0<this._labelTemplates.length,r="esriGeometryPolyline"===this._geometryType?w.HEURISTIC_GLYPHS_PER_LINE:w.HEURISTIC_GLYPHS_PER_FEATURE;
a[f.WGLGeometryType.MARKER]=new m.VertexVectors(f.WGLGeometryType.MARKER,4*b);a[f.WGLGeometryType.FILL]=new m.VertexVectors(f.WGLGeometryType.FILL,b,this._isDD);a[f.WGLGeometryType.LINE]=new m.VertexVectors(f.WGLGeometryType.LINE,b);a[f.WGLGeometryType.TEXT]=new m.VertexVectors(f.WGLGeometryType.TEXT,4*b);a[f.WGLGeometryType.LABEL]=new m.VertexVectors(f.WGLGeometryType.LABEL,h?4*r:0);return new k.MeshData(a,{features:b,records:b,metrics:0})};g.analyze=async function(b,a,h,r,t){if(!y.isAborted(t)){var v;
"dictionary"===a.type&&(v=await a.analyze(this._idField,b.copy(),h,r,t));for(var x=0;b.next();){var u=void 0;u=v?v[x++]:a.match(this._idField,b,this._geometryType,h,r);b.setGroupId(u);if(q.isDynamicId(u)){u=this._templateStore.getDynamicTemplateGroup(u);for(const D of u)D&&D.analyze&&D.analyze(this._templateStore,b,h,r)}}return this._templateStore.finalize(t)}};g.analyzeGraphics=async function(b,a,h,r,t){if(!y.isAborted(t)){b=b.getCursor();for(a&&await a.analyze(this._idField,b.copy(),h,r,t);b.next();){let v=
b.getGroupId();if(null==v||-1===v)v=a.match(this._idField,b,b.geometryType,h,r),b.setGroupId(v);if(q.isDynamicId(v)){const x=this._templateStore.getDynamicTemplateGroup(v);for(const u of x)u&&u.analyze&&u.analyze(this._templateStore,b,h,r)}b.setGroupId(v)}return this._templateStore.finalize(t)}};g.writeGraphic=function(b,a){var h=a.getGroupId();const r=a.getDisplayId(),t=this._templateStore.getTemplateGroup(h),v=a.geometryType;if(null!=r){if(q.isDynamicId(h))for(const x of t)x.bindFeature(a,null,
null);if(t){b.writeDisplayObject(r,a.readGraphic().insertAfter);for(const x of t)x&&(h=b.get(x.geometryType),x.writeMesh(b,h,a,v,r))}}};g.writeCursor=function(b,a,h,r,t,v){const x=a.getGroupId(),u=a.getDisplayId();var D=this._templateStore.getTemplateGroup(x);if(null!=u&&D){b.writeDisplayObject(u,0);if(q.isDynamicId(x))for(const A of D)A.bindFeature(a,h,r);for(var B of D)h=b.get(B.geometryType),!B.needsPixelBuffer&&a.hasFilter()||B.writeMesh(b,h,a,this._geometryType,u);B=b.hasDisplayRecords();z.isSome(v)&&
B&&(D=v&&this._findLabelRef(D),this._writeLabels(b,a,u,v,D,t));b.endDisplayObject()}};g._findLabelRef=function(b){for(const a of b)if(a instanceof e)return a;return null};g._writeLabels=function(b,a,h,r,t,v){for(const x of r)if(z.isSome(x)&&x){const {glyphs:u,rtl:D,index:B}=x;r=this._labelTemplates[B];const A=b.get(r.geometryType);r.bindReferenceTemplate(t);r.bindTextInfo(u,D);r.writeMesh(b,A,a,this._geometryType,h,v)}};l._createClass(d,[{key:"templates",get:function(){return this._templateStore}}]);
return d}();n.WGLMeshFactory=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../WGLDisplayRecord ../util/serializationUtils ../collisions/Metric ../WGLDisplayObject ../util/Reader ../util/Writer".split(" "),function(n,l,p,z,y,w,f,k){let m=function(){function c(q,d){this.vertexVectorsMap=q;this._currentIndex=-1;this._currentMetricOffset=this._currentRecordOffset=0;this._currentMetrics=
[];q=4*(8*d.records+1);const g=4*(20*d.metrics+1);this._bufDisplayObjects=new k(Uint32Array,4*(4*d.features+1)+4);this._bufDisplayRecords=new k(Uint32Array,q+4);this._bufMetrics=new k(Uint32Array,g+4);this._bufDisplayObjects.push(0);this._bufDisplayRecords.push(0);this._bufMetrics.push(0)}var e=c.prototype;e.get=function(q){return this.vertexVectorsMap[q]};e.currentDisplayRecordCount=function(){return this._bufDisplayRecords[this._currentRecordOffset]};e.writeDisplayObject=function(q,d){this._bufDisplayObjects.incr(0);
this._currentIndex=this._bufDisplayObjects.push(q);this._bufDisplayObjects.push(d);this._bufDisplayObjects.push(0);this._bufDisplayObjects.push(0);this._currentMetricOffset=this._currentRecordOffset=0;this._currentMetrics=[]};e.hasDisplayRecords=function(){return 0!==this._currentRecordOffset};e.endDisplayObject=function(){this.hasDisplayRecords()?this._currentMetrics&&(0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=
this._bufMetrics.length),z.serializeList(this._bufMetrics,this._currentMetrics)):this._rollbackDisplayObject()};e.writeDisplayRecord=function(q,d,g,b,a,h,r=0,t=0){0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset));this._bufDisplayRecords.incr(this._currentRecordOffset);this._bufDisplayRecords.push(q);this._bufDisplayRecords.push(d);this._bufDisplayRecords.push(g);this._bufDisplayRecords.push(b);
this._bufDisplayRecords.push(a);this._bufDisplayRecords.push(h);this._bufDisplayRecords.push(r);this._bufDisplayRecords.push(t)};e.writeMetrics=function(q){q&&this._currentMetrics.push(...q)};c.deserializeDisplayObjects=function(q){const {bufDisplayObjects:d,bufMetrics:g,bufRecords:b}=q;q=new f(d);const a=new f(b),h=new f(g),r=[];let t=q.readInt32();a.readInt32();for(h.readInt32();t--;){const v=q.readInt32(),x=q.readInt32(),u=q.readInt32(),D=q.readInt32(),B=new w(v);0!==x&&(B.insertAfter=x);0!==u&&
(B.displayRecords=z.deserializeList(a,p,{id:v}));0!==D&&(B.metrics=z.deserializeList(h,y));r.push(B)}return r};e.encode=function(q,d){const g={};for(let b=0;b<this.vertexVectorsMap.length;b++){const a=this.vertexVectorsMap[b];g[b]={};a.transfer(g[b],d)}q.bufDisplayObjects=this._bufDisplayObjects.buffer();q.bufRecords=this._bufDisplayRecords.buffer();q.bufMetrics=this._bufMetrics.buffer();d.push(q.bufDisplayObjects);d.push(q.bufMetrics);d.push(q.bufRecords);q.vertexBuffersMap=g;this.destroy()};e.destroy=
function(){this._bufMetrics=this._bufDisplayRecords=this._bufDisplayObjects=this.vertexVectorsMap=null};e._rollbackDisplayObject=function(){this._bufDisplayObjects.decr(0);this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4);this._currentIndex=this._bufDisplayObjects.length};l._createClass(c,[{key:"vertexBuffersMap",get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(let q=0;q<this.vertexVectorsMap.length;q++)this._vertexBuffersMap[q]=this.vertexVectorsMap[q].intoBuffers();
this.vertexVectorsMap=null}return this._vertexBuffersMap}}]);return c}();n.MeshData=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./Utils","./MeshData"],function(n,l,p){return function(){function z(w,f,k,m=0,c=0){this.id=w;this.geometryType=f;this.materialKey=k;this.minZoom=m;this.maxZoom=c;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=
this.symbolLevel=0}var y=z.prototype;y.clone=function(){return this.copy()};y.copy=function(){const w=new z(this.id,this.geometryType,this.materialKey);w.vertexFrom=this.vertexFrom;w.vertexCount=this.vertexCount;w.indexFrom=this.indexFrom;w.indexCount=this.indexCount;w.zOrder=this.zOrder;w.symbolLevel=this.symbolLevel;w.meshData=this.meshData;w.minZoom=this.minZoom;w.maxZoom=this.maxZoom;return w};y.setMeshDataFromBuffers=function(w,f,k){const m=new p;for(const c in f){const e=f[c].stride,q=f[c].data,
d=[],g=l.strideToPackingFactor(e);for(let b=0;b<e*w.vertexCount/g;++b)d[b]=q[b+e*w.vertexFrom/g];m.vertexData.set(c,d)}m.indexData.length=0;for(f=0;f<w.indexCount;++f)m.indexData[f]=k[f+w.indexFrom]-w.vertexFrom;m.vertexCount=w.vertexCount;this.meshData=m};y.readMeshDataFromBuffers=function(w,f){this.meshData?this.meshData.clear():this.meshData=new p;for(const k in w){const m=w[k].stride,c=w[k].data,e=[],q=l.strideToPackingFactor(m);for(let d=0;d<m*this.vertexCount/q;++d)e[d]=c[d+m*this.vertexFrom/
q];this.meshData.vertexData.set(k,e)}this.meshData.indexData.length=0;for(w=0;w<this.indexCount;++w)this.meshData.indexData[w]=f[w+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};y.writeMeshDataToBuffers=function(w,f,k,m){for(const c in f){const e=f[c].stride,q=this.meshData.vertexData.get(c),d=f[c].data,g=l.strideToPackingFactor(e);for(let b=0;b<e*this.meshData.vertexCount/g;++b)d[b+e*w/g]=q[b]}for(f=0;f<this.meshData.indexData.length;++f)m[f+k]=this.meshData.indexData[f]+
w;this.vertexFrom=w;this.vertexCount=this.meshData.vertexCount;this.indexFrom=k;this.indexCount=this.meshData.indexData.length};z.writeAllMeshDataToBuffers=function(w,f,k){let m=0,c=0;for(const e of w)e.writeMeshDataToBuffers(m,f,c,k),m+=e.vertexCount,c+=e.indexCount};y._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};y.serialize=function(w){w.push(this.geometryType);w.push(this.materialKey);w.push(this.vertexFrom);w.push(this.vertexCount);
w.push(this.indexFrom);w.push(this.indexCount);w.push(this.minZoom);w.push(this.maxZoom);return w};z.deserialize=function(w,f){const k=w.readInt32(),m=w.readInt32();f=new z(f.id,k,m);f.vertexFrom=w.readInt32();f.vertexCount=w.readInt32();f.indexFrom=w.readInt32();f.indexCount=w.readInt32();f.minZoom=w.readInt32();f.maxZoom=w.readInt32();return f};n._createClass(z,[{key:"sortKey",get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey}}]);return z}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(function(){return function(){function n(){this.vertexData=
new Map;this.vertexCount=0;this.indexData=[]}var l=n.prototype;l.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};l.update=function(p,z,y){for(const w in p)this.vertexData.set(w,p[w]);for(const w in this.vertexData)null===p[w]&&this.vertexData.delete(w);this.vertexCount=z;this.indexData=y};return n}()})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["exports"],function(n){n.deserializeList=function(l,p,z){var y=l.readInt32();y=Array(y);for(let w=
0;w<y.length;w++)y[w]=p.deserialize(l,z);return y};n.serializeList=function(l,p){if(null===p)l.push(0);else{l.push(p.length);for(const z of p)z.serialize(l);return l}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/collisions/Metric":function(){define(["../../../../../core/Logger","../definitions","../../../../../chunks/vec2f32","./BoundingBox","../util/serializationUtils"],function(n,l,p,z,y){const w=n.getLogger("esri/views/2d/engine/webgl/collisions/Metric");return function(){function f(m,
c,e,q,d){this.id=m;this.range=c;this.boxes=null;this.minZoom=-1;this.placementPadding=this.offsetY=this.offsetX=this.directionY=this.directionX=this.size=0;this.anchor=p.fromValues(e,q);this.baseZoom=d}var k=f.prototype;k.add=function(m,c,e){m.x+=c;m.y+=e;this.bounds?(this.boxes?this.boxes.push(m):(this.boxes=[this.bounds,m],this.bounds=this.bounds.clone()),this.bounds.extend(m)):this.bounds=m};k.computeIndex=function(){var m=Math.floor(this.anchor[1]/l.COLLISION_BUCKET_SIZE);this.xBucket=Math.floor(this.anchor[0]/
l.COLLISION_BUCKET_SIZE);this.yBucket=m;m=l.TILE_SIZE/l.COLLISION_BUCKET_SIZE;this.hasVV?this.yOverflow=this.xOverflow=m:(this.xOverflow=Math.min(m,Math.ceil(2*this.bounds.width/l.COLLISION_BUCKET_SIZE)),this.yOverflow=Math.min(m,Math.ceil(2*this.bounds.height/l.COLLISION_BUCKET_SIZE)))};k.findCollisionDelta=function(m){const c=this.bounds.findCollisionDelta(m.bounds),e=this.boxes&&this.boxes.length,q=m.boxes&&m.boxes.length;return Math.abs(c)>l.COLLISION_MAX_ZOOM_DELTA||!e&&!q?c:e&&q?this._boxesToBoxes(m):
e?this._boxesToBox(m):this._boxToBoxes(m)};k.computeVVOffset=function(m,c){c||w.error("mapview-labeling",`Unable to compute label offset. Expected an evaluator function but found ${c}`);let e=this.size;this.hasVV&&(m=c(m),e=isNaN(m)||null==m||Infinity===m?this.size:m);this._computeOffset(e)};k.setPlacementOffset=function(m,c,e,q,d){this.hasVV=m;this.size=c;this.placementPadding=Math.round(e);this.directionX=q;this.directionY=d};k.clone=function(){const m=new f(this.id,this.range,this.anchor[0],this.anchor[1],
this.baseZoom);m.minZoom=this.minZoom;this.bounds&&(m.bounds=this.bounds.clone());this.boxes&&(m.boxes=this.boxes.map(c=>c.clone()));m.xBucket=this.xBucket;m.yBucket=this.yBucket;m.xOverflow=this.xOverflow;m.yOverflow=this.yOverflow;m.hasVV=this.hasVV;m.size=this.size;m.directionX=this.directionX;m.directionY=this.directionY;m.offsetX=this.offsetX;m.offsetY=this.offsetY;return m};k._boxToBoxes=function(m){let c=-Infinity;for(const e of m.boxes)m=this.bounds.findCollisionDelta(e),c=Math.max(m,c);return c};
k._boxesToBox=function(m){let c=this.boxes[0].findCollisionDelta(m.bounds);for(let e=1;e<this.boxes.length;e++){const q=this.boxes[e].findCollisionDelta(m.bounds);c=Math.max(q,c)}return c};k._boxesToBoxes=function(m){let c=-Infinity;for(let e=0;e<this.boxes.length;e++){const q=this.boxes[e];for(const d of m.boxes){const g=q.findCollisionDelta(d);c=Math.max(g,c)}}return c};k._computeOffset=function(m){this.offsetX=this.directionX*(m/2+this.placementPadding);this.offsetY=this.directionY*(m/2+this.placementPadding)};
k.serialize=function(m){m.push(this.id);this.bounds.serialize(m);m.push(this.range.from);m.push(this.range.count);m.push(this.anchor[0]);m.push(this.anchor[1]);m.push(this.baseZoom);m.push(this.hasVV?1:0);m.push(this.size);m.writeF32(this.directionX);m.writeF32(this.directionY);m.push(this.offsetX);m.push(this.offsetY);m.push(this.placementPadding);y.serializeList(m,this.boxes);return m};f.deserialize=function(m){var c=m.readInt32();const e=z.deserialize(m);var q=m.readInt32(),d=m.readInt32();const g=
{from:q,count:d},b=m.readInt32(),a=m.readInt32(),h=m.readInt32();q=m.readInt32();d=m.readInt32();const r=m.readF32(),t=m.readF32(),v=m.readInt32(),x=m.readInt32(),u=m.readInt32();m=y.deserializeList(m,z);c=new f(c,g,b,a,h);c.bounds=e;c.boxes=m;c.setPlacementOffset(!!q,d,u,r,t);c.offsetX=v;c.offsetY=x;c.computeIndex();q||c._computeOffset(d);return c};return f}()})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define(["./WGLDisplayRecord","./util/serializationUtils","./collisions/Metric"],
function(n,l,p){return function(){function z(w){this.insertAfter=null;this.id=w;this.displayRecords=[];this.metrics=[]}var y=z.prototype;y.copy=function(){const w=new z(this.id);w.set(this);return w};y.clone=function(){const w=new z(this.id);w.displayRecords=this.displayRecords.map(f=>f.clone());w.metrics=this.metrics.map(f=>f.clone());w.insertAfter=this.insertAfter;return w};y.set=function(w){this.id=w.id;this.displayRecords=w.displayRecords;this.metrics=w.metrics;this.insertAfter=w.insertAfter};
y.serialize=function(w){w.push(this.id);l.serializeList(w,this.metrics);l.serializeList(w,this.displayRecords);return w};z.deserialize=function(w){var f=w.readInt32();const k=new z(f);f={id:f};const m=l.deserializeList(w,p);m.length&&(k.metrics=m);k.displayRecords=l.deserializeList(w,n,f);return k};return z}()})},"esri/views/2d/engine/webgl/util/Reader":function(){define(function(){return function(){function n(p){this._pos=0;this._buffer=p;this._i32View=new Int32Array(this._buffer);this._f32View=
new Float32Array(this._buffer)}var l=n.prototype;l.readInt32=function(){return this._i32View[this._pos++]};l.readF32=function(){return this._f32View[this._pos++]};return n}()})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function l(z,y){this._pos=0;y=y?this._roundToNearest(y,z.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(y);this._buffer=new z(this._array);this._ctor=z}var p=l.prototype;p._roundToNearest=
function(z,y){z=Math.round(z);return z+(y-z%y)};p._ensureSize=function(z){if(this._pos+z>=this._buffer.length){z=this._roundToNearest(1.5*(this._array.byteLength+z*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);z=new ArrayBuffer(z);const y=new this._ctor(z);y.set(this._buffer,0);this._array=z;this._buffer=y}};p.writeF32=function(z){this._ensureSize(1);const y=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=z;this._pos++;return y};p.push=function(z){this._ensureSize(1);
const y=this._pos;this._buffer[this._pos++]=z;return y};p.writeFixed=function(z){this._buffer[this._pos++]=z};p.setValue=function(z,y){this._buffer[z]=y};p.getValue=function(z){return this._buffer[z]};p.incr=function(z){this._buffer[z]++};p.decr=function(z){this._buffer[z]--};p.writeRegion=function(z){this._ensureSize(z.length);const y=this._pos;this._buffer.set(z,this._pos);this._pos+=z.length;return y};p.buffer=function(){const z=this._array.slice(0,4*this._pos);this.destroy();return z};p.toArray=
function(){const z=this._array,y=[];for(let w=0;w<z.byteLength/4;w++)y.push(z[w]);return y};p.seek=function(z){this._pos=z};p.destroy=function(){this._buffer=this._array=null};n._createClass(l,[{key:"length",get:function(){return this._pos}}]);return l}()})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../Utils","../util/Writer","./VertexBuffer"],function(n,l,p,z,y){let w=function(){function k(m,c){this.data=m;this.stride=
c}k.prototype.transfer=function(m,c){const e=this.data.buffer();m.vertexCount=this.vertexCount;m.data=e;m.stride=this.stride;c.push(e)};l._createClass(k,[{key:"vertexCount",get:function(){const m=this.data.length/(this.stride/4);m!==(m|0)&&console.debug("Corrupted stride");return m}}]);return k}(),f=function(){function k(c,e,q=!1){this.geometryType=c;this.indexVector=new z(Uint32Array,6*e);this.namedVectors={};c=p.getStrides(c,q);for(const d in c){q=c[d];let g;switch(q%4){case 0:case 2:g=new z(Uint32Array,
q*e);break;case 1:case 3:g=new z(Uint8Array,q*e)}this.namedVectors[d]=new w(g,q)}}var m=k.prototype;m.get=function(c){return this.namedVectors[c].data};m.getVector=function(c){return this.namedVectors[c]};m.transfer=function(c,e){const q=this.indexVector.buffer(),d={};e.push(q);for(const g in this.namedVectors){const b=this.namedVectors[g];d[g]={};b.transfer(d[g],e)}c.geometryType=this.geometryType;c.indexBuffer=q;c.namedBuffers=d;this.destroy()};m.intoBuffers=function(){const c=y.VertexBuffers.fromVertexVectors(this);
this.destroy();return c};m.destroy=function(){this.namedVectors=this.indexVector=null};return k}();n.VertexVectors=f;n.default=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["exports","../Utils"],function(n,l){let p=function(){function y(w,f,k){this.data=w;this.stride=f;this.vertexCount=k}y.decode=function(w){const f=l.allocateTypedArrayBufferwithData(w.data,w.stride);return new y(f,w.stride,w.vertexCount)};y.fromVertexVector=
function(w){const f=l.allocateTypedArrayBufferwithData(w.data.buffer(),w.stride);return new y(f,w.stride,w.vertexCount)};return y}(),z=function(){function y(w,f,k){this.geometryType=w;this.indexBuffer=new Uint32Array(f);this.namedBuffers=k}y.decode=function(w){const f=w.geometryType,k=w.indexBuffer,m={};for(const c in w.namedBuffers)m[c]=p.decode(w.namedBuffers[c]);return new y(f,k,m)};y.fromVertexVectors=function(w){const f=w.geometryType,k=w.indexVector.buffer(),m={};for(const c in w.namedVectors)m[c]=
p.fromVertexVector(w.namedVectors[c]);return new y(f,k,m)};return y}();n.VertexBuffers=z;n.default=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../alignmentUtils ../../number ../../enums ./meshUtils ../../materialKey/MaterialKey ../../color ../../collisions/Metric ./segmentUtils ./WGLTextTemplate".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q,d,g,b,a){const h=p.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),r=(v,x="mapview-labeling")=>h.error(new z(x,v)),t=function(v){const x=new Map;return u=>{x.has(u)||x.set(u,v(u));return x.get(u)}}(v=>{let x=0;if(0===v)return Infinity;for(;!(v%2);)x++,v/=2;return x});return function(v){function x(D,B,A,C){var E=v.call(this,D,A.font.size,A.haloSize||0,A.color&&d.premultiplyAlphaRGBAArray(A.color)||0,A.haloColor&&d.premultiplyAlphaRGBAArray(A.haloColor)||0,
A.horizontalAlignment,A.verticalAlignment,e.isMapAligned(B.labelPlacement)?1:0,A.font.decoration,!1,A.angle||0,A.xoffset,A.yoffset,A.lineWidth,A.lineHeight,null,null)||this;E._outLineLabelAngle=0;E._refPlacementPadding=0;E._refPlacementDirX=0;E._refPlacementDirY=0;E._refOffsetX=0;E._refOffsetY=0;E.geometryType=c.WGLGeometryType.LABEL;var F=!!B.minScale&&C.scaleToZoom(B.minScale)||0;F=y.clamp(F,0,25.5);C=!!B.maxScale&&C.scaleToZoom(B.maxScale)||255;C=y.clamp(C,0,25.5);const [G,J]=k.getAlignmentFromPlacement(B.labelPlacement);
E._xAlignD=G;E._yAlignD=J;E._minZoom=F;E._maxZoom=C;E._refPlacementPadding=w.pt2px(A.haloSize)+f.TEXT_PLACEMENT_PADDING;D=q.LabelMaterialKey.load(D);D.sdf=!0;E._materialKey=D.data;return E}n._inheritsLoose(x,v);x.fromLabelClass=function(D,B){if("center-along"===D.labelPlacement){const A=D.symbol;A.xoffset=0;A.yoffset=0;A.angle=0;A.font.decoration="none"}return new x(D.materialKey,D,D.symbol,B)};var u=x.prototype;u.bindReferenceTemplate=function(D){let B=k.getXDirection(this._xAlignD),A=k.getYDirection(this._yAlignD);
this._refOffsetY=this._refOffsetX=0;if(l.isNone(D))this._refSymbolAndPlacementOffset=m.i8888to32(0,0,Math.floor(127*B+127),Math.floor(127*A+127));else{if("circle"===D.boundsType&&(B||A)){var C=Math.sqrt(B*B+A*A);B/=C;A/=C}C=Math.max(D.height,D.width);this._refSymbolAndPlacementOffset=m.i8888to32(4*this._refPlacementPadding,C,Math.floor(127*B+127),Math.floor(127*A+127));this._referenceSize=C;this._refPlacementDirX=B;this._refPlacementDirY=A;this._refOffsetX=D.xOffset;this._refOffsetY=D.yOffset}};u.writeMesh=
function(D,B,A,C,E,F){if(!l.isNone(this._shapingInfo)){var G=[],J=this._shapingInfo;if(A="esriGeometryPolygon"===A.geometryType?A.readLegacyCentroid():A.readLegacyGeometry()){this.current={out:D,outVecs:B,outMetrics:G,inId:E,inShaping:J,zoomLevel:F};switch(C){case "esriGeometryPolyline":this._placeLineLabels(A);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(A);break;default:r("mapview-labeling",`Geometry of type ${C} is not supported`)}D.writeMetrics(this.current.outMetrics)}}};
u._isVisible=function(D,B){const A=Math.floor(10*this.current.zoomLevel);return Math.floor(10*D)<=A&&A<=Math.floor(10*B)};u._placePointLabels=function(D){const {out:B,outVecs:A,outMetrics:C,inId:E}=this.current;this._writeGlyphs(B,A,E,D,C)};u._placeLineLabels=function(D){D=b.smoothPaths(D.paths,this.current.inShaping.bounds.width);const B=this._placeSubdivGlyphs.bind(this),A=(this._shapedBox.width+128)/4;for(const C of D)b.pathDivide(C,A,B)};u._placeSubdivGlyphs=function(D,B,A,C){var E=t(B);A=y.log2(Math.min(A,
C-A)/(4+this._shapedBox.width/4/2));E=Math.max(this._minZoom,this.current.zoomLevel+2-(0===B?A:Math.min(E,A)));A=this._shapedBox.width/2*Math.pow(2,this.current.zoomLevel-E);this.current.inShaping.isMultiline?0===B&&this._placeStraight(D,E):this._placeCurved(D,E,A)};u._placeStraight=function(D,B){const {out:A,outVecs:C,outMetrics:E,inId:F}=this.current;this._writeGlyphs(A,C,F,D,E,B)};u._placeCurved=function(D,B,A){var C={from:this.current.out.currentDisplayRecordCount(),count:-1};C=new g(this.current.inId,
C,D.x,D.y,B);const E=D.clone(),F=(180/Math.PI*D.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*D.angle%360*(254/360));this._placeFirst(E,C,B,1);this._placeBack(D,E,C,B,A,1);this._placeForward(D,E,C,B,A,1);this._outLineLabelAngle=Math.round(254/360*F);this._placeFirst(E,C,B,0);this._placeBack(D,E,C,B,A,0);this._placeForward(D,E,C,B,A,0);C.range.count=this.current.out.currentDisplayRecordCount()-C.range.from;C.bounds&&this.current.outMetrics.push(C)};u._placeBack=function(D,B,A,C,E,F){const G=
D.clone();for(D=D.backwardLength+0;G.prev()&&!(D>=E);)this._placeOnSegment(G,B,A,D,C,-1,F),D+=G.length+0};u._placeForward=function(D,B,A,C,E,F){const G=D.clone();for(D=D.remainingLength+0;G.next()&&!(D>=E);)this._placeOnSegment(G,B,A,D,C,1,F),D+=G.length+0};u._placeFirst=function(D,B,A,C){const E=this.current.inShaping;var F=E.glyphs;const G=this.current.zoomLevel,{out:J,outVecs:K,inId:L}=this.current,I=m.i1616to32(Math.round(8*D.x),Math.round(8*D.y));for(const N of F)F=N.x>E.bounds.x?C:1-C,F=Math.max(0,
G+y.log2(Math.abs(N.x+N.width/2-E.bounds.x)/(F*D.remainingLength+(1-F)*D.backwardLength))),F=Math.max(A,F),N.maxZoom=25,N.angle=D.angle+(1-C)*Math.PI,N.minZoom=F,this._writeGlyph(J,K,N,L,I),C&&this._isVisible(N.minZoom,N.maxZoom)&&B.add(N.bounds,0,0)};u._placeOnSegment=function(D,B,A,C,E,F,G){var J=this.current.inShaping.glyphs;const {out:K,outVecs:L,inId:I}=this.current,N=this.current.inShaping,P=this.current.zoomLevel,R=m.i1616to32(Math.round(8*(D.x+D.dx/D.length*-F*C)),Math.round(8*(D.y+D.dy/D.length*
-F*C)));for(const W of J)if((J=W.x>N.bounds.x?G:1-G)&&1===F||!J&&-1===F){var T=Math.abs(W.x+W.width/2-N.bounds.x);J=Math.max(0,P+y.log2(T/C)-.1);T=Math.max(E,P+y.log2(T/(C+D.length+0)));0!==J&&(W.angle=D.angle+(1-G)*Math.PI,W.minZoom=T,W.maxZoom=J,this._writeGlyph(K,L,W,I,R),G&&this._isVisible(W.minZoom,W.maxZoom)&&A.add(W.bounds,D.x-B.x,D.y-B.y))}};u._writeGlyphs=function(D,B,A,C,E,F=this._minZoom){const G=this._shapingInfo;if(!(l.isNone(G)||0>C.x||512<=C.x||0>C.y||512<=C.y)){var J=D.currentDisplayRecordCount(),
K=m.i1616to32(Math.round(8*(C.x+this._refOffsetX)),Math.round(8*(C.y-this._refOffsetY)));C=new g(A,{from:J,count:-1},C.x+this._refOffsetX,C.y-this._refOffsetY,F);for(const L of G.glyphs)L.minZoom=F,L.maxZoom=this._maxZoom,this._writeGlyph(D,B,L,A,K);C.range.count=D.currentDisplayRecordCount()-C.range.from;C.bounds=G.boundsT;D=q.LabelMaterialKey.load(this._materialKey);C.setPlacementOffset(D.vvSizeFieldStops||D.vvSizeMinMaxValue||D.vvSizeScaleStops||D.vvSizeUnitValue,this._referenceSize,this._refPlacementPadding,
this._refPlacementDirX,this._refPlacementDirY);E.push(C)}};u._writeGlyph=function(D,B,A,C,E){const F=q.MaterialKeyBase.load(this._materialKey);F.textureBinding=A.textureBinding;const G=B.indexVector.length,J=B.getVector("geometry").vertexCount,K=this._writeIndices(B);B=this._writeVertex(B,C,E,A);D.writeDisplayRecord(this.geometryType,F.data,J,B,G,K)};u._writeVertexCommon=function(D,B,A,C){const E=this._color,F=this._haloColor,G=m.i8888to32(0,0,this._size,this._haloSize);C=m.i8888to32(Math.floor(10*
Math.max(C.minZoom,this._minZoom)),Math.floor(10*Math.min(C.maxZoom,this._maxZoom)),this._outLineLabelAngle,0);D.push(A);D.push(B);D.push(E);D.push(F);D.push(G);D.push(this._refSymbolAndPlacementOffset);D.push(C)};n._createClass(x,[{key:"_shapedBox",get:function(){return l.unwrap(this._shapingInfo).bounds}}]);return x}(a)})},"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe","./util"],
function(n,l,p,z){function y(c){return c.length-1}function w(c){let e=0;for(let q=0;q<y(c);q++)e+=f(c,q);return e}function f(c,e,q=1){const [d,g]=c[e+1];return Math.sqrt(d*d+g*g)*q}function k(c,e,q,d,g){if(!(q<e)){var b=d.clone().seek(q/2);p.isNone(b)||(c(b.clone(),q,g),q=(q-e)/2,b=p.unwrap(b.seek(e/2)),k(c,e,q,d,g+1),k(c,e,q,b,g+1))}}let m=function(){function c(q,d,g,b,a){this._segments=q;this._index=d;this._distance=g;this._xStart=b;this._yStart=a;this._done=!1}c.create=function(q){return new c(q,
0,0,q[0][0],q[0][1])};var e=c.prototype;e.clone=function(){return new c(this._segments,this._index,this._distance,this.xStart,this.yStart)};e.equals=function(q){return this._index===q._index||q._index===this._index-1&&(0===this._distance||1===q._distance)||q._index===this._index+1&&(1===this._distance||0===q._distance)};e.leq=function(q){return this._index<q._index||this._index===q._index&&this._distance<=q._distance};e.geq=function(q){return this._index>q._index||this._index===q._index&&this._distance>=
q._distance};e.hasPrev=function(){return 0<=this._index-1};e.hasNext=function(){return this._index+1<y(this._segments)};e.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};e.prev=function(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};e._seekBackwards=function(q,d){var g=this.backwardLength;if(q<=g)return this._distance=(g-q)/
this.length,this;for(g=this.backwardLength;this.prev();){if(g+this.length>q)return this._seekBackwards(q-g);g+=this.length}this._distance=0;return d?this:null};e.seek=function(q,d=!1){if(0>q)return this._seekBackwards(Math.abs(q),d);if(q<=this.remainingLength)return this._distance=(this.backwardLength+q)/this.length,this;let g=this.remainingLength;for(;this.next();){if(g+this.length>q)return this.seek(q-g,d);g+=this.length}this._distance=1;return d?this:null};l._createClass(c,[{key:"_segment",get:function(){return this._segments[this._index+
1]}},{key:"angle",get:function(){const q=this.dy;let d=Math.acos((0*q+-1*-this.dx)/(1*this.length));0<q&&(d=2*Math.PI-d);return d}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+
.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:q,dy:d}=this;return Math.sqrt(q*q+d*d)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);
return c}();n.SegmentCursor=m;n.pathDivide=function(c,e,q){const d=w(c);c=m.create(c);const g=d/2,b=Math.floor((d-e)/2/e);c.seek(g-b*e);for(let a=-b;a<=b;a++)512>c.x&&0<=c.x&&512>c.y&&0<=c.y&&q(c.clone(),a,g+a*e,d),c.seek(e)};n.pathLength=w;n.pathSubdivide=function(c,e,q){k(q,e,w(c),m.create(c),0)};n.segmentAt=function(c,e){return c[e+1]};n.segmentCount=y;n.segmentLength=f;n.smoothPaths=function(c,e){for(let E=0;E<c.length;E++){var q=c[E];const F=[];F.push(q[0]);for(var d=1;d<q.length;d++){let [G,
J]=F[d-1];G+=q[d][0];J+=q[d][1];F.push([G,J])}a:{q=F;d=e;if(0>=d)break a;const G=q.length;if(3>G)break a;const J=[];var g=0;J.push(0);for(var b=1;b<G;b++)g+=z.dist(q[b],q[b-1]),J.push(g);d=Math.min(d,.2*g);g=[];g.push(q[0][0]);g.push(q[0][1]);b=q[G-1][0];const K=q[G-1][1];var a=z.sub([0,0],q[0],q[1]);z.normalize(a);q[0][0]+=d*a[0];q[0][1]+=d*a[1];z.sub(a,q[G-1],q[G-2]);z.normalize(a);q[G-1][0]+=d*a[0];q[G-1][1]+=d*a[1];for(a=1;a<G;a++)J[a]+=d;J[G-1]+=d;a=.5*d;for(let L=1;L<G-1;L++){let I=0,N=0,P=
0;for(var h=L-1;0<=h&&!(J[h+1]<J[L]-a);h--){var r=a+J[h+1]-J[L],t=J[h+1]-J[h],v=J[L]-J[h]<a?1:r/t;if(1E-6>Math.abs(v))break;var x=v*v,u=v*r-.5*x*t,D=v*t/d,B=q[h+1],A=q[h][0]-B[0],C=q[h][1]-B[1];I+=D/u*(B[0]*v*r+.5*x*(r*A-t*B[0])-x*v*t*A/3);N+=D/u*(B[1]*v*r+.5*x*(r*C-t*B[1])-x*v*t*C/3);P+=D}for(h=L+1;h<G&&!(J[h-1]>J[L]+a);h++){r=a-J[h-1]+J[L];t=J[h]-J[h-1];v=J[h]-J[L]<a?1:r/t;if(1E-6>Math.abs(v))break;x=v*v;u=v*r-.5*x*t;D=v*t/d;B=q[h-1];A=q[h][0]-B[0];C=q[h][1]-B[1];I+=D/u*(B[0]*v*r+.5*x*(r*A-t*B[0])-
x*v*t*A/3);N+=D/u*(B[1]*v*r+.5*x*(r*C-t*B[1])-x*v*t*C/3);P+=D}g.push(I/P);g.push(N/P)}g.push(b);g.push(K);for(let L=0,I=0;L<G;L++)q[L][0]=g[I++],q[L][1]=g[I++]}q=[];q.push(F[0]);for(d=1;d<F.length;d++){const [G,J]=F[d-1],[K,L]=F[d];q.push([Math.round(K-G),Math.round(L-J)])}c[E]=q}return c};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["exports","../definitions"],function(n,l){let p=function(){function z(w,f=2){this._bucketSize=
w;this._rowsLength=l.TILE_SIZE/w;this._colsLength=l.TILE_SIZE/w;this._elementsPerBucket=f;this._grid=this._initGrid()}var y=z.prototype;y.checkOverlap=function(w,f){w=Math.floor(w/this._bucketSize);f=Math.floor(f/this._bucketSize);return 0>w||w>=this._rowsLength||0>f||f>=this._colsLength?!0:this._grid[f*this._colsLength+w]>=this._elementsPerBucket};y.markUsed=function(w,f){this._grid[Math.floor(f/this._bucketSize)*this._colsLength+Math.floor(w/this._bucketSize)]+=1};y.reset=function(){this._grid=
this._initGrid()};y._initGrid=function(){return new Uint8Array(this._rowsLength*this._colsLength)};return z}();n.CollisionGrid=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/HandleOwner".split(" "),
function(n,l,p,z,y,w,f,k,m,c,e,q){p=function(d){function g(){return d.apply(this,arguments)||this}n._inheritsLoose(g,d);var b=g.prototype;b.initialize=function(){};b.destroy=function(){};n._createClass(g,[{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){const a=this.get("tileStore.tileScheme.spatialReference");return a&&a.toJSON()||null}}]);return g}(q.HandleOwner);l.__decorate([w.property({readOnly:!0})],p.prototype,"supportsTileUpdates",null);l.__decorate([w.property({constructOnly:!0})],
p.prototype,"remoteClient",void 0);l.__decorate([w.property({constructOnly:!0})],p.prototype,"service",void 0);l.__decorate([w.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],p.prototype,"spatialReference",null);l.__decorate([w.property({constructOnly:!0})],p.prototype,"tileInfo",void 0);l.__decorate([w.property({constructOnly:!0})],p.prototype,"tileStore",void 0);return p=l.__decorate([k.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],p)})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/promiseUtils ../../../../core/HandleOwner ../../../../layers/support/TileInfo ../../ViewState ../../tiling/TileInfoView ./support/TileStore ./processors ./support/UpdateToken ./controllers/FeatureController2D".split(" "),function(n,
l,p,z,y,w,f,k,m,c,e,q,d,g,b,a,h,r,t,v,x){const u=new Set;z=function(D){function B(){var C=D.apply(this,arguments)||this;C.controller=null;C.processor=null;C.remoteClient=null;C.tileStore=null;C.service=null;C.viewState=null;return C}l._inheritsLoose(B,D);var A=B.prototype;A.initialize=function(){this.handles.add(this.watch("updating",C=>{this.remoteClient.invoke("setUpdating",C).catch(E=>{})}))};A.destroy=function(){var C,E,F;null==(C=this.controller)?void 0:C.destroy();null==(E=this.processor)?void 0:
E.destroy();null==(F=this.tileStore)?void 0:F.destroy();this.controller=this.processor=this.tileStore=this.remoteClient=null};A.startup=async function({service:C,config:E,tileInfo:F}){this.service=C;this.tileStore||(C=new h(b.fromJSON(F)),this.tileStore=new r(C));await this._configure(E);this.tileStore.clear()};A.updateTiles=async function(C){this.tileStore.updateTiles(C)};A.update=async function({config:C,pause:E}){const F=v.UpdateToken.empty();await d.all([this.processor.update(F,C),this.controller.update(F,
C,E)]);return F.toJSON()};A.invalidate=async function(C){C=v.UpdateToken.create(C);C=this.controller.invalidate(C);await this.remoteClient.invoke("setUpdating",this.updating);return C};A.setViewState=function(C){C=a.fromJSON(C);this._set("viewState",C)};A._configure=async function(C){await d.all([this._handleControllerConfig(C),this._handleProcessorConfig(C)]);this.controller.processor=this.processor;await this.update({config:C})};A._handleControllerConfig=async function(C){C=await this._createController(this.service,
C);await C.startup();return C};A._handleProcessorConfig=async function(C){return this._createProcessor(this.service,C)};A._createController=async function(C,E){this.controller&&this.controller.destroy();const {tileStore:F,remoteClient:G}=this;return this.controller=C=new x({service:C,config:E,tileStore:F,remoteClient:G})};A._createProcessor=async function(C,E){const F=(await t.loadProcessorModule(E.schema.processors[0].type)).default,{remoteClient:G,tileStore:J}=this;C=new F({service:C,config:E,tileStore:J,
remoteClient:G});this.processor&&this.processor.destroy();return this.processor=C};l._createClass(B,[{key:"updating",get:function(){return!this.controller||this.controller.updating}}]);return B}(g.HandleOwner);p.__decorate([f.property()],z.prototype,"controller",void 0);p.__decorate([f.property()],z.prototype,"processor",void 0);p.__decorate([f.property({dependsOn:["controller.updating"]})],z.prototype,"updating",null);p.__decorate([f.property()],z.prototype,"viewState",void 0);z=p.__decorate([m.subclass("esri.views.2d.layers.features.Pipeline")],
z);n.default=z;n.getInstances=function(){return u};Object.defineProperty(n,"__esModule",{value:!0})});