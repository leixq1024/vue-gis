// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["../../../../../chunks/_rollupPluginBabelHelpers","../enums","../materialKey/MaterialKey","../Utils","./WGLGeometryBrush"],function(q,r,t,u,v){return function(l){function f(){return l.apply(this,arguments)||this}q._inheritsLoose(f,l);var g=f.prototype;g.dispose=function(){};g.getGeometryType=function(){return r.WGLGeometryType.LINE};g.drawGeometry=function(d,h,b,k,a){const {context:c,painter:m,rendererInfo:e,requiredLevel:w}=d,{indexFrom:x,indexCount:y,materialKey:z}=b;b=t.LineMaterialKey.load(z);
const {bufferLayouts:A,attributes:n}=u.createProgramDescriptor(b.data,{geometry:[{location:0,name:"a_pos",count:2,type:5122},{location:1,name:"a_id",count:4,type:5121},{location:2,name:"a_color",count:4,type:5121,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:5120},{location:4,name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123},{location:5,name:"a_tlbr",count:4,type:5123},{location:6,name:"a_segmentDirection",count:4,type:5120},{location:7,name:"a_aux",count:2,type:5123}]});
a=m.materialManager.getMaterialProgram(d,b,"materials/line",n,a);k=this._getVAO(c,A,n,k);const p=1/d.pixelRatio;c.bindProgram(a);c.bindVAO(k);this._setSharedUniforms(a,d,h);b.textureBinding&&m.textureManager.bindTextures(c,a,b);a.setUniform1f("u_zoomFactor",Math.pow(2,w-h.key.level)/d.pixelRatio);a.setUniform1f("u_blur",0+p);a.setUniform1f("u_antialiasing",p);b.vvSizeMinMaxValue&&a.setUniform4fv("u_vvSizeMinMaxValue",e.vvSizeMinMaxValue);b.vvSizeScaleStops&&a.setUniform1f("u_vvSizeScaleStopsValue",
e.vvSizeScaleStopsValue);b.vvSizeFieldStops&&(d=e.getSizeVVFieldStops(h.key.level),a.setUniform1fv("u_vvSizeFieldStopsValues",d.values),a.setUniform1fv("u_vvSizeFieldStopsSizes",d.sizes));b.vvSizeUnitValue&&a.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",e.vvSizeUnitValueToPixelsRatio);b.vvColor&&(a.setUniform1fv("u_vvColorValues",e.vvColorValues),a.setUniform4fv("u_vvColors",e.vvColors));b.vvOpacity&&(a.setUniform1fv("u_vvOpacityValues",e.vvOpacityValues),a.setUniform1fv("u_vvOpacities",e.vvOpacities));
c.setFaceCullingEnabled(!0);c.setFrontFace(2305);c.setCullFace(1029);c.drawElements(4,y,5125,Uint32Array.BYTES_PER_ELEMENT*x);c.setFaceCullingEnabled(!1);c.bindVAO(null)};return f}(v)});