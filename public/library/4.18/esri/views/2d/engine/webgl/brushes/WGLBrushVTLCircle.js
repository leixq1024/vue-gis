// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec4f32 ../number ../enums ./WGLBrush".split(" "),function(q,x,y,r,z,A,m){const t=[1,1,1,1];m=function(u){function n(){var c=u.apply(this,arguments)||this;c._color=r.create();c._strokeColor=r.create();c._programOptions={id:!1};return c}x._inheritsLoose(n,u);var v=n.prototype;v.dispose=function(){};v.drawMany=function(c,e){const {context:k,state:w,drawPhase:B,styleLayerUID:p}=c;var a=c.displayLevel,
b=c.styleLayer;c=c.painter.getVectorTileProgramCache();const C=b.hasDataDrivenRadius?1:b.getPaintValue("circle-radius",a);var f=b.hasDataDrivenColor?t:b.getPaintValue("circle-color",a),d=b.hasDataDrivenOpacity?1:b.getPaintValue("circle-opacity",a);const D=b.hasDataDrivenStrokeWidth?1:b.getPaintValue("circle-stroke-width",a);var g=b.hasDataDrivenStrokeColor?t:b.getPaintValue("circle-stroke-color",a),l=b.hasDataDrivenStrokeOpacity?1:b.getPaintValue("circle-stroke-opacity",a);const E=b.hasDataDrivenBlur?
0:b.getPaintValue("circle-blur",a);d*=f[3];this._color[0]=d*f[0];this._color[1]=d*f[1];this._color[2]=d*f[2];this._color[3]=d;d=l*g[3];this._strokeColor[0]=d*g[0];this._strokeColor[1]=d*g[1];this._strokeColor[2]=d*g[2];this._strokeColor[3]=d;f=b.getPaintValue("circle-translate",a);g=b.getPaintValue("circle-translate-anchor",a);l=B===A.WGLDrawPhase.HITTEST;a=this._programOptions;a.id=l;a=c.getProgram(5,l?1:0,a);k.bindProgram(a);a.setUniformMatrix3fv("u_displayMat3",1===g?w.displayMat3:w.displayViewMat3);
a.setUniform2fv("u_circleTranslation",f);a.setUniform1f("u_depth",b.z);a.setUniform1f("u_radius",C);a.setUniform4fv("u_color",this._color);a.setUniform1f("u_blur",E);a.setUniform1f("u_stroke_width",D);a.setUniform4fv("u_stroke_color",this._strokeColor);a.setUniform1f("u_antialiasingWidth",1.2);l&&(b=z.u32to4Xu8(p+1),a.setUniform4fv("u_id",b));for(const h of e)h.layerData.has(p)&&(e=h.layerData.get(p),e.prepareForRendering(k,c),b=e.circleVertexArrayObject,y.isNone(b)||(k.bindVAO(b),a.setUniformMatrix3fv("u_dvsMat3",
h.transforms.dvs),k.setStencilFunction(514,h.stencilRef,255),k.drawElements(4,e.circleIndexCount,5125,Uint32Array.BYTES_PER_ELEMENT*e.circleIndexStart),h.triangleCount+=e.circleIndexCount/3))};return n}(m);q.WGLBrushVTLCircle=m;Object.defineProperty(q,"__esModule",{value:!0})});