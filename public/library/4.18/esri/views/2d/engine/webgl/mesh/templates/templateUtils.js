// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../layers/graphics/OptimizedGeometry ../../../../../../core/libs/earcut/earcut ../../definitions ../../TileClipper ../bufcut ../Tesselator".split(" "),function(r,B,C,z,D,E,F){function w(a,b,d){let g=0;for(let c=1;c<d;c++)g+=(a[2*(b+c)]-a[2*(b+c-1)])*(a[2*(b+c)+1]+a[2*(b+c-1)+1]);return g}function A(a,b,d,g,c){let h=0;for(;d<g;d+=3){const e=2*(a.getValue(d)-c),f=2*(a.getValue(d+1)-c),k=2*(a.getValue(d+2)-c);h+=Math.abs((b[e]-b[k])*(b[f+1]-b[e+1])-(b[e]-b[f])*(b[k+1]-
b[e+1]))}return h}function x(a,b,d,g,c,h,e,f){c=((a-c)*(h-f)-(b-f)*(c-e))/((a-d)*(h-f)-(b-g)*(c-e));return 0>c||1<c?null:{x:Math.round(a+c*(d-a)),y:Math.round(b+c*(g-b))}}const v=new F,t=new D.TileClipper(0,0,0,1,128);t.setExtent(z.TILE_SIZE);r.area=w;r.clip=function(a,b,d=0){const g=-d;b+=d;let c=d=0,h=0;for(let f=0;f<a.lengths.length;f++){const k=a.lengths[f],m=h+k;let l=0,p=null;for(;d!==m;){let n=a.coords[2*d],q=a.coords[2*d++ +1],u=n<g||n>=b||q<g||q>=b;for(var e=u;d!==m&&u===e;)u||(a.coords[2*
c]=n,a.coords[2*c++ +1]=q,l++),n=a.coords[2*d],q=a.coords[2*d++ +1],u=n<g||n>=b||q<g||q>=b;if(d===m){u?p&&(a.coords[2*c]=p.x,a.coords[2*c++ +1]=p.y,l++):(a.coords[2*c]=n,a.coords[2*c++ +1]=q,l++);continue}e=a.coords[2*(d-2)];const y=a.coords[2*(d-2)+1];if(e=x(e,y,n,q,g,g,b,g)||x(e,y,n,q,b,g,b,b)||x(e,y,n,q,b,b,g,b)||x(e,y,n,q,g,g,g,b))a.coords[2*c]=e.x,a.coords[2*c++ +1]=e.y,l++,p||(p=e);u||(a.coords[2*c]=n,a.coords[2*c++ +1]=q,l++)}a.lengths[f]=l;h+=k}};r.clipMarshall=function(a){a:{var b=z.TILE_SIZE+
128;var d=0;for(var g=0;g<a.lengths.length;g++){var c=a.lengths[g];for(var h=0;h<c;h++){var e=a.coords[2*(h+d)];const f=a.coords[2*(h+d)+1];if(-128>e||e>b||-128>f||f>b){b=!0;break a}}d+=c}b=!1}if(!b)return a;t.reset(3);b=0;for(d=0;d<a.lengths.length;d++){g=a.lengths[d];c=a.coords[2*(0+b)];h=a.coords[2*(0+b)+1];t.moveTo(c,h);for(e=1;e<g;e++)c=a.coords[2*(e+b)],h=a.coords[2*(e+b)+1],t.lineTo(c,h);t.close();b+=g}d=t.result(!1);if(!d)return null;a=[];b=[];for(const f of d){d=0;for(const k of f)b.push(k.x),
b.push(k.y),d++;a.push(d)}return new B(a,b)};r.triangleArea=A;r.triangulate=function(a,b,d){const {coords:g,lengths:c,hasIndeterminateRingOrder:h}=b;if(h)return!1;b=a.length;let e=0;for(var f=0;f<c.length;){let l=f,p=c[f];f=w(g,e,p);for(var k=[];++l<c.length;){var m=c[l];const n=w(g,e+p,m);if(!(0<n))break;f+=n;k.push(e+p);p+=m}m=a.length;E.bufcut(a,g,e,e+p,k,2,d);k=A(a,g,m,a.length,d);f=Math.abs(f);if(1E-5<Math.abs((k-f)/Math.max(1E-7,f)))return a.seek(b),!1;f=l;e+=p}return!0};r.triangulateEarcut=
function(a,b,d){const {coords:g,lengths:c,hasIndeterminateRingOrder:h}=b;if(h)return!1;let e=0;for(var f=0;f<c.length;){let m=f,l=c[f];for(f=[];++m<c.length;){var k=c[m];if(!(0<w(g,e+l,k)))break;f.push(e+l-e);l+=k}k=b.coords.slice(2*e,2*(e+l));f=C.earcut(k,f,2);for(const p of f)a.push(p+d+e);f=m;e+=l}return!0};r.triangulateLibtess=function(a,b,d,g){const c=[],{coords:h,lengths:e}=d;v.beginPolygon(a,c);a=0;for(let f=0;f<e.length;f++){const k=d.lengths[f];v.beginContour();for(let m=0;m<k;m++){const l=
[h[2*(a+m)],h[2*(a+m)+1],0];v.addVertex(l,l)}v.endContour();a+=k}v.endPolygon();for(d=0;d<c.length;d++)b.push(c[d]+g)};Object.defineProperty(r,"__esModule",{value:!0})});