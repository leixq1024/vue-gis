// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/string ../../../../core/BidiEngine ./GeometryUtils ./style/StyleLayer ../webgl/Geometry ./BaseBucket ./TextShaping ./Placement".split(" "),function(S,T,X,E,U,G,P,M,H){function Y(J,v){return J.iconMosaicItem&&v.iconMosaicItem?J.iconMosaicItem.page===v.iconMosaicItem.page?0:J.iconMosaicItem.page-v.iconMosaicItem.page:J.iconMosaicItem&&!v.iconMosaicItem?1:!J.iconMosaicItem&&v.iconMosaicItem?-1:0}P=function(J){function v(e,a,c,b,h,
d,f,n){a=J.call(this,e,a)||this;a.type=3;a._markerMap=new Map;a._glyphMap=new Map;a._glyphBufferDataStorage=new Map;a._isIconSDF=!1;if(e.hasDataDrivenIcon!==c.isDataDriven())throw Error("incompatible icon buffer");if(e.hasDataDrivenText!==h.isDataDriven())throw Error("incompatible text buffer");a._iconVertexBuffer=c;a._iconIndexBuffer=b;a._textVertexBuffer=h;a._textIndexBuffer=d;a._placementEngine=f;a._workerTileHandler=n;return a}S._inheritsLoose(v,J);var K=v.prototype;K.getResources=function(e,
a,c){const b=this.layer,h=this.zoom,d=b.hasDataDrivenIcon,f=b.hasDataDrivenText;e&&e.setExtent(this.layerExtent);const n=b.getLayoutProperty("icon-image"),q=b.getLayoutProperty("text-field"),r=[];let p=[1,1,1,1],l=1,m=1,g=[1,1,1,1],k=1,t=1,w,u,A;var B,x;let D,F,C,N;for(const y of this._features){var L=y.getGeometry(e);if(!L||0===L.length)continue;let I;n&&(I=b.getLayoutValue("icon-image",h,y),n.isDataDriven||(I=this._replaceKeys(I,y.values)),I&&(a.add(I),w=b.getLayoutValue("icon-rotate",h,y),u=b.getLayoutValue("icon-anchor",
h,y),A=b.getLayoutValue("icon-offset",h,y)));let z;var Q=!1;if(q&&((z=b.getLayoutValue("text-field",h,y))&&!q.isDataDriven&&(z=this._replaceKeys(z,y.values)),z)){z=z.replace(/\\n/g,"\n");switch(b.getLayoutValue("text-transform",h,y)){case 2:z=z.toLowerCase();break;case 1:z=z.toUpperCase()}v._bidiEngine.hasBidiChar(z)&&(Q="rtl"===v._bidiEngine.checkContextual(z)?"IDNNN":"ICNNN",z=v._bidiEngine.bidiTransform(z,Q,"VLYSN"),Q=!0);var O=z.length;if(0<O){N=b.getLayoutValue("text-font",h,y);for(const V of N)for((B=
c[V])||(B=c[V]=new Set),x=0;x<O;x++){var R=z.charCodeAt(x);B.add(R)}B=b.getLayoutValue("text-rotate",h,y);x=b.getLayoutValue("text-anchor",h,y);R=b.getLayoutValue("text-offset",h,y);D=b.getLayoutValue("text-justify",h,y);F=b.getLayoutValue("text-letter-spacing",h,y);C=b.getLayoutValue("text-max-width",h,y)}}if(!I&&!z)continue;O=b.getLayoutValue("icon-size",h,y);const W=b.getLayoutValue("text-size",h,y);b.hasDataDrivenIconColor&&(p=b.getPaintValue("icon-color",h,y));b.hasDataDrivenIconOpacity&&(l=
b.getPaintValue("icon-opacity",h,y));b.hasDataDrivenIconSize&&(m=O);b.hasDataDrivenTextColor&&(g=b.getPaintValue("text-color",h,y));b.hasDataDrivenTextOpacity&&(k=b.getPaintValue("text-opacity",h,y));b.hasDataDrivenTextSize&&(t=W);const Z=b.getLayoutValue("symbol-sort-key",h,y);L={sprite:I,label:z,rtl:Q,type:y.type,geometry:L,hash:(z?T.numericHash(z):0)^(I?T.numericHash(I):0),priority:Z,iconSize:O,iconRotate:w,ddIconValues:d?{color:p,opacity:l,size:m}:null,iconAnchor:u,iconOffset:A,textSize:W,textRotate:B,
ddTextValues:f?{color:g,opacity:k,size:t}:null,textAnchor:x,textOffset:R,textJustify:D,textLetterSpacing:F,textMaxWidth:C,textFontArray:N};r.push(L)}this._symbolFeatures=r};K.processFeatures=function(e){e&&e.setExtent(this.layerExtent);var a=this.layer,c=this.zoom;e=a.getLayoutValue("symbol-placement",c);const b=0!==e,h=a.getLayoutValue("symbol-spacing",c)*H.TILE_PIXEL_RATIO;var d=a.getLayoutProperty("icon-image"),f=a.getLayoutProperty("text-field");const n=d?new U.IconLayout(a,c,b):null;a=f?new U.TextLayout(a,
c,b):null;const q=this._workerTileHandler;let r;d&&(r=q.getSpriteItems());this._iconIndexStart=3*this._iconIndexBuffer.index;this._textIndexStart=3*this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();d=[];c=1;a&&a.size&&(c=a.size/M.SDF_GLYPH_SIZE);f=a?a.maxAngle*E.C_DEG_TO_RAD:0;const p=a?a.size*H.TILE_PIXEL_RATIO:0;for(const k of this._symbolFeatures){let t;n&&r&&k.sprite&&(t=r[k.sprite])&&t.sdf&&(this._isIconSDF=!0);t&&(n.size=k.iconSize,
n.rotate=k.iconRotate,n.offset=k.iconOffset);var l=void 0,m=0,g=k.label;if(g){a.size=k.textSize;a.rotate=k.textRotate;a.anchor=k.textAnchor;a.fontArray=k.textFontArray;a.justify=k.textJustify;a.letterSpacing=k.textLetterSpacing;a.maxWidth=k.textMaxWidth;a.offset=k.textOffset;l=b?a.keepUpright:a.writingMode&&0<=a.writingMode.indexOf(1);let w=.5;switch(a.anchor){case 5:case 1:case 7:w=0;break;case 6:case 2:case 8:w=1}let u=.5;switch(a.anchor){case 5:case 3:case 6:u=0;break;case 7:case 4:case 8:u=1}let A=
.5;switch(a.justify){case 0:A=w;break;case 1:A=0;break;case 3:A=1}const B=a.letterSpacing*M.SDF_GLYPH_SIZE,x=b?0:a.maxWidth*M.SDF_GLYPH_SIZE,D=a.lineHeight*M.SDF_GLYPH_SIZE;let F;F=a.fontArray.map(C=>q.getGlyphItems(C));if((l=(new M.TextShaping(F,x,D,B,w,u,A)).getShaping(g,k.rtl,l))&&0<l.length){m=1E30;g=-1E30;for(const C of l)m=Math.min(m,C.x),g=Math.max(g,C.x);m=(g-m+2*M.SDF_GLYPH_SIZE)*c*H.TILE_PIXEL_RATIO}}for(let w of k.geometry){g=[];1===e?(l&&0<l.length&&a&&a.size&&(w=v._smoothVertices(w,a.size*
H.TILE_PIXEL_RATIO*(2+Math.min(2,4*Math.abs(a.offset[1]))))),v._pushAnchors(g,w,h,m)):2===e?v._pushCenterAnchor(g,w):3===k.type?v._pushCentroid(g,w):g.push(new H.Anchor(w[0].x,w[0].y));for(const u of g)0>u.x||u.x>H.TILE_COORD_SIZE||0>u.y||u.y>H.TILE_COORD_SIZE||b&&0<m&&0===a.rotationAlignment&&!v._honorsTextMaxAngle(w,u,m,f,p)||(g={shaping:l,line:w,iconMosaicItem:t,anchor:u,symbolFeature:k,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]},d.push(g),this._processFeature(g,
n,a))}}d.sort(Y);this._addPlacedGlyphs();this._symbolInstances=d};K.serialize=function(){var e=13+this.layerUIDs.length;e+=3*this.markerPageMap.size;e+=3*this.glyphsPageMap.size;e+=v.symbolsSerializationLength(this._symbolInstances);e+=this._iconVertexBuffer.array.length;e+=this._iconIndexBuffer.array.length;e+=this._textVertexBuffer.array.length;e+=this._textIndexBuffer.array.length;let a=0;const c=new Uint32Array(e);e=new Int32Array(c.buffer);var b=new Float32Array(c.buffer);c[a++]=this.type;c[a++]=
this.layerUIDs.length;for(let h=0;h<this.layerUIDs.length;h++)c[a++]=this.layerUIDs[h];c[a++]=this._isIconSDF?1:0;c[a++]=this._iconVertexBuffer.isDataDriven()?1:0;c[a++]=this._textVertexBuffer.isDataDriven()?1:0;c[a++]=this.markerPageMap.size;this.markerPageMap.forEach(([h,d],f)=>{c[a++]=f;c[a++]=h;c[a++]=d});c[a++]=this.glyphsPageMap.size;this.glyphsPageMap.forEach(([h,d],f)=>{c[a++]=f;c[a++]=h;c[a++]=d});c[a++]=this._iconVertexBuffer.index/4;c[a++]=this._textVertexBuffer.index/4;a=v.serializeSymbols(c,
e,b,a,this._symbolInstances);c[a++]=this._iconVertexBuffer.array.length;for(b=0;b<this._iconVertexBuffer.array.length;b++)e[a++]=this._iconVertexBuffer.array[b];c[a++]=this._iconIndexBuffer.array.length;for(b=0;b<this._iconIndexBuffer.array.length;b++)c[a++]=this._iconIndexBuffer.array[b];c[a++]=this._textVertexBuffer.array.length;for(b=0;b<this._textVertexBuffer.array.length;b++)e[a++]=this._textVertexBuffer.array[b];c[a++]=this._textIndexBuffer.array.length;for(e=0;e<this._textIndexBuffer.array.length;e++)c[a++]=
this._textIndexBuffer.array[e];return c.buffer};v.symbolsSerializationLength=function(e){let a;a=1;for(const c of e||[]){a+=4;a+=1;for(const b of c.textColliders)a+=10;for(const b of c.iconColliders)a+=10;a+=1;a+=2*c.textVertexRanges.length;a+=1;a+=2*c.iconVertexRanges.length}return a};v.serializeSymbols=function(e,a,c,b,h){h=h||[];a[b++]=h.length;for(const d of h){a[b++]=d.anchor.x;a[b++]=d.anchor.y;a[b++]=d.symbolFeature.hash;a[b++]=d.symbolFeature.priority;a[b++]=d.textColliders.length+d.iconColliders.length;
for(const f of d.textColliders)a[b++]=f.xTile,a[b++]=f.yTile,a[b++]=f.dxPixels,a[b++]=f.dyPixels,a[b++]=f.hard?1:0,a[b++]=f.partIndex,c[b++]=f.minLod,c[b++]=f.maxLod,a[b++]=f.width,a[b++]=f.height;for(const f of d.iconColliders)a[b++]=f.xTile,a[b++]=f.yTile,a[b++]=f.dxPixels,a[b++]=f.dyPixels,a[b++]=f.hard?1:0,a[b++]=f.partIndex,c[b++]=f.minLod,c[b++]=f.maxLod,a[b++]=f.width,a[b++]=f.height;a[b++]=d.textVertexRanges.length;for(const [f,n]of d.textVertexRanges)a[b++]=f,a[b++]=n;a[b++]=d.iconVertexRanges.length;
for(const [f,n]of d.iconVertexRanges)a[b++]=f,a[b++]=n}return b};K._replaceKeys=function(e,a){return e.replace(/{([^{}]+)}/g,function(c,b){return b in a?a[b]:""})};K._processFeature=function(e,a,c){var b=e.line,h=e.iconMosaicItem,d=e.shaping,f=e.anchor,n=!!h,q=!0;n&&(q=a.optional||!h);var r=d&&0<d.length,p=!0;r&&(p=c.optional||!d||0===d.length);var l;n&&(l=this._placementEngine.getIconPlacement(f,h,a));if(l||q){var m;r&&(m=this._placementEngine.getTextPlacement(f,d,b,c));if(m||p){l&&m||(p||q?p||m?
q||l||(m=null):l=null:m=l=null);if(m&&(this._storePlacedGlyphs(e,m.shapes,this.zoom,c.rotationAlignment),m.textColliders)){e.textColliders=m.textColliders;for(var g of m.textColliders)if(g.minLod=Math.max(this.zoom+E.log2(g.minLod),0),g.maxLod=Math.min(this.zoom+E.log2(g.maxLod),25),c=g.angle)f=Math.cos(c),m=Math.sin(c),n=g.dxPixels*f-g.dyPixels*m,c=g.dxPixels*m+g.dyPixels*f,q=(g.dxPixels+g.width)*f-g.dyPixels*m,b=(g.dxPixels+g.width)*m+g.dyPixels*f,r=g.dxPixels*f-(g.dyPixels+g.height)*m,d=g.dxPixels*
m+(g.dyPixels+g.height)*f,p=(g.dxPixels+g.width)*f-(g.dyPixels+g.height)*m,m=(g.dxPixels+g.width)*m+(g.dyPixels+g.height)*f,f=Math.min(n,q,r,p),n=Math.max(n,q,r,p),q=Math.min(c,b,d,m),c=Math.max(c,b,d,m),g.dxPixels=f,g.dyPixels=q,g.width=n-f,g.height=c-q}if(l&&(this._addPlacedIcons(e,l.shapes,this.zoom,h.page,1===a.rotationAlignment),l.iconColliders)){e.iconColliders=l.iconColliders;for(const k of l.iconColliders)if(k.minLod=Math.max(this.zoom+E.log2(k.minLod),0),k.maxLod=Math.min(this.zoom+E.log2(k.maxLod),
25),e=k.angle)l=Math.cos(e),f=Math.sin(e),g=k.dxPixels*l-k.dyPixels*f,e=k.dxPixels*f+k.dyPixels*l,c=(k.dxPixels+k.width)*l-k.dyPixels*f,a=(k.dxPixels+k.width)*f+k.dyPixels*l,b=k.dxPixels*l-(k.dyPixels+k.height)*f,h=k.dxPixels*f+(k.dyPixels+k.height)*l,d=(k.dxPixels+k.width)*l-(k.dyPixels+k.height)*f,f=(k.dxPixels+k.width)*f+(k.dyPixels+k.height)*l,l=Math.min(g,c,b,d),g=Math.max(g,c,b,d),c=Math.min(e,a,h,f),e=Math.max(e,a,h,f),k.dxPixels=l,k.dyPixels=c,k.width=g-l,k.height=e-c}}}};K._addPlacedIcons=
function(e,a,c,b,h){const d=e.symbolFeature.ddIconValues,f=Math.max(c-1,0),n=this._iconVertexBuffer,q=this._iconIndexBuffer,r=this._markerMap;for(const l of a){a=h?0:Math.max(c+E.log2(l.minzoom),f);const m=h?25:Math.min(c+E.log2(l.maxzoom),25);if(m<=a)continue;const g=l.tl,k=l.tr,t=l.bl,w=l.br;var p=l.mosaicRect;const u=l.labelAngle,A=l.minAngle,B=l.maxAngle,x=l.anchor,D=n.index,F=p.x,C=p.y,N=F+p.width;p=C+p.height;const L=n.index;n.add(x.x,x.y,g.x,g.y,F,C,u,A,B,a,m,d);n.add(x.x,x.y,k.x,k.y,N,C,u,
A,B,a,m,d);n.add(x.x,x.y,t.x,t.y,F,p,u,A,B,a,m,d);n.add(x.x,x.y,w.x,w.y,N,p,u,A,B,a,m,d);0<e.iconVertexRanges.length&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===L?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([L,4]);q.add(D+0,D+1,D+2);q.add(D+1,D+2,D+3);r.has(b)?r.get(b)[1]+=6:r.set(b,[this._iconIndexStart+this._iconIndexCount,6]);this._iconIndexCount+=6}};K._addPlacedGlyphs=function(){const e=this._textVertexBuffer,a=this._textIndexBuffer,c=this._glyphMap;this._glyphBufferDataStorage.forEach((b,
h)=>{for(const d of b){b=e.index;const f=d.symbolInstance,n=f.symbolFeature.ddTextValues,q=e.index;e.add(d.glyphAnchor[0],d.glyphAnchor[1],d.tl[0],d.tl[1],d.xmin,d.ymin,d.labelAngle,d.minAngle,d.maxAngle,d.minLod,d.maxLod,n);e.add(d.glyphAnchor[0],d.glyphAnchor[1],d.tr[0],d.tr[1],d.xmax,d.ymin,d.labelAngle,d.minAngle,d.maxAngle,d.minLod,d.maxLod,n);e.add(d.glyphAnchor[0],d.glyphAnchor[1],d.bl[0],d.bl[1],d.xmin,d.ymax,d.labelAngle,d.minAngle,d.maxAngle,d.minLod,d.maxLod,n);e.add(d.glyphAnchor[0],d.glyphAnchor[1],
d.br[0],d.br[1],d.xmax,d.ymax,d.labelAngle,d.minAngle,d.maxAngle,d.minLod,d.maxLod,n);0<f.textVertexRanges.length&&f.textVertexRanges[0][0]+f.textVertexRanges[0][1]===q?f.textVertexRanges[0][1]+=4:f.textVertexRanges.push([q,4]);a.add(b+0,b+1,b+2);a.add(b+1,b+2,b+3);c.has(h)?c.get(h)[1]+=6:c.set(h,[this._textIndexStart+this._textIndexCount,6]);this._textIndexCount+=6}});this._glyphBufferDataStorage.clear()};K._storePlacedGlyphs=function(e,a,c,b){const h=Math.max(c-1,0);b=1===b;let d,f,n,q,r,p,l,m,
g,k;for(const t of a)a=b?0:Math.max(c+E.log2(t.minzoom),h),d=b?25:Math.min(c+E.log2(t.maxzoom),25),d<=a||(f=t.tl,n=t.tr,q=t.bl,r=t.br,p=t.labelAngle,l=t.minAngle,m=t.maxAngle,g=t.anchor,k=t.mosaicRect,this._glyphBufferDataStorage.has(t.page)||this._glyphBufferDataStorage.set(t.page,[]),this._glyphBufferDataStorage.get(t.page).push({glyphAnchor:[g.x,g.y],tl:[f.x,f.y],tr:[n.x,n.y],bl:[q.x,q.y],br:[r.x,r.y],xmin:k.x,ymin:k.y,xmax:k.x+k.width,ymax:k.y+k.height,labelAngle:p,minAngle:l,maxAngle:m,minLod:a,
maxLod:d,placementLod:h,symbolInstance:e}))};v._pushAnchors=function(e,a,c,b){c+=b;var h=0,d=a.length-1;for(var f=0;f<d;f++)h+=G.Point.distance(a[f],a[f+1]);b=.5*(b||c);if(!(h<=b)){b/=h;c=h/Math.max(Math.round(h/c),1);h=0;d=-c/2;f=a.length-1;for(let q=0;q<f;q++){const r=a[q],p=a[q+1],l=p.x-r.x,m=p.y-r.y,g=Math.sqrt(l*l+m*m);let k;for(;d+c<h+g;){d+=c;var n=(d-h)/g;const t=E.interpolate(r.x,p.x,n);n=E.interpolate(r.y,p.y,n);void 0===k&&(k=Math.atan2(m,l));e.push(new H.Anchor(t,n,k,q,b))}h+=g}}};v._pushCenterAnchor=
function(e,a){var c=0,b=a.length-1;for(var h=0;h<b;h++)c+=G.Point.distance(a[h],a[h+1]);var d=c/2;let f=0;const n=a.length-1;for(c=0;c<n;c++){var q=a[c];const r=a[c+1];b=r.x-q.x;h=r.y-q.y;const p=Math.sqrt(b*b+h*h);if(d<f+p){d=(d-f)/p;a=E.interpolate(q.x,r.x,d);q=E.interpolate(q.y,r.y,d);e.push(new H.Anchor(a,q,Math.atan2(h,b),c,0));break}f+=p}};v._deviation=function(e,a,c){return Math.atan2((a.x-e.x)*(c.y-a.y)-(a.y-e.y)*(c.x-a.x),(a.x-e.x)*(c.x-a.x)+(a.y-e.y)*(c.y-a.y))};v._honorsTextMaxAngle=function(e,
a,c,b,h){let d=0;c/=2;for(var f=new G.Point(a.x,a.y),n=a.segment+1;d>-c;){--n;if(0>n)return!1;d-=G.Point.distance(e[n],f);f=e[n]}d+=G.Point.distance(e[n],e[n+1]);a=[];f=0;const q=e.length;for(;d<c;){var r=e[n];let p;do{++n;if(n===q)return!1;p=e[n]}while(p.isEqual(r));let l=n,m;do{++l;if(l===q)return!1;m=e[l]}while(m.isEqual(p));r=this._deviation(r,p,m);a.push({deviation:r,distToAnchor:d});for(f+=r;d-a[0].distToAnchor>h;)f-=a.shift().deviation;if(Math.abs(f)>b)return!1;d+=G.Point.distance(p,m)}return!0};
v._smoothVertices=function(e,a){if(0>=a)return e;let c=e.length;if(3>c)return e;const b=[];var h=0,d=0;b.push(0);for(var f=1;f<c;f++){var n=G.Point.distance(e[f],e[f-1]);0<n&&(h+=n,b.push(h),d++,d!==f&&(e[d]=e[f]))}c=d+1;if(3>c)return e;a=Math.min(a,.2*h);h=e[0].x;d=e[0].y;f=e[c-1].x;n=e[c-1].y;var q=G.Point.sub(e[0],e[1]);q.normalize();e[0].x+=a*q.x;e[0].y+=a*q.y;q.assignSub(e[c-1],e[c-2]);q.normalize();e[c-1].x+=a*q.x;e[c-1].y+=a*q.y;b[0]-=a;b[c-1]+=a;q=[];q.push(new G.Point(h,d));const r=.5*a;
for(let x=1;x<c-1;x++){let D=0,F=0,C=0;for(var p=x-1;0<=p;p--){var l=r+b[p+1]-b[x];if(0>l)break;var m=b[p+1]-b[p],g=b[x]-b[p]<r?1:l/m;if(1E-6>g)break;var k=g*g,t=g*l-.5*k*m,w=g*m/a,u=e[p+1],A=e[p].x-u.x,B=e[p].y-u.y;D+=w/t*(u.x*g*l+.5*k*(l*A-m*u.x)-k*g*m*A/3);F+=w/t*(u.y*g*l+.5*k*(l*B-m*u.y)-k*g*m*B/3);C+=w}for(p=x+1;p<c;p++){l=r-b[p-1]+b[x];if(0>l)break;m=b[p]-b[p-1];g=b[p]-b[x]<r?1:l/m;if(1E-6>g)break;k=g*g;t=g*l-.5*k*m;w=g*m/a;u=e[p-1];A=e[p].x-u.x;B=e[p].y-u.y;D+=w/t*(u.x*g*l+.5*k*(l*A-m*u.x)-
k*g*m*A/3);F+=w/t*(u.y*g*l+.5*k*(l*B-m*u.y)-k*g*m*B/3);C+=w}q.push(new G.Point(D/C,F/C))}q.push(new G.Point(f,n));e[0].x=h;e[0].y=d;e[c-1].x=f;e[c-1].y=n;return q};v._pushCentroid=function(e,a){const c=a.length-1;let b=0,h=0,d=0,f=a[0].x,n=a[0].y;4096<f&&(f=4096);0>f&&(f=0);4096<n&&(n=4096);0>n&&(n=0);for(let q=1;q<c;q++){let r=a[q].x,p=a[q].y,l=a[q+1].x,m=a[q+1].y;4096<r&&(r=4096);0>r&&(r=0);4096<p&&(p=4096);0>p&&(p=0);4096<l&&(l=4096);0>l&&(l=0);4096<m&&(m=4096);0>m&&(m=0);const g=(r-f)*(m-n)-(l-
f)*(p-n);b+=g*(f+r+l);h+=g*(n+p+m);d+=g}b/=3*d;h/=3*d;isNaN(b)||isNaN(h)||e.push(new H.Anchor(b,h))};S._createClass(v,[{key:"markerPageMap",get:function(){return this._markerMap}},{key:"glyphsPageMap",get:function(){return this._glyphMap}},{key:"symbolInstances",get:function(){return this._symbolInstances}}]);return v}(P);P._bidiEngine=new X;return P});