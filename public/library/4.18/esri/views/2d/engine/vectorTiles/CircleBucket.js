// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/_rollupPluginBabelHelpers","./BaseBucket"],function(u,y){return function(v){function t(a,c,d,b){a=v.call(this,a,c)||this;a.type=4;a._circleVertexBuffer=d;a._circleIndexBuffer=b;return a}u._inheritsLoose(t,v);var w=t.prototype;w.processFeatures=function(a){const c=this._circleVertexBuffer,d=this._circleIndexBuffer;this._circleIndexStart=3*d.index;this._circleIndexCount=0;const b=this.layer,h=this.zoom;a&&a.setExtent(this.layerExtent);let k=1,l=[1,1,1,1],m=1,n=0,p=1,q=[1,
1,1,1],r=1;for(const f of this._features){var e=f.getGeometry(a);if(e){b.hasDataDrivenRadius&&(k=b.getPaintValue("circle-radius",h,f));b.hasDataDrivenColor&&(l=b.getPaintValue("circle-color",h,f));b.hasDataDrivenOpacity&&(m=b.getPaintValue("circle-opacity",h,f));b.hasDataDrivenStrokeWidth&&(p=b.getPaintValue("circle-stroke-width",h,f));b.hasDataDrivenStrokeColor&&(q=b.getPaintValue("circle-stroke-color",h,f));b.hasDataDrivenStrokeOpacity&&(r=b.getPaintValue("circle-stroke-opacity",h,f));b.hasDataDrivenBlur&&
(n=b.getPaintValue("circle-blur",h,f));for(const x of e)if(x)for(const g of x)e=c.index,c.add(g.x,g.y,0,0,k,l,m,n,p,q,r),c.add(g.x,g.y,0,1,k,l,m,n,p,q,r),c.add(g.x,g.y,1,0,k,l,m,n,p,q,r),c.add(g.x,g.y,1,1,k,l,m,n,p,q,r),d.add(e+0,e+1,e+2),d.add(e+1,e+2,e+3),this._circleIndexCount+=6}}};w.serialize=function(){var a=6+this.layerUIDs.length;a+=this._circleVertexBuffer.array.length;a+=this._circleIndexBuffer.array.length;let c=0;a=new Uint32Array(a);var d=new Int32Array(a.buffer);a[c++]=this.type;a[c++]=
this.layerUIDs.length;for(var b=0;b<this.layerUIDs.length;b++)a[c++]=this.layerUIDs[b];a[c++]=this._circleIndexStart;a[c++]=this._circleIndexCount;a[c++]=this._circleVertexBuffer.array.length;for(b=0;b<this._circleVertexBuffer.array.length;b++)d[c++]=this._circleVertexBuffer.array[b];a[c++]=this._circleIndexBuffer.array.length;for(d=0;d<this._circleIndexBuffer.array.length;d++)a[c++]=this._circleIndexBuffer.array[d];return a.buffer};u._createClass(t,[{key:"circleIndexStart",get:function(){return this._circleIndexStart}},
{key:"circleIndexCount",get:function(){return this._circleIndexCount}}]);return t}(y)});