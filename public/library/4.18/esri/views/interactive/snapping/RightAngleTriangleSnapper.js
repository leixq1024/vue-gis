// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingAlgorithm ../../3d/support/geometryUtils/vector2d ./RightAngleTriangleSnappingCandidate".split(" "),function(p,u,v,q,r,h,k,l,w,x){l=function(t){function m({enabled:d=h.defaults.lineSnapper.enabled,proximityThreshold:c=h.defaults.lineProximityThreshold,shortLineThreshold:a=h.defaults.shortLineThreshold}={}){return t.call(this,{enabled:d,proximityThreshold:c,
shortLineThreshold:a})||this}u._inheritsLoose(m,t);var n=m.prototype;n.snapNewVertex=function(d,c){const a=c.geometry.data.components[0],b=[],e=a.vertices.length;if("polygon"!==c.geometry.type||2>e)return b;this._processCandidateProposal(a.vertices[0].pos,a.vertices[e-1].pos,d,c,b);return b};n.snapExistingVertex=function(d,c){const a=[],b=v.unwrap(c.vertexHandle),e=b.component;if(2>e.edges.length||"polyline"===c.geometry.type&&(0===b.index||b.index===e.vertices.length-1))return a;this._processCandidateProposal(b.left.left.pos,
b.right.right.pos,d,c,a);return a};n._processCandidateProposal=function(d,c,a,b,e){if(this.exceedsShortLineThreshold(d,c,b)){var f=r.lerp(q.create(),d,c,.5),g=.5*r.distance(d,c);g=w.projectPointToCircle(q.create(),[a.x,a.y],f,g);f=b.geometry.data.coordinateHelper;g=f.fromXYZ(g,a.hasZ?a.z:0);a=f.fromPoint(a);a=k.anyMapPointToScreenPoint(a,f,b.elevationInfo,b.view);k.squareDistance(a,k.anyMapPointToScreenPoint(g,f,b.elevationInfo,b.view))<this.squaredProximityTreshold(b.pointer)&&e.push(new x.RightAngleTriangleSnappingCandidate({coordinateHelper:f,
targetPoint:g,point1:d,point2:c}))}};return m}(l.SnappingAlgorithm);p.RightAngleTriangleSnapper=l;Object.defineProperty(p,"__esModule",{value:!0})});