// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),function(f,b,k,u,B,m,w,H,K,A,v,p,c,g){var d;
k=d=function(h){function r(x){x=h.call(this,x)||this;x.color=new g([0,0,0,1]);return x}f._inheritsLoose(r,h);r.prototype.clone=function(){return new d(u.clone({color:this.color}))};return r}(c.JSONSupport);b.__decorate([w.property({type:g,json:{write:!0}})],k.prototype,"color",void 0);return k=d=b.__decorate([K.subclass("esri.webmap.background.ColorBackground")],k)})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils"],function(f,b,k){function u(d,
h){const {format:r,quality:x,rotation:C,disableDecorations:E}=d||{};var D=K(d,h.padding);var z=h.width-D.left-D.right;h=h.height-D.top-D.bottom;D={x:0,y:0,width:z,height:h};if(d&&d.area){null!=d.area.x&&(D.x=Math.floor(d.area.x));null!=d.area.y&&(D.y=Math.floor(d.area.y));var q=null!=d.area.width?Math.floor(d.area.width):null,n=null!=d.area.height?Math.floor(d.area.height):null;D.width=z-D.x;D.height=h-D.y;null!=q&&null!=n?(D.width=Math.min(D.width,q),D.height=Math.min(D.height,n)):null==q&&null!=
n?(q=Math.min(D.width,q),D.height*=q/D.width,D.width=q):null!=q&&null==n&&(q=Math.min(D.height,n),D.width*=q/D.height,D.height=q)}D=H(D,d);q=Math.floor(Math.max(D.x,0));n=Math.floor(Math.max(D.y,0));z={x:q,y:n,width:Math.floor(Math.min(D.width,z-q)),height:Math.floor(Math.min(D.height,h-n))};h=z.width/z.height;D=D.width/D.height;D!==h&&(D>h?(h=Math.floor(z.width/D),z={x:z.x,y:Math.floor(z.y+(z.height-h)/2),width:z.width,height:h}):(h=Math.floor(z.height*D),z={x:Math.floor(z.x+(z.width-h)/2),y:z.y,
width:h,height:z.height}));const {width:t,height:I}=w(d,z);a:switch(r){case "png":case "jpg":case "jpeg":h=r;break a;case null:case void 0:h="png";break a;default:h="png"}D=c[h];D=k.clamp(null!=x?x:D,0,100);return{format:h,quality:D,area:z,width:t,height:I,rotation:C,disableDecorations:!!E,ignoreBackground:!(!d||!d.ignoreBackground),ignorePadding:!(!d||!d.ignorePadding)}}function B(d,h){return d.toDataURL(p[h.format],h.quality/100)}function m(d,h,r){r||(A||(A=document.createElement("canvas"),A.width=
1,A.height=1),r=A);return r.getContext("2d").createImageData(d,h)}function w(d,h){if(!d)return h;const r=d.width;d=d.height;if(null!=r&&null!=d)return{width:Math.floor(r),height:Math.floor(d)};if(null==r&&null==d)return h;h=h.width/h.height;return null==d?{width:Math.floor(r),height:Math.floor(r/h)}:{width:Math.floor(d*h),height:Math.floor(d)}}function H(d,h){if(!h||null==h.width||null==h.height)return d;h=h.width/h.height;const r=d.width/d.height;if(r===h)return d;if(r<h)return h=Math.floor(d.height*
h),d.x-=(h-d.width)/2,d.width=h,d;h=Math.floor(d.width/h);d.y-=(h-d.height)/2;d.height=h;return d}function K(d,h){return!h||d&&d.ignorePadding?g:h}let A=null,v=!0;const p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},c={png:100,jpg:98,jpeg:98},g={top:0,right:0,bottom:0,left:0};f.completeUserSettings=u;f.createEmptyImageData=function(d,h,r){if(!d||!h)throw Error("Cannot construct image data without dimensions");if(v)try{return new ImageData(d,h)}catch(x){v=!1}return m(d,h,r)};f.encodeResult=
function(d,h,r,x){if(x.premultipliedAlpha){{var C=d.data;const D=C.length;for(let z=0;z<D;z+=4){var E=C[z+3];0<E&&(E/=255,C[z+0]/=E,C[z+1]/=E,C[z+2]/=E)}}}r.width=d.width;r.height=d.height;C=r.getContext("2d");C.putImageData(d,0,0);x.flipY&&(C.save(),C.globalCompositeOperation="copy",C.scale(1,-1),C.translate(0,-C.canvas.height),C.drawImage(C.canvas,0,0),C.restore());d=C.getImageData(0,0,d.width,d.height);h=B(r,h);r.width=0;r.height=0;return{dataUrl:h,data:d}};f.resampleHermite=function(d,h,r,x=0,
C=0,E=d.width-x,D=d.height-C,z=!1){const {data:q}=d,{width:n,height:t,data:I}=h;E/=n;D/=t;const J=Math.ceil(E/2),Q=Math.ceil(D/2);d=d.width;for(let ha=0;ha<t;ha++)for(let ka=0;ka<n;ka++){const y=4*(ka+(z?t-ha-1:ha)*n);let F=0,Z=0,pa=0,S=0,T=0,X=0;const ja=(ha+.5)*D;for(let oa=Math.floor(ha*D);oa<(ha+1)*D;oa++){var aa=Math.abs(ja-(oa+.5))/Q;const ca=(ka+.5)*E;aa*=aa;for(let V=Math.floor(ka*E);V<(ka+1)*E;V++){var ea=Math.abs(ca-(V+.5))/J;ea=Math.sqrt(aa+ea*ea);if(1<=ea)continue;ea=2*ea*ea*ea-3*ea*ea+
1;const ba=4*(x+V+(C+oa)*d);X+=ea*q[ba+3];Z+=ea;!r&&255>q[ba+3]&&(ea=ea*q[ba+3]/255);pa+=ea*q[ba];S+=ea*q[ba+1];T+=ea*q[ba+2];F+=ea}}I[y]=pa/F;I[y+1]=S/F;I[y+2]=T/F;I[y+3]=X/Z}return h};f.screenshotSuperSampleSettings=function(d,h,r){if(!h)return d;const {framebufferWidth:x,framebufferHeight:C,pixelRatio:E,region:D}=d;h=K(d,r);r=h.left+h.right;const z=h.top+h.bottom,q=x-r,n=C-z,t=Math.min(8,Math.min((2048-r)/q,(2048-z)/n));return 1.5>t?d:{...d,framebufferWidth:Math.round(q*t)+r,framebufferHeight:Math.round(n*
t)+z,pixelRatio:E*t,resample:{region:{x:Math.round((D.x-h.left)*t)+h.left,y:Math.round((D.y-h.top)*t)+h.top,width:Math.round(D.width*t),height:Math.round(D.height*t)},width:x,height:C}}};f.toDataUrl=B;f.toRenderSettings=function(d,h){const r=u(d,h),x=r.area,C=r.width/x.width,E=K(r,h.padding),D=E.left+E.right,z=E.top+E.bottom;return{framebufferWidth:Math.floor((h.width-D)*C+D),framebufferHeight:Math.floor((h.height-z)*C+z),region:{x:Math.floor(x.x*C)+E.left,y:Math.floor(x.y*C)+E.top,width:r.width,
height:r.height},format:r.format,quality:r.quality,rotation:r.rotation,pixelRatio:C,layers:d&&d.layers?d.layers:[],disableDecorations:r.disableDecorations,ignoreBackground:r.ignoreBackground,ignorePadding:r.ignorePadding}};f.wrapImageData=function(d,h,r,x){if(!h||!r)throw Error("Cannot construct image data without dimensions");if(v)try{return new ImageData(d,h,r)}catch(C){v=!1}h=m(h,r,x);h.data.set(d,0);return h};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/ArrayPool ../core/Handles ../core/watchUtils".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d){function h(C,E){return E?r[C].valueToClassName[E].split(" "):[]}const r={widthBreakpoint:{getValue(C){const E=C.viewSize[0];C=C.breakpoints;const D=this.values;return E<=C.xsmall?D.xsmall:E<=C.small?D.small:E<=C.medium?D.medium:E<=C.large?D.large:D.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(C){const E=C.viewSize[1];C=C.breakpoints;const D=this.values;return E<=C.xsmall?D.xsmall:E<=C.small?D.small:E<=C.medium?D.medium:E<=C.large?D.large:D.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(C){C=C.viewSize;const E=this.values;return C[1]>=C[0]?E.portrait:E.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},x={xsmall:544,small:768,medium:992,large:1200};f.BreakpointsOwner=
C=>{C=function(E){function D(...q){q=E.call(this,...q)||this;q._breakpointsHandles=new g;q.orientation=null;q.widthBreakpoint=null;q.heightBreakpoint=null;q.breakpoints=x;return q}b._inheritsLoose(D,E);var z=D.prototype;z.initialize=function(){this._breakpointsHandles.add(d.init(this,["breakpoints","size"],this._updateClassNames))};z.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};z._updateClassNames=function(){if(this.container){var q=
c.acquire(),n=c.acquire(),t=!1,I;for(I in r){const J=this[I],Q=r[I].getValue({viewSize:this.size,breakpoints:this.breakpoints});J!==Q&&(t=!0,this[I]=Q,h(I,J).forEach(aa=>n.push(aa)),h(I,Q).forEach(aa=>q.push(aa)))}t&&(this._applyClassNameChanges(q,n),c.release(q),c.release(n))}};z._applyClassNameChanges=function(q,n){const t=this.container;t&&(n.forEach(I=>t.classList.remove(I)),q.forEach(I=>t.classList.add(I)))};z._removeActiveClassNames=function(){const q=this.container;if(q)for(var n in r)h(n,
this[n]).forEach(t=>q.classList.remove(t))};b._createClass(D,[{key:"breakpoints",set:function(q){var n=this._get("breakpoints");if(q!==n){n=(n=q)&&n.xsmall<n.small&&n.small<n.medium&&n.medium<n.large;if(!n){const t=JSON.stringify(x,null,2);console.warn("provided breakpoints are not valid, using defaults:"+t)}q=n?q:x;this._set("breakpoints",{...q})}}}]);return D}(C);k.__decorate([w.property()],C.prototype,"breakpoints",null);k.__decorate([w.property()],C.prototype,"orientation",void 0);k.__decorate([w.property()],
C.prototype,"widthBreakpoint",void 0);k.__decorate([w.property()],C.prototype,"heightBreakpoint",void 0);return C=k.__decorate([K.subclass("esri.views.BreakpointsOwner")],C)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/MapViewBase":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../geometry/Point ../geometry/Extent ../geometry ../core/screenUtils ../Viewpoint ../core/watchUtils ../layers/support/TileInfo ./View ./2d/tiling/TileKey ./PopupView ./ViewAnimation ./2d/viewpointUtils ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/support/Timeline".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z,q,n,t,I,J,Q,aa,ea,ha,ka,y,F,Z,pa,S,T){const X=B.getLogger("esri.views.MapView");k=function(ja){function oa(V){var ba=ja.call(this,V)||this;ba._stationaryTimer=null;ba.frameTask=new ea(f._assertThisInitialized(ba));ba.featuresTilingScheme=null;ba.fullOpacity=1;ba.graphicsView=null;ba.initialExtent=null;ba.labelManager=null;ba.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};ba.resizeAlign=
"center";ba.supportsGround=!1;ba.timeline=new T.Timeline;ba.type="2d";ba.constraints=new ka;ba.padding={top:0,right:0,bottom:0,left:0};const ra=ba.handles,la=()=>ba.notifyChange("updating");ra.add([ba.watch("viewpoint",()=>{ba._lastStationaryEventTimestamp=performance.now();ba._flipStationary(160)},!0),ba.on("resize",a=>ba._resizeHandler(a)),ba.watch("animationManager.animation",a=>{ba.animation=a}),ba.allLayerViews.on("change",()=>{la();ra.remove("map-view-base-layerViewsUpdating");ra.add(ba.allLayerViews.map(a=>
a.watch("updating",la)),"map-view-base-layerViewsUpdating")})],"map-view-base");return ba}f._inheritsLoose(oa,ja);var ca=oa.prototype;ca.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};ca.goTo=function(V,ba){if(V)return this.animation&&(this.animation=null),this._createAnimation(),z.whenTrueOnce(this,"ready",ba&&ba.signal).then(()=>{const ra={animate:!0,...ba},la=Q.createAsync(V,this);this.animation.update(la);this._gotoTask={};return ra.animate?
this._gotoAnimated(la,ra):this._gotoImmediate(la,ra)});X.error("#goTo()","target cannot be null or undefined")};ca.hitTest=function(V){return g.reject("Should be implemented by subclasses")};ca.popupHitTest=function(V){return this.hitTest(V).then(ba=>({...ba,mapPoint:this.toMap(V)}))};ca.toMap=function(V){if(!this.ready)return null;const [ba,ra]=this.state.toMap([0,0],[V.x,V.y]);return new r({x:ba,y:ra,spatialReference:this.spatialReference})};ca.isTileInfoRequired=function(){return!0};ca.toScreen=
function(V){if(!this.ready)return null;V=this._normalizeInput(V);V=[V.x,V.y];this.state.toScreen(V,V);return E.createScreenPoint(V[0],V[1])};ca.pixelSizeAt=function(){return this.ready?this.state.resolution:(X.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};ca.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};ca.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||
null};ca.isSpatialReferenceSupported=function(V,ba){return ba||this._get("ready")?!0:null!==this._getDefaultViewpoint()};ca.importLayerView=function(V){return ha.layerView2DImporter.importLayerView(V)};ca.hasLayerViewModule=function(V){return ha.layerView2DImporter.hasLayerViewModule(V)};ca._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new J;return this.animation};ca._cancellableGoTo=function(V,ba,ra){const la=()=>V===this._gotoTask,a=ra.then(()=>{la()&&(this.animation=
null)}).catch(L=>{la()&&(this.animation=null,ba.done||(ba.stop(),this.frameTask.animationInProgress=!1));throw L;}),e=g.create(L=>L(a));ba.when().catch(()=>{la()&&e.cancel&&e.cancel()});return e};ca._gotoImmediate=function(V,ba){const ra=this._gotoTask,la=this.animation;V=V.then(a=>{g.throwIfAborted(ba);if(ra!==this._gotoTask)throw new A("view:goto-interrupted","Goto was interrupted");this.viewpoint=la.target=a;la.finish()});return this._cancellableGoTo(ra,la,V)};ca._gotoAnimated=function(V,ba){const ra=
this._gotoTask,la=this.animation;V=V.then(a=>{g.throwIfAborted(ba);if(ra!==this._gotoTask)throw new A("view:goto-interrupted","Goto was interrupted");la.update(a);this.animationManager.animate(la,this.viewpoint,ba);return la.when().then(()=>{},()=>{})});return this._cancellableGoTo(ra,la,V)};ca._resizeHandler=function(V){const ba=this.state;if(ba){var ra=this.state.paddedViewState.viewpoint,la=this.state.paddedViewState.size.concat();ba.size=[V.width,V.height];Q.resize(ra,ra,la,this.state.paddedViewState.size,
this.resizeAlign);ra=this.constraints.constrain(ra,null);this.state.viewpoint=ra}};ca._startup=function(){const V=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(V);this._set("animationManager",new aa({view:this}));this._set("state",new y({padding:this._get("padding"),size:this.size,viewpoint:V}));this._set("featuresTilingScheme",new Z(q.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};ca._teardown=
function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const {center:[V,ba],spatialReference:ra,rotation:la,scale:a}=this.state.paddedViewState,e=new r({x:V,y:ba,spatialReference:ra});this._set("viewpoint",null);this._set("extent",null);this._set("center",e);this._set("zoom",-1);this._set("rotation",la);this._set("scale",a);this._set("spatialReference",ra);this.constraints.view=null;this.animationManager.destroy();
this._set("animationManager",null);this._set("state",null);this.animation=null};ca._flipStationary=function(V){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const ba=performance.now()-this._lastStationaryEventTimestamp;160>ba&&(this._stationaryTimer=this._flipStationary(ba))},V)};ca._normalizeInput=function(V,ba=this.spatialReference){const ra=V&&V.targetGeometry||V;return ba?ra?ba.equals(ra.spatialReference)?V:h.canProject(ra,
ba)?V&&"esri.Viewpoint"===V.declaredClass?(V.targetGeometry=h.project(ra,ba),V):h.project(ra,ba):null:null:V};ca._getDefaultViewpoint=function(){var V=this.constraints,ba=this._get("zoom"),ra=this._get("scale"),la=this._normalizeInput(this._get("center")),a=this._normalizeInput(this._get("extent")),e=this._get("rotation"),L=this._normalizeInput(this._get("viewpoint"));V.effectiveLODs?-1!==ba&&(ra=V.zoomToScale(ba)):ba=-1;let l=null;var G=null;ba=0;V=L&&L.rotation;var M=L&&L.targetGeometry;u.isSome(M)&&
("extent"===M.type?l=M:"point"===M.type&&(G=M,ba=L.scale));L=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));M=this._normalizeInput(this.initialExtent);a=a||l||L||M;la=la||G||a&&a.center;G=this.get("map.initialViewProperties.viewpoint.scale");ra=ra||ba||G||a&&Q.extentToScale(a,this.size);ba=this.get("map.initialViewProperties.viewpoint.rotation");return la&&ra?new D({targetGeometry:la,scale:ra,rotation:e||V||ba||0}):null};f._createClass(oa,[{key:"animation",
set:function(V){var ba=this._get("animation");V!==ba&&(ba&&ba.stop(),!V||V.isFulfilled()?this._set("animation",null):(this._set("animation",V),this.frameTask.animationInProgress=!0,ba=()=>{V===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());this.frameTask.animationInProgress=!1},V.when(ba,ba)))}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:V,spatialReference:ba}=this.state.paddedViewState;return new r({x:V[0],y:V[1],spatialReference:ba})},
set:function(V){if(null!=V)if(this._normalizeInput(V))if(this.ready){var ba=this.viewpoint;Q.centerAt(ba,ba,V);this.viewpoint=ba}else this._set("center",V),this.notifyChange("initialExtentRequired");else X.error("#center",`incompatible spatialReference ${JSON.stringify(V.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}},{key:"constraints",set:function(V){const ba=this._get("constraints");ba&&(this.handles.remove("map-view-base-constraints"),ba.destroy());
this._set("constraints",V);V&&(V.view=this,this.ready&&(this.state.viewpoint=V.fit(this.state.paddedViewState.viewpoint)),this.handles.add(V.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=V.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(V){if(null!=V){var ba=this._normalizeInput(V);ba?ba.width&&ba.height?this.ready?(V=this.viewpoint,
Q.setExtent(V,V,ba,this.size,{constraints:this.constraints}),this.viewpoint=V):(this._set("extent",ba),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):X.error("#extent","invalid extent size"):X.error("#center",`incompatible spatialReference ${JSON.stringify(V.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},{key:"initialExtentRequired",get:function(){const {extent:V,
center:ba,scale:ra,viewpoint:la,zoom:a}=this;return this.get("map.initialViewProperties.viewpoint")||V||ba&&(0!==ra||-1!==a)||la?!1:!0}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(V){this.ready?(this.state.padding=V,this._set("padding",this.state.padding)):this._set("padding",V)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},
set:function(V){if(!isNaN(V))if(this.ready){var ba=this.viewpoint;Q.rotateTo(ba,ba,V);this.viewpoint=ba}else this._set("rotation",V)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(V){if(V&&!isNaN(V))if(this.ready){var ba=this.viewpoint;Q.scaleTo(ba,ba,V);this.viewpoint=ba}else{this._set("scale",V);this._set("zoom",-1);if(V=this._get("extent"))this._set("extent",null),this._set("center",V.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",
get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(V=>!V.destroyed&&!("layerViews"in V)&&!0===V.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const V=this.state.paddedViewState;return V&&V.viewpoint.clone()},
set:function(V){if(null!=V){var ba=this._normalizeInput(V);ba?this.ready?(V=new D({targetGeometry:new r,scale:0,rotation:0}),Q.copy(V,ba),this.constraints.constrain(V,this.state.paddedViewState.viewpoint),this.state.viewpoint=V,this.frameTask.requestFrame(),this._set("viewpoint",V)):(this._set("viewpoint",ba),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!V.scale||isNaN(V.scale)?X.error("#viewpoint",`invalid scale value of ${V.scale}`):
u.isNone(V.targetGeometry)?X.error("#viewpoint","geometry not defined"):X.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(V.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(V){if(null!=V){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",V);this._set("scale",0);var ba=this._get("extent");
ba&&(this._set("extent",null),this._set("center",ba.center))}this.constraints.effectiveLODs&&(ba=this.viewpoint,Q.scaleTo(ba,ba,this.constraints.zoomToScale(V)),this.viewpoint=ba,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}}}]);return oa}(I.PopupView(n));b.__decorate([w.property()],k.prototype,"_stationaryTimer",void 0);b.__decorate([w.property()],k.prototype,"animation",null);b.__decorate([w.property({readOnly:!0})],k.prototype,"animationManager",void 0);b.__decorate([w.property({value:null,
type:r,dependsOn:["state.id","ready"],autoTracked:!1})],k.prototype,"center",null);b.__decorate([w.property({type:ka})],k.prototype,"constraints",null);b.__decorate([w.property({value:null,type:x,dependsOn:["state.id","ready"],autoTracked:!1})],k.prototype,"extent",null);b.__decorate([w.property({readOnly:!0})],k.prototype,"featuresTilingScheme",void 0);b.__decorate([w.property()],k.prototype,"fullOpacity",void 0);b.__decorate([w.property()],k.prototype,"graphicsView",void 0);b.__decorate([w.property({type:x})],
k.prototype,"initialExtent",void 0);b.__decorate([w.property({dependsOn:["map.initialViewProperties?.viewpoint"],autoTracked:!1})],k.prototype,"initialExtentRequired",null);b.__decorate([w.property()],k.prototype,"labelManager",void 0);b.__decorate([w.property({value:{top:0,right:0,bottom:0,left:0},cast:ja=>({top:0,right:0,bottom:0,left:0,...ja})})],k.prototype,"padding",null);b.__decorate([w.property({type:Object})],k.prototype,"renderingOptions",void 0);b.__decorate([w.property()],k.prototype,"resizeAlign",
void 0);b.__decorate([w.property({readOnly:!0,dependsOn:["state.id"],autoTracked:!1})],k.prototype,"resolution",null);b.__decorate([w.property({value:0,type:Number,dependsOn:["state.id","ready"],autoTracked:!1})],k.prototype,"rotation",null);b.__decorate([w.property({value:0,type:Number,dependsOn:["state.id","ready"],autoTracked:!1})],k.prototype,"scale",null);b.__decorate([w.property({type:d,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"],autoTracked:!1})],
k.prototype,"spatialReference",void 0);b.__decorate([w.property({readOnly:!0})],k.prototype,"state",void 0);b.__decorate([w.property({dependsOn:["animation","navigating","resizing","_stationaryTimer"],autoTracked:!1})],k.prototype,"stationary",null);b.__decorate([w.property({readOnly:!0})],k.prototype,"supportsGround",void 0);b.__decorate([w.property({type:T.Timeline,readOnly:!0})],k.prototype,"timeline",void 0);b.__decorate([w.property({readOnly:!0})],k.prototype,"type",void 0);b.__decorate([w.property({readOnly:!0,
dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"],autoTracked:!1})],k.prototype,"updating",null);b.__decorate([w.property({value:null,type:D,dependsOn:["state.id","ready"],autoTracked:!1})],k.prototype,"viewpoint",null);b.__decorate([w.property({value:-1,dependsOn:["state.id"],autoTracked:!1})],k.prototype,"zoom",null);return k=b.__decorate([K.subclass("esri.views.MapViewBase")],k)})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z){var q;k=new w.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=q=function(n){function t(J){J=n.call(this,J)||this;J.dpi=96;J.format=null;J.origin=null;J.minScale=0;J.maxScale=0;J.size=null;J.spatialReference=null;return J}f._inheritsLoose(t,n);t.create=function(J=
{size:256,spatialReference:h.WebMercator}){var Q=J.resolutionFactor||1,aa=J.scales;const ea=J.size||256,ha=J.spatialReference||h.WebMercator;if(!d.isValid(ha)){Q=[];if(aa)for(J=0;J<aa.length;J++){var ka=aa[J];Q.push({level:J,scale:ka,resolution:ka})}else for(aa=5E-4,J=23;0<=J;J--)Q.unshift({level:J,scale:aa,resolution:aa}),aa*=2;return new q({dpi:96,lods:Q,origin:new x(0,0,ha),size:[ea,ea],spatialReference:ha})}ka=d.getInfo(ha);J=J.origin?new x({x:J.origin.x,y:J.origin.y,spatialReference:ha}):ka?
new x({x:ka.origin[0],y:ka.origin[1],spatialReference:ha}):new x({x:0,y:0,spatialReference:ha});ka=1/(39.37*E.getMetersPerUnitForSR(ha)*96);const y=[];if(aa)for(Q=0;Q<aa.length;Q++){var F=aa[Q];y.push({level:Q,scale:F,resolution:F*ka})}else{var Z=d.isGeographic(ha)?512/ea*5.916575275917094E8:256/ea*5.91657527591555E8;aa=Math.ceil(24/Q);y.push({level:0,scale:Z,resolution:Z*ka});for(F=1;F<aa;F++)Z/=Math.pow(2,Q),y.push({level:F,scale:Z,resolution:Z*ka})}return new q({dpi:96,lods:y,origin:J,size:[ea,
ea],spatialReference:ha})};var I=t.prototype;I.readOrigin=function(J,Q){return x.fromJSON({spatialReference:Q.spatialReference,...J})};I.readSize=function(J,Q){return[Q.cols,Q.rows]};I.writeSize=function(J,Q){Q.cols=J[0];Q.rows=J[0]};I.zoomToScale=function(J){const Q=this.scales;if(0>=J)return Q[0];if(J>=Q.length)return Q[Q.length-1];{const aa=Math.round(J);return Q[aa]+(aa-J)*(Q[Math.round(J-.5)]-Q[aa])}};I.scaleToZoom=function(J){const Q=this.scales,aa=Q.length-1;let ea=0;for(;ea<aa;ea++){const ha=
Q[ea],ka=Q[ea+1];if(ha<=J)break;if(ka===J)return ea+1;if(ha>J&&ka<J)return ea+1-(J-ka)/(ha-ka)}return ea};I.snapScale=function(J,Q=.95){J=this.scaleToZoom(J);return J%Math.floor(J)>=Q?this.zoomToScale(Math.ceil(J)):this.zoomToScale(Math.floor(J))};I.tileAt=function(J,Q,aa,ea){var ha=this.lodAt(J);if(!ha)return null;let ka;if("number"===typeof Q)ka=Q,Q=aa;else{if(d.equals(Q.spatialReference,this.spatialReference))ka=Q.x,Q=Q.y;else{ea=r.project(Q,this.spatialReference);if(!ea)return null;ka=ea.x;Q=
ea.y}ea=aa}aa=ha.resolution*this.size[0];ha=ha.resolution*this.size[1];ea||(ea={id:null,level:0,row:0,col:0,extent:D.create()});ea.level=J;ea.row=Math.floor((this.origin.y-Q)/ha+.001);ea.col=Math.floor((ka-this.origin.x)/aa+.001);this.updateTileInfo(ea);return ea};I.updateTileInfo=function(J){var Q=this.lodAt(J.level);if(Q){var aa=Q.resolution*this.size[0];Q=Q.resolution*this.size[1];J.id=`${J.level}/${J.row}/${J.col}`;J.extent||(J.extent=D.create());J.extent[0]=this.origin.x+J.col*aa;J.extent[1]=
this.origin.y-(J.row+1)*Q;J.extent[2]=J.extent[0]+aa;J.extent[3]=J.extent[1]+Q}};I.upsampleTile=function(J){const Q=this._upsampleLevels[J.level];if(!Q||-1===Q.parentLevel)return!1;J.level=Q.parentLevel;J.row=Math.floor(J.row/Q.factor+.001);J.col=Math.floor(J.col/Q.factor+.001);this.updateTileInfo(J);return!0};I.getTileBounds=function(J,Q){var {resolution:aa}=this.lodAt(Q.level);const ea=aa*this.size[0];aa*=this.size[1];J[0]=this.origin.x+Q.col*ea;J[1]=this.origin.y-(Q.row+1)*aa;J[2]=J[0]+ea;J[3]=
J[1]+aa;return J};I.lodAt=function(J){return this._levelToLOD&&this._levelToLOD[J]||null};I.clone=function(){return q.fromJSON(this.write({}))};I._initializeUpsampleLevels=function(){const J=this.lods;this._upsampleLevels=[];let Q=null;for(let aa=0;aa<J.length;aa++){const ea=J[aa];this._upsampleLevels[ea.level]={parentLevel:Q?Q.level:-1,factor:Q?Q.resolution/ea.resolution:0};Q=ea}};f._createClass(t,[{key:"isWrappable",get:function(){const {spatialReference:J,origin:Q}=this;if(J&&Q){const aa=d.getInfo(J);
return J.isWrappable&&Math.abs(aa.origin[0]-Q.x)<=aa.dx}return!1}},{key:"lods",set:function(J){let Q=0,aa=0;const ea=[];this._levelToLOD={};J&&(Q=-Infinity,aa=Infinity,J.forEach(ha=>{ea.push(ha.scale);Q=ha.scale>Q?ha.scale:Q;aa=ha.scale<aa?ha.scale:aa;this._levelToLOD[ha.level]=ha}));this._set("scales",ea);this._set("minScale",Q);this._set("maxScale",aa);this._set("lods",J);this._initializeUpsampleLevels()}}]);return t}(g.JSONSupport);b.__decorate([m.property({type:Number,json:{write:!0}})],g.prototype,
"compressionQuality",void 0);b.__decorate([m.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);b.__decorate([m.property({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);b.__decorate([m.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],g.prototype,"isWrappable",null);b.__decorate([m.property({type:x,json:{write:!0}})],g.prototype,"origin",void 0);b.__decorate([H.reader("origin")],g.prototype,"readOrigin",
null);b.__decorate([m.property({type:[z],value:null,json:{write:!0}})],g.prototype,"lods",null);b.__decorate([m.property({readOnly:!0})],g.prototype,"minScale",void 0);b.__decorate([m.property({readOnly:!0})],g.prototype,"maxScale",void 0);b.__decorate([m.property({readOnly:!0})],g.prototype,"scales",void 0);b.__decorate([m.property({cast:n=>Array.isArray(n)?n:"number"===typeof n?[n,n]:[256,256]})],g.prototype,"size",void 0);b.__decorate([H.reader("size",["rows","cols"])],g.prototype,"readSize",null);
b.__decorate([A.writer("size",{cols:{type:B.Integer},rows:{type:B.Integer}})],g.prototype,"writeSize",null);b.__decorate([m.property({type:h,json:{write:!0}})],g.prototype,"spatialReference",void 0);return g=q=b.__decorate([K.subclass("esri.layers.support.TileInfo")],g)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(f,b,k){function u(c=p){return[c[0],c[1],c[2],c[3]]}function B(c){return c[0]>=c[2]?0:c[2]-c[0]}function m(c){return c[1]>=
c[3]?0:c[3]-c[1]}function w(c,g,d){return g>=c[0]&&d>=c[1]&&g<=c[2]&&d<=c[3]}function H(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];return c}function K(c){return 4===c.length}function A(c,g,d){return c<g?g:c>d?d:c}const v=[Infinity,Infinity,-Infinity,-Infinity],p=[0,0,0,0];f.NEGATIVE_INFINITY=v;f.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];f.UNIT=[0,0,1,1];f.ZERO=p;f.allFinite=function(c){for(let g=0;4>g;g++)if(!isFinite(c[g]))return!1;return!0};f.area=function(c){return B(c)*m(c)};
f.center=function(c,g=[0,0]){g[0]=(c[0]+c[2])/2;g[1]=(c[1]+c[3])/2;return g};f.clone=function(c){return[c[0],c[1],c[2],c[3]]};f.contains=function(c,g){return g[0]>=c[0]&&g[2]<=c[2]&&g[1]>=c[1]&&g[3]<=c[3]};f.containsPoint=function(c,g){return w(c,g[0],g[1])};f.containsPointObject=function(c,g){return w(c,g.x,g.y)};f.containsPointWithMargin=function(c,g,d){return g[0]>=c[0]-d&&g[1]>=c[1]-d&&g[0]<=c[2]+d&&g[1]<=c[3]+d};f.containsXY=w;f.create=u;f.diameter=function(c){const g=B(c);c=m(c);return Math.sqrt(g*
g+c*c)};f.distance=function(c,g){const d=(c[1]+c[3])/2,h=Math.max(Math.abs(g[0]-(c[0]+c[2])/2)-B(c)/2,0);c=Math.max(Math.abs(g[1]-d)-m(c)/2,0);return Math.sqrt(h*h+c*c)};f.empty=function(c){return c?H(c,v):u(v)};f.equals=function(c,g,d){if(null==c||null==g)return c===g;if(!K(c)||!K(g))return!1;if(d)for(let h=0;h<c.length;h++){if(!d(c[h],g[h]))return!1}else for(d=0;d<c.length;d++)if(c[d]!==g[d])return!1;return!0};f.expand=function(c,g,d=c){if("length"in g)if(K(g))d[0]=Math.min(c[0],g[0]),d[1]=Math.min(c[1],
g[1]),d[2]=Math.max(c[2],g[2]),d[3]=Math.max(c[3],g[3]);else{if(2===g.length||3===g.length)d[0]=Math.min(c[0],g[0]),d[1]=Math.min(c[1],g[1]),d[2]=Math.max(c[2],g[0]),d[3]=Math.max(c[3],g[1])}else switch(g.type){case "extent":d[0]=Math.min(c[0],g.xmin);d[1]=Math.min(c[1],g.ymin);d[2]=Math.max(c[2],g.xmax);d[3]=Math.max(c[3],g.ymax);break;case "point":d[0]=Math.min(c[0],g.x),d[1]=Math.min(c[1],g.y),d[2]=Math.max(c[2],g.x),d[3]=Math.max(c[3],g.y)}return d};f.expandPointInPlace=function(c,g){g[0]<c[0]&&
(c[0]=g[0]);g[0]>c[2]&&(c[2]=g[0]);g[1]<c[1]&&(c[1]=g[1]);g[1]>c[3]&&(c[3]=g[1])};f.expandWithNestedArray=function(c,g,d=c){const h=g.length;let r=c[0],x=c[1],C=c[2];c=c[3];for(let E=0;E<h;E++){const D=g[E];r=Math.min(r,D[0]);x=Math.min(x,D[1]);C=Math.max(C,D[0]);c=Math.max(c,D[1])}d[0]=r;d[1]=x;d[2]=C;d[3]=c;return d};f.fromExtent=function(c,g=u()){g[0]=c.xmin;g[1]=c.ymin;g[2]=c.xmax;g[3]=c.ymax;return g};f.fromValues=function(c,g,d,h,r=u()){r[0]=c;r[1]=g;r[2]=d;r[3]=h;return r};f.height=m;f.intersection=
function(c,g,d=c){const h=g[0],r=g[1],x=g[2];g=g[3];d[0]=A(c[0],h,x);d[1]=A(c[1],r,g);d[2]=A(c[2],h,x);d[3]=A(c[3],r,g);return d};f.intersects=function(c,g){return Math.max(g[0],c[0])<=Math.min(g[2],c[2])&&Math.max(g[1],c[1])<=Math.min(g[3],c[3])};f.is=K;f.isPoint=function(c){return(0===B(c)||!isFinite(c[0]))&&(0===m(c)||!isFinite(c[1]))};f.offset=function(c,g,d,h=c){h[0]=c[0]+g;h[1]=c[1]+d;h[2]=c[2]+g;h[3]=c[3]+d;return h};f.pad=function(c,g,d=c){d[0]=c[0]-g;d[1]=c[1]-g;d[2]=c[2]+g;d[3]=c[3]+g;return d};
f.set=H;f.setMax=function(c,g,d=c){d[2]=g[0];d[3]=g[1];d!==c&&(d[0]=c[0],d[1]=c[1]);return c};f.setMin=function(c,g,d=c){d[0]=g[0];d[1]=g[1];d!==c&&(d[2]=c[2],d[3]=c[3]);return d};f.size=function(c,g){g[0]=c[2]-c[0];g[1]=c[3]-c[1]};f.toExtent=function(c,g){return new k({xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3],spatialReference:g})};f.width=B;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p){var c;k=c=function(g){function d(h){h=g.call(this,h)||this;h.level=0;h.levelValue=null;h.resolution=0;h.scale=0;return h}f._inheritsLoose(d,g);d.prototype.clone=function(){return new c({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return d}(p.JSONSupport);b.__decorate([m.property({type:B.Integer,json:{write:!0}})],k.prototype,"level",void 0);b.__decorate([m.property({type:String,json:{write:!0}})],k.prototype,"levelValue",
void 0);b.__decorate([m.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);b.__decorate([m.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=c=b.__decorate([H.subclass("esri.layers.support.LOD")],k)})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(f,b){let k=function(){function u(m,w,H,K){this.set(m,w,H,K)}u.getId=function(m,w,H,K){return"object"===typeof m?`${m.level}/${m.row}/${m.col}/${m.world}`:
`${m}/${w}/${H}/${K}`};var B=u.prototype;B.acquire=function(m,w,H,K){this.set(m,w,H,K)};B.contains=function(m){const w=m.level-this.level;return this.row===m.row>>w&&this.col===m.col>>w&&this.world===m.world};B.equals=function(m){return this.level===m.level&&this.row===m.row&&this.col===m.col&&this.world===m.world};B.clone=function(){return new u(this)};B.release=function(){this.world=this.col=this.row=this.level=0};B.set=function(m,w,H,K){if(null==m)this.world=this.col=this.row=this.level=0;else if("object"===
typeof m)this.level=m.level||0,this.row=m.row||0,this.col=m.col||0,this.world=m.world||0;else if("string"===typeof m){const [A,v,p,c]=m.split("/");this.level=parseFloat(A);this.row=parseFloat(v);this.col=parseFloat(p);this.world=parseFloat(c)}else this.level=+m,this.row=+w,this.col=+H,this.world=+K||0;return this};B.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};B.getParentKey=function(){return 0>=this.level?null:new u(this.level-1,this.row>>1,this.col>>1,this.world)};
B.getChildKeys=function(){const m=this.level+1,w=this.row<<1,H=this.col<<1,K=this.world;return[new u(m,w,H,K),new u(m,w,H+1,K),new u(m,w+1,H,K),new u(m,w+1,H+1,K)]};B.compareRowMajor=function(m){return this.row<m.row?-1:this.row>m.row?1:this.col<m.col?-1:this.col>m.col?1:0};f._createClass(u,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(m){this.set(m)}}]);return u}();k.pool=new b(k,null,null,25,50);return k})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/arrayUtils ../core/promiseUtils".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d){f.PopupView=h=>{h=function(r){function x(){return r.apply(this,arguments)||this}b._inheritsLoose(x,r);var C=x.prototype;C.fetchPopupFeatures=async function(E,D){await this.when();const {location:z,queryArea:q,layerViewsAndGraphics:n,clientOnlyGraphics:t}=await this._prepareFetchPopupFeatures(E,D);E=d.resolve(t);D=this._queryLayerPopupFeatures({queryArea:q,layerViewsAndGraphics:n,options:D});const I=D.map(J=>J.promise);E=d.eachAlwaysValues([E,...I]).then(g.flatten);
return{location:z,clientOnlyGraphics:t,allGraphicsPromise:E,promisesPerLayerView:D}};C._queryLayerPopupFeatures=function({queryArea:E,layerViewsAndGraphics:D,options:z}){return D.map(({layerView:q,graphics:n})=>{n={clientGraphics:n,event:B.isSome(z)?z.event:null,signal:B.isSome(z)?z.signal:null,defaultPopupTemplateEnabled:B.isSome(z)?!!z.defaultPopupTemplateEnabled:!1};n=q.fetchPopupFeatures(E,n);return{layerView:q,promise:n}})};C._isValidPopupGraphic=function(E,D){return E&&!!E.getEffectivePopupTemplate(B.isSome(D)&&
D.defaultPopupTemplateEnabled)};C._prepareFetchPopupFeatures=async function(E,D){const {clientGraphics:z,queryArea:q,location:n}=await this._popupHitTestGraphics(E,D);E=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:t,clientOnlyGraphics:I}=this._graphicsPerFetchPopupLayerView(z,E);return{clientOnlyGraphics:I,layerViewsAndGraphics:t,queryArea:q,location:n}};C._popupHitTestGraphics=async function(E,D){const {results:z,mapPoint:q}=await this.popupHitTest(E);E=z.filter(t=>this._isValidPopupGraphic(t.graphic,
D));const n=E.length?E[0].mapPoint:null;return{clientGraphics:E.map(t=>t.graphic),queryArea:q,location:q||n}};C._getFetchPopupLayerViews=function(){const E=[];this.allLayerViews.forEach(D=>{this._isValidPopupLayerView(D)&&E.push(D)});B.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&E.push(this.graphicsView);return E.reverse()};C._isValidPopupLayerView=function(E){return B.isSome(E)&&(!("layer"in E)||!E.suspended)&&"fetchPopupFeatures"in E};C._graphicsPerFetchPopupLayerView=
function(E,D){const z=[],q=new Map;D=D.map(n=>{const t=[];"layer"in n?q.set(n.layer,t):q.set(n.graphics,t);return{layerView:n,graphics:t}});for(const n of E)(E=q.get(n.layer)||null)?E.push(n):z.push(n);return{layerViewsAndGraphics:D,clientOnlyGraphics:z}};return x}(h);return h=k.__decorate([A.subclass("esri.views.PopupView")],h)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../core/maybe ../../core/promiseUtils ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/support/Ellipsoid ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry/Extent ../../core/Collection ../../chunks/common ../../core/unitUtils ../../Viewpoint ../../chunks/vec2f64 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x){function C(l,G,M,R){return R&&M&&!R.equals(M)&&H.canProject(R,M)&&R.isWebMercator?(R.isWebMercator?(M=G[1],89.99999<M?M=89.99999:-89.99999>M&&(M=-89.99999),M=Math.sin(p.toRadian(M)),l=h.set(l,p.toRadian(G[0])*w.earth.radius,.5*w.earth.radius*Math.log((1+M)/(1-M)))):(M=p.toDegree(G[0]/w.earth.radius),l=h.set(l,M-360*Math.floor((M+180)/360),p.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*G[1]/w.earth.radius))))),l):h.copy(l,G)}function E(l){return l.wkid?
l:l.spatialReference||B.WGS84}function D(l,G){return G.type?h.set(l,G.x,G.y):h.copy(l,G)}function z(l,G){return Math.max(l.width/G[0],l.height/G[1])*ea(l.spatialReference)}async function q(l,G,M,R){if(!l||Array.isArray(l)&&!l.length)return null;v.isCollection(l)&&(l=l.toArray());if(Array.isArray(l)&&l.length&&"object"===typeof l[0]){var U=l.every(qa=>"attributes"in qa);var W=l.some(qa=>!qa.geometry),da=l;if(U&&W&&G&&G.allLayerViews){U=new Map;for(var ia of l)l=ia.layer,W=U.get(l)||[],da=ia.attributes[l.objectIdField],
null!=da&&W.push(da),U.set(l,W);const qa=[];U.forEach((ta,ua)=>{const va=G.allLayerViews.find(za=>za.layer.id===ua.id);if("queryFeatures"in va){const za=ua.createQuery();za.objectIds=ta;za.returnGeometry=!0;qa.push(va.queryFeatures(za))}});ia=await k.all(qa);l=[];for(var fa of ia)if(fa&&fa.features&&fa.features.length)for(var ma of fa.features)b.isSome(ma.geometry)&&l.push(ma.geometry);da=l}for(const qa of da)R=await q(qa,G,M,R);return R}if(Array.isArray(l)&&2===l.length&&"number"===typeof l[0]&&
"number"===typeof l[1])U=new K(l);else if(l instanceof m)U=l;else if("geometry"in l)if(l.geometry)U=l.geometry;else if(l.layer){const qa=l.layer;fa=G.allLayerViews.find(ta=>ta.layer.id===qa.id);"queryFeatures"in fa&&(ma=qa.createQuery(),ma.objectIds=[l.attributes[qa.objectIdField]],ma.returnGeometry=!0,fa=await fa.queryFeatures(ma),U=b.get(fa,"features",0,"geometry"))}if(b.isNone(U))return null;fa="point"===U.type?new A({xmin:U.x,ymin:U.y,xmax:U.x,ymax:U.y,spatialReference:U.spatialReference}):U.extent;
if(!fa)return null;ma=H.canProject(fa,M);if(!fa.spatialReference.equals(M)&&ma)fa=H.project(fa,M);else if(!ma)return null;return R=R?R.union(fa):fa.clone()}function n(l){if(l&&(!Array.isArray(l)||"number"!==typeof l[0])&&("object"===typeof l||Array.isArray(l)&&"object"===typeof l[0])){if("layer"in l&&l.layer&&l.layer.minScale&&l.layer.maxScale){var G=l.layer;return{min:G.minScale,max:G.maxScale}}if(Array.isArray(l)&&l.length&&l.every(M=>"layer"in M)){let M=G=0;for(const R of l)(l=R.layer)&&l.minScale&&
l.maxScale&&(G=l.minScale<G?l.minScale:G,M=l.maxScale>M?l.maxScale:M);return G&&M?{min:G,max:M}:null}}}async function t(l,G){if(!l||!G)return new g({targetGeometry:new K,scale:0,rotation:0});let M=G.spatialReference;const {constraints:R,padding:U,viewpoint:W,size:da}=G,ia=[U?da[0]-U.left-U.right:da[0],U?da[1]-U.top-U.bottom:da[1]];let fa=null;l instanceof g?fa=l:l.viewpoint?fa=l.viewpoint:l.target&&"esri.Viewpoint"===l.target.declaredClass&&(fa=l.target);let ma=null;if(fa&&fa.targetGeometry)ma=fa.targetGeometry;
else if(l instanceof A)ma=l;else if(l||l&&("center"in l||"extent"in l||"target"in l))ma=await q(l.center,G,M)||await q(l.extent,G,M)||await q(l.target,G,M)||await q(l,G,M);!ma&&W&&W.targetGeometry?ma=W.targetGeometry:!ma&&G.extent&&(ma=G.extent);var qa=E(ma);M||(M=E(G.spatialReference||G.extent||ma));if(!H.canProject(ma,M)&&qa&&!qa.equals(M))return null;var ta=D(d.create(),ma.center?ma.center:ma);qa=new K(C(ta,ta,qa,M),M);ta=null;ta=fa&&b.isSome(fa.targetGeometry)&&"point"===fa.targetGeometry.type?
fa.scale:l.hasOwnProperty("scale")&&l.scale?l.scale:l.hasOwnProperty("zoom")&&-1!==l.zoom&&R&&R.effectiveLODs?R.zoomToScale(l.zoom):Array.isArray(ma)||"point"===ma.type||"extent"===ma.type&&0===ma.width&&0===ma.height?G.extent&&H.canProject(G.extent,M)?z(H.project(G.extent,M),ia):G.extent?z(G.extent,ia):W.scale:H.canProject(ma.extent,M)?z(H.project(ma.extent,M),ia):z(ma.extent,ia);if(G=n(l))G.min&&G.min>ta?ta=G.min:G.max&&G.max<ta&&(ta=G.max);G=0;fa?G=fa.rotation:l.hasOwnProperty("rotation")?G=l.rotation:
W&&(G=W.rotation);l=new g({targetGeometry:qa,scale:ta,rotation:G});R&&(l=R.fit(l),R.constrainByGeometry(l),R.rotationEnabled||(l.rotation=G));return l}function I(l,G){const M=l.targetGeometry,R=G.targetGeometry;M.x=R.x;M.y=R.y;M.spatialReference=R.spatialReference;l.scale=G.scale;l.rotation=G.rotation;return l}function J(l,G,M){return M?h.set(l,.5*(G[0]-M.right+M.left),.5*(G[1]-M.bottom+M.top)):h.scale(l,G,.5)}function Q(l,G,M,R){S(l,G,M,R);return r.invert(l,l)}function aa(l){var G=l.scale;l=l.targetGeometry;
l=b.isSome(l)&&u.isValid(l.spatialReference)?1/(39.37*c.getMetersPerUnitForSR(l.spatialReference)*96):1;return G*l}function ea(l){return u.isValid(l)?39.37*c.getMetersPerUnitForSR(l)*96:1}function ha(l){return l.isWrappable?(l=u.getInfo(l),l.valid[1]-l.valid[0]):0}const ka=180/Math.PI,y=function(){const l=d.create();return function(G,M,R){const U=M.targetGeometry;D(l,U);M=.5*aa(M);G.xmin=l[0]-M*R[0];G.ymin=l[1]-M*R[1];G.xmax=l[0]+M*R[0];G.ymax=l[1]+M*R[1];G.spatialReference=U.spatialReference;return G}}(),
F=function(){const l=d.create();return function(G,M,R){return h.sub(G,h.scale(G,M,.5),J(l,M,R))}}(),Z=function(){const l=x.create(),G=d.create();return function(M,R,U,W){const da=aa(R);R=p.toRadian(R.rotation)||0;h.set(G,da,da);r.fromScaling(l,G);r.rotate(l,l,R);r.translate(l,l,F(G,U,W));r.translate(l,l,[0,W.top-W.bottom]);return h.set(M,l[4],l[5])}}(),pa=function(){const l=d.create(),G=d.create(),M=d.create();return function(R,U,W,da,ia,fa){h.negate(l,U);h.scale(G,W,.5*fa);h.set(M,1/da*fa,-1/da*
fa);r.identity(R);r.translate(R,R,G);ia&&r.rotate(R,R,ia);r.scale(R,R,M);r.translate(R,R,l);return R}}(),S=function(){const l=d.create();return function(G,M,R,U){const W=aa(M),da=p.toRadian(M.rotation)||0;D(l,M.targetGeometry);return pa(G,l,R,W,da,U)}}(),T=function(){const l=d.create();return function(G,M,R,U){const W=aa(M);D(l,M.targetGeometry);return pa(G,l,R,W,0,U)}}(),X=function(){const l=d.create(),G=d.create(),M=[0,0,0];return function(R,U,W){h.subtract(l,R,U);h.normalize(l,l);h.subtract(G,
R,W);h.normalize(G,G);h.cross(M,l,G);R=Math.acos(h.dot(l,G)/(h.length(l)*h.length(G)))*ka;0>M[2]&&(R=-R);isNaN(R)&&(R=0);return R}}(),ja=function(){const l=d.create();return function(G,M,R,U){const W=G.targetGeometry;I(G,M);Z(l,M,R,U);W.x+=l[0];W.y+=l[1];return G}}(),oa=function(){const l=d.create();return function(G,M,R,U){const W=G.targetGeometry;I(G,M);Z(l,M,R,U);W.x-=l[0];W.y-=l[1];return G}}(),ca=function(){const l=d.create();return function(G,M,R){I(G,M);M=G.targetGeometry;const U=E(R),W=E(M);
D(l,R);C(l,l,U,W);M.x=l[0];M.y=l[1];return G}}(),V=function(){const l=d.create();return function(G,M,R,U,W){W||(W="center");h.sub(l,R,U);h.scale(l,l,.5);R=l[0];U=l[1];switch(W){case "center":h.set(l,0,0);break;case "left":h.set(l,-R,0);break;case "top":h.set(l,0,U);break;case "right":h.set(l,R,0);break;case "bottom":h.set(l,0,-U);break;case "top-left":h.set(l,-R,U);break;case "bottom-left":h.set(l,-R,-U);break;case "top-right":h.set(l,R,U);break;case "bottom-right":h.set(l,R,-U)}L(G,M,l);return G}}(),
ba=function(){const l=d.create();return function(G,M,R,U,W){I(G,M);isNaN(R)||0===R||(a(l,U,M,W),G.scale=M.scale*R,e(l,l,G,W),L(G,G,h.set(l,l[0]-U[0],U[1]-l[1])));return G}}(),ra=function(){const l=d.create();return function(G,M,R,U,W,da){I(G,M);isNaN(R)||0===R||(a(l,W,M,da),G.scale=M.scale*R,G.rotation+=U,e(l,l,G,da),L(G,G,h.set(l,l[0]-W[0],W[1]-l[1])));return G}}(),la=function(){const l=d.create(),G=d.create();return function(M,R,U,W,da,ia,fa){F(G,ia,fa);h.add(l,da,G);return W?ra(M,R,U,W,l,ia):ba(M,
R,U,l,ia)}}(),a=function(){const l=x.create();return function(G,M,R,U){return h.transformMat2d(G,M,Q(l,R,U,1))}}(),e=function(){const l=x.create();return function(G,M,R,U){return h.transformMat2d(G,M,S(l,R,U,1))}}(),L=function(){const l=d.create(),G=x.create();return function(M,R,U){I(M,R);const W=aa(R),da=M.targetGeometry;r.fromRotation(G,p.toRadian(R.rotation)||0);r.scale(G,G,d.fromValues(W,W));h.transformMat2d(l,U,G);da.x+=l[0];da.y+=l[1];return M}}();f.addPadding=ja;f.angleBetween=X;f.centerAt=
ca;f.copy=I;f.create=t;f.createAsync=function(l,G){return t(l,G)};f.extentToScale=z;f.getAnchor=J;f.getExtent=y;f.getMatrix=pa;f.getOuterSize=function(l,G,M){var R=p.toRadian(G.rotation)||0;G=Math.abs(Math.cos(R));R=Math.abs(Math.sin(R));return h.set(l,Math.round(M[1]*R+M[0]*G),Math.round(M[1]*G+M[0]*R))};f.getPaddingMapTranslation=Z;f.getPaddingScreenTranslation=F;f.getResolution=aa;f.getResolutionToScaleFactor=ea;f.getTransform=S;f.getTransformNoRotation=T;f.getWorldScreenWidth=function(l,G){return Math.round(ha(l)/
G)};f.getWorldWidth=ha;f.padAndScaleAndRotateBy=la;f.pixelSize=function(l){return aa(l)};f.removePadding=oa;f.resize=V;f.rotateBy=function(l,G,M){I(l,G);l.rotation+=M;return l};f.rotateTo=function(l,G,M){I(l,G);l.rotation=M;return l};f.scaleAndRotateBy=ra;f.scaleBy=ba;f.scaleTo=function(l,G,M){I(l,G);l.scale=M;return l};f.setExtent=function(l,G,M,R,U){ca(l,G,M.center);l.scale=z(M,R);U&&U.constraints&&U.constraints.constrain(l);return l};f.toMap=a;f.toScreen=e;f.translateBy=L;Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(f){function b(){return[0,0]}function k(h){return[h[0],h[1]]}function u(h,r){return[h,r]}function B(h){const r=[0,0],x=Math.min(2,h.length);for(let C=0;C<x;++C)r[C]=h[C];return r}function m(h,r){return new Float64Array(h,r,2)}function w(){return[0,0]}function H(){return[1,1]}function K(){return[1,0]}function A(){return[0,1]}const v=[0,0],p=[1,1],c=[1,0],g=[0,1];var d=Object.freeze({__proto__:null,create:b,clone:k,
fromValues:u,fromArray:B,createView:m,zeros:w,ones:H,unitX:K,unitY:A,ZEROS:v,ONES:p,UNIT_X:c,UNIT_Y:g});f.ONES=p;f.UNIT_X=c;f.UNIT_Y=g;f.ZEROS=v;f.clone=k;f.create=b;f.createView=m;f.fromArray=B;f.fromValues=u;f.ones=H;f.unitX=K;f.unitY=A;f.vec2f64=d;f.zeros=w})},"esri/chunks/vec2":function(){define(["exports","./common"],function(f,b){function k(S,T){S[0]=T[0];S[1]=T[1];return S}function u(S,T,X){S[0]=T;S[1]=X;return S}function B(S,T,X){S[0]=T[0]+X[0];S[1]=T[1]+X[1];return S}function m(S,T,X){S[0]=
T[0]-X[0];S[1]=T[1]-X[1];return S}function w(S,T,X){S[0]=T[0]*X[0];S[1]=T[1]*X[1];return S}function H(S,T,X){S[0]=T[0]/X[0];S[1]=T[1]/X[1];return S}function K(S,T){S[0]=Math.ceil(T[0]);S[1]=Math.ceil(T[1]);return S}function A(S,T){S[0]=Math.floor(T[0]);S[1]=Math.floor(T[1]);return S}function v(S,T,X){S[0]=Math.min(T[0],X[0]);S[1]=Math.min(T[1],X[1]);return S}function p(S,T,X){S[0]=Math.max(T[0],X[0]);S[1]=Math.max(T[1],X[1]);return S}function c(S,T){S[0]=Math.round(T[0]);S[1]=Math.round(T[1]);return S}
function g(S,T,X){S[0]=T[0]*X;S[1]=T[1]*X;return S}function d(S,T,X,ja){S[0]=T[0]+X[0]*ja;S[1]=T[1]+X[1]*ja;return S}function h(S,T){const X=T[0]-S[0];S=T[1]-S[1];return Math.sqrt(X*X+S*S)}function r(S,T){const X=T[0]-S[0];S=T[1]-S[1];return X*X+S*S}function x(S){const T=S[0];S=S[1];return Math.sqrt(T*T+S*S)}function C(S){const T=S[0];S=S[1];return T*T+S*S}function E(S,T){S[0]=-T[0];S[1]=-T[1];return S}function D(S,T){S[0]=1/T[0];S[1]=1/T[1];return S}function z(S,T){var X=T[0];const ja=T[1];X=X*X+
ja*ja;0<X&&(X=1/Math.sqrt(X),S[0]=T[0]*X,S[1]=T[1]*X);return S}function q(S,T){return S[0]*T[0]+S[1]*T[1]}function n(S,T,X){T=T[0]*X[1]-T[1]*X[0];S[0]=S[1]=0;S[2]=T;return S}function t(S,T,X,ja){const oa=T[0];T=T[1];S[0]=oa+ja*(X[0]-oa);S[1]=T+ja*(X[1]-T);return S}function I(S,T){T=T||1;const X=2*b.RANDOM()*Math.PI;S[0]=Math.cos(X)*T;S[1]=Math.sin(X)*T;return S}function J(S,T,X){const ja=T[0];T=T[1];S[0]=X[0]*ja+X[2]*T;S[1]=X[1]*ja+X[3]*T;return S}function Q(S,T,X){const ja=T[0];T=T[1];S[0]=X[0]*
ja+X[2]*T+X[4];S[1]=X[1]*ja+X[3]*T+X[5];return S}function aa(S,T,X){const ja=T[0];T=T[1];S[0]=X[0]*ja+X[3]*T+X[6];S[1]=X[1]*ja+X[4]*T+X[7];return S}function ea(S,T,X){const ja=T[0];T=T[1];S[0]=X[0]*ja+X[4]*T+X[12];S[1]=X[1]*ja+X[5]*T+X[13];return S}function ha(S,T,X,ja){const oa=T[0]-X[0];T=T[1]-X[1];const ca=Math.sin(ja);ja=Math.cos(ja);S[0]=oa*ja-T*ca+X[0];S[1]=oa*ca+T*ja+X[1];return S}function ka(S,T){var X=S[0];S=S[1];const ja=T[0];T=T[1];let oa=X*X+S*S;0<oa&&(oa=1/Math.sqrt(oa));let ca=ja*ja+
T*T;0<ca&&(ca=1/Math.sqrt(ca));X=(X*ja+S*T)*oa*ca;return 1<X?0:-1>X?Math.PI:Math.acos(X)}function y(S){return"vec2("+S[0]+", "+S[1]+")"}function F(S,T){return S[0]===T[0]&&S[1]===T[1]}function Z(S,T){const X=S[0];S=S[1];const ja=T[0];T=T[1];return Math.abs(X-ja)<=b.EPSILON*Math.max(1,Math.abs(X),Math.abs(ja))&&Math.abs(S-T)<=b.EPSILON*Math.max(1,Math.abs(S),Math.abs(T))}var pa=Object.freeze({__proto__:null,copy:k,set:u,add:B,subtract:m,multiply:w,divide:H,ceil:K,floor:A,min:v,max:p,round:c,scale:g,
scaleAndAdd:d,distance:h,squaredDistance:r,length:x,squaredLength:C,negate:E,inverse:D,normalize:z,dot:q,cross:n,lerp:t,random:I,transformMat2:J,transformMat2d:Q,transformMat3:aa,transformMat4:ea,rotate:ha,angle:ka,str:y,exactEquals:F,equals:Z,len:x,sub:m,mul:w,div:H,dist:h,sqrDist:r,sqrLen:C});f.add=B;f.angle=ka;f.ceil=K;f.copy=k;f.cross=n;f.dist=h;f.distance=h;f.div=H;f.divide=H;f.dot=q;f.equals=Z;f.exactEquals=F;f.floor=A;f.inverse=D;f.len=x;f.length=x;f.lerp=t;f.max=p;f.min=v;f.mul=w;f.multiply=
w;f.negate=E;f.normalize=z;f.random=I;f.rotate=ha;f.round=c;f.scale=g;f.scaleAndAdd=d;f.set=u;f.sqrDist=r;f.sqrLen=C;f.squaredDistance=r;f.squaredLength=C;f.str=y;f.sub=m;f.subtract=m;f.transformMat2=J;f.transformMat2d=Q;f.transformMat3=aa;f.transformMat4=ea;f.vec2=pa})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(f,b){function k(n,t){n[0]=t[0];n[1]=t[1];n[2]=t[2];n[3]=t[3];n[4]=t[4];n[5]=t[5];return n}function u(n){n[0]=1;n[1]=0;n[2]=0;n[3]=1;n[4]=0;n[5]=0;return n}function B(n,
t,I,J,Q,aa,ea){n[0]=t;n[1]=I;n[2]=J;n[3]=Q;n[4]=aa;n[5]=ea;return n}function m(n,t){const I=t[0],J=t[1],Q=t[2],aa=t[3],ea=t[4];t=t[5];let ha=I*aa-J*Q;if(!ha)return null;ha=1/ha;n[0]=aa*ha;n[1]=-J*ha;n[2]=-Q*ha;n[3]=I*ha;n[4]=(Q*t-aa*ea)*ha;n[5]=(J*ea-I*t)*ha;return n}function w(n){return n[0]*n[3]-n[1]*n[2]}function H(n,t,I){const J=t[0],Q=t[1],aa=t[2],ea=t[3],ha=t[4];t=t[5];const ka=I[0],y=I[1],F=I[2],Z=I[3],pa=I[4];I=I[5];n[0]=J*ka+aa*y;n[1]=Q*ka+ea*y;n[2]=J*F+aa*Z;n[3]=Q*F+ea*Z;n[4]=J*pa+aa*I+
ha;n[5]=Q*pa+ea*I+t;return n}function K(n,t,I){const J=t[0],Q=t[1],aa=t[2],ea=t[3],ha=t[4];t=t[5];const ka=Math.sin(I);I=Math.cos(I);n[0]=J*I+aa*ka;n[1]=Q*I+ea*ka;n[2]=J*-ka+aa*I;n[3]=Q*-ka+ea*I;n[4]=ha;n[5]=t;return n}function A(n,t,I){const J=t[1],Q=t[2],aa=t[3],ea=t[4],ha=t[5],ka=I[0];I=I[1];n[0]=t[0]*ka;n[1]=J*ka;n[2]=Q*I;n[3]=aa*I;n[4]=ea;n[5]=ha;return n}function v(n,t,I){const J=t[0],Q=t[1],aa=t[2],ea=t[3],ha=t[4];t=t[5];const ka=I[0];I=I[1];n[0]=J;n[1]=Q;n[2]=aa;n[3]=ea;n[4]=J*ka+aa*I+ha;
n[5]=Q*ka+ea*I+t;return n}function p(n,t){const I=Math.sin(t);t=Math.cos(t);n[0]=t;n[1]=I;n[2]=-I;n[3]=t;n[4]=0;n[5]=0;return n}function c(n,t){n[0]=t[0];n[1]=0;n[2]=0;n[3]=t[1];n[4]=0;n[5]=0;return n}function g(n,t){n[0]=1;n[1]=0;n[2]=0;n[3]=1;n[4]=t[0];n[5]=t[1];return n}function d(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"}function h(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)}function r(n,
t,I){n[0]=t[0]+I[0];n[1]=t[1]+I[1];n[2]=t[2]+I[2];n[3]=t[3]+I[3];n[4]=t[4]+I[4];n[5]=t[5]+I[5];return n}function x(n,t,I){n[0]=t[0]-I[0];n[1]=t[1]-I[1];n[2]=t[2]-I[2];n[3]=t[3]-I[3];n[4]=t[4]-I[4];n[5]=t[5]-I[5];return n}function C(n,t,I){n[0]=t[0]*I;n[1]=t[1]*I;n[2]=t[2]*I;n[3]=t[3]*I;n[4]=t[4]*I;n[5]=t[5]*I;return n}function E(n,t,I,J){n[0]=t[0]+I[0]*J;n[1]=t[1]+I[1]*J;n[2]=t[2]+I[2]*J;n[3]=t[3]+I[3]*J;n[4]=t[4]+I[4]*J;n[5]=t[5]+I[5]*J;return n}function D(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===
t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]}function z(n,t){const I=n[0],J=n[1],Q=n[2],aa=n[3],ea=n[4];n=n[5];const ha=t[0],ka=t[1],y=t[2],F=t[3],Z=t[4];t=t[5];return Math.abs(I-ha)<=b.EPSILON*Math.max(1,Math.abs(I),Math.abs(ha))&&Math.abs(J-ka)<=b.EPSILON*Math.max(1,Math.abs(J),Math.abs(ka))&&Math.abs(Q-y)<=b.EPSILON*Math.max(1,Math.abs(Q),Math.abs(y))&&Math.abs(aa-F)<=b.EPSILON*Math.max(1,Math.abs(aa),Math.abs(F))&&Math.abs(ea-Z)<=b.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Z))&&Math.abs(n-t)<=b.EPSILON*
Math.max(1,Math.abs(n),Math.abs(t))}var q=Object.freeze({__proto__:null,copy:k,identity:u,set:B,invert:m,determinant:w,multiply:H,rotate:K,scale:A,translate:v,fromRotation:p,fromScaling:c,fromTranslation:g,str:d,frob:h,add:r,subtract:x,multiplyScalar:C,multiplyScalarAndAdd:E,exactEquals:D,equals:z,mul:H,sub:x});f.add=r;f.copy=k;f.determinant=w;f.equals=z;f.exactEquals=D;f.frob=h;f.fromRotation=p;f.fromScaling=c;f.fromTranslation=g;f.identity=u;f.invert=m;f.mat2d=q;f.mul=H;f.multiply=H;f.multiplyScalar=
C;f.multiplyScalarAndAdd=E;f.rotate=K;f.scale=A;f.set=B;f.str=d;f.sub=x;f.subtract=x;f.translate=v})},"esri/chunks/mat2df64":function(){define(["exports"],function(f){function b(){return[1,0,0,1,0,0]}function k(w){return[w[0],w[1],w[2],w[3],w[4],w[5]]}function u(w,H,K,A,v,p){return[w,H,K,A,v,p]}function B(w,H){return new Float64Array(w,H,6)}var m=Object.freeze({__proto__:null,create:b,clone:k,fromValues:u,createView:B});f.clone=k;f.create=b;f.createView=B;f.fromValues=u;f.mat2df64=m})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/scheduling ../../core/Accessor ../../geometry/Point ../../geometry ../../Viewpoint ./unitBezier ../ViewAnimation ./viewpointUtils".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){let E=function(){function D(z,q,n,t){const I=z.targetGeometry,J=q.targetGeometry;t?"string"===typeof t&&(t=r.parse(t)||r.easingFunctions.ease):t=r.easingFunctions.ease;this.easing=t;this.duration=n;this.sCenterX=I.x;this.sCenterY=I.y;this.sScale=z.scale;this.sRotation=z.rotation;this.tCenterX=J.x;this.tCenterY=J.y;this.tScale=q.scale;this.tRotation=q.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=
this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}D.prototype.applyRatio=function(z,q){var n=this.easing(q);let t,I;1<=q?(q=this.tCenterX,t=this.tCenterY,I=this.tRotation,n=this.tScale):(q=this.sCenterX+n*this.dCenterX,t=this.sCenterY+n*this.dCenterY,I=this.sRotation+n*this.dRotation,n=this.sScale+n*this.dScale);z.targetGeometry.x=q;z.targetGeometry.y=t;z.scale=n;z.rotation=I};return D}();k=function(D){function z(n){n=
D.call(this,n)||this;n.duration=200;n.transition=null;n.easing=r.easingFunctions.ease;n.view=null;n.viewpoint=null;n.viewpoint=new h({targetGeometry:new g,scale:0,rotation:0});n._updateTask=p.addFrameTask({postRender:n._postRender.bind(f._assertThisInitialized(n))});n._updateTask.pause();return n}f._inheritsLoose(z,D);var q=z.prototype;q.destroy=function(){this._updateTask.remove();this._updateTask=null};q.animate=function(n,t,I){this.stop();C.copy(this.viewpoint,t);this.transition=new E(this.viewpoint,
n.target,I&&I.duration||this.duration,I&&I.easing||this.easing);t=()=>{this.animation===n&&this._updateTask&&("finished"===n.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};n.when(t,t);this._startTime=performance.now();this._updateTask.resume();return this.animation=n};q.animateContinous=function(n,t){this.stop();this.updateFunction=t;this.viewpoint=n;const I=new x({target:n.clone()});
n=()=>{this.animation===I&&this._updateTask&&(this.updateFunction=this.animation=null)};I.when(n,n);this._startTime=performance.now();this._updateTask.resume();return this.animation=I};q.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};q._postRender=function(n){var t=this.animation;t&&t.state!==x.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,n.deltaTime):(n=(performance.now()-this._startTime)/this.transition.duration,t=1<=n,this.transition.applyRatio(this.viewpoint,
n),t&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return z}(c);b.__decorate([m.property()],k.prototype,"animation",void 0);b.__decorate([m.property()],k.prototype,"duration",void 0);b.__decorate([m.property()],k.prototype,"transition",void 0);b.__decorate([m.property()],k.prototype,"easing",void 0);b.__decorate([m.property()],k.prototype,"view",void 0);b.__decorate([m.property()],k.prototype,"viewpoint",void 0);return k=b.__decorate([H.subclass("esri.views.2d.AnimationManager")],
k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(f){function b(B,m,w,H){function K(h,r){var x;let C,E;C=h;for(x=0;8>x;x++){E=((p*C+v)*C+A)*C-h;if(Math.abs(E)<r)return C;var D=(3*p*C+2*v)*C+A;if(1E-6>Math.abs(D))break;C-=E/D}D=0;x=1;C=h;if(C<D)return D;if(C>x)return x;for(;D<x;){E=((p*C+v)*C+A)*C;if(Math.abs(E-h)<r)break;h>E?D=C:x=C;C=.5*(x-D)+D}return C}const A=3*B,v=3*(w-B)-A,p=1-A-v,c=3*m,g=3*(H-m)-c,d=1-c-g;return function(h,r=1E-6){h=K(h,r);return((d*h+g)*h+c)*h}}const k=
/^cubic-bezier\((.*)\)/,u={};u.ease=b(.25,.1,.25,1);u.linear=b(0,0,1,1);u.easeIn=u["ease-in"]=b(.42,0,1,1);u.easeOut=u["ease-out"]=b(0,0,.58,1);u.easeInOut=u["ease-in-out"]=b(.42,0,.58,1);f.easingFunctions=u;f.parse=function(B){let m=u[B]||null;!m&&(B=k.exec(B))&&(B=B[1].split(",").map(w=>parseFloat(w.trim())),4!==B.length||B.some(w=>isNaN(w))||(m=b.apply(b,B)));return m};f.unitBezier=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe",
"../../core/scheduling"],function(f,b){return function(){function k(B){this.view=B;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;if(this.updateEnabled){var {basemapView:m,
graphicsView:w,labelManager:H,layerViews:K,state:{id:A}}=this.view;m.baseLayerViews.forEach(this._updateLayerView,this);K.forEach(this._updateLayerView,this);m.referenceLayerViews.forEach(this._updateLayerView,this);f.isSome(H)&&(H.lastUpdateId!==A&&(H.viewChange(),H.lastUpdateId=A),H.updateRequested&&H.processUpdate(this._updateParameters));f.isSome(w)&&(w.lastUpdateId!==A&&(w.viewChange(),w.lastUpdateId=A),w.updateRequested&&w.processUpdate(this._updateParameters));this.animationInProgress||this._updateRequested||
this._frameTaskHandle.pause()}}}var u=k.prototype;u.destroy=function(){this.stop()};u.start=function(){this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",B=>{this.stationary=B;this.requestFrame()});this._frameTaskHandle=b.addFrameTask(this)};u.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),
this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};u.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};u.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};u._updateLayerView=function(B){const m=this.view.state,w=B.lastUpdateId;if(null==w||!this.stationary&&!B.moving)B.moving=!0,B.moveStart();w!==m.id&&B.viewChange();this.stationary&&
B.moving&&(B.moving=!1,B.moveEnd());B.lastUpdateId=m.id;B.updateRequested&&B.processUpdate(this._updateParameters);"layerViews"in B&&B.layerViews.forEach(this._updateLayerView,this)};return k}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/maybe","../../core/Error"],function(f,b,k,u){function B(A){return Object.freeze({__proto__:null,"default":A})}function m(){return Promise.all([new Promise(function(A,v){f(["../webgl"],A,v)}),new Promise(function(A,
v){f(["./mapViewDeps"],A,v)})])}const w=()=>m().then(()=>new Promise(function(A,v){f(["./layers/TileLayerView2D"],function(p){A(B(p))},v)})),H=()=>m().then(()=>new Promise(function(A,v){f(["./layers/FeatureLayerView2D"],function(p){A(B(p))},v)})),K={"base-dynamic":()=>m().then(()=>new Promise(function(A,v){f(["./layers/BaseDynamicLayerView2D"],function(p){A(B(p))},v)})),"base-tile":w,"bing-maps":w,csv:H,"geo-rss":()=>m().then(()=>new Promise(function(A,v){f(["./layers/GeoRSSLayerView2D"],function(p){A(B(p))},
v)})),feature:H,geojson:H,graphics:()=>m().then(()=>new Promise(function(A,v){f(["./layers/GraphicsLayerView2D"],function(p){A(B(p))},v)})),group:()=>m().then(()=>new Promise(function(A,v){f(["./layers/GroupLayerView2D"],function(p){A(B(p))},v)})),imagery:()=>m().then(()=>new Promise(function(A,v){f(["./layers/ImageryLayerView2D"],function(p){A(B(p))},v)})),"imagery-tile":()=>m().then(()=>new Promise(function(A,v){f(["./layers/ImageryTileLayerView2D"],function(p){A(B(p))},v)})),kml:()=>m().then(()=>
new Promise(function(A,v){f(["./layers/KMLLayerView2D"],function(p){A(B(p))},v)})),"map-image":()=>m().then(()=>new Promise(function(A,v){f(["./layers/MapImageLayerView2D"],function(p){A(B(p))},v)})),"map-notes":()=>m().then(()=>new Promise(function(A,v){f(["./layers/MapNotesLayerView2D"],function(p){A(B(p))},v)})),"ogc-feature":H,"open-street-map":w,route:()=>m().then(()=>new Promise(function(A,v){f(["./layers/RouteLayerView2D"],function(p){A(B(p))},v)})),stream:()=>m().then(()=>new Promise(function(A,
v){f(["./layers/StreamLayerView2D"],function(p){A(B(p))},v)})),tile:w,"vector-tile":()=>m().then(()=>new Promise(function(A,v){f(["./layers/VectorTileLayerView2D"],function(p){A(B(p))},v)})),wcs:()=>m().then(()=>new Promise(function(A,v){f(["./layers/ImageryTileLayerView2D"],function(p){A(B(p))},v)})),"web-tile":w,wms:()=>m().then(()=>new Promise(function(A,v){f(["./layers/WMSLayerView2D"],function(p){A(B(p))},v)})),wmts:()=>m().then(()=>new Promise(function(A,v){f(["./layers/WMTSLayerView2D"],function(p){A(B(p))},
v)})),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};b.layerView2DImporter={hasLayerViewModule:A=>k.isSome(K[A.type]),importLayerView:A=>{var v=K[A.type];if(!k.isSome(v))throw A=A.declaredClass?A.declaredClass.slice(A.declaredClass.lastIndexOf(".")+1):"Unknown",v=A.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),A=new u(`${v}:view-not-supported`,`${A} is not supported in 2D`),A;return v(A)}};Object.defineProperty(b,
"__esModule",{value:!0})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Extent ../../geometry/Polygon ../../geometry ../../core/Evented ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){k={base:null,key:"type",typeMap:{extent:p,polygon:c}};d=function(E){function D(){var q=E.apply(this,arguments)||this;q.lods=null;q.minScale=0;q.maxScale=0;q.minZoom=-1;q.maxZoom=-1;q.rotationEnabled=!0;q.snapToZoom=!0;return q}f._inheritsLoose(D,E);var z=D.prototype;z.initialize=function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)};z.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};z.canZoomInTo=
function(q){const n=this.effectiveMaxScale;return 0===n||q>=n};z.canZoomOutTo=function(q){const n=this.effectiveMinScale;return 0===n||q<=n};z.constrain=function(q,n){this._zoom.constrain(q,n);this._rotation.constrain(q,n);this._geometry.constrain(q,n);return q};z.constrainByGeometry=function(q){return this._geometry.constrain(q)};z.fit=function(q){return this._zoom.fit(q)};z.zoomToScale=function(q){return this._zoom.zoomToScale(q)};z.scaleToZoom=function(q){return this._zoom.scaleToZoom(q)};z.snapScale=
function(q){return this._zoom.snapToClosestScale(q)};z.snapToNextScale=function(q){return this._zoom.snapToNextScale(q)};z.snapToPreviousScale=function(q){return this._zoom.snapToPreviousScale(q)};f._createClass(D,[{key:"geometry",set:function(q){q?this._set("geometry",q):this._set("geometry",null)}},{key:"_defaultLODs",get:function(){const q=this.get("view.defaultsFromMap.tileInfo"),n=this.get("view.spatialReference");return q&&n&&q.spatialReference.equals(n)?q.lods:null}},{key:"_geometry",get:function(){return new r.GeometryConstraint({geometry:this.geometry,
spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new x({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){return new C({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}}]);return D}(d.EventedAccessor);b.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],d.prototype,"effectiveLODs",void 0);b.__decorate([m.property({readOnly:!0,
aliasOf:"_zoom.effectiveMinScale"})],d.prototype,"effectiveMinScale",void 0);b.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],d.prototype,"effectiveMaxScale",void 0);b.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],d.prototype,"effectiveMinZoom",void 0);b.__decorate([m.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],d.prototype,"effectiveMaxZoom",void 0);b.__decorate([m.property({types:k,value:null})],d.prototype,"geometry",null);b.__decorate([m.property({type:[h]})],
d.prototype,"lods",void 0);b.__decorate([m.property()],d.prototype,"minScale",void 0);b.__decorate([m.property()],d.prototype,"maxScale",void 0);b.__decorate([m.property()],d.prototype,"minZoom",void 0);b.__decorate([m.property()],d.prototype,"maxZoom",void 0);b.__decorate([m.property()],d.prototype,"rotationEnabled",void 0);b.__decorate([m.property()],d.prototype,"snapToZoom",void 0);b.__decorate([m.property()],d.prototype,"view",void 0);b.__decorate([m.property({dependsOn:["view.spatialReference",
"view.defaultsFromMap.tileInfo"]})],d.prototype,"_defaultLODs",null);b.__decorate([m.property({type:r.GeometryConstraint,dependsOn:["geometry","view.spatialReference"]})],d.prototype,"_geometry",null);b.__decorate([m.property({type:x,dependsOn:["rotationEnabled"]})],d.prototype,"_rotation",null);b.__decorate([m.property({readOnly:!0,type:C,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],d.prototype,"_zoom",null);return d=b.__decorate([H.subclass("esri.views.2d.MapViewConstraints")],
d)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../geometry/support/webMercatorUtils ../../../geometry/support/contains ../../../geometry/projection ../../../geometry/support/near".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r){var x;const C=B.getLogger("esri.views.MapView");f.GeometryConstraint=x=function(E){function D(q){q=E.call(this,q)||this;q.geometry=null;q.spatialReference=null;return q}b._inheritsLoose(D,E);var z=D.prototype;z.constrain=function(q,n){if(!this.normalizedGeometry)return q;n=q.targetGeometry;if("extent"===this.normalizedGeometry.type?d.extentContainsPoint(this.normalizedGeometry,n):d.polygonContainsPoint(this.normalizedGeometry,n))return q;({coordinate:n}=
r.nearestCoordinate(this.normalizedGeometry,n));if(!n)return q;q.targetGeometry=n;return q};z.clone=function(){var q,n;return new x({geometry:null==(q=this.geometry)?void 0:q.clone(),spatialReference:null==(n=this.spatialReference)?void 0:n.clone()})};b._createClass(D,[{key:"normalizedGeometry",get:function(){if(!this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(g.canProject(this.geometry,this.spatialReference))return g.project(this.geometry,
this.spatialReference);if(h.isLoaded())return h.project(this.geometry,this.spatialReference);C.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry});return null}return this.geometry}}]);return D}(c);k.__decorate([w.property({constructOnly:!0})],f.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([w.property({readOnly:!0,dependsOn:["geometry",
"spatialReference"]})],f.GeometryConstraint.prototype,"normalizedGeometry",null);k.__decorate([w.property({constructOnly:!0})],f.GeometryConstraint.prototype,"spatialReference",void 0);f.GeometryConstraint=x=k.__decorate([K.subclass("esri.views.2d.constraints.GeometryConstraint")],f.GeometryConstraint);Object.defineProperty(f,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z,q){function n(){return!!za&&E.isLoaded()}function t(N){u.isNone(Ba)&&(Ba=m.all([E.load(),(new Promise(function(O,P){f(["../chunks/geometryEngineBase"],O,P)})).then(function(O){return O.geometryEngineBase}),new Promise(function(O,P){f(["./geometryAdapters/hydrated"],O,P)})]));return Ba.then(([,O,{hydratedAdapter:P}])=>{m.throwIfAborted(N);ya=P;za=O.default;za._enableProjection(E.pe)})}function I(N,O,P,Y,na=null){if(u.isNone(P)||u.isNone(Y))return O;
if(Q(P,Y,na))return O.map(sa=>aa(sa,P,Y));if(u.isNone(na)){const sa=q.cacheKey(P,Y);void 0!==Ca[sa]?na=Ca[sa]:(na=J(P,Y,null),u.isNone(na)&&(na=new q),Ca[sa]=na)}if(u.isNone(za))throw new Da;return za._project(N,O,P,Y,na)}function J(N,O,P=null){if(u.isNone(za))throw new Da;if(u.isNone(N)||u.isNone(O))return null;N=za._getTransformation(ya,N,O,P,null==P?void 0:P.spatialReference);return null!==N?q.fromGE(N):null}function Q(N,O,P){return P?!1:w.equals(N,O)?!0:w.isValid(N)&&w.isValid(O)&&!!ta(N,O,Ma)}
function aa(N,O,P){if(!N)return N;if("x"in N){var Y=new K;return ea(N,O,Y,P)?Y:null}return"xmin"in N?(Y=new A,F(N,O,Y,P)?Y:null):"rings"in N?(Y=new p,y(N,O,Y,P)?Y:null):"paths"in N?(Y=new c,ka(N,O,Y,P)?Y:null):"points"in N?(Y=new v,ha(N,O,Y,P)?Y:null):null}function ea(N,O,P,Y,na=0){Ea[0]=N.x;Ea[1]=N.y;const sa=N.z;Ea[2]=void 0!==sa?sa:na;if(!T(Ea,O,0,Ea,Y,0,1))return!1;P.x=Ea[0];P.y=Ea[1];P.spatialReference=Y;void 0===sa?(P.z=void 0,P.hasZ=!1):(P.z=Ea[2],P.hasZ=!0);void 0===N.m?(P.m=void 0,P.hasM=
!1):(P.m=N.m,P.hasM=!0);return!0}function ha(N,O,P,Y,na=0){const {points:sa,hasZ:xa,hasM:Aa}=N;N=[];const Ia=sa.length,Ha=[];for(var Ga of sa)Ha.push(Ga[0],Ga[1],xa?Ga[2]:na);if(!T(Ha,O,0,Ha,Y,0,Ia))return!1;for(O=0;O<Ia;++O){na=3*O;Ga=Ha[na];const Na=Ha[na+1];xa&&Aa?N.push([Ga,Na,Ha[na+2],sa[O][3]]):xa?N.push([Ga,Na,Ha[na+2]]):Aa?N.push([Ga,Na,sa[O][2]]):N.push([Ga,Na])}P.points=N;P.spatialReference=Y;P.hasZ=xa;P.hasM=Aa;return!0}function ka(N,O,P,Y,na=0){const {paths:sa,hasZ:xa,hasM:Aa}=N;N=[];
if(!X(sa,xa,Aa,O,N,Y,na))return!1;P.paths=N;P.spatialReference=Y;P.hasZ=xa;P.hasM=Aa;return!0}function y(N,O,P,Y,na=0){const {rings:sa,hasZ:xa,hasM:Aa}=N;N=[];if(!X(sa,xa,Aa,O,N,Y,na))return!1;P.rings=N;P.spatialReference=Y;P.hasZ=xa;P.hasM=Aa;return!0}function F(N,O,P,Y,na=0){const {xmin:sa,ymin:xa,xmax:Aa,ymax:Ia,hasZ:Ha,hasM:Ga}=N;if(!Z(sa,xa,Ha?N.zmin:na,O,Ea,Y))return!1;P.xmin=Ea[0];P.ymin=Ea[1];Ha&&(P.zmin=Ea[2]);if(!Z(Aa,Ia,Ha?N.zmax:na,O,Ea,Y))return!1;P.xmax=Ea[0];P.ymax=Ea[1];Ha&&(P.zmax=
Ea[2]);Ga&&(P.mmin=N.mmin,P.mmax=N.mmax);P.spatialReference=Y;return!0}function Z(N,O,P,Y,na,sa){wa[0]=N;wa[1]=O;wa[2]=P;return T(wa,Y,0,na,sa,0,1)}function pa(N,O,P,Y){if(u.isNone(O)||u.isNone(Y)||2>N.length)return!1;2===N.length&&(wa[0]=N[0],wa[1]=N[1],wa[2]=0,N=wa);return T(N,O,0,P,Y,0,1)}function S(N,O,P){u.isNone(O)?N=!1:(O=oa(O,La),O=Ja[O][6],u.isNone(O)?N=!1:(O(N,0,wa,0),P!==wa&&(P[0]=wa[0],P[1]=wa[1],2<P.length&&(P[2]=wa[2])),N=!0));return N}function T(N,O,P,Y,na,sa,xa=1){O=ta(O,na,Ma);if(u.isNone(O))return!1;
if(O===ca){if(N===Y&&P===sa)return!0;xa=P+3*xa;for(let Aa=P,Ia=sa;Aa<xa;Aa++,Ia++)Y[Ia]=N[Aa];return!0}xa=P+3*xa;for(let Aa=P,Ia=sa;Aa<xa;Aa+=3,Ia+=3)O(N,Aa,Y,Ia);return!0}function X(N,O,P,Y,na,sa,xa=0){const Aa=[];for(const Ia of N)for(const Ha of Ia)Aa.push(Ha[0],Ha[1],O?Ha[2]:xa);if(!T(Aa,Y,0,Aa,sa,0,Aa.length/3))return!1;Y=0;na.length=0;for(const Ia of N){N=[];for(const Ha of Ia)O&&P?N.push([Aa[Y++],Aa[Y++],Aa[Y++],Ha[3]]):O?N.push([Aa[Y++],Aa[Y++],Aa[Y++]]):(P?N.push([Aa[Y++],Aa[Y++],Ha[2]]):
N.push([Aa[Y++],Aa[Y++]]),Y++);na.push(N)}return!0}function ja(N,O,P){const Y=Math.sin(O);O=Math.cos(O);const na=Math.sin(N);N=Math.cos(N);P[0]=-Y;P[4]=-na*O;P[8]=N*O;P[12]=0;P[1]=O;P[5]=-na*Y;P[9]=N*Y;P[13]=0;P[2]=0;P[6]=N;P[10]=na;P[14]=0;P[3]=0;P[7]=0;P[11]=0;P[15]=1;return P}function oa(N,O){if(O.spatialReference===N)return O.spatialReferenceId;O.spatialReference=N;"metersPerUnit"in O&&(O.metersPerUnit=x.getMetersPerUnitForSR(N,1));return N.wkt===r.SphericalECEFSpatialReference.wkt?O.spatialReferenceId=
1:w.isWGS84(N)?O.spatialReferenceId=2:w.isWebMercator(N)?O.spatialReferenceId=3:N.wkt===r.WGS84ECEFSpatialReference.wkt?O.spatialReferenceId=4:4490===N.wkid?O.spatialReferenceId=5:N.wkt===r.SphericalPCPFMars.wkt?O.spatialReferenceId=7:N.wkt===r.SphericalPCPFMoon.wkt?O.spatialReferenceId=9:w.isMars(N)?O.spatialReferenceId=8:w.isMoon(N)?O.spatialReferenceId=10:O.spatialReferenceId=0}function ca(N,O,P,Y){N!==P&&(P[Y++]=N[O++],P[Y++]=N[O++],P[Y]=N[O])}function V(N,O,P,Y){P[Y++]=Ka*(N[O++]/H.earth.radius);
P[Y++]=Ka*(Math.PI/2-2*Math.atan(Math.exp(-1*N[O++]/H.earth.radius)));P[Y]=N[O]}function ba(N,O,P,Y){V(N,O,P,Y);l(P,Y,P,Y)}function ra(N,O,P,Y){V(N,O,P,Y);ia(P,Y,P,Y)}function la(N,O,P,Y){var na=.4999999*Math.PI;na=g.clamp(Fa*N[O+1],-na,na);na=Math.sin(na);P[Y++]=Fa*N[O]*H.earth.radius;P[Y++]=H.earth.halfSemiMajorAxis*Math.log((1+na)/(1-na));P[Y]=N[O+2]}function a(N,O,P,Y,na){na+=N[O+2];const sa=Fa*N[O+1];N=Fa*N[O];O=Math.cos(sa);P[Y++]=Math.cos(N)*O*na;P[Y++]=Math.sin(N)*O*na;P[Y]=Math.sin(sa)*na}
function e(N,O,P,Y){a(N,O,P,Y,H.moon.radius)}function L(N,O,P,Y){a(N,O,P,Y,H.mars.radius)}function l(N,O,P,Y){a(N,O,P,Y,H.earth.radius)}function G(N,O,P,Y,na){var sa=N[O];const xa=N[O+1];O=N[O+2];N=Math.sqrt(sa*sa+xa*xa+O*O);O=g.asinClamped(O/(0===N?1:N));sa=Math.atan2(xa,sa);P[Y++]=Ka*sa;P[Y++]=Ka*O;P[Y]=N-na}function M(N,O,P,Y){G(N,O,P,Y,H.moon.radius)}function R(N,O,P,Y){G(N,O,P,Y,H.mars.radius)}function U(N,O,P,Y){G(N,O,P,Y,H.earth.radius)}function W(N,O,P,Y){U(N,O,P,Y);la(P,Y,P,Y)}function da(N,
O,P,Y){U(N,O,P,Y);ia(P,Y,P,Y)}function ia(N,O,P,Y){{var na=H.earth;const xa=Fa*N[O];var sa=Fa*N[O+1];N=N[O+2];O=Math.sin(sa);sa=Math.cos(sa);const Aa=na.radius/Math.sqrt(1-na.eccentricitySquared*O*O);P[Y++]=(Aa+N)*sa*Math.cos(xa);P[Y++]=(Aa+N)*sa*Math.sin(xa);P[Y++]=(Aa*(1-na.eccentricitySquared)+N)*O}}function fa(N,O,P,Y){var na=z.earthEllipsoidConstants,sa=N[O],xa=N[O+1];N=N[O+2];let Aa;O=Math.abs(N);var Ia=sa*sa+xa*xa;var Ha=Math.sqrt(Ia);var Ga=Ia+N*N;var Na=Math.sqrt(Ga);sa=Math.atan2(xa,sa);
var Ra=N*N/Ga;Ga=Ia/Ga;xa=na.a2/Na;Ia=na.a3-na.a4/Na;.3<Ga?(Ra=O/Na*(1+Ga*(na.a1+xa+Ra*Ia)/Na),Na=Math.asin(Ra),xa=Ra*Ra,Ga=Math.sqrt(1-xa)):(Ga=Ha/Na*(1-Ra*(na.a5-xa-Ga*Ia)/Na),Na=Math.acos(Ga),xa=1-Ga*Ga,Ra=Math.sqrt(xa));Aa=1-H.earth.eccentricitySquared*xa;xa=H.earth.radius/Math.sqrt(Aa);na=na.a6*xa;xa=Ha-xa*Ga;Ia=O-na*Ra;O=Ga*xa+Ra*Ia;Ha=Ga*Ia-Ra*xa;na=Ha/(na/Aa+O);Na+=na;0>N&&(Na=-Na);P[Y++]=Ka*sa;P[Y++]=Ka*Na;P[Y]=O+Ha*na/2}function ma(N,O,P,Y){fa(N,O,P,Y);l(P,Y,P,Y)}function qa(N,O,P,Y){fa(N,
O,P,Y);la(P,Y,P,Y)}function ta(N,O,P=va()){return u.isNone(N)||u.isNone(O)?null:ua(N,O,P).projector}function ua(N,O,P){if(u.isNone(N)||u.isNone(O)||P.source.spatialReference===N&&P.dest.spatialReference===O)return P;const Y=oa(N,P.source),na=oa(O,P.dest);0===Y&&0===na?w.equals(N,O)?P.projector=ca:P.projector=null:P.projector=Ja[Y][na];return P}function va(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},
projector:ca}}let za=null,ya=null,Ba=null,Ca={},Da=function(N){function O(){return N.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}k._inheritsLoose(O,N);return O}(B);(function(N){N.x2lon=function(O){return O/H.earth.radius};N.y2lat=function(O){return Math.PI/2-2*Math.atan(Math.exp(-1*O/H.earth.radius))};N.lon2x=function(O){return O*H.earth.radius};N.lat2y=function(O){O=Math.sin(O);return H.earth.radius/2*Math.log((1+O)/(1-O))}})(b.webMercator||
(b.webMercator={}));const Ja={[2]:{[5]:null,[8]:null,[10]:null,[6]:ca,[1]:l,[7]:null,[9]:null,[0]:null,[3]:la,[2]:ca,[4]:ia},[5]:{[5]:ca,[8]:null,[10]:null,[6]:ca,[1]:l,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ia},[8]:{[5]:null,[8]:ca,[10]:null,[6]:null,[1]:null,[7]:L,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ca,[6]:null,[1]:null,[7]:null,[9]:e,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:V,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:ca,
[2]:V,[4]:ra},[4]:{[5]:fa,[8]:null,[10]:null,[6]:fa,[1]:ma,[7]:null,[9]:null,[0]:null,[3]:qa,[2]:fa,[4]:ca},[1]:{[5]:U,[8]:null,[10]:null,[6]:U,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:W,[2]:U,[4]:da},[7]:{[5]:null,[8]:R,[10]:null,[6]:null,[1]:null,[7]:ca,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:M,[6]:null,[1]:null,[7]:null,[9]:ca,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ca,[3]:null,[2]:null,[4]:null},
[6]:{[5]:null,[8]:null,[10]:null,[6]:ca,[1]:l,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ca,[4]:ia}},La={spatialReference:null,spatialReferenceId:0},Oa={spatialReference:null,spatialReferenceId:0},Ma=va(),Pa=va(),Fa=g.deg2rad(1),Ka=g.rad2deg(1),wa=d.create(),Qa=d.create(),Sa=d.create(),Ea=d.create(),Ta=d.create();b.canProjectToWGS84ComparableLonLat=function(N){if(u.isNone(N))return!1;N=oa(N,La);return!!Ja[N][6]};b.canProjectWithoutEngine=Q;b.computeLatLonToENURotation=ja;b.computeLinearTransformation=
function(N,O,P,Y){if(u.isNone(N)||u.isNone(Y))return!1;var na=oa(N,La),sa=oa(Y,Oa);if(na===sa&&1!==sa&&(0!==na||w.equals(N,Y)))return C.identity(P),C.translate(P,P,O),!0;if(1===sa||7===sa||9===sa){Y=N=0;if(1===sa){na=Ja[na][6];sa=Ja[6][sa];if(u.isNone(na)||u.isNone(sa))return!1;na(O,0,Qa,0);sa(Qa,0,Sa,0);N=Fa*Qa[0];Y=Fa*Qa[1]}else if(7===sa||9===sa){sa=Ja[na][sa];if(u.isNone(sa))return!1;sa(O,0,Sa,0);N=Fa*O[0];Y=Fa*O[1]}ja(Y,N,P);P[12]=Sa[0];P[13]=Sa[1];P[14]=Sa[2];return!0}if(3===sa&&(2===na||1===
na)){sa=Ja[na][6];if(u.isNone(sa))return!1;sa(O,0,Qa,0);O=Fa*Qa[1];la(Qa,0,Sa,0);C.identity(P);C.translate(P,P,Sa);O=1/Math.cos(O);C.scale(P,P,[O,O,1]);return!0}return!1};b.getProjectorName=function(N,O){switch(ta(N,O,Ma)){case ca:return"copy3";case l:return"wgs84ToSphericalECEF";case la:return"wgs84ToWebMercator";case ia:return"wgs84ToWGS84ECEF";case V:return"webMercatorToWGS84";case ba:return"webMercatorToSphericalECEF";case ra:return"webMercatorToWGS84ECEF";case fa:return"wgs84ECEFToWGS84";case ma:return"wgs84ECEFToSphericalECEF";
case qa:return"wgs84ECEFToWebMercator";case U:return"sphericalECEFToWGS84";case W:return"sphericalECEFToWebMercator";case R:return"sphericalECEFToMars2000";case M:return"sphericalECEFToMoon2000";case da:return"sphericalECEFToWGS84ECEF";case L:return"mars2000ToSphericalPCPF";case e:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=J;b.getTransformations=function(N,O,P=null){if(u.isNone(za))throw new Da;N=za._getTransformationBySuitability(ya,N,O,P,null==P?void 0:P.spatialReference);
if(null!==N){O=[];for(const Y of N)O.push(q.fromGE(Y));return O}return[]};b.initializeProjection=async function(N,O){if(!n())for(const {source:P,dest:Y,geographicTransformation:na}of N)if(!Q(P,Y,na))return t(O)};b.isLoaded=n;b.isSupported=function(){return!0};b.load=t;b.localLinearScaleFactors=function(N,O,P,Y){if(u.isNone(O)||u.isNone(Y))return!1;const na=oa(O,La);var sa=oa(Y,Oa);if(na===sa&&0!==na||w.equals(O,Y))return P[0]=1,P[1]=1,P[2]=1,!0;if(1===na){O=h.length(N);N=O/Math.sqrt(N[0]*N[0]+N[1]*
N[1]);O/=H.earth.radius;if(3===sa)return P[0]=N*O,P[1]=N*O,P[2]=1,!0;if(2===sa||5===sa)return sa=180/(H.earth.radius*Math.PI),P[0]=sa*N*O,P[1]=sa*O,P[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(N,O,P,Y,na=0){Y+=na;na=Math.cos(P);N[0]=Math.cos(O)*na*Y;N[1]=Math.sin(O)*na*Y;N[2]=Math.sin(P)*Y};b.project=function(N,O,P=null){return Array.isArray(N)?0===N.length?[]:I(ya,N,N[0].spatialReference,O,P):I(ya,[N],N.spatialReference,O,P)[0]};b.projectBoundingRect=function(N,O,P,Y){if(null==N)return!1;
if(w.equals(O,Y))return D.set(P,N),!0;wa[0]=N[0];wa[1]=N[1];wa[2]=0;if(!T(wa,O,0,wa,Y,0,1))return!1;P[0]=wa[0];P[1]=wa[1];wa[0]=N[2];wa[1]=N[3];wa[2]=0;if(!T(wa,O,0,wa,Y,0,1))return!1;P[2]=wa[0];P[3]=wa[1];return!0};b.projectBoundingSphere=function(N,O,P,Y){if(u.isNone(O)||u.isNone(Y))return!1;O=ua(O,Y,Pa);if(O.projector===ca)return P[0]=N[0],P[1]=N[1],P[2]=N[2],P[3]=N[3],!0;if(u.isNone(O.projector))return!1;const {source:na,dest:sa}=O;if(3===sa.spatialReferenceId){O=Ja[na.spatialReferenceId][2];
if(u.isNone(O))return!1;O(N,0,Qa,0);O=Math.abs(Fa*Qa[1])+Math.asin(N[3]/(H.earth.radius+N[2]));la(Qa,0,P,0);P[3]=O>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(O)*N[3];return!0}O.projector(N,0,P,0);P[3]=N[3]*na.metersPerUnit/sa.metersPerUnit;return!0};b.projectBuffer=T;b.projectDirection=function(N,O,P,Y,na){h.copy(Ea,N);h.add(Ta,N,O);pa(Ea,P,Ea,na);pa(Ta,P,Ta,na);h.subtract(Y,Ta,Ea);h.normalize(Y,Y)};b.projectExtent=function(N,O,P=O.spatialReference,Y=0){return u.isNone(P)?!1:F(N,N.spatialReference,
O,P,Y)};b.projectMany=I;b.projectMultipoint=function(N,O,P=O.spatialReference,Y=0){return u.isNone(P)?!1:ha(N,N.spatialReference,O,P,Y)};b.projectPoint=function(N,O,P=O.spatialReference,Y=0){return u.isNone(P)?!1:ea(N,N.spatialReference,O,P,Y)};b.projectPointToVector=function(N,O,P,Y=0){Ea[0]=N.x;Ea[1]=N.y;const na=N.z;Ea[2]=void 0!==na?na:Y;return T(Ea,N.spatialReference,0,O,P,0,1)};b.projectPointToWGS84ComparableLonLat=function(N,O){Ea[0]=N.x;Ea[1]=N.y;const P=N.z;Ea[2]=void 0!==P?P:0;return S(Ea,
N.spatialReference,O)};b.projectPolygon=function(N,O,P=O.spatialReference,Y=0){return u.isNone(P)?!1:y(N,N.spatialReference,O,P,Y)};b.projectPolyline=function(N,O,P=O.spatialReference,Y=0){return u.isNone(P)?!1:ka(N,N.spatialReference,O,P,Y)};b.projectVectorToDehydratedPoint=function(N,O,P,Y){u.isNone(Y)&&(Y=P.spatialReference);return T(N,O,0,Ea,Y,0,1)?(P.x=Ea[0],P.y=Ea[1],P.z=Ea[2],P.spatialReference=Y,P):null};b.projectVectorToPoint=function(N,O,P,Y){if(u.isNone(O)||u.isNone(P))return null;Y=u.isSome(Y)?
Y:new K({spatialReference:P});return T(N,O,0,Ea,P,0,1)?(Y.x=Ea[0],Y.y=Ea[1],Y.z=Ea[2],Y.spatialReference=P,Y):null};b.projectVectorToVector=pa;b.projectVectorToWGS84ComparableLonLat=S;b.projectXYZToVector=Z;b.sphericalECEFToSphericalPCPF=G;b.unload=function(){Ba=ya=za=null;Ca={}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(f,b,k){function u(a,e){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];a[6]=
e[6];a[7]=e[7];a[8]=e[8];a[9]=e[9];a[10]=e[10];a[11]=e[11];a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function B(a,e,L,l,G,M,R,U,W,da,ia,fa,ma,qa,ta,ua,va){a[0]=e;a[1]=L;a[2]=l;a[3]=G;a[4]=M;a[5]=R;a[6]=U;a[7]=W;a[8]=da;a[9]=ia;a[10]=fa;a[11]=ma;a[12]=qa;a[13]=ta;a[14]=ua;a[15]=va;return a}function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function w(a,e){if(a===e){const L=e[1],l=e[2],G=e[3],M=
e[6],R=e[7],U=e[11];a[1]=e[4];a[2]=e[8];a[3]=e[12];a[4]=L;a[6]=e[9];a[7]=e[13];a[8]=l;a[9]=M;a[11]=e[14];a[12]=G;a[13]=R;a[14]=U}else a[0]=e[0],a[1]=e[4],a[2]=e[8],a[3]=e[12],a[4]=e[1],a[5]=e[5],a[6]=e[9],a[7]=e[13],a[8]=e[2],a[9]=e[6],a[10]=e[10],a[11]=e[14],a[12]=e[3],a[13]=e[7],a[14]=e[11],a[15]=e[15];return a}function H(a,e){const L=e[0],l=e[1],G=e[2],M=e[3],R=e[4],U=e[5],W=e[6],da=e[7],ia=e[8],fa=e[9],ma=e[10],qa=e[11],ta=e[12],ua=e[13],va=e[14];e=e[15];const za=L*U-l*R,ya=L*W-G*R,Ba=L*da-M*
R,Ca=l*W-G*U,Da=l*da-M*U,Ja=G*da-M*W,La=ia*ua-fa*ta,Oa=ia*va-ma*ta,Ma=ia*e-qa*ta,Pa=fa*va-ma*ua,Fa=fa*e-qa*ua,Ka=ma*e-qa*va;let wa=za*Ka-ya*Fa+Ba*Pa+Ca*Ma-Da*Oa+Ja*La;if(!wa)return null;wa=1/wa;a[0]=(U*Ka-W*Fa+da*Pa)*wa;a[1]=(G*Fa-l*Ka-M*Pa)*wa;a[2]=(ua*Ja-va*Da+e*Ca)*wa;a[3]=(ma*Da-fa*Ja-qa*Ca)*wa;a[4]=(W*Ma-R*Ka-da*Oa)*wa;a[5]=(L*Ka-G*Ma+M*Oa)*wa;a[6]=(va*Ba-ta*Ja-e*ya)*wa;a[7]=(ia*Ja-ma*Ba+qa*ya)*wa;a[8]=(R*Fa-U*Ma+da*La)*wa;a[9]=(l*Ma-L*Fa-M*La)*wa;a[10]=(ta*Da-ua*Ba+e*za)*wa;a[11]=(fa*Ba-ia*
Da-qa*za)*wa;a[12]=(U*Oa-R*Pa-W*La)*wa;a[13]=(L*Pa-l*Oa+G*La)*wa;a[14]=(ua*ya-ta*Ca-va*za)*wa;a[15]=(ia*Ca-fa*ya+ma*za)*wa;return a}function K(a,e){const L=e[0],l=e[1],G=e[2],M=e[3],R=e[4],U=e[5],W=e[6],da=e[7],ia=e[8],fa=e[9],ma=e[10],qa=e[11],ta=e[12],ua=e[13],va=e[14];e=e[15];a[0]=U*(ma*e-qa*va)-fa*(W*e-da*va)+ua*(W*qa-da*ma);a[1]=-(l*(ma*e-qa*va)-fa*(G*e-M*va)+ua*(G*qa-M*ma));a[2]=l*(W*e-da*va)-U*(G*e-M*va)+ua*(G*da-M*W);a[3]=-(l*(W*qa-da*ma)-U*(G*qa-M*ma)+fa*(G*da-M*W));a[4]=-(R*(ma*e-qa*va)-
ia*(W*e-da*va)+ta*(W*qa-da*ma));a[5]=L*(ma*e-qa*va)-ia*(G*e-M*va)+ta*(G*qa-M*ma);a[6]=-(L*(W*e-da*va)-R*(G*e-M*va)+ta*(G*da-M*W));a[7]=L*(W*qa-da*ma)-R*(G*qa-M*ma)+ia*(G*da-M*W);a[8]=R*(fa*e-qa*ua)-ia*(U*e-da*ua)+ta*(U*qa-da*fa);a[9]=-(L*(fa*e-qa*ua)-ia*(l*e-M*ua)+ta*(l*qa-M*fa));a[10]=L*(U*e-da*ua)-R*(l*e-M*ua)+ta*(l*da-M*U);a[11]=-(L*(U*qa-da*fa)-R*(l*qa-M*fa)+ia*(l*da-M*U));a[12]=-(R*(fa*va-ma*ua)-ia*(U*va-W*ua)+ta*(U*ma-W*fa));a[13]=L*(fa*va-ma*ua)-ia*(l*va-G*ua)+ta*(l*ma-G*fa);a[14]=-(L*(U*va-
W*ua)-R*(l*va-G*ua)+ta*(l*W-G*U));a[15]=L*(U*ma-W*fa)-R*(l*ma-G*fa)+ia*(l*W-G*U);return a}function A(a){const e=a[0],L=a[1],l=a[2],G=a[3],M=a[4],R=a[5],U=a[6],W=a[7],da=a[8],ia=a[9],fa=a[10],ma=a[11],qa=a[12],ta=a[13],ua=a[14];a=a[15];return(e*R-L*M)*(fa*a-ma*ua)-(e*U-l*M)*(ia*a-ma*ta)+(e*W-G*M)*(ia*ua-fa*ta)+(L*U-l*R)*(da*a-ma*qa)-(L*W-G*R)*(da*ua-fa*qa)+(l*W-G*U)*(da*ta-ia*qa)}function v(a,e,L){const l=e[0],G=e[1],M=e[2],R=e[3],U=e[4],W=e[5],da=e[6],ia=e[7],fa=e[8],ma=e[9],qa=e[10],ta=e[11],ua=
e[12],va=e[13],za=e[14];e=e[15];let ya=L[0],Ba=L[1],Ca=L[2],Da=L[3];a[0]=ya*l+Ba*U+Ca*fa+Da*ua;a[1]=ya*G+Ba*W+Ca*ma+Da*va;a[2]=ya*M+Ba*da+Ca*qa+Da*za;a[3]=ya*R+Ba*ia+Ca*ta+Da*e;ya=L[4];Ba=L[5];Ca=L[6];Da=L[7];a[4]=ya*l+Ba*U+Ca*fa+Da*ua;a[5]=ya*G+Ba*W+Ca*ma+Da*va;a[6]=ya*M+Ba*da+Ca*qa+Da*za;a[7]=ya*R+Ba*ia+Ca*ta+Da*e;ya=L[8];Ba=L[9];Ca=L[10];Da=L[11];a[8]=ya*l+Ba*U+Ca*fa+Da*ua;a[9]=ya*G+Ba*W+Ca*ma+Da*va;a[10]=ya*M+Ba*da+Ca*qa+Da*za;a[11]=ya*R+Ba*ia+Ca*ta+Da*e;ya=L[12];Ba=L[13];Ca=L[14];Da=L[15];a[12]=
ya*l+Ba*U+Ca*fa+Da*ua;a[13]=ya*G+Ba*W+Ca*ma+Da*va;a[14]=ya*M+Ba*da+Ca*qa+Da*za;a[15]=ya*R+Ba*ia+Ca*ta+Da*e;return a}function p(a,e,L){const l=L[0],G=L[1];L=L[2];let M=void 0,R=void 0,U=void 0,W=void 0,da=void 0,ia=void 0,fa=void 0,ma=void 0,qa=void 0,ta=void 0,ua=void 0,va=void 0;e===a?(a[12]=e[0]*l+e[4]*G+e[8]*L+e[12],a[13]=e[1]*l+e[5]*G+e[9]*L+e[13],a[14]=e[2]*l+e[6]*G+e[10]*L+e[14],a[15]=e[3]*l+e[7]*G+e[11]*L+e[15]):(M=e[0],R=e[1],U=e[2],W=e[3],da=e[4],ia=e[5],fa=e[6],ma=e[7],qa=e[8],ta=e[9],ua=
e[10],va=e[11],a[0]=M,a[1]=R,a[2]=U,a[3]=W,a[4]=da,a[5]=ia,a[6]=fa,a[7]=ma,a[8]=qa,a[9]=ta,a[10]=ua,a[11]=va,a[12]=M*l+da*G+qa*L+e[12],a[13]=R*l+ia*G+ta*L+e[13],a[14]=U*l+fa*G+ua*L+e[14],a[15]=W*l+ma*G+va*L+e[15]);return a}function c(a,e,L){const l=L[0],G=L[1];L=L[2];a[0]=e[0]*l;a[1]=e[1]*l;a[2]=e[2]*l;a[3]=e[3]*l;a[4]=e[4]*G;a[5]=e[5]*G;a[6]=e[6]*G;a[7]=e[7]*G;a[8]=e[8]*L;a[9]=e[9]*L;a[10]=e[10]*L;a[11]=e[11]*L;a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function g(a,e,L,l){let G=l[0],
M=l[1];l=l[2];let R=Math.sqrt(G*G+M*M+l*l);var U=void 0,W=void 0;let da=void 0,ia=void 0,fa=void 0,ma=void 0,qa=void 0,ta=void 0,ua=void 0,va=void 0,za=void 0,ya=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ja=void 0,La=void 0,Oa=void 0,Ma=void 0,Pa=void 0,Fa=void 0,Ka=void 0;W=U=void 0;if(R<k.EPSILON)return null;R=1/R;G*=R;M*=R;l*=R;U=Math.sin(L);W=Math.cos(L);da=1-W;ia=e[0];fa=e[1];ma=e[2];qa=e[3];ta=e[4];ua=e[5];va=e[6];za=e[7];ya=e[8];Ba=e[9];Ca=e[10];Da=e[11];Ja=G*G*da+W;La=M*G*da+l*U;Oa=l*G*da-M*U;
Ma=G*M*da-l*U;Pa=M*M*da+W;Fa=l*M*da+G*U;Ka=G*l*da+M*U;U=M*l*da-G*U;W=l*l*da+W;a[0]=ia*Ja+ta*La+ya*Oa;a[1]=fa*Ja+ua*La+Ba*Oa;a[2]=ma*Ja+va*La+Ca*Oa;a[3]=qa*Ja+za*La+Da*Oa;a[4]=ia*Ma+ta*Pa+ya*Fa;a[5]=fa*Ma+ua*Pa+Ba*Fa;a[6]=ma*Ma+va*Pa+Ca*Fa;a[7]=qa*Ma+za*Pa+Da*Fa;a[8]=ia*Ka+ta*U+ya*W;a[9]=fa*Ka+ua*U+Ba*W;a[10]=ma*Ka+va*U+Ca*W;a[11]=qa*Ka+za*U+Da*W;e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);return a}function d(a,e,L){const l=Math.sin(L);L=Math.cos(L);const G=e[4],M=e[5],R=e[6],U=e[7],W=
e[8],da=e[9],ia=e[10],fa=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[4]=G*L+W*l;a[5]=M*L+da*l;a[6]=R*L+ia*l;a[7]=U*L+fa*l;a[8]=W*L-G*l;a[9]=da*L-M*l;a[10]=ia*L-R*l;a[11]=fa*L-U*l;return a}function h(a,e,L){const l=Math.sin(L);L=Math.cos(L);const G=e[0],M=e[1],R=e[2],U=e[3],W=e[8],da=e[9],ia=e[10],fa=e[11];e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=G*L-W*l;a[1]=M*L-da*l;a[2]=R*L-
ia*l;a[3]=U*L-fa*l;a[8]=G*l+W*L;a[9]=M*l+da*L;a[10]=R*l+ia*L;a[11]=U*l+fa*L;return a}function r(a,e,L){const l=Math.sin(L);L=Math.cos(L);const G=e[0],M=e[1],R=e[2],U=e[3],W=e[4],da=e[5],ia=e[6],fa=e[7];e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=G*L+W*l;a[1]=M*L+da*l;a[2]=R*L+ia*l;a[3]=U*L+fa*l;a[4]=W*L-G*l;a[5]=da*L-M*l;a[6]=ia*L-R*l;a[7]=fa*L-U*l;return a}function x(a,e){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;
a[9]=0;a[10]=1;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a}function C(a,e){a[0]=e[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=e[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function E(a,e,L){let l=L[0],G=L[1];L=L[2];let M=Math.sqrt(l*l+G*G+L*L),R=void 0,U=void 0,W=void 0;if(M<k.EPSILON)return null;M=1/M;l*=M;G*=M;L*=M;R=Math.sin(e);U=Math.cos(e);W=1-U;a[0]=l*l*W+U;a[1]=G*l*W+L*R;a[2]=L*l*W-G*R;a[3]=0;a[4]=l*G*W-L*R;a[5]=G*G*W+U;a[6]=L*G*W+l*R;a[7]=
0;a[8]=l*L*W+G*R;a[9]=G*L*W-l*R;a[10]=L*L*W+U;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function D(a,e){const L=Math.sin(e);e=Math.cos(e);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=L;a[7]=0;a[8]=0;a[9]=-L;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function z(a,e){const L=Math.sin(e);e=Math.cos(e);a[0]=e;a[1]=0;a[2]=-L;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=L;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function q(a,e){const L=Math.sin(e);e=Math.cos(e);
a[0]=e;a[1]=L;a[2]=0;a[3]=0;a[4]=-L;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function n(a,e,L){var l=e[0],G=e[1],M=e[2],R=e[3],U=l+l,W=G+G;const da=M+M;e=l*U;const ia=l*W;l*=da;const fa=G*W;G*=da;M*=da;U*=R;W*=R;R*=da;a[0]=1-(fa+M);a[1]=ia+R;a[2]=l-W;a[3]=0;a[4]=ia-R;a[5]=1-(e+M);a[6]=G+U;a[7]=0;a[8]=l+W;a[9]=G-U;a[10]=1-(e+fa);a[11]=0;a[12]=L[0];a[13]=L[1];a[14]=L[2];a[15]=1;return a}function t(a,e){const L=la,l=-e[0],G=-e[1],M=-e[2],R=e[3],U=e[4],
W=e[5],da=e[6],ia=e[7],fa=l*l+G*G+M*M+R*R;0<fa?(L[0]=2*(U*R+ia*l+W*M-da*G)/fa,L[1]=2*(W*R+ia*G+da*l-U*M)/fa,L[2]=2*(da*R+ia*M+U*G-W*l)/fa):(L[0]=2*(U*R+ia*l+W*M-da*G),L[1]=2*(W*R+ia*G+da*l-U*M),L[2]=2*(da*R+ia*M+U*G-W*l));n(a,e,L);return a}function I(a,e){a[0]=e[12];a[1]=e[13];a[2]=e[14];return a}function J(a,e){const L=e[0],l=e[1],G=e[2],M=e[4],R=e[5],U=e[6],W=e[8],da=e[9];e=e[10];a[0]=Math.sqrt(L*L+l*l+G*G);a[1]=Math.sqrt(M*M+R*R+U*U);a[2]=Math.sqrt(W*W+da*da+e*e);return a}function Q(a,e){const L=
e[0]+e[5]+e[10];let l=0;0<L?(l=2*Math.sqrt(L+1),a[3]=.25*l,a[0]=(e[6]-e[9])/l,a[1]=(e[8]-e[2])/l,a[2]=(e[1]-e[4])/l):e[0]>e[5]&&e[0]>e[10]?(l=2*Math.sqrt(1+e[0]-e[5]-e[10]),a[3]=(e[6]-e[9])/l,a[0]=.25*l,a[1]=(e[1]+e[4])/l,a[2]=(e[8]+e[2])/l):e[5]>e[10]?(l=2*Math.sqrt(1+e[5]-e[0]-e[10]),a[3]=(e[8]-e[2])/l,a[0]=(e[1]+e[4])/l,a[1]=.25*l,a[2]=(e[6]+e[9])/l):(l=2*Math.sqrt(1+e[10]-e[0]-e[5]),a[3]=(e[1]-e[4])/l,a[0]=(e[8]+e[2])/l,a[1]=(e[6]+e[9])/l,a[2]=.25*l);return a}function aa(a,e,L,l){var G=e[0],M=
e[1],R=e[2],U=e[3],W=G+G,da=M+M,ia=R+R;e=G*W;const fa=G*da;G*=ia;const ma=M*da;M*=ia;R*=ia;W*=U;da*=U;U*=ia;ia=l[0];const qa=l[1];l=l[2];a[0]=(1-(ma+R))*ia;a[1]=(fa+U)*ia;a[2]=(G-da)*ia;a[3]=0;a[4]=(fa-U)*qa;a[5]=(1-(e+R))*qa;a[6]=(M+W)*qa;a[7]=0;a[8]=(G+da)*l;a[9]=(M-W)*l;a[10]=(1-(e+ma))*l;a[11]=0;a[12]=L[0];a[13]=L[1];a[14]=L[2];a[15]=1;return a}function ea(a,e,L,l,G){var M=e[0],R=e[1],U=e[2],W=e[3],da=M+M,ia=R+R,fa=U+U;e=M*da;var ma=M*ia,qa=M*fa;M=R*ia;R*=fa;var ta=U*fa;U=W*da;ia*=W;const ua=
W*fa;var va=l[0],za=l[1];fa=l[2];l=G[0];W=G[1];G=G[2];da=(1-(M+ta))*va;const ya=(ma+ua)*va;va*=qa-ia;ma=(ma-ua)*za;ta=(1-(e+ta))*za;za*=R+U;qa=(qa+ia)*fa;R=(R-U)*fa;e=(1-(e+M))*fa;a[0]=da;a[1]=ya;a[2]=va;a[3]=0;a[4]=ma;a[5]=ta;a[6]=za;a[7]=0;a[8]=qa;a[9]=R;a[10]=e;a[11]=0;a[12]=L[0]+l-(da*l+ma*W+qa*G);a[13]=L[1]+W-(ya*l+ta*W+R*G);a[14]=L[2]+G-(va*l+za*W+e*G);a[15]=1;return a}function ha(a,e){var L=e[0],l=e[1],G=e[2];e=e[3];var M=L+L,R=l+l;const U=G+G;L*=M;const W=l*M;l*=R;const da=G*M,ia=G*R;G*=U;
M*=e;R*=e;e*=U;a[0]=1-l-G;a[1]=W+e;a[2]=da-R;a[3]=0;a[4]=W-e;a[5]=1-L-G;a[6]=ia+M;a[7]=0;a[8]=da+R;a[9]=ia-M;a[10]=1-L-l;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ka(a,e,L,l,G,M,R){const U=1/(L-e),W=1/(G-l),da=1/(M-R);a[0]=2*M*U;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*M*W;a[6]=0;a[7]=0;a[8]=(L+e)*U;a[9]=(G+l)*W;a[10]=(R+M)*da;a[11]=-1;a[12]=0;a[13]=0;a[14]=R*M*2*da;a[15]=0;return a}function y(a,e,L,l,G){e=1/Math.tan(e/2);let M=void 0;a[0]=e/L;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=
0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=G&&Infinity!==G?(M=1/(l-G),a[10]=(G+l)*M,a[14]=2*G*l*M):(a[10]=-1,a[14]=-2*l);return a}function F(a,e,L,l){const G=Math.tan(e.upDegrees*Math.PI/180),M=Math.tan(e.downDegrees*Math.PI/180),R=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);const U=2/(R+e),W=2/(G+M);a[0]=U;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=W;a[6]=0;a[7]=0;a[8]=-((R-e)*U*.5);a[9]=(G-M)*W*.5;a[10]=l/(L-l);a[11]=-1;a[12]=0;a[13]=0;a[14]=l*L/(L-l);a[15]=0;return a}
function Z(a,e,L,l,G,M,R){const U=1/(e-L),W=1/(l-G),da=1/(M-R);a[0]=-2*U;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*W;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*da;a[11]=0;a[12]=(e+L)*U;a[13]=(G+l)*W;a[14]=(R+M)*da;a[15]=1;return a}function pa(a,e,L,l){let G=void 0,M=void 0;var R=void 0,U=void 0;let W=void 0,da=void 0;var ia=void 0,fa=void 0;let ma=void 0,qa=void 0;const ta=e[0],ua=e[1];e=e[2];R=l[0];U=l[1];l=l[2];ia=L[0];fa=L[1];L=L[2];if(Math.abs(ta-ia)<k.EPSILON&&Math.abs(ua-fa)<k.EPSILON&&Math.abs(e-L)<k.EPSILON)return m(a);
ia=ta-ia;fa=ua-fa;ma=e-L;qa=1/Math.sqrt(ia*ia+fa*fa+ma*ma);ia*=qa;fa*=qa;ma*=qa;G=U*ma-l*fa;M=l*ia-R*ma;R=R*fa-U*ia;(qa=Math.sqrt(G*G+M*M+R*R))?(qa=1/qa,G*=qa,M*=qa,R*=qa):R=M=G=0;U=fa*R-ma*M;W=ma*G-ia*R;da=ia*M-fa*G;(qa=Math.sqrt(U*U+W*W+da*da))?(qa=1/qa,U*=qa,W*=qa,da*=qa):da=W=U=0;a[0]=G;a[1]=U;a[2]=ia;a[3]=0;a[4]=M;a[5]=W;a[6]=fa;a[7]=0;a[8]=R;a[9]=da;a[10]=ma;a[11]=0;a[12]=-(G*ta+M*ua+R*e);a[13]=-(U*ta+W*ua+da*e);a[14]=-(ia*ta+fa*ua+ma*e);a[15]=1;return a}function S(a,e,L,l){const G=e[0],M=e[1];
e=e[2];var R=l[0];const U=l[1];var W=l[2];l=G-L[0];let da=M-L[1];L=e-L[2];let ia=l*l+da*da+L*L;0<ia&&(ia=1/Math.sqrt(ia),l*=ia,da*=ia,L*=ia);let fa=U*L-W*da;W=W*l-R*L;R=R*da-U*l;ia=fa*fa+W*W+R*R;0<ia&&(ia=1/Math.sqrt(ia),fa*=ia,W*=ia,R*=ia);a[0]=fa;a[1]=W;a[2]=R;a[3]=0;a[4]=da*R-L*W;a[5]=L*fa-l*R;a[6]=l*W-da*fa;a[7]=0;a[8]=l;a[9]=da;a[10]=L;a[11]=0;a[12]=G;a[13]=M;a[14]=e;a[15]=1;return a}function T(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+
", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function X(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}function ja(a,e,L){a[0]=e[0]+L[0];a[1]=e[1]+L[1];a[2]=e[2]+L[2];a[3]=e[3]+L[3];a[4]=e[4]+L[4];a[5]=e[5]+L[5];a[6]=
e[6]+L[6];a[7]=e[7]+L[7];a[8]=e[8]+L[8];a[9]=e[9]+L[9];a[10]=e[10]+L[10];a[11]=e[11]+L[11];a[12]=e[12]+L[12];a[13]=e[13]+L[13];a[14]=e[14]+L[14];a[15]=e[15]+L[15];return a}function oa(a,e,L){a[0]=e[0]-L[0];a[1]=e[1]-L[1];a[2]=e[2]-L[2];a[3]=e[3]-L[3];a[4]=e[4]-L[4];a[5]=e[5]-L[5];a[6]=e[6]-L[6];a[7]=e[7]-L[7];a[8]=e[8]-L[8];a[9]=e[9]-L[9];a[10]=e[10]-L[10];a[11]=e[11]-L[11];a[12]=e[12]-L[12];a[13]=e[13]-L[13];a[14]=e[14]-L[14];a[15]=e[15]-L[15];return a}function ca(a,e,L){a[0]=e[0]*L;a[1]=e[1]*L;
a[2]=e[2]*L;a[3]=e[3]*L;a[4]=e[4]*L;a[5]=e[5]*L;a[6]=e[6]*L;a[7]=e[7]*L;a[8]=e[8]*L;a[9]=e[9]*L;a[10]=e[10]*L;a[11]=e[11]*L;a[12]=e[12]*L;a[13]=e[13]*L;a[14]=e[14]*L;a[15]=e[15]*L;return a}function V(a,e,L,l){a[0]=e[0]+L[0]*l;a[1]=e[1]+L[1]*l;a[2]=e[2]+L[2]*l;a[3]=e[3]+L[3]*l;a[4]=e[4]+L[4]*l;a[5]=e[5]+L[5]*l;a[6]=e[6]+L[6]*l;a[7]=e[7]+L[7]*l;a[8]=e[8]+L[8]*l;a[9]=e[9]+L[9]*l;a[10]=e[10]+L[10]*l;a[11]=e[11]+L[11]*l;a[12]=e[12]+L[12]*l;a[13]=e[13]+L[13]*l;a[14]=e[14]+L[14]*l;a[15]=e[15]+L[15]*l;return a}
function ba(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]}function ra(a,e){const L=a[0],l=a[1],G=a[2],M=a[3],R=a[4],U=a[5],W=a[6],da=a[7],ia=a[8],fa=a[9],ma=a[10],qa=a[11],ta=a[12],ua=a[13],va=a[14];a=a[15];const za=e[0],ya=e[1],Ba=e[2],Ca=e[3],Da=e[4],Ja=e[5],La=e[6],Oa=e[7],Ma=e[8],Pa=e[9],Fa=e[10],Ka=e[11],wa=e[12],
Qa=e[13],Sa=e[14];e=e[15];return Math.abs(L-za)<=k.EPSILON*Math.max(1,Math.abs(L),Math.abs(za))&&Math.abs(l-ya)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(ya))&&Math.abs(G-Ba)<=k.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ba))&&Math.abs(M-Ca)<=k.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ca))&&Math.abs(R-Da)<=k.EPSILON*Math.max(1,Math.abs(R),Math.abs(Da))&&Math.abs(U-Ja)<=k.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ja))&&Math.abs(W-La)<=k.EPSILON*Math.max(1,Math.abs(W),Math.abs(La))&&Math.abs(da-Oa)<=k.EPSILON*
Math.max(1,Math.abs(da),Math.abs(Oa))&&Math.abs(ia-Ma)<=k.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ma))&&Math.abs(fa-Pa)<=k.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Pa))&&Math.abs(ma-Fa)<=k.EPSILON*Math.max(1,Math.abs(ma),Math.abs(Fa))&&Math.abs(qa-Ka)<=k.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Ka))&&Math.abs(ta-wa)<=k.EPSILON*Math.max(1,Math.abs(ta),Math.abs(wa))&&Math.abs(ua-Qa)<=k.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Qa))&&Math.abs(va-Sa)<=k.EPSILON*Math.max(1,Math.abs(va),Math.abs(Sa))&&
Math.abs(a-e)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))}const la=b.create();b=Object.freeze({__proto__:null,copy:u,set:B,identity:m,transpose:w,invert:H,adjoint:K,determinant:A,multiply:v,translate:p,scale:c,rotate:g,rotateX:d,rotateY:h,rotateZ:r,fromTranslation:x,fromScaling:C,fromRotation:E,fromXRotation:D,fromYRotation:z,fromZRotation:q,fromRotationTranslation:n,fromQuat2:t,getTranslation:I,getScaling:J,getRotation:Q,fromRotationTranslationScale:aa,fromRotationTranslationScaleOrigin:ea,fromQuat:ha,
frustum:ka,perspective:y,perspectiveFromFieldOfView:F,ortho:Z,lookAt:pa,targetTo:S,str:T,frob:X,add:ja,subtract:oa,multiplyScalar:ca,multiplyScalarAndAdd:V,exactEquals:ba,equals:ra,mul:v,sub:oa});f.add=ja;f.adjoint=K;f.copy=u;f.determinant=A;f.equals=ra;f.exactEquals=ba;f.frob=X;f.fromQuat=ha;f.fromQuat2=t;f.fromRotation=E;f.fromRotationTranslation=n;f.fromRotationTranslationScale=aa;f.fromRotationTranslationScaleOrigin=ea;f.fromScaling=C;f.fromTranslation=x;f.fromXRotation=D;f.fromYRotation=z;f.fromZRotation=
q;f.frustum=ka;f.getRotation=Q;f.getScaling=J;f.getTranslation=I;f.identity=m;f.invert=H;f.lookAt=pa;f.mat4=b;f.mul=v;f.multiply=v;f.multiplyScalar=ca;f.multiplyScalarAndAdd=V;f.ortho=Z;f.perspective=y;f.perspectiveFromFieldOfView=F;f.rotate=g;f.rotateX=d;f.rotateY=h;f.rotateZ=r;f.scale=c;f.set=B;f.str=T;f.sub=oa;f.subtract=oa;f.targetTo=S;f.translate=p;f.transpose=w})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),
function(f,b,k,u,B,m){function w(){return!!b._pe}function H(){return!!u("esri-wasm")}function K(){return d?d:d=B.create((r,x)=>{(new Promise(function(C,E){f(["./pe-wasm"],C,E)})).then(function(C){return C.peWasm}).then(({default:C})=>{C({locateFile:E=>m.getAssetUrl(`esri/geometry/support/${E}`),onAbort:E=>{x(Error(E))}}).then(E=>{A(E);r()})})})}function A(r){function x(D,z,q){D[z]=q(D[z])}b._pe=r;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();
b.PeGCSExtent=function(D){function z(){return D.apply(this,arguments)||this}k._inheritsLoose(z,D);z.prototype.destroy=function(){b._pe.destroy(this)};return z}(b._pe.PeGCSExtent);r=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var C of r)x(C.prototype,"getName",D=>function(){return D.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const D of[b._pe.PeGeogtran,b._pe.PeProjcs])x(D.prototype,"getParameters",
z=>function(){const q=Array(b.PeDefs.PE_PARM_MAX);let n=z.call(this);for(let t=0;t<q.length;t++){const I=b._pe.getValue(n,"*");q[t]=I?b._pe.wrapPointer(I,b._pe.PeParameter):null;n+=Int32Array.BYTES_PER_ELEMENT}return q});x(b._pe.PeHorizon.prototype,"getCoord",D=>function(){const z=this.getSize();if(!z)return null;const q=[],n=D.call(this);g(q,z,n);return q});x(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",D=>{const z=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let q=null;var n=D.call(this);
if(!b._pe.compare(n,b._pe.NULL)){q=[n];const t=this.getSteps();if(1<t){n=b._pe.getPointer(n);for(let I=1;I<t;I++)q.push(b._pe.wrapPointer(n+z*I,b._pe.PeGTlistExtendedGTs))}}return q}});const E=b._pe._pe_getPeHorizonSize();C=D=>function(){let z=this._cache;z||(this._cache=z=new Map);if(z.has(D))return z.get(D);let q=null;var n=D.call(this);if(!b._pe.compare(n,b._pe.NULL)){q=[n];const t=n.getNump();if(1<t){n=b._pe.getPointer(n);for(let I=1;I<t;I++)q.push(b._pe.wrapPointer(n+E*I,b._pe.PeHorizon))}}z.set(D,
q);return q};x(b._pe.PeProjcs.prototype,"horizonGcsGenerate",C);x(b._pe.PeProjcs.prototype,"horizonPcsGenerate",C);b._pe.PeObject.prototype.toString=function(D=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();const z=b._pe.getPointer(this),q=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(z,D,q))}}function v(r){if(r){var x=b._pe.getClass(r);x&&(x=b._pe.getCache(x))&&(r=b._pe.getPointer(r))&&delete x[r]}}function p(r,x){const C=[];x=Array(x);
for(let E=0;E<r;E++)C.push(b._pe.ensureInt8(x));return C}function c(r){let x;Array.isArray(r[0])?(x=[],r.forEach(C=>{x.push(C[0],C[1])})):x=r;return x}function g(r,x,C,E=!1){if(E)for(E=0;E<2*x;E++)r[E]=b._pe.getValue(C+E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===r.length;for(let D=0;D<x;D++)E&&(r[D]=Array(2)),r[D][0]=b._pe.getValue(C,"double"),r[D][1]=b._pe.getValue(C+Float64Array.BYTES_PER_ELEMENT,"double"),C+=2*Float64Array.BYTES_PER_ELEMENT}}let d;b._pe=null;(function(r){function x(D,
z,q){b._pe.ensureCache.prepare();var n=c(q);const t=q===n;n=b._pe.ensureFloat64(n);(D=b._pe._pe_geog_to_proj(b._pe.getPointer(D),z,n))&&g(q,z,n,t);return D}function C(D,z,q){return E(D,z,q,0)}function E(D,z,q,n){b._pe.ensureCache.prepare();var t=c(q);const I=q===t;t=b._pe.ensureFloat64(t);(D=b._pe._pe_proj_to_geog_center(b._pe.getPointer(D),z,t,n))&&g(q,z,t,I);return D}r.geogToProj=x;r.projGeog=function(D,z,q,n){switch(n){case b.PeDefs.PE_TRANSFORM_P_TO_G:return C(D,z,q);case b.PeDefs.PE_TRANSFORM_G_TO_P:return x(D,
z,q)}return 0};r.projToGeog=C;r.projToGeogCenter=E})(b.PeCSTransformations||(b.PeCSTransformations={}));(function(r){r.init=function(){r.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;r.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;r.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;r.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;r.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;r.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;r.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;r.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;
r.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;r.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;r.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;r.PE_TYPE_PROJCS=b._pe.PeDefs.prototype.PE_TYPE_PROJCS;r.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;r.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;r.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;r.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;r.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;r.PE_STR_AUTH_TOP=
b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;r.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;r.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;r.PE_PARM_ND=b._pe.PeDefs.prototype.PE_PARM_ND;r.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;r.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;r.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;r.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;r.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;
r.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;r.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;r.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||(b.PeDefs={}));(function(r){function x(z,q){let n=null,t=E[z];t||(t={},E[z]=t);t.hasOwnProperty(String(q))?n=t[q]:(z=b._pe.PeFactory.prototype.factoryByType(z,q),b._pe.compare(z,b._pe.NULL)||(n=z,t[q]=n));return n=C(n)}function C(z){if(z){const q=z.getType();switch(q){case b.PeDefs.PE_TYPE_GEOGCS:z=b._pe.castObject(z,
b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:z=b._pe.castObject(z,b._pe.PeProjcs);break;case b.PeDefs.PE_TYPE_GEOGTRAN:z=b._pe.castObject(z,b._pe.PeGeogtran);break;default:q&b.PeDefs.PE_TYPE_UNIT&&(z=b._pe.castObject(z,b._pe.PeUnit))}}return z}const E={},D={};r.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};r.coordsys=function(z){return x(b.PeDefs.PE_TYPE_COORDSYS,z)};r.factoryByType=x;r.fromString=function(z,q){let n=null,t=D[z];t||(t={},D[z]=t);t.hasOwnProperty(q)?n=t[q]:
(z=b._pe.PeFactory.prototype.fromString(z,q),b._pe.compare(z,b._pe.NULL)||(n=z,t[q]=n));return n=C(n)};r.geogcs=function(z){return x(b.PeDefs.PE_TYPE_GEOGCS,z)};r.geogtran=function(z){return x(b.PeDefs.PE_TYPE_GEOGTRAN,z)};r.getCode=function(z){return b._pe.PeFactory.prototype.getCode(z)};r.projcs=function(z){return x(b.PeDefs.PE_TYPE_PROJCS,z)};r.unit=function(z){return x(b.PeDefs.PE_TYPE_UNIT,z)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;(function(r){let x;r.init=function(){r.PE_GTLIST_OPTS_COMMON=
b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;x=b._pe._pe_getPeGTlistExtendedEntrySize()};r.getGTlist=function(C,E,D,z,q,n){let t=null;const I=new b._pe.PeInteger(n);try{const J=b._pe.PeGTlistExtended.prototype.getGTlist(C,E,D,z,q,I);if(n=I.val)if(t=[J],1<n){const Q=b._pe.getPointer(J);for(C=1;C<n;C++)t.push(b._pe.wrapPointer(Q+x*C,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(I)}return t}})(b.PeGTlistExtended||(b.PeGTlistExtended={}));(function(r){r.destroy=function(x){if(x&&x.length){for(const C of x)v(C),
C.getEntries().forEach(E=>{v(E);E=E.getGeogtran();v(E);E.getParameters().forEach(v);[E.getGeogcs1(),E.getGeogcs2()].forEach(D=>{v(D);const z=D.getDatum();v(z);v(z.getSpheroid());v(D.getPrimem());v(D.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(x[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));(function(r){r.geogToGeog=function(x,C,E,D,z){b._pe.ensureCache.prepare();var q=c(E);const n=E===q;q=b._pe.ensureFloat64(q);let t=0;D&&(t=b._pe.ensureFloat64(D));(x=b._pe._pe_geog_to_geog(b._pe.getPointer(x),
C,q,t,z))&&g(E,C,q,n);return x}})(b.PeGTTransformations||(b.PeGTTransformations={}));(function(r){function x(E,D,z,q,n,t){b._pe.ensureCache.prepare();switch(E){case "dd":var I=b._pe._pe_geog_to_dd;var J=b.PeDefs.PE_DD_MAX;break;case "ddm":I=b._pe._pe_geog_to_ddm;J=b.PeDefs.PE_DDM_MAX;break;case "dms":I=b._pe._pe_geog_to_dms,J=b.PeDefs.PE_DMS_MAX}E=0;D&&(E=b._pe.getPointer(D));D=c(q);D=b._pe.ensureFloat64(D);J=p(z,J);q=b._pe.ensureInt32(J);if(n=I(E,z,D,n,q))for(I=0;I<z;I++)t[I]=b._pe.UTF8ToString(J[I]);
return n}function C(E,D,z,q,n){b._pe.ensureCache.prepare();switch(E){case "dd":var t=b._pe._pe_dd_to_geog;break;case "ddm":t=b._pe._pe_ddm_to_geog;break;case "dms":t=b._pe._pe_dms_to_geog}E=0;D&&(E=b._pe.getPointer(D));D=q.map(I=>b._pe.ensureString(I));q=b._pe.ensureInt32(D);D=b._pe.ensureFloat64(Array(2*z));(t=t(E,z,q,D))&&g(n,z,D);return t}r.geog_to_dms=function(E,D,z,q,n){return x("dms",E,D,z,q,n)};r.dms_to_geog=function(E,D,z,q){return C("dms",E,D,z,q)};r.geog_to_ddm=function(E,D,z,q,n){return x("ddm",
E,D,z,q,n)};r.ddm_to_geog=function(E,D,z,q){return C("ddm",E,D,z,q)};r.geog_to_dd=function(E,D,z,q,n){return x("dd",E,D,z,q,n)};r.dd_to_geog=function(E,D,z,q){return C("dd",E,D,z,q)}})(b.PeNotationDms||(b.PeNotationDms={}));(function(r){r.init=function(){r.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;r.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;r.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;r.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
r.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};r.geog_to_mgrs_extended=function(x,C,E,D,z,q,n){b._pe.ensureCache.prepare();let t=0;x&&(t=b._pe.getPointer(x));x=c(E);E=b._pe.ensureFloat64(x);x=p(C,b.PeDefs.PE_MGRS_MAX);const I=b._pe.ensureInt32(x);if(D=b._pe._pe_geog_to_mgrs_extended(t,C,E,D,z,q,I))for(z=0;z<C;z++)n[z]=b._pe.UTF8ToString(x[z]);return D};r.mgrs_to_geog_extended=function(x,C,E,D,z){b._pe.ensureCache.prepare();let q=0;x&&(q=b._pe.getPointer(x));x=E.map(n=>b._pe.ensureString(n));
E=b._pe.ensureInt32(x);x=b._pe.ensureFloat64(Array(2*C));(D=b._pe._pe_mgrs_to_geog_extended(q,C,E,D,x))&&g(z,C,x);return D}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));(function(r){r.geog_to_usng=function(x,C,E,D,z,q,n){b._pe.ensureCache.prepare();let t=0;x&&(t=b._pe.getPointer(x));x=c(E);E=b._pe.ensureFloat64(x);x=p(C,b.PeDefs.PE_MGRS_MAX);const I=b._pe.ensureInt32(x);if(D=b._pe._pe_geog_to_usng(t,C,E,D,z,q,I))for(z=0;z<C;z++)n[z]=b._pe.UTF8ToString(x[z]);return D};r.usng_to_geog=function(x,C,E,D){b._pe.ensureCache.prepare();
var z=0;x&&(z=b._pe.getPointer(x));x=E.map(q=>b._pe.ensureString(q));E=b._pe.ensureInt32(x);x=b._pe.ensureFloat64(Array(2*C));(z=b._pe._pe_usng_to_geog(z,C,E,x))&&g(D,C,x);return z}})(b.PeNotationUsng||(b.PeNotationUsng={}));(function(r){r.init=function(){r.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;r.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;r.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};r.geog_to_utm=function(x,C,E,D,z){b._pe.ensureCache.prepare();
var q=0;x&&(q=b._pe.getPointer(x));x=c(E);E=b._pe.ensureFloat64(x);x=p(C,b.PeDefs.PE_UTM_MAX);const n=b._pe.ensureInt32(x);if(D=b._pe._pe_geog_to_utm(q,C,E,D,n))for(q=0;q<C;q++)z[q]=b._pe.UTF8ToString(x[q]);return D};r.utm_to_geog=function(x,C,E,D,z){b._pe.ensureCache.prepare();let q=0;x&&(q=b._pe.getPointer(x));x=E.map(n=>b._pe.ensureString(n));E=b._pe.ensureInt32(x);x=b._pe.ensureFloat64(Array(2*C));(D=b._pe._pe_utm_to_geog(q,C,E,D,x))&&g(z,C,x);return D}})(b.PeNotationUtm||(b.PeNotationUtm={}));
(function(r){const x=new Map;r.init=function(){r.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;r.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;r.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;r.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};r.generate=function(C,E=r.PE_PCSINFO_OPTION_DOMAIN){let D,z;x.has(C)&&(z=x.get(C),z[E]&&(D=z[E]));D||(D=b._pe.PePCSInfo.prototype.generate(C,E),z||(z=[],x.set(C,z)),z[E]=
D);return D}})(b.PePCSInfo||(b.PePCSInfo={}));(function(r){r.version_string=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));var h=Object.freeze({__proto__:null,get _pe(){return b._pe},isLoaded:w,isSupported:H,load:K,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},
get PeGTTransformations(){return b.PeGTTransformations},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:A});b._init=A;b.isLoaded=w;b.isSupported=H;b.load=K;b.pe=h})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(f,b){const k=Math.PI/180;var u=
b.earth.radius;const B=b.earth.eccentricitySquared;u={a1:u*B,a2:u*B*u*B,a3:u*B*B/2,a4:u*B*u*B*2.5,a5:u*B+u*B*B/2,a6:1-B};b={4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};f.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;f.earthEllipsoidConstants=u;f.spheroids=b;f.toRadians=k;Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(f){return function(){function b(u){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(u&&u.steps)for(const B of u.steps)B instanceof f?this.steps.push(B):this.steps.push(new f({wkid:B.wkid,wkt:B.wkt,isInverse:B.isInverse}))}b.cacheKey=function(u,B){return[void 0!==u.wkid&&null!==u.wkid?u.wkid.toString():"-1",void 0!==u.wkt&&null!==
u.wkt?u.wkt.toString():"",void 0!==B.wkid&&null!==B.wkid?B.wkid.toString():"-1",void 0!==B.wkt&&null!==B.wkt?B.wkt.toString():""].join()};b.fromGE=function(u){const B=new b;let m="";for(const w of u.steps)u=f.fromGE(w),B.steps.push(u),m+=u.uid.toString()+",";B._cached_projection={};B._gtlistentry=null;B._chain=m;return B};var k=b.prototype;k.getInverse=function(){const u=new b;u.steps=[];for(let B=this.steps.length-1;0<=B;B--)u.steps.push(this.steps[B].getInverse());return u};k.getGTListEntry=function(){let u=
"";for(const B of this.steps)u+=B.uid.toString()+",";u!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=u);return this._gtlistentry};k.assignCachedGe=function(u,B,m){this._cached_projection[b.cacheKey(u,B)]=m};k.getCachedGeTransformation=function(u,B){let m="";for(const w of this.steps)m+=w.uid.toString()+",";m!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=m);u=this._cached_projection[b.cacheKey(u,B)];return void 0===u?null:u};return b}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(f){let b=0;return function(){function k(u=null){this.uid=b++;u?(this._wkt=void 0!==u.wkt?u.wkt:null,this._wkid=void 0!==u.wkid?u.wkid:-1,this._isInverse=void 0!==u.isInverse?!0===u.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}k.fromGE=function(u){const B=new k;B._wkt=u.wkt;B._wkid=u.wkid;B._isInverse=u.isInverse;return B};k.prototype.getInverse=function(){const u=
new k;u._wkt=this.wkt;u._wkid=this._wkid;u._isInverse=!this.isInverse;return u};f._createClass(k,[{key:"wkt",get:function(){return this._wkt},set:function(u){this._wkt=u;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},set:function(u){this._wkid=u;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(u){this._isInverse=u;this.uid=b++}}]);return k}()})},"esri/geometry/support/near":function(){define(["exports","../Point","./coordsUtils","../../geometry","../../chunks/vec2"],
function(f,b,k,u,B){f.nearestCoordinate=function(m,w){const {spatialReference:H}=w;w=[w.x,w.y];let K=Number.POSITIVE_INFINITY,A=0,v=0;const p=[0,0];m="extent"===m.type?[[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]]]:m.rings;for(const c of m)for(m=0;m<c.length-1;m++){k.projectPointOnLine(p,w,c,m);const g=B.distance(w,p);g<K&&(K=g,A=p[0],v=p[1])}return{coordinate:new b({x:A,y:v,spatialReference:H}),distance:K}};Object.defineProperty(f,"__esModule",{value:!0})})},
"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),function(f,b,k,u,B,m,w,H,K,A,v,p){var c;k=c=function(g){function d(){var r=
g.apply(this,arguments)||this;r.enabled=!0;r.rotationEnabled=!0;return r}f._inheritsLoose(d,g);var h=d.prototype;h.constrain=function(r,x){if(!this.enabled||!x)return r;this.rotationEnabled||(r.rotation=x.rotation);return r};h.clone=function(){return new c({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return d}(p);b.__decorate([m.property()],k.prototype,"enabled",void 0);b.__decorate([m.property()],k.prototype,"rotationEnabled",void 0);return k=c=b.__decorate([H.subclass("esri.views.2d.constraints.RotationConstraint")],
k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../layers/support/LOD".split(" "),function(f,b,k,u,
B,m,w,H,K,A,v,p,c){var g;k=g=function(d){function h(x){x=d.call(this,x)||this;x._lodByScale={};x._scales=[];x.effectiveLODs=null;x.effectiveMinZoom=-1;x.effectiveMaxZoom=-1;x.effectiveMinScale=0;x.effectiveMaxScale=0;x.lods=null;x.minZoom=-1;x.maxZoom=-1;x.minScale=0;x.maxScale=0;x.snapToZoom=!0;return x}f._inheritsLoose(h,d);var r=h.prototype;r.initialize=function(){let {lods:x,minScale:C,maxScale:E,minZoom:D,maxZoom:z}=this,q=-1,n=-1,t=!1,I=!1;0!==C&&0!==E&&C<E&&([C,E]=[E,C]);if(x&&x.length){x=
x.map(Q=>Q.clone());x.sort((Q,aa)=>aa.scale-Q.scale);x.forEach((Q,aa)=>Q.level=aa);for(const Q of x){!t&&0<C&&C>=Q.scale&&(q=Q.level,t=!0);!I&&0<E&&E>=Q.scale&&(n=J?J.level:-1,I=!0);var J=Q}-1===D&&(D=0===C?0:q);-1===z&&(z=0===E?x.length-1:n);D=Math.max(D,0);D=Math.min(D,x.length-1);z=Math.max(z,0);z=Math.min(z,x.length-1);D>z&&([D,z]=[z,D]);C=x[D].scale;E=x[z].scale;x.splice(0,D);x.splice(z-D+1,x.length);x.forEach((Q,aa)=>{this._lodByScale[Q.scale]=Q;this._scales[aa]=Q.scale});this._set("effectiveLODs",
x);this._set("effectiveMinZoom",D);this._set("effectiveMaxZoom",z)}this._set("effectiveMinScale",C);this._set("effectiveMaxScale",E)};r.constrain=function(x,C){if(C&&x.scale===C.scale)return x;var E=this.effectiveMinScale;const D=this.effectiveMaxScale,z=x.targetGeometry,q=C&&C.targetGeometry,n=0!==E&&x.scale>E;if(0!==D&&x.scale<D||n)E=n?E:D,q&&(C=(E-C.scale)/(x.scale-C.scale),z.x=q.x+(z.x-q.x)*C,z.y=q.y+(z.y-q.y)*C),x.scale=E;this.snapToZoom&&this.effectiveLODs&&(x.scale=this._getClosestScale(x.scale));
return x};r.fit=function(x){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(x,null);const C=this.scaleToZoom(x.scale);x.scale=this.zoomToScale(.99<Math.abs(C-Math.floor(C))?Math.round(C):Math.floor(C));return x};r.zoomToScale=function(x){if(!this.effectiveLODs)return 0;x-=this.effectiveMinZoom;x=Math.max(0,x);const C=this._scales;if(0>=x)return C[0];if(x>=C.length)return C[C.length-1];const E=Math.round(x);return C[E]+(E-x)*(C[Math.round(x-.5)]-C[E])};r.scaleToZoom=function(x){if(!this.effectiveLODs)return-1;
const C=this._scales;let E,D;if(x>=C[0])return this.effectiveMinZoom;if(x<=C[C.length-1])return this.effectiveMaxZoom;for(let z=0;z<C.length-1;z++){E=C[z];D=C[z+1];if(D===x)return z+this.effectiveMinZoom+1;if(E>x&&D<x)return z+this.effectiveMinZoom+1-(x-D)/(E-D)}};r.snapToClosestScale=function(x){if(!this.effectiveLODs)return x;x=this.scaleToZoom(x);return this.zoomToScale(Math.round(x))};r.snapToNextScale=function(x,C=.5){if(!this.effectiveLODs)return x*C;x=Math.round(this.scaleToZoom(x));return this.zoomToScale(x+
1)};r.snapToPreviousScale=function(x,C=2){if(!this.effectiveLODs)return x*C;x=Math.round(this.scaleToZoom(x));return this.zoomToScale(x-1)};r.clone=function(){return new g({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};r._getClosestScale=function(x){if(this._lodByScale[x])return this._lodByScale[x].scale;x=this._scales.reduce((C,E)=>Math.abs(E-x)<=Math.abs(C-x)?E:C,this._scales[0]);return this._lodByScale[x].scale};return h}(p);b.__decorate([m.property({readOnly:!0})],
k.prototype,"effectiveLODs",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);b.__decorate([m.property({type:[c]})],k.prototype,"lods",void 0);b.__decorate([m.property()],k.prototype,"minZoom",void 0);b.__decorate([m.property()],
k.prototype,"maxZoom",void 0);b.__decorate([m.property()],k.prototype,"minScale",void 0);b.__decorate([m.property()],k.prototype,"maxScale",void 0);b.__decorate([m.property()],k.prototype,"snapToZoom",void 0);return k=g=b.__decorate([H.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../chunks/vec2f64 ../../chunks/vec2 ./viewpointUtils ./ViewState".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h){let r=function(x){function C(){var E=x.apply(this,arguments)||this;E.left=0;E.top=0;E.right=0;E.bottom=0;return E}f._inheritsLoose(C,x);return C}(p);b.__decorate([m.property()],r.prototype,"left",void 0);b.__decorate([m.property()],r.prototype,"top",void 0);b.__decorate([m.property()],r.prototype,"right",void 0);b.__decorate([m.property()],r.prototype,"bottom",void 0);r=b.__decorate([H.subclass("esri.views.2d.PaddedViewState.Padding")],r);k=function(x){function C(...E){var D=
x.call(this,...E)||this;D.paddedViewState=new h;D._updateContent=(()=>{const z=c.create();return()=>{var q=D._get("size");const n=D._get("padding");if(q&&n){var t=D.paddedViewState;g.set(z,n.left+n.right,n.top+n.bottom);g.subtract(z,q,z);g.copy(t.size,z);if(q=t.viewpoint)D.viewpoint=q}}})();D.watch(["size","padding"],D._updateContent,!0);D.padding=new r;D.size=[0,0];return D}f._inheritsLoose(C,x);f._createClass(C,[{key:"padding",set:function(E){this._set("padding",E||new r)}},{key:"viewpoint",set:function(E){if(E){const D=
E.clone();this.paddedViewState.viewpoint=E;d.addPadding(D,E,this._get("size"),this._get("padding"));E=this._viewpoint2D;const z=D.targetGeometry;E.center[0]=z.x;E.center[1]=z.y;E.rotation=D.rotation;E.scale=D.scale;E.spatialReference=z.spatialReference;this._update()}}}]);return C}(h);b.__decorate([m.property()],k.prototype,"paddedViewState",void 0);b.__decorate([m.property({type:r})],k.prototype,"padding",null);b.__decorate([m.property()],k.prototype,"viewpoint",null);return k=b.__decorate([H.subclass("esri.views.2d.PaddedViewState")],
k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/Extent ../../geometry ../../chunks/common ../../Viewpoint ../../chunks/vec2f64 ../../chunks/mat3 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64 ./viewpointUtils ../../chunks/mat2df32 ../../chunks/mat3f32 ../../chunks/vec2f32 ../../core/libs/gl-matrix-2/types/vec2".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z,q,n,t,I,J){var Q;const aa=[0,0];k=Q=function(ea){function ha(...y){y=ea.call(this,...y)||this;y._viewpoint2D={center:x.create(),rotation:0,scale:0,spatialReference:null};y.center=[0,0];y.extent=new g;y.id=0;y.inverseTransform=z.create();y.resolution=0;y.rotation=0;y.scale=0;y.transform=z.create();y.transformNoRotation=z.create();y.displayMat3=t.create();y.displayViewMat3=t.create();y.viewMat3=t.create();y.viewMat2d=n.create();y.worldScreenWidth=
0;y.size=[0,0];return y}f._inheritsLoose(ha,ea);var ka=ha.prototype;ka.copy=function(y){const F=this.size,Z=this.viewpoint;Z&&F?(this.viewpoint=q.copy(Z,y.viewpoint),this._set("size",E.copy(F,y.size))):(this.viewpoint=y.viewpoint.clone(),this._set("size",[y.size[0],y.size[1]]));this._set("pixelRatio",y.pixelRatio);return this};ka.clone=function(){return new Q({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};ka.toMap=function(y,F,Z){if(J.isVec2(F))return E.transformMat2d(y,
F,this.inverseTransform);aa[0]=F;aa[1]=Z;return E.transformMat2d(y,aa,this.inverseTransform)};ka.toScreen=function(y,F,Z){if(J.isVec2(F))return E.transformMat2d(y,F,this.transform);aa[0]=F;aa[1]=Z;return E.transformMat2d(y,aa,this.transform)};ka.toScreenNoRotation=function(y,F,Z){if(J.isVec2(F))return E.transformMat2d(y,F,this.transformNoRotation);aa[0]=F;aa[1]=Z;return E.transformMat2d(y,aa,this.transformNoRotation)};ka.getScreenTransform=function(y,F){const {center:Z}=this._viewpoint2D,pa=this._get("pixelRatio")||
1,S=this._get("size");q.getMatrix(y,Z,S,F,0,pa);return y};ka._update=function(){const {center:y,spatialReference:F,scale:Z,rotation:pa}=this._viewpoint2D,S=this._get("pixelRatio")||1,T=this._get("size"),X=new r({targetGeometry:new c(y[0],y[1],F),scale:Z,rotation:pa});this._set("viewpoint",X);if(T&&F&&Z){this.resolution=q.getResolution(X);this.rotation=pa;this.scale=Z;this.spatialReference=F;E.copy(this.center,y);C.set(this.displayMat3,0!==T[0]?2/T[0]:0,0,0,0,0!==T[1]?-2/T[1]:0,0,-1,1,1);var ja=C.identity(this.viewMat3),
oa=I.fromValues(T[0]/2,T[1]/2),ca=I.fromValues(-T[0]/2,-T[1]/2),V=h.toRadian(pa);C.translate(ja,ja,oa);C.rotate(ja,ja,V);C.translate(ja,ja,ca);C.multiply(this.displayViewMat3,this.displayMat3,ja);ja=D.identity(this.viewMat2d);D.translate(ja,ja,oa);D.rotate(ja,ja,V);D.translate(ja,ja,ca);q.getExtent(this.extent,X,T);q.getTransform(this.transform,X,T,S);D.invert(this.inverseTransform,this.transform);q.getTransformNoRotation(this.transformNoRotation,X,T,S);this.worldScreenWidth=q.getWorldScreenWidth(this.spatialReference,
this.resolution);this._set("id",this.id+1);return this}};f._createClass(ha,[{key:"pixelRatio",set:function(y){this._set("pixelRatio",y);this._update()}},{key:"size",set:function(y){this._set("size",y);this._update()}},{key:"viewpoint",set:function(y){if(y){const F=this._viewpoint2D,Z=y.targetGeometry;F.center[0]=Z.x;F.center[1]=Z.y;F.rotation=y.rotation;F.scale=y.scale;F.spatialReference=Z.spatialReference}this._update()}}]);return ha}(p.JSONSupport);b.__decorate([m.property({readOnly:!0})],k.prototype,
"id",void 0);b.__decorate([m.property({value:1,json:{write:!0}})],k.prototype,"pixelRatio",null);b.__decorate([m.property({json:{write:!0}})],k.prototype,"size",null);b.__decorate([m.property({type:r,json:{write:!0}})],k.prototype,"viewpoint",null);return k=Q=b.__decorate([H.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(f,b){function k(y,F){y[0]=F[0];y[1]=F[1];y[2]=F[2];y[3]=F[4];y[4]=F[5];y[5]=F[6];y[6]=F[8];y[7]=F[9];y[8]=F[10];return y}
function u(y,F){y[0]=F[0];y[1]=F[1];y[2]=F[2];y[3]=F[3];y[4]=F[4];y[5]=F[5];y[6]=F[6];y[7]=F[7];y[8]=F[8];return y}function B(y,F,Z,pa,S,T,X,ja,oa,ca){y[0]=F;y[1]=Z;y[2]=pa;y[3]=S;y[4]=T;y[5]=X;y[6]=ja;y[7]=oa;y[8]=ca;return y}function m(y){y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=1;y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y}function w(y,F){if(y===F){const Z=F[1],pa=F[2],S=F[5];y[1]=F[3];y[2]=F[6];y[3]=Z;y[5]=F[7];y[6]=pa;y[7]=S}else y[0]=F[0],y[1]=F[3],y[2]=F[6],y[3]=F[1],y[4]=F[4],y[5]=F[7],y[6]=F[2],y[7]=F[5],
y[8]=F[8];return y}function H(y,F){const Z=F[0],pa=F[1],S=F[2],T=F[3],X=F[4],ja=F[5],oa=F[6],ca=F[7];F=F[8];const V=F*X-ja*ca,ba=-F*T+ja*oa,ra=ca*T-X*oa;let la=Z*V+pa*ba+S*ra;if(!la)return null;la=1/la;y[0]=V*la;y[1]=(-F*pa+S*ca)*la;y[2]=(ja*pa-S*X)*la;y[3]=ba*la;y[4]=(F*Z-S*oa)*la;y[5]=(-ja*Z+S*T)*la;y[6]=ra*la;y[7]=(-ca*Z+pa*oa)*la;y[8]=(X*Z-pa*T)*la;return y}function K(y,F){const Z=F[0],pa=F[1],S=F[2],T=F[3],X=F[4],ja=F[5],oa=F[6],ca=F[7];F=F[8];y[0]=X*F-ja*ca;y[1]=S*ca-pa*F;y[2]=pa*ja-S*X;y[3]=
ja*oa-T*F;y[4]=Z*F-S*oa;y[5]=S*T-Z*ja;y[6]=T*ca-X*oa;y[7]=pa*oa-Z*ca;y[8]=Z*X-pa*T;return y}function A(y){const F=y[3],Z=y[4],pa=y[5],S=y[6],T=y[7],X=y[8];return y[0]*(X*Z-pa*T)+y[1]*(-X*F+pa*S)+y[2]*(T*F-Z*S)}function v(y,F,Z){const pa=F[0],S=F[1],T=F[2],X=F[3],ja=F[4],oa=F[5],ca=F[6],V=F[7];F=F[8];const ba=Z[0],ra=Z[1],la=Z[2],a=Z[3],e=Z[4],L=Z[5],l=Z[6],G=Z[7];Z=Z[8];y[0]=ba*pa+ra*X+la*ca;y[1]=ba*S+ra*ja+la*V;y[2]=ba*T+ra*oa+la*F;y[3]=a*pa+e*X+L*ca;y[4]=a*S+e*ja+L*V;y[5]=a*T+e*oa+L*F;y[6]=l*pa+
G*X+Z*ca;y[7]=l*S+G*ja+Z*V;y[8]=l*T+G*oa+Z*F;return y}function p(y,F,Z){const pa=F[0],S=F[1],T=F[2],X=F[3],ja=F[4],oa=F[5],ca=F[6],V=F[7];F=F[8];const ba=Z[0];Z=Z[1];y[0]=pa;y[1]=S;y[2]=T;y[3]=X;y[4]=ja;y[5]=oa;y[6]=ba*pa+Z*X+ca;y[7]=ba*S+Z*ja+V;y[8]=ba*T+Z*oa+F;return y}function c(y,F,Z){const pa=F[0],S=F[1],T=F[2],X=F[3],ja=F[4],oa=F[5],ca=F[6],V=F[7];F=F[8];const ba=Math.sin(Z);Z=Math.cos(Z);y[0]=Z*pa+ba*X;y[1]=Z*S+ba*ja;y[2]=Z*T+ba*oa;y[3]=Z*X-ba*pa;y[4]=Z*ja-ba*S;y[5]=Z*oa-ba*T;y[6]=ca;y[7]=
V;y[8]=F;return y}function g(y,F,Z){const pa=Z[0],S=Z[1];Z=Z[2];y[0]=pa*F[0];y[1]=pa*F[1];y[2]=pa*F[2];y[3]=S*F[3];y[4]=S*F[4];y[5]=S*F[5];y[6]=Z*F[6];y[7]=Z*F[7];y[8]=Z*F[8];return y}function d(y,F,Z){const pa=Z[0];Z=Z[1];y[0]=pa*F[0];y[1]=pa*F[1];y[2]=pa*F[2];y[3]=Z*F[3];y[4]=Z*F[4];y[5]=Z*F[5];return y}function h(y,F){y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=1;y[5]=0;y[6]=F[0];y[7]=F[1];y[8]=1;return y}function r(y,F){const Z=Math.sin(F);F=Math.cos(F);y[0]=F;y[1]=Z;y[2]=0;y[3]=-Z;y[4]=F;y[5]=0;y[6]=0;
y[7]=0;y[8]=1;return y}function x(y,F){y[0]=F[0];y[1]=0;y[2]=0;y[3]=0;y[4]=F[1];y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y}function C(y,F){y[0]=F[0];y[1]=F[1];y[2]=0;y[3]=F[2];y[4]=F[3];y[5]=0;y[6]=F[4];y[7]=F[5];y[8]=1;return y}function E(y,F){var Z=F[0],pa=F[1],S=F[2];F=F[3];var T=Z+Z,X=pa+pa;const ja=S+S;Z*=T;const oa=pa*T;pa*=X;const ca=S*T,V=S*X;S*=ja;T*=F;X*=F;F*=ja;y[0]=1-pa-S;y[3]=oa-F;y[6]=ca+X;y[1]=oa+F;y[4]=1-Z-S;y[7]=V-T;y[2]=ca-X;y[5]=V+T;y[8]=1-Z-pa;return y}function D(y,F){const Z=F[0],pa=
F[1],S=F[2],T=F[4],X=F[5],ja=F[6],oa=F[8],ca=F[9];F=F[10];const V=F*X-ja*ca,ba=-F*T+ja*oa,ra=ca*T-X*oa;var la=Z*V+pa*ba+S*ra;if(!la)return null;la=1/la;y[0]=V*la;y[1]=(-F*pa+S*ca)*la;y[2]=(ja*pa-S*X)*la;y[3]=ba*la;y[4]=(F*Z-S*oa)*la;y[5]=(-ja*Z+S*T)*la;y[6]=ra*la;y[7]=(-ca*Z+pa*oa)*la;y[8]=(X*Z-pa*T)*la;return y}function z(y,F){const Z=F[0],pa=F[1],S=F[2],T=F[3],X=F[4],ja=F[5],oa=F[6],ca=F[7];var V=F[8],ba=F[9],ra=F[10],la=F[11];const a=F[12],e=F[13],L=F[14];F=F[15];const l=Z*ja-pa*X,G=Z*oa-S*X,M=
Z*ca-T*X,R=pa*oa-S*ja,U=pa*ca-T*ja,W=S*ca-T*oa,da=V*e-ba*a,ia=V*L-ra*a;V=V*F-la*a;const fa=ba*L-ra*e;ba=ba*F-la*e;ra=ra*F-la*L;la=l*ra-G*ba+M*fa+R*V-U*ia+W*da;if(!la)return null;la=1/la;y[0]=(ja*ra-oa*ba+ca*fa)*la;y[1]=(oa*V-X*ra-ca*ia)*la;y[2]=(X*ba-ja*V+ca*da)*la;y[3]=(S*ba-pa*ra-T*fa)*la;y[4]=(Z*ra-S*V+T*ia)*la;y[5]=(pa*V-Z*ba-T*da)*la;y[6]=(e*W-L*U+F*R)*la;y[7]=(L*M-a*W-F*G)*la;y[8]=(a*U-e*M+F*l)*la;return y}function q(y,F,Z){y[0]=2/F;y[1]=0;y[2]=0;y[3]=0;y[4]=-2/Z;y[5]=0;y[6]=-1;y[7]=1;y[8]=
1;return y}function n(y){return"mat3("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+")"}function t(y){return Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)+Math.pow(y[2],2)+Math.pow(y[3],2)+Math.pow(y[4],2)+Math.pow(y[5],2)+Math.pow(y[6],2)+Math.pow(y[7],2)+Math.pow(y[8],2))}function I(y,F,Z){y[0]=F[0]+Z[0];y[1]=F[1]+Z[1];y[2]=F[2]+Z[2];y[3]=F[3]+Z[3];y[4]=F[4]+Z[4];y[5]=F[5]+Z[5];y[6]=F[6]+Z[6];y[7]=F[7]+Z[7];y[8]=F[8]+Z[8];return y}function J(y,F,Z){y[0]=F[0]-
Z[0];y[1]=F[1]-Z[1];y[2]=F[2]-Z[2];y[3]=F[3]-Z[3];y[4]=F[4]-Z[4];y[5]=F[5]-Z[5];y[6]=F[6]-Z[6];y[7]=F[7]-Z[7];y[8]=F[8]-Z[8];return y}function Q(y,F,Z){y[0]=F[0]*Z;y[1]=F[1]*Z;y[2]=F[2]*Z;y[3]=F[3]*Z;y[4]=F[4]*Z;y[5]=F[5]*Z;y[6]=F[6]*Z;y[7]=F[7]*Z;y[8]=F[8]*Z;return y}function aa(y,F,Z,pa){y[0]=F[0]+Z[0]*pa;y[1]=F[1]+Z[1]*pa;y[2]=F[2]+Z[2]*pa;y[3]=F[3]+Z[3]*pa;y[4]=F[4]+Z[4]*pa;y[5]=F[5]+Z[5]*pa;y[6]=F[6]+Z[6]*pa;y[7]=F[7]+Z[7]*pa;y[8]=F[8]+Z[8]*pa;return y}function ea(y,F){return y[0]===F[0]&&y[1]===
F[1]&&y[2]===F[2]&&y[3]===F[3]&&y[4]===F[4]&&y[5]===F[5]&&y[6]===F[6]&&y[7]===F[7]&&y[8]===F[8]}function ha(y,F){const Z=y[0],pa=y[1],S=y[2],T=y[3],X=y[4],ja=y[5],oa=y[6],ca=y[7];y=y[8];const V=F[0],ba=F[1],ra=F[2],la=F[3],a=F[4],e=F[5],L=F[6],l=F[7];F=F[8];return Math.abs(Z-V)<=b.EPSILON*Math.max(1,Math.abs(Z),Math.abs(V))&&Math.abs(pa-ba)<=b.EPSILON*Math.max(1,Math.abs(pa),Math.abs(ba))&&Math.abs(S-ra)<=b.EPSILON*Math.max(1,Math.abs(S),Math.abs(ra))&&Math.abs(T-la)<=b.EPSILON*Math.max(1,Math.abs(T),
Math.abs(la))&&Math.abs(X-a)<=b.EPSILON*Math.max(1,Math.abs(X),Math.abs(a))&&Math.abs(ja-e)<=b.EPSILON*Math.max(1,Math.abs(ja),Math.abs(e))&&Math.abs(oa-L)<=b.EPSILON*Math.max(1,Math.abs(oa),Math.abs(L))&&Math.abs(ca-l)<=b.EPSILON*Math.max(1,Math.abs(ca),Math.abs(l))&&Math.abs(y-F)<=b.EPSILON*Math.max(1,Math.abs(y),Math.abs(F))}var ka=Object.freeze({__proto__:null,fromMat4:k,copy:u,set:B,identity:m,transpose:w,invert:H,adjoint:K,determinant:A,multiply:v,translate:p,rotate:c,scale:g,scaleByVec2:d,
fromTranslation:h,fromRotation:r,fromScaling:x,fromMat2d:C,fromQuat:E,normalFromMat4Legacy:D,normalFromMat4:z,projection:q,str:n,frob:t,add:I,subtract:J,multiplyScalar:Q,multiplyScalarAndAdd:aa,exactEquals:ea,equals:ha,mul:v,sub:J});f.add=I;f.adjoint=K;f.copy=u;f.determinant=A;f.equals=ha;f.exactEquals=ea;f.frob=t;f.fromMat2d=C;f.fromMat4=k;f.fromQuat=E;f.fromRotation=r;f.fromScaling=x;f.fromTranslation=h;f.identity=m;f.invert=H;f.mat3=ka;f.mul=v;f.multiply=v;f.multiplyScalar=Q;f.multiplyScalarAndAdd=
aa;f.normalFromMat4=z;f.normalFromMat4Legacy=D;f.projection=q;f.rotate=c;f.scale=g;f.scaleByVec2=d;f.set=B;f.str=n;f.sub=J;f.subtract=J;f.translate=p;f.transpose=w})},"esri/chunks/mat2df32":function(){define(["exports"],function(f){function b(){const K=new Float32Array(6);K[0]=1;K[3]=1;return K}function k(K){const A=new Float32Array(6);A[0]=K[0];A[1]=K[1];A[2]=K[2];A[3]=K[3];A[4]=K[4];A[5]=K[5];return A}function u(K,A,v,p,c,g){const d=new Float32Array(6);d[0]=K;d[1]=A;d[2]=v;d[3]=p;d[4]=c;d[5]=g;
return d}function B(K,A){return new Float32Array(K,A,6)}function m(K,A,v,p){const c=A[p];A=A[p+1];K[p]=v[0]*c+v[2]*A+v[4];K[p+1]=v[1]*c+v[3]*A+v[5]}function w(K,A,v,p=0,c=0,g=2){for(c=c||A.length/g;p<c;p++)m(K,A,v,p*g)}var H=Object.freeze({__proto__:null,create:b,clone:k,fromValues:u,createView:B,transform:m,transformMany:w});f.clone=k;f.create=b;f.createView=B;f.fromValues=u;f.mat2df32=H;f.transform=m;f.transformMany=w})},"esri/chunks/mat3f32":function(){define(["exports"],function(f){function b(){const w=
new Float32Array(9);w[0]=1;w[4]=1;w[8]=1;return w}function k(w){const H=new Float32Array(9);H[0]=w[0];H[1]=w[1];H[2]=w[2];H[3]=w[3];H[4]=w[4];H[5]=w[5];H[6]=w[6];H[7]=w[7];H[8]=w[8];return H}function u(w,H,K,A,v,p,c,g,d){const h=new Float32Array(9);h[0]=w;h[1]=H;h[2]=K;h[3]=A;h[4]=v;h[5]=p;h[6]=c;h[7]=g;h[8]=d;return h}function B(w,H){return new Float32Array(w,H,9)}var m=Object.freeze({__proto__:null,create:b,clone:k,fromValues:u,createView:B});f.clone=k;f.create=b;f.createView=B;f.fromValues=u;f.mat3f32=
m})},"esri/chunks/vec2f32":function(){define(["exports"],function(f){function b(){return new Float32Array(2)}function k(d){const h=new Float32Array(2);h[0]=d[0];h[1]=d[1];return h}function u(d,h){const r=new Float32Array(2);r[0]=d;r[1]=h;return r}function B(d,h){return new Float32Array(d,h,2)}function m(){return b()}function w(){return u(1,1)}function H(){return u(1,0)}function K(){return u(0,1)}const A=b(),v=w(),p=H(),c=K();var g=Object.freeze({__proto__:null,create:b,clone:k,fromValues:u,createView:B,
zeros:m,ones:w,unitX:H,unitY:K,ZEROS:A,ONES:v,UNIT_X:p,UNIT_Y:c});f.ONES=v;f.UNIT_X=p;f.UNIT_Y=c;f.ZEROS=A;f.clone=k;f.create=b;f.createView=B;f.fromValues=u;f.ones=w;f.unitX=H;f.unitY=K;f.vec2f32=g;f.zeros=m})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(f){function b(u){return u instanceof Float32Array&&2<=u.length}function k(u){return Array.isArray(u)&&2<=u.length}f.isVec2=function(u){return b(u)||k(u)};f.isVec2f32=b;f.isVec2f64=k;Object.defineProperty(f,"__esModule",
{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g){function d(E,D){E.length=0;D.forEach(z=>E.push(z));return E}const h=new Set,r=[],x=new Map,C=[0,0];k=function(E){function D(q){q=E.call(this,q)||this;q._keyToItem=new Map;q.concurrency=6;q.strategy="scale-first";q.tileInfoView=null;return q}f._inheritsLoose(D,E);var z=D.prototype;z.initialize=function(){const {concurrency:q,process:n}=this;this._peekByScaleFirst;this._peekByCenterFirst;this._queue=new g.QueueProcessor({concurrency:q,process:(t,I)=>{t=this._keyToItem.get(t);
return n(t,{signal:I})},peeker:t=>t.values().next().value})};z.destroy=function(){this.clear();this._queue.destroy();this._queue=null};z.abort=function(q){this._queue.abort("string"===typeof q?q:q.id)};z.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};z.has=function(q){return"string"===typeof q?this._keyToItem.has(q):this._keyToItem.has(q.id)};z.isOngoing=function(q){q="string"===typeof q?q:q.id;return this.has(q)&&this._queue.isOngoing(q)};z.pause=function(){this._queue.pause()};
z.push=function(q,n){const t=q.key.id+"-"+n;if(this.has(t))return this.get(t);n=this._queue.push(t);const I=()=>{this._keyToItem.delete(t);this.notifyChange("updating")};this._keyToItem.set(t,q);n.then(I,I);this.notifyChange("updating");return n};z.reset=function(){this._queue.reset();this.notifyChange("updating")};z.resume=function(){this._queue.resume()};z._peekByScaleFirst=function(q){if(!this.state)return q.values().next().value;const n=this.tileInfoView;let t=Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;
q.forEach(ha=>{ha=this._keyToItem.get(ha);const ka=this.tileInfoView.getTileScale(ha.key);x.has(ka)||(x.set(ka,[]),t=Math.max(ka,t),I=Math.min(ka,I));x.get(ka).push(ha.key);h.add(ka)});let J=this.state.scale;x.has(J)||(d(r,h),r.sort(),J=r.reduce((ha,ka)=>Math.abs(ka-J)<Math.abs(ha-J)?ka:ha,r[0]));J=Math.min(J,t);J=Math.max(J,I);q=x.get(J);const Q=n.getClosestInfoForScale(J),aa=Q.getColumnForX(this.state.center[0]),ea=Q.getRowForY(this.state.center[1]);q.sort((ha,ka)=>{const y=Q.denormalizeCol(ha.col,
ha.world),F=Q.denormalizeCol(ka.col,ka.world);return Math.sqrt((aa-y)*(aa-y)+(ea-ha.row)*(ea-ha.row))-Math.sqrt((aa-F)*(aa-F)+(ea-ka.row)*(ea-ka.row))});h.clear();x.clear();return q[0].id};z._peekByCenterFirst=function(q){if(!this.state)return q.values().next().value;const n=this.tileInfoView,t=this.state.center;let I=Number.POSITIVE_INFINITY,J=null;q.forEach(Q=>{Q=this._keyToItem.get(Q);n.getTileCoords(C,Q.key);const aa=c.distance(C,t);aa<I&&(I=aa,J=Q.key)});return J.id};f._createClass(D,[{key:"length",
get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return D}(p);b.__decorate([m.property({constructOnly:!0})],k.prototype,"concurrency",void 0);b.__decorate([m.property({constructOnly:!0})],k.prototype,"process",void 0);b.__decorate([m.property()],k.prototype,"state",void 0);b.__decorate([m.property({constructOnly:!0})],k.prototype,"strategy",void 0);
b.__decorate([m.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"updating",null);return k=b.__decorate([H.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/scheduling ../../core/Queue".split(" "),function(f,b,k,u,B,m){let w=function(K,A){this.item=K;this.controller=A;this.promise=
null},H=function(){function K(v){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;v.concurrency&&(this.concurrency=v.concurrency);this._queue=new m(v.peeker);this.process=v.process;const p=v.scheduler;v.task&&k.isSome(p)&&(this._task=p.registerTask(v.task,c=>this.update(c),()=>this.needsUpdate()))}var A=K.prototype;A.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};A.abort=function(v){(v=this._controllers.get(v))&&v.abort()};A.clear=function(){this._queue.clear();const v=[];this._controllers.forEach(p=>v.push(p));this._controllers.clear();v.forEach(p=>p.abort());this._processingItems.clear();this._cancelNext()};A.forEach=function(v){this._deferreds.forEach((p,c)=>v(c))};A.get=function(v){return(v=this._deferreds.get(v))?v.promise:void 0};A.isOngoing=function(v){return this._processingItems.has(v)};A.has=
function(v){return this._deferreds.has(v)};A.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};A.push=function(v,p){const c=this.get(v);if(c)return c;let g;const d=u.createAbortController();let h=null;p&&(h=u.onAbort(p,()=>d.abort()));const r=()=>{x.remove();k.isSome(h)&&h.remove();this._deferreds.delete(v);this._controllers.delete(v);this._queue.remove(v);this._processingItems.delete(v);this._scheduleNext()},x=u.onAbortOrThrow(d.signal,()=>{const C=this._processingItems.get(v);
C&&C.controller.abort();r();g.reject(u.createAbortError())});g=u.createDeferred();this._deferreds.set(v,g);this._controllers.set(v,d);g.promise.then(r,r);this._queue.push(v);this._scheduleNext();return g.promise};A.reset=function(){const v=[];this._processingItems.forEach(p=>v.push(p));this._processingItems.clear();for(const p of v)this._queue.push(p.item),p.controller.abort();this._scheduleNext()};A.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};A.takeAll=function(){const v=
[];for(;this._queue.length;)v.push(this._queue.pop());this.clear();return v};A.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};A.update=function(v){for(;!v.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),v.madeProgress()};A._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=B.schedule(()=>{this._schedule=null;this._next()}))};A._next=function(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};A._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};A._processResult=function(v,p){this._canProcessFulfillment(v)&&(this._scheduleNext(),this._deferreds.get(v.item).resolve(p))};A._processError=function(v,p){this._canProcessFulfillment(v)&&(this._scheduleNext(),this._deferreds.get(v.item).reject(p))};A._canProcessFulfillment=function(v){return this._deferreds.get(v.item)&&
this._processingItems.get(v.item)===v?!0:!1};A._process=function(v){if(!k.isNone(v)){var p=u.createAbortController(),c=new w(v,p);this._processingItems.set(v,c);try{var g=this.process(v,p.signal)}catch(d){this._processError(c,d)}g&&"function"===typeof g.then?(c.promise=g,g.then(d=>this._processResult(c,d),d=>this._processError(c,d))):this._processResult(c,g)}};b._createClass(K,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"test",get:function(){return{update:v=>
this.update(v)}}}]);return K}();f.QueueProcessor=H;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./TileKey ./LODInfo ./TileCoverage ./TileSpan".split(" "),function(f,b,k,u,B,m){const w=new k("0/0/0/0");let H=function(){function A(p,c,g,d,h,r,x,C){this.x=p;this.ymin=c;this.ymax=g;this.invM=d;this.leftAdjust=h;this.rightAdjust=r;this.leftBound=x;this.rightBound=
C}A.create=function(p,c){p[1]>c[1]&&([p,c]=[c,p]);const [g,d]=p,[h,r]=c;p=h-g;c=r-d;c=0!==c?p/c:0;const x=(Math.ceil(d)-d)*c,C=(Math.floor(d)-d)*c;return new A(g,Math.floor(d),Math.ceil(r),c,0>p?x:C,0>p?C:x,0>p?h:g,0>p?g:h)};var v=A.prototype;v.incrRow=function(){this.x+=this.invM};v.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};v.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return A}();const K=[[0,0],[0,0],[0,0],[0,0]];return function(){function A(p,
c){this.tileInfo=p;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const g=p.lods.slice();g.sort(function(h,r){return r.scale-h.scale});const d=this._lodInfos=g.map(h=>u.create(p,h,c));g.forEach((h,r)=>{this._infoByLevel[h.level]=d[r];this._infoByScale[h.scale]=d[r];this.scales[r]=h.scale},this);this._wrap=p.isWrappable}var v=A.prototype;v.getLODInfoAt=function(p){return this._infoByLevel["number"===typeof p?p:p.level]};v.getTileBounds=function(p,c,g=
!1){w.set(c);return(c=this._infoByLevel[w.level])?c.getTileBounds(p,w,g):p};v.getTileCoords=function(p,c,g=!1){w.set(c);return(c=this._infoByLevel[w.level])?c.getTileCoords(p,w,g):p};v.getTileCoverage=function(p,c=192,g="closest"){g="closest"===g?this.getClosestInfoForScale(p.scale):this.getSmallestInfoForScale(p.scale);const d=B.pool.acquire(g),h=this._wrap;var r=Infinity;let x=-Infinity;const C=d.spans;K[0][0]=K[0][1]=K[1][1]=K[3][0]=-c;K[1][0]=K[2][0]=p.size[0]+c;K[2][1]=K[3][1]=p.size[1]+c;for(E of K)p.toMap(E,
E),E[0]=g.getColumnForX(E[0]),E[1]=g.getRowForY(E[1]);p=[];var E=3;for(c=0;4>c;c++)K[c][1]===K[E][1]?E=c:(E=H.create(K[c],K[E]),r=Math.min(E.ymin,r),x=Math.max(E.ymax,x),void 0===p[E.ymin]&&(p[E.ymin]=[]),p[E.ymin].push(E),E=c);if(null==r||null==x||100<x-r)return null;for(c=[];r<x;){null!=p[r]&&(c=c.concat(p[r]));E=Infinity;var D=-Infinity;for(var z=c.length-1;0<=z;z--){var q=c[z];E=Math.min(E,q.getLeftCol());D=Math.max(D,q.getRightCol())}E=Math.floor(E);D=Math.floor(D);if(r>=g.first[1]&&r<=g.last[1])if(h)if(g.size[0]<
g.worldSize[0])for(z=Math.floor(D/g.worldSize[0]),q=Math.floor(E/g.worldSize[0]);q<=z;q++)C.push(new m(r,Math.max(g.getFirstColumnForWorld(q),E),Math.min(g.getLastColumnForWorld(q),D)));else C.push(new m(r,E,D));else E>g.last[0]||D<g.first[0]||(E=Math.max(E,g.first[0]),D=Math.min(D,g.last[0]),C.push(new m(r,E,D)));r+=1;for(E=c.length-1;0<=E;E--)D=c[E],D.ymax>=r?D.incrRow():c.splice(E,1)}return d};v.getTileParentId=function(p){w.set(p);p=this._lodInfos.indexOf(this._infoByLevel[w.level])-1;if(0>p)return null;
this._getTileIdAtLOD(w,this._lodInfos[p],w);return w.id};v.getTileResolution=function(p){return(p=this._infoByLevel["object"===typeof p?p.level:p])?p.resolution:-1};v.getTileScale=function(p){return(p=this._infoByLevel[p.level])?p.scale:-1};v.intersects=function(p,c){w.set(c);c=this._infoByLevel[w.level];const g=p.lodInfo;if(g.resolution>c.resolution){this._getTileIdAtLOD(w,g,w);var d=g.denormalizeCol(w.col,w.world);for(var h of p.spans)if(h.row===w.row&&h.colFrom<=d&&h.colTo>=d)return!0}if(g.resolution<
c.resolution){const [x,C,E,D]=p.spans.reduce((z,q)=>{z[0]=Math.min(z[0],q.row);z[1]=Math.max(z[1],q.row);z[2]=Math.min(z[2],q.colFrom);z[3]=Math.max(z[3],q.colTo);return z},[Infinity,-Infinity,Infinity,-Infinity]);d=c.denormalizeCol(w.col,w.world);p=g.getColumnForX(c.getXForColumn(d));h=g.getRowForY(c.getYForRow(w.row));d=g.getColumnForX(c.getXForColumn(d+1))-1;c=g.getRowForY(c.getYForRow(w.row+1))-1;return!(p>D||d<E||h>C||c<x)}const r=g.denormalizeCol(w.col,w.world);return p.spans.some(x=>x.row===
w.row&&x.colFrom<=r&&x.colTo>=r)};v.normalizeBounds=function(p,c,g){p[0]=c[0];p[1]=c[1];p[2]=c[2];p[3]=c[3];this._wrap&&(c=b.getInfo(this.tileInfo.spatialReference),g=-g*(c.valid[1]-c.valid[0]),p[0]+=g,p[2]+=g);return p};v.getSmallestInfoForScale=function(p){const c=this.scales;if(this._infoByScale[p])return this._infoByScale[p];if(p>c[0])return this._infoByScale[c[0]];for(let g=1;g<c.length-1;g++)if(p>c[g]+1E-6)return this._infoByScale[c[g-1]];return this._infoByScale[c[c.length-1]]};v.getClosestInfoForScale=
function(p){const c=this.scales;if(this._infoByScale[p])return this._infoByScale[p];p=c.reduce((g,d)=>Math.abs(d-p)<Math.abs(g-p)?d:g,c[0]);return this._infoByScale[p]};v.scaleToLevel=function(p){const c=this.scales;if(this._infoByScale[p])return this._infoByScale[p].level;for(let g=c.length-1;0<=g;g--)if(p<c[g])return g===c.length-1?this._infoByScale[c[c.length-1]].level:this._infoByScale[c[g]].level+(c[g]-p)/(c[g]-c[g+1]);return this._infoByScale[c[0]].level};v.scaleToZoom=function(p){return this.tileInfo.scaleToZoom(p)};
v._getTileIdAtLOD=function(p,c,g){const d=this._infoByLevel[g.level];p.set(g);if(c.resolution<d.resolution)return null;if(c.resolution===d.resolution)return p;p.level=c.level;p.col=Math.floor(g.col*d.resolution/c.resolution+.01);p.row=Math.floor(g.row*d.resolution/c.resolution+.01);return p};f._createClass(A,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return A}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(f,b){function k(B,m,w){B[0]=m;B[1]=w;return B}const u=new b("0/0/0/0");return function(){function B(w,H,K,A,v,p,c,g,d,h,r,x){this.level=w;this.resolution=H;this.scale=K;this.origin=A;this.first=v;this.last=p;this.size=c;this.norm=g;this.worldStart=d;this.worldEnd=h;this.worldSize=r;this.wrap=x}B.create=function(w,H,K){var A=f.getInfo(w.spatialReference);const v=[w.origin.x,w.origin.y],p=[w.size[0]*H.resolution,w.size[1]*H.resolution],c=[-Infinity,-Infinity],g=[Infinity,Infinity],
d=[Infinity,Infinity];K&&(k(c,Math.max(0,Math.floor((K.xmin-v[0])/p[0])),Math.max(0,Math.floor((v[1]-K.ymax)/p[1]))),k(g,Math.max(0,Math.floor((K.xmax-v[0])/p[0])),Math.max(0,Math.floor((v[1]-K.ymin)/p[1]))),k(d,g[0]-c[0]+1,g[1]-c[1]+1));let h;w.isWrappable?(w=[Math.ceil(Math.round((A.valid[1]-A.valid[0])/H.resolution)/w.size[0]),d[1]],A=[Math.floor((A.origin[0]-v[0])/p[0]),c[1]],K=[w[0]+A[0]-1,g[1]],h=!0):(A=c,K=g,w=d,h=!1);return new B(H.level,H.resolution,H.scale,v,c,g,d,p,A,K,w,h)};var m=B.prototype;
m.normalizeCol=function(w){if(!this.wrap)return w;const H=this.worldSize[0];return 0>w?H-1-Math.abs((w+1)%H):w%H};m.denormalizeCol=function(w,H){return this.wrap?this.worldSize[0]*H+w:w};m.getWorldForColumn=function(w){return this.wrap?Math.floor(w/this.worldSize[0]):0};m.getFirstColumnForWorld=function(w){return w*this.worldSize[0]+this.first[0]};m.getLastColumnForWorld=function(w){return w*this.worldSize[0]+this.first[0]+this.size[0]-1};m.getColumnForX=function(w){return(w-this.origin[0])/this.norm[0]};
m.getXForColumn=function(w){return this.origin[0]+w*this.norm[0]};m.getRowForY=function(w){return(this.origin[1]-w)/this.norm[1]};m.getYForRow=function(w){return this.origin[1]-w*this.norm[1]};m.getTileBounds=function(w,H,K=!1){u.set(H);var A=K?u.col:this.denormalizeCol(u.col,u.world),v=u.row;H=this.getXForColumn(A);K=this.getYForRow(v+1);A=this.getXForColumn(A+1);v=this.getYForRow(v);w[0]=H;w[1]=K;w[2]=A;w[3]=v;return w};m.getTileCoords=function(w,H,K=!1){u.set(H);H=K?u.col:this.denormalizeCol(u.col,
u.world);Array.isArray(w)?k(w,this.getXForColumn(H),this.getYForRow(u.row)):(w.x=this.getXForColumn(H),w.y=this.getYForRow(u.row));return w};return B}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(f){let b=function(){function k(){this.spans=[]}var u=k.prototype;u.acquire=function(B){this.lodInfo=B};u.release=function(){this.lodInfo=null;this.spans.length=0};u.forEach=function(B,m){const {spans:w,lodInfo:H}=this,{level:K}=H;if(0!==w.length)for(const {row:A,
colFrom:v,colTo:p}of w)for(let c=v;c<=p;c++)B.call(m,K,A,H.normalizeCol(c),H.getWorldForColumn(c))};return k}();b.pool=new f(b);return b})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(f,b,k){this.row=f;this.colFrom=b;this.colTo=k}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g){function d(E,D){E.length=0;D.forEach(z=>E.push(z));return E}const h=new Set,r=[],x=new Map,C=[0,0];k=function(E){function D(q){q=E.call(this,q)||this;q._keyToItem=new Map;q.concurrency=6;q.strategy="scale-first";q.tileInfoView=null;return q}f._inheritsLoose(D,E);var z=D.prototype;z.initialize=function(){const {concurrency:q,process:n,strategy:t}=this;this._queue=new g.QueueProcessor({concurrency:q,process:(I,J)=>{I=this._keyToItem.get(I);return n(I,{signal:J})},
peeker:"scale-first"===t?I=>this._peekByScaleFirst(I):I=>this._peekByCenterFirst(I)})};z.destroy=function(){this.clear();this._queue.destroy();this._queue=null};z.abort=function(q){this._queue.abort("string"===typeof q?q:q.id)};z.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};z.has=function(q){return"string"===typeof q?this._keyToItem.has(q):this._keyToItem.has(q.id)};z.isOngoing=function(q){q="string"===typeof q?q:q.id;return this.has(q)&&this._queue.isOngoing(q)};
z.pause=function(){this._queue.pause()};z.push=function(q){const n=q.key.id;if(this.has(n))return this.get(n);const t=this._queue.push(n),I=()=>{this._keyToItem.delete(n);this.notifyChange("updating")};this._keyToItem.set(n,q);t.then(I,I);this.notifyChange("updating");return t};z.reset=function(){this._queue.reset();this.notifyChange("updating")};z.resume=function(){this._queue.resume()};z._peekByScaleFirst=function(q){if(!this.state)return q.values().next().value;const n=this.tileInfoView;let t=
Number.NEGATIVE_INFINITY,I=Number.POSITIVE_INFINITY;q.forEach(ha=>{ha=this._keyToItem.get(ha);const ka=this.tileInfoView.getTileScale(ha.key);x.has(ka)||(x.set(ka,[]),t=Math.max(ka,t),I=Math.min(ka,I));x.get(ka).push(ha.key);h.add(ka)});let J=this.state.scale;x.has(J)||(d(r,h),r.sort(),J=r.reduce((ha,ka)=>Math.abs(ka-J)<Math.abs(ha-J)?ka:ha,r[0]));J=Math.min(J,t);J=Math.max(J,I);q=x.get(J);const Q=n.getClosestInfoForScale(J),aa=Q.getColumnForX(this.state.center[0]),ea=Q.getRowForY(this.state.center[1]);
q.sort((ha,ka)=>{const y=Q.denormalizeCol(ha.col,ha.world),F=Q.denormalizeCol(ka.col,ka.world);return Math.sqrt((aa-y)*(aa-y)+(ea-ha.row)*(ea-ha.row))-Math.sqrt((aa-F)*(aa-F)+(ea-ka.row)*(ea-ka.row))});h.clear();x.clear();return q[0].id};z._peekByCenterFirst=function(q){if(!this.state)return q.values().next().value;const n=this.tileInfoView,t=this.state.center;let I=Number.POSITIVE_INFINITY,J=null;q.forEach(Q=>{Q=this._keyToItem.get(Q);n.getTileCoords(C,Q.key);const aa=c.distance(C,t);aa<I&&(I=aa,
J=Q.key)});return J.id};f._createClass(D,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return D}(p);b.__decorate([m.property({constructOnly:!0})],k.prototype,"concurrency",void 0);b.__decorate([m.property({constructOnly:!0})],k.prototype,"process",void 0);b.__decorate([m.property()],k.prototype,"state",void 0);b.__decorate([m.property({constructOnly:!0})],
k.prototype,"strategy",void 0);b.__decorate([m.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);b.__decorate([m.property({readOnly:!0})],k.prototype,"updating",null);return k=b.__decorate([H.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["./TileKey","./TileCoverage","./TileCache"],function(f,b,k){const u=new f(0,0,0,0),B=new Map,m=[],w=[];return function(){function H(A){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy=
"keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=A.acquireTile;this.releaseTile=A.releaseTile;this.tileInfoView=A.tileInfoView;this.resampling=null==A.resampling||!!A.resampling;A.cachePolicy&&(this.cachePolicy=A.cachePolicy);A.coveragePolicy&&(this.coveragePolicy=A.coveragePolicy);null!=A.buffer&&(this.buffer=A.buffer);A.cacheSize&&(this._tileCache=new k(A.cacheSize,this.tileInfoView,v=>{this.releaseTile(v)}))}var K=H.prototype;
K.destroy=function(){this.tileIndex.clear()};K.update=function(A){const {resampling:v,tileIndex:p}=this,c=this.tileInfoView.getTileCoverage(A.state,this.buffer,this.coveragePolicy);w.length=0;m.length=0;B.clear();if(c){var {minScale:g,maxScale:d}=this.tileInfoView.tileInfo,{spans:h,lodInfo:r}=c,{level:x}=r,{scale:C,center:E,resolution:D}=A.state,z=!A.stationary&&C>this._previousScale;this._previousScale=C;this.tiles.length=0;if(!v&&(C>g||C<d))return this.tiles.length=0,B.clear(),p.forEach(J=>{this.releaseTile(J)}),
p.clear(),w.length=0,m.length=0,B.clear(),b.pool.release(c),!0;p.forEach(J=>J.visible=!0);var q=A=0;if(0<h.length)for(const {row:J,colFrom:Q,colTo:aa}of h)for(let ea=Q;ea<=aa;ea++){A++;const ha=u.set(x,J,r.normalizeCol(ea),r.getWorldForColumn(ea)).id;if(p.has(ha)){var n=p.get(ha);n.isReady?(B.set(ha,n),q++):z||this._addParentTile(ha,B)}else{if(this._tileCache&&this._tileCache.has(ha)){if(n=this._tileCache.pop(ha),this.tileIndex.set(ha,n),n.isReady){B.set(ha,n);q++;continue}}else n=this.acquireTile(u),
this.tileIndex.set(ha,n);z||this._addParentTile(ha,B)}}var t=q===A;p.forEach((J,Q)=>{u.set(Q);if(!B.has(Q)){var aa=this.tileInfoView.intersects(c,u);!aa||!z&&t?"purge"===this.cachePolicy?u.level===x&&aa||m.push(Q):(u.level>x||!aa)&&m.push(Q):J.isReady?w.push(Q):u.level>x&&m.push(Q)}});for(var I of w)(A=p.get(I))&&A.isReady&&B.set(I,A);for(const J of m)I=p.get(J),this._tileCache?this._tileCache.add(I):this.releaseTile(I),p.delete(J);B.forEach(J=>this.tiles.push(J));p.forEach(J=>{B.has(J.key.id)||(J.visible=
!1)});this._tileCache&&this._tileCache.prune(x,E,D);b.pool.release(c);B.clear();return t}};K.clear=function(A=!0){const {tileIndex:v}=this;A&&v.forEach(p=>{this.releaseTile(p)});v.clear()};K._addParentTile=function(A,v){let p=null;for(;;){A=this.tileInfoView.getTileParentId(A);if(!A)break;if(this.tileIndex.has(A)){if((p=this.tileIndex.get(A))&&p.isReady){v.has(p.key.id)||v.set(p.key.id,p);break}}else if(this._tileCache&&this._tileCache.has(A)&&(p=this._tileCache.pop(A),this.tileIndex.set(A,p),p&&
p.isReady)){v.has(p.key.id)||v.set(p.key.id,p);break}}};return H}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(f){return function(){function b(u,B,m){this.maxSize=u;this.tileInfoView=B;this.removedFunc=m;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var k=b.prototype;k.has=function(u){return this._tilePerId.has(u)};k.get=function(u){return this._tilePerId.get(u)};k.pop=function(u){const B=this._tilePerId.get(u);if(!B)return null;const m=this._tileKeysPerLevel[B.key.level];
this._tilePerId["delete"](u);for(let w=0;w<m.length;w++)if(m[w].id===u){m.splice(w,1);break}B.visible=!0;return B};k.add=function(u){u.visible=!1;const B=u.key,m=B.id;this._tilePerId.has(m)||(this._tilePerId.set(m,u),u=B.level,this._tileKeysPerLevel[u]||(this._tileKeysPerLevel[u]=[]),this._tileKeysPerLevel[u].push(B))};k.prune=function(u,B,m){let w=this._tilePerId.size;if(!(w<=this.maxSize)){for(var H=this._tileKeysPerLevel.length-1;w>this.maxSize&&0<=H;)H!==u&&(w=this._pruneAroundCenterTile(w,B,
m,H)),H--;w>this.maxSize&&(w=this._pruneAroundCenterTile(w,B,m,u))}};k._pruneAroundCenterTile=function(u,B,m,w){w=this._tileKeysPerLevel[w];if(!w||0===w.length)return u;const {size:H,origin:K}=this.tileInfoView.tileInfo,A=m*H[0],v=m*H[1],p=[0,0],c=[0,0];for(w.sort((g,d)=>{p[0]=K.x+A*(g.col+.5);p[1]=K.y-v*(g.row+.5);c[0]=K.x+A*(d.col+.5);c[1]=K.y-v*(d.row+.5);return f.squaredDistance(p,B)-f.squaredDistance(c,B)});0<w.length&&(m=w.pop(),this._removeTile(m.id),u--,u!==this.maxSize););return u};k._removeTile=
function(u){const B=this._tilePerId.get(u);this.removedFunc&&this.removedFunc(B);this._tilePerId["delete"](u)};return b}()})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(f){let b=function(){function k(){this._names=new Map}var u=k.prototype;u.begin=function(B){this._names.has(B)||(this._names.set(B,!1),-1!==B.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${B}.Start`))};u.end=function(B){this._names.has(B)&&!this._names.get(B)&&(this._names.set(B,
!0),performance.mark(`Esri.${B}.End`))};u.record=function(B){this._names.has(B)||(this._names.set(B,!0),performance.mark(`Esri.${B}`))};return k}();f.Timeline=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../input/InputManager ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/handlers/PreventContextMenu ../../input/recognizers/SingleAndDoubleClick ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z,q,n,t,I,J,Q,aa,ea,ha,ka){var y={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},F={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Z={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(pa){function S(){var X=pa.apply(this,arguments)||this;X._handles=new c;return X}f._inheritsLoose(S,pa);var T=S.prototype;T.initialize=function(){this._handles.add([g.whenNot(this.view,
"ready",()=>this._disconnect()),g.when(this.view,"ready",()=>this._connect())])};T.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};T._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};T._connect=function(){const X=new I.BrowserEventSource(this.view.surface,this.view.input);var ja=[new ha.ImmediateDoubleClick,new ka.PointerClickHoldAndDrag,
new Q.SingleAndDoubleClick,new ea.Drag(this.view.navigation),new aa.DoubleTapDrag];ja=new d.InputManager({eventSource:X,recognizers:ja});ja.installHandlers("prevent-context-menu",[new J.PreventContextMenu],d.ViewEventPriorities.INTERNAL);ja.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new E.GamepadNavigation(this.view),new n.MouseWheelZoom(this.view),new h.DoubleClickZoom(this.view),new h.DoubleClickZoom(this.view,["Ctrl"]),new x.DragPan(this.view,"primary"),new D.KeyPan(this.view,
y),new q.KeyZoom(this.view,F),new z.KeyRotate(this.view,Z),new C.DragRotate(this.view,"secondary"),new r.DoubleTapDragZoom(this.view,"touch")],d.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(ja);this._source=X;this._inputManager=ja;g.init(this.view.navigation,"browserTouchPanEnabled",oa=>{this._source.browserTouchPanningEnabled=!oa})};f._createClass(S,[{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return S}(p);b.__decorate([m.property()],k.prototype,"view",void 0);
return k=b.__decorate([H.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(f,b,k,u){k=function(B){function m(w,H){var K=B.call(this,!0)||this;K.view=w;K.registerIncoming("double-click",H,A=>K._handleDoubleClick(A,H));return K}b._inheritsLoose(m,B);m.prototype._handleDoubleClick=function(w,H){u.eventMatchesPointerAction(w.data,
"primary")&&(w.stopPropagation(),H?this.view.mapViewNavigation.zoomOut([w.data.x,w.data.y]):this.view.mapViewNavigation.zoomIn([w.data.x,w.data.y]))};return m}(k.InputHandler);f.DoubleClickZoom=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/handlers/support":function(){define(["exports"],function(f){f.eventMatchesMousePointerAction=function(b,k){if("touch"===b.pointerType)return!1;switch(k){case "primary":return 0===b.button;case "secondary":return 2===b.button;case "tertiary":return 1===
b.button}};f.eventMatchesPointerAction=function(b,k){switch(k){case "primary":return"touch"===b.pointerType||0===b.button;case "secondary":return"touch"!==b.pointerType&&2===b.button;case "tertiary":return"touch"!==b.pointerType&&1===b.button}};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(f,b,k,u){k=function(B){function m(w,
H,K){var A=B.call(this,!0)||this;A.view=w;A.pointerType=H;A.registerIncoming("double-tap-drag",K,v=>A._handleDoubleTapDrag(v));return A}b._inheritsLoose(m,B);m.prototype._handleDoubleTapDrag=function(w){var {data:H}=w,{pointerType:K}=H;if(K===this.pointerType){w.stopPropagation();var {action:A,delta:v}=H;({view:H}=this);({mapViewNavigation:w}=H);switch(A){case "begin":({scale:H}=H);this._currentScale=this._startScale=H;this._previousDelta=v;w.begin();break;case "update":if(this._previousDelta.y===
v.y)break;this._previousDelta=v;H=this._startScale*Math.pow(1.015,v.y);w.setViewpointImmediate(H/this._currentScale);this._currentScale=H;break;case "end":{({constraints:K}=H);const {effectiveLODs:p,snapToZoom:c}=K;c&&p?(H=K.snapScale(this._currentScale),H=(0<v.y?Math.max(H,K.snapToPreviousScale(this._startScale)):Math.min(H,K.snapToNextScale(this._startScale)))/this._currentScale,w.zoom(H)):w.end()}}}};return m}(u.InputHandler);f.DoubleTapDragZoom=k;Object.defineProperty(f,"__esModule",{value:!0})})},
"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support","../../../input/DragEventSeparator"],function(f,b,k,u,B){k=function(m){function w(K,A,v){var p=m.call(this,!0)||this;p.view=K;p.pointerAction=A;p.registerIncoming("drag",v,g=>p._handleDrag(g));p.registerIncoming("pointer-down",()=>p.stopMomentumNavigation());const c=p.view.mapViewNavigation;p.dragEventSeparator=new B.DragEventSeparator({start:(g,
d)=>{c.pan.begin(p.view,d.data);d.stopPropagation()},update:(g,d)=>{c.pan.update(p.view,d.data);d.stopPropagation()},end:(g,d)=>{c.pan.end(p.view,d.data);d.stopPropagation()},condition:(g,d)=>1===g&&u.eventMatchesPointerAction(d.data,p.pointerAction)});return p}b._inheritsLoose(w,m);var H=w.prototype;H._handleDrag=function(K){const A=this.view.mapViewNavigation;A.pinch.zoomMomentum||A.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(K)};H.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};
return w}(k.InputHandler);f.DragPan=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(f){let b=function(){function k(B){this.callbacks=B;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var u=k.prototype;u.handle=function(B){const m=B.data,w=m.pointers.size;switch(m.action){case "start":this.currentCount=w;this.emitStart(B);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=
w;this.emitStart(B);break;case "update":this.emitUpdate(B);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=w;this.emitStart(B);break;case "end":this.emitEnd(B),this.currentCount=0}this.previousEvent=B};u.emitStart=function(B){this.startEvent=B;this.callbacks.condition(this.currentCount,B)&&this.callbacks.start(this.currentCount,B,this.startEvent)};u.emitUpdate=function(B){this.callbacks.condition(this.currentCount,B)&&this.callbacks.update(this.currentCount,
B,this.startEvent)};u.emitEnd=function(B){this.callbacks.condition(this.currentCount,B)&&this.callbacks.end(this.currentCount,B,this.startEvent);this.startEvent=null};return k}();f.DragEventSeparator=b;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support","../../../input/DragEventSeparator"],function(f,b,k,u,B){k=function(m){function w(H,
K,A){var v=m.call(this,!0)||this;v.view=H;v.pointerAction=K;const p=v.view.mapViewNavigation;v.dragEventSeparator=new B.DragEventSeparator({start:(c,g)=>{p.rotate.begin(v.view,g.data);g.stopPropagation()},update:(c,g)=>{p.rotate.update(v.view,g.data);g.stopPropagation()},end:(c,g)=>{p.rotate.end();g.stopPropagation()},condition:(c,g)=>1===c&&u.eventMatchesPointerAction(g.data,v.pointerAction)});v.registerIncoming("drag",A,c=>v.dragEventSeparator.handle(c));return v}b._inheritsLoose(w,m);return w}(k.InputHandler);
f.DragRotate=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/scheduling ../../../../core/Handles ../../../../core/watchUtils ../../../input/InputHandler ../../viewpointUtils ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(f,b,k,u,B,m,w,H){m=function(K){function A(p){var c=K.call(this,!0)||this;c.view=p;c.frameTask=null;c.watchHandles=new u;
c.currentDevice=null;c.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};c.handle=c.registerIncoming("gamepad",g=>c.handleEvent(g));c.handle.pause();return c}b._inheritsLoose(A,K);var v=A.prototype;v.onInstall=function(p){K.prototype.onInstall.call(this,p);this.watchHandles.add([B.init(this.view.navigation.gamepad,"enabled",c=>{c?(this.handle.resume(),this.frameTask||(this.frameTask=k.addFrameTask({update:g=>this.frameUpdate(g.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),
this.frameTask=null))})])};v.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);K.prototype.onUninstall.call(this)};v.handleEvent=function(p){const c=this.view.navigation.gamepad.device;c&&p.data.device!==c||this.currentDevice&&this.currentDevice!==p.data.device||("end"===p.data.action?(this.currentDevice=null,H.resetTransformation(this.transformation)):(this.currentDevice=p.data.device,H.extractTransformation(p.data,this.view.navigation.gamepad,
this.transformation)))};v.frameUpdate=function(p){const c=this.transformation;if(!H.isZeroTransformation(c)){var g=this.view.viewpoint.clone(),d=.7*this.view.navigation.gamepad.velocityFactor*p;w.translateBy(g,g,[c.translation[0]*d,-c.translation[1]*d]);d=this.view.size;w.scaleAndRotateBy(g,g,1+6E-4*c.translation[2]*p,this.view.constraints.rotationEnabled?.06*-c.heading*p:0,[d[0]/2,d[1]],d);p=this.view.constraints.constrain(g,this.view.viewpoint);this.view.viewpoint=p}};return A}(m.InputHandler);
f.GamepadNavigation=m;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(f,b){function k(u){let B=u*u;0>u&&(B*=-1);return B}f.extractTransformation=function(u,B,m){const w=u.state;u=u.device;B="forward-down"===B.tiltDirection?1:-1;"standard"===u.deviceType?(m.translation[0]=k(w.axes[0]),m.translation[1]=k(w.axes[1]),m.translation[2]=k(w.buttons[7])-k(w.buttons[6]),m.heading=k(w.axes[2]),m.tilt=
k(w.axes[3])):"spacemouse"===u.deviceType&&(m.translation[0]=1.2*k(w.axes[0]),m.translation[1]=1.2*k(w.axes[1]),m.translation[2]=2*-k(w.axes[2]),m.heading=1.2*k(w.axes[5]),m.tilt=1.2*k(w.axes[3]));m.tilt*=B;b.scale(m.translation,m.translation,1);return m};f.extractTransformationKeyboard=function(u,B){B.translation[0]=u[1]-u[0];B.translation[1]=u[3]-u[2];B.translation[2]=u[4]-u[5];B.heading=u[7]-u[6];B.tilt=u[8]-u[9];B.zoom=u[10]-u[11];return B};f.isZeroTransformation=function(u){return 0===u.translation[0]&&
0===u.translation[1]&&0===u.translation[2]&&0===u.heading&&0===u.tilt&&0===u.zoom};f.quadraticAccentuation=k;f.resetTransformation=function(u){u.translation[0]=0;u.translation[1]=0;u.translation[2]=0;u.heading=0;u.tilt=0;return u};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(f,b,k){k=function(u){function B(w,H,K){var A=u.call(this,!0)||this;
A.view=w;A.keys=H;A._pressed=!1;A._keyMap={[H.left]:"left",[H.right]:"right",[H.up]:"up",[H.down]:"down"};A.registerIncoming("key-down",K,v=>A._handleKeyDown(v));A.registerIncoming("key-up",K,v=>A._handleKeyUp(v));A.registerIncoming("blur",K,()=>A._handleBlur());return A}b._inheritsLoose(B,u);var m=B.prototype;m._handleKeyDown=function(w){w.data.repeat||this._handleKey(w,!0)};m._handleKeyUp=function(w){this._handleKey(w,!1)};m._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};
m._handleKey=function(w,H){const K=this._keyMap[w.data.key];if(this._pressed=null!=K){if(H)switch(this.view.mapViewNavigation.begin(),K){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();w.stopPropagation()}};return B}(k.InputHandler);f.KeyPan=
k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(f,b,k){k=function(u){function B(w,H,K){var A=u.call(this,!0)||this;A.view=w;A.keys=H;A._pressed=!1;A._keyToDirection={[H.clockwiseOption1]:"clockwise",[H.clockwiseOption2]:"clockwise",[H.counterClockwiseOption1]:"counterClockwise",[H.counterClockwiseOption2]:"counterClockwise",[H.resetOption1]:"reset",
[H.resetOption2]:"reset"};A.registerIncoming("key-down",K,v=>A._handleKeyDown(v));A.registerIncoming("key-up",K,v=>A._handleKeyUp(v));A.registerIncoming("blur",K,()=>A._handleBlur());return A}b._inheritsLoose(B,u);var m=B.prototype;m._handleKeyDown=function(w){w.data.repeat||this._handleKey(w,!0)};m._handleKeyUp=function(w){this._handleKey(w,!1)};m._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};m._handleKey=function(w,H){var K=w.modifiers;if(!(0<K.size&&
!K.has("Shift")||!this.view.constraints.rotationEnabled)&&(K=this._keyToDirection[w.data.key],this._pressed=null!=K)){if(H)switch(this.view.mapViewNavigation.begin(),K){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();w.stopPropagation()}};return B}(k.InputHandler);
f.KeyRotate=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(f,b,k,u){k=function(B){function m(H,K,A){var v=B.call(this,!0)||this;v.view=H;v.keys=K;v._keysToZoomAction={};v.registerIncoming("key-down",A,p=>v._handleKeyDown(p));K.zoomIn.forEach(p=>v._keysToZoomAction[p]=0);K.zoomOut.forEach(p=>v._keysToZoomAction[p]=1);
return v}b._inheritsLoose(m,B);var w=m.prototype;w._handleKeyDown=function(H){this._handleKey(H)};w._handleKey=function(H){var K=H.modifiers;if(!(0<K.size)||K.has("Shift"))if({key:K}=H.data,K in this._keysToZoomAction){K=this._keysToZoomAction[K];var {mapViewNavigation:A}=this.view,v=null;switch(K){case 0:v=A.zoomIn();break;case 1:v=A.zoomOut();break;default:return}A.begin();v.then(()=>A.end());H.stopPropagation()}};return m}(u.InputHandler);f.KeyZoom=k;Object.defineProperty(f,"__esModule",{value:!0})})},
"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(f,b,k){k=function(u){function B(m,w){var H=u.call(this,!0)||this;H.view=m;H._canZoom=!0;H.registerIncoming("mouse-wheel",w,K=>H._handleMouseWheel(K));return H}b._inheritsLoose(B,u);B.prototype._handleMouseWheel=function(m){if(this.view.navigation.mouseWheelZoomEnabled&&(m.preventDefault(),m.stopPropagation(),this._canZoom)){var w=this.view.mapViewNavigation,
{x:H,y:K,deltaY:A}=m.data;if(m=w.zoom(1/Math.pow(.6,1/60*A),[H,K]))this._canZoom=!1,m.catch(()=>{}).then(()=>{this._canZoom=!0;w.end()})}};return B}(k.InputHandler);f.MouseWheelZoom=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/DragEventSeparator"],function(f,b,k,u){k=function(B){function m(H){var K=B.call(this,!0)||this;K.view=
H;K.registerIncoming("drag",v=>K._handleDrag(v));K.registerIncoming("pointer-down",()=>K.stopMomentumNavigation());const A=K.view.mapViewNavigation;K.dragEventSeparator=new u.DragEventSeparator({start:(v,p)=>{A.pinch.begin(K.view,p.data);p.stopPropagation()},update:(v,p)=>{A.pinch.update(K.view,p.data);p.stopPropagation()},end:(v,p)=>{A.pinch.end(K.view);p.stopPropagation()},condition:v=>2<=v});return K}b._inheritsLoose(m,B);var w=m.prototype;w._handleDrag=function(H){this.dragEventSeparator.handle(H)};
w.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return m}(k.InputHandler);f.PinchRotateAndZoom=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ../support/screenUtils ./gamepad/GamepadSource".split(" "),function(f,b,k,u,B,m){const w=k("trident"),H=k("edge"),K=k("chrome"),A=k("ff"),v=k("safari");k=function(){function c(d,
h){this.input=h;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=d;d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,
"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new m.GamepadSource(d,this.input);this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}var g=c.prototype;g.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(d=>{this._releasePointerCaptureSafe(d)});this._gamepadSource&&(this._gamepadSource.destroy(),
this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};g.setPointerCapture=function(d,h){h?(this._element.setPointerCapture(d.pointerId),this._activePointerCaptures.add(d.pointerId)):(this._releasePointerCaptureSafe(d.pointerId),this._activePointerCaptures.delete(d.pointerId))};g._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};g._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};g._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};g._releasePointerCaptureSafe=function(d){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(d)||this._element.releasePointerCapture(d)}catch(h){}};g._updateNormalizedPointerLikeEvent=function(d,h){d=B.createScreenPointFromNativeEvent(this._element,d);c.test.disableSubpixelCoordinates&&(d.x=Math.round(d.x),d.y=Math.round(d.y));h.x=d.x;h.y=d.y;return h};g._handleKey=function(d,h){const r=u.eventKey(h);
r&&"key-up"===d&&this._keyDownState.delete(r);h={native:h,key:r,repeat:r&&this._keyDownState.has(r)};r&&"key-down"===d&&this._keyDownState.add(h.key);this._callback(d,h)};g._handlePointer=function(d,h){h=this._updateNormalizedPointerLikeEvent(h,{native:h,x:0,y:0,pointerType:h.pointerType,button:h.button,buttons:h.buttons,eventId:this._eventId++});this._callback(d,h)};g._handlePointerPreventDefault=function(d,h){const r=this._updateNormalizedPointerLikeEvent(h,{native:h,x:0,y:0,pointerType:h.pointerType,
button:h.button,buttons:h.buttons,eventId:this._eventId++});h.preventDefault();this._callback(d,r)};g._handleMouseWheel=function(d,h){let r=h.deltaY;switch(h.deltaMode){case 0:if(w||H)r=r/document.documentElement.clientHeight*600;break;case 1:r*=30;break;case 2:r*=900}w||H?r*=.7:K||v?r*=.6:A&&(r*=1.375);const x=Math.abs(r);100<x&&(r=r/x*200/(1+Math.exp(-.02*(x-100))));h=this._updateNormalizedPointerLikeEvent(h,{native:h,x:0,y:0,deltaY:r});this._callback(d,h)};g._handlePointerCaptureLost=function(d,
h){this._activePointerCaptures.delete(h.pointerId);this._handleDefault(d,h)};g._handleDefault=function(d,h){const r={native:h};h.preventDefault();this._callback(d,r)};g._preventAltKeyDefault=function(d){"Alt"===d.key&&d.preventDefault()};g._preventMultiTouchPanning=function(d){1<d.touches.length&&d.preventDefault()};b._createClass(c,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(d){this._browserTouchPanningEnabled=d;this._updateTouchAction();
this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(d){this._callback=d}},{key:"activeEvents",set:function(d){for(const h in this._active)d&&d.has(h)||(this._element.removeEventListener(p[h],this._active[h]),delete this._active[h]);d&&d.forEach(h=>{if(!this._active[h]&&p[h]){const r=(this._eventHandlers[h]||this._handleDefault).bind(this,h);this._element.addEventListener(p[h],r);this._active[h]=r}});this._gamepadSource.hasEventListeners=d&&d.has("gamepad")}}]);return c}();k.test=
{disableSubpixelCoordinates:!1};const p={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};f.BrowserEventSource=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(f,b,k,u,B){let m=function(){function w(K,A){this.element=K;this.input=A;this._hasEventListeners=!1;this.onConnectGamepad=v=>{this.connectGamepad(v.gamepad)};this.onDisconnectGamepad=v=>{v=v.gamepad;const p=v.index,c=this.inputDevices[p];c&&(this.emitGamepadEvent(v,B.extractState(c),!1),this.inputDevices.splice(p,1),this.latestUpdate.splice(p,1),this.input.gamepad.devices.remove(c),
this.ensurePollingState())};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState()}var H=w.prototype;H.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))};H.connectGamepad=function(K){const A=new u(K);"unknown"!==A.deviceType&&(this.inputDevices[K.index]=A,this.input.gamepad.devices.add(A));this.ensurePollingState()};H.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};H.startPolling=function(){null==this.frameTask&&(this.frameTask=k.addFrameTask({update:()=>this.readGamepadState()}))};H.stopPolling=function(){null!=this.frameTask&&(this.frameTask.remove(),
this.frameTask=null,this.latestUpdate=[])};H.readGamepadState=function(){const K=document.hasFocus(),A=this.element.contains(document.activeElement),v="document"===this.input.gamepad.enabledFocusMode&&!K||"view"===this.input.gamepad.enabledFocusMode&&!A;this.forEachGamepad(p=>{var c=this.inputDevices[p.index];if(c){var g=this.latestUpdate[p.index];c=B.extractState(c);var d=v||B.stateIdle(c);g&&(g.timestamp===p.timestamp||!g.active&&d||B.stateEqual(g.state,c))||this.emitGamepadEvent(p,c,!d)}})};H.forEachGamepad=
function(K){const A=window.navigator.getGamepads();for(let v=0;v<A.length;v++){const p=A[v];this.validate(p)&&K(p)}};H.emitGamepadEvent=function(K,A,v){var p=this.latestUpdate[K.index];if((p=p&&p.active)||v)this.latestUpdate[K.index]={timestamp:K.timestamp,state:A,active:v},this.callback&&this.callback({device:this.inputDevices[K.index],state:A,action:!p&&v?"start":p&&v?"update":"end"})};H.validate=function(K){if(!K||!K.connected)return!1;for(let A=0;A<K.axes.length;A++)if(isNaN(K.axes[A]))return!1;
return!0};b._createClass(w,[{key:"hasEventListeners",set:function(K){this._hasEventListeners!==K&&(this._hasEventListeners=K,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(K){this.callback=K}}]);return w}();f.GamepadSource=m;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports","../../../core/mathUtils"],function(f,
b){f.extractState=function(k){const u=k.native;return u?{buttons:u.buttons.map(B=>B.pressed?B.value?B.value:1:0),axes:u.axes.map(B=>{{var m=k.axisThreshold;const w=Math.abs(B);B=w<m?0:b.sign(B)*(w-m)/(1-m)}return B})}:{buttons:[],axes:[]}};f.stateEqual=function(k,u){if(k.axes.length!==u.axes.length||k.buttons.length!==u.buttons.length)return!1;for(var B=0;B<k.axes.length;B++)if(k.axes[B]!==u.axes[B])return!1;for(B=0;B<k.buttons.length;B++)if(k.buttons[B]!==u.buttons[B])return!1;return!0};f.stateIdle=
function(k){for(var u=0;u<k.axes.length;u++)if(0!==k.axes[u])return!1;for(u=0;u<k.buttons.length;u++)if(0!==k.buttons[u])return!1;return!0};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(f,b,k){k=function(u){function B(){var m=u.call(this,!0)||this;m.registerIncoming("context-menu",w=>{w.data.native.preventDefault()});return m}b._inheritsLoose(B,
u);return B}(k.InputHandler);f.PreventContextMenu=k;f.default=k;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(f,b,k,u,B,m){const w={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};B=function(H){function K(v=w.maximumDoubleClickDelay,
p=w.maximumDoubleClickDistance,c=w.maximumDoubleTouchDelay,g=w.maximumDoubleTouchDistance,d=k["default"]){var h=H.call(this,!1)||this;h.maximumDoubleClickDelay=v;h.maximumDoubleClickDistance=p;h.maximumDoubleTouchDelay=c;h.maximumDoubleTouchDistance=g;h._clock=d;h._pointerState=new Map;h._click=h.registerOutgoing("click");h._doubleClick=h.registerOutgoing("double-click");h.registerIncoming("immediate-click",h._handleImmediateClick.bind(b._assertThisInitialized(h)));h.registerIncoming("pointer-drag",
h._handlePointerDrag.bind(b._assertThisInitialized(h)));h.registerIncoming("drag",h._handleDrag.bind(b._assertThisInitialized(h)));return h}b._inheritsLoose(K,H);var A=K.prototype;A.onUninstall=function(){this._pointerState.forEach(v=>{null!=v.doubleClickTimeout&&(v.doubleClickTimeout.remove(),v.doubleClickTimeout=null)})};A._pointerId=function(v){v=v.native;return"mouse"===v.pointerType?`${v.pointerId}:${v.button}`:`${v.pointerType}`};A._handleImmediateClick=function(v){const p=v.data,c=this._pointerId(p),
g=this._pointerState.get(c);if(g){const d="touch"===p.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;m.manhattanDistance(g.event.data,p)>d?(this._clearDoubleClickTimeout(c,!0),this._startClick(v)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(g.event.data,void 0,g.event.modifiers))}else this._startClick(v)};A._startClick=function(v){const p=this._pointerId(v.data);this._pointerState.set(p,{event:v,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(p),
"touch"===v.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};A._handlePointerDrag=function(v){v=this._pointerId(v.data.currentEvent);this._clearDoubleClickTimeout(v,!0)};A._handleDrag=function(v){v=this._pointerId(v.data.pointer);this._clearDoubleClickTimeout(v,!0)};A._clearDoubleClickTimeout=function(v,p){const c=this._pointerState.get(v);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,p&&this._doubleClickTimeoutExceeded(v),
this._pointerState.delete(v),this.refreshHasPendingInputs())};A._doubleClickTimeoutExceeded=function(v){const p=this._pointerState.get(v);this._click.emit(p.event.data,void 0,p.event.modifiers);p.doubleClickTimeout=null;this._pointerState.delete(v);this.refreshHasPendingInputs()};b._createClass(K,[{key:"hasPendingInputs",get:function(){return u.someMap(this._pointerState,v=>null!=v.doubleClickTimeout)}}]);return K}(B.InputHandler);f.DefaultParameters=w;f.SingleAndDoubleClick=B;Object.defineProperty(f,
"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(f,b){f.euclideanDistance=function(k,u){const B=u.x-k.x;k=u.y-k.y;return Math.sqrt(B*B+k*k)};f.fitCircleLSQ=function(k,u){u?(u.radius=0,u.center.x=0,u.center.y=0):u={radius:0,center:b.createScreenPoint()};if(0===k.length)return u;if(1===k.length)return u.center.x=k[0].x,u.center.y=k[0].y,u;if(2===k.length){const [h,r]=k,[x,C]=[r.x-h.x,r.y-h.y];u.radius=Math.sqrt(x*x+
C*C)/2;u.center.x=(h.x+r.x)/2;u.center.y=(h.y+r.y)/2;return u}let B=0,m=0;for(u=0;u<k.length;u++)B+=k[u].x,m+=k[u].y;B/=k.length;m/=k.length;var w=k.map(h=>h.x-B),H=k.map(h=>h.y-m);let K=u=0;var A=0,v=0,p=0,c=0,g=0;for(var d=0;d<w.length;d++){const h=w[d],r=H[d],x=h*h,C=r*r;u+=x;K+=C;A+=h*r;v+=x*h;p+=C*r;c+=h*C;g+=r*x}w=u;H=A;d=K;v=.5*(v+c);p=.5*(p+g);g=w*d-A*H;c=(v*d-p*H)/g;p=(w*p-A*v)/g;g=b.createScreenPoint(c+B,p+m);return{radius:Math.sqrt(c*c+p*p+(u+K)/k.length),center:g}};f.manhattanDistance=
function(k,u){return Math.abs(u.x-k.x)+Math.abs(u.y-k.y)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/screenUtils ../../../core/MapUtils ../InputHandler ../DragEventSeparator ./support ./SingleAndDoubleClick".split(" "),function(f,b,k,u,B,m,w,H,K){m=function(A){function v(c=K.DefaultParameters.maximumDoubleClickDelay,g=K.DefaultParameters.maximumDoubleClickDistance,
d=K.DefaultParameters.maximumDoubleTouchDelay,h=K.DefaultParameters.maximumDoubleTouchDistance,r=k["default"]){var x=A.call(this,!1)||this;x.maximumDoubleClickDelay=c;x.maximumDoubleClickDistance=g;x.maximumDoubleTouchDelay=d;x.maximumDoubleTouchDistance=h;x._clock=r;x._doubleTapDragReady=!1;x._doubleTapDragActive=!1;x._dragStartCenter=u.createScreenPoint(0,0);x._pointerState=new Map;x._doubleTapDrag=x.registerOutgoing("double-tap-drag");x._dragEventSeparator=new w.DragEventSeparator({start:(C,E)=>
x._dragStart(C,E),update:(C,E)=>x._dragUpdate(E),end:(C,E)=>x._dragEnd(E)});x.registerIncoming("drag",C=>x._dragEventSeparator.handle(C));x.registerIncoming("pointer-down",C=>x._handlePointerDown(C));x.registerIncoming("pointer-up",()=>x._handlePointerUp());return x}b._inheritsLoose(v,A);var p=v.prototype;p.onUninstall=function(){this._pointerState.forEach(c=>{null!=c.doubleTapTimeout&&(c.doubleTapTimeout.remove(),c.doubleTapTimeout=null)})};p._clearPointerDown=function(c){const g=this._pointerState.get(c);
g&&(g.doubleTapTimeout.remove(),g.doubleTapTimeout=null,this._pointerState.delete(c),this.refreshHasPendingInputs())};p._createDoubleTapDragData=function(c,g,d){const {button:h,buttons:r,pointer:x,pointers:C,pointerType:E,timestamp:D}=d;return{action:c,delta:g,button:h,buttons:r,pointer:x,pointers:C,pointerType:E,timestamp:D}};p._dragStart=function(c,g){if(this._doubleTapDragReady&&1===c){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:d,modifiers:h}=g;({center:c}=d);this._dragStartCenter=
c;c=this._createDoubleTapDragData("begin",u.createScreenPoint(0,0),d);this._doubleTapDrag.emit(c,void 0,h);g.stopPropagation()}};p._dragUpdate=function(c){if(this._doubleTapDragActive){var {data:g,modifiers:d}=c,{center:h}=g;h=u.createScreenPoint(h.x-this._dragStartCenter.x,h.y-this._dragStartCenter.y);h=this._createDoubleTapDragData("update",h,g);this._doubleTapDrag.emit(h,void 0,d);c.stopPropagation()}};p._dragEnd=function(c){if(this._doubleTapDragActive){var {data:g,modifiers:d}=c,{center:h}=g;
h=u.createScreenPoint(h.x-this._dragStartCenter.x,h.y-this._dragStartCenter.y);h=this._createDoubleTapDragData("end",h,g);this._doubleTapDrag.emit(h,void 0,d);this._doubleTapDragActive=!1;c.stopPropagation()}};p._handlePointerDown=function(c){const {data:g}=c,d=this._pointerId(g),h=this._pointerState.get(d);var {pointerType:r}=g.native;h?(r="touch"===r?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),H.manhattanDistance(h.event.data,g)>r?this._storePointerDown(c):
this._doubleTapDragReady=!0):this._storePointerDown(c)};p._handlePointerUp=function(){this._doubleTapDragReady=!1};p._pointerId=function(c){({native:c}=c);const {pointerId:g,button:d,pointerType:h}=c;return"mouse"===h?`${g}:${d}`:`${h}`};p._storePointerDown=function(c){var {data:g}=c;const {pointerType:d}=g.native,h=this._pointerId(g);g=this._clock.setTimeout(()=>this._clearPointerDown(h),"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(h,{event:c,doubleTapTimeout:g});
this.refreshHasPendingInputs()};b._createClass(v,[{key:"hasPendingInputs",get:function(){return B.someMap(this._pointerState,c=>null!=c.doubleTapTimeout)}}]);return v}(m.InputHandler);f.DoubleTapDrag=m;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),function(f,b,k,u,B,m){function w(v){const p=
[];v.forEach(c=>{p.push(k.createScreenPoint(c.event.x,c.event.y))});return m.fitCircleLSQ(p)}function H(v){const p=w(v);let c=0;v.forEach(g=>{var d=A(g,p);for(d-=g.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=g.lastAngle+d;g.lastAngle=d;c+=d-g.initialAngle});c/=v.size||1;return{angle:c,radius:p.radius,center:p.center}}function K(v){const p=new Map;v.forEach((c,g)=>p.set(g,c.event));return p}function A(v,p){v=v.event;return Math.atan2(v.y-p.center.y,v.x-p.center.x)}B=function(v){function p(g){var d=
v.call(this,!1)||this;d.navigationTouch=g;d.startStateModifiers=new Set;d.activePointerMap=new Map;d.isDragging=!1;d.isCurrentDragSuppressed=!1;d.drag=d.registerOutgoing("drag");d.registerIncoming("pointer-drag",d.handlePointerDrag.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-up",d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-capture-lost",d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-cancel",
d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));return d}b._inheritsLoose(p,v);var c=p.prototype;c.createPayload=function(g,d,h,r){return{action:g,pointerType:this.pointerType,button:this.mouseButton,buttons:d.buttons,timestamp:r,pointers:K(this.activePointerMap),pointer:d,angle:h.angle,radius:h.radius,center:h.center}};c.addPointer=function(g){var d=g.native.pointerId;const h=H(this.activePointerMap).angle;g={event:g,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,g);d=
A(g,w(this.activePointerMap));g.initialAngle=d;g.lastAngle=d;this.updatePointerAngles(h)};c.updatePointer=function(g){if(!g||null!=g.x||null!=g.y){var d=this.activePointerMap.get(g.native.pointerId);d?d.event=g:this.addPointer(g)}};c.removePointer=function(g){const d=H(this.activePointerMap).angle;this.activePointerMap.delete(g);this.updatePointerAngles(d)};c.updatePointerAngles=function(g){const d=H(this.activePointerMap);this.activePointerMap.forEach(h=>{h.initialAngle=A(h,d)-g;h.lastAngle=A(h,
d)-g})};c.emitEvent=function(g,d,h){const r=H(this.activePointerMap);this.drag.emit(this.createPayload(g,d,r,h),void 0,this.startStateModifiers)};c.handlePointerUpAndPointerLost=function(g){const d=g.data.native.pointerId,h=u.Milliseconds(g.timestamp);this.activePointerMap.get(d)&&(1===this.activePointerMap.size?(this.updatePointer(g.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",g.data,h),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(d)):(this.removePointer(d),this.emitEvent("removed",
g.data,u.Milliseconds(g.timestamp))))};c.handlePointerDrag=function(g){const d=g.data,h=d.currentEvent,r=u.Milliseconds(g.timestamp);switch(d.action){case "start":case "update":this.isDragging?this.activePointerMap.has(h.native.pointerId)?(this.updatePointer(h),!this.isCurrentDragSuppressed&&this.emitEvent("update",h,r)):(this.addPointer(h),this.emitEvent("added",h,r),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(h),this.pointerType=g.data.startEvent.pointerType,this.mouseButton=
g.data.startEvent.button,this.startStateModifiers=g.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",h,r))}};b._createClass(p,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return p}(B.InputHandler);(function(v){v[v.Left=0]="Left";v[v.Middle=1]="Middle";v[v.Right=2]="Right";v[v.Back=3]="Back";
v[v.Forward=4]="Forward";v[v.Undefined=-1]="Undefined"})(f.Button||(f.Button={}));f.Drag=B;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./support ./SingleAndDoubleClick".split(" "),function(f,b,k,u,B,m){u=function(w){function H(A=m.DefaultParameters.maximumDoubleClickDelay,v=m.DefaultParameters.maximumDoubleClickDistance,p=m.DefaultParameters.maximumDoubleTouchDelay,
c=m.DefaultParameters.maximumDoubleTouchDistance,g=k["default"]){var d=w.call(this,!1)||this;d.maximumDoubleClickDelay=A;d.maximumDoubleClickDistance=v;d.maximumDoubleTouchDelay=p;d.maximumDoubleTouchDistance=c;d._clock=g;d._pointerState=new Map;d._immediateDoubleClick=d.registerOutgoing("immediate-double-click");d.registerIncoming("pointer-down",d._handlePointerDown.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-up",h=>{d._handlePointerLoss(h,"pointer-up")});d.registerIncoming("pointer-capture-lost",
h=>{d._handlePointerLoss(h,"pointer-capture-lost")});d.registerIncoming("pointer-cancel",h=>{d._handlePointerLoss(h,"pointer-cancel")});return d}b._inheritsLoose(H,w);var K=H.prototype;K.onUninstall=function(){this._pointerState.forEach(A=>{A.immediateDoubleClick&&A.immediateDoubleClick.timeoutHandle.remove()});w.prototype.onUninstall.call(this)};K._handlePointerDown=function(A){A=A.data;const v=this._pointerId(A);this._pointerState.has(v)||(this._pointerState.set(v,{downButton:A.native.button,immediateDoubleClick:null}),
this.startCapturingPointer(A.native))};K._handlePointerLoss=function(A,v){const p=A.data;var c=this._pointerId(p);if((c=this._pointerState.get(c))&&"pointer-up"===v&&c.downButton===p.native.button)if(v=c.immediateDoubleClick){v.timeoutHandle.remove();const g="touch"===A.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;B.manhattanDistance(v,A.data)>g?this._startImmediateDoubleClick(A,c):(this._immediateDoubleClick.emit(A.data,void 0,v.modifiers),this._removeState(p))}else this._startImmediateDoubleClick(A,
c)};K._startImmediateDoubleClick=function(A,v){v.immediateDoubleClick={x:A.data.x,y:A.data.y,modifiers:A.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(A.data),"touch"===A.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};K._pointerId=function(A){A=A.native;return"mouse"===A.pointerType?`${A.pointerId}:${A.button}`:`${A.pointerType}`};K._removeState=function(A){const v=this._pointerId(A);this._pointerState.delete(v);this.stopCapturingPointer(A.native);
this.refreshHasPendingInputs()};return H}(u.InputHandler);f.ImmediateDoubleClick=u;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(f,b,k,u,B){const m={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};u=function(w){function H(A=m.maximumClickDelay,
v=m.movementUntilMouseDrag,p=m.movementUntilPenDrag,c=m.movementUntilTouchDrag,g=m.holdDelay,d=k["default"]){var h=w.call(this,!1)||this;h.maximumClickDelay=A;h.movementUntilMouseDrag=v;h.movementUntilPenDrag=p;h.movementUntilTouchDrag=c;h.holdDelay=g;h._clock=d;h._pointerState=new Map;h._pointerDrag=h.registerOutgoing("pointer-drag");h._immediateClick=h.registerOutgoing("immediate-click");h._pointerHold=h.registerOutgoing("hold");h.registerIncoming("pointer-down",h._handlePointerDown.bind(b._assertThisInitialized(h)));
h.registerIncoming("pointer-up",r=>{h._handlePointerLoss(r,"pointer-up")});h.registerIncoming("pointer-capture-lost",r=>{h._handlePointerLoss(r,"pointer-capture-lost")});h.registerIncoming("pointer-cancel",r=>{h._handlePointerLoss(r,"pointer-cancel")});h._moveHandle=h.registerIncoming("pointer-move",h._handlePointerMove.bind(b._assertThisInitialized(h)));h._moveHandle.pause();return h}b._inheritsLoose(H,w);var K=H.prototype;K.onUninstall=function(){this._pointerState.forEach(A=>{null!=A.holdTimeout&&
(A.holdTimeout.remove(),A.holdTimeout=null)});w.prototype.onUninstall.call(this)};K._handlePointerDown=function(A){const v=A.data,p=v.native.pointerId;var c=null;0===this._pointerState.size&&(c=this._clock.setTimeout(()=>{const g=this._pointerState.get(p);g&&(g.isDragging||(this._pointerHold.emit(g.previousEvent,void 0,A.modifiers),g.holdEmitted=!0),g.holdTimeout=null)},this.holdDelay));c={startEvent:v,previousEvent:v,startTimestamp:A.timestamp,isDragging:!1,downButton:v.native.button,holdTimeout:c,
modifiers:new Set};this._pointerState.set(p,c);this.startCapturingPointer(v.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(A)};K._createPointerDragData=function(A,v,p){return{action:A,startEvent:v.startEvent,previousEvent:v.previousEvent,currentEvent:p}};K._handlePointerMove=function(A){const v=A.data,p=this._pointerState.get(v.native.pointerId);if(p){if(p.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",p,v),void 0,p.modifiers);else{const c=
B.euclideanDistance(v,p.startEvent),g=this._getDragThreshold(v.native.pointerType);c>g&&this.startDragging(A)}p.previousEvent=v}};K._getDragThreshold=function(A){switch(A){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};K.startDragging=function(A){const v=A.data,p=v.native.pointerId;this._pointerState.forEach(c=>{null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null);c.isDragging||(c.modifiers=A.modifiers,
c.isDragging=!0,p===c.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",c,v)):this._pointerDrag.emit(this._createPointerDragData("start",c,c.previousEvent),A.timestamp))})};K._handlePointerLoss=function(A,v){const p=A.data,c=p.native.pointerId,g=this._pointerState.get(c);g&&(null!=g.holdTimeout&&(g.holdTimeout.remove(),g.holdTimeout=null),g.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",g,"pointer-up"===v?p:g.previousEvent),void 0,g.modifiers):
"pointer-up"===v&&g.downButton===p.native.button&&A.timestamp-g.startTimestamp<=this.maximumClickDelay&&!g.holdEmitted&&this._immediateClick.emit(p),this._pointerState.delete(c),this.stopCapturingPointer(p.native),0===this._pointerState.size&&this._moveHandle.pause())};return H}(u.InputHandler);f.DefaultParameters=m;f.PointerClickHoldAndDrag=u;Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../Color".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c){let g=0;k=function(d){function h(){var r=d.apply(this,arguments)||this;r.color=new c([0,255,255]);r.haloOpacity=1;r.fillOpacity=.25;return r}f._inheritsLoose(h,d);f._createClass(h,[{key:"version",get:function(){return g++}}]);return h}(p);b.__decorate([m.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],k.prototype,"version",null);b.__decorate([m.property({type:c})],k.prototype,"color",void 0);b.__decorate([m.property({type:c})],
k.prototype,"haloColor",void 0);b.__decorate([m.property()],k.prototype,"haloOpacity",void 0);b.__decorate([m.property()],k.prototype,"fillOpacity",void 0);return k=b.__decorate([H.subclass("esri.views.2d.support.HighlightOptions")],k)})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(f,b,k){const u={checkMajorWebPerformanceCaveat:!0};f.check=function(B){B={...u,...B};const m=k();return m.available?B.checkMajorWebPerformanceCaveat&&
m.majorPerformanceCaveat?new b("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):m.supportsHighPrecisionFragment?m.supportsVertexShaderSamplers?m.supportsElementIndexUint?m.supportsStandardDerivatives?m.supportsInstancedArrays?null:new b("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new b("webgl:standard-derivatives-required",
"WebGL support for standard derivatives is required but not supported."):new b("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new b("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new b("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new b("webgl:required","WebGL is required but not supported.")};
Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["./context-util"],function(f){function b(){const u={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var B=document.createElement("canvas");if(!B)return u;var m=f.createContext(B,
{failIfMajorPerformanceCaveat:!0},"webgl");!m&&(m=f.createContext(B,{},"webgl"))&&(u.majorPerformanceCaveat=!0);if(!m)return u;B=m.getParameter(m.VERSION);if(!B)return u;if(B=B.match(/^WebGL\s+([\d.]*)/)){B=parseFloat(B[1]);u.available=.94<=B;if(B=m.getShaderPrecisionFormat(m.FRAGMENT_SHADER,m.HIGH_FLOAT))u.supportsHighPrecisionFragment=0<B.precision;u.supportsVertexShaderSamplers=0<m.getParameter(m.MAX_VERTEX_TEXTURE_IMAGE_UNITS);u.supportsElementIndexUint=null!==m.getExtension("OES_element_index_uint");
u.supportsStandardDerivatives=null!==m.getExtension("OES_standard_derivatives");u.supportsInstancedArrays=null!==m.getExtension("ANGLE_instanced_arrays");u.supportsTextureFloat=null!==m.getExtension("OES_texture_float");u.supportsColorBufferFloat=null!==m.getExtension("WEBGL_color_buffer_float")}u.maxTextureSize=m.getParameter(m.MAX_TEXTURE_SIZE);m=(m=document.createElement("canvas"))&&f.createContext(m,{},"webgl2")?!0:!1;u.version=m?2:1;return u}let k;return function(){k||(k=b());return k}})},"esri/views/webgl/context-util":function(){define(["exports"],
function(f){function b(u,B={},m){switch(m){case "webgl":m=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":m=["webgl2"];break;default:m=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}let w=null;for(const H of m){try{w=u.getContext(H,B)}catch(K){}if(w)break}return w}function k(u,B){(u=u.parentNode)&&(u.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
B+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}f.createContext=b;f.createContextOrErrorHTML=function(u,B={},m){if(!window.WebGLRenderingContext)return k(u,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;B=b(u,B,m);return B?B:(k(u,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
null)};Object.defineProperty(f,"__esModule",{value:!0})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../DefaultUI".split(" "),function(f,b,
k,u,B,m,w,H,K,A,v,p){k=function(c){function g(d){d=c.call(this,d)||this;d.components=["attribution","zoom"];return d}f._inheritsLoose(g,c);return g}(p);b.__decorate([m.property()],k.prototype,"components",void 0);return k=b.__decorate([H.subclass("esri.views.ui.2d.DefaultUI2D")],k)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/watchUtils ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x){u.getLogger("esri.views.ui.DefaultUI");k=function(C){function E(z){z=C.call(this,z)||this;z._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};z.components=[];return z}f._inheritsLoose(E,C);var D=E.prototype;D.initialize=function(){this._handles.add([p.init(this,"components",this._componentsWatcher.bind(this)),p.init(this,"view",this._updateViewAwareWidgets.bind(this))])};D._add=function(z,
q,n,t){if("string"===typeof z&&this._defaultPositionLookup[z]){if(this._find(z))return;z=this._createComponent(z)}C.prototype._add.call(this,z,q,n,t)};D._removeComponents=function(z){z.forEach(q=>{if(q=this._find(q))this.remove(q),q.destroy()})};D._updateViewAwareWidgets=function(z){this.components.forEach(q=>{(q=(q=this._find(q))&&q.widget)&&void 0!==q.view&&(q.view=z)})};D._componentsWatcher=function(z,q){this._removeComponents(q);this._addComponents(z);this._adjustPadding(z)};D._adjustPadding=
function(z){-1!==z.indexOf("attribution")||this._isOverridden("padding")||({top:z}=this.padding,this.padding=z)};D._addComponents=function(z){this.initialized&&z.forEach(q=>this.add(this._createComponent(q),this._defaultPositionLookup[q]))};D._createComponent=function(z){const q=this._createWidget(z);if(q)return new c({id:z,node:q})};D._createWidget=function(z){if("attribution"===z)return this._createAttribution();if("compass"===z)return this._createCompass();if("navigation-toggle"===z)return this._createNavigationToggle();
if("zoom"===z)return this._createZoom()};D._createAttribution=function(){return new d({view:this.view})};D._createCompass=function(){return new h({view:this.view})};D._createNavigationToggle=function(){return new r({view:this.view})};D._createZoom=function(){return new x({view:this.view})};return E}(g);b.__decorate([m.property()],k.prototype,"components",void 0);return k=b.__decorate([H.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/domUtils".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c){k=function(g){function d(){var r=g.apply(this,arguments)||this;r.widget=null;return r}f._inheritsLoose(d,g);var h=d.prototype;h.destroy=function(){this.widget&&this.widget.destroy();this.node=null};h.castNode=function(r){if(!r)return this._set("widget",null),null;if("string"===typeof r||r&&"nodeType"in r)return this._set("widget",null),c.byId(r);r&&"function"===typeof r.render&&!r.domNode&&(r.domNode=document.createElement("div"));this._set("widget",r);return r.domNode};
f._createClass(d,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(r){const x=this._get("node");r!==x&&(r&&r.classList.add("esri-component"),x&&x.classList.remove("esri-component"),this._set("node",r))}}]);return d}(p);b.__decorate([B.property({dependsOn:[],autoTracked:!1})],k.prototype,"id",null);b.__decorate([B.property()],k.prototype,"node",null);b.__decorate([m.cast("node")],k.prototype,"castNode",null);b.__decorate([B.property({readOnly:!0})],
k.prototype,"widget",void 0);return k=b.__decorate([H.subclass("esri.views.ui.Component")],k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/domUtils ../../widgets/support/widgetUtils ./Component".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r){function x(z){return"object"!==typeof z||z instanceof r||"declaredClass"in z||!("component"in z||"index"in z||"position"in z)?null:z}function C(z,{top:q,bottom:n,left:t,right:I}){z.style.top=q;z.style.bottom=n;z.style.left=t;z.style.right=I}const E={left:0,top:0,bottom:0,right:0},D={bottom:30,top:15,right:15,left:15};k=function(z){function q(t){t=z.call(this,t)||this;t._cornerNameToContainerLookup={};t._positionNameToContainerLookup={};t._components=[];
t._componentToKey=new Map;t._handles=new c;t.view=null;t._initContainers();return t}f._inheritsLoose(q,z);var n=q.prototype;n.initialize=function(){this._handles.add([g.init(this,"view.padding, container",this._applyViewPadding.bind(this)),g.init(this,"padding",this._applyUIPadding.bind(this))])};n.destroy=function(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};n.castPadding=function(t){return"number"===
typeof t?{bottom:t,top:t,right:t,left:t}:{...D,...t}};n.add=function(t,I){let J,Q;if(Array.isArray(t))t.forEach(ea=>this.add(ea,I));else{var aa=x(t);aa&&({index:J,position:I,component:t,key:Q}=aa);I&&"object"===typeof I&&({index:J,key:Q,position:I}=I);!t||I&&!this._isValidPosition(I)||this._add(t,I,J,Q)}};n.remove=function(t,I){if(t){if(Array.isArray(t))return t.map(aa=>this.remove(aa,I));var J=this._find(t);if(J){var Q=this._componentToKey;if(!Q.has(t)||Q.get(t)===I)return Q=this._components.indexOf(J),
J.node.parentNode&&J.node.parentNode.removeChild(J.node),this._componentToKey.delete(t),this._components.splice(Q,1)[0]}}};n.empty=function(t){if(Array.isArray(t))return t.map(I=>this.empty(I)).reduce((I,J)=>I.concat(J));t=t||"manual";return"manual"===t?Array.prototype.slice.call(this._manualContainer.children).filter(I=>!I.classList.contains("esri-ui-corner")).map(I=>this.remove(I)):this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,
this):null};n.move=function(t,I){Array.isArray(t)&&t.forEach(aa=>this.move(aa,I));if(t){var J=x(t)||x(I);if(J){var Q=J.index;I=J.position;t=J.component||t}(!I||this._isValidPosition(I))&&(t=this.remove(t))&&this.add(t,{position:I,index:Q})}};n.find=function(t){return t?(t=this._findById(t))&&(t.widget||t.node):null};n._add=function(t,I,J,Q){t instanceof r||(t=new r({node:t}));this._place({component:t,position:I,index:J});this._components.push(t);Q&&this._componentToKey.set(t,Q)};n._find=function(t){return t?
t instanceof r?this._findByComponent(t):"string"===typeof t?this._findById(t):this._findByNode(t.domNode||t):null};n._getViewPadding=function(){return this.get("view.padding")||E};n._attachContainers=function(t){t.appendChild(this._innerContainer);t.appendChild(this._manualContainer)};n._initContainers=function(){var t=document.createElement("div");t.classList.add("esri-ui-inner-container");t.classList.add("esri-ui-corner-container");const I=document.createElement("div");I.classList.add("esri-ui-inner-container");
I.classList.add("esri-ui-manual-container");const J=document.createElement("div");J.classList.add("esri-ui-top-left");J.classList.add("esri-ui-corner");t.appendChild(J);const Q=document.createElement("div");Q.classList.add("esri-ui-top-right");Q.classList.add("esri-ui-corner");t.appendChild(Q);const aa=document.createElement("div");aa.classList.add("esri-ui-bottom-left");aa.classList.add("esri-ui-corner");t.appendChild(aa);const ea=document.createElement("div");ea.classList.add("esri-ui-bottom-right");
ea.classList.add("esri-ui-corner");t.appendChild(ea);this._innerContainer=t;this._manualContainer=I;t=h.isRTL();this._cornerNameToContainerLookup={"top-left":J,"top-right":Q,"bottom-left":aa,"bottom-right":ea,"top-leading":t?Q:J,"top-trailing":t?J:Q,"bottom-leading":t?ea:aa,"bottom-trailing":t?aa:ea};this._positionNameToContainerLookup={manual:I,...this._cornerNameToContainerLookup}};n._isValidPosition=function(t){return!!this._positionNameToContainerLookup[t]};n._place=function(t){const I=t.component,
J=t.index;t=this._positionNameToContainerLookup[t.position||"manual"];var Q=-1<J,aa=I.widget;aa&&!aa._started&&"function"===typeof aa.postMixInProperties&&"function"===typeof aa.buildRendering&&"function"===typeof aa.postCreate&&"function"===typeof aa.startup&&I.widget.startup();Q?(Q=Array.prototype.slice.call(t.children),0===J?t.firstChild?d.insertBefore(I.node,t.firstChild):t.appendChild(I.node):J>=Q.length?t.appendChild(I.node):d.insertBefore(I.node,Q[J])):t.appendChild(I.node)};n._applyViewPadding=
function(){const t=this.container;t&&C(t,this._toPxPosition(this._getViewPadding()))};n._applyUIPadding=function(){const t=this._innerContainer;t&&C(t,this._toPxPosition(this.padding))};n._toPxPosition=function(t){return{top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}};n._toPxUnit=function(t){return 0===t?"0":t+"px"};n._findByComponent=function(t){let I=null,J;this._components.some(Q=>{(J=Q===t)&&(I=Q);return J});return I};n._findById=
function(t){let I=null,J;this._components.some(Q=>{(J=Q.id===t)&&(I=Q);return J});return I};n._findByNode=function(t){let I=null,J;this._components.some(Q=>{(J=Q.node===t)&&(I=Q);return J});return I};f._createClass(q,[{key:"container",set:function(t){const I=this._get("container");t!==I&&(t&&(t.classList.add("esri-ui"),this._attachContainers(t)),I&&(I.classList.remove("esri-ui"),C(I,{top:"",bottom:"",left:"",right:""}),d.empty(I)),this._set("container",t))}},{key:"height",get:function(){const t=this.get("view.height")||
0;if(0===t)return t;const I=this._getViewPadding();return Math.max(t-(I.top+I.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(t){t?this._override("padding",t):this._clearOverride("padding")}},{key:"width",get:function(){const t=this.get("view.width")||0;if(0===t)return t;const I=this._getViewPadding();return Math.max(t-(I.left+I.right),0)}}]);return q}(p.EventedAccessor);b.__decorate([B.property()],k.prototype,"container",null);b.__decorate([B.property({dependsOn:["view.height"]})],
k.prototype,"height",null);b.__decorate([B.property({value:D})],k.prototype,"padding",null);b.__decorate([m.cast("padding")],k.prototype,"castPadding",null);b.__decorate([B.property()],k.prototype,"view",void 0);b.__decorate([B.property({dependsOn:["view.width"]})],k.prototype,"width",null);return k=b.__decorate([H.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Attribution/AttributionViewModel".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E){k=function(D){function z(n,t){n=D.call(this,n,t)||this;n._isOpen=!1;n._attributionTextOverflowed=!1;n._prevSourceNodeHeight=0;n.iconClass="esri-icon-description";n.itemDelimiter=" | ";n.label=void 0;n.messages=null;n.view=null;n.viewModel=new E;return n}f._inheritsLoose(z,D);var q=z.prototype;q.initialize=function(){this.own(c.on(this,"viewModel.items","change",()=>this.scheduleRender()))};q.render=function(){return x.jsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",
{["esri-attribution--open"]:this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};q.renderPoweredBy=function(){return x.jsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",x.jsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};q.renderSourcesNode=function(){const n=this._isOpen,t=this._isInteractive(),I=t?0:-1,{attributionText:J}=
this,Q=t?"button":void 0;return x.jsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:n,["esri-interactive"]:t}),innerHTML:J,role:Q,tabIndex:I})};q._afterSourcesNodeCreate=function(n){this._prevSourceNodeHeight=n.clientWidth};q._afterSourcesNodeUpdate=function(n){let t=!1;const {clientHeight:I,clientWidth:J,scrollWidth:Q}=n;n=Q>=J;const aa=this._attributionTextOverflowed!==
n;this._attributionTextOverflowed=n;aa&&(t=!0);this._isOpen&&(n=I<this._prevSourceNodeHeight,this._prevSourceNodeHeight=I,n&&(this._isOpen=!1,t=!0));t&&this.scheduleRender()};q._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};q._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};f._createClass(z,[{key:"attributionText",get:function(){return this.viewModel.items.reduce((n,t)=>{-1===n.indexOf(t.text)&&n.push(t.text);return n},[]).join(this.itemDelimiter)}}]);
return z}(C);b.__decorate([m.property({dependsOn:["viewModel.items.length","itemDelimiter"],readOnly:!0,autoTracked:!1}),r.renderable()],k.prototype,"attributionText",null);b.__decorate([m.property()],k.prototype,"iconClass",void 0);b.__decorate([m.property(),r.renderable()],k.prototype,"itemDelimiter",void 0);b.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([m.property(),r.renderable(),h.messageBundle("esri/widgets/Attribution/t9n/Attribution")],
k.prototype,"messages",void 0);b.__decorate([w.aliasOf("viewModel.view")],k.prototype,"view",void 0);b.__decorate([m.property({type:E}),r.renderable(["state","view.size"])],k.prototype,"viewModel",void 0);b.__decorate([d.accessibleHandler()],k.prototype,"_toggleState",null);return k=b.__decorate([K.subclass("esri.widgets.Attribution")],k)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/support/contains ../../geometry ../../core/Collection ../../core/asyncUtils ../../core/watchUtils ../../core/HandleOwner".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){function E(q,n){return q.length!==n.length||q.some((t,I)=>t.text!==n[I].text)}function D(q,n,t){t&&n&&(q.find(I=>I.layerView===n&&I.text===t)||q.push({text:t,layerView:n}))}const z=[];k=function(q){function n(I){var J=q.call(this,I)||this;J.clear=()=>{J._fetchedAttributionData.clear();J._pendingAttributions.clear();J.handles.remove("suspension");J.notifyChange("state")};J._pendingAttributions=new Set;J._fetchedAttributionData=new Map;J.items=new h;J.view=
null;J._allLayerViewsChange=Q=>{J.handles.remove("suspension");const aa=J.get("view.allLayerViews");aa&&J.handles.add(aa.map(ea=>ea.watch(["suspended","attributionVisible"],J._updateAttributionItems)),"suspension");Q&&Q.removed&&Q.removed.forEach(ea=>{J._pendingAttributions.delete(ea);J._fetchedAttributionData.delete(ea)});J._updateAttributionItems()};J._updateAttributionItems=()=>{const Q=J.get("view.allLayerViews");z.length=0;Q?(Q.forEach(aa=>{if(!aa.suspended&&aa.get("layer.attributionVisible")){var ea=
aa.layer;if(ea&&"copyright"in ea&&"function"===typeof ea.originOf&&"user"===ea.originOf("copyright"))D(z,aa,ea.copyright);else if(ea.hasAttributionData)if(J._fetchedAttributionData.has(aa)){var ha=J._fetchedAttributionData.get(aa);ha&&D(z,aa,J._getDynamicAttribution(ha,J.view,ea))}else J._fetchAttributionData(aa);else(ha=ea.get("portalItem.accessInformation"))?D(z,aa,ha):D(z,aa,ea.copyright)}}),E(J.items,z)&&(J.items.removeAll(),J.items.addMany(z)),z.length=0,J.notifyChange("state")):J.clear()};J.handles.add([x.on(f._assertThisInitialized(J),
"view.allLayerViews","change",J._allLayerViewsChange,J._allLayerViewsChange,J.clear),x.whenTrue(f._assertThisInitialized(J),"view.stationary",()=>J._updateAttributionItems())]);return J}f._inheritsLoose(n,q);var t=n.prototype;t.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};t._fetchAttributionData=async function(I){if(!this._pendingAttributions.has(I)){this._pendingAttributions.add(I);var J=await r.result(I.layer.fetchAttributionData());
this._pendingAttributions.has(I)&&(J=J.ok?this._createContributionIndex(J.value,"bing-maps"===I.layer.type):null,this._pendingAttributions.delete(I),this._fetchedAttributionData.set(I,J));this._updateAttributionItems()}};t._createContributionIndex=function(I,J){I=I.contributors;const Q={};if(!I)return Q;for(let ka=0;ka<I.length;ka++){const y=I[ka];var aa=y.coverageAreas;if(!aa)return;for(const F of aa){var ea=F.bbox,ha=F.zoomMin-(J&&F.zoomMin?1:0);aa=F.zoomMax-(J&&F.zoomMax?1:0);for(ea={extent:c.geographicToWebMercator({xmin:ea[1],
ymin:ea[0],xmax:ea[3],ymax:ea[2],spatialReference:p.WGS84}),attribution:y.attribution||"",score:null!=F.score?F.score:100,id:ka};ha<=aa;ha++)Q[ha]=Q[ha]||[],Q[ha].push(ea)}}Q.maxKey=Math.max.apply(null,Object.keys(Q));return Q};t._getDynamicAttribution=function(I,J,Q){const {extent:aa,scale:ea}=J;Q=Q.tileInfo.scaleToZoom(ea);Q=Math.min(I.maxKey,Math.round(Q));if(!aa||null==Q||-1>=Q)return"";I=I[Q];const ha=c.project(aa.center.clone().normalize(),J.spatialReference),ka={};return I?I.filter(y=>{const F=
!ka[y.id]&&ha&&g.extentContainsPoint(y.extent,ha);F&&(ka[y.id]=!0);return F}).sort((y,F)=>F.score-y.score||y.objectId-F.objectId).map(y=>y.attribution).join(", "):""};f._createClass(n,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return n}(C.HandleOwner);b.__decorate([m.property({readOnly:!0,type:h})],k.prototype,"items",void 0);b.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"state",null);
b.__decorate([m.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Attribution.AttributionViewModel")],k)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Compass/CompassViewModel".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){k=function(E){function D(q,n){q=E.call(this,q,n)||this;q.goToOverride=null;q.iconClass="esri-icon-locate-circled";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new C;return q}f._inheritsLoose(D,E);var z=D.prototype;z.reset=function(){return this.viewModel.reset()};z.render=function(){const {orientation:q,state:n}=this.viewModel;var t="disabled"===n,I="compass"===("rotation"===n?"rotation":"compass");const J=t?-1:0;t={["esri-disabled"]:t,["esri-interactive"]:!t};
I={["esri-icon-compass"]:I,["esri-icon-dial"]:!I};const {messages:Q}=this;return r.jsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",t),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:J,"aria-label":Q.reset,title:Q.reset},r.jsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",I),styles:this._toRotationTransform(q)}),r.jsx("span",{class:"esri-icon-font-fallback-text"},Q.reset))};z._reset=function(){this.viewModel.reset()};z._toRotationTransform=
function(q){return{transform:`rotateZ(${q.z}deg)`}};return D}(x);b.__decorate([w.aliasOf("viewModel.goToOverride")],k.prototype,"goToOverride",void 0);b.__decorate([m.property()],k.prototype,"iconClass",void 0);b.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([m.property(),h.renderable(),d.messageBundle("esri/widgets/Compass/t9n/Compass")],k.prototype,"messages",void 0);b.__decorate([w.aliasOf("viewModel.view")],k.prototype,
"view",void 0);b.__decorate([m.property({type:C}),h.renderable(["viewModel.orientation","viewModel.state"])],k.prototype,"viewModel",void 0);b.__decorate([g.accessibleHandler()],k.prototype,"_reset",null);return k=b.__decorate([K.subclass("esri.widgets.Compass")],k)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Handles ../../core/watchUtils ../support/GoTo".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d){k=function(h){function r(C){C=h.call(this,C)||this;C._handles=new c;C.orientation={x:0,y:0,z:0};C.view=null;C._updateForCamera=C._updateForCamera.bind(f._assertThisInitialized(C));C._updateForRotation=C._updateForRotation.bind(f._assertThisInitialized(C));C._updateRotationWatcher=C._updateRotationWatcher.bind(f._assertThisInitialized(C));C.view;return C}f._inheritsLoose(r,h);var x=r.prototype;x.initialize=function(){this._handles.add(g.init(this,"view",this._updateRotationWatcher))};
x.destroy=function(){this._handles.destroy();this.view=this._handles=null};x.reset=function(){if(this.get("view.ready")){var C={};"2d"===this.view.type?C.rotation=0:C.heading=0;this.callGoTo({target:C})}};x._updateForRotation=function(C){void 0!==C&&null!==C&&(this.orientation={z:C})};x._updateForCamera=function(C){C&&(this.orientation={x:0,y:0,z:-C.heading})};x._updateRotationWatcher=function(C){this._handles.removeAll();C&&("2d"===C.type?this._handles.add(g.init(this,"view.rotation",this._updateForRotation)):
this._handles.add(g.init(this,"view.camera",this._updateForCamera)))};f._createClass(r,[{key:"canShowNorth",get:function(){const C=this.get("view.spatialReference");return!(!C||!C.isWebMercator&&!C.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return r}(d.GoToMixin(p));b.__decorate([m.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],k.prototype,"canShowNorth",null);
b.__decorate([m.property()],k.prototype,"orientation",void 0);b.__decorate([m.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],k.prototype,"state",null);b.__decorate([m.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./NavigationToggle/NavigationToggleViewModel".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){k=function(E){function D(q,n){q=E.call(this,q,n)||this;q.iconClass="esri-icon-pan2";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new C;return q}f._inheritsLoose(D,E);var z=D.prototype;z.toggle=function(){return this.viewModel.toggle()};z.render=function(){const q="disabled"===this.get("viewModel.state");var n="pan"===this.get("viewModel.navigationMode");const t={["esri-navigation-toggle__button--active"]:n};n={["esri-navigation-toggle__button--active"]:!n};
const I=q?-1:0,J=this.messages.toggle;return r.jsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:q,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:I,"aria-label":J,title:J},r.jsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",t)},r.jsx("span",{class:"esri-icon-pan"})),r.jsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",n)},r.jsx("span",{class:"esri-icon-rotate"})))};z._toggle=function(){this.toggle()};f._createClass(D,[{key:"layout",set:function(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}}]);return D}(x);b.__decorate([m.property()],k.prototype,"iconClass",void 0);b.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([m.property({value:"vertical"}),h.renderable()],k.prototype,"layout",null);
b.__decorate([m.property(),h.renderable(),d.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],k.prototype,"messages",void 0);b.__decorate([w.aliasOf("viewModel.view"),h.renderable()],k.prototype,"view",void 0);b.__decorate([m.property({type:C}),h.renderable(["viewModel.state","viewModel.navigationMode"])],k.prototype,"viewModel",void 0);b.__decorate([g.accessibleHandler()],k.prototype,"_toggle",null);return k=b.__decorate([K.subclass("esri.widgets.NavigationToggle")],k)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Handles ../../core/watchUtils".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g){k=function(d){function h(x){x=d.call(this,x)||this;x._handles=new c;x.navigationMode="pan";x.view=null;return x}f._inheritsLoose(h,d);var r=h.prototype;r.initialize=function(){this._handles.add(g.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};r.destroy=function(){this._handles.destroy();this.view=this._handles=null};r.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};
r._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};f._createClass(h,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return h}(p);b.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"state",null);b.__decorate([m.property()],k.prototype,"navigationMode",void 0);b.__decorate([m.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.NavigationToggleViewModel")],
k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/renderable ../chunks/index ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C){k=function(E){function D(q,n){q=E.call(this,q,n)||this;q.iconClass="esri-icon-zoom-in-magnifying-glass";q.label=void 0;q.messages=null;q.view=null;q.viewModel=new C;return q}f._inheritsLoose(D,E);var z=D.prototype;z.initialize=function(){this._zoomInButton=new x({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new x({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};z.destroy=function(){this._zoomInButton.destroy();
this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=null};z.render=function(){const q=this.viewModel,n={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===q.state&&q.canZoomIn;this._zoomOutButton.enabled="ready"===q.state&&q.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return h.jsx("div",{class:this.classes("esri-zoom esri-widget",n)},this._zoomInButton.render(),this._zoomOutButton.render())};
z.zoomIn=function(){return this.viewModel.zoomIn()};z.zoomOut=function(){return this.viewModel.zoomOut()};f._createClass(D,[{key:"layout",set:function(q){"horizontal"!==q&&(q="vertical");this._set("layout",q)}}]);return D}(r);b.__decorate([m.property()],k.prototype,"iconClass",void 0);b.__decorate([m.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([m.property({value:"vertical"}),d.renderable()],k.prototype,"layout",null);b.__decorate([m.property(),
d.renderable(),g.messageBundle("esri/widgets/Zoom/t9n/Zoom")],k.prototype,"messages",void 0);b.__decorate([w.aliasOf("viewModel.view"),d.renderable()],k.prototype,"view",void 0);b.__decorate([m.property({type:C}),d.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],k.prototype,"viewModel",void 0);return k=b.__decorate([K.subclass("esri.widgets.Zoom")],k)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../support/widgetUtils ../support/decorators/accessibleHandler ../support/decorators/renderable ../../chunks/index ../Widget".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d,h){k=function(r){function x(){var E=r.apply(this,arguments)||this;E.enabled=!0;E.iconClass="";E.title="";return E}f._inheritsLoose(x,r);var C=x.prototype;C.render=function(){const E=this.enabled?0:-1,D={[this.iconClass]:!!this.iconClass};return d.jsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",
tabIndex:E,title:this.title},d.jsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",D)}),d.jsx("span",{class:"esri-icon-font-fallback-text"},this.title))};C._triggerAction=function(){this.action.call(this)};return x}(h);b.__decorate([m.property()],k.prototype,"action",void 0);b.__decorate([m.property(),g.renderable()],k.prototype,"enabled",void 0);b.__decorate([m.property(),g.renderable()],k.prototype,"iconClass",void 0);b.__decorate([m.property(),g.renderable()],k.prototype,
"title",void 0);b.__decorate([c.accessibleHandler()],k.prototype,"_triggerAction",null);return k=b.__decorate([H.subclass("esri.widgets.IconButton")],k)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Accessor ./ZoomConditions2D ./ZoomConditions3D".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p,c,g,d){k=function(h){function r(C){C=h.call(this,C)||this;C.canZoomIn=!1;C.canZoomOut=!1;return C}f._inheritsLoose(r,h);var x=r.prototype;x.destroy=function(){this.view=null};x.zoomIn=function(){if(this.canZoomIn){var C=this.view;"2d"===C.type?C.mapViewNavigation.zoomIn():p.ignoreAbortErrors(C.goTo({zoomFactor:2}))}};x.zoomOut=function(){if(this.canZoomOut){var C=this.view;"2d"===C.type?C.mapViewNavigation.zoomOut():p.ignoreAbortErrors(C.goTo({zoomFactor:.5}))}};f._createClass(r,
[{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(C){C?"2d"===C.type?this._zoomConditions=new g({view:C}):"3d"===C.type&&(this._zoomConditions=new d({view:C})):this._zoomConditions=null;this._set("view",C)}}]);return r}(c);b.__decorate([m.property()],k.prototype,"_zoomConditions",void 0);b.__decorate([m.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],k.prototype,"canZoomIn",void 0);b.__decorate([m.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],k.prototype,"canZoomOut",void 0);b.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"state",null);b.__decorate([m.property()],k.prototype,"view",null);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(f,b,k,u,B,m,w,H,K,A,v,p){k=function(c){function g(){return c.apply(this,arguments)||this}f._inheritsLoose(g,c);f._createClass(g,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),h=this.get("view.constraints.effectiveMaxScale");return 0===h||d>h}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),h=this.get("view.constraints.effectiveMinScale");
return 0===h||d<h}}]);return g}(p);b.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],k.prototype,"canZoomIn",null);b.__decorate([m.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],k.prototype,"canZoomOut",null);b.__decorate([m.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions2D")],
k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),function(f,b,k,u,B,m,w,H,K,A,v,p){k=function(c){function g(){return c.apply(this,arguments)||
this}f._inheritsLoose(g,c);f._createClass(g,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return g}(p);b.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"canZoomIn",null);b.__decorate([m.property({dependsOn:["view.ready"],readOnly:!0})],k.prototype,"canZoomOut",null);b.__decorate([m.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../core/Collection ../Graphic ../core/CollectionFlattener ../core/watchUtils ../webmap/background/ColorBackground ../core/workers/workers ./support/screenshotUtils ./DOMContainer ./support/screenUtils ./BreakpointsOwner ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/WebGLRequirements ./ui/2d/DefaultUI2D".split(" "),function(f,
b,k,u,B,m,w,H,K,A,v,p,c,g,d,h,r,x,C,E,D,z,q,n,t,I,J,Q,aa,ea){async function ha(){const [,{GraphicsView2D:X,LabelManager:ja,MapViewNavigation:oa,MagnifierView2D:ca,Stage:V}]=await Promise.all([new Promise(function(ba,ra){f(["./webgl"],ba,ra)}),new Promise(function(ba,ra){f(["./2d/mapViewDeps"],ba,ra)})]);Z=X;pa=ja;S=oa;T=ca;F=V}function ka(X,ja,oa){X&&(Array.isArray(X)||h.isCollection(X)?0!==X.length&&X.forEach(ca=>ka(ca,ja,oa)):X instanceof r?ja.add(X):oa.add(X))}const y=m.getLogger("esri.views.MapView");
let F,Z,pa,S,T;m=function(X){function ja(ca){ca=X.call(this,ca)||this;ca._magnifierView=null;ca._stage=null;ca._resolveWhenReady=[];ca.rootLayerViews=new x({root:b._assertThisInitialized(ca),rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:V=>null});ca.graphicsView=null;ca.highlightOptions=new Q;ca.inputManager=new J({view:b._assertThisInitialized(ca)});ca.mapViewNavigation=null;ca.supersampleScreenhotsEnabled=!0;ca.ui=new ea;ca.rendering=
!1;D.initialize();return ca}b._inheritsLoose(ja,X);var oa=ja.prototype;oa.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};oa.toMap=function(ca){return n.isSupportedScreenPointEvent(ca)?(ca=n.createScreenPointFromSupportedEvent(this,ca),X.prototype.toMap.call(this,ca)):X.prototype.toMap.call(this,ca)};oa.hitTest=function(ca,V){const ba=n.isSupportedScreenPointEvent(ca)?n.createScreenPointFromSupportedEvent(this,ca):ca;if(!this.ready||isNaN(ba.x)||
isNaN(ba.y))return d.resolve({screenPoint:ba,results:[]});const ra=this.toMap(ba);ca=[this.graphicsView];ca.push.apply(ca,this.allLayerViews.toArray().reverse());const la=new Set,a=new Set,e=new Set,L=new Set;V&&(ka(V&&V.include,la,e),ka(V&&V.exclude,a,L));return d.all(ca.map(l=>!l||!l.hitTest||0<e.size&&!l.layer||0<e.size&&l.layer&&!e.has(l.layer)||0<L.size&&l.layer&&L.has(l.layer)?null:l.hitTest(ba.x,ba.y))).then(l=>({screenPoint:ba,results:l.filter(G=>null!=G&&(0<la.size?la.has(G):!0)&&(0<a.size?
!a.has(G):!0)).map(G=>({mapPoint:ra,graphic:G}))}))};oa.takeScreenshot=function(ca){return this.ready?this._stage.takeScreenshot(z.toRenderSettings(ca,this),this.allLayerViews):d.reject("Map view cannot be used before it is ready")};oa.on=function(ca,V,ba,ra){return(ba=this.inputManager&&this.viewEvents.on(ca,V,ba,ra))?ba:X.prototype.on.call(this,ca,V)};oa.hasEventListener=function(ca){return X.prototype.hasEventListener.call(this,ca)||this.viewEvents.hasHandler(ca)};oa.whenLayerView=function(ca){return X.prototype.whenLayerView.call(this,
ca)};oa.graphicChanged=function(ca){this.graphicsView&&this.graphicsView.graphicUpdateHandler(ca)};oa.whenReady=function(){return d.create(ca=>{this.ready?ca(this):this._resolveWhenReady.push(ca)})};oa.forceDOMReadyCycle=function(){this.forceReadyCycle()};oa.validate=function(){let ca=aa.check({checkMajorWebPerformanceCaveat:!1});u("safari")&&9>u("safari")&&(ca=new v("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:u("safari")}));
return B.isSome(ca)?(y.warn("#validate()",ca.message),d.reject(ca)):ha()};oa._startup=function(){this.timeline.begin("MapView Startup");X.prototype._startup.call(this);this.graphics.owner=this;const ca=new F(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});var V=new Z({view:this,
graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate()});const ba=new S({view:this,animationManager:this.animationManager}),ra=new pa({view:this});this._magnifierView=new T;this._magnifierView.magnifier=this.magnifier;this._stage=ca;this.frameTask.graphicsView=V;this._set("graphicsView",V);this._set("mapViewNavigation",ba);this._set("labelManager",ra);this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),ca.on("post-render",()=>this._set("rendering",ca.renderRequested)),
ca.on("will-render",()=>this._set("rendering",ca.renderRequested)),ca.on("webgl-error",la=>this.fatalError=la.error),C.init(this,"stationary",la=>ca.stationary=la,!0),C.init(this,"state.id",()=>ca.state=this.state,!0),C.init(this,"background",la=>{ca.background=la;this._magnifierView.background=la},!0),C.init(this,"magnifier",la=>this._magnifierView.magnifier=la,!0),C.init(this,"renderingOptions",la=>ca.renderingOptions=la,!0),C.init(this,"highlightOptions",()=>ca.highlightOptions=this.highlightOptions,
!0)],"map-view");ca.state=this.state;this._updateStageChildren();V=this._resolveWhenReady;this._resolveWhenReady=[];V.forEach(la=>la(this));this.timeline.end("MapView Startup")};oa._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",
null);this._set("mapViewNavigation",null);this.graphics.owner=null;X.prototype._teardown.call(this)};oa._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(ca=>{this._stage.addChild(ca.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};b._createClass(ja,[{key:"background",get:function(){return this.get("map.initialViewProperties.background")||null},set:function(ca){void 0===ca?this._clearOverride("background"):
this._override("background",ca)}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}}]);return ja}(t.BreakpointsOwner(q.DOMContainer(I)));k.__decorate([H.property({type:E,dependsOn:["map.initialViewProperties?.background"]})],m.prototype,"background",null);k.__decorate([H.property()],m.prototype,"graphicsView",void 0);k.__decorate([H.property({type:Q})],m.prototype,
"highlightOptions",void 0);k.__decorate([H.property({readOnly:!0})],m.prototype,"inputManager",void 0);k.__decorate([H.property({readOnly:!0})],m.prototype,"textureManager",null);k.__decorate([H.property({readOnly:!0})],m.prototype,"mapViewNavigation",void 0);k.__decorate([H.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],m.prototype,"navigating",null);k.__decorate([H.property({type:Boolean,constructOnly:!0})],m.prototype,"supersampleScreenhotsEnabled",void 0);k.__decorate([H.property({type:ea})],
m.prototype,"ui",void 0);k.__decorate([H.property({readOnly:!0})],m.prototype,"rendering",void 0);k.__decorate([H.property({constructOnly:!0})],m.prototype,"renderCanvas",void 0);k.__decorate([H.property({constructOnly:!0})],m.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([H.property({constructOnly:!0})],m.prototype,"debugWebGLExtensions",void 0);return m=k.__decorate([A.subclass("esri.views.MapView")],m)});