// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),function(p,e,ba,J,q,H,m,v){function w(r,G,ca){if(r)for(const ta of r)(r=(r=ba.getDeepValue(ta,G))&&"function"!==typeof r&&l(ca,r))&&ba.setDeepValue(ta,r.name,G)}function D(r,G){if(!r||!G)return[];E.clear();ja(E,r,G);return Array.from(E).sort()}function ja(r,G,ca){if(ca)if(G&&G.length)if(ca.includes("*"))for(const {name:ta}of G)r.add(ta);
else for(const ta of ca)Z(r,G,ta);else if(ca.includes("*"))r.clear(),r.add("*");else for(const ta of ca)r.add(ta)}function Z(r,G,ca){G&&G.length?(G=l(G,ca))&&r.add(G.name):"string"===typeof ca&&r.add(ca)}function l(r,G){if("string"!==typeof G)return null;if(null!=r){G=G.toLowerCase();for(const ca of r)if(ca&&ca.name.toLowerCase()===G)return ca}return null}async function B(r,G,ca){if(ca){var {arcadeUtils:ta}=await v.loadArcade();ca=ta.extractFieldNames(ca);for(const xa of ca)Z(r,G,xa)}}function n(r,
G){for(const ca of r)if(ca&&ca.valueType&&ca.valueType===G)return ca.name;return null}async function d(r,G){if(G){var {fields:ca}=G;if(G=ba.getDeepValue("elevationInfo.featureExpressionInfo",G))return G.collectRequiredFields(r,ca)}}async function f(r,G,ca){ca.outStatistic.onStatisticValueExpression?B(r,G,ca.outStatistic.onStatisticValueExpression):r.add(ca.outStatistic.onStatisticField)}async function z(r,G){const {labelingInfo:ca,fields:ta}=G;ca&&ca.length&&await H.all(ca.map(xa=>t(r,ta,xa)))}async function t(r,
G,ca){if(ca){var ta=ca.getLabelExpression();ca=ca.where;"arcade"===ta.type?await B(r,G,ta.expression):(ta=ta.expression.match(/{[^}]*}/g))&&ta.forEach(xa=>{Z(r,G,xa.slice(1,-1))});ta=/['"]+/g;ca&&(ca=ca.split(" "),3===ca.length&&Z(r,G,ca[0].replace(ta,"")),7===ca.length&&(Z(r,G,ca[0].replace(ta,"")),Z(r,G,ca[4].replace(ta,""))))}}function y(r){return"number"===typeof r&&!isNaN(r)&&isFinite(r)}function K(r){return null===r||y(r)}function L(r){return null===r||X(r)}function Y(r){return null!=r&&"string"===
typeof r}function ka(r){return null===r||Y(r)}function ea(){return!0}function I(r,G){let ca;switch(r.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ca=r.nullable?L:X;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ca=r.nullable?K:y;break;case "string":case "esriFieldTypeString":ca=r.nullable?ka:Y;break;default:ca=ea}return 1===arguments.length?
ca:ca(G)}function U(r){return null!=r&&ha.has(r.type)}function ia(r,G){return r.nullable&&null===G?null:U(r)&&!O(r.type,Number(G))?e.NumericRangeValidationError.OUT_OF_RANGE:I(r,G)?r.domain?m.validateDomainValue(r.domain,G):null:e.TypeValidationError.INVALID_TYPE}function O(r,G){return(r="string"===typeof r?Q(r):r)?r.isInteger?X(G)&&G>=r.min&&G<=r.max:G>=r.min&&G<=r.max:!1}function Q(r){switch(r){case "esriFieldTypeSmallInteger":case "small-integer":return pa;case "esriFieldTypeInteger":case "integer":return ra;
case "esriFieldTypeSingle":case "single":return Aa;case "esriFieldTypeDouble":case "double":return Ca}}function F(r,G,ca){if(!G||!G.attributes||!r){if(J.isSome(ca))for(var ta of r)ca.add(ta);return!0}G=G.attributes;ta=!1;for(const xa of r)if(!(xa in G))if(ta=!0,J.isSome(ca))ca.add(xa);else break;return ta}const u="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
N=["field","normalizationField"],E=new Set,X=(()=>"isInteger"in Number?Number.isInteger:r=>"number"===typeof r&&isFinite(r)&&Math.floor(r)===r)(),W=["integer","small-integer","single","double"],ha=new Set([...W,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE=
"type-validation-error::invalid-type";const pa={min:-32768,max:32767,isInteger:!0},ra={min:-2147483648,max:2147483647,isInteger:!0},Aa={min:-3.4E38,max:1.2E38,isInteger:!1},Ca={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=B;e.collectElevationFields=d;e.collectFeatureReductionFields=async function(r,G,ca){G&&ca&&"cluster"===ca.type&&ca.fields&&await H.all(ca.fields.map(ta=>f(r,G.fields,ta)))};e.collectField=Z;e.collectFields=ja;e.collectFilterFields=async function(r,
G,ca){if(G&&ca&&(ca.where&&"1\x3d1"!==ca.where||ca.timeExtent)&&(G.timeInfo&&ca.timeExtent&&ja(r,G.fields,[G.timeInfo.startField,G.timeInfo.endField]),J.isSome(ca.where)&&ca.where)){ca=(await new Promise(function(ta,xa){p(["../../core/sql/WhereClause"],ta,xa)})).WhereClause.create(ca.where,G.fieldsIndex);if(!ca.isStandardized)throw new q("fieldUtils:collectFilterFields","Where clause is not standardized");ja(r,G.fields,ca.fieldNames)}};e.collectLabelingFields=z;e.doubleRange=Ca;e.featureHasFields=
function(r,G){return!F(r,G,null)};e.fixFields=D;e.fixRendererFields=function(r,G){if(null!=r&&null!=G)for(const ca of Array.isArray(r)?r:[r])if(w(u,ca,G),"visualVariables"in ca&&ca.visualVariables)for(const ta of ca.visualVariables)w(N,ta,G)};e.fixTimeInfoFields=function(r,G){if(null!=r&&null!=G)if("startField"in r){var ca=l(G,r.startField);G=l(G,r.endField);r.startField=ca&&ca.name||null;r.endField=G&&G.name||null}else ca=l(G,r.startTimeField),G=l(G,r.endTimeField),r.startTimeField=ca&&ca.name||
null,r.endTimeField=G&&G.name||null};e.getDisplayFieldName=function({displayField:r,fields:G}){if(r)return r;if(!G||!G.length)return null;if(!(r=n(G,"name-or-title")||n(G,"unique-identifier")||n(G,"type-or-category")))a:{for(const ca of G)if(ca&&ca.name&&(G=ca.name.toLowerCase(),-1<G.indexOf("name")||-1<G.indexOf("title"))){r=ca.name;break a}r=null}return r};e.getElevationFields=async function(r){if(!r)return[];const G=new Set;await d(G,r);return Array.from(G).sort()};e.getExpressionFields=async function(r,
G){const ca=new Set;for(const ta of G)await B(ca,r.fields,ta);return Array.from(ca).sort()};e.getFeatureEditFields=function(r){if(!r)return[];const G="editFieldsInfo"in r&&r.editFieldsInfo;return G?D(r.fields,[G&&G.creatorField,G&&G.creationDateField,G&&G.editorField,G&&G.editDateField]):[]};e.getFeatureGeometryFields=function(r){if(!r)return[];const G="geometryProperties"in r&&r.geometryProperties;return G?D(r.fields,[G&&G.shapeAreaFieldName,G&&G.shapeLengthFieldName]):[]};e.getField=l;e.getFieldDefaultValue=
function(r){const G=r.defaultValue;if(void 0!==G&&I(r,G))return G;if(r.nullable)return null};e.getFieldRange=function(r){const G=m.getDomainRange(r.domain);if(G)return G;if(U(r))return Q(r.type)};e.getLabelingFields=async function(r){if(!r)return[];const G=new Set;await z(G,r);return Array.from(G).sort()};e.getNumericTypeForValue=function(r){if(!y(r))return null;if(X(r)){if(r>=pa.min&&r<=pa.max)return"esriFieldTypeSmallInteger";if(r>=ra.min&&r<=ra.max)return"esriFieldTypeInteger"}return r>=Aa.min&&
r<=Aa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(r){if(!r)return[];const G="timeInfo"in r&&r.timeInfo;return G?D(r.fields,[r.trackIdField,G.startField,G.endField]):[]};e.hasField=function(r,G){if(!r||!G||"string"!==typeof G)return!1;G=G.toLowerCase();for(const ca of r)if(ca&&ca.name.toLowerCase()===G)return!0;return!1};e.integerRange=ra;e.isDateField=function(r){return null!=r&&("date"===r.type||"esriFieldTypeDate"===r.type)};e.isNumberInRange=O;e.isNumericField=
U;e.isStringField=function(r){return null!=r&&("string"===r.type||"esriFieldTypeString"===r.type)};e.isValidFieldValue=function(r,G){return null===ia(r,G)};e.isValueMatchingFieldType=I;e.numericTypes=W;e.packFields=function(r,G,ca=1){if(!G||!r)return[];if(G.includes("*"))return["*"];G=D(r,G);return G.length/r.length>=ca?["*"]:G};e.populateMissingFields=F;e.rendererFields=u;e.sanitizeNullFieldValue=function(r){return null==r||"number"===typeof r&&isNaN(r)?null:r};e.singleRange=Aa;e.smallIntegerRange=
pa;e.unpackFieldNames=function(r,G){return J.isNone(G)||J.isNone(r)?[]:G.includes("*")?r.map(ca=>ca.name):G};e.validateFieldValue=ia;e.validationErrorToString=function(r,G,ca){switch(r){case m.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ca} is not in the coded domain - field: ${G.name}, domain: ${JSON.stringify(G.domain)}`;case m.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ca} is out of the range of valid values - field: ${G.name}, domain: ${JSON.stringify(G.domain)}`;case e.TypeValidationError.INVALID_TYPE:return`Value ${ca} is not a valid value for the field type - field: ${G.name}, type: ${G.type}, nullable: ${G.nullable}`;
case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ta,max:xa}=Q(G.type);return`Value ${ca} is out of range for the number type - field: ${G.name}, type: ${G.type}, value range is ${ta} to ${xa}`}}};e.visualVariableFields=N;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),function(p,e,ba,J,q,H){function m(v,w){switch(v.type){case "range":{const D=
"range"in v?v.range[1]:v.maxValue;if(+w<("range"in v?v.range[0]:v.minValue)||+w>D)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==v.codedValues||v.codedValues.every(D=>null==D||D.code!==w))return p.DomainValidationError.INVALID_CODED_VALUE}return null}(function(v){v.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";v.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError=
{}));e={key:"type",base:ba,typeMap:{range:H,"coded-value":J,inherited:q}};p.DomainBase=ba;p.CodedValueDomain=J;p.InheritedDomain=q;p.RangeDomain=H;p.fromJSON=function(v){if(!v||!v.type)return null;switch(v.type){case "range":return H.fromJSON(v);case "codedValue":return J.fromJSON(v);case "inherited":return q.fromJSON(v)}return null};p.getDomainRange=function(v){if(v&&"range"===v.type)return{min:"range"in v?v.range[0]:v.minValue,max:"range"in v?v.range[1]:v.maxValue}};p.isValidDomainValue=function(v,
w){return null===m(v,w)};p.types=e;p.validateDomainValue=m;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l){ba=new m.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});l=function(B){function n(d){d=B.call(this,d)||this;d.name=null;d.type=null;return d}p._inheritsLoose(n,B);return n}(l.JSONSupport);e.__decorate([H.property({type:String,json:{write:!0}})],l.prototype,"name",void 0);e.__decorate([v.enumeration(ba)],l.prototype,"type",void 0);return l=e.__decorate([w.subclass("esri.layers.support.Domain")],l)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports",
"./property","../../jsonMap"],function(p,e,ba){p.enumeration=function(J,q={ignoreUnknown:!0}){J=J instanceof ba.JSONMap?J:new ba.JSONMap(J,q);J={type:null!=q&&q.ignoreUnknown?J.apiValues:String,readOnly:null==q?void 0:q.readOnly,json:{type:J.jsonValues,read:null!=q&&q.readOnly?!1:{reader:J.read},write:{writer:J.write}}};void 0!==(null==q?void 0:q.default)&&(J.json.default=q.default);return e.property(J)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l,B){var n;ba=n=function(d){function f(t){t=d.call(this,t)||this;t.codedValues=null;t.type="coded-value";return t}p._inheritsLoose(f,d);var z=f.prototype;z.getName=function(t){let y=null;if(this.codedValues){const K=String(t);this.codedValues.some(L=>{String(L.code)===K&&(y=L.name);return!!y})}return y};z.clone=function(){return new n({codedValues:J.clone(this.codedValues),name:this.name})};return f}(B);e.__decorate([m.property({type:[l["default"]],json:{write:!0}})],
ba.prototype,"codedValues",void 0);e.__decorate([v.enumeration({codedValue:"coded-value"})],ba.prototype,"type",void 0);return ba=n=e.__decorate([w.subclass("esri.layers.support.CodedValueDomain")],ba)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l){var B;p.CodedValue=B=function(n){function d(f){f=n.call(this,f)||this;f.name=null;f.code=null;return f}e._inheritsLoose(d,n);d.prototype.clone=function(){return new B({name:this.name,code:this.code})};return d}(l.JSONSupport);ba.__decorate([m.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);ba.__decorate([m.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=B=ba.__decorate([w.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z){var l;ba=l=function(B){function n(d){d=B.call(this,d)||this;d.type="inherited";return d}p._inheritsLoose(n,B);n.prototype.clone=function(){return new l};return n}(Z);e.__decorate([m.enumeration({inherited:"inherited"})],ba.prototype,"type",void 0);return ba=l=e.__decorate([v.subclass("esri.layers.support.InheritedDomain")],ba)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z){var l;ba=l=function(B){function n(d){d=B.call(this,d)||this;d.maxValue=null;d.minValue=null;d.type="range";return d}p._inheritsLoose(n,B);n.prototype.clone=function(){return new l({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return n}(Z);e.__decorate([H.property({type:Number,json:{type:[Number],read:{source:"range",reader(B,n){return n.range&&n.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(B,n,d){n[d]=[this.minValue||0,B]}}}})],ba.prototype,"maxValue",void 0);e.__decorate([H.property({type:Number,json:{type:[Number],read:{source:"range",reader(B,n){return n.range&&n.range[0]}},write:{target:"range",writer(B,n,d){n[d]=[B,this.maxValue||0]}}}})],ba.prototype,"minValue",void 0);e.__decorate([m.enumeration({range:"range"})],ba.prototype,"type",void 0);return ba=l=e.__decorate([v.subclass("esri.layers.support.RangeDomain")],ba)})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/maybe ../core/promiseUtils ../geometry/SpatialReference ../geometry".split(" "),
function(p,e,ba,J,q,H){async function m(){v||(v=(async()=>{const D=await new Promise(function(ja,Z){p(["./arcadeUtils"],ja,Z)});await D.arcade.load();return{arcade:D.arcade,arcadeUtils:D,Dictionary:D.Dictionary,Feature:D.arcadeFeature}})());return v}let v;H=(D,ja,Z)=>w.create(D,ja,Z,null,["$feature","$view"]);let w=function(){function D(Z,l,B,n,d,f,z,t){this.script=Z;this.evaluate=d;this.fields=z;this._syntaxTree=n;this._arcade=l;this._arcadeDictionary=B;this._arcadeFeature=f;this._spatialReference=
t;this._referencesGeometry=l.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}D.create=async function(Z,l,B,n,d,f){const {arcade:z,Feature:t,Dictionary:y}=await m(),K=q.fromJSON(l);l=z.parseScript(Z,f);d=d.reduce((I,U)=>({...I,[U]:null}),{});let L=null;ba.isSome(n)&&(L=new y(n),L.immutable=!0,d.$config=null);n=z.scriptUsesGeometryEngine(l)&&z.enableGeometrySupport();f=z.scriptUsesFeatureSet(l)&&z.enableFeatureSetSupport();const Y=
z.scriptIsAsync(l)&&z.enableAsyncSupport();d={vars:d,spatialReference:K,useAsync:!!Y};const ka=new y;ka.immutable=!1;ka.setField("scale",0);const ea=z.compileScript(l,d);await J.all([n,f,Y]);return new D(Z,z,y,l,I=>{"$view"in I&&I.$view&&(ka.setField("scale",I.$view.scale),I.$view=ka);L&&(I.$config=L);return ea({vars:I,spatialReference:K})},new t,B,K)};var ja=D.prototype;ja.repurposeFeature=function(Z){Z.geometry&&!Z.geometry.spatialReference&&(Z.geometry.spatialReference=this._spatialReference);
this._arcadeFeature.repurposeFromGraphicLikeObject(Z.geometry,Z.attributes,{fields:this.fields});return this._arcadeFeature};ja.repurposeAdapter=function(Z){this._arcadeFeature.repurposeFromAdapter(Z,{fields:this.fields});return this._arcadeFeature};ja.createDictionary=function(){return new this._arcadeDictionary};ja.referencesMember=function(Z){return this._arcade.referencesMember(this._syntaxTree,Z)};ja.referencesFunction=function(Z){return this._arcade.referencesFunction(this._syntaxTree,Z)};ja.referencesGeometry=
function(){return this._referencesGeometry};ja.referencesScale=function(){return this._referencesScale};ja.extractFieldLiterals=function(Z){return this._arcade.extractFieldLiterals(this._syntaxTree,Z)};return D}();e.ArcadeExpression=w;e.createDictionaryExpression=(D,ja,Z,l)=>w.create(D,ja,Z,l,["$feature","$view"]);e.createLabelExpression=(D,ja,Z)=>w.create(D,ja,Z,null,["$feature"]);e.createRendererExpression=H;e.createVVExpression=H;e.default=w;e.loadArcade=m;Object.defineProperty(e,"__esModule",
{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/requestUtils".split(" "),function(p,e,ba,J,q,H,m,v,w,D,ja){async function Z(E,X){var W=v.isDataProtocol(E);const ha=v.isBlobProtocol(E);ha||W||(E=v.normalize(E));const pa={url:E,requestOptions:{...H.unwrap(X)}};let ra=v.getInterceptor(E);if(ra){E=await K(ra,pa);if(null!=E)return{data:E,getHeader:N,requestOptions:pa.requestOptions,
url:pa.url};ra.after||ra.error||(ra=null)}E=pa.url;X=pa.requestOptions;if("image"===X.responseType){if(ba("host-webworker")||ba("host-node"))throw n("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),pa);}else if(W)throw n("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+X.responseType),pa);if("head"===X.method){if(X.body)throw n("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),
pa);if(W||ha)throw n("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),pa);}await d();if(U)return U.execute(E,X);const Aa=w.createAbortController();w.onAbort(X,()=>Aa.abort());W=await ka({controller:Aa,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:ra,params:pa,redoRequest:!1,useIdentity:ia.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});ra&&ra.after&&ra.after(W);return W}function l(E){v.isBlobProtocol(E)||v.isDataProtocol(E)||
(E=v.getOrigin(E))&&-1===Z._corsServers.indexOf(E)&&Z._corsServers.push(E)}function B(E){E=v.getOrigin(E);return!E||E.endsWith(".arcgis.com")||-1!==Z._corsServers.indexOf(E)||v.isTrustedServer(E)}function n(E,X,W,ha){let pa="Error";const ra={url:W.url,requestOptions:W.requestOptions,getHeader:N,ssl:!1};if(X instanceof m)return X.details?(X.details=J.clone(X.details),X.details.url=W.url,X.details.requestOptions=W.requestOptions):X.details=ra,X;if(X){W=ha&&(r=>ha.headers.get(r));const Aa=ha&&ha.status,
Ca=X.message;Ca&&(pa=Ca);W&&(ra.getHeader=W);ra.httpStatus=(null!=X.httpCode?X.httpCode:X.code)||Aa||0;ra.subCode=X.subcode;ra.messageCode=X.messageCode;ra.messages="string"===typeof X.details?[X.details]:X.details}return w.isAbortError(X)?w.createAbortError():new m(E,pa,ra)}async function d(){ba("host-webworker")?U||(U=await new Promise(function(E,X){p(["./core/workers/request"],E,X)})):Z._abortableFetch||(Z._abortableFetch=e.fetch.bind(e))}async function f(){D.id||await new Promise(function(E,X){p(["./identity/IdentityManager"],
function(W){E(Object.freeze({__proto__:null,"default":W}))},X)})}async function z(E){const X=E.params.url,W=E.params.requestOptions,ha=E.controller.signal;var pa=W.body;let ra=null,Aa=null,Ca=null;O&&"HTMLFormElement"in e&&(pa instanceof FormData?ra=pa:pa instanceof HTMLFormElement&&(Aa=pa,ra=new FormData(Aa)));"string"===typeof pa&&(Ca=pa);E.fetchOptions={cache:W.cacheBust&&!Z._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:W.headers||{},method:"head"===W.method?"HEAD":
"GET",mode:"cors",redirect:"follow",signal:ha};if(ra||Ca)E.fetchOptions.body=ra||Ca;"anonymous"===W.authMode&&(E.useIdentity=!1);E.hasToken=!!(/token=/i.test(X)||W.query&&W.query.token||ra&&ra.get&&ra.get("token")||Aa&&Aa.elements.token);(pa=v.getOrigin(X,!0))&&!E.hasToken&&q.apiKey&&pa.endsWith(".arcgis.com")&&"js.arcgis.com"!==pa&&"jsdev.arcgis.com"!==pa&&"jsqa.arcgis.com"!==pa&&(W.query||(W.query={}),W.query.token=q.apiKey,E.hasToken=!0);if(E.useIdentity&&!E.hasToken&&!E.credentialToken&&!t(X)&&
!w.isAborted(ha)){let r;"immediate"===W.authMode?(await f(),r=await D.id.getCredential(X,{signal:ha}),E.credential=r):"no-prompt"===W.authMode?(await f(),r=await D.id.getCredential(X,{prompt:!1,signal:ha}).catch(()=>{}),E.credential=r):D.id&&(r=D.id.findCredential(X));r&&(E.credentialToken=r.token,E.useSSL=!!r.ssl)}}function t(E){return u.some(X=>X.test(E))}async function y(E){let X=E.params.url;const W=E.params.requestOptions,ha=E.fetchOptions,pa=v.isBlobProtocol(X)||v.isDataProtocol(X),ra=W.responseType||
"json",Aa=pa?0:null!=W.timeout?W.timeout:ia.timeout;var Ca=!1;if(!pa){E.useSSL&&(X=v.toHTTPS(X));W.cacheBust&&"default"===ha.cache&&(X=v.addQueryParameter(X,"request.preventCache",Date.now()));var r={...W.query};E.credentialToken&&(r.token=E.credentialToken);Ca=v.objectToQuery(r);ba("esri-url-encodes-apostrophe")&&(Ca=Ca.replace(/'/g,"%27"));const b=X.length+1+Ca.length;Ca="post"===W.method||!!W.body||b>ia.maxUrlLength;const k=W.useProxy||!!v.getProxyRule(X);if(k){const R=v.getProxyUrl(X);var G=R.path;
!Ca&&G.length+1+b>ia.maxUrlLength&&(Ca=!0);R.query&&(r={...R.query,...r})}if("HEAD"===ha.method&&(Ca||k)){if(Ca){if(b>ia.maxUrlLength)throw n("request:invalid-parameters",Error("URL exceeds maximum length"),E.params);throw n("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),E.params);}if(k)throw n("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),E.params);}Ca?(ha.method="POST",W.body?X=v.addQueryParameters(X,r):(ha.body=v.objectToQuery(r),
ha.headers["Content-Type"]="application/x-www-form-urlencoded")):X=v.addQueryParameters(X,r);k&&(E.useProxy=!0,X=`${G}?${X}`);r.token&&O&&ha.body instanceof FormData&&(G=ha.body,G.set?G.set("token",r.token):G.append("token",r.token));W.hasOwnProperty("withCredentials")?E.withCredentials=W.withCredentials:v.isTrustedServer(X)?E.withCredentials=!0:D.id&&(r=D.id.findServerInfo(X))&&r.webTierAuth&&(E.withCredentials=!0);E.withCredentials&&(ha.credentials="include")}r=0;let ca=!1;0<Aa&&(r=setTimeout(()=>
{ca=!0;E.controller.abort()},Aa));let ta,xa;try{if("image"!==W.responseType||"default"!==ha.cache||"GET"!==ha.method||Ca||L(W.headers)||!pa&&!E.useProxy&&ia.proxyUrl&&!B(X)){if(ta=await Z._abortableFetch(X,ha),E.useProxy||l(X),ta.ok&&"HEAD"!==ha.method){switch(ra){case "array-buffer":xa=await ta.arrayBuffer();break;case "blob":case "image":xa=await ta.blob();break;default:xa=await ta.text()}r&&(clearTimeout(r),r=0);if("json"===ra||"xml"===ra||"document"===ra)if(xa)switch(ra){case "json":xa=JSON.parse(xa);
break;case "xml":xa=Y(xa,"application/xml");break;case "document":xa=Y(xa,"text/html")}else xa=null;if(xa){if("array-buffer"===ra||"blob"===ra){const b=ta.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(b)&&750>=xa["blob"===ra?"size":"byteLength"])try{const k=await (new Response(xa)).json();k.error&&(xa=k)}catch{}}"image"===ra&&xa instanceof Blob&&(xa=await I(URL.createObjectURL(xa),E,!0))}}}else xa=await I(X,E)}catch(b){if("AbortError"===b.name){if(ca)throw Error("Timeout exceeded");
throw w.createAbortError("Request canceled");}if(!ta&&b instanceof TypeError&&ia.proxyUrl&&!W.body&&"post"!==W.method&&"head"!==W.method&&!E.useProxy)E.redoRequest=!0,v.addProxyRule({proxyUrl:ia.proxyUrl,urlPrefix:v.removeFile(v.urlToObject(X).path)});else throw b;}finally{r&&clearTimeout(r)}return[ta,xa]}async function K(E,X){if(null!=E.responseData)return E.responseData;E.headers&&(X.requestOptions.headers={...X.requestOptions.headers,...E.headers});E.query&&(X.requestOptions.query={...X.requestOptions.query,
...E.query});if(E.before){let W,ha;try{ha=await E.before(X)}catch(pa){W=n("request:interceptor",pa,X)}if(ha instanceof Error||ha instanceof m)W=n("request:interceptor",ha,X);if(W)throw E.error&&E.error(W),W;return ha}}function L(E){if(E)for(const X of Object.getOwnPropertyNames(E))if(E[X])return!0;return!1}function Y(E,X){let W;try{W=(new DOMParser).parseFromString(E,X)}catch{}if(!W||W.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return W}async function ka(E){await z(E);
let X;try{do[X,W]=await y(E);while(!await ea(E,X,W))}catch(ra){var W=n("request:server",ra,E.params,X);W.details.ssl=E.useSSL;E.interceptor&&E.interceptor.error&&E.interceptor.error(W);throw W;}var ha=E.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(ha)&&!E.hasToken&&!E.credentialToken&&W&&W.user&&W.user.username&&!v.isTrustedServer(ha)&&(ha=v.getOrigin(ha,!0))&&ia.trustedServers.push(ha);if((ha=E.credential)&&D.id){var pa=D.id.findServerInfo(ha.server);if(pa=pa&&pa.owningSystemUrl)pa=
pa.replace(/\/?$/,"/sharing"),(ha=D.id.findCredential(pa,ha.userId))&&-1===D.id._getIdenticalSvcIdx(pa,ha)&&ha.resources.unshift(pa)}return{data:W,getHeader:X?ra=>X.headers.get(ra):N,requestOptions:E.params.requestOptions,ssl:E.useSSL,url:E.params.url}}async function ea(E,X,W){var ha;if(E.redoRequest)return E.redoRequest=!1;if(!X)return!0;if(!X.ok)throw Error(`Unable to load ${X.url} status: ${X.status}`);let pa;W&&W.error&&(pa=J.mixin(Error(),W.error));let ra,Aa,Ca;pa&&(ra=Number(pa.code),Aa=pa.hasOwnProperty("subcode")?
Number(pa.subcode):null,Ca=(Ca=pa.messageCode)&&Ca.toUpperCase());X=E.params.requestOptions.authMode;W=String(null==(ha=E.params.requestOptions.query)?void 0:ha.token);if(403===ra&&(4===Aa||pa.message&&-1<pa.message.toLowerCase().indexOf("ssl")&&-1===pa.message.toLowerCase().indexOf("permission"))){if(!E.useSSL)return E.useSSL=!0,!1}else if(E.useIdentity&&("no-prompt"!==X||498===ra)&&-1!==Q.indexOf(ra)&&!t(E.params.url)&&!W.startsWith("AAPK")&&(403!==ra||-1===F.indexOf(Ca)&&(null==Aa||2===Aa&&E.credentialToken))){await f();
try{const r=await D.id.getCredential(E.params.url,{error:n("request:server",pa,E.params),prompt:"no-prompt"!==X,signal:E.controller.signal,token:E.credentialToken});E.credential=r;E.credentialToken=r.token;E.useSSL=E.useSSL||r.ssl;return!1}catch(r){if("no-prompt"===X)return E.credential=null,E.credentialToken=null,!1;pa=r}}if(pa)throw pa;return!0}function I(E,X,W=!1){const ha=X.controller.signal,pa=new Image;pa.crossOrigin=X.withCredentials?"use-credentials":"anonymous";pa.alt="";pa.src=E;return ja.loadImageAsync(pa,
E,W,ha)}let U;const ia=q.request,O="FormData"in e,Q=[499,498,403,401],F=["COM_0056","COM_0057","SB_0008"],u=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],N=()=>null;Z._abortableFetch=null;Z._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return Z})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(p,e,ba,J){function q(){try{return new DOMException("Aborted","AbortError")}catch{const H=
Error();H.name="AbortError";return H}}p.loadImageAsync=function(H,m,v=!1,w){return J.create((D,ja)=>{if(J.isAborted(w))ja(q());else{var Z=()=>{n();ja(Error(`Unable to load ${m}`))},l=()=>{const d=H;n();D(d)},B=()=>{if(H){var d=H;n();d.src="";ja(q())}},n=()=>{e("esri-image-decode")||(H.removeEventListener("error",Z),H.removeEventListener("load",l));H=l=Z=null;ba.isSome(w)&&w.removeEventListener("abort",B);B=null;v&&URL.revokeObjectURL(m)};ba.isSome(w)&&w.addEventListener("abort",B);e("esri-image-decode")?
H.decode().then(l,Z):(H.addEventListener("error",Z),H.addEventListener("load",l))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",
esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});p.kebabDict=e;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(p,e,ba,J,q,H,m){function v(g,x){return g?x?4:3:x?3:2}function w(g,x,M,P){if(g){if(M)return x&&
P?b:ta;if(x&&P)return xa}else if(x&&P)return ta;return ca}function D({scale:g,translate:x},M){return Math.round((M-x[0])/g[0])}function ja({scale:g,translate:x},M){return Math.round((x[1]-M)/g[1])}function Z({scale:g,translate:x},M){return M*g[0]+x[0]}function l({scale:g,translate:x},M){return x[1]-M*g[1]}function B(g){g=g.coords;return{x:g[0],y:g[1]}}function n(g,x){g.coords[0]=x.x;g.coords[1]=x.y;return g}function d(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function f(g,x){g.coords[0]=x.x;g.coords[1]=
x.y;g.coords[2]=x.z;return g}function z(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function t(g,x){g.coords[0]=x.x;g.coords[1]=x.y;g.coords[2]=x.m;return g}function y(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function K(g,x){g.coords[0]=x.x;g.coords[1]=x.y;g.coords[2]=x.z;g.coords[3]=x.m;return g}function L(g,x){return g&&x?K:g?f:x?t:n}function Y(g,x,M,P,aa){M=L(M,P);for(const V of x){const {geometry:la,attributes:ma}=V;let na;la&&(na=M(new m,la));g.push(new q(na,ma,null,ma[aa]))}return g}
function ka(g,x,M,P){for(const aa of x){const {geometry:V,attributes:la}=aa;let ma;V&&(ma=ea(V,M,P));g.push({attributes:la,geometry:ma})}return g}function ea(g,x,M){if(!g)return null;const P=v(x,M),aa=[];for(let V=0;V<g.coords.length;V+=P){const la=[];for(let ma=0;ma<P;ma++)la.push(g.coords[V+ma]);aa.push(la)}return x?M?{points:aa,hasZ:x,hasM:M}:{points:aa,hasZ:x}:M?{points:aa,hasM:M}:{points:aa}}function I(g,x,M,P,aa){M=v(M,P);for(const V of x){x=V.geometry;P=V.attributes;let la;x&&(la=U(new m,x,
M));g.push(new q(la,P,null,P[aa]))}return g}function U(g,x,M=v(x.hasZ,x.hasM)){g.lengths[0]=x.points.length;const P=g.coords;let aa=0;for(const V of x.points)for(x=0;x<M;x++)P[aa++]=V[x];return g}function ia(g,x,M){if(!g)return null;const P=v(x,M),{coords:aa,lengths:V}=g;g=[];let la=0;for(const ma of V){const na=[];for(let wa=0;wa<ma;wa++){const ua=[];for(let ya=0;ya<P;ya++)ua.push(aa[la++]);na.push(ua)}g.push(na)}return x?M?{paths:g,hasZ:x,hasM:M}:{paths:g,hasZ:x}:M?{paths:g,hasM:M}:{paths:g}}function O(g,
x,M,P,aa){M=v(M,P);for(const V of x){x=V.geometry;P=V.attributes;let la;x&&(la=Q(new m,x,M));g.push(new q(la,P,null,P[aa]))}return g}function Q(g,x,M=v(x.hasZ,x.hasM)){const {lengths:P,coords:aa}=g;let V=0;for(const la of x.paths){for(const ma of la)for(x=0;x<M;x++)aa[V++]=ma[x];P.push(la.length)}return g}function F(g,x,M){if(!g)return null;const P=v(x,M),{coords:aa,lengths:V}=g;g=[];let la=0;for(const ma of V){const na=[];for(let wa=0;wa<ma;wa++){const ua=[];for(let ya=0;ya<P;ya++)ua.push(aa[la++]);
na.push(ua)}g.push(na)}return x?M?{rings:g,hasZ:x,hasM:M}:{rings:g,hasZ:x}:M?{rings:g,hasM:M}:{rings:g}}function u(g,x,M,P,aa){for(const V of x){x=V.geometry;const la=V.centroid,ma=V.attributes;let na;x&&(na=N(new m,x,M,P));la?g.push(new q(na,ma,n(new m,la),ma[aa])):g.push(new q(na,ma,null,ma[aa]))}return g}function N(g,x,M=x.hasZ,P=x.hasM){E(g,x.rings,M,P);return g}function E(g,x,M,P){M=v(M,P);const {lengths:aa,coords:V}=g;P=0;aa.length=V.length=0;for(const la of x){for(const ma of la)for(x=0;x<
M;x++)V[P++]=ma[x];aa.push(la.length)}return g}function X(g,x,M,P,aa,V){g.length=0;if(!M){for(const la of x)g.push(new q(null,la.attributes,null,la.attributes[V]));return g}switch(M){case "esriGeometryPoint":return Y(g,x,P,aa,V);case "esriGeometryMultipoint":return I(g,x,P,aa,V);case "esriGeometryPolyline":return O(g,x,P,aa,V);case "esriGeometryPolygon":return u(g,x,P,aa,V);default:r.error("convertToFeatureSet:unknown-geometry",new ba(`Unable to parse unknown geometry type '${M}'`)),g.length=0}return g}
function W(g,x,M,P){g=g&&("coords"in g?g:g.geometry);if(!g)return null;switch(x){case "esriGeometryPoint":return x=B,M&&P?x=y:M?x=d:P&&(x=z),x(g);case "esriGeometryMultipoint":return ea(g,M,P);case "esriGeometryPolyline":return ia(g,M,P);case "esriGeometryPolygon":return F(g,M,P);default:r.error("convertToGeometry:unknown-geometry",new ba(`Unable to parse unknown geometry type '${x}'`))}}function ha(g,x,M,P,aa){g.length=0;switch(M){case "esriGeometryPoint":var V=B;P&&aa?V=y:P?V=d:aa&&(V=z);for(var la of x){const {geometry:ma,
attributes:na}=la;P=ma?V(ma):null;g.push({attributes:na,geometry:P})}break;case "esriGeometryMultipoint":return ka(g,x,P,aa);case "esriGeometryPolyline":for(const ma of x){const {geometry:na,attributes:wa}=ma;let ua;na&&(ua=ia(na,P,aa));g.push({attributes:wa,geometry:ua})}break;case "esriGeometryPolygon":for(V of x){const {geometry:ma,attributes:na,centroid:wa}=V;let ua;ma&&(ua=F(ma,P,aa));wa?(la=B(wa),g.push({attributes:na,centroid:la,geometry:ua})):g.push({attributes:na,geometry:ua})}break;default:r.error("convertToFeatureSet:unknown-geometry",
new ba(`Unable to parse unknown geometry type '${M}'`))}return g}function pa(g,x,M,P,aa,V,la=M,ma=P){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!x||!x.coords.length)return null;aa=G[aa];const {coords:na,lengths:wa}=x;x=v(M,P);const ua=v(M&&la,P&&ma);M=w(M,P,la,ma);if(!wa.length)return M(g.coords,na,0,0,D(V,na[0]),ja(V,na[1])),g.lengths.length&&(g.lengths.length=0),g.coords.length=x,g;let ya,Ba=0,Da,Ga=0;for(const Ha of wa){if(Ha<aa)continue;let Ka=0;Da=Ga;ma=P=
D(V,na[Ba]);ya=la=ja(V,na[Ba+1]);M(g.coords,na,Da,Ba,ma,ya);Ka++;Ba+=x;Da+=ua;for(let Ia=1;Ia<Ha;Ia++,Ba+=x)if(ma=D(V,na[Ba]),ya=ja(V,na[Ba+1]),ma!==P||ya!==la)M(g.coords,na,Da,Ba,ma-P,ya-la),Da+=ua,Ka++,P=ma,la=ya;Ka>=aa&&(g.lengths.push(Ka),Ga=Da)}g.coords.length=Ga;return g.coords.length?g:null}function ra(g,x,M,P,aa,V,la){let ma=P,na=0;for(let ua=V+M;ua<la;ua+=M){{var wa=x[ua];const ya=x[ua+1],Ba=x[la],Da=x[la+1];let Ga=x[V],Ha=x[V+1],Ka=Ba-Ga,Ia=Da-Ha;if(0!==Ka||0!==Ia){const Ja=((wa-Ga)*Ka+
(ya-Ha)*Ia)/(Ka*Ka+Ia*Ia);1<Ja?(Ga=Ba,Ha=Da):0<Ja&&(Ga+=Ka*Ja,Ha+=Ia*Ja)}Ka=wa-Ga;Ia=ya-Ha;wa=Ka*Ka+Ia*Ia}wa>ma&&(na=ua,ma=wa)}ma>P&&(na-V>M&&ra(g,x,M,P,aa,V,na),aa(g,x,g.length,na,x[na],x[na+1]),la-na>M&&ra(g,x,M,P,aa,na,la))}function Aa(g,x,M,P,aa){const {coords:V,lengths:la}=x,ma=M?P?b:ta:P?ta:ca;M=v(M,P);if(!V.length)return g!==x&&(g.lengths.length=0,g.coords.length=0),g;if(!la.length)return ma(g.coords,V,0,0,Z(aa,V[0]),l(aa,V[1])),g!==x&&(g.lengths.length=0,g.coords.length=M),g;const [na,wa]=
aa.scale;P=0;for(let ua=0;ua<la.length;ua++){const ya=la[ua];g.lengths[ua]=ya;let Ba=Z(aa,V[P]),Da=l(aa,V[P+1]);ma(g.coords,V,P,P,Ba,Da);P+=M;for(let Ga=1;Ga<ya;Ga++,P+=M)Ba+=V[P]*na,Da-=V[P+1]*wa,ma(g.coords,V,P,P,Ba,Da)}g!==x&&(g.lengths.length=la.length,g.coords.length=V.length);return g}function Ca(g,x,M,P){let aa=0,V=g[P*x],la=g[P*(x+1)];for(let ma=1;ma<M;ma++){const na=V+g[P*(x+ma)],wa=la+g[P*(x+ma)+1],ua=(na-V)*(wa+la);V=na;la=wa;aa+=ua}return.5*aa}const r=e.getLogger("esri.tasks.support.optimizedFeatureSet"),
G={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ca=(g,x,M,P,aa,V)=>{g[M]=aa;g[M+1]=V},ta=(g,x,M,P,aa,V)=>{g[M]=aa;g[M+1]=V;g[M+2]=x[P+2]},xa=(g,x,M,P,aa,V)=>{g[M]=aa;g[M+1]=V;g[M+2]=x[P+3]},b=(g,x,M,P,aa,V)=>{g[M]=aa;g[M+1]=V;g[M+2]=x[P+2];g[M+3]=x[P+3]},k=[],R=[];p.convertFromFeature=function(g,x,M,P,aa){k[0]=g;[g]=X(R,k,x,M,P,aa);k.length=R.length=0;return g};p.convertFromFeatureSet=function(g,x){const M=new H,{hasM:P,hasZ:aa,features:V,objectIdFieldName:la,
spatialReference:ma,geometryType:na,exceededTransferLimit:wa,transform:ua,fields:ya}=g;ya&&(M.fields=ya);M.geometryType=na;M.objectIdFieldName=la||x;M.spatialReference=ma;if(!M.objectIdFieldName)return r.error(new ba("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;V&&X(M.features,V,na,aa,P,M.objectIdFieldName);wa&&(M.exceededTransferLimit=wa);P&&(M.hasM=P);aa&&(M.hasZ=aa);ua&&(M.transform=ua);return M};p.convertFromFeatures=X;p.convertFromGeometry=function(g,x,M){if(!g)return null;
const P=new m;"hasZ"in g&&null==x&&(x=g.hasZ);"hasM"in g&&null==M&&(M=g.hasM);if(J.isPoint(g))return L(null!=x?x:null!=g.z,null!=M?M:null!=g.m)(P,g);if(J.isPolygon(g))return N(P,g,x,M);if(J.isPolyline(g))return Q(P,g,v(x,M));if(J.isMultipoint(g))return U(P,g,v(x,M));r.error("convertFromGeometry:unknown-geometry",new ba(`Unable to parse unknown geometry type '${g}'`))};p.convertFromGraphics=function(g,x,M,P,aa,V){const la=g.length;switch(M){case "esriGeometryPoint":Y(g,x,P,aa,V);break;case "esriGeometryMultipoint":I(g,
x,P,aa,V);break;case "esriGeometryPolyline":O(g,x,P,aa,V);break;case "esriGeometryPolygon":u(g,x,P,aa,V);break;default:r.error("convertToFeatureSet:unknown-geometry",new ba(`Unable to parse unknown geometry type '${M}'`))}for(P=0;P<x.length;P++)g[P+la].geometryType=M,g[P+la].insertAfter=x[P].insertAfter,g[P+la].groupId=x[P].groupId;return g};p.convertFromMultipoint=U;p.convertFromMultipointFeatures=I;p.convertFromNestedArray=E;p.convertFromPoint=function(g,x,M=L(null!=x.z,null!=x.m)){return M(g,x)};
p.convertFromPointFeatures=Y;p.convertFromPolygon=N;p.convertFromPolyline=Q;p.convertFromPolylineFeatures=O;p.convertToFeature=function(g,x,M,P){R[0]=g;ha(k,R,x,M,P);g=k[0];k.length=R.length=0;return g};p.convertToFeatureSet=function(g){const {objectIdFieldName:x,spatialReference:M,transform:P,fields:aa,hasM:V,hasZ:la,features:ma,geometryType:na,exceededTransferLimit:wa,uniqueIdField:ua,queryGeometry:ya,queryGeometryType:Ba}=g;g=ha([],ma,na,la,V);const Da=W(ya,Ba,!1,!1);g={features:g,fields:aa,geometryType:na,
objectIdFieldName:x,spatialReference:M,uniqueIdField:ua,queryGeometry:Da};P&&(g.transform=P);wa&&(g.exceededTransferLimit=wa);V&&(g.hasM=V);la&&(g.hasZ=la);return g};p.convertToFeatures=ha;p.convertToGeometry=W;p.convertToMultipoint=ea;p.convertToMultipointFeatures=ka;p.convertToPoint=function(g,x,M){return g?x?M?y(g):d(g):M?z(g):B(g):null};p.convertToPolygon=F;p.convertToPolyline=ia;p.deltaDecodeGeometry=function(g,x){const M=g.clone(),P=g.coords;g=g.lengths;let aa=0;for(let ma=0;ma<g.length;ma++){const na=
g[ma];var V=P[x*aa],la=P[x*aa+1];for(let wa=1;wa<na;wa++)V+=P[x*(aa+wa)],la+=P[x*(aa+wa)+1],M.coords[x*(aa+wa)]=V,M.coords[x*(aa+wa)+1]=la;aa+=na}return M};p.deltaEncodeGeometry=function(g,x){const M=g.clone(),P=g.coords;g=g.lengths;let aa=0;for(let la=0;la<g.length;la++){const ma=g[la];let na=P[x*aa];var V=P[x*aa+1];for(let wa=1;wa<ma;wa++){const ua=P[x*(aa+wa)],ya=P[x*(aa+wa)+1];V=ya-V;M.coords[x*(aa+wa)]=ua-na;M.coords[x*(aa+wa)+1]=V;na=ua;V=ya}aa+=ma}return M};p.generalizeOptimizedGeometry=function(g,
x,M,P,aa,V,la=M,ma=P){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!x||!x.coords.length)return null;aa=G[aa];const {coords:na,lengths:wa}=x;x=v(M,P);const ua=v(M&&la,P&&ma);M=w(M,P,la,ma);if(!wa.length)return M(g.coords,na,0,0,na[0],na[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=x,g;P=0;V*=V;for(const ya of wa){if(ya<aa){P+=ya*x;continue}la=g.coords.length/ua;ma=P;const Ba=P+(ya-1)*x;M(g.coords,na,g.coords.length,ma,na[ma],na[ma+1]);ra(g.coords,na,
x,V,M,ma,Ba);M(g.coords,na,g.coords.length,Ba,na[Ba],na[Ba+1]);ma=g.coords.length/ua-la;ma>=aa?g.lengths.push(ma):g.coords.length=la*ua;P+=ya*x}return g.coords.length?g:null};p.getBoundsOptimizedGeometry=function(g,x,M,P){if(!x||!x.coords||!x.coords.length)return null;M=v(M,P);let aa=P=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY;if(x&&x.coords){x=x.coords;for(let ma=0;ma<x.length;ma+=M){const na=x[ma],wa=x[ma+1];P=Math.min(P,na);V=Math.max(V,na);aa=Math.min(aa,
wa);la=Math.max(la,wa)}}g[0]=P;g[1]=aa;g[2]=V;g[3]=la;return g};p.getQuantizedArea=function(g,x){const {coords:M,lengths:P}=g;let aa=g=0;for(let V=0;V<P.length;V++)aa+=Ca(M,g,P[V],x),g+=V;return Math.abs(aa)};p.getQuantizedBoundsOptimizedGeometry=function(g,x,M,P){M=v(M,P);const {lengths:aa,coords:V}=x;P=x=Number.POSITIVE_INFINITY;let la=Number.NEGATIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,na=0;for(const wa of aa){let ua=V[na],ya=V[na+1];x=Math.min(ua,x);P=Math.min(ya,P);la=Math.max(ua,la);ma=Math.max(ya,
ma);na+=M;for(let Ba=1;Ba<wa;Ba++,na+=M){const Da=V[na],Ga=V[na+1];ua+=Da;ya+=Ga;0>Da&&(x=Math.min(x,ua));0<Da&&(la=Math.max(la,ua));0>Ga?P=Math.min(P,ya):0<Ga&&(ma=Math.max(ma,ya))}}g[0]=x;g[1]=P;g[2]=la;g[3]=ma;return g};p.getSignedQuantizedRingArea=Ca;p.quantizeOptimizedFeatureSet=function(g,x){const {geometryType:M,features:P,hasM:aa,hasZ:V}=x;if(!g)return x;for(let la=0;la<P.length;la++){const ma=P[la],na=ma.weakClone();na.geometry=new m;pa(na.geometry,ma.geometry,aa,V,M,g);ma.centroid&&(na.centroid=
new m,pa(na.centroid,ma.centroid,aa,V,"esriGeometryPoint",g));P[la]=na}x.transform=g;return x};p.quantizeOptimizedGeometry=pa;p.quantizeX=D;p.quantizeY=ja;p.removeCollinearVectices=function(g,x,M,P,aa){if(!x||!x.coords||!x.coords.length)return null;M=G[M];const {coords:V,lengths:la}=x;x=w(P,aa,P,aa);P=v(P,aa);let ma=aa=0,na=0,wa=0;for(const Ba of la){ma=wa;x(g.coords,V,ma,aa,V[aa],V[aa+1]);aa+=P;var ua=V[aa];let Da=V[aa+1],Ga=ua,Ha=Da;var ya=Da/ua;ma+=P;x(g.coords,V,ma,aa,Ga,Ha);aa+=P;for(let Ka=
2;Ka<Ba;Ka++){ua=V[aa];Da=V[aa+1];const Ia=Da/ua,Ja=ya===Ia||!isFinite(ya)&&!isFinite(Ia);ya=Ja&&isFinite(Ia)?0<=ya&&0<=Ia||0>=ya&&0>=Ia:0<=Ha&&0<=Da||0>=Ha&&0>=Da;Ja&&ya?(Ga+=ua,Ha+=Da):(Ga=ua,Ha=Da,ma+=P);x(g.coords,V,ma,aa,Ga,Ha);aa+=P;ya=Ia}ma+=P;ua=(ma-wa)/P;ua>=M&&(g.lengths[na]=ua,wa=ma,na++)}g.coords.length>wa&&(g.coords.length=wa);g.lengths.length>na&&(g.lengths.length=na);return g.coords.length&&g.lengths.length?g:null};p.removeZMValues=function(g,x,M,P,aa,V){const la=v(M,P);M=w(M,P,aa,
V);P=x.coords;g.coords.length=0;g.lengths.length=0;g.lengths.push(...x.lengths);for(x=0;x<P.length;x+=la)M(g.coords,P,g.coords.length,x,P[x],P[x+1]);return g};p.unquantizeOptimizedFeatureSet=function(g){const {transform:x,features:M,hasM:P,hasZ:aa}=g;if(!x)return g;for(const V of M)V.geometry&&Aa(V.geometry,V.geometry,P,aa,x),V.centroid&&Aa(V.centroid,V.centroid,P,aa,x);g.transform=null;return g};p.unquantizeOptimizedGeometry=Aa;p.unquantizeX=Z;p.unquantizeY=l;Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(ba=null,J={},q,H){this.displayId=0;this.geohashIndexed=!1;this.geohashY=this.geohashX=0;this.geometry=ba;J&&(this.attributes=J);q&&(this.centroid=q);null!=H&&(this.objectId=H)}e.prototype.weakClone=function(){const ba=new e(this.geometry,this.attributes,this.centroid,this.objectId);ba.displayId=this.displayId;ba.geohashIndexed=this.geohashIndexed;
ba.geohashX=this.geohashX;ba.geohashY=this.geohashY;return ba};p._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=
[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const e=new p;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=
this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(J=[],q=[],H=!1){this.lengths=null!=J?J:[];this.coords=null!=q?q:[];this.hasIndeterminateRingOrder=H}var ba=e.prototype;ba.forEachVertex=function(J){let q=
0;this.lengths.length||J(this.coords[0],this.coords[1]);for(let H=0;H<this.lengths.length;H++){const m=this.lengths[H];for(let v=0;v<m;v++)J(this.coords[2*(v+q)],this.coords[2*(v+q)+1]);q+=m}};ba.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return e}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(ba){this.fields=
ba;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(ba){var J=[];for(const q of ba)if(ba=q&&q.name){const H=ba.toLowerCase().trim();this._fieldsMap.set(ba,q);this._fieldsMap.set(H,q);J.push(H);if("date"===q.type||"esriFieldTypeDate"===q.type)this.dateFields.push(q),this._dateFieldsSet.add(q)}J.sort();this.uid=J.join(",")}}var e=p.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(ba){return null!=this.get(ba)};e.get=function(ba){return null!=ba?this._fieldsMap.get(ba)||
this._fieldsMap.get(ba.toLowerCase().trim()):void 0};e.isDateField=function(ba){return this._dateFieldsSet.has(this.get(ba))};e.normalizeFieldName=function(ba){if(ba=this.get(ba))return ba.name};return p}()})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json".split(" "),function(p,e,ba,J,q,
H){function m(B,n){if(!n)return null;if("x"in n){var d={x:0,y:0};[d.x,d.y]=B(n.x,n.y,D);null!=n.z&&(d.z=n.z);null!=n.m&&(d.m=n.m);return d}if("xmin"in n)return d={xmin:0,ymin:0,xmax:0,ymax:0},[d.xmin,d.ymin]=B(n.xmin,n.ymin,D),[d.xmax,d.ymax]=B(n.xmax,n.ymax,D),n.hasZ&&(d.zmin=n.zmin,d.zmax=n.zmax,d.hasZ=!0),n.hasM&&(d.mmin=n.mmin,d.mmax=n.mmax,d.hasM=!0),d;if("rings"in n)return{rings:v(n.rings,B),hasM:n.hasM,hasZ:n.hasZ};if("paths"in n)return{paths:v(n.paths,B),hasM:n.hasM,hasZ:n.hasZ};if("points"in
n)return{points:w(n.points,B),hasM:n.hasM,hasZ:n.hasZ}}function v(B,n){const d=[];for(const f of B)d.push(w(f,n));return d}function w(B,n){const d=[];for(const f of B)B=n(f[0],f[1],[0,0]),d.push(B),2<f.length&&B.push(f[2]),3<f.length&&B.push(f[3]);return d}const D=[0,0],ja=m.bind(null,J.lngLatToXY),Z=m.bind(null,J.xyToLngLat),l=new (function(){function B(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var n=B.prototype;n.push=async function(d,f,z){d&&d.length&&f&&z&&ba.equals(f,
z);const t={geometries:d,inSpatialReference:f,outSpatialReference:z,resolve:null};this._jobs.push(t);return e.create(y=>{t.resolve=y;null===this._timer&&(this._timer=setTimeout(this._process,10))})};n._process=function(){this._timer=null;const d=this._jobs.shift();if(d){var {geometries:f,inSpatialReference:z,outSpatialReference:t,resolve:y}=d;J.canProject(z,t)?ba.isWebMercator(t)?y(f.map(ja)):y(f.map(Z)):y(q.projectMany(H.jsonAdapter,f,z,t,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return B}());p.checkProjectionSupport=async function(B,n){n&&(B=Array.isArray(B)?B.map(d=>{var f;return null==(f=d.geometry)?void 0:f.spatialReference}):[B],await q.initializeProjection(B.map(d=>({source:d,dest:n}))))};p.project=function(B,n,d){if(!B)return B;d||(d=n,n=B.spatialReference);return ba.isValid(n)&&ba.isValid(d)&&!ba.equals(n,d)?J.canProject(n,d)?ba.isWebMercator(d)?ja(B):Z(B):q.projectMany(H.jsonAdapter,[B],n,d,null)[0]:B};p.projectMany=async function(B,n,d){return l.push(B,n,
d)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l,B,n,d,f,z,t,y,K,L,Y){function ka(){return!!Ga&&y.isLoaded()}function ea(S){J.isNone(Ka)&&(Ka=H.all([y.load(),(new Promise(function(da,fa){p(["../chunks/geometryEngineBase"],da,fa)})).then(function(da){return da.geometryEngineBase}),new Promise(function(da,fa){p(["./geometryAdapters/hydrated"],da,fa)})]));return Ka.then(([,da,{hydratedAdapter:fa}])=>{H.throwIfAborted(S);Ha=fa;Ga=da.default;Ga._enableProjection(y.pe)})}function I(S,da,fa,oa,za=null){if(J.isNone(fa)||
J.isNone(oa))return da;if(ia(fa,oa,za))return da.map(Ea=>O(Ea,fa,oa));if(J.isNone(za)){const Ea=Y.cacheKey(fa,oa);void 0!==Ia[Ea]?za=Ia[Ea]:(za=U(fa,oa,null),J.isNone(za)&&(za=new Y),Ia[Ea]=za)}if(J.isNone(Ga))throw new Ja;return Ga._project(S,da,fa,oa,za)}function U(S,da,fa=null){if(J.isNone(Ga))throw new Ja;if(J.isNone(S)||J.isNone(da))return null;S=Ga._getTransformation(Ha,S,da,fa,null==fa?void 0:fa.spatialReference);return null!==S?Y.fromGE(S):null}function ia(S,da,fa){return fa?!1:m.equals(S,
da)?!0:m.isValid(S)&&m.isValid(da)&&!!ya(S,da,eb)}function O(S,da,fa){if(!S)return S;if("x"in S){var oa=new w;return Q(S,da,oa,fa)?oa:null}return"xmin"in S?(oa=new D,E(S,da,oa,fa)?oa:null):"rings"in S?(oa=new Z,N(S,da,oa,fa)?oa:null):"paths"in S?(oa=new l,u(S,da,oa,fa)?oa:null):"points"in S?(oa=new ja,F(S,da,oa,fa)?oa:null):null}function Q(S,da,fa,oa,za=0){Ra[0]=S.x;Ra[1]=S.y;const Ea=S.z;Ra[2]=void 0!==Ea?Ea:za;if(!pa(Ra,da,0,Ra,oa,0,1))return!1;fa.x=Ra[0];fa.y=Ra[1];fa.spatialReference=oa;void 0===
Ea?(fa.z=void 0,fa.hasZ=!1):(fa.z=Ra[2],fa.hasZ=!0);void 0===S.m?(fa.m=void 0,fa.hasM=!1):(fa.m=S.m,fa.hasM=!0);return!0}function F(S,da,fa,oa,za=0){const {points:Ea,hasZ:Na,hasM:Pa}=S;S=[];const Za=Ea.length,Ya=[];for(var Va of Ea)Ya.push(Va[0],Va[1],Na?Va[2]:za);if(!pa(Ya,da,0,Ya,oa,0,Za))return!1;for(da=0;da<Za;++da){za=3*da;Va=Ya[za];const gb=Ya[za+1];Na&&Pa?S.push([Va,gb,Ya[za+2],Ea[da][3]]):Na?S.push([Va,gb,Ya[za+2]]):Pa?S.push([Va,gb,Ea[da][2]]):S.push([Va,gb])}fa.points=S;fa.spatialReference=
oa;fa.hasZ=Na;fa.hasM=Pa;return!0}function u(S,da,fa,oa,za=0){const {paths:Ea,hasZ:Na,hasM:Pa}=S;S=[];if(!ra(Ea,Na,Pa,da,S,oa,za))return!1;fa.paths=S;fa.spatialReference=oa;fa.hasZ=Na;fa.hasM=Pa;return!0}function N(S,da,fa,oa,za=0){const {rings:Ea,hasZ:Na,hasM:Pa}=S;S=[];if(!ra(Ea,Na,Pa,da,S,oa,za))return!1;fa.rings=S;fa.spatialReference=oa;fa.hasZ=Na;fa.hasM=Pa;return!0}function E(S,da,fa,oa,za=0){const {xmin:Ea,ymin:Na,xmax:Pa,ymax:Za,hasZ:Ya,hasM:Va}=S;if(!X(Ea,Na,Ya?S.zmin:za,da,Ra,oa))return!1;
fa.xmin=Ra[0];fa.ymin=Ra[1];Ya&&(fa.zmin=Ra[2]);if(!X(Pa,Za,Ya?S.zmax:za,da,Ra,oa))return!1;fa.xmax=Ra[0];fa.ymax=Ra[1];Ya&&(fa.zmax=Ra[2]);Va&&(fa.mmin=S.mmin,fa.mmax=S.mmax);fa.spatialReference=oa;return!0}function X(S,da,fa,oa,za,Ea){Ma[0]=S;Ma[1]=da;Ma[2]=fa;return pa(Ma,oa,0,za,Ea,0,1)}function W(S,da,fa,oa){if(J.isNone(da)||J.isNone(oa)||2>S.length)return!1;2===S.length&&(Ma[0]=S[0],Ma[1]=S[1],Ma[2]=0,S=Ma);return pa(S,da,0,fa,oa,0,1)}function ha(S,da,fa){J.isNone(da)?S=!1:(da=Ca(da,qa),da=
Sa[da][6],J.isNone(da)?S=!1:(da(S,0,Ma,0),fa!==Ma&&(fa[0]=Ma[0],fa[1]=Ma[1],2<fa.length&&(fa[2]=Ma[2])),S=!0));return S}function pa(S,da,fa,oa,za,Ea,Na=1){da=ya(da,za,eb);if(J.isNone(da))return!1;if(da===r){if(S===oa&&fa===Ea)return!0;Na=fa+3*Na;for(let Pa=fa,Za=Ea;Pa<Na;Pa++,Za++)oa[Za]=S[Pa];return!0}Na=fa+3*Na;for(let Pa=fa,Za=Ea;Pa<Na;Pa+=3,Za+=3)da(S,Pa,oa,Za);return!0}function ra(S,da,fa,oa,za,Ea,Na=0){const Pa=[];for(const Za of S)for(const Ya of Za)Pa.push(Ya[0],Ya[1],da?Ya[2]:Na);if(!pa(Pa,
oa,0,Pa,Ea,0,Pa.length/3))return!1;oa=0;za.length=0;for(const Za of S){S=[];for(const Ya of Za)da&&fa?S.push([Pa[oa++],Pa[oa++],Pa[oa++],Ya[3]]):da?S.push([Pa[oa++],Pa[oa++],Pa[oa++]]):(fa?S.push([Pa[oa++],Pa[oa++],Ya[2]]):S.push([Pa[oa++],Pa[oa++]]),oa++);za.push(S)}return!0}function Aa(S,da,fa){const oa=Math.sin(da);da=Math.cos(da);const za=Math.sin(S);S=Math.cos(S);fa[0]=-oa;fa[4]=-za*da;fa[8]=S*da;fa[12]=0;fa[1]=da;fa[5]=-za*oa;fa[9]=S*oa;fa[13]=0;fa[2]=0;fa[6]=S;fa[10]=za;fa[14]=0;fa[3]=0;fa[7]=
0;fa[11]=0;fa[15]=1;return fa}function Ca(S,da){if(da.spatialReference===S)return da.spatialReferenceId;da.spatialReference=S;"metersPerUnit"in da&&(da.metersPerUnit=z.getMetersPerUnitForSR(S,1));return S.wkt===f.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=1:m.isWGS84(S)?da.spatialReferenceId=2:m.isWebMercator(S)?da.spatialReferenceId=3:S.wkt===f.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=4:4490===S.wkid?da.spatialReferenceId=5:S.wkt===f.SphericalPCPFMars.wkt?da.spatialReferenceId=
7:S.wkt===f.SphericalPCPFMoon.wkt?da.spatialReferenceId=9:m.isMars(S)?da.spatialReferenceId=8:m.isMoon(S)?da.spatialReferenceId=10:da.spatialReferenceId=0}function r(S,da,fa,oa){S!==fa&&(fa[oa++]=S[da++],fa[oa++]=S[da++],fa[oa]=S[da])}function G(S,da,fa,oa){fa[oa++]=ab*(S[da++]/v.earth.radius);fa[oa++]=ab*(Math.PI/2-2*Math.atan(Math.exp(-1*S[da++]/v.earth.radius)));fa[oa]=S[da]}function ca(S,da,fa,oa){G(S,da,fa,oa);g(fa,oa,fa,oa)}function ta(S,da,fa,oa){G(S,da,fa,oa);ma(fa,oa,fa,oa)}function xa(S,
da,fa,oa){var za=.4999999*Math.PI;za=B.clamp(a*S[da+1],-za,za);za=Math.sin(za);fa[oa++]=a*S[da]*v.earth.radius;fa[oa++]=v.earth.halfSemiMajorAxis*Math.log((1+za)/(1-za));fa[oa]=S[da+2]}function b(S,da,fa,oa,za){za+=S[da+2];const Ea=a*S[da+1];S=a*S[da];da=Math.cos(Ea);fa[oa++]=Math.cos(S)*da*za;fa[oa++]=Math.sin(S)*da*za;fa[oa]=Math.sin(Ea)*za}function k(S,da,fa,oa){b(S,da,fa,oa,v.moon.radius)}function R(S,da,fa,oa){b(S,da,fa,oa,v.mars.radius)}function g(S,da,fa,oa){b(S,da,fa,oa,v.earth.radius)}function x(S,
da,fa,oa,za){var Ea=S[da];const Na=S[da+1];da=S[da+2];S=Math.sqrt(Ea*Ea+Na*Na+da*da);da=B.asinClamped(da/(0===S?1:S));Ea=Math.atan2(Na,Ea);fa[oa++]=ab*Ea;fa[oa++]=ab*da;fa[oa]=S-za}function M(S,da,fa,oa){x(S,da,fa,oa,v.moon.radius)}function P(S,da,fa,oa){x(S,da,fa,oa,v.mars.radius)}function aa(S,da,fa,oa){x(S,da,fa,oa,v.earth.radius)}function V(S,da,fa,oa){aa(S,da,fa,oa);xa(fa,oa,fa,oa)}function la(S,da,fa,oa){aa(S,da,fa,oa);ma(fa,oa,fa,oa)}function ma(S,da,fa,oa){{var za=v.earth;const Na=a*S[da];
var Ea=a*S[da+1];S=S[da+2];da=Math.sin(Ea);Ea=Math.cos(Ea);const Pa=za.radius/Math.sqrt(1-za.eccentricitySquared*da*da);fa[oa++]=(Pa+S)*Ea*Math.cos(Na);fa[oa++]=(Pa+S)*Ea*Math.sin(Na);fa[oa++]=(Pa*(1-za.eccentricitySquared)+S)*da}}function na(S,da,fa,oa){var za=L.earthEllipsoidConstants,Ea=S[da],Na=S[da+1];S=S[da+2];let Pa;da=Math.abs(S);var Za=Ea*Ea+Na*Na;var Ya=Math.sqrt(Za);var Va=Za+S*S;var gb=Math.sqrt(Va);Ea=Math.atan2(Na,Ea);var jb=S*S/Va;Va=Za/Va;Na=za.a2/gb;Za=za.a3-za.a4/gb;.3<Va?(jb=da/
gb*(1+Va*(za.a1+Na+jb*Za)/gb),gb=Math.asin(jb),Na=jb*jb,Va=Math.sqrt(1-Na)):(Va=Ya/gb*(1-jb*(za.a5-Na-Va*Za)/gb),gb=Math.acos(Va),Na=1-Va*Va,jb=Math.sqrt(Na));Pa=1-v.earth.eccentricitySquared*Na;Na=v.earth.radius/Math.sqrt(Pa);za=za.a6*Na;Na=Ya-Na*Va;Za=da-za*jb;da=Va*Na+jb*Za;Ya=Va*Za-jb*Na;za=Ya/(za/Pa+da);gb+=za;0>S&&(gb=-gb);fa[oa++]=ab*Ea;fa[oa++]=ab*gb;fa[oa]=da+Ya*za/2}function wa(S,da,fa,oa){na(S,da,fa,oa);g(fa,oa,fa,oa)}function ua(S,da,fa,oa){na(S,da,fa,oa);xa(fa,oa,fa,oa)}function ya(S,
da,fa=Da()){return J.isNone(S)||J.isNone(da)?null:Ba(S,da,fa).projector}function Ba(S,da,fa){if(J.isNone(S)||J.isNone(da)||fa.source.spatialReference===S&&fa.dest.spatialReference===da)return fa;const oa=Ca(S,fa.source),za=Ca(da,fa.dest);0===oa&&0===za?m.equals(S,da)?fa.projector=r:fa.projector=null:fa.projector=Sa[oa][za];return fa}function Da(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:r}}
let Ga=null,Ha=null,Ka=null,Ia={},Ja=function(S){function da(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ba._inheritsLoose(da,S);return da}(q);(function(S){S.x2lon=function(da){return da/v.earth.radius};S.y2lat=function(da){return Math.PI/2-2*Math.atan(Math.exp(-1*da/v.earth.radius))};S.lon2x=function(da){return da*v.earth.radius};S.lat2y=function(da){da=Math.sin(da);return v.earth.radius/2*Math.log((1+da)/(1-da))}})(e.webMercator||
(e.webMercator={}));const Sa={[2]:{[5]:null,[8]:null,[10]:null,[6]:r,[1]:g,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:r,[4]:ma},[5]:{[5]:r,[8]:null,[10]:null,[6]:r,[1]:g,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ma},[8]:{[5]:null,[8]:r,[10]:null,[6]:null,[1]:null,[7]:R,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:r,[6]:null,[1]:null,[7]:null,[9]:k,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:G,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:r,[2]:G,
[4]:ta},[4]:{[5]:na,[8]:null,[10]:null,[6]:na,[1]:wa,[7]:null,[9]:null,[0]:null,[3]:ua,[2]:na,[4]:r},[1]:{[5]:aa,[8]:null,[10]:null,[6]:aa,[1]:r,[7]:null,[9]:null,[0]:null,[3]:V,[2]:aa,[4]:la},[7]:{[5]:null,[8]:P,[10]:null,[6]:null,[1]:null,[7]:r,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:M,[6]:null,[1]:null,[7]:null,[9]:r,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:r,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,
[8]:null,[10]:null,[6]:r,[1]:g,[7]:null,[9]:null,[0]:null,[3]:null,[2]:r,[4]:ma}},qa={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},eb=Da(),db=Da(),a=B.deg2rad(1),ab=B.rad2deg(1),Ma=n.create(),ib=n.create(),lb=n.create(),Ra=n.create(),wb=n.create();e.canProjectToWGS84ComparableLonLat=function(S){if(J.isNone(S))return!1;S=Ca(S,qa);return!!Sa[S][6]};e.canProjectWithoutEngine=ia;e.computeLatLonToENURotation=Aa;e.computeLinearTransformation=function(S,da,
fa,oa){if(J.isNone(S)||J.isNone(oa))return!1;var za=Ca(S,qa),Ea=Ca(oa,fb);if(za===Ea&&1!==Ea&&(0!==za||m.equals(S,oa)))return t.identity(fa),t.translate(fa,fa,da),!0;if(1===Ea||7===Ea||9===Ea){oa=S=0;if(1===Ea){za=Sa[za][6];Ea=Sa[6][Ea];if(J.isNone(za)||J.isNone(Ea))return!1;za(da,0,ib,0);Ea(ib,0,lb,0);S=a*ib[0];oa=a*ib[1]}else if(7===Ea||9===Ea){Ea=Sa[za][Ea];if(J.isNone(Ea))return!1;Ea(da,0,lb,0);S=a*da[0];oa=a*da[1]}Aa(oa,S,fa);fa[12]=lb[0];fa[13]=lb[1];fa[14]=lb[2];return!0}if(3===Ea&&(2===za||
1===za)){Ea=Sa[za][6];if(J.isNone(Ea))return!1;Ea(da,0,ib,0);da=a*ib[1];xa(ib,0,lb,0);t.identity(fa);t.translate(fa,fa,lb);da=1/Math.cos(da);t.scale(fa,fa,[da,da,1]);return!0}return!1};e.getProjectorName=function(S,da){switch(ya(S,da,eb)){case r:return"copy3";case g:return"wgs84ToSphericalECEF";case xa:return"wgs84ToWebMercator";case ma:return"wgs84ToWGS84ECEF";case G:return"webMercatorToWGS84";case ca:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case na:return"wgs84ECEFToWGS84";
case wa:return"wgs84ECEFToSphericalECEF";case ua:return"wgs84ECEFToWebMercator";case aa:return"sphericalECEFToWGS84";case V:return"sphericalECEFToWebMercator";case P:return"sphericalECEFToMars2000";case M:return"sphericalECEFToMoon2000";case la:return"sphericalECEFToWGS84ECEF";case R:return"mars2000ToSphericalPCPF";case k:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=U;e.getTransformations=function(S,da,fa=null){if(J.isNone(Ga))throw new Ja;S=Ga._getTransformationBySuitability(Ha,
S,da,fa,null==fa?void 0:fa.spatialReference);if(null!==S){da=[];for(const oa of S)da.push(Y.fromGE(oa));return da}return[]};e.initializeProjection=async function(S,da){if(!ka())for(const {source:fa,dest:oa,geographicTransformation:za}of S)if(!ia(fa,oa,za))return ea(da)};e.isLoaded=ka;e.isSupported=function(){return!0};e.load=ea;e.localLinearScaleFactors=function(S,da,fa,oa){if(J.isNone(da)||J.isNone(oa))return!1;const za=Ca(da,qa);var Ea=Ca(oa,fb);if(za===Ea&&0!==za||m.equals(da,oa))return fa[0]=
1,fa[1]=1,fa[2]=1,!0;if(1===za){da=d.length(S);S=da/Math.sqrt(S[0]*S[0]+S[1]*S[1]);da/=v.earth.radius;if(3===Ea)return fa[0]=S*da,fa[1]=S*da,fa[2]=1,!0;if(2===Ea||5===Ea)return Ea=180/(v.earth.radius*Math.PI),fa[0]=Ea*S*da,fa[1]=Ea*da,fa[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(S,da,fa,oa,za=0){oa+=za;za=Math.cos(fa);S[0]=Math.cos(da)*za*oa;S[1]=Math.sin(da)*za*oa;S[2]=Math.sin(fa)*oa};e.project=function(S,da,fa=null){return Array.isArray(S)?0===S.length?[]:I(Ha,S,S[0].spatialReference,
da,fa):I(Ha,[S],S.spatialReference,da,fa)[0]};e.projectBoundingRect=function(S,da,fa,oa){if(null==S)return!1;if(m.equals(da,oa))return K.set(fa,S),!0;Ma[0]=S[0];Ma[1]=S[1];Ma[2]=0;if(!pa(Ma,da,0,Ma,oa,0,1))return!1;fa[0]=Ma[0];fa[1]=Ma[1];Ma[0]=S[2];Ma[1]=S[3];Ma[2]=0;if(!pa(Ma,da,0,Ma,oa,0,1))return!1;fa[2]=Ma[0];fa[3]=Ma[1];return!0};e.projectBoundingSphere=function(S,da,fa,oa){if(J.isNone(da)||J.isNone(oa))return!1;da=Ba(da,oa,db);if(da.projector===r)return fa[0]=S[0],fa[1]=S[1],fa[2]=S[2],fa[3]=
S[3],!0;if(J.isNone(da.projector))return!1;const {source:za,dest:Ea}=da;if(3===Ea.spatialReferenceId){da=Sa[za.spatialReferenceId][2];if(J.isNone(da))return!1;da(S,0,ib,0);da=Math.abs(a*ib[1])+Math.asin(S[3]/(v.earth.radius+S[2]));xa(ib,0,fa,0);fa[3]=da>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(da)*S[3];return!0}da.projector(S,0,fa,0);fa[3]=S[3]*za.metersPerUnit/Ea.metersPerUnit;return!0};e.projectBuffer=pa;e.projectDirection=function(S,da,fa,oa,za){d.copy(Ra,S);d.add(wb,S,da);W(Ra,fa,Ra,za);W(wb,
fa,wb,za);d.subtract(oa,wb,Ra);d.normalize(oa,oa)};e.projectExtent=function(S,da,fa=da.spatialReference,oa=0){return J.isNone(fa)?!1:E(S,S.spatialReference,da,fa,oa)};e.projectMany=I;e.projectMultipoint=function(S,da,fa=da.spatialReference,oa=0){return J.isNone(fa)?!1:F(S,S.spatialReference,da,fa,oa)};e.projectPoint=function(S,da,fa=da.spatialReference,oa=0){return J.isNone(fa)?!1:Q(S,S.spatialReference,da,fa,oa)};e.projectPointToVector=function(S,da,fa,oa=0){Ra[0]=S.x;Ra[1]=S.y;const za=S.z;Ra[2]=
void 0!==za?za:oa;return pa(Ra,S.spatialReference,0,da,fa,0,1)};e.projectPointToWGS84ComparableLonLat=function(S,da){Ra[0]=S.x;Ra[1]=S.y;const fa=S.z;Ra[2]=void 0!==fa?fa:0;return ha(Ra,S.spatialReference,da)};e.projectPolygon=function(S,da,fa=da.spatialReference,oa=0){return J.isNone(fa)?!1:N(S,S.spatialReference,da,fa,oa)};e.projectPolyline=function(S,da,fa=da.spatialReference,oa=0){return J.isNone(fa)?!1:u(S,S.spatialReference,da,fa,oa)};e.projectVectorToDehydratedPoint=function(S,da,fa,oa){J.isNone(oa)&&
(oa=fa.spatialReference);return pa(S,da,0,Ra,oa,0,1)?(fa.x=Ra[0],fa.y=Ra[1],fa.z=Ra[2],fa.spatialReference=oa,fa):null};e.projectVectorToPoint=function(S,da,fa,oa){if(J.isNone(da)||J.isNone(fa))return null;oa=J.isSome(oa)?oa:new w({spatialReference:fa});return pa(S,da,0,Ra,fa,0,1)?(oa.x=Ra[0],oa.y=Ra[1],oa.z=Ra[2],oa.spatialReference=fa,oa):null};e.projectVectorToVector=W;e.projectVectorToWGS84ComparableLonLat=ha;e.projectXYZToVector=X;e.sphericalECEFToSphericalPCPF=x;e.unload=function(){Ka=Ha=Ga=
null;Ia={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(p){function e(){return[0,0,0]}function ba(z){return[z[0],z[1],z[2]]}function J(z,t,y){return[z,t,y]}function q(z){const t=e(),y=Math.min(3,z.length);for(let K=0;K<y;++K)t[K]=z[K];return t}function H(z,t){return new Float64Array(z,t,3)}function m(){return e()}function v(){return[1,1,1]}function w(){return[1,0,0]}function D(){return[0,1,0]}function ja(){return[0,0,1]}const Z=
e(),l=v(),B=w(),n=D(),d=ja();var f=Object.freeze({__proto__:null,create:e,clone:ba,fromValues:J,fromArray:q,createView:H,zeros:m,ones:v,unitX:w,unitY:D,unitZ:ja,ZEROS:Z,ONES:l,UNIT_X:B,UNIT_Y:n,UNIT_Z:d});p.ONES=l;p.UNIT_X=B;p.UNIT_Y=n;p.UNIT_Z=d;p.ZEROS=Z;p.clone=ba;p.create=e;p.createView=H;p.fromArray=q;p.fromValues=J;p.ones=v;p.unitX=w;p.unitY=D;p.unitZ=ja;p.vec3f64=f;p.zeros=m})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(p,e,ba){function J(r){const G=r[0],
ca=r[1];r=r[2];return Math.sqrt(G*G+ca*ca+r*r)}function q(r,G){r[0]=G[0];r[1]=G[1];r[2]=G[2];return r}function H(r,G,ca,ta){r[0]=G;r[1]=ca;r[2]=ta;return r}function m(r,G,ca){r[0]=G[0]+ca[0];r[1]=G[1]+ca[1];r[2]=G[2]+ca[2];return r}function v(r,G,ca){r[0]=G[0]-ca[0];r[1]=G[1]-ca[1];r[2]=G[2]-ca[2];return r}function w(r,G,ca){r[0]=G[0]*ca[0];r[1]=G[1]*ca[1];r[2]=G[2]*ca[2];return r}function D(r,G,ca){r[0]=G[0]/ca[0];r[1]=G[1]/ca[1];r[2]=G[2]/ca[2];return r}function ja(r,G){r[0]=Math.ceil(G[0]);r[1]=
Math.ceil(G[1]);r[2]=Math.ceil(G[2]);return r}function Z(r,G){r[0]=Math.floor(G[0]);r[1]=Math.floor(G[1]);r[2]=Math.floor(G[2]);return r}function l(r,G,ca){r[0]=Math.min(G[0],ca[0]);r[1]=Math.min(G[1],ca[1]);r[2]=Math.min(G[2],ca[2]);return r}function B(r,G,ca){r[0]=Math.max(G[0],ca[0]);r[1]=Math.max(G[1],ca[1]);r[2]=Math.max(G[2],ca[2]);return r}function n(r,G){r[0]=Math.round(G[0]);r[1]=Math.round(G[1]);r[2]=Math.round(G[2]);return r}function d(r,G,ca){r[0]=G[0]*ca;r[1]=G[1]*ca;r[2]=G[2]*ca;return r}
function f(r,G,ca,ta){r[0]=G[0]+ca[0]*ta;r[1]=G[1]+ca[1]*ta;r[2]=G[2]+ca[2]*ta;return r}function z(r,G){const ca=G[0]-r[0],ta=G[1]-r[1];r=G[2]-r[2];return Math.sqrt(ca*ca+ta*ta+r*r)}function t(r,G){const ca=G[0]-r[0],ta=G[1]-r[1];r=G[2]-r[2];return ca*ca+ta*ta+r*r}function y(r){const G=r[0],ca=r[1];r=r[2];return G*G+ca*ca+r*r}function K(r,G){r[0]=-G[0];r[1]=-G[1];r[2]=-G[2];return r}function L(r,G){r[0]=1/G[0];r[1]=1/G[1];r[2]=1/G[2];return r}function Y(r,G){var ca=G[0];const ta=G[1],xa=G[2];ca=ca*
ca+ta*ta+xa*xa;0<ca&&(ca=1/Math.sqrt(ca),r[0]=G[0]*ca,r[1]=G[1]*ca,r[2]=G[2]*ca);return r}function ka(r,G){return r[0]*G[0]+r[1]*G[1]+r[2]*G[2]}function ea(r,G,ca){const ta=G[0],xa=G[1];G=G[2];const b=ca[0],k=ca[1];ca=ca[2];r[0]=xa*ca-G*k;r[1]=G*b-ta*ca;r[2]=ta*k-xa*b;return r}function I(r,G,ca,ta){const xa=G[0],b=G[1];G=G[2];r[0]=xa+ta*(ca[0]-xa);r[1]=b+ta*(ca[1]-b);r[2]=G+ta*(ca[2]-G);return r}function U(r,G,ca,ta,xa,b){const k=b*b,R=k*(2*b-3)+1,g=k*(b-2)+b,x=k*(b-1);b=k*(3-2*b);r[0]=G[0]*R+ca[0]*
g+ta[0]*x+xa[0]*b;r[1]=G[1]*R+ca[1]*g+ta[1]*x+xa[1]*b;r[2]=G[2]*R+ca[2]*g+ta[2]*x+xa[2]*b;return r}function ia(r,G,ca,ta,xa,b){var k=1-b,R=k*k;const g=b*b,x=R*k;R*=3*b;k*=3*g;b*=g;r[0]=G[0]*x+ca[0]*R+ta[0]*k+xa[0]*b;r[1]=G[1]*x+ca[1]*R+ta[1]*k+xa[1]*b;r[2]=G[2]*x+ca[2]*R+ta[2]*k+xa[2]*b;return r}function O(r,G){G=G||1;const ca=2*ba.RANDOM()*Math.PI,ta=2*ba.RANDOM()-1,xa=Math.sqrt(1-ta*ta)*G;r[0]=Math.cos(ca)*xa;r[1]=Math.sin(ca)*xa;r[2]=ta*G;return r}function Q(r,G,ca){const ta=G[0],xa=G[1];G=G[2];
r[0]=ca[0]*ta+ca[4]*xa+ca[8]*G+ca[12];r[1]=ca[1]*ta+ca[5]*xa+ca[9]*G+ca[13];r[2]=ca[2]*ta+ca[6]*xa+ca[10]*G+ca[14];return r}function F(r,G,ca){const ta=G[0],xa=G[1];G=G[2];r[0]=ta*ca[0]+xa*ca[3]+G*ca[6];r[1]=ta*ca[1]+xa*ca[4]+G*ca[7];r[2]=ta*ca[2]+xa*ca[5]+G*ca[8];return r}function u(r,G,ca){const ta=ca[0],xa=ca[1],b=ca[2],k=G[0],R=G[1];G=G[2];let g=xa*G-b*R,x=b*k-ta*G,M=ta*R-xa*k;ca=2*ca[3];r[0]=k+g*ca+2*(xa*M-b*x);r[1]=R+x*ca+2*(b*g-ta*M);r[2]=G+M*ca+2*(ta*x-xa*g);return r}function N(r,G,ca,ta){const xa=
[],b=[];xa[0]=G[0]-ca[0];xa[1]=G[1]-ca[1];xa[2]=G[2]-ca[2];b[0]=xa[0];b[1]=xa[1]*Math.cos(ta)-xa[2]*Math.sin(ta);b[2]=xa[1]*Math.sin(ta)+xa[2]*Math.cos(ta);r[0]=b[0]+ca[0];r[1]=b[1]+ca[1];r[2]=b[2]+ca[2];return r}function E(r,G,ca,ta){const xa=[],b=[];xa[0]=G[0]-ca[0];xa[1]=G[1]-ca[1];xa[2]=G[2]-ca[2];b[0]=xa[2]*Math.sin(ta)+xa[0]*Math.cos(ta);b[1]=xa[1];b[2]=xa[2]*Math.cos(ta)-xa[0]*Math.sin(ta);r[0]=b[0]+ca[0];r[1]=b[1]+ca[1];r[2]=b[2]+ca[2];return r}function X(r,G,ca,ta){const xa=[],b=[];xa[0]=
G[0]-ca[0];xa[1]=G[1]-ca[1];xa[2]=G[2]-ca[2];b[0]=xa[0]*Math.cos(ta)-xa[1]*Math.sin(ta);b[1]=xa[0]*Math.sin(ta)+xa[1]*Math.cos(ta);b[2]=xa[2];r[0]=b[0]+ca[0];r[1]=b[1]+ca[1];r[2]=b[2]+ca[2];return r}function W(r,G){q(Aa,r);q(Ca,G);Y(Aa,Aa);Y(Ca,Ca);r=ka(Aa,Ca);return 1<r?0:-1>r?Math.PI:Math.acos(r)}function ha(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function pa(r,G){return r[0]===G[0]&&r[1]===G[1]&&r[2]===G[2]}function ra(r,G){const ca=r[0],ta=r[1];r=r[2];const xa=G[0],b=G[1];G=G[2];return Math.abs(ca-
xa)<=ba.EPSILON*Math.max(1,Math.abs(ca),Math.abs(xa))&&Math.abs(ta-b)<=ba.EPSILON*Math.max(1,Math.abs(ta),Math.abs(b))&&Math.abs(r-G)<=ba.EPSILON*Math.max(1,Math.abs(r),Math.abs(G))}const Aa=e.create(),Ca=e.create();e=Object.freeze({__proto__:null,length:J,copy:q,set:H,add:m,subtract:v,multiply:w,divide:D,ceil:ja,floor:Z,min:l,max:B,round:n,scale:d,scaleAndAdd:f,distance:z,squaredDistance:t,squaredLength:y,negate:K,inverse:L,normalize:Y,dot:ka,cross:ea,lerp:I,hermite:U,bezier:ia,random:O,transformMat4:Q,
transformMat3:F,transformQuat:u,rotateX:N,rotateY:E,rotateZ:X,angle:W,str:ha,exactEquals:pa,equals:ra,sub:v,mul:w,div:D,dist:z,sqrDist:t,len:J,sqrLen:y});p.add=m;p.angle=W;p.bezier=ia;p.ceil=ja;p.copy=q;p.cross=ea;p.dist=z;p.distance=z;p.div=D;p.divide=D;p.dot=ka;p.equals=ra;p.exactEquals=pa;p.floor=Z;p.hermite=U;p.inverse=L;p.len=J;p.length=J;p.lerp=I;p.max=B;p.min=l;p.mul=w;p.multiply=w;p.negate=K;p.normalize=Y;p.random=O;p.rotateX=N;p.rotateY=E;p.rotateZ=X;p.round=n;p.scale=d;p.scaleAndAdd=f;p.set=
H;p.sqrDist=t;p.sqrLen=y;p.squaredDistance=t;p.squaredLength=y;p.str=ha;p.sub=v;p.subtract=v;p.transformMat3=F;p.transformMat4=Q;p.transformQuat=u;p.vec3=e})},"esri/chunks/common":function(){define(["exports"],function(p){function e(w){return w*H}function ba(w){return w*m}function J(w,D){return Math.abs(w-D)<=1E-6*Math.max(1,Math.abs(w),Math.abs(D))}const q=Math.random,H=Math.PI/180,m=180/Math.PI;var v=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:q,toRadian:e,toDegree:ba,equals:J});p.EPSILON=
1E-6;p.RANDOM=q;p.common=v;p.equals=J;p.toDegree=ba;p.toRadian=e})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(p,e,ba,J){function q(D){return new ba({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${D.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const H=q(J.earth),m=q(J.mars),v=q(J.moon),w=new ba({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${J.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=H;p.SphericalPCPFMars=m;p.SphericalPCPFMoon=v;p.WGS84ECEFSpatialReference=w;p.createSphericalPCPF=q;p.getReferenceEllipsoid=function(D){return D&&(e.isMars(D)||D===m)?J.mars:D&&(e.isMoon(D)||D===v)?J.moon:J.earth};p.getReferenceEllipsoidFromWKID=function(D){return e.isWKIDFromMars(D)?J.mars:e.isWKIDFromMoon(D)?J.moon:J.earth};p.getSphericalPCPF=function(D){return D&&(e.isMars(D)||D===m)?m:D&&(e.isMoon(D)||D===v)?v:H};p.getSphericalPCPFForEllipsoid=function(D){return D&&
D===J.mars?m:D&&D===J.moon?v:H};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(p,e,ba,J,q,H,m,v){function w(O){if(O=ia[O])return O;throw Error("unknown measure");}function D(O){return U[O].baseUnit}function ja(O,Q=null){Q=Q||w(O);return U[Q].baseUnit===
O}function Z(O,Q,F){if(Q===F)return O;const u=w(Q);if(u!==w(F))throw Error("incompatible units");O=ja(Q,u)?O:O*U[u].units[Q].inBaseUnits;return ja(F,u)?O:O/U[u].units[F].inBaseUnits}function l(O,Q){return 3E3>Z(O,Q,"meters")?"meters":"kilometers"}function B(O,Q){return 1E5>Z(O,Q,"meters")?"meters":"kilometers"}function n(O,Q){return 1E3>Z(O,Q,"feet")?"feet":"miles"}function d(O,Q){return 1E5>Z(O,Q,"feet")?"feet":"miles"}function f(O){return I.fromJSON(O.toLowerCase())||null}function z(O,Q=m.earth.metersPerDegree){return t(O,
!0)||Q}function t(O,Q=!1){let F,u,N=null;null!=O&&("object"===typeof O?(F=O.wkid,u=O.wkt):"number"===typeof O?F=O:"string"===typeof O&&(u=O));if(F){if(q.isWKIDFromMars(F))return m.mars.metersPerDegree;if(q.isWKIDFromMoon(F))return m.moon.metersPerDegree;N=Y.values[Y[F]];!N&&Q&&ea.has(F)&&(N=K)}else u&&(-1!==u.search(/^PROJCS/i)?(O=L.exec(u))&&O[1]&&(N=parseFloat(O[1].split(",")[1])):-1!==u.search(/^GEOCCS/i)&&(O=ka.exec(u))&&O[1]&&(N=parseFloat(O[1].split(",")[1])));return N}function y(O){let Q,F,
u=null;null!=O&&("object"===typeof O?(Q=O.wkid,F=O.wkt):"number"===typeof O?Q=O:"string"===typeof O&&(F=O));Q?u=Y.units[Y[Q]]:F&&-1!==F.search(/^PROJCS/i)&&(O=L.exec(F))&&O[1]&&(u=(O=/[\\"\\']{1}([^\\"\\']+)/.exec(O[1]))&&O[1]);return u?f(u):null}const K=m.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,Y=J,ka=/UNIT\[([^\]]+)\]/i,ea=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),I=ba.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};ba={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(O=>O*O)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const U={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:ba},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ia=function(){const O={};for(const Q in U)for(const F in U[Q].units)O[F]=Q;return O}();p.baseUnitForMeasure=D;p.baseUnitForUnit=function(O){return D(w(O))};p.convertUnit=Z;p.getDefaultUnitSystem=function(O){if(!O)return null;switch(y(O)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=t;p.getMetersPerUnitForSR=z;p.getMetersPerVerticalUnitForSR=function(O){if(O&&"object"===typeof O&&!q.isEarth(O))return 1;O=z(O);return 1E5<O?1:O};p.getUnitString=y;p.getVerticalUnitStringForSR=function(O){const Q=z(O),F=O instanceof H?v.getReferenceEllipsoid(O).metersPerDegree:1E5;return Q>=F?"meters":y(O)};p.inchesPerMeter=39.37;p.isBaseUnit=ja;p.isMeasurementSystem=function(O){return"imperial"===
O||"metric"===O};p.lengthToDegrees=function(O,Q,F){return Z(O,Q,"meters")/(F*Math.PI/180)};p.measureForUnit=w;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(O,Q){return 1E6>Z(O,Q,"square-feet")?"square-feet":"square-miles"};
p.preferredImperialLengthUnit=n;p.preferredImperialVerticalLengthUnit=d;p.preferredLengthUnit=function(O,Q,F){switch(F){case "metric":return l(O,Q);case "imperial":return n(O,Q);default:return F}};p.preferredMetricAreaUnit=function(O,Q){return 3E6>Z(O,Q,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=l;p.preferredMetricVerticalLengthUnit=B;p.preferredVerticalLengthUnit=function(O,Q,F){switch(F){case "metric":return B(O,Q);case "imperial":return d(O,Q);default:return F}};
p.unitFromRESTJSON=f;p.unitToRESTJSON=function(O){return I.toJSON(O)||null};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,e,ba){function J(b,k){b[0]=k[0];b[1]=k[1];b[2]=k[2];b[3]=k[3];b[4]=k[4];b[5]=k[5];b[6]=k[6];b[7]=k[7];b[8]=k[8];b[9]=k[9];b[10]=k[10];b[11]=k[11];b[12]=k[12];b[13]=k[13];b[14]=k[14];b[15]=k[15];return b}function q(b,k,R,g,x,M,P,aa,V,la,ma,na,wa,ua,ya,Ba,Da){b[0]=k;b[1]=R;b[2]=g;b[3]=x;b[4]=
M;b[5]=P;b[6]=aa;b[7]=V;b[8]=la;b[9]=ma;b[10]=na;b[11]=wa;b[12]=ua;b[13]=ya;b[14]=Ba;b[15]=Da;return b}function H(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function m(b,k){if(b===k){const R=k[1],g=k[2],x=k[3],M=k[6],P=k[7],aa=k[11];b[1]=k[4];b[2]=k[8];b[3]=k[12];b[4]=R;b[6]=k[9];b[7]=k[13];b[8]=g;b[9]=M;b[11]=k[14];b[12]=x;b[13]=P;b[14]=aa}else b[0]=k[0],b[1]=k[4],b[2]=k[8],b[3]=k[12],b[4]=k[1],b[5]=k[5],b[6]=
k[9],b[7]=k[13],b[8]=k[2],b[9]=k[6],b[10]=k[10],b[11]=k[14],b[12]=k[3],b[13]=k[7],b[14]=k[11],b[15]=k[15];return b}function v(b,k){const R=k[0],g=k[1],x=k[2],M=k[3],P=k[4],aa=k[5],V=k[6],la=k[7],ma=k[8],na=k[9],wa=k[10],ua=k[11],ya=k[12],Ba=k[13],Da=k[14];k=k[15];const Ga=R*aa-g*P,Ha=R*V-x*P,Ka=R*la-M*P,Ia=g*V-x*aa,Ja=g*la-M*aa,Sa=x*la-M*V,qa=ma*Ba-na*ya,fb=ma*Da-wa*ya,eb=ma*k-ua*ya,db=na*Da-wa*Ba,a=na*k-ua*Ba,ab=wa*k-ua*Da;let Ma=Ga*ab-Ha*a+Ka*db+Ia*eb-Ja*fb+Sa*qa;if(!Ma)return null;Ma=1/Ma;b[0]=
(aa*ab-V*a+la*db)*Ma;b[1]=(x*a-g*ab-M*db)*Ma;b[2]=(Ba*Sa-Da*Ja+k*Ia)*Ma;b[3]=(wa*Ja-na*Sa-ua*Ia)*Ma;b[4]=(V*eb-P*ab-la*fb)*Ma;b[5]=(R*ab-x*eb+M*fb)*Ma;b[6]=(Da*Ka-ya*Sa-k*Ha)*Ma;b[7]=(ma*Sa-wa*Ka+ua*Ha)*Ma;b[8]=(P*a-aa*eb+la*qa)*Ma;b[9]=(g*eb-R*a-M*qa)*Ma;b[10]=(ya*Ja-Ba*Ka+k*Ga)*Ma;b[11]=(na*Ka-ma*Ja-ua*Ga)*Ma;b[12]=(aa*fb-P*db-V*qa)*Ma;b[13]=(R*db-g*fb+x*qa)*Ma;b[14]=(Ba*Ha-ya*Ia-Da*Ga)*Ma;b[15]=(ma*Ia-na*Ha+wa*Ga)*Ma;return b}function w(b,k){const R=k[0],g=k[1],x=k[2],M=k[3],P=k[4],aa=k[5],V=k[6],
la=k[7],ma=k[8],na=k[9],wa=k[10],ua=k[11],ya=k[12],Ba=k[13],Da=k[14];k=k[15];b[0]=aa*(wa*k-ua*Da)-na*(V*k-la*Da)+Ba*(V*ua-la*wa);b[1]=-(g*(wa*k-ua*Da)-na*(x*k-M*Da)+Ba*(x*ua-M*wa));b[2]=g*(V*k-la*Da)-aa*(x*k-M*Da)+Ba*(x*la-M*V);b[3]=-(g*(V*ua-la*wa)-aa*(x*ua-M*wa)+na*(x*la-M*V));b[4]=-(P*(wa*k-ua*Da)-ma*(V*k-la*Da)+ya*(V*ua-la*wa));b[5]=R*(wa*k-ua*Da)-ma*(x*k-M*Da)+ya*(x*ua-M*wa);b[6]=-(R*(V*k-la*Da)-P*(x*k-M*Da)+ya*(x*la-M*V));b[7]=R*(V*ua-la*wa)-P*(x*ua-M*wa)+ma*(x*la-M*V);b[8]=P*(na*k-ua*Ba)-ma*
(aa*k-la*Ba)+ya*(aa*ua-la*na);b[9]=-(R*(na*k-ua*Ba)-ma*(g*k-M*Ba)+ya*(g*ua-M*na));b[10]=R*(aa*k-la*Ba)-P*(g*k-M*Ba)+ya*(g*la-M*aa);b[11]=-(R*(aa*ua-la*na)-P*(g*ua-M*na)+ma*(g*la-M*aa));b[12]=-(P*(na*Da-wa*Ba)-ma*(aa*Da-V*Ba)+ya*(aa*wa-V*na));b[13]=R*(na*Da-wa*Ba)-ma*(g*Da-x*Ba)+ya*(g*wa-x*na);b[14]=-(R*(aa*Da-V*Ba)-P*(g*Da-x*Ba)+ya*(g*V-x*aa));b[15]=R*(aa*wa-V*na)-P*(g*wa-x*na)+ma*(g*V-x*aa);return b}function D(b){const k=b[0],R=b[1],g=b[2],x=b[3],M=b[4],P=b[5],aa=b[6],V=b[7],la=b[8],ma=b[9],na=b[10],
wa=b[11],ua=b[12],ya=b[13],Ba=b[14];b=b[15];return(k*P-R*M)*(na*b-wa*Ba)-(k*aa-g*M)*(ma*b-wa*ya)+(k*V-x*M)*(ma*Ba-na*ya)+(R*aa-g*P)*(la*b-wa*ua)-(R*V-x*P)*(la*Ba-na*ua)+(g*V-x*aa)*(la*ya-ma*ua)}function ja(b,k,R){const g=k[0],x=k[1],M=k[2],P=k[3],aa=k[4],V=k[5],la=k[6],ma=k[7],na=k[8],wa=k[9],ua=k[10],ya=k[11],Ba=k[12],Da=k[13],Ga=k[14];k=k[15];let Ha=R[0],Ka=R[1],Ia=R[2],Ja=R[3];b[0]=Ha*g+Ka*aa+Ia*na+Ja*Ba;b[1]=Ha*x+Ka*V+Ia*wa+Ja*Da;b[2]=Ha*M+Ka*la+Ia*ua+Ja*Ga;b[3]=Ha*P+Ka*ma+Ia*ya+Ja*k;Ha=R[4];
Ka=R[5];Ia=R[6];Ja=R[7];b[4]=Ha*g+Ka*aa+Ia*na+Ja*Ba;b[5]=Ha*x+Ka*V+Ia*wa+Ja*Da;b[6]=Ha*M+Ka*la+Ia*ua+Ja*Ga;b[7]=Ha*P+Ka*ma+Ia*ya+Ja*k;Ha=R[8];Ka=R[9];Ia=R[10];Ja=R[11];b[8]=Ha*g+Ka*aa+Ia*na+Ja*Ba;b[9]=Ha*x+Ka*V+Ia*wa+Ja*Da;b[10]=Ha*M+Ka*la+Ia*ua+Ja*Ga;b[11]=Ha*P+Ka*ma+Ia*ya+Ja*k;Ha=R[12];Ka=R[13];Ia=R[14];Ja=R[15];b[12]=Ha*g+Ka*aa+Ia*na+Ja*Ba;b[13]=Ha*x+Ka*V+Ia*wa+Ja*Da;b[14]=Ha*M+Ka*la+Ia*ua+Ja*Ga;b[15]=Ha*P+Ka*ma+Ia*ya+Ja*k;return b}function Z(b,k,R){const g=R[0],x=R[1];R=R[2];let M=void 0,P=void 0,
aa=void 0,V=void 0,la=void 0,ma=void 0,na=void 0,wa=void 0,ua=void 0,ya=void 0,Ba=void 0,Da=void 0;k===b?(b[12]=k[0]*g+k[4]*x+k[8]*R+k[12],b[13]=k[1]*g+k[5]*x+k[9]*R+k[13],b[14]=k[2]*g+k[6]*x+k[10]*R+k[14],b[15]=k[3]*g+k[7]*x+k[11]*R+k[15]):(M=k[0],P=k[1],aa=k[2],V=k[3],la=k[4],ma=k[5],na=k[6],wa=k[7],ua=k[8],ya=k[9],Ba=k[10],Da=k[11],b[0]=M,b[1]=P,b[2]=aa,b[3]=V,b[4]=la,b[5]=ma,b[6]=na,b[7]=wa,b[8]=ua,b[9]=ya,b[10]=Ba,b[11]=Da,b[12]=M*g+la*x+ua*R+k[12],b[13]=P*g+ma*x+ya*R+k[13],b[14]=aa*g+na*x+Ba*
R+k[14],b[15]=V*g+wa*x+Da*R+k[15]);return b}function l(b,k,R){const g=R[0],x=R[1];R=R[2];b[0]=k[0]*g;b[1]=k[1]*g;b[2]=k[2]*g;b[3]=k[3]*g;b[4]=k[4]*x;b[5]=k[5]*x;b[6]=k[6]*x;b[7]=k[7]*x;b[8]=k[8]*R;b[9]=k[9]*R;b[10]=k[10]*R;b[11]=k[11]*R;b[12]=k[12];b[13]=k[13];b[14]=k[14];b[15]=k[15];return b}function B(b,k,R,g){let x=g[0],M=g[1];g=g[2];let P=Math.sqrt(x*x+M*M+g*g);var aa=void 0,V=void 0;let la=void 0,ma=void 0,na=void 0,wa=void 0,ua=void 0,ya=void 0,Ba=void 0,Da=void 0,Ga=void 0,Ha=void 0,Ka=void 0,
Ia=void 0,Ja=void 0,Sa=void 0,qa=void 0,fb=void 0,eb=void 0,db=void 0,a=void 0,ab=void 0;V=aa=void 0;if(P<ba.EPSILON)return null;P=1/P;x*=P;M*=P;g*=P;aa=Math.sin(R);V=Math.cos(R);la=1-V;ma=k[0];na=k[1];wa=k[2];ua=k[3];ya=k[4];Ba=k[5];Da=k[6];Ga=k[7];Ha=k[8];Ka=k[9];Ia=k[10];Ja=k[11];Sa=x*x*la+V;qa=M*x*la+g*aa;fb=g*x*la-M*aa;eb=x*M*la-g*aa;db=M*M*la+V;a=g*M*la+x*aa;ab=x*g*la+M*aa;aa=M*g*la-x*aa;V=g*g*la+V;b[0]=ma*Sa+ya*qa+Ha*fb;b[1]=na*Sa+Ba*qa+Ka*fb;b[2]=wa*Sa+Da*qa+Ia*fb;b[3]=ua*Sa+Ga*qa+Ja*fb;b[4]=
ma*eb+ya*db+Ha*a;b[5]=na*eb+Ba*db+Ka*a;b[6]=wa*eb+Da*db+Ia*a;b[7]=ua*eb+Ga*db+Ja*a;b[8]=ma*ab+ya*aa+Ha*V;b[9]=na*ab+Ba*aa+Ka*V;b[10]=wa*ab+Da*aa+Ia*V;b[11]=ua*ab+Ga*aa+Ja*V;k!==b&&(b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);return b}function n(b,k,R){const g=Math.sin(R);R=Math.cos(R);const x=k[4],M=k[5],P=k[6],aa=k[7],V=k[8],la=k[9],ma=k[10],na=k[11];k!==b&&(b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[4]=x*R+V*g;b[5]=M*R+la*g;b[6]=P*R+ma*g;b[7]=
aa*R+na*g;b[8]=V*R-x*g;b[9]=la*R-M*g;b[10]=ma*R-P*g;b[11]=na*R-aa*g;return b}function d(b,k,R){const g=Math.sin(R);R=Math.cos(R);const x=k[0],M=k[1],P=k[2],aa=k[3],V=k[8],la=k[9],ma=k[10],na=k[11];k!==b&&(b[4]=k[4],b[5]=k[5],b[6]=k[6],b[7]=k[7],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[0]=x*R-V*g;b[1]=M*R-la*g;b[2]=P*R-ma*g;b[3]=aa*R-na*g;b[8]=x*g+V*R;b[9]=M*g+la*R;b[10]=P*g+ma*R;b[11]=aa*g+na*R;return b}function f(b,k,R){const g=Math.sin(R);R=Math.cos(R);const x=k[0],M=k[1],P=k[2],aa=k[3],
V=k[4],la=k[5],ma=k[6],na=k[7];k!==b&&(b[8]=k[8],b[9]=k[9],b[10]=k[10],b[11]=k[11],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[0]=x*R+V*g;b[1]=M*R+la*g;b[2]=P*R+ma*g;b[3]=aa*R+na*g;b[4]=V*R-x*g;b[5]=la*R-M*g;b[6]=ma*R-P*g;b[7]=na*R-aa*g;return b}function z(b,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=k[0];b[13]=k[1];b[14]=k[2];b[15]=1;return b}function t(b,k){b[0]=k[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=
k[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function y(b,k,R){let g=R[0],x=R[1];R=R[2];let M=Math.sqrt(g*g+x*x+R*R),P=void 0,aa=void 0,V=void 0;if(M<ba.EPSILON)return null;M=1/M;g*=M;x*=M;R*=M;P=Math.sin(k);aa=Math.cos(k);V=1-aa;b[0]=g*g*V+aa;b[1]=x*g*V+R*P;b[2]=R*g*V-x*P;b[3]=0;b[4]=g*x*V-R*P;b[5]=x*x*V+aa;b[6]=R*x*V+g*P;b[7]=0;b[8]=g*R*V+x*P;b[9]=x*R*V-g*P;b[10]=R*R*V+aa;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function K(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=1;b[1]=0;b[2]=
0;b[3]=0;b[4]=0;b[5]=k;b[6]=R;b[7]=0;b[8]=0;b[9]=-R;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function L(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=k;b[1]=0;b[2]=-R;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=R;b[9]=0;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function Y(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=k;b[1]=R;b[2]=0;b[3]=0;b[4]=-R;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ka(b,k,R){var g=k[0],x=k[1],
M=k[2],P=k[3],aa=g+g,V=x+x;const la=M+M;k=g*aa;const ma=g*V;g*=la;const na=x*V;x*=la;M*=la;aa*=P;V*=P;P*=la;b[0]=1-(na+M);b[1]=ma+P;b[2]=g-V;b[3]=0;b[4]=ma-P;b[5]=1-(k+M);b[6]=x+aa;b[7]=0;b[8]=g+V;b[9]=x-aa;b[10]=1-(k+na);b[11]=0;b[12]=R[0];b[13]=R[1];b[14]=R[2];b[15]=1;return b}function ea(b,k){const R=xa,g=-k[0],x=-k[1],M=-k[2],P=k[3],aa=k[4],V=k[5],la=k[6],ma=k[7],na=g*g+x*x+M*M+P*P;0<na?(R[0]=2*(aa*P+ma*g+V*M-la*x)/na,R[1]=2*(V*P+ma*x+la*g-aa*M)/na,R[2]=2*(la*P+ma*M+aa*x-V*g)/na):(R[0]=2*(aa*
P+ma*g+V*M-la*x),R[1]=2*(V*P+ma*x+la*g-aa*M),R[2]=2*(la*P+ma*M+aa*x-V*g));ka(b,k,R);return b}function I(b,k){b[0]=k[12];b[1]=k[13];b[2]=k[14];return b}function U(b,k){const R=k[0],g=k[1],x=k[2],M=k[4],P=k[5],aa=k[6],V=k[8],la=k[9];k=k[10];b[0]=Math.sqrt(R*R+g*g+x*x);b[1]=Math.sqrt(M*M+P*P+aa*aa);b[2]=Math.sqrt(V*V+la*la+k*k);return b}function ia(b,k){const R=k[0]+k[5]+k[10];let g=0;0<R?(g=2*Math.sqrt(R+1),b[3]=.25*g,b[0]=(k[6]-k[9])/g,b[1]=(k[8]-k[2])/g,b[2]=(k[1]-k[4])/g):k[0]>k[5]&&k[0]>k[10]?(g=
2*Math.sqrt(1+k[0]-k[5]-k[10]),b[3]=(k[6]-k[9])/g,b[0]=.25*g,b[1]=(k[1]+k[4])/g,b[2]=(k[8]+k[2])/g):k[5]>k[10]?(g=2*Math.sqrt(1+k[5]-k[0]-k[10]),b[3]=(k[8]-k[2])/g,b[0]=(k[1]+k[4])/g,b[1]=.25*g,b[2]=(k[6]+k[9])/g):(g=2*Math.sqrt(1+k[10]-k[0]-k[5]),b[3]=(k[1]-k[4])/g,b[0]=(k[8]+k[2])/g,b[1]=(k[6]+k[9])/g,b[2]=.25*g);return b}function O(b,k,R,g){var x=k[0],M=k[1],P=k[2],aa=k[3],V=x+x,la=M+M,ma=P+P;k=x*V;const na=x*la;x*=ma;const wa=M*la;M*=ma;P*=ma;V*=aa;la*=aa;aa*=ma;ma=g[0];const ua=g[1];g=g[2];b[0]=
(1-(wa+P))*ma;b[1]=(na+aa)*ma;b[2]=(x-la)*ma;b[3]=0;b[4]=(na-aa)*ua;b[5]=(1-(k+P))*ua;b[6]=(M+V)*ua;b[7]=0;b[8]=(x+la)*g;b[9]=(M-V)*g;b[10]=(1-(k+wa))*g;b[11]=0;b[12]=R[0];b[13]=R[1];b[14]=R[2];b[15]=1;return b}function Q(b,k,R,g,x){var M=k[0],P=k[1],aa=k[2],V=k[3],la=M+M,ma=P+P,na=aa+aa;k=M*la;var wa=M*ma,ua=M*na;M=P*ma;P*=na;var ya=aa*na;aa=V*la;ma*=V;const Ba=V*na;var Da=g[0],Ga=g[1];na=g[2];g=x[0];V=x[1];x=x[2];la=(1-(M+ya))*Da;const Ha=(wa+Ba)*Da;Da*=ua-ma;wa=(wa-Ba)*Ga;ya=(1-(k+ya))*Ga;Ga*=
P+aa;ua=(ua+ma)*na;P=(P-aa)*na;k=(1-(k+M))*na;b[0]=la;b[1]=Ha;b[2]=Da;b[3]=0;b[4]=wa;b[5]=ya;b[6]=Ga;b[7]=0;b[8]=ua;b[9]=P;b[10]=k;b[11]=0;b[12]=R[0]+g-(la*g+wa*V+ua*x);b[13]=R[1]+V-(Ha*g+ya*V+P*x);b[14]=R[2]+x-(Da*g+Ga*V+k*x);b[15]=1;return b}function F(b,k){var R=k[0],g=k[1],x=k[2];k=k[3];var M=R+R,P=g+g;const aa=x+x;R*=M;const V=g*M;g*=P;const la=x*M,ma=x*P;x*=aa;M*=k;P*=k;k*=aa;b[0]=1-g-x;b[1]=V+k;b[2]=la-P;b[3]=0;b[4]=V-k;b[5]=1-R-x;b[6]=ma+M;b[7]=0;b[8]=la+P;b[9]=ma-M;b[10]=1-R-g;b[11]=0;b[12]=
0;b[13]=0;b[14]=0;b[15]=1;return b}function u(b,k,R,g,x,M,P){const aa=1/(R-k),V=1/(x-g),la=1/(M-P);b[0]=2*M*aa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*M*V;b[6]=0;b[7]=0;b[8]=(R+k)*aa;b[9]=(x+g)*V;b[10]=(P+M)*la;b[11]=-1;b[12]=0;b[13]=0;b[14]=P*M*2*la;b[15]=0;return b}function N(b,k,R,g,x){k=1/Math.tan(k/2);let M=void 0;b[0]=k/R;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=x&&Infinity!==x?(M=1/(g-x),b[10]=(x+g)*M,b[14]=2*x*g*M):(b[10]=-1,b[14]=-2*
g);return b}function E(b,k,R,g){const x=Math.tan(k.upDegrees*Math.PI/180),M=Math.tan(k.downDegrees*Math.PI/180),P=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const aa=2/(P+k),V=2/(x+M);b[0]=aa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=V;b[6]=0;b[7]=0;b[8]=-((P-k)*aa*.5);b[9]=(x-M)*V*.5;b[10]=g/(R-g);b[11]=-1;b[12]=0;b[13]=0;b[14]=g*R/(R-g);b[15]=0;return b}function X(b,k,R,g,x,M,P){const aa=1/(k-R),V=1/(g-x),la=1/(M-P);b[0]=-2*aa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*V;b[6]=0;
b[7]=0;b[8]=0;b[9]=0;b[10]=2*la;b[11]=0;b[12]=(k+R)*aa;b[13]=(x+g)*V;b[14]=(P+M)*la;b[15]=1;return b}function W(b,k,R,g){let x=void 0,M=void 0;var P=void 0,aa=void 0;let V=void 0,la=void 0;var ma=void 0,na=void 0;let wa=void 0,ua=void 0;const ya=k[0],Ba=k[1];k=k[2];P=g[0];aa=g[1];g=g[2];ma=R[0];na=R[1];R=R[2];if(Math.abs(ya-ma)<ba.EPSILON&&Math.abs(Ba-na)<ba.EPSILON&&Math.abs(k-R)<ba.EPSILON)return H(b);ma=ya-ma;na=Ba-na;wa=k-R;ua=1/Math.sqrt(ma*ma+na*na+wa*wa);ma*=ua;na*=ua;wa*=ua;x=aa*wa-g*na;M=
g*ma-P*wa;P=P*na-aa*ma;(ua=Math.sqrt(x*x+M*M+P*P))?(ua=1/ua,x*=ua,M*=ua,P*=ua):P=M=x=0;aa=na*P-wa*M;V=wa*x-ma*P;la=ma*M-na*x;(ua=Math.sqrt(aa*aa+V*V+la*la))?(ua=1/ua,aa*=ua,V*=ua,la*=ua):la=V=aa=0;b[0]=x;b[1]=aa;b[2]=ma;b[3]=0;b[4]=M;b[5]=V;b[6]=na;b[7]=0;b[8]=P;b[9]=la;b[10]=wa;b[11]=0;b[12]=-(x*ya+M*Ba+P*k);b[13]=-(aa*ya+V*Ba+la*k);b[14]=-(ma*ya+na*Ba+wa*k);b[15]=1;return b}function ha(b,k,R,g){const x=k[0],M=k[1];k=k[2];var P=g[0];const aa=g[1];var V=g[2];g=x-R[0];let la=M-R[1];R=k-R[2];let ma=
g*g+la*la+R*R;0<ma&&(ma=1/Math.sqrt(ma),g*=ma,la*=ma,R*=ma);let na=aa*R-V*la;V=V*g-P*R;P=P*la-aa*g;ma=na*na+V*V+P*P;0<ma&&(ma=1/Math.sqrt(ma),na*=ma,V*=ma,P*=ma);b[0]=na;b[1]=V;b[2]=P;b[3]=0;b[4]=la*P-R*V;b[5]=R*na-g*P;b[6]=g*V-la*na;b[7]=0;b[8]=g;b[9]=la;b[10]=R;b[11]=0;b[12]=x;b[13]=M;b[14]=k;b[15]=1;return b}function pa(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+
")"}function ra(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))}function Aa(b,k,R){b[0]=k[0]+R[0];b[1]=k[1]+R[1];b[2]=k[2]+R[2];b[3]=k[3]+R[3];b[4]=k[4]+R[4];b[5]=k[5]+R[5];b[6]=k[6]+R[6];b[7]=k[7]+R[7];b[8]=k[8]+R[8];b[9]=k[9]+R[9];b[10]=k[10]+R[10];
b[11]=k[11]+R[11];b[12]=k[12]+R[12];b[13]=k[13]+R[13];b[14]=k[14]+R[14];b[15]=k[15]+R[15];return b}function Ca(b,k,R){b[0]=k[0]-R[0];b[1]=k[1]-R[1];b[2]=k[2]-R[2];b[3]=k[3]-R[3];b[4]=k[4]-R[4];b[5]=k[5]-R[5];b[6]=k[6]-R[6];b[7]=k[7]-R[7];b[8]=k[8]-R[8];b[9]=k[9]-R[9];b[10]=k[10]-R[10];b[11]=k[11]-R[11];b[12]=k[12]-R[12];b[13]=k[13]-R[13];b[14]=k[14]-R[14];b[15]=k[15]-R[15];return b}function r(b,k,R){b[0]=k[0]*R;b[1]=k[1]*R;b[2]=k[2]*R;b[3]=k[3]*R;b[4]=k[4]*R;b[5]=k[5]*R;b[6]=k[6]*R;b[7]=k[7]*R;b[8]=
k[8]*R;b[9]=k[9]*R;b[10]=k[10]*R;b[11]=k[11]*R;b[12]=k[12]*R;b[13]=k[13]*R;b[14]=k[14]*R;b[15]=k[15]*R;return b}function G(b,k,R,g){b[0]=k[0]+R[0]*g;b[1]=k[1]+R[1]*g;b[2]=k[2]+R[2]*g;b[3]=k[3]+R[3]*g;b[4]=k[4]+R[4]*g;b[5]=k[5]+R[5]*g;b[6]=k[6]+R[6]*g;b[7]=k[7]+R[7]*g;b[8]=k[8]+R[8]*g;b[9]=k[9]+R[9]*g;b[10]=k[10]+R[10]*g;b[11]=k[11]+R[11]*g;b[12]=k[12]+R[12]*g;b[13]=k[13]+R[13]*g;b[14]=k[14]+R[14]*g;b[15]=k[15]+R[15]*g;return b}function ca(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]&&b[3]===
k[3]&&b[4]===k[4]&&b[5]===k[5]&&b[6]===k[6]&&b[7]===k[7]&&b[8]===k[8]&&b[9]===k[9]&&b[10]===k[10]&&b[11]===k[11]&&b[12]===k[12]&&b[13]===k[13]&&b[14]===k[14]&&b[15]===k[15]}function ta(b,k){const R=b[0],g=b[1],x=b[2],M=b[3],P=b[4],aa=b[5],V=b[6],la=b[7],ma=b[8],na=b[9],wa=b[10],ua=b[11],ya=b[12],Ba=b[13],Da=b[14];b=b[15];const Ga=k[0],Ha=k[1],Ka=k[2],Ia=k[3],Ja=k[4],Sa=k[5],qa=k[6],fb=k[7],eb=k[8],db=k[9],a=k[10],ab=k[11],Ma=k[12],ib=k[13],lb=k[14];k=k[15];return Math.abs(R-Ga)<=ba.EPSILON*Math.max(1,
Math.abs(R),Math.abs(Ga))&&Math.abs(g-Ha)<=ba.EPSILON*Math.max(1,Math.abs(g),Math.abs(Ha))&&Math.abs(x-Ka)<=ba.EPSILON*Math.max(1,Math.abs(x),Math.abs(Ka))&&Math.abs(M-Ia)<=ba.EPSILON*Math.max(1,Math.abs(M),Math.abs(Ia))&&Math.abs(P-Ja)<=ba.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ja))&&Math.abs(aa-Sa)<=ba.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Sa))&&Math.abs(V-qa)<=ba.EPSILON*Math.max(1,Math.abs(V),Math.abs(qa))&&Math.abs(la-fb)<=ba.EPSILON*Math.max(1,Math.abs(la),Math.abs(fb))&&Math.abs(ma-eb)<=
ba.EPSILON*Math.max(1,Math.abs(ma),Math.abs(eb))&&Math.abs(na-db)<=ba.EPSILON*Math.max(1,Math.abs(na),Math.abs(db))&&Math.abs(wa-a)<=ba.EPSILON*Math.max(1,Math.abs(wa),Math.abs(a))&&Math.abs(ua-ab)<=ba.EPSILON*Math.max(1,Math.abs(ua),Math.abs(ab))&&Math.abs(ya-Ma)<=ba.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Ma))&&Math.abs(Ba-ib)<=ba.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(ib))&&Math.abs(Da-lb)<=ba.EPSILON*Math.max(1,Math.abs(Da),Math.abs(lb))&&Math.abs(b-k)<=ba.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))}
const xa=e.create();e=Object.freeze({__proto__:null,copy:J,set:q,identity:H,transpose:m,invert:v,adjoint:w,determinant:D,multiply:ja,translate:Z,scale:l,rotate:B,rotateX:n,rotateY:d,rotateZ:f,fromTranslation:z,fromScaling:t,fromRotation:y,fromXRotation:K,fromYRotation:L,fromZRotation:Y,fromRotationTranslation:ka,fromQuat2:ea,getTranslation:I,getScaling:U,getRotation:ia,fromRotationTranslationScale:O,fromRotationTranslationScaleOrigin:Q,fromQuat:F,frustum:u,perspective:N,perspectiveFromFieldOfView:E,
ortho:X,lookAt:W,targetTo:ha,str:pa,frob:ra,add:Aa,subtract:Ca,multiplyScalar:r,multiplyScalarAndAdd:G,exactEquals:ca,equals:ta,mul:ja,sub:Ca});p.add=Aa;p.adjoint=w;p.copy=J;p.determinant=D;p.equals=ta;p.exactEquals=ca;p.frob=ra;p.fromQuat=F;p.fromQuat2=ea;p.fromRotation=y;p.fromRotationTranslation=ka;p.fromRotationTranslationScale=O;p.fromRotationTranslationScaleOrigin=Q;p.fromScaling=t;p.fromTranslation=z;p.fromXRotation=K;p.fromYRotation=L;p.fromZRotation=Y;p.frustum=u;p.getRotation=ia;p.getScaling=
U;p.getTranslation=I;p.identity=H;p.invert=v;p.lookAt=W;p.mat4=e;p.mul=ja;p.multiply=ja;p.multiplyScalar=r;p.multiplyScalarAndAdd=G;p.ortho=X;p.perspective=N;p.perspectiveFromFieldOfView=E;p.rotate=B;p.rotateX=n;p.rotateY=d;p.rotateZ=f;p.scale=l;p.set=q;p.str=pa;p.sub=Ca;p.subtract=Ca;p.targetTo=ha;p.translate=Z;p.transpose=m})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),function(p,e,ba,J,q,H){function m(){return!!e._pe}
function v(){return!!J("esri-wasm")}function w(){return n?n:n=q.create((f,z)=>{(new Promise(function(t,y){p(["./pe-wasm"],t,y)})).then(function(t){return t.peWasm}).then(({default:t})=>{t({locateFile:y=>H.getAssetUrl(`esri/geometry/support/${y}`),onAbort:y=>{z(Error(y))}}).then(y=>{D(y);f()})})})}function D(f){function z(K,L,Y){K[L]=Y(K[L])}e._pe=f;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(K){function L(){return K.apply(this,
arguments)||this}ba._inheritsLoose(L,K);L.prototype.destroy=function(){e._pe.destroy(this)};return L}(e._pe.PeGCSExtent);f=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var t of f)z(t.prototype,"getName",K=>function(){return K.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const K of[e._pe.PeGeogtran,e._pe.PeProjcs])z(K.prototype,"getParameters",L=>function(){const Y=Array(e.PeDefs.PE_PARM_MAX);let ka=
L.call(this);for(let ea=0;ea<Y.length;ea++){const I=e._pe.getValue(ka,"*");Y[ea]=I?e._pe.wrapPointer(I,e._pe.PeParameter):null;ka+=Int32Array.BYTES_PER_ELEMENT}return Y});z(e._pe.PeHorizon.prototype,"getCoord",K=>function(){const L=this.getSize();if(!L)return null;const Y=[],ka=K.call(this);B(Y,L,ka);return Y});z(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",K=>{const L=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let Y=null;var ka=K.call(this);if(!e._pe.compare(ka,e._pe.NULL)){Y=
[ka];const ea=this.getSteps();if(1<ea){ka=e._pe.getPointer(ka);for(let I=1;I<ea;I++)Y.push(e._pe.wrapPointer(ka+L*I,e._pe.PeGTlistExtendedGTs))}}return Y}});const y=e._pe._pe_getPeHorizonSize();t=K=>function(){let L=this._cache;L||(this._cache=L=new Map);if(L.has(K))return L.get(K);let Y=null;var ka=K.call(this);if(!e._pe.compare(ka,e._pe.NULL)){Y=[ka];const ea=ka.getNump();if(1<ea){ka=e._pe.getPointer(ka);for(let I=1;I<ea;I++)Y.push(e._pe.wrapPointer(ka+y*I,e._pe.PeHorizon))}}L.set(K,Y);return Y};
z(e._pe.PeProjcs.prototype,"horizonGcsGenerate",t);z(e._pe.PeProjcs.prototype,"horizonPcsGenerate",t);e._pe.PeObject.prototype.toString=function(K=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const L=e._pe.getPointer(this),Y=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(L,K,Y))}}function ja(f){if(f){var z=e._pe.getClass(f);z&&(z=e._pe.getCache(z))&&(f=e._pe.getPointer(f))&&delete z[f]}}function Z(f,z){const t=[];z=Array(z);for(let y=
0;y<f;y++)t.push(e._pe.ensureInt8(z));return t}function l(f){let z;Array.isArray(f[0])?(z=[],f.forEach(t=>{z.push(t[0],t[1])})):z=f;return z}function B(f,z,t,y=!1){if(y)for(y=0;y<2*z;y++)f[y]=e._pe.getValue(t+y*Float64Array.BYTES_PER_ELEMENT,"double");else{y=0===f.length;for(let K=0;K<z;K++)y&&(f[K]=Array(2)),f[K][0]=e._pe.getValue(t,"double"),f[K][1]=e._pe.getValue(t+Float64Array.BYTES_PER_ELEMENT,"double"),t+=2*Float64Array.BYTES_PER_ELEMENT}}let n;e._pe=null;(function(f){function z(K,L,Y){e._pe.ensureCache.prepare();
var ka=l(Y);const ea=Y===ka;ka=e._pe.ensureFloat64(ka);(K=e._pe._pe_geog_to_proj(e._pe.getPointer(K),L,ka))&&B(Y,L,ka,ea);return K}function t(K,L,Y){return y(K,L,Y,0)}function y(K,L,Y,ka){e._pe.ensureCache.prepare();var ea=l(Y);const I=Y===ea;ea=e._pe.ensureFloat64(ea);(K=e._pe._pe_proj_to_geog_center(e._pe.getPointer(K),L,ea,ka))&&B(Y,L,ea,I);return K}f.geogToProj=z;f.projGeog=function(K,L,Y,ka){switch(ka){case e.PeDefs.PE_TRANSFORM_P_TO_G:return t(K,L,Y);case e.PeDefs.PE_TRANSFORM_G_TO_P:return z(K,
L,Y)}return 0};f.projToGeog=t;f.projToGeogCenter=y})(e.PeCSTransformations||(e.PeCSTransformations={}));(function(f){f.init=function(){f.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;f.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;
f.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;f.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=
e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;f.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;
f.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));(function(f){function z(L,Y){let ka=null,ea=y[L];ea||(ea={},y[L]=ea);ea.hasOwnProperty(String(Y))?ka=ea[Y]:(L=e._pe.PeFactory.prototype.factoryByType(L,Y),e._pe.compare(L,e._pe.NULL)||(ka=L,ea[Y]=ka));return ka=t(ka)}function t(L){if(L){const Y=L.getType();switch(Y){case e.PeDefs.PE_TYPE_GEOGCS:L=e._pe.castObject(L,
e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:L=e._pe.castObject(L,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:L=e._pe.castObject(L,e._pe.PeGeogtran);break;default:Y&e.PeDefs.PE_TYPE_UNIT&&(L=e._pe.castObject(L,e._pe.PeUnit))}}return L}const y={},K={};f.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};f.coordsys=function(L){return z(e.PeDefs.PE_TYPE_COORDSYS,L)};f.factoryByType=z;f.fromString=function(L,Y){let ka=null,ea=K[L];ea||(ea={},K[L]=ea);ea.hasOwnProperty(Y)?
ka=ea[Y]:(L=e._pe.PeFactory.prototype.fromString(L,Y),e._pe.compare(L,e._pe.NULL)||(ka=L,ea[Y]=ka));return ka=t(ka)};f.geogcs=function(L){return z(e.PeDefs.PE_TYPE_GEOGCS,L)};f.geogtran=function(L){return z(e.PeDefs.PE_TYPE_GEOGTRAN,L)};f.getCode=function(L){return e._pe.PeFactory.prototype.getCode(L)};f.projcs=function(L){return z(e.PeDefs.PE_TYPE_PROJCS,L)};f.unit=function(L){return z(e.PeDefs.PE_TYPE_UNIT,L)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;(function(f){let z;f.init=function(){f.PE_GTLIST_OPTS_COMMON=
e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;z=e._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(t,y,K,L,Y,ka){let ea=null;const I=new e._pe.PeInteger(ka);try{const U=e._pe.PeGTlistExtended.prototype.getGTlist(t,y,K,L,Y,I);if(ka=I.val)if(ea=[U],1<ka){const ia=e._pe.getPointer(U);for(t=1;t<ka;t++)ea.push(e._pe.wrapPointer(ia+z*t,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(I)}return ea}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));(function(f){f.destroy=function(z){if(z&&
z.length){for(const t of z)ja(t),t.getEntries().forEach(y=>{ja(y);y=y.getGeogtran();ja(y);y.getParameters().forEach(ja);[y.getGeogcs1(),y.getGeogcs2()].forEach(K=>{ja(K);const L=K.getDatum();ja(L);ja(L.getSpheroid());ja(K.getPrimem());ja(K.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(z[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));(function(f){f.geogToGeog=function(z,t,y,K,L){e._pe.ensureCache.prepare();var Y=l(y);const ka=y===Y;Y=e._pe.ensureFloat64(Y);let ea=0;K&&
(ea=e._pe.ensureFloat64(K));(z=e._pe._pe_geog_to_geog(e._pe.getPointer(z),t,Y,ea,L))&&B(y,t,Y,ka);return z}})(e.PeGTTransformations||(e.PeGTTransformations={}));(function(f){function z(y,K,L,Y,ka,ea){e._pe.ensureCache.prepare();switch(y){case "dd":var I=e._pe._pe_geog_to_dd;var U=e.PeDefs.PE_DD_MAX;break;case "ddm":I=e._pe._pe_geog_to_ddm;U=e.PeDefs.PE_DDM_MAX;break;case "dms":I=e._pe._pe_geog_to_dms,U=e.PeDefs.PE_DMS_MAX}y=0;K&&(y=e._pe.getPointer(K));K=l(Y);K=e._pe.ensureFloat64(K);U=Z(L,U);Y=e._pe.ensureInt32(U);
if(ka=I(y,L,K,ka,Y))for(I=0;I<L;I++)ea[I]=e._pe.UTF8ToString(U[I]);return ka}function t(y,K,L,Y,ka){e._pe.ensureCache.prepare();switch(y){case "dd":var ea=e._pe._pe_dd_to_geog;break;case "ddm":ea=e._pe._pe_ddm_to_geog;break;case "dms":ea=e._pe._pe_dms_to_geog}y=0;K&&(y=e._pe.getPointer(K));K=Y.map(I=>e._pe.ensureString(I));Y=e._pe.ensureInt32(K);K=e._pe.ensureFloat64(Array(2*L));(ea=ea(y,L,Y,K))&&B(ka,L,K);return ea}f.geog_to_dms=function(y,K,L,Y,ka){return z("dms",y,K,L,Y,ka)};f.dms_to_geog=function(y,
K,L,Y){return t("dms",y,K,L,Y)};f.geog_to_ddm=function(y,K,L,Y,ka){return z("ddm",y,K,L,Y,ka)};f.ddm_to_geog=function(y,K,L,Y){return t("ddm",y,K,L,Y)};f.geog_to_dd=function(y,K,L,Y,ka){return z("dd",y,K,L,Y,ka)};f.dd_to_geog=function(y,K,L,Y){return t("dd",y,K,L,Y)}})(e.PeNotationDms||(e.PeNotationDms={}));(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
f.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geog_to_mgrs_extended=function(z,t,y,K,L,Y,ka){e._pe.ensureCache.prepare();let ea=0;z&&(ea=e._pe.getPointer(z));z=l(y);y=e._pe.ensureFloat64(z);z=Z(t,e.PeDefs.PE_MGRS_MAX);const I=e._pe.ensureInt32(z);if(K=e._pe._pe_geog_to_mgrs_extended(ea,t,y,K,L,Y,I))for(L=0;L<t;L++)ka[L]=e._pe.UTF8ToString(z[L]);return K};f.mgrs_to_geog_extended=function(z,
t,y,K,L){e._pe.ensureCache.prepare();let Y=0;z&&(Y=e._pe.getPointer(z));z=y.map(ka=>e._pe.ensureString(ka));y=e._pe.ensureInt32(z);z=e._pe.ensureFloat64(Array(2*t));(K=e._pe._pe_mgrs_to_geog_extended(Y,t,y,K,z))&&B(L,t,z);return K}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));(function(f){f.geog_to_usng=function(z,t,y,K,L,Y,ka){e._pe.ensureCache.prepare();let ea=0;z&&(ea=e._pe.getPointer(z));z=l(y);y=e._pe.ensureFloat64(z);z=Z(t,e.PeDefs.PE_MGRS_MAX);const I=e._pe.ensureInt32(z);if(K=e._pe._pe_geog_to_usng(ea,
t,y,K,L,Y,I))for(L=0;L<t;L++)ka[L]=e._pe.UTF8ToString(z[L]);return K};f.usng_to_geog=function(z,t,y,K){e._pe.ensureCache.prepare();var L=0;z&&(L=e._pe.getPointer(z));z=y.map(Y=>e._pe.ensureString(Y));y=e._pe.ensureInt32(z);z=e._pe.ensureFloat64(Array(2*t));(L=e._pe._pe_usng_to_geog(L,t,y,z))&&B(K,t,z);return L}})(e.PeNotationUsng||(e.PeNotationUsng={}));(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
f.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geog_to_utm=function(z,t,y,K,L){e._pe.ensureCache.prepare();var Y=0;z&&(Y=e._pe.getPointer(z));z=l(y);y=e._pe.ensureFloat64(z);z=Z(t,e.PeDefs.PE_UTM_MAX);const ka=e._pe.ensureInt32(z);if(K=e._pe._pe_geog_to_utm(Y,t,y,K,ka))for(Y=0;Y<t;Y++)L[Y]=e._pe.UTF8ToString(z[Y]);return K};f.utm_to_geog=function(z,t,y,K,L){e._pe.ensureCache.prepare();let Y=0;z&&(Y=e._pe.getPointer(z));z=y.map(ka=>e._pe.ensureString(ka));y=e._pe.ensureInt32(z);z=
e._pe.ensureFloat64(Array(2*t));(K=e._pe._pe_utm_to_geog(Y,t,y,K,z))&&B(L,t,z);return K}})(e.PeNotationUtm||(e.PeNotationUtm={}));(function(f){const z=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(t,y=f.PE_PCSINFO_OPTION_DOMAIN){let K,
L;z.has(t)&&(L=z.get(t),L[y]&&(K=L[y]));K||(K=e._pe.PePCSInfo.prototype.generate(t,y),L||(L=[],z.set(t,L)),L[y]=K);return K}})(e.PePCSInfo||(e.PePCSInfo={}));(function(f){f.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var d=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:m,isSupported:v,load:w,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},
get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:D});e._init=D;e.isLoaded=m;e.isSupported=v;e.load=w;e.pe=d})},"esri/assets":function(){define(["exports",
"./config","./core/urlUtils","./request"],function(p,e,ba,J){function q(H){return ba.join(e.assetsPath,H)}p.fetchAsset=function(H,m){return J(q(H),m)};p.getAssetUrl=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(p,e,ba){function J(l=Z){return[l[0],l[1],l[2],l[3]]}function q(l){return l[0]>=l[2]?0:l[2]-l[0]}function H(l){return l[1]>=l[3]?0:l[3]-l[1]}function m(l,B,n){return B>=l[0]&&n>=
l[1]&&B<=l[2]&&n<=l[3]}function v(l,B){l[0]=B[0];l[1]=B[1];l[2]=B[2];l[3]=B[3];return l}function w(l){return 4===l.length}function D(l,B,n){return l<B?B:l>n?n:l}const ja=[Infinity,Infinity,-Infinity,-Infinity],Z=[0,0,0,0];p.NEGATIVE_INFINITY=ja;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=Z;p.allFinite=function(l){for(let B=0;4>B;B++)if(!isFinite(l[B]))return!1;return!0};p.area=function(l){return q(l)*H(l)};p.center=function(l,B=[0,0]){B[0]=(l[0]+l[2])/2;B[1]=
(l[1]+l[3])/2;return B};p.clone=function(l){return[l[0],l[1],l[2],l[3]]};p.contains=function(l,B){return B[0]>=l[0]&&B[2]<=l[2]&&B[1]>=l[1]&&B[3]<=l[3]};p.containsPoint=function(l,B){return m(l,B[0],B[1])};p.containsPointObject=function(l,B){return m(l,B.x,B.y)};p.containsPointWithMargin=function(l,B,n){return B[0]>=l[0]-n&&B[1]>=l[1]-n&&B[0]<=l[2]+n&&B[1]<=l[3]+n};p.containsXY=m;p.create=J;p.diameter=function(l){const B=q(l);l=H(l);return Math.sqrt(B*B+l*l)};p.distance=function(l,B){const n=(l[1]+
l[3])/2,d=Math.max(Math.abs(B[0]-(l[0]+l[2])/2)-q(l)/2,0);l=Math.max(Math.abs(B[1]-n)-H(l)/2,0);return Math.sqrt(d*d+l*l)};p.empty=function(l){return l?v(l,ja):J(ja)};p.equals=function(l,B,n){if(null==l||null==B)return l===B;if(!w(l)||!w(B))return!1;if(n)for(let d=0;d<l.length;d++){if(!n(l[d],B[d]))return!1}else for(n=0;n<l.length;n++)if(l[n]!==B[n])return!1;return!0};p.expand=function(l,B,n=l){if("length"in B)if(w(B))n[0]=Math.min(l[0],B[0]),n[1]=Math.min(l[1],B[1]),n[2]=Math.max(l[2],B[2]),n[3]=
Math.max(l[3],B[3]);else{if(2===B.length||3===B.length)n[0]=Math.min(l[0],B[0]),n[1]=Math.min(l[1],B[1]),n[2]=Math.max(l[2],B[0]),n[3]=Math.max(l[3],B[1])}else switch(B.type){case "extent":n[0]=Math.min(l[0],B.xmin);n[1]=Math.min(l[1],B.ymin);n[2]=Math.max(l[2],B.xmax);n[3]=Math.max(l[3],B.ymax);break;case "point":n[0]=Math.min(l[0],B.x),n[1]=Math.min(l[1],B.y),n[2]=Math.max(l[2],B.x),n[3]=Math.max(l[3],B.y)}return n};p.expandPointInPlace=function(l,B){B[0]<l[0]&&(l[0]=B[0]);B[0]>l[2]&&(l[2]=B[0]);
B[1]<l[1]&&(l[1]=B[1]);B[1]>l[3]&&(l[3]=B[1])};p.expandWithNestedArray=function(l,B,n=l){const d=B.length;let f=l[0],z=l[1],t=l[2];l=l[3];for(let y=0;y<d;y++){const K=B[y];f=Math.min(f,K[0]);z=Math.min(z,K[1]);t=Math.max(t,K[0]);l=Math.max(l,K[1])}n[0]=f;n[1]=z;n[2]=t;n[3]=l;return n};p.fromExtent=function(l,B=J()){B[0]=l.xmin;B[1]=l.ymin;B[2]=l.xmax;B[3]=l.ymax;return B};p.fromValues=function(l,B,n,d,f=J()){f[0]=l;f[1]=B;f[2]=n;f[3]=d;return f};p.height=H;p.intersection=function(l,B,n=l){const d=
B[0],f=B[1],z=B[2];B=B[3];n[0]=D(l[0],d,z);n[1]=D(l[1],f,B);n[2]=D(l[2],d,z);n[3]=D(l[3],f,B);return n};p.intersects=function(l,B){return Math.max(B[0],l[0])<=Math.min(B[2],l[2])&&Math.max(B[1],l[1])<=Math.min(B[3],l[3])};p.is=w;p.isPoint=function(l){return(0===q(l)||!isFinite(l[0]))&&(0===H(l)||!isFinite(l[1]))};p.offset=function(l,B,n,d=l){d[0]=l[0]+B;d[1]=l[1]+n;d[2]=l[2]+B;d[3]=l[3]+n;return d};p.pad=function(l,B,n=l){n[0]=l[0]-B;n[1]=l[1]-B;n[2]=l[2]+B;n[3]=l[3]+B;return n};p.set=v;p.setMax=
function(l,B,n=l){n[2]=B[0];n[3]=B[1];n!==l&&(n[0]=l[0],n[1]=l[1]);return l};p.setMin=function(l,B,n=l){n[0]=B[0];n[1]=B[1];n!==l&&(n[2]=l[2],n[3]=l[3]);return n};p.size=function(l,B){B[0]=l[2]-l[0];B[1]=l[3]-l[1]};p.toExtent=function(l,B){return new ba({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:B})};p.width=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,e){const ba=Math.PI/180;var J=
e.earth.radius;const q=e.earth.eccentricitySquared;J={a1:J*q,a2:J*q*J*q,a3:J*q*q/2,a4:J*q*J*q*2.5,a5:J*q+J*q*q/2,a6:1-q};e={4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=J;p.spheroids=e;p.toRadians=ba;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function e(J){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(J&&J.steps)for(const q of J.steps)q instanceof p?this.steps.push(q):this.steps.push(new p({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}e.cacheKey=function(J,q){return[void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==
J.wkt?J.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};e.fromGE=function(J){const q=new e;let H="";for(const m of J.steps)J=p.fromGE(m),q.steps.push(J),H+=J.uid.toString()+",";q._cached_projection={};q._gtlistentry=null;q._chain=H;return q};var ba=e.prototype;ba.getInverse=function(){const J=new e;J.steps=[];for(let q=this.steps.length-1;0<=q;q--)J.steps.push(this.steps[q].getInverse());return J};ba.getGTListEntry=
function(){let J="";for(const q of this.steps)J+=q.uid.toString()+",";J!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=J);return this._gtlistentry};ba.assignCachedGe=function(J,q,H){this._cached_projection[e.cacheKey(J,q)]=H};ba.getCachedGeTransformation=function(J,q){let H="";for(const m of this.steps)H+=m.uid.toString()+",";H!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=H);J=this._cached_projection[e.cacheKey(J,q)];return void 0===
J?null:J};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let e=0;return function(){function ba(J=null){this.uid=e++;J?(this._wkt=void 0!==J.wkt?J.wkt:null,this._wkid=void 0!==J.wkid?J.wkid:-1,this._isInverse=void 0!==J.isInverse?!0===J.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ba.fromGE=function(J){const q=new ba;q._wkt=J.wkt;q._wkid=J.wkid;q._isInverse=J.isInverse;return q};ba.prototype.getInverse=
function(){const J=new ba;J._wkt=this.wkt;J._wkid=this._wkid;J._isInverse=!this.isInverse;return J};p._createClass(ba,[{key:"wkt",get:function(){return this._wkt},set:function(J){this._wkt=J;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(J){this._wkid=J;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(J){this._isInverse=J;this.uid=e++}}]);return ba}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let e=
function(m,v,w){this.x=m;this.y=v;this.spatialReference=w;this.m=this.z=void 0},ba=function(m,v,w,D){this.rings=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;w&&(this.hasZ=w);D&&(this.hasM=D)},J=function(m,v,w,D){this.paths=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;w&&(this.hasZ=w);D&&(this.hasM=D)},q=function(m,v,w,D){this.points=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;w&&(this.hasZ=w);D&&(this.hasM=D)},H=function(m,v,w,D,ja){this.xmin=m;this.ymin=v;this.xmax=w;this.ymax=
D;this.spatialReference=ja;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(m,v){return null==v?null:m.convertJSONToGeometry(v)},exportPoint:function(m,v,w){w=new e(m.getPointX(v),m.getPointY(v),w);const D=m.hasZ(v),ja=m.hasM(v);D&&(w.z=m.getPointZ(v));ja&&(w.m=m.getPointM(v));return w},exportPolygon:function(m,v,w){return new ba(m.exportPaths(v),w,m.hasZ(v),m.hasM(v))},exportPolyline:function(m,v,w){return new J(m.exportPaths(v),w,m.hasZ(v),m.hasM(v))},
exportMultipoint:function(m,v,w){return new q(m.exportPoints(v),w,m.hasZ(v),m.hasM(v))},exportExtent:function(m,v,w){var D=m.hasZ(v);const ja=m.hasM(v);w=new H(m.getXMin(v),m.getYMin(v),m.getXMax(v),m.getYMax(v),w);D&&(D=m.getZExtent(v),w.zmin=D.vmin,w.zmax=D.vmax);ja&&(m=m.getMExtent(v),w.mmin=m.vmin,w.mmax=m.vmax);return w}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature",
"../../OptimizedGeometry"],function(p,e,ba,J){function q(t){const y=[];t.forEach(K=>y.push(K));return y}function*H(t){switch(t.type){case "Feature":yield t;break;case "FeatureCollection":for(const y of t.features)y&&(yield y)}}function*m(t){if(!t)return null;switch(t.type){case "Point":yield t.coordinates;break;case "LineString":case "MultiPoint":yield*t.coordinates;break;case "MultiLineString":case "Polygon":for(const y of t.coordinates)yield*y;break;case "MultiPolygon":for(const y of t.coordinates)for(const K of y)yield*K}}
function*v(t,y={}){const {geometryType:K,objectIdFieldName:L}=y;for(;;){const {value:Y,done:ka}=t.next();if(ka)break;const {geometry:ea,properties:I,id:U}=Y;if(ea&&z[ea.type]!==K)continue;const ia=I||{};L&&null!=U&&!ia[L]&&(ia[L]=U);yield new ba(ea?Z(new J,ea,y):null,ia)}}function w(t){for(;;){const {value:y,done:K}=t.next();if(K)return!1;if(2<y.length)return!0}}function D(t){let y=0;for(let K=0;K<t.length;K++){const L=t[K],Y=t[(K+1)%t.length];y+=L[0]*Y[1]-Y[0]*L[1]}return 0>=y}function ja(t){const y=
t[0],K=t[t.length-1];y[0]===K[0]&&y[1]===K[1]&&y[2]===K[2]||t.push(y);return t}function Z(t,y,K){switch(y.type){case "LineString":return n(t,y.coordinates,K),t;case "MultiLineString":for(const Y of y.coordinates)n(t,Y,K);return t;case "MultiPoint":return n(t,y.coordinates,K),t;case "MultiPolygon":for(var L of y.coordinates)for(l(t,L[0],K),y=1;y<L.length;y++)B(t,L[y],K);return t;case "Point":return f(t,y.coordinates,K),t;case "Polygon":L=y.coordinates;l(t,L[0],K);for(y=1;y<L.length;y++)B(t,L[y],K);
return t}}function l(t,y,K){y=ja(y);D(y)?n(t,y,K):d(t,y,K)}function B(t,y,K){y=ja(y);D(y)?d(t,y,K):n(t,y,K)}function n(t,y,K){for(const L of y)f(t,L,K);t.lengths.push(y.length)}function d(t,y,K){for(let L=y.length-1;0<=L;L--)f(t,y[L],K);t.lengths.push(y.length)}function f(t,y,K){const [L,Y,ka]=y;t.coords.push(L,Y);K.hasZ&&t.coords.push(ka||0)}const z={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",
MultiPolygon:"esriGeometryPolygon"};p.createOptimizedFeatures=function(t,y){a:for(t=v(H(t),y),y=[];;){const {value:K,done:L}=t.next();if(L){t=y;break a}y.push(K)}return t};p.inferLayerProperties=function(t,y={}){const K=H(t);t=[];const L=new Set,Y=new Set;var ka=!1;let ea=Number.NEGATIVE_INFINITY,I=null,U=!1,ia=void 0;({geometryType:y=null}=y);for(var O=!1;;){const {value:u,done:N}=K.next();if(N){var Q=I&&1===I.length&&I[0]||null;if(Q)for(const ha of t)ha.name===Q&&(ha.type="esriFieldTypeOID");return{fields:t,
geometryType:y,hasZ:ka,maxObjectId:Math.max(0,ea),objectIdFieldName:Q,objectIdFieldType:ia,unknownFields:q(Y)}}const {geometry:E,properties:X,id:W}=u;if(E&&(y||(y=z[E.type]),z[E.type]!==y))continue;ka||(ka=m(E),ka=w(ka));!U&&(U=null!=W)&&(ia=typeof W,"number"===ia&&(I=Object.keys(X).filter(ha=>X[ha]===W)));U&&"number"===ia&&null!=W&&(ea=Math.max(ea,W),1<I.length?I=I.filter(ha=>X[ha]===W):1===I.length&&(I=X[I[0]]===W?I:[]));if(!O&&X)for(Q in O=!0,X)if(!L.has(Q)){var F=X[Q];if(null==F)O=!1,Y.add(Q);
else{a:switch(typeof F){case "string":F="esriFieldTypeString";break a;case "number":F="esriFieldTypeDouble";break a;default:F="unknown"}"unknown"===F?Y.add(Q):(Y.delete(Q),L.add(Q),t.push({name:Q,alias:Q,type:F}))}}}};p.validateGeoJSON=function(t){if(!t)throw new e("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==t.type&&"FeatureCollection"!==t.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:t});({crs:t}=t);if(t){var y=
"string"===typeof t?t:"name"===t.type?t.properties.name:null,K=/.*(CRS84H?|4326)$/i;if(!y||!K.test(y))throw new e("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t});}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../../../symbols/support/defaultsJSON"],function(p,e,ba,J){p.createDefaultAttributesFunction=function(q,H){if(e("csp-restrictions"))return()=>
({[H]:null,...q});try{let m=`this.${H} = null;`;for(const w in q){const D=w.indexOf(".")?`["${w}"]`:`.${w}`;m+=`this${D} = ${JSON.stringify(q[w])};`}const v=new Function(m);return()=>new v}catch(m){return()=>({[H]:null,...q})}};p.createDefaultTemplate=function(q={}){return[{name:"New Feature",description:"",prototype:{attributes:ba.clone(q)}}]};p.createDrawingInfo=function(q){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===q||"esriGeometryMultipoint"===q?J.defaultPointSymbolJSON:"esriGeometryPolyline"===
q?J.defaultPolylineSymbolJSON:J.defaultPolygonSymbolJSON}}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(p){const e=[252,146,31,255],ba={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},J={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};p.defaultColor=e;p.defaultOutlineColor=[153,153,153,255];p.defaultPointSymbolJSON=ba;p.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};p.defaultPolylineSymbolJSON=J;p.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};p.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};p.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};p.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(p,e,ba,J,q,H,m,v,w,D){return function(){function ja(l){this.geometryInfo=l;this._boundsStore=new w.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new q;this.featureAdapter=D.optimizedFeatureQueryEngineAdapter}var Z=ja.prototype;Z.add=function(l){this._add(l);this._emitChanged()};Z.addMany=function(l){for(const B of l)this._add(B);this._emitChanged()};Z.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Z.removeById=function(l){l=
this._featuresById.get(l);if(!l)return null;this._remove(l);this._emitChanged();return l};Z.removeManyById=function(l){this._boundsStore.invalidateIndex();for(const B of l)(l=this._featuresById.get(B))&&this._remove(l);this._emitChanged()};Z.forEachBounds=function(l,B,n){for(const d of l)(l=this._boundsStore.get(d.objectId))&&B(v.fromRect(n,l))};Z.getFeature=function(l){return this._featuresById.get(l)};Z.has=function(l){return this._featuresById.has(l)};Z.forEach=function(l){this._featuresById.forEach(B=>
l(B))};Z.forEachInBounds=function(l,B){this._boundsStore.forEachInBounds(l,n=>{B(this._featuresById.get(n))})};Z.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Z.sweep=function(){let l=!1;this._featuresById.forEach((B,n)=>{this._markedIds.has(n)||(l=!0,this._remove(B))});this._markedIds.clear();l&&this._emitChanged()};Z._emitChanged=function(){this.events.emit("changed",void 0)};Z._add=function(l){if(l){var B=l.objectId;if(null==B)ba.getLogger("esri.layers.graphics.data.FeatureStore").error(new J("featurestore:invalid-feature",
"feature id is missing",{feature:l}));else{var n=this._featuresById.get(B);this._markedIds.add(B);if(n){l.displayId=n.displayId;var d=this._boundsStore.get(B);this._boundsStore.delete(B)}else if(e.isSome(this.onFeatureAdd))this.onFeatureAdd(l);l.geometry&&l.geometry.coords&&l.geometry.coords.length?(d=m.getBoundsOptimizedGeometry(d||H.create(),l.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(B,d)):this._boundsStore.set(B,null);this._featuresById.set(B,l)}}};Z._remove=
function(l){if(e.isSome(this.onFeatureRemove))this.onFeatureRemove(l);this._markedIds.delete(l.objectId);this._boundsStore.delete(l.objectId);this._featuresById.delete(l.objectId);return l};p._createClass(ja,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const l=H.create(H.NEGATIVE_INFINITY);this._featuresById.forEach(B=>{if(B=this._boundsStore.get(B.objectId))l[0]=Math.min(B[0],l[0]),l[1]=Math.min(B[1],l[1]),l[2]=Math.max(B[2],l[2]),l[3]=Math.max(B[3],l[3])});return l}},{key:"storeStatistics",get:function(){let l=0;this._featuresById.forEach(B=>{B.geometry&&B.geometry.coords&&(l+=B.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:l/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return ja}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(p,e,ba,J,q){let H=function(){function m(){this._emitter=new m.EventEmitter(this)}var v=m.prototype;v.emit=function(w,D){return this._emitter.emit(w,D)};v.on=function(w,D){return this._emitter.on(w,D)};v.once=function(w,D){return this._emitter.once(w,D)};v.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return m}();(function(m){let v=function(){function D(Z=null){this.target=
Z;this._listenersMap=null}var ja=D.prototype;ja.clear=function(){this._listenersMap&&this._listenersMap.clear()};ja.emit=function(Z,l){Z=this._listenersMap&&this._listenersMap.get(Z);if(!Z)return!1;const B=this.target||this;[...Z].forEach(n=>{n.call(B,l)});return 0<Z.length};ja.on=function(Z,l){if(Array.isArray(Z)){var B=Z.map(n=>this.on(n,l));return ba.handlesGroup(B)}if(-1<Z.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);B=this._listenersMap.get(Z)||[];B.push(l);this._listenersMap.set(Z,B);return{remove:()=>{const n=this._listenersMap&&this._listenersMap.get(Z)||[],d=n.indexOf(l);0<=d&&n.splice(d,1)}}};ja.once=function(Z,l){let B;return B=this.on(Z,n=>{B.remove();l.call(null,n)})};ja.hasEventListener=function(Z){Z=this._listenersMap&&this._listenersMap.get(Z);return null!=Z&&0<Z.length};return D}();m.EventEmitter=v;m.EventedMixin=D=>{D=function(ja){function Z(){var B=ja.apply(this,arguments)||
this;B._emitter=new v;return B}p._inheritsLoose(Z,ja);var l=Z.prototype;l.emit=function(B,n){return this._emitter.emit(B,n)};l.on=function(B,n){return this._emitter.on(B,n)};l.once=function(B,n){return this._emitter.once(B,n)};l.hasEventListener=function(B){return this._emitter.hasEventListener(B)};return Z}(D);return D=e.__decorate([J.subclass("esri.core.Evented")],D)};let w=function(D){function ja(){var l=D.apply(this,arguments)||this;l._emitter=new H.EventEmitter(p._assertThisInitialized(l));return l}
p._inheritsLoose(ja,D);var Z=ja.prototype;Z.emit=function(l,B){return this._emitter.emit(l,B)};Z.on=function(l,B){return this._emitter.on(l,B)};Z.once=function(l,B){return this._emitter.once(l,B)};Z.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return ja}(q);w=e.__decorate([J.subclass("esri.core.Evented")],w);m.EventedAccessor=w})(H||(H={}));return H})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(p,
e,ba,J){function q(d=B){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function H(d,f,z,t,y,K,L=q()){L[0]=d;L[1]=f;L[2]=z;L[3]=t;L[4]=y;L[5]=K;return L}function m(d){return d[0]>=d[3]?0:d[3]-d[0]}function v(d){return d[1]>=d[4]?0:d[4]-d[1]}function w(d){return d[2]>=d[5]?0:d[5]-d[2]}function D(d,f){return Math.max(f[0],d[0])<=Math.min(f[3],d[3])&&Math.max(f[1],d[1])<=Math.min(f[4],d[4])&&Math.max(f[2],d[2])<=Math.min(f[5],d[5])}function ja(d,f){d[0]=f[0];d[1]=f[1];d[2]=f[2];d[3]=f[3];d[4]=f[4];d[5]=f[5];return d}
function Z(d){return 6===d.length}const l=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],B=[0,0,0,0,0,0],n=q();p.NEGATIVE_INFINITY=l;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=B;p.allFinite=function(d){for(let f=0;6>f;f++)if(!isFinite(d[f]))return!1;return!0};p.center=function(d,f=[0,0,0]){f[0]=d[0]+m(d)/2;f[1]=d[1]+v(d)/2;f[2]=d[2]+w(d)/2;return f};p.contains=function(d,f){return f[0]>=d[0]&&f[1]>=d[1]&&f[2]>=d[2]&&f[3]<=d[3]&&f[4]<=d[4]&&f[5]<=
d[5]};p.containsPoint=function(d,f){return f[0]>=d[0]&&f[1]>=d[1]&&f[2]>=d[2]&&f[0]<=d[3]&&f[1]<=d[4]&&f[2]<=d[5]};p.containsPointWithMargin=function(d,f,z){return f[0]>=d[0]-z&&f[1]>=d[1]-z&&f[2]>=d[2]-z&&f[0]<=d[3]+z&&f[1]<=d[4]+z&&f[2]<=d[5]+z};p.create=q;p.depth=v;p.diameter=function(d){const f=m(d),z=w(d);d=v(d);return Math.sqrt(f*f+z*z+d*d)};p.empty=function(d){return d?ja(d,l):q(l)};p.equals=function(d,f,z){if(e.isNone(d)||e.isNone(f))return d===f;if(!Z(d)||!Z(f))return!1;if(z)for(let t=0;t<
d.length;t++){if(!z(d[t],f[t]))return!1}else for(z=0;z<d.length;z++)if(d[z]!==f[z])return!1;return!0};p.expandWithAABB=function(d,f){d[0]=Math.min(d[0],f[0]);d[1]=Math.min(d[1],f[1]);d[2]=Math.min(d[2],f[2]);d[3]=Math.max(d[3],f[3]);d[4]=Math.max(d[4],f[4]);d[5]=Math.max(d[5],f[5])};p.expandWithBuffer=function(d,f,z=0,t=f.length/3){let y=d[0],K=d[1],L=d[2],Y=d[3],ka=d[4],ea=d[5];for(let I=0;I<t;I++)y=Math.min(y,f[z+3*I]),K=Math.min(K,f[z+3*I+1]),L=Math.min(L,f[z+3*I+2]),Y=Math.max(Y,f[z+3*I]),ka=
Math.max(ka,f[z+3*I+1]),ea=Math.max(ea,f[z+3*I+2]);d[0]=y;d[1]=K;d[2]=L;d[3]=Y;d[4]=ka;d[5]=ea};p.expandWithNestedArray=function(d,f,z){const t=f.length;let y=d[0],K=d[1],L=d[2],Y=d[3],ka=d[4],ea=d[5];if(z)for(z=0;z<t;z++){var I=f[z];y=Math.min(y,I[0]);K=Math.min(K,I[1]);L=Math.min(L,I[2]);Y=Math.max(Y,I[0]);ka=Math.max(ka,I[1]);ea=Math.max(ea,I[2])}else for(z=0;z<t;z++)I=f[z],y=Math.min(y,I[0]),K=Math.min(K,I[1]),Y=Math.max(Y,I[0]),ka=Math.max(ka,I[1]);d[0]=y;d[1]=K;d[2]=L;d[3]=Y;d[4]=ka;d[5]=ea};
p.expandWithOffset=function(d,f,z,t){d[0]=Math.min(d[0],d[0]+f);d[3]=Math.max(d[3],d[3]+f);d[1]=Math.min(d[1],d[1]+z);d[4]=Math.max(d[4],d[4]+z);d[2]=Math.min(d[2],d[2]+t);d[5]=Math.max(d[5],d[5]+t)};p.expandWithRect=function(d,f){d[0]=Math.min(d[0],f[0]);d[1]=Math.min(d[1],f[1]);d[3]=Math.max(d[3],f[2]);d[4]=Math.max(d[4],f[3])};p.expandWithVec3=function(d,f){d[0]=Math.min(d[0],f[0]);d[1]=Math.min(d[1],f[1]);d[2]=Math.min(d[2],f[2]);d[3]=Math.max(d[3],f[0]);d[4]=Math.max(d[4],f[1]);d[5]=Math.max(d[5],
f[2])};p.fromExtent=function(d,f=q()){f[0]=d.xmin;f[1]=d.ymin;f[2]=d.zmin;f[3]=d.xmax;f[4]=d.ymax;f[5]=d.zmax;return f};p.fromMinMax=function(d,f,z=q()){z[0]=d[0];z[1]=d[1];z[2]=d[2];z[3]=f[0];z[4]=f[1];z[5]=f[2];return z};p.fromRect=function(d,f){d[0]=f[0];d[1]=f[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=f[2];d[4]=f[3];d[5]=Number.POSITIVE_INFINITY;return d};p.fromValues=H;p.getMax=function(d,f){f[0]=d[3];f[1]=d[4];f[2]=d[5];return f};p.getMin=function(d,f){f[0]=d[0];f[1]=d[1];f[2]=d[2];return f};p.height=
w;p.intersects=D;p.intersectsClippingArea=function(d,f){return e.isNone(f)?!0:D(d,f)};p.is=Z;p.isPoint=function(d){return 0===m(d)&&0===v(d)&&0===w(d)};p.maximumDimension=function(d){return Math.max(m(d),w(d),v(d))};p.offset=function(d,f,z,t,y=d){y[0]=d[0]+f;y[1]=d[1]+z;y[2]=d[2]+t;y[3]=d[3]+f;y[4]=d[4]+z;y[5]=d[5]+t;return y};p.scale=function(d,f,z=d){const t=d[0]+m(d)/2,y=d[1]+v(d)/2,K=d[2]+w(d)/2;z[0]=t+(d[0]-t)*f;z[1]=y+(d[1]-y)*f;z[2]=K+(d[2]-K)*f;z[3]=t+(d[3]-t)*f;z[4]=y+(d[4]-y)*f;z[5]=K+(d[5]-
K)*f;return z};p.set=ja;p.setMax=function(d,f,z=d){z[3]=f[0];z[4]=f[1];z[5]=f[2];z!==d&&(z[0]=d[0],z[1]=d[1],z[2]=d[2]);return d};p.setMin=function(d,f,z=d){z[0]=f[0];z[1]=f[1];z[2]=f[2];z!==d&&(z[3]=d[3],z[4]=d[4],z[5]=d[5]);return z};p.size=function(d,f=[0,0,0]){f[0]=m(d);f[1]=v(d);f[2]=w(d);return f};p.toExtent=function(d,f){return isFinite(d[2])||isFinite(d[5])?new ba({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:f}):new ba({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],
spatialReference:f})};p.toRect=function(d,f){f||(f=J.create());f[0]=d[0];f[1]=d[1];f[2]=d[3];f[3]=d[4];return f};p.width=m;p.wrap=function(d,f,z,t,y,K){return H(d,f,z,t,y,K,n)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../chunks/rbush"],function(p,e,ba){function J(m,v){q.minX=v[0];q.minY=v[1];q.maxX=v[2];q.maxY=v[3];return m.search(q)}const q={minX:0,minY:0,maxX:0,maxY:0};let H=function(){function m(){this._indexInvalid=
!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=ba.rbush(9,e("csp-restrictions")?w=>({minX:w[0],minY:w[1],maxX:w[2],maxY:w[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const w=Array(this._idByBounds.size);let D=0;this._idByBounds.forEach((ja,Z)=>{w[D++]=Z});this._indexInvalid=!1;this._index.clear();this._index.load(w)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(w=>this._idByBounds.has(w))),this._boundsToLoad.length=
0)}}var v=m.prototype;v.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};v.delete=function(w){const D=this._boundsById.get(w);this._boundsById.delete(w);D&&(this._idByBounds.delete(D),this._indexInvalid||this._index.remove(D))};v.forEachInBounds=function(w,D){this._loadIndex();for(const ja of J(this._index,w))D(this._idByBounds.get(ja))};v.get=function(w){return this._boundsById.get(w)};v.has=function(w){return this._boundsById.has(w)};
v.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};v.set=function(w,D){if(!this._indexInvalid){const ja=this._boundsById.get(w);ja&&(this._index.remove(ja),this._idByBounds.delete(ja))}this._boundsById.set(w,D);D&&(this._idByBounds.set(D,w),this._indexInvalid||(this._boundsToLoad.push(D),5E4<this._boundsToLoad.length&&this._loadIndex()))};return m}();p.BoundsStore=H;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/rbush":function(){define(["exports",
"./quickselect"],function(p,e){function ba(n,d){if(!(this instanceof ba))return new ba(n,d);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function J(n,d){q(n,0,n.children.length,d,n)}function q(n,d,f,z,t){t||(t=l(null));t.minX=Infinity;t.minY=Infinity;t.maxX=-Infinity;t.maxY=-Infinity;for(var y;d<f;d++)y=n.children[d],H(t,n.leaf?z(y):y);return t}function H(n,d){n.minX=Math.min(n.minX,
d.minX);n.minY=Math.min(n.minY,d.minY);n.maxX=Math.max(n.maxX,d.maxX);n.maxY=Math.max(n.maxY,d.maxY);return n}function m(n,d){return n.minX-d.minX}function v(n,d){return n.minY-d.minY}function w(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function D(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ja(n,d){return n.minX<=d.minX&&n.minY<=d.minY&&d.maxX<=n.maxX&&d.maxY<=n.maxY}function Z(n,d){return d.minX<=n.maxX&&d.minY<=n.maxY&&d.maxX>=n.minX&&d.maxY>=n.minY}function l(n){return{children:n,height:1,
leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function B(n,d,f,z,t){for(var y=[d,f],K;y.length;)f=y.pop(),d=y.pop(),f-d<=z||(K=d+Math.ceil((f-d)/z/2)*z,e.quickselect(n,K,d,f,t),y.push(d,K,K,f))}ba.prototype={all:function(){return this._all(this.data,[])},search:function(n){var d=this.data,f=[],z=this.toBBox;if(!Z(n,d))return f;for(var t=[],y,K,L,Y;d;){y=0;for(K=d.children.length;y<K;y++)L=d.children[y],Y=d.leaf?z(L):L,Z(n,Y)&&(d.leaf?f.push(L):ja(n,Y)?this._all(L,f):t.push(L));
d=t.pop()}return f},collides:function(n){var d=this.data,f=this.toBBox;if(!Z(n,d))return!1;for(var z=[],t,y,K,L;d;){t=0;for(y=d.children.length;t<y;t++)if(K=d.children[t],L=d.leaf?f(K):K,Z(n,L)){if(d.leaf||ja(n,L))return!0;z.push(K)}d=z.pop()}return!1},load:function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var d=0,f=n.length;d<f;d++)this.insert(n[d]);return this}n=this._build(n.slice(),0,n.length-1,0);this.data.children.length?this.data.height===n.height?this._splitRoot(this.data,
n):(this.data.height<n.height&&(d=this.data,this.data=n,n=d),this._insert(n,this.data.height-n.height-1,!0)):this.data=n;return this},insert:function(n){n&&this._insert(n,this.data.height-1);return this},clear:function(){this.data=l([]);return this},remove:function(n,d){if(!n)return this;for(var f=this.data,z=this.toBBox(n),t=[],y=[],K,L,Y,ka;f||t.length;){f||(f=t.pop(),L=t[t.length-1],K=y.pop(),ka=!0);if(f.leaf){a:{Y=n;var ea=f.children,I=d;if(I){for(var U=0;U<ea.length;U++)if(I(Y,ea[U])){Y=U;break a}Y=
-1}else Y=ea.indexOf(Y)}if(-1!==Y){f.children.splice(Y,1);t.push(f);this._condense(t);break}}ka||f.leaf||!ja(f,z)?L?(K++,f=L.children[K],ka=!1):f=null:(t.push(f),y.push(K),K=0,L=f,f=f.children[0])}return this},toBBox:function(n){return n},compareMinX:m,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(n){this.data=n;return this},_all:function(n,d){for(var f=[];n;)n.leaf?d.push.apply(d,n.children):f.push.apply(f,n.children),n=f.pop();return d},_build:function(n,d,f,z){var t=f-d+1,
y=this._maxEntries;if(t<=y){var K=l(n.slice(d,f+1));J(K,this.toBBox);return K}z||(z=Math.ceil(Math.log(t)/Math.log(y)),y=Math.ceil(t/Math.pow(y,z-1)));K=l([]);K.leaf=!1;K.height=z;t=Math.ceil(t/y);y=t*Math.ceil(Math.sqrt(y));var L;for(B(n,d,f,y,this.compareMinX);d<=f;d+=y){var Y=Math.min(d+y-1,f);B(n,d,Y,t,this.compareMinY);for(L=d;L<=Y;L+=t){var ka=Math.min(L+t-1,Y);K.children.push(this._build(n,L,ka,z-1))}}J(K,this.toBBox);return K},_chooseSubtree:function(n,d,f,z){for(var t,y,K,L,Y,ka,ea,I;;){z.push(d);
if(d.leaf||z.length-1===f)break;ea=I=Infinity;t=0;for(y=d.children.length;t<y;t++)K=d.children[t],Y=w(K),ka=(Math.max(K.maxX,n.maxX)-Math.min(K.minX,n.minX))*(Math.max(K.maxY,n.maxY)-Math.min(K.minY,n.minY))-Y,ka<I?(I=ka,ea=Y<ea?Y:ea,L=K):ka===I&&Y<ea&&(ea=Y,L=K);d=L||d.children[0]}return d},_insert:function(n,d,f){var z=this.toBBox;f=f?n:z(n);z=[];var t=this._chooseSubtree(f,this.data,d,z);t.children.push(n);for(H(t,f);0<=d;)if(z[d].children.length>this._maxEntries)this._split(z,d),d--;else break;
this._adjustParentBBoxes(f,z,d)},_split:function(n,d){var f=n[d],z=f.children.length,t=this._minEntries;this._chooseSplitAxis(f,t,z);z=this._chooseSplitIndex(f,t,z);z=l(f.children.splice(z,f.children.length-z));z.height=f.height;z.leaf=f.leaf;J(f,this.toBBox);J(z,this.toBBox);d?n[d-1].children.push(z):this._splitRoot(f,z)},_splitRoot:function(n,d){this.data=l([n,d]);this.data.height=n.height+1;this.data.leaf=!1;J(this.data,this.toBBox)},_chooseSplitIndex:function(n,d,f){var z,t;var y=t=Infinity;for(z=
d;z<=f-d;z++){var K=q(n,0,z,this.toBBox);var L=q(n,z,f,this.toBBox);var Y=Math.max(0,Math.min(K.maxX,L.maxX)-Math.max(K.minX,L.minX))*Math.max(0,Math.min(K.maxY,L.maxY)-Math.max(K.minY,L.minY));K=w(K)+w(L);if(Y<y){y=Y;var ka=z;t=K<t?K:t}else Y===y&&K<t&&(t=K,ka=z)}return ka},_chooseSplitAxis:function(n,d,f){var z=n.leaf?this.compareMinX:m,t=n.leaf?this.compareMinY:v,y=this._allDistMargin(n,d,f,z);d=this._allDistMargin(n,d,f,t);y<d&&n.children.sort(z)},_allDistMargin:function(n,d,f,z){n.children.sort(z);
z=this.toBBox;var t=q(n,0,d,z),y=q(n,f-d,f,z),K=D(t)+D(y),L;for(L=d;L<f-d;L++){var Y=n.children[L];H(t,n.leaf?z(Y):Y);K+=D(t)}for(L=f-d-1;L>=d;L--)Y=n.children[L],H(y,n.leaf?z(Y):Y),K+=D(y);return K},_adjustParentBBoxes:function(n,d,f){for(;0<=f;f--)H(d[f],n)},_condense:function(n){for(var d=n.length-1,f;0<=d;d--)0===n[d].children.length?0<d?(f=n[d-1].children,f.splice(f.indexOf(n[d]),1)):this.clear():J(n[d],this.toBBox)},_initFormat:function(n){var d=["return a"," - b",";"];this.compareMinX=new Function("a",
"b",d.join(n[0]));this.compareMinY=new Function("a","b",d.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};p.rbush=ba})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(p,e){e=e.createCommonjsModule(function(ba){(function(J){J=J();void 0!==J&&(ba.exports=J)})(function(){function J(m,v,w,D,ja){for(;D>w;){if(600<D-w){var Z=D-w+1,l=v-w+1,B=Math.log(Z),n=.5*Math.exp(2*B/3);B=.5*Math.sqrt(B*
n*(Z-n)/Z)*(0>l-Z/2?-1:1);J(m,v,Math.max(w,Math.floor(v-l*n/Z+B)),Math.min(D,Math.floor(v+(Z-l)*n/Z+B)),ja)}Z=m[v];l=w;n=D;q(m,w,v);for(0<ja(m[D],Z)&&q(m,w,D);l<n;){q(m,l,n);l++;for(n--;0>ja(m[l],Z);)l++;for(;0<ja(m[n],Z);)n--}0===ja(m[w],Z)?q(m,w,n):(n++,q(m,n,D));n<=v&&(w=n+1);v<=n&&(D=n-1)}}function q(m,v,w){var D=m[v];m[v]=m[w];m[w]=D}function H(m,v){return m<v?-1:m>v?1:0}return function(m,v,w,D,ja){J(m,v,w||0,D||m.length-1,ja||H)}})});p.quickselect=e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../OptimizedFeature","../OptimizedGeometry","../centroid"],function(p,e,ba,J){const q={getObjectId(H){return H.objectId},getAttributes(H){return H.attributes},getAttribute(H,m){return H.attributes[m]},cloneWithGeometry(H,m){return new e(m,H.attributes,null,H.objectId)},getGeometry(H){return H.geometry},getCentroid(H,m){H.centroid||(H.centroid=J.getCentroidOptimizedGeometry(new ba,H.geometry,m.hasZ,m.hasM));return H.centroid}};p.default=q;p.optimizedFeatureQueryEngineAdapter=q;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(p){function e(J,q,H,m,v,w,D=1){w=v?w?4:3:w?3:2;let ja=H,Z=H+w,l=0,B=0,n=H=0,d=0;for(let f=0,z=m-1;f<z;f++,ja+=w,Z+=w){m=q[ja];const t=q[ja+1],y=q[ja+2],K=q[Z],L=q[Z+1],Y=q[Z+2];let ka=m*L-K*t;n+=ka;l+=(m+K)*ka;B+=(t+L)*ka;v&&(ka=m*Y-K*y,H+=(y+Y)*ka,d+=ka);m<J[0]&&(J[0]=m);m>J[1]&&(J[1]=m);t<J[2]&&(J[2]=t);t>J[3]&&(J[3]=t);v&&(y<J[4]&&(J[4]=y),y>J[5]&&(J[5]=y))}0<n*D&&(n*=-1);0<d*D&&(d*=-1);if(!n)return null;
J=[l,B,.5*n];v&&(J[3]=H,J[4]=.5*d);return J}function ba(J,q,H,m,v){v=m?v?4:3:v?3:2;let w=q,D=q+v,ja=0,Z=0,l=0,B=0;for(let z=0,t=H-1;z<t;z++,w+=v,D+=v){var n=J[w];const y=J[w+1],K=J[w+2],L=J[D],Y=J[D+1],ka=J[D+2];if(m){{var d=L-n;var f=Y-y;const ea=ka-K;d=Math.sqrt(d*d+f*f+ea*ea)}}else d=L-n,f=Y-y,d=Math.sqrt(d*d+f*f);d&&(ja+=d,m?(n=[n+.5*(L-n),y+.5*(Y-y),K+.5*(ka-K)],Z+=d*n[0],l+=d*n[1],B+=d*n[2]):(n=[n+.5*(L-n),y+.5*(Y-y)],Z+=d*n[0],l+=d*n[1]))}return 0<ja?m?[Z/ja,l/ja,B/ja]:[Z/ja,l/ja]:0<H?m?[J[q],
J[q+1],J[q+2]]:[J[q],J[q+1]]:null}p.getCentroidOptimizedGeometry=function(J,q,H,m,v){if(!q||!q.lengths.length)return null;const w="upperLeft"===(null==v?void 0:v.originPosition)?-1:1;J.lengths.length&&(J.lengths.length=0);J.coords.length&&(J.coords.length=0);v=J.coords;const D=[],ja=H?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY],{lengths:Z,coords:l}=q,B=H?m?4:3:m?3:2;let n=0;for(var d of Z){const f=e(ja,l,n,d,H,m,w);f&&D.push(f);n+=d*B}D.sort((f,z)=>{let t=w*f[2]-w*z[2];0===t&&H&&(t=f[4]-z[4]);return t});D.length&&(d=6*D[0][2],v[0]=D[0][0]/d,v[1]=D[0][1]/d,H&&(d=6*D[0][4],v[2]=0!==d?D[0][3]/d:0),v[0]<ja[0]||v[0]>ja[1]||v[1]<ja[2]||v[1]>ja[3]||H&&(v[2]<ja[4]||v[2]>ja[5]))&&(v.length=0);if(!v.length)if(q=q.lengths[0]?ba(l,0,Z[0],H,m):null)v[0]=q[0],v[1]=q[1],H&&2<q.length&&(v[2]=q[2]);else return null;
return J};p.lineCentroid=ba;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ../../../chunks/spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l,B,n,d,f,z,t,y,K){function L(O){return O.every(Q=>"exceedslimit"!==Q.statisticType)}const Y=new Set,ka=new ja.MemCacheStorage(2E6);let ea=0,I=function(){function O(F){this.capabilities={query:n.queryCapabilities};this.geometryType=F.geometryType;this.hasM=F.hasM;this.hasZ=F.hasZ;this.objectIdField=F.objectIdField;this.spatialReference=F.spatialReference;this.definitionExpression=F.definitionExpression;this.featureStore=F.featureStore;this.aggregateAdapter=F.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=F.timeInfo;F.cacheSpatialQueries&&(this._geometryQueryCache=new ja.MemCache(ea++ +"$$",ka));this.fieldsIndex=new B(F.fields);F.scheduler&&F.task&&(this._frameQueue=new l,this._frameTask=F.scheduler.registerTask(F.task,u=>this._update(u),()=>0<this._frameQueue.length))}var Q=O.prototype;Q.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};Q.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};Q.executeQuery=async function(F={},u){let N=ba.clone(F),E;try{N=await this._schedule(()=>t.normalizeQuery(N,this.definitionExpression,this.spatialReference),u),N=await this._reschedule(()=>this._checkQuerySupport(N),
u),E=await this._reschedule(()=>this._executeGeometryQuery(N,u),u),E=await this._reschedule(()=>E.executeAggregateIdsQuery(N),u),E=await this._reschedule(()=>E.executeObjectIdsQuery(N),u),E=await this._reschedule(()=>E.executeTimeQuery(N),u),E=await this._reschedule(()=>E.executeAttributesQuery(N),u)}catch(X){if(X!==t.QUERY_ENGINE_EMPTY_RESULT)throw X;E=new K([],null,this)}return E.createQueryResponse(N)};Q.executeQueryForCount=async function(F={},u){let N=ba.clone(F),E;N.returnGeometry=!1;N.returnCentroid=
!1;N.outSR=null;try{N=await this._schedule(()=>t.normalizeQuery(N,this.definitionExpression,this.spatialReference),u),N=await this._reschedule(()=>this._checkQuerySupport(N),u),E=await this._reschedule(()=>this._executeGeometryQuery(N,u),u),E=await this._reschedule(()=>E.executeAggregateIdsQuery(N),u),E=await this._reschedule(()=>E.executeObjectIdsQuery(N),u),E=await this._reschedule(()=>E.executeTimeQuery(N),u),E=await this._reschedule(()=>E.executeAttributesQuery(N),u)}catch(X){if(X!==t.QUERY_ENGINE_EMPTY_RESULT)throw X;
return 0}return E.createQueryResponseForCount(N)};Q.executeQueryForExtent=async function(F={},u){let N=ba.clone(F),E;F=N.outSR;try{N=await this._schedule(()=>t.normalizeQuery(N,this.definitionExpression,this.spatialReference),u);N=await this._reschedule(()=>this._checkQuerySupport(N),u);N.returnGeometry=!0;N.returnCentroid=!1;N.outSR=null;E=await this._reschedule(()=>this._executeGeometryQuery(N,u),u);E=await this._reschedule(()=>E.executeAggregateIdsQuery(N),u);E=await this._reschedule(()=>E.executeObjectIdsQuery(N),
u);E=await this._reschedule(()=>E.executeTimeQuery(N),u);E=await this._reschedule(()=>E.executeAttributesQuery(N),u);const X=E.size;if(!X)return{count:X,extent:null};d.set(ia,d.NEGATIVE_INFINITY);this.featureStore.forEachBounds(E.items,pa=>d.expandWithAABB(ia,pa),U);const W={xmin:ia[0],ymin:ia[1],xmax:ia[3],ymax:ia[4],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ia[2])&&isFinite(ia[5])&&(W.zmin=ia[2],W.zmax=ia[5]);const ha=f.project(W,E.spatialReference,F);
ha.spatialReference=t.cleanFromGeometryEngine(F||this.spatialReference);if(0===ha.xmax-ha.xmin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.xmin-=pa;ha.xmax+=pa}if(0===ha.ymax-ha.ymin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.ymin-=pa;ha.ymax+=pa}if(this.hasZ&&null!=ha.zmin&&null!=ha.zmax&&0===ha.zmax-ha.zmin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.zmin-=pa;ha.zmax+=pa}return{count:X,extent:ha}}catch(X){if(X===t.QUERY_ENGINE_EMPTY_RESULT)return{count:0,
extent:null};throw X;}};Q.executeQueryForIds=async function(F={},u){return this.executeQueryForIdSet(F,u).then(N=>Array.from(N))};Q.executeQueryForIdSet=async function(F={},u){let N=ba.clone(F),E;N.returnGeometry=!1;N.returnCentroid=!1;N.outSR=null;try{N=await this._schedule(()=>t.normalizeQuery(N,this.definitionExpression,this.spatialReference),u);N=await this._reschedule(()=>this._checkQuerySupport(N),u);E=await this._reschedule(()=>this._executeGeometryQuery(N,u),u);E=await this._reschedule(()=>
E.executeAggregateIdsQuery(N),u);E=await this._reschedule(()=>E.executeObjectIdsQuery(N),u);E=await this._reschedule(()=>E.executeTimeQuery(N),u);E=await this._reschedule(()=>E.executeAttributesQuery(N),u);const X=E.items,W=new Set;await this._reschedule(()=>{for(const ha of X)W.add(E.featureAdapter.getObjectId(ha))},u);return W}catch(X){if(X===t.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw X;}};Q.executeQueryForLatestObservations=async function(F={},u){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new q("feature-store:unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:F,timeInfo:this.timeInfo});let N=ba.clone(F),E;try{N=await this._schedule(()=>t.normalizeQuery(N,this.definitionExpression,this.spatialReference),u),N=await this._reschedule(()=>this._checkQuerySupport(N),u),E=await this._reschedule(()=>this._executeGeometryQuery(N,u),u),E=await this._reschedule(()=>E.executeAggregateIdsQuery(N),u),E=await this._reschedule(()=>E.executeObjectIdsQuery(N),u),E=await this._reschedule(()=>E.executeTimeQuery(N),u),E=await this._reschedule(()=>
E.executeAttributesQuery(N),u),E=await this._reschedule(()=>E.filterLatest(),u)}catch(X){if(X!==t.QUERY_ENGINE_EMPTY_RESULT)throw X;E=new K([],null,this)}return E.createQueryResponse(N)};Q._schedule=async function(F,u){return this._frameQueue?this._frameQueue.push(F,u):F()};Q._reschedule=async function(F,u){return this._frameQueue?this._frameQueue.unshift(F,u):F()};Q._update=function(F){for(this._budget=F;!F.done&&this._frameQueue&&this._frameQueue.process();)F.madeProgress();this._budget=null};Q._getAll=
function(){if(!this._allItems){const F=[];this.featureStore.forEach(u=>F.push(u));this._allItems=new K(F,null,this)}return this._allItems};Q._executeGeometryQuery=async function(F,u){const {geometry:N,outSR:E,spatialRel:X}=F,W=m.isValid(E)&&!m.equals(this.spatialReference,E),ha=this._geometryQueryCache?W?JSON.stringify({geometry:N,spatialRelationship:X,outSpatialReference:E}):JSON.stringify({geometry:N,spatialRelationship:X}):null;if(ha){var pa=this._geometryQueryCache.get(ha);if(!J.isUndefined(pa))return pa}pa=
async r=>{if(W&&(F.returnGeometry||F.returnCentroid))return r=await r.project(E),ha&&this._geometryQueryCache.put(ha,r,r.size||1),r;ha&&this._geometryQueryCache.put(ha,r,r.size||1);return r};if(!N)return pa(this._getAll());const ra=this.featureAdapter;if("esriSpatialRelDisjoint"===X){const r=this._searchFeatures(this._getQueryBBoxes(N));if(!r.length)return pa(this._getAll());let G,ca;const ta=new Set;for(var Aa of r)ta.add(ra.getObjectId(Aa));await this._reschedule(()=>{let xa=0;G=Array(ta.size);
this.featureStore.forEach(b=>G[xa++]=b);ca=ta},u);Aa=await this._reschedule(async()=>{const xa=await t.getSpatialQueryOperator(X,N,this.geometryType,this.hasZ,this.hasM);return new K(await this._runSpatialFilter(G,b=>!ca.has(ra.getObjectId(b))||xa(ra.getGeometry(b)),u),N,this)},u);return pa(Aa)}Aa=this._searchFeatures(this._getQueryBBoxes(N));if(!Aa.length)return pa=new K([],N,this),ha&&this._geometryQueryCache.put(ha,pa,pa.size||1),pa;if(this._canExecuteSoloPass(N,F))return pa(new K(Aa,N,this));
const Ca=await t.getSpatialQueryOperator(X,N,this.geometryType,this.hasZ,this.hasM);Aa=await this._runSpatialFilter(Aa,r=>Ca(ra.getGeometry(r)),u);return pa(new K(Aa,N,this))};Q._runSpatialFilter=async function(F,u,N){if(!u)return F;if(!this._budget)return F.filter(ha=>u(ha));let E=0;const X=[],W=async()=>{for(;E<F.length;){const ha=F[E];u(ha)&&X.push(ha);this._budget.done&&await this._reschedule(()=>W(),N);++E}};return this._reschedule(()=>W(),N).then(()=>X)};Q._canExecuteSoloPass=function(F,u){const {geometryType:N}=
this;({spatialRel:u}=u);return t.canQueryWithRBush(F)&&("esriSpatialRelEnvelopeIntersects"===u||"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===u||"esriSpatialRelContains"===u||"esriSpatialRelWithin"===u))};Q._getQueryBBoxes=function(F){if(t.canQueryWithRBush(F)){if(w.isExtent(F))return[Z.fromValues(F.xmin,F.ymin,F.xmax,F.ymax)];if(w.isPolygon(F))return F.rings.map(u=>Z.fromValues(Math.min(u[0][0],u[2][0]),Math.min(u[0][1],u[2][1]),Math.max(u[0][0],u[2][0]),Math.max(u[0][1],u[2][1])))}return[v.getBoundsXY(Z.create(),
F)]};Q._searchFeatures=function(F){for(const E of F)this.featureStore.forEachInBounds(E,X=>{Y.add(X)});const u=Array(Y.size);let N=0;Y.forEach(E=>u[N++]=E);Y.clear();return u};Q._checkQuerySupport=async function(F){if(0>F.distance||null!=F.geometryPrecision||F.multipatchOption||F.pixelSize||F.relationParam||F.text)throw new q("feature-store:unsupported-query","Unsupported query options",{query:F});return H.all([this._checkAttributesQuerySupport(F),this._checkStatisticsQuerySupport(F),t.checkSpatialQuerySupport(F,
this.geometryType,this.spatialReference),f.checkProjectionSupport(this.spatialReference,F.outSR)]).then(()=>F)};Q._checkAttributesQuerySupport=function(F){const {outFields:u,orderByFields:N,returnDistinctValues:E,outStatistics:X}=F,W=X?X.map(ha=>ha.outStatisticFieldName&&ha.outStatisticFieldName.toLowerCase()):[];if(N&&0<N.length){const ha=N.map(pa=>{const ra=pa.toLowerCase();return-1<ra.indexOf(" asc")?ra.split(" asc")[0]:-1<ra.indexOf(" desc")?ra.split(" desc")[0]:pa}).filter(pa=>-1===W.indexOf(pa));
z.validateFields(this.fieldsIndex,ha,"orderByFields contains missing fields")}if(u&&0<u.length)z.validateFields(this.fieldsIndex,u,"outFields contains missing fields");else if(E)throw new q("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:F});z.validateWhere(this.fieldsIndex,F.where)};Q._checkStatisticsQuerySupport=async function(F){const {outStatistics:u,groupByFieldsForStatistics:N,having:E}=F;var X=N&&N.length,W=u&&u.length;if(E){if(!X||!W)throw new q("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:F});z.validateHaving(this.fieldsIndex,E,u)}if(W&&L(u)){W=u.map(ha=>ha.onStatisticField);z.validateFields(this.fieldsIndex,W,"onStatisticFields contains missing fields");X&&z.validateFields(this.fieldsIndex,N,"groupByFieldsForStatistics contains missing fields");for(const ha of u){const {onStatisticField:pa,statisticType:ra}=ha;if(("percentile_disc"===ra||"percentile_cont"===ra)&&"statisticParameters"in ha){if({statisticParameters:X}=
ha,!X)throw new q("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ha,query:F});}else if("count"!==ra&&pa&&z.hasInvalidFieldType(pa,this.fieldsIndex))throw new q("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ha,query:F});}}};e._createClass(O,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const F=this.featureStore.fullBounds;return F?{xmin:F[0],
ymin:F[1],xmax:F[2],ymax:F[3],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=y.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return O}();const U=d.create(),ia=d.create();p.Feature=function(O,Q=null,F,u,N){this.attributes=O;this.geometry=F;this.centroid=u;this.filterFlags=N;this.groupId=-1;this.displayId=Q};p.default=I;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,e,ba){let J=function(){function H(v,w,D){this._namespace=v;this._storage=w;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";D&&(this._storage.registerRemoveFunc(this._namespace,D),this._removeFunc=!0)}var m=H.prototype;m.resetHitRate=function(){this._hit=this._miss=0};m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&
this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};m.put=function(v,w,D,ja=0){this._storage.put(this._namespace+v,w,D,ja)};m.get=function(v){v=this._storage.get(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};m.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};m.updateSize=function(v,w,D){this._storage.updateSize(this._namespace+v,w,D)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=
function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};e._createClass(H,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return H}(),q=function(){function H(v=10485760){this._maxSize=v;this._db=new Map;
this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new ba}var m=H.prototype;m.register=function(v){this._users.push(v)};m.deregister=function(v){this._users.removeUnordered(v)};m.registerRemoveFunc=function(v,w){this._removeFuncs.push([v,w])};m.deregisterRemoveFunc=function(v){this._removeFuncs=this._removeFuncs.filter(w=>w[0]!==v)};m.put=function(v,w,D,ja){const Z=this._db.get(v);Z&&(this._size-=Z.size,this._db.delete(v),Z.entry!==w&&this._notifyRemoved(v,Z.entry));D>this._maxSize?
this._notifyRemoved(v,w):void 0===w?console.warn("Refusing to cache undefined entry "):!D||0>D?console.warn("Refusing to cache entry with invalid size "+D):(ja=1+Math.max(ja,-3)- -3,this._db.set(v,{entry:w,size:D,lifetime:ja,lives:ja}),this._size+=D,this._checkSizeLimit())};m.updateSize=function(v,w,D){const ja=this._db.get(v);ja&&ja.entry===w&&(this._size-=ja.size,D>this._maxSize?this._notifyRemoved(v,w):(ja.size=D,this._size+=D,this._checkSizeLimit()))};m.pop=function(v){const w=this._db.get(v);
if(w)return this._size-=w.size,this._db.delete(v),++this._hit,w.entry;++this._miss};m.get=function(v){const w=this._db.get(v);if(void 0===w)++this._miss;else return this._db.delete(v),w.lives=w.lifetime,this._db.set(v,w),++this._hit,w.entry};m.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},w={},D=[];this._db.forEach((l,B)=>{const n=l.lifetime;D[n]=(D[n]||
0)+l.size;this._users.forAll(d=>{d=d.namespace;B.startsWith(d)&&(w[d]=(w[d]||0)+l.size)})});const ja={};this._users.forAll(l=>{const B=l.namespace;!isNaN(l.hitRate)&&0<l.hitRate?(w[B]=w[B]||0,ja[B]=Math.round(100*l.hitRate)+"%"):ja[B]="0%"});var Z=Object.keys(w);Z.forEach(l=>w[l]=w[l]/this._size*100);Z.sort((l,B)=>w[B]-w[l]);Z.forEach(l=>v[l]=Math.round(w[l])+"% / "+ja[l]);for(Z=D.length-1;0<=Z;--Z){const l=D[Z];l&&(v["Priority "+(Z+-3-1)]=Math.round(l/this.size*100)+"%")}return v};m.resetStats=function(){this._hit=
this._miss=0;this._users.forAll(v=>v.resetHitRate())};m.clear=function(v){this._db.forEach((w,D)=>{D.startsWith(v)&&(this._size-=w.size,this._db.delete(D),this._notifyRemoved(D,w.entry))})};m.clearAll=function(){this._db.forEach((v,w)=>this._notifyRemoved(w,v.entry));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemoved=function(v,w){this._removeFuncs.forEach(D=>{if(v.startsWith(D[0]))D[1](w)})};m._checkSizeLimit=function(){if(!(this._size<=
this._maxSize))for(const [v,w]of this._db)if(this._db.delete(v),1>=w.lives?(this._size-=w.size,this._notifyRemoved(v,w.entry)):(--w.lives,this._db.set(v,w)),this._size<=.9*this.maxSize)break};e._createClass(H,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return H}();p.MIN_PRIORITY=-3;p.MemCache=J;p.MemCacheStorage=q;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,e,ba){function J(w,D){return w?m.get(w,D):null}function q(w,D,ja,Z=!0){const l=[];for(const B of D)if("*"!==B&&
!w.has(B))if(Z){D=H(B);try{const n=J(D,w);if(!n)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!n.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:n});q(w,n.fieldNames,"expression contains missing fields")}catch(n){if((D=n&&n.details)&&(D.clause||D.where))throw n;D&&D.missingFields?l.push(...D.missingFields):l.push(B)}}else l.push(B);if(l.length)throw new e("feature-store:unsupported-query",ja,{missingFields:l});
}function H(w){return w.split(" as ")[0]}const m=new ba.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));p.getAliasFromFieldName=function(w){return w.split(" as ")[1]};p.getExpressionFromFieldName=H;p.getWhereClause=J;p.hasInvalidFieldType=function(w,D){return(w=D.get(w))?!v.has(w.type):!1};p.validateFields=q;p.validateHaving=function(w,D,ja){if(!D)return!0;const Z=
m.get(D,w);if(!Z)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:D});if(!Z.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:D});q(w,Z.fieldNames,"having contains missing fields");if(!Z.getExpressions().every(l=>{const {aggregateType:B,field:n}=l,d=w.has(n)&&w.get(n).name;return ja.some(f=>{const {onStatisticField:z,statisticType:t}=f;return(w.has(z)&&w.get(z).name)===d&&t.toLowerCase().trim()===B})}))throw new e("feature-store:unsupported-query",
"expressions in having should also exist in outStatistics",{having:D});return!0};p.validateWhere=function(w,D){if(!D)return!0;const ja=m.get(D,w);if(!ja)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!ja.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:D});q(w,ja.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../ItemCache","./WhereClause"],function(p,e,ba){let J=function(){function q(H,m){this._cache=new e(H);this._invalidCache=new e(m)}q.prototype.get=function(H,m){const v=`${m.uid}:${H}`,w=this._cache.get(v);if(w)return w;if(void 0!==this._invalidCache.get(v))return null;try{const D=ba.WhereClause.create(H,m);this._cache.put(v,D);return D}catch{return this._invalidCache.put(v,null),null}};return q}();p.WhereClauseCache=J;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],
function(p){return function(){function e(J,q){this._storage=new p.MemCacheStorage;this._storage.maxSize=J;q&&this._storage.registerRemoveFunc("",q)}var ba=e.prototype;ba.put=function(J,q){this._storage.put(J,q,1,1)};ba.pop=function(J){return this._storage.pop(J)};ba.get=function(J){return this._storage.get(J)};ba.clear=function(){this._storage.clearAll()};ba.destroy=function(){this._storage.clearAll()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),
function(p,e,ba,J,q,H){function m(Q,F){Q+="";return Q.length>=F?Q:Array(F-Q.length+1).join("0")+Q}function v(Q,F,u="0",N="0",E="0",X="0",W="",ha="0",pa="0"){return"+"===W||"-"===W?(Q=`${m(parseInt(Q,10),4)}-${m(parseInt(F,10),2)}-${m(parseInt(u,10),2)}`,F="",10>parseFloat(X)&&(F="0"),N=`${m(parseInt(N,10),2)}:${m(parseInt(E,10),2)}:${F+parseFloat(X).toString()}`,W=`${W}${m(parseInt(ha,10),2)}:${m(parseInt(pa,10),2)}`,new Date(Q+"T"+N+W)):new Date(parseInt(Q,10),parseInt(F,10)-1,parseInt(u,10),parseInt(N,
10),parseInt(E,10),parseFloat(X))}function w(Q){let F=Y.exec(Q);if(null!==F){const [,u,N,E,X,W,ha]=F;return v(u,N,E,X,W,ha)}F=ka.exec(Q);if(null!==F){const [,u,N,E,X,W,ha,pa,ra,Aa]=F;return v(u,N,E,X,W,ha,pa,ra,Aa)}F=ea.exec(Q);if(null!==F){const [,u,N,E,X,W,ha,pa,ra]=F;return v(u,N,E,X,W,"0",ha,pa,ra)}F=I.exec(Q);if(null!==F){const [,u,N,E,X,W]=F;return v(u,N,E,X,W)}F=L.exec(Q);if(null!==F){const [,u,N,E]=F;return v(u,N,E)}throw Error("SQL Invalid Timestamp");}function D(Q){Q=L.exec(Q);if(null===
Q)throw Error("SQL Invalid Date");const [,F,u,N]=Q;return new Date(parseInt(F,10),parseInt(u,10)-1,parseInt(N,10))}function ja(Q){return Array.isArray(Q)?Q:[Q]}function Z(Q){return null!==Q?!0!==Q:null}function l(Q,F){return null!=Q&&null!=F?!0===Q&&!0===F:!1===Q||!1===F?!1:null}function B(Q,F){return null!=Q&&null!=F?!0===Q||!0===F:!0===Q||!0===F?!0:null}function n(Q,F){if(null==Q)return null;let u=!1;for(const N of F)if(null==N)u=null;else if(Q===N){u=!0;break}return u}function d(Q,F,u){if(null==
Q)return null;let N="",E=0;for(let X=0;X<F.length;X++){const W=F.charAt(X);switch(E){case 0:W===u?E=1:N=0<="-[]/{}()*+?.\\^$|".indexOf(W)?N+("\\"+W):"%"===W?N+".*":"_"===W?N+".":N+W;break;case 1:N=0<="-[]/{}()*+?.\\^$|".indexOf(W)?N+("\\"+W):N+W,E=0}}return(new RegExp("^"+N+"$")).test(Q)}function f(Q){return Q instanceof Date?Q.valueOf():Q}function z(Q,F,u){if(null==F||null==u)return null;F=f(F);u=f(u);switch(Q){case "\x3c\x3e":return F!==u;case "\x3d":return F===u;case "\x3e":return F>u;case "\x3c":return F<
u;case "\x3e\x3d":return F>=u;case "\x3c\x3d":return F<=u}}function t(Q){const F=[],u={};for(const N of Q)Q=N.toLowerCase(),void 0===u[Q]&&(F.push(N),u[Q]=1);return F}function y(Q,F,u){if(F instanceof q.SqlInterval)if(u instanceof Date)switch(Q){case "+":return new Date(F.valueInMilliseconds()+u.getTime());case "-":return F.valueInMilliseconds()-u.getTime();case "*":return F.valueInMilliseconds()*u.getTime();case "/":return F.valueInMilliseconds()/u.getTime()}else if(u instanceof q.SqlInterval)switch(Q){case "+":return q.SqlInterval.createFromMilliseconds(F.valueInMilliseconds()+
u.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(F.valueInMilliseconds()-u.valueInMilliseconds());case "*":return F.valueInMilliseconds()*u.valueInMilliseconds();case "/":return F.valueInMilliseconds()/u.valueInMilliseconds()}else F=F.valueInMilliseconds();else if(u instanceof q.SqlInterval)if(F instanceof Date)switch(Q){case "+":return new Date(u.valueInMilliseconds()+F.getTime());case "-":return new Date(F.getTime()-u.valueInMilliseconds());case "*":return F.getTime()*
u.valueInMilliseconds();case "/":return F.getTime()/u.valueInMilliseconds()}else u=u.valueInMilliseconds();else if(F instanceof Date&&"number"===typeof u)switch(u*=864E5,F=F.getTime(),Q){case "+":return new Date(F+u);case "-":return new Date(F-u);case "*":return new Date(F*u);case "/":return new Date(F/u)}else if(u instanceof Date&&"number"===typeof F)switch(F*=864E5,u=u.getTime(),Q){case "+":return new Date(F+u);case "-":return new Date(F-u);case "*":return new Date(F*u);case "/":return new Date(F/
u)}switch(Q){case "+":return F+u;case "-":return F-u;case "*":return F*u;case "/":return F/u}}function K(Q,F,u,N){Q=N.getAttribute(Q,F);return null!=Q&&1===u[F]?new Date(Q):Q}const L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ka=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,ea=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,I=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;
let U=function(){function Q(){}Q.makeBool=function(F){return!0===F};Q.featureValue=function(F,u,N,E){return K(F,u,N,E)};Q.equalsNull=function(F){return null===F};Q.applyLike=function(F,u,N){return d(F,u,N)};Q.ensureArray=function(F){return ja(F)};Q.applyIn=function(F,u){return n(F,u)};Q.currentDate=function(){const F=new Date;F.setHours(0,0,0,0);return F};Q.makeSqlInterval=function(F,u,N){return q.SqlInterval.createFromValueAndQualifer(F,u,N)};Q.convertInterval=function(F){return F instanceof q.SqlInterval?
F.valueInMilliseconds():F};Q.currentTimestamp=function(){return new Date};Q.compare=function(F,u,N){return z(F,u,N)};Q.calculate=function(F,u,N){return y(F,u,N)};Q.makeComparable=function(F){return f(F)};Q.evaluateFunction=function(F,u){return q.evaluateFunction(F,u)};Q.lookup=function(F,u){F=u[F];return void 0===F?null:F};Q.between=function(F,u){return null==F||null==u[0]||null==u[1]?null:F>=u[0]&&F<=u[1]};Q.notbetween=function(F,u){return null==F||null==u[0]||null==u[1]?null:F<u[0]||F>u[1]};Q.ternaryNot=
function(F){return Z(F)};Q.ternaryAnd=function(F,u){return l(F,u)};Q.ternaryOr=function(F,u){return B(F,u)};return Q}(),ia=function(){function Q(u,N){this.fieldsIndex=N;this.datefields={};this.parameters={};this.parseTree=H.WhereGrammar.parse(u);const {isStandardized:E,isAggregate:X,referencedFieldNames:W}=this.extractExpressionInfo(N);this.referencedFieldNames=W;this.isStandardized=E;this.isAggregate=X}Q.create=function(u,N){return new Q(u,N)};var F=Q.prototype;F.testSet=function(u,N=O){const E=
{};for(const X of this.fieldNames)E[X]=u.map(W=>N.getAttribute(W,X));return!!this.evaluateNode(this.parseTree,{attributes:E},O)};F.calculateValue=function(u,N=O){u=this.evaluateNode(this.parseTree,u,N);return u instanceof q.SqlInterval?u.valueInMilliseconds()/864E5:u};F.calculateValueCompiled=function(u,N=O){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(u,this.parameters,N,this.datefields);if(ba("csp-restrictions"))return this.calculateValue(u,N);this.compileMe();
return this.parseTree._compiledVersion(u,this.parameters,N,this.datefields)};F.testFeature=function(u,N=O){return!!this.evaluateNode(this.parseTree,u,N)};F.testFeatureCompiled=function(u,N=O){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(u,this.parameters,N,this.datefields);if(ba("csp-restrictions"))return this.testFeature(u,N);this.compileMe();return!!this.parseTree._compiledVersion(u,this.parameters,N,this.datefields)};F.getFunctions=function(){const u=[];this.visitAll(this.parseTree,
N=>{"function"===N.type&&u.push(N.name.toLowerCase())});return t(u)};F.getExpressions=function(){const u=new Map;this.visitAll(this.parseTree,N=>{if("function"===N.type){const E=N.name.toLowerCase();N=N.args.value[0];if("column_ref"===N.type){N=N.column;const X=`${E}-${N}`;u.has(X)||u.set(X,{aggregateType:E,field:N})}}});return[...u.values()]};F.getVariables=function(){const u=[];this.visitAll(this.parseTree,N=>{"param"===N.type&&u.push(N.value.toLowerCase())});return t(u)};F.compileMe=function(){const u=
"return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",u)).bind(U)};F.extractExpressionInfo=function(u){const N=[];let E=!0,X=!0;this.visitAll(this.parseTree,W=>{switch(W.type){case "column_ref":{const ha=u.get(W.column),pa=ha&&ha.name;!ha||"date"!==ha.type&&"esriFieldTypeDate"!==ha.type||(this.datefields[ha.name]=1);void 0!==pa?(N.push(pa),W.column=pa):N.push(W.column);break}case "function":{const {name:ha,
args:pa}=W;W=pa.value.length;E&&(E=q.isStandardized(ha,W));X&&(X=J.isAggregate(ha,W))}}});return{referencedFieldNames:t(N),isStandardized:E,isAggregate:X}};F.visitAll=function(u,N){if(null!=u)switch(N(u),u.type){case "when_clause":this.visitAll(u.operand,N);this.visitAll(u.value,N);break;case "case_expression":for(const E of u.clauses)this.visitAll(E,N);"simple"===u.format&&this.visitAll(u.operand,N);null!==u.else&&this.visitAll(u.else,N);break;case "expr_list":for(const E of u.value)this.visitAll(E,
N);break;case "unary_expr":this.visitAll(u.expr,N);break;case "binary_expr":this.visitAll(u.left,N);this.visitAll(u.right,N);break;case "function":this.visitAll(u.args,N)}};F.evaluateNodeToJavaScript=function(u){switch(u.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(u.value)+", "+JSON.stringify(u.qualifier)+","+JSON.stringify(u.op)+")";case "case_expression":var N="";if("simple"===u.format){var E="this.makeComparable("+this.evaluateNodeToJavaScript(u.operand)+")";
N="( ";for(let X=0;X<u.clauses.length;X++)N+=" ("+E+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(u.clauses[X].operand)+")) ? ("+this.evaluateNodeToJavaScript(u.clauses[X].value)+") : "}else for(N="( ",E=0;E<u.clauses.length;E++)N+=" this.makeBool("+this.evaluateNodeToJavaScript(u.clauses[E].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(u.clauses[E].value)+") : ";N=null!==u.else?N+this.evaluateNodeToJavaScript(u.else):N+"null";return N+=" )";case "param":return"this.lookup("+
JSON.stringify(u.value.toLowerCase())+",lookups)";case "expr_list":N="[";for(E of u.value)"["!==N&&(N+=","),N+=this.evaluateNodeToJavaScript(E);return N+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(u.expr)+")";case "binary_expr":switch(u.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+
" )";case "IS":if("null"!==u.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")";case "ISNOT":if("null"!==u.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(u.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+
")"}throw Error("Not Supported Operator "+u.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(u.value);case "date":return"(new Date("+D(u.value).getTime().toString()+"))";case "timestamp":return"(new Date("+w(u.value).getTime().toString()+"))";case "current_time":return"date"===u.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(u.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(u.name)+","+this.evaluateNodeToJavaScript(u.args)+")"}throw Error("Unsupported sql syntax "+u.type);};F.evaluateNode=function(u,N,E){switch(u.type){case "interval":return N=this.evaluateNode(u.value,N,E),q.SqlInterval.createFromValueAndQualifer(N,u.qualifier,u.op);case "case_expression":if("simple"===u.format){var X=f(this.evaluateNode(u.operand,N,E));for(var W=0;W<u.clauses.length;W++)if(X===f(this.evaluateNode(u.clauses[W].operand,N,E)))return this.evaluateNode(u.clauses[W].value,
N,E)}else for(X=0;X<u.clauses.length;X++)if(!0===this.evaluateNode(u.clauses[X].operand,N,E))return this.evaluateNode(u.clauses[X].value,N,E);return null!==u.else?this.evaluateNode(u.else,N,E):null;case "param":return this.parameters[u.value.toLowerCase()];case "expr_list":X=[];for(W of u.value)X.push(this.evaluateNode(W,N,E));return X;case "unary_expr":return Z(this.evaluateNode(u.expr,N,E));case "binary_expr":switch(u.operator){case "AND":return l(this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,
N,E));case "OR":return B(this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,N,E));case "IS":if("null"!==u.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(u.left,N,E);case "ISNOT":if("null"!==u.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(u.left,N,E);case "IN":return X=ja(this.evaluateNode(u.right,N,E)),n(this.evaluateNode(u.left,N,E),X);case "NOT IN":return X=ja(this.evaluateNode(u.right,N,E)),Z(n(this.evaluateNode(u.left,N,
E),X));case "BETWEEN":return X=this.evaluateNode(u.left,N,E),u=this.evaluateNode(u.right,N,E),null==X||null==u[0]||null==u[1]?null:X>=f(u[0])&&X<=f(u[1]);case "NOTBETWEEN":return X=this.evaluateNode(u.left,N,E),u=this.evaluateNode(u.right,N,E),null==X||null==u[0]||null==u[1]?null:X<f(u[0])||X>f(u[1]);case "LIKE":return d(this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,N,E),u.escape);case "NOT LIKE":return Z(d(this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,N,E),u.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return z(u.operator,
this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,N,E));case "-":case "+":case "*":case "/":return y(u.operator,this.evaluateNode(u.left,N,E),this.evaluateNode(u.right,N,E))}case "null":case "bool":case "string":case "number":return u.value;case "date":return D(u.value);case "timestamp":return w(u.value);case "current_time":return N=new Date,"date"===u.mode&&N.setHours(0,0,0,0),N;case "column_ref":return K(N,u.column,this.datefields,E);case "function":return N=this.evaluateNode(u.args,N,E),
this.isAggregate?J.aggregateFunction(u.name,N):q.evaluateFunction(u.name,N)}throw Error("Unsupported sql syntax "+u.type);};e._createClass(Q,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return Q}();const O={getAttribute(Q,F){return(Q&&"object"===typeof Q.attributes?Q.attributes:Q)[F]}};p.WhereClause=ia;p.defaultAttributeAdapter=O;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function e(q){let H=
0;for(let m=0;m<q.length;m++)H+=q[m];return H/q.length}function ba(q){const H=e(q),m=q.length;let v=0;for(const w of q)v+=Math.pow(w-H,2);return 1<m?v/(m-1):0}const J={min:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:e(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{{q=q[0];let H=0;for(let m=0;m<q.length;m++)H+=
q[m];q=H}}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(ba(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:ba(q[0])}};p.aggregateFunction=function(q,H){const m=J[q.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(H.length<m.minParams||H.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return m.evaluate(H)};p.isAggregate=
function(q,H){q=J[q.toLowerCase()];return null!=q&&H>=q.minParams&&H<=q.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,e){let ba=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}q.fixDefaults=function(H){if(null!==H.precision||null!==H.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};q.createFromMilliseconds=
function(H){const m=new q;m.second=H/1E3;return m};q.createFromValueAndQualifer=function(H,m,v){let w=null;const D=new q;D.op="-"===v?"-":"+";if("interval-period"===m.type){q.fixDefaults(m);if("year"===m.period||"month"===m.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(H))D[m.period]=parseFloat(H);else throw Error("Illegal Interval");}else{q.fixDefaults(m.start);q.fixDefaults(m.end);if("year"===m.start.period||"month"===m.start.period)throw Error("Year-Month Intervals not supported");
if("year"===m.end.period||"month"===m.end.period)throw Error("Year-Month Intervals not supported");switch(m.start.period){case "day":switch(m.end.period){case "hour":w=/^[0-9]{1,} [0-9]{1,}$/;if(w.test(H))D[m.start.period]=parseFloat(H.split(" ")[0]),D[m.end.period]=parseFloat(H.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":w=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(w.test(H))D[m.start.period]=parseFloat(H.split(" ")[0]),H=H.split(" ")[1].split(":"),D.hour=parseFloat(H[0]),
D.minute=parseFloat(H[1]);else throw Error("Illegal Interval");break;case "second":w=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(w.test(H))D[m.start.period]=parseFloat(H.split(" ")[0]),H=H.split(" ")[1].split(":"),D.hour=parseFloat(H[0]),D.minute=parseFloat(H[1]),D.second=parseFloat(H[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(m.end.period){case "minute":w=/^[0-9]{1,}:[0-9]{1,}$/;if(w.test(H))D.hour=parseFloat(H.split(":")[0]),
D.minute=parseFloat(H.split(":")[1]);else throw Error("Illegal Interval");break;case "second":w=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(w.test(H))H=H.split(":"),D.hour=parseFloat(H[0]),D.minute=parseFloat(H[1]),D.second=parseFloat(H[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(m.end.period){case "second":w=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(w.test(H))H=H.split(":"),D.minute=parseFloat(H[0]),D.second=parseFloat(H[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return D};q.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const J={extract:{minParams:2,maxParams:2,evaluate:([q,H])=>{if(null==H)return null;if(H instanceof Date)switch(q.toUpperCase()){case "SECOND":return H.getSeconds();case "MINUTE":return H.getMinutes();
case "HOUR":return H.getHours();case "DAY":return H.getDate();case "MONTH":return H.getMonth()+1;case "YEAR":return H.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [H,m]=q;return null==H||null==m?null:H.toString().substring(m-1)}if(3===q.length){const [H,m,v]=q;return null==H||null==m||null==v?null:0>=v?"":H.toString().substring(m-1,m+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,H])=>null==q||
null==H?null:H.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var H=3===q.length,m=H?q[1]:" ";H=H?q[2]:q[1];if(null==m||null==H)return null;m=`(${e.escapeRegExpString(m)})`;switch(q[0]){case "BOTH":return H.replace(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return H.replace(new RegExp(`^${m}*`,"g"),"");case "TRAILING":return H.replace(new RegExp(`${m}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},
ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>
null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:Math.pow(q[0],q[1])},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%
q[1]},round:{minParams:1,maxParams:2,evaluate:q=>{const H=q[0];q=2===q.length?Math.pow(10,q[1]):1;return null==H?null:Math.round(H*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let H="";for(let m=0;m<q.length;m++){if(null==q[m])return null;H+=
q[m].toString()}return H}},lower:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};p.SqlInterval=ba;p.evaluateFunction=function(q,H){const m=J[q.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(H.length<m.minParams||H.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return m.evaluate(H)};p.isStandardized=function(q,
H){q=J[q.toLowerCase()];return null!=q&&H>=q.minParams&&H<=q.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,e){var ba=e.createCommonjsModule(function(q){(function(H,m){q.exports&&(q.exports=m())})(e.commonjsGlobal,function(){function H(m,v,w,D){this.message=m;this.expected=v;this.found=w;this.location=D;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,
H)}(function(m,v){function w(){this.constructor=m}w.prototype=v.prototype;m.prototype=new w})(H,Error);H.buildMessage=function(m,v){function w(l){return l.charCodeAt(0).toString(16).toUpperCase()}function D(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(B){return"\\x0"+w(B)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(B){return"\\x"+w(B)})}function ja(l){return l.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(B){return"\\x0"+w(B)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(B){return"\\x"+w(B)})}var Z={literal:function(l){return'"'+D(l.text)+'"'},"class":function(l){var B="",n;for(n=0;n<l.parts.length;n++)B+=l.parts[n]instanceof Array?ja(l.parts[n][0])+"-"+ja(l.parts[n][1]):ja(l.parts[n]);return"["+(l.inverted?"^":"")+B+
"]"},any:function(l){return"any character"},end:function(l){return"end of input"},other:function(l){return l.description}};return"Expected "+function(l){var B=Array(l.length),n;for(n=0;n<l.length;n++){var d=n;var f=l[n];f=Z[f.type](f);B[d]=f}B.sort();if(0<B.length){for(l=n=1;n<B.length;n++)B[n-1]!==B[n]&&(B[l]=B[n],l++);B.length=l}switch(B.length){case 1:return B[0];case 2:return B[0]+" or "+B[1];default:return B.slice(0,-1).join(", ")+", or "+B[B.length-1]}}(m)+" but "+(v?'"'+D(v)+'"':"end of input")+
" found."};return{SyntaxError:H,parse:function(m,v){function w(h,C){return{type:"literal",text:h,ignoreCase:C}}function D(h,C,A){return{type:"class",parts:h,inverted:C,ignoreCase:A}}function ja(h){var C=Yb[h],A;if(!C){for(A=h-1;!Yb[A];)A--;C=Yb[A];for(C={line:C.line,column:C.column};A<h;)10===m.charCodeAt(A)?(C.line++,C.column=1):C.column++,A++;Yb[h]=C}return C}function Z(h,C){var A=ja(h),T=ja(C);return{start:{offset:h,line:A.line,column:A.column},end:{offset:C,line:T.line,column:T.column}}}function l(h){c<
rb||(c>rb&&(rb=c,nc=[]),nc.push(h))}function B(){var h=c;var C=qa();if(C!==a)if(C=d(),C!==a){var A=qa();A!==a?h=C:(c=h,h=a)}else c=h,h=a;else c=h,h=a;return h}function n(){var h=c;var C=d();if(C!==a){var A=[];var T=c;var va=qa();if(va!==a){var Fa=Ia();if(Fa!==a){var La=qa();if(La!==a){var Qa=d();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=T,T=a}else c=T,T=a}else c=T,T=a;for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=Ia(),Fa!==a?(La=qa(),La!==a?(Qa=d(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):
(c=T,T=a)):(c=T,T=a);if(A!==a){h={type:"expr_list"};C=[C];for(T=0;T<A.length;T++)C.push(A[T][3]);h.value=C}else c=h,h=a}else c=h,h=a;return h}function d(){var h=c;var C=f();if(C!==a){var A=[];var T=c;var va=qa();if(va!==a){var Fa=M();if(Fa!==a){var La=qa();if(La!==a){var Qa=f();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=T,T=a}else c=T,T=a}else c=T,T=a;for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=M(),Fa!==a?(La=qa(),La!==a?(Qa=f(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):(c=T,T=a)):(c=T,T=a);
A!==a?h=C=db(C,A):(c=h,h=a)}else c=h,h=a;return h}function f(){var h=c;var C=z();if(C!==a){var A=[];var T=c;var va=qa();if(va!==a){var Fa=x();if(Fa!==a){var La=qa();if(La!==a){var Qa=z();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=T,T=a}else c=T,T=a}else c=T,T=a;for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=x(),Fa!==a?(La=qa(),La!==a?(Qa=z(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):(c=T,T=a)):(c=T,T=a);A!==a?h=C=db(C,A):(c=h,h=a)}else c=h,h=a;return h}function z(){var h=c;var C=g();if(C===a){C=
c;if(33===m.charCodeAt(c)){var A=ib;c++}else A=a,0===sa&&l(lb);if(A!==a){var T=c;sa++;if(61===m.charCodeAt(c)){var va=Ra;c++}else va=a,0===sa&&l(wb);sa--;va===a?T=void 0:(c=T,T=a);T!==a?C=A=[A,T]:(c=C,C=a)}else c=C,C=a}C!==a?(A=qa(),A!==a?(T=z(),T!==a?h=C={type:"unary_expr",operator:"NOT",expr:T}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a);if(h===a)if(h=c,C=L(),C!==a)if(A=qa(),A!==a){A=[];T=c;va=qa();if(va!==a){var Fa=t();if(Fa!==a){var La=qa();if(La!==a){var Qa=L();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=
T,T=a}else c=T,T=a}else c=T,T=a;if(T!==a)for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=t(),Fa!==a?(La=qa(),La!==a?(Qa=L(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):(c=T,T=a)):(c=T,T=a);else A=a;A!==a&&(A={type:"arithmetic",tail:A});A===a&&(A=c,T=K(),T!==a?(va=qa(),va!==a?(va=Ja(),va!==a?(va=qa(),va!==a?(va=n(),va!==a?(Fa=qa(),Fa!==a?(Fa=Sa(),Fa!==a?A=T={op:T,right:va}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=K(),T!==a?(va=qa(),va!==a?(va=Ja(),
va!==a?(va=qa(),va!==a?(va=Sa(),va!==a?A=T={op:T,right:{type:"expr_list",value:[]}}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=K(),T!==a?(va=qa(),va!==a?(va=F(),va!==a?A=T={op:T,right:va}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a))),A===a&&(A=c,va=g(),va!==a?(T=qa(),T!==a?(T=P(),T!==a?(Fa=qa(),Fa!==a?(Fa=L(),Fa!==a?(La=qa(),La!==a?(La=x(),La!==a?(va=qa(),va!==a?(va=L(),va!==a?A=va={op:"NOT"+T,right:{type:"expr_list",value:[Fa,va]}}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=
a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,va=P(),va!==a?(T=qa(),T!==a?(T=L(),T!==a?(Fa=qa(),Fa!==a?(Fa=x(),Fa!==a?(La=qa(),La!==a?(La=L(),La!==a?A=va={op:va,right:{type:"expr_list",value:[T,La]}}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)),A===a&&(A=c,T=k(),T!==a?(va=qa(),va!==a?(va=g(),va!==a?(va=qa(),va!==a?(va=L(),va!==a?A=T={op:T+"NOT",right:va}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=k(),T!==a?(va=qa(),va!==a?(va=L(),
va!==a?A=T={op:T,right:va}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)),A===a&&(A=c,T=y(),T!==a?(va=qa(),va!==a?(va=ha(),va!==a?(Fa=qa(),Fa!==a?(Fa=c,m.substr(c,6).toLowerCase()===ud?(La=m.substr(c,6),c+=6):(La=a,0===sa&&l(vd)),La!==a?(La=c,sa++,Qa=O(),sa--,Qa===a?La=void 0:(c=La,La=a),La!==a?Fa="ESCAPE":(c=Fa,Fa=a)):(c=Fa,Fa=a),Fa!==a?(Fa=qa(),Fa!==a?(Fa=pa(),Fa!==a?A=T={op:T,right:va,escape:Fa.value}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=y(),T!==a?(va=qa(),
va!==a?(va=ha(),va!==a?A=T={op:T,right:va,escape:""}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a))))));A===a&&(A=null);A!==a?(h=C,C=A,""==C||void 0==C||null==C?C=h:(A=null,C=A="arithmetic"==C.type?db(h,C.tail):eb(C.op,h,C.right,C.escape)),h=C):(c=h,h=a)}else c=h,h=a;else c=h,h=a;return h}function t(){if(m.substr(c,2)===S){var h=S;c+=2}else h=a,0===sa&&l(da);h===a&&(62===m.charCodeAt(c)?(h=fa,c++):(h=a,0===sa&&l(oa)),h===a&&(m.substr(c,2)===za?(h=za,c+=2):(h=a,0===sa&&l(Ea)),h===a&&(m.substr(c,2)===Na?(h=Na,c+=
2):(h=a,0===sa&&l(Pa)),h===a&&(60===m.charCodeAt(c)?(h=Za,c++):(h=a,0===sa&&l(Ya)),h===a&&(61===m.charCodeAt(c)?(h=Ra,c++):(h=a,0===sa&&l(wb)),h===a&&(m.substr(c,2)===Va?(h=Va,c+=2):(h=a,0===sa&&l(gb))))))));return h}function y(){var h=h=c;var C=g();if(C!==a){var A=qa();if(A!==a){var T=R();T!==a?h=C=[C,A,T]:(c=h,h=a)}else c=h,h=a}else c=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=R());return h}function K(){var h=h=c;var C=g();if(C!==a){var A=qa();if(A!==a){var T=b();T!==a?h=C=[C,A,T]:(c=h,h=a)}else c=
h,h=a}else c=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=b());return h}function L(){var h=c;var C=ka();if(C!==a){var A=[];var T=c;var va=qa();if(va!==a){var Fa=Y();if(Fa!==a){var La=qa();if(La!==a){var Qa=ka();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=T,T=a}else c=T,T=a}else c=T,T=a;for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=Y(),Fa!==a?(La=qa(),La!==a?(Qa=ka(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):(c=T,T=a)):(c=T,T=a);A!==a?h=C=db(C,A):(c=h,h=a)}else c=h,h=a;return h}function Y(){if(43===
m.charCodeAt(c)){var h=jb;c++}else h=a,0===sa&&l(oc);h===a&&(45===m.charCodeAt(c)?(h=pc,c++):(h=a,0===sa&&l(qc)));return h}function ka(){var h=c;var C=I();if(C!==a){var A=[];var T=c;var va=qa();if(va!==a){var Fa=ea();if(Fa!==a){var La=qa();if(La!==a){var Qa=I();Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)}else c=T,T=a}else c=T,T=a}else c=T,T=a;for(;T!==a;)A.push(T),T=c,va=qa(),va!==a?(Fa=ea(),Fa!==a?(La=qa(),La!==a?(Qa=I(),Qa!==a?T=va=[va,Fa,La,Qa]:(c=T,T=a)):(c=T,T=a)):(c=T,T=a)):(c=T,T=a);A!==a?h=C=db(C,
A):(c=h,h=a)}else c=h,h=a;return h}function ea(){if(42===m.charCodeAt(c)){var h=wd;c++}else h=a,0===sa&&l(xd);h===a&&(47===m.charCodeAt(c)?(h=yd,c++):(h=a,0===sa&&l(zd)));return h}function I(){var h=pa();if(h===a){var C=c;var A=c;var T=r();if(T!==a){var va=G();if(va!==a){var Fa=ca();Fa!==a?A=T=parseFloat(T+va+Fa):(c=A,A=a)}else c=A,A=a}else c=A,A=a;A===a&&(A=c,T=r(),T!==a?(va=G(),va!==a?A=T=parseFloat(T+va):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=r(),T!==a?(va=ca(),va!==a?A=T=parseFloat(T+va):(c=A,A=a)):
(c=A,A=a),A===a&&(A=c,T=r(),T!==a&&(T=parseFloat(T)),A=T)));var La=A;if(La!==a){var Qa=c;sa++;var Ad=ia();sa--;Ad===a?Qa=void 0:(c=Qa,Qa=a);Qa!==a?C=La={type:"number",value:La}:(c=C,C=a)}else c=C,C=a;h=C;if(h===a){var Kb=c;var Ab=c;if(m.substr(c,4).toLowerCase()===Bd){var Zb=m.substr(c,4);c+=4}else Zb=a,0===sa&&l(Cd);if(Zb!==a){var Lb=c;sa++;var Dd=O();sa--;Dd===a?Lb=void 0:(c=Lb,Lb=a);Lb!==a?Ab=Zb=[Zb,Lb]:(c=Ab,Ab=a)}else c=Ab,Ab=a;var xb=Ab;xb!==a&&(xb={type:"bool",value:!0});Kb=xb;if(Kb===a){Kb=
c;var Bb=c;if(m.substr(c,5).toLowerCase()===Ed){var $b=m.substr(c,5);c+=5}else $b=a,0===sa&&l(Fd);if($b!==a){var Mb=c;sa++;var Gd=O();sa--;Gd===a?Mb=void 0:(c=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(c=Bb,Bb=a)}else c=Bb,Bb=a;xb=Bb;xb!==a&&(xb={type:"bool",value:!1});Kb=xb}h=Kb;if(h===a){var Cb=c;if(m.substr(c,4).toLowerCase()===Hd){var ac=m.substr(c,4);c+=4}else ac=a,0===sa&&l(Id);if(ac!==a){var Nb=c;sa++;var Jd=O();sa--;Jd===a?Nb=void 0:(c=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(c=Cb,Cb=a)}else c=Cb,Cb=a;var rc=Cb;
rc!==a&&(rc={type:"null",value:null});h=rc;if(h===a){var ub=c;var Db=c;if(m.substr(c,4).toLowerCase()===Kd){var sc=m.substr(c,4);c+=4}else sc=a,0===sa&&l(Ld);if(sc!==a){var bc=c;sa++;var Md=O();sa--;Md===a?bc=void 0:(c=bc,bc=a);bc!==a?Db=sc="DATE":(c=Db,Db=a)}else c=Db,Db=a;var Rc=Db;if(Rc!==a){var Nd=qa();if(Nd!==a){var Sc=ha();Sc!==a?ub=Rc={type:"date",value:Sc.value}:(c=ub,ub=a)}else c=ub,ub=a}else c=ub,ub=a;h=ub;if(h===a){var vb=c;var Eb=c;if(m.substr(c,9).toLowerCase()===Od){var tc=m.substr(c,
9);c+=9}else tc=a,0===sa&&l(Pd);if(tc!==a){var cc=c;sa++;var Qd=O();sa--;Qd===a?cc=void 0:(c=cc,cc=a);cc!==a?Eb=tc="TIMESTAMP":(c=Eb,Eb=a)}else c=Eb,Eb=a;var Tc=Eb;if(Tc!==a){var Rd=qa();if(Rd!==a){var Uc=ha();Uc!==a?vb=Tc={type:"timestamp",value:Uc.value}:(c=vb,vb=a)}else c=vb,vb=a}else c=vb,vb=a;h=vb;if(h===a){var Wa=c;var Ob=la();if(Ob!==a){var uc=qa();if(uc!==a){if(45===m.charCodeAt(c)){var sb=pc;c++}else sb=a,0===sa&&l(qc);sb===a&&(43===m.charCodeAt(c)?(sb=jb,c++):(sb=a,0===sa&&l(oc)));if(sb!==
a){var vc=qa();if(vc!==a){var Pb=ha();if(Pb!==a){var Sd=qa();if(Sd!==a){var Vc=N();Vc!==a?Wa=Ob={type:"interval",value:Pb,qualifier:Vc,op:sb}:(c=Wa,Wa=a)}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a;Wa===a&&(Wa=c,Ob=la(),Ob!==a?(uc=qa(),uc!==a?(sb=ha(),sb!==a?(vc=qa(),vc!==a?(Pb=N(),Pb!==a?Wa=Ob={type:"interval",value:sb,qualifier:Pb,op:""}:(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a));h=Wa}}}}}}var Ua=h;if(Ua===a){var bb=c;var Fb=c;
if(m.substr(c,7).toLowerCase()===Td){var wc=m.substr(c,7);c+=7}else wc=a,0===sa&&l(Ud);if(wc!==a){var dc=c;sa++;var Vd=O();sa--;Vd===a?dc=void 0:(c=dc,dc=a);dc!==a?Fb=wc="EXTRACT":(c=Fb,Fb=a)}else c=Fb,Fb=a;var Wc=Fb;if(Wc!==a){var Wd=qa();if(Wd!==a){var Xd=Ja();if(Xd!==a){var Yd=qa();if(Yd!==a){var ob=ma();ob===a&&(ob=na(),ob===a&&(ob=wa(),ob===a&&(ob=ua(),ob===a&&(ob=ya(),ob===a&&(ob=Ba())))));var Xc=ob;if(Xc!==a){var Zd=qa();if(Zd!==a){var $d=aa();if($d!==a){var ae=qa();if(ae!==a){var Yc=d();if(Yc!==
a){var be=qa();if(be!==a){var ce=Sa();ce!==a?bb=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(c=bb,bb=a)}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a;Ua=bb;if(Ua===a){var $a=c;var Gb=c;if(m.substr(c,9).toLowerCase()===de){var xc=m.substr(c,9);c+=9}else xc=a,0===sa&&l(ee);if(xc!==a){var ec=c;sa++;var fe=O();sa--;fe===a?ec=void 0:(c=ec,ec=a);ec!==
a?Gb=xc="SUBSTRING":(c=Gb,Gb=a)}else c=Gb,Gb=a;var Zc=Gb;if(Zc!==a){var ge=qa();if(ge!==a){var he=Ja();if(he!==a){var ie=qa();if(ie!==a){var yc=d();if(yc!==a){var je=qa();if(je!==a){var ke=aa();if(ke!==a){var le=qa();if(le!==a){var zc=d();if(zc!==a){var me=qa();if(me!==a){var kb=c;var Hb=c;if(m.substr(c,3).toLowerCase()===ne){var Ac=m.substr(c,3);c+=3}else Ac=a,0===sa&&l(oe);if(Ac!==a){var fc=c;sa++;var pe=O();sa--;pe===a?fc=void 0:(c=fc,fc=a);fc!==a?Hb=Ac="FOR":(c=Hb,Hb=a)}else c=Hb,Hb=a;var Qb=
Hb;if(Qb!==a){var $c=qa();if($c!==a){var ad=d();if(ad!==a){var bd=qa();bd!==a?kb=Qb=[Qb,$c,ad,bd]:(c=kb,kb=a)}else c=kb,kb=a}else c=kb,kb=a}else c=kb,kb=a;kb===a&&(kb=null);kb!==a?(Qb=Sa(),Qb!==a?$a=Zc={type:"function",name:"substring",args:{type:"expr_list",value:kb?[yc,zc,kb[2]]:[yc,zc]}}:(c=$a,$a=a)):(c=$a,$a=a)}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a;Ua=$a;if(Ua===a){var Oa=c;var Rb=V();
if(Rb!==a){var Bc=qa();if(Bc!==a){var Cc=Ja();if(Cc!==a){var Dc=qa();if(Dc!==a){var pb=u();pb===a&&(pb=null);if(pb!==a){var Ec=qa();if(Ec!==a){var Sb=d();if(Sb!==a){var Fc=qa();if(Fc!==a){var Gc=aa();if(Gc!==a){var qe=qa();if(qe!==a){var cd=d();if(cd!==a){var re=qa();if(re!==a){var se=Sa();se!==a?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Sb,cd]}}:(c=Oa,Oa=a)}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=
Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a;Oa===a&&(Oa=c,Rb=V(),Rb!==a?(Bc=qa(),Bc!==a?(Cc=Ja(),Cc!==a?(Dc=qa(),Dc!==a?(pb=u(),pb===a&&(pb=null),pb!==a?(Ec=qa(),Ec!==a?(Sb=d(),Sb!==a?(Fc=qa(),Fc!==a?(Gc=Sa(),Gc!==a?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Sb]}}:(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a));Ua=
Oa;if(Ua===a){var cb=c;var Ib=c;if(m.substr(c,8).toLowerCase()===te){var Hc=m.substr(c,8);c+=8}else Hc=a,0===sa&&l(ue);if(Hc!==a){var gc=c;sa++;var ve=O();sa--;ve===a?gc=void 0:(c=gc,gc=a);gc!==a?Ib=Hc="POSITION":(c=Ib,Ib=a)}else c=Ib,Ib=a;var dd=Ib;if(dd!==a){var we=qa();if(we!==a){var xe=Ja();if(xe!==a){var ye=qa();if(ye!==a){var ed=d();if(ed!==a){var ze=qa();if(ze!==a){var Ae=b();if(Ae!==a){var Be=qa();if(Be!==a){var fd=d();if(fd!==a){var Ce=qa();if(Ce!==a){var De=Sa();De!==a?cb=dd={type:"function",
name:"position",args:{type:"expr_list",value:[ed,fd]}}:(c=cb,cb=a)}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a;Ua=cb;if(Ua===a){var hb=c;var Tb;var qb=c;qb=Tb=U();if(qb===a)if(qb=c,96===m.charCodeAt(c)?(Tb=gd,c++):(Tb=a,0===sa&&l(hd)),Tb!==a){var hc=[];if(id.test(m.charAt(c))){var tb=m.charAt(c);c++}else tb=a,0===sa&&l(jd);if(tb!==a)for(;tb!==a;)hc.push(tb),id.test(m.charAt(c))?(tb=m.charAt(c),
c++):(tb=a,0===sa&&l(jd));else hc=a;hc!==a?(96===m.charCodeAt(c)?(tb=gd,c++):(tb=a,0===sa&&l(hd)),tb!==a?qb=Tb=hc.join(""):(c=qb,qb=a)):(c=qb,qb=a)}else c=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=qa();if(Ee!==a){var Fe=Ja();if(Fe!==a){var Ge=qa();if(Ge!==a){var Ub=n();Ub===a&&(Ub=null);if(Ub!==a){var He=qa();if(He!==a){var Ie=Sa();Ie!==a?hb=Ic={type:"function",name:Ic,args:Ub?Ub:{type:"expr_list",value:[]}}:(c=hb,hb=a)}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,
hb=a;Ua=hb;if(Ua===a){var mb;var Ta=c;var Vb=Da();if(Vb!==a){var Jc=qa();if(Jc!==a){var Wb=d();if(Wb!==a){var Kc=qa();if(Kc!==a){var yb=[];for(mb=Aa();mb!==a;)yb.push(mb),mb=Aa();if(yb!==a)if(mb=qa(),mb!==a){var ic=Ga();ic!==a?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:null}:(c=Ta,Ta=a)}else c=Ta,Ta=a;else c=Ta,Ta=a}else c=Ta,Ta=a}else c=Ta,Ta=a}else c=Ta,Ta=a}else c=Ta,Ta=a;if(Ta===a)if(Ta=c,Vb=Da(),Vb!==a)if(Jc=qa(),Jc!==a)if(Wb=d(),Wb!==a)if(Kc=qa(),Kc!==a){yb=[];
for(mb=Aa();mb!==a;)yb.push(mb),mb=Aa();if(yb!==a)if(mb=qa(),mb!==a)if(ic=Ca(),ic!==a){var Je=qa();if(Je!==a){var Ke=Ga();Ke!==a?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:ic.value}:(c=Ta,Ta=a)}else c=Ta,Ta=a}else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a}else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a;var Lc=Ta;if(Lc===a){var nb;var Xa=c;var Xb=Da();if(Xb!==a){var Mc=qa();if(Mc!==a){var zb=[];for(nb=ra();nb!==a;)zb.push(nb),nb=ra();if(zb!==a)if(nb=qa(),nb!==
a){var jc=Ga();jc!==a?Xa=Xb={type:"case_expression",format:"searched",clauses:zb,else:null}:(c=Xa,Xa=a)}else c=Xa,Xa=a;else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a;if(Xa===a)if(Xa=c,Xb=Da(),Xb!==a)if(Mc=qa(),Mc!==a){zb=[];for(nb=ra();nb!==a;)zb.push(nb),nb=ra();if(zb!==a)if(nb=qa(),nb!==a)if(jc=Ca(),jc!==a){var Le=qa();if(Le!==a){var Me=Ga();Me!==a?Xa=Xb={type:"case_expression",format:"searched",clauses:zb,else:jc.value}:(c=Xa,Xa=a)}else c=Xa,Xa=a}else c=Xa,Xa=a;else c=Xa,Xa=a;else c=Xa,Xa=a}else c=
Xa,Xa=a;else c=Xa,Xa=a;Lc=Xa}Ua=Lc;if(Ua===a){var kc;var Jb=c;var kd=ia();if(kd!==a){var Nc=[];for(kc=Q();kc!==a;)Nc.push(kc),kc=Q();Nc!==a?Jb=kd+=Nc.join(""):(c=Jb,Jb=a)}else c=Jb,Jb=a;var lc=Jb;if(lc!==a){var Oc=lc;lc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Ua=lc;if(Ua===a&&(Ua=F(),Ua===a)){Ua=c;var ld=Ja();if(ld!==a){var Ne=qa();if(Ne!==a){var Pc=d();if(Pc!==a){var Oe=
qa();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Ua=ld=Pc):(c=Ua,Ua=a)}else c=Ua,Ua=a}else c=Ua,Ua=a}else c=Ua,Ua=a}else c=Ua,Ua=a}}}}}}}}return Ua}function U(){var h;var C=c;var A=ia();if(A!==a){var T=[];for(h=O();h!==a;)T.push(h),h=O();T!==a?C=A+=T.join(""):(c=C,C=a)}else c=C,C=a;return C}function ia(){if(Qe.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(Re);return h}function O(){if(Se.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(Te);return h}function Q(){if(Ue.test(m.charAt(c))){var h=
m.charAt(c);c++}else h=a,0===sa&&l(Ve);return h}function F(){var h=c;if(64===m.charCodeAt(c)){var C=We;c++}else C=a,0===sa&&l(Xe);if(C!==a){var A=U();A!==a?h=C=[C,A]:(c=h,h=a)}else c=h,h=a;h!==a&&(h={type:"param",value:h[1]});return h}function u(){var h=c;if(m.substr(c,7).toLowerCase()===Ye){var C=m.substr(c,7);c+=7}else C=a,0===sa&&l(Ze);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="LEADING":(c=h,h=a)}else c=h,h=a;h===a&&(h=c,m.substr(c,8).toLowerCase()===$e?(C=m.substr(c,8),
c+=8):(C=a,0===sa&&l(af)),C!==a?(C=c,sa++,A=O(),sa--,A===a?C=void 0:(c=C,C=a),C!==a?h="TRAILING":(c=h,h=a)):(c=h,h=a),h===a&&(h=c,m.substr(c,4).toLowerCase()===bf?(C=m.substr(c,4),c+=4):(C=a,0===sa&&l(cf)),C!==a?(C=c,sa++,A=O(),sa--,A===a?C=void 0:(c=C,C=a),C!==a?h="BOTH":(c=h,h=a)):(c=h,h=a)));return h}function N(){var h=c;var C=c;var A=E();if(A!==a){var T=qa();if(T!==a)if(T=Ja(),T!==a)if(T=qa(),T!==a)if(T=W(),T!==a){var va=qa();va!==a?(va=Sa(),va!==a?C=A={type:"interval-period",period:A.value,precision:T,
secondary:null}:(c=C,C=a)):(c=C,C=a)}else c=C,C=a;else c=C,C=a;else c=C,C=a;else c=C,C=a}else c=C,C=a;C===a&&(C=c,A=E(),A!==a&&(A=md(A)),C=A);if(C!==a)if(A=qa(),A!==a)if(A=c,m.substr(c,2).toLowerCase()===df?(T=m.substr(c,2),c+=2):(T=a,0===sa&&l(ef)),T!==a?(T=c,sa++,va=O(),sa--,va===a?T=void 0:(c=T,T=a),T!==a?A="TO":(c=A,A=a)):(c=A,A=a),A!==a)if(A=qa(),A!==a){A=c;T=E();T!==a&&(T={type:"interval-period",period:T.value,precision:null,secondary:null});A=T;if(A===a){A=c;T=Ba();if(T!==a)if(T=qa(),T!==a)if(T=
Ja(),T!==a)if(T=qa(),T!==a)if(T=W(),T!==a)if(va=qa(),va!==a)if(va=Ia(),va!==a)if(va=qa(),va!==a)if(va=X(),va!==a){var Fa=qa();Fa!==a?(Fa=Sa(),Fa!==a?A=T=nd(T,va):(c=A,A=a)):(c=A,A=a)}else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;A===a&&(A=c,T=Ba(),T!==a?(T=qa(),T!==a?(T=Ja(),T!==a?(T=qa(),T!==a?(T=W(),T!==a?(va=qa(),va!==a?(va=Sa(),va!==a?A=T={type:"interval-period",period:"second",precision:T,secondary:null}:(c=A,A=a)):(c=A,A=
a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,T=Ba(),T!==a&&(T={type:"interval-period",period:"second",precision:null,secondary:null}),A=T))}A!==a?h=C={type:"interval-qualifier",start:C,end:A}:(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;else c=h,h=a;h===a&&(h=c,A=E(),A!==a?(C=qa(),C!==a?(C=Ja(),C!==a?(C=qa(),C!==a?(C=X(),C!==a?(T=qa(),T!==a?(T=Sa(),T!==a?h=A={type:"interval-period",period:A.value,precision:C,secondary:null}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):
(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,A=E(),A!==a&&(A=md(A)),h=A,h===a&&(h=c,A=Ba(),A!==a?(C=qa(),C!==a?(C=Ja(),C!==a?(C=qa(),C!==a?(C=W(),C!==a?(T=qa(),T!==a?(T=Ia(),T!==a?(A=qa(),A!==a?(A=X(),A!==a?(T=qa(),T!==a?(T=Sa(),T!==a?h=A=nd(C,A):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,A=Ba(),A!==a?(C=qa(),C!==a?(C=Ja(),C!==a?(C=qa(),C!==a?(C=X(),C!==a?(T=qa(),T!==a?(T=Sa(),T!==a?h=A={type:"interval-period",
period:"second",precision:C,secondary:null}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,A=Ba(),A!==a&&(A={type:"interval-period",period:"second",precision:null,secondary:null}),h=A)))));return h}function E(){var h=c;h=wa();h!==a&&(h={type:"string",value:"day"});h===a&&(h=c,h=ua(),h!==a&&(h={type:"string",value:"hour"}),h===a&&(h=c,h=ya(),h!==a&&(h={type:"string",value:"minute"}),h===a&&(h=c,h=na(),h!==a&&(h={type:"string",value:"month"}),h===a&&(h=c,h=ma(),
h!==a&&(h={type:"string",value:"year"})))));return h}function X(){var h=ta();h!==a&&(h=parseFloat(h));return h}function W(){var h=ta();h!==a&&(h=parseFloat(h));return h}function ha(){var h=pa();h===a&&(h=F());return h}function pa(){var h=c;if(39===m.charCodeAt(c)){var C=od;c++}else C=a,0===sa&&l(pd);C===a&&(m.substr(c,2)===qd?(C=qd,c+=2):(C=a,0===sa&&l(ff)));if(C!==a){C=[];var A=c;m.substr(c,2)===mc?(A=mc,c+=2):(A=a,0===sa&&l(rd));A!==a&&(A="'");A===a&&(sd.test(m.charAt(c))?(A=m.charAt(c),c++):(A=
a,0===sa&&l(td)));for(;A!==a;)C.push(A),A=c,m.substr(c,2)===mc?(A=mc,c+=2):(A=a,0===sa&&l(rd)),A!==a&&(A="'"),A===a&&(sd.test(m.charAt(c))?(A=m.charAt(c),c++):(A=a,0===sa&&l(td)));C!==a?(39===m.charCodeAt(c)?(A=od,c++):(A=a,0===sa&&l(pd)),A!==a?h=C={type:"string",value:C.join("")}:(c=h,h=a)):(c=h,h=a)}else c=h,h=a;return h}function ra(){var h=c;var C=Ha();if(C!==a)if(C=qa(),C!==a)if(C=d(),C!==a){var A=qa();A!==a?(A=Ka(),A!==a?(A=qa(),A!==a?(A=d(),A!==a?h=C={type:"when_clause",operand:C,value:A}:(c=
h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;return h}function Aa(){var h=c;var C=Ha();if(C!==a)if(C=qa(),C!==a)if(C=d(),C!==a){var A=qa();A!==a?(A=Ka(),A!==a?(A=qa(),A!==a?(A=d(),A!==a?h=C={type:"when_clause",operand:C,value:A}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;return h}function Ca(){var h=c;var C=c;if(m.substr(c,4).toLowerCase()===gf){var A=m.substr(c,4);c+=4}else A=a,0===sa&&l(hf);if(A!==a){A=c;sa++;var T=O();sa--;
T===a?A=void 0:(c=A,A=a);A!==a?C="ELSE":(c=C,C=a)}else c=C,C=a;C!==a?(C=qa(),C!==a?(C=d(),C!==a?h={type:"else_clause",value:C}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a);return h}function r(){var h=ta();if(h===a){h=c;if(45===m.charCodeAt(c)){var C=pc;c++}else C=a,0===sa&&l(qc);C===a&&(43===m.charCodeAt(c)?(C=jb,c++):(C=a,0===sa&&l(oc)));if(C!==a){var A=ta();A!==a?h=C=C[0]+A:(c=h,h=a)}else c=h,h=a}return h}function G(){var h=c;if(46===m.charCodeAt(c)){var C=jf;c++}else C=a,0===sa&&l(kf);C!==a?(C=ta(),C===a&&
(C=null),C!==a?h="."+(null!=C?C:""):(c=h,h=a)):(c=h,h=a);return h}function ca(){var h;var C=h=c;if(lf.test(m.charAt(c))){var A=m.charAt(c);c++}else A=a,0===sa&&l(mf);A!==a?(nf.test(m.charAt(c))?(A=m.charAt(c),c++):(A=a,0===sa&&l(of)),A===a&&(A=null),A!==a?C="e"+(null===A?"":A):(c=C,C=a)):(c=C,C=a);C!==a?(A=ta(),A!==a?h=C+A:(c=h,h=a)):(c=h,h=a);return h}function ta(){var h=[];var C=xa();if(C!==a)for(;C!==a;)h.push(C),C=xa();else h=a;h!==a&&(h=h.join(""));return h}function xa(){if(pf.test(m.charAt(c))){var h=
m.charAt(c);c++}else h=a,0===sa&&l(qf);return h}function b(){var h=c;if(m.substr(c,2).toLowerCase()===rf){var C=m.substr(c,2);c+=2}else C=a,0===sa&&l(sf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="IN":(c=h,h=a)}else c=h,h=a;return h}function k(){var h=c;if(m.substr(c,2).toLowerCase()===tf){var C=m.substr(c,2);c+=2}else C=a,0===sa&&l(uf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="IS":(c=h,h=a)}else c=h,h=a;return h}function R(){var h=c;if(m.substr(c,
4).toLowerCase()===vf){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(wf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="LIKE":(c=h,h=a)}else c=h,h=a;return h}function g(){var h=c;if(m.substr(c,3).toLowerCase()===xf){var C=m.substr(c,3);c+=3}else C=a,0===sa&&l(yf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="NOT":(c=h,h=a)}else c=h,h=a;return h}function x(){var h=c;if(m.substr(c,3).toLowerCase()===zf){var C=m.substr(c,3);c+=3}else C=a,0===sa&&l(Af);if(C!==
a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="AND":(c=h,h=a)}else c=h,h=a;return h}function M(){var h=c;if(m.substr(c,2).toLowerCase()===Bf){var C=m.substr(c,2);c+=2}else C=a,0===sa&&l(Cf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="OR":(c=h,h=a)}else c=h,h=a;return h}function P(){var h=c;if(m.substr(c,7).toLowerCase()===Df){var C=m.substr(c,7);c+=7}else C=a,0===sa&&l(Ef);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="BETWEEN":(c=h,h=a)}else c=
h,h=a;return h}function aa(){var h=c;if(m.substr(c,4).toLowerCase()===Ff){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(Gf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="FROM":(c=h,h=a)}else c=h,h=a;return h}function V(){var h=c;if(m.substr(c,4).toLowerCase()===Hf){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(If);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="TRIM":(c=h,h=a)}else c=h,h=a;return h}function la(){var h=c;if(m.substr(c,8).toLowerCase()===Jf){var C=
m.substr(c,8);c+=8}else C=a,0===sa&&l(Kf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="INTERVAL":(c=h,h=a)}else c=h,h=a;return h}function ma(){var h=c;if(m.substr(c,4).toLowerCase()===Lf){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(Mf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="YEAR":(c=h,h=a)}else c=h,h=a;return h}function na(){var h=c;if(m.substr(c,5).toLowerCase()===Nf){var C=m.substr(c,5);c+=5}else C=a,0===sa&&l(Of);if(C!==a){C=c;sa++;var A=O();
sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="MONTH":(c=h,h=a)}else c=h,h=a;return h}function wa(){var h=c;if(m.substr(c,3).toLowerCase()===Pf){var C=m.substr(c,3);c+=3}else C=a,0===sa&&l(Qf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="DAY":(c=h,h=a)}else c=h,h=a;return h}function ua(){var h=c;if(m.substr(c,4).toLowerCase()===Rf){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(Sf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="HOUR":(c=h,h=a)}else c=h,h=a;return h}
function ya(){var h=c;if(m.substr(c,6).toLowerCase()===Tf){var C=m.substr(c,6);c+=6}else C=a,0===sa&&l(Uf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="MINUTE":(c=h,h=a)}else c=h,h=a;return h}function Ba(){var h=c;if(m.substr(c,6).toLowerCase()===Vf){var C=m.substr(c,6);c+=6}else C=a,0===sa&&l(Wf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="SECOND":(c=h,h=a)}else c=h,h=a;return h}function Da(){var h=c;if(m.substr(c,4).toLowerCase()===Xf){var C=m.substr(c,
4);c+=4}else C=a,0===sa&&l(Yf);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="CASE":(c=h,h=a)}else c=h,h=a;return h}function Ga(){var h=c;if(m.substr(c,3).toLowerCase()===Zf){var C=m.substr(c,3);c+=3}else C=a,0===sa&&l($f);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="END":(c=h,h=a)}else c=h,h=a;return h}function Ha(){var h=c;if(m.substr(c,4).toLowerCase()===ag){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(bg);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:
(c=C,C=a);C!==a?h="WHEN":(c=h,h=a)}else c=h,h=a;return h}function Ka(){var h=c;if(m.substr(c,4).toLowerCase()===cg){var C=m.substr(c,4);c+=4}else C=a,0===sa&&l(dg);if(C!==a){C=c;sa++;var A=O();sa--;A===a?C=void 0:(c=C,C=a);C!==a?h="THEN":(c=h,h=a)}else c=h,h=a;return h}function Ia(){if(44===m.charCodeAt(c)){var h=eg;c++}else h=a,0===sa&&l(fg);return h}function Ja(){if(40===m.charCodeAt(c)){var h=gg;c++}else h=a,0===sa&&l(hg);return h}function Sa(){if(41===m.charCodeAt(c)){var h=ig;c++}else h=a,0===
sa&&l(jg);return h}function qa(){var h;var C=[];for(h=fb();h!==a;)C.push(h),h=fb();return C}function fb(){if(kg.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(lg);return h}function eb(h,C,A,T){h={type:"binary_expr",operator:h,left:C,right:A};void 0!==T&&(h.escape=T);return h}function db(h,C){for(var A=0;A<C.length;A++)h=eb(C[A][1],h,C[A][3]);return h}v=void 0!==v?v:{};var a={},ab={start:B},Ma=B,ib="!",lb=w("!",!1),Ra="\x3d",wb=w("\x3d",!1),S="\x3e\x3d",da=w("\x3e\x3d",!1),fa="\x3e",oa=
w("\x3e",!1),za="\x3c\x3d",Ea=w("\x3c\x3d",!1),Na="\x3c\x3e",Pa=w("\x3c\x3e",!1),Za="\x3c",Ya=w("\x3c",!1),Va="!\x3d",gb=w("!\x3d",!1),jb="+",oc=w("+",!1),pc="-",qc=w("-",!1),wd="*",xd=w("*",!1),yd="/",zd=w("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=D([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=D([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=w("@",!1),md=function(h){return{type:"interval-period",
period:h.value,precision:null,secondary:null}},nd=function(h,C){return{type:"interval-period",period:"second",precision:h,secondary:C}},od="'",pd=w("'",!1),qd="N'",ff=w("N'",!1),mc="''",rd=w("''",!1),sd=/^[^']/,td=D(["'"],!0,!1),jf=".",kf=w(".",!1),pf=/^[0-9]/,qf=D([["0","9"]],!1,!1),lf=/^[eE]/,mf=D(["e","E"],!1,!1),nf=/^[+\-]/,of=D(["+","-"],!1,!1),Hd="null",Id=w("NULL",!0),Bd="true",Cd=w("TRUE",!0),Ed="false",Fd=w("FALSE",!0),rf="in",sf=w("IN",!0),tf="is",uf=w("IS",!0),vf="like",wf=w("LIKE",!0),
ud="escape",vd=w("ESCAPE",!0),xf="not",yf=w("NOT",!0),zf="and",Af=w("AND",!0),Bf="or",Cf=w("OR",!0),Df="between",Ef=w("BETWEEN",!0),Ff="from",Gf=w("FROM",!0),ne="for",oe=w("FOR",!0),de="substring",ee=w("SUBSTRING",!0),Td="extract",Ud=w("EXTRACT",!0),Hf="trim",If=w("TRIM",!0),te="position",ue=w("POSITION",!0),Od="timestamp",Pd=w("TIMESTAMP",!0),Kd="date",Ld=w("DATE",!0),Ye="leading",Ze=w("LEADING",!0),$e="trailing",af=w("TRAILING",!0),bf="both",cf=w("BOTH",!0),df="to",ef=w("TO",!0),Jf="interval",Kf=
w("INTERVAL",!0),Lf="year",Mf=w("YEAR",!0),Nf="month",Of=w("MONTH",!0),Pf="day",Qf=w("DAY",!0),Rf="hour",Sf=w("HOUR",!0),Tf="minute",Uf=w("MINUTE",!0),Vf="second",Wf=w("SECOND",!0),Xf="case",Yf=w("CASE",!0),Zf="end",$f=w("END",!0),ag="when",bg=w("WHEN",!0),cg="then",dg=w("THEN",!0),gf="else",hf=w("ELSE",!0),eg=",",fg=w(",",!1),gg="(",hg=w("(",!1),ig=")",jg=w(")",!1),kg=/^[ \t\n\r]/,lg=D([" ","\t","\n","\r"],!1,!1),gd="`",hd=w("`",!1),id=/^[^`]/,jd=D(["`"],!0,!1),c=0,Yb=[{line:1,column:1}],rb=0,nc=
[],sa=0;if("startRule"in v){if(!(v.startRule in ab))throw Error("Can't start parsing from rule \""+v.startRule+'".');Ma=ab[v.startRule]}var Qc=Ma();if(Qc!==a&&c===m.length)return Qc;Qc!==a&&c<m.length&&l({type:"end"});throw function(h,C,A){return new H(H.buildMessage(h,C),h,C,A)}(nc,rb<m.length?m.charAt(rb):null,rb<m.length?Z(rb,rb+1):Z(rb,rb));}}})});let J=function(){function q(){}q.parse=function(H){return ba.parse(H)};return q}();p.WhereGrammar=J;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/chunks/spatialQuerySupport":function(){define("require exports ../core/maybe ../core/jsonMap ../core/Error ../core/promiseUtils ../geometry/support/spatialReferenceUtils ../geometry/support/contains ../geometry/support/intersects ../geometry/support/extentUtils ../geometry/support/jsonUtils ../core/unitUtils ../geometry/support/normalizeUtils ../layers/graphics/OptimizedGeometry ../layers/graphics/featureConversionUtils ../layers/graphics/centroid ../layers/graphics/data/projectionSupport ../layers/graphics/contains".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l,B,n,d,f,z){function t(W,ha,pa,ra=W.hasZ,Aa=W.hasM){const Ca=W.hasZ&&ra,r=W.hasM&&Aa;return pa?(W=n.quantizeOptimizedGeometry(O,ha,W.hasZ,W.hasM,"esriGeometryPoint",pa,ra,Aa),n.convertToPoint(W,Ca,r)):n.convertToPoint(ha,Ca,r)}function y(W,ha,pa,ra,Aa,Ca,r=ha,G=pa){const ca=ha&&r,ta=pa&&G;ra=ra?"coords"in ra?ra:ra.geometry:null;if(!ra)return null;if(Aa)return ha=n.generalizeOptimizedGeometry(ia,ra,ha,pa,W,Aa,r,G),Ca&&(ha=n.quantizeOptimizedGeometry(O,ha,ca,ta,W,
Ca)),Q[W](ha,ca,ta);if(Ca)return Ca=n.quantizeOptimizedGeometry(O,ra,ha,pa,W,Ca,r,G),Q[W](Ca,ca,ta);n.removeZMValues(U,ra,ha,pa,r,G);return Q[W](U,ca,ta)}async function K(W,ha,pa){if(!W)return null;var {where:ra}=W;W.where=ra=ra&&ra.trim();if(!ra||/^1 *= *1$/.test(ra)||ha&&ha===ra)W.where=null;if(!W.geometry)return W;ha=await L(W);W.distance=0;W.units=null;"esriSpatialRelEnvelopeIntersects"===W.spatialRel&&({spatialReference:ra}=W.geometry,ha=D.getGeometryExtent(ha),ha.spatialReference=ra);W.geometry=
ha;await f.checkProjectionSupport(ha.spatialReference,pa);ha=(await l.normalizeCentralMeridian(ja.fromJSON(ha)))[0];if(ba.isNone(ha))throw I;ha=ha.toJSON();ha=await f.project(ha,ha.spatialReference,pa);if(!ha)throw I;ha.spatialReference=pa;W.geometry=ha;return W}async function L(W){const {geometry:ha,distance:pa,units:ra}=W;if(null==pa||"vertexAttributes"in ha)return ha;var Aa=ha.spatialReference;W=ra?ea.fromJSON(ra):Z.getUnitString(Aa);Aa=Aa&&(m.isGeographic(Aa)||m.isWebMercator(Aa))?ha:await f.checkProjectionSupport(Aa,
m.WGS84).then(()=>f.project(ha,m.WGS84));return(await ka())(Aa.spatialReference,Aa,pa,W)}function Y(){return new Promise(function(W,ha){p(["../geometry/geometryEngineJSON"],W,ha)})}function ka(){return Y().then(W=>W.geodesicBuffer)}const ea=new J.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),I=Object.freeze({}),U=new B,ia=new B,O=new B,
Q={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint},F=(W,ha)=>"_geVersion"!==W?ha:void 0,u={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",
esriSpatialRelRelation:null};var N={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},E={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},X={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.QUERY_ENGINE_EMPTY_RESULT=I;e.canQueryWithRBush=function(W){if(ja.isExtent(W))return!0;if(ja.isPolygon(W)){for(const ha of W.rings)if(5!==ha.length||ha[0][0]!==ha[1][0]||ha[0][0]!==ha[4][0]||ha[2][0]!==ha[3][0]||ha[0][1]!==ha[3][1]||ha[0][1]!==ha[4][1]||ha[1][1]!==ha[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(W,ha,pa){const {spatialRel:ra,geometry:Aa}=W;if(Aa){if(!0!==N[ra])throw new q("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:W});if(m.isValid(Aa.spatialReference)&&m.isValid(pa)){if(!0!==E[ja.getJsonType(Aa)])throw new q("feature-store:unsupported-query","Unsupported query geometry type",{query:W});if(!0!==X[ha])throw new q("feature-store:unsupported-query","Unsupported layer geometry type",{query:W});if(W.outSR)return f.checkProjectionSupport(W.geometry&&W.geometry.spatialReference,W.outSR)}}};e.cleanFromGeometryEngine=function(W){return W&&"_geVersion"in W?JSON.parse(JSON.stringify(W,
F)):W};e.getCentroid=function(W,ha,pa){if("esriGeometryPolygon"!==W.geometryType||!ha||!ha.centroid&&!ha.geometry)return null;ha.centroid||(ha.centroid=d.getCentroidOptimizedGeometry(new B,ha.geometry,W.hasZ,W.hasM));return t(W,ha.centroid,pa)};e.getGeodesicBufferOperator=ka;e.getGeometry=y;e.getSpatialQueryOperator=function(W,ha,pa,ra,Aa){if(ja.isPolygon(ha)&&"esriGeometryPoint"===pa&&("esriSpatialRelIntersects"===W||"esriSpatialRelContains"===W)){const Ca=n.convertFromPolygon(new B,ha,!1,!1);return H.resolve(r=>
z.polygonContainsPoint(Ca,!1,!1,r))}if(ja.isPolygon(ha)&&"esriGeometryMultipoint"===pa){const Ca=n.convertFromPolygon(new B,ha,!1,!1);if("esriSpatialRelContains"===W)return H.resolve(r=>z.polygonContainsMultipoint(Ca,!1,!1,r,ra,Aa))}if(ja.isExtent(ha)&&"esriGeometryPoint"===pa&&("esriSpatialRelIntersects"===W||"esriSpatialRelContains"===W))return H.resolve(Ca=>v.extentContainsPoint(ha,y(pa,ra,Aa,Ca)));if(ja.isExtent(ha)&&"esriGeometryMultipoint"===pa&&"esriSpatialRelContains"===W)return H.resolve(Ca=>
v.extentContainsMultipoint(ha,y(pa,ra,Aa,Ca)));if(ja.isExtent(ha)&&"esriSpatialRelIntersects"===W){const Ca=w.getExtentIntersector(pa);return H.resolve(r=>Ca(ha,y(pa,ra,Aa,r)))}return Y().then(Ca=>{const r=Ca[u[W]].bind(null,ha.spatialReference,ha);return G=>r(y(pa,ra,Aa,G))})};e.importGeometryEngine=Y;e.normalizeFilter=async function(W,ha,pa){return K(W,ha,pa)};e.normalizeQuery=async function(W,ha,pa){const {outFields:ra,orderByFields:Aa,groupByFieldsForStatistics:Ca,outStatistics:r}=W;if(ra)for(var G=
0;G<ra.length;G++)ra[G]=ra[G].trim();if(Aa)for(G=0;G<Aa.length;G++)Aa[G]=Aa[G].trim();if(Ca)for(G=0;G<Ca.length;G++)Ca[G]=Ca[G].trim();if(r)for(G=0;G<r.length;G++)r[G].onStatisticField&&(r[G].onStatisticField=r[G].onStatisticField.trim());W.geometry&&!W.outSR&&(W.outSR=W.geometry.spatialReference);return K(W,ha,pa)};e.normalizeQueryLike=K;e.transformCentroid=t})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ../../core/promiseUtils ./spatialReferenceUtils ../SpatialReference ./webMercatorUtils ../Polygon ../Polyline ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l){function B(ea){return"polygon"===ea.type?ea.rings:ea.paths}function n(ea,I){return Math.ceil((ea-I)/(2*I))}function d(ea,I){const U=B(ea);for(const ia of U)for(const O of ia)O[0]+=I;return ea}function f(ea){const I=[];let U=0,ia=0;for(let O=0;O<ea.length;O++){const Q=ea[O];let F=null;for(let u=0;u<Q.length;u++)F=Q[u],I.push(F),0===u?ia=U=F[0]:(U=Math.min(U,F[0]),ia=Math.max(ia,F[0]));F&&I.push([(U+ia)/2,0])}return I}function z(ea,I){if(!(ea instanceof ja||ea instanceof
D))throw Y.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new q("straightLineDensify: the input geometry is neither polyline nor polygon");var U=B(ea);const ia=[];for(const Q of U){U=[];ia.push(U);U.push([Q[0][0],Q[0][1]]);for(let F=0;F<Q.length-1;F++){const u=Q[F][0],N=Q[F][1],E=Q[F+1][0],X=Q[F+1][1];var O=Math.sqrt((E-u)*(E-u)+(X-N)*(X-N));const W=(X-N)/O,ha=(E-u)/O,pa=O/I;if(1<pa){for(let ra=1;ra<=pa-1;ra++){const Aa=ra*I;U.push([ha*Aa+u,W*Aa+N])}O=(O+Math.floor(pa-
1)*I)/2;U.push([ha*O+u,W*O+N])}U.push([E,X])}}return"polygon"===ea.type?new D({rings:ia,spatialReference:ea.spatialReference}):new ja({paths:ia,spatialReference:ea.spatialReference})}function t(ea,I,U){I&&(ea=z(ea,1E6),ea=w.webMercatorToGeographic(ea,!0));U&&(ea=d(ea,U));return ea}function y(ea,I,U){if(Array.isArray(ea)){var ia=ea[0];ia>I?(U=n(ia,I),ea[0]=ia+-2*U*I):ia<U&&(I=n(ia,U),ea[0]=ia+-2*I*U)}else ia=ea.x,ia>I?(U=n(ia,I),ea=ea.clone().offset(-2*U*I,0)):ia<U&&(I=n(ia,U),ea=ea.clone().offset(-2*
I*U,0));return ea}function K(ea,I){let U=-1;for(let ia=0;ia<I.cutIndexes.length;ia++){const O=I.cutIndexes[ia],Q=I.geometries[ia],F=B(Q);for(let u=0;u<F.length;u++){const N=F[u];N.some(E=>{if(180>E[0])return!0;E=0;for(var X=0;X<N.length;X++){var W=N[X][0];E=W>E?W:E}E=Number(E.toFixed(9));E=-360*n(E,180);for(X=0;X<N.length;X++)W=Q.getPoint(u,X),Q.setPoint(u,X,W.clone().offset(E,0));return!0})}if(O===U)if("polygon"===ea[0].type)for(const u of B(Q))ea[O]=ea[O].addRing(u);else{if("polyline"===ea[0].type)for(const u of B(Q))ea[O]=
ea[O].addPath(u)}else U=O,ea[O]=Q}return ea}async function L(ea,I,U){if(!Array.isArray(ea))return L([ea],I);var ia=I?I.url:e.geometryServiceUrl;let O,Q,F;let u=0;var N=[];I=[];for(var E of ea)if(ba.isNone(E))I.push(E);else{if(!X){var X=E.spatialReference;var W=m.getInfo(X);var ha=(O=X.isWebMercator)?102100:4326;Q=ka[ha].maxX;F=ka[ha].minX;var pa=ka[ha].plus180Line;ha=ka[ha].minus180Line}if(W)if("mesh"===E.type)I.push(E);else if("point"===E.type)I.push(y(E.clone(),Q,F));else if("multipoint"===E.type){var ra=
E.clone();ra.points=ra.points.map(Aa=>y(Aa,Q,F));I.push(ra)}else if("extent"===E.type)ra=E.clone()._normalize(!1,!1,W),I.push(ra.rings?new D(ra):ra);else if(E.extent){ra=E.extent;const Aa=2*n(ra.xmin,F)*Q;let Ca=0===Aa?E.clone():d(E.clone(),Aa);ra.offset(Aa,0);ra.intersects(pa)&&ra.xmax!==Q?(u=ra.xmax>u?ra.xmax:u,Ca=t(Ca,O),N.push(Ca),I.push("cut")):ra.intersects(ha)&&ra.xmin!==F?(u=2*ra.xmax*Q>u?2*ra.xmax*Q:u,Ca=t(Ca,O,360),N.push(Ca),I.push("cut")):I.push(Ca)}else I.push(E.clone());else I.push(E)}X=
n(u,Q);W=-90;pa=X;for(E=new ja;0<X;)ha=-180+360*X,E.addPath([[ha,W],[ha,-1*W]]),W*=-1,X--;if(0<N.length&&0<pa){X=await Z.cut(ia,N,E,U);X=K(N,X);W=[];N=[];for(pa=0;pa<I.length;pa++)E=I[pa],"cut"!==E?N.push(E):(E=X.shift(),ha=ea[pa],ba.isSome(ha)&&"polygon"===ha.type&&ha.rings&&1<ha.rings.length&&E.rings.length>=ha.rings.length?(W.push(E),N.push("simplify")):N.push(O?w.geographicToWebMercator(E):E));if(!W.length)return N;I=await l.simplify(ia,W,U);ea=[];for(U=0;U<N.length;U++)ia=N[U],"simplify"!==ia?
ea.push(ia):ea.push(O?w.geographicToWebMercator(I.shift()):I.shift());return ea}ea=[];for(U=0;U<I.length;U++)ia=I[U],"cut"!==ia?ea.push(ia):(ia=N.shift(),ea.push(!0===O?w.geographicToWebMercator(ia):ia));return H.resolve(ea)}const Y=J.getLogger("esri.geometry.support.normalizeUtils"),ka={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new ja({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:v.WebMercator}),
minus180Line:new ja({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:v.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ja({paths:[[[180,-180],[180,180]]],spatialReference:v.WGS84}),minus180Line:new ja({paths:[[[-180,-180],[-180,180]]],spatialReference:v.WGS84})}};p.getDenormalizedExtent=function(ea){if(!ea)return null;const I=ea.extent;if(!I)return null;var U=ea.spatialReference&&m.getInfo(ea.spatialReference);if(!U)return I;
const [ia,O]=U.valid;({width:U}=I);let {xmin:Q,xmax:F}=I;[Q,F]=[F,Q];if("extent"===ea.type||0===U||U<=O||U>2*O||Q<ia||F>O)return I;let u;switch(ea.type){case "polygon":if(1<ea.rings.length)u=f(ea.rings);else return I;break;case "polyline":if(1<ea.paths.length)u=f(ea.paths);else return I;break;case "multipoint":u=ea.points}ea=I.clone();for(let N=0;N<u.length;N++){let E=u[N][0];0>E?(E+=O,F=Math.max(E,F)):(E-=O,Q=Math.min(E,Q))}ea.xmin=Q;ea.xmax=F;return ea.width<U?(ea.xmin-=O,ea.xmax-=O,ea):I};p.normalizeCentralMeridian=
L;p.normalizeMapX=function(ea,I){if(I=m.getInfo(I)){const [U,ia]=I.valid;I=ia-U;if(ea<U)for(;ea<U;)ea+=I;if(ea>ia)for(;ea>ia;)ea-=I}return ea};p.straightLineDensify=z;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(p,e,ba,J,q){p.cut=async function(H,m,v,w){H="string"===typeof H?e.urlToObject(H):H;const D=m[0].spatialReference;m={...w,query:{...H.query,
f:"json",sr:JSON.stringify(D),target:JSON.stringify({geometryType:ba.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(v)}};m=await q(H.path+"/cut",m);const {cutIndexes:ja,geometries:Z=[]}=m.data;return{cutIndexes:ja,geometries:Z.map(l=>{l=ba.fromJSON(l);l.spatialReference=D;return l})}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(p,e,ba,J){function q(m){return{geometryType:ba.getJsonType(m[0]),
geometries:m.map(v=>v.toJSON())}}function H(m,v,w){const D=ba.getGeometryType(v);return m.map(ja=>{ja=D.fromJSON(ja);ja.spatialReference=w;return ja})}p.simplify=async function(m,v,w){const D="string"===typeof m?e.urlToObject(m):m;m=v[0].spatialReference;const ja=ba.getJsonType(v[0]);v={...w,query:{...D.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(q(v))}};v=await J(D.path+"/simplify",v);return H(v.data,ja,m)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],
function(p){function e(ba,J,q,H,m){if(!ba)return!1;J=J?q?4:3:q?3:2;const {coords:v,lengths:w}=ba;q=!1;ba=0;for(const ja of w){var D=ba;for(let Z=ba,l=ba+ja*J;Z<l;Z+=J){D=Z+J;D===l&&(D=ba);const B=v[Z],n=v[Z+1],d=v[D];D=v[D+1];(n<m&&D>=m||D<m&&n>=m)&&B+(m-n)/(D-n)*(d-B)<H&&(q=!q)}ba+=ja*J}return q}p.polygonContainsCoords=e;p.polygonContainsMultipoint=function(ba,J,q,H,m,v){m=m?v?4:3:v?3:2;const {coords:w,lengths:D}=H;if(!D)return!1;for(let ja=0,Z=0;ja<D.length;ja++,Z+=m)if(!e(ba,J,q,w[Z],w[Z+1]))return!1;
return!0};p.polygonContainsPoint=function(ba,J,q,H){return e(ba,J,q,H.coords[0],H.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function e(q,H,m,v,w){if(null!=v&&null!=w)return D=>{const ja=q.getAttribute(D,H);D=q.getAttribute(D,m);return(null==ja||ja<=w)&&(null==D||D>=v)};if(null!=v)return D=>{D=q.getAttribute(D,m);return null==D||D>=v};if(null!=w)return D=>{D=q.getAttribute(D,H);return null==D||D<=
w}}function ba(q,H,m,v){if(null!=m&&null!=v&&m===v)return w=>q.getAttribute(w,H)===m;if(null!=m&&null!=v)return w=>{w=q.getAttribute(w,H);return w>=m&&w<=v};if(null!=m)return w=>q.getAttribute(w,H)>=m;if(null!=v)return w=>q.getAttribute(w,H)<=v}function J(){return()=>!1}p.getTimeExtent=function(q,H){if(!q)return null;const m=H.featureAdapter,{startTimeField:v,endTimeField:w}=q;let D=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY;if(v&&w)H.forEach(Z=>{const l=m.getAttribute(Z,v);Z=m.getAttribute(Z,
w);null==l||isNaN(l)||(D=Math.min(D,l));null==Z||isNaN(Z)||(ja=Math.max(ja,Z))});else{const Z=v||w;H.forEach(l=>{l=m.getAttribute(l,Z);null==l||isNaN(l)||(D=Math.min(D,l),ja=Math.max(ja,l))})}return{start:D,end:ja}};p.getTimeOperator=function(q,H,m){if(!H||!q)return null;const {startTimeField:v,endTimeField:w}=q;if(!v&&!w)return null;const {start:D,end:ja}=H;return null===D&&null===ja?null:void 0===D&&void 0===ja?J():v&&w?e(m,v,w,D,ja):ba(m,v||w,D,ja)};Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./projectionSupport ../../../geometry/support/quantizationUtils ./attributeSupport ./AttributesBuilder ../../../chunks/spatialQuerySupport ./timeSupport".split(" "),function(p,e,ba,J,q,H,m,v,w,D,ja){function Z(B){return B.substr(24,12)+B.substr(19,4)+B.substr(16,2)+B.substr(14,
2)+B.substr(11,2)+B.substr(9,2)+B.substr(6,2)+B.substr(4,2)+B.substr(2,2)+B.substr(0,2)}function l(B,n,d,f){if(d&&"esriFieldTypeDate"===d.type){const z=(new Date(B)).getTime(),t=(new Date(n)).getTime();if(!isNaN(z)&&!isNaN(t))return f?t-z:z-t}return"number"===typeof B&&"number"===typeof n?f?n-B:B-n:"string"===typeof B&&"string"===typeof n?(B=B.toUpperCase(),n=n.toUpperCase(),!d||"esriFieldTypeGUID"!==d.type&&"esriFieldTypeGlobalID"!==d.type?f=(f?B>n:B<n)?-1:(f?B<n:B>n)?1:0:(d=Z(B),n=Z(n),f=(f?d>n:
d<n)?-1:(f?d<n:d>n)?1:0),f):f?1:-1}return function(){function B(d,f,z){this.items=d;this.queryGeometry=f;this.definitionExpression=z.definitionExpression;this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.fieldsIndex=z.fieldsIndex;this.timeInfo=z.timeInfo;this.featureAdapter=z.featureAdapter;this.aggregateAdapter=z.aggregateAdapter}var n=B.prototype;n.createQueryResponseForCount=function(d){const f=new w(d,
this.featureAdapter,this.fieldsIndex);if(!d.outStatistics)return f.countDistinctValues(this.items);const {groupByFieldsForStatistics:z,having:t}=d;if(null==z||!z.length)return 1;const y=new Map,K=new Map,L=new Set;d=d.outStatistics;for(const ka of d){({statisticType:d}=ka);d="exceedslimit"!==d?ka.onStatisticField:void 0;if(!K.has(d)){var Y=[];for(const ea of z){const I=this._getAttributeValues(f,ea,y);Y.push(I)}K.set(d,this._calculateUniqueValues(Y))}d=K.get(d);for(const ea in d){const {data:I,items:U}=
d[ea];Y=I.join(",");t&&!f.validateItems(U,t)||L.add(Y)}}return L.size};n.createQueryResponse=function(d){let f;f=d.outStatistics?d.outStatistics.some(z=>"exceedslimit"===z.statisticType)?this._createExceedsLimitQueryResponse(d):this._createStatisticsQueryResponse(d):this._createFeatureQueryResponse(d);d.returnQueryGeometry&&(J.isValid(d.outSR)&&!J.equals(this.queryGeometry.spatialReference,d.outSR)?f.queryGeometry=D.cleanFromGeometryEngine({spatialReference:d.outSR,...H.project(this.queryGeometry,
this.queryGeometry.spatialReference,d.outSR)}):f.queryGeometry=D.cleanFromGeometryEngine({spatialReference:d.outSR,...this.queryGeometry}));return f};n.executeAttributesQuery=function(d){var f=v.getWhereClause(d.where,this.fieldsIndex);if(!f)return ba.resolve(this);if(f.isStandardized){let z=0;const t=[];for(const y of this.items)f.testFeature(y,this.featureAdapter)&&(t[z++]=y);f=new B(t,this.queryGeometry,this);f.definitionExpression=d.where;return ba.resolve(f)}return ba.reject(new TypeError("Where clause is not standardized"))};
n.executeAggregateIdsQuery=function(d){if(!d.aggregateIds||!d.aggregateIds.length||e.isNone(this.aggregateAdapter))return ba.resolve(this);const f=new Set;for(const t of d.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(t).forEach(y=>f.add(y));const z=this.featureAdapter.getObjectId;return ba.resolve(new B(this.items.filter(t=>f.has(z(t))),this.queryGeometry,this))};n.executeObjectIdsQuery=function(d){if(!d.objectIds||!d.objectIds.length)return ba.resolve(this);const f=new Set(d.objectIds),
z=this.featureAdapter.getObjectId;return ba.resolve(new B(this.items.filter(t=>f.has(z(t))),this.queryGeometry,this))};n.executeTimeQuery=function(d){d=ja.getTimeOperator(this.timeInfo,d.timeExtent,this.featureAdapter);if(!e.isSome(d))return ba.resolve(this);d=this.items.filter(d);return ba.resolve(new B(d,this.queryGeometry,this))};n.filterLatest=function(){const {trackIdField:d,startTimeField:f,endTimeField:z}=this.timeInfo;var t=z||f;const y=new Map,K=this.featureAdapter.getAttribute;for(const L of this.items){const Y=
K(L,d),ka=K(L,t),ea=y.get(Y);(!ea||ka>K(ea,t))&&y.set(Y,L)}t=Array.from(y.values());return ba.resolve(new B(t,this.queryGeometry,this))};n.project=async function(d){if(!d||J.equals(this.spatialReference,d))return this;const f=this.featureAdapter,z=(await H.projectMany(this.items.map(t=>D.getGeometry(this.geometryType,this.hasZ,this.hasM,f.getGeometry(t))),this.spatialReference,d)).map((t,y)=>f.cloneWithGeometry(this.items[y],q.convertFromGeometry(t,this.hasZ,this.hasM)));return new B(z,this.queryGeometry,
{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:d,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};n._sortFeatures=function(d,f,z){if(1<d.length&&f&&f.length)for(const t of f.reverse()){f=t.split(" ");const y=f[0],K=this.fieldsIndex.get(y),L=f[1]&&"desc"===f[1].toLowerCase();d.sort((Y,ka)=>{Y=z(Y,y,K);ka=z(ka,y,K);return l(Y,ka,K,L)})}};n._createFeatureQueryResponse=
function(d){const f=this.items,{geometryType:z,hasM:t,hasZ:y,objectIdField:K,spatialReference:L}=this,{outFields:Y,outSR:ka,quantizationParameters:ea,resultRecordCount:I,resultOffset:U,returnZ:ia,returnM:O}=d,Q=null!=I?f.length>(U||0)+I:!1,F=Y&&(-1<Y.indexOf("*")?[...this.fieldsIndex.fields]:Y.map(u=>this.fieldsIndex.get(u)));return{exceededTransferLimit:Q,features:this._createFeatures(d,f),fields:F,geometryType:z,hasM:t&&O,hasZ:y&&ia,objectIdFieldName:K,spatialReference:D.cleanFromGeometryEngine(ka?
ka:L),transform:ea&&m.toQuantizationTransform(ea)||null}};n._createFeatures=function(d,f){const z=new w(d,this.featureAdapter,this.fieldsIndex),{hasM:t,hasZ:y}=this,{orderByFields:K,quantizationParameters:L,returnGeometry:Y,returnCentroid:ka,maxAllowableOffset:ea,resultOffset:I,resultRecordCount:U,returnZ:ia=!1,returnM:O=!1}=d,Q=y&&ia,F=t&&O;d=[];var u=0;f=[...f];this._sortFeatures(f,K,(X,W,ha)=>z.getFieldValue(X,W,ha));if(Y||ka){var N=m.toQuantizationTransform(L);if(Y&&!ka)for(var E of f)d[u++]=
{attributes:z.getAttributes(E),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(E),ea,N,Q,F)};else if(!Y&&ka)for(const X of f)d[u++]={attributes:z.getAttributes(X),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(X,this),N)};else for(const X of f)d[u++]={attributes:z.getAttributes(X),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(X,this),N),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(X),
ea,N,Q,F)}}else for(N of f)(E=z.getAttributes(N))&&(d[u++]={attributes:E});u=I||0;null!=U&&(d=d.slice(u,Math.min(d.length,u+U)));return d};n._createExceedsLimitQueryResponse=function(d){var f=!1;let z=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY;f=Number.POSITIVE_INFINITY;for(const y of d.outStatistics)if("exceedslimit"===y.statisticType){z=null!=y.maxPointCount?y.maxPointCount:Number.POSITIVE_INFINITY;t=null!=y.maxRecordCount?y.maxRecordCount:Number.POSITIVE_INFINITY;f=null!=y.maxVertexCount?
y.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)f=this.items.length>z;else if(this.items.length>t)f=!0;else{d=this.hasZ?this.hasM?4:3:this.hasM?3:2;const y=this.featureAdapter;f=this.items.reduce((K,L)=>{L=y.getGeometry(L);return K+(L&&L.coords.length||0)},0)/d>f}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(f)}}]}};n._createStatisticsQueryResponse=
function(d){var f={attributes:{}};const z=[],t=new Map,y=new Map,K=new Map,L=new Map,Y=new w(d,this.featureAdapter,this.fieldsIndex);var ka=d.outStatistics;const {groupByFieldsForStatistics:ea,having:I,orderByFields:U}=d;d=ea&&ea.length;const ia=!!d,O=ia&&ea[0],Q=ia&&!this.fieldsIndex.get(O);for(const X of ka){const {outStatisticFieldName:W,statisticType:ha}=X;ka=X;var F="exceedslimit"!==ha?X.onStatisticField:void 0;const pa="percentile_disc"===ha||"percentile_cont"===ha,ra=ia&&1===d&&(F===O||Q)&&
"count"===ha;if(ia){if(!K.has(F)){var u=[];for(const Aa of ea){var N=this._getAttributeValues(Y,Aa,t);u.push(N)}K.set(F,this._calculateUniqueValues(u))}u=K.get(F);for(const Aa in u){const {count:Ca,data:r,items:G,itemPositions:ca}=u[Aa];N=r.join(",");if(!I||Y.validateItems(G,I)){const ta=L.get(N)||{attributes:{}};var E=null;if(ra)E=Ca;else{const xa=this._getAttributeValues(Y,F,t);E=ca.map(b=>xa[b]);E=pa&&"statisticParameters"in ka?this._getPercentileValue(ka,E):this._getStatisticValue(ka,E)}ta.attributes[W]=
E;ea.forEach((xa,b)=>ta.attributes[this.fieldsIndex.get(xa)?xa:`EXPR_${b+1}`]=r[b]);L.set(N,ta)}}}else F=this._getAttributeValues(Y,F,t),f.attributes[W]=pa&&"statisticParameters"in ka?this._getPercentileValue(ka,F):this._getStatisticValue(ka,F,y);z.push({name:W,alias:W,type:"esriFieldTypeDouble"})}f=ia?Array.from(L.values()):[f];this._sortFeatures(f,U,(X,W)=>X.attributes[W]);return{fields:z,features:f}};n._getStatisticValue=function(d,f,z){const {onStatisticField:t,statisticType:y}=d;d=z&&z.has(t)?
z.get(t):this._calculateStatistics(f);z&&z.set(t,d);return d["var"===y?"variance":y]};n._getPercentileValue=function(d,f){const {onStatisticField:z,statisticParameters:t,statisticType:y}=d,{value:K,orderBy:L}=t,Y="desc"===L,ka=this.fieldsIndex.get(z);d=[...f].filter(ea=>null!=ea).sort((ea,I)=>l(ea,I,ka,Y));return this._calculatePercentile(d,K,"percentile_disc"===y)};n._getAttributeValues=function(d,f,z){if(z.has(f))return z.get(f);const t=this.fieldsIndex.get(f),y=this.items.map(K=>d.getFieldValue(K,
f,t));z.set(f,y);return y};n._calculateStatistics=function(d){let f=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,t=null,y=null,K=null,L=null;const Y=[];let ka=0;for(const ea of d)"string"===typeof ea?ka++:null==ea||isNaN(ea)||(t+=ea,f=Math.min(f,ea),z=Math.max(z,ea),Y.push(ea),ka++);if(ka){y=t/ka;d=0;for(const ea of Y)d+=Math.pow(ea-y,2);L=1<ka?d/(ka-1):0;K=Math.sqrt(L)}else z=f=null;return{avg:y,count:ka,max:z,min:f,stddev:K,sum:t,variance:L}};n._calculateUniqueValues=function(d){const f=
{},z=this.items,t=z.length;for(let y=0;y<t;y++){const K=z[y],L=[];for(const ka of d)L.push(ka[y]);const Y=L.join(",");null==f[Y]?f[Y]={count:1,data:L,items:[K],itemPositions:[y]}:(f[Y].count++,f[Y].items.push(K),f[Y].itemPositions.push(y))}return f};n._calculatePercentile=function(d,f,z){if(0===d.length)return null;if(0>=f)return d[0];if(1<=f)return d[d.length-1];var t=(d.length-1)*f,y=Math.floor(t);f=y+1;t%=1;y=d[y];const K=d[f];return f>=d.length||z||"string"===typeof y||"string"===typeof K?y:y*
(1-t)+K*t};p._createClass(B,[{key:"size",get:function(){return this.items.length}}]);return B}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(p,e){function ba({scale:I,translate:U},ia){return Math.round((ia-U[0])/I[0])}function J({scale:I,translate:U},ia){return Math.round((U[1]-ia)/I[1])}function q(I,U,ia){const O=[];let Q,F,u,N;for(let E=0;E<ia.length;E++){const X=ia[E];if(0<E){if(u=ba(I,X[0]),N=J(I,X[1]),u!==Q||N!==F)O.push(U(X,u-Q,N-F)),Q=u,
F=N}else Q=ba(I,X[0]),F=J(I,X[1]),O.push(U(X,Q,F))}return 0<O.length?O:null}function H(I,U,ia,O){return q(I,ia?O?ea:ka:O?ka:Y,U)}function m(I,U,ia,O){const Q=[];ia=ia?O?ea:ka:O?ka:Y;for(O=0;O<U.length;O++){const F=q(I,ia,U[O]);F&&3<=F.length&&Q.push(F)}return Q.length?Q:null}function v(I,U,ia,O){const Q=[];ia=ia?O?ea:ka:O?ka:Y;for(O=0;O<U.length;O++){const F=q(I,ia,U[O]);F&&2<=F.length&&Q.push(F)}return Q.length?Q:null}function w({scale:I,translate:U},ia){return ia*I[0]+U[0]}function D({scale:I,translate:U},
ia){return U[1]-ia*I[1]}function ja(I,U,ia){const O=Array(ia.length);if(!ia.length)return O;const [Q,F]=I.scale;let u=w(I,ia[0][0]);I=D(I,ia[0][1]);O[0]=U(ia[0],u,I);for(let N=1;N<ia.length;N++){const E=ia[N];u+=E[0]*Q;I-=E[1]*F;O[N]=U(E,u,I)}return O}function Z(I,U,ia){const O=Array(ia.length);for(let Q=0;Q<ia.length;Q++)O[Q]=ja(I,U,ia[Q]);return O}function l(I,U,ia,O){return ja(I,ia?O?ea:ka:O?ka:Y,U)}function B(I,U,ia,O){return Z(I,ia?O?ea:ka:O?ka:Y,U)}function n(I,U,ia,O){return Z(I,ia?O?ea:ka:
O?ka:Y,U)}function d(I,U,ia){let [O,Q]=ia[0],F=Math.min(O,U[0]),u=Math.min(Q,U[1]),N=Math.max(O,U[2]);U=Math.max(Q,U[3]);for(let E=1;E<ia.length;E++){const [X,W]=ia[E];O+=X;Q+=W;0>X&&(F=Math.min(F,O));0<X&&(N=Math.max(N,O));0>W?u=Math.min(u,Q):0<W&&(U=Math.max(U,Q))}I[0]=F;I[1]=u;I[2]=N;I[3]=U;return I}function f(I,U){if(!U.length)return null;I[0]=I[1]=Number.POSITIVE_INFINITY;I[2]=I[3]=Number.NEGATIVE_INFINITY;for(let ia=0;ia<U.length;ia++)d(I,I,U[ia]);return I}function z(I,U,ia,O,Q){U.xmin=ba(I,
ia.xmin);U.ymin=J(I,ia.ymin);U.xmax=ba(I,ia.xmax);U.ymax=J(I,ia.ymax);U!==ia&&(O&&(U.zmin=ia.zmin,U.zmax=ia.zmax),Q&&(U.mmin=ia.mmin,U.mmax=ia.mmax));return U}function t(I,U,ia,O,Q){U.points=H(I,ia.points,O,Q);return U}function y(I,U,ia,O,Q){U.x=ba(I,ia.x);U.y=J(I,ia.y);U!==ia&&(O&&(U.z=ia.z),Q&&(U.m=ia.m));return U}function K(I,U,ia,O,Q){I=m(I,ia.rings,O,Q);if(!I)return null;U.rings=I;return U}function L(I,U,ia,O,Q){I=v(I,ia.paths,O,Q);if(!I)return null;U.paths=I;return U}const Y=(I,U,ia)=>[U,ia],
ka=(I,U,ia)=>[U,ia,I[2]],ea=(I,U,ia)=>[U,ia,I[2],I[3]];p.equals=function(I,U){if(I===U||null==I&&null==U)return!0;if(null==I||null==U)return!1;let ia,O,Q,F;I&&"upperLeft"===I.originPosition?(ia=I.translate[0],O=I.translate[1],I=I.scale[0]):(ia=I.extent.xmin,O=I.extent.ymax,I=I.tolerance);U&&"upperLeft"===U.originPosition?(Q=U.translate[0],F=U.translate[1],U=U.scale[0]):(Q=U.extent.xmin,F=U.extent.ymax,U=U.tolerance);return ia===Q&&O===F&&I===U};p.getQuantizedBoundsCoordsArray=d;p.getQuantizedBoundsCoordsArrayArray=
f;p.getQuantizedBoundsPaths=function(I){return f([0,0,0,0],I)};p.getQuantizedBoundsPoints=function(I){const U=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(U,U,I)};p.getQuantizedBoundsRings=function(I){return f([0,0,0,0],I)};p.quantizeBounds=function(I,U,ia){U[0]=ba(I,ia[0]);U[3]=J(I,ia[1]);U[2]=ba(I,ia[2]);U[1]=J(I,ia[3]);return U};p.quantizeExtent=z;p.quantizeGeometry=function(I,U){return I&&U?e.isPoint(U)?y(I,{},U,!1,!1):e.isPolyline(U)?
L(I,{},U,!1,!1):e.isPolygon(U)?K(I,{},U,!1,!1):e.isMultipoint(U)?t(I,{},U,!1,!1):e.isExtent(U)?z(I,{},U,!1,!1):null:null};p.quantizeMultipoint=t;p.quantizePaths=v;p.quantizePoint=y;p.quantizePoints=H;p.quantizePolygon=K;p.quantizePolyline=L;p.quantizeRings=m;p.quantizeX=ba;p.quantizeY=J;p.toQuantizationTransform=function(I){return I?{originPosition:"upper-left"===I.originPosition?"upperLeft":"lower-left"===I.originPosition?"lowerLeft":I.originPosition,scale:[I.tolerance,I.tolerance],translate:[I.extent.xmin,
I.extent.ymax]}:null};p.unquantizeBounds=function(I,U,ia){return ia?(U[0]=w(I,ia[0]),U[1]=D(I,ia[3]),U[2]=w(I,ia[2]),U[3]=D(I,ia[1]),U):[w(I,U[0]),D(I,U[3]),w(I,U[2]),D(I,U[1])]};p.unquantizeCoordsArray=ja;p.unquantizeCoordsArrayArray=Z;p.unquantizeExtent=function(I,U,ia,O,Q){U.xmin=w(I,ia.xmin);U.ymin=D(I,ia.ymin);U.xmax=w(I,ia.xmax);U.ymax=D(I,ia.ymax);U!==ia&&(O&&(U.zmin=ia.zmin,U.zmax=ia.zmax),Q&&(U.mmin=ia.mmin,U.mmax=ia.mmax));return U};p.unquantizeMultipoint=function(I,U,ia,O,Q){U.points=l(I,
ia.points,O,Q);return U};p.unquantizePaths=B;p.unquantizePoint=function(I,U,ia,O,Q){U.x=w(I,ia.x);U.y=D(I,ia.y);U!==ia&&(O&&(U.z=ia.z),Q&&(U.m=ia.m));return U};p.unquantizePoints=l;p.unquantizePolygon=function(I,U,ia,O,Q){U.rings=n(I,ia.rings,O,Q);return U};p.unquantizePolyline=function(I,U,ia,O,Q){U.paths=B(I,ia.paths,O,Q);return U};p.unquantizeRings=n;p.unquantizeX=w;p.unquantizeY=D;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport"],function(p,e){return function(){function ba(q,H,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=q.returnDistinctValues;this.fieldsIndex=m;this.featureAdapter=H;if((H=q.outFields)&&-1===H.indexOf("*")){this.outFields=H;q=0;for(const w of H){var v=e.getExpressionFromFieldName(w);v=(H=this.fieldsIndex.get(v))?null:e.getWhereClause(v,m);H=H?H.name:e.getAliasFromFieldName(w)||`FIELD_EXP_${q++}`;this._fieldDataCache.set(w,{alias:H,clause:v})}}}
var J=ba.prototype;J.countDistinctValues=function(q){if(!this.returnDistinctValues)return q.length;q.forEach(H=>this.getAttributes(H));return this._returnDistinctMap.size};J.getAttributes=function(q){q=this._processAttributesForOutFields(q);return this._processAttributesForDistinctValues(q)};J.getFieldValue=function(q,H,m){const v=m?m.name:H;let w=null;this._fieldDataCache.has(v)?w=this._fieldDataCache.get(v).clause:m||(w=e.getWhereClause(H,this.fieldsIndex),this._fieldDataCache.set(v,{alias:v,clause:w}));
return m?this.featureAdapter.getAttribute(q,v):w.calculateValue(q,this.featureAdapter)};J.validateItem=function(q,H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:e.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H).clause.testFeature(q,this.featureAdapter)};J.validateItems=function(q,H){this._fieldDataCache.has(H)||this._fieldDataCache.set(H,{alias:H,clause:e.getWhereClause(H,this.fieldsIndex)});return this._fieldDataCache.get(H).clause.testSet(q,this.featureAdapter)};
J._processAttributesForOutFields=function(q){const H=this.outFields;if(!H||!H.length)return this.featureAdapter.getAttributes(q);const m={};for(const v of H){const {alias:w,clause:D}=this._fieldDataCache.get(v);m[w]=D?D.calculateValue(q,this.featureAdapter):this.featureAdapter.getAttribute(q,w)}return m};J._processAttributesForDistinctValues=function(q){if(p.isNone(q)||!this.returnDistinctValues)return q;var H=this.outFields,m=[];if(H)for(const w of H){var {alias:v}=this._fieldDataCache.get(w);m.push(q[v])}else for(v in q)m.push(q[v]);
H=`${(H||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(H)||0;this._returnDistinctMap.set(H,++m);return 1<m?null:q};return ba}()})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(p,e,ba,J){function q(Z){return new v(Z)}async function H(){return ja?ja:ja=await new Promise(function(Z,l){p(["../../../../geometry/geometryEngineJSON"],Z,l)})}let m=function(){this.description=
this.code=null},v=function(Z){this.error=new m;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=Z},w=function(Z){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=Z};const D=new Set;let ja;e.createFeatureEditErrorResult=q;e.createFeatureEditSuccessResult=function(Z){return new w(Z)};e.loadGeometryEngine=H;e.loadGeometryEngineForSimplify=async function(Z,l){!ba.isValid(Z)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||await H()};e.mixAttributes=
function(Z,l,B,n,d=!1,f){D.clear();for(const K in n){const L=Z.get(K);if(L){var z=n[K];{var t=L;var y=z;let Y=y;"string"===typeof y&&J.isNumericField(t)?Y=parseFloat(y):null!=y&&J.isStringField(t)&&"string"!==typeof y&&(Y=String(y));t=J.sanitizeNullFieldValue(Y)}t!==z&&f&&f.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:L,originalValue:z,sanitizedValue:t}});D.add(L.name);if(L&&(d||L.editable)){if(z=J.validateFieldValue(L,t))return q(J.validationErrorToString(z,
L,t));B[L.name]=t}}}for(const K of l)if(!D.has(K.name))return q(`missing required field "${K.name}"`);return null};e.simplify=function(Z,l){if(!Z||!ba.isValid(l))return Z;if("rings"in Z||"paths"in Z){if(!ja)throw new TypeError("geometry engine not loaded");return ja.simplify(l,Z)}return Z};Object.defineProperty(e,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../core/Error ../../../../core/promiseUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/jsonUtils ../../../support/fieldUtils ../../../../request ../../../support/fieldType ../../featureConversionUtils ../../../support/FieldsIndex ../../data/projectionSupport ./geojson ../support/clientSideDefaults ../../data/FeatureStore ../../data/QueryEngine ../support/sourceUtils".split(" "),function(p,e,ba,J,q,H,m,v,w,D,ja,Z,l,B,n){const d={hasAttachments:!1,
capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,
supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function f(){this._queryEngine=null}var z=f.prototype;z.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};z.load=async function(t){var y=[];await this._checkProjection(t.spatialReference);var K=null;t.url&&(K=(await H(t.url,{responseType:"json"})).data,await ja.validateGeoJSON(K));const L=ja.inferLayerProperties(K,
{geometryType:t.geometryType}),Y=t.fields||L.fields||[],ka=null!=t.hasZ?t.hasZ:L.hasZ,ea=L.geometryType,I=t.objectIdField||("number"===L.objectIdFieldType?L.objectIdFieldName:"OBJECTID")||"OBJECTID",U=t.spatialReference||ba.WGS84;t=t.timeInfo;if(!ea)throw new p("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");"string"===L.objectIdFieldType&&y.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."});
Y===L.fields&&0<L.unknownFields.length&&y.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:L.unknownFields}});if(I){let Q=null;Y.some(F=>F.name===I?(Q=F,!0):!1)?(Q.type="esriFieldTypeOID",Q.editable=!1,Q.nullable=!1):Y.unshift({alias:I,name:I,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(var ia of Y){null==ia.name&&(ia.name=ia.alias);null==ia.alias&&(ia.alias=ia.name);if(!ia.name)throw new p("geojson-layer:invalid-field-name",
"field name is missing",{field:ia});ia.name===I&&(ia.type="esriFieldTypeOID");if(-1===m.kebabDict.jsonValues.indexOf(ia.type))throw new p("geojson-layer:invalid-field-type",`invalid type for field "${ia.name}"`,{field:ia});}ia={};this._requiredFields=[];for(var O of Y)if("esriFieldTypeOID"!==O.type&&"esriFieldTypeGlobalID"!==O.type){O.editable=null==O.editable?!0:!!O.editable;O.nullable=null==O.nullable?!0:!!O.nullable;const Q=q.getFieldDefaultValue(O);O.nullable||void 0!==Q?ia[O.name]=Q:this._requiredFields.push(O)}this._fieldsIndex=
new w(Y);t&&(t.startTimeField&&((O=this._fieldsIndex.get(t.startTimeField))?(t.startTimeField=O.name,O.type="esriFieldTypeDate"):t.startTimeField=null),t.endTimeField&&((O=this._fieldsIndex.get(t.endTimeField))?(t.endTimeField=O.name,O.type="esriFieldTypeDate"):t.endTimeField=null),t.trackIdField&&((O=this._fieldsIndex.get(t.trackIdField))?t.trackIdField=O.name:(t.trackIdField=null,y.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:t}}))),
t.startTimeField||t.endTimeField||(y.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:t}}),t=null));y={warnings:y,featureErrors:[],layerDefinition:{...d,drawingInfo:Z.createDrawingInfo(ea),templates:Z.createDefaultTemplate(ia),extent:null,geometryType:ea,objectIdField:I,fields:Y,hasZ:!!ka,timeInfo:t}};this._queryEngine=new B["default"]({fields:Y,geometryType:ea,hasM:!1,hasZ:ka,objectIdField:I,spatialReference:U,timeInfo:t,featureStore:new l({geometryType:ea,
hasM:!1,hasZ:ka})});this._createDefaultAttributes=Z.createDefaultAttributesFunction(ia,I);this._nextObjectId=L.maxObjectId+1;K=ja.createOptimizedFeatures(K,{geometryType:ea,hasZ:ka,objectIdFieldName:"number"===L.objectIdFieldType?I:null});if(!ba.equals(U,ba.WGS84))for(const Q of K)Q.geometry&&(Q.geometry=v.convertFromGeometry(D.project(v.convertToGeometry(Q.geometry,ea,ka,!1),ba.WGS84,U)));this._loadInitialFeatures(y,K);return y};z.applyEdits=async function(t){const {spatialReference:y,geometryType:K}=
this._queryEngine;await e.all([n.loadGeometryEngineForSimplify(y,K),D.checkProjectionSupport(t.adds,y),D.checkProjectionSupport(t.updates,y)]);return this._applyEdits(t)};z.queryFeatures=async function(t={},y={}){return this._queryEngine.executeQuery(t,y.signal)};z.queryFeatureCount=async function(t={},y={}){return this._queryEngine.executeQueryForCount(t,y.signal)};z.queryObjectIds=async function(t={},y={}){return this._queryEngine.executeQueryForIds(t,y.signal)};z.queryExtent=async function(t={},
y={}){return this._queryEngine.executeQueryForExtent(t,y.signal)};z._loadInitialFeatures=function(t,y){const {featureStore:K,objectIdField:L}=this._queryEngine,Y=[];for(const ka of y){y=this._createDefaultAttributes();const ea=n.mixAttributes(this._fieldsIndex,this._requiredFields,y,ka.attributes,!0,t.warnings);ea?t.featureErrors.push(ea):(this._assignObjectId(y,ka.attributes,!0),ka.attributes=y,ka.objectId=y[L],Y.push(ka))}K.addMany(Y);t.layerDefinition.extent=this._queryEngine.fullExtent;if(t.layerDefinition.timeInfo){const {start:ka,
end:ea}=this._queryEngine.timeExtent;t.layerDefinition.timeInfo.timeExtent=[ka,ea]}return t};z._applyEdits=function(t){const {adds:y,updates:K,deletes:L}=t;t={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};y&&y.length&&this._applyAddEdits(t,y);K&&K.length&&this._applyUpdateEdits(t,K);if(L&&L.length){for(const Y of L)t.deleteResults.push(n.createFeatureEditSuccessResult(Y));this._queryEngine.featureStore.removeManyById(L)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,
featureEditResults:t}};z._applyAddEdits=function(t,y){const {addResults:K}=t,{geometryType:L,hasM:Y,hasZ:ka,objectIdField:ea,spatialReference:I,featureStore:U}=this._queryEngine,ia=[];for(const O of y){if(O.geometry&&L!==J.getJsonType(O.geometry)){K.push(n.createFeatureEditErrorResult("Incorrect geometry type."));continue}y=this._createDefaultAttributes();const Q=n.mixAttributes(this._fieldsIndex,this._requiredFields,y,O.attributes);Q?K.push(Q):(this._assignObjectId(y,O.attributes),O.attributes=y,
null!=O.uid&&(t.uidToObjectId[O.uid]=O.attributes[ea]),O.geometry&&(O.geometry=D.project(n.simplify(O.geometry,I),O.geometry.spatialReference,I)),ia.push(O),K.push(n.createFeatureEditSuccessResult(O.attributes[ea])))}U.addMany(v.convertFromFeatures([],ia,L,ka,Y,ea))};z._applyUpdateEdits=function({updateResults:t},y){const {geometryType:K,hasM:L,hasZ:Y,objectIdField:ka,spatialReference:ea,featureStore:I}=this._queryEngine;for(const U of y){const {attributes:ia,geometry:O}=U;y=ia&&ia[ka];if(null==y){t.push(n.createFeatureEditErrorResult(`Identifier field ${ka} missing`));
continue}if(!I.has(y)){t.push(n.createFeatureEditErrorResult(`Feature with object id ${y} missing`));continue}const Q=v.convertToFeature(I.getFeature(y),K,Y,L);if(O){if(K!==J.getJsonType(O)){t.push(n.createFeatureEditErrorResult("Incorrect geometry type."));continue}Q.geometry=D.project(n.simplify(O,ea),O.spatialReference,ea)}if(ia){const F=n.mixAttributes(this._fieldsIndex,this._requiredFields,Q.attributes,ia);if(F){t.push(F);continue}}I.add(v.convertFromFeature(Q,K,Y,L,ka));t.push(n.createFeatureEditSuccessResult(y))}};
z._assignObjectId=function(t,y,K=!1){const L=this._queryEngine.objectIdField;K?isFinite(y[L])?t[L]=y[L]:t[L]=this._nextObjectId++:t[L]=this._nextObjectId++};z._checkProjection=async function(t){try{await D.checkProjectionSupport(ba.WGS84,t)}catch{throw new p("geojson-layer","Projection not supported");}};return f}()});