// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),function(p,e,da,I,t,G,m,u){function v(r,E,aa){if(r)for(const ta of r)(r=(r=da.getDeepValue(ta,E))&&"function"!==typeof r&&l(aa,r))&&da.setDeepValue(ta,r.name,E)}function D(r,E){if(!r||!E)return[];C.clear();ja(C,r,E);return Array.from(C).sort()}function ja(r,E,aa){if(aa)if(E&&E.length)if(aa.includes("*"))for(const {name:ta}of E)r.add(ta);
else for(const ta of aa)ba(r,E,ta);else if(aa.includes("*"))r.clear(),r.add("*");else for(const ta of aa)r.add(ta)}function ba(r,E,aa){E&&E.length?(E=l(E,aa))&&r.add(E.name):"string"===typeof aa&&r.add(aa)}function l(r,E){if("string"!==typeof E)return null;if(null!=r){E=E.toLowerCase();for(const aa of r)if(aa&&aa.name.toLowerCase()===E)return aa}return null}async function A(r,E,aa){if(aa){var {arcadeUtils:ta}=await u.loadArcade();aa=ta.extractFieldNames(aa);for(const xa of aa)ba(r,E,xa)}}function n(r,
E){for(const aa of r)if(aa&&aa.valueType&&aa.valueType===E)return aa.name;return null}async function d(r,E){if(E){var {fields:aa}=E;if(E=da.getDeepValue("elevationInfo.featureExpressionInfo",E))return E.collectRequiredFields(r,aa)}}async function g(r,E,aa){aa.outStatistic.onStatisticValueExpression?A(r,E,aa.outStatistic.onStatisticValueExpression):r.add(aa.outStatistic.onStatisticField)}async function y(r,E){const {labelingInfo:aa,fields:ta}=E;aa&&aa.length&&await G.all(aa.map(xa=>M(r,ta,xa)))}async function M(r,
E,aa){if(aa){var ta=aa.getLabelExpression();aa=aa.where;"arcade"===ta.type?await A(r,E,ta.expression):(ta=ta.expression.match(/{[^}]*}/g))&&ta.forEach(xa=>{ba(r,E,xa.slice(1,-1))});ta=/['"]+/g;aa&&(aa=aa.split(" "),3===aa.length&&ba(r,E,aa[0].replace(ta,"")),7===aa.length&&(ba(r,E,aa[0].replace(ta,"")),ba(r,E,aa[4].replace(ta,""))))}}function O(r){return"number"===typeof r&&!isNaN(r)&&isFinite(r)}function F(r){return null===r||O(r)}function L(r){return null===r||W(r)}function Y(r){return null!=r&&
"string"===typeof r}function ka(r){return null===r||Y(r)}function fa(){return!0}function J(r,E){let aa;switch(r.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":aa=r.nullable?L:W;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":aa=r.nullable?F:O;break;case "string":case "esriFieldTypeString":aa=r.nullable?ka:Y;break;default:aa=fa}return 1===
arguments.length?aa:aa(E)}function T(r){return null!=r&&ha.has(r.type)}function ia(r,E){return r.nullable&&null===E?null:T(r)&&!Q(r.type,Number(E))?e.NumericRangeValidationError.OUT_OF_RANGE:J(r,E)?r.domain?m.validateDomainValue(r.domain,E):null:e.TypeValidationError.INVALID_TYPE}function Q(r,E){return(r="string"===typeof r?P(r):r)?r.isInteger?W(E)&&E>=r.min&&E<=r.max:E>=r.min&&E<=r.max:!1}function P(r){switch(r){case "esriFieldTypeSmallInteger":case "small-integer":return pa;case "esriFieldTypeInteger":case "integer":return ra;
case "esriFieldTypeSingle":case "single":return Aa;case "esriFieldTypeDouble":case "double":return Ca}}function B(r,E,aa){if(!E||!E.attributes||!r){if(I.isSome(aa))for(var ta of r)aa.add(ta);return!0}E=E.attributes;ta=!1;for(const xa of r)if(!(xa in E))if(ta=!0,I.isSome(aa))aa.add(xa);else break;return ta}const q="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
H=["field","normalizationField"],C=new Set,W=(()=>"isInteger"in Number?Number.isInteger:r=>"number"===typeof r&&isFinite(r)&&Math.floor(r)===r)(),X=["integer","small-integer","single","double"],ha=new Set([...X,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE=
"type-validation-error::invalid-type";const pa={min:-32768,max:32767,isInteger:!0},ra={min:-2147483648,max:2147483647,isInteger:!0},Aa={min:-3.4E38,max:1.2E38,isInteger:!1},Ca={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=A;e.collectElevationFields=d;e.collectFeatureReductionFields=async function(r,E,aa){E&&aa&&"cluster"===aa.type&&aa.fields&&await G.all(aa.fields.map(ta=>g(r,E.fields,ta)))};e.collectField=ba;e.collectFields=ja;e.collectFilterFields=async function(r,
E,aa){if(E&&aa&&(aa.where&&"1\x3d1"!==aa.where||aa.timeExtent)&&(E.timeInfo&&aa.timeExtent&&ja(r,E.fields,[E.timeInfo.startField,E.timeInfo.endField]),I.isSome(aa.where)&&aa.where)){aa=(await new Promise(function(ta,xa){p(["../../core/sql/WhereClause"],ta,xa)})).WhereClause.create(aa.where,E.fieldsIndex);if(!aa.isStandardized)throw new t("fieldUtils:collectFilterFields","Where clause is not standardized");ja(r,E.fields,aa.fieldNames)}};e.collectLabelingFields=y;e.doubleRange=Ca;e.featureHasFields=
function(r,E){return!B(r,E,null)};e.fixFields=D;e.fixRendererFields=function(r,E){if(null!=r&&null!=E)for(const aa of Array.isArray(r)?r:[r])if(v(q,aa,E),"visualVariables"in aa&&aa.visualVariables)for(const ta of aa.visualVariables)v(H,ta,E)};e.fixTimeInfoFields=function(r,E){if(null!=r&&null!=E)if("startField"in r){var aa=l(E,r.startField);E=l(E,r.endField);r.startField=aa&&aa.name||null;r.endField=E&&E.name||null}else aa=l(E,r.startTimeField),E=l(E,r.endTimeField),r.startTimeField=aa&&aa.name||
null,r.endTimeField=E&&E.name||null};e.getDisplayFieldName=function({displayField:r,fields:E}){if(r)return r;if(!E||!E.length)return null;if(!(r=n(E,"name-or-title")||n(E,"unique-identifier")||n(E,"type-or-category")))a:{for(const aa of E)if(aa&&aa.name&&(E=aa.name.toLowerCase(),-1<E.indexOf("name")||-1<E.indexOf("title"))){r=aa.name;break a}r=null}return r};e.getElevationFields=async function(r){if(!r)return[];const E=new Set;await d(E,r);return Array.from(E).sort()};e.getExpressionFields=async function(r,
E){const aa=new Set;for(const ta of E)await A(aa,r.fields,ta);return Array.from(aa).sort()};e.getFeatureEditFields=function(r){if(!r)return[];const E="editFieldsInfo"in r&&r.editFieldsInfo;return E?D(r.fields,[E&&E.creatorField,E&&E.creationDateField,E&&E.editorField,E&&E.editDateField]):[]};e.getFeatureGeometryFields=function(r){if(!r)return[];const E="geometryProperties"in r&&r.geometryProperties;return E?D(r.fields,[E&&E.shapeAreaFieldName,E&&E.shapeLengthFieldName]):[]};e.getField=l;e.getFieldDefaultValue=
function(r){const E=r.defaultValue;if(void 0!==E&&J(r,E))return E;if(r.nullable)return null};e.getFieldRange=function(r){const E=m.getDomainRange(r.domain);if(E)return E;if(T(r))return P(r.type)};e.getLabelingFields=async function(r){if(!r)return[];const E=new Set;await y(E,r);return Array.from(E).sort()};e.getNumericTypeForValue=function(r){if(!O(r))return null;if(W(r)){if(r>=pa.min&&r<=pa.max)return"esriFieldTypeSmallInteger";if(r>=ra.min&&r<=ra.max)return"esriFieldTypeInteger"}return r>=Aa.min&&
r<=Aa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(r){if(!r)return[];const E="timeInfo"in r&&r.timeInfo;return E?D(r.fields,[r.trackIdField,E.startField,E.endField]):[]};e.hasField=function(r,E){if(!r||!E||"string"!==typeof E)return!1;E=E.toLowerCase();for(const aa of r)if(aa&&aa.name.toLowerCase()===E)return!0;return!1};e.integerRange=ra;e.isDateField=function(r){return null!=r&&("date"===r.type||"esriFieldTypeDate"===r.type)};e.isNumberInRange=Q;e.isNumericField=
T;e.isStringField=function(r){return null!=r&&("string"===r.type||"esriFieldTypeString"===r.type)};e.isValidFieldValue=function(r,E){return null===ia(r,E)};e.isValueMatchingFieldType=J;e.numericTypes=X;e.packFields=function(r,E,aa=1){if(!E||!r)return[];if(E.includes("*"))return["*"];E=D(r,E);return E.length/r.length>=aa?["*"]:E};e.populateMissingFields=B;e.rendererFields=q;e.sanitizeNullFieldValue=function(r){return null==r||"number"===typeof r&&isNaN(r)?null:r};e.singleRange=Aa;e.smallIntegerRange=
pa;e.unpackFieldNames=function(r,E){return I.isNone(E)||I.isNone(r)?[]:E.includes("*")?r.map(aa=>aa.name):E};e.validateFieldValue=ia;e.validationErrorToString=function(r,E,aa){switch(r){case m.DomainValidationError.INVALID_CODED_VALUE:return`Value ${aa} is not in the coded domain - field: ${E.name}, domain: ${JSON.stringify(E.domain)}`;case m.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${aa} is out of the range of valid values - field: ${E.name}, domain: ${JSON.stringify(E.domain)}`;case e.TypeValidationError.INVALID_TYPE:return`Value ${aa} is not a valid value for the field type - field: ${E.name}, type: ${E.type}, nullable: ${E.nullable}`;
case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ta,max:xa}=P(E.type);return`Value ${aa} is out of range for the number type - field: ${E.name}, type: ${E.type}, value range is ${ta} to ${xa}`}}};e.visualVariableFields=H;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),function(p,e,da,I,t,G){function m(u,v){switch(u.type){case "range":{const D=
"range"in u?u.range[1]:u.maxValue;if(+v<("range"in u?u.range[0]:u.minValue)||+v>D)return p.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==u.codedValues||u.codedValues.every(D=>null==D||D.code!==v))return p.DomainValidationError.INVALID_CODED_VALUE}return null}(function(u){u.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";u.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(p.DomainValidationError||(p.DomainValidationError=
{}));e={key:"type",base:da,typeMap:{range:G,"coded-value":I,inherited:t}};p.DomainBase=da;p.CodedValueDomain=I;p.InheritedDomain=t;p.RangeDomain=G;p.fromJSON=function(u){if(!u||!u.type)return null;switch(u.type){case "range":return G.fromJSON(u);case "codedValue":return I.fromJSON(u);case "inherited":return t.fromJSON(u)}return null};p.getDomainRange=function(u){if(u&&"range"===u.type)return{min:"range"in u?u.range[0]:u.minValue,max:"range"in u?u.range[1]:u.maxValue}};p.isValidDomainValue=function(u,
v){return null===m(u,v)};p.types=e;p.validateDomainValue=m;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l){da=new m.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});l=function(A){function n(d){d=A.call(this,d)||this;d.name=null;d.type=null;return d}p._inheritsLoose(n,A);return n}(l.JSONSupport);e.__decorate([G.property({type:String,json:{write:!0}})],l.prototype,"name",void 0);e.__decorate([u.enumeration(da)],l.prototype,"type",void 0);return l=e.__decorate([v.subclass("esri.layers.support.Domain")],l)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports",
"./property","../../jsonMap"],function(p,e,da){p.enumeration=function(I,t={ignoreUnknown:!0}){I=I instanceof da.JSONMap?I:new da.JSONMap(I,t);I={type:null!=t&&t.ignoreUnknown?I.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:I.jsonValues,read:null!=t&&t.readOnly?!1:{reader:I.read},write:{writer:I.write}}};void 0!==(null==t?void 0:t.default)&&(I.json.default=t.default);return e.property(I)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l,A){var n;da=n=function(d){function g(M){M=d.call(this,M)||this;M.codedValues=null;M.type="coded-value";return M}p._inheritsLoose(g,d);var y=g.prototype;y.getName=function(M){let O=null;if(this.codedValues){const F=String(M);this.codedValues.some(L=>{String(L.code)===F&&(O=L.name);return!!O})}return O};y.clone=function(){return new n({codedValues:I.clone(this.codedValues),name:this.name})};return g}(A);e.__decorate([m.property({type:[l["default"]],json:{write:!0}})],
da.prototype,"codedValues",void 0);e.__decorate([u.enumeration({codedValue:"coded-value"})],da.prototype,"type",void 0);return da=n=e.__decorate([v.subclass("esri.layers.support.CodedValueDomain")],da)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l){var A;p.CodedValue=A=function(n){function d(g){g=n.call(this,g)||this;g.name=null;g.code=null;return g}e._inheritsLoose(d,n);d.prototype.clone=function(){return new A({name:this.name,code:this.code})};return d}(l.JSONSupport);da.__decorate([m.property({type:String,json:{write:!0}})],p.CodedValue.prototype,"name",void 0);da.__decorate([m.property({type:[String,Number],json:{write:!0}})],p.CodedValue.prototype,"code",void 0);p.CodedValue=A=da.__decorate([v.subclass("esri.layers.support.CodedValue")],
p.CodedValue);p.default=p.CodedValue;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba){var l;da=l=function(A){function n(d){d=A.call(this,d)||this;d.type="inherited";return d}p._inheritsLoose(n,A);n.prototype.clone=function(){return new l};return n}(ba);e.__decorate([m.enumeration({inherited:"inherited"})],da.prototype,"type",void 0);return da=l=e.__decorate([u.subclass("esri.layers.support.InheritedDomain")],da)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba){var l;da=l=function(A){function n(d){d=A.call(this,d)||this;d.maxValue=null;d.minValue=null;d.type="range";return d}p._inheritsLoose(n,A);n.prototype.clone=function(){return new l({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return n}(ba);e.__decorate([G.property({type:Number,json:{type:[Number],read:{source:"range",reader(A,n){return n.range&&n.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(A,n,d){n[d]=[this.minValue||0,A]}}}})],da.prototype,"maxValue",void 0);e.__decorate([G.property({type:Number,json:{type:[Number],read:{source:"range",reader(A,n){return n.range&&n.range[0]}},write:{target:"range",writer(A,n,d){n[d]=[A,this.maxValue||0]}}}})],da.prototype,"minValue",void 0);e.__decorate([m.enumeration({range:"range"})],da.prototype,"type",void 0);return da=l=e.__decorate([u.subclass("esri.layers.support.RangeDomain")],da)})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/maybe ../core/promiseUtils ../geometry/SpatialReference ../geometry".split(" "),
function(p,e,da,I,t,G){async function m(){u||(u=(async()=>{const D=await new Promise(function(ja,ba){p(["./arcadeUtils"],ja,ba)});await D.arcade.load();return{arcade:D.arcade,arcadeUtils:D,Dictionary:D.Dictionary,Feature:D.arcadeFeature}})());return u}let u;G=(D,ja,ba)=>v.create(D,ja,ba,null,["$feature","$view"]);let v=function(){function D(ba,l,A,n,d,g,y,M){this.script=ba;this.evaluate=d;this.fields=y;this._syntaxTree=n;this._arcade=l;this._arcadeDictionary=A;this._arcadeFeature=g;this._spatialReference=
M;this._referencesGeometry=l.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}D.create=async function(ba,l,A,n,d,g){const {arcade:y,Feature:M,Dictionary:O}=await m(),F=t.fromJSON(l);l=y.parseScript(ba,g);d=d.reduce((J,T)=>({...J,[T]:null}),{});let L=null;da.isSome(n)&&(L=new O(n),L.immutable=!0,d.$config=null);n=y.scriptUsesGeometryEngine(l)&&y.enableGeometrySupport();g=y.scriptUsesFeatureSet(l)&&y.enableFeatureSetSupport();const Y=
y.scriptIsAsync(l)&&y.enableAsyncSupport();d={vars:d,spatialReference:F,useAsync:!!Y};const ka=new O;ka.immutable=!1;ka.setField("scale",0);const fa=y.compileScript(l,d);await I.all([n,g,Y]);return new D(ba,y,O,l,J=>{"$view"in J&&J.$view&&(ka.setField("scale",J.$view.scale),J.$view=ka);L&&(J.$config=L);return fa({vars:J,spatialReference:F})},new M,A,F)};var ja=D.prototype;ja.repurposeFeature=function(ba){ba.geometry&&!ba.geometry.spatialReference&&(ba.geometry.spatialReference=this._spatialReference);
this._arcadeFeature.repurposeFromGraphicLikeObject(ba.geometry,ba.attributes,{fields:this.fields});return this._arcadeFeature};ja.repurposeAdapter=function(ba){this._arcadeFeature.repurposeFromAdapter(ba,{fields:this.fields});return this._arcadeFeature};ja.createDictionary=function(){return new this._arcadeDictionary};ja.referencesMember=function(ba){return this._arcade.referencesMember(this._syntaxTree,ba)};ja.referencesFunction=function(ba){return this._arcade.referencesFunction(this._syntaxTree,
ba)};ja.referencesGeometry=function(){return this._referencesGeometry};ja.referencesScale=function(){return this._referencesScale};ja.extractFieldLiterals=function(ba){return this._arcade.extractFieldLiterals(this._syntaxTree,ba)};return D}();e.ArcadeExpression=v;e.createDictionaryExpression=(D,ja,ba,l)=>v.create(D,ja,ba,l,["$feature","$view"]);e.createLabelExpression=(D,ja,ba)=>v.create(D,ja,ba,null,["$feature"]);e.createRendererExpression=G;e.createVVExpression=G;e.default=v;e.loadArcade=m;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(p,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",
esriFieldTypeXML:"xml"});p.kebabDict=e;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(p,e,da,I,t,G,m){function u(f,w){return f?w?4:3:w?3:2}function v(f,w,K,N){if(f){if(K)return w&&N?b:ta;if(w&&N)return xa}else if(w&&N)return ta;return aa}function D({scale:f,translate:w},K){return Math.round((K-
w[0])/f[0])}function ja({scale:f,translate:w},K){return Math.round((w[1]-K)/f[1])}function ba({scale:f,translate:w},K){return K*f[0]+w[0]}function l({scale:f,translate:w},K){return w[1]-K*f[1]}function A(f){f=f.coords;return{x:f[0],y:f[1]}}function n(f,w){f.coords[0]=w.x;f.coords[1]=w.y;return f}function d(f){f=f.coords;return{x:f[0],y:f[1],z:f[2]}}function g(f,w){f.coords[0]=w.x;f.coords[1]=w.y;f.coords[2]=w.z;return f}function y(f){f=f.coords;return{x:f[0],y:f[1],m:f[2]}}function M(f,w){f.coords[0]=
w.x;f.coords[1]=w.y;f.coords[2]=w.m;return f}function O(f){f=f.coords;return{x:f[0],y:f[1],z:f[2],m:f[3]}}function F(f,w){f.coords[0]=w.x;f.coords[1]=w.y;f.coords[2]=w.z;f.coords[3]=w.m;return f}function L(f,w){return f&&w?F:f?g:w?M:n}function Y(f,w,K,N,Z){K=L(K,N);for(const V of w){const {geometry:la,attributes:ma}=V;let na;la&&(na=K(new m,la));f.push(new t(na,ma,null,ma[Z]))}return f}function ka(f,w,K,N){for(const Z of w){const {geometry:V,attributes:la}=Z;let ma;V&&(ma=fa(V,K,N));f.push({attributes:la,
geometry:ma})}return f}function fa(f,w,K){if(!f)return null;const N=u(w,K),Z=[];for(let V=0;V<f.coords.length;V+=N){const la=[];for(let ma=0;ma<N;ma++)la.push(f.coords[V+ma]);Z.push(la)}return w?K?{points:Z,hasZ:w,hasM:K}:{points:Z,hasZ:w}:K?{points:Z,hasM:K}:{points:Z}}function J(f,w,K,N,Z){K=u(K,N);for(const V of w){w=V.geometry;N=V.attributes;let la;w&&(la=T(new m,w,K));f.push(new t(la,N,null,N[Z]))}return f}function T(f,w,K=u(w.hasZ,w.hasM)){f.lengths[0]=w.points.length;const N=f.coords;let Z=
0;for(const V of w.points)for(w=0;w<K;w++)N[Z++]=V[w];return f}function ia(f,w,K){if(!f)return null;const N=u(w,K),{coords:Z,lengths:V}=f;f=[];let la=0;for(const ma of V){const na=[];for(let wa=0;wa<ma;wa++){const ua=[];for(let ya=0;ya<N;ya++)ua.push(Z[la++]);na.push(ua)}f.push(na)}return w?K?{paths:f,hasZ:w,hasM:K}:{paths:f,hasZ:w}:K?{paths:f,hasM:K}:{paths:f}}function Q(f,w,K,N,Z){K=u(K,N);for(const V of w){w=V.geometry;N=V.attributes;let la;w&&(la=P(new m,w,K));f.push(new t(la,N,null,N[Z]))}return f}
function P(f,w,K=u(w.hasZ,w.hasM)){const {lengths:N,coords:Z}=f;let V=0;for(const la of w.paths){for(const ma of la)for(w=0;w<K;w++)Z[V++]=ma[w];N.push(la.length)}return f}function B(f,w,K){if(!f)return null;const N=u(w,K),{coords:Z,lengths:V}=f;f=[];let la=0;for(const ma of V){const na=[];for(let wa=0;wa<ma;wa++){const ua=[];for(let ya=0;ya<N;ya++)ua.push(Z[la++]);na.push(ua)}f.push(na)}return w?K?{rings:f,hasZ:w,hasM:K}:{rings:f,hasZ:w}:K?{rings:f,hasM:K}:{rings:f}}function q(f,w,K,N,Z){for(const V of w){w=
V.geometry;const la=V.centroid,ma=V.attributes;let na;w&&(na=H(new m,w,K,N));la?f.push(new t(na,ma,n(new m,la),ma[Z])):f.push(new t(na,ma,null,ma[Z]))}return f}function H(f,w,K=w.hasZ,N=w.hasM){C(f,w.rings,K,N);return f}function C(f,w,K,N){K=u(K,N);const {lengths:Z,coords:V}=f;N=0;Z.length=V.length=0;for(const la of w){for(const ma of la)for(w=0;w<K;w++)V[N++]=ma[w];Z.push(la.length)}return f}function W(f,w,K,N,Z,V){f.length=0;if(!K){for(const la of w)f.push(new t(null,la.attributes,null,la.attributes[V]));
return f}switch(K){case "esriGeometryPoint":return Y(f,w,N,Z,V);case "esriGeometryMultipoint":return J(f,w,N,Z,V);case "esriGeometryPolyline":return Q(f,w,N,Z,V);case "esriGeometryPolygon":return q(f,w,N,Z,V);default:r.error("convertToFeatureSet:unknown-geometry",new da(`Unable to parse unknown geometry type '${K}'`)),f.length=0}return f}function X(f,w,K,N){f=f&&("coords"in f?f:f.geometry);if(!f)return null;switch(w){case "esriGeometryPoint":return w=A,K&&N?w=O:K?w=d:N&&(w=y),w(f);case "esriGeometryMultipoint":return fa(f,
K,N);case "esriGeometryPolyline":return ia(f,K,N);case "esriGeometryPolygon":return B(f,K,N);default:r.error("convertToGeometry:unknown-geometry",new da(`Unable to parse unknown geometry type '${w}'`))}}function ha(f,w,K,N,Z){f.length=0;switch(K){case "esriGeometryPoint":var V=A;N&&Z?V=O:N?V=d:Z&&(V=y);for(var la of w){const {geometry:ma,attributes:na}=la;N=ma?V(ma):null;f.push({attributes:na,geometry:N})}break;case "esriGeometryMultipoint":return ka(f,w,N,Z);case "esriGeometryPolyline":for(const ma of w){const {geometry:na,
attributes:wa}=ma;let ua;na&&(ua=ia(na,N,Z));f.push({attributes:wa,geometry:ua})}break;case "esriGeometryPolygon":for(V of w){const {geometry:ma,attributes:na,centroid:wa}=V;let ua;ma&&(ua=B(ma,N,Z));wa?(la=A(wa),f.push({attributes:na,centroid:la,geometry:ua})):f.push({attributes:na,geometry:ua})}break;default:r.error("convertToFeatureSet:unknown-geometry",new da(`Unable to parse unknown geometry type '${K}'`))}return f}function pa(f,w,K,N,Z,V,la=K,ma=N){f.lengths.length&&(f.lengths.length=0);f.coords.length&&
(f.coords.length=0);if(!w||!w.coords.length)return null;Z=E[Z];const {coords:na,lengths:wa}=w;w=u(K,N);const ua=u(K&&la,N&&ma);K=v(K,N,la,ma);if(!wa.length)return K(f.coords,na,0,0,D(V,na[0]),ja(V,na[1])),f.lengths.length&&(f.lengths.length=0),f.coords.length=w,f;let ya,Ba=0,Da,Ga=0;for(const Ha of wa){if(Ha<Z)continue;let Ka=0;Da=Ga;ma=N=D(V,na[Ba]);ya=la=ja(V,na[Ba+1]);K(f.coords,na,Da,Ba,ma,ya);Ka++;Ba+=w;Da+=ua;for(let Ia=1;Ia<Ha;Ia++,Ba+=w)if(ma=D(V,na[Ba]),ya=ja(V,na[Ba+1]),ma!==N||ya!==la)K(f.coords,
na,Da,Ba,ma-N,ya-la),Da+=ua,Ka++,N=ma,la=ya;Ka>=Z&&(f.lengths.push(Ka),Ga=Da)}f.coords.length=Ga;return f.coords.length?f:null}function ra(f,w,K,N,Z,V,la){let ma=N,na=0;for(let ua=V+K;ua<la;ua+=K){{var wa=w[ua];const ya=w[ua+1],Ba=w[la],Da=w[la+1];let Ga=w[V],Ha=w[V+1],Ka=Ba-Ga,Ia=Da-Ha;if(0!==Ka||0!==Ia){const Ja=((wa-Ga)*Ka+(ya-Ha)*Ia)/(Ka*Ka+Ia*Ia);1<Ja?(Ga=Ba,Ha=Da):0<Ja&&(Ga+=Ka*Ja,Ha+=Ia*Ja)}Ka=wa-Ga;Ia=ya-Ha;wa=Ka*Ka+Ia*Ia}wa>ma&&(na=ua,ma=wa)}ma>N&&(na-V>K&&ra(f,w,K,N,Z,V,na),Z(f,w,f.length,
na,w[na],w[na+1]),la-na>K&&ra(f,w,K,N,Z,na,la))}function Aa(f,w,K,N,Z){const {coords:V,lengths:la}=w,ma=K?N?b:ta:N?ta:aa;K=u(K,N);if(!V.length)return f!==w&&(f.lengths.length=0,f.coords.length=0),f;if(!la.length)return ma(f.coords,V,0,0,ba(Z,V[0]),l(Z,V[1])),f!==w&&(f.lengths.length=0,f.coords.length=K),f;const [na,wa]=Z.scale;N=0;for(let ua=0;ua<la.length;ua++){const ya=la[ua];f.lengths[ua]=ya;let Ba=ba(Z,V[N]),Da=l(Z,V[N+1]);ma(f.coords,V,N,N,Ba,Da);N+=K;for(let Ga=1;Ga<ya;Ga++,N+=K)Ba+=V[N]*na,
Da-=V[N+1]*wa,ma(f.coords,V,N,N,Ba,Da)}f!==w&&(f.lengths.length=la.length,f.coords.length=V.length);return f}function Ca(f,w,K,N){let Z=0,V=f[N*w],la=f[N*(w+1)];for(let ma=1;ma<K;ma++){const na=V+f[N*(w+ma)],wa=la+f[N*(w+ma)+1],ua=(na-V)*(wa+la);V=na;la=wa;Z+=ua}return.5*Z}const r=e.getLogger("esri.tasks.support.optimizedFeatureSet"),E={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},aa=(f,w,K,N,Z,V)=>{f[K]=Z;f[K+1]=V},ta=(f,w,K,N,Z,V)=>{f[K]=Z;f[K+1]=V;
f[K+2]=w[N+2]},xa=(f,w,K,N,Z,V)=>{f[K]=Z;f[K+1]=V;f[K+2]=w[N+3]},b=(f,w,K,N,Z,V)=>{f[K]=Z;f[K+1]=V;f[K+2]=w[N+2];f[K+3]=w[N+3]},k=[],R=[];p.convertFromFeature=function(f,w,K,N,Z){k[0]=f;[f]=W(R,k,w,K,N,Z);k.length=R.length=0;return f};p.convertFromFeatureSet=function(f,w){const K=new G,{hasM:N,hasZ:Z,features:V,objectIdFieldName:la,spatialReference:ma,geometryType:na,exceededTransferLimit:wa,transform:ua,fields:ya}=f;ya&&(K.fields=ya);K.geometryType=na;K.objectIdFieldName=la||w;K.spatialReference=
ma;if(!K.objectIdFieldName)return r.error(new da("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),K;V&&W(K.features,V,na,Z,N,K.objectIdFieldName);wa&&(K.exceededTransferLimit=wa);N&&(K.hasM=N);Z&&(K.hasZ=Z);ua&&(K.transform=ua);return K};p.convertFromFeatures=W;p.convertFromGeometry=function(f,w,K){if(!f)return null;const N=new m;"hasZ"in f&&null==w&&(w=f.hasZ);"hasM"in f&&null==K&&(K=f.hasM);if(I.isPoint(f))return L(null!=w?w:null!=f.z,null!=K?K:null!=f.m)(N,f);if(I.isPolygon(f))return H(N,
f,w,K);if(I.isPolyline(f))return P(N,f,u(w,K));if(I.isMultipoint(f))return T(N,f,u(w,K));r.error("convertFromGeometry:unknown-geometry",new da(`Unable to parse unknown geometry type '${f}'`))};p.convertFromGraphics=function(f,w,K,N,Z,V){const la=f.length;switch(K){case "esriGeometryPoint":Y(f,w,N,Z,V);break;case "esriGeometryMultipoint":J(f,w,N,Z,V);break;case "esriGeometryPolyline":Q(f,w,N,Z,V);break;case "esriGeometryPolygon":q(f,w,N,Z,V);break;default:r.error("convertToFeatureSet:unknown-geometry",
new da(`Unable to parse unknown geometry type '${K}'`))}for(N=0;N<w.length;N++)f[N+la].geometryType=K,f[N+la].insertAfter=w[N].insertAfter,f[N+la].groupId=w[N].groupId;return f};p.convertFromMultipoint=T;p.convertFromMultipointFeatures=J;p.convertFromNestedArray=C;p.convertFromPoint=function(f,w,K=L(null!=w.z,null!=w.m)){return K(f,w)};p.convertFromPointFeatures=Y;p.convertFromPolygon=H;p.convertFromPolyline=P;p.convertFromPolylineFeatures=Q;p.convertToFeature=function(f,w,K,N){R[0]=f;ha(k,R,w,K,
N);f=k[0];k.length=R.length=0;return f};p.convertToFeatureSet=function(f){const {objectIdFieldName:w,spatialReference:K,transform:N,fields:Z,hasM:V,hasZ:la,features:ma,geometryType:na,exceededTransferLimit:wa,uniqueIdField:ua,queryGeometry:ya,queryGeometryType:Ba}=f;f=ha([],ma,na,la,V);const Da=X(ya,Ba,!1,!1);f={features:f,fields:Z,geometryType:na,objectIdFieldName:w,spatialReference:K,uniqueIdField:ua,queryGeometry:Da};N&&(f.transform=N);wa&&(f.exceededTransferLimit=wa);V&&(f.hasM=V);la&&(f.hasZ=
la);return f};p.convertToFeatures=ha;p.convertToGeometry=X;p.convertToMultipoint=fa;p.convertToMultipointFeatures=ka;p.convertToPoint=function(f,w,K){return f?w?K?O(f):d(f):K?y(f):A(f):null};p.convertToPolygon=B;p.convertToPolyline=ia;p.deltaDecodeGeometry=function(f,w){const K=f.clone(),N=f.coords;f=f.lengths;let Z=0;for(let ma=0;ma<f.length;ma++){const na=f[ma];var V=N[w*Z],la=N[w*Z+1];for(let wa=1;wa<na;wa++)V+=N[w*(Z+wa)],la+=N[w*(Z+wa)+1],K.coords[w*(Z+wa)]=V,K.coords[w*(Z+wa)+1]=la;Z+=na}return K};
p.deltaEncodeGeometry=function(f,w){const K=f.clone(),N=f.coords;f=f.lengths;let Z=0;for(let la=0;la<f.length;la++){const ma=f[la];let na=N[w*Z];var V=N[w*Z+1];for(let wa=1;wa<ma;wa++){const ua=N[w*(Z+wa)],ya=N[w*(Z+wa)+1];V=ya-V;K.coords[w*(Z+wa)]=ua-na;K.coords[w*(Z+wa)+1]=V;na=ua;V=ya}Z+=ma}return K};p.generalizeOptimizedGeometry=function(f,w,K,N,Z,V,la=K,ma=N){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!w||!w.coords.length)return null;Z=E[Z];const {coords:na,
lengths:wa}=w;w=u(K,N);const ua=u(K&&la,N&&ma);K=v(K,N,la,ma);if(!wa.length)return K(f.coords,na,0,0,na[0],na[1]),f.lengths.length&&(f.lengths.length=0),f.coords.length=w,f;N=0;V*=V;for(const ya of wa){if(ya<Z){N+=ya*w;continue}la=f.coords.length/ua;ma=N;const Ba=N+(ya-1)*w;K(f.coords,na,f.coords.length,ma,na[ma],na[ma+1]);ra(f.coords,na,w,V,K,ma,Ba);K(f.coords,na,f.coords.length,Ba,na[Ba],na[Ba+1]);ma=f.coords.length/ua-la;ma>=Z?f.lengths.push(ma):f.coords.length=la*ua;N+=ya*w}return f.coords.length?
f:null};p.getBoundsOptimizedGeometry=function(f,w,K,N){if(!w||!w.coords||!w.coords.length)return null;K=u(K,N);let Z=N=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY;if(w&&w.coords){w=w.coords;for(let ma=0;ma<w.length;ma+=K){const na=w[ma],wa=w[ma+1];N=Math.min(N,na);V=Math.max(V,na);Z=Math.min(Z,wa);la=Math.max(la,wa)}}f[0]=N;f[1]=Z;f[2]=V;f[3]=la;return f};p.getQuantizedArea=function(f,w){const {coords:K,lengths:N}=f;let Z=f=0;for(let V=0;V<N.length;V++)Z+=Ca(K,
f,N[V],w),f+=V;return Math.abs(Z)};p.getQuantizedBoundsOptimizedGeometry=function(f,w,K,N){K=u(K,N);const {lengths:Z,coords:V}=w;N=w=Number.POSITIVE_INFINITY;let la=Number.NEGATIVE_INFINITY,ma=Number.NEGATIVE_INFINITY,na=0;for(const wa of Z){let ua=V[na],ya=V[na+1];w=Math.min(ua,w);N=Math.min(ya,N);la=Math.max(ua,la);ma=Math.max(ya,ma);na+=K;for(let Ba=1;Ba<wa;Ba++,na+=K){const Da=V[na],Ga=V[na+1];ua+=Da;ya+=Ga;0>Da&&(w=Math.min(w,ua));0<Da&&(la=Math.max(la,ua));0>Ga?N=Math.min(N,ya):0<Ga&&(ma=Math.max(ma,
ya))}}f[0]=w;f[1]=N;f[2]=la;f[3]=ma;return f};p.getSignedQuantizedRingArea=Ca;p.quantizeOptimizedFeatureSet=function(f,w){const {geometryType:K,features:N,hasM:Z,hasZ:V}=w;if(!f)return w;for(let la=0;la<N.length;la++){const ma=N[la],na=ma.weakClone();na.geometry=new m;pa(na.geometry,ma.geometry,Z,V,K,f);ma.centroid&&(na.centroid=new m,pa(na.centroid,ma.centroid,Z,V,"esriGeometryPoint",f));N[la]=na}w.transform=f;return w};p.quantizeOptimizedGeometry=pa;p.quantizeX=D;p.quantizeY=ja;p.removeCollinearVectices=
function(f,w,K,N,Z){if(!w||!w.coords||!w.coords.length)return null;K=E[K];const {coords:V,lengths:la}=w;w=v(N,Z,N,Z);N=u(N,Z);let ma=Z=0,na=0,wa=0;for(const Ba of la){ma=wa;w(f.coords,V,ma,Z,V[Z],V[Z+1]);Z+=N;var ua=V[Z];let Da=V[Z+1],Ga=ua,Ha=Da;var ya=Da/ua;ma+=N;w(f.coords,V,ma,Z,Ga,Ha);Z+=N;for(let Ka=2;Ka<Ba;Ka++){ua=V[Z];Da=V[Z+1];const Ia=Da/ua,Ja=ya===Ia||!isFinite(ya)&&!isFinite(Ia);ya=Ja&&isFinite(Ia)?0<=ya&&0<=Ia||0>=ya&&0>=Ia:0<=Ha&&0<=Da||0>=Ha&&0>=Da;Ja&&ya?(Ga+=ua,Ha+=Da):(Ga=ua,Ha=
Da,ma+=N);w(f.coords,V,ma,Z,Ga,Ha);Z+=N;ya=Ia}ma+=N;ua=(ma-wa)/N;ua>=K&&(f.lengths[na]=ua,wa=ma,na++)}f.coords.length>wa&&(f.coords.length=wa);f.lengths.length>na&&(f.lengths.length=na);return f.coords.length&&f.lengths.length?f:null};p.removeZMValues=function(f,w,K,N,Z,V){const la=u(K,N);K=v(K,N,Z,V);N=w.coords;f.coords.length=0;f.lengths.length=0;f.lengths.push(...w.lengths);for(w=0;w<N.length;w+=la)K(f.coords,N,f.coords.length,w,N[w],N[w+1]);return f};p.unquantizeOptimizedFeatureSet=function(f){const {transform:w,
features:K,hasM:N,hasZ:Z}=f;if(!w)return f;for(const V of K)V.geometry&&Aa(V.geometry,V.geometry,N,Z,w),V.centroid&&Aa(V.centroid,V.centroid,N,Z,w);f.transform=null;return f};p.unquantizeOptimizedGeometry=Aa;p.unquantizeX=ba;p.unquantizeY=l;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(da=null,I={},t,G){this.displayId=0;this.geohashIndexed=!1;this.geohashY=
this.geohashX=0;this.geometry=da;I&&(this.attributes=I);t&&(this.centroid=t);null!=G&&(this.objectId=G)}e.prototype.weakClone=function(){const da=new e(this.geometry,this.attributes,this.centroid,this.objectId);da.displayId=this.displayId;da.geohashIndexed=this.geohashIndexed;da.geohashX=this.geohashX;da.geohashY=this.geohashY;return da};p._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function p(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}p.prototype.weakClone=function(){const e=new p;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;
e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return p}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){return function(){function e(I=
[],t=[],G=!1){this.lengths=null!=I?I:[];this.coords=null!=t?t:[];this.hasIndeterminateRingOrder=G}var da=e.prototype;da.forEachVertex=function(I){let t=0;this.lengths.length||I(this.coords[0],this.coords[1]);for(let G=0;G<this.lengths.length;G++){const m=this.lengths[G];for(let u=0;u<m;u++)I(this.coords[2*(u+t)],this.coords[2*(u+t)+1]);t+=m}};da.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};p._createClass(e,[{key:"isPoint",get:function(){return 0===
this.lengths.length}}]);return e}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function p(da){this.fields=da;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(da){var I=[];for(const t of da)if(da=t&&t.name){const G=da.toLowerCase().trim();this._fieldsMap.set(da,t);this._fieldsMap.set(G,t);I.push(G);if("date"===t.type||"esriFieldTypeDate"===t.type)this.dateFields.push(t),this._dateFieldsSet.add(t)}I.sort();this.uid=I.join(",")}}var e=
p.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(da){return null!=this.get(da)};e.get=function(da){return null!=da?this._fieldsMap.get(da)||this._fieldsMap.get(da.toLowerCase().trim()):void 0};e.isDateField=function(da){return this._dateFieldsSet.has(this.get(da))};e.normalizeFieldName=function(da){if(da=this.get(da))return da.name};return p}()})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json".split(" "),
function(p,e,da,I,t,G){function m(A,n){if(!n)return null;if("x"in n){var d={x:0,y:0};[d.x,d.y]=A(n.x,n.y,D);null!=n.z&&(d.z=n.z);null!=n.m&&(d.m=n.m);return d}if("xmin"in n)return d={xmin:0,ymin:0,xmax:0,ymax:0},[d.xmin,d.ymin]=A(n.xmin,n.ymin,D),[d.xmax,d.ymax]=A(n.xmax,n.ymax,D),n.hasZ&&(d.zmin=n.zmin,d.zmax=n.zmax,d.hasZ=!0),n.hasM&&(d.mmin=n.mmin,d.mmax=n.mmax,d.hasM=!0),d;if("rings"in n)return{rings:u(n.rings,A),hasM:n.hasM,hasZ:n.hasZ};if("paths"in n)return{paths:u(n.paths,A),hasM:n.hasM,hasZ:n.hasZ};
if("points"in n)return{points:v(n.points,A),hasM:n.hasM,hasZ:n.hasZ}}function u(A,n){const d=[];for(const g of A)d.push(v(g,n));return d}function v(A,n){const d=[];for(const g of A)A=n(g[0],g[1],[0,0]),d.push(A),2<g.length&&A.push(g[2]),3<g.length&&A.push(g[3]);return d}const D=[0,0],ja=m.bind(null,I.lngLatToXY),ba=m.bind(null,I.xyToLngLat),l=new (function(){function A(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var n=A.prototype;n.push=async function(d,g,y){d&&d.length&&
g&&y&&da.equals(g,y);const M={geometries:d,inSpatialReference:g,outSpatialReference:y,resolve:null};this._jobs.push(M);return e.create(O=>{M.resolve=O;null===this._timer&&(this._timer=setTimeout(this._process,10))})};n._process=function(){this._timer=null;const d=this._jobs.shift();if(d){var {geometries:g,inSpatialReference:y,outSpatialReference:M,resolve:O}=d;I.canProject(y,M)?da.isWebMercator(M)?O(g.map(ja)):O(g.map(ba)):O(t.projectMany(G.jsonAdapter,g,y,M,null));0<this._jobs.length&&(this._timer=
setTimeout(this._process,10))}};return A}());p.checkProjectionSupport=async function(A,n){n&&(A=Array.isArray(A)?A.map(d=>{var g;return null==(g=d.geometry)?void 0:g.spatialReference}):[A],await t.initializeProjection(A.map(d=>({source:d,dest:n}))))};p.project=function(A,n,d){if(!A)return A;d||(d=n,n=A.spatialReference);return da.isValid(n)&&da.isValid(d)&&!da.equals(n,d)?I.canProject(n,d)?da.isWebMercator(d)?ja(A):ba(A):t.projectMany(G.jsonAdapter,[A],n,d,null)[0]:A};p.projectMany=async function(A,
n,d){return l.push(A,n,d)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l,A,n,d,g,y,M,O,F,L,Y){function ka(){return!!Ga&&O.isLoaded()}function fa(S){I.isNone(Ka)&&(Ka=G.all([O.load(),(new Promise(function(ca,ea){p(["../chunks/geometryEngineBase"],ca,ea)})).then(function(ca){return ca.geometryEngineBase}),new Promise(function(ca,ea){p(["./geometryAdapters/hydrated"],ca,ea)})]));return Ka.then(([,ca,{hydratedAdapter:ea}])=>{G.throwIfAborted(S);Ha=ea;Ga=ca.default;Ga._enableProjection(O.pe)})}function J(S,ca,ea,oa,za=null){if(I.isNone(ea)||
I.isNone(oa))return ca;if(ia(ea,oa,za))return ca.map(Ea=>Q(Ea,ea,oa));if(I.isNone(za)){const Ea=Y.cacheKey(ea,oa);void 0!==Ia[Ea]?za=Ia[Ea]:(za=T(ea,oa,null),I.isNone(za)&&(za=new Y),Ia[Ea]=za)}if(I.isNone(Ga))throw new Ja;return Ga._project(S,ca,ea,oa,za)}function T(S,ca,ea=null){if(I.isNone(Ga))throw new Ja;if(I.isNone(S)||I.isNone(ca))return null;S=Ga._getTransformation(Ha,S,ca,ea,null==ea?void 0:ea.spatialReference);return null!==S?Y.fromGE(S):null}function ia(S,ca,ea){return ea?!1:m.equals(S,
ca)?!0:m.isValid(S)&&m.isValid(ca)&&!!ya(S,ca,eb)}function Q(S,ca,ea){if(!S)return S;if("x"in S){var oa=new v;return P(S,ca,oa,ea)?oa:null}return"xmin"in S?(oa=new D,C(S,ca,oa,ea)?oa:null):"rings"in S?(oa=new ba,H(S,ca,oa,ea)?oa:null):"paths"in S?(oa=new l,q(S,ca,oa,ea)?oa:null):"points"in S?(oa=new ja,B(S,ca,oa,ea)?oa:null):null}function P(S,ca,ea,oa,za=0){Ra[0]=S.x;Ra[1]=S.y;const Ea=S.z;Ra[2]=void 0!==Ea?Ea:za;if(!pa(Ra,ca,0,Ra,oa,0,1))return!1;ea.x=Ra[0];ea.y=Ra[1];ea.spatialReference=oa;void 0===
Ea?(ea.z=void 0,ea.hasZ=!1):(ea.z=Ra[2],ea.hasZ=!0);void 0===S.m?(ea.m=void 0,ea.hasM=!1):(ea.m=S.m,ea.hasM=!0);return!0}function B(S,ca,ea,oa,za=0){const {points:Ea,hasZ:Na,hasM:Pa}=S;S=[];const Za=Ea.length,Ya=[];for(var Va of Ea)Ya.push(Va[0],Va[1],Na?Va[2]:za);if(!pa(Ya,ca,0,Ya,oa,0,Za))return!1;for(ca=0;ca<Za;++ca){za=3*ca;Va=Ya[za];const gb=Ya[za+1];Na&&Pa?S.push([Va,gb,Ya[za+2],Ea[ca][3]]):Na?S.push([Va,gb,Ya[za+2]]):Pa?S.push([Va,gb,Ea[ca][2]]):S.push([Va,gb])}ea.points=S;ea.spatialReference=
oa;ea.hasZ=Na;ea.hasM=Pa;return!0}function q(S,ca,ea,oa,za=0){const {paths:Ea,hasZ:Na,hasM:Pa}=S;S=[];if(!ra(Ea,Na,Pa,ca,S,oa,za))return!1;ea.paths=S;ea.spatialReference=oa;ea.hasZ=Na;ea.hasM=Pa;return!0}function H(S,ca,ea,oa,za=0){const {rings:Ea,hasZ:Na,hasM:Pa}=S;S=[];if(!ra(Ea,Na,Pa,ca,S,oa,za))return!1;ea.rings=S;ea.spatialReference=oa;ea.hasZ=Na;ea.hasM=Pa;return!0}function C(S,ca,ea,oa,za=0){const {xmin:Ea,ymin:Na,xmax:Pa,ymax:Za,hasZ:Ya,hasM:Va}=S;if(!W(Ea,Na,Ya?S.zmin:za,ca,Ra,oa))return!1;
ea.xmin=Ra[0];ea.ymin=Ra[1];Ya&&(ea.zmin=Ra[2]);if(!W(Pa,Za,Ya?S.zmax:za,ca,Ra,oa))return!1;ea.xmax=Ra[0];ea.ymax=Ra[1];Ya&&(ea.zmax=Ra[2]);Va&&(ea.mmin=S.mmin,ea.mmax=S.mmax);ea.spatialReference=oa;return!0}function W(S,ca,ea,oa,za,Ea){Ma[0]=S;Ma[1]=ca;Ma[2]=ea;return pa(Ma,oa,0,za,Ea,0,1)}function X(S,ca,ea,oa){if(I.isNone(ca)||I.isNone(oa)||2>S.length)return!1;2===S.length&&(Ma[0]=S[0],Ma[1]=S[1],Ma[2]=0,S=Ma);return pa(S,ca,0,ea,oa,0,1)}function ha(S,ca,ea){I.isNone(ca)?S=!1:(ca=Ca(ca,qa),ca=
Sa[ca][6],I.isNone(ca)?S=!1:(ca(S,0,Ma,0),ea!==Ma&&(ea[0]=Ma[0],ea[1]=Ma[1],2<ea.length&&(ea[2]=Ma[2])),S=!0));return S}function pa(S,ca,ea,oa,za,Ea,Na=1){ca=ya(ca,za,eb);if(I.isNone(ca))return!1;if(ca===r){if(S===oa&&ea===Ea)return!0;Na=ea+3*Na;for(let Pa=ea,Za=Ea;Pa<Na;Pa++,Za++)oa[Za]=S[Pa];return!0}Na=ea+3*Na;for(let Pa=ea,Za=Ea;Pa<Na;Pa+=3,Za+=3)ca(S,Pa,oa,Za);return!0}function ra(S,ca,ea,oa,za,Ea,Na=0){const Pa=[];for(const Za of S)for(const Ya of Za)Pa.push(Ya[0],Ya[1],ca?Ya[2]:Na);if(!pa(Pa,
oa,0,Pa,Ea,0,Pa.length/3))return!1;oa=0;za.length=0;for(const Za of S){S=[];for(const Ya of Za)ca&&ea?S.push([Pa[oa++],Pa[oa++],Pa[oa++],Ya[3]]):ca?S.push([Pa[oa++],Pa[oa++],Pa[oa++]]):(ea?S.push([Pa[oa++],Pa[oa++],Ya[2]]):S.push([Pa[oa++],Pa[oa++]]),oa++);za.push(S)}return!0}function Aa(S,ca,ea){const oa=Math.sin(ca);ca=Math.cos(ca);const za=Math.sin(S);S=Math.cos(S);ea[0]=-oa;ea[4]=-za*ca;ea[8]=S*ca;ea[12]=0;ea[1]=ca;ea[5]=-za*oa;ea[9]=S*oa;ea[13]=0;ea[2]=0;ea[6]=S;ea[10]=za;ea[14]=0;ea[3]=0;ea[7]=
0;ea[11]=0;ea[15]=1;return ea}function Ca(S,ca){if(ca.spatialReference===S)return ca.spatialReferenceId;ca.spatialReference=S;"metersPerUnit"in ca&&(ca.metersPerUnit=y.getMetersPerUnitForSR(S,1));return S.wkt===g.SphericalECEFSpatialReference.wkt?ca.spatialReferenceId=1:m.isWGS84(S)?ca.spatialReferenceId=2:m.isWebMercator(S)?ca.spatialReferenceId=3:S.wkt===g.WGS84ECEFSpatialReference.wkt?ca.spatialReferenceId=4:4490===S.wkid?ca.spatialReferenceId=5:S.wkt===g.SphericalPCPFMars.wkt?ca.spatialReferenceId=
7:S.wkt===g.SphericalPCPFMoon.wkt?ca.spatialReferenceId=9:m.isMars(S)?ca.spatialReferenceId=8:m.isMoon(S)?ca.spatialReferenceId=10:ca.spatialReferenceId=0}function r(S,ca,ea,oa){S!==ea&&(ea[oa++]=S[ca++],ea[oa++]=S[ca++],ea[oa]=S[ca])}function E(S,ca,ea,oa){ea[oa++]=ab*(S[ca++]/u.earth.radius);ea[oa++]=ab*(Math.PI/2-2*Math.atan(Math.exp(-1*S[ca++]/u.earth.radius)));ea[oa]=S[ca]}function aa(S,ca,ea,oa){E(S,ca,ea,oa);f(ea,oa,ea,oa)}function ta(S,ca,ea,oa){E(S,ca,ea,oa);ma(ea,oa,ea,oa)}function xa(S,
ca,ea,oa){var za=.4999999*Math.PI;za=A.clamp(a*S[ca+1],-za,za);za=Math.sin(za);ea[oa++]=a*S[ca]*u.earth.radius;ea[oa++]=u.earth.halfSemiMajorAxis*Math.log((1+za)/(1-za));ea[oa]=S[ca+2]}function b(S,ca,ea,oa,za){za+=S[ca+2];const Ea=a*S[ca+1];S=a*S[ca];ca=Math.cos(Ea);ea[oa++]=Math.cos(S)*ca*za;ea[oa++]=Math.sin(S)*ca*za;ea[oa]=Math.sin(Ea)*za}function k(S,ca,ea,oa){b(S,ca,ea,oa,u.moon.radius)}function R(S,ca,ea,oa){b(S,ca,ea,oa,u.mars.radius)}function f(S,ca,ea,oa){b(S,ca,ea,oa,u.earth.radius)}function w(S,
ca,ea,oa,za){var Ea=S[ca];const Na=S[ca+1];ca=S[ca+2];S=Math.sqrt(Ea*Ea+Na*Na+ca*ca);ca=A.asinClamped(ca/(0===S?1:S));Ea=Math.atan2(Na,Ea);ea[oa++]=ab*Ea;ea[oa++]=ab*ca;ea[oa]=S-za}function K(S,ca,ea,oa){w(S,ca,ea,oa,u.moon.radius)}function N(S,ca,ea,oa){w(S,ca,ea,oa,u.mars.radius)}function Z(S,ca,ea,oa){w(S,ca,ea,oa,u.earth.radius)}function V(S,ca,ea,oa){Z(S,ca,ea,oa);xa(ea,oa,ea,oa)}function la(S,ca,ea,oa){Z(S,ca,ea,oa);ma(ea,oa,ea,oa)}function ma(S,ca,ea,oa){{var za=u.earth;const Na=a*S[ca];var Ea=
a*S[ca+1];S=S[ca+2];ca=Math.sin(Ea);Ea=Math.cos(Ea);const Pa=za.radius/Math.sqrt(1-za.eccentricitySquared*ca*ca);ea[oa++]=(Pa+S)*Ea*Math.cos(Na);ea[oa++]=(Pa+S)*Ea*Math.sin(Na);ea[oa++]=(Pa*(1-za.eccentricitySquared)+S)*ca}}function na(S,ca,ea,oa){var za=L.earthEllipsoidConstants,Ea=S[ca],Na=S[ca+1];S=S[ca+2];let Pa;ca=Math.abs(S);var Za=Ea*Ea+Na*Na;var Ya=Math.sqrt(Za);var Va=Za+S*S;var gb=Math.sqrt(Va);Ea=Math.atan2(Na,Ea);var jb=S*S/Va;Va=Za/Va;Na=za.a2/gb;Za=za.a3-za.a4/gb;.3<Va?(jb=ca/gb*(1+
Va*(za.a1+Na+jb*Za)/gb),gb=Math.asin(jb),Na=jb*jb,Va=Math.sqrt(1-Na)):(Va=Ya/gb*(1-jb*(za.a5-Na-Va*Za)/gb),gb=Math.acos(Va),Na=1-Va*Va,jb=Math.sqrt(Na));Pa=1-u.earth.eccentricitySquared*Na;Na=u.earth.radius/Math.sqrt(Pa);za=za.a6*Na;Na=Ya-Na*Va;Za=ca-za*jb;ca=Va*Na+jb*Za;Ya=Va*Za-jb*Na;za=Ya/(za/Pa+ca);gb+=za;0>S&&(gb=-gb);ea[oa++]=ab*Ea;ea[oa++]=ab*gb;ea[oa]=ca+Ya*za/2}function wa(S,ca,ea,oa){na(S,ca,ea,oa);f(ea,oa,ea,oa)}function ua(S,ca,ea,oa){na(S,ca,ea,oa);xa(ea,oa,ea,oa)}function ya(S,ca,ea=
Da()){return I.isNone(S)||I.isNone(ca)?null:Ba(S,ca,ea).projector}function Ba(S,ca,ea){if(I.isNone(S)||I.isNone(ca)||ea.source.spatialReference===S&&ea.dest.spatialReference===ca)return ea;const oa=Ca(S,ea.source),za=Ca(ca,ea.dest);0===oa&&0===za?m.equals(S,ca)?ea.projector=r:ea.projector=null:ea.projector=Sa[oa][za];return ea}function Da(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:r}}let Ga=
null,Ha=null,Ka=null,Ia={},Ja=function(S){function ca(){return S.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}da._inheritsLoose(ca,S);return ca}(t);(function(S){S.x2lon=function(ca){return ca/u.earth.radius};S.y2lat=function(ca){return Math.PI/2-2*Math.atan(Math.exp(-1*ca/u.earth.radius))};S.lon2x=function(ca){return ca*u.earth.radius};S.lat2y=function(ca){ca=Math.sin(ca);return u.earth.radius/2*Math.log((1+ca)/(1-ca))}})(e.webMercator||(e.webMercator=
{}));const Sa={[2]:{[5]:null,[8]:null,[10]:null,[6]:r,[1]:f,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:r,[4]:ma},[5]:{[5]:r,[8]:null,[10]:null,[6]:r,[1]:f,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ma},[8]:{[5]:null,[8]:r,[10]:null,[6]:null,[1]:null,[7]:R,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:r,[6]:null,[1]:null,[7]:null,[9]:k,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:E,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:r,[2]:E,[4]:ta},[4]:{[5]:na,
[8]:null,[10]:null,[6]:na,[1]:wa,[7]:null,[9]:null,[0]:null,[3]:ua,[2]:na,[4]:r},[1]:{[5]:Z,[8]:null,[10]:null,[6]:Z,[1]:r,[7]:null,[9]:null,[0]:null,[3]:V,[2]:Z,[4]:la},[7]:{[5]:null,[8]:N,[10]:null,[6]:null,[1]:null,[7]:r,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:K,[6]:null,[1]:null,[7]:null,[9]:r,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:r,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,
[6]:r,[1]:f,[7]:null,[9]:null,[0]:null,[3]:null,[2]:r,[4]:ma}},qa={spatialReference:null,spatialReferenceId:0},fb={spatialReference:null,spatialReferenceId:0},eb=Da(),db=Da(),a=A.deg2rad(1),ab=A.rad2deg(1),Ma=n.create(),ib=n.create(),lb=n.create(),Ra=n.create(),wb=n.create();e.canProjectToWGS84ComparableLonLat=function(S){if(I.isNone(S))return!1;S=Ca(S,qa);return!!Sa[S][6]};e.canProjectWithoutEngine=ia;e.computeLatLonToENURotation=Aa;e.computeLinearTransformation=function(S,ca,ea,oa){if(I.isNone(S)||
I.isNone(oa))return!1;var za=Ca(S,qa),Ea=Ca(oa,fb);if(za===Ea&&1!==Ea&&(0!==za||m.equals(S,oa)))return M.identity(ea),M.translate(ea,ea,ca),!0;if(1===Ea||7===Ea||9===Ea){oa=S=0;if(1===Ea){za=Sa[za][6];Ea=Sa[6][Ea];if(I.isNone(za)||I.isNone(Ea))return!1;za(ca,0,ib,0);Ea(ib,0,lb,0);S=a*ib[0];oa=a*ib[1]}else if(7===Ea||9===Ea){Ea=Sa[za][Ea];if(I.isNone(Ea))return!1;Ea(ca,0,lb,0);S=a*ca[0];oa=a*ca[1]}Aa(oa,S,ea);ea[12]=lb[0];ea[13]=lb[1];ea[14]=lb[2];return!0}if(3===Ea&&(2===za||1===za)){Ea=Sa[za][6];
if(I.isNone(Ea))return!1;Ea(ca,0,ib,0);ca=a*ib[1];xa(ib,0,lb,0);M.identity(ea);M.translate(ea,ea,lb);ca=1/Math.cos(ca);M.scale(ea,ea,[ca,ca,1]);return!0}return!1};e.getProjectorName=function(S,ca){switch(ya(S,ca,eb)){case r:return"copy3";case f:return"wgs84ToSphericalECEF";case xa:return"wgs84ToWebMercator";case ma:return"wgs84ToWGS84ECEF";case E:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case na:return"wgs84ECEFToWGS84";case wa:return"wgs84ECEFToSphericalECEF";
case ua:return"wgs84ECEFToWebMercator";case Z:return"sphericalECEFToWGS84";case V:return"sphericalECEFToWebMercator";case N:return"sphericalECEFToMars2000";case K:return"sphericalECEFToMoon2000";case la:return"sphericalECEFToWGS84ECEF";case R:return"mars2000ToSphericalPCPF";case k:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=T;e.getTransformations=function(S,ca,ea=null){if(I.isNone(Ga))throw new Ja;S=Ga._getTransformationBySuitability(Ha,S,ca,ea,null==ea?void 0:ea.spatialReference);
if(null!==S){ca=[];for(const oa of S)ca.push(Y.fromGE(oa));return ca}return[]};e.initializeProjection=async function(S,ca){if(!ka())for(const {source:ea,dest:oa,geographicTransformation:za}of S)if(!ia(ea,oa,za))return fa(ca)};e.isLoaded=ka;e.isSupported=function(){return!0};e.load=fa;e.localLinearScaleFactors=function(S,ca,ea,oa){if(I.isNone(ca)||I.isNone(oa))return!1;const za=Ca(ca,qa);var Ea=Ca(oa,fb);if(za===Ea&&0!==za||m.equals(ca,oa))return ea[0]=1,ea[1]=1,ea[2]=1,!0;if(1===za){ca=d.length(S);
S=ca/Math.sqrt(S[0]*S[0]+S[1]*S[1]);ca/=u.earth.radius;if(3===Ea)return ea[0]=S*ca,ea[1]=S*ca,ea[2]=1,!0;if(2===Ea||5===Ea)return Ea=180/(u.earth.radius*Math.PI),ea[0]=Ea*S*ca,ea[1]=Ea*ca,ea[2]=1,!0}return!1};e.lonLatToSphericalPCPF=function(S,ca,ea,oa,za=0){oa+=za;za=Math.cos(ea);S[0]=Math.cos(ca)*za*oa;S[1]=Math.sin(ca)*za*oa;S[2]=Math.sin(ea)*oa};e.project=function(S,ca,ea=null){return Array.isArray(S)?0===S.length?[]:J(Ha,S,S[0].spatialReference,ca,ea):J(Ha,[S],S.spatialReference,ca,ea)[0]};e.projectBoundingRect=
function(S,ca,ea,oa){if(null==S)return!1;if(m.equals(ca,oa))return F.set(ea,S),!0;Ma[0]=S[0];Ma[1]=S[1];Ma[2]=0;if(!pa(Ma,ca,0,Ma,oa,0,1))return!1;ea[0]=Ma[0];ea[1]=Ma[1];Ma[0]=S[2];Ma[1]=S[3];Ma[2]=0;if(!pa(Ma,ca,0,Ma,oa,0,1))return!1;ea[2]=Ma[0];ea[3]=Ma[1];return!0};e.projectBoundingSphere=function(S,ca,ea,oa){if(I.isNone(ca)||I.isNone(oa))return!1;ca=Ba(ca,oa,db);if(ca.projector===r)return ea[0]=S[0],ea[1]=S[1],ea[2]=S[2],ea[3]=S[3],!0;if(I.isNone(ca.projector))return!1;const {source:za,dest:Ea}=
ca;if(3===Ea.spatialReferenceId){ca=Sa[za.spatialReferenceId][2];if(I.isNone(ca))return!1;ca(S,0,ib,0);ca=Math.abs(a*ib[1])+Math.asin(S[3]/(u.earth.radius+S[2]));xa(ib,0,ea,0);ea[3]=ca>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ca)*S[3];return!0}ca.projector(S,0,ea,0);ea[3]=S[3]*za.metersPerUnit/Ea.metersPerUnit;return!0};e.projectBuffer=pa;e.projectDirection=function(S,ca,ea,oa,za){d.copy(Ra,S);d.add(wb,S,ca);X(Ra,ea,Ra,za);X(wb,ea,wb,za);d.subtract(oa,wb,Ra);d.normalize(oa,oa)};e.projectExtent=function(S,
ca,ea=ca.spatialReference,oa=0){return I.isNone(ea)?!1:C(S,S.spatialReference,ca,ea,oa)};e.projectMany=J;e.projectMultipoint=function(S,ca,ea=ca.spatialReference,oa=0){return I.isNone(ea)?!1:B(S,S.spatialReference,ca,ea,oa)};e.projectPoint=function(S,ca,ea=ca.spatialReference,oa=0){return I.isNone(ea)?!1:P(S,S.spatialReference,ca,ea,oa)};e.projectPointToVector=function(S,ca,ea,oa=0){Ra[0]=S.x;Ra[1]=S.y;const za=S.z;Ra[2]=void 0!==za?za:oa;return pa(Ra,S.spatialReference,0,ca,ea,0,1)};e.projectPointToWGS84ComparableLonLat=
function(S,ca){Ra[0]=S.x;Ra[1]=S.y;const ea=S.z;Ra[2]=void 0!==ea?ea:0;return ha(Ra,S.spatialReference,ca)};e.projectPolygon=function(S,ca,ea=ca.spatialReference,oa=0){return I.isNone(ea)?!1:H(S,S.spatialReference,ca,ea,oa)};e.projectPolyline=function(S,ca,ea=ca.spatialReference,oa=0){return I.isNone(ea)?!1:q(S,S.spatialReference,ca,ea,oa)};e.projectVectorToDehydratedPoint=function(S,ca,ea,oa){I.isNone(oa)&&(oa=ea.spatialReference);return pa(S,ca,0,Ra,oa,0,1)?(ea.x=Ra[0],ea.y=Ra[1],ea.z=Ra[2],ea.spatialReference=
oa,ea):null};e.projectVectorToPoint=function(S,ca,ea,oa){if(I.isNone(ca)||I.isNone(ea))return null;oa=I.isSome(oa)?oa:new v({spatialReference:ea});return pa(S,ca,0,Ra,ea,0,1)?(oa.x=Ra[0],oa.y=Ra[1],oa.z=Ra[2],oa.spatialReference=ea,oa):null};e.projectVectorToVector=X;e.projectVectorToWGS84ComparableLonLat=ha;e.projectXYZToVector=W;e.sphericalECEFToSphericalPCPF=w;e.unload=function(){Ka=Ha=Ga=null;Ia={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],
function(p){function e(){return[0,0,0]}function da(y){return[y[0],y[1],y[2]]}function I(y,M,O){return[y,M,O]}function t(y){const M=e(),O=Math.min(3,y.length);for(let F=0;F<O;++F)M[F]=y[F];return M}function G(y,M){return new Float64Array(y,M,3)}function m(){return e()}function u(){return[1,1,1]}function v(){return[1,0,0]}function D(){return[0,1,0]}function ja(){return[0,0,1]}const ba=e(),l=u(),A=v(),n=D(),d=ja();var g=Object.freeze({__proto__:null,create:e,clone:da,fromValues:I,fromArray:t,createView:G,
zeros:m,ones:u,unitX:v,unitY:D,unitZ:ja,ZEROS:ba,ONES:l,UNIT_X:A,UNIT_Y:n,UNIT_Z:d});p.ONES=l;p.UNIT_X=A;p.UNIT_Y=n;p.UNIT_Z=d;p.ZEROS=ba;p.clone=da;p.create=e;p.createView=G;p.fromArray=t;p.fromValues=I;p.ones=u;p.unitX=v;p.unitY=D;p.unitZ=ja;p.vec3f64=g;p.zeros=m})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(p,e,da){function I(r){const E=r[0],aa=r[1];r=r[2];return Math.sqrt(E*E+aa*aa+r*r)}function t(r,E){r[0]=E[0];r[1]=E[1];r[2]=E[2];return r}function G(r,E,
aa,ta){r[0]=E;r[1]=aa;r[2]=ta;return r}function m(r,E,aa){r[0]=E[0]+aa[0];r[1]=E[1]+aa[1];r[2]=E[2]+aa[2];return r}function u(r,E,aa){r[0]=E[0]-aa[0];r[1]=E[1]-aa[1];r[2]=E[2]-aa[2];return r}function v(r,E,aa){r[0]=E[0]*aa[0];r[1]=E[1]*aa[1];r[2]=E[2]*aa[2];return r}function D(r,E,aa){r[0]=E[0]/aa[0];r[1]=E[1]/aa[1];r[2]=E[2]/aa[2];return r}function ja(r,E){r[0]=Math.ceil(E[0]);r[1]=Math.ceil(E[1]);r[2]=Math.ceil(E[2]);return r}function ba(r,E){r[0]=Math.floor(E[0]);r[1]=Math.floor(E[1]);r[2]=Math.floor(E[2]);
return r}function l(r,E,aa){r[0]=Math.min(E[0],aa[0]);r[1]=Math.min(E[1],aa[1]);r[2]=Math.min(E[2],aa[2]);return r}function A(r,E,aa){r[0]=Math.max(E[0],aa[0]);r[1]=Math.max(E[1],aa[1]);r[2]=Math.max(E[2],aa[2]);return r}function n(r,E){r[0]=Math.round(E[0]);r[1]=Math.round(E[1]);r[2]=Math.round(E[2]);return r}function d(r,E,aa){r[0]=E[0]*aa;r[1]=E[1]*aa;r[2]=E[2]*aa;return r}function g(r,E,aa,ta){r[0]=E[0]+aa[0]*ta;r[1]=E[1]+aa[1]*ta;r[2]=E[2]+aa[2]*ta;return r}function y(r,E){const aa=E[0]-r[0],
ta=E[1]-r[1];r=E[2]-r[2];return Math.sqrt(aa*aa+ta*ta+r*r)}function M(r,E){const aa=E[0]-r[0],ta=E[1]-r[1];r=E[2]-r[2];return aa*aa+ta*ta+r*r}function O(r){const E=r[0],aa=r[1];r=r[2];return E*E+aa*aa+r*r}function F(r,E){r[0]=-E[0];r[1]=-E[1];r[2]=-E[2];return r}function L(r,E){r[0]=1/E[0];r[1]=1/E[1];r[2]=1/E[2];return r}function Y(r,E){var aa=E[0];const ta=E[1],xa=E[2];aa=aa*aa+ta*ta+xa*xa;0<aa&&(aa=1/Math.sqrt(aa),r[0]=E[0]*aa,r[1]=E[1]*aa,r[2]=E[2]*aa);return r}function ka(r,E){return r[0]*E[0]+
r[1]*E[1]+r[2]*E[2]}function fa(r,E,aa){const ta=E[0],xa=E[1];E=E[2];const b=aa[0],k=aa[1];aa=aa[2];r[0]=xa*aa-E*k;r[1]=E*b-ta*aa;r[2]=ta*k-xa*b;return r}function J(r,E,aa,ta){const xa=E[0],b=E[1];E=E[2];r[0]=xa+ta*(aa[0]-xa);r[1]=b+ta*(aa[1]-b);r[2]=E+ta*(aa[2]-E);return r}function T(r,E,aa,ta,xa,b){const k=b*b,R=k*(2*b-3)+1,f=k*(b-2)+b,w=k*(b-1);b=k*(3-2*b);r[0]=E[0]*R+aa[0]*f+ta[0]*w+xa[0]*b;r[1]=E[1]*R+aa[1]*f+ta[1]*w+xa[1]*b;r[2]=E[2]*R+aa[2]*f+ta[2]*w+xa[2]*b;return r}function ia(r,E,aa,ta,
xa,b){var k=1-b,R=k*k;const f=b*b,w=R*k;R*=3*b;k*=3*f;b*=f;r[0]=E[0]*w+aa[0]*R+ta[0]*k+xa[0]*b;r[1]=E[1]*w+aa[1]*R+ta[1]*k+xa[1]*b;r[2]=E[2]*w+aa[2]*R+ta[2]*k+xa[2]*b;return r}function Q(r,E){E=E||1;const aa=2*da.RANDOM()*Math.PI,ta=2*da.RANDOM()-1,xa=Math.sqrt(1-ta*ta)*E;r[0]=Math.cos(aa)*xa;r[1]=Math.sin(aa)*xa;r[2]=ta*E;return r}function P(r,E,aa){const ta=E[0],xa=E[1];E=E[2];r[0]=aa[0]*ta+aa[4]*xa+aa[8]*E+aa[12];r[1]=aa[1]*ta+aa[5]*xa+aa[9]*E+aa[13];r[2]=aa[2]*ta+aa[6]*xa+aa[10]*E+aa[14];return r}
function B(r,E,aa){const ta=E[0],xa=E[1];E=E[2];r[0]=ta*aa[0]+xa*aa[3]+E*aa[6];r[1]=ta*aa[1]+xa*aa[4]+E*aa[7];r[2]=ta*aa[2]+xa*aa[5]+E*aa[8];return r}function q(r,E,aa){const ta=aa[0],xa=aa[1],b=aa[2],k=E[0],R=E[1];E=E[2];let f=xa*E-b*R,w=b*k-ta*E,K=ta*R-xa*k;aa=2*aa[3];r[0]=k+f*aa+2*(xa*K-b*w);r[1]=R+w*aa+2*(b*f-ta*K);r[2]=E+K*aa+2*(ta*w-xa*f);return r}function H(r,E,aa,ta){const xa=[],b=[];xa[0]=E[0]-aa[0];xa[1]=E[1]-aa[1];xa[2]=E[2]-aa[2];b[0]=xa[0];b[1]=xa[1]*Math.cos(ta)-xa[2]*Math.sin(ta);b[2]=
xa[1]*Math.sin(ta)+xa[2]*Math.cos(ta);r[0]=b[0]+aa[0];r[1]=b[1]+aa[1];r[2]=b[2]+aa[2];return r}function C(r,E,aa,ta){const xa=[],b=[];xa[0]=E[0]-aa[0];xa[1]=E[1]-aa[1];xa[2]=E[2]-aa[2];b[0]=xa[2]*Math.sin(ta)+xa[0]*Math.cos(ta);b[1]=xa[1];b[2]=xa[2]*Math.cos(ta)-xa[0]*Math.sin(ta);r[0]=b[0]+aa[0];r[1]=b[1]+aa[1];r[2]=b[2]+aa[2];return r}function W(r,E,aa,ta){const xa=[],b=[];xa[0]=E[0]-aa[0];xa[1]=E[1]-aa[1];xa[2]=E[2]-aa[2];b[0]=xa[0]*Math.cos(ta)-xa[1]*Math.sin(ta);b[1]=xa[0]*Math.sin(ta)+xa[1]*
Math.cos(ta);b[2]=xa[2];r[0]=b[0]+aa[0];r[1]=b[1]+aa[1];r[2]=b[2]+aa[2];return r}function X(r,E){t(Aa,r);t(Ca,E);Y(Aa,Aa);Y(Ca,Ca);r=ka(Aa,Ca);return 1<r?0:-1>r?Math.PI:Math.acos(r)}function ha(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function pa(r,E){return r[0]===E[0]&&r[1]===E[1]&&r[2]===E[2]}function ra(r,E){const aa=r[0],ta=r[1];r=r[2];const xa=E[0],b=E[1];E=E[2];return Math.abs(aa-xa)<=da.EPSILON*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ta-b)<=da.EPSILON*Math.max(1,Math.abs(ta),
Math.abs(b))&&Math.abs(r-E)<=da.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))}const Aa=e.create(),Ca=e.create();e=Object.freeze({__proto__:null,length:I,copy:t,set:G,add:m,subtract:u,multiply:v,divide:D,ceil:ja,floor:ba,min:l,max:A,round:n,scale:d,scaleAndAdd:g,distance:y,squaredDistance:M,squaredLength:O,negate:F,inverse:L,normalize:Y,dot:ka,cross:fa,lerp:J,hermite:T,bezier:ia,random:Q,transformMat4:P,transformMat3:B,transformQuat:q,rotateX:H,rotateY:C,rotateZ:W,angle:X,str:ha,exactEquals:pa,equals:ra,
sub:u,mul:v,div:D,dist:y,sqrDist:M,len:I,sqrLen:O});p.add=m;p.angle=X;p.bezier=ia;p.ceil=ja;p.copy=t;p.cross=fa;p.dist=y;p.distance=y;p.div=D;p.divide=D;p.dot=ka;p.equals=ra;p.exactEquals=pa;p.floor=ba;p.hermite=T;p.inverse=L;p.len=I;p.length=I;p.lerp=J;p.max=A;p.min=l;p.mul=v;p.multiply=v;p.negate=F;p.normalize=Y;p.random=Q;p.rotateX=H;p.rotateY=C;p.rotateZ=W;p.round=n;p.scale=d;p.scaleAndAdd=g;p.set=G;p.sqrDist=M;p.sqrLen=O;p.squaredDistance=M;p.squaredLength=O;p.str=ha;p.sub=u;p.subtract=u;p.transformMat3=
B;p.transformMat4=P;p.transformQuat=q;p.vec3=e})},"esri/chunks/common":function(){define(["exports"],function(p){function e(v){return v*G}function da(v){return v*m}function I(v,D){return Math.abs(v-D)<=1E-6*Math.max(1,Math.abs(v),Math.abs(D))}const t=Math.random,G=Math.PI/180,m=180/Math.PI;var u=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:t,toRadian:e,toDegree:da,equals:I});p.EPSILON=1E-6;p.RANDOM=t;p.common=u;p.equals=I;p.toDegree=da;p.toRadian=e})},"esri/geometry/projectionEllipsoid":function(){define(["exports",
"./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(p,e,da,I){function t(D){return new da({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${D.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const G=t(I.earth),m=t(I.mars),u=t(I.moon),v=new da({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${I.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});p.SphericalECEFSpatialReference=G;p.SphericalPCPFMars=m;p.SphericalPCPFMoon=u;p.WGS84ECEFSpatialReference=v;p.createSphericalPCPF=t;p.getReferenceEllipsoid=function(D){return D&&(e.isMars(D)||D===m)?I.mars:D&&(e.isMoon(D)||D===u)?I.moon:I.earth};p.getReferenceEllipsoidFromWKID=function(D){return e.isWKIDFromMars(D)?I.mars:e.isWKIDFromMoon(D)?I.moon:I.earth};p.getSphericalPCPF=function(D){return D&&(e.isMars(D)||D===m)?m:D&&(e.isMoon(D)||D===u)?u:G};p.getSphericalPCPFForEllipsoid=function(D){return D&&
D===I.mars?m:D&&D===I.moon?u:G};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(p,e,da,I,t,G,m,u){function v(Q){if(Q=ia[Q])return Q;throw Error("unknown measure");}function D(Q){return T[Q].baseUnit}function ja(Q,P=null){P=P||v(Q);return T[P].baseUnit===
Q}function ba(Q,P,B){if(P===B)return Q;const q=v(P);if(q!==v(B))throw Error("incompatible units");Q=ja(P,q)?Q:Q*T[q].units[P].inBaseUnits;return ja(B,q)?Q:Q/T[q].units[B].inBaseUnits}function l(Q,P){return 3E3>ba(Q,P,"meters")?"meters":"kilometers"}function A(Q,P){return 1E5>ba(Q,P,"meters")?"meters":"kilometers"}function n(Q,P){return 1E3>ba(Q,P,"feet")?"feet":"miles"}function d(Q,P){return 1E5>ba(Q,P,"feet")?"feet":"miles"}function g(Q){return J.fromJSON(Q.toLowerCase())||null}function y(Q,P=m.earth.metersPerDegree){return M(Q,
!0)||P}function M(Q,P=!1){let B,q,H=null;null!=Q&&("object"===typeof Q?(B=Q.wkid,q=Q.wkt):"number"===typeof Q?B=Q:"string"===typeof Q&&(q=Q));if(B){if(t.isWKIDFromMars(B))return m.mars.metersPerDegree;if(t.isWKIDFromMoon(B))return m.moon.metersPerDegree;H=Y.values[Y[B]];!H&&P&&fa.has(B)&&(H=F)}else q&&(-1!==q.search(/^PROJCS/i)?(Q=L.exec(q))&&Q[1]&&(H=parseFloat(Q[1].split(",")[1])):-1!==q.search(/^GEOCCS/i)&&(Q=ka.exec(q))&&Q[1]&&(H=parseFloat(Q[1].split(",")[1])));return H}function O(Q){let P,B,
q=null;null!=Q&&("object"===typeof Q?(P=Q.wkid,B=Q.wkt):"number"===typeof Q?P=Q:"string"===typeof Q&&(B=Q));P?q=Y.units[Y[P]]:B&&-1!==B.search(/^PROJCS/i)&&(Q=L.exec(B))&&Q[1]&&(q=(Q=/[\\"\\']{1}([^\\"\\']+)/.exec(Q[1]))&&Q[1]);return q?g(q):null}const F=m.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,Y=I,ka=/UNIT\[([^\]]+)\]/i,fa=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),J=da.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};da={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(Q=>Q*Q)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const T={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:da},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},ia=function(){const Q={};for(const P in T)for(const B in T[P].units)Q[B]=P;return Q}();p.baseUnitForMeasure=D;p.baseUnitForUnit=function(Q){return D(v(Q))};p.convertUnit=ba;p.getDefaultUnitSystem=function(Q){if(!Q)return null;switch(O(Q)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};p.getMetersPerUnit=M;p.getMetersPerUnitForSR=y;p.getMetersPerVerticalUnitForSR=function(Q){if(Q&&"object"===typeof Q&&!t.isEarth(Q))return 1;Q=y(Q);return 1E5<Q?1:Q};p.getUnitString=O;p.getVerticalUnitStringForSR=function(Q){const P=y(Q),B=Q instanceof G?u.getReferenceEllipsoid(Q).metersPerDegree:1E5;return P>=B?"meters":O(Q)};p.inchesPerMeter=39.37;p.isBaseUnit=ja;p.isMeasurementSystem=function(Q){return"imperial"===
Q||"metric"===Q};p.lengthToDegrees=function(Q,P,B){return ba(Q,P,"meters")/(B*Math.PI/180)};p.measureForUnit=v;p.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");p.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");p.preferredImperialAreaUnit=function(Q,P){return 1E6>ba(Q,P,"square-feet")?"square-feet":"square-miles"};
p.preferredImperialLengthUnit=n;p.preferredImperialVerticalLengthUnit=d;p.preferredLengthUnit=function(Q,P,B){switch(B){case "metric":return l(Q,P);case "imperial":return n(Q,P);default:return B}};p.preferredMetricAreaUnit=function(Q,P){return 3E6>ba(Q,P,"square-meters")?"square-meters":"square-kilometers"};p.preferredMetricLengthUnit=l;p.preferredMetricVerticalLengthUnit=A;p.preferredVerticalLengthUnit=function(Q,P,B){switch(B){case "metric":return A(Q,P);case "imperial":return d(Q,P);default:return B}};
p.unitFromRESTJSON=g;p.unitToRESTJSON=function(Q){return J.toJSON(Q)||null};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(p,e,da){function I(b,k){b[0]=k[0];b[1]=k[1];b[2]=k[2];b[3]=k[3];b[4]=k[4];b[5]=k[5];b[6]=k[6];b[7]=k[7];b[8]=k[8];b[9]=k[9];b[10]=k[10];b[11]=k[11];b[12]=k[12];b[13]=k[13];b[14]=k[14];b[15]=k[15];return b}function t(b,k,R,f,w,K,N,Z,V,la,ma,na,wa,ua,ya,Ba,Da){b[0]=k;b[1]=R;b[2]=f;b[3]=w;b[4]=
K;b[5]=N;b[6]=Z;b[7]=V;b[8]=la;b[9]=ma;b[10]=na;b[11]=wa;b[12]=ua;b[13]=ya;b[14]=Ba;b[15]=Da;return b}function G(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function m(b,k){if(b===k){const R=k[1],f=k[2],w=k[3],K=k[6],N=k[7],Z=k[11];b[1]=k[4];b[2]=k[8];b[3]=k[12];b[4]=R;b[6]=k[9];b[7]=k[13];b[8]=f;b[9]=K;b[11]=k[14];b[12]=w;b[13]=N;b[14]=Z}else b[0]=k[0],b[1]=k[4],b[2]=k[8],b[3]=k[12],b[4]=k[1],b[5]=k[5],b[6]=k[9],
b[7]=k[13],b[8]=k[2],b[9]=k[6],b[10]=k[10],b[11]=k[14],b[12]=k[3],b[13]=k[7],b[14]=k[11],b[15]=k[15];return b}function u(b,k){const R=k[0],f=k[1],w=k[2],K=k[3],N=k[4],Z=k[5],V=k[6],la=k[7],ma=k[8],na=k[9],wa=k[10],ua=k[11],ya=k[12],Ba=k[13],Da=k[14];k=k[15];const Ga=R*Z-f*N,Ha=R*V-w*N,Ka=R*la-K*N,Ia=f*V-w*Z,Ja=f*la-K*Z,Sa=w*la-K*V,qa=ma*Ba-na*ya,fb=ma*Da-wa*ya,eb=ma*k-ua*ya,db=na*Da-wa*Ba,a=na*k-ua*Ba,ab=wa*k-ua*Da;let Ma=Ga*ab-Ha*a+Ka*db+Ia*eb-Ja*fb+Sa*qa;if(!Ma)return null;Ma=1/Ma;b[0]=(Z*ab-V*
a+la*db)*Ma;b[1]=(w*a-f*ab-K*db)*Ma;b[2]=(Ba*Sa-Da*Ja+k*Ia)*Ma;b[3]=(wa*Ja-na*Sa-ua*Ia)*Ma;b[4]=(V*eb-N*ab-la*fb)*Ma;b[5]=(R*ab-w*eb+K*fb)*Ma;b[6]=(Da*Ka-ya*Sa-k*Ha)*Ma;b[7]=(ma*Sa-wa*Ka+ua*Ha)*Ma;b[8]=(N*a-Z*eb+la*qa)*Ma;b[9]=(f*eb-R*a-K*qa)*Ma;b[10]=(ya*Ja-Ba*Ka+k*Ga)*Ma;b[11]=(na*Ka-ma*Ja-ua*Ga)*Ma;b[12]=(Z*fb-N*db-V*qa)*Ma;b[13]=(R*db-f*fb+w*qa)*Ma;b[14]=(Ba*Ha-ya*Ia-Da*Ga)*Ma;b[15]=(ma*Ia-na*Ha+wa*Ga)*Ma;return b}function v(b,k){const R=k[0],f=k[1],w=k[2],K=k[3],N=k[4],Z=k[5],V=k[6],la=k[7],
ma=k[8],na=k[9],wa=k[10],ua=k[11],ya=k[12],Ba=k[13],Da=k[14];k=k[15];b[0]=Z*(wa*k-ua*Da)-na*(V*k-la*Da)+Ba*(V*ua-la*wa);b[1]=-(f*(wa*k-ua*Da)-na*(w*k-K*Da)+Ba*(w*ua-K*wa));b[2]=f*(V*k-la*Da)-Z*(w*k-K*Da)+Ba*(w*la-K*V);b[3]=-(f*(V*ua-la*wa)-Z*(w*ua-K*wa)+na*(w*la-K*V));b[4]=-(N*(wa*k-ua*Da)-ma*(V*k-la*Da)+ya*(V*ua-la*wa));b[5]=R*(wa*k-ua*Da)-ma*(w*k-K*Da)+ya*(w*ua-K*wa);b[6]=-(R*(V*k-la*Da)-N*(w*k-K*Da)+ya*(w*la-K*V));b[7]=R*(V*ua-la*wa)-N*(w*ua-K*wa)+ma*(w*la-K*V);b[8]=N*(na*k-ua*Ba)-ma*(Z*k-la*Ba)+
ya*(Z*ua-la*na);b[9]=-(R*(na*k-ua*Ba)-ma*(f*k-K*Ba)+ya*(f*ua-K*na));b[10]=R*(Z*k-la*Ba)-N*(f*k-K*Ba)+ya*(f*la-K*Z);b[11]=-(R*(Z*ua-la*na)-N*(f*ua-K*na)+ma*(f*la-K*Z));b[12]=-(N*(na*Da-wa*Ba)-ma*(Z*Da-V*Ba)+ya*(Z*wa-V*na));b[13]=R*(na*Da-wa*Ba)-ma*(f*Da-w*Ba)+ya*(f*wa-w*na);b[14]=-(R*(Z*Da-V*Ba)-N*(f*Da-w*Ba)+ya*(f*V-w*Z));b[15]=R*(Z*wa-V*na)-N*(f*wa-w*na)+ma*(f*V-w*Z);return b}function D(b){const k=b[0],R=b[1],f=b[2],w=b[3],K=b[4],N=b[5],Z=b[6],V=b[7],la=b[8],ma=b[9],na=b[10],wa=b[11],ua=b[12],ya=
b[13],Ba=b[14];b=b[15];return(k*N-R*K)*(na*b-wa*Ba)-(k*Z-f*K)*(ma*b-wa*ya)+(k*V-w*K)*(ma*Ba-na*ya)+(R*Z-f*N)*(la*b-wa*ua)-(R*V-w*N)*(la*Ba-na*ua)+(f*V-w*Z)*(la*ya-ma*ua)}function ja(b,k,R){const f=k[0],w=k[1],K=k[2],N=k[3],Z=k[4],V=k[5],la=k[6],ma=k[7],na=k[8],wa=k[9],ua=k[10],ya=k[11],Ba=k[12],Da=k[13],Ga=k[14];k=k[15];let Ha=R[0],Ka=R[1],Ia=R[2],Ja=R[3];b[0]=Ha*f+Ka*Z+Ia*na+Ja*Ba;b[1]=Ha*w+Ka*V+Ia*wa+Ja*Da;b[2]=Ha*K+Ka*la+Ia*ua+Ja*Ga;b[3]=Ha*N+Ka*ma+Ia*ya+Ja*k;Ha=R[4];Ka=R[5];Ia=R[6];Ja=R[7];b[4]=
Ha*f+Ka*Z+Ia*na+Ja*Ba;b[5]=Ha*w+Ka*V+Ia*wa+Ja*Da;b[6]=Ha*K+Ka*la+Ia*ua+Ja*Ga;b[7]=Ha*N+Ka*ma+Ia*ya+Ja*k;Ha=R[8];Ka=R[9];Ia=R[10];Ja=R[11];b[8]=Ha*f+Ka*Z+Ia*na+Ja*Ba;b[9]=Ha*w+Ka*V+Ia*wa+Ja*Da;b[10]=Ha*K+Ka*la+Ia*ua+Ja*Ga;b[11]=Ha*N+Ka*ma+Ia*ya+Ja*k;Ha=R[12];Ka=R[13];Ia=R[14];Ja=R[15];b[12]=Ha*f+Ka*Z+Ia*na+Ja*Ba;b[13]=Ha*w+Ka*V+Ia*wa+Ja*Da;b[14]=Ha*K+Ka*la+Ia*ua+Ja*Ga;b[15]=Ha*N+Ka*ma+Ia*ya+Ja*k;return b}function ba(b,k,R){const f=R[0],w=R[1];R=R[2];let K=void 0,N=void 0,Z=void 0,V=void 0,la=void 0,
ma=void 0,na=void 0,wa=void 0,ua=void 0,ya=void 0,Ba=void 0,Da=void 0;k===b?(b[12]=k[0]*f+k[4]*w+k[8]*R+k[12],b[13]=k[1]*f+k[5]*w+k[9]*R+k[13],b[14]=k[2]*f+k[6]*w+k[10]*R+k[14],b[15]=k[3]*f+k[7]*w+k[11]*R+k[15]):(K=k[0],N=k[1],Z=k[2],V=k[3],la=k[4],ma=k[5],na=k[6],wa=k[7],ua=k[8],ya=k[9],Ba=k[10],Da=k[11],b[0]=K,b[1]=N,b[2]=Z,b[3]=V,b[4]=la,b[5]=ma,b[6]=na,b[7]=wa,b[8]=ua,b[9]=ya,b[10]=Ba,b[11]=Da,b[12]=K*f+la*w+ua*R+k[12],b[13]=N*f+ma*w+ya*R+k[13],b[14]=Z*f+na*w+Ba*R+k[14],b[15]=V*f+wa*w+Da*R+k[15]);
return b}function l(b,k,R){const f=R[0],w=R[1];R=R[2];b[0]=k[0]*f;b[1]=k[1]*f;b[2]=k[2]*f;b[3]=k[3]*f;b[4]=k[4]*w;b[5]=k[5]*w;b[6]=k[6]*w;b[7]=k[7]*w;b[8]=k[8]*R;b[9]=k[9]*R;b[10]=k[10]*R;b[11]=k[11]*R;b[12]=k[12];b[13]=k[13];b[14]=k[14];b[15]=k[15];return b}function A(b,k,R,f){let w=f[0],K=f[1];f=f[2];let N=Math.sqrt(w*w+K*K+f*f);var Z=void 0,V=void 0;let la=void 0,ma=void 0,na=void 0,wa=void 0,ua=void 0,ya=void 0,Ba=void 0,Da=void 0,Ga=void 0,Ha=void 0,Ka=void 0,Ia=void 0,Ja=void 0,Sa=void 0,qa=
void 0,fb=void 0,eb=void 0,db=void 0,a=void 0,ab=void 0;V=Z=void 0;if(N<da.EPSILON)return null;N=1/N;w*=N;K*=N;f*=N;Z=Math.sin(R);V=Math.cos(R);la=1-V;ma=k[0];na=k[1];wa=k[2];ua=k[3];ya=k[4];Ba=k[5];Da=k[6];Ga=k[7];Ha=k[8];Ka=k[9];Ia=k[10];Ja=k[11];Sa=w*w*la+V;qa=K*w*la+f*Z;fb=f*w*la-K*Z;eb=w*K*la-f*Z;db=K*K*la+V;a=f*K*la+w*Z;ab=w*f*la+K*Z;Z=K*f*la-w*Z;V=f*f*la+V;b[0]=ma*Sa+ya*qa+Ha*fb;b[1]=na*Sa+Ba*qa+Ka*fb;b[2]=wa*Sa+Da*qa+Ia*fb;b[3]=ua*Sa+Ga*qa+Ja*fb;b[4]=ma*eb+ya*db+Ha*a;b[5]=na*eb+Ba*db+Ka*a;
b[6]=wa*eb+Da*db+Ia*a;b[7]=ua*eb+Ga*db+Ja*a;b[8]=ma*ab+ya*Z+Ha*V;b[9]=na*ab+Ba*Z+Ka*V;b[10]=wa*ab+Da*Z+Ia*V;b[11]=ua*ab+Ga*Z+Ja*V;k!==b&&(b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);return b}function n(b,k,R){const f=Math.sin(R);R=Math.cos(R);const w=k[4],K=k[5],N=k[6],Z=k[7],V=k[8],la=k[9],ma=k[10],na=k[11];k!==b&&(b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[4]=w*R+V*f;b[5]=K*R+la*f;b[6]=N*R+ma*f;b[7]=Z*R+na*f;b[8]=V*R-w*f;b[9]=la*R-K*f;b[10]=ma*
R-N*f;b[11]=na*R-Z*f;return b}function d(b,k,R){const f=Math.sin(R);R=Math.cos(R);const w=k[0],K=k[1],N=k[2],Z=k[3],V=k[8],la=k[9],ma=k[10],na=k[11];k!==b&&(b[4]=k[4],b[5]=k[5],b[6]=k[6],b[7]=k[7],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[0]=w*R-V*f;b[1]=K*R-la*f;b[2]=N*R-ma*f;b[3]=Z*R-na*f;b[8]=w*f+V*R;b[9]=K*f+la*R;b[10]=N*f+ma*R;b[11]=Z*f+na*R;return b}function g(b,k,R){const f=Math.sin(R);R=Math.cos(R);const w=k[0],K=k[1],N=k[2],Z=k[3],V=k[4],la=k[5],ma=k[6],na=k[7];k!==b&&(b[8]=k[8],
b[9]=k[9],b[10]=k[10],b[11]=k[11],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]);b[0]=w*R+V*f;b[1]=K*R+la*f;b[2]=N*R+ma*f;b[3]=Z*R+na*f;b[4]=V*R-w*f;b[5]=la*R-K*f;b[6]=ma*R-N*f;b[7]=na*R-Z*f;return b}function y(b,k){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=k[0];b[13]=k[1];b[14]=k[2];b[15]=1;return b}function M(b,k){b[0]=k[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=k[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}
function O(b,k,R){let f=R[0],w=R[1];R=R[2];let K=Math.sqrt(f*f+w*w+R*R),N=void 0,Z=void 0,V=void 0;if(K<da.EPSILON)return null;K=1/K;f*=K;w*=K;R*=K;N=Math.sin(k);Z=Math.cos(k);V=1-Z;b[0]=f*f*V+Z;b[1]=w*f*V+R*N;b[2]=R*f*V-w*N;b[3]=0;b[4]=f*w*V-R*N;b[5]=w*w*V+Z;b[6]=R*w*V+f*N;b[7]=0;b[8]=f*R*V+w*N;b[9]=w*R*V-f*N;b[10]=R*R*V+Z;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function F(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=R;b[7]=0;b[8]=0;b[9]=-R;b[10]=
k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function L(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=k;b[1]=0;b[2]=-R;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=R;b[9]=0;b[10]=k;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function Y(b,k){const R=Math.sin(k);k=Math.cos(k);b[0]=k;b[1]=R;b[2]=0;b[3]=0;b[4]=-R;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ka(b,k,R){var f=k[0],w=k[1],K=k[2],N=k[3],Z=f+f,V=w+w;const la=K+K;k=f*Z;const ma=f*V;
f*=la;const na=w*V;w*=la;K*=la;Z*=N;V*=N;N*=la;b[0]=1-(na+K);b[1]=ma+N;b[2]=f-V;b[3]=0;b[4]=ma-N;b[5]=1-(k+K);b[6]=w+Z;b[7]=0;b[8]=f+V;b[9]=w-Z;b[10]=1-(k+na);b[11]=0;b[12]=R[0];b[13]=R[1];b[14]=R[2];b[15]=1;return b}function fa(b,k){const R=xa,f=-k[0],w=-k[1],K=-k[2],N=k[3],Z=k[4],V=k[5],la=k[6],ma=k[7],na=f*f+w*w+K*K+N*N;0<na?(R[0]=2*(Z*N+ma*f+V*K-la*w)/na,R[1]=2*(V*N+ma*w+la*f-Z*K)/na,R[2]=2*(la*N+ma*K+Z*w-V*f)/na):(R[0]=2*(Z*N+ma*f+V*K-la*w),R[1]=2*(V*N+ma*w+la*f-Z*K),R[2]=2*(la*N+ma*K+Z*w-V*
f));ka(b,k,R);return b}function J(b,k){b[0]=k[12];b[1]=k[13];b[2]=k[14];return b}function T(b,k){const R=k[0],f=k[1],w=k[2],K=k[4],N=k[5],Z=k[6],V=k[8],la=k[9];k=k[10];b[0]=Math.sqrt(R*R+f*f+w*w);b[1]=Math.sqrt(K*K+N*N+Z*Z);b[2]=Math.sqrt(V*V+la*la+k*k);return b}function ia(b,k){const R=k[0]+k[5]+k[10];let f=0;0<R?(f=2*Math.sqrt(R+1),b[3]=.25*f,b[0]=(k[6]-k[9])/f,b[1]=(k[8]-k[2])/f,b[2]=(k[1]-k[4])/f):k[0]>k[5]&&k[0]>k[10]?(f=2*Math.sqrt(1+k[0]-k[5]-k[10]),b[3]=(k[6]-k[9])/f,b[0]=.25*f,b[1]=(k[1]+
k[4])/f,b[2]=(k[8]+k[2])/f):k[5]>k[10]?(f=2*Math.sqrt(1+k[5]-k[0]-k[10]),b[3]=(k[8]-k[2])/f,b[0]=(k[1]+k[4])/f,b[1]=.25*f,b[2]=(k[6]+k[9])/f):(f=2*Math.sqrt(1+k[10]-k[0]-k[5]),b[3]=(k[1]-k[4])/f,b[0]=(k[8]+k[2])/f,b[1]=(k[6]+k[9])/f,b[2]=.25*f);return b}function Q(b,k,R,f){var w=k[0],K=k[1],N=k[2],Z=k[3],V=w+w,la=K+K,ma=N+N;k=w*V;const na=w*la;w*=ma;const wa=K*la;K*=ma;N*=ma;V*=Z;la*=Z;Z*=ma;ma=f[0];const ua=f[1];f=f[2];b[0]=(1-(wa+N))*ma;b[1]=(na+Z)*ma;b[2]=(w-la)*ma;b[3]=0;b[4]=(na-Z)*ua;b[5]=(1-
(k+N))*ua;b[6]=(K+V)*ua;b[7]=0;b[8]=(w+la)*f;b[9]=(K-V)*f;b[10]=(1-(k+wa))*f;b[11]=0;b[12]=R[0];b[13]=R[1];b[14]=R[2];b[15]=1;return b}function P(b,k,R,f,w){var K=k[0],N=k[1],Z=k[2],V=k[3],la=K+K,ma=N+N,na=Z+Z;k=K*la;var wa=K*ma,ua=K*na;K=N*ma;N*=na;var ya=Z*na;Z=V*la;ma*=V;const Ba=V*na;var Da=f[0],Ga=f[1];na=f[2];f=w[0];V=w[1];w=w[2];la=(1-(K+ya))*Da;const Ha=(wa+Ba)*Da;Da*=ua-ma;wa=(wa-Ba)*Ga;ya=(1-(k+ya))*Ga;Ga*=N+Z;ua=(ua+ma)*na;N=(N-Z)*na;k=(1-(k+K))*na;b[0]=la;b[1]=Ha;b[2]=Da;b[3]=0;b[4]=wa;
b[5]=ya;b[6]=Ga;b[7]=0;b[8]=ua;b[9]=N;b[10]=k;b[11]=0;b[12]=R[0]+f-(la*f+wa*V+ua*w);b[13]=R[1]+V-(Ha*f+ya*V+N*w);b[14]=R[2]+w-(Da*f+Ga*V+k*w);b[15]=1;return b}function B(b,k){var R=k[0],f=k[1],w=k[2];k=k[3];var K=R+R,N=f+f;const Z=w+w;R*=K;const V=f*K;f*=N;const la=w*K,ma=w*N;w*=Z;K*=k;N*=k;k*=Z;b[0]=1-f-w;b[1]=V+k;b[2]=la-N;b[3]=0;b[4]=V-k;b[5]=1-R-w;b[6]=ma+K;b[7]=0;b[8]=la+N;b[9]=ma-K;b[10]=1-R-f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function q(b,k,R,f,w,K,N){const Z=1/(R-k),V=1/(w-
f),la=1/(K-N);b[0]=2*K*Z;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*K*V;b[6]=0;b[7]=0;b[8]=(R+k)*Z;b[9]=(w+f)*V;b[10]=(N+K)*la;b[11]=-1;b[12]=0;b[13]=0;b[14]=N*K*2*la;b[15]=0;return b}function H(b,k,R,f,w){k=1/Math.tan(k/2);let K=void 0;b[0]=k/R;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=w&&Infinity!==w?(K=1/(f-w),b[10]=(w+f)*K,b[14]=2*w*f*K):(b[10]=-1,b[14]=-2*f);return b}function C(b,k,R,f){const w=Math.tan(k.upDegrees*Math.PI/180),K=Math.tan(k.downDegrees*
Math.PI/180),N=Math.tan(k.leftDegrees*Math.PI/180);k=Math.tan(k.rightDegrees*Math.PI/180);const Z=2/(N+k),V=2/(w+K);b[0]=Z;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=V;b[6]=0;b[7]=0;b[8]=-((N-k)*Z*.5);b[9]=(w-K)*V*.5;b[10]=f/(R-f);b[11]=-1;b[12]=0;b[13]=0;b[14]=f*R/(R-f);b[15]=0;return b}function W(b,k,R,f,w,K,N){const Z=1/(k-R),V=1/(f-w),la=1/(K-N);b[0]=-2*Z;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*V;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*la;b[11]=0;b[12]=(k+R)*Z;b[13]=(w+f)*V;b[14]=(N+K)*la;b[15]=1;return b}function X(b,
k,R,f){let w=void 0,K=void 0;var N=void 0,Z=void 0;let V=void 0,la=void 0;var ma=void 0,na=void 0;let wa=void 0,ua=void 0;const ya=k[0],Ba=k[1];k=k[2];N=f[0];Z=f[1];f=f[2];ma=R[0];na=R[1];R=R[2];if(Math.abs(ya-ma)<da.EPSILON&&Math.abs(Ba-na)<da.EPSILON&&Math.abs(k-R)<da.EPSILON)return G(b);ma=ya-ma;na=Ba-na;wa=k-R;ua=1/Math.sqrt(ma*ma+na*na+wa*wa);ma*=ua;na*=ua;wa*=ua;w=Z*wa-f*na;K=f*ma-N*wa;N=N*na-Z*ma;(ua=Math.sqrt(w*w+K*K+N*N))?(ua=1/ua,w*=ua,K*=ua,N*=ua):N=K=w=0;Z=na*N-wa*K;V=wa*w-ma*N;la=ma*
K-na*w;(ua=Math.sqrt(Z*Z+V*V+la*la))?(ua=1/ua,Z*=ua,V*=ua,la*=ua):la=V=Z=0;b[0]=w;b[1]=Z;b[2]=ma;b[3]=0;b[4]=K;b[5]=V;b[6]=na;b[7]=0;b[8]=N;b[9]=la;b[10]=wa;b[11]=0;b[12]=-(w*ya+K*Ba+N*k);b[13]=-(Z*ya+V*Ba+la*k);b[14]=-(ma*ya+na*Ba+wa*k);b[15]=1;return b}function ha(b,k,R,f){const w=k[0],K=k[1];k=k[2];var N=f[0];const Z=f[1];var V=f[2];f=w-R[0];let la=K-R[1];R=k-R[2];let ma=f*f+la*la+R*R;0<ma&&(ma=1/Math.sqrt(ma),f*=ma,la*=ma,R*=ma);let na=Z*R-V*la;V=V*f-N*R;N=N*la-Z*f;ma=na*na+V*V+N*N;0<ma&&(ma=
1/Math.sqrt(ma),na*=ma,V*=ma,N*=ma);b[0]=na;b[1]=V;b[2]=N;b[3]=0;b[4]=la*N-R*V;b[5]=R*na-f*N;b[6]=f*V-la*na;b[7]=0;b[8]=f;b[9]=la;b[10]=R;b[11]=0;b[12]=w;b[13]=K;b[14]=k;b[15]=1;return b}function pa(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function ra(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],
2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))}function Aa(b,k,R){b[0]=k[0]+R[0];b[1]=k[1]+R[1];b[2]=k[2]+R[2];b[3]=k[3]+R[3];b[4]=k[4]+R[4];b[5]=k[5]+R[5];b[6]=k[6]+R[6];b[7]=k[7]+R[7];b[8]=k[8]+R[8];b[9]=k[9]+R[9];b[10]=k[10]+R[10];b[11]=k[11]+R[11];b[12]=k[12]+R[12];b[13]=k[13]+R[13];b[14]=k[14]+R[14];b[15]=k[15]+R[15];return b}function Ca(b,k,R){b[0]=k[0]-R[0];b[1]=
k[1]-R[1];b[2]=k[2]-R[2];b[3]=k[3]-R[3];b[4]=k[4]-R[4];b[5]=k[5]-R[5];b[6]=k[6]-R[6];b[7]=k[7]-R[7];b[8]=k[8]-R[8];b[9]=k[9]-R[9];b[10]=k[10]-R[10];b[11]=k[11]-R[11];b[12]=k[12]-R[12];b[13]=k[13]-R[13];b[14]=k[14]-R[14];b[15]=k[15]-R[15];return b}function r(b,k,R){b[0]=k[0]*R;b[1]=k[1]*R;b[2]=k[2]*R;b[3]=k[3]*R;b[4]=k[4]*R;b[5]=k[5]*R;b[6]=k[6]*R;b[7]=k[7]*R;b[8]=k[8]*R;b[9]=k[9]*R;b[10]=k[10]*R;b[11]=k[11]*R;b[12]=k[12]*R;b[13]=k[13]*R;b[14]=k[14]*R;b[15]=k[15]*R;return b}function E(b,k,R,f){b[0]=
k[0]+R[0]*f;b[1]=k[1]+R[1]*f;b[2]=k[2]+R[2]*f;b[3]=k[3]+R[3]*f;b[4]=k[4]+R[4]*f;b[5]=k[5]+R[5]*f;b[6]=k[6]+R[6]*f;b[7]=k[7]+R[7]*f;b[8]=k[8]+R[8]*f;b[9]=k[9]+R[9]*f;b[10]=k[10]+R[10]*f;b[11]=k[11]+R[11]*f;b[12]=k[12]+R[12]*f;b[13]=k[13]+R[13]*f;b[14]=k[14]+R[14]*f;b[15]=k[15]+R[15]*f;return b}function aa(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]&&b[3]===k[3]&&b[4]===k[4]&&b[5]===k[5]&&b[6]===k[6]&&b[7]===k[7]&&b[8]===k[8]&&b[9]===k[9]&&b[10]===k[10]&&b[11]===k[11]&&b[12]===k[12]&&b[13]===
k[13]&&b[14]===k[14]&&b[15]===k[15]}function ta(b,k){const R=b[0],f=b[1],w=b[2],K=b[3],N=b[4],Z=b[5],V=b[6],la=b[7],ma=b[8],na=b[9],wa=b[10],ua=b[11],ya=b[12],Ba=b[13],Da=b[14];b=b[15];const Ga=k[0],Ha=k[1],Ka=k[2],Ia=k[3],Ja=k[4],Sa=k[5],qa=k[6],fb=k[7],eb=k[8],db=k[9],a=k[10],ab=k[11],Ma=k[12],ib=k[13],lb=k[14];k=k[15];return Math.abs(R-Ga)<=da.EPSILON*Math.max(1,Math.abs(R),Math.abs(Ga))&&Math.abs(f-Ha)<=da.EPSILON*Math.max(1,Math.abs(f),Math.abs(Ha))&&Math.abs(w-Ka)<=da.EPSILON*Math.max(1,Math.abs(w),
Math.abs(Ka))&&Math.abs(K-Ia)<=da.EPSILON*Math.max(1,Math.abs(K),Math.abs(Ia))&&Math.abs(N-Ja)<=da.EPSILON*Math.max(1,Math.abs(N),Math.abs(Ja))&&Math.abs(Z-Sa)<=da.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Sa))&&Math.abs(V-qa)<=da.EPSILON*Math.max(1,Math.abs(V),Math.abs(qa))&&Math.abs(la-fb)<=da.EPSILON*Math.max(1,Math.abs(la),Math.abs(fb))&&Math.abs(ma-eb)<=da.EPSILON*Math.max(1,Math.abs(ma),Math.abs(eb))&&Math.abs(na-db)<=da.EPSILON*Math.max(1,Math.abs(na),Math.abs(db))&&Math.abs(wa-a)<=da.EPSILON*
Math.max(1,Math.abs(wa),Math.abs(a))&&Math.abs(ua-ab)<=da.EPSILON*Math.max(1,Math.abs(ua),Math.abs(ab))&&Math.abs(ya-Ma)<=da.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Ma))&&Math.abs(Ba-ib)<=da.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(ib))&&Math.abs(Da-lb)<=da.EPSILON*Math.max(1,Math.abs(Da),Math.abs(lb))&&Math.abs(b-k)<=da.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))}const xa=e.create();e=Object.freeze({__proto__:null,copy:I,set:t,identity:G,transpose:m,invert:u,adjoint:v,determinant:D,multiply:ja,
translate:ba,scale:l,rotate:A,rotateX:n,rotateY:d,rotateZ:g,fromTranslation:y,fromScaling:M,fromRotation:O,fromXRotation:F,fromYRotation:L,fromZRotation:Y,fromRotationTranslation:ka,fromQuat2:fa,getTranslation:J,getScaling:T,getRotation:ia,fromRotationTranslationScale:Q,fromRotationTranslationScaleOrigin:P,fromQuat:B,frustum:q,perspective:H,perspectiveFromFieldOfView:C,ortho:W,lookAt:X,targetTo:ha,str:pa,frob:ra,add:Aa,subtract:Ca,multiplyScalar:r,multiplyScalarAndAdd:E,exactEquals:aa,equals:ta,mul:ja,
sub:Ca});p.add=Aa;p.adjoint=v;p.copy=I;p.determinant=D;p.equals=ta;p.exactEquals=aa;p.frob=ra;p.fromQuat=B;p.fromQuat2=fa;p.fromRotation=O;p.fromRotationTranslation=ka;p.fromRotationTranslationScale=Q;p.fromRotationTranslationScaleOrigin=P;p.fromScaling=M;p.fromTranslation=y;p.fromXRotation=F;p.fromYRotation=L;p.fromZRotation=Y;p.frustum=q;p.getRotation=ia;p.getScaling=T;p.getTranslation=J;p.identity=G;p.invert=u;p.lookAt=X;p.mat4=e;p.mul=ja;p.multiply=ja;p.multiplyScalar=r;p.multiplyScalarAndAdd=
E;p.ortho=W;p.perspective=H;p.perspectiveFromFieldOfView=C;p.rotate=A;p.rotateX=n;p.rotateY=d;p.rotateZ=g;p.scale=l;p.set=t;p.str=pa;p.sub=Ca;p.subtract=Ca;p.targetTo=ha;p.translate=ba;p.transpose=m})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),function(p,e,da,I,t,G){function m(){return!!e._pe}function u(){return!!I("esri-wasm")}function v(){return n?n:n=t.create((g,y)=>{(new Promise(function(M,O){p(["./pe-wasm"],
M,O)})).then(function(M){return M.peWasm}).then(({default:M})=>{M({locateFile:O=>G.getAssetUrl(`esri/geometry/support/${O}`),onAbort:O=>{y(Error(O))}}).then(O=>{D(O);g()})})})}function D(g){function y(F,L,Y){F[L]=Y(F[L])}e._pe=g;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(F){function L(){return F.apply(this,arguments)||this}da._inheritsLoose(L,F);L.prototype.destroy=function(){e._pe.destroy(this)};return L}(e._pe.PeGCSExtent);
g=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var M of g)y(M.prototype,"getName",F=>function(){return F.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const F of[e._pe.PeGeogtran,e._pe.PeProjcs])y(F.prototype,"getParameters",L=>function(){const Y=Array(e.PeDefs.PE_PARM_MAX);let ka=L.call(this);for(let fa=0;fa<Y.length;fa++){const J=e._pe.getValue(ka,"*");Y[fa]=J?e._pe.wrapPointer(J,e._pe.PeParameter):
null;ka+=Int32Array.BYTES_PER_ELEMENT}return Y});y(e._pe.PeHorizon.prototype,"getCoord",F=>function(){const L=this.getSize();if(!L)return null;const Y=[],ka=F.call(this);A(Y,L,ka);return Y});y(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",F=>{const L=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let Y=null;var ka=F.call(this);if(!e._pe.compare(ka,e._pe.NULL)){Y=[ka];const fa=this.getSteps();if(1<fa){ka=e._pe.getPointer(ka);for(let J=1;J<fa;J++)Y.push(e._pe.wrapPointer(ka+L*J,e._pe.PeGTlistExtendedGTs))}}return Y}});
const O=e._pe._pe_getPeHorizonSize();M=F=>function(){let L=this._cache;L||(this._cache=L=new Map);if(L.has(F))return L.get(F);let Y=null;var ka=F.call(this);if(!e._pe.compare(ka,e._pe.NULL)){Y=[ka];const fa=ka.getNump();if(1<fa){ka=e._pe.getPointer(ka);for(let J=1;J<fa;J++)Y.push(e._pe.wrapPointer(ka+O*J,e._pe.PeHorizon))}}L.set(F,Y);return Y};y(e._pe.PeProjcs.prototype,"horizonGcsGenerate",M);y(e._pe.PeProjcs.prototype,"horizonPcsGenerate",M);e._pe.PeObject.prototype.toString=function(F=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();
const L=e._pe.getPointer(this),Y=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(L,F,Y))}}function ja(g){if(g){var y=e._pe.getClass(g);y&&(y=e._pe.getCache(y))&&(g=e._pe.getPointer(g))&&delete y[g]}}function ba(g,y){const M=[];y=Array(y);for(let O=0;O<g;O++)M.push(e._pe.ensureInt8(y));return M}function l(g){let y;Array.isArray(g[0])?(y=[],g.forEach(M=>{y.push(M[0],M[1])})):y=g;return y}function A(g,y,M,O=!1){if(O)for(O=0;O<2*y;O++)g[O]=e._pe.getValue(M+
O*Float64Array.BYTES_PER_ELEMENT,"double");else{O=0===g.length;for(let F=0;F<y;F++)O&&(g[F]=Array(2)),g[F][0]=e._pe.getValue(M,"double"),g[F][1]=e._pe.getValue(M+Float64Array.BYTES_PER_ELEMENT,"double"),M+=2*Float64Array.BYTES_PER_ELEMENT}}let n;e._pe=null;(function(g){function y(F,L,Y){e._pe.ensureCache.prepare();var ka=l(Y);const fa=Y===ka;ka=e._pe.ensureFloat64(ka);(F=e._pe._pe_geog_to_proj(e._pe.getPointer(F),L,ka))&&A(Y,L,ka,fa);return F}function M(F,L,Y){return O(F,L,Y,0)}function O(F,L,Y,ka){e._pe.ensureCache.prepare();
var fa=l(Y);const J=Y===fa;fa=e._pe.ensureFloat64(fa);(F=e._pe._pe_proj_to_geog_center(e._pe.getPointer(F),L,fa,ka))&&A(Y,L,fa,J);return F}g.geogToProj=y;g.projGeog=function(F,L,Y,ka){switch(ka){case e.PeDefs.PE_TRANSFORM_P_TO_G:return M(F,L,Y);case e.PeDefs.PE_TRANSFORM_G_TO_P:return y(F,L,Y)}return 0};g.projToGeog=M;g.projToGeogCenter=O})(e.PeCSTransformations||(e.PeCSTransformations={}));(function(g){g.init=function(){g.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;g.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;
g.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;g.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;g.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;g.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;g.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;g.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;g.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;g.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;g.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;g.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;g.PE_TYPE_GEOGTRAN=
e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;g.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;g.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;g.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;g.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;g.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;g.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;g.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;g.PE_PARM_ND=e._pe.PeDefs.prototype.PE_PARM_ND;g.PE_TRANSFORM_1_TO_2=
e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;g.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;g.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;g.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;g.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;g.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;g.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;g.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||(e.PeDefs={}));(function(g){function y(L,
Y){let ka=null,fa=O[L];fa||(fa={},O[L]=fa);fa.hasOwnProperty(String(Y))?ka=fa[Y]:(L=e._pe.PeFactory.prototype.factoryByType(L,Y),e._pe.compare(L,e._pe.NULL)||(ka=L,fa[Y]=ka));return ka=M(ka)}function M(L){if(L){const Y=L.getType();switch(Y){case e.PeDefs.PE_TYPE_GEOGCS:L=e._pe.castObject(L,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:L=e._pe.castObject(L,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:L=e._pe.castObject(L,e._pe.PeGeogtran);break;default:Y&e.PeDefs.PE_TYPE_UNIT&&(L=e._pe.castObject(L,
e._pe.PeUnit))}}return L}const O={},F={};g.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};g.coordsys=function(L){return y(e.PeDefs.PE_TYPE_COORDSYS,L)};g.factoryByType=y;g.fromString=function(L,Y){let ka=null,fa=F[L];fa||(fa={},F[L]=fa);fa.hasOwnProperty(Y)?ka=fa[Y]:(L=e._pe.PeFactory.prototype.fromString(L,Y),e._pe.compare(L,e._pe.NULL)||(ka=L,fa[Y]=ka));return ka=M(ka)};g.geogcs=function(L){return y(e.PeDefs.PE_TYPE_GEOGCS,L)};g.geogtran=function(L){return y(e.PeDefs.PE_TYPE_GEOGTRAN,
L)};g.getCode=function(L){return e._pe.PeFactory.prototype.getCode(L)};g.projcs=function(L){return y(e.PeDefs.PE_TYPE_PROJCS,L)};g.unit=function(L){return y(e.PeDefs.PE_TYPE_UNIT,L)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;(function(g){let y;g.init=function(){g.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;y=e._pe._pe_getPeGTlistExtendedEntrySize()};g.getGTlist=function(M,O,F,L,Y,ka){let fa=null;const J=new e._pe.PeInteger(ka);try{const T=e._pe.PeGTlistExtended.prototype.getGTlist(M,
O,F,L,Y,J);if(ka=J.val)if(fa=[T],1<ka){const ia=e._pe.getPointer(T);for(M=1;M<ka;M++)fa.push(e._pe.wrapPointer(ia+y*M,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(J)}return fa}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));(function(g){g.destroy=function(y){if(y&&y.length){for(const M of y)ja(M),M.getEntries().forEach(O=>{ja(O);O=O.getGeogtran();ja(O);O.getParameters().forEach(ja);[O.getGeogcs1(),O.getGeogcs2()].forEach(F=>{ja(F);const L=F.getDatum();ja(L);ja(L.getSpheroid());ja(F.getPrimem());
ja(F.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(y[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));(function(g){g.geogToGeog=function(y,M,O,F,L){e._pe.ensureCache.prepare();var Y=l(O);const ka=O===Y;Y=e._pe.ensureFloat64(Y);let fa=0;F&&(fa=e._pe.ensureFloat64(F));(y=e._pe._pe_geog_to_geog(e._pe.getPointer(y),M,Y,fa,L))&&A(O,M,Y,ka);return y}})(e.PeGTTransformations||(e.PeGTTransformations={}));(function(g){function y(O,F,L,Y,ka,fa){e._pe.ensureCache.prepare();switch(O){case "dd":var J=
e._pe._pe_geog_to_dd;var T=e.PeDefs.PE_DD_MAX;break;case "ddm":J=e._pe._pe_geog_to_ddm;T=e.PeDefs.PE_DDM_MAX;break;case "dms":J=e._pe._pe_geog_to_dms,T=e.PeDefs.PE_DMS_MAX}O=0;F&&(O=e._pe.getPointer(F));F=l(Y);F=e._pe.ensureFloat64(F);T=ba(L,T);Y=e._pe.ensureInt32(T);if(ka=J(O,L,F,ka,Y))for(J=0;J<L;J++)fa[J]=e._pe.UTF8ToString(T[J]);return ka}function M(O,F,L,Y,ka){e._pe.ensureCache.prepare();switch(O){case "dd":var fa=e._pe._pe_dd_to_geog;break;case "ddm":fa=e._pe._pe_ddm_to_geog;break;case "dms":fa=
e._pe._pe_dms_to_geog}O=0;F&&(O=e._pe.getPointer(F));F=Y.map(J=>e._pe.ensureString(J));Y=e._pe.ensureInt32(F);F=e._pe.ensureFloat64(Array(2*L));(fa=fa(O,L,Y,F))&&A(ka,L,F);return fa}g.geog_to_dms=function(O,F,L,Y,ka){return y("dms",O,F,L,Y,ka)};g.dms_to_geog=function(O,F,L,Y){return M("dms",O,F,L,Y)};g.geog_to_ddm=function(O,F,L,Y,ka){return y("ddm",O,F,L,Y,ka)};g.ddm_to_geog=function(O,F,L,Y){return M("ddm",O,F,L,Y)};g.geog_to_dd=function(O,F,L,Y,ka){return y("dd",O,F,L,Y,ka)};g.dd_to_geog=function(O,
F,L,Y){return M("dd",O,F,L,Y)}})(e.PeNotationDms||(e.PeNotationDms={}));(function(g){g.init=function(){g.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;g.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;g.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;g.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;g.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};g.geog_to_mgrs_extended=function(y,M,
O,F,L,Y,ka){e._pe.ensureCache.prepare();let fa=0;y&&(fa=e._pe.getPointer(y));y=l(O);O=e._pe.ensureFloat64(y);y=ba(M,e.PeDefs.PE_MGRS_MAX);const J=e._pe.ensureInt32(y);if(F=e._pe._pe_geog_to_mgrs_extended(fa,M,O,F,L,Y,J))for(L=0;L<M;L++)ka[L]=e._pe.UTF8ToString(y[L]);return F};g.mgrs_to_geog_extended=function(y,M,O,F,L){e._pe.ensureCache.prepare();let Y=0;y&&(Y=e._pe.getPointer(y));y=O.map(ka=>e._pe.ensureString(ka));O=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*M));(F=e._pe._pe_mgrs_to_geog_extended(Y,
M,O,F,y))&&A(L,M,y);return F}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));(function(g){g.geog_to_usng=function(y,M,O,F,L,Y,ka){e._pe.ensureCache.prepare();let fa=0;y&&(fa=e._pe.getPointer(y));y=l(O);O=e._pe.ensureFloat64(y);y=ba(M,e.PeDefs.PE_MGRS_MAX);const J=e._pe.ensureInt32(y);if(F=e._pe._pe_geog_to_usng(fa,M,O,F,L,Y,J))for(L=0;L<M;L++)ka[L]=e._pe.UTF8ToString(y[L]);return F};g.usng_to_geog=function(y,M,O,F){e._pe.ensureCache.prepare();var L=0;y&&(L=e._pe.getPointer(y));y=O.map(Y=>e._pe.ensureString(Y));
O=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*M));(L=e._pe._pe_usng_to_geog(L,M,O,y))&&A(F,M,y);return L}})(e.PeNotationUsng||(e.PeNotationUsng={}));(function(g){g.init=function(){g.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;g.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;g.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};g.geog_to_utm=function(y,M,O,F,L){e._pe.ensureCache.prepare();var Y=0;y&&(Y=e._pe.getPointer(y));y=l(O);O=e._pe.ensureFloat64(y);
y=ba(M,e.PeDefs.PE_UTM_MAX);const ka=e._pe.ensureInt32(y);if(F=e._pe._pe_geog_to_utm(Y,M,O,F,ka))for(Y=0;Y<M;Y++)L[Y]=e._pe.UTF8ToString(y[Y]);return F};g.utm_to_geog=function(y,M,O,F,L){e._pe.ensureCache.prepare();let Y=0;y&&(Y=e._pe.getPointer(y));y=O.map(ka=>e._pe.ensureString(ka));O=e._pe.ensureInt32(y);y=e._pe.ensureFloat64(Array(2*M));(F=e._pe._pe_utm_to_geog(Y,M,O,F,y))&&A(L,M,y);return F}})(e.PeNotationUtm||(e.PeNotationUtm={}));(function(g){const y=new Map;g.init=function(){g.PE_PCSINFO_OPTION_NONE=
e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;g.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;g.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;g.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};g.generate=function(M,O=g.PE_PCSINFO_OPTION_DOMAIN){let F,L;y.has(M)&&(L=y.get(M),L[O]&&(F=L[O]));F||(F=e._pe.PePCSInfo.prototype.generate(M,O),L||(L=[],y.set(M,L)),L[O]=F);return F}})(e.PePCSInfo||(e.PePCSInfo={}));(function(g){g.version_string=
function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var d=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:m,isSupported:u,load:v,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},get PeGTTransformations(){return e.PeGTTransformations},
get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:D});e._init=D;e.isLoaded=m;e.isSupported=u;e.load=v;e.pe=d})},"esri/assets":function(){define(["exports","./config","./core/urlUtils","./request"],function(p,e,da,I){function t(G){return da.join(e.assetsPath,G)}p.fetchAsset=function(G,m){return I(t(G),
m)};p.getAssetUrl=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/requestUtils".split(" "),function(p,e,da,I,t,G,m,u,v,D,ja){async function ba(C,W){var X=u.isDataProtocol(C);const ha=u.isBlobProtocol(C);ha||X||(C=u.normalize(C));const pa={url:C,requestOptions:{...G.unwrap(W)}};let ra=u.getInterceptor(C);if(ra){C=await F(ra,pa);
if(null!=C)return{data:C,getHeader:H,requestOptions:pa.requestOptions,url:pa.url};ra.after||ra.error||(ra=null)}C=pa.url;W=pa.requestOptions;if("image"===W.responseType){if(da("host-webworker")||da("host-node"))throw n("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),pa);}else if(X)throw n("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+W.responseType),pa);if("head"===W.method){if(W.body)throw n("request:invalid-parameters",
Error("body parameter cannot be set when method is 'head'"),pa);if(X||ha)throw n("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),pa);}await d();if(T)return T.execute(C,W);const Aa=v.createAbortController();v.onAbort(W,()=>Aa.abort());X=await ka({controller:Aa,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:ra,params:pa,redoRequest:!1,useIdentity:ia.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});ra&&ra.after&&ra.after(X);
return X}function l(C){u.isBlobProtocol(C)||u.isDataProtocol(C)||(C=u.getOrigin(C))&&-1===ba._corsServers.indexOf(C)&&ba._corsServers.push(C)}function A(C){C=u.getOrigin(C);return!C||C.endsWith(".arcgis.com")||-1!==ba._corsServers.indexOf(C)||u.isTrustedServer(C)}function n(C,W,X,ha){let pa="Error";const ra={url:X.url,requestOptions:X.requestOptions,getHeader:H,ssl:!1};if(W instanceof m)return W.details?(W.details=I.clone(W.details),W.details.url=X.url,W.details.requestOptions=X.requestOptions):W.details=
ra,W;if(W){X=ha&&(r=>ha.headers.get(r));const Aa=ha&&ha.status,Ca=W.message;Ca&&(pa=Ca);X&&(ra.getHeader=X);ra.httpStatus=(null!=W.httpCode?W.httpCode:W.code)||Aa||0;ra.subCode=W.subcode;ra.messageCode=W.messageCode;ra.messages="string"===typeof W.details?[W.details]:W.details}return v.isAbortError(W)?v.createAbortError():new m(C,pa,ra)}async function d(){da("host-webworker")?T||(T=await new Promise(function(C,W){p(["./core/workers/request"],C,W)})):ba._abortableFetch||(ba._abortableFetch=e.fetch.bind(e))}
async function g(){D.id||await new Promise(function(C,W){p(["./identity/IdentityManager"],function(X){C(Object.freeze({__proto__:null,"default":X}))},W)})}async function y(C){const W=C.params.url,X=C.params.requestOptions,ha=C.controller.signal;var pa=X.body;let ra=null,Aa=null,Ca=null;Q&&"HTMLFormElement"in e&&(pa instanceof FormData?ra=pa:pa instanceof HTMLFormElement&&(Aa=pa,ra=new FormData(Aa)));"string"===typeof pa&&(Ca=pa);C.fetchOptions={cache:X.cacheBust&&!ba._abortableFetch.polyfill?"no-cache":
"default",credentials:"same-origin",headers:X.headers||{},method:"head"===X.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:ha};if(ra||Ca)C.fetchOptions.body=ra||Ca;"anonymous"===X.authMode&&(C.useIdentity=!1);C.hasToken=!!(/token=/i.test(W)||X.query&&X.query.token||ra&&ra.get&&ra.get("token")||Aa&&Aa.elements.token);(pa=u.getOrigin(W,!0))&&!C.hasToken&&t.apiKey&&pa.endsWith(".arcgis.com")&&"js.arcgis.com"!==pa&&"jsdev.arcgis.com"!==pa&&"jsqa.arcgis.com"!==pa&&(X.query||(X.query={}),X.query.token=
t.apiKey,C.hasToken=!0);if(C.useIdentity&&!C.hasToken&&!C.credentialToken&&!M(W)&&!v.isAborted(ha)){let r;"immediate"===X.authMode?(await g(),r=await D.id.getCredential(W,{signal:ha}),C.credential=r):"no-prompt"===X.authMode?(await g(),r=await D.id.getCredential(W,{prompt:!1,signal:ha}).catch(()=>{}),C.credential=r):D.id&&(r=D.id.findCredential(W));r&&(C.credentialToken=r.token,C.useSSL=!!r.ssl)}}function M(C){return q.some(W=>W.test(C))}async function O(C){let W=C.params.url;const X=C.params.requestOptions,
ha=C.fetchOptions,pa=u.isBlobProtocol(W)||u.isDataProtocol(W),ra=X.responseType||"json",Aa=pa?0:null!=X.timeout?X.timeout:ia.timeout;var Ca=!1;if(!pa){C.useSSL&&(W=u.toHTTPS(W));X.cacheBust&&"default"===ha.cache&&(W=u.addQueryParameter(W,"request.preventCache",Date.now()));var r={...X.query};C.credentialToken&&(r.token=C.credentialToken);Ca=u.objectToQuery(r);da("esri-url-encodes-apostrophe")&&(Ca=Ca.replace(/'/g,"%27"));const b=W.length+1+Ca.length;Ca="post"===X.method||!!X.body||b>ia.maxUrlLength;
const k=X.useProxy||!!u.getProxyRule(W);if(k){const R=u.getProxyUrl(W);var E=R.path;!Ca&&E.length+1+b>ia.maxUrlLength&&(Ca=!0);R.query&&(r={...R.query,...r})}if("HEAD"===ha.method&&(Ca||k)){if(Ca){if(b>ia.maxUrlLength)throw n("request:invalid-parameters",Error("URL exceeds maximum length"),C.params);throw n("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),C.params);}if(k)throw n("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),C.params);
}Ca?(ha.method="POST",X.body?W=u.addQueryParameters(W,r):(ha.body=u.objectToQuery(r),ha.headers["Content-Type"]="application/x-www-form-urlencoded")):W=u.addQueryParameters(W,r);k&&(C.useProxy=!0,W=`${E}?${W}`);r.token&&Q&&ha.body instanceof FormData&&(E=ha.body,E.set?E.set("token",r.token):E.append("token",r.token));X.hasOwnProperty("withCredentials")?C.withCredentials=X.withCredentials:u.isTrustedServer(W)?C.withCredentials=!0:D.id&&(r=D.id.findServerInfo(W))&&r.webTierAuth&&(C.withCredentials=
!0);C.withCredentials&&(ha.credentials="include")}r=0;let aa=!1;0<Aa&&(r=setTimeout(()=>{aa=!0;C.controller.abort()},Aa));let ta,xa;try{if("image"!==X.responseType||"default"!==ha.cache||"GET"!==ha.method||Ca||L(X.headers)||!pa&&!C.useProxy&&ia.proxyUrl&&!A(W)){if(ta=await ba._abortableFetch(W,ha),C.useProxy||l(W),ta.ok&&"HEAD"!==ha.method){switch(ra){case "array-buffer":xa=await ta.arrayBuffer();break;case "blob":case "image":xa=await ta.blob();break;default:xa=await ta.text()}r&&(clearTimeout(r),
r=0);if("json"===ra||"xml"===ra||"document"===ra)if(xa)switch(ra){case "json":xa=JSON.parse(xa);break;case "xml":xa=Y(xa,"application/xml");break;case "document":xa=Y(xa,"text/html")}else xa=null;if(xa){if("array-buffer"===ra||"blob"===ra){const b=ta.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(b)&&750>=xa["blob"===ra?"size":"byteLength"])try{const k=await (new Response(xa)).json();k.error&&(xa=k)}catch{}}"image"===ra&&xa instanceof Blob&&(xa=await J(URL.createObjectURL(xa),
C,!0))}}}else xa=await J(W,C)}catch(b){if("AbortError"===b.name){if(aa)throw Error("Timeout exceeded");throw v.createAbortError("Request canceled");}if(!ta&&b instanceof TypeError&&ia.proxyUrl&&!X.body&&"post"!==X.method&&"head"!==X.method&&!C.useProxy)C.redoRequest=!0,u.addProxyRule({proxyUrl:ia.proxyUrl,urlPrefix:u.removeFile(u.urlToObject(W).path)});else throw b;}finally{r&&clearTimeout(r)}return[ta,xa]}async function F(C,W){if(null!=C.responseData)return C.responseData;C.headers&&(W.requestOptions.headers=
{...W.requestOptions.headers,...C.headers});C.query&&(W.requestOptions.query={...W.requestOptions.query,...C.query});if(C.before){let X,ha;try{ha=await C.before(W)}catch(pa){X=n("request:interceptor",pa,W)}if(ha instanceof Error||ha instanceof m)X=n("request:interceptor",ha,W);if(X)throw C.error&&C.error(X),X;return ha}}function L(C){if(C)for(const W of Object.getOwnPropertyNames(C))if(C[W])return!0;return!1}function Y(C,W){let X;try{X=(new DOMParser).parseFromString(C,W)}catch{}if(!X||X.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");
return X}async function ka(C){await y(C);let W;try{do[W,X]=await O(C);while(!await fa(C,W,X))}catch(ra){var X=n("request:server",ra,C.params,W);X.details.ssl=C.useSSL;C.interceptor&&C.interceptor.error&&C.interceptor.error(X);throw X;}var ha=C.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(ha)&&!C.hasToken&&!C.credentialToken&&X&&X.user&&X.user.username&&!u.isTrustedServer(ha)&&(ha=u.getOrigin(ha,!0))&&ia.trustedServers.push(ha);if((ha=C.credential)&&D.id){var pa=D.id.findServerInfo(ha.server);
if(pa=pa&&pa.owningSystemUrl)pa=pa.replace(/\/?$/,"/sharing"),(ha=D.id.findCredential(pa,ha.userId))&&-1===D.id._getIdenticalSvcIdx(pa,ha)&&ha.resources.unshift(pa)}return{data:X,getHeader:W?ra=>W.headers.get(ra):H,requestOptions:C.params.requestOptions,ssl:C.useSSL,url:C.params.url}}async function fa(C,W,X){var ha;if(C.redoRequest)return C.redoRequest=!1;if(!W)return!0;if(!W.ok)throw Error(`Unable to load ${W.url} status: ${W.status}`);let pa;X&&X.error&&(pa=I.mixin(Error(),X.error));let ra,Aa,Ca;
pa&&(ra=Number(pa.code),Aa=pa.hasOwnProperty("subcode")?Number(pa.subcode):null,Ca=(Ca=pa.messageCode)&&Ca.toUpperCase());W=C.params.requestOptions.authMode;X=String(null==(ha=C.params.requestOptions.query)?void 0:ha.token);if(403===ra&&(4===Aa||pa.message&&-1<pa.message.toLowerCase().indexOf("ssl")&&-1===pa.message.toLowerCase().indexOf("permission"))){if(!C.useSSL)return C.useSSL=!0,!1}else if(C.useIdentity&&("no-prompt"!==W||498===ra)&&-1!==P.indexOf(ra)&&!M(C.params.url)&&!X.startsWith("AAPK")&&
(403!==ra||-1===B.indexOf(Ca)&&(null==Aa||2===Aa&&C.credentialToken))){await g();try{const r=await D.id.getCredential(C.params.url,{error:n("request:server",pa,C.params),prompt:"no-prompt"!==W,signal:C.controller.signal,token:C.credentialToken});C.credential=r;C.credentialToken=r.token;C.useSSL=C.useSSL||r.ssl;return!1}catch(r){if("no-prompt"===W)return C.credential=null,C.credentialToken=null,!1;pa=r}}if(pa)throw pa;return!0}function J(C,W,X=!1){const ha=W.controller.signal,pa=new Image;pa.crossOrigin=
W.withCredentials?"use-credentials":"anonymous";pa.alt="";pa.src=C;return ja.loadImageAsync(pa,C,X,ha)}let T;const ia=t.request,Q="FormData"in e,P=[499,498,403,401],B=["COM_0056","COM_0057","SB_0008"],q=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],H=()=>null;ba._abortableFetch=null;ba._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return ba})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe",
"../core/promiseUtils"],function(p,e,da,I){function t(){try{return new DOMException("Aborted","AbortError")}catch{const G=Error();G.name="AbortError";return G}}p.loadImageAsync=function(G,m,u=!1,v){return I.create((D,ja)=>{if(I.isAborted(v))ja(t());else{var ba=()=>{n();ja(Error(`Unable to load ${m}`))},l=()=>{const d=G;n();D(d)},A=()=>{if(G){var d=G;n();d.src="";ja(t())}},n=()=>{e("esri-image-decode")||(G.removeEventListener("error",ba),G.removeEventListener("load",l));G=l=ba=null;da.isSome(v)&&v.removeEventListener("abort",
A);A=null;u&&URL.revokeObjectURL(m)};da.isSome(v)&&v.addEventListener("abort",A);e("esri-image-decode")?G.decode().then(l,ba):(G.addEventListener("error",ba),G.addEventListener("load",l))}})};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(p,e,da){function I(l=ba){return[l[0],l[1],l[2],l[3]]}function t(l){return l[0]>=l[2]?0:l[2]-l[0]}function G(l){return l[1]>=l[3]?0:l[3]-l[1]}function m(l,
A,n){return A>=l[0]&&n>=l[1]&&A<=l[2]&&n<=l[3]}function u(l,A){l[0]=A[0];l[1]=A[1];l[2]=A[2];l[3]=A[3];return l}function v(l){return 4===l.length}function D(l,A,n){return l<A?A:l>n?n:l}const ja=[Infinity,Infinity,-Infinity,-Infinity],ba=[0,0,0,0];p.NEGATIVE_INFINITY=ja;p.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];p.UNIT=[0,0,1,1];p.ZERO=ba;p.allFinite=function(l){for(let A=0;4>A;A++)if(!isFinite(l[A]))return!1;return!0};p.area=function(l){return t(l)*G(l)};p.center=function(l,A=[0,
0]){A[0]=(l[0]+l[2])/2;A[1]=(l[1]+l[3])/2;return A};p.clone=function(l){return[l[0],l[1],l[2],l[3]]};p.contains=function(l,A){return A[0]>=l[0]&&A[2]<=l[2]&&A[1]>=l[1]&&A[3]<=l[3]};p.containsPoint=function(l,A){return m(l,A[0],A[1])};p.containsPointObject=function(l,A){return m(l,A.x,A.y)};p.containsPointWithMargin=function(l,A,n){return A[0]>=l[0]-n&&A[1]>=l[1]-n&&A[0]<=l[2]+n&&A[1]<=l[3]+n};p.containsXY=m;p.create=I;p.diameter=function(l){const A=t(l);l=G(l);return Math.sqrt(A*A+l*l)};p.distance=
function(l,A){const n=(l[1]+l[3])/2,d=Math.max(Math.abs(A[0]-(l[0]+l[2])/2)-t(l)/2,0);l=Math.max(Math.abs(A[1]-n)-G(l)/2,0);return Math.sqrt(d*d+l*l)};p.empty=function(l){return l?u(l,ja):I(ja)};p.equals=function(l,A,n){if(null==l||null==A)return l===A;if(!v(l)||!v(A))return!1;if(n)for(let d=0;d<l.length;d++){if(!n(l[d],A[d]))return!1}else for(n=0;n<l.length;n++)if(l[n]!==A[n])return!1;return!0};p.expand=function(l,A,n=l){if("length"in A)if(v(A))n[0]=Math.min(l[0],A[0]),n[1]=Math.min(l[1],A[1]),n[2]=
Math.max(l[2],A[2]),n[3]=Math.max(l[3],A[3]);else{if(2===A.length||3===A.length)n[0]=Math.min(l[0],A[0]),n[1]=Math.min(l[1],A[1]),n[2]=Math.max(l[2],A[0]),n[3]=Math.max(l[3],A[1])}else switch(A.type){case "extent":n[0]=Math.min(l[0],A.xmin);n[1]=Math.min(l[1],A.ymin);n[2]=Math.max(l[2],A.xmax);n[3]=Math.max(l[3],A.ymax);break;case "point":n[0]=Math.min(l[0],A.x),n[1]=Math.min(l[1],A.y),n[2]=Math.max(l[2],A.x),n[3]=Math.max(l[3],A.y)}return n};p.expandPointInPlace=function(l,A){A[0]<l[0]&&(l[0]=A[0]);
A[0]>l[2]&&(l[2]=A[0]);A[1]<l[1]&&(l[1]=A[1]);A[1]>l[3]&&(l[3]=A[1])};p.expandWithNestedArray=function(l,A,n=l){const d=A.length;let g=l[0],y=l[1],M=l[2];l=l[3];for(let O=0;O<d;O++){const F=A[O];g=Math.min(g,F[0]);y=Math.min(y,F[1]);M=Math.max(M,F[0]);l=Math.max(l,F[1])}n[0]=g;n[1]=y;n[2]=M;n[3]=l;return n};p.fromExtent=function(l,A=I()){A[0]=l.xmin;A[1]=l.ymin;A[2]=l.xmax;A[3]=l.ymax;return A};p.fromValues=function(l,A,n,d,g=I()){g[0]=l;g[1]=A;g[2]=n;g[3]=d;return g};p.height=G;p.intersection=function(l,
A,n=l){const d=A[0],g=A[1],y=A[2];A=A[3];n[0]=D(l[0],d,y);n[1]=D(l[1],g,A);n[2]=D(l[2],d,y);n[3]=D(l[3],g,A);return n};p.intersects=function(l,A){return Math.max(A[0],l[0])<=Math.min(A[2],l[2])&&Math.max(A[1],l[1])<=Math.min(A[3],l[3])};p.is=v;p.isPoint=function(l){return(0===t(l)||!isFinite(l[0]))&&(0===G(l)||!isFinite(l[1]))};p.offset=function(l,A,n,d=l){d[0]=l[0]+A;d[1]=l[1]+n;d[2]=l[2]+A;d[3]=l[3]+n;return d};p.pad=function(l,A,n=l){n[0]=l[0]-A;n[1]=l[1]-A;n[2]=l[2]+A;n[3]=l[3]+A;return n};p.set=
u;p.setMax=function(l,A,n=l){n[2]=A[0];n[3]=A[1];n!==l&&(n[0]=l[0],n[1]=l[1]);return l};p.setMin=function(l,A,n=l){n[0]=A[0];n[1]=A[1];n!==l&&(n[2]=l[2],n[3]=l[3]);return n};p.size=function(l,A){A[0]=l[2]-l[0];A[1]=l[3]-l[1]};p.toExtent=function(l,A){return new da({xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:A})};p.width=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(p,e){const da=Math.PI/
180;var I=e.earth.radius;const t=e.earth.eccentricitySquared;I={a1:I*t,a2:I*t*I*t,a3:I*t*t/2,a4:I*t*I*t*2.5,a5:I*t+I*t*t/2,a6:1-t};e={4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};p.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;p.earthEllipsoidConstants=I;p.spheroids=e;p.toRadians=da;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(p){return function(){function e(I){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(I&&I.steps)for(const t of I.steps)t instanceof p?this.steps.push(t):this.steps.push(new p({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}e.cacheKey=function(I,t){return[void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==
I.wkt?I.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};e.fromGE=function(I){const t=new e;let G="";for(const m of I.steps)I=p.fromGE(m),t.steps.push(I),G+=I.uid.toString()+",";t._cached_projection={};t._gtlistentry=null;t._chain=G;return t};var da=e.prototype;da.getInverse=function(){const I=new e;I.steps=[];for(let t=this.steps.length-1;0<=t;t--)I.steps.push(this.steps[t].getInverse());return I};da.getGTListEntry=
function(){let I="";for(const t of this.steps)I+=t.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=I);return this._gtlistentry};da.assignCachedGe=function(I,t,G){this._cached_projection[e.cacheKey(I,t)]=G};da.getCachedGeTransformation=function(I,t){let G="";for(const m of this.steps)G+=m.uid.toString()+",";G!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=G);I=this._cached_projection[e.cacheKey(I,t)];return void 0===
I?null:I};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(p){let e=0;return function(){function da(I=null){this.uid=e++;I?(this._wkt=void 0!==I.wkt?I.wkt:null,this._wkid=void 0!==I.wkid?I.wkid:-1,this._isInverse=void 0!==I.isInverse?!0===I.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}da.fromGE=function(I){const t=new da;t._wkt=I.wkt;t._wkid=I.wkid;t._isInverse=I.isInverse;return t};da.prototype.getInverse=
function(){const I=new da;I._wkt=this.wkt;I._wkid=this._wkid;I._isInverse=!this.isInverse;return I};p._createClass(da,[{key:"wkt",get:function(){return this._wkt},set:function(I){this._wkt=I;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(I){this._wkid=I;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},set:function(I){this._isInverse=I;this.uid=e++}}]);return da}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(p){let e=
function(m,u,v){this.x=m;this.y=u;this.spatialReference=v;this.m=this.z=void 0},da=function(m,u,v,D){this.rings=m;this.spatialReference=u;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);D&&(this.hasM=D)},I=function(m,u,v,D){this.paths=m;this.spatialReference=u;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);D&&(this.hasM=D)},t=function(m,u,v,D){this.points=m;this.spatialReference=u;this.hasM=this.hasZ=void 0;v&&(this.hasZ=v);D&&(this.hasM=D)},G=function(m,u,v,D,ja){this.xmin=m;this.ymin=u;this.xmax=v;this.ymax=
D;this.spatialReference=ja;this.mmax=this.mmin=this.zmax=this.zmin=void 0};p.jsonAdapter={convertToGEGeometry:function(m,u){return null==u?null:m.convertJSONToGeometry(u)},exportPoint:function(m,u,v){v=new e(m.getPointX(u),m.getPointY(u),v);const D=m.hasZ(u),ja=m.hasM(u);D&&(v.z=m.getPointZ(u));ja&&(v.m=m.getPointM(u));return v},exportPolygon:function(m,u,v){return new da(m.exportPaths(u),v,m.hasZ(u),m.hasM(u))},exportPolyline:function(m,u,v){return new I(m.exportPaths(u),v,m.hasZ(u),m.hasM(u))},
exportMultipoint:function(m,u,v){return new t(m.exportPoints(u),v,m.hasZ(u),m.hasM(u))},exportExtent:function(m,u,v){var D=m.hasZ(u);const ja=m.hasM(u);v=new G(m.getXMin(u),m.getYMin(u),m.getXMax(u),m.getYMax(u),v);D&&(D=m.getZExtent(u),v.zmin=D.vmin,v.zmax=D.vmax);ja&&(m=m.getMExtent(u),v.mmin=m.vmin,v.mmax=m.vmax);return v}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang",
"../../../../symbols/support/defaultsJSON"],function(p,e,da,I){p.createDefaultAttributesFunction=function(t,G){if(e("csp-restrictions"))return()=>({[G]:null,...t});try{let m=`this.${G} = null;`;for(const v in t){const D=v.indexOf(".")?`["${v}"]`:`.${v}`;m+=`this${D} = ${JSON.stringify(t[v])};`}const u=new Function(m);return()=>new u}catch(m){return()=>({[G]:null,...t})}};p.createDefaultTemplate=function(t={}){return[{name:"New Feature",description:"",prototype:{attributes:da.clone(t)}}]};p.createDrawingInfo=
function(t){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?I.defaultPointSymbolJSON:"esriGeometryPolyline"===t?I.defaultPolylineSymbolJSON:I.defaultPolygonSymbolJSON}}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(p){const e=[252,146,31,255],da={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},
I={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};p.defaultColor=e;p.defaultOutlineColor=[153,153,153,255];p.defaultPointSymbolJSON=da;p.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};p.defaultPolylineSymbolJSON=I;p.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,
0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};p.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};p.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};p.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(p,e,da,I,t,G,m,u,v,D){return function(){function ja(l){this.geometryInfo=l;this._boundsStore=new v.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new t;this.featureAdapter=D.optimizedFeatureQueryEngineAdapter}var ba=ja.prototype;ba.add=function(l){this._add(l);this._emitChanged()};ba.addMany=function(l){for(const A of l)this._add(A);this._emitChanged()};ba.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};ba.removeById=
function(l){l=this._featuresById.get(l);if(!l)return null;this._remove(l);this._emitChanged();return l};ba.removeManyById=function(l){this._boundsStore.invalidateIndex();for(const A of l)(l=this._featuresById.get(A))&&this._remove(l);this._emitChanged()};ba.forEachBounds=function(l,A,n){for(const d of l)(l=this._boundsStore.get(d.objectId))&&A(u.fromRect(n,l))};ba.getFeature=function(l){return this._featuresById.get(l)};ba.has=function(l){return this._featuresById.has(l)};ba.forEach=function(l){this._featuresById.forEach(A=>
l(A))};ba.forEachInBounds=function(l,A){this._boundsStore.forEachInBounds(l,n=>{A(this._featuresById.get(n))})};ba.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};ba.sweep=function(){let l=!1;this._featuresById.forEach((A,n)=>{this._markedIds.has(n)||(l=!0,this._remove(A))});this._markedIds.clear();l&&this._emitChanged()};ba._emitChanged=function(){this.events.emit("changed",void 0)};ba._add=function(l){if(l){var A=l.objectId;if(null==A)da.getLogger("esri.layers.graphics.data.FeatureStore").error(new I("featurestore:invalid-feature",
"feature id is missing",{feature:l}));else{var n=this._featuresById.get(A);this._markedIds.add(A);if(n){l.displayId=n.displayId;var d=this._boundsStore.get(A);this._boundsStore.delete(A)}else if(e.isSome(this.onFeatureAdd))this.onFeatureAdd(l);l.geometry&&l.geometry.coords&&l.geometry.coords.length?(d=m.getBoundsOptimizedGeometry(d||G.create(),l.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(A,d)):this._boundsStore.set(A,null);this._featuresById.set(A,l)}}};ba._remove=
function(l){if(e.isSome(this.onFeatureRemove))this.onFeatureRemove(l);this._markedIds.delete(l.objectId);this._boundsStore.delete(l.objectId);this._featuresById.delete(l.objectId);return l};p._createClass(ja,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const l=G.create(G.NEGATIVE_INFINITY);this._featuresById.forEach(A=>{if(A=this._boundsStore.get(A.objectId))l[0]=Math.min(A[0],l[0]),l[1]=Math.min(A[1],l[1]),l[2]=Math.max(A[2],l[2]),l[3]=Math.max(A[3],l[3])});return l}},{key:"storeStatistics",get:function(){let l=0;this._featuresById.forEach(A=>{A.geometry&&A.geometry.coords&&(l+=A.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:l/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return ja}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(p,e,da,I,t){let G=function(){function m(){this._emitter=new m.EventEmitter(this)}var u=m.prototype;u.emit=function(v,D){return this._emitter.emit(v,D)};u.on=function(v,D){return this._emitter.on(v,D)};u.once=function(v,D){return this._emitter.once(v,D)};u.hasEventListener=function(v){return this._emitter.hasEventListener(v)};return m}();(function(m){let u=function(){function D(ba=null){this.target=
ba;this._listenersMap=null}var ja=D.prototype;ja.clear=function(){this._listenersMap&&this._listenersMap.clear()};ja.emit=function(ba,l){ba=this._listenersMap&&this._listenersMap.get(ba);if(!ba)return!1;const A=this.target||this;[...ba].forEach(n=>{n.call(A,l)});return 0<ba.length};ja.on=function(ba,l){if(Array.isArray(ba)){var A=ba.map(n=>this.on(n,l));return da.handlesGroup(A)}if(-1<ba.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);A=this._listenersMap.get(ba)||[];A.push(l);this._listenersMap.set(ba,A);return{remove:()=>{const n=this._listenersMap&&this._listenersMap.get(ba)||[],d=n.indexOf(l);0<=d&&n.splice(d,1)}}};ja.once=function(ba,l){let A;return A=this.on(ba,n=>{A.remove();l.call(null,n)})};ja.hasEventListener=function(ba){ba=this._listenersMap&&this._listenersMap.get(ba);return null!=ba&&0<ba.length};return D}();m.EventEmitter=u;m.EventedMixin=D=>{D=function(ja){function ba(){var A=
ja.apply(this,arguments)||this;A._emitter=new u;return A}p._inheritsLoose(ba,ja);var l=ba.prototype;l.emit=function(A,n){return this._emitter.emit(A,n)};l.on=function(A,n){return this._emitter.on(A,n)};l.once=function(A,n){return this._emitter.once(A,n)};l.hasEventListener=function(A){return this._emitter.hasEventListener(A)};return ba}(D);return D=e.__decorate([I.subclass("esri.core.Evented")],D)};let v=function(D){function ja(){var l=D.apply(this,arguments)||this;l._emitter=new G.EventEmitter(p._assertThisInitialized(l));
return l}p._inheritsLoose(ja,D);var ba=ja.prototype;ba.emit=function(l,A){return this._emitter.emit(l,A)};ba.on=function(l,A){return this._emitter.on(l,A)};ba.once=function(l,A){return this._emitter.once(l,A)};ba.hasEventListener=function(l){return this._emitter.hasEventListener(l)};return ja}(t);v=e.__decorate([I.subclass("esri.core.Evented")],v);m.EventedAccessor=v})(G||(G={}));return G})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(p,e,da,I){function t(d=A){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function G(d,g,y,M,O,F,L=t()){L[0]=d;L[1]=g;L[2]=y;L[3]=M;L[4]=O;L[5]=F;return L}function m(d){return d[0]>=d[3]?0:d[3]-d[0]}function u(d){return d[1]>=d[4]?0:d[4]-d[1]}function v(d){return d[2]>=d[5]?0:d[5]-d[2]}function D(d,g){return Math.max(g[0],d[0])<=Math.min(g[3],d[3])&&Math.max(g[1],d[1])<=Math.min(g[4],d[4])&&Math.max(g[2],d[2])<=Math.min(g[5],d[5])}function ja(d,g){d[0]=g[0];d[1]=g[1];d[2]=g[2];d[3]=g[3];d[4]=g[4];
d[5]=g[5];return d}function ba(d){return 6===d.length}const l=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],A=[0,0,0,0,0,0],n=t();p.NEGATIVE_INFINITY=l;p.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];p.ZERO=A;p.allFinite=function(d){for(let g=0;6>g;g++)if(!isFinite(d[g]))return!1;return!0};p.center=function(d,g=[0,0,0]){g[0]=d[0]+m(d)/2;g[1]=d[1]+u(d)/2;g[2]=d[2]+v(d)/2;return g};p.contains=function(d,g){return g[0]>=d[0]&&g[1]>=d[1]&&g[2]>=d[2]&&g[3]<=
d[3]&&g[4]<=d[4]&&g[5]<=d[5]};p.containsPoint=function(d,g){return g[0]>=d[0]&&g[1]>=d[1]&&g[2]>=d[2]&&g[0]<=d[3]&&g[1]<=d[4]&&g[2]<=d[5]};p.containsPointWithMargin=function(d,g,y){return g[0]>=d[0]-y&&g[1]>=d[1]-y&&g[2]>=d[2]-y&&g[0]<=d[3]+y&&g[1]<=d[4]+y&&g[2]<=d[5]+y};p.create=t;p.depth=u;p.diameter=function(d){const g=m(d),y=v(d);d=u(d);return Math.sqrt(g*g+y*y+d*d)};p.empty=function(d){return d?ja(d,l):t(l)};p.equals=function(d,g,y){if(e.isNone(d)||e.isNone(g))return d===g;if(!ba(d)||!ba(g))return!1;
if(y)for(let M=0;M<d.length;M++){if(!y(d[M],g[M]))return!1}else for(y=0;y<d.length;y++)if(d[y]!==g[y])return!1;return!0};p.expandWithAABB=function(d,g){d[0]=Math.min(d[0],g[0]);d[1]=Math.min(d[1],g[1]);d[2]=Math.min(d[2],g[2]);d[3]=Math.max(d[3],g[3]);d[4]=Math.max(d[4],g[4]);d[5]=Math.max(d[5],g[5])};p.expandWithBuffer=function(d,g,y=0,M=g.length/3){let O=d[0],F=d[1],L=d[2],Y=d[3],ka=d[4],fa=d[5];for(let J=0;J<M;J++)O=Math.min(O,g[y+3*J]),F=Math.min(F,g[y+3*J+1]),L=Math.min(L,g[y+3*J+2]),Y=Math.max(Y,
g[y+3*J]),ka=Math.max(ka,g[y+3*J+1]),fa=Math.max(fa,g[y+3*J+2]);d[0]=O;d[1]=F;d[2]=L;d[3]=Y;d[4]=ka;d[5]=fa};p.expandWithNestedArray=function(d,g,y){const M=g.length;let O=d[0],F=d[1],L=d[2],Y=d[3],ka=d[4],fa=d[5];if(y)for(y=0;y<M;y++){var J=g[y];O=Math.min(O,J[0]);F=Math.min(F,J[1]);L=Math.min(L,J[2]);Y=Math.max(Y,J[0]);ka=Math.max(ka,J[1]);fa=Math.max(fa,J[2])}else for(y=0;y<M;y++)J=g[y],O=Math.min(O,J[0]),F=Math.min(F,J[1]),Y=Math.max(Y,J[0]),ka=Math.max(ka,J[1]);d[0]=O;d[1]=F;d[2]=L;d[3]=Y;d[4]=
ka;d[5]=fa};p.expandWithOffset=function(d,g,y,M){d[0]=Math.min(d[0],d[0]+g);d[3]=Math.max(d[3],d[3]+g);d[1]=Math.min(d[1],d[1]+y);d[4]=Math.max(d[4],d[4]+y);d[2]=Math.min(d[2],d[2]+M);d[5]=Math.max(d[5],d[5]+M)};p.expandWithRect=function(d,g){d[0]=Math.min(d[0],g[0]);d[1]=Math.min(d[1],g[1]);d[3]=Math.max(d[3],g[2]);d[4]=Math.max(d[4],g[3])};p.expandWithVec3=function(d,g){d[0]=Math.min(d[0],g[0]);d[1]=Math.min(d[1],g[1]);d[2]=Math.min(d[2],g[2]);d[3]=Math.max(d[3],g[0]);d[4]=Math.max(d[4],g[1]);d[5]=
Math.max(d[5],g[2])};p.fromExtent=function(d,g=t()){g[0]=d.xmin;g[1]=d.ymin;g[2]=d.zmin;g[3]=d.xmax;g[4]=d.ymax;g[5]=d.zmax;return g};p.fromMinMax=function(d,g,y=t()){y[0]=d[0];y[1]=d[1];y[2]=d[2];y[3]=g[0];y[4]=g[1];y[5]=g[2];return y};p.fromRect=function(d,g){d[0]=g[0];d[1]=g[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=g[2];d[4]=g[3];d[5]=Number.POSITIVE_INFINITY;return d};p.fromValues=G;p.getMax=function(d,g){g[0]=d[3];g[1]=d[4];g[2]=d[5];return g};p.getMin=function(d,g){g[0]=d[0];g[1]=d[1];g[2]=d[2];
return g};p.height=v;p.intersects=D;p.intersectsClippingArea=function(d,g){return e.isNone(g)?!0:D(d,g)};p.is=ba;p.isPoint=function(d){return 0===m(d)&&0===u(d)&&0===v(d)};p.maximumDimension=function(d){return Math.max(m(d),v(d),u(d))};p.offset=function(d,g,y,M,O=d){O[0]=d[0]+g;O[1]=d[1]+y;O[2]=d[2]+M;O[3]=d[3]+g;O[4]=d[4]+y;O[5]=d[5]+M;return O};p.scale=function(d,g,y=d){const M=d[0]+m(d)/2,O=d[1]+u(d)/2,F=d[2]+v(d)/2;y[0]=M+(d[0]-M)*g;y[1]=O+(d[1]-O)*g;y[2]=F+(d[2]-F)*g;y[3]=M+(d[3]-M)*g;y[4]=O+
(d[4]-O)*g;y[5]=F+(d[5]-F)*g;return y};p.set=ja;p.setMax=function(d,g,y=d){y[3]=g[0];y[4]=g[1];y[5]=g[2];y!==d&&(y[0]=d[0],y[1]=d[1],y[2]=d[2]);return d};p.setMin=function(d,g,y=d){y[0]=g[0];y[1]=g[1];y[2]=g[2];y!==d&&(y[3]=d[3],y[4]=d[4],y[5]=d[5]);return y};p.size=function(d,g=[0,0,0]){g[0]=m(d);g[1]=u(d);g[2]=v(d);return g};p.toExtent=function(d,g){return isFinite(d[2])||isFinite(d[5])?new da({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:g}):new da({xmin:d[0],xmax:d[3],
ymin:d[1],ymax:d[4],spatialReference:g})};p.toRect=function(d,g){g||(g=I.create());g[0]=d[0];g[1]=d[1];g[2]=d[3];g[3]=d[4];return g};p.width=m;p.wrap=function(d,g,y,M,O,F){return G(d,g,y,M,O,F,n)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../chunks/rbush"],function(p,e,da){function I(m,u){t.minX=u[0];t.minY=u[1];t.maxX=u[2];t.maxY=u[3];return m.search(t)}const t={minX:0,minY:0,maxX:0,maxY:0};
let G=function(){function m(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=da.rbush(9,e("csp-restrictions")?v=>({minX:v[0],minY:v[1],maxX:v[2],maxY:v[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const v=Array(this._idByBounds.size);let D=0;this._idByBounds.forEach((ja,ba)=>{v[D++]=ba});this._indexInvalid=!1;this._index.clear();this._index.load(v)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(v=>
this._idByBounds.has(v))),this._boundsToLoad.length=0)}}var u=m.prototype;u.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};u.delete=function(v){const D=this._boundsById.get(v);this._boundsById.delete(v);D&&(this._idByBounds.delete(D),this._indexInvalid||this._index.remove(D))};u.forEachInBounds=function(v,D){this._loadIndex();for(const ja of I(this._index,v))D(this._idByBounds.get(ja))};u.get=function(v){return this._boundsById.get(v)};
u.has=function(v){return this._boundsById.has(v)};u.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};u.set=function(v,D){if(!this._indexInvalid){const ja=this._boundsById.get(v);ja&&(this._index.remove(ja),this._idByBounds.delete(ja))}this._boundsById.set(v,D);D&&(this._idByBounds.set(D,v),this._indexInvalid||(this._boundsToLoad.push(D),5E4<this._boundsToLoad.length&&this._loadIndex()))};return m}();p.BoundsStore=G;Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(p,e){function da(n,d){if(!(this instanceof da))return new da(n,d);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));d&&("function"===typeof d?this.toBBox=d:this._initFormat(d));this.clear()}function I(n,d){t(n,0,n.children.length,d,n)}function t(n,d,g,y,M){M||(M=l(null));M.minX=Infinity;M.minY=Infinity;M.maxX=-Infinity;M.maxY=-Infinity;for(var O;d<g;d++)O=n.children[d],
G(M,n.leaf?y(O):O);return M}function G(n,d){n.minX=Math.min(n.minX,d.minX);n.minY=Math.min(n.minY,d.minY);n.maxX=Math.max(n.maxX,d.maxX);n.maxY=Math.max(n.maxY,d.maxY);return n}function m(n,d){return n.minX-d.minX}function u(n,d){return n.minY-d.minY}function v(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function D(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ja(n,d){return n.minX<=d.minX&&n.minY<=d.minY&&d.maxX<=n.maxX&&d.maxY<=n.maxY}function ba(n,d){return d.minX<=n.maxX&&d.minY<=n.maxY&&d.maxX>=
n.minX&&d.maxY>=n.minY}function l(n){return{children:n,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function A(n,d,g,y,M){for(var O=[d,g],F;O.length;)g=O.pop(),d=O.pop(),g-d<=y||(F=d+Math.ceil((g-d)/y/2)*y,e.quickselect(n,F,d,g,M),O.push(d,F,F,g))}da.prototype={all:function(){return this._all(this.data,[])},search:function(n){var d=this.data,g=[],y=this.toBBox;if(!ba(n,d))return g;for(var M=[],O,F,L,Y;d;){O=0;for(F=d.children.length;O<F;O++)L=d.children[O],Y=d.leaf?
y(L):L,ba(n,Y)&&(d.leaf?g.push(L):ja(n,Y)?this._all(L,g):M.push(L));d=M.pop()}return g},collides:function(n){var d=this.data,g=this.toBBox;if(!ba(n,d))return!1;for(var y=[],M,O,F,L;d;){M=0;for(O=d.children.length;M<O;M++)if(F=d.children[M],L=d.leaf?g(F):F,ba(n,L)){if(d.leaf||ja(n,L))return!0;y.push(F)}d=y.pop()}return!1},load:function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var d=0,g=n.length;d<g;d++)this.insert(n[d]);return this}n=this._build(n.slice(),0,n.length-1,0);this.data.children.length?
this.data.height===n.height?this._splitRoot(this.data,n):(this.data.height<n.height&&(d=this.data,this.data=n,n=d),this._insert(n,this.data.height-n.height-1,!0)):this.data=n;return this},insert:function(n){n&&this._insert(n,this.data.height-1);return this},clear:function(){this.data=l([]);return this},remove:function(n,d){if(!n)return this;for(var g=this.data,y=this.toBBox(n),M=[],O=[],F,L,Y,ka;g||M.length;){g||(g=M.pop(),L=M[M.length-1],F=O.pop(),ka=!0);if(g.leaf){a:{Y=n;var fa=g.children,J=d;if(J){for(var T=
0;T<fa.length;T++)if(J(Y,fa[T])){Y=T;break a}Y=-1}else Y=fa.indexOf(Y)}if(-1!==Y){g.children.splice(Y,1);M.push(g);this._condense(M);break}}ka||g.leaf||!ja(g,y)?L?(F++,g=L.children[F],ka=!1):g=null:(M.push(g),O.push(F),F=0,L=g,g=g.children[0])}return this},toBBox:function(n){return n},compareMinX:m,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(n){this.data=n;return this},_all:function(n,d){for(var g=[];n;)n.leaf?d.push.apply(d,n.children):g.push.apply(g,n.children),n=g.pop();
return d},_build:function(n,d,g,y){var M=g-d+1,O=this._maxEntries;if(M<=O){var F=l(n.slice(d,g+1));I(F,this.toBBox);return F}y||(y=Math.ceil(Math.log(M)/Math.log(O)),O=Math.ceil(M/Math.pow(O,y-1)));F=l([]);F.leaf=!1;F.height=y;M=Math.ceil(M/O);O=M*Math.ceil(Math.sqrt(O));var L;for(A(n,d,g,O,this.compareMinX);d<=g;d+=O){var Y=Math.min(d+O-1,g);A(n,d,Y,M,this.compareMinY);for(L=d;L<=Y;L+=M){var ka=Math.min(L+M-1,Y);F.children.push(this._build(n,L,ka,y-1))}}I(F,this.toBBox);return F},_chooseSubtree:function(n,
d,g,y){for(var M,O,F,L,Y,ka,fa,J;;){y.push(d);if(d.leaf||y.length-1===g)break;fa=J=Infinity;M=0;for(O=d.children.length;M<O;M++)F=d.children[M],Y=v(F),ka=(Math.max(F.maxX,n.maxX)-Math.min(F.minX,n.minX))*(Math.max(F.maxY,n.maxY)-Math.min(F.minY,n.minY))-Y,ka<J?(J=ka,fa=Y<fa?Y:fa,L=F):ka===J&&Y<fa&&(fa=Y,L=F);d=L||d.children[0]}return d},_insert:function(n,d,g){var y=this.toBBox;g=g?n:y(n);y=[];var M=this._chooseSubtree(g,this.data,d,y);M.children.push(n);for(G(M,g);0<=d;)if(y[d].children.length>this._maxEntries)this._split(y,
d),d--;else break;this._adjustParentBBoxes(g,y,d)},_split:function(n,d){var g=n[d],y=g.children.length,M=this._minEntries;this._chooseSplitAxis(g,M,y);y=this._chooseSplitIndex(g,M,y);y=l(g.children.splice(y,g.children.length-y));y.height=g.height;y.leaf=g.leaf;I(g,this.toBBox);I(y,this.toBBox);d?n[d-1].children.push(y):this._splitRoot(g,y)},_splitRoot:function(n,d){this.data=l([n,d]);this.data.height=n.height+1;this.data.leaf=!1;I(this.data,this.toBBox)},_chooseSplitIndex:function(n,d,g){var y,M;
var O=M=Infinity;for(y=d;y<=g-d;y++){var F=t(n,0,y,this.toBBox);var L=t(n,y,g,this.toBBox);var Y=Math.max(0,Math.min(F.maxX,L.maxX)-Math.max(F.minX,L.minX))*Math.max(0,Math.min(F.maxY,L.maxY)-Math.max(F.minY,L.minY));F=v(F)+v(L);if(Y<O){O=Y;var ka=y;M=F<M?F:M}else Y===O&&F<M&&(M=F,ka=y)}return ka},_chooseSplitAxis:function(n,d,g){var y=n.leaf?this.compareMinX:m,M=n.leaf?this.compareMinY:u,O=this._allDistMargin(n,d,g,y);d=this._allDistMargin(n,d,g,M);O<d&&n.children.sort(y)},_allDistMargin:function(n,
d,g,y){n.children.sort(y);y=this.toBBox;var M=t(n,0,d,y),O=t(n,g-d,g,y),F=D(M)+D(O),L;for(L=d;L<g-d;L++){var Y=n.children[L];G(M,n.leaf?y(Y):Y);F+=D(M)}for(L=g-d-1;L>=d;L--)Y=n.children[L],G(O,n.leaf?y(Y):Y),F+=D(O);return F},_adjustParentBBoxes:function(n,d,g){for(;0<=g;g--)G(d[g],n)},_condense:function(n){for(var d=n.length-1,g;0<=d;d--)0===n[d].children.length?0<d?(g=n[d-1].children,g.splice(g.indexOf(n[d]),1)):this.clear():I(n[d],this.toBBox)},_initFormat:function(n){var d=["return a"," - b",
";"];this.compareMinX=new Function("a","b",d.join(n[0]));this.compareMinY=new Function("a","b",d.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};p.rbush=da})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(p,e){e=e.createCommonjsModule(function(da){(function(I){I=I();void 0!==I&&(da.exports=I)})(function(){function I(m,u,v,D,ja){for(;D>v;){if(600<D-v){var ba=D-v+1,l=u-v+1,A=Math.log(ba),
n=.5*Math.exp(2*A/3);A=.5*Math.sqrt(A*n*(ba-n)/ba)*(0>l-ba/2?-1:1);I(m,u,Math.max(v,Math.floor(u-l*n/ba+A)),Math.min(D,Math.floor(u+(ba-l)*n/ba+A)),ja)}ba=m[u];l=v;n=D;t(m,v,u);for(0<ja(m[D],ba)&&t(m,v,D);l<n;){t(m,l,n);l++;for(n--;0>ja(m[l],ba);)l++;for(;0<ja(m[n],ba);)n--}0===ja(m[v],ba)?t(m,v,n):(n++,t(m,n,D));n<=u&&(v=n+1);u<=n&&(D=n-1)}}function t(m,u,v){var D=m[u];m[u]=m[v];m[v]=D}function G(m,u){return m<u?-1:m>u?1:0}return function(m,u,v,D,ja){I(m,u,v||0,D||m.length-1,ja||G)}})});p.quickselect=
e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../OptimizedFeature","../OptimizedGeometry","../centroid"],function(p,e,da,I){const t={getObjectId(G){return G.objectId},getAttributes(G){return G.attributes},getAttribute(G,m){return G.attributes[m]},cloneWithGeometry(G,m){return new e(m,G.attributes,null,G.objectId)},getGeometry(G){return G.geometry},getCentroid(G,m){G.centroid||(G.centroid=I.getCentroidOptimizedGeometry(new da,G.geometry,m.hasZ,m.hasM));
return G.centroid}};p.default=t;p.optimizedFeatureQueryEngineAdapter=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(p){function e(I,t,G,m,u,v,D=1){v=u?v?4:3:v?3:2;let ja=G,ba=G+v,l=0,A=0,n=G=0,d=0;for(let g=0,y=m-1;g<y;g++,ja+=v,ba+=v){m=t[ja];const M=t[ja+1],O=t[ja+2],F=t[ba],L=t[ba+1],Y=t[ba+2];let ka=m*L-F*M;n+=ka;l+=(m+F)*ka;A+=(M+L)*ka;u&&(ka=m*Y-F*O,G+=(O+Y)*ka,d+=ka);m<I[0]&&(I[0]=m);m>I[1]&&(I[1]=m);M<I[2]&&(I[2]=
M);M>I[3]&&(I[3]=M);u&&(O<I[4]&&(I[4]=O),O>I[5]&&(I[5]=O))}0<n*D&&(n*=-1);0<d*D&&(d*=-1);if(!n)return null;I=[l,A,.5*n];u&&(I[3]=G,I[4]=.5*d);return I}function da(I,t,G,m,u){u=m?u?4:3:u?3:2;let v=t,D=t+u,ja=0,ba=0,l=0,A=0;for(let y=0,M=G-1;y<M;y++,v+=u,D+=u){var n=I[v];const O=I[v+1],F=I[v+2],L=I[D],Y=I[D+1],ka=I[D+2];if(m){{var d=L-n;var g=Y-O;const fa=ka-F;d=Math.sqrt(d*d+g*g+fa*fa)}}else d=L-n,g=Y-O,d=Math.sqrt(d*d+g*g);d&&(ja+=d,m?(n=[n+.5*(L-n),O+.5*(Y-O),F+.5*(ka-F)],ba+=d*n[0],l+=d*n[1],A+=
d*n[2]):(n=[n+.5*(L-n),O+.5*(Y-O)],ba+=d*n[0],l+=d*n[1]))}return 0<ja?m?[ba/ja,l/ja,A/ja]:[ba/ja,l/ja]:0<G?m?[I[t],I[t+1],I[t+2]]:[I[t],I[t+1]]:null}p.getCentroidOptimizedGeometry=function(I,t,G,m,u){if(!t||!t.lengths.length)return null;const v="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;I.lengths.length&&(I.lengths.length=0);I.coords.length&&(I.coords.length=0);u=I.coords;const D=[],ja=G?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:ba,coords:l}=t,A=G?m?4:3:m?3:2;let n=0;for(var d of ba){const g=e(ja,l,n,d,G,m,v);g&&D.push(g);n+=d*A}D.sort((g,y)=>{let M=v*g[2]-v*y[2];0===M&&G&&(M=g[4]-y[4]);return M});D.length&&(d=6*D[0][2],u[0]=D[0][0]/d,u[1]=D[0][1]/d,G&&(d=6*D[0][4],u[2]=0!==d?D[0][3]/d:0),u[0]<ja[0]||u[0]>ja[1]||u[1]<ja[2]||u[1]>ja[3]||G&&(u[2]<ja[4]||u[2]>ja[5]))&&
(u.length=0);if(!u.length)if(t=t.lengths[0]?da(l,0,ba[0],G,m):null)u[0]=t[0],u[1]=t[1],G&&2<t.length&&(u[2]=t[2]);else return null;return I};p.lineCentroid=da;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ../../../chunks/spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l,A,n,d,g,y,M,O,F){function L(Q){return Q.every(P=>"exceedslimit"!==P.statisticType)}const Y=new Set,ka=new ja.MemCacheStorage(2E6);let fa=0,J=function(){function Q(B){this.capabilities={query:n.queryCapabilities};this.geometryType=B.geometryType;this.hasM=B.hasM;this.hasZ=B.hasZ;this.objectIdField=B.objectIdField;this.spatialReference=B.spatialReference;this.definitionExpression=B.definitionExpression;this.featureStore=B.featureStore;this.aggregateAdapter=B.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=B.timeInfo;B.cacheSpatialQueries&&(this._geometryQueryCache=new ja.MemCache(fa++ +"$$",ka));this.fieldsIndex=new A(B.fields);B.scheduler&&B.task&&(this._frameQueue=new l,this._frameTask=B.scheduler.registerTask(B.task,q=>this._update(q),()=>0<this._frameQueue.length))}var P=Q.prototype;P.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};P.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};P.executeQuery=async function(B={},q){let H=da.clone(B),C;try{H=await this._schedule(()=>M.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),
q),C=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),C=await this._reschedule(()=>C.executeAggregateIdsQuery(H),q),C=await this._reschedule(()=>C.executeObjectIdsQuery(H),q),C=await this._reschedule(()=>C.executeTimeQuery(H),q),C=await this._reschedule(()=>C.executeAttributesQuery(H),q)}catch(W){if(W!==M.QUERY_ENGINE_EMPTY_RESULT)throw W;C=new F([],null,this)}return C.createQueryResponse(H)};P.executeQueryForCount=async function(B={},q){let H=da.clone(B),C;H.returnGeometry=!1;H.returnCentroid=
!1;H.outSR=null;try{H=await this._schedule(()=>M.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),q),C=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),C=await this._reschedule(()=>C.executeAggregateIdsQuery(H),q),C=await this._reschedule(()=>C.executeObjectIdsQuery(H),q),C=await this._reschedule(()=>C.executeTimeQuery(H),q),C=await this._reschedule(()=>C.executeAttributesQuery(H),q)}catch(W){if(W!==M.QUERY_ENGINE_EMPTY_RESULT)throw W;
return 0}return C.createQueryResponseForCount(H)};P.executeQueryForExtent=async function(B={},q){let H=da.clone(B),C;B=H.outSR;try{H=await this._schedule(()=>M.normalizeQuery(H,this.definitionExpression,this.spatialReference),q);H=await this._reschedule(()=>this._checkQuerySupport(H),q);H.returnGeometry=!0;H.returnCentroid=!1;H.outSR=null;C=await this._reschedule(()=>this._executeGeometryQuery(H,q),q);C=await this._reschedule(()=>C.executeAggregateIdsQuery(H),q);C=await this._reschedule(()=>C.executeObjectIdsQuery(H),
q);C=await this._reschedule(()=>C.executeTimeQuery(H),q);C=await this._reschedule(()=>C.executeAttributesQuery(H),q);const W=C.size;if(!W)return{count:W,extent:null};d.set(ia,d.NEGATIVE_INFINITY);this.featureStore.forEachBounds(C.items,pa=>d.expandWithAABB(ia,pa),T);const X={xmin:ia[0],ymin:ia[1],xmax:ia[3],ymax:ia[4],spatialReference:M.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ia[2])&&isFinite(ia[5])&&(X.zmin=ia[2],X.zmax=ia[5]);const ha=g.project(X,C.spatialReference,B);
ha.spatialReference=M.cleanFromGeometryEngine(B||this.spatialReference);if(0===ha.xmax-ha.xmin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.xmin-=pa;ha.xmax+=pa}if(0===ha.ymax-ha.ymin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.ymin-=pa;ha.ymax+=pa}if(this.hasZ&&null!=ha.zmin&&null!=ha.zmax&&0===ha.zmax-ha.zmin){const pa=D.getMetersPerUnitForSR(ha.spatialReference);ha.zmin-=pa;ha.zmax+=pa}return{count:W,extent:ha}}catch(W){if(W===M.QUERY_ENGINE_EMPTY_RESULT)return{count:0,
extent:null};throw W;}};P.executeQueryForIds=async function(B={},q){return this.executeQueryForIdSet(B,q).then(H=>Array.from(H))};P.executeQueryForIdSet=async function(B={},q){let H=da.clone(B),C;H.returnGeometry=!1;H.returnCentroid=!1;H.outSR=null;try{H=await this._schedule(()=>M.normalizeQuery(H,this.definitionExpression,this.spatialReference),q);H=await this._reschedule(()=>this._checkQuerySupport(H),q);C=await this._reschedule(()=>this._executeGeometryQuery(H,q),q);C=await this._reschedule(()=>
C.executeAggregateIdsQuery(H),q);C=await this._reschedule(()=>C.executeObjectIdsQuery(H),q);C=await this._reschedule(()=>C.executeTimeQuery(H),q);C=await this._reschedule(()=>C.executeAttributesQuery(H),q);const W=C.items,X=new Set;await this._reschedule(()=>{for(const ha of W)X.add(C.featureAdapter.getObjectId(ha))},q);return X}catch(W){if(W===M.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw W;}};P.executeQueryForLatestObservations=async function(B={},q){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new t("feature-store:unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:B,timeInfo:this.timeInfo});let H=da.clone(B),C;try{H=await this._schedule(()=>M.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),q),C=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),C=await this._reschedule(()=>C.executeAggregateIdsQuery(H),q),C=await this._reschedule(()=>C.executeObjectIdsQuery(H),q),C=await this._reschedule(()=>C.executeTimeQuery(H),q),C=await this._reschedule(()=>
C.executeAttributesQuery(H),q),C=await this._reschedule(()=>C.filterLatest(),q)}catch(W){if(W!==M.QUERY_ENGINE_EMPTY_RESULT)throw W;C=new F([],null,this)}return C.createQueryResponse(H)};P._schedule=async function(B,q){return this._frameQueue?this._frameQueue.push(B,q):B()};P._reschedule=async function(B,q){return this._frameQueue?this._frameQueue.unshift(B,q):B()};P._update=function(B){for(this._budget=B;!B.done&&this._frameQueue&&this._frameQueue.process();)B.madeProgress();this._budget=null};P._getAll=
function(){if(!this._allItems){const B=[];this.featureStore.forEach(q=>B.push(q));this._allItems=new F(B,null,this)}return this._allItems};P._executeGeometryQuery=async function(B,q){const {geometry:H,outSR:C,spatialRel:W}=B,X=m.isValid(C)&&!m.equals(this.spatialReference,C),ha=this._geometryQueryCache?X?JSON.stringify({geometry:H,spatialRelationship:W,outSpatialReference:C}):JSON.stringify({geometry:H,spatialRelationship:W}):null;if(ha){var pa=this._geometryQueryCache.get(ha);if(!I.isUndefined(pa))return pa}pa=
async r=>{if(X&&(B.returnGeometry||B.returnCentroid))return r=await r.project(C),ha&&this._geometryQueryCache.put(ha,r,r.size||1),r;ha&&this._geometryQueryCache.put(ha,r,r.size||1);return r};if(!H)return pa(this._getAll());const ra=this.featureAdapter;if("esriSpatialRelDisjoint"===W){const r=this._searchFeatures(this._getQueryBBoxes(H));if(!r.length)return pa(this._getAll());let E,aa;const ta=new Set;for(var Aa of r)ta.add(ra.getObjectId(Aa));await this._reschedule(()=>{let xa=0;E=Array(ta.size);
this.featureStore.forEach(b=>E[xa++]=b);aa=ta},q);Aa=await this._reschedule(async()=>{const xa=await M.getSpatialQueryOperator(W,H,this.geometryType,this.hasZ,this.hasM);return new F(await this._runSpatialFilter(E,b=>!aa.has(ra.getObjectId(b))||xa(ra.getGeometry(b)),q),H,this)},q);return pa(Aa)}Aa=this._searchFeatures(this._getQueryBBoxes(H));if(!Aa.length)return pa=new F([],H,this),ha&&this._geometryQueryCache.put(ha,pa,pa.size||1),pa;if(this._canExecuteSoloPass(H,B))return pa(new F(Aa,H,this));
const Ca=await M.getSpatialQueryOperator(W,H,this.geometryType,this.hasZ,this.hasM);Aa=await this._runSpatialFilter(Aa,r=>Ca(ra.getGeometry(r)),q);return pa(new F(Aa,H,this))};P._runSpatialFilter=async function(B,q,H){if(!q)return B;if(!this._budget)return B.filter(ha=>q(ha));let C=0;const W=[],X=async()=>{for(;C<B.length;){const ha=B[C];q(ha)&&W.push(ha);this._budget.done&&await this._reschedule(()=>X(),H);++C}};return this._reschedule(()=>X(),H).then(()=>W)};P._canExecuteSoloPass=function(B,q){const {geometryType:H}=
this;({spatialRel:q}=q);return M.canQueryWithRBush(B)&&("esriSpatialRelEnvelopeIntersects"===q||"esriGeometryPoint"===H&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===q||"esriSpatialRelWithin"===q))};P._getQueryBBoxes=function(B){if(M.canQueryWithRBush(B)){if(v.isExtent(B))return[ba.fromValues(B.xmin,B.ymin,B.xmax,B.ymax)];if(v.isPolygon(B))return B.rings.map(q=>ba.fromValues(Math.min(q[0][0],q[2][0]),Math.min(q[0][1],q[2][1]),Math.max(q[0][0],q[2][0]),Math.max(q[0][1],q[2][1])))}return[u.getBoundsXY(ba.create(),
B)]};P._searchFeatures=function(B){for(const C of B)this.featureStore.forEachInBounds(C,W=>{Y.add(W)});const q=Array(Y.size);let H=0;Y.forEach(C=>q[H++]=C);Y.clear();return q};P._checkQuerySupport=async function(B){if(0>B.distance||null!=B.geometryPrecision||B.multipatchOption||B.pixelSize||B.relationParam||B.text)throw new t("feature-store:unsupported-query","Unsupported query options",{query:B});return G.all([this._checkAttributesQuerySupport(B),this._checkStatisticsQuerySupport(B),M.checkSpatialQuerySupport(B,
this.geometryType,this.spatialReference),g.checkProjectionSupport(this.spatialReference,B.outSR)]).then(()=>B)};P._checkAttributesQuerySupport=function(B){const {outFields:q,orderByFields:H,returnDistinctValues:C,outStatistics:W}=B,X=W?W.map(ha=>ha.outStatisticFieldName&&ha.outStatisticFieldName.toLowerCase()):[];if(H&&0<H.length){const ha=H.map(pa=>{const ra=pa.toLowerCase();return-1<ra.indexOf(" asc")?ra.split(" asc")[0]:-1<ra.indexOf(" desc")?ra.split(" desc")[0]:pa}).filter(pa=>-1===X.indexOf(pa));
y.validateFields(this.fieldsIndex,ha,"orderByFields contains missing fields")}if(q&&0<q.length)y.validateFields(this.fieldsIndex,q,"outFields contains missing fields");else if(C)throw new t("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:B});y.validateWhere(this.fieldsIndex,B.where)};P._checkStatisticsQuerySupport=async function(B){const {outStatistics:q,groupByFieldsForStatistics:H,having:C}=B;var W=H&&H.length,X=q&&q.length;if(C){if(!W||!X)throw new t("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:B});y.validateHaving(this.fieldsIndex,C,q)}if(X&&L(q)){X=q.map(ha=>ha.onStatisticField);y.validateFields(this.fieldsIndex,X,"onStatisticFields contains missing fields");W&&y.validateFields(this.fieldsIndex,H,"groupByFieldsForStatistics contains missing fields");for(const ha of q){const {onStatisticField:pa,statisticType:ra}=ha;if(("percentile_disc"===ra||"percentile_cont"===ra)&&"statisticParameters"in ha){if({statisticParameters:W}=
ha,!W)throw new t("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ha,query:B});}else if("count"!==ra&&pa&&y.hasInvalidFieldType(pa,this.fieldsIndex))throw new t("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ha,query:B});}}};e._createClass(Q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const B=this.featureStore.fullBounds;return B?{xmin:B[0],
ymin:B[1],xmax:B[2],ymax:B[3],spatialReference:M.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=O.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return Q}();const T=d.create(),ia=d.create();p.Feature=function(Q,P=null,B,q,H){this.attributes=Q;this.geometry=B;this.centroid=q;this.filterFlags=H;this.groupId=-1;this.displayId=P};p.default=J;Object.defineProperty(p,"__esModule",{value:!0})})},
"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(p,e,da){let I=function(){function G(u,v,D){this._namespace=u;this._storage=v;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";D&&(this._storage.registerRemoveFunc(this._namespace,D),this._removeFunc=!0)}var m=G.prototype;m.resetHitRate=function(){this._hit=this._miss=0};m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&
this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};m.put=function(u,v,D,ja=0){this._storage.put(this._namespace+u,v,D,ja)};m.get=function(u){u=this._storage.get(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};m.pop=function(u){u=this._storage.pop(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};m.updateSize=function(u,v,D){this._storage.updateSize(this._namespace+u,v,D)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=
function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};e._createClass(G,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return G}(),t=function(){function G(u=10485760){this._maxSize=u;this._db=new Map;
this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new da}var m=G.prototype;m.register=function(u){this._users.push(u)};m.deregister=function(u){this._users.removeUnordered(u)};m.registerRemoveFunc=function(u,v){this._removeFuncs.push([u,v])};m.deregisterRemoveFunc=function(u){this._removeFuncs=this._removeFuncs.filter(v=>v[0]!==u)};m.put=function(u,v,D,ja){const ba=this._db.get(u);ba&&(this._size-=ba.size,this._db.delete(u),ba.entry!==v&&this._notifyRemoved(u,ba.entry));D>this._maxSize?
this._notifyRemoved(u,v):void 0===v?console.warn("Refusing to cache undefined entry "):!D||0>D?console.warn("Refusing to cache entry with invalid size "+D):(ja=1+Math.max(ja,-3)- -3,this._db.set(u,{entry:v,size:D,lifetime:ja,lives:ja}),this._size+=D,this._checkSizeLimit())};m.updateSize=function(u,v,D){const ja=this._db.get(u);ja&&ja.entry===v&&(this._size-=ja.size,D>this._maxSize?this._notifyRemoved(u,v):(ja.size=D,this._size+=D,this._checkSizeLimit()))};m.pop=function(u){const v=this._db.get(u);
if(v)return this._size-=v.size,this._db.delete(u),++this._hit,v.entry;++this._miss};m.get=function(u){const v=this._db.get(u);if(void 0===v)++this._miss;else return this._db.delete(u),v.lives=v.lifetime,this._db.set(u,v),++this._hit,v.entry};m.getStats=function(){const u={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},v={},D=[];this._db.forEach((l,A)=>{const n=l.lifetime;D[n]=(D[n]||
0)+l.size;this._users.forAll(d=>{d=d.namespace;A.startsWith(d)&&(v[d]=(v[d]||0)+l.size)})});const ja={};this._users.forAll(l=>{const A=l.namespace;!isNaN(l.hitRate)&&0<l.hitRate?(v[A]=v[A]||0,ja[A]=Math.round(100*l.hitRate)+"%"):ja[A]="0%"});var ba=Object.keys(v);ba.forEach(l=>v[l]=v[l]/this._size*100);ba.sort((l,A)=>v[A]-v[l]);ba.forEach(l=>u[l]=Math.round(v[l])+"% / "+ja[l]);for(ba=D.length-1;0<=ba;--ba){const l=D[ba];l&&(u["Priority "+(ba+-3-1)]=Math.round(l/this.size*100)+"%")}return u};m.resetStats=
function(){this._hit=this._miss=0;this._users.forAll(u=>u.resetHitRate())};m.clear=function(u){this._db.forEach((v,D)=>{D.startsWith(u)&&(this._size-=v.size,this._db.delete(D),this._notifyRemoved(D,v.entry))})};m.clearAll=function(){this._db.forEach((u,v)=>this._notifyRemoved(v,u.entry));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemoved=function(u,v){this._removeFuncs.forEach(D=>{if(u.startsWith(D[0]))D[1](v)})};m._checkSizeLimit=function(){if(!(this._size<=
this._maxSize))for(const [u,v]of this._db)if(this._db.delete(u),1>=v.lives?(this._size-=v.size,this._notifyRemoved(u,v.entry)):(--v.lives,this._db.set(u,v)),this._size<=.9*this.maxSize)break};e._createClass(G,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(u){this._maxSize=Math.max(u,0);this._checkSizeLimit()}}]);return G}();p.MIN_PRIORITY=-3;p.MemCache=I;p.MemCacheStorage=t;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(p){p.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,
supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(p,e,da){function I(v,D){return v?m.get(v,D):null}function t(v,D,ja,ba=!0){const l=[];for(const A of D)if("*"!==A&&
!v.has(A))if(ba){D=G(A);try{const n=I(D,v);if(!n)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!n.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:n});t(v,n.fieldNames,"expression contains missing fields")}catch(n){if((D=n&&n.details)&&(D.clause||D.where))throw n;D&&D.missingFields?l.push(...D.missingFields):l.push(A)}}else l.push(A);if(l.length)throw new e("feature-store:unsupported-query",ja,{missingFields:l});
}function G(v){return v.split(" as ")[0]}const m=new da.WhereClauseCache(50,500),u=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));p.getAliasFromFieldName=function(v){return v.split(" as ")[1]};p.getExpressionFromFieldName=G;p.getWhereClause=I;p.hasInvalidFieldType=function(v,D){return(v=D.get(v))?!u.has(v.type):!1};p.validateFields=t;p.validateHaving=function(v,D,ja){if(!D)return!0;const ba=
m.get(D,v);if(!ba)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:D});if(!ba.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:D});t(v,ba.fieldNames,"having contains missing fields");if(!ba.getExpressions().every(l=>{const {aggregateType:A,field:n}=l,d=v.has(n)&&v.get(n).name;return ja.some(g=>{const {onStatisticField:y,statisticType:M}=g;return(v.has(y)&&v.get(y).name)===d&&M.toLowerCase().trim()===
A})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:D});return!0};p.validateWhere=function(v,D){if(!D)return!0;const ja=m.get(D,v);if(!ja)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!ja.isStandardized)throw new e("feature-store:unsupported-query","where clause is not standard",{where:D});t(v,ja.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(p,"__esModule",
{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(p,e,da){let I=function(){function t(G,m){this._cache=new e(G);this._invalidCache=new e(m)}t.prototype.get=function(G,m){const u=`${m.uid}:${G}`,v=this._cache.get(u);if(v)return v;if(void 0!==this._invalidCache.get(u))return null;try{const D=da.WhereClause.create(G,m);this._cache.put(u,D);return D}catch{return this._invalidCache.put(u,null),null}};return t}();p.WhereClauseCache=I;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function e(I,t){this._storage=new p.MemCacheStorage;this._storage.maxSize=I;t&&this._storage.registerRemoveFunc("",t)}var da=e.prototype;da.put=function(I,t){this._storage.put(I,t,1,1)};da.pop=function(I){return this._storage.pop(I)};da.get=function(I){return this._storage.get(I)};da.clear=function(){this._storage.clearAll()};da.destroy=function(){this._storage.clearAll()};return e}()})},
"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(p,e,da,I,t,G){function m(P,B){P+="";return P.length>=B?P:Array(B-P.length+1).join("0")+P}function u(P,B,q="0",H="0",C="0",W="0",X="",ha="0",pa="0"){return"+"===X||"-"===X?(P=`${m(parseInt(P,10),4)}-${m(parseInt(B,10),2)}-${m(parseInt(q,10),2)}`,B="",10>parseFloat(W)&&(B="0"),H=`${m(parseInt(H,10),2)}:${m(parseInt(C,10),
2)}:${B+parseFloat(W).toString()}`,X=`${X}${m(parseInt(ha,10),2)}:${m(parseInt(pa,10),2)}`,new Date(P+"T"+H+X)):new Date(parseInt(P,10),parseInt(B,10)-1,parseInt(q,10),parseInt(H,10),parseInt(C,10),parseFloat(W))}function v(P){let B=Y.exec(P);if(null!==B){const [,q,H,C,W,X,ha]=B;return u(q,H,C,W,X,ha)}B=ka.exec(P);if(null!==B){const [,q,H,C,W,X,ha,pa,ra,Aa]=B;return u(q,H,C,W,X,ha,pa,ra,Aa)}B=fa.exec(P);if(null!==B){const [,q,H,C,W,X,ha,pa,ra]=B;return u(q,H,C,W,X,"0",ha,pa,ra)}B=J.exec(P);if(null!==
B){const [,q,H,C,W,X]=B;return u(q,H,C,W,X)}B=L.exec(P);if(null!==B){const [,q,H,C]=B;return u(q,H,C)}throw Error("SQL Invalid Timestamp");}function D(P){P=L.exec(P);if(null===P)throw Error("SQL Invalid Date");const [,B,q,H]=P;return new Date(parseInt(B,10),parseInt(q,10)-1,parseInt(H,10))}function ja(P){return Array.isArray(P)?P:[P]}function ba(P){return null!==P?!0!==P:null}function l(P,B){return null!=P&&null!=B?!0===P&&!0===B:!1===P||!1===B?!1:null}function A(P,B){return null!=P&&null!=B?!0===
P||!0===B:!0===P||!0===B?!0:null}function n(P,B){if(null==P)return null;let q=!1;for(const H of B)if(null==H)q=null;else if(P===H){q=!0;break}return q}function d(P,B,q){if(null==P)return null;let H="",C=0;for(let W=0;W<B.length;W++){const X=B.charAt(W);switch(C){case 0:X===q?C=1:H=0<="-[]/{}()*+?.\\^$|".indexOf(X)?H+("\\"+X):"%"===X?H+".*":"_"===X?H+".":H+X;break;case 1:H=0<="-[]/{}()*+?.\\^$|".indexOf(X)?H+("\\"+X):H+X,C=0}}return(new RegExp("^"+H+"$")).test(P)}function g(P){return P instanceof Date?
P.valueOf():P}function y(P,B,q){if(null==B||null==q)return null;B=g(B);q=g(q);switch(P){case "\x3c\x3e":return B!==q;case "\x3d":return B===q;case "\x3e":return B>q;case "\x3c":return B<q;case "\x3e\x3d":return B>=q;case "\x3c\x3d":return B<=q}}function M(P){const B=[],q={};for(const H of P)P=H.toLowerCase(),void 0===q[P]&&(B.push(H),q[P]=1);return B}function O(P,B,q){if(B instanceof t.SqlInterval)if(q instanceof Date)switch(P){case "+":return new Date(B.valueInMilliseconds()+q.getTime());case "-":return B.valueInMilliseconds()-
q.getTime();case "*":return B.valueInMilliseconds()*q.getTime();case "/":return B.valueInMilliseconds()/q.getTime()}else if(q instanceof t.SqlInterval)switch(P){case "+":return t.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+q.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-q.valueInMilliseconds());case "*":return B.valueInMilliseconds()*q.valueInMilliseconds();case "/":return B.valueInMilliseconds()/q.valueInMilliseconds()}else B=B.valueInMilliseconds();
else if(q instanceof t.SqlInterval)if(B instanceof Date)switch(P){case "+":return new Date(q.valueInMilliseconds()+B.getTime());case "-":return new Date(B.getTime()-q.valueInMilliseconds());case "*":return B.getTime()*q.valueInMilliseconds();case "/":return B.getTime()/q.valueInMilliseconds()}else q=q.valueInMilliseconds();else if(B instanceof Date&&"number"===typeof q)switch(q*=864E5,B=B.getTime(),P){case "+":return new Date(B+q);case "-":return new Date(B-q);case "*":return new Date(B*q);case "/":return new Date(B/
q)}else if(q instanceof Date&&"number"===typeof B)switch(B*=864E5,q=q.getTime(),P){case "+":return new Date(B+q);case "-":return new Date(B-q);case "*":return new Date(B*q);case "/":return new Date(B/q)}switch(P){case "+":return B+q;case "-":return B-q;case "*":return B*q;case "/":return B/q}}function F(P,B,q,H){P=H.getAttribute(P,B);return null!=P&&1===q[B]?new Date(P):P}const L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Y=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ka=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
fa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let T=function(){function P(){}P.makeBool=function(B){return!0===B};P.featureValue=function(B,q,H,C){return F(B,q,H,C)};P.equalsNull=function(B){return null===B};P.applyLike=function(B,q,H){return d(B,q,H)};P.ensureArray=function(B){return ja(B)};P.applyIn=function(B,q){return n(B,q)};P.currentDate=function(){const B=new Date;B.setHours(0,0,0,0);return B};P.makeSqlInterval=
function(B,q,H){return t.SqlInterval.createFromValueAndQualifer(B,q,H)};P.convertInterval=function(B){return B instanceof t.SqlInterval?B.valueInMilliseconds():B};P.currentTimestamp=function(){return new Date};P.compare=function(B,q,H){return y(B,q,H)};P.calculate=function(B,q,H){return O(B,q,H)};P.makeComparable=function(B){return g(B)};P.evaluateFunction=function(B,q){return t.evaluateFunction(B,q)};P.lookup=function(B,q){B=q[B];return void 0===B?null:B};P.between=function(B,q){return null==B||
null==q[0]||null==q[1]?null:B>=q[0]&&B<=q[1]};P.notbetween=function(B,q){return null==B||null==q[0]||null==q[1]?null:B<q[0]||B>q[1]};P.ternaryNot=function(B){return ba(B)};P.ternaryAnd=function(B,q){return l(B,q)};P.ternaryOr=function(B,q){return A(B,q)};return P}(),ia=function(){function P(q,H){this.fieldsIndex=H;this.datefields={};this.parameters={};this.parseTree=G.WhereGrammar.parse(q);const {isStandardized:C,isAggregate:W,referencedFieldNames:X}=this.extractExpressionInfo(H);this.referencedFieldNames=
X;this.isStandardized=C;this.isAggregate=W}P.create=function(q,H){return new P(q,H)};var B=P.prototype;B.testSet=function(q,H=Q){const C={};for(const W of this.fieldNames)C[W]=q.map(X=>H.getAttribute(X,W));return!!this.evaluateNode(this.parseTree,{attributes:C},Q)};B.calculateValue=function(q,H=Q){q=this.evaluateNode(this.parseTree,q,H);return q instanceof t.SqlInterval?q.valueInMilliseconds()/864E5:q};B.calculateValueCompiled=function(q,H=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(q,
this.parameters,H,this.datefields);if(da("csp-restrictions"))return this.calculateValue(q,H);this.compileMe();return this.parseTree._compiledVersion(q,this.parameters,H,this.datefields)};B.testFeature=function(q,H=Q){return!!this.evaluateNode(this.parseTree,q,H)};B.testFeatureCompiled=function(q,H=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(q,this.parameters,H,this.datefields);if(da("csp-restrictions"))return this.testFeature(q,H);this.compileMe();return!!this.parseTree._compiledVersion(q,
this.parameters,H,this.datefields)};B.getFunctions=function(){const q=[];this.visitAll(this.parseTree,H=>{"function"===H.type&&q.push(H.name.toLowerCase())});return M(q)};B.getExpressions=function(){const q=new Map;this.visitAll(this.parseTree,H=>{if("function"===H.type){const C=H.name.toLowerCase();H=H.args.value[0];if("column_ref"===H.type){H=H.column;const W=`${C}-${H}`;q.has(W)||q.set(W,{aggregateType:C,field:H})}}});return[...q.values()]};B.getVariables=function(){const q=[];this.visitAll(this.parseTree,
H=>{"param"===H.type&&q.push(H.value.toLowerCase())});return M(q)};B.compileMe=function(){const q="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",q)).bind(T)};B.extractExpressionInfo=function(q){const H=[];let C=!0,W=!0;this.visitAll(this.parseTree,X=>{switch(X.type){case "column_ref":{const ha=q.get(X.column),pa=ha&&ha.name;!ha||"date"!==ha.type&&"esriFieldTypeDate"!==
ha.type||(this.datefields[ha.name]=1);void 0!==pa?(H.push(pa),X.column=pa):H.push(X.column);break}case "function":{const {name:ha,args:pa}=X;X=pa.value.length;C&&(C=t.isStandardized(ha,X));W&&(W=I.isAggregate(ha,X))}}});return{referencedFieldNames:M(H),isStandardized:C,isAggregate:W}};B.visitAll=function(q,H){if(null!=q)switch(H(q),q.type){case "when_clause":this.visitAll(q.operand,H);this.visitAll(q.value,H);break;case "case_expression":for(const C of q.clauses)this.visitAll(C,H);"simple"===q.format&&
this.visitAll(q.operand,H);null!==q.else&&this.visitAll(q.else,H);break;case "expr_list":for(const C of q.value)this.visitAll(C,H);break;case "unary_expr":this.visitAll(q.expr,H);break;case "binary_expr":this.visitAll(q.left,H);this.visitAll(q.right,H);break;case "function":this.visitAll(q.args,H)}};B.evaluateNodeToJavaScript=function(q){switch(q.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(q.value)+", "+JSON.stringify(q.qualifier)+","+JSON.stringify(q.op)+")";
case "case_expression":var H="";if("simple"===q.format){var C="this.makeComparable("+this.evaluateNodeToJavaScript(q.operand)+")";H="( ";for(let W=0;W<q.clauses.length;W++)H+=" ("+C+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(q.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(q.clauses[W].value)+") : "}else for(H="( ",C=0;C<q.clauses.length;C++)H+=" this.makeBool("+this.evaluateNodeToJavaScript(q.clauses[C].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(q.clauses[C].value)+
") : ";H=null!==q.else?H+this.evaluateNodeToJavaScript(q.else):H+"null";return H+=" )";case "param":return"this.lookup("+JSON.stringify(q.value.toLowerCase())+",lookups)";case "expr_list":H="[";for(C of q.value)"["!==H&&(H+=","),H+=this.evaluateNodeToJavaScript(C);return H+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(q.expr)+")";case "binary_expr":switch(q.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+
" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")";case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(q.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(q.left)+
","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+
JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")"}throw Error("Not Supported Operator "+q.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(q.value);case "date":return"(new Date("+D(q.value).getTime().toString()+"))";case "timestamp":return"(new Date("+v(q.value).getTime().toString()+"))";case "current_time":return"date"===q.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+
JSON.stringify(q.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(q.name)+","+this.evaluateNodeToJavaScript(q.args)+")"}throw Error("Unsupported sql syntax "+q.type);};B.evaluateNode=function(q,H,C){switch(q.type){case "interval":return H=this.evaluateNode(q.value,H,C),t.SqlInterval.createFromValueAndQualifer(H,q.qualifier,q.op);case "case_expression":if("simple"===q.format){var W=g(this.evaluateNode(q.operand,H,C));for(var X=0;X<q.clauses.length;X++)if(W===
g(this.evaluateNode(q.clauses[X].operand,H,C)))return this.evaluateNode(q.clauses[X].value,H,C)}else for(W=0;W<q.clauses.length;W++)if(!0===this.evaluateNode(q.clauses[W].operand,H,C))return this.evaluateNode(q.clauses[W].value,H,C);return null!==q.else?this.evaluateNode(q.else,H,C):null;case "param":return this.parameters[q.value.toLowerCase()];case "expr_list":W=[];for(X of q.value)W.push(this.evaluateNode(X,H,C));return W;case "unary_expr":return ba(this.evaluateNode(q.expr,H,C));case "binary_expr":switch(q.operator){case "AND":return l(this.evaluateNode(q.left,
H,C),this.evaluateNode(q.right,H,C));case "OR":return A(this.evaluateNode(q.left,H,C),this.evaluateNode(q.right,H,C));case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(q.left,H,C);case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(q.left,H,C);case "IN":return W=ja(this.evaluateNode(q.right,H,C)),n(this.evaluateNode(q.left,H,C),W);case "NOT IN":return W=ja(this.evaluateNode(q.right,H,C)),
ba(n(this.evaluateNode(q.left,H,C),W));case "BETWEEN":return W=this.evaluateNode(q.left,H,C),q=this.evaluateNode(q.right,H,C),null==W||null==q[0]||null==q[1]?null:W>=g(q[0])&&W<=g(q[1]);case "NOTBETWEEN":return W=this.evaluateNode(q.left,H,C),q=this.evaluateNode(q.right,H,C),null==W||null==q[0]||null==q[1]?null:W<g(q[0])||W>g(q[1]);case "LIKE":return d(this.evaluateNode(q.left,H,C),this.evaluateNode(q.right,H,C),q.escape);case "NOT LIKE":return ba(d(this.evaluateNode(q.left,H,C),this.evaluateNode(q.right,
H,C),q.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return y(q.operator,this.evaluateNode(q.left,H,C),this.evaluateNode(q.right,H,C));case "-":case "+":case "*":case "/":return O(q.operator,this.evaluateNode(q.left,H,C),this.evaluateNode(q.right,H,C))}case "null":case "bool":case "string":case "number":return q.value;case "date":return D(q.value);case "timestamp":return v(q.value);case "current_time":return H=new Date,"date"===q.mode&&H.setHours(0,0,
0,0),H;case "column_ref":return F(H,q.column,this.datefields,C);case "function":return H=this.evaluateNode(q.args,H,C),this.isAggregate?I.aggregateFunction(q.name,H):t.evaluateFunction(q.name,H)}throw Error("Unsupported sql syntax "+q.type);};e._createClass(P,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return P}();const Q={getAttribute(P,B){return(P&&"object"===typeof P.attributes?P.attributes:P)[B]}};p.WhereClause=ia;p.defaultAttributeAdapter=Q;Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(p){function e(t){let G=0;for(let m=0;m<t.length;m++)G+=t[m];return G/t.length}function da(t){const G=e(t),m=t.length;let u=0;for(const v of t)u+=Math.pow(v-G,2);return 1<m?u/(m-1):0}const I={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.max.apply(Math,t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>
null==t[0]?null:e(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{{t=t[0];let G=0;for(let m=0;m<t.length;m++)G+=t[m];t=G}}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(da(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:da(t[0])}};p.aggregateFunction=function(t,G){const m=I[t.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(G.length<
m.minParams||G.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return m.evaluate(G)};p.isAggregate=function(t,G){t=I[t.toLowerCase()];return null!=t&&G>=t.minParams&&G<=t.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(p,e){let da=function(){function t(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}t.fixDefaults=function(G){if(null!==
G.precision||null!==G.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=function(G){const m=new t;m.second=G/1E3;return m};t.createFromValueAndQualifer=function(G,m,u){let v=null;const D=new t;D.op="-"===u?"-":"+";if("interval-period"===m.type){t.fixDefaults(m);if("year"===m.period||"month"===m.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(G))D[m.period]=parseFloat(G);else throw Error("Illegal Interval");
}else{t.fixDefaults(m.start);t.fixDefaults(m.end);if("year"===m.start.period||"month"===m.start.period)throw Error("Year-Month Intervals not supported");if("year"===m.end.period||"month"===m.end.period)throw Error("Year-Month Intervals not supported");switch(m.start.period){case "day":switch(m.end.period){case "hour":v=/^[0-9]{1,} [0-9]{1,}$/;if(v.test(G))D[m.start.period]=parseFloat(G.split(" ")[0]),D[m.end.period]=parseFloat(G.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":v=
/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(v.test(G))D[m.start.period]=parseFloat(G.split(" ")[0]),G=G.split(" ")[1].split(":"),D.hour=parseFloat(G[0]),D.minute=parseFloat(G[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(G))D[m.start.period]=parseFloat(G.split(" ")[0]),G=G.split(" ")[1].split(":"),D.hour=parseFloat(G[0]),D.minute=parseFloat(G[1]),D.second=parseFloat(G[2]);else throw Error("Illegal Interval");
break;default:throw"Invalid Interval.";}break;case "hour":switch(m.end.period){case "minute":v=/^[0-9]{1,}:[0-9]{1,}$/;if(v.test(G))D.hour=parseFloat(G.split(":")[0]),D.minute=parseFloat(G.split(":")[1]);else throw Error("Illegal Interval");break;case "second":v=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(G))G=G.split(":"),D.hour=parseFloat(G[0]),D.minute=parseFloat(G[1]),D.second=parseFloat(G[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;
case "minute":switch(m.end.period){case "second":v=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(v.test(G))G=G.split(":"),D.minute=parseFloat(G[0]),D.second=parseFloat(G[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return D};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return t}();const I=
{extract:{minParams:2,maxParams:2,evaluate:([t,G])=>{if(null==G)return null;if(G instanceof Date)switch(t.toUpperCase()){case "SECOND":return G.getSeconds();case "MINUTE":return G.getMinutes();case "HOUR":return G.getHours();case "DAY":return G.getDate();case "MONTH":return G.getMonth()+1;case "YEAR":return G.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(2===t.length){const [G,m]=t;return null==G||null==m?null:G.toString().substring(m-
1)}if(3===t.length){const [G,m,u]=t;return null==G||null==m||null==u?null:0>=u?"":G.toString().substring(m-1,m+u-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,G])=>null==t||null==G?null:G.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var G=3===t.length,m=G?t[1]:" ";G=G?t[2]:t[1];if(null==m||null==G)return null;m=`(${e.escapeRegExpString(m)})`;switch(t[0]){case "BOTH":return G.replace(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return G.replace(new RegExp(`^${m}*`,"g"),"");
case "TRAILING":return G.replace(new RegExp(`${m}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},
sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:
0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:Math.pow(t[0],t[1])},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const G=t[0];t=2===t.length?Math.pow(10,t[1]):1;return null==G?null:Math.round(G*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>
"string"===typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let G="";for(let m=0;m<t.length;m++){if(null==t[m])return null;G+=t[m].toString()}return G}},lower:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};p.SqlInterval=da;p.evaluateFunction=function(t,G){const m=I[t.toLowerCase()];if(null==m)throw Error("Function Not Recognised");
if(G.length<m.minParams||G.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return m.evaluate(G)};p.isStandardized=function(t,G){t=I[t.toLowerCase()];return null!=t&&G>=t.minParams&&G<=t.maxParams};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(p,e){var da=e.createCommonjsModule(function(t){(function(G,m){t.exports&&(t.exports=m())})(e.commonjsGlobal,function(){function G(m,
u,v,D){this.message=m;this.expected=u;this.found=v;this.location=D;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,G)}(function(m,u){function v(){this.constructor=m}v.prototype=u.prototype;m.prototype=new v})(G,Error);G.buildMessage=function(m,u){function v(l){return l.charCodeAt(0).toString(16).toUpperCase()}function D(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+v(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+v(A)})}function ja(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(A){return"\\x0"+v(A)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(A){return"\\x"+v(A)})}var ba={literal:function(l){return'"'+D(l.text)+'"'},"class":function(l){var A=
"",n;for(n=0;n<l.parts.length;n++)A+=l.parts[n]instanceof Array?ja(l.parts[n][0])+"-"+ja(l.parts[n][1]):ja(l.parts[n]);return"["+(l.inverted?"^":"")+A+"]"},any:function(l){return"any character"},end:function(l){return"end of input"},other:function(l){return l.description}};return"Expected "+function(l){var A=Array(l.length),n;for(n=0;n<l.length;n++){var d=n;var g=l[n];g=ba[g.type](g);A[d]=g}A.sort();if(0<A.length){for(l=n=1;n<A.length;n++)A[n-1]!==A[n]&&(A[l]=A[n],l++);A.length=l}switch(A.length){case 1:return A[0];
case 2:return A[0]+" or "+A[1];default:return A.slice(0,-1).join(", ")+", or "+A[A.length-1]}}(m)+" but "+(u?'"'+D(u)+'"':"end of input")+" found."};return{SyntaxError:G,parse:function(m,u){function v(h,z){return{type:"literal",text:h,ignoreCase:z}}function D(h,z,x){return{type:"class",parts:h,inverted:z,ignoreCase:x}}function ja(h){var z=Yb[h],x;if(!z){for(x=h-1;!Yb[x];)x--;z=Yb[x];for(z={line:z.line,column:z.column};x<h;)10===m.charCodeAt(x)?(z.line++,z.column=1):z.column++,x++;Yb[h]=z}return z}
function ba(h,z){var x=ja(h),U=ja(z);return{start:{offset:h,line:x.line,column:x.column},end:{offset:z,line:U.line,column:U.column}}}function l(h){c<rb||(c>rb&&(rb=c,nc=[]),nc.push(h))}function A(){var h=c;var z=qa();if(z!==a)if(z=d(),z!==a){var x=qa();x!==a?h=z:(c=h,h=a)}else c=h,h=a;else c=h,h=a;return h}function n(){var h=c;var z=d();if(z!==a){var x=[];var U=c;var va=qa();if(va!==a){var Fa=Ia();if(Fa!==a){var La=qa();if(La!==a){var Qa=d();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=
U,U=a}else c=U,U=a;for(;U!==a;)x.push(U),U=c,va=qa(),va!==a?(Fa=Ia(),Fa!==a?(La=qa(),La!==a?(Qa=d(),Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);if(x!==a){h={type:"expr_list"};z=[z];for(U=0;U<x.length;U++)z.push(x[U][3]);h.value=z}else c=h,h=a}else c=h,h=a;return h}function d(){var h=c;var z=g();if(z!==a){var x=[];var U=c;var va=qa();if(va!==a){var Fa=K();if(Fa!==a){var La=qa();if(La!==a){var Qa=g();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=U,U=a}else c=U,U=a;
for(;U!==a;)x.push(U),U=c,va=qa(),va!==a?(Fa=K(),Fa!==a?(La=qa(),La!==a?(Qa=g(),Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);x!==a?h=z=db(z,x):(c=h,h=a)}else c=h,h=a;return h}function g(){var h=c;var z=y();if(z!==a){var x=[];var U=c;var va=qa();if(va!==a){var Fa=w();if(Fa!==a){var La=qa();if(La!==a){var Qa=y();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=U,U=a}else c=U,U=a;for(;U!==a;)x.push(U),U=c,va=qa(),va!==a?(Fa=w(),Fa!==a?(La=qa(),La!==a?(Qa=y(),Qa!==a?U=va=
[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);x!==a?h=z=db(z,x):(c=h,h=a)}else c=h,h=a;return h}function y(){var h=c;var z=f();if(z===a){z=c;if(33===m.charCodeAt(c)){var x=ib;c++}else x=a,0===sa&&l(lb);if(x!==a){var U=c;sa++;if(61===m.charCodeAt(c)){var va=Ra;c++}else va=a,0===sa&&l(wb);sa--;va===a?U=void 0:(c=U,U=a);U!==a?z=x=[x,U]:(c=z,z=a)}else c=z,z=a}z!==a?(x=qa(),x!==a?(U=y(),U!==a?h=z={type:"unary_expr",operator:"NOT",expr:U}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a);if(h===a)if(h=c,z=L(),
z!==a)if(x=qa(),x!==a){x=[];U=c;va=qa();if(va!==a){var Fa=M();if(Fa!==a){var La=qa();if(La!==a){var Qa=L();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=U,U=a}else c=U,U=a;if(U!==a)for(;U!==a;)x.push(U),U=c,va=qa(),va!==a?(Fa=M(),Fa!==a?(La=qa(),La!==a?(Qa=L(),Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);else x=a;x!==a&&(x={type:"arithmetic",tail:x});x===a&&(x=c,U=F(),U!==a?(va=qa(),va!==a?(va=Ja(),va!==a?(va=qa(),va!==a?(va=n(),va!==a?(Fa=qa(),Fa!==a?(Fa=Sa(),Fa!==
a?x=U={op:U,right:va}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=F(),U!==a?(va=qa(),va!==a?(va=Ja(),va!==a?(va=qa(),va!==a?(va=Sa(),va!==a?x=U={op:U,right:{type:"expr_list",value:[]}}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=F(),U!==a?(va=qa(),va!==a?(va=B(),va!==a?x=U={op:U,right:va}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a))),x===a&&(x=c,va=f(),va!==a?(U=qa(),U!==a?(U=N(),U!==a?(Fa=qa(),Fa!==a?(Fa=L(),Fa!==a?(La=qa(),La!==a?(La=w(),
La!==a?(va=qa(),va!==a?(va=L(),va!==a?x=va={op:"NOT"+U,right:{type:"expr_list",value:[Fa,va]}}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,va=N(),va!==a?(U=qa(),U!==a?(U=L(),U!==a?(Fa=qa(),Fa!==a?(Fa=w(),Fa!==a?(La=qa(),La!==a?(La=L(),La!==a?x=va={op:va,right:{type:"expr_list",value:[U,La]}}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)),x===a&&(x=c,U=k(),U!==a?(va=qa(),va!==a?(va=f(),va!==a?(va=qa(),va!==
a?(va=L(),va!==a?x=U={op:U+"NOT",right:va}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=k(),U!==a?(va=qa(),va!==a?(va=L(),va!==a?x=U={op:U,right:va}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)),x===a&&(x=c,U=O(),U!==a?(va=qa(),va!==a?(va=ha(),va!==a?(Fa=qa(),Fa!==a?(Fa=c,m.substr(c,6).toLowerCase()===ud?(La=m.substr(c,6),c+=6):(La=a,0===sa&&l(vd)),La!==a?(La=c,sa++,Qa=Q(),sa--,Qa===a?La=void 0:(c=La,La=a),La!==a?Fa="ESCAPE":(c=Fa,Fa=a)):(c=Fa,Fa=a),Fa!==a?(Fa=qa(),Fa!==a?(Fa=pa(),Fa!==
a?x=U={op:U,right:va,escape:Fa.value}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=O(),U!==a?(va=qa(),va!==a?(va=ha(),va!==a?x=U={op:U,right:va,escape:""}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a))))));x===a&&(x=null);x!==a?(h=z,z=x,""==z||void 0==z||null==z?z=h:(x=null,z=x="arithmetic"==z.type?db(h,z.tail):eb(z.op,h,z.right,z.escape)),h=z):(c=h,h=a)}else c=h,h=a;else c=h,h=a;return h}function M(){if(m.substr(c,2)===S){var h=S;c+=2}else h=a,0===sa&&l(ca);h===a&&
(62===m.charCodeAt(c)?(h=ea,c++):(h=a,0===sa&&l(oa)),h===a&&(m.substr(c,2)===za?(h=za,c+=2):(h=a,0===sa&&l(Ea)),h===a&&(m.substr(c,2)===Na?(h=Na,c+=2):(h=a,0===sa&&l(Pa)),h===a&&(60===m.charCodeAt(c)?(h=Za,c++):(h=a,0===sa&&l(Ya)),h===a&&(61===m.charCodeAt(c)?(h=Ra,c++):(h=a,0===sa&&l(wb)),h===a&&(m.substr(c,2)===Va?(h=Va,c+=2):(h=a,0===sa&&l(gb))))))));return h}function O(){var h=h=c;var z=f();if(z!==a){var x=qa();if(x!==a){var U=R();U!==a?h=z=[z,x,U]:(c=h,h=a)}else c=h,h=a}else c=h,h=a;h!==a&&(h=
h[0]+" "+h[2]);h===a&&(h=R());return h}function F(){var h=h=c;var z=f();if(z!==a){var x=qa();if(x!==a){var U=b();U!==a?h=z=[z,x,U]:(c=h,h=a)}else c=h,h=a}else c=h,h=a;h!==a&&(h=h[0]+" "+h[2]);h===a&&(h=b());return h}function L(){var h=c;var z=ka();if(z!==a){var x=[];var U=c;var va=qa();if(va!==a){var Fa=Y();if(Fa!==a){var La=qa();if(La!==a){var Qa=ka();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=U,U=a}else c=U,U=a;for(;U!==a;)x.push(U),U=c,va=qa(),va!==a?(Fa=Y(),Fa!==a?(La=qa(),La!==a?
(Qa=ka(),Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);x!==a?h=z=db(z,x):(c=h,h=a)}else c=h,h=a;return h}function Y(){if(43===m.charCodeAt(c)){var h=jb;c++}else h=a,0===sa&&l(oc);h===a&&(45===m.charCodeAt(c)?(h=pc,c++):(h=a,0===sa&&l(qc)));return h}function ka(){var h=c;var z=J();if(z!==a){var x=[];var U=c;var va=qa();if(va!==a){var Fa=fa();if(Fa!==a){var La=qa();if(La!==a){var Qa=J();Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)}else c=U,U=a}else c=U,U=a}else c=U,U=a;for(;U!==a;)x.push(U),
U=c,va=qa(),va!==a?(Fa=fa(),Fa!==a?(La=qa(),La!==a?(Qa=J(),Qa!==a?U=va=[va,Fa,La,Qa]:(c=U,U=a)):(c=U,U=a)):(c=U,U=a)):(c=U,U=a);x!==a?h=z=db(z,x):(c=h,h=a)}else c=h,h=a;return h}function fa(){if(42===m.charCodeAt(c)){var h=wd;c++}else h=a,0===sa&&l(xd);h===a&&(47===m.charCodeAt(c)?(h=yd,c++):(h=a,0===sa&&l(zd)));return h}function J(){var h=pa();if(h===a){var z=c;var x=c;var U=r();if(U!==a){var va=E();if(va!==a){var Fa=aa();Fa!==a?x=U=parseFloat(U+va+Fa):(c=x,x=a)}else c=x,x=a}else c=x,x=a;x===a&&
(x=c,U=r(),U!==a?(va=E(),va!==a?x=U=parseFloat(U+va):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=r(),U!==a?(va=aa(),va!==a?x=U=parseFloat(U+va):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=r(),U!==a&&(U=parseFloat(U)),x=U)));var La=x;if(La!==a){var Qa=c;sa++;var Ad=ia();sa--;Ad===a?Qa=void 0:(c=Qa,Qa=a);Qa!==a?z=La={type:"number",value:La}:(c=z,z=a)}else c=z,z=a;h=z;if(h===a){var Kb=c;var Ab=c;if(m.substr(c,4).toLowerCase()===Bd){var Zb=m.substr(c,4);c+=4}else Zb=a,0===sa&&l(Cd);if(Zb!==a){var Lb=c;sa++;var Dd=Q();
sa--;Dd===a?Lb=void 0:(c=Lb,Lb=a);Lb!==a?Ab=Zb=[Zb,Lb]:(c=Ab,Ab=a)}else c=Ab,Ab=a;var xb=Ab;xb!==a&&(xb={type:"bool",value:!0});Kb=xb;if(Kb===a){Kb=c;var Bb=c;if(m.substr(c,5).toLowerCase()===Ed){var $b=m.substr(c,5);c+=5}else $b=a,0===sa&&l(Fd);if($b!==a){var Mb=c;sa++;var Gd=Q();sa--;Gd===a?Mb=void 0:(c=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(c=Bb,Bb=a)}else c=Bb,Bb=a;xb=Bb;xb!==a&&(xb={type:"bool",value:!1});Kb=xb}h=Kb;if(h===a){var Cb=c;if(m.substr(c,4).toLowerCase()===Hd){var ac=m.substr(c,4);c+=4}else ac=
a,0===sa&&l(Id);if(ac!==a){var Nb=c;sa++;var Jd=Q();sa--;Jd===a?Nb=void 0:(c=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(c=Cb,Cb=a)}else c=Cb,Cb=a;var rc=Cb;rc!==a&&(rc={type:"null",value:null});h=rc;if(h===a){var ub=c;var Db=c;if(m.substr(c,4).toLowerCase()===Kd){var sc=m.substr(c,4);c+=4}else sc=a,0===sa&&l(Ld);if(sc!==a){var bc=c;sa++;var Md=Q();sa--;Md===a?bc=void 0:(c=bc,bc=a);bc!==a?Db=sc="DATE":(c=Db,Db=a)}else c=Db,Db=a;var Rc=Db;if(Rc!==a){var Nd=qa();if(Nd!==a){var Sc=ha();Sc!==a?ub=Rc={type:"date",
value:Sc.value}:(c=ub,ub=a)}else c=ub,ub=a}else c=ub,ub=a;h=ub;if(h===a){var vb=c;var Eb=c;if(m.substr(c,9).toLowerCase()===Od){var tc=m.substr(c,9);c+=9}else tc=a,0===sa&&l(Pd);if(tc!==a){var cc=c;sa++;var Qd=Q();sa--;Qd===a?cc=void 0:(c=cc,cc=a);cc!==a?Eb=tc="TIMESTAMP":(c=Eb,Eb=a)}else c=Eb,Eb=a;var Tc=Eb;if(Tc!==a){var Rd=qa();if(Rd!==a){var Uc=ha();Uc!==a?vb=Tc={type:"timestamp",value:Uc.value}:(c=vb,vb=a)}else c=vb,vb=a}else c=vb,vb=a;h=vb;if(h===a){var Wa=c;var Ob=la();if(Ob!==a){var uc=qa();
if(uc!==a){if(45===m.charCodeAt(c)){var sb=pc;c++}else sb=a,0===sa&&l(qc);sb===a&&(43===m.charCodeAt(c)?(sb=jb,c++):(sb=a,0===sa&&l(oc)));if(sb!==a){var vc=qa();if(vc!==a){var Pb=ha();if(Pb!==a){var Sd=qa();if(Sd!==a){var Vc=H();Vc!==a?Wa=Ob={type:"interval",value:Pb,qualifier:Vc,op:sb}:(c=Wa,Wa=a)}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a;Wa===a&&(Wa=c,Ob=la(),Ob!==a?(uc=qa(),uc!==a?(sb=ha(),sb!==a?(vc=qa(),vc!==a?(Pb=H(),Pb!==a?Wa=Ob={type:"interval",
value:sb,qualifier:Pb,op:""}:(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a)):(c=Wa,Wa=a));h=Wa}}}}}}var Ua=h;if(Ua===a){var bb=c;var Fb=c;if(m.substr(c,7).toLowerCase()===Td){var wc=m.substr(c,7);c+=7}else wc=a,0===sa&&l(Ud);if(wc!==a){var dc=c;sa++;var Vd=Q();sa--;Vd===a?dc=void 0:(c=dc,dc=a);dc!==a?Fb=wc="EXTRACT":(c=Fb,Fb=a)}else c=Fb,Fb=a;var Wc=Fb;if(Wc!==a){var Wd=qa();if(Wd!==a){var Xd=Ja();if(Xd!==a){var Yd=qa();if(Yd!==a){var ob=ma();ob===a&&(ob=na(),ob===a&&(ob=wa(),ob===a&&(ob=ua(),
ob===a&&(ob=ya(),ob===a&&(ob=Ba())))));var Xc=ob;if(Xc!==a){var Zd=qa();if(Zd!==a){var $d=Z();if($d!==a){var ae=qa();if(ae!==a){var Yc=d();if(Yc!==a){var be=qa();if(be!==a){var ce=Sa();ce!==a?bb=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(c=bb,bb=a)}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a;Ua=bb;if(Ua===a){var $a=c;var Gb=c;if(m.substr(c,
9).toLowerCase()===de){var xc=m.substr(c,9);c+=9}else xc=a,0===sa&&l(ee);if(xc!==a){var ec=c;sa++;var fe=Q();sa--;fe===a?ec=void 0:(c=ec,ec=a);ec!==a?Gb=xc="SUBSTRING":(c=Gb,Gb=a)}else c=Gb,Gb=a;var Zc=Gb;if(Zc!==a){var ge=qa();if(ge!==a){var he=Ja();if(he!==a){var ie=qa();if(ie!==a){var yc=d();if(yc!==a){var je=qa();if(je!==a){var ke=Z();if(ke!==a){var le=qa();if(le!==a){var zc=d();if(zc!==a){var me=qa();if(me!==a){var kb=c;var Hb=c;if(m.substr(c,3).toLowerCase()===ne){var Ac=m.substr(c,3);c+=3}else Ac=
a,0===sa&&l(oe);if(Ac!==a){var fc=c;sa++;var pe=Q();sa--;pe===a?fc=void 0:(c=fc,fc=a);fc!==a?Hb=Ac="FOR":(c=Hb,Hb=a)}else c=Hb,Hb=a;var Qb=Hb;if(Qb!==a){var $c=qa();if($c!==a){var ad=d();if(ad!==a){var bd=qa();bd!==a?kb=Qb=[Qb,$c,ad,bd]:(c=kb,kb=a)}else c=kb,kb=a}else c=kb,kb=a}else c=kb,kb=a;kb===a&&(kb=null);kb!==a?(Qb=Sa(),Qb!==a?$a=Zc={type:"function",name:"substring",args:{type:"expr_list",value:kb?[yc,zc,kb[2]]:[yc,zc]}}:(c=$a,$a=a)):(c=$a,$a=a)}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=
$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a}else c=$a,$a=a;Ua=$a;if(Ua===a){var Oa=c;var Rb=V();if(Rb!==a){var Bc=qa();if(Bc!==a){var Cc=Ja();if(Cc!==a){var Dc=qa();if(Dc!==a){var pb=q();pb===a&&(pb=null);if(pb!==a){var Ec=qa();if(Ec!==a){var Sb=d();if(Sb!==a){var Fc=qa();if(Fc!==a){var Gc=Z();if(Gc!==a){var qe=qa();if(qe!==a){var cd=d();if(cd!==a){var re=qa();if(re!==a){var se=Sa();se!==a?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",
value:null==pb?"BOTH":pb},Sb,cd]}}:(c=Oa,Oa=a)}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a}else c=Oa,Oa=a;Oa===a&&(Oa=c,Rb=V(),Rb!==a?(Bc=qa(),Bc!==a?(Cc=Ja(),Cc!==a?(Dc=qa(),Dc!==a?(pb=q(),pb===a&&(pb=null),pb!==a?(Ec=qa(),Ec!==a?(Sb=d(),Sb!==a?(Fc=qa(),Fc!==a?(Gc=Sa(),Gc!==a?Oa=Rb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":
pb},Sb]}}:(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a)):(c=Oa,Oa=a));Ua=Oa;if(Ua===a){var cb=c;var Ib=c;if(m.substr(c,8).toLowerCase()===te){var Hc=m.substr(c,8);c+=8}else Hc=a,0===sa&&l(ue);if(Hc!==a){var gc=c;sa++;var ve=Q();sa--;ve===a?gc=void 0:(c=gc,gc=a);gc!==a?Ib=Hc="POSITION":(c=Ib,Ib=a)}else c=Ib,Ib=a;var dd=Ib;if(dd!==a){var we=qa();if(we!==a){var xe=Ja();if(xe!==a){var ye=qa();if(ye!==a){var ed=d();if(ed!==a){var ze=qa();if(ze!==
a){var Ae=b();if(Ae!==a){var Be=qa();if(Be!==a){var fd=d();if(fd!==a){var Ce=qa();if(Ce!==a){var De=Sa();De!==a?cb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(c=cb,cb=a)}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a}else c=cb,cb=a;Ua=cb;if(Ua===a){var hb=c;var Tb;var qb=c;qb=Tb=T();if(qb===a)if(qb=c,96===m.charCodeAt(c)?(Tb=gd,c++):(Tb=a,0===sa&&l(hd)),Tb!==a){var hc=[];if(id.test(m.charAt(c))){var tb=
m.charAt(c);c++}else tb=a,0===sa&&l(jd);if(tb!==a)for(;tb!==a;)hc.push(tb),id.test(m.charAt(c))?(tb=m.charAt(c),c++):(tb=a,0===sa&&l(jd));else hc=a;hc!==a?(96===m.charCodeAt(c)?(tb=gd,c++):(tb=a,0===sa&&l(hd)),tb!==a?qb=Tb=hc.join(""):(c=qb,qb=a)):(c=qb,qb=a)}else c=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=qa();if(Ee!==a){var Fe=Ja();if(Fe!==a){var Ge=qa();if(Ge!==a){var Ub=n();Ub===a&&(Ub=null);if(Ub!==a){var He=qa();if(He!==a){var Ie=Sa();Ie!==a?hb=Ic={type:"function",name:Ic,args:Ub?Ub:{type:"expr_list",
value:[]}}:(c=hb,hb=a)}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a}else c=hb,hb=a;Ua=hb;if(Ua===a){var mb;var Ta=c;var Vb=Da();if(Vb!==a){var Jc=qa();if(Jc!==a){var Wb=d();if(Wb!==a){var Kc=qa();if(Kc!==a){var yb=[];for(mb=Aa();mb!==a;)yb.push(mb),mb=Aa();if(yb!==a)if(mb=qa(),mb!==a){var ic=Ga();ic!==a?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:null}:(c=Ta,Ta=a)}else c=Ta,Ta=a;else c=Ta,Ta=a}else c=Ta,Ta=a}else c=Ta,Ta=a}else c=Ta,Ta=a}else c=
Ta,Ta=a;if(Ta===a)if(Ta=c,Vb=Da(),Vb!==a)if(Jc=qa(),Jc!==a)if(Wb=d(),Wb!==a)if(Kc=qa(),Kc!==a){yb=[];for(mb=Aa();mb!==a;)yb.push(mb),mb=Aa();if(yb!==a)if(mb=qa(),mb!==a)if(ic=Ca(),ic!==a){var Je=qa();if(Je!==a){var Ke=Ga();Ke!==a?Ta=Vb={type:"case_expression",format:"simple",operand:Wb,clauses:yb,else:ic.value}:(c=Ta,Ta=a)}else c=Ta,Ta=a}else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a}else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a;else c=Ta,Ta=a;var Lc=Ta;if(Lc===a){var nb;var Xa=c;var Xb=Da();if(Xb!==
a){var Mc=qa();if(Mc!==a){var zb=[];for(nb=ra();nb!==a;)zb.push(nb),nb=ra();if(zb!==a)if(nb=qa(),nb!==a){var jc=Ga();jc!==a?Xa=Xb={type:"case_expression",format:"searched",clauses:zb,else:null}:(c=Xa,Xa=a)}else c=Xa,Xa=a;else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a;if(Xa===a)if(Xa=c,Xb=Da(),Xb!==a)if(Mc=qa(),Mc!==a){zb=[];for(nb=ra();nb!==a;)zb.push(nb),nb=ra();if(zb!==a)if(nb=qa(),nb!==a)if(jc=Ca(),jc!==a){var Le=qa();if(Le!==a){var Me=Ga();Me!==a?Xa=Xb={type:"case_expression",format:"searched",
clauses:zb,else:jc.value}:(c=Xa,Xa=a)}else c=Xa,Xa=a}else c=Xa,Xa=a;else c=Xa,Xa=a;else c=Xa,Xa=a}else c=Xa,Xa=a;else c=Xa,Xa=a;Lc=Xa}Ua=Lc;if(Ua===a){var kc;var Jb=c;var kd=ia();if(kd!==a){var Nc=[];for(kc=P();kc!==a;)Nc.push(kc),kc=P();Nc!==a?Jb=kd+=Nc.join(""):(c=Jb,Jb=a)}else c=Jb,Jb=a;var lc=Jb;if(lc!==a){var Oc=lc;lc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Ua=lc;
if(Ua===a&&(Ua=B(),Ua===a)){Ua=c;var ld=Ja();if(ld!==a){var Ne=qa();if(Ne!==a){var Pc=d();if(Pc!==a){var Oe=qa();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Ua=ld=Pc):(c=Ua,Ua=a)}else c=Ua,Ua=a}else c=Ua,Ua=a}else c=Ua,Ua=a}else c=Ua,Ua=a}}}}}}}}return Ua}function T(){var h;var z=c;var x=ia();if(x!==a){var U=[];for(h=Q();h!==a;)U.push(h),h=Q();U!==a?z=x+=U.join(""):(c=z,z=a)}else c=z,z=a;return z}function ia(){if(Qe.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(Re);return h}function Q(){if(Se.test(m.charAt(c))){var h=
m.charAt(c);c++}else h=a,0===sa&&l(Te);return h}function P(){if(Ue.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(Ve);return h}function B(){var h=c;if(64===m.charCodeAt(c)){var z=We;c++}else z=a,0===sa&&l(Xe);if(z!==a){var x=T();x!==a?h=z=[z,x]:(c=h,h=a)}else c=h,h=a;h!==a&&(h={type:"param",value:h[1]});return h}function q(){var h=c;if(m.substr(c,7).toLowerCase()===Ye){var z=m.substr(c,7);c+=7}else z=a,0===sa&&l(Ze);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="LEADING":
(c=h,h=a)}else c=h,h=a;h===a&&(h=c,m.substr(c,8).toLowerCase()===$e?(z=m.substr(c,8),c+=8):(z=a,0===sa&&l(af)),z!==a?(z=c,sa++,x=Q(),sa--,x===a?z=void 0:(c=z,z=a),z!==a?h="TRAILING":(c=h,h=a)):(c=h,h=a),h===a&&(h=c,m.substr(c,4).toLowerCase()===bf?(z=m.substr(c,4),c+=4):(z=a,0===sa&&l(cf)),z!==a?(z=c,sa++,x=Q(),sa--,x===a?z=void 0:(c=z,z=a),z!==a?h="BOTH":(c=h,h=a)):(c=h,h=a)));return h}function H(){var h=c;var z=c;var x=C();if(x!==a){var U=qa();if(U!==a)if(U=Ja(),U!==a)if(U=qa(),U!==a)if(U=X(),U!==
a){var va=qa();va!==a?(va=Sa(),va!==a?z=x={type:"interval-period",period:x.value,precision:U,secondary:null}:(c=z,z=a)):(c=z,z=a)}else c=z,z=a;else c=z,z=a;else c=z,z=a;else c=z,z=a}else c=z,z=a;z===a&&(z=c,x=C(),x!==a&&(x=md(x)),z=x);if(z!==a)if(x=qa(),x!==a)if(x=c,m.substr(c,2).toLowerCase()===df?(U=m.substr(c,2),c+=2):(U=a,0===sa&&l(ef)),U!==a?(U=c,sa++,va=Q(),sa--,va===a?U=void 0:(c=U,U=a),U!==a?x="TO":(c=x,x=a)):(c=x,x=a),x!==a)if(x=qa(),x!==a){x=c;U=C();U!==a&&(U={type:"interval-period",period:U.value,
precision:null,secondary:null});x=U;if(x===a){x=c;U=Ba();if(U!==a)if(U=qa(),U!==a)if(U=Ja(),U!==a)if(U=qa(),U!==a)if(U=X(),U!==a)if(va=qa(),va!==a)if(va=Ia(),va!==a)if(va=qa(),va!==a)if(va=W(),va!==a){var Fa=qa();Fa!==a?(Fa=Sa(),Fa!==a?x=U=nd(U,va):(c=x,x=a)):(c=x,x=a)}else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;else c=x,x=a;x===a&&(x=c,U=Ba(),U!==a?(U=qa(),U!==a?(U=Ja(),U!==a?(U=qa(),U!==a?(U=X(),U!==a?(va=qa(),va!==a?(va=Sa(),va!==a?x=
U={type:"interval-period",period:"second",precision:U,secondary:null}:(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a)):(c=x,x=a),x===a&&(x=c,U=Ba(),U!==a&&(U={type:"interval-period",period:"second",precision:null,secondary:null}),x=U))}x!==a?h=z={type:"interval-qualifier",start:z,end:x}:(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;else c=h,h=a;h===a&&(h=c,x=C(),x!==a?(z=qa(),z!==a?(z=Ja(),z!==a?(z=qa(),z!==a?(z=W(),z!==a?(U=qa(),U!==a?(U=Sa(),U!==a?h=x={type:"interval-period",
period:x.value,precision:z,secondary:null}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,x=C(),x!==a&&(x=md(x)),h=x,h===a&&(h=c,x=Ba(),x!==a?(z=qa(),z!==a?(z=Ja(),z!==a?(z=qa(),z!==a?(z=X(),z!==a?(U=qa(),U!==a?(U=Ia(),U!==a?(x=qa(),x!==a?(x=W(),x!==a?(U=qa(),U!==a?(U=Sa(),U!==a?h=x=nd(z,x):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,x=Ba(),x!==a?(z=qa(),z!==a?(z=Ja(),z!==
a?(z=qa(),z!==a?(z=W(),z!==a?(U=qa(),U!==a?(U=Sa(),U!==a?h=x={type:"interval-period",period:"second",precision:z,secondary:null}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a),h===a&&(h=c,x=Ba(),x!==a&&(x={type:"interval-period",period:"second",precision:null,secondary:null}),h=x)))));return h}function C(){var h=c;h=wa();h!==a&&(h={type:"string",value:"day"});h===a&&(h=c,h=ua(),h!==a&&(h={type:"string",value:"hour"}),h===a&&(h=c,h=ya(),h!==a&&(h={type:"string",value:"minute"}),
h===a&&(h=c,h=na(),h!==a&&(h={type:"string",value:"month"}),h===a&&(h=c,h=ma(),h!==a&&(h={type:"string",value:"year"})))));return h}function W(){var h=ta();h!==a&&(h=parseFloat(h));return h}function X(){var h=ta();h!==a&&(h=parseFloat(h));return h}function ha(){var h=pa();h===a&&(h=B());return h}function pa(){var h=c;if(39===m.charCodeAt(c)){var z=od;c++}else z=a,0===sa&&l(pd);z===a&&(m.substr(c,2)===qd?(z=qd,c+=2):(z=a,0===sa&&l(ff)));if(z!==a){z=[];var x=c;m.substr(c,2)===mc?(x=mc,c+=2):(x=a,0===
sa&&l(rd));x!==a&&(x="'");x===a&&(sd.test(m.charAt(c))?(x=m.charAt(c),c++):(x=a,0===sa&&l(td)));for(;x!==a;)z.push(x),x=c,m.substr(c,2)===mc?(x=mc,c+=2):(x=a,0===sa&&l(rd)),x!==a&&(x="'"),x===a&&(sd.test(m.charAt(c))?(x=m.charAt(c),c++):(x=a,0===sa&&l(td)));z!==a?(39===m.charCodeAt(c)?(x=od,c++):(x=a,0===sa&&l(pd)),x!==a?h=z={type:"string",value:z.join("")}:(c=h,h=a)):(c=h,h=a)}else c=h,h=a;return h}function ra(){var h=c;var z=Ha();if(z!==a)if(z=qa(),z!==a)if(z=d(),z!==a){var x=qa();x!==a?(x=Ka(),
x!==a?(x=qa(),x!==a?(x=d(),x!==a?h=z={type:"when_clause",operand:z,value:x}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;return h}function Aa(){var h=c;var z=Ha();if(z!==a)if(z=qa(),z!==a)if(z=d(),z!==a){var x=qa();x!==a?(x=Ka(),x!==a?(x=qa(),x!==a?(x=d(),x!==a?h=z={type:"when_clause",operand:z,value:x}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a)):(c=h,h=a)}else c=h,h=a;else c=h,h=a;else c=h,h=a;return h}function Ca(){var h=c;var z=c;if(m.substr(c,4).toLowerCase()===gf){var x=
m.substr(c,4);c+=4}else x=a,0===sa&&l(hf);if(x!==a){x=c;sa++;var U=Q();sa--;U===a?x=void 0:(c=x,x=a);x!==a?z="ELSE":(c=z,z=a)}else c=z,z=a;z!==a?(z=qa(),z!==a?(z=d(),z!==a?h={type:"else_clause",value:z}:(c=h,h=a)):(c=h,h=a)):(c=h,h=a);return h}function r(){var h=ta();if(h===a){h=c;if(45===m.charCodeAt(c)){var z=pc;c++}else z=a,0===sa&&l(qc);z===a&&(43===m.charCodeAt(c)?(z=jb,c++):(z=a,0===sa&&l(oc)));if(z!==a){var x=ta();x!==a?h=z=z[0]+x:(c=h,h=a)}else c=h,h=a}return h}function E(){var h=c;if(46===
m.charCodeAt(c)){var z=jf;c++}else z=a,0===sa&&l(kf);z!==a?(z=ta(),z===a&&(z=null),z!==a?h="."+(null!=z?z:""):(c=h,h=a)):(c=h,h=a);return h}function aa(){var h;var z=h=c;if(lf.test(m.charAt(c))){var x=m.charAt(c);c++}else x=a,0===sa&&l(mf);x!==a?(nf.test(m.charAt(c))?(x=m.charAt(c),c++):(x=a,0===sa&&l(of)),x===a&&(x=null),x!==a?z="e"+(null===x?"":x):(c=z,z=a)):(c=z,z=a);z!==a?(x=ta(),x!==a?h=z+x:(c=h,h=a)):(c=h,h=a);return h}function ta(){var h=[];var z=xa();if(z!==a)for(;z!==a;)h.push(z),z=xa();
else h=a;h!==a&&(h=h.join(""));return h}function xa(){if(pf.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(qf);return h}function b(){var h=c;if(m.substr(c,2).toLowerCase()===rf){var z=m.substr(c,2);c+=2}else z=a,0===sa&&l(sf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="IN":(c=h,h=a)}else c=h,h=a;return h}function k(){var h=c;if(m.substr(c,2).toLowerCase()===tf){var z=m.substr(c,2);c+=2}else z=a,0===sa&&l(uf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=
z,z=a);z!==a?h="IS":(c=h,h=a)}else c=h,h=a;return h}function R(){var h=c;if(m.substr(c,4).toLowerCase()===vf){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(wf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="LIKE":(c=h,h=a)}else c=h,h=a;return h}function f(){var h=c;if(m.substr(c,3).toLowerCase()===xf){var z=m.substr(c,3);c+=3}else z=a,0===sa&&l(yf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="NOT":(c=h,h=a)}else c=h,h=a;return h}function w(){var h=c;if(m.substr(c,
3).toLowerCase()===zf){var z=m.substr(c,3);c+=3}else z=a,0===sa&&l(Af);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="AND":(c=h,h=a)}else c=h,h=a;return h}function K(){var h=c;if(m.substr(c,2).toLowerCase()===Bf){var z=m.substr(c,2);c+=2}else z=a,0===sa&&l(Cf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="OR":(c=h,h=a)}else c=h,h=a;return h}function N(){var h=c;if(m.substr(c,7).toLowerCase()===Df){var z=m.substr(c,7);c+=7}else z=a,0===sa&&l(Ef);if(z!==a){z=
c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="BETWEEN":(c=h,h=a)}else c=h,h=a;return h}function Z(){var h=c;if(m.substr(c,4).toLowerCase()===Ff){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(Gf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="FROM":(c=h,h=a)}else c=h,h=a;return h}function V(){var h=c;if(m.substr(c,4).toLowerCase()===Hf){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(If);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="TRIM":(c=h,h=a)}else c=
h,h=a;return h}function la(){var h=c;if(m.substr(c,8).toLowerCase()===Jf){var z=m.substr(c,8);c+=8}else z=a,0===sa&&l(Kf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="INTERVAL":(c=h,h=a)}else c=h,h=a;return h}function ma(){var h=c;if(m.substr(c,4).toLowerCase()===Lf){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(Mf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="YEAR":(c=h,h=a)}else c=h,h=a;return h}function na(){var h=c;if(m.substr(c,5).toLowerCase()===Nf){var z=
m.substr(c,5);c+=5}else z=a,0===sa&&l(Of);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="MONTH":(c=h,h=a)}else c=h,h=a;return h}function wa(){var h=c;if(m.substr(c,3).toLowerCase()===Pf){var z=m.substr(c,3);c+=3}else z=a,0===sa&&l(Qf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="DAY":(c=h,h=a)}else c=h,h=a;return h}function ua(){var h=c;if(m.substr(c,4).toLowerCase()===Rf){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(Sf);if(z!==a){z=c;sa++;var x=Q();sa--;
x===a?z=void 0:(c=z,z=a);z!==a?h="HOUR":(c=h,h=a)}else c=h,h=a;return h}function ya(){var h=c;if(m.substr(c,6).toLowerCase()===Tf){var z=m.substr(c,6);c+=6}else z=a,0===sa&&l(Uf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="MINUTE":(c=h,h=a)}else c=h,h=a;return h}function Ba(){var h=c;if(m.substr(c,6).toLowerCase()===Vf){var z=m.substr(c,6);c+=6}else z=a,0===sa&&l(Wf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="SECOND":(c=h,h=a)}else c=h,h=a;return h}
function Da(){var h=c;if(m.substr(c,4).toLowerCase()===Xf){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(Yf);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="CASE":(c=h,h=a)}else c=h,h=a;return h}function Ga(){var h=c;if(m.substr(c,3).toLowerCase()===Zf){var z=m.substr(c,3);c+=3}else z=a,0===sa&&l($f);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="END":(c=h,h=a)}else c=h,h=a;return h}function Ha(){var h=c;if(m.substr(c,4).toLowerCase()===ag){var z=m.substr(c,
4);c+=4}else z=a,0===sa&&l(bg);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="WHEN":(c=h,h=a)}else c=h,h=a;return h}function Ka(){var h=c;if(m.substr(c,4).toLowerCase()===cg){var z=m.substr(c,4);c+=4}else z=a,0===sa&&l(dg);if(z!==a){z=c;sa++;var x=Q();sa--;x===a?z=void 0:(c=z,z=a);z!==a?h="THEN":(c=h,h=a)}else c=h,h=a;return h}function Ia(){if(44===m.charCodeAt(c)){var h=eg;c++}else h=a,0===sa&&l(fg);return h}function Ja(){if(40===m.charCodeAt(c)){var h=gg;c++}else h=a,0===sa&&
l(hg);return h}function Sa(){if(41===m.charCodeAt(c)){var h=ig;c++}else h=a,0===sa&&l(jg);return h}function qa(){var h;var z=[];for(h=fb();h!==a;)z.push(h),h=fb();return z}function fb(){if(kg.test(m.charAt(c))){var h=m.charAt(c);c++}else h=a,0===sa&&l(lg);return h}function eb(h,z,x,U){h={type:"binary_expr",operator:h,left:z,right:x};void 0!==U&&(h.escape=U);return h}function db(h,z){for(var x=0;x<z.length;x++)h=eb(z[x][1],h,z[x][3]);return h}u=void 0!==u?u:{};var a={},ab={start:A},Ma=A,ib="!",lb=
v("!",!1),Ra="\x3d",wb=v("\x3d",!1),S="\x3e\x3d",ca=v("\x3e\x3d",!1),ea="\x3e",oa=v("\x3e",!1),za="\x3c\x3d",Ea=v("\x3c\x3d",!1),Na="\x3c\x3e",Pa=v("\x3c\x3e",!1),Za="\x3c",Ya=v("\x3c",!1),Va="!\x3d",gb=v("!\x3d",!1),jb="+",oc=v("+",!1),pc="-",qc=v("-",!1),wd="*",xd=v("*",!1),yd="/",zd=v("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=D([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=D([["A","Z"],["a",
"z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=v("@",!1),md=function(h){return{type:"interval-period",period:h.value,precision:null,secondary:null}},nd=function(h,z){return{type:"interval-period",period:"second",precision:h,secondary:z}},od="'",pd=v("'",!1),qd="N'",ff=v("N'",!1),mc="''",rd=v("''",!1),sd=/^[^']/,td=D(["'"],!0,!1),jf=".",kf=v(".",!1),pf=/^[0-9]/,qf=D([["0","9"]],!1,!1),lf=/^[eE]/,mf=D(["e","E"],!1,!1),nf=/^[+\-]/,of=D(["+","-"],!1,!1),Hd="null",Id=v("NULL",!0),Bd="true",
Cd=v("TRUE",!0),Ed="false",Fd=v("FALSE",!0),rf="in",sf=v("IN",!0),tf="is",uf=v("IS",!0),vf="like",wf=v("LIKE",!0),ud="escape",vd=v("ESCAPE",!0),xf="not",yf=v("NOT",!0),zf="and",Af=v("AND",!0),Bf="or",Cf=v("OR",!0),Df="between",Ef=v("BETWEEN",!0),Ff="from",Gf=v("FROM",!0),ne="for",oe=v("FOR",!0),de="substring",ee=v("SUBSTRING",!0),Td="extract",Ud=v("EXTRACT",!0),Hf="trim",If=v("TRIM",!0),te="position",ue=v("POSITION",!0),Od="timestamp",Pd=v("TIMESTAMP",!0),Kd="date",Ld=v("DATE",!0),Ye="leading",Ze=
v("LEADING",!0),$e="trailing",af=v("TRAILING",!0),bf="both",cf=v("BOTH",!0),df="to",ef=v("TO",!0),Jf="interval",Kf=v("INTERVAL",!0),Lf="year",Mf=v("YEAR",!0),Nf="month",Of=v("MONTH",!0),Pf="day",Qf=v("DAY",!0),Rf="hour",Sf=v("HOUR",!0),Tf="minute",Uf=v("MINUTE",!0),Vf="second",Wf=v("SECOND",!0),Xf="case",Yf=v("CASE",!0),Zf="end",$f=v("END",!0),ag="when",bg=v("WHEN",!0),cg="then",dg=v("THEN",!0),gf="else",hf=v("ELSE",!0),eg=",",fg=v(",",!1),gg="(",hg=v("(",!1),ig=")",jg=v(")",!1),kg=/^[ \t\n\r]/,lg=
D([" ","\t","\n","\r"],!1,!1),gd="`",hd=v("`",!1),id=/^[^`]/,jd=D(["`"],!0,!1),c=0,Yb=[{line:1,column:1}],rb=0,nc=[],sa=0;if("startRule"in u){if(!(u.startRule in ab))throw Error("Can't start parsing from rule \""+u.startRule+'".');Ma=ab[u.startRule]}var Qc=Ma();if(Qc!==a&&c===m.length)return Qc;Qc!==a&&c<m.length&&l({type:"end"});throw function(h,z,x){return new G(G.buildMessage(h,z),h,z,x)}(nc,rb<m.length?m.charAt(rb):null,rb<m.length?ba(rb,rb+1):ba(rb,rb));}}})});let I=function(){function t(){}
t.parse=function(G){return da.parse(G)};return t}();p.WhereGrammar=I;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/chunks/spatialQuerySupport":function(){define("require exports ../core/maybe ../core/jsonMap ../core/Error ../core/promiseUtils ../geometry/support/spatialReferenceUtils ../geometry/support/contains ../geometry/support/intersects ../geometry/support/extentUtils ../geometry/support/jsonUtils ../core/unitUtils ../geometry/support/normalizeUtils ../layers/graphics/OptimizedGeometry ../layers/graphics/featureConversionUtils ../layers/graphics/centroid ../layers/graphics/data/projectionSupport ../layers/graphics/contains".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l,A,n,d,g,y){function M(X,ha,pa,ra=X.hasZ,Aa=X.hasM){const Ca=X.hasZ&&ra,r=X.hasM&&Aa;return pa?(X=n.quantizeOptimizedGeometry(Q,ha,X.hasZ,X.hasM,"esriGeometryPoint",pa,ra,Aa),n.convertToPoint(X,Ca,r)):n.convertToPoint(ha,Ca,r)}function O(X,ha,pa,ra,Aa,Ca,r=ha,E=pa){const aa=ha&&r,ta=pa&&E;ra=ra?"coords"in ra?ra:ra.geometry:null;if(!ra)return null;if(Aa)return ha=n.generalizeOptimizedGeometry(ia,ra,ha,pa,X,Aa,r,E),Ca&&(ha=n.quantizeOptimizedGeometry(Q,ha,aa,ta,
X,Ca)),P[X](ha,aa,ta);if(Ca)return Ca=n.quantizeOptimizedGeometry(Q,ra,ha,pa,X,Ca,r,E),P[X](Ca,aa,ta);n.removeZMValues(T,ra,ha,pa,r,E);return P[X](T,aa,ta)}async function F(X,ha,pa){if(!X)return null;var {where:ra}=X;X.where=ra=ra&&ra.trim();if(!ra||/^1 *= *1$/.test(ra)||ha&&ha===ra)X.where=null;if(!X.geometry)return X;ha=await L(X);X.distance=0;X.units=null;"esriSpatialRelEnvelopeIntersects"===X.spatialRel&&({spatialReference:ra}=X.geometry,ha=D.getGeometryExtent(ha),ha.spatialReference=ra);X.geometry=
ha;await g.checkProjectionSupport(ha.spatialReference,pa);ha=(await l.normalizeCentralMeridian(ja.fromJSON(ha)))[0];if(da.isNone(ha))throw J;ha=ha.toJSON();ha=await g.project(ha,ha.spatialReference,pa);if(!ha)throw J;ha.spatialReference=pa;X.geometry=ha;return X}async function L(X){const {geometry:ha,distance:pa,units:ra}=X;if(null==pa||"vertexAttributes"in ha)return ha;var Aa=ha.spatialReference;X=ra?fa.fromJSON(ra):ba.getUnitString(Aa);Aa=Aa&&(m.isGeographic(Aa)||m.isWebMercator(Aa))?ha:await g.checkProjectionSupport(Aa,
m.WGS84).then(()=>g.project(ha,m.WGS84));return(await ka())(Aa.spatialReference,Aa,pa,X)}function Y(){return new Promise(function(X,ha){p(["../geometry/geometryEngineJSON"],X,ha)})}function ka(){return Y().then(X=>X.geodesicBuffer)}const fa=new I.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J=Object.freeze({}),T=new A,ia=new A,Q=new A,
P={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint},B=(X,ha)=>"_geVersion"!==X?ha:void 0,q={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",
esriSpatialRelRelation:null};var H={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},C={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},W={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.QUERY_ENGINE_EMPTY_RESULT=J;e.canQueryWithRBush=function(X){if(ja.isExtent(X))return!0;if(ja.isPolygon(X)){for(const ha of X.rings)if(5!==ha.length||ha[0][0]!==ha[1][0]||ha[0][0]!==ha[4][0]||ha[2][0]!==ha[3][0]||ha[0][1]!==ha[3][1]||ha[0][1]!==ha[4][1]||ha[1][1]!==ha[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(X,ha,pa){const {spatialRel:ra,geometry:Aa}=X;if(Aa){if(!0!==H[ra])throw new t("feature-store:unsupported-query",
"Unsupported query spatial relationship",{query:X});if(m.isValid(Aa.spatialReference)&&m.isValid(pa)){if(!0!==C[ja.getJsonType(Aa)])throw new t("feature-store:unsupported-query","Unsupported query geometry type",{query:X});if(!0!==W[ha])throw new t("feature-store:unsupported-query","Unsupported layer geometry type",{query:X});if(X.outSR)return g.checkProjectionSupport(X.geometry&&X.geometry.spatialReference,X.outSR)}}};e.cleanFromGeometryEngine=function(X){return X&&"_geVersion"in X?JSON.parse(JSON.stringify(X,
B)):X};e.getCentroid=function(X,ha,pa){if("esriGeometryPolygon"!==X.geometryType||!ha||!ha.centroid&&!ha.geometry)return null;ha.centroid||(ha.centroid=d.getCentroidOptimizedGeometry(new A,ha.geometry,X.hasZ,X.hasM));return M(X,ha.centroid,pa)};e.getGeodesicBufferOperator=ka;e.getGeometry=O;e.getSpatialQueryOperator=function(X,ha,pa,ra,Aa){if(ja.isPolygon(ha)&&"esriGeometryPoint"===pa&&("esriSpatialRelIntersects"===X||"esriSpatialRelContains"===X)){const Ca=n.convertFromPolygon(new A,ha,!1,!1);return G.resolve(r=>
y.polygonContainsPoint(Ca,!1,!1,r))}if(ja.isPolygon(ha)&&"esriGeometryMultipoint"===pa){const Ca=n.convertFromPolygon(new A,ha,!1,!1);if("esriSpatialRelContains"===X)return G.resolve(r=>y.polygonContainsMultipoint(Ca,!1,!1,r,ra,Aa))}if(ja.isExtent(ha)&&"esriGeometryPoint"===pa&&("esriSpatialRelIntersects"===X||"esriSpatialRelContains"===X))return G.resolve(Ca=>u.extentContainsPoint(ha,O(pa,ra,Aa,Ca)));if(ja.isExtent(ha)&&"esriGeometryMultipoint"===pa&&"esriSpatialRelContains"===X)return G.resolve(Ca=>
u.extentContainsMultipoint(ha,O(pa,ra,Aa,Ca)));if(ja.isExtent(ha)&&"esriSpatialRelIntersects"===X){const Ca=v.getExtentIntersector(pa);return G.resolve(r=>Ca(ha,O(pa,ra,Aa,r)))}return Y().then(Ca=>{const r=Ca[q[X]].bind(null,ha.spatialReference,ha);return E=>r(O(pa,ra,Aa,E))})};e.importGeometryEngine=Y;e.normalizeFilter=async function(X,ha,pa){return F(X,ha,pa)};e.normalizeQuery=async function(X,ha,pa){const {outFields:ra,orderByFields:Aa,groupByFieldsForStatistics:Ca,outStatistics:r}=X;if(ra)for(var E=
0;E<ra.length;E++)ra[E]=ra[E].trim();if(Aa)for(E=0;E<Aa.length;E++)Aa[E]=Aa[E].trim();if(Ca)for(E=0;E<Ca.length;E++)Ca[E]=Ca[E].trim();if(r)for(E=0;E<r.length;E++)r[E].onStatisticField&&(r[E].onStatisticField=r[E].onStatisticField.trim());X.geometry&&!X.outSR&&(X.outSR=X.geometry.spatialReference);return F(X,ha,pa)};e.normalizeQueryLike=F;e.transformCentroid=M})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ../../core/promiseUtils ./spatialReferenceUtils ../SpatialReference ./webMercatorUtils ../Polygon ../Polyline ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(p,e,da,I,t,G,m,u,v,D,ja,ba,l){function A(fa){return"polygon"===fa.type?fa.rings:fa.paths}function n(fa,J){return Math.ceil((fa-J)/(2*J))}function d(fa,J){const T=A(fa);for(const ia of T)for(const Q of ia)Q[0]+=J;return fa}function g(fa){const J=[];let T=0,ia=0;for(let Q=0;Q<fa.length;Q++){const P=fa[Q];let B=null;for(let q=0;q<P.length;q++)B=P[q],J.push(B),0===q?ia=T=B[0]:(T=Math.min(T,B[0]),ia=Math.max(ia,B[0]));B&&J.push([(T+ia)/2,0])}return J}function y(fa,J){if(!(fa instanceof ja||fa instanceof
D))throw Y.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new t("straightLineDensify: the input geometry is neither polyline nor polygon");var T=A(fa);const ia=[];for(const P of T){T=[];ia.push(T);T.push([P[0][0],P[0][1]]);for(let B=0;B<P.length-1;B++){const q=P[B][0],H=P[B][1],C=P[B+1][0],W=P[B+1][1];var Q=Math.sqrt((C-q)*(C-q)+(W-H)*(W-H));const X=(W-H)/Q,ha=(C-q)/Q,pa=Q/J;if(1<pa){for(let ra=1;ra<=pa-1;ra++){const Aa=ra*J;T.push([ha*Aa+q,X*Aa+H])}Q=(Q+Math.floor(pa-
1)*J)/2;T.push([ha*Q+q,X*Q+H])}T.push([C,W])}}return"polygon"===fa.type?new D({rings:ia,spatialReference:fa.spatialReference}):new ja({paths:ia,spatialReference:fa.spatialReference})}function M(fa,J,T){J&&(fa=y(fa,1E6),fa=v.webMercatorToGeographic(fa,!0));T&&(fa=d(fa,T));return fa}function O(fa,J,T){if(Array.isArray(fa)){var ia=fa[0];ia>J?(T=n(ia,J),fa[0]=ia+-2*T*J):ia<T&&(J=n(ia,T),fa[0]=ia+-2*J*T)}else ia=fa.x,ia>J?(T=n(ia,J),fa=fa.clone().offset(-2*T*J,0)):ia<T&&(J=n(ia,T),fa=fa.clone().offset(-2*
J*T,0));return fa}function F(fa,J){let T=-1;for(let ia=0;ia<J.cutIndexes.length;ia++){const Q=J.cutIndexes[ia],P=J.geometries[ia],B=A(P);for(let q=0;q<B.length;q++){const H=B[q];H.some(C=>{if(180>C[0])return!0;C=0;for(var W=0;W<H.length;W++){var X=H[W][0];C=X>C?X:C}C=Number(C.toFixed(9));C=-360*n(C,180);for(W=0;W<H.length;W++)X=P.getPoint(q,W),P.setPoint(q,W,X.clone().offset(C,0));return!0})}if(Q===T)if("polygon"===fa[0].type)for(const q of A(P))fa[Q]=fa[Q].addRing(q);else{if("polyline"===fa[0].type)for(const q of A(P))fa[Q]=
fa[Q].addPath(q)}else T=Q,fa[Q]=P}return fa}async function L(fa,J,T){if(!Array.isArray(fa))return L([fa],J);var ia=J?J.url:e.geometryServiceUrl;let Q,P,B;let q=0;var H=[];J=[];for(var C of fa)if(da.isNone(C))J.push(C);else{if(!W){var W=C.spatialReference;var X=m.getInfo(W);var ha=(Q=W.isWebMercator)?102100:4326;P=ka[ha].maxX;B=ka[ha].minX;var pa=ka[ha].plus180Line;ha=ka[ha].minus180Line}if(X)if("mesh"===C.type)J.push(C);else if("point"===C.type)J.push(O(C.clone(),P,B));else if("multipoint"===C.type){var ra=
C.clone();ra.points=ra.points.map(Aa=>O(Aa,P,B));J.push(ra)}else if("extent"===C.type)ra=C.clone()._normalize(!1,!1,X),J.push(ra.rings?new D(ra):ra);else if(C.extent){ra=C.extent;const Aa=2*n(ra.xmin,B)*P;let Ca=0===Aa?C.clone():d(C.clone(),Aa);ra.offset(Aa,0);ra.intersects(pa)&&ra.xmax!==P?(q=ra.xmax>q?ra.xmax:q,Ca=M(Ca,Q),H.push(Ca),J.push("cut")):ra.intersects(ha)&&ra.xmin!==B?(q=2*ra.xmax*P>q?2*ra.xmax*P:q,Ca=M(Ca,Q,360),H.push(Ca),J.push("cut")):J.push(Ca)}else J.push(C.clone());else J.push(C)}W=
n(q,P);X=-90;pa=W;for(C=new ja;0<W;)ha=-180+360*W,C.addPath([[ha,X],[ha,-1*X]]),X*=-1,W--;if(0<H.length&&0<pa){W=await ba.cut(ia,H,C,T);W=F(H,W);X=[];H=[];for(pa=0;pa<J.length;pa++)C=J[pa],"cut"!==C?H.push(C):(C=W.shift(),ha=fa[pa],da.isSome(ha)&&"polygon"===ha.type&&ha.rings&&1<ha.rings.length&&C.rings.length>=ha.rings.length?(X.push(C),H.push("simplify")):H.push(Q?v.geographicToWebMercator(C):C));if(!X.length)return H;J=await l.simplify(ia,X,T);fa=[];for(T=0;T<H.length;T++)ia=H[T],"simplify"!==
ia?fa.push(ia):fa.push(Q?v.geographicToWebMercator(J.shift()):J.shift());return fa}fa=[];for(T=0;T<J.length;T++)ia=J[T],"cut"!==ia?fa.push(ia):(ia=H.shift(),fa.push(!0===Q?v.geographicToWebMercator(ia):ia));return G.resolve(fa)}const Y=I.getLogger("esri.geometry.support.normalizeUtils"),ka={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new ja({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:u.WebMercator}),
minus180Line:new ja({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:u.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ja({paths:[[[180,-180],[180,180]]],spatialReference:u.WGS84}),minus180Line:new ja({paths:[[[-180,-180],[-180,180]]],spatialReference:u.WGS84})}};p.getDenormalizedExtent=function(fa){if(!fa)return null;const J=fa.extent;if(!J)return null;var T=fa.spatialReference&&m.getInfo(fa.spatialReference);if(!T)return J;
const [ia,Q]=T.valid;({width:T}=J);let {xmin:P,xmax:B}=J;[P,B]=[B,P];if("extent"===fa.type||0===T||T<=Q||T>2*Q||P<ia||B>Q)return J;let q;switch(fa.type){case "polygon":if(1<fa.rings.length)q=g(fa.rings);else return J;break;case "polyline":if(1<fa.paths.length)q=g(fa.paths);else return J;break;case "multipoint":q=fa.points}fa=J.clone();for(let H=0;H<q.length;H++){let C=q[H][0];0>C?(C+=Q,B=Math.max(C,B)):(C-=Q,P=Math.min(C,P))}fa.xmin=P;fa.xmax=B;return fa.width<T?(fa.xmin-=Q,fa.xmax-=Q,fa):J};p.normalizeCentralMeridian=
L;p.normalizeMapX=function(fa,J){if(J=m.getInfo(J)){const [T,ia]=J.valid;J=ia-T;if(fa<T)for(;fa<T;)fa+=J;if(fa>ia)for(;fa>ia;)fa-=J}return fa};p.straightLineDensify=y;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(p,e,da,I,t){p.cut=async function(G,m,u,v){G="string"===typeof G?e.urlToObject(G):G;const D=m[0].spatialReference;m={...v,query:{...G.query,
f:"json",sr:JSON.stringify(D),target:JSON.stringify({geometryType:da.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(u)}};m=await t(G.path+"/cut",m);const {cutIndexes:ja,geometries:ba=[]}=m.data;return{cutIndexes:ja,geometries:ba.map(l=>{l=da.fromJSON(l);l.spatialReference=D;return l})}};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(p,e,da,I){function t(m){return{geometryType:da.getJsonType(m[0]),
geometries:m.map(u=>u.toJSON())}}function G(m,u,v){const D=da.getGeometryType(u);return m.map(ja=>{ja=D.fromJSON(ja);ja.spatialReference=v;return ja})}p.simplify=async function(m,u,v){const D="string"===typeof m?e.urlToObject(m):m;m=u[0].spatialReference;const ja=da.getJsonType(u[0]);u={...v,query:{...D.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(t(u))}};u=await I(D.path+"/simplify",u);return G(u.data,ja,m)};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],
function(p){function e(da,I,t,G,m){if(!da)return!1;I=I?t?4:3:t?3:2;const {coords:u,lengths:v}=da;t=!1;da=0;for(const ja of v){var D=da;for(let ba=da,l=da+ja*I;ba<l;ba+=I){D=ba+I;D===l&&(D=da);const A=u[ba],n=u[ba+1],d=u[D];D=u[D+1];(n<m&&D>=m||D<m&&n>=m)&&A+(m-n)/(D-n)*(d-A)<G&&(t=!t)}da+=ja*I}return t}p.polygonContainsCoords=e;p.polygonContainsMultipoint=function(da,I,t,G,m,u){m=m?u?4:3:u?3:2;const {coords:v,lengths:D}=G;if(!D)return!1;for(let ja=0,ba=0;ja<D.length;ja++,ba+=m)if(!e(da,I,t,v[ba],
v[ba+1]))return!1;return!0};p.polygonContainsPoint=function(da,I,t,G){return e(da,I,t,G.coords[0],G.coords[1])};Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(p){function e(t,G,m,u,v){if(null!=u&&null!=v)return D=>{const ja=t.getAttribute(D,G);D=t.getAttribute(D,m);return(null==ja||ja<=v)&&(null==D||D>=u)};if(null!=u)return D=>{D=t.getAttribute(D,m);return null==D||D>=u};if(null!=v)return D=>{D=t.getAttribute(D,G);
return null==D||D<=v}}function da(t,G,m,u){if(null!=m&&null!=u&&m===u)return v=>t.getAttribute(v,G)===m;if(null!=m&&null!=u)return v=>{v=t.getAttribute(v,G);return v>=m&&v<=u};if(null!=m)return v=>t.getAttribute(v,G)>=m;if(null!=u)return v=>t.getAttribute(v,G)<=u}function I(){return()=>!1}p.getTimeExtent=function(t,G){if(!t)return null;const m=G.featureAdapter,{startTimeField:u,endTimeField:v}=t;let D=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY;if(u&&v)G.forEach(ba=>{const l=m.getAttribute(ba,
u);ba=m.getAttribute(ba,v);null==l||isNaN(l)||(D=Math.min(D,l));null==ba||isNaN(ba)||(ja=Math.max(ja,ba))});else{const ba=u||v;G.forEach(l=>{l=m.getAttribute(l,ba);null==l||isNaN(l)||(D=Math.min(D,l),ja=Math.max(ja,l))})}return{start:D,end:ja}};p.getTimeOperator=function(t,G,m){if(!G||!t)return null;const {startTimeField:u,endTimeField:v}=t;if(!u&&!v)return null;const {start:D,end:ja}=G;return null===D&&null===ja?null:void 0===D&&void 0===ja?I():u&&v?e(m,u,v,D,ja):da(m,u||v,D,ja)};Object.defineProperty(p,
"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./projectionSupport ../../../geometry/support/quantizationUtils ./attributeSupport ./AttributesBuilder ../../../chunks/spatialQuerySupport ./timeSupport".split(" "),function(p,e,da,I,t,G,m,u,v,D,ja){function ba(A){return A.substr(24,12)+A.substr(19,
4)+A.substr(16,2)+A.substr(14,2)+A.substr(11,2)+A.substr(9,2)+A.substr(6,2)+A.substr(4,2)+A.substr(2,2)+A.substr(0,2)}function l(A,n,d,g){if(d&&"esriFieldTypeDate"===d.type){const y=(new Date(A)).getTime(),M=(new Date(n)).getTime();if(!isNaN(y)&&!isNaN(M))return g?M-y:y-M}return"number"===typeof A&&"number"===typeof n?g?n-A:A-n:"string"===typeof A&&"string"===typeof n?(A=A.toUpperCase(),n=n.toUpperCase(),!d||"esriFieldTypeGUID"!==d.type&&"esriFieldTypeGlobalID"!==d.type?g=(g?A>n:A<n)?-1:(g?A<n:A>
n)?1:0:(d=ba(A),n=ba(n),g=(g?d>n:d<n)?-1:(g?d<n:d>n)?1:0),g):g?1:-1}return function(){function A(d,g,y){this.items=d;this.queryGeometry=g;this.definitionExpression=y.definitionExpression;this.geometryType=y.geometryType;this.hasM=y.hasM;this.hasZ=y.hasZ;this.objectIdField=y.objectIdField;this.spatialReference=y.spatialReference;this.fieldsIndex=y.fieldsIndex;this.timeInfo=y.timeInfo;this.featureAdapter=y.featureAdapter;this.aggregateAdapter=y.aggregateAdapter}var n=A.prototype;n.createQueryResponseForCount=
function(d){const g=new v(d,this.featureAdapter,this.fieldsIndex);if(!d.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:y,having:M}=d;if(null==y||!y.length)return 1;const O=new Map,F=new Map,L=new Set;d=d.outStatistics;for(const ka of d){({statisticType:d}=ka);d="exceedslimit"!==d?ka.onStatisticField:void 0;if(!F.has(d)){var Y=[];for(const fa of y){const J=this._getAttributeValues(g,fa,O);Y.push(J)}F.set(d,this._calculateUniqueValues(Y))}d=F.get(d);for(const fa in d){const {data:J,
items:T}=d[fa];Y=J.join(",");M&&!g.validateItems(T,M)||L.add(Y)}}return L.size};n.createQueryResponse=function(d){let g;g=d.outStatistics?d.outStatistics.some(y=>"exceedslimit"===y.statisticType)?this._createExceedsLimitQueryResponse(d):this._createStatisticsQueryResponse(d):this._createFeatureQueryResponse(d);d.returnQueryGeometry&&(I.isValid(d.outSR)&&!I.equals(this.queryGeometry.spatialReference,d.outSR)?g.queryGeometry=D.cleanFromGeometryEngine({spatialReference:d.outSR,...G.project(this.queryGeometry,
this.queryGeometry.spatialReference,d.outSR)}):g.queryGeometry=D.cleanFromGeometryEngine({spatialReference:d.outSR,...this.queryGeometry}));return g};n.executeAttributesQuery=function(d){var g=u.getWhereClause(d.where,this.fieldsIndex);if(!g)return da.resolve(this);if(g.isStandardized){let y=0;const M=[];for(const O of this.items)g.testFeature(O,this.featureAdapter)&&(M[y++]=O);g=new A(M,this.queryGeometry,this);g.definitionExpression=d.where;return da.resolve(g)}return da.reject(new TypeError("Where clause is not standardized"))};
n.executeAggregateIdsQuery=function(d){if(!d.aggregateIds||!d.aggregateIds.length||e.isNone(this.aggregateAdapter))return da.resolve(this);const g=new Set;for(const M of d.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(M).forEach(O=>g.add(O));const y=this.featureAdapter.getObjectId;return da.resolve(new A(this.items.filter(M=>g.has(y(M))),this.queryGeometry,this))};n.executeObjectIdsQuery=function(d){if(!d.objectIds||!d.objectIds.length)return da.resolve(this);const g=new Set(d.objectIds),
y=this.featureAdapter.getObjectId;return da.resolve(new A(this.items.filter(M=>g.has(y(M))),this.queryGeometry,this))};n.executeTimeQuery=function(d){d=ja.getTimeOperator(this.timeInfo,d.timeExtent,this.featureAdapter);if(!e.isSome(d))return da.resolve(this);d=this.items.filter(d);return da.resolve(new A(d,this.queryGeometry,this))};n.filterLatest=function(){const {trackIdField:d,startTimeField:g,endTimeField:y}=this.timeInfo;var M=y||g;const O=new Map,F=this.featureAdapter.getAttribute;for(const L of this.items){const Y=
F(L,d),ka=F(L,M),fa=O.get(Y);(!fa||ka>F(fa,M))&&O.set(Y,L)}M=Array.from(O.values());return da.resolve(new A(M,this.queryGeometry,this))};n.project=async function(d){if(!d||I.equals(this.spatialReference,d))return this;const g=this.featureAdapter,y=(await G.projectMany(this.items.map(M=>D.getGeometry(this.geometryType,this.hasZ,this.hasM,g.getGeometry(M))),this.spatialReference,d)).map((M,O)=>g.cloneWithGeometry(this.items[O],t.convertFromGeometry(M,this.hasZ,this.hasM)));return new A(y,this.queryGeometry,
{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:d,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};n._sortFeatures=function(d,g,y){if(1<d.length&&g&&g.length)for(const M of g.reverse()){g=M.split(" ");const O=g[0],F=this.fieldsIndex.get(O),L=g[1]&&"desc"===g[1].toLowerCase();d.sort((Y,ka)=>{Y=y(Y,O,F);ka=y(ka,O,F);return l(Y,ka,F,L)})}};n._createFeatureQueryResponse=
function(d){const g=this.items,{geometryType:y,hasM:M,hasZ:O,objectIdField:F,spatialReference:L}=this,{outFields:Y,outSR:ka,quantizationParameters:fa,resultRecordCount:J,resultOffset:T,returnZ:ia,returnM:Q}=d,P=null!=J?g.length>(T||0)+J:!1,B=Y&&(-1<Y.indexOf("*")?[...this.fieldsIndex.fields]:Y.map(q=>this.fieldsIndex.get(q)));return{exceededTransferLimit:P,features:this._createFeatures(d,g),fields:B,geometryType:y,hasM:M&&Q,hasZ:O&&ia,objectIdFieldName:F,spatialReference:D.cleanFromGeometryEngine(ka?
ka:L),transform:fa&&m.toQuantizationTransform(fa)||null}};n._createFeatures=function(d,g){const y=new v(d,this.featureAdapter,this.fieldsIndex),{hasM:M,hasZ:O}=this,{orderByFields:F,quantizationParameters:L,returnGeometry:Y,returnCentroid:ka,maxAllowableOffset:fa,resultOffset:J,resultRecordCount:T,returnZ:ia=!1,returnM:Q=!1}=d,P=O&&ia,B=M&&Q;d=[];var q=0;g=[...g];this._sortFeatures(g,F,(W,X,ha)=>y.getFieldValue(W,X,ha));if(Y||ka){var H=m.toQuantizationTransform(L);if(Y&&!ka)for(var C of g)d[q++]=
{attributes:y.getAttributes(C),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(C),fa,H,P,B)};else if(!Y&&ka)for(const W of g)d[q++]={attributes:y.getAttributes(W),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(W,this),H)};else for(const W of g)d[q++]={attributes:y.getAttributes(W),centroid:D.transformCentroid(this,this.featureAdapter.getCentroid(W,this),H),geometry:D.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(W),
fa,H,P,B)}}else for(H of g)(C=y.getAttributes(H))&&(d[q++]={attributes:C});q=J||0;null!=T&&(d=d.slice(q,Math.min(d.length,q+T)));return d};n._createExceedsLimitQueryResponse=function(d){var g=!1;let y=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY;g=Number.POSITIVE_INFINITY;for(const O of d.outStatistics)if("exceedslimit"===O.statisticType){y=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;M=null!=O.maxRecordCount?O.maxRecordCount:Number.POSITIVE_INFINITY;g=null!=O.maxVertexCount?
O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)g=this.items.length>y;else if(this.items.length>M)g=!0;else{d=this.hasZ?this.hasM?4:3:this.hasM?3:2;const O=this.featureAdapter;g=this.items.reduce((F,L)=>{L=O.getGeometry(L);return F+(L&&L.coords.length||0)},0)/d>g}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(g)}}]}};n._createStatisticsQueryResponse=
function(d){var g={attributes:{}};const y=[],M=new Map,O=new Map,F=new Map,L=new Map,Y=new v(d,this.featureAdapter,this.fieldsIndex);var ka=d.outStatistics;const {groupByFieldsForStatistics:fa,having:J,orderByFields:T}=d;d=fa&&fa.length;const ia=!!d,Q=ia&&fa[0],P=ia&&!this.fieldsIndex.get(Q);for(const W of ka){const {outStatisticFieldName:X,statisticType:ha}=W;ka=W;var B="exceedslimit"!==ha?W.onStatisticField:void 0;const pa="percentile_disc"===ha||"percentile_cont"===ha,ra=ia&&1===d&&(B===Q||P)&&
"count"===ha;if(ia){if(!F.has(B)){var q=[];for(const Aa of fa){var H=this._getAttributeValues(Y,Aa,M);q.push(H)}F.set(B,this._calculateUniqueValues(q))}q=F.get(B);for(const Aa in q){const {count:Ca,data:r,items:E,itemPositions:aa}=q[Aa];H=r.join(",");if(!J||Y.validateItems(E,J)){const ta=L.get(H)||{attributes:{}};var C=null;if(ra)C=Ca;else{const xa=this._getAttributeValues(Y,B,M);C=aa.map(b=>xa[b]);C=pa&&"statisticParameters"in ka?this._getPercentileValue(ka,C):this._getStatisticValue(ka,C)}ta.attributes[X]=
C;fa.forEach((xa,b)=>ta.attributes[this.fieldsIndex.get(xa)?xa:`EXPR_${b+1}`]=r[b]);L.set(H,ta)}}}else B=this._getAttributeValues(Y,B,M),g.attributes[X]=pa&&"statisticParameters"in ka?this._getPercentileValue(ka,B):this._getStatisticValue(ka,B,O);y.push({name:X,alias:X,type:"esriFieldTypeDouble"})}g=ia?Array.from(L.values()):[g];this._sortFeatures(g,T,(W,X)=>W.attributes[X]);return{fields:y,features:g}};n._getStatisticValue=function(d,g,y){const {onStatisticField:M,statisticType:O}=d;d=y&&y.has(M)?
y.get(M):this._calculateStatistics(g);y&&y.set(M,d);return d["var"===O?"variance":O]};n._getPercentileValue=function(d,g){const {onStatisticField:y,statisticParameters:M,statisticType:O}=d,{value:F,orderBy:L}=M,Y="desc"===L,ka=this.fieldsIndex.get(y);d=[...g].filter(fa=>null!=fa).sort((fa,J)=>l(fa,J,ka,Y));return this._calculatePercentile(d,F,"percentile_disc"===O)};n._getAttributeValues=function(d,g,y){if(y.has(g))return y.get(g);const M=this.fieldsIndex.get(g),O=this.items.map(F=>d.getFieldValue(F,
g,M));y.set(g,O);return O};n._calculateStatistics=function(d){let g=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,M=null,O=null,F=null,L=null;const Y=[];let ka=0;for(const fa of d)"string"===typeof fa?ka++:null==fa||isNaN(fa)||(M+=fa,g=Math.min(g,fa),y=Math.max(y,fa),Y.push(fa),ka++);if(ka){O=M/ka;d=0;for(const fa of Y)d+=Math.pow(fa-O,2);L=1<ka?d/(ka-1):0;F=Math.sqrt(L)}else y=g=null;return{avg:O,count:ka,max:y,min:g,stddev:F,sum:M,variance:L}};n._calculateUniqueValues=function(d){const g=
{},y=this.items,M=y.length;for(let O=0;O<M;O++){const F=y[O],L=[];for(const ka of d)L.push(ka[O]);const Y=L.join(",");null==g[Y]?g[Y]={count:1,data:L,items:[F],itemPositions:[O]}:(g[Y].count++,g[Y].items.push(F),g[Y].itemPositions.push(O))}return g};n._calculatePercentile=function(d,g,y){if(0===d.length)return null;if(0>=g)return d[0];if(1<=g)return d[d.length-1];var M=(d.length-1)*g,O=Math.floor(M);g=O+1;M%=1;O=d[O];const F=d[g];return g>=d.length||y||"string"===typeof O||"string"===typeof F?O:O*
(1-M)+F*M};p._createClass(A,[{key:"size",get:function(){return this.items.length}}]);return A}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(p,e){function da({scale:J,translate:T},ia){return Math.round((ia-T[0])/J[0])}function I({scale:J,translate:T},ia){return Math.round((T[1]-ia)/J[1])}function t(J,T,ia){const Q=[];let P,B,q,H;for(let C=0;C<ia.length;C++){const W=ia[C];if(0<C){if(q=da(J,W[0]),H=I(J,W[1]),q!==P||H!==B)Q.push(T(W,q-P,H-B)),P=q,
B=H}else P=da(J,W[0]),B=I(J,W[1]),Q.push(T(W,P,B))}return 0<Q.length?Q:null}function G(J,T,ia,Q){return t(J,ia?Q?fa:ka:Q?ka:Y,T)}function m(J,T,ia,Q){const P=[];ia=ia?Q?fa:ka:Q?ka:Y;for(Q=0;Q<T.length;Q++){const B=t(J,ia,T[Q]);B&&3<=B.length&&P.push(B)}return P.length?P:null}function u(J,T,ia,Q){const P=[];ia=ia?Q?fa:ka:Q?ka:Y;for(Q=0;Q<T.length;Q++){const B=t(J,ia,T[Q]);B&&2<=B.length&&P.push(B)}return P.length?P:null}function v({scale:J,translate:T},ia){return ia*J[0]+T[0]}function D({scale:J,translate:T},
ia){return T[1]-ia*J[1]}function ja(J,T,ia){const Q=Array(ia.length);if(!ia.length)return Q;const [P,B]=J.scale;let q=v(J,ia[0][0]);J=D(J,ia[0][1]);Q[0]=T(ia[0],q,J);for(let H=1;H<ia.length;H++){const C=ia[H];q+=C[0]*P;J-=C[1]*B;Q[H]=T(C,q,J)}return Q}function ba(J,T,ia){const Q=Array(ia.length);for(let P=0;P<ia.length;P++)Q[P]=ja(J,T,ia[P]);return Q}function l(J,T,ia,Q){return ja(J,ia?Q?fa:ka:Q?ka:Y,T)}function A(J,T,ia,Q){return ba(J,ia?Q?fa:ka:Q?ka:Y,T)}function n(J,T,ia,Q){return ba(J,ia?Q?fa:
ka:Q?ka:Y,T)}function d(J,T,ia){let [Q,P]=ia[0],B=Math.min(Q,T[0]),q=Math.min(P,T[1]),H=Math.max(Q,T[2]);T=Math.max(P,T[3]);for(let C=1;C<ia.length;C++){const [W,X]=ia[C];Q+=W;P+=X;0>W&&(B=Math.min(B,Q));0<W&&(H=Math.max(H,Q));0>X?q=Math.min(q,P):0<X&&(T=Math.max(T,P))}J[0]=B;J[1]=q;J[2]=H;J[3]=T;return J}function g(J,T){if(!T.length)return null;J[0]=J[1]=Number.POSITIVE_INFINITY;J[2]=J[3]=Number.NEGATIVE_INFINITY;for(let ia=0;ia<T.length;ia++)d(J,J,T[ia]);return J}function y(J,T,ia,Q,P){T.xmin=da(J,
ia.xmin);T.ymin=I(J,ia.ymin);T.xmax=da(J,ia.xmax);T.ymax=I(J,ia.ymax);T!==ia&&(Q&&(T.zmin=ia.zmin,T.zmax=ia.zmax),P&&(T.mmin=ia.mmin,T.mmax=ia.mmax));return T}function M(J,T,ia,Q,P){T.points=G(J,ia.points,Q,P);return T}function O(J,T,ia,Q,P){T.x=da(J,ia.x);T.y=I(J,ia.y);T!==ia&&(Q&&(T.z=ia.z),P&&(T.m=ia.m));return T}function F(J,T,ia,Q,P){J=m(J,ia.rings,Q,P);if(!J)return null;T.rings=J;return T}function L(J,T,ia,Q,P){J=u(J,ia.paths,Q,P);if(!J)return null;T.paths=J;return T}const Y=(J,T,ia)=>[T,ia],
ka=(J,T,ia)=>[T,ia,J[2]],fa=(J,T,ia)=>[T,ia,J[2],J[3]];p.equals=function(J,T){if(J===T||null==J&&null==T)return!0;if(null==J||null==T)return!1;let ia,Q,P,B;J&&"upperLeft"===J.originPosition?(ia=J.translate[0],Q=J.translate[1],J=J.scale[0]):(ia=J.extent.xmin,Q=J.extent.ymax,J=J.tolerance);T&&"upperLeft"===T.originPosition?(P=T.translate[0],B=T.translate[1],T=T.scale[0]):(P=T.extent.xmin,B=T.extent.ymax,T=T.tolerance);return ia===P&&Q===B&&J===T};p.getQuantizedBoundsCoordsArray=d;p.getQuantizedBoundsCoordsArrayArray=
g;p.getQuantizedBoundsPaths=function(J){return g([0,0,0,0],J)};p.getQuantizedBoundsPoints=function(J){const T=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(T,T,J)};p.getQuantizedBoundsRings=function(J){return g([0,0,0,0],J)};p.quantizeBounds=function(J,T,ia){T[0]=da(J,ia[0]);T[3]=I(J,ia[1]);T[2]=da(J,ia[2]);T[1]=I(J,ia[3]);return T};p.quantizeExtent=y;p.quantizeGeometry=function(J,T){return J&&T?e.isPoint(T)?O(J,{},T,!1,!1):e.isPolyline(T)?
L(J,{},T,!1,!1):e.isPolygon(T)?F(J,{},T,!1,!1):e.isMultipoint(T)?M(J,{},T,!1,!1):e.isExtent(T)?y(J,{},T,!1,!1):null:null};p.quantizeMultipoint=M;p.quantizePaths=u;p.quantizePoint=O;p.quantizePoints=G;p.quantizePolygon=F;p.quantizePolyline=L;p.quantizeRings=m;p.quantizeX=da;p.quantizeY=I;p.toQuantizationTransform=function(J){return J?{originPosition:"upper-left"===J.originPosition?"upperLeft":"lower-left"===J.originPosition?"lowerLeft":J.originPosition,scale:[J.tolerance,J.tolerance],translate:[J.extent.xmin,
J.extent.ymax]}:null};p.unquantizeBounds=function(J,T,ia){return ia?(T[0]=v(J,ia[0]),T[1]=D(J,ia[3]),T[2]=v(J,ia[2]),T[3]=D(J,ia[1]),T):[v(J,T[0]),D(J,T[3]),v(J,T[2]),D(J,T[1])]};p.unquantizeCoordsArray=ja;p.unquantizeCoordsArrayArray=ba;p.unquantizeExtent=function(J,T,ia,Q,P){T.xmin=v(J,ia.xmin);T.ymin=D(J,ia.ymin);T.xmax=v(J,ia.xmax);T.ymax=D(J,ia.ymax);T!==ia&&(Q&&(T.zmin=ia.zmin,T.zmax=ia.zmax),P&&(T.mmin=ia.mmin,T.mmax=ia.mmax));return T};p.unquantizeMultipoint=function(J,T,ia,Q,P){T.points=
l(J,ia.points,Q,P);return T};p.unquantizePaths=A;p.unquantizePoint=function(J,T,ia,Q,P){T.x=v(J,ia.x);T.y=D(J,ia.y);T!==ia&&(Q&&(T.z=ia.z),P&&(T.m=ia.m));return T};p.unquantizePoints=l;p.unquantizePolygon=function(J,T,ia,Q,P){T.rings=n(J,ia.rings,Q,P);return T};p.unquantizePolyline=function(J,T,ia,Q,P){T.paths=A(J,ia.paths,Q,P);return T};p.unquantizeRings=n;p.unquantizeX=v;p.unquantizeY=D;Object.defineProperty(p,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport"],function(p,e){return function(){function da(t,G,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=t.returnDistinctValues;this.fieldsIndex=m;this.featureAdapter=G;if((G=t.outFields)&&-1===G.indexOf("*")){this.outFields=G;t=0;for(const v of G){var u=e.getExpressionFromFieldName(v);u=(G=this.fieldsIndex.get(u))?null:e.getWhereClause(u,m);G=G?G.name:e.getAliasFromFieldName(v)||`FIELD_EXP_${t++}`;this._fieldDataCache.set(v,{alias:G,clause:u})}}}
var I=da.prototype;I.countDistinctValues=function(t){if(!this.returnDistinctValues)return t.length;t.forEach(G=>this.getAttributes(G));return this._returnDistinctMap.size};I.getAttributes=function(t){t=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(t)};I.getFieldValue=function(t,G,m){const u=m?m.name:G;let v=null;this._fieldDataCache.has(u)?v=this._fieldDataCache.get(u).clause:m||(v=e.getWhereClause(G,this.fieldsIndex),this._fieldDataCache.set(u,{alias:u,clause:v}));
return m?this.featureAdapter.getAttribute(t,u):v.calculateValue(t,this.featureAdapter)};I.validateItem=function(t,G){this._fieldDataCache.has(G)||this._fieldDataCache.set(G,{alias:G,clause:e.getWhereClause(G,this.fieldsIndex)});return this._fieldDataCache.get(G).clause.testFeature(t,this.featureAdapter)};I.validateItems=function(t,G){this._fieldDataCache.has(G)||this._fieldDataCache.set(G,{alias:G,clause:e.getWhereClause(G,this.fieldsIndex)});return this._fieldDataCache.get(G).clause.testSet(t,this.featureAdapter)};
I._processAttributesForOutFields=function(t){const G=this.outFields;if(!G||!G.length)return this.featureAdapter.getAttributes(t);const m={};for(const u of G){const {alias:v,clause:D}=this._fieldDataCache.get(u);m[v]=D?D.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,v)}return m};I._processAttributesForDistinctValues=function(t){if(p.isNone(t)||!this.returnDistinctValues)return t;var G=this.outFields,m=[];if(G)for(const v of G){var {alias:u}=this._fieldDataCache.get(v);m.push(t[u])}else for(u in t)m.push(t[u]);
G=`${(G||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(G)||0;this._returnDistinctMap.set(G,++m);return 1<m?null:t};return da}()})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(p,e,da,I){function t(ba){return new u(ba)}async function G(){return ja?ja:ja=await new Promise(function(ba,l){p(["../../../../geometry/geometryEngineJSON"],ba,l)})}let m=
function(){this.description=this.code=null},u=function(ba){this.error=new m;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=ba},v=function(ba){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=ba};const D=new Set;let ja;e.createFeatureEditErrorResult=t;e.createFeatureEditSuccessResult=function(ba){return new v(ba)};e.loadGeometryEngine=G;e.loadGeometryEngineForSimplify=async function(ba,l){!da.isValid(ba)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==
l||await G()};e.mixAttributes=function(ba,l,A,n,d=!1,g){D.clear();for(const F in n){const L=ba.get(F);if(L){var y=n[F];{var M=L;var O=y;let Y=O;"string"===typeof O&&I.isNumericField(M)?Y=parseFloat(O):null!=O&&I.isStringField(M)&&"string"!==typeof O&&(Y=String(O));M=I.sanitizeNullFieldValue(Y)}M!==y&&g&&g.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:L,originalValue:y,sanitizedValue:M}});D.add(L.name);if(L&&(d||L.editable)){if(y=I.validateFieldValue(L,
M))return t(I.validationErrorToString(y,L,M));A[L.name]=M}}}for(const F of l)if(!D.has(F.name))return t(`missing required field "${F.name}"`);return null};e.simplify=function(ba,l){if(!ba||!da.isValid(l))return ba;if("rings"in ba||"paths"in ba){if(!ja)throw new TypeError("geometry engine not loaded");return ja.simplify(l,ba)}return ba};Object.defineProperty(e,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../core/Error ../../../../core/promiseUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/jsonUtils ../../../support/fieldUtils ../../../support/fieldType ../../featureConversionUtils ../../../support/FieldsIndex ../../data/projectionSupport ./clientSideDefaults ../../data/FeatureStore ../../data/QueryEngine ./sourceUtils".split(" "),function(p,e,da,I,t,G,m,u,v,D,ja,ba,l){function A(M){return I.isPoint(M)?null!=M.z:!!M.hasZ}function n(M){return I.isPoint(M)?
null!=M.m:!!M.hasM}const d=da.WGS84,g={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:da.WGS84},y={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function M(){this._nextObjectId=this._queryEngine=null}var O=M.prototype;O.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};O.load=async function(F){var L=[];const {features:Y}=F;var ka=this._inferLayerProperties(Y,
F.fields);const fa=F.fields||[],J=null!=F.hasM?F.hasM:ka.hasM,T=null!=F.hasZ?F.hasZ:ka.hasZ;var ia=!F.spatialReference&&!ka.spatialReference;const Q=ia?d:F.spatialReference||ka.spatialReference,P=ia?g:null,B=F.geometryType||ka.geometryType;let q=F.objectIdField||ka.objectIdField;F=F.timeInfo;if(B&&(ia&&L.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!B))throw new p("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");
if(!q)throw new p("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");ka.objectIdField&&q!==ka.objectIdField&&(L.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${q}" doesn't match the field name "${ka.objectIdField}", found in the provided fields`}),q=ka.objectIdField);if(q&&!ka.objectIdField){let C=null;fa.some(W=>W.name===q?(C=W,!0):!1)?(C.type="esriFieldTypeOID",C.editable=!1,C.nullable=!1):fa.unshift({alias:q,
name:q,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const C of fa){null==C.name&&(C.name=C.alias);null==C.alias&&(C.alias=C.name);if(!C.name)throw new p("feature-layer:invalid-field-name","field name is missing",{field:C});C.name===q&&(C.type="esriFieldTypeOID");if(-1===G.kebabDict.jsonValues.indexOf(C.type))throw new p("feature-layer:invalid-field-type",`invalid type for field "${C.name}"`,{field:C});}ka={};this._requiredFields=[];for(var H of fa)"esriFieldTypeOID"!==H.type&&"esriFieldTypeGlobalID"!==
H.type&&(H.editable=null==H.editable?!0:!!H.editable,H.nullable=null==H.nullable?!0:!!H.nullable,ia=t.getFieldDefaultValue(H),H.nullable||void 0!==ia?ka[H.name]=ia:this._requiredFields.push(H));this._fieldsIndex=new u(fa);this._createDefaultAttributes=D.createDefaultAttributesFunction(ka,q);F&&(F.startTimeField&&((H=this._fieldsIndex.get(F.startTimeField))?(F.startTimeField=H.name,H.type="esriFieldTypeDate"):F.startTimeField=null),F.endTimeField&&((H=this._fieldsIndex.get(F.endTimeField))?(F.endTimeField=
H.name,H.type="esriFieldTypeDate"):F.endTimeField=null),F.trackIdField&&((H=this._fieldsIndex.get(F.trackIdField))?F.trackIdField=H.name:(F.trackIdField=null,L.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:F}}))),F.startTimeField||F.endTimeField||(L.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:F}}),F=null));L={warnings:L,featureErrors:[],layerDefinition:{...y,
drawingInfo:D.createDrawingInfo(B),templates:D.createDefaultTemplate(ka),extent:P,geometryType:B,objectIdField:q,fields:fa,hasZ:!!T,hasM:!!J,timeInfo:F},assignedObjectIds:{}};this._queryEngine=new ba["default"]({fields:fa,geometryType:B,hasM:J,hasZ:T,objectIdField:q,spatialReference:Q,featureStore:new ja({geometryType:B,hasM:J,hasZ:T}),timeInfo:F});if(!Y||!Y.length)return this._nextObjectId=1,L;this._nextObjectId=1+Y.reduce((C,W)=>{W=W.attributes&&W.attributes[q];return null==W||isNaN(W)||!isFinite(W)?
C:Math.max(C,W)},0);await v.checkProjectionSupport(Y,Q);return this._loadInitialFeatures(L,Y)};O.applyEdits=async function(F){const {spatialReference:L,geometryType:Y}=this._queryEngine;await e.all([l.loadGeometryEngineForSimplify(L,Y),v.checkProjectionSupport(F.adds,L),v.checkProjectionSupport(F.updates,L)]);return this._applyEdits(F)};O.queryFeatures=async function(F,L={}){return this._queryEngine.executeQuery(F,L.signal)};O.queryFeatureCount=async function(F,L={}){return this._queryEngine.executeQueryForCount(F,
L.signal)};O.queryObjectIds=async function(F,L={}){return this._queryEngine.executeQueryForIds(F,L.signal)};O.queryExtent=async function(F,L={}){return this._queryEngine.executeQueryForExtent(F,L.signal)};O._inferLayerProperties=function(F,L){let Y=void 0,ka=void 0,fa=null,J=null,T=null;for(const ia of F)if(F=ia.geometry)if(fa||(fa=I.getJsonType(F)),J||(J=F.spatialReference),null==Y&&(Y=A(F)),null==ka&&(ka=n(F)),fa&&J&&null!=Y&&null!=ka)break;if(L&&L.length){let ia=null;L.some(Q=>{const P="esriFieldTypeOID"===
Q.type,B=!Q.type&&Q.name&&"objectid"===Q.name.toLowerCase();ia=Q;return P||B})&&(T=ia.name)}return{geometryType:fa,spatialReference:J,objectIdField:T,hasM:ka,hasZ:Y}};O._loadInitialFeatures=function(F,L){const {geometryType:Y,hasM:ka,hasZ:fa,objectIdField:J,spatialReference:T,featureStore:ia}=this._queryEngine,Q=[];for(const P of L){null!=P.uid&&(F.assignedObjectIds[P.uid]=-1);if(P.geometry&&Y!==I.getJsonType(P.geometry)){F.featureErrors.push(l.createFeatureEditErrorResult("Incorrect geometry type."));
continue}L=this._createDefaultAttributes();const B=l.mixAttributes(this._fieldsIndex,this._requiredFields,L,P.attributes,!0,F.warnings);B?F.featureErrors.push(B):(this._assignObjectId(L,P.attributes,!0),P.attributes=L,null!=P.uid&&(F.assignedObjectIds[P.uid]=P.attributes[J]),P.geometry&&(P.geometry=v.project(P.geometry,P.geometry.spatialReference,T)),Q.push(P))}ia.addMany(m.convertFromFeatures([],Q,Y,fa,ka,J));F.layerDefinition.extent=this._queryEngine.fullExtent;if(F.layerDefinition.timeInfo){const {start:P,
end:B}=this._queryEngine.timeExtent;F.layerDefinition.timeInfo.timeExtent=[P,B]}return F};O._applyEdits=function(F){const {adds:L,updates:Y,deletes:ka}=F;F={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};L&&L.length&&this._applyAddEdits(F,L);Y&&Y.length&&this._applyUpdateEdits(F,Y);if(ka&&ka.length){for(const fa of ka)F.deleteResults.push(l.createFeatureEditSuccessResult(fa));this._queryEngine.featureStore.removeManyById(ka)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:F}};
O._applyAddEdits=function(F,L){const {addResults:Y}=F,{geometryType:ka,hasM:fa,hasZ:J,objectIdField:T,spatialReference:ia,featureStore:Q}=this._queryEngine,P=[];for(const B of L){if(B.geometry&&ka!==I.getJsonType(B.geometry)){Y.push(l.createFeatureEditErrorResult("Incorrect geometry type."));continue}L=this._createDefaultAttributes();const q=l.mixAttributes(this._fieldsIndex,this._requiredFields,L,B.attributes);q?Y.push(q):(this._assignObjectId(L,B.attributes),B.attributes=L,null!=B.uid&&(F.uidToObjectId[B.uid]=
B.attributes[T]),B.geometry&&(B.geometry=v.project(l.simplify(B.geometry,ia),B.geometry.spatialReference,ia)),P.push(B),Y.push(l.createFeatureEditSuccessResult(B.attributes[T])))}Q.addMany(m.convertFromFeatures([],P,ka,J,fa,T))};O._applyUpdateEdits=function({updateResults:F},L){const {geometryType:Y,hasM:ka,hasZ:fa,objectIdField:J,spatialReference:T,featureStore:ia}=this._queryEngine;for(const Q of L){const {attributes:P,geometry:B}=Q;L=P&&P[J];if(null==L){F.push(l.createFeatureEditErrorResult(`Identifier field ${J} missing`));
continue}if(!ia.has(L)){F.push(l.createFeatureEditErrorResult(`Feature with object id ${L} missing`));continue}const q=m.convertToFeature(ia.getFeature(L),Y,fa,ka);if(B){if(Y!==I.getJsonType(B)){F.push(l.createFeatureEditErrorResult("Incorrect geometry type."));continue}q.geometry=v.project(l.simplify(B,T),B.spatialReference,T)}if(P){const H=l.mixAttributes(this._fieldsIndex,this._requiredFields,q.attributes,P);if(H){F.push(H);continue}}ia.add(m.convertFromFeature(q,Y,fa,ka,J));F.push(l.createFeatureEditSuccessResult(L))}};
O._assignObjectId=function(F,L,Y=!1){const ka=this._queryEngine.objectIdField;Y?L&&isFinite(L[ka])?F[ka]=L[ka]:F[ka]=this._nextObjectId++:F[ka]=this._nextObjectId++};return M}()});