// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/support/typeUtils ../../../geometry ../../../core/Loadable ../../ogc/ogcFeatureUtils".split(" "),
function(c,q,e,J,w,K,L,f,M,x,y,N,O,P,z,A,r,B,Q,C,h){c.OGCFeatureSource=function(t){function l(){var a=t.apply(this,arguments)||this;a.collection=null;a.conformance=null;a.landingPage=null;a.layerDefinition=null;a.type="ogc-feature";return a}q._inheritsLoose(l,t);var g=l.prototype;g.load=function(a){a=w.isSome(a)?a.signal:null;const {collectionId:b,fields:d,geometryType:n,hasZ:D,objectIdField:E,spatialReference:u,timeInfo:v,url:m}=this.layer,F={fields:null==d?void 0:d.map(p=>p.toJSON()),geometryType:B.typeKebabDictionary.toJSON(n),
hasZ:D,objectIdField:E,spatialReference:null==u?void 0:u.toJSON(),timeInfo:null==v?void 0:v.toJSON()};this.addResolvingPromise(z.all([h.getServerLandingPage(m,a),h.getServerConformance(m,a),h.getServerCollection(m,b,a),h.getCollectionDefinition(m,b,F,a)]).then(p=>{const [G,k,H,I]=p;this.set({landingPage:G,conformance:k,collection:H,layerDefinition:I});if(-1===(null==k?void 0:k.conformsTo.indexOf("http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))&&-1===(null==k?void 0:k.conformsTo.indexOf("https://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson")))throw new y("ogc-feature-layer:no-geojson-support",
"Server does not support geojson");}));return this.when()};g.queryExtent=function(a,b){return null};g.queryFeatureCount=function(a,b){return null};g.queryFeatures=function(a,b={}){const d=this._getFeatureDefinition();return this.load(b).then(()=>h.queryFeatureSet(d,a,b))};g.queryFeaturesJSON=function(a,b={}){const d=this._getFeatureDefinition();return this.load(b).then(()=>h.queryFeatureSetJSON(d,a,b))};g.queryObjectIds=function(a,b){return null};g._getFeatureDefinition=function(){const {layer:{capabilities:a,
collectionId:b,url:d},layerDefinition:n}=this;return{capabilities:a,collectionId:b,layerDefinition:n,url:d}};q._createClass(l,[{key:"fullExtent",get:function(){var a,b;const d=null==(a=this.collection)?void 0:null==(b=a.extent)?void 0:b.spatial;if(!d)return null;a=d.bbox[0];b=4===a.length;return new r({xmin:a[0],ymin:a[1],xmax:b?a[2]:a[3],ymax:b?a[3]:a[4],zmin:b?void 0:a[2],zmax:b?void 0:a[5],spatialReference:A.WGS84})}}]);return l}(C);e.__decorate([f.property()],c.OGCFeatureSource.prototype,"collection",
void 0);e.__decorate([f.property()],c.OGCFeatureSource.prototype,"conformance",void 0);e.__decorate([f.property({dependsOn:["collection"],readOnly:!0,type:r})],c.OGCFeatureSource.prototype,"fullExtent",null);e.__decorate([f.property()],c.OGCFeatureSource.prototype,"landingPage",void 0);e.__decorate([f.property({constructOnly:!0})],c.OGCFeatureSource.prototype,"layer",void 0);e.__decorate([f.property()],c.OGCFeatureSource.prototype,"layerDefinition",void 0);e.__decorate([f.property()],c.OGCFeatureSource.prototype,
"type",void 0);c.OGCFeatureSource=e.__decorate([x.subclass("esri.layers.graphics.sources.OGCFeatureSource")],c.OGCFeatureSource);c.default=c.OGCFeatureSource;Object.defineProperty(c,"__esModule",{value:!0})});