// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(Y,S,Q,R,q,J,L,
O,M,C,y,z,h,n,m){var v;const t=J.getLogger("esri.layers.support.PixelBlock");Q=v=function(x){function F(l){l=x.call(this,l)||this;l.width=null;l.height=null;l.pixelType="f32";l.validPixelCount=null;l.mask=null;l.maskIsAlpha=!1;l.pixels=null;l.statistics=null;return l}Y._inheritsLoose(F,x);F.createEmptyBand=function(l,p){return new (v.getPixelArrayConstructor(l))(p)};F.getPixelArrayConstructor=function(l){let p;switch(l){case "u1":case "u2":case "u4":case "u8":p=Uint8Array;break;case "u16":p=Uint16Array;
break;case "u32":p=Uint32Array;break;case "s8":p=Int8Array;break;case "s16":p=Int16Array;break;case "s32":p=Int32Array;break;case "u32":p=Uint32Array;break;case "f32":p=Float32Array;break;case "f64":p=Float64Array;break;case "c64":case "c128":case "unknown":p=Float32Array}return p};var w=F.prototype;w.castPixelType=function(l){if(!l)return"f32";l=l.toLowerCase();-1<["u1","u2","u4"].indexOf(l)?l="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(l)&&(l="f32");return l};w.getPlaneCount=
function(){return this.pixels&&this.pixels.length};w.addData=function(l){if(!l.pixels||l.pixels.length!==this.width*this.height)throw new y("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(l.pixels);this.statistics.push(l.statistics||{minValue:null,maxValue:null})};w.getAsRGBA=function(){const l=new ArrayBuffer(this.width*this.height*
4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(l);break;default:this._fillFrom8Bit(l)}return new Uint8ClampedArray(l)};w.getAsRGBAFloat=function(){const l=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(l);return l};w.updateStatistics=function(){this.statistics=this.pixels.map(B=>this._calculateBandStatistics(B,this.mask));const l=this.mask;let p=0;if(l)for(let B=0;B<l.length;B++)l[B]&&p++;else p=this.width*
this.height;this.validPixelCount=p};w.clamp=function(l){if(l&&"f64"!==l&&"f32"!==l){switch(l){case "u8":var p=[0,255];break;case "u16":p=[0,65535];break;case "u32":p=[0,4294967295];break;case "s8":p=[-128,127];break;case "s16":p=[-32768,32767];break;case "s32":p=[-2147483648,2147483647];break;default:p=[-3.4*1E39,3.4*1E39]}var [B,G]=p;p=this.pixels;var g=this.width*this.height,b=p.length,k=[];for(let e=0;e<b;e++){var r=v.createEmptyBand(l,g);var c=p[e];for(let f=0;f<g;f++){var a=c[f];r[f]=a>G?G:a<
B?B:a}k.push(r)}this.pixels=k;this.pixelType=l}};w.extractBands=function(l){if(q.isNone(l)||0===l.length||null==this.pixels||0===this.pixels.length)return this;var p=this.pixels.length;const B=l.some(G=>G>=this.pixels.length);p=p===l.length&&!l.some((G,g)=>G!==g);return B||p?this:new v({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:l.map(G=>this.pixels[G]),statistics:this.statistics&&l.map(G=>this.statistics[G])})};
w.clone=function(){const l=new v({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(l.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let p;const B=v.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){l.pixels=[];const G=this.pixels[0].slice;for(p=0;p<this.pixels.length;p++)l.pixels[p]=G?this.pixels[p].slice(0,this.pixels[p].length):new B(this.pixels[p])}if(this.statistics)for(l.statistics=
[],p=0;p<this.statistics.length;p++)l.statistics[p]=R.clone(this.statistics[p]);return l};w._fillFrom8Bit=function(l){const {mask:p,maskIsAlpha:B,pixels:G}=this;if(l&&G&&G.length){var g,b;var k=g=b=G[0];3<=G.length?(g=G[1],b=G[2]):2===G.length&&(g=G[1]);var r=new Uint32Array(l),c=this.width*this.height;if(k.length!==c)t.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(p&&p.length===c)if(B)for(l=0;l<c;l++)p[l]&&(r[l]=p[l]<<24|b[l]<<16|g[l]<<8|k[l]);else for(l=0;l<
c;l++)p[l]&&(r[l]=-16777216|b[l]<<16|g[l]<<8|k[l]);else for(l=0;l<c;l++)r[l]=-16777216|b[l]<<16|g[l]<<8|k[l]}else t.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFromNon8Bit=function(l){const {pixels:p,mask:B,statistics:G}=this;if(l&&p&&p.length){var g=this.pixelType,b=1,k=0;b=1;G&&0<G.length?(k=G.map(f=>f.minValue).reduce((f,d)=>Math.min(f,d)),b=G.map(f=>f.maxValue-f.minValue).reduce((f,d)=>Math.max(f,d)),b=255/b):(b=255,"s8"===g?(k=-128,b=127):"u16"===
g?b=65535:"s16"===g?(k=-32768,b=32767):"u32"===g?b=4294967295:"s32"===g?(k=-2147483648,b=2147483647):"f32"===g?(k=-3.4*1E39,b=3.4*1E39):"f64"===g&&(k=-Number.MAX_VALUE,b=Number.MAX_VALUE),b=255/(b-k));l=new Uint32Array(l);g=this.width*this.height;var r,c,a;var e=r=c=p[0];if(e.length!==g)return t.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=p.length)if(r=p[1],3<=p.length&&(c=p[2]),B&&B.length===g)for(a=0;a<g;a++)B[a]&&(l[a]=-16777216|(c[a]-k)*b<<16|(r[a]-k)*b<<
8|(e[a]-k)*b);else for(a=0;a<g;a++)l[a]=-16777216|(c[a]-k)*b<<16|(r[a]-k)*b<<8|(e[a]-k)*b;else if(B&&B.length===g)for(a=0;a<g;a++)r=(e[a]-k)*b,B[a]&&(l[a]=-16777216|r<<16|r<<8|r);else for(a=0;a<g;a++)r=(e[a]-k)*b,l[a]=-16777216|r<<16|r<<8|r}else t.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFrom32Bit=function(l){const {pixels:p,mask:B}=this;if(!l||!p||!p.length)return t.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let G,g,b,k;G=g=b=p[0];3<=p.length?(g=p[1],b=p[2]):2===p.length&&(g=p[1]);const r=this.width*this.height;if(G.length!==r)return t.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let c=0;if(B&&B.length===r)for(k=0;k<r;k++)l[c++]=G[k],l[c++]=g[k],l[c++]=b[k],l[c++]=B[k]&1;else for(k=0;k<r;k++)l[c++]=G[k],l[c++]=g[k],l[c++]=b[k],l[c++]=1};w._calculateBandStatistics=function(l,p){let B=Infinity,G=-Infinity;const g=l.length;let b,k=0;if(p)for(b=0;b<g;b++)p[b]&&(k=l[b],
B=k<B?k:B,G=k>G?k:G);else for(b=0;b<g;b++)k=l[b],B=k<B?k:B,G=k>G?k:G;return{minValue:B,maxValue:G}};return F}(m.JSONSupport);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"width",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"height",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"pixelType",void 0);S.__decorate([O.cast("pixelType")],Q.prototype,"castPixelType",null);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"validPixelCount",void 0);
S.__decorate([L.property({json:{write:!0}})],Q.prototype,"mask",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"maskIsAlpha",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"pixels",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"statistics",void 0);return Q=v=S.__decorate([C.subclass("esri.layers.support.PixelBlock")],Q)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(Y,S,Q,R,q,J,L,O,M,C,y){function z(g,b){if(!C.isPlatformLittleEndian)throw new S("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:k,height:r,pixelType:c}=b;var a=w(c);const e=a.pixelTypeCtor;b=null==b.noDataValue?a.noDataValue:b.noDataValue;a=0;let f,d=0,u;const E=g.byteLength-10;for(;d<E;){var A=O.decode(g,{inputOffset:d,encodedMaskData:f,returnMask:0===a?!0:!1,returnEncodedMask:0===a?!0:!1,returnFileInfo:!0,pixelType:e,noDataValue:b});if(k&&r&&(A.width!==
k||A.height!==r))throw new S("rasterCoded:decode","lerc decoded result has width or height different from specified in options");d=A.fileInfo.eofOffset;0===a&&(f=A.encodedMaskData,u=new Q({width:A.width,height:A.height,pixels:[],pixelType:c,mask:A.maskData,statistics:[]}));a++;u.addData({pixels:A.pixelData,statistics:{minValue:A.minValue,maxValue:A.maxValue,noDataValue:A.noDataValue}});10<E-d&&(A=String.fromCharCode.apply(null,new Uint8Array(g,d,10)),d=-1<d+A.indexOf("CntZ")?A.indexOf("CntZ"):0)}return u}
function h(g,b){if(!C.isPlatformLittleEndian)throw new S("rasterCoded:decode","lerc decoder is not supported on big endian platform");var k=0,r=0,c=0;let a,e;const f=g.byteLength-10,d=[],{width:u,height:E}=b;for(;r<f;){var A;b=p.decode(g,{inputOffset:r,maskData:a,returnFileInfo:!0});if(u&&E&&(b.width!==u||b.height!==E))throw new S("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");r=b.fileInfo.eofOffset;0===k&&(c=b.fileInfo.numValidPixel,a=
b.maskData,e=new Q({width:b.width,height:b.height,pixels:[],pixelType:b.fileInfo.pixelType,mask:b.maskData,statistics:[]}));b.fileInfo.mask&&0<b.fileInfo.mask.numBytes&&d.push(b.maskData);if(1<b.dimCount&&(null==(A=b.pixelData)?void 0:A.length)===b.width*b.height*b.dimCount){var D,H,N,I;b.pixelData=b.pixelData.slice(-b.width*b.height);const K=null==(D=b.dimStats)?void 0:null==(H=D.minValues)?void 0:H[b.dimCount-1],P=null==(N=b.dimStats)?void 0:null==(I=N.maxValues)?void 0:I[b.dimCount-1];null!=K&&
null!=P&&(b.minValue=K,b.maxValue=P)}k++;e.addData({pixels:b.pixelData,statistics:{minValue:b.minValue,maxValue:b.maxValue}});10<f-r&&(b=String.fromCharCode.apply(null,new Uint8Array(g,r,10)),r+=-1<b.indexOf("Lerc")?b.indexOf("Lerc"):0)}r=k=g=0;if(1<d.length){r=e.width*e.height;a=new Uint8Array(r);a.set(d[0]);for(g=1;g<d.length;g++)for(c=d[g],k=0;k<r;k++)a[k]&=c[k];for(k=c=0;k<r;k++)c+=a[k];e.mask=a}e.validPixelCount=c;return e}function n(g){g=y.decode(g);g=new Q({width:g.width,height:g.height,pixels:g.pixels,
pixelType:g.pixelType.toLowerCase(),mask:g.mask,statistics:null});g.updateStatistics();return g}function m(g){g=L.decode(g);g=new Q({width:g.width,height:g.height,pixels:g.pixels,pixelType:"U8",mask:g.mask,statistics:null});g.updateStatistics();return g}function v(g,b){g=new Uint8Array(g);g=new B(g);const {width:k,height:r}=b;b=k*r;g=g.decode();let c=0;var a=0;let e;a=new Uint8Array(b);for(c=0;c<b;c++)a[c]=g[4*c+3];const f=new Q({width:k,height:r,pixels:[],pixelType:"U8",mask:a,statistics:[]});for(c=
0;3>c;c++){e=new Uint8Array(b);for(a=0;a<b;a++)e[a]=g[4*a+c];f.addData({pixels:e})}f.updateStatistics();return f}async function t(g,b,k,r){g=await (new J).decode(g,{applyJpegMask:!1,format:b,...k},r);g=new Q(g);g.updateStatistics();return g}function x(g){if(null==g)throw new S("rasterCodec:decode","parameter encodeddata is required.");g=new Uint8Array(g,0,10);let b="";255===g[0]&&216===g[1]?b="jpg":137===g[0]&&80===g[1]&&78===g[2]&&71===g[3]?b="png":67===g[0]&&110===g[1]&&116===g[2]&&90===g[3]&&73===
g[4]&&109===g[5]&&97===g[6]&&103===g[7]&&101===g[8]&&32===g[9]?b="lerc":76===g[0]&&101===g[1]&&114===g[2]&&99===g[3]&&50===g[4]&&32===g[5]?b="lerc2":73===g[0]&&73===g[1]&&42===g[2]&&0===g[3]||77===g[0]&&77===g[1]&&0===g[2]&&42===g[3]?b="tiff":71===g[0]&&73===g[1]&&70===g[2]?b="gif":66===g[0]&&77===g[1]?b="bmp":-1<String.fromCharCode.apply(null,g).toLowerCase().indexOf("error")&&(b="error");return b}function F(g){let b=null;switch(g){case "lerc":b=z;break;case "lerc2":b=h;break;case "jpg":b=m;break;
case "png":b=v;break;case "bsq":case "bip":b=(k,r)=>{{const {pixelTypeCtor:c}=w(r.pixelType),a=M.decode;k=a(k,{width:r.width,height:r.height,pixelType:c,format:g});r=new Q({width:r.width,height:r.height,pixels:k.pixels,pixelType:r.pixelType,mask:k.mask,statistics:null});r.updateStatistics()}return r};break;case "tiff":b=n;break;case "error":b=()=>{throw new S("rasterCodec:decode","input data contains error");};break;default:b=()=>{throw new S("rasterCodec:decode","unsupported raster format");}}return b}
function w(g){let b=null,k=null;switch(g?g.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":k=Math.pow(2,8)-1;b=Uint8Array;break;case "u16":k=k||Math.pow(2,16)-1;b=Uint16Array;break;case "u32":k=k||Math.pow(2,32)-1;b=Uint32Array;break;case "s8":k=k||0-Math.pow(2,7);b=Int8Array;break;case "s16":k=k||0-Math.pow(2,15);b=Int16Array;break;case "s32":k=k||0-Math.pow(2,31);b=Int32Array;break;default:b=Float32Array}return{pixelTypeCtor:b,noDataValue:k}}function l(g,b=1){if(g){var {pixels:k,width:r,
height:c,mask:a}=g;if(k&&0!==k.length){var e=k.length,f=r-1,d=c-1,u=[],E,A,D=Q.getPixelArrayConstructor(g.pixelType);if(0===b){for(b=0;b<e;b++){var H=k[b];var N=new D(f*d);for(E=0;E<d;E++){var I=E*r;for(A=0;A<f;A++)N[E*f+A]=H[I+A]}u.push(N)}if(a){var K=new Uint8Array(f*d);for(E=0;E<d;E++)for(I=E*r,A=0;A<f;A++)K[E*f+A]=a[I+A]}}else{for(b=0;b<e;b++){H=k[b];N=new D(f*d);for(E=0;E<d;E++)for(I=E*r,A=0;A<f;A++)N[E*f+A]=(H[I+A]+H[I+A+1]+H[I+r+A]+H[I+r+A+1])/4;u.push(N)}if(a)for(K=new Uint8Array(f*d),E=0;E<
d;E++)for(I=E*r,A=0;A<f;A++)K[E*f+A]=Math.min.apply(null,[a[I+A],a[I+A+1],a[I+r+A],a[I+r+A+1]])}g.width=f;g.height=d;g.mask=K;g.pixels=u}}}var p=R.createCommonjsModule(function(g){(function(b){b=b();void 0!==b&&(g.exports=b)})(function(){var b={unstuff:function(c,a,e,f,d,u,E,A){var D=(1<<e)-1,H=0,N,I=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(e*f/8));if(d)for(N=0;N<f;N++){if(0===I){var K=c[H++];I=32}if(I>=e){var P=K>>>I-e&D;I-=e}else I=e-I,P=(K&D)<<I&D,K=c[H++],I=32-I,P+=K>>>I;a[N]=d[P]}else for(d=
Math.ceil((A-u)/E),N=0;N<f;N++)0===I&&(K=c[H++],I=32),I>=e?(P=K>>>I-e&D,I-=e):(I=e-I,P=(K&D)<<I&D,K=c[H++],I=32-I,P+=K>>>I),a[N]=P<d?u+P*E:A},unstuffLUT:function(c,a,e,f,d,u){var E=(1<<a)-1,A=0,D=0,H=0,N=H=0,I=[];c[c.length-1]<<=8*(4*c.length-Math.ceil(a*e/8));var K=Math.ceil((u-f)/d);for(D=0;D<e;D++){if(0===H){var P=c[A++];H=32}H>=a?(N=P>>>H-a&E,H-=a):(H=a-H,N=(P&E)<<H&E,P=c[A++],H=32-H,N+=P>>>H);I[D]=N<K?f+N*d:u}I.unshift(f);return I},unstuff2:function(c,a,e,f,d,u,E,A){var D=(1<<e)-1,H=0,N,I=0,
K=0;if(d)for(N=0;N<f;N++){if(0===I){var P=c[H++];I=32;K=0}if(I>=e){var U=P>>>K&D;I-=e;K+=e}else{var T=e-I;U=P>>>K&D;P=c[H++];I=32-T;U|=(P&(1<<T)-1)<<e-T;K=T}a[N]=d[U]}else for(d=Math.ceil((A-u)/E),N=0;N<f;N++)0===I&&(P=c[H++],I=32,K=0),I>=e?(U=P>>>K&D,I-=e,K+=e):(T=e-I,U=P>>>K&D,P=c[H++],I=32-T,U|=(P&(1<<T)-1)<<e-T,K=T),a[N]=U<d?u+U*E:A;return a},unstuffLUT2:function(c,a,e,f,d,u){var E=(1<<a)-1,A=0,D=0,H=0,N=0,I=0,K=0,P=[],U=Math.ceil((u-f)/d);for(D=0;D<e;D++){if(0===N){var T=c[A++];N=32;K=0}N>=a?
(I=T>>>K&E,N-=a,K+=a):(H=a-N,I=T>>>K&E,T=c[A++],N=32-H,I|=(T&(1<<H)-1)<<a-H,K=H);P[D]=I<U?f+I*d:u}P.unshift(f);return P},originalUnstuff:function(c,a,e,f){var d=(1<<e)-1,u=0,E,A=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(e*f/8));for(E=0;E<f;E++){if(0===A){var D=c[u++];A=32}if(A>=e){var H=D>>>A-e&d;A-=e}else A=e-A,H=(D&d)<<A&d,D=c[u++],A=32-A,H+=D>>>A;a[E]=H}return a},originalUnstuff2:function(c,a,e,f){var d=(1<<e)-1,u=0,E,A=0,D=0;for(E=0;E<f;E++){if(0===A){var H=c[u++];A=32;D=0}if(A>=e){var N=H>>>
D&d;A-=e;D+=e}else{var I=e-A;N=H>>>D&d;H=c[u++];A=32-I;N|=(H&(1<<I)-1)<<e-I;D=I}a[E]=N}return a}},k={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(c){for(var a=65535,e=65535,f=c.length,d=Math.floor(f/2),u=0;d;){var E=359<=d?359:d;d-=E;do a+=c[u++]<<8,e+=a+=c[u++];while(--E);a=(a&65535)+(a>>>16);e=(e&65535)+(e>>>16)}f&1&&(e+=a+=c[u]<<8);return((e&65535)+(e>>>16)<<16|(a&65535)+(a>>>16))>>>0},readHeaderInfo:function(c,a){var e=a.ptr,f=new Uint8Array(c,e,6),d={};d.fileIdentifierString=String.fromCharCode.apply(null,
f);if(0!==d.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+d.fileIdentifierString;e+=6;f=new DataView(c,e,8);var u=f.getInt32(0,!0);d.fileVersion=u;e+=4;3<=u&&(d.checksum=f.getUint32(4,!0),e+=4);f=new DataView(c,e,12);d.height=f.getUint32(0,!0);d.width=f.getUint32(4,!0);e+=8;4<=u?(d.numDims=f.getUint32(8,!0),e+=4):d.numDims=1;f=new DataView(c,e,40);d.numValidPixel=f.getUint32(0,!0);d.microBlockSize=f.getInt32(4,!0);d.blobSize=f.getInt32(8,!0);
d.imageType=f.getInt32(12,!0);d.maxZError=f.getFloat64(16,!0);d.zMin=f.getFloat64(24,!0);d.zMax=f.getFloat64(32,!0);e+=40;a.headerInfo=d;a.ptr=e;if(3<=u&&(c=this.computeChecksumFletcher32(new Uint8Array(c,e-(4<=u?52:48),d.blobSize-14)),c!==d.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(c,a){var e=a.headerInfo,f=this.getDataTypeArray(e.imageType),d=e.numDims*this.getDataTypeSize(e.imageType),u=this.readSubArray(c,a.ptr,f,d);c=this.readSubArray(c,a.ptr+d,f,d);a.ptr+=2*d;d=
!0;for(a=0;a<e.numDims;a++)if(u[a]!==c[a]){d=!1;break}e.minValues=u;e.maxValues=c;return d},readSubArray:function(c,a,e,f){if(e===Uint8Array)c=new Uint8Array(c,a,f);else{var d=new ArrayBuffer(f);(new Uint8Array(d)).set(new Uint8Array(c,a,f));c=new e(d)}return c},readMask:function(c,a){var e=a.ptr,f=a.headerInfo,d=f.width*f.height,u=f.numValidPixel,E=new DataView(c,e,4);f={};f.numBytes=E.getUint32(0,!0);e+=4;if((0===u||d===u)&&0!==f.numBytes)throw"invalid mask";if(0===u)u=new Uint8Array(Math.ceil(d/
8)),f.bitset=u,E=new Uint8Array(d),a.pixels.resultMask=E,e+=f.numBytes;else if(0<f.numBytes){u=new Uint8Array(Math.ceil(d/8));E=new DataView(c,e,f.numBytes);c=E.getInt16(0,!0);var A=2,D=0,H=0;do{if(0<c)for(;c--;)u[D++]=E.getUint8(A++);else for(H=E.getUint8(A++),c=-c;c--;)u[D++]=H;c=E.getInt16(A,!0);A+=2}while(A<f.numBytes);if(-32768!==c||D<u.length)throw"Unexpected end of mask RLE encoding";E=new Uint8Array(d);for(A=A=c=0;A<d;A++)A&7?(c=u[A>>3],c<<=A&7):c=u[A>>3],c&128&&(E[A]=1);a.pixels.resultMask=
E;f.bitset=u;e+=f.numBytes}a.ptr=e;a.mask=f;return!0},readDataOneSweep:function(c,a,e){var f=a.ptr,d=a.headerInfo,u=d.numDims,E=d.width*d.height;d=d.numValidPixel*k.getDataTypeSize(d.imageType)*u;var A=a.pixels.resultMask;if(e===Uint8Array)c=new Uint8Array(c,f,d);else{var D=new ArrayBuffer(d);(new Uint8Array(D)).set(new Uint8Array(c,f,d));c=new e(D)}if(c.length===E*u)a.pixels.resultPixels=c;else{a.pixels.resultPixels=new e(E*u);var H=D=e=0,N=0;if(1<u)for(H=0;H<u;H++)for(N=H*E,D=0;D<E;D++)A[D]&&(a.pixels.resultPixels[N+
D]=c[e++]);else for(D=0;D<E;D++)A[D]&&(a.pixels.resultPixels[D]=c[e++])}a.ptr=f+d;return!0},readHuffmanTree:function(c,a){var e=this.HUFFMAN_LUT_BITS_MAX,f=new DataView(c,a.ptr,16);a.ptr+=16;if(2>f.getInt32(0,!0))throw"unsupported Huffman version";var d=f.getInt32(4,!0),u=f.getInt32(8,!0);f=f.getInt32(12,!0);if(u>=f)return!1;var E=new Uint32Array(f-u);k.decodeBits(c,a,E);var A=[],D;for(D=u;D<f;D++){var H=D-(D<d?0:d);A[H]={first:E[D-u],second:null}}D=c.byteLength-a.ptr;E=new ArrayBuffer(4*Math.ceil(D/
4));(new Uint8Array(E)).set(new Uint8Array(c,a.ptr,D));c=new Uint32Array(E);a=0;E=0;var N=c[0];for(D=u;D<f;D++){H=D-(D<d?0:d);var I=A[H].first;0<I&&(A[H].second=N<<a>>>32-I,32-a>=I?(a+=I,32===a&&(a=0,E++,N=c[E])):(a+=I-32,E++,N=c[E],A[H].second|=N>>>32-a))}var K=N=0,P=new r;for(D=0;D<A.length;D++)void 0!==A[D]&&(N=Math.max(N,A[D].first));K=N>=e?e:N;e=[];var U;for(D=u;D<f;D++)if(H=D-(D<d?0:d),I=A[H].first,0<I)if(u=[I,H],I<=K){H=A[H].second<<K-I;var T=1<<K-I;for(I=0;I<T;I++)e[H|I]=u}else for(H=A[H].second,
T=P,--I;0<=I;I--)(U=H>>>I&1)?(T.right||(T.right=new r),T=T.right):(T.left||(T.left=new r),T=T.left),0!==I||T.val||(T.val=u[1]);return{decodeLut:e,numBitsLUTQick:K,numBitsLUT:N,tree:P,stuffedData:c,srcPtr:E,bitPos:a}},readHuffman:function(c,a,e){var f=a.headerInfo,d=f.numDims,u=a.headerInfo.height,E=a.headerInfo.width,A=E*u,D=this.readHuffmanTree(c,a);c=D.decodeLut;var H=D.tree,N=D.stuffedData,I=D.srcPtr,K=D.bitPos,P=D.numBitsLUTQick;D=D.numBitsLUT;var U=0===a.headerInfo.imageType?128:0,T=a.pixels.resultMask,
Z,W,X,ba,aa,V,ca=0;0<K&&(I++,K=0);var ea=N[I],ha=1===a.encodeMode,ia=new e(A*d),ja=ia,ma;for(ma=0;ma<f.numDims;ma++){1<d&&(ja=new e(ia.buffer,A*ma,A),ca=0);if(a.headerInfo.numValidPixel===E*u)for(X=aa=0;X<u;X++)for(ba=0;ba<E;ba++,aa++){var fa=0;var da=Z=ea<<K>>>32-P;32-K<P&&(da=Z|=N[I+1]>>>64-K-P);if(c[da])fa=c[da][1],K+=c[da][0];else for(da=Z=ea<<K>>>32-D,32-K<D&&(da=Z|=N[I+1]>>>64-K-D),da=H,V=0;V<D;V++)if(da=(W=Z>>>D-V-1&1)?da.right:da.left,!da.left&&!da.right){fa=da.val;K=K+V+1;break}32<=K&&(K-=
32,I++,ea=N[I]);fa-=U;ha?(fa=0<ba?fa+ca:0<X?fa+ja[aa-E]:fa+ca,fa&=255,ca=ja[aa]=fa):ja[aa]=fa}else for(X=aa=0;X<u;X++)for(ba=0;ba<E;ba++,aa++)if(T[aa]){fa=0;da=Z=ea<<K>>>32-P;32-K<P&&(da=Z|=N[I+1]>>>64-K-P);if(c[da])fa=c[da][1],K+=c[da][0];else for(da=Z=ea<<K>>>32-D,32-K<D&&(da=Z|=N[I+1]>>>64-K-D),da=H,V=0;V<D;V++)if(da=(W=Z>>>D-V-1&1)?da.right:da.left,!da.left&&!da.right){fa=da.val;K=K+V+1;break}32<=K&&(K-=32,I++,ea=N[I]);fa-=U;ha?(fa=0<ba&&T[aa-1]?fa+ca:0<X&&T[aa-E]?fa+ja[aa-E]:fa+ca,fa&=255,ca=
ja[aa]=fa):ja[aa]=fa}a.ptr=a.ptr+4*(I+1)+(0<K?4:0)}a.pixels.resultPixels=ia},decodeBits:function(c,a,e,f,d){var u=a.headerInfo,E=u.fileVersion,A=0,D=new DataView(c,a.ptr,5<=c.byteLength-a.ptr?5:c.byteLength-a.ptr),H=D.getUint8(0);A++;var N=H>>6,I=0===N?4:3-N,K=0<(H&32)?!0:!1;N=H&31;H=0;if(1===I)H=D.getUint8(A),A++;else if(2===I)H=D.getUint16(A,!0),A+=2;else if(4===I)H=D.getUint32(A,!0),A+=4;else throw"Invalid valid pixel count type";I=2*u.maxZError;d=1<u.numDims?u.maxValues[d]:u.zMax;if(K){a.counter.lut++;
K=D.getUint8(A);A++;u=Math.ceil((K-1)*N/8);var P=Math.ceil(u/4);P=new ArrayBuffer(4*P);var U=new Uint8Array(P);a.ptr+=A;U.set(new Uint8Array(c,a.ptr,u));A=new Uint32Array(P);a.ptr+=u;for(D=0;K-1>>>D;)D++;u=Math.ceil(H*D/8);P=Math.ceil(u/4);P=new ArrayBuffer(4*P);U=new Uint8Array(P);U.set(new Uint8Array(c,a.ptr,u));c=new Uint32Array(P);a.ptr+=u;a=3<=E?b.unstuffLUT2(A,N,K-1,f,I,d):b.unstuffLUT(A,N,K-1,f,I,d);3<=E?b.unstuff2(c,e,D,H,a):b.unstuff(c,e,D,H,a)}else a.counter.bitstuffer++,D=N,a.ptr+=A,0<
D&&(u=Math.ceil(H*D/8),P=Math.ceil(u/4),P=new ArrayBuffer(4*P),U=new Uint8Array(P),U.set(new Uint8Array(c,a.ptr,u)),c=new Uint32Array(P),a.ptr+=u,3<=E?null==f?b.originalUnstuff2(c,e,D,H):b.unstuff2(c,e,D,H,!1,f,I,d):null==f?b.originalUnstuff(c,e,D,H):b.unstuff(c,e,D,H,!1,f,I,d))},readTiles:function(c,a,e){var f=a.headerInfo,d=f.width,u=f.height,E=f.microBlockSize,A=f.imageType,D=k.getDataTypeSize(A),H=Math.ceil(d/E),N=Math.ceil(u/E);a.pixels.numBlocksY=N;a.pixels.numBlocksX=H;var I=a.pixels.ptr=0,
K=0,P=0,U=0,T=0,Z=0,W=0,X=0,ba=0,aa=0,V=0,ca=0,ea=0;W=ea=W=0;var ha=new e(E*E),ia=u%E||E,ja=d%E||E,ma=f.numDims,fa,da=a.pixels.resultMask,ka=a.pixels.resultPixels,oa=5<=f.fileVersion?14:15,na=f.zMax;for(P=0;P<N;P++)for(T=P!==N-1?E:ia,U=0;U<H;U++)for(Z=U!==H-1?E:ja,V=P*d*E+U*E,ca=d-Z,fa=0;fa<ma;fa++){1<ma?(ea=ka,V=P*d*E+U*E,ka=new e(a.pixels.resultPixels.buffer,d*u*fa*D,d*u),na=f.maxValues[fa]):ea=null;W=c.byteLength-a.ptr;I=new DataView(c,a.ptr,Math.min(10,W));K={};W=0;X=I.getUint8(0);W++;var la=
5<=f.fileVersion?X&4:0;ba=X>>6&255;aa=X>>2&oa;if(aa!==(U*E>>3&oa))throw"integrity issue";if(la&&0===fa)throw"integrity issue";X&=3;if(3<X)throw a.ptr+=W,"Invalid block encoding ("+X+")";if(2===X){if(la)if(da)for(I=0;I<T;I++)for(K=0;K<Z;K++)da[V]&&(ka[V]=ea[V]),V++;else for(I=0;I<T;I++)for(K=0;K<Z;K++)ka[V]=ea[V],V++;a.counter.constant++;a.ptr+=W}else if(0===X){if(la)throw"integrity issue";a.counter.uncompressed++;a.ptr+=W;ea=T*Z*D;W=c.byteLength-a.ptr;ea=ea<W?ea:W;W=new ArrayBuffer(0===ea%D?ea:ea+
D-ea%D);la=new Uint8Array(W);la.set(new Uint8Array(c,a.ptr,ea));W=new e(W);ea=0;if(da)for(I=0;I<T;I++){for(K=0;K<Z;K++)da[V]&&(ka[V]=W[ea++]),V++;V+=ca}else for(I=0;I<T;I++){for(K=0;K<Z;K++)ka[V++]=W[ea++];V+=ca}a.ptr+=ea*D}else if(ba=k.getDataTypeUsed(la&&6>A?4:A,ba),aa=k.getOnePixel(K,W,ba,I),W+=k.getDataTypeSize(ba),3===X)if(a.ptr+=W,a.counter.constantoffset++,da)for(I=0;I<T;I++){for(K=0;K<Z;K++)da[V]&&(ka[V]=la?Math.min(na,ea[V]+aa):aa),V++;V+=ca}else for(I=0;I<T;I++){for(K=0;K<Z;K++)ka[V]=la?
Math.min(na,ea[V]+aa):aa,V++;V+=ca}else if(a.ptr+=W,k.decodeBits(c,a,ha,aa,fa),W=0,la)if(da)for(I=0;I<T;I++){for(K=0;K<Z;K++)da[V]&&(ka[V]=ha[W++]+ea[V]),V++;V+=ca}else for(I=0;I<T;I++){for(K=0;K<Z;K++)ka[V]=ha[W++]+ea[V],V++;V+=ca}else if(da)for(I=0;I<T;I++){for(K=0;K<Z;K++)da[V]&&(ka[V]=ha[W++]),V++;V+=ca}else for(I=0;I<T;I++){for(K=0;K<Z;K++)ka[V++]=ha[W++];V+=ca}}},formatFileInfo:function(c){return{fileIdentifierString:c.headerInfo.fileIdentifierString,fileVersion:c.headerInfo.fileVersion,imageType:c.headerInfo.imageType,
height:c.headerInfo.height,width:c.headerInfo.width,numValidPixel:c.headerInfo.numValidPixel,microBlockSize:c.headerInfo.microBlockSize,blobSize:c.headerInfo.blobSize,maxZError:c.headerInfo.maxZError,pixelType:k.getPixelType(c.headerInfo.imageType),eofOffset:c.eofOffset,mask:c.mask?{numBytes:c.mask.numBytes}:null,pixels:{numBlocksX:c.pixels.numBlocksX,numBlocksY:c.pixels.numBlocksY,maxValue:c.headerInfo.zMax,minValue:c.headerInfo.zMin,noDataValue:c.noDataValue}}},constructConstantSurface:function(c){var a=
c.headerInfo.zMax,e=c.headerInfo.numDims,f=c.headerInfo.height*c.headerInfo.width,d=0,u=0,E=0,A=c.pixels.resultMask,D=c.pixels.resultPixels;if(A)if(1<e)for(d=0;d<e;d++)for(E=d*f,a=c.headerInfo.maxValues[d],u=0;u<f;u++)A[u]&&(D[E+u]=a);else for(u=0;u<f;u++)A[u]&&(D[u]=a);else if(1<e)for(d=0;d<e;d++)for(E=d*f,a=c.headerInfo.maxValues[d],u=0;u<f;u++)D[E+u]=a;else for(u=0;u<f;u++)D[u]=a},getDataTypeArray:function(c){switch(c){case 0:c=Int8Array;break;case 1:c=Uint8Array;break;case 2:c=Int16Array;break;
case 3:c=Uint16Array;break;case 4:c=Int32Array;break;case 5:c=Uint32Array;break;case 6:c=Float32Array;break;case 7:c=Float64Array;break;default:c=Float32Array}return c},getPixelType:function(c){switch(c){case 0:c="S8";break;case 1:c="U8";break;case 2:c="S16";break;case 3:c="U16";break;case 4:c="S32";break;case 5:c="U32";break;case 6:c="F32";break;case 7:c="F64";break;default:c="F32"}return c},isValidPixelValue:function(c,a){if(null==a)return!1;switch(c){case 0:c=-128<=a&&127>=a;break;case 1:c=0<=
a&&255>=a;break;case 2:c=-32768<=a&&32767>=a;break;case 3:c=0<=a&&65536>=a;break;case 4:c=-2147483648<=a&&2147483647>=a;break;case 5:c=0<=a&&4294967296>=a;break;case 6:c=-3.4027999387901484E38<=a&&3.4027999387901484E38>=a;break;case 7:c=4.9E-324<=a&&1.7976931348623157E308>=a;break;default:c=!1}return c},getDataTypeSize:function(c){var a=0;switch(c){case 0:case 1:a=1;break;case 2:case 3:a=2;break;case 4:case 5:case 6:a=4;break;case 7:a=8;break;default:a=c}return a},getDataTypeUsed:function(c,a){var e=
c;switch(c){case 2:case 4:e=c-a;break;case 3:case 5:e=c-2*a;break;case 6:e=0===a?c:1===a?2:1;break;case 7:e=0===a?c:c-2*a+1;break;default:e=c}return e},getOnePixel:function(c,a,e,f){c=0;switch(e){case 0:c=f.getInt8(a);break;case 1:c=f.getUint8(a);break;case 2:c=f.getInt16(a,!0);break;case 3:c=f.getUint16(a,!0);break;case 4:c=f.getInt32(a,!0);break;case 5:c=f.getUInt32(a,!0);break;case 6:c=f.getFloat32(a,!0);break;case 7:c=f.getFloat64(a,!0);break;default:throw"the decoder does not understand this pixel type";
}return c}},r=function(c,a,e){this.val=c;this.left=a;this.right=e};return{decode:function(c,a){a=a||{};var e=a.noDataValue,f=0,d={};d.ptr=a.inputOffset||0;d.pixels={};if(k.readHeaderInfo(c,d)){f=d.headerInfo;var u=f.fileVersion,E=k.getDataTypeArray(f.imageType);if(5<u)throw"unsupported lerc version 2."+u;k.readMask(c,d);f.numValidPixel===f.width*f.height||d.pixels.resultMask||(d.pixels.resultMask=a.maskData);var A=f.width*f.height;d.pixels.resultPixels=new E(A*f.numDims);d.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==f.numValidPixel)if(f.zMax===f.zMin)k.constructConstantSurface(d);else if(4<=u&&k.checkMinMaxRanges(c,d))k.constructConstantSurface(d);else{var D=new DataView(c,d.ptr,2),H=D.getUint8(0);d.ptr++;if(H)k.readDataOneSweep(c,d,E);else if(1<u&&1>=f.imageType&&1E-5>Math.abs(f.maxZError-.5)){D=D.getUint8(1);d.ptr++;d.encodeMode=D;if(2<D||4>u&&1<D)throw"Invalid Huffman flag "+D;D?k.readHuffman(c,d,E):k.readTiles(c,d,E)}else k.readTiles(c,d,E)}d.eofOffset=
d.ptr;a.inputOffset?(c=d.headerInfo.blobSize+a.inputOffset-d.ptr,1<=Math.abs(c)&&(d.eofOffset=a.inputOffset+d.headerInfo.blobSize)):(c=d.headerInfo.blobSize-d.ptr,1<=Math.abs(c)&&(d.eofOffset=d.headerInfo.blobSize));c={width:f.width,height:f.height,pixelData:d.pixels.resultPixels,minValue:f.zMin,maxValue:f.zMax,validPixelCount:f.numValidPixel,dimCount:f.numDims,dimStats:{minValues:f.minValues,maxValues:f.maxValues},maskData:d.pixels.resultMask};if(d.pixels.resultMask&&k.isValidPixelValue(f.imageType,
e)){u=d.pixels.resultMask;for(f=0;f<A;f++)u[f]||(c.pixelData[f]=e);c.noDataValue=e}d.noDataValue=e;a.returnFileInfo&&(c.fileInfo=k.formatFileInfo(d));return c}},getBandCount:function(c){for(var a=0,e=0,f={ptr:0,pixels:{}};e<c.byteLength-58;)k.readHeaderInfo(c,f),e+=f.headerInfo.blobSize,a++,f.ptr=e;return a}}})}),B=function(g){function b(a){var e,f;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(f=null;;){var d=this.readUInt32();var u=
a=void 0;a=[];for(u=0;4>u;++u)a.push(String.fromCharCode(this.data[this.pos++]));a=a.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=
this.read(d);break;case "fcTL":f&&this.animation.frames.push(f);this.pos+=4;f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();d=this.readUInt16()||100;f.delay=1E3*a/d;f.disposeOp=this.data[this.pos++];f.blendOp=this.data[this.pos++];f.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,d-=4);a=(null!=f?f.data:void 0)||this.imgData;for(u=0;0<=d?u<d:u>d;0<=d?++u:--u)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency=
{};switch(this.colorType){case 3:this.transparency.indexed=this.read(d);d=255-this.transparency.indexed.length;if(0<d)for(a=0;0<=d?a<d:a>d;0<=d?++a:--a)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case "tEXt":u=this.read(d);d=u.indexOf(0);a=String.fromCharCode.apply(String,u.slice(0,d));this.text[a]=String.fromCharCode.apply(String,u.slice(d+1));break;case "IEND":f&&this.animation.frames.push(f);
a:{switch(this.colorType){case 0:case 3:case 4:f=1;break a;case 2:case 6:f=3;break a}f=void 0}this.colors=f;this.hasAlphaChannel=4===(e=this.colorType)||6===e;e=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*e;a:{switch(this.colors){case 1:e="DeviceGray";break a;case 3:e="DeviceRGB";break a}e=void 0}this.colorSpace=e;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=d}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var k;
b.load=function(a,e,f){"function"===typeof e&&(f=e);var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){var u=new Uint8Array(d.response||d.mozResponseArrayBuffer);u=new b(u);"function"===typeof(null!=e?e.getContext:void 0)&&u.render(e);return"function"===typeof f?f(u):void 0};return d.send(null)};b.prototype.read=function(a){var e;var f=[];for(e=0;0<=a?e<a:e>a;0<=a?++e:--e)f.push(this.data[this.pos++]);return f};b.prototype.readUInt32=function(){var a=this.data[this.pos++]<<
24;var e=this.data[this.pos++]<<16;var f=this.data[this.pos++]<<8;var d=this.data[this.pos++];return a|e|f|d};b.prototype.readUInt16=function(){var a=this.data[this.pos++]<<8;var e=this.data[this.pos++];return a|e};b.prototype.decodePixels=function(a){var e,f,d,u,E,A,D,H;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new q.Zlib(a);a=a.getBytes();var N=this.pixelBitlength/8;var I=N*this.width;var K=new Uint8Array(I*this.height);var P=a.length;for(f=u=E=0;u<P;){switch(a[u++]){case 0:for(d=
e=0;e<I;d=e+=1)K[f++]=a[u++];break;case 1:for(d=A=0;A<I;d=A+=1){e=a[u++];var U=d<N?0:K[f-N];K[f++]=(e+U)%256}break;case 2:for(d=U=0;U<I;d=U+=1){e=a[u++];var T=(d-d%N)/N;A=E&&K[(E-1)*I+T*N+d%N];K[f++]=(A+e)%256}break;case 3:for(d=H=0;H<I;d=H+=1)e=a[u++],T=(d-d%N)/N,U=d<N?0:K[f-N],A=E&&K[(E-1)*I+T*N+d%N],K[f++]=(e+Math.floor((U+A)/2))%256;break;case 4:for(d=H=0;H<I;d=H+=1){e=a[u++];T=(d-d%N)/N;U=d<N?0:K[f-N];0===E?A=D=0:(A=K[(E-1)*I+T*N+d%N],D=T&&K[(E-1)*I+(T-1)*N+d%N]);var Z=U+A-D;d=Math.abs(Z-U);
T=Math.abs(Z-A);Z=Math.abs(Z-D);U=d<=T&&d<=Z?U:T<=Z?A:D;K[f++]=(e+U)%256}break;default:throw Error("Invalid filter algorithm: "+a[u-1]);}E++}return K};b.prototype.decodePalette=function(){var a,e,f,d,u;var E=this.palette;var A=this.transparency.indexed||[];var D=new Uint8Array((A.length||0)+E.length);var H=f=a=e=0;for(d=E.length;f<d;H=f+=3)D[e++]=E[H],D[e++]=E[H+1],D[e++]=E[H+2],D[e++]=null!=(u=A[a++])?u:255;return D};b.prototype.copyToImageData=function(a,e){var f,d;var u=this.colors;var E=null;
var A=this.hasAlphaChannel;this.palette.length&&(E=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),u=4,A=!0);a=a.data||a;var D=a.length;var H=E||e;f=d=0;if(1===u)for(;f<D;)u=E?4*e[f/4]:d,d=H[u++],a[f++]=d,a[f++]=d,a[f++]=d,a[f++]=A?H[u++]:this.transparency.grayscale&&this.transparency.grayscale===d?0:255,d=u;else for(;f<D;)u=E?4*e[f/4]:d,a[f++]=H[u++],a[f++]=H[u++],a[f++]=H[u++],a[f++]=A?H[u++]:this.transparency.rgb&&this.transparency.rgb[1]===H[u-3]&&this.transparency.rgb[3]===
H[u-2]&&this.transparency.rgb[5]===H[u-1]?0:255,d=u};b.prototype.decode=function(){var a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};var r=(k=g.document&&g.document.createElement("canvas"))&&k.getContext("2d");var c=function(a){r.width=a.width;r.height=a.height;r.clearRect(0,0,a.width,a.height);r.putImageData(a,0,0);a=new Image;a.src=k.toDataURL();return a};b.prototype.decodeFrames=function(a){var e,f;if(this.animation){var d=this.animation.frames;
var u=[];var E=e=0;for(f=d.length;e<f;E=++e){E=d[E];var A=a.createImageData(E.width,E.height);var D=this.decodePixels(new Uint8Array(E.data));this.copyToImageData(A,D);E.imageData=A;u.push(E.image=c(A))}return u}};b.prototype.renderFrame=function(a,e){var f=this.animation.frames;var d=f[e];f=f[e-1];0===e&&a.clearRect(0,0,this.width,this.height);1===(null!=f?f.disposeOp:void 0)?a.clearRect(f.xOffset,f.yOffset,f.width,f.height):2===(null!=f?f.disposeOp:void 0)&&a.putImageData(f.imageData,f.xOffset,
f.yOffset);0===d.blendOp&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height);return a.drawImage(d.image,d.xOffset,d.yOffset)};b.prototype.animate=function(a){var e,f=this;var d=0;var u=this.animation;var E=u.numFrames;var A=u.frames;var D=u.numPlays;return(e=function(){var H=d++%E;var N=A[H];f.renderFrame(a,H);if(1<E&&d/E<D)return f.animation._timeout=setTimeout(e,N.delay)})()};b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)};b.prototype.render=
function(a){a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);var e=a.createImageData(this.width,this.height);this.copyToImageData(e,this.decodePixels());return a.putImageData(e,0,0)};return b}(self);const G=new Set(["jpg","png","bmp","gif"]);Y.decode=async function(g,b,k){if(null==g)throw new S("rasterCodec:decode","missing encodeddata parameter.");if(null==b||null==b.width||null==
b.height)throw new S("rasterCodec:decode","requires width and height in options parameter.");let r=b.format&&b.format.toLowerCase();if("tiff"===r&&b.customOptions)return b=y.decodeTileOrStrip(g,b.customOptions),b=new Q({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,statistics:null}),b.updateStatistics(),b;if(!r||"bsq"!==r&&"bip"!==r)r=x(g);b.useCanvas&&G.has(r)?g=await t(g,r,b,k):(k=F(r),b.isPoint&&(b={...b},b.width++,b.height++),g=k(g,b),b.isPoint&&
l(g));return g};Y.getFormat=function(g){g=x(g);"lerc2"===g?g="lerc":"error"===g&&(g="");return g};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(Y,S){S=S.createCommonjsModule(function(Q){(function(R){R=R();void 0!==R&&(Q.exports=R)})(function(){var R=function(){function q(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}q.prototype={ensureBuffer:function(J){var L=this.buffer,O=L?L.byteLength:0;if(J<O)return L;
for(var M=512;M<J;)M<<=1;J=new Uint8Array(M);for(M=0;M<O;++M)J[M]=L[M];return this.buffer=J},getByte:function(){for(var J=this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(J){var L=this.pos;if(J){this.ensureBuffer(L+J);for(J=L+J;!this.eof&&this.bufferLength<J;)this.readBlock();var O=this.bufferLength;J>O&&(J=O)}else{for(;!this.eof;)this.readBlock();J=this.bufferLength}this.pos=J;return this.buffer.subarray(L,J)},lookChar:function(){for(var J=
this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var J=this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(J,L,O){for(var M=J+L;this.bufferLength<=M&&!this.eof;)this.readBlock();return new Stream(this.buffer,J,L,O)},skip:function(J){J||(J=1);this.pos+=J},reset:function(){this.pos=0}};return q}();return function(){function q(z){throw Error(z);
}function J(z){var h=0,n=z[h++],m=z[h++];-1!=n&&-1!=m||q("Invalid header in flate stream");8!=(n&15)&&q("Unknown compression method in flate stream");0!=((n<<8)+m)%31&&q("Bad FCHECK in flate stream");m&32&&q("FDICT bit set in flate stream");this.bytes=z;this.bytesPos=h;this.codeBuf=this.codeSize=0;R.call(this)}if(!self||!self.Uint32Array)return null;var L=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,
131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),M=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),C=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,
459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,
459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,
459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,
459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,
459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,
459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,
459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],y=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,
327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];J.prototype=Object.create(R.prototype);J.prototype.getBits=function(z){for(var h=this.codeSize,n=this.codeBuf,m=this.bytes,v=this.bytesPos,t;h<z;)"undefined"==typeof(t=m[v++])&&q("Bad encoding in flate stream"),n|=t<<h,h+=8;this.codeBuf=n>>z;this.codeSize=h-=z;this.bytesPos=v;return n&(1<<z)-1};J.prototype.getCode=function(z){var h=z[0],n=z[1];z=this.codeSize;for(var m=
this.codeBuf,v=this.bytes,t=this.bytesPos;z<n;){var x;"undefined"==typeof(x=v[t++])&&q("Bad encoding in flate stream");m|=x<<z;z+=8}n=h[m&(1<<n)-1];h=n>>16;n&=65535;(0==z||z<h||0==h)&&q("Bad encoding in flate stream");this.codeBuf=m>>h;this.codeSize=z-h;this.bytesPos=t;return n};J.prototype.generateHuffmanTable=function(z){for(var h=z.length,n=0,m=0;m<h;++m)z[m]>n&&(n=z[m]);for(var v=1<<n,t=new Uint32Array(v),x=1,F=0,w=2;x<=n;++x,F<<=1,w<<=1)for(var l=0;l<h;++l)if(z[l]==x){var p=0,B=F;for(m=0;m<x;++m)p=
p<<1|B&1,B>>=1;for(m=p;m<v;m+=w)t[m]=x<<16|l;++F}return[t,n]};J.prototype.readBlock=function(){function z(p,B,G,g,b){for(p=p.getBits(G)+g;0<p--;)B[F++]=b}var h=this.getBits(3);h&1&&(this.eof=!0);h>>=1;if(0==h){var n=this.bytes,m=this.bytesPos,v;"undefined"==typeof(v=n[m++])&&q("Bad block header in flate stream");var t=v;"undefined"==typeof(v=n[m++])&&q("Bad block header in flate stream");t|=v<<8;"undefined"==typeof(v=n[m++])&&q("Bad block header in flate stream");h=v;"undefined"==typeof(v=n[m++])&&
q("Bad block header in flate stream");(h|v<<8)!=(~t&65535)&&q("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;v=this.bufferLength;h=this.ensureBuffer(v+t);this.bufferLength=t=v+t;for(var x=v;x<t;++x){if("undefined"==typeof(v=n[m++])){this.eof=!0;break}h[x]=v}this.bytesPos=m}else{if(1==h)m=C,v=y;else if(2==h){h=this.getBits(5)+257;v=this.getBits(5)+1;n=this.getBits(4)+4;m=Array(L.length);for(var F=0;F<n;)m[L[F++]]=this.getBits(3);m=this.generateHuffmanTable(m);F=n=0;v=
h+v;for(t=Array(v);F<v;)x=this.getCode(m),16==x?z(this,t,2,3,n):17==x?z(this,t,3,3,n=0):18==x?z(this,t,7,11,n=0):t[F++]=n=x;m=this.generateHuffmanTable(t.slice(0,h));v=this.generateHuffmanTable(t.slice(h,v))}else q("Unknown block type in flate stream");t=(h=this.buffer)?h.length:0;for(x=this.bufferLength;;){var w=this.getCode(m);if(256>w)x+1>=t&&(h=this.ensureBuffer(x+1),t=h.length),h[x++]=w;else{if(256==w){this.bufferLength=x;break}w-=257;w=O[w];var l=w>>16;0<l&&(l=this.getBits(l));n=(w&65535)+l;
w=this.getCode(v);w=M[w];l=w>>16;0<l&&(l=this.getBits(l));w=(w&65535)+l;x+n>=t&&(h=this.ensureBuffer(x+n),t=h.length);for(l=0;l<n;++l,++x)h[x]=h[x-w]}}}};return J}()})});Y.Zlib=S})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(Y,S,Q){return function(){function R(q){q&&(this.canvas=q.canvas,this.ctx=q.ctx||q.canvas&&q.canvas.getContext("2d"))}R.prototype.decode=function(q,J,L){if(!q||10>
q.byteLength)throw new Y("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:O,height:M,format:C}=J;const {applyJpegMask:y}=J;if(y&&(!O||!M))throw new Y("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return S.create((z,h)=>{let n=null;"jpg"===C&&y&&(n=R.getMask(q,J));const m=new Blob([new Uint8Array(q)],{type:"jpg"==="image/"+C?"jpeg":C}),v=URL.createObjectURL(m),t=new Image;let x;t.src=v;t.onload=()=>{URL.revokeObjectURL(v);
if(S.isAborted(L))h(S.createAbortError());else{O=t.width;M=t.height;if(this.canvas){if(this.canvas.width!==O||this.canvas.height!==M)this.canvas.width=O,this.canvas.height=M;this.ctx.clearRect(0,0,O,M)}else this.canvas=document.createElement("canvas"),this.canvas.width=O,this.canvas.height=M,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(t,0,0);var F=this.ctx.getImageData(0,0,O,M);x=F.data;var w;if(J.renderOnCanvas){if(n)for(w=0;w<n.length;w++)x[4*w+3]=n[w]?255:0;this.ctx.putImageData(F,
0,0);z(null)}else{F=O*M;var l=new Uint8Array(F),p=new Uint8Array(F),B=new Uint8Array(F);if(n)for(w=0;w<F;w++)l[w]=x[4*w],p[w]=x[4*w+1],B[w]=x[4*w+2];else for(n=new Uint8Array(F),w=0;w<F;w++)l[w]=x[4*w],p[w]=x[4*w+1],B[w]=x[4*w+2],n[w]=x[4*w+3];z({width:O,height:M,pixels:[l,p,B],mask:n,pixelType:"u8"})}}};t.onerror=()=>{URL.revokeObjectURL(v);h("cannot load image")}})};R.getMask=function(q,J){let L=null;try{var O=new Uint8Array(q);q=0;var M=O.length-2;for(q=Math.ceil(O.length/2);q<M&&(255!==O[q]||
217!==O[q+1]);q++);q+=2;if(q<O.length-1){const C=(new Q.Zlib(O.subarray(q))).getBytes();L=new Uint8Array(J.width*J.height);J=0;for(O=0;O<C.length;O++)for(M=7;0<=M;M--)L[J++]=C[O]>>M&1}}catch(C){}return L};return R}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(Y,S){return function(){function Q(){}Q.decode=function(R){var q=new Uint8Array(R);R=new S.Jpg;R.parse(q);const {width:J,height:L,numComponents:O,eof:M}=R;R=R.getData(J,
L,!0);let C;const y=J*L;let z=0;var h=0,n=0;if(M<q.length-1)for(q=(new Y.Zlib(q.subarray(M))).getBytes(),C=new Uint8Array(y),z=h=0;z<q.length;z++)for(n=7;0<=n;n--)C[h++]=q[z]>>n&1;q=null;if(1===O)q=[R,R,R];else{q=[];for(z=0;3>z;z++)n=new Uint8Array(y),q.push(n);for(h=n=0;h<y;h++)for(z=0;3>z;z++)q[z][h]=R[n++]}return{width:J,height:L,pixels:q,mask:C}};return Q}()})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(Y,S){S=S.createCommonjsModule(function(Q){(function(R){R=
R();void 0!==R&&(Q.exports=R)})(function(){var R=function(){function q(J){this.message="JPEG error: "+J}q.prototype=Error();q.prototype.name="JpegError";return q.constructor=q}();return function(){function q(){this.decodeTransform=null;this.colorTransform=-1}function J(y,z){for(var h=0,n=[],m,v,t=16;0<t&&!y[t-1];)t--;n.push({children:[],index:0});var x=n[0],F;for(m=0;m<t;m++){for(v=0;v<y[m];v++){x=n.pop();for(x.children[x.index]=z[h];0<x.index;)x=n.pop();x.index++;for(n.push(x);n.length<=m;)n.push(F=
{children:[],index:0}),x.children[x.index]=F.children,x=F;h++}m+1<t&&(n.push(F={children:[],index:0}),x.children[x.index]=F.children,x=F)}return n[0].children}function L(y,z,h,n,m,v,t,x,F){function w(){if(0<f)return f--,e>>f&1;e=y[z++];if(255===e){var W=y[z++];if(W)throw new R("unexpected marker "+(e<<8|W).toString(16));}f=7;return e>>>7}function l(W){for(;;){W=W[w()];if("number"===typeof W)return W;if("object"!==typeof W)throw new R("invalid huffman sequence");}}function p(W){for(var X=0;0<W;)X=
X<<1|w(),W--;return X}function B(W){if(1===W)return 1===w()?1:-1;var X=p(W);return X>=1<<W-1?X:X+(-1<<W)+1}function G(W,X){var ba=l(W.huffmanTableDC);ba=0===ba?0:B(ba);W.blockData[X]=W.pred+=ba;for(ba=1;64>ba;){var aa=l(W.huffmanTableAC),V=aa&15;aa>>=4;if(0===V){if(15>aa)break;ba+=16}else ba+=aa,W.blockData[X+C[ba]]=B(V),ba++}}function g(W,X){var ba=l(W.huffmanTableDC);ba=0===ba?0:B(ba)<<F;W.blockData[X]=W.pred+=ba}function b(W,X){W.blockData[X]|=w()<<F}function k(W,X){if(0<d)d--;else for(var ba=
v;ba<=t;){var aa=l(W.huffmanTableAC),V=aa&15;aa>>=4;if(0===V){if(15>aa){d=p(aa)+(1<<aa)-1;break}ba+=16}else ba+=aa,W.blockData[X+C[ba]]=B(V)*(1<<F),ba++}}function r(W,X){for(var ba=v,aa=0,V;ba<=t;){V=C[ba];switch(u){case 0:aa=l(W.huffmanTableAC);V=aa&15;aa>>=4;if(0===V)15>aa?(d=p(aa)+(1<<aa),u=4):(aa=16,u=1);else{if(1!==V)throw new R("invalid ACn encoding");E=B(V);u=aa?2:3}continue;case 1:case 2:W.blockData[X+V]?W.blockData[X+V]+=w()<<F:(aa--,0===aa&&(u=2===u?3:0));break;case 3:W.blockData[X+V]?W.blockData[X+
V]+=w()<<F:(W.blockData[X+V]=E<<F,u=0);break;case 4:W.blockData[X+V]&&(W.blockData[X+V]+=w()<<F)}ba++}4===u&&(d--,0===d&&(u=0))}var c=h.mcusPerLine,a=z,e=0,f=0,d=0,u=0,E,A=n.length,D,H,N,I;x=h.progressive?0===v?0===x?g:b:0===x?k:r:G;var K=0;h=1===A?n[0].blocksPerLine*n[0].blocksPerColumn:c*h.mcusPerColumn;for(var P,U;K<h;){var T=m?Math.min(h-K,m):h;for(D=0;D<A;D++)n[D].pred=0;d=0;if(1===A){var Z=n[0];for(I=0;I<T;I++)x(Z,64*((Z.blocksPerLine+1)*(K/Z.blocksPerLine|0)+K%Z.blocksPerLine)),K++}else for(I=
0;I<T;I++){for(D=0;D<A;D++)for(Z=n[D],P=Z.h,U=Z.v,H=0;H<U;H++)for(N=0;N<P;N++)x(Z,64*((Z.blocksPerLine+1)*((K/c|0)*Z.v+H)+(K%c*Z.h+N)));K++}f=0;(Z=M(y,z))&&Z.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Z.invalid),z=Z.offset);Z=Z&&Z.marker;if(!Z||65280>=Z)throw new R("marker was not found");if(65488<=Z&&65495>=Z)z+=2;else break}(Z=M(y,z))&&Z.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Z.invalid),z=Z.offset);return z-a}function O(y,z){y=
z.blocksPerLine;for(var h=z.blocksPerColumn,n=new Int16Array(64),m=0;m<h;m++)for(var v=0;v<y;v++){var t=void 0,x=void 0,F=void 0,w=void 0,l=void 0,p=void 0,B=void 0,G=void 0,g=l=p=w=x=t=void 0,b=void 0,k=void 0,r=void 0,c=64*((z.blocksPerLine+1)*m+v),a=n,e=z.quantizationTable,f=z.blockData;if(!e)throw new R("missing required Quantization Table.");for(var d=0;64>d;d+=8)t=f[c+d],G=f[c+d+1],B=f[c+d+2],p=f[c+d+3],l=f[c+d+4],w=f[c+d+5],F=f[c+d+6],x=f[c+d+7],t*=e[d],0===(G|B|p|l|w|F|x)?(t=5793*t+512>>10,
a[d]=t,a[d+1]=t,a[d+2]=t,a[d+3]=t,a[d+4]=t,a[d+5]=t,a[d+6]=t,a[d+7]=t):(G*=e[d+1],B*=e[d+2],p*=e[d+3],l*=e[d+4],w*=e[d+5],F*=e[d+6],x*=e[d+7],r=5793*t+128>>8,k=5793*l+128>>8,b=B,g=F,l=2896*(G-x)+128>>8,x=2896*(G+x)+128>>8,p<<=4,w<<=4,r=r+k+1>>1,k=r-k,t=3784*b+1567*g+128>>8,b=1567*b-3784*g+128>>8,g=t,l=l+w+1>>1,w=l-w,x=x+p+1>>1,p=x-p,r=r+g+1>>1,g=r-g,k=k+b+1>>1,b=k-b,t=2276*l+3406*x+2048>>12,l=3406*l-2276*x+2048>>12,x=t,t=799*p+4017*w+2048>>12,p=4017*p-799*w+2048>>12,w=t,a[d]=r+x,a[d+7]=r-x,a[d+1]=
k+w,a[d+6]=k-w,a[d+2]=b+p,a[d+5]=b-p,a[d+3]=g+l,a[d+4]=g-l);for(e=0;8>e;++e)t=a[e],G=a[e+8],B=a[e+16],p=a[e+24],l=a[e+32],w=a[e+40],F=a[e+48],x=a[e+56],0===(G|B|p|l|w|F|x)?(t=5793*t+8192>>14,t=-2040>t?0:2024<=t?255:t+2056>>4,f[c+e]=t,f[c+e+8]=t,f[c+e+16]=t,f[c+e+24]=t,f[c+e+32]=t,f[c+e+40]=t,f[c+e+48]=t,f[c+e+56]=t):(r=5793*t+2048>>12,k=5793*l+2048>>12,b=B,g=F,l=2896*(G-x)+2048>>12,x=2896*(G+x)+2048>>12,r=(r+k+1>>1)+4112,k=r-k,t=3784*b+1567*g+2048>>12,b=1567*b-3784*g+2048>>12,g=t,l=l+w+1>>1,w=l-w,
x=x+p+1>>1,p=x-p,r=r+g+1>>1,g=r-g,k=k+b+1>>1,b=k-b,t=2276*l+3406*x+2048>>12,l=3406*l-2276*x+2048>>12,x=t,t=799*p+4017*w+2048>>12,p=4017*p-799*w+2048>>12,w=t,t=r+x,x=r-x,G=k+w,F=k-w,B=b+p,w=b-p,p=g+l,l=g-l,t=16>t?0:4080<=t?255:t>>4,G=16>G?0:4080<=G?255:G>>4,B=16>B?0:4080<=B?255:B>>4,p=16>p?0:4080<=p?255:p>>4,l=16>l?0:4080<=l?255:l>>4,w=16>w?0:4080<=w?255:w>>4,F=16>F?0:4080<=F?255:F>>4,x=16>x?0:4080<=x?255:x>>4,f[c+e]=t,f[c+e+8]=G,f[c+e+16]=B,f[c+e+24]=p,f[c+e+32]=l,f[c+e+40]=w,f[c+e+48]=F,f[c+e+56]=
x)}return z.blockData}function M(y,z,h){var n=y.length-1;h=h<z?h:z;if(z>=n)return null;var m=y[z]<<8|y[z+1];if(65472<=m&&65534>=m)return{invalid:null,marker:m,offset:z};for(z=y[h]<<8|y[h+1];!(65472<=z&&65534>=z);){if(++h>=n)return null;z=y[h]<<8|y[h+1]}return{invalid:m.toString(16),marker:z,offset:h}}if(!self||!self.Uint8ClampedArray)return null;var C=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,
51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);q.prototype={parse:function(y){function z(){var e=y[m]<<8|y[m+1];m+=2;return e}function h(){var e=z();e=m+e-2;var f=M(y,e,m);f&&f.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+f.invalid),e=f.offset);e=y.subarray(m,e);m+=e.length;return e}function n(e){for(var f=Math.ceil(e.samplesPerLine/8/e.maxH),d=Math.ceil(e.scanLines/8/e.maxV),u=0;u<e.components.length;u++){a=e.components[u];var E=Math.ceil(Math.ceil(e.samplesPerLine/
8)*a.h/e.maxH),A=Math.ceil(Math.ceil(e.scanLines/8)*a.v/e.maxV);a.blockData=new Int16Array(64*d*a.v*(f*a.h+1));a.blocksPerLine=E;a.blocksPerColumn=A}e.mcusPerLine=f;e.mcusPerColumn=d}var m=0,v=null,t=null,x=[],F=[],w=[],l=z();if(65496!==l)throw new R("SOI not found");for(l=z();65497!==l;){switch(l){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var p=h();65504===
l&&74===p[0]&&70===p[1]&&73===p[2]&&70===p[3]&&0===p[4]&&(v={version:{major:p[5],minor:p[6]},densityUnits:p[7],xDensity:p[8]<<8|p[9],yDensity:p[10]<<8|p[11],thumbWidth:p[12],thumbHeight:p[13],thumbData:p.subarray(14,14+3*p[12]*p[13])});65518===l&&65===p[0]&&100===p[1]&&111===p[2]&&98===p[3]&&101===p[4]&&(t={version:p[5]<<8|p[6],flags0:p[7]<<8|p[8],flags1:p[9]<<8|p[10],transformCode:p[11]});break;case 65499:l=z()+m-2;for(var B;m<l;){var G=y[m++],g=new Uint16Array(64);if(0===G>>4)for(p=0;64>p;p++)B=
C[p],g[B]=y[m++];else if(1===G>>4)for(p=0;64>p;p++)B=C[p],g[B]=z();else throw new R("DQT - invalid table spec");x[G&15]=g}break;case 65472:case 65473:case 65474:if(b)throw new R("Only single frame JPEGs supported");z();var b={};b.extended=65473===l;b.progressive=65474===l;b.precision=y[m++];b.scanLines=z();b.samplesPerLine=z();b.components=[];b.componentIds={};p=y[m++];for(l=g=G=0;l<p;l++){B=y[m];var k=y[m+1]>>4;var r=y[m+1]&15;G<k&&(G=k);g<r&&(g=r);k=b.components.push({h:k,v:r,quantizationId:y[m+
2],quantizationTable:null});b.componentIds[B]=k-1;m+=3}b.maxH=G;b.maxV=g;n(b);break;case 65476:B=z();for(l=2;l<B;){G=y[m++];g=new Uint8Array(16);for(p=k=0;16>p;p++,m++)k+=g[p]=y[m];r=new Uint8Array(k);for(p=0;p<k;p++,m++)r[p]=y[m];l+=17+k;(0===G>>4?w:F)[G&15]=J(g,r)}break;case 65501:z();var c=z();break;case 65498:z();B=y[m++];p=[];for(l=0;l<B;l++){G=b.componentIds[y[m++]];var a=b.components[G];G=y[m++];a.huffmanTableDC=w[G>>4];a.huffmanTableAC=F[G&15];p.push(a)}l=y[m++];B=y[m++];G=y[m++];l=L(y,m,
b,p,c,l,B,G>>4,G&15);m+=l;break;case 65535:255!==y[m]&&m--;break;default:if(255===y[m-3]&&192<=y[m-2]&&254>=y[m-2])m-=3;else throw new R("unknown marker "+l.toString(16));}l=z()}this.width=b.samplesPerLine;this.height=b.scanLines;this.jfif=v;this.eof=m;this.adobe=t;this.components=[];for(l=0;l<b.components.length;l++){a=b.components[l];if(v=x[a.quantizationId])a.quantizationTable=v;this.components.push({output:O(b,a),scaleX:a.h/b.maxH,scaleY:a.v/b.maxV,blocksPerLine:a.blocksPerLine,blocksPerColumn:a.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(y,z){var h=this.width/y,n=this.height/z,m,v,t=0,x=this.components.length,F=y*z*x,w=new Uint8ClampedArray(F),l=new Uint32Array(y);for(v=0;v<x;v++){var p=this.components[v];var B=p.scaleX*h;var G=p.scaleY*n;t=v;var g=p.output;var b=p.blocksPerLine+1<<3;for(m=0;m<y;m++)p=0|m*B,l[m]=(p&4294967288)<<3|p&7;for(B=0;B<z;B++)for(p=0|B*G,p=b*(p&4294967288)|(p&7)<<3,m=0;m<y;m++)w[t]=g[p+l[m]],t+=x}if(z=this.decodeTransform)for(v=0;v<F;)for(y=p=0;p<x;p++,
v++,y+=2)w[v]=(w[v]*z[y]>>8)+z[y+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(y){for(var z,h,n,m=0,v=y.length;m<v;m+=3)z=y[m],h=y[m+1],n=y[m+2],y[m]=z-179.456+1.402*n,y[m+1]=z+135.459-.344*h-.714*n,y[m+2]=z-226.816+1.772*h;return y},_convertYcckToRgb:function(y){for(var z,h,n,m,v=0,t=0,x=y.length;t<x;t+=4)z=y[t],h=y[t+1],n=y[t+2],m=y[t+3],y[v++]=
-122.67195406894+h*(-6.60635669420364E-5*h+4.37130475926232E-4*n-5.4080610064599E-5*z+4.8449797120281E-4*m-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*z-.00477271405408747*m+1.53380253221734)+z*(9.61250184130688E-4*z-.00266257332283933*m+.48357088451265)+m*(-3.36197177618394E-4*m+.484791561490776),y[v++]=107.268039397724+h*(2.19927104525741E-5*h-6.40992018297945E-4*n+6.59397001245577E-4*z+4.26105652938837E-4*m-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*z+7.70482631801132E-4*
m-.151051492775562)+z*(.00126935368114843*z-.00265090189010898*m+.25802910206845)+m*(-3.18913117588328E-4*m-.213742400323665),y[v++]=-20.810012546947+h*(-5.70115196973677E-4*h-2.63409051004589E-5*n+.0020741088115012*z-.00288260236853442*m+.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*z+5.60833691242812E-4*m-.195152027534049)+z*(.00174418132927582*z-.00255243321439347*m+.116935020465145)+m*(-3.43531996510555E-4*m+.24165260232407);return y},_convertYcckToCmyk:function(y){for(var z,
h,n,m=0,v=y.length;m<v;m+=4)z=y[m],h=y[m+1],n=y[m+2],y[m]=434.456-z-1.402*n,y[m+1]=119.541-z+.344*h+.714*n,y[m+2]=481.816-z-1.772*h;return y},_convertCmykToRgb:function(y){for(var z,h,n,m,v=0,t=1/255,x=0,F=y.length;x<F;x+=4)z=y[x]*t,h=y[x+1]*t,n=y[x+2]*t,m=y[x+3]*t,y[v++]=255+z*(-4.387332384609988*z+54.48615194189176*h+18.82290502165302*n+212.25662451639585*m-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*n-17.873870861415444*m-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*
m+17.5119270841813)-m*(21.86122147463605*m+189.48180835922747),y[v++]=255+z*(8.841041422036149*z+60.118027045597366*h+6.871425592049007*n+31.159100130055922*m-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*n+131.35250912493976*m-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*m-24.86741582555878)-m*(20.737325471181034*m+187.80453709719578),y[v++]=255+z*(.8842522430003296*z+8.078677503112928*h+30.89978309703729*n-.23883238689178934*m-14.183576799673286)+h*(10.49593273432072*
h+63.02378494754052*n+50.606957656360734*m-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*m-193.58209356861505)-m*(22.33816807309886*m+180.12613974708367);return y},getData:function(y,z,h){if(4<this.numComponents)throw new R("Unsupported color mode");y=this._getLinearizedBlockData(y,z);if(1===this.numComponents&&h){h=y.length;z=new Uint8ClampedArray(3*h);for(var n=0,m=0;m<h;m++){var v=y[m];z[n++]=v;z[n++]=v;z[n++]=v}return z}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(y);
if(4===this.numComponents){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(y):this._convertYcckToCmyk(y);if(h)return this._convertCmykToRgb(y)}return y}};return q}()})});Y.Jpg=S})},"esri/chunks/LercCodec":function(){define(["exports"],function(Y){function S(J){Q[0]=J;return Q[0]}const Q=new Float32Array(1),R=S(3.4028234663852886E38);var q=S(Math.max(-R,Math.min(-Infinity,R)));Y.decode=function(J,L){L=L||{};var O=L.inputOffset||0;var M=L.encodedMaskData||null===L.encodedMaskData;
var C=new Uint8Array(J,O,10);C=String.fromCharCode.apply(null,C);if("CntZImage"!=C.trim())throw"Unexpected file identifier string: "+C;O+=10;var y=new DataView(J,O,24);var z=y.getInt32(0,!0);var h=y.getInt32(4,!0);var n=y.getUint32(8,!0);var m=y.getUint32(12,!0);var v=y.getFloat64(16,!0);O+=24;if(!M){y=new DataView(J,O,16);var t={};t.numBlocksY=y.getUint32(0,!0);t.numBlocksX=y.getUint32(4,!0);t.numBytes=y.getUint32(8,!0);t.maxValue=y.getFloat32(12,!0);O+=16;if(0<t.numBytes){M=new Uint8Array(Math.ceil(m*
n/8));y=new DataView(J,O,t.numBytes);var x=y.getInt16(0,!0);var F=2;var w=0;do{if(0<x)for(;x--;)M[w++]=y.getUint8(F++);else{var l=y.getUint8(F++);for(x=-x;x--;)M[w++]=l}x=y.getInt16(F,!0);F+=2}while(F<t.numBytes);if(-32768!==x||w<M.length)throw"Unexpected end of mask RLE encoding";t.bitset=M;O+=t.numBytes}else 0===(t.numBytes|t.numBlocksY|t.maxValue)&&(M=new Uint8Array(Math.ceil(m*n/8)),t.bitset=M)}y=new DataView(J,O,16);var p=M=l=w=F=x=void 0;x=y.getUint32(0,!0);F=y.getUint32(4,!0);w=y.getUint32(8,
!0);l=y.getFloat32(12,!0);O+=16;p=F;M=x;p+=0<m%p?1:0;var B=M+(0<n%M?1:0);M=Array(p*B);for(var G=1E9,g=0,b=0;b<B;b++)for(var k=0;k<p;k++){var r=0;y=new DataView(J,O,Math.min(10,J.byteLength-O));var c={};M[g++]=c;var a=y.getUint8(0);r++;c.encoding=a&63;if(3<c.encoding)throw"Invalid block encoding ("+c.encoding+")";if(2===c.encoding)O++,G=Math.min(G,0);else{if(0!==a&&2!==a){a>>=6;c.offsetType=a;if(2===a)c.offset=y.getInt8(1),r++;else if(1===a)c.offset=y.getInt16(1,!0),r+=2;else if(0===a)c.offset=y.getFloat32(1,
!0),r+=4;else throw"Invalid block offset type";G=Math.min(c.offset,G);if(1===c.encoding)if(a=y.getUint8(r),r++,c.bitsPerPixel=a&63,a>>=6,c.numValidPixelsType=a,2===a)c.numValidPixels=y.getUint8(r),r++;else if(1===a)c.numValidPixels=y.getUint16(r,!0),r+=2;else if(0===a)c.numValidPixels=y.getUint32(r,!0),r+=4;else throw"Invalid valid pixel count type";}O+=r;if(3!=c.encoding)if(0===c.encoding){y=(w-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";r=new ArrayBuffer(4*y);a=new Uint8Array(r);
a.set(new Uint8Array(J,O,4*y));r=new Float32Array(r);for(a=0;a<r.length;a++)G=Math.min(G,r[a]);c.rawData=r;O+=4*y}else 1===c.encoding&&(y=Math.ceil(c.numValidPixels*c.bitsPerPixel/8),r=new ArrayBuffer(4*Math.ceil(y/4)),a=new Uint8Array(r),a.set(new Uint8Array(J,O,y)),c.stuffedData=new Uint32Array(r),O+=y)}}p=G;J=O;O=null!=L.noDataValue?S(Math.max(-R,Math.min(L.noDataValue,R))):q;B=L.encodedMaskData;a=L.returnMask;G=0;g=F;b=x;k=Math.floor(m/g);c=Math.floor(n/b);r=2*v;B=B||(t?t.bitset:null);var e;y=
new (L.pixelType||Float32Array)(m*n);a&&B&&(e=new Uint8Array(m*n));a=new Float32Array(k*c);for(var f,d,u=0;u<=b;u++){var E=u!==b?c:n%b;if(0!==E)for(var A=0;A<=g;A++){var D=A!==g?k:m%g;if(0!==D){var H=u*m*c+A*k,N=m-D,I=M[G],K;if(2>I.encoding){if(0===I.encoding)var P=I.rawData;else{f=K=P=void 0;d=I.stuffedData;var U=I.bitsPerPixel,T=I.numValidPixels,Z=I.offset,W=r,X=a,ba=l,aa=(1<<U)-1,V=0,ca=0,ea=Math.ceil((ba-Z)/W);d[d.length-1]<<=8*(4*d.length-Math.ceil(U*T/8));for(f=0;f<T;f++)0===ca&&(P=d[V++],ca=
32),ca>=U?(K=P>>>ca-U&aa,ca-=U):(ca=U-ca,K=(P&aa)<<ca&aa,P=d[V++],ca=32-ca,K+=P>>>ca),X[f]=K<ea?Z+K*W:ba;P=a}K=0}else var ha=2===I.encoding?0:I.offset;if(B)for(d=0;d<E;d++){if(H&7){var ia=B[H>>3];ia<<=H&7}for(f=0;f<D;f++)H&7||(ia=B[H>>3]),ia&128?(e&&(e[H]=1),y[H++]=2>I.encoding?P[K++]:ha):(e&&(e[H]=0),y[H++]=O),ia<<=1;H+=N}else if(2>I.encoding)for(d=0;d<E;d++){for(f=0;f<D;f++)y[H++]=P[K++];H+=N}else for(d=0;d<E;d++)if(y.fill)y.fill(ha,H,H+D),H+=D+N;else{for(f=0;f<D;f++)y[H++]=ha;H+=N}if(1===I.encoding&&
K!==I.numValidPixels)throw"Block and Mask do not match";G++}}}ha=e;e={width:m,height:n,pixelData:y,minValue:p,maxValue:l,noDataValue:O};ha&&(e.maskData=ha);L.returnEncodedMask&&t&&(e.encodedMaskData=t.bitset?t.bitset:null);if(L.returnFileInfo&&(e.fileInfo={fileIdentifierString:C,fileVersion:z,imageType:h,height:n,width:m,maxZError:v,eofOffset:J,mask:t?{numBlocksX:t.numBlocksX,numBlocksY:t.numBlocksY,numBytes:t.numBytes,maxValue:t.maxValue}:null,pixels:{numBlocksX:F,numBlocksY:x,numBytes:w,maxValue:l,
minValue:p,noDataValue:O}},L.computeUsedBitDepths)){L=e.fileInfo;t=F*x;C={};for(z=0;z<t;z++)h=M[z],0===h.encoding?C.float32=!0:1===h.encoding?C[h.bitsPerPixel]=!0:C[0]=!0;t=Object.keys(C);L.bitDepths=t}return e}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const Y=function(S){let Q=1;switch(S){case Uint8Array:case Int8Array:Q=1;break;case Uint16Array:case Int16Array:Q=2;break;case Uint32Array:case Int32Array:case Float32Array:Q=4;break;case Float64Array:Q=8}return Q};return function(){function S(){}
S.decode=function(Q,R){var q=R.pixelType;const J=[],L=R.width*R.height;var O=Math.floor(Q.byteLength/(R.width*R.height*Y(R.pixelType)));const {bandIds:M,format:C}=R;R=M&&M.length||Math.floor(Q.byteLength/(R.width*R.height*Y(R.pixelType)));var y=Q.byteLength-Q.byteLength%(L*Y(q));const z=new q(Q,0,L*O);let h,n;let m,v;if("bip"===C)for(h=0;h<R;h++){m=new q(L);v=M?M[h]:h;for(n=0;n<L;n++)m[n]=z[n*O+v];J.push(m)}else if("bsq"===C)for(h=0;h<R;h++)v=M?M[h]:h,J.push(z.subarray(v*L,(v+1)*L));if(y<Q.byteLength-
1)if(Q=Q.slice(y),8*Q.byteLength<L)var t=null;else{Q=new Uint8Array(Q,0,Math.ceil(L/8));q=new Uint8Array(L);for(R=y=R=t=O=0;R<Q.length-1;R++)for(t=Q[R],y=7;0<=y;y--)q[O++]=t>>y&1;for(y=7;O<L-1;)t=Q[Q.length-1],q[O++]=t>>y&1,y--;t=q}return{pixels:J,mask:t}};return S}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(Y){{var S=new ArrayBuffer(4);const Q=new Uint8Array(S);(new Uint32Array(S))[0]=1;S=1===Q[0]}Y.isPlatformLittleEndian=S;Object.defineProperty(Y,"__esModule",
{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(Y,S,Q,R,q,J,L){function O(g,b){let k="unknown";3===g?k="f32":1===g?1===b?k="u1":2===b?k="u2":4===b?k="u4":8>=b?k="u8":16>=b?k="u16":32>=b&&(k="u32"):2===g&&(8>=b?k="s8":16>=b?k="s16":32>=b&&(k="s32"));return k}function M(g){let b=null;switch(g?g.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":b=
Uint8Array;break;case "u16":b=Uint16Array;break;case "u32":b=Uint32Array;break;case "s8":b=Int8Array;break;case "s16":b=Int16Array;break;case "s32":b=Int32Array;break;default:b=Float32Array}return b}function C(g,b){return{x:b[0]*g.x+b[1]*g.y+b[2],y:b[3]*g.x+b[4]*g.y+b[5]}}function y(g,b){return(g=g.get(b))&&g.values}function z(g,b){return(g=g.get(b))&&g.values[0]}function h(g,b,k,r=0,c=J.TIFF_TAGS,a=4){var e=8===a;const f=e?t(new DataView(g,k,8),0,b):(new DataView(g,k,2)).getUint16(0,b),d=4+2*a;var u=
e?8:2;e=u+f*d;if(k+e>g.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:e};const E=k+e+4<=g.byteLength?x(new DataView(g,k+e,8===a?8:4),0,b,8===a):null;k+=u;u=new Map;let A,D,H,N,I;for(let P=0;P<f;P++){var K=new DataView(g,k+d*P,d);A=K.getUint16(0,b);H=K.getUint16(2,b);D=J.getTagName(A,c);2===a?(N=K.getUint16(4,b),I=K.getUint16(6,b)):4===a?(N=K.getUint32(4,b),I=K.getUint32(8,b)):8===a&&(N=x(K,4,b,!0),I=x(K,12,b,!0));K={id:A,type:H,valueCount:N,valueOffset:I,values:null};n(g,b,
K,r,!1,a);u.set(D,K)}return{success:!0,ifd:u,nextIFD:E,requiredBufferSize:e}}function n(g,b,k,r=0,c=!1,a=4){if(k.values)return!0;var e=k.type,f=k.valueCount,d=k.valueOffset;let u=[];var E=l[e],A=8*E,D=f*E,H=f*l[e]*8;a=8===a?64:32;if(H>a&&D>(c?g.byteLength:g?g.byteLength-d+r:0))return k.offlineOffsetSize=[d,D],k.values=null,!1;if(H<=a)if(b||(d>>>=32-H),1===f)u=[d];else if(64===a)for(g=d>>>0,d=Math.round((d-g)/4294967296),b=g,E=32,g=1;g<=f;g++)D=32-A*g%32,E<A?(D=b<<D>>>32-E,r=d<<32-E>>>32-E,b=d,u.push(D+
r*Math.pow(2,A-E)),E-=32-(A-E)):(u.push(b<<D>>>32-A),E-=A),0===E&&(E=32,b=d);else for(g=1;g<=f;g++)u.push(d<<32-A*g>>>32-A);else for(d-=r,c&&(d=0),f=d;f<d+D;f+=E){switch(e){case 1:A=(new DataView(g,f,1)).getUint8(0);break;case 2:A=(new DataView(g,f,1)).getUint8(0);break;case 3:A=(new DataView(g,f,2)).getUint16(0,b);break;case 4:A=(new DataView(g,f,4)).getUint32(0,b);break;case 5:A=(new DataView(g,f,4)).getUint32(0,b)/(new DataView(g,f+4,4)).getUint32(0,b);break;case 6:A=(new DataView(g,f,1)).getInt8(0);
break;case 7:A=(new DataView(g,f,1)).getUint8(0);break;case 8:A=(new DataView(g,f,2)).getInt16(0,b);break;case 9:A=(new DataView(g,f,4)).getInt32(0,b);break;case 10:A=(new DataView(g,f,4)).getInt32(0,b)/(new DataView(g,f+4,4)).getInt32(0,b);break;case 11:A=(new DataView(g,f,4)).getFloat32(0,b);break;case 12:A=(new DataView(g,f,8)).getFloat64(0,b);break;case 16:case 18:A=t(new DataView(g,f,8),0,b);break;case 17:c=new DataView(g,f,8);r=(A=b)?c.getInt32(0,A):c.getUint32(0,A);c=A?c.getUint32(4,A):c.getInt32(4,
A);H=0<=(A?r:c)?1:-1;A?r*=H:c*=H;A=H*(A?4294967296*c+r:4294967296*r+c);break;default:A=null}u.push(A)}if(2===e){e="";d=u;u=[];for(g=0;g<d.length;g++)0===d[g]&&""!==e?(u.push(e),e=""):e+=String.fromCharCode(d[g]);""===e&&0!==u.length||u.push(e)}k.values=u;return!0}function m(g){var b=g[0];const k=z(b,"TILEWIDTH"),r=z(b,"TILELENGTH"),c=z(b,"IMAGEWIDTH"),a=z(b,"IMAGELENGTH");var e=z(b,"BITSPERSAMPLE");const f=z(b,"SAMPLESPERPIXEL");var d=z(b,"SAMPLEFORMAT")||1;const u=O(d,e),E=y(b,"PLANARCONFIGURATION")?
2===y(b,"PLANARCONFIGURATION")[0]:!1;var A=y(b,"GDAL_NODATA");let D;null!=A&&("string"===typeof A[0]?(D=A.map(ca=>parseFloat(ca)),D.some(ca=>isNaN(ca))&&(D=null)):"number"===typeof A[0]&&(D=A));var H=z(b,"COMPRESSION")||1;switch(H){case 1:A="NONE";break;case 2:case 3:case 4:case 32771:A="CCITT";break;case 5:A="LZW";break;case 6:case 7:A="JPEG";break;case 32773:A="PACKBITS";break;case 8:case 32946:A="DEFLATE";break;case 34712:A="JPEG2000";break;default:A=String(H)}let N=!0,I="";1!==H&&5!==H&&6!==H&&
8!==H&&32946!==H&&(N=!1,I+="unsupported tag compression "+H);3<d&&(N=!1,I+="unsupported tag sampleFormat "+d);0!==e%8&&(N=!1,I+="unsupported tag bitsPerSample "+e);e=z(b,"GEOASCIIPARAMS");if(e){var K=(K=e.split("|").filter(ca=>-1<ca.indexOf("ESRI PE String \x3d "))[0])?K.replace("ESRI PE String \x3d ",""):"";K=0===K.indexOf("PROJCS")||0===K.indexOf("GEOGCS")?{wkid:null,wkt:K}:null}e=y(b,"GEOTIEPOINTS");d=y(b,"GEOPIXELSCALE");H=y(b,"GEOTRANSMATRIX");var P=b.has("GEOKEYDIRECTORY")?b.get("GEOKEYDIRECTORY").data:
null;b=!1;if(P){b=2===z(P,"GTRasterTypeGeoKey");var U=z(P,"GTModelTypeGeoKey");2===U?(P=z(P,"GeographicTypeGeoKey"),1024<=P&&32766>=P&&(K={wkid:P})):1===U&&(P=z(P,"ProjectedCSTypeGeoKey"),1024<=P&&32766>=P&&(K={wkid:P}))}if(d&&e&&6<=e.length){var T=[d[0],0,e[3]-e[0]*d[0],0,-Math.abs(d[1]),e[4]-e[1]*d[1]];b&&(T[2]-=.5*T[0]+.5*T[1],T[5]-=.5*T[3]+.5*T[4])}else H&&16===H.length&&(T=[H[0],H[1],H[3],H[4],H[5],H[7]]);if(T){var Z=[{x:0,y:a},{x:0,y:0},{x:c,y:a},{x:c,y:0}];d=e=Number.POSITIVE_INFINITY;P=H=
Number.NEGATIVE_INFINITY;for(U=0;U<Z.length;U++)b=C(Z[U],T),e=b.x>e?e:b.x,H=b.x<H?H:b.x,d=b.y>d?d:b.y,P=b.y<P?P:b.y;Z={xmin:e,xmax:H,ymin:d,ymax:P,spatialReference:K}}T=g.filter(ca=>1===z(ca,"NEWSUBFILETYPE"));let W,X,ba,aa;0<T.length&&(W=Math.round(Math.log(c/z(T[0],"IMAGEWIDTH"))/Math.LN2),X=Math.round(Math.log(c/z(T[T.length-1],"IMAGEWIDTH"))/Math.LN2),ba=z(T[T.length-1],"TILEWIDTH"),aa=z(T[T.length-1],"TILEHEIGHT"));ba=0<X?ba||k:null;aa=0<X?aa||r:null;let V;k&&(V=[{maxCol:Math.ceil(c/k)-1,maxRow:Math.ceil(a/
r)-1,minRow:0,minCol:0}],T.forEach(ca=>{V.push({maxCol:Math.ceil(z(ca,"IMAGEWIDTH")/z(ca,"TILEWIDTH"))-1,maxRow:Math.ceil(z(ca,"IMAGELENGTH")/z(ca,"TILELENGTH"))-1,minRow:0,minCol:0})}));g=z(g[0],"GDAL_METADATA");g=G(g);return{width:c,height:a,tileWidth:k,tileHeight:r,planes:f,isBSQ:E,pixelType:u,compression:A,noData:D,isSupported:N,message:I,extent:Z,firstPyramidLevel:W,maximumPyramidLevel:X,pyramidBlockWidth:ba,pyramidBlockHeight:aa,tileBoundary:V,metadata:g}}function v(g){const {littleEndian:b,
isBigTiff:k,firstIFD:r}=F(g);var c=r;const a=[];do if(c=w(g,b,c,0,J.TIFF_TAGS,k?8:4),c.success)a.push(c.ifd),c=c.nextIFD;else break;while(0<c);return{...m(a),littleEndian:b,isBigTiff:k,ifds:a}}function t(g,b,k){const r=g.getUint32(b,k);g=g.getUint32(b+4,k);return k?4294967296*g+r:4294967296*r+g}function x(g,b,k,r){return r?t(g,b,k):g.getUint32(b,k)}function F(g){var b=new DataView(g,0,16),k=b.getUint16(0,!1);g=null;if(18761===k)g=!0;else if(19789===k)g=!1;else throw"unexpected endianess byte";var r=
b.getUint16(2,g);if(42!==r&&43!==r)throw"unexpected tiff identifier";k=4;if(r=43===r){const c=b.getUint16(k,g);k+=2;if(8!==c)throw"unsupported bigtiff version";if(0!==b.getUint16(k,g))throw"unsupported bigtiff version";k+=2}b=x(b,k,g,r);return{littleEndian:g,isBigTiff:r,firstIFD:b}}function w(g,b,k,r=0,c=J.TIFF_TAGS,a=4){k=h(g,b,k,r,c,a);let e;const f=k.ifd;f&&(J.ifdTags.forEach((d,u)=>{f.has(u)&&(e=f.get(u),e.data=h(g,b,e.valueOffset-r,r,d).ifd)}),f.has("GEOKEYDIRECTORY")&&(e=f.get("GEOKEYDIRECTORY"),
(c=e.values)&&4<c.length&&(c=c[0]+"."+c[1]+"."+c[2],e.data=h(g,b,e.valueOffset+6-r,r,J.GEO_KEYS,2).ifd,e.data&&e.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]}))),f.has("XMP")&&(e=f.get("XMP"),c=e.values,"number"===typeof c[0]&&7===e.type&&(e.values=[R.bytesToUTF8(new Uint8Array(c))])));return k}const l=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],p=function(g,b,k,r,c){var a=L.isPlatformLittleEndian===b,e=z(k,"BITSPERSAMPLE"),f=z(k,"SAMPLEFORMAT")||1;e=O(f,e);f=z(k,
"COMPRESSION")||1;k=M(e);if(1===f){var d=g.slice(r,r+c);var u=new Uint8Array(d)}else 8===f||32946===f?(u=new Uint8Array(g,r,c),u=new S.Zlib(u),g=u.getBytes(),d=new ArrayBuffer(g.length),u=new Uint8Array(d),u.set(g)):6===f?(u=new Uint8Array(g,r,c),d=new Q.Jpg,d.parse(u),g=d.getData(d.width,d.height,!0),d=new ArrayBuffer(g.length),u=new Uint8Array(d),u.set(g)):5===f&&(u=q.decode(g,r,c,b),d=u.buffer);if("u8"!==e&&"s8"!==e&&!a)switch(d=new ArrayBuffer(u.length),a=new Uint8Array(d),e){case "u16":case "s16":for(e=
0;e<u.length;e+=2)a[e]=u[e+1],a[e+1]=u[e];break;case "u32":case "s32":case "f32":for(e=0;e<u.length;e+=4)a[e]=u[e+3],a[e+1]=u[e+2],a[e+2]=u[e+1],a[e+3]=u[e]}return new k(d)},B=function(g,b,k){if(!(g&&0<g.length&&b&&k))return null;let r,c,a;const e=g[0].length,f=g.length,d=new Uint8Array(e);for(let E=0;E<f;E++)if(r=g[E],c=b[E],a=k[E],0===E)for(var u=0;u<e;u++)d[u]=r[u]<c||r[u]>a?0:1;else for(u=0;u<e;u++)d[u]&&(d[u]=r[u]<c||r[u]>a?0:1);return d},G=function(g){if(!g)return null;var b=g.match(/<Item(.*?)Item>/gi);
if(!b||0===b.length)return null;g=new Map;var k;for(var r=0;r<b.length;r++){var c=b[r];var a=c.slice(6,c.indexOf("\x3e"));var e=c.indexOf("sample\x3d");-1<e&&(k=c.slice(e+8,c.indexOf('"',e+8)));e=c.indexOf("name\x3d");-1<e&&(a=c.slice(e+6,c.indexOf('"',e+6)));a&&(c=c.slice(c.indexOf("\x3e")+1,c.indexOf("\x3c/Item\x3e")).trim(),null!=k?g.has(a)?g.get(a)[k]=c:g.set(a,[c]):g.set(a,c));k=null}b=g.get("STATISTICS_MINIMUM");a=g.get("STATISTICS_MAXIMUM");r=g.get("STATISTICS_MEAN");c=g.get("STATISTICS_STDDEV");
k=null;if(b&&a)for(k=[],e=0;e<b.length;e++)k.push({min:parseFloat(b[e]),max:parseFloat(a[e]),avg:r&&parseFloat(r[e]),stddev:c&&parseFloat(c[e])});a=g.get("BandName");r=g.get("WavelengthMin");c=g.get("WavelengthMax");b=null;if(a)for(b=[],e=0;e<a.length;e++)b.push({BandName:a[e],WavelengthMin:r&&parseFloat(r[e]),WavelengthMax:c&&parseFloat(c[e])});a=g.get("DataType");return{statistics:k,bandProperties:b,dataType:a,rawMetadata:g}};Y.decode=function(g,b){b=b||v(g);const {ifds:k,noData:r}=b;if(0===k.length)throw"no valid image file directory";
var c=k[0];const a=r?r[0]:null;if(b.tileWidth){var e=y(c,"TILEOFFSETS");if(void 0===e)c=null;else{var f=y(c,"TILEBYTECOUNTS"),d=b.tileWidth,u=b.tileHeight,{width:E,height:A,pixelType:D,isBSQ:H}=b,N=b.planes,I=E*A,K=y(c,"BITSPERSAMPLE")[0],P=M(D),U=[];for(var T=0;T<N;T++)U.push(new P(I));var Z,W;I=Math.ceil(E/d);if(0===K%8)for(K=0;K<e.length;K++){var X=Math.floor(K/I)*u;var ba=K%I*d;T=X*E+ba;P=p(g,b.littleEndian,c,e[K],f[K]);var aa=0;var V=T;ba=Math.min(d,E-ba);var ca=Math.min(u,A-X);for(X=0;X<N;X++){var ea=
U[X];if(H)for(Z=0;Z<ca;Z++)for(V=T+Z*E,aa=d*u*X+Z*d,W=0;W<ba;W++,V++,aa++)ea[V]=P[aa];else for(Z=0;Z<ca;Z++)for(V=T+Z*E,aa=Z*d*N+X,W=0;W<ba;W++,V++,aa+=N)ea[V]=P[aa]}}c={width:E,height:A,pixelType:D,pixels:U}}}else if(e=L.isPlatformLittleEndian===b.littleEndian,I=y(c,"STRIPOFFSETS"),void 0===I)c=null;else{var {width:ha,height:ia,pixelType:ja}=b;b=b.planes;f=ha*ia;K=y(c,"BITSPERSAMPLE")[0];d=M(ja);u=new d(f*b);P=y(c,"STRIPBYTECOUNTS");T=y(c,"ROWSPERSTRIP")[0];aa=y(c,"COMPRESSION")?y(c,"COMPRESSION")[0]:
1;X=T;if(0===K%8)for(c=0;c<I.length;c++){ba=c*T*ha*b;X=(c+1)*T>ia?ia-c*T:T;if("u8"===ja||"s8"===ja||e)8===aa||32946===aa?(U=new Uint8Array(g,I[c],P[c]),U=new S.Zlib(U),Z=U.getBytes(),V=new ArrayBuffer(Z.length),U=new Uint8Array(V),U.set(Z),U.length!==X*ha*b*K/8&&console.log("strip byte counts is different than expected")):6===aa?(U=new Uint8Array(g,I[c],P[c]),V=new Q.Jpg,V.parse(U),X=V.getData(V.width,V.height,!0),V=new ArrayBuffer(X.length),U=new Uint8Array(V),U.set(X)):1===aa&&(P[c]!==X*ha*b*K/
8&&console.log("strip byte counts is different than expected"),V=g.slice(I[c],I[c]+P[c]));else switch(6===aa||8===aa||32946===aa?(U=new Uint8Array(g,I[c],P[c]),U=new S.Zlib(U),U=U.getBytes(),V=new ArrayBuffer(U.length),N=new Uint8Array(V),U.length!==X*ha*b*K/8&&console.log("strip byte counts is different than expected")):1===aa&&(P[c]!==X*ha*b*K/8&&console.log("strip byte counts is different than expected"),V=new ArrayBuffer(P[c]),U=new Uint8Array(g,I[c],P[c]),N=new Uint8Array(V)),ja){case "u16":case "s16":for(X=
0;X<U.length;X+=2)N[X]=U[X+1],N[X+1]=U[X];break;case "u32":case "s32":case "f32":for(X=0;X<U.length;X+=4)N[X]=U[X+3],N[X+1]=U[X+2],N[X+2]=U[X+1],N[X+3]=U[X]}X=new d(V);u.set(X,ba)}U=[];if(1===b)U.push(u);else for(c=0;c<b;c++){N=new d(f);for(g=0;g<f;g++)N[g]=u[g*b+c];U.push(N)}c={width:ha,height:ia,pixelType:ja,pixels:U}}if(null!==a){c.mask=new Uint8Array(c.width*c.height);if(1E24<Math.abs(a))for(g=0;g<c.width*c.height;g++)c.mask[g]=1E-6>Math.abs((c.pixels[0][g]-a)/a)?0:1;else for(g=0;g<c.width*c.height;g++)c.mask[g]=
c.pixels[0][g]===a?0:1;c.noDataValue=a}return c};Y.decodeTileOrStrip=function(g,b){const {headerInfo:k,ifd:r}=b;var c=p(g,k.littleEndian,r,b.offset||0,b.size||g.byteLength);const {pixelType:a,isBSQ:e,planes:f}=k;var d=M(a);g=c.length/f;const u=[];for(var E=0;E<f;E++){var A=new d(g);if(e)A=c.slice(g*E,g*(E+1));else for(var D=0;D<g;D++)A[D]=c[D*f+E];u.push(A)}c=z(r,"TILEWIDTH");d=z(r,"TILELENGTH");A=k.noData?k.noData[0]:null;E=(D=k.metadata?k.metadata.statistics:null)?D.map(N=>N.min):null;D=D?D.map(N=>
N.max):null;let H;if(null!=A)if(H=new Uint8Array(g),1E24<Math.abs(A))for(b=0;b<g;b++)H[b]=1E-6>Math.abs((u[0][b]-A)/A)?0:1;else for(b=0;b<g;b++)H[b]=u[0][b]===A?0:1;else E&&D&&b.applyMinMaxConstraint&&(H=B(u,E,D));return{pixelType:a,width:c,height:d,pixels:u,mask:H,noDataValue:A}};Y.getImageInfo=m;Y.parseFieldValues=n;Y.parseHeader=v;Y.parseIFD=w;Y.parseSignature=F;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],
function(Y){Y.bytesToUTF8=function(S,Q){let R=0,q="",J=0,L=0;const O=S.length;for(;R<O;)if(L=S[R++],J=L>>4,8>J?J=1:15===J?(J=4,L=(L&7)<<18|(S[R++]&63)<<12|(S[R++]&63)<<6|S[R++]&63):14===J?(J=3,L=(L&15)<<12|(S[R++]&63)<<6|S[R++]&63):(J=2,L=(L&31)<<6|S[R++]&63),0!==L||Q)q+=String.fromCharCode(L);return q};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(Y){function S(J,L,O,M=!0){if(0!==L%4||0!==O%4){var C=new ArrayBuffer(4*
Math.ceil(O/4));C=new Uint8Array(C);J=new Uint8Array(J,L,O);if(M)for(M=0;M<C.length;M+=4)C[M]=J[M+3],C[M+1]=J[M+2],C[M+2]=J[M+1],C[M+3]=J[M];else C.set(J);return new Uint32Array(C.buffer)}if(M){M=new Uint8Array(J,L,O);C=new Uint8Array(M.length);for(J=0;J<C.length;J+=4)C[J]=M[J+3],C[J+1]=M[J+2],C[J+2]=M[J+1],C[J+3]=M[J];return new Uint32Array(C.buffer)}return new Uint32Array(J,L,O/4)}function Q(){const J=[];for(let L=0;257>=L;L++)J[L]=[L];return J}function R(J,L){for(let O=0;O<L.length;O++)J.push(L[O])}
const q=new Set;q.add(511);q.add(1023);q.add(2047);q.add(4095);q.add(8191);Y.decode=function(J,L,O,M=!0){J=S(J,L,O,M);L=9;M=Q();let C=32,y=M.length,z=[],h=1,n=J[0],m=0;const v=J.length;O=8*(4*v-O);const t=[];for(;null!=n;){if(C>=L)C-=L,m=n>>>32-L,n<<=L;else{m=n>>>32-C;n=J[h++];var x=L-C;C=32-x;m=(m<<x)+(n>>>C);n<<=x}if(257===m)break;if(256===m)L=9,M=Q(),y=M.length,z=[];else{x=M[m];if(null==x){if(m>M.length)throw"data integrity issue: code does not exist on code page";z.push(z[0]);M[y++]=z.slice();
R(t,z)}else R(t,x),z.push(x[0]),1<z.length&&(M[y++]=z.slice()),z=x.slice();q.has(y)&&L++;0===C&&(n=J[h++],C=32);if(h>v||h===v&&C<=O)break}}return new Uint8Array(t)};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const Y=(()=>{const q=[];q[254]="NEWSUBFILETYPE";q[255]="SUBFILETYPE";q[256]="IMAGEWIDTH";q[257]="IMAGELENGTH";q[258]="BITSPERSAMPLE";q[259]="COMPRESSION";q[262]="PHOTOMETRICINTERPRETATION";q[263]="THRESHHOLDING";
q[264]="CELLWIDTH";q[265]="CELLLENGTH";q[266]="FILLORDER";q[269]="DOCUMENTNAME";q[270]="IMAGEDESCRIPTION";q[271]="MAKE";q[272]="MODEL";q[273]="STRIPOFFSETS";q[274]="ORIENTATION";q[277]="SAMPLESPERPIXEL";q[278]="ROWSPERSTRIP";q[279]="STRIPBYTECOUNTS";q[280]="MINSAMPLEVALUE";q[281]="MAXSAMPLEVALUE";q[282]="XRESOLUTION";q[283]="YRESOLUTION";q[284]="PLANARCONFIGURATION";q[285]="PAGENAME";q[286]="XPOSITION";q[287]="YPOSITION";q[288]="FREEOFFSETS";q[289]="FREEBYTECOUNTS";q[290]="GRAYRESPONSEUNIT";q[291]=
"GRAYRESPONSECURVE";q[292]="T4OPTIONS";q[293]="T6OPTIONS";q[296]="RESOLUTIONUNIT";q[297]="PAGENUMBER";q[300]="COLORRESPONSEUNIT";q[301]="TRANSFERFUNCTION";q[305]="SOFTWARE";q[306]="DATETIME";q[315]="ARTIST";q[316]="HOSTCOMPUTER";q[317]="PREDICTOR";q[318]="WHITEPOINT";q[319]="PRIMARYCHROMATICITIES";q[320]="COLORMAP";q[321]="HALFTONEHINTS";q[322]="TILEWIDTH";q[323]="TILELENGTH";q[324]="TILEOFFSETS";q[325]="TILEBYTECOUNTS";q[326]="BADFAXLINES";q[327]="CLEANFAXDATA";q[328]="CONSECUTIVEBADFAXLINES";q[330]=
"SUBIFD";q[332]="INKSET";q[333]="INKNAMES";q[334]="NUMBEROFINKS";q[336]="DOTRANGE";q[337]="TARGETPRINTER";q[338]="EXTRASAMPLES";q[339]="SAMPLEFORMAT";q[340]="SMINSAMPLEVALUE";q[341]="SMAXSAMPLEVALUE";q[342]="TRANSFERRANGE";q[347]="JPEGTABLES";q[512]="JPEGPROC";q[513]="JPEGIFOFFSET";q[514]="JPEGIFBYTECOUNT";q[515]="JPEGRESTARTINTERVAL";q[517]="JPEGLOSSLESSPREDICTORS";q[518]="JPEGPOINTTRANSFORM";q[519]="JPEGQTABLES";q[520]="JPEGDCTABLES";q[521]="JPEGACTABLES";q[529]="YCBCRCOEFFICIENTS";q[530]="YCBCRSUBSAMPLING";
q[531]="YCBCRPOSITIONING";q[532]="REFERENCEBLACKWHITE";q[700]="XMP";q[33550]="GEOPIXELSCALE";q[33922]="GEOTIEPOINTS";q[33432]="COPYRIGHT";q[42112]="GDAL_METADATA";q[42113]="GDAL_NODATA";q[50844]="RPCCOEFFICIENT";q[34264]="GEOTRANSMATRIX";q[34735]="GEOKEYDIRECTORY";q[34736]="GEODOUBLEPARAMS";q[34737]="GEOASCIIPARAMS";q[34665]="EXIFIFD";q[34853]="GPSIFD";q[40965]="INTEROPERABILITYIFD";return q})(),S=(()=>{const q=[].concat(Y);q[36864]="ExifVersion";q[40960]="FlashpixVersion";q[40961]="ColorSpace";q[42240]=
"Gamma";q[37121]="ComponentsConfiguration";q[37122]="CompressedBitsPerPixel";q[40962]="PixelXDimension";q[40963]="PixelYDimension";q[37500]="MakerNote";q[37510]="UserComment";q[40964]="RelatedSoundFile";q[36867]="DateTimeOriginal";q[36868]="DateTimeDigitized";q[36880]="OffsetTime";q[36881]="OffsetTimeOriginal";q[36882]="OffsetTimeDigitized";q[37520]="SubSecTime";q[37521]="SubSecTimeOriginal";q[37522]="SubSecTimeDigitized";q[37888]="Temperature";q[37889]="Humidity";q[37890]="Pressure";q[37891]="WaterDepth";
q[37892]="Acceleration";q[37893]="CameraElevationAngle";q[42016]="ImageUniqueID";q[42032]="CameraOwnerName";q[42033]="BodySerialNumber";q[42034]="LensSpecification";q[42035]="LensMake";q[42036]="LensModel";q[42037]="LensSerialNumber";q[33434]="ExposureTime";q[33437]="FNumber";q[34850]="ExposureProgram";q[34852]="SpectralSensitivity";q[34855]="PhotographicSensitivity";q[34856]="OECF";q[34864]="SensitivityType";q[34865]="StandardOutputSensitivity";q[34866]="RecommendedExposureIndex";q[34867]="ISOSpeed";
q[34868]="ISOSpeedLatitudeyyy";q[34869]="ISOSpeedLatitudezzz";q[37377]="ShutterSpeedValue";q[37378]="ApertureValue";q[37379]="BrightnessValue";q[37380]="ExposureBiasValue";q[37381]="MaxApertureValue";q[37382]="SubjectDistance";q[37383]="MeteringMode";q[37384]="LightSource";q[37385]="Flash";q[37386]="FocalLength";q[37396]="SubjectArea";q[41483]="FlashEnergy";q[41484]="SpatialFrequencyResponse";q[41486]="FocalPlaneXResolution";q[41487]="FocalPlaneYResolution";q[41488]="FocalPlaneResolutionUnit";q[41492]=
"SubjectLocation";q[41493]="ExposureIndex";q[41495]="SensingMethod";q[41728]="FileSource";q[41729]="SceneType";q[41730]="CFAPattern";q[41985]="CustomRendered";q[41986]="ExposureMode";q[41987]="WhiteBalance";q[41988]="DigitalZoomRatio";q[41989]="FocalLengthIn35mmFilm";q[41990]="SceneCaptureType";q[41991]="GainControl";q[41992]="Contrast";q[41993]="Saturation";q[41994]="Sharpness";q[41995]="DeviceSettingDescription";q[41996]="SubjectDistanceRange";return q})(),Q=(()=>{const q=[];q[1024]="GTModelTypeGeoKey";
q[1025]="GTRasterTypeGeoKey";q[1026]="GTCitationGeoKey";q[2048]="GeographicTypeGeoKey";q[2049]="GeogCitationGeoKey";q[2050]="GeogGeodeticDatumGeoKey";q[2051]="GeogPrimeMeridianGeoKey";q[2052]="GeogLinearUnitsGeoKey";q[2053]="GeogLinearUnitSizeGeoKey";q[2054]="GeogAngularUnitsGeoKey";q[2055]="GeogAngularUnitSizeGeoKey";q[2056]="GeogEllipsoidGeoKey";q[2057]="GeogSemiMajorAxisGeoKey";q[2058]="GeogSemiMinorAxisGeoKey";q[2059]="GeogInvFlatteningGeoKey";q[2061]="GeogPrimeMeridianLongGeoKey";q[2060]="GeogAzimuthUnitsGeoKey";
q[3072]="ProjectedCSTypeGeoKey";q[3073]="PCSCitationGeoKey";q[3074]="ProjectionGeoKey";q[3075]="ProjCoordTransGeoKey";q[3076]="ProjLinearUnitsGeoKey";q[3077]="ProjLinearUnitSizeGeoKey";q[3078]="ProjStdParallel1GeoKey";q[3079]="ProjStdParallel2GeoKey";q[3080]="ProjNatOriginLongGeoKey";q[3081]="ProjNatOriginLatGeoKey";q[3082]="ProjFalseEastingGeoKey";q[3083]="ProjFalseNorthingGeoKey";q[3084]="ProjFalseOriginLongGeoKey";q[3085]="ProjFalseOriginLatGeoKey";q[3086]="ProjFalseOriginEastingGeoKey";q[3087]=
"ProjFalseOriginNorthingGeoKey";q[3088]="ProjCenterLongGeoKey";q[3090]="ProjCenterEastingGeoKey";q[3091]="ProjCenterNorthingGeoKey";q[3092]="ProjScaleAtNatOriginGeoKey";q[3093]="ProjScaleAtCenterGeoKey";q[3094]="ProjAzimuthAngleGeoKey";q[3095]="ProjStraightVertPoleLongGeoKey";q[4096]="VerticalCSTypeGeoKey";q[4097]="VerticalCitationGeoKey";q[4098]="VerticalDatumGeoKey";q[4099]="VerticalUnitsGeoKey";return q})(),R=new Map;R.set("EXIFIFD",S);R.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:Y,ifdTags:R,GEO_KEYS:Q,getTagName:function(q,J){J=(J||Y)[q];void 0===J&&(J="unknown"+String(q));return J}}})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(Y,S){function Q(h,n){h=Math.min(Math.max(h,-100),100);n=Math.min(Math.max(n,-100),100);let m,v;const t=new Uint8Array(256);for(m=0;256>m;m++)0<h&&100>h?v=(200*m-25500+510*n)/(2*(100-h))+128:0>=h&&-100<h?v=(200*m-25500+510*n)*(100+h)/2E4+128:100===h?(v=200*m-25500+256*(100-
h)+510*n,v=0<v?255:0):-100===h&&(v=128),t[m]=255<v?255:0>v?0:v;return t}function R(h,n,m,v,t,x,F,w){return{xmin:t<=m*h?0:t<m*h+h?t-m*h:h,ymin:x<=v*n?0:x<v*n+n?x-v*n:n,xmax:t+F<=m*h?0:t+F<m*h+h?t+F-m*h:h,ymax:x+w<=v*n?0:x+w<v*n+n?x+w-v*n:n}}function q(h,n,m,v){var t=h.filter(D=>z(D))[0];if(null==t)return null;const x=v?v.width:n.width;v=v?v.height:n.height;const F=t.width,w=t.height,l=n.width/F;n=n.height/w;const p=m?m.x:0;m=m?m.y:0;const B=t.pixelType;var G=S.getPixelArrayConstructor(B);const g=t.pixels.length;
t=[];let b,k;var r;let c,a,e,f,d,u,E;for(a=0;a<g;a++){k=new G(x*v);for(e=0;e<n;e++)for(f=0;f<l;f++)if(r=h[e*l+f])for(b=r.pixels[a],E=R(F,w,f,e,p,m,x,v),d=E.ymin;d<E.ymax;d++)for(r=(e*w+d-m)*x+(f*F-p),c=d*F,u=E.xmin;u<E.xmax;u++)k[r+u]=b[c+u];t.push(k)}let A;if(h.some(D=>null==D||D.mask&&0<D.mask.length))for(A=new Uint8Array(x*v),e=0;e<n;e++)for(f=0;f<l;f++)if(G=(r=h[e*l+f])?r.mask:null,E=R(F,w,f,e,p,m,x,v),G)for(d=E.ymin;d<E.ymax;d++)for(r=(e*w+d-m)*x+(f*F-p),c=d*F,u=E.xmin;u<E.xmax;u++)A[r+u]=G[c+
u];else if(r)for(d=E.ymin;d<E.ymax;d++)for(r=(e*w+d-m)*x+(f*F-p),c=d*F,u=E.xmin;u<E.xmax;u++)A[r+u]=1;else for(d=E.ymin;d<E.ymax;d++)for(r=(e*w+d-m)*x+(f*F-p),c=d*F,u=E.xmin;u<E.xmax;u++)A[r+u]=0;h=new S({width:x,height:v,pixels:t,pixelType:B,mask:A});h.updateStatistics();return h}function J(h){if(!z(h))return null;const n=h.clone(),{width:m,height:v,pixels:t,mask:x}=h;var F=t[0];h=n.pixels[0];for(let p=2;p<v-1;p++){const B=new Map;for(var w=p-2;w<p+2;w++)for(var l=0;4>l;l++){const G=w*m+l;M(B,F[G],
x?x[G]:1)}h[p*m]=L(B);h[p*m+1]=h[p*m+2]=h[p*m];for(w=3;w<m-1;w++)l=(p-2)*m+w+1,M(B,F[l],x?x[l]:1),l=(p-1)*m+w+1,M(B,F[l],x?x[l]:1),l=p*m+w+1,M(B,F[l],x?x[l]:1),l=(p+1)*m+w+1,M(B,F[l],x?x[l]:1),l=(p-2)*m+w-3,O(B,F[l],x?x[l]:1),l=(p-1)*m+w-3,O(B,F[l],x?x[l]:1),l=p*m+w-3,O(B,F[l],x?x[l]:1),l=(p+1)*m+w-3,O(B,F[l],x?x[l]:1),h[p*m+w]=L(B);h[p*m+w+1]=h[p*m+w]}for(F=0;F<m;F++)h[F]=h[m+F]=h[2*m+F],h[(v-1)*m+F]=h[(v-2)*m+F];n.updateStatistics();return n}function L(h){if(0===h.size)return 0;let n=0,m=-1,v=0;
const t=h.keys();let x=t.next();for(;!x.done;)v=h.get(x.value),v>n&&(m=x.value,n=v),x=t.next();return m}function O(h,n,m){0!==m&&(m=h.get(n),1===m?h.delete(n):h.set(n,m-1))}function M(h,n,m){0!==m&&h.set(n,h.has(n)?h.get(n)+1:1)}function C(h,n,m){let {x:v,y:t}=n;const {width:x,height:F}=m;if(0===v&&0===t&&F===h.height&&x===h.width)return h;const {width:w,height:l}=h;n=Math.max(0,t);const p=Math.max(0,v),B=Math.min(v+x,w),G=Math.min(t+F,l);if(0>B||0>G||!z(h))return null;v=Math.max(0,-v);t=Math.max(0,
-t);const {pixels:g,mask:b}=h;var k=x*F,r=g.length;const c=[];for(var a=0;a<r;a++){var e=g[a],f=S.createEmptyBand(h.pixelType,k);for(let d=n;d<G;d++){const u=d*w;let E=(d+t-n)*x+v;for(let A=p;A<B;A++)f[E++]=e[u+A]}c.push(f)}k=new Uint8Array(k);for(r=n;r<G;r++)for(a=r*w,e=(r+t-n)*x+v,f=p;f<B;f++)k[e++]=b?b[a+f]:1;h=new S({width:m.width,height:m.height,pixelType:h.pixelType,pixels:c,mask:k});h.updateStatistics();return h}function y(h,n=!0){if(!z(h))return null;const {pixels:m,width:v,height:t,mask:x,
pixelType:F}=h;h=[];const w=Math.round(v/2),l=Math.round(t/2),p=t-1,B=v-1;for(var G=0;G<m.length;G++){var g=m[G],b=S.createEmptyBand(F,w*l),k=0;for(var r=0;r<t;r+=2)for(var c=0;c<v;c+=2){var a=g[r*v+c];if(n){var e=c===B?a:g[r*v+c+1];const f=r===p?a:g[r*v+c+v],d=c===B?f:r===p?e:g[r*v+c+v+1];b[k++]=(a+e+f+d)/4}else b[k++]=a}h.push(b)}G=null;if(x)for(G=new Uint8Array(w*l),g=0,b=0;b<t;b+=2)for(k=0;k<v;k+=2)r=x[b*v+k],n?(c=k===B?r:x[b*v+k+1],a=b===p?r:x[b*v+k+v],e=k===B?a:b===p?c:x[b*v+k+v+1],G[g++]=r*
c*a*e?1:0):G[g++]=r;return new S({width:w,height:l,pixelType:F,pixels:h,mask:G})}const z=function(h){return h&&"esri.layers.support.PixelBlock"===h.declaredClass&&h.pixels&&0<h.pixels.length};Y.approximateTransform=function(h,n,m,v,t="nearest"){if(!z(h))return null;"majority"===t&&(h=J(h));const {pixels:x,mask:F,pixelType:w}=h,l=h.width;var p=h.height;h=S.getPixelArrayConstructor(w);var B=x.length;const {width:G,height:g}=n;n=v.cols;var b=v.rows;const k=Math.ceil(G/n),r=Math.ceil(g/b);v=!1;for(var c=
0;c<m.length;c+=3)-1===m[c]&&-1===m[c+1]&&-1===m[c+2]&&(v=!0);let a,e,f,d,u,E;const A=new Float32Array(G*g),D=new Float32Array(G*g);c=0;let H,N;const I="majority"===t?0:.5;for(let U=0;U<r;U++)for(let T=0;T<k;T++){a=12*(U*k+T);t=m[a];e=m[a+1];f=m[a+2];d=m[a+3];u=m[a+4];E=m[a+5];for(var K=0;K<b;K++){c=(U*b+K)*G+T*n;N=(K+.5)/b;for(var P=0;P<K;P++)H=(P+.5)/n,A[c+P]=Math.round((t*H+e*N+f)*l-I),D[c+P]=Math.round((d*H+u*N+E)*p-I)}a+=6;t=m[a];e=m[a+1];f=m[a+2];d=m[a+3];u=m[a+4];E=m[a+5];for(K=0;K<b;K++)for(c=
(U*b+K)*G+T*n,N=(K+.5)/b,P=K;P<n;P++)H=(P+.5)/n,A[c+P]=Math.round((t*H+e*N+f)*l-I),D[c+P]=Math.round((d*H+u*N+E)*p-I)}m=(U,T)=>{for(let Z=0;Z<g;Z++){a=Z*G;for(let W=0;W<G;W++)U[a]=0>A[a]||0>D[a]?0:T[A[a]+D[a]*l],a++}};p=[];for(b=0;b<B;b++)n=new h(G*g),m(n,x[b]),p.push(n);h=new S({width:G,height:g,pixelType:w,pixels:p});if(F)h.mask=new Uint8Array(G*g),m(h.mask,F);else if(v)for(h.mask=new Uint8Array(G*g),B=0;B<G*g;B++)h.mask[B]=0>A[B]||0>D[B]?0:1;h.updateStatistics();return h};Y.clip=C;Y.colorize=function(h,
n){if(!z(h)||!n&&(n.indexedColormap||n.indexed2DColormap))return h;const m=h.clone();var v=m.pixels;let t=m.mask;const x=m.width*m.height;if(1!==v.length)return h;const {indexedColormap:F,indexed2DColormap:w,offset:l,alphaSpecified:p}=n;n=F.length-1;h=0;v=v[0];const B=new Uint8Array(v.length),G=new Uint8Array(v.length),g=new Uint8Array(v.length);let b=0;if(F)if(t)for(h=0;h<x;h++)t[h]&&(b=4*(v[h]-l),b<l||b>n?t[h]=0:(B[h]=F[b],G[h]=F[b+1],g[h]=F[b+2],t[h]=F[b+3]));else{t=new Uint8Array(x);for(h=0;h<
x;h++)b=4*(v[h]-l),b<l||b>n?t[h]=0:(B[h]=F[b],G[h]=F[b+1],g[h]=F[b+2],t[h]=F[b+3]);m.mask=t}else if(t)for(h=0;h<x;h++)t[h]&&(n=w[v[h]],B[h]=n[0],G[h]=n[1],g[h]=n[2],t[h]=n[3]);else{t=new Uint8Array(x);for(h=0;h<x;h++)n=w[v[h]],B[h]=n[0],G[h]=n[1],g[h]=n[2],t[h]=n[3];m.mask=t}m.pixels=[B,G,g];m.statistics=null;m.pixelType="u8";m.maskIsAlpha=p;return m};Y.createColormapLUT=function(h){if(h){var n=h.colormap;if(n&&0!==n.length){n=n.sort((p,B)=>p[0]-B[0]);var m=0;0>n[0][0]&&(m=n[0][0]);var v=Math.max(256,
n[n.length-1][0]-m+1),t=new Uint8Array(4*v),x=[],F=0,w=0,l=5===n[0].length;if(65536<v)return n.forEach(p=>{x[p[0]-m]=l?p.slice(1):p.slice(1).concat([255])}),{indexed2DColormap:x,offset:m,alphaSpecified:l};if(h.fillUnspecified)for(h=n[w],F=h[0]-m;F<v;F++)t[4*F]=h[1],t[4*F+1]=h[2],t[4*F+2]=h[3],t[4*F+3]=l?h[4]:255,F===h[0]-m&&(h=w===n.length-1?h:n[++w]);else for(F=0;F<n.length;F++)h=n[F],w=4*(h[0]-m),t[w]=h[1],t[w+1]=h[2],t[w+2]=h[3],t[w+3]=l?h[4]:255;return{indexedColormap:t,offset:m,alphaSpecified:l}}}};
Y.createContrastBrightnessLUT=Q;Y.createStretchLUT=function(h){const {minCutOff:n,maxCutOff:m,gamma:v,pixelType:t}=h,x=h.outMin||0,F=h.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(t))return null;const w=n.length;let l;let p=0;"s8"===t?p=-127:"s16"===t&&(p=-32767);let B=256;-1<["u16","s16"].indexOf(t)&&(B=65536);const G=[],g=F-x;for(l=0;l<w;l++)G[l]=m[l]-n[l];var b=v&&v.length>=w;const k=[];if(b)for(l=0;l<w;l++)k[l]=1<v[l]?2<v[l]?6.5+Math.pow(v[l]-2,2.5):6.5+100*Math.pow(2-v[l],4):1;let r;const c=
[];let a,e,f;if(b)for(l=0;l<w;l++){f=[];for(b=0;b<B;b++)a=b+p,r=(a-n[l])/G[l],e=1,1<v[l]&&(e-=Math.pow(1/g,r*k[l])),f[b]=a<m[l]&&a>n[l]?Math.floor(e*g*Math.pow(r,1/v[l]))+x:a>=m[l]?F:x;c[l]=f}else for(l=0;l<w;l++){f=[];for(b=0;b<B;b++)a=b+p,f[b]=a<=n[l]?x:a>=m[l]?F:Math.floor((a-n[l])/G[l]*g)+x;c[l]=f}if(null!=h.contrastOffset)for(h=Q(h.contrastOffset,h.brightnessOffset),l=0;l<w;l++)for(f=c[l],b=0;b<B;b++)f[b]=h[f[b]];return{lut:c,offset:p}};Y.estimateStatisticsFromHistograms=function(h){const n=
[];for(let x=0;x<h.length;x++){const {min:F,max:w,size:l,counts:p}=h[x];let B=0;var m=0;for(var v=0;v<l;v++)B+=p[v],m+=v*p[v];m/=B;v=0;for(var t=0;t<l;t++)v+=p[t]*Math.pow(t-m,2);t=(w-F)/l;n.push({min:F,max:w,avg:(m+.5)*t+F,stddev:Math.sqrt(v/(B-1))*t})}return n};Y.estimateStatisticsHistograms=function(h){if(!z(h))return null;h.statistics||h.updateStatistics();const {pixels:n,mask:m,pixelType:v,statistics:t}=h;h=h.width*h.height;const x=n.length;let F,w;let l;var p;const B=[],G=[];for(l=0;l<x;l++){var g=
new Uint32Array(256);var b=n[l];if("u8"===v)if(F=-.5,w=255.5,m)for(p=0;p<h;p++)m[p]&&g[b[p]]++;else for(p=0;p<h;p++)g[b[p]]++;else{F=t[l].minValue;w=t[l].maxValue;var k=(w-F)/256;var r=new Uint32Array(257);if(m)for(p=0;p<h;p++)m[p]&&r[Math.floor((b[p]-F)/k)]++;else for(p=0;p<h;p++)r[Math.floor((b[p]-F)/k)]++;for(p=0;255>p;p++)g[p]=r[p];g[255]=r[255]+r[256]}B.push({min:F,max:w,size:256,counts:g});for(p=b=r=k=0;256>p;p++)k+=g[p],r+=p*g[p];r/=k;for(p=0;256>p;p++)b+=g[p]*Math.pow(p-r,2);g=Math.sqrt(b/
(k-1));k=(w-F)/256;p=(r+.5)*k+F;g*=k;G.push({min:F,max:w,avg:p,stddev:g})}return{statistics:G,histograms:B}};Y.extractBands=function(h,n){if(!n||!z(h))return h;const m=h.pixels.length;return n&&n.some(v=>v>=m)||1===m&&1===n.length&&0===n[0]||m===n.length&&!n.some((v,t)=>v!==t)?h:new S({pixelType:h.pixelType,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:n.map(v=>h.pixels[v]),statistics:h.statistics&&n.map(v=>h.statistics[v])})};Y.getClipBounds=
R;Y.lookupPixels=function(h,n){if(!z(h))return null;const {pixels:m,mask:v}=h,t=h.width*h.height,x=m.length;let F=n.lut;({offset:n}=n);let w,l;F&&1===F[0].length&&(F=m.map(()=>F));const p=[];let B,G,g;if(n)if(null==v)for(w=0;w<x;w++){B=m[w];G=F[w];g=new Uint8Array(t);for(l=0;l<t;l++)g[l]=G[B[l]-n];p.push(g)}else for(w=0;w<x;w++){B=m[w];G=F[w];g=new Uint8Array(t);for(l=0;l<t;l++)v[l]&&(g[l]=G[B[l]-n]);p.push(g)}else if(null==v)for(w=0;w<x;w++){B=m[w];G=F[w];g=new Uint8Array(t);for(l=0;l<t;l++)g[l]=
G[B[l]];p.push(g)}else for(w=0;w<x;w++){B=m[w];G=F[w];g=new Uint8Array(t);for(l=0;l<t;l++)v[l]&&(g[l]=G[B[l]]);p.push(g)}h=new S({width:h.width,height:h.height,pixels:p,mask:v,pixelType:"u8"});h.updateStatistics();return h};Y.mosaic=q;Y.mosaicPixelData=function(h,n){if(!h||0===h.length)return null;var m=h.filter(G=>G.pixelBlock)[0];if(!m)return null;var v=(m.extent.xmax-m.extent.xmin)/m.pixelBlock.width;const t=(m.extent.ymax-m.extent.ymin)/m.pixelBlock.height,x=.01*Math.min(v,t),F=h.sort((G,g)=>
Math.abs(G.extent.ymax-g.extent.ymax)>x?g.extent.ymax-G.extent.ymax:Math.abs(G.extent.xmin-g.extent.xmin)>x?G.extent.xmin-g.extent.xmin:0);var w=Math.min.apply(null,F.map(G=>G.extent.xmin));const l=Math.min.apply(null,F.map(G=>G.extent.ymin)),p=Math.max.apply(null,F.map(G=>G.extent.xmax)),B=Math.max.apply(null,F.map(G=>G.extent.ymax));h={x:Math.round((n.xmin-w)/v),y:Math.round((B-n.ymax)/t)};w={width:Math.round((p-w)/v),height:Math.round((B-l)/t)};v={width:Math.round((n.xmax-n.xmin)/v),height:Math.round((n.ymax-
n.ymin)/t)};if(Math.round(w.width/m.pixelBlock.width)*Math.round(w.height/m.pixelBlock.height)!==F.length||0>h.x||0>h.y||w.width<v.width||w.height<v.height)return null;m=F.map(G=>G.pixelBlock);m=q(m,w,h,v);return{extent:n,pixelBlock:m}};Y.remapColor=function(h,n){if(!z(h))return null;h=h.clone();var {pixels:m}=h;const v=h.width*h.height,t=n.length,x=Math.floor(t/2),F=n[Math.floor(x)];m=m[0];let w,l,p,B,G,g,b=!1;const k=new Uint8Array(v),r=new Uint8Array(v),c=new Uint8Array(v);let a=h.mask;const e=
4===n[0].mappedColor.length;a||(a=new Uint8Array(v),a.fill(e?255:1),h.mask=a);for(G=0;G<v;G++)if(a[G]){w=m[G];b=!1;g=x;l=F;p=0;for(B=t-1;1<B-p;){if(w===l.value){b=!0;break}w>l.value?p=g:B=g;g=Math.floor((p+B)/2);l=n[Math.floor(g)]}b||(w===n[p].value?(l=n[p],b=!0):w===n[B].value?(l=n[B],b=!0):w<n[p].value?(b=!1,l=null):w>n[p].value&&(w<n[B].value?(l=n[p],b=!0):B===t-1?(b=!1,l=null):(l=n[B],b=!0)));b?(k[G]=l.mappedColor[0],r[G]=l.mappedColor[1],c[G]=l.mappedColor[2],a[G]=l.mappedColor[3]):k[G]=r[G]=
c[G]=a[G]=0}h.pixels=[k,r,c];h.mask=a;h.pixelType="u8";h.maskIsAlpha=e;return h};Y.resampleByMajority=J;Y.setValidBoundary=function(h,n,m){if(!z(h))return null;const {width:v,height:t}=h,x=n.x;n=n.y;const F=m.width+x;m=m.height+n;if(0>x||0>n||F>v||m>t||0===x&&0===n&&F===v&&m===t)return h;h.mask||(h.mask=new Uint8Array(v*t));const w=h.mask;for(let l=0;l<t;l++){const p=l*v;for(let B=0;B<v;B++)w[p+B]=l<n||l>=m||B<x||B>=F?0:1}h.updateStatistics();return h};Y.split=function(h,n,m){if(!z(h))return null;
const {width:v,height:t}=n;let {width:x,height:F}=h;const w=new Map,l={x:0,y:0};m=null==m?1:1+m;for(let p=0;p<m;p++){const B=Math.ceil(x/v),G=Math.ceil(F/t);for(let g=0;g<G;g++){l.y=g*t;for(let b=0;b<B;b++){l.x=b*v;const k=C(h,l,n);w.set(`${p}/${g}/${b}`,k)}}p<m-1&&(h=y(h));x=Math.round(x/2);F=Math.round(F/2)}return w};Y.stretch=function(h,n){if(!z(h))return null;h=h.clone();const {pixels:m,mask:v}=h,{minCutOff:t,maxCutOff:x,gamma:F}=n,w=n.outMin||0;n=n.outMax||255;const l=h.width*h.height,p=m.length;
let B;let G,g,b;const k=n-w,r=[];for(B=0;B<p;B++)r[B]=x[B]-t[B];var c=F&&F.length>=p;const a=[];if(c)for(B=0;B<p;B++)a[B]=1<F[B]?2<F[B]?6.5+Math.pow(F[B]-2,2.5):6.5+100*Math.pow(2-F[B],4):1;if(c)if(null!=v)for(c=0;c<l;c++){if(v[c])for(B=0;B<p;B++)G=m[B][c],b=(G-t[B])/r[B],g=1,1<F[B]&&(g-=Math.pow(1/k,b*a[B])),m[B][c]=G<x[B]&&G>t[B]?Math.floor(g*k*Math.pow(b,1/F[B]))+w:G>=x[B]?n:w}else for(c=0;c<l;c++)for(B=0;B<p;B++)G=m[B][c],b=(G-t[B])/r[B],g=1,1<F[B]&&(g-=Math.pow(1/k,b*a[B])),m[B][c]=G<x[B]&&G>
t[B]?Math.floor(g*k*Math.pow(b,1/F[B]))+w:G>=x[B]?n:w;else if(null!=v)for(c=0;c<l;c++){if(v[c])for(B=0;B<p;B++)G=m[B][c],m[B][c]=G<x[B]&&G>t[B]?Math.floor((G-t[B])/r[B]*k)+w:G>=x[B]?n:w}else for(c=0;c<l;c++)for(B=0;B<p;B++)G=m[B][c],m[B][c]=G<x[B]&&G>t[B]?Math.floor((G-t[B])/r[B]*k)+w:G>=x[B]?n:w;h.pixelType="u8";h.updateStatistics();return h};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(Y,S,Q,R,q,J,L,O,M,C,y,z,h,n,m,v,t,x){function F(B,G){const {attributeTable:g,bandCount:b}=B;return!R.isSome(g)||1<b||G&&null==g.fields.find(k=>k.name.toLowerCase()===G.toLowerCase())?!1:!0}function w(B){const {bandCount:G,colormap:g}=B;return R.isSome(g)&&g.length&&1===G}const l=q.getLogger("esri.renderers.support.RasterSymbolizer"),p={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};Q=function(B){function G(b){return B.call(this,b)||this}Y._inheritsLoose(G,B);var g=G.prototype;g.bind=function(){const {rendererJSON:b}=this;if(!b)return!1;this.lookup={rendererJSON:{}};let k;switch(b.type){case "uniqueValue":k=this._updateUVRenderer(b);break;case "rasterColormap":k=this._updateColormapRenderer(b);break;case "rasterStretch":k=this._updateStretchRenderer(b);break;case "classBreaks":k=this._updateClassBreaksRenderer(b);break;case "rasterShadedRelief":k=
this._updateShadedReliefRenderer(b)}return k};g.symbolize=function(b){let k=b&&b.pixelBlock;if(!this.isValidPixelBlock(k))return k;if(b.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(k,b.simpleStretchParams);try{3<k.pixels.length&&(k=t.extractBands(k,[0,1,2]));let r;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":r=this._symbolize_colormap(k);break;case "classBreaks":r=this._symbolize_classBreaks(k);break;case "rasterStretch":r=this._symbolize_stretch(k,
b.bandIds);break;case "rasterShadedRelief":({extent:b}=b),r=this._symbolize_shadedRelief(k,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/k.width,y:(b.ymax-b.ymin)/k.height}})}return r}catch(r){return l.error("symbolize",r.message),k}};g.simpleStretch=function(b,k){if(!this.isValidPixelBlock(b))return b;try{return 3<b.pixels.length&&(b=t.extractBands(b,[0,1,2])),t.stretch(b,k)}catch(r){return l.error("symbolize",r.message),b}};g.generateWebGLParameters=function(b){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){const {indexedColormap:e,offset:f}=this.lookup.colormapLut;return{colormap:e,colormapOffset:f,type:"lut"}}const {pixelBlock:k,isGCS:r,resolution:c,bandIds:a}=b;({rendererJSON:b}=this);return"rasterStretch"===b.type?this.generateStretchWebGLParams(k,b,a):"rasterShadedRelief"===b.type?this.generateShadedReliefWebGLParams(b,r,c):null};g._isLUTChanged=function(b){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const k=
this.rendererJSON.colorRamp;if(b)return JSON.stringify(k)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};g._symbolize_colormap=function(b){return this._isLUTChanged()&&!this.bind()?b:t.colorize(b,this.lookup.colormapLut)};g._symbolize_classBreaks=function(b){const k=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?b:k?t.colorize(b,this.lookup.colormapLut):
t.remapColor(b,this.lookup.remapLut)};g._symbolize_stretch=function(b,k){const {pixelType:r,bandCount:c}=this.rasterInfo,a=this.rendererJSON;var e=-1<["u8","u16","s8","s16"].indexOf(r);let f;const {gamma:d,useGamma:u}=a;if(e){var E;if(a.dra)e=this.getStretchCutoff(a,b,k),f=t.createStretchLUT({pixelType:r,...e,gamma:u?d:null});else{if(this._isLUTChanged()&&!this.bind())return b;f=this.lookup?this.lookup.stretchLut:null}if(!f)return b;1<c&&(null==k?void 0:k.length)===b.pixels.length&&(null==(E=f)?void 0:
E.lut.length)===c&&(f={lut:k.map(A=>f.lut[A]),offset:f.offset});k=t.lookupPixels(b,f)}else k=this.getStretchCutoff(a,b,k),k=t.stretch(b,{...k,gamma:u?d:null});if(a.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return b;k=t.colorize(k,this.lookup.colormapLut)}return k};g._symbolize_shadedRelief=function(b,k){var r,c,a=this.rendererJSON;k=x.hillshade(b,{...a,...k});if(!a.colorRamp||this._isLUTChanged(!0)&&!this.bind())return k;a=this.lookup?this.lookup.hsvMap:null;if(!a)return k;const e=null!=
(r=null==(c=R.unwrap(this.rasterInfo.statistics))?void 0:c[0])?r:{min:0,max:8E3};x.tintHillshade(k,b,a,e);return k};g._updateUVRenderer=function(b){const {bandCount:k,attributeTable:r,statistics:c,pixelType:a}=this.rasterInfo,e=b.field1;if(!e)return!1;var f=-1<["u8","s8"].indexOf(a)&&c&&null!=c[0].min&&null!=c[0].max;if(!(F(this.rasterInfo,e)||1===k&&f))return!1;const d=[];if(r){const u=r.fields.filter(E=>"value"===E.name.toLowerCase())[0];if(!u)return!1;r.features.forEach(E=>{var A,D=b.uniqueValueInfos.filter(H=>
String(H.value)===String(E.attributes[e]))[0];(D=null==D?void 0:null==(A=D.symbol)?void 0:A.color)&&d.push([E.attributes[u.name]].concat(D))})}else{if("value"!==e.toLowerCase())return!1;b.uniqueValueInfos.forEach(u=>{var E;const A=null==u?void 0:null==(E=u.symbol)?void 0:E.color;A&&d.push([parseInt(""+u.value,10)].concat(A))})}if(0===d.length)return!1;f=t.createColormapLUT({colormap:d});this.lookup={rendererJSON:b,colormapLut:f};return this.canRenderInWebGL=!0};g._updateColormapRenderer=function(b){if(!w(this.rasterInfo))return!1;
var k=b.colormapInfos.map(r=>[r.value].concat(r.color)).sort((r,c)=>r[0]-c[0]);if(!k||0===k.length)return!1;k=t.createColormapLUT({colormap:k});this.lookup={rendererJSON:b,colormapLut:k};return this.canRenderInWebGL=!0};g._updateShadedReliefRenderer=function(b){if("elevation"!==this.rasterInfo.dataType)return!1;if(b.colorRamp){var k=m.convertColorRampToColormap(b.colorRamp,256,!0);k=t.createColormapLUT({colormap:k});const r=[],c=k.indexedColormap;for(let a=0;a<c.length;a+=4){const e=n.toHSV({r:c[a],
g:c[a+1],b:c[a+2]});r.push([e.h/60,e.s/100,255*e.v/100])}this.lookup={rendererJSON:b,colormapLut:k,hsvMap:r}}else this.lookup=null;return this.canRenderInWebGL=!0};g._updateClassBreaksRenderer=function(b){var k=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),r=b.classBreakInfos;if(null==r||!r.length)return!1;r=r.sort((d,u)=>d.classMaxValue-u.classMaxValue);const c=r[r.length-1];var a=b.minValue;if(!k){k=[];for(var e=0;e<r.length;e++){var f;k.push({value:null!=(f=r[e].classMinValue)?
f:a,mappedColor:r[e].symbol.color});a=r[e].classMaxValue}k.push({value:c.classMaxValue,mappedColor:c.symbol.color});this.lookup={rendererJSON:b,remapLut:k};this.canRenderInWebGL=!1;return!0}f=[];a=b.minValue;for(k=0;k<r.length;k++){for(e=r[k];a<e.classMaxValue;a++)f.push([a].concat(e.symbol.color));a=e.classMaxValue}f.push([c.classMaxValue].concat(c.symbol.color));r=t.createColormapLUT({colormap:f,fillUnspecified:!1});this.lookup={rendererJSON:b,colormapLut:r};return this.canRenderInWebGL=!0};g._updateStretchRenderer=
function(b){if(!("none"===b.stretchType||b.statistics||this.rasterInfo.statistics||b.dra))return!1;var k=b.histograms||this.rasterInfo.histograms;if(!b.dra&&"percentClip"===b.stretchType&&!k)return!1;const {gamma:r,useGamma:c,colorRamp:a}=b;k=this.rasterInfo.pixelType;if(!b.dra&&-1<["u8","u16","s8","s16"].indexOf(k)){const e=this.getStretchCutoff(b);k=t.createStretchLUT({pixelType:k,...e,gamma:c?r:null});this.lookup={rendererJSON:b,stretchLut:k}}a&&(k=m.convertColorRampToColormap(a,256,!0),this.lookup||
(this.lookup={rendererJSON:b}),this.lookup.colormapLut=t.createColormapLUT({colormap:k}),this.lookup.rendererJSON=b);return this.canRenderInWebGL=!0};g.getStretchCutoff=function(b,k,r){var c=b.stretchType;if(b.dra)if("minMax"===c&&k.statistics)var a=k.statistics.map(N=>[N.minValue,N.maxValue,0,0]);else{var e=t.estimateStatisticsHistograms(k);a=e.statistics;e=e.histograms}else{var f;a=0<(null==(f=b.statistics)?void 0:f.length)?b.statistics:R.unwrap(this.rasterInfo.statistics);e=b.histograms||R.unwrap(this.rasterInfo.histograms)}var d=
a||e?(a||e).length:this.rasterInfo.bandCount;f=[];k=[];let u;let E,A,D;a&&!Array.isArray(a[0])&&(a=a.map(N=>[N.min,N.max,N.avg,N.stddev]));switch(c){case "none":e=p[this.rasterInfo.pixelType]||p.f32;for(c=0;c<d;c++)f[c]=e[0],k[c]=e[1];break;case "minMax":for(c=0;c<d;c++)f[c]=a[c][0],k[c]=a[c][1];break;case "standardDeviation":for(c=0;c<d;c++)f[c]=a[c][2]-b.numberOfStandardDeviations*a[c][3],k[c]=a[c][2]+b.numberOfStandardDeviations*a[c][3],f[c]<a[c][0]&&(f[c]=a[c][0]),k[c]>a[c][1]&&(k[c]=a[c][1]);
break;case "percentClip":for(c=0;c<e.length;c++){a=e[c];E=new Uint32Array(a.size);var H=a.counts;u=0;d=(a.max-a.min)/a.size;A=-.5===a.min&&1===d?.5:0;for(D=0;D<a.size;D++)u+=H[D],E[D]=u;H=b.minPercent*u/100;for(D=0;D<a.size;D++)if(E[D]>H){f[c]=a.min+d*(D+A);break}H=(1-b.maxPercent/100)*u;for(D=a.size-2;0<=D;D--)if(E[D]<H){k[c]=a.min+d*(D+2-A);break}}break;default:for(c=0;c<d;c++)f[c]=a[c][0],k[c]=a[c][1]}return this.getSelectedBandCutoffs({minCutOff:f,maxCutOff:k,outMax:b.max||255,outMin:b.min||0},
r)};g.getSelectedBandCutoffs=function(b,k){if(null==k||0===k.length)return b;const r=Math.max.apply(null,k),{minCutOff:c,maxCutOff:a,outMin:e,outMax:f}=b;return c.length===k.length||c.length<=r?b:{minCutOff:k.map(d=>c[d]),maxCutOff:k.map(d=>a[d]),outMin:e,outMax:f}};g.generateStretchWebGLParams=function(b,k,r){let c=null,a=null;var e=this.lookup&&this.lookup.colormapLut;k.colorRamp&&e&&(c=e.indexedColormap,a=e.offset);({gamma:e}=k);const f=!!(k.useGamma&&e&&e.some(N=>1!==N)),{minCutOff:d,maxCutOff:u,
outMin:E,outMax:A}=this.getStretchCutoff(k,b,r);b&&b.pixels&&2===b.pixels.length&&(b=b.clone(),b.statistics=[b.statistics[0]],b.pixels=[b.pixels[0]]);b=Math.min(3,r&&r.length||b&&b.getPlaneCount()||this.rasterInfo.bandCount);k=new Float32Array(b);r=c||f?1:255;let D;for(D=0;D<b;D++)k[D]=(A-E)/(u[D]-d[D])/r;const H=new Float32Array(b);if(f)for(D=0;D<b;D++)H[D]=1<e[D]?2<e[D]?6.5+Math.pow(e[D]-2,2.5):6.5+100*Math.pow(2-e[D],4):1;return{bandCount:b,outMin:E/r,outMax:A/r,minCutOff:d,maxCutOff:u,factor:k,
useGamma:f,gamma:f?e:[1,1,1],gammaCorrection:f?H:[1,1,1],colormap:c,colormapOffset:a,type:"stretch"}};g.generateShadedReliefWebGLParams=function(b,k,r){var c,a,e;let f=null,d=null;const u=this.lookup&&this.lookup.colormapLut;b.colorRamp&&u&&(f=u.indexedColormap,d=u.offset);k=x.calculateHillshadeParams({...b,isGCS:k,resolution:r});r=null==(c=R.unwrap(this.rasterInfo.statistics))?void 0:c[0];return{...k,minValue:null!=(a=r.min)?a:0,maxValue:null!=(e=r.max)?e:8E3,hillshadeType:"traditional"===b.hillshadeType?
0:1,type:"hillshade",colormap:f,colormapOffset:d}};g.isValidPixelBlock=function(b){return!!(b&&b.pixels&&0<b.pixels.length&&0!==b.validPixelCount)};return G}(h.JSONSupport);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"rendererJSON",void 0);S.__decorate([L.property({type:v,json:{write:!0}})],Q.prototype,"rasterInfo",void 0);S.__decorate([L.property({json:{write:!0}})],Q.prototype,"lookup",void 0);S.__decorate([L.property({})],Q.prototype,"canRenderInWebGL",void 0);return Q=S.__decorate([M.subclass("esri.renderers.support.RasterSymbolizer")],
Q)})},"esri/core/colorUtils":function(){define(["exports"],function(Y){function S(C,y){const z=[];let h,n;if(C[0].length!==y.length)throw"dimensions do not match";const m=C.length,v=C[0].length;let t=0;for(h=0;h<m;h++){for(n=t=0;n<v;n++)t+=C[h][n]*y[n];z.push(t)}return z}function Q(C){C=[C.r/255,C.g/255,C.b/255].map(y=>.04045>=y?y/12.92:Math.pow((y+.055)/1.055,2.4));C=S(O,C);return{x:100*C[0],y:100*C[1],z:100*C[2]}}function R(C){C=S(M,[C.x/100,C.y/100,C.z/100]).map(y=>Math.min(1,Math.max(.0031308>=
y?12.92*y:1.055*Math.pow(y,1/2.4)-.055,0)));return{r:Math.round(255*C[0]),g:Math.round(255*C[1]),b:Math.round(255*C[2])}}function q(C){C=[C.x/95.047,C.y/100,C.z/108.883].map(y=>y>Math.pow(6/29,3)?Math.pow(y,1/3):1/3*Math.pow(29/6,2)*y+4/29);return{l:116*C[1]-16,a:500*(C[0]-C[1]),b:200*(C[1]-C[2])}}function J(C){const y=C.l;C=[(y+16)/116+C.a/500,(y+16)/116,(y+16)/116-C.b/200].map(z=>z>6/29?Math.pow(z,3):3*Math.pow(6/29,2)*(z-4/29));return{x:95.047*C[0],y:100*C[1],z:108.883*C[2]}}function L(C){if("r"in
C&&"g"in C&&"b"in C)return C;if("l"in C&&"c"in C&&"h"in C){var y=C.c;var z=C.h;y={l:C.l,a:y*Math.cos(z),b:y*Math.sin(z)};return R(J(y))}if("l"in C&&"a"in C&&"b"in C)return R(J(C));if("x"in C&&"y"in C&&"z"in C)return R(C);if("h"in C&&"s"in C&&"v"in C){{z=(C.h+360)%360/60;y=C.v/100*255;C=C.s/100*y;const h=C*(1-Math.abs(z%2-1));switch(Math.floor(z)){case 0:z={r:C,g:h,b:0};break;case 1:z={r:h,g:C,b:0};break;case 2:z={r:0,g:C,b:h};break;case 3:z={r:0,g:h,b:C};break;case 4:z={r:h,g:0,b:C};break;case 5:case 6:z=
{r:C,g:0,b:h};break;default:z={r:0,g:0,b:0}}z.r=Math.round(z.r+y-C);z.g=Math.round(z.g+y-C);z.b=Math.round(z.b+y-C);y=z}return y}return C}const O=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],M=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];Y.darken=function(C,y){C=q(Q(C));C.l*=1-y;return R(J(C))};Y.toHSV=function(C){if("h"in C&&"s"in C&&"v"in C)return C;var y=L(C);{C=y.r;const z=y.g,h=y.b;y=Math.max(C,z,h);const n=y-Math.min(C,z,h);C=0===n?0:y===C?(z-h)/n%6:y===
z?(h-C)/n+2:(C-z)/n+4;0>C&&(C+=6);C={h:60*C,s:100*(0===n?0:n/y),v:100/255*y}}return C};Y.toLAB=function(C){return"l"in C&&"a"in C&&"b"in C?C:q(Q(L(C)))};Y.toLCH=function(C){if(!("l"in C&&"c"in C&&"h"in C)){{var y=q(Q(L(C)));C=y.l;var z=y.a;const h=y.b;y=Math.sqrt(z*z+h*h);z=Math.atan2(h,z);z=0<z?z:z+2*Math.PI;C={l:C,c:y,h:z}}}return C};Y.toRGB=L;Y.toXYZ=function(C){return"x"in C&&"y"in C&&"z"in C?C:Q(L(C))};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(Y,S,Q){function R(O,M){if(!O||!M||O.length!==M.length)return!1;for(let C=0;C<O.length;C++)if(O[C]>M[C]+2||O[C]<M[C]-2)return!1;return!0}function q(O,M){if(O){M=M?M:J;var C=null,y;"algorithmic"===O.type?M.some(z=>{if(R(O.fromColor.toRgb(),z.fromColor)&&R(O.toColor.toRgb(),z.toColor))return C=z.id,!0}):"multipart"===O.type&&M.some(z=>{if(O.colorRamps&&z.colorRamps&&O.colorRamps.length===z.colorRamps.length&&(y=O.colorRamps,!z.colorRamps.some((h,n)=>{if(!R(y[n].fromColor.toRgb(),
(new S(h.fromColor)).toRgb())||!R(y[n].toColor.toRgb(),(new S(h.toColor)).toRgb()))return!0}))){if(C)return!0;C=z.id}});return C}}const J=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},
{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",
fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",
type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,
240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,
255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",
fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",
type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",
type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,
102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",
fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,
213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},
{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",
colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},
{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,
255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,
252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],L={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",
brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",
greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",
precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",
redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",
surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};Y.PREDEFINED_COLOR_RAMP_NAME_MAP=L;Y.PREDEFINED_JSON_COLOR_RAMPS=J;Y.convertColorRampToColormap=function(O,M,C=!1){if(O&&M&&!(2>
M)){var y="toJSON"in O?O.toJSON():O,z="multipart"===y.type?y.colorRamps.length:1;O=[];var h=[],n,m,v,t,x=0;for(let w=0;w<z;w++)O[w]={start:null,end:null},O[w].start=x,O[w].end=x+1/z,x=O[w].end;for(let w=0;w<M;w++){var F=w/(M-1);O.forEach((l,p)=>{if(F>=l.start&&(F<l.end||w===M-1&&p===z-1)){t=(F-l.start)/(l.end-l.start);"multipart"===y.type?(n=y.colorRamps[p].fromColor,m=y.colorRamps[p].toColor):(n=y.fromColor,m=y.toColor);if(0===w)h.push([w].concat(n.slice(0,3)));else if(w===M-1)h.push([w].concat(m.slice(0,
3)));else{var B={r:m[0],g:m[1],b:m[2]};l=t;p=Q.toLAB({r:n[0],g:n[1],b:n[2]});B=Q.toLAB(B);v=Q.toRGB({l:p.l*(1-l)+l*B.l,a:p.a*(1-l)+l*B.a,b:p.b*(1-l)+l*B.b});h.push([w,v.r,v.g,v.b])}l=null!=n[3]?1<n[3]?n[3]/255:n[3]:1;p=null!=m[3]?1<m[3]?m[3]/255:m[3]:1;C&&h[w].push(Math.min(255,Math.round(255*(l*(1-t)+p*t))))}})}return h}};Y.getColorRampId=q;Y.getColorRampName=function(O){return(O=q(O))?L[O]:null};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),
function(Y,S,Q,R,q,J,L,O,M,C,y,z,h){Q=function(n){function m(v){v=n.call(this,v)||this;v.attributeTable=null;v.bandCount=null;v.colormap=null;v.extent=null;v.format=void 0;v.height=null;v.width=null;v.histograms=null;v.keyProperties={};v.multidimensionalInfo=null;v.noDataValue=null;v.pixelSize=null;v.pixelType=null;v.isPseudoSpatialReference=!1;v.spatialReference=null;v.statistics=null;v.storageInfo=null;v.transform=null;return v}Y._inheritsLoose(m,n);Y._createClass(m,[{key:"dataType",get:function(){const v=
this.keyProperties&&this.keyProperties.DataType;return v?v.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(v){v&&this._set("nativeExtent",v)}},{key:"nativePixelSize",get:function(){const v=this.nativeExtent;return{x:v.width/this.width,y:v.height/this.height}}}]);return m}(z.JSONSupport);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"attributeTable",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"bandCount",
void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"colormap",void 0);S.__decorate([J.property({type:String,readOnly:!0})],Q.prototype,"dataType",null);S.__decorate([J.property({type:h,json:{write:!0}})],Q.prototype,"extent",void 0);S.__decorate([J.property({type:h,dependsOn:["extent"],json:{write:!0}})],Q.prototype,"nativeExtent",null);S.__decorate([J.property({dependsOn:["nativeExtent"],json:{write:!0}})],Q.prototype,"nativePixelSize",null);S.__decorate([J.property({json:{write:!0}})],
Q.prototype,"format",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"height",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"width",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"histograms",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"keyProperties",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"multidimensionalInfo",void 0);S.__decorate([J.property()],Q.prototype,"noDataValue",void 0);S.__decorate([J.property({json:{write:!0}})],
Q.prototype,"pixelSize",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"pixelType",void 0);S.__decorate([J.property()],Q.prototype,"isPseudoSpatialReference",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"spatialReference",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"statistics",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"storageInfo",void 0);S.__decorate([J.property({json:{write:!0}})],Q.prototype,"transform",void 0);
return Q=S.__decorate([O.subclass("esri.layers.support.RasterInfo")],Q)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(Y,S){function Q(q){let {altitude:J,azimuth:L}=q;const {hillshadeType:O,pixelSizePower:M,pixelSizeFactor:C,scalingType:y,isGCS:z,resolution:h}=q;var n="multi-directional"===O?2*q.zFactor:q.zFactor;const {x:m,y:v}=h;q=n/(8*m);var t=n/(8*v);z&&.001<n&&(q/=111E3,t/=111E3);"adjusted"===y&&(z?(q=111E3*m,t=111E3*v,q=(n+Math.pow(q,
M)*C)/(8*q),t=(n+Math.pow(t,M)*C)/(8*t)):(q=(n+Math.pow(m,M)*C)/(8*m),t=(n+Math.pow(v,M)*C)/(8*v)));var x=(90-J)*Math.PI/180;n=Math.cos(x);let F=(360-L+90)*Math.PI/180,w=Math.sin(x)*Math.cos(F);x=Math.sin(x)*Math.sin(F);const l=[315,270,225,360,180,0],p=[60,60,60,60,60,90];var B=new Float32Array([3,5,3,2,1,4]);const G=B.reduce((c,a)=>c+a);B=B.map(c=>c/G);const g="multi-directional"===O?l.length:1,b=new Float32Array(6),k=new Float32Array(6),r=new Float32Array(6);if("multi-directional"===O)for(let c=
0;c<g;c++)J=p[c],L=l[c],x=(90-J)*Math.PI/180,n=Math.cos(x),F=(360-L+90)*Math.PI/180,w=Math.sin(x)*Math.cos(F),x=Math.sin(x)*Math.sin(F),b[c]=n,k[c]=w,r[c]=x;else b.fill(n),k.fill(w),r.fill(x);return{resolution:h,factor:[q,t],sinZcosA:w,sinZsinA:x,cosZ:n,sinZcosAs:k,sinZsinAs:r,cosZs:b,weights:B,hillshadeType:["traditional","multi-directional"].indexOf(O)}}const R=function(q){return q&&"esri.layers.support.PixelBlock"===q.declaredClass&&q.pixels&&0<q.pixels.length};Y.calculateHillshadeParams=Q;Y.hillshade=
function(q,J){if(!R(q))return q;const {width:L,height:O,mask:M}=q,C=new Uint8Array(L*O);M&&C.set(M);const {factor:y,sinZcosA:z,sinZsinA:h,cosZ:n,sinZcosAs:m,sinZsinAs:v,cosZs:t,weights:x}=Q(J),[F,w]=y;var {hillshadeType:l}=J;const p=q.pixels[0];J=new Uint8Array(L*O);let B;for(let e=1;e<O-1;e++){const f=e*L;for(let d=1;d<L-1;d++)if(M&&!M[f+d])J[f+d]=0;else{var G=8;if(M&&(G=M[f-L+d-1]+M[f-L+d]+M[f-L+d+1]+M[f+d-1]+M[f+d+1]+M[f+L+d-1]+M[f+L+d]+M[f+L+d+1],7>G)){J[f+d]=0;C[f+d]=0;continue}if(7===G){var g=
M[f-L+d-1]?p[f-L+d-1]:p[f+d];var b=M[f-L+d]?p[f-L+d]:p[f+d];var k=M[f-L+d+1]?p[f-L+d+1]:p[f+d];G=M[f+d-1]?p[f+d-1]:p[f+d];B=M[f+d+1]?p[f+d+1]:p[f+d];var r=M[f+L+d-1]?p[f+L+d-1]:p[f+d];var c=M[f+L+d]?p[f+L+d]:p[f+d];var a=M[f+L+d+1]?p[f+L+d+1]:p[f+d]}else g=p[f-L+d-1],b=p[f-L+d],k=p[f-L+d+1],G=p[f+d-1],B=p[f+d+1],r=p[f+L+d-1],c=p[f+L+d],a=p[f+L+d+1];G=(k+B+B+a-(g+G+G+r))*F;g=(r+c+c+a-(g+b+b+k))*w;b=Math.sqrt(1+G*G+g*g);k=0;if("traditional"===l)G=255*(n+h*g-z*G)/b,0>G&&(G=0),k=G;else for(r=v.length,
c=0;c<r;c++)a=255*(t[c]+v[c]*g-m[c]*G)/b,0>a&&(a=0),k+=a*x[c];J[f+d]=k&255}}for(l=0;l<O;l++)J[l*L]=J[l*L+1],J[(l+1)*L-1]=J[(l+1)*L-2];for(l=1;l<L-1;l++)J[l]=J[l+L],J[l+(O-1)*L]=J[l+(O-2)*L];return new S({width:L,height:O,pixels:[J],mask:M?C:null,pixelType:"u8",validPixelCount:q.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};Y.tintHillshade=function(q,J,L,O){if(R(q)&&R(J)){var {min:M,max:C}=O;O=q.pixels[0];var {pixels:y,mask:z}=J;J=y[0];var h=255.00001/(C-M),n=new Uint8ClampedArray(J.length),
m=new Uint8ClampedArray(J.length),v=new Uint8ClampedArray(J.length),t=L.length-1;for(let w=0;w<J.length;w++){if(z&&0===z[w])continue;var x=Math.floor((J[w]-M)*h);const [l,p]=L[0>x?0:x>t?t:x];var F=O[w];x=F*p;const B=x*(1-Math.abs(l%2-1));F-=x;switch(Math.floor(l)){case 0:n[w]=x+F;m[w]=B+F;v[w]=F;break;case 1:n[w]=B+F;m[w]=x+F;v[w]=F;break;case 2:n[w]=F;m[w]=x+F;v[w]=B+F;break;case 3:n[w]=F;m[w]=B+F;v[w]=x+F;break;case 4:n[w]=B+F;m[w]=F;v[w]=x+F;break;case 5:case 6:n[w]=x+F,m[w]=F,v[w]=B+F}}q.pixels=
[n,m,v];q.updateStatistics()}};Object.defineProperty(Y,"__esModule",{value:!0})})},"*noref":1}});
define("../../core/promiseUtils ../../geometry/Extent ../../geometry ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ../../renderers/support/RasterSymbolizer".split(" "),function(Y,S,Q,R,q,J,L){return function(){function O(){}var M=O.prototype;M.decode=async function(C){return(C=await q.decode(C.data,C.options))&&C.toJSON()};M.symbolize=function(C){C.pixelBlock=R.fromJSON(C.pixelBlock);C.extent=C.extent?S.fromJSON(C.extent):null;C=this.symbolizer.symbolize(C);return Y.resolve(C&&
C.toJSON())};M.updateSymbolizer=async function(C){var y;this.symbolizer=L.fromJSON(C.symbolizerJSON);C.histograms&&"rasterStretch"===(null==(y=this.symbolizer)?void 0:y.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=C.histograms)};M.stretch=function(C){C=this.symbolizer.simpleStretch(R.fromJSON(C.srcPixelBlock),C.stretchParams);return Y.resolve(C&&C.toJSON())};M.estimateStatisticsHistograms=function(C){C=J.estimateStatisticsHistograms(R.fromJSON(C.srcPixelBlock));return Y.resolve(C)};
M.split=function(C){const y=J.split(R.fromJSON(C.srcPixelBlock),C.tileSize,C.maximumPyramidLevel);y&&y.forEach((z,h)=>{y.set(h,null==z?void 0:z.toJSON())});return Y.resolve(y)};M.mosaicAndTransform=async function(C){var y=C.srcPixelBlocks.map(z=>z?new R(z):null);y=J.mosaic(y,C.srcMosaicSize);return C.coefs?(C=J.approximateTransform(y,C.destDimension,C.coefs,C.sampleSpacing,C.interpolation))&&C.toJSON():y&&y.toJSON()};return O}()});