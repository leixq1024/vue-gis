// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(S,n,G,Q,F,P,L,M){function W(b,l){if(!b)return null;var f=b?v[b.type]||null:null;if(f)return f=new f,f.read(b,l),f;l&&l.messages&&b&&l.messages.push(new n("renderer:unsupported","Renderers of type '"+
(b.type||"unknown")+"' are not supported",{definition:b,context:l}));return null}const K={key:"type",base:null,typeMap:{"unique-value":L,"class-breaks":G,"raster-colormap":Q,"raster-stretch":P,"vector-field":M,"raster-shaded-relief":F}},D={...K,typeMap:{...K.typeMap}};delete D.typeMap["vector-field"];const v={uniqueValue:L,classBreaks:G,rasterStretch:P,rasterColormap:Q,vectorField:M,rasterShadedRelief:F};S.ClassBreaksRenderer=G;S.RasterColormapRenderer=Q;S.RasterShadedReliefRenderer=F;S.RasterStretchRenderer=
P;S.UniqueValueRenderer=L;S.VectorFieldRenderer=M;S.fromJSON=function(b,l){return W(b,l)};S.rasterRendererTypes=K;S.read=W;S.websceneRasterRendererTypes=D;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l){var f;G=f=function(w){function r(I){I=w.call(this,I)||this;I.colormapInfos=null;I.type="raster-colormap";return I}S._inheritsLoose(r,w);r.createFromColormap=function(I,E){function t(x){return E?E[x]||"":String(x[0])}if(!I)return null;var q=5===I[0].length;I=I.sort(x=>x[0][0]-x[1][0]);q=q?I.map(x=>b.fromJSON({value:x[0],color:x.slice(1,5),label:t(x[0])})):I.map(x=>b.fromJSON({value:x[0],color:x.slice(1,4).concat([255]),label:t(x[0])}));return new f({colormapInfos:q})};
r.createFromColorramp=function(I){I=l.convertColorRampToColormap(I,256);return f.createFromColormap(I)};var u=r.prototype;u.clone=function(){return new f({colormapInfos:this.colormapInfos.map(I=>I.toJSON())})};u.extractColormap=function(){return this.colormapInfos.map(I=>[I.value,I.color.r,I.color.g,I.color.b,1<I.color.a?I.color.a:255*I.color.a&255]).sort((I,E)=>I[0]-E[0])};return r}(v.JSONSupport);n.__decorate([P.property({type:[b],json:{write:!0}})],G.prototype,"colormapInfos",void 0);n.__decorate([L.enumeration({rasterColormap:"raster-colormap"})],
G.prototype,"type",void 0);return G=f=n.__decorate([M.subclass("esri.renderers.RasterColormapRenderer")],G)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b){G=function(l){function f(){var w=l.apply(this,arguments)||this;w.value=null;w.label=null;w.color=null;return w}S._inheritsLoose(f,l);return f}(v.JSONSupport);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"value",void 0);n.__decorate([P.property({type:String,json:{write:!0}})],G.prototype,"label",void 0);n.__decorate([P.property({type:b,json:{type:[F.Integer],write:!0}})],G.prototype,"color",void 0);return G=n.__decorate([M.subclass("esri.renderers.support.ColormapInfo")],
G)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(S,n,G){function Q(M,W){if(!M||!W||M.length!==W.length)return!1;for(let K=0;K<M.length;K++)if(M[K]>W[K]+2||M[K]<W[K]-2)return!1;return!0}function F(M,W){if(M){W=W?W:P;var K=null,D;"algorithmic"===M.type?W.some(v=>{if(Q(M.fromColor.toRgb(),v.fromColor)&&Q(M.toColor.toRgb(),v.toColor))return K=v.id,!0}):"multipart"===M.type&&W.some(v=>{if(M.colorRamps&&v.colorRamps&&M.colorRamps.length===
v.colorRamps.length&&(D=M.colorRamps,!v.colorRamps.some((b,l)=>{if(!Q(D[l].fromColor.toRgb(),(new n(b.fromColor)).toRgb())||!Q(D[l].toColor.toRgb(),(new n(b.toColor)).toRgb()))return!0}))){if(K)return!0;K=v.id}});return K}}const P=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,
52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],L={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",
brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",
errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",
purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",
spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};S.PREDEFINED_COLOR_RAMP_NAME_MAP=
L;S.PREDEFINED_JSON_COLOR_RAMPS=P;S.convertColorRampToColormap=function(M,W,K=!1){if(M&&W&&!(2>W)){var D="toJSON"in M?M.toJSON():M,v="multipart"===D.type?D.colorRamps.length:1;M=[];var b=[],l,f,w,r,u=0;for(let E=0;E<v;E++)M[E]={start:null,end:null},M[E].start=u,M[E].end=u+1/v,u=M[E].end;for(let E=0;E<W;E++){var I=E/(W-1);M.forEach((t,q)=>{if(I>=t.start&&(I<t.end||E===W-1&&q===v-1)){r=(I-t.start)/(t.end-t.start);"multipart"===D.type?(l=D.colorRamps[q].fromColor,f=D.colorRamps[q].toColor):(l=D.fromColor,
f=D.toColor);if(0===E)b.push([E].concat(l.slice(0,3)));else if(E===W-1)b.push([E].concat(f.slice(0,3)));else{var x={r:f[0],g:f[1],b:f[2]};t=r;q=G.toLAB({r:l[0],g:l[1],b:l[2]});x=G.toLAB(x);w=G.toRGB({l:q.l*(1-t)+t*x.l,a:q.a*(1-t)+t*x.a,b:q.b*(1-t)+t*x.b});b.push([E,w.r,w.g,w.b])}t=null!=l[3]?1<l[3]?l[3]/255:l[3]:1;q=null!=f[3]?1<f[3]?f[3]/255:f[3]:1;K&&b[E].push(Math.min(255,Math.round(255*(t*(1-r)+q*r))))}})}return b}};S.getColorRampId=F;S.getColorRampName=function(M){return(M=F(M))?L[M]:null};Object.defineProperty(S,
"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(S){function n(K,D){const v=[];let b,l;if(K[0].length!==D.length)throw"dimensions do not match";const f=K.length,w=K[0].length;let r=0;for(b=0;b<f;b++){for(l=r=0;l<w;l++)r+=K[b][l]*D[l];v.push(r)}return v}function G(K){K=[K.r/255,K.g/255,K.b/255].map(D=>.04045>=D?D/12.92:Math.pow((D+.055)/1.055,2.4));K=n(M,K);return{x:100*K[0],y:100*K[1],z:100*K[2]}}function Q(K){K=n(W,[K.x/100,K.y/100,K.z/100]).map(D=>Math.min(1,
Math.max(.0031308>=D?12.92*D:1.055*Math.pow(D,1/2.4)-.055,0)));return{r:Math.round(255*K[0]),g:Math.round(255*K[1]),b:Math.round(255*K[2])}}function F(K){K=[K.x/95.047,K.y/100,K.z/108.883].map(D=>D>Math.pow(6/29,3)?Math.pow(D,1/3):1/3*Math.pow(29/6,2)*D+4/29);return{l:116*K[1]-16,a:500*(K[0]-K[1]),b:200*(K[1]-K[2])}}function P(K){const D=K.l;K=[(D+16)/116+K.a/500,(D+16)/116,(D+16)/116-K.b/200].map(v=>v>6/29?Math.pow(v,3):3*Math.pow(6/29,2)*(v-4/29));return{x:95.047*K[0],y:100*K[1],z:108.883*K[2]}}
function L(K){if("r"in K&&"g"in K&&"b"in K)return K;if("l"in K&&"c"in K&&"h"in K){var D=K.c;var v=K.h;D={l:K.l,a:D*Math.cos(v),b:D*Math.sin(v)};return Q(P(D))}if("l"in K&&"a"in K&&"b"in K)return Q(P(K));if("x"in K&&"y"in K&&"z"in K)return Q(K);if("h"in K&&"s"in K&&"v"in K){{v=(K.h+360)%360/60;D=K.v/100*255;K=K.s/100*D;const b=K*(1-Math.abs(v%2-1));switch(Math.floor(v)){case 0:v={r:K,g:b,b:0};break;case 1:v={r:b,g:K,b:0};break;case 2:v={r:0,g:K,b};break;case 3:v={r:0,g:b,b:K};break;case 4:v={r:b,g:0,
b:K};break;case 5:case 6:v={r:K,g:0,b};break;default:v={r:0,g:0,b:0}}v.r=Math.round(v.r+D-K);v.g=Math.round(v.g+D-K);v.b=Math.round(v.b+D-K);D=v}return D}return K}const M=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],W=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];S.darken=function(K,D){K=F(G(K));K.l*=1-D;return Q(P(K))};S.toHSV=function(K){if("h"in K&&"s"in K&&"v"in K)return K;var D=L(K);{K=D.r;const v=D.g,b=D.b;D=Math.max(K,v,b);const l=D-Math.min(K,v,b);K=
0===l?0:D===K?(v-b)/l%6:D===v?(b-K)/l+2:(K-v)/l+4;0>K&&(K+=6);K={h:60*K,s:100*(0===l?0:l/D),v:100/255*D}}return K};S.toLAB=function(K){return"l"in K&&"a"in K&&"b"in K?K:F(G(L(K)))};S.toLCH=function(K){if(!("l"in K&&"c"in K&&"h"in K)){{var D=F(G(L(K)));K=D.l;var v=D.a;const b=D.b;D=Math.sqrt(v*v+b*b);v=Math.atan2(b,v);v=0<v?v:v+2*Math.PI;K={l:K,c:D,h:v}}}return K};S.toRGB=L;S.toXYZ=function(K){return"x"in K&&"y"in K&&"z"in K?K:G(L(K))};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f){var w;G=w=function(r){function u(E){E=r.call(this,E)||this;E.altitude=45;E.azimuth=315;E.colorRamp=null;E.hillshadeType="multi-directional";E.pixelSizePower=.664;E.pixelSizeFactor=.024;E.scalingType="none";E.type="raster-shaded-relief";E.zFactor=1;return E}S._inheritsLoose(u,r);var I=u.prototype;I.readColorRamp=function(E){return f.fromJSON(E)};I.clone=function(){return new w({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Q.clone(this.colorRamp)})};return u}(l.JSONSupport);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"altitude",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"azimuth",void 0);n.__decorate([L.property({types:f.types,json:{write:!0}})],G.prototype,"colorRamp",void 0);n.__decorate([W.reader("colorRamp")],G.prototype,"readColorRamp",null);n.__decorate([L.property({type:["traditional",
"multi-directional"],json:{write:!0}})],G.prototype,"hillshadeType",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"pixelSizePower",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"pixelSizeFactor",void 0);n.__decorate([L.property({type:["none","adjusted"],json:{write:!0}})],G.prototype,"scalingType",void 0);n.__decorate([M.enumeration({rasterShadedRelief:"raster-shaded-relief"})],G.prototype,"type",void 0);n.__decorate([L.property({type:Number,
json:{write:!0}})],G.prototype,"zFactor",void 0);return G=w=n.__decorate([K.subclass("esri.renderers.RasterShadedReliefRenderer")],G)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps ./support/stretchRendererUtils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r){var u;G=u=function(I){function E(q){q=I.call(this,q)||this;q.colorRamp=null;q.computeGamma=!1;q.dynamicRangeAdjustment=!1;q.gamma=[];q.maxPercent=null;q.minPercent=null;q.numberOfStandardDeviations=null;q.outputMax=null;q.outputMin=null;q.sigmoidStrengthLevel=null;q.statistics=[];q.histograms=null;q.useGamma=!1;q.stretchType="none";q.type="raster-stretch";return q}S._inheritsLoose(E,I);var t=E.prototype;t.readColorRamp=function(q){if(q)return w.fromJSON(q)};
t.writeStatistics=function(q,x,J){var p;null!=(p=q)&&p.length&&(Array.isArray(q[0])||(q=q.map(h=>[h.min,h.max,h.avg,h.stddev])),x[J]=q)};t.readStretchType=function(q,x){q=x.stretchType;"number"===typeof q&&(q=r.stretchTypeFunctionEnum[q]);return r.stretchTypeJSONDict.read(q)};t.clone=function(){return new u({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Q.clone(this.statistics),gamma:Q.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Q.clone(this.colorRamp),histograms:Q.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return E}(f.JSONSupport);n.__decorate([L.property({types:w.types,json:{write:!0}})],G.prototype,"colorRamp",void 0);n.__decorate([W.reader("colorRamp")],G.prototype,"readColorRamp",null);n.__decorate([L.property({type:Boolean,
json:{write:!0}})],G.prototype,"computeGamma",void 0);n.__decorate([L.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],G.prototype,"dynamicRangeAdjustment",void 0);n.__decorate([L.property({type:[Number],json:{write:!0}})],G.prototype,"gamma",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"maxPercent",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"minPercent",void 0);n.__decorate([L.property({type:P.Integer,json:{write:!0}})],
G.prototype,"numberOfStandardDeviations",void 0);n.__decorate([L.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],G.prototype,"outputMax",void 0);n.__decorate([L.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],G.prototype,"outputMin",void 0);n.__decorate([L.property({type:Number,json:{write:!0}})],G.prototype,"sigmoidStrengthLevel",void 0);n.__decorate([L.property({json:{type:[[Number]],write:!0}})],G.prototype,"statistics",void 0);n.__decorate([L.property()],
G.prototype,"histograms",void 0);n.__decorate([D.writer("statistics")],G.prototype,"writeStatistics",null);n.__decorate([L.property({type:Boolean,json:{write:!0}})],G.prototype,"useGamma",void 0);n.__decorate([L.property({type:r.stretchTypeJSONDict.apiValues,json:{type:r.stretchTypeJSONDict.jsonValues,write:r.stretchTypeJSONDict.write}})],G.prototype,"stretchType",void 0);n.__decorate([W.reader("stretchType",["stretchType"])],G.prototype,"readStretchType",null);n.__decorate([M.enumeration({rasterStretch:"raster-stretch"})],
G.prototype,"type",void 0);return G=u=n.__decorate([K.subclass("esri.renderers.RasterStretchRenderer")],G)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(S,n){n=new n.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});S.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",
9:"sigmoid"};S.stretchTypeJSONDict=n;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/Point ../geometry ../Color ../symbols/SimpleLineSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../chunks/symbols ../Graphic ./visualVariables/RotationVariable ./visualVariables/support/visualVariableUtils ./visualVariables/SizeVariable ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./ClassBreaksRenderer ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ../symbols/support/utils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h,m,A,a,d,k,c){var g;const C=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),z=new M.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});G=new M.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",
beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});M=new M.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});f=g=function(B){function H(R){R=B.call(this,R)||this;R.attributeField="Magnitude";R.flowRepresentation="flow-from";R.rotationType="arithmetic";R.style="single-arrow";R.symbolTileSize=50;R.type="vector-field";return R}S._inheritsLoose(H,
B);var O=H.prototype;O.readInputUnit=function(R,N){return C.has(R)?z.fromJSON(R):null};O.readOutputUnit=function(R,N){return C.has(R)?z.fromJSON(R):null};O.clone=function(){return new g({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:Q.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};O.getGraphicsFromPixelData=async function(R,N=!1){const V=[];var Y=k.getUnitConversionFactor(this.inputUnit,
this.outputUnit);N=N?k.convertVectorFieldData(R.pixelBlock,"vector-uv",this.rotationType,Y):k.convertVectorFieldUnit(R.pixelBlock,"vector-magdir",Y);R=R.extent;Y=N.mask&&0<N.mask.length;let ba=0;const da=(R.xmax-R.xmin)/N.width,ka=(R.ymax-R.ymin)/N.height;for(let y=0;y<N.height;y++)for(let T=0;T<N.width;T++,ba++){var ha=[R.xmin+T*da+da/2,R.ymax-y*ka-ka/2];if((!Y||N.mask[ba])&&ha&&2===ha.length){var e={Magnitude:N.pixels[0][ba],Direction:N.pixels[1][ba]};ha=new w({x:ha[0],y:ha[1],spatialReference:R.spatialReference});
ha=(await d.normalizeCentralMeridian(ha))[0];e=new x({geometry:{type:"point",x:ha.x,y:ha.y,spatialReference:R.spatialReference},attributes:e});e.symbol=this._getVisualVariablesAppliedSymbol(e);V.push(e)}}return V};O.getSymbol=function(R,N){};O.getSymbolAsync=async function(R,N){};O.getSymbols=function(){return[]};O.getClassBreakInfos=function(){var R;return null==(R=this.styleRenderer)?void 0:R.classBreakInfos};O.getDefaultSymbol=function(){var R;return null==(R=this.styleRenderer)?void 0:R.defaultSymbol};
O._getDefaultSymbol=function(R){return new t({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new I({width:0}),size:20,color:R||new u([0,92,230])})};O._getVisualVariablesAppliedSymbol=function(R){if(R){var N=this.styleRenderer&&this.styleRenderer.getSymbol(R);N=N.clone();var V=this.sizeVariables,Y=this.rotationVariables;V&&V.length&&this.sizeVariables.forEach(ba=>c.applySizesToSymbol(N,p.getAllSizes([ba],R)));Y&&Y.length&&(V=R.attributes.Direction,R.attributes.Direction="flow-from"===this.flowRepresentation?
V:V+180,this.rotationVariables.forEach(ba=>c.applyRotationToSymbol(N,p.getRotationAngle(ba,R),ba.axis)));return N}};O._createStyleRenderer=function(R){let N={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(R){case "single-arrow":N=this._createSingleArrowRenderer();break;case "beaufort-kn":N=this._createBeaufortKnotsRenderer();break;case "beaufort-m":N=this._createBeaufortMeterRenderer();break;case "beaufort-ft":N=this._createBeaufortFeetRenderer();break;case "beaufort-mi":N=this._createBeaufortMilesRenderer();
break;case "beaufort-km":N=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":N=this._createCurrentMeterRenderer();break;case "ocean-current-kn":N=this._createCurrentKnotsRenderer();break;case "simple-scalar":N=this._createSimpleScalarRenderer();break;case "wind-barb":N=this._createWindBarbsRenderer();break;case "classified-arrow":N=this._createClassifiedArrowRenderer()}return new a(N)};O._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};O._createBeaufortKnotsRenderer=
function(){const R=this._getDefaultSymbol(new u([214,47,39])),N=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:R,classBreakInfos:N}};O._createBeaufortMeterRenderer=function(){const R=this._getDefaultSymbol(new u([214,47,39])),N=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],
[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:R,classBreakInfos:N}};O._createBeaufortFeetRenderer=function(){const R=this._getDefaultSymbol(new u([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(V=>3.28084*V);N=this._getClassBreaks(N,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,
191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:R,classBreakInfos:N}};O._createBeaufortMilesRenderer=function(){const R=this._getDefaultSymbol(new u([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(V=>2.23694*V);N=this._getClassBreaks(N,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:R,
classBreakInfos:N}};O._createBeaufortKilometersRenderer=function(){const R=this._getDefaultSymbol(new u([214,47,39]));var N=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];N=N.map(V=>3.6*V);N=this._getClassBreaks(N,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:R,classBreakInfos:N}};O._createCurrentMeterRenderer=function(){const R=this._getDefaultSymbol(new u([177,
177,177])),N=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:R,classBreakInfos:N}};O._createCurrentKnotsRenderer=function(){const R=this._getDefaultSymbol(new u([177,177,177])),N=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:R,classBreakInfos:N}};O._createClassifiedArrowRenderer=function(){var R;const N=
this._getDefaultSymbol(new u([56,168,0]));var V=[0,1E-6,3.5,7,10.5,14];if(null!=(R=this.sizeVariables)&&R.length){const Y=this.sizeVariables[0].minDataValue;R=this.sizeVariables[0].maxDataValue;if(Y&&R){const ba=(R-Y)/5;V=Array.from(Array(6).keys()).map(da=>Y+ba*da)}}V=this._getClassBreaks(V,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:N,classBreakInfos:V}};O._createSimpleScalarRenderer=function(){return{defaultSymbol:E.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};O._createWindBarbsRenderer=function(){const R=Array.from(Array(31).keys()).map(ba=>5*ba),N=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],V=E.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),Y=R.map((ba,da)=>{if(da!==R.length-1)if(0===da)var ka={minValue:ba,maxValue:R[da+1],symbol:V};else ka=E.fromJSON({type:"esriPMS",imageData:N[da].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),ka={minValue:ba,maxValue:R[da+1],symbol:ka};return new A(ka)});return{defaultSymbol:V,classBreakInfos:Y}};O._getClassBreaks=function(R,N){return N.map((V,Y)=>new A({minValue:R[Y],maxValue:R[Y+1],symbol:this._getDefaultSymbol(new u(V))}))};S._createClass(H,
[{key:"styleRenderer",get:function(){const R=this.attributeField,N=this._createStyleRenderer(this.style);N.field=R;return N}},{key:"sizeVariables",get:function(){const R=[];if(this.visualVariables)for(var N of this.visualVariables)"size"===N.type&&R.push(N);0===R.length&&(N=new h({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(N):this._set("visualVariables",[N]),R.push(N));return R}},{key:"rotationVariables",get:function(){const R=[];
if(this.visualVariables)for(var N of this.visualVariables)"rotation"===N.type&&R.push(N);0===R.length&&(N=new J({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(N):this._set("visualVariables",[N]),R.push(N));return R}}]);return H}(m.VisualVariablesMixin(f.JSONSupport));n.__decorate([L.property({type:String,json:{write:!0}})],f.prototype,"attributeField",void 0);n.__decorate([L.property({type:M.apiValues,json:{type:M.jsonValues,read:{reader:M.read},
write:{writer:M.write}}})],f.prototype,"flowRepresentation",void 0);n.__decorate([L.property({type:["geographic","arithmetic"],json:{write:!0}})],f.prototype,"rotationType",void 0);n.__decorate([L.property({type:G.apiValues,json:{type:G.jsonValues,read:{reader:G.read},write:{writer:G.write}}})],f.prototype,"style",void 0);n.__decorate([L.property({json:{write:!0}})],f.prototype,"symbolTileSize",void 0);n.__decorate([L.property({type:z.apiValues,json:{type:z.jsonValues,write:{writer:z.write}}})],f.prototype,
"inputUnit",void 0);n.__decorate([K.reader("inputUnit")],f.prototype,"readInputUnit",null);n.__decorate([L.property({type:z.apiValues,json:{type:z.jsonValues,read:{reader:z.read},write:{writer:z.write}}})],f.prototype,"outputUnit",void 0);n.__decorate([K.reader("outputUnit")],f.prototype,"readOutputUnit",null);n.__decorate([W.enumeration({vectorField:"vector-field"})],f.prototype,"type",void 0);n.__decorate([L.property({type:a,dependsOn:["style","attributeField"]})],f.prototype,"styleRenderer",null);
n.__decorate([L.property({type:h,dependsOn:["visualVariables","symbolTileSize"]})],f.prototype,"sizeVariables",null);n.__decorate([L.property({type:J,dependsOn:["visualVariables","rotationType"]})],f.prototype,"rotationVariables",null);return f=g=n.__decorate([D.subclass("esri.renderers.VectorFieldRenderer")],f)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../PixelBlock"],function(S,n){function G(M,W="geographic"){const [K,D]=M;M=Math.sqrt(K*K+D*D);let v=
Math.atan2(D,K)*F;v=(360+v)%360;"geographic"===W&&(v=(450-v)%360);return[M,v]}function Q(M,W="geographic"){let K=M[1];"geographic"===W&&(K=(450-K)%360);K%=360;M=M[0];return[M*Math.cos(K/F),M*Math.sin(K/F)]}const F=180/Math.PI,P=function(M){return M&&"esri.layers.support.PixelBlock"===M.declaredClass&&M.pixels&&0<M.pixels.length},L=new Map;L.set("meter-per-second",1);L.set("kilometer-per-hour",.277778);L.set("knots",.514444);L.set("feet-per-second",.3048);L.set("mile-per-hour",.44704);S.convertVectorFieldData=
function(M,W,K="geographic",D=1){if(!P(M))return M;const {pixels:v,width:b,height:l}=M;var f=b*l;const w=v[0],r=v[1],u=n.createEmptyBand(M.pixelType,f);f=n.createEmptyBand(M.pixelType,f);let I=0;for(let E=0;E<l;E++)for(let t=0;t<b;t++)"vector-uv"===W?([u[I],f[I]]=G([w[I],r[I]],K),u[I]*=D):([u[I],f[I]]=Q([w[I],r[I]],K),u[I]*=D,f[I]*=D),I++;M=new n({pixelType:M.pixelType,width:M.width,height:M.height,mask:M.mask,validPixelCount:M.validPixelCount,maskIsAlpha:M.maskIsAlpha,pixels:[u,f]});M.updateStatistics();
return M};S.convertVectorFieldUnit=function(M,W,K=1){if(1===K||!P(M))return M;M=M.clone();const {pixels:D,width:v,height:b}=M,l=D[0],f=D[1];let w=0;for(let r=0;r<b;r++)for(let u=0;u<v;u++)"vector-uv"===W?(l[w]*=K,f[w]*=K):l[w]*=K,w++;M.updateStatistics();return M};S.getUnitConversionFactor=function(M,W){return L.get(W)/L.get(M)||1};S.isValidPixelBlock=P;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f){var w;const r=P.getLogger("esri.layers.support.PixelBlock");G=w=function(u){function I(t){t=u.call(this,t)||this;t.width=null;t.height=null;t.pixelType="f32";t.validPixelCount=null;t.mask=null;t.maskIsAlpha=!1;t.pixels=null;t.statistics=null;return t}S._inheritsLoose(I,u);I.createEmptyBand=function(t,q){return new (w.getPixelArrayConstructor(t))(q)};I.getPixelArrayConstructor=function(t){let q;switch(t){case "u1":case "u2":case "u4":case "u8":q=Uint8Array;break;
case "u16":q=Uint16Array;break;case "u32":q=Uint32Array;break;case "s8":q=Int8Array;break;case "s16":q=Int16Array;break;case "s32":q=Int32Array;break;case "u32":q=Uint32Array;break;case "f32":q=Float32Array;break;case "f64":q=Float64Array;break;case "c64":case "c128":case "unknown":q=Float32Array}return q};var E=I.prototype;E.castPixelType=function(t){if(!t)return"f32";t=t.toLowerCase();-1<["u1","u2","u4"].indexOf(t)?t="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(t)&&(t="f32");
return t};E.getPlaneCount=function(){return this.pixels&&this.pixels.length};E.addData=function(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new D("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(t.pixels);this.statistics.push(t.statistics||{minValue:null,maxValue:null})};E.getAsRGBA=function(){const t=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)};E.getAsRGBAFloat=function(){const t=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(t);return t};E.updateStatistics=function(){this.statistics=this.pixels.map(x=>this._calculateBandStatistics(x,this.mask));const t=this.mask;let q=0;if(t)for(let x=0;x<t.length;x++)t[x]&&q++;else q=
this.width*this.height;this.validPixelCount=q};E.clamp=function(t){if(t&&"f64"!==t&&"f32"!==t){switch(t){case "u8":var q=[0,255];break;case "u16":q=[0,65535];break;case "u32":q=[0,4294967295];break;case "s8":q=[-128,127];break;case "s16":q=[-32768,32767];break;case "s32":q=[-2147483648,2147483647];break;default:q=[-3.4*1E39,3.4*1E39]}var [x,J]=q;q=this.pixels;var p=this.width*this.height,h=q.length,m=[];for(let k=0;k<h;k++){var A=w.createEmptyBand(t,p);var a=q[k];for(let c=0;c<p;c++){var d=a[c];A[c]=
d>J?J:d<x?x:d}m.push(A)}this.pixels=m;this.pixelType=t}};E.extractBands=function(t){if(F.isNone(t)||0===t.length||null==this.pixels||0===this.pixels.length)return this;var q=this.pixels.length;const x=t.some(J=>J>=this.pixels.length);q=q===t.length&&!t.some((J,p)=>J!==p);return x||q?this:new w({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map(J=>this.pixels[J]),statistics:this.statistics&&t.map(J=>
this.statistics[J])})};E.clone=function(){const t=new w({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(t.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let q;const x=w.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){t.pixels=[];const J=this.pixels[0].slice;for(q=0;q<this.pixels.length;q++)t.pixels[q]=J?this.pixels[q].slice(0,this.pixels[q].length):
new x(this.pixels[q])}if(this.statistics)for(t.statistics=[],q=0;q<this.statistics.length;q++)t.statistics[q]=Q.clone(this.statistics[q]);return t};E._fillFrom8Bit=function(t){const {mask:q,maskIsAlpha:x,pixels:J}=this;if(t&&J&&J.length){var p,h;var m=p=h=J[0];3<=J.length?(p=J[1],h=J[2]):2===J.length&&(p=J[1]);var A=new Uint32Array(t),a=this.width*this.height;if(m.length!==a)r.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(q&&q.length===a)if(x)for(t=0;t<a;t++)q[t]&&
(A[t]=q[t]<<24|h[t]<<16|p[t]<<8|m[t]);else for(t=0;t<a;t++)q[t]&&(A[t]=-16777216|h[t]<<16|p[t]<<8|m[t]);else for(t=0;t<a;t++)A[t]=-16777216|h[t]<<16|p[t]<<8|m[t]}else r.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};E._fillFromNon8Bit=function(t){const {pixels:q,mask:x,statistics:J}=this;if(t&&q&&q.length){var p=this.pixelType,h=1,m=0;h=1;J&&0<J.length?(m=J.map(c=>c.minValue).reduce((c,g)=>Math.min(c,g)),h=J.map(c=>c.maxValue-c.minValue).reduce((c,g)=>Math.max(c,
g)),h=255/h):(h=255,"s8"===p?(m=-128,h=127):"u16"===p?h=65535:"s16"===p?(m=-32768,h=32767):"u32"===p?h=4294967295:"s32"===p?(m=-2147483648,h=2147483647):"f32"===p?(m=-3.4*1E39,h=3.4*1E39):"f64"===p&&(m=-Number.MAX_VALUE,h=Number.MAX_VALUE),h=255/(h-m));t=new Uint32Array(t);p=this.width*this.height;var A,a,d;var k=A=a=q[0];if(k.length!==p)return r.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=q.length)if(A=q[1],3<=q.length&&(a=q[2]),x&&x.length===p)for(d=0;d<p;d++)x[d]&&
(t[d]=-16777216|(a[d]-m)*h<<16|(A[d]-m)*h<<8|(k[d]-m)*h);else for(d=0;d<p;d++)t[d]=-16777216|(a[d]-m)*h<<16|(A[d]-m)*h<<8|(k[d]-m)*h;else if(x&&x.length===p)for(d=0;d<p;d++)A=(k[d]-m)*h,x[d]&&(t[d]=-16777216|A<<16|A<<8|A);else for(d=0;d<p;d++)A=(k[d]-m)*h,t[d]=-16777216|A<<16|A<<8|A}else r.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};E._fillFrom32Bit=function(t){const {pixels:q,mask:x}=this;if(!t||!q||!q.length)return r.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let J,p,h,m;J=p=h=q[0];3<=q.length?(p=q[1],h=q[2]):2===q.length&&(p=q[1]);const A=this.width*this.height;if(J.length!==A)return r.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let a=0;if(x&&x.length===A)for(m=0;m<A;m++)t[a++]=J[m],t[a++]=p[m],t[a++]=h[m],t[a++]=x[m]&1;else for(m=0;m<A;m++)t[a++]=J[m],t[a++]=p[m],t[a++]=h[m],t[a++]=1};E._calculateBandStatistics=function(t,q){let x=Infinity,J=-Infinity;const p=t.length;let h,m=0;if(q)for(h=0;h<p;h++)q[h]&&(m=t[h],
x=m<x?m:x,J=m>J?m:J);else for(h=0;h<p;h++)m=t[h],x=m<x?m:x,J=m>J?m:J;return{minValue:x,maxValue:J}};return I}(f.JSONSupport);n.__decorate([L.property({json:{write:!0}})],G.prototype,"width",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"height",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"pixelType",void 0);n.__decorate([M.cast("pixelType")],G.prototype,"castPixelType",null);n.__decorate([L.property({json:{write:!0}})],G.prototype,"validPixelCount",void 0);
n.__decorate([L.property({json:{write:!0}})],G.prototype,"mask",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"maskIsAlpha",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"pixels",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"statistics",void 0);return G=w=n.__decorate([K.subclass("esri.layers.support.PixelBlock")],G)})},"esri/symbols/support/utils":function(){define("require exports ../../core/has ../../core/maybe ../../Color ../../core/screenUtils ./Symbol3DMaterial ../../chunks/symbols ../../core/asyncUtils ../../chunks/vec3f64 ./gfxUtils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D){function v(x,J){if(null==J)return x;x=x.toRgba();x[3]*=J;return new F(x)}function b(x,J,p){if(x=x.symbolLayers){var h=m=>{m=Q.isSome(m)?m:null;J=J||m||null!=p&&q;return v(J,p)};x.forEach(m=>{if("object"!==m.type||null==m.resource.href||J)if("water"===m.type)m.color=h(m.color);else{var A=Q.isSome(m.material)?m.material.color:null;A=h(A);Q.isNone(m.material)?m.material=new L["default"]({color:A}):m.material.color=A;null!=p&&"outline"in m&&Q.isSome(m.outline)&&Q.isSome(m.outline.color)&&
(m.outline.color=v(m.outline.color,p))}})}}async function l(x,J){(x=x.symbolLayers)&&await W.forEach(x,async p=>f(p,J))}async function f(x,J){switch(x.type){case "extrude":x.size="number"===typeof J[2]?J[2]:0;break;case "icon":case "line":case "text":J=w(J);Q.isSome(J)&&(x.size=J);break;case "path":{const p=u(J,K.ONES,[x.width,void 0,x.height]);x.width=E(J[0],x.width,1,p);x.height=E(J[2],x.height,1,p)}break;case "object":await r(x,J)}}function w(x){for(const J of x)if("number"===typeof J)return J;
return null}async function r(x,J){const {resourceSize:p,symbolSize:h}=await I(x),m=u(J,p,h);x.width=E(J[0],h[0],p[0],m);x.depth=E(J[1],h[1],p[1],m);x.height=E(J[2],h[2],p[2],m)}function u(x,J,p){for(let h=0;3>h;h++){const m=x[h];switch(m){case "symbol-value":return null!=p[h]?p[h]/J[h]:1;case "proportional":break;default:if(m&&J[h])return m/J[h]}}return 1}async function I(x){const J=await (await new Promise(function(d,k){S(["./symbolLayerUtils"],d,k)})).computeObjectLayerResourceSize(x,10),{width:p,
height:h,depth:m}=x;x=[p,m,h];let A=1;for(var a=0;3>a;a++)if(null!=x[a]){A=x[a]/J[a];break}for(a=0;3>a;a++)null==x[a]&&(x[a]=J[a]*A);return{resourceSize:J,symbolSize:x}}function E(x,J,p,h){switch(x){case "proportional":return p*h;case "symbol-value":return null!=J?J:p;default:return x}}const t=/\/resource\/(.*?)\.svg$/,q=new F("white");n.applyColorToSymbol=function(x,J,p){if(x&&(J||null!=p))if(J&&(J=new F(J)),M.isSymbol3D(x))b(x,J,p);else if(M.isSymbol2D(x)){if(J=J||x.color)x.color=v(J,p);null!=p&&
"outline"in x&&x.outline&&x.outline.color&&(x.outline.color=v(x.outline.color,p))}};n.applyOpacityToColor=v;n.applyRotationToSymbol=function(x,J,p){x&&null!=J&&(M.isSymbol3D(x)?(x=x.symbolLayers)&&x.forEach(h=>{if(h&&"object"===h.type)switch(p){case "tilt":h.tilt=J;break;case "roll":h.roll=J;break;default:h.heading=J}}):!M.isSymbol2D(x)||"simple-marker"!==x.type&&"picture-marker"!==x.type&&"text"!==x.type||(x.angle=J))};n.applySizesToSymbol=async function(x,J){if(x&&J){if(M.isSymbol3D(x))return l(x,
J);if(M.isSymbol2D(x)&&(J=w(J),!Q.isNone(J)))switch(x.type){case "simple-marker":x.size=J;break;case "picture-marker":{const p=x.width/x.height;1<p?(x.width=J,x.height=J*p):(x.width=J*p,x.height=J);break}case "simple-line":x.width=J;break;case "text":x.font.size=J}}};n.getIconHref=function(x,J){J=J.resource.href;return!G("esri-canvas-svg-support")&&x.styleOrigin&&t.test(J)?J.replace(t,"/resource/png/$1.png"):J};n.getSymbolOutlineSize=function(x){if(!x)return 0;if(M.isSymbol3D(x)){{const J=x.symbolLayers&&
x.symbolLayers.length;J?(x=x.symbolLayers.getItemAt(J-1),x="outline"in x?Q.get(x,"outline","size"):void 0):x=void 0}return Q.isSome(x)?x:0}return(x=D.getStroke(x))&&P.px2pt(x.width)||0};n.isVolumetricSymbol=function(x){if(!x||!x.symbolLayers)return!1;switch(x.type){case "point-3d":return x.symbolLayers.some(J=>"object"===J.type);case "line-3d":return x.symbolLayers.some(J=>"path"===J.type);case "polygon-3d":return x.symbolLayers.some(J=>"object"===J.type||"extrude"===J.type);default:return!1}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../core/promiseUtils ../../Color ../../core/screenUtils ../../request ../../assets ../../core/ItemCache ./cimSymbolUtils".split(" "),function(S,n,G,Q,F,P,L,M){function W(f){if(!f)return null;let w;switch(f.type){case "simple-fill":case "picture-fill":case "simple-marker":w=W(f.outline);break;case "simple-line":{const r=Q.pt2px(f.width);"none"!==f.style&&0!==r&&(w={color:f.color,style:l(f.style),width:r,cap:f.cap,
join:"miter"===f.join?Q.pt2px(f.miterLimit):f.join});break}default:w=null}return w}const K=P.getAssetUrl("esri/symbols/patterns/"),D={left:"start",center:"middle",right:"end",justify:"start"},v={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},b=new L(1E3),l=function(){const f={};return function(w){if(f[w])return f[w];const r=w.replace(/-/g,"");return f[w]=r}}();G=new G([128,128,128]);S.defaultThematicColor=G;S.getFill=function(f){const w=f.style;let r=null;
if(f)switch(f.type){case "simple-marker":"cross"!==w&&"x"!==w&&(r=f.color);break;case "simple-fill":"solid"===w?r=f.color:"none"!==w&&(r={type:"pattern",x:0,y:0,src:K+w+".png",width:5,height:5});break;case "picture-fill":r={type:"pattern",src:f.url,width:Q.pt2px(f.width)*f.xscale,height:Q.pt2px(f.height)*f.yscale,x:Q.pt2px(f.xoffset),y:Q.pt2px(f.yoffset)};break;case "text":r=f.color;break;case "cim":r=M.getCIMSymbolColor(f)}return r};S.getPatternUrlWithColor=function(f,w){const r=f+"-"+w;return void 0!==
b.get(r)?n.resolve(b.get(r)):F(f,{responseType:"image"}).then(u=>{u=u.data;const I=u.naturalWidth,E=u.naturalHeight,t=document.createElement("canvas");t.width=I;t.height=E;const q=t.getContext("2d");q.fillStyle=w;q.fillRect(0,0,I,E);q.globalCompositeOperation="destination-in";q.drawImage(u,0,0);u=t.toDataURL();b.put(r,u);return u})};S.getSVGAlign=function(f){return f=(f=f.horizontalAlignment)&&D[f.toLowerCase()]||"middle"};S.getSVGBaseline=function(f){return(f=f.verticalAlignment)&&v[f.toLowerCase()]||
"alphabetic"};S.getSVGBaselineShift=function(f){return"bottom"===f.verticalAlignment?"super":null};S.getStroke=W;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(S){return function(){function n(Q,F){this._storage=new S.MemCacheStorage;this._storage.maxSize=Q;F&&this._storage.registerRemoveFunc("",F)}var G=n.prototype;G.put=function(Q,F){this._storage.put(Q,F,1,1)};G.pop=function(Q){return this._storage.pop(Q)};G.get=function(Q){return this._storage.get(Q)};
G.clear=function(){this._storage.clearAll()};G.destroy=function(){this._storage.clearAll()};return n}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(S,n,G){function Q(v){v=G.toCIMSymbolJSON(v);if("CIMTextSymbol"===v.type)return v.height;let b=0;if(v.symbolLayers)for(const l of v.symbolLayers)G.isCIMMarker(l)&&l.size>b?b=l.size:G.isCIMStroke(l)&&l.width>b?b=l.width:G.isCIMFill(l);return b}function F(v,b,l,f){if("CIMTextSymbol"===v.type)v.height*=
b;else{if(l&&v.effects)for(const w of v.effects)M(w,b);if(v.symbolLayers)for(const w of v.symbolLayers)switch(w.type){case "CIMPictureMarker":case "CIMVectorMarker":P(w,b,f);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=f&&f.preserveOutlineWidth||(w.width*=b);break;case "CIMPictureFill":w.height*=b;w.offsetX*=b;w.offsetY*=b;break;case "CIMHatchFill":F(w.lineSymbol,b,!0,{...f,preserveOutlineWidth:!1}),w.offsetX*=b,w.offsetY*=b,w.separation*=b}}}function P(v,b,l){v.markerPlacement&&L(v.markerPlacement,
b);v.offsetX*=b;v.offsetY*=b;v.anchorPoint&&"Absolute"===v.anchorPointUnits&&(v.anchorPoint={x:v.anchorPoint.x*b,y:v.anchorPoint.y*b});v.size*=b;if("CIMVectorMarker"===v.type&&v.markerGraphics)for(const f of v.markerGraphics)v.scaleSymbolsProportionally||F(f.symbol,b,!0,l)}function L(v,b){G.isCIMMarkerStrokePlacement(v)&&(v.offset*=b);switch(v.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":v.customEndingOffset*=b;v.offsetAlongLine*=b;if(v.placementTemplate&&
v.placementTemplate.length){var l=v.placementTemplate.map(f=>f*b);v.placementTemplate=l}break;case "CIMMarkerPlacementAlongLineVariableSize":v.maxRandomOffset*=b;v.placementTemplate&&v.placementTemplate.length&&(l=v.placementTemplate.map(f=>f*b),v.placementTemplate=l);break;case "CIMMarkerPlacementOnLine":v.startPointOffset*=b;break;case "CIMMarkerPlacementAtExtremities":v.offsetAlongLine*=b;break;case "CIMMarkerPlacementAtRatioPositions":v.beginPosition*=b;v.endPosition*=b;break;case "CIMMarkerPlacementPolygonCenter":v.offsetX*=
b;v.offsetY*=b;break;case "CIMMarkerPlacementInsidePolygon":v.offsetX*=b,v.offsetY*=b,v.stepX*=b,v.stepY*=b}}function M(v,b){switch(v.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":v.width*=b;break;case "CIMGeometricEffectBuffer":v.size*=b;break;case "CIMGeometricEffectCut":v.beginCut*=b;v.endCut*=b;v.middleCut*=b;break;case "CIMGeometricEffectDashes":v.customEndingOffset*=b;v.offsetAlongLine*=b;if(v.dashTemplate&&v.dashTemplate.length){const l=v.dashTemplate.map(f=>f*b);v.dashTemplate=
l}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":v.length*=b;break;case "CIMGeometricEffectMove":v.offsetX*=b;v.offsetY*=b;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":v.offset*=b;break;case "CIMGeometricEffectRegularPolygon":v.radius*=b;break;case "CIMGeometricEffectTaperedPolygon":v.fromWidth*=b;v.length*=b;v.toWidth*=b;break;case "CIMGeometricEffectWave":v.amplitude*=b,v.period*=b}}function W(v,b){let l;l="CIMTextSymbol"===
v.type?v.symbol:v;v="CIMPolygonSymbol"===v.type;if(l.symbolLayers)for(const f of l.symbolLayers)if(!(f.colorLocked||v&&(G.isCIMStroke(f)||G.isCIMMarker(f)&&f.markerPlacement&&G.isCIMMarkerStrokePlacement(f.markerPlacement))))switch(f.type){case "CIMVectorMarker":f.markerGraphics.forEach(w=>{W(w.symbol,b)});break;case "CIMSolidStroke":case "CIMSolidFill":K(b,f.color);break;case "CIMHatchFill":W(f.lineSymbol,b)}}function K(v,b){for(const l of v)if(l.join(".")===b.join("."))return;v.push(b)}function D(v,
b){var l="CIMTextSymbol"===v.type?v.symbol:v;v="CIMPolygonSymbol"===v.type?!0:!1;if(l.symbolLayers)for(const f of l.symbolLayers)if(!(f.colorLocked||v&&(G.isCIMStroke(f)||G.isCIMMarker(f)&&f.markerPlacement&&G.isCIMMarkerStrokePlacement(f.markerPlacement))))switch(l=b.toArray(0),f.type){case "CIMVectorMarker":f.markerGraphics.forEach(w=>{D(w.symbol,b)});break;case "CIMSolidStroke":case "CIMSolidFill":f.color=l;break;case "CIMHatchFill":D(f.lineSymbol,b)}}S.applyCIMSymbolColor=function(v,b){b instanceof
n||(b=new n(b));v=G.toCIMSymbolJSON(v);D(v,b)};S.applyCIMSymbolRotation=function(v,b){v=G.toCIMSymbolJSON(v);if("CIMTextSymbol"===v.type)v.angle=b;else if("CIMPointSymbol"===v.type&&v.symbolLayers){const l=b-(v.angle||0);for(const f of v.symbolLayers){if(G.isCIMMarker(f)){let w=f.rotation||0;w=f.rotateClockwise?w-l:w+l;f.rotation=w}v.angle=b}}};S.getCIMSymbolColor=function(v){v=G.toCIMSymbolJSON(v);const b=[];W(v,b);return b.length?new n(G.fromCIMColor(b[0])):null};S.getCIMSymbolRotation=function(v){v=
G.toCIMSymbolJSON(v);return"CIMTextSymbol"===v.type||"CIMPointSymbol"===v.type?v.angle||0:0};S.getCIMSymbolSize=Q;S.scaleCIMMarker=P;S.scaleCIMSymbolTo=function(v,b,l){const f=G.toCIMSymbolJSON(v);v=Q(v);if(0===v)if("CIMTextSymbol"===f.type)f.height=b;else{if(f.symbolLayers)for(const w of f.symbolLayers)switch(w.type){case "CIMPictureMarker":case "CIMVectorMarker":w.size=b;break;case "CIMPictureStroke":case "CIMSolidStroke":w.width=b}}else F(f,b/v,!1,l)};Object.defineProperty(S,"__esModule",{value:!0})})},
"esri/symbols/cim/utils":function(){define(["exports"],function(S){function n(G,Q){"string"!==typeof G&&(G=String(G));switch(Q){case "LowerCase":return G.toLowerCase();case "Allcaps":return G.toUpperCase();default:return G}}S._adjustTextCase=n;S.colorToArray=function(G){return[G.r,G.g,G.b,G.a]};S.createLabelOverrideFunction=function(G,Q,F){const P=K=>{let D=K.length;for(;D--;)if(-1===" /-,\n".indexOf(K.charAt(D)))return!1;return!0},L=[];var M=0;let W=-1;do W=Q.indexOf("[",M),W>=M&&(W>M&&(M=Q.substr(M,
W-M),L.push([M,null,P(M)])),M=W+1,W=Q.indexOf("]",M),W>=M&&(W>M&&(M=Q.substr(M,W-M),(M=G[M])&&L.push([null,M,!1])),M=W+1));while(-1!==W);M<Q.length-1&&(G=Q.substr(M),L.push([G,null,P(G)]));return K=>{let D="",v=null;for(const b of L){const [l,f,w]=b;if(l)w?v=l:(v&&(D+=v,v=null),D+=l);else{const r=K.attributes[f];r&&(v&&(D+=v,v=null),D+=r)}}return n(D,F)}};S.evaluateValueOrFunction=function(G,Q,F,P){return"function"===typeof G?G(Q,F,P):G};S.fromCIMColor=function(G){return G?{r:G[0],g:G[1],b:G[2],a:G[3]/
255}:{r:0,g:0,b:0,a:0}};S.isCIMFill=function(G){return"CIMGradientFill"===G.type||"CIMHatchFill"===G.type||"CIMPictureFill"===G.type||"CIMSolidFill"===G.type||"CIMWaterFill"===G.type};S.isCIMMarker=function(G){return"CIMVectorMarker"===G.type||"CIMPictureMarker"===G.type||"CIMBarChartMarker"===G.type||"CIMCharacterMarker"===G.type||"CIMPieChartMarker"===G.type||"CIMStackedBarChartMarker"===G.type};S.isCIMMarkerStrokePlacement=function(G){return"CIMMarkerPlacementAlongLineRandomSize"===G.type||"CIMMarkerPlacementAlongLineSameSize"===
G.type||"CIMMarkerPlacementAlongLineVariableSize"===G.type||"CIMMarkerPlacementAtExtremities"===G.type||"CIMMarkerPlacementAtMeasuredUnits"===G.type||"CIMMarkerPlacementAtRatioPositions"===G.type||"CIMMarkerPlacementOnLine"===G.type||"CIMMarkerPlacementOnVertices"===G.type};S.isCIMStroke=function(G){return"CIMGradientStroke"===G.type||"CIMPictureStroke"===G.type||"CIMSolidStroke"===G.type};S.resampleHermite=function(G,Q,F,P,L,M,W=!0){const K=Q/L;F/=M;const D=Math.ceil(K/2),v=Math.ceil(F/2);for(let f=
0;f<M;f++)for(let w=0;w<L;w++){const r=4*(w+(W?M-f-1:f)*L);var b=0;let u=0,I=0,E=0,t=0,q=0,x=0;const J=(f+.5)*F;for(let p=Math.floor(f*F);p<(f+1)*F;p++){var l=Math.abs(J-(p+.5))/v;const h=(w+.5)*K;l*=l;for(let m=Math.floor(w*K);m<(w+1)*K;m++){let A=Math.abs(h-(m+.5))/D;b=Math.sqrt(l+A*A);-1<=b&&1>=b&&(b=2*b*b*b-3*b*b+1,0<b&&(A=4*(m+p*Q),x+=b*G[A+3],I+=b,255>G[A+3]&&(b=b*G[A+3]/250),E+=b*G[A],t+=b*G[A+1],q+=b*G[A+2],u+=b))}}P[r]=E/u;P[r+1]=t/u;P[r+2]=q/u;P[r+3]=x/I}};S.toCIMSymbolJSON=function(G){var Q;
return null==(Q=G.data)?void 0:Q.symbol};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/Extent ../../geometry ../../request ../../rasterRenderers ../support/arcgisLayerUrl ../support/commonProperties ../support/TileInfo ../support/DimensionalDefinition ../support/RasterJobHandler ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h,m){const A=P.getLogger("esri.layers.mixins.ImageryTileMixin");S.ImageryTileMixin=a=>{a=function(d){function k(){var g=d.apply(this,arguments)||this;g._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};g.bandIds=null;g.copyright=null;g.fullExtent=null;g.interpolation="nearest";g.raster=null;g.rasterInfo=null;g.sourceJSON=null;g.spatialReference=null;g.tileInfo=null;g.symbolizer=null;return g}n._inheritsLoose(k,d);var c=k.prototype;
c.updateRenderer=async function(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var g=this._rasterJobHandler.instance;g&&(this.symbolizer.rendererJSON=this.renderer.toJSON(),this.symbolizer.bind(),await g.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}};c.applyRenderer=async function(g,C){var z=g&&g.pixelBlock;if(!(z&&z.pixels&&0<z.pixels.length))return null;this.updateRenderer();z=this._rasterJobHandler.instance;const {bandIds:B}=
this;return z?await z.symbolize({...g,simpleStretchParams:C,bandIds:B}):this.symbolizer.symbolize({...g,simpleStretchParams:C,bandIds:B})};c.getTileUrl=function(g,C,z){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${g}/${C}/${z}`:""};c.getCompatibleTileInfo=function(g,C){if(!this.loaded)return null;const z=f.getInfo(g);return x.create({size:256,spatialReference:g,origin:z?{x:z.origin[0],y:z.origin[1]}:{x:C.xmin,y:C.ymax}})};c.getCompatibleFullExtent=function(g){return this.loaded?
this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(g)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(g):null};c.fetchTile=async function(g,C,z,B={}){if(B.requestAsImageElement)return g=this.getTileUrl(g,C,z),I(g,{responseType:"image",query:{sliceId:this._sliceId,_ts:B.timestamp},signal:B.signal}).then(H=>H.data);await this._initJobHandler();this.multidimensionalDefinition&&(B={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,
...B});"raster-shaded-relief"===this.renderer.type&&(B={buffer:{cols:1,rows:1},...B});return this.raster.fetchTile(g,C,z,B)};c.fetchPixels=async function(g,C,z,B){await this._initJobHandler();this.multidimensionalDefinition&&(B={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,...B});return this.raster.fetchPixels(g,C,z,B)};c.identify=function(g,C={}){this.multidimensionalDefinition&&!C.multidimensionalDefinition&&(C={...C,multidimensionalDefinition:this.multidimensionalDefinition});
return this.raster.identify(g,C)};c.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};c.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};c._configDefaultSettings=function(){this._configDefaultInterpolation();this._configDefaultSlice();this._configDefaultRenderer()};c._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;
const g=new p;this._rasterJobHandler.connectionPromise=g.initialize().then(()=>{this._rasterJobHandler.instance=g;this.raster.rasterJobHandler=g;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};c._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=
null};c._configDefaultInterpolation=function(){if(null==this.interpolation){var g;const C=h.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null==(g=this.sourceJSON)?void 0:g.defaultResamplingMethod);this._set("interpolation",C)}};c._configDefaultSlice=function(){const {multidimensionalInfo:g}=this.raster.rasterInfo;if(F.isSome(g)){if(!this.multidimensionalDefinition){const C=g.variables[0],z=[];C.dimensions.forEach(B=>{z.push(new J({variableName:C.name,dimensionName:B.name,values:B.hasRegularIntervals?
B.extent[0]:B.values[0],isSlice:!0}))});this.multidimensionalDefinition=z}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}};c._configDefaultRenderer=function(){const g=this.raster.rasterInfo;this.bandIds||(this.bandIds=h.getDefaultBandCombination(g));if(!this.renderer){var C;this.renderer=h.createDefaultRenderer(g,{bandIds:this.bandIds,variableName:null==(C=this.multidimensionalDefinition)?void 0:C[0].variableName})}this.symbolizer?(this.symbolizer.rendererJSON=this.renderer.toJSON(),
this.symbolizer.rasterInfo=g):this.symbolizer=new m({rendererJSON:this.renderer.toJSON(),rasterInfo:g});this.symbolizer.bind()||A.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")};n._createClass(k,[{key:"multidimensionalDefinition",set:function(g){this.raster&&(this._sliceId=this.raster.getSliceIndex(g));this._set("multidimensionalDefinition",g)}},{key:"url",set:function(g){this._set("url",t.sanitizeUrl(g,A))}},{key:"renderer",set:function(g){this._set("renderer",g);
this.updateRenderer()}}]);return k}(a);G.__decorate([M.property()],a.prototype,"_cachedRendererJson",void 0);G.__decorate([M.property()],a.prototype,"_sliceId",void 0);G.__decorate([M.property()],a.prototype,"_compatibleFullExtent",void 0);G.__decorate([M.property()],a.prototype,"_rasterJobHandler",void 0);G.__decorate([M.property()],a.prototype,"bandIds",void 0);G.__decorate([M.property()],a.prototype,"copyright",void 0);G.__decorate([M.property({type:r}),W.aliasOf("rasterInfo.extent")],a.prototype,
"fullExtent",void 0);G.__decorate([M.property()],a.prototype,"interpolation",void 0);G.__decorate([M.property({type:[J]})],a.prototype,"multidimensionalDefinition",null);G.__decorate([M.property()],a.prototype,"raster",void 0);G.__decorate([M.property({readOnly:!0}),W.aliasOf("raster.rasterInfo")],a.prototype,"rasterInfo",void 0);G.__decorate([M.property()],a.prototype,"sourceJSON",void 0);G.__decorate([M.property({type:w}),W.aliasOf("rasterInfo.spatialReference")],a.prototype,"spatialReference",
void 0);G.__decorate([M.property({type:x,dependsOn:["rasterInfo"]}),W.aliasOf("rasterInfo.storageInfo.tileInfo")],a.prototype,"tileInfo",void 0);G.__decorate([M.property(q.url)],a.prototype,"url",null);G.__decorate([M.property({types:E.rasterRendererTypes})],a.prototype,"renderer",null);G.__decorate([M.property()],a.prototype,"symbolizer",void 0);return a=G.__decorate([D.subclass("esri.layers.ImageryTileMixin")],a)};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q){var x;G=new L.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=x=function(J){function p(m){m=J.call(this,m)||this;m.dpi=96;m.format=null;m.origin=null;m.minScale=0;m.maxScale=0;m.size=null;m.spatialReference=null;return m}S._inheritsLoose(p,J);p.create=function(m=
{size:256,spatialReference:w.WebMercator}){var A=m.resolutionFactor||1,a=m.scales;const d=m.size||256,k=m.spatialReference||w.WebMercator;if(!f.isValid(k)){A=[];if(a)for(m=0;m<a.length;m++){var c=a[m];A.push({level:m,scale:c,resolution:c})}else for(a=5E-4,m=23;0<=m;m--)A.unshift({level:m,scale:a,resolution:a}),a*=2;return new x({dpi:96,lods:A,origin:new u(0,0,k),size:[d,d],spatialReference:k})}c=f.getInfo(k);m=m.origin?new u({x:m.origin.x,y:m.origin.y,spatialReference:k}):c?new u({x:c.origin[0],y:c.origin[1],
spatialReference:k}):new u({x:0,y:0,spatialReference:k});c=1/(39.37*E.getMetersPerUnitForSR(k)*96);const g=[];if(a)for(A=0;A<a.length;A++){var C=a[A];g.push({level:A,scale:C,resolution:C*c})}else{var z=f.isGeographic(k)?512/d*5.916575275917094E8:256/d*5.91657527591555E8;a=Math.ceil(24/A);g.push({level:0,scale:z,resolution:z*c});for(C=1;C<a;C++)z/=Math.pow(2,A),g.push({level:C,scale:z,resolution:z*c})}return new x({dpi:96,lods:g,origin:m,size:[d,d],spatialReference:k})};var h=p.prototype;h.readOrigin=
function(m,A){return u.fromJSON({spatialReference:A.spatialReference,...m})};h.readSize=function(m,A){return[A.cols,A.rows]};h.writeSize=function(m,A){A.cols=m[0];A.rows=m[0]};h.zoomToScale=function(m){const A=this.scales;if(0>=m)return A[0];if(m>=A.length)return A[A.length-1];{const a=Math.round(m);return A[a]+(a-m)*(A[Math.round(m-.5)]-A[a])}};h.scaleToZoom=function(m){const A=this.scales,a=A.length-1;let d=0;for(;d<a;d++){const k=A[d],c=A[d+1];if(k<=m)break;if(c===m)return d+1;if(k>m&&c<m)return d+
1-(m-c)/(k-c)}return d};h.snapScale=function(m,A=.95){m=this.scaleToZoom(m);return m%Math.floor(m)>=A?this.zoomToScale(Math.ceil(m)):this.zoomToScale(Math.floor(m))};h.tileAt=function(m,A,a,d){var k=this.lodAt(m);if(!k)return null;let c;if("number"===typeof A)c=A,A=a;else{if(f.equals(A.spatialReference,this.spatialReference))c=A.x,A=A.y;else{d=r.project(A,this.spatialReference);if(!d)return null;c=d.x;A=d.y}d=a}a=k.resolution*this.size[0];k=k.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,
extent:t.create()});d.level=m;d.row=Math.floor((this.origin.y-A)/k+.001);d.col=Math.floor((c-this.origin.x)/a+.001);this.updateTileInfo(d);return d};h.updateTileInfo=function(m){var A=this.lodAt(m.level);if(A){var a=A.resolution*this.size[0];A=A.resolution*this.size[1];m.id=`${m.level}/${m.row}/${m.col}`;m.extent||(m.extent=t.create());m.extent[0]=this.origin.x+m.col*a;m.extent[1]=this.origin.y-(m.row+1)*A;m.extent[2]=m.extent[0]+a;m.extent[3]=m.extent[1]+A}};h.upsampleTile=function(m){const A=this._upsampleLevels[m.level];
if(!A||-1===A.parentLevel)return!1;m.level=A.parentLevel;m.row=Math.floor(m.row/A.factor+.001);m.col=Math.floor(m.col/A.factor+.001);this.updateTileInfo(m);return!0};h.getTileBounds=function(m,A){var {resolution:a}=this.lodAt(A.level);const d=a*this.size[0];a*=this.size[1];m[0]=this.origin.x+A.col*d;m[1]=this.origin.y-(A.row+1)*a;m[2]=m[0]+d;m[3]=m[1]+a;return m};h.lodAt=function(m){return this._levelToLOD&&this._levelToLOD[m]||null};h.clone=function(){return x.fromJSON(this.write({}))};h._initializeUpsampleLevels=
function(){const m=this.lods;this._upsampleLevels=[];let A=null;for(let a=0;a<m.length;a++){const d=m[a];this._upsampleLevels[d.level]={parentLevel:A?A.level:-1,factor:A?A.resolution/d.resolution:0};A=d}};S._createClass(p,[{key:"isWrappable",get:function(){const {spatialReference:m,origin:A}=this;if(m&&A){const a=f.getInfo(m);return m.isWrappable&&Math.abs(a.origin[0]-A.x)<=a.dx}return!1}},{key:"lods",set:function(m){let A=0,a=0;const d=[];this._levelToLOD={};m&&(A=-Infinity,a=Infinity,m.forEach(k=>
{d.push(k.scale);A=k.scale>A?k.scale:A;a=k.scale<a?k.scale:a;this._levelToLOD[k.level]=k}));this._set("scales",d);this._set("minScale",A);this._set("maxScale",a);this._set("lods",m);this._initializeUpsampleLevels()}}]);return p}(l.JSONSupport);n.__decorate([P.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],l.prototype,"dpi",void 0);n.__decorate([P.property({type:String,json:{read:G.read,write:G.write,origins:{"web-scene":{read:!1,
write:!1}}}})],l.prototype,"format",void 0);n.__decorate([P.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],l.prototype,"isWrappable",null);n.__decorate([P.property({type:u,json:{write:!0}})],l.prototype,"origin",void 0);n.__decorate([M.reader("origin")],l.prototype,"readOrigin",null);n.__decorate([P.property({type:[q],value:null,json:{write:!0}})],l.prototype,"lods",null);n.__decorate([P.property({readOnly:!0})],l.prototype,"minScale",void 0);n.__decorate([P.property({readOnly:!0})],
l.prototype,"maxScale",void 0);n.__decorate([P.property({readOnly:!0})],l.prototype,"scales",void 0);n.__decorate([P.property({cast:J=>Array.isArray(J)?J:"number"===typeof J?[J,J]:[256,256]})],l.prototype,"size",void 0);n.__decorate([M.reader("size",["rows","cols"])],l.prototype,"readSize",null);n.__decorate([K.writer("size",{cols:{type:F.Integer},rows:{type:F.Integer}})],l.prototype,"writeSize",null);n.__decorate([P.property({type:w,json:{write:!0}})],l.prototype,"spatialReference",void 0);return l=
x=n.__decorate([W.subclass("esri.layers.support.TileInfo")],l)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(S,n,G){function Q(b=v){return[b[0],b[1],b[2],b[3]]}function F(b){return b[0]>=b[2]?0:b[2]-b[0]}function P(b){return b[1]>=b[3]?0:b[3]-b[1]}function L(b,l,f){return l>=b[0]&&f>=b[1]&&l<=b[2]&&f<=b[3]}function M(b,l){b[0]=l[0];b[1]=l[1];b[2]=l[2];b[3]=l[3];return b}function W(b){return 4===b.length}function K(b,l,f){return b<l?l:
b>f?f:b}const D=[Infinity,Infinity,-Infinity,-Infinity],v=[0,0,0,0];S.NEGATIVE_INFINITY=D;S.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];S.UNIT=[0,0,1,1];S.ZERO=v;S.allFinite=function(b){for(let l=0;4>l;l++)if(!isFinite(b[l]))return!1;return!0};S.area=function(b){return F(b)*P(b)};S.center=function(b,l=[0,0]){l[0]=(b[0]+b[2])/2;l[1]=(b[1]+b[3])/2;return l};S.clone=function(b){return[b[0],b[1],b[2],b[3]]};S.contains=function(b,l){return l[0]>=b[0]&&l[2]<=b[2]&&l[1]>=b[1]&&l[3]<=b[3]};
S.containsPoint=function(b,l){return L(b,l[0],l[1])};S.containsPointObject=function(b,l){return L(b,l.x,l.y)};S.containsPointWithMargin=function(b,l,f){return l[0]>=b[0]-f&&l[1]>=b[1]-f&&l[0]<=b[2]+f&&l[1]<=b[3]+f};S.containsXY=L;S.create=Q;S.diameter=function(b){const l=F(b);b=P(b);return Math.sqrt(l*l+b*b)};S.distance=function(b,l){const f=(b[1]+b[3])/2,w=Math.max(Math.abs(l[0]-(b[0]+b[2])/2)-F(b)/2,0);b=Math.max(Math.abs(l[1]-f)-P(b)/2,0);return Math.sqrt(w*w+b*b)};S.empty=function(b){return b?
M(b,D):Q(D)};S.equals=function(b,l,f){if(null==b||null==l)return b===l;if(!W(b)||!W(l))return!1;if(f)for(let w=0;w<b.length;w++){if(!f(b[w],l[w]))return!1}else for(f=0;f<b.length;f++)if(b[f]!==l[f])return!1;return!0};S.expand=function(b,l,f=b){if("length"in l)if(W(l))f[0]=Math.min(b[0],l[0]),f[1]=Math.min(b[1],l[1]),f[2]=Math.max(b[2],l[2]),f[3]=Math.max(b[3],l[3]);else{if(2===l.length||3===l.length)f[0]=Math.min(b[0],l[0]),f[1]=Math.min(b[1],l[1]),f[2]=Math.max(b[2],l[0]),f[3]=Math.max(b[3],l[1])}else switch(l.type){case "extent":f[0]=
Math.min(b[0],l.xmin);f[1]=Math.min(b[1],l.ymin);f[2]=Math.max(b[2],l.xmax);f[3]=Math.max(b[3],l.ymax);break;case "point":f[0]=Math.min(b[0],l.x),f[1]=Math.min(b[1],l.y),f[2]=Math.max(b[2],l.x),f[3]=Math.max(b[3],l.y)}return f};S.expandPointInPlace=function(b,l){l[0]<b[0]&&(b[0]=l[0]);l[0]>b[2]&&(b[2]=l[0]);l[1]<b[1]&&(b[1]=l[1]);l[1]>b[3]&&(b[3]=l[1])};S.expandWithNestedArray=function(b,l,f=b){const w=l.length;let r=b[0],u=b[1],I=b[2];b=b[3];for(let E=0;E<w;E++){const t=l[E];r=Math.min(r,t[0]);u=
Math.min(u,t[1]);I=Math.max(I,t[0]);b=Math.max(b,t[1])}f[0]=r;f[1]=u;f[2]=I;f[3]=b;return f};S.fromExtent=function(b,l=Q()){l[0]=b.xmin;l[1]=b.ymin;l[2]=b.xmax;l[3]=b.ymax;return l};S.fromValues=function(b,l,f,w,r=Q()){r[0]=b;r[1]=l;r[2]=f;r[3]=w;return r};S.height=P;S.intersection=function(b,l,f=b){const w=l[0],r=l[1],u=l[2];l=l[3];f[0]=K(b[0],w,u);f[1]=K(b[1],r,l);f[2]=K(b[2],w,u);f[3]=K(b[3],r,l);return f};S.intersects=function(b,l){return Math.max(l[0],b[0])<=Math.min(l[2],b[2])&&Math.max(l[1],
b[1])<=Math.min(l[3],b[3])};S.is=W;S.isPoint=function(b){return(0===F(b)||!isFinite(b[0]))&&(0===P(b)||!isFinite(b[1]))};S.offset=function(b,l,f,w=b){w[0]=b[0]+l;w[1]=b[1]+f;w[2]=b[2]+l;w[3]=b[3]+f;return w};S.pad=function(b,l,f=b){f[0]=b[0]-l;f[1]=b[1]-l;f[2]=b[2]+l;f[3]=b[3]+l;return f};S.set=M;S.setMax=function(b,l,f=b){f[2]=l[0];f[3]=l[1];f!==b&&(f[0]=b[0],f[1]=b[1]);return b};S.setMin=function(b,l,f=b){f[0]=l[0];f[1]=l[1];f!==b&&(f[2]=b[2],f[3]=b[3]);return f};S.size=function(b,l){l[0]=b[2]-
b[0];l[1]=b[3]-b[1]};S.toExtent=function(b,l){return new G({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:l})};S.width=F;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v){var b;G=b=function(l){function f(w){w=l.call(this,w)||this;w.level=0;w.levelValue=null;w.resolution=0;w.scale=0;return w}S._inheritsLoose(f,l);f.prototype.clone=function(){return new b({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return f}(v.JSONSupport);n.__decorate([P.property({type:F.Integer,json:{write:!0}})],G.prototype,"level",void 0);n.__decorate([P.property({type:String,json:{write:!0}})],G.prototype,"levelValue",
void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"resolution",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"scale",void 0);return G=b=n.__decorate([M.subclass("esri.layers.support.LOD")],G)})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b){var l;G=l=function(f){function w(r){r=f.call(this,r)||this;r.variableName=null;r.dimensionName=null;r.values=[];r.isSlice=!1;return r}S._inheritsLoose(w,f);w.prototype.clone=function(){return new l({variableName:this.variableName,dimensionName:this.dimensionName,values:Q.clone(this.values),isSlice:this.isSlice})};return w}(b.JSONSupport);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"variableName",void 0);n.__decorate([L.property({type:String,
json:{write:!0}})],G.prototype,"dimensionName",void 0);n.__decorate([L.property({type:P.types.array(P.types.oneOf([P.types.native(Number),P.types.array(P.types.native(Number))])),json:{write:!0}})],G.prototype,"values",void 0);n.__decorate([L.property({type:Boolean,json:{write:!0}})],G.prototype,"isSlice",void 0);return G=l=n.__decorate([W.subclass("esri.layers.support.DimensionalDefinition")],G)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","../../core/promiseUtils",
"./PixelBlock","../../core/workers/workers"],function(S,n,G,Q){return function(){function F(){this._workerThread=null;this._destroyed=!1}var P=F.prototype;P.initialize=async function(){const L=await Q.open("RasterWorker");this._destroyed?L.close():this._workerThread=L};P.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};P.decode=async function(L,M){if(!this._workerThread)throw new S("raster-jobhandler:no-connection","no available worker connection");
return(L=await this._workerThread.invoke("decode",L,M))?new G(L):null};P.symbolize=async function(L,M){if(!this._workerThread)throw new S("raster-jobhandler:no-connection","no available worker connection");L={extent:L.extent&&L.extent.toJSON(),pixelBlock:L.pixelBlock.toJSON(),simpleStretchParams:L.simpleStretchParams,bandIds:L.bandIds};return(M=await this._workerThread.invoke("symbolize",L,M))?new G(M):null};P.updateSymbolizer=async function(L,M){var W;if(!this._workerThread)throw new S("raster-jobhandler:no-connection",
"no available worker connection");const K=null==L?void 0:null==(W=L.rendererJSON)?void 0:W.histograms;await n.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:L.toJSON(),histograms:K},M))};P.stretch=async function(L,M){if(!this._workerThread)throw new S("raster-jobhandler:no-connection","no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),stretchParams:L.stretchParams};return(M=await this._workerThread.invoke("stretch",L,
M))?new G(M):null};P.split=async function(L,M){if(!this._workerThread)throw new S("raster-jobhandler:no-connection","no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON(),tileSize:L.tileSize,maximumPyramidLevel:L.maximumPyramidLevel};const W=await this._workerThread.invoke("split",L,M);W&&W.forEach((K,D)=>{W.set(D,K?G.fromJSON(K):null)});return n.resolve(W)};P.estimateStatisticsHistograms=async function(L,M){if(!this._workerThread)throw new S("raster-jobhandler:no-connection",
"no available worker connection");if(null==L||!L.pixelBlock)return null;L={srcPixelBlock:L.pixelBlock.toJSON()};M=await this._workerThread.invoke("estimateStatisticsHistograms",L,M);return n.resolve(M)};P.mosaicAndTransform=async function(L,M){var W;if(!this._workerThread)throw new S("raster-jobhandler:no-connection","no available worker connection");if(null==L||null==(W=L.srcPixelBlocks)||!W.length)return null;L={...L,srcPixelBlocks:L.srcPixelBlocks.map(K=>K?K.toJSON():null)};return(M=await this._workerThread.invoke("mosaicAndTransform",
L,M))?new G(M):null};return F}()})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../core/maybe ../../Color ../../tasks/support/MultipartColorRamp ../../core/unitUtils ./ClassBreakInfo ../ClassBreaksRenderer ./colorRampUtils ../RasterColormapRenderer ../RasterShadedReliefRenderer ../RasterStretchRenderer ./UniqueValueInfo ../UniqueValueRenderer ../VectorFieldRenderer ../../rasterRenderers ../../layers/support/RasterInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u){function I(z,B){var H,O,R,N;z=E(z,null==B?void 0:B.variableName);const {bandCount:V}=z;let {bandIds:Y,stretchType:ba}=B||{};null!=(H=Y)&&H.some(e=>e>=V)&&(Y=null);let da=n.unwrap(z.statistics),ka=n.unwrap(z.histograms);if(1<V){var ha;Y=null!=(ha=Y)&&ha.length?Y:t(z);da=null==da?null:Y.map(e=>da[e]);ka=null==ka?null:Y.map(e=>ka[e])}else Y=[0];null==ba&&(ba=x(z));B=!1;switch(ba){case "none":B=!1;break;case "percent-clip":B=!(null!=(O=ka)&&O.length);break;
default:B=!(null!=(R=da)&&R.length)}z=1===(null==(N=Y)?void 0:N.length)&&"scientific"===z.dataType?g:null;N=new D({stretchType:ba,dynamicRangeAdjustment:B,colorRamp:z,outputMin:0,outputMax:255,gamma:1===Y.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ba?N.maxPercent=N.minPercent=.25:"standard-deviation"===ba&&(N.numberOfStandardDeviations=2);if(!B)if("percent-clip"===ba)N.histograms=ka;else if("min-max"===ba||"standard-deviation"===ba)N.statistics=da;return N}function E(z,B){if(null==B)return z;
let H=n.unwrap(z.statistics),O=n.unwrap(z.histograms);const {multidimensionalInfo:R}=z;if(B&&n.isSome(R)){const {statistics:N,histograms:V}=R.variables.find(Y=>Y.name===B);null!=N&&N.length&&(H=N);null!=V&&V.length&&(O=V)}return w.fromJSON({...z.toJSON(),statistics:H,histograms:O})}function t(z){const B=z.bandCount;if(1===B)return null;if(2===B)return[0];z=z.keyProperties&&z.keyProperties.BandProperties;let H;if(z&&z.length===B){const {red:O,green:R,blue:N,nir:V}=q(z);null!=O&&null!=R&&null!=N?H=
[O,R,N]:null!=V&&null!=O&&null!=R&&(H=[V,O,R])}!H&&3<=B&&(H=[0,1,2]);return H}function q(z){const B={};for(let N=0;N<z.length;N++){var H,O=z[N],R=null==(H=O.BandName)?void 0:H.toLowerCase();"red"===R?B.red=N:"green"===R?B.green=N:"blue"===R?B.blue=N:"nearinfrared"===R||"nearinfrared_1"===R||"nir"===R?B.nir=N:O.WavelengthMax&&O.WavelengthMin&&(R=O.WavelengthMin,O=O.WavelengthMax,null==B.blue&&410<=R&&480>=R&&480<=O&&540>=O?B.blue=N:null==B.green&&490<=R&&560>=R&&560<=O&&610>=O?B.green=N:null==B.red&&
595<=R&&670>=R&&660<=O&&730>=O?B.red=N:null==B.nir&&700<=R&&860>=R&&800<=O&&950>=O&&(B.nir=N))}return B}function x(z){let B="percent-clip";const {pixelType:H,dataType:O,histograms:R,statistics:N}=z;"u8"!==H||"processed"!==O&&n.isSome(R)&&n.isSome(N)?"u8"===H||"elevation"===O||"scientific"===O?B="min-max":n.isSome(R)?B="percent-clip":n.isSome(N)&&(B=B="min-max"):B="none";return B}function J(z,B){if(!m(z,B))return null;({attributeTable:z}=z);const H=p(z,B),O=h(z,"red"),R=h(z,"green"),N=h(z,"blue"),
V=[],Y=new Set,ba=!!(O&&R&&N);z.features.forEach(da=>{const ka=da.attributes[H.name];Y.has(da.attributes[H.name])||null==ka||(Y.add(ka),V.push(new v({value:da.attributes[H.name],label:da.attributes[H.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:ba?new G([da.attributes[O.name],da.attributes[R.name],da.attributes[N.name],1]):new G([0,0,0,0])}})))});if(!ba){const da=M.convertColorRampToColormap(C,V.length);V.forEach((ka,ha)=>ka.symbol.color=new G(da[ha].slice(1,4)))}return new b({field:H.name,
uniqueValueInfos:V})}function p(z,B){let H=z.fields.find(O=>"string"===O.type&&(B===O.name.toLowerCase()||-1<O.name.toLowerCase().indexOf("class")));H||(H=z.fields.find(O=>"string"===O.type))||(H=h(z,"value"));return H}function h(z,B){return z.fields.find(H=>H.name.toLowerCase()===B)}function m(z,B){const {attributeTable:H,bandCount:O}=z;return!n.isSome(H)||1<O||B&&null==H.fields.find(R=>R.name.toLowerCase()===B.toLowerCase())?!1:!0}function A(z){const {bandCount:B,colormap:H}=z;return n.isSome(H)&&
H.length&&1===B}function a(z){if(!A(z))return null;let B;const {attributeTable:H,colormap:O}=z;if(n.isSome(H)){const R=h(H,"value"),N=p(H);"string"===N.type&&(B={},H.features.forEach(V=>{V=V.attributes;B[V[R.name]]=N?V[N.name]:V[R.name]}))}return W.createFromColormap(n.unwrap(O),B)}function d(z){return"elevation"===z.dataType}function k(z){const {attributeTable:B,bandCount:H}=z;return 1===H&&(n.isSome(B)||n.isSome(z.histograms))}function c(z){({dataType:z}=z);return"vector-uv"===z||"vector-magdir"===
z}const g=Q.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),C=Q.fromJSON(M.PREDEFINED_JSON_COLOR_RAMPS[0]);S.createClassBreaksRenderer=function(z,B){z=E(z,null==B?void 0:B.variableName);const {attributeTable:H}=z;if(!k(z))return null;const O=n.isSome(z.histograms)?z.histograms[0]:null,R=(null==B?void 0:B.numClasses)||4;let N=(null==B?void 0:B.field)||"value";const V=[];if(n.isSome(H)){const ba=
H.fields.find(e=>"count"===e.name.toLowerCase()),da=H.fields.find(e=>e.name.toLowerCase()===N.toLowerCase());N=da.name;const ka=H.features.length;let ha=0;H.features.forEach(e=>ha+=e.attributes[ba.name]/ka);H.features.forEach(e=>{const y=e.attributes[da.name];e=e.attributes[ba.name];if(0<e){e=Math.max(1,Math.round(e/ka/ha*1E3));for(let T=0;T<e;T++)V.push(y)}})}else{({pixelType:z}=z);const ba=(O.max-O.min)/O.size,da=(z=-1<z.indexOf("s")||-1<z.indexOf("u"))&&1===ba?Math.floor(O.min+.5):O.min,ka=z&&
1===ba?Math.floor(O.max-.5):O.max,ha=O.size;let e=0;O.counts.forEach(y=>e+=y/ha);O.counts.forEach((y,T)=>{if(0<y){y=Math.max(1,Math.round(y/ha/e*1E3));T=0===T?da:T===ha-1?ka:O.min+ba*(T+.5);for(let U=0;U<y;U++)V.push(T)}})}z=u.createGenerateRendererClassBreaks({values:V,normalizationTotal:null,definition:new r({classificationMethod:(null==B?void 0:B.classificationMethod)||"equal-interval",breakCount:R})});let Y=null==B?void 0:B.colors;Y||(Y=M.convertColorRampToColormap((null==B?void 0:B.colorRamp)||
g,R,!0).map(ba=>ba.slice(1)));B=z.classBreaks.map((ba,da)=>new P({minValue:ba.minValue,maxValue:ba.maxValue,label:ba.label,symbol:{type:"simple-fill",color:Y[da]}}));return new L({field:N,classBreakInfos:B})};S.createColormapRenderer=a;S.createDefaultRenderer=function(z,B){const {attributeTable:H,colormap:O,dataType:R}=z;if("vector-uv"===R||"vector-magdir"===R)return new l;if(n.isSome(O)){var N=a(z);if(n.isSome(N))return N}return n.isSome(H)&&(N=J(z),n.isSome(N))?N:I(z,B)};S.createShadedReliefRenderer=
function(z,B){var H;if(!d(z))return null;({extent:z}=z);z=z.width*F.getMetersPerUnitForSR(z.spatialReference);B=null!=(H=B)?H:"multi-directional";return new K({hillshadeType:B,scalingType:5E6<z?"adjusted":"none"})};S.createStretchRenderer=I;S.createUVRenderer=J;S.getClassField=p;S.getDefaultBandCombination=t;S.getDefaultInterpolation=function(z,B,H){const O=["nearest","bilinear","cubic","majority"].find(R=>R===(null==H?void 0:H.toLowerCase()));return"Map"===B?null!=O?O:"bilinear":"thematic"===z.dataType||
z.attributeTable||z.colormap?"nearest"===O||"majority"===O?O:"nearest":null!=O?O:"bilinear"};S.getSupportedRendererTypes=function(z){const B=["raster-stretch"];A(z)&&B.push("raster-colormap");m(z)&&B.push("unique-value");k(z)&&B.push("class-breaks");d(z)&&B.push("raster-shaded-relief");c(z)&&B.push("vector-field");return B};S.getWellKnownBandIndexes=q;S.isClassBreaksSupported=k;S.isColormapRendererSupported=A;S.isShadedReliefRendererSupported=d;S.isUVRendererSupported=m;S.isVectorFieldRendererSupported=
c;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),function(S,n,G,Q,
F,P,L,M,W,K,D,v,b){G=function(l){function f(w){w=l.call(this,w)||this;w.attributeTable=null;w.bandCount=null;w.colormap=null;w.extent=null;w.format=void 0;w.height=null;w.width=null;w.histograms=null;w.keyProperties={};w.multidimensionalInfo=null;w.noDataValue=null;w.pixelSize=null;w.pixelType=null;w.isPseudoSpatialReference=!1;w.spatialReference=null;w.statistics=null;w.storageInfo=null;w.transform=null;return w}S._inheritsLoose(f,l);S._createClass(f,[{key:"dataType",get:function(){const w=this.keyProperties&&
this.keyProperties.DataType;return w?w.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(w){w&&this._set("nativeExtent",w)}},{key:"nativePixelSize",get:function(){const w=this.nativeExtent;return{x:w.width/this.width,y:w.height/this.height}}}]);return f}(v.JSONSupport);n.__decorate([P.property({json:{write:!0}})],G.prototype,"attributeTable",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"bandCount",void 0);n.__decorate([P.property({json:{write:!0}})],
G.prototype,"colormap",void 0);n.__decorate([P.property({type:String,readOnly:!0})],G.prototype,"dataType",null);n.__decorate([P.property({type:b,json:{write:!0}})],G.prototype,"extent",void 0);n.__decorate([P.property({type:b,dependsOn:["extent"],json:{write:!0}})],G.prototype,"nativeExtent",null);n.__decorate([P.property({dependsOn:["nativeExtent"],json:{write:!0}})],G.prototype,"nativePixelSize",null);n.__decorate([P.property({json:{write:!0}})],G.prototype,"format",void 0);n.__decorate([P.property({json:{write:!0}})],
G.prototype,"height",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"width",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"histograms",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"keyProperties",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"multidimensionalInfo",void 0);n.__decorate([P.property()],G.prototype,"noDataValue",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"pixelSize",void 0);n.__decorate([P.property({json:{write:!0}})],
G.prototype,"pixelType",void 0);n.__decorate([P.property()],G.prototype,"isPseudoSpatialReference",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"spatialReference",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"statistics",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"storageInfo",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"transform",void 0);return G=n.__decorate([M.subclass("esri.layers.support.RasterInfo")],G)})},"esri/tasks/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ClassificationDefinition".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v){G=new L.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});L=new L.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});v=function(b){function l(){var f=b.apply(this,arguments)||this;f.breakCount=null;f.classificationField=null;f.classificationMethod=
null;f.normalizationField=null;f.normalizationType=null;f.type="class-breaks-definition";return f}S._inheritsLoose(l,b);S._createClass(l,[{key:"standardDeviationInterval",set:function(f){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",f)}}]);return l}(v);n.__decorate([P.property({json:{write:!0}})],v.prototype,"breakCount",void 0);n.__decorate([P.property({json:{write:!0}})],v.prototype,"classificationField",void 0);n.__decorate([P.property({type:String,json:{read:G.read,
write:G.write}})],v.prototype,"classificationMethod",void 0);n.__decorate([P.property({json:{write:!0}})],v.prototype,"normalizationField",void 0);n.__decorate([P.property({json:{read:L.read,write:L.write}})],v.prototype,"normalizationType",void 0);n.__decorate([P.property({value:null,json:{write:!0}})],v.prototype,"standardDeviationInterval",null);n.__decorate([P.property()],v.prototype,"type",void 0);return v=n.__decorate([M.subclass("esri.tasks.support.ClassBreaksDefinition")],v)})},"esri/tasks/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols/Symbol ./colorRamps".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l){G=new L.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});v=function(f){function w(){var r=f.apply(this,arguments)||this;r.baseSymbol=null;r.colorRamp=null;r.type=null;return r}S._inheritsLoose(w,f);return w}(v.JSONSupport);n.__decorate([P.property({type:b,json:{write:!0}})],v.prototype,"baseSymbol",void 0);n.__decorate([P.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],v.prototype,"colorRamp",void 0);
n.__decorate([P.property({json:{read:G.read,write:G.write}})],v.prototype,"type",void 0);return v=n.__decorate([M.subclass("esri.tasks.support.ClassificationDefinition")],v)})},"esri/tasks/support/generateRendererUtils":function(){define(["exports"],function(S){function n(D){const {classificationMethod:v,breakCount:b,normalizationType:l}=D.definition,f=[];var w=D.values;if(0===w.length)return[];w=w.sort((q,x)=>q-x);var r=w[0];D=w[w.length-1];if("equal-interval"===v)if(w.length>=b){w=(D-r)/b;var u=
r;for(var I=1;I<b;I++){var E=Number((r+I*w).toFixed(6));f.push({minValue:u,maxValue:E,label:G(u,E,l)});u=E}f.push({minValue:u,maxValue:D,label:G(u,D,l)})}else w.forEach(q=>{f.push({minValue:q,maxValue:q,label:G(q,q,l)})});else if("natural-breaks"===v){w=Q(w);u=F(w.uniqueValues,w.valueFrequency,b);for(I=1;I<b;I++)w.uniqueValues.length>I&&(E=Number(w.uniqueValues[u[I]].toFixed(6)),f.push({minValue:r,maxValue:E,label:G(r,E,l)}),r=E);f.push({minValue:r,maxValue:D,label:G(r,D,l)})}else if("quantile"===
v)if(w.length>=b&&r!==D){u=Math.ceil(w.length/b);I=0;for(E=1;E<b;E++){var t=u+I-1;t>w.length&&(t=w.length-1);0>t&&(t=0);f.push({minValue:r,maxValue:w[t],label:G(r,w[t],l)});r=w[t];I+=u;u=Math.ceil((w.length-I)/(b-E))}f.push({minValue:r,maxValue:D,label:G(r,D,l)})}else for(D=-1,r=0;r<w.length;r++)u=w[r],u!==D&&(D=u,f.push({minValue:D,maxValue:u,label:G(D,u,l)}),D=u);else if("standard-deviation"===v)if(u=M(w),I=W(w,u),0===I)f.push({minValue:w[0],maxValue:w[0],label:G(w[0],w[0],l)});else{w=L(r,D,b,u,
I)*I;I=0;for(E=b;1<=E;E--)t=Number((u-(E-.5)*w).toFixed(6)),f.push({minValue:r,maxValue:t,label:G(r,t,l)}),r=t,I++;E=Number((u+.5*w).toFixed(6));f.push({minValue:r,maxValue:E,label:G(r,E,l)});r=E;I++;for(t=1;t<=b;t++)E=I===2*b?D:Number((u+(t+.5)*w).toFixed(6)),f.push({minValue:r,maxValue:E,label:G(r,E,l)}),r=E,I++}return f}function G(D,v,b){let l=null;return l=D===v?b&&"percent-of-total"===b?D+"%":D.toString():b&&"percent-of-total"===b?D+"% - "+v+"%":D+" - "+v}function Q(D){const v=[],b=[];let l=
Number.MIN_VALUE,f=1,w=-1;for(let r=0;r<D.length;r++){const u=D[r];u===l?(f++,b[w]=f):null!==u&&(v.push(u),l=u,f=1,b.push(f),w++)}return{uniqueValues:v,valueFrequency:b}}function F(D,v,b){var l=D.length;const f=[];b>l&&(b=l);for(var w=0;w<b;w++)f.push(Math.round(w*l/b-1));f.push(l-1);w=P(f,D,v,b);{l=w.mean;w=w.sdcm;var r=b,u=0,I=0;let t=0,q=0,x=!0;for(let J=0;2>J&&x;J++){0===J&&(x=!1);for(var E=0;E<r-1;E++)for(;f[E+1]+1!==f[E+2];)if(f[E+1]+=1,u=K(E,f,D,v),t=u.sbMean,u=u.sbSdcm,I=K(E+1,f,D,v),q=I.sbMean,
I=I.sbSdcm,u+I<w[E]+w[E+1])w[E]=u,w[E+1]=I,l[E]=t,l[E+1]=q,x=!0;else{--f[E+1];break}for(E=r-1;0<E;E--)for(;f[E]!==f[E-1]+1;)if(--f[E],u=K(E-1,f,D,v),t=u.sbMean,u=u.sbSdcm,I=K(E,f,D,v),q=I.sbMean,I=I.sbSdcm,u+I<w[E-1]+w[E])w[E-1]=u,w[E]=I,l[E-1]=t,l[E]=q,x=!0;else{f[E]+=1;break}}l=x}l&&(w=P(f,D,v,b));return f}function P(D,v,b,l){let f=[];var w=[],r=[];let u=0;const I=[],E=[];for(var t=0;t<l;t++){var q=K(t,D,v,b);I.push(q.sbMean);E.push(q.sbSdcm);u+=E[t]}q=u;for(t=!0;t||u<q;){t=!1;f=[];for(w=0;w<l;w++)f.push(D[w]);
for(r=0;r<l;r++)for(q=D[r]+1;q<=D[r+1];q++)if(w=v[q],0<r&&q!==D[r+1]&&Math.abs(w-I[r])>Math.abs(w-I[r-1]))D[r]=q;else if(r<l-1&&D[r]!==q-1&&Math.abs(w-I[r])>Math.abs(w-I[r+1])){D[r+1]=q-1;break}q=u;u=0;w=[];r=[];for(let x=0;x<l;x++){w.push(I[x]);r.push(E[x]);const J=K(x,D,v,b);I[x]=J.sbMean;E[x]=J.sbSdcm;u+=E[x]}}if(u>q){for(v=0;v<l;v++)D[v]=f[v],I[v]=w[v],E[v]=r[v];u=q}return{mean:I,sdcm:E}}function L(D,v,b,l,f){D=Math.max(l-D,v-l)/f/b;return 1<=D?1:.5<=D?.5:.25}function M(D){let v=0;for(let b=0;b<
D.length;b++)v+=D[b];return v/=D.length}function W(D,v){let b=0;for(let l=0;l<D.length;l++){const f=D[l];b+=(f-v)*(f-v)}b/=D.length;return Math.sqrt(b)}function K(D,v,b,l){var f=0,w=0;for(var r=v[D]+1;r<=v[D+1];r++){const u=l[r];f+=b[r]*u;w+=u}0>=w&&console.log("Exception in Natural Breaks calculation");f/=w;w=0;for(r=v[D]+1;r<=v[D+1];r++)w+=l[r]*Math.pow(b[r]-f,2);return{sbMean:f,sbSdcm:w}}S.createGenerateRendererClassBreaks=function(D){const {normalizationTotal:v}=D;return{classBreaks:n(D),normalizationTotal:v}};
S.createGenerateRendererUniqueValues=function(D){D=Q(D);const v=[],b=D.uniqueValues.length;for(let l=0;l<b;l++){const f=D.uniqueValues[l];v.push({value:f,count:D.valueFrequency[l],label:f.toString()})}return{uniqueValues:v}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u){function I(x,J){const {attributeTable:p,bandCount:h}=x;return!Q.isSome(p)||1<h||J&&null==p.fields.find(m=>m.name.toLowerCase()===J.toLowerCase())?!1:!0}function E(x){const {bandCount:J,colormap:p}=x;return Q.isSome(p)&&p.length&&1===J}const t=F.getLogger("esri.renderers.support.RasterSymbolizer"),q={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};G=function(x){function J(h){return x.call(this,h)||this}S._inheritsLoose(J,x);var p=J.prototype;p.bind=function(){const {rendererJSON:h}=this;if(!h)return!1;this.lookup={rendererJSON:{}};let m;switch(h.type){case "uniqueValue":m=this._updateUVRenderer(h);break;case "rasterColormap":m=this._updateColormapRenderer(h);break;case "rasterStretch":m=this._updateStretchRenderer(h);break;case "classBreaks":m=this._updateClassBreaksRenderer(h);break;case "rasterShadedRelief":m=
this._updateShadedReliefRenderer(h)}return m};p.symbolize=function(h){let m=h&&h.pixelBlock;if(!this.isValidPixelBlock(m))return m;if(h.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(m,h.simpleStretchParams);try{3<m.pixels.length&&(m=r.extractBands(m,[0,1,2]));let A;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":A=this._symbolize_colormap(m);break;case "classBreaks":A=this._symbolize_classBreaks(m);break;case "rasterStretch":A=this._symbolize_stretch(m,
h.bandIds);break;case "rasterShadedRelief":({extent:h}=h),A=this._symbolize_shadedRelief(m,{isGCS:h.spatialReference.isGeographic,resolution:{x:(h.xmax-h.xmin)/m.width,y:(h.ymax-h.ymin)/m.height}})}return A}catch(A){return t.error("symbolize",A.message),m}};p.simpleStretch=function(h,m){if(!this.isValidPixelBlock(h))return h;try{return 3<h.pixels.length&&(h=r.extractBands(h,[0,1,2])),r.stretch(h,m)}catch(A){return t.error("symbolize",A.message),h}};p.generateWebGLParameters=function(h){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){const {indexedColormap:k,offset:c}=this.lookup.colormapLut;return{colormap:k,colormapOffset:c,type:"lut"}}const {pixelBlock:m,isGCS:A,resolution:a,bandIds:d}=h;({rendererJSON:h}=this);return"rasterStretch"===h.type?this.generateStretchWebGLParams(m,h,d):"rasterShadedRelief"===h.type?this.generateShadedReliefWebGLParams(h,A,a):null};p._isLUTChanged=function(h){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const m=
this.rendererJSON.colorRamp;if(h)return JSON.stringify(m)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};p._symbolize_colormap=function(h){return this._isLUTChanged()&&!this.bind()?h:r.colorize(h,this.lookup.colormapLut)};p._symbolize_classBreaks=function(h){const m=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?h:m?r.colorize(h,this.lookup.colormapLut):
r.remapColor(h,this.lookup.remapLut)};p._symbolize_stretch=function(h,m){const {pixelType:A,bandCount:a}=this.rasterInfo,d=this.rendererJSON;var k=-1<["u8","u16","s8","s16"].indexOf(A);let c;const {gamma:g,useGamma:C}=d;if(k){var z;if(d.dra)k=this.getStretchCutoff(d,h,m),c=r.createStretchLUT({pixelType:A,...k,gamma:C?g:null});else{if(this._isLUTChanged()&&!this.bind())return h;c=this.lookup?this.lookup.stretchLut:null}if(!c)return h;1<a&&(null==m?void 0:m.length)===h.pixels.length&&(null==(z=c)?void 0:
z.lut.length)===a&&(c={lut:m.map(B=>c.lut[B]),offset:c.offset});m=r.lookupPixels(h,c)}else m=this.getStretchCutoff(d,h,m),m=r.stretch(h,{...m,gamma:C?g:null});if(d.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return h;m=r.colorize(m,this.lookup.colormapLut)}return m};p._symbolize_shadedRelief=function(h,m){var A,a,d=this.rendererJSON;m=u.hillshade(h,{...d,...m});if(!d.colorRamp||this._isLUTChanged(!0)&&!this.bind())return m;d=this.lookup?this.lookup.hsvMap:null;if(!d)return m;const k=null!=
(A=null==(a=Q.unwrap(this.rasterInfo.statistics))?void 0:a[0])?A:{min:0,max:8E3};u.tintHillshade(m,h,d,k);return m};p._updateUVRenderer=function(h){const {bandCount:m,attributeTable:A,statistics:a,pixelType:d}=this.rasterInfo,k=h.field1;if(!k)return!1;var c=-1<["u8","s8"].indexOf(d)&&a&&null!=a[0].min&&null!=a[0].max;if(!(I(this.rasterInfo,k)||1===m&&c))return!1;const g=[];if(A){const C=A.fields.filter(z=>"value"===z.name.toLowerCase())[0];if(!C)return!1;A.features.forEach(z=>{var B,H=h.uniqueValueInfos.filter(O=>
String(O.value)===String(z.attributes[k]))[0];(H=null==H?void 0:null==(B=H.symbol)?void 0:B.color)&&g.push([z.attributes[C.name]].concat(H))})}else{if("value"!==k.toLowerCase())return!1;h.uniqueValueInfos.forEach(C=>{var z;const B=null==C?void 0:null==(z=C.symbol)?void 0:z.color;B&&g.push([parseInt(""+C.value,10)].concat(B))})}if(0===g.length)return!1;c=r.createColormapLUT({colormap:g});this.lookup={rendererJSON:h,colormapLut:c};return this.canRenderInWebGL=!0};p._updateColormapRenderer=function(h){if(!E(this.rasterInfo))return!1;
var m=h.colormapInfos.map(A=>[A.value].concat(A.color)).sort((A,a)=>A[0]-a[0]);if(!m||0===m.length)return!1;m=r.createColormapLUT({colormap:m});this.lookup={rendererJSON:h,colormapLut:m};return this.canRenderInWebGL=!0};p._updateShadedReliefRenderer=function(h){if("elevation"!==this.rasterInfo.dataType)return!1;if(h.colorRamp){var m=f.convertColorRampToColormap(h.colorRamp,256,!0);m=r.createColormapLUT({colormap:m});const A=[],a=m.indexedColormap;for(let d=0;d<a.length;d+=4){const k=l.toHSV({r:a[d],
g:a[d+1],b:a[d+2]});A.push([k.h/60,k.s/100,255*k.v/100])}this.lookup={rendererJSON:h,colormapLut:m,hsvMap:A}}else this.lookup=null;return this.canRenderInWebGL=!0};p._updateClassBreaksRenderer=function(h){var m=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),A=h.classBreakInfos;if(null==A||!A.length)return!1;A=A.sort((g,C)=>g.classMaxValue-C.classMaxValue);const a=A[A.length-1];var d=h.minValue;if(!m){m=[];for(var k=0;k<A.length;k++){var c;m.push({value:null!=(c=A[k].classMinValue)?
c:d,mappedColor:A[k].symbol.color});d=A[k].classMaxValue}m.push({value:a.classMaxValue,mappedColor:a.symbol.color});this.lookup={rendererJSON:h,remapLut:m};this.canRenderInWebGL=!1;return!0}c=[];d=h.minValue;for(m=0;m<A.length;m++){for(k=A[m];d<k.classMaxValue;d++)c.push([d].concat(k.symbol.color));d=k.classMaxValue}c.push([a.classMaxValue].concat(a.symbol.color));A=r.createColormapLUT({colormap:c,fillUnspecified:!1});this.lookup={rendererJSON:h,colormapLut:A};return this.canRenderInWebGL=!0};p._updateStretchRenderer=
function(h){if(!("none"===h.stretchType||h.statistics||this.rasterInfo.statistics||h.dra))return!1;var m=h.histograms||this.rasterInfo.histograms;if(!h.dra&&"percentClip"===h.stretchType&&!m)return!1;const {gamma:A,useGamma:a,colorRamp:d}=h;m=this.rasterInfo.pixelType;if(!h.dra&&-1<["u8","u16","s8","s16"].indexOf(m)){const k=this.getStretchCutoff(h);m=r.createStretchLUT({pixelType:m,...k,gamma:a?A:null});this.lookup={rendererJSON:h,stretchLut:m}}d&&(m=f.convertColorRampToColormap(d,256,!0),this.lookup||
(this.lookup={rendererJSON:h}),this.lookup.colormapLut=r.createColormapLUT({colormap:m}),this.lookup.rendererJSON=h);return this.canRenderInWebGL=!0};p.getStretchCutoff=function(h,m,A){var a=h.stretchType;if(h.dra)if("minMax"===a&&m.statistics)var d=m.statistics.map(R=>[R.minValue,R.maxValue,0,0]);else{var k=r.estimateStatisticsHistograms(m);d=k.statistics;k=k.histograms}else{var c;d=0<(null==(c=h.statistics)?void 0:c.length)?h.statistics:Q.unwrap(this.rasterInfo.statistics);k=h.histograms||Q.unwrap(this.rasterInfo.histograms)}var g=
d||k?(d||k).length:this.rasterInfo.bandCount;c=[];m=[];let C;let z,B,H;d&&!Array.isArray(d[0])&&(d=d.map(R=>[R.min,R.max,R.avg,R.stddev]));switch(a){case "none":k=q[this.rasterInfo.pixelType]||q.f32;for(a=0;a<g;a++)c[a]=k[0],m[a]=k[1];break;case "minMax":for(a=0;a<g;a++)c[a]=d[a][0],m[a]=d[a][1];break;case "standardDeviation":for(a=0;a<g;a++)c[a]=d[a][2]-h.numberOfStandardDeviations*d[a][3],m[a]=d[a][2]+h.numberOfStandardDeviations*d[a][3],c[a]<d[a][0]&&(c[a]=d[a][0]),m[a]>d[a][1]&&(m[a]=d[a][1]);
break;case "percentClip":for(a=0;a<k.length;a++){d=k[a];z=new Uint32Array(d.size);var O=d.counts;C=0;g=(d.max-d.min)/d.size;B=-.5===d.min&&1===g?.5:0;for(H=0;H<d.size;H++)C+=O[H],z[H]=C;O=h.minPercent*C/100;for(H=0;H<d.size;H++)if(z[H]>O){c[a]=d.min+g*(H+B);break}O=(1-h.maxPercent/100)*C;for(H=d.size-2;0<=H;H--)if(z[H]<O){m[a]=d.min+g*(H+2-B);break}}break;default:for(a=0;a<g;a++)c[a]=d[a][0],m[a]=d[a][1]}return this.getSelectedBandCutoffs({minCutOff:c,maxCutOff:m,outMax:h.max||255,outMin:h.min||0},
A)};p.getSelectedBandCutoffs=function(h,m){if(null==m||0===m.length)return h;const A=Math.max.apply(null,m),{minCutOff:a,maxCutOff:d,outMin:k,outMax:c}=h;return a.length===m.length||a.length<=A?h:{minCutOff:m.map(g=>a[g]),maxCutOff:m.map(g=>d[g]),outMin:k,outMax:c}};p.generateStretchWebGLParams=function(h,m,A){let a=null,d=null;var k=this.lookup&&this.lookup.colormapLut;m.colorRamp&&k&&(a=k.indexedColormap,d=k.offset);({gamma:k}=m);const c=!!(m.useGamma&&k&&k.some(R=>1!==R)),{minCutOff:g,maxCutOff:C,
outMin:z,outMax:B}=this.getStretchCutoff(m,h,A);h&&h.pixels&&2===h.pixels.length&&(h=h.clone(),h.statistics=[h.statistics[0]],h.pixels=[h.pixels[0]]);h=Math.min(3,A&&A.length||h&&h.getPlaneCount()||this.rasterInfo.bandCount);m=new Float32Array(h);A=a||c?1:255;let H;for(H=0;H<h;H++)m[H]=(B-z)/(C[H]-g[H])/A;const O=new Float32Array(h);if(c)for(H=0;H<h;H++)O[H]=1<k[H]?2<k[H]?6.5+Math.pow(k[H]-2,2.5):6.5+100*Math.pow(2-k[H],4):1;return{bandCount:h,outMin:z/A,outMax:B/A,minCutOff:g,maxCutOff:C,factor:m,
useGamma:c,gamma:c?k:[1,1,1],gammaCorrection:c?O:[1,1,1],colormap:a,colormapOffset:d,type:"stretch"}};p.generateShadedReliefWebGLParams=function(h,m,A){var a,d,k;let c=null,g=null;const C=this.lookup&&this.lookup.colormapLut;h.colorRamp&&C&&(c=C.indexedColormap,g=C.offset);m=u.calculateHillshadeParams({...h,isGCS:m,resolution:A});A=null==(a=Q.unwrap(this.rasterInfo.statistics))?void 0:a[0];return{...m,minValue:null!=(d=A.min)?d:0,maxValue:null!=(k=A.max)?k:8E3,hillshadeType:"traditional"===h.hillshadeType?
0:1,type:"hillshade",colormap:c,colormapOffset:g}};p.isValidPixelBlock=function(h){return!!(h&&h.pixels&&0<h.pixels.length&&0!==h.validPixelCount)};return J}(b.JSONSupport);n.__decorate([L.property({json:{write:!0}})],G.prototype,"rendererJSON",void 0);n.__decorate([L.property({type:w,json:{write:!0}})],G.prototype,"rasterInfo",void 0);n.__decorate([L.property({json:{write:!0}})],G.prototype,"lookup",void 0);n.__decorate([L.property({})],G.prototype,"canRenderInWebGL",void 0);return G=n.__decorate([W.subclass("esri.renderers.support.RasterSymbolizer")],
G)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(S,n){function G(b,l){b=Math.min(Math.max(b,-100),100);l=Math.min(Math.max(l,-100),100);let f,w;const r=new Uint8Array(256);for(f=0;256>f;f++)0<b&&100>b?w=(200*f-25500+510*l)/(2*(100-b))+128:0>=b&&-100<b?w=(200*f-25500+510*l)*(100+b)/2E4+128:100===b?(w=200*f-25500+256*(100-b)+510*l,w=0<w?255:0):-100===b&&(w=128),r[f]=255<w?255:0>w?0:w;return r}function Q(b,l,f,w,r,u,I,E){return{xmin:r<=f*b?
0:r<f*b+b?r-f*b:b,ymin:u<=w*l?0:u<w*l+l?u-w*l:l,xmax:r+I<=f*b?0:r+I<f*b+b?r+I-f*b:b,ymax:u+E<=w*l?0:u+E<w*l+l?u+E-w*l:l}}function F(b,l,f,w){var r=b.filter(H=>v(H))[0];if(null==r)return null;const u=w?w.width:l.width;w=w?w.height:l.height;const I=r.width,E=r.height,t=l.width/I;l=l.height/E;const q=f?f.x:0;f=f?f.y:0;const x=r.pixelType;var J=n.getPixelArrayConstructor(x);const p=r.pixels.length;r=[];let h,m;var A;let a,d,k,c,g,C,z;for(d=0;d<p;d++){m=new J(u*w);for(k=0;k<l;k++)for(c=0;c<t;c++)if(A=
b[k*t+c])for(h=A.pixels[d],z=Q(I,E,c,k,q,f,u,w),g=z.ymin;g<z.ymax;g++)for(A=(k*E+g-f)*u+(c*I-q),a=g*I,C=z.xmin;C<z.xmax;C++)m[A+C]=h[a+C];r.push(m)}let B;if(b.some(H=>null==H||H.mask&&0<H.mask.length))for(B=new Uint8Array(u*w),k=0;k<l;k++)for(c=0;c<t;c++)if(J=(A=b[k*t+c])?A.mask:null,z=Q(I,E,c,k,q,f,u,w),J)for(g=z.ymin;g<z.ymax;g++)for(A=(k*E+g-f)*u+(c*I-q),a=g*I,C=z.xmin;C<z.xmax;C++)B[A+C]=J[a+C];else if(A)for(g=z.ymin;g<z.ymax;g++)for(A=(k*E+g-f)*u+(c*I-q),a=g*I,C=z.xmin;C<z.xmax;C++)B[A+C]=1;
else for(g=z.ymin;g<z.ymax;g++)for(A=(k*E+g-f)*u+(c*I-q),a=g*I,C=z.xmin;C<z.xmax;C++)B[A+C]=0;b=new n({width:u,height:w,pixels:r,pixelType:x,mask:B});b.updateStatistics();return b}function P(b){if(!v(b))return null;const l=b.clone(),{width:f,height:w,pixels:r,mask:u}=b;var I=r[0];b=l.pixels[0];for(let q=2;q<w-1;q++){const x=new Map;for(var E=q-2;E<q+2;E++)for(var t=0;4>t;t++){const J=E*f+t;W(x,I[J],u?u[J]:1)}b[q*f]=L(x);b[q*f+1]=b[q*f+2]=b[q*f];for(E=3;E<f-1;E++)t=(q-2)*f+E+1,W(x,I[t],u?u[t]:1),t=
(q-1)*f+E+1,W(x,I[t],u?u[t]:1),t=q*f+E+1,W(x,I[t],u?u[t]:1),t=(q+1)*f+E+1,W(x,I[t],u?u[t]:1),t=(q-2)*f+E-3,M(x,I[t],u?u[t]:1),t=(q-1)*f+E-3,M(x,I[t],u?u[t]:1),t=q*f+E-3,M(x,I[t],u?u[t]:1),t=(q+1)*f+E-3,M(x,I[t],u?u[t]:1),b[q*f+E]=L(x);b[q*f+E+1]=b[q*f+E]}for(I=0;I<f;I++)b[I]=b[f+I]=b[2*f+I],b[(w-1)*f+I]=b[(w-2)*f+I];l.updateStatistics();return l}function L(b){if(0===b.size)return 0;let l=0,f=-1,w=0;const r=b.keys();let u=r.next();for(;!u.done;)w=b.get(u.value),w>l&&(f=u.value,l=w),u=r.next();return f}
function M(b,l,f){0!==f&&(f=b.get(l),1===f?b.delete(l):b.set(l,f-1))}function W(b,l,f){0!==f&&b.set(l,b.has(l)?b.get(l)+1:1)}function K(b,l,f){let {x:w,y:r}=l;const {width:u,height:I}=f;if(0===w&&0===r&&I===b.height&&u===b.width)return b;const {width:E,height:t}=b;l=Math.max(0,r);const q=Math.max(0,w),x=Math.min(w+u,E),J=Math.min(r+I,t);if(0>x||0>J||!v(b))return null;w=Math.max(0,-w);r=Math.max(0,-r);const {pixels:p,mask:h}=b;var m=u*I,A=p.length;const a=[];for(var d=0;d<A;d++){var k=p[d],c=n.createEmptyBand(b.pixelType,
m);for(let g=l;g<J;g++){const C=g*E;let z=(g+r-l)*u+w;for(let B=q;B<x;B++)c[z++]=k[C+B]}a.push(c)}m=new Uint8Array(m);for(A=l;A<J;A++)for(d=A*E,k=(A+r-l)*u+w,c=q;c<x;c++)m[k++]=h?h[d+c]:1;b=new n({width:f.width,height:f.height,pixelType:b.pixelType,pixels:a,mask:m});b.updateStatistics();return b}function D(b,l=!0){if(!v(b))return null;const {pixels:f,width:w,height:r,mask:u,pixelType:I}=b;b=[];const E=Math.round(w/2),t=Math.round(r/2),q=r-1,x=w-1;for(var J=0;J<f.length;J++){var p=f[J],h=n.createEmptyBand(I,
E*t),m=0;for(var A=0;A<r;A+=2)for(var a=0;a<w;a+=2){var d=p[A*w+a];if(l){var k=a===x?d:p[A*w+a+1];const c=A===q?d:p[A*w+a+w],g=a===x?c:A===q?k:p[A*w+a+w+1];h[m++]=(d+k+c+g)/4}else h[m++]=d}b.push(h)}J=null;if(u)for(J=new Uint8Array(E*t),p=0,h=0;h<r;h+=2)for(m=0;m<w;m+=2)A=u[h*w+m],l?(a=m===x?A:u[h*w+m+1],d=h===q?A:u[h*w+m+w],k=m===x?d:h===q?a:u[h*w+m+w+1],J[p++]=A*a*d*k?1:0):J[p++]=A;return new n({width:E,height:t,pixelType:I,pixels:b,mask:J})}const v=function(b){return b&&"esri.layers.support.PixelBlock"===
b.declaredClass&&b.pixels&&0<b.pixels.length};S.approximateTransform=function(b,l,f,w,r="nearest"){if(!v(b))return null;"majority"===r&&(b=P(b));const {pixels:u,mask:I,pixelType:E}=b,t=b.width;var q=b.height;b=n.getPixelArrayConstructor(E);var x=u.length;const {width:J,height:p}=l;l=w.cols;var h=w.rows;const m=Math.ceil(J/l),A=Math.ceil(p/h);w=!1;for(var a=0;a<f.length;a+=3)-1===f[a]&&-1===f[a+1]&&-1===f[a+2]&&(w=!0);let d,k,c,g,C,z;const B=new Float32Array(J*p),H=new Float32Array(J*p);a=0;let O,
R;const N="majority"===r?0:.5;for(let ba=0;ba<A;ba++)for(let da=0;da<m;da++){d=12*(ba*m+da);r=f[d];k=f[d+1];c=f[d+2];g=f[d+3];C=f[d+4];z=f[d+5];for(var V=0;V<h;V++){a=(ba*h+V)*J+da*l;R=(V+.5)/h;for(var Y=0;Y<V;Y++)O=(Y+.5)/l,B[a+Y]=Math.round((r*O+k*R+c)*t-N),H[a+Y]=Math.round((g*O+C*R+z)*q-N)}d+=6;r=f[d];k=f[d+1];c=f[d+2];g=f[d+3];C=f[d+4];z=f[d+5];for(V=0;V<h;V++)for(a=(ba*h+V)*J+da*l,R=(V+.5)/h,Y=V;Y<l;Y++)O=(Y+.5)/l,B[a+Y]=Math.round((r*O+k*R+c)*t-N),H[a+Y]=Math.round((g*O+C*R+z)*q-N)}f=(ba,da)=>
{for(let ka=0;ka<p;ka++){d=ka*J;for(let ha=0;ha<J;ha++)ba[d]=0>B[d]||0>H[d]?0:da[B[d]+H[d]*t],d++}};q=[];for(h=0;h<x;h++)l=new b(J*p),f(l,u[h]),q.push(l);b=new n({width:J,height:p,pixelType:E,pixels:q});if(I)b.mask=new Uint8Array(J*p),f(b.mask,I);else if(w)for(b.mask=new Uint8Array(J*p),x=0;x<J*p;x++)b.mask[x]=0>B[x]||0>H[x]?0:1;b.updateStatistics();return b};S.clip=K;S.colorize=function(b,l){if(!v(b)||!l&&(l.indexedColormap||l.indexed2DColormap))return b;const f=b.clone();var w=f.pixels;let r=f.mask;
const u=f.width*f.height;if(1!==w.length)return b;const {indexedColormap:I,indexed2DColormap:E,offset:t,alphaSpecified:q}=l;l=I.length-1;b=0;w=w[0];const x=new Uint8Array(w.length),J=new Uint8Array(w.length),p=new Uint8Array(w.length);let h=0;if(I)if(r)for(b=0;b<u;b++)r[b]&&(h=4*(w[b]-t),h<t||h>l?r[b]=0:(x[b]=I[h],J[b]=I[h+1],p[b]=I[h+2],r[b]=I[h+3]));else{r=new Uint8Array(u);for(b=0;b<u;b++)h=4*(w[b]-t),h<t||h>l?r[b]=0:(x[b]=I[h],J[b]=I[h+1],p[b]=I[h+2],r[b]=I[h+3]);f.mask=r}else if(r)for(b=0;b<
u;b++)r[b]&&(l=E[w[b]],x[b]=l[0],J[b]=l[1],p[b]=l[2],r[b]=l[3]);else{r=new Uint8Array(u);for(b=0;b<u;b++)l=E[w[b]],x[b]=l[0],J[b]=l[1],p[b]=l[2],r[b]=l[3];f.mask=r}f.pixels=[x,J,p];f.statistics=null;f.pixelType="u8";f.maskIsAlpha=q;return f};S.createColormapLUT=function(b){if(b){var l=b.colormap;if(l&&0!==l.length){l=l.sort((q,x)=>q[0]-x[0]);var f=0;0>l[0][0]&&(f=l[0][0]);var w=Math.max(256,l[l.length-1][0]-f+1),r=new Uint8Array(4*w),u=[],I=0,E=0,t=5===l[0].length;if(65536<w)return l.forEach(q=>{u[q[0]-
f]=t?q.slice(1):q.slice(1).concat([255])}),{indexed2DColormap:u,offset:f,alphaSpecified:t};if(b.fillUnspecified)for(b=l[E],I=b[0]-f;I<w;I++)r[4*I]=b[1],r[4*I+1]=b[2],r[4*I+2]=b[3],r[4*I+3]=t?b[4]:255,I===b[0]-f&&(b=E===l.length-1?b:l[++E]);else for(I=0;I<l.length;I++)b=l[I],E=4*(b[0]-f),r[E]=b[1],r[E+1]=b[2],r[E+2]=b[3],r[E+3]=t?b[4]:255;return{indexedColormap:r,offset:f,alphaSpecified:t}}}};S.createContrastBrightnessLUT=G;S.createStretchLUT=function(b){const {minCutOff:l,maxCutOff:f,gamma:w,pixelType:r}=
b,u=b.outMin||0,I=b.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(r))return null;const E=l.length;let t;let q=0;"s8"===r?q=-127:"s16"===r&&(q=-32767);let x=256;-1<["u16","s16"].indexOf(r)&&(x=65536);const J=[],p=I-u;for(t=0;t<E;t++)J[t]=f[t]-l[t];var h=w&&w.length>=E;const m=[];if(h)for(t=0;t<E;t++)m[t]=1<w[t]?2<w[t]?6.5+Math.pow(w[t]-2,2.5):6.5+100*Math.pow(2-w[t],4):1;let A;const a=[];let d,k,c;if(h)for(t=0;t<E;t++){c=[];for(h=0;h<x;h++)d=h+q,A=(d-l[t])/J[t],k=1,1<w[t]&&(k-=Math.pow(1/p,A*
m[t])),c[h]=d<f[t]&&d>l[t]?Math.floor(k*p*Math.pow(A,1/w[t]))+u:d>=f[t]?I:u;a[t]=c}else for(t=0;t<E;t++){c=[];for(h=0;h<x;h++)d=h+q,c[h]=d<=l[t]?u:d>=f[t]?I:Math.floor((d-l[t])/J[t]*p)+u;a[t]=c}if(null!=b.contrastOffset)for(b=G(b.contrastOffset,b.brightnessOffset),t=0;t<E;t++)for(c=a[t],h=0;h<x;h++)c[h]=b[c[h]];return{lut:a,offset:q}};S.estimateStatisticsFromHistograms=function(b){const l=[];for(let u=0;u<b.length;u++){const {min:I,max:E,size:t,counts:q}=b[u];let x=0;var f=0;for(var w=0;w<t;w++)x+=
q[w],f+=w*q[w];f/=x;w=0;for(var r=0;r<t;r++)w+=q[r]*Math.pow(r-f,2);r=(E-I)/t;l.push({min:I,max:E,avg:(f+.5)*r+I,stddev:Math.sqrt(w/(x-1))*r})}return l};S.estimateStatisticsHistograms=function(b){if(!v(b))return null;b.statistics||b.updateStatistics();const {pixels:l,mask:f,pixelType:w,statistics:r}=b;b=b.width*b.height;const u=l.length;let I,E;let t;var q;const x=[],J=[];for(t=0;t<u;t++){var p=new Uint32Array(256);var h=l[t];if("u8"===w)if(I=-.5,E=255.5,f)for(q=0;q<b;q++)f[q]&&p[h[q]]++;else for(q=
0;q<b;q++)p[h[q]]++;else{I=r[t].minValue;E=r[t].maxValue;var m=(E-I)/256;var A=new Uint32Array(257);if(f)for(q=0;q<b;q++)f[q]&&A[Math.floor((h[q]-I)/m)]++;else for(q=0;q<b;q++)A[Math.floor((h[q]-I)/m)]++;for(q=0;255>q;q++)p[q]=A[q];p[255]=A[255]+A[256]}x.push({min:I,max:E,size:256,counts:p});for(q=h=A=m=0;256>q;q++)m+=p[q],A+=q*p[q];A/=m;for(q=0;256>q;q++)h+=p[q]*Math.pow(q-A,2);p=Math.sqrt(h/(m-1));m=(E-I)/256;q=(A+.5)*m+I;p*=m;J.push({min:I,max:E,avg:q,stddev:p})}return{statistics:J,histograms:x}};
S.extractBands=function(b,l){if(!l||!v(b))return b;const f=b.pixels.length;return l&&l.some(w=>w>=f)||1===f&&1===l.length&&0===l[0]||f===l.length&&!l.some((w,r)=>w!==r)?b:new n({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:l.map(w=>b.pixels[w]),statistics:b.statistics&&l.map(w=>b.statistics[w])})};S.getClipBounds=Q;S.lookupPixels=function(b,l){if(!v(b))return null;const {pixels:f,mask:w}=b,r=b.width*b.height,u=f.length;
let I=l.lut;({offset:l}=l);let E,t;I&&1===I[0].length&&(I=f.map(()=>I));const q=[];let x,J,p;if(l)if(null==w)for(E=0;E<u;E++){x=f[E];J=I[E];p=new Uint8Array(r);for(t=0;t<r;t++)p[t]=J[x[t]-l];q.push(p)}else for(E=0;E<u;E++){x=f[E];J=I[E];p=new Uint8Array(r);for(t=0;t<r;t++)w[t]&&(p[t]=J[x[t]-l]);q.push(p)}else if(null==w)for(E=0;E<u;E++){x=f[E];J=I[E];p=new Uint8Array(r);for(t=0;t<r;t++)p[t]=J[x[t]];q.push(p)}else for(E=0;E<u;E++){x=f[E];J=I[E];p=new Uint8Array(r);for(t=0;t<r;t++)w[t]&&(p[t]=J[x[t]]);
q.push(p)}b=new n({width:b.width,height:b.height,pixels:q,mask:w,pixelType:"u8"});b.updateStatistics();return b};S.mosaic=F;S.mosaicPixelData=function(b,l){if(!b||0===b.length)return null;var f=b.filter(J=>J.pixelBlock)[0];if(!f)return null;var w=(f.extent.xmax-f.extent.xmin)/f.pixelBlock.width;const r=(f.extent.ymax-f.extent.ymin)/f.pixelBlock.height,u=.01*Math.min(w,r),I=b.sort((J,p)=>Math.abs(J.extent.ymax-p.extent.ymax)>u?p.extent.ymax-J.extent.ymax:Math.abs(J.extent.xmin-p.extent.xmin)>u?J.extent.xmin-
p.extent.xmin:0);var E=Math.min.apply(null,I.map(J=>J.extent.xmin));const t=Math.min.apply(null,I.map(J=>J.extent.ymin)),q=Math.max.apply(null,I.map(J=>J.extent.xmax)),x=Math.max.apply(null,I.map(J=>J.extent.ymax));b={x:Math.round((l.xmin-E)/w),y:Math.round((x-l.ymax)/r)};E={width:Math.round((q-E)/w),height:Math.round((x-t)/r)};w={width:Math.round((l.xmax-l.xmin)/w),height:Math.round((l.ymax-l.ymin)/r)};if(Math.round(E.width/f.pixelBlock.width)*Math.round(E.height/f.pixelBlock.height)!==I.length||
0>b.x||0>b.y||E.width<w.width||E.height<w.height)return null;f=I.map(J=>J.pixelBlock);f=F(f,E,b,w);return{extent:l,pixelBlock:f}};S.remapColor=function(b,l){if(!v(b))return null;b=b.clone();var {pixels:f}=b;const w=b.width*b.height,r=l.length,u=Math.floor(r/2),I=l[Math.floor(u)];f=f[0];let E,t,q,x,J,p,h=!1;const m=new Uint8Array(w),A=new Uint8Array(w),a=new Uint8Array(w);let d=b.mask;const k=4===l[0].mappedColor.length;d||(d=new Uint8Array(w),d.fill(k?255:1),b.mask=d);for(J=0;J<w;J++)if(d[J]){E=f[J];
h=!1;p=u;t=I;q=0;for(x=r-1;1<x-q;){if(E===t.value){h=!0;break}E>t.value?q=p:x=p;p=Math.floor((q+x)/2);t=l[Math.floor(p)]}h||(E===l[q].value?(t=l[q],h=!0):E===l[x].value?(t=l[x],h=!0):E<l[q].value?(h=!1,t=null):E>l[q].value&&(E<l[x].value?(t=l[q],h=!0):x===r-1?(h=!1,t=null):(t=l[x],h=!0)));h?(m[J]=t.mappedColor[0],A[J]=t.mappedColor[1],a[J]=t.mappedColor[2],d[J]=t.mappedColor[3]):m[J]=A[J]=a[J]=d[J]=0}b.pixels=[m,A,a];b.mask=d;b.pixelType="u8";b.maskIsAlpha=k;return b};S.resampleByMajority=P;S.setValidBoundary=
function(b,l,f){if(!v(b))return null;const {width:w,height:r}=b,u=l.x;l=l.y;const I=f.width+u;f=f.height+l;if(0>u||0>l||I>w||f>r||0===u&&0===l&&I===w&&f===r)return b;b.mask||(b.mask=new Uint8Array(w*r));const E=b.mask;for(let t=0;t<r;t++){const q=t*w;for(let x=0;x<w;x++)E[q+x]=t<l||t>=f||x<u||x>=I?0:1}b.updateStatistics();return b};S.split=function(b,l,f){if(!v(b))return null;const {width:w,height:r}=l;let {width:u,height:I}=b;const E=new Map,t={x:0,y:0};f=null==f?1:1+f;for(let q=0;q<f;q++){const x=
Math.ceil(u/w),J=Math.ceil(I/r);for(let p=0;p<J;p++){t.y=p*r;for(let h=0;h<x;h++){t.x=h*w;const m=K(b,t,l);E.set(`${q}/${p}/${h}`,m)}}q<f-1&&(b=D(b));u=Math.round(u/2);I=Math.round(I/2)}return E};S.stretch=function(b,l){if(!v(b))return null;b=b.clone();const {pixels:f,mask:w}=b,{minCutOff:r,maxCutOff:u,gamma:I}=l,E=l.outMin||0;l=l.outMax||255;const t=b.width*b.height,q=f.length;let x;let J,p,h;const m=l-E,A=[];for(x=0;x<q;x++)A[x]=u[x]-r[x];var a=I&&I.length>=q;const d=[];if(a)for(x=0;x<q;x++)d[x]=
1<I[x]?2<I[x]?6.5+Math.pow(I[x]-2,2.5):6.5+100*Math.pow(2-I[x],4):1;if(a)if(null!=w)for(a=0;a<t;a++){if(w[a])for(x=0;x<q;x++)J=f[x][a],h=(J-r[x])/A[x],p=1,1<I[x]&&(p-=Math.pow(1/m,h*d[x])),f[x][a]=J<u[x]&&J>r[x]?Math.floor(p*m*Math.pow(h,1/I[x]))+E:J>=u[x]?l:E}else for(a=0;a<t;a++)for(x=0;x<q;x++)J=f[x][a],h=(J-r[x])/A[x],p=1,1<I[x]&&(p-=Math.pow(1/m,h*d[x])),f[x][a]=J<u[x]&&J>r[x]?Math.floor(p*m*Math.pow(h,1/I[x]))+E:J>=u[x]?l:E;else if(null!=w)for(a=0;a<t;a++){if(w[a])for(x=0;x<q;x++)J=f[x][a],
f[x][a]=J<u[x]&&J>r[x]?Math.floor((J-r[x])/A[x]*m)+E:J>=u[x]?l:E}else for(a=0;a<t;a++)for(x=0;x<q;x++)J=f[x][a],f[x][a]=J<u[x]&&J>r[x]?Math.floor((J-r[x])/A[x]*m)+E:J>=u[x]?l:E;b.pixelType="u8";b.updateStatistics();return b};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(S,n){function G(F){let {altitude:P,azimuth:L}=F;const {hillshadeType:M,pixelSizePower:W,pixelSizeFactor:K,scalingType:D,
isGCS:v,resolution:b}=F;var l="multi-directional"===M?2*F.zFactor:F.zFactor;const {x:f,y:w}=b;F=l/(8*f);var r=l/(8*w);v&&.001<l&&(F/=111E3,r/=111E3);"adjusted"===D&&(v?(F=111E3*f,r=111E3*w,F=(l+Math.pow(F,W)*K)/(8*F),r=(l+Math.pow(r,W)*K)/(8*r)):(F=(l+Math.pow(f,W)*K)/(8*f),r=(l+Math.pow(w,W)*K)/(8*w)));var u=(90-P)*Math.PI/180;l=Math.cos(u);let I=(360-L+90)*Math.PI/180,E=Math.sin(u)*Math.cos(I);u=Math.sin(u)*Math.sin(I);const t=[315,270,225,360,180,0],q=[60,60,60,60,60,90];var x=new Float32Array([3,
5,3,2,1,4]);const J=x.reduce((a,d)=>a+d);x=x.map(a=>a/J);const p="multi-directional"===M?t.length:1,h=new Float32Array(6),m=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===M)for(let a=0;a<p;a++)P=q[a],L=t[a],u=(90-P)*Math.PI/180,l=Math.cos(u),I=(360-L+90)*Math.PI/180,E=Math.sin(u)*Math.cos(I),u=Math.sin(u)*Math.sin(I),h[a]=l,m[a]=E,A[a]=u;else h.fill(l),m.fill(E),A.fill(u);return{resolution:b,factor:[F,r],sinZcosA:E,sinZsinA:u,cosZ:l,sinZcosAs:m,sinZsinAs:A,cosZs:h,weights:x,hillshadeType:["traditional",
"multi-directional"].indexOf(M)}}const Q=function(F){return F&&"esri.layers.support.PixelBlock"===F.declaredClass&&F.pixels&&0<F.pixels.length};S.calculateHillshadeParams=G;S.hillshade=function(F,P){if(!Q(F))return F;const {width:L,height:M,mask:W}=F,K=new Uint8Array(L*M);W&&K.set(W);const {factor:D,sinZcosA:v,sinZsinA:b,cosZ:l,sinZcosAs:f,sinZsinAs:w,cosZs:r,weights:u}=G(P),[I,E]=D;var {hillshadeType:t}=P;const q=F.pixels[0];P=new Uint8Array(L*M);let x;for(let k=1;k<M-1;k++){const c=k*L;for(let g=
1;g<L-1;g++)if(W&&!W[c+g])P[c+g]=0;else{var J=8;if(W&&(J=W[c-L+g-1]+W[c-L+g]+W[c-L+g+1]+W[c+g-1]+W[c+g+1]+W[c+L+g-1]+W[c+L+g]+W[c+L+g+1],7>J)){P[c+g]=0;K[c+g]=0;continue}if(7===J){var p=W[c-L+g-1]?q[c-L+g-1]:q[c+g];var h=W[c-L+g]?q[c-L+g]:q[c+g];var m=W[c-L+g+1]?q[c-L+g+1]:q[c+g];J=W[c+g-1]?q[c+g-1]:q[c+g];x=W[c+g+1]?q[c+g+1]:q[c+g];var A=W[c+L+g-1]?q[c+L+g-1]:q[c+g];var a=W[c+L+g]?q[c+L+g]:q[c+g];var d=W[c+L+g+1]?q[c+L+g+1]:q[c+g]}else p=q[c-L+g-1],h=q[c-L+g],m=q[c-L+g+1],J=q[c+g-1],x=q[c+g+1],A=
q[c+L+g-1],a=q[c+L+g],d=q[c+L+g+1];J=(m+x+x+d-(p+J+J+A))*I;p=(A+a+a+d-(p+h+h+m))*E;h=Math.sqrt(1+J*J+p*p);m=0;if("traditional"===t)J=255*(l+b*p-v*J)/h,0>J&&(J=0),m=J;else for(A=w.length,a=0;a<A;a++)d=255*(r[a]+w[a]*p-f[a]*J)/h,0>d&&(d=0),m+=d*u[a];P[c+g]=m&255}}for(t=0;t<M;t++)P[t*L]=P[t*L+1],P[(t+1)*L-1]=P[(t+1)*L-2];for(t=1;t<L-1;t++)P[t]=P[t+L],P[t+(M-1)*L]=P[t+(M-2)*L];return new n({width:L,height:M,pixels:[P],mask:W?K:null,pixelType:"u8",validPixelCount:F.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};S.tintHillshade=function(F,P,L,M){if(Q(F)&&Q(P)){var {min:W,max:K}=M;M=F.pixels[0];var {pixels:D,mask:v}=P;P=D[0];var b=255.00001/(K-W),l=new Uint8ClampedArray(P.length),f=new Uint8ClampedArray(P.length),w=new Uint8ClampedArray(P.length),r=L.length-1;for(let E=0;E<P.length;E++){if(v&&0===v[E])continue;var u=Math.floor((P[E]-W)*b);const [t,q]=L[0>u?0:u>r?r:u];var I=M[E];u=I*q;const x=u*(1-Math.abs(t%2-1));I-=u;switch(Math.floor(t)){case 0:l[E]=u+I;f[E]=x+I;w[E]=I;break;case 1:l[E]=
x+I;f[E]=u+I;w[E]=I;break;case 2:l[E]=I;f[E]=u+I;w[E]=x+I;break;case 3:l[E]=I;f[E]=x+I;w[E]=u+I;break;case 4:l[E]=x+I;f[E]=I;w[E]=u+I;break;case 5:case 6:l[E]=u+I,f[E]=I,w[E]=x+I}}F.pixels=[l,f,w];F.updateStatistics()}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),function(S,
n,G,Q,F,P,L){const M=new Map;M.set("CRF",{desc:"Cloud Raster Format",constructor:G});M.set("MRF",{desc:"Meta Raster Format",constructor:P});M.set("TIFF",{desc:"GeoTIFF",constructor:L});M.set("RasterTileServer",{desc:"Raster Tile Server",constructor:F});M.set("JPG",{desc:"JPG Raster Format",constructor:Q});M.set("PNG",{desc:"PNG Raster Format",constructor:Q});M.set("GIF",{desc:"GIF Raster Format",constructor:Q});M.set("BMP",{desc:"BMP Raster Format",constructor:Q});return function(){function W(){}
W.open=async function(K){const {url:D,ioConfig:v,sourceJSON:b}=K;let l=K.datasetFormat;null==l&&D.lastIndexOf(".")&&(l=D.slice(D.lastIndexOf(".")+1).toUpperCase());if("OVR"===l||"TIF"===l)l="TIFF";else if("JPG"===l||"JPEG"===l||"JFIF"===l)l="JPG";-1<D.toLowerCase().indexOf("/imageserver")&&-1===D.toLowerCase().indexOf("/wcsserver")&&(l="RasterTileServer");const f={bandIds:null,sampling:null},w={url:D,sourceJSON:b,datasetFormat:l,ioConfig:v||f};let r,u;if(this.supportedFormats.has(l))return r=M.get(l).constructor,
u=new r(w),await u.open({signal:K.signal}),u;if(l)throw new n("rasterfactory:open","not a supported format "+l);const I=Array.from(M.keys());let E=0;const t=function(){l=I[E++];if(!l)return null;r=M.get(l).constructor;u=new r(w);return u.open({signal:K.signal}).then(()=>u).catch(()=>t())};return t()};W.register=function(K,D,v){M.has(K.toUpperCase())||M.set(K.toUpperCase(),{desc:D,constructor:v})};S._createClass(W,null,[{key:"supportedFormats",get:function(){const K=new Set;M.forEach((D,v)=>K.add(v));
return K}}]);return W}()})},"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../tasks/support/FeatureSet ../TileInfo ../RasterInfo ../RasterStorageInfo ./BaseRaster ./DBFParser".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J){const p=new Map;p.set("int16","esriFieldTypeSmallInteger");p.set("int32","esriFieldTypeInteger");p.set("int64","esriFieldTypeInteger");p.set("float32","esriFieldTypeSingle");p.set("float64","esriFieldTypeDouble");p.set("text","esriFieldTypeString");G=function(h){function m(){var a=h.apply(this,arguments)||this;a.storageInfo=null;a.datasetFormat="CRF";return a}S._inheritsLoose(m,h);var A=m.prototype;A.open=async function(a){await this.init();
({data:a}=await this.request(this.url+"/conf.json",{signal:null==a?void 0:a.signal}));if(!this._validateHeader(a))throw new K("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:d,rasterInfo:k}=this._parseHeader(a);"thematic"===k.dataType&&(a=await this._fetchAuxiliaryInformation(),k.attributeTable=a);this._set("storageInfo",d);this._set("rasterInfo",k);this.ioConfig.retryCount=this.ioConfig.retryCount||0};A.fetchRawTile=
async function(a,d,k,c={}){a=this.rasterInfo.storageInfo.maximumPyramidLevel-a;if(0>a)return null;a=this._buildCacheFilePath(a,d,k,c.multidimensionalDefinition);d=this._getIndexRecordFromBundle(d,k);k=await this.request(a,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:c.signal});if(!k)return null;k=new Uint8Array(k.data);d=this._getTileEndAndContentType(k,d);return 0===d.recordSize?null:(c=await this.request(a,{range:{from:d.position,to:d.position+d.recordSize},
responseType:"array-buffer",signal:c.signal}))?this.decodePixelBlock(c.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null};A._validateHeader=function(a){const d="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return a&&"RasterInfo"===a.type&&!d.some(k=>!a[k])};A._parseHeader=function(a){var d;const k="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[a.pixelType],
{bandCount:c,histograms:g,colormap:C,blockWidth:z,blockHeight:B,firstPyramidLevel:H,maximumPyramidLevel:O}=a,R=a.statistics&&a.statistics.map(ea=>({min:ea.min,max:ea.max,avg:ea.mean,stddev:ea.standardDeviation,median:ea.median,mode:ea.mode})),N=new f(a.extent.spatialReference||a.geodataXform.spatialReference),V=new r({xmin:a.extent.xmin,ymin:a.extent.ymin,xmax:a.extent.xmax,ymax:a.extent.ymax,spatialReference:N}),Y=new w({x:a.pixelSizeX,y:a.pixelSizeY,spatialReference:N}),ba=null!=(d=a.properties)?
d:{};var da=a.format.toLowerCase().replace("cache/","");d=new w(a.origin.x,a.origin.y,N);let ka,ha;if(C&&C.colors)for(ka=[],ha=0;ha<C.colors.length;ha++){var e=C.colors[ha];var y=C.values?C.values[ha]:ha;ka.push([y,e&255,e<<16>>>24,e<<8>>>24,e>>>24])}e=a.LODInfos;y=[];for(ha=0;ha<e.levels.length;ha++)y.push({level:e.levels[ha],resolution:e.resolutions[ha],scale:96/.0254*e.resolutions[ha]});e=new E({dpi:96,lods:y,format:da,origin:d,size:[z,B],spatialReference:N});da={recordSize:8,packetSize:a.packetSize,
headerSize:a.packetSize*a.packetSize*8+64};y=Math.round((V.xmax-V.xmin)/Y.x);const T=Math.round((V.ymax-V.ymin)/Y.y),U=[{maxCol:Math.ceil(y/z)-1,maxRow:Math.ceil(T/B)-1,minCol:0,minRow:0}];let ca=2;if(0<O)for(ha=0;ha<O;ha++)U.push({maxCol:Math.ceil(y/ca/z)-1,maxRow:Math.ceil(T/ca/B)-1,minCol:0,minRow:0}),ca*=2;a=new t({width:y,height:T,pixelType:k,bandCount:c,extent:V,spatialReference:N,pixelSize:Y,keyProperties:ba,statistics:R,histograms:g,multidimensionalInfo:a.mdInfo,colormap:ka,storageInfo:new q({blockWidth:z,
blockHeight:B,pyramidBlockWidth:z,pyramidBlockHeight:B,origin:d,tileInfo:e,firstPyramidLevel:H,maximumPyramidLevel:O,blockBoundary:U})});return{storageInfo:da,rasterInfo:a}};A._fetchAuxiliaryInformation=async function(a){var d=this.request(this.url+"/conf.vat.json",{signal:a}).then(c=>c.data).catch(()=>null);a=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:a}).then(c=>c.data).catch(()=>null);d=await l.all([d,a]);let k;if(d[0]){a=d[0].fields;const c=d[0].values;if(a&&c){a=
a.map(C=>({type:"OID"===C.name?"esriFieldTypeOID":p.get(C.type),name:C.name,alias:C.alias||C.name}));const g=c.map(C=>({attributes:C}));a&&c&&(k={fields:a,features:g})}}!k&&d[1]&&(k=J.parse(d[1]).recordSet);return I.fromJSON(k)};A._buildCacheFilePath=function(a,d,k,c){var g=this.storageInfo.packetSize;k=Math.floor(k/g)*g;d="R"+this._toHexString4(Math.floor(d/g)*g)+"C"+this._toHexString4(k);g="L";g=10<=a?g+a.toString():g+("0"+a.toString());({multidimensionalInfo:a}=this.rasterInfo);const C=null==c?
void 0:c[0];if(!Q.isSome(a)||!C)return`${this.url}/_alllayers/${g}/${d}.bundle`;c=a.variables.filter(z=>z.name===C.variableName)[0].dimensions[0].values.indexOf(C.values[0]).toString(16);a=4-c.length;for(k=0;k<a;k++)c="0"+c;return`${this.url}/_alllayers/${C.variableName}/${"S"+c}/${g}/${d}.bundle`};A._getIndexRecordFromBundle=function(a,d){const k=this.storageInfo.packetSize;a=a%k*k+d%k;if(0>a)throw"Invalid level / row / col";return a*this.storageInfo.recordSize+64};A._getTileEndAndContentType=function(a,
d){a=a.subarray(d,d+8);d=0;let k;for(k=0;5>k;k++)d|=(a[k]&255)<<8*k;const c=d&0xffffffffff;d=0;for(k=5;8>k;k++)d|=(a[k]&255)<<8*(k-5);return{position:c,recordSize:d&0xffffffffff}};A._toHexString4=function(a){a=a.toString(16);if(4!==a.length){let d=4-a.length;for(;0<d--;)a="0"+a}return a};return m}(x);n.__decorate([L.property({readOnly:!0})],G.prototype,"storageInfo",void 0);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.CloudRaster")],
G)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point".split(" "),function(S,n,G,Q,F,P,L,M,W,K,D,v,b){G=function(l){function f(){var w=
l.apply(this,arguments)||this;w.blockWidth=void 0;w.blockHeight=void 0;w.compression=null;w.origin=null;w.firstPyramidLevel=null;w.maximumPyramidLevel=null;w.pyramidScalingFactor=2;w.pyramidBlockWidth=null;w.pyramidBlockHeight=null;w.isVirtualTileInfo=!1;w.tileInfo=null;w.blockBoundary=null;return w}S._inheritsLoose(f,l);return f}(v.JSONSupport);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"blockWidth",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,
"blockHeight",void 0);n.__decorate([P.property({type:String,json:{write:!0}})],G.prototype,"compression",void 0);n.__decorate([P.property({type:b,json:{write:!0}})],G.prototype,"origin",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"firstPyramidLevel",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"maximumPyramidLevel",void 0);n.__decorate([P.property()],G.prototype,"pyramidScalingFactor",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],
G.prototype,"pyramidBlockWidth",void 0);n.__decorate([P.property({type:Number,json:{write:!0}})],G.prototype,"pyramidBlockHeight",void 0);n.__decorate([P.property({type:Boolean,json:{write:!0}})],G.prototype,"isVirtualTileInfo",void 0);n.__decorate([P.property({json:{write:!0}})],G.prototype,"tileInfo",void 0);n.__decorate([P.property()],G.prototype,"blockBoundary",void 0);return G=n.__decorate([M.subclass("esri.layers.support.RasterStorageInfo")],G)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../core/JSONSupport ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../request ../../../core/Promise ../arcgisLayerUrl ../commonProperties ../TileInfo ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../RasterStorageInfo ../rasterFunctions/rasterProjectionHelper ./RawBlockCache".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h,m,A){G=function(a){function d(){var c=a.apply(this,arguments)||this;c.rasterJobHandler=null;c.datasetName=null;c.datasetFormat=null;c.rasterInfo=null;c.ioConfig={sampling:"closest"};return c}S._inheritsLoose(d,a);var k=d.prototype;k.init=async function(){const c=m.load();this.addResolvingPromise(c);await this.when()};k.normalizeCtorArgs=function(c){c&&c.ioConfig&&(c={...c,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:x.create(),
...c.ioConfig}});return c};k.open=async function(c){throw new K("BaseRaster:open-not-implemented","open() is not implemented");};k.fetchTile=async function(c,g,C,z={}){var B;const {tileInfo:H}=z;c=H.lodAt(c);c=new w({x:c.resolution,y:c.resolution,spatialReference:H.spatialReference});g=this.getTileExtent(c,g,C,H);null!=(B=z.multidimensionalDefinition)&&B.length&&Q.isSome(this.rasterInfo.multidimensionalInfo)&&null==z.sliceId&&(z={...z,sliceId:this.getSliceIndex(z.multidimensionalDefinition)||0});
return this.fetchPixels(g,H.size[0],H.size[1],z)};k.identify=async function(c,g={}){const {spatialReference:C,extent:z}=this.rasterInfo;var {datumTransformation:B}=g;B=m.projectPoint(c,C,B);if(!z.intersects(B))return{location:B,value:null};let H=0;if(g.srcResolution)H=m.snapPyramid(g.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(H=await this.computeBestPyramidLevelForLocation(c,g),null==H)return{location:B,value:null};c=this.identifyPixelLocation(B,H,null);if(null===c)return{location:B,
value:null};const {row:O,col:R,rowOffset:N,colOffset:V}=c;c=A.getRasterId(this.url,g.sliceId);const Y=`${H}/${O}/${R}`;let ba=A.getBlock(c,null,Y);Q.isSome(ba)||(ba=this.fetchRawTile(H,O,R,g),A.putBlock(c,null,Y,ba));g=await ba;if(!(g&&g.pixels&&0<g.pixels.length))return{location:B,value:null};const da=N*this.rasterInfo.storageInfo.blockHeight+V;g=!g.mask||g.mask[da]?g.pixels.map(ka=>ka[da]):null;return{location:B,value:g,pyramidLevel:H}};k.fetchPixels=async function(c,g,C,z={}){c=c.clone().normalize()[0];
var B=this.rasterInfo.spatialReference,H=!c.spatialReference.equals(B),{datumTransformation:O}=z,R=new w({x:(c.xmax-c.xmin)/g,y:(c.ymax-c.ymin)/C,spatialReference:c.spatialReference}),N=z.srcResolution||(H?m.projectResolution(R,B,c,O):R);if(!N)return null;const {pyramidLevel:V,pyramidResolution:Y,excessiveReading:ba}=m.snapPyramid(N,this.rasterInfo,this.ioConfig.sampling);if(ba)return null;var da=this.rasterInfo.storageInfo;B=H?m.projectExtent(c,B,O):c;const ka=Q.unwrap(this.rasterInfo.transform);
ka&&(B=ka.inverseTransform(B));if(null==B)return null;var ha=Math.ceil((B.xmax-B.xmin)/Y.x-.1),e=Math.ceil((B.ymax-B.ymin)/Y.y-.1);if(8<ha/g||8<e/C)return null;ha=await this.fetchRawPixels(V,{x:Math.floor((B.xmin-da.origin.x)/Y.x+.1),y:Math.floor((da.origin.y-B.ymax)/Y.y+.1)},{width:ha,height:e},z);if(!ha)return null;e=0<V?da.pyramidBlockWidth:da.blockWidth;da=0<V?da.pyramidBlockHeight:da.blockHeight;if(!H&&1===ha.pixelBlocks.length&&e===g&&da===C&&N.x===R.x&&N.y===R.y)return{extent:c,srcExtent:B,
pixelBlock:ha.pixelBlocks[0],transformGrid:null};H=m.getProjectionOffsetGrid(c,ha.extent,R,O,ka);O=!z.requestRawData;R={rows:H.spacing[0],cols:H.spacing[1]};const {pixelBlocks:y,mosaicSize:T,isPartiallyFilled:U}=ha;this.rasterJobHandler?g=await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:y,srcMosaicSize:T,destDimension:O?{width:g,height:C}:null,coefs:O?H.coefficients:null,sampleSpacing:O?R:null,interpolation:z.interpolation},z):(N=p.mosaic(y,T),g=O?p.approximateTransform(N,{width:g,height:C},
H.coefficients,R,z.interpolation):N);return{srcExtent:B,pixelBlock:g,transformGrid:H,extent:c,isPartiallyFilled:U}};k.fetchRawPixels=async function(c,g,C,z){const {origin:B,blockBoundary:H}=this.rasterInfo.storageInfo,O=0<c?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,R=0<c?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight;let {x:N,y:V}=g,{width:Y,height:ba}=C;z.buffer&&(N-=z.buffer.cols,V-=z.buffer.rows,Y+=2*z.buffer.cols,
ba+=2*z.buffer.rows);g=Math.floor(N/O);C=Math.floor(V/R);const da=Math.floor((N+Y-1)/O),ka=Math.floor((V+ba-1)/R);var ha=H[c];if(!ha)return null;const {minRow:e,minCol:y,maxCol:T,maxRow:U}=ha;if(ka<e||da<y||C>U||g>T)return null;ha=[];let ca,ea=!1;for(var ia=C;ia<=ka;ia++)for(let oa=g;oa<=da;oa++)ia>=e&&oa>=y&&U>=ia&&T>=oa?(ca=this._fetchRawTile(c,ia,oa,z),this.ioConfig.allowPartialFill&&(ca=l.create(ma=>{ca.then(na=>ma(na)).catch(()=>{ea=!0;ma(null)})})),ha.push(ca)):ha.push(null);if(0===ha.length)return null;
z=await l.all(ha);ha={height:(ka-C+1)*O,width:(da-g+1)*R};const {nativePixelSize:la,spatialReference:ja}=this.rasterInfo;ia=la.x*Math.pow(2,c);c=la.y*Math.pow(2,c);return{extent:new r({xmin:B.x+g*O*ia,xmax:B.x+(da+1)*O*ia,ymin:B.y-(ka+1)*R*c,ymax:B.y-C*R*c,spatialReference:ja}),pixelBlocks:z,mosaicSize:ha,isPartiallyFilled:ea}};k.fetchRawTile=async function(c,g,C,z){throw new K("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");};k.computeExtent=function(c){return m.projectExtent(this.rasterInfo.extent,
c)};k.decodePixelBlock=function(c,g){return!this.rasterJobHandler||g.useCanvas?J.decode(c,g):this.rasterJobHandler.decode({data:c,options:g})};k.request=async function(c,g,C){var z,B;const {customFetchParameters:H}=this.ioConfig,{range:O,query:R,headers:N}=g;C=null!=(z=null!=(B=C)?B:g.retryCount)?z:this.ioConfig.retryCount;z=O?{Range:`bytes=${O.from}-${O.to}`}:null;try{return await I(c,{...g,query:{...R,...H},headers:{...N,...z}})}catch(V){if(0<C)return C--,this.request(c,g,C);throw V;}};k.getSliceIndex=
function(c){const {multidimensionalInfo:g}=this.rasterInfo;if(!Q.isSome(g)||null==c||!c.length)return null;let C=0;const z=c[0].variableName;for(let O=0;O<g.variables.length;O++){var B=g.variables[O];const R=B.dimensions;if(B.name!==z){C+=R.map(V=>this._getDimensionValuesCount(V)).reduce((V,Y)=>V+Y);break}B=R.map(V=>this._getDimensionValuesCount(V));const N=R.length;for(let V=0;V<N;V++){var H=c.filter(Y=>Y.dimensionName===R[V].name)[0];if(null==H)return null;H=Array.isArray(H.values[0])?H.values[0][0]:
H.values[0];H=this._getIndexFromDimensions(H,R[V]);if(-1===H)return null;B.shift();C=V===N-1?C+H:C+H*B.reduce((Y,ba)=>Y+ba)}}return C};k.updateTileInfo=function(){const {storageInfo:c,spatialReference:g,extent:C,pixelSize:z}=this.rasterInfo;if(!c.tileInfo){const H=[];var B=c.maximumPyramidLevel||0;let O=Math.max(z.x,z.y),R=1/.0254*96*O;for(let N=0;N<=B;N++)H.push({level:B-N,resolution:O,scale:R}),O*=2,R*=2;B=new w({x:C.xmin,y:C.ymax,spatialReference:g});c.tileInfo=new x({origin:B,size:[c.blockWidth,
c.blockHeight],spatialReference:g,lods:H});c.isVirtualTileInfo=!0}};k.createRemoteDatasetStorageInfo=function(c,g=512,C=512,z){const {width:B,height:H,nativeExtent:O,pixelSize:R,spatialReference:N}=c,V=new w({x:O.xmin,y:O.ymax,spatialReference:N});null==z&&(z=Math.max(0,Math.round(Math.log(Math.max(B,H))/Math.LN2-8)));const Y=this._computeBlockBoundary(O,R,z,512,512);c.storageInfo=new h({blockWidth:g,blockHeight:C,pyramidBlockWidth:g,pyramidBlockHeight:C,origin:V,firstPyramidLevel:1,maximumPyramidLevel:z,
blockBoundary:Y})};k.computeBestPyramidLevelForLocation=async function(c,g){return 0};k.identifyPixelLocation=function(c,g,C){const {spatialReference:z,pixelSize:B,extent:H}=this.rasterInfo,{blockWidth:O,blockHeight:R,maximumPyramidLevel:N,pyramidScalingFactor:V,origin:Y}=this.rasterInfo.storageInfo;c=m.projectPoint(c,z,C);if(!H.intersects(c)||0>g||g>N)return null;var ba=Math.pow(V,g);C=(Y.y-c.y)/(ba*B.y)/R;ba=(c.x-Y.x)/(ba*B.x)/O;return{pyramidLevel:g,row:Math.floor(C),col:Math.floor(ba),rowOffset:Math.min(R-
1,Math.floor((C-Math.floor(C))*R)),colOffset:Math.min(O-1,Math.floor((ba-Math.floor(ba))*O)),srcLocation:c}};k.getTileExtent=function(c,g,C,z){const {origin:B,spatialReference:H}=z,O=z.size[0];z=z.size[1];C=B.x+C*O*c.x;g=B.y-g*z*c.y;return new r({xmin:C,xmax:C+O*c.x,ymin:g-z*c.y,ymax:g,spatialReference:H})};k._computeBlockBoundary=function(c,g,C,z,B){let {x:H,y:O}=g;g=c.xmin;const R=c.ymax,N=[{minCol:Math.floor((c.xmin-g+.1*H)/z/H),maxCol:Math.floor((c.xmax-g-.1*H)/z/H),minRow:Math.floor((R-c.ymax+
.1*O)/B/O),maxRow:Math.floor((R-c.ymin-.1*O)/B/O)}];if(0<C)for(let V=0;V<C;V++)H*=2,O*=2,N.push({minCol:Math.floor((c.xmin-g+.1*H)/z/H),maxCol:Math.floor((c.xmax-g-.1*H)/z/H),minRow:Math.floor((R-c.ymax+.1*O)/B/H),maxRow:Math.floor((R-c.ymin-.1*O)/B/H)});return N};k._fetchRawTile=function(c,g,C,z){var B=this.rasterInfo.storageInfo.blockBoundary[c];if(!B)return l.resolve(null);const {minRow:H,minCol:O,maxCol:R,maxRow:N}=B;if(g<H||C<O||g>N||C>R)return l.resolve(null);const V=A.getRasterId(this.url,
z.sliceId),Y=`${c}/${g}/${C}`;B=A.getBlock(V,z.registryId,Y);if(!Q.isSome(B)){const ba=l.createAbortController();B=this.fetchRawTile(c,g,C,{...z,signal:ba.signal});A.putBlock(V,z.registryId,Y,B,ba);B.catch(()=>{A.deleteBlock(V,z.registryId,Y)})}if(z.signal)l.onAbort(z,()=>{A.decreaseRefCount(V,z.registryId,Y)});return B};k._getIndexFromDimensions=function(c,g){const {extent:C,interval:z,unit:B,values:H}=g;if(null!=H&&H.length)return Array.isArray(H[0])?H.findIndex(V=>V[0]<=c&&V[1]>=c):H.indexOf(c);
if(c>C[1])return-1;const O=C[0];let R=-1;if("ISO8601"===B){var N;switch((null==(N=g.intervalUnit)?void 0:N.toLowerCase())||"seconds"){case "seconds":R=Math.round((c-O)/1E3/z);break;case "minutes":R=Math.round((c-O)/6E4/z);break;case "hours":R=Math.round((c-O)/36E5/z);break;case "days":R=Math.round((c-O)/864E5/z);break;case "years":R=Math.round(((new Date(c)).getUTCFullYear()-(new Date(O)).getUTCFullYear())/z);break;case "decades":R=Math.round(((new Date(c)).getUTCFullYear()-(new Date(O)).getUTCFullYear())/
10/z)}return R}return Math.round((c-O)/z)};k._getDimensionValuesCount=function(c){const {extent:g,interval:C,unit:z,values:B}=c;let H=(null==B?void 0:B.length)||0;if(H)return H;const O=g[0];if(0===H&&"ISO8601"===z){var R;switch((null==(R=c.intervalUnit)?void 0:R.toLowerCase())||"seconds"){case "seconds":H=Math.round((g[1]-g[0])/1E3/C);break;case "minutes":H=Math.round((g[1]-g[0])/6E4/C);break;case "hours":H=Math.round((g[1]-g[0])/36E5/C);break;case "days":H=Math.round((g[1]-g[0])/864E5/C);break;case "years":H=
Math.round(((new Date(g[1])).getUTCFullYear()-(new Date(O)).getUTCFullYear())/C);break;case "decades":H=Math.round(((new Date(g[1])).getUTCFullYear()-(new Date(O)).getUTCFullYear())/10/C)}return H}return Math.round((g[1]-g[0])/C)};S._createClass(d,[{key:"url",set:function(c){this._set("url",t.sanitizeUrl(c,F.getLogger(this.declaredClass)))}}]);return d}(E.EsriPromiseMixin(f.JSONSupport));n.__decorate([L.property(q.url)],G.prototype,"url",null);n.__decorate([L.property({type:String,json:{write:!0}})],
G.prototype,"datasetName",void 0);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);n.__decorate([L.property()],G.prototype,"rasterInfo",void 0);n.__decorate([L.property()],G.prototype,"ioConfig",void 0);n.__decorate([L.property()],G.prototype,"sourceJSON",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.BaseRaster")],G)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D){function v(p,h){if(!K.isPlatformLittleEndian)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:m,height:A,pixelType:a}=h;var d=E(a);const k=d.pixelTypeCtor;h=null==h.noDataValue?d.noDataValue:h.noDataValue;d=0;let c,g=0,C;const z=p.byteLength-10;for(;g<z;){var B=M.decode(p,{inputOffset:g,encodedMaskData:c,returnMask:0===d?!0:!1,returnEncodedMask:0===d?!0:!1,returnFileInfo:!0,pixelType:k,noDataValue:h});if(m&&A&&(B.width!==
m||B.height!==A))throw new n("rasterCoded:decode","lerc decoded result has width or height different from specified in options");g=B.fileInfo.eofOffset;0===d&&(c=B.encodedMaskData,C=new G({width:B.width,height:B.height,pixels:[],pixelType:a,mask:B.maskData,statistics:[]}));d++;C.addData({pixels:B.pixelData,statistics:{minValue:B.minValue,maxValue:B.maxValue,noDataValue:B.noDataValue}});10<z-g&&(B=String.fromCharCode.apply(null,new Uint8Array(p,g,10)),g=-1<g+B.indexOf("CntZ")?B.indexOf("CntZ"):0)}return C}
function b(p,h){if(!K.isPlatformLittleEndian)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");var m=0,A=0,a=0;let d,k;const c=p.byteLength-10,g=[],{width:C,height:z}=h;for(;A<c;){var B;h=q.decode(p,{inputOffset:A,maskData:d,returnFileInfo:!0});if(C&&z&&(h.width!==C||h.height!==z))throw new n("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");A=h.fileInfo.eofOffset;0===m&&(a=h.fileInfo.numValidPixel,d=
h.maskData,k=new G({width:h.width,height:h.height,pixels:[],pixelType:h.fileInfo.pixelType,mask:h.maskData,statistics:[]}));h.fileInfo.mask&&0<h.fileInfo.mask.numBytes&&g.push(h.maskData);if(1<h.dimCount&&(null==(B=h.pixelData)?void 0:B.length)===h.width*h.height*h.dimCount){var H,O,R,N;h.pixelData=h.pixelData.slice(-h.width*h.height);const V=null==(H=h.dimStats)?void 0:null==(O=H.minValues)?void 0:O[h.dimCount-1],Y=null==(R=h.dimStats)?void 0:null==(N=R.maxValues)?void 0:N[h.dimCount-1];null!=V&&
null!=Y&&(h.minValue=V,h.maxValue=Y)}m++;k.addData({pixels:h.pixelData,statistics:{minValue:h.minValue,maxValue:h.maxValue}});10<c-A&&(h=String.fromCharCode.apply(null,new Uint8Array(p,A,10)),A+=-1<h.indexOf("Lerc")?h.indexOf("Lerc"):0)}A=m=p=0;if(1<g.length){A=k.width*k.height;d=new Uint8Array(A);d.set(g[0]);for(p=1;p<g.length;p++)for(a=g[p],m=0;m<A;m++)d[m]&=a[m];for(m=a=0;m<A;m++)a+=d[m];k.mask=d}k.validPixelCount=a;return k}function l(p){p=D.decode(p);p=new G({width:p.width,height:p.height,pixels:p.pixels,
pixelType:p.pixelType.toLowerCase(),mask:p.mask,statistics:null});p.updateStatistics();return p}function f(p){p=L.decode(p);p=new G({width:p.width,height:p.height,pixels:p.pixels,pixelType:"U8",mask:p.mask,statistics:null});p.updateStatistics();return p}function w(p,h){p=new Uint8Array(p);p=new x(p);const {width:m,height:A}=h;h=m*A;p=p.decode();let a=0;var d=0;let k;d=new Uint8Array(h);for(a=0;a<h;a++)d[a]=p[4*a+3];const c=new G({width:m,height:A,pixels:[],pixelType:"U8",mask:d,statistics:[]});for(a=
0;3>a;a++){k=new Uint8Array(h);for(d=0;d<h;d++)k[d]=p[4*d+a];c.addData({pixels:k})}c.updateStatistics();return c}async function r(p,h,m,A){p=await (new P).decode(p,{applyJpegMask:!1,format:h,...m},A);p=new G(p);p.updateStatistics();return p}function u(p){if(null==p)throw new n("rasterCodec:decode","parameter encodeddata is required.");p=new Uint8Array(p,0,10);let h="";255===p[0]&&216===p[1]?h="jpg":137===p[0]&&80===p[1]&&78===p[2]&&71===p[3]?h="png":67===p[0]&&110===p[1]&&116===p[2]&&90===p[3]&&73===
p[4]&&109===p[5]&&97===p[6]&&103===p[7]&&101===p[8]&&32===p[9]?h="lerc":76===p[0]&&101===p[1]&&114===p[2]&&99===p[3]&&50===p[4]&&32===p[5]?h="lerc2":73===p[0]&&73===p[1]&&42===p[2]&&0===p[3]||77===p[0]&&77===p[1]&&0===p[2]&&42===p[3]?h="tiff":71===p[0]&&73===p[1]&&70===p[2]?h="gif":66===p[0]&&77===p[1]?h="bmp":-1<String.fromCharCode.apply(null,p).toLowerCase().indexOf("error")&&(h="error");return h}function I(p){let h=null;switch(p){case "lerc":h=v;break;case "lerc2":h=b;break;case "jpg":h=f;break;
case "png":h=w;break;case "bsq":case "bip":h=(m,A)=>{{const {pixelTypeCtor:a}=E(A.pixelType),d=W.decode;m=d(m,{width:A.width,height:A.height,pixelType:a,format:p});A=new G({width:A.width,height:A.height,pixels:m.pixels,pixelType:A.pixelType,mask:m.mask,statistics:null});A.updateStatistics()}return A};break;case "tiff":h=l;break;case "error":h=()=>{throw new n("rasterCodec:decode","input data contains error");};break;default:h=()=>{throw new n("rasterCodec:decode","unsupported raster format");}}return h}
function E(p){let h=null,m=null;switch(p?p.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":m=Math.pow(2,8)-1;h=Uint8Array;break;case "u16":m=m||Math.pow(2,16)-1;h=Uint16Array;break;case "u32":m=m||Math.pow(2,32)-1;h=Uint32Array;break;case "s8":m=m||0-Math.pow(2,7);h=Int8Array;break;case "s16":m=m||0-Math.pow(2,15);h=Int16Array;break;case "s32":m=m||0-Math.pow(2,31);h=Int32Array;break;default:h=Float32Array}return{pixelTypeCtor:h,noDataValue:m}}function t(p,h=1){if(p){var {pixels:m,width:A,
height:a,mask:d}=p;if(m&&0!==m.length){var k=m.length,c=A-1,g=a-1,C=[],z,B,H=G.getPixelArrayConstructor(p.pixelType);if(0===h){for(h=0;h<k;h++){var O=m[h];var R=new H(c*g);for(z=0;z<g;z++){var N=z*A;for(B=0;B<c;B++)R[z*c+B]=O[N+B]}C.push(R)}if(d){var V=new Uint8Array(c*g);for(z=0;z<g;z++)for(N=z*A,B=0;B<c;B++)V[z*c+B]=d[N+B]}}else{for(h=0;h<k;h++){O=m[h];R=new H(c*g);for(z=0;z<g;z++)for(N=z*A,B=0;B<c;B++)R[z*c+B]=(O[N+B]+O[N+B+1]+O[N+A+B]+O[N+A+B+1])/4;C.push(R)}if(d)for(V=new Uint8Array(c*g),z=0;z<
g;z++)for(N=z*A,B=0;B<c;B++)V[z*c+B]=Math.min.apply(null,[d[N+B],d[N+B+1],d[N+A+B],d[N+A+B+1]])}p.width=c;p.height=g;p.mask=V;p.pixels=C}}}var q=Q.createCommonjsModule(function(p){(function(h){h=h();void 0!==h&&(p.exports=h)})(function(){var h={unstuff:function(a,d,k,c,g,C,z,B){var H=(1<<k)-1,O=0,R,N=0;a[a.length-1]<<=8*(4*a.length-Math.ceil(k*c/8));if(g)for(R=0;R<c;R++){if(0===N){var V=a[O++];N=32}if(N>=k){var Y=V>>>N-k&H;N-=k}else N=k-N,Y=(V&H)<<N&H,V=a[O++],N=32-N,Y+=V>>>N;d[R]=g[Y]}else for(g=
Math.ceil((B-C)/z),R=0;R<c;R++)0===N&&(V=a[O++],N=32),N>=k?(Y=V>>>N-k&H,N-=k):(N=k-N,Y=(V&H)<<N&H,V=a[O++],N=32-N,Y+=V>>>N),d[R]=Y<g?C+Y*z:B},unstuffLUT:function(a,d,k,c,g,C){var z=(1<<d)-1,B=0,H=0,O=0,R=O=0,N=[];a[a.length-1]<<=8*(4*a.length-Math.ceil(d*k/8));var V=Math.ceil((C-c)/g);for(H=0;H<k;H++){if(0===O){var Y=a[B++];O=32}O>=d?(R=Y>>>O-d&z,O-=d):(O=d-O,R=(Y&z)<<O&z,Y=a[B++],O=32-O,R+=Y>>>O);N[H]=R<V?c+R*g:C}N.unshift(c);return N},unstuff2:function(a,d,k,c,g,C,z,B){var H=(1<<k)-1,O=0,R,N=0,
V=0;if(g)for(R=0;R<c;R++){if(0===N){var Y=a[O++];N=32;V=0}if(N>=k){var ba=Y>>>V&H;N-=k;V+=k}else{var da=k-N;ba=Y>>>V&H;Y=a[O++];N=32-da;ba|=(Y&(1<<da)-1)<<k-da;V=da}d[R]=g[ba]}else for(g=Math.ceil((B-C)/z),R=0;R<c;R++)0===N&&(Y=a[O++],N=32,V=0),N>=k?(ba=Y>>>V&H,N-=k,V+=k):(da=k-N,ba=Y>>>V&H,Y=a[O++],N=32-da,ba|=(Y&(1<<da)-1)<<k-da,V=da),d[R]=ba<g?C+ba*z:B;return d},unstuffLUT2:function(a,d,k,c,g,C){var z=(1<<d)-1,B=0,H=0,O=0,R=0,N=0,V=0,Y=[],ba=Math.ceil((C-c)/g);for(H=0;H<k;H++){if(0===R){var da=
a[B++];R=32;V=0}R>=d?(N=da>>>V&z,R-=d,V+=d):(O=d-R,N=da>>>V&z,da=a[B++],R=32-O,N|=(da&(1<<O)-1)<<d-O,V=O);Y[H]=N<ba?c+N*g:C}Y.unshift(c);return Y},originalUnstuff:function(a,d,k,c){var g=(1<<k)-1,C=0,z,B=0;a[a.length-1]<<=8*(4*a.length-Math.ceil(k*c/8));for(z=0;z<c;z++){if(0===B){var H=a[C++];B=32}if(B>=k){var O=H>>>B-k&g;B-=k}else B=k-B,O=(H&g)<<B&g,H=a[C++],B=32-B,O+=H>>>B;d[z]=O}return d},originalUnstuff2:function(a,d,k,c){var g=(1<<k)-1,C=0,z,B=0,H=0;for(z=0;z<c;z++){if(0===B){var O=a[C++];B=
32;H=0}if(B>=k){var R=O>>>H&g;B-=k;H+=k}else{var N=k-B;R=O>>>H&g;O=a[C++];B=32-N;R|=(O&(1<<N)-1)<<k-N;H=N}d[z]=R}return d}},m={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(a){for(var d=65535,k=65535,c=a.length,g=Math.floor(c/2),C=0;g;){var z=359<=g?359:g;g-=z;do d+=a[C++]<<8,k+=d+=a[C++];while(--z);d=(d&65535)+(d>>>16);k=(k&65535)+(k>>>16)}c&1&&(k+=d+=a[C]<<8);return((k&65535)+(k>>>16)<<16|(d&65535)+(d>>>16))>>>0},readHeaderInfo:function(a,d){var k=d.ptr,c=new Uint8Array(a,k,6),g={};
g.fileIdentifierString=String.fromCharCode.apply(null,c);if(0!==g.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+g.fileIdentifierString;k+=6;c=new DataView(a,k,8);var C=c.getInt32(0,!0);g.fileVersion=C;k+=4;3<=C&&(g.checksum=c.getUint32(4,!0),k+=4);c=new DataView(a,k,12);g.height=c.getUint32(0,!0);g.width=c.getUint32(4,!0);k+=8;4<=C?(g.numDims=c.getUint32(8,!0),k+=4):g.numDims=1;c=new DataView(a,k,40);g.numValidPixel=c.getUint32(0,!0);g.microBlockSize=
c.getInt32(4,!0);g.blobSize=c.getInt32(8,!0);g.imageType=c.getInt32(12,!0);g.maxZError=c.getFloat64(16,!0);g.zMin=c.getFloat64(24,!0);g.zMax=c.getFloat64(32,!0);k+=40;d.headerInfo=g;d.ptr=k;if(3<=C&&(a=this.computeChecksumFletcher32(new Uint8Array(a,k-(4<=C?52:48),g.blobSize-14)),a!==g.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(a,d){var k=d.headerInfo,c=this.getDataTypeArray(k.imageType),g=k.numDims*this.getDataTypeSize(k.imageType),C=this.readSubArray(a,d.ptr,c,g);a=this.readSubArray(a,
d.ptr+g,c,g);d.ptr+=2*g;g=!0;for(d=0;d<k.numDims;d++)if(C[d]!==a[d]){g=!1;break}k.minValues=C;k.maxValues=a;return g},readSubArray:function(a,d,k,c){if(k===Uint8Array)a=new Uint8Array(a,d,c);else{var g=new ArrayBuffer(c);(new Uint8Array(g)).set(new Uint8Array(a,d,c));a=new k(g)}return a},readMask:function(a,d){var k=d.ptr,c=d.headerInfo,g=c.width*c.height,C=c.numValidPixel,z=new DataView(a,k,4);c={};c.numBytes=z.getUint32(0,!0);k+=4;if((0===C||g===C)&&0!==c.numBytes)throw"invalid mask";if(0===C)C=
new Uint8Array(Math.ceil(g/8)),c.bitset=C,z=new Uint8Array(g),d.pixels.resultMask=z,k+=c.numBytes;else if(0<c.numBytes){C=new Uint8Array(Math.ceil(g/8));z=new DataView(a,k,c.numBytes);a=z.getInt16(0,!0);var B=2,H=0,O=0;do{if(0<a)for(;a--;)C[H++]=z.getUint8(B++);else for(O=z.getUint8(B++),a=-a;a--;)C[H++]=O;a=z.getInt16(B,!0);B+=2}while(B<c.numBytes);if(-32768!==a||H<C.length)throw"Unexpected end of mask RLE encoding";z=new Uint8Array(g);for(B=B=a=0;B<g;B++)B&7?(a=C[B>>3],a<<=B&7):a=C[B>>3],a&128&&
(z[B]=1);d.pixels.resultMask=z;c.bitset=C;k+=c.numBytes}d.ptr=k;d.mask=c;return!0},readDataOneSweep:function(a,d,k){var c=d.ptr,g=d.headerInfo,C=g.numDims,z=g.width*g.height;g=g.numValidPixel*m.getDataTypeSize(g.imageType)*C;var B=d.pixels.resultMask;if(k===Uint8Array)a=new Uint8Array(a,c,g);else{var H=new ArrayBuffer(g);(new Uint8Array(H)).set(new Uint8Array(a,c,g));a=new k(H)}if(a.length===z*C)d.pixels.resultPixels=a;else{d.pixels.resultPixels=new k(z*C);var O=H=k=0,R=0;if(1<C)for(O=0;O<C;O++)for(R=
O*z,H=0;H<z;H++)B[H]&&(d.pixels.resultPixels[R+H]=a[k++]);else for(H=0;H<z;H++)B[H]&&(d.pixels.resultPixels[H]=a[k++])}d.ptr=c+g;return!0},readHuffmanTree:function(a,d){var k=this.HUFFMAN_LUT_BITS_MAX,c=new DataView(a,d.ptr,16);d.ptr+=16;if(2>c.getInt32(0,!0))throw"unsupported Huffman version";var g=c.getInt32(4,!0),C=c.getInt32(8,!0);c=c.getInt32(12,!0);if(C>=c)return!1;var z=new Uint32Array(c-C);m.decodeBits(a,d,z);var B=[],H;for(H=C;H<c;H++){var O=H-(H<g?0:g);B[O]={first:z[H-C],second:null}}H=
a.byteLength-d.ptr;z=new ArrayBuffer(4*Math.ceil(H/4));(new Uint8Array(z)).set(new Uint8Array(a,d.ptr,H));a=new Uint32Array(z);d=0;z=0;var R=a[0];for(H=C;H<c;H++){O=H-(H<g?0:g);var N=B[O].first;0<N&&(B[O].second=R<<d>>>32-N,32-d>=N?(d+=N,32===d&&(d=0,z++,R=a[z])):(d+=N-32,z++,R=a[z],B[O].second|=R>>>32-d))}var V=R=0,Y=new A;for(H=0;H<B.length;H++)void 0!==B[H]&&(R=Math.max(R,B[H].first));V=R>=k?k:R;k=[];var ba;for(H=C;H<c;H++)if(O=H-(H<g?0:g),N=B[O].first,0<N)if(C=[N,O],N<=V){O=B[O].second<<V-N;var da=
1<<V-N;for(N=0;N<da;N++)k[O|N]=C}else for(O=B[O].second,da=Y,--N;0<=N;N--)(ba=O>>>N&1)?(da.right||(da.right=new A),da=da.right):(da.left||(da.left=new A),da=da.left),0!==N||da.val||(da.val=C[1]);return{decodeLut:k,numBitsLUTQick:V,numBitsLUT:R,tree:Y,stuffedData:a,srcPtr:z,bitPos:d}},readHuffman:function(a,d,k){var c=d.headerInfo,g=c.numDims,C=d.headerInfo.height,z=d.headerInfo.width,B=z*C,H=this.readHuffmanTree(a,d);a=H.decodeLut;var O=H.tree,R=H.stuffedData,N=H.srcPtr,V=H.bitPos,Y=H.numBitsLUTQick;
H=H.numBitsLUT;var ba=0===d.headerInfo.imageType?128:0,da=d.pixels.resultMask,ka,ha,e,y,T,U,ca=0;0<V&&(N++,V=0);var ea=R[N],ia=1===d.encodeMode,la=new k(B*g),ja=la,oa;for(oa=0;oa<c.numDims;oa++){1<g&&(ja=new k(la.buffer,B*oa,B),ca=0);if(d.headerInfo.numValidPixel===z*C)for(e=T=0;e<C;e++)for(y=0;y<z;y++,T++){var ma=0;var na=ka=ea<<V>>>32-Y;32-V<Y&&(na=ka|=R[N+1]>>>64-V-Y);if(a[na])ma=a[na][1],V+=a[na][0];else for(na=ka=ea<<V>>>32-H,32-V<H&&(na=ka|=R[N+1]>>>64-V-H),na=O,U=0;U<H;U++)if(na=(ha=ka>>>H-
U-1&1)?na.right:na.left,!na.left&&!na.right){ma=na.val;V=V+U+1;break}32<=V&&(V-=32,N++,ea=R[N]);ma-=ba;ia?(ma=0<y?ma+ca:0<e?ma+ja[T-z]:ma+ca,ma&=255,ca=ja[T]=ma):ja[T]=ma}else for(e=T=0;e<C;e++)for(y=0;y<z;y++,T++)if(da[T]){ma=0;na=ka=ea<<V>>>32-Y;32-V<Y&&(na=ka|=R[N+1]>>>64-V-Y);if(a[na])ma=a[na][1],V+=a[na][0];else for(na=ka=ea<<V>>>32-H,32-V<H&&(na=ka|=R[N+1]>>>64-V-H),na=O,U=0;U<H;U++)if(na=(ha=ka>>>H-U-1&1)?na.right:na.left,!na.left&&!na.right){ma=na.val;V=V+U+1;break}32<=V&&(V-=32,N++,ea=R[N]);
ma-=ba;ia?(ma=0<y&&da[T-1]?ma+ca:0<e&&da[T-z]?ma+ja[T-z]:ma+ca,ma&=255,ca=ja[T]=ma):ja[T]=ma}d.ptr=d.ptr+4*(N+1)+(0<V?4:0)}d.pixels.resultPixels=la},decodeBits:function(a,d,k,c,g){var C=d.headerInfo,z=C.fileVersion,B=0,H=new DataView(a,d.ptr,5<=a.byteLength-d.ptr?5:a.byteLength-d.ptr),O=H.getUint8(0);B++;var R=O>>6,N=0===R?4:3-R,V=0<(O&32)?!0:!1;R=O&31;O=0;if(1===N)O=H.getUint8(B),B++;else if(2===N)O=H.getUint16(B,!0),B+=2;else if(4===N)O=H.getUint32(B,!0),B+=4;else throw"Invalid valid pixel count type";
N=2*C.maxZError;g=1<C.numDims?C.maxValues[g]:C.zMax;if(V){d.counter.lut++;V=H.getUint8(B);B++;C=Math.ceil((V-1)*R/8);var Y=Math.ceil(C/4);Y=new ArrayBuffer(4*Y);var ba=new Uint8Array(Y);d.ptr+=B;ba.set(new Uint8Array(a,d.ptr,C));B=new Uint32Array(Y);d.ptr+=C;for(H=0;V-1>>>H;)H++;C=Math.ceil(O*H/8);Y=Math.ceil(C/4);Y=new ArrayBuffer(4*Y);ba=new Uint8Array(Y);ba.set(new Uint8Array(a,d.ptr,C));a=new Uint32Array(Y);d.ptr+=C;d=3<=z?h.unstuffLUT2(B,R,V-1,c,N,g):h.unstuffLUT(B,R,V-1,c,N,g);3<=z?h.unstuff2(a,
k,H,O,d):h.unstuff(a,k,H,O,d)}else d.counter.bitstuffer++,H=R,d.ptr+=B,0<H&&(C=Math.ceil(O*H/8),Y=Math.ceil(C/4),Y=new ArrayBuffer(4*Y),ba=new Uint8Array(Y),ba.set(new Uint8Array(a,d.ptr,C)),a=new Uint32Array(Y),d.ptr+=C,3<=z?null==c?h.originalUnstuff2(a,k,H,O):h.unstuff2(a,k,H,O,!1,c,N,g):null==c?h.originalUnstuff(a,k,H,O):h.unstuff(a,k,H,O,!1,c,N,g))},readTiles:function(a,d,k){var c=d.headerInfo,g=c.width,C=c.height,z=c.microBlockSize,B=c.imageType,H=m.getDataTypeSize(B),O=Math.ceil(g/z),R=Math.ceil(C/
z);d.pixels.numBlocksY=R;d.pixels.numBlocksX=O;var N=d.pixels.ptr=0,V=0,Y=0,ba=0,da=0,ka=0,ha=0,e=0,y=0,T=0,U=0,ca=0,ea=0;ha=ea=ha=0;var ia=new k(z*z),la=C%z||z,ja=g%z||z,oa=c.numDims,ma,na=d.pixels.resultMask,qa=d.pixels.resultPixels,ra=5<=c.fileVersion?14:15,ua=c.zMax;for(Y=0;Y<R;Y++)for(da=Y!==R-1?z:la,ba=0;ba<O;ba++)for(ka=ba!==O-1?z:ja,U=Y*g*z+ba*z,ca=g-ka,ma=0;ma<oa;ma++){1<oa?(ea=qa,U=Y*g*z+ba*z,qa=new k(d.pixels.resultPixels.buffer,g*C*ma*H,g*C),ua=c.maxValues[ma]):ea=null;ha=a.byteLength-
d.ptr;N=new DataView(a,d.ptr,Math.min(10,ha));V={};ha=0;e=N.getUint8(0);ha++;var ta=5<=c.fileVersion?e&4:0;y=e>>6&255;T=e>>2&ra;if(T!==(ba*z>>3&ra))throw"integrity issue";if(ta&&0===ma)throw"integrity issue";e&=3;if(3<e)throw d.ptr+=ha,"Invalid block encoding ("+e+")";if(2===e){if(ta)if(na)for(N=0;N<da;N++)for(V=0;V<ka;V++)na[U]&&(qa[U]=ea[U]),U++;else for(N=0;N<da;N++)for(V=0;V<ka;V++)qa[U]=ea[U],U++;d.counter.constant++;d.ptr+=ha}else if(0===e){if(ta)throw"integrity issue";d.counter.uncompressed++;
d.ptr+=ha;ea=da*ka*H;ha=a.byteLength-d.ptr;ea=ea<ha?ea:ha;ha=new ArrayBuffer(0===ea%H?ea:ea+H-ea%H);ta=new Uint8Array(ha);ta.set(new Uint8Array(a,d.ptr,ea));ha=new k(ha);ea=0;if(na)for(N=0;N<da;N++){for(V=0;V<ka;V++)na[U]&&(qa[U]=ha[ea++]),U++;U+=ca}else for(N=0;N<da;N++){for(V=0;V<ka;V++)qa[U++]=ha[ea++];U+=ca}d.ptr+=ea*H}else if(y=m.getDataTypeUsed(ta&&6>B?4:B,y),T=m.getOnePixel(V,ha,y,N),ha+=m.getDataTypeSize(y),3===e)if(d.ptr+=ha,d.counter.constantoffset++,na)for(N=0;N<da;N++){for(V=0;V<ka;V++)na[U]&&
(qa[U]=ta?Math.min(ua,ea[U]+T):T),U++;U+=ca}else for(N=0;N<da;N++){for(V=0;V<ka;V++)qa[U]=ta?Math.min(ua,ea[U]+T):T,U++;U+=ca}else if(d.ptr+=ha,m.decodeBits(a,d,ia,T,ma),ha=0,ta)if(na)for(N=0;N<da;N++){for(V=0;V<ka;V++)na[U]&&(qa[U]=ia[ha++]+ea[U]),U++;U+=ca}else for(N=0;N<da;N++){for(V=0;V<ka;V++)qa[U]=ia[ha++]+ea[U],U++;U+=ca}else if(na)for(N=0;N<da;N++){for(V=0;V<ka;V++)na[U]&&(qa[U]=ia[ha++]),U++;U+=ca}else for(N=0;N<da;N++){for(V=0;V<ka;V++)qa[U++]=ia[ha++];U+=ca}}},formatFileInfo:function(a){return{fileIdentifierString:a.headerInfo.fileIdentifierString,
fileVersion:a.headerInfo.fileVersion,imageType:a.headerInfo.imageType,height:a.headerInfo.height,width:a.headerInfo.width,numValidPixel:a.headerInfo.numValidPixel,microBlockSize:a.headerInfo.microBlockSize,blobSize:a.headerInfo.blobSize,maxZError:a.headerInfo.maxZError,pixelType:m.getPixelType(a.headerInfo.imageType),eofOffset:a.eofOffset,mask:a.mask?{numBytes:a.mask.numBytes}:null,pixels:{numBlocksX:a.pixels.numBlocksX,numBlocksY:a.pixels.numBlocksY,maxValue:a.headerInfo.zMax,minValue:a.headerInfo.zMin,
noDataValue:a.noDataValue}}},constructConstantSurface:function(a){var d=a.headerInfo.zMax,k=a.headerInfo.numDims,c=a.headerInfo.height*a.headerInfo.width,g=0,C=0,z=0,B=a.pixels.resultMask,H=a.pixels.resultPixels;if(B)if(1<k)for(g=0;g<k;g++)for(z=g*c,d=a.headerInfo.maxValues[g],C=0;C<c;C++)B[C]&&(H[z+C]=d);else for(C=0;C<c;C++)B[C]&&(H[C]=d);else if(1<k)for(g=0;g<k;g++)for(z=g*c,d=a.headerInfo.maxValues[g],C=0;C<c;C++)H[z+C]=d;else for(C=0;C<c;C++)H[C]=d},getDataTypeArray:function(a){switch(a){case 0:a=
Int8Array;break;case 1:a=Uint8Array;break;case 2:a=Int16Array;break;case 3:a=Uint16Array;break;case 4:a=Int32Array;break;case 5:a=Uint32Array;break;case 6:a=Float32Array;break;case 7:a=Float64Array;break;default:a=Float32Array}return a},getPixelType:function(a){switch(a){case 0:a="S8";break;case 1:a="U8";break;case 2:a="S16";break;case 3:a="U16";break;case 4:a="S32";break;case 5:a="U32";break;case 6:a="F32";break;case 7:a="F64";break;default:a="F32"}return a},isValidPixelValue:function(a,d){if(null==
d)return!1;switch(a){case 0:a=-128<=d&&127>=d;break;case 1:a=0<=d&&255>=d;break;case 2:a=-32768<=d&&32767>=d;break;case 3:a=0<=d&&65536>=d;break;case 4:a=-2147483648<=d&&2147483647>=d;break;case 5:a=0<=d&&4294967296>=d;break;case 6:a=-3.4027999387901484E38<=d&&3.4027999387901484E38>=d;break;case 7:a=4.9E-324<=d&&1.7976931348623157E308>=d;break;default:a=!1}return a},getDataTypeSize:function(a){var d=0;switch(a){case 0:case 1:d=1;break;case 2:case 3:d=2;break;case 4:case 5:case 6:d=4;break;case 7:d=
8;break;default:d=a}return d},getDataTypeUsed:function(a,d){var k=a;switch(a){case 2:case 4:k=a-d;break;case 3:case 5:k=a-2*d;break;case 6:k=0===d?a:1===d?2:1;break;case 7:k=0===d?a:a-2*d+1;break;default:k=a}return k},getOnePixel:function(a,d,k,c){a=0;switch(k){case 0:a=c.getInt8(d);break;case 1:a=c.getUint8(d);break;case 2:a=c.getInt16(d,!0);break;case 3:a=c.getUint16(d,!0);break;case 4:a=c.getInt32(d,!0);break;case 5:a=c.getUInt32(d,!0);break;case 6:a=c.getFloat32(d,!0);break;case 7:a=c.getFloat64(d,
!0);break;default:throw"the decoder does not understand this pixel type";}return a}},A=function(a,d,k){this.val=a;this.left=d;this.right=k};return{decode:function(a,d){d=d||{};var k=d.noDataValue,c=0,g={};g.ptr=d.inputOffset||0;g.pixels={};if(m.readHeaderInfo(a,g)){c=g.headerInfo;var C=c.fileVersion,z=m.getDataTypeArray(c.imageType);if(5<C)throw"unsupported lerc version 2."+C;m.readMask(a,g);c.numValidPixel===c.width*c.height||g.pixels.resultMask||(g.pixels.resultMask=d.maskData);var B=c.width*c.height;
g.pixels.resultPixels=new z(B*c.numDims);g.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==c.numValidPixel)if(c.zMax===c.zMin)m.constructConstantSurface(g);else if(4<=C&&m.checkMinMaxRanges(a,g))m.constructConstantSurface(g);else{var H=new DataView(a,g.ptr,2),O=H.getUint8(0);g.ptr++;if(O)m.readDataOneSweep(a,g,z);else if(1<C&&1>=c.imageType&&1E-5>Math.abs(c.maxZError-.5)){H=H.getUint8(1);g.ptr++;g.encodeMode=H;if(2<H||4>C&&1<H)throw"Invalid Huffman flag "+
H;H?m.readHuffman(a,g,z):m.readTiles(a,g,z)}else m.readTiles(a,g,z)}g.eofOffset=g.ptr;d.inputOffset?(a=g.headerInfo.blobSize+d.inputOffset-g.ptr,1<=Math.abs(a)&&(g.eofOffset=d.inputOffset+g.headerInfo.blobSize)):(a=g.headerInfo.blobSize-g.ptr,1<=Math.abs(a)&&(g.eofOffset=g.headerInfo.blobSize));a={width:c.width,height:c.height,pixelData:g.pixels.resultPixels,minValue:c.zMin,maxValue:c.zMax,validPixelCount:c.numValidPixel,dimCount:c.numDims,dimStats:{minValues:c.minValues,maxValues:c.maxValues},maskData:g.pixels.resultMask};
if(g.pixels.resultMask&&m.isValidPixelValue(c.imageType,k)){C=g.pixels.resultMask;for(c=0;c<B;c++)C[c]||(a.pixelData[c]=k);a.noDataValue=k}g.noDataValue=k;d.returnFileInfo&&(a.fileInfo=m.formatFileInfo(g));return a}},getBandCount:function(a){for(var d=0,k=0,c={ptr:0,pixels:{}};k<a.byteLength-58;)m.readHeaderInfo(a,c),k+=c.headerInfo.blobSize,d++,c.ptr=k;return d}}})}),x=function(p){function h(d){var k,c;this.data=d;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;
this.text={};for(c=null;;){var g=this.readUInt32();var C=d=void 0;d=[];for(C=0;4>C;++C)d.push(String.fromCharCode(this.data[this.pos++]));d=d.join("");switch(d){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||
Infinity,frames:[]};break;case "PLTE":this.palette=this.read(g);break;case "fcTL":c&&this.animation.frames.push(c);this.pos+=4;c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};d=this.readUInt16();g=this.readUInt16()||100;c.delay=1E3*d/g;c.disposeOp=this.data[this.pos++];c.blendOp=this.data[this.pos++];c.data=[];break;case "IDAT":case "fdAT":"fdAT"===d&&(this.pos+=4,g-=4);d=(null!=c?c.data:void 0)||this.imgData;for(C=0;0<=g?C<g:C>g;0<=g?++C:--C)d.push(this.data[this.pos++]);
break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(g);g=255-this.transparency.indexed.length;if(0<g)for(d=0;0<=g?d<g:d>g;0<=g?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(g)[0];break;case 2:this.transparency.rgb=this.read(g)}break;case "tEXt":C=this.read(g);g=C.indexOf(0);d=String.fromCharCode.apply(String,C.slice(0,g));this.text[d]=String.fromCharCode.apply(String,C.slice(g+1));break;case "IEND":c&&
this.animation.frames.push(c);a:{switch(this.colorType){case 0:case 3:case 4:c=1;break a;case 2:case 6:c=3;break a}c=void 0}this.colors=c;this.hasAlphaChannel=4===(k=this.colorType)||6===k;k=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*k;a:{switch(this.colors){case 1:k="DeviceGray";break a;case 3:k="DeviceRGB";break a}k=void 0}this.colorSpace=k;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=g}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");
}}var m;h.load=function(d,k,c){"function"===typeof k&&(c=k);var g=new XMLHttpRequest;g.open("GET",d,!0);g.responseType="arraybuffer";g.onload=function(){var C=new Uint8Array(g.response||g.mozResponseArrayBuffer);C=new h(C);"function"===typeof(null!=k?k.getContext:void 0)&&C.render(k);return"function"===typeof c?c(C):void 0};return g.send(null)};h.prototype.read=function(d){var k;var c=[];for(k=0;0<=d?k<d:k>d;0<=d?++k:--k)c.push(this.data[this.pos++]);return c};h.prototype.readUInt32=function(){var d=
this.data[this.pos++]<<24;var k=this.data[this.pos++]<<16;var c=this.data[this.pos++]<<8;var g=this.data[this.pos++];return d|k|c|g};h.prototype.readUInt16=function(){var d=this.data[this.pos++]<<8;var k=this.data[this.pos++];return d|k};h.prototype.decodePixels=function(d){var k,c,g,C,z,B,H,O;null==d&&(d=this.imgData);if(0===d.length)return new Uint8Array(0);d=new F.Zlib(d);d=d.getBytes();var R=this.pixelBitlength/8;var N=R*this.width;var V=new Uint8Array(N*this.height);var Y=d.length;for(c=C=z=
0;C<Y;){switch(d[C++]){case 0:for(g=k=0;k<N;g=k+=1)V[c++]=d[C++];break;case 1:for(g=B=0;B<N;g=B+=1){k=d[C++];var ba=g<R?0:V[c-R];V[c++]=(k+ba)%256}break;case 2:for(g=ba=0;ba<N;g=ba+=1){k=d[C++];var da=(g-g%R)/R;B=z&&V[(z-1)*N+da*R+g%R];V[c++]=(B+k)%256}break;case 3:for(g=O=0;O<N;g=O+=1)k=d[C++],da=(g-g%R)/R,ba=g<R?0:V[c-R],B=z&&V[(z-1)*N+da*R+g%R],V[c++]=(k+Math.floor((ba+B)/2))%256;break;case 4:for(g=O=0;O<N;g=O+=1){k=d[C++];da=(g-g%R)/R;ba=g<R?0:V[c-R];0===z?B=H=0:(B=V[(z-1)*N+da*R+g%R],H=da&&V[(z-
1)*N+(da-1)*R+g%R]);var ka=ba+B-H;g=Math.abs(ka-ba);da=Math.abs(ka-B);ka=Math.abs(ka-H);ba=g<=da&&g<=ka?ba:da<=ka?B:H;V[c++]=(k+ba)%256}break;default:throw Error("Invalid filter algorithm: "+d[C-1]);}z++}return V};h.prototype.decodePalette=function(){var d,k,c,g,C;var z=this.palette;var B=this.transparency.indexed||[];var H=new Uint8Array((B.length||0)+z.length);var O=c=d=k=0;for(g=z.length;c<g;O=c+=3)H[k++]=z[O],H[k++]=z[O+1],H[k++]=z[O+2],H[k++]=null!=(C=B[d++])?C:255;return H};h.prototype.copyToImageData=
function(d,k){var c,g;var C=this.colors;var z=null;var B=this.hasAlphaChannel;this.palette.length&&(z=null!=(c=this._decodedPalette)?c:this._decodedPalette=this.decodePalette(),C=4,B=!0);d=d.data||d;var H=d.length;var O=z||k;c=g=0;if(1===C)for(;c<H;)C=z?4*k[c/4]:g,g=O[C++],d[c++]=g,d[c++]=g,d[c++]=g,d[c++]=B?O[C++]:this.transparency.grayscale&&this.transparency.grayscale===g?0:255,g=C;else for(;c<H;)C=z?4*k[c/4]:g,d[c++]=O[C++],d[c++]=O[C++],d[c++]=O[C++],d[c++]=B?O[C++]:this.transparency.rgb&&this.transparency.rgb[1]===
O[C-3]&&this.transparency.rgb[3]===O[C-2]&&this.transparency.rgb[5]===O[C-1]?0:255,g=C};h.prototype.decode=function(){var d=new Uint8Array(this.width*this.height*4);this.copyToImageData(d,this.decodePixels());return d};var A=(m=p.document&&p.document.createElement("canvas"))&&m.getContext("2d");var a=function(d){A.width=d.width;A.height=d.height;A.clearRect(0,0,d.width,d.height);A.putImageData(d,0,0);d=new Image;d.src=m.toDataURL();return d};h.prototype.decodeFrames=function(d){var k,c;if(this.animation){var g=
this.animation.frames;var C=[];var z=k=0;for(c=g.length;k<c;z=++k){z=g[z];var B=d.createImageData(z.width,z.height);var H=this.decodePixels(new Uint8Array(z.data));this.copyToImageData(B,H);z.imageData=B;C.push(z.image=a(B))}return C}};h.prototype.renderFrame=function(d,k){var c=this.animation.frames;var g=c[k];c=c[k-1];0===k&&d.clearRect(0,0,this.width,this.height);1===(null!=c?c.disposeOp:void 0)?d.clearRect(c.xOffset,c.yOffset,c.width,c.height):2===(null!=c?c.disposeOp:void 0)&&d.putImageData(c.imageData,
c.xOffset,c.yOffset);0===g.blendOp&&d.clearRect(g.xOffset,g.yOffset,g.width,g.height);return d.drawImage(g.image,g.xOffset,g.yOffset)};h.prototype.animate=function(d){var k,c=this;var g=0;var C=this.animation;var z=C.numFrames;var B=C.frames;var H=C.numPlays;return(k=function(){var O=g++%z;var R=B[O];c.renderFrame(d,O);if(1<z&&g/z<H)return c.animation._timeout=setTimeout(k,R.delay)})()};h.prototype.stopAnimation=function(){var d;return clearTimeout(null!=(d=this.animation)?d._timeout:void 0)};h.prototype.render=
function(d){d._png&&d._png.stopAnimation();d._png=this;d.width=this.width;d.height=this.height;d=d.getContext("2d");if(this.animation)return this.decodeFrames(d),this.animate(d);var k=d.createImageData(this.width,this.height);this.copyToImageData(k,this.decodePixels());return d.putImageData(k,0,0)};return h}(self);const J=new Set(["jpg","png","bmp","gif"]);S.decode=async function(p,h,m){if(null==p)throw new n("rasterCodec:decode","missing encodeddata parameter.");if(null==h||null==h.width||null==
h.height)throw new n("rasterCodec:decode","requires width and height in options parameter.");let A=h.format&&h.format.toLowerCase();if("tiff"===A&&h.customOptions)return h=D.decodeTileOrStrip(p,h.customOptions),h=new G({width:h.width,height:h.height,pixels:h.pixels,pixelType:h.pixelType.toLowerCase(),mask:h.mask,statistics:null}),h.updateStatistics(),h;if(!A||"bsq"!==A&&"bip"!==A)A=u(p);h.useCanvas&&J.has(A)?p=await r(p,A,h,m):(m=I(A),h.isPoint&&(h={...h},h.width++,h.height++),p=m(p,h),h.isPoint&&
t(p));return p};S.getFormat=function(p){p=u(p);"lerc2"===p?p="lerc":"error"===p&&(p="");return p};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(S){function n(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}S.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};S.commonjsRequire=
n;S.createCommonjsModule=function(G,Q,F){return F={path:Q,exports:{},require:function(P,L){return n(P,void 0===L||null===L?F.path:L)}},G(F,F.exports),F.exports};S.getDefaultExportFromCjs=function(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G["default"]:G}})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(S,n){n=n.createCommonjsModule(function(G){(function(Q){Q=Q();void 0!==Q&&(G.exports=Q)})(function(){var Q=function(){function F(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}F.prototype={ensureBuffer:function(P){var L=this.buffer,M=L?L.byteLength:0;if(P<M)return L;for(var W=512;W<P;)W<<=1;P=new Uint8Array(W);for(W=0;W<M;++W)P[W]=L[W];return this.buffer=P},getByte:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(P){var L=this.pos;if(P){this.ensureBuffer(L+P);for(P=L+P;!this.eof&&this.bufferLength<P;)this.readBlock();var M=this.bufferLength;
P>M&&(P=M)}else{for(;!this.eof;)this.readBlock();P=this.bufferLength}this.pos=P;return this.buffer.subarray(L,P)},lookChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var P=this.pos;this.bufferLength<=P;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(P,L,M){for(var W=P+L;this.bufferLength<=W&&!this.eof;)this.readBlock();
return new Stream(this.buffer,P,L,M)},skip:function(P){P||(P=1);this.pos+=P},reset:function(){this.pos=0}};return F}();return function(){function F(v){throw Error(v);}function P(v){var b=0,l=v[b++],f=v[b++];-1!=l&&-1!=f||F("Invalid header in flate stream");8!=(l&15)&&F("Unknown compression method in flate stream");0!=((l<<8)+f)%31&&F("Bad FCHECK in flate stream");f&32&&F("FDICT bit set in flate stream");this.bytes=v;this.bytesPos=b;this.codeBuf=this.codeSize=0;Q.call(this)}if(!self||!self.Uint32Array)return null;
var L=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),W=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),K=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],D=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];P.prototype=Object.create(Q.prototype);P.prototype.getBits=function(v){for(var b=this.codeSize,l=this.codeBuf,f=this.bytes,w=this.bytesPos,r;b<v;)"undefined"==typeof(r=f[w++])&&F("Bad encoding in flate stream"),l|=r<<
b,b+=8;this.codeBuf=l>>v;this.codeSize=b-=v;this.bytesPos=w;return l&(1<<v)-1};P.prototype.getCode=function(v){var b=v[0],l=v[1];v=this.codeSize;for(var f=this.codeBuf,w=this.bytes,r=this.bytesPos;v<l;){var u;"undefined"==typeof(u=w[r++])&&F("Bad encoding in flate stream");f|=u<<v;v+=8}l=b[f&(1<<l)-1];b=l>>16;l&=65535;(0==v||v<b||0==b)&&F("Bad encoding in flate stream");this.codeBuf=f>>b;this.codeSize=v-b;this.bytesPos=r;return l};P.prototype.generateHuffmanTable=function(v){for(var b=v.length,l=
0,f=0;f<b;++f)v[f]>l&&(l=v[f]);for(var w=1<<l,r=new Uint32Array(w),u=1,I=0,E=2;u<=l;++u,I<<=1,E<<=1)for(var t=0;t<b;++t)if(v[t]==u){var q=0,x=I;for(f=0;f<u;++f)q=q<<1|x&1,x>>=1;for(f=q;f<w;f+=E)r[f]=u<<16|t;++I}return[r,l]};P.prototype.readBlock=function(){function v(q,x,J,p,h){for(q=q.getBits(J)+p;0<q--;)x[I++]=h}var b=this.getBits(3);b&1&&(this.eof=!0);b>>=1;if(0==b){var l=this.bytes,f=this.bytesPos,w;"undefined"==typeof(w=l[f++])&&F("Bad block header in flate stream");var r=w;"undefined"==typeof(w=
l[f++])&&F("Bad block header in flate stream");r|=w<<8;"undefined"==typeof(w=l[f++])&&F("Bad block header in flate stream");b=w;"undefined"==typeof(w=l[f++])&&F("Bad block header in flate stream");(b|w<<8)!=(~r&65535)&&F("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;w=this.bufferLength;b=this.ensureBuffer(w+r);this.bufferLength=r=w+r;for(var u=w;u<r;++u){if("undefined"==typeof(w=l[f++])){this.eof=!0;break}b[u]=w}this.bytesPos=f}else{if(1==b)f=K,w=D;else if(2==b){b=
this.getBits(5)+257;w=this.getBits(5)+1;l=this.getBits(4)+4;f=Array(L.length);for(var I=0;I<l;)f[L[I++]]=this.getBits(3);f=this.generateHuffmanTable(f);I=l=0;w=b+w;for(r=Array(w);I<w;)u=this.getCode(f),16==u?v(this,r,2,3,l):17==u?v(this,r,3,3,l=0):18==u?v(this,r,7,11,l=0):r[I++]=l=u;f=this.generateHuffmanTable(r.slice(0,b));w=this.generateHuffmanTable(r.slice(b,w))}else F("Unknown block type in flate stream");r=(b=this.buffer)?b.length:0;for(u=this.bufferLength;;){var E=this.getCode(f);if(256>E)u+
1>=r&&(b=this.ensureBuffer(u+1),r=b.length),b[u++]=E;else{if(256==E){this.bufferLength=u;break}E-=257;E=M[E];var t=E>>16;0<t&&(t=this.getBits(t));l=(E&65535)+t;E=this.getCode(w);E=W[E];t=E>>16;0<t&&(t=this.getBits(t));E=(E&65535)+t;u+l>=r&&(b=this.ensureBuffer(u+l),r=b.length);for(t=0;t<l;++t,++u)b[u]=b[u-E]}}}};return P}()})});S.Zlib=n})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(S,
n,G){return function(){function Q(F){F&&(this.canvas=F.canvas,this.ctx=F.ctx||F.canvas&&F.canvas.getContext("2d"))}Q.prototype.decode=function(F,P,L){if(!F||10>F.byteLength)throw new S("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:M,height:W,format:K}=P;const {applyJpegMask:D}=P;if(D&&(!M||!W))throw new S("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return n.create((v,b)=>{let l=null;"jpg"===K&&D&&(l=Q.getMask(F,
P));const f=new Blob([new Uint8Array(F)],{type:"jpg"==="image/"+K?"jpeg":K}),w=URL.createObjectURL(f),r=new Image;let u;r.src=w;r.onload=()=>{URL.revokeObjectURL(w);if(n.isAborted(L))b(n.createAbortError());else{M=r.width;W=r.height;if(this.canvas){if(this.canvas.width!==M||this.canvas.height!==W)this.canvas.width=M,this.canvas.height=W;this.ctx.clearRect(0,0,M,W)}else this.canvas=document.createElement("canvas"),this.canvas.width=M,this.canvas.height=W,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(r,
0,0);var I=this.ctx.getImageData(0,0,M,W);u=I.data;var E;if(P.renderOnCanvas){if(l)for(E=0;E<l.length;E++)u[4*E+3]=l[E]?255:0;this.ctx.putImageData(I,0,0);v(null)}else{I=M*W;var t=new Uint8Array(I),q=new Uint8Array(I),x=new Uint8Array(I);if(l)for(E=0;E<I;E++)t[E]=u[4*E],q[E]=u[4*E+1],x[E]=u[4*E+2];else for(l=new Uint8Array(I),E=0;E<I;E++)t[E]=u[4*E],q[E]=u[4*E+1],x[E]=u[4*E+2],l[E]=u[4*E+3];v({width:M,height:W,pixels:[t,q,x],mask:l,pixelType:"u8"})}}};r.onerror=()=>{URL.revokeObjectURL(w);b("cannot load image")}})};
Q.getMask=function(F,P){let L=null;try{var M=new Uint8Array(F);F=0;var W=M.length-2;for(F=Math.ceil(M.length/2);F<W&&(255!==M[F]||217!==M[F+1]);F++);F+=2;if(F<M.length-1){const K=(new G.Zlib(M.subarray(F))).getBytes();L=new Uint8Array(P.width*P.height);P=0;for(M=0;M<K.length;M++)for(W=7;0<=W;W--)L[P++]=K[M]>>W&1}}catch(K){}return L};return Q}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(S,n){return function(){function G(){}
G.decode=function(Q){var F=new Uint8Array(Q);Q=new n.Jpg;Q.parse(F);const {width:P,height:L,numComponents:M,eof:W}=Q;Q=Q.getData(P,L,!0);let K;const D=P*L;let v=0;var b=0,l=0;if(W<F.length-1)for(F=(new S.Zlib(F.subarray(W))).getBytes(),K=new Uint8Array(D),v=b=0;v<F.length;v++)for(l=7;0<=l;l--)K[b++]=F[v]>>l&1;F=null;if(1===M)F=[Q,Q,Q];else{F=[];for(v=0;3>v;v++)l=new Uint8Array(D),F.push(l);for(b=l=0;b<D;b++)for(v=0;3>v;v++)F[v][b]=Q[l++]}return{width:P,height:L,pixels:F,mask:K}};return G}()})},"esri/chunks/Jpg":function(){define(["exports",
"./_commonjsHelpers"],function(S,n){n=n.createCommonjsModule(function(G){(function(Q){Q=Q();void 0!==Q&&(G.exports=Q)})(function(){var Q=function(){function F(P){this.message="JPEG error: "+P}F.prototype=Error();F.prototype.name="JpegError";return F.constructor=F}();return function(){function F(){this.decodeTransform=null;this.colorTransform=-1}function P(D,v){for(var b=0,l=[],f,w,r=16;0<r&&!D[r-1];)r--;l.push({children:[],index:0});var u=l[0],I;for(f=0;f<r;f++){for(w=0;w<D[f];w++){u=l.pop();for(u.children[u.index]=
v[b];0<u.index;)u=l.pop();u.index++;for(l.push(u);l.length<=f;)l.push(I={children:[],index:0}),u.children[u.index]=I.children,u=I;b++}f+1<r&&(l.push(I={children:[],index:0}),u.children[u.index]=I.children,u=I)}return l[0].children}function L(D,v,b,l,f,w,r,u,I){function E(){if(0<c)return c--,k>>c&1;k=D[v++];if(255===k){var ha=D[v++];if(ha)throw new Q("unexpected marker "+(k<<8|ha).toString(16));}c=7;return k>>>7}function t(ha){for(;;){ha=ha[E()];if("number"===typeof ha)return ha;if("object"!==typeof ha)throw new Q("invalid huffman sequence");
}}function q(ha){for(var e=0;0<ha;)e=e<<1|E(),ha--;return e}function x(ha){if(1===ha)return 1===E()?1:-1;var e=q(ha);return e>=1<<ha-1?e:e+(-1<<ha)+1}function J(ha,e){var y=t(ha.huffmanTableDC);y=0===y?0:x(y);ha.blockData[e]=ha.pred+=y;for(y=1;64>y;){var T=t(ha.huffmanTableAC),U=T&15;T>>=4;if(0===U){if(15>T)break;y+=16}else y+=T,ha.blockData[e+K[y]]=x(U),y++}}function p(ha,e){var y=t(ha.huffmanTableDC);y=0===y?0:x(y)<<I;ha.blockData[e]=ha.pred+=y}function h(ha,e){ha.blockData[e]|=E()<<I}function m(ha,
e){if(0<g)g--;else for(var y=w;y<=r;){var T=t(ha.huffmanTableAC),U=T&15;T>>=4;if(0===U){if(15>T){g=q(T)+(1<<T)-1;break}y+=16}else y+=T,ha.blockData[e+K[y]]=x(U)*(1<<I),y++}}function A(ha,e){for(var y=w,T=0,U;y<=r;){U=K[y];switch(C){case 0:T=t(ha.huffmanTableAC);U=T&15;T>>=4;if(0===U)15>T?(g=q(T)+(1<<T),C=4):(T=16,C=1);else{if(1!==U)throw new Q("invalid ACn encoding");z=x(U);C=T?2:3}continue;case 1:case 2:ha.blockData[e+U]?ha.blockData[e+U]+=E()<<I:(T--,0===T&&(C=2===C?3:0));break;case 3:ha.blockData[e+
U]?ha.blockData[e+U]+=E()<<I:(ha.blockData[e+U]=z<<I,C=0);break;case 4:ha.blockData[e+U]&&(ha.blockData[e+U]+=E()<<I)}y++}4===C&&(g--,0===g&&(C=0))}var a=b.mcusPerLine,d=v,k=0,c=0,g=0,C=0,z,B=l.length,H,O,R,N;u=b.progressive?0===w?0===u?p:h:0===u?m:A:J;var V=0;b=1===B?l[0].blocksPerLine*l[0].blocksPerColumn:a*b.mcusPerColumn;for(var Y,ba;V<b;){var da=f?Math.min(b-V,f):b;for(H=0;H<B;H++)l[H].pred=0;g=0;if(1===B){var ka=l[0];for(N=0;N<da;N++)u(ka,64*((ka.blocksPerLine+1)*(V/ka.blocksPerLine|0)+V%ka.blocksPerLine)),
V++}else for(N=0;N<da;N++){for(H=0;H<B;H++)for(ka=l[H],Y=ka.h,ba=ka.v,O=0;O<ba;O++)for(R=0;R<Y;R++)u(ka,64*((ka.blocksPerLine+1)*((V/a|0)*ka.v+O)+(V%a*ka.h+R)));V++}c=0;(ka=W(D,v))&&ka.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ka.invalid),v=ka.offset);ka=ka&&ka.marker;if(!ka||65280>=ka)throw new Q("marker was not found");if(65488<=ka&&65495>=ka)v+=2;else break}(ka=W(D,v))&&ka.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ka.invalid),v=
ka.offset);return v-d}function M(D,v){D=v.blocksPerLine;for(var b=v.blocksPerColumn,l=new Int16Array(64),f=0;f<b;f++)for(var w=0;w<D;w++){var r=void 0,u=void 0,I=void 0,E=void 0,t=void 0,q=void 0,x=void 0,J=void 0,p=t=q=E=u=r=void 0,h=void 0,m=void 0,A=void 0,a=64*((v.blocksPerLine+1)*f+w),d=l,k=v.quantizationTable,c=v.blockData;if(!k)throw new Q("missing required Quantization Table.");for(var g=0;64>g;g+=8)r=c[a+g],J=c[a+g+1],x=c[a+g+2],q=c[a+g+3],t=c[a+g+4],E=c[a+g+5],I=c[a+g+6],u=c[a+g+7],r*=k[g],
0===(J|x|q|t|E|I|u)?(r=5793*r+512>>10,d[g]=r,d[g+1]=r,d[g+2]=r,d[g+3]=r,d[g+4]=r,d[g+5]=r,d[g+6]=r,d[g+7]=r):(J*=k[g+1],x*=k[g+2],q*=k[g+3],t*=k[g+4],E*=k[g+5],I*=k[g+6],u*=k[g+7],A=5793*r+128>>8,m=5793*t+128>>8,h=x,p=I,t=2896*(J-u)+128>>8,u=2896*(J+u)+128>>8,q<<=4,E<<=4,A=A+m+1>>1,m=A-m,r=3784*h+1567*p+128>>8,h=1567*h-3784*p+128>>8,p=r,t=t+E+1>>1,E=t-E,u=u+q+1>>1,q=u-q,A=A+p+1>>1,p=A-p,m=m+h+1>>1,h=m-h,r=2276*t+3406*u+2048>>12,t=3406*t-2276*u+2048>>12,u=r,r=799*q+4017*E+2048>>12,q=4017*q-799*E+2048>>
12,E=r,d[g]=A+u,d[g+7]=A-u,d[g+1]=m+E,d[g+6]=m-E,d[g+2]=h+q,d[g+5]=h-q,d[g+3]=p+t,d[g+4]=p-t);for(k=0;8>k;++k)r=d[k],J=d[k+8],x=d[k+16],q=d[k+24],t=d[k+32],E=d[k+40],I=d[k+48],u=d[k+56],0===(J|x|q|t|E|I|u)?(r=5793*r+8192>>14,r=-2040>r?0:2024<=r?255:r+2056>>4,c[a+k]=r,c[a+k+8]=r,c[a+k+16]=r,c[a+k+24]=r,c[a+k+32]=r,c[a+k+40]=r,c[a+k+48]=r,c[a+k+56]=r):(A=5793*r+2048>>12,m=5793*t+2048>>12,h=x,p=I,t=2896*(J-u)+2048>>12,u=2896*(J+u)+2048>>12,A=(A+m+1>>1)+4112,m=A-m,r=3784*h+1567*p+2048>>12,h=1567*h-3784*
p+2048>>12,p=r,t=t+E+1>>1,E=t-E,u=u+q+1>>1,q=u-q,A=A+p+1>>1,p=A-p,m=m+h+1>>1,h=m-h,r=2276*t+3406*u+2048>>12,t=3406*t-2276*u+2048>>12,u=r,r=799*q+4017*E+2048>>12,q=4017*q-799*E+2048>>12,E=r,r=A+u,u=A-u,J=m+E,I=m-E,x=h+q,E=h-q,q=p+t,t=p-t,r=16>r?0:4080<=r?255:r>>4,J=16>J?0:4080<=J?255:J>>4,x=16>x?0:4080<=x?255:x>>4,q=16>q?0:4080<=q?255:q>>4,t=16>t?0:4080<=t?255:t>>4,E=16>E?0:4080<=E?255:E>>4,I=16>I?0:4080<=I?255:I>>4,u=16>u?0:4080<=u?255:u>>4,c[a+k]=r,c[a+k+8]=J,c[a+k+16]=x,c[a+k+24]=q,c[a+k+32]=t,
c[a+k+40]=E,c[a+k+48]=I,c[a+k+56]=u)}return v.blockData}function W(D,v,b){var l=D.length-1;b=b<v?b:v;if(v>=l)return null;var f=D[v]<<8|D[v+1];if(65472<=f&&65534>=f)return{invalid:null,marker:f,offset:v};for(v=D[b]<<8|D[b+1];!(65472<=v&&65534>=v);){if(++b>=l)return null;v=D[b]<<8|D[b+1]}return{invalid:f.toString(16),marker:v,offset:b}}if(!self||!self.Uint8ClampedArray)return null;var K=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,
57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);F.prototype={parse:function(D){function v(){var k=D[f]<<8|D[f+1];f+=2;return k}function b(){var k=v();k=f+k-2;var c=W(D,k,f);c&&c.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+c.invalid),k=c.offset);k=D.subarray(f,k);f+=k.length;return k}function l(k){for(var c=Math.ceil(k.samplesPerLine/8/k.maxH),g=Math.ceil(k.scanLines/8/k.maxV),C=0;C<k.components.length;C++){d=k.components[C];var z=
Math.ceil(Math.ceil(k.samplesPerLine/8)*d.h/k.maxH),B=Math.ceil(Math.ceil(k.scanLines/8)*d.v/k.maxV);d.blockData=new Int16Array(64*g*d.v*(c*d.h+1));d.blocksPerLine=z;d.blocksPerColumn=B}k.mcusPerLine=c;k.mcusPerColumn=g}var f=0,w=null,r=null,u=[],I=[],E=[],t=v();if(65496!==t)throw new Q("SOI not found");for(t=v();65497!==t;){switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var q=
b();65504===t&&74===q[0]&&70===q[1]&&73===q[2]&&70===q[3]&&0===q[4]&&(w={version:{major:q[5],minor:q[6]},densityUnits:q[7],xDensity:q[8]<<8|q[9],yDensity:q[10]<<8|q[11],thumbWidth:q[12],thumbHeight:q[13],thumbData:q.subarray(14,14+3*q[12]*q[13])});65518===t&&65===q[0]&&100===q[1]&&111===q[2]&&98===q[3]&&101===q[4]&&(r={version:q[5]<<8|q[6],flags0:q[7]<<8|q[8],flags1:q[9]<<8|q[10],transformCode:q[11]});break;case 65499:t=v()+f-2;for(var x;f<t;){var J=D[f++],p=new Uint16Array(64);if(0===J>>4)for(q=
0;64>q;q++)x=K[q],p[x]=D[f++];else if(1===J>>4)for(q=0;64>q;q++)x=K[q],p[x]=v();else throw new Q("DQT - invalid table spec");u[J&15]=p}break;case 65472:case 65473:case 65474:if(h)throw new Q("Only single frame JPEGs supported");v();var h={};h.extended=65473===t;h.progressive=65474===t;h.precision=D[f++];h.scanLines=v();h.samplesPerLine=v();h.components=[];h.componentIds={};q=D[f++];for(t=p=J=0;t<q;t++){x=D[f];var m=D[f+1]>>4;var A=D[f+1]&15;J<m&&(J=m);p<A&&(p=A);m=h.components.push({h:m,v:A,quantizationId:D[f+
2],quantizationTable:null});h.componentIds[x]=m-1;f+=3}h.maxH=J;h.maxV=p;l(h);break;case 65476:x=v();for(t=2;t<x;){J=D[f++];p=new Uint8Array(16);for(q=m=0;16>q;q++,f++)m+=p[q]=D[f];A=new Uint8Array(m);for(q=0;q<m;q++,f++)A[q]=D[f];t+=17+m;(0===J>>4?E:I)[J&15]=P(p,A)}break;case 65501:v();var a=v();break;case 65498:v();x=D[f++];q=[];for(t=0;t<x;t++){J=h.componentIds[D[f++]];var d=h.components[J];J=D[f++];d.huffmanTableDC=E[J>>4];d.huffmanTableAC=I[J&15];q.push(d)}t=D[f++];x=D[f++];J=D[f++];t=L(D,f,
h,q,a,t,x,J>>4,J&15);f+=t;break;case 65535:255!==D[f]&&f--;break;default:if(255===D[f-3]&&192<=D[f-2]&&254>=D[f-2])f-=3;else throw new Q("unknown marker "+t.toString(16));}t=v()}this.width=h.samplesPerLine;this.height=h.scanLines;this.jfif=w;this.eof=f;this.adobe=r;this.components=[];for(t=0;t<h.components.length;t++){d=h.components[t];if(w=u[d.quantizationId])d.quantizationTable=w;this.components.push({output:M(h,d),scaleX:d.h/h.maxH,scaleY:d.v/h.maxV,blocksPerLine:d.blocksPerLine,blocksPerColumn:d.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(D,v){var b=this.width/D,l=this.height/v,f,w,r=0,u=this.components.length,I=D*v*u,E=new Uint8ClampedArray(I),t=new Uint32Array(D);for(w=0;w<u;w++){var q=this.components[w];var x=q.scaleX*b;var J=q.scaleY*l;r=w;var p=q.output;var h=q.blocksPerLine+1<<3;for(f=0;f<D;f++)q=0|f*x,t[f]=(q&4294967288)<<3|q&7;for(x=0;x<v;x++)for(q=0|x*J,q=h*(q&4294967288)|(q&7)<<3,f=0;f<D;f++)E[r]=p[q+t[f]],r+=u}if(v=this.decodeTransform)for(w=0;w<I;)for(D=q=0;q<u;q++,
w++,D+=2)E[w]=(E[w]*v[D]>>8)+v[D+1];return E},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(D){for(var v,b,l,f=0,w=D.length;f<w;f+=3)v=D[f],b=D[f+1],l=D[f+2],D[f]=v-179.456+1.402*l,D[f+1]=v+135.459-.344*b-.714*l,D[f+2]=v-226.816+1.772*b;return D},_convertYcckToRgb:function(D){for(var v,b,l,f,w=0,r=0,u=D.length;r<u;r+=4)v=D[r],b=D[r+1],l=D[r+2],f=D[r+3],D[w++]=
-122.67195406894+b*(-6.60635669420364E-5*b+4.37130475926232E-4*l-5.4080610064599E-5*v+4.8449797120281E-4*f-.154362151871126)+l*(-9.57964378445773E-4*l+8.17076911346625E-4*v-.00477271405408747*f+1.53380253221734)+v*(9.61250184130688E-4*v-.00266257332283933*f+.48357088451265)+f*(-3.36197177618394E-4*f+.484791561490776),D[w++]=107.268039397724+b*(2.19927104525741E-5*b-6.40992018297945E-4*l+6.59397001245577E-4*v+4.26105652938837E-4*f-.176491792462875)+l*(-7.78269941513683E-4*l+.00130872261408275*v+7.70482631801132E-4*
f-.151051492775562)+v*(.00126935368114843*v-.00265090189010898*f+.25802910206845)+f*(-3.18913117588328E-4*f-.213742400323665),D[w++]=-20.810012546947+b*(-5.70115196973677E-4*b-2.63409051004589E-5*l+.0020741088115012*v-.00288260236853442*f+.814272968359295)+l*(-1.53496057440975E-5*l-1.32689043961446E-4*v+5.60833691242812E-4*f-.195152027534049)+v*(.00174418132927582*v-.00255243321439347*f+.116935020465145)+f*(-3.43531996510555E-4*f+.24165260232407);return D},_convertYcckToCmyk:function(D){for(var v,
b,l,f=0,w=D.length;f<w;f+=4)v=D[f],b=D[f+1],l=D[f+2],D[f]=434.456-v-1.402*l,D[f+1]=119.541-v+.344*b+.714*l,D[f+2]=481.816-v-1.772*b;return D},_convertCmykToRgb:function(D){for(var v,b,l,f,w=0,r=1/255,u=0,I=D.length;u<I;u+=4)v=D[u]*r,b=D[u+1]*r,l=D[u+2]*r,f=D[u+3]*r,D[w++]=255+v*(-4.387332384609988*v+54.48615194189176*b+18.82290502165302*l+212.25662451639585*f-285.2331026137004)+b*(1.7149763477362134*b-5.6096736904047315*l-17.873870861415444*f-5.497006427196366)+l*(-2.5217340131683033*l-21.248923337353073*
f+17.5119270841813)-f*(21.86122147463605*f+189.48180835922747),D[w++]=255+v*(8.841041422036149*v+60.118027045597366*b+6.871425592049007*l+31.159100130055922*f-79.2970844816548)+b*(-15.310361306967817*b+17.575251261109482*l+131.35250912493976*f-190.9453302588951)+l*(4.444339102852739*l+9.8632861493405*f-24.86741582555878)-f*(20.737325471181034*f+187.80453709719578),D[w++]=255+v*(.8842522430003296*v+8.078677503112928*b+30.89978309703729*l-.23883238689178934*f-14.183576799673286)+b*(10.49593273432072*
b+63.02378494754052*l+50.606957656360734*f-112.23884253719248)+l*(.03296041114873217*l+115.60384449646641*f-193.58209356861505)-f*(22.33816807309886*f+180.12613974708367);return D},getData:function(D,v,b){if(4<this.numComponents)throw new Q("Unsupported color mode");D=this._getLinearizedBlockData(D,v);if(1===this.numComponents&&b){b=D.length;v=new Uint8ClampedArray(3*b);for(var l=0,f=0;f<b;f++){var w=D[f];v[l++]=w;v[l++]=w;v[l++]=w}return v}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(D);
if(4===this.numComponents){if(this._isColorConversionNeeded())return b?this._convertYcckToRgb(D):this._convertYcckToCmyk(D);if(b)return this._convertCmykToRgb(D)}return D}};return F}()})});S.Jpg=n})},"esri/chunks/LercCodec":function(){define(["exports"],function(S){function n(P){G[0]=P;return G[0]}const G=new Float32Array(1),Q=n(3.4028234663852886E38);var F=n(Math.max(-Q,Math.min(-Infinity,Q)));S.decode=function(P,L){L=L||{};var M=L.inputOffset||0;var W=L.encodedMaskData||null===L.encodedMaskData;
var K=new Uint8Array(P,M,10);K=String.fromCharCode.apply(null,K);if("CntZImage"!=K.trim())throw"Unexpected file identifier string: "+K;M+=10;var D=new DataView(P,M,24);var v=D.getInt32(0,!0);var b=D.getInt32(4,!0);var l=D.getUint32(8,!0);var f=D.getUint32(12,!0);var w=D.getFloat64(16,!0);M+=24;if(!W){D=new DataView(P,M,16);var r={};r.numBlocksY=D.getUint32(0,!0);r.numBlocksX=D.getUint32(4,!0);r.numBytes=D.getUint32(8,!0);r.maxValue=D.getFloat32(12,!0);M+=16;if(0<r.numBytes){W=new Uint8Array(Math.ceil(f*
l/8));D=new DataView(P,M,r.numBytes);var u=D.getInt16(0,!0);var I=2;var E=0;do{if(0<u)for(;u--;)W[E++]=D.getUint8(I++);else{var t=D.getUint8(I++);for(u=-u;u--;)W[E++]=t}u=D.getInt16(I,!0);I+=2}while(I<r.numBytes);if(-32768!==u||E<W.length)throw"Unexpected end of mask RLE encoding";r.bitset=W;M+=r.numBytes}else 0===(r.numBytes|r.numBlocksY|r.maxValue)&&(W=new Uint8Array(Math.ceil(f*l/8)),r.bitset=W)}D=new DataView(P,M,16);var q=W=t=E=I=u=void 0;u=D.getUint32(0,!0);I=D.getUint32(4,!0);E=D.getUint32(8,
!0);t=D.getFloat32(12,!0);M+=16;q=I;W=u;q+=0<f%q?1:0;var x=W+(0<l%W?1:0);W=Array(q*x);for(var J=1E9,p=0,h=0;h<x;h++)for(var m=0;m<q;m++){var A=0;D=new DataView(P,M,Math.min(10,P.byteLength-M));var a={};W[p++]=a;var d=D.getUint8(0);A++;a.encoding=d&63;if(3<a.encoding)throw"Invalid block encoding ("+a.encoding+")";if(2===a.encoding)M++,J=Math.min(J,0);else{if(0!==d&&2!==d){d>>=6;a.offsetType=d;if(2===d)a.offset=D.getInt8(1),A++;else if(1===d)a.offset=D.getInt16(1,!0),A+=2;else if(0===d)a.offset=D.getFloat32(1,
!0),A+=4;else throw"Invalid block offset type";J=Math.min(a.offset,J);if(1===a.encoding)if(d=D.getUint8(A),A++,a.bitsPerPixel=d&63,d>>=6,a.numValidPixelsType=d,2===d)a.numValidPixels=D.getUint8(A),A++;else if(1===d)a.numValidPixels=D.getUint16(A,!0),A+=2;else if(0===d)a.numValidPixels=D.getUint32(A,!0),A+=4;else throw"Invalid valid pixel count type";}M+=A;if(3!=a.encoding)if(0===a.encoding){D=(E-1)/4;if(D!==Math.floor(D))throw"uncompressed block has invalid length";A=new ArrayBuffer(4*D);d=new Uint8Array(A);
d.set(new Uint8Array(P,M,4*D));A=new Float32Array(A);for(d=0;d<A.length;d++)J=Math.min(J,A[d]);a.rawData=A;M+=4*D}else 1===a.encoding&&(D=Math.ceil(a.numValidPixels*a.bitsPerPixel/8),A=new ArrayBuffer(4*Math.ceil(D/4)),d=new Uint8Array(A),d.set(new Uint8Array(P,M,D)),a.stuffedData=new Uint32Array(A),M+=D)}}q=J;P=M;M=null!=L.noDataValue?n(Math.max(-Q,Math.min(L.noDataValue,Q))):F;x=L.encodedMaskData;d=L.returnMask;J=0;p=I;h=u;m=Math.floor(f/p);a=Math.floor(l/h);A=2*w;x=x||(r?r.bitset:null);var k;D=
new (L.pixelType||Float32Array)(f*l);d&&x&&(k=new Uint8Array(f*l));d=new Float32Array(m*a);for(var c,g,C=0;C<=h;C++){var z=C!==h?a:l%h;if(0!==z)for(var B=0;B<=p;B++){var H=B!==p?m:f%p;if(0!==H){var O=C*f*a+B*m,R=f-H,N=W[J],V;if(2>N.encoding){if(0===N.encoding)var Y=N.rawData;else{c=V=Y=void 0;g=N.stuffedData;var ba=N.bitsPerPixel,da=N.numValidPixels,ka=N.offset,ha=A,e=d,y=t,T=(1<<ba)-1,U=0,ca=0,ea=Math.ceil((y-ka)/ha);g[g.length-1]<<=8*(4*g.length-Math.ceil(ba*da/8));for(c=0;c<da;c++)0===ca&&(Y=g[U++],
ca=32),ca>=ba?(V=Y>>>ca-ba&T,ca-=ba):(ca=ba-ca,V=(Y&T)<<ca&T,Y=g[U++],ca=32-ca,V+=Y>>>ca),e[c]=V<ea?ka+V*ha:y;Y=d}V=0}else var ia=2===N.encoding?0:N.offset;if(x)for(g=0;g<z;g++){if(O&7){var la=x[O>>3];la<<=O&7}for(c=0;c<H;c++)O&7||(la=x[O>>3]),la&128?(k&&(k[O]=1),D[O++]=2>N.encoding?Y[V++]:ia):(k&&(k[O]=0),D[O++]=M),la<<=1;O+=R}else if(2>N.encoding)for(g=0;g<z;g++){for(c=0;c<H;c++)D[O++]=Y[V++];O+=R}else for(g=0;g<z;g++)if(D.fill)D.fill(ia,O,O+H),O+=H+R;else{for(c=0;c<H;c++)D[O++]=ia;O+=R}if(1===
N.encoding&&V!==N.numValidPixels)throw"Block and Mask do not match";J++}}}ia=k;k={width:f,height:l,pixelData:D,minValue:q,maxValue:t,noDataValue:M};ia&&(k.maskData=ia);L.returnEncodedMask&&r&&(k.encodedMaskData=r.bitset?r.bitset:null);if(L.returnFileInfo&&(k.fileInfo={fileIdentifierString:K,fileVersion:v,imageType:b,height:l,width:f,maxZError:w,eofOffset:P,mask:r?{numBlocksX:r.numBlocksX,numBlocksY:r.numBlocksY,numBytes:r.numBytes,maxValue:r.maxValue}:null,pixels:{numBlocksX:I,numBlocksY:u,numBytes:E,
maxValue:t,minValue:q,noDataValue:M}},L.computeUsedBitDepths)){L=k.fileInfo;r=I*u;K={};for(v=0;v<r;v++)b=W[v],0===b.encoding?K.float32=!0:1===b.encoding?K[b.bitsPerPixel]=!0:K[0]=!0;r=Object.keys(K);L.bitDepths=r}return k}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const S=function(n){let G=1;switch(n){case Uint8Array:case Int8Array:G=1;break;case Uint16Array:case Int16Array:G=2;break;case Uint32Array:case Int32Array:case Float32Array:G=4;break;case Float64Array:G=8}return G};
return function(){function n(){}n.decode=function(G,Q){var F=Q.pixelType;const P=[],L=Q.width*Q.height;var M=Math.floor(G.byteLength/(Q.width*Q.height*S(Q.pixelType)));const {bandIds:W,format:K}=Q;Q=W&&W.length||Math.floor(G.byteLength/(Q.width*Q.height*S(Q.pixelType)));var D=G.byteLength-G.byteLength%(L*S(F));const v=new F(G,0,L*M);let b,l;let f,w;if("bip"===K)for(b=0;b<Q;b++){f=new F(L);w=W?W[b]:b;for(l=0;l<L;l++)f[l]=v[l*M+w];P.push(f)}else if("bsq"===K)for(b=0;b<Q;b++)w=W?W[b]:b,P.push(v.subarray(w*
L,(w+1)*L));if(D<G.byteLength-1)if(G=G.slice(D),8*G.byteLength<L)var r=null;else{G=new Uint8Array(G,0,Math.ceil(L/8));F=new Uint8Array(L);for(Q=D=Q=r=M=0;Q<G.length-1;Q++)for(r=G[Q],D=7;0<=D;D--)F[M++]=r>>D&1;for(D=7;M<L-1;)r=G[G.length-1],F[M++]=r>>D&1,D--;r=F}return{pixels:P,mask:r}};return n}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(S){{var n=new ArrayBuffer(4);const G=new Uint8Array(n);(new Uint32Array(n))[0]=1;n=1===G[0]}S.isPlatformLittleEndian=n;
Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(S,n,G,Q,F,P,L){function M(p,h){let m="unknown";3===p?m="f32":1===p?1===h?m="u1":2===h?m="u2":4===h?m="u4":8>=h?m="u8":16>=h?m="u16":32>=h&&(m="u32"):2===p&&(8>=h?m="s8":16>=h?m="s16":32>=h&&(m="s32"));return m}function W(p){let h=null;switch(p?p.toLowerCase():
"f32"){case "u1":case "u2":case "u4":case "u8":h=Uint8Array;break;case "u16":h=Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;default:h=Float32Array}return h}function K(p,h){return{x:h[0]*p.x+h[1]*p.y+h[2],y:h[3]*p.x+h[4]*p.y+h[5]}}function D(p,h){return(p=p.get(h))&&p.values}function v(p,h){return(p=p.get(h))&&p.values[0]}function b(p,h,m,A=0,a=P.TIFF_TAGS,d=4){var k=8===d;const c=k?r(new DataView(p,m,8),0,
h):(new DataView(p,m,2)).getUint16(0,h),g=4+2*d;var C=k?8:2;k=C+c*g;if(m+k>p.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:k};const z=m+k+4<=p.byteLength?u(new DataView(p,m+k,8===d?8:4),0,h,8===d):null;m+=C;C=new Map;let B,H,O,R,N;for(let Y=0;Y<c;Y++){var V=new DataView(p,m+g*Y,g);B=V.getUint16(0,h);O=V.getUint16(2,h);H=P.getTagName(B,a);2===d?(R=V.getUint16(4,h),N=V.getUint16(6,h)):4===d?(R=V.getUint32(4,h),N=V.getUint32(8,h)):8===d&&(R=u(V,4,h,!0),N=u(V,12,h,!0));V={id:B,
type:O,valueCount:R,valueOffset:N,values:null};l(p,h,V,A,!1,d);C.set(H,V)}return{success:!0,ifd:C,nextIFD:z,requiredBufferSize:k}}function l(p,h,m,A=0,a=!1,d=4){if(m.values)return!0;var k=m.type,c=m.valueCount,g=m.valueOffset;let C=[];var z=t[k],B=8*z,H=c*z,O=c*t[k]*8;d=8===d?64:32;if(O>d&&H>(a?p.byteLength:p?p.byteLength-g+A:0))return m.offlineOffsetSize=[g,H],m.values=null,!1;if(O<=d)if(h||(g>>>=32-O),1===c)C=[g];else if(64===d)for(p=g>>>0,g=Math.round((g-p)/4294967296),h=p,z=32,p=1;p<=c;p++)H=
32-B*p%32,z<B?(H=h<<H>>>32-z,A=g<<32-z>>>32-z,h=g,C.push(H+A*Math.pow(2,B-z)),z-=32-(B-z)):(C.push(h<<H>>>32-B),z-=B),0===z&&(z=32,h=g);else for(p=1;p<=c;p++)C.push(g<<32-B*p>>>32-B);else for(g-=A,a&&(g=0),c=g;c<g+H;c+=z){switch(k){case 1:B=(new DataView(p,c,1)).getUint8(0);break;case 2:B=(new DataView(p,c,1)).getUint8(0);break;case 3:B=(new DataView(p,c,2)).getUint16(0,h);break;case 4:B=(new DataView(p,c,4)).getUint32(0,h);break;case 5:B=(new DataView(p,c,4)).getUint32(0,h)/(new DataView(p,c+4,4)).getUint32(0,
h);break;case 6:B=(new DataView(p,c,1)).getInt8(0);break;case 7:B=(new DataView(p,c,1)).getUint8(0);break;case 8:B=(new DataView(p,c,2)).getInt16(0,h);break;case 9:B=(new DataView(p,c,4)).getInt32(0,h);break;case 10:B=(new DataView(p,c,4)).getInt32(0,h)/(new DataView(p,c+4,4)).getInt32(0,h);break;case 11:B=(new DataView(p,c,4)).getFloat32(0,h);break;case 12:B=(new DataView(p,c,8)).getFloat64(0,h);break;case 16:case 18:B=r(new DataView(p,c,8),0,h);break;case 17:a=new DataView(p,c,8);A=(B=h)?a.getInt32(0,
B):a.getUint32(0,B);a=B?a.getUint32(4,B):a.getInt32(4,B);O=0<=(B?A:a)?1:-1;B?A*=O:a*=O;B=O*(B?4294967296*a+A:4294967296*A+a);break;default:B=null}C.push(B)}if(2===k){k="";g=C;C=[];for(p=0;p<g.length;p++)0===g[p]&&""!==k?(C.push(k),k=""):k+=String.fromCharCode(g[p]);""===k&&0!==C.length||C.push(k)}m.values=C;return!0}function f(p){var h=p[0];const m=v(h,"TILEWIDTH"),A=v(h,"TILELENGTH"),a=v(h,"IMAGEWIDTH"),d=v(h,"IMAGELENGTH");var k=v(h,"BITSPERSAMPLE");const c=v(h,"SAMPLESPERPIXEL");var g=v(h,"SAMPLEFORMAT")||
1;const C=M(g,k),z=D(h,"PLANARCONFIGURATION")?2===D(h,"PLANARCONFIGURATION")[0]:!1;var B=D(h,"GDAL_NODATA");let H;null!=B&&("string"===typeof B[0]?(H=B.map(ca=>parseFloat(ca)),H.some(ca=>isNaN(ca))&&(H=null)):"number"===typeof B[0]&&(H=B));var O=v(h,"COMPRESSION")||1;switch(O){case 1:B="NONE";break;case 2:case 3:case 4:case 32771:B="CCITT";break;case 5:B="LZW";break;case 6:case 7:B="JPEG";break;case 32773:B="PACKBITS";break;case 8:case 32946:B="DEFLATE";break;case 34712:B="JPEG2000";break;default:B=
String(O)}let R=!0,N="";1!==O&&5!==O&&6!==O&&8!==O&&32946!==O&&(R=!1,N+="unsupported tag compression "+O);3<g&&(R=!1,N+="unsupported tag sampleFormat "+g);0!==k%8&&(R=!1,N+="unsupported tag bitsPerSample "+k);k=v(h,"GEOASCIIPARAMS");if(k){var V=(V=k.split("|").filter(ca=>-1<ca.indexOf("ESRI PE String \x3d "))[0])?V.replace("ESRI PE String \x3d ",""):"";V=0===V.indexOf("PROJCS")||0===V.indexOf("GEOGCS")?{wkid:null,wkt:V}:null}k=D(h,"GEOTIEPOINTS");g=D(h,"GEOPIXELSCALE");O=D(h,"GEOTRANSMATRIX");var Y=
h.has("GEOKEYDIRECTORY")?h.get("GEOKEYDIRECTORY").data:null;h=!1;if(Y){h=2===v(Y,"GTRasterTypeGeoKey");var ba=v(Y,"GTModelTypeGeoKey");2===ba?(Y=v(Y,"GeographicTypeGeoKey"),1024<=Y&&32766>=Y&&(V={wkid:Y})):1===ba&&(Y=v(Y,"ProjectedCSTypeGeoKey"),1024<=Y&&32766>=Y&&(V={wkid:Y}))}if(g&&k&&6<=k.length){var da=[g[0],0,k[3]-k[0]*g[0],0,-Math.abs(g[1]),k[4]-k[1]*g[1]];h&&(da[2]-=.5*da[0]+.5*da[1],da[5]-=.5*da[3]+.5*da[4])}else O&&16===O.length&&(da=[O[0],O[1],O[3],O[4],O[5],O[7]]);if(da){var ka=[{x:0,y:d},
{x:0,y:0},{x:a,y:d},{x:a,y:0}];g=k=Number.POSITIVE_INFINITY;Y=O=Number.NEGATIVE_INFINITY;for(ba=0;ba<ka.length;ba++)h=K(ka[ba],da),k=h.x>k?k:h.x,O=h.x<O?O:h.x,g=h.y>g?g:h.y,Y=h.y<Y?Y:h.y;ka={xmin:k,xmax:O,ymin:g,ymax:Y,spatialReference:V}}da=p.filter(ca=>1===v(ca,"NEWSUBFILETYPE"));let ha,e,y,T;0<da.length&&(ha=Math.round(Math.log(a/v(da[0],"IMAGEWIDTH"))/Math.LN2),e=Math.round(Math.log(a/v(da[da.length-1],"IMAGEWIDTH"))/Math.LN2),y=v(da[da.length-1],"TILEWIDTH"),T=v(da[da.length-1],"TILEHEIGHT"));
y=0<e?y||m:null;T=0<e?T||A:null;let U;m&&(U=[{maxCol:Math.ceil(a/m)-1,maxRow:Math.ceil(d/A)-1,minRow:0,minCol:0}],da.forEach(ca=>{U.push({maxCol:Math.ceil(v(ca,"IMAGEWIDTH")/v(ca,"TILEWIDTH"))-1,maxRow:Math.ceil(v(ca,"IMAGELENGTH")/v(ca,"TILELENGTH"))-1,minRow:0,minCol:0})}));p=v(p[0],"GDAL_METADATA");p=J(p);return{width:a,height:d,tileWidth:m,tileHeight:A,planes:c,isBSQ:z,pixelType:C,compression:B,noData:H,isSupported:R,message:N,extent:ka,firstPyramidLevel:ha,maximumPyramidLevel:e,pyramidBlockWidth:y,
pyramidBlockHeight:T,tileBoundary:U,metadata:p}}function w(p){const {littleEndian:h,isBigTiff:m,firstIFD:A}=I(p);var a=A;const d=[];do if(a=E(p,h,a,0,P.TIFF_TAGS,m?8:4),a.success)d.push(a.ifd),a=a.nextIFD;else break;while(0<a);return{...f(d),littleEndian:h,isBigTiff:m,ifds:d}}function r(p,h,m){const A=p.getUint32(h,m);p=p.getUint32(h+4,m);return m?4294967296*p+A:4294967296*A+p}function u(p,h,m,A){return A?r(p,h,m):p.getUint32(h,m)}function I(p){var h=new DataView(p,0,16),m=h.getUint16(0,!1);p=null;
if(18761===m)p=!0;else if(19789===m)p=!1;else throw"unexpected endianess byte";var A=h.getUint16(2,p);if(42!==A&&43!==A)throw"unexpected tiff identifier";m=4;if(A=43===A){const a=h.getUint16(m,p);m+=2;if(8!==a)throw"unsupported bigtiff version";if(0!==h.getUint16(m,p))throw"unsupported bigtiff version";m+=2}h=u(h,m,p,A);return{littleEndian:p,isBigTiff:A,firstIFD:h}}function E(p,h,m,A=0,a=P.TIFF_TAGS,d=4){m=b(p,h,m,A,a,d);let k;const c=m.ifd;c&&(P.ifdTags.forEach((g,C)=>{c.has(C)&&(k=c.get(C),k.data=
b(p,h,k.valueOffset-A,A,g).ifd)}),c.has("GEOKEYDIRECTORY")&&(k=c.get("GEOKEYDIRECTORY"),(a=k.values)&&4<a.length&&(a=a[0]+"."+a[1]+"."+a[2],k.data=b(p,h,k.valueOffset+6-A,A,P.GEO_KEYS,2).ifd,k.data&&k.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]}))),c.has("XMP")&&(k=c.get("XMP"),a=k.values,"number"===typeof a[0]&&7===k.type&&(k.values=[Q.bytesToUTF8(new Uint8Array(a))])));return m}const t=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],q=function(p,h,m,A,a){var d=L.isPlatformLittleEndian===
h,k=v(m,"BITSPERSAMPLE"),c=v(m,"SAMPLEFORMAT")||1;k=M(c,k);c=v(m,"COMPRESSION")||1;m=W(k);if(1===c){var g=p.slice(A,A+a);var C=new Uint8Array(g)}else 8===c||32946===c?(C=new Uint8Array(p,A,a),C=new n.Zlib(C),p=C.getBytes(),g=new ArrayBuffer(p.length),C=new Uint8Array(g),C.set(p)):6===c?(C=new Uint8Array(p,A,a),g=new G.Jpg,g.parse(C),p=g.getData(g.width,g.height,!0),g=new ArrayBuffer(p.length),C=new Uint8Array(g),C.set(p)):5===c&&(C=F.decode(p,A,a,h),g=C.buffer);if("u8"!==k&&"s8"!==k&&!d)switch(g=
new ArrayBuffer(C.length),d=new Uint8Array(g),k){case "u16":case "s16":for(k=0;k<C.length;k+=2)d[k]=C[k+1],d[k+1]=C[k];break;case "u32":case "s32":case "f32":for(k=0;k<C.length;k+=4)d[k]=C[k+3],d[k+1]=C[k+2],d[k+2]=C[k+1],d[k+3]=C[k]}return new m(g)},x=function(p,h,m){if(!(p&&0<p.length&&h&&m))return null;let A,a,d;const k=p[0].length,c=p.length,g=new Uint8Array(k);for(let z=0;z<c;z++)if(A=p[z],a=h[z],d=m[z],0===z)for(var C=0;C<k;C++)g[C]=A[C]<a||A[C]>d?0:1;else for(C=0;C<k;C++)g[C]&&(g[C]=A[C]<a||
A[C]>d?0:1);return g},J=function(p){if(!p)return null;var h=p.match(/<Item(.*?)Item>/gi);if(!h||0===h.length)return null;p=new Map;var m;for(var A=0;A<h.length;A++){var a=h[A];var d=a.slice(6,a.indexOf("\x3e"));var k=a.indexOf("sample\x3d");-1<k&&(m=a.slice(k+8,a.indexOf('"',k+8)));k=a.indexOf("name\x3d");-1<k&&(d=a.slice(k+6,a.indexOf('"',k+6)));d&&(a=a.slice(a.indexOf("\x3e")+1,a.indexOf("\x3c/Item\x3e")).trim(),null!=m?p.has(d)?p.get(d)[m]=a:p.set(d,[a]):p.set(d,a));m=null}h=p.get("STATISTICS_MINIMUM");
d=p.get("STATISTICS_MAXIMUM");A=p.get("STATISTICS_MEAN");a=p.get("STATISTICS_STDDEV");m=null;if(h&&d)for(m=[],k=0;k<h.length;k++)m.push({min:parseFloat(h[k]),max:parseFloat(d[k]),avg:A&&parseFloat(A[k]),stddev:a&&parseFloat(a[k])});d=p.get("BandName");A=p.get("WavelengthMin");a=p.get("WavelengthMax");h=null;if(d)for(h=[],k=0;k<d.length;k++)h.push({BandName:d[k],WavelengthMin:A&&parseFloat(A[k]),WavelengthMax:a&&parseFloat(a[k])});d=p.get("DataType");return{statistics:m,bandProperties:h,dataType:d,
rawMetadata:p}};S.decode=function(p,h){h=h||w(p);const {ifds:m,noData:A}=h;if(0===m.length)throw"no valid image file directory";var a=m[0];const d=A?A[0]:null;if(h.tileWidth){var k=D(a,"TILEOFFSETS");if(void 0===k)a=null;else{var c=D(a,"TILEBYTECOUNTS"),g=h.tileWidth,C=h.tileHeight,{width:z,height:B,pixelType:H,isBSQ:O}=h,R=h.planes,N=z*B,V=D(a,"BITSPERSAMPLE")[0],Y=W(H),ba=[];for(var da=0;da<R;da++)ba.push(new Y(N));var ka,ha;N=Math.ceil(z/g);if(0===V%8)for(V=0;V<k.length;V++){var e=Math.floor(V/
N)*C;var y=V%N*g;da=e*z+y;Y=q(p,h.littleEndian,a,k[V],c[V]);var T=0;var U=da;y=Math.min(g,z-y);var ca=Math.min(C,B-e);for(e=0;e<R;e++){var ea=ba[e];if(O)for(ka=0;ka<ca;ka++)for(U=da+ka*z,T=g*C*e+ka*g,ha=0;ha<y;ha++,U++,T++)ea[U]=Y[T];else for(ka=0;ka<ca;ka++)for(U=da+ka*z,T=ka*g*R+e,ha=0;ha<y;ha++,U++,T+=R)ea[U]=Y[T]}}a={width:z,height:B,pixelType:H,pixels:ba}}}else if(k=L.isPlatformLittleEndian===h.littleEndian,N=D(a,"STRIPOFFSETS"),void 0===N)a=null;else{var {width:ia,height:la,pixelType:ja}=h;
h=h.planes;c=ia*la;V=D(a,"BITSPERSAMPLE")[0];g=W(ja);C=new g(c*h);Y=D(a,"STRIPBYTECOUNTS");da=D(a,"ROWSPERSTRIP")[0];T=D(a,"COMPRESSION")?D(a,"COMPRESSION")[0]:1;e=da;if(0===V%8)for(a=0;a<N.length;a++){y=a*da*ia*h;e=(a+1)*da>la?la-a*da:da;if("u8"===ja||"s8"===ja||k)8===T||32946===T?(ba=new Uint8Array(p,N[a],Y[a]),ba=new n.Zlib(ba),ka=ba.getBytes(),U=new ArrayBuffer(ka.length),ba=new Uint8Array(U),ba.set(ka),ba.length!==e*ia*h*V/8&&console.log("strip byte counts is different than expected")):6===T?
(ba=new Uint8Array(p,N[a],Y[a]),U=new G.Jpg,U.parse(ba),e=U.getData(U.width,U.height,!0),U=new ArrayBuffer(e.length),ba=new Uint8Array(U),ba.set(e)):1===T&&(Y[a]!==e*ia*h*V/8&&console.log("strip byte counts is different than expected"),U=p.slice(N[a],N[a]+Y[a]));else switch(6===T||8===T||32946===T?(ba=new Uint8Array(p,N[a],Y[a]),ba=new n.Zlib(ba),ba=ba.getBytes(),U=new ArrayBuffer(ba.length),R=new Uint8Array(U),ba.length!==e*ia*h*V/8&&console.log("strip byte counts is different than expected")):1===
T&&(Y[a]!==e*ia*h*V/8&&console.log("strip byte counts is different than expected"),U=new ArrayBuffer(Y[a]),ba=new Uint8Array(p,N[a],Y[a]),R=new Uint8Array(U)),ja){case "u16":case "s16":for(e=0;e<ba.length;e+=2)R[e]=ba[e+1],R[e+1]=ba[e];break;case "u32":case "s32":case "f32":for(e=0;e<ba.length;e+=4)R[e]=ba[e+3],R[e+1]=ba[e+2],R[e+2]=ba[e+1],R[e+3]=ba[e]}e=new g(U);C.set(e,y)}ba=[];if(1===h)ba.push(C);else for(a=0;a<h;a++){R=new g(c);for(p=0;p<c;p++)R[p]=C[p*h+a];ba.push(R)}a={width:ia,height:la,pixelType:ja,
pixels:ba}}if(null!==d){a.mask=new Uint8Array(a.width*a.height);if(1E24<Math.abs(d))for(p=0;p<a.width*a.height;p++)a.mask[p]=1E-6>Math.abs((a.pixels[0][p]-d)/d)?0:1;else for(p=0;p<a.width*a.height;p++)a.mask[p]=a.pixels[0][p]===d?0:1;a.noDataValue=d}return a};S.decodeTileOrStrip=function(p,h){const {headerInfo:m,ifd:A}=h;var a=q(p,m.littleEndian,A,h.offset||0,h.size||p.byteLength);const {pixelType:d,isBSQ:k,planes:c}=m;var g=W(d);p=a.length/c;const C=[];for(var z=0;z<c;z++){var B=new g(p);if(k)B=
a.slice(p*z,p*(z+1));else for(var H=0;H<p;H++)B[H]=a[H*c+z];C.push(B)}a=v(A,"TILEWIDTH");g=v(A,"TILELENGTH");B=m.noData?m.noData[0]:null;z=(H=m.metadata?m.metadata.statistics:null)?H.map(R=>R.min):null;H=H?H.map(R=>R.max):null;let O;if(null!=B)if(O=new Uint8Array(p),1E24<Math.abs(B))for(h=0;h<p;h++)O[h]=1E-6>Math.abs((C[0][h]-B)/B)?0:1;else for(h=0;h<p;h++)O[h]=C[0][h]===B?0:1;else z&&H&&h.applyMinMaxConstraint&&(O=x(C,z,H));return{pixelType:d,width:a,height:g,pixels:C,mask:O,noDataValue:B}};S.getImageInfo=
f;S.parseFieldValues=l;S.parseHeader=w;S.parseIFD=E;S.parseSignature=I;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(S){S.bytesToUTF8=function(n,G){let Q=0,F="",P=0,L=0;const M=n.length;for(;Q<M;)if(L=n[Q++],P=L>>4,8>P?P=1:15===P?(P=4,L=(L&7)<<18|(n[Q++]&63)<<12|(n[Q++]&63)<<6|n[Q++]&63):14===P?(P=3,L=(L&15)<<12|(n[Q++]&63)<<6|n[Q++]&63):(P=2,L=(L&31)<<6|n[Q++]&63),0!==L||G)F+=String.fromCharCode(L);
return F};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(S){function n(P,L,M,W=!0){if(0!==L%4||0!==M%4){var K=new ArrayBuffer(4*Math.ceil(M/4));K=new Uint8Array(K);P=new Uint8Array(P,L,M);if(W)for(W=0;W<K.length;W+=4)K[W]=P[W+3],K[W+1]=P[W+2],K[W+2]=P[W+1],K[W+3]=P[W];else K.set(P);return new Uint32Array(K.buffer)}if(W){W=new Uint8Array(P,L,M);K=new Uint8Array(W.length);for(P=0;P<K.length;P+=4)K[P]=W[P+3],K[P+1]=W[P+
2],K[P+2]=W[P+1],K[P+3]=W[P];return new Uint32Array(K.buffer)}return new Uint32Array(P,L,M/4)}function G(){const P=[];for(let L=0;257>=L;L++)P[L]=[L];return P}function Q(P,L){for(let M=0;M<L.length;M++)P.push(L[M])}const F=new Set;F.add(511);F.add(1023);F.add(2047);F.add(4095);F.add(8191);S.decode=function(P,L,M,W=!0){P=n(P,L,M,W);L=9;W=G();let K=32,D=W.length,v=[],b=1,l=P[0],f=0;const w=P.length;M=8*(4*w-M);const r=[];for(;null!=l;){if(K>=L)K-=L,f=l>>>32-L,l<<=L;else{f=l>>>32-K;l=P[b++];var u=L-
K;K=32-u;f=(f<<u)+(l>>>K);l<<=u}if(257===f)break;if(256===f)L=9,W=G(),D=W.length,v=[];else{u=W[f];if(null==u){if(f>W.length)throw"data integrity issue: code does not exist on code page";v.push(v[0]);W[D++]=v.slice();Q(r,v)}else Q(r,u),v.push(u[0]),1<v.length&&(W[D++]=v.slice()),v=u.slice();F.has(D)&&L++;0===K&&(l=P[b++],K=32);if(b>w||b===w&&K<=M)break}}return new Uint8Array(r)};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const S=
(()=>{const F=[];F[254]="NEWSUBFILETYPE";F[255]="SUBFILETYPE";F[256]="IMAGEWIDTH";F[257]="IMAGELENGTH";F[258]="BITSPERSAMPLE";F[259]="COMPRESSION";F[262]="PHOTOMETRICINTERPRETATION";F[263]="THRESHHOLDING";F[264]="CELLWIDTH";F[265]="CELLLENGTH";F[266]="FILLORDER";F[269]="DOCUMENTNAME";F[270]="IMAGEDESCRIPTION";F[271]="MAKE";F[272]="MODEL";F[273]="STRIPOFFSETS";F[274]="ORIENTATION";F[277]="SAMPLESPERPIXEL";F[278]="ROWSPERSTRIP";F[279]="STRIPBYTECOUNTS";F[280]="MINSAMPLEVALUE";F[281]="MAXSAMPLEVALUE";
F[282]="XRESOLUTION";F[283]="YRESOLUTION";F[284]="PLANARCONFIGURATION";F[285]="PAGENAME";F[286]="XPOSITION";F[287]="YPOSITION";F[288]="FREEOFFSETS";F[289]="FREEBYTECOUNTS";F[290]="GRAYRESPONSEUNIT";F[291]="GRAYRESPONSECURVE";F[292]="T4OPTIONS";F[293]="T6OPTIONS";F[296]="RESOLUTIONUNIT";F[297]="PAGENUMBER";F[300]="COLORRESPONSEUNIT";F[301]="TRANSFERFUNCTION";F[305]="SOFTWARE";F[306]="DATETIME";F[315]="ARTIST";F[316]="HOSTCOMPUTER";F[317]="PREDICTOR";F[318]="WHITEPOINT";F[319]="PRIMARYCHROMATICITIES";
F[320]="COLORMAP";F[321]="HALFTONEHINTS";F[322]="TILEWIDTH";F[323]="TILELENGTH";F[324]="TILEOFFSETS";F[325]="TILEBYTECOUNTS";F[326]="BADFAXLINES";F[327]="CLEANFAXDATA";F[328]="CONSECUTIVEBADFAXLINES";F[330]="SUBIFD";F[332]="INKSET";F[333]="INKNAMES";F[334]="NUMBEROFINKS";F[336]="DOTRANGE";F[337]="TARGETPRINTER";F[338]="EXTRASAMPLES";F[339]="SAMPLEFORMAT";F[340]="SMINSAMPLEVALUE";F[341]="SMAXSAMPLEVALUE";F[342]="TRANSFERRANGE";F[347]="JPEGTABLES";F[512]="JPEGPROC";F[513]="JPEGIFOFFSET";F[514]="JPEGIFBYTECOUNT";
F[515]="JPEGRESTARTINTERVAL";F[517]="JPEGLOSSLESSPREDICTORS";F[518]="JPEGPOINTTRANSFORM";F[519]="JPEGQTABLES";F[520]="JPEGDCTABLES";F[521]="JPEGACTABLES";F[529]="YCBCRCOEFFICIENTS";F[530]="YCBCRSUBSAMPLING";F[531]="YCBCRPOSITIONING";F[532]="REFERENCEBLACKWHITE";F[700]="XMP";F[33550]="GEOPIXELSCALE";F[33922]="GEOTIEPOINTS";F[33432]="COPYRIGHT";F[42112]="GDAL_METADATA";F[42113]="GDAL_NODATA";F[50844]="RPCCOEFFICIENT";F[34264]="GEOTRANSMATRIX";F[34735]="GEOKEYDIRECTORY";F[34736]="GEODOUBLEPARAMS";F[34737]=
"GEOASCIIPARAMS";F[34665]="EXIFIFD";F[34853]="GPSIFD";F[40965]="INTEROPERABILITYIFD";return F})(),n=(()=>{const F=[].concat(S);F[36864]="ExifVersion";F[40960]="FlashpixVersion";F[40961]="ColorSpace";F[42240]="Gamma";F[37121]="ComponentsConfiguration";F[37122]="CompressedBitsPerPixel";F[40962]="PixelXDimension";F[40963]="PixelYDimension";F[37500]="MakerNote";F[37510]="UserComment";F[40964]="RelatedSoundFile";F[36867]="DateTimeOriginal";F[36868]="DateTimeDigitized";F[36880]="OffsetTime";F[36881]="OffsetTimeOriginal";
F[36882]="OffsetTimeDigitized";F[37520]="SubSecTime";F[37521]="SubSecTimeOriginal";F[37522]="SubSecTimeDigitized";F[37888]="Temperature";F[37889]="Humidity";F[37890]="Pressure";F[37891]="WaterDepth";F[37892]="Acceleration";F[37893]="CameraElevationAngle";F[42016]="ImageUniqueID";F[42032]="CameraOwnerName";F[42033]="BodySerialNumber";F[42034]="LensSpecification";F[42035]="LensMake";F[42036]="LensModel";F[42037]="LensSerialNumber";F[33434]="ExposureTime";F[33437]="FNumber";F[34850]="ExposureProgram";
F[34852]="SpectralSensitivity";F[34855]="PhotographicSensitivity";F[34856]="OECF";F[34864]="SensitivityType";F[34865]="StandardOutputSensitivity";F[34866]="RecommendedExposureIndex";F[34867]="ISOSpeed";F[34868]="ISOSpeedLatitudeyyy";F[34869]="ISOSpeedLatitudezzz";F[37377]="ShutterSpeedValue";F[37378]="ApertureValue";F[37379]="BrightnessValue";F[37380]="ExposureBiasValue";F[37381]="MaxApertureValue";F[37382]="SubjectDistance";F[37383]="MeteringMode";F[37384]="LightSource";F[37385]="Flash";F[37386]=
"FocalLength";F[37396]="SubjectArea";F[41483]="FlashEnergy";F[41484]="SpatialFrequencyResponse";F[41486]="FocalPlaneXResolution";F[41487]="FocalPlaneYResolution";F[41488]="FocalPlaneResolutionUnit";F[41492]="SubjectLocation";F[41493]="ExposureIndex";F[41495]="SensingMethod";F[41728]="FileSource";F[41729]="SceneType";F[41730]="CFAPattern";F[41985]="CustomRendered";F[41986]="ExposureMode";F[41987]="WhiteBalance";F[41988]="DigitalZoomRatio";F[41989]="FocalLengthIn35mmFilm";F[41990]="SceneCaptureType";
F[41991]="GainControl";F[41992]="Contrast";F[41993]="Saturation";F[41994]="Sharpness";F[41995]="DeviceSettingDescription";F[41996]="SubjectDistanceRange";return F})(),G=(()=>{const F=[];F[1024]="GTModelTypeGeoKey";F[1025]="GTRasterTypeGeoKey";F[1026]="GTCitationGeoKey";F[2048]="GeographicTypeGeoKey";F[2049]="GeogCitationGeoKey";F[2050]="GeogGeodeticDatumGeoKey";F[2051]="GeogPrimeMeridianGeoKey";F[2052]="GeogLinearUnitsGeoKey";F[2053]="GeogLinearUnitSizeGeoKey";F[2054]="GeogAngularUnitsGeoKey";F[2055]=
"GeogAngularUnitSizeGeoKey";F[2056]="GeogEllipsoidGeoKey";F[2057]="GeogSemiMajorAxisGeoKey";F[2058]="GeogSemiMinorAxisGeoKey";F[2059]="GeogInvFlatteningGeoKey";F[2061]="GeogPrimeMeridianLongGeoKey";F[2060]="GeogAzimuthUnitsGeoKey";F[3072]="ProjectedCSTypeGeoKey";F[3073]="PCSCitationGeoKey";F[3074]="ProjectionGeoKey";F[3075]="ProjCoordTransGeoKey";F[3076]="ProjLinearUnitsGeoKey";F[3077]="ProjLinearUnitSizeGeoKey";F[3078]="ProjStdParallel1GeoKey";F[3079]="ProjStdParallel2GeoKey";F[3080]="ProjNatOriginLongGeoKey";
F[3081]="ProjNatOriginLatGeoKey";F[3082]="ProjFalseEastingGeoKey";F[3083]="ProjFalseNorthingGeoKey";F[3084]="ProjFalseOriginLongGeoKey";F[3085]="ProjFalseOriginLatGeoKey";F[3086]="ProjFalseOriginEastingGeoKey";F[3087]="ProjFalseOriginNorthingGeoKey";F[3088]="ProjCenterLongGeoKey";F[3090]="ProjCenterEastingGeoKey";F[3091]="ProjCenterNorthingGeoKey";F[3092]="ProjScaleAtNatOriginGeoKey";F[3093]="ProjScaleAtCenterGeoKey";F[3094]="ProjAzimuthAngleGeoKey";F[3095]="ProjStraightVertPoleLongGeoKey";F[4096]=
"VerticalCSTypeGeoKey";F[4097]="VerticalCitationGeoKey";F[4098]="VerticalDatumGeoKey";F[4099]="VerticalUnitsGeoKey";return F})(),Q=new Map;Q.set("EXIFIFD",n);Q.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:S,ifdTags:Q,GEO_KEYS:G,getTagName:function(F,P){P=(P||S)[F];void 0===P&&(P="unknown"+String(F));return P}}})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../core/unitUtils ../../../geometry/projection".split(" "),function(S,n,G,Q,F,P,L,M,W){function K(f,w,
r,u=null){if(f.spatialReference.equals(w))return f;const I=l(f.spatialReference,w);if(I&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");r=r.center;f=new P({xmin:r.x-f.x/2,xmax:r.x+f.x/2,ymin:r.y-f.y/2,ymax:r.y+f.y/2,spatialReference:f.spatialReference});w=I?W.project(f,w,u):Q.project(f,w);return null==w?null:{x:w.xmax-w.xmin,y:w.ymax-w.ymin}}function D(f,w=.01){return M.getMetersPerUnitForSR(f)?w/M.getMetersPerUnitForSR(f):0}function v(f,w,
r=null,u=!0){const I=f.spatialReference;if(I.equals(w))return f;const E=l(I,w);if(E&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");if((r=E?W.project(f,w,r):Q.project(f,w))&&u&&w.isGeographic){var t,q;const [x,J]=I.isWebMercator?G.getInfo(I).origin:null!=(t=null==(q=G.getInfo(I))?void 0:q.valid)?t:[];(w=D(I))&&null!=x&&null!=J&&(Math.abs(f.x-x)<w&&5E-4>Math.abs(180-r.x)?r.x-=360:Math.abs(f.x-J)<w&&5E-4>Math.abs(180+r.x)&&(r.x+=360))}return r}
function b(f,w,r=null,u=!0){var I,E,t,q;const x=f.spatialReference;if(x.equals(w))return f;var J=l(x,w);if(J&&!W.isLoaded())throw new n("rasterprojectionhelper-projectExtent","projection engine is not loaded");J=J?W.project(f,w,r):Q.project(f,w);let [p,h]=null!=(I=null==(E=G.getInfo(x))?void 0:E.origin)?I:[];J&&u&&x.isWebMercator&&w.isGeographic&&null!=p&&null!=h&&(.001>Math.abs(f.xmin-p)&&1E3<Math.abs(h-f.xmax)&&5E-4>Math.abs(180-J.xmax)&&(J.xmin=-180,u=[],u.push(new F(f.xmax,f.ymin,x)),u.push(new F(f.xmax,
(f.ymin+f.ymax)/2,x)),u.push(new F(f.xmax,f.ymax,x)),u=u.map(m=>v(m,w,r)).filter(m=>!isNaN(null==m?void 0:m.x)).map(m=>m.x),J.xmax=Math.max.apply(null,u)),.001>Math.abs(f.xmax-h)&&1E3<Math.abs(p-f.xmin)&&5E-4>Math.abs(180+J.xmin)&&(J.xmax=180,u=[],u.push(new F(f.xmin,f.ymin,x)),u.push(new F(f.xmin,(f.ymin+f.ymax)/2,x)),u.push(new F(f.xmin,f.ymax,x)),f=u.map(m=>v(m,w,r)).filter(m=>!isNaN(null==m?void 0:m.x)).map(m=>m.x),J.xmin=Math.min.apply(null,f)));[p,h]=w.isWebMercator?G.getInfo(w).origin:null!=
(t=null==(q=G.getInfo(w))?void 0:q.valid)?t:[];(t=D(w))&&null!=p&&null!=h&&(Math.abs(J.xmin-p)<t&&(J.xmin=p),Math.abs(J.xmax-h)<t&&(J.xmax=h));return J}const l=function(f,w){const r=(f.isWGS84||f.isWebMercator)&&(w.isWGS84||w.isWebMercator);return!(f.equals(w)||r)};S.computeProjectedScales=function(f,w,r=512,u=!0){const {extent:I,spatialReference:E,pixelSize:t}=f,q=K(new F({x:t.x,y:t.y,spatialReference:E}),w,I);if(null==q)return{projectedPixelSize:null,scales:null,srcResolutions:null};var x=(q.x+
q.y)/2,J=M.getMetersPerUnitForSR(w);x=x*J*96*39.37;r=w.isGeographic?512/r*2.958287637958547E8:512/r*5.91657527591555E8;let p=!1;u&&(w.isGeographic||w.isWebMercator)&&(u=b(I,w),p=0>u.xmin*u.xmax);u=x;if(p)u=r,f=u/(96*J*39.37),w=K(new F({x:f,y:f,spatialReference:w}),E,I);else{w={x:t.x,y:t.y};f=Math.ceil(Math.log(Math.min(f.width,f.height)/32)/Math.LN2);for(J=0;u<.5005*r&&J<f;)J++,u*=2,w.x*=2,w.y*=2;1.001>=Math.max(u,r)/Math.min(u,r)&&(u=r)}f=[];r=[];for(x=Math.min(70.5310735,x)/1.001;u>=x;)f.push(u),
r.push({x:w.x,y:w.y}),u/=2,w.x/=2,w.y/=2;return{projectedPixelSize:q,scales:f,srcResolutions:r}};S.defaultGridSpacing=32;S.getProjectionOffsetGrid=function(f,w,r,u=null,I=null,E=!1,t=[32,32]){var q,x;if(l(f.spatialReference,w.spatialReference)&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(f&&w&&r))return null;const {xmin:J,ymin:p,xmax:h,ymax:m}=f;var A=f.spatialReference,a=w.spatialReference;const [d,k]=null!=(q=null==(x=G.getInfo(A))?
void 0:x.valid)?q:[];var c=t[0]*r.x,g=t[1]*r.y;r=Math.ceil((h-J)/c-.1)+1;q=Math.ceil((m-p)/g-.1)+1;x=[];f=!1;for(var C=0;C<r;C++){var z=[];for(var B=0;B<q;B++){var H=new F({x:J+c*C,y:m-g*B,spatialReference:A});H=v(H,a,u);I&&(H=I.inverseTransform(H));z.push(H);0<C&&E&&H&&O[B]&&null!=d&&H.x<O[B].x&&(H.x+=k-d);H?(x.push((H.x-w.xmin)/(w.xmax-w.xmin)),x.push((w.ymax-H.y)/(w.ymax-w.ymin))):(x.push(NaN),x.push(NaN),f=!0)}var O=z}w=[Math.abs((x[0]+x[4]+x[4*r]+x[4*r+4])/4-x[2*q+2]),Math.abs((x[1]+x[5]+x[4*
q+1]+x[4*q+5])/4-x[2*q+3])];u=new Float32Array((r-1)*(q-1)*12);I=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);E=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(O=0;O<r-1;O++){for(A=0;A<q-1;A++){B=O*q*2+2*A;g=x[B];a=x[B+1];var R=x[B+2],N=x[B+3];B+=2*q;C=x[B];c=x[B+1];z=x[B+2];B=x[B+3];H=0;let V=12*(A*(r-1)+O);for(let Y=0;3>Y;Y++)u[V++]=I[H++]*g+I[H++]*R+I[H++]*z;H=0;for(R=0;3>R;R++)u[V++]=I[H++]*a+I[H++]*N+I[H++]*B;H=0;for(N=0;3>N;N++)u[V++]=E[H++]*g+E[H++]*C+E[H++]*z;H=0;for(g=0;3>g;g++)u[V++]=E[H++]*
a+E[H++]*c+E[H++]*B}if(f)for(A=0;A<u.length;A++)isNaN(u[A])&&(u[A]=-1)}return{offsets:x,error:w,coefficients:u,spacing:t,size:[r-1,q-1]}};S.load=async function(){if(W.isLoaded()||!W.isSupported())return null;await W.load()};S.projectExtent=b;S.projectPoint=v;S.projectResolution=K;S.snapPyramid=function(f,w,r){var u=Math.log(f.x/w.pixelSize.x)/Math.LN2;const I=Math.log(f.y/w.pixelSize.y)/Math.LN2;f=w.storageInfo.maximumPyramidLevel||0;r="down"===r?Math.floor(Math.min(u,I)):"up"===r?Math.ceil(Math.max(u,
I)):Math.round((u+I)/2);u=!1;0>r?r=0:r>f&&(u=r>f+3,r=f);f=Math.pow(2,r);w=new F({x:f*w.nativePixelSize.x,y:f*w.nativePixelSize.y,spatialReference:w.spatialReference});return{pyramidLevel:r,pyramidResolution:w,excessiveReading:u}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x){function J(){return!!Da&&E.isLoaded()}function p(X){Q.isNone(Aa)&&(Aa=P.all([E.load(),(new Promise(function(Z,aa){S(["../chunks/geometryEngineBase"],Z,aa)})).then(function(Z){return Z.geometryEngineBase}),new Promise(function(Z,aa){S(["./geometryAdapters/hydrated"],Z,aa)})]));return Aa.then(([,Z,{hydratedAdapter:aa}])=>{P.throwIfAborted(X);ya=aa;Da=Z.default;Da._enableProjection(E.pe)})}function h(X,Z,aa,fa,pa=null){if(Q.isNone(aa)||Q.isNone(fa))return Z;
if(A(aa,fa,pa))return Z.map(sa=>a(sa,aa,fa));if(Q.isNone(pa)){const sa=x.cacheKey(aa,fa);void 0!==Ba[sa]?pa=Ba[sa]:(pa=m(aa,fa,null),Q.isNone(pa)&&(pa=new x),Ba[sa]=pa)}if(Q.isNone(Da))throw new Ca;return Da._project(X,Z,aa,fa,pa)}function m(X,Z,aa=null){if(Q.isNone(Da))throw new Ca;if(Q.isNone(X)||Q.isNone(Z))return null;X=Da._getTransformation(ya,X,Z,aa,null==aa?void 0:aa.spatialReference);return null!==X?x.fromGE(X):null}function A(X,Z,aa){return aa?!1:L.equals(X,Z)?!0:L.isValid(X)&&L.isValid(Z)&&
!!ua(X,Z,Ma)}function a(X,Z,aa){if(!X)return X;if("x"in X){var fa=new W;return d(X,Z,fa,aa)?fa:null}return"xmin"in X?(fa=new K,C(X,Z,fa,aa)?fa:null):"rings"in X?(fa=new v,g(X,Z,fa,aa)?fa:null):"paths"in X?(fa=new b,c(X,Z,fa,aa)?fa:null):"points"in X?(fa=new D,k(X,Z,fa,aa)?fa:null):null}function d(X,Z,aa,fa,pa=0){Ea[0]=X.x;Ea[1]=X.y;const sa=X.z;Ea[2]=void 0!==sa?sa:pa;if(!O(Ea,Z,0,Ea,fa,0,1))return!1;aa.x=Ea[0];aa.y=Ea[1];aa.spatialReference=fa;void 0===sa?(aa.z=void 0,aa.hasZ=!1):(aa.z=Ea[2],aa.hasZ=
!0);void 0===X.m?(aa.m=void 0,aa.hasM=!1):(aa.m=X.m,aa.hasM=!0);return!0}function k(X,Z,aa,fa,pa=0){const {points:sa,hasZ:xa,hasM:za}=X;X=[];const Ia=sa.length,Ha=[];for(var Ga of sa)Ha.push(Ga[0],Ga[1],xa?Ga[2]:pa);if(!O(Ha,Z,0,Ha,fa,0,Ia))return!1;for(Z=0;Z<Ia;++Z){pa=3*Z;Ga=Ha[pa];const Na=Ha[pa+1];xa&&za?X.push([Ga,Na,Ha[pa+2],sa[Z][3]]):xa?X.push([Ga,Na,Ha[pa+2]]):za?X.push([Ga,Na,sa[Z][2]]):X.push([Ga,Na])}aa.points=X;aa.spatialReference=fa;aa.hasZ=xa;aa.hasM=za;return!0}function c(X,Z,aa,fa,
pa=0){const {paths:sa,hasZ:xa,hasM:za}=X;X=[];if(!R(sa,xa,za,Z,X,fa,pa))return!1;aa.paths=X;aa.spatialReference=fa;aa.hasZ=xa;aa.hasM=za;return!0}function g(X,Z,aa,fa,pa=0){const {rings:sa,hasZ:xa,hasM:za}=X;X=[];if(!R(sa,xa,za,Z,X,fa,pa))return!1;aa.rings=X;aa.spatialReference=fa;aa.hasZ=xa;aa.hasM=za;return!0}function C(X,Z,aa,fa,pa=0){const {xmin:sa,ymin:xa,xmax:za,ymax:Ia,hasZ:Ha,hasM:Ga}=X;if(!z(sa,xa,Ha?X.zmin:pa,Z,Ea,fa))return!1;aa.xmin=Ea[0];aa.ymin=Ea[1];Ha&&(aa.zmin=Ea[2]);if(!z(za,Ia,
Ha?X.zmax:pa,Z,Ea,fa))return!1;aa.xmax=Ea[0];aa.ymax=Ea[1];Ha&&(aa.zmax=Ea[2]);Ga&&(aa.mmin=X.mmin,aa.mmax=X.mmax);aa.spatialReference=fa;return!0}function z(X,Z,aa,fa,pa,sa){wa[0]=X;wa[1]=Z;wa[2]=aa;return O(wa,fa,0,pa,sa,0,1)}function B(X,Z,aa,fa){if(Q.isNone(Z)||Q.isNone(fa)||2>X.length)return!1;2===X.length&&(wa[0]=X[0],wa[1]=X[1],wa[2]=0,X=wa);return O(X,Z,0,aa,fa,0,1)}function H(X,Z,aa){Q.isNone(Z)?X=!1:(Z=V(Z,La),Z=Ja[Z][6],Q.isNone(Z)?X=!1:(Z(X,0,wa,0),aa!==wa&&(aa[0]=wa[0],aa[1]=wa[1],2<
aa.length&&(aa[2]=wa[2])),X=!0));return X}function O(X,Z,aa,fa,pa,sa,xa=1){Z=ua(Z,pa,Ma);if(Q.isNone(Z))return!1;if(Z===Y){if(X===fa&&aa===sa)return!0;xa=aa+3*xa;for(let za=aa,Ia=sa;za<xa;za++,Ia++)fa[Ia]=X[za];return!0}xa=aa+3*xa;for(let za=aa,Ia=sa;za<xa;za+=3,Ia+=3)Z(X,za,fa,Ia);return!0}function R(X,Z,aa,fa,pa,sa,xa=0){const za=[];for(const Ia of X)for(const Ha of Ia)za.push(Ha[0],Ha[1],Z?Ha[2]:xa);if(!O(za,fa,0,za,sa,0,za.length/3))return!1;fa=0;pa.length=0;for(const Ia of X){X=[];for(const Ha of Ia)Z&&
aa?X.push([za[fa++],za[fa++],za[fa++],Ha[3]]):Z?X.push([za[fa++],za[fa++],za[fa++]]):(aa?X.push([za[fa++],za[fa++],Ha[2]]):X.push([za[fa++],za[fa++]]),fa++);pa.push(X)}return!0}function N(X,Z,aa){const fa=Math.sin(Z);Z=Math.cos(Z);const pa=Math.sin(X);X=Math.cos(X);aa[0]=-fa;aa[4]=-pa*Z;aa[8]=X*Z;aa[12]=0;aa[1]=Z;aa[5]=-pa*fa;aa[9]=X*fa;aa[13]=0;aa[2]=0;aa[6]=X;aa[10]=pa;aa[14]=0;aa[3]=0;aa[7]=0;aa[11]=0;aa[15]=1;return aa}function V(X,Z){if(Z.spatialReference===X)return Z.spatialReferenceId;Z.spatialReference=
X;"metersPerUnit"in Z&&(Z.metersPerUnit=u.getMetersPerUnitForSR(X,1));return X.wkt===r.SphericalECEFSpatialReference.wkt?Z.spatialReferenceId=1:L.isWGS84(X)?Z.spatialReferenceId=2:L.isWebMercator(X)?Z.spatialReferenceId=3:X.wkt===r.WGS84ECEFSpatialReference.wkt?Z.spatialReferenceId=4:4490===X.wkid?Z.spatialReferenceId=5:X.wkt===r.SphericalPCPFMars.wkt?Z.spatialReferenceId=7:X.wkt===r.SphericalPCPFMoon.wkt?Z.spatialReferenceId=9:L.isMars(X)?Z.spatialReferenceId=8:L.isMoon(X)?Z.spatialReferenceId=10:
Z.spatialReferenceId=0}function Y(X,Z,aa,fa){X!==aa&&(aa[fa++]=X[Z++],aa[fa++]=X[Z++],aa[fa]=X[Z])}function ba(X,Z,aa,fa){aa[fa++]=Ka*(X[Z++]/M.earth.radius);aa[fa++]=Ka*(Math.PI/2-2*Math.atan(Math.exp(-1*X[Z++]/M.earth.radius)));aa[fa]=X[Z]}function da(X,Z,aa,fa){ba(X,Z,aa,fa);U(aa,fa,aa,fa)}function ka(X,Z,aa,fa){ba(X,Z,aa,fa);ma(aa,fa,aa,fa)}function ha(X,Z,aa,fa){var pa=.4999999*Math.PI;pa=l.clamp(Fa*X[Z+1],-pa,pa);pa=Math.sin(pa);aa[fa++]=Fa*X[Z]*M.earth.radius;aa[fa++]=M.earth.halfSemiMajorAxis*
Math.log((1+pa)/(1-pa));aa[fa]=X[Z+2]}function e(X,Z,aa,fa,pa){pa+=X[Z+2];const sa=Fa*X[Z+1];X=Fa*X[Z];Z=Math.cos(sa);aa[fa++]=Math.cos(X)*Z*pa;aa[fa++]=Math.sin(X)*Z*pa;aa[fa]=Math.sin(sa)*pa}function y(X,Z,aa,fa){e(X,Z,aa,fa,M.moon.radius)}function T(X,Z,aa,fa){e(X,Z,aa,fa,M.mars.radius)}function U(X,Z,aa,fa){e(X,Z,aa,fa,M.earth.radius)}function ca(X,Z,aa,fa,pa){var sa=X[Z];const xa=X[Z+1];Z=X[Z+2];X=Math.sqrt(sa*sa+xa*xa+Z*Z);Z=l.asinClamped(Z/(0===X?1:X));sa=Math.atan2(xa,sa);aa[fa++]=Ka*sa;aa[fa++]=
Ka*Z;aa[fa]=X-pa}function ea(X,Z,aa,fa){ca(X,Z,aa,fa,M.moon.radius)}function ia(X,Z,aa,fa){ca(X,Z,aa,fa,M.mars.radius)}function la(X,Z,aa,fa){ca(X,Z,aa,fa,M.earth.radius)}function ja(X,Z,aa,fa){la(X,Z,aa,fa);ha(aa,fa,aa,fa)}function oa(X,Z,aa,fa){la(X,Z,aa,fa);ma(aa,fa,aa,fa)}function ma(X,Z,aa,fa){{var pa=M.earth;const xa=Fa*X[Z];var sa=Fa*X[Z+1];X=X[Z+2];Z=Math.sin(sa);sa=Math.cos(sa);const za=pa.radius/Math.sqrt(1-pa.eccentricitySquared*Z*Z);aa[fa++]=(za+X)*sa*Math.cos(xa);aa[fa++]=(za+X)*sa*Math.sin(xa);
aa[fa++]=(za*(1-pa.eccentricitySquared)+X)*Z}}function na(X,Z,aa,fa){var pa=q.earthEllipsoidConstants,sa=X[Z],xa=X[Z+1];X=X[Z+2];let za;Z=Math.abs(X);var Ia=sa*sa+xa*xa;var Ha=Math.sqrt(Ia);var Ga=Ia+X*X;var Na=Math.sqrt(Ga);sa=Math.atan2(xa,sa);var Ra=X*X/Ga;Ga=Ia/Ga;xa=pa.a2/Na;Ia=pa.a3-pa.a4/Na;.3<Ga?(Ra=Z/Na*(1+Ga*(pa.a1+xa+Ra*Ia)/Na),Na=Math.asin(Ra),xa=Ra*Ra,Ga=Math.sqrt(1-xa)):(Ga=Ha/Na*(1-Ra*(pa.a5-xa-Ga*Ia)/Na),Na=Math.acos(Ga),xa=1-Ga*Ga,Ra=Math.sqrt(xa));za=1-M.earth.eccentricitySquared*
xa;xa=M.earth.radius/Math.sqrt(za);pa=pa.a6*xa;xa=Ha-xa*Ga;Ia=Z-pa*Ra;Z=Ga*xa+Ra*Ia;Ha=Ga*Ia-Ra*xa;pa=Ha/(pa/za+Z);Na+=pa;0>X&&(Na=-Na);aa[fa++]=Ka*sa;aa[fa++]=Ka*Na;aa[fa]=Z+Ha*pa/2}function qa(X,Z,aa,fa){na(X,Z,aa,fa);U(aa,fa,aa,fa)}function ra(X,Z,aa,fa){na(X,Z,aa,fa);ha(aa,fa,aa,fa)}function ua(X,Z,aa=va()){return Q.isNone(X)||Q.isNone(Z)?null:ta(X,Z,aa).projector}function ta(X,Z,aa){if(Q.isNone(X)||Q.isNone(Z)||aa.source.spatialReference===X&&aa.dest.spatialReference===Z)return aa;const fa=V(X,
aa.source),pa=V(Z,aa.dest);0===fa&&0===pa?L.equals(X,Z)?aa.projector=Y:aa.projector=null:aa.projector=Ja[fa][pa];return aa}function va(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:Y}}let Da=null,ya=null,Aa=null,Ba={},Ca=function(X){function Z(){return X.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}G._inheritsLoose(Z,X);return Z}(F);(function(X){X.x2lon=
function(Z){return Z/M.earth.radius};X.y2lat=function(Z){return Math.PI/2-2*Math.atan(Math.exp(-1*Z/M.earth.radius))};X.lon2x=function(Z){return Z*M.earth.radius};X.lat2y=function(Z){Z=Math.sin(Z);return M.earth.radius/2*Math.log((1+Z)/(1-Z))}})(n.webMercator||(n.webMercator={}));const Ja={[2]:{[5]:null,[8]:null,[10]:null,[6]:Y,[1]:U,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:Y,[4]:ma},[5]:{[5]:Y,[8]:null,[10]:null,[6]:Y,[1]:U,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ma},[8]:{[5]:null,[8]:Y,[10]:null,
[6]:null,[1]:null,[7]:T,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Y,[6]:null,[1]:null,[7]:null,[9]:y,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:ba,[1]:da,[7]:null,[9]:null,[0]:null,[3]:Y,[2]:ba,[4]:ka},[4]:{[5]:na,[8]:null,[10]:null,[6]:na,[1]:qa,[7]:null,[9]:null,[0]:null,[3]:ra,[2]:na,[4]:Y},[1]:{[5]:la,[8]:null,[10]:null,[6]:la,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:ja,[2]:la,[4]:oa},[7]:{[5]:null,[8]:ia,[10]:null,[6]:null,[1]:null,
[7]:Y,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ea,[6]:null,[1]:null,[7]:null,[9]:Y,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Y,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:Y,[1]:U,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Y,[4]:ma}},La={spatialReference:null,spatialReferenceId:0},Oa={spatialReference:null,spatialReferenceId:0},Ma=va(),Pa=va(),Fa=l.deg2rad(1),Ka=l.rad2deg(1),wa=f.create(),
Qa=f.create(),Sa=f.create(),Ea=f.create(),Ta=f.create();n.canProjectToWGS84ComparableLonLat=function(X){if(Q.isNone(X))return!1;X=V(X,La);return!!Ja[X][6]};n.canProjectWithoutEngine=A;n.computeLatLonToENURotation=N;n.computeLinearTransformation=function(X,Z,aa,fa){if(Q.isNone(X)||Q.isNone(fa))return!1;var pa=V(X,La),sa=V(fa,Oa);if(pa===sa&&1!==sa&&(0!==pa||L.equals(X,fa)))return I.identity(aa),I.translate(aa,aa,Z),!0;if(1===sa||7===sa||9===sa){fa=X=0;if(1===sa){pa=Ja[pa][6];sa=Ja[6][sa];if(Q.isNone(pa)||
Q.isNone(sa))return!1;pa(Z,0,Qa,0);sa(Qa,0,Sa,0);X=Fa*Qa[0];fa=Fa*Qa[1]}else if(7===sa||9===sa){sa=Ja[pa][sa];if(Q.isNone(sa))return!1;sa(Z,0,Sa,0);X=Fa*Z[0];fa=Fa*Z[1]}N(fa,X,aa);aa[12]=Sa[0];aa[13]=Sa[1];aa[14]=Sa[2];return!0}if(3===sa&&(2===pa||1===pa)){sa=Ja[pa][6];if(Q.isNone(sa))return!1;sa(Z,0,Qa,0);Z=Fa*Qa[1];ha(Qa,0,Sa,0);I.identity(aa);I.translate(aa,aa,Sa);Z=1/Math.cos(Z);I.scale(aa,aa,[Z,Z,1]);return!0}return!1};n.getProjectorName=function(X,Z){switch(ua(X,Z,Ma)){case Y:return"copy3";
case U:return"wgs84ToSphericalECEF";case ha:return"wgs84ToWebMercator";case ma:return"wgs84ToWGS84ECEF";case ba:return"webMercatorToWGS84";case da:return"webMercatorToSphericalECEF";case ka:return"webMercatorToWGS84ECEF";case na:return"wgs84ECEFToWGS84";case qa:return"wgs84ECEFToSphericalECEF";case ra:return"wgs84ECEFToWebMercator";case la:return"sphericalECEFToWGS84";case ja:return"sphericalECEFToWebMercator";case ia:return"sphericalECEFToMars2000";case ea:return"sphericalECEFToMoon2000";case oa:return"sphericalECEFToWGS84ECEF";
case T:return"mars2000ToSphericalPCPF";case y:return"moon2000ToSphericalPCPF";default:return null}};n.getTransformation=m;n.getTransformations=function(X,Z,aa=null){if(Q.isNone(Da))throw new Ca;X=Da._getTransformationBySuitability(ya,X,Z,aa,null==aa?void 0:aa.spatialReference);if(null!==X){Z=[];for(const fa of X)Z.push(x.fromGE(fa));return Z}return[]};n.initializeProjection=async function(X,Z){if(!J())for(const {source:aa,dest:fa,geographicTransformation:pa}of X)if(!A(aa,fa,pa))return p(Z)};n.isLoaded=
J;n.isSupported=function(){return!0};n.load=p;n.localLinearScaleFactors=function(X,Z,aa,fa){if(Q.isNone(Z)||Q.isNone(fa))return!1;const pa=V(Z,La);var sa=V(fa,Oa);if(pa===sa&&0!==pa||L.equals(Z,fa))return aa[0]=1,aa[1]=1,aa[2]=1,!0;if(1===pa){Z=w.length(X);X=Z/Math.sqrt(X[0]*X[0]+X[1]*X[1]);Z/=M.earth.radius;if(3===sa)return aa[0]=X*Z,aa[1]=X*Z,aa[2]=1,!0;if(2===sa||5===sa)return sa=180/(M.earth.radius*Math.PI),aa[0]=sa*X*Z,aa[1]=sa*Z,aa[2]=1,!0}return!1};n.lonLatToSphericalPCPF=function(X,Z,aa,fa,
pa=0){fa+=pa;pa=Math.cos(aa);X[0]=Math.cos(Z)*pa*fa;X[1]=Math.sin(Z)*pa*fa;X[2]=Math.sin(aa)*fa};n.project=function(X,Z,aa=null){return Array.isArray(X)?0===X.length?[]:h(ya,X,X[0].spatialReference,Z,aa):h(ya,[X],X.spatialReference,Z,aa)[0]};n.projectBoundingRect=function(X,Z,aa,fa){if(null==X)return!1;if(L.equals(Z,fa))return t.set(aa,X),!0;wa[0]=X[0];wa[1]=X[1];wa[2]=0;if(!O(wa,Z,0,wa,fa,0,1))return!1;aa[0]=wa[0];aa[1]=wa[1];wa[0]=X[2];wa[1]=X[3];wa[2]=0;if(!O(wa,Z,0,wa,fa,0,1))return!1;aa[2]=wa[0];
aa[3]=wa[1];return!0};n.projectBoundingSphere=function(X,Z,aa,fa){if(Q.isNone(Z)||Q.isNone(fa))return!1;Z=ta(Z,fa,Pa);if(Z.projector===Y)return aa[0]=X[0],aa[1]=X[1],aa[2]=X[2],aa[3]=X[3],!0;if(Q.isNone(Z.projector))return!1;const {source:pa,dest:sa}=Z;if(3===sa.spatialReferenceId){Z=Ja[pa.spatialReferenceId][2];if(Q.isNone(Z))return!1;Z(X,0,Qa,0);Z=Math.abs(Fa*Qa[1])+Math.asin(X[3]/(M.earth.radius+X[2]));ha(Qa,0,aa,0);aa[3]=Z>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(Z)*X[3];return!0}Z.projector(X,
0,aa,0);aa[3]=X[3]*pa.metersPerUnit/sa.metersPerUnit;return!0};n.projectBuffer=O;n.projectDirection=function(X,Z,aa,fa,pa){w.copy(Ea,X);w.add(Ta,X,Z);B(Ea,aa,Ea,pa);B(Ta,aa,Ta,pa);w.subtract(fa,Ta,Ea);w.normalize(fa,fa)};n.projectExtent=function(X,Z,aa=Z.spatialReference,fa=0){return Q.isNone(aa)?!1:C(X,X.spatialReference,Z,aa,fa)};n.projectMany=h;n.projectMultipoint=function(X,Z,aa=Z.spatialReference,fa=0){return Q.isNone(aa)?!1:k(X,X.spatialReference,Z,aa,fa)};n.projectPoint=function(X,Z,aa=Z.spatialReference,
fa=0){return Q.isNone(aa)?!1:d(X,X.spatialReference,Z,aa,fa)};n.projectPointToVector=function(X,Z,aa,fa=0){Ea[0]=X.x;Ea[1]=X.y;const pa=X.z;Ea[2]=void 0!==pa?pa:fa;return O(Ea,X.spatialReference,0,Z,aa,0,1)};n.projectPointToWGS84ComparableLonLat=function(X,Z){Ea[0]=X.x;Ea[1]=X.y;const aa=X.z;Ea[2]=void 0!==aa?aa:0;return H(Ea,X.spatialReference,Z)};n.projectPolygon=function(X,Z,aa=Z.spatialReference,fa=0){return Q.isNone(aa)?!1:g(X,X.spatialReference,Z,aa,fa)};n.projectPolyline=function(X,Z,aa=Z.spatialReference,
fa=0){return Q.isNone(aa)?!1:c(X,X.spatialReference,Z,aa,fa)};n.projectVectorToDehydratedPoint=function(X,Z,aa,fa){Q.isNone(fa)&&(fa=aa.spatialReference);return O(X,Z,0,Ea,fa,0,1)?(aa.x=Ea[0],aa.y=Ea[1],aa.z=Ea[2],aa.spatialReference=fa,aa):null};n.projectVectorToPoint=function(X,Z,aa,fa){if(Q.isNone(Z)||Q.isNone(aa))return null;fa=Q.isSome(fa)?fa:new W({spatialReference:aa});return O(X,Z,0,Ea,aa,0,1)?(fa.x=Ea[0],fa.y=Ea[1],fa.z=Ea[2],fa.spatialReference=aa,fa):null};n.projectVectorToVector=B;n.projectVectorToWGS84ComparableLonLat=
H;n.projectXYZToVector=z;n.sphericalECEFToSphericalPCPF=ca;n.unload=function(){Aa=ya=Da=null;Ba={}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(S,n,G){function Q(e,y){e[0]=y[0];e[1]=y[1];e[2]=y[2];e[3]=y[3];e[4]=y[4];e[5]=y[5];e[6]=y[6];e[7]=y[7];e[8]=y[8];e[9]=y[9];e[10]=y[10];e[11]=y[11];e[12]=y[12];e[13]=y[13];e[14]=y[14];e[15]=y[15];return e}function F(e,y,T,U,ca,ea,ia,la,ja,oa,ma,na,qa,ra,ua,ta,va){e[0]=
y;e[1]=T;e[2]=U;e[3]=ca;e[4]=ea;e[5]=ia;e[6]=la;e[7]=ja;e[8]=oa;e[9]=ma;e[10]=na;e[11]=qa;e[12]=ra;e[13]=ua;e[14]=ta;e[15]=va;return e}function P(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function L(e,y){if(e===y){const T=y[1],U=y[2],ca=y[3],ea=y[6],ia=y[7],la=y[11];e[1]=y[4];e[2]=y[8];e[3]=y[12];e[4]=T;e[6]=y[9];e[7]=y[13];e[8]=U;e[9]=ea;e[11]=y[14];e[12]=ca;e[13]=ia;e[14]=la}else e[0]=y[0],e[1]=y[4],e[2]=y[8],
e[3]=y[12],e[4]=y[1],e[5]=y[5],e[6]=y[9],e[7]=y[13],e[8]=y[2],e[9]=y[6],e[10]=y[10],e[11]=y[14],e[12]=y[3],e[13]=y[7],e[14]=y[11],e[15]=y[15];return e}function M(e,y){const T=y[0],U=y[1],ca=y[2],ea=y[3],ia=y[4],la=y[5],ja=y[6],oa=y[7],ma=y[8],na=y[9],qa=y[10],ra=y[11],ua=y[12],ta=y[13],va=y[14];y=y[15];const Da=T*la-U*ia,ya=T*ja-ca*ia,Aa=T*oa-ea*ia,Ba=U*ja-ca*la,Ca=U*oa-ea*la,Ja=ca*oa-ea*ja,La=ma*ta-na*ua,Oa=ma*va-qa*ua,Ma=ma*y-ra*ua,Pa=na*va-qa*ta,Fa=na*y-ra*ta,Ka=qa*y-ra*va;let wa=Da*Ka-ya*Fa+Aa*
Pa+Ba*Ma-Ca*Oa+Ja*La;if(!wa)return null;wa=1/wa;e[0]=(la*Ka-ja*Fa+oa*Pa)*wa;e[1]=(ca*Fa-U*Ka-ea*Pa)*wa;e[2]=(ta*Ja-va*Ca+y*Ba)*wa;e[3]=(qa*Ca-na*Ja-ra*Ba)*wa;e[4]=(ja*Ma-ia*Ka-oa*Oa)*wa;e[5]=(T*Ka-ca*Ma+ea*Oa)*wa;e[6]=(va*Aa-ua*Ja-y*ya)*wa;e[7]=(ma*Ja-qa*Aa+ra*ya)*wa;e[8]=(ia*Fa-la*Ma+oa*La)*wa;e[9]=(U*Ma-T*Fa-ea*La)*wa;e[10]=(ua*Ca-ta*Aa+y*Da)*wa;e[11]=(na*Aa-ma*Ca-ra*Da)*wa;e[12]=(la*Oa-ia*Pa-ja*La)*wa;e[13]=(T*Pa-U*Oa+ca*La)*wa;e[14]=(ta*ya-ua*Ba-va*Da)*wa;e[15]=(ma*Ba-na*ya+qa*Da)*wa;return e}
function W(e,y){const T=y[0],U=y[1],ca=y[2],ea=y[3],ia=y[4],la=y[5],ja=y[6],oa=y[7],ma=y[8],na=y[9],qa=y[10],ra=y[11],ua=y[12],ta=y[13],va=y[14];y=y[15];e[0]=la*(qa*y-ra*va)-na*(ja*y-oa*va)+ta*(ja*ra-oa*qa);e[1]=-(U*(qa*y-ra*va)-na*(ca*y-ea*va)+ta*(ca*ra-ea*qa));e[2]=U*(ja*y-oa*va)-la*(ca*y-ea*va)+ta*(ca*oa-ea*ja);e[3]=-(U*(ja*ra-oa*qa)-la*(ca*ra-ea*qa)+na*(ca*oa-ea*ja));e[4]=-(ia*(qa*y-ra*va)-ma*(ja*y-oa*va)+ua*(ja*ra-oa*qa));e[5]=T*(qa*y-ra*va)-ma*(ca*y-ea*va)+ua*(ca*ra-ea*qa);e[6]=-(T*(ja*y-oa*
va)-ia*(ca*y-ea*va)+ua*(ca*oa-ea*ja));e[7]=T*(ja*ra-oa*qa)-ia*(ca*ra-ea*qa)+ma*(ca*oa-ea*ja);e[8]=ia*(na*y-ra*ta)-ma*(la*y-oa*ta)+ua*(la*ra-oa*na);e[9]=-(T*(na*y-ra*ta)-ma*(U*y-ea*ta)+ua*(U*ra-ea*na));e[10]=T*(la*y-oa*ta)-ia*(U*y-ea*ta)+ua*(U*oa-ea*la);e[11]=-(T*(la*ra-oa*na)-ia*(U*ra-ea*na)+ma*(U*oa-ea*la));e[12]=-(ia*(na*va-qa*ta)-ma*(la*va-ja*ta)+ua*(la*qa-ja*na));e[13]=T*(na*va-qa*ta)-ma*(U*va-ca*ta)+ua*(U*qa-ca*na);e[14]=-(T*(la*va-ja*ta)-ia*(U*va-ca*ta)+ua*(U*ja-ca*la));e[15]=T*(la*qa-ja*na)-
ia*(U*qa-ca*na)+ma*(U*ja-ca*la);return e}function K(e){const y=e[0],T=e[1],U=e[2],ca=e[3],ea=e[4],ia=e[5],la=e[6],ja=e[7],oa=e[8],ma=e[9],na=e[10],qa=e[11],ra=e[12],ua=e[13],ta=e[14];e=e[15];return(y*ia-T*ea)*(na*e-qa*ta)-(y*la-U*ea)*(ma*e-qa*ua)+(y*ja-ca*ea)*(ma*ta-na*ua)+(T*la-U*ia)*(oa*e-qa*ra)-(T*ja-ca*ia)*(oa*ta-na*ra)+(U*ja-ca*la)*(oa*ua-ma*ra)}function D(e,y,T){const U=y[0],ca=y[1],ea=y[2],ia=y[3],la=y[4],ja=y[5],oa=y[6],ma=y[7],na=y[8],qa=y[9],ra=y[10],ua=y[11],ta=y[12],va=y[13],Da=y[14];
y=y[15];let ya=T[0],Aa=T[1],Ba=T[2],Ca=T[3];e[0]=ya*U+Aa*la+Ba*na+Ca*ta;e[1]=ya*ca+Aa*ja+Ba*qa+Ca*va;e[2]=ya*ea+Aa*oa+Ba*ra+Ca*Da;e[3]=ya*ia+Aa*ma+Ba*ua+Ca*y;ya=T[4];Aa=T[5];Ba=T[6];Ca=T[7];e[4]=ya*U+Aa*la+Ba*na+Ca*ta;e[5]=ya*ca+Aa*ja+Ba*qa+Ca*va;e[6]=ya*ea+Aa*oa+Ba*ra+Ca*Da;e[7]=ya*ia+Aa*ma+Ba*ua+Ca*y;ya=T[8];Aa=T[9];Ba=T[10];Ca=T[11];e[8]=ya*U+Aa*la+Ba*na+Ca*ta;e[9]=ya*ca+Aa*ja+Ba*qa+Ca*va;e[10]=ya*ea+Aa*oa+Ba*ra+Ca*Da;e[11]=ya*ia+Aa*ma+Ba*ua+Ca*y;ya=T[12];Aa=T[13];Ba=T[14];Ca=T[15];e[12]=ya*U+
Aa*la+Ba*na+Ca*ta;e[13]=ya*ca+Aa*ja+Ba*qa+Ca*va;e[14]=ya*ea+Aa*oa+Ba*ra+Ca*Da;e[15]=ya*ia+Aa*ma+Ba*ua+Ca*y;return e}function v(e,y,T){const U=T[0],ca=T[1];T=T[2];let ea=void 0,ia=void 0,la=void 0,ja=void 0,oa=void 0,ma=void 0,na=void 0,qa=void 0,ra=void 0,ua=void 0,ta=void 0,va=void 0;y===e?(e[12]=y[0]*U+y[4]*ca+y[8]*T+y[12],e[13]=y[1]*U+y[5]*ca+y[9]*T+y[13],e[14]=y[2]*U+y[6]*ca+y[10]*T+y[14],e[15]=y[3]*U+y[7]*ca+y[11]*T+y[15]):(ea=y[0],ia=y[1],la=y[2],ja=y[3],oa=y[4],ma=y[5],na=y[6],qa=y[7],ra=y[8],
ua=y[9],ta=y[10],va=y[11],e[0]=ea,e[1]=ia,e[2]=la,e[3]=ja,e[4]=oa,e[5]=ma,e[6]=na,e[7]=qa,e[8]=ra,e[9]=ua,e[10]=ta,e[11]=va,e[12]=ea*U+oa*ca+ra*T+y[12],e[13]=ia*U+ma*ca+ua*T+y[13],e[14]=la*U+na*ca+ta*T+y[14],e[15]=ja*U+qa*ca+va*T+y[15]);return e}function b(e,y,T){const U=T[0],ca=T[1];T=T[2];e[0]=y[0]*U;e[1]=y[1]*U;e[2]=y[2]*U;e[3]=y[3]*U;e[4]=y[4]*ca;e[5]=y[5]*ca;e[6]=y[6]*ca;e[7]=y[7]*ca;e[8]=y[8]*T;e[9]=y[9]*T;e[10]=y[10]*T;e[11]=y[11]*T;e[12]=y[12];e[13]=y[13];e[14]=y[14];e[15]=y[15];return e}
function l(e,y,T,U){let ca=U[0],ea=U[1];U=U[2];let ia=Math.sqrt(ca*ca+ea*ea+U*U);var la=void 0,ja=void 0;let oa=void 0,ma=void 0,na=void 0,qa=void 0,ra=void 0,ua=void 0,ta=void 0,va=void 0,Da=void 0,ya=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Ja=void 0,La=void 0,Oa=void 0,Ma=void 0,Pa=void 0,Fa=void 0,Ka=void 0;ja=la=void 0;if(ia<G.EPSILON)return null;ia=1/ia;ca*=ia;ea*=ia;U*=ia;la=Math.sin(T);ja=Math.cos(T);oa=1-ja;ma=y[0];na=y[1];qa=y[2];ra=y[3];ua=y[4];ta=y[5];va=y[6];Da=y[7];ya=y[8];Aa=y[9];Ba=y[10];
Ca=y[11];Ja=ca*ca*oa+ja;La=ea*ca*oa+U*la;Oa=U*ca*oa-ea*la;Ma=ca*ea*oa-U*la;Pa=ea*ea*oa+ja;Fa=U*ea*oa+ca*la;Ka=ca*U*oa+ea*la;la=ea*U*oa-ca*la;ja=U*U*oa+ja;e[0]=ma*Ja+ua*La+ya*Oa;e[1]=na*Ja+ta*La+Aa*Oa;e[2]=qa*Ja+va*La+Ba*Oa;e[3]=ra*Ja+Da*La+Ca*Oa;e[4]=ma*Ma+ua*Pa+ya*Fa;e[5]=na*Ma+ta*Pa+Aa*Fa;e[6]=qa*Ma+va*Pa+Ba*Fa;e[7]=ra*Ma+Da*Pa+Ca*Fa;e[8]=ma*Ka+ua*la+ya*ja;e[9]=na*Ka+ta*la+Aa*ja;e[10]=qa*Ka+va*la+Ba*ja;e[11]=ra*Ka+Da*la+Ca*ja;y!==e&&(e[12]=y[12],e[13]=y[13],e[14]=y[14],e[15]=y[15]);return e}function f(e,
y,T){const U=Math.sin(T);T=Math.cos(T);const ca=y[4],ea=y[5],ia=y[6],la=y[7],ja=y[8],oa=y[9],ma=y[10],na=y[11];y!==e&&(e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=y[3],e[12]=y[12],e[13]=y[13],e[14]=y[14],e[15]=y[15]);e[4]=ca*T+ja*U;e[5]=ea*T+oa*U;e[6]=ia*T+ma*U;e[7]=la*T+na*U;e[8]=ja*T-ca*U;e[9]=oa*T-ea*U;e[10]=ma*T-ia*U;e[11]=na*T-la*U;return e}function w(e,y,T){const U=Math.sin(T);T=Math.cos(T);const ca=y[0],ea=y[1],ia=y[2],la=y[3],ja=y[8],oa=y[9],ma=y[10],na=y[11];y!==e&&(e[4]=y[4],e[5]=y[5],e[6]=y[6],
e[7]=y[7],e[12]=y[12],e[13]=y[13],e[14]=y[14],e[15]=y[15]);e[0]=ca*T-ja*U;e[1]=ea*T-oa*U;e[2]=ia*T-ma*U;e[3]=la*T-na*U;e[8]=ca*U+ja*T;e[9]=ea*U+oa*T;e[10]=ia*U+ma*T;e[11]=la*U+na*T;return e}function r(e,y,T){const U=Math.sin(T);T=Math.cos(T);const ca=y[0],ea=y[1],ia=y[2],la=y[3],ja=y[4],oa=y[5],ma=y[6],na=y[7];y!==e&&(e[8]=y[8],e[9]=y[9],e[10]=y[10],e[11]=y[11],e[12]=y[12],e[13]=y[13],e[14]=y[14],e[15]=y[15]);e[0]=ca*T+ja*U;e[1]=ea*T+oa*U;e[2]=ia*T+ma*U;e[3]=la*T+na*U;e[4]=ja*T-ca*U;e[5]=oa*T-ea*
U;e[6]=ma*T-ia*U;e[7]=na*T-la*U;return e}function u(e,y){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=y[0];e[13]=y[1];e[14]=y[2];e[15]=1;return e}function I(e,y){e[0]=y[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=y[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=y[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function E(e,y,T){let U=T[0],ca=T[1];T=T[2];let ea=Math.sqrt(U*U+ca*ca+T*T),ia=void 0,la=void 0,ja=void 0;if(ea<G.EPSILON)return null;ea=1/ea;U*=ea;ca*=ea;T*=
ea;ia=Math.sin(y);la=Math.cos(y);ja=1-la;e[0]=U*U*ja+la;e[1]=ca*U*ja+T*ia;e[2]=T*U*ja-ca*ia;e[3]=0;e[4]=U*ca*ja-T*ia;e[5]=ca*ca*ja+la;e[6]=T*ca*ja+U*ia;e[7]=0;e[8]=U*T*ja+ca*ia;e[9]=ca*T*ja-U*ia;e[10]=T*T*ja+la;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function t(e,y){const T=Math.sin(y);y=Math.cos(y);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=y;e[6]=T;e[7]=0;e[8]=0;e[9]=-T;e[10]=y;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function q(e,y){const T=Math.sin(y);y=Math.cos(y);e[0]=y;e[1]=0;
e[2]=-T;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=T;e[9]=0;e[10]=y;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function x(e,y){const T=Math.sin(y);y=Math.cos(y);e[0]=y;e[1]=T;e[2]=0;e[3]=0;e[4]=-T;e[5]=y;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function J(e,y,T){var U=y[0],ca=y[1],ea=y[2],ia=y[3],la=U+U,ja=ca+ca;const oa=ea+ea;y=U*la;const ma=U*ja;U*=oa;const na=ca*ja;ca*=oa;ea*=oa;la*=ia;ja*=ia;ia*=oa;e[0]=1-(na+ea);e[1]=ma+ia;e[2]=U-ja;e[3]=0;e[4]=
ma-ia;e[5]=1-(y+ea);e[6]=ca+la;e[7]=0;e[8]=U+ja;e[9]=ca-la;e[10]=1-(y+na);e[11]=0;e[12]=T[0];e[13]=T[1];e[14]=T[2];e[15]=1;return e}function p(e,y){const T=ha,U=-y[0],ca=-y[1],ea=-y[2],ia=y[3],la=y[4],ja=y[5],oa=y[6],ma=y[7],na=U*U+ca*ca+ea*ea+ia*ia;0<na?(T[0]=2*(la*ia+ma*U+ja*ea-oa*ca)/na,T[1]=2*(ja*ia+ma*ca+oa*U-la*ea)/na,T[2]=2*(oa*ia+ma*ea+la*ca-ja*U)/na):(T[0]=2*(la*ia+ma*U+ja*ea-oa*ca),T[1]=2*(ja*ia+ma*ca+oa*U-la*ea),T[2]=2*(oa*ia+ma*ea+la*ca-ja*U));J(e,y,T);return e}function h(e,y){e[0]=y[12];
e[1]=y[13];e[2]=y[14];return e}function m(e,y){const T=y[0],U=y[1],ca=y[2],ea=y[4],ia=y[5],la=y[6],ja=y[8],oa=y[9];y=y[10];e[0]=Math.sqrt(T*T+U*U+ca*ca);e[1]=Math.sqrt(ea*ea+ia*ia+la*la);e[2]=Math.sqrt(ja*ja+oa*oa+y*y);return e}function A(e,y){const T=y[0]+y[5]+y[10];let U=0;0<T?(U=2*Math.sqrt(T+1),e[3]=.25*U,e[0]=(y[6]-y[9])/U,e[1]=(y[8]-y[2])/U,e[2]=(y[1]-y[4])/U):y[0]>y[5]&&y[0]>y[10]?(U=2*Math.sqrt(1+y[0]-y[5]-y[10]),e[3]=(y[6]-y[9])/U,e[0]=.25*U,e[1]=(y[1]+y[4])/U,e[2]=(y[8]+y[2])/U):y[5]>y[10]?
(U=2*Math.sqrt(1+y[5]-y[0]-y[10]),e[3]=(y[8]-y[2])/U,e[0]=(y[1]+y[4])/U,e[1]=.25*U,e[2]=(y[6]+y[9])/U):(U=2*Math.sqrt(1+y[10]-y[0]-y[5]),e[3]=(y[1]-y[4])/U,e[0]=(y[8]+y[2])/U,e[1]=(y[6]+y[9])/U,e[2]=.25*U);return e}function a(e,y,T,U){var ca=y[0],ea=y[1],ia=y[2],la=y[3],ja=ca+ca,oa=ea+ea,ma=ia+ia;y=ca*ja;const na=ca*oa;ca*=ma;const qa=ea*oa;ea*=ma;ia*=ma;ja*=la;oa*=la;la*=ma;ma=U[0];const ra=U[1];U=U[2];e[0]=(1-(qa+ia))*ma;e[1]=(na+la)*ma;e[2]=(ca-oa)*ma;e[3]=0;e[4]=(na-la)*ra;e[5]=(1-(y+ia))*ra;
e[6]=(ea+ja)*ra;e[7]=0;e[8]=(ca+oa)*U;e[9]=(ea-ja)*U;e[10]=(1-(y+qa))*U;e[11]=0;e[12]=T[0];e[13]=T[1];e[14]=T[2];e[15]=1;return e}function d(e,y,T,U,ca){var ea=y[0],ia=y[1],la=y[2],ja=y[3],oa=ea+ea,ma=ia+ia,na=la+la;y=ea*oa;var qa=ea*ma,ra=ea*na;ea=ia*ma;ia*=na;var ua=la*na;la=ja*oa;ma*=ja;const ta=ja*na;var va=U[0],Da=U[1];na=U[2];U=ca[0];ja=ca[1];ca=ca[2];oa=(1-(ea+ua))*va;const ya=(qa+ta)*va;va*=ra-ma;qa=(qa-ta)*Da;ua=(1-(y+ua))*Da;Da*=ia+la;ra=(ra+ma)*na;ia=(ia-la)*na;y=(1-(y+ea))*na;e[0]=oa;
e[1]=ya;e[2]=va;e[3]=0;e[4]=qa;e[5]=ua;e[6]=Da;e[7]=0;e[8]=ra;e[9]=ia;e[10]=y;e[11]=0;e[12]=T[0]+U-(oa*U+qa*ja+ra*ca);e[13]=T[1]+ja-(ya*U+ua*ja+ia*ca);e[14]=T[2]+ca-(va*U+Da*ja+y*ca);e[15]=1;return e}function k(e,y){var T=y[0],U=y[1],ca=y[2];y=y[3];var ea=T+T,ia=U+U;const la=ca+ca;T*=ea;const ja=U*ea;U*=ia;const oa=ca*ea,ma=ca*ia;ca*=la;ea*=y;ia*=y;y*=la;e[0]=1-U-ca;e[1]=ja+y;e[2]=oa-ia;e[3]=0;e[4]=ja-y;e[5]=1-T-ca;e[6]=ma+ea;e[7]=0;e[8]=oa+ia;e[9]=ma-ea;e[10]=1-T-U;e[11]=0;e[12]=0;e[13]=0;e[14]=
0;e[15]=1;return e}function c(e,y,T,U,ca,ea,ia){const la=1/(T-y),ja=1/(ca-U),oa=1/(ea-ia);e[0]=2*ea*la;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*ea*ja;e[6]=0;e[7]=0;e[8]=(T+y)*la;e[9]=(ca+U)*ja;e[10]=(ia+ea)*oa;e[11]=-1;e[12]=0;e[13]=0;e[14]=ia*ea*2*oa;e[15]=0;return e}function g(e,y,T,U,ca){y=1/Math.tan(y/2);let ea=void 0;e[0]=y/T;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=y;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;null!=ca&&Infinity!==ca?(ea=1/(U-ca),e[10]=(ca+U)*ea,e[14]=2*ca*U*ea):(e[10]=-1,
e[14]=-2*U);return e}function C(e,y,T,U){const ca=Math.tan(y.upDegrees*Math.PI/180),ea=Math.tan(y.downDegrees*Math.PI/180),ia=Math.tan(y.leftDegrees*Math.PI/180);y=Math.tan(y.rightDegrees*Math.PI/180);const la=2/(ia+y),ja=2/(ca+ea);e[0]=la;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=ja;e[6]=0;e[7]=0;e[8]=-((ia-y)*la*.5);e[9]=(ca-ea)*ja*.5;e[10]=U/(T-U);e[11]=-1;e[12]=0;e[13]=0;e[14]=U*T/(T-U);e[15]=0;return e}function z(e,y,T,U,ca,ea,ia){const la=1/(y-T),ja=1/(U-ca),oa=1/(ea-ia);e[0]=-2*la;e[1]=0;e[2]=0;e[3]=
0;e[4]=0;e[5]=-2*ja;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*oa;e[11]=0;e[12]=(y+T)*la;e[13]=(ca+U)*ja;e[14]=(ia+ea)*oa;e[15]=1;return e}function B(e,y,T,U){let ca=void 0,ea=void 0;var ia=void 0,la=void 0;let ja=void 0,oa=void 0;var ma=void 0,na=void 0;let qa=void 0,ra=void 0;const ua=y[0],ta=y[1];y=y[2];ia=U[0];la=U[1];U=U[2];ma=T[0];na=T[1];T=T[2];if(Math.abs(ua-ma)<G.EPSILON&&Math.abs(ta-na)<G.EPSILON&&Math.abs(y-T)<G.EPSILON)return P(e);ma=ua-ma;na=ta-na;qa=y-T;ra=1/Math.sqrt(ma*ma+na*na+qa*qa);ma*=
ra;na*=ra;qa*=ra;ca=la*qa-U*na;ea=U*ma-ia*qa;ia=ia*na-la*ma;(ra=Math.sqrt(ca*ca+ea*ea+ia*ia))?(ra=1/ra,ca*=ra,ea*=ra,ia*=ra):ia=ea=ca=0;la=na*ia-qa*ea;ja=qa*ca-ma*ia;oa=ma*ea-na*ca;(ra=Math.sqrt(la*la+ja*ja+oa*oa))?(ra=1/ra,la*=ra,ja*=ra,oa*=ra):oa=ja=la=0;e[0]=ca;e[1]=la;e[2]=ma;e[3]=0;e[4]=ea;e[5]=ja;e[6]=na;e[7]=0;e[8]=ia;e[9]=oa;e[10]=qa;e[11]=0;e[12]=-(ca*ua+ea*ta+ia*y);e[13]=-(la*ua+ja*ta+oa*y);e[14]=-(ma*ua+na*ta+qa*y);e[15]=1;return e}function H(e,y,T,U){const ca=y[0],ea=y[1];y=y[2];var ia=
U[0];const la=U[1];var ja=U[2];U=ca-T[0];let oa=ea-T[1];T=y-T[2];let ma=U*U+oa*oa+T*T;0<ma&&(ma=1/Math.sqrt(ma),U*=ma,oa*=ma,T*=ma);let na=la*T-ja*oa;ja=ja*U-ia*T;ia=ia*oa-la*U;ma=na*na+ja*ja+ia*ia;0<ma&&(ma=1/Math.sqrt(ma),na*=ma,ja*=ma,ia*=ma);e[0]=na;e[1]=ja;e[2]=ia;e[3]=0;e[4]=oa*ia-T*ja;e[5]=T*na-U*ia;e[6]=U*ja-oa*na;e[7]=0;e[8]=U;e[9]=oa;e[10]=T;e[11]=0;e[12]=ca;e[13]=ea;e[14]=y;e[15]=1;return e}function O(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+
e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function R(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function N(e,y,T){e[0]=y[0]+T[0];e[1]=y[1]+T[1];e[2]=y[2]+T[2];e[3]=y[3]+T[3];e[4]=y[4]+T[4];e[5]=
y[5]+T[5];e[6]=y[6]+T[6];e[7]=y[7]+T[7];e[8]=y[8]+T[8];e[9]=y[9]+T[9];e[10]=y[10]+T[10];e[11]=y[11]+T[11];e[12]=y[12]+T[12];e[13]=y[13]+T[13];e[14]=y[14]+T[14];e[15]=y[15]+T[15];return e}function V(e,y,T){e[0]=y[0]-T[0];e[1]=y[1]-T[1];e[2]=y[2]-T[2];e[3]=y[3]-T[3];e[4]=y[4]-T[4];e[5]=y[5]-T[5];e[6]=y[6]-T[6];e[7]=y[7]-T[7];e[8]=y[8]-T[8];e[9]=y[9]-T[9];e[10]=y[10]-T[10];e[11]=y[11]-T[11];e[12]=y[12]-T[12];e[13]=y[13]-T[13];e[14]=y[14]-T[14];e[15]=y[15]-T[15];return e}function Y(e,y,T){e[0]=y[0]*T;
e[1]=y[1]*T;e[2]=y[2]*T;e[3]=y[3]*T;e[4]=y[4]*T;e[5]=y[5]*T;e[6]=y[6]*T;e[7]=y[7]*T;e[8]=y[8]*T;e[9]=y[9]*T;e[10]=y[10]*T;e[11]=y[11]*T;e[12]=y[12]*T;e[13]=y[13]*T;e[14]=y[14]*T;e[15]=y[15]*T;return e}function ba(e,y,T,U){e[0]=y[0]+T[0]*U;e[1]=y[1]+T[1]*U;e[2]=y[2]+T[2]*U;e[3]=y[3]+T[3]*U;e[4]=y[4]+T[4]*U;e[5]=y[5]+T[5]*U;e[6]=y[6]+T[6]*U;e[7]=y[7]+T[7]*U;e[8]=y[8]+T[8]*U;e[9]=y[9]+T[9]*U;e[10]=y[10]+T[10]*U;e[11]=y[11]+T[11]*U;e[12]=y[12]+T[12]*U;e[13]=y[13]+T[13]*U;e[14]=y[14]+T[14]*U;e[15]=y[15]+
T[15]*U;return e}function da(e,y){return e[0]===y[0]&&e[1]===y[1]&&e[2]===y[2]&&e[3]===y[3]&&e[4]===y[4]&&e[5]===y[5]&&e[6]===y[6]&&e[7]===y[7]&&e[8]===y[8]&&e[9]===y[9]&&e[10]===y[10]&&e[11]===y[11]&&e[12]===y[12]&&e[13]===y[13]&&e[14]===y[14]&&e[15]===y[15]}function ka(e,y){const T=e[0],U=e[1],ca=e[2],ea=e[3],ia=e[4],la=e[5],ja=e[6],oa=e[7],ma=e[8],na=e[9],qa=e[10],ra=e[11],ua=e[12],ta=e[13],va=e[14];e=e[15];const Da=y[0],ya=y[1],Aa=y[2],Ba=y[3],Ca=y[4],Ja=y[5],La=y[6],Oa=y[7],Ma=y[8],Pa=y[9],Fa=
y[10],Ka=y[11],wa=y[12],Qa=y[13],Sa=y[14];y=y[15];return Math.abs(T-Da)<=G.EPSILON*Math.max(1,Math.abs(T),Math.abs(Da))&&Math.abs(U-ya)<=G.EPSILON*Math.max(1,Math.abs(U),Math.abs(ya))&&Math.abs(ca-Aa)<=G.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Aa))&&Math.abs(ea-Ba)<=G.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ba))&&Math.abs(ia-Ca)<=G.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ca))&&Math.abs(la-Ja)<=G.EPSILON*Math.max(1,Math.abs(la),Math.abs(Ja))&&Math.abs(ja-La)<=G.EPSILON*Math.max(1,Math.abs(ja),Math.abs(La))&&
Math.abs(oa-Oa)<=G.EPSILON*Math.max(1,Math.abs(oa),Math.abs(Oa))&&Math.abs(ma-Ma)<=G.EPSILON*Math.max(1,Math.abs(ma),Math.abs(Ma))&&Math.abs(na-Pa)<=G.EPSILON*Math.max(1,Math.abs(na),Math.abs(Pa))&&Math.abs(qa-Fa)<=G.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Fa))&&Math.abs(ra-Ka)<=G.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Ka))&&Math.abs(ua-wa)<=G.EPSILON*Math.max(1,Math.abs(ua),Math.abs(wa))&&Math.abs(ta-Qa)<=G.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Qa))&&Math.abs(va-Sa)<=G.EPSILON*Math.max(1,Math.abs(va),
Math.abs(Sa))&&Math.abs(e-y)<=G.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))}const ha=n.create();n=Object.freeze({__proto__:null,copy:Q,set:F,identity:P,transpose:L,invert:M,adjoint:W,determinant:K,multiply:D,translate:v,scale:b,rotate:l,rotateX:f,rotateY:w,rotateZ:r,fromTranslation:u,fromScaling:I,fromRotation:E,fromXRotation:t,fromYRotation:q,fromZRotation:x,fromRotationTranslation:J,fromQuat2:p,getTranslation:h,getScaling:m,getRotation:A,fromRotationTranslationScale:a,fromRotationTranslationScaleOrigin:d,
fromQuat:k,frustum:c,perspective:g,perspectiveFromFieldOfView:C,ortho:z,lookAt:B,targetTo:H,str:O,frob:R,add:N,subtract:V,multiplyScalar:Y,multiplyScalarAndAdd:ba,exactEquals:da,equals:ka,mul:D,sub:V});S.add=N;S.adjoint=W;S.copy=Q;S.determinant=K;S.equals=ka;S.exactEquals=da;S.frob=R;S.fromQuat=k;S.fromQuat2=p;S.fromRotation=E;S.fromRotationTranslation=J;S.fromRotationTranslationScale=a;S.fromRotationTranslationScaleOrigin=d;S.fromScaling=I;S.fromTranslation=u;S.fromXRotation=t;S.fromYRotation=q;
S.fromZRotation=x;S.frustum=c;S.getRotation=A;S.getScaling=m;S.getTranslation=h;S.identity=P;S.invert=M;S.lookAt=B;S.mat4=n;S.mul=D;S.multiply=D;S.multiplyScalar=Y;S.multiplyScalarAndAdd=ba;S.ortho=z;S.perspective=g;S.perspectiveFromFieldOfView=C;S.rotate=l;S.rotateX=f;S.rotateY=w;S.rotateZ=r;S.scale=b;S.set=F;S.str=O;S.sub=V;S.subtract=V;S.targetTo=H;S.translate=v;S.transpose=L})},"esri/chunks/pe":function(){define("require exports ./_rollupPluginBabelHelpers ../core/has ../core/promiseUtils ../assets".split(" "),
function(S,n,G,Q,F,P){function L(){return!!n._pe}function M(){return!!Q("esri-wasm")}function W(){return f?f:f=F.create((r,u)=>{(new Promise(function(I,E){S(["./pe-wasm"],I,E)})).then(function(I){return I.peWasm}).then(({default:I})=>{I({locateFile:E=>P.getAssetUrl(`esri/geometry/support/${E}`),onAbort:E=>{u(Error(E))}}).then(E=>{K(E);r()})})})}function K(r){function u(t,q,x){t[q]=x(t[q])}n._pe=r;n.PeDefs.init();n.PeGTlistExtended.init();n.PeNotationMgrs.init();n.PeNotationUtm.init();n.PePCSInfo.init();
n.PeGCSExtent=function(t){function q(){return t.apply(this,arguments)||this}G._inheritsLoose(q,t);q.prototype.destroy=function(){n._pe.destroy(this)};return q}(n._pe.PeGCSExtent);r=[n._pe.PeDatum,n._pe.PeGeogcs,n._pe.PeGeogtran,n._pe.PeObject,n._pe.PeParameter,n._pe.PePrimem,n._pe.PeProjcs,n._pe.PeSpheroid,n._pe.PeUnit];for(var I of r)u(I.prototype,"getName",t=>function(){return t.call(this,Array(n.PeDefs.PE_NAME_MAX))});for(const t of[n._pe.PeGeogtran,n._pe.PeProjcs])u(t.prototype,"getParameters",
q=>function(){const x=Array(n.PeDefs.PE_PARM_MAX);let J=q.call(this);for(let p=0;p<x.length;p++){const h=n._pe.getValue(J,"*");x[p]=h?n._pe.wrapPointer(h,n._pe.PeParameter):null;J+=Int32Array.BYTES_PER_ELEMENT}return x});u(n._pe.PeHorizon.prototype,"getCoord",t=>function(){const q=this.getSize();if(!q)return null;const x=[],J=t.call(this);l(x,q,J);return x});u(n._pe.PeGTlistExtendedEntry.prototype,"getEntries",t=>{const q=n._pe._pe_getPeGTlistExtendedGTsSize();return function(){let x=null;var J=t.call(this);
if(!n._pe.compare(J,n._pe.NULL)){x=[J];const p=this.getSteps();if(1<p){J=n._pe.getPointer(J);for(let h=1;h<p;h++)x.push(n._pe.wrapPointer(J+q*h,n._pe.PeGTlistExtendedGTs))}}return x}});const E=n._pe._pe_getPeHorizonSize();I=t=>function(){let q=this._cache;q||(this._cache=q=new Map);if(q.has(t))return q.get(t);let x=null;var J=t.call(this);if(!n._pe.compare(J,n._pe.NULL)){x=[J];const p=J.getNump();if(1<p){J=n._pe.getPointer(J);for(let h=1;h<p;h++)x.push(n._pe.wrapPointer(J+E*h,n._pe.PeHorizon))}}q.set(t,
x);return x};u(n._pe.PeProjcs.prototype,"horizonGcsGenerate",I);u(n._pe.PeProjcs.prototype,"horizonPcsGenerate",I);n._pe.PeObject.prototype.toString=function(t=n.PeDefs.PE_STR_OPTS_NONE){n._pe.ensureCache.prepare();const q=n._pe.getPointer(this),x=n._pe.ensureInt8(Array(n.PeDefs.PE_BUFFER_MAX));return n._pe.UTF8ToString(n._pe._pe_object_to_string_ext(q,t,x))}}function D(r){if(r){var u=n._pe.getClass(r);u&&(u=n._pe.getCache(u))&&(r=n._pe.getPointer(r))&&delete u[r]}}function v(r,u){const I=[];u=Array(u);
for(let E=0;E<r;E++)I.push(n._pe.ensureInt8(u));return I}function b(r){let u;Array.isArray(r[0])?(u=[],r.forEach(I=>{u.push(I[0],I[1])})):u=r;return u}function l(r,u,I,E=!1){if(E)for(E=0;E<2*u;E++)r[E]=n._pe.getValue(I+E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===r.length;for(let t=0;t<u;t++)E&&(r[t]=Array(2)),r[t][0]=n._pe.getValue(I,"double"),r[t][1]=n._pe.getValue(I+Float64Array.BYTES_PER_ELEMENT,"double"),I+=2*Float64Array.BYTES_PER_ELEMENT}}let f;n._pe=null;(function(r){function u(t,
q,x){n._pe.ensureCache.prepare();var J=b(x);const p=x===J;J=n._pe.ensureFloat64(J);(t=n._pe._pe_geog_to_proj(n._pe.getPointer(t),q,J))&&l(x,q,J,p);return t}function I(t,q,x){return E(t,q,x,0)}function E(t,q,x,J){n._pe.ensureCache.prepare();var p=b(x);const h=x===p;p=n._pe.ensureFloat64(p);(t=n._pe._pe_proj_to_geog_center(n._pe.getPointer(t),q,p,J))&&l(x,q,p,h);return t}r.geogToProj=u;r.projGeog=function(t,q,x,J){switch(J){case n.PeDefs.PE_TRANSFORM_P_TO_G:return I(t,q,x);case n.PeDefs.PE_TRANSFORM_G_TO_P:return u(t,
q,x)}return 0};r.projToGeog=I;r.projToGeogCenter=E})(n.PeCSTransformations||(n.PeCSTransformations={}));(function(r){r.init=function(){r.PE_BUFFER_MAX=n._pe.PeDefs.prototype.PE_BUFFER_MAX;r.PE_NAME_MAX=n._pe.PeDefs.prototype.PE_NAME_MAX;r.PE_MGRS_MAX=n._pe.PeDefs.prototype.PE_MGRS_MAX;r.PE_USNG_MAX=n._pe.PeDefs.prototype.PE_USNG_MAX;r.PE_DD_MAX=n._pe.PeDefs.prototype.PE_DD_MAX;r.PE_DDM_MAX=n._pe.PeDefs.prototype.PE_DDM_MAX;r.PE_DMS_MAX=n._pe.PeDefs.prototype.PE_DMS_MAX;r.PE_UTM_MAX=n._pe.PeDefs.prototype.PE_UTM_MAX;
r.PE_PARM_MAX=n._pe.PeDefs.prototype.PE_PARM_MAX;r.PE_TYPE_NONE=n._pe.PeDefs.prototype.PE_TYPE_NONE;r.PE_TYPE_GEOGCS=n._pe.PeDefs.prototype.PE_TYPE_GEOGCS;r.PE_TYPE_PROJCS=n._pe.PeDefs.prototype.PE_TYPE_PROJCS;r.PE_TYPE_GEOGTRAN=n._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;r.PE_TYPE_COORDSYS=n._pe.PeDefs.prototype.PE_TYPE_COORDSYS;r.PE_TYPE_UNIT=n._pe.PeDefs.prototype.PE_TYPE_UNIT;r.PE_STR_OPTS_NONE=n._pe.PeDefs.prototype.PE_STR_OPTS_NONE;r.PE_STR_AUTH_NONE=n._pe.PeDefs.prototype.PE_STR_AUTH_NONE;r.PE_STR_AUTH_TOP=
n._pe.PeDefs.prototype.PE_STR_AUTH_TOP;r.PE_STR_NAME_CANON=n._pe.PeDefs.prototype.PE_STR_NAME_CANON;r.PE_PARM_X0=n._pe.PeDefs.prototype.PE_PARM_X0;r.PE_PARM_ND=n._pe.PeDefs.prototype.PE_PARM_ND;r.PE_TRANSFORM_1_TO_2=n._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;r.PE_TRANSFORM_2_TO_1=n._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;r.PE_TRANSFORM_P_TO_G=n._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;r.PE_TRANSFORM_G_TO_P=n._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;r.PE_HORIZON_RECT=n._pe.PeDefs.prototype.PE_HORIZON_RECT;
r.PE_HORIZON_POLY=n._pe.PeDefs.prototype.PE_HORIZON_POLY;r.PE_HORIZON_LINE=n._pe.PeDefs.prototype.PE_HORIZON_LINE;r.PE_HORIZON_DELTA=n._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(n.PeDefs||(n.PeDefs={}));(function(r){function u(q,x){let J=null,p=E[q];p||(p={},E[q]=p);p.hasOwnProperty(String(x))?J=p[x]:(q=n._pe.PeFactory.prototype.factoryByType(q,x),n._pe.compare(q,n._pe.NULL)||(J=q,p[x]=J));return J=I(J)}function I(q){if(q){const x=q.getType();switch(x){case n.PeDefs.PE_TYPE_GEOGCS:q=n._pe.castObject(q,
n._pe.PeGeogcs);break;case n.PeDefs.PE_TYPE_PROJCS:q=n._pe.castObject(q,n._pe.PeProjcs);break;case n.PeDefs.PE_TYPE_GEOGTRAN:q=n._pe.castObject(q,n._pe.PeGeogtran);break;default:x&n.PeDefs.PE_TYPE_UNIT&&(q=n._pe.castObject(q,n._pe.PeUnit))}}return q}const E={},t={};r.initialize=function(){n._pe.PeFactory.prototype.initialize(null)};r.coordsys=function(q){return u(n.PeDefs.PE_TYPE_COORDSYS,q)};r.factoryByType=u;r.fromString=function(q,x){let J=null,p=t[q];p||(p={},t[q]=p);p.hasOwnProperty(x)?J=p[x]:
(q=n._pe.PeFactory.prototype.fromString(q,x),n._pe.compare(q,n._pe.NULL)||(J=q,p[x]=J));return J=I(J)};r.geogcs=function(q){return u(n.PeDefs.PE_TYPE_GEOGCS,q)};r.geogtran=function(q){return u(n.PeDefs.PE_TYPE_GEOGTRAN,q)};r.getCode=function(q){return n._pe.PeFactory.prototype.getCode(q)};r.projcs=function(q){return u(n.PeDefs.PE_TYPE_PROJCS,q)};r.unit=function(q){return u(n.PeDefs.PE_TYPE_UNIT,q)}})(n.PeFactory||(n.PeFactory={}));n.PeGCSExtent=null;(function(r){let u;r.init=function(){r.PE_GTLIST_OPTS_COMMON=
n._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;u=n._pe._pe_getPeGTlistExtendedEntrySize()};r.getGTlist=function(I,E,t,q,x,J){let p=null;const h=new n._pe.PeInteger(J);try{const m=n._pe.PeGTlistExtended.prototype.getGTlist(I,E,t,q,x,h);if(J=h.val)if(p=[m],1<J){const A=n._pe.getPointer(m);for(I=1;I<J;I++)p.push(n._pe.wrapPointer(A+u*I,n._pe.PeGTlistExtendedEntry))}}finally{n._pe.destroy(h)}return p}})(n.PeGTlistExtended||(n.PeGTlistExtended={}));(function(r){r.destroy=function(u){if(u&&u.length){for(const I of u)D(I),
I.getEntries().forEach(E=>{D(E);E=E.getGeogtran();D(E);E.getParameters().forEach(D);[E.getGeogcs1(),E.getGeogcs2()].forEach(t=>{D(t);const q=t.getDatum();D(q);D(q.getSpheroid());D(t.getPrimem());D(t.getUnit())})});n._pe.PeGTlistExtendedEntry.prototype.Delete(u[0])}}})(n.PeGTlistExtendedEntry||(n.PeGTlistExtendedEntry={}));(function(r){r.geogToGeog=function(u,I,E,t,q){n._pe.ensureCache.prepare();var x=b(E);const J=E===x;x=n._pe.ensureFloat64(x);let p=0;t&&(p=n._pe.ensureFloat64(t));(u=n._pe._pe_geog_to_geog(n._pe.getPointer(u),
I,x,p,q))&&l(E,I,x,J);return u}})(n.PeGTTransformations||(n.PeGTTransformations={}));(function(r){function u(E,t,q,x,J,p){n._pe.ensureCache.prepare();switch(E){case "dd":var h=n._pe._pe_geog_to_dd;var m=n.PeDefs.PE_DD_MAX;break;case "ddm":h=n._pe._pe_geog_to_ddm;m=n.PeDefs.PE_DDM_MAX;break;case "dms":h=n._pe._pe_geog_to_dms,m=n.PeDefs.PE_DMS_MAX}E=0;t&&(E=n._pe.getPointer(t));t=b(x);t=n._pe.ensureFloat64(t);m=v(q,m);x=n._pe.ensureInt32(m);if(J=h(E,q,t,J,x))for(h=0;h<q;h++)p[h]=n._pe.UTF8ToString(m[h]);
return J}function I(E,t,q,x,J){n._pe.ensureCache.prepare();switch(E){case "dd":var p=n._pe._pe_dd_to_geog;break;case "ddm":p=n._pe._pe_ddm_to_geog;break;case "dms":p=n._pe._pe_dms_to_geog}E=0;t&&(E=n._pe.getPointer(t));t=x.map(h=>n._pe.ensureString(h));x=n._pe.ensureInt32(t);t=n._pe.ensureFloat64(Array(2*q));(p=p(E,q,x,t))&&l(J,q,t);return p}r.geog_to_dms=function(E,t,q,x,J){return u("dms",E,t,q,x,J)};r.dms_to_geog=function(E,t,q,x){return I("dms",E,t,q,x)};r.geog_to_ddm=function(E,t,q,x,J){return u("ddm",
E,t,q,x,J)};r.ddm_to_geog=function(E,t,q,x){return I("ddm",E,t,q,x)};r.geog_to_dd=function(E,t,q,x,J){return u("dd",E,t,q,x,J)};r.dd_to_geog=function(E,t,q,x){return I("dd",E,t,q,x)}})(n.PeNotationDms||(n.PeNotationDms={}));(function(r){r.init=function(){r.PE_MGRS_STYLE_NEW=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;r.PE_MGRS_STYLE_OLD=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;r.PE_MGRS_STYLE_AUTO=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;r.PE_MGRS_180_ZONE_1_PLUS=n._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
r.PE_MGRS_ADD_SPACES=n._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};r.geog_to_mgrs_extended=function(u,I,E,t,q,x,J){n._pe.ensureCache.prepare();let p=0;u&&(p=n._pe.getPointer(u));u=b(E);E=n._pe.ensureFloat64(u);u=v(I,n.PeDefs.PE_MGRS_MAX);const h=n._pe.ensureInt32(u);if(t=n._pe._pe_geog_to_mgrs_extended(p,I,E,t,q,x,h))for(q=0;q<I;q++)J[q]=n._pe.UTF8ToString(u[q]);return t};r.mgrs_to_geog_extended=function(u,I,E,t,q){n._pe.ensureCache.prepare();let x=0;u&&(x=n._pe.getPointer(u));u=E.map(J=>n._pe.ensureString(J));
E=n._pe.ensureInt32(u);u=n._pe.ensureFloat64(Array(2*I));(t=n._pe._pe_mgrs_to_geog_extended(x,I,E,t,u))&&l(q,I,u);return t}})(n.PeNotationMgrs||(n.PeNotationMgrs={}));(function(r){r.geog_to_usng=function(u,I,E,t,q,x,J){n._pe.ensureCache.prepare();let p=0;u&&(p=n._pe.getPointer(u));u=b(E);E=n._pe.ensureFloat64(u);u=v(I,n.PeDefs.PE_MGRS_MAX);const h=n._pe.ensureInt32(u);if(t=n._pe._pe_geog_to_usng(p,I,E,t,q,x,h))for(q=0;q<I;q++)J[q]=n._pe.UTF8ToString(u[q]);return t};r.usng_to_geog=function(u,I,E,t){n._pe.ensureCache.prepare();
var q=0;u&&(q=n._pe.getPointer(u));u=E.map(x=>n._pe.ensureString(x));E=n._pe.ensureInt32(u);u=n._pe.ensureFloat64(Array(2*I));(q=n._pe._pe_usng_to_geog(q,I,E,u))&&l(t,I,u);return q}})(n.PeNotationUsng||(n.PeNotationUsng={}));(function(r){r.init=function(){r.PE_UTM_OPTS_NONE=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;r.PE_UTM_OPTS_ADD_SPACES=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;r.PE_UTM_OPTS_NS=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};r.geog_to_utm=function(u,I,E,t,q){n._pe.ensureCache.prepare();
var x=0;u&&(x=n._pe.getPointer(u));u=b(E);E=n._pe.ensureFloat64(u);u=v(I,n.PeDefs.PE_UTM_MAX);const J=n._pe.ensureInt32(u);if(t=n._pe._pe_geog_to_utm(x,I,E,t,J))for(x=0;x<I;x++)q[x]=n._pe.UTF8ToString(u[x]);return t};r.utm_to_geog=function(u,I,E,t,q){n._pe.ensureCache.prepare();let x=0;u&&(x=n._pe.getPointer(u));u=E.map(J=>n._pe.ensureString(J));E=n._pe.ensureInt32(u);u=n._pe.ensureFloat64(Array(2*I));(t=n._pe._pe_utm_to_geog(x,I,E,t,u))&&l(q,I,u);return t}})(n.PeNotationUtm||(n.PeNotationUtm={}));
(function(r){const u=new Map;r.init=function(){r.PE_PCSINFO_OPTION_NONE=n._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;r.PE_PCSINFO_OPTION_DOMAIN=n._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;r.PE_POLE_OUTSIDE_BOUNDARY=n._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;r.PE_POLE_POINT=n._pe.PePCSInfo.prototype.PE_POLE_POINT};r.generate=function(I,E=r.PE_PCSINFO_OPTION_DOMAIN){let t,q;u.has(I)&&(q=u.get(I),q[E]&&(t=q[E]));t||(t=n._pe.PePCSInfo.prototype.generate(I,E),q||(q=[],u.set(I,q)),q[E]=
t);return t}})(n.PePCSInfo||(n.PePCSInfo={}));(function(r){r.version_string=function(){return n._pe.PeVersion.prototype.version_string()}})(n.PeVersion||(n.PeVersion={}));var w=Object.freeze({__proto__:null,get _pe(){return n._pe},isLoaded:L,isSupported:M,load:W,get PeCSTransformations(){return n.PeCSTransformations},get PeDefs(){return n.PeDefs},get PeFactory(){return n.PeFactory},get PeGCSExtent(){return n.PeGCSExtent},get PeGTlistExtended(){return n.PeGTlistExtended},get PeGTlistExtendedEntry(){return n.PeGTlistExtendedEntry},
get PeGTTransformations(){return n.PeGTTransformations},get PeNotationDms(){return n.PeNotationDms},get PeNotationMgrs(){return n.PeNotationMgrs},get PeNotationUsng(){return n.PeNotationUsng},get PeNotationUtm(){return n.PeNotationUtm},get PePCSInfo(){return n.PePCSInfo},get PeVersion(){return n.PeVersion},_init:K});n._init=K;n.isLoaded=L;n.isSupported=M;n.load=W;n.pe=w})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(S,n){const G=Math.PI/180;var Q=
n.earth.radius;const F=n.earth.eccentricitySquared;Q={a1:Q*F,a2:Q*F*Q*F,a3:Q*F*F/2,a4:Q*F*Q*F*2.5,a5:Q*F+Q*F*F/2,a6:1-F};n={4326:{a:n.earth.radius,f:n.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:n.moon.radius,f:n.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:n.mars.radius,f:n.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:n.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};S.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;S.earthEllipsoidConstants=Q;S.spheroids=n;S.toRadians=G;Object.defineProperty(S,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(S){return function(){function n(Q){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(Q&&Q.steps)for(const F of Q.steps)F instanceof S?this.steps.push(F):this.steps.push(new S({wkid:F.wkid,wkt:F.wkt,isInverse:F.isInverse}))}n.cacheKey=function(Q,F){return[void 0!==Q.wkid&&null!==Q.wkid?Q.wkid.toString():"-1",void 0!==Q.wkt&&null!==
Q.wkt?Q.wkt.toString():"",void 0!==F.wkid&&null!==F.wkid?F.wkid.toString():"-1",void 0!==F.wkt&&null!==F.wkt?F.wkt.toString():""].join()};n.fromGE=function(Q){const F=new n;let P="";for(const L of Q.steps)Q=S.fromGE(L),F.steps.push(Q),P+=Q.uid.toString()+",";F._cached_projection={};F._gtlistentry=null;F._chain=P;return F};var G=n.prototype;G.getInverse=function(){const Q=new n;Q.steps=[];for(let F=this.steps.length-1;0<=F;F--)Q.steps.push(this.steps[F].getInverse());return Q};G.getGTListEntry=function(){let Q=
"";for(const F of this.steps)Q+=F.uid.toString()+",";Q!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Q);return this._gtlistentry};G.assignCachedGe=function(Q,F,P){this._cached_projection[n.cacheKey(Q,F)]=P};G.getCachedGeTransformation=function(Q,F){let P="";for(const L of this.steps)P+=L.uid.toString()+",";P!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=P);Q=this._cached_projection[n.cacheKey(Q,F)];return void 0===Q?null:Q};return n}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(S){let n=0;return function(){function G(Q=null){this.uid=n++;Q?(this._wkt=void 0!==Q.wkt?Q.wkt:null,this._wkid=void 0!==Q.wkid?Q.wkid:-1,this._isInverse=void 0!==Q.isInverse?!0===Q.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}G.fromGE=function(Q){const F=new G;F._wkt=Q.wkt;F._wkid=Q.wkid;F._isInverse=Q.isInverse;return F};G.prototype.getInverse=function(){const Q=
new G;Q._wkt=this.wkt;Q._wkid=this._wkid;Q._isInverse=!this.isInverse;return Q};S._createClass(G,[{key:"wkt",get:function(){return this._wkt},set:function(Q){this._wkt=Q;this.uid=n++}},{key:"wkid",get:function(){return this._wkid},set:function(Q){this._wkid=Q;this.uid=n++}},{key:"isInverse",get:function(){return this._isInverse},set:function(Q){this._isInverse=Q;this.uid=n++}}]);return G}()})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../core/maybe ../../../geometry/Point ../../../geometry ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper".split(" "),
function(S,n,G,Q,F,P){function L(K,D){if(!M.has(K))return null;K=M.get(K);return null==K[D]?null:K[D]}const M=new Map,W=new F;S.decreaseRefCount=function(K,D,v){if(!M.has(K))return null==D?W.decreaseRefCount(K,v):0;const b=M.get(K);if(null==b[D])return W.decreaseRefCount(K,v);D=b[D].cache;if(D.has(v)){K=D.get(v);K.refCount--;if(0===K.refCount){D.delete(v);for(D=0;D<b.length;D++)b[D]&&b[D].cache.has(v)&&b[D].cache.delete(v);K.controller&&K.controller.abort()}return K.refCount}return 0};S.deleteBlock=
function(K,D,v){if(M.has(K)){var b=M.get(K);null==b[D]?W.deleteBlock(K,v):b[D].cache.delete(v)}else null==D&&W.deleteBlock(K,v)};S.deleteRaster=function(K){M.delete(K)};S.getBlock=function(K,D,v){if(!M.has(K))return null==D?W.getBlock(K,v):null;var b=M.get(K);if(null==b[D]){for(D=0;D<b.length;D++)if(b[D]&&b[D].cache.has(v))return v=b[D].cache.get(v),v.refCount++,v.block;return W.getBlock(K,v)}K=b[D].cache;if(K.has(v))return v=K.get(v),v.refCount++,v.block;for(let l=0;l<b.length;l++)if(l!==D&&b[l]&&
b[l]&&b[l].cache.has(v))return b=b[l].cache.get(v),b.refCount++,K.set(v,b),b.block;return null};S.getRasterId=function(K,D){return null==D?K:`${K}?sliceId=${D}`};S.putBlock=function(K,D,v,b,l=null){if(M.has(K)){var f=M.get(K);if(null==f[D])W.putBlock(K,v,b,l);else{var w={refCount:1,block:b,isResolved:!1,isRejected:!1,controller:l};b.then(()=>w.isResolved=!0).catch(()=>w.isRejected=!0);f[D].cache.set(v,w)}}else null==D&&W.putBlock(K,v,b,l)};S.register=function(K,D){D={extent:null,rasterInfo:D,cache:new Map};
if(M.has(K))return K=M.get(K),K.push(D),K.length-1;M.set(K,[D]);return 0};S.unregister=function(K,D){M.has(K)&&(M.get(K)[D]=null)};S.update=function(K,D,v,b,l,f,w=null){K=L(K,D);D=K.extent;const {cache:r,rasterInfo:u}=K;if(!D||D.xmin!==v.xmin||D.xmax!==v.xmax||D.ymin!==v.ymin||D.ymax!==v.ymax){D=v.clone().normalize();var {spatialReference:I,transform:E}=u,t=new Set;for(let m=0;m<D.length;m++){var q=D[m];if(q.xmax-q.xmin<=b||q.ymax-q.ymin<=b)continue;var x=P.projectExtent(q,I,w);n.isSome(E)&&(x=E.inverseTransform(x));
var J=new G({x:b,y:b,spatialReference:q.spatialReference});if(null===l&&(l=P.projectResolution(J,I,q,w),!l))return;const {pyramidLevel:A,pyramidResolution:a,excessiveReading:d}=P.snapPyramid(l,u,f||"closest");if(d)return;({storageInfo:q}=u);var {origin:p}=q;J=Math.max(0,Math.floor((x.xmin-p.x)/a.x));p=Math.max(0,Math.floor((p.y-x.ymax)/a.y));const k=0<A?q.pyramidBlockWidth:q.blockWidth,c=0<A?q.pyramidBlockHeight:q.blockHeight;q=Math.max(0,Math.floor(J/k)-1);var h=Math.max(0,Math.floor(p/c)-1);J=Math.floor((J+
Math.ceil((x.xmax-x.xmin)/a.x-.1)-1)/k)+1;x=Math.floor((p+Math.ceil((x.ymax-x.ymin)/a.y-.1)-1)/c)+1;for(p=h;p<=x;p++)for(h=q;h<=J;h++)t.add(`${A}/${p}/${h}`)}r.forEach((m,A)=>{t.has(A)||(m=r.get(A),(null==m||m.isResolved||m.isRejected)&&r.delete(A))});K.extent={xmin:v.xmin,ymin:v.ymin,xmax:v.xmax,ymax:v.ymax}}};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function S(G=15E3,Q=5E3){this._timer=
null;this._cachedBlocks=new Map;this._size=-1;this._duration=G;this._interval=Math.min(G,Q)}var n=S.prototype;n.decreaseRefCount=function(G,Q){G=G+"/"+Q;Q=this._cachedBlocks;if(Q.has(G)){const F=Q.get(G);F.refCount--;0>=F.refCount&&(Q.delete(G),F.controller&&F.controller.abort());return F.refCount}return 0};n.getBlock=function(G,Q){G=G+"/"+Q;Q=this._cachedBlocks;if(Q.has(G)){const F=Q.get(G);F.ts=Date.now();F.refCount++;Q.delete(G);Q.set(G,F);return F.block}return null};n.putBlock=function(G,Q,F,
P=null){const L=this._cachedBlocks;G=G+"/"+Q;L.has(G)?(F=L.get(G),F.ts=Date.now(),F.refCount++):L.set(G,{block:F,ts:Date.now(),refCount:1,controller:P});this.trim();this.updateTimer()};n.deleteBlock=function(G,Q){const F=this._cachedBlocks;G=G+"/"+Q;F.has(G)&&F.delete(G)};n.updateMaxSize=function(G){this._size=G;this.trim()};n.empty=function(){this._cachedBlocks.clear();this.clearTimer()};n.getCurrentSize=function(){return this._cachedBlocks.size};n.updateTimer=function(){if(null==this._timer){var G=
this._cachedBlocks;this._timer=setInterval(()=>{const Q=Array.from(G),F=Date.now();for(let P=0;P<Q.length;P++)if(Q[P][1].ts<=F-this._duration)G.delete(Q[P][0]);else break;0===G.size&&this.clearTimer()},this._interval)}};n.trim=function(){const G=this._cachedBlocks;if(!(-1===this._size||this._size>=G.size)){var Q=Array.from(G);for(let F=0;F<Q.length-this._size;F++)G.delete(Q[F][0])}};n.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return S}()})},"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"./byteStreamUtils"],function(S,n){function G(Q){var F=Q.fields;Q=Q.records;const P=F.some(D=>"oid"===D.name.toLowerCase())?"OBJECTID":"OID";F=[{name:P,type:"esriFieldTypeOID",alias:"OID"}].concat(F.map(D=>({name:D.name,type:"esriFieldType"+D.typeName,alias:D.name})));const L=F.map(D=>D.name),M=[];let W=0,K=0;Q.forEach(D=>{const v={};v[P]=W++;for(K=1;K<L.length;K++)v[L[K]]=D[K-1];M.push({attributes:v})});return{displayFieldName:"",fields:F,features:M}}return function(){function Q(){}Q.parse=function(F){var P=
new DataView(F),L=P.getUint8(0)&3;if(3!==L)return{header:{version:L},recordSet:null};const M=P.getUint32(4,!0);var W=P.getUint16(8,!0);const K=P.getUint16(10,!0);W={version:L,recordCount:M,headerByteCount:W,recordByteCount:K};let D=32;const v=[],b=[];if(3===L){for(;13!==P.getUint8(D);)L=String.fromCharCode(P.getUint8(D+11)).trim(),v.push({name:n.bytesToUTF8(new Uint8Array(F,D,11)),type:L,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(L)],length:P.getUint8(D+
16)}),D+=32;D+=1;if(0<v.length)for(;b.length<M&&F.byteLength-D>K;){const l=[];32===P.getUint8(D)?(D+=1,v.forEach(f=>{if("C"===f.type)l.push(n.bytesToUTF8(new Uint8Array(F,D,f.length)).trim());else if("N"===f.type)l.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(F,D,f.length)).trim(),10));else if("F"===f.type)l.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(F,D,f.length)).trim()));else if("D"===f.type){const w=String.fromCharCode.apply(null,new Uint8Array(F,D,f.length)).trim();
l.push(new Date(parseInt(w.substring(0,4),10),parseInt(w.substring(4,6),10)-1,parseInt(w.substring(6,8),10)))}D+=f.length}),b.push(l)):D+=K}}P=G({fields:v,records:b});return{header:W,fields:v,records:b,recordSet:P}};S._createClass(Q,null,[{key:"supportedVersions",get:function(){return[5]}}]);return Q}()})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ./BaseRaster ./InMemoryRaster ../rasterTransforms/PolynomialTransform ./pamParser".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x){G=function(J){function p(){return J.apply(this,arguments)||this}S._inheritsLoose(p,J);var h=p.prototype;h.open=async function(m){await this.init();var A=await this._fetchData(m);let {spatialReference:a,statistics:d,histograms:k,transform:c}=await this._fetchAuxiliaryData(m);(m=!a)&&(a=new f({wkid:3857}));null!=k&&k.length&&null==d&&(d=I.estimateStatisticsFromHistograms(k));const {width:g,height:C}=A;let z=new w({xmin:-.5,ymin:.5-C,xmax:g-.5,
ymax:.5,spatialReference:a});const B=c?c.forwardTransform(z):z;var H=!0;c&&(H=(H=c.forwardCoefficients)&&0===H[1]&&0===H[2])&&(c=null,z=B);A=new t({data:{extent:B,nativeExtent:z,transform:c,pixelBlock:A,statistics:d,histograms:k,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:m}});await A.open();this._set("rasterInfo",A.rasterInfo);this._inMemoryRaster=A};h.fetchRawTile=function(m,A,a,d={}){return this._inMemoryRaster.fetchRawTile(m,A,a,d)};h._fetchData=async function(m){({data:m}=await this.request(this.url,
{responseType:"array-buffer",signal:null==m?void 0:m.signal}));const A=u.getFormat(m).toUpperCase();if("JPG"===A||"PNG"===A||"GIF"===A||"BMP"===A)this._set("datasetFormat",A);else throw new K("image-aux-raster:open","the data is not a supported format");return await this.decodePixelBlock(m,{format:"jpg",width:1,height:1,useCanvas:!0})};h._fetchAuxiliaryData=async function(m){var A,a;m=Q.unwrap(null==m?void 0:m.signal);var d=null!=(A=this.ioConfig.skipExtensions)?A:[];A=-1<d.indexOf("aux.xml")?null:
this.request(this.url+".aux.xml",{responseType:"xml",signal:m});var k=this.datasetFormat;k="JPG"===k?"jgw":"PNG"===k?"pgw":"BMP"===k?"bpw":null;d=-1<d.indexOf(k)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+k,{responseType:"text",signal:m});d=await l.eachAlways([A,d]);if(null!=m&&m.aborted)throw l.createAbortError();m=x.parsePAMInfo(null==(a=d[0].value)?void 0:a.data);m.transform||(a=d[1].value?d[1].value.data.split("\n").slice(0,6).map(c=>Number(c)):null,m.transform=6===(null==
a?void 0:a.length)?new q({forwardCoefficients:[a[4],a[5],a[0],-a[1],a[2],-a[3]]}):null);return m};return p}(E);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],G)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry ../RasterInfo ../rasterFunctions/pixelUtils ./BaseRaster".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E){G=function(t){function q(){var J=t.apply(this,arguments)||this;J.datasetFormat="MEMORY";return J}S._inheritsLoose(q,t);var x=q.prototype;x.open=async function(J){var p;await this.init();const {pixelBlock:h,statistics:m,histograms:A,name:a,keyProperties:d,nativeExtent:k,transform:c}=this.data,{width:g,height:C,pixelType:z}=h,B=this.data.extent||new w({xmin:-.5,ymin:.5,xmax:g-.5,ymax:C-.5,spatialReference:new f({wkid:3857})}),H=null!=(p=this.data.isPseudoSpatialReference)?
p:!this.data.extent;p=new u({width:g,height:C,pixelType:z,extent:B,nativeExtent:k,transform:c,pixelSize:{x:B.width/g,y:B.height/C},spatialReference:B.spatialReference,bandCount:3,keyProperties:d||{},statistics:m,isPseudoSpatialReference:H,histograms:A});this.createRemoteDatasetStorageInfo(p,512,512);this._set("rasterInfo",p);this.updateTileInfo();await this._buildInMemoryRaster(h,{width:512,height:512},J);this.datasetName=a;this.url="/InMemory/"+a};x.fetchRawTile=function(J,p,h,m){J=this._pixelBlockTiles.get(`${J}/${p}/${h}`);
return l.resolve(J)};x._buildInMemoryRaster=async function(J,p,h){var m=this.rasterInfo.storageInfo.maximumPyramidLevel;const A=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:J,tileSize:p,maximumPyramidLevel:m},h):l.resolve(I.split(J,p,m));p=Q.isSome(this.rasterInfo.statistics);m=Q.isSome(this.rasterInfo.histograms);J=p&&m?l.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:J},h):l.resolve(I.estimateStatisticsHistograms(J));
J=await l.eachAlways([A,J]);if(!J[0].value&&J[1].value)throw new K("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=J[0].value;if(!p){var a;this.rasterInfo.statistics=null==(a=J[1].value)?void 0:a.statistics}if(m){var d;this.rasterInfo.histograms=null==(d=J[1].value)?void 0:d.histograms}};return q}(E);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);n.__decorate([L.property()],G.prototype,"data",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],
G)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../geometry/Point ../../../geometry/Extent ../../../geometry".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f){function w(u,I,E){const {x:t,y:q}=I;if(2>E)return{x:u[0]+t*u[2]+q*u[4],y:u[1]+t*u[3]+q*u[5]};if(2===E){I=t*t;E=q*q;var x=t*q;return{x:u[0]+t*u[2]+q*u[4]+I*u[6]+x*u[8]+E*u[10],y:u[1]+t*u[3]+q*u[5]+I*u[7]+x*u[9]+E*u[11]}}I=t*t;E=q*q;x=t*q;const J=I*t,p=I*q,h=t*E,m=q*E;return{x:u[0]+t*u[2]+q*u[4]+I*u[6]+x*u[8]+E*u[10]+J*u[12]+p*u[14]+h*u[16]+m*u[18],y:u[1]+t*u[3]+q*u[5]+I*u[7]+x*u[9]+E*u[11]+J*u[13]+p*u[15]+h*u[17]+m*u[19]}}function r(u,I,E){const {xmin:t,ymin:q,
xmax:x,ymax:J,spatialReference:p}=I;I=[];if(2>E)I.push({x:t,y:J}),I.push({x,y:J}),I.push({x:t,y:q}),I.push({x,y:q});else{var h=10;for(var m=0;m<h;m++)I.push({x:t,y:q+(J-q)*m/(h-1)}),I.push({x,y:q+(J-q)*m/(h-1)});h=8;for(m=1;m<=h;m++)I.push({x:t+(x-t)*m/h,y:q}),I.push({x:t+(x-t)*m/h,y:J})}I=I.map(A=>w(u,A,E));h=I.map(A=>A.x);I=I.map(A=>A.y);return new l({xmin:Math.min.apply(null,h),xmax:Math.max.apply(null,h),ymin:Math.min.apply(null,I),ymax:Math.max.apply(null,I),spatialReference:p})}G=function(u){function I(){var t=
u.apply(this,arguments)||this;t.polynomialOrder=1;return t}S._inheritsLoose(I,u);var E=I.prototype;E.forwardTransform=function(t){if("point"===t.type){const q=w(this.forwardCoefficients,t,this.polynomialOrder);return new b({x:q.x,y:q.y,spatialReference:t.spatialReference})}return r(this.forwardCoefficients,t,this.polynomialOrder)};E.inverseTransform=function(t){if("point"===t.type){const q=w(this.inverseCoefficients,t,this.polynomialOrder);return new b({x:q.x,y:q.y,spatialReference:t.spatialReference})}return r(this.inverseCoefficients,
t,this.polynomialOrder)};S._createClass(I,[{key:"inverseCoefficients",get:function(){var t=this._get("inverseCoefficients"),q=this._get("forwardCoefficients");if(!t&&q&&2>this.polynomialOrder){{const [x,J,p,h,m,A]=q;t=p*A-m*h;q=m*h-p*A;t=[(m*J-x*A)/t,(p*J-x*h)/q,A/t,h/q,-m/t,-p/q]}}return t},set:function(t){this._set("inverseCoefficients",t)}}]);return I}(v.JSONSupport);n.__decorate([P.property({json:{write:!0}})],G.prototype,"polynomialOrder",void 0);n.__decorate([P.property({json:{write:!0}})],
G.prototype,"forwardCoefficients",void 0);n.__decorate([P.property({dependsOn:["forwardCoefficients"],json:{write:!0}})],G.prototype,"inverseCoefficients",null);return G=n.__decorate([M.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],G)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry/SpatialReference","../../../geometry","./xmlUtilities","../rasterTransforms/PolynomialTransform"],function(S,n,G,Q,F){function P(K,D){if(!K||!D)return null;
const v=[];for(let b=0;b<K.length;b++)v.push(K[b]),v.push(D[b]);return v}function L(K){var D,v=Q.getElement(K,"GeodataXform");K=Q.getElementNumericValue(v,"SpatialReference/WKID")||Q.getElementValue(v,"SpatialReference/WKT");K=W(K);if("typens:PolynomialXform"!==v.getAttribute("xsi:type"))return{spatialReference:K,transform:null};var b=null!=(D=Q.getElementNumericValue(v,"PolynomialOrder"))?D:1,l=Q.getElementNumericValues(v,"CoeffX/Double");const f=Q.getElementNumericValues(v,"CoeffY/Double");D=Q.getElementNumericValues(v,
"InverseCoeffX/Double");v=Q.getElementNumericValues(v,"InverseCoeffY/Double");l=P(l,f);v=P(D,v);b=new F({polynomialOrder:b,forwardCoefficients:l,inverseCoefficients:v});return{spatialReference:K,transform:b}}function M(K){var D;const v=Q.getElementNumericValue(K,"NoDataValue");var b=Q.getElement(K,"Histograms/HistItem");const l=Q.getElementNumericValue(b,"HistMin"),f=Q.getElementNumericValue(b,"HistMax"),w=Q.getElementNumericValue(b,"BucketCount");b=null==(D=Q.getElementValue(b,"HistCounts"))?void 0:
D.split("|").map(t=>Number(t));let r,u,I,E;Q.getElements(K,"Metadata/MDI").forEach(t=>{var q;const x=Number(null!=(q=t.textContent)?q:t.nodeValue);switch(t.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":r=x;break;case "STATISTICS_MAXIMUM":u=x;break;case "STATISTICS_MEAN":I=x;break;case "STATISTICS_STDDEV":E=x}});K=Q.getElementNumericValue(K,"Metadata/SourceBandIndex");return{noDataValue:v,histogram:null!=b&&b.length&&null!=r&&null!=u?{min:l,max:f,size:w||b.length,counts:b}:null,sourceBandIndex:K,
statistics:null!=r&&null!=u?{min:r,max:u,avg:I,stddev:E}:null}}function W(K){if(!K)return null;var D=Number(K);if(!isNaN(D)&&0!==D)return new n({wkid:D});D=K.replace(/\]/g,"[").replace(/"/g,"").split("[").map(v=>v.trim()).filter(v=>""!==v);D=D[D.length-1].split(",");return"EPSG"!==D[0]||(D=Number(D[1]),isNaN(D)||0===D)?new n({wkt:K}):new n({wkid:D})}S.parsePAMInfo=function(K){var D;if("pamdataset"!==(null==K?void 0:null==(D=K.documentElement.tagName)?void 0:D.toLowerCase()))return{};const v={spatialReference:null,
transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};K.documentElement.childNodes.forEach(b=>{if(1===b.nodeType)if(Q.isSameTagIgnoreNS(b,"SRS"))v.spatialReference||(b=Q.getElementValue(b),v.spatialReference=W(b));else if(Q.isSameTagIgnoreNS(b,"Metadata"))if("xml:ESRI"===b.getAttribute("domain")){const {spatialReference:l,transform:f}=L(b);v.transform=f;v.spatialReference||(v.spatialReference=l)}else Q.getElements(b,"MDI").forEach(l=>v.metadata[l.getAttribute("key")]=Q.getElementValue(l));
else Q.isSameTagIgnoreNS(b,"PAMRasterBand")&&(b=M(b),null!=b.sourceBandIndex&&null==v.rasterBands[b.sourceBandIndex]?v.rasterBands[b.sourceBandIndex]=b:v.rasterBands.push(b))});if(K=v.rasterBands)v.statistics=K[0].statistics?K.map(b=>b.statistics):null,v.histograms=K[0].histogram?K.map(b=>b.histogram):null;return v};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(S){function n(P,L){if(!P||!L)return[];var M=
L;-1<L.indexOf("/")?(M=L.slice(0,L.indexOf("/")),L=L.slice(L.indexOf("/")+1)):L="";const W=[];if(L){P=n(P,M);for(M=0;M<P.length;M++)n(P[M],L).forEach(K=>W.push(K));return W}L=P.getElementsByTagNameNS("*",M);if(!L||0===L.length)return[];for(P=0;P<L.length;P++)W.push(L[P]||L.item[P]);return W}function G(P,L){if(!P||!L)return null;let M=L;-1<L.indexOf("/")?(M=L.slice(0,L.indexOf("/")),L=L.slice(L.indexOf("/")+1)):L="";P=n(P,M);return 0<P.length?L?G(P[0],L):P[0]:null}function Q(P,L=null){if(P=L?G(P,L):
P)if(P=P.textContent||P.nodeValue)return P.trim();return null}function F(P,L){P=n(P,L);L=[];let M;for(let W=0;W<P.length;W++)if(M=P[W].textContent||P[W].nodeValue)M=M.trim(),""!==M&&L.push(M);return L}S.getElement=G;S.getElementNumericValue=function(P,L){P=Q(P,L);return Number(P)};S.getElementNumericValues=function(P,L){return F(P,L).map(M=>Number(M))};S.getElementValue=Q;S.getElementValues=F;S.getElements=n;S.getNodeNameIgnoreNS=function(P){return P.nodeName.slice(P.nodeName.lastIndexOf(":")+1)};
S.getSpaceDelimitedNumericValues=function(P,L=null){return Q(P,L).split(" ").map(M=>Number(M))};S.isSameTagIgnoreNS=function(P,L){var M;P=null==P?void 0:null==(M=P.nodeName)?void 0:M.toLowerCase();L=L.toLowerCase();return P.slice(P.lastIndexOf(":")+1)===L};Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../tasks/support/FeatureSet ../TileInfo ../serviceTileInfoProperty ../TilemapCache ../RasterInfo ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h){G=function(m){function A(){var d=m.apply(this,arguments)||this;d._levelOffset=0;d._slices=null;d._tilemapCache=null;d.datasetFormat="RasterTileServer";return d}S._inheritsLoose(A,m);var a=A.prototype;a.open=async function(d){await this.init();d=d&&d.signal;var k=this.sourceJSON?{data:this.sourceJSON}:await this.request(this.url,{query:{f:"json"},signal:d});k.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const c=k.data;this.sourceJSON=
c;k="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=c.cacheType;null==this.tileType&&(-1<k.indexOf(c.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===c.tileInfo.format.toLowerCase()?this.tileType="Elevation":this.tileType="Raster");if(!c)throw new K("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!c.tileInfo)throw new K("imageserverraster:open","use ImageryLayer to open non-tiled image services");this.datasetName=c.name.slice(c.name.indexOf("/")+
1);d=await this._fetchRasterInfo({signal:d});if(Q.isSome(d)){k="Map"===this.tileType?t.readServiceTileInfo(c.tileInfo,c):E.fromJSON(c.tileInfo);const {extent:B,pixelSize:H}=d,O=.5/d.width*H.x;var g,C=k.lodAt(Math.max.apply(null,k.lods.map(da=>da.level)));"Map"!==this.tileType&&0!==c.maxScale&&("Raster"===this.tileType?(g=k.lods.filter(da=>da.resolution===H.x)[0])||(g=k.lods[k.lods.length-1]):(g=k.lods.filter(da=>Math.abs(da.scale-c.maxScale)<O)[0])||(g=k.lods.filter(da=>da.scale>c.maxScale).sort((da,
ka)=>da.scale>ka.scale?1:-1)[0]),H.x=H.y=g.resolution,d.width=Math.ceil((B.xmax-B.xmin)/H.x-.1),d.height=Math.ceil((B.ymax-B.ymin)/H.y-.1));g||(g=C);C=k.lodAt(Math.min.apply(null,k.lods.map(da=>da.level)));if("Map"===this.tileType)this._levelOffset=k.lods[0].level;else if(0!==c.minScale&&"Elevation"===this.tileType){var z=k.lods.filter(da=>Math.abs(da.scale-c.minScale)<O)[0];this._levelOffset=z.level-C.level}z||(z=C);const R=Math.max(H.x,H.y);if(Math.abs(H.x-H.y)>O||!k.lods.some(da=>Math.abs(da.resolution-
R)<O))H.x=H.y=g.resolution,d.width=Math.ceil((B.xmax-B.xmin)/H.x-.1),d.height=Math.ceil((B.ymax-B.ymin)/H.y-.1);g=g.level-z.level;const [N,V]=k.size;z=k.origin;let {x:Y,y:ba}=H;C=[{minCol:Math.floor((B.xmin-z.x+.1*Y)/N/Y),maxCol:Math.floor((B.xmax-z.x-.1*Y)/N/Y),minRow:Math.floor((z.y-B.ymax+.1*ba)/V/ba),maxRow:Math.floor((z.y-B.ymin-.1*ba)/V/ba)}];if(0<g)for(let da=0;da<g;da++)Y*=2,ba*=2,C.push({minCol:Math.floor((B.xmin-z.x+.1*Y)/N/Y),maxCol:Math.floor((B.xmax-z.x-.1*Y)/N/Y),minRow:Math.floor((z.y-
B.ymax+.1*ba)/V/Y),maxRow:Math.floor((z.y-B.ymin-.1*ba)/V/Y)});d.storageInfo=new p({blockWidth:k.size[0],blockHeight:k.size[1],pyramidBlockWidth:k.size[0],pyramidBlockHeight:k.size[1],compression:k.format,origin:k.origin,firstPyramidLevel:1,maximumPyramidLevel:g,tileInfo:k,blockBoundary:C});this._set("rasterInfo",d)}else throw new K("image-server-raster:open","cannot initialize image service");-1<c.capabilities.toLowerCase().indexOf("tilemap")&&(d={tileInfo:d.storageInfo.tileInfo,parsedUrl:D.urlToObject(this.url),
url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new q.TilemapCache({layer:d}))};a.fetchRawTile=async function(d,k,c,g={}){const {storageInfo:C,extent:z,pixelSize:B}=this.rasterInfo;({data:g}=await this.request(`${this.url}/tile/${C.maximumPyramidLevel-d+this._levelOffset}/${k}/${c}`,{query:this._slices?{sliceId:g.sliceId||0}:null,responseType:"array-buffer",signal:g.signal}));if(!g)return null;g=await this.decodePixelBlock(g,{width:C.tileInfo.size[0],height:C.tileInfo.size[1],planes:null,
pixelType:null,isPoint:"Elevation"===this.tileType});const H=C.blockBoundary[d];if("jpg"!==C.compression||c>H.minCol&&c<H.maxCol&&k>H.minRow&&k<H.maxRow)return g;const {origin:O,blockWidth:R,blockHeight:N}=C;var V=Math.pow(2,d),Y=Math.round((z.xmin-O.x)/(B.x*V))%R;d=Math.round((z.xmax-O.x)/(B.x*V))%R;var ba=Math.round((O.y-z.ymax)/(B.x*V))%N;V=Math.round((O.y-z.ymin)/(B.x*V))%N;Y=c===H.minCol?Y:0;ba=k===H.minRow?ba:0;J.setValidBoundary(g,{x:Y,y:ba},{width:(c===H.maxCol?d:R)-Y,height:(k===H.maxRow?
V:N)-ba});return g};a.getSliceIndex=function(d){if(null==d||!d.length||!this._slices)return null;for(let k=0;k<this._slices.length;k++){const c=this._slices[k].multidimensionalDefinition;if(c.length===d.length&&!c.some(g=>{var C=d.filter(B=>g.variableName===B.variableName&&B.dimensionName===g.dimensionName)[0];if(!C)return!0;const z=Array.isArray(g.values[0])?g.values[0][0]:g.values[0];C=Array.isArray(C.values[0])?C.values[0][0]:C.values[0];return z!==C}))return k}return null};a.fetchVariableStatisticsHistograms=
async function(d,k){var c=this.request(this.url+"/statistics",{query:{variable:d,f:"json"},signal:k}).then(g=>{var C;return null==(C=g.data)?void 0:C.statistics});d=this.request(this.url+"/histograms",{query:{variable:d,f:"json"},signal:k}).then(g=>{var C;return null==(C=g.data)?void 0:C.histograms});c=await l.all([c,d]);c[0]&&c[0].forEach(g=>{g.avg=g.mean;g.stddev=g.standardDeviation});return{statistics:c[0]||null,histograms:c[1]||null}};a.computeBestPyramidLevelForLocation=async function(d,k={}){if(!this._tilemapCache)return 0;
d=this.identifyPixelLocation(d,0,k.datumTransformation);if(null===d)return null;let c=0;var {maximumPyramidLevel:g}=this.rasterInfo.storageInfo;g=g-c+this._levelOffset;const C=d.srcLocation;for(;0<=g;){try{if("available"===await this._tilemapCache.fetchAvailability(g,d.row,d.col,k))break}catch{}g--;c++;d=this.identifyPixelLocation(C,c,k.datumTransformation);if(null===d)return null}return-1===g||null==d?null:c};a._fetchRasterInfo=async function(d){const k=this.sourceJSON,c=Math.ceil((k.extent.xmax-
k.extent.xmin)/k.pixelSizeX-.1),g=Math.ceil((k.extent.ymax-k.extent.ymin)/k.pixelSizeY-.1),C=f.fromJSON(k.spatialReference||k.extent.spatialReference);if("Map"===this.tileType)return new x({width:c,height:g,bandCount:3,extent:r.fromJSON(k.extent),spatialReference:C,pixelSize:new w({x:k.pixelSizeX,y:k.pixelSizeY,spatialReference:C}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}});const {slice:z,signal:B}=d;d=k.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",
{query:{slice:z,f:"json"},signal:B}).then(Y=>I.fromJSON(Y.data)).catch(()=>null):!1;const H=k.hasColormap?this.request(this.url+"/colormap",{query:{slice:z,f:"json"},signal:B}).then(Y=>{var ba;return null==(ba=Y.data)?void 0:ba.colormap}):!1,O=k.hasHistograms?this.request(this.url+"/histograms",{query:{slice:z,f:"json"},signal:B}).then(Y=>{var ba;return null==(ba=Y.data)?void 0:ba.histograms}):!1,R=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:B}).then(Y=>Y.data).catch(()=>{}),N=
k.hasMultidimensions?this._fetchMultidimensionalInfo():!1,V=k.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:B}).then(Y=>Y.data&&Y.data.slices).catch(()=>{}):!1;return l.all([d,H,O,R,N,V]).then(Y=>{let ba=null;if(k.minValues&&k.minValues.length===k.bandCount){ba=[];for(let da=0;da<k.minValues.length;da++)ba.push({min:k.minValues[da],max:k.maxValues[da],avg:k.meanValues[da],stddev:k.stdvValues[da]})}this._slices=Y[5]||null;return new x({width:c,height:g,bandCount:k.bandCount,
extent:r.fromJSON(k.extent),spatialReference:C,pixelSize:new w({x:k.pixelSizeX,y:k.pixelSizeY,spatialReference:C}),pixelType:k.pixelType.toLowerCase(),statistics:ba,attributeTable:Y[0]||null,colormap:Y[1]||null,histograms:Y[2]||null,keyProperties:Y[3]||{},multidimensionalInfo:Y[4]||null})})};a._fetchMultidimensionalInfo=async function(d){var k;d=await this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:d}).then(c=>{var g;return null==(g=c.data)?void 0:g.multidimensionalInfo});null!=
(k=d.variables)&&k.length&&d.variables.forEach(c=>{var g;null!=(g=c.statistics)&&g.length&&c.statistics.forEach(C=>{C.avg=C.mean;C.stddev=C.standardDeviation})});return d};return A}(h);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);n.__decorate([L.property()],G.prototype,"tileType",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],G)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports",
"./TileInfo"],function(S,n){function G(F,P,L,M){if(!F)return null;const {minScale:W,maxScale:K,minLOD:D,maxLOD:v}=P;if(null!=D&&null!=v)return M&&M.ignoreMinMaxLOD?n.fromJSON(F):n.fromJSON({...F,lods:F.lods.filter(({level:b})=>null!=b&&b>=D&&b<=v)});if(0!==W&&0!==K){const b=W?Math.round(1E4*W)/1E4:Infinity,l=K?Math.round(1E4*K)/1E4:-Infinity;return n.fromJSON({...F,lods:F.lods.filter(f=>{f=Math.round(1E4*f.scale)/1E4;return f<=b&&f>=l})})}return n.fromJSON(F)}const Q={type:n,json:{origins:{service:{read:{source:["tileInfo",
"minScale","maxScale","minLOD","maxLOD"],reader:G}}}}};S.readServiceTileInfo=G;S.serviceTileInfoProperty=Q;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/Accessor ../../request ../../core/Handles ../../core/LRUCache ../../core/watchUtils ./Tilemap".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q){var x;const J=F.getLogger("esri.layers.support.TilemapCache");S.TilemapCache=x=function(p){function h(A){A=p.call(this,A)||this;A._handles=new I;A._pendingTilemapRequests={};A._availableLevels={};A.levels=5;A.cacheByteSize=2097152;A.request=u;A._prefetchingEnabled=!0;return A}n._inheritsLoose(h,p);var m=h.prototype;m.initialize=function(){this._tilemapCache=new E(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
()=>this._initializeTilemapDefinition()),t.init(this,"layer.tileInfo.lods",A=>this._initializeAvailableLevels(A),!0)]);this._initializeTilemapDefinition()};m.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};m.castLevels=function(A){return 2>=A?(J.error("Minimum levels for Tilemap is 3, but got ",A),3):A};m.fetchTilemap=function(A,a,d,k){if(!this._availableLevels[A])return f.reject(new K("tilemap-cache:level-unavailable",`Level ${A} is unavailable in the service`));const c=
this._tmpTilemapDefinition;if(A=this._tilemapFromCache(A,a,d,c))return f.resolve(A);const g=k&&k.signal;k={...k,signal:null};return f.create((C,z)=>{f.onAbort(g,()=>z(f.createAbortError()));const B=q.tilemapDefinitionId(c);let H=this._pendingTilemapRequests[B];if(!H){H=q.Tilemap.fromDefinition(c,k).then(R=>{this._tilemapCache.put(B,R,R.byteSize);return R});const O=()=>delete this._pendingTilemapRequests[B];this._pendingTilemapRequests[B]=H;H.then(O,O)}H.then(C,z)})};m.getAvailability=function(A,a,
d){return this._availableLevels[A]?(A=this._tilemapFromCache(A,a,d,this._tmpTilemapDefinition))?A.getAvailability(a,d):"unknown":"unavailable"};m.getAvailabilityUpsample=function(A,a,d,k){k.level=A;k.row=a;k.col=d;A=this.layer.tileInfo;for(A.updateTileInfo(k);;)if(a=this.getAvailability(k.level,k.row,k.col),"unavailable"===a){if(!A.upsampleTile(k))return"unavailable"}else return a};m.fetchAvailability=function(A,a,d,k){return this._availableLevels[A]?this.fetchTilemap(A,a,d,k).catch(c=>c).then(c=>
{if(c instanceof q.Tilemap)return c=c.getAvailability(a,d),"unavailable"===c?f.reject(new K("tile-map:tile-unavailable","Tile is not available",{level:A,row:a,col:d})):c;if(f.isAbortError(c))throw c;return"unknown"}):f.reject(new K("tilemap-cache:level-unavailable",`Level ${A} is unavailable in the service`))};m.fetchAvailabilityUpsample=function(A,a,d,k,c){k.level=A;k.row=a;k.col=d;const g=this.layer.tileInfo;g.updateTileInfo(k);const C=this.fetchAvailability(A,a,d,c).catch(z=>{if(f.isAbortError(z))throw z;
if(g.upsampleTile(k))return this.fetchAvailabilityUpsample(k.level,k.row,k.col,k);throw z;});this._fetchAvailabilityUpsamplePrefetch(k.id,A,a,d,c,C);return C};m._fetchAvailabilityUpsamplePrefetch=async function(A,a,d,k,c,g){if(this._prefetchingEnabled){var C=`prefetch-${A}`;if(!this._handles.has(C)){var z=f.createAbortController();g.then(()=>z.abort(),()=>z.abort());var B=!1;this._handles.add({remove(){B||(B=!0,z.abort())}},C);await w.waitTicks(10,z.signal).catch(()=>{});B||(B=!0,this._handles.remove(C));
if(!f.isAborted(z))for(A={id:A,level:a,row:d,col:k},c={...c,signal:z.signal},a=this.layer.tileInfo,d=0;x._prefetches.length<x._maxPrefetch&&a.upsampleTile(A);++d){const H=this.fetchAvailability(A.level,A.row,A.col,c);x._prefetches.push(H);k=()=>{x._prefetches.removeUnordered(H)};H.then(k,k)}}}};m._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var A=this.layer.parsedUrl,a=A.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:A.path,query:a?D.objectToQuery(a):
null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};m._tilemapFromCache=function(A,a,d,k){k.level=A;k.row=a-a%this.size;k.col=d-d%this.size;A=q.tilemapDefinitionId(k);return this._tilemapCache.get(A)};m._initializeAvailableLevels=function(A){this._availableLevels={};A&&A.forEach(a=>this._availableLevels[a.level]=!0)};n._createClass(h,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const A=
this;return{get prefetchingEnabled(){return A._prefetchingEnabled},set prefetchingEnabled(a){A._prefetchingEnabled=a},hasTilemap(a,d,k){return!!A._tilemapFromCache(a,d,k,A._tmpTilemapDefinition)}}}}]);return h}(r);S.TilemapCache._maxPrefetch=4;S.TilemapCache._prefetches=new l({initialSize:x._maxPrefetch});G.__decorate([P.property({constructOnly:!0,type:Number})],S.TilemapCache.prototype,"levels",void 0);G.__decorate([L.cast("levels")],S.TilemapCache.prototype,"castLevels",null);G.__decorate([P.property({readOnly:!0,
dependsOn:["levels"],type:Number})],S.TilemapCache.prototype,"size",null);G.__decorate([P.property({constructOnly:!0,type:Number})],S.TilemapCache.prototype,"cacheByteSize",void 0);G.__decorate([P.property({constructOnly:!0})],S.TilemapCache.prototype,"layer",void 0);G.__decorate([P.property({constructOnly:!0})],S.TilemapCache.prototype,"request",void 0);S.TilemapCache=x=G.__decorate([W.subclass("esri.layers.support.TilemapCache")],S.TilemapCache);Object.defineProperty(S,"__esModule",{value:!0})})},
"esri/layers/support/Tilemap":function(){define(["exports","../../core/lang","../../core/Error","../../core/arrayUtils","../../request"],function(S,n,G,Q,F){function P(M){if("vector-tile"===M.service.type)var W=`${M.service.url}/tilemap/${M.level}/${M.row}/${M.col}/${M.width}/${M.height}`;else W=M.service.tileServers,W=`${W&&W.length?W[M.row%W.length]:M.service.url}/tilemap/${M.level}/${M.row}/${M.col}/${M.width}/${M.height}`;(M=M.service.query)&&(W=`${W}?${M}`);return W}let L=function(){function M(){this.location=
{left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var W=M.prototype;W.getAvailability=function(K,D){if("unknown"!==this._allAvailability)return this._allAvailability;K=(K-this.location.top)*this.location.width+(D-this.location.left);D=K>>3;const v=this._tileAvailabilityBitSet;return 0>D||D>v.length?"unknown":v[D]&1<<K%8?"available":"unavailable"};W._updateFromData=function(K){let D=!0,v=!0;const b=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));
let l=0;for(let f=0;f<K.length;f++){const w=f%8;K[f]?(v=!1,b[l]|=1<<w):D=!1;7===w&&++l}v?this._allAvailability="unavailable":D?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=b,this.byteSize+=b.length)};M.fromDefinition=function(K,D){const v=K.service.request||F,{row:b,col:l,width:f,height:w}=K,r={query:{f:"json"}};D=D?{...r,...D}:r;return v(P(K),D).then(u=>u.data).catch(u=>{if(u&&u.details&&422===u.details.httpStatus)return{location:{top:b,left:l,width:f,
height:w},valid:!0,data:Q.constant(f*w,0)};throw u;}).then(u=>{if(u.location&&(u.location.top!==b||u.location.left!==l||u.location.width!==f||u.location.height!==w))throw new G("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:b,left:l,width:f,height:w}});return M.fromJSON(u)})};M.fromJSON=function(K){M.validateJSON(K);const D=new M;D.location=Object.freeze(n.clone(K.location));D._updateFromData(K.data);return Object.freeze(D)};M.validateJSON=
function(K){if(!K||!K.location)throw new G("tilemap:missing-location","Location missing from tilemap response");if(!1===K.valid)throw new G("tilemap:invalid","Tilemap response was marked as invalid");if(!K.data)throw new G("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(K.data))throw new G("tilemap:data-mismatch","Data must be an array of numbers");if(K.data.length!==K.location.width*K.location.height)throw new G("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");
};return M}();S.Tilemap=L;S.default=L;S.tilemapDefinitionId=function(M){return`${M.level}/${M.row}/${M.col}/${M.width}/${M.height}`};S.tilemapDefinitionUrl=P;Object.defineProperty(S,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../PixelBlock ../RasterInfo ../rasterFormats/utils ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster ./xmlUtilities ./pamParser".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h){const m=new Map;m.set("Int8","s8");m.set("UInt8","u8");m.set("Int16","s16");m.set("UInt16","u16");m.set("Int32","s32");m.set("UInt32","u32");m.set("Float32","f32");m.set("Float64","f32");m.set("Double64","f32");const A=new Map;A.set("lerc",".lrc");A.set("none",".til");A.set("deflate",".pzp");A.set("jpeg",".jzp");G=function(a){function d(){var c=a.apply(this,arguments)||this;c._files=null;c._storageIndex=null;c.datasetFormat="MRF";return c}
S._inheritsLoose(d,a);var k=d.prototype;k.open=async function(c){var g;await this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var C=c?Q.unwrap(c.signal):null,z=await this.request(this.url,{responseType:"xml",signal:C});const {rasterInfo:B,files:H}=this._parseHeader(z.data);if(-1===(null==(g=this.ioConfig.skipExtensions)?void 0:g.indexOf("aux.xml"))&&(c=await this._fetchAuxiliaryData(c),null!=c)){var O;B.statistics=null!=(O=c.statistics)?O:B.statistics;(B.histograms=c.histograms)&&
!Q.isSome(B.statistics)&&(B.statistics=q.estimateStatisticsFromHistograms(c.histograms))}this._set("rasterInfo",B);this._files=H;C=await this.request(H.index,{responseType:"array-buffer",signal:C});this._storageIndex=this._parseIndex(C.data);C=0;O=-1;const {blockWidth:R,blockHeight:N,compression:V}=this.rasterInfo.storageInfo;z=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:Y,height:ba,bandCount:da}=this.rasterInfo,ka=[],ha="none"===V?1:da;for(;C<this._storageIndex.length;)O++,c=Math.ceil(Y/
R/Math.pow(z,O)),g=Math.ceil(ba/N/Math.pow(z,O)),C+=c*g*ha*4,ka.push({maxRow:g,maxCol:c,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=ka;0<O&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=O);this.updateTileInfo()};k.fetchRawTile=async function(c,g,C,z={}){const {blockWidth:B,blockHeight:H,blockBoundary:O,compression:R}=this.rasterInfo.storageInfo;var N=O[c];if(!N||N.maxRow<g||N.maxCol<C||N.minRow>g||N.minCol>C)return null;const {bandCount:V,
pixelType:Y}=this.rasterInfo,{ranges:ba,actualTileWidth:da,actualTileHeight:ka}=this._getTileLocation(c,g,C);if(!ba||0===ba.length)return null;if(0===ba[0].from&&0===ba[0].to)return c=new Uint8Array(B*H),new I({width:B,height:H,pixels:null,mask:c,validPixelCount:0});({bandIds:C}=this.ioConfig);g="none"===R?1:V;N=[];for(c=c=0;c<g;c++)(!C||-1<C.indexOf[c])&&N.push(this.request(this._files.data,{range:{from:ba[c].from,to:ba[c].to},responseType:"array-buffer",signal:z.signal}));z=await l.all(N);c=z.map(ha=>
ha.data.byteLength).reduce((ha,e)=>ha+e);C=new Uint8Array(c);for(c=N=0;c<g;c++)C.set(new Uint8Array(z[c].data),N),N+=z[c].data.byteLength;z=await this.decodePixelBlock(C.buffer,{width:B,height:H,format:"lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",pixelType:Y});C=g=0;if(da!==B||ka!==H)if(N=z.mask)for(c=0;c<H;c++)for(C=c*B,g=c<ka?da:0;g<B;g++)N[C+g]=0;else for(N=new Uint8Array(B*H),z.mask=N,c=0;c<ka;c++)for(C=c*B,g=0;g<da;g++)N[C+g]=1;return z};k._parseIndex=function(c){if(0<c.byteLength%
16)throw"invalid array buffer must be multiples of 16";let g,C,z,B,H;if(t.isPlatformLittleEndian){g=new Uint8Array(c);z=new ArrayBuffer(c.byteLength);C=new Uint8Array(z);for(B=0;B<c.byteLength/4;B++)for(H=0;4>H;H++)C[4*B+H]=g[4*B+3-H];c=new Uint32Array(z)}else c=new Uint32Array(c);return c};k._getTileLocation=function(c,g,C){const {blockWidth:z,blockHeight:B,pyramidScalingFactor:H,compression:O}=this.rasterInfo.storageInfo,{width:R,height:N,bandCount:V}=this.rasterInfo,Y="none"===O?1:V;let ba,da;
var ka,ha=0;let e=0;for(ka=0;ka<c;ka++)e=Math.pow(H,ka),ba=Math.ceil(R/z/e),da=Math.ceil(N/B/e),ha+=ba*da;e=Math.pow(H,c);ba=Math.ceil(R/z/e);da=Math.ceil(N/B/e);ha=4*(ha+(g*ba+C))*Y;c=this._storageIndex.subarray(ha,ha+4*Y);ha=ka=0;const y=[];for(let T=0;T<Y;T++)ka=c[4*T]*Math.pow(2,32)+c[4*T+1],ha=ka+c[4*T+2]*Math.pow(2,32)+c[4*T+3],y.push({from:ka,to:ha});return{ranges:y,actualTileWidth:C<ba-1?z:Math.ceil(R/e)-z*(ba-1),actualTileHeight:g<da-1?B:Math.ceil(N/e)-B*(da-1)}};k._parseHeader=function(c){var g=
p.getElement(c,"MRF_META/Raster");if(!g)throw new K("mrf:open","not a valid MRF format");var C=p.getElement(g,"Size"),z=parseInt(C.getAttribute("x"),10),B=parseInt(C.getAttribute("y"),10);const H=parseInt(C.getAttribute("c"),10);C=(p.getElementValue(g,"Compression")||"none").toLowerCase();var O=["none","lerc"];if(!C||-1===O.indexOf(C))throw new K("mrf:open","currently does not support compression "+C);var R=p.getElementValue(g,"DataType")||"UInt8";O=m.get(R);if(null==O)throw new K("mrf:open","currently does not support pixel type "+
R);var N=p.getElement(g,"PageSize");R=parseInt(N.getAttribute("x"),10);N=parseInt(N.getAttribute("y"),10);g=p.getElement(g,"DataValues");let V;g&&(g=g.getAttribute("NoData"),null!=g&&(V=g.trim().split(" ").map(T=>parseFloat(T))));if(p.getElement(c,"MRF_META/CachedSource"))throw new K("mrf:open","currently does not support MRF referencing other data files");var Y=p.getElement(c,"MRF_META/GeoTags"),ba=p.getElement(Y,"BoundingBox");if(null==ba)throw new K("mrf:open","missing node MRF_META/GeoTags/BoundingBox");
g=parseFloat(ba.getAttribute("minx"));const da=parseFloat(ba.getAttribute("miny")),ka=parseFloat(ba.getAttribute("maxx")),ha=parseFloat(ba.getAttribute("maxy"));var e=p.getElementValue(Y,"Projection");Y=p.getElementValue(c,"datafile");ba=p.getElementValue(c,"IndexFile");let y;"LOCAL_CS[]"!==e&&(y=new f({wkt:e}));e=new r(g,da,ka,ha);e.spatialReference=y;c=p.getElement(c,"MRF_META/Rsets");c=parseInt(c&&c.getAttribute("scale")||"2",10);c=new x({origin:new w({x:e.xmin,y:e.ymax,spatialReference:y}),blockWidth:R,
blockHeight:N,pyramidBlockWidth:R,pyramidBlockHeight:N,compression:C,pyramidScalingFactor:c});R=new w({x:(ka-g)/z,y:(ha-da)/B,spatialReference:y});z=new E({width:z,height:B,extent:e,spatialReference:y,bandCount:H,pixelType:O,pixelSize:R,noDataValue:V,storageInfo:c});B={mrf:this.url,index:ba||this.url.replace(".mrf",".idx"),data:Y||this.url.replace(".mrf",A.get(C))};return{rasterInfo:z,files:B}};k._fetchAuxiliaryData=async function(c){try{const {data:g}=await this.request(this.url+".aux.xml",{responseType:"xml",
signal:null==c?void 0:c.signal});return h.parsePAMInfo(g)}catch{return null}};return d}(J);n.__decorate([L.property()],G.prototype,"_files",void 0);n.__decorate([L.property()],G.prototype,"_storageIndex",void 0);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterIO.MRFRaster")],G)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../RasterInfo ../rasterFormats/TiffTags ../rasterFormats/TiffDecoder ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster ./pamParser".split(" "),
function(S,n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x){const J=function(h,m){return(h=h.get(m))&&h.values},p=function(h,m){return(h=h.get(m))&&h.values[0]};G=function(h){function m(){var a=h.apply(this,arguments)||this;a._files=null;a._headerInfo=null;a._bufferSize=1048576;a.datasetFormat="TIFF";return a}S._inheritsLoose(m,h);var A=m.prototype;A.open=async function(a){var d;await this.init();var k=a?Q.unwrap(a.signal):null,{data:c}=await this.request(this.url,{range:{from:0,to:this._bufferSize},
responseType:"array-buffer",signal:k});if(!c)throw new K("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:g,firstIFD:C,isBigTiff:z}=I.parseSignature(c),B=[];await this.readIFDs(B,c,g,C,0,z?8:4,k);k=I.getImageInfo(B);const {width:H,height:O,tileWidth:R,tileHeight:N,planes:V,pixelType:Y,compression:ba,firstPyramidLevel:da,maximumPyramidLevel:ka,pyramidBlockWidth:ha,pyramidBlockHeight:e,tileBoundary:y,metadata:T}=k;c=f.fromJSON(k.extent);
const U=c.spatialReference;var ca=c?new l({x:c.xmin,y:c.ymax,spatialReference:U}):new l({x:0,y:0});ca=new t({blockWidth:R,blockHeight:N,pyramidBlockWidth:ha,pyramidBlockHeight:e,compression:ba,origin:ca,firstPyramidLevel:da,maximumPyramidLevel:ka,blockBoundary:y});const ea=new l({x:(c.xmax-c.xmin)/H,y:(c.ymax-c.ymin)/O,spatialReference:U});c=new r({width:H,height:O,bandCount:V,pixelType:Y,compression:ba,pixelSize:ea,storageInfo:ca,spatialReference:U,keyProperties:T?{BandProperties:T.bandProperties,
DataType:T.dataType}:{},extent:c,statistics:T?T.statistics:null});if(-1===(null==(d=this.ioConfig.skipExtensions)?void 0:d.indexOf("aux.xml"))&&(a=await this._fetchAuxiliaryData(a),null!=a)){var ia;c.statistics=null!=(ia=a.statistics)?ia:c.statistics;(c.histograms=a.histograms)&&!Q.isSome(c.statistics)&&(c.statistics=E.estimateStatisticsFromHistograms(a.histograms))}this._set("rasterInfo",c);this._headerInfo={littleEndian:g,isBigTiff:z,ifds:B,...k};if(!this._headerInfo.isSupported)throw new K("tiffraster:open",
"this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()};A.fetchRawTile=async function(a,d,k,c={}){if(!this._headerInfo&&this._headerInfo.isSupported)return null;var {blockBoundary:g}=this.rasterInfo.storageInfo;const C=0<a?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,z=0<a?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight;g=g[a];if(!g||g.maxRow<d||g.maxCol<k||g.minRow>d||g.minCol>k)return null;a=this.getTileLocation(a,
d,k);if(!a)return null;const {range:B,actualTileWidth:H,actualTileHeight:O,ifd:R}=a;({data:c}=await this.request(this.url,{range:B,responseType:"array-buffer",signal:c.signal}));c=await this.decodePixelBlock(c,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:R,offset:0,size:0},width:C,height:z,planes:null,pixelType:null});if(H!==C||O!==z)if(g=c.mask)for(a=0;a<z;a++)for(k=a*C,d=a<O?H:0;d<C;d++)g[k+d]=0;else for(g=new Uint8Array(C*z),c.mask=g,a=0;a<O;a++)for(k=a*C,d=0;d<H;d++)g[k+d]=1;
return c};A.readIFDs=async function(a,d,k,c,g,C=4,z){if(!c)return null;if(c>=d.byteLength||0>c)d=(await this.request(this.url,{range:{from:c+g,to:c+g+this._bufferSize},responseType:"array-buffer",signal:z})).data,g=c+g,c=0;c=await this.readIFD(d,k,c,g,u.TIFF_TAGS,C,z);a.push(c.ifd);if(!c.nextIFD)return null;await this.readIFDs(a,d,k,c.nextIFD-g,g,C,z)};A.readIFD=async function(a,d,k,c,g=u.TIFF_TAGS,C=4,z){if(!a)return null;k=I.parseIFD(a,d,k,c,g,C);if(k.success){const B=[];k.ifd.forEach(H=>{H.values||
B.push(H)});0<B.length&&(C=B.map(H=>H.offlineOffsetSize),g=Math.min.apply(null,C.map(H=>H[0])),Math.min.apply(null,C.map(H=>H[0]+H[1]))-g<=this._bufferSize&&({data:C}=await this.request(this.url,{range:{from:g,to:g+this._bufferSize},responseType:"array-buffer",signal:z}),a=C,c=g,B.forEach(H=>I.parseFieldValues(a,d,H,c))));k.ifd.has("GEOKEYDIRECTORY")&&(g=k.ifd.get("GEOKEYDIRECTORY"),(C=g.values)&&4<C.length&&(C=C[0]+"."+C[1]+"."+C[2],z=await this.readIFD(a,d,g.valueOffset+6-c,c,u.GEO_KEYS,2,z),g.data=
z.ifd,g.data&&g.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[C]})));return k}if(k.requiredBufferSize&&k.requiredBufferSize!==a.byteLength)return a=(await this.request(this.url,{range:{from:c,to:c+k.requiredBufferSize+4},responseType:"array-buffer",signal:z})).data,a.byteLength<k.requiredBufferSize?null:this.readIFD(a,d,0,c,u.TIFF_TAGS,4,z)};A.getTileLocation=function(a,d,k){const {firstPyramidLevel:c,blockBoundary:g}=this.rasterInfo.storageInfo;var C=0===a?0:a-(c-1);
a=this._headerInfo.ifds[C];if(!a)return null;var z=J(a,"TILEOFFSETS");if(void 0===z)return null;var B=J(a,"TILEBYTECOUNTS");const {minRow:H,minCol:O,maxRow:R,maxCol:N}=g[C];if(d>R||k>N||d<H||k<O)return null;C=p(a,"IMAGEWIDTH");const V=p(a,"IMAGELENGTH"),Y=p(a,"TILEWIDTH"),ba=p(a,"TILELENGTH"),da=d*(N+1)+k;z=z[da];B=B[da];return null==z||null==B?null:{range:{from:z,to:z+B-1},ifd:a,actualTileWidth:k===N?C%Y:Y,actualTileHeight:d===R?V%ba:ba}};A._fetchAuxiliaryData=async function(a){try{const {data:d}=
await this.request(this.url+".aux.xml",{responseType:"xml",signal:null==a?void 0:a.signal});return x.parsePAMInfo(d)}catch{return null}};return m}(q);n.__decorate([L.property()],G.prototype,"_files",void 0);n.__decorate([L.property()],G.prototype,"_headerInfo",void 0);n.__decorate([L.property()],G.prototype,"_bufferSize",void 0);n.__decorate([L.property({type:String,json:{write:!0}})],G.prototype,"datasetFormat",void 0);return G=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],
G)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../PopupTemplate ./Layer ../rasterRenderers ../core/MultiOriginJSONSupport ./support/commonProperties ./mixins/OperationalLayer ./support/Field ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ../support/popupUtils ./mixins/ImageryTileMixin ./support/rasterDatasets/RasterFactory".split(" "),function(S,
n,G,Q,F,P,L,M,W,K,D,v,b,l,f,w,r,u,I,E,t,q,x,J,p,h,m,A,a,d){function k(){return{enabled:this.loaded?"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType:!0}}G=M.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});u=function(c){function g(...z){z=c.call(this,...z)||this;z.bandIds=null;z.interpolation=null;z.legendEnabled=!0;z.isReference=null;z.listMode="show";z.sourceJSON=null;z.version=null;
z.title=null;z.type="imagery-tile";z.operationalLayerType="ArcGISTiledImageServiceLayer";z.popupEnabled=!0;z.popupTemplate=null;return z}S._inheritsLoose(g,c);var C=g.prototype;C.normalizeCtorArgs=function(z,B){return"string"===typeof z?{url:z,...B}:z};C.load=function(z){const B=Q.isSome(z)?z.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},z).then(()=>this._openRaster(B),()=>this._openRaster(B)));return w.resolve(this)};C.readRenderer=function(z,B,H){z=
I.read(B&&B.layerDefinition&&B.layerDefinition.drawingInfo&&B.layerDefinition.drawingInfo.renderer,H)||void 0;if(null!=z)return z};C.createPopupTemplate=function(z){return A.createPopupTemplate(this,z)};C.write=function(z,B){const {raster:H}=this;if(this.loaded?"RasterTileServer"===H.datasetFormat&&("Raster"===H.tileType||"Map"===H.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return c.prototype.write.call(this,z,B);B&&B.messages&&B.messages.push(new v("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${B.origin}/${B.layerContainerType||
"operational-layers"}`}'`,{layer:this}));return null};C._openRaster=async function(z){this.raster?(this.raster.rasterInfo||await this.raster.open(),this.url=this.raster.url):this.raster=await d.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:this.ioConfig,signal:z});({rasterInfo:z}=this.raster);if(!z)throw new v("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),
this._set("copyright",this.sourceJSON.copyrightText));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings()};S._createClass(g,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"fields",get:function(){var z,B;let H=[new x({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const O=null==(z=this.rasterInfo)?void 0:null==(B=z.attributeTable)?
void 0:B.fields;O&&(z=O.filter(R=>"oid"!==R.type&&"value"!==R.name.toLowerCase()).map(R=>{const N=R.clone();N.name="Raster."+R.name;return N}),H=H.concat(z));return H}},{key:"renderer",set:function(z){this._set("renderer",z);this.updateRenderer()}}]);return g}(J.BlendLayer(m.ScaleRangeLayer(h.RefreshableLayer(q.OperationalLayer(p.PortalLayer(a.ImageryTileMixin(E.MultiOriginJSONMixin(u))))))));n.__decorate([L.property()],u.prototype,"ioConfig",void 0);n.__decorate([L.property({type:[P.Integer],json:{write:{overridePolicy:k}}})],
u.prototype,"bandIds",void 0);n.__decorate([L.property({json:{write:{overridePolicy:k}}}),W.enumeration(G)],u.prototype,"interpolation",void 0);n.__decorate([L.property({json:{write:!0}})],u.prototype,"multidimensionalDefinition",void 0);n.__decorate([L.property(t.legendEnabled)],u.prototype,"legendEnabled",void 0);n.__decorate([L.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],u.prototype,"isReference",void 0);n.__decorate([L.property({type:["show","hide"]})],
u.prototype,"listMode",void 0);n.__decorate([L.property()],u.prototype,"sourceJSON",void 0);n.__decorate([L.property({readOnly:!0})],u.prototype,"version",void 0);n.__decorate([L.property()],u.prototype,"title",void 0);n.__decorate([L.property({readOnly:!0,json:{read:!1}})],u.prototype,"type",void 0);n.__decorate([L.property({type:["ArcGISTiledImageServiceLayer"]})],u.prototype,"operationalLayerType",void 0);n.__decorate([L.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(c,
g){return!g.disablePopup}},write:{target:"disablePopup",overridePolicy:k,writer(c,g,C){g[C]=!c}}}})],u.prototype,"popupEnabled",void 0);n.__decorate([L.property({type:r,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:k}}})],u.prototype,"popupTemplate",void 0);n.__decorate([L.property({readOnly:!0,dependsOn:["title"]})],u.prototype,"defaultPopupTemplate",null);n.__decorate([L.property({readOnly:!0,type:[x],dependsOn:["rasterInfo"]})],u.prototype,"fields",null);n.__decorate([L.property({types:I.rasterRendererTypes,
json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:k},origins:{"web-scene":{types:I.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(c){return{enabled:c&&"vector-field"!==c.type}}}}}}})],u.prototype,"renderer",null);n.__decorate([K.reader("renderer")],u.prototype,"readRenderer",null);return u=n.__decorate([D.subclass("esri.layers.ImageryTileLayer")],u)});