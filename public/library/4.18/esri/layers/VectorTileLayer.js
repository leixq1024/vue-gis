// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(k,u,t,m,d,b,l,p,v,q,C,G,c,g,f,n,B,x,J,M,N,F){var Q;t=new l.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=Q=function(W){function Y(z){z=W.call(this,z)||this;z.dpi=96;z.format=null;z.origin=null;z.minScale=0;z.maxScale=0;z.size=null;z.spatialReference=null;return z}k._inheritsLoose(Y,W);Y.create=function(z=
{size:256,spatialReference:n.WebMercator}){var w=z.resolutionFactor||1,D=z.scales;const H=z.size||256,E=z.spatialReference||n.WebMercator;if(!f.isValid(E)){w=[];if(D)for(z=0;z<D.length;z++){var L=D[z];w.push({level:z,scale:L,resolution:L})}else for(D=5E-4,z=23;0<=z;z--)w.unshift({level:z,scale:D,resolution:D}),D*=2;return new Q({dpi:96,lods:w,origin:new x(0,0,E),size:[H,H],spatialReference:E})}L=f.getInfo(E);z=z.origin?new x({x:z.origin.x,y:z.origin.y,spatialReference:E}):L?new x({x:L.origin[0],y:L.origin[1],
spatialReference:E}):new x({x:0,y:0,spatialReference:E});L=1/(39.37*M.getMetersPerUnitForSR(E)*96);const X=[];if(D)for(w=0;w<D.length;w++){var U=D[w];X.push({level:w,scale:U,resolution:U*L})}else{var S=f.isGeographic(E)?512/H*5.916575275917094E8:256/H*5.91657527591555E8;D=Math.ceil(24/w);X.push({level:0,scale:S,resolution:S*L});for(U=1;U<D;U++)S/=Math.pow(2,w),X.push({level:U,scale:S,resolution:S*L})}return new Q({dpi:96,lods:X,origin:z,size:[H,H],spatialReference:E})};var O=Y.prototype;O.readOrigin=
function(z,w){return x.fromJSON({spatialReference:w.spatialReference,...z})};O.readSize=function(z,w){return[w.cols,w.rows]};O.writeSize=function(z,w){w.cols=z[0];w.rows=z[0]};O.zoomToScale=function(z){const w=this.scales;if(0>=z)return w[0];if(z>=w.length)return w[w.length-1];{const D=Math.round(z);return w[D]+(D-z)*(w[Math.round(z-.5)]-w[D])}};O.scaleToZoom=function(z){const w=this.scales,D=w.length-1;let H=0;for(;H<D;H++){const E=w[H],L=w[H+1];if(E<=z)break;if(L===z)return H+1;if(E>z&&L<z)return H+
1-(z-L)/(E-L)}return H};O.snapScale=function(z,w=.95){z=this.scaleToZoom(z);return z%Math.floor(z)>=w?this.zoomToScale(Math.ceil(z)):this.zoomToScale(Math.floor(z))};O.tileAt=function(z,w,D,H){var E=this.lodAt(z);if(!E)return null;let L;if("number"===typeof w)L=w,w=D;else{if(f.equals(w.spatialReference,this.spatialReference))L=w.x,w=w.y;else{H=B.project(w,this.spatialReference);if(!H)return null;L=H.x;w=H.y}H=D}D=E.resolution*this.size[0];E=E.resolution*this.size[1];H||(H={id:null,level:0,row:0,col:0,
extent:N.create()});H.level=z;H.row=Math.floor((this.origin.y-w)/E+.001);H.col=Math.floor((L-this.origin.x)/D+.001);this.updateTileInfo(H);return H};O.updateTileInfo=function(z){var w=this.lodAt(z.level);if(w){var D=w.resolution*this.size[0];w=w.resolution*this.size[1];z.id=`${z.level}/${z.row}/${z.col}`;z.extent||(z.extent=N.create());z.extent[0]=this.origin.x+z.col*D;z.extent[1]=this.origin.y-(z.row+1)*w;z.extent[2]=z.extent[0]+D;z.extent[3]=z.extent[1]+w}};O.upsampleTile=function(z){const w=this._upsampleLevels[z.level];
if(!w||-1===w.parentLevel)return!1;z.level=w.parentLevel;z.row=Math.floor(z.row/w.factor+.001);z.col=Math.floor(z.col/w.factor+.001);this.updateTileInfo(z);return!0};O.getTileBounds=function(z,w){var {resolution:D}=this.lodAt(w.level);const H=D*this.size[0];D*=this.size[1];z[0]=this.origin.x+w.col*H;z[1]=this.origin.y-(w.row+1)*D;z[2]=z[0]+H;z[3]=z[1]+D;return z};O.lodAt=function(z){return this._levelToLOD&&this._levelToLOD[z]||null};O.clone=function(){return Q.fromJSON(this.write({}))};O._initializeUpsampleLevels=
function(){const z=this.lods;this._upsampleLevels=[];let w=null;for(let D=0;D<z.length;D++){const H=z[D];this._upsampleLevels[H.level]={parentLevel:w?w.level:-1,factor:w?w.resolution/H.resolution:0};w=H}};k._createClass(Y,[{key:"isWrappable",get:function(){const {spatialReference:z,origin:w}=this;if(z&&w){const D=f.getInfo(z);return z.isWrappable&&Math.abs(D.origin[0]-w.x)<=D.dx}return!1}},{key:"lods",set:function(z){let w=0,D=0;const H=[];this._levelToLOD={};z&&(w=-Infinity,D=Infinity,z.forEach(E=>
{H.push(E.scale);w=E.scale>w?E.scale:w;D=E.scale<D?E.scale:D;this._levelToLOD[E.level]=E}));this._set("scales",H);this._set("minScale",w);this._set("maxScale",D);this._set("lods",z);this._initializeUpsampleLevels()}}]);return Y}(g.JSONSupport);u.__decorate([b.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);u.__decorate([b.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);u.__decorate([b.property({type:String,json:{read:t.read,write:t.write,origins:{"web-scene":{read:!1,
write:!1}}}})],g.prototype,"format",void 0);u.__decorate([b.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],g.prototype,"isWrappable",null);u.__decorate([b.property({type:x,json:{write:!0}})],g.prototype,"origin",void 0);u.__decorate([p.reader("origin")],g.prototype,"readOrigin",null);u.__decorate([b.property({type:[F],value:null,json:{write:!0}})],g.prototype,"lods",null);u.__decorate([b.property({readOnly:!0})],g.prototype,"minScale",void 0);u.__decorate([b.property({readOnly:!0})],
g.prototype,"maxScale",void 0);u.__decorate([b.property({readOnly:!0})],g.prototype,"scales",void 0);u.__decorate([b.property({cast:W=>Array.isArray(W)?W:"number"===typeof W?[W,W]:[256,256]})],g.prototype,"size",void 0);u.__decorate([p.reader("size",["rows","cols"])],g.prototype,"readSize",null);u.__decorate([q.writer("size",{cols:{type:d.Integer},rows:{type:d.Integer}})],g.prototype,"writeSize",null);u.__decorate([b.property({type:n,json:{write:!0}})],g.prototype,"spatialReference",void 0);return g=
Q=u.__decorate([v.subclass("esri.layers.support.TileInfo")],g)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../Extent"],function(k,u,t){function m(c=G){return[c[0],c[1],c[2],c[3]]}function d(c){return c[0]>=c[2]?0:c[2]-c[0]}function b(c){return c[1]>=c[3]?0:c[3]-c[1]}function l(c,g,f){return g>=c[0]&&f>=c[1]&&g<=c[2]&&f<=c[3]}function p(c,g){c[0]=g[0];c[1]=g[1];c[2]=g[2];c[3]=g[3];return c}function v(c){return 4===c.length}function q(c,g,f){return c<g?g:
c>f?f:c}const C=[Infinity,Infinity,-Infinity,-Infinity],G=[0,0,0,0];k.NEGATIVE_INFINITY=C;k.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];k.UNIT=[0,0,1,1];k.ZERO=G;k.allFinite=function(c){for(let g=0;4>g;g++)if(!isFinite(c[g]))return!1;return!0};k.area=function(c){return d(c)*b(c)};k.center=function(c,g=[0,0]){g[0]=(c[0]+c[2])/2;g[1]=(c[1]+c[3])/2;return g};k.clone=function(c){return[c[0],c[1],c[2],c[3]]};k.contains=function(c,g){return g[0]>=c[0]&&g[2]<=c[2]&&g[1]>=c[1]&&g[3]<=c[3]};
k.containsPoint=function(c,g){return l(c,g[0],g[1])};k.containsPointObject=function(c,g){return l(c,g.x,g.y)};k.containsPointWithMargin=function(c,g,f){return g[0]>=c[0]-f&&g[1]>=c[1]-f&&g[0]<=c[2]+f&&g[1]<=c[3]+f};k.containsXY=l;k.create=m;k.diameter=function(c){const g=d(c);c=b(c);return Math.sqrt(g*g+c*c)};k.distance=function(c,g){const f=(c[1]+c[3])/2,n=Math.max(Math.abs(g[0]-(c[0]+c[2])/2)-d(c)/2,0);c=Math.max(Math.abs(g[1]-f)-b(c)/2,0);return Math.sqrt(n*n+c*c)};k.empty=function(c){return c?
p(c,C):m(C)};k.equals=function(c,g,f){if(null==c||null==g)return c===g;if(!v(c)||!v(g))return!1;if(f)for(let n=0;n<c.length;n++){if(!f(c[n],g[n]))return!1}else for(f=0;f<c.length;f++)if(c[f]!==g[f])return!1;return!0};k.expand=function(c,g,f=c){if("length"in g)if(v(g))f[0]=Math.min(c[0],g[0]),f[1]=Math.min(c[1],g[1]),f[2]=Math.max(c[2],g[2]),f[3]=Math.max(c[3],g[3]);else{if(2===g.length||3===g.length)f[0]=Math.min(c[0],g[0]),f[1]=Math.min(c[1],g[1]),f[2]=Math.max(c[2],g[0]),f[3]=Math.max(c[3],g[1])}else switch(g.type){case "extent":f[0]=
Math.min(c[0],g.xmin);f[1]=Math.min(c[1],g.ymin);f[2]=Math.max(c[2],g.xmax);f[3]=Math.max(c[3],g.ymax);break;case "point":f[0]=Math.min(c[0],g.x),f[1]=Math.min(c[1],g.y),f[2]=Math.max(c[2],g.x),f[3]=Math.max(c[3],g.y)}return f};k.expandPointInPlace=function(c,g){g[0]<c[0]&&(c[0]=g[0]);g[0]>c[2]&&(c[2]=g[0]);g[1]<c[1]&&(c[1]=g[1]);g[1]>c[3]&&(c[3]=g[1])};k.expandWithNestedArray=function(c,g,f=c){const n=g.length;let B=c[0],x=c[1],J=c[2];c=c[3];for(let M=0;M<n;M++){const N=g[M];B=Math.min(B,N[0]);x=
Math.min(x,N[1]);J=Math.max(J,N[0]);c=Math.max(c,N[1])}f[0]=B;f[1]=x;f[2]=J;f[3]=c;return f};k.fromExtent=function(c,g=m()){g[0]=c.xmin;g[1]=c.ymin;g[2]=c.xmax;g[3]=c.ymax;return g};k.fromValues=function(c,g,f,n,B=m()){B[0]=c;B[1]=g;B[2]=f;B[3]=n;return B};k.height=b;k.intersection=function(c,g,f=c){const n=g[0],B=g[1],x=g[2];g=g[3];f[0]=q(c[0],n,x);f[1]=q(c[1],B,g);f[2]=q(c[2],n,x);f[3]=q(c[3],B,g);return f};k.intersects=function(c,g){return Math.max(g[0],c[0])<=Math.min(g[2],c[2])&&Math.max(g[1],
c[1])<=Math.min(g[3],c[3])};k.is=v;k.isPoint=function(c){return(0===d(c)||!isFinite(c[0]))&&(0===b(c)||!isFinite(c[1]))};k.offset=function(c,g,f,n=c){n[0]=c[0]+g;n[1]=c[1]+f;n[2]=c[2]+g;n[3]=c[3]+f;return n};k.pad=function(c,g,f=c){f[0]=c[0]-g;f[1]=c[1]-g;f[2]=c[2]+g;f[3]=c[3]+g;return f};k.set=p;k.setMax=function(c,g,f=c){f[2]=g[0];f[3]=g[1];f!==c&&(f[0]=c[0],f[1]=c[1]);return c};k.setMin=function(c,g,f=c){f[0]=g[0];f[1]=g[1];f!==c&&(f[2]=c[2],f[3]=c[3]);return f};k.size=function(c,g){g[0]=c[2]-
c[0];g[1]=c[3]-c[1]};k.toExtent=function(c,g){return new t({xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3],spatialReference:g})};k.width=d;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(k,u,t,m,d,b,l,p,v,q,C,G){var c;t=c=function(g){function f(n){n=g.call(this,n)||this;n.level=0;n.levelValue=null;n.resolution=0;n.scale=0;return n}k._inheritsLoose(f,g);f.prototype.clone=function(){return new c({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return f}(G.JSONSupport);u.__decorate([b.property({type:d.Integer,json:{write:!0}})],t.prototype,"level",void 0);u.__decorate([b.property({type:String,json:{write:!0}})],t.prototype,"levelValue",
void 0);u.__decorate([b.property({type:Number,json:{write:!0}})],t.prototype,"resolution",void 0);u.__decorate([b.property({type:Number,json:{write:!0}})],t.prototype,"scale",void 0);return t=c=u.__decorate([p.subclass("esri.layers.support.LOD")],t)})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/Accessor ../../request ../../core/Handles ../../core/LRUCache ../../core/watchUtils ./Tilemap".split(" "),
function(k,u,t,m,d,b,l,p,v,q,C,G,c,g,f,n,B,x,J,M,N,F){var Q;const W=d.getLogger("esri.layers.support.TilemapCache");k.TilemapCache=Q=function(Y){function O(w){w=Y.call(this,w)||this;w._handles=new J;w._pendingTilemapRequests={};w._availableLevels={};w.levels=5;w.cacheByteSize=2097152;w.request=x;w._prefetchingEnabled=!0;return w}u._inheritsLoose(O,Y);var z=O.prototype;z.initialize=function(){this._tilemapCache=new M(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
()=>this._initializeTilemapDefinition()),N.init(this,"layer.tileInfo.lods",w=>this._initializeAvailableLevels(w),!0)]);this._initializeTilemapDefinition()};z.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};z.castLevels=function(w){return 2>=w?(W.error("Minimum levels for Tilemap is 3, but got ",w),3):w};z.fetchTilemap=function(w,D,H,E){if(!this._availableLevels[w])return f.reject(new q("tilemap-cache:level-unavailable",`Level ${w} is unavailable in the service`));const L=
this._tmpTilemapDefinition;if(w=this._tilemapFromCache(w,D,H,L))return f.resolve(w);const X=E&&E.signal;E={...E,signal:null};return f.create((U,S)=>{f.onAbort(X,()=>S(f.createAbortError()));const Z=F.tilemapDefinitionId(L);let aa=this._pendingTilemapRequests[Z];if(!aa){aa=F.Tilemap.fromDefinition(L,E).then(da=>{this._tilemapCache.put(Z,da,da.byteSize);return da});const fa=()=>delete this._pendingTilemapRequests[Z];this._pendingTilemapRequests[Z]=aa;aa.then(fa,fa)}aa.then(U,S)})};z.getAvailability=
function(w,D,H){return this._availableLevels[w]?(w=this._tilemapFromCache(w,D,H,this._tmpTilemapDefinition))?w.getAvailability(D,H):"unknown":"unavailable"};z.getAvailabilityUpsample=function(w,D,H,E){E.level=w;E.row=D;E.col=H;w=this.layer.tileInfo;for(w.updateTileInfo(E);;)if(D=this.getAvailability(E.level,E.row,E.col),"unavailable"===D){if(!w.upsampleTile(E))return"unavailable"}else return D};z.fetchAvailability=function(w,D,H,E){return this._availableLevels[w]?this.fetchTilemap(w,D,H,E).catch(L=>
L).then(L=>{if(L instanceof F.Tilemap)return L=L.getAvailability(D,H),"unavailable"===L?f.reject(new q("tile-map:tile-unavailable","Tile is not available",{level:w,row:D,col:H})):L;if(f.isAbortError(L))throw L;return"unknown"}):f.reject(new q("tilemap-cache:level-unavailable",`Level ${w} is unavailable in the service`))};z.fetchAvailabilityUpsample=function(w,D,H,E,L){E.level=w;E.row=D;E.col=H;const X=this.layer.tileInfo;X.updateTileInfo(E);const U=this.fetchAvailability(w,D,H,L).catch(S=>{if(f.isAbortError(S))throw S;
if(X.upsampleTile(E))return this.fetchAvailabilityUpsample(E.level,E.row,E.col,E);throw S;});this._fetchAvailabilityUpsamplePrefetch(E.id,w,D,H,L,U);return U};z._fetchAvailabilityUpsamplePrefetch=async function(w,D,H,E,L,X){if(this._prefetchingEnabled){var U=`prefetch-${w}`;if(!this._handles.has(U)){var S=f.createAbortController();X.then(()=>S.abort(),()=>S.abort());var Z=!1;this._handles.add({remove(){Z||(Z=!0,S.abort())}},U);await n.waitTicks(10,S.signal).catch(()=>{});Z||(Z=!0,this._handles.remove(U));
if(!f.isAborted(S))for(w={id:w,level:D,row:H,col:E},L={...L,signal:S.signal},D=this.layer.tileInfo,H=0;Q._prefetches.length<Q._maxPrefetch&&D.upsampleTile(w);++H){const aa=this.fetchAvailability(w.level,w.row,w.col,L);Q._prefetches.push(aa);E=()=>{Q._prefetches.removeUnordered(aa)};aa.then(E,E)}}}};z._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var w=this.layer.parsedUrl,D=w.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:w.path,query:D?C.objectToQuery(D):
null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};z._tilemapFromCache=function(w,D,H,E){E.level=w;E.row=D-D%this.size;E.col=H-H%this.size;w=F.tilemapDefinitionId(E);return this._tilemapCache.get(w)};z._initializeAvailableLevels=function(w){this._availableLevels={};w&&w.forEach(D=>this._availableLevels[D.level]=!0)};u._createClass(O,[{key:"size",get:function(){return 1<<this.levels}},{key:"test",get:function(){const w=
this;return{get prefetchingEnabled(){return w._prefetchingEnabled},set prefetchingEnabled(D){w._prefetchingEnabled=D},hasTilemap(D,H,E){return!!w._tilemapFromCache(D,H,E,w._tmpTilemapDefinition)}}}}]);return O}(B);k.TilemapCache._maxPrefetch=4;k.TilemapCache._prefetches=new g({initialSize:Q._maxPrefetch});t.__decorate([b.property({constructOnly:!0,type:Number})],k.TilemapCache.prototype,"levels",void 0);t.__decorate([l.cast("levels")],k.TilemapCache.prototype,"castLevels",null);t.__decorate([b.property({readOnly:!0,
dependsOn:["levels"],type:Number})],k.TilemapCache.prototype,"size",null);t.__decorate([b.property({constructOnly:!0,type:Number})],k.TilemapCache.prototype,"cacheByteSize",void 0);t.__decorate([b.property({constructOnly:!0})],k.TilemapCache.prototype,"layer",void 0);t.__decorate([b.property({constructOnly:!0})],k.TilemapCache.prototype,"request",void 0);k.TilemapCache=Q=t.__decorate([v.subclass("esri.layers.support.TilemapCache")],k.TilemapCache);Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/layers/support/Tilemap":function(){define(["exports","../../core/lang","../../core/Error","../../core/arrayUtils","../../request"],function(k,u,t,m,d){function b(p){if("vector-tile"===p.service.type)var v=`${p.service.url}/tilemap/${p.level}/${p.row}/${p.col}/${p.width}/${p.height}`;else v=p.service.tileServers,v=`${v&&v.length?v[p.row%v.length]:p.service.url}/tilemap/${p.level}/${p.row}/${p.col}/${p.width}/${p.height}`;(p=p.service.query)&&(v=`${v}?${p}`);return v}let l=function(){function p(){this.location=
{left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var v=p.prototype;v.getAvailability=function(q,C){if("unknown"!==this._allAvailability)return this._allAvailability;q=(q-this.location.top)*this.location.width+(C-this.location.left);C=q>>3;const G=this._tileAvailabilityBitSet;return 0>C||C>G.length?"unknown":G[C]&1<<q%8?"available":"unavailable"};v._updateFromData=function(q){let C=!0,G=!0;const c=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));
let g=0;for(let f=0;f<q.length;f++){const n=f%8;q[f]?(G=!1,c[g]|=1<<n):C=!1;7===n&&++g}G?this._allAvailability="unavailable":C?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=c,this.byteSize+=c.length)};p.fromDefinition=function(q,C){const G=q.service.request||d,{row:c,col:g,width:f,height:n}=q,B={query:{f:"json"}};C=C?{...B,...C}:B;return G(b(q),C).then(x=>x.data).catch(x=>{if(x&&x.details&&422===x.details.httpStatus)return{location:{top:c,left:g,width:f,
height:n},valid:!0,data:m.constant(f*n,0)};throw x;}).then(x=>{if(x.location&&(x.location.top!==c||x.location.left!==g||x.location.width!==f||x.location.height!==n))throw new t("tilemap:location-mismatch","Tilemap response for different location than requested",{response:x,definition:{top:c,left:g,width:f,height:n}});return p.fromJSON(x)})};p.fromJSON=function(q){p.validateJSON(q);const C=new p;C.location=Object.freeze(u.clone(q.location));C._updateFromData(q.data);return Object.freeze(C)};p.validateJSON=
function(q){if(!q||!q.location)throw new t("tilemap:missing-location","Location missing from tilemap response");if(!1===q.valid)throw new t("tilemap:invalid","Tilemap response was marked as invalid");if(!q.data)throw new t("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(q.data))throw new t("tilemap:data-mismatch","Data must be an array of numbers");if(q.data.length!==q.location.width*q.location.height)throw new t("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");
};return p}();k.Tilemap=l;k.default=l;k.tilemapDefinitionId=function(p){return`${p.level}/${p.row}/${p.col}/${p.width}/${p.height}`};k.tilemapDefinitionUrl=b;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/SpatialReference ../../geometry ../support/serviceTileInfoProperty ../support/TilemapCache".split(" "),
function(k,u,t,m,d,b,l,p,v,q,C,G,c,g,f,n,B){k.ArcGISCachedService=x=>{x=function(J){function M(){var F=J.apply(this,arguments)||this;F.copyright=null;F.minScale=0;F.maxScale=0;F.spatialReference=null;F.tileInfo=null;F.tilemapCache=null;return F}u._inheritsLoose(M,J);var N=M.prototype;N.readMinScale=function(F,Q){return null!=Q.minLOD&&null!=Q.maxLOD?F:0};N.readMaxScale=function(F,Q){return null!=Q.minLOD&&null!=Q.maxLOD?F:0};N.readTilemapCache=function(F,Q){return Q.capabilities&&-1<Q.capabilities.indexOf("Tilemap")?
new B.TilemapCache({layer:this}):null};u._createClass(M,[{key:"supportsBlankTile",get:function(){return 10.2<=this.version}}]);return M}(x);t.__decorate([l.property({json:{read:{source:"copyrightText"}}})],x.prototype,"copyright",void 0);t.__decorate([l.property()],x.prototype,"minScale",void 0);t.__decorate([v.reader("service","minScale")],x.prototype,"readMinScale",null);t.__decorate([l.property()],x.prototype,"maxScale",void 0);t.__decorate([v.reader("service","maxScale")],x.prototype,"readMaxScale",
null);t.__decorate([l.property({type:g})],x.prototype,"spatialReference",void 0);t.__decorate([l.property({readOnly:!0,dependsOn:["version"]})],x.prototype,"supportsBlankTile",null);t.__decorate([l.property(n.serviceTileInfoProperty)],x.prototype,"tileInfo",void 0);t.__decorate([l.property()],x.prototype,"tilemapCache",void 0);t.__decorate([v.reader("service","tilemapCache",["capabilities"])],x.prototype,"readTilemapCache",null);t.__decorate([l.property()],x.prototype,"version",void 0);return x=t.__decorate([q.subclass("esri.layers.mixins.ArcGISCachedService")],
x)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(k,u){function t(d,b,l,p){if(!d)return null;const {minScale:v,maxScale:q,minLOD:C,maxLOD:G}=b;if(null!=C&&null!=G)return p&&p.ignoreMinMaxLOD?u.fromJSON(d):u.fromJSON({...d,lods:d.lods.filter(({level:c})=>null!=c&&c>=C&&c<=G)});if(0!==v&&0!==q){const c=v?Math.round(1E4*v)/1E4:Infinity,g=q?Math.round(1E4*q)/1E4:-Infinity;return u.fromJSON({...d,lods:d.lods.filter(f=>
{f=Math.round(1E4*f.scale)/1E4;return f<=c&&f>=g})})}return u.fromJSON(d)}const m={type:u,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:t}}}}};k.readServiceTileInfo=t;k.serviceTileInfoProperty=m;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(k){k.checkWebPSupport=function(u){const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",
alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return new Promise(m=>{const d=new Image;d.onload=()=>{d.onload=d.onerror=null;m(0<d.width&&0<d.height)};d.onerror=()=>{d.onload=d.onerror=null;m(!1)};d.src="data:image/webp;base64,"+t[u]})};Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/layers/support/SpriteSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../core/Error ../../core/urlUtils ../../core/promiseUtils ../../request".split(" "),function(k,u,t,m,d,b){const l=u.getLogger("esri.layers.support.SpriteSource");return function(){function p(q,C,G,c){this.baseURL=q;this.devicePixelRatio=C;this.maxTextureSize=G;this._spriteImageFormat=c;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}
var v=p.prototype;v.getSpriteInfo=function(q){return this._spritesData[q]};v.load=async function(q){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(q),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"};v._loadSprites=function(q){this._isRetina=1.15<this.devicePixelRatio?!0:!1;const C=m.urlToObject(this.baseURL),G=C.query?"?"+m.objectToQuery(C.query):"",c=this._isRetina?"@2x":"",g=`${C.path}${c}.${this._spriteImageFormat}${G}`;return d.all([b(`${C.path}${c}.json${G}`,
q),b(g,{responseType:"image",...q})]).then(([f,n])=>{var B=Object.keys(f.data);if(!B||0===B.length||1===B.length&&"_ssl"===B[0]||!n||!n.data)return this._spritesData=this.image=null,this.width=this.height=0,d.resolve(null);this._spritesData=f.data;f=n.data;n=Math.max(this.maxTextureSize,4096);if(f.width>n||f.height>n)throw f=`Sprite resource for style ${C.path} is bigger than the maximum allowed of ${n} pixels}`,l.error(f),new t("SpriteSource",f);this.width=f.width;this.height=f.height;n=document.createElement("canvas");
B=n.getContext("2d");n.width=f.width;n.height=f.height;B.drawImage(f,0,0,f.width,f.height);f=B.getImageData(0,0,f.width,f.height);f=new Uint8Array(f.data);for(B=0;B<f.length;B+=4)n=f[B+3]/255,f[B]*=n,f[B+1]*=n,f[B+2]*=n;this.image=f})};k._createClass(p,[{key:"spriteNames",get:function(){const q=[];for(const C in this._spritesData)q.push(C);q.sort();return q}}]);return p}()})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../config ../../core/urlUtils ../../core/promiseUtils ../../request ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(k,u,t,m,d,b){function l(c){c&&(c=t.getOrigin(c),G&&-1===G.indexOf(c)&&G.push(c))}function p(...c){let g=void 0;for(let f=0;f<c.length;++f)t.isProtocolRelative(c[f])?g&&(g=g.split("://")[0]+":"+c[f].trim()):g=t.isAbsolute(c[f])?c[f]:t.join(g,c[f]);return t.removeTrailingSlash(g)}async function v(c,g,f,n,B){m.throwIfAborted(B);if("string"===typeof f){n=t.normalize(f);l(n);var x=t.urlToObject(n);x=await d(x.path,{query:{f:"json"},responseType:"json",...B});f=n}else x={data:f},f=f.jsonUrl||null;
const J=x.data;x.ssl&&(f&&(f=f.replace(/^http:/i,"https:")),n&&(n=n.replace(/^http:/i,"https:")));return J.sources?(c.styleUrl=f||null,q(c,J,n,B)):J.sources?m.reject("You must specify the URL or the JSON for a service or for a style."):c.sourceUrl?C(c,J,n,!1,g,B):(c.sourceUrl=f||null,C(c,J,n,!0,g,B))}async function q(c,g,f,n){f=f?t.removeFile(f):t.appBaseUrl;c.styleBase=f;c.style=g;c.styleUrl&&l(c.styleUrl);g["sprite-format"]&&"webp"===g["sprite-format"].toLowerCase()&&(c.spriteFormat="webp");const B=
[];if(g.sources&&g.sources.esri){const x=g.sources.esri;x.url?await v(c,"esri",p(f,x.url),void 0,n):B.push(v(c,"esri",x,f,n))}for(const x of Object.keys(g.sources))"esri"!==x&&"vector"===g.sources[x].type&&(g.sources[x].url?B.push(v(c,x,p(f,g.sources[x].url),void 0,n)):B.push(v(c,x,g.sources[x],f,n)));await m.all(B)}async function C(c,g,f,n,B,x){f=f?t.removeTrailingSlash(f)+"/":t.appBaseUrl;if(g.hasOwnProperty("tileInfo"))var J=g;else{var M={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,
ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},N=78271.51696400007,F=2.958287637957775E8,Q=[],W=g.hasOwnProperty("minzoom")?parseFloat(g.minzoom):0,Y=g.hasOwnProperty("maxzoom")?parseFloat(g.maxzoom):22;for(let O=0;O<=Y;O++)O>=W&&Q.push({level:O,scale:F,resolution:N}),N/=2,F/=2;for(J of g.tiles)l(p(f,J));J={capabilities:"TilesOnly",initialExtent:M,fullExtent:M,minScale:0,maxScale:0,tiles:g.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},
lods:Q,spatialReference:{wkid:102100}}}}M=new b(B,f,J);if(!n&&c.primarySourceName in c.sourceNameToSource){N=c.sourceNameToSource[c.primarySourceName];if(!N.isCompatibleWith(M))return m.resolve();null!=M.fullExtent&&(null!=N.fullExtent?N.fullExtent.union(M.fullExtent):N.fullExtent=M.fullExtent.clone());N.tileInfo.lods.length<M.tileInfo.lods.length&&(N.tileInfo=M.tileInfo)}n?(c.sourceBase=f,c.source=g,c.validatedSource=J,c.primarySourceName=B,c.sourceUrl&&l(c.sourceUrl)):l(f);c.sourceNameToSource[B]=
M;if(!c.style)return null==g.defaultStyles?m.reject():"string"===typeof g.defaultStyles?v(c,"",p(f,g.defaultStyles,"root.json"),void 0,x):v(c,"",g.defaultStyles,p(f,"root.json"),x)}const G=u.defaults&&u.defaults.io.corsEnabledServers;k.loadMetadata=async function(c,g){const f={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[n,B]="string"===typeof c?[c,null]:[null,c.jsonUrl],x=n?
t.urlToObject(n):null;await v(f,"esri",c,B,g);c={layerDefinition:f.validatedSource,url:n,parsedUrl:x,serviceUrl:f.sourceUrl,style:f.style,styleUrl:f.styleUrl,spriteUrl:f.style.sprite&&p(f.styleBase,f.style.sprite),spriteFormat:f.spriteFormat,glyphsUrl:f.style.glyphs&&p(f.styleBase,f.style.glyphs),sourceNameToSource:f.sourceNameToSource,primarySourceName:f.primarySourceName};l(c.spriteUrl);l(c.glyphsUrl);return c};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../core/lang ../../../../../core/urlUtils ../../../../../core/promiseUtils ../../../../../geometry/Extent ../../../../../layers/support/serviceTileInfoProperty ../../../../../layers/support/TilemapCache ../TileIndex".split(" "),
function(k,u,t,m,d,b,l){return function(){function p(q,C,G){this.tileMapURL="";this.fullExtent=this.tileIndex=this.capabilities=this.tileInfo=this.parsedUrl=this.tilemapCache=null;this.name=q;if(this.sourceUrl=C)this.parsedUrl=u.urlToObject(this.sourceUrl);const c=this.parsedUrl.path,g=this.parsedUrl.query?"?"+u.objectToQuery(this.parsedUrl.query):"";q=k.clone(G);const f=q.tiles;C&&f.forEach((x,J)=>{u.isAbsolute(x)||(f[J]=u.join(c,x)+g)});this.tileServers=f;G.tileMap&&(this.tileMapURL=u.join(C,G.tileMap));
var n=G.capabilities&&G.capabilities.split(",").map(x=>x.toLowerCase().trim());C=!!G.exportTilesAllowed;n=!!n&&-1!==n.indexOf("tilemap");const B=C&&G.hasOwnProperty("maxExportTilesCount")?G.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:C,supportsTileMap:n},exportTiles:C?{maxExportTilesCount:+B}:null};this.tileInfo=d.readServiceTileInfo(q.tileInfo,q,null,{ignoreMinMaxLOD:!0});n&&(this.type="vector-tile",this.tilemapCache=new b.TilemapCache({layer:this}),this.tileIndex=new l(this.tilemapCache));
this.fullExtent=m.fromJSON(G.fullExtent)}var v=p.prototype;v.getRefKey=function(q,C){return this.tileIndex?this.tileIndex.dataKey(q,C):t.resolve(q)};v.getSourceTileUrl=function(q,C,G){let c=this.tileServers[C%this.tileServers.length];return c=c.replace(/\{z\}/gi,q.toString()).replace(/\{y\}/gi,C.toString()).replace(/\{x\}/gi,G.toString())};v.isCompatibleWith=function(q){var C=this.tileInfo;q=q.tileInfo;if(!C.spatialReference.equals(q.spatialReference)||!C.origin.equals(q.origin)||Math.round(C.dpi)!==
Math.round(q.dpi))return!1;C=C.lods;q=q.lods;const G=Math.min(C.length,q.length);for(let c=0;c<G;c++){const g=C[c],f=q[c];if(g.level!==f.level||Math.round(g.scale)!==Math.round(f.scale))return!1}return!0};return p}()})},"esri/views/2d/engine/vectorTiles/TileIndex":function(){define(["../../../../core/promiseUtils","../../../../layers/support/TilemapCache","../../tiling/TileKey"],function(k,u,t){return function(){function m(b){if(b instanceof u.TilemapCache)this._tilemapCache=b;else if(b&&"index"in
b)this._tilemap=b.index;else throw Error("Invalid tilemap!");}var d=m.prototype;d.dataKey=function(b,l){if(this._tilemapCache){const {level:p,row:v,col:q}=b,C=new t(b);return this._tilemapCache.fetchAvailabilityUpsample(p,v,q,C,l).then(()=>{C.world=b.world;return C}).catch(G=>{if(k.isAbortError(G))throw G;return null})}return this._getIndexedDataKey(b)};d.forEach=function(b,l,p,v,q){this._callback=q;this._maxLevel=l+b;this._forEach(this._tilemap,l,p,v)};d._forEach=function(b,l,p,v){0!==b&&(this._callback(l,
p,v),l!==this._maxLevel&&"object"===typeof b&&(this._forEach(b[0],l+1,2*p,2*v),this._forEach(b[1],l+1,2*p,2*v+1),this._forEach(b[2],l+1,2*p+1,2*v),this._forEach(b[3],l+1,2*p+1,2*v+1)))};d._getIndexedDataKey=function(b){const l=[b];if(0>b.level||0>b.row||0>b.col||0<b.row>>b.level||0<b.col>>b.level)return k.resolve(null);for(;0!==b.level;)b=new t(b.level-1,b.row>>1,b.col>>1,b.world),l.push(b);b=this._tilemap;let p=l.pop(),v,q;if(1===b)return k.resolve(p);for(;l.length;)if(v=l.pop(),q=(v.col&1)+((v.row&
1)<<1),b){if(0===b[q]){p=null;break}if(1===b[q]){p=v;break}p=v;b=b[q]}return k.resolve(p)};return m}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(k,u){let t=function(){function m(b,l,p,v){this.set(b,l,p,v)}m.getId=function(b,l,p,v){return"object"===typeof b?`${b.level}/${b.row}/${b.col}/${b.world}`:`${b}/${l}/${p}/${v}`};var d=m.prototype;d.acquire=function(b,l,p,v){this.set(b,l,p,v)};d.contains=function(b){const l=
b.level-this.level;return this.row===b.row>>l&&this.col===b.col>>l&&this.world===b.world};d.equals=function(b){return this.level===b.level&&this.row===b.row&&this.col===b.col&&this.world===b.world};d.clone=function(){return new m(this)};d.release=function(){this.world=this.col=this.row=this.level=0};d.set=function(b,l,p,v){if(null==b)this.world=this.col=this.row=this.level=0;else if("object"===typeof b)this.level=b.level||0,this.row=b.row||0,this.col=b.col||0,this.world=b.world||0;else if("string"===
typeof b){const [q,C,G,c]=b.split("/");this.level=parseFloat(q);this.row=parseFloat(C);this.col=parseFloat(G);this.world=parseFloat(c)}else this.level=+b,this.row=+l,this.col=+p,this.world=+v||0;return this};d.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};d.getParentKey=function(){return 0>=this.level?null:new m(this.level-1,this.row>>1,this.col>>1,this.world)};d.getChildKeys=function(){const b=this.level+1,l=this.row<<1,p=this.col<<1,v=this.world;return[new m(b,
l,p,v),new m(b,l,p+1,v),new m(b,l+1,p,v),new m(b,l+1,p+1,v)]};d.compareRowMajor=function(b){return this.row<b.row?-1:this.row>b.row?1:this.col<b.col?-1:this.col>b.col?1:0};k._createClass(m,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(b){this.set(b)}}]);return m}();t.pool=new u(t,null,null,25,50);return t})},"esri/portal/support/jsonContext":function(){define(["exports","../../core/urlUtils","../Portal"],function(k,u,t){k.createForItem=function(m){return{origin:"portal-item",
url:u.urlToObject(m.itemUrl),portal:m.portal||t.getDefault(),portalItem:m,readResourcePaths:[]}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(k,u){return function(){function t(d,b){this.lockedSchemaPixelSize=d;this.isGCS=b}var m=t.prototype;m.getLevelRowColumn=function(d){return this.isGCS?[d[0],d[1]>>1,d[2]>>1]:256===this.lockedSchemaPixelSize&&
0<d[0]?[d[0]-1,d[1]>>1,d[2]>>1]:d};m.adjustLevel=function(d){return this.isGCS?d:256===this.lockedSchemaPixelSize?0<d?d-1:0:d};m.getShift=function(d,b){let l=0,p=0;if(256===this.lockedSchemaPixelSize||this.isGCS)d[2]%2&&(l=b),d[1]%2&&(p=b);return[l,p]};m.getScale=function(d){if(this.isGCS){if(512===this.lockedSchemaPixelSize)return 4}else if(256===this.lockedSchemaPixelSize&&0===d)return 1;return 2};t.create256x256CompatibleTileInfo=function(d){if(!d)return null;if(256===d.size[0]&&256===d.size[1])return d;
const b=d.spatialReference.isGeographic,l=[],p=d.lods.length;for(let v=0;v<p;v++){const q=d.lods[v];l.push(new k({level:q.level,scale:q.scale,resolution:b?q.resolution:2*q.resolution}))}return new u({size:[256,256],dpi:d.dpi,format:d.format,compressionQuality:d.compressionQuality,origin:d.origin,spatialReference:d.spatialReference,lods:l})};t.create512x512CompatibleTileInfo=function(d){if(!d||256===d.size[0]||256===d.size[1])return null;const b=[],l=d.lods.length;for(let p=0;p<l;p++){const v=d.lods[p];
b.push(new k({level:v.level,scale:v.scale,resolution:.5*v.resolution}))}return new u({size:[512,512],dpi:d.dpi,format:d.format,compressionQuality:d.compressionQuality,origin:d.origin,spatialReference:d.spatialReference,lods:b})};return t}()})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../layers/support/TileInfo"],function(k,u){k.areSchemasOverlapping=function(t,m){if(t===m)return!0;if(!t&&null!=m||null!=t&&!m||!t.spatialReference.equals(m.spatialReference)||
t.dpi!==m.dpi)return!1;var d=t.origin;const b=m.origin;if(1E-6<=Math.abs(d.x-b.x)||1E-6<=Math.abs(d.y-b.y))return!1;t.lods[0].scale>m.lods[0].scale?(d=t,t=m):d=m;for(m=d.lods[0].scale;m>=t.lods[t.lods.length-1].scale-1E-6;m/=2)if(1E-6>Math.abs(m-t.lods[0].scale))return!0;return!1};k.unionTileInfos=function(t,m){if(t===m)return t;if(!t&&null!=m)return m;if(null!=t&&!m)return t;const d=t.size[0],b=t.format,l=t.dpi,p={x:t.origin.x,y:t.origin.y},v=t.spatialReference.toJSON();var q=t.lods[0].scale>m.lods[0].scale?
t.lods[0]:m.lods[0];t=(t.lods[t.lods.length-1].scale<=m.lods[m.lods.length-1].scale?t.lods[t.lods.length-1]:m.lods[m.lods.length-1]).scale;m=[];let C=q.scale;q=q.resolution;let G=0;for(;C>t;)m.push({level:G,resolution:q,scale:C}),G++,C/=2,q/=2;return new u({size:[d,d],dpi:l,format:b||"pbf",origin:p,lods:m,spatialReference:v})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["../../../../../core/has","./StyleLayer"],function(k,
u){return function(){function t(d,b){this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;d.layers||(d.layers=[]);this.version=parseFloat(d.version);this.sprite=b?b.spriteUrl:d.sprite;this.glyphs=b?b.glyphsUrl:d.glyphs;if(this.layers=d.layers.map((l,p,v)=>this._create(l,p,v)))for(b=0;b<this.layers.length;b++)d=this.layers[b],this._layerByName[d.id.toLowerCase()]=d,this._uidToLayer.set(d.uid,d),0===d.type&&this.backgroundBucketIds.push(d.id);this._identifyRefLayers()}
var m=t.prototype;m.isPainterDataDriven=function(d){return(d=this._layerByName[d.toLowerCase()])?d.isPainterDataDriven():!1};m.getStyleLayerId=function(d){return d>=this.layers.length?null:this.layers[d].id};m.getStyleLayerByUID=function(d){d=this._uidToLayer.get(d);return null!=d?d:null};m.getStyleLayerIndex=function(d){return(d=this._layerByName[d.toLowerCase()])?this.layers.indexOf(d):-1};m.setStyleLayer=function(d,b){if(d&&d.id){b&&b>=this.layers.length&&(b=this.layers.length-1);var l=!0,p;if(p=
this._layerByName[d.id.toLowerCase()]){const v=this.layers.indexOf(p);b||(b=v);b===v?(l=!1,p=t._recreateLayer(d,p),this.layers[b]=p):(this.layers.splice(v,1),p=this._create(d,b,this.layers),this.layers.splice(b,0,p))}else p=this._create(d,b,this.layers),!b||b>=this.layers.length?this.layers.push(p):this.layers.splice(b,0,p);this._layerByName[d.id.toLowerCase()]=p;this._uidToLayer.set(p.uid,p);l&&this._recomputeZValues();this._identifyRefLayers()}};m.getStyleLayer=function(d){return(d=this._layerByName[d.toLowerCase()])?
{type:d.typeName,id:d.id,source:d.source,"source-layer":d.sourceLayer,minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:d.layout,paint:d.paint}:null};m.deleteStyleLayer=function(d){const b=this._layerByName[d.toLowerCase()];b&&(delete this._layerByName[d.toLowerCase()],this._uidToLayer.delete(b.uid),d=this.layers.indexOf(b),this.layers.splice(d,1),this._recomputeZValues(),this._identifyRefLayers())};m.getLayerById=function(d){return this._layerByName[d.toLowerCase()]};m.getLayoutProperties=
function(d){return(d=this._layerByName[d.toLowerCase()])?d.layout:null};m.getPaintProperties=function(d){return(d=this._layerByName[d.toLowerCase()])?d.paint:null};m.setPaintProperties=function(d,b){d=this._layerByName[d.toLowerCase()];if(!d)return"";b=t._recreateLayer({type:d.typeName,id:d.id,source:d.source,"source-layer":d.sourceLayer,minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:d.layout,paint:b},d);const l=this.layers.indexOf(d);this.layers[l]=b;this._layerByName[d.id.toLowerCase()]=
b;this._uidToLayer.set(d.uid,b);return d.id};m.setLayoutProperties=function(d,b){d=this._layerByName[d.toLowerCase()];if(!d)return"";b=t._recreateLayer({type:d.typeName,id:d.id,source:d.source,"source-layer":d.sourceLayer,minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:b,paint:d.paint},d);const l=this.layers.indexOf(d);this.layers[l]=b;this._layerByName[d.id.toLowerCase()]=b;this._uidToLayer.set(d.uid,b);return d.id};m.setStyleLayerVisibility=function(d,b){if(d=this._layerByName[d.toLowerCase()]){var l=
d.layout||{};l.visibility=b;b=t._recreateLayer({type:d.typeName,id:d.id,source:d.source,"source-layer":d.sourceLayer,minzoom:d.minzoom,maxzoom:d.maxzoom,filter:d.filter,layout:l,paint:d.paint},d);l=this.layers.indexOf(d);this.layers[l]=b;this._layerByName[d.id.toLowerCase()]=b;this._uidToLayer.set(d.uid,b)}};m.getStyleLayerVisibility=function(d){var b;d=this._layerByName[d.toLowerCase()];if(!d)return"none";d=d.layout;return null!=(b=null==d?void 0:d.visibility)?b:"visible"};m._recomputeZValues=function(){const d=
this.layers,b=1/(d.length+1);for(let l=0;l<d.length;l++)d[l].z=1-(1+l)*b};m._identifyRefLayers=function(){const d=[],b=[];let l=0;for(const q of this.layers){if(1===q.type){var p=q,v=q.source+"|"+q.sourceLayer;v+="|"+JSON.stringify(q.layout&&q.layout.visibility);v+="|"+JSON.stringify(q.minzoom);v+="|"+JSON.stringify(q.maxzoom);v+="|"+JSON.stringify(q.filter);if(p.hasDataDrivenFill||p.hasDataDrivenOutline)v+="|"+JSON.stringify(l);d.push({key:v,layer:q})}2===q.type&&(p=q,v=q.source+"|"+q.sourceLayer,
v+="|"+JSON.stringify(q.layout&&q.layout.visibility),v+="|"+JSON.stringify(q.minzoom),v+="|"+JSON.stringify(q.maxzoom),v+="|"+JSON.stringify(q.filter),v+="|"+JSON.stringify(q.layout&&q.layout["line-cap"]),v+="|"+JSON.stringify(q.layout&&q.layout["line-join"]),p.hasDataDrivenLine&&(v+="|"+JSON.stringify(l)),b.push({key:v,layer:q}));++l}this._assignRefLayers(d);this._assignRefLayers(b)};m._assignRefLayers=function(d){d.sort((v,q)=>v.key<q.key?-1:v.key>q.key?1:0);let b,l;const p=d.length;for(let v=0;v<
p;v++){const q=d[v];if(q.key===b)q.layer.refLayerId=l;else if(b=q.key,l=q.layer.id,1===q.layer.type&&!q.layer.getPaintProperty("fill-outline-color"))for(let C=v+1;C<p;C++){const G=d[C];if(G.key===b){if(G.layer.getPaintProperty("fill-outline-color")){d[v]=G;d[C]=q;l=G.layer.id;break}}else break}}};m._create=function(d,b,l){b=1-1/(l.length+1)*(1+b);l=this._runningId++;switch(d.type){case "background":return new u.BackgroundStyleLayer(0,d,b,l);case "fill":return new u.FillStyleLayer(1,d,b,l);case "line":return new u.LineStyleLayer(2,
d,b,l);case "symbol":return new u.SymbolStyleLayer(3,d,b,l);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new u.CircleStyleLayer(4,d,b,l)}throw Error("Unknown vector tile layer");};t._recreateLayer=function(d,b){switch(d.type){case "background":return new u.BackgroundStyleLayer(0,d,b.z,b.uid);case "fill":return new u.FillStyleLayer(1,d,b.z,b.uid);case "line":return new u.LineStyleLayer(2,d,b.z,b.uid);case "symbol":return new u.SymbolStyleLayer(3,d,b.z,b.uid);
case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new u.CircleStyleLayer(4,d,b.z,b.uid)}};return t}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(k,u,t,m,d,b){let l=function(){function c(f,n,B,x){this.type=f;this.typeName=n.type;this.id=n.id;this.source=n.source;this.sourceLayer=n["source-layer"];
this.minzoom=n.minzoom;this.maxzoom=n.maxzoom;this.filter=n.filter;this.layout=n.layout;this.paint=n.paint;this.z=B;this.uid=x;switch(f){case 0:this._layoutDefinition=m.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=m.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=m.StyleDefinition.fillLayoutDefinition;this._paintDefinition=m.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=m.StyleDefinition.lineLayoutDefinition;this._paintDefinition=
m.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=m.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=m.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=m.StyleDefinition.circleLayoutDefinition,this._paintDefinition=m.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var g=c.prototype;g.getFeatureFilter=function(){return void 0!==this._featureFilter?
this._featureFilter:this._featureFilter=t.createFilter(this.filter)};g.getLayoutProperty=function(f){return this._layoutProperties[f]};g.getPaintProperty=function(f){return this._paintProperties[f]};g.getLayoutValue=function(f,n,B){let x;const J=this._layoutProperties[f];J&&(x=J.getValue(n,B));const M=this._layoutDefinition[f];void 0===x&&(x=M["default"]);"enum"===M.type?x=M.values.indexOf(x):"array"===M.type&&"enum"===M.value&&(x=x.map(N=>M.values.indexOf(N)));return x};g.getPaintValue=function(f,
n,B){let x;const J=this._paintProperties[f];J&&(x=J.getValue(n,B));f=this._paintDefinition[f];void 0===x&&(x=f["default"]);"enum"===f.type&&(x=f.values.indexOf(x));return x};g.isPainterDataDriven=function(){const f=this._paintProperties;if(f)for(const n in f)if(f[n].isDataDriven)return!0;return!1};g._parseLayout=function(f){const n={};for(const B in f){const x=this._layoutDefinition[B];x&&(n[B]=new d(x,f[B]))}return n};g._parsePaint=function(f){const n={};for(const B in f){const x=this._paintDefinition[B];
x&&(n[B]=new d(x,f[B]))}return n};return c}(),p=function(c){function g(f,n,B,x){return c.call(this,f,n,B,x)||this}u._inheritsLoose(g,c);return g}(l),v=function(c){function g(f,n,B,x){f=c.call(this,f,n,B,x)||this;n=f.getPaintProperty("fill-color");f.hasDataDrivenColor=n?n.isDataDriven:!1;n=f.getPaintProperty("fill-opacity");f.hasDataDrivenOpacity=n?n.isDataDriven:!1;f.hasDataDrivenFill=f.hasDataDrivenColor||f.hasDataDrivenOpacity;n=f.getPaintProperty("fill-outline-color");f.outlineUsesFillColor=!n;
f.hasDataDrivenOutlineColor=n?n.isDataDriven:!1;f.hasDataDrivenOutline=(n?f.hasDataDrivenOutlineColor:f.hasDataDrivenColor)||f.hasDataDrivenOpacity;return f}u._inheritsLoose(g,c);return g}(l),q=function(c){function g(f,n,B,x){f=c.call(this,f,n,B,x)||this;B=f.getPaintProperty("line-color");f.hasDataDrivenColor=B?B.isDataDriven:!1;B=f.getPaintProperty("line-opacity");f.hasDataDrivenOpacity=B?B.isDataDriven:!1;B=f.getPaintProperty("line-width");f.hasDataDrivenWidth=B?B.isDataDriven:!1;f.hasDataDrivenLine=
f.hasDataDrivenColor||f.hasDataDrivenOpacity||f.hasDataDrivenWidth;n=n.paint["line-width"];n||(n=m.StyleDefinition.linePaintDefinition["line-width"].default);f.isThinLine=!f.hasDataDrivenWidth&&"number"===typeof n&&n<b.THIN_LINE_THRESHOLD;return f}u._inheritsLoose(g,c);return g}(l),C=function(c){function g(f,n,B,x){f=c.call(this,f,n,B,x)||this;n=f.getPaintProperty("icon-color");f.hasDataDrivenIconColor=n?n.isDataDriven:!1;n=f.getPaintProperty("icon-opacity");f.hasDataDrivenIconOpacity=n?n.isDataDriven:
!1;n=f.getLayoutProperty("icon-size");f.hasDataDrivenIconSize=n?n.isDataDriven:!1;f.hasDataDrivenIcon=f.hasDataDrivenIconColor||f.hasDataDrivenIconOpacity||f.hasDataDrivenIconSize;n=f.getPaintProperty("text-color");f.hasDataDrivenTextColor=n?n.isDataDriven:!1;n=f.getPaintProperty("text-opacity");f.hasDataDrivenTextOpacity=n?n.isDataDriven:!1;n=f.getLayoutProperty("text-size");f.hasDataDrivenTextSize=n?n.isDataDriven:!1;f.hasDataDrivenText=f.hasDataDrivenTextColor||f.hasDataDrivenTextOpacity||f.hasDataDrivenTextSize;
return f}u._inheritsLoose(g,c);return g}(l),G=function(c){function g(f,n,B,x){f=c.call(this,f,n,B,x)||this;n=f.getPaintProperty("circle-radius");f.hasDataDrivenRadius=n?n.isDataDriven:!1;n=f.getPaintProperty("circle-color");f.hasDataDrivenColor=n?n.isDataDriven:!1;n=f.getPaintProperty("circle-opacity");f.hasDataDrivenOpacity=n?n.isDataDriven:!1;n=f.getPaintProperty("circle-stroke-width");f.hasDataDrivenStrokeWidth=n?n.isDataDriven:!1;n=f.getPaintProperty("circle-stroke-color");f.hasDataDrivenStrokeColor=
n?n.isDataDriven:!1;n=f.getPaintProperty("circle-stroke-opacity");f.hasDataDrivenStrokeOpacity=n?n.isDataDriven:!1;n=f.getPaintProperty("circle-blur");f.hasDataDrivenBlur=n?n.isDataDriven:!1;return f}u._inheritsLoose(g,c);return g}(l);k.BackgroundStyleLayer=p;k.CircleStyleLayer=G;k.FillStyleLayer=v;k.IconLayout=function(c,g,f,n){this.allowOverlap=c.getLayoutValue("icon-allow-overlap",g,n);this.anchor=c.getLayoutValue("icon-anchor",g,n);this.ignorePlacement=c.getLayoutValue("icon-ignore-placement",
g,n);this.keepUpright=c.getLayoutValue("icon-keep-upright",g,n);this.offset=c.getLayoutValue("icon-offset",g,n);this.optional=c.getLayoutValue("icon-optional",g,n);this.padding=c.getLayoutValue("icon-padding",g,n);this.rotate=c.getLayoutValue("icon-rotate",g,n);this.rotationAlignment=c.getLayoutValue("icon-rotation-alignment",g,n);this.size=c.getLayoutValue("icon-size",g,n);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)};k.LineStyleLayer=q;k.StyleLayer=l;k.SymbolStyleLayer=C;k.TextLayout=
function(c,g,f,n){this.allowOverlap=c.getLayoutValue("text-allow-overlap",g,n);this.anchor=c.getLayoutValue("text-anchor",g,n);this.fontArray=c.getLayoutValue("text-font",g,n);this.ignorePlacement=c.getLayoutValue("text-ignore-placement",g,n);this.justify=c.getLayoutValue("text-justify",g,n);this.keepUpright=c.getLayoutValue("text-keep-upright",g,n);this.letterSpacing=c.getLayoutValue("text-letter-spacing",g,n);this.lineHeight=c.getLayoutValue("text-line-height",g,n);this.maxAngle=c.getLayoutValue("text-max-angle",
g,n);this.maxWidth=c.getLayoutValue("text-max-width",g,n);this.offset=c.getLayoutValue("text-offset",g,n);this.optional=c.getLayoutValue("text-optional",g,n);this.padding=c.getLayoutValue("text-padding",g,n);this.rotate=c.getLayoutValue("text-rotate",g,n);this.rotationAlignment=c.getLayoutValue("text-rotation-alignment",g,n);this.size=c.getLayoutValue("text-size",g,n);this.transform=c.getLayoutValue("text-transform",g,n);this.writingMode=c.getLayoutValue("text-writing-mode",g,n);2===this.rotationAlignment&&
(this.rotationAlignment=f?0:1)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../../../../../chunks/expression"],function(k){return function(){function u(t){this._expression=t}u.prototype.filter=function(t,m){if(!this._expression)return!0;try{return this._expression.evaluate(t,m)}catch(d){return console.log(d.message),!0}};u.createFilter=function(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const m=
k.createExpression(t);return new u(m)}catch(m){return console.log(m.message),null}};u.isLegacyFilter=function(t){if(!Array.isArray(t)||0===t.length)return!0;switch(t[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===t.length&&"string"===typeof t[1]&&!Array.isArray(t[2]);case "in":return 3<=t.length&&"string"===typeof t[1]&&!Array.isArray(t[2]);case "!in":return!0;case "any":case "all":for(let m=1;m<t.length;m++)if(!this.isLegacyFilter(t[1]))return!1;
return!0;case "none":return!0;case "has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);case "!has":return!0;default:return!1}};u.convertLegacyFilter=function(t){if(!Array.isArray(t)||0===t.length)return!0;const m=t[0];if(1===t.length)return"any"!==m;switch(m){case "\x3d\x3d":return u.convertComparison("\x3d\x3d",t[1],t[2]);case "!\x3d":return u.negate(u.convertComparison("\x3d\x3d",t[1],t[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return u.convertComparison(m,t[1],t[2]);case "in":return u.convertIn(t[1],
t.slice(2));case "!in":return u.negate(u.convertIn(t[1],t.slice(2)));case "any":case "all":case "none":return u.convertCombining(m,t.slice(1));case "has":return u.convertHas(t[1]);case "!has":return u.negate(u.convertHas(t[1]));default:throw Error("Unexpected legacy filter.");}};u.convertComparison=function(t,m,d){switch(m){case "$type":return[t,["geometry-type"],d];case "$id":return[t,["id"],d];default:return[t,["get",m],d]}};u.convertIn=function(t,m){switch(t){case "$type":return["in",["geometry-type"],
["literal",m]];case "$id":return["in",["id"],["literal",m]];default:return["in",["get",t],["literal",m]]}};u.convertHas=function(t){switch(t){case "$type":return!0;case "$id":return["has-id"];default:return["has",t]}};u.convertCombining=function(t,m){return[t].concat(m.map(this.convertLegacyFilter))};u.negate=function(t){return["!",t]};return u}()})},"esri/chunks/expression":function(){define("exports ./_rollupPluginBabelHelpers ../Color ../views/2d/engine/vectorTiles/expression/data ../views/2d/unitBezier ../views/2d/engine/vectorTiles/GeometryUtils".split(" "),
function(k,u,t,m,d,b){function l(e){return e>I?Math.pow(e,1/3):e/A+ha}function p(e){return e>P?e*e*e:A*(e-ha)}function v(e){return 255*(.0031308>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function q(e){e/=255;return.04045>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)}function C(e){var a=q(e.r);const h=q(e.g),r=q(e.b),y=l((.4124564*a+.3575761*h+.1804375*r)/.95047),K=l(.2126729*a+.7151522*h+.072175*r);a=l((.0193339*a+.119192*h+.9503041*r)/1.08883);return{l:116*K-16,a:500*(y-K),b:200*(K-a),alpha:e.a}}function G(e){let a=
(e.l+16)/116,h=isNaN(e.a)?a:a+e.a/500,r=isNaN(e.b)?a:a-e.b/200;a=1*p(a);h=.95047*p(h);r=1.08883*p(r);return new t([v(3.2404542*h-1.5371385*a-.4985314*r),v(-.969266*h+1.8760108*a+.041556*r),v(.0556434*h-.2040259*a+1.0572252*r),e.alpha])}function c(e,a,h){return{l:b.interpolate(e.l,a.l,h),a:b.interpolate(e.a,a.a,h),b:b.interpolate(e.b,a.b,h),alpha:b.interpolate(e.alpha,a.alpha,h)}}function g(e){const {l:a,a:h,b:r}=C(e),y=Math.atan2(r,h)*ba;return{h:0>y?y+360:y,c:Math.sqrt(h*h+r*r),l:a,alpha:e.a}}function f(e){const a=
e.h*R,h=e.c;return G({l:e.l,a:Math.cos(a)*h,b:Math.sin(a)*h,alpha:e.alpha})}function n(e,a,h){{var r=e.h;const y=a.h-r;r+=h*(180<y||-180>y?y-360*Math.round(y/360):y)}return{h:r,c:b.interpolate(e.c,a.c,h),l:b.interpolate(e.l,a.l,h),alpha:b.interpolate(e.alpha,a.alpha,h)}}function B(e,a){return{kind:"array",itemType:e,n:a}}function x(e){if("array"===e.kind){const a=x(e.itemType);return"number"===typeof e.n?`array<${a}, ${e.n}>`:"value"===e.itemType.kind?"array":`array<${a}>`}return e.kind}function J(e){if(null===
e)return va;if("string"===typeof e)return ia;if("boolean"===typeof e)return ja;if("number"===typeof e)return ka;if(e instanceof t)return oa;if(Array.isArray(e)){let a;for(const h of e){const r=J(h);if(a){if(a!==r){a=pa;break}}else a=r}return B(a||pa,e.length)}return qa}function M(e,a){if("error"===e.kind)return null;if("array"===a.kind){if("array"===e.kind&&(0===e.n&&"value"===e.itemType.kind||!M(e.itemType,a.itemType))&&("number"!==typeof a.n||a.n===e.n))return null}else{if(a.kind===e.kind)return null;
if("value"===a.kind)for(const h of Na)if(!M(h,e))return null}return`Expected ${x(a)} but found ${x(e)} instead.`}function N(e){const a=typeof e;return null===e?"":"string"===a||"number"===a||"boolean"===a?String(e):e instanceof t?e.toString():JSON.stringify(e)}function F(e){if(null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e)e=["literal",e];if(!Array.isArray(e)||0===e.length)throw Error("Expression must be a non empty array");const a=e[0];if("string"!==typeof a)throw Error("First element of expression must be a string");
const h=wa[a];if(void 0===h)throw Error(`Invalid expression operator "${a}"`);if(!h)throw Error(`Unimplemented expression operator "${a}"`);return h.parse(e)}let Q=function(){function e(a){this.args=a}e.parse=function(a){if(4!==a.length)throw Error('"rgb" expects 3 arguments.');a=a.slice(1).map(h=>F(h));return new e(a)};e.prototype.evaluate=function(a,h){const r=this.args[1].evaluate(a,h),y=this.args[2].evaluate(a,h);a=this.args[3].evaluate(a,h);return`rgb(${Math.round(r)},${Math.round(y)},${Math.round(a)})`};
return e}(),W=function(){function e(a){this.args=a}e.parse=function(a){if(5!==a.length)throw Error('"rgba" expects 4 arguments.');a=a.slice(1).map(h=>F(h));return new Q(a)};e.prototype.evaluate=function(a,h){const r=this.args[1].evaluate(a,h),y=this.args[2].evaluate(a,h),K=this.args[3].evaluate(a,h);a=this.args[4].evaluate(a,h);return`rgb(${Math.round(r)},${Math.round(y)},${Math.round(K)},${a})`};return e}(),Y=function(){function e(a){this.color=a}e.parse=function(a){if(2!==a.length)throw Error('"to-rgba" expects 1 argument.');
a=F(a[1]);return new e(a)};e.prototype.evaluate=function(a,h){return(new t(this.color.evaluate(a,h))).toRgba()};return e}(),O=function(){function e(a,h,r){this.lhs=a;this.rhs=h;this.compare=r}e.parse=function(a,h){if(3!==a.length&&4!==a.length)throw Error(`"${a[0]}" expects 2 or 3 arguments`);if(4===a.length)throw Error(`"${a[0]}" collator not supported`);return new e(F(a[1]),F(a[2]),h)};e.prototype.evaluate=function(a,h){return this.compare(this.lhs.evaluate(a,h),this.rhs.evaluate(a,h))};return e}(),
z=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r===y)};return a}(O),w=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r!==y)};return a}(O),D=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r<y)};return a}(O),H=function(e){function a(){return e.apply(this,arguments)||
this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r<=y)};return a}(O),E=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r>y)};return a}(O),L=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return O.parse(h,(r,y)=>r>=y)};return a}(O),X=function(){function e(a){this.arg=a}e.parse=function(a){if(2!==a.length)throw Error('"!" expects 1 argument');
return new e(F(a[1]))};e.prototype.evaluate=function(a,h){return!this.arg.evaluate(a,h)};return e}(),U=function(){function e(a){this.args=a}e.parse=function(a){const h=[];for(let r=1;r<a.length;r++)h.push(F(a[r]));return new e(h)};e.prototype.evaluate=function(a,h){for(const r of this.args)if(!r.evaluate(a,h))return!1;return!0};return e}(),S=function(){function e(a){this.args=a}e.parse=function(a){const h=[];for(let r=1;r<a.length;r++)h.push(F(a[r]));return new e(h)};e.prototype.evaluate=function(a,
h){for(const r of this.args)if(r.evaluate(a,h))return!0;return!1};return e}(),Z=function(){function e(a){this.args=a}e.parse=function(a){const h=[];for(let r=1;r<a.length;r++)h.push(F(a[r]));return new e(h)};e.prototype.evaluate=function(a,h){for(const r of this.args)if(r.evaluate(a,h))return!1;return!0};return e}(),aa=function(){function e(a,h){this.args=a;this.fallback=h}e.parse=function(a){if(4>a.length)throw Error('"case" expects at least 3 arguments');if(1===a.length%2)throw Error('"case" expects an odd number of arguments');
const h=[];for(let r=1;r<a.length-1;r+=2)h.push({condition:F(a[r]),output:F(a[r+1])});return new e(h,F(a[a.length-1]))};e.prototype.evaluate=function(a,h){for(const r of this.args)if(r.condition.evaluate(a,h))return r.output.evaluate(a,h);return this.fallback.evaluate(a,h)};return e}(),fa=function(){function e(a){this.args=a}e.parse=function(a){if(2>a.length)throw Error('"coalesce" expects at least 1 argument');const h=[];for(let r=1;r<a.length;r++)h.push(F(a[r]));return new e(h)};e.prototype.evaluate=
function(a,h){for(const r of this.args){const y=r.evaluate(a,h);if(null!==y)return y}return null};return e}(),da=function(){function e(a,h,r,y){this.input=a;this.labels=h;this.outputs=r;this.fallback=y}e.parse=function(a){if(3>a.length)throw Error('"match" expects at least 3 arguments');if(0===a.length%2)throw Error('"case" expects an even number of arguments');const h=F(a[1]),r=[],y={};let K;for(let ea=2;ea<a.length-1;ea+=2){var V=a[ea];Array.isArray(V)||(V=[V]);for(const ra of V){V=typeof ra;if("string"!==
V&&"number"!==V)throw Error('"match" requires string or number literal as labels');if(!K)K=V;else if(V!==K)throw Error('"match" requires labels to have the same type');y[ra]=r.length}r.push(F(a[ea+1]))}return new e(h,y,r,F(a[a.length-1]))};e.prototype.evaluate=function(a,h){const r=this.input.evaluate(a,h);return(this.outputs[this.labels[r]]||this.fallback).evaluate(a,h)};return e}();const ha=4/29,P=6/29,A=3*P*P,I=P*P*P,R=Math.PI/180,ba=180/Math.PI;let la=function(){function e(a,h,r,y){this.operator=
a;this.input=h;this.stops=r;this.interpolation=y}e.parse=function(a){if(5>a.length)throw Error(`"${a[0]}" expects at least 4 arguments.`);const h=a[1];if(!Array.isArray(h)||0===h.length)throw Error(`"${a[0]}" expects an interpolation type expression.`);switch(h[0]){case "linear":break;case "exponential":if("number"!==typeof h[1])throw Error(`"${a[0]}" expects a numeric base for exponential interpolation.`);break;case "cubic-bezier":if(5!==h.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.");
for(var r=1;5>r;r++){var y=h[r];if("number"!==typeof y||0>y||1<y)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.");}break;default:throw Error(`"${a[0]}" unknown interpolation type "${h[0]}".`);}if(1!==a.length%2)throw Error(`"${a[0]}" expects an even number of arguments.`);r=F(a[2]);y=[];for(let K=3;K<a.length;K+=2){const V=a[K];if("number"!==typeof V)throw Error(`"${a[0]}" requires stop inputs as literal numbers.`);if(y.length&&y[y.length-1][0]>=
V)throw Error(`"${a[0]}" requires strictly ascending stop inputs.`);y.push([V,F(a[K+1])])}return new e(a[0],r,y,h)};e.prototype.evaluate=function(a,h){const r=this.stops;if(1===r.length)return r[0][1].evaluate(a,h);var y=this.input.evaluate(a,h);if(y<=r[0][0])return r[0][1].evaluate(a,h);if(y>=r[r.length-1][0])return r[r.length-1][1].evaluate(a,h);let K=0;for(;++K<r.length&&!(y<r[K][0]););const V=e.interpolationRatio(this.interpolation,y,r[K-1][0],r[K][0]);y=r[K-1][1].evaluate(a,h);const ea=r[K][1].evaluate(a,
h);return"interpolate"===this.operator?Array.isArray(y)?y.map((ra,Oa)=>b.interpolate(ra,ea[Oa],V)):b.interpolate(y,ea,V):"interpolate-hcl"===this.operator?f(n(g(y),g(ea),V)):G(c(C(y),C(ea),V))};e.interpolationRatio=function(a,h,r,y){let K=0;"exponential"===a[0]?K=e.exponentialInterpolationRatio(h,a[1],r,y):"linear"===a[0]?K=e.exponentialInterpolationRatio(h,1,r,y):"cubic-bezier"===a[0]&&(K=d.unitBezier(a[1],a[2],a[3],a[4])(e.exponentialInterpolationRatio(h,1,r,y),1E-5));return K};e.exponentialInterpolationRatio=
function(a,h,r,y){y-=r;if(0===y)return 0;a-=r;return 1===h?a/y:(Math.pow(h,a)-1)/(Math.pow(h,y)-1)};return e}(),sa=function(){function e(a,h){this.input=a;this.stops=h}e.parse=function(a){if(5>a.length)throw Error('"step" expects at least 4 arguments.');if(1!==a.length%2)throw Error('"step" expects an even number of arguments.');const h=F(a[1]),r=[];r.push([-Infinity,F(a[2])]);for(let y=3;y<a.length;y+=2){const K=a[y];if("number"!==typeof K)throw Error('"step" requires stop inputs as literal numbers.');
if(r.length&&r[r.length-1][0]>=K)throw Error('"step" requires strictly ascending stop inputs.');r.push([K,F(a[y+1])])}return new e(h,r)};e.prototype.evaluate=function(a,h){const r=this.stops;if(1===r.length)return r[0][1].evaluate(a,h);const y=this.input.evaluate(a,h);let K=0;for(;++K<r.length&&!(y<r[K][0]););return this.stops[K-1][1].evaluate(a,h)};return e}(),ta=function(){function e(a,h){this.index=a;this.array=h}e.parse=function(a){if(3!==a.length)throw Error('"at" expects 2 arguments.');const h=
F(a[1]);a=F(a[2]);return new e(h,a)};e.prototype.evaluate=function(a,h){const r=this.index.evaluate(a,h);a=this.array.evaluate(a,h);if(0>r||r>=a.length)throw Error('"at" index out of bounds.');if(r!==Math.floor(r))throw Error('"at" index must be an integer.');return a[r]};return e}(),xa=function(){function e(a,h){this.key=a;this.obj=h}e.parse=function(a){let h;switch(a.length){case 2:return h=F(a[1]),new e(h);case 3:return h=F(a[1]),a=F(a[2]),new e(h,a);default:throw Error('"get" expects 1 or 2 arguments');
}};e.prototype.evaluate=function(a,h){const r=this.key.evaluate(a,h);return this.obj?this.obj.evaluate(a,h)[r]:a.values[r]};return e}(),ya=function(){function e(a,h){this.key=a;this.obj=h}e.parse=function(a){let h;switch(a.length){case 2:return h=F(a[1]),new e(h);case 3:return h=F(a[1]),a=F(a[2]),new e(h,a);default:throw Error('"has" expects 1 or 2 arguments');}};e.prototype.evaluate=function(a,h){const r=this.key.evaluate(a,h);return this.obj?(a=this.obj.evaluate(a,h),r in a):void 0!==a.values[r]};
return e}(),za=function(){function e(a,h){this.key=a;this.vals=h}e.parse=function(a){if(3!==a.length)throw Error('"in" expects 2 arguments');return new e(F(a[1]),F(a[2]))};e.prototype.evaluate=function(a,h){const r=this.key.evaluate(a,h);return-1!==this.vals.evaluate(a,h).indexOf(r)};return e}(),Aa=function(){function e(a,h,r){this.item=a;this.array=h;this.from=r}e.parse=function(a){if(3>a.length||4<a.length)throw Error('"index-of" expects 3 or 4 arguments.');const h=F(a[1]),r=F(a[2]);return 4===
a.length?(a=F(a[3]),new e(h,r,a)):new e(h,r)};e.prototype.evaluate=function(a,h){const r=this.item.evaluate(a,h),y=this.array.evaluate(a,h);if(this.from){a=this.from.evaluate(a,h);if(a!==Math.floor(a))throw Error('"index-of" index must be an integer.');return y.indexOf(r,a)}return y.indexOf(r)};return e}(),Ba=function(){function e(a){this.arg=a}e.parse=function(a){if(2!==a.length)throw Error('"length" expects 2 arguments.');a=F(a[1]);return new e(a)};e.prototype.evaluate=function(a,h){a=this.arg.evaluate(a,
h);if("string"===typeof a||Array.isArray(a))return a.length;throw Error('"length" expects string or array.');};return e}(),Ca=function(){function e(a,h,r){this.array=a;this.from=h;this.to=r}e.parse=function(a){if(3>a.length||4<a.length)throw Error('"slice" expects 2 or 3 arguments.');const h=F(a[1]),r=F(a[2]);return 4===a.length?(a=F(a[3]),new e(h,r,a)):new e(h,r)};e.prototype.evaluate=function(a,h){const r=this.array.evaluate(a,h),y=this.from.evaluate(a,h);if(0>y||y>=r.length)throw Error('"slice" index out of bounds.');
if(y!==Math.floor(y))throw Error('"slice" index must be an integer.');if(this.to){a=this.to.evaluate(a,h);if(0>a||a>=r.length)throw Error('"slice" index out of bounds.');if(a!==Math.floor(a))throw Error('"slice" index must be an integer.');return r.slice(y,a)}return r.slice(y)};return e}(),Da=function(){function e(){}e.parse=function(a){if(1!==a.length)throw Error('"has-id" expects no arguments');return new e};e.prototype.evaluate=function(a,h){return void 0!==a.id};return e}(),ca=function(){function e(a,
h){this.args=a;this.calculate=h}e.parse=function(a,h){a=a.slice(1).map(r=>F(r));return new e(a,h)};e.prototype.evaluate=function(a,h){let r;this.args&&(r=this.args.map(y=>y.evaluate(a,h)));return this.calculate(r)};return e}(),Ea=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){switch(h.length){case 2:return ca.parse(h,r=>-r[0]);case 3:return ca.parse(h,r=>r[0]-r[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return a}(ca),Fa=function(e){function a(){return e.apply(this,
arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return ca.parse(h,r=>{let y=1;for(const K of r)y*=K;return y})};return a}(ca),Ga=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){if(3===h.length)return ca.parse(h,r=>r[0]/r[1]);throw Error('"/" expects 2 arguments');};return a}(ca),Ha=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){if(3===h.length)return ca.parse(h,r=>r[0]%r[1]);
throw Error('"%" expects 2 arguments');};return a}(ca),Ia=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){if(3===h.length)return ca.parse(h,r=>Math.pow(r[0],r[1]));throw Error('"^" expects 1 or 2 arguments');};return a}(ca),Ja=function(e){function a(){return e.apply(this,arguments)||this}u._inheritsLoose(a,e);a.parse=function(h){return ca.parse(h,r=>{let y=0;for(const K of r)y+=K;return y})};return a}(ca),T=function(){function e(a,h){this.args=
a;this.calculate=h}e.parse=function(a){const h=a.slice(1).map(r=>F(r));return new e(h,e.ops[a[0]])};e.prototype.evaluate=function(a,h){let r;this.args&&(r=this.args.map(y=>y.evaluate(a,h)));return this.calculate(r)};return e}();T.ops={abs:e=>Math.abs(e[0]),acos:e=>Math.acos(e[0]),asin:e=>Math.asin(e[0]),atan:e=>Math.atan(e[0]),ceil:e=>Math.ceil(e[0]),cos:e=>Math.cos(e[0]),e:()=>Math.E,floor:e=>Math.floor(e[0]),ln:e=>Math.log(e[0]),ln2:()=>Math.LN2,log10:e=>Math.log(e[0])/Math.LN10,log2:e=>Math.log(e[0])/
Math.LN2,max:e=>Math.max(...e),min:e=>Math.min(...e),pi:()=>Math.PI,round:e=>Math.round(e[0]),sin:e=>Math.sin(e[0]),sqrt:e=>Math.sqrt(e[0]),tan:e=>Math.tan(e[0])};let Ka=function(){function e(a){this.args=a}e.parse=function(a){return new e(a.slice(1).map(h=>F(h)))};e.prototype.evaluate=function(a,h){return this.args.map(r=>r.evaluate(a,h)).join("")};return e}(),ua=function(){function e(a,h){this.arg=a;this.calculate=h}e.parse=function(a){if(2!==a.length)throw Error(`${a[0]} expects 1 argument.`);
const h=F(a[1]);return new e(h,e.ops[a[0]])};e.prototype.evaluate=function(a,h){return this.calculate(this.arg.evaluate(a,h))};return e}();ua.ops={downcase:e=>e.toLowerCase(),upcase:e=>e.toUpperCase()};const va={kind:"null"},ka={kind:"number"},ia={kind:"string"},ja={kind:"boolean"},oa={kind:"color"},qa={kind:"object"},pa={kind:"value"},Na=[va,ka,ia,ja,oa,qa,B(pa)];let ma=function(){function e(a,h){this.type=a;this.args=h}e.parse=function(a){var h=a[0];if(2>a.length)throw Error(`${h} expects at least one argument.`);
let r=1,y;if("array"===h){if(2<a.length){switch(a[1]){case "string":y=ia;break;case "number":y=ka;break;case "boolean":y=ja;break;default:throw Error('"array" type argument must be string, number or boolean');}r++}else y=pa;if(3<a.length){var K=a[2];if(null!==K&&("number"!==typeof K||0>K||K!==Math.floor(K)))throw Error('"array" length argument must be a positive integer literal');r++}y=B(y,K)}else switch(h){case "string":y=ia;break;case "number":y=ka;break;case "boolean":y=ja;break;case "object":y=
qa}for(h=[];r<a.length;r++)K=F(a[r]),h.push(K);return new e(y,h)};e.prototype.evaluate=function(a,h){for(const r of this.args){const y=r.evaluate(a,h);if(!M(J(y),this.type))return y}return null};return e}(),na=function(){function e(a,h){this.type=a;this.args=h}e.parse=function(a){var h=a[0];if("to-boolean"===h||"to-string"===h){if(2!==a.length)throw Error(`${h} expects one argument.`);}else if(2>a.length)throw Error(`${h} expects at least one argument.`);h=e.types[h];const r=[];for(let y=1;y<a.length;y++){const K=
F(a[y]);r.push(K)}return new e(h,r)};e.prototype.evaluate=function(a,h){if(this.type===ja)return!!this.args[0].evaluate(a,h);if(this.type===ia)return N(this.args[0].evaluate(a,h));if(this.type===ka){for(var r of this.args){var y=r.evaluate(a,h);if(null===y)return 0;y=Number(y);if(!isNaN(y))return y}return null}if(this.type===oa){for(y of this.args){r=y.evaluate(a,h);if(r instanceof t)return r;if("string"===typeof r)return t.fromString(r);if(Array.isArray(r)&&(3===r.length||4===r.length))return t.fromArray(r)}return null}};
return e}();na.types={"to-boolean":ja,"to-color":oa,"to-number":ka,"to-string":ia};let La=function(){function e(a){this.val=a}e.parse=function(a){if(2!==a.length)throw Error('"literal" expects 1 argument');return new e(a[1])};e.prototype.evaluate=function(a,h){return this.val};return e}(),Ma=function(){function e(a){this.arg=a}e.parse=function(a){if(2!==a.length)throw Error('"typeof" expects 1 argument');return new e(F(a[1]))};e.prototype.evaluate=function(a,h){return x(J(this.arg.evaluate(a,h)))};
return e}();const wa={array:ma,"boolean":ma,collator:null,format:null,literal:La,image:null,number:ma,"number-format":null,object:ma,string:ma,"to-boolean":na,"to-color":na,"to-number":na,"to-string":na,"typeof":Ma,accumulated:null,"feature-state":null,"geometry-type":m.GeomType,id:m.ID,"line-progress":null,properties:m.Properties,at:ta,get:xa,has:ya,"in":za,"index-of":Aa,length:Ba,slice:Ca,"!":X,"!\x3d":w,"\x3c":D,"\x3c\x3d":H,"\x3d\x3d":z,"\x3e":E,"\x3e\x3d":L,all:U,any:S,"case":aa,coalesce:fa,
match:da,within:null,interpolate:la,"interpolate-hcl":la,"interpolate-lab":la,step:sa,let:null,"var":null,concat:Ka,downcase:ua,"is-supported-script":null,"resolved-locale":null,upcase:ua,rgb:Q,rgba:W,"to-rgba":Y,"-":Ea,"*":Fa,"/":Ga,"%":Ha,"^":Ia,"+":Ja,abs:T,acos:T,asin:T,atan:T,ceil:T,cos:T,e:T,floor:T,ln:T,ln2:T,log10:T,log2:T,max:T,min:T,pi:T,round:T,sin:T,sqrt:T,tan:T,zoom:m.Zoom,"heatmap-density":null,"has-id":Da,none:Z};k.ALL=U;k.ANY=S;k.Add=Ja;k.Assert=ma;k.At=ta;k.BooleanType=ja;k.Calculate=
T;k.Case=aa;k.Coalesce=fa;k.Coerce=na;k.ColorType=oa;k.Concat=Ka;k.Div=Ga;k.EQ=z;k.ErrorType={kind:"error"};k.GE=L;k.GT=E;k.Get=xa;k.Has=ya;k.HasID=Da;k.In=za;k.IndexOf=Aa;k.Interpolate=la;k.LE=H;k.LT=D;k.Length=Ba;k.Literal=La;k.Match=da;k.Mod=Ha;k.Mul=Fa;k.NE=w;k.NONE=Z;k.NOT=X;k.NullType=va;k.NumberType=ka;k.ObjectType=qa;k.Pow=Ia;k.Rgb=Q;k.Rgba=W;k.Slice=Ca;k.Step=sa;k.String=ua;k.StringType=ia;k.Sub=Ea;k.ToRgba=Y;k.TypeOf=Ma;k.ValueType=pa;k.array=B;k.createExpression=F;k.ops=wa;k.typeToString=
x;k.valueToString=N})},"esri/views/2d/engine/vectorTiles/expression/data":function(){define(["exports"],function(k){let u=function(){function b(){}b.parse=function(l){if(1<l.length)throw Error('"id" does not expect arguments');return new b};b.prototype.evaluate=function(l,p){return l.id};return b}(),t=function(){function b(){}b.parse=function(l){if(1<l.length)throw Error('"geometry-type" does not expect arguments');return new b};b.prototype.evaluate=function(l,p){switch(l.type){case 0:return"Unknown";
case 1:return"Point";case 2:return"LineString";case 3:return"Polygon"}};return b}(),m=function(){function b(){}b.parse=function(l){if(1<l.length)throw Error('"properties" does not expect arguments');return new b};b.prototype.evaluate=function(l,p){return l.values};return b}(),d=function(){function b(){}b.parse=function(l){if(1<l.length)throw Error('"zoom" does not expect arguments');return new b};b.prototype.evaluate=function(l,p){return p};return b}();k.GeomType=t;k.ID=u;k.Properties=m;k.Zoom=d;
Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(k){function u(d,b,l,p){function v(n,B){var x;let J,M;J=n;for(x=0;8>x;x++){M=((G*J+C)*J+q)*J-n;if(Math.abs(M)<B)return J;var N=(3*G*J+2*C)*J+q;if(1E-6>Math.abs(N))break;J-=M/N}N=0;x=1;J=n;if(J<N)return N;if(J>x)return x;for(;N<x;){M=((G*J+C)*J+q)*J;if(Math.abs(M-n)<B)break;n>M?N=J:x=J;J=.5*(x-N)+N}return J}const q=3*d,C=3*(l-d)-q,G=1-q-C,c=3*b,g=3*(p-b)-c,f=1-c-g;return function(n,
B=1E-6){n=v(n,B);return((f*n+g)*n+c)*n}}const t=/^cubic-bezier\((.*)\)/,m={};m.ease=u(.25,.1,.25,1);m.linear=u(0,0,1,1);m.easeIn=m["ease-in"]=u(.42,0,1,1);m.easeOut=m["ease-out"]=u(0,0,.58,1);m.easeInOut=m["ease-in-out"]=u(.42,0,.58,1);k.easingFunctions=m;k.parse=function(d){let b=m[d]||null;!b&&(d=t.exec(d))&&(d=d[1].split(",").map(l=>parseFloat(l.trim())),4!==d.length||d.some(l=>isNaN(l))||(b=u.apply(u,d)));return b};k.unitBezier=u;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],
function(k){function u(p,v){p%=v;return 0<=p?p:p+v}const t=Number.POSITIVE_INFINITY,m=Math.PI,d=128/m,b=256/360,l=1/Math.LN2;k.C_256_TO_RAD=m/128;k.C_2PI=2*m;k.C_DEG_TO_256=b;k.C_DEG_TO_RAD=m/180;k.C_INFINITY=t;k.C_PI=m;k.C_PI_BY_2=m/2;k.C_RAD_TO_256=d;k.C_SQRT2=1.414213562;k.C_SQRT2_INV=1/1.414213562;k.between=function(p,v,q){return p>=v&&p<=q||p>=q&&p<=v};k.degToByte=function(p){return u(p*b,256)};k.interpolate=function(p,v,q){return p*(1-q)+v*q};k.log2=function(p){return Math.log(p)*l};k.positiveMod=
u;k.radToByte=function(p){return u(p*d,256)};k.sqr=function(p){return p*p};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports"],function(k){let u=function(){};u.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};u.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};u.lineLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};u.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:"point"},"symbol-sort-key":{type:"number",
default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",
minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},
"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:"center"},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",
minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:["horizontal"]}};u.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};u.backgroundPaintDefinition=
{"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};u.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"}};u.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",
values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1}};u.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map",
"viewport"],default:"map"},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};u.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,
maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};u.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",
default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};k.StyleDefinition=u;Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../../../../../chunks/expression","../GeometryUtils"],function(k,u,t){return function(){function m(b,l){this.isDataDriven=!1;let p;switch(b.type){case "number":p=!0;break;case "color":p=!0;l=m._parseColor(l);break;case "array":p="number"===b.value;break;default:p=!1}null==l&&(l=b.default);if(Array.isArray(l)&&0<l.length&&u.ops[l[0]])try{var v=u.createExpression(l);this.getValue=
this._buildExpression(v,b);this.isDataDriven=!0}catch(q){console.log(q.message),this.getValue=this._buildSimple(b.default)}else{p&&"interval"===l.type&&(p=!1);if(v=l&&l.stops&&0<l.stops.length)for(const q of l.stops)q[1]=this._validate(q[1],b);if(this.isDataDriven=l?!!l.property:!1)if(void 0!==l.default&&(l.default=this._validate(l.default,b)),v)switch(l.type){case "identity":this.getValue=this._buildIdentity(l,b);break;case "categorical":this.getValue=this._buildCategorical(l,b);break;default:this.getValue=
p?this._buildInterpolate(l,b):this._buildInterval(l,b)}else this.getValue=this._buildIdentity(l,b);else v?this.getValue=p?this._buildZoomInterpolate(l):this._buildZoomInterval(l):(l=this._validate(l,b),this.getValue=this._buildSimple(l))}}var d=m.prototype;d._validate=function(b,l){if("number"===l.type){if(b<l.minimum)return l.minimum;if(b>l.maximum)return l.maximum}return b};d._buildSimple=function(b){return()=>b};d._buildExpression=function(b,l){return(p,v)=>{try{let q=b.evaluate(v,p);"color"===
l.type&&(q=m._parseColor(q));return void 0===q?l.default:this._validate(q,l)}catch(q){return console.log(q.message),l.default}}};d._buildIdentity=function(b,l){return(p,v)=>{let q;v&&(q=v.values[b.property],"color"===l.type&&(q=m._parseColor(q)));void 0===q&&(q=b.default);return void 0!==q?this._validate(q,l):l.default}};d._buildCategorical=function(b,l){return(p,v)=>{let q;v&&(q=v.values[b.property]);q=this._categorical(q,b.stops);return void 0!==q?q:void 0!==b.default?b.default:l.default}};d._buildInterval=
function(b,l){return(p,v)=>{let q;v&&(q=v.values[b.property]);return"number"===typeof q?this._interval(q,b.stops):void 0!==b.default?b.default:l.default}};d._buildInterpolate=function(b,l){return(p,v)=>{let q;v&&(q=v.values[b.property]);return"number"===typeof q?this._interpolate(q,b.stops,b.base||1):void 0!==b.default?b.default:l.default}};d._buildZoomInterpolate=function(b){return l=>this._interpolate(l,b.stops,b.base||1)};d._buildZoomInterval=function(b){return l=>this._interval(l,b.stops)};d._categorical=
function(b,l){const p=l.length;for(let v=0;v<p;v++)if(l[v][0]===b)return l[v][1]};d._interval=function(b,l){const p=l.length;let v=0;for(let q=0;q<p;q++)if(l[q][0]<=b)v=q;else break;return l[v][1]};d._interpolate=function(b,l,p){const v=l.length;for(let G=0;G<v;G++){const c=l[G];if(c[0]<=b)var q=c;else{var C=c;break}}if(q&&C){l=C[0]-q[0];b-=q[0];p=1===p?b/l:(Math.pow(p,b)-1)/(Math.pow(p,l)-1);if(Array.isArray(q[1])){q=q[1];C=C[1];b=[];for(l=0;l<q.length;l++)b.push(t.interpolate(q[l],C[l],p));return b}return t.interpolate(q[1],
C[1],p)}if(q)return q[1];if(C)return C[1]};m._isEmpty=function(b){for(const l in b)if(b.hasOwnProperty(l))return!1;return!0};m._parseColor=function(b){if(Array.isArray(b))return b;if("string"===typeof b){if(b=new k(b),!this._isEmpty(b))return k.toUnitRGBA(b)}else return b&&b.default&&(b.default=m._parseColor(b.default)),b&&b.stops&&(b.stops=b.stops.map(l=>[l[0],m._parseColor(l[1])])),b};return m}()})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(k){k.ANGLE_FACTOR_256=
256/360;k.ATTRIBUTE_DATA_ANIMATION=1;k.ATTRIBUTE_DATA_DD0=3;k.ATTRIBUTE_DATA_DD1=3;k.ATTRIBUTE_DATA_FILTER_FLAGS=0;k.ATTRIBUTE_DATA_VV=2;k.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;k.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};k.COLLISION_BOX_PADDING=16;k.COLLISION_BUCKET_SIZE=128;k.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;k.COLLISION_MAX_ZOOM_DELTA=1;k.COLLISION_PLACEMENT_PADDING=8;k.COLLISION_TILE_BOX_SIZE=4;k.DEBUG_LABELS=!1;k.DOT_DENSITY_MAX_FIELDS=8;k.EFFECT_FLAG_0=
4;k.EXTRUDE_SCALE=64;k.FILTER_FLAG_0=2;k.GLYPH_SIZE=24;k.HEURISTIC_GLYPHS_PER_FEATURE=10;k.HEURISTIC_GLYPHS_PER_LINE=50;k.HIGHLIGHT_FLAG=1;k.HITTEST_SEARCH_SIZE=6;k.MAGIC_LABEL_LINE_HEIGHT=29;k.MAX_FILTERS=2;k.MAX_GPU_UPLOADS_PER_FRAME=2;k.NAN_MAGIC_NUMBER=1E-30;k.PICTURE_FILL_COLOR=4294967295;k.RASTER_TILE_SIZE=256;k.SPRITE_PADDING=2;k.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;k.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;k.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3;k.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;k.TEXTURE_BINDING_BITMAP=
0;k.TEXTURE_BINDING_GLYPH_ATLAS=0;k.TEXTURE_BINDING_HIGHLIGHT_0=5;k.TEXTURE_BINDING_HIGHLIGHT_1=6;k.TEXTURE_BINDING_RENDERER_0=5;k.TEXTURE_BINDING_RENDERER_1=6;k.TEXTURE_BINDING_SPRITE_ATLAS=0;k.TEXT_PLACEMENT_PADDING=8;k.THIN_LINE_THRESHOLD=2.5;k.TILE_SIZE=512;k.VTL_HIGH_RES_CUTOFF=1.15;k.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;k.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;k.WEBGL_MAX_INNER_STOPS=6;k.WEBGL_MAX_STOPS=8;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["./context-util"],
function(k){function u(){const m={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var d=document.createElement("canvas");if(!d)return m;var b=k.createContext(d,{failIfMajorPerformanceCaveat:!0},"webgl");!b&&(b=k.createContext(d,{},"webgl"))&&(m.majorPerformanceCaveat=!0);if(!b)return m;
d=b.getParameter(b.VERSION);if(!d)return m;if(d=d.match(/^WebGL\s+([\d.]*)/)){d=parseFloat(d[1]);m.available=.94<=d;if(d=b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.HIGH_FLOAT))m.supportsHighPrecisionFragment=0<d.precision;m.supportsVertexShaderSamplers=0<b.getParameter(b.MAX_VERTEX_TEXTURE_IMAGE_UNITS);m.supportsElementIndexUint=null!==b.getExtension("OES_element_index_uint");m.supportsStandardDerivatives=null!==b.getExtension("OES_standard_derivatives");m.supportsInstancedArrays=null!==b.getExtension("ANGLE_instanced_arrays");
m.supportsTextureFloat=null!==b.getExtension("OES_texture_float");m.supportsColorBufferFloat=null!==b.getExtension("WEBGL_color_buffer_float")}m.maxTextureSize=b.getParameter(b.MAX_TEXTURE_SIZE);b=(b=document.createElement("canvas"))&&k.createContext(b,{},"webgl2")?!0:!1;m.version=b?2:1;return m}let t;return function(){t||(t=u());return t}})},"esri/views/webgl/context-util":function(){define(["exports"],function(k){function u(m,d={},b){switch(b){case "webgl":b=["webgl","experimental-webgl","webkit-3d",
"moz-webgl"];break;case "webgl2":b=["webgl2"];break;default:b=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}let l=null;for(const p of b){try{l=m.getContext(p,d)}catch(v){}if(l)break}return l}function t(m,d){(m=m.parentNode)&&(m.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
k.createContext=u;k.createContextOrErrorHTML=function(m,d={},b){if(!window.WebGLRenderingContext)return t(m,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;d=u(m,d,b);return d?d:(t(m,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),null)};Object.defineProperty(k,"__esModule",{value:!0})})},
"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/global ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../geometry/SpatialReference ../geometry/Extent ../request ./Layer ../core/MultiOriginJSONSupport ./mixins/OperationalLayer ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/TileInfo ./support/TilemapCache ./mixins/ArcGISCachedService ./support/imageUtils ./support/SpriteSource ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/2d/engine/vectorTiles/SchemaHelper ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(k,
u,t,m,d,b,l,p,v,q,C,G,c,g,f,n,B,x,J,M,N,F,Q,W,Y,O,z,w,D,H,E,L,X,U,S,Z,aa,fa){m=function(da){function ha(...A){A=da.call(this,...A)||this;A._spriteSourceMap=new Map;A.currentStyleInfo=null;A.style=null;A.isReference=null;A.operationalLayerType="VectorTileLayer";A.type="vector-tile";A.url=null;return A}k._inheritsLoose(ha,da);var P=ha.prototype;P.normalizeCtorArgs=function(A,I){return"string"===typeof A?{url:A,...I}:A};P.destroy=function(){this._spriteSourceMap.clear()};P.prefetchResources=async function(A){await this.loadSpriteSource(t.devicePixelRatio||
1,A)};P.load=function(A){const I=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},A).then(async()=>{if(this.portalItem&&this.portalItem.id){var R=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await M(R,{...A,query:{f:"json"}})).data&&this.read({url:R},U.createForItem(this.portalItem))}}).then(()=>this._loadStyle(A),()=>this._loadStyle(A));this.addResolvingPromise(I);return B.resolve(this)};P.writeStyleUrl=function(A,I){A&&g.isProtocolRelative(A)&&(A=`https:${A}`);
I.styleUrl=A};P.readVersion=function(A,I){return I.version?parseFloat(I.version):parseFloat(I.currentVersion)};P.loadSpriteSource=async function(A=1,I){if(!this._spriteSourceMap.has(A)){var R=fa();R=new L(this.styleRepository.sprite,A,R.maxTextureSize,this.currentStyleInfo.spriteFormat);await R.load(I);this._spriteSourceMap.set(A,R)}return B.resolve(this._spriteSourceMap.get(A))};P.loadStyle=async function(A,I){const R=A||this.style||this.url;if(this._loadingPromise&&"string"===typeof R&&this.url===
R&&!B.isAborted(this._abortController))return this._loadingPromise;(A=this._abortController)&&A.abort();const ba=B.createAbortController();this._loadingPromise=B.create((la,sa)=>{const ta={signal:ba.signal};this._spriteSourceMap.clear();this._getSourceAndStyle(R,ta).then(la,sa);B.onAbort(I,()=>{ba.abort()})});this._abortController=ba;return this._loadingPromise};P.getStyleLayerId=function(A){return this.styleRepository.getStyleLayerId(A)};P.getStyleLayerIndex=function(A){return this.styleRepository.getStyleLayerIndex(A)};
P.getPaintProperties=function(A){return d.clone(this.styleRepository.getPaintProperties(A))};P.setPaintProperties=function(A,I){const R=this.styleRepository.isPainterDataDriven(A);this.styleRepository.setPaintProperties(A,I);const ba=this.styleRepository.isPainterDataDriven(A);this.emit("paint-change",{layerName:A,paint:I,isDataDriven:R||ba})};P.getStyleLayer=function(A){return d.clone(this.styleRepository.getStyleLayer(A))};P.setStyleLayer=function(A,I){this.styleRepository.setStyleLayer(A,I);this.emit("style-layer-change",
{layer:A,index:I})};P.deleteStyleLayer=function(A){this.styleRepository.deleteStyleLayer(A);this.emit("delete-style-layer",{layerName:A})};P.getLayoutProperties=function(A){return d.clone(this.styleRepository.getLayoutProperties(A))};P.setLayoutProperties=function(A,I){this.styleRepository.setLayoutProperties(A,I);this.emit("layout-change",{layer:A,layout:I})};P.setStyleLayerVisibility=function(A,I){this.styleRepository.setStyleLayerVisibility(A,I);this.emit("style-layer-visibility-change",{layer:A,
visibility:I})};P.getStyleLayerVisibility=function(A){return this.styleRepository.getStyleLayerVisibility(A)};P.getTileUrl=function(A,I,R){let ba=this.tileServers[I%this.tileServers.length];return ba=ba.replace(/\{z\}/gi,A.toString()).replace(/\{y\}/gi,I.toString()).replace(/\{x\}/gi,R.toString())};P.write=function(A,I){return I&&I.origin&&!this.styleUrl?(I.messages&&I.messages.push(new c("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,
{layer:this})),null):da.prototype.write.call(this,A,I)};P._getSourceAndStyle=async function(A,I){if(!A)throw Error("invalid style!");I=await X.loadMetadata(A,I);"webp"!==I.spriteFormat||await E.checkWebPSupport("lossy")||(I.spriteFormat="png");this._set("currentStyleInfo",{...I});"string"===typeof A?(this.url=A,this.style=null):(this.url=null,this.style=A);this._set("sourceNameToSource",I.sourceNameToSource);this._set("primarySourceName",I.primarySourceName);this._set("styleRepository",new aa(I.style,
I));this.read(I.layerDefinition,{origin:"service"});this.emit("load-style",{})};P._getDefaultAttribution=function(A){var I=A.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);A="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");
if(I){var R=I[2]&&I[2].toLowerCase();if(R){I=I[1]||"";for(const ba of A)if(-1<ba.toLowerCase().indexOf(R))return g.normalize(`//static.arcgis.com/attribution/Vector${I}/${ba}`)}}};P._getPrimarySource=function(){return this.sourceNameToSource&&this.primarySourceName in this.sourceNameToSource?this.sourceNameToSource[this.primarySourceName]:null};P._loadStyle=async function(A){return this._loadingPromise?this._loadingPromise:this.loadStyle(null,A)};k._createClass(ha,[{key:"attributionDataUrl",get:function(){var A=
this.currentStyleInfo;return(A=A&&A.serviceUrl&&g.urlToObject(A.serviceUrl))?this._getDefaultAttribution(A.path):null}},{key:"capabilities",get:function(){const A=this._getPrimarySource();return A?A.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}},{key:"fullExtent",get:function(){const A=this._getPrimarySource();return A?A.fullExtent:null}},{key:"parsedUrl",get:function(){return this.serviceUrl?g.urlToObject(this.serviceUrl):null}},{key:"serviceUrl",get:function(){return this.currentStyleInfo&&
this.currentStyleInfo.serviceUrl||null}},{key:"spatialReference",get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null}},{key:"styleUrl",get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}},{key:"tileIndexType",get:function(){const A=this._getPrimarySource();return A?A.type:""}},{key:"tileIndexUrl",get:function(){const A=this._getPrimarySource();return A?A.tileMapURL:""}},{key:"tileInfo",get:function(){var A;const I=[];for(var R in this.sourceNameToSource)I.push(this.sourceNameToSource[R]);
R=(null==(A=this._getPrimarySource())?void 0:A.tileInfo)||new w;if(1<I.length)for(A=0;A<I.length;A++)Z.areSchemasOverlapping(R,I[A].tileInfo)&&(R=Z.unionTileInfos(R,I[A].tileInfo));return R}},{key:"tilemapCache",get:function(){const A=this._getPrimarySource();return A?A.capabilities.operations.supportsTileMap?A.tilemapCache:null:null}},{key:"tileServers",get:function(){const A=this._getPrimarySource();return A?A.tileServers:[]}},{key:"compatibleTileInfo256",get:function(){return S.create256x256CompatibleTileInfo(this.tileInfo)}},
{key:"compatibleTileInfo512",get:function(){return S.create512x512CompatibleTileInfo(this.tileInfo)}}]);return ha}(Y.BlendLayer(z.ScaleRangeLayer(H.ArcGISCachedService(W.ArcGISService(Q.OperationalLayer(O.PortalLayer(F.MultiOriginJSONMixin(N))))))));u.__decorate([p.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],m.prototype,"attributionDataUrl",null);u.__decorate([p.property({type:["show","hide"]})],m.prototype,"listMode",void 0);u.__decorate([p.property({readOnly:!0,dependsOn:["sourceNameToSource",
"primarySourceName"],autoTracked:!1,json:{read:!1}})],m.prototype,"capabilities",null);u.__decorate([p.property({readOnly:!0})],m.prototype,"currentStyleInfo",void 0);u.__decorate([p.property({json:{read:!1},readOnly:!0,type:J,dependsOn:["sourceNameToSource","primarySourceName"]})],m.prototype,"fullExtent",null);u.__decorate([p.property()],m.prototype,"style",void 0);u.__decorate([p.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],m.prototype,"isReference",
void 0);u.__decorate([p.property({type:["VectorTileLayer"]})],m.prototype,"operationalLayerType",void 0);u.__decorate([p.property({readOnly:!0,dependsOn:["serviceUrl"]})],m.prototype,"parsedUrl",null);u.__decorate([p.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],m.prototype,"serviceUrl",null);u.__decorate([p.property({type:x,dependsOn:["tileInfo"],readOnly:!0})],m.prototype,"spatialReference",null);u.__decorate([p.property({readOnly:!0})],m.prototype,"styleRepository",void 0);u.__decorate([p.property({readOnly:!0})],
m.prototype,"sourceNameToSource",void 0);u.__decorate([p.property({readOnly:!0})],m.prototype,"primarySourceName",void 0);u.__decorate([p.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],m.prototype,"styleUrl",null);u.__decorate([G.writer(["portal-item","web-document"],"styleUrl")],m.prototype,"writeStyleUrl",null);u.__decorate([p.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource",
"primarySourceName"]})],m.prototype,"tileIndexType",null);u.__decorate([p.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],m.prototype,"tileIndexUrl",null);u.__decorate([p.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:w,dependsOn:["sourceNameToSource","primarySourceName"]})],m.prototype,"tileInfo",null);u.__decorate([p.property({json:{read:!1},readOnly:!0,type:D.TilemapCache,dependsOn:["sourceNameToSource","primarySourceName"]})],
m.prototype,"tilemapCache",null);u.__decorate([p.property({json:{read:!1},readOnly:!0,dependsOn:["sourceNameToSource","primarySourceName"]})],m.prototype,"tileServers",null);u.__decorate([p.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],m.prototype,"type",void 0);u.__decorate([p.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],m.prototype,"url",void 0);u.__decorate([p.property({readOnly:!0})],m.prototype,"version",
void 0);u.__decorate([q.reader("version",["version","currentVersion"])],m.prototype,"readVersion",null);u.__decorate([p.property({readOnly:!0,dependsOn:["tileInfo"]})],m.prototype,"compatibleTileInfo256",null);u.__decorate([p.property({readOnly:!0,dependsOn:["tileInfo"]})],m.prototype,"compatibleTileInfo512",null);return m=u.__decorate([C.subclass("esri.layers.VectorTileLayer")],m)});