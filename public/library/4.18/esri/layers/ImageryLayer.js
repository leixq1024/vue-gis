// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Point ../../geometry/Extent ../../geometry/Polygon ../../geometry ../../request ../../Graphic ../support/PixelBlock ../../rasterRenderers ../support/commonProperties ../support/Field ../support/FieldsIndex ../../tasks/support/FeatureSet ../../tasks/support/Query ../../tasks/QueryTask ../support/DimensionalDefinition ../support/RasterFunction ../support/imageryRendererUtils ../support/MosaicRule ../support/ExportImageServiceParameters ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../tasks/ImageIdentifyTask ../../tasks/support/ImageIdentifyParameters".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u,y,x,p,g,r,z,f,a,q,C,c,b,k,m,l,K,F,G,N,P,Q,I,T,W,Y,Z,ca,ba,aa){function ja(ha){if(!ha)return null;ha=JSON.stringify(ha).match(/"rasterFunction":"(.*?")/gi);return(ha=null==ha?void 0:ha.map(za=>za.replace('"rasterFunction":"',"").replace('"',"")))?ha.join("/"):null}const ia=E.getLogger("esri.layers.mixins.ArcGISImageService"),da=B.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),
ma=B.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),pa=B.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),va=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),ya=L.ensureRange(J.ensureNumber,{min:0,max:255});R.ArcGISImageService=ha=>{ha=function(za){function ra(){var D=za.apply(this,arguments)||this;D._functionRasterInfos={};D._rasterJobHandler={instance:null,
refCount:0,connectionPromise:null};D._symbolizer=null;D._defaultServiceMosaicRule=null;D.rasterAttributeTableFieldPrefix="Raster.";D.adjustAspectRatio=null;D.bandCount=null;D.bandIds=void 0;D.capabilities=null;D.compressionQuality=void 0;D.compressionTolerance=.01;D.copyright=null;D.definitionExpression=null;D.exportImageServiceParameters=null;D.rasterInfo=null;D.fields=null;D.fullExtent=null;D.hasMultidimensions=!1;D.imageMaxHeight=4100;D.imageMaxWidth=4100;D.interpolation=void 0;D.minScale=0;D.maxScale=
0;D.multidimensionalInfo=null;D.noData=null;D.noDataInterpretation=void 0;D.objectIdField=null;D.pixelSizeX=null;D.pixelSizeY=null;D.pixelFilter=null;D.raster=void 0;D.viewId=void 0;D.renderer=null;D.rasterAttributeTable=null;D.rasterFunctionInfos=null;D.serviceDataType=null;D.spatialReference=null;D.pixelType=null;D.serviceRasterInfo=null;D.sourceJSON=null;D.url=null;D.version=null;return D}H._inheritsLoose(ra,za);var ea=ra.prototype;ea.initialize=function(){this._set("exportImageServiceParameters",
new Q.ExportImageServiceParameters({layer:this}))};ea.readDefaultServiceMosaicRule=function(D,S){return P.fromJSON(S)};ea.readBandIds=function(D,S){if(Array.isArray(D)&&0<D.length&&D.every(V=>"number"===typeof V))return D};ea.readCapabilities=function(D,S){return this._readCapabilities(S)};ea.writeCompressionQuality=function(D,S,V){null!=D&&"lerc"!==this.format&&(S[V]=D)};ea.writeCompressionTolerance=function(D,S,V){"lerc"===this.format&&null!=D&&(S[V]=D)};ea.readFormat=function(D,S){return"esriImageServiceDataTypeVector-UV"===
S.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===S.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ea.readMinScale=function(D,S){return null!=S.minLOD&&null!=S.maxLOD?D:0};ea.readMaxScale=function(D,S){return null!=S.minLOD&&null!=S.maxLOD?D:0};ea.readMosaicRule=function(D,S){return P.fromJSON(D||S.mosaicRule||S)};ea.writeMosaicRule=function(D,S,V){D=this.mosaicRule;const X=this.definitionExpression;D?X&&X!==D.where&&(D=D.clone(),D.where=X):X&&(D=new P({where:X}));this._isValidCustomizedMosaicRule(D)&&
(S[V]=D.toJSON())};ea.writeNoData=function(D,S,V){null!=D&&"number"===typeof D&&(S[V]=ya(D))};ea.readObjectIdField=function(D,S){D||(D=(D=S.fields.filter(V=>"esriFieldTypeOID"===V.type||"oid"===V.type))&&D[0]&&D[0].name);return D};ea.readRenderer=function(D,S,V){D=C.read(S&&S.layerDefinition&&S.layerDefinition.drawingInfo&&S.layerDefinition.drawingInfo.renderer,V)||void 0;if(null!=D)return N.isSupportedRendererType(D)||ia.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),
D};ea.readRenderingRule=function(D,S){D=S.rasterFunctionInfos;return S.renderingRule||D&&D.length&&"None"!==D[0].name?G.fromJSON(S.renderingRule||{rasterFunctionInfos:S.rasterFunctionInfos}):null};ea.writeRenderingRule=function(D,S,V){this._isRFTJson(D)||(S[V]=D.toJSON())};ea.readSpatialReference=function(D,S){return(D=D||S.extent.spatialReference)?x.fromJSON(D):null};ea.readPixelType=function(D){return pa.fromJSON(D)||D};ea.writePixelType=function(D,S,V){if(O.isNone(this.serviceRasterInfo)||this.pixelType!==
this.serviceRasterInfo.pixelType)S[V]=pa.toJSON(D)};ea.readVersion=function(D,S){(D=S.currentVersion)||(D=S.hasOwnProperty("fields")||S.hasOwnProperty("timeInfo")?10:9.3);return D};ea.applyFilter=function(D){let S=D;this.pixelFilter&&(S=this._clonePixelData(D),this.pixelFilter(S));return S};ea.applyRenderer=async function(D,S){var V=D;if(!this._isPicture()&&this.renderer&&this._symbolizer&&!this.pixelFilter){V=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const X=
this._rasterJobHandler.instance,{bandIds:fa}=this;X?(V&&(this._symbolizer.bind(),await X.updateSymbolizer(this._symbolizer,S),this._cachedRendererJson=this.renderer.toJSON()),S=await X.symbolize({bandIds:fa,...D},S),V={extent:D.extent,pixelBlock:S}):V={extent:D.extent,pixelBlock:this._symbolizer.symbolize({bandIds:fa,...D})}}return V};ea.destroy=function(){this._shutdownJobHandler()};ea.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ea.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;
0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ea.computeHistograms=async function(D,S){S=null==S?void 0:S.signal;await this._fetchCapabilities(S);if(!this.capabilities.operations.supportsComputeHistograms)throw new e("imagery-layer:compute-histograms","this operation is not supported on the input image service");D=D.clone();const {raster:V,mosaicRule:X,renderingRule:fa}=this;fa&&null==D.renderingRule&&(D.renderingRule=fa);X&&null==D.mosaicRule&&(D.mosaicRule=X);V&&null==D.raster&&
(D.raster=V);return ca.computeHistograms(this.url,D,{signal:S})};ea.computeStatisticsHistograms=async function(D,S){S=null==S?void 0:S.signal;await this._fetchCapabilities(S);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new e("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");D=D.clone();const {raster:V,mosaicRule:X,renderingRule:fa}=this;fa&&null==D.renderingRule&&(D.renderingRule=fa);X&&null==D.mosaicRule&&(D.mosaicRule=
X);V&&null==D.raster&&(D.raster=V);return ca.computeStatisticsHistograms(this.url,D,{signal:S})};ea.fetchImage=function(D,S,V,X={}){if(null==D||null==S||null==V)return y.reject(new e("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const fa=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:X.signal}):null;return y.when(fa).then(ka=>{ka&&(this.rasterInfo=ka);ka={imageServiceParameters:this.getExportImageServiceParameters(D,
S,V,X.timeExtent),imageProps:{extent:D,width:S,height:V,format:this.format},requestAsImageElement:X.requestAsImageElement&&!this.pixelFilter||!1,signal:X.signal};return this._requestArrayBuffer(ka)})};ea.fetchKeyProperties=function(D){D=D&&D.renderingRule&&D.renderingRule.toJSON();return f(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version&&D?JSON.stringify(D):null})}).then(S=>S.data)};ea.fetchRasterAttributeTable=function(D){D=D&&D.renderingRule&&D.renderingRule.toJSON();
return 10.1>this.version?y.reject(new e("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):f(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&D?JSON.stringify(D):null})}).then(S=>m.fromJSON(S.data))};ea.getCatalogItemRasterInfo=async function(D,S){var V=f(this.parsedUrl.path+"/"+D+"/info",{query:this._getQueryParams(),...S}).then(X=>X.data);D=f(this.parsedUrl.path+"/"+D+"/info/keyProperties",{query:this._getQueryParams(),
...S}).then(X=>X.data).catch(()=>{});V=await y.all([V,D]);if(V[0])return D=g.fromJSON(V[0].extent),S=V[0].statistics?V[0].statistics.map(X=>({min:X[0],max:X[1],avg:X[2],stddev:X[3]})):null,new I({bandCount:V[0].bandCount,extent:D,spatialReference:D.sr,pixelSize:new p({x:V[0].pixelSizeX,y:V[0].pixelSizeY,spatialReference:D.sr}),pixelType:V[0].pixelType.toLowerCase(),statistics:S,histograms:V[0].histograms,keyProperties:V[1]||{}})};ea.getCatalogItemICSInfo=async function(D,S){var {data:V}=await f(this.parsedUrl.path+
"/"+D+"/info/ics",{query:this._getQueryParams(),...S});if(V=V&&V.ics){var X=null;try{X=(await f(this.parsedUrl.path+"/"+D+"/info",{query:this._getQueryParams(),...S})).data.extent}catch{}if(!X||!X.spatialReference)return{ics:V,icsToPixelTransform:null,icsExtent:null,northDirection:null};var fa=10.7<=this.version?f(this.parsedUrl.path+"/"+D+"/info/icstopixel",{query:this._getQueryParams(),...S}).then(oa=>oa.data).catch(()=>({})):{},ka=X.spatialReference,na={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",
geometries:[X]}),inSR:ka.wkid||JSON.stringify(ka),outSR:"0:"+D};na=f(this.parsedUrl.path+"/project",{query:this._getQueryParams(na),...S}).then(oa=>oa.data).catch(()=>({}));var la=(X.xmin+X.xmax)/2,ta=(X.ymax-X.ymin)/6;X=X.ymin+ta;var wa=[];for(let oa=0;5>oa;oa++)wa.push({x:la,y:X+ta*oa});D={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:wa}),inSR:ka.wkid||JSON.stringify(ka),outSR:"0:"+D};S=f(this.parsedUrl.path+"/project",{query:this._getQueryParams(D),...S}).then(oa=>oa.data).catch(()=>
({}));fa=await y.all([fa,na,S]);S=fa[0].ipxf;if(null==S){var xa,sa,qa;D=null==(xa=V.geodataXform)?void 0:xa.xf_0;"topup"===(null==D?void 0:null==(sa=D.name)?void 0:sa.toLowerCase())&&6===(null==D?void 0:null==(qa=D.coefficients)?void 0:qa.length)&&(S={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:D.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(xa=g.fromJSON(fa[1]&&fa[1].geometries&&fa[1].geometries[0]))xa.spatialReference=new x({wkid:0,imageCoordinateSystem:V});
sa=fa[2].geometries?fa[2].geometries.filter(oa=>null!=oa&&null!=oa.x&&null!=oa.y&&"NaN"!==oa.x&&"NaN"!==oa.y):[];qa=sa.length;if(3>qa)return{ics:V,icsToPixelTransform:S,icsExtent:xa,northDirection:null};ka=na=D=fa=0;for(la=0;la<qa;la++)fa+=sa[la].x,D+=sa[la].y,na+=sa[la].x*sa[la].x,ka+=sa[la].x*sa[la].y;qa=(qa*ka-fa*D)/(qa*na-fa*fa);fa=0;D=sa[4].x>sa[0].x;sa=sa[4].y>sa[0].y;Infinity===qa?fa=sa?90:270:0===qa?fa=D?0:180:0<qa?fa=D?180*Math.atan(qa)/Math.PI:180*Math.atan(qa)/Math.PI+180:0>qa&&(fa=sa?
180+180*Math.atan(qa)/Math.PI:360+180*Math.atan(qa)/Math.PI);return{ics:V,icsToPixelTransform:S,icsExtent:xa,northDirection:fa}}};ea.generateRasterInfo=async function(D,S){if((!D||"none"===D.functionName.toLowerCase())&&O.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;const V=ja(D);if(this._functionRasterInfos[V])return this._functionRasterInfos[V];D=this._generateRasterInfo(D,S);this._functionRasterInfos[V]=D;try{return await D}catch{return this._functionRasterInfos[V]=null}};ea.getExportImageServiceParameters=
function(D,S,V,X){D=D.clone().shiftCentralMeridian();var fa=D.spatialReference;if(fa.imageCoordinateSystem){const {id:qa,referenceServiceName:oa}=fa.imageCoordinateSystem;fa=null!=qa?oa?-1<this.parsedUrl.path.toLowerCase().indexOf("/"+oa.toLowerCase()+"/")?"0:"+qa:JSON.stringify({icsid:qa,icsns:oa}):"0:"+qa:JSON.stringify({ics:fa.imageCoordinateSystem})}else fa=fa.wkid||JSON.stringify(fa.toJSON());O.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=
this.pixelType);const ka=this.exportImageServiceParameters.toJSON(),{bandIds:na,noData:la,mosaicRule:ta,renderingRule:wa}=ka;na instanceof Array&&0<na.length&&(ka.bandIds=na.join(","));la instanceof Array&&0<la.length&&(ka.noData=la.join(","));const xa=this.timeInfo;ta&&ta.multidimensionalDefinition&&X&&xa&&xa.startField&&(ta.multidimensionalDefinition=ta.multidimensionalDefinition.filter(qa=>qa.dimensionName!==xa.startField));ka.mosaicRule=ta&&JSON.stringify(ta);ka.renderingRule=wa&&JSON.stringify(wa);
const sa={};if(X){const {start:qa,end:oa}=X.toJSON();if(qa&&oa&&qa===oa)sa.time=""+qa;else if(null!=qa||null!=oa)sa.time=`${null==qa?"null":qa},${null==oa?"null":oa}`}return{bbox:D.xmin+","+D.ymin+","+D.xmax+","+D.ymax,bboxSR:fa,imageSR:fa,size:S+","+V,...ka,...sa}};ea.identify=async function(D,S){await this._fetchCapabilities(null==S?void 0:S.signal);if(!this.capabilities.operations.supportsIdentify)throw new e("imagery-layer:query-rasters","query operation is not supported on the input image service");
D=D.clone();const {raster:V,mosaicRule:X,renderingRule:fa}=this;fa&&null==D.renderingRule&&(D.renderingRule=fa);X&&null==D.mosaicRule&&(D.mosaicRule=X);V&&null==D.raster&&(D.raster=V);return(new ba({url:this.url})).execute(D,S)};ea.queryRasters=async function(D,S){await this._fetchCapabilities(null==S?void 0:S.signal);if(!this.capabilities.operations.supportsQuery)throw new e("imagery-layer:query-rasters","query operation is not supported on the input image service");return this.queryTask.execute(D,
S)};ea.queryVisibleRasters=function(D,S){if(!D)return y.reject(new e("imagery-layer: query-visible-rasters","missing query parameter"));const {pixelSize:V,returnDomainValues:X,returnTopmostRaster:fa,showNoDataRecords:ka}=S||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let na=!1,la=S=null;const ta=this.rasterFunctionNamesIndex;if(O.isSome(D.outFields)&&(na=D.outFields.some(oa=>-1===oa.toLowerCase().indexOf("raster.servicepixelvalue")),10.4<=this.version)){const oa=
D.outFields.filter(ua=>-1<ua.toLowerCase().indexOf("raster.servicepixelvalue")&&24<ua.length).map(ua=>{ua=ua.slice(25);return[this._updateRenderingRulesFunctionName(ua,ta),ua]});S=oa.map(ua=>new G({functionName:ua[0]}));la=oa.map(ua=>ua[1]);0===S.length?this.renderingRule?(S.push(this.renderingRule),la.push(this.renderingRule.functionName)):S=null:this.renderingRule&&!S.some(ua=>ua.functionName===this.renderingRule.functionName)&&(S.push(this.renderingRule),la.push(this.renderingRule.functionName))}const wa=
O.isNone(D.outSpatialReference)||D.outSpatialReference.equals(this.spatialReference);S=this._getQueryParams({geometry:D.geometry,timeExtent:D.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:S,pixelSize:V,returnCatalogItems:na,returnGeometry:wa,maxItemCount:fa?1:null});delete S.f;const xa=new aa(S),sa=new ba({url:this.url}),qa=this.generateRasterInfo(this.renderingRule);return y.create(oa=>{qa.then(()=>{sa.execute(xa).then(ua=>
{const Ea=D.outFields;if(na&&!wa&&ua.catalogItems&&ua.catalogItems.features&&0<ua.catalogItems.features.length){const Ba=this.objectIdField||"ObjectId",Fa=ua.catalogItems.features;var Ca=Fa.map(Aa=>Aa.attributes&&Aa.attributes[Ba]);Ca=new l({objectIds:Ca,returnGeometry:!0,outSpatialReference:D.outSpatialReference,outFields:[Ba]});return this.queryRasters(Ca).then(Aa=>{Aa&&Aa.features&&0<Aa.features.length&&Aa.features.forEach(Ga=>{Fa.forEach(Da=>{Da.attributes[Ba]===Ga.attributes[Ba]&&(Da.geometry=
new r(Ga.geometry),Da.geometry.spatialReference=D.outSpatialReference)})});oa(this._processVisibleRastersResponse(ua,{returnDomainValues:X,templateRRFunctionNames:la,showNoDataRecords:ka,templateFields:Ea}))}).catch(()=>{throw new e("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");})}oa(this._processVisibleRastersResponse(ua,{returnDomainValues:X,templateRRFunctionNames:la,showNoDataRecords:ka,templateFields:Ea}))}).catch(()=>{throw new e("imagery-layer:query-visible-rasters",
"encountered error when querying visible rasters");})})})};ea.fetchVariableStatisticsHistograms=async function(D,S){var V=f(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:D}),signal:S}).then(X=>{var fa;return null==(fa=X.data)?void 0:fa.statistics});D=f(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:D}),signal:S}).then(X=>{var fa;return null==(fa=X.data)?void 0:fa.histograms});V=await y.all([V,D]);V[0]&&V[0].forEach(X=>{X.avg=X.mean;X.stddev=X.standardDeviation});
return{statistics:V[0]||null,histograms:V[1]||null}};ea._fetchService=async function(D){await this._fetchServiceInfo(D);O.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var S=this.sourceJSON;S=O.isSome(this.serviceRasterInfo)?y.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:S,signal:D}).then(V=>{this._set("serviceRasterInfo",V);return V});D=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?this.generateRasterInfo(this.renderingRule,
{signal:D}):null;return y.all([S,D]).then(V=>{V[1]?this._set("rasterInfo",V[1]):this._set("rasterInfo",V[0]);this.renderer&&0>Y.getSupportedRendererTypes(this.rasterInfo).indexOf(this.renderer.type)&&(this.renderer=null,ia.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._configDefaultRenderer();this.watch("renderer",()=>this._configDefaultRenderer());this.watch("renderingRule",X=>{(this.renderer||this._symbolizer||this.popupEnabled&&
this.popupTemplate)&&this.generateRasterInfo(X).then(fa=>{fa&&(this.rasterInfo=fa)})});(V=O.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(V)})};ea._initJobHandler=async function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const D=new T;this._rasterJobHandler.connectionPromise=D.initialize().then(()=>{this._rasterJobHandler.instance=D},()=>null);await this._rasterJobHandler.connectionPromise};
ea._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};ea._fetchCapabilities=async function(D){if(this.capabilities)return this.capabilities;await this._fetchServiceInfo(D);return this.capabilities};ea._fetchServiceInfo=async function(D){var S;let V=this.sourceJSON;if(!V){const {data:X,ssl:fa}=await f(this.parsedUrl.path,{query:this._getQueryParams(),
signal:D});this.sourceJSON=V=X;fa&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(S=V.capabilities)?void 0:S.toLowerCase().split(",").map(X=>X.trim()).indexOf("tilesonly")))throw new e("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(V,{origin:"service",url:this.parsedUrl})};ea._isPicture=function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};ea._configDefaultRenderer=function(){if(!this._isPicture()&&
!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){const V=Y.getDefaultBandCombination(this.rasterInfo);!V||3===this.rasterInfo.bandCount&&0===V[0]&&1===V[1]&&2===V[2]||(this.bandIds=V)}if(!this.renderer){var D,S;this.renderer=Y.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(D=this.mosaicRule)?void 0:null==(S=D.multidimensionalDefinition)?void 0:S[0].variableName})}this._symbolizer?(this._symbolizer.rendererJSON=this.renderer.toJSON(),
this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new Z({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo});this._symbolizer.bind()||(this._symbolizer=null)}};ea._clonePixelData=function(D){return null==D?D:{extent:D.extent&&D.extent.clone(),pixelBlock:D.pixelBlock&&D.pixelBlock.clone()}};ea._getQueryParams=function(D){const {raster:S,viewId:V}=this;return{raster:S,viewId:V,f:"json",...D}};ea._decodePixelBlock=function(D,S,V){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:D,
options:S}):W.decode(D,S,V)};ea._fetchMultidimensionalInfo=async function(D){var S;D=await f(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:D}).then(V=>{var X;return null==(X=V.data)?void 0:X.multidimensionalInfo});null!=(S=D.variables)&&S.length&&D.variables.forEach(V=>{var X;null!=(X=V.statistics)&&X.length&&V.statistics.forEach(fa=>{fa.avg=fa.mean;fa.stddev=fa.standardDeviation})});return D};ea._fetchAuxiliaryRasterInfo=function(D){const S=D&&D.serviceInfo;if(!S)return y.reject(new e("imagery-layer:fetch-metadata",
"valid serviceInfo is required"));var V=D.renderingRule?JSON.stringify(D.renderingRule.toJSON()):null,X=D.signal;D=S.hasRasterAttributeTable&&10.1<=this.version?f(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=this.version?V:null}),signal:X}).then(na=>m.fromJSON(na.data)).catch(()=>null):!1;const fa=S.hasColormap&&10.1<=this.version?f(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?V:null}),signal:X}).then(na=>
{var la;return null==(la=na.data)?void 0:la.colormap}):!1,ka=S.hasHistograms&&10.1<=this.version?f(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?V:null}),signal:X}).then(na=>{var la;return null==(la=na.data)?void 0:la.histograms}):!1;V=10.3<=this.version?f(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:V}),signal:X}).then(na=>na.data).catch(()=>{}):!1;X=S.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():
!1;return y.all([D,fa,ka,V,X]).then(na=>{let la=null;if(S.minValues&&S.minValues.length===S.bandCount){la=[];for(var ta=0;ta<S.minValues.length;ta++)la.push({min:S.minValues[ta],max:S.maxValues[ta],avg:S.meanValues[ta],stddev:S.stdvValues[ta]})}ta=Math.ceil((S.extent.xmax-S.extent.xmin)/S.pixelSizeX-.1);const wa=Math.ceil((S.extent.ymax-S.extent.ymin)/S.pixelSizeY-.1),xa=x.fromJSON(S.spatialReference||S.extent.spatialReference);return new I({width:ta,height:wa,bandCount:S.bandCount,extent:g.fromJSON(S.extent),
spatialReference:xa,pixelSize:new p({x:S.pixelSizeX,y:S.pixelSizeY,spatialReference:xa}),pixelType:S.pixelType.toLowerCase(),statistics:la,attributeTable:na[0]||null,colormap:na[1]||null,histograms:na[2]||null,keyProperties:na[3]||{},multidimensionalInfo:na[4]||null})})};ea._requestArrayBuffer=function(D){const {imageProps:S,requestAsImageElement:V,signal:X}=D;if(V&&!this.pixelFilter&&S.format&&-1<S.format.indexOf("png"))return f(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",
...D.imageServiceParameters}),signal:X}).then(ka=>({imageElement:ka.data,params:S}));const fa=this._initJobHandler();D=f(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...D.imageServiceParameters}),signal:X});return y.all([D,fa]).then(ka=>{ka=ka[0].data;const na=S.format||"jpgpng";var la=na;"bsq"!==la&&"bip"!==la&&(la=W.getFormat(ka));if(!la)throw new e("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,
new Uint8Array(ka)));la="gif"===na||"bmp"===na||-1<na.indexOf("png")&&("png"===la||"jpg"===la);const ta={signal:X};return la?W.decode(ka,{useCanvas:!0,...S},ta).then(wa=>({pixelData:{pixelBlock:wa,extent:S.extent},params:S})):this._decodePixelBlock(ka,{width:S.width,height:S.height,planes:null,pixelType:null,noDataValue:null,format:na},ta).then(wa=>({pixelData:{pixelBlock:wa,extent:S.extent},params:S}))})};ea._generateRasterInfo=async function(D,S){const {data:V}=await f(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:D}),
...S});return await this._fetchAuxiliaryRasterInfo({serviceInfo:V,renderingRule:D,...S})};ea._isValidCustomizedMosaicRule=function(D){return D&&JSON.stringify(D.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())};ea._updateMultidimensionalDefinition=function(D){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var S=D.variables[0].dimensions;D=[];for(var V in S)if(S.hasOwnProperty(V)){const X=S[V],fa=X.extent;let ka=!0,na=[fa[0]];X.hasRanges&&
!0===X.hasRanges?(ka=!1,na=[X.values[0]]):"stdz"===X.name.toLowerCase()&&Math.abs(fa[1])<=Math.abs(fa[0])&&(na=[fa[1]]);D.push(new F({variableName:"",dimensionName:S[V].name,isSlice:ka,values:na}))}0<D.length&&(this.mosaicRule=this.mosaicRule||new P,V=this.mosaicRule.multidimensionalDefinition,!V||V&&0>=V.length)&&(this.mosaicRule.multidimensionalDefinition=D)}};ea._formatAttributeValue=function(D,S){if("string"===typeof D&&(S=(S=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,
S))&&S.format)){let V,X;return-1<D.trim().indexOf(",")?(V=",",X=V+" ",this._formatDelimitedString(D,V,X,S)):-1<D.trim().indexOf(" ")?(V=X=" ",this._formatDelimitedString(D,V,X,S)):this._formatNumberFromString(D,S)}return D};ea._getFieldInfo=function(D,S){if(D&&D.length&&S){var V=S.toLowerCase(),X=void 0;D.some(fa=>!fa.fieldName||fa.fieldName.toLowerCase()!==V&&fa.fieldName.toLowerCase()!==V.replace(/ /g,"_")?!1:(X=fa,!0));return X}};ea._formatDelimitedString=function(D,S,V,X){return D&&S&&V&&X?D.trim().split(S).map(fa=>
this._formatNumberFromString(fa,X)).join(V):D};ea._formatNumberFromString=function(D,S){if(!D||!S)return D;const V=Number(D);return isNaN(V)?D:S.format(V)};ea._processVisibleRastersResponse=function(D,S){S=S||{};const V=D.value,{templateRRFunctionNames:X,showNoDataRecords:fa,returnDomainValues:ka,templateFields:na}=S;S=D.processedValues;var la=D.catalogItems&&D.catalogItems.features;let ta=D.properties&&D.properties.Values&&D.properties.Values.map(ua=>ua.replace(/ /gi,", "))||[];var wa=this.objectIdField||
"ObjectId";D="string"===typeof V&&-1<V.toLowerCase().indexOf("nodata");const xa=[];!V||la||D||(la={},la[wa]=0,la=new a(this.fullExtent,null,la),ta=[V],la=[la]);if(!la)return[];this._updateResponseFieldNames(la,na);for(let ua=0;ua<la.length;ua++){wa=la[ua];if(null!=V&&!D){var sa=ta[ua];var qa=this.renderingRule&&S&&0<S.length&&X&&0<X.length&&-1<X.indexOf(this.renderingRule.functionName)?S[X.indexOf(this.renderingRule.functionName)]:V;if("nodata"===sa.toLowerCase()&&!fa)continue;wa.attributes["Raster.ItemPixelValue"]=
this._formatAttributeValue(sa,"Raster.ItemPixelValue");wa.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(qa,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(wa,sa);var oa=this.fields&&0<this.fields.length;qa=this.renderingRule&&O.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?oa?sa:V:qa;this.renderingRule||(qa=oa?sa:V);this._updateFeatureWithRasterAttributeTableValues(wa,qa)}wa.sourceLayer=this;ka&&this._updateFeatureWithDomainValues(wa);if(X&&
S&&X.length===S.length)for(sa=0;sa<X.length;sa++)oa="Raster.ServicePixelValue."+X[sa],wa.attributes[oa]=this._formatAttributeValue(S[sa],oa);xa.push(la[ua])}return xa};ea._updateFeatureWithRasterAttributeTableValues=function(D,S){var V=this.rasterInfo&&this.rasterInfo.attributeTable||O.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const X=V&&V.features;if(X){V=V.fields;var fa=V.map(la=>la.name).filter(la=>"value"===la.toLowerCase()),ka=fa&&fa[0];if(ka){var na=X.filter(la=>
la.attributes[ka]===(null!=S?parseInt(S,10):null));na&&na[0]&&V.forEach(la=>{const ta=this.rasterAttributeTableFieldPrefix+la.name;D.attributes[ta]=this._formatAttributeValue(na[0].attributes[la.name],ta)})}}};ea._updateFeatureWithMagDirValues=function(D,S){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var V=S.replace(" ",",").split(",").map(X=>parseFloat(X));S=V.map(X=>[X]);V=V.map(X=>({minValue:X,
maxValue:X,noDataValue:null}));S=new q({height:1,width:1,pixelType:"f32",pixels:S,statistics:V});this.pixelFilter({pixelBlock:S,extent:new g(0,0,0,0,this.spatialReference)});D.attributes["Raster.Magnitude"]=S.pixels[0][0];D.attributes["Raster.Direction"]=S.pixels[1][0]}};ea._updateFeatureWithDomainValues=function(D){const S=this.fields&&this.fields.filter(V=>V.domain&&"coded-value"===V.domain.type);null!=S&&S.forEach(V=>{const X=D.attributes[V.name];if(null!=X){const fa=V.domain.codedValues.filter(ka=>
ka.code===X)[0];fa&&(D.attributes[V.name]=fa.name)}})};ea._updateResponseFieldNames=function(D,S){if(S&&!(1>S.length)){var V=this.fieldsIndex;V&&D.forEach(X=>{if(X&&X.attributes)for(const fa of S)if(V.has(fa)){const ka=V.get(fa).name;ka!==fa&&(X.attributes[fa]=X.attributes[ka],delete X.attributes[ka])}})}};ea._updateRenderingRulesFunctionName=function(D,S){if(D&&!(1>D.length)){if("Raw"===D)return D.replace("Raw","None");var V=D.toLowerCase().replace(/ /gi,"_");return S.has(V)?S.get(V):D}};ea._isRFTJson=
function(D){return D.name&&D.arguments&&D.function&&D.hasOwnProperty("functionType")};ea._readCapabilities=function(D){const S=D.capabilities?D.capabilities.toLowerCase().split(",").map(ta=>ta.trim()):["image","catalog"],{currentVersion:V,advancedQueryCapabilities:X,maxRecordCount:fa}=D,ka=-1<S.indexOf("image"),na="esriImageServiceDataTypeElevation"===D.serviceDataType,la=!!(D.spatialReference||D.extent&&D.extent.spatialReference);return{operations:{supportsComputeHistograms:ka,supportsExportImage:ka,
supportsIdentify:ka,supportsMeasure:-1<S.indexOf("mensuration")&&la,supportsDownload:-1<S.indexOf("download"),supportsQuery:-1<S.indexOf("catalog")&&D.fields&&0<D.fields.length,supportsGetSamples:10.2<=V&&ka,supportsProject:10.3<=V&&ka,supportsComputeStatisticsHistograms:10.4<=V&&ka,supportsQueryBoundary:10.6<=V&&ka,supportsCalculateVolume:10.7<=V&&na,supportsComputePixelLocation:10.7<=V&&-1<S.indexOf("catalog")},query:{supportsStatistics:!(!X||!X.supportsStatistics),supportsOrderBy:!(!X||!X.supportsOrderBy),
supportsDistinct:!(!X||!X.supportsDistinct),supportsPagination:!(!X||!X.supportsPagination),supportsStandardizedQueriesOnly:!(!X||!X.useStandardizedQueries),maxRecordCount:fa}}};H._createClass(ra,[{key:"rasterFunctionNamesIndex",get:function(){const D=new Map;if(!this.rasterFunctionInfos||1>this.rasterFunctionInfos.length)return D;this.rasterFunctionInfos.forEach(S=>{D.set(S.name.toLowerCase().replace(/ /gi,"_"),S.name)});return D}},{key:"queryTask",get:function(){return new K({url:this.url})}},{key:"fieldsIndex",
get:function(){return this.fields?new k(this.fields):null}},{key:"format",set:function(D){D&&va.has(D.toLowerCase())&&this._set("format",D.toLowerCase())}},{key:"mosaicRule",set:function(D){D&&D.mosaicMethod&&(D=P.fromJSON({...D.toJSON(),mosaicMethod:D.mosaicMethod,mosaicOperation:D.mosaicOperation}));this._set("mosaicRule",D)}},{key:"parsedUrl",get:function(){return this.url?t.urlToObject(this.url):null}},{key:"rasterFields",get:function(){const D=this.rasterAttributeTableFieldPrefix||"Raster.";
var S=new b({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const V=new b({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),X=new b({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let fa=this.fields?A.clone(this.fields):[];fa.push(V);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&
fa.push(S);10.4<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ka=>"none"===ka.name.toLowerCase())&&fa.push(X);this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(ka=>"none"!==ka.name.toLowerCase()).forEach(ka=>{fa.push(new b({name:"Raster.ServicePixelValue."+ka.name,alias:ka.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||
(fa.push(new b({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),fa.push(new b({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(S=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<S.length&&(S=S.filter(ka=>"esriFieldTypeOID"!==ka.type&&"value"!==ka.name.toLowerCase()).map(ka=>{const na=A.clone(ka);na.name=D+ka.name;return na}),fa=fa.concat(S));return fa}},{key:"renderingRule",set:function(D){D&&D.rasterFunction&&
(D=G.fromJSON({...D.toJSON(),rasterFunction:D.rasterFunction,rasterFunctionArguments:D.rasterFunctionArguments}));this._set("renderingRule",D)}}]);return ra}(ha);v.__decorate([L.property()],ha.prototype,"_functionRasterInfos",void 0);v.__decorate([L.property()],ha.prototype,"_rasterJobHandler",void 0);v.__decorate([L.property()],ha.prototype,"_symbolizer",void 0);v.__decorate([L.property()],ha.prototype,"_defaultServiceMosaicRule",void 0);v.__decorate([h.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],
ha.prototype,"readDefaultServiceMosaicRule",null);v.__decorate([L.property()],ha.prototype,"_cachedRendererJson",void 0);v.__decorate([L.property()],ha.prototype,"rasterAttributeTableFieldPrefix",void 0);v.__decorate([L.property({readOnly:!0,dependsOn:["rasterFunctionInfos"]})],ha.prototype,"rasterFunctionNamesIndex",null);v.__decorate([L.property({readOnly:!0,dependsOn:["url"]})],ha.prototype,"queryTask",null);v.__decorate([L.property()],ha.prototype,"adjustAspectRatio",void 0);v.__decorate([L.property({readOnly:!0}),
M.aliasOf("serviceRasterInfo.bandCount")],ha.prototype,"bandCount",void 0);v.__decorate([L.property({type:[J.Integer],json:{write:!0}})],ha.prototype,"bandIds",void 0);v.__decorate([h.reader("bandIds")],ha.prototype,"readBandIds",null);v.__decorate([L.property({readOnly:!0,json:{read:!1}})],ha.prototype,"capabilities",void 0);v.__decorate([h.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],ha.prototype,"readCapabilities",null);v.__decorate([L.property({type:Number})],
ha.prototype,"compressionQuality",void 0);v.__decorate([n.writer("compressionQuality")],ha.prototype,"writeCompressionQuality",null);v.__decorate([L.property({type:Number})],ha.prototype,"compressionTolerance",void 0);v.__decorate([n.writer("compressionTolerance")],ha.prototype,"writeCompressionTolerance",null);v.__decorate([L.property({json:{read:{source:"copyrightText"}}})],ha.prototype,"copyright",void 0);v.__decorate([L.property({type:String,json:{read:{source:"layerDefinition.definitionExpression"},
write:{target:"layerDefinition.definitionExpression"}}})],ha.prototype,"definitionExpression",void 0);v.__decorate([L.property({readOnly:!0,constructOnly:!0})],ha.prototype,"exportImageServiceParameters",void 0);v.__decorate([L.property()],ha.prototype,"rasterInfo",void 0);v.__decorate([L.property({readOnly:!0,type:[b]})],ha.prototype,"fields",void 0);v.__decorate([L.property({readOnly:!0,dependsOn:["fields"]})],ha.prototype,"fieldsIndex",null);v.__decorate([L.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),
json:{write:!0}})],ha.prototype,"format",null);v.__decorate([h.reader("service","format",["serviceDataType"])],ha.prototype,"readFormat",null);v.__decorate([L.property({type:g})],ha.prototype,"fullExtent",void 0);v.__decorate([L.property({readOnly:!0})],ha.prototype,"hasMultidimensions",void 0);v.__decorate([L.property({json:{read:{source:"maxImageHeight"}}})],ha.prototype,"imageMaxHeight",void 0);v.__decorate([L.property({json:{read:{source:"maxImageWidth"}}})],ha.prototype,"imageMaxWidth",void 0);
v.__decorate([L.property({type:String,json:{type:da.jsonValues,read:da.read,write:da.write}})],ha.prototype,"interpolation",void 0);v.__decorate([L.property()],ha.prototype,"minScale",void 0);v.__decorate([h.reader("service","minScale")],ha.prototype,"readMinScale",null);v.__decorate([L.property()],ha.prototype,"maxScale",void 0);v.__decorate([h.reader("service","maxScale")],ha.prototype,"readMaxScale",null);v.__decorate([L.property({type:P})],ha.prototype,"mosaicRule",null);v.__decorate([h.reader("mosaicRule",
["mosaicRule","defaultMosaicMethod"])],ha.prototype,"readMosaicRule",null);v.__decorate([n.writer("mosaicRule")],ha.prototype,"writeMosaicRule",null);v.__decorate([L.property({readOnly:!0}),M.aliasOf("serviceRasterInfo.multidimensionalInfo")],ha.prototype,"multidimensionalInfo",void 0);v.__decorate([L.property({json:{type:J.Integer}})],ha.prototype,"noData",void 0);v.__decorate([n.writer("noData")],ha.prototype,"writeNoData",null);v.__decorate([L.property({type:String,json:{type:ma.jsonValues,read:ma.read,
write:ma.write}})],ha.prototype,"noDataInterpretation",void 0);v.__decorate([L.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],ha.prototype,"objectIdField",void 0);v.__decorate([h.reader("objectIdField")],ha.prototype,"readObjectIdField",null);v.__decorate([L.property({readOnly:!0,dependsOn:["url"]})],ha.prototype,"parsedUrl",null);v.__decorate([L.property({readOnly:!0}),M.aliasOf("serviceRasterInfo.pixelSize.x")],ha.prototype,"pixelSizeX",void 0);v.__decorate([L.property({readOnly:!0}),
M.aliasOf("serviceRasterInfo.pixelSize.y")],ha.prototype,"pixelSizeY",void 0);v.__decorate([L.property({type:Function})],ha.prototype,"pixelFilter",void 0);v.__decorate([L.property()],ha.prototype,"raster",void 0);v.__decorate([L.property()],ha.prototype,"viewId",void 0);v.__decorate([L.property({types:C.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:C.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(za){return{enabled:za&&
"vector-field"!==za.type}}}}}}})],ha.prototype,"renderer",void 0);v.__decorate([h.reader("renderer")],ha.prototype,"readRenderer",null);v.__decorate([L.property(c.opacityDrawingInfo)],ha.prototype,"opacity",void 0);v.__decorate([L.property({readOnly:!0}),M.aliasOf("serviceRasterInfo.attributeTable")],ha.prototype,"rasterAttributeTable",void 0);v.__decorate([L.property({readOnly:!0,dependsOn:["fields","rasterInfo","capabilities"]})],ha.prototype,"rasterFields",null);v.__decorate([L.property({readOnly:!0})],
ha.prototype,"rasterFunctionInfos",void 0);v.__decorate([L.property({type:G})],ha.prototype,"renderingRule",null);v.__decorate([h.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],ha.prototype,"readRenderingRule",null);v.__decorate([n.writer("renderingRule")],ha.prototype,"writeRenderingRule",null);v.__decorate([L.property()],ha.prototype,"serviceDataType",void 0);v.__decorate([L.property({readOnly:!0,type:x})],ha.prototype,"spatialReference",void 0);v.__decorate([h.reader("spatialReference",
["spatialReference","extent"])],ha.prototype,"readSpatialReference",null);v.__decorate([L.property({json:{type:pa.jsonValues}})],ha.prototype,"pixelType",void 0);v.__decorate([h.reader("pixelType")],ha.prototype,"readPixelType",null);v.__decorate([n.writer("pixelType")],ha.prototype,"writePixelType",null);v.__decorate([L.property({constructOnly:!0,type:I})],ha.prototype,"serviceRasterInfo",void 0);v.__decorate([L.property()],ha.prototype,"sourceJSON",void 0);v.__decorate([L.property(c.url)],ha.prototype,
"url",void 0);v.__decorate([L.property({readOnly:!0})],ha.prototype,"version",void 0);v.__decorate([h.reader("version",["currentVersion","fields","timeInfo"])],ha.prototype,"readVersion",null);return ha=v.__decorate([d.subclass("esri.layers.mixins.ArcGISImageService")],ha)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e){var t;const w=O.getLogger("esri.layers.support.PixelBlock");v=t=function(u){function y(p){p=u.call(this,p)||this;p.width=null;p.height=null;p.pixelType="f32";p.validPixelCount=null;p.mask=null;p.maskIsAlpha=!1;p.pixels=null;p.statistics=null;return p}R._inheritsLoose(y,u);y.createEmptyBand=function(p,g){return new (t.getPixelArrayConstructor(p))(g)};y.getPixelArrayConstructor=function(p){let g;switch(p){case "u1":case "u2":case "u4":case "u8":g=Uint8Array;break;
case "u16":g=Uint16Array;break;case "u32":g=Uint32Array;break;case "s8":g=Int8Array;break;case "s16":g=Int16Array;break;case "s32":g=Int32Array;break;case "u32":g=Uint32Array;break;case "f32":g=Float32Array;break;case "f64":g=Float64Array;break;case "c64":case "c128":case "unknown":g=Float32Array}return g};var x=y.prototype;x.castPixelType=function(p){if(!p)return"f32";p=p.toLowerCase();-1<["u1","u2","u4"].indexOf(p)?p="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(p)&&(p="f32");
return p};x.getPlaneCount=function(){return this.pixels&&this.pixels.length};x.addData=function(p){if(!p.pixels||p.pixels.length!==this.width*this.height)throw new B("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(p.pixels);this.statistics.push(p.statistics||{minValue:null,maxValue:null})};x.getAsRGBA=function(){const p=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(p);break;default:this._fillFrom8Bit(p)}return new Uint8ClampedArray(p)};x.getAsRGBAFloat=function(){const p=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(p);return p};x.updateStatistics=function(){this.statistics=this.pixels.map(r=>this._calculateBandStatistics(r,this.mask));const p=this.mask;let g=0;if(p)for(let r=0;r<p.length;r++)p[r]&&g++;else g=
this.width*this.height;this.validPixelCount=g};x.clamp=function(p){if(p&&"f64"!==p&&"f32"!==p){switch(p){case "u8":var g=[0,255];break;case "u16":g=[0,65535];break;case "u32":g=[0,4294967295];break;case "s8":g=[-128,127];break;case "s16":g=[-32768,32767];break;case "s32":g=[-2147483648,2147483647];break;default:g=[-3.4*1E39,3.4*1E39]}var [r,z]=g;g=this.pixels;var f=this.width*this.height,a=g.length,q=[];for(let k=0;k<a;k++){var C=t.createEmptyBand(p,f);var c=g[k];for(let m=0;m<f;m++){var b=c[m];C[m]=
b>z?z:b<r?r:b}q.push(C)}this.pixels=q;this.pixelType=p}};x.extractBands=function(p){if(A.isNone(p)||0===p.length||null==this.pixels||0===this.pixels.length)return this;var g=this.pixels.length;const r=p.some(z=>z>=this.pixels.length);g=g===p.length&&!p.some((z,f)=>z!==f);return r||g?this:new t({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:p.map(z=>this.pixels[z]),statistics:this.statistics&&p.map(z=>
this.statistics[z])})};x.clone=function(){const p=new t({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(p.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let g;const r=t.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){p.pixels=[];const z=this.pixels[0].slice;for(g=0;g<this.pixels.length;g++)p.pixels[g]=z?this.pixels[g].slice(0,this.pixels[g].length):
new r(this.pixels[g])}if(this.statistics)for(p.statistics=[],g=0;g<this.statistics.length;g++)p.statistics[g]=U.clone(this.statistics[g]);return p};x._fillFrom8Bit=function(p){const {mask:g,maskIsAlpha:r,pixels:z}=this;if(p&&z&&z.length){var f,a;var q=f=a=z[0];3<=z.length?(f=z[1],a=z[2]):2===z.length&&(f=z[1]);var C=new Uint32Array(p),c=this.width*this.height;if(q.length!==c)w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(g&&g.length===c)if(r)for(p=0;p<c;p++)g[p]&&
(C[p]=g[p]<<24|a[p]<<16|f[p]<<8|q[p]);else for(p=0;p<c;p++)g[p]&&(C[p]=-16777216|a[p]<<16|f[p]<<8|q[p]);else for(p=0;p<c;p++)C[p]=-16777216|a[p]<<16|f[p]<<8|q[p]}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};x._fillFromNon8Bit=function(p){const {pixels:g,mask:r,statistics:z}=this;if(p&&g&&g.length){var f=this.pixelType,a=1,q=0;a=1;z&&0<z.length?(q=z.map(m=>m.minValue).reduce((m,l)=>Math.min(m,l)),a=z.map(m=>m.maxValue-m.minValue).reduce((m,l)=>Math.max(m,
l)),a=255/a):(a=255,"s8"===f?(q=-128,a=127):"u16"===f?a=65535:"s16"===f?(q=-32768,a=32767):"u32"===f?a=4294967295:"s32"===f?(q=-2147483648,a=2147483647):"f32"===f?(q=-3.4*1E39,a=3.4*1E39):"f64"===f&&(q=-Number.MAX_VALUE,a=Number.MAX_VALUE),a=255/(a-q));p=new Uint32Array(p);f=this.width*this.height;var C,c,b;var k=C=c=g[0];if(k.length!==f)return w.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=g.length)if(C=g[1],3<=g.length&&(c=g[2]),r&&r.length===f)for(b=0;b<f;b++)r[b]&&
(p[b]=-16777216|(c[b]-q)*a<<16|(C[b]-q)*a<<8|(k[b]-q)*a);else for(b=0;b<f;b++)p[b]=-16777216|(c[b]-q)*a<<16|(C[b]-q)*a<<8|(k[b]-q)*a;else if(r&&r.length===f)for(b=0;b<f;b++)C=(k[b]-q)*a,r[b]&&(p[b]=-16777216|C<<16|C<<8|C);else for(b=0;b<f;b++)C=(k[b]-q)*a,p[b]=-16777216|C<<16|C<<8|C}else w.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};x._fillFrom32Bit=function(p){const {pixels:g,mask:r}=this;if(!p||!g||!g.length)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let z,f,a,q;z=f=a=g[0];3<=g.length?(f=g[1],a=g[2]):2===g.length&&(f=g[1]);const C=this.width*this.height;if(z.length!==C)return w.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let c=0;if(r&&r.length===C)for(q=0;q<C;q++)p[c++]=z[q],p[c++]=f[q],p[c++]=a[q],p[c++]=r[q]&1;else for(q=0;q<C;q++)p[c++]=z[q],p[c++]=f[q],p[c++]=a[q],p[c++]=1};x._calculateBandStatistics=function(p,g){let r=Infinity,z=-Infinity;const f=p.length;let a,q=0;if(g)for(a=0;a<f;a++)g[a]&&(q=p[a],
r=q<r?q:r,z=q>z?q:z);else for(a=0;a<f;a++)q=p[a],r=q<r?q:r,z=q>z?q:z;return{minValue:r,maxValue:z}};return y}(e.JSONSupport);H.__decorate([E.property({json:{write:!0}})],v.prototype,"width",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"height",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"pixelType",void 0);H.__decorate([J.cast("pixelType")],v.prototype,"castPixelType",null);H.__decorate([E.property({json:{write:!0}})],v.prototype,"validPixelCount",void 0);
H.__decorate([E.property({json:{write:!0}})],v.prototype,"mask",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"maskIsAlpha",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"pixels",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"statistics",void 0);return v=t=H.__decorate([M.subclass("esri.layers.support.PixelBlock")],v)})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(R,H,v,U,A,O,E,J){function L(d,n){if(!d)return null;var e=d?h[d.type]||null:null;if(e)return e=new e,e.read(d,n),e;n&&n.messages&&d&&n.messages.push(new H("renderer:unsupported","Renderers of type '"+(d.type||"unknown")+"' are not supported",{definition:d,context:n}));return null}const M={key:"type",base:null,typeMap:{"unique-value":E,"class-breaks":v,"raster-colormap":U,"raster-stretch":O,"vector-field":J,"raster-shaded-relief":A}},B={...M,typeMap:{...M.typeMap}};delete B.typeMap["vector-field"];
const h={uniqueValue:E,classBreaks:v,rasterStretch:O,rasterColormap:U,vectorField:J,rasterShadedRelief:A};R.ClassBreaksRenderer=v;R.RasterColormapRenderer=U;R.RasterShadedReliefRenderer=A;R.RasterStretchRenderer=O;R.UniqueValueRenderer=E;R.VectorFieldRenderer=J;R.fromJSON=function(d,n){return L(d,n)};R.rasterRendererTypes=M;R.read=L;R.websceneRasterRendererTypes=B;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n){var e;v=e=function(t){function w(y){y=t.call(this,y)||this;y.colormapInfos=null;y.type="raster-colormap";return y}R._inheritsLoose(w,t);w.createFromColormap=function(y,x){function p(r){return x?x[r]||"":String(r[0])}if(!y)return null;var g=5===y[0].length;y=y.sort(r=>r[0][0]-r[1][0]);g=g?y.map(r=>d.fromJSON({value:r[0],color:r.slice(1,5),label:p(r[0])})):y.map(r=>d.fromJSON({value:r[0],color:r.slice(1,4).concat([255]),label:p(r[0])}));return new e({colormapInfos:g})};
w.createFromColorramp=function(y){y=n.convertColorRampToColormap(y,256);return e.createFromColormap(y)};var u=w.prototype;u.clone=function(){return new e({colormapInfos:this.colormapInfos.map(y=>y.toJSON())})};u.extractColormap=function(){return this.colormapInfos.map(y=>[y.value,y.color.r,y.color.g,y.color.b,1<y.color.a?y.color.a:255*y.color.a&255]).sort((y,x)=>y[0]-x[0])};return w}(h.JSONSupport);H.__decorate([O.property({type:[d],json:{write:!0}})],v.prototype,"colormapInfos",void 0);H.__decorate([E.enumeration({rasterColormap:"raster-colormap"})],
v.prototype,"type",void 0);return v=e=H.__decorate([J.subclass("esri.renderers.RasterColormapRenderer")],v)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d){v=function(n){function e(){var t=n.apply(this,arguments)||this;t.value=null;t.label=null;t.color=null;return t}R._inheritsLoose(e,n);return e}(h.JSONSupport);H.__decorate([O.property({type:Number,json:{write:!0}})],v.prototype,"value",void 0);H.__decorate([O.property({type:String,json:{write:!0}})],v.prototype,"label",void 0);H.__decorate([O.property({type:d,json:{type:[A.Integer],write:!0}})],v.prototype,"color",void 0);return v=H.__decorate([J.subclass("esri.renderers.support.ColormapInfo")],
v)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(R,H,v){function U(J,L){if(!J||!L||J.length!==L.length)return!1;for(let M=0;M<J.length;M++)if(J[M]>L[M]+2||J[M]<L[M]-2)return!1;return!0}function A(J,L){if(J){L=L?L:O;var M=null,B;"algorithmic"===J.type?L.some(h=>{if(U(J.fromColor.toRgb(),h.fromColor)&&U(J.toColor.toRgb(),h.toColor))return M=h.id,!0}):"multipart"===J.type&&L.some(h=>{if(J.colorRamps&&h.colorRamps&&J.colorRamps.length===
h.colorRamps.length&&(B=J.colorRamps,!h.colorRamps.some((d,n)=>{if(!U(B[n].fromColor.toRgb(),(new H(d.fromColor)).toRgb())||!U(B[n].toColor.toRgb(),(new H(d.toColor)).toRgb()))return!0}))){if(M)return!0;M=h.id}});return M}}const O=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,
52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],E={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",
brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",
errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",
purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",
spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};R.PREDEFINED_COLOR_RAMP_NAME_MAP=
E;R.PREDEFINED_JSON_COLOR_RAMPS=O;R.convertColorRampToColormap=function(J,L,M=!1){if(J&&L&&!(2>L)){var B="toJSON"in J?J.toJSON():J,h="multipart"===B.type?B.colorRamps.length:1;J=[];var d=[],n,e,t,w,u=0;for(let x=0;x<h;x++)J[x]={start:null,end:null},J[x].start=u,J[x].end=u+1/h,u=J[x].end;for(let x=0;x<L;x++){var y=x/(L-1);J.forEach((p,g)=>{if(y>=p.start&&(y<p.end||x===L-1&&g===h-1)){w=(y-p.start)/(p.end-p.start);"multipart"===B.type?(n=B.colorRamps[g].fromColor,e=B.colorRamps[g].toColor):(n=B.fromColor,
e=B.toColor);if(0===x)d.push([x].concat(n.slice(0,3)));else if(x===L-1)d.push([x].concat(e.slice(0,3)));else{var r={r:e[0],g:e[1],b:e[2]};p=w;g=v.toLAB({r:n[0],g:n[1],b:n[2]});r=v.toLAB(r);t=v.toRGB({l:g.l*(1-p)+p*r.l,a:g.a*(1-p)+p*r.a,b:g.b*(1-p)+p*r.b});d.push([x,t.r,t.g,t.b])}p=null!=n[3]?1<n[3]?n[3]/255:n[3]:1;g=null!=e[3]?1<e[3]?e[3]/255:e[3]:1;M&&d[x].push(Math.min(255,Math.round(255*(p*(1-w)+g*w))))}})}return d}};R.getColorRampId=A;R.getColorRampName=function(J){return(J=A(J))?E[J]:null};Object.defineProperty(R,
"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(R){function H(M,B){const h=[];let d,n;if(M[0].length!==B.length)throw"dimensions do not match";const e=M.length,t=M[0].length;let w=0;for(d=0;d<e;d++){for(n=w=0;n<t;n++)w+=M[d][n]*B[n];h.push(w)}return h}function v(M){M=[M.r/255,M.g/255,M.b/255].map(B=>.04045>=B?B/12.92:Math.pow((B+.055)/1.055,2.4));M=H(J,M);return{x:100*M[0],y:100*M[1],z:100*M[2]}}function U(M){M=H(L,[M.x/100,M.y/100,M.z/100]).map(B=>Math.min(1,
Math.max(.0031308>=B?12.92*B:1.055*Math.pow(B,1/2.4)-.055,0)));return{r:Math.round(255*M[0]),g:Math.round(255*M[1]),b:Math.round(255*M[2])}}function A(M){M=[M.x/95.047,M.y/100,M.z/108.883].map(B=>B>Math.pow(6/29,3)?Math.pow(B,1/3):1/3*Math.pow(29/6,2)*B+4/29);return{l:116*M[1]-16,a:500*(M[0]-M[1]),b:200*(M[1]-M[2])}}function O(M){const B=M.l;M=[(B+16)/116+M.a/500,(B+16)/116,(B+16)/116-M.b/200].map(h=>h>6/29?Math.pow(h,3):3*Math.pow(6/29,2)*(h-4/29));return{x:95.047*M[0],y:100*M[1],z:108.883*M[2]}}
function E(M){if("r"in M&&"g"in M&&"b"in M)return M;if("l"in M&&"c"in M&&"h"in M){var B=M.c;var h=M.h;B={l:M.l,a:B*Math.cos(h),b:B*Math.sin(h)};return U(O(B))}if("l"in M&&"a"in M&&"b"in M)return U(O(M));if("x"in M&&"y"in M&&"z"in M)return U(M);if("h"in M&&"s"in M&&"v"in M){{h=(M.h+360)%360/60;B=M.v/100*255;M=M.s/100*B;const d=M*(1-Math.abs(h%2-1));switch(Math.floor(h)){case 0:h={r:M,g:d,b:0};break;case 1:h={r:d,g:M,b:0};break;case 2:h={r:0,g:M,b:d};break;case 3:h={r:0,g:d,b:M};break;case 4:h={r:d,
g:0,b:M};break;case 5:case 6:h={r:M,g:0,b:d};break;default:h={r:0,g:0,b:0}}h.r=Math.round(h.r+B-M);h.g=Math.round(h.g+B-M);h.b=Math.round(h.b+B-M);B=h}return B}return M}const J=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],L=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];R.darken=function(M,B){M=A(v(M));M.l*=1-B;return U(O(M))};R.toHSV=function(M){if("h"in M&&"s"in M&&"v"in M)return M;var B=E(M);{M=B.r;const h=B.g,d=B.b;B=Math.max(M,h,d);const n=B-Math.min(M,h,
d);M=0===n?0:B===M?(h-d)/n%6:B===h?(d-M)/n+2:(M-h)/n+4;0>M&&(M+=6);M={h:60*M,s:100*(0===n?0:n/B),v:100/255*B}}return M};R.toLAB=function(M){return"l"in M&&"a"in M&&"b"in M?M:A(v(E(M)))};R.toLCH=function(M){if(!("l"in M&&"c"in M&&"h"in M)){{var B=A(v(E(M)));M=B.l;var h=B.a;const d=B.b;B=Math.sqrt(h*h+d*d);h=Math.atan2(d,h);h=0<h?h:h+2*Math.PI;M={l:M,c:B,h}}}return M};R.toRGB=E;R.toXYZ=function(M){return"x"in M&&"y"in M&&"z"in M?M:v(E(M))};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e){var t;v=t=function(w){function u(x){x=w.call(this,x)||this;x.altitude=45;x.azimuth=315;x.colorRamp=null;x.hillshadeType="multi-directional";x.pixelSizePower=.664;x.pixelSizeFactor=.024;x.scalingType="none";x.type="raster-shaded-relief";x.zFactor=1;return x}R._inheritsLoose(u,w);var y=u.prototype;y.readColorRamp=function(x){return e.fromJSON(x)};y.clone=function(){return new t({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:U.clone(this.colorRamp)})};return u}(n.JSONSupport);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"altitude",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"azimuth",void 0);H.__decorate([E.property({types:e.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);H.__decorate([L.reader("colorRamp")],v.prototype,"readColorRamp",null);H.__decorate([E.property({type:["traditional",
"multi-directional"],json:{write:!0}})],v.prototype,"hillshadeType",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizePower",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"pixelSizeFactor",void 0);H.__decorate([E.property({type:["none","adjusted"],json:{write:!0}})],v.prototype,"scalingType",void 0);H.__decorate([J.enumeration({rasterShadedRelief:"raster-shaded-relief"})],v.prototype,"type",void 0);H.__decorate([E.property({type:Number,
json:{write:!0}})],v.prototype,"zFactor",void 0);return v=t=H.__decorate([M.subclass("esri.renderers.RasterShadedReliefRenderer")],v)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps ./support/stretchRendererUtils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w){var u;v=u=function(y){function x(g){g=y.call(this,g)||this;g.colorRamp=null;g.computeGamma=!1;g.dynamicRangeAdjustment=!1;g.gamma=[];g.maxPercent=null;g.minPercent=null;g.numberOfStandardDeviations=null;g.outputMax=null;g.outputMin=null;g.sigmoidStrengthLevel=null;g.statistics=[];g.histograms=null;g.useGamma=!1;g.stretchType="none";g.type="raster-stretch";return g}R._inheritsLoose(x,y);var p=x.prototype;p.readColorRamp=function(g){if(g)return t.fromJSON(g)};
p.writeStatistics=function(g,r,z){var f;null!=(f=g)&&f.length&&(Array.isArray(g[0])||(g=g.map(a=>[a.min,a.max,a.avg,a.stddev])),r[z]=g)};p.readStretchType=function(g,r){g=r.stretchType;"number"===typeof g&&(g=w.stretchTypeFunctionEnum[g]);return w.stretchTypeJSONDict.read(g)};p.clone=function(){return new u({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:U.clone(this.statistics),gamma:U.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:U.clone(this.colorRamp),histograms:U.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return x}(e.JSONSupport);H.__decorate([E.property({types:t.types,json:{write:!0}})],v.prototype,"colorRamp",void 0);H.__decorate([L.reader("colorRamp")],v.prototype,"readColorRamp",null);H.__decorate([E.property({type:Boolean,
json:{write:!0}})],v.prototype,"computeGamma",void 0);H.__decorate([E.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],v.prototype,"dynamicRangeAdjustment",void 0);H.__decorate([E.property({type:[Number],json:{write:!0}})],v.prototype,"gamma",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"maxPercent",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"minPercent",void 0);H.__decorate([E.property({type:O.Integer,json:{write:!0}})],
v.prototype,"numberOfStandardDeviations",void 0);H.__decorate([E.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],v.prototype,"outputMax",void 0);H.__decorate([E.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],v.prototype,"outputMin",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"sigmoidStrengthLevel",void 0);H.__decorate([E.property({json:{type:[[Number]],write:!0}})],v.prototype,"statistics",void 0);H.__decorate([E.property()],
v.prototype,"histograms",void 0);H.__decorate([B.writer("statistics")],v.prototype,"writeStatistics",null);H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"useGamma",void 0);H.__decorate([E.property({type:w.stretchTypeJSONDict.apiValues,json:{type:w.stretchTypeJSONDict.jsonValues,write:w.stretchTypeJSONDict.write}})],v.prototype,"stretchType",void 0);H.__decorate([L.reader("stretchType",["stretchType"])],v.prototype,"readStretchType",null);H.__decorate([J.enumeration({rasterStretch:"raster-stretch"})],
v.prototype,"type",void 0);return v=u=H.__decorate([M.subclass("esri.renderers.RasterStretchRenderer")],v)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(R,H){H=new H.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});R.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",
9:"sigmoid"};R.stretchTypeJSONDict=H;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/Point ../geometry ../Color ../symbols/SimpleLineSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../chunks/symbols ../Graphic ./visualVariables/RotationVariable ./visualVariables/support/visualVariableUtils ./visualVariables/SizeVariable ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./ClassBreaksRenderer ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ../symbols/support/utils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u,y,x,p,g,r,z,f,a,q,C,c,b,k,m){var l;const K=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),F=new J.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});v=new J.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",
beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});J=new J.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});e=l=function(G){function N(Q){Q=G.call(this,Q)||this;Q.attributeField="Magnitude";Q.flowRepresentation="flow-from";Q.rotationType="arithmetic";Q.style="single-arrow";Q.symbolTileSize=50;Q.type="vector-field";return Q}R._inheritsLoose(N,
G);var P=N.prototype;P.readInputUnit=function(Q,I){return K.has(Q)?F.fromJSON(Q):null};P.readOutputUnit=function(Q,I){return K.has(Q)?F.fromJSON(Q):null};P.clone=function(){return new l({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:U.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};P.getGraphicsFromPixelData=async function(Q,I=!1){const T=[];var W=k.getUnitConversionFactor(this.inputUnit,
this.outputUnit);I=I?k.convertVectorFieldData(Q.pixelBlock,"vector-uv",this.rotationType,W):k.convertVectorFieldUnit(Q.pixelBlock,"vector-magdir",W);Q=Q.extent;W=I.mask&&0<I.mask.length;let Y=0;const Z=(Q.xmax-Q.xmin)/I.width,ca=(Q.ymax-Q.ymin)/I.height;for(let ja=0;ja<I.height;ja++)for(let ia=0;ia<I.width;ia++,Y++){var ba=[Q.xmin+ia*Z+Z/2,Q.ymax-ja*ca-ca/2];if((!W||I.mask[Y])&&ba&&2===ba.length){var aa={Magnitude:I.pixels[0][Y],Direction:I.pixels[1][Y]};ba=new t({x:ba[0],y:ba[1],spatialReference:Q.spatialReference});
ba=(await b.normalizeCentralMeridian(ba))[0];aa=new r({geometry:{type:"point",x:ba.x,y:ba.y,spatialReference:Q.spatialReference},attributes:aa});aa.symbol=this._getVisualVariablesAppliedSymbol(aa);T.push(aa)}}return T};P.getSymbol=function(Q,I){};P.getSymbolAsync=async function(Q,I){};P.getSymbols=function(){return[]};P.getClassBreakInfos=function(){var Q;return null==(Q=this.styleRenderer)?void 0:Q.classBreakInfos};P.getDefaultSymbol=function(){var Q;return null==(Q=this.styleRenderer)?void 0:Q.defaultSymbol};
P._getDefaultSymbol=function(Q){return new p({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new y({width:0}),size:20,color:Q||new u([0,92,230])})};P._getVisualVariablesAppliedSymbol=function(Q){if(Q){var I=this.styleRenderer&&this.styleRenderer.getSymbol(Q);I=I.clone();var T=this.sizeVariables,W=this.rotationVariables;T&&T.length&&this.sizeVariables.forEach(Y=>m.applySizesToSymbol(I,f.getAllSizes([Y],Q)));W&&W.length&&(T=Q.attributes.Direction,Q.attributes.Direction="flow-from"===this.flowRepresentation?
T:T+180,this.rotationVariables.forEach(Y=>m.applyRotationToSymbol(I,f.getRotationAngle(Y,Q),Y.axis)));return I}};P._createStyleRenderer=function(Q){let I={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(Q){case "single-arrow":I=this._createSingleArrowRenderer();break;case "beaufort-kn":I=this._createBeaufortKnotsRenderer();break;case "beaufort-m":I=this._createBeaufortMeterRenderer();break;case "beaufort-ft":I=this._createBeaufortFeetRenderer();break;case "beaufort-mi":I=this._createBeaufortMilesRenderer();
break;case "beaufort-km":I=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":I=this._createCurrentMeterRenderer();break;case "ocean-current-kn":I=this._createCurrentKnotsRenderer();break;case "simple-scalar":I=this._createSimpleScalarRenderer();break;case "wind-barb":I=this._createWindBarbsRenderer();break;case "classified-arrow":I=this._createClassifiedArrowRenderer()}return new c(I)};P._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};P._createBeaufortKnotsRenderer=
function(){const Q=this._getDefaultSymbol(new u([214,47,39])),I=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createBeaufortMeterRenderer=function(){const Q=this._getDefaultSymbol(new u([214,47,39])),I=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],
[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createBeaufortFeetRenderer=function(){const Q=this._getDefaultSymbol(new u([214,47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(T=>3.28084*T);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,
191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createBeaufortMilesRenderer=function(){const Q=this._getDefaultSymbol(new u([214,47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(T=>2.23694*T);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:Q,
classBreakInfos:I}};P._createBeaufortKilometersRenderer=function(){const Q=this._getDefaultSymbol(new u([214,47,39]));var I=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];I=I.map(T=>3.6*T);I=this._getClassBreaks(I,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createCurrentMeterRenderer=function(){const Q=this._getDefaultSymbol(new u([177,
177,177])),I=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createCurrentKnotsRenderer=function(){const Q=this._getDefaultSymbol(new u([177,177,177])),I=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:Q,classBreakInfos:I}};P._createClassifiedArrowRenderer=function(){var Q;const I=
this._getDefaultSymbol(new u([56,168,0]));var T=[0,1E-6,3.5,7,10.5,14];if(null!=(Q=this.sizeVariables)&&Q.length){const W=this.sizeVariables[0].minDataValue;Q=this.sizeVariables[0].maxDataValue;if(W&&Q){const Y=(Q-W)/5;T=Array.from(Array(6).keys()).map(Z=>W+Y*Z)}}T=this._getClassBreaks(T,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:I,classBreakInfos:T}};P._createSimpleScalarRenderer=function(){return{defaultSymbol:x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};P._createWindBarbsRenderer=function(){const Q=Array.from(Array(31).keys()).map(Y=>5*Y),I=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjE1IDIwIDIwIDIwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoIGQ9Ik0yNSAwIEwyNSA0MCBNMjUgMzUgTDE3LjUgMzcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],T=x.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),W=Q.map((Y,Z)=>{if(Z!==Q.length-1)if(0===Z)var ca={minValue:Y,maxValue:Q[Z+1],symbol:T};else ca=x.fromJSON({type:"esriPMS",imageData:I[Z].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),ca={minValue:Y,maxValue:Q[Z+1],symbol:ca};return new C(ca)});return{defaultSymbol:T,classBreakInfos:W}};P._getClassBreaks=function(Q,I){return I.map((T,W)=>new C({minValue:Q[W],maxValue:Q[W+1],symbol:this._getDefaultSymbol(new u(T))}))};R._createClass(N,
[{key:"styleRenderer",get:function(){const Q=this.attributeField,I=this._createStyleRenderer(this.style);I.field=Q;return I}},{key:"sizeVariables",get:function(){const Q=[];if(this.visualVariables)for(var I of this.visualVariables)"size"===I.type&&Q.push(I);0===Q.length&&(I=new a({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(I):this._set("visualVariables",[I]),Q.push(I));return Q}},{key:"rotationVariables",get:function(){const Q=[];
if(this.visualVariables)for(var I of this.visualVariables)"rotation"===I.type&&Q.push(I);0===Q.length&&(I=new z({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(I):this._set("visualVariables",[I]),Q.push(I));return Q}}]);return N}(q.VisualVariablesMixin(e.JSONSupport));H.__decorate([E.property({type:String,json:{write:!0}})],e.prototype,"attributeField",void 0);H.__decorate([E.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},
write:{writer:J.write}}})],e.prototype,"flowRepresentation",void 0);H.__decorate([E.property({type:["geographic","arithmetic"],json:{write:!0}})],e.prototype,"rotationType",void 0);H.__decorate([E.property({type:v.apiValues,json:{type:v.jsonValues,read:{reader:v.read},write:{writer:v.write}}})],e.prototype,"style",void 0);H.__decorate([E.property({json:{write:!0}})],e.prototype,"symbolTileSize",void 0);H.__decorate([E.property({type:F.apiValues,json:{type:F.jsonValues,write:{writer:F.write}}})],e.prototype,
"inputUnit",void 0);H.__decorate([M.reader("inputUnit")],e.prototype,"readInputUnit",null);H.__decorate([E.property({type:F.apiValues,json:{type:F.jsonValues,read:{reader:F.read},write:{writer:F.write}}})],e.prototype,"outputUnit",void 0);H.__decorate([M.reader("outputUnit")],e.prototype,"readOutputUnit",null);H.__decorate([L.enumeration({vectorField:"vector-field"})],e.prototype,"type",void 0);H.__decorate([E.property({type:c,dependsOn:["style","attributeField"]})],e.prototype,"styleRenderer",null);
H.__decorate([E.property({type:a,dependsOn:["visualVariables","symbolTileSize"]})],e.prototype,"sizeVariables",null);H.__decorate([E.property({type:z,dependsOn:["visualVariables","rotationType"]})],e.prototype,"rotationVariables",null);return e=l=H.__decorate([B.subclass("esri.renderers.VectorFieldRenderer")],e)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../PixelBlock"],function(R,H){function v(J,L="geographic"){const [M,B]=J;J=Math.sqrt(M*M+B*B);let h=
Math.atan2(B,M)*A;h=(360+h)%360;"geographic"===L&&(h=(450-h)%360);return[J,h]}function U(J,L="geographic"){let M=J[1];"geographic"===L&&(M=(450-M)%360);M%=360;J=J[0];return[J*Math.cos(M/A),J*Math.sin(M/A)]}const A=180/Math.PI,O=function(J){return J&&"esri.layers.support.PixelBlock"===J.declaredClass&&J.pixels&&0<J.pixels.length},E=new Map;E.set("meter-per-second",1);E.set("kilometer-per-hour",.277778);E.set("knots",.514444);E.set("feet-per-second",.3048);E.set("mile-per-hour",.44704);R.convertVectorFieldData=
function(J,L,M="geographic",B=1){if(!O(J))return J;const {pixels:h,width:d,height:n}=J;var e=d*n;const t=h[0],w=h[1],u=H.createEmptyBand(J.pixelType,e);e=H.createEmptyBand(J.pixelType,e);let y=0;for(let x=0;x<n;x++)for(let p=0;p<d;p++)"vector-uv"===L?([u[y],e[y]]=v([t[y],w[y]],M),u[y]*=B):([u[y],e[y]]=U([t[y],w[y]],M),u[y]*=B,e[y]*=B),y++;J=new H({pixelType:J.pixelType,width:J.width,height:J.height,mask:J.mask,validPixelCount:J.validPixelCount,maskIsAlpha:J.maskIsAlpha,pixels:[u,e]});J.updateStatistics();
return J};R.convertVectorFieldUnit=function(J,L,M=1){if(1===M||!O(J))return J;J=J.clone();const {pixels:B,width:h,height:d}=J,n=B[0],e=B[1];let t=0;for(let w=0;w<d;w++)for(let u=0;u<h;u++)"vector-uv"===L?(n[t]*=M,e[t]*=M):n[t]*=M,t++;J.updateStatistics();return J};R.getUnitConversionFactor=function(J,L){return E.get(L)/E.get(J)||1};R.isValidPixelBlock=O;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/symbols/support/utils":function(){define("require exports ../../core/has ../../core/maybe ../../Color ../../core/screenUtils ./Symbol3DMaterial ../../chunks/symbols ../../core/asyncUtils ../../chunks/vec3f64 ./gfxUtils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B){function h(r,z){if(null==z)return r;r=r.toRgba();r[3]*=z;return new A(r)}function d(r,z,f){if(r=r.symbolLayers){var a=q=>{q=U.isSome(q)?q:null;z=z||q||null!=f&&g;return h(z,f)};r.forEach(q=>{if("object"!==q.type||null==q.resource.href||z)if("water"===q.type)q.color=a(q.color);else{var C=U.isSome(q.material)?q.material.color:null;C=a(C);U.isNone(q.material)?q.material=new E["default"]({color:C}):q.material.color=C;null!=f&&"outline"in q&&U.isSome(q.outline)&&U.isSome(q.outline.color)&&
(q.outline.color=h(q.outline.color,f))}})}}async function n(r,z){(r=r.symbolLayers)&&await L.forEach(r,async f=>e(f,z))}async function e(r,z){switch(r.type){case "extrude":r.size="number"===typeof z[2]?z[2]:0;break;case "icon":case "line":case "text":z=t(z);U.isSome(z)&&(r.size=z);break;case "path":{const f=u(z,M.ONES,[r.width,void 0,r.height]);r.width=x(z[0],r.width,1,f);r.height=x(z[2],r.height,1,f)}break;case "object":await w(r,z)}}function t(r){for(const z of r)if("number"===typeof z)return z;
return null}async function w(r,z){const {resourceSize:f,symbolSize:a}=await y(r),q=u(z,f,a);r.width=x(z[0],a[0],f[0],q);r.depth=x(z[1],a[1],f[1],q);r.height=x(z[2],a[2],f[2],q)}function u(r,z,f){for(let a=0;3>a;a++){const q=r[a];switch(q){case "symbol-value":return null!=f[a]?f[a]/z[a]:1;case "proportional":break;default:if(q&&z[a])return q/z[a]}}return 1}async function y(r){const z=await (await new Promise(function(b,k){R(["./symbolLayerUtils"],b,k)})).computeObjectLayerResourceSize(r,10),{width:f,
height:a,depth:q}=r;r=[f,q,a];let C=1;for(var c=0;3>c;c++)if(null!=r[c]){C=r[c]/z[c];break}for(c=0;3>c;c++)null==r[c]&&(r[c]=z[c]*C);return{resourceSize:z,symbolSize:r}}function x(r,z,f,a){switch(r){case "proportional":return f*a;case "symbol-value":return null!=z?z:f;default:return r}}const p=/\/resource\/(.*?)\.svg$/,g=new A("white");H.applyColorToSymbol=function(r,z,f){if(r&&(z||null!=f))if(z&&(z=new A(z)),J.isSymbol3D(r))d(r,z,f);else if(J.isSymbol2D(r)){if(z=z||r.color)r.color=h(z,f);null!=f&&
"outline"in r&&r.outline&&r.outline.color&&(r.outline.color=h(r.outline.color,f))}};H.applyOpacityToColor=h;H.applyRotationToSymbol=function(r,z,f){r&&null!=z&&(J.isSymbol3D(r)?(r=r.symbolLayers)&&r.forEach(a=>{if(a&&"object"===a.type)switch(f){case "tilt":a.tilt=z;break;case "roll":a.roll=z;break;default:a.heading=z}}):!J.isSymbol2D(r)||"simple-marker"!==r.type&&"picture-marker"!==r.type&&"text"!==r.type||(r.angle=z))};H.applySizesToSymbol=async function(r,z){if(r&&z){if(J.isSymbol3D(r))return n(r,
z);if(J.isSymbol2D(r)&&(z=t(z),!U.isNone(z)))switch(r.type){case "simple-marker":r.size=z;break;case "picture-marker":{const f=r.width/r.height;1<f?(r.width=z,r.height=z*f):(r.width=z*f,r.height=z);break}case "simple-line":r.width=z;break;case "text":r.font.size=z}}};H.getIconHref=function(r,z){z=z.resource.href;return!v("esri-canvas-svg-support")&&r.styleOrigin&&p.test(z)?z.replace(p,"/resource/png/$1.png"):z};H.getSymbolOutlineSize=function(r){if(!r)return 0;if(J.isSymbol3D(r)){{const z=r.symbolLayers&&
r.symbolLayers.length;z?(r=r.symbolLayers.getItemAt(z-1),r="outline"in r?U.get(r,"outline","size"):void 0):r=void 0}return U.isSome(r)?r:0}return(r=B.getStroke(r))&&O.px2pt(r.width)||0};H.isVolumetricSymbol=function(r){if(!r||!r.symbolLayers)return!1;switch(r.type){case "point-3d":return r.symbolLayers.some(z=>"object"===z.type);case "line-3d":return r.symbolLayers.some(z=>"path"===z.type);case "polygon-3d":return r.symbolLayers.some(z=>"object"===z.type||"extrude"===z.type);default:return!1}};Object.defineProperty(H,
"__esModule",{value:!0})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../core/promiseUtils ../../Color ../../core/screenUtils ../../request ../../assets ../../core/ItemCache ./cimSymbolUtils".split(" "),function(R,H,v,U,A,O,E,J){function L(e){if(!e)return null;let t;switch(e.type){case "simple-fill":case "picture-fill":case "simple-marker":t=L(e.outline);break;case "simple-line":{const w=U.pt2px(e.width);"none"!==e.style&&0!==w&&(t={color:e.color,style:n(e.style),width:w,cap:e.cap,
join:"miter"===e.join?U.pt2px(e.miterLimit):e.join});break}default:t=null}return t}const M=O.getAssetUrl("esri/symbols/patterns/"),B={left:"start",center:"middle",right:"end",justify:"start"},h={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},d=new E(1E3),n=function(){const e={};return function(t){if(e[t])return e[t];const w=t.replace(/-/g,"");return e[t]=w}}();v=new v([128,128,128]);R.defaultThematicColor=v;R.getFill=function(e){const t=e.style;let w=null;
if(e)switch(e.type){case "simple-marker":"cross"!==t&&"x"!==t&&(w=e.color);break;case "simple-fill":"solid"===t?w=e.color:"none"!==t&&(w={type:"pattern",x:0,y:0,src:M+t+".png",width:5,height:5});break;case "picture-fill":w={type:"pattern",src:e.url,width:U.pt2px(e.width)*e.xscale,height:U.pt2px(e.height)*e.yscale,x:U.pt2px(e.xoffset),y:U.pt2px(e.yoffset)};break;case "text":w=e.color;break;case "cim":w=J.getCIMSymbolColor(e)}return w};R.getPatternUrlWithColor=function(e,t){const w=e+"-"+t;return void 0!==
d.get(w)?H.resolve(d.get(w)):A(e,{responseType:"image"}).then(u=>{u=u.data;const y=u.naturalWidth,x=u.naturalHeight,p=document.createElement("canvas");p.width=y;p.height=x;const g=p.getContext("2d");g.fillStyle=t;g.fillRect(0,0,y,x);g.globalCompositeOperation="destination-in";g.drawImage(u,0,0);u=p.toDataURL();d.put(w,u);return u})};R.getSVGAlign=function(e){return e=(e=e.horizontalAlignment)&&B[e.toLowerCase()]||"middle"};R.getSVGBaseline=function(e){return(e=e.verticalAlignment)&&h[e.toLowerCase()]||
"alphabetic"};R.getSVGBaselineShift=function(e){return"bottom"===e.verticalAlignment?"super":null};R.getStroke=L;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(R){return function(){function H(U,A){this._storage=new R.MemCacheStorage;this._storage.maxSize=U;A&&this._storage.registerRemoveFunc("",A)}var v=H.prototype;v.put=function(U,A){this._storage.put(U,A,1,1)};v.pop=function(U){return this._storage.pop(U)};v.get=function(U){return this._storage.get(U)};
v.clear=function(){this._storage.clearAll()};v.destroy=function(){this._storage.clearAll()};return H}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(R,H,v){function U(h){h=v.toCIMSymbolJSON(h);if("CIMTextSymbol"===h.type)return h.height;let d=0;if(h.symbolLayers)for(const n of h.symbolLayers)v.isCIMMarker(n)&&n.size>d?d=n.size:v.isCIMStroke(n)&&n.width>d?d=n.width:v.isCIMFill(n);return d}function A(h,d,n,e){if("CIMTextSymbol"===h.type)h.height*=
d;else{if(n&&h.effects)for(const t of h.effects)J(t,d);if(h.symbolLayers)for(const t of h.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":O(t,d,e);break;case "CIMPictureStroke":case "CIMSolidStroke":null!=e&&e.preserveOutlineWidth||(t.width*=d);break;case "CIMPictureFill":t.height*=d;t.offsetX*=d;t.offsetY*=d;break;case "CIMHatchFill":A(t.lineSymbol,d,!0,{...e,preserveOutlineWidth:!1}),t.offsetX*=d,t.offsetY*=d,t.separation*=d}}}function O(h,d,n){h.markerPlacement&&E(h.markerPlacement,
d);h.offsetX*=d;h.offsetY*=d;h.anchorPoint&&"Absolute"===h.anchorPointUnits&&(h.anchorPoint={x:h.anchorPoint.x*d,y:h.anchorPoint.y*d});h.size*=d;if("CIMVectorMarker"===h.type&&h.markerGraphics)for(const e of h.markerGraphics)h.scaleSymbolsProportionally||A(e.symbol,d,!0,n)}function E(h,d){v.isCIMMarkerStrokePlacement(h)&&(h.offset*=d);switch(h.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":h.customEndingOffset*=d;h.offsetAlongLine*=d;if(h.placementTemplate&&
h.placementTemplate.length){var n=h.placementTemplate.map(e=>e*d);h.placementTemplate=n}break;case "CIMMarkerPlacementAlongLineVariableSize":h.maxRandomOffset*=d;h.placementTemplate&&h.placementTemplate.length&&(n=h.placementTemplate.map(e=>e*d),h.placementTemplate=n);break;case "CIMMarkerPlacementOnLine":h.startPointOffset*=d;break;case "CIMMarkerPlacementAtExtremities":h.offsetAlongLine*=d;break;case "CIMMarkerPlacementAtRatioPositions":h.beginPosition*=d;h.endPosition*=d;break;case "CIMMarkerPlacementPolygonCenter":h.offsetX*=
d;h.offsetY*=d;break;case "CIMMarkerPlacementInsidePolygon":h.offsetX*=d,h.offsetY*=d,h.stepX*=d,h.stepY*=d}}function J(h,d){switch(h.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":h.width*=d;break;case "CIMGeometricEffectBuffer":h.size*=d;break;case "CIMGeometricEffectCut":h.beginCut*=d;h.endCut*=d;h.middleCut*=d;break;case "CIMGeometricEffectDashes":h.customEndingOffset*=d;h.offsetAlongLine*=d;if(h.dashTemplate&&h.dashTemplate.length){const n=h.dashTemplate.map(e=>e*d);h.dashTemplate=
n}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":h.length*=d;break;case "CIMGeometricEffectMove":h.offsetX*=d;h.offsetY*=d;break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":h.offset*=d;break;case "CIMGeometricEffectRegularPolygon":h.radius*=d;break;case "CIMGeometricEffectTaperedPolygon":h.fromWidth*=d;h.length*=d;h.toWidth*=d;break;case "CIMGeometricEffectWave":h.amplitude*=d,h.period*=d}}function L(h,d){let n;n="CIMTextSymbol"===
h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type;if(n.symbolLayers)for(const e of n.symbolLayers)if(!(e.colorLocked||h&&(v.isCIMStroke(e)||v.isCIMMarker(e)&&e.markerPlacement&&v.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(e.type){case "CIMVectorMarker":e.markerGraphics.forEach(t=>{L(t.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":M(d,e.color);break;case "CIMHatchFill":L(e.lineSymbol,d)}}function M(h,d){for(const n of h)if(n.join(".")===d.join("."))return;h.push(d)}function B(h,
d){var n="CIMTextSymbol"===h.type?h.symbol:h;h="CIMPolygonSymbol"===h.type?!0:!1;if(n.symbolLayers)for(const e of n.symbolLayers)if(!(e.colorLocked||h&&(v.isCIMStroke(e)||v.isCIMMarker(e)&&e.markerPlacement&&v.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(n=d.toArray(0),e.type){case "CIMVectorMarker":e.markerGraphics.forEach(t=>{B(t.symbol,d)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=n;break;case "CIMHatchFill":B(e.lineSymbol,d)}}R.applyCIMSymbolColor=function(h,d){d instanceof
H||(d=new H(d));h=v.toCIMSymbolJSON(h);B(h,d)};R.applyCIMSymbolRotation=function(h,d){h=v.toCIMSymbolJSON(h);if("CIMTextSymbol"===h.type)h.angle=d;else if("CIMPointSymbol"===h.type&&h.symbolLayers){const n=d-(h.angle||0);for(const e of h.symbolLayers){if(v.isCIMMarker(e)){let t=e.rotation||0;t=e.rotateClockwise?t-n:t+n;e.rotation=t}h.angle=d}}};R.getCIMSymbolColor=function(h){h=v.toCIMSymbolJSON(h);const d=[];L(h,d);return d.length?new H(v.fromCIMColor(d[0])):null};R.getCIMSymbolRotation=function(h){h=
v.toCIMSymbolJSON(h);return"CIMTextSymbol"===h.type||"CIMPointSymbol"===h.type?h.angle||0:0};R.getCIMSymbolSize=U;R.scaleCIMMarker=O;R.scaleCIMSymbolTo=function(h,d,n){const e=v.toCIMSymbolJSON(h);h=U(h);if(0===h)if("CIMTextSymbol"===e.type)e.height=d;else{if(e.symbolLayers)for(const t of e.symbolLayers)switch(t.type){case "CIMPictureMarker":case "CIMVectorMarker":t.size=d;break;case "CIMPictureStroke":case "CIMSolidStroke":t.width=d}}else A(e,d/h,!1,n)};Object.defineProperty(R,"__esModule",{value:!0})})},
"esri/symbols/cim/utils":function(){define(["exports"],function(R){function H(v,U){"string"!==typeof v&&(v=String(v));switch(U){case "LowerCase":return v.toLowerCase();case "Allcaps":return v.toUpperCase();default:return v}}R._adjustTextCase=H;R.colorToArray=function(v){return[v.r,v.g,v.b,v.a]};R.createLabelOverrideFunction=function(v,U,A){const O=M=>{let B=M.length;for(;B--;)if(-1===" /-,\n".indexOf(M.charAt(B)))return!1;return!0},E=[];var J=0;let L=-1;do L=U.indexOf("[",J),L>=J&&(L>J&&(J=U.substr(J,
L-J),E.push([J,null,O(J)])),J=L+1,L=U.indexOf("]",J),L>=J&&(L>J&&(J=U.substr(J,L-J),(J=v[J])&&E.push([null,J,!1])),J=L+1));while(-1!==L);J<U.length-1&&(v=U.substr(J),E.push([v,null,O(v)]));return M=>{let B="",h=null;for(const d of E){const [n,e,t]=d;if(n)t?h=n:(h&&(B+=h,h=null),B+=n);else{const w=M.attributes[e];w&&(h&&(B+=h,h=null),B+=w)}}return H(B,A)}};R.evaluateValueOrFunction=function(v,U,A,O){return"function"===typeof v?v(U,A,O):v};R.fromCIMColor=function(v){return v?{r:v[0],g:v[1],b:v[2],a:v[3]/
255}:{r:0,g:0,b:0,a:0}};R.isCIMFill=function(v){return"CIMGradientFill"===v.type||"CIMHatchFill"===v.type||"CIMPictureFill"===v.type||"CIMSolidFill"===v.type||"CIMWaterFill"===v.type};R.isCIMMarker=function(v){return"CIMVectorMarker"===v.type||"CIMPictureMarker"===v.type||"CIMBarChartMarker"===v.type||"CIMCharacterMarker"===v.type||"CIMPieChartMarker"===v.type||"CIMStackedBarChartMarker"===v.type};R.isCIMMarkerStrokePlacement=function(v){return"CIMMarkerPlacementAlongLineRandomSize"===v.type||"CIMMarkerPlacementAlongLineSameSize"===
v.type||"CIMMarkerPlacementAlongLineVariableSize"===v.type||"CIMMarkerPlacementAtExtremities"===v.type||"CIMMarkerPlacementAtMeasuredUnits"===v.type||"CIMMarkerPlacementAtRatioPositions"===v.type||"CIMMarkerPlacementOnLine"===v.type||"CIMMarkerPlacementOnVertices"===v.type};R.isCIMStroke=function(v){return"CIMGradientStroke"===v.type||"CIMPictureStroke"===v.type||"CIMSolidStroke"===v.type};R.resampleHermite=function(v,U,A,O,E,J,L=!0){const M=U/E;A/=J;const B=Math.ceil(M/2),h=Math.ceil(A/2);for(let e=
0;e<J;e++)for(let t=0;t<E;t++){const w=4*(t+(L?J-e-1:e)*E);var d=0;let u=0,y=0,x=0,p=0,g=0,r=0;const z=(e+.5)*A;for(let f=Math.floor(e*A);f<(e+1)*A;f++){var n=Math.abs(z-(f+.5))/h;const a=(t+.5)*M;n*=n;for(let q=Math.floor(t*M);q<(t+1)*M;q++){let C=Math.abs(a-(q+.5))/B;d=Math.sqrt(n+C*C);-1<=d&&1>=d&&(d=2*d*d*d-3*d*d+1,0<d&&(C=4*(q+f*U),r+=d*v[C+3],y+=d,255>v[C+3]&&(d=d*v[C+3]/250),x+=d*v[C],p+=d*v[C+1],g+=d*v[C+2],u+=d))}}O[w]=x/u;O[w+1]=p/u;O[w+2]=g/u;O[w+3]=r/y}};R.toCIMSymbolJSON=function(v){var U;
return null==(U=v.data)?void 0:U.symbol};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d){var n;v=n=function(e){function t(w){w=e.call(this,w)||this;w.variableName=null;w.dimensionName=null;w.values=[];w.isSlice=!1;return w}R._inheritsLoose(t,e);t.prototype.clone=function(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:U.clone(this.values),isSlice:this.isSlice})};return t}(d.JSONSupport);H.__decorate([E.property({type:String,json:{write:!0}})],v.prototype,"variableName",void 0);H.__decorate([E.property({type:String,
json:{write:!0}})],v.prototype,"dimensionName",void 0);H.__decorate([E.property({type:O.types.array(O.types.oneOf([O.types.native(Number),O.types.array(O.types.native(Number))])),json:{write:!0}})],v.prototype,"values",void 0);H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"isSlice",void 0);return v=n=H.__decorate([L.subclass("esri.layers.support.DimensionalDefinition")],v)})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e){var t;const w=new Set(["Raster","Raster2","DEM","FillRaster"]),u=new Set(["Rasters"]),y=r=>r&&r.rasterFunction?g.fromJSON(r):r,x=r=>r&&r instanceof g?r.toJSON():r;var p;(function(r){r[r.MOSAIC=0]="MOSAIC";r[r.GROUP=1]="GROUP";r[r.ITEM=2]="ITEM"})(p||(p={}));let g=t=function(r){function z(a){a=r.call(this,a)||this;a.functionArguments=null;a.functionName=null;a.outputPixelType="unknown";a.variableName=null;a.description=null;a.functionDefinition=null;a.thumbnail=
null;return a}R._inheritsLoose(z,r);var f=z.prototype;f.readFunctionArguments=function(a,q){a=q.arguments||q.rasterFunctionArguments;if(null==a)var C=null;else{q={};for(C of Object.keys(a))w.has(C)?q[C]=y(a[C]):u.has(C)&&Array.isArray(a[C])?q[C]=a[C].map(y):q[C]=a[C];C=q}return C};f.writeFunctionArguments=function(a,q,C){const c={};for(const b of Object.keys(a))w.has(b)?c[b]=x(a[b]):u.has(b)&&Array.isArray(a[b])?c[b]=a[b].map(x):c[b]=x(a[b]);this.functionDefinition?q.arguments=c:q[C]=c};f.readFunctionName=
function(a,q){a=q.rasterFunctionInfos;const C=q.name;return C?C:a&&a.length&&"None"!==a[0].name?a[0].name:q.rasterFunction};f.writeFunctionName=function(a,q,C){this.functionDefinition?q.name=a:q[C]=a};f.readFunctionType=function(a){return p[a]};f.writeFunctionType=function(a,q,C){q[C]=p[a]};f.clone=function(){return new t({functionName:this.functionName,functionArguments:U.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,
functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};return z}(e.JSONSupport);H.__decorate([E.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],g.prototype,"functionArguments",void 0);H.__decorate([L.reader("functionArguments",["rasterFunctionArguments","arguments"])],g.prototype,"readFunctionArguments",null);H.__decorate([B.writer("functionArguments")],g.prototype,"writeFunctionArguments",null);H.__decorate([E.property({json:{type:String,
write:{target:"rasterFunction"}}})],g.prototype,"functionName",void 0);H.__decorate([L.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],g.prototype,"readFunctionName",null);H.__decorate([B.writer("functionName")],g.prototype,"writeFunctionName",null);H.__decorate([J.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),E.property({json:{default:"unknown"}})],
g.prototype,"outputPixelType",void 0);H.__decorate([E.property({type:String,json:{read:!0,write:!0}})],g.prototype,"variableName",void 0);H.__decorate([E.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],g.prototype,"description",void 0);H.__decorate([E.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],g.prototype,"functionType",void 0);H.__decorate([L.reader("functionType")],g.prototype,"readFunctionType",null);H.__decorate([B.writer("functionType")],
g.prototype,"writeFunctionType",null);H.__decorate([E.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],g.prototype,"functionDefinition",void 0);H.__decorate([E.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],g.prototype,"thumbnail",void 0);return g=t=H.__decorate([M.subclass("esri.layers.support.RasterFunction")],g)})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ../../renderers/visualVariables/SizeVariable ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ./RasterFunction".split(" "),
function(R,H,v,U,A,O){function E(u){const y=u.Raster;return y&&"esri.layers.support.RasterFunction"===y.declaredClass?E(y.functionArguments):u}function J(u,y){const x=new O;x.functionName="VectorFieldRenderer";const {dataType:p,bandProperties:g}=y;y="vector-uv"===p?!0:!1;let r,z;g&&2===g.length&&(r=g.map(C=>C.BandName.toLowerCase()).indexOf("magnitude"),z=g.map(C=>C.BandName.toLowerCase()).indexOf("direction"));if(-1===r||null===r)r=0,z=1;const f="arithmetic"===u.rotationType?1:2,a="flow-from"===
u.flowRepresentation?0:1,q=u.visualVariables?u.visualVariables.filter(C=>"Magnitude"===C.field)[0]:new v;u={magnitudeBandID:r,directionBandID:z,isUVComponents:y,referenceSystem:f,massFlowAngleRepresentation:a,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:e[u.style.toLowerCase().replace("-","_")],minimumMagnitude:q.minDataValue,maximumMagnitude:q.maxDataValue,minimumSymbolSize:q.minSize,maximumSymbolSize:q.maxSize};x.functionArguments=u;return x}function L(u,
y){const x=[],p=[],g=[],r=[],{pixelType:z,rasterAttributeTable:f}=y,a=f&&f.features,q=B(f);if(a&&Array.isArray(a)&&u.classBreakInfos){u.classBreakInfos.forEach((b,k)=>{const m=b.symbol.color;let l;m.a&&a.forEach(K=>{l=K.attributes[u.field];(l>=b.minValue&&l<b.maxValue||k===u.classBreakInfos.length-1&&l>=b.minValue)&&r.push([K.attributes[q],m.r,m.g,m.b])})});y=z?M(r,z):r;var C=new O;C.functionName="Colormap";C.functionArguments={};C.functionArguments.Colormap=y;C.variableName="Raster";return C}u.classBreakInfos.forEach((b,
k)=>{const m=b.symbol&&b.symbol.color;m.a?(0===k?x.push(b.minValue,b.maxValue+1E-6):x.push(b.minValue+1E-6,b.maxValue+1E-6),p.push(k),r.push([k,m.r,m.g,m.b])):g.push(b.minValue,b.maxValue)});y=z?M(r,z):r;C=new O;C.functionName="Remap";C.functionArguments={InputRanges:x,OutputValues:p,NoDataRanges:g};C.variableName="Raster";const c=new O;c.functionName="Colormap";c.functionArguments={Colormap:y,Raster:C};return c}function M(u,y){(y=n[String(y).toLowerCase()])&&u.push([Math.floor(y[0]-1),0,0,0],[Math.ceil(y[1]+
1),0,0,0]);return u}function B(u){if(u)return{fields:u}=u,(u=u&&u.find(y=>y&&y.name&&"value"===y.name.toLowerCase()))&&u.name}function h(u,y){const x=[],{pixelType:p,rasterAttributeTable:g}=y,r=g&&g.features,z=B(g);let f=!1;u.uniqueValueInfos&&u.uniqueValueInfos.forEach(q=>{const C=q.symbol.color;C.a&&(u.field!==z&&r?r&&r.forEach(c=>{String(c.attributes[u.field])===String(q.value)&&x.push([c.attributes[z],C.r,C.g,C.b])}):isNaN(+q.value)?f=!0:x.push([+q.value,C.r,C.g,C.b]))});if(f)return null;y=p&&
0<x.length?M(x,p):x;const a=new O;a.functionName="Colormap";a.functionArguments={};a.functionArguments.Colormap=y;a.variableName="Raster";return a}function d(u){const y=[];u.forEach(x=>{Array.isArray(x)?y.push(x):null!=x.min&&null!=x.max&&y.push([x.min,x.max,x.avg||0,x.stddev||0])});return y}const n={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},
e={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},t=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),w={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};R.combineRenderingRules=function(u,y){if(!u||
!y)return H.clone(u||y);u=H.clone(u);"none"!==y.functionName.toLowerCase()&&(E(u.functionArguments).Raster=y);return u};R.convertRendererToRenderingRule=function(u,y){y=y||{};switch(u.type){case "raster-stretch":var x=new O;x.functionName="Stretch";var p=w[A.stretchTypeJSONDict.toJSON(u.stretchType)],g=d(u.statistics);g={StretchType:p,Statistics:g,DRA:u.dynamicRangeAdjustment,UseGamma:u.useGamma,Gamma:u.gamma,ComputeGamma:u.computeGamma};null!=u.outputMin&&(g.Min=u.outputMin);null!=u.outputMax&&(g.Max=
u.outputMax);p===w.standardDeviation?(g.NumberOfStandardDeviations=u.numberOfStandardDeviations,x.outputPixelType="u8"):p===w.percentClip?(g.MinPercent=u.minPercent,g.MaxPercent=u.maxPercent,x.outputPixelType="u8"):p===w.minMax?x.outputPixelType="u8":p===w.sigmoid&&(g.SigmoidStrengthLevel=u.sigmoidStrengthLevel);x.functionArguments=g;x.variableName="Raster";if(u.colorRamp){p=u.colorRamp;g=new O;const r=U.getColorRampName(p);g.functionArguments=r?{colorRamp:r}:!y.convertColorRampToColormap||"algorithmic"!==
p.type&&"multipart"!==p.type?{colorRamp:u.colorRamp.toJSON()}:{Colormap:U.convertColorRampToColormap(p,256)};g.variableName="Raster";g.functionName="Colormap";g.functionArguments.Raster=x;u=g}else u=x;return u;case "class-breaks":return L(u,y);case "unique-value":return h(u,y);case "raster-colormap":return(u=u.extractColormap())&&0!==u.length?({pixelType:y}=y,u=y?M(u,y):u,y=new O,y.functionName="Colormap",y.functionArguments={},y.functionArguments.Colormap=u,u=y):u=void 0,u;case "vector-field":return J(u,
y);case "raster-shaded-relief":return"elevation"!==y.dataType?u=new O:(y=new O,y.functionName="Hillshade",x="traditional"===u.hillshadeType?0:1,p="none"===u.scalingType?1:3,g={HillshadeType:x,SlopeType:p,ZFactor:u.zFactor},0===x&&(g.Azimuth=u.azimuth,g.Altitude=u.altitude),3===p&&(g.PSPower=u.pixelSizePower,g.PSZFactor=u.pixelSizeFactor),y.functionArguments=g,y.variableName="Raster",u.colorRamp&&(y.functionName="ShadedRelief",g.Colormap=U.convertColorRampToColormap(u.colorRamp,256)),u=y),u}};R.isSupportedRendererType=
function(u){return t.has(u.type)};R.pixelTypeRanges=n;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u){var y;const x=L.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),p=L.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});v=y=function(g){function r(f){f=g.call(this,f)||this;f.ascending=!0;f.itemRenderingRule=
null;f.lockRasterIds=null;f.method=null;f.multidimensionalDefinition=null;f.objectIds=null;f.operation=null;f.sortField=null;f.sortValue=null;f.viewpoint=null;f.where=null;return f}R._inheritsLoose(r,g);var z=r.prototype;z.readAscending=function(f,a){return null!=a.ascending?a.ascending:null!=a.sortAscending?a.sortAscending:!0};z.readMethod=function(f,a){f=a.mosaicMethod||a.defaultMosaicMethod;switch(f?f.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":f="esriMosaicAttribute";
break;case "lockraster":f="esriMosaicLockRaster";break;case "center":f="esriMosaicCenter";break;case "northwest":f="esriMosaicNorthwest";break;case "nadir":f="esriMosaicNadir";break;case "viewpoint":f="esriMosaicViewpoint";break;case "seamline":f="esriMosaicSeamline";break;case "none":f="esriMosaicNone";break;default:f="esriMosaicNone"}return f=p.fromJSON(f)};z.readOperation=function(f,a){f=a.mosaicOperation;a=a.mosaicOperator&&a.mosaicOperator.toLowerCase();a=f||(a?x.toJSON(a):null);return x.fromJSON(a)||
"first"};z.castSortValue=function(f){return null==f||"string"===typeof f||"number"===typeof f?f:`${f}`};z.clone=function(){return new y({ascending:this.ascending,itemRenderingRule:U.clone(this.itemRenderingRule),lockRasterIds:U.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:U.clone(this.multidimensionalDefinition),objectIds:U.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:U.clone(this.viewpoint),where:this.where})};
return r}(e.JSONSupport);H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"ascending",void 0);H.__decorate([M.reader("ascending",["ascending","sortAscending"])],v.prototype,"readAscending",null);H.__decorate([E.property({type:u,json:{write:!0}})],v.prototype,"itemRenderingRule",void 0);H.__decorate([E.property({type:[O.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],v.prototype,"lockRasterIds",void 0);H.__decorate([E.property({type:String,
json:{type:p.jsonValues,write:{target:"mosaicMethod",writer:p.write}}})],v.prototype,"method",void 0);H.__decorate([M.reader("method",["mosaicMethod","defaultMosaicMethod"])],v.prototype,"readMethod",null);H.__decorate([E.property({type:[w],json:{write:!0}})],v.prototype,"multidimensionalDefinition",void 0);H.__decorate([E.property({type:[O.Integer],json:{name:"fids",write:!0}})],v.prototype,"objectIds",void 0);H.__decorate([E.property({json:{type:x.jsonValues,read:{reader:x.read},write:{target:"mosaicOperation",
writer:x.write}}})],v.prototype,"operation",void 0);H.__decorate([M.reader("operation",["mosaicOperation","mosaicOperator"])],v.prototype,"readOperation",null);H.__decorate([E.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],v.prototype,"sortField",void 0);H.__decorate([E.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],v.prototype,"sortValue",void 0);H.__decorate([J.cast("sortValue")],
v.prototype,"castSortValue",null);H.__decorate([E.property({type:t,json:{write:!0}})],v.prototype,"viewpoint",void 0);H.__decorate([E.property({type:String,json:{write:!0}})],v.prototype,"where",void 0);return v=y=H.__decorate([B.subclass("esri.layers.support.MosaicRule")],v)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./RasterFunction ./imageryRendererUtils ./MosaicRule".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u){U=new L.JSONMap({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});L=new L.JSONMap({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});R.ExportImageServiceParameters=function(y){function x(){var g=y.apply(this,arguments)||this;g.layer=null;g.adjustAspectRatio=void 0;g.bandIds=void 0;g.compression=void 0;g.compressionQuality=void 0;g.compressionTolerance=.01;g.format=null;g.interpolation=
null;g.noData=null;g.noDataInterpretation=void 0;g.pixelType=void 0;g.lercVersion=2;return g}H._inheritsLoose(x,y);var p=x.prototype;p.writeAdjustAspectRatio=function(g,r,z){10.3>this.layer.version||(r[z]=g)};p.writeCompressionQuality=function(g,r,z){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=g&&(r[z]=g)};p.writeCompressionTolerance=function(g,r,z){"lerc"===this.format&&null!=g&&(r[z]=g)};p.writeLercVersion=function(g,r,z){"lerc"===this.format&&10.5<=this.layer.version&&(r[z]=
g)};p.combineRendererWithRenderingRule=function(){var g;const r=this.layer,{rasterInfo:z,renderingRule:f,renderer:a}=r;return a&&w.isSupportedRendererType(a)?w.combineRenderingRules(w.convertRendererToRenderingRule(a,{rasterAttributeTable:z.attributeTable,pixelType:z.pixelType,dataType:z.dataType,bandProperties:null==(g=z.keyProperties)?void 0:g.BandProperties,convertColorRampToColormap:10.6>r.version}),f):f};p._addResampleRasterFunction=function(g){var r,z=null;"vector-field"===(null==(r=this.layer.renderer)?
void 0:r.type)&&(r={},z=this.layer.renderingRule,z&&"Resample"===z.functionName||(z="esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,r.rasterFunction="Resample",r.rasterFunctionArguments={ResamplingType:z,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}),z=t.fromJSON(r));return w.combineRenderingRules(z,g)};H._createClass(x,[{key:"version",get:function(){const g=this.layer;g.bandIds;g.format;g.compressionQuality;g.compressionTolerance;g.interpolation;g.noData;
g.noDataInterpretation;g.mosaicRule;g.renderingRule;g.adjustAspectRatio;g.pixelFilter;g.renderer;g.definitionExpression;return(this._get("version")||0)+1},set:function(g){this._set("version",g)}},{key:"mosaicRule",get:function(){var g=this.layer;let r=g.mosaicRule;g=g.definitionExpression;r?g&&g!==r.where&&(r=r.clone(),r.where=g):g&&(r=new u({where:g}));return r}},{key:"renderingRule",get:function(){var g=this.layer;let r=g.renderingRule;const z=g.pixelFilter;g=!g.format||-1<g.format.indexOf("jpg")||
-1<g.format.indexOf("png");r=this._addResampleRasterFunction(r);g&&!z&&(r=this.combineRendererWithRenderingRule());return r}}]);return x}(e.JSONSupport);v.__decorate([E.property()],R.ExportImageServiceParameters.prototype,"layer",void 0);v.__decorate([E.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);v.__decorate([B.writer("adjustAspectRatio")],R.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);v.__decorate([E.property({json:{write:!0}}),
J.aliasOf("layer.bandIds")],R.ExportImageServiceParameters.prototype,"bandIds",void 0);v.__decorate([E.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"compression",void 0);v.__decorate([E.property({json:{write:!0}}),J.aliasOf("layer.compressionQuality")],R.ExportImageServiceParameters.prototype,"compressionQuality",void 0);v.__decorate([B.writer("compressionQuality")],R.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);v.__decorate([E.property({json:{write:!0}}),
J.aliasOf("layer.compressionTolerance")],R.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);v.__decorate([B.writer("compressionTolerance")],R.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);v.__decorate([E.property({json:{write:!0}}),J.aliasOf("layer.format")],R.ExportImageServiceParameters.prototype,"format",void 0);v.__decorate([E.property({type:String,json:{read:{reader:U.read},write:{writer:U.write}}}),J.aliasOf("layer.interpolation")],R.ExportImageServiceParameters.prototype,
"interpolation",void 0);v.__decorate([E.property({json:{write:!0}}),J.aliasOf("layer.noData")],R.ExportImageServiceParameters.prototype,"noData",void 0);v.__decorate([E.property({type:String,json:{read:{reader:L.read},write:{writer:L.write}}}),J.aliasOf("layer.noDataInterpretation")],R.ExportImageServiceParameters.prototype,"noDataInterpretation",void 0);v.__decorate([E.property({json:{write:!0}})],R.ExportImageServiceParameters.prototype,"pixelType",void 0);v.__decorate([E.property({json:{write:!0}})],
R.ExportImageServiceParameters.prototype,"lercVersion",void 0);v.__decorate([B.writer("lercVersion")],R.ExportImageServiceParameters.prototype,"writeLercVersion",null);v.__decorate([E.property({type:Number,dependsOn:"layer.adjustAspectRatio layer.bandIds layer.format layer.compressionQuality layer.compressionTolerance layer.definitionExpression layer.interpolation layer.noData layer.noDataInterpretation layer.mosaicRule layer.renderingRule layer.pixelFilter layer.renderer lercVersion pixelType".split(" ")})],
R.ExportImageServiceParameters.prototype,"version",null);v.__decorate([E.property({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],R.ExportImageServiceParameters.prototype,"mosaicRule",null);v.__decorate([E.property({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],R.ExportImageServiceParameters.prototype,"renderingRule",null);R.ExportImageServiceParameters=v.__decorate([M.subclass("esri.layers.mixins.ExportImageServiceParameters")],
R.ExportImageServiceParameters);Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d){v=function(n){function e(t){t=n.call(this,t)||this;t.attributeTable=null;t.bandCount=null;t.colormap=null;t.extent=null;t.format=void 0;t.height=null;t.width=null;t.histograms=null;t.keyProperties={};t.multidimensionalInfo=null;t.noDataValue=null;t.pixelSize=null;t.pixelType=null;t.isPseudoSpatialReference=!1;t.spatialReference=null;t.statistics=null;t.storageInfo=null;t.transform=null;return t}R._inheritsLoose(e,n);R._createClass(e,[{key:"dataType",get:function(){const t=
this.keyProperties&&this.keyProperties.DataType;return t?t.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(t){t&&this._set("nativeExtent",t)}},{key:"nativePixelSize",get:function(){const t=this.nativeExtent;return{x:t.width/this.width,y:t.height/this.height}}}]);return e}(h.JSONSupport);H.__decorate([O.property({json:{write:!0}})],v.prototype,"attributeTable",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"bandCount",
void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"colormap",void 0);H.__decorate([O.property({type:String,readOnly:!0})],v.prototype,"dataType",null);H.__decorate([O.property({type:d,json:{write:!0}})],v.prototype,"extent",void 0);H.__decorate([O.property({type:d,dependsOn:["extent"],json:{write:!0}})],v.prototype,"nativeExtent",null);H.__decorate([O.property({dependsOn:["nativeExtent"],json:{write:!0}})],v.prototype,"nativePixelSize",null);H.__decorate([O.property({json:{write:!0}})],
v.prototype,"format",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"height",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"width",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"histograms",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"keyProperties",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"multidimensionalInfo",void 0);H.__decorate([O.property()],v.prototype,"noDataValue",void 0);H.__decorate([O.property({json:{write:!0}})],
v.prototype,"pixelSize",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"pixelType",void 0);H.__decorate([O.property()],v.prototype,"isPseudoSpatialReference",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"spatialReference",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"statistics",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"storageInfo",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"transform",void 0);
return v=H.__decorate([J.subclass("esri.layers.support.RasterInfo")],v)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","../../core/promiseUtils","./PixelBlock","../../core/workers/workers"],function(R,H,v,U){return function(){function A(){this._workerThread=null;this._destroyed=!1}var O=A.prototype;O.initialize=async function(){const E=await U.open("RasterWorker");this._destroyed?E.close():this._workerThread=E};O.destroy=function(){this._destroyed=!0;this._workerThread&&
(this._workerThread.close(),this._workerThread=null)};O.decode=async function(E,J){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");return(E=await this._workerThread.invoke("decode",E,J))?new v(E):null};O.symbolize=async function(E,J){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");E={extent:E.extent&&E.extent.toJSON(),pixelBlock:E.pixelBlock.toJSON(),simpleStretchParams:E.simpleStretchParams,
bandIds:E.bandIds};return(J=await this._workerThread.invoke("symbolize",E,J))?new v(J):null};O.updateSymbolizer=async function(E,J){var L;if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");const M=null==E?void 0:null==(L=E.rendererJSON)?void 0:L.histograms;await H.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:E.toJSON(),histograms:M},J))};O.stretch=async function(E,J){if(!this._workerThread)throw new R("raster-jobhandler:no-connection",
"no available worker connection");if(null==E||!E.pixelBlock)return null;E={srcPixelBlock:E.pixelBlock.toJSON(),stretchParams:E.stretchParams};return(J=await this._workerThread.invoke("stretch",E,J))?new v(J):null};O.split=async function(E,J){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==E||!E.pixelBlock)return null;E={srcPixelBlock:E.pixelBlock.toJSON(),tileSize:E.tileSize,maximumPyramidLevel:E.maximumPyramidLevel};const L=await this._workerThread.invoke("split",
E,J);L&&L.forEach((M,B)=>{L.set(B,M?v.fromJSON(M):null)});return H.resolve(L)};O.estimateStatisticsHistograms=async function(E,J){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==E||!E.pixelBlock)return null;E={srcPixelBlock:E.pixelBlock.toJSON()};J=await this._workerThread.invoke("estimateStatisticsHistograms",E,J);return H.resolve(J)};O.mosaicAndTransform=async function(E,J){var L;if(!this._workerThread)throw new R("raster-jobhandler:no-connection",
"no available worker connection");if(null==E||null==(L=E.srcPixelBlocks)||!L.length)return null;E={...E,srcPixelBlocks:E.srcPixelBlocks.map(M=>M?M.toJSON():null)};return(J=await this._workerThread.invoke("mosaicAndTransform",E,J))?new v(J):null};return A}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B){function h(f,a){if(!M.isPlatformLittleEndian)throw new H("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:q,height:C,pixelType:c}=a;var b=x(c);const k=b.pixelTypeCtor;a=null==a.noDataValue?b.noDataValue:a.noDataValue;b=0;let m,l=0,K;const F=f.byteLength-10;for(;l<F;){var G=J.decode(f,{inputOffset:l,encodedMaskData:m,returnMask:0===b?!0:!1,returnEncodedMask:0===b?!0:!1,returnFileInfo:!0,pixelType:k,noDataValue:a});if(q&&C&&(G.width!==
q||G.height!==C))throw new H("rasterCoded:decode","lerc decoded result has width or height different from specified in options");l=G.fileInfo.eofOffset;0===b&&(m=G.encodedMaskData,K=new v({width:G.width,height:G.height,pixels:[],pixelType:c,mask:G.maskData,statistics:[]}));b++;K.addData({pixels:G.pixelData,statistics:{minValue:G.minValue,maxValue:G.maxValue,noDataValue:G.noDataValue}});10<F-l&&(G=String.fromCharCode.apply(null,new Uint8Array(f,l,10)),l=-1<l+G.indexOf("CntZ")?G.indexOf("CntZ"):0)}return K}
function d(f,a){if(!M.isPlatformLittleEndian)throw new H("rasterCoded:decode","lerc decoder is not supported on big endian platform");var q=0,C=0,c=0;let b,k;const m=f.byteLength-10,l=[],{width:K,height:F}=a;for(;C<m;){var G;a=g.decode(f,{inputOffset:C,maskData:b,returnFileInfo:!0});if(K&&F&&(a.width!==K||a.height!==F))throw new H("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");C=a.fileInfo.eofOffset;0===q&&(c=a.fileInfo.numValidPixel,b=
a.maskData,k=new v({width:a.width,height:a.height,pixels:[],pixelType:a.fileInfo.pixelType,mask:a.maskData,statistics:[]}));a.fileInfo.mask&&0<a.fileInfo.mask.numBytes&&l.push(a.maskData);if(1<a.dimCount&&(null==(G=a.pixelData)?void 0:G.length)===a.width*a.height*a.dimCount){var N,P,Q,I;a.pixelData=a.pixelData.slice(-a.width*a.height);const T=null==(N=a.dimStats)?void 0:null==(P=N.minValues)?void 0:P[a.dimCount-1],W=null==(Q=a.dimStats)?void 0:null==(I=Q.maxValues)?void 0:I[a.dimCount-1];null!=T&&
null!=W&&(a.minValue=T,a.maxValue=W)}q++;k.addData({pixels:a.pixelData,statistics:{minValue:a.minValue,maxValue:a.maxValue}});10<m-C&&(a=String.fromCharCode.apply(null,new Uint8Array(f,C,10)),C+=-1<a.indexOf("Lerc")?a.indexOf("Lerc"):0)}C=q=f=0;if(1<l.length){C=k.width*k.height;b=new Uint8Array(C);b.set(l[0]);for(f=1;f<l.length;f++)for(c=l[f],q=0;q<C;q++)b[q]&=c[q];for(q=c=0;q<C;q++)c+=b[q];k.mask=b}k.validPixelCount=c;return k}function n(f){f=B.decode(f);f=new v({width:f.width,height:f.height,pixels:f.pixels,
pixelType:f.pixelType.toLowerCase(),mask:f.mask,statistics:null});f.updateStatistics();return f}function e(f){f=E.decode(f);f=new v({width:f.width,height:f.height,pixels:f.pixels,pixelType:"U8",mask:f.mask,statistics:null});f.updateStatistics();return f}function t(f,a){f=new Uint8Array(f);f=new r(f);const {width:q,height:C}=a;a=q*C;f=f.decode();let c=0;var b=0;let k;b=new Uint8Array(a);for(c=0;c<a;c++)b[c]=f[4*c+3];const m=new v({width:q,height:C,pixels:[],pixelType:"U8",mask:b,statistics:[]});for(c=
0;3>c;c++){k=new Uint8Array(a);for(b=0;b<a;b++)k[b]=f[4*b+c];m.addData({pixels:k})}m.updateStatistics();return m}async function w(f,a,q,C){f=await (new O).decode(f,{applyJpegMask:!1,format:a,...q},C);f=new v(f);f.updateStatistics();return f}function u(f){if(null==f)throw new H("rasterCodec:decode","parameter encodeddata is required.");f=new Uint8Array(f,0,10);let a="";255===f[0]&&216===f[1]?a="jpg":137===f[0]&&80===f[1]&&78===f[2]&&71===f[3]?a="png":67===f[0]&&110===f[1]&&116===f[2]&&90===f[3]&&73===
f[4]&&109===f[5]&&97===f[6]&&103===f[7]&&101===f[8]&&32===f[9]?a="lerc":76===f[0]&&101===f[1]&&114===f[2]&&99===f[3]&&50===f[4]&&32===f[5]?a="lerc2":73===f[0]&&73===f[1]&&42===f[2]&&0===f[3]||77===f[0]&&77===f[1]&&0===f[2]&&42===f[3]?a="tiff":71===f[0]&&73===f[1]&&70===f[2]?a="gif":66===f[0]&&77===f[1]?a="bmp":-1<String.fromCharCode.apply(null,f).toLowerCase().indexOf("error")&&(a="error");return a}function y(f){let a=null;switch(f){case "lerc":a=h;break;case "lerc2":a=d;break;case "jpg":a=e;break;
case "png":a=t;break;case "bsq":case "bip":a=(q,C)=>{{const {pixelTypeCtor:c}=x(C.pixelType),b=L.decode;q=b(q,{width:C.width,height:C.height,pixelType:c,format:f});C=new v({width:C.width,height:C.height,pixels:q.pixels,pixelType:C.pixelType,mask:q.mask,statistics:null});C.updateStatistics()}return C};break;case "tiff":a=n;break;case "error":a=()=>{throw new H("rasterCodec:decode","input data contains error");};break;default:a=()=>{throw new H("rasterCodec:decode","unsupported raster format");}}return a}
function x(f){let a=null,q=null;switch(f?f.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":q=Math.pow(2,8)-1;a=Uint8Array;break;case "u16":q=q||Math.pow(2,16)-1;a=Uint16Array;break;case "u32":q=q||Math.pow(2,32)-1;a=Uint32Array;break;case "s8":q=q||0-Math.pow(2,7);a=Int8Array;break;case "s16":q=q||0-Math.pow(2,15);a=Int16Array;break;case "s32":q=q||0-Math.pow(2,31);a=Int32Array;break;default:a=Float32Array}return{pixelTypeCtor:a,noDataValue:q}}function p(f,a=1){if(f){var {pixels:q,width:C,
height:c,mask:b}=f;if(q&&0!==q.length){var k=q.length,m=C-1,l=c-1,K=[],F,G,N=v.getPixelArrayConstructor(f.pixelType);if(0===a){for(a=0;a<k;a++){var P=q[a];var Q=new N(m*l);for(F=0;F<l;F++){var I=F*C;for(G=0;G<m;G++)Q[F*m+G]=P[I+G]}K.push(Q)}if(b){var T=new Uint8Array(m*l);for(F=0;F<l;F++)for(I=F*C,G=0;G<m;G++)T[F*m+G]=b[I+G]}}else{for(a=0;a<k;a++){P=q[a];Q=new N(m*l);for(F=0;F<l;F++)for(I=F*C,G=0;G<m;G++)Q[F*m+G]=(P[I+G]+P[I+G+1]+P[I+C+G]+P[I+C+G+1])/4;K.push(Q)}if(b)for(T=new Uint8Array(m*l),F=0;F<
l;F++)for(I=F*C,G=0;G<m;G++)T[F*m+G]=Math.min.apply(null,[b[I+G],b[I+G+1],b[I+C+G],b[I+C+G+1]])}f.width=m;f.height=l;f.mask=T;f.pixels=K}}}var g=U.createCommonjsModule(function(f){(function(a){a=a();void 0!==a&&(f.exports=a)})(function(){var a={unstuff:function(c,b,k,m,l,K,F,G){var N=(1<<k)-1,P=0,Q,I=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(k*m/8));if(l)for(Q=0;Q<m;Q++){if(0===I){var T=c[P++];I=32}if(I>=k){var W=T>>>I-k&N;I-=k}else I=k-I,W=(T&N)<<I&N,T=c[P++],I=32-I,W+=T>>>I;b[Q]=l[W]}else for(l=
Math.ceil((G-K)/F),Q=0;Q<m;Q++)0===I&&(T=c[P++],I=32),I>=k?(W=T>>>I-k&N,I-=k):(I=k-I,W=(T&N)<<I&N,T=c[P++],I=32-I,W+=T>>>I),b[Q]=W<l?K+W*F:G},unstuffLUT:function(c,b,k,m,l,K){var F=(1<<b)-1,G=0,N=0,P=0,Q=P=0,I=[];c[c.length-1]<<=8*(4*c.length-Math.ceil(b*k/8));var T=Math.ceil((K-m)/l);for(N=0;N<k;N++){if(0===P){var W=c[G++];P=32}P>=b?(Q=W>>>P-b&F,P-=b):(P=b-P,Q=(W&F)<<P&F,W=c[G++],P=32-P,Q+=W>>>P);I[N]=Q<T?m+Q*l:K}I.unshift(m);return I},unstuff2:function(c,b,k,m,l,K,F,G){var N=(1<<k)-1,P=0,Q,I=0,
T=0;if(l)for(Q=0;Q<m;Q++){if(0===I){var W=c[P++];I=32;T=0}if(I>=k){var Y=W>>>T&N;I-=k;T+=k}else{var Z=k-I;Y=W>>>T&N;W=c[P++];I=32-Z;Y|=(W&(1<<Z)-1)<<k-Z;T=Z}b[Q]=l[Y]}else for(l=Math.ceil((G-K)/F),Q=0;Q<m;Q++)0===I&&(W=c[P++],I=32,T=0),I>=k?(Y=W>>>T&N,I-=k,T+=k):(Z=k-I,Y=W>>>T&N,W=c[P++],I=32-Z,Y|=(W&(1<<Z)-1)<<k-Z,T=Z),b[Q]=Y<l?K+Y*F:G;return b},unstuffLUT2:function(c,b,k,m,l,K){var F=(1<<b)-1,G=0,N=0,P=0,Q=0,I=0,T=0,W=[],Y=Math.ceil((K-m)/l);for(N=0;N<k;N++){if(0===Q){var Z=c[G++];Q=32;T=0}Q>=b?
(I=Z>>>T&F,Q-=b,T+=b):(P=b-Q,I=Z>>>T&F,Z=c[G++],Q=32-P,I|=(Z&(1<<P)-1)<<b-P,T=P);W[N]=I<Y?m+I*l:K}W.unshift(m);return W},originalUnstuff:function(c,b,k,m){var l=(1<<k)-1,K=0,F,G=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(k*m/8));for(F=0;F<m;F++){if(0===G){var N=c[K++];G=32}if(G>=k){var P=N>>>G-k&l;G-=k}else G=k-G,P=(N&l)<<G&l,N=c[K++],G=32-G,P+=N>>>G;b[F]=P}return b},originalUnstuff2:function(c,b,k,m){var l=(1<<k)-1,K=0,F,G=0,N=0;for(F=0;F<m;F++){if(0===G){var P=c[K++];G=32;N=0}if(G>=k){var Q=P>>>
N&l;G-=k;N+=k}else{var I=k-G;Q=P>>>N&l;P=c[K++];G=32-I;Q|=(P&(1<<I)-1)<<k-I;N=I}b[F]=Q}return b}},q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(c){for(var b=65535,k=65535,m=c.length,l=Math.floor(m/2),K=0;l;){var F=359<=l?359:l;l-=F;do b+=c[K++]<<8,k+=b+=c[K++];while(--F);b=(b&65535)+(b>>>16);k=(k&65535)+(k>>>16)}m&1&&(k+=b+=c[K]<<8);return((k&65535)+(k>>>16)<<16|(b&65535)+(b>>>16))>>>0},readHeaderInfo:function(c,b){var k=b.ptr,m=new Uint8Array(c,k,6),l={};l.fileIdentifierString=String.fromCharCode.apply(null,
m);if(0!==l.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+l.fileIdentifierString;k+=6;m=new DataView(c,k,8);var K=m.getInt32(0,!0);l.fileVersion=K;k+=4;3<=K&&(l.checksum=m.getUint32(4,!0),k+=4);m=new DataView(c,k,12);l.height=m.getUint32(0,!0);l.width=m.getUint32(4,!0);k+=8;4<=K?(l.numDims=m.getUint32(8,!0),k+=4):l.numDims=1;m=new DataView(c,k,40);l.numValidPixel=m.getUint32(0,!0);l.microBlockSize=m.getInt32(4,!0);l.blobSize=m.getInt32(8,!0);
l.imageType=m.getInt32(12,!0);l.maxZError=m.getFloat64(16,!0);l.zMin=m.getFloat64(24,!0);l.zMax=m.getFloat64(32,!0);k+=40;b.headerInfo=l;b.ptr=k;if(3<=K&&(c=this.computeChecksumFletcher32(new Uint8Array(c,k-(4<=K?52:48),l.blobSize-14)),c!==l.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(c,b){var k=b.headerInfo,m=this.getDataTypeArray(k.imageType),l=k.numDims*this.getDataTypeSize(k.imageType),K=this.readSubArray(c,b.ptr,m,l);c=this.readSubArray(c,b.ptr+l,m,l);b.ptr+=2*l;l=
!0;for(b=0;b<k.numDims;b++)if(K[b]!==c[b]){l=!1;break}k.minValues=K;k.maxValues=c;return l},readSubArray:function(c,b,k,m){if(k===Uint8Array)c=new Uint8Array(c,b,m);else{var l=new ArrayBuffer(m);(new Uint8Array(l)).set(new Uint8Array(c,b,m));c=new k(l)}return c},readMask:function(c,b){var k=b.ptr,m=b.headerInfo,l=m.width*m.height,K=m.numValidPixel,F=new DataView(c,k,4);m={};m.numBytes=F.getUint32(0,!0);k+=4;if((0===K||l===K)&&0!==m.numBytes)throw"invalid mask";if(0===K)K=new Uint8Array(Math.ceil(l/
8)),m.bitset=K,F=new Uint8Array(l),b.pixels.resultMask=F,k+=m.numBytes;else if(0<m.numBytes){K=new Uint8Array(Math.ceil(l/8));F=new DataView(c,k,m.numBytes);c=F.getInt16(0,!0);var G=2,N=0,P=0;do{if(0<c)for(;c--;)K[N++]=F.getUint8(G++);else for(P=F.getUint8(G++),c=-c;c--;)K[N++]=P;c=F.getInt16(G,!0);G+=2}while(G<m.numBytes);if(-32768!==c||N<K.length)throw"Unexpected end of mask RLE encoding";F=new Uint8Array(l);for(G=G=c=0;G<l;G++)G&7?(c=K[G>>3],c<<=G&7):c=K[G>>3],c&128&&(F[G]=1);b.pixels.resultMask=
F;m.bitset=K;k+=m.numBytes}b.ptr=k;b.mask=m;return!0},readDataOneSweep:function(c,b,k){var m=b.ptr,l=b.headerInfo,K=l.numDims,F=l.width*l.height;l=l.numValidPixel*q.getDataTypeSize(l.imageType)*K;var G=b.pixels.resultMask;if(k===Uint8Array)c=new Uint8Array(c,m,l);else{var N=new ArrayBuffer(l);(new Uint8Array(N)).set(new Uint8Array(c,m,l));c=new k(N)}if(c.length===F*K)b.pixels.resultPixels=c;else{b.pixels.resultPixels=new k(F*K);var P=N=k=0,Q=0;if(1<K)for(P=0;P<K;P++)for(Q=P*F,N=0;N<F;N++)G[N]&&(b.pixels.resultPixels[Q+
N]=c[k++]);else for(N=0;N<F;N++)G[N]&&(b.pixels.resultPixels[N]=c[k++])}b.ptr=m+l;return!0},readHuffmanTree:function(c,b){var k=this.HUFFMAN_LUT_BITS_MAX,m=new DataView(c,b.ptr,16);b.ptr+=16;if(2>m.getInt32(0,!0))throw"unsupported Huffman version";var l=m.getInt32(4,!0),K=m.getInt32(8,!0);m=m.getInt32(12,!0);if(K>=m)return!1;var F=new Uint32Array(m-K);q.decodeBits(c,b,F);var G=[],N;for(N=K;N<m;N++){var P=N-(N<l?0:l);G[P]={first:F[N-K],second:null}}N=c.byteLength-b.ptr;F=new ArrayBuffer(4*Math.ceil(N/
4));(new Uint8Array(F)).set(new Uint8Array(c,b.ptr,N));c=new Uint32Array(F);b=0;F=0;var Q=c[0];for(N=K;N<m;N++){P=N-(N<l?0:l);var I=G[P].first;0<I&&(G[P].second=Q<<b>>>32-I,32-b>=I?(b+=I,32===b&&(b=0,F++,Q=c[F])):(b+=I-32,F++,Q=c[F],G[P].second|=Q>>>32-b))}var T=Q=0,W=new C;for(N=0;N<G.length;N++)void 0!==G[N]&&(Q=Math.max(Q,G[N].first));T=Q>=k?k:Q;k=[];var Y;for(N=K;N<m;N++)if(P=N-(N<l?0:l),I=G[P].first,0<I)if(K=[I,P],I<=T){P=G[P].second<<T-I;var Z=1<<T-I;for(I=0;I<Z;I++)k[P|I]=K}else for(P=G[P].second,
Z=W,--I;0<=I;I--)(Y=P>>>I&1)?(Z.right||(Z.right=new C),Z=Z.right):(Z.left||(Z.left=new C),Z=Z.left),0!==I||Z.val||(Z.val=K[1]);return{decodeLut:k,numBitsLUTQick:T,numBitsLUT:Q,tree:W,stuffedData:c,srcPtr:F,bitPos:b}},readHuffman:function(c,b,k){var m=b.headerInfo,l=m.numDims,K=b.headerInfo.height,F=b.headerInfo.width,G=F*K,N=this.readHuffmanTree(c,b);c=N.decodeLut;var P=N.tree,Q=N.stuffedData,I=N.srcPtr,T=N.bitPos,W=N.numBitsLUTQick;N=N.numBitsLUT;var Y=0===b.headerInfo.imageType?128:0,Z=b.pixels.resultMask,
ca,ba,aa,ja,ia,da,ma=0;0<T&&(I++,T=0);var pa=Q[I],va=1===b.encodeMode,ya=new k(G*l),ha=ya,za;for(za=0;za<m.numDims;za++){1<l&&(ha=new k(ya.buffer,G*za,G),ma=0);if(b.headerInfo.numValidPixel===F*K)for(aa=ia=0;aa<K;aa++)for(ja=0;ja<F;ja++,ia++){var ra=0;var ea=ca=pa<<T>>>32-W;32-T<W&&(ea=ca|=Q[I+1]>>>64-T-W);if(c[ea])ra=c[ea][1],T+=c[ea][0];else for(ea=ca=pa<<T>>>32-N,32-T<N&&(ea=ca|=Q[I+1]>>>64-T-N),ea=P,da=0;da<N;da++)if(ea=(ba=ca>>>N-da-1&1)?ea.right:ea.left,!ea.left&&!ea.right){ra=ea.val;T=T+da+
1;break}32<=T&&(T-=32,I++,pa=Q[I]);ra-=Y;va?(ra=0<ja?ra+ma:0<aa?ra+ha[ia-F]:ra+ma,ra&=255,ma=ha[ia]=ra):ha[ia]=ra}else for(aa=ia=0;aa<K;aa++)for(ja=0;ja<F;ja++,ia++)if(Z[ia]){ra=0;ea=ca=pa<<T>>>32-W;32-T<W&&(ea=ca|=Q[I+1]>>>64-T-W);if(c[ea])ra=c[ea][1],T+=c[ea][0];else for(ea=ca=pa<<T>>>32-N,32-T<N&&(ea=ca|=Q[I+1]>>>64-T-N),ea=P,da=0;da<N;da++)if(ea=(ba=ca>>>N-da-1&1)?ea.right:ea.left,!ea.left&&!ea.right){ra=ea.val;T=T+da+1;break}32<=T&&(T-=32,I++,pa=Q[I]);ra-=Y;va?(ra=0<ja&&Z[ia-1]?ra+ma:0<aa&&Z[ia-
F]?ra+ha[ia-F]:ra+ma,ra&=255,ma=ha[ia]=ra):ha[ia]=ra}b.ptr=b.ptr+4*(I+1)+(0<T?4:0)}b.pixels.resultPixels=ya},decodeBits:function(c,b,k,m,l){var K=b.headerInfo,F=K.fileVersion,G=0,N=new DataView(c,b.ptr,5<=c.byteLength-b.ptr?5:c.byteLength-b.ptr),P=N.getUint8(0);G++;var Q=P>>6,I=0===Q?4:3-Q,T=0<(P&32)?!0:!1;Q=P&31;P=0;if(1===I)P=N.getUint8(G),G++;else if(2===I)P=N.getUint16(G,!0),G+=2;else if(4===I)P=N.getUint32(G,!0),G+=4;else throw"Invalid valid pixel count type";I=2*K.maxZError;l=1<K.numDims?K.maxValues[l]:
K.zMax;if(T){b.counter.lut++;T=N.getUint8(G);G++;K=Math.ceil((T-1)*Q/8);var W=Math.ceil(K/4);W=new ArrayBuffer(4*W);var Y=new Uint8Array(W);b.ptr+=G;Y.set(new Uint8Array(c,b.ptr,K));G=new Uint32Array(W);b.ptr+=K;for(N=0;T-1>>>N;)N++;K=Math.ceil(P*N/8);W=Math.ceil(K/4);W=new ArrayBuffer(4*W);Y=new Uint8Array(W);Y.set(new Uint8Array(c,b.ptr,K));c=new Uint32Array(W);b.ptr+=K;b=3<=F?a.unstuffLUT2(G,Q,T-1,m,I,l):a.unstuffLUT(G,Q,T-1,m,I,l);3<=F?a.unstuff2(c,k,N,P,b):a.unstuff(c,k,N,P,b)}else b.counter.bitstuffer++,
N=Q,b.ptr+=G,0<N&&(K=Math.ceil(P*N/8),W=Math.ceil(K/4),W=new ArrayBuffer(4*W),Y=new Uint8Array(W),Y.set(new Uint8Array(c,b.ptr,K)),c=new Uint32Array(W),b.ptr+=K,3<=F?null==m?a.originalUnstuff2(c,k,N,P):a.unstuff2(c,k,N,P,!1,m,I,l):null==m?a.originalUnstuff(c,k,N,P):a.unstuff(c,k,N,P,!1,m,I,l))},readTiles:function(c,b,k){var m=b.headerInfo,l=m.width,K=m.height,F=m.microBlockSize,G=m.imageType,N=q.getDataTypeSize(G),P=Math.ceil(l/F),Q=Math.ceil(K/F);b.pixels.numBlocksY=Q;b.pixels.numBlocksX=P;var I=
b.pixels.ptr=0,T=0,W=0,Y=0,Z=0,ca=0,ba=0,aa=0,ja=0,ia=0,da=0,ma=0,pa=0;ba=pa=ba=0;var va=new k(F*F),ya=K%F||F,ha=l%F||F,za=m.numDims,ra,ea=b.pixels.resultMask,D=b.pixels.resultPixels,S=5<=m.fileVersion?14:15,V=m.zMax;for(W=0;W<Q;W++)for(Z=W!==Q-1?F:ya,Y=0;Y<P;Y++)for(ca=Y!==P-1?F:ha,da=W*l*F+Y*F,ma=l-ca,ra=0;ra<za;ra++){1<za?(pa=D,da=W*l*F+Y*F,D=new k(b.pixels.resultPixels.buffer,l*K*ra*N,l*K),V=m.maxValues[ra]):pa=null;ba=c.byteLength-b.ptr;I=new DataView(c,b.ptr,Math.min(10,ba));T={};ba=0;aa=I.getUint8(0);
ba++;var X=5<=m.fileVersion?aa&4:0;ja=aa>>6&255;ia=aa>>2&S;if(ia!==(Y*F>>3&S))throw"integrity issue";if(X&&0===ra)throw"integrity issue";aa&=3;if(3<aa)throw b.ptr+=ba,"Invalid block encoding ("+aa+")";if(2===aa){if(X)if(ea)for(I=0;I<Z;I++)for(T=0;T<ca;T++)ea[da]&&(D[da]=pa[da]),da++;else for(I=0;I<Z;I++)for(T=0;T<ca;T++)D[da]=pa[da],da++;b.counter.constant++;b.ptr+=ba}else if(0===aa){if(X)throw"integrity issue";b.counter.uncompressed++;b.ptr+=ba;pa=Z*ca*N;ba=c.byteLength-b.ptr;pa=pa<ba?pa:ba;ba=new ArrayBuffer(0===
pa%N?pa:pa+N-pa%N);X=new Uint8Array(ba);X.set(new Uint8Array(c,b.ptr,pa));ba=new k(ba);pa=0;if(ea)for(I=0;I<Z;I++){for(T=0;T<ca;T++)ea[da]&&(D[da]=ba[pa++]),da++;da+=ma}else for(I=0;I<Z;I++){for(T=0;T<ca;T++)D[da++]=ba[pa++];da+=ma}b.ptr+=pa*N}else if(ja=q.getDataTypeUsed(X&&6>G?4:G,ja),ia=q.getOnePixel(T,ba,ja,I),ba+=q.getDataTypeSize(ja),3===aa)if(b.ptr+=ba,b.counter.constantoffset++,ea)for(I=0;I<Z;I++){for(T=0;T<ca;T++)ea[da]&&(D[da]=X?Math.min(V,pa[da]+ia):ia),da++;da+=ma}else for(I=0;I<Z;I++){for(T=
0;T<ca;T++)D[da]=X?Math.min(V,pa[da]+ia):ia,da++;da+=ma}else if(b.ptr+=ba,q.decodeBits(c,b,va,ia,ra),ba=0,X)if(ea)for(I=0;I<Z;I++){for(T=0;T<ca;T++)ea[da]&&(D[da]=va[ba++]+pa[da]),da++;da+=ma}else for(I=0;I<Z;I++){for(T=0;T<ca;T++)D[da]=va[ba++]+pa[da],da++;da+=ma}else if(ea)for(I=0;I<Z;I++){for(T=0;T<ca;T++)ea[da]&&(D[da]=va[ba++]),da++;da+=ma}else for(I=0;I<Z;I++){for(T=0;T<ca;T++)D[da++]=va[ba++];da+=ma}}},formatFileInfo:function(c){return{fileIdentifierString:c.headerInfo.fileIdentifierString,
fileVersion:c.headerInfo.fileVersion,imageType:c.headerInfo.imageType,height:c.headerInfo.height,width:c.headerInfo.width,numValidPixel:c.headerInfo.numValidPixel,microBlockSize:c.headerInfo.microBlockSize,blobSize:c.headerInfo.blobSize,maxZError:c.headerInfo.maxZError,pixelType:q.getPixelType(c.headerInfo.imageType),eofOffset:c.eofOffset,mask:c.mask?{numBytes:c.mask.numBytes}:null,pixels:{numBlocksX:c.pixels.numBlocksX,numBlocksY:c.pixels.numBlocksY,maxValue:c.headerInfo.zMax,minValue:c.headerInfo.zMin,
noDataValue:c.noDataValue}}},constructConstantSurface:function(c){var b=c.headerInfo.zMax,k=c.headerInfo.numDims,m=c.headerInfo.height*c.headerInfo.width,l=0,K=0,F=0,G=c.pixels.resultMask,N=c.pixels.resultPixels;if(G)if(1<k)for(l=0;l<k;l++)for(F=l*m,b=c.headerInfo.maxValues[l],K=0;K<m;K++)G[K]&&(N[F+K]=b);else for(K=0;K<m;K++)G[K]&&(N[K]=b);else if(1<k)for(l=0;l<k;l++)for(F=l*m,b=c.headerInfo.maxValues[l],K=0;K<m;K++)N[F+K]=b;else for(K=0;K<m;K++)N[K]=b},getDataTypeArray:function(c){switch(c){case 0:c=
Int8Array;break;case 1:c=Uint8Array;break;case 2:c=Int16Array;break;case 3:c=Uint16Array;break;case 4:c=Int32Array;break;case 5:c=Uint32Array;break;case 6:c=Float32Array;break;case 7:c=Float64Array;break;default:c=Float32Array}return c},getPixelType:function(c){switch(c){case 0:c="S8";break;case 1:c="U8";break;case 2:c="S16";break;case 3:c="U16";break;case 4:c="S32";break;case 5:c="U32";break;case 6:c="F32";break;case 7:c="F64";break;default:c="F32"}return c},isValidPixelValue:function(c,b){if(null==
b)return!1;switch(c){case 0:c=-128<=b&&127>=b;break;case 1:c=0<=b&&255>=b;break;case 2:c=-32768<=b&&32767>=b;break;case 3:c=0<=b&&65536>=b;break;case 4:c=-2147483648<=b&&2147483647>=b;break;case 5:c=0<=b&&4294967296>=b;break;case 6:c=-3.4027999387901484E38<=b&&3.4027999387901484E38>=b;break;case 7:c=4.9E-324<=b&&1.7976931348623157E308>=b;break;default:c=!1}return c},getDataTypeSize:function(c){var b=0;switch(c){case 0:case 1:b=1;break;case 2:case 3:b=2;break;case 4:case 5:case 6:b=4;break;case 7:b=
8;break;default:b=c}return b},getDataTypeUsed:function(c,b){var k=c;switch(c){case 2:case 4:k=c-b;break;case 3:case 5:k=c-2*b;break;case 6:k=0===b?c:1===b?2:1;break;case 7:k=0===b?c:c-2*b+1;break;default:k=c}return k},getOnePixel:function(c,b,k,m){c=0;switch(k){case 0:c=m.getInt8(b);break;case 1:c=m.getUint8(b);break;case 2:c=m.getInt16(b,!0);break;case 3:c=m.getUint16(b,!0);break;case 4:c=m.getInt32(b,!0);break;case 5:c=m.getUInt32(b,!0);break;case 6:c=m.getFloat32(b,!0);break;case 7:c=m.getFloat64(b,
!0);break;default:throw"the decoder does not understand this pixel type";}return c}},C=function(c,b,k){this.val=c;this.left=b;this.right=k};return{decode:function(c,b){b=b||{};var k=b.noDataValue,m=0,l={};l.ptr=b.inputOffset||0;l.pixels={};if(q.readHeaderInfo(c,l)){m=l.headerInfo;var K=m.fileVersion,F=q.getDataTypeArray(m.imageType);if(5<K)throw"unsupported lerc version 2."+K;q.readMask(c,l);m.numValidPixel===m.width*m.height||l.pixels.resultMask||(l.pixels.resultMask=b.maskData);var G=m.width*m.height;
l.pixels.resultPixels=new F(G*m.numDims);l.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==m.numValidPixel)if(m.zMax===m.zMin)q.constructConstantSurface(l);else if(4<=K&&q.checkMinMaxRanges(c,l))q.constructConstantSurface(l);else{var N=new DataView(c,l.ptr,2),P=N.getUint8(0);l.ptr++;if(P)q.readDataOneSweep(c,l,F);else if(1<K&&1>=m.imageType&&1E-5>Math.abs(m.maxZError-.5)){N=N.getUint8(1);l.ptr++;l.encodeMode=N;if(2<N||4>K&&1<N)throw"Invalid Huffman flag "+
N;N?q.readHuffman(c,l,F):q.readTiles(c,l,F)}else q.readTiles(c,l,F)}l.eofOffset=l.ptr;b.inputOffset?(c=l.headerInfo.blobSize+b.inputOffset-l.ptr,1<=Math.abs(c)&&(l.eofOffset=b.inputOffset+l.headerInfo.blobSize)):(c=l.headerInfo.blobSize-l.ptr,1<=Math.abs(c)&&(l.eofOffset=l.headerInfo.blobSize));c={width:m.width,height:m.height,pixelData:l.pixels.resultPixels,minValue:m.zMin,maxValue:m.zMax,validPixelCount:m.numValidPixel,dimCount:m.numDims,dimStats:{minValues:m.minValues,maxValues:m.maxValues},maskData:l.pixels.resultMask};
if(l.pixels.resultMask&&q.isValidPixelValue(m.imageType,k)){K=l.pixels.resultMask;for(m=0;m<G;m++)K[m]||(c.pixelData[m]=k);c.noDataValue=k}l.noDataValue=k;b.returnFileInfo&&(c.fileInfo=q.formatFileInfo(l));return c}},getBandCount:function(c){for(var b=0,k=0,m={ptr:0,pixels:{}};k<c.byteLength-58;)q.readHeaderInfo(c,m),k+=m.headerInfo.blobSize,b++,m.ptr=k;return b}}})}),r=function(f){function a(b){var k,m;this.data=b;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;
this.text={};for(m=null;;){var l=this.readUInt32();var K=b=void 0;b=[];for(K=0;4>K;++K)b.push(String.fromCharCode(this.data[this.pos++]));b=b.join("");switch(b){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||
Infinity,frames:[]};break;case "PLTE":this.palette=this.read(l);break;case "fcTL":m&&this.animation.frames.push(m);this.pos+=4;m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};b=this.readUInt16();l=this.readUInt16()||100;m.delay=1E3*b/l;m.disposeOp=this.data[this.pos++];m.blendOp=this.data[this.pos++];m.data=[];break;case "IDAT":case "fdAT":"fdAT"===b&&(this.pos+=4,l-=4);b=(null!=m?m.data:void 0)||this.imgData;for(K=0;0<=l?K<l:K>l;0<=l?++K:--K)b.push(this.data[this.pos++]);
break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(l);l=255-this.transparency.indexed.length;if(0<l)for(b=0;0<=l?b<l:b>l;0<=l?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case "tEXt":K=this.read(l);l=K.indexOf(0);b=String.fromCharCode.apply(String,K.slice(0,l));this.text[b]=String.fromCharCode.apply(String,K.slice(l+1));break;case "IEND":m&&
this.animation.frames.push(m);a:{switch(this.colorType){case 0:case 3:case 4:m=1;break a;case 2:case 6:m=3;break a}m=void 0}this.colors=m;this.hasAlphaChannel=4===(k=this.colorType)||6===k;k=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*k;a:{switch(this.colors){case 1:k="DeviceGray";break a;case 3:k="DeviceRGB";break a}k=void 0}this.colorSpace=k;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=l}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");
}}var q;a.load=function(b,k,m){"function"===typeof k&&(m=k);var l=new XMLHttpRequest;l.open("GET",b,!0);l.responseType="arraybuffer";l.onload=function(){var K=new Uint8Array(l.response||l.mozResponseArrayBuffer);K=new a(K);"function"===typeof(null!=k?k.getContext:void 0)&&K.render(k);return"function"===typeof m?m(K):void 0};return l.send(null)};a.prototype.read=function(b){var k;var m=[];for(k=0;0<=b?k<b:k>b;0<=b?++k:--k)m.push(this.data[this.pos++]);return m};a.prototype.readUInt32=function(){var b=
this.data[this.pos++]<<24;var k=this.data[this.pos++]<<16;var m=this.data[this.pos++]<<8;var l=this.data[this.pos++];return b|k|m|l};a.prototype.readUInt16=function(){var b=this.data[this.pos++]<<8;var k=this.data[this.pos++];return b|k};a.prototype.decodePixels=function(b){var k,m,l,K,F,G,N,P;null==b&&(b=this.imgData);if(0===b.length)return new Uint8Array(0);b=new A.Zlib(b);b=b.getBytes();var Q=this.pixelBitlength/8;var I=Q*this.width;var T=new Uint8Array(I*this.height);var W=b.length;for(m=K=F=
0;K<W;){switch(b[K++]){case 0:for(l=k=0;k<I;l=k+=1)T[m++]=b[K++];break;case 1:for(l=G=0;G<I;l=G+=1){k=b[K++];var Y=l<Q?0:T[m-Q];T[m++]=(k+Y)%256}break;case 2:for(l=Y=0;Y<I;l=Y+=1){k=b[K++];var Z=(l-l%Q)/Q;G=F&&T[(F-1)*I+Z*Q+l%Q];T[m++]=(G+k)%256}break;case 3:for(l=P=0;P<I;l=P+=1)k=b[K++],Z=(l-l%Q)/Q,Y=l<Q?0:T[m-Q],G=F&&T[(F-1)*I+Z*Q+l%Q],T[m++]=(k+Math.floor((Y+G)/2))%256;break;case 4:for(l=P=0;P<I;l=P+=1){k=b[K++];Z=(l-l%Q)/Q;Y=l<Q?0:T[m-Q];0===F?G=N=0:(G=T[(F-1)*I+Z*Q+l%Q],N=Z&&T[(F-1)*I+(Z-1)*
Q+l%Q]);var ca=Y+G-N;l=Math.abs(ca-Y);Z=Math.abs(ca-G);ca=Math.abs(ca-N);Y=l<=Z&&l<=ca?Y:Z<=ca?G:N;T[m++]=(k+Y)%256}break;default:throw Error("Invalid filter algorithm: "+b[K-1]);}F++}return T};a.prototype.decodePalette=function(){var b,k,m,l,K;var F=this.palette;var G=this.transparency.indexed||[];var N=new Uint8Array((G.length||0)+F.length);var P=m=b=k=0;for(l=F.length;m<l;P=m+=3)N[k++]=F[P],N[k++]=F[P+1],N[k++]=F[P+2],N[k++]=null!=(K=G[b++])?K:255;return N};a.prototype.copyToImageData=function(b,
k){var m,l;var K=this.colors;var F=null;var G=this.hasAlphaChannel;this.palette.length&&(F=null!=(m=this._decodedPalette)?m:this._decodedPalette=this.decodePalette(),K=4,G=!0);b=b.data||b;var N=b.length;var P=F||k;m=l=0;if(1===K)for(;m<N;)K=F?4*k[m/4]:l,l=P[K++],b[m++]=l,b[m++]=l,b[m++]=l,b[m++]=G?P[K++]:this.transparency.grayscale&&this.transparency.grayscale===l?0:255,l=K;else for(;m<N;)K=F?4*k[m/4]:l,b[m++]=P[K++],b[m++]=P[K++],b[m++]=P[K++],b[m++]=G?P[K++]:this.transparency.rgb&&this.transparency.rgb[1]===
P[K-3]&&this.transparency.rgb[3]===P[K-2]&&this.transparency.rgb[5]===P[K-1]?0:255,l=K};a.prototype.decode=function(){var b=new Uint8Array(this.width*this.height*4);this.copyToImageData(b,this.decodePixels());return b};var C=(q=f.document&&f.document.createElement("canvas"))&&q.getContext("2d");var c=function(b){C.width=b.width;C.height=b.height;C.clearRect(0,0,b.width,b.height);C.putImageData(b,0,0);b=new Image;b.src=q.toDataURL();return b};a.prototype.decodeFrames=function(b){var k,m;if(this.animation){var l=
this.animation.frames;var K=[];var F=k=0;for(m=l.length;k<m;F=++k){F=l[F];var G=b.createImageData(F.width,F.height);var N=this.decodePixels(new Uint8Array(F.data));this.copyToImageData(G,N);F.imageData=G;K.push(F.image=c(G))}return K}};a.prototype.renderFrame=function(b,k){var m=this.animation.frames;var l=m[k];m=m[k-1];0===k&&b.clearRect(0,0,this.width,this.height);1===(null!=m?m.disposeOp:void 0)?b.clearRect(m.xOffset,m.yOffset,m.width,m.height):2===(null!=m?m.disposeOp:void 0)&&b.putImageData(m.imageData,
m.xOffset,m.yOffset);0===l.blendOp&&b.clearRect(l.xOffset,l.yOffset,l.width,l.height);return b.drawImage(l.image,l.xOffset,l.yOffset)};a.prototype.animate=function(b){var k,m=this;var l=0;var K=this.animation;var F=K.numFrames;var G=K.frames;var N=K.numPlays;return(k=function(){var P=l++%F;var Q=G[P];m.renderFrame(b,P);if(1<F&&l/F<N)return m.animation._timeout=setTimeout(k,Q.delay)})()};a.prototype.stopAnimation=function(){var b;return clearTimeout(null!=(b=this.animation)?b._timeout:void 0)};a.prototype.render=
function(b){b._png&&b._png.stopAnimation();b._png=this;b.width=this.width;b.height=this.height;b=b.getContext("2d");if(this.animation)return this.decodeFrames(b),this.animate(b);var k=b.createImageData(this.width,this.height);this.copyToImageData(k,this.decodePixels());return b.putImageData(k,0,0)};return a}(self);const z=new Set(["jpg","png","bmp","gif"]);R.decode=async function(f,a,q){if(null==f)throw new H("rasterCodec:decode","missing encodeddata parameter.");if(null==a||null==a.width||null==
a.height)throw new H("rasterCodec:decode","requires width and height in options parameter.");let C=a.format&&a.format.toLowerCase();if("tiff"===C&&a.customOptions)return a=B.decodeTileOrStrip(f,a.customOptions),a=new v({width:a.width,height:a.height,pixels:a.pixels,pixelType:a.pixelType.toLowerCase(),mask:a.mask,statistics:null}),a.updateStatistics(),a;if(!C||"bsq"!==C&&"bip"!==C)C=u(f);a.useCanvas&&z.has(C)?f=await w(f,C,a,q):(q=y(C),a.isPoint&&(a={...a},a.width++,a.height++),f=q(f,a),a.isPoint&&
p(f));return f};R.getFormat=function(f){f=u(f);"lerc2"===f?f="lerc":"error"===f&&(f="");return f};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(R){function H(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}R.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};R.commonjsRequire=
H;R.createCommonjsModule=function(v,U,A){return A={path:U,exports:{},require:function(O,E){return H(O,void 0===E||null===E?A.path:E)}},v(A,A.exports),A.exports};R.getDefaultExportFromCjs=function(v){return v&&v.__esModule&&Object.prototype.hasOwnProperty.call(v,"default")?v["default"]:v}})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(R,H){H=H.createCommonjsModule(function(v){(function(U){U=U();void 0!==U&&(v.exports=U)})(function(){var U=function(){function A(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}A.prototype={ensureBuffer:function(O){var E=this.buffer,J=E?E.byteLength:0;if(O<J)return E;for(var L=512;L<O;)L<<=1;O=new Uint8Array(L);for(L=0;L<J;++L)O[L]=E[L];return this.buffer=O},getByte:function(){for(var O=this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(O){var E=this.pos;if(O){this.ensureBuffer(E+O);for(O=E+O;!this.eof&&this.bufferLength<O;)this.readBlock();var J=this.bufferLength;
O>J&&(O=J)}else{for(;!this.eof;)this.readBlock();O=this.bufferLength}this.pos=O;return this.buffer.subarray(E,O)},lookChar:function(){for(var O=this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var O=this.pos;this.bufferLength<=O;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(O,E,J){for(var L=O+E;this.bufferLength<=L&&!this.eof;)this.readBlock();
return new Stream(this.buffer,O,E,J)},skip:function(O){O||(O=1);this.pos+=O},reset:function(){this.pos=0}};return A}();return function(){function A(h){throw Error(h);}function O(h){var d=0,n=h[d++],e=h[d++];-1!=n&&-1!=e||A("Invalid header in flate stream");8!=(n&15)&&A("Unknown compression method in flate stream");0!=((n<<8)+e)%31&&A("Bad FCHECK in flate stream");e&32&&A("FDICT bit set in flate stream");this.bytes=h;this.bytesPos=d;this.codeBuf=this.codeSize=0;U.call(this)}if(!self||!self.Uint32Array)return null;
var E=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),L=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),M=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],B=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];O.prototype=Object.create(U.prototype);O.prototype.getBits=function(h){for(var d=this.codeSize,n=this.codeBuf,e=this.bytes,t=this.bytesPos,w;d<h;)"undefined"==typeof(w=e[t++])&&A("Bad encoding in flate stream"),n|=w<<
d,d+=8;this.codeBuf=n>>h;this.codeSize=d-=h;this.bytesPos=t;return n&(1<<h)-1};O.prototype.getCode=function(h){var d=h[0],n=h[1];h=this.codeSize;for(var e=this.codeBuf,t=this.bytes,w=this.bytesPos;h<n;){var u;"undefined"==typeof(u=t[w++])&&A("Bad encoding in flate stream");e|=u<<h;h+=8}n=d[e&(1<<n)-1];d=n>>16;n&=65535;(0==h||h<d||0==d)&&A("Bad encoding in flate stream");this.codeBuf=e>>d;this.codeSize=h-d;this.bytesPos=w;return n};O.prototype.generateHuffmanTable=function(h){for(var d=h.length,n=
0,e=0;e<d;++e)h[e]>n&&(n=h[e]);for(var t=1<<n,w=new Uint32Array(t),u=1,y=0,x=2;u<=n;++u,y<<=1,x<<=1)for(var p=0;p<d;++p)if(h[p]==u){var g=0,r=y;for(e=0;e<u;++e)g=g<<1|r&1,r>>=1;for(e=g;e<t;e+=x)w[e]=u<<16|p;++y}return[w,n]};O.prototype.readBlock=function(){function h(g,r,z,f,a){for(g=g.getBits(z)+f;0<g--;)r[y++]=a}var d=this.getBits(3);d&1&&(this.eof=!0);d>>=1;if(0==d){var n=this.bytes,e=this.bytesPos,t;"undefined"==typeof(t=n[e++])&&A("Bad block header in flate stream");var w=t;"undefined"==typeof(t=
n[e++])&&A("Bad block header in flate stream");w|=t<<8;"undefined"==typeof(t=n[e++])&&A("Bad block header in flate stream");d=t;"undefined"==typeof(t=n[e++])&&A("Bad block header in flate stream");(d|t<<8)!=(~w&65535)&&A("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;t=this.bufferLength;d=this.ensureBuffer(t+w);this.bufferLength=w=t+w;for(var u=t;u<w;++u){if("undefined"==typeof(t=n[e++])){this.eof=!0;break}d[u]=t}this.bytesPos=e}else{if(1==d)e=M,t=B;else if(2==d){d=
this.getBits(5)+257;t=this.getBits(5)+1;n=this.getBits(4)+4;e=Array(E.length);for(var y=0;y<n;)e[E[y++]]=this.getBits(3);e=this.generateHuffmanTable(e);y=n=0;t=d+t;for(w=Array(t);y<t;)u=this.getCode(e),16==u?h(this,w,2,3,n):17==u?h(this,w,3,3,n=0):18==u?h(this,w,7,11,n=0):w[y++]=n=u;e=this.generateHuffmanTable(w.slice(0,d));t=this.generateHuffmanTable(w.slice(d,t))}else A("Unknown block type in flate stream");w=(d=this.buffer)?d.length:0;for(u=this.bufferLength;;){var x=this.getCode(e);if(256>x)u+
1>=w&&(d=this.ensureBuffer(u+1),w=d.length),d[u++]=x;else{if(256==x){this.bufferLength=u;break}x-=257;x=J[x];var p=x>>16;0<p&&(p=this.getBits(p));n=(x&65535)+p;x=this.getCode(t);x=L[x];p=x>>16;0<p&&(p=this.getBits(p));x=(x&65535)+p;u+n>=w&&(d=this.ensureBuffer(u+n),w=d.length);for(p=0;p<n;++p,++u)d[u]=d[u-x]}}}};return O}()})});R.Zlib=H})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(R,
H,v){return function(){function U(A){A&&(this.canvas=A.canvas,this.ctx=A.ctx||A.canvas&&A.canvas.getContext("2d"))}U.prototype.decode=function(A,O,E){if(!A||10>A.byteLength)throw new R("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:J,height:L,format:M}=O;const {applyJpegMask:B}=O;if(B&&(!J||!L))throw new R("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return H.create((h,d)=>{let n=null;"jpg"===M&&B&&(n=U.getMask(A,
O));const e=new Blob([new Uint8Array(A)],{type:"jpg"==="image/"+M?"jpeg":M}),t=URL.createObjectURL(e),w=new Image;let u;w.src=t;w.onload=()=>{URL.revokeObjectURL(t);if(H.isAborted(E))d(H.createAbortError());else{J=w.width;L=w.height;if(this.canvas){if(this.canvas.width!==J||this.canvas.height!==L)this.canvas.width=J,this.canvas.height=L;this.ctx.clearRect(0,0,J,L)}else this.canvas=document.createElement("canvas"),this.canvas.width=J,this.canvas.height=L,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(w,
0,0);var y=this.ctx.getImageData(0,0,J,L);u=y.data;var x;if(O.renderOnCanvas){if(n)for(x=0;x<n.length;x++)u[4*x+3]=n[x]?255:0;this.ctx.putImageData(y,0,0);h(null)}else{y=J*L;var p=new Uint8Array(y),g=new Uint8Array(y),r=new Uint8Array(y);if(n)for(x=0;x<y;x++)p[x]=u[4*x],g[x]=u[4*x+1],r[x]=u[4*x+2];else for(n=new Uint8Array(y),x=0;x<y;x++)p[x]=u[4*x],g[x]=u[4*x+1],r[x]=u[4*x+2],n[x]=u[4*x+3];h({width:J,height:L,pixels:[p,g,r],mask:n,pixelType:"u8"})}}};w.onerror=()=>{URL.revokeObjectURL(t);d("cannot load image")}})};
U.getMask=function(A,O){let E=null;try{var J=new Uint8Array(A);A=0;var L=J.length-2;for(A=Math.ceil(J.length/2);A<L&&(255!==J[A]||217!==J[A+1]);A++);A+=2;if(A<J.length-1){const M=(new v.Zlib(J.subarray(A))).getBytes();E=new Uint8Array(O.width*O.height);O=0;for(J=0;J<M.length;J++)for(L=7;0<=L;L--)E[O++]=M[J]>>L&1}}catch(M){}return E};return U}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(R,H){return function(){function v(){}
v.decode=function(U){var A=new Uint8Array(U);U=new H.Jpg;U.parse(A);const {width:O,height:E,numComponents:J,eof:L}=U;U=U.getData(O,E,!0);let M;const B=O*E;let h=0;var d=0,n=0;if(L<A.length-1)for(A=(new R.Zlib(A.subarray(L))).getBytes(),M=new Uint8Array(B),h=d=0;h<A.length;h++)for(n=7;0<=n;n--)M[d++]=A[h]>>n&1;A=null;if(1===J)A=[U,U,U];else{A=[];for(h=0;3>h;h++)n=new Uint8Array(B),A.push(n);for(d=n=0;d<B;d++)for(h=0;3>h;h++)A[h][d]=U[n++]}return{width:O,height:E,pixels:A,mask:M}};return v}()})},"esri/chunks/Jpg":function(){define(["exports",
"./_commonjsHelpers"],function(R,H){H=H.createCommonjsModule(function(v){(function(U){U=U();void 0!==U&&(v.exports=U)})(function(){var U=function(){function A(O){this.message="JPEG error: "+O}A.prototype=Error();A.prototype.name="JpegError";return A.constructor=A}();return function(){function A(){this.decodeTransform=null;this.colorTransform=-1}function O(B,h){for(var d=0,n=[],e,t,w=16;0<w&&!B[w-1];)w--;n.push({children:[],index:0});var u=n[0],y;for(e=0;e<w;e++){for(t=0;t<B[e];t++){u=n.pop();for(u.children[u.index]=
h[d];0<u.index;)u=n.pop();u.index++;for(n.push(u);n.length<=e;)n.push(y={children:[],index:0}),u.children[u.index]=y.children,u=y;d++}e+1<w&&(n.push(y={children:[],index:0}),u.children[u.index]=y.children,u=y)}return n[0].children}function E(B,h,d,n,e,t,w,u,y){function x(){if(0<m)return m--,k>>m&1;k=B[h++];if(255===k){var ba=B[h++];if(ba)throw new U("unexpected marker "+(k<<8|ba).toString(16));}m=7;return k>>>7}function p(ba){for(;;){ba=ba[x()];if("number"===typeof ba)return ba;if("object"!==typeof ba)throw new U("invalid huffman sequence");
}}function g(ba){for(var aa=0;0<ba;)aa=aa<<1|x(),ba--;return aa}function r(ba){if(1===ba)return 1===x()?1:-1;var aa=g(ba);return aa>=1<<ba-1?aa:aa+(-1<<ba)+1}function z(ba,aa){var ja=p(ba.huffmanTableDC);ja=0===ja?0:r(ja);ba.blockData[aa]=ba.pred+=ja;for(ja=1;64>ja;){var ia=p(ba.huffmanTableAC),da=ia&15;ia>>=4;if(0===da){if(15>ia)break;ja+=16}else ja+=ia,ba.blockData[aa+M[ja]]=r(da),ja++}}function f(ba,aa){var ja=p(ba.huffmanTableDC);ja=0===ja?0:r(ja)<<y;ba.blockData[aa]=ba.pred+=ja}function a(ba,
aa){ba.blockData[aa]|=x()<<y}function q(ba,aa){if(0<l)l--;else for(var ja=t;ja<=w;){var ia=p(ba.huffmanTableAC),da=ia&15;ia>>=4;if(0===da){if(15>ia){l=g(ia)+(1<<ia)-1;break}ja+=16}else ja+=ia,ba.blockData[aa+M[ja]]=r(da)*(1<<y),ja++}}function C(ba,aa){for(var ja=t,ia=0,da;ja<=w;){da=M[ja];switch(K){case 0:ia=p(ba.huffmanTableAC);da=ia&15;ia>>=4;if(0===da)15>ia?(l=g(ia)+(1<<ia),K=4):(ia=16,K=1);else{if(1!==da)throw new U("invalid ACn encoding");F=r(da);K=ia?2:3}continue;case 1:case 2:ba.blockData[aa+
da]?ba.blockData[aa+da]+=x()<<y:(ia--,0===ia&&(K=2===K?3:0));break;case 3:ba.blockData[aa+da]?ba.blockData[aa+da]+=x()<<y:(ba.blockData[aa+da]=F<<y,K=0);break;case 4:ba.blockData[aa+da]&&(ba.blockData[aa+da]+=x()<<y)}ja++}4===K&&(l--,0===l&&(K=0))}var c=d.mcusPerLine,b=h,k=0,m=0,l=0,K=0,F,G=n.length,N,P,Q,I;u=d.progressive?0===t?0===u?f:a:0===u?q:C:z;var T=0;d=1===G?n[0].blocksPerLine*n[0].blocksPerColumn:c*d.mcusPerColumn;for(var W,Y;T<d;){var Z=e?Math.min(d-T,e):d;for(N=0;N<G;N++)n[N].pred=0;l=
0;if(1===G){var ca=n[0];for(I=0;I<Z;I++)u(ca,64*((ca.blocksPerLine+1)*(T/ca.blocksPerLine|0)+T%ca.blocksPerLine)),T++}else for(I=0;I<Z;I++){for(N=0;N<G;N++)for(ca=n[N],W=ca.h,Y=ca.v,P=0;P<Y;P++)for(Q=0;Q<W;Q++)u(ca,64*((ca.blocksPerLine+1)*((T/c|0)*ca.v+P)+(T%c*ca.h+Q)));T++}m=0;(ca=L(B,h))&&ca.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ca.invalid),h=ca.offset);ca=ca&&ca.marker;if(!ca||65280>=ca)throw new U("marker was not found");if(65488<=ca&&65495>=ca)h+=2;else break}(ca=
L(B,h))&&ca.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ca.invalid),h=ca.offset);return h-b}function J(B,h){B=h.blocksPerLine;for(var d=h.blocksPerColumn,n=new Int16Array(64),e=0;e<d;e++)for(var t=0;t<B;t++){var w=void 0,u=void 0,y=void 0,x=void 0,p=void 0,g=void 0,r=void 0,z=void 0,f=p=g=x=u=w=void 0,a=void 0,q=void 0,C=void 0,c=64*((h.blocksPerLine+1)*e+t),b=n,k=h.quantizationTable,m=h.blockData;if(!k)throw new U("missing required Quantization Table.");for(var l=
0;64>l;l+=8)w=m[c+l],z=m[c+l+1],r=m[c+l+2],g=m[c+l+3],p=m[c+l+4],x=m[c+l+5],y=m[c+l+6],u=m[c+l+7],w*=k[l],0===(z|r|g|p|x|y|u)?(w=5793*w+512>>10,b[l]=w,b[l+1]=w,b[l+2]=w,b[l+3]=w,b[l+4]=w,b[l+5]=w,b[l+6]=w,b[l+7]=w):(z*=k[l+1],r*=k[l+2],g*=k[l+3],p*=k[l+4],x*=k[l+5],y*=k[l+6],u*=k[l+7],C=5793*w+128>>8,q=5793*p+128>>8,a=r,f=y,p=2896*(z-u)+128>>8,u=2896*(z+u)+128>>8,g<<=4,x<<=4,C=C+q+1>>1,q=C-q,w=3784*a+1567*f+128>>8,a=1567*a-3784*f+128>>8,f=w,p=p+x+1>>1,x=p-x,u=u+g+1>>1,g=u-g,C=C+f+1>>1,f=C-f,q=q+a+
1>>1,a=q-a,w=2276*p+3406*u+2048>>12,p=3406*p-2276*u+2048>>12,u=w,w=799*g+4017*x+2048>>12,g=4017*g-799*x+2048>>12,x=w,b[l]=C+u,b[l+7]=C-u,b[l+1]=q+x,b[l+6]=q-x,b[l+2]=a+g,b[l+5]=a-g,b[l+3]=f+p,b[l+4]=f-p);for(k=0;8>k;++k)w=b[k],z=b[k+8],r=b[k+16],g=b[k+24],p=b[k+32],x=b[k+40],y=b[k+48],u=b[k+56],0===(z|r|g|p|x|y|u)?(w=5793*w+8192>>14,w=-2040>w?0:2024<=w?255:w+2056>>4,m[c+k]=w,m[c+k+8]=w,m[c+k+16]=w,m[c+k+24]=w,m[c+k+32]=w,m[c+k+40]=w,m[c+k+48]=w,m[c+k+56]=w):(C=5793*w+2048>>12,q=5793*p+2048>>12,a=
r,f=y,p=2896*(z-u)+2048>>12,u=2896*(z+u)+2048>>12,C=(C+q+1>>1)+4112,q=C-q,w=3784*a+1567*f+2048>>12,a=1567*a-3784*f+2048>>12,f=w,p=p+x+1>>1,x=p-x,u=u+g+1>>1,g=u-g,C=C+f+1>>1,f=C-f,q=q+a+1>>1,a=q-a,w=2276*p+3406*u+2048>>12,p=3406*p-2276*u+2048>>12,u=w,w=799*g+4017*x+2048>>12,g=4017*g-799*x+2048>>12,x=w,w=C+u,u=C-u,z=q+x,y=q-x,r=a+g,x=a-g,g=f+p,p=f-p,w=16>w?0:4080<=w?255:w>>4,z=16>z?0:4080<=z?255:z>>4,r=16>r?0:4080<=r?255:r>>4,g=16>g?0:4080<=g?255:g>>4,p=16>p?0:4080<=p?255:p>>4,x=16>x?0:4080<=x?255:
x>>4,y=16>y?0:4080<=y?255:y>>4,u=16>u?0:4080<=u?255:u>>4,m[c+k]=w,m[c+k+8]=z,m[c+k+16]=r,m[c+k+24]=g,m[c+k+32]=p,m[c+k+40]=x,m[c+k+48]=y,m[c+k+56]=u)}return h.blockData}function L(B,h,d){var n=B.length-1;d=d<h?d:h;if(h>=n)return null;var e=B[h]<<8|B[h+1];if(65472<=e&&65534>=e)return{invalid:null,marker:e,offset:h};for(h=B[d]<<8|B[d+1];!(65472<=h&&65534>=h);){if(++d>=n)return null;h=B[d]<<8|B[d+1]}return{invalid:e.toString(16),marker:h,offset:d}}if(!self||!self.Uint8ClampedArray)return null;var M=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);A.prototype={parse:function(B){function h(){var k=B[e]<<8|B[e+1];e+=2;return k}function d(){var k=h();k=e+k-2;var m=L(B,k,e);m&&m.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+m.invalid),k=m.offset);k=B.subarray(e,k);e+=k.length;return k}function n(k){for(var m=Math.ceil(k.samplesPerLine/
8/k.maxH),l=Math.ceil(k.scanLines/8/k.maxV),K=0;K<k.components.length;K++){b=k.components[K];var F=Math.ceil(Math.ceil(k.samplesPerLine/8)*b.h/k.maxH),G=Math.ceil(Math.ceil(k.scanLines/8)*b.v/k.maxV);b.blockData=new Int16Array(64*l*b.v*(m*b.h+1));b.blocksPerLine=F;b.blocksPerColumn=G}k.mcusPerLine=m;k.mcusPerColumn=l}var e=0,t=null,w=null,u=[],y=[],x=[],p=h();if(65496!==p)throw new U("SOI not found");for(p=h();65497!==p;){switch(p){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var g=
d();65504===p&&74===g[0]&&70===g[1]&&73===g[2]&&70===g[3]&&0===g[4]&&(t={version:{major:g[5],minor:g[6]},densityUnits:g[7],xDensity:g[8]<<8|g[9],yDensity:g[10]<<8|g[11],thumbWidth:g[12],thumbHeight:g[13],thumbData:g.subarray(14,14+3*g[12]*g[13])});65518===p&&65===g[0]&&100===g[1]&&111===g[2]&&98===g[3]&&101===g[4]&&(w={version:g[5]<<8|g[6],flags0:g[7]<<8|g[8],flags1:g[9]<<8|g[10],transformCode:g[11]});break;case 65499:p=h()+e-2;for(var r;e<p;){var z=B[e++],f=new Uint16Array(64);if(0===z>>4)for(g=
0;64>g;g++)r=M[g],f[r]=B[e++];else if(1===z>>4)for(g=0;64>g;g++)r=M[g],f[r]=h();else throw new U("DQT - invalid table spec");u[z&15]=f}break;case 65472:case 65473:case 65474:if(a)throw new U("Only single frame JPEGs supported");h();var a={};a.extended=65473===p;a.progressive=65474===p;a.precision=B[e++];a.scanLines=h();a.samplesPerLine=h();a.components=[];a.componentIds={};g=B[e++];for(p=f=z=0;p<g;p++){r=B[e];var q=B[e+1]>>4;var C=B[e+1]&15;z<q&&(z=q);f<C&&(f=C);q=a.components.push({h:q,v:C,quantizationId:B[e+
2],quantizationTable:null});a.componentIds[r]=q-1;e+=3}a.maxH=z;a.maxV=f;n(a);break;case 65476:r=h();for(p=2;p<r;){z=B[e++];f=new Uint8Array(16);for(g=q=0;16>g;g++,e++)q+=f[g]=B[e];C=new Uint8Array(q);for(g=0;g<q;g++,e++)C[g]=B[e];p+=17+q;(0===z>>4?x:y)[z&15]=O(f,C)}break;case 65501:h();var c=h();break;case 65498:h();r=B[e++];g=[];for(p=0;p<r;p++){z=a.componentIds[B[e++]];var b=a.components[z];z=B[e++];b.huffmanTableDC=x[z>>4];b.huffmanTableAC=y[z&15];g.push(b)}p=B[e++];r=B[e++];z=B[e++];p=E(B,e,
a,g,c,p,r,z>>4,z&15);e+=p;break;case 65535:255!==B[e]&&e--;break;default:if(255===B[e-3]&&192<=B[e-2]&&254>=B[e-2])e-=3;else throw new U("unknown marker "+p.toString(16));}p=h()}this.width=a.samplesPerLine;this.height=a.scanLines;this.jfif=t;this.eof=e;this.adobe=w;this.components=[];for(p=0;p<a.components.length;p++){b=a.components[p];if(t=u[b.quantizationId])b.quantizationTable=t;this.components.push({output:J(a,b),scaleX:b.h/a.maxH,scaleY:b.v/a.maxV,blocksPerLine:b.blocksPerLine,blocksPerColumn:b.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(B,h){var d=this.width/B,n=this.height/h,e,t,w=0,u=this.components.length,y=B*h*u,x=new Uint8ClampedArray(y),p=new Uint32Array(B);for(t=0;t<u;t++){var g=this.components[t];var r=g.scaleX*d;var z=g.scaleY*n;w=t;var f=g.output;var a=g.blocksPerLine+1<<3;for(e=0;e<B;e++)g=0|e*r,p[e]=(g&4294967288)<<3|g&7;for(r=0;r<h;r++)for(g=0|r*z,g=a*(g&4294967288)|(g&7)<<3,e=0;e<B;e++)x[w]=f[g+p[e]],w+=u}if(h=this.decodeTransform)for(t=0;t<y;)for(B=g=0;g<u;g++,
t++,B+=2)x[t]=(x[t]*h[B]>>8)+h[B+1];return x},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(B){for(var h,d,n,e=0,t=B.length;e<t;e+=3)h=B[e],d=B[e+1],n=B[e+2],B[e]=h-179.456+1.402*n,B[e+1]=h+135.459-.344*d-.714*n,B[e+2]=h-226.816+1.772*d;return B},_convertYcckToRgb:function(B){for(var h,d,n,e,t=0,w=0,u=B.length;w<u;w+=4)h=B[w],d=B[w+1],n=B[w+2],e=B[w+3],B[t++]=
-122.67195406894+d*(-6.60635669420364E-5*d+4.37130475926232E-4*n-5.4080610064599E-5*h+4.8449797120281E-4*e-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*h-.00477271405408747*e+1.53380253221734)+h*(9.61250184130688E-4*h-.00266257332283933*e+.48357088451265)+e*(-3.36197177618394E-4*e+.484791561490776),B[t++]=107.268039397724+d*(2.19927104525741E-5*d-6.40992018297945E-4*n+6.59397001245577E-4*h+4.26105652938837E-4*e-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*h+7.70482631801132E-4*
e-.151051492775562)+h*(.00126935368114843*h-.00265090189010898*e+.25802910206845)+e*(-3.18913117588328E-4*e-.213742400323665),B[t++]=-20.810012546947+d*(-5.70115196973677E-4*d-2.63409051004589E-5*n+.0020741088115012*h-.00288260236853442*e+.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*h+5.60833691242812E-4*e-.195152027534049)+h*(.00174418132927582*h-.00255243321439347*e+.116935020465145)+e*(-3.43531996510555E-4*e+.24165260232407);return B},_convertYcckToCmyk:function(B){for(var h,
d,n,e=0,t=B.length;e<t;e+=4)h=B[e],d=B[e+1],n=B[e+2],B[e]=434.456-h-1.402*n,B[e+1]=119.541-h+.344*d+.714*n,B[e+2]=481.816-h-1.772*d;return B},_convertCmykToRgb:function(B){for(var h,d,n,e,t=0,w=1/255,u=0,y=B.length;u<y;u+=4)h=B[u]*w,d=B[u+1]*w,n=B[u+2]*w,e=B[u+3]*w,B[t++]=255+h*(-4.387332384609988*h+54.48615194189176*d+18.82290502165302*n+212.25662451639585*e-285.2331026137004)+d*(1.7149763477362134*d-5.6096736904047315*n-17.873870861415444*e-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*
e+17.5119270841813)-e*(21.86122147463605*e+189.48180835922747),B[t++]=255+h*(8.841041422036149*h+60.118027045597366*d+6.871425592049007*n+31.159100130055922*e-79.2970844816548)+d*(-15.310361306967817*d+17.575251261109482*n+131.35250912493976*e-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*e-24.86741582555878)-e*(20.737325471181034*e+187.80453709719578),B[t++]=255+h*(.8842522430003296*h+8.078677503112928*d+30.89978309703729*n-.23883238689178934*e-14.183576799673286)+d*(10.49593273432072*
d+63.02378494754052*n+50.606957656360734*e-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*e-193.58209356861505)-e*(22.33816807309886*e+180.12613974708367);return B},getData:function(B,h,d){if(4<this.numComponents)throw new U("Unsupported color mode");B=this._getLinearizedBlockData(B,h);if(1===this.numComponents&&d){d=B.length;h=new Uint8ClampedArray(3*d);for(var n=0,e=0;e<d;e++){var t=B[e];h[n++]=t;h[n++]=t;h[n++]=t}return h}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(B);
if(4===this.numComponents){if(this._isColorConversionNeeded())return d?this._convertYcckToRgb(B):this._convertYcckToCmyk(B);if(d)return this._convertCmykToRgb(B)}return B}};return A}()})});R.Jpg=H})},"esri/chunks/LercCodec":function(){define(["exports"],function(R){function H(O){v[0]=O;return v[0]}const v=new Float32Array(1),U=H(3.4028234663852886E38);var A=H(Math.max(-U,Math.min(-Infinity,U)));R.decode=function(O,E){E=E||{};var J=E.inputOffset||0;var L=E.encodedMaskData||null===E.encodedMaskData;
var M=new Uint8Array(O,J,10);M=String.fromCharCode.apply(null,M);if("CntZImage"!=M.trim())throw"Unexpected file identifier string: "+M;J+=10;var B=new DataView(O,J,24);var h=B.getInt32(0,!0);var d=B.getInt32(4,!0);var n=B.getUint32(8,!0);var e=B.getUint32(12,!0);var t=B.getFloat64(16,!0);J+=24;if(!L){B=new DataView(O,J,16);var w={};w.numBlocksY=B.getUint32(0,!0);w.numBlocksX=B.getUint32(4,!0);w.numBytes=B.getUint32(8,!0);w.maxValue=B.getFloat32(12,!0);J+=16;if(0<w.numBytes){L=new Uint8Array(Math.ceil(e*
n/8));B=new DataView(O,J,w.numBytes);var u=B.getInt16(0,!0);var y=2;var x=0;do{if(0<u)for(;u--;)L[x++]=B.getUint8(y++);else{var p=B.getUint8(y++);for(u=-u;u--;)L[x++]=p}u=B.getInt16(y,!0);y+=2}while(y<w.numBytes);if(-32768!==u||x<L.length)throw"Unexpected end of mask RLE encoding";w.bitset=L;J+=w.numBytes}else 0===(w.numBytes|w.numBlocksY|w.maxValue)&&(L=new Uint8Array(Math.ceil(e*n/8)),w.bitset=L)}B=new DataView(O,J,16);var g=L=p=x=y=u=void 0;u=B.getUint32(0,!0);y=B.getUint32(4,!0);x=B.getUint32(8,
!0);p=B.getFloat32(12,!0);J+=16;g=y;L=u;g+=0<e%g?1:0;var r=L+(0<n%L?1:0);L=Array(g*r);for(var z=1E9,f=0,a=0;a<r;a++)for(var q=0;q<g;q++){var C=0;B=new DataView(O,J,Math.min(10,O.byteLength-J));var c={};L[f++]=c;var b=B.getUint8(0);C++;c.encoding=b&63;if(3<c.encoding)throw"Invalid block encoding ("+c.encoding+")";if(2===c.encoding)J++,z=Math.min(z,0);else{if(0!==b&&2!==b){b>>=6;c.offsetType=b;if(2===b)c.offset=B.getInt8(1),C++;else if(1===b)c.offset=B.getInt16(1,!0),C+=2;else if(0===b)c.offset=B.getFloat32(1,
!0),C+=4;else throw"Invalid block offset type";z=Math.min(c.offset,z);if(1===c.encoding)if(b=B.getUint8(C),C++,c.bitsPerPixel=b&63,b>>=6,c.numValidPixelsType=b,2===b)c.numValidPixels=B.getUint8(C),C++;else if(1===b)c.numValidPixels=B.getUint16(C,!0),C+=2;else if(0===b)c.numValidPixels=B.getUint32(C,!0),C+=4;else throw"Invalid valid pixel count type";}J+=C;if(3!=c.encoding)if(0===c.encoding){B=(x-1)/4;if(B!==Math.floor(B))throw"uncompressed block has invalid length";C=new ArrayBuffer(4*B);b=new Uint8Array(C);
b.set(new Uint8Array(O,J,4*B));C=new Float32Array(C);for(b=0;b<C.length;b++)z=Math.min(z,C[b]);c.rawData=C;J+=4*B}else 1===c.encoding&&(B=Math.ceil(c.numValidPixels*c.bitsPerPixel/8),C=new ArrayBuffer(4*Math.ceil(B/4)),b=new Uint8Array(C),b.set(new Uint8Array(O,J,B)),c.stuffedData=new Uint32Array(C),J+=B)}}g=z;O=J;J=null!=E.noDataValue?H(Math.max(-U,Math.min(E.noDataValue,U))):A;r=E.encodedMaskData;b=E.returnMask;z=0;f=y;a=u;q=Math.floor(e/f);c=Math.floor(n/a);C=2*t;r=r||(w?w.bitset:null);var k;B=
new (E.pixelType||Float32Array)(e*n);b&&r&&(k=new Uint8Array(e*n));b=new Float32Array(q*c);for(var m,l,K=0;K<=a;K++){var F=K!==a?c:n%a;if(0!==F)for(var G=0;G<=f;G++){var N=G!==f?q:e%f;if(0!==N){var P=K*e*c+G*q,Q=e-N,I=L[z],T;if(2>I.encoding){if(0===I.encoding)var W=I.rawData;else{m=T=W=void 0;l=I.stuffedData;var Y=I.bitsPerPixel,Z=I.numValidPixels,ca=I.offset,ba=C,aa=b,ja=p,ia=(1<<Y)-1,da=0,ma=0,pa=Math.ceil((ja-ca)/ba);l[l.length-1]<<=8*(4*l.length-Math.ceil(Y*Z/8));for(m=0;m<Z;m++)0===ma&&(W=l[da++],
ma=32),ma>=Y?(T=W>>>ma-Y&ia,ma-=Y):(ma=Y-ma,T=(W&ia)<<ma&ia,W=l[da++],ma=32-ma,T+=W>>>ma),aa[m]=T<pa?ca+T*ba:ja;W=b}T=0}else var va=2===I.encoding?0:I.offset;if(r)for(l=0;l<F;l++){if(P&7){var ya=r[P>>3];ya<<=P&7}for(m=0;m<N;m++)P&7||(ya=r[P>>3]),ya&128?(k&&(k[P]=1),B[P++]=2>I.encoding?W[T++]:va):(k&&(k[P]=0),B[P++]=J),ya<<=1;P+=Q}else if(2>I.encoding)for(l=0;l<F;l++){for(m=0;m<N;m++)B[P++]=W[T++];P+=Q}else for(l=0;l<F;l++)if(B.fill)B.fill(va,P,P+N),P+=N+Q;else{for(m=0;m<N;m++)B[P++]=va;P+=Q}if(1===
I.encoding&&T!==I.numValidPixels)throw"Block and Mask do not match";z++}}}va=k;k={width:e,height:n,pixelData:B,minValue:g,maxValue:p,noDataValue:J};va&&(k.maskData=va);E.returnEncodedMask&&w&&(k.encodedMaskData=w.bitset?w.bitset:null);if(E.returnFileInfo&&(k.fileInfo={fileIdentifierString:M,fileVersion:h,imageType:d,height:n,width:e,maxZError:t,eofOffset:O,mask:w?{numBlocksX:w.numBlocksX,numBlocksY:w.numBlocksY,numBytes:w.numBytes,maxValue:w.maxValue}:null,pixels:{numBlocksX:y,numBlocksY:u,numBytes:x,
maxValue:p,minValue:g,noDataValue:J}},E.computeUsedBitDepths)){E=k.fileInfo;w=y*u;M={};for(h=0;h<w;h++)d=L[h],0===d.encoding?M.float32=!0:1===d.encoding?M[d.bitsPerPixel]=!0:M[0]=!0;w=Object.keys(M);E.bitDepths=w}return k}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const R=function(H){let v=1;switch(H){case Uint8Array:case Int8Array:v=1;break;case Uint16Array:case Int16Array:v=2;break;case Uint32Array:case Int32Array:case Float32Array:v=4;break;case Float64Array:v=8}return v};
return function(){function H(){}H.decode=function(v,U){var A=U.pixelType;const O=[],E=U.width*U.height;var J=Math.floor(v.byteLength/(U.width*U.height*R(U.pixelType)));const {bandIds:L,format:M}=U;U=L&&L.length||Math.floor(v.byteLength/(U.width*U.height*R(U.pixelType)));var B=v.byteLength-v.byteLength%(E*R(A));const h=new A(v,0,E*J);let d,n;let e,t;if("bip"===M)for(d=0;d<U;d++){e=new A(E);t=L?L[d]:d;for(n=0;n<E;n++)e[n]=h[n*J+t];O.push(e)}else if("bsq"===M)for(d=0;d<U;d++)t=L?L[d]:d,O.push(h.subarray(t*
E,(t+1)*E));if(B<v.byteLength-1)if(v=v.slice(B),8*v.byteLength<E)var w=null;else{v=new Uint8Array(v,0,Math.ceil(E/8));A=new Uint8Array(E);for(U=B=U=w=J=0;U<v.length-1;U++)for(w=v[U],B=7;0<=B;B--)A[J++]=w>>B&1;for(B=7;J<E-1;)w=v[v.length-1],A[J++]=w>>B&1,B--;w=A}return{pixels:O,mask:w}};return H}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(R){{var H=new ArrayBuffer(4);const v=new Uint8Array(H);(new Uint32Array(H))[0]=1;H=1===v[0]}R.isPlatformLittleEndian=H;
Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(R,H,v,U,A,O,E){function J(f,a){let q="unknown";3===f?q="f32":1===f?1===a?q="u1":2===a?q="u2":4===a?q="u4":8>=a?q="u8":16>=a?q="u16":32>=a&&(q="u32"):2===f&&(8>=a?q="s8":16>=a?q="s16":32>=a&&(q="s32"));return q}function L(f){let a=null;switch(f?f.toLowerCase():
"f32"){case "u1":case "u2":case "u4":case "u8":a=Uint8Array;break;case "u16":a=Uint16Array;break;case "u32":a=Uint32Array;break;case "s8":a=Int8Array;break;case "s16":a=Int16Array;break;case "s32":a=Int32Array;break;default:a=Float32Array}return a}function M(f,a){return{x:a[0]*f.x+a[1]*f.y+a[2],y:a[3]*f.x+a[4]*f.y+a[5]}}function B(f,a){return(f=f.get(a))&&f.values}function h(f,a){return(f=f.get(a))&&f.values[0]}function d(f,a,q,C=0,c=O.TIFF_TAGS,b=4){var k=8===b;const m=k?w(new DataView(f,q,8),0,
a):(new DataView(f,q,2)).getUint16(0,a),l=4+2*b;var K=k?8:2;k=K+m*l;if(q+k>f.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:k};const F=q+k+4<=f.byteLength?u(new DataView(f,q+k,8===b?8:4),0,a,8===b):null;q+=K;K=new Map;let G,N,P,Q,I;for(let W=0;W<m;W++){var T=new DataView(f,q+l*W,l);G=T.getUint16(0,a);P=T.getUint16(2,a);N=O.getTagName(G,c);2===b?(Q=T.getUint16(4,a),I=T.getUint16(6,a)):4===b?(Q=T.getUint32(4,a),I=T.getUint32(8,a)):8===b&&(Q=u(T,4,a,!0),I=u(T,12,a,!0));T={id:G,
type:P,valueCount:Q,valueOffset:I,values:null};n(f,a,T,C,!1,b);K.set(N,T)}return{success:!0,ifd:K,nextIFD:F,requiredBufferSize:k}}function n(f,a,q,C=0,c=!1,b=4){if(q.values)return!0;var k=q.type,m=q.valueCount,l=q.valueOffset;let K=[];var F=p[k],G=8*F,N=m*F,P=m*p[k]*8;b=8===b?64:32;if(P>b&&N>(c?f.byteLength:f?f.byteLength-l+C:0))return q.offlineOffsetSize=[l,N],q.values=null,!1;if(P<=b)if(a||(l>>>=32-P),1===m)K=[l];else if(64===b)for(f=l>>>0,l=Math.round((l-f)/4294967296),a=f,F=32,f=1;f<=m;f++)N=
32-G*f%32,F<G?(N=a<<N>>>32-F,C=l<<32-F>>>32-F,a=l,K.push(N+C*Math.pow(2,G-F)),F-=32-(G-F)):(K.push(a<<N>>>32-G),F-=G),0===F&&(F=32,a=l);else for(f=1;f<=m;f++)K.push(l<<32-G*f>>>32-G);else for(l-=C,c&&(l=0),m=l;m<l+N;m+=F){switch(k){case 1:G=(new DataView(f,m,1)).getUint8(0);break;case 2:G=(new DataView(f,m,1)).getUint8(0);break;case 3:G=(new DataView(f,m,2)).getUint16(0,a);break;case 4:G=(new DataView(f,m,4)).getUint32(0,a);break;case 5:G=(new DataView(f,m,4)).getUint32(0,a)/(new DataView(f,m+4,4)).getUint32(0,
a);break;case 6:G=(new DataView(f,m,1)).getInt8(0);break;case 7:G=(new DataView(f,m,1)).getUint8(0);break;case 8:G=(new DataView(f,m,2)).getInt16(0,a);break;case 9:G=(new DataView(f,m,4)).getInt32(0,a);break;case 10:G=(new DataView(f,m,4)).getInt32(0,a)/(new DataView(f,m+4,4)).getInt32(0,a);break;case 11:G=(new DataView(f,m,4)).getFloat32(0,a);break;case 12:G=(new DataView(f,m,8)).getFloat64(0,a);break;case 16:case 18:G=w(new DataView(f,m,8),0,a);break;case 17:c=new DataView(f,m,8);C=(G=a)?c.getInt32(0,
G):c.getUint32(0,G);c=G?c.getUint32(4,G):c.getInt32(4,G);P=0<=(G?C:c)?1:-1;G?C*=P:c*=P;G=P*(G?4294967296*c+C:4294967296*C+c);break;default:G=null}K.push(G)}if(2===k){k="";l=K;K=[];for(f=0;f<l.length;f++)0===l[f]&&""!==k?(K.push(k),k=""):k+=String.fromCharCode(l[f]);""===k&&0!==K.length||K.push(k)}q.values=K;return!0}function e(f){var a=f[0];const q=h(a,"TILEWIDTH"),C=h(a,"TILELENGTH"),c=h(a,"IMAGEWIDTH"),b=h(a,"IMAGELENGTH");var k=h(a,"BITSPERSAMPLE");const m=h(a,"SAMPLESPERPIXEL");var l=h(a,"SAMPLEFORMAT")||
1;const K=J(l,k),F=B(a,"PLANARCONFIGURATION")?2===B(a,"PLANARCONFIGURATION")[0]:!1;var G=B(a,"GDAL_NODATA");let N;null!=G&&("string"===typeof G[0]?(N=G.map(ma=>parseFloat(ma)),N.some(ma=>isNaN(ma))&&(N=null)):"number"===typeof G[0]&&(N=G));var P=h(a,"COMPRESSION")||1;switch(P){case 1:G="NONE";break;case 2:case 3:case 4:case 32771:G="CCITT";break;case 5:G="LZW";break;case 6:case 7:G="JPEG";break;case 32773:G="PACKBITS";break;case 8:case 32946:G="DEFLATE";break;case 34712:G="JPEG2000";break;default:G=
String(P)}let Q=!0,I="";1!==P&&5!==P&&6!==P&&8!==P&&32946!==P&&(Q=!1,I+="unsupported tag compression "+P);3<l&&(Q=!1,I+="unsupported tag sampleFormat "+l);0!==k%8&&(Q=!1,I+="unsupported tag bitsPerSample "+k);k=h(a,"GEOASCIIPARAMS");if(k){var T=(T=k.split("|").filter(ma=>-1<ma.indexOf("ESRI PE String \x3d "))[0])?T.replace("ESRI PE String \x3d ",""):"";T=0===T.indexOf("PROJCS")||0===T.indexOf("GEOGCS")?{wkid:null,wkt:T}:null}k=B(a,"GEOTIEPOINTS");l=B(a,"GEOPIXELSCALE");P=B(a,"GEOTRANSMATRIX");var W=
a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null;a=!1;if(W){a=2===h(W,"GTRasterTypeGeoKey");var Y=h(W,"GTModelTypeGeoKey");2===Y?(W=h(W,"GeographicTypeGeoKey"),1024<=W&&32766>=W&&(T={wkid:W})):1===Y&&(W=h(W,"ProjectedCSTypeGeoKey"),1024<=W&&32766>=W&&(T={wkid:W}))}if(l&&k&&6<=k.length){var Z=[l[0],0,k[3]-k[0]*l[0],0,-Math.abs(l[1]),k[4]-k[1]*l[1]];a&&(Z[2]-=.5*Z[0]+.5*Z[1],Z[5]-=.5*Z[3]+.5*Z[4])}else P&&16===P.length&&(Z=[P[0],P[1],P[3],P[4],P[5],P[7]]);if(Z){var ca=[{x:0,y:b},{x:0,y:0},
{x:c,y:b},{x:c,y:0}];l=k=Number.POSITIVE_INFINITY;W=P=Number.NEGATIVE_INFINITY;for(Y=0;Y<ca.length;Y++)a=M(ca[Y],Z),k=a.x>k?k:a.x,P=a.x<P?P:a.x,l=a.y>l?l:a.y,W=a.y<W?W:a.y;ca={xmin:k,xmax:P,ymin:l,ymax:W,spatialReference:T}}Z=f.filter(ma=>1===h(ma,"NEWSUBFILETYPE"));let ba,aa,ja,ia;0<Z.length&&(ba=Math.round(Math.log(c/h(Z[0],"IMAGEWIDTH"))/Math.LN2),aa=Math.round(Math.log(c/h(Z[Z.length-1],"IMAGEWIDTH"))/Math.LN2),ja=h(Z[Z.length-1],"TILEWIDTH"),ia=h(Z[Z.length-1],"TILEHEIGHT"));ja=0<aa?ja||q:null;
ia=0<aa?ia||C:null;let da;q&&(da=[{maxCol:Math.ceil(c/q)-1,maxRow:Math.ceil(b/C)-1,minRow:0,minCol:0}],Z.forEach(ma=>{da.push({maxCol:Math.ceil(h(ma,"IMAGEWIDTH")/h(ma,"TILEWIDTH"))-1,maxRow:Math.ceil(h(ma,"IMAGELENGTH")/h(ma,"TILELENGTH"))-1,minRow:0,minCol:0})}));f=h(f[0],"GDAL_METADATA");f=z(f);return{width:c,height:b,tileWidth:q,tileHeight:C,planes:m,isBSQ:F,pixelType:K,compression:G,noData:N,isSupported:Q,message:I,extent:ca,firstPyramidLevel:ba,maximumPyramidLevel:aa,pyramidBlockWidth:ja,pyramidBlockHeight:ia,
tileBoundary:da,metadata:f}}function t(f){const {littleEndian:a,isBigTiff:q,firstIFD:C}=y(f);var c=C;const b=[];do if(c=x(f,a,c,0,O.TIFF_TAGS,q?8:4),c.success)b.push(c.ifd),c=c.nextIFD;else break;while(0<c);return{...e(b),littleEndian:a,isBigTiff:q,ifds:b}}function w(f,a,q){const C=f.getUint32(a,q);f=f.getUint32(a+4,q);return q?4294967296*f+C:4294967296*C+f}function u(f,a,q,C){return C?w(f,a,q):f.getUint32(a,q)}function y(f){var a=new DataView(f,0,16),q=a.getUint16(0,!1);f=null;if(18761===q)f=!0;
else if(19789===q)f=!1;else throw"unexpected endianess byte";var C=a.getUint16(2,f);if(42!==C&&43!==C)throw"unexpected tiff identifier";q=4;if(C=43===C){const c=a.getUint16(q,f);q+=2;if(8!==c)throw"unsupported bigtiff version";if(0!==a.getUint16(q,f))throw"unsupported bigtiff version";q+=2}a=u(a,q,f,C);return{littleEndian:f,isBigTiff:C,firstIFD:a}}function x(f,a,q,C=0,c=O.TIFF_TAGS,b=4){q=d(f,a,q,C,c,b);let k;const m=q.ifd;m&&(O.ifdTags.forEach((l,K)=>{m.has(K)&&(k=m.get(K),k.data=d(f,a,k.valueOffset-
C,C,l).ifd)}),m.has("GEOKEYDIRECTORY")&&(k=m.get("GEOKEYDIRECTORY"),(c=k.values)&&4<c.length&&(c=c[0]+"."+c[1]+"."+c[2],k.data=d(f,a,k.valueOffset+6-C,C,O.GEO_KEYS,2).ifd,k.data&&k.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]}))),m.has("XMP")&&(k=m.get("XMP"),c=k.values,"number"===typeof c[0]&&7===k.type&&(k.values=[U.bytesToUTF8(new Uint8Array(c))])));return q}const p=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],g=function(f,a,q,C,c){var b=E.isPlatformLittleEndian===
a,k=h(q,"BITSPERSAMPLE"),m=h(q,"SAMPLEFORMAT")||1;k=J(m,k);m=h(q,"COMPRESSION")||1;q=L(k);if(1===m){var l=f.slice(C,C+c);var K=new Uint8Array(l)}else 8===m||32946===m?(K=new Uint8Array(f,C,c),K=new H.Zlib(K),f=K.getBytes(),l=new ArrayBuffer(f.length),K=new Uint8Array(l),K.set(f)):6===m?(K=new Uint8Array(f,C,c),l=new v.Jpg,l.parse(K),f=l.getData(l.width,l.height,!0),l=new ArrayBuffer(f.length),K=new Uint8Array(l),K.set(f)):5===m&&(K=A.decode(f,C,c,a),l=K.buffer);if("u8"!==k&&"s8"!==k&&!b)switch(l=
new ArrayBuffer(K.length),b=new Uint8Array(l),k){case "u16":case "s16":for(k=0;k<K.length;k+=2)b[k]=K[k+1],b[k+1]=K[k];break;case "u32":case "s32":case "f32":for(k=0;k<K.length;k+=4)b[k]=K[k+3],b[k+1]=K[k+2],b[k+2]=K[k+1],b[k+3]=K[k]}return new q(l)},r=function(f,a,q){if(!(f&&0<f.length&&a&&q))return null;let C,c,b;const k=f[0].length,m=f.length,l=new Uint8Array(k);for(let F=0;F<m;F++)if(C=f[F],c=a[F],b=q[F],0===F)for(var K=0;K<k;K++)l[K]=C[K]<c||C[K]>b?0:1;else for(K=0;K<k;K++)l[K]&&(l[K]=C[K]<c||
C[K]>b?0:1);return l},z=function(f){if(!f)return null;var a=f.match(/<Item(.*?)Item>/gi);if(!a||0===a.length)return null;f=new Map;var q;for(var C=0;C<a.length;C++){var c=a[C];var b=c.slice(6,c.indexOf("\x3e"));var k=c.indexOf("sample\x3d");-1<k&&(q=c.slice(k+8,c.indexOf('"',k+8)));k=c.indexOf("name\x3d");-1<k&&(b=c.slice(k+6,c.indexOf('"',k+6)));b&&(c=c.slice(c.indexOf("\x3e")+1,c.indexOf("\x3c/Item\x3e")).trim(),null!=q?f.has(b)?f.get(b)[q]=c:f.set(b,[c]):f.set(b,c));q=null}a=f.get("STATISTICS_MINIMUM");
b=f.get("STATISTICS_MAXIMUM");C=f.get("STATISTICS_MEAN");c=f.get("STATISTICS_STDDEV");q=null;if(a&&b)for(q=[],k=0;k<a.length;k++)q.push({min:parseFloat(a[k]),max:parseFloat(b[k]),avg:C&&parseFloat(C[k]),stddev:c&&parseFloat(c[k])});b=f.get("BandName");C=f.get("WavelengthMin");c=f.get("WavelengthMax");a=null;if(b)for(a=[],k=0;k<b.length;k++)a.push({BandName:b[k],WavelengthMin:C&&parseFloat(C[k]),WavelengthMax:c&&parseFloat(c[k])});b=f.get("DataType");return{statistics:q,bandProperties:a,dataType:b,
rawMetadata:f}};R.decode=function(f,a){a=a||t(f);const {ifds:q,noData:C}=a;if(0===q.length)throw"no valid image file directory";var c=q[0];const b=C?C[0]:null;if(a.tileWidth){var k=B(c,"TILEOFFSETS");if(void 0===k)c=null;else{var m=B(c,"TILEBYTECOUNTS"),l=a.tileWidth,K=a.tileHeight,{width:F,height:G,pixelType:N,isBSQ:P}=a,Q=a.planes,I=F*G,T=B(c,"BITSPERSAMPLE")[0],W=L(N),Y=[];for(var Z=0;Z<Q;Z++)Y.push(new W(I));var ca,ba;I=Math.ceil(F/l);if(0===T%8)for(T=0;T<k.length;T++){var aa=Math.floor(T/I)*
K;var ja=T%I*l;Z=aa*F+ja;W=g(f,a.littleEndian,c,k[T],m[T]);var ia=0;var da=Z;ja=Math.min(l,F-ja);var ma=Math.min(K,G-aa);for(aa=0;aa<Q;aa++){var pa=Y[aa];if(P)for(ca=0;ca<ma;ca++)for(da=Z+ca*F,ia=l*K*aa+ca*l,ba=0;ba<ja;ba++,da++,ia++)pa[da]=W[ia];else for(ca=0;ca<ma;ca++)for(da=Z+ca*F,ia=ca*l*Q+aa,ba=0;ba<ja;ba++,da++,ia+=Q)pa[da]=W[ia]}}c={width:F,height:G,pixelType:N,pixels:Y}}}else if(k=E.isPlatformLittleEndian===a.littleEndian,I=B(c,"STRIPOFFSETS"),void 0===I)c=null;else{var {width:va,height:ya,
pixelType:ha}=a;a=a.planes;m=va*ya;T=B(c,"BITSPERSAMPLE")[0];l=L(ha);K=new l(m*a);W=B(c,"STRIPBYTECOUNTS");Z=B(c,"ROWSPERSTRIP")[0];ia=B(c,"COMPRESSION")?B(c,"COMPRESSION")[0]:1;aa=Z;if(0===T%8)for(c=0;c<I.length;c++){ja=c*Z*va*a;aa=(c+1)*Z>ya?ya-c*Z:Z;if("u8"===ha||"s8"===ha||k)8===ia||32946===ia?(Y=new Uint8Array(f,I[c],W[c]),Y=new H.Zlib(Y),ca=Y.getBytes(),da=new ArrayBuffer(ca.length),Y=new Uint8Array(da),Y.set(ca),Y.length!==aa*va*a*T/8&&console.log("strip byte counts is different than expected")):
6===ia?(Y=new Uint8Array(f,I[c],W[c]),da=new v.Jpg,da.parse(Y),aa=da.getData(da.width,da.height,!0),da=new ArrayBuffer(aa.length),Y=new Uint8Array(da),Y.set(aa)):1===ia&&(W[c]!==aa*va*a*T/8&&console.log("strip byte counts is different than expected"),da=f.slice(I[c],I[c]+W[c]));else switch(6===ia||8===ia||32946===ia?(Y=new Uint8Array(f,I[c],W[c]),Y=new H.Zlib(Y),Y=Y.getBytes(),da=new ArrayBuffer(Y.length),Q=new Uint8Array(da),Y.length!==aa*va*a*T/8&&console.log("strip byte counts is different than expected")):
1===ia&&(W[c]!==aa*va*a*T/8&&console.log("strip byte counts is different than expected"),da=new ArrayBuffer(W[c]),Y=new Uint8Array(f,I[c],W[c]),Q=new Uint8Array(da)),ha){case "u16":case "s16":for(aa=0;aa<Y.length;aa+=2)Q[aa]=Y[aa+1],Q[aa+1]=Y[aa];break;case "u32":case "s32":case "f32":for(aa=0;aa<Y.length;aa+=4)Q[aa]=Y[aa+3],Q[aa+1]=Y[aa+2],Q[aa+2]=Y[aa+1],Q[aa+3]=Y[aa]}aa=new l(da);K.set(aa,ja)}Y=[];if(1===a)Y.push(K);else for(c=0;c<a;c++){Q=new l(m);for(f=0;f<m;f++)Q[f]=K[f*a+c];Y.push(Q)}c={width:va,
height:ya,pixelType:ha,pixels:Y}}if(null!==b){c.mask=new Uint8Array(c.width*c.height);if(1E24<Math.abs(b))for(f=0;f<c.width*c.height;f++)c.mask[f]=1E-6>Math.abs((c.pixels[0][f]-b)/b)?0:1;else for(f=0;f<c.width*c.height;f++)c.mask[f]=c.pixels[0][f]===b?0:1;c.noDataValue=b}return c};R.decodeTileOrStrip=function(f,a){const {headerInfo:q,ifd:C}=a;var c=g(f,q.littleEndian,C,a.offset||0,a.size||f.byteLength);const {pixelType:b,isBSQ:k,planes:m}=q;var l=L(b);f=c.length/m;const K=[];for(var F=0;F<m;F++){var G=
new l(f);if(k)G=c.slice(f*F,f*(F+1));else for(var N=0;N<f;N++)G[N]=c[N*m+F];K.push(G)}c=h(C,"TILEWIDTH");l=h(C,"TILELENGTH");G=q.noData?q.noData[0]:null;F=(N=q.metadata?q.metadata.statistics:null)?N.map(Q=>Q.min):null;N=N?N.map(Q=>Q.max):null;let P;if(null!=G)if(P=new Uint8Array(f),1E24<Math.abs(G))for(a=0;a<f;a++)P[a]=1E-6>Math.abs((K[0][a]-G)/G)?0:1;else for(a=0;a<f;a++)P[a]=K[0][a]===G?0:1;else F&&N&&a.applyMinMaxConstraint&&(P=r(K,F,N));return{pixelType:b,width:c,height:l,pixels:K,mask:P,noDataValue:G}};
R.getImageInfo=e;R.parseFieldValues=n;R.parseHeader=t;R.parseIFD=x;R.parseSignature=y;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(R){R.bytesToUTF8=function(H,v){let U=0,A="",O=0,E=0;const J=H.length;for(;U<J;)if(E=H[U++],O=E>>4,8>O?O=1:15===O?(O=4,E=(E&7)<<18|(H[U++]&63)<<12|(H[U++]&63)<<6|H[U++]&63):14===O?(O=3,E=(E&15)<<12|(H[U++]&63)<<6|H[U++]&63):(O=2,E=(E&31)<<6|H[U++]&63),0!==E||v)A+=String.fromCharCode(E);
return A};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(R){function H(O,E,J,L=!0){if(0!==E%4||0!==J%4){var M=new ArrayBuffer(4*Math.ceil(J/4));M=new Uint8Array(M);O=new Uint8Array(O,E,J);if(L)for(L=0;L<M.length;L+=4)M[L]=O[L+3],M[L+1]=O[L+2],M[L+2]=O[L+1],M[L+3]=O[L];else M.set(O);return new Uint32Array(M.buffer)}if(L){L=new Uint8Array(O,E,J);M=new Uint8Array(L.length);for(O=0;O<M.length;O+=4)M[O]=L[O+3],M[O+1]=L[O+
2],M[O+2]=L[O+1],M[O+3]=L[O];return new Uint32Array(M.buffer)}return new Uint32Array(O,E,J/4)}function v(){const O=[];for(let E=0;257>=E;E++)O[E]=[E];return O}function U(O,E){for(let J=0;J<E.length;J++)O.push(E[J])}const A=new Set;A.add(511);A.add(1023);A.add(2047);A.add(4095);A.add(8191);R.decode=function(O,E,J,L=!0){O=H(O,E,J,L);E=9;L=v();let M=32,B=L.length,h=[],d=1,n=O[0],e=0;const t=O.length;J=8*(4*t-J);const w=[];for(;null!=n;){if(M>=E)M-=E,e=n>>>32-E,n<<=E;else{e=n>>>32-M;n=O[d++];var u=E-
M;M=32-u;e=(e<<u)+(n>>>M);n<<=u}if(257===e)break;if(256===e)E=9,L=v(),B=L.length,h=[];else{u=L[e];if(null==u){if(e>L.length)throw"data integrity issue: code does not exist on code page";h.push(h[0]);L[B++]=h.slice();U(w,h)}else U(w,u),h.push(u[0]),1<h.length&&(L[B++]=h.slice()),h=u.slice();A.has(B)&&E++;0===M&&(n=O[d++],M=32);if(d>t||d===t&&M<=J)break}}return new Uint8Array(w)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const R=
(()=>{const A=[];A[254]="NEWSUBFILETYPE";A[255]="SUBFILETYPE";A[256]="IMAGEWIDTH";A[257]="IMAGELENGTH";A[258]="BITSPERSAMPLE";A[259]="COMPRESSION";A[262]="PHOTOMETRICINTERPRETATION";A[263]="THRESHHOLDING";A[264]="CELLWIDTH";A[265]="CELLLENGTH";A[266]="FILLORDER";A[269]="DOCUMENTNAME";A[270]="IMAGEDESCRIPTION";A[271]="MAKE";A[272]="MODEL";A[273]="STRIPOFFSETS";A[274]="ORIENTATION";A[277]="SAMPLESPERPIXEL";A[278]="ROWSPERSTRIP";A[279]="STRIPBYTECOUNTS";A[280]="MINSAMPLEVALUE";A[281]="MAXSAMPLEVALUE";
A[282]="XRESOLUTION";A[283]="YRESOLUTION";A[284]="PLANARCONFIGURATION";A[285]="PAGENAME";A[286]="XPOSITION";A[287]="YPOSITION";A[288]="FREEOFFSETS";A[289]="FREEBYTECOUNTS";A[290]="GRAYRESPONSEUNIT";A[291]="GRAYRESPONSECURVE";A[292]="T4OPTIONS";A[293]="T6OPTIONS";A[296]="RESOLUTIONUNIT";A[297]="PAGENUMBER";A[300]="COLORRESPONSEUNIT";A[301]="TRANSFERFUNCTION";A[305]="SOFTWARE";A[306]="DATETIME";A[315]="ARTIST";A[316]="HOSTCOMPUTER";A[317]="PREDICTOR";A[318]="WHITEPOINT";A[319]="PRIMARYCHROMATICITIES";
A[320]="COLORMAP";A[321]="HALFTONEHINTS";A[322]="TILEWIDTH";A[323]="TILELENGTH";A[324]="TILEOFFSETS";A[325]="TILEBYTECOUNTS";A[326]="BADFAXLINES";A[327]="CLEANFAXDATA";A[328]="CONSECUTIVEBADFAXLINES";A[330]="SUBIFD";A[332]="INKSET";A[333]="INKNAMES";A[334]="NUMBEROFINKS";A[336]="DOTRANGE";A[337]="TARGETPRINTER";A[338]="EXTRASAMPLES";A[339]="SAMPLEFORMAT";A[340]="SMINSAMPLEVALUE";A[341]="SMAXSAMPLEVALUE";A[342]="TRANSFERRANGE";A[347]="JPEGTABLES";A[512]="JPEGPROC";A[513]="JPEGIFOFFSET";A[514]="JPEGIFBYTECOUNT";
A[515]="JPEGRESTARTINTERVAL";A[517]="JPEGLOSSLESSPREDICTORS";A[518]="JPEGPOINTTRANSFORM";A[519]="JPEGQTABLES";A[520]="JPEGDCTABLES";A[521]="JPEGACTABLES";A[529]="YCBCRCOEFFICIENTS";A[530]="YCBCRSUBSAMPLING";A[531]="YCBCRPOSITIONING";A[532]="REFERENCEBLACKWHITE";A[700]="XMP";A[33550]="GEOPIXELSCALE";A[33922]="GEOTIEPOINTS";A[33432]="COPYRIGHT";A[42112]="GDAL_METADATA";A[42113]="GDAL_NODATA";A[50844]="RPCCOEFFICIENT";A[34264]="GEOTRANSMATRIX";A[34735]="GEOKEYDIRECTORY";A[34736]="GEODOUBLEPARAMS";A[34737]=
"GEOASCIIPARAMS";A[34665]="EXIFIFD";A[34853]="GPSIFD";A[40965]="INTEROPERABILITYIFD";return A})(),H=(()=>{const A=[].concat(R);A[36864]="ExifVersion";A[40960]="FlashpixVersion";A[40961]="ColorSpace";A[42240]="Gamma";A[37121]="ComponentsConfiguration";A[37122]="CompressedBitsPerPixel";A[40962]="PixelXDimension";A[40963]="PixelYDimension";A[37500]="MakerNote";A[37510]="UserComment";A[40964]="RelatedSoundFile";A[36867]="DateTimeOriginal";A[36868]="DateTimeDigitized";A[36880]="OffsetTime";A[36881]="OffsetTimeOriginal";
A[36882]="OffsetTimeDigitized";A[37520]="SubSecTime";A[37521]="SubSecTimeOriginal";A[37522]="SubSecTimeDigitized";A[37888]="Temperature";A[37889]="Humidity";A[37890]="Pressure";A[37891]="WaterDepth";A[37892]="Acceleration";A[37893]="CameraElevationAngle";A[42016]="ImageUniqueID";A[42032]="CameraOwnerName";A[42033]="BodySerialNumber";A[42034]="LensSpecification";A[42035]="LensMake";A[42036]="LensModel";A[42037]="LensSerialNumber";A[33434]="ExposureTime";A[33437]="FNumber";A[34850]="ExposureProgram";
A[34852]="SpectralSensitivity";A[34855]="PhotographicSensitivity";A[34856]="OECF";A[34864]="SensitivityType";A[34865]="StandardOutputSensitivity";A[34866]="RecommendedExposureIndex";A[34867]="ISOSpeed";A[34868]="ISOSpeedLatitudeyyy";A[34869]="ISOSpeedLatitudezzz";A[37377]="ShutterSpeedValue";A[37378]="ApertureValue";A[37379]="BrightnessValue";A[37380]="ExposureBiasValue";A[37381]="MaxApertureValue";A[37382]="SubjectDistance";A[37383]="MeteringMode";A[37384]="LightSource";A[37385]="Flash";A[37386]=
"FocalLength";A[37396]="SubjectArea";A[41483]="FlashEnergy";A[41484]="SpatialFrequencyResponse";A[41486]="FocalPlaneXResolution";A[41487]="FocalPlaneYResolution";A[41488]="FocalPlaneResolutionUnit";A[41492]="SubjectLocation";A[41493]="ExposureIndex";A[41495]="SensingMethod";A[41728]="FileSource";A[41729]="SceneType";A[41730]="CFAPattern";A[41985]="CustomRendered";A[41986]="ExposureMode";A[41987]="WhiteBalance";A[41988]="DigitalZoomRatio";A[41989]="FocalLengthIn35mmFilm";A[41990]="SceneCaptureType";
A[41991]="GainControl";A[41992]="Contrast";A[41993]="Saturation";A[41994]="Sharpness";A[41995]="DeviceSettingDescription";A[41996]="SubjectDistanceRange";return A})(),v=(()=>{const A=[];A[1024]="GTModelTypeGeoKey";A[1025]="GTRasterTypeGeoKey";A[1026]="GTCitationGeoKey";A[2048]="GeographicTypeGeoKey";A[2049]="GeogCitationGeoKey";A[2050]="GeogGeodeticDatumGeoKey";A[2051]="GeogPrimeMeridianGeoKey";A[2052]="GeogLinearUnitsGeoKey";A[2053]="GeogLinearUnitSizeGeoKey";A[2054]="GeogAngularUnitsGeoKey";A[2055]=
"GeogAngularUnitSizeGeoKey";A[2056]="GeogEllipsoidGeoKey";A[2057]="GeogSemiMajorAxisGeoKey";A[2058]="GeogSemiMinorAxisGeoKey";A[2059]="GeogInvFlatteningGeoKey";A[2061]="GeogPrimeMeridianLongGeoKey";A[2060]="GeogAzimuthUnitsGeoKey";A[3072]="ProjectedCSTypeGeoKey";A[3073]="PCSCitationGeoKey";A[3074]="ProjectionGeoKey";A[3075]="ProjCoordTransGeoKey";A[3076]="ProjLinearUnitsGeoKey";A[3077]="ProjLinearUnitSizeGeoKey";A[3078]="ProjStdParallel1GeoKey";A[3079]="ProjStdParallel2GeoKey";A[3080]="ProjNatOriginLongGeoKey";
A[3081]="ProjNatOriginLatGeoKey";A[3082]="ProjFalseEastingGeoKey";A[3083]="ProjFalseNorthingGeoKey";A[3084]="ProjFalseOriginLongGeoKey";A[3085]="ProjFalseOriginLatGeoKey";A[3086]="ProjFalseOriginEastingGeoKey";A[3087]="ProjFalseOriginNorthingGeoKey";A[3088]="ProjCenterLongGeoKey";A[3090]="ProjCenterEastingGeoKey";A[3091]="ProjCenterNorthingGeoKey";A[3092]="ProjScaleAtNatOriginGeoKey";A[3093]="ProjScaleAtCenterGeoKey";A[3094]="ProjAzimuthAngleGeoKey";A[3095]="ProjStraightVertPoleLongGeoKey";A[4096]=
"VerticalCSTypeGeoKey";A[4097]="VerticalCitationGeoKey";A[4098]="VerticalDatumGeoKey";A[4099]="VerticalUnitsGeoKey";return A})(),U=new Map;U.set("EXIFIFD",H);U.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:R,ifdTags:U,GEO_KEYS:v,getTagName:function(A,O){O=(O||R)[A];void 0===O&&(O="unknown"+String(A));return O}}})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../core/maybe ../../Color ../../tasks/support/MultipartColorRamp ../../core/unitUtils ./ClassBreakInfo ../ClassBreaksRenderer ./colorRampUtils ../RasterColormapRenderer ../RasterShadedReliefRenderer ../RasterStretchRenderer ./UniqueValueInfo ../UniqueValueRenderer ../VectorFieldRenderer ../../rasterRenderers ../../layers/support/RasterInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u){function y(F,G){var N,P,Q,I;F=x(F,null==G?void 0:G.variableName);const {bandCount:T}=F;let {bandIds:W,stretchType:Y}=G||{};null!=(N=W)&&N.some(aa=>aa>=T)&&(W=null);let Z=H.unwrap(F.statistics),ca=H.unwrap(F.histograms);if(1<T){var ba;W=null!=(ba=W)&&ba.length?W:p(F);Z=null==Z?null:W.map(aa=>Z[aa]);ca=null==ca?null:W.map(aa=>ca[aa])}else W=[0];null==Y&&(Y=r(F));G=!1;switch(Y){case "none":G=!1;break;case "percent-clip":G=!(null!=(P=ca)&&P.length);break;
default:G=!(null!=(Q=Z)&&Q.length)}F=1===(null==(I=W)?void 0:I.length)&&"scientific"===F.dataType?l:null;I=new B({stretchType:Y,dynamicRangeAdjustment:G,colorRamp:F,outputMin:0,outputMax:255,gamma:1===W.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===Y?I.maxPercent=I.minPercent=.25:"standard-deviation"===Y&&(I.numberOfStandardDeviations=2);if(!G)if("percent-clip"===Y)I.histograms=ca;else if("min-max"===Y||"standard-deviation"===Y)I.statistics=Z;return I}function x(F,G){if(null==G)return F;let N=
H.unwrap(F.statistics),P=H.unwrap(F.histograms);const {multidimensionalInfo:Q}=F;if(G&&H.isSome(Q)){const {statistics:I,histograms:T}=Q.variables.find(W=>W.name===G);null!=I&&I.length&&(N=I);null!=T&&T.length&&(P=T)}return t.fromJSON({...F.toJSON(),statistics:N,histograms:P})}function p(F){const G=F.bandCount;if(1===G)return null;if(2===G)return[0];F=F.keyProperties&&F.keyProperties.BandProperties;let N;if(F&&F.length===G){const {red:P,green:Q,blue:I,nir:T}=g(F);null!=P&&null!=Q&&null!=I?N=[P,Q,I]:
null!=T&&null!=P&&null!=Q&&(N=[T,P,Q])}!N&&3<=G&&(N=[0,1,2]);return N}function g(F){const G={};for(let I=0;I<F.length;I++){var N,P=F[I],Q=null==(N=P.BandName)?void 0:N.toLowerCase();"red"===Q?G.red=I:"green"===Q?G.green=I:"blue"===Q?G.blue=I:"nearinfrared"===Q||"nearinfrared_1"===Q||"nir"===Q?G.nir=I:P.WavelengthMax&&P.WavelengthMin&&(Q=P.WavelengthMin,P=P.WavelengthMax,null==G.blue&&410<=Q&&480>=Q&&480<=P&&540>=P?G.blue=I:null==G.green&&490<=Q&&560>=Q&&560<=P&&610>=P?G.green=I:null==G.red&&595<=
Q&&670>=Q&&660<=P&&730>=P?G.red=I:null==G.nir&&700<=Q&&860>=Q&&800<=P&&950>=P&&(G.nir=I))}return G}function r(F){let G="percent-clip";const {pixelType:N,dataType:P,histograms:Q,statistics:I}=F;"u8"!==N||"processed"!==P&&H.isSome(Q)&&H.isSome(I)?"u8"===N||"elevation"===P||"scientific"===P?G="min-max":H.isSome(Q)?G="percent-clip":H.isSome(I)&&(G=G="min-max"):G="none";return G}function z(F,G){if(!q(F,G))return null;({attributeTable:F}=F);const N=f(F,G),P=a(F,"red"),Q=a(F,"green"),I=a(F,"blue"),T=[],
W=new Set,Y=!!(P&&Q&&I);F.features.forEach(Z=>{const ca=Z.attributes[N.name];W.has(Z.attributes[N.name])||null==ca||(W.add(ca),T.push(new h({value:Z.attributes[N.name],label:Z.attributes[N.name],symbol:{type:"simple-fill",style:"solid",outline:null,color:Y?new v([Z.attributes[P.name],Z.attributes[Q.name],Z.attributes[I.name],1]):new v([0,0,0,0])}})))});if(!Y){const Z=J.convertColorRampToColormap(K,T.length);T.forEach((ca,ba)=>ca.symbol.color=new v(Z[ba].slice(1,4)))}return new d({field:N.name,uniqueValueInfos:T})}
function f(F,G){let N=F.fields.find(P=>"string"===P.type&&(G===P.name.toLowerCase()||-1<P.name.toLowerCase().indexOf("class")));N||(N=F.fields.find(P=>"string"===P.type))||(N=a(F,"value"));return N}function a(F,G){return F.fields.find(N=>N.name.toLowerCase()===G)}function q(F,G){const {attributeTable:N,bandCount:P}=F;return!H.isSome(N)||1<P||G&&null==N.fields.find(Q=>Q.name.toLowerCase()===G.toLowerCase())?!1:!0}function C(F){const {bandCount:G,colormap:N}=F;return H.isSome(N)&&N.length&&1===G}function c(F){if(!C(F))return null;
let G;const {attributeTable:N,colormap:P}=F;if(H.isSome(N)){const Q=a(N,"value"),I=f(N);"string"===I.type&&(G={},N.features.forEach(T=>{T=T.attributes;G[T[Q.name]]=I?T[I.name]:T[Q.name]}))}return L.createFromColormap(H.unwrap(P),G)}function b(F){return"elevation"===F.dataType}function k(F){const {attributeTable:G,bandCount:N}=F;return 1===N&&(H.isSome(G)||H.isSome(F.histograms))}function m(F){({dataType:F}=F);return"vector-uv"===F||"vector-magdir"===F}const l=U.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,
0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),K=U.fromJSON(J.PREDEFINED_JSON_COLOR_RAMPS[0]);R.createClassBreaksRenderer=function(F,G){F=x(F,null==G?void 0:G.variableName);const {attributeTable:N}=F;if(!k(F))return null;const P=H.isSome(F.histograms)?F.histograms[0]:null,Q=(null==G?void 0:G.numClasses)||4;let I=(null==G?void 0:G.field)||"value";const T=[];if(H.isSome(N)){const Y=N.fields.find(aa=>"count"===aa.name.toLowerCase()),
Z=N.fields.find(aa=>aa.name.toLowerCase()===I.toLowerCase());I=Z.name;const ca=N.features.length;let ba=0;N.features.forEach(aa=>ba+=aa.attributes[Y.name]/ca);N.features.forEach(aa=>{const ja=aa.attributes[Z.name];aa=aa.attributes[Y.name];if(0<aa){aa=Math.max(1,Math.round(aa/ca/ba*1E3));for(let ia=0;ia<aa;ia++)T.push(ja)}})}else{({pixelType:F}=F);const Y=(P.max-P.min)/P.size,Z=(F=-1<F.indexOf("s")||-1<F.indexOf("u"))&&1===Y?Math.floor(P.min+.5):P.min,ca=F&&1===Y?Math.floor(P.max-.5):P.max,ba=P.size;
let aa=0;P.counts.forEach(ja=>aa+=ja/ba);P.counts.forEach((ja,ia)=>{if(0<ja){ja=Math.max(1,Math.round(ja/ba/aa*1E3));ia=0===ia?Z:ia===ba-1?ca:P.min+Y*(ia+.5);for(let da=0;da<ja;da++)T.push(ia)}})}F=u.createGenerateRendererClassBreaks({values:T,normalizationTotal:null,definition:new w({classificationMethod:(null==G?void 0:G.classificationMethod)||"equal-interval",breakCount:Q})});let W=null==G?void 0:G.colors;W||(W=J.convertColorRampToColormap((null==G?void 0:G.colorRamp)||l,Q,!0).map(Y=>Y.slice(1)));
G=F.classBreaks.map((Y,Z)=>new O({minValue:Y.minValue,maxValue:Y.maxValue,label:Y.label,symbol:{type:"simple-fill",color:W[Z]}}));return new E({field:I,classBreakInfos:G})};R.createColormapRenderer=c;R.createDefaultRenderer=function(F,G){const {attributeTable:N,colormap:P,dataType:Q}=F;if("vector-uv"===Q||"vector-magdir"===Q)return new n;if(H.isSome(P)){var I=c(F);if(H.isSome(I))return I}return H.isSome(N)&&(I=z(F),H.isSome(I))?I:y(F,G)};R.createShadedReliefRenderer=function(F,G){var N;if(!b(F))return null;
({extent:F}=F);F=F.width*A.getMetersPerUnitForSR(F.spatialReference);G=null!=(N=G)?N:"multi-directional";return new M({hillshadeType:G,scalingType:5E6<F?"adjusted":"none"})};R.createStretchRenderer=y;R.createUVRenderer=z;R.getClassField=f;R.getDefaultBandCombination=p;R.getDefaultInterpolation=function(F,G,N){const P=["nearest","bilinear","cubic","majority"].find(Q=>Q===(null==N?void 0:N.toLowerCase()));return"Map"===G?null!=P?P:"bilinear":"thematic"===F.dataType||F.attributeTable||F.colormap?"nearest"===
P||"majority"===P?P:"nearest":null!=P?P:"bilinear"};R.getSupportedRendererTypes=function(F){const G=["raster-stretch"];C(F)&&G.push("raster-colormap");q(F)&&G.push("unique-value");k(F)&&G.push("class-breaks");b(F)&&G.push("raster-shaded-relief");m(F)&&G.push("vector-field");return G};R.getWellKnownBandIndexes=g;R.isClassBreaksSupported=k;R.isColormapRendererSupported=C;R.isShadedReliefRendererSupported=b;R.isUVRendererSupported=q;R.isVectorFieldRendererSupported=m;Object.defineProperty(R,"__esModule",
{value:!0})})},"esri/tasks/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ClassificationDefinition".split(" "),function(R,H,v,U,A,O,E,J,L,M,B,h){v=new E.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});E=new E.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});h=function(d){function n(){var e=d.apply(this,arguments)||this;e.breakCount=null;e.classificationField=null;e.classificationMethod=null;e.normalizationField=null;e.normalizationType=null;e.type="class-breaks-definition";return e}
R._inheritsLoose(n,d);R._createClass(n,[{key:"standardDeviationInterval",set:function(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}}]);return n}(h);H.__decorate([O.property({json:{write:!0}})],h.prototype,"breakCount",void 0);H.__decorate([O.property({json:{write:!0}})],h.prototype,"classificationField",void 0);H.__decorate([O.property({type:String,json:{read:v.read,write:v.write}})],h.prototype,"classificationMethod",void 0);H.__decorate([O.property({json:{write:!0}})],
h.prototype,"normalizationField",void 0);H.__decorate([O.property({json:{read:E.read,write:E.write}})],h.prototype,"normalizationType",void 0);H.__decorate([O.property({value:null,json:{write:!0}})],h.prototype,"standardDeviationInterval",null);H.__decorate([O.property()],h.prototype,"type",void 0);return h=H.__decorate([J.subclass("esri.tasks.support.ClassBreaksDefinition")],h)})},"esri/tasks/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols/Symbol ./colorRamps".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n){v=new E.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});h=function(e){function t(){var w=e.apply(this,arguments)||this;w.baseSymbol=null;w.colorRamp=null;w.type=null;return w}R._inheritsLoose(t,e);return t}(h.JSONSupport);H.__decorate([O.property({type:d,json:{write:!0}})],h.prototype,"baseSymbol",void 0);H.__decorate([O.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],h.prototype,"colorRamp",void 0);
H.__decorate([O.property({json:{read:v.read,write:v.write}})],h.prototype,"type",void 0);return h=H.__decorate([J.subclass("esri.tasks.support.ClassificationDefinition")],h)})},"esri/tasks/support/generateRendererUtils":function(){define(["exports"],function(R){function H(B){const {classificationMethod:h,breakCount:d,normalizationType:n}=B.definition,e=[];var t=B.values;if(0===t.length)return[];t=t.sort((g,r)=>g-r);var w=t[0];B=t[t.length-1];if("equal-interval"===h)if(t.length>=d){t=(B-w)/d;var u=
w;for(var y=1;y<d;y++){var x=Number((w+y*t).toFixed(6));e.push({minValue:u,maxValue:x,label:v(u,x,n)});u=x}e.push({minValue:u,maxValue:B,label:v(u,B,n)})}else t.forEach(g=>{e.push({minValue:g,maxValue:g,label:v(g,g,n)})});else if("natural-breaks"===h){t=U(t);u=A(t.uniqueValues,t.valueFrequency,d);for(y=1;y<d;y++)t.uniqueValues.length>y&&(x=Number(t.uniqueValues[u[y]].toFixed(6)),e.push({minValue:w,maxValue:x,label:v(w,x,n)}),w=x);e.push({minValue:w,maxValue:B,label:v(w,B,n)})}else if("quantile"===
h)if(t.length>=d&&w!==B){u=Math.ceil(t.length/d);y=0;for(x=1;x<d;x++){var p=u+y-1;p>t.length&&(p=t.length-1);0>p&&(p=0);e.push({minValue:w,maxValue:t[p],label:v(w,t[p],n)});w=t[p];y+=u;u=Math.ceil((t.length-y)/(d-x))}e.push({minValue:w,maxValue:B,label:v(w,B,n)})}else for(B=-1,w=0;w<t.length;w++)u=t[w],u!==B&&(B=u,e.push({minValue:B,maxValue:u,label:v(B,u,n)}),B=u);else if("standard-deviation"===h)if(u=J(t),y=L(t,u),0===y)e.push({minValue:t[0],maxValue:t[0],label:v(t[0],t[0],n)});else{t=E(w,B,d,u,
y)*y;y=0;for(x=d;1<=x;x--)p=Number((u-(x-.5)*t).toFixed(6)),e.push({minValue:w,maxValue:p,label:v(w,p,n)}),w=p,y++;x=Number((u+.5*t).toFixed(6));e.push({minValue:w,maxValue:x,label:v(w,x,n)});w=x;y++;for(p=1;p<=d;p++)x=y===2*d?B:Number((u+(p+.5)*t).toFixed(6)),e.push({minValue:w,maxValue:x,label:v(w,x,n)}),w=x,y++}return e}function v(B,h,d){let n=null;return n=B===h?d&&"percent-of-total"===d?B+"%":B.toString():d&&"percent-of-total"===d?B+"% - "+h+"%":B+" - "+h}function U(B){const h=[],d=[];let n=
Number.MIN_VALUE,e=1,t=-1;for(let w=0;w<B.length;w++){const u=B[w];u===n?(e++,d[t]=e):null!==u&&(h.push(u),n=u,e=1,d.push(e),t++)}return{uniqueValues:h,valueFrequency:d}}function A(B,h,d){var n=B.length;const e=[];d>n&&(d=n);for(var t=0;t<d;t++)e.push(Math.round(t*n/d-1));e.push(n-1);t=O(e,B,h,d);{n=t.mean;t=t.sdcm;var w=d,u=0,y=0;let p=0,g=0,r=!0;for(let z=0;2>z&&r;z++){0===z&&(r=!1);for(var x=0;x<w-1;x++)for(;e[x+1]+1!==e[x+2];)if(e[x+1]+=1,u=M(x,e,B,h),p=u.sbMean,u=u.sbSdcm,y=M(x+1,e,B,h),g=y.sbMean,
y=y.sbSdcm,u+y<t[x]+t[x+1])t[x]=u,t[x+1]=y,n[x]=p,n[x+1]=g,r=!0;else{--e[x+1];break}for(x=w-1;0<x;x--)for(;e[x]!==e[x-1]+1;)if(--e[x],u=M(x-1,e,B,h),p=u.sbMean,u=u.sbSdcm,y=M(x,e,B,h),g=y.sbMean,y=y.sbSdcm,u+y<t[x-1]+t[x])t[x-1]=u,t[x]=y,n[x-1]=p,n[x]=g,r=!0;else{e[x]+=1;break}}n=r}n&&(t=O(e,B,h,d));return e}function O(B,h,d,n){let e=[];var t=[],w=[];let u=0;const y=[],x=[];for(var p=0;p<n;p++){var g=M(p,B,h,d);y.push(g.sbMean);x.push(g.sbSdcm);u+=x[p]}g=u;for(p=!0;p||u<g;){p=!1;e=[];for(t=0;t<n;t++)e.push(B[t]);
for(w=0;w<n;w++)for(g=B[w]+1;g<=B[w+1];g++)if(t=h[g],0<w&&g!==B[w+1]&&Math.abs(t-y[w])>Math.abs(t-y[w-1]))B[w]=g;else if(w<n-1&&B[w]!==g-1&&Math.abs(t-y[w])>Math.abs(t-y[w+1])){B[w+1]=g-1;break}g=u;u=0;t=[];w=[];for(let r=0;r<n;r++){t.push(y[r]);w.push(x[r]);const z=M(r,B,h,d);y[r]=z.sbMean;x[r]=z.sbSdcm;u+=x[r]}}if(u>g){for(h=0;h<n;h++)B[h]=e[h],y[h]=t[h],x[h]=w[h];u=g}return{mean:y,sdcm:x}}function E(B,h,d,n,e){B=Math.max(n-B,h-n)/e/d;return 1<=B?1:.5<=B?.5:.25}function J(B){let h=0;for(let d=0;d<
B.length;d++)h+=B[d];return h/=B.length}function L(B,h){let d=0;for(let n=0;n<B.length;n++){const e=B[n];d+=(e-h)*(e-h)}d/=B.length;return Math.sqrt(d)}function M(B,h,d,n){var e=0,t=0;for(var w=h[B]+1;w<=h[B+1];w++){const u=n[w];e+=d[w]*u;t+=u}0>=t&&console.log("Exception in Natural Breaks calculation");e/=t;t=0;for(w=h[B]+1;w<=h[B+1];w++)t+=n[w]*Math.pow(d[w]-e,2);return{sbMean:e,sbSdcm:t}}R.createGenerateRendererClassBreaks=function(B){const {normalizationTotal:h}=B;return{classBreaks:H(B),normalizationTotal:h}};
R.createGenerateRendererUniqueValues=function(B){B=U(B);const h=[],d=B.uniqueValues.length;for(let n=0;n<d;n++){const e=B.uniqueValues[n];h.push({value:e,count:B.valueFrequency[n],label:e.toString()})}return{uniqueValues:h}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u){function y(r,z){const {attributeTable:f,bandCount:a}=r;return!U.isSome(f)||1<a||z&&null==f.fields.find(q=>q.name.toLowerCase()===z.toLowerCase())?!1:!0}function x(r){const {bandCount:z,colormap:f}=r;return U.isSome(f)&&f.length&&1===z}const p=A.getLogger("esri.renderers.support.RasterSymbolizer"),g={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};v=function(r){function z(a){return r.call(this,a)||this}R._inheritsLoose(z,r);var f=z.prototype;f.bind=function(){const {rendererJSON:a}=this;if(!a)return!1;this.lookup={rendererJSON:{}};let q;switch(a.type){case "uniqueValue":q=this._updateUVRenderer(a);break;case "rasterColormap":q=this._updateColormapRenderer(a);break;case "rasterStretch":q=this._updateStretchRenderer(a);break;case "classBreaks":q=this._updateClassBreaksRenderer(a);break;case "rasterShadedRelief":q=
this._updateShadedReliefRenderer(a)}return q};f.symbolize=function(a){let q=a&&a.pixelBlock;if(!this.isValidPixelBlock(q))return q;if(a.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(q,a.simpleStretchParams);try{3<q.pixels.length&&(q=w.extractBands(q,[0,1,2]));let C;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":C=this._symbolize_colormap(q);break;case "classBreaks":C=this._symbolize_classBreaks(q);break;case "rasterStretch":C=this._symbolize_stretch(q,
a.bandIds);break;case "rasterShadedRelief":({extent:a}=a),C=this._symbolize_shadedRelief(q,{isGCS:a.spatialReference.isGeographic,resolution:{x:(a.xmax-a.xmin)/q.width,y:(a.ymax-a.ymin)/q.height}})}return C}catch(C){return p.error("symbolize",C.message),q}};f.simpleStretch=function(a,q){if(!this.isValidPixelBlock(a))return a;try{return 3<a.pixels.length&&(a=w.extractBands(a,[0,1,2])),w.stretch(a,q)}catch(C){return p.error("symbolize",C.message),a}};f.generateWebGLParameters=function(a){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){const {indexedColormap:k,offset:m}=this.lookup.colormapLut;return{colormap:k,colormapOffset:m,type:"lut"}}const {pixelBlock:q,isGCS:C,resolution:c,bandIds:b}=a;({rendererJSON:a}=this);return"rasterStretch"===a.type?this.generateStretchWebGLParams(q,a,b):"rasterShadedRelief"===a.type?this.generateShadedReliefWebGLParams(a,C,c):null};f._isLUTChanged=function(a){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const q=
this.rendererJSON.colorRamp;if(a)return JSON.stringify(q)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};f._symbolize_colormap=function(a){return this._isLUTChanged()&&!this.bind()?a:w.colorize(a,this.lookup.colormapLut)};f._symbolize_classBreaks=function(a){const q=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?a:q?w.colorize(a,this.lookup.colormapLut):
w.remapColor(a,this.lookup.remapLut)};f._symbolize_stretch=function(a,q){const {pixelType:C,bandCount:c}=this.rasterInfo,b=this.rendererJSON;var k=-1<["u8","u16","s8","s16"].indexOf(C);let m;const {gamma:l,useGamma:K}=b;if(k){var F;if(b.dra)k=this.getStretchCutoff(b,a,q),m=w.createStretchLUT({pixelType:C,...k,gamma:K?l:null});else{if(this._isLUTChanged()&&!this.bind())return a;m=this.lookup?this.lookup.stretchLut:null}if(!m)return a;1<c&&(null==q?void 0:q.length)===a.pixels.length&&(null==(F=m)?void 0:
F.lut.length)===c&&(m={lut:q.map(G=>m.lut[G]),offset:m.offset});q=w.lookupPixels(a,m)}else q=this.getStretchCutoff(b,a,q),q=w.stretch(a,{...q,gamma:K?l:null});if(b.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return a;q=w.colorize(q,this.lookup.colormapLut)}return q};f._symbolize_shadedRelief=function(a,q){var C,c,b=this.rendererJSON;q=u.hillshade(a,{...b,...q});if(!b.colorRamp||this._isLUTChanged(!0)&&!this.bind())return q;b=this.lookup?this.lookup.hsvMap:null;if(!b)return q;const k=null!=
(C=null==(c=U.unwrap(this.rasterInfo.statistics))?void 0:c[0])?C:{min:0,max:8E3};u.tintHillshade(q,a,b,k);return q};f._updateUVRenderer=function(a){const {bandCount:q,attributeTable:C,statistics:c,pixelType:b}=this.rasterInfo,k=a.field1;if(!k)return!1;var m=-1<["u8","s8"].indexOf(b)&&c&&null!=c[0].min&&null!=c[0].max;if(!(y(this.rasterInfo,k)||1===q&&m))return!1;const l=[];if(C){const K=C.fields.filter(F=>"value"===F.name.toLowerCase())[0];if(!K)return!1;C.features.forEach(F=>{var G,N=a.uniqueValueInfos.filter(P=>
String(P.value)===String(F.attributes[k]))[0];(N=null==N?void 0:null==(G=N.symbol)?void 0:G.color)&&l.push([F.attributes[K.name]].concat(N))})}else{if("value"!==k.toLowerCase())return!1;a.uniqueValueInfos.forEach(K=>{var F;const G=null==K?void 0:null==(F=K.symbol)?void 0:F.color;G&&l.push([parseInt(""+K.value,10)].concat(G))})}if(0===l.length)return!1;m=w.createColormapLUT({colormap:l});this.lookup={rendererJSON:a,colormapLut:m};return this.canRenderInWebGL=!0};f._updateColormapRenderer=function(a){if(!x(this.rasterInfo))return!1;
var q=a.colormapInfos.map(C=>[C.value].concat(C.color)).sort((C,c)=>C[0]-c[0]);if(!q||0===q.length)return!1;q=w.createColormapLUT({colormap:q});this.lookup={rendererJSON:a,colormapLut:q};return this.canRenderInWebGL=!0};f._updateShadedReliefRenderer=function(a){if("elevation"!==this.rasterInfo.dataType)return!1;if(a.colorRamp){var q=e.convertColorRampToColormap(a.colorRamp,256,!0);q=w.createColormapLUT({colormap:q});const C=[],c=q.indexedColormap;for(let b=0;b<c.length;b+=4){const k=n.toHSV({r:c[b],
g:c[b+1],b:c[b+2]});C.push([k.h/60,k.s/100,255*k.v/100])}this.lookup={rendererJSON:a,colormapLut:q,hsvMap:C}}else this.lookup=null;return this.canRenderInWebGL=!0};f._updateClassBreaksRenderer=function(a){var q=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),C=a.classBreakInfos;if(null==C||!C.length)return!1;C=C.sort((l,K)=>l.classMaxValue-K.classMaxValue);const c=C[C.length-1];var b=a.minValue;if(!q){q=[];for(var k=0;k<C.length;k++){var m;q.push({value:null!=(m=C[k].classMinValue)?
m:b,mappedColor:C[k].symbol.color});b=C[k].classMaxValue}q.push({value:c.classMaxValue,mappedColor:c.symbol.color});this.lookup={rendererJSON:a,remapLut:q};this.canRenderInWebGL=!1;return!0}m=[];b=a.minValue;for(q=0;q<C.length;q++){for(k=C[q];b<k.classMaxValue;b++)m.push([b].concat(k.symbol.color));b=k.classMaxValue}m.push([c.classMaxValue].concat(c.symbol.color));C=w.createColormapLUT({colormap:m,fillUnspecified:!1});this.lookup={rendererJSON:a,colormapLut:C};return this.canRenderInWebGL=!0};f._updateStretchRenderer=
function(a){if(!("none"===a.stretchType||a.statistics||this.rasterInfo.statistics||a.dra))return!1;var q=a.histograms||this.rasterInfo.histograms;if(!a.dra&&"percentClip"===a.stretchType&&!q)return!1;const {gamma:C,useGamma:c,colorRamp:b}=a;q=this.rasterInfo.pixelType;if(!a.dra&&-1<["u8","u16","s8","s16"].indexOf(q)){const k=this.getStretchCutoff(a);q=w.createStretchLUT({pixelType:q,...k,gamma:c?C:null});this.lookup={rendererJSON:a,stretchLut:q}}b&&(q=e.convertColorRampToColormap(b,256,!0),this.lookup||
(this.lookup={rendererJSON:a}),this.lookup.colormapLut=w.createColormapLUT({colormap:q}),this.lookup.rendererJSON=a);return this.canRenderInWebGL=!0};f.getStretchCutoff=function(a,q,C){var c=a.stretchType;if(a.dra)if("minMax"===c&&q.statistics)var b=q.statistics.map(Q=>[Q.minValue,Q.maxValue,0,0]);else{var k=w.estimateStatisticsHistograms(q);b=k.statistics;k=k.histograms}else{var m;b=0<(null==(m=a.statistics)?void 0:m.length)?a.statistics:U.unwrap(this.rasterInfo.statistics);k=a.histograms||U.unwrap(this.rasterInfo.histograms)}var l=
b||k?(b||k).length:this.rasterInfo.bandCount;m=[];q=[];let K;let F,G,N;b&&!Array.isArray(b[0])&&(b=b.map(Q=>[Q.min,Q.max,Q.avg,Q.stddev]));switch(c){case "none":k=g[this.rasterInfo.pixelType]||g.f32;for(c=0;c<l;c++)m[c]=k[0],q[c]=k[1];break;case "minMax":for(c=0;c<l;c++)m[c]=b[c][0],q[c]=b[c][1];break;case "standardDeviation":for(c=0;c<l;c++)m[c]=b[c][2]-a.numberOfStandardDeviations*b[c][3],q[c]=b[c][2]+a.numberOfStandardDeviations*b[c][3],m[c]<b[c][0]&&(m[c]=b[c][0]),q[c]>b[c][1]&&(q[c]=b[c][1]);
break;case "percentClip":for(c=0;c<k.length;c++){b=k[c];F=new Uint32Array(b.size);var P=b.counts;K=0;l=(b.max-b.min)/b.size;G=-.5===b.min&&1===l?.5:0;for(N=0;N<b.size;N++)K+=P[N],F[N]=K;P=a.minPercent*K/100;for(N=0;N<b.size;N++)if(F[N]>P){m[c]=b.min+l*(N+G);break}P=(1-a.maxPercent/100)*K;for(N=b.size-2;0<=N;N--)if(F[N]<P){q[c]=b.min+l*(N+2-G);break}}break;default:for(c=0;c<l;c++)m[c]=b[c][0],q[c]=b[c][1]}return this.getSelectedBandCutoffs({minCutOff:m,maxCutOff:q,outMax:a.max||255,outMin:a.min||0},
C)};f.getSelectedBandCutoffs=function(a,q){if(null==q||0===q.length)return a;const C=Math.max.apply(null,q),{minCutOff:c,maxCutOff:b,outMin:k,outMax:m}=a;return c.length===q.length||c.length<=C?a:{minCutOff:q.map(l=>c[l]),maxCutOff:q.map(l=>b[l]),outMin:k,outMax:m}};f.generateStretchWebGLParams=function(a,q,C){let c=null,b=null;var k=this.lookup&&this.lookup.colormapLut;q.colorRamp&&k&&(c=k.indexedColormap,b=k.offset);({gamma:k}=q);const m=!!(q.useGamma&&k&&k.some(Q=>1!==Q)),{minCutOff:l,maxCutOff:K,
outMin:F,outMax:G}=this.getStretchCutoff(q,a,C);a&&a.pixels&&2===a.pixels.length&&(a=a.clone(),a.statistics=[a.statistics[0]],a.pixels=[a.pixels[0]]);a=Math.min(3,C&&C.length||a&&a.getPlaneCount()||this.rasterInfo.bandCount);q=new Float32Array(a);C=c||m?1:255;let N;for(N=0;N<a;N++)q[N]=(G-F)/(K[N]-l[N])/C;const P=new Float32Array(a);if(m)for(N=0;N<a;N++)P[N]=1<k[N]?2<k[N]?6.5+Math.pow(k[N]-2,2.5):6.5+100*Math.pow(2-k[N],4):1;return{bandCount:a,outMin:F/C,outMax:G/C,minCutOff:l,maxCutOff:K,factor:q,
useGamma:m,gamma:m?k:[1,1,1],gammaCorrection:m?P:[1,1,1],colormap:c,colormapOffset:b,type:"stretch"}};f.generateShadedReliefWebGLParams=function(a,q,C){var c,b,k;let m=null,l=null;const K=this.lookup&&this.lookup.colormapLut;a.colorRamp&&K&&(m=K.indexedColormap,l=K.offset);q=u.calculateHillshadeParams({...a,isGCS:q,resolution:C});C=null==(c=U.unwrap(this.rasterInfo.statistics))?void 0:c[0];return{...q,minValue:null!=(b=C.min)?b:0,maxValue:null!=(k=C.max)?k:8E3,hillshadeType:"traditional"===a.hillshadeType?
0:1,type:"hillshade",colormap:m,colormapOffset:l}};f.isValidPixelBlock=function(a){return!!(a&&a.pixels&&0<a.pixels.length&&0!==a.validPixelCount)};return z}(d.JSONSupport);H.__decorate([E.property({json:{write:!0}})],v.prototype,"rendererJSON",void 0);H.__decorate([E.property({type:t,json:{write:!0}})],v.prototype,"rasterInfo",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"lookup",void 0);H.__decorate([E.property({})],v.prototype,"canRenderInWebGL",void 0);return v=H.__decorate([L.subclass("esri.renderers.support.RasterSymbolizer")],
v)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(R,H){function v(d,n){d=Math.min(Math.max(d,-100),100);n=Math.min(Math.max(n,-100),100);let e,t;const w=new Uint8Array(256);for(e=0;256>e;e++)0<d&&100>d?t=(200*e-25500+510*n)/(2*(100-d))+128:0>=d&&-100<d?t=(200*e-25500+510*n)*(100+d)/2E4+128:100===d?(t=200*e-25500+256*(100-d)+510*n,t=0<t?255:0):-100===d&&(t=128),w[e]=255<t?255:0>t?0:t;return w}function U(d,n,e,t,w,u,y,x){return{xmin:w<=e*d?
0:w<e*d+d?w-e*d:d,ymin:u<=t*n?0:u<t*n+n?u-t*n:n,xmax:w+y<=e*d?0:w+y<e*d+d?w+y-e*d:d,ymax:u+x<=t*n?0:u+x<t*n+n?u+x-t*n:n}}function A(d,n,e,t){var w=d.filter(N=>h(N))[0];if(null==w)return null;const u=t?t.width:n.width;t=t?t.height:n.height;const y=w.width,x=w.height,p=n.width/y;n=n.height/x;const g=e?e.x:0;e=e?e.y:0;const r=w.pixelType;var z=H.getPixelArrayConstructor(r);const f=w.pixels.length;w=[];let a,q;var C;let c,b,k,m,l,K,F;for(b=0;b<f;b++){q=new z(u*t);for(k=0;k<n;k++)for(m=0;m<p;m++)if(C=
d[k*p+m])for(a=C.pixels[b],F=U(y,x,m,k,g,e,u,t),l=F.ymin;l<F.ymax;l++)for(C=(k*x+l-e)*u+(m*y-g),c=l*y,K=F.xmin;K<F.xmax;K++)q[C+K]=a[c+K];w.push(q)}let G;if(d.some(N=>null==N||N.mask&&0<N.mask.length))for(G=new Uint8Array(u*t),k=0;k<n;k++)for(m=0;m<p;m++)if(z=(C=d[k*p+m])?C.mask:null,F=U(y,x,m,k,g,e,u,t),z)for(l=F.ymin;l<F.ymax;l++)for(C=(k*x+l-e)*u+(m*y-g),c=l*y,K=F.xmin;K<F.xmax;K++)G[C+K]=z[c+K];else if(C)for(l=F.ymin;l<F.ymax;l++)for(C=(k*x+l-e)*u+(m*y-g),c=l*y,K=F.xmin;K<F.xmax;K++)G[C+K]=1;
else for(l=F.ymin;l<F.ymax;l++)for(C=(k*x+l-e)*u+(m*y-g),c=l*y,K=F.xmin;K<F.xmax;K++)G[C+K]=0;d=new H({width:u,height:t,pixels:w,pixelType:r,mask:G});d.updateStatistics();return d}function O(d){if(!h(d))return null;const n=d.clone(),{width:e,height:t,pixels:w,mask:u}=d;var y=w[0];d=n.pixels[0];for(let g=2;g<t-1;g++){const r=new Map;for(var x=g-2;x<g+2;x++)for(var p=0;4>p;p++){const z=x*e+p;L(r,y[z],u?u[z]:1)}d[g*e]=E(r);d[g*e+1]=d[g*e+2]=d[g*e];for(x=3;x<e-1;x++)p=(g-2)*e+x+1,L(r,y[p],u?u[p]:1),p=
(g-1)*e+x+1,L(r,y[p],u?u[p]:1),p=g*e+x+1,L(r,y[p],u?u[p]:1),p=(g+1)*e+x+1,L(r,y[p],u?u[p]:1),p=(g-2)*e+x-3,J(r,y[p],u?u[p]:1),p=(g-1)*e+x-3,J(r,y[p],u?u[p]:1),p=g*e+x-3,J(r,y[p],u?u[p]:1),p=(g+1)*e+x-3,J(r,y[p],u?u[p]:1),d[g*e+x]=E(r);d[g*e+x+1]=d[g*e+x]}for(y=0;y<e;y++)d[y]=d[e+y]=d[2*e+y],d[(t-1)*e+y]=d[(t-2)*e+y];n.updateStatistics();return n}function E(d){if(0===d.size)return 0;let n=0,e=-1,t=0;const w=d.keys();let u=w.next();for(;!u.done;)t=d.get(u.value),t>n&&(e=u.value,n=t),u=w.next();return e}
function J(d,n,e){0!==e&&(e=d.get(n),1===e?d.delete(n):d.set(n,e-1))}function L(d,n,e){0!==e&&d.set(n,d.has(n)?d.get(n)+1:1)}function M(d,n,e){let {x:t,y:w}=n;const {width:u,height:y}=e;if(0===t&&0===w&&y===d.height&&u===d.width)return d;const {width:x,height:p}=d;n=Math.max(0,w);const g=Math.max(0,t),r=Math.min(t+u,x),z=Math.min(w+y,p);if(0>r||0>z||!h(d))return null;t=Math.max(0,-t);w=Math.max(0,-w);const {pixels:f,mask:a}=d;var q=u*y,C=f.length;const c=[];for(var b=0;b<C;b++){var k=f[b],m=H.createEmptyBand(d.pixelType,
q);for(let l=n;l<z;l++){const K=l*x;let F=(l+w-n)*u+t;for(let G=g;G<r;G++)m[F++]=k[K+G]}c.push(m)}q=new Uint8Array(q);for(C=n;C<z;C++)for(b=C*x,k=(C+w-n)*u+t,m=g;m<r;m++)q[k++]=a?a[b+m]:1;d=new H({width:e.width,height:e.height,pixelType:d.pixelType,pixels:c,mask:q});d.updateStatistics();return d}function B(d,n=!0){if(!h(d))return null;const {pixels:e,width:t,height:w,mask:u,pixelType:y}=d;d=[];const x=Math.round(t/2),p=Math.round(w/2),g=w-1,r=t-1;for(var z=0;z<e.length;z++){var f=e[z],a=H.createEmptyBand(y,
x*p),q=0;for(var C=0;C<w;C+=2)for(var c=0;c<t;c+=2){var b=f[C*t+c];if(n){var k=c===r?b:f[C*t+c+1];const m=C===g?b:f[C*t+c+t],l=c===r?m:C===g?k:f[C*t+c+t+1];a[q++]=(b+k+m+l)/4}else a[q++]=b}d.push(a)}z=null;if(u)for(z=new Uint8Array(x*p),f=0,a=0;a<w;a+=2)for(q=0;q<t;q+=2)C=u[a*t+q],n?(c=q===r?C:u[a*t+q+1],b=a===g?C:u[a*t+q+t],k=q===r?b:a===g?c:u[a*t+q+t+1],z[f++]=C*c*b*k?1:0):z[f++]=C;return new H({width:x,height:p,pixelType:y,pixels:d,mask:z})}const h=function(d){return d&&"esri.layers.support.PixelBlock"===
d.declaredClass&&d.pixels&&0<d.pixels.length};R.approximateTransform=function(d,n,e,t,w="nearest"){if(!h(d))return null;"majority"===w&&(d=O(d));const {pixels:u,mask:y,pixelType:x}=d,p=d.width;var g=d.height;d=H.getPixelArrayConstructor(x);var r=u.length;const {width:z,height:f}=n;n=t.cols;var a=t.rows;const q=Math.ceil(z/n),C=Math.ceil(f/a);t=!1;for(var c=0;c<e.length;c+=3)-1===e[c]&&-1===e[c+1]&&-1===e[c+2]&&(t=!0);let b,k,m,l,K,F;const G=new Float32Array(z*f),N=new Float32Array(z*f);c=0;let P,
Q;const I="majority"===w?0:.5;for(let Y=0;Y<C;Y++)for(let Z=0;Z<q;Z++){b=12*(Y*q+Z);w=e[b];k=e[b+1];m=e[b+2];l=e[b+3];K=e[b+4];F=e[b+5];for(var T=0;T<a;T++){c=(Y*a+T)*z+Z*n;Q=(T+.5)/a;for(var W=0;W<T;W++)P=(W+.5)/n,G[c+W]=Math.round((w*P+k*Q+m)*p-I),N[c+W]=Math.round((l*P+K*Q+F)*g-I)}b+=6;w=e[b];k=e[b+1];m=e[b+2];l=e[b+3];K=e[b+4];F=e[b+5];for(T=0;T<a;T++)for(c=(Y*a+T)*z+Z*n,Q=(T+.5)/a,W=T;W<n;W++)P=(W+.5)/n,G[c+W]=Math.round((w*P+k*Q+m)*p-I),N[c+W]=Math.round((l*P+K*Q+F)*g-I)}e=(Y,Z)=>{for(let ca=
0;ca<f;ca++){b=ca*z;for(let ba=0;ba<z;ba++)Y[b]=0>G[b]||0>N[b]?0:Z[G[b]+N[b]*p],b++}};g=[];for(a=0;a<r;a++)n=new d(z*f),e(n,u[a]),g.push(n);d=new H({width:z,height:f,pixelType:x,pixels:g});if(y)d.mask=new Uint8Array(z*f),e(d.mask,y);else if(t)for(d.mask=new Uint8Array(z*f),r=0;r<z*f;r++)d.mask[r]=0>G[r]||0>N[r]?0:1;d.updateStatistics();return d};R.clip=M;R.colorize=function(d,n){if(!h(d)||!n&&(n.indexedColormap||n.indexed2DColormap))return d;const e=d.clone();var t=e.pixels;let w=e.mask;const u=e.width*
e.height;if(1!==t.length)return d;const {indexedColormap:y,indexed2DColormap:x,offset:p,alphaSpecified:g}=n;n=y.length-1;d=0;t=t[0];const r=new Uint8Array(t.length),z=new Uint8Array(t.length),f=new Uint8Array(t.length);let a=0;if(y)if(w)for(d=0;d<u;d++)w[d]&&(a=4*(t[d]-p),a<p||a>n?w[d]=0:(r[d]=y[a],z[d]=y[a+1],f[d]=y[a+2],w[d]=y[a+3]));else{w=new Uint8Array(u);for(d=0;d<u;d++)a=4*(t[d]-p),a<p||a>n?w[d]=0:(r[d]=y[a],z[d]=y[a+1],f[d]=y[a+2],w[d]=y[a+3]);e.mask=w}else if(w)for(d=0;d<u;d++)w[d]&&(n=x[t[d]],
r[d]=n[0],z[d]=n[1],f[d]=n[2],w[d]=n[3]);else{w=new Uint8Array(u);for(d=0;d<u;d++)n=x[t[d]],r[d]=n[0],z[d]=n[1],f[d]=n[2],w[d]=n[3];e.mask=w}e.pixels=[r,z,f];e.statistics=null;e.pixelType="u8";e.maskIsAlpha=g;return e};R.createColormapLUT=function(d){if(d){var n=d.colormap;if(n&&0!==n.length){n=n.sort((g,r)=>g[0]-r[0]);var e=0;0>n[0][0]&&(e=n[0][0]);var t=Math.max(256,n[n.length-1][0]-e+1),w=new Uint8Array(4*t),u=[],y=0,x=0,p=5===n[0].length;if(65536<t)return n.forEach(g=>{u[g[0]-e]=p?g.slice(1):
g.slice(1).concat([255])}),{indexed2DColormap:u,offset:e,alphaSpecified:p};if(d.fillUnspecified)for(d=n[x],y=d[0]-e;y<t;y++)w[4*y]=d[1],w[4*y+1]=d[2],w[4*y+2]=d[3],w[4*y+3]=p?d[4]:255,y===d[0]-e&&(d=x===n.length-1?d:n[++x]);else for(y=0;y<n.length;y++)d=n[y],x=4*(d[0]-e),w[x]=d[1],w[x+1]=d[2],w[x+2]=d[3],w[x+3]=p?d[4]:255;return{indexedColormap:w,offset:e,alphaSpecified:p}}}};R.createContrastBrightnessLUT=v;R.createStretchLUT=function(d){const {minCutOff:n,maxCutOff:e,gamma:t,pixelType:w}=d,u=d.outMin||
0,y=d.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(w))return null;const x=n.length;let p;let g=0;"s8"===w?g=-127:"s16"===w&&(g=-32767);let r=256;-1<["u16","s16"].indexOf(w)&&(r=65536);const z=[],f=y-u;for(p=0;p<x;p++)z[p]=e[p]-n[p];var a=t&&t.length>=x;const q=[];if(a)for(p=0;p<x;p++)q[p]=1<t[p]?2<t[p]?6.5+Math.pow(t[p]-2,2.5):6.5+100*Math.pow(2-t[p],4):1;let C;const c=[];let b,k,m;if(a)for(p=0;p<x;p++){m=[];for(a=0;a<r;a++)b=a+g,C=(b-n[p])/z[p],k=1,1<t[p]&&(k-=Math.pow(1/f,C*q[p])),m[a]=b<
e[p]&&b>n[p]?Math.floor(k*f*Math.pow(C,1/t[p]))+u:b>=e[p]?y:u;c[p]=m}else for(p=0;p<x;p++){m=[];for(a=0;a<r;a++)b=a+g,m[a]=b<=n[p]?u:b>=e[p]?y:Math.floor((b-n[p])/z[p]*f)+u;c[p]=m}if(null!=d.contrastOffset)for(d=v(d.contrastOffset,d.brightnessOffset),p=0;p<x;p++)for(m=c[p],a=0;a<r;a++)m[a]=d[m[a]];return{lut:c,offset:g}};R.estimateStatisticsFromHistograms=function(d){const n=[];for(let u=0;u<d.length;u++){const {min:y,max:x,size:p,counts:g}=d[u];let r=0;var e=0;for(var t=0;t<p;t++)r+=g[t],e+=t*g[t];
e/=r;t=0;for(var w=0;w<p;w++)t+=g[w]*Math.pow(w-e,2);w=(x-y)/p;n.push({min:y,max:x,avg:(e+.5)*w+y,stddev:Math.sqrt(t/(r-1))*w})}return n};R.estimateStatisticsHistograms=function(d){if(!h(d))return null;d.statistics||d.updateStatistics();const {pixels:n,mask:e,pixelType:t,statistics:w}=d;d=d.width*d.height;const u=n.length;let y,x;let p;var g;const r=[],z=[];for(p=0;p<u;p++){var f=new Uint32Array(256);var a=n[p];if("u8"===t)if(y=-.5,x=255.5,e)for(g=0;g<d;g++)e[g]&&f[a[g]]++;else for(g=0;g<d;g++)f[a[g]]++;
else{y=w[p].minValue;x=w[p].maxValue;var q=(x-y)/256;var C=new Uint32Array(257);if(e)for(g=0;g<d;g++)e[g]&&C[Math.floor((a[g]-y)/q)]++;else for(g=0;g<d;g++)C[Math.floor((a[g]-y)/q)]++;for(g=0;255>g;g++)f[g]=C[g];f[255]=C[255]+C[256]}r.push({min:y,max:x,size:256,counts:f});for(g=a=C=q=0;256>g;g++)q+=f[g],C+=g*f[g];C/=q;for(g=0;256>g;g++)a+=f[g]*Math.pow(g-C,2);f=Math.sqrt(a/(q-1));q=(x-y)/256;g=(C+.5)*q+y;f*=q;z.push({min:y,max:x,avg:g,stddev:f})}return{statistics:z,histograms:r}};R.extractBands=function(d,
n){if(!n||!h(d))return d;const e=d.pixels.length;return n&&n.some(t=>t>=e)||1===e&&1===n.length&&0===n[0]||e===n.length&&!n.some((t,w)=>t!==w)?d:new H({pixelType:d.pixelType,width:d.width,height:d.height,mask:d.mask,validPixelCount:d.validPixelCount,maskIsAlpha:d.maskIsAlpha,pixels:n.map(t=>d.pixels[t]),statistics:d.statistics&&n.map(t=>d.statistics[t])})};R.getClipBounds=U;R.lookupPixels=function(d,n){if(!h(d))return null;const {pixels:e,mask:t}=d,w=d.width*d.height,u=e.length;let y=n.lut;({offset:n}=
n);let x,p;y&&1===y[0].length&&(y=e.map(()=>y));const g=[];let r,z,f;if(n)if(null==t)for(x=0;x<u;x++){r=e[x];z=y[x];f=new Uint8Array(w);for(p=0;p<w;p++)f[p]=z[r[p]-n];g.push(f)}else for(x=0;x<u;x++){r=e[x];z=y[x];f=new Uint8Array(w);for(p=0;p<w;p++)t[p]&&(f[p]=z[r[p]-n]);g.push(f)}else if(null==t)for(x=0;x<u;x++){r=e[x];z=y[x];f=new Uint8Array(w);for(p=0;p<w;p++)f[p]=z[r[p]];g.push(f)}else for(x=0;x<u;x++){r=e[x];z=y[x];f=new Uint8Array(w);for(p=0;p<w;p++)t[p]&&(f[p]=z[r[p]]);g.push(f)}d=new H({width:d.width,
height:d.height,pixels:g,mask:t,pixelType:"u8"});d.updateStatistics();return d};R.mosaic=A;R.mosaicPixelData=function(d,n){if(!d||0===d.length)return null;var e=d.filter(z=>z.pixelBlock)[0];if(!e)return null;var t=(e.extent.xmax-e.extent.xmin)/e.pixelBlock.width;const w=(e.extent.ymax-e.extent.ymin)/e.pixelBlock.height,u=.01*Math.min(t,w),y=d.sort((z,f)=>Math.abs(z.extent.ymax-f.extent.ymax)>u?f.extent.ymax-z.extent.ymax:Math.abs(z.extent.xmin-f.extent.xmin)>u?z.extent.xmin-f.extent.xmin:0);var x=
Math.min.apply(null,y.map(z=>z.extent.xmin));const p=Math.min.apply(null,y.map(z=>z.extent.ymin)),g=Math.max.apply(null,y.map(z=>z.extent.xmax)),r=Math.max.apply(null,y.map(z=>z.extent.ymax));d={x:Math.round((n.xmin-x)/t),y:Math.round((r-n.ymax)/w)};x={width:Math.round((g-x)/t),height:Math.round((r-p)/w)};t={width:Math.round((n.xmax-n.xmin)/t),height:Math.round((n.ymax-n.ymin)/w)};if(Math.round(x.width/e.pixelBlock.width)*Math.round(x.height/e.pixelBlock.height)!==y.length||0>d.x||0>d.y||x.width<
t.width||x.height<t.height)return null;e=y.map(z=>z.pixelBlock);e=A(e,x,d,t);return{extent:n,pixelBlock:e}};R.remapColor=function(d,n){if(!h(d))return null;d=d.clone();var {pixels:e}=d;const t=d.width*d.height,w=n.length,u=Math.floor(w/2),y=n[Math.floor(u)];e=e[0];let x,p,g,r,z,f,a=!1;const q=new Uint8Array(t),C=new Uint8Array(t),c=new Uint8Array(t);let b=d.mask;const k=4===n[0].mappedColor.length;b||(b=new Uint8Array(t),b.fill(k?255:1),d.mask=b);for(z=0;z<t;z++)if(b[z]){x=e[z];a=!1;f=u;p=y;g=0;for(r=
w-1;1<r-g;){if(x===p.value){a=!0;break}x>p.value?g=f:r=f;f=Math.floor((g+r)/2);p=n[Math.floor(f)]}a||(x===n[g].value?(p=n[g],a=!0):x===n[r].value?(p=n[r],a=!0):x<n[g].value?(a=!1,p=null):x>n[g].value&&(x<n[r].value?(p=n[g],a=!0):r===w-1?(a=!1,p=null):(p=n[r],a=!0)));a?(q[z]=p.mappedColor[0],C[z]=p.mappedColor[1],c[z]=p.mappedColor[2],b[z]=p.mappedColor[3]):q[z]=C[z]=c[z]=b[z]=0}d.pixels=[q,C,c];d.mask=b;d.pixelType="u8";d.maskIsAlpha=k;return d};R.resampleByMajority=O;R.setValidBoundary=function(d,
n,e){if(!h(d))return null;const {width:t,height:w}=d,u=n.x;n=n.y;const y=e.width+u;e=e.height+n;if(0>u||0>n||y>t||e>w||0===u&&0===n&&y===t&&e===w)return d;d.mask||(d.mask=new Uint8Array(t*w));const x=d.mask;for(let p=0;p<w;p++){const g=p*t;for(let r=0;r<t;r++)x[g+r]=p<n||p>=e||r<u||r>=y?0:1}d.updateStatistics();return d};R.split=function(d,n,e){if(!h(d))return null;const {width:t,height:w}=n;let {width:u,height:y}=d;const x=new Map,p={x:0,y:0};e=null==e?1:1+e;for(let g=0;g<e;g++){const r=Math.ceil(u/
t),z=Math.ceil(y/w);for(let f=0;f<z;f++){p.y=f*w;for(let a=0;a<r;a++){p.x=a*t;const q=M(d,p,n);x.set(`${g}/${f}/${a}`,q)}}g<e-1&&(d=B(d));u=Math.round(u/2);y=Math.round(y/2)}return x};R.stretch=function(d,n){if(!h(d))return null;d=d.clone();const {pixels:e,mask:t}=d,{minCutOff:w,maxCutOff:u,gamma:y}=n,x=n.outMin||0;n=n.outMax||255;const p=d.width*d.height,g=e.length;let r;let z,f,a;const q=n-x,C=[];for(r=0;r<g;r++)C[r]=u[r]-w[r];var c=y&&y.length>=g;const b=[];if(c)for(r=0;r<g;r++)b[r]=1<y[r]?2<y[r]?
6.5+Math.pow(y[r]-2,2.5):6.5+100*Math.pow(2-y[r],4):1;if(c)if(null!=t)for(c=0;c<p;c++){if(t[c])for(r=0;r<g;r++)z=e[r][c],a=(z-w[r])/C[r],f=1,1<y[r]&&(f-=Math.pow(1/q,a*b[r])),e[r][c]=z<u[r]&&z>w[r]?Math.floor(f*q*Math.pow(a,1/y[r]))+x:z>=u[r]?n:x}else for(c=0;c<p;c++)for(r=0;r<g;r++)z=e[r][c],a=(z-w[r])/C[r],f=1,1<y[r]&&(f-=Math.pow(1/q,a*b[r])),e[r][c]=z<u[r]&&z>w[r]?Math.floor(f*q*Math.pow(a,1/y[r]))+x:z>=u[r]?n:x;else if(null!=t)for(c=0;c<p;c++){if(t[c])for(r=0;r<g;r++)z=e[r][c],e[r][c]=z<u[r]&&
z>w[r]?Math.floor((z-w[r])/C[r]*q)+x:z>=u[r]?n:x}else for(c=0;c<p;c++)for(r=0;r<g;r++)z=e[r][c],e[r][c]=z<u[r]&&z>w[r]?Math.floor((z-w[r])/C[r]*q)+x:z>=u[r]?n:x;d.pixelType="u8";d.updateStatistics();return d};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock"],function(R,H){function v(A){let {altitude:O,azimuth:E}=A;const {hillshadeType:J,pixelSizePower:L,pixelSizeFactor:M,scalingType:B,isGCS:h,resolution:d}=
A;var n="multi-directional"===J?2*A.zFactor:A.zFactor;const {x:e,y:t}=d;A=n/(8*e);var w=n/(8*t);h&&.001<n&&(A/=111E3,w/=111E3);"adjusted"===B&&(h?(A=111E3*e,w=111E3*t,A=(n+Math.pow(A,L)*M)/(8*A),w=(n+Math.pow(w,L)*M)/(8*w)):(A=(n+Math.pow(e,L)*M)/(8*e),w=(n+Math.pow(t,L)*M)/(8*t)));var u=(90-O)*Math.PI/180;n=Math.cos(u);let y=(360-E+90)*Math.PI/180,x=Math.sin(u)*Math.cos(y);u=Math.sin(u)*Math.sin(y);const p=[315,270,225,360,180,0],g=[60,60,60,60,60,90];var r=new Float32Array([3,5,3,2,1,4]);const z=
r.reduce((c,b)=>c+b);r=r.map(c=>c/z);const f="multi-directional"===J?p.length:1,a=new Float32Array(6),q=new Float32Array(6),C=new Float32Array(6);if("multi-directional"===J)for(let c=0;c<f;c++)O=g[c],E=p[c],u=(90-O)*Math.PI/180,n=Math.cos(u),y=(360-E+90)*Math.PI/180,x=Math.sin(u)*Math.cos(y),u=Math.sin(u)*Math.sin(y),a[c]=n,q[c]=x,C[c]=u;else a.fill(n),q.fill(x),C.fill(u);return{resolution:d,factor:[A,w],sinZcosA:x,sinZsinA:u,cosZ:n,sinZcosAs:q,sinZsinAs:C,cosZs:a,weights:r,hillshadeType:["traditional",
"multi-directional"].indexOf(J)}}const U=function(A){return A&&"esri.layers.support.PixelBlock"===A.declaredClass&&A.pixels&&0<A.pixels.length};R.calculateHillshadeParams=v;R.hillshade=function(A,O){if(!U(A))return A;const {width:E,height:J,mask:L}=A,M=new Uint8Array(E*J);L&&M.set(L);const {factor:B,sinZcosA:h,sinZsinA:d,cosZ:n,sinZcosAs:e,sinZsinAs:t,cosZs:w,weights:u}=v(O),[y,x]=B;var {hillshadeType:p}=O;const g=A.pixels[0];O=new Uint8Array(E*J);let r;for(let k=1;k<J-1;k++){const m=k*E;for(let l=
1;l<E-1;l++)if(L&&!L[m+l])O[m+l]=0;else{var z=8;if(L&&(z=L[m-E+l-1]+L[m-E+l]+L[m-E+l+1]+L[m+l-1]+L[m+l+1]+L[m+E+l-1]+L[m+E+l]+L[m+E+l+1],7>z)){O[m+l]=0;M[m+l]=0;continue}if(7===z){var f=L[m-E+l-1]?g[m-E+l-1]:g[m+l];var a=L[m-E+l]?g[m-E+l]:g[m+l];var q=L[m-E+l+1]?g[m-E+l+1]:g[m+l];z=L[m+l-1]?g[m+l-1]:g[m+l];r=L[m+l+1]?g[m+l+1]:g[m+l];var C=L[m+E+l-1]?g[m+E+l-1]:g[m+l];var c=L[m+E+l]?g[m+E+l]:g[m+l];var b=L[m+E+l+1]?g[m+E+l+1]:g[m+l]}else f=g[m-E+l-1],a=g[m-E+l],q=g[m-E+l+1],z=g[m+l-1],r=g[m+l+1],C=
g[m+E+l-1],c=g[m+E+l],b=g[m+E+l+1];z=(q+r+r+b-(f+z+z+C))*y;f=(C+c+c+b-(f+a+a+q))*x;a=Math.sqrt(1+z*z+f*f);q=0;if("traditional"===p)z=255*(n+d*f-h*z)/a,0>z&&(z=0),q=z;else for(C=t.length,c=0;c<C;c++)b=255*(w[c]+t[c]*f-e[c]*z)/a,0>b&&(b=0),q+=b*u[c];O[m+l]=q&255}}for(p=0;p<J;p++)O[p*E]=O[p*E+1],O[(p+1)*E-1]=O[(p+1)*E-2];for(p=1;p<E-1;p++)O[p]=O[p+E],O[p+(J-1)*E]=O[p+(J-2)*E];return new H({width:E,height:J,pixels:[O],mask:L?M:null,pixelType:"u8",validPixelCount:A.validPixelCount,statistics:[{minValue:0,
maxValue:255}]})};R.tintHillshade=function(A,O,E,J){if(U(A)&&U(O)){var {min:L,max:M}=J;J=A.pixels[0];var {pixels:B,mask:h}=O;O=B[0];var d=255.00001/(M-L),n=new Uint8ClampedArray(O.length),e=new Uint8ClampedArray(O.length),t=new Uint8ClampedArray(O.length),w=E.length-1;for(let x=0;x<O.length;x++){if(h&&0===h[x])continue;var u=Math.floor((O[x]-L)*d);const [p,g]=E[0>u?0:u>w?w:u];var y=J[x];u=y*g;const r=u*(1-Math.abs(p%2-1));y-=u;switch(Math.floor(p)){case 0:n[x]=u+y;e[x]=r+y;t[x]=y;break;case 1:n[x]=
r+y;e[x]=u+y;t[x]=y;break;case 2:n[x]=y;e[x]=u+y;t[x]=r+y;break;case 3:n[x]=y;e[x]=r+y;t[x]=u+y;break;case 4:n[x]=r+y;e[x]=y;t[x]=u+y;break;case 5:case 6:n[x]=u+y,e[x]=y,t[x]=r+y}}A.pixels=[n,e,t];A.updateStatistics()}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/rest/imageService":function(){define("exports ../core/maybe ../request ../geometry/support/normalizeUtils ./utils ../tasks/support/ImageIdentifyResult".split(" "),function(R,H,v,U,A,O){async function E(J,L,M){J=A.parseUrl(J);
var B=await U.normalizeCentralMeridian(L.geometry?[L.geometry]:[]);L=L.toJSON();{const h=null==L?void 0:L.time;if(h&&(null!=h.start||null!=h.end)){const d=[];null!=h.start&&d.push(h.start);null!=h.end&&-1===d.indexOf(h.end)&&d.push(h.end);L.time=d.join(",")}}B=B&&B[0];H.isSome(B)&&(L.geometry=B.toJSON());J=A.encode({...J.query,f:"json",...L});return A.asValidOptions(J,M)}R.computeHistograms=async function(J,L,M){L=await E(J,L,M);J=A.parseUrl(J);({data:J}=await v(`${J.path}/computeHistograms`,L));
return{histograms:J.histograms}};R.computeStatisticsHistograms=async function(J,L,M){L=await E(J,L,M);J=A.parseUrl(J);({data:J}=await v(`${J.path}/computeStatisticsHistograms`,L));({statistics:L}=J);null!=L&&L.length&&L.forEach(B=>{B.avg=B.mean;B.stddev=B.standardDeviation});return{statistics:L,histograms:J.histograms}};R.identify=async function(J,L,M){const B=A.parseUrl(J);return U.normalizeCentralMeridian(L.geometry?[L.geometry]:[]).then(h=>{var d=L.toJSON();h=h&&h[0];H.isSome(h)&&(d.geometry=JSON.stringify(h.toJSON()));
d=A.encode({...B.query,f:"json",...d});d=A.asValidOptions(d,M);return v(B.path+"/identify",d)}).then(h=>O.fromJSON(h.data))};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/rest/utils":function(){define(["exports","../core/urlUtils"],function(R,H){function v(U,A,O){const E={};for(const L in U)if("declaredClass"!==L){var J=U[L];if(null!=J&&"function"!==typeof J)if(Array.isArray(J)){E[L]=[];for(let M=0;M<J.length;M++)E[L][M]=v(J[M])}else"object"===typeof J?J.toJSON?(J=J.toJSON(O&&O[L]),E[L]=
A?J:JSON.stringify(J)):E[L]=A?J:JSON.stringify(J):E[L]=J}return E}R.asValidOptions=function(U,A){U={query:U};A&&(U={...A,...U});return U};R.encode=v;R.parseUrl=function(U){return"string"===typeof U?H.urlToObject(U):U};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/tasks/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ./FeatureSet".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n){v=function(e){function t(){var w=e.apply(this,arguments)||this;w.catalogItemVisibilities=null;w.catalogItems=null;w.location=null;w.name=null;w.objectId=null;w.processedValues=null;w.properties=null;w.value=null;return w}R._inheritsLoose(t,e);return t}(h.JSONSupport);H.__decorate([O.property({json:{write:!0}})],v.prototype,"catalogItemVisibilities",void 0);H.__decorate([O.property({type:n,json:{write:!0}})],v.prototype,"catalogItems",void 0);H.__decorate([O.property({type:d,
json:{write:!0}})],v.prototype,"location",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"name",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"objectId",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"processedValues",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"properties",void 0);H.__decorate([O.property({json:{write:!0}})],v.prototype,"value",void 0);return v=H.__decorate([J.subclass("esri.tasks.support.ImageIdentifyResult")],
v)})},"esri/tasks/ImageIdentifyTask":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Task ../rest/imageService".split(" "),function(R,H,v,U,A,O,E,J,L,M,B,h,d){v=function(n){function e(){return n.apply(this,arguments)||this}R._inheritsLoose(e,
n);e.prototype.execute=function(t,w){return d.identify(this.url,t,w)};return e}(h);return v=H.__decorate([J.subclass("esri.tasks.ImageIdentifyTask")],v)})},"esri/tasks/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/support/jsonUtils ../../TimeExtent ../../layers/support/RasterFunction ../../layers/support/MosaicRule".split(" "),
function(R,H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u,y){var x;v=x=function(p){function g(){var z=p.apply(this,arguments)||this;z.geometry=null;z.renderingRules=null;z.pixelSize=null;z.returnGeometry=!0;z.returnCatalogItems=!0;z.returnPixelValues=!0;z.maxItemCount=null;z.timeExtent=null;z.raster=void 0;z.viewId=void 0;return z}R._inheritsLoose(g,p);var r=g.prototype;r.writeGeometry=function(z,f,a){null!=z&&(f.geometryType=t.getJsonType(z),f[a]=JSON.stringify(z.toJSON()))};r.writeMosaicRule=function(z,f,a){null!=
z&&(f[a]=JSON.stringify(z.toJSON()))};r.writeRenderingRule=function(z,f,a){null!=z&&(f[a]=JSON.stringify(z.toJSON()))};r.writeRenderingRules=function(z,f,a){null!=z&&(f[a]=JSON.stringify(z.map(q=>q.toJSON())))};r.writePixelSize=function(z,f,a){null!=z&&(f[a]=JSON.stringify(z))};r.writeTimeExtent=function(z,f,a){if(null!=z){const q=z.start?z.start.getTime():null;z=z.end?z.end.getTime():null;f[a]=null!=q?null!=z?`${q},${z}`:`${q}`:null}};r.clone=function(){return new x(U.clone({geometry:this.geometry,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};R._createClass(g,[{key:"mosaicRule",set:function(z){z&&z.mosaicMethod&&(z=y.fromJSON({...z.toJSON(),mosaicMethod:z.mosaicMethod,mosaicOperation:z.mosaicOperation}));this._set("mosaicRule",z)}},{key:"renderingRule",
set:function(z){z&&z.rasterFunction&&(z=u.fromJSON({...z.toJSON(),rasterFunction:z.rasterFunction,rasterFunctionArguments:z.rasterFunctionArguments}));this._set("renderingRule",z)}}]);return g}(n.JSONSupport);H.__decorate([E.property({json:{write:!0}})],v.prototype,"geometry",void 0);H.__decorate([M.writer("geometry")],v.prototype,"writeGeometry",null);H.__decorate([E.property({type:y,json:{write:!0}})],v.prototype,"mosaicRule",null);H.__decorate([M.writer("mosaicRule")],v.prototype,"writeMosaicRule",
null);H.__decorate([E.property({type:u,json:{write:!0}})],v.prototype,"renderingRule",null);H.__decorate([M.writer("renderingRule")],v.prototype,"writeRenderingRule",null);H.__decorate([E.property({type:[u],json:{write:!0}})],v.prototype,"renderingRules",void 0);H.__decorate([M.writer("renderingRules")],v.prototype,"writeRenderingRules",null);H.__decorate([E.property({type:e,json:{write:!0}})],v.prototype,"pixelSize",void 0);H.__decorate([M.writer("pixelSize")],v.prototype,"writePixelSize",null);
H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"returnGeometry",void 0);H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"returnCatalogItems",void 0);H.__decorate([E.property({type:Boolean,json:{write:!0}})],v.prototype,"returnPixelValues",void 0);H.__decorate([E.property({type:Number,json:{write:!0}})],v.prototype,"maxItemCount",void 0);H.__decorate([E.property({type:w,json:{write:{target:"time"}}})],v.prototype,"timeExtent",void 0);H.__decorate([M.writer("timeExtent")],
v.prototype,"writeTimeExtent",null);H.__decorate([E.property({json:{write:!0}})],v.prototype,"raster",void 0);H.__decorate([E.property({json:{write:!0}})],v.prototype,"viewId",void 0);return v=x=H.__decorate([L.subclass("esri.tasks.support.ImageIdentifyParameters")],v)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../PopupTemplate ./Layer ../core/MultiOriginJSONSupport ./support/commonProperties ./mixins/OperationalLayer ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ../support/popupUtils ./mixins/ArcGISImageService".split(" "),function(R,
H,v,U,A,O,E,J,L,M,B,h,d,n,e,t,w,u,y,x,p,g,r,z,f,a,q){v=function(C){function c(...k){k=C.call(this,...k)||this;k.legendEnabled=!0;k.isReference=null;k.operationalLayerType="ArcGISImageServiceLayer";k.popupEnabled=!0;k.popupTemplate=null;k.type="imagery";return k}R._inheritsLoose(c,C);var b=c.prototype;b.normalizeCtorArgs=function(k,m){return"string"===typeof k?{url:k,...m}:k};b.load=function(k){const m=U.isSome(k)?k.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
k).then(()=>this._fetchService(m),()=>this._fetchService(m)));return n.resolve(this)};b.writeOperationalLayerType=function(k,m,l){var K;k="vector-field"===(null==(K=this.renderer)?void 0:K.type);m[l]=k?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};b.createPopupTemplate=function(k){const m=this.rasterFields,l=this.title,K=new Set;var F=!1;let G=!1;this.capabilities&&(G=(F=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const N=new Set;F&&(N.add("raster.itempixelvalue"),G&&N.add("raster.magnitude").add("raster.direction"));for(const P of m)F=P.name.toLowerCase(),N.has(F)||-1<F.indexOf("raster.servicepixelvalue.")||K.add(P.name);return a.createPopupTemplate({fields:m,title:l},{...k,visibleFieldNames:K})};b.redraw=function(){this.emit("redraw")};R._createClass(c,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);
return c}(p.BlendLayer(f.TemporalLayer(r.RefreshableLayer(z.ScaleRangeLayer(y.OperationalLayer(g.PortalLayer(q.ArcGISImageService(x.ArcGISService(w.MultiOriginJSONMixin(t))))))))));H.__decorate([E.property(u.legendEnabled)],v.prototype,"legendEnabled",void 0);H.__decorate([E.property({type:["show","hide"]})],v.prototype,"listMode",void 0);H.__decorate([E.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],v.prototype,"isReference",void 0);H.__decorate([E.property({type:["ArcGISImageServiceLayer"],
json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],v.prototype,"operationalLayerType",void 0);H.__decorate([M.writer("web-map","operationalLayerType")],v.prototype,"writeOperationalLayerType",null);H.__decorate([E.property(u.popupEnabled)],v.prototype,"popupEnabled",void 0);H.__decorate([E.property({type:e,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],v.prototype,"popupTemplate",void 0);
H.__decorate([E.property({readOnly:!0,dependsOn:["fields","title"]})],v.prototype,"defaultPopupTemplate",null);H.__decorate([E.property({readOnly:!0,json:{read:!1}})],v.prototype,"type",void 0);return v=H.__decorate([L.subclass("esri.layers.ImageryLayer")],v)});