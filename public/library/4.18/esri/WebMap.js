// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(m,d){m.updateOrigins=function(b){b&&b.writtenProperties&&b.writtenProperties.forEach(f=>{const x=f.target;f.newOrigin&&f.oldOrigin!==f.newOrigin&&d.isMultiOriginJSONMixin(x)&&x.updateOrigin(f.propName,f.newOrigin)})};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(m){m.isMultiOriginJSONMixin=
function(d){return d&&"getAtOrigin"in d&&"originOf"in d};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/tasks/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/jsonUtils".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w){const u=f.getLogger("esri.tasks.support.ProjectParameters");b=function(v){function p(g){g=v.call(this,g)||this;g.geometries=null;g.outSpatialReference=null;g.transformation=null;g.transformForward=null;return g}m._inheritsLoose(p,v);p.prototype.toJSON=function(){const g=this.geometries.map(function(F){return F.toJSON()}),n=this.geometries[0],C={};C.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());C.inSR=n.spatialReference.wkid||
JSON.stringify(n.spatialReference.toJSON());C.geometries=JSON.stringify({geometryType:w.getJsonType(n),geometries:g});this.transformation&&(C.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(C.transformForward=this.transformForward);return C};m._createClass(p,[{key:"outSR",get:function(){u.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(g){u.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=g}}]);return p}(y.JSONSupport);d.__decorate([k.property()],b.prototype,"geometries",void 0);d.__decorate([k.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);d.__decorate([k.property({json:{read:!1}})],b.prototype,"outSR",null);d.__decorate([k.property()],b.prototype,"transformation",void 0);d.__decorate([k.property()],b.prototype,"transformForward",void 0);return b=d.__decorate([r.subclass("esri.tasks.support.ProjectParameters")],b)})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w){var u;b=u=function(v){function p(g){g=v.call(this,g)||this;g.activeRange=null;g.currentRangeExtent=null;g.fullRangeExtent=null;return g}m._inheritsLoose(p,v);p.prototype.clone=function(){return new u(f.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return p}(w.JSONSupport);d.__decorate([l.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",
isRequired:!0}}})],b.prototype,"activeRange",void 0);d.__decorate([l.property({type:[Number],json:{write:!0}})],b.prototype,"currentRangeExtent",void 0);d.__decorate([l.property({type:[Number],json:{write:!0}})],b.prototype,"fullRangeExtent",void 0);return b=u=d.__decorate([z.subclass("esri.webdoc.RangeInfo")],b)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./widgets/Range ./widgets/TimeSlider".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u,v){var p;b=p=function(g){function n(C){C=g.call(this,C)||this;C.range=null;C.timeSlider=null;return C}m._inheritsLoose(n,g);n.prototype.clone=function(){return new p(f.clone({range:this.range,timeSlider:this.timeSlider}))};return n}(w.JSONSupport);d.__decorate([l.property({type:u,json:{write:!0}})],b.prototype,"range",void 0);d.__decorate([l.property({type:v,json:{write:!0}})],b.prototype,"timeSlider",void 0);return b=p=d.__decorate([z.subclass("esri.webdoc.Widgets")],
b)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(m,d,b,f,x,k,l,r,z,B,K,y){var w;b=new l.JSONMap({slider:"slider",picker:"picker"});y=
w=function(u){function v(p){p=u.call(this,p)||this;p.interactionMode=null;p.numStops=null;p.stopInterval=null;return p}m._inheritsLoose(v,u);v.prototype.clone=function(){return new w({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return v}(y.JSONSupport);d.__decorate([k.property({type:b.apiValues,nonNullable:!0,json:{type:b.jsonValues,default:null,read:{reader:b.read},write:{isRequired:!0,writer:b.write}}})],y.prototype,"interactionMode",void 0);d.__decorate([k.property({type:Number,
json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const u=null!=this.stopInterval;return{enabled:!u,isRequired:!u}}}}})],y.prototype,"numStops",void 0);d.__decorate([k.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],y.prototype,"stopInterval",void 0);return y=w=d.__decorate([r.subclass("esri.webdoc.widgets.Range")],y)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/object ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../TimeExtent ../../TimeInterval".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u,v,p,g,n){var C;b=C=function(F){function G(q){q=F.call(this,q)||this;q.currentTimeExtent=null;q.fullTimeExtent=null;q.numStops=null;q.numThumbs=null;q.stopDelay=null;q.stopInterval=null;return q}m._inheritsLoose(G,F);var M=G.prototype;M.readCurrentTimeExtent=function(q){if(q)return new g({start:null!=q[0]?new Date(q[0]):null,end:null!=q[1]?new Date(q[1]):null})};M.writeCurrentTimeExtent=function(q,H,I){q&&x.setDeepValue(I,[q.start?q.start.getTime():null,q.end?q.end.getTime():
null],H)};M.readFullTimeExtent=function(q,H){if(q=H.properties)return new g({start:null!=q.startTime?new Date(q.startTime):null,end:null!=q.endTime?new Date(q.endTime):null})};M.writeFullTimeExtent=function(q,H){if(q){H=H.properties=H.properties||{};var I=q.end;q=q.start;I&&(H.endTime=I?I.getTime():null);q&&(H.startTime=q?q.getTime():null)}};M.readStopInterval=function(q,H,I){return q?n.fromJSON({value:q.interval,unit:q.units},I):null};M.writeStopInterval=function(q,H,I,D){q&&(q=q.toJSON(D),x.setDeepValue(I,
{interval:q.value,units:q.unit},H))};M.clone=function(){return new C(f.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval}))};return G}(p.JSONSupport);d.__decorate([r.property({type:g,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],b.prototype,"currentTimeExtent",void 0);d.__decorate([B.reader("currentTimeExtent")],
b.prototype,"readCurrentTimeExtent",null);d.__decorate([y.writer("currentTimeExtent")],b.prototype,"writeCurrentTimeExtent",null);d.__decorate([r.property({type:g,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],b.prototype,"fullTimeExtent",void 0);d.__decorate([B.reader("fullTimeExtent")],b.prototype,"readFullTimeExtent",null);d.__decorate([y.writer("fullTimeExtent")],b.prototype,"writeFullTimeExtent",
null);d.__decorate([r.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){const F=!!this.stopInterval;return{enabled:!F,isRequired:!F}}}}})],b.prototype,"numStops",void 0);d.__decorate([r.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],b.prototype,"numThumbs",void 0);d.__decorate([r.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},
write:{target:"properties.thumbMovingRate",isRequired:!0}}})],b.prototype,"stopDelay",void 0);d.__decorate([r.property({type:n,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){return{isRequired:null==this.numStops}}}}})],b.prototype,"stopInterval",void 0);d.__decorate([B.reader("stopInterval")],b.prototype,"readStopInterval",null);d.__decorate([y.writer("stopInterval")],b.prototype,"writeStopInterval",null);return b=C=d.__decorate([K.subclass("esri.webdoc.widgets.TimeSlider")],
b)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(m){const d={width:600,height:400};m.getOptimalThumbnailSize=function(b,f){f=f||d;let {width:x,height:k}=f;f=x/k;1.5>f?k=x/1.5:1.5<f&&(x=1.5*k);x>b.width&&(k*=b.width/x,x=b.width);k>b.height&&(x*=b.height/k,k=b.height);return{width:Math.round(x),height:Math.round(k)}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../webdoc/applicationProperties/Viewing".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u){var v;b=v=function(p){function g(n){n=p.call(this,n)||this;n.editing=null;n.offline=null;n.viewing=null;return n}m._inheritsLoose(g,p);g.prototype.clone=function(){return new v(f.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return g}(w.JSONSupport);d.__decorate([l.property({json:{write:!0}})],b.prototype,"editing",void 0);d.__decorate([l.property({json:{write:!0}})],b.prototype,"offline",void 0);d.__decorate([l.property({type:u,json:{write:!0}})],
b.prototype,"viewing",void 0);return b=v=d.__decorate([z.subclass("esri.webmap.ApplicationProperties")],b)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./Search".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u){var v;b=v=function(p){function g(n){n=p.call(this,n)||this;n.search=null;return n}m._inheritsLoose(g,p);g.prototype.clone=function(){return new v(f.clone({search:this.search}))};return g}(w.JSONSupport);d.__decorate([l.property({type:u,json:{write:!0}})],b.prototype,"search",void 0);return b=v=d.__decorate([z.subclass("esri.webdoc.applicationProperties.Viewing")],b)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/Collection ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u,v,p,g,n,C){var F;const G=p.ofType(n),M=p.ofType(C);b=F=function(q){function H(D){D=q.call(this,D)||this;D.addressSearchEnabled=!0;D.enabled=!0;D.hintText=null;D.layers=new G;D.tables=new M;return D}m._inheritsLoose(H,q);var I=H.prototype;I.readAddressSearchEnabled=function(D){return!D};I.writeAddressSearchEnabled=function(D,P,E){P[E]=!D};I.clone=function(){return new F(f.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,
layers:this.layers,tables:this.tables}))};return H}(v.JSONSupport);d.__decorate([l.property({type:Boolean,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder"},default:!0,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"addressSearchEnabled",void 0);d.__decorate([z.reader("addressSearchEnabled")],b.prototype,"readAddressSearchEnabled",null);d.__decorate([K.writer("addressSearchEnabled")],b.prototype,"writeAddressSearchEnabled",null);d.__decorate([l.property({type:Boolean,
json:{write:!0,default:!0}})],b.prototype,"enabled",void 0);d.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"hintText",void 0);d.__decorate([l.property({type:G,json:{write:{overridePolicy:g.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],b.prototype,"layers",void 0);d.__decorate([l.property({type:M,json:{read:!0,write:{overridePolicy:g.writeNonEmptyCollectionPolicy},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"tables",void 0);return b=
F=d.__decorate([B.subclass("esri.webdoc.applicationProperties.Search")],b)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(m){m.writeNonEmptyCollectionPolicy=function(d){return{enabled:!(null==d||!d.length)}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchLayerField".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u){var v;b=v=function(p){function g(n){n=p.call(this,n)||this;n.field=null;n.id=null;n.subLayer=null;return n}m._inheritsLoose(g,p);g.prototype.clone=function(){return new v(f.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return g}(w.JSONSupport);d.__decorate([l.property({type:u,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);d.__decorate([l.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);d.__decorate([l.property({type:k.Integer,
json:{write:!0}})],b.prototype,"subLayer",void 0);return b=v=d.__decorate([z.subclass("esri.webdoc.applicationProperties.SearchLayer")],b)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w){var u;b=u=function(v){function p(g){g=v.call(this,g)||this;g.exactMatch=!1;g.name=null;g.type=null;return g}m._inheritsLoose(p,v);p.prototype.clone=function(){return new u({exactMatch:this.exactMatch,type:this.type,name:this.name})};return p}(y.JSONSupport);d.__decorate([k.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);d.__decorate([k.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([l.enumeration(w.kebabDict)],
b.prototype,"type",void 0);return b=u=d.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchLayerField")],b)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchTableField".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u){var v;b=v=function(p){function g(n){n=p.call(this,n)||this;n.field=null;n.id=null;return n}m._inheritsLoose(g,p);g.prototype.clone=function(){return new v(f.clone({field:this.field,id:this.id}))};return g}(w.JSONSupport);d.__decorate([l.property({type:u,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);d.__decorate([l.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);return b=v=d.__decorate([z.subclass("esri.webdoc.applicationProperties.SearchTable")],
b)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),function(m,
d,b,f,x,k,l,r,z,B,K,y,w){var u;b=u=function(v){function p(g){g=v.call(this,g)||this;g.exactMatch=!1;g.name=null;g.type=null;return g}m._inheritsLoose(p,v);p.prototype.clone=function(){return new u({exactMatch:this.exactMatch,type:this.type,name:this.name})};return p}(y.JSONSupport);d.__decorate([k.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);d.__decorate([k.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);d.__decorate([l.enumeration(w.kebabDict)],b.prototype,
"type",void 0);return b=u=d.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchTableField")],b)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/Extent ../core/Identifiable ../Viewpoint ../webdoc/support/Thumbnail".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u,v,p,g,n,C,F,G,M){var q;const H=k.getLogger("esri.webmap.Bookmark");b=q=function(I){function D(E){E=I.call(this,E)||this;E.name=null;E.thumbnail=new M;return E}m._inheritsLoose(D,I);var P=D.prototype;P.castThumbnail=function(E){return"string"===typeof E?new M({url:E}):l.ensureType(M,E)};P.readViewpoint=function(E,Q){const {extent:T,viewpoint:Z}=Q;return G.fromJSON(Z||{targetGeometry:T})};P.clone=function(){return new q(f.clone({name:this.name,thumbnail:this.thumbnail,
viewpoint:this.viewpoint}))};m._createClass(D,[{key:"extent",set:function(E){B.deprecatedProperty(H,"extent",{replacement:"viewpoint",version:"4.17"});this._set("viewpoint",new G({targetGeometry:E.clone()}));this._set("extent",E)}},{key:"viewpoint",set:function(E){const Q=E.targetGeometry;x.isNone(Q)||"extent"!==Q.type?(E=new u("invalid-viewpoint","'viewpoint.targetGeometry' should be an extent",{viewpoint:E}),H.error(E)):(this._set("extent",Q.clone()),this._set("viewpoint",E))}}]);return D}(F.IdentifiableMixin(n.JSONSupport));
d.__decorate([r.property({type:C,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],b.prototype,"extent",null);d.__decorate([r.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],b.prototype,"name",void 0);d.__decorate([r.property({type:M,json:{write:{overridePolicy(I){return{enabled:!(!I||!I.url)}}}}})],b.prototype,"thumbnail",void 0);d.__decorate([z.cast("thumbnail")],b.prototype,"castThumbnail",null);d.__decorate([r.property({type:G,nonNullable:!0,json:{write:!0}})],b.prototype,
"viewpoint",null);d.__decorate([y.reader("viewpoint",["extent","viewpoint"])],b.prototype,"readViewpoint",null);return b=q=d.__decorate([w.subclass("esri.webmap.Bookmark")],b)})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y){var w;b=w=function(u){function v(){var g=u.apply(this,arguments)||this;g.url="";return g}m._inheritsLoose(v,u);var p=v.prototype;p.destroy=function(){this.url=""};p.clone=function(){return new w({url:this.url})};return v}(y.JSONSupport);d.__decorate([k.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"url",void 0);return b=w=d.__decorate([r.subclass("esri.webdoc.support.Thumbnail")],b)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u){var v;b=v=function(p){function g(n){n=p.call(this,n)||this;n.color=new u([0,0,0,1]);return n}m._inheritsLoose(g,p);g.prototype.clone=function(){return new v(f.clone({color:this.color}))};return g}(w.JSONSupport);d.__decorate([l.property({type:u,json:{write:!0}})],b.prototype,"color",void 0);return b=v=d.__decorate([z.subclass("esri.webmap.background.ColorBackground")],b)})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Accessor ../geometry/SpatialReference ../Viewpoint ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(m,d,b,f,x,k,l,r,z,B,K,y,w,u,v,p,g){var n;b=n=function(C){function F(G){G=C.call(this,G)||this;G.background=null;G.rangeInfo=null;G.spatialReference=null;G.viewpoint=null;return G}m._inheritsLoose(F,C);F.prototype.clone=function(){return new n(f.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return F}(w);d.__decorate([l.property({type:g})],b.prototype,"background",void 0);d.__decorate([l.property({type:p})],b.prototype,
"rangeInfo",void 0);d.__decorate([l.property({type:u})],b.prototype,"spatialReference",void 0);d.__decorate([l.property({type:v})],b.prototype,"viewpoint",void 0);return b=n=d.__decorate([z.subclass("esri.webmap.InitialViewProperties")],b)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(m,d,b){b=function(f){function x(k,l){return f.call(this,k,l,"webmap")||this}d._inheritsLoose(x,f);return x}(b.Version);m.Version=b;m.default=
b;Object.defineProperty(m,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports","./Error"],function(m,d){let b=function(){function f(k,l,r=""){this.major=k;this.minor=l;this._context=r}var x=f.prototype;x.lessThan=function(k,l){return this.major<k||k===this.major&&this.minor<l};x.since=function(k,l){return!this.lessThan(k,l)};x.validate=function(k){if(this.major!==k.major)throw new d((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+
" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:k});};x.clone=function(){return new f(this.major,this.minor,this._context)};f.parse=function(k,l=""){const [r,z]=k.split(".");var B=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(B))throw new d((l&&l+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:k});if(!z||!z.match||!z.match(B))throw new d((l&&l+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",
{version:k});k=parseInt(r,10);B=parseInt(z,10);return new f(k,B,l)};return f}();m.Version=b;Object.defineProperty(m,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/maybe ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/Error ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/arrayUtils ./core/promiseUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/webMercatorUtils ./core/Collection ./kernel ./core/Promise ./core/Loadable ./portal/Portal ./core/loadAll ./portal/PortalItem ./webdoc/support/writeUtils ./support/basemapUtils ./Map ./Viewpoint ./core/MultiOriginJSONSupport ./core/watchUtils ./core/accessorSupport/originUtils ./layers/support/arcgisLayerUrl ./portal/support/portalItemUtils ./tasks/support/ProjectParameters ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/background/ColorBackground ./webmap/InitialViewProperties ./webmap/Version".split(" "),function(m,
d,b,f,x,k,l,r,z,B,K,y,w,u,v,p,g,n,C,F,G,M,q,H,I,D,P,E,Q,T,Z,U,aa,fa,ha,ia,J,ba,ca,ja,ka,la,ma,da,V,W){const X=new W.Version(2,19),ea=M.ofType(ma),Y=k.getLogger("esri.WebMap"),R=new Map;R.set("image/jpeg","jpeg");R.set("image/jpg","jpg");R.set("image/png","png");R.set("image/gif","gif");const na="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(N=>
N.toLowerCase());f=function(N){function S(a){a=N.call(this,a)||this;a.applicationProperties=null;a.bookmarks=new ea;a.initialViewProperties=new V;a.portalItem=null;a.presentation=null;a.sourceVersion=null;a.widgets=null;a.authoringApp=a.authoringAppVersion=null;a._isAuthoringAppSetByUser=a._isAuthoringAppVersionSetByUser=!1;return a}d._inheritsLoose(S,N);var h=S.prototype;h.destroy=function(){const a=this.portalItem;this.portalItem=null;null==a?void 0:a.destroy()};h.initialize=function(){this.when().catch(a=>
{Y.error("#load()","Failed to load web map",a)});if(this.resourceInfo){let a;try{a=this._validateJSON(this.resourceInfo)}catch(c){this.addResolvingPromise(n.reject(c));return}this.read(a)}};h.writeAuthoringApp=function(a,c){c.authoringApp=a&&this._isAuthoringAppSetByUser?a:"ArcGIS API for JavaScript"};h.writeAuthoringAppVersion=function(a,c){c.authoringAppVersion=a&&this._isAuthoringAppVersionSetByUser?a:q.version};h.readInitialViewProperties=function(a,c){a=new V;c.background&&(a.background=da.fromJSON(c.background));
c.initialState&&c.initialState.viewpoint&&(a.viewpoint=U.fromJSON(c.initialState.viewpoint));c.mapRangeInfo&&(a.rangeInfo=ca.fromJSON(c.mapRangeInfo));c.spatialReference&&(a.spatialReference=F.fromJSON(c.spatialReference));return a};h.writeInitialViewProperties=function(a,c,e,t){a&&((e=a.background)&&e.color&&(c.background=e.write(null,t)),a.viewpoint&&(c.initialState={viewpoint:a.viewpoint.write(null,t)}),a.rangeInfo&&(c.mapRangeInfo=a.rangeInfo.toJSON(t)),a.spatialReference&&(c.spatialReference=
a.spatialReference.write(null,t)))};h.writeLayers=function(a,c,e,t){c[e]=this._writeLayers(a,t,"operational-layers")};h.readSourceVersion=function(a,c){const [e,t]=c.version.split(".");return new W.Version(parseInt(e,10),parseInt(t,10))};h.writeSourceVersion=function(a,c,e){c[e]=`${X.major}.${X.minor}`};h.writeTables=function(a,c,e,t){a=this._writeLayers(a,t,"tables");a.length&&(c[e]=a)};h.load=function(a){this.addResolvingPromise(this._loadFromSource());return n.resolve(this)};h.loadAll=function(){return P.loadAll(this,
a=>{a(this.ground,this.basemap,this.layers,this.tables)})};h.read=function(a,c){c={...c,origin:"web-map"};const e=this._getAuthoringPropsState();C.readLoadable(this,a,t=>N.prototype.read.call(this,a,t),c);this._restoreAuthoringPropsFromState(e)};h.write=function(a,c){if("loaded"!==this.loadStatus)throw a=new w("webmap:not-loaded","Web map must be loaded before it can be serialized"),Y.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),a;this._removeDanglingLayerRefs();
c={...c,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return N.prototype.write.call(this,a,c)};h.save=async function(a){a=a||{};this._validateItem();await this._updateFromPromise;await this.load();await this._loadLayerContainers();this._validateMap();const c=this.portalItem,e={origin:"web-map",messages:[],writtenProperties:[],url:c.itemUrl&&u.urlToObject(c.itemUrl),portal:c.portal||D.getDefault()},t=this.write(null,e);this._validateJSONForWriting(e,a);await this._updateItemProperties(c);
await this._updateItem(c,t,e);await this._updateItemThumbnail();return c};h.saveAs=async function(a,c){c=c||{};a=this._getPortalItem(a);await this._updateFromPromise;await this.load();await this._loadLayerContainers();this._validateMap();const e={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:a.portal},t=this.write(null,e);this._validateJSONForWriting(e,c);await this._updateItemPropertiesForSaveAs(a);const A=this._getThumbnailState();await this._createItem(a,t,e,c);this._restoreThumbnailFromState(A);
await this._updateItemThumbnail();return a};h.updateFrom=async function(a,c){this._updateFromPromise=a=this._updateFromInternal(a,c);await a;a===this._updateFromPromise&&(this._updateFromPromise=null)};h.getLayerJSONFromResourceInfo=function(a){var c,e,t,A;const L=this.resourceInfo;return this._collectAllLayersJSON(g.flatten([null==L?void 0:null==(c=L.baseMap)?void 0:c.baseMapLayers,null==L?void 0:L.operationalLayers,null==(e=this.basemap)?void 0:null==(t=e.resourceInfo)?void 0:null==(A=t.data)?void 0:
A.baseMapLayers])).find(O=>O.id===a.id)};h._collectAllLayersJSON=function(a){return a.reduce((c,e)=>{c.push(e);"GroupLayer"===e.layerType&&(c=c.concat(this._collectAllLayersJSON(e.layers||[])));return c},[])};h._writeLayers=function(a,c,e){c={...c,layerContainerType:e};return a.map(t=>x.unwrap(Q.getLayerJSON(t,"tables"===e?null:this.getLayerJSONFromResourceInfo(t),c))).filter(Boolean).toArray()};h._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):
this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):n.resolve(null)};h._loadFromItem=function(a){return a.load().catch(c=>{throw new w("webmap:load-portal-item","Failed to load portal item",{error:c});}).then(()=>{if("Web Map"!==a.type)throw new w("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:a.type});}).then(()=>a.fetchData()).then(c=>{this.resourceInfo=c;return this._readAndLoadFromJSON(c,{origin:"web-map",portal:a.portal||D.getDefault()})}).then(()=>
this._computeInitialViewpoint())};h._readAndLoadFromJSON=function(a,c){a=this._validateJSON(a);this.read(a,c);return this._loadFromJSON(a,c)};h._validateJSON=function(a){const c=W.Version.parse(a.version||"","webmap");X.validate(c);a.version=`${c.major}.${c.minor}`;return a};h._loadFromJSON=function(a,c){const e={context:{...c,layerContainerType:"operational-layers"}};this.portalItem&&(e.context.portal=this.portalItem.portal||D.getDefault());return(new Promise(function(t,A){m(["./layers/support/layersCreator"],
t,A)})).then(({populateOperationalLayers:t})=>{const A=[];var L=a.operationalLayers;L&&L.length&&A.push(t(this.layers,L,e));L={...e,context:{...e.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const O=a.tables;O&&O.length&&A.push(t(this.tables,O,L));return n.eachAlways(A).then(()=>{})})};h._computeInitialViewpoint=async function(){var a,c;let e=this.initialViewProperties;!(null==(a=e)?0:null==(c=a.viewpoint)?0:c.targetGeometry)&&(a=await this._getExtentFromItem())&&(e=
e?e.clone():new V,e.viewpoint=new U,e.viewpoint.targetGeometry=a,this.initialViewProperties=e)};h._getExtentFromItem=async function(){var a,c;const e=null==(a=this.initialViewProperties)?void 0:a.spatialReference,t=null==(c=this.portalItem)?void 0:c.extent;return e&&t?e.isWGS84?t.clone():e.isWebMercator?G.geographicToWebMercator(t):(await new Promise(function(A,L){m(["./portal/support/geometryServiceUtils"],A,L)})).create(this.portalItem).then(A=>{const L=new ba;L.geometries=[t];L.outSpatialReference=
e;return A.project(L)}).then(A=>A[0]).catch(A=>{Y.error("Error projecting item's extent:",A);return null}):null};h._removeDanglingLayerRefs=function(){var a=this.applicationProperties,c=a&&a.viewing&&a.viewing.search;const e=t=>!!this.allLayers.find(A=>A.id===t);c&&c.layers&&(c.layers=c.layers.filter(t=>e(t.id)));c&&c.tables&&(c.tables=c.tables.filter(t=>!!this.tables.find(A=>A.id===t.id)));(c=a&&a.editing&&a.editing.locationTracking)&&c.info&&!e(c.info.layerId)&&(a.editing=null);(a=this.presentation&&
this.presentation.slides)&&a.forEach(t=>{t.visibleLayers&&(t.visibleLayers=t.visibleLayers.filter(A=>e(A.id)))})};h._validateMap=function(){if(!this.basemap||!this.basemap.baseLayers.length)throw new w("webmap:save","Map does not have a valid basemap with a base layer.");};h._validateItem=function(){if(!this.portalItem)throw Y.error("save: requires the portalItem property to be set"),new w("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)};
h._validateItemType=function(a){if("Web Map"!==a.type)throw new w("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};h._loadLayerContainers=function(){const a=[];this.basemap&&a.push(this.basemap.load());this.ground&&a.push(this.ground.load());return n.eachAlways(a).then(()=>{})};h._loadAllLayers=function(){const a=this._getAllLayersAndTables().map(c=>c.load());return n.eachAlways(a).then(()=>{})};h._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};
h._validateJSONForWriting=function(a,c){a=a.messages.filter(e=>"error"===e.type).map(e=>new w(e.name,e.message,e.details));c.ignoreUnsupported&&(a=a.filter(e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name));if(0<a.length)throw new w("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:a});};h._updateItemProperties=
async function(a){a.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);await this._updateTypeKeywords(a)};h._updateItemPropertiesForSaveAs=async function(a){J.removeTypeKeyword(a,"CollectorDisabled");J.removeTypeKeyword(a,"OfflineDisabled");J.removeTypeKeyword(a,"Workforce Project");J.removeTypeKeyword(a,"Workforce Worker");J.removeTypeKeyword(a,"Workforce Dispatcher");J.removeTypeKeyword(a,"Offline Map Areas");J.removeTypeKeyword(a,"FieldMapsDisabled");await this._updateItemProperties(a)};
h._getWGS84Extent=async function(a){a=a.clone().normalize();let c;if(1<a.length)for(const e of a)c?e.width>c.width&&(c=e):c=e;else c=a[0];return this._projectToWGS84(c)};h._projectToWGS84=async function(a){var c=a.spatialReference;if(c.isWGS84)return a.clone();if(c.isWebMercator)return G.webMercatorToGeographic(a);c=await (await new Promise(function(t,A){m(["./portal/support/geometryServiceUtils"],t,A)})).create(this.portalItem);const e=new ba;e.geometries=[a];e.outSpatialReference=F.WGS84;return(await c.project(e))[0]};
h._updateTypeKeywords=async function(a){J.addTypeKeyword(a,"ArcGIS API for JavaScript");await this._loadAllLayers();this._evalCollectorKeyword(a);this._evalDataEditingKeyword(a);this._evalOfflineKeyword(a);this._evalDeveloperBasemapKeyword(a);a.typeKeywords&&(a.typeKeywords=a.typeKeywords.filter((c,e,t)=>t.indexOf(c)===e))};h._evalCollectorKeyword=function(a){J.hasTypeKeyword(a,"CollectorDisabled")||J.hasTypeKeyword(a,"Workforce Project")||J.hasTypeKeyword(a,"Workforce Worker")||J.hasTypeKeyword(a,
"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?J.removeTypeKeyword(a,"Collector"):J.addTypeKeyword(a,"Collector")};h._evalDataEditingKeyword=function(a){this._hasEditableFeatureLayer()?J.addTypeKeyword(a,"Data Editing"):J.removeTypeKeyword(a,"Data Editing")};h._evalOfflineKeyword=function(a){!J.hasTypeKeyword(a,"OfflineDisabled")&&this._isOfflineCapableMap()?J.addTypeKeyword(a,"Offline"):J.removeTypeKeyword(a,"Offline")};h._evalDeveloperBasemapKeyword=function(a){T.hasDeveloperBasemapLayer(this.basemap)?
J.addTypeKeyword(a,"DeveloperBasemap"):J.removeTypeKeyword(a,"DeveloperBasemap")};h._hasEditableFeatureLayer=function(){return this._getAllLayersAndTables().some(a=>a.loaded&&this._isFeatureServiceLayer(a)&&a.capabilities.operations.supportsEditing&&a.editingEnabled)};h._isFeatureServiceLayer=function(a){return!("feature"!==a.type||!a.source||"feature-layer"!==a.source.type)};h._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(a=>"group"!==a.type).every(a=>a.loaded&&this._isOfflineCapableLayer(a))};
h._isOfflineCapableLayer=function(a){return this._isFeatureServiceLayer(a)&&a.capabilities.operations.supportsSync||("tile"===a.type||"vector-tile"===a.type)&&(a.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(a)||T.isDeveloperBasemapLayer(a))&&a.spatialReference.equals(this.initialViewProperties.spatialReference)};h._isExportableAGOLTileLayer=function(a){return"tile"===a.type?ia.isServerOrServicesAGOLUrl(a.url)&&na.some(c=>-1<a.url.toLowerCase().indexOf("/"+c+"/")):!1};
h._updateItem=async function(a,c,e){await a.update({data:c});this._syncUpInstanceWithItem(a,c,e)};h._createItem=async function(a,c,e,t){const A=this.portalItem,L=!!(A&&A.id&&A.portal.user),O=a.portal;await O._signIn();if(!await this._canCopyItem(A,L,O))throw new w("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await O.user.addItem({item:a,folder:t.folder,data:c});this.portalItem=a;this._syncUpInstanceWithItem(a,c,e)};h._canCopyItem=async function(a,c,e){if(x.isSome(a)&&
a.id&&a.typeKeywords&&-1<a.typeKeywords.indexOf("useOnly")){if(a.portal.portalHostname!==e.portalHostname)return!1;c||await a.reload();return"admin"===a.itemControl||"update"===a.itemControl}return!0};h._syncUpInstanceWithItem=function(a,c,e){aa.MultiOriginJSONSupport.prototype.read.call(this,{version:c.version,authoringApp:c.authoringApp,authoringAppVersion:c.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:a.itemUrl&&u.urlToObject(a.itemUrl)});ha.updateOrigins(e);this.resourceInfo=c};
h._updateItemThumbnail=async function(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())};h._getPortalItem=function(a){a=E.from(a);a.id&&(a=a.clone(),a.id=null);a.type||(a.type="Web Map");a.portal||(a.portal=D.getDefault());this._validateItemType(a);return a};h._updateFromInternal=async function(a,c){c=c||{};await fa.whenTrueOnce(a,"ready");this._updateInitialViewProperties(a,
c);await this._updateThumbnailUrl(a,c)};h._updateInitialViewProperties=function(a,c){if(!c.backgroundExcluded){var e;this.initialViewProperties.background=null==(e=a.background)?void 0:e.clone()}this.initialViewProperties.spatialReference=a.spatialReference.clone();c.viewpointExcluded||(this.initialViewProperties.viewpoint=new U({rotation:a.rotation,scale:c.scalePreserved?a.scale:null,targetGeometry:this._getViewExtent(a)}));if(!c.widgetsExcluded)for(const t of a.persistableViewModels)t.updateWebDocument(this)};
h._getViewExtent=function(a){const c=a.center.clone().normalize();a=a.extent.clone();const e=a.width/2;a.xmin=c.x-e;a.xmax=c.x+e;return a};h._updateThumbnailUrl=async function(a,c){c.thumbnailExcluded||(c=ka.getOptimalThumbnailSize(a,c.thumbnailSize),a=await a.takeScreenshot({format:"png",width:c.width,height:c.height}),this._setAutoGeneratedThumbnail(a.dataUrl))};h._setAutoGeneratedThumbnail=function(a){this.thumbnailUrl=a;this._thumbnailFilename=null};h._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");
this.clear("thumbnailUrl","user");this._thumbnailFilename=null};h._generateCustomThumbnailFilename=function(a){if(u.isDataProtocol(a)){a=(a=(a=u.dataComponents(a))&&a.mediaType)&&R.get(a.toLowerCase())||null;const c=`thumbnail${Date.now()}`;return a?`${c}.${a}`:c}return null};h._getThumbnailState=function(){let a=this.thumbnailUrl;a&&(a=this._isOverridden("thumbnailUrl")?a:u.addQueryParameter(a,"w","8192"));return{thumbnailUrl:a,filename:this._thumbnailFilename}};h._restoreThumbnailFromState=function(a){this.thumbnailUrl=
a.thumbnailUrl;this._thumbnailFilename=a.filename};h._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};h._restoreAuthoringPropsFromState=function(a){a.isAuthoringAppSetByUser?this.authoringApp=a.authoringApp:this._isAuthoringAppSetByUser=!1;a.isAuthoringAppVersionSetByUser?this.authoringAppVersion=a.authoringAppVersion:
this._isAuthoringAppVersionSetByUser=!1};S.fromJSON=function(a){if(!a)throw new w("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:a})};d._createClass(S,[{key:"authoringApp",set:function(a){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",a)}},{key:"authoringAppVersion",set:function(a){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",a)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||
null},set:function(a){a?(this._override("thumbnailUrl",a),this._thumbnailFilename=this._generateCustomThumbnailFilename(a)):this._clearThumbnailOverride()}}]);return S}(aa.MultiOriginJSONMixin(I.LoadableMixin(H.EsriPromiseMixin(Z))));f.VERSION=X;b.__decorate([r.property({type:la,json:{write:!0}})],f.prototype,"applicationProperties",void 0);b.__decorate([r.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,"authoringApp",null);b.__decorate([y.writer("authoringApp")],
f.prototype,"writeAuthoringApp",null);b.__decorate([r.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,"authoringAppVersion",null);b.__decorate([y.writer("authoringAppVersion")],f.prototype,"writeAuthoringAppVersion",null);b.__decorate([r.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],f.prototype,"basemap",void 0);b.__decorate([r.property({type:ea,json:{write:{overridePolicy(N){return{enabled:!!(N&&0<N.length),ignoreOrigin:!0}}}}})],f.prototype,
"bookmarks",void 0);b.__decorate([r.property({type:V,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:da},"initialState.viewpoint":{type:U},mapRangeInfo:{type:ca},spatialReference:{type:F}}}}})],f.prototype,"initialViewProperties",void 0);b.__decorate([B.reader("initialViewProperties")],f.prototype,"readInitialViewProperties",null);b.__decorate([y.writer("initialViewProperties")],f.prototype,
"writeInitialViewProperties",null);b.__decorate([r.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],f.prototype,"layers",void 0);b.__decorate([y.writer("layers")],f.prototype,"writeLayers",null);b.__decorate([r.property({type:E})],f.prototype,"portalItem",void 0);b.__decorate([r.property({json:{write:!0}})],f.prototype,"presentation",void 0);b.__decorate([r.property()],f.prototype,"resourceInfo",void 0);b.__decorate([r.property({readOnly:!0,type:W.Version,json:{read:{source:"version"},
write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],f.prototype,"sourceVersion",void 0);b.__decorate([B.reader("sourceVersion")],f.prototype,"readSourceVersion",null);b.__decorate([y.writer("sourceVersion")],f.prototype,"writeSourceVersion",null);b.__decorate([r.property({json:{read:!1,write:{ignoreOrigin:!0}}})],f.prototype,"tables",void 0);b.__decorate([y.writer("tables")],f.prototype,"writeTables",null);b.__decorate([r.property({dependsOn:["portalItem.thumbnailUrl"]})],f.prototype,
"thumbnailUrl",null);b.__decorate([r.property({type:ja,json:{write:!0}})],f.prototype,"widgets",void 0);return f=b.__decorate([K.subclass("esri.WebMap")],f)});