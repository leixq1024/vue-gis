// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define("exports ../core/global ../core/maybe ../core/Error ./messages ../request".split(" "),function(g,q,r,l,t,u){async function v(c,a,e,b){var d=a.exec(e);if(!d)throw new l("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${a}"`);a=d[1]?`${d[1]}/`:"";d=d[2];const f=t.normalizeMessageBundleLocale(b);b=`${a}${d}.json`;a=f?`${a}${d}_${f}.json`:b;let h;try{h=await m(c(a))}catch(n){if(a===b)throw n;try{h=await m(c(b))}catch{throw new l("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,
{error:n});}}return h}async function m(c){return r.isSome(k.fetchBundleAsset)?k.fetchBundleAsset(c):(await u(c,{responseType:"json"})).data}let p=function(){function c({base:a="",pattern:e,location:b=new URL(window.location.href)}){let d;d="string"===typeof b?f=>(new URL(f,new URL(b,q.location))).href:b instanceof URL?f=>(new URL(f,b)).href:b;this.pattern="string"===typeof e?new RegExp(`^${e}`):e;this.getAssetUrl=d;a=a?a.endsWith("/")?a:a+"/":"";this.matcher=new RegExp(`^${a}(?:(.*)\/)?(.*)$`)}c.prototype.fetchMessageBundle=
function(a,e){return v(this.getAssetUrl,this.matcher,a,e)};return c}();const k={};g.JSONLoader=p;g.createJSONLoader=function(c){return new p(c)};g.test=k;Object.defineProperty(g,"__esModule",{value:!0})});