// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
/*
 tabbable 5.1.4
 @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
 focus-trap 6.2.2
 @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../widgets/support/decorators/messageBundle ../widgets/support/decorators/renderable ../chunks/index ../widgets/support/widget ../widgets/Widget".split(" "),function(S,v,G,ia,ja,A,ka,T,la,ma,na,U,C,q,V,m){function H(a,
c){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable}));e.push.apply(e,d)}return e}function W(a){for(var c=1;c<arguments.length;c++){var e=null!=arguments[c]?arguments[c]:{};c%2?H(Object(e),!0).forEach(function(d){var f=e[d];d in a?Object.defineProperty(a,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[d]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(e)):H(Object(e)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(e,d))})}return a}G='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var I=G.join(","),D="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X=
function(a,c,e){var d=Array.prototype.slice.apply(a.querySelectorAll(I));c&&D.call(a,I)&&d.unshift(a);return d=d.filter(e)},J=function(a){var c=parseInt(a.getAttribute("tabindex"),10);return isNaN(c)?"true"===a.contentEditable||("AUDIO"===a.nodeName||"VIDEO"===a.nodeName||"DETAILS"===a.nodeName)&&null===a.getAttribute("tabindex")?0:a.tabIndex:c},Y=function(a,c){return a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex},Z=function(a){return"DETAILS"===a.tagName&&Array.prototype.slice.apply(a.children).some(function(c){return"SUMMARY"===
c.tagName})},aa=function(a){if("hidden"===getComputedStyle(a).visibility)return!0;var c=D.call(a,"details\x3esummary:first-of-type")?a.parentElement:a;if(D.call(c,"details:not([open]) *"))return!0;for(;a;){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1},K=function(a){var c;(c=a.disabled)||(c="INPUT"===a.tagName&&"hidden"===a.type);return c||aa(a)||Z(a)?!1:!0},ba=function(a){var c;if(!(c=!K(a))&&(c="INPUT"===a.tagName&&"radio"===a.type)){if(a.name){c=(a.form||a.ownerDocument).querySelectorAll('input[type\x3d"radio"][name\x3d"'+
a.name+'"]');b:{for(var e=0;e<c.length;e++)if(c[e].checked&&c[e].form===a.form){c=c[e];break b}c=void 0}c=!c||c===a}else c=!0;c=!c}return c||0>J(a)?!1:!0},ca=function(a,c){c=c||{};var e=[],d=[];X(a,c.includeContainer,ba).forEach(function(f,g){var r=J(f);0===r?e.push(f):d.push({documentOrder:g,tabIndex:r,node:f})});return d.sort(Y).map(function(f){return f.node}).concat(e)},da=G.concat("iframe").join(","),ea=function(a){if(!a)throw Error("No node provided");return!1===D.call(a,da)?!1:K(a)},L,M=function(){var a=
[];return{activateTrap:function(c){if(0<a.length){var e=a[a.length-1];e!==c&&e.pause()}e=a.indexOf(c);-1!==e&&a.splice(e,1);a.push(c)},deactivateTrap:function(c){c=a.indexOf(c);-1!==c&&a.splice(c,1);0<a.length&&a[a.length-1].unpause()}}}(),ha=function(a,c){var e=document,d=W({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},c),f=[],g=[],r=null,w=null,l=!1,t=!1,x=function(k){return f.some(function(b){return b.contains(k)})},n=function(k){var b=d[k];if(!b)return null;var h=b;if("string"===
typeof b&&(h=e.querySelector(b),!h))throw Error("`".concat(k,"` refers to no known node"));if("function"===typeof b&&(h=b(),!h))throw Error("`".concat(k,"` did not return a node"));return h},y=function(){var k=null!==n("initialFocus")?n("initialFocus"):x(e.activeElement)?e.activeElement:(k=g[0])&&k.firstTabbableNode||n("fallbackFocus");if(!k)throw Error("Your focus-trap needs to have at least one focusable element");return k},E=function(){g=f.map(function(k){k=ca(k);if(0<k.length)return{firstTabbableNode:k[0],
lastTabbableNode:k[k.length-1]}}).filter(function(k){return!!k});if(0>=g.length&&!n("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");},B=function h(b){b!==e.activeElement&&(b&&b.focus?(b.focus({preventScroll:!!d.preventScroll}),w=b,b.tagName&&"input"===b.tagName.toLowerCase()&&"function"===typeof b.select&&b.select()):h(y()))},F=function(b){x(b.target)||(d.clickOutsideDeactivates?u.deactivate({returnFocus:d.returnFocusOnDeactivate&&
!ea(b.target)}):d.allowOutsideClick&&("boolean"===typeof d.allowOutsideClick?d.allowOutsideClick:d.allowOutsideClick(b))||b.preventDefault())},N=function(b){var h=x(b.target);h||b.target instanceof Document?h&&(w=b.target):(b.stopImmediatePropagation(),B(w||y()))},fa=function(b){E();var h=null;if(0<g.length)if(b.shiftKey){var p=g.findIndex(function(z){return b.target===z.firstTabbableNode});0<=p&&(h=g[0===p?g.length-1:p-1].lastTabbableNode)}else p=g.findIndex(function(z){return b.target===z.lastTabbableNode}),
0<=p&&(h=g[p===g.length-1?0:p+1].firstTabbableNode);else h=n("fallbackFocus");h&&(b.preventDefault(),B(h))},O=function(b){!1===d.escapeDeactivates||"Escape"!==b.key&&"Esc"!==b.key&&27!==b.keyCode?"Tab"!==b.key&&9!==b.keyCode||fa(b):(b.preventDefault(),u.deactivate())},P=function(b){d.clickOutsideDeactivates||x(b.target)||d.allowOutsideClick&&("boolean"===typeof d.allowOutsideClick?d.allowOutsideClick:d.allowOutsideClick(b))||(b.preventDefault(),b.stopImmediatePropagation())},Q=function(){if(l)return M.activateTrap(u),
L=d.delayInitialFocus?setTimeout(function(){B(y())},0):B(y()),e.addEventListener("focusin",N,!0),e.addEventListener("mousedown",F,{capture:!0,passive:!1}),e.addEventListener("touchstart",F,{capture:!0,passive:!1}),e.addEventListener("click",P,{capture:!0,passive:!1}),e.addEventListener("keydown",O,{capture:!0,passive:!1}),u},R=function(){if(l)return e.removeEventListener("focusin",N,!0),e.removeEventListener("mousedown",F,!0),e.removeEventListener("touchstart",F,!0),e.removeEventListener("click",
P,!0),e.removeEventListener("keydown",O,!0),u};var u={activate:function(b){if(l)return this;E();l=!0;t=!1;r=e.activeElement;(b=b&&b.onActivate?b.onActivate:d.onActivate)&&b();Q();return this},deactivate:function(b){if(!l)return this;clearTimeout(L);R();t=l=!1;M.deactivateTrap(u);var h=b&&void 0!==b.onDeactivate?b.onDeactivate:d.onDeactivate;h&&h();(b&&void 0!==b.returnFocus?b.returnFocus:d.returnFocusOnDeactivate)&&setTimeout(function(){var p=r,z=n("setReturnFocus");B(z?z:p)},0);return this},pause:function(){if(t||
!l)return this;t=!0;R();return this},unpause:function(){if(!t||!l)return this;t=!1;E();Q();return this},updateContainerElements:function(b){f=[].concat(b).filter(Boolean).map(function(h){return"string"===typeof h?e.querySelector(h):h});l&&E();return this}};u.updateContainerElements(a);return u};m=function(a){function c(d,f){var g=a.call(this,d,f)||this;g.container=document.createElement("div");g.content=null;g.open=!1;g._close=()=>{g.open=!1};document.body.appendChild(g.container);g.own(g.watch("open",
()=>g._toggleFocusTrap()));return g}S._inheritsLoose(c,a);var e=c.prototype;e.destroy=function(){this._destroyFocusTrap()};e.render=function(){var d=this.id;const {open:f,content:g,title:r,messages:w}=this;var l=f&&!!g;const t={["esri-identity-modal--open"]:l,["esri-identity-modal--closed"]:!l},x=q.jsx("button",{class:"esri-identity-modal__close-button","aria-label":w.close,title:w.close,bind:this,onclick:this._close},q.jsx("span",{"aria-hidden":"true",class:"esri-icon-close"})),n=`${d}_title`;d=
`${d}_content`;const y=r?q.jsx("h1",{id:n,class:"esri-identity-modal__title"},r):null;l=l?q.jsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":n,"aria-describedby":d,afterCreate:this._createFocusTrap},x,y,this._renderContent(d)):null;return q.jsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",t)},l)};e._destroyFocusTrap=function(){var d;null==(d=this._focusTrap)?void 0:d.deactivate({onDeactivate:null});this._focusTrap=null};e._toggleFocusTrap=function(){const {_focusTrap:d,
open:f}=this;d&&(f?d.activate():d.deactivate())};e._createFocusTrap=function(d){this._destroyFocusTrap();requestAnimationFrame(()=>{this._focusTrap=ha(d,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()})};e._renderContent=function(d){const f=this.content;return"string"===typeof f?q.jsx("div",{class:"esri-identity-modal__content",id:d,innerHTML:f}):V.isWidget(f)?q.jsx("div",{class:"esri-identity-modal__content",id:d},f.render()):f instanceof HTMLElement?q.jsx("div",{class:"esri-identity-modal__content",
id:d,bind:f,afterCreate:this._attachToNode}):null};e._attachToNode=function(d){d.appendChild(this)};return c}(m);v.__decorate([A.property({readOnly:!0})],m.prototype,"container",void 0);v.__decorate([A.property(),C.renderable()],m.prototype,"content",void 0);v.__decorate([A.property(),C.renderable()],m.prototype,"open",void 0);v.__decorate([A.property(),C.renderable(),U.messageBundle("esri/t9n/common")],m.prototype,"messages",void 0);v.__decorate([A.property({aliasOf:"messages.auth.signIn"}),C.renderable()],
m.prototype,"title",void 0);return m=v.__decorate([T.subclass("esri.identity.IdentityModal")],m)});