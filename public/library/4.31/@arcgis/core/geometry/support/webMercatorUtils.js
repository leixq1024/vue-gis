/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{clone as t}from"../../core/lang.js";import s from"../SpatialReference.js";import{h as n,f as r,b as e,i,j as o}from"../../chunks/unitUtils.js";import"../../chunks/tslib.es6.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/maybe.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/tracking.js";import"../../chunks/ensureType.js";import"../../core/Error.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/ObservableBase.js";import"../../core/scheduling.js";import"../../core/promiseUtils.js";import"../../core/JSONSupport.js";import"../../chunks/writer.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../../core/urlUtils.js";function a(t){return 57.29577951308232*t}function p(t){return.017453292519943*t}function u(t){return t/n.radius}function c(t){return Math.PI/2-2*Math.atan(Math.exp(-t/n.radius))}function l(t){return null!=t.wkid||null!=t.wkt}const h=[0,0];function m(t,s,n,r,e){const i=t,o=e;if(o.spatialReference=n,"x"in i&&"x"in o)[o.x,o.y]=s(i.x,i.y,h,r);else if("xmin"in i&&"xmin"in o)[o.xmin,o.ymin]=s(i.xmin,i.ymin,h,r),[o.xmax,o.ymax]=s(i.xmax,i.ymax,h,r);else if("paths"in i&&"paths"in o||"rings"in i&&"rings"in o){const t="paths"in i?i.paths:i.rings,n=[];let e;for(let i=0;i<t.length;i++){const o=t[i];e=[],n.push(e);for(let t=0;t<o.length;t++)e.push(s(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&e[t].push(o[t][2]),o[t].length>3&&e[t].push(o[t][3])}"paths"in o?o.paths=n:o.rings=n}else if("points"in i&&"points"in o){const t=i.points,n=[];for(let e=0;e<t.length;e++)n[e]=s(t[e][0],t[e][1],[0,0],r),t[e].length>2&&n[e].push(t[e][2]),t[e].length>3&&n[e].push(t[e][3]);o.points=n}return e}function f(t,s){const n=t&&(l(t)?t:t.spatialReference),o=s&&(l(s)?s:s.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||s&&"type"in s&&"mesh"===s.type||!n||!o)&&(!!r(o,n)||e(o)&&i(n)||e(n)&&i(o))}function j(n,o){if(null==n)return null;const a=n.spatialReference,p=o&&(l(o)?o:o.spatialReference);return f(a,p)?r(a,p)?t(n):e(p)?m(n,g,s.WebMercator,!1,t(n)):i(p)?m(n,x,s.WGS84,!1,t(n)):null:null}function g(t,s,r=[0,0]){s>89.99999?s=89.99999:s<-89.99999&&(s=-89.99999);const e=p(s);return r[0]=p(t)*n.radius,r[1]=n.halfSemiMajorAxis*Math.log((1+Math.sin(e))/(1-Math.sin(e))),r}function x(t,s,r=[0,0],e=!1){if(t===o[0])r[0]=-180;else if(t===o[1])r[0]=180;else{const s=a(t/n.radius);r[0]=e?s:s-360*Math.floor((s+180)/360)}return r[1]=a(Math.PI/2-2*Math.atan(Math.exp(-s/n.radius))),r}function k(n,r=!1,e=t(n)){return m(n,g,s.WebMercator,r,e)}function M(n,r=!1,e=t(n)){return m(n,x,s.WGS84,r,e)}export{f as canProject,k as geographicToWebMercator,g as lngLatToXY,j as project,M as webMercatorToGeographic,u as x2lon,x as xyToLngLat,c as y2lat};
