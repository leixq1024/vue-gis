/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import"../../geometry.js";import t from"../../PopupTemplate.js";import"../../renderers/ClassBreaksRenderer.js";import"../../renderers/DictionaryRenderer.js";import"../../renderers/DotDensityRenderer.js";import"../../renderers/HeatmapRenderer.js";import"../../renderers/PieChartRenderer.js";import"../../renderers/Renderer.js";import"../../renderers/SimpleRenderer.js";import"../../renderers/UniqueValueRenderer.js";import{fromJSON as r,r as s}from"../../renderers/support/jsonUtils.js";import{clone as o}from"../../core/lang.js";import{M as i}from"../../chunks/MultiOriginJSONSupport.js";import"../../core/workers/workers.js";import{property as p}from"../../core/accessorSupport/decorators/property.js";import"../../chunks/Logger.js";import{subclass as n}from"../../core/accessorSupport/decorators/subclass.js";import{w as a}from"../../chunks/writer.js";import{O as l}from"../../core/Accessor.js";import{initializeProjection as m,project as u}from"../../geometry/projection.js";import c from"../../geometry/SpatialReference.js";import{w as j}from"../../chunks/unitUtils.js";import h from"../Layer.js";import{F as y}from"../../chunks/FeatureStore.js";import{Q as d}from"../../chunks/QueryEngine.js";import{d as g,c as f}from"../../chunks/clientSideDefaults.js";import{d as b}from"../../chunks/fieldProperties.js";import{fetchClientDataAtKeys as k}from"../../rest/knowledgeGraphService.js";import{BlendLayer as S,blendModeProperty as w,effectProperty as I}from"../mixins/BlendLayer.js";import{FeatureEffectLayer as T,featureEffectProperty as v}from"../mixins/FeatureEffectLayer.js";import{FeatureReductionLayer as C,f as O}from"../mixins/FeatureReductionLayer.js";import{OrderedLayer as L,orderByProperty as R}from"../mixins/OrderedLayer.js";import{RefreshableLayer as E}from"../mixins/RefreshableLayer.js";import{ScaleRangeLayer as U}from"../mixins/ScaleRangeLayer.js";import{TemporalLayer as F,useViewTimeProperty as x}from"../mixins/TemporalLayer.js";import{l as D,a as M,m as G,c as N,o as P,p as Q}from"../../chunks/commonProperties2.js";import V from"../support/Field.js";import{fixRendererFields as _,fixTimeInfoFields as A}from"../support/fieldUtils.js";import q from"../support/LabelClass.js";import{r as J}from"../../chunks/labelingInfo.js";import B from"../support/TimeInfo.js";import z from"../../rest/support/FeatureSet.js";import Z from"../../rest/support/Query.js";import{createPopupTemplate as H}from"../../support/popupUtils.js";import K from"../../core/workers/RemoteClient.js";import W from"../../geometry/Extent.js";import $ from"../../geometry/Polygon.js";import X from"../../geometry/Polyline.js";import Y from"../../geometry/Point.js";import{f as ee}from"../../chunks/typeUtils.js";import"../../chunks/ensureType.js";import"../../geometry/Geometry.js";import"../../core/JSONSupport.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../core/Error.js";import"../../config.js";import"../../chunks/reader.js";import"../../core/Handles.js";import"../../chunks/maybe.js";import"../../chunks/metadata.js";import"../../chunks/ObservableBase.js";import"../../chunks/tracking.js";import"../../core/scheduling.js";import"../../core/promiseUtils.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../geometry/Multipoint.js";import"../../chunks/zmUtils.js";import"../../geometry/support/webMercatorUtils.js";import"../../core/accessorSupport/decorators/cast.js";import"../../geometry/support/jsonUtils.js";import"../../chunks/coordsUtils.js";import"../../chunks/Axis.js";import"../../chunks/extentUtils.js";import"../../chunks/boundsUtils.js";import"../../chunks/aaBoundingRect.js";import"../../chunks/mathUtils.js";import"../../core/Clonable.js";import"../../core/Collection.js";import"../../core/Evented.js";import"../../chunks/shared.js";import"../../chunks/SimpleObservable.js";import"../../popup/content.js";import"../../popup/content/AttachmentsContent.js";import"../../popup/content/Content.js";import"../../popup/content/CustomContent.js";import"../../popup/content/ExpressionContent.js";import"../../popup/ElementExpressionInfo.js";import"../../popup/content/FieldsContent.js";import"../../popup/FieldInfo.js";import"../../chunks/enumeration.js";import"../../popup/support/FieldInfoFormat.js";import"../../chunks/date.js";import"../../chunks/locale.js";import"../../chunks/datetime.js";import"../../popup/content/MediaContent.js";import"../../popup/content/BarChartMediaInfo.js";import"../../popup/content/mixins/ChartMediaInfo.js";import"../../popup/content/mixins/MediaInfo.js";import"../../popup/content/support/ChartMediaInfoValue.js";import"../../Color.js";import"../../chunks/colorUtils.js";import"../../popup/content/support/ChartMediaInfoValueSeries.js";import"../../chunks/chartMediaInfoUtils.js";import"../../popup/content/ColumnChartMediaInfo.js";import"../../popup/content/ImageMediaInfo.js";import"../../popup/content/support/ImageMediaInfoValue.js";import"../../popup/content/LineChartMediaInfo.js";import"../../popup/content/PieChartMediaInfo.js";import"../../popup/content/RelationshipContent.js";import"../../popup/support/RelatedRecordsInfoFieldOrder.js";import"../../popup/content/TextContent.js";import"../../popup/content/UtilityNetworkAssociationsContent.js";import"../../popup/support/UtilityNetworkAssociationType.js";import"../../popup/ExpressionInfo.js";import"../../popup/LayerOptions.js";import"../../popup/RelatedRecordsInfo.js";import"../../support/actions/ActionBase.js";import"../../core/Identifiable.js";import"../../support/actions/ActionButton.js";import"../../support/actions/ActionToggle.js";import"../../core/sql.js";import"../../intl.js";import"../../chunks/number.js";import"../../chunks/substitute.js";import"../../chunks/messages.js";import"../../symbols.js";import"../../symbols/CIMSymbol.js";import"../../symbols/Symbol.js";import"../../symbols/ExtrudeSymbol3DLayer.js";import"../../symbols/Symbol3DLayer.js";import"../../chunks/utils4.js";import"../../symbols/edges/Edges3D.js";import"../../chunks/screenUtils.js";import"../../chunks/materialUtils.js";import"../../chunks/opacityUtils.js";import"../../symbols/edges/SketchEdges3D.js";import"../../symbols/edges/SolidEdges3D.js";import"../../chunks/Symbol3DMaterial.js";import"../../chunks/vec3f64.js";import"../../symbols/FillSymbol.js";import"../../symbols/SimpleLineSymbol.js";import"../../symbols/LineSymbol.js";import"../../symbols/LineSymbolMarker.js";import"../../chunks/lineMarkers.js";import"../../symbols/FillSymbol3DLayer.js";import"../../symbols/patterns/LineStylePattern3D.js";import"../../symbols/patterns/StylePattern3D.js";import"../../chunks/utils5.js";import"../../chunks/colors.js";import"../../chunks/symbolLayerUtils3D.js";import"../../chunks/aaBoundingBox.js";import"../../symbols/Font.js";import"../../symbols/IconSymbol3DLayer.js";import"../../chunks/persistableUrlUtils.js";import"../../symbols/LabelSymbol3D.js";import"../../symbols/Symbol3D.js";import"../../chunks/collectionUtils.js";import"../../portal/Portal.js";import"../../core/Loadable.js";import"../../core/Promise.js";import"../../portal/PortalGroup.js";import"../../portal/PortalQueryParams.js";import"../../portal/PortalQueryResult.js";import"../../portal/PortalUser.js";import"../../portal/PortalFolder.js";import"../../symbols/LineSymbol3DLayer.js";import"../../symbols/LineStyleMarker3D.js";import"../../symbols/ObjectSymbol3DLayer.js";import"../../symbols/PathSymbol3DLayer.js";import"../../symbols/TextSymbol3DLayer.js";import"../../symbols/WaterSymbol3DLayer.js";import"../../symbols/support/StyleOrigin.js";import"../../chunks/Thumbnail.js";import"../../chunks/calloutUtils.js";import"../../symbols/callouts/Callout3D.js";import"../../symbols/callouts/LineCallout3D.js";import"../../symbols/support/Symbol3DVerticalOffset.js";import"../../symbols/LineSymbol3D.js";import"../../symbols/MarkerSymbol.js";import"../../symbols/MeshSymbol3D.js";import"../../symbols/PictureFillSymbol.js";import"../../chunks/urlUtils.js";import"../../symbols/PictureMarkerSymbol.js";import"../../symbols/PointSymbol3D.js";import"../../symbols/PolygonSymbol3D.js";import"../../core/reactiveUtils.js";import"../../chunks/asyncUtils.js";import"../../symbols/SimpleFillSymbol.js";import"../../symbols/SimpleMarkerSymbol.js";import"../../symbols/TextSymbol.js";import"../../symbols/WebStyleSymbol.js";import"../../renderers/mixins/VisualVariablesMixin.js";import"../../renderers/visualVariables/ColorVariable.js";import"../../renderers/visualVariables/VisualVariable.js";import"../../renderers/visualVariables/support/ColorStop.js";import"../../renderers/visualVariables/OpacityVariable.js";import"../../renderers/visualVariables/support/OpacityStop.js";import"../../renderers/visualVariables/RotationVariable.js";import"../../renderers/visualVariables/SizeVariable.js";import"../../renderers/visualVariables/support/SizeStop.js";import"../../chunks/sizeVariableUtils.js";import"../../chunks/visualVariableUtils.js";import"../../Graphic.js";import"../../chunks/compilerUtils.js";import"../../chunks/lengthUtils.js";import"../../renderers/support/ClassBreakInfo.js";import"../../chunks/commonProperties.js";import"../../symbols/support/jsonUtils.js";import"../../chunks/layerUtils.js";import"../../chunks/defaults.js";import"../../chunks/defaultsJSON.js";import"../../chunks/RendererLegendOptions.js";import"../../renderers/support/AuthoringInfo.js";import"../../renderers/support/AuthoringInfoVisualVariable.js";import"../../chunks/colorRamps.js";import"../../rest/support/AlgorithmicColorRamp.js";import"../../rest/support/ColorRamp.js";import"../../rest/support/MultipartColorRamp.js";import"../../chunks/LRUCache.js";import"../../chunks/MemCache.js";import"../../chunks/Version2.js";import"../support/FieldsIndex.js";import"../../chunks/UnknownTimeZone.js";import"../../chunks/OverrideHelper.js";import"../../chunks/colorUtils2.js";import"../../chunks/vec4.js";import"../../chunks/common.js";import"../../chunks/vec4f64.js";import"../../chunks/utils7.js";import"../../chunks/enums2.js";import"../../chunks/quantizationUtils.js";import"../../renderers/support/AttributeColorInfo.js";import"../../renderers/support/HeatmapColorStop.js";import"../../chunks/heatmapUtils.js";import"../../chunks/diffUtils.js";import"../../renderers/support/UniqueValue.js";import"../../renderers/support/UniqueValueClass.js";import"../../renderers/support/UniqueValueGroup.js";import"../../renderers/support/UniqueValueInfo.js";import"../../chunks/styleUtils.js";import"../../core/workers/Connection.js";import"../../chunks/Queue.js";import"../../chunks/projectBuffer.js";import"../../chunks/geodesicConstants.js";import"../../geometry/support/GeographicTransformation.js";import"../../geometry/support/GeographicTransformationStep.js";import"../../chunks/zscale.js";import"../../time/TimeExtent.js";import"../../chunks/timeUtils.js";import"../../chunks/featureConversionUtils.js";import"../../chunks/OptimizedFeature.js";import"../../chunks/OptimizedGeometry.js";import"../../chunks/OptimizedFeatureSet.js";import"../../chunks/BoundsStore.js";import"../../chunks/PooledRBush.js";import"../../chunks/quickselect.js";import"../../chunks/timeSupport.js";import"../../chunks/projectionSupport.js";import"../../chunks/json.js";import"../../chunks/optimizedFeatureQueryEngineAdapter.js";import"../../chunks/centroid.js";import"../../geometry/support/normalizeUtils.js";import"../../chunks/normalizeUtilsCommon.js";import"../../chunks/simplify.js";import"../../chunks/utils9.js";import"../../chunks/utils10.js";import"../../core/sql/WhereClause.js";import"../../chunks/TimeOnly.js";import"../../chunks/fieldType.js";import"../../chunks/QueryEngineCapabilities.js";import"../../chunks/utils13.js";import"../../chunks/utils3.js";import"../../chunks/basemapUtils.js";import"../../Basemap.js";import"../../chunks/loadAll.js";import"../../portal/PortalItem.js";import"../../portal/PortalItemResource.js";import"../../portal/PortalRating.js";import"../../support/BasemapStyle.js";import"../../chunks/writeUtils.js";import"../../chunks/utils2.js";import"../../chunks/mat4.js";import"../../chunks/utils11.js";import"../../chunks/generateRendererUtils.js";import"../../chunks/SnappingCandidate.js";import"../../chunks/queryUtils.js";import"../../chunks/Scheduler.js";import"../../core/signal.js";import"../../chunks/debugFlags.js";import"../../chunks/capabilities.js";import"../../rest/knowledgeGraph/GraphQueryResult.js";import"../../chunks/GraphQueryResultHeader.js";import"../../rest/knowledgeGraph/GraphQueryStreamingResult.js";import"../../rest/knowledgeGraph/KnowledgeGraph.js";import"../../rest/knowledgeGraph/DataModel.js";import"../../rest/knowledgeGraph/EntityType.js";import"../../rest/knowledgeGraph/GraphObjectType.js";import"../../rest/knowledgeGraph/FieldIndex.js";import"../../rest/knowledgeGraph/GraphProperty.js";import"../../rest/knowledgeGraph/RelationshipType.js";import"../../rest/knowledgeGraph/ServiceDefinition.js";import"../../rest/knowledgeGraph/Entity.js";import"../../rest/knowledgeGraph/GraphNamedObject.js";import"../../rest/knowledgeGraph/GraphObject.js";import"../../rest/knowledgeGraph/Relationship.js";import"../../rest/knowledgeGraph/SearchIndex.js";import"../../chunks/ObjectValue.js";import"../../rest/knowledgeGraph/Path.js";import"../../rest/knowledgeGraph/GraphApplyEditsResult.js";import"../../chunks/jsonUtils.js";import"../../chunks/parser.js";import"../support/FeatureEffect.js";import"../support/FeatureFilter.js";import"../../chunks/DataLayerSource.js";import"../../chunks/domains.js";import"../support/CodedValueDomain.js";import"../support/Domain.js";import"../support/InheritedDomain.js";import"../support/RangeDomain.js";import"../../chunks/FullTextSearch.js";import"../../chunks/spatialRelationships.js";import"../../rest/support/StatisticDefinition.js";import"../support/AggregateField.js";import"../support/ExpressionInfo.js";import"../../chunks/layerContainerType.js";import"../../chunks/FeatureReduction.js";import"../support/FeatureReductionBinning.js";import"../../chunks/featureLayerUtils.js";import"../../chunks/uuid.js";import"../../chunks/featureQueryAll.js";import"../../rest/support/AttachmentQuery.js";import"../../rest/support/RelationshipQuery.js";import"../../chunks/ElevationInfo.js";import"../../chunks/unitConversionUtils.js";import"../../tables/AttributeTableTemplate.js";import"../../tables/elements/AttributeTableGroupElement.js";import"../../tables/elements/AttributeTableElement.js";import"../../tables/support/elements.js";import"../../tables/elements/AttributeTableAttachmentElement.js";import"../../tables/elements/AttributeTableFieldElement.js";import"../../tables/elements/AttributeTableRelationshipElement.js";import"../../chunks/labelUtils.js";import"../support/FeatureReductionCluster.js";import"../support/FeatureReductionSelection.js";import"../../chunks/clusterUtils.js";import"../../chunks/MD5.js";import"../../chunks/OrderByInfo.js";import"../../time/TimeInterval.js";const te="ESRI__ID",re="ESRI__OriginID",se="ESRI__DestID",oe="ESRI__LayoutGeometry",ie="ESRI__AggregationCount",pe="LC.ESRI__IsSpatial",ne=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function ae(e,t){return(async(e,t)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const s of t)r.set(s,ne(e,s));const s=await k(e.dataManager.knowledgeGraph,Array.from(r.values()));for(const t of[...e.layers,...e.tables]){const r=t.objectType.name;if(null===r)continue;const o=s.get(ne(e,r));if(o){const e=JSON.parse(o);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),t.read(e,{origin:"service"})}}})(e,t)}const le=b(),me=t=>{let r=class extends t{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return e([p(le.fields)],r.prototype,"fields",void 0),e([p(le.fieldsIndex)],r.prototype,"fieldsIndex",void 0),r=e([n("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],r),r};function ue(e){if(!e.json)return e;e.json.write=ce(e.json.write);const t=e.json.origins;if(!t)return e;let r;for(r in t){const e=t[r];e&&(e.write=ce(e.write))}return e}function ce(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=function(e){const{target:t,writer:r,overridePolicy:s,...o}=e;return function(e,t){const r=he.call(this,e,t);return r.enabled?{...o,...r}:r}}(e)),e):!0===e?je():e}function je(){return{overridePolicy:he}}function he(e,t){const r=!!this.geometryType;let s={enabled:r};return r&&(s={...s,...ye.call(this,e,t)}),s}function ye(e,t){return{ignoreOrigin:this.originIdOf(t)>l.DEFAULTS}}let de=class extends(me(C(T(S(L(F(U(E(i(h)))))))))){constructor(e){super(e),this.blendMode="normal",this.capabilities=g(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.labelingInfo=null,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=te,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new K(e.port1,{channel:e,client:{queryFeatures:(e,t={})=>{const r=Z.fromJSON(e);return this.queryFeaturesJSON(r,t)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const r="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(V.fromJSON({name:t.name,type:r,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(V.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),V.fromJSON({name:ie,type:"esriFieldTypeInteger",alias:ie,editable:!1}),V.fromJSON({name:pe,type:"esriFieldTypeInteger",alias:pe,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?ee.fromJSON(t):null}get geometryFieldName(){if("link-chart"===this.parentCompositeLayer?.type)return oe;const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name);return e?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,r=t?this.objectType?.properties?.[t]:null;return r?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name,r=t?this.objectType?.properties?.[t]:null;return r?.hasZ??!1}set renderer(e){_(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){return this._isOverridden("renderer")?this._get("renderer"):"link-chart"===this.parentCompositeLayer?.type?"relationship"===this.graphType?r(f(ee.toJSON("polyline")).renderer):r(f(ee.toJSON("point")).renderer):r(f(ee.toJSON(this.geometryType)).renderer)}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??c.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return H(this,e)}createQuery(){return new Z({where:"1=1",outFields:["*"]})}getField(e){for(let t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return this.fields[t];return null}getFieldDomain(e,t){return null}async queryFeatures(e,t){const{resolvedQuery:r,queryEngine:s}=await this._setupQueryObjects(e),o=z.fromJSON(await s.executeQuery(r.toJSON(),t?.signal));return o.features.forEach((e=>{e.sourceLayer=this})),o}async queryFeaturesJSON(e,t){const{resolvedQuery:r,queryEngine:s}=await this._setupQueryObjects(e);return await s.executeQuery(r.toJSON(),t?.signal)}async queryFeatureCount(e,t){const{resolvedQuery:r,queryEngine:s}=await this._setupQueryObjects(e);return s.executeQueryForCount(r.toJSON(),t?.signal)}async queryExtent(e={},t){const r={...e,returnGeometry:!0},{resolvedQuery:s,queryEngine:o}=await this._setupQueryObjects(r),i=await o.executeQueryForExtent(s.toJSON(),t?.signal);let p;return p=null!=i.extent?.xmin&&null!=i.extent?.xmax&&null!=i.extent?.ymin&&null!=i.extent?.ymax?new W(i.extent):new W,{count:i.count,extent:p}}async queryObjectIds(e,t){const r=Z.from(e);let s;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)s=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);s=this.loadQueryEngine(e)}return s.executeQueryForIds(r.toJSON(),t?.signal)}loadQueryEngine(e){const t=new y({geometryType:ee.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),r=new d({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:ee.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return r.featureStore.addMany(e),r}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new Z({where:"1=1",outFields:[te]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>{A(this.timeInfo,this.fieldsIndex)}))),Promise.resolve(this)}async _setupQueryObjects(e,t){const r=Z.from(e),s=r.geometry;let o;if(s&&!s.spatialReference?.isWGS84&&(await m(s.spatialReference,j),r.geometry=u(s instanceof $||s instanceof X||s instanceof Y?s:s.extent,j)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)o=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);o=this.loadQueryEngine(e)}return{resolvedQuery:r,queryEngine:o}}};e([p(ue(o(w)))],de.prototype,"blendMode",void 0),e([p()],de.prototype,"capabilities",void 0),e([p({json:{origins:{"web-scene":{write:!1}},write:je()}})],de.prototype,"charts",void 0),e([p({readOnly:!0})],de.prototype,"defaultPopupTemplate",null),e([p({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],de.prototype,"definitionExpression",void 0),e([p()],de.prototype,"displayField",void 0),e([p(ue(o(I)))],de.prototype,"effect",void 0),e([p()],de.prototype,"elevationInfo",void 0),e([p(ue(o(v)))],de.prototype,"featureEffect",void 0),e([p(ue(o(O)))],de.prototype,"featureReduction",null),e([p()],de.prototype,"fields",null),e([p()],de.prototype,"geometryType",null),e([p()],de.prototype,"geometryFieldName",null),e([p({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],de.prototype,"graphType",void 0),e([p({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],de.prototype,"graphTypeName",null),e([p()],de.prototype,"hasM",null),e([p()],de.prototype,"hasZ",null),e([p({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],de.prototype,"id",void 0),e([p(ue(o(D)))],de.prototype,"labelsVisible",void 0),e([p({type:[q],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:J,write:je()}})],de.prototype,"labelingInfo",void 0),e([p({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],de.prototype,"layerType",void 0),e([p(ue(o(M)))],de.prototype,"legendEnabled",void 0),e([p(ue(o(G)))],de.prototype,"maxScale",void 0),e([p(ue(o(N)))],de.prototype,"minScale",void 0),e([p()],de.prototype,"objectIdField",void 0),e([p()],de.prototype,"objectType",void 0),e([p(ue(o(P)))],de.prototype,"opacity",void 0),e([p(ue(o(R)))],de.prototype,"orderBy",void 0),e([p({clonable:!1})],de.prototype,"parent",void 0),e([p()],de.prototype,"parentCompositeLayer",void 0),e([p(ue(o(Q)))],de.prototype,"popupEnabled",void 0),e([p({type:t,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],de.prototype,"popupTemplate",void 0),e([p({type:Number,json:{write:{overridePolicy:ye}}})],de.prototype,"refreshInterval",void 0),e([p({types:s,json:{name:"layerDefinition.drawingInfo.renderer",write:je()}})],de.prototype,"renderer",null),e([p()],de.prototype,"source",void 0),e([p()],de.prototype,"spatialReference",null),e([p({type:B,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],de.prototype,"timeInfo",null),e([p({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],de.prototype,"title",null),e([a("title")],de.prototype,"writeTitle",null),e([p({json:{read:!1}})],de.prototype,"type",void 0),e([p(ue(o(x)))],de.prototype,"useViewTime",void 0),e([p({type:Boolean,json:{name:"visibility",write:je()}})],de.prototype,"visible",void 0),de=e([n("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],de);const ge=de;export{re as a,se as b,oe as c,ie as d,ge as default,pe as e,ae as i,te as s};
