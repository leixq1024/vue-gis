/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{i as e,q as t,a as n}from"./dom.js";import{c as l}from"./component.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.0
 */const s="calciteInternalLabelClick",a="calciteInternalLabelConnected",o="calciteInternalLabelDisconnected",i="calcite-label",r=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,m=new Set;function f(e){if(!e)return;const l=(e=>{const{id:l}=e,s=l&&t(e,{selector:`${i}[for="${l}"]`});if(s)return s;const a=n(e,i);return!a||function(e,t){let n;const l="custom-element-ancestor-check",s=l=>{l.stopImmediatePropagation();const s=l.composedPath();n=s.slice(s.indexOf(t),s.indexOf(e))};return e.addEventListener(l,s,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,s),n.filter((n=>n!==t&&n!==e)).filter((e=>e.tagName?.includes("-"))).length>0}(a,e)?null:a})(e.el);if(c.has(l)&&l===e.labelEl||!l&&m.has(e))return;const f=p.bind(e);if(l){e.labelEl=l;const t=r.get(l)||[];t.push(e),r.set(l,t.sort(E)),c.has(e.labelEl)||(c.set(e.labelEl,v),e.labelEl.addEventListener(s,v)),m.delete(e),document.removeEventListener(a,d.get(e)),u.set(e,f),document.addEventListener(o,f)}else m.has(e)||(f(),document.removeEventListener(o,u.get(e)))}function b(e){if(!e)return;if(m.delete(e),document.removeEventListener(a,d.get(e)),document.removeEventListener(o,u.get(e)),d.delete(e),u.delete(e),!e.labelEl)return;const t=r.get(e.labelEl);1===t.length&&(e.labelEl.removeEventListener(s,c.get(e.labelEl)),c.delete(e.labelEl)),r.set(e.labelEl,t.filter((t=>t!==e)).sort(E)),e.labelEl=null}function E(t,n){return e(t.el,n.el)?-1:1}function h(e){return e.label||e.labelEl?.textContent?.trim()||""}function v(e){const t=e.detail.sourceEvent.target,n=r.get(this),l=n.find((e=>e.el===t));if(n.includes(l))return;const s=n[0];s.disabled||s.onLabelClick(e)}function g(){m.has(this)&&f(this)}function p(){m.add(this);const e=d.get(this)||g.bind(this);d.set(this,e),document.addEventListener(a,e)}async function L(e){if(await l(e),r.has(e))return;const t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame((()=>{for(const e of m)if(e.el===t){f(e);break}}))}export{L as a,o as b,f as c,b as d,h as g,a as l};
