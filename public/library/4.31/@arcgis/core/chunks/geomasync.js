/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{i as n,j as t,m as e,D as r,p as i,k as a,l as o,n as s,s as l}from"./arcadeUtils.js";import{F as u,p as c,i as f,G as m,H as d,x as p,n as w,E as h,d as y,c as j,B as g,g as v,J as P,K as I,L as A,M as F,w as b,O as R,u as S,P as N}from"./languageUtils.js";import{c as O,a as x,b as U}from"./TimeOnly.js";import{g as D}from"./portalUtils.js";import{g as T}from"./unitUtils.js";import k from"../geometry/Extent.js";import C from"../geometry/Geometry.js";import{disjoint as L,intersects as M,touches as E,crosses as J,within as Z,contains as z,overlaps as B,equals as q,relate as G,intersect as Q,union as W,difference as H,symmetricDifference as V,clip as K,cut as X,planarArea as Y,geodesicArea as $,planarLength as _,geodesicLength as nn,distance as tn,densify as en,geodesicDensify as rn,generalize as an,buffer as on,geodesicBuffer as sn,offset as ln,rotate as un,simplify as cn,isSimple as fn,convexHull as mn,nearestCoordinate as dn,nearestVertex as pn}from"../geometry/geometryEngineAsync.js";import wn from"../geometry/Multipoint.js";import hn from"../geometry/Point.js";import yn from"../geometry/Polygon.js";import jn from"../geometry/Polyline.js";import{fromJSON as gn}from"../geometry/support/jsonUtils.js";import vn from"../portal/Portal.js";import{l as Pn}from"./utils23.js";import"../geometry.js";import"./ensureType.js";import"../core/lang.js";import"./Logger.js";import"../config.js";import"../geometry/SpatialReference.js";import"./tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"./maybe.js";import"../core/accessorSupport/decorators/subclass.js";import"./metadata.js";import"./utils.js";import"./handleUtils.js";import"./tracking.js";import"../core/Error.js";import"../core/accessorSupport/decorators/property.js";import"./ObservableBase.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../core/JSONSupport.js";import"./writer.js";import"./jsonMap.js";import"./assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./typeUtils.js";import"../geometry/support/webMercatorUtils.js";import"./reader.js";import"./zmUtils.js";import"../core/accessorSupport/decorators/cast.js";import"./coordsUtils.js";import"./Axis.js";import"./extentUtils.js";import"./boundsUtils.js";import"./aaBoundingRect.js";import"./mathUtils.js";import"./deepClone.js";import"./ImmutableArray.js";import"./featureConversionUtils.js";import"./aaBoundingBox.js";import"./OptimizedFeature.js";import"./OptimizedGeometry.js";import"./OptimizedFeatureSet.js";import"../layers/support/FieldsIndex.js";import"./UnknownTimeZone.js";import"./datetime.js";import"../layers/support/fieldUtils.js";import"../core/sql.js";import"../intl.js";import"./date.js";import"./locale.js";import"./number.js";import"./substitute.js";import"./messages.js";import"./number2.js";import"./shared2.js";import"../layers/support/Field.js";import"./enumeration.js";import"./domains.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"./fieldType.js";import"./hash.js";import"./uuid.js";import"../rest/support/Query.js";import"./DataLayerSource.js";import"./FullTextSearch.js";import"../core/Clonable.js";import"./spatialRelationships.js";import"../rest/support/StatisticDefinition.js";import"../time/TimeExtent.js";import"./timeUtils.js";import"../core/workers/workers.js";import"../core/workers/Connection.js";import"./Queue.js";import"./SimpleObservable.js";import"../core/workers/RemoteClient.js";import"../core/Loadable.js";import"../core/Promise.js";import"../portal/PortalGroup.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalUser.js";import"../portal/PortalFolder.js";function In(n,t,e){if(c(n,2,2,t,e),n[0]instanceof C&&n[1]instanceof C);else if(n[0]instanceof C&&null===n[1]);else if(n[1]instanceof C&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new w(t,h.InvalidParameter,e)}async function An(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return 0;let e=1;(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid)&&(e=s(n.spatialReference)/T(n.spatialReference));let r=0;if("polyline"===n.type)for(const t of n.paths)for(let n=1;n<t.length;n++)r+=l(t[n],t[n-1],e);else if("polygon"===n.type)for(const t of n.rings){for(let n=1;n<t.length;n++)r+=l(t[n],t[n-1],e);(t[0][0]!==t[t.length-1][0]||t[0][1]!==t[t.length-1][1]||void 0!==t[0][2]&&t[0][2]!==t[t.length-1][2])&&(r+=l(t[0],t[t.length-1],e))}else"extent"===n.type&&(r+=2*l([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],e),r+=2*l([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],e),r*=2,r+=4*Math.abs(P(n.zmax,0)*e-P(n.zmin,0)*e));const i=new jn({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[[0,0],[0,r]]]});return _(i,t)}function Fn(s){"async"===s.mode&&(s.functions.disjoint=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null===i[0]||null===i[1]||L(i[0],i[1]))))},s.functions.intersects=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&M(i[0],i[1]))))},s.functions.touches=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&E(i[0],i[1]))))},s.functions.crosses=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&J(i[0],i[1]))))},s.functions.within=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&Z(i[0],i[1]))))},s.functions.contains=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&z(i[0],i[1]))))},s.functions.overlaps=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null!==i[0]&&null!==i[1]&&B(i[0],i[1]))))},s.functions.equals=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(c(i,2,2,n,t),i[0]===i[1]||(i[0]instanceof C&&i[1]instanceof C?q(i[0],i[1]):(f(i[0])&&f(i[1])||!!(m(i[0])&&m(i[1])||d(i[0])&&d(i[1])))&&i[0].equals(i[1])))))},s.functions.relate=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,3,3,n,t),i[0]instanceof C&&i[1]instanceof C)return G(i[0],i[1],p(i[2]));if(i[0]instanceof C&&null===i[1])return!1;if(i[1]instanceof C&&null===i[0])return!1;if(null===i[0]&&null===i[1])return!1;throw new w(n,h.InvalidParameter,t)}))},s.functions.intersection=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null===i[0]||null===i[1]?null:Q(i[0],i[1]))))},s.functions.union=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{const a=[];if(0===(i=u(i)).length)throw new w(n,h.WrongNumberOfParameters,t);if(1===i.length)if(y(i[0])){const e=u(i[0]);for(let r=0;r<e.length;r++)if(null!==e[r]){if(!(e[r]instanceof C))throw new w(n,h.InvalidParameter,t);a.push(e[r])}}else{if(!j(i[0])){if(i[0]instanceof C)return g(O(i[0]),n.spatialReference);if(null===i[0])return null;throw new w(n,h.InvalidParameter,t)}{const e=u(i[0].toArray());for(let r=0;r<e.length;r++)if(null!==e[r]){if(!(e[r]instanceof C))throw new w(n,h.InvalidParameter,t);a.push(e[r])}}}else for(let e=0;e<i.length;e++)if(null!==i[e]){if(!(i[e]instanceof C))throw new w(n,h.InvalidParameter,t);a.push(i[e])}return 0===a.length?null:W(a)}))},s.functions.difference=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null===i[0]?null:null===i[1]?O(i[0]):H(i[0],i[1]))))},s.functions.symmetricdifference=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>(In(i=u(i),n,t),null===i[0]&&null===i[1]?null:null===i[0]?O(i[1]):null===i[1]?O(i[0]):V(i[0],i[1]))))},s.functions.clip=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,2,n,t),!(i[1]instanceof k)&&null!==i[1])throw new w(n,h.InvalidParameter,t);if(null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return null===i[1]?null:K(i[0],i[1])}))},s.functions.cut=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,2,n,t),!(i[1]instanceof jn)&&null!==i[1])throw new w(n,h.InvalidParameter,t);if(null===i[0])return[];if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return null===i[1]?[O(i[0])]:X(i[0],i[1])}))},s.functions.area=function(n,t){return s.standardFunctionAsync(n,t,(async(e,r,i)=>{if(c(i,1,2,n,t),null===(i=u(i))[0])return 0;if(v(i[0])){const e=await i[0].sumArea(x(P(i[1],-1)),!1,n.abortSignal);if(n.abortSignal.aborted)throw new w(n,h.Cancelled,t);return e}if(y(i[0])||j(i[0])){const t=I(i[0],n.spatialReference);return null===t?0:Y(t,x(P(i[1],-1)))}if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return Y(i[0],x(P(i[1],-1)))}))},s.functions.areageodetic=function(n,t){return s.standardFunctionAsync(n,t,(async(e,r,i)=>{if(c(i,1,2,n,t),null===(i=u(i))[0])return 0;if(v(i[0])){const e=await i[0].sumArea(x(P(i[1],-1)),!0,n.abortSignal);if(n.abortSignal.aborted)throw new w(n,h.Cancelled,t);return e}if(y(i[0])||j(i[0])){const t=I(i[0],n.spatialReference);return null===t?0:$(t,x(P(i[1],-1)))}if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return $(i[0],x(P(i[1],-1)))}))},s.functions.length=function(n,t){return s.standardFunctionAsync(n,t,(async(e,r,i)=>{if(c(i,1,2,n,t),null===(i=u(i))[0])return 0;if(v(i[0])){const e=await i[0].sumLength(U(P(i[1],-1)),!1,n.abortSignal);if(n.abortSignal.aborted)throw new w(n,h.Cancelled,t);return e}if(y(i[0])||j(i[0])){const t=A(i[0],n.spatialReference);return null===t?0:_(t,U(P(i[1],-1)))}if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return _(i[0],U(P(i[1],-1)))}))},s.functions.length3d=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(c(i,1,2,n,t),null===(i=u(i))[0])return 0;if(y(i[0])||j(i[0])){const t=A(i[0],n.spatialReference);return null===t?0:!0===t.hasZ?An(t,U(P(i[1],-1))):_(t,U(P(i[1],-1)))}if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return!0===i[0].hasZ?An(i[0],U(P(i[1],-1))):_(i[0],U(P(i[1],-1)))}))},s.functions.lengthgeodetic=function(n,t){return s.standardFunctionAsync(n,t,(async(e,r,i)=>{if(c(i,1,2,n,t),null===(i=u(i))[0])return 0;if(v(i[0])){const e=await i[0].sumLength(U(P(i[1],-1)),!0,n.abortSignal);if(n.abortSignal.aborted)throw new w(n,h.Cancelled,t);return e}if(y(i[0])||j(i[0])){const t=A(i[0],n.spatialReference);return null===t?0:nn(t,U(P(i[1],-1)))}if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return nn(i[0],U(P(i[1],-1)))}))},s.functions.distance=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{i=u(i),c(i,2,3,n,t);let a=i[0];(y(i[0])||j(i[0]))&&(a=F(i[0],n.spatialReference));let o=i[1];if((y(i[1])||j(i[1]))&&(o=F(i[1],n.spatialReference)),!(a instanceof C))throw new w(n,h.InvalidParameter,t);if(!(o instanceof C))throw new w(n,h.InvalidParameter,t);return tn(a,o,U(P(i[2],-1)))}))},s.functions.distancegeodetic=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{i=u(i),c(i,2,3,n,t);const a=i[0],o=i[1];if(!(a instanceof hn))throw new w(n,h.InvalidParameter,t);if(!(o instanceof hn))throw new w(n,h.InvalidParameter,t);const s=new jn({paths:[],spatialReference:a.spatialReference});return s.addPath([a,o]),nn(s,U(P(i[2],-1)))}))},s.functions.densify=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);if(a<=0)throw new w(n,h.InvalidParameter,t);return i[0]instanceof yn||i[0]instanceof jn?en(i[0],a,U(P(i[2],-1))):i[0]instanceof k?en(yn.fromExtent(i[0]),a,U(P(i[2],-1))):i[0]}))},s.functions.densifygeodetic=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);if(a<=0)throw new w(n,h.InvalidParameter,t);return i[0]instanceof yn||i[0]instanceof jn?rn(i[0],a,U(P(i[2],-1))):i[0]instanceof k?rn(yn.fromExtent(i[0]),a,U(P(i[2],-1))):i[0]}))},s.functions.generalize=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,4,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);return an(i[0],a,R(P(i[2],!0)),U(P(i[3],-1)))}))},s.functions.buffer=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);return 0===a?O(i[0]):on(i[0],a,U(P(i[2],-1)))}))},s.functions.buffergeodetic=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);return 0===a?O(i[0]):sn(i[0],a,U(P(i[2],-1)))}))},s.functions.offset=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,6,n,t),null===i[0])return null;if(!(i[0]instanceof yn||i[0]instanceof jn))throw new w(n,h.InvalidParameter,t);const a=b(i[1]);if(isNaN(a))throw new w(n,h.InvalidParameter,t);const o=b(P(i[4],10));if(isNaN(o))throw new w(n,h.InvalidParameter,t);const s=b(P(i[5],0));if(isNaN(s))throw new w(n,h.InvalidParameter,t);return ln(i[0],a,U(P(i[2],-1)),p(P(i[3],"round")).toLowerCase(),o,s)}))},s.functions.rotate=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,2,3,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);const a=i[0]instanceof k?yn.fromExtent(i[0]):i[0],o=b(i[1]);if(isNaN(o))throw new w(n,h.InvalidParameter,t);const s=P(i[2],null);if(null===s)return un(a,o);if(s instanceof hn)return un(a,o,s);throw new w(n,h.InvalidParameter,t)}))},s.functions.centroid=function(e,r){return s.standardFunctionAsync(e,r,((i,a,o)=>{if(o=u(o),c(o,1,1,e,r),null===o[0])return null;let s=o[0];if((y(o[0])||j(o[0]))&&(s=F(o[0],e.spatialReference)),null===s)return null;if(!(s instanceof C))throw new w(e,h.InvalidParameter,r);return s instanceof hn?g(O(s),e.spatialReference):s instanceof yn?s.centroid:s instanceof jn?n(s):s instanceof wn?t(s):s instanceof k?s.center:null}))},s.functions.measuretocoordinate=function(n,t){return s.standardFunctionAsync(n,t,((i,a,o)=>{if(o=u(o),c(o,2,2,n,t),null===o[0])return null;let s=o[0];if((y(o[0])||j(o[0]))&&(s=A(o[0],n.spatialReference)),null===s)return null;if(!(s instanceof C))throw new w(n,h.InvalidParameter,t);if(!(s instanceof jn))throw new w(n,h.InvalidParameter,t);if(S(!1===o[1]))throw new w(n,h.InvalidParameter,t);const l=e(s,o[1]);return l?r.convertObjectToArcadeDictionary(l,N(n),!1,!0):null}))},s.functions.pointtocoordinate=function(n,t){return s.standardFunctionAsync(n,t,((e,a,o)=>{if(o=u(o),c(o,2,2,n,t),null===o[0])return null;let s=o[0];if((y(o[0])||j(o[0]))&&(s=A(o[0],n.spatialReference)),null===s)return null;if(!(s instanceof C))throw new w(n,h.InvalidParameter,t);if(!(s instanceof jn))throw new w(n,h.InvalidParameter,t);const l=o[1];if(null===l)return null;if(!(l instanceof hn))throw new w(n,h.InvalidParameter,t);if(S(!1===o[1]))throw new w(n,h.InvalidParameter,t);const f=i(s,l);return f?r.convertObjectToArcadeDictionary(f,N(n),!1,!0):null}))},s.functions.distancetocoordinate=function(n,t){return s.standardFunctionAsync(n,t,((e,i,o)=>{if(o=u(o),c(o,2,2,n,t),null===o[0])return null;let s=o[0];if((y(o[0])||j(o[0]))&&(s=A(o[0],n.spatialReference)),null===s)return null;if(!(s instanceof C))throw new w(n,h.InvalidParameter,t);if(!(s instanceof jn))throw new w(n,h.InvalidParameter,t);if(S(!1===o[1]))throw new w(n,h.InvalidParameter,t);const l=a(s,o[1]);return l?r.convertObjectToArcadeDictionary(l,N(n),!1,!0):null}))},s.functions.multiparttosinglepart=function(n,t){return s.standardFunctionAsync(n,t,(async(e,r,i)=>{if(i=u(i),c(i,1,1,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);if(i[0]instanceof hn)return[g(O(i[0]),n.spatialReference)];if(i[0]instanceof k)return[g(O(i[0]),n.spatialReference)];const a=await cn(i[0]);if(a instanceof yn){const n=[],t=[];for(let e=0;e<a.rings.length;e++)if(a.isClockwise(a.rings[e])){const t=gn({rings:[a.rings[e]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});n.push(t)}else t.push({ring:a.rings[e],pt:a.getPoint(e,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(a instanceof jn){const n=[];for(let t=0;t<a.paths.length;t++){const e=gn({paths:[a.paths[t]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});n.push(e)}return n}if(i[0]instanceof wn){const t=[],e=g(O(i[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)t.push(e.getPoint(n));return t}return null}))},s.functions.issimple=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,1,1,n,t),null===i[0])return!0;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return fn(i[0])}))},s.functions.simplify=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,1,1,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return cn(i[0])}))},s.functions.convexhull=function(n,t){return s.standardFunctionAsync(n,t,((e,r,i)=>{if(i=u(i),c(i,1,1,n,t),null===i[0])return null;if(!(i[0]instanceof C))throw new w(n,h.InvalidParameter,t);return mn(i[0])}))},s.functions.getuser=function(n,t){return s.standardFunctionAsync(n,t,(async(e,i,a)=>{c(a,0,2,n,t);let s=P(a[1],""),l=!0===s;if(s=!0===s||!1===s?"":p(s),0===a.length||a[0]instanceof o){let t;t=n.services?.portal?n.services.portal:vn.getDefault(),a.length>0&&(t=D(a[0],t));const e=await Pn(t,s,l);if(e){const t=JSON.parse(JSON.stringify(e));for(const n of["lastLogin","created","modified"])void 0!==t[n]&&null!==t[n]&&(t[n]=new Date(t[n]));return r.convertObjectToArcadeDictionary(t,N(n))}return null}let u=null;if(v(a[0])&&(u=a[0]),u){if(l=!1,s)return null;await u.load();const t=await u.getOwningSystemUrl();if(!t){if(!s){const t=await u.getIdentityUser();return t?r.convertObjectToArcadeDictionary({username:t},N(n)):null}return null}let e;e=n.services?.portal?n.services.portal:vn.getDefault(),e=D(new o(t),e);const i=await Pn(e,s,l);if(i){const t=JSON.parse(JSON.stringify(i));for(const n of["lastLogin","created","modified"])void 0!==t[n]&&null!==t[n]&&(t[n]=new Date(t[n]));return r.convertObjectToArcadeDictionary(t,N(n))}return null}throw new w(n,h.InvalidParameter,t)}))},s.functions.nearestcoordinate=function(n,t){return s.standardFunctionAsync(n,t,(async(e,i,a)=>{if(a=u(a),c(a,2,2,n,t),!(a[0]instanceof C||null===a[0]))throw new w(n,h.InvalidParameter,t);if(!(a[1]instanceof hn||null===a[1]))throw new w(n,h.InvalidParameter,t);if(null===a[0]||null===a[1])return null;const o=await dn(a[0],a[1]);return null===o?null:r.convertObjectToArcadeDictionary({coordinate:o.coordinate,distance:o.distance,sideOfLine:0===o.distance?"straddle":o.isRightSide?"right":"left"},N(n),!1,!0)}))},s.functions.nearestvertex=function(n,t){return s.standardFunctionAsync(n,t,(async(e,i,a)=>{if(a=u(a),c(a,2,2,n,t),!(a[0]instanceof C||null===a[0]))throw new w(n,h.InvalidParameter,t);if(!(a[1]instanceof hn||null===a[1]))throw new w(n,h.InvalidParameter,t);if(null===a[0]||null===a[1])return null;const o=await pn(a[0],a[1]);return null===o?null:r.convertObjectToArcadeDictionary({coordinate:o.coordinate,distance:o.distance,sideOfLine:0===o.distance?"straddle":o.isRightSide?"right":"left"},N(n),!1,!0)}))})}export{Fn as registerFunctions};
