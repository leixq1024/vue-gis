/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{e as t}from"../core/lang.js";import{n as i}from"../core/scheduling.js";import{s as r,i as s}from"./mat3.js";import{c as n}from"./mat3f64.js";import{i as o,a as e,c as a,n as c,d as m,g as h,s as g,j as u,f}from"./vec3.js";import{a as _,c as l}from"./vec3f64.js";import{b as d}from"./plane.js";class p{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&i((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*j);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,j));t++)this._items.push(this._allocator())}}const j=1024;function P(t){return t?M(_(t.origin),_(t.direction)):M(l(),l())}function M(t,i){return{origin:t,direction:i}}function w(i,r){return t(i.origin,r.origin)&&t(i.direction,r.direction)}function b(t,i){const r=z.get();return r.origin=t,r.direction=i,r}function x(t,i=P()){return O(t.origin,t.direction,i)}function v(t,i,r=P()){return o(r.origin,t),e(r.direction,i,t),r}function O(t,i,r=P()){return o(r.origin,t),o(r.direction,i),r}function k(t,i){const r=a(d.get(),c(d.get(),t.direction),e(d.get(),i,t.origin));return m(r,r)}function q(t,i,r){const s=m(t.direction,e(r,i,t.origin));return h(r,t.origin,g(r,t.direction,s)),r}function y(t,i,n,o){const e=t.origin,_=i.origin,l=t.direction,d=i.direction,p=m(c(B,l),c(C,d));if(Math.abs(p)>=1)return null;const j=a(B,l,d),P=u(A,_,e),M=r(D,l[0],l[1],l[2],-d[0],-d[1],-d[2],j[0],j[1],j[2]),w=s(D,M);if(null==w)return[n,o];const b=m(f(B,w[0],w[3],w[6]),P),x=m(f(C,w[1],w[4],w[7]),P);return h(n,e,g(A,l,b)),h(o,_,g(A,d,x)),[n,o]}const z=new p((()=>P())),A=l(),B=l(),C=l(),D=n();export{p as O,x as a,y as b,P as c,k as d,O as e,v as f,q as g,w as h,b as w};
