/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{P as e,c as t,G as n,t as r,g as o}from"./Transformation2D.js";import{p as i,m as s}from"./converterAPI.js";function u(){return a(new e,-1,Number.NaN)}function a(e,t,n){return{m_coordinate:e.clone(),m_vertexIndex:t,m_geometryIndex:0,m_distance:n,m_bRightSide:!1,isEmpty:g}}function g(){return Number.isNaN(this.m_distance)}function c(u,a,g=-1,m=-1){if(u.isEmpty())return 3;const f=u.getGeometryType();if(t(f))return function(t,n,o,i){if(o>=0||i>=0)return r("");if(t.isDegenerate(0))return t.getStartXY().equals(n)?2:3;if(!t.isCurve()){const r=e.orientationRobust(n,t.getStartXY(),t.getEndXY());return r<0?1:r>0?0:2}const s=t.getClosestCoordinate(n,!1),u=t.getTangent(s),a=t.getCoord2D(s),g=e.orientationRobust(n,a,a.add(u));return g<0?1:g>0?0:2}(u,a,g,m);if(f===n.enumPolygon)return function(e,t,n,o){(n>=0||o>=0)&&r("");const u=new i;e.queryEnvelope(u);const a=s(e,t,0);return 0===a?0:1===a?1:2}(u,a,g,m);if(f===n.enumPolyline)return function(t,n,i,s){(i<0&&s>=0||i>=0&&s<0)&&r("");const u=t.querySegmentIterator();if(i<0){let t=Number.MAX_VALUE,r=0;for(;u.nextPath();)for(;u.hasNextSegment();){const o=u.nextSegment(),a=o.getClosestCoordinate(n,!1),g=o.getCoord2D(a),c=e.sqrDistance(g,n);c<t?(r=1,i=u.getStartPointIndex(),s=u.getPathIndex(),t=c):c===t&&r++}if(0===r)return 3;if(1===r)return u.resetToVertex(i,s),c(u.nextSegment(),n)}const a=(o(0),{});if(-1!==a.i1&&-1===a.i2)return a.bRight1?1:0;if(-1!==a.i1&&-1!==a.i2){if(a.bRight1===a.bRight2)return a.bRight1?1:0;{u.resetToVertex(a.i1,-1);const e=u.nextSegment().getTangent(1);u.resetToVertex(a.i2,-1);const t=u.nextSegment().getTangent(0);return e.crossProduct(t)>=0?1:0}}return u.resetToVertex(i,s),c(u.nextSegment(),n)}(u,a,g,m);if(f===n.enumEnvelope){const e=new i;return u.queryEnvelope(e),e.contains(a)?e.containsExclusive(a)?1:2:0}return 3}export{a,c,u as m};
