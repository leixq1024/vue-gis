/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{p as t,H as e,c as a,r as i,h as s,C as l,a as r}from"./componentsUtils.js";import{a as n,b as o,d as c}from"./core.js";import{n as d,C as b,b as h,D as T}from"./dom.js";import{c as g}from"./observers.js";import{c as v,d as f}from"./locale2.js";import{c as u,s as p,d as w,u as m}from"./t9n.js";import{d as I}from"./button.js";import{d as x}from"./icon.js";import{d as C}from"./loader.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.0
 */const S="tab-nav",y="tab-nav--end-overflow",k="tab-nav--start-overflow",O="scroll-button",E="scroll-button-container",W="scroll-button-container--backward",z="scroll-button-container--forward",H="tab-titles-slot-wrapper",B=t(class extends e{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=a(this,"calciteTabChange",6),this.calciteInternalTabNavSlotChange=a(this,"calciteInternalTabNavSlotChange",7),this.calciteInternalTabChange=a(this,"calciteInternalTabChange",6),this.effectiveDir="ltr",this.lastScrollWheelAxis="x",this.resizeObserver=g("resize",(()=>{this.updateScrollingState()})),this.onTabTitleWheel=t=>{t.preventDefault();const{deltaX:e,deltaY:a}=t,i=Math.abs(e),s=Math.abs(a);let l;i===s?l="x"===this.lastScrollWheelAxis?e:a:i>s?(l=e,this.lastScrollWheelAxis="x"):(l=a,this.lastScrollWheelAxis="y");const r=("rtl"===this.effectiveDir?-1:1)*l;t.currentTarget.scrollBy(r,0)},this.onSlotChange=t=>{this.intersectionObserver?.disconnect();const e=d(t,"calcite-tab-title");e.forEach((t=>{this.intersectionObserver?.observe(t)})),this.calciteInternalTabNavSlotChange.emit(e)},this.storeTabTitleWrapperRef=t=>{this.tabTitleContainerEl=t,this.intersectionObserver=g("intersection",(()=>this.updateScrollingState()),{root:t,threshold:[0,.5,1]})},this.scrollToTabTitles=t=>{i((()=>{const e=this.tabTitleContainerEl,a=e.getBoundingClientRect(),i=Array.from(this.el.querySelectorAll("calcite-tab-title")),{effectiveDir:s}=this;"forward"===t&&i.reverse();let l=null;if(i.forEach((e=>{const i=e.getBoundingClientRect(),r=a.x+a.width,n=i.x+i.width;"forward"===t&&"ltr"===s||"backward"===t&&"rtl"===s?(i.x>r||n>r&&i.x>a.x)&&(l=e):(n<a.x||n<r&&i.x<a.x)&&(l=e)})),l){const{scrollerButtonWidth:a}=this,i="forward"===t&&"ltr"===s||"backward"===t&&"rtl"===s?-a:l.offsetWidth-e.clientWidth+a,r=l.offsetLeft+i;e.scrollTo({left:r,behavior:"smooth"})}}))},this.scrollToNextTabTitles=()=>this.scrollToTabTitles("forward"),this.scrollToPreviousTabTitles=()=>this.scrollToTabTitles("backward"),this.handleTabFocus=(t,e,a)=>{const i=b(this.enabledTabTitles,e,a);this.scrollTabTitleIntoView(i,"instant"),t.stopPropagation()},this.onTabTitleScroll=()=>{this.updateScrollingState()},this.renderScrollButton=t=>{const{bordered:e,messages:a,hasOverflowingStartTabTitle:i,hasOverflowingEndTabTitle:l,scale:r}=this,n="end"===t;return s("div",{class:{[E]:!0,[W]:!n,[z]:n},hidden:n&&!l||!n&&!i,key:t},s("calcite-button",{appearance:e?"outline-fill":"transparent","aria-label":n?a.nextTabTitles:a.previousTabTitles,class:{[O]:!0},iconFlipRtl:"both",iconStart:n?"chevron-right":"chevron-left",kind:"neutral",onClick:n?this.scrollToNextTabTitles:this.scrollToPreviousTabTitles,scale:r,tabIndex:-1}))},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasOverflowingStartTabTitle=!1,this.hasOverflowingEndTabTitle=!1,this.selectedTabId=void 0}selectedTitleChanged(){this.calciteInternalTabChange.emit({tab:this.selectedTabId})}onMessagesChange(){}connectedCallback(){this.parentTabsEl=this.el.closest("calcite-tabs"),this.resizeObserver?.observe(this.el),v(this),u(this)}async componentWillLoad(){const t=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(t)){const e=JSON.parse(localStorage.getItem(t));this.selectedTabId=e}await p(this)}componentDidLoad(){this.scrollTabTitleIntoView(this.selectedTitle,"instant")}componentWillRender(){const{parentTabsEl:t}=this;this.layout=t?.layout,this.bordered=t?.bordered,this.effectiveDir=h(this.el)}componentDidRender(){this.tabTitles.length&&this.tabTitles.every((t=>!t.selected))&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then((t=>{this.calciteInternalTabChange.emit({tab:t})}))}disconnectedCallback(){this.resizeObserver?.disconnect(),f(this),w(this)}render(){return s(r,{key:"9d1138405f2423bddcd9d1bb49dc756e582f8375",role:"tablist"},s("div",{key:"f8759781080b2a093f062d0b6172de6d3ea9355d",class:{[S]:!0,[k]:!!this.hasOverflowingStartTabTitle,[y]:!!this.hasOverflowingEndTabTitle,[`scale-${this.scale}`]:!0,[`position-${this.position}`]:!0,[l.rtl]:"rtl"===this.effectiveDir}},this.renderScrollButton("start"),s("div",{key:"eda664514cb5c89136184c6e8f29e50ce7c9b56b",class:{[H]:!0},onScroll:this.onTabTitleScroll,onWheel:this.onTabTitleWheel,ref:this.storeTabTitleWrapperRef},s("slot",{key:"0c5a40eac082662a2c2b032d977900b91f122214",onSlotchange:this.onSlotChange})),this.renderScrollButton("end")))}focusPreviousTabHandler(t){this.handleTabFocus(t,t.target,"previous")}focusNextTabHandler(t){this.handleTabFocus(t,t.target,"next")}focusFirstTabHandler(t){this.handleTabFocus(t,t.target,"first")}focusLastTabHandler(t){this.handleTabFocus(t,t.target,"last")}internalActivateTabHandler(t){const e=t.target;this.selectedTabId=t.detail.tab?t.detail.tab:this.getIndexOfTabTitle(e),t.stopPropagation(),this.selectedTitle=e,this.scrollTabTitleIntoView(e)}scrollTabTitleIntoView(t,e="smooth"){t&&i((()=>{const a="ltr"===this.effectiveDir,i=this.tabTitleContainerEl,s=i.getBoundingClientRect(),l=t.getBoundingClientRect(),r=i.scrollLeft,n=a?this.hasOverflowingStartTabTitle:this.hasOverflowingEndTabTitle,o=a?this.hasOverflowingEndTabTitle:this.hasOverflowingStartTabTitle;if(l.left<s.left+(n?this.scrollerButtonWidth:0)){const t=r+(l.left-s.left)-this.scrollerButtonWidth;i.scrollTo({left:t,behavior:e})}else if(l.right>s.right-(o?this.scrollerButtonWidth:0)){const t=r+(l.right-s.right)+this.scrollerButtonWidth;i.scrollTo({left:t,behavior:e})}}))}activateTabHandler(t){this.calciteTabChange.emit(),t.stopPropagation()}internalCloseTabHandler(t){const e=t.target;this.handleTabTitleClose(e),t.stopPropagation()}async updateTabTitles(t){t.target.selected&&(this.selectedTabId=t.detail,this.selectedTitle=await this.getTabTitleById(this.selectedTabId))}globalInternalTabChangeHandler(t){this.syncId&&t.target!==this.el&&t.target.syncId===this.syncId&&this.selectedTabId!==t.detail.tab&&(this.selectedTabId=t.detail.tab),t.stopPropagation()}effectiveLocaleChange(){m(this,this.effectiveLocale)}async selectedTabIdChanged(){localStorage&&this.storageId&&void 0!==this.selectedTabId&&null!==this.selectedTabId&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId})}get scrollerButtonWidth(){const{scale:t}=this;return parseInt("s"===t?n:"m"===t?o:c)}updateScrollingState(){const t=this.tabTitleContainerEl;if(!t)return;let e,a;const i=t.scrollLeft,s=t.clientWidth,l=t.scrollWidth;"ltr"===this.effectiveDir?(e=i>0,a=i+s<l):(e=i<0,a=i!==-(l-s)),this.hasOverflowingStartTabTitle=e,this.hasOverflowingEndTabTitle=a}getIndexOfTabTitle(t,e=this.tabTitles){return e.indexOf(t)}async getTabTitleById(t){return Promise.all(this.tabTitles.map((t=>t.getTabIdentifier()))).then((e=>this.tabTitles[e.indexOf(t)]))}get tabTitles(){return T(this.el,"calcite-tab-title")}get enabledTabTitles(){return T(this.el,"calcite-tab-title:not([disabled])").filter((t=>!t.closed))}handleTabTitleClose(t){const{tabTitles:e}=this,a=t.selected,i=e.reduce(((t,e,a)=>e.closed?t:[...t,a]),[]),s=i.length;if(1===s&&e[i[0]].closable)e[i[0]].closable=!1,this.selectedTabId=i[0],a&&e[i[0]].activateTab();else if(s>1){const a=e.findIndex((e=>e===t)),l=i.find((t=>t>a));this.selectedTabId===a&&(this.selectedTabId=l||s-1,e[this.selectedTabId].activateTab())}requestAnimationFrame((()=>{e[this.selectedTabId].focus()}))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{selectedTitle:["selectedTitleChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"],selectedTabId:["selectedTabIdChanged"]}}static get style(){return':host{--calcite-internal-tab-nav-gradient-start-side:left;--calcite-internal-tab-nav-gradient-end-side:right;position:relative;display:flex}.scale-s{--calcite-internal-tab-nav-scroller-button-width:24px;min-block-size:1.5rem}.scale-m{--calcite-internal-tab-nav-scroller-button-width:32px;min-block-size:2rem}.scale-l{--calcite-internal-tab-nav-scroller-button-width:44px;min-block-size:2.75rem}.calcite--rtl{--calcite-internal-tab-nav-gradient-start-side:right;--calcite-internal-tab-nav-gradient-end-side:left}.tab-nav--start-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%)}.tab-nav--start-overflow.tab-nav--end-overflow .tab-titles-slot-wrapper{mask-image:linear-gradient(to var(--calcite-internal-tab-nav-gradient-end-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%), linear-gradient(to var(--calcite-internal-tab-nav-gradient-start-side), transparent, transparent var(--calcite-internal-tab-nav-scroller-button-width), white var(--calcite-internal-tab-nav-scroller-button-width), white 51%, transparent 51%)}.tab-nav::-webkit-scrollbar{display:none;-ms-overflow-style:none;scrollbar-width:none}:host([layout=center]) ::slotted(calcite-tab-title){display:flex;flex-grow:1;flex-shrink:0;min-inline-size:auto;white-space:nowrap}:host([layout=center]) ::slotted(calcite-tab-title[selected]){overflow:unset}:host(:not([bordered])) .scale-l{--calcite-internal-tab-nav-gap:var(--calcite-size-xxl)}:host(:not([bordered])) .scale-m{--calcite-internal-tab-nav-gap:var(--calcite-size-xl)}:host(:not([bordered])) .scale-s{--calcite-internal-tab-nav-gap:var(--calcite-size-lg)}:host(:not([bordered])) .tab-titles-slot-wrapper{gap:var(--calcite-internal-tab-nav-gap)}:host([layout=center]:not([bordered])) .tab-titles-slot-wrapper{padding-inline:var(--calcite-spacing-xxl)}.tab-nav,.tab-titles-slot-wrapper{display:flex;inline-size:100%;justify-content:flex-start;overflow:hidden;white-space:nowrap}.scroll-button-container{position:absolute;inset-block:0px}.scroll-button-container calcite-button{--calcite-offset-invert-focus:1;--calcite-color-text-1:var(--calcite-color-text-3);block-size:100%}.scroll-button-container calcite-button:hover{--calcite-color-text-1:unset;--calcite-color-foreground-1:var(--calcite-color-transparent-hover);--calcite-color-foreground-3:var(--calcite-color-transparent)}.scroll-button-container--forward{inset-inline-end:0;z-index:var(--calcite-z-index)}.scroll-button-container--backward{inset-inline-start:0;z-index:var(--calcite-z-index)}:host(:not([bordered])) .scroll-button-container--backward::before,:host(:not([bordered])) .scroll-button-container--forward::before{background-color:var(--calcite-color-border-3);content:"";inline-size:var(--calcite-border-width-sm);inset-block-start:var(--calcite-border-width-md);inset-block-end:var(--calcite-border-width-md);position:absolute}:host(:not([bordered])) .scroll-button-container--backward::before{inset-inline-end:0}:host(:not([bordered])) .scroll-button-container--forward::before{inset-inline-start:0}:host([hidden]){display:none}[hidden]{display:none}'}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1],layout:[1537],position:[1],bordered:[1540],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32],hasOverflowingStartTabTitle:[32],hasOverflowingEndTabTitle:[32],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabsClose","internalCloseTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"]],{selectedTitle:["selectedTitleChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"],selectedTabId:["selectedTabIdChanged"]}]);function L(){"undefined"!=typeof customElements&&["calcite-tab-nav","calcite-button","calcite-icon","calcite-loader"].forEach((t=>{switch(t){case"calcite-tab-nav":customElements.get(t)||customElements.define(t,B);break;case"calcite-button":customElements.get(t)||I();break;case"calcite-icon":customElements.get(t)||x();break;case"calcite-loader":customElements.get(t)||C()}}))}L();export{B as T,L as d};
