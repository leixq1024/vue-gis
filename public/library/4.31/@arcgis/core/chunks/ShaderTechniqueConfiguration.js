/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import t from"../core/Error.js";import{N as e}from"./interfaces3.js";import{e as r}from"../core/lang.js";class s{constructor(t){this._bits=[...t]}equals(t){return r(this._bits,t.bits)}get code(){return this._code??=String.fromCharCode(...this._bits),this._code}get bits(){return this._bits}}class a extends e{constructor(){super(),this._parameterBits=this._parameterBits?.map((()=>0))??[],this._parameterNames??=[]}get key(){return this._key??=new s(this._parameterBits),this._key}decode(t=this.key){const e=this._parameterBits;this._parameterBits=[...t.bits];const r=this._parameterNames.map((t=>`    ${t}: ${this[t]}`)).join("\n");return this._parameterBits=e,r}}function i(e={}){return(r,s)=>{r.hasOwnProperty("_parameterNames")||Object.defineProperty(r,"_parameterNames",{value:r._parameterNames?.slice()??[],configurable:!0,writable:!0}),r.hasOwnProperty("_parameterBits")||Object.defineProperty(r,"_parameterBits",{value:r._parameterBits?.slice()??[0],configurable:!0,writable:!0}),r._parameterNames.push(s);const a=e.count||2,i=Math.ceil(Math.log2(a)),o=r._parameterBits;let n=0;for(;o[n]+i>16;)n++,n>=o.length&&o.push(0);const p=o[n],m=(1<<i)-1<<p;o[n]+=i,e.count?Object.defineProperty(r,s,{get(){return(this._parameterBits[n]&m)>>p},set(r){if(this[s]!==r){if(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+r<<p&m,"number"!=typeof r)throw new t(`Configuration value for ${s} must be a number, got ${typeof r}`);if(null==e.count)throw new t(`Configuration value for ${s} must provide a count option`)}}}):Object.defineProperty(r,s,{get(){return!!((this._parameterBits[n]&m)>>p)},set(e){if(this[s]!==e&&(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+e<<p&m,"boolean"!=typeof e))throw new t(`Configuration value for ${s} must be boolean, got ${typeof e}`)}})}}export{a as S,i as p};
