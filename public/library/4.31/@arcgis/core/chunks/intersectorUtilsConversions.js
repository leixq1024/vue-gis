/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{k as r}from"./mat4.js";import{c as t}from"./vec3f64.js";import{v as e}from"./aaBoundingBox.js";import{a as n}from"./sphere.js";import{i as a,I as i,G as s,L as l,b as c,c as u}from"./intersectorUtils.js";import{i as o,a as p}from"./Intersector.js";import{i as g}from"./Intersector2.js";class h extends s{constructor(r,t,e,n){super(t,e),this.point=r,this.createGraphic=n}}function f(r){return a(r)&&r.intersector===i.PCL&&!!r.target}class d extends l{constructor(r,t,e,n,a){super(r),this.layerUid=r,this.sublayerUid=t,this.nodeIndex=e,this.componentIndex=n,this.triangleNr=a}}class m extends s{constructor(r,t,e){super(t,null),this.point=r,this.createVoxelGraphic=e}}class y extends s{constructor(r,t){super(r,null),this.createTiles3DGraphic=t}}function I(r){return a(r)&&r.intersector===i.I3S&&!!r.target}function V(r){return a(r)&&r.intersector===i.VOXEL&&!!r.target}function x(r,t){return c(r)||u(r)?L(r.target?.object,t):p(r)?t.map?.ground:f(r)||I(r)||o(r)||V(r)?L(r.target,t):null}function U(r,t){const e=b(r,t);return null!=e&&"graphic"===e.type?e.graphic:null}function b(r,t){if(null==r)return null;if(c(r)||u(r))return j(r.target?.object,t);if(f(r)){const t=r.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(V(r)){const t=r.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(function(r){return a(r)&&r.intersector===i.TILES3D&&!!r.target}(r)){const t=r.target.createTiles3DGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return o(r)||g(r)?j(r.target,t):I(r)?function(r,t){const e=L(r,t);if(null==e)return null;const n=t.allLayerViews.find((r=>r.layer===e));return n&&!n.suspended&&"getGraphicFromIntersectorTarget"in n&&null!=(a=n.getGraphicFromIntersectorTarget(r))?{type:"graphic",graphic:a,layer:a.layer}:null;var a}(r.target,t):null}function j(r,t){if(null==r?.graphicUid)return null;const e=L(r,t);if(null==e)return null;if(e===t.graphics)return null==t.graphicsView||"number"!=typeof r.graphicUid?null:t.graphicsView.getHit(r.graphicUid);const n=t.allLayerViews.find((r=>r.layer===e));return!n||n.suspended||null==r.graphicUid?null:"getHit"in n?n.getHit(r.graphicUid):null}function L(r,t){return null==r?.layerUid?null:null!=t.graphicsView&&r.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.allLayers.find((t=>t.uid===r.layerUid))}function G(t,a){if(c(t)||u(t))return n(t.target.object.boundingVolumeWorldSpace.bounds);if(g(t)){r(w,t.transformation);const e=Math.max(w[0],w[1],w[2]);return t.target.baseBoundingSphere.radius*e}if(I(t)){const r=function(r,t){const e=L(r,t);if(null==e)return null;const n=t.allLayerViews.find((r=>r.layer===e));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(r):null}(t.target,a);return r?.5*e(r):null}return null}function T(r){return!c(r)&&!u(r)&&(g(r)?r.target.numLodLevels>1:!!I(r))}const w=t();export{d as I,h as P,y as T,m as V,x as a,b,G as g,T as h,U as t};
