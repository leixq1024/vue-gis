/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import e from"../Color.js";import{watch as t,initial as r}from"../core/reactiveUtils.js";import{a as s,f as i,c as o}from"./vec3f64.js";import{v as a,s as n,g as c,h as d,j as l,r as u,e as g,k as m,l as p,m as f,n as h,o as b,q as T,t as _,u as O,w,x as C,y as I,z as j}from"./sliceToolConfig.js";import{b as A,M as R,w as v,R as E,r as M}from"./RenderObject.js";import{b as P,c as L,e as U,f as S}from"./GeometryUtil.js";import{R as y}from"./Material.js";import{R as N}from"./RibbonLineMaterial.js";import{M as V,a as x}from"./interfaces.js";import{j as D,m as H,e as k}from"./colorUtils2.js";import{A as W}from"./Attribute.js";import{S as G,d as F,F as B,k as q,l as X,i as Y,a as Z,G as z}from"./StencilUtils.js";import{V as $}from"./VertexAttribute.js";import{I as J}from"./ImageMaterial.js";import{r as K,B as Q,s as ee,m as te,d as re,l as se,x as ie,j as oe}from"./mat4.js";import{c as ae}from"./mat4f64.js";import{r as ne}from"./quat.js";import{s as ce,i as de,d as le,c as ue,n as ge,g as me,h as pe,a as fe,f as he,q as be}from"./vec3.js";import{b as Te,f as _e,o as Oe,r as we,B as Ce,v as Ie}from"./plane.js";import"../geometry.js";import je from"../analysis/SlicePlane.js";import"../core/lang.js";import{L as Ae}from"./Logger.js";import{r as Re,d as ve}from"./mathUtils.js";import{e as Ee}from"./screenUtils.js";import{tryProjectWithZConversion as Me}from"../geometry/projection.js";import{A as Pe}from"./Axis.js";import{f as Le,i as Ue,c as Se,r as ye,n as Ne,u as Ve}from"./boundedPlane.js";import{c as xe}from"./ray.js";import{f as De}from"./vec4f64.js";import{L as He,a as ke}from"./LineVisualElement.js";import{c as We}from"./vec4.js";import{O as Ge}from"./Object3DVisualElement.js";import{c as Fe,S as Be}from"./Matrix4PassUniform.js";import{N as qe}from"./ShaderTechniqueRepository.js";import{D as Xe}from"./RayIntersections.js";import{P as Ye}from"./DefaultLayouts.js";import{T as Ze}from"./TriangleMaterial.js";import{g as ze,N as $e}from"./interfaces3.js";import{f as Je}from"./enums.js";import{m as Ke,b as Qe,d as et}from"./renderState.js";import{R as tt}from"./RenderCoordsHelper.js";import{b as rt}from"./ray2.js";import st from"../geometry/Point.js";import{C as it}from"./basicInterfaces.js";import{C as ot}from"./ColorMaterial.js";const at=De(0,0,0,.04);function nt({accentColor:e}){return D(e,.5)}function ct({accentColor:e}){return D(e,.7)}const dt=Object.freeze(Object.defineProperty({__proto__:null,build:function(e){const t=new G,{vertex:r,fragment:s,attributes:i,varyings:o}=t;return F(r,e),i.add($.POSITION,"vec3"),i.add($.UV0,"vec2"),o.add("vUV","vec2"),r.main.add(ze`vUV = uv0;
gl_Position = proj * view * vec4(position, 1.0);`),s.uniforms.add(new B("backgroundColor",(e=>e.backgroundColor)),new B("gridColor",(e=>e.gridColor)),new Fe("gridWidth",(e=>e.gridWidth))).main.add(ze`const float LINE_WIDTH = 1.0;
vec2 uvScaled = vUV * gridWidth;
vec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));
vec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);
grid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);
grid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);
float gridFade = max(grid.x, grid.y);
float gridAlpha = gridColor.a * gridFade;
fragColor =
vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +
vec4(gridColor.rgb, 1.0) * gridAlpha;`),t}},Symbol.toStringTag,{value:"Module"}));class lt extends $e{constructor(){super(...arguments),this.backgroundColor=De(1,0,0,.5),this.gridColor=De(0,1,0,.5),this.gridWidth=4}}class ut extends q{constructor(e,t,r){super(e,t,new X(dt,(()=>Promise.resolve().then((()=>dt)))),r)}initializePipeline(){return Ke({blending:Qe,depthTest:{func:Je.LESS},colorWrite:et})}}class gt extends Ze{constructor(e){super(e,pt),this.produces=new Map([[Y.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>e===Be.Color]])}get visible(){return!0}createGLMaterial(e){return new mt(e)}createBufferWriter(){return new Xe(Ye)}getConfiguration(){return qe}}class mt extends Z{constructor(e){super(e)}beginSlot(e){return this.acquireTechnique(ut,e)}}class pt extends lt{constructor(){super(...arguments),this.renderOccluded=y.Occlude,this.isDecoration=!1}}class ft extends Ge{constructor(e){super(e),this._material=null,this._renderOccluded=y.OccludeAndTransparent,this._gridWidth=1,this._gridColor=De(1,0,0,1),this._backgroundColor=De(1,0,0,1),this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(e){this._gridWidth!==e&&(this._gridWidth=e,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(e){We(this._gridColor,e),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){We(this._backgroundColor,e),this._updateMaterial()}createExternalResources(){this._material=new gt(this._materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(e){null!=this._material&&e(this._material)}createGeometries(e){if(null!=this._material){const t=P(this._material);e.addGeometry(t)}}get _materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){null!=this._material&&this._material.setParameters(this._materialParameters)}}function ht(e,t,r,s,i,o,c,d){return function(e,t,r,s,i,o){const c=le(e,t),d=Te.get(),l=Te.get();switch(s===kt.HORIZONTAL_OR_VERTICAL?Math.abs(c)>a?kt.HORIZONTAL:kt.VERTICAL:s){case kt.VERTICAL:{const s=Math.abs(c)<=n?e:r.viewUp;ue(d,s,t),de(l,t);break}case kt.HORIZONTAL:ue(d,r.viewUp,t),ue(l,t,d);break;case kt.TILTED:{const s=Math.abs(c)<=n?t:r.viewUp;ue(d,s,e),ue(l,e,d);break}}const u=ue(Te.get(),d,l);le(u,r.viewForward)>0&&ce(l,l,-1),ge(i,d),ge(o,l)}(t,c.worldUpAtPosition(e,Te.get()),i,o,d.basis1,d.basis2),ce(d.basis1,d.basis1,r),ce(d.basis2,d.basis2,s),de(d.origin,e),_e(d.basis2,d.basis1,d.origin,d.plane),d}function bt(e,t,r,s,i,o){const a=de(Te.get(),i.origin);me(a,a,ce(Te.get(),i.basis1,e.direction[0]<0?1:-1)),me(a,a,ce(Te.get(),i.basis2,e.direction[1]<0?1:-1));const n=pe(i.basis1),d=pe(i.basis2),l=fe(Te.get(),r,a),u=fe(Te.get(),t,a);let g=0,m=0;if(Lt(e)){const t=Pt(i),r=Pt(o);g=n-.5*e.direction[0]*le(i.basis1,u)/n,m=d-.5*e.direction[1]*le(i.basis2,u)/d;const s=r/t;g*=s,m*=s}const p=g+.5*e.direction[0]*le(i.basis1,l)/n,f=m+.5*e.direction[1]*le(i.basis2,l)/d,h=ce(Te.get(),i.basis1,p/n),b=ce(Te.get(),i.basis2,f/d);(p<=0||Et(o.origin,h,s)<=c)&&de(h,o.basis1),(f<=0||Et(o.origin,b,s)<=c)&&de(b,o.basis2);const T=de(Te.get(),a);return me(T,T,ce(Te.get(),h,e.direction[0]<0?-1:1)),me(T,T,ce(Te.get(),b,e.direction[1]<0?-1:1)),Le(T,h,b,o)}function Tt(e,t){return d*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function _t(e,t,r,s){const i=ue(Te.get(),t,r);return ue(i,i,t),Oe(e,i,s)}function Ot(e,t){return A(e.basis1,e.basis2,e.origin,t)}function wt(e,t,r,s){const i=t.worldUpAtPosition(e.origin,Te.get()),o=Te.get();switch(r){case Ht.HEADING:de(o,i);break;case Ht.TILT:de(o,e.basis1)}return Oe(e.origin,o,s)}function Ct(e,t,r,i){const o=vt(r,Rt.NEGATIVE_X),a=we.get();K(a,t,o.edge*Math.PI/2);const n=ge(Te.get(),o.basis);let c=ce(Te.get(),n,o.direction*i.computeScreenPixelSizeAt(o.position)*l);me(c,c,o.position);const d=i.projectToRenderScreen(c,Ee(Te.get())),u=function(e,t){const[r,s,i,o]=e.viewport,a=Math.min(i,o)/16;let n=!0;return t[0]<r+a?(t[0]=r+a,n=!1):t[0]>r+i-a&&(t[0]=r+i-a,n=!1),t[1]<s+a?(t[1]=s+a,n=!1):t[1]>s+o-a&&(t[1]=s+o-a,n=!1),n}(i,d);rt(i,d,Gt),ge(Gt.direction,Gt.direction);const g=Te.get();!u&&Ue(r,Gt,g)&&(c=g),a[12]=0,a[13]=0,a[14]=0,e.modelTransform=a,e.renderLocation=s(c),u?e.state|=Wt:e.state&=~Wt}function It(e,t,r,s){const i=pe(s.basis1),o=pe(s.basis2),a=Mt(s),n=Pt(s),c=he(Te.get(),0,0,0);me(c,ce(Te.get(),s.basis1,t.direction[0]),ce(Te.get(),s.basis2,t.direction[1])),me(c,s.origin,c);let d=0,l=1;if(Lt(t))1===t.direction[0]&&-1===t.direction[1]?d=Ft:1===t.direction[0]&&1===t.direction[1]?d=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(d=3*Math.PI/2),l=n;else{const e=0!==t.direction[0]?1:2;d=1===e?Ft:0,l=(1===e?o:i)-a}const u=Q(we.get(),d);ee(u,u,he(Te.get(),l,l,l)),te(u,r,u),u[12]=0,u[13]=0,u[14]=0,e.modelTransform=u,e.renderLocation=c}function jt(e,t,r,s){const i=s.worldUpAtPosition(r.origin,Te.get()),o=vt(r,Rt.POSITIVE_X),a=Q(we.get(),o.edge*Math.PI/2);re(a,a,-Nt(r,i)),te(a,t,a),a[12]=0,a[13]=0,a[14]=0,e.modelTransform=a,e.renderLocation=o.position}function At(e,t,r){const s=vt(r,Rt.POSITIVE_Y),i=Q(we.get(),s.edge*Math.PI/2);re(i,i,Ft),te(i,t,i),i[12]=0,i[13]=0,i[14]=0,e.modelTransform=i,e.renderLocation=s.position}var Rt;function vt(e,t){switch(t){case Rt.POSITIVE_X:return{basis:e.basis1,direction:1,position:me(Te.get(),e.origin,e.basis1),edge:t};case Rt.POSITIVE_Y:return{basis:e.basis2,direction:1,position:me(Te.get(),e.origin,e.basis2),edge:t};case Rt.NEGATIVE_X:return{basis:e.basis1,direction:-1,position:fe(Te.get(),e.origin,e.basis1),edge:t};case Rt.NEGATIVE_Y:return{basis:e.basis2,direction:-1,position:fe(Te.get(),e.origin,e.basis2),edge:t}}}function Et(e,t,r){const s=r.projectToRenderScreen(me(Te.get(),e,t),Ee(Te.get())),i=r.projectToRenderScreen(fe(Te.get(),e,t),Ee(Te.get()));return be(fe(s,s,i))}function Mt(e){const t=pe(e.basis1),r=pe(e.basis2);return u*Math.min(t,r)}function Pt(e){return Mt(e)}function Lt(e){return 0!==e.direction[0]&&0!==e.direction[1]}function Ut(e){return new He({view:e,attached:!1,color:ct(e.effectiveTheme),width:g,renderOccluded:y.OccludeAndTransparent,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]],isDecoration:!0})}function St(e){return new ft({view:e,attached:!1,backgroundColor:at,gridColor:nt(e.effectiveTheme),gridWidth:4,renderOccluded:y.OccludeAndTransparent,isDecoration:!0})}function yt(e,t,r,s=new je){if(null==e)return null;const{renderCoordsHelper:i}=t,o=i.fromRenderCoords(e.origin,new st({spatialReference:t.spatialReference}));if(null==o)return null;const a=Me(o,r);if(null==a)return null;s.position=a;const n=2*pe(e.basis1),c=2*pe(e.basis2),d=tt.renderUnitScaleFactor(t.spatialReference,r);s.width=n*d,s.height=c*d;const l=i.worldUpAtPosition(e.origin,Te.get());return s.tilt=Re(Nt(e,l)),s.heading=i.headingAtPosition(e.origin,e.basis1)-90,s}function Nt(e,t){return Ce(t,e.basis2,e.basis1)+Ft}function Vt(e,t){if(null==e?.position)return null;const r=ke(e.position,t.spatialReference,t.elevationProvider);if(null==r)return null;const s=tt.renderUnitScaleFactor(e.position.spatialReference,t.spatialReference),i=e.width*s,o=e.height*s;return{position:r,heading:e.heading,tilt:e.tilt,renderWidth:i,renderHeight:o}}function xt(e,t,r,s=Se()){if(null==e)return null;const i=function(e,t,r,s,i,o,a=Se()){return o.toRenderCoords(e,a.origin)?(o.worldBasisAtPosition(a.origin,Pe.X,a.basis1),o.worldBasisAtPosition(a.origin,Pe.Y,a.basis2),_e(a.basis2,a.basis1,a.origin,a.plane),ye(a,-ve(t),Ne(a),a),ye(a,ve(r),a.basis1,a),ce(a.basis1,a.basis1,s/2),ce(a.basis2,a.basis2,i/2),Ve(a),a):(Ae.getLogger("esri.views.3d.analysis.Slice.sliceToolUtils").error(`Failed to project slice plane position, projection from ${e.spatialReference.wkid} is not supported`),null)}(e.position,e.heading,e.tilt,e.renderWidth,e.renderHeight,t.renderCoordsHelper,s);return r.tiltEnabled||null==i||function(e,t,r){const s=t.worldUpAtPosition(e.origin,Te.get()),i=e.basis1,o=Nt(e,s),a=Math.round(o/Ft)*Ft;ye(e,a-o,i,r)}(i,t.renderCoordsHelper,i),i}!function(e){e[e.POSITIVE_X=0]="POSITIVE_X",e[e.POSITIVE_Y=1]="POSITIVE_Y",e[e.NEGATIVE_X=2]="NEGATIVE_X",e[e.NEGATIVE_Y=3]="NEGATIVE_Y"}(Rt||(Rt={}));const Dt=V.Custom1;var Ht,kt;!function(e){e[e.HEADING=1]="HEADING",e[e.TILT=2]="TILT"}(Ht||(Ht={})),function(e){e[e.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.TILTED=3]="TILTED"}(kt||(kt={}));const Wt=V.Custom2,Gt=xe(),Ft=Math.PI/2,Bt=V.Custom1,qt=V.Custom2;function Xt(e){return null!=("building-scene-3d"===e.type?e:null)}class Yt extends R{constructor(s,i){const o=Lt(i),a=o?f:h,n=a*b,c=h,d={renderOccluded:y.OccludeAndTransparent,isDecoration:!0},l=new N({...d,width:a}),u=new N({...d,width:n}),g=new N({...d,width:c});super({view:s,...v,...Zt({isCorner:o,unfocusedMaterial:l,focusedMaterial:u,outlineMaterial:g})}),this._themeHandle=t((()=>s.effectiveTheme.accentColor),(t=>{const r=e.toUnitRGBA(t);l.setParameters({color:r}),u.setParameters({color:r}),g.setParameters({color:r})}),r)}destroy(){this._themeHandle.remove(),super.destroy()}}function Zt({isCorner:e,unfocusedMaterial:t,focusedMaterial:r,outlineMaterial:s}){const o=e?[i(1,0,0),i(0,0,0),i(0,1,0)]:[i(1,0,0),i(-1,0,0)];return{renderObjects:[new E(L(t,o),x.Unfocused|Bt),new E(L(r,o),x.Focused|Bt),new E(L(s,o),qt)],collisionType:{type:"line",paths:[o]},radius:e?m:p,state:Bt}}class zt extends R{constructor(s,i){const o=new J({writeDepth:!1,renderOccluded:y.Opaque,isDecoration:!0}),a=M.calloutWidth,n=new N({width:a,renderOccluded:y.OccludeAndTransparent,isDecoration:!0});super({view:s,...$t({imageMaterial:o,calloutMaterial:n})}),this._currentTexture=null,this._themeHandle=t((()=>s.effectiveTheme.accentColor),(t=>{const r=H(t,.5),s=k(t),a=this._currentTexture,c=i(r,s);o.setParameters({textureId:c.texture.id}),n.setParameters({color:e.toUnitRGBA(t)}),this._currentTexture=c,a?.release()}),r)}destroy(){this._themeHandle.remove(),this._currentTexture?.release(),super.destroy()}}function $t({imageMaterial:e,calloutMaterial:t}){const{focusMultiplier:r,calloutLength:s,discRadius:i}=M,o=i*r,a=(e,t)=>{const r=[0,1,2,2,3,0];return new z(t,[[$.POSITION,new W([s-e,-e,0,s+e,-e,0,s+e,e,0,s-e,e,0],r,3,!0)],[$.UV0,new W([0,0,1,0,1,1,0,1],r,2,!0)]])},n=L(t,[[0,0,0],[s-i,0,0]]),c=L(t,[[0,0,0],[s-o,0,0]]),d=Dt;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[s,0,0]},focusMultiplier:r,radius:i,renderObjects:[new E(a(i,e),x.Unfocused|d),new E(n,x.Unfocused|d),new E(a(o,e),x.Focused|d),new E(c,x.Focused|d)],state:d}}var Jt;!function(e){e[e.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT",e[e.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"}(Jt||(Jt={}));class Kt extends R{constructor(s,i){const o=new N({width:1,renderOccluded:y.OccludeAndTransparent,isDecoration:!0}),a=new ot({cullFace:it.Back,renderOccluded:y.Opaque,isDecoration:!0}),n=new ot({cullFace:it.Back,renderOccluded:y.Opaque,isDecoration:!0}),c=new ot({cullFace:it.Back,renderOccluded:y.Opaque,isDecoration:!0}),d=new ot({writeDepth:!1,cullFace:it.Front,renderOccluded:y.Transparent,isDecoration:!0});super({view:s,...Qt({offsetMode:i,tubeMaterial:a,tipMaterial:n,capMaterial:c,outlineMaterial:d,calloutMaterial:o})}),this._themeHandle=t((()=>s.effectiveTheme.accentColor),(t=>{const r=k(t),s=e.toUnitRGBA(t),i=e.toUnitRGBA(r),l=e.toUnitRGBA(e.blendColors(r,t,.4)),u=e.toUnitRGBA(e.blendColors(r,t,.14));o.setParameters({color:s}),a.setParameters({color:u}),n.setParameters({color:i}),c.setParameters({color:l}),d.setParameters({color:s})}),r)}destroy(){this._themeHandle.remove(),super.destroy()}}function Qt({offsetMode:e,tubeMaterial:t,tipMaterial:r,capMaterial:s,outlineMaterial:a,calloutMaterial:n}){const c=e===Jt.CENTER_ON_CALLOUT?l:0,d=[i(c,0,-w/2),i(c,0,w/2)],u=function(e){const t=fe(o(),e[e.length-1],e[e.length-2]);ge(t,t),ce(t,t,_),me(t,t,e[e.length-1]);{const r=fe(o(),e[0],e[1]);return ge(r,r),ce(r,r,_),me(r,r,e[0]),[r,...e,t]}}(d),g=er({vertices:d,padding:0,materials:{tube:t,tip:r,cap:s}}),m=er({vertices:d,padding:O,materials:{tube:a,tip:a,cap:a}}),p=L(n,[[c,0,0],[c-l,0,0]]),f=L(n,[[c,0,0],[c-l,0,0]]);return{renderObjects:[...g.normal.map((e=>new E(e,x.Unfocused|Dt))),...m.normal.map((e=>new E(e,x.Unfocused|Dt))),new E(p,x.Unfocused|Dt|Wt),...g.focused.map((e=>new E(e,x.Focused|Dt))),...m.focused.map((e=>new E(e,x.Focused|Dt))),new E(f,x.Focused|Dt|Wt)],autoScaleRenderObjects:!1,collisionType:{type:"line",paths:[u]},collisionPriority:1,radius:T,state:Dt}}function er({vertices:e,padding:t,materials:r}){const s=s=>{const a=e.slice(),n=fe(Te.get(),a[0],a[1]);ge(n,n);const c=fe(Te.get(),a[a.length-1],a[a.length-2]);if(ge(c,c),t>0){const e=ce(o(),c,-t);a[a.length-1]=me(e,e,a[a.length-1]);const r=ce(o(),n,-t);a[0]=me(r,r,a[0])}const d=s?j:1,l=_*d,u=T*d,g=se(we.get());if(t>0){const e=l/4,r=he(Te.get(),0,e,0),s=1+t/e;ie(g,g,r),ee(g,g,he(Te.get(),s,s,s)),ie(g,g,ce(r,r,-1/s))}const m=se(ae()),p=i(0,1,0),f=oe(ae(),ne(Ie.get(),p,c));f[12]=a[a.length-1][0],f[13]=a[a.length-1][1],f[14]=a[a.length-1][2],te(f,f,g);const h=r.tube,b=function(e,t,r){const s=[];for(let t=0;t<12;t++){const r=t/12*2*Math.PI;s.push([Math.cos(r)*e,Math.sin(r)*e])}return S(r,s,t,[],[],!1)}(C*(s?I:1)+t,a,h);b.transformation=m;const O=[b],w=r.tip,A=U(w,l,u,24,!1,!1,!0);A.transformation=f,O.push(A);const R=r.cap,v=U(R,l,u,24,!1,!0,!1);v.transformation=f,O.push(v);const E=oe(ae(),ne(Ie.get(),p,n));return E[12]=a[0][0],E[13]=a[0][1],E[14]=a[0][2],te(E,E,g),O.push(A.instantiate({transformation:E})),O.push(v.instantiate({transformation:E})),O};return{normal:s(!1),focused:s(!0)}}export{Dt as D,Wt as I,Jt as O,zt as R,Kt as S,xt as a,yt as b,Yt as c,St as d,Ut as e,wt as f,Ht as g,Tt as h,Xt as i,kt as j,ht as k,Ot as l,jt as m,At as n,It as o,Vt as p,ct as q,bt as r,_t as s,at as t,Ct as u,nt as v,Lt as w,Pt as x,Bt as y,qt as z};
