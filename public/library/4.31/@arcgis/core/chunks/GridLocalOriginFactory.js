/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import"../core/lang.js";import{g as t}from"../core/Accessor.js";import{a as i}from"./vec3.js";import{f as s,c as r}from"./vec3f64.js";import{f as a}from"./vec4f64.js";import{p as e}from"./projectBuffer.js";import{A as o}from"./Attribute.js";import{C as n}from"./Material.js";import{G as h}from"./StencilUtils.js";import{R as c,W as m,O as g}from"./RibbonLineMaterial.js";import{V as d}from"./VertexAttribute.js";var f,u,p;!function(t){t[t.RasterImage=0]="RasterImage",t[t.Features=1]="Features"}(f||(f={})),function(t){t[t.MapLayer=0]="MapLayer",t[t.ViewLayer=1]="ViewLayer",t[t.Outline=2]="Outline",t[t.SnappingHint=3]="SnappingHint"}(u||(u={})),function(t){t[t.WithRasterImage=0]="WithRasterImage",t[t.WithoutRasterImage=1]="WithoutRasterImage"}(p||(p={}));class _{constructor(t,i){this.vec3=t,this.id=i}}function l(t,i,r,a){return new _(s(t,i,r),a)}class M{constructor(i){this._originSR=i,this._rootOriginId="root/"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const s=this._origins.get(this._rootOriginId);if(null==s){const i=l(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,i),i}const r=this._gridSize,a=Math.round(t[0]/r),e=Math.round(t[1]/r),o=Math.round(t[2]/r),n=`${a}/${e}/${o}`;let h=this._origins.get(n);const c=.5*r;if(i(w,t,s.vec3),w[0]=Math.abs(w[0]),w[1]=Math.abs(w[1]),w[2]=Math.abs(w[2]),w[0]<c&&w[1]<c&&w[2]<c){if(h){const s=Math.max(...w);if(i(w,t,h.vec3),w[0]=Math.abs(w[0]),w[1]=Math.abs(w[1]),w[2]=Math.abs(w[2]),Math.max(...w)<s)return h}return s}return h||(h=l(a*r,e*r,o*r,n),this._origins.set(n,h)),h}_drawOriginBox(t,i=a(1,1,0,1)){const s=window.view,r=s._stage,f=i.toString();if(!this._objects.has(f)){this._material=new c({width:2,color:i}),r.add(this._material);const t=new m(r,{pickable:!1}),s=new g({castShadow:!1});r.add(s),t.add(s),this._objects.set(f,s)}const u=this._objects.get(f),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],_=p.length,l=new Array(3*_),M=new Array,w=.5*this._gridSize;for(let i=0;i<_;i++)l[3*i]=t[0]+(1&p[i]?w:-w),l[3*i+1]=t[1]+(2&p[i]?w:-w),l[3*i+2]=t[2]+(4&p[i]?w:-w),i>0&&M.push(i-1,i);e(l,this._originSR,0,l,s.renderSpatialReference,0,_);const b=new h(this._material,[[d.POSITION,new o(l,M,3,!0)]],null,n.Line);r.add(b),u.addGeometry(b)}get test(){}}const w=r();export{f as D,M as G,p as a,u as b,l as f};
