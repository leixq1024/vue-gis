/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{p as o}from"./floatRGBA.js";import{e as t}from"./mathUtils.js";import{d as a,a as r,b as e}from"./constants.js";function n(o,a,r){const e=a.style,n=t(Math.ceil(r)),s=(o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o)(e)?8*n:16*n,i=2*n;o.width=s,o.height=s;const l=o.getContext("2d");l.strokeStyle="#ffffff",l.lineWidth=n,l.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(l.moveTo(s/2,-i),l.lineTo(s/2,s+i)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(l.moveTo(-i,s/2),l.lineTo(s+i,s/2)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSBackwardDiagonal"!==e||(l.moveTo(-i,-i),l.lineTo(s+i,s+i),l.moveTo(s-i,-i),l.lineTo(s+i,i),l.moveTo(-i,s-i),l.lineTo(i,s+i)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSForwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(l.moveTo(s+i,-i),l.lineTo(-i,s+i),l.moveTo(i,-i),l.lineTo(-i,i),l.moveTo(s+i,s-i),l.lineTo(s-i,s+i)),l.stroke();const h=l.getImageData(0,0,o.width,o.height),c=new Uint8Array(h.data);let m;for(let o=0;o<c.length;o+=4)m=c[o+3]/255,c[o]=c[o]*m,c[o+1]=c[o+1]*m,c[o+2]=c[o+2]*m;return[c,o.width,o.height,n]}function s(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((o,t)=>o+t),0),n=Math.round(e*a),s=new Float32Array(1*n);let i=0,l=0,h=.5,c=!0;for(const o of t){for(i=l,l+=o*a;h<=l;){const o=h-.5,t=Math.min(Math.abs(h-i),Math.abs(h-l));s[o]=c?-t:t,h++}c=!c}const m=s.length,f=new Uint8Array(4*m);for(let t=0;t<m;++t){const e=s[t]/a;o(e/r*.5+.5,f,4*t)}return[f,n,1]}function i(t,a){null==t&&(t=[]);const r="Butt"===a,n="Square"===a,s=!r&&!n;t.length%2==1&&(t=[...t,...t]);const i=e,l=2*i;let h=0;for(const o of t)h+=o;const c=Math.round(h*i),m=new Float32Array(c*l),f=.5*i;let S=0,g=0,d=.5,M=!0;for(const o of t){for(S=g,g+=o*i;d<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+d-.5,a=s?(o-i)*(o-i):Math.abs(o-i);m[t]=M?r?Math.max(Math.max(S+f-d,a),Math.max(d-g+f,a)):a:s?Math.min((d-S)*(d-S)+a,(d-g)*(d-g)+a):n?Math.min(Math.max(d-S,a),Math.max(g-d,a)):Math.min(Math.max(d-S+f,a),Math.max(g+f-d,a)),o++}d++}M=!M}const T=m.length,F=new Uint8Array(4*T);for(let t=0;t<T;++t){const a=(s?Math.sqrt(m[t]):m[t])/i;o(a,F,4*t)}return[F,c,l]}export{n as a,s as b,i as r};
