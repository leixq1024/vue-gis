"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3609],{73609:(e,t,r)=>{r.d(t,{Q:()=>x});var n=r(32816),o=r(41390),s=r(6407),i=r(32773),u=r(80959),a=r(99063),c=r(29298),l=(r(20266),r(69421)),f=r(69763),h=r(80488),d=r(81284),p=r(13978),m=r(71492),y=r(58296),g=r(12109),_=r(38343),b=r(8824),w=r(73600);let F=class extends o.T{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,a.An)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=null!=e.outStatistics?.[0],o=(0,i.h)("featurelayer-pbf-statistics"),s=!n||o;let u;if(this.pbfSupported&&s)try{u=await(0,_.e)(this.url,r,t)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.pbfSupported=!1}return this.pbfSupported&&s||(u=await(0,g.a)(this.url,r,t)),this._normalizeFields(u.fields),u}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return b.A.fromJSON(t);const{meshFeatureSetFromJSON:o}=await(0,u.qr)(Promise.all([r.e(3628),r.e(993),r.e(8353)]).then(r.bind(r,42113)),n);return o(e,this.infoFor3D,t)}executeForCount(e,t){return(0,m.e)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return(0,y.e)(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,m.a)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:o}]=await(0,u.qr)(Promise.all([Promise.resolve().then(r.bind(r,81618)),r.e(9793).then(r.bind(r,9793))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:o}]=await(0,u.qr)(Promise.all([Promise.resolve().then(r.bind(r,81618)),r.e(9793).then(r.bind(r,9793))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:s}=await(0,u.qr)(r.e(7757).then(r.bind(r,77757)),t),i=(0,p.p)(this.url);return s(i,await(this.queryAttachmentsSupported?n(i,e,t):o(i,e,t)))}async executeBinsQuery(e,t){const{executeBinsQuery:n}=await(0,u.qr)(r.e(369).then(r.bind(r,30369)),t);return n(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,u.qr)(r.e(7579).then(r.bind(r,17579)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,u.qr)(r.e(8891).then(r.bind(r,91272)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,u.qr)(r.e(7908).then(r.bind(r,87908)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,u.qr)(r.e(7226).then(r.bind(r,87226)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=w.A.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?d.D.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const n=(0,h.c)(r),o=(0,h.d)(r);for(const e of r.queryFormats){if(e===n){t.formatOf3DObjects=e;break}e!==o||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new s.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!(0,f.f)(t.outSpatialReference,this.sourceSpatialReference))throw new s.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:o,originZ:s,translationX:i,translationY:u,translationZ:a,scaleX:c,scaleY:l,scaleZ:f,rotationX:h,rotationY:d,rotationZ:p,rotationDeg:m}=r.transformFieldRoles;t.outFields.push(n,o,s,i,u,a,c,l,f,h,d,p,m)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,c.MZ)({type:d.D})],F.prototype,"dynamicDataSource",void 0),(0,n._)([(0,c.MZ)()],F.prototype,"fieldsIndex",void 0),(0,n._)([(0,c.MZ)()],F.prototype,"gdbVersion",void 0),(0,n._)([(0,c.MZ)()],F.prototype,"infoFor3D",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],F.prototype,"parsedUrl",null),(0,n._)([(0,c.MZ)()],F.prototype,"pbfSupported",void 0),(0,n._)([(0,c.MZ)()],F.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,c.MZ)()],F.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,c.MZ)({type:String})],F.prototype,"url",void 0),F=(0,n._)([(0,l.$)("esri.layers.graphics.sources.support.QueryTask")],F);const x=F},58296:(e,t,r)=>{r.d(t,{e:()=>u}),r(94345);var n=r(13978),o=r(68140),s=r(73600),i=r(44600);async function u(e,t,r){const u=(0,n.p)(e),a=await(0,o.a)(u,s.A.from(t),{...r}),c=a.data.extent;return!c||isNaN(c.xmin)||isNaN(c.ymin)||isNaN(c.xmax)||isNaN(c.ymax)?{count:a.data.count,extent:null}:{count:a.data.count,extent:i.A.fromJSON(c)}}},71492:(e,t,r)=>{r.d(t,{a:()=>u,e:()=>i});var n=r(13978),o=r(68140),s=r(73600);async function i(e,t,r){const i=(0,n.p)(e),{data:u}=await(0,o.b)(i,s.A.from(t),r);return u.count}async function u(e,t,r){const i=(0,n.p)(e),{data:u}=await(0,o.c)(i,s.A.from(t),r);return u.objectIds}},12109:(e,t,r)=>{r.d(t,{a:()=>a,e:()=>u});var n=r(13978),o=r(68140),s=r(8824),i=r(73600);async function u(e,t,r){const n=await a(e,t,r);return s.A.fromJSON(n)}async function a(e,t,r){const s=(0,n.p)(e),u={...r},a=i.A.from(t),{data:c}=await(0,o.e)(s,a,a.sourceSpatialReference,u);return c}},38343:(e,t,r)=>{r.d(t,{e:()=>y});var n=r(13978),o=r(57732),s=r(64102),i=r(83637),u=r(68140),a=(r(8824),r(73600));function c(e,t){return t}function l(e,t,r,n){switch(r){case 0:return p(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?p(e,t+n,1):function({translate:e,scale:t},r,n){return e[n]-r*t[n]}(e,t+n,1)}}function f(e,t,r,n){return 2===r?p(e,t,2):l(e,t,r,n)}function h(e,t,r,n){return 2===r?0===t?0:p(e,t,3):l(e,t,r,n)}function d(e,t,r,n){return 3===r?0===t?0:p(e,t,3):f(e,t,r,n)}function p({translate:e,scale:t},r,n){return e[n]+r*t[n]}class m{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=c,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,s.g)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,o.b)(r),r.push(t);const n=r.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,o=(0,i.u)(r.clone(),r,!1,!1,this._transform),s=(0,i.a)(o,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...s}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?d:t?f:r?h:l}}async function y(e,t,r){const o=(0,n.p)(e),s={...r},i=a.A.from(t),c=!i.quantizationParameters,{data:l}=await(0,u.d)(o,i,new m({sourceSpatialReference:i.sourceSpatialReference,applyTransform:c}),s);return l}},83637:(e,t,r)=>{r.d(t,{a:()=>E,b:()=>U,c:()=>Y,d:()=>z,e:()=>B,f:()=>Q,g:()=>re,h:()=>P,i:()=>A,j:()=>j,k:()=>Z,l:()=>K,m:()=>k,n:()=>X,o:()=>$,p:()=>R,q:()=>H,r:()=>oe,t:()=>w,u:()=>ne,v:()=>F,w:()=>ie,x:()=>W});var n=r(6407),o=r(20266),s=r(57732),i=r(47239),u=r(48402),a=r(77037),c=r(58003),l=r(11443),f=r(96153);function h(e,t){return e?t?4:3:t?3:2}const d=()=>o.L.getLogger("esri.layers.graphics.featureConversionUtils"),p={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},m=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s},y=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2]},g=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+3]},_=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function b(e,t,r,n){if(e){if(r)return t&&n?_:y;if(t&&n)return g}else if(t&&n)return y;return m}function w({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function F({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function x({scale:e,translate:t},r,n){return r*e[n]+t[n]}function P(e,t,r){return e?t?r?I(e):G(e):r?C(e):S(e):null}function S(e){const t=e.coords;return{x:t[0],y:t[1]}}function M(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function G(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function O(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function C(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function v(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function I(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function T(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function D(e,t){return e&&t?T:e?O:t?v:M}function R(e,t,r=D(null!=t.z,null!=t.m)){return r(e,t)}function Z(e,t,r){if(null==e)return null;const n=h(t,r),o=[];for(let t=0;t<e.coords.length;t+=n){const r=[];for(let o=0;o<n;o++)r.push(e.coords[t+o]);o.push(r)}return t?r?{points:o,hasZ:t,hasM:r}:{points:o,hasZ:t}:r?{points:o,hasM:r}:{points:o}}function N(e,t,r=h(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let o=0;for(const e of t.points)for(let t=0;t<r;t++)n[o++]=e[t];return e}function A(e,t,r){if(!e)return null;const n=h(t,r),{coords:o,lengths:s}=e,i=[];let u=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[u++]);t.push(e)}i.push(t)}return t?r?{paths:i,hasZ:t,hasM:r}:{paths:i,hasZ:t}:r?{paths:i,hasM:r}:{paths:i}}function q(e,t,r=h(t.hasZ,t.hasM)){const{lengths:n,coords:o}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<r;e++)o[s++]=t[e];n.push(e.length)}return e}function j(e,t,r){if(!e)return null;const n=h(t,r),{coords:o,lengths:s}=e,i=[];let u=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[u++]);t.push(e)}i.push(t)}return t?r?{rings:i,hasZ:t,hasM:r}:{rings:i,hasZ:t}:r?{rings:i,hasM:r}:{rings:i}}function k(e,t,r=t.hasZ,n=t.hasM){return function(e,t,r,n){const o=h(r,n),{lengths:s,coords:i}=e;let u=0;ue(e);for(const e of t){for(const t of e)for(let e=0;e<o;e++)i[u++]=t[e];s.push(e.length)}return e}(e,t.rings,r,n)}const V=[],L=[];function Q(e,t,r,n,o){V[0]=e;const[s]=z(L,V,t,r,n,o);return ae(V),ae(L),s}function z(e,t,r,o,s,i){if(ae(e),!r){for(const r of t){const t=i?r.attributes[i]:void 0;e.push(new c.O(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return function(e,t,r,n,o){const s=D(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?s(new f.O,r):null;e.push(new c.O(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryMultipoint":return function(e,t,r,n,o){const s=h(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?N(new f.O,r,s):null;e.push(new c.O(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolyline":return function(e,t,r,n,o){const s=h(r,n);for(const{geometry:r,attributes:n,centroid:i}of t){const t=null!=r?q(new f.O,r,s):null,u=null!=i?R(new f.O,i):null;e.push(new c.O(t,n,u,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(e,t,r,n,o){for(const{geometry:s,centroid:i,attributes:u}of t){const t=null!=s?k(new f.O,s,r,n):null,a=o?u[o]:void 0;null!=i?e.push(new c.O(t,u,M(new f.O,i),a)):e.push(new c.O(t,u,null,a))}return e}(e,t,o,s,i);default:d().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`)),ae(e)}return e}function B(e,t,r,n){L[0]=e,J(V,L,t,r,n);const o=V[0];return ae(V),ae(L),o}function U(e,t,r){if(null==e)return null;const o=new f.O;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,a.fT)(e)?D(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(o,e):(0,a.Bi)(e)?k(o,e,t,r):(0,a.Rg)(e)?q(o,e,h(t,r)):(0,a.U9)(e)?N(o,e,h(t,r)):void d().error("convertFromGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${e}'`))}function E(e,t,r,o){const s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=S;return r&&o?e=I:r?e=G:o&&(e=C),e(s)}case"esriGeometryMultipoint":return Z(s,r,o);case"esriGeometryPolyline":return A(s,r,o);case"esriGeometryPolygon":return j(s,r,o);default:return d().error("convertToGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${t}'`)),null}}function J(e,t,r,o,s){if(ae(e),null==r)return function(e,t){for(const r of t)e.push({attributes:r.attributes});return e}(e,t);switch(r){case"esriGeometryPoint":return function(e,t,r,n){let o=S;r&&n?o=I:r?o=G:n&&(o=C);for(const r of t){const{geometry:t,attributes:n}=r,s=null!=t?o(t):null;e.push({attributes:n,geometry:s})}return e}(e,t,o,s);case"esriGeometryMultipoint":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?Z(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolyline":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?A(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolygon":return function(e,t,r,n){for(const{geometry:o,attributes:s,centroid:i}of t){const t=null!=o?j(o,r,n):null;if(null!=i){const r=S(i);e.push({attributes:s,centroid:r,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,t,o,s);default:d().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`))}return e}function Y(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:o,hasM:s,hasZ:i,features:u,geometryType:a,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:f,queryGeometryType:h}=e,d={features:J([],u,a,i,s),fields:o,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:l,queryGeometry:E(f,h,!1,!1)};return n&&(d.transform=n),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),i&&(d.hasZ=i),d}function $(e,t){const r=new l.O,{hasM:o,hasZ:s,features:i,objectIdFieldName:u,spatialReference:a,geometryType:c,exceededTransferLimit:f,transform:h,fields:p}=e;return p&&(r.fields=p),r.geometryType=c??null,r.objectIdFieldName=u??t??null,r.spatialReference=a??null,r.objectIdFieldName?(i&&z(r.features,i,c,s,o,r.objectIdFieldName),f&&(r.exceededTransferLimit=f),o&&(r.hasM=o),s&&(r.hasZ=s),h&&(r.transform=h),r):(d().error(new n.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function X(e){const{transform:t,features:r,hasM:n,hasZ:o}=e;if(!t)return e;for(const e of r)null!=e.geometry&&ne(e.geometry,e.geometry,n,o,t),null!=e.centroid&&ne(e.centroid,e.centroid,n,o,t);return e.transform=null,e}function W(e,t){const{geometryType:r,features:n,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){const i=n[t],u=i.weakClone();u.geometry=new f.O,H(u.geometry,i.geometry,o,s,r,e),i.centroid&&(u.centroid=new f.O,H(u.centroid,i.centroid,o,s,"esriGeometryPoint",e)),n[t]=u}return t.transform=e,t}function H(e,t,r,n,o,s,i=r,u=n){if(ue(e),!t?.coords.length)return null;const a=p[o],{coords:c,lengths:l}=t,f=h(r,n),d=h(r&&i,n&&u),m=b(r,n,i,u);if(!l.length)return m(e.coords,c,0,0,w(s,c[0]),F(s,c[1])),ue(e,f,0),e;let y,g,_,x,P=0,S=0,M=S;for(const t of l){if(t<a)continue;let r=0;S=M,_=y=w(s,c[P]),x=g=F(s,c[P+1]),m(e.coords,c,S,P,_,x),r++,P+=f,S+=d;for(let n=1;n<t;n++,P+=f)_=w(s,c[P]),x=F(s,c[P+1]),_===y&&x===g||(m(e.coords,c,S,P,_-y,x-g),S+=d,r++,y=_,g=x);r>=a&&(e.lengths.push(r),M=S)}return ae(e.coords,M),e.coords.length?e:null}function K(e,t,r,n,o,s,i=r,u=n){if(ue(e),!t?.coords.length)return null;const a=p[o],{coords:c,lengths:l}=t,f=h(r,n),d=h(r&&i,n&&u),m=b(r,n,i,u);if(!l.length)return m(e.coords,c,0,0,c[0],c[1]),ue(e,f,0),e;let y=0;const g=s*s;for(const t of l){if(t<a){y+=t*f;continue}const r=e.coords.length/d,n=y,o=y+(t-1)*f;m(e.coords,c,e.coords.length,n,c[n],c[n+1]),te(e.coords,c,f,g,m,n,o),m(e.coords,c,e.coords.length,o,c[o],c[o+1]);const s=e.coords.length/d-r;s>=a?e.lengths.push(s):ae(e.coords,r*d),y+=t*f}return e.coords.length?e:null}function ee(e,t,r,n){const o=e[t],s=e[t+1],i=e[r],u=e[r+1],a=e[n],c=e[n+1];let l=i,f=u,h=a-l,d=c-f;if(0!==h||0!==d){const e=((o-l)*h+(s-f)*d)/(h*h+d*d);e>1?(l=a,f=c):e>0&&(l+=h*e,f+=d*e)}return h=o-l,d=s-f,h*h+d*d}function te(e,t,r,n,o,s,i){let u,a=n,c=0;for(let e=s+r;e<i;e+=r)u=ee(t,e,s,i),u>a&&(c=e,a=u);a>n&&(c-s>r&&te(e,t,r,n,o,s,c),o(e,t,e.length,c,t[c],t[c+1]),i-c>r&&te(e,t,r,n,o,c,i))}function re(e,t,r,n){if(!t?.coords?.length)return null;const o=h(r,n);let s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=o){const r=e[t],n=e[t+1];s=Math.min(s,r),c=Math.max(c,r),a=Math.min(a,n),l=Math.max(l,n)}}return(0,i.i)(e)?(0,i.a)(e,s,a,c,l):(0,u.f)(s,a,c,l,e),e}function ne(e,t,r,n,o){const{coords:i,lengths:u}=t,a=h(r,n);if(!i.length)return e!==t&&ue(e),e;(0,s.b)(o);const{originPosition:c,scale:l,translate:f}=o,d=ce;d.originPosition=c;const p=d.scale;p[0]=l[0]??1,p[1]=-(l[1]??1),p[2]=l[2]??1,p[3]=l[3]??1;const m=d.translate;if(m[0]=f[0]??0,m[1]=f[1]??0,m[2]=f[2]??0,m[3]=f[3]??0,!u.length){for(let t=0;t<a;++t)e.coords[t]=x(d,i[t],t);return e!==t&&ue(e,a,0),e}let y=0;for(let t=0;t<u.length;t++){const r=u[t];e.lengths[t]=r;for(let t=0;t<a;++t)e.coords[y+t]=x(d,i[y+t],t);let n=e.coords[y],o=e.coords[y+1];y+=a;for(let t=1;t<r;t++,y+=a){n+=i[y]*p[0],o+=i[y+1]*p[1],e.coords[y]=n,e.coords[y+1]=o;for(let t=2;t<a;++t)e.coords[y+t]=x(d,i[y+t],t)}}return e!==t&&ue(e,i.length,u.length),e}function oe(e,t,r,n,o,s){if(ue(e),e.lengths.push(...t.lengths),r===o&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{const i=h(r,n),u=b(r,n,o,s),a=t.coords;for(let t=0;t<a.length;t+=i)u(e.coords,a,e.coords.length,t,a[t],a[t+1])}return e}function se(e,t,r,n){let o=0,s=e[n*t],i=e[n*(t+1)];for(let u=1;u<r;u++){const r=s+e[n*(t+u)],a=i+e[n*(t+u)+1],c=(r-s)*(a+i);s=r,i=a,o+=c}return.5*o}function ie(e,t){const{coords:r,lengths:n}=e;let o=0,s=0;for(let e=0;e<n.length;e++){const i=n[e];s+=se(r,o,i,t),o+=i}return Math.abs(s)}function ue(e,t=0,r=0){ae(e.lengths,r),ae(e.coords,t)}function ae(e,t=0){e.length!==t&&(e.length=t)}const ce={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},80488:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>w,c:()=>f,d:()=>d,e:()=>a,g:()=>c,h:()=>m,i:()=>h,j:()=>p,k:()=>i,l:()=>s,m:()=>o});const n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=g(t.name,e?.supportedFormats??[])}function s(e,t){if(!e)return!1;const r=c(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function i(e,t){return _(function(e,t){const r=e.toLowerCase();return y(t).find((e=>b(e)===r))}(e,t))}function u(e,t){return _(g(e,t))}function a(e,t){return b(function(e,t){return y(t).find((t=>_(t)===e))}(e,t))}function c(e,t){return u(e.name,t)??i(e.type,t)}function l(e,t,r){return i(e,r)??u(t,r)}function f({supportedFormats:e}){return l("model/gltf-binary","glb",e)}function h(e){const t=f(e);return null!=t&&e.editFormats.includes(t)}function d({supportedFormats:e}){return l("model/gltf+json","gltf",e)}function p({supportedFormats:e}){return l("application/esri3do-SR_world","wld",e)}function m({supportedFormats:e}){return l("application/esri3do-SR_prj","prj",e)}function y(e){return[...n,...e]}function g(e,t){const r=e.toLowerCase();return y(t).find((e=>function(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}(e).some((e=>r.endsWith(e)))))}function _(e){return e?.[0]}function b(e){return e?.[1].toLowerCase()}function w(e){return e.tables?.find((e=>"assetMaps"===e.role))}}}]);