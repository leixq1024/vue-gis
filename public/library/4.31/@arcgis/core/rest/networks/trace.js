/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import s from"../../request.js";import{p as t,a as r,e as o}from"../../chunks/utils9.js";import e from"./support/TraceResult.js";import"../../config.js";import"../../core/lang.js";import"../../kernel.js";import"../../core/urlUtils.js";import"../../core/Error.js";import"../../chunks/Logger.js";import"../../core/JSONSupport.js";import"../../chunks/tslib.es6.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/maybe.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/metadata.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/tracking.js";import"../../chunks/ensureType.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/ObservableBase.js";import"../../core/scheduling.js";import"../../core/promiseUtils.js";import"./support/AggregatedGeometry.js";import"../../geometry/Multipoint.js";import"../../chunks/writer.js";import"../../geometry/Extent.js";import"../../geometry/Geometry.js";import"../../chunks/reader.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../geometry/Point.js";import"../../core/accessorSupport/decorators/cast.js";import"../../geometry/support/webMercatorUtils.js";import"../../chunks/zmUtils.js";import"../../geometry/Polygon.js";import"../../chunks/coordsUtils.js";import"../../chunks/Axis.js";import"../../chunks/extentUtils.js";import"../../chunks/boundsUtils.js";import"../../chunks/aaBoundingRect.js";import"../../chunks/mathUtils.js";import"../../geometry/Polyline.js";import"./support/FunctionResult.js";import"./support/NetworkElement.js";async function i(i,p,c){const n=t(i),m=p.toJSON();m.traceLocations=JSON.stringify(p.traceLocations),p.resultTypes&&(m.resultTypes=JSON.stringify(p.resultTypes));const u=r(n.query,{query:o({...m,f:"json"}),...c}),a=`${n.path}/trace`;return s(a,u).then((s=>function(s){const{data:t}=s;return e.fromJSON(t.traceResults)}(s)))}async function p(e,i,p){const c=t(e),n=i.toJSON();n.traceLocations=JSON.stringify(i.traceLocations),i.resultTypes&&(n.resultTypes=JSON.stringify(i.resultTypes));const m=r(c.query,{query:o({...n,async:!0,f:"json"}),...p}),u=`${c.path}/trace`,{data:a}=await s(u,m);return a.statusUrl}export{p as submitTraceJob,i as trace};
