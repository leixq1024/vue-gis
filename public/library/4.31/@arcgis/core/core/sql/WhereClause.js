/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{D as e,T as t,A as n}from"../../chunks/TimeOnly.js";import{h as r}from"../lang.js";import{r as a,e as i}from"../../chunks/Logger.js";import{D as o,Z as u,F as s}from"../../chunks/datetime.js";import{U as l,s as c,i as f}from"../../chunks/UnknownTimeZone.js";import{p}from"../../chunks/mathUtils.js";import"../../chunks/locale.js";import"../../chunks/handleUtils.js";import"../../geometry/Extent.js";import"../../chunks/tslib.es6.js";import"../accessorSupport/decorators/property.js";import"../../chunks/ensureType.js";import"../../chunks/utils.js";import"../../chunks/metadata.js";import"../Error.js";import"../../config.js";import"../accessorSupport/decorators/subclass.js";import"../../chunks/tracking.js";import"../../geometry/Geometry.js";import"../JSONSupport.js";import"../Accessor.js";import"../Handles.js";import"../../chunks/maybe.js";import"../../chunks/ObservableBase.js";import"../scheduling.js";import"../promiseUtils.js";import"../../chunks/reader.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../request.js";import"../../kernel.js";import"../urlUtils.js";import"../../chunks/writer.js";import"../../geometry/Point.js";import"../accessorSupport/decorators/cast.js";import"../../geometry/support/webMercatorUtils.js";var d;!function(e){e.InvalidFunctionParameters="InvalidFunctionParameters",e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",e.UnsupportedSqlFunction="UnsupportedSqlFunction",e.UnsupportedOperator="UnsupportedOperator",e.UnsupportedSyntax="UnsupportedSyntax",e.UnsupportedIsRhs="UnsupportedIsRhs",e.UnsupportedIsLhs="UnsupportedIsLhs",e.InvalidDataType="InvalidDataType",e.CannotCastValue="CannotCastValue",e.FunctionNotRecognized="FunctionNotRecognized",e.InvalidTime="InvalidTime",e.InvalidParameterCount="InvalidParameterCount",e.InvalidTimeStamp="InvalidTimeStamp",e.InvalidDate="InvalidDate",e.InvalidOperator="InvalidOperator",e.IllegalInterval="IllegalInterval",e.YearMonthIntervals="YearMonthIntervals",e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",e.MissingStatisticParameters="MissingStatisticParameters"}(d||(d={}));const m={[d.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[d.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.UnsupportedOperator]:"Unsupported operator - {operator}",[d.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.UnsupportedSqlFunction]:"Sql function not found = {function}",[d.InvalidDataType]:"Invalid sql data type",[d.InvalidDate]:"Invalid date encountered",[d.InvalidOperator]:"Invalid operator encountered",[d.InvalidTime]:"Invalid time encountered",[d.IllegalInterval]:"Illegal interval",[d.FunctionNotRecognized]:"Function not recognized",[d.InvalidTimeStamp]:"Invalid timestamp encountered",[d.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.YearMonthIntervals]:"Year-Month Intervals not supported",[d.CannotCastValue]:"Cannot cast value to the required data type"};class h extends Error{constructor(e,t){super(a(m[e],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,h)}}function v(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}class w{constructor(e){this._timeStampOffset=e,this._date=null}toDateTime(){return this._date??=o.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return v(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return v(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return w.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new w(o.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new w(e.toISO({includeOffset:!0}))}static fromParts(e,t,n=0,r=0,a=0,i=0,o=0,u=!1,s=0,l=0){const c=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`;let f="";i<10&&(f="0");let p=`${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${f+i.toString()}`;0!==o&&(p+="."+o.toString().padStart(3,"0"));const d=`${u?"-":"+"}${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`;return new w(c+"T"+p+d)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return w.fromDateTime(t)}}function I(e,t){const n=y[e.toLowerCase()];if(null==n)throw new h(d.FunctionNotRecognized);if(t.length<n.minParams||t.length>n.maxParams)throw new h(d.InvalidParameterCount,{name:e.toUpperCase()});return n.evaluate(t)}function g(e,t){const n=y[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}const y={min:{minParams:1,maxParams:1,evaluate:e=>S(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>S(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>T(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let t=0;for(let n=0;n<e.length;n++){const r=e[n];if(null!==r){if(!N(r))throw new h(d.InvalidValueForAggregateFunction);t+=r}}return t}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=O(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>O(e[0])}};function T(e){if(null===e)return null;let t=0,n=0;for(let r=0;r<e.length;r++){const a=e[r];if(null!==a){if(!N(a))throw new h(d.InvalidValueForAggregateFunction);n++,t+=a}}return 0===n?null:t/e.length}function N(e){return"number"==typeof e}function S(n,r){if(null===n)return null;let a=null,i=null;for(const u of n){let n=u;n=u instanceof e||u instanceof t?u.toNumber():u instanceof o?u.toMillis():u instanceof w?u.toMilliseconds():u,(null===a||"max"===r&&null!==i&&null!==n&&i<=n||"min"===r&&null!==i&&null!==n&&i>=n)&&(a=u,i=n)}return a}function O(e){if(null===e)return null;if(0===(e=e.filter((e=>null!==e))).length)return null;const t=T(e);if(null===t)return null;let n=0;for(const r of e){if(!N(r))throw new h(d.InvalidValueForAggregateFunction);n+=(t-r)**2}return n/(e.length-1)}class x{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(e){if(null!==e.precision||null!==e.secondary)throw new h(d.PrimarySecondaryQualifiers)}static _parseSecondsComponent(e,t){if(t.includes(".")){const n=t.split(".");e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(t)}static createFromMilliseconds(e){const t=new x;return t.second=e/1e3,t}static createFromValueAndQualifier(e,t,n){let r=null;const a=new x;if(a.op="-"===n?"-":"+","interval-period"===t.type){x._fixDefaults(t);const n=new RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw new h(d.YearMonthIntervals);if("second"===t.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new h(d.IllegalInterval);x._parseSecondsComponent(a,e)}else{if(!n.test(e))throw new h(d.IllegalInterval);a[t.period]=parseFloat(e)}}else{if(x._fixDefaults(t.start),x._fixDefaults(t.end),"year"===t.start.period||"month"===t.start.period||"year"===t.end.period||"month"===t.end.period)throw new h(d.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(r=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!r.test(e))throw new h(d.IllegalInterval);a[t.start.period]=parseFloat(e.split(" ")[0]),a[t.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!r.test(e))throw new h(d.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1])}break;case"second":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new h(d.IllegalInterval);{a[t.start.period]=parseFloat(e.split(" ")[0]);const n=e.split(" ")[1].split(":");a.hour=parseFloat(n[0]),a.minute=parseFloat(n[1]),x._parseSecondsComponent(a,n[2])}break;default:throw new h(d.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!r.test(e))throw new h(d.IllegalInterval);a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);break;case"second":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new h(d.IllegalInterval);{const t=e.split(":");a.hour=parseFloat(t[0]),a.minute=parseFloat(t[1]),x._parseSecondsComponent(a,t[2])}break;default:throw new h(d.IllegalInterval)}break;case"minute":if("second"!==t.end.period)throw new h(d.IllegalInterval);if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new h(d.IllegalInterval);{const t=e.split(":");a.minute=parseFloat(t[0]),x._parseSecondsComponent(a,t[1])}break;default:throw new h(d.IllegalInterval)}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const C=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,M=/^(\d{1,2}):(\d{1,2})$/,E=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,b=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function L(e,t){if(t instanceof u)return t===l.instance?o.fromMillis(e.getTime(),{zone:l.instance}):o.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return o.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?o.fromMillis(e.getTime(),{zone:l.instance}):o.fromJSDate(e,{zone:t})}}function _(e){return"number"==typeof e}function R(e){return"string"==typeof e||e instanceof String}function U(e){return e instanceof x}function k(e){return e instanceof Date}function $(e){return e instanceof o}function J(t){return t instanceof e}function V(e){return e instanceof t}function j(e){return e instanceof w}function Z(e){let n=C.exec(e);if(null!==n){const[,e,r,a]=n,i=t.fromParts(parseInt(e,10),parseInt(r,10),parseInt(a,10),0);if(null!==i)return i;throw new h(d.InvalidTime)}if(n=M.exec(e),null!==n){const[,e,r]=n,a=t.fromParts(parseInt(e,10),parseInt(r,10),0,0);if(null!==a)return a;throw new h(d.InvalidTime)}if(n=E.exec(e),null!==n){const[,e,r,a,i]=n,o=t.fromParts(parseInt(e,10),parseInt(r,10),parseInt(a,10),parseInt(i,10));if(null!==o)return o;throw new h(d.InvalidTime)}throw new h(d.InvalidTime)}function z(e,t,n=!1){let r=F.exec(e);if(null!==r){const[,e,n,a,i,u,s,l]=r,f=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(u,10),second:parseInt(s,10),millisecond:l?parseInt(l.replace(".",""),10):0},{zone:c(t)});if(!1===f.isValid)throw new h(d.InvalidTimeStamp);return f}if(r=A.exec(e),null!==r){const[,e,t,n,a,i,o,u,s,l,c]=r,f=w.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(i,10),parseInt(o,10),u?parseInt(u.replace(".",""),10):0,"-"===s,parseInt(l,10),parseInt(c,10));if(!1===f.isValid)throw new h(d.InvalidTimeStamp);return f}if(r=P.exec(e),null!==r){const[,e,t,n,a,i,o,u,s]=r,l=w.fromParts(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(a,10),parseInt(i,10),0,0,"-"===o,parseInt(u,10),parseInt(s,10));if(!1===l.isValid)throw new h(d.InvalidTimeStamp);return l}if(r=D.exec(e),null!==r){const[,e,n,a,i,u]=r,s=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:parseInt(i,10),minute:parseInt(u,10),second:0},{zone:c(t)});if(!1===s.isValid)throw new h(d.InvalidTimeStamp);return s}if(r=b.exec(e),null!==r){const[,e,n,a]=r,i=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(a,10),hour:0,minute:0,second:0},{zone:c(t)});if(!1===i.isValid)throw new h(d.InvalidTimeStamp);return i}throw new h(d.InvalidTimeStamp)}function H(t,n){const r=b.exec(t);if(null===r)try{return z(t,n)}catch{throw new h(d.InvalidDate)}const[,a,i,o]=r,u=e.fromParts(parseInt(a,10),parseInt(i,10),parseInt(o,10));if(null===u)throw new h(d.InvalidDate);return u}function q(e){return!!$(e)||!!j(e)}function Y(e){return!!($(e)||J(e)||j(e)||V(e))}function B(e){if($(e))return e.toMillis();if(J(e))return e.toNumber();if(j(e))return e.toMilliseconds();throw new h(d.InvalidDataType)}function Q(e,t,n,r){if(null==e||null==t)return null;if(_(e)){if(_(t))return G(e,t,n);if(R(t))return function(e,t,n){const r=parseFloat(t);if(!isNaN(r))return G(e,r,n);const a=e.toString();switch(n){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,t,n);if(Y(t))throw new h(d.InvalidOperator);if(J(t))throw new h(d.InvalidOperator)}else if(R(e)){if(_(t))return function(e,t,n){const r=parseFloat(e);if(!isNaN(r))return G(r,t,n);const a=t.toString();switch(n){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,t,n);if(R(t))return function(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,t,n);if($(t))throw new h(d.InvalidOperator);if(J(t))throw new h(d.InvalidOperator);if(V(t))throw new h(d.InvalidOperator);if(j(t))throw new h(d.InvalidOperator)}else if($(e)){if(q(t)){if(e instanceof o&&f(e.zone)){if(t instanceof o&&!1===f(t.zone))return W(e,t,n);if(t instanceof w)return W(e,t,n)}else if(t instanceof o&&f(t.zone)){if(e instanceof o&&!1===f(e.zone))return W(e,t,n);if(e instanceof w)return W(e,t,n)}return G(B(e),B(t),n)}if(R(t))throw new h(d.InvalidOperator);if(J(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.zone);return G((e=e.startOf("day")).toMillis(),r.toMillis(),n)}(e,t,n);if(V(t))throw new h(d.InvalidOperator);if(_(t))throw new h(d.InvalidOperator)}else if(J(e)){if(j(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),G(r.toMillis(),t.toMilliseconds(),n)}(e,t,n);if($(t))return function(e,t,n){const r=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),G(r.toMillis(),t.toMillis(),n)}(e,t,n);if(R(t))throw new h(d.InvalidOperator);if(J(t))return G(e.toNumber(),t.toNumber(),n);if(V(t))throw new h(d.InvalidOperator);if(_(t))throw new h(d.InvalidOperator)}else if(V(e)){if(V(t))return G(e.toNumber(),t.toNumber(),n);if(R(t))throw new h(d.InvalidOperator);if(_(t))throw new h(d.InvalidOperator);if(J(t))throw new h(d.InvalidOperator);if(q(t))throw new h(d.InvalidOperator)}else if(j(e)){if(q(t))return t instanceof o&&f(t.zone)?W(e,t,n):G(B(e),B(t),n);if(R(t))throw new h(d.InvalidOperator);if(J(t))return function(e,t,n){const r=t.toDateTimeLuxon(e.toDateTime().zone);return G((e=e.startOfDay()).toMilliseconds(),r.toMillis(),n)}(e,t,n);if(V(t))throw new h(d.InvalidOperator);if(_(t))throw new h(d.InvalidOperator)}switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function G(e,t,n){switch(n){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function W(e,t,n){e instanceof w&&(e=e.toDateTime()),t instanceof w&&(t=t.toDateTime());const r=K(e),a=K(t);switch(n){case"<>":return r!==a;case"=":return r===a;case">":return r>a;case"<":return r<a;case">=":return r>=a;case"<=":return r<=a}}function K(e){return 321408e5*e.year+26784e5*e.month+864e5*e.day+36e5*e.hour+6e4*e.minute+1e3*e.second+e.millisecond}function X(e,t,n){const r=re[e.toLowerCase()];if(null==r)throw new h(d.FunctionNotRecognized);if(t.length<r.minParams||t.length>r.maxParams)throw new h(d.InvalidParameterCount,{name:e.toUpperCase()});return r.evaluate(t,n)}function ee(e){return"string"==typeof e||e instanceof String}function te(e){return!(k(e)||J(e)||$(e)||V(e)||j(e))}function ne(e){return J(e)||V(e)?e.toString():j(e)?e.toSQLValue():$(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):k(e)?ne(o.fromJSDate(e)):e.toString()}const re={extract:{minParams:2,maxParams:2,evaluate:([e,t])=>{if(null==t)return null;if(k(t))switch(e.toUpperCase()){case"SECOND":return t.getSeconds();case"MINUTE":return t.getMinutes();case"HOUR":return t.getHours();case"DAY":return t.getDate();case"MONTH":return t.getMonth()+1;case"YEAR":return t.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if($(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(J(t))switch(e.toUpperCase()){case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(d.InvalidFunctionParameters,{function:"EXTRACT"})}else if(V(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour}else if(j(t))switch(e.toUpperCase()){case"SECOND":return t.second;case"MINUTE":return t.minute;case"HOUR":return t.hour;case"DAY":return t.day;case"MONTH":return t.month;case"YEAR":return t.year;case"TIMEZONE_HOUR":return t.timezoneOffsetHour;case"TIMEZONE_MINUTE":return t.timezoneOffsetMinutes}throw new h(d.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,n]=e;return null==t||null==n?null:t.toString().substring(n-1)}if(3===e.length){const[t,n,r]=e;return null==t||null==n||null==r?null:r<=0?"":t.toString().substring(n-1,n+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const t=3===e.length,n=t?e[1]:" ",r=t?e[2]:e[1];if(null==n||null==r)return null;const a=`(${i(n)})`;switch(e[0]){case"BOTH":return r.replaceAll(new RegExp(`^${a}*|${a}*$`,"g"),"");case"LEADING":return r.replaceAll(new RegExp(`^${a}*`,"g"),"");case"TRAILING":return r.replaceAll(new RegExp(`${a}*$`,"g"),"")}throw new h(d.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],n=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*n)/n}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length||0===e[1]?Math.trunc(e[0]):p("trunc",e[0],-Number(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>ee(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let n=0;n<e.length;n++){if(null==e[n])return null;t+=e[n].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:(e,t)=>Q(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(n,r)=>{const a=n[0],i=n[1];if(null===a)return null;switch(i.type){case"integer":{if(!te(a))throw new h(d.CannotCastValue);const e=parseInt(a,10);if(isNaN(e))throw new h(d.CannotCastValue);return e}case"smallint":{if(!te(a))throw new h(d.CannotCastValue);const e=parseInt(a,10);if(isNaN(e))throw new h(d.CannotCastValue);if(e>32767||e<-32767)throw new h(d.CannotCastValue);return e}case"float":case"real":{if(!te(a))throw new h(d.CannotCastValue);const e=parseFloat(a);if(isNaN(e))throw new h(d.CannotCastValue);return e}case"time":return function(e){if(k(e))return t.fromDateJS(e);if($(e))return t.fromDateTime(e);if(J(e))throw new h(d.CannotCastValue);if(V(e))return e;if(j(e))return t.fromSqlTimeStampOffset(e);if(ee(e))return Z(e);throw new h(d.CannotCastValue)}(a);case"date":return function(t){if(k(t))return e.fromDateJS(t);if($(t))return e.fromParts(t.year,t.month,t.day);if(J(t))return t;if(V(t))throw new h(d.CannotCastValue);if(j(t)&&null===e.fromParts(t.year,t.month,t.day))throw new h(d.CannotCastValue);if(ee(t)){const n=e.fromReader(t);if(null!==n&&n.isValid)return n}throw new h(d.CannotCastValue)}(a);case"timestamp":return function(e,t,n){if(k(e))return L(e,t);if($(e))return e;if(J(e))return e.toDateTimeLuxon("unknown");if(V(e))throw new h(d.CannotCastValue);if(j(e))return e;if(ee(e))return z(e,"unknown",n);throw new h(d.CannotCastValue)}(a,r,!0===i.withtimezone);case"varchar":{const e=ne(a);if(e.length>i.size)throw new h(d.CannotCastValue);return e}default:throw new h(d.InvalidDataType)}}}};function ae(e,t,n,r){if("||"===e)return X("concat",[t,n],r);if(null===t||null===n)return null;if(_(t)){if(_(n))return ie(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return x.createFromMilliseconds(e+t.valueInMilliseconds());case"-":return x.createFromMilliseconds(e-t.valueInMilliseconds());case"*":return x.createFromMilliseconds(e*t.valueInMilliseconds());case"/":return x.createFromMilliseconds(e/t.valueInMilliseconds())}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(){throw new h(d.InvalidOperator)}();if(j(n))return function(){throw new h(d.InvalidOperator)}();if($(n))return function(){throw new h(d.InvalidOperator)}();if(R(n))return function(e,t,n){const r=parseFloat(t);if(isNaN(r))throw new h(d.InvalidOperator);return ie(e,r,n)}(t,n,e);throw new h(d.InvalidOperator)}if(J(t)){if(_(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new h(d.InvalidOperator)}(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon("UTC").diff(t.toDateTimeLuxon("UTC")).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(j(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.toDateTime().zone).diff(t.toDateTime()).as("days");throw new h(d.InvalidOperator)}(t,n,e);if($(n))return function(e,t,n){if("-"===n)return e.toDateTimeLuxon(t.zone).diff(t).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(R(n))return function(){throw new h(d.InvalidOperator)}();throw new h(d.InvalidOperator)}if(V(t)){if(_(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus("milliseconds",r);case"-":return e.plus("milliseconds",-1*r)}throw new h(d.InvalidOperator)}(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return e.plus("milliseconds",t.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*t.valueInMilliseconds())}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(){throw new h(d.InvalidOperator)}();if(j(n))return function(){throw new h(d.InvalidOperator)}();if($(n))return function(){throw new h(d.InvalidOperator)}();if(R(n))return function(){throw new h(d.InvalidOperator)}();throw new h(d.InvalidOperator)}if(U(t)){if(_(n))return function(e,t,n){switch(n){case"+":return x.createFromMilliseconds(e.valueInMilliseconds()+t);case"-":return x.createFromMilliseconds(e.valueInMilliseconds()-t);case"*":return x.createFromMilliseconds(e.valueInMilliseconds()*t);case"/":return x.createFromMilliseconds(e.valueInMilliseconds()/t)}throw new h(d.InvalidOperator)}(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return x.createFromMilliseconds(e.valueInMilliseconds()+t.valueInMilliseconds());case"-":return x.createFromMilliseconds(e.valueInMilliseconds()-t.valueInMilliseconds());case"*":return x.createFromMilliseconds(e.valueInMilliseconds()*t.valueInMilliseconds());case"/":return x.createFromMilliseconds(e.valueInMilliseconds()/t.valueInMilliseconds())}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new h(d.InvalidOperator)}(t,n,e);if(J(n))return function(e,t,n){if("+"===n)return t.plus("milliseconds",e.valueInMilliseconds());throw new h(d.InvalidOperator)}(t,n,e);if(j(n))return function(e,t,n){if("+"===n)return t.addMilliseconds(e.valueInMilliseconds());throw new h(d.InvalidOperator)}(t,n,e);if($(n))return function(e,t,n){switch(n){case"+":return t.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-t.toMillis()}throw new h(d.InvalidOperator)}(t,n,e);if(R(n))return function(){throw new h(d.InvalidOperator)}();throw new h(d.InvalidOperator)}if($(t)){if(_(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.plus({milliseconds:r});case"-":return e.minus({milliseconds:r})}throw new h(d.InvalidOperator)}(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return e.plus({milliseconds:t.valueInMilliseconds()});case"-":return e.minus({milliseconds:t.valueInMilliseconds()})}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTimeLuxon(e.zone)).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(j(n))return function(e,t,n){if("-"===n)return e.diff(t.toDateTime()).as("days");throw new h(d.InvalidOperator)}(t,n,e);if($(n))return function(e,t,n){if("-"===n)return e.diff(t).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(R(n))return function(){throw new h(d.InvalidOperator)}();throw new h(d.InvalidOperator)}if(j(t)){if(_(n))return function(e,t,n){const r=1e3*t*24*60*60;switch(n){case"+":return e.addMilliseconds(r);case"-":return e.addMilliseconds(-1*r)}throw new h(d.InvalidOperator)}(t,n,e);if(U(n))return function(e,t,n){switch(n){case"+":return e.addMilliseconds(t.valueInMilliseconds());case"-":return e.addMilliseconds(-1*t.valueInMilliseconds())}throw new h(d.InvalidOperator)}(t,n,e);if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(j(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t.toDateTime()).as("days");throw new h(d.InvalidOperator)}(t,n,e);if($(n))return function(e,t,n){if("-"===n)return e.toDateTime().diff(t).as("days");throw new h(d.InvalidOperator)}(t,n,e);if(R(n))return function(){throw new h(d.InvalidOperator)}();throw new h(d.InvalidOperator)}if(R(t)){if(_(n))return function(e,t,n){const r=parseFloat(e);if(isNaN(r))throw new h(d.InvalidOperator);return ie(r,t,n)}(t,n,e);if(U(n))return function(){throw new h(d.InvalidOperator)}();if(V(n))return function(){throw new h(d.InvalidOperator)}();if(J(n))return function(){throw new h(d.InvalidOperator)}();if(j(n))return function(){throw new h(d.InvalidOperator)}();if($(n))return function(){throw new h(d.InvalidOperator)}();if(R(n))return function(e,t,n){if("+"===n)return e+t;throw new h(d.InvalidOperator)}(t,n,e);throw new h(d.InvalidOperator)}throw new h(d.InvalidOperator)}function ie(e,t,n){switch(n){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t}throw new h(d.InvalidOperator)}function oe(e,t,n,r){var a=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(a,oe.prototype),a.expected=t,a.found=n,a.location=r,a.name="SyntaxError",a}function ue(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(oe,Error),oe.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,o=this.location.source+":"+i.line+":"+i.column;if(r){var u=this.location.end,s=ue("",i.line.toString().length," "),l=r[a.line-1],c=(a.line===u.line?u.column:l.length+1)-a.column||1;t+="\n --\x3e "+o+"\n"+s+" |\n"+i.line+" | "+l+"\n"+s+" | "+ue("",a.column-1," ")+ue("",c,"^")}else t+="\n at "+o}return t},oe.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function o(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."};class se{static parse(e){return function(e,t){var n,r={},a=(t=void 0!==t?t:{}).grammarSource,i={start:ti},o=ti,u="!",s="=",l=">=",c=">",f="<=",p="<>",d="!=",m="||",h="@",v="'",w="N'",I="''",g=".",y="null",T="true",N="false",S="in",O="is",x="like",C="escape",M="not",E="and",b="or",F="between",A="from",P="for",D="substring",L="extract",_="trim",R="position",U="timestamp",k="date",$="time",J="leading",V="trailing",j="both",Z="cast",z="as",H="integer",q="int",Y="smallint",B="float",Q="real",G="varchar",W="to",K="interval",X="year",ee="timezone_hour",te="timezone_minute",ne="month",re="day",ae="hour",ie="minute",ue="second",se="case",le="end",ce="when",fe="then",pe="else",de=",",me="(",he=")",ve="`",we=/^[<-=]/,Ie=/^[+\-]/,ge=/^[*\/]/,ye=/^[A-Za-z_\x80-\uFFFF]/,Te=/^[A-Za-z0-9_]/,Ne=/^[A-Za-z0-9_.\x80-\uFFFF]/,Se=/^["]/,Oe=/^[^']/,xe=/^[0-9]/,Ce=/^[eE]/,Me=/^[ \t\n\r]/,Ee=/^[^`]/,be=Ga("!",!1),Fe=Ga("=",!1),Ae=Ga(">=",!1),Pe=Ga(">",!1),De=Ga("<=",!1),Le=Ga("<>",!1),_e=Wa([["<","="]],!1,!1),Re=Ga("!=",!1),Ue=Wa(["+","-"],!1,!1),ke=Ga("||",!1),$e=Wa(["*","/"],!1,!1),Je=Wa([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Ve=Wa([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),je=Wa([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Ze=Wa(['"'],!1,!1),ze=Ga("@",!1),He=Ga("'",!1),qe=Ga("N'",!1),Ye=Ga("''",!1),Be=Wa(["'"],!0,!1),Qe=Ga(".",!1),Ge=Wa([["0","9"]],!1,!1),We=Wa(["e","E"],!1,!1),Ke=Ga("NULL",!0),Xe=Ga("TRUE",!0),et=Ga("FALSE",!0),tt=Ga("IN",!0),nt=Ga("IS",!0),rt=Ga("LIKE",!0),at=Ga("ESCAPE",!0),it=Ga("NOT",!0),ot=Ga("AND",!0),ut=Ga("OR",!0),st=Ga("BETWEEN",!0),lt=Ga("FROM",!0),ct=Ga("FOR",!0),ft=Ga("SUBSTRING",!0),pt=Ga("EXTRACT",!0),dt=Ga("TRIM",!0),mt=Ga("POSITION",!0),ht=Ga("TIMESTAMP",!0),vt=Ga("DATE",!0),wt=Ga("TIME",!0),It=Ga("LEADING",!0),gt=Ga("TRAILING",!0),yt=Ga("BOTH",!0),Tt=Ga("CAST",!0),Nt=Ga("AS",!0),St=Ga("INTEGER",!0),Ot=Ga("INT",!0),xt=Ga("SMALLINT",!0),Ct=Ga("FLOAT",!0),Mt=Ga("REAL",!0),Et=Ga("VARCHAR",!0),bt=Ga("TO",!0),Ft=Ga("INTERVAL",!0),At=Ga("YEAR",!0),Pt=Ga("TIMEZONE_HOUR",!0),Dt=Ga("TIMEZONE_MINUTE",!0),Lt=Ga("MONTH",!0),_t=Ga("DAY",!0),Rt=Ga("HOUR",!0),Ut=Ga("MINUTE",!0),kt=Ga("SECOND",!0),$t=Ga("CASE",!0),Jt=Ga("END",!0),Vt=Ga("WHEN",!0),jt=Ga("THEN",!0),Zt=Ga("ELSE",!0),zt=Ga(",",!1),Ht=Ga("(",!1),qt=Ga(")",!1),Yt=Wa([" ","\t","\n","\r"],!1,!1),Bt=Ga("`",!1),Qt=Wa(["`"],!0,!1),Gt=function(e){return e},Wt=function(e){return mo(Ba(),...e)},Kt=function(e,t,n){return{op:t,expr:n,location:Ba()}},Xt=function(e,t){return ho(e,t)},en=function(e,t,n){return{op:t,expr:n,location:Ba()}},tn=function(e,t){return ho(e,t)},nn=function(e){return function(e,t,n){return{type:"unary-expression",location:n,operator:"NOT",expr:t}}(0,e,Ba())},rn=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?ho(e,t.tail):po(t.op,e,t.right,t.escape,Ba())},an=function(e,t){return{op:e,expr:t,location:Ba()}},on=function(e){return{type:"arithmetic",tail:e}},un=function(e,t){return{op:e+"NOT",right:t}},sn=function(e,t){return{op:e,right:t}},ln=function(e,t,n){return mo(Ba(),t,n)},cn=function(e,t){return{op:"NOT"+e,right:t}},fn=function(e,t,n){return mo(Ba(),t,n)},pn=function(e,t){return{op:e,right:t}},dn=function(e){return e[0]+" "+e[2]},mn=function(e){return e[0]+" "+e[2]},hn=function(e,t,n){return{op:e,right:t,escape:n.value}},vn=function(e,t){return{op:e,right:t,escape:""}},wn=function(e,t){return{op:e,right:t}},In=function(e,t){return{op:e,right:t}},gn=function(e,t,n){return{op:t,expr:n,location:Ba()}},yn=function(e,t){return ho(e,t)},Tn=function(e,t,n){return{op:t,expr:n,location:Ba()}},Nn=function(e,t){return ho(e,t)},Sn=function(e){return e.paren=!0,e},On=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:Ba(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:Ba(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:Ba(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:Ba()}:{type:"column-reference",location:Ba(),table:"",column:e}},xn=function(e){return{type:"column-reference",location:Ba(),table:"",column:e,delimited:!0}},Cn=function(e){return e},Mn=function(e,t){return e+t.join("")},En=function(e,t){return e+t.join("")},bn=function(e){return e},Fn=function(e){return e.join("")},An=function(){return'"'},Pn=function(e){return{type:"parameter",location:Ba(),value:e[1]}},Dn=function(e,t){return mo(Ba(),e,t)},Ln=function(e,t){return mo(Ba(),e,t)},_n=function(e){return{type:"function",location:Ba(),name:"extract",args:e}},Rn=function(e,t,n){return mo(Ba(),e,t,...n?[n]:[])},Un=function(e,t,n){return mo(Ba(),e,t,n)},kn=function(e){return{type:"function",location:Ba(),name:"substring",args:e}},$n=function(e,t){return mo(Ba(),e,t)},Jn=function(e,t){return mo(Ba(),e,t)},Vn=function(e){return{type:"function",location:Ba(),name:"cast",args:e}},jn=function(){return{type:"data-type",location:Ba(),value:{type:"integer"}}},Zn=function(){return{type:"data-type",location:Ba(),value:{type:"smallint"}}},zn=function(){return{type:"data-type",location:Ba(),value:{type:"float"}}},Hn=function(){return{type:"data-type",location:Ba(),value:{type:"real"}}},qn=function(){return{type:"data-type",location:Ba(),value:{type:"date"}}},Yn=function(){return{type:"data-type",location:Ba(),value:{type:"timestamp"}}},Bn=function(){return{type:"data-type",location:Ba(),value:{type:"time"}}},Qn=function(e){return{type:"data-type",location:Ba(),value:{type:"varchar",size:parseInt(e)}}},Gn=function(e,t,n){return mo(Ba(),e,t,n)},Wn=function(e,t){return mo(Ba(),e,t)},Kn=function(e){return{type:"function",location:Ba(),name:"trim",args:e}},Xn=function(e){return{type:"string",location:Ba(),value:e??"BOTH"}},er=function(e,t){return mo(Ba(),e,t)},tr=function(e,t){return mo(Ba(),e,t)},nr=function(e){return{type:"function",location:Ba(),name:"position",args:e}},rr=function(e,t){return{type:"function",location:Ba(),name:e,args:t}},ar=function(e){return{type:"string",location:Ba(),value:e}},ir=function(e){var t;return"string"===e.type&&(t=e.value,!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(t)&&Qa("Timestamp literal is invalid")),{type:"timestamp",location:Ba(),value:e.value}},or=function(e){var t;return"string"===e.type&&(t=e.value,!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(t)&&Qa("Time literal is invalid")),{type:"time",location:Ba(),value:e.value}},ur=function(e,t,n){return{type:"interval",location:Ba(),value:t,qualifier:n,op:e}},sr=function(e,t){return{type:"interval",location:Ba(),value:e,qualifier:t,op:""}},lr=function(e,t){return{type:"interval-qualifier",location:Ba(),start:e,end:t}},cr=function(e,t){return{type:"interval-period",location:Ba(),period:e.value,precision:t,secondary:null}},fr=function(e){return{type:"interval-period",location:Ba(),period:e.value,precision:null,secondary:null}},pr=function(e){return{type:"interval-period",location:Ba(),period:e.value,precision:null,secondary:null}},dr=function(e,t){return{type:"interval-period",location:Ba(),period:"second",precision:e,secondary:t}},mr=function(e){return{type:"interval-period",location:Ba(),period:"second",precision:e,secondary:null}},hr=function(){return{type:"interval-period",location:Ba(),period:"second",precision:null,secondary:null}},vr=function(e,t){return{type:"interval-period",location:Ba(),period:e.value,precision:t,secondary:null}},wr=function(e){return{type:"interval-period",location:Ba(),period:e.value,precision:null,secondary:null}},Ir=function(e,t){return{type:"interval-period",location:Ba(),period:"second",precision:e,secondary:t}},gr=function(e){return{type:"interval-period",location:Ba(),period:"second",precision:e,secondary:null}},yr=function(){return{type:"interval-period",location:Ba(),period:"second",precision:null,secondary:null}},Tr=function(){return{type:"string",location:Ba(),value:"day"}},Nr=function(){return{type:"string",location:Ba(),value:"hour"}},Sr=function(){return{type:"string",location:Ba(),value:"minute"}},Or=function(){return{type:"string",location:Ba(),value:"month"}},xr=function(){return{type:"string",location:Ba(),value:"year"}},Cr=function(e){return parseFloat(e)},Mr=function(e){return parseFloat(e)},Er=function(e){var t;return"string"===e.type&&(t=e.value,!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(t)&&Qa("Date literal is invalid")),{type:"date",location:Ba(),value:e.value}},br=function(){return{type:"null",location:Ba(),value:null}},Fr=function(){return{type:"boolean",location:Ba(),value:!0}},Ar=function(){return{type:"boolean",location:Ba(),value:!1}},Pr=function(){return"'"},Dr=function(e){return{type:"string",location:Ba(),value:e.join("")}},Lr=function(e,t){return{type:"case-expression",location:Ba(),format:"simple",operand:e,clauses:t,else:null,elseLocation:null}},_r=function(e,t,n){return{type:"case-expression",location:Ba(),format:"simple",operand:e,clauses:t,else:n.value,elseLocation:n.location}},Rr=function(e){return{type:"case-expression",location:Ba(),format:"searched",clauses:e,else:null,elseLocation:null}},Ur=function(e,t){return{type:"case-expression",location:Ba(),format:"searched",clauses:e,else:t.value,elseLocation:t.location}},kr=function(e,t){return{type:"when-clause",location:Ba(),operand:e,value:t}},$r=function(e,t){return{type:"when-clause",location:Ba(),operand:e,value:t}},Jr=function(e){return{type:"else-clause",location:Ba(),value:e}},Vr=function(e){return{type:"number",location:Ba(),value:e}},jr=function(e,t,n){return parseFloat(e+t+n)},Zr=function(e,t){return parseFloat(e+t)},zr=function(e,t){return parseFloat(e+t)},Hr=function(e){return parseFloat(e)},qr=function(e,t){return e[0]+t},Yr=function(e){return"."+(null!=e?e:"")},Br=function(e,t){return e+t},Qr=function(e){return e.join("")},Gr=function(e,t){return"e"+(null===t?"":t)},Wr=function(){return"IN"},Kr=function(){return"IS"},Xr=function(){return"LIKE"},ea=function(){return"ESCAPE"},ta=function(){return"NOT"},na=function(){return"AND"},ra=function(){return"OR"},aa=function(){return"BETWEEN"},ia=function(){return"FROM"},oa=function(){return"FOR"},ua=function(){return"SUBSTRING"},sa=function(){return"EXTRACT"},la=function(){return"TRIM"},ca=function(){return"POSITION"},fa=function(){return"TIMESTAMP"},pa=function(){return"DATE"},da=function(){return"TIME"},ma=function(){return"LEADING"},ha=function(){return"TRAILING"},va=function(){return"BOTH"},wa=function(){return"CAST"},Ia=function(){return"AS"},ga=function(){return"INTEGER"},ya=function(){return"INT"},Ta=function(){return"SMALLINT"},Na=function(){return"FLOAT"},Sa=function(){return"REAL"},Oa=function(){return"VARCHAR"},xa=function(){return"TO"},Ca=function(){return"INTERVAL"},Ma=function(){return"YEAR"},Ea=function(){return"TIMEZONE_HOUR"},ba=function(){return"TIMEZONE_MINUTE"},Fa=function(){return"MONTH"},Aa=function(){return"DAY"},Pa=function(){return"HOUR"},Da=function(){return"MINUTE"},La=function(){return"SECOND"},_a=function(){return"CASE"},Ra=function(){return"END"},Ua=function(){return"WHEN"},ka=function(){return"THEN"},$a=function(){return"ELSE"},Ja=function(e){return e},Va=function(e){return e.join("")},ja=0|t.peg$currPos,Za=ja,za=[{line:1,column:1}],Ha=ja,qa=t.peg$maxFailExpected||[],Ya=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=i[t.startRule]}function Ba(){return Xa(Za,ja)}function Qa(e,t){throw function(e,t){return new oe(e,null,null,t)}(e,t=void 0!==t?t:Xa(Za,ja))}function Ga(e,t){return{type:"literal",text:e,ignoreCase:t}}function Wa(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ka(t){var n,r=za[t];if(r)return r;if(t>=za.length)n=za.length-1;else for(n=t;!za[--n];);for(r={line:(r=za[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return za[t]=r,r}function Xa(e,t,n){var r=Ka(e),i=Ka(t);return{source:a,start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function ei(e){ja<Ha||(ja>Ha&&(Ha=ja,qa=[]),qa.push(e))}function ti(){var e,t;return e=ja,co(),(t=ri())!==r?(co(),Za=e,e=Gt(t)):(ja=e,e=r),e}function ni(){var e,t,n,a,i,o;if(e=ja,so()!==r){for(co(),t=[],n=ri();n!==r;)t.push(n),n=ja,a=ja,i=co(),(o=uo())!==r?a=i=[i,o,co()]:(ja=a,a=r),a!==r&&(a=ri())===r?(ja=n,n=r):n=a;n=co(),(a=lo())!==r?(Za=e,e=Wt(t)):(ja=e,e=r)}else ja=e,e=r;return e}function ri(){var e,t,n,a,i,o;if(e=ja,(t=ai())!==r){for(n=[],a=ja,co(),(i=Zi())!==r?(co(),(o=ai())!==r?(Za=a,a=Kt(t,i,o)):(ja=a,a=r)):(ja=a,a=r);a!==r;)n.push(a),a=ja,co(),(i=Zi())!==r?(co(),(o=ai())!==r?(Za=a,a=Kt(t,i,o)):(ja=a,a=r)):(ja=a,a=r);Za=e,e=Xt(t,n)}else ja=e,e=r;return e}function ai(){var e,t,n,a,i,o;if(e=ja,(t=ii())!==r){for(n=[],a=ja,co(),(i=ji())!==r?(co(),(o=ii())!==r?(Za=a,a=en(t,i,o)):(ja=a,a=r)):(ja=a,a=r);a!==r;)n.push(a),a=ja,co(),(i=ji())!==r?(co(),(o=ii())!==r?(Za=a,a=en(t,i,o)):(ja=a,a=r)):(ja=a,a=r);Za=e,e=tn(t,n)}else ja=e,e=r;return e}function ii(){var t,n,a,i,o;return t=ja,(n=Vi())===r&&(n=ja,33===e.charCodeAt(ja)?(a=u,ja++):(a=r,0===Ya&&ei(be)),a!==r?(i=ja,Ya++,61===e.charCodeAt(ja)?(o=s,ja++):(o=r,0===Ya&&ei(Fe)),Ya--,o===r?i=void 0:(ja=i,i=r),i!==r?n=a=[a,i]:(ja=n,n=r)):(ja=n,n=r)),n!==r?(a=co(),(i=ii())!==r?(Za=t,t=nn(i)):(ja=t,t=r)):(ja=t,t=r),t===r&&(t=function(){var t,n,a,i;return t=ja,(n=li())!==r?(a=ja,co(),i=function(){var t;return t=function(){var e,t,n,a,i;if(e=ja,t=[],n=ja,co(),(a=oi())!==r?(co(),(i=li())!==r?(Za=n,n=an(a,i)):(ja=n,n=r)):(ja=n,n=r),n!==r)for(;n!==r;)t.push(n),n=ja,co(),(a=oi())!==r?(co(),(i=li())!==r?(Za=n,n=an(a,i)):(ja=n,n=r)):(ja=n,n=r);else t=r;return t!==r&&(Za=e,t=on(t)),t}(),t===r&&(t=function(){var e,t,n;return e=ja,(t=si())!==r?(co(),(n=ni())!==r?(Za=e,e=wn(t,n)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=si())!==r?(co(),(n=yi())!==r?(Za=e,e=In(t,n)):(ja=e,e=r)):(ja=e,e=r)),e}(),t===r&&(t=function(){var e,t,n,a,i,o,u,s;return e=ja,(t=Vi())!==r?(co(),(n=zi())!==r?(a=co(),i=ja,(o=li())!==r?(co(),(u=ji())!==r?(co(),(s=li())!==r?(Za=i,i=ln(n,o,s)):(ja=i,i=r)):(ja=i,i=r)):(ja=i,i=r),i!==r?(Za=e,e=cn(n,i)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=zi())!==r?(co(),n=ja,(a=li())!==r?(i=co(),(o=ji())!==r?(co(),(u=li())!==r?(Za=n,n=fn(t,a,u)):(ja=n,n=r)):(ja=n,n=r)):(ja=n,n=r),n!==r?(Za=e,e=pn(t,n)):(ja=e,e=r)):(ja=e,e=r)),e}(),t===r&&(t=function(){var e,t,n,a;return e=ja,(t=$i())!==r?(co(),(n=Vi())!==r?(co(),(a=li())!==r?(Za=e,e=un(t,a)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=$i())!==r?(co(),(n=li())!==r?(Za=e,e=sn(t,n)):(ja=e,e=r)):(ja=e,e=r)),e}(),t===r&&(t=function(){var t,n,a,i,o;return t=ja,(n=ui())!==r?(co(),(a=Ei())!==r?(co(),i=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,6)).toLowerCase()===C?ja+=6:(n=r,0===Ya&&ei(at)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ea()):(ja=t,t=r)):(ja=t,t=r),t}(),i!==r?(co(),(o=bi())!==r?(Za=t,t=hn(n,a,o)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r),t===r&&(t=ja,(n=ui())!==r?(co(),(a=Ei())!==r?(Za=t,t=vn(n,a)):(ja=t,t=r)):(ja=t,t=r)),t}())))),t}(),i!==r?a=i:(ja=a,a=r),a===r&&(a=null),Za=t,t=rn(n,a)):(ja=t,t=r),t}()),t}function oi(){var t;return e.substr(ja,2)===l?(t=l,ja+=2):(t=r,0===Ya&&ei(Ae)),t===r&&(62===e.charCodeAt(ja)?(t=c,ja++):(t=r,0===Ya&&ei(Pe)),t===r&&(e.substr(ja,2)===f?(t=f,ja+=2):(t=r,0===Ya&&ei(De)),t===r&&(e.substr(ja,2)===p?(t=p,ja+=2):(t=r,0===Ya&&ei(Le)),t===r&&(t=e.charAt(ja),we.test(t)?ja++:(t=r,0===Ya&&ei(_e)),t===r&&(e.substr(ja,2)===d?(t=d,ja+=2):(t=r,0===Ya&&ei(Re))))))),t}function ui(){var e,t,n,a,i;return e=ja,t=ja,(n=Vi())!==r?(a=co(),(i=Ji())!==r?t=n=[n,a,i]:(ja=t,t=r)):(ja=t,t=r),t!==r&&(Za=e,t=dn(t)),(e=t)===r&&(e=Ji()),e}function si(){var e,t,n,a,i;return e=ja,t=ja,(n=Vi())!==r?(a=co(),(i=ki())!==r?t=n=[n,a,i]:(ja=t,t=r)):(ja=t,t=r),t!==r&&(Za=e,t=mn(t)),(e=t)===r&&(e=ki()),e}function li(){var e,t,n,a,i,o;if(e=ja,(t=fi())!==r){for(n=[],a=ja,co(),(i=ci())!==r?(co(),(o=fi())!==r?(Za=a,a=gn(t,i,o)):(ja=a,a=r)):(ja=a,a=r);a!==r;)n.push(a),a=ja,co(),(i=ci())!==r?(co(),(o=fi())!==r?(Za=a,a=gn(t,i,o)):(ja=a,a=r)):(ja=a,a=r);Za=e,e=yn(t,n)}else ja=e,e=r;return e}function ci(){var t;return t=e.charAt(ja),Ie.test(t)?ja++:(t=r,0===Ya&&ei(Ue)),t===r&&(e.substr(ja,2)===m?(t=m,ja+=2):(t=r,0===Ya&&ei(ke))),t}function fi(){var e,t,n,a,i,o;if(e=ja,(t=di())!==r){for(n=[],a=ja,co(),(i=pi())!==r?(co(),(o=di())!==r?(Za=a,a=Tn(t,i,o)):(ja=a,a=r)):(ja=a,a=r);a!==r;)n.push(a),a=ja,co(),(i=pi())!==r?(co(),(o=di())!==r?(Za=a,a=Tn(t,i,o)):(ja=a,a=r)):(ja=a,a=r);Za=e,e=Nn(t,n)}else ja=e,e=r;return e}function pi(){var t;return t=e.charAt(ja),ge.test(t)?ja++:(t=r,0===Ya&&ei($e)),t}function di(){var t,n;return t=function(){var t;return(t=bi())===r&&(t=function(){var e,t,n,a;return e=ja,t=function(){var e,t,n,a;return e=ja,(t=Di())!==r&&(n=Li())!==r&&(a=_i())!==r?(Za=e,e=jr(t,n,a)):(ja=e,e=r),e===r&&(e=ja,(t=Di())!==r&&(n=Li())!==r?(Za=e,e=Zr(t,n)):(ja=e,e=r),e===r&&(e=ja,(t=Di())!==r&&(n=_i())!==r?(Za=e,e=zr(t,n)):(ja=e,e=r),e===r&&(e=ja,(t=Di())!==r&&(Za=e,t=Hr(t)),e=t))),e}(),t!==r?(n=ja,Ya++,a=hi(),Ya--,a===r?n=void 0:(ja=n,n=r),n!==r?(Za=e,e=Vr(t)):(ja=e,e=r)):(ja=e,e=r),e}(),t===r&&(t=function(){var t,n;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===T?ja+=4:(n=r,0===Ya&&ei(Xe)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?t=n=[n,a]:(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=Fr()),(t=n)===r&&(t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,5)).toLowerCase()===N?ja+=5:(n=r,0===Ya&&ei(et)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?t=n=[n,a]:(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=Ar()),t=n),t}(),t===r&&(t=function(){var t,n;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===y?ja+=4:(n=r,0===Ya&&ei(Ke)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?t=n=[n,a]:(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=br()),n}(),t===r&&(t=function(){var e,t;return e=ja,Bi()!==r?(co(),(t=Ei())!==r?(Za=e,e=Er(t)):(ja=e,e=r)):(ja=e,e=r),e}(),t===r&&(t=function(){var e,t;return e=ja,Yi()!==r?(co(),(t=Ei())!==r?(Za=e,e=ir(t)):(ja=e,e=r)):(ja=e,e=r),e}(),t===r&&(t=function(){var t,n,a,i;return t=ja,Gi()!==r?(co(),n=e.charAt(ja),Ie.test(n)?ja++:(n=r,0===Ya&&ei(Ue)),n!==r?(co(),(a=Ei())!==r?(co(),(i=Oi())!==r?(Za=t,t=ur(n,a,i)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r),t===r&&(t=ja,Gi()!==r?(co(),(n=Ei())!==r?(co(),(a=Oi())!==r?(Za=t,t=sr(n,a)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)),t}(),t===r&&(t=function(){var e,t;return e=ja,Qi()!==r?(co(),(t=Ei())!==r?(Za=e,e=or(t)):(ja=e,e=r)):(ja=e,e=r),e}()))))))),t}(),t===r&&(t=function(){var e,t,n,a;return e=ja,qi()!==r?(co(),t=ja,so()!==r?(co(),(n=Si())!==r?(co(),Hi()!==r?(co(),(a=ri())!==r?(co(),lo()!==r?(Za=t,t=Dn(n,a)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r),t===r&&(t=ja,so()!==r?(co(),(n=Si())!==r?(co(),uo()!==r?(co(),(a=ri())!==r?(co(),lo()!==r?(Za=t,t=Ln(n,a)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)),t!==r?(Za=e,e=_n(t)):(ja=e,e=r)):(ja=e,e=r),e}(),t===r&&(t=function(){var t,n,a,i,o,u,s,l,c;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,9)).toLowerCase()===D?ja+=9:(n=r,0===Ya&&ei(ft)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ua()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),a=ja,so()!==r?(co(),(i=ri())!==r?(co(),Hi()!==r?(co(),(o=ri())!==r?(co(),u=ja,s=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===P?ja+=3:(n=r,0===Ya&&ei(ct)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=oa()):(ja=t,t=r)):(ja=t,t=r),t}(),s!==r?(l=co(),(c=ri())!==r?(co(),u=c):(ja=u,u=r)):(ja=u,u=r),u===r&&(u=null),(s=lo())!==r?(Za=a,a=Rn(i,o,u)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r),a===r&&(a=ja,so()!==r?(co(),(i=ri())!==r?(co(),uo()!==r?(co(),(o=ri())!==r?(co(),(u=uo())!==r?(s=co(),(l=ri())!==r&&(c=lo())!==r?(Za=a,a=Un(i,o,l)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)),a!==r?(Za=t,t=kn(a)):(ja=t,t=r)):(ja=t,t=r),t}(),t===r&&(t=function(){var t,n,a,i,o,u;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===_?ja+=4:(n=r,0===Ya&&ei(dt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=la()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),a=ja,so()!==r?(co(),i=Ni(),co(),(o=ri())!==r?(co(),Hi()!==r?(co(),(u=ri())!==r?(co(),lo()!==r?(Za=a,a=Gn(i,o,u)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r),a===r&&(a=ja,so()!==r?(co(),i=Ni(),co(),(o=ri())!==r?(co(),lo()!==r?(Za=a,a=Wn(i,o)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)),a!==r?(Za=t,t=Kn(a)):(ja=t,t=r)):(ja=t,t=r),t}(),t===r&&(t=function(){var t,n,a,i,o;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,8)).toLowerCase()===R?ja+=8:(n=r,0===Ya&&ei(mt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ca()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),a=ja,so()!==r?(co(),(i=ri())!==r?(co(),ki()!==r?(co(),(o=ri())!==r?(co(),lo()!==r?(Za=a,a=er(i,o)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r),a===r&&(a=ja,so()!==r?(co(),(i=ri())!==r?(co(),uo()!==r?(co(),(o=ri())!==r?(co(),lo()!==r?(Za=a,a=tr(i,o)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)),a!==r?(Za=t,t=nr(a)):(ja=t,t=r)):(ja=t,t=r),t}(),t===r&&(t=function(){var t,n,a,i,o,u;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===Z?ja+=4:(n=r,0===Ya&&ei(Tt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=wa()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),a=ja,so()!==r?(co(),(i=ri())!==r?(co(),o=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,2)).toLowerCase()===z?ja+=2:(n=r,0===Ya&&ei(Nt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ia()):(ja=t,t=r)):(ja=t,t=r),t}(),o!==r?(co(),(u=Ti())!==r?(co(),lo()!==r?(Za=a,a=$n(i,u)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r),a===r&&(a=ja,so()!==r?(co(),(i=ri())!==r?(co(),(o=uo())!==r?(co(),(u=Ti())!==r?(co(),lo()!==r?(Za=a,a=Jn(i,u)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)):(ja=a,a=r)),a!==r?(Za=t,t=Vn(a)):(ja=t,t=r)):(ja=t,t=r),t}(),t===r&&(t=function(){var t,n,a,i;return t=ja,n=ja,Ya++,a=qi(),Ya--,a===r?n=void 0:(ja=n,n=r),n!==r?(a=function(){var t,n,a,i;if(t=ja,(n=mi())!==r&&(Za=t,n=Ja(n)),(t=n)===r)if(t=ja,96===e.charCodeAt(ja)?(n=ve,ja++):(n=r,0===Ya&&ei(Bt)),n!==r){if(a=[],i=e.charAt(ja),Ee.test(i)?ja++:(i=r,0===Ya&&ei(Qt)),i!==r)for(;i!==r;)a.push(i),i=e.charAt(ja),Ee.test(i)?ja++:(i=r,0===Ya&&ei(Qt));else a=r;a!==r?(96===e.charCodeAt(ja)?(i=ve,ja++):(i=r,0===Ya&&ei(Bt)),i!==r?(Za=t,t=Va(a)):(ja=t,t=r)):(ja=t,t=r)}else ja=t,t=r;return t}(),a!==r?(co(),(i=ni())!==r?(Za=t,t=rr(a,i)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r),t}(),t===r&&(t=function(){var e;return e=function(){var e,t,n,a,i;if(e=ja,ro()!==r)if(co(),(t=ri())!==r){for(co(),n=[],a=ja,(i=Ai())!==r?(co(),a=i):(ja=a,a=r);a!==r;)n.push(a),a=ja,(i=Ai())!==r?(co(),a=i):(ja=a,a=r);(a=ao())!==r?(Za=e,e=Lr(t,n)):(ja=e,e=r)}else ja=e,e=r;else ja=e,e=r;if(e===r)if(e=ja,ro()!==r)if(co(),(t=ri())!==r){for(co(),n=[],a=ja,(i=Ai())!==r?(co(),a=i):(ja=a,a=r);a!==r;)n.push(a),a=ja,(i=Ai())!==r?(co(),a=i):(ja=a,a=r);(a=Pi())!==r?(i=co(),ao()!==r?(Za=e,e=_r(t,n,a)):(ja=e,e=r)):(ja=e,e=r)}else ja=e,e=r;else ja=e,e=r;return e}(),e===r&&(e=function(){var e,t,n,a;if(e=ja,ro()!==r){for(co(),t=[],n=ja,(a=Fi())!==r?(co(),n=a):(ja=n,n=r);n!==r;)t.push(n),n=ja,(a=Fi())!==r?(co(),n=a):(ja=n,n=r);(n=ao())!==r?(Za=e,e=Rr(t)):(ja=e,e=r)}else ja=e,e=r;if(e===r)if(e=ja,ro()!==r){for(co(),t=[],n=ja,(a=Fi())!==r?(co(),n=a):(ja=n,n=r);n!==r;)t.push(n),n=ja,(a=Fi())!==r?(co(),n=a):(ja=n,n=r);(n=Pi())!==r?(a=co(),ao()!==r?(Za=e,e=Ur(t,n)):(ja=e,e=r)):(ja=e,e=r)}else ja=e,e=r;return e}()),e}(),t===r&&(t=function(){var e,t;return e=ja,t=function(){var e,t;return e=ja,t=function(){var e,t,n,a;if(e=ja,(t=hi())!==r){for(n=[],a=wi();a!==r;)n.push(a),a=wi();Za=e,e=Mn(t,n)}else ja=e,e=r;return e}(),t!==r&&(Za=e,t=Cn(t)),t}(),t!==r&&(Za=e,t=On(t)),(e=t)===r&&(e=ja,t=function(){var e,t;return e=ja,gi()!==r?(t=function(){var e,t,n;for(e=ja,t=[],n=Ii();n!==r;)t.push(n),n=Ii();return Za=e,Fn(t)}(),gi()!==r?(Za=e,e=bn(t)):(ja=e,e=r)):(ja=e,e=r),e}(),t!==r&&(Za=e,t=xn(t)),e=t),e}(),t===r&&(t=yi())===r&&(t=ja,so()!==r?(co(),(n=ri())!==r?(co(),lo()!==r?(Za=t,t=Sn(n)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)))))))))),t}function mi(){var e,t,n,a;if(e=ja,(t=hi())!==r){for(n=[],a=vi();a!==r;)n.push(a),a=vi();Za=e,e=En(t,n)}else ja=e,e=r;return e}function hi(){var t;return t=e.charAt(ja),ye.test(t)?ja++:(t=r,0===Ya&&ei(Je)),t}function vi(){var t;return t=e.charAt(ja),Te.test(t)?ja++:(t=r,0===Ya&&ei(Ve)),t}function wi(){var t;return t=e.charAt(ja),Ne.test(t)?ja++:(t=r,0===Ya&&ei(je)),t}function Ii(){var t;return(t=function(){var t;return t=e.charAt(ja),Ne.test(t)?ja++:(t=r,0===Ya&&ei(je)),t}())===r&&(t=function(){var e;return e=ja,gi()!==r&&gi()!==r?(Za=e,e=An()):(ja=e,e=r),e}()),t}function gi(){var t;return t=e.charAt(ja),Se.test(t)?ja++:(t=r,0===Ya&&ei(Ze)),t}function yi(){var t,n,a,i;return t=ja,n=ja,64===e.charCodeAt(ja)?(a=h,ja++):(a=r,0===Ya&&ei(ze)),a!==r&&(i=mi())!==r?n=a=[a,i]:(ja=n,n=r),n!==r&&(Za=t,n=Pn(n)),n}function Ti(){var t,n,a;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,7)).toLowerCase()===H?ja+=7:(n=r,0===Ya&&ei(St)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ga()):(ja=t,t=r)):(ja=t,t=r),t}(),n===r&&(n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===q?ja+=3:(n=r,0===Ya&&ei(Ot)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ya()):(ja=t,t=r)):(ja=t,t=r),t}()),n!==r&&(Za=t,n=jn()),(t=n)===r&&(t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,8)).toLowerCase()===Y?ja+=8:(n=r,0===Ya&&ei(xt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ta()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=Zn()),(t=n)===r&&(t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,5)).toLowerCase()===B?ja+=5:(n=r,0===Ya&&ei(Ct)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Na()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=zn()),(t=n)===r&&(t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===Q?ja+=4:(n=r,0===Ya&&ei(Mt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Sa()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r&&(Za=t,n=Hn()),(t=n)===r&&(t=ja,(n=Bi())!==r&&(Za=t,n=qn()),(t=n)===r&&(t=ja,(n=Yi())!==r&&(Za=t,n=Yn()),(t=n)===r&&(t=ja,(n=Qi())!==r&&(Za=t,n=Bn()),(t=n)===r&&(t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,7)).toLowerCase()===G?ja+=7:(n=r,0===Ya&&ei(Et)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Oa()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),so()!==r?(co(),(a=Ri())!==r?(co(),lo()!==r?(Za=t,t=Qn(a)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r)))))))),t}function Ni(){var t,n;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,7)).toLowerCase()===J?ja+=7:(n=r,0===Ya&&ei(It)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ma()):(ja=t,t=r)):(ja=t,t=r),t}(),n===r&&(n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,8)).toLowerCase()===V?ja+=8:(n=r,0===Ya&&ei(gt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ha()):(ja=t,t=r)):(ja=t,t=r),t}(),n===r&&(n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===j?ja+=4:(n=r,0===Ya&&ei(yt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=va()):(ja=t,t=r)):(ja=t,t=r),t}())),n===r&&(n=null),Za=t,Xn(n)}function Si(){var t,n;return t=ja,(n=Wi())===r&&(n=Ki())===r&&(n=Xi())===r&&(n=eo())===r&&(n=to())===r&&(n=no())===r&&(n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,13)).toLowerCase()===ee?ja+=13:(n=r,0===Ya&&ei(Pt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ea()):(ja=t,t=r)):(ja=t,t=r),t}(),n===r&&(n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,15)).toLowerCase()===te?ja+=15:(n=r,0===Ya&&ei(Dt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ba()):(ja=t,t=r)):(ja=t,t=r),t}())),n!==r&&(Za=t,n=ar(n)),n}function Oi(){var t,n,a,i;return t=ja,n=function(){var e,t,n;return e=ja,(t=xi())!==r?(co(),so()!==r?(co(),(n=Mi())!==r?(co(),lo()!==r?(Za=e,e=cr(t,n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=xi())!==r&&(Za=e,t=fr(t)),e=t),e}(),n!==r?(co(),a=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,2)).toLowerCase()===W?ja+=2:(n=r,0===Ya&&ei(bt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=xa()):(ja=t,t=r)):(ja=t,t=r),t}(),a!==r?(co(),i=function(){var e,t,n,a;return e=ja,(t=xi())!==r&&(Za=e,t=pr(t)),(e=t)===r&&(e=ja,(t=no())!==r?(co(),so()!==r?(co(),(n=Mi())!==r?(co(),uo()!==r?(co(),(a=Ci())!==r?(co(),lo()!==r?(Za=e,e=dr(n,a)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=no())!==r?(co(),so()!==r?(co(),(n=Mi())!==r?(co(),lo()!==r?(Za=e,e=mr(n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=no())!==r&&(Za=e,t=hr()),e=t))),e}(),i!==r?(Za=t,t=lr(n,i)):(ja=t,t=r)):(ja=t,t=r)):(ja=t,t=r),t===r&&(t=function(){var e,t,n,a;return e=ja,(t=xi())!==r?(co(),so()!==r?(co(),(n=Ci())!==r?(co(),lo()!==r?(Za=e,e=vr(t,n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=xi())!==r&&(Za=e,t=wr(t)),(e=t)===r&&(e=ja,(t=no())!==r?(co(),so()!==r?(co(),(n=Mi())!==r?(co(),uo()!==r?(co(),(a=Ci())!==r?(co(),lo()!==r?(Za=e,e=Ir(n,a)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=no())!==r?(co(),so()!==r?(co(),(n=Ci())!==r?(co(),lo()!==r?(Za=e,e=gr(n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e===r&&(e=ja,(t=no())!==r&&(Za=e,t=yr()),e=t)))),e}()),t}function xi(){var e,t;return e=ja,(t=Xi())!==r&&(Za=e,t=Tr()),(e=t)===r&&(e=ja,(t=eo())!==r&&(Za=e,t=Nr()),(e=t)===r&&(e=ja,(t=to())!==r&&(Za=e,t=Sr()),(e=t)===r&&(e=ja,(t=Ki())!==r&&(Za=e,t=Or()),(e=t)===r&&(e=ja,(t=Wi())!==r&&(Za=e,t=xr()),e=t)))),e}function Ci(){var e,t;return e=ja,(t=Ri())!==r&&(Za=e,t=Cr(t)),t}function Mi(){var e,t;return e=ja,(t=Ri())!==r&&(Za=e,t=Mr(t)),t}function Ei(){var e;return(e=bi())===r&&(e=yi()),e}function bi(){var t,n,a,i,o;if(t=ja,39===e.charCodeAt(ja)?(n=v,ja++):(n=r,0===Ya&&ei(He)),n===r&&(e.substr(ja,2)===w?(n=w,ja+=2):(n=r,0===Ya&&ei(qe))),n!==r){for(a=[],i=ja,e.substr(ja,2)===I?(o=I,ja+=2):(o=r,0===Ya&&ei(Ye)),o!==r&&(Za=i,o=Pr()),(i=o)===r&&(i=e.charAt(ja),Oe.test(i)?ja++:(i=r,0===Ya&&ei(Be)));i!==r;)a.push(i),i=ja,e.substr(ja,2)===I?(o=I,ja+=2):(o=r,0===Ya&&ei(Ye)),o!==r&&(Za=i,o=Pr()),(i=o)===r&&(i=e.charAt(ja),Oe.test(i)?ja++:(i=r,0===Ya&&ei(Be)));39===e.charCodeAt(ja)?(i=v,ja++):(i=r,0===Ya&&ei(He)),i!==r?(Za=t,t=Dr(a)):(ja=t,t=r)}else ja=t,t=r;return t}function Fi(){var e,t,n;return e=ja,io()!==r?(co(),(t=ri())!==r?(co(),oo()!==r?(co(),(n=ri())!==r?(Za=e,e=kr(t,n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e}function Ai(){var e,t,n;return e=ja,io()!==r?(co(),(t=ri())!==r?(co(),oo()!==r?(co(),(n=ri())!==r?(Za=e,e=$r(t,n)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r)):(ja=e,e=r),e}function Pi(){var t,n,a;return t=ja,n=function(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===pe?ja+=4:(n=r,0===Ya&&ei(Zt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=$a()):(ja=t,t=r)):(ja=t,t=r),t}(),n!==r?(co(),(a=ri())!==r?(Za=t,t=Jr(a)):(ja=t,t=r)):(ja=t,t=r),t}function Di(){var t,n,a;return(t=Ri())===r&&(t=ja,n=e.charAt(ja),Ie.test(n)?ja++:(n=r,0===Ya&&ei(Ue)),n!==r&&(a=Ri())!==r?(Za=t,t=qr(n,a)):(ja=t,t=r)),t}function Li(){var t,n,a;return t=ja,46===e.charCodeAt(ja)?(n=g,ja++):(n=r,0===Ya&&ei(Qe)),n!==r?((a=Ri())===r&&(a=null),Za=t,t=Yr(a)):(ja=t,t=r),t}function _i(){var t,n,a;return t=ja,n=function(){var t,n,a;return t=ja,n=e.charAt(ja),Ce.test(n)?ja++:(n=r,0===Ya&&ei(We)),n!==r?(a=e.charAt(ja),Ie.test(a)?ja++:(a=r,0===Ya&&ei(Ue)),a===r&&(a=null),Za=t,t=Gr(n,a)):(ja=t,t=r),t}(),n!==r&&(a=Ri())!==r?(Za=t,t=Br(n,a)):(ja=t,t=r),t}function Ri(){var e,t,n;if(e=ja,t=[],(n=Ui())!==r)for(;n!==r;)t.push(n),n=Ui();else t=r;return t!==r&&(Za=e,t=Qr(t)),t}function Ui(){var t;return t=e.charAt(ja),xe.test(t)?ja++:(t=r,0===Ya&&ei(Ge)),t}function ki(){var t,n,a,i;return t=ja,(n=e.substr(ja,2)).toLowerCase()===S?ja+=2:(n=r,0===Ya&&ei(tt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Wr()):(ja=t,t=r)):(ja=t,t=r),t}function $i(){var t,n,a,i;return t=ja,(n=e.substr(ja,2)).toLowerCase()===O?ja+=2:(n=r,0===Ya&&ei(nt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Kr()):(ja=t,t=r)):(ja=t,t=r),t}function Ji(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===x?ja+=4:(n=r,0===Ya&&ei(rt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Xr()):(ja=t,t=r)):(ja=t,t=r),t}function Vi(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===M?ja+=3:(n=r,0===Ya&&ei(it)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ta()):(ja=t,t=r)):(ja=t,t=r),t}function ji(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===E?ja+=3:(n=r,0===Ya&&ei(ot)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=na()):(ja=t,t=r)):(ja=t,t=r),t}function Zi(){var t,n,a,i;return t=ja,(n=e.substr(ja,2)).toLowerCase()===b?ja+=2:(n=r,0===Ya&&ei(ut)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ra()):(ja=t,t=r)):(ja=t,t=r),t}function zi(){var t,n,a,i;return t=ja,(n=e.substr(ja,7)).toLowerCase()===F?ja+=7:(n=r,0===Ya&&ei(st)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=aa()):(ja=t,t=r)):(ja=t,t=r),t}function Hi(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===A?ja+=4:(n=r,0===Ya&&ei(lt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ia()):(ja=t,t=r)):(ja=t,t=r),t}function qi(){var t,n,a,i;return t=ja,(n=e.substr(ja,7)).toLowerCase()===L?ja+=7:(n=r,0===Ya&&ei(pt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=sa()):(ja=t,t=r)):(ja=t,t=r),t}function Yi(){var t,n,a,i;return t=ja,(n=e.substr(ja,9)).toLowerCase()===U?ja+=9:(n=r,0===Ya&&ei(ht)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=fa()):(ja=t,t=r)):(ja=t,t=r),t}function Bi(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===k?ja+=4:(n=r,0===Ya&&ei(vt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=pa()):(ja=t,t=r)):(ja=t,t=r),t}function Qi(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===$?ja+=4:(n=r,0===Ya&&ei(wt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=da()):(ja=t,t=r)):(ja=t,t=r),t}function Gi(){var t,n,a,i;return t=ja,(n=e.substr(ja,8)).toLowerCase()===K?ja+=8:(n=r,0===Ya&&ei(Ft)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ca()):(ja=t,t=r)):(ja=t,t=r),t}function Wi(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===X?ja+=4:(n=r,0===Ya&&ei(At)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ma()):(ja=t,t=r)):(ja=t,t=r),t}function Ki(){var t,n,a,i;return t=ja,(n=e.substr(ja,5)).toLowerCase()===ne?ja+=5:(n=r,0===Ya&&ei(Lt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Fa()):(ja=t,t=r)):(ja=t,t=r),t}function Xi(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===re?ja+=3:(n=r,0===Ya&&ei(_t)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Aa()):(ja=t,t=r)):(ja=t,t=r),t}function eo(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===ae?ja+=4:(n=r,0===Ya&&ei(Rt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Pa()):(ja=t,t=r)):(ja=t,t=r),t}function to(){var t,n,a,i;return t=ja,(n=e.substr(ja,6)).toLowerCase()===ie?ja+=6:(n=r,0===Ya&&ei(Ut)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Da()):(ja=t,t=r)):(ja=t,t=r),t}function no(){var t,n,a,i;return t=ja,(n=e.substr(ja,6)).toLowerCase()===ue?ja+=6:(n=r,0===Ya&&ei(kt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=La()):(ja=t,t=r)):(ja=t,t=r),t}function ro(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===se?ja+=4:(n=r,0===Ya&&ei($t)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=_a()):(ja=t,t=r)):(ja=t,t=r),t}function ao(){var t,n,a,i;return t=ja,(n=e.substr(ja,3)).toLowerCase()===le?ja+=3:(n=r,0===Ya&&ei(Jt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ra()):(ja=t,t=r)):(ja=t,t=r),t}function io(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===ce?ja+=4:(n=r,0===Ya&&ei(Vt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=Ua()):(ja=t,t=r)):(ja=t,t=r),t}function oo(){var t,n,a,i;return t=ja,(n=e.substr(ja,4)).toLowerCase()===fe?ja+=4:(n=r,0===Ya&&ei(jt)),n!==r?(a=ja,Ya++,i=vi(),Ya--,i===r?a=void 0:(ja=a,a=r),a!==r?(Za=t,t=ka()):(ja=t,t=r)):(ja=t,t=r),t}function uo(){var t;return 44===e.charCodeAt(ja)?(t=de,ja++):(t=r,0===Ya&&ei(zt)),t}function so(){var t;return 40===e.charCodeAt(ja)?(t=me,ja++):(t=r,0===Ya&&ei(Ht)),t}function lo(){var t;return 41===e.charCodeAt(ja)?(t=he,ja++):(t=r,0===Ya&&ei(qt)),t}function co(){var e,t;for(e=[],t=fo();t!==r;)e.push(t),t=fo();return e}function fo(){var t;return t=e.charAt(ja),Me.test(t)?ja++:(t=r,0===Ya&&ei(Yt)),t}function po(e,t,n,r,a){const i={type:"binary-expression",location:a,operator:e,left:t,right:n};return void 0!==r&&(i.escape=r),i}function mo(e,...t){return{type:"expression-list",location:e,value:t}}function ho(e,t){let n=e;for(const{op:e,expr:r,location:{end:a}}of t)n=po(e,n,r,void 0,{...n.location,end:a});return n}if(n=o(),t.peg$library)return{peg$result:n,peg$currPos:ja,peg$FAILED:r,peg$maxFailExpected:qa,peg$maxFailPos:Ha};if(n!==r&&ja===e.length)return n;throw n!==r&&ja<e.length&&ei({type:"end"}),function(e,t,n){return new oe(oe.buildMessage(e,t),e,t,n)}(qa,Ha<e.length?e.charAt(Ha):null,Ha<e.length?Xa(Ha,Ha+1):Xa(Ha,Ha))}(e)}}function le(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":le(e.operand,t),le(e.value,t);break;case"case-expression":for(const n of e.clauses)le(n,t);"simple"===e.format&&le(e.operand,t),null!==e.else&&le(e.else,t);break;case"expression-list":for(const n of e.value)le(n,t);break;case"unary-expression":le(e.expr,t);break;case"binary-expression":le(e.left,t),le(e.right,t);break;case"function":le(e.args,t);break;case"interval":le(e.value,t),le(e.qualifier,t);break;case"interval-qualifier":le(e.start,t),le(e.end,t)}}const ce=new Set(["current_timestamp","current_date","current_time"]);class fe{static makeBool(e){return de(e)}static featureValue(e,t,n,r){return Ne(e,t,n,r)}static equalsNull(e){return null===e}static applyLike(e,t,n){return Te(e,t,n)}static ensureArray(e){return me(e)}static applyIn(e,t,n){return Ie(e,t)}static currentTimestamp(e){return L(new Date,e)}static currentDate(t){return e.fromNow(t)}static currentTime(e){const n=L(new Date,e);return t.fromDateTime(n)}static makeSqlInterval(e,t,n){return x.createFromValueAndQualifier(e,t,n)}static convertInterval(e){return e instanceof x?e.valueInMilliseconds():e}static compare(e,t,n,r){return Q(t,n,e)}static calculate(e,t,n,r){return ae(e,t,n,r)}static evaluateTime(e){return Z(e)}static evaluateTimestamp(e,t,n){return z(e,t,n)}static evaluateDate(e,t){return H(e,t)}static evaluateFunction(e,t,n){return X(e,t,n)}static lookup(e,t){const n=t[e];return void 0===n?null:n}static between(e,t,n){return null==e||null==t[0]||null==t[1]?null:Q(e,t[0],">=")&&Q(e,t[1],"<=")}static notbetween(e,t,n){return null==e||null==t[0]||null==t[1]?null:Q(e,t[0],"<")||Q(e,t[1],">")}static ternaryNot(e){return he(e)}static ternaryAnd(e,t){return ve(e,t)}static ternaryOr(e,t){return we(e,t)}}class pe{constructor(e,t,n="UTC",r=null){this.fieldsIndex=t,this.timeZone=n,this.currentUser=r,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=se.parse(e);const{isStandardized:a,isAggregate:i,currentUserRequired:o,referencedFieldNames:u}=this._extractExpressionInfo(t);this._referencedFieldNames=u,this.isStandardized=a,this.isAggregate=i,this.currentUserRequired=o}static convertValueToStorageFormat(n,r=null){if(null===r)return k(n)?n.getTime():$(n)?n.toMillis():j(n)?n.toStorageFormat():V(n)?n.toStorageString():J(n)?n.toStorageFormat():n;switch(r){case"date":return k(n)?n.getTime():$(n)?n.toMillis():j(n)?n.toMilliseconds():J(n)?n.toNumber():n;case"date-only":return k(n)?e.fromDateJS(n).toString():j(n)?e.fromSqlTimeStampOffset(n).toString():$(n)?e.fromDateTime(n).toString():n;case"time-only":return k(n)?t.fromDateJS(n).toStorageString():$(n)?t.fromDateTime(n).toStorageString():j(n)?t.fromSqlTimeStampOffset(n).toStorageString():V(n)?n.toStorageString():n;case"timestamp-offset":if(k(n))return w.fromJSDate(n).toStorageFormat();if($(n))return w.fromDateTime(n).toStorageFormat();if(j(n))return n.toStorageFormat()}return n}static create(e,t={}){return new pe(e,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=Se,n=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,n)}calculateValue(e,t=Se,n=this.currentUser){const r=this._evaluateNode(this.parseTree,e,t,null,n);return r instanceof x?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(e,t=Se,n=this.currentUser){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null):r("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null))}testFeature(e,t=Se,n=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,n)}testFeatureCompiled(e,t=Se,n=this.currentUser){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null):r("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,n??null))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,le(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||ce.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return le(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return le(this.parseTree,(t=>{if("function"===t.type){const n=t.name.toLowerCase(),r=t.args.value[0];if("column-reference"===r.type){const t=r.column,a=`${n}-${t}`;e.has(a)||e.set(a,{aggregateType:n,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return le(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",e).bind(fe)}_extractExpressionInfo(e){const t=[],n=new Set;let r=!0,a=!1,i=!1;return le(this.parseTree,(o=>{switch(o.type){case"column-reference":{const r=e?.get(o.column);let a,i;r?a=i=r.name??"":(i=o.column,a=i.toLowerCase()),n.has(a)||(n.add(a),t.push(i)),o.column=i;break}case"current-user":i=!0;break;case"function":{const{name:e,args:t}=o,n=t.value.length;r&&(r=function(e,t){const n=re[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams}(e,n)),!1===a&&(a=g(e,n));break}}})),{referencedFieldNames:Array.from(t),isStandardized:r,isAggregate:a,currentUserRequired:i}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const n=this.evaluateNodeToJavaScript(e.operand);t="( ";for(let r=0;r<e.clauses.length;r++)t+=" (this.compare('=',"+n+","+this.evaluateNodeToJavaScript(e.clauses[r].operand)+") ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(let n=0;n<e.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const n of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(n);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new h(d.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new h(d.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";default:throw new h(d.UnsupportedOperator,{operator:e.operator})}case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"time":return"this.evaluateTime("+JSON.stringify(e.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(e.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(e.value)+", 'unknown')";case"current-time":return"date"===e.mode?"this.currentDate(timeZone)":"time"===e.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case"current-user":return"currentUser";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+", timeZone)"}throw new h(d.UnsupportedSyntax,{node:e.type})}_evaluateNode(e,t,r,a,i){let u;switch(e.type){case"interval":{const n=this._evaluateNode(e.value,t,r,a,i);return x.createFromValueAndQualifier(n,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const n=this._evaluateNode(e.operand,t,r,a,i);for(let o=0;o<e.clauses.length;o++)if(Q(n,this._evaluateNode(e.clauses[o].operand,t,r,a,i),"=",this.timeZone))return this._evaluateNode(e.clauses[o].value,t,r,a,i);if(null!==e.else)return this._evaluateNode(e.else,t,r,a,i)}else{for(let n=0;n<e.clauses.length;n++)if(de(this._evaluateNode(e.clauses[n].operand,t,r,a,i)))return this._evaluateNode(e.clauses[n].value,t,r,a,i);if(null!==e.else)return this._evaluateNode(e.else,t,r,a,i)}return null;case"parameter":return u=this.parameters[e.value.toLowerCase()],k(u)?o.fromJSDate(u):u instanceof n?u.toDateTime():u;case"expression-list":{const n=[];for(const o of e.value)n.push(this._evaluateNode(o,t,r,a,i));return n}case"unary-expression":return he(this._evaluateNode(e.expr,t,r,a,i));case"binary-expression":switch(e.operator){case"AND":return ve(this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i));case"OR":return we(this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i));case"IS":if("null"!==e.right.type)throw new h(d.UnsupportedIsRhs);return null===this._evaluateNode(e.left,t,r,a,i);case"ISNOT":if("null"!==e.right.type)throw new h(d.UnsupportedIsRhs);return null!==this._evaluateNode(e.left,t,r,a,i);case"IN":{const n=me(this._evaluateNode(e.right,t,r,a,i));return Ie(this._evaluateNode(e.left,t,r,a,i),n,this.timeZone)}case"NOT IN":{const n=me(this._evaluateNode(e.right,t,r,a,i));return he(Ie(this._evaluateNode(e.left,t,r,a,i),n,this.timeZone))}case"BETWEEN":{const n=this._evaluateNode(e.left,t,r,a,i),o=this._evaluateNode(e.right,t,r,a,i);return null==n||null==o[0]||null==o[1]?null:Q(n,o[0],">=",this.timeZone)&&Q(n,o[1],"<=",this.timeZone)}case"NOTBETWEEN":{const n=this._evaluateNode(e.left,t,r,a,i),o=this._evaluateNode(e.right,t,r,a,i);return null==n||null==o[0]||null==o[1]?null:Q(n,o[0],"<",this.timeZone)||Q(n,o[1],">",this.timeZone)}case"LIKE":return Te(this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i),e.escape);case"NOT LIKE":return he(Te(this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return Q(this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i),e.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return ae(e.operator,this._evaluateNode(e.left,t,r,a,i),this._evaluateNode(e.right,t,r,a,i),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=H(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=z(e.value,"unknown"),e.parsedValue;case"time":return Z(e.value);case"current-time":return"date"===e.mode?fe.currentDate(this.timeZone):"time"===e.mode?fe.currentTime(this.timeZone):fe.currentTimestamp(this.timeZone);case"current-user":return i??null;case"column-reference":return Ne(t,e.column,this.fieldsIndex,r);case"data-type":return e.value;case"function":{if(this.isAggregate&&g(e.name,e.args.value.length)){const t=[];for(const n of e.args?.value||[]){const e=[];for(const t of a||[])e.push(this._evaluateNode(n,t,r,null,i));t.push(e)}return I(e.name,t)}const n=this._evaluateNode(e.args,t,r,a,i);return X(e.name,n,this.timeZone)}}throw new h(d.UnsupportedSyntax,{node:e.type})}}function de(e){return!0===e}function me(e){return Array.isArray(e)?e:[e]}function he(e){return null!==e?!0!==e:null}function ve(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function we(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function Ie(e,t,n){if(null==e)return null;let r=!1;for(const n of t)if(null==n)r=null;else{if(e===n){r=!0;break}if(Y(e)&&Y(n)&&(r=Q(e,n,"="),r))break}return r}const ge="-[]/{}()*+?.\\^$|";var ye;function Te(e,t,n){if(null==e)return null;const r=function(e,t){const n=t;let r="",a=ye.Normal;for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(a){case ye.Normal:i===n?a=ye.Escaped:ge.includes(i)?r+="\\"+i:r+="%"===i?".*":"_"===i?".":i;break;case ye.Escaped:ge.includes(i)?r+="\\"+i:r+=i,a=ye.Normal}}return new RegExp("^"+r+"$","m")}(t,n);return r.test(e)}function Ne(n,r,a,i){const o=i.getAttribute(n,r),u=a?.get(r);return null==o||"esriFieldTypeDate"!==u?.type&&"date"!==u?.type?null==o||"esriFieldTypeDateOnly"!==u?.type&&"date-only"!==u?.type?null==o||"esriFieldTypeTimeOnly"!==u?.type&&"time-only"!==u?.type?null==o||"esriFieldTypeTimestampOffset"!==u?.type&&"timestamp-offset"!==u?.type?o:new w(o):t.fromReader(o):e.fromReader(o):L(new Date(o),a?.getLuxonTimeZone(u.name)??s.utcInstance)}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"}(ye||(ye={}));const Se={getAttribute(e,t){var n;return((n=e)&&"object"==typeof n.attributes?e.attributes:e)[t]}},Oe=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:pe,defaultAttributeAdapter:Se},Symbol.toStringTag,{value:"Module"}));export{w as S,Oe as W,pe as WhereClause,h as a,d as b,I as c,Se as defaultAttributeAdapter};
