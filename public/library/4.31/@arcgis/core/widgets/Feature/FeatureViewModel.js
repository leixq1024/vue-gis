/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import"../../geometry.js";import e from"../../Graphic.js";import s from"../../core/Accessor.js";import{u as r,i as o}from"../../core/lang.js";import i from"../../core/Collection.js";import{IdentifiableMixin as n}from"../../core/Identifiable.js";import{L as a}from"../../chunks/Logger.js";import{whenOrAbort as l,eachAlways as p,ignoreAbortErrors as u,debounce as c,isAbortError as m}from"../../core/promiseUtils.js";import{watch as d,initial as h,on as y,whenOnce as f}from"../../core/reactiveUtils.js";import{t as b}from"../../chunks/throttle.js";import{property as g}from"../../core/accessorSupport/decorators/property.js";import{cast as j}from"../../core/accessorSupport/decorators/cast.js";import{subclass as I}from"../../core/accessorSupport/decorators/subclass.js";import _ from"../../popup/content/TextContent.js";import{getFeaturePopupTitle as w}from"../../support/popupUtils.js";import{s as A}from"../../chunks/date.js";import C from"../Attachments/AttachmentsViewModel.js";import{d as F,e as v,h as k,s as x,j as M,k as T,l as E,b as S,m as V,n as L,o as R,p as N,q as U,r as O,t as P,a as $,u as q,i as D,v as B,w as Q,x as G,y as H,z as Z,A as z}from"../../chunks/featureUtils.js";import"../../popup/content/AttachmentsContent.js";import"../../popup/content/Content.js";import"../../popup/content/CustomContent.js";import"../../popup/content/ExpressionContent.js";import J from"../../popup/content/FieldsContent.js";import W from"../../popup/content/MediaContent.js";import"../../popup/content/RelationshipContent.js";import"../../popup/content/UtilityNetworkAssociationsContent.js";import K from"../../popup/ElementExpressionInfo.js";import X from"../../popup/ExpressionInfo.js";import Y from"../../popup/FieldInfo.js";import tt from"../../popup/content/support/ChartMediaInfoValueSeries.js";import et from"../../request.js";import st from"../../core/Error.js";import{isNumericField as rt}from"../../layers/support/fieldUtils.js";import{e as ot}from"../../chunks/executeQueryJSON.js";import it from"../../rest/support/Query.js";import nt from"../../rest/support/RelationshipQuery.js";import at from"../../rest/support/StatisticDefinition.js";import{m as lt}from"../../chunks/shared2.js";import pt from"../../layers/FeatureLayer.js";import{g as ut}from"../../chunks/globalCss.js";import ct from"../../geometry/Point.js";import{F as mt}from"../../chunks/FeatureRelationshipViewModel.js";import{ClonableMixin as dt}from"../../core/Clonable.js";import{R as ht}from"../../chunks/ReactiveMap.js";import{b as yt,c as ft}from"../../chunks/typeUtils2.js";import bt from"../../rest/networks/support/Association.js";import gt from"../../rest/networks/support/NetworkElement.js";import"../../chunks/ensureType.js";import"../../geometry/Extent.js";import"../../geometry/Geometry.js";import"../../core/JSONSupport.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../core/Handles.js";import"../../chunks/maybe.js";import"../../chunks/metadata.js";import"../../chunks/ObservableBase.js";import"../../chunks/tracking.js";import"../../core/scheduling.js";import"../../config.js";import"../../chunks/reader.js";import"../../geometry/SpatialReference.js";import"../../chunks/unitUtils.js";import"../../chunks/jsonMap.js";import"../../chunks/assets.js";import"../../core/urlUtils.js";import"../../chunks/writer.js";import"../../kernel.js";import"../../geometry/support/webMercatorUtils.js";import"../../geometry/Multipoint.js";import"../../chunks/zmUtils.js";import"../../geometry/Polygon.js";import"../../chunks/coordsUtils.js";import"../../chunks/Axis.js";import"../../chunks/extentUtils.js";import"../../chunks/boundsUtils.js";import"../../chunks/aaBoundingRect.js";import"../../chunks/mathUtils.js";import"../../geometry/Polyline.js";import"../../chunks/typeUtils.js";import"../../geometry/support/jsonUtils.js";import"../../PopupTemplate.js";import"../../popup/content.js";import"../../chunks/enumeration.js";import"../../popup/support/FieldInfoFormat.js";import"../../chunks/locale.js";import"../../chunks/datetime.js";import"../../popup/content/BarChartMediaInfo.js";import"../../popup/content/mixins/ChartMediaInfo.js";import"../../popup/content/mixins/MediaInfo.js";import"../../popup/content/support/ChartMediaInfoValue.js";import"../../Color.js";import"../../chunks/colorUtils.js";import"../../chunks/chartMediaInfoUtils.js";import"../../popup/content/ColumnChartMediaInfo.js";import"../../popup/content/ImageMediaInfo.js";import"../../popup/content/support/ImageMediaInfoValue.js";import"../../popup/content/LineChartMediaInfo.js";import"../../popup/content/PieChartMediaInfo.js";import"../../popup/support/RelatedRecordsInfoFieldOrder.js";import"../../popup/support/UtilityNetworkAssociationType.js";import"../../popup/LayerOptions.js";import"../../popup/RelatedRecordsInfo.js";import"../../support/actions/ActionBase.js";import"../../support/actions/ActionButton.js";import"../../support/actions/ActionToggle.js";import"../../core/Evented.js";import"../../chunks/shared.js";import"../../chunks/SimpleObservable.js";import"../../core/sql.js";import"../../intl.js";import"../../chunks/number.js";import"../../chunks/substitute.js";import"../../chunks/messages.js";import"../../symbols.js";import"../../symbols/CIMSymbol.js";import"../../symbols/Symbol.js";import"../../symbols/ExtrudeSymbol3DLayer.js";import"../../symbols/Symbol3DLayer.js";import"../../chunks/utils4.js";import"../../symbols/edges/Edges3D.js";import"../../chunks/screenUtils.js";import"../../chunks/materialUtils.js";import"../../chunks/opacityUtils.js";import"../../symbols/edges/SketchEdges3D.js";import"../../symbols/edges/SolidEdges3D.js";import"../../chunks/Symbol3DMaterial.js";import"../../chunks/vec3f64.js";import"../../symbols/FillSymbol.js";import"../../symbols/SimpleLineSymbol.js";import"../../symbols/LineSymbol.js";import"../../symbols/LineSymbolMarker.js";import"../../chunks/lineMarkers.js";import"../../symbols/FillSymbol3DLayer.js";import"../../symbols/patterns/LineStylePattern3D.js";import"../../symbols/patterns/StylePattern3D.js";import"../../chunks/utils5.js";import"../../chunks/colors.js";import"../../chunks/symbolLayerUtils3D.js";import"../../chunks/aaBoundingBox.js";import"../../symbols/Font.js";import"../../symbols/IconSymbol3DLayer.js";import"../../chunks/persistableUrlUtils.js";import"../../symbols/LabelSymbol3D.js";import"../../symbols/Symbol3D.js";import"../../chunks/collectionUtils.js";import"../../portal/Portal.js";import"../../core/Loadable.js";import"../../core/Promise.js";import"../../portal/PortalGroup.js";import"../../portal/PortalQueryParams.js";import"../../portal/PortalQueryResult.js";import"../../portal/PortalUser.js";import"../../portal/PortalFolder.js";import"../../symbols/LineSymbol3DLayer.js";import"../../symbols/LineStyleMarker3D.js";import"../../symbols/ObjectSymbol3DLayer.js";import"../../symbols/PathSymbol3DLayer.js";import"../../symbols/TextSymbol3DLayer.js";import"../../symbols/WaterSymbol3DLayer.js";import"../../symbols/support/StyleOrigin.js";import"../../chunks/Thumbnail.js";import"../../chunks/calloutUtils.js";import"../../symbols/callouts/Callout3D.js";import"../../symbols/callouts/LineCallout3D.js";import"../../symbols/support/Symbol3DVerticalOffset.js";import"../../symbols/LineSymbol3D.js";import"../../symbols/MarkerSymbol.js";import"../../symbols/MeshSymbol3D.js";import"../../symbols/PictureFillSymbol.js";import"../../chunks/urlUtils.js";import"../../symbols/PictureMarkerSymbol.js";import"../../symbols/PointSymbol3D.js";import"../../symbols/PolygonSymbol3D.js";import"../../chunks/asyncUtils.js";import"../../symbols/SimpleFillSymbol.js";import"../../symbols/SimpleMarkerSymbol.js";import"../../symbols/TextSymbol.js";import"../../symbols/WebStyleSymbol.js";import"../../rest/query/support/AttachmentInfo.js";import"../../rest/support/AttachmentQuery.js";import"../../chunks/layerUtils.js";import"../../chunks/utils3.js";import"../../chunks/basemapUtils.js";import"../../Basemap.js";import"../../chunks/loadAll.js";import"../../portal/PortalItem.js";import"../../portal/PortalItemResource.js";import"../../portal/PortalRating.js";import"../../support/BasemapStyle.js";import"../../chunks/writeUtils.js";import"../../chunks/utils2.js";import"../../chunks/mat4.js";import"../../chunks/common.js";import"../../chunks/utils9.js";import"../../chunks/query.js";import"../../geometry/support/normalizeUtils.js";import"../../chunks/normalizeUtilsCommon.js";import"../../chunks/simplify.js";import"../../chunks/utils10.js";import"../../chunks/pbfQueryUtils.js";import"../../chunks/pbf.js";import"../../chunks/OptimizedGeometry.js";import"../../chunks/OptimizedFeature.js";import"../../chunks/OptimizedFeatureSet.js";import"../../chunks/queryZScale.js";import"../../chunks/zscale.js";import"../../rest/support/FeatureSet.js";import"../../layers/support/Field.js";import"../../chunks/domains.js";import"../../layers/support/CodedValueDomain.js";import"../../layers/support/Domain.js";import"../../layers/support/InheritedDomain.js";import"../../layers/support/RangeDomain.js";import"../../chunks/fieldType.js";import"../../chunks/DataLayerSource.js";import"../../chunks/FullTextSearch.js";import"../../chunks/spatialRelationships.js";import"../../time/TimeExtent.js";import"../../chunks/timeUtils.js";import"../../chunks/TimeOnly.js";import"../../chunks/UnknownTimeZone.js";import"../../renderers/ClassBreaksRenderer.js";import"../../renderers/Renderer.js";import"../../renderers/support/AuthoringInfo.js";import"../../renderers/support/AuthoringInfoVisualVariable.js";import"../../chunks/colorRamps.js";import"../../rest/support/AlgorithmicColorRamp.js";import"../../rest/support/ColorRamp.js";import"../../rest/support/MultipartColorRamp.js";import"../../renderers/mixins/VisualVariablesMixin.js";import"../../renderers/visualVariables/ColorVariable.js";import"../../renderers/visualVariables/VisualVariable.js";import"../../renderers/visualVariables/support/ColorStop.js";import"../../renderers/visualVariables/OpacityVariable.js";import"../../renderers/visualVariables/support/OpacityStop.js";import"../../renderers/visualVariables/RotationVariable.js";import"../../renderers/visualVariables/SizeVariable.js";import"../../renderers/visualVariables/support/SizeStop.js";import"../../chunks/sizeVariableUtils.js";import"../../chunks/visualVariableUtils.js";import"../../chunks/compilerUtils.js";import"../../chunks/lengthUtils.js";import"../../renderers/support/ClassBreakInfo.js";import"../../chunks/commonProperties.js";import"../../symbols/support/jsonUtils.js";import"../../chunks/defaults.js";import"../../chunks/defaultsJSON.js";import"../../chunks/RendererLegendOptions.js";import"../../renderers/DictionaryRenderer.js";import"../../chunks/LRUCache.js";import"../../chunks/MemCache.js";import"../../chunks/Version2.js";import"../../layers/support/FieldsIndex.js";import"../../chunks/OverrideHelper.js";import"../../chunks/colorUtils2.js";import"../../chunks/vec4.js";import"../../chunks/vec4f64.js";import"../../chunks/utils7.js";import"../../chunks/enums2.js";import"../../chunks/quantizationUtils.js";import"../../renderers/DotDensityRenderer.js";import"../../renderers/support/AttributeColorInfo.js";import"../../renderers/HeatmapRenderer.js";import"../../renderers/support/HeatmapColorStop.js";import"../../chunks/heatmapUtils.js";import"../../renderers/PieChartRenderer.js";import"../../renderers/SimpleRenderer.js";import"../../renderers/UniqueValueRenderer.js";import"../../chunks/diffUtils.js";import"../../renderers/support/UniqueValue.js";import"../../renderers/support/UniqueValueClass.js";import"../../renderers/support/UniqueValueGroup.js";import"../../renderers/support/UniqueValueInfo.js";import"../../chunks/styleUtils.js";import"../../renderers/support/jsonUtils.js";import"../../chunks/MultiOriginJSONSupport.js";import"../../chunks/layerContainerType.js";import"../../form/FormTemplate.js";import"../../form/ExpressionInfo.js";import"../../form/elements/GroupElement.js";import"../../form/elements/Element.js";import"../../form/support/elements.js";import"../../form/elements/AttachmentElement.js";import"../../form/elements/inputs/attachments/AttachmentInput.js";import"../../chunks/Input.js";import"../../form/elements/inputs/attachments/support/inputs.js";import"../../form/elements/inputs/attachments/AudioInput.js";import"../../chunks/utils8.js";import"../../form/elements/inputs/attachments/DocumentInput.js";import"../../form/elements/inputs/attachments/ImageInput.js";import"../../form/elements/inputs/attachments/SignatureInput.js";import"../../form/elements/inputs/attachments/VideoInput.js";import"../../form/elements/FieldElement.js";import"../../form/elements/support/inputs.js";import"../../form/elements/inputs/BarcodeScannerInput.js";import"../../form/elements/inputs/TextInput.js";import"../../form/elements/inputs/Input.js";import"../../form/elements/inputs/ComboBoxInput.js";import"../../form/elements/inputs/DatePickerInput.js";import"../../form/elements/inputs/DateTimeOffsetPickerInput.js";import"../../form/elements/inputs/DateTimePickerInput.js";import"../../form/elements/inputs/RadioButtonsInput.js";import"../../form/elements/inputs/SwitchInput.js";import"../../form/elements/inputs/TextAreaInput.js";import"../../form/elements/inputs/TextBoxInput.js";import"../../form/elements/inputs/TimePickerInput.js";import"../../form/elements/RelationshipElement.js";import"../../form/elements/TextElement.js";import"../../chunks/formUtils.js";import"../../layers/Layer.js";import"../../core/workers/workers.js";import"../../core/workers/Connection.js";import"../../chunks/Queue.js";import"../../core/workers/RemoteClient.js";import"../../chunks/editsZScale.js";import"../../layers/mixins/APIKeyMixin.js";import"../../chunks/ArcGISService.js";import"../../chunks/arcgisLayerUrl.js";import"../../layers/mixins/BlendLayer.js";import"../../chunks/jsonUtils.js";import"../../chunks/parser.js";import"../../layers/mixins/CustomParametersMixin.js";import"../../chunks/EditBusLayer.js";import"../../chunks/uuid.js";import"../../layers/mixins/FeatureEffectLayer.js";import"../../layers/support/FeatureEffect.js";import"../../layers/support/FeatureFilter.js";import"../../layers/mixins/FeatureLayerBase.js";import"../../geometry/HeightModelInfo.js";import"../../chunks/commonProperties2.js";import"../../chunks/ElevationInfo.js";import"../../chunks/unitConversionUtils.js";import"../../tables/AttributeTableTemplate.js";import"../../tables/elements/AttributeTableGroupElement.js";import"../../tables/elements/AttributeTableElement.js";import"../../tables/support/elements.js";import"../../tables/elements/AttributeTableAttachmentElement.js";import"../../tables/elements/AttributeTableFieldElement.js";import"../../tables/elements/AttributeTableRelationshipElement.js";import"../../chunks/featureLayerUtils.js";import"../../chunks/featureQueryAll.js";import"../../layers/support/GeometryFieldsInfo.js";import"../../layers/support/LayerFloorInfo.js";import"../../layers/support/Relationship.js";import"../../chunks/serviceCapabilitiesUtils.js";import"../../layers/support/Subtype.js";import"../../layers/mixins/FeatureReductionLayer.js";import"../../layers/support/AggregateField.js";import"../../layers/support/ExpressionInfo.js";import"../../chunks/FeatureReduction.js";import"../../layers/support/FeatureReductionBinning.js";import"../../layers/support/LabelClass.js";import"../../chunks/labelUtils.js";import"../../layers/support/FeatureReductionCluster.js";import"../../layers/support/FeatureReductionSelection.js";import"../../chunks/clusterUtils.js";import"../../chunks/MD5.js";import"../../layers/mixins/OperationalLayer.js";import"../../layers/mixins/OrderedLayer.js";import"../../chunks/OrderByInfo.js";import"../../layers/mixins/PortalLayer.js";import"../../chunks/portalItemUtils.js";import"../../geometry/projection.js";import"../../chunks/projectBuffer.js";import"../../chunks/geodesicConstants.js";import"../../geometry/support/GeographicTransformation.js";import"../../geometry/support/GeographicTransformationStep.js";import"../../layers/mixins/PublishableLayer.js";import"../../layers/support/PublishingInfo.js";import"../../layers/mixins/RefreshableLayer.js";import"../../layers/mixins/ScaleRangeLayer.js";import"../../layers/mixins/TemporalLayer.js";import"../../layers/support/TimeInfo.js";import"../../time/TimeInterval.js";import"../../layers/support/FeatureTemplate.js";import"../../layers/support/FeatureType.js";import"../../chunks/fieldProperties.js";import"../../chunks/labelingInfo.js";import"../../chunks/versionUtils.js";import"../../chunks/styleUtils2.js";import"../../chunks/AlphaCutoff.js";import"../../chunks/interfaces2.js";import"../../chunks/featureFormUtils.js";let jt=class extends C{constructor(t){super(t),this.description=null,this.title=null}};t([g()],jt.prototype,"description",void 0),t([g()],jt.prototype,"title",void 0),jt=t([I("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],jt);const It=jt;let _t=class extends s{constructor(t){super(t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.addHandles(d((()=>this.creator),(t=>{this._destroyContent(),this._createContent(t)}),h))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:t,graphic:e,destroyer:s}=this;t&&e&&(F({type:"content",value:s,event:{graphic:e}}),this._set("created",null))}async _createContent(t){const e=this.graphic;if(!e||!t)return;const s=F({type:"content",value:t,event:{graphic:e}});this._loadingPromise=s,this.notifyChange("state");const r=await s;s===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};t([g({readOnly:!0})],_t.prototype,"created",void 0),t([g()],_t.prototype,"creator",void 0),t([g()],_t.prototype,"destroyer",void 0),t([g({type:e})],_t.prototype,"graphic",void 0),t([g({readOnly:!0})],_t.prototype,"state",null),_t=t([I("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],_t);const wt=_t;let At=class extends s{constructor(t){super(t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:t,fieldInfos:e}=this,s=[];return e?.forEach((e=>{if(e.hasOwnProperty("visible")&&!e.visible)return;const r=e.clone();r.label=v(r,t),s.push(r)})),s}};t([g()],At.prototype,"attributes",void 0),t([g({type:[X]})],At.prototype,"expressionInfos",void 0),t([g()],At.prototype,"description",void 0),t([g({type:[Y]})],At.prototype,"fieldInfos",void 0),t([g({readOnly:!0})],At.prototype,"formattedFieldInfos",null),t([g()],At.prototype,"title",void 0),At=t([I("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],At);const Ct=At,Ft=()=>a.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),vt=new Map;function kt(t){if(!k(t))return null;const[e,s]=t.split("/").slice(1);return{layerId:e,fieldName:s}}const xt={chartAnimation:!0};let Mt=class extends s{constructor(t){super(t),this.abilities={...xt},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(t){return{...xt,...t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(t){this._setContentElementMedia(t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(t){const{formattedMediaInfoCount:e}=this,s=(t+e)%e;this.activeMediaInfoIndex=s}_pageContentElementMedia(t){const{activeMediaInfoIndex:e}=this,s=e+t;this._setContentElementMedia(s)}_formatMediaInfos(){const{mediaInfos:t,layer:e}=this,s=this.attributes??{},r=this.formattedAttributes??{},i=this.expressionAttributes??{},n=this.fieldInfoMap??new Map;return t?.map((t=>{const o=t?.clone();if(!o)return null;if(o.title=x({attributes:s,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:e,text:o.title}),o.caption=x({attributes:s,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:e,text:o.caption}),o.altText=x({attributes:s,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:e,text:o.altText}),"image"===o.type){if(!o.value)return;return this._setImageValue({value:o.value,formattedAttributes:r,layer:e}),o.value.sourceURL?o:void 0}if("pie-chart"===o.type||"line-chart"===o.type||"column-chart"===o.type||"bar-chart"===o.type){if(!o.value)return;return this._setChartValue({value:o.value,chartType:o.type,attributes:s,formattedAttributes:r,layer:e,expressionAttributes:i}),o}return null})).filter(o)??[]}_setImageValue(t){const e=this.fieldInfoMap??new Map,{value:s,formattedAttributes:r,layer:o}=t,{linkURL:i,sourceURL:n}=s;if(n){const t=M(n,o);s.sourceURL=T({formattedAttributes:r,template:t,fieldInfoMap:e})}if(i){const t=M(i,o);s.linkURL=T({formattedAttributes:r,template:t,fieldInfoMap:e})}}_setChartValue(t){const{value:e,attributes:s,formattedAttributes:r,chartType:o,layer:i,expressionAttributes:n}=t,{popupTemplate:a,relatedInfos:l}=this,{fields:p,normalizeField:u}=e,c=i;if(e.fields=E(p,c),u&&(e.normalizeField=S(u,c)),!p.some((t=>!!(null!=r[t]||k(t)&&l?.size))))return;const m=a?.fieldInfos??[];p.forEach(((t,i)=>{const a=e.colors?.[i];if(k(t))return void(e.series=[...e.series,...this._getRelatedChartInfos({fieldInfos:m,fieldName:t,formattedAttributes:r,chartType:o,value:e,color:a})]);const l=this._getChartOption({value:e,attributes:s,chartType:o,formattedAttributes:r,expressionAttributes:n,fieldName:t,fieldInfos:m,color:a});e.series.push(l)}))}_getRelatedChartInfos(t){const{fieldInfos:e,fieldName:s,formattedAttributes:r,chartType:o,value:i,color:n}=t,a=[],l=kt(s),p=l&&this.relatedInfos?.get(l.layerId.toString());if(!p)return a;const{relatedFeatures:u,relation:c}=p;if(!c||!u)return a;const{cardinality:m}=c;return u.forEach((t=>{const{attributes:p}=t;p&&Object.keys(p).forEach((t=>{t===l.fieldName&&a.push(this._getChartOption({value:i,attributes:p,formattedAttributes:r,fieldName:s,chartType:o,relatedFieldName:t,hasMultipleRelatedFeatures:u?.length>1,fieldInfos:e,color:n}))}))})),"one-to-many"===m||"many-to-many"===m?a:[a[0]]}_getTooltip({label:t,value:e,chartType:s}){return"pie-chart"===s?`${t}`:`${t}: ${e}`}_getChartOption(t){const{value:e,attributes:s,formattedAttributes:r,expressionAttributes:o,fieldName:i,relatedFieldName:n,fieldInfos:a,chartType:l,hasMultipleRelatedFeatures:p,color:u}=t,c=this.layer,m=this.fieldInfoMap??new Map,{normalizeField:d,tooltipField:h}=e,y=d?k(d)?s[kt(d).fieldName]:s[d]:null,f=V(i)&&o&&void 0!==o[i]?o[i]:n&&void 0!==s[n]?s[n]:void 0!==s[i]?s[i]:r[i],b=new tt({fieldName:i,color:u,value:void 0===f?null:f&&y?f/y:f});if(k(i)){const t=m.get(i.toLowerCase()),e=h&&m.get(h.toLowerCase()),o=t?.fieldName??i,a=p&&h?kt(h).fieldName:e?.fieldName??h,u=p&&a?s[a]:r[a]??t?.label??t?.fieldName??n,c=p&&n?s[n]:r[o];return b.tooltip=this._getTooltip({label:u,value:c,chartType:l}),b}const g=L(a,i),j=S(i,c),I=h&&void 0!==r[h]?r[h]:v(g||new Y({fieldName:j}),this.popupTemplate?.expressionInfos),_=r[j];return b.tooltip=this._getTooltip({label:I,value:_,chartType:l}),b}};t([g()],Mt.prototype,"abilities",void 0),t([j("abilities")],Mt.prototype,"castAbilities",null),t([g()],Mt.prototype,"activeMediaInfoIndex",void 0),t([g({readOnly:!0})],Mt.prototype,"activeMediaInfo",null),t([g()],Mt.prototype,"attributes",void 0),t([g()],Mt.prototype,"description",void 0),t([g()],Mt.prototype,"fieldInfoMap",void 0),t([g()],Mt.prototype,"formattedAttributes",void 0),t([g()],Mt.prototype,"expressionAttributes",void 0),t([g({readOnly:!0})],Mt.prototype,"formattedMediaInfos",null),t([g()],Mt.prototype,"isAggregate",void 0),t([g()],Mt.prototype,"layer",void 0),t([g({readOnly:!0})],Mt.prototype,"formattedMediaInfoCount",null),t([g()],Mt.prototype,"mediaInfos",void 0),t([g()],Mt.prototype,"popupTemplate",void 0),t([g()],Mt.prototype,"relatedInfos",void 0),t([g()],Mt.prototype,"title",void 0),Mt=t([I("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Mt);const Tt=Mt,Et=()=>a.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function St(){return import("../../arcade.js")}async function Vt({graphic:t,view:e,options:s}){const{isAggregate:r,layer:o}=t;if(!r||!o||"2d"!==e?.type)return[];const i=await e.whenLayerView(o);if(!function(t){return"createQuery"in t&&"queryFeatures"in t}(i))return[];const n=i.createQuery(),a=t.getObjectId();n.aggregateIds=null!=a?[a]:[];const{features:l}=await i.queryFeatures(n,s);return l}async function Lt({expressionInfo:t,arcade:e,interceptor:s,spatialReference:r,map:o,graphic:i,location:n,view:a,options:l}){if(!t?.expression)return null;const{isAggregate:p}=i,u=(i.sourceLayer||i.layer)??void 0,c=p?"feature-reduction-popup":"popup",m=e.createArcadeProfile(c),d=e.createArcadeExecutor(t.expression,m).catch((e=>Et().error("arcade-executor-error",{error:e,expressionInfo:t}))),[h,y]=await Promise.all([Vt({graphic:i,view:a,options:l}),d]);if(!y)return null;const f="feature-reduction-popup"===c?function({layer:t,aggregatedFeatures:e,interceptor:s}){const{fields:r,objectIdField:o,geometryType:i,spatialReference:n,displayField:a}=t;return new pt({fields:r,objectIdField:o,geometryType:i,spatialReference:n,displayField:a,interceptor:s,..."feature"===t.type?{templates:t.templates,typeIdField:t.typeIdField,types:t.types}:null,source:e})}({layer:u,aggregatedFeatures:h,interceptor:s}):void 0,b={..."feature-reduction-popup"===c?{$aggregatedFeatures:f}:{$datastore:u?.url,$layer:null!=u&&lt(u)?u:"scene"===u?.type&&null!=u.associatedLayer?u.associatedLayer:void 0,$map:o,$userInput:n,$graph:"knowledge-graph-sublayer"===u?.type?u?.parentCompositeLayer?.knowledgeGraph:void 0},$feature:i},g={abortSignal:l?.signal??void 0,interceptor:s??void 0,rawOutput:!0,spatialReference:r??void 0,timeZone:a?.timeZone};return await y.executeAsync(b,g).catch((e=>Et().error("arcade-execution-error",{error:e,graphic:i,expressionInfo:t}))).finally((()=>f?.destroy()))}async function Rt({expressionInfos:t,spatialReference:e,graphic:s,interceptor:r,map:o,view:i,location:n,options:a}){if(!t?.length)return{};const l=await St(),u={};for(const p of t)u[`expression/${p.name}`]=Lt({expressionInfo:p,arcade:l,interceptor:r,spatialReference:e,map:o,graphic:s,location:n,view:i,options:a});const c=await p(u),m={};for(const t in c)m[t]="string"==typeof(d=c[t].value)?R(N(d)):Array.isArray(d)?function(t){return`<ul class="esri-widget__list">${t.map((t=>`<li>${"string"==typeof t?R(N(t)):t}</li>`)).join("")}</ul>`}(d):"esri.arcade.Dictionary"===d?.declaredClass?function(t){const e=t.keys().map((e=>{const s=t.field(e);return`<tr><th>${e}</th><td>${"string"==typeof s?R(N(s)):s}</td></tr>`})).join("");return`<table class="${ut.table}">${e}</table>`}(d):d;var d;return m}let Nt=class extends s{constructor(t){super(t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.location=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{const t=this.contentElement?.type;this.contentElementViewModel?.destroy();const e="fields"===t?new Ct:"media"===t?new Tt:"text"===t?new wt:null;this._set("contentElementViewModel",e)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=b(this._compile,1,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:e,interceptor:s,spatialReference:r,map:o,location:i,view:n,_abortController:a}=this;if(!t||!e)return void this._set("contentElement",null);const l=await St();if(a!==this._abortController)return;const p=await Lt({arcade:l,expressionInfo:t,graphic:e,location:i,interceptor:s,map:o,spatialReference:r,view:n});if(!p||"esri.arcade.Dictionary"!==p.declaredClass)return void this._set("contentElement",null);const u=await p.castAsJsonAsync(a?.signal),c=u?.type,m="media"===c?W.fromJSON(u):"text"===c?_.fromJSON(u):"fields"===c?J.fromJSON(u):null;"media"===m.type&&!m.mediaInfos||"fields"===m.type&&!m.fieldInfos||"text"===m.type&&!m.text?this._set("contentElement",null):this._set("contentElement",m)},this.addHandles([d((()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view]),(()=>this._compileThrottled()),h),d((()=>[this.contentElement]),(()=>this._createVM()),h)])}initialize(){this.addHandles(this._compileThrottled)}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get state(){const{_abortController:t,contentElement:e,contentElementViewModel:s}=this;return t?"loading":e||s?"ready":"disabled"}get map(){return this.view?.map??null}set map(t){this._override("map",t)}};t([g()],Nt.prototype,"_abortController",void 0),t([g({type:K})],Nt.prototype,"expressionInfo",void 0),t([g({type:e})],Nt.prototype,"graphic",void 0),t([g({readOnly:!0})],Nt.prototype,"contentElement",void 0),t([g({readOnly:!0})],Nt.prototype,"contentElementViewModel",void 0),t([g()],Nt.prototype,"interceptor",void 0),t([g({type:ct})],Nt.prototype,"location",void 0),t([g()],Nt.prototype,"spatialReference",null),t([g({readOnly:!0})],Nt.prototype,"state",null),t([g()],Nt.prototype,"map",null),t([g()],Nt.prototype,"view",void 0),Nt=t([I("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Nt);const Ut=Nt,Ot="fromglobalid",Pt="fromnetworksourceid",$t="toglobalid",qt="tonetworksourceid",Dt="associationtype",Bt="status",Qt="assetgroup",Gt="assettype";let Ht=class extends(dt(n(s))){constructor(t){super(t),this._loaded=!1,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.networkSourceIdsInUse=new Set,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.featureCount=0,this.associationTypes=null,this.showAllEnabled=!1,this.title=null,this.attachmentsFeatureCount=0,this.structureFeatureCount=0,this.contentFeatureCount=0,this.containerFeatureCount=0,this.connectivityFeatureCount=0,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._queryController=async t=>{this._cancelQuery();const e=new AbortController;this._queryAbortController=e,await u(this._query(t)),this._queryAbortController===e&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._loaded=!1,this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await u(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null),this._loaded=!0},this._queryDebounced=c(this._queryController,100),this._queryFeatureCountDebounced=c(this._queryFeatureCountController,100)}initialize(){this.associationTypes?.forEach((t=>{t.open=!1})),this.addHandles([...this.associationTypes?.map((t=>d((()=>t.open),(()=>{t.open&&this._queryDebounced(t)}))))??[],d((()=>[this.graphic,this.layer,this.map,this.associationTypes,this.objectId,this.globalId,this.canQuery]),(()=>this._queryFeatureCountDebounced()),h)])}destroy(){this._cancelQuery(),this._cancelQueryFeatureCount(),this._destroyAssociatedFeatureViewModels()}get supportsCacheHint(){return!!this.layer?.capabilities?.query?.supportsCacheHint}get canLoad(){return!!this.map&&!!this.associationTypes&&"string"==typeof this.globalId}get canQuery(){const t=this.layer?.capabilities?.query;return!!this.associationTypes&&"string"==typeof this.globalId&&!!t?.supportsPagination}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get globalId(){return(this.globalIdField&&this.graphic?.attributes?.[this.globalIdField])??null}get globalIdField(){const{layer:t}=this;return"subtype-sublayer"===t?.type&&t?.parent?t.parent.globalIdField??null:t?.globalIdField??null}get state(){const{_queryAbortController:t,_queryFeatureCountAbortController:e,_queryPageAbortController:s,canQuery:r,_loaded:o,canLoad:i}=this;return e||i&&!o?"loading":t||s?"querying":r&&0!==this.featureCount?"ready":"disabled"}get utilityNetwork(){const{layer:t,map:e}=this;return t?.loaded&&e?"subtype-sublayer"===t?.type&&t?.parent?U(e,t.parent)??null:U(e,t)??null:null}get associationsLayer(){const{utilityNetwork:t}=this;return t?.loaded?new pt({url:t.networkSystemLayers.associationsTableUrl,gdbVersion:t.gdbVersion}):null}get attachmentsAssociations(){return this._get("attachmentsAssociations")||new i}get structureAssociations(){return this._get("structureAssociations")||new i}get contentAssociations(){return this._get("contentAssociations")||new i}get containerAssociations(){return this._get("containerAssociations")||new i}get connectivityAssociations(){return this._get("connectivityAssociations")||new i}get associationFeatures(){return this._get("associationFeatures")||new ht}get associationViewModels(){return this._get("associationViewModels")||new Map}refresh(){this._queryFeatureCountDebounced()}_destroyAssociatedFeatureViewModels(){this.associationViewModels.forEach((t=>t.destroyAll()))}_generateGlobalIdWhereClause(t,e){const{globalId:s,networkSourceIdsInUse:r}=this,{associatedNetworkSourceId:o}=t,i=e.fieldsIndex.get(Ot),n=e.fieldsIndex.get($t),a=e.fieldsIndex.get(Pt),l=e.fieldsIndex.get(qt),p=null!=o,u=`(${Array.from(r.values())})`,c=p?` AND ${l.name} = ${o} AND ${l.name} IN ${u}`:"",m=p?` AND ${a.name} = ${o} AND ${a.name} IN ${u}`:"";switch(t.type){case"connectivity":return`((${i.name} = '${s}'${c}) OR (${n.name} = '${s}'${m}))`;case"attachment":case"content":return`${i.name} = '${s}'${c}`;case"container":case"structure":return`${n.name} = '${s}'${m}`;default:return""}}_generateNetworkSourceIdWhereClause(t){const{networkSourceIdsInUse:e}=this,s=`(${Array.from(e.values())})`,r=t.fieldsIndex.get(Pt),o=t.fieldsIndex.get(qt);return`(${r.name} IN ${s} AND ${o.name} IN ${s})`}_generateAssociationTypeWhereClause(t,e){const s=e.fieldsIndex.get(Dt);switch(t.type){case"attachment":case"structure":return`${s.name} = 3`;case"connectivity":return`${s.name} IN  (1, 4, 5, 6)`;case"container":case"content":return`${s.name} = 2`;default:return""}}_generateWhereClause(t,e){const s=e.fieldsIndex.get(Bt),r=`(${yt.join(",")})`,o=`${s.name} IN ${r}`;return`(${this._generateGlobalIdWhereClause(t,e)} AND ${o} AND ${this._generateAssociationTypeWhereClause(t,e)})`}async _loadUtiltyNetworks(){const t=this.map;if(!t)return;await Promise.allSettled(t.utilityNetworks?.map((async t=>{await t.load()}))??[]);const e=t=>{if("layerId"in t&&s.isUtilityLayer(t)){const e=s.getSourceIdByLayerId(t.layerId);null!==e&&this.networkSourceIdsInUse.add(e)}},s=this.utilityNetwork;this._set("networkSourceIdsInUse",new Set),t.allLayers.forEach(e),t.allTables.forEach(e)}async _findLayersBySourceId(t){const{utilityNetwork:e,map:s}=this,r=t=>{const s=t;return!!t.url&&s.layerId===o&&t.url.replace(/\/\d+$/,"")===e?.featureServiceUrl};await(e?.load());const o=e.getLayerIdBySourceId(t),i=s.allLayers.filter(r),n=s.allTables.filter(r),a=i.concat(n).toArray();return await Promise.allSettled(a.map((t=>t.load()))),a}_clearAssociations(){this.attachmentsAssociations.removeAll(),this.structureAssociations.removeAll(),this.contentAssociations.removeAll(),this.containerAssociations.removeAll(),this.connectivityAssociations.removeAll()}_clearFeatures(){this.associationFeatures.forEach((t=>t.removeAll())),this.associationFeatures.clear()}_getAssociationsByType(t){switch(t){case"attachment":return this.attachmentsAssociations;case"structure":return this.structureAssociations;case"connectivity":return this.connectivityAssociations;case"container":return this.containerAssociations;case"content":return this.contentAssociations}}_createAssociationFromFeature(t,e){if(!t)return null;const s=ft.get(e.attributes[t.fieldsIndex.get(Dt).name]);return new bt({globalId:e.attributes[t.fieldsIndex.get("globalid").name],fromNetworkElement:new gt({globalId:e.attributes[t.fieldsIndex.get(Ot).name],networkSourceId:e.attributes[t.fieldsIndex.get(Pt).name],terminalId:e.attributes[t.fieldsIndex.get("fromterminalid").name]}),toNetworkElement:new gt({globalId:e.attributes[t.fieldsIndex.get($t).name],networkSourceId:e.attributes[t.fieldsIndex.get(qt).name],terminalId:e.attributes[t.fieldsIndex.get("toterminalid").name]}),associationType:s,status:e.attributes[t.fieldsIndex.get(Bt).name],isContentVisible:e.attributes[t.fieldsIndex.get("iscontentvisible").name],percentAlong:e.attributes[t.fieldsIndex.get("percentalong").name]})}async _queryLayer(t,e,s,r,o){const i=t.fieldsIndex.get(Qt),n=t.fieldsIndex.get(Gt),a=null!=s,l=null!=r,p="("+e.map((t=>`'${t}'`)).join(", ")+")",u=a?` AND ${i?.name} = ${s}`:"",c=a&&l?` AND ${n?.name} = ${r}`:"",m=`${t.globalIdField} IN ${p}`+u+c,d=new it({outFields:["*"],cacheHint:this.supportsCacheHint,where:m});return await this._queryAll(d,t,{signal:o?.signal})}async _createAssociationFeatureObjects(t,e,s,r,o,i){if(0===t.length)return[];const n=new Map;for(const[t,s]of e){const e=await this._findLayersBySourceId(t);for(const t of e)(await this._queryLayer(t,s,r,o,i)).forEach((e=>{if(e.getEffectivePopupTemplate()&&e.layer){const s=n.get(e.attributes[t.globalIdField])??[];s.push(e),n.set(e.attributes[t.globalIdField],s)}}))}const a=[];return t.toArray().forEach((t=>{const e=t.fromNetworkElement.globalId===s?t.toNetworkElement:t.fromNetworkElement;(n.get(e.globalId)??[]).forEach((s=>{const r=this.utilityNetwork?.getTerminalById(e?.terminalId)?.name;a.push({association:t,feature:s,terminalName:r})}))})),a}_parseFeatureObjects(t,e){t.forEach((t=>{const s=t?.feature,r=s.layer,o=e.get(r)??new i;o.add(t),e.set(r,o)}))}async _queryAll(t,e,s){const r=[];let o=0,i=!1;t.num=e.sourceJSON?.maxRecordCount??2e3;do{t.start=o;const n=await e.queryFeatures(t,s);r.push(...n.features),i=n.exceededTransferLimit,i&&(o+=n.features.length)}while(i);return r}async _queryAssociatedFeatureCount(t){const{layer:e,globalId:s,supportsCacheHint:r,associationTypes:o,associationsLayer:i,utilityNetwork:n,canQuery:a}=this;if(await Promise.allSettled([e?.load(),n?.load(),i?.load()]),this._clearAssociations(),!(a&&e&&o&&i))return;const l=i.fieldsIndex.get($t).name,p=i.fieldsIndex.get(Ot).name,u=o.map((t=>this._generateWhereClause(t,i))),c=this._generateNetworkSourceIdWhereClause(i),m=u.join(" OR "),d=new it({outFields:["*"],cacheHint:r,returnGeometry:!1,where:`(${m}) AND (${c})`}),h=await this._queryAll(d,i,{signal:t?.signal}),y=new Map;o.forEach((t=>{y.set(t.type,[])})),h.forEach((t=>{const e=i.fieldsIndex.get(Dt);switch(t.attributes[e.name]){case 1:case 4:case 5:case 6:t.attributes[p]===s?y.get("connectivity").push(t.attributes[l]):y.get("connectivity").push(t.attributes[p]),this.connectivityAssociations.add(this._createAssociationFromFeature(i,t));break;case 2:t.attributes[p]===s?(y.get("content").push(t.attributes[l]),this.contentAssociations.add(this._createAssociationFromFeature(i,t))):(y.get("container").push(t.attributes[p]),this.containerAssociations.add(this._createAssociationFromFeature(i,t)));break;case 3:t.attributes[p]===s?(y.get("attachment").push(t.attributes[l]),this.attachmentsAssociations.add(this._createAssociationFromFeature(i,t))):(y.get("structure").push(t.attributes[p]),this.structureAssociations.add(this._createAssociationFromFeature(i,t)))}}));const f=o.map((async e=>{const{associatedNetworkSourceId:s,associatedAssetGroup:r,associatedAssetType:o}=e,i=y.get(e.type),n=null!=r?await this._countAssociatedFeatures(s,i,r,o,t):i.length;switch(e.type){case"attachment":this._set("attachmentsFeatureCount",n);break;case"structure":this._set("structureFeatureCount",n);break;case"content":this._set("contentFeatureCount",n);break;case"container":this._set("containerFeatureCount",n);break;case"connectivity":this._set("connectivityFeatureCount",n)}}));await Promise.allSettled(f)}async _countAssociatedFeatureCount(t,e,s,r,o){const i=t.fieldsIndex.get(Qt),n=t.fieldsIndex.get(Gt),a=null!=r,l="("+e.map((t=>`'${t}'`)).join(", ")+")",p=` AND ${i?.name} = ${s}`,u=a?` AND ${n?.name} = ${r}`:"",c=`${t.globalIdField} IN ${l}`+p+u;return t.queryFeatureCount({where:c,outFields:["*"],returnGeometry:!1},{signal:o?.signal})}async _countAssociatedFeatures(t,e,s,r,o){if(0===e.length)return 0;const i=(await this._findLayersBySourceId(t)).map((async t=>this._countAssociatedFeatureCount(t,e,s,r,o)));return(await Promise.all(i)).reduce(((t,e)=>t+e),0)}async _queryAssociatedFeatures(t,e){const{layer:s,globalId:r,associationTypes:o,associationsLayer:i,utilityNetwork:n,canQuery:a,associationFeatures:l}=this;if(await Promise.allSettled([s?.load(),n?.load(),i?.load()]),!(a&&s&&o&&i))return;const p=this._getAssociationsByType(t.type),{associatedAssetGroup:u,associatedAssetType:c}=t,m=new Map;p.forEach((t=>{const{networkSourceId:e,elementGlobalId:s}=t.fromNetworkElement.globalId===r?{networkSourceId:t.toNetworkElement.networkSourceId,elementGlobalId:t.toNetworkElement.globalId}:{networkSourceId:t.fromNetworkElement.networkSourceId,elementGlobalId:t.fromNetworkElement.globalId},o=m.get(e)||[];o.push(s),m.set(e,o)}));const d=await this._createAssociationFeatureObjects(p,m,r,u,c,e);this._parseFeatureObjects(d,l)}async _queryFeatureCount(){await this._loadUtiltyNetworks();const{_queryFeatureCountAbortController:t,canQuery:e}=this;e?(await this._queryAssociatedFeatureCount(t),this._set("featureCount",this.attachmentsFeatureCount+this.structureFeatureCount+this.contentFeatureCount+this.containerFeatureCount+this.connectivityFeatureCount)):this._set("featureCount",0)}async _query(t){await this._loadUtiltyNetworks();const{_queryAbortController:e}=this;this.featureCount&&(this._destroyAssociatedFeatureViewModels(),this._clearFeatures(),this.destroyed||await this._queryAssociatedFeatures(t,{signal:e?.signal}))}};t([g()],Ht.prototype,"_loaded",void 0),t([g()],Ht.prototype,"_queryAbortController",void 0),t([g()],Ht.prototype,"_queryPageAbortController",void 0),t([g()],Ht.prototype,"_queryFeatureCountAbortController",void 0),t([g({readOnly:!0})],Ht.prototype,"supportsCacheHint",null),t([g({readOnly:!0})],Ht.prototype,"canLoad",null),t([g({readOnly:!0})],Ht.prototype,"canQuery",null),t([g()],Ht.prototype,"networkSourceIdsInUse",void 0),t([g()],Ht.prototype,"description",void 0),t([g({type:e})],Ht.prototype,"graphic",void 0),t([g()],Ht.prototype,"layer",void 0),t([g()],Ht.prototype,"map",void 0),t([g({readOnly:!0})],Ht.prototype,"objectId",null),t([g({readOnly:!0})],Ht.prototype,"objectIdField",null),t([g({readOnly:!0})],Ht.prototype,"globalId",null),t([g({readOnly:!0})],Ht.prototype,"globalIdField",null),t([g()],Ht.prototype,"featureCount",void 0),t([g()],Ht.prototype,"associationTypes",void 0),t([g()],Ht.prototype,"showAllEnabled",void 0),t([g()],Ht.prototype,"state",null),t([g()],Ht.prototype,"title",void 0),t([g({readOnly:!0})],Ht.prototype,"utilityNetwork",null),t([g({readOnly:!0})],Ht.prototype,"associationsLayer",null),t([g({readOnly:!0})],Ht.prototype,"attachmentsFeatureCount",void 0),t([g({readOnly:!0})],Ht.prototype,"structureFeatureCount",void 0),t([g({readOnly:!0})],Ht.prototype,"attachmentsAssociations",null),t([g({readOnly:!0})],Ht.prototype,"structureAssociations",null),t([g({readOnly:!0})],Ht.prototype,"contentFeatureCount",void 0),t([g({readOnly:!0})],Ht.prototype,"containerFeatureCount",void 0),t([g({readOnly:!0})],Ht.prototype,"contentAssociations",null),t([g({readOnly:!0})],Ht.prototype,"containerAssociations",null),t([g({readOnly:!0})],Ht.prototype,"connectivityFeatureCount",void 0),t([g({readOnly:!0})],Ht.prototype,"connectivityAssociations",null),t([g({readOnly:!0})],Ht.prototype,"associationFeatures",null),t([g({readOnly:!0})],Ht.prototype,"associationViewModels",null),Ht=t([I("esri.widgets.Feature.FeatureUtilityNetworkAssociations.FeatureUtilityNetworkAssociationsViewModel")],Ht);const Zt=Ht;var zt;const Jt="content-view-models",Wt="relationship-view-models",Kt={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0,utilityNetworkAssociationsContent:!0};let Xt=zt=class extends(n(s)){constructor(t){super(t),this._error=null,this._featureAbortController=null,this._associationVMAbortController=null,this._graphicChangedThrottled=b(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Kt},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.location=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:e}=this;return"attachments"===t.type&&!!e.attachmentsContent||"custom"===t.type&&!!e.customContent||"fields"===t.type&&!!e.fieldsContent||"media"===t.type&&!!e.mediaContent||"text"===t.type&&!!e.textContent||"expression"===t.type&&!!e.expressionContent||"relationship"===t.type&&!!e.relationshipContent||"utility-network-associations"===t.type&&!!e.utilityNetworkAssociationsContent},this.addHandles(d((()=>[this.graphic,this._effectivePopupTemplate,this.abilities,this.timeZone]),(()=>this._graphicChangedThrottled()),h))}initialize(){this.addHandles(this._graphicChangedThrottled)}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return O(P(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return $(this.graphic)}castAbilities(t){return{...Kt,...t}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._featureAbortController=new AbortController,this._set("graphic",t?.clone()??null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(t){this._override("spatialReference",t)}get timeZone(){return this.view?.timeZone??A}set timeZone(t){this._overrideIfSome("timeZone",t)}get map(){return this.view?.map||null}set map(t){this._override("map",t)}get waitingForContent(){return!(!this._featureAbortController&&!this._associationVMAbortController)}setActiveMedia(t,e){const s=this.contentViewModels[t];s instanceof Tt&&s.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof Tt&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof Tt&&e.previous()}async updateGeometry(){const{graphic:t,spatialReference:e,_sourceLayer:s}=this;await(s?.load());const r=s?.objectIdField;if(!r||!t||!s)return;const o=t?.attributes?.[r];if(null==o)return;const i=[o];if(!t.geometry){const r=await q({layer:s,graphic:t,outFields:[],objectIds:i,returnGeometry:!0,spatialReference:e}),o=r?.geometry;o&&(t.geometry=o)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(e){m(e)||(this._error=e,a.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:e,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return"attachments"===t.type?this._compileAttachments(t,e):"custom"===t.type?this._compileCustom(t,e):"fields"===t.type?this._compileFields(t,e):"media"===t.type?this._compileMedia(t,e):"text"===t.type?this._compileText(t,e):"expression"===t.type?this._compileExpression(t,e):"relationship"===t.type?this._compileRelationship(t,e):"utility-network-associations"===t.type?this._compileUtilityNetworkAssociation(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map(((t,e)=>this._compileContentElement(t,e))).filter(o):"string"==typeof t?this._compileText(new _({text:t}),0).text:t}_destroyContentViewModels(){this.removeHandles(Wt),this.removeHandles(Jt),this.contentViewModels.forEach((t=>t&&!t.destroyed&&t.destroy())),this._set("contentViewModels",[])}_matchesFeature(t,e){const s=t?.graphic?.getObjectId(),r=e?.getObjectId();return null!=s&&null!=r&&s===r}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:s}){const{view:r,spatialReference:o,timeZone:i}=this;e?.filter(Boolean).forEach((e=>{t.some((t=>this._matchesFeature(t,e)))||t.add(new zt({abilities:{relationshipContent:!1},map:s,view:r,spatialReference:o,timeZone:i,graphic:e}))})),t.forEach((s=>{const r=e?.find((t=>this._matchesFeature(s,t)));r||t.remove(s)}))}_setExpressionContentVM(t,e){const s=this.formattedAttributes,{contentElement:r,contentElementViewModel:o}=t,i=r?.type;o&&i&&("fields"===i&&(this._createFieldsFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:s}),o.set(this._createFieldsVMParams(r,e))),"media"===i&&(this._createMediaFormattedAttributes({contentElement:r,contentElementIndex:e,formattedAttributes:s}),o.set(this._createMediaVMParams(r,e))),"text"===i&&o.set(this._createTextVMParams(r)))}_compileRelationship(t,e){const{displayCount:s,orderByFields:r,relationshipId:o,title:i,description:n}=t,{_sourceLayer:a,graphic:l,map:p}=this;if(!D(a))return;const u=new mt({displayCount:s,graphic:l,orderByFields:r,relationshipId:o,layer:a,map:p,...this._compileTitleAndDesc({title:i,description:n})});return this.contentViewModels[e]=u,this.addHandles(y((()=>u.relatedFeatures),"change",(()=>this._setRelatedFeaturesViewModels(u))),Wt),t}_matchesGlobalFeature(t,e){const s=t?.association.globalId,r=e?.association.globalId;return null!=s&&null!=r&&s===r}async _setUpUtilityNetworkAssociationsViewModels(t,e,s){const{view:r,spatialReference:o,timeZone:n}=this;t.forEach(((s,r)=>{const o=e.get(r);o?s.forEach((e=>{o.find((t=>this._matchesGlobalFeature(e,t)))||(s.remove(e),0===s.length&&t.delete(r))})):(s.removeAll(),t.delete(r))})),e.forEach(((e,a)=>{const l=t.get(a)||new i;e?.filter(Boolean).forEach((t=>{l.some((e=>this._matchesGlobalFeature(e,t)))||l.add({association:t.association,featureViewModel:new zt({abilities:{utilityNetworkAssociationsContent:!1},map:s,view:r,spatialReference:o,timeZone:n,graphic:t.feature}),terminalName:t.terminalName})})),t.set(a,l)}));const a=new AbortController;this._associationVMAbortController=a,await this._sortListObjectsByTitle(t,{signal:a.signal}),this._associationVMAbortController===a&&(this._associationVMAbortController=null)}async _sortListObjectsByTitle(t,e){for(const s of t.values()){const t=s.map((t=>f((()=>"ready"===t.featureViewModel.state),e?.signal)));await Promise.all(t),s.sort(this._compareByFeatureTitle)}}_compareByFeatureTitle(t,e){const s=w(t.featureViewModel),r=w(e.featureViewModel);return s.localeCompare(r,void 0,{numeric:!0})}_compileUtilityNetworkAssociation(t,e){const{title:s,description:r,associationTypes:o}=t,{_sourceLayer:i,graphic:n,map:a}=this;if(!B(i))return;const l=new Zt({graphic:n,associationTypes:o,layer:i,map:a,...this._compileTitleAndDesc({title:s,description:r})});return this.contentViewModels[e]=l,this.addHandles([d((()=>l.associationFeatures.values()),(()=>this._setUpUtilityNetworkAssociationsViewModels(l.associationViewModels,l.associationFeatures,l.map)))],"association-view-models"),t}_compileExpression(t,e){const{expressionInfo:s}=t,{graphic:r,map:o,spatialReference:i,view:n,location:a}=this,l=new Ut({expressionInfo:s,graphic:r,interceptor:zt.interceptor,map:o,spatialReference:i,view:n,location:a});return this.contentViewModels[e]=l,this.addHandles(d((()=>l.contentElementViewModel),(()=>this._setExpressionContentVM(l,e)),h),Jt),t}_compileAttachments(t,e){const{graphic:s}=this,{description:r,title:o}=t;return this.contentViewModels[e]=new It({graphic:s,...this._compileTitleAndDesc({title:o,description:r})}),t}_compileCustom(t,e){const{graphic:s}=this,{creator:r,destroyer:o}=t;return this.contentViewModels[e]=new wt({graphic:s,creator:r,destroyer:o}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:s,_sourceLayer:r,graphic:o,formattedAttributes:i}=this,n=o?.attributes,a=this._expressionAttributes,l=i.global;return{title:x({attributes:n,fieldInfoMap:s,globalAttributes:l,expressionAttributes:a,layer:r,text:t}),description:x({attributes:n,fieldInfoMap:s,globalAttributes:l,expressionAttributes:a,layer:r,text:e})}}_createFieldsVMParams(t,e){const s=this._effectivePopupTemplate,r=this.formattedAttributes,o={...r?.global,...r?.content[e]},i=t?.fieldInfos||s?.fieldInfos,n=i?.filter((({fieldName:t})=>!!t&&(V(t)||k(t)||o.hasOwnProperty(t)))),a=s?.expressionInfos,{description:l,title:p}=t;return{attributes:o,expressionInfos:a,fieldInfos:n,...this._compileTitleAndDesc({title:p,description:l})}}_compileFields(t,e){const s=t.clone(),r=new Ct(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=r,s.fieldInfos=r.formattedFieldInfos.slice(),s}_createMediaVMParams(t,e){const{abilities:s,graphic:r,_fieldInfoMap:o,_effectivePopupTemplate:i,relatedInfos:n,_sourceLayer:a,_expressionAttributes:l}=this,p=this.formattedAttributes,u=r?.attributes??{},{description:c,mediaInfos:m,title:d}=t;return{abilities:{chartAnimation:s.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:u,isAggregate:r?.isAggregate,layer:a,fieldInfoMap:o,formattedAttributes:{...p?.global,...p?.content[e]},expressionAttributes:l,mediaInfos:m,popupTemplate:i,relatedInfos:n,...this._compileTitleAndDesc({title:d,description:c})}}_compileMedia(t,e){const s=t.clone(),r=new Tt(this._createMediaVMParams(t,e));return s.mediaInfos=r.formattedMediaInfos.slice(),this.contentViewModels[e]=r,s}_createTextVMParams(t){const{graphic:e,_fieldInfoMap:s,_sourceLayer:r,_expressionAttributes:o}=this;if(t&&t.text){const i=e?.attributes??{},n=this.formattedAttributes?.global??{};t.text=x({attributes:i,fieldInfoMap:s,globalAttributes:n,expressionAttributes:o,layer:r,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const s=t.clone();return this.contentViewModels[e]=new wt(this._createTextVMParams(s)),s}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:s,timeZone:r}=this;if(!t)return;const{lastEditInfoEnabled:o}=t,i=e?.editFieldsInfo;return o&&i?Q(i,s?.attributes,r,e):void 0}_compileTitle(t){const{_fieldInfoMap:e,_sourceLayer:s,graphic:r,_expressionAttributes:o}=this,i=r?.attributes??{},n=this.formattedAttributes?.global??{};return x({attributes:i,fieldInfoMap:e,globalAttributes:n,expressionAttributes:o,layer:s,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;return e?F({type:"title",value:t?.title,event:{graphic:e}}):null}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;return e?F({type:"content",value:t?.content,event:{graphic:e}}):null}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:s,graphic:r,_effectivePopupTemplate:o}=this,i=this.map,n=this.view,a=this.spatialReference,l=this.location;if(e!==this._featureAbortController||!r)return;await G({graphic:r,popupTemplate:o,layer:s,spatialReference:a},t);const{content:{value:u},title:{value:c}}=await p({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:m}}=await p({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Rt({expressionInfos:o?.expressionInfos,spatialReference:a,graphic:r,map:i,interceptor:zt.interceptor,view:n,options:t,location:l})});e===this._featureAbortController&&r&&(this._expressionAttributes=m,this._graphicExpressionAttributes={...r.attributes,...m},this._set("formattedAttributes",this._createFormattedAttributes(u)),this._set("title",this._compileTitle(c)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(u)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:s}){const{_effectivePopupTemplate:r,graphic:o,relatedInfos:i,_sourceLayer:n,_fieldInfoMap:a,_graphicExpressionAttributes:l,timeZone:p}=this;s.content[e]=H({fieldInfos:r?.fieldInfos,graphic:o,attributes:{...l,...t.attributes},layer:n,fieldInfoMap:a,relatedInfos:i,timeZone:p})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:s}){if(t.fieldInfos){const{graphic:r,relatedInfos:o,_sourceLayer:i,_fieldInfoMap:n,_graphicExpressionAttributes:a,timeZone:l}=this;s.content[e]=H({fieldInfos:t.fieldInfos,graphic:r,attributes:{...a,...t.attributes},layer:i,fieldInfoMap:n,relatedInfos:o,timeZone:l})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:s,relatedInfos:r,_sourceLayer:o,_fieldInfoMap:i,_graphicExpressionAttributes:n,timeZone:a}=this,l=e?.fieldInfos,p={global:H({fieldInfos:l,graphic:s,attributes:n,layer:o,fieldInfoMap:i,relatedInfos:r,timeZone:a}),content:[]};return Array.isArray(t)&&t.forEach(((t,e)=>{"fields"===t.type&&this._createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:p}),"media"===t.type&&this._createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:p})})),p}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:s}=this;return this._queryRelatedInfos(e,P(s),t)}async _queryRelatedInfos(t,e,s){const{relatedInfos:o,_sourceLayer:i}=this;o.clear();const n=null!=i?.associatedLayer?await(i?.associatedLayer.load(s)):i;if(!n||!t)return;const a=e.filter((t=>!!t.fieldName&&k(t.fieldName)));if(!a?.length)return;e.forEach((t=>this._configureRelatedInfo(t,n)));const u=await function({relatedInfos:t,layer:e},s){const r={};return t.forEach(((t,s)=>{const{relation:o}=t;if(!o){const t=new st("relation-required","A relation is required on a layer to retrieve related records.");throw Ft().error(t),t}const{relatedTableId:i}=o;if("number"!=typeof i){const t=new st("A related table ID is required on a layer to retrieve related records.");throw Ft().error(t),t}const n=`${e.url}/${i}`,a=vt.get(n),l=a??function(t){return et(t,{query:{f:"json"},signal:void 0})}(n);a||vt.set(n,l),r[s]=l})),l(p(r),s)}({relatedInfos:o,layer:n},s);Object.keys(u).forEach((t=>{const e=o.get(t.toString()),s=u[t]?.value;e&&s&&(e.layerInfo=s.data)}));const c=await function({graphic:t,relatedInfos:e,layer:s},o){const i={};return e.forEach(((e,n)=>{e.layerInfo&&(i[n]=async function(t,e,s,o){const i=s.layerId.toString(),{layerInfo:n,relation:a,relatedFields:l,outStatistics:u,url:c,sourceSpatialReference:m}=e,d=(h=l)?r(h):void 0;var h;const y=function(t){return t?r(t,((t,e)=>JSON.stringify(t.toJSON())===JSON.stringify(e.toJSON()))):void 0}(u);if(!n||!a)return null;const f=function({originRelationship:t,relationships:e,layerId:s}){return e.find((({relatedTableId:e,id:r})=>`${e}`===s&&r===t?.id))??null}({originRelationship:a,relationships:n.relationships,layerId:i});if(f?.relationshipTableId&&f.keyFieldInRelationshipTable){const e=await function(t,e,s,r){const o=new nt;return o.outFields=["*"],o.relationshipId="number"==typeof e.id?e.id:parseInt(e.id,10),o.objectIds=[t.attributes[s.objectIdField]],o.gdbVersion=s.gdbVersion??null,o.historicMoment=s.historicMoment??null,s.queryRelatedFeatures?.(o,r)??Promise.resolve({})}(t,f,s,o),r=e[t.attributes[s.objectIdField]];if(!r)return null;const i=r.features.map((t=>t.attributes[n.objectIdField]));if(y?.length&&n.supportsStatistics){const t=new it;t.where=function(t,e){let s=0;const r=[];for(;s<e.length;)r.push(`${t} IN (${e.slice(s,1e3+s)})`),s+=1e3;return r.join(" OR ")}(n.objectIdField,i),t.outFields=d,t.outStatistics=y,t.sourceSpatialReference=m;const e={features:Promise.resolve(r),statsFeatures:ot(c,t)};return p(e)}}const b=f?.keyField;if(b){const e=rt(function(t,e){if(null!=t){e=e.toLowerCase();for(const s of t)if(s&&s.name.toLowerCase()===e)return s}return null}(n.fields,b)),r=function(t,e){const s=e.toLowerCase();for(const e in t)if(e.toLowerCase()===s)return t[e];return null}(t.attributes,a.keyField),i=e?`${b}=${r}`:`${b}='${r}'`,l=s.historicMoment,u=s.gdbVersion,h=ot(c,new it({where:i,outFields:d,sourceSpatialReference:m,historicMoment:l,gdbVersion:u}),o),f=y?.length&&n.supportsStatistics?ot(c,new it({where:i,outFields:d,outStatistics:y,sourceSpatialReference:m}),o):null,g={features:h};return f&&(g.statsFeatures=f),p(g)}return null}(t,e,s,o))})),p(i)}({graphic:t,relatedInfos:o,layer:n},s);Object.keys(c).forEach((t=>{!function(t,e){if(!e)return;if(!t)return;const{features:s,statsFeatures:r}=t,o=s?.value;e.relatedFeatures=o?o.features:[];const i=r?.value;e.relatedStatsFeatures=i?i.features:[]}(c[t]?.value,o.get(t.toString()))}))}_configureRelatedInfo(t,e){const{relatedInfos:s}=this,r=kt(t.fieldName||"");if(!r)return;const{layerId:o,fieldName:i}=r;if(!o)return;const n=s.get(o.toString())||function(t,e){const s=function(t,e){if(!e.relationships)return null;let s=null;const{relationships:r}=e;return r.some((e=>e.id===parseInt(t,10)&&(s=e,!0))),s}(t,e);if(s)return{url:`${e.url}/${s.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:s,relatedFields:[],outStatistics:[]}}(o,e);n&&(function({relatedInfo:t,fieldName:e,fieldInfo:s}){if(t.relatedFields?.push(e),s.statisticType){const r=new at({statisticType:s.statisticType,onStatisticField:e,outStatisticFieldName:e});t.outStatistics?.push(r)}}({relatedInfo:n,fieldName:i,fieldInfo:t}),this.relatedInfos.set(o,n))}};Xt.interceptor=new class{constructor(t,e){this.preLayerQueryCallback=t,this.preRequestCallback=e,this.preLayerQueryCallback||(this.preLayerQueryCallback=t=>{}),this.preRequestCallback||(this.preLayerQueryCallback=t=>{})}}(Z,z),t([g()],Xt.prototype,"_error",void 0),t([g()],Xt.prototype,"_featureAbortController",void 0),t([g()],Xt.prototype,"_associationVMAbortController",void 0),t([g({readOnly:!0})],Xt.prototype,"_effectivePopupTemplate",null),t([g({readOnly:!0})],Xt.prototype,"_fieldInfoMap",null),t([g({readOnly:!0})],Xt.prototype,"_sourceLayer",null),t([g()],Xt.prototype,"abilities",void 0),t([j("abilities")],Xt.prototype,"castAbilities",null),t([g({readOnly:!0})],Xt.prototype,"content",void 0),t([g({readOnly:!0})],Xt.prototype,"contentViewModels",void 0),t([g()],Xt.prototype,"description",void 0),t([g({type:Boolean})],Xt.prototype,"defaultPopupTemplateEnabled",void 0),t([g({readOnly:!0})],Xt.prototype,"isTable",null),t([g({readOnly:!0})],Xt.prototype,"state",null),t([g({readOnly:!0})],Xt.prototype,"formattedAttributes",void 0),t([g({type:e,value:null})],Xt.prototype,"graphic",null),t([g({readOnly:!0})],Xt.prototype,"lastEditInfo",void 0),t([g({type:ct})],Xt.prototype,"location",void 0),t([g({readOnly:!0})],Xt.prototype,"relatedInfos",void 0),t([g()],Xt.prototype,"spatialReference",null),t([g()],Xt.prototype,"timeZone",null),t([g({readOnly:!0})],Xt.prototype,"title",void 0),t([g()],Xt.prototype,"map",null),t([g({readOnly:!0})],Xt.prototype,"waitingForContent",null),t([g()],Xt.prototype,"view",void 0),Xt=zt=t([I("esri.widgets.Feature.FeatureViewModel")],Xt);const Yt=Xt;export{It as F,wt as a,Ct as b,Tt as c,Ut as d,Yt as default,Zt as e};
