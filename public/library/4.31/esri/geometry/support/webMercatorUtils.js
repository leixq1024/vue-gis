// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../core/lang","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],function(k,n,p,m,g){function q(a,b,c,f,d){d.spatialReference=c;if("x"in a&&"x"in d)[d.x,d.y]=b(a.x,a.y,r,f);else if("xmin"in a&&"xmin"in d)[d.xmin,d.ymin]=b(a.xmin,a.ymin,r,f),[d.xmax,d.ymax]=b(a.xmax,a.ymax,r,f);else if("paths"in a&&"paths"in d||"rings"in a&&"rings"in d){a="paths"in a?a.paths:a.rings;c=[];for(let t=0;t<a.length;t++){const l=a[t];var e=[];c.push(e);for(let h=0;h<l.length;h++)e.push(b(l[h][0],
l[h][1],[0,0],f)),2<l[h].length&&e[h].push(l[h][2]),3<l[h].length&&e[h].push(l[h][3])}"paths"in d?d.paths=c:d.rings=c}else if("points"in a&&"points"in d){a=a.points;c=[];for(e=0;e<a.length;e++)c[e]=b(a[e][0],a[e][1],[0,0],f),2<a[e].length&&c[e].push(a[e][2]),3<a[e].length&&c[e].push(a[e][3]);d.points=c}return d}function w(a,b){const c=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference),f=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&"type"in a&&"mesh"===a.type||b&&"type"in b&&"mesh"===
b.type||!c||!f?!1:g.equals(f,c)?!0:g.isWebMercator(f)&&g.isWGS84(c)||g.isWebMercator(c)&&g.isWGS84(f)}function u(a,b,c=[0,0]){89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;c[0]=.017453292519943*a*m.earth.radius;c[1]=m.earth.halfSemiMajorAxis*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function v(a,b,c=[0,0],f=!1){a===g.webMercatorValid[0]?c[0]=-180:a===g.webMercatorValid[1]?c[0]=180:(a=a/m.earth.radius*57.29577951308232,c[0]=f?a:a-360*Math.floor((a+180)/360));c[1]=57.29577951308232*
(Math.PI/2-2*Math.atan(Math.exp(-b/m.earth.radius)));return c}const r=[0,0];k.canProject=w;k.geographicToWebMercator=function(a,b=!1,c=n.clone(a)){return q(a,u,p.WebMercator,b,c)};k.lngLatToXY=u;k.project=function(a,b){if(null==a)return null;const c=a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return w(c,b)?g.equals(c,b)?n.clone(a):g.isWebMercator(b)?q(a,u,p.WebMercator,!1,n.clone(a)):g.isWGS84(b)?q(a,v,p.WGS84,!1,n.clone(a)):null:null};k.webMercatorToGeographic=function(a,
b=!1,c=n.clone(a)){return q(a,v,p.WGS84,b,c)};k.x2lon=function(a){return a/m.earth.radius};k.xyToLngLat=v;k.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-a/m.earth.radius))};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});