// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../core/Error ../chunks/pe ./Point ./SpatialReference ../intl/number".split(" "),function(g,p,c,n,l,t){function q(){return c.isLoaded()}function m(a,b){const d=[];a=a.replaceAll(/[\u00B0\u00BA]/g,"^");a=a.replaceAll("\u2032","'");a=a.replaceAll("\u2033",'"');const e=k(b);return c.PeNotationDms.dmsToGeog(e,1,[a],d)?new n(d[0][0],d[0][1],b||l.WGS84):null}function k(a){let b=null;a||(a=l.WGS84);if(a.wkid){if(b=c.PeFactory.geogcs(a.wkid),!b)throw new p("coordinate-formatter:invalid-spatial-reference",
"wkid is not valid");}else if(a.wkt2||a.wkt){if(b=c.PeFactory.fromString(c.PeDefs.PE_TYPE_GEOGCS,a.wkt2||a.wkt),!b)throw new p("coordinate-formatter:invalid-spatial-reference","wkt is not valid");}else throw new p("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");return b}function u(a){let b=-1;switch(a){case "automatic":b=c.PeNotationMgrs.PE_MGRS_STYLE_AUTO;break;case "new-180-in-zone-01":b=c.PeNotationMgrs.PE_MGRS_STYLE_NEW|c.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;
case "new-180-in-zone-60":b=c.PeNotationMgrs.PE_MGRS_STYLE_NEW;break;case "old-180-in-zone-01":b=c.PeNotationMgrs.PE_MGRS_STYLE_OLD|c.PeNotationMgrs.PE_MGRS_180_ZONE_1_PLUS;break;case "old-180-in-zone-60":b=c.PeNotationMgrs.PE_MGRS_STYLE_OLD}return b}function v(a){let b=-1;switch(a){case "latitude-band-indicators":b=c.PeNotationUtm.PE_UTM_OPTS_NONE;break;case "north-south-indicators":b=c.PeNotationUtm.PE_UTM_OPTS_NS}return b}g.fromLatitude=function(a){return a&&q()?t.parseNumber(a)??m(`${a} | 0\u00b0 0' 0" E`)?.latitude??
m(`${a} | 0`)?.latitude??null:null};g.fromLatitudeLongitude=m;g.fromLongitude=function(a){return a&&q()?t.parseNumber(a)??m(`0\u00b0 0' 0" N | ${a}`)?.longitude??m(`0 | ${a}`)?.longitude??null:null};g.fromMgrs=function(a,b,d){const e=[],f=u(d);if(-1===f)return console.warn(`invalid conversionMode: ${d}`),null;d=k(b);return c.PeNotationMgrs.mgrsToGeogExtended(d,1,[a],f,e)?new n(e[0][0],e[0][1],b||l.WGS84):null};g.fromUsng=function(a,b){const d=[];!b&&/\(.+27/.test(a)&&(b=l.GCS_NAD_1927);const e=k(b);
return c.PeNotationUsng.usngToGeog(e,1,[a],d)?new n(d[0][0],d[0][1],b||l.WGS84):null};g.fromUtm=function(a,b,d){const e=[],f=v(d);if(-1===f)return console.warn(`invalid conversionMode: ${d}`),null;d=k(b);return c.PeNotationUtm.utmToGeog(d,1,[a],f,e)?new n(e[0][0],e[0][1],b||l.WGS84):null};g.isLoaded=q;g.isSupported=function(){return c.isSupported()};g.load=function(){return c.load()};g.toLatitudeLongitude=function(a,b,d=0){const e=[[a.x,a.y]],f=[];a=k(a.spatialReference);let h=0;switch(b){case "dd":h=
c.PeNotationDms.geogToDd(a,1,e,d,f);break;case "ddm":h=c.PeNotationDms.geogToDdm(a,1,e,d,f);break;case "dms":h=c.PeNotationDms.geogToDms(a,1,e,d,f);break;default:return console.warn(`invalid format: ${b}`),null}return h?f[0]:null};g.toMgrs=function(a,b,d=0,e=!1){const f=[[a.x,a.y]],h=[];a=k(a.spatialReference);let r=u(b);if(-1===r)return console.warn(`invalid conversionMode: ${b}`),null;e&&(r|=c.PeNotationMgrs.PE_MGRS_ADD_SPACES);return c.PeNotationMgrs.geogToMgrsExtended(a,1,f,d,!1,r,h)?h[0]:null};
g.toUsng=function(a,b=0,d=!1){const e=[[a.x,a.y]],f=[];a=k(a.spatialReference);return c.PeNotationUsng.geogToUsng(a,1,e,b,!1,d,f)?f[0]:null};g.toUtm=function(a,b,d=!1){const e=[[a.x,a.y]],f=[];a=k(a.spatialReference);let h=v(b);if(-1===h)return console.warn(`invalid conversionMode: ${b}`),null;d&&(h|=c.PeNotationUtm.PE_UTM_OPTS_ADD_SPACES);return c.PeNotationUtm.geogToUtm(a,1,e,h,f)?f[0]:null};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});