// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/webgl/BufferObject":function(){define("exports ../../core/arrayUtils ../../core/has ../../core/Logger ../../core/typedArrayUtil ./checkWebGLError ./enums".split(" "),function(b,a,z,d,m,B,l){class n{static createIndex(u,w,c){return new n(u,l.BufferType.ELEMENT_ARRAY_BUFFER,w,c)}static createVertex(u,w,c){return new n(u,l.BufferType.ARRAY_BUFFER,w,c)}static createUniform(u,w,c){return new n(u,l.BufferType.UNIFORM_BUFFER,w,c)}static createPixelPack(u,w=l.Usage.STREAM_READ,
c){u=new n(u,l.BufferType.PIXEL_PACK_BUFFER,w);c&&u.setSize(c);return u}static createPixelUnpack(u,w=l.Usage.STREAM_DRAW,c){return new n(u,l.BufferType.PIXEL_UNPACK_BUFFER,w,c)}static createTransformFeedback(u,w=l.Usage.STATIC_DRAW,c){u=new n(u,l.BufferType.TRANSFORM_FEEDBACK_BUFFER,w);u.setSize(c);return u}constructor(u,w,c,h){this._context=u;this.bufferType=w;this.usage=c;this._glName=null;this._size=-1;this._indexType=void 0;u.instanceCounter.increment(l.ResourceType.BufferObject,this);this._glName=
this._context.gl.createBuffer();B.checkWebGLError(this._context.gl);h&&this.setData(h)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===l.BufferType.ELEMENT_ARRAY_BUFFER){if(this._indexType===l.DataType.UNSIGNED_INT)return 4*this._size;if(this._indexType===l.DataType.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===l.BufferType.ELEMENT_ARRAY_BUFFER||this.bufferType===
l.BufferType.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(l.ResourceType.BufferObject,this),this._context=null):this._glName&&d.getLogger("esri.views.webgl.BufferObject").warn("Leaked WebGL buffer object")}setSize(u,w=null){if(this.bufferType===l.BufferType.ELEMENT_ARRAY_BUFFER&&null!=w)switch(this._indexType=w,w){case l.DataType.UNSIGNED_SHORT:u*=2;break;case l.DataType.UNSIGNED_INT:u*=
4}this._setBufferData(u)}setData(u){if(u){var w=u.byteLength;this.bufferType===l.BufferType.ELEMENT_ARRAY_BUFFER&&(m.isUint8Array(u)?this._indexType=l.DataType.UNSIGNED_BYTE:m.isUint16Array(u)?(w/=2,this._indexType=l.DataType.UNSIGNED_SHORT):m.isUint32Array(u)&&(w/=4,this._indexType=l.DataType.UNSIGNED_INT));this._setBufferData(w,u)}}_setBufferData(u,w=null){this._size=u;const c=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);const h=this._context.gl;
null!=w?h.bufferData(this.bufferType,w,this.usage):h.bufferData(this.bufferType,u,this.usage);B.checkWebGLError(h);this._isVAOAware&&this._context.bindVAO(c)}setSubData(u,w,c,h){if(u){var r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);var {gl:A}=this._context;A.bufferSubData(this.bufferType,w*u.BYTES_PER_ELEMENT,u,c,h-c);B.checkWebGLError(A);this._isVAOAware&&this._context.bindVAO(r)}}getSubData(u,w=0,c,h){if(!(0>c||0>h)){var r=a.isArrayLike(u)?
u.BYTES_PER_ELEMENT:1;r*((c??0)+(h??0))>u.byteLength||(w+r*(h??0)>this.usedMemory&&d.getLogger("esri.views.webgl.BufferObject").warn("Potential problem getting subdata: requested data exceeds buffer size!"),r=this._context.gl,this.bufferType===l.BufferType.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,l.BufferType.TRANSFORM_FEEDBACK_BUFFER),r.getBufferSubData(l.BufferType.TRANSFORM_FEEDBACK_BUFFER,w,u,c,h),this._context.unbindBuffer(l.BufferType.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,
l.BufferType.COPY_READ_BUFFER),r.getBufferSubData(l.BufferType.COPY_READ_BUFFER,w,u,c,h),this._context.unbindBuffer(l.BufferType.COPY_READ_BUFFER)))}}async getSubDataAsync(u,w=0,c,h){await this._context.clientWaitAsync();this.getSubData(u,w,c,h)}}b.BufferObject=n;b.tracer=null;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,z,d){function m(l,n){switch(n){case l.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";
case l.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case l.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case l.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case l.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case l.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";
default:return"Unknown error"}}const B=!!z("enable-feature:webgl-debug");b.checkWebGLError=function(l){if(B){var n=l.getError();n&&(l=m(l,n),n=Error().stack,d.getLogger("esri.views.webgl.checkWebGLError").error(new a("webgl-error","WebGL error occurred",{message:l,stack:n})))}};b.hasFeatureFlagWebGLDebug=B;b.webglDebugEnabled=function(){return B};b.webglValidateShadersEnabled=function(){return B};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],
function(b){b.FramebufferBit=void 0;(function(a){a[a.DEPTH=256]="DEPTH";a[a.STENCIL=1024]="STENCIL";a[a.COLOR=16384]="COLOR"})(b.FramebufferBit||(b.FramebufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";
a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=
32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";
a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER";a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||
(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT";a[a.HALF_FLOAT=5131]="HALF_FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";
a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=
9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]=
"TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";
a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";
a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=
33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]=
"RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||
(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=
5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";
a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";
a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget=
{}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.TransformFeedback=7]="TransformFeedback";a[a.Sync=8]="Sync";a[a.UNCOUNTED=9]="UNCOUNTED";a[a.LinesOfCode=9]="LinesOfCode";a[a.Uniform=10]="Uniform";a[a.COUNT=11]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=
void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";
a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers={}));b.CompressedTextureFormat=
void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=
37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||
(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=
35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";
a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=
36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";
a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=
void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/FramebufferObject":function(){define("exports ../../core/has ../../core/Logger ../../core/maybe ./BufferObject ./checkWebGLError ./enums ./GLObjectType ./Renderbuffer ./Texture".split(" "),function(b,a,z,d,m,B,l,n,u,w){function c(e){return null!=e&&"type"in
e&&e.type===n.GLObjectType.Texture}function h(e,x){const g=Math.max(e.width,e.height);return g>x?(z.getLogger("esri.views.webgl.FramebufferObject").warn(`Resizing FBO attachment size ${e.width}x${e.height} to device limit ${x}`),x/=g,e.width=Math.round(e.width*x),e.height=Math.round(e.height*x),!1):!0}function r(e){return e.descriptor.target===l.TextureType.TEXTURE_CUBE_MAP?l.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X:l.TextureType.TEXTURE_2D}class A{constructor(e,x,g=null){this._context=e;this._glName=
null;this._colorAttachments=new Map;this._depthStencilTexture=this._depthStencilBuffer=null;this._initialized=!1;e.instanceCounter.increment(l.ResourceType.FramebufferObject,this);e=c(x)?x:new w.Texture(this._context,x);this._colorAttachments.set(l.ColorAttachment.COLOR_ATTACHMENT0,e);this._validateTextureDescriptor(e.descriptor);this._validateColorAttachmentPoint(l.ColorAttachment.COLOR_ATTACHMENT0);null!=g&&(c(g)||null!=g&&"pixelFormat"in g?(this._depthStencilTexture=c(g)?g:new w.Texture(this._context,
g),this._validateTextureDescriptor(this._depthStencilTexture.descriptor)):(this._depthStencilBuffer=g=null!=g&&"type"in g&&g.type===n.GLObjectType.RenderBuffer?g:new u.Renderbuffer(this._context,g),this._validateRenderBufferDescriptor(g.descriptor)))}dispose(){if(0!==this._colorAttachments.size||this._glName){var e=this._context.getBoundFramebufferObject();this._colorAttachments.forEach((x,g)=>this.detachColorTexture(g)?.dispose());this.detachDepthStencilBuffer()?.dispose();this.detachDepthStencilTexture()?.dispose();
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(e);this._context.instanceCounter.decrement(l.ResourceType.FramebufferObject,this)}}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(l.ColorAttachment.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){return this._colorAttachments.get(l.ColorAttachment.COLOR_ATTACHMENT0)?.descriptor?.width??
0}get height(){return this._colorAttachments.get(l.ColorAttachment.COLOR_ATTACHMENT0)?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce((e,[,x])=>e+x.usedMemory,this.depthStencil?.usedMemory??0)}getColorTexture(e){return(e=this._colorAttachments.get(e))&&c(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(e,x=l.ColorAttachment.COLOR_ATTACHMENT0){e&&(this._validateColorAttachmentPoint(x),this._validateTextureDescriptor(e.descriptor),
this.detachColorTexture(x)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(e.glName,x)),this._colorAttachments.set(x,e))}detachColorTexture(e=l.ColorAttachment.COLOR_ATTACHMENT0){const x=this._colorAttachments.get(e);if(x){if(this._initialized){const g=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);this._framebufferTexture2D(null,e);this._context.bindFramebuffer(g)}this._colorAttachments.delete(e);return x}}setColorTextureTarget(e,
x=l.ColorAttachment.COLOR_ATTACHMENT0){const g=this._colorAttachments.get(x);g&&this._framebufferTexture2D(g.glName,x,e)}attachDepthStencil(e){if(e)switch(e.type){case n.GLObjectType.Texture:return this._attachDepthStencilTexture(e);case n.GLObjectType.RenderBuffer:return this._attachDepthStencilBuffer(e)}}_attachDepthStencilTexture(e){if(null!=e){var x=e.descriptor;x.pixelFormat!==l.PixelFormat.DEPTH_STENCIL&&x.pixelFormat!==l.PixelFormat.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");
x.dataType!==l.PixelType.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._validateTextureDescriptor(x);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(e.glName,l.DepthStencilAttachment));this._depthStencilTexture?.dispose();this._depthStencilTexture=e}}detachDepthStencilTexture(){const e=this._depthStencilTexture;if(e&&this._initialized){const x=this._context.getBoundFramebufferObject();
this._context.bindFramebuffer(this);this._framebufferTexture2D(null,l.DepthStencilAttachment);this._context.bindFramebuffer(x)}this._depthStencilTexture=null;return e}_attachDepthStencilBuffer(e){if(null!=e){var x=e.descriptor;this._validateRenderBufferDescriptor(x);this._disposeDepthStencilAttachments();if(this._initialized){this._context.bindFramebuffer(this);const g=this._context.gl;x=this._getGLAttachmentPoint(x);g.framebufferRenderbuffer(l.FramebufferTarget.FRAMEBUFFER,x,g.RENDERBUFFER,e.glName)}this._depthStencilBuffer=
e}}detachDepthStencilBuffer(){const e=this._depthStencilBuffer;if(e&&this._initialized){const x=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);const g=this._context.gl,f=this._getGLAttachmentPoint(e.descriptor);g.framebufferRenderbuffer(l.FramebufferTarget.FRAMEBUFFER,f,g.RENDERBUFFER,null);this._context.bindFramebuffer(x)}this._depthStencilBuffer=null;return e}copyToTexture(e,x,g,f,k,q,p){(0>e||0>x||0>k||0>q)&&console.error("Offsets cannot be negative!");(0>=g||0>=
f)&&console.error("Copy width and height must be greater than zero!");var y=p.descriptor;p.descriptor.target!==l.TextureType.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!");(null==y?.width||null==y?.height||e+g>this.width||x+f>this.height||k+g>y.width||q+f>y.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");y=this._context;p=y.bindTexture(p,w.Texture.TEXTURE_UNIT_FOR_UPDATES);y.setActiveTexture(w.Texture.TEXTURE_UNIT_FOR_UPDATES);
y.bindFramebuffer(this);y.gl.copyTexSubImage2D(l.TextureType.TEXTURE_2D,0,k,q,e,x,g,f);y.bindTexture(p,w.Texture.TEXTURE_UNIT_FOR_UPDATES)}readPixels(e,x,g,f,k,q,p){(0>=g||0>=f)&&console.error("Copy width and height must be greater than zero!");p||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(e,x,g,f,k,q,p)}async readPixelsAsync(e,x,g,f,k,q,p){const {gl:y}=this._context,C=m.BufferObject.createPixelPack(this._context,l.Usage.STREAM_READ,
p.byteLength);this._context.bindBuffer(C);const H=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);y.readPixels(e,x,g,f,k,q,0);this._context.unbindBuffer(l.BufferType.PIXEL_PACK_BUFFER);this._context.bindFramebuffer(H);await C.getSubDataAsync(p);C.dispose()}resize(e,x){if(this.width!==e||this.height!==x){var g={width:e,height:x};h(g,this._context.parameters.maxTextureSize);this._colorAttachments.forEach(f=>f.resize(g.width,g.height));this._depthStencilTexture?.resize(g.width,
g.height);this._initialized&&(h(g,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(g.width,g.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}}initializeAndBind(e=l.FramebufferTarget.FRAMEBUFFER){const x=this._context.gl;if(this._initialized)x.bindFramebuffer(e,this.glName);else{this._glName&&x.deleteFramebuffer(this._glName);var g=x.createFramebuffer();x.bindFramebuffer(e,g);this._colorAttachments.forEach((f,
k)=>this._framebufferTexture2D(f.glName,k,r(f),e));if(this._depthStencilBuffer){const f=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);x.framebufferRenderbuffer(e,f,x.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,x.DEPTH_STENCIL_ATTACHMENT,r(this._depthStencilTexture),e);B.webglDebugEnabled()&&x.checkFramebufferStatus(e)!==x.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!");
this._glName=g;this._initialized=!0}}_framebufferTexture2D(e,x=l.ColorAttachment.COLOR_ATTACHMENT0,g=l.TextureType.TEXTURE_2D,f=l.FramebufferTarget.FRAMEBUFFER,k=0){this._context.gl.framebufferTexture2D(f,x,g,e,k)}_disposeDepthStencilAttachments(){const e=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const x=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(l.FramebufferTarget.FRAMEBUFFER,x,e.RENDERBUFFER,
null)}this._depthStencilBuffer=d.disposeMaybe(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,e.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=d.disposeMaybe(this._depthStencilTexture))}_validateTextureDescriptor(e){e.target!==l.TextureType.TEXTURE_2D&&e.target!==l.TextureType.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!");h(e,this._context.parameters.maxTextureSize);
this._validateBufferDimensions(e)}_validateRenderBufferDescriptor(e){h(e,this._context.parameters.maxRenderbufferSize);this._validateBufferDimensions(e)}_validateBufferDimensions(e){0>=e.width&&(e.width=this.width);0>=e.height&&(e.height=this.height);0<this.width&&0<this.height&&(this.width!==e.width||this.height!==e.height)&&console.error("Attachment size must match framebuffer size!")}_getGLAttachmentPoint(e){switch(e.internalFormat){case l.RenderbufferFormat.DEPTH_COMPONENT16:case l.RenderbufferFormat.DEPTH_COMPONENT24:case l.RenderbufferFormat.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;
case l.RenderbufferFormat.DEPTH24_STENCIL8:case l.RenderbufferFormat.DEPTH32F_STENCIL8:case l.RenderbufferFormat.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case l.RenderbufferFormat.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===A._MAX_COLOR_ATTACHMENTS){const {gl:x}=this._context;A._MAX_COLOR_ATTACHMENTS=x.getParameter(x.MAX_COLOR_ATTACHMENTS)}e-=l.ColorAttachment.COLOR_ATTACHMENT0;e+1>A._MAX_COLOR_ATTACHMENTS&&z.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",
`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${A._MAX_COLOR_ATTACHMENTS} color attachments`)}}A._MAX_COLOR_ATTACHMENTS=-1;b.FramebufferObject=A;b.ensureAttachmentMaxSize=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(b){b.GLObjectType=void 0;var a=b.GLObjectType||(b.GLObjectType={});a[a.Texture=0]="Texture";a[a.RenderBuffer=1]="RenderBuffer";Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/Renderbuffer":function(){define(["exports","./enums","./GLObjectType","./RenderbufferDescriptor"],function(b,a,z,d){class m{constructor(B,l){this._context=B;this._descriptor=l;this.type=z.GLObjectType.RenderBuffer;this._context.instanceCounter.increment(a.ResourceType.Renderbuffer,this);B=this._context.gl;this.glName=B.createRenderbuffer();this._context.bindRenderbuffer(this);const {width:n,height:u,internalFormat:w,multisampled:c}=l;c?B.renderbufferStorageMultisample(B.RENDERBUFFER,
this.samples,w,n,u):B.renderbufferStorage(B.RENDERBUFFER,w,n,u);this._context.bindRenderbuffer(null)}get descriptor(){return this._descriptor}get samples(){const B=this._descriptor.samples,l=this._context.parameters.maxSamples;return B?Math.min(B,l):l}get usedMemory(){return d.estimateMemory(this._descriptor)}resize(B,l){const n=this._descriptor;if(n.width!==B||n.height!==l)n.width=B,n.height=l,B=this._context.gl,this._context.bindRenderbuffer(this),n.multisampled?B.renderbufferStorageMultisample(B.RENDERBUFFER,
this.samples,n.internalFormat,n.width,n.height):B.renderbufferStorage(B.RENDERBUFFER,n.internalFormat,n.width,n.height),this._context.bindRenderbuffer(null)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(a.ResourceType.Renderbuffer,this),this._context=null)}}b.Renderbuffer=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/RenderbufferDescriptor":function(){define(["exports","./Util"],function(b,a){class z{constructor(d,
m,B=m){this.internalFormat=d;this.width=m;this.height=B;this.multisampled=!1;this.samples=1}}b.RenderbufferDescriptor=z;b.estimateMemory=function(d){return 0>=d.width||0>=d.height||null==d.internalFormat?0:d.width*d.height*a.getBytesPerElementFormat(d.internalFormat)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","./checkWebGLError","./enums","./getDataTypeBytes"],function(b,a,z,d,m){function B(n){n=n.gl;switch(n.getError()){case n.NO_ERROR:return null;
case n.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case n.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case n.INVALID_OPERATION:return"The specified command is not allowed for the current state";case n.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case n.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case n.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}
function l(n){return n[0].stride}b.bindVertexBufferLayout=function(n,u,w,c,h=0){const r=n.gl;n.bindBuffer(w);for(const e of c)if(c=u.get(e.name),null==c)console.warn(`There is no location for vertex attribute '${e.name}' defined.`);else{w=h*e.stride;if(4>=e.count)r.vertexAttribPointer(c,e.count,e.type,e.normalized,e.stride,e.offset+w),r.enableVertexAttribArray(c),0<e.divisor&&n.gl.vertexAttribDivisor(c,e.divisor);else if(9===e.count)for(var A=0;3>A;A++)r.vertexAttribPointer(c+A,3,e.type,e.normalized,
e.stride,e.offset+12*A+w),r.enableVertexAttribArray(c+A),0<e.divisor&&n.gl.vertexAttribDivisor(c+A,e.divisor);else if(16===e.count)for(A=0;4>A;A++)r.vertexAttribPointer(c+A,4,e.type,e.normalized,e.stride,e.offset+16*A+w),r.enableVertexAttribArray(c+A),0<e.divisor&&n.gl?.vertexAttribDivisor(c+A,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count);if(z.webglDebugEnabled()){c=B(n);A=m.getDataTypeBytes(e.type);const x=e.offset;A=Math.round(A/x)!==A/x?`. Offset not a multiple of stride. DataType requires ${A} bytes, but descriptor has an offset of ${x}`:
"";c&&console.error(`Unable to bind vertex attribute "${e.name}" with baseInstanceOffset ${w}${A}:`,c,e)}}};b.getBytesPerElementFormat=function(n){switch(n){case d.PixelFormat.ALPHA:case d.PixelFormat.LUMINANCE:case d.PixelFormat.RED:case d.PixelFormat.RED_INTEGER:case d.SizedPixelFormat.R8:case d.SizedPixelFormat.R8I:case d.SizedPixelFormat.R8UI:case d.SizedPixelFormat.R8_SNORM:case d.RenderbufferFormat.STENCIL_INDEX8:return 1;case d.PixelFormat.LUMINANCE_ALPHA:case d.PixelFormat.RG:case d.PixelFormat.RG_INTEGER:case d.SizedPixelFormat.RGBA4:case d.SizedPixelFormat.R16F:case d.SizedPixelFormat.R16I:case d.SizedPixelFormat.R16UI:case d.SizedPixelFormat.RG8:case d.SizedPixelFormat.RG8I:case d.SizedPixelFormat.RG8UI:case d.SizedPixelFormat.RG8_SNORM:case d.SizedPixelFormat.RGB565:case d.SizedPixelFormat.RGB5_A1:case d.RenderbufferFormat.DEPTH_COMPONENT16:return 2;
case d.PixelFormat.DEPTH_COMPONENT:case d.PixelFormat.RGB:case d.PixelFormat.RGB_INTEGER:case d.SizedPixelFormat.RGB8:case d.SizedPixelFormat.RGB8I:case d.SizedPixelFormat.RGB8UI:case d.SizedPixelFormat.RGB8_SNORM:case d.SizedPixelFormat.SRGB8:case d.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case d.PixelFormat.DEPTH_STENCIL:case d.PixelFormat.DEPTH24_STENCIL8:case d.PixelFormat.RGBA:case d.PixelFormat.RGBA_INTEGER:case d.SizedPixelFormat.RGBA8:case d.SizedPixelFormat.R32F:case d.SizedPixelFormat.R11F_G11F_B10F:case d.SizedPixelFormat.RG16F:case d.SizedPixelFormat.R32I:case d.SizedPixelFormat.R32UI:case d.SizedPixelFormat.RG16I:case d.SizedPixelFormat.RG16UI:case d.SizedPixelFormat.RGBA8I:case d.SizedPixelFormat.RGBA8UI:case d.SizedPixelFormat.RGBA8_SNORM:case d.SizedPixelFormat.SRGB8_ALPHA8:case d.SizedPixelFormat.RGB9_E5:case d.SizedPixelFormat.RGB10_A2UI:case d.SizedPixelFormat.RGB10_A2:case d.RenderbufferFormat.DEPTH_STENCIL:case d.RenderbufferFormat.DEPTH_COMPONENT32F:case d.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case d.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case d.SizedPixelFormat.RGB16F:case d.SizedPixelFormat.RGB16I:case d.SizedPixelFormat.RGB16UI:return 6;case d.SizedPixelFormat.RG32F:case d.SizedPixelFormat.RG32I:case d.SizedPixelFormat.RG32UI:case d.SizedPixelFormat.RGBA16F:case d.SizedPixelFormat.RGBA16I:case d.SizedPixelFormat.RGBA16UI:return 8;case d.SizedPixelFormat.RGB32F:case d.SizedPixelFormat.RGB32I:case d.SizedPixelFormat.RGB32UI:return 12;case d.SizedPixelFormat.RGBA32F:case d.SizedPixelFormat.RGBA32I:case d.SizedPixelFormat.RGBA32UI:return 16;
case d.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case d.CompressedTextureFormat.COMPRESSED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case d.CompressedTextureFormat.COMPRESSED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};b.getErrorString=B;b.getStride=l;b.unbindVertexBufferLayout=function(n,u,w,c){const h=n.gl;n.bindBuffer(w);for(const r of c)if(w=u.get(r.name),4>=r.count)h.disableVertexAttribArray(w),r.divisor&&0<r.divisor&&n.gl?.vertexAttribDivisor(w,0);else if(9===r.count)for(c=
0;3>c;c++)h.disableVertexAttribArray(w+c),r.divisor&&0<r.divisor&&n.gl?.vertexAttribDivisor(w+c,0);else if(16===r.count)for(c=0;4>c;c++)h.disableVertexAttribArray(w+c),r.divisor&&0<r.divisor&&n.gl?.vertexAttribDivisor(w+c,0);else console.error("Unsupported vertex attribute element count: "+r.count);n.unbindBuffer(d.BufferType.ARRAY_BUFFER)};b.vertexCount=function(n,u){return(n.vertexBuffers.get(u)?.usedMemory??0)/l(n.layout.get(u))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/getDataTypeBytes":function(){define(["exports","./enums"],function(b,a){b.getDataTypeBytes=function(z){switch(z){case a.DataType.BYTE:case a.DataType.UNSIGNED_BYTE:return 1;case a.DataType.SHORT:case a.DataType.UNSIGNED_SHORT:case a.DataType.HALF_FLOAT:return 2;case a.DataType.FLOAT:case a.DataType.INT:case a.DataType.UNSIGNED_INT:return 4}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ./checkWebGLError ./enums ./GLObjectType ./TextureDescriptor ./ValidatedTextureDescriptor".split(" "),
function(b,a,z,d,m,B,l,n){function u(g){(null!=g.width&&0>g.width||null!=g.height&&0>g.height||null!=g.depth&&0>g.depth)&&console.error("Negative dimension parameters are not allowed!")}function w(g,f){let k=f.samplingMode,q=f.samplingMode;if(k===m.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||k===m.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)k=m.TextureSamplingMode.LINEAR,f.hasMipmap||(q=m.TextureSamplingMode.LINEAR);else if(k===m.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||k===m.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)k=
m.TextureSamplingMode.NEAREST,f.hasMipmap||(q=m.TextureSamplingMode.NEAREST);g.texParameteri(f.target,g.TEXTURE_MAG_FILTER,k);g.texParameteri(f.target,g.TEXTURE_MIN_FILTER,q)}function c(g,f){"number"===typeof f.wrapMode?(g.texParameteri(f.target,g.TEXTURE_WRAP_S,f.wrapMode),g.texParameteri(f.target,g.TEXTURE_WRAP_T,f.wrapMode)):(g.texParameteri(f.target,g.TEXTURE_WRAP_S,f.wrapMode.s),g.texParameteri(f.target,g.TEXTURE_WRAP_T,f.wrapMode.t))}function h(g,f){const k=g.capabilities.textureFilterAnisotropic;
k&&g.gl.texParameterf(f.target,k.TEXTURE_MAX_ANISOTROPY,f.maxAnisotropy??1)}function r(g){return null!=g&&"type"in g&&"compressed"===g.type}function A(g){return null!=g&&!r(g)&&!(null!=g&&"byteLength"in g)}function e(g){return g===m.TextureType.TEXTURE_3D||g===m.TextureType.TEXTURE_2D_ARRAY}function x(g,f,k,q=1){f=Math.max(f,k);g===m.TextureType.TEXTURE_3D&&(f=Math.max(f,q));return Math.round(Math.log(f)/Math.LN2)+1}z=class g{constructor(f,k=null,q=null){this.type=B.GLObjectType.Texture;this._glName=
null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;if("context"in f)this._descriptor=f,q=k;else{f=n.ValidatedTextureDescriptor.validate(f,k);if(!f)throw new a("Texture descriptor invalid");this._descriptor=f}this._descriptor.target===m.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(q):this.setData(q)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return l.estimateMemory(this._descriptor)}get isDirty(){return this._samplingModeDirty||
this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(m.ResourceType.Texture,this);this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(f,k){const q=this._descriptor;if(q.width!==f||q.height!==k){if(this._wasImmutablyAllocated)throw new a("Immutable textures can't be resized!");q.width=f;q.height=k;this._descriptor.target===
m.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(f=null){for(let k=m.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;k<=m.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;k++)this._setData(f,k)}setData(f){this._setData(f)}_setData(f,k){const q=this._descriptor.context?.gl;if(q){d.checkWebGLError(q);this._glName||(this._glName=q.createTexture())&&this._descriptor.context.instanceCounter.increment(m.ResourceType.Texture,this);var p=this._descriptor,y=k??p.target,C=e(y);k=
this._descriptor.context.bindTexture(this,g.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(g.TEXTURE_UNIT_FOR_UPDATES);u(p);this._configurePixelStorage();d.checkWebGLError(q);var H=this._deriveInternalFormat();if(A(f)){let E="width"in f?f.width:f.codedWidth,v="height"in f?f.height:f.codedHeight;f instanceof HTMLVideoElement&&(E=f.videoWidth,v=f.videoHeight);p.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(y,H,p.hasMipmap,E,v,1);this._texImage(y,0,H,E,v,1,f);d.checkWebGLError(q);
p.hasMipmap&&(this.generateMipmap(),d.checkWebGLError(q));p.width||(p.width=E);p.height||(p.height=v);C&&!p.depth&&(p.depth=1)}else{const {width:E,height:v,depth:I}=p;if(null==E||null==v)throw new a("Width and height must be specified!");if(C&&null==I)throw new a("Depth must be specified!");p.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(y,H,p.hasMipmap,E,v,I);if(r(f)){const F=f.levels;f=x(y,E,v,I);f=Math.min(f-1,F.length-1);q.texParameteri(p.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,
f);if(!(H in m.CompressedTextureFormat))throw new a("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((t,D,G,K)=>{this._compressedTexImage(y,t,H,D,G,K,F[Math.min(t,F.length-1)])},f)}else this._texImage(y,0,H,E,v,I,f),d.checkWebGLError(q),p.hasMipmap&&this.generateMipmap()}w(q,this._descriptor);c(q,this._descriptor);h(this._descriptor.context,this._descriptor);d.checkWebGLError(q);this._descriptor.context.bindTexture(k,g.TEXTURE_UNIT_FOR_UPDATES)}}updateData(f,
k,q,p,y,C,H=0){C||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var E=this._descriptor;const v=this._deriveInternalFormat(),{context:I,pixelFormat:F,dataType:t,target:D,isImmutable:G}=E;if(G&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");const K=I.bindTexture(this,g.TEXTURE_UNIT_FOR_UPDATES,!0);(0>k||0>q||k+p>E.width||q+y>E.height)&&console.error("An attempt to update out of bounds of the texture!");
this._configurePixelStorage();({gl:E}=I);H&&E.pixelStorei(E.UNPACK_SKIP_ROWS,H);A(C)?E.texSubImage2D(D,f,k,q,p,y,F,t,C):r(C)?E.compressedTexSubImage2D(D,f,k,q,p,y,v,C.levels[f]):E.texSubImage2D(D,f,k,q,p,y,F,t,C);H&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0);I.bindTexture(K,g.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(f,k,q,p,y,C,H,E){E||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var v=this._descriptor;const I=this._deriveInternalFormat(),
{context:F,pixelFormat:t,dataType:D,isImmutable:G,target:K}=v;if(G&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");e(K)||console.warn("Attempting to set 3D texture data on a non-3D texture");const L=F.bindTexture(this,g.TEXTURE_UNIT_FOR_UPDATES);F.setActiveTexture(g.TEXTURE_UNIT_FOR_UPDATES);(0>k||0>q||0>p||k+y>v.width||q+C>v.height||p+H>v.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();({gl:v}=
F);r(E)?(E=E.levels[f],v.compressedTexSubImage3D(K,f,k,q,p,y,C,H,I,E)):v.texSubImage3D(K,f,k,q,p,y,C,H,t,D,E);F.bindTexture(L,g.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const f=this._descriptor;if(!f.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot add mipmaps to immutable texture after allocation");this._samplingModeDirty=f.hasMipmap=!0;u(f)}f.samplingMode===m.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,f.samplingMode=m.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):f.samplingMode===
m.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,f.samplingMode=m.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const k=this._descriptor.context.bindTexture(this,g.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(g.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(f.target);this._descriptor.context.bindTexture(k,g.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const f=this._descriptor;if(f.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot delete mipmaps to immutable texture after allocation");
f.hasMipmap=!1;this._samplingModeDirty=!0;u(f)}f.samplingMode===m.TextureSamplingMode.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,f.samplingMode=m.TextureSamplingMode.LINEAR):f.samplingMode===m.TextureSamplingMode.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,f.samplingMode=m.TextureSamplingMode.NEAREST)}setSamplingMode(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,this._samplingModeDirty=!0)}setWrapMode(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=
f,u(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const f=this._descriptor,k=f.context.gl;this._samplingModeDirty&&(w(k,f),this._samplingModeDirty=!1);this._wrapModeDirty&&(c(k,f),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===m.PixelFormat.DEPTH_STENCIL&&(this._descriptor.internalFormat=m.PixelFormat.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case m.PixelType.FLOAT:switch(this._descriptor.pixelFormat){case m.PixelFormat.RGBA:return this._descriptor.internalFormat=
m.SizedPixelFormat.RGBA32F;case m.PixelFormat.RGB:return this._descriptor.internalFormat=m.SizedPixelFormat.RGB32F;default:throw new a("Unable to derive format");}case m.PixelType.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case m.PixelFormat.RGBA:return this._descriptor.internalFormat=m.SizedPixelFormat.RGBA8;case m.PixelFormat.RGB:return this._descriptor.internalFormat=m.SizedPixelFormat.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===m.PixelFormat.DEPTH_STENCIL?
m.PixelFormat.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const f=this._descriptor.context.gl,{unpackAlignment:k,flipped:q,preMultiplyAlpha:p}=this._descriptor;f.pixelStorei(f.UNPACK_ALIGNMENT,k);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,q?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p?1:0)}_texStorage(f,k,q,p,y,C){const {gl:H}=this._descriptor.context;if(!(k in m.SizedPixelFormat))throw new a("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){q=
q?x(f,p,y,C):1;if(e(f)){if(null==C)throw new a("Missing depth dimension for 3D texture upload");H.texStorage3D(f,q,k,p,y,C)}else H.texStorage2D(f,q,k,p,y);this._wasImmutablyAllocated=!0}}_texImage(f,k,q,p,y,C,H){const E=this._descriptor.context.gl,v=e(f),{isImmutable:I,pixelFormat:F,dataType:t}=this._descriptor;if(I){if(null!=H)if(v){if(null==C)throw new a("Missing depth dimension for 3D texture upload");E.texSubImage3D(f,k,0,0,0,p,y,C,F,t,H)}else E.texSubImage2D(f,k,0,0,p,y,F,t,H)}else if(v){if(null==
C)throw new a("Missing depth dimension for 3D texture upload");E.texImage3D(f,k,q,p,y,C,0,F,t,H)}else E.texImage2D(f,k,q,p,y,0,F,t,H)}_compressedTexImage(f,k,q,p,y,C,H){const E=this._descriptor.context.gl,v=e(f);if(this._descriptor.isImmutable){if(null!=H)if(v){if(null==C)throw new a("Missing depth dimension for 3D texture upload");E.compressedTexSubImage3D(f,k,0,0,0,p,y,C,q,H)}else E.compressedTexSubImage2D(f,k,0,0,p,y,q,H)}else if(v){if(null==C)throw new a("Missing depth dimension for 3D texture upload");
E.compressedTexImage3D(f,k,q,p,y,C,0,H)}else E.compressedTexImage2D(f,k,q,p,y,0,H)}_forEachMipmapLevel(f,k=Infinity){let {width:q,height:p,depth:y,hasMipmap:C,target:H}=this._descriptor;const E=H===m.TextureType.TEXTURE_3D;if(null==q||null==p||E&&null==y)throw new a("Missing texture dimensions for mipmap calculation");for(let v=0;;++v){f(v,q,p,y);if(!C||1===q&&1===p&&(!E||1===y)||v>=k)break;q=Math.max(1,q>>1);p=Math.max(1,p>>1);E&&(y=Math.max(1,y>>1))}}};z.TEXTURE_UNIT_FOR_UPDATES=0;b.Texture=z;b.tracer=
null;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/TextureDescriptor":function(){define(["exports","./enums","./Util"],function(b,a,z){class d{constructor(m=0,B=m){this.width=m;this.height=B;this.target=a.TextureType.TEXTURE_2D;this.pixelFormat=a.PixelFormat.RGBA;this.dataType=a.PixelType.UNSIGNED_BYTE;this.samplingMode=a.TextureSamplingMode.LINEAR;this.wrapMode=a.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=
4;this.preMultiplyAlpha=!1;this.depth=1;this.isImmutable=!1}}b.TextureDescriptor=d;b.estimateMemory=function(m){return 0>=m.width||0>=m.height?0:Math.round(m.width*m.height*(m.hasMipmap?4/3:1)*(null==m.internalFormat?4:z.getBytesPerElementFormat(m.internalFormat))*(m.target===a.TextureType.TEXTURE_CUBE_MAP?6:1))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports","./enums","./TextureDescriptor"],function(b,a,z){class d extends z.TextureDescriptor{constructor(m,
B){super();this.context=m;Object.assign(this,B);switch(this.internalFormat){case a.SizedPixelFormat.R16F:case a.SizedPixelFormat.R16I:case a.SizedPixelFormat.R16UI:case a.SizedPixelFormat.R32F:case a.SizedPixelFormat.R32I:case a.SizedPixelFormat.R32UI:case a.SizedPixelFormat.R8_SNORM:case a.SizedPixelFormat.R8:case a.SizedPixelFormat.R8I:case a.SizedPixelFormat.R8UI:this.pixelFormat=a.PixelFormat.RED}}static validate(m,B){return new d(m,B)}}b.ValidatedTextureDescriptor=d;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/Program":function(){define(["exports","../../core/has","./checkWebGLError","./enums","./ShaderTranspiler"],function(b,a,z,d,m){function B(c,h,r){c=c.gl;const A=c.createShader(h);c.shaderSource(A,r);c.compileShader(A);z.webglValidateShadersEnabled()&&!c.getShaderParameter(A,c.COMPILE_STATUS)&&(console.error("Compile error in ".concat(h===d.ShaderType.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(c.getShaderInfoLog(A)),console.error(l(r)));return A}
function l(c){let h=2;return c.replaceAll("\n",()=>{var r=h++;r=1E3<=r?r.toString():("  "+r).slice(-3);return"\n"+r+":"})}function n(c,h,r){const A=c.get(h);if(!A)return c.set(h,Array.from(r)),!0;const e=r.length;if(A.length!==e)return c.set(h,Array.from(r)),!0;for(c=0;c<e;++c)if(h=r[c],A[c]!==h){for(A[c]=h;c<e;++c)A[c]=r[c];return!0}return!1}class u{constructor(c,h,r,A,e=new Map,x=[]){this._context=c;this._locations=A;this._uniformBlockBindings=e;this._transformFeedbackVaryings=x;this._refCount=
1;this._compiled=!1;this._linesOfCode=0;this._nameToUniformLocation=new Map;this._nameToUniform1=new Map;this._nameToUniform1v=new Map;this._nameToUniform2=new Map;this._nameToUniform3=new Map;this._nameToUniform4=new Map;this._nameToUniformMatrix3=new Map;this._nameToUniformMatrix4=new Map;c||console.error("RenderingContext isn't initialized!");0===h.length&&console.error("Shaders source should not be empty!");h=m.transpileShader(h,d.ShaderType.VERTEX_SHADER);r=m.transpileShader(r,d.ShaderType.FRAGMENT_SHADER);
this._vShader=B(this._context,d.ShaderType.VERTEX_SHADER,h);this._fShader=B(this._context,d.ShaderType.FRAGMENT_SHADER,r);w.enabled&&(this._linesOfCode=h.match(/\n/g).length+r.match(/\n/g).length+2,this._context.instanceCounter.increment(d.ResourceType.LinesOfCode,this._vShader,this._linesOfCode));this._vShader&&this._fShader||console.error("Error loading shaders!");this._context.instanceCounter.increment(d.ResourceType.Shader,this);z.webglValidateShadersEnabled()&&(this.vertexShader=h,this.fragmentShader=
r);this.usedMemory=h.length+r.length;const g=this._context.gl,f=g.createProgram();g.attachShader(f,this._vShader);g.attachShader(f,this._fShader);this._locations.forEach((k,q)=>g.bindAttribLocation(f,k,q));this._transformFeedbackVaryings?.length&&g.transformFeedbackVaryings(f,this._transformFeedbackVaryings,g.SEPARATE_ATTRIBS);g.linkProgram(f);z.webglValidateShadersEnabled()&&!g.getProgramParameter(f,g.LINK_STATUS)&&console.error("Could not link shader\n"+`validated: ${g.getProgramParameter(f,g.VALIDATE_STATUS)}`+
`, gl error ${g.getError()}`+`, vertex: ${g.getShaderParameter(this._vShader,g.COMPILE_STATUS)}`+`, fragment: ${g.getShaderParameter(this._fShader,g.COMPILE_STATUS)}`+`, info log: ${g.getProgramInfoLog(f)}`+`, vertex source: ${this.vertexShader}`+`, fragment source: ${this.fragmentShader}`);for(const [k,q]of this._uniformBlockBindings)c=g.getUniformBlockIndex(f,k),4294967295>c&&g.uniformBlockBinding(f,c,q);this._glName=f;this._context.instanceCounter.increment(d.ResourceType.Program,this)}get glName(){return this._glName}get hasGLName(){return null!=
this._glName}get hasTransformFeedbackVaryings(){return!!this._transformFeedbackVaryings?.length}get compiled(){if(this._compiled)return!0;const c=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==c||null==this.glName?this._compiled=!0:this._compiled=!!this._context.gl.getProgramParameter(this.glName,c.COMPLETION_STATUS_KHR)}dispose(){if(!(0<--this._refCount)){var c=this._context.gl,h=this._context.instanceCounter;this._nameToUniformLocation.forEach(r=>r&&h.decrement(d.ResourceType.Uniform,
r));this._nameToUniformLocation.clear();this._vShader&&(0<this._linesOfCode&&(h.decrement(d.ResourceType.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),c.deleteShader(this._vShader),this._vShader=null,h.decrement(d.ResourceType.Shader,this));this._fShader&&(c.deleteShader(this._fShader),this._fShader=null);this._glName&&(c.deleteProgram(this._glName),this._glName=null,h.decrement(d.ResourceType.Program,this))}}ref(){++this._refCount}_getUniformLocation(c){var h=this._nameToUniformLocation.get(c);
return void 0!==h?h:this.glName?(h=this._context.gl.getUniformLocation(this.glName,c),this._nameToUniformLocation.set(c,h),h&&this._context.instanceCounter.increment(d.ResourceType.Uniform,h),h):null}hasUniform(c){return null!=this._getUniformLocation(c)}setUniform1i(c,h){const r=this._nameToUniform1.get(c);if(void 0===r||h!==r)this._context.gl.uniform1i(this._getUniformLocation(c),h),this._nameToUniform1.set(c,h)}setUniform1iv(c,h){n(this._nameToUniform1v,c,h)&&this._context.gl.uniform1iv(this._getUniformLocation(c),
h)}setUniform2iv(c,h){n(this._nameToUniform2,c,h)&&this._context.gl.uniform2iv(this._getUniformLocation(c),h)}setUniform3iv(c,h){n(this._nameToUniform3,c,h)&&this._context.gl.uniform3iv(this._getUniformLocation(c),h)}setUniform4iv(c,h){n(this._nameToUniform4,c,h)&&this._context.gl.uniform4iv(this._getUniformLocation(c),h)}setUniform1f(c,h){const r=this._nameToUniform1.get(c);if(void 0===r||h!==r)this._context.gl.uniform1f(this._getUniformLocation(c),h),this._nameToUniform1.set(c,h)}setUniform1fv(c,
h){n(this._nameToUniform1v,c,h)&&this._context.gl.uniform1fv(this._getUniformLocation(c),h)}setUniform2f(c,h,r){const A=this._nameToUniform2.get(c);if(void 0===A)this._context.gl.uniform2f(this._getUniformLocation(c),h,r),this._nameToUniform2.set(c,[h,r]);else if(h!==A[0]||r!==A[1])this._context.gl.uniform2f(this._getUniformLocation(c),h,r),A[0]=h,A[1]=r}setUniform2fv(c,h){n(this._nameToUniform2,c,h)&&this._context.gl.uniform2fv(this._getUniformLocation(c),h)}setUniform3f(c,h,r,A){const e=this._nameToUniform3.get(c);
if(void 0===e)this._context.gl.uniform3f(this._getUniformLocation(c),h,r,A),this._nameToUniform3.set(c,[h,r,A]);else if(h!==e[0]||r!==e[1]||A!==e[2])this._context.gl.uniform3f(this._getUniformLocation(c),h,r,A),e[0]=h,e[1]=r,e[2]=A}setUniform3fv(c,h){const r=this._getUniformLocation(c);null!=r&&n(this._nameToUniform3,c,h)&&this._context.gl.uniform3fv(r,h)}setUniform4f(c,h,r,A,e){const x=this._nameToUniform4.get(c);if(void 0===x)this._context.gl.uniform4f(this._getUniformLocation(c),h,r,A,e),this._nameToUniform4.set(c,
[h,r,A,e]);else if(void 0===x||h!==x[0]||r!==x[1]||A!==x[2]||e!==x[3])this._context.gl.uniform4f(this._getUniformLocation(c),h,r,A,e),x[0]=h,x[1]=r,x[2]=A,x[3]=e}setUniform4fv(c,h){const r=this._getUniformLocation(c);null!=r&&n(this._nameToUniform4,c,h)&&this._context.gl.uniform4fv(r,h)}setUniformMatrix3fv(c,h,r=!1){const A=this._getUniformLocation(c);null!=A&&n(this._nameToUniformMatrix3,c,h)&&this._context.gl.uniformMatrix3fv(A,r,h)}setUniformMatrix4fv(c,h,r=!1){const A=this._getUniformLocation(c);
null!=A&&n(this._nameToUniformMatrix4,c,h)&&this._context.gl.uniformMatrix4fv(A,r,h)}stop(){}}const w={enabled:!1};b.Program=u;b.test=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../core/has","./enums","./reservedWordsGLSL3","./testUtils"],function(b,a,z,d,m){function B(){function k(J){J.length&&K.push({type:x[F],data:J,position:M,line:L,column:Q})}function q(){G=G.length?[]:G;if("/"===D&&"*"===t)return M=I+
v-1,F=0,D=t,v+1;if("/"===D&&"/"===t)return M=I+v-1,F=1,D=t,v+1;if("#"===t)return F=2,M=I+v,v;if(/\s/.test(t))return F=9,M=I+v,v;R=/\d/.test(t);S=/[^\w_]/.test(t);M=I+v;F=R?4:S?3:9999;return v}function p(){if(("\r"===t||"\n"===t)&&"\\"!==D)return k(G.join("")),F=999,v;G.push(t);D=t;return v+1}function y(){if("."===D&&/\d/.test(t))return F=5,v;if("/"===D&&"*"===t)return F=0,v;if("/"===D&&"/"===t)return F=1,v;if("."===t&&G.length){for(;C(G););F=5;return v}if(";"===t||")"===t||"("===t){if(G.length)for(;C(G););
k(t);F=999;return v+1}var J=2===G.length&&"\x3d"!==t;if(/[\w_\d\s]/.test(t)||J){for(;C(G););F=999;return v}G.push(t);D=t;return v+1}function C(J){var O=0;do{var T=A.indexOf(J.slice(0,J.length+O).join(""));var P=A[T];if(-1===T){if(0<O--+J.length)continue;P=J.slice(0,1).join("")}k(P);M+=P.length;G=G.slice(P.length);return G.length}while(1)}function H(){if("."===t||/[eE]/.test(t))return G.push(t),F=5,D=t,v+1;if("x"===t&&1===G.length&&"0"===G[0])return F=11,G.push(t),D=t,v+1;if(/[^\d]/.test(t))return k(G.join("")),
F=999,v;G.push(t);D=t;return v+1}function E(){"f"===t&&(G.push(t),D=t,v+=1);if(/[eE]/.test(t)||"-"===t&&/[eE]/.test(D))return G.push(t),D=t,v+1;if(/[^\d]/.test(t))return k(G.join("")),F=999,v;G.push(t);D=t;return v+1}var v=0,I=0,F=999,t,D,G=[],K=[],L=1,Q=0,M=0,R=!1,S=!1,N="",U;return function(J){K=[];if(null!==J){J=J.replace?J.replace(/\r\n/g,"\n"):J;v=0;N+=J;for(U=N.length;t=N[v],v<U;){J=v;switch(F){case 0:"/"===t&&"*"===D?(G.push(t),k(G.join("")),F=999):(G.push(t),D=t);v+=1;break;case 1:v=p();break;
case 2:v=p();break;case 3:v=y();break;case 4:v=H();break;case 11:/[^a-fA-F0-9]/.test(t)?(k(G.join("")),F=999):(G.push(t),D=t,v+=1);break;case 5:v=E();break;case 9999:if(/[^\d\w_]/.test(t)){var O=G.join("");F=-1<r.indexOf(O)?8:-1<e.indexOf(O)?7:6;k(G.join(""));F=999}else G.push(t),D=t,v+=1;break;case 9:/[^\s]/g.test(t)?(k(G.join("")),F=999):(G.push(t),D=t,v+=1);break;case 999:v=q()}if(J!==v)switch(N[J]){case "\n":Q=0;++L;break;default:++Q}}I+=v;N=N.slice(v);return K}G.length&&k(G.join(""));F=10;k("(eof)");
return K}}function l(k){return k.map(q=>"eof"!==q.type?q.data:"").join("")}function n(k,q="100",p="300 es"){const y=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const C of k)if("preprocessor"===C.type){const H=y.exec(C.data);if(H){k=H[1].replaceAll(/\s{2,}/g," ");if(k===p)return k;if(k===q)return C.data="#version "+p,q;throw Error("unknown glsl version: "+k);}}k.splice(0,0,{type:"preprocessor",data:"#version "+p},{type:"whitespace",data:"\n"});return null}function u(k,q,p,y){y=y||p;for(const C of k)if("ident"===
C.type&&C.data===p)return y in q?q[y]++:q[y]=0,u(k,q,y+"_"+q[y],y);return p}function w(k,q,p="afterVersion"){const y={data:"\n",type:"whitespace"},C=E=>E<k.length?/[^\r\n]$/.test(k[E].data):!1;let H=function(E){let v=-1,I=0,F=-1;for(let D=0;D<E.length;D++){var t=E[D];"preprocessor"===t.type&&(/#(if|ifdef|ifndef)\s+.+/.test(t.data)?++I:/#endif\s*.*/.test(t.data)&&--I);("afterVersion"===p||"afterPrecision"===p)&&"preprocessor"===t.type&&t.data.startsWith("#version")&&(F=Math.max(F,D));if("afterPrecision"===
p&&"keyword"===t.type&&"precision"===t.data){a:{for(t=D;t<E.length;t++){const G=E[t];if("operator"===G.type&&";"===G.data)break a}t=null}if(null===t)throw Error("precision statement not followed by any semicolons!");F=Math.max(F,t)}v<F&&0===I&&(v=D)}return v+1}(k);C(H-1)&&k.splice(H++,0,y);for(const E of q)k.splice(H++,0,E);C(H-1)&&C(H)&&k.splice(H,0,y)}function c(k,q,p,y="lowp"){w(k,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",data:" "},{type:"keyword",
data:p},{type:"whitespace",data:" "},{type:"ident",data:q},{type:"operator",data:";"}],"afterPrecision")}function h(k,q,p,y,C="lowp"){w(k,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:y.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:C},{type:"whitespace",
data:" "},{type:"keyword",data:p},{type:"whitespace",data:" "},{type:"ident",data:q},{type:"operator",data:";"}],"afterPrecision")}const r="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" "),
A="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" "),e="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT textureSize texelFetch".split(" ");
var x="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const g=new Set(["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"]),f=new Map;b.transpileShader=function(k,q){if(k.startsWith("#version 300"))return k;var p=m.shaderTranspiler.enableCache?f.get(k):null;if(null!=p)return p;p=B();var y=[];y=y.concat(p(k));p=y=y.concat(p(null));if("300 es"===n(p,"100","300 es"))return k;var C=
y=null;const H={},E={};for(let t=0;t<p.length;++t){const D=p[t];switch(D.type){case "keyword":q===z.ShaderType.VERTEX_SHADER&&"attribute"===D.data?D.data="in":"varying"===D.data&&(D.data=q===z.ShaderType.VERTEX_SHADER?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(D.data.trim())&&(D.data=D.data.replaceAll(/(2D|Cube|EXT)/g,""));q===z.ShaderType.FRAGMENT_SHADER&&"gl_FragColor"===D.data&&(y||(y=u(p,H,"fragColor"),c(p,y,"vec4")),D.data=y);if(q===z.ShaderType.FRAGMENT_SHADER&&
"gl_FragData"===D.data){var v=void 0;let G=void 0;var I=p,F=t+1;let K=-1;for(;F<I.length;F++){const L=I[F];if("operator"===L.type&&("["===L.data&&(G=F),"]"===L.data)){v=F;break}"integer"===L.type&&(K=parseInt(L.data,10))}G&&v&&I.splice(G,v-G+1);I=K;v=u(p,H,"fragData");h(p,v,"vec4",I,"mediump");D.data=v}else q===z.ShaderType.FRAGMENT_SHADER&&"gl_FragDepthEXT"===D.data&&(C||=u(p,H,"gl_FragDepth"),D.data=C);break;case "ident":if(d.includes(D.data)){if(I=q===z.ShaderType.VERTEX_SHADER)a:{for(I=t-1;0<=
I;I--)if(v=p[I],"whitespace"!==v.type&&"block-comment"!==v.type)if("keyword"===v.type){if("attribute"===v.data||"in"===v.data){I=!0;break a}}else break;I=!1}if(I)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");D.data in E||(E[D.data]=u(p,H,D.data));D.data=E[D.data]}}}for(q=p.length-1;0<=q;--q)y=p[q],"preprocessor"===y.type&&(C=y.data.match(/#extension\s+(.*):/),C?.[1]&&g.has(C[1].trim())&&(C=p[q+1],p.splice(q,C&&"whitespace"===C.type?2:1)),C=y.data.match(/#ifdef\s+(.*)/),
C?.[1]&&g.has(C[1].trim())&&(y.data="#if 1"),C=y.data.match(/#ifndef\s+(.*)/),C?.[1]&&g.has(C[1].trim())&&(y.data="#if 0"));p=l(p);m.shaderTranspiler.enableCache&&f.set(k,p);return p};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/testUtils":function(){define(["exports"],function(b){b.shaderTranspiler={enableCache:!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ProgramCache":function(){define(["exports","../../core/has","../../core/NestedMap","./Program"],function(b,a,z,d){class m{constructor(B){this._rctx=B;this._store=new z.NestedMap}dispose(){this._store.forAll(B=>B.dispose());this._store.clear()}acquire(B,l,n,u){const w=this._store.get(B,l);if(null!=w)return w.ref(),
w;n=new d.Program(this._rctx,B,l,n,u);n.ref();this._store.set(B,l,n);return n}get test(){}}b.ProgramCache=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/NestedMap":function(){define(["exports"],function(b){class a{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(z,d){return this._outer.get(z)?.get(d)}getInner(z){return this._outer.get(z)}set(z,d,m){const B=this._outer.get(z);B?B.set(d,m):this._outer.set(z,new Map([[d,
m]]))}delete(z,d){const m=this._outer.get(z);m&&(m.delete(d),0===m.size&&this._outer.delete(z))}forEach(z){this._outer.forEach((d,m)=>z(d,m))}forAll(z){for(const d of this._outer.values())for(const m of d.values())z(m)}}b.NestedMap=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(b){class a{constructor(z){this._readFile=z}resolveIncludes(z){return this._resolve(z)}_resolve(z,d=new Map){if(d.has(z))return d.get(z);
const m=this._read(z);if(!m)throw Error(`cannot find shader file ${z}`);const B=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let l=B.exec(m);const n=[];for(;null!=l;)n.push({path:l[1],start:l.index,length:l[0].length}),l=B.exec(m);let u=0,w="";n.forEach(c=>{w+=m.slice(u,c.start);w+=d.has(c.path)?"":this._resolve(c.path,d);u=c.start+c.length});w+=m.slice(u);d.set(z,w);return w}_read(z){return this._readFile(z)}}b.ShaderCompiler=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexArrayObject":function(){define("exports ../../core/Logger ../../core/maybe ../../core/typedArrayUtil ./enums ./Util".split(" "),
function(b,a,z,d,m,B){const l=()=>a.getLogger("esri.views.webgl.VertexArrayObject");b.VertexArrayObject=class{constructor(n,u,w,c,h=null){this._context=n;this._locations=u;this._layout=w;this._buffers=c;this._indexBuffer=h;this._glName=null;this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce((n,u)=>n+u.usedMemory,null!=
this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*d.typedArrayStaticSize}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach(n=>n.dispose()),this._buffers.clear(),this._indexBuffer=z.disposeMaybe(this._indexBuffer),this.disposeVAOOnly()):(this._glName||0<Object.getOwnPropertyNames(this._buffers).length)&&
l().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(m.ResourceType.VertexArrayObject,this));this._context=null}initialize(){if(!this._initialized){var {gl:n}=this._context,u=n.createVertexArray();n.bindVertexArray(u);this._bindLayout();n.bindVertexArray(null);this._glName=u;this._context.instanceCounter.increment(m.ResourceType.VertexArrayObject,this);this._initialized=!0}}bind(){this.initialize();
this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const {_buffers:n,_layout:u,_indexBuffer:w}=this;n||l().error("Vertex buffer dictionary is empty!");const c=this._context.gl;this._buffers.forEach((h,r)=>{(r=u.get(r))?B.bindVertexBufferLayout(this._context,this._locations,h,r):l().error("Vertex element descriptor is empty!")});null!=w&&c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,w.glName)}unbind(){this.initialize();this._context.gl.bindVertexArray(null)}};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(b){b.glslifyDefineMap=function(a){let z="";for(const m in a){var d=a[m];if("boolean"===typeof d)d&&(z+=`#define ${m}\n`);else if("number"===typeof d)z+=`#define ${m} ${d.toFixed()}\n`;else if("object"===typeof d){const {options:B,value:l}=d;if("number"===typeof B[l]){const {value:n,options:u,namespace:w}=d;d=w?`${w}_`:"";for(const c in u)z+=`#define ${d}${c} ${u[c].toFixed()}\n`;z+=`#define ${m} ${d}${n}\n`}else{const n=
d.options;let u=0;for(const w in n)z+=`#define ${n[w]} ${(u++).toFixed()}\n`;z+=`#define ${m} ${n[d.value]}\n`}}}return z};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ProgramTemplate":function(){define(["exports","./Program"],function(b,a){b.createProgram=function(z,d,m=""){return new a.Program(z,m+d.shaders.vertexShader,m+d.shaders.fragmentShader,d.attributes)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../webgl/BufferObject ../webgl/FramebufferObject ../webgl/Program ../webgl/ProgramCache ../webgl/Renderbuffer ../webgl/ShaderCompiler ../webgl/Texture ../webgl/VertexArrayObject ../webgl/programUtils ../webgl/ProgramTemplate".split(" "),function(b,a,z,d,m,B,l,n,u,w,c){b.BufferObject=a.BufferObject;b.FramebufferObject=z.FramebufferObject;b.Program=d.Program;b.ProgramCache=m.ProgramCache;b.Renderbuffer=B.Renderbuffer;b.ShaderCompiler=l.ShaderCompiler;b.Texture=n.Texture;b.VertexArrayObject=
u.VertexArrayObject;b.glslifyDefineMap=w.glslifyDefineMap;b.createProgram=c.createProgram;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});