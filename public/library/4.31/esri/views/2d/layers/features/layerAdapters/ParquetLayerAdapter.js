// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ./featureReductionUtils ./geometryUtils ./labelingUtils ../schema/processor/SimpleProcessorSchema ../support/rendererUtils".split(" "),function(g,h,k,c,l,m){class n{constructor(b){this.layer=b}get hasRequiredSupport(){return m.isRendererSupported(this.layer.renderer)}get timeOptions(){return null}getLabelingDeconflictionInfo(b){const a=this.layer;b=c.getFeatureReductionDeconflictionEnabled(a,b)??c.getLayerDeconflictionEnabled(a);return[{vvEvaluators:{0:c.createLabelVVEvaluator(a.renderer)},
deconflictionEnabled:b}]}getUpdateHashProperties(b){var a=this.layer;const {renderer:d}=a,e=this.layer.labelsVisible?this.layer.labelingInfo:null,f=JSON.stringify(a.customParameters);b=h.getEffectiveFeatureReduction(a,b);a=JSON.stringify(a.orderBy);return{outFields:this.layer.outFields,labelingInfo:e,featureReduction:b,customParameters:f,orderBy:a,renderer:d}}async createServiceOptions(b){const a=k.getServiceGeometryType(this.layer);return{type:"parquet",source:{urls:this.layer.urls.items},outSpatialReference:b.spatialReference.toJSON(),
geometryInfo:this.layer.source.geometryInfo,metadata:{spatialReference:this.layer.spatialReference,fieldsIndex:this.layer.fieldsIndex.toJSON(),objectIdField:this.layer.objectIdField,geometryType:a,types:null,subtypes:null,timeInfo:null,typeIdField:null,subtypeField:null,globalIdField:null,timeReferenceUnknownClient:null}}}createSourceSchema(b,a){return{type:"parquet",mutable:{sourceRefreshVersion:a,availableFields:b.availableFields,dataFilter:{customParameters:this.layer.customParameters??null}}}}createProcessorSchema(b,
a,d){const e={fields:this.layer.fields.map(f=>f.toJSON()),renderer:this.layer.renderer?.clone(),featureReduction:h.getEffectiveFeatureReduction(this.layer,a),geometryType:this.layer.geometryType,labelingInfo:this.layer.labelingInfo,labelsVisible:this.layer.labelsVisible,objectIdField:this.layer.objectIdField,orderBy:this.layer.orderBy};return l.createSimpleProcessorSchema(b,a,e,d)}}g.ParquetLayerAdapter=n;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});