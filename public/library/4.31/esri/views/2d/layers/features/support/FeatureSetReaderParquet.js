// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/has","../../../../../geometry/support/webMercatorUtils","../../../../../layers/graphics/OptimizedGeometry","./FeatureSetReader"],function(d,n,g,h,k){class e extends k.FeatureSetReader{constructor(a,b,c,f,l,m=new Uint32Array(f.size())){super(a);this._fields=b;this._geometryInfo=c;this._inner=f;this._chunkId=l;this._displayIds=m;this._index=-1;this._size=this._inner.size();"geometry"===this._geometryInfo.type&&(this._primaryGeometryIndex=this._fields.get(this._geometryInfo.primaryFieldName)?.index);
null!=a.objectIdField&&(this._objectIdFieldIndex=this._fields.get(a.objectIdField)?.index);65535<this._chunkId&&console.error("Exceeded max allowed parquet reader size")}destroy(){super.destroy();this._inner.free()}get fields(){return this._fields}get geometryType(){return"esriGeometryPoint"}get hasFeatures(){return!0}get hasNext(){throw Error("Method not implemented.");}get exceededTransferLimit(){return!1}get hasZ(){return!1}get hasM(){return!1}getInTransform(){return null}getSize(){return this._size}getCursor(){return this.copy()}getAttributeHash(){let a=
"";for(const b of this.fields.fields)a+=this._readAttribute(b.name,!1)+".";return a}getObjectId(){return null!=this._objectIdFieldIndex?this._inner.readAttribute(this._index,this._objectIdFieldIndex):this._index<<16|this._chunkId}getDisplayId(){return this._displayIds[this._index]}setDisplayId(a){this._displayIds[this._index]=a}setIndex(a){this._index=a}getIndex(){return this._index}next(){for(;++this._index<this._size&&!this._getExists(););return this._index<this._size}readGeometryArea(){throw Error("Method not implemented.");
}copy(){const a=new e(this.metadata,this._fields,this._geometryInfo,this._inner,this._chunkId,this._displayIds);this.copyInto(a);return a}copyInto(a){super.copyInto(a);a._index=this._index}_readGeometry(a){a=g.lngLatToXY(this._inner.readX(this._index),this._inner.readY(this._index));return new h([],a)}_readX(){return this._readGeometry()?.coords[0]}_readY(){return this._readGeometry()?.coords[1]}_readServerCentroid(){return null}_readAttribute(a,b){var c=this.fields.get(a);if(c){a=this._inner.readAttribute(this._index,
c.index);if(null==a)return a;c=this.fields.isDateField(c.name);return b&&null!=a?c?new Date(a):a:a}}_readAttributes(){const a={};for(const b of this._fields.fields)this._inner.hasField(b.index)&&b.index!==this._primaryGeometryIndex&&(a[b.name]=this._readAttribute(b.name,!1));null==this._objectIdFieldIndex&&(a.__OBJECTID=this.getObjectId());return a}}d.FeatureSetReaderParquet=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});