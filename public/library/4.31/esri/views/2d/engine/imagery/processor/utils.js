// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../../../webgl/rasterUtils"],function(h,l){function m(b,d,f,a){const {context:e,rasterFunction:c,hasBranches:g}=b;({raster:b}=c.parameters);b=[f.functionTextures[g?b?.id??-1:0]??f.rasterTexture];const k=["u_image"];a&&(a=l.createColormapTexture(e,a),f.functionTextures[100]=a,b.push(a),k.push("u_colormap"));l.setTextures(e,d,k,b)}const n=[1,1],p=[2,0,0,0,2,0,-1,-1,0];h.setCoordsAndTransforms=function(b){b.setUniform2fv("u_coordScale",n);b.setUniformMatrix3fv("u_dvsMat3",p)};h.setMultipleImageTextures=
function(b,d,f){var {rasters:a}=b.rasterFunction.parameters;if(a){if(2>a.length)return m(b,d,f);var e=a.filter(c=>"Constant"!==c.name).map(c=>null!=c.id&&"Identity"!==c.name?f.functionTextures[c.id]:f.rasterTexture);l.setTextures(b.context,d,["u_image","u_image1","u_image2"].slice(0,e.length),e);if(e.length!==a.length)if(2===a.length)e=a.findIndex(c=>"Constant"===c.name),b=0===e?[0,1,0,1,0,0,0,0,0]:[1,0,0,0,1,0,0,0,0],{value:a}=a[e].parameters,d.setUniform1f("u_image1Const",a),d.setUniformMatrix3fv("u_imageSwap",
b);else if(3===a.length){const c=[];a.forEach((g,k)=>"Constant"===g.name&&c.push(k));1===c.length?({value:a}=a[c[0]].parameters,d.setUniform1f("u_image1Const",a),d.setUniformMatrix3fv("u_imageSwap",0===c[0]?[0,1,0,0,0,1,1,0,0]:1===c[0]?[1,0,0,0,0,1,0,1,0]:[1,0,0,0,1,0,0,0,1])):2===c.length&&({value:b}=a[c[0]].parameters,d.setUniform1f("u_image1Const",b),{value:b}=a[c[1]].parameters,d.setUniform1f("u_image2Const",b),a=a.findIndex(g=>"Constant"!==g.name),d.setUniformMatrix3fv("u_imageSwap",0===a?[1,
0,0,0,1,0,0,0,1]:1===a?[0,1,0,1,0,0,0,0,1]:[0,0,1,1,0,0,0,1,0]))}}};h.setSingleImageTextures=m;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});