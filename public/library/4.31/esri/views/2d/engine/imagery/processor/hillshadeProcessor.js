// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["./utils"],function(g){const m={vsPath:"raster/rfx/vs",fsPath:"raster/hillshade",attributes:new Map([["a_position",0],["a_texcoord",1]])};return{createProgram:function(c,a){({indexedColormap:a}=c.rasterFunction.parameters);const d=[];a?.length&&d.push("applyColormap");return c.painter.materialManager.getProgram(m,d)},bindTextureAndUniforms:function(c,a,d){const b=c.rasterFunction.parameters,{indexedColormap:f}=b;g.setSingleImageTextures(c,a,d,f);g.setCoordsAndTransforms(a);c=d.getRasterTextureSize();
a.setUniform2fv("u_srcImageSize",c);var e=d.getRasterCellSize();a.setUniform2fv("u_cellSize",e);({pixelSizeFactor:d}=b);if(0===d)a.setUniform2fv("u_factor",[b.factor[0]/e[0],b.factor[1]/e[1]]);else{const {zFactor:h,pixelSizePower:k,gcsFactor:l}=b;c=e[0]*l;e=e[1]*l;a.setUniform2fv("u_factor",[(h+c**k*d)/(8*c),(h+e**k*d)/(8*e)])}a.setUniform1i("u_hillshadeType",b.hillshadeType);a.setUniform1fv("u_sinZcosAs",b.sinZcosAs);a.setUniform1fv("u_sinZsinAs",b.sinZsinAs);a.setUniform1fv("u_cosZs",b.cosZs);a.setUniform1fv("u_weights",
b.weights);a.setUniform1f("u_opacity",1);a.setUniform1i("u_flipY",0);a.setUniform1f("u_scaling",255);a.setUniform1f("u_minValue",b.minValue);a.setUniform1f("u_maxValue",b.maxValue);f&&(a.setUniform1f("u_colormapOffset",b.offset),a.setUniform1f("u_colormapMaxIndex",f.length/4-1))}}});