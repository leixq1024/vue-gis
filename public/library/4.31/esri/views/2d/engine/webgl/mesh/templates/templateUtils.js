// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/earcut ../../../../../../geometry/libtess ../../../../../../geometry/support/TileClipper ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../bufcut".split(" "),function(m,w,x,q,y,r,z){function t(b,a,d){let h=0;for(let c=1;c<d;c++)h+=(b[2*(a+c)]-b[2*(a+c-1)])*(b[2*(a+c)+1]+b[2*(a+c-1)+1]);return h}function v(b,a,d,h,c){let k=0;for(;d<h;d+=3){const e=2*(b[d]-c),g=2*(b[d+1]-c),f=2*(b[d+2]-c);k+=Math.abs((a[e]-a[f])*(a[g+1]-a[e+1])-(a[e]-a[g])*
(a[f+1]-a[e+1]))}return k}const n=new q.TileClipper(0,0,0,1,0),p=new q.TileClipper(0,0,0,1,0);n.setExtent(r.tileSize);p.setExtent(r.tileSize);m.area=t;m.clipLinesMarshall=function(b,a){p.setPixelMargin(a);const d=-a;a=r.tileSize+a;let h=[];var c=!1;if(!b.nextPath())return null;let k=!0;for(;k;){b.seekPathStart();const e=[];if(!b.pathSize)return null;p.reset(q.GeometryType.LineString);b.nextPoint();let g=b.x,f=b.y;if(c)p.moveTo(g,f);else{if(g<d||g>a||f<d||f>a){c=!0;continue}e.push({x:g,y:f})}let l=
!1;for(;b.nextPoint();)if(g=b.x,f=b.y,c)p.lineTo(g,f);else{if(g<d||g>a||f<d||f>a){l=!0;break}e.push({x:g,y:f})}if(l)c=!0;else{if(c){if(c=p.resultWithStarts())for(const u of c)h.push(u)}else h.push({line:e,start:0});k=b.nextPath();c=!1}}h=h.filter(e=>1<e.line.length);return 0===h.length?null:h};m.clipMarshall=function(b,a){if(null==b)return null;a:{var d=r.tileSize+128;var h=0;for(var c=0;c<b.lengths.length;c++){var k=b.lengths[c];for(var e=0;e<k;e++){const g=b.coords[2*(e+h)],f=b.coords[2*(e+h)+1];
if(-128>g||g>d||-128>f||f>d){d=!0;break a}}h+=k}d=!1}if(!d)return b;n.setPixelMargin(a);n.reset(q.GeometryType.Polygon);a=0;for(d=0;d<b.lengths.length;d++){h=b.lengths[d];c=b.coords[2*(0+a)];k=b.coords[2*(0+a)+1];n.moveTo(c,k);for(e=1;e<h;e++)c=b.coords[2*(e+a)],k=b.coords[2*(e+a)+1],n.lineTo(c,k);n.close();a+=h}d=n.result(!1);if(!d)return null;b=[];a=[];for(const g of d){d=0;for(const f of g)a.push(f.x),a.push(f.y),d++;b.push(d)}return new y(b,a)};m.triangleAreaArray=v;m.triangulate=function(b,a){const {coords:d,
lengths:h}=a;a=0;for(var c=0;c<h.length;){let g=c,f=h[c];c=t(d,a,f);for(var k=[];++g<h.length;){var e=h[g];const l=t(d,a+f,e);if(!(0<l))break;c+=l;k.push(a+f);f+=e}e=b.length;z.bufcut(b,d,a,a+f,k,2,0);k=v(b,d,e,b.length,0);c=Math.abs(c);if(1E-5<Math.abs((k-c)/Math.max(1E-7,c)))return b.length=0,!1;c=g;a+=f}return!0};m.triangulateEarcut=function(b,a,d){const {coords:h,lengths:c}=a;let k=0;for(var e=0;e<c.length;){let f=e,l=c[e];for(e=[];++f<c.length;){var g=c[f];if(!(0<t(h,k+l,g)))break;e.push(k+l-
k);l+=g}g=a.coords.slice(2*k,2*(k+l));e=w.earcut(g,e,2);for(const u of e)b.push(u+d+k);e=f;k+=l}return!0};m.triangulateLibtess=function(b){const {coords:a,lengths:d}=b;({buffer:b}=x.triangulate(a,d));return b};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});