// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../Color","../grouping","./infos","./instructions"],function(k,t,q,u,v){function r(a){const b=[],c=[];let g=0;for(const d of a){const h=[...d.encode(),...v.instructions.ret.encode()];b.push([g+a.length,0,0,0]);c.push(...h);g+=h.length}return[...b,...c]}async function n(a,b){if("number"===typeof a||"string"===typeof a||"boolean"===typeof a)var c=a;else if(Array.isArray(a))c=await Promise.all(a.map(g=>n(g,b)));else if("object"===typeof a)if("valueExpressionInfo"in a)({valueExpressionInfo:c}=
a),{expression:c}=c,c={...a,computed:await b.createComputedField({expression:c})};else{c={};for(const g in a)c[g]=await n(a[g],b)}return c}function f(a,b,c){function g(e){if(!("computed"in e))return e;e=e.computed.readWithDefault(b,c,[255*e.defaultValue[0],255*e.defaultValue[1],255*e.defaultValue[2],e.defaultValue[3]]);if("string"===typeof e){const l=t.fromString(e);l&&(e=[l.r,l.g,l.b,l.a])}return e}if("number"===typeof a||"string"===typeof a||"boolean"===typeof a)var d=a;else if(Array.isArray(a))d=
a.map(e=>f(e,b,c));else if("object"===typeof a)if("type"in a&&null!=a.type&&"Process"===a.type)switch(a.op){case "ArcadeColor":a=f(a.value,b,c);m(Array.isArray(a)&&4===a.length);d=[a[0]/255,a[1]/255,a[2]/255,a[3]];break;case "Transparency":a=f(a.value,b,c);m("number"===typeof a);d=1-a/100;break;case "Divide":d=f(a.left,b,c);m("number"===typeof d);a=f(a.right,b,c);m("number"===typeof a);d/=a;break;case "Random":d=f(a.seed,b,c);var h=f(a.min,b,c);a=f(a.max,b,c);var p=b.getObjectId();p=q.getStartGroup(p||
0);d=h+q.getRandomValue(p,d)*(a-h)}else if("computed"in a)d=g(a);else for(h in d={},a)d[h]=f(a[h],b,c);return d}function m(a){if(!a)throw Error("Assertion failed.");}k.assert=m;k.compileAnimationParam=n;k.createParamList=function(a){const b=[];b.push(a.transform);b.push(a.fromColor);b.push(a.toColor);b.push(a.colorMix);b.push(a.toOpacity);b.push(a.opacityMix);return b};k.encodeParamList=r;k.fromJSON=function(a){a=a.map(b=>f(b)).map(b=>u.hydrate(b).simplify());return r(a)};k.resolveToAnimationInfo=
f;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});