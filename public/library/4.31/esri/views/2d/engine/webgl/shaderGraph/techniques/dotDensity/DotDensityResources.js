// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../../core/RandomLCG ../../../definitions ../../../meshing/SimpleMesh ../../../../../../webgl/enums ../../../../../../webgl/FramebufferObject ../../../../../../webgl/Renderbuffer ../../../../../../webgl/RenderbufferDescriptor ../../../../../../webgl/Texture ../../../../../../webgl/TextureDescriptor".split(" "),function(l,n,k,p,e,q,r,t,u,m){const v={pos:{count:2,type:e.DataType.UNSIGNED_SHORT}};class w{constructor(){this._dotTextureSize=0;this._dotMesh=this._dotTextures=
null}destroy(){this._disposeTextures();this._dotFBO&&this._dotFBO.dispose();this._dotMesh&&this._dotMesh.destroy()}getFBO(c){if(null==this._dotFBO){var b=k.tileSize;const a=k.tileSize,d=new m.TextureDescriptor(b,a);d.samplingMode=e.TextureSamplingMode.NEAREST;d.wrapMode=e.TextureWrapMode.CLAMP_TO_EDGE;b=new r.Renderbuffer(c,new t.RenderbufferDescriptor(e.RenderbufferFormat.DEPTH_STENCIL,b,a));this._dotFBO=new q.FramebufferObject(c,d,b)}return this._dotFBO}getDotDensityMesh(c,b){if(null==this._dotMesh){const a=
k.tileSize,d=a*a,f=new Int16Array(2*d);for(let g=0;g<a;g++)for(let h=0;h<a;h++)f[2*(h+g*a)]=h,f[2*(h+g*a)+1]=g;this._dotMesh=p.SimpleMesh.create(c,{primitive:e.PrimitiveType.POINTS,vertex:f,count:d,layout:v},b)}return this._dotMesh}getDotDensityTextures(c,b,a){if(this._dotTextureSize!==b||this._seed!==a)this._disposeTextures(),this._dotTextureSize=b,this._seed=a;null===this._dotTextures&&(a=new n(a),this._dotTextures=[this._allocDotDensityTexture(c,b,a),this._allocDotDensityTexture(c,b,a)]);return this._dotTextures}_disposeTextures(){if(this._dotTextures){for(let c=
0;c<this._dotTextures.length;c++)this._dotTextures[c].dispose();this._dotTextures=null}}_allocDotDensityTexture(c,b,a){const d=new Float32Array(b*b*4);for(let f=0;f<d.length;f++)d[f]=a.getFloat();a=new m.TextureDescriptor;a.dataType=e.PixelType.FLOAT;a.samplingMode=e.TextureSamplingMode.NEAREST;a.width=b;a.height=b;return new u.Texture(c,a,d)}}l.DotDensityResources=w;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});