// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ./definitions ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject ../../../../webgl/VertexElementDescriptor".split(" "),function(m,r,n,h,t,u){class v{constructor(c,a){this._boundPart=null;this.vertexBuffers=new Map;for(const [b,e]of Object.entries(a.vertex)){var f=n.BufferObject.createVertex(c,h.Usage.STATIC_DRAW,e);this.vertexBuffers.set(b,f)}f=new Map;for(const [b,e]of Object.entries(a.index??{})){var d=n.BufferObject.createIndex(c,h.Usage.STATIC_DRAW,
e);f.set(b,d)}this.groups=[];for(const b of a.groups){let e;if(null!=b.index){if(!a.index?.[b.index])throw Error("No index data.");({BYTES_PER_ELEMENT:d}=a.index[b.index]);2===d?e=h.DataType.UNSIGNED_SHORT:4===d&&(e=h.DataType.UNSIGNED_INT)}var g=null!=b.index?f.get(b.index):null;d=new Map;const k=new Map;for(const w of b.attributes){const {name:p,count:x,type:y,offset:z,normalized:A,divisor:B,stride:C,vertex:q,location:D}=w;let l=k.get(q);l||(l=[],k.set(q,l));const E=new u.VertexElementDescriptor(p,
x,y,z,C,A,B);l.push(E);d.set(p,D)}g=new t.VertexArrayObject(c,d,k,this.vertexBuffers,g);this.groups.push({...b,vertexArray:g,locations:d,layout:k,indexing:e})}this.parts=a.parts}bind(c,a){this._boundPart=a;({group:a}=this.parts[this._boundPart]);({vertexArray:a}=this.groups[a]);c.bindVAO(a)}draw(c){if(null==this._boundPart)throw Error("Mesh.bind() has not been called.");const {start:a,count:f}=this.parts[this._boundPart],{group:d}=this.parts[this._boundPart],{indexing:g,primitive:b}=this.groups[d];
g?c.drawElements(b,f,g,a*r.dataSizeInBytes[g]):c.drawArrays(b,a,f)}unbind(c){this._boundPart=null;c.bindVAO(null)}destroy(){for(const {vertexArray:c}of this.groups)c.dispose()}}m.Mesh=v;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});