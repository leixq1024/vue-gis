// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../../core/libs/gl-matrix-2/math/mat3 ../../../../../../../core/libs/gl-matrix-2/factories/mat3f32 ../../../../../../../symbols/cim/animationDebugFlags ../FeatureTechnique ../featureTechniqueUtils".split(" "),function(h,k,l,q,r,d){class t extends r.FeatureTechnique{render(a,b){const {context:m,painter:c}=a,{target:n}=b,{freezeGlobalTime:e}=q.animationDebugFlags,f=c.textureManager.animationStore.getTexture(m,0),p=[2/a.state.size[0],0,0,0,-2/a.state.size[1],0,-1,1,1];
var g=Array.from(k.invert(l.create(),p));g=Array.from(k.multiply(l.create(),g,n.transforms.displayViewScreenMat3));const u=b.instance.getInput();c.setShader({shader:this.shaders.geometry,uniforms:{...d.resolveDynamicUniforms(a,b.target,u.uniforms),...d.getFeatureUniforms(a,b.target),mosaicInfo:c.textureManager.getMosaicInfo(m,b.textureKey,!0),animationInfo:{globalTime:!1===e?a.time/1E3:e,animationTextureSize:[f.descriptor.width,f.descriptor.height],animationTexture:{unit:6,texture:f},toScreen:g,toNdc:p,
mapRotation:a.state.rotation,pixelRatio:a.state.pixelRatio}},defines:{...d.getSelectionDefines(a)},optionalAttributes:{zoomRange:!0},useComputeBuffer:!0});c.setPipelineState({...d.getFeaturePipelineState(a)});c.submitDraw(a,b);!1===e&&n.requestRender()}}h.AnimatedTechnique=t;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});