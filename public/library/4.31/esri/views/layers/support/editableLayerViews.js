// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Logger","../../../geometry/support/spatialReferenceUtils","../../../layers/support/infoFor3D","../../ViewingMode"],function(h,e,f,k,l){h.isGeometryEditableSceneLayer=function(a,g){var {associatedLayer:b}=a,d=b?.infoFor3D;if(!d)return!1;var c=k.getGlbFormatId(d);if(null==c||!d.queryFormats.includes(c))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because it does not support GLB queries.`),
!1;d=a.spatialReference;c=b.spatialReference;if(!f.equals(d,c))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because its spatial reference (wkid:${d.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${c.wkid}).`),!1;b=b.sourceJSON.sourceSpatialReference;if(null!=b&&!f.equals(b,c))return e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??
"Untitled layer"}, ${a.id}) does not support geometry edits because the spatial reference of its associated FeatureLayer's service (wkid:${c.wkid}) is different from its source spatial reference (wkid:${b.wkid}).`),!1;({view:b}=g);if(g.destroyed||null==b)return!1;g=b.spatialReference;({viewingMode:c}=b.state);b=f.isGeographic(d);c=c===l.ViewingMode.Global;return b&&!c?(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits in local viewing mode because its spatial reference (wkid:${d.wkid}) is geographic. Please consider changing the viewing mode to global.`),
!1):!b&&c?(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits in global viewing mode because its spatial reference (wkid:${d.wkid}) is projected. Please consider changing the viewing mode to local.`),!1):f.equals(d,g)||c&&f.isWebMercator(g)&&f.isWGS84(d)?!0:(e.getLogger("esri.views.layers.support.editableLayerViews").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) does not support geometry edits because its spatial reference (wkid:${d.wkid}) does not match the view spatial reference (wkid:${g.wkid}).`),
!1)};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});