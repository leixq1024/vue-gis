// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require exports ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/RenderSlot ../lib/StencilUtils ../lib/VertexAttribute ../../../../chunks/LineMarker.glsl ./LineMarkerTechniqueConfiguration ../../../webgl/enums ../../../webgl/renderState".split(" "),function(r,k,m,t,u,h,n,a,c,v,w,x,d){class y extends u.ShaderTechnique{constructor(b,e,f){super(b,e,new t.ReloadableShaderModule(v.LineMarker,
()=>new Promise((g,l)=>r(["./LineMarker.glsl"],g,l))),f,p)}_makePipelineState(b,e){const {output:f,oitPass:g,space:l,hasOccludees:q}=b;return d.makePipelineState({blending:f===m.ShaderOutput.Color?h.blending(g):null,depthTest:l===w.LineMarkerSpace.Draped?null:{func:h.oitDepthTest(g)},depthWrite:h.depthWrite(b),drawBuffers:f===m.ShaderOutput.Depth?{buffers:[x.SpecialDrawBuffers.NONE]}:h.getDrawBuffers(g,f),colorWrite:d.defaultColorWrite,stencilWrite:q?a.stencilWriteMaskOn:null,stencilTest:q?e?a.stencilToolMaskBaseParams:
a.stencilBaseAllZerosParams:null,polygonOffset:{factor:0,units:-10}})}initializePipeline(b){b.occluder?(this._occluderPipelineTransparent=d.makePipelineState({blending:d.premultipliedAlphaToPremultipliedAlpha,depthTest:a.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWrite,stencilWrite:null,stencilTest:a.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=d.makePipelineState({blending:d.premultipliedAlphaToPremultipliedAlpha,depthTest:a.depthCompareAlways,depthWrite:null,
colorWrite:d.defaultColorWrite,stencilWrite:a.stencilWriteMaskOff,stencilTest:a.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=d.makePipelineState({blending:null,depthTest:a.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:a.stencilWriteMaskOn,stencilTest:a.stencilToolMaskBaseParams})):this._occluderPipelineTransparent=this._occluderPipelineOpaque=this._occluderPipelineMaskWrite=null;this._occludeePipelineState=this._makePipelineState(b,!0);return this._makePipelineState(b,
!1)}getPipeline(b,e){return b?this._occludeePipelineState:e===n.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent??super.getPipeline():e===n.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque??super.getPipeline():this._occluderPipelineMaskWrite??super.getPipeline()}}const p=new Map([[c.VertexAttribute.POSITION,0],[c.VertexAttribute.PREVPOSITION,1],[c.VertexAttribute.UV0,2],[c.VertexAttribute.NORMAL,3],[c.VertexAttribute.COLOR,4],[c.VertexAttribute.COLORFEATUREATTRIBUTE,
4],[c.VertexAttribute.SIZE,5],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,5],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,6]]);k.LineMarkerTechnique=y;k.vertexAttributeLocations=p;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});