// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/has ../../../../core/NestedMap ../effects/ScreenSpaceGeometry ../materials/renderers/VaoCache ../../../webgl/AppleAmdDriverHelper ../../../webgl/RenderingContext".split(" "),function(e,p,g,h,k,l,m){class n extends m.RenderingContext{constructor(a,b){super(a,b);this.gl=a;this._vaoCaches=new g.NestedMap;this._appleAmdDriverHelper=null;this._refCount=1;this._newCache=b.newCache;this.screen=new h.ScreenSpaceGeometry(this)}configure(a){super.configure(a);this._newCache=
a.newCache}destroy(){this._vaoCaches?.forAll(a=>a.dispose());this._vaoCaches?.clear();0<--this._refCount||this.dispose()}ref(){++this._refCount}dispose(){super.dispose();this._appleAmdDriverHelper?.dispose();this.screen.destroy();this._vaoCaches.forAll(a=>a.dispose());this._vaoCaches.clear()}get newCache(){return this._newCache}getVaoCache(a,b){const c=Array.from(a).join("."),d=JSON.stringify(b),f=this._vaoCaches.get(c,d);if(f)return f;a=new k.VaoCache(this,a,b);this._vaoCaches.set(c,d,a);return a}bindTechnique(a,
b,c,d){this.useProgram(a.program);this.setPipelineState(a.getPipeline());c&&(a.program.bindPass(c,b),d&&a.program.bindDraw(b,c,d));return a.program}runAppleAmdDriverHelper(){this.driverTest.drawArraysRequiresIndicesTypeReset.result&&(this._appleAmdDriverHelper??(this._appleAmdDriverHelper=new l.AppleAmdDriverHelper(this)),this._appleAmdDriverHelper.run())}get test(){}}e.RenderingContext=n;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});