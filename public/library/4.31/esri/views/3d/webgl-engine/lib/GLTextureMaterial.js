// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../../core/promiseUtils ../core/shaderModules/interfaces ./basicInterfaces ./GLMaterial".split(" "),function(d,c,k,l,f,m){class n extends m{constructor(a){super(a);this._numLoading=0;this._disposed=!1;this._textures=a.textures;this._textureId=a.textureId;this._acquire(a.textureId,b=>this._texture=b);this._acquire(a.normalTextureId,b=>this._textureNormal=b);this._acquire(a.emissiveTextureId,b=>this._textureEmissive=b);this._acquire(a.occlusionTextureId,
b=>this._textureOcclusion=b);this._acquire(a.metallicRoughnessTextureId,b=>this._textureMetallicRoughness=b)}dispose(){super.dispose();this._texture=c.releaseMaybe(this._texture);this._textureNormal=c.releaseMaybe(this._textureNormal);this._textureEmissive=c.releaseMaybe(this._textureEmissive);this._textureOcclusion=c.releaseMaybe(this._textureOcclusion);this._textureMetallicRoughness=c.releaseMaybe(this._textureMetallicRoughness);this._disposed=!0}ensureResources(a){return 0===this._numLoading?f.ResourceState.LOADED:
f.ResourceState.LOADING}get textureBindParameters(){return new g(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}updateTexture(a){if(null==this._texture||a!==this._texture.id)this._texture=c.releaseMaybe(this._texture),this._textureId=
a,this._acquire(this._textureId,b=>this._texture=b)}_acquire(a,b){null==a?b(null):(a=this._textures.acquire(a),k.isPromiseLike(a)?(++this._numLoading,a.then(e=>{this._disposed?(c.releaseMaybe(e),b(null)):b(e)}).finally(()=>--this._numLoading)):b(a))}}class h extends l.NoParameters{constructor(a=null){super();this.textureEmissive=a}}class g extends h{constructor(a=null,b=null,e=null,p=null,q=null,r,t){super(e);this.texture=a;this.textureNormal=b;this.textureOcclusion=p;this.textureMetallicRoughness=
q;this.scale=r;this.normalTextureTransformMatrix=t}}d.GLEmissiveTexturePassParameters=h;d.GLTextureMaterial=n;d.GLTextureMaterialBindParameters=g;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});