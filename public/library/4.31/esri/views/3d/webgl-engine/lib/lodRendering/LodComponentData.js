// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../support/buffer/glUtil ../ContentObject ../DefaultVertexAttributeLocations ../GLMaterials ../Intersector ../IntersectorInterfaces ../VertexArrayObject ./Intersector ../../../../webgl/BufferObject ../../../../webgl/enums".split(" "),function(p,v,t,w,x,y,g,z,A,B,C){function u(a,b,f,c=null){const d=a.createBufferWriter(),h=d.vertexBufferLayout,m=d.elementCount(b),n=h.createBuffer(m);d.write(null,null,b,c,n,0);return{material:a,vertexBufferLayout:h,buffer:n.buffer,elementCount:m,
boundingInfo:f}}class D{constructor(a,b){const f=a.renderContext.rctx;b=b.geometry;let c=null;c=b instanceof t.ContentObject?u(b.material,b.attributes,b.boundingInfo):b;const d=c.material;this._materials=a.materials;d.setParameters({instancedDoublePrecision:!0});this.geometry=b;this.material=d;this.glMaterials=new x.GLMaterials(d,this._materials);this.vertexBufferLayout=c.vertexBufferLayout;this.vbo=B.BufferObject.createVertex(f,C.Usage.STATIC_DRAW,c.buffer);this.vao=new z.VertexArrayObject(f,w.Default3D,
new Map([["geometry",v.glLayout(c.vertexBufferLayout)]]),new Map([["geometry",this.vbo]]));this.vertexCount=c.elementCount}destroy(){this.glMaterials.dispose();this.vbo.dispose();this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(a,b,f,c,d,h,m,n){if(this.geometry instanceof t.ContentObject){var E=this.geometry.id;this.material.intersect(this.geometry,a.transform.transform,a,f,c,(e,q,k,r,l)=>{0<=e&&(null==b||b(a.rayBegin,
a.rayEnd,e))&&(k=new A.LodTarget(h.layerUid,h.graphicUid(d),E,k,m,n),(null==a.results.min.drapedLayerOrder||l>=a.results.min.drapedLayerOrder)&&(null==a.results.min.dist||e<a.results.min.dist)&&a.results.min.set(g.IntersectorType.LOD,k,e,q,a.transform.transform,l),a.options.store!==g.StoreResults.MIN&&(null==a.results.max.drapedLayerOrder||l>=a.results.max.drapedLayerOrder)&&(null==a.results.max.dist||e>a.results.max.dist)&&a.results.max.set(g.IntersectorType.LOD,k,e,q,a.transform.transform,l),a.options.store===
g.StoreResults.ALL&&(r=y.newIntersectorResult(a.results.min.ray),r.set(g.IntersectorType.LOD,k,e,q,a.transform.transform,l),a.results.all.push(r)))})}}}p.LodComponentData=D;p.createLodComponentRenderGeometry=u;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});