// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["../../../../chunks/Compositing.glsl","../shaders/CompositingTechnique","../shaders/CompositingTechniqueConfiguration","../../../../chunks/HUDCompositing.glsl","../shaders/HUDCompositingTechnique"],function(h,d,c,k,f){class l{constructor(b,a){this._rctx=b;this._techniques=a;this._configuration=new c.CompositingTechniqueConfiguration;this._passParameters=new h.CompositingPassParameters;this._hudParameters=new k.HUDCompositingPassParameters;this._configuration.blitMode=c.BlitMode.PremultipliedAlpha;
this._techniques.precompile(d.CompositingTechnique,this._configuration);this._configuration.hasOpacityFactor=!0;this._techniques.precompile(d.CompositingTechnique,this._configuration);this._configuration.hasOpacityFactor=!1;this._configuration.blitMode=c.BlitMode.Alpha;this._techniques.precompile(d.CompositingTechnique,this._configuration);this._configuration.blitMode=c.BlitMode.Depth;this._techniques.precompile(d.CompositingTechnique,this._configuration);this._techniques.precompile(f.HUDCompositingTechnique)}compositeHUD(b,
a){this._hudParameters.texture=a;a=this._techniques.acquire(f.HUDCompositingTechnique);this._rctx.bindTechnique(a,b,this._hudParameters);this._rctx.screen.draw();a.release()}compositePreMultipliedAlpha(b,a,e=1){this._composite(b,a,c.BlitMode.PremultipliedAlpha,e)}composite(b,a){this._composite(b,a,c.BlitMode.Alpha,1)}blitDepthToLinearDepth(b,a){this._composite(b,a,c.BlitMode.Depth,1)}_composite(b,a,e,g){this._configuration.blitMode=e;this._configuration.hasOpacityFactor=1!==g;this._passParameters.texture=
a;this._passParameters.opacity=g;a=this._techniques.acquire(d.CompositingTechnique,this._configuration);this._rctx.bindTechnique(a,b,this._passParameters);this._rctx.screen.draw();a.release()}}return l});