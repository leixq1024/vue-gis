// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/HeatmapDensityTechnique ../shaders/HeatmapDensityTechniqueConfiguration".split(" "),function(k,m,t,u,v,w,x,y,d,n,p,z){class q extends p.HeatmapDensityPassParameters{constructor(){super(...arguments);this.usesHalfFloats=
this.isAttributeDriven=!1}}class A extends x.Material{constructor(a){super(a,q);this.produces=new Map([[y.RenderSlot.DRAPED_MATERIAL,b=>b===v.ShaderOutput.Color]]);this._configuration=new z.HeatmapDensityTechniqueConfiguration}getConfiguration(){this._configuration.isAttributeDriven=this.parameters.isAttributeDriven;this._configuration.usesHalfFloat=this.parameters.usesHalfFloats;return this._configuration}get visible(){return!0}createGLMaterial(a){return new B(a)}intersect(){}intersectDraped(a,b,
c,e,f,h){b=a.attributes.get(d.VertexAttribute.POSITION);({parameters:c}=this);({searchRadius:c}=c);({screenToWorldRatio:a}=a);a=c*a+2*a;a*=a;c=b.data.length/b.size;for(let l=0;l<c;l++){var g=l*b.size;g=m.set(C,b.data[g],b.data[g+1]);m.squaredDistance(g,e)<a&&f(h.dist,h.normal,-1,!1)}}createBufferWriter(){return new D(this.parameters.isAttributeDriven?E:r)}}class B extends w{beginSlot(a){return this.acquireTechnique(p.HeatmapDensityTechnique,a)}}class D{constructor(a){this.vertexBufferLayout=a}elementCount(a){return 6*
a.get(d.VertexAttribute.POSITION).indices.length}write(a,b,c,e,f,h){n.writePosition(c.get(d.VertexAttribute.POSITION),a,f.position,h,6);a=c.get(d.VertexAttribute.POSITION).indices.length;b=f.uv0;e=h;for(let g=0;g<a;++g)b.setValues(e++,-1,-1),b.setValues(e++,1,-1),b.setValues(e++,1,1),b.setValues(e++,1,1),b.setValues(e++,-1,1),b.setValues(e++,-1,-1);(f=d.VertexAttribute.FEATUREATTRIBUTE in f?f.featureAttribute:null)&&n.writeBufferFloat(c.get(d.VertexAttribute.FEATUREATTRIBUTE),f,h,6)}}const r=u.newLayout().vec3f(d.VertexAttribute.POSITION).vec2f(d.VertexAttribute.UV0),
E=r.clone().f32(d.VertexAttribute.FEATUREATTRIBUTE),C=t.create();k.HeatmapDensityMaterial=A;k.Parameters=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});