// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/has ../../../../core/time ../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../core/shaderLibrary/ShaderOutput ../effects/geometry/olidUtils ../lib/Material ../lib/OrderIndependentTransparency ../lib/RenderSlot ./DefaultBufferWriter ./DefaultLayouts ./TriangleMaterial ./WaterGLMaterial ./WaterTechniqueConfiguration".split(" "),function(f,y,k,l,m,n,d,p,q,r,e,t,
g,u,v,w){class x extends u.TriangleMaterial{constructor(a,b){super(a,h);this.produces=new Map([[e.RenderSlot.OPAQUE_MATERIAL,c=>d.isColor(c)&&!this.parameters.transparent||d.isHighlightOrOID(c)],[e.RenderSlot.TRANSPARENT_MATERIAL,c=>d.isColor(c)&&this.parameters.transparent||d.isHighlightOrOID(c)],[e.RenderSlot.DRAPED_MATERIAL,c=>this.parameters.draped&&c===d.ShaderOutput.Color||d.isHighlightOrOID(c)],[e.RenderSlot.DRAPED_WATER,c=>c===d.ShaderOutput.Normal]]);this._configuration=new w.WaterTechniqueConfiguration(b.spherical,
b.doublePrecisionRequiresObfuscation)}getConfiguration(a,b){this._configuration.output=a;this._configuration.writeDepth=!0;this._configuration.receiveShadows=b.shadowMap.enabled;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.transparent=this.parameters.transparent;this._configuration.screenSpaceReflections=null!=b.ssr.lastFrameColor;this._configuration.cloudReflections=null!=b.clouds.data;this._configuration.draped=this.parameters.draped;this._configuration.oitPass=
b.oitPass;this._configuration.enableOffset=b.camera.relativeElevation<r.OITPolygonOffsetLimit;this._configuration.terrainDepthTest=b.terrainDepthTest;this._configuration.cullAboveTerrain=b.cullAboveTerrain;return this._configuration}get visible(){return!0}update(a){this.setParameters({timeElapsed:k.secondsFromMilliseconds(a.time)*this.parameters.animationSpeed},!1);return this._animationEnabled(a.camera)&&0<a.dt}_animationEnabled(a){return 35E3>Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*
Math.min(a.relativeElevation,a.distance)}createGLMaterial(a){return new v.WaterGLMaterial(a)}createBufferWriter(){return new t.DefaultBufferWriter(p.olidEnabled()?g.PositionUVLayoutObjectAndLayerId:g.PositionUVLayout)}get test(){}}class h extends q.MaterialParameters{constructor(){super(...arguments);this.waveStrength=.06;this.waveTextureRepeat=32;this.waveDirection=l.fromValues(1,0);this.waveVelocity=.05;this.flowStrength=.015;this.flowOffset=-.5;this.animationSpeed=.35;this.timeElapsed=0;this.color=
n.fromValues(0,0,0,0);this.transparent=!0;this.draped=this.hasSlicePlane=!1;this.origin=m.create();this.modelTransformation=null}}f.Parameters=h;f.WaterMaterial=x;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});