// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/vec32 ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../geometry/support/DoubleArray ../../../../ViewingMode ../../../support/buffer/glUtil ../../../support/buffer/InterleavedLayout ./LaserlinePathTechnique ../../lib/VertexArrayObject ../../lib/VertexAttribute ../../../../webgl/BufferObject ../../../../webgl/enums".split(" "),function(p,m,n,u,v,w,q,x,y,f,z,r){class A{constructor(b){this._renderCoordsHelper=b;this._buffers=null;this._origin=
n.create();this._dirty=!1;this._count=0;this._vao=null}set vertices(b){const a=u.newDoubleArray(3*b.length);let g=0;for(const c of b)a[g++]=c[0],a[g++]=c[1],a[g++]=c[2];this.buffers=[a]}set buffers(b){this._buffers=b;if(0<this._buffers.length){b=this._buffers[0];const a=3*Math.floor(b.length/3/2);m.set(this._origin,b[a],b[a+1],b[a+2])}else m.set(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(b){const a=this._ensureVAO(b);null!=a&&(b.bindVAO(a),b.drawArrays(r.PrimitiveType.TRIANGLES,
0,this._count))}dispose(){null!=this._vao&&this._vao.dispose()}get _layout(){return this._renderCoordsHelper.viewingMode===v.ViewingMode.Global?B:C}_ensureVAO(b){if(null==this._buffers)return null;this._vao??(this._vao=this._createVAO(b,this._buffers));this._ensureVertexData(this._vao,this._buffers);return this._vao}_createVAO(b,a){a=this._createDataBuffer(a);this._dirty=!1;return new y.VertexArrayObject(b,x.vertexAttributeLocations,new Map([["data",w.glLayout(this._layout)]]),new Map([["data",z.BufferObject.createVertex(b,
r.Usage.STATIC_DRAW,a)]]))}_ensureVertexData(b,a){this._dirty&&(a=this._createDataBuffer(a),b.vertexBuffers.get("data")?.setData(a),this._dirty=!1)}_createDataBuffer(b){var a=b.reduce((e,d)=>e+6*(d.length/3-1),0);this._count=a;a=this._layout.createBuffer(a);const g=this._origin;let c=0,h=0;const D="startUp"in a?this._setUpVectors.bind(this,a):void 0;for(const e of b){for(b=0;b<e.length;b+=3){var k=m.set(t,e[b],e[b+1],e[b+2]);0===b?h=this._renderCoordsHelper.getAltitude(k):this._renderCoordsHelper.setAltitude(k,
h);const d=c+2*b;D?.(b,d,e,k);k=m.subtract(t,k,g);if(b<e.length-3){for(var l=0;6>l;l++)a.start.setVec(d+l,k);a.extrude.setValues(d,0,-1);a.extrude.setValues(d+1,1,-1);a.extrude.setValues(d+2,1,1);a.extrude.setValues(d+3,0,-1);a.extrude.setValues(d+4,1,1);a.extrude.setValues(d+5,0,1)}if(0<b)for(l=-6;0>l;l++)a.end.setVec(d+l,k)}c+=6*(e.length/3-1)}return a.buffer}_setUpVectors(b,a,g,c,h){h=this._renderCoordsHelper.worldUpAtPosition(h,E);if(a<c.length-3)for(c=0;6>c;c++)b.startUp.setVec(g+c,h);if(0<a)for(a=
-6;0>a;a++)b.endUp.setVec(g+a,h)}}const E=n.create(),t=n.create(),B=q.newLayout().vec3f(f.VertexAttribute.START).vec3f(f.VertexAttribute.END).vec2f(f.VertexAttribute.EXTRUDE).vec3f(f.VertexAttribute.START_UP).vec3f(f.VertexAttribute.END_UP),C=q.newLayout().vec3f(f.VertexAttribute.START).vec3f(f.VertexAttribute.END).vec2f(f.VertexAttribute.EXTRUDE);p.LaserlinePathData=A;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});