// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rest/query/operations/pbfDehydratedFeatureSet":function(){define("exports ../../../core/compilerUtils ../../../core/uid ../../../geometry/SpatialReference ../../../geometry/support/zscale ../../../layers/graphics/dehydratedFeatures ../../../layers/graphics/featureConversionUtils ../../../layers/support/Field".split(" "),function(e,u,r,z,y,K,J,Q){function D(x,a){return a}function p(x,a,d,c){switch(d){case 0:return W(x,a+c,0);case 1:return"lowerLeft"===x.originPosition?W(x,a+c,
1):V(x,a+c,1)}}function q(x,a,d,c){switch(d){case 2:return W(x,a,2);default:return p(x,a,d,c)}}function M(x,a,d,c){switch(d){case 2:return W(x,a,3);default:return p(x,a,d,c)}}function aa(x,a,d,c){switch(d){case 3:return W(x,a,3);default:return q(x,a,d,c)}}function W({translate:x,scale:a},d,c){return x[c]+d*a[c]}function V({translate:x,scale:a},d,c){return x[c]-d*a[c]}class ea{constructor(x){this._options=x;this.geometryTypes=["point","multipoint","polyline","polygon"];this._previousCoordinate=[0,
0];this._transform=null;this._applyTransform=D;this._lengths=[];this._vertexDimension=this._toAddInCurrentPath=this._currentLengthIndex=0;this._coordinateBuffer=null;this._coordinateBufferPtr=0;this._attributesConstructor=class{};this._missingAttributes=[]}get missingAttributes(){return this._missingAttributes}createFeatureResult(){return new K.DehydratedFeatureSetClass}finishFeatureResult(x){this._options.applyTransform&&(x.transform=null);this._attributesConstructor=class{};this._coordinateBuffer=
null;this._lengths.length=0;if(x.hasZ){var a=y.getGeometryZScaler(x.geometryType,this._options.sourceSpatialReference,x.spatialReference);if(null!=a)for(const d of x.features)a(d.geometry)}}createSpatialReference(){return new z}addField(x,a){x.fields.push(Q.fromJSON(a));const d=x.fields.map(c=>c.name);this._attributesConstructor=function(){for(const c of d)this[c]=null}}addFeature(x,a){K.removeLargeStringAttributes(a.attributes,this._options.maxStringAttributeFields,this._options.maxStringAttributeLength,
d=>{const c=a.attributes[x.objectIdFieldName];null!=c&&this._missingAttributes.push({objectId:c,attribute:d})});x.features.push(a)}addQueryGeometry(x,a){const {queryGeometry:d,queryGeometryType:c}=a;a=J.unquantizeOptimizedGeometry(d.clone(),d,!1,!1,this._transform);a=J.convertToGeometry(a,c,!1,!1);let t=null;switch(c){case "esriGeometryPoint":t="point";break;case "esriGeometryPolygon":t="polygon";break;case "esriGeometryPolyline":t="polyline";break;case "esriGeometryMultipoint":t="multipoint"}a.type=
t;x.queryGeometryType=c;x.queryGeometry=a}prepareFeatures(x){this._transform=x.transform??null;this._options.applyTransform&&x.transform&&(this._applyTransform=this._deriveApplyTransform(x));this._vertexDimension=2;x.hasZ&&this._vertexDimension++;x.hasM&&this._vertexDimension++;switch(x.geometryType){case "point":this.addCoordinate=(a,d,c)=>this.addCoordinatePoint(a,d,c);this.createGeometry=a=>this.createPointGeometry(a);break;case "polygon":this.addCoordinate=(a,d,c)=>this._addCoordinatePolygon(a,
d,c);this.createGeometry=a=>this._createPolygonGeometry(a);break;case "polyline":this.addCoordinate=(a,d,c)=>this._addCoordinatePolyline(a,d,c);this.createGeometry=a=>this._createPolylineGeometry(a);break;case "multipoint":this.addCoordinate=(a,d,c)=>this._addCoordinateMultipoint(a,d,c);this.createGeometry=a=>this._createMultipointGeometry(a);break;case "mesh":case "extent":break;default:u.neverReached(x.geometryType)}}createFeature(){this._currentLengthIndex=this._lengths.length=0;this._previousCoordinate[0]=
0;this._previousCoordinate[1]=0;return new K.DehydratedFeatureClass(r.generateUID(),null,new this._attributesConstructor)}allocateCoordinates(){const x=this._lengths.reduce((a,d)=>a+d,0);this._coordinateBuffer=new Float64Array(x*this._vertexDimension);this._coordinateBufferPtr=0}addLength(x,a){0===this._lengths.length&&(this._toAddInCurrentPath=a);this._lengths.push(a)}createPointGeometry(x){x={type:"point",x:0,y:0,spatialReference:x.spatialReference,hasZ:!!x.hasZ,hasM:!!x.hasM};x.hasZ&&(x.z=0);x.hasM&&
(x.m=0);return x}addCoordinatePoint(x,a,d){a=this._transform?this._applyTransform(this._transform,a,d,0):a;if(null!=a)switch(d){case 0:x.x=a;break;case 1:x.y=a;break;case 2:x.hasZ?x.z=a:x.m=a;break;case 3:x.m=a}}_transformPathLikeValue(x,a){let d=0;1>=a&&(d=this._previousCoordinate[a],this._previousCoordinate[a]+=x);return this._transform?this._applyTransform(this._transform,x,a,d):x}_addCoordinatePolyline(x,a,d){this._dehydratedAddPointsCoordinate(x.paths,a,d)}_addCoordinatePolygon(x,a,d){this._dehydratedAddPointsCoordinate(x.rings,
a,d)}_addCoordinateMultipoint(x,a,d){0===d&&x.points.push([]);a=this._transformPathLikeValue(a,d);x.points[x.points.length-1].push(a)}_createPolygonGeometry(x){return{type:"polygon",rings:[[]],spatialReference:x.spatialReference,hasZ:!!x.hasZ,hasM:!!x.hasM}}_createPolylineGeometry(x){return{type:"polyline",paths:[[]],spatialReference:x.spatialReference,hasZ:!!x.hasZ,hasM:!!x.hasM}}_createMultipointGeometry(x){return{type:"multipoint",points:[],spatialReference:x.spatialReference,hasZ:!!x.hasZ,hasM:!!x.hasM}}_dehydratedAddPointsCoordinate(x,
a,d){0===d&&0===this._toAddInCurrentPath--&&(x.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);a=this._transformPathLikeValue(a,d);x=x[x.length-1];const c=this._coordinateBuffer;c&&(0===d&&x.push(new Float64Array(c.buffer,this._coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this._vertexDimension)),c[this._coordinateBufferPtr++]=a)}_deriveApplyTransform(x){const {hasZ:a,hasM:d}=x;return a&&d?aa:a?q:d?M:p}}
e.DehydratedFeatureSetParserContext=ea;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/compilerUtils":function(){define(["exports","./has"],function(e,u){e.neverReached=function(r){};e.neverReachedSilent=function(r){};e.typeCast=function(r){return()=>r};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatures":function(){define("exports ../../core/byteSizeEstimations ../../core/has ../../core/typedArrayUtil ../../core/uid ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ../../geometry/support/typeUtils ../support/Field ./dehydratedFeatureComparison".split(" "),
function(e,u,r,z,y,K,J,Q,D,p,q,M){function aa(c,t,E,R){return{uid:y.generateUID(),objectId:R&&c.attributes?c.attributes[R]:null,attributes:c.attributes,geometry:W(c.geometry,t,E),visible:!0}}function W(c,t,E){if(null==c)return null;switch(t){case "point":return{x:c.x,y:c.y,z:c.z,m:c.m,hasZ:null!=c.z,hasM:null!=c.m,type:"point",spatialReference:E};case "polyline":return{paths:c.paths,hasZ:!!c.hasZ,hasM:!!c.hasM,type:"polyline",spatialReference:E};case "polygon":return{rings:c.rings,hasZ:!!c.hasZ,hasM:!!c.hasM,
type:"polygon",spatialReference:E};case "multipoint":return{points:c.points,hasZ:!!c.hasZ,hasM:!!c.hasM,type:"multipoint",spatialReference:E}}}function V(c){if(null==c)return 0;let t=32;switch(c.type){case "point":t+=42;break;case "polyline":case "polygon":var E=0;const R=2+(c.hasZ?1:0)+(c.hasM?1:0);c="polyline"===c.type?c.paths:c.rings;for(const h of c)E+=h.length;t+=8*E*R+64;t+=128*E;t=t+34+32*(c.length+1);break;case "multipoint":E=c.points.length;t+=8*E*(2+(c.hasZ?1:0)+(c.hasM?1:0))+64;t+=128*
E;t=t+34+32;break;case "extent":t+=98;c.hasM&&(t+=32);c.hasZ&&(t+=32);break;case "mesh":t+=z.estimateSize(c.vertexAttributes.position,c.vertexAttributes.normal,c.vertexAttributes.uv,c.vertexAttributes.tangent)}return t}function ea(c,t){return null!=c.objectId?c.objectId:c.attributes&&t?c.attributes[t]:null}function x(c,t,E,R){if(t?.size&&null!=E&&c)for(const h in c){if(!t.has(h))continue;const A=c[h];"string"===typeof A&&A.length>E&&(R(h),c[h]="")}}class a{constructor(c,t,E){this.uid=c;this.geometry=
t;this.attributes=E;this.visible=!0;this.centroid=this.objectId=null}}class d{constructor(){this.exceededTransferLimit=!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null}}e.equals=M.equals;e.DehydratedFeatureClass=a;e.DehydratedFeatureSetClass=d;e.computeAABB=function(c,t){J.empty(t);"mesh"===c.type&&(c=c.extent);switch(c.type){case "point":t[0]=
t[3]=c.x;t[1]=t[4]=c.y;c.hasZ&&(t[2]=t[5]=c.z);break;case "polyline":for(var E=0;E<c.paths.length;E++)J.expandWithNestedArray(t,c.paths[E],!!c.hasZ);break;case "polygon":for(E=0;E<c.rings.length;E++)J.expandWithNestedArray(t,c.rings[E],!!c.hasZ);break;case "multipoint":J.expandWithNestedArray(t,c.points,!!c.hasZ);break;case "extent":t[0]=c.xmin,t[1]=c.ymin,t[3]=c.xmax,t[4]=c.ymax,null!=c.zmin&&(t[2]=c.zmin),null!=c.zmax&&(t[5]=c.zmax)}};e.computeAABR=function(c,t){Q.empty(t);"mesh"===c.type&&(c=c.extent);
switch(c.type){case "point":t[0]=t[2]=c.x;t[1]=t[3]=c.y;break;case "polyline":for(var E=0;E<c.paths.length;E++)Q.expandWithNestedArray(t,c.paths[E]);break;case "polygon":for(E=0;E<c.rings.length;E++)Q.expandWithNestedArray(t,c.rings[E]);break;case "multipoint":Q.expandWithNestedArray(t,c.points);break;case "extent":t[0]=c.xmin,t[1]=c.ymin,t[2]=c.xmax,t[3]=c.ymax}};e.estimateGeometryObjectSize=V;e.estimateSize=function(c){let t;t=32+u.estimateAttributesObjectSize(c.attributes);return t=t+3+(8+V(c.geometry))};
e.fromFeatureSetJSON=function(c,t){const E=p.featureGeometryTypeKebabDictionary.fromJSON(c.geometryType),R=K.fromJSON(c.spatialReference),h=c.transform,A=c.objectIdFieldName,H=t?.maxStringAttributeLength,U=t?.maxStringAttributeFields;let N;t=c.features.map(Z=>{const g=aa(Z,E,R,c.objectIdFieldName);Z=g.geometry;x(g.attributes,U,H,k=>{N??=[];const n=ea(g,A);null!=n&&N.push({objectId:n,attribute:k})});if(null!=Z&&h)switch(Z.type){case "point":g.geometry=D.unquantizePoint(h,Z,Z);break;case "multipoint":g.geometry=
D.unquantizeMultipoint(h,Z,Z);break;case "polygon":g.geometry=D.unquantizePolygon(h,Z,Z);break;case "polyline":g.geometry=D.unquantizePolyline(h,Z,Z);break;case "extent":g.geometry=Z;break;case "mesh":g.geometry=Z}return g});return{geometryType:E,features:t,spatialReference:R,fields:c.fields?.map(Z=>q.fromJSON(Z))??[],objectIdFieldName:c.objectIdFieldName,globalIdFieldName:c.globalIdFieldName,geohashFieldName:c.geohashFieldName,geometryProperties:c.geometryProperties,hasZ:c.hasZ,hasM:c.hasM,exceededTransferLimit:c.exceededTransferLimit,
transform:null,missingAttributes:N}};e.fromJSONGeometry=W;e.getObjectId=ea;e.hasGeometry=function(c){return null!=c.geometry};e.hasVertices=function(c){if(null==c)return!1;switch(c.type){case "extent":case "point":return!0;case "polyline":for(const t of c.paths)if(0<t.length)return!0;return!1;case "polygon":for(const t of c.rings)if(0<t.length)return!0;return!1;case "multipoint":return 0<c.points.length;case "mesh":return!c.loaded||0<c.vertexAttributes.position.length}};e.numVertices=function(c){if(null==
c)return 0;switch(c.type){case "point":return 1;case "polyline":var t=0;for(var E of c.paths)t+=E.length;return t;case "polygon":E=0;for(t of c.rings)E+=t.length;return E;case "multipoint":return c.points.length;case "extent":return 2;case "mesh":return(c=c.vertexAttributes&&c.vertexAttributes.position)?c.length/3:0}};e.removeLargeStringAttributes=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect",
"./DoubleArray"],function(e,u,r,z){function y(a=ea){return[a[0],a[1],a[2],a[3],a[4],a[5]]}function K(a,d,c,t,E,R,h=y()){h[0]=a;h[1]=d;h[2]=c;h[3]=t;h[4]=E;h[5]=R;return h}function J(a,d,c,t=y()){aa(t,V);Q(t,a,d,c);return t}function Q(a,d,c=0,t=d.length/3){let E=a[0],R=a[1],h=a[2],A=a[3],H=a[4],U=a[5];for(let N=0;N<t;N++)E=Math.min(E,d[c+3*N]),R=Math.min(R,d[c+3*N+1]),h=Math.min(h,d[c+3*N+2]),A=Math.max(A,d[c+3*N]),H=Math.max(H,d[c+3*N+1]),U=Math.max(U,d[c+3*N+2]);a[0]=E;a[1]=R;a[2]=h;a[3]=A;a[4]=
H;a[5]=U}function D(a){return a[0]>=a[3]?0:a[3]-a[0]}function p(a){return a[1]>=a[4]?0:a[4]-a[1]}function q(a){return a[2]>=a[5]?0:a[5]-a[2]}function M(a,d){return Math.max(d[0],a[0])<=Math.min(d[3],a[3])&&Math.max(d[1],a[1])<=Math.min(d[4],a[4])&&Math.max(d[2],a[2])<=Math.min(d[5],a[5])}function aa(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a}function W(a){return 6===a.length}const V=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],ea=[0,0,0,0,0,0],x=y();e.allFinite=
function(a){for(let d=0;6>d;d++)if(!isFinite(a[d]))return!1;return!0};e.center=function(a,d=[0,0,0]){d[0]=a[0]+D(a)/2;d[1]=a[1]+p(a)/2;d[2]=a[2]+q(a)/2;return d};e.contains=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[3]<=a[3]&&d[4]<=a[4]&&d[5]<=a[5]};e.containsPoint=function(a,d){return d[0]>=a[0]&&d[1]>=a[1]&&d[2]>=a[2]&&d[0]<=a[3]&&d[1]<=a[4]&&d[2]<=a[5]};e.containsPointWithMargin=function(a,d,c){return d[0]>=a[0]-c&&d[1]>=a[1]-c&&d[2]>=a[2]-c&&d[0]<=a[3]+c&&d[1]<=a[4]+c&&d[2]<=a[5]+
c};e.create=y;e.depth=p;e.diameter=function(a){const d=D(a),c=q(a);a=p(a);return Math.sqrt(d*d+c*c+a*a)};e.empty=function(a){return a?aa(a,V):y(V)};e.equals=function(a,d,c){if(null==a||null==d)return a===d;if(!W(a)||!W(d))return!1;if(c)for(let t=0;t<a.length;t++){if(!c(a[t],d[t]))return!1}else for(c=0;c<a.length;c++)if(a[c]!==d[c])return!1;return!0};e.expandWithAABB=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[3]);a[4]=Math.max(a[4],
d[4]);a[5]=Math.max(a[5],d[5])};e.expandWithBuffer=Q;e.expandWithNestedArray=function(a,d,c){const t=d.length;let E=a[0],R=a[1],h=a[2],A=a[3],H=a[4],U=a[5];if(c)for(c=0;c<t;c++){var N=d[c];E=Math.min(E,N[0]);R=Math.min(R,N[1]);h=Math.min(h,N[2]);A=Math.max(A,N[0]);H=Math.max(H,N[1]);U=Math.max(U,N[2])}else for(c=0;c<t;c++)N=d[c],E=Math.min(E,N[0]),R=Math.min(R,N[1]),A=Math.max(A,N[0]),H=Math.max(H,N[1]);a[0]=E;a[1]=R;a[2]=h;a[3]=A;a[4]=H;a[5]=U};e.expandWithOffset=function(a,d,c,t){a[0]=Math.min(a[0],
a[0]+d);a[3]=Math.max(a[3],a[3]+d);a[1]=Math.min(a[1],a[1]+c);a[4]=Math.max(a[4],a[4]+c);a[2]=Math.min(a[2],a[2]+t);a[5]=Math.max(a[5],a[5]+t)};e.expandWithRect=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[3]=Math.max(a[3],d[2]);a[4]=Math.max(a[4],d[3])};e.expandWithVec3=function(a,d){a[0]=Math.min(a[0],d[0]);a[1]=Math.min(a[1],d[1]);a[2]=Math.min(a[2],d[2]);a[3]=Math.max(a[3],d[0]);a[4]=Math.max(a[4],d[1]);a[5]=Math.max(a[5],d[2])};e.fromBuffer=function(a,d=y()){return J(a,0,
a.length/3,d)};e.fromExtent=function(a,d=y()){d[0]=a.xmin;d[1]=a.ymin;d[2]=a.hasZ?a.zmin:-Infinity;d[3]=a.xmax;d[4]=a.ymax;d[5]=a.hasZ?a.zmax:Infinity;return d};e.fromMinMax=function(a,d,c=y()){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=d[0];c[4]=d[1];c[5]=d[2];return c};e.fromRect=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=d[2];a[4]=d[3];a[5]=Number.POSITIVE_INFINITY;return a};e.fromRectValues=function(a,d,c,t,E){a[0]=d;a[1]=c;a[2]=Number.NEGATIVE_INFINITY;a[3]=t;a[4]=E;a[5]=Number.POSITIVE_INFINITY;
return a};e.fromSubBuffer=J;e.fromValues=K;e.getMax=function(a,d){d[0]=a[3];d[1]=a[4];d[2]=a[5];return d};e.getMin=function(a,d){d[0]=a[0];d[1]=a[1];d[2]=a[2];return d};e.height=q;e.intersects=M;e.intersectsClippingArea=function(a,d){return null==d?!0:M(a,d)};e.is=W;e.isPoint=function(a){return 0===D(a)&&0===p(a)&&0===q(a)};e.maximumDimension=function(a){return Math.max(D(a),q(a),p(a))};e.negativeInfinity=V;e.offset=function(a,d,c,t,E=a){E[0]=a[0]+d;E[1]=a[1]+c;E[2]=a[2]+t;E[3]=a[3]+d;E[4]=a[4]+c;
E[5]=a[5]+t;return E};e.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];e.scale=function(a,d,c=a){const t=a[0]+D(a)/2,E=a[1]+p(a)/2,R=a[2]+q(a)/2;c[0]=t+(a[0]-t)*d;c[1]=E+(a[1]-E)*d;c[2]=R+(a[2]-R)*d;c[3]=t+(a[3]-t)*d;c[4]=E+(a[4]-E)*d;c[5]=R+(a[5]-R)*d;return c};e.set=aa;e.setMax=function(a,d,c=a){c[3]=d[0];c[4]=d[1];c[5]=d[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};e.setMin=function(a,d,c=a){c[0]=d[0];c[1]=d[1];c[2]=d[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);
return c};e.size=function(a,d=[0,0,0]){d[0]=D(a);d[1]=p(a);d[2]=q(a);return d};e.toCorners=function(a,d=z.newDoubleArray(24)){const [c,t,E,R,h,A]=a;d[0]=c;d[1]=t;d[2]=E;d[3]=c;d[4]=t;d[5]=A;d[6]=c;d[7]=h;d[8]=E;d[9]=c;d[10]=h;d[11]=A;d[12]=R;d[13]=t;d[14]=E;d[15]=R;d[16]=t;d[17]=A;d[18]=R;d[19]=h;d[20]=E;d[21]=R;d[22]=h;d[23]=A;return d};e.toExtent=function(a,d){return isFinite(a[2])||isFinite(a[5])?new u({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:d}):new u({xmin:a[0],
xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:d})};e.toRect=function(a,d){d||=r.create();d[0]=a[0];d[1]=a[1];d[2]=a[3];d[3]=a[4];return d};e.width=D;e.wrap=function(a,d,c,t,E,R){return K(a,d,c,t,E,R,x)};e.zero=ea;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,u){e.copyInto=function(r,z){for(let y=0;y<z.length;++y)r[y]=z[y];return r};e.doubleArrayFrom=function(r){return(u.isArray(r)?
r.length:r.byteLength/8)<=u.nativeArrayMaxSize?Array.from(r):new Float64Array(r)};e.doubleSubArray=function(r,z,y){return Array.isArray(r)?r.slice(z,z+y):r.subarray(z,z+y)};e.newDoubleArray=function(r,z=!1){return r<=u.nativeArrayMaxSize?z?Array(r).fill(0):Array(r):new Float64Array(r)};e.toFloat64Array=function(r){return Array.isArray(r)?new Float64Array(r):r};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],
function(e,u){function r(g){if("lowerLeft"===g.originPosition&&4===g.scale.length&&4===g.translate.length)return g;const {originPosition:k,scale:n,translate:C}=g;g=n[1]??1;return{originPosition:"lowerLeft",scale:[n[0]??1,"lowerLeft"===k?g:-g,n[2]??1,n[3]??1],translate:[C[0]??0,C[1]??0,C[2]??0,C[3]??0]}}function z({scale:g,translate:k},n){return Math.round((n-k[0])/g[0])}function y({scale:g,translate:k},n){return Math.round((n-k[1])/g[1])}function K({scale:g,translate:k},n){return Math.round(((n??
0)-k[2])/g[2])}function J({scale:g,translate:k},n){return n?Math.round((n-k[3])/g[3]):0}function Q(g,k){return g&&k?A:g&&!k?R:!g&&k?h:E}function D({scale:g,translate:k},n){return n*g[0]+k[0]}function p({scale:g,translate:k},n){return n*g[1]+k[1]}function q({scale:g,translate:k},n){return(n??0)*g[2]+k[2]}function M({scale:g,translate:k},n){return n?n*g[3]+k[3]:0}function aa(g,k){return g&&k?Z:g&&!k?U:!g&&k?N:H}function W(g,k,n){const C=Array(n.length);for(let I=0;I<n.length;I++)C[I]=k(g,n[I]);return C}
function V(g,k,n){let [C,I]=n[0],P=Math.min(C,k[0]),S=Math.min(I,k[1]),Y=Math.max(C,k[2]);k=Math.max(I,k[3]);for(let ca=1;ca<n.length;ca++){const [X,fa]=n[ca];C+=X;I+=fa;0>X&&(P=Math.min(P,C));0<X&&(Y=Math.max(Y,C));0>fa?S=Math.min(S,I):0<fa&&(k=Math.max(k,I))}g[0]=P;g[1]=S;g[2]=Y;g[3]=k;return g}function ea(g,k){if(!k.length)return null;g[0]=g[1]=Number.POSITIVE_INFINITY;g[2]=g[3]=Number.NEGATIVE_INFINITY;for(let n=0;n<k.length;n++)V(g,g,k[n]);return g}function x(g,k,n){g=r(g);k.xmin=z(g,n.xmin);
k.ymin=y(g,n.ymin);k.xmax=z(g,n.xmax);k.ymax=y(g,n.ymax);n.hasZ&&(k.zmin=K(g,n.zmin),k.zmax=K(g,n.zmax));n.hasM&&(k.mmin=J(g,n.mmin),k.mmax=J(g,n.mmax));k.hasZ=n.hasZ??!1;k.hasM=n.hasM??!1;return k}function a(g,k,n){g=r(g);k.points=Q(n.hasZ,n.hasM)(g,n.points)??[];k.hasZ=n.hasZ??!1;k.hasM=n.hasM??!1;return k}function d(g,k,n){g=r(g);k.x=z(g,n.x);k.y=y(g,n.y);null!=n.z&&(k.z=K(g,n.z));null!=n.m&&(k.m=J(g,n.m));return k}function c(g,k,n){{g=r(g);var C=n.rings;const I=[],P=Q(n.hasZ,n.hasM);for(let S=
0;S<C.length;S++){const Y=P(g,C[S]);Y&&3<=Y.length&&I.push(Y)}g=I.length?I:null}if(!g)return null;k.rings=g;k.hasZ=n.hasZ??!1;k.hasM=n.hasM??!1;return k}function t(g,k,n){{g=r(g);var C=n.paths;const I=[],P=Q(n.hasZ,n.hasM);for(let S=0;S<C.length;S++){const Y=P(g,C[S]);Y&&2<=Y.length&&I.push(Y)}g=I.length?I:null}if(!g)return null;k.paths=g;k.hasZ=n.hasZ??!1;k.hasM=n.hasM??!1;return k}const E=(g,k)=>{const n=[];if(!k.length)return null;var C=k[0];let I=z(g,C[0]);C=y(g,C[1]);n.push([I,C]);for(let P=
1;P<k.length;P++){const [S,Y]=k[P],ca=z(g,S),X=y(g,Y);ca===I&&X===C||n.push([ca-I,X-C]);I=ca;C=X}return n},R=(g,k)=>{const n=[];if(!k.length)return null;var C=k[0];let I=z(g,C[0]),P=y(g,C[1]);C=K(g,C[2]);n.push([I,P,C]);for(let S=1;S<k.length;S++){const [Y,ca,X]=k[S],fa=z(g,Y),ka=y(g,ca),ia=K(g,X);fa===I&&ka===P&&ia===C||n.push([fa-I,ka-P,ia]);I=fa;P=ka;C=ia}return n},h=(g,k)=>{const n=[];if(!k.length)return null;var C=k[0];let I=z(g,C[0]),P=y(g,C[1]);C=J(g,C[2]);n.push([I,P,C]);for(let S=1;S<k.length;S++){const [Y,
ca,X]=k[S],fa=z(g,Y),ka=y(g,ca),ia=J(g,X);fa===I&&ka===P&&ia===C||n.push([fa-I,ka-P,ia]);I=fa;P=ka;C=ia}return n},A=(g,k)=>{const n=[];if(!k.length)return null;var C=k[0];let I=z(g,C[0]),P=y(g,C[1]),S=K(g,C[2]);C=J(g,C[3]);n.push([I,P,S,C]);for(let Y=1;Y<k.length;Y++){const [ca,X,fa,ka]=k[Y],ia=z(g,ca),pa=y(g,X),oa=K(g,fa),na=J(g,ka);ia===I&&pa===P&&oa===S&&na===C||n.push([ia-I,pa-P,oa,na]);I=ia;P=pa;S=oa;C=na}return n},H=(g,k)=>{const n=Array(k.length);if(!k.length)return n;var C=k[0];let I=D(g,
C[0]);C=p(g,C[1]);n[0]=[I,C];const {scale:P,originPosition:S}=g;g=P[0];const Y="lowerLeft"===S?P[1]:-P[1];for(let ca=1;ca<k.length;ca++){const [X,fa]=k[ca];I+=g*X;C+=Y*fa;n[ca]=[I,C]}return n},U=(g,k)=>{const n=Array(k.length);if(!k.length)return n;var C=k[0];let I=D(g,C[0]),P=p(g,C[1]);n[0]=[I,P,q(g,C[2])];const {scale:S,originPosition:Y}=g;C=S[0];const ca="lowerLeft"===Y?S[1]:-S[1];for(let X=1;X<k.length;X++){const [fa,ka,ia]=k[X];I+=C*fa;P+=ca*ka;n[X]=[I,P,q(g,ia)]}return n},N=(g,k)=>{const n=
Array(k.length);if(!k.length)return n;var C=k[0];let I=D(g,C[0]),P=p(g,C[1]);n[0]=[I,P,M(g,C[2])];const {scale:S,originPosition:Y}=g;C=S[0];const ca="lowerLeft"===Y?S[1]:-S[1];for(let X=1;X<k.length;X++){const [fa,ka,ia]=k[X];I+=C*fa;P+=ca*ka;n[X]=[I,P,M(g,ia)]}return n},Z=(g,k)=>{const n=Array(k.length);if(!k.length)return n;var C=k[0];let I=D(g,C[0]),P=p(g,C[1]);n[0]=[I,P,q(g,C[2]),M(g,C[3])];const {scale:S,originPosition:Y}=g;C=S[0];const ca="lowerLeft"===Y?S[1]:-S[1];for(let X=1;X<k.length;X++){const [fa,
ka,ia,pa]=k[X];I+=C*fa;P+=ca*ka;n[X]=[I,P,q(g,ia),M(g,pa)]}return n};e.getQuantizedBoundsCoordsArray=V;e.getQuantizedBoundsCoordsArrayArray=ea;e.getQuantizedBoundsPaths=function(g){return ea([0,0,0,0],g)};e.getQuantizedBoundsPoints=function(g){const k=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return V(k,k,g)};e.getQuantizedBoundsRings=function(g){return ea([0,0,0,0],g)};e.normalizeTransform=r;e.quantizeBounds=function(g,k,n){g=r(g);k[0]=
z(g,n[0]);k[3]=y(g,n[1]);k[2]=z(g,n[2]);k[1]=y(g,n[3]);return k};e.quantizeCoordsArrayXY=E;e.quantizeCoordsArrayXYM=h;e.quantizeCoordsArrayXYZ=R;e.quantizeCoordsArrayXYZM=A;e.quantizeExtent=x;e.quantizeGeometry=function(g,k){return g&&k?u.isPoint(k)?d(g,{},k):u.isPolyline(k)?t(g,{},k):u.isPolygon(k)?c(g,{},k):u.isMultipoint(k)?a(g,{},k):u.isExtent(k)?x(g,{},k):null:null};e.quantizeM=J;e.quantizeMultipoint=a;e.quantizePoint=d;e.quantizePolygon=c;e.quantizePolyline=t;e.quantizeX=z;e.quantizeY=y;e.quantizeZ=
K;e.toQuantizationTransform=function(g){return g?{originPosition:"upper-left"===g.originPosition?"upperLeft":"lower-left"===g.originPosition?"lowerLeft":g.originPosition,scale:g.tolerance?[g.tolerance,g.tolerance,1,1]:[1,1,1,1],translate:null!=g.extent?[g.extent.xmin,g.extent.ymax,g.extent.zmin??0,g.extent.mmin??0]:[0,0,0,0]}:null};e.unquantizeBounds=function(g,k,n){g=r(g);return n?(k[0]=D(g,n[0]),k[1]=p(g,n[3]),k[2]=D(g,n[2]),k[3]=p(g,n[1]),k):[D(g,k[0]),p(g,k[3]),D(g,k[2]),p(g,k[1])]};e.unquantizeCoordsArrayArray=
W;e.unquantizeCoordsArrayXY=H;e.unquantizeCoordsArrayXYM=N;e.unquantizeCoordsArrayXYZ=U;e.unquantizeCoordsArrayXYZM=Z;e.unquantizeExtent=function(g,k,n,C=n.hasZ??!1,I=n.hasM??!1){g=r(g);k.xmin=D(g,n.xmin);k.xmax=D(g,n.xmax);k.ymin=p(g,n.ymin);k.ymax=p(g,n.ymax);C&&(k.zmin=q(g,n.zmin),k.zmax=q(g,n.zmax));I&&(k.mmin=M(g,n.mmin),k.mmax=M(g,n.mmax));k.hasZ=C;k.hasM=I;return k};e.unquantizeM=M;e.unquantizeMultipoint=function(g,k,n,C=n?.hasZ??!1,I=n?.hasM??!1){null!=n&&(g=r(g),k.points=aa(C,I)(g,n.points),
k.hasZ=C,k.hasM=I);return k};e.unquantizePoint=function(g,k,n,C=null!=n?.z,I=null!=n?.m){if(null==n)return k;g=r(g);k.x=D(g,n.x);k.y=p(g,n.y);C&&(k.z=q(g,n.z));I&&(k.m=M(g,n.m));return k};e.unquantizePolygon=function(g,k,n,C=n?.hasZ??!1,I=n?.hasM??!1){null!=n&&(g=r(g),k.rings=W(g,aa(C,I),n.rings),k.hasZ=C,k.hasM=I);return k};e.unquantizePolyline=function(g,k,n,C=n?.hasZ??!1,I=n?.hasM??!1){null!=n&&(g=r(g),k.paths=W(g,aa(C,I),n.paths),k.hasZ=C,k.hasM=I);return k};e.unquantizeX=D;e.unquantizeY=p;e.unquantizeZ=
q;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),function(e,u,r,z,y,K,J,Q,D,
p,q,M){var aa;const W=new u.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});u=aa=class extends r.JSONSupport{constructor(V){super(V);this.alias=null;this.defaultValue=
void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(V,{description:ea}){V=null;try{V=ea?JSON.parse(ea):null}catch(x){}return V?.value??null}readValueType(V,{description:ea}){V=null;try{V=ea?JSON.parse(ea):null}catch(x){}return V?W.fromJSON(V.fieldValueType):null}clone(){return new aa({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??
null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};e.__decorate([z.property({type:String,json:{write:!0}})],u.prototype,"alias",void 0);e.__decorate([z.property({type:[String,Number],json:{write:{allowNull:!0}}})],u.prototype,"defaultValue",void 0);e.__decorate([z.property()],u.prototype,"description",void 0);e.__decorate([D.reader("description")],u.prototype,"readDescription",null);e.__decorate([z.property({types:q.types,
json:{read:{reader:q.fromJSON},write:!0}})],u.prototype,"domain",void 0);e.__decorate([z.property({type:Boolean,json:{write:!0}})],u.prototype,"editable",void 0);e.__decorate([z.property({type:y.Integer,json:{write:{overridePolicy(V){return{enabled:Number.isFinite(V)}}}}})],u.prototype,"length",void 0);e.__decorate([z.property({type:String,json:{write:!0}})],u.prototype,"name",void 0);e.__decorate([z.property({type:Boolean,json:{write:!0}})],u.prototype,"nullable",void 0);e.__decorate([Q.enumeration(M.kebabDict)],
u.prototype,"type",void 0);e.__decorate([z.property()],u.prototype,"valueType",void 0);e.__decorate([D.reader("valueType",["description"])],u.prototype,"readValueType",null);e.__decorate([z.property({type:Boolean,json:{read:!1}})],u.prototype,"visible",void 0);return u=aa=e.__decorate([p.subclass("esri.layers.support.Field")],u)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(e,u,r){e.enumeration=function(z,y={}){z=z instanceof
u.JSONMap?z:new u.JSONMap(z,y);const {alwaysWriteDefaults:K,default:J,ignoreUnknown:Q=!0,name:D,nonNullable:p,readOnly:q=!1}=y;return r.property({type:Q?z.apiValues:String,json:{type:z.jsonValues,default:J,name:D,read:q?!1:{reader:z.read},write:{writer:z.write,alwaysWriteDefaults:K}},nonNullable:p,readOnly:q})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(e,u,r,z,y,K){u={key:"type",base:z,typeMap:{range:K,"coded-value":r,inherited:y}};e.CodedValueDomain=r;e.DomainBase=z;e.InheritedDomain=y;e.RangeDomain=K;e.fromJSON=function(J){if(!J?.type)return null;switch(J.type){case "range":return K.fromJSON(J);case "codedValue":return r.fromJSON(J);case "inherited":return y.fromJSON(J)}return null};e.types=u;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(e,u,r,z,y,K,J,Q,D){var p;z=p=class extends D{constructor(q){super(q);this.codedValues=null;this.type="coded-value"}getName(q){let M=null;if(this.codedValues){const aa=String(q);this.codedValues.some(W=>{String(W.code)===aa&&(M=W.name);return!!M})}return M}clone(){return new p({codedValues:u.clone(this.codedValues),name:this.name})}};e.__decorate([r.property({type:[Q.CodedValue],json:{write:!0}})],z.prototype,"codedValues",void 0);e.__decorate([K.enumeration({codedValue:"coded-value"})],z.prototype,
"type",void 0);return z=p=e.__decorate([J.subclass("esri.layers.support.CodedValueDomain")],z)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(e,u,r,z,y,K,J,Q){var D;e.CodedValue=D=class extends r.JSONSupport{constructor(p){super(p);this.code=this.name=null}clone(){return new D({name:this.name,
code:this.code})}};u.__decorate([z.property({type:String,json:{write:!0}})],e.CodedValue.prototype,"name",void 0);u.__decorate([z.property({type:[String,Number],json:{write:!0}})],e.CodedValue.prototype,"code",void 0);e.CodedValue=D=u.__decorate([Q.subclass("esri.layers.support.CodedValue")],e.CodedValue);Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,u,r,z,y,K,J,Q,D){u=new u.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});r=class extends r.JSONSupport{constructor(p){super(p);this.type=this.name=null}};e.__decorate([z.property({type:String,json:{write:!0}})],r.prototype,"name",void 0);e.__decorate([Q.enumeration(u)],r.prototype,"type",void 0);return r=e.__decorate([D.subclass("esri.layers.support.Domain")],r)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(e,u,r,z,y,K,J,Q){var D;u=D=class extends Q{constructor(p){super(p);this.type="inherited"}clone(){return new D}};e.__decorate([K.enumeration({inherited:"inherited"})],u.prototype,"type",void 0);return u=D=e.__decorate([J.subclass("esri.layers.support.InheritedDomain")],u)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(e,u,r,z,y,K,J,Q){var D;r=D=class extends Q{constructor(p){super(p);this.minValue=this.maxValue=null;this.type="range"}clone(){return new D({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e.__decorate([u.property({json:{type:[Number],read:{source:"range",reader(p,q){return q.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(p,q,M){q[M]=[this.minValue||0,p]}}}})],r.prototype,"maxValue",void 0);e.__decorate([u.property({json:{type:[Number],
read:{source:"range",reader(p,q){return q.range?.[0]}},write:{target:"range",writer(p,q,M){q[M]=[p,this.maxValue||0]}}}})],r.prototype,"minValue",void 0);e.__decorate([K.enumeration({range:"range"})],r.prototype,"type",void 0);return r=D=e.__decorate([J.subclass("esri.layers.support.RangeDomain")],r)})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(e,u){u=new u.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});e.kebabDict=u;Object.defineProperty(e,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/mathUtils","../../geometry/support/spatialReferenceUtils"],function(e,u,r,z){function y(p,q){if(p===q)return!0;if(null==p||null==q||p.length!==q.length)return!1;for(let M=0;M<p.length;M++){const aa=p[M],W=q[M];if(aa.length!==W.length)return!1;for(let V=0;V<aa.length;V++)if(aa[V]!==W[V])return!1}return!0}function K(p,q){if(p===q)return!0;if(null==p||null==q||p.length!==
q.length)return!1;for(let M=0;M<p.length;M++)if(!y(p[M],q[M]))return!1;return!0}function J(p,q){return p===q||null!=p&&null!=q&&z.equals(p.spatialReference,q.spatialReference)&&p.x===q.x&&p.y===q.y&&p.z===q.z&&p.m===q.m}function Q(p,q){if(p===q)return!0;if(null==p||null==q||p.type!==q.type)return!1;switch(p.type){case "point":return J(p,q);case "extent":return p=p.hasZ!==q.hasZ||p.hasM!==q.hasM?!1:z.equals(p.spatialReference,q.spatialReference)?p.xmin===q.xmin&&p.ymin===q.ymin&&p.zmin===q.zmin&&p.xmax===
q.xmax&&p.ymax===q.ymax&&p.zmax===q.zmax:!1,p;case "polyline":return p=p.hasZ!==q.hasZ||p.hasM!==q.hasM?!1:z.equals(p.spatialReference,q.spatialReference)?K(p.paths,q.paths):!1,p;case "polygon":return p=p.hasZ!==q.hasZ||p.hasM!==q.hasM?!1:z.equals(p.spatialReference,q.spatialReference)?K(p.rings,q.rings):!1,p;case "multipoint":return p=p.hasZ!==q.hasZ||p.hasM!==q.hasM?!1:z.equals(p.spatialReference,q.spatialReference)?y(p.points,q.points):!1,p;case "mesh":return!1}}function D(p,q){if(p===q)return!0;
if(!p||!q)return!1;const M=Object.keys(p),aa=Object.keys(q);if(M.length!==aa.length)return!1;for(const W of M)if(p[W]!==q[W])return!1;return!0}e.equals=function(p,q){return p===q?!0:null!=p&&null!=q&&p.objectId===q.objectId&&Q(p.geometry,q.geometry)&&D(p.attributes,q.attributes)?!0:!1};e.pointEquals=J;e.pointNear=function(p,q,M){return p===q||null!=p&&null!=q&&z.equals(p.spatialReference,q.spatialReference)&&r.floatEqualAbsolute(p.x,q.x,M)&&r.floatEqualAbsolute(p.y,q.y,M)&&r.floatEqualAbsolute(p.z??
0,q.z??0,M)&&r.floatEqualAbsolute(p.m??0,q.m??0,M)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(e,u,r,z,y,K,J,Q,D,p){function q(b,f){return b?f?4:3:f?3:2}function M(b,
f,l,m){if(b){if(l)return f&&m?wa:va;if(f&&m)return xa}else if(f&&m)return va;return ya}function aa({scale:b,translate:f},l){return Math.round((l-f[0])/b[0])}function W({scale:b,translate:f},l){return Math.round((f[1]-l)/b[1])}function V({scale:b,translate:f},l,m){return l*b[m]+f[m]}function ea(b){b=b.coords;return{x:b[0],y:b[1]}}function x(b,f){b.coords[0]=f.x;b.coords[1]=f.y;return b}function a(b){b=b.coords;return{x:b[0],y:b[1],z:b[2]}}function d(b,f){b.coords[0]=f.x;b.coords[1]=f.y;b.coords[2]=
f.z;return b}function c(b){b=b.coords;return{x:b[0],y:b[1],m:b[2]}}function t(b,f){b.coords[0]=f.x;b.coords[1]=f.y;b.coords[2]=f.m;return b}function E(b){b=b.coords;return{x:b[0],y:b[1],z:b[2],m:b[3]}}function R(b,f){b.coords[0]=f.x;b.coords[1]=f.y;b.coords[2]=f.z;b.coords[3]=f.m;return b}function h(b,f){return b&&f?R:b?d:f?t:x}function A(b,f,l,m,w){l=h(l,m);for(const {geometry:v,attributes:B}of f)f=null!=v?l(new p,v):null,b.push(new Q.OptimizedFeature(f,B,null,w?B[w]:void 0));return b}function H(b,
f,l=h(null!=f.z,null!=f.m)){return l(b,f)}function U(b,f,l,m){for(const {geometry:w,attributes:v}of f)b.push({attributes:v,geometry:null!=w?N(w,l,m):null});return b}function N(b,f,l){if(null==b)return null;const m=q(f,l),w=[];for(let v=0;v<b.coords.length;v+=m){const B=[];for(let F=0;F<m;F++)B.push(b.coords[v+F]);w.push(B)}return f?l?{points:w,hasZ:f,hasM:l}:{points:w,hasZ:f}:l?{points:w,hasM:l}:{points:w}}function Z(b,f,l,m,w){l=q(l,m);for(const {geometry:v,attributes:B}of f)f=null!=v?g(new p,v,
l):null,b.push(new Q.OptimizedFeature(f,B,null,w?B[w]:void 0));return b}function g(b,f,l=q(f.hasZ,f.hasM)){b.lengths[0]=f.points.length;const m=b.coords;let w=0;for(const v of f.points)for(f=0;f<l;f++)m[w++]=v[f];return b}function k(b,f,l){if(!b)return null;const m=q(f,l),{coords:w,lengths:v}=b;b=[];let B=0;for(const F of v){const G=[];for(let T=0;T<F;T++){const L=[];for(let O=0;O<m;O++)L.push(w[B++]);G.push(L)}b.push(G)}return f?l?{paths:b,hasZ:f,hasM:l}:{paths:b,hasZ:f}:l?{paths:b,hasM:l}:{paths:b}}
function n(b,f,l,m,w){l=q(l,m);for(const {geometry:v,attributes:B,centroid:F}of f)f=null!=v?C(new p,v,l):null,m=null!=F?H(new p,F):null,b.push(new Q.OptimizedFeature(f,B,m,w?B[w]:void 0));return b}function C(b,f,l=q(f.hasZ,f.hasM)){const {lengths:m,coords:w}=b;let v=0;for(const B of f.paths){for(const F of B)for(f=0;f<l;f++)w[v++]=F[f];m.push(B.length)}return b}function I(b,f,l){if(!b)return null;const m=q(f,l),{coords:w,lengths:v}=b;b=[];let B=0;for(const F of v){const G=[];for(let T=0;T<F;T++){const L=
[];for(let O=0;O<m;O++)L.push(w[B++]);G.push(L)}b.push(G)}return f?l?{rings:b,hasZ:f,hasM:l}:{rings:b,hasZ:f}:l?{rings:b,hasM:l}:{rings:b}}function P(b,f,l=f.hasZ,m=f.hasM){return S(b,f.rings,l,m)}function S(b,f,l,m){l=q(l,m);const {lengths:w,coords:v}=b;m=0;oa(b);for(const B of f){for(const F of B)for(f=0;f<l;f++)v[m++]=F[f];w.push(B.length)}return b}function Y(b,f,l,m,w,v){na(b);if(!l){for(const B of f)b.push(new Q.OptimizedFeature(null,B.attributes,null,v?B.attributes[v]:void 0));return b}switch(l){case "esriGeometryPoint":return A(b,
f,m,w,v);case "esriGeometryMultipoint":return Z(b,f,m,w,v);case "esriGeometryPolyline":return n(b,f,m,w,v);case "esriGeometryPolygon":case "esriGeometryMultiPatch":for(const {geometry:B,centroid:F,attributes:G}of f)f=null!=B?P(new p,B,m,w):null,l=v?G[v]:void 0,null!=F?b.push(new Q.OptimizedFeature(f,G,x(new p,F),l)):b.push(new Q.OptimizedFeature(f,G,null,l));break;default:sa().error("convertToFeatureSet:unknown-geometry",new u(`Unable to parse unknown geometry type '${l}'`)),na(b)}return b}function ca(b,
f,l,m){b=b&&("coords"in b?b:b.geometry);if(null==b)return null;switch(f){case "esriGeometryPoint":return f=ea,l&&m?f=E:l?f=a:m&&(f=c),f(b);case "esriGeometryMultipoint":return N(b,l,m);case "esriGeometryPolyline":return k(b,l,m);case "esriGeometryPolygon":return I(b,l,m);default:return sa().error("convertToGeometry:unknown-geometry",new u(`Unable to parse unknown geometry type '${f}'`)),null}}function X(b,f,l,m,w){na(b);if(null==l){for(const B of f)b.push({attributes:B.attributes});return b}switch(l){case "esriGeometryPoint":l=
ea;m&&w?l=E:m?l=a:w&&(l=c);for(var v of f){const {geometry:B,attributes:F}=v;m=null!=B?l(B):null;b.push({attributes:F,geometry:m})}break;case "esriGeometryMultipoint":return U(b,f,m,w);case "esriGeometryPolyline":for(const {geometry:B,attributes:F}of f)b.push({attributes:F,geometry:null!=B?k(B,m,w):null});break;case "esriGeometryPolygon":for(const {geometry:B,attributes:F,centroid:G}of f)v=null!=B?I(B,m,w):null,null!=G?(f=ea(G),b.push({attributes:F,centroid:f,geometry:v})):b.push({attributes:F,geometry:v});
break;default:sa().error("convertToFeatureSet:unknown-geometry",new u(`Unable to parse unknown geometry type '${l}'`))}return b}function fa(b,f,l,m,w,v,B=l,F=m){oa(b);if(!f?.coords.length)return null;w=ua[w];const {coords:G,lengths:T}=f;f=q(l,m);const L=q(l&&B,m&&F);l=M(l,m,B,F);if(!T.length)return l(b.coords,G,0,0,aa(v,G[0]),W(v,G[1])),oa(b,f,0),b;let O,ba=0,da,ja=0;for(const la of T){if(la<w)continue;let ha=0;da=ja;F=m=aa(v,G[ba]);O=B=W(v,G[ba+1]);l(b.coords,G,da,ba,F,O);ha++;ba+=f;da+=L;for(let ma=
1;ma<la;ma++,ba+=f)if(F=aa(v,G[ba]),O=W(v,G[ba+1]),F!==m||O!==B)l(b.coords,G,da,ba,F-m,O-B),da+=L,ha++,m=F,B=O;ha>=w&&(b.lengths.push(ha),ja=da)}na(b.coords,ja);return b.coords.length?b:null}function ka(b,f,l,m,w,v,B){let F=m,G=0;for(let L=v+l;L<B;L+=l){var T=f[L];const O=f[L+1],ba=f[B],da=f[B+1];let ja=f[v],la=f[v+1],ha=ba-ja,ma=da-la;if(0!==ha||0!==ma){const qa=((T-ja)*ha+(O-la)*ma)/(ha*ha+ma*ma);1<qa?(ja=ba,la=da):0<qa&&(ja+=ha*qa,la+=ma*qa)}ha=T-ja;ma=O-la;T=ha*ha+ma*ma;T>F&&(G=L,F=T)}F>m&&(G-
v>l&&ka(b,f,l,m,w,v,G),w(b,f,b.length,G,f[G],f[G+1]),B-G>l&&ka(b,f,l,m,w,G,B))}function ia(b,f,l,m,w){const {coords:v,lengths:B}=f;l=q(l,m);if(!v.length)return b!==f&&oa(b),b;z.assertIsSome(w);const {originPosition:F,scale:G,translate:T}=w;w=za;w.originPosition=F;m=w.scale;m[0]=G[0]??1;m[1]=-(G[1]??1);m[2]=G[2]??1;m[3]=G[3]??1;var L=w.translate;L[0]=T[0]??0;L[1]=T[1]??0;L[2]=T[2]??0;L[3]=T[3]??0;if(!B.length){for(m=0;m<l;++m)b.coords[m]=V(w,v[m],m);b!==f&&oa(b,l,0);return b}L=0;for(let ba=0;ba<B.length;ba++){const da=
B[ba];b.lengths[ba]=da;for(var O=0;O<l;++O)b.coords[L+O]=V(w,v[L+O],O);O=b.coords[L];let ja=b.coords[L+1];L+=l;for(let la=1;la<da;la++,L+=l){O+=v[L]*m[0];ja+=v[L+1]*m[1];b.coords[L]=O;b.coords[L+1]=ja;for(let ha=2;ha<l;++ha)b.coords[L+ha]=V(w,v[L+ha],ha)}}b!==f&&oa(b,v.length,B.length);return b}function pa(b,f,l,m){let w=0,v=b[m*f],B=b[m*(f+1)];for(let F=1;F<l;F++){const G=v+b[m*(f+F)],T=B+b[m*(f+F)+1],L=(G-v)*(T+B);v=G;B=T;w+=L}return.5*w}function oa(b,f=0,l=0){na(b.lengths,l);na(b.coords,f)}function na(b,
f=0){b.length!==f&&(b.length=f)}const sa=()=>r.getLogger("esri.layers.graphics.featureConversionUtils"),ua={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},ya=(b,f,l,m,w,v)=>{b[l]=w;b[l+1]=v},va=(b,f,l,m,w,v)=>{b[l]=w;b[l+1]=v;b[l+2]=f[m+2]},xa=(b,f,l,m,w,v)=>{b[l]=w;b[l+1]=v;b[l+2]=f[m+3]},wa=(b,f,l,m,w,v)=>{b[l]=w;b[l+1]=v;b[l+2]=f[m+2];b[l+3]=f[m+3]},ra=[],ta=[],za={originPosition:"lowerLeft",scale:[1,1,
1,1],translate:[0,0,0,0]};e.convertFromFeature=function(b,f,l,m,w){ra[0]=b;[b]=Y(ta,ra,f,l,m,w);na(ra);na(ta);return b};e.convertFromFeatureSet=function(b,f){const l=new D,{hasM:m,hasZ:w,features:v,objectIdFieldName:B,spatialReference:F,geometryType:G,exceededTransferLimit:T,transform:L,fields:O}=b;O&&(l.fields=O);l.geometryType=G??null;l.objectIdFieldName=B??f??null;l.spatialReference=F??null;if(!l.objectIdFieldName)return sa().error(new u("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
l;v&&Y(l.features,v,G,w,m,l.objectIdFieldName);T&&(l.exceededTransferLimit=T);m&&(l.hasM=m);w&&(l.hasZ=w);L&&(l.transform=L);return l};e.convertFromFeatures=Y;e.convertFromGeometry=function(b,f,l){if(null==b)return null;const m=new p;"hasZ"in b&&null==f&&(f=b.hasZ);"hasM"in b&&null==l&&(l=b.hasM);if(J.isPoint(b))return h(null!=f?f:null!=b.z,null!=l?l:null!=b.m)(m,b);if(J.isPolygon(b))return P(m,b,f,l);if(J.isPolyline(b))return C(m,b,q(f,l));if(J.isMultipoint(b))return g(m,b,q(f,l));sa().error("convertFromGeometry:unknown-geometry",
new u(`Unable to parse unknown geometry type '${b}'`))};e.convertFromMultipoint=g;e.convertFromMultipointFeatures=Z;e.convertFromNestedArray=S;e.convertFromPoint=H;e.convertFromPointFeatures=A;e.convertFromPolygon=P;e.convertFromPolyline=C;e.convertFromPolylineFeatures=n;e.convertToFeature=function(b,f,l,m){ta[0]=b;X(ra,ta,f,l,m);b=ra[0];na(ra);na(ta);return b};e.convertToFeatureSet=function(b){const {objectIdFieldName:f,spatialReference:l,transform:m,fields:w,hasM:v,hasZ:B,features:F,geometryType:G,
exceededTransferLimit:T,uniqueIdField:L,queryGeometry:O,queryGeometryType:ba}=b;b=X([],F,G,B,v);const da=ca(O,ba,!1,!1);b={features:b,fields:w,geometryType:G,objectIdFieldName:f,spatialReference:l,uniqueIdField:L,queryGeometry:da};m&&(b.transform=m);T&&(b.exceededTransferLimit=T);v&&(b.hasM=v);B&&(b.hasZ=B);return b};e.convertToFeatures=X;e.convertToGeometry=ca;e.convertToMultipoint=N;e.convertToMultipointFeatures=U;e.convertToPoint=function(b,f,l){return b?f?l?E(b):a(b):l?c(b):ea(b):null};e.convertToPolygon=
I;e.convertToPolyline=k;e.generalizeOptimizedGeometry=function(b,f,l,m,w,v,B=l,F=m){oa(b);if(!f?.coords.length)return null;w=ua[w];const {coords:G,lengths:T}=f;f=q(l,m);const L=q(l&&B,m&&F);l=M(l,m,B,F);if(!T.length)return l(b.coords,G,0,0,G[0],G[1]),oa(b,f,0),b;m=0;v*=v;for(const O of T){if(O<w){m+=O*f;continue}B=b.coords.length/L;F=m;const ba=m+(O-1)*f;l(b.coords,G,b.coords.length,F,G[F],G[F+1]);ka(b.coords,G,f,v,l,F,ba);l(b.coords,G,b.coords.length,ba,G[ba],G[ba+1]);F=b.coords.length/L-B;F>=w?
b.lengths.push(F):na(b.coords,B*L);m+=O*f}return b.coords.length?b:null};e.getBoundsOptimizedGeometry=function(b,f,l,m){if(!f?.coords?.length)return null;l=q(l,m);let w=m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,B=Number.NEGATIVE_INFINITY;if(f&&f.coords){f=f.coords;for(let F=0;F<f.length;F+=l){const G=f[F],T=f[F+1];m=Math.min(m,G);v=Math.max(v,G);w=Math.min(w,T);B=Math.max(B,T)}}y.is(b)?y.fromRectValues(b,m,w,v,B):K.fromValues(m,w,v,B,b);return b};e.getQuantizedArea=function(b,f){const {coords:l,
lengths:m}=b;let w=b=0;for(let v=0;v<m.length;v++){const B=m[v];w+=pa(l,b,B,f);b+=B}return Math.abs(w)};e.getQuantizedBoundsOptimizedGeometry=function(b,f,l,m){l=q(l,m);const {lengths:w,coords:v}=f;m=f=Number.POSITIVE_INFINITY;let B=Number.NEGATIVE_INFINITY,F=Number.NEGATIVE_INFINITY,G=0;for(const T of w){let L=v[G],O=v[G+1];f=Math.min(L,f);m=Math.min(O,m);B=Math.max(L,B);F=Math.max(O,F);G+=l;for(let ba=1;ba<T;ba++,G+=l){const da=v[G],ja=v[G+1];L+=da;O+=ja;0>da&&(f=Math.min(f,L));0<da&&(B=Math.max(B,
L));0>ja?m=Math.min(m,O):0<ja&&(F=Math.max(F,O))}}b[0]=f;b[1]=m;b[2]=B;b[3]=F;return b};e.getSignedQuantizedRingArea=pa;e.quantizeOptimizedFeatureSet=function(b,f){const {geometryType:l,features:m,hasM:w,hasZ:v}=f;if(!b)return f;for(let B=0;B<m.length;B++){const F=m[B],G=F.weakClone();G.geometry=new p;fa(G.geometry,F.geometry,w,v,l,b);F.centroid&&(G.centroid=new p,fa(G.centroid,F.centroid,w,v,"esriGeometryPoint",b));m[B]=G}f.transform=b;return f};e.quantizeOptimizedGeometry=fa;e.quantizeX=aa;e.quantizeY=
W;e.removeCollinearVertices=function(b,f,l,m,w){if(!f?.coords?.length)return null;l=ua[l];const {coords:v,lengths:B}=f;f=M(m,w,m,w);m=q(m,w);let F=w=0,G=0,T=0;for(const ba of B){F=T;f(b.coords,v,F,w,v[w],v[w+1]);w+=m;var L=v[w];let da=v[w+1],ja=L,la=da;var O=da/L;F+=m;f(b.coords,v,F,w,ja,la);w+=m;for(let ha=2;ha<ba;ha++){L=v[w];da=v[w+1];const ma=da/L,qa=O===ma||!isFinite(O)&&!isFinite(ma);O=qa&&isFinite(ma)?0<=O&&0<=ma||0>=O&&0>=ma:0<=la&&0<=da||0>=la&&0>=da;qa&&O?(ja+=L,la+=da):(ja=L,la=da,F+=m);
f(b.coords,v,F,w,ja,la);w+=m;O=ma}F+=m;L=(F-T)/m;L>=l&&(b.lengths[G]=L,T=F,G++)}b.coords.length>T&&(b.coords.length=T);b.lengths.length>G&&(b.lengths.length=G);return b.coords.length&&b.lengths.length?b:null};e.removeZMValues=function(b,f,l,m,w,v){oa(b);b.lengths.push(...f.lengths);if(l===w&&m===v)for(var B=0;B<f.coords.length;B++)b.coords.push(f.coords[B]);else for(B=q(l,m),l=M(l,m,w,v),f=f.coords,m=0;m<f.length;m+=B)l(b.coords,f,b.coords.length,m,f[m],f[m+1]);return b};e.unquantizeOptimizedFeatureSet=
function(b){const {transform:f,features:l,hasM:m,hasZ:w}=b;if(!f)return b;for(const v of l)null!=v.geometry&&ia(v.geometry,v.geometry,m,w,f),null!=v.centroid&&ia(v.centroid,v.centroid,m,w,f);b.transform=null;return b};e.unquantizeOptimizedGeometry=ia;e.unquantizeValue=V;e.unquantizeX=function(b,f){return V(b,f,0)};e.unquantizeY=function(b,f){return V(b,-f,1)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],
function(e,u){class r{constructor(y=null,K={},J,Q){this.geometry=y;this.attributes=K;this.centroid=J;this.objectId=Q;this.geohashY=this.geohashX=this.displayId=0}static fromJSON(y,K){const J=y.geometry?u.fromJSON(y.geometry):null,Q=y.centroid?u.fromJSON(y.centroid):null;return new r(J,y.attributes,Q,y.attributes[K])}weakClone(){const y=new r(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y}clone(){var y=
this.geometry?.clone();y=new r(y,{...this.attributes},this.centroid?.clone(),this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y}}class z extends r{}e.OptimizedFeature=r;e.OptimizedFeatureWithGeometry=z;e.hasGeometry=function(y){return!!y.geometry?.coords?.length};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class e{constructor(u=[],r=[]){this.lengths=u??[];this.coords=
r??[]}static fromJSON(u){return new e(u.lengths,u.coords)}static fromRect(u){const [r,z,y,K]=u;u=y-r;const J=K-z;return new e([5],[r,z,u,0,0,J,-u,0,0,-J])}get isPoint(){return 0===this.lengths.length&&2<=this.coords.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((u,r)=>u+r)}forEachVertex(u){let r=0;this.lengths.length||u(this.coords[0],this.coords[1]);for(let z=0;z<this.lengths.length;z++){const y=this.lengths[z];for(let K=0;K<y;K++)u(this.coords[2*(K+
r)],this.coords[2*(K+r)+1]);r+=y}}deltaDecode(){const u=this.clone(),{coords:r,lengths:z}=u;let y=0;for(const K of z){for(let J=1;J<K;J++)r[2*(y+J)]+=r[2*(y+J)-2],r[2*(y+J)+1]+=r[2*(y+J)-1];y+=K}return u}clone(u){if(0===this.lengths.length)return new e([],[this.coords[0],this.coords[1]]);var r=2*(0===this.lengths.length?1:this.lengths.reduce((z,y)=>z+y));r=this.coords.slice(0,r);return u?(u.set(r),new e(this.lengths,u)):new e(Array.from(this.lengths),Array.from(r))}}return e})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class e{constructor(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const u=new e;u.objectIdFieldName=this.objectIdFieldName;u.globalIdFieldName=this.globalIdFieldName;u.geohashFieldName=this.geohashFieldName;u.geometryProperties=this.geometryProperties;u.geometryType=this.geometryType;
u.spatialReference=this.spatialReference;u.hasZ=this.hasZ;u.hasM=this.hasM;u.features=this.features;u.fields=this.fields;u.transform=this.transform;u.exceededTransferLimit=this.exceededTransferLimit;u.uniqueIdField=this.uniqueIdField;u.queryGeometry=this.queryGeometry;u.queryGeometryType=this.queryGeometryType;return u}}return e})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(e,u){e.parsePBFFeatureQuery=function(r,z){var y=u.parseFeatureQuery(r,
z);r=y.queryResult.featureResult;z=y.queryResult.queryGeometry;y=y.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const K=r.objectIdFieldName;for(const J of r.features)J.attributes&&(J.objectId=J.attributes[K])}r&&(r.queryGeometry=z,r.queryGeometryType=y);return r};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry",
"./pbfOptimizedFeatureSet"],function(e,u,r,z,y){function K(h){return h>=t.length?null:t[h]}function J(h,A,H){h=h.asUnsafe();for(H=A.createPointGeometry(H);h.next();)switch(h.tag()){case 3:var U=h.getUInt32();U=h.pos()+U;let N=0;for(;h.pos()<U;)A.addCoordinatePoint(H,h.getSInt64(),N++);break;default:h.skip()}return H}function Q(h,A,H){h=h.asUnsafe();const U=A.createGeometry(H);for(H=2+(H.hasZ?1:0)+(H.hasM?1:0);h.next();)switch(h.tag()){case 2:var N=h.getUInt32();N=h.pos()+N;for(var Z=0;h.pos()<N;)A.addLength(U,
h.getUInt32(),Z++);break;case 3:N=h.getUInt32();N=h.pos()+N;Z=0;for(A.allocateCoordinates(U);h.pos()<N;)A.addCoordinate(U,h.getSInt64(),Z),Z++,Z===H&&(Z=0);break;default:h.skip()}return U}function D(h){h=h.asUnsafe();const A=new z;let H="esriGeometryPoint";for(;h.next();)switch(h.tag()){case 2:var U=h.getUInt32();for(U=h.pos()+U;h.pos()<U;)A.lengths.push(h.getUInt32());break;case 3:U=h.getUInt32();for(U=h.pos()+U;h.pos()<U;)A.coords.push(h.getSInt64());break;case 1:H=y.optimizedGeometryTypes[h.getEnum()];
break;default:h.skip()}return{queryGeometry:A,queryGeometryType:H}}function p(h){for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function q(h){h=h.asUnsafe();const A={type:K(0)};for(;h.next();)switch(h.tag()){case 1:A.name=
h.getString();break;case 2:A.type=K(h.getEnum());break;case 3:A.alias=h.getString();break;case 4:var H=h.getEnum();H=H>=E.length?null:E[H];A.sqlType=H;break;case 5:h.skip();break;case 6:A.defaultValue=h.getString();break;default:h.skip()}return A}function M(h){const A={};for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:A.name=h.getString();break;case 2:A.isSystemMaintained=h.getBool();break;default:h.skip()}return A}function aa(h,A,H,U){const N=A.createFeature(H);let Z=0;for(;h.next();)switch(h.tag()){case 1:const g=
U[Z++].name;N.attributes[g]=h.processMessage(p);break;case 2:N.geometry=h.processMessageWithArgs(Q,A,H);break;case 4:N.centroid=h.processMessageWithArgs(J,A,H);break;default:h.skip()}return N}function W(h){const A=[1,1,1,1];for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:A[0]=h.getDouble();break;case 2:A[1]=h.getDouble();break;case 4:A[2]=h.getDouble();break;case 3:A[3]=h.getDouble();break;default:h.skip()}return A}function V(h){const A=[0,0,0,0];for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:A[0]=
h.getDouble();break;case 2:A[1]=h.getDouble();break;case 4:A[2]=h.getDouble();break;case 3:A[3]=h.getDouble();break;default:h.skip()}return A}function ea(h){const A={originPosition:0>=R.length?null:R[0]};for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:var H=h.getEnum();A.originPosition=H>=R.length?null:R[H];break;case 2:A.scale=h.processMessage(W);break;case 3:A.translate=h.processMessage(V);break;default:h.skip()}return A}function x(h){const A={};for(h=h.asUnsafe();h.next();)switch(h.tag()){case 1:A.shapeAreaFieldName=
h.getString();break;case 2:A.shapeLengthFieldName=h.getString();break;case 3:A.units=h.getString();break;default:h.skip()}return A}function a(h,A){for(A=A.createSpatialReference();h.next();)switch(h.tag()){case 1:A.wkid=h.getUInt32();break;case 5:A.wkt=h.getString();break;case 2:A.latestWkid=h.getUInt32();break;case 3:A.vcsWkid=h.getUInt32();break;case 4:A.latestVcsWkid=h.getUInt32();break;default:h.skip()}return A}function d(h,A){const H=A.createFeatureResult();h=h.asUnsafe();H.geometryType=0>=A.geometryTypes.length?
null:A.geometryTypes[0];let U=!1;for(;h.next();)switch(h.tag()){case 1:H.objectIdFieldName=h.getString();break;case 3:H.globalIdFieldName=h.getString();break;case 4:H.geohashFieldName=h.getString();break;case 5:H.geometryProperties=h.processMessage(x);break;case 7:var N=h.getEnum();H.geometryType=N>=A.geometryTypes.length?null:A.geometryTypes[N];break;case 8:H.spatialReference=h.processMessageWithArgs(a,A);break;case 10:H.hasZ=h.getBool();break;case 11:H.hasM=h.getBool();break;case 12:H.transform=
h.processMessage(ea);break;case 9:H.exceededTransferLimit=h.getBool();break;case 13:A.addField(H,h.processMessage(q));break;case 15:U||(A.prepareFeatures(H),U=!0);A.addFeature(H,h.processMessageWithArgs(aa,A,H,H.fields));break;case 2:H.uniqueIdField=h.processMessage(M);break;default:h.skip()}A.finishFeatureResult(H);return H}function c(h,A){const H={};let U=null;for(;h.next();)switch(h.tag()){case 4:U=h.processMessageWithArgs(D);break;case 1:H.featureResult=h.processMessageWithArgs(d,A);break;default:h.skip()}null!=
U&&H.featureResult&&A.addQueryGeometry(H,U);return H}const t="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML esriFieldTypeBigInteger esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "),E="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
R=["upperLeft","lowerLeft"];e.parseFeatureQuery=function(h,A){try{const H=new r(new Uint8Array(h),new DataView(h));for(h={};H.next();)switch(H.tag()){case 2:h.queryResult=H.processMessageWithArgs(c,A);break;default:H.skip()}return h}catch(H){throw new u("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:H});}};e.parseField=q;e.parseFieldType=K;e.parseTransform=ea;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(e,u,r,z,y,K){const J=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Q{constructor(D){this._options=D;this.geometryTypes=J;this._vertexDimension=this._coordinatePtr=0}createFeatureResult(){return new y}prepareFeatures(D){this._vertexDimension=2;D.hasZ&&this._vertexDimension++;D.hasM&&this._vertexDimension++}finishFeatureResult(D){if(D?.features&&D.hasZ&&this._options.sourceSpatialReference&&D.spatialReference&&!r.equals(D.spatialReference,
this._options.sourceSpatialReference)&&!D.spatialReference.vcsWkid){var p=u.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),q=u.getMetersPerVerticalUnitForSR(D.spatialReference);p/=q;if(1!==p)for(const M of D.features)if(z.hasGeometry(M))for(D=M.geometry.coords,q=2;q<D.length;q+=3)D[q]*=p}}addFeature(D,p){D.features.push(p)}createFeature(){return new z.OptimizedFeature}createSpatialReference(){return{wkid:0}}createGeometry(){return new K}addField(D,p){D.fields.push(p)}allocateCoordinates(D){D.coords.length=
D.lengths.reduce((p,q)=>p+q,0)*this._vertexDimension;this._coordinatePtr=0}addCoordinate(D,p){D.coords[this._coordinatePtr++]=p}addCoordinatePoint(D,p){D.coords.push(p)}addLength(D,p){D.lengths.push(p)}addQueryGeometry(D,p){D.queryGeometry=p.queryGeometry;D.queryGeometryType=p.queryGeometryType}createPointGeometry(){return new K}}e.OptimizedFeatureSetParserContext=Q;e.optimizedGeometryTypes=J;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define(["../../../rest/query/operations/pbfDehydratedFeatureSet","../../../rest/query/operations/pbfQueryUtils"],function(e,u){class r{_parseFeatureQuery(z){var y=new e.DehydratedFeatureSetParserContext(z.options);z=u.parsePBFFeatureQuery(z.buffer,y);y={...z,spatialReference:z.spatialReference?.toJSON(),fields:z.fields?z.fields.map(K=>K.toJSON()):void 0,missingAttributes:y.missingAttributes};return Promise.resolve(y)}}return function(){return new r}});