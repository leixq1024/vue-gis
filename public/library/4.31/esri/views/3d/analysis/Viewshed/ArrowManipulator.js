// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../Color ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../Slice/sliceToolConfig ./ViewshedConfiguration ../../interactive/Manipulator3D ../../interactive/RenderObject ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ColorMaterial ../../../interactive/interfaces".split(" "),
function(m,v,w,n,e,p,x,h,q,k,y,f,z,l,A,B,g){function r(a,b,c){const d=k.viewshedToolManipulatorConfiguration.getScaleOrientArrowTipLength(a);c*=2;a&&(c*=q.displayFocusMultiplier);a=d/2;return l.createExtrudedTriangle(b,d,a,a,c,0)}class C extends y.Manipulator3D{constructor(a,b){super({view:a,autoScaleRenderObjects:!1,worldSized:!1,radius:k.viewshedToolManipulatorConfiguration.collisionRadius});this._handles=new w;this._setupManipulatorVisual(b)}destroy(){this._handles.remove();super.destroy()}_setupManipulatorVisual(a){var b=
this._createMaterial();const c=[h.fromValues(0,0,0),h.fromValues(0,0,1)];var d=l.createTubeGeometry(b,c,a,16,!1);const D=l.createTubeGeometry(b,c,a*q.displayFocusMultiplier,16,!1),t=r(!1,b,a);b=r(!0,b,a);a=p.create();e.fromTranslation(a,c[c.length-1]);e.mul(a,a,e.fromXRotation(u,Math.PI/2));e.mul(a,a,e.fromYRotation(u,Math.PI/2));t.transformation=a;b.transformation=a;this.renderObjects=[new f.RenderObject(d,g.ManipulatorStateFlags.Unfocused),new f.RenderObject(D,g.ManipulatorStateFlags.Focused),new f.RenderObject(t,
g.ManipulatorStateFlags.Unfocused),new f.RenderObject(b,g.ManipulatorStateFlags.Focused)];d=h.fromValues(0,k.viewshedToolManipulatorConfiguration.getScaleOrientArrowTipLength(!0),0);d=x.transformMat4(d,d,a);this.collisionType={type:"line",paths:[[...c,d]]}}_createMaterial(){const a=new B.ColorMaterial({cullFace:z.CullFaceOptions.Back,renderOccluded:A.RenderOccludedFlag.OccludeAndTransparent,isDecoration:!0});this._handles.add(n.watch(()=>v.toUnitRGBA(this.view.effectiveTheme.accentColor),b=>a.setParameters({color:b}),
n.initial));return a}}const u=p.create();m.ArrowManipulator=C;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});