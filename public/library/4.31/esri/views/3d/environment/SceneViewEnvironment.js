// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/handleUtils ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ./lightingUtils ./SunLighting ./VirtualLighting ../../../webscene/Environment ../../../webscene/SunLighting ../../../webscene/VirtualLighting".split(" "),function(f,k,l,h,m,n,p,q,r,b,e,c,t,u){var d;c=d=class extends c{constructor(a){super(a);
this.lighting=this.castLighting();this.cachedCameraTrackingEnabled=null}static fromWebsceneEnvironment(a){a=a.cloneConstructProperties();return new d({...a,lighting:a.lighting?"virtual"===a.lighting.type?e.fromWebsceneLighting(a.lighting):b.fromWebsceneLighting(a.lighting):void 0})}castLighting(a){return this._convertLightingWithDestroy(a)}applyLighting(a){this.lighting=this._convertLightingWithDestroy(a)}_convertLightingWithDestroy(a){const g=this._convertLighting(a);g!==a&&this.addHandles(l.destroyHandle(g));
return g}_convertLighting(a){return a?a instanceof b||a instanceof e?a:a instanceof t?this.lighting&&"virtual"!==this.lighting.type?this.lighting.cloneWithWebsceneLighting(a):new b({...a.cloneConstructProperties(),...this.lighting?.cloneNonPersistentConstructProperties()}):a instanceof u?this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(a):new e({...a.cloneConstructProperties(),...this.lighting?.cloneNonPersistentConstructProperties()}):q.ensureOneOfType(r.lightingTypes,
a):new b}clone(){return new d({lighting:this.lighting.clone(),weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:h.clone(this.background)})}cloneWithWebsceneEnvironment(a){return new d({weather:this.weather.clone(),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,background:h.clone(this.background),...a.cloneConstructProperties(),lighting:this._getLighting(a)})}_getLighting(a){switch(a.lighting.type){case "sun":return this.lighting&&
"sun"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(a.lighting):b.fromWebsceneLighting(a.lighting);case "virtual":return this.lighting&&"virtual"===this.lighting.type?this.lighting.cloneWithWebsceneLighting(a.lighting):e.fromWebsceneLighting(a.lighting);default:return k.neverReached(a.lighting),b.fromWebsceneLighting(a.lighting)}}};f.__decorate([m.property({nonNullable:!0})],c.prototype,"lighting",void 0);f.__decorate([n.cast("lighting")],c.prototype,"castLighting",null);return c=d=
f.__decorate([p.subclass("esri.views.3d.environment.SceneViewEnvironment")],c)});