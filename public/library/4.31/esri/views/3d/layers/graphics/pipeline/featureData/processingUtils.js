// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../geometry/projection/projectBuffer ../../../../../../geometry/projection/projectVectorToVector ../../../../../../geometry/support/aaBoundingRect ./interfaces".split(" "),function(k,n,p,q,r,t){k.getMapCoordinates=async function(b,a){const {numFeatures:d,tile:g,partitionInfo:h}=b;({pages:a}=g);if(0===a.length||0===d)return new Float64Array;b=new Float64Array(3*d);if(h){var c=a.reduce((l,{featureCount:m})=>l+m,
0);c=new Float64Array(3*c);var e=0;for(var f of a)e=f.readAllCoordinates(c,e);f=h.tileIndices;for(a=0;a<d;++a){e=f[a];const l=c[3*e+1],m=c[3*e+2];b[3*a]=c[3*e];b[3*a+1]=l;b[3*a+2]=m}}else{f=0;for(c of a)f=c.readAllCoordinates(b,f)}return b};k.getObjectIds=async function(b,a){const {numFeatures:d,tile:g,partitionInfo:h}=b;({pages:a}=g);if(0===a.length||0===d)return new Uint32Array;b=new Uint32Array(d);if(h){var c=a.reduce((l,{featureCount:m})=>l+m,0);c=new Uint32Array(c);let f=0;for(var e of a)f=e.readAllObjectIds(c,
f);e=h.tileIndices;for(a=0;a<d;++a)b[a]=c[e[a]]}else{e=0;for(c of a)e=c.readAllObjectIds(b,e)}return b};k.getRenderCoordinates=async function(b,a){await b.provision([t.FeatureDataItem.GEOMETRY_MAP_COORDINATES],a);const {numFeatures:d,tile:g,mapCoordinates:h}=b;({pages:b}=g);if(0===b.length||0===d)return new Float64Array;b=a.viewSpatialReference;a=a.renderSpatialReference;const c=new Float64Array(3*d);if(!p.projectBuffer(h,b,0,c,a,0,d))throw Error("Failed to project coordinates");return c};k.getTileCenterRenderCoordinates=
async function(b,a){const d=a.viewSpatialReference;a=a.renderSpatialReference;b=r.center(b.tile.descriptor.extent);const g=n.create();q.projectVectorToVector([b[0],b[1],0],d,g,a);return g};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});