// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCache ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C){function U(H){if(L.canQueryWithRBush(H)){if(z.isExtent(H))return[m.fromValues(Math.min(H.xmin,H.xmax),Math.min(H.ymin,H.ymax),Math.max(H.xmin,H.xmax),Math.max(H.ymin,H.ymax))];if(z.isPolygon(H))return H.rings.map(N=>m.fromValues(Math.min(N[0][0],N[2][0]),Math.min(N[0][1],N[2][1]),Math.max(N[0][0],N[2][0]),Math.max(N[0][1],N[2][1])))}return[t.getBoundsXY(m.create(),H)]}class y{constructor(H,N=null,K,X,V){this.attributes=H;this.geometry=
K;this.centroid=X;this.filterFlags=V;this.groupId=-1;this.displayId=N}}class B{constructor(H){this._cache=new x.QueryEngineCache;this._changeHandle=null;this.capabilities={query:u.queryCapabilities};this.geometryType=H.geometryType;this.hasM=!!H.hasM;this.hasZ=!!H.hasZ;this.objectIdField=H.objectIdField;this.spatialReference=H.spatialReference;this.definitionExpression=H.definitionExpression;this.featureStore=H.featureStore;this.aggregateAdapter=H.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",
()=>this.clearCache());this.timeInfo=H.timeInfo;this.fieldsIndex=f.isSerializable(H.fieldsIndex)?H.fieldsIndex:M.fromJSON(H.fieldsIndex);this.availableFields=!H.availableFields||1===H.availableFields.length&&"*"===H.availableFields[0]?new Set(this.fieldsIndex.fields.map(N=>N.name)):new Set(H.availableFields.map(N=>this.fieldsIndex.get(N)?.name).filter(N=>null!=N));H.scheduler&&H.priority&&(this._frameTask=H.scheduler.registerTask(H.priority))}destroy(){this._frameTask=n.removeMaybe(this._frameTask);
this.clearCache();n.destroyMaybe(this._cache);this._changeHandle=n.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._cache.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(H,N){N=d.signalFromSignalOrOptions(N);try{return await (await this._executeQuery(H,{},N)).createQueryResponse()}catch(K){if(K!==J.queryEngineEmptyResult)throw K;return(new D.QueryEngineResult([],H,this)).createQueryResponse()}}async executeQueryForCount(H=
{},N){N=d.signalFromSignalOrOptions(N);try{return(await this._executeQuery(H,{returnGeometry:!1,returnCentroid:!1,outSR:null},N)).createQueryResponseForCount()}catch(K){if(K!==J.queryEngineEmptyResult)throw K;return 0}}async executeQueryForExtent(H,N){N=d.signalFromSignalOrOptions(N);const K=H.outSR;try{const X=await this._executeQuery(H,{returnGeometry:!0,returnCentroid:!1,outSR:null},N),V=X.size;if(!V)return{count:0,extent:null};const da=await this._getBounds(X.items,X.spatialReference,K||this.spatialReference);
return{count:V,extent:da}}catch(X){if(X===J.queryEngineEmptyResult)return{count:0,extent:null};throw X;}}async executeQueryForIds(H,N){return this.executeQueryForIdSet(H,N).then(K=>Array.from(K))}async executeQueryForIdSet(H,N){N=d.signalFromSignalOrOptions(N);try{const K=await this._executeQuery(H,{returnGeometry:!0,returnCentroid:!1,outSR:null},N),X=K.items,V=new Set;await this._reschedule(()=>{for(const da of X)V.add(K.featureAdapter.getObjectId(da))},N);return V}catch(K){if(K===J.queryEngineEmptyResult)return new Set;
throw K;}}async executeQueryForSnapping(H,N){const K=d.signalFromSignalOrOptions(N),{point:X,distance:V,returnEdge:da,vertexMode:aa}=H;if(!da&&"none"===aa)return{candidates:[]};let fa=e.clone(H.query);fa=await this._schedule(()=>J.normalizeQueryLike(fa,this.definitionExpression,this.spatialReference),K);fa=await this._reschedule(()=>E.validateQuery(fa,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),K);(N=!v.equals(X.spatialReference,
this.spatialReference))&&await p.checkProjectionSupport(X.spatialReference,this.spatialReference);var Z="number"===typeof V?V:V.x,ma="number"===typeof V?V:V.y;Z={xmin:X.x-Z,xmax:X.x+Z,ymin:X.y-ma,ymax:X.y+ma,spatialReference:X.spatialReference};Z=N?p.project(Z,this.spatialReference):Z;if(!Z)return{candidates:[]};ma=(await r.normalizeCentralMeridian(z.fromJSON(X),null,{signal:K}))[0];const S=(await r.normalizeCentralMeridian(z.fromJSON(Z),null,{signal:K}))[0];if(null==ma||null==S)return{candidates:[]};
const ha=new D.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(U(S.toJSON())),K),fa,this);await this._reschedule(()=>this._executeObjectIdsQuery(ha),K);await this._reschedule(()=>this._executeTimeQuery(ha),K);await this._reschedule(()=>this._executeAttributesQuery(ha),K);await this._reschedule(()=>this._executeGeometryQueryForSnapping(ha,K),K);ma=ma.toJSON();ma=N?p.project(ma,this.spatialReference):ma;return ha.createSnappingResponse({...H,point:ma,distance:N?Math.max(Z.xmax-Z.xmin,
Z.ymax-Z.ymin)/2:V},X.spatialReference)}async executeQueryForLatestObservations(H,N){N=d.signalFromSignalOrOptions(N);if(!this.timeInfo?.trackIdField)throw new c("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:H,timeInfo:this.timeInfo});try{const K=await this._executeQuery(H,{},N);await this._reschedule(()=>this._filterLatest(K),N);return await K.createQueryResponse()}catch(K){if(K!==J.queryEngineEmptyResult)throw K;return(new D.QueryEngineResult([],H,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(H=
{},N,K){K=d.signalFromSignalOrOptions(K);const {field:X,normalizationField:V,valueExpression:da}=N;return(await this._executeQueryForStatistics(H,{field:X,normalizationField:V,valueExpression:da},K)).createSummaryStatisticsResponse(N)}async executeQueryForUniqueValues(H={},N,K){K=d.signalFromSignalOrOptions(K);const {field:X,field2:V,field3:da,valueExpression:aa}=N;return(await this._executeQueryForStatistics(H,{field:X,field2:V,field3:da,valueExpression:aa},K)).createUniqueValuesResponse(N)}async executeQueryForClassBreaks(H=
{},N,K){K=d.signalFromSignalOrOptions(K);const {field:X,normalizationField:V,valueExpression:da}=N;return(await this._executeQueryForStatistics(H,{field:X,normalizationField:V,valueExpression:da},K)).createClassBreaksResponse(N)}async executeQueryForHistogram(H={},N,K){K=d.signalFromSignalOrOptions(K);const {field:X,normalizationField:V,valueExpression:da}=N;return(await this._executeQueryForStatistics(H,{field:X,normalizationField:V,valueExpression:da},K)).createHistogramResponse(N)}async fetchRecomputedExtents(H){H=
d.signalFromSignalOrOptions(H);this._timeExtentPromise||(this._timeExtentPromise=Q.getTimeExtent(this.timeInfo,this.featureStore));const [N,K]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);d.throwIfAborted(H);return{fullExtent:N,timeExtent:K}}async _getBounds(H,N,K){const X=l.set(l.create(),l.negativeInfinity);await this.featureStore.forEachBounds(H,V=>l.expandWithAABB(X,V));H={xmin:X[0],ymin:X[1],xmax:X[3],ymax:X[4],spatialReference:g.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(X[2])&&isFinite(X[5])&&(H.zmin=X[2],H.zmax=X[5],H.hasZ=!0);N=p.project(H,N,K);N.spatialReference=g.cleanFromGeometryEngine(K);0===N.xmax-N.xmin&&(K=k.getMetersPerUnitForSR(N.spatialReference),N.xmin-=K,N.xmax+=K);0===N.ymax-N.ymin&&(K=k.getMetersPerUnitForSR(N.spatialReference),N.ymin-=K,N.ymax+=K);this.hasZ&&null!=N.zmin&&null!=N.zmax&&0===N.zmax-N.zmin&&(K=k.getMetersPerUnitForSR(N.spatialReference),N.zmin-=K,N.zmax+=K);return N}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise=
"getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(H=>this._getBounds(H,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(H,N){return null!=this._frameTask?this._frameTask.schedule(H,N):H(C.noBudget)}async _reschedule(H,N){return null!=this._frameTask?this._frameTask.reschedule(H,N):H(C.noBudget)}async _getAllFeaturesQueryEngineResult(H){return new D.QueryEngineResult(await this._getAllFeatures(),
H,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const K=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(X=>K.push(X))})().then(()=>K)}const H=this._allFeaturesPromise,N=await H;return H===this._allFeaturesPromise?N.slice():this._getAllFeatures()}async _executeQuery(H,N,K){H=e.clone(H);H=await this._schedule(()=>J.normalizeQuery(H,this.definitionExpression,this.spatialReference),K);H=await this._reschedule(()=>E.validateQuery(H,{availableFields:this.availableFields,
fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),K);H={...H,...N};const X=await this._reschedule(()=>this._executeSceneFilterQuery(H,K),K),V=await this._reschedule(()=>this._executeGeometryQuery(H,X,K),K);await this._reschedule(()=>this._executeAggregateIdsQuery(V),K);await this._reschedule(()=>this._executeObjectIdsQuery(V),K);await this._reschedule(()=>this._executeTimeQuery(V),K);await this._reschedule(()=>this._executeAttributesQuery(V),K);return V}async _executeSceneFilterQuery(H,
N){if(null==H.sceneFilter)return null;const {outSR:K,returnGeometry:X,returnCentroid:V}=H;var da=this.featureStore.featureSpatialReference,aa=H.sceneFilter.geometry;const fa=null==da||v.equals(da,aa.spatialReference)?aa:p.project(aa,da);if(!fa)return null;da=X||V;da=v.isValid(K)&&!v.equals(this.spatialReference,K)&&da?async ha=>this._project(ha,K):ha=>ha;const Z=this.featureAdapter;aa=await this._reschedule(()=>this._searchFeatures(U(fa)),N);if("disjoint"===H.sceneFilter.spatialRelationship){if(!aa.length)return null;
const ha=new Set;for(var ma of aa)ha.add(Z.getObjectId(ma));const G=await this._reschedule(()=>this._getAllFeatures(),N);ma=await this._reschedule(async()=>{const ca=await L.getSpatialQueryOperator("esriSpatialRelDisjoint",fa,this.geometryType,this.hasZ,this.hasM),pa=await this._runSpatialFilter(G,Y=>!ha.has(Z.getObjectId(Y))||ca(Z.getGeometry(Y)),N);return new D.QueryEngineResult(pa,H,this)},N);return da(ma)}if(!aa.length)return new D.QueryEngineResult([],H,this);if(this._canExecuteSinglePass(fa,
H))return da(new D.QueryEngineResult(aa,H,this));const S=await L.getSpatialQueryOperator("esriSpatialRelContains",fa,this.geometryType,this.hasZ,this.hasM);ma=await this._runSpatialFilter(aa,ha=>S(Z.getGeometry(ha)),N);return da(new D.QueryEngineResult(ma,H,this))}async _executeGeometryQuery(H,N,K){if(null!=N&&0===N.items.length)return N;H=null!=N?N.query:H;const {geometry:X,outSR:V,spatialRel:da,returnGeometry:aa,returnCentroid:fa}=H;var Z=this.featureStore.featureSpatialReference;const ma=!X||null==
Z||v.equals(Z,X.spatialReference)?X:p.project(X,Z),S=aa||fa,ha=v.isValid(V)&&!v.equals(this.spatialReference,V),G=null==N?this._getCacheKey(H):null;Z=G?this._cache.get(G):null;if(null!=Z)return new D.QueryEngineResult(Z,H,this);Z=async ia=>{ha&&S&&await this._project(ia,V);G&&this._cache.put(G,ia.items);return ia};if(!ma)return Z(null!=N?N:await this._getAllFeaturesQueryEngineResult(H));const ca=this.featureAdapter;let pa=await this._reschedule(()=>this._searchFeatures(U(X)),K);if("esriSpatialRelDisjoint"===
da){if(!pa.length)return Z(null!=N?N:await this._getAllFeaturesQueryEngineResult(H));const ia=new Set;for(var Y of pa)ia.add(ca.getObjectId(Y));const A=null!=N?N.items:await this._reschedule(()=>this._getAllFeatures(),K);Y=await this._reschedule(async()=>{const F=await L.getSpatialQueryOperator(da,ma,this.geometryType,this.hasZ,this.hasM),O=await this._runSpatialFilter(A,ba=>!ia.has(ca.getObjectId(ba))||F(ca.getGeometry(ba)),K);return new D.QueryEngineResult(O,H,this)},K);return Z(Y)}if(null!=N){const ia=
new b.PositionHint;pa=pa.filter(A=>0<=b.indexOf(N.items,A,N.items.length,ia))}if(!pa.length)return Z=new D.QueryEngineResult([],H,this),G&&this._cache.put(G,Z.items),Z;if(this._canExecuteSinglePass(ma,H))return Z(new D.QueryEngineResult(pa,H,this));const R=await L.getSpatialQueryOperator(da,ma,this.geometryType,this.hasZ,this.hasM);Y=await this._runSpatialFilter(pa,ia=>R(ca.getGeometry(ia)),K);return Z(new D.QueryEngineResult(Y,H,this))}async _executeGeometryQueryForSnapping(H,N){const {query:K}=
H,{spatialRel:X}=K;if(H?.items?.length&&K.geometry&&X){var V=await L.getSpatialQueryOperator(X,K.geometry,this.geometryType,this.hasZ,this.hasM);N=await this._runSpatialFilter(H.items,da=>V(da.geometry),N);H.items=N}}_executeAggregateIdsQuery(H){if(0!==H.items.length&&H.query.aggregateIds?.length&&null!=this.aggregateAdapter){var N=new Set;for(const X of H.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(X).forEach(V=>N.add(V));var K=this.featureAdapter.getObjectId;H.items=H.items.filter(X=>
N.has(K(X)))}}_executeObjectIdsQuery(H){if(0!==H.items.length&&H.query.objectIds?.length){var N=new Set(H.query.objectIds),K=this.featureAdapter.getObjectId;H.items=H.items.filter(X=>N.has(K(X)))}}_executeTimeQuery(H){if(0!==H.items.length){var N=Q.getTimeOperator(this.timeInfo,H.query.timeExtent,this.featureAdapter);null!=N&&(H.items=H.items.filter(N))}}_executeAttributesQuery(H){if(0!==H.items.length){var N=q.getWhereClause(H.query.where,this.fieldsIndex);if(N){if(!N.isStandardized)throw new TypeError("Where clause is not standardized");
H.items=H.items.filter(K=>N.testFeature(K,this.featureAdapter))}}}async _runSpatialFilter(H,N,K){if(!N)return H;if(null==this._frameTask)return H.filter(aa=>N(aa));let X=0;const V=[],da=async aa=>{for(;X<H.length;){const fa=H[X++];N(fa)&&(V.push(fa),aa.madeProgress());aa.done&&await this._reschedule(Z=>da(Z),K)}};return this._reschedule(aa=>da(aa),K).then(()=>V)}_filterLatest(H){const {trackIdField:N,startTimeField:K,endTimeField:X}=this.timeInfo,V=X||K,da=new Map,aa=this.featureAdapter.getAttribute;
for(const fa of H.items){const Z=aa(fa,N),ma=aa(fa,V),S=da.get(Z);(!S||ma>aa(S,V))&&da.set(Z,fa)}H.items=Array.from(da.values())}_getCacheKey(H){const {geometry:N,spatialRel:K,returnGeometry:X,returnCentroid:V,outSR:da,resultType:aa,cacheHint:fa}=H;if("tile"!==aa&&!fa)return null;H=X||V;return v.isValid(da)&&!v.equals(this.spatialReference,da)&&H?JSON.stringify([N,K,da]):JSON.stringify([N,K])}_canExecuteSinglePass(H,N){({spatialRel:N}=N);return L.canQueryWithRBush(H)&&("esriSpatialRelEnvelopeIntersects"===
N||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===N))}async _project(H,N){if(!N||v.equals(this.spatialReference,N))return H;const K=this.featureAdapter;let X=void 0;try{const V=await this._getFullExtent();X=h.getTransformation(this.spatialReference,N,V)}catch{}N=await p.projectMany(H.items.map(V=>g.getGeometry(this.geometryType,this.hasZ,this.hasM,K.getGeometry(V))),this.spatialReference,N,X);H.items=N.map((V,da)=>K.cloneWithGeometry(H.items[da],
w.convertFromGeometry(V,this.hasZ,this.hasM)));return H}async _searchFeatures(H){const N=new Set;await Promise.all(H.map(K=>this.featureStore.forEachInBounds(K,X=>N.add(X))));H=Array.from(N.values());N.clear();return H}async _executeQueryForStatistics(H,N,K){H=e.clone(H);try{H=await this._schedule(()=>J.normalizeQuery(H,this.definitionExpression,this.spatialReference),K);H=await this._reschedule(()=>E.validateStatisticsQuery(H,N,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,
spatialReference:this.spatialReference}),K);const X=await this._reschedule(()=>this._executeSceneFilterQuery(H,K),K),V=await this._reschedule(()=>this._executeGeometryQuery(H,X,K),K);await this._reschedule(()=>this._executeAggregateIdsQuery(V),K);await this._reschedule(()=>this._executeObjectIdsQuery(V),K);await this._reschedule(()=>this._executeTimeQuery(V),K);await this._reschedule(()=>this._executeAttributesQuery(V),K);return V}catch(X){if(X!==J.queryEngineEmptyResult)throw X;return new D.QueryEngineResult([],
H,this)}}}a.Feature=y;a.QueryEngine=B;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect","./DoubleArray"],function(a,b,c,f){function e(g=w){return[g[0],g[1],g[2],g[3],g[4],g[5]]}function n(g,p,x,u,D,J,E=e()){E[0]=g;E[1]=p;E[2]=x;E[3]=u;E[4]=D;E[5]=J;return E}function d(g,p,x,u=e()){z(u,v);k(u,g,p,x);return u}function k(g,p,x=0,u=p.length/3){let D=g[0],J=g[1],E=g[2],L=g[3],Q=g[4],M=g[5];for(let C=
0;C<u;C++)D=Math.min(D,p[x+3*C]),J=Math.min(J,p[x+3*C+1]),E=Math.min(E,p[x+3*C+2]),L=Math.max(L,p[x+3*C]),Q=Math.max(Q,p[x+3*C+1]),M=Math.max(M,p[x+3*C+2]);g[0]=D;g[1]=J;g[2]=E;g[3]=L;g[4]=Q;g[5]=M}function h(g){return g[0]>=g[3]?0:g[3]-g[0]}function l(g){return g[1]>=g[4]?0:g[4]-g[1]}function m(g){return g[2]>=g[5]?0:g[5]-g[2]}function t(g,p){return Math.max(p[0],g[0])<=Math.min(p[3],g[3])&&Math.max(p[1],g[1])<=Math.min(p[4],g[4])&&Math.max(p[2],g[2])<=Math.min(p[5],g[5])}function z(g,p){g[0]=p[0];
g[1]=p[1];g[2]=p[2];g[3]=p[3];g[4]=p[4];g[5]=p[5];return g}function r(g){return 6===g.length}const v=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],w=[0,0,0,0,0,0],q=e();a.allFinite=function(g){for(let p=0;6>p;p++)if(!isFinite(g[p]))return!1;return!0};a.center=function(g,p=[0,0,0]){p[0]=g[0]+h(g)/2;p[1]=g[1]+l(g)/2;p[2]=g[2]+m(g)/2;return p};a.contains=function(g,p){return p[0]>=g[0]&&p[1]>=g[1]&&p[2]>=g[2]&&p[3]<=g[3]&&p[4]<=g[4]&&p[5]<=g[5]};a.containsPoint=function(g,p){return p[0]>=
g[0]&&p[1]>=g[1]&&p[2]>=g[2]&&p[0]<=g[3]&&p[1]<=g[4]&&p[2]<=g[5]};a.containsPointWithMargin=function(g,p,x){return p[0]>=g[0]-x&&p[1]>=g[1]-x&&p[2]>=g[2]-x&&p[0]<=g[3]+x&&p[1]<=g[4]+x&&p[2]<=g[5]+x};a.create=e;a.depth=l;a.diameter=function(g){const p=h(g),x=m(g);g=l(g);return Math.sqrt(p*p+x*x+g*g)};a.empty=function(g){return g?z(g,v):e(v)};a.equals=function(g,p,x){if(null==g||null==p)return g===p;if(!r(g)||!r(p))return!1;if(x)for(let u=0;u<g.length;u++){if(!x(g[u],p[u]))return!1}else for(x=0;x<g.length;x++)if(g[x]!==
p[x])return!1;return!0};a.expandWithAABB=function(g,p){g[0]=Math.min(g[0],p[0]);g[1]=Math.min(g[1],p[1]);g[2]=Math.min(g[2],p[2]);g[3]=Math.max(g[3],p[3]);g[4]=Math.max(g[4],p[4]);g[5]=Math.max(g[5],p[5])};a.expandWithBuffer=k;a.expandWithNestedArray=function(g,p,x){const u=p.length;let D=g[0],J=g[1],E=g[2],L=g[3],Q=g[4],M=g[5];if(x)for(x=0;x<u;x++){var C=p[x];D=Math.min(D,C[0]);J=Math.min(J,C[1]);E=Math.min(E,C[2]);L=Math.max(L,C[0]);Q=Math.max(Q,C[1]);M=Math.max(M,C[2])}else for(x=0;x<u;x++)C=p[x],
D=Math.min(D,C[0]),J=Math.min(J,C[1]),L=Math.max(L,C[0]),Q=Math.max(Q,C[1]);g[0]=D;g[1]=J;g[2]=E;g[3]=L;g[4]=Q;g[5]=M};a.expandWithOffset=function(g,p,x,u){g[0]=Math.min(g[0],g[0]+p);g[3]=Math.max(g[3],g[3]+p);g[1]=Math.min(g[1],g[1]+x);g[4]=Math.max(g[4],g[4]+x);g[2]=Math.min(g[2],g[2]+u);g[5]=Math.max(g[5],g[5]+u)};a.expandWithRect=function(g,p){g[0]=Math.min(g[0],p[0]);g[1]=Math.min(g[1],p[1]);g[3]=Math.max(g[3],p[2]);g[4]=Math.max(g[4],p[3])};a.expandWithVec3=function(g,p){g[0]=Math.min(g[0],
p[0]);g[1]=Math.min(g[1],p[1]);g[2]=Math.min(g[2],p[2]);g[3]=Math.max(g[3],p[0]);g[4]=Math.max(g[4],p[1]);g[5]=Math.max(g[5],p[2])};a.fromBuffer=function(g,p=e()){return d(g,0,g.length/3,p)};a.fromExtent=function(g,p=e()){p[0]=g.xmin;p[1]=g.ymin;p[2]=g.hasZ?g.zmin:-Infinity;p[3]=g.xmax;p[4]=g.ymax;p[5]=g.hasZ?g.zmax:Infinity;return p};a.fromMinMax=function(g,p,x=e()){x[0]=g[0];x[1]=g[1];x[2]=g[2];x[3]=p[0];x[4]=p[1];x[5]=p[2];return x};a.fromRect=function(g,p){g[0]=p[0];g[1]=p[1];g[2]=Number.NEGATIVE_INFINITY;
g[3]=p[2];g[4]=p[3];g[5]=Number.POSITIVE_INFINITY;return g};a.fromRectValues=function(g,p,x,u,D){g[0]=p;g[1]=x;g[2]=Number.NEGATIVE_INFINITY;g[3]=u;g[4]=D;g[5]=Number.POSITIVE_INFINITY;return g};a.fromSubBuffer=d;a.fromValues=n;a.getMax=function(g,p){p[0]=g[3];p[1]=g[4];p[2]=g[5];return p};a.getMin=function(g,p){p[0]=g[0];p[1]=g[1];p[2]=g[2];return p};a.height=m;a.intersects=t;a.intersectsClippingArea=function(g,p){return null==p?!0:t(g,p)};a.is=r;a.isPoint=function(g){return 0===h(g)&&0===l(g)&&
0===m(g)};a.maximumDimension=function(g){return Math.max(h(g),m(g),l(g))};a.negativeInfinity=v;a.offset=function(g,p,x,u,D=g){D[0]=g[0]+p;D[1]=g[1]+x;D[2]=g[2]+u;D[3]=g[3]+p;D[4]=g[4]+x;D[5]=g[5]+u;return D};a.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.scale=function(g,p,x=g){const u=g[0]+h(g)/2,D=g[1]+l(g)/2,J=g[2]+m(g)/2;x[0]=u+(g[0]-u)*p;x[1]=D+(g[1]-D)*p;x[2]=J+(g[2]-J)*p;x[3]=u+(g[3]-u)*p;x[4]=D+(g[4]-D)*p;x[5]=J+(g[5]-J)*p;return x};a.set=z;a.setMax=function(g,
p,x=g){x[3]=p[0];x[4]=p[1];x[5]=p[2];x!==g&&(x[0]=g[0],x[1]=g[1],x[2]=g[2]);return g};a.setMin=function(g,p,x=g){x[0]=p[0];x[1]=p[1];x[2]=p[2];x!==g&&(x[3]=g[3],x[4]=g[4],x[5]=g[5]);return x};a.size=function(g,p=[0,0,0]){p[0]=h(g);p[1]=l(g);p[2]=m(g);return p};a.toCorners=function(g,p=f.newDoubleArray(24)){const [x,u,D,J,E,L]=g;p[0]=x;p[1]=u;p[2]=D;p[3]=x;p[4]=u;p[5]=L;p[6]=x;p[7]=E;p[8]=D;p[9]=x;p[10]=E;p[11]=L;p[12]=J;p[13]=u;p[14]=D;p[15]=J;p[16]=u;p[17]=L;p[18]=J;p[19]=E;p[20]=D;p[21]=J;p[22]=
E;p[23]=L;return p};a.toExtent=function(g,p){return isFinite(g[2])||isFinite(g[5])?new b({xmin:g[0],xmax:g[3],ymin:g[1],ymax:g[4],zmin:g[2],zmax:g[5],spatialReference:p}):new b({xmin:g[0],xmax:g[3],ymin:g[1],ymax:g[4],spatialReference:p})};a.toRect=function(g,p){p||=c.create();p[0]=g[0];p[1]=g[1];p[2]=g[3];p[3]=g[4];return p};a.width=h;a.wrap=function(g,p,x,u,D,J){return n(g,p,x,u,D,J,q)};a.zero=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/DoubleArray":function(){define(["exports",
"../../core/typedArrayUtil"],function(a,b){a.copyInto=function(c,f){for(let e=0;e<f.length;++e)c[e]=f[e];return c};a.doubleArrayFrom=function(c){return(b.isArray(c)?c.length:c.byteLength/8)<=b.nativeArrayMaxSize?Array.from(c):new Float64Array(c)};a.doubleSubArray=function(c,f,e){return Array.isArray(c)?c.slice(f,f+e):c.subarray(f,f+e)};a.newDoubleArray=function(c,f=!1){return c<=b.nativeArrayMaxSize?f?Array(c).fill(0):Array(c):new Float64Array(c)};a.toFloat64Array=function(c){return Array.isArray(c)?
new Float64Array(c):c};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){function t(p){const x=[];let u=0,D=0;for(let J=0;J<p.length;J++){const E=p[J];let L=null;for(let Q=0;Q<
E.length;Q++)L=E[Q],x.push(L),0===Q?D=u=L[0]:(u=Math.min(u,L[0]),D=Math.max(D,L[0]));L&&x.push([(u+D)/2,0])}return x}function z(p,x){if(!(p instanceof n||p instanceof e))throw g().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new c("straightLineDensify: the input geometry is neither polyline nor polygon");var u=d.getGeometryParts(p);const D=[];for(const E of u){u=[];D.push(u);u.push([E[0][0],E[0][1]]);for(let L=0;L<E.length-1;L++){const Q=E[L][0],M=E[L][1],C=E[L+
1][0],U=E[L+1][1];var J=Math.sqrt((C-Q)*(C-Q)+(U-M)*(U-M));const y=(U-M)/J,B=(C-Q)/J,H=J/x;if(1<H){for(let N=1;N<=H-1;N++){const K=N*x;u.push([B*K+Q,y*K+M])}J=(J+Math.floor(H-1)*x)/2;u.push([B*J+Q,y*J+M])}u.push([C,U])}}return"polygon"===p.type?new e({rings:D,spatialReference:p.spatialReference}):new n({paths:D,spatialReference:p.spatialReference})}function r(p,x,u){x&&(p=z(p,1E6),p=h.webMercatorToGeographic(p,!0));u&&(p=d.updatePolyGeometry(p,u));return p}function v(p,x,u){if(Array.isArray(p)){var D=
p[0];D>x?(u=d.offsetMagnitude(D,x),p[0]=D+-2*u*x):D<u&&(x=d.offsetMagnitude(D,u),p[0]=D+-2*x*u)}else D=p.x,D>x?(u=d.offsetMagnitude(D,x),p=p.clone().offset(-2*u*x,0)):D<u&&(x=d.offsetMagnitude(D,u),p=p.clone().offset(-2*x*u,0));return p}function w(p,x){let u=-1;for(let D=0;D<x.cutIndexes.length;D++){const J=x.cutIndexes[D],E=x.geometries[D],L=d.getGeometryParts(E);for(let Q=0;Q<L.length;Q++){const M=L[Q];M.some(C=>{if(180>C[0])return!0;C=0;for(var U=0;U<M.length;U++){var y=M[U][0];C=y>C?y:C}C=Number(C.toFixed(9));
C=-360*d.offsetMagnitude(C,180);for(U=0;U<M.length;U++)y=E.getPoint(Q,U),E.setPoint(Q,U,y.clone().offset(C,0));return!0})}if(J===u)if("polygon"===p[0].type)for(const Q of d.getGeometryParts(E))p[J]=p[J].addRing(Q);else{if("polyline"===p[0].type)for(const Q of d.getGeometryParts(E))p[J]=p[J].addPath(Q)}else u=J,p[J]=E}return p}async function q(p,x,u){if(!Array.isArray(p))return q([p],x);x&&"string"!==typeof x&&g().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var D="string"===typeof x?x:x?.url??b.geometryServiceUrl;let J,E,L;let Q=0;var M=[];x=[];for(var C of p)if(null==C)x.push(C);else{if(!U){var U=C.spatialReference;var y=k.getInfo(U);var B=(J=U.isWebMercator)?102100:4326;E=d.cutParams[B].maxX;L=d.cutParams[B].minX;var H=d.cutParams[B].plus180Line;B=d.cutParams[B].minus180Line}if(y)if("mesh"===C.type)x.push(C);else if("point"===C.type)x.push(v(C.clone(),E,L));else if("multipoint"===C.type){var N=C.clone();N.points=N.points.map(K=>v(K,E,L));x.push(N)}else if("extent"===
C.type)N=C.clone()._normalize(!1,!1,y),x.push(N.rings?new e(N):N);else if(C.extent){N=C.extent;const K=2*d.offsetMagnitude(N.xmin,L)*E;let X=0===K?C.clone():d.updatePolyGeometry(C.clone(),K);N.offset(K,0);let {xmin:V,xmax:da}=N;V=Number(V.toFixed(9));da=Number(da.toFixed(9));N.intersects(H)&&da!==E?(Q=da>Q?da:Q,X=r(X,J),M.push(X),x.push("cut")):N.intersects(B)&&V!==L?(Q=2*da*E>Q?2*da*E:Q,X=r(X,J,360),M.push(X),x.push("cut")):x.push(X)}else x.push(C.clone());else x.push(C)}U=d.offsetMagnitude(Q,E);
y=-90;H=U;for(C=new n;0<U;)B=-180+360*U,C.addPath([[B,y],[B,-1*y]]),y*=-1,U--;if(0<M.length&&0<H){U=await l.cut(D,M,C,u);U=w(M,U);y=[];M=[];for(H=0;H<x.length;H++)C=x[H],"cut"!==C?M.push(C):(C=U.shift(),B=p[H],null!=B&&"polygon"===B.type&&B.rings&&1<B.rings.length&&C.rings.length>=B.rings.length?(y.push(C),M.push("simplify")):M.push(J?h.geographicToWebMercator(C):C));if(!y.length)return M;x=await m.simplify(D,y,u);p=[];for(u=0;u<M.length;u++)D=M[u],"simplify"!==D?p.push(D):p.push(J?h.geographicToWebMercator(x.shift()):
x.shift());return p}p=[];for(u=0;u<x.length;u++)D=x[u],"cut"!==D?p.push(D):(D=M.shift(),p.push(!0===J?h.geographicToWebMercator(D):D));return p}const g=()=>f.getLogger("esri.geometry.support.normalizeUtils");a.getClosestDenormalizedXToReference=function(p,x,u){u=k.getInfo(u);if(null==u)return p;const [D,J]=u.valid;u=2*J;let E=0,L=0;x>J?E=Math.ceil(Math.abs(x-J)/u):x<D&&(E=-Math.ceil(Math.abs(x-D)/u));p>J?L=Math.ceil(Math.abs(p-J)/u):p<D&&(L=-Math.ceil(Math.abs(p-D)/u));p+=(E-L)*u;x=p-x;x>J?p-=u:x<
D&&(p+=u);return p};a.getDenormalizedExtent=function(p){if(!p)return null;const x=p.extent;if(!x)return null;var u=p.spatialReference&&k.getInfo(p.spatialReference);if(!u)return x;const [D,J]=u.valid;({width:u}=x);let {xmin:E,xmax:L}=x;[E,L]=[L,E];if("extent"===p.type||0===u||u<=J||u>2*J||E<D||L>J)return x;let Q;switch(p.type){case "polygon":if(1<p.rings.length)Q=t(p.rings);else return x;break;case "polyline":if(1<p.paths.length)Q=t(p.paths);else return x;break;case "multipoint":Q=p.points}p=x.clone();
for(let M=0;M<Q.length;M++){let C=Q[M][0];0>C?(C+=J,L=Math.max(C,L)):(C-=J,E=Math.min(C,E))}p.xmin=E;p.xmax=L;return p.width<u?(p.xmin-=J,p.xmax-=J,p):x};a.normalizeCentralMeridian=q;a.normalizeMapX=function(p,x){if(x=k.getInfo(x)){const [u,D]=x.valid;x=D-u;if(p<u)for(;p<u;)p+=x;if(p>D)for(;p>D;)p-=x}return p};a.straightLineDensify=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(a,b,c,f){function e(n){return f.isPolygon(n)?n.rings:n.paths}b={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:c.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:c.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new b({paths:[[[180,
-180],[180,180]]],spatialReference:c.WGS84}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:c.WGS84})}};a.cutParams=b;a.getGeometryParts=e;a.offsetMagnitude=function(n,d){return Math.ceil((n-d)/(2*d))};a.updatePolyGeometry=function(n,d){const k=e(n);for(const h of k)for(const l of h)l[0]+=d;return n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),
function(a,b,c,f,e,n){a.cut=async function(d,k,h,l){d=n.parseUrl(d);const m=k[0].spatialReference;k={...l,responseType:"json",query:{...d.query,f:"json",sr:e.srToRESTValue(m),target:JSON.stringify({geometryType:f.getJsonType(k[0]),geometries:k}),cutter:JSON.stringify(h)}};k=await c(d.path+"/cut",k);const {cutIndexes:t,geometries:z=[]}=k.data;return{cutIndexes:t,geometries:z.map(r=>{r=f.fromJSON(r);r.spatialReference=m;return r})}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(a,b,c,f,e,n){function d(k,h,l){const m={};for(const z in k)if("declaredClass"!==z){var t=k[z];null!=t&&"function"!==typeof t&&(Array.isArray(t)?m[z]=t.map(r=>d(r)):"object"===typeof t?t.toJSON?(t=t.toJSON(l?.[z]),m[z]=h?t:JSON.stringify(t)):m[z]=h?t:JSON.stringify(t):m[z]=t)}return m}a.asValidOptions=function(k,h){return h?{...h,query:{...(k??{}),...h.query}}:{query:k}};a.encode=d;a.getToken=function(k,h){return k?n.isApiKeyApplicable(k,h)?h||b.apiKey:c.id?.findCredential(k)?.token:null};
a.parseUrl=function(k){return"string"===typeof k?e.urlToObject(k):f.clone(k)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(a,b,c,f,e,n){a.simplify=async function(d,k,h){const l="string"===typeof d?c.urlToObject(d):d;d=k[0].spatialReference;const m=f.getJsonType(k[0]);k={...h,query:{...l.query,
f:"json",sr:e.srToRESTValue(d),geometries:JSON.stringify(n.encodeGeometries(k))}};({data:k}=await b(l.path+"/simplify",k));return n.decodeGeometries(k.geometries,m,d)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(a,b){a.decodeGeometries=function(c,f,e){const n=b.getGeometryType(f);return c.map(d=>{d=n.fromJSON(d);d.spatialReference=e;return d})};a.encodeGeometries=function(c){return{geometryType:b.getJsonType(c[0]),
geometries:c.map(f=>f.toJSON())}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(a,b,c,f,e,n,d,k,h,l){function m(P,W){return P?W?4:3:W?3:2}function t(P,W,ea,ra){if(P){if(ea)return W&&
ra?F:ia;if(W&&ra)return A}else if(W&&ra)return ia;return R}function z({scale:P,translate:W},ea){return Math.round((ea-W[0])/P[0])}function r({scale:P,translate:W},ea){return Math.round((W[1]-ea)/P[1])}function v({scale:P,translate:W},ea,ra){return ea*P[ra]+W[ra]}function w(P){P=P.coords;return{x:P[0],y:P[1]}}function q(P,W){P.coords[0]=W.x;P.coords[1]=W.y;return P}function g(P){P=P.coords;return{x:P[0],y:P[1],z:P[2]}}function p(P,W){P.coords[0]=W.x;P.coords[1]=W.y;P.coords[2]=W.z;return P}function x(P){P=
P.coords;return{x:P[0],y:P[1],m:P[2]}}function u(P,W){P.coords[0]=W.x;P.coords[1]=W.y;P.coords[2]=W.m;return P}function D(P){P=P.coords;return{x:P[0],y:P[1],z:P[2],m:P[3]}}function J(P,W){P.coords[0]=W.x;P.coords[1]=W.y;P.coords[2]=W.z;P.coords[3]=W.m;return P}function E(P,W){return P&&W?J:P?p:W?u:q}function L(P,W,ea,ra,ja){ea=E(ea,ra);for(const {geometry:oa,attributes:qa}of W)W=null!=oa?ea(new l,oa):null,P.push(new k.OptimizedFeature(W,qa,null,ja?qa[ja]:void 0));return P}function Q(P,W,ea=E(null!=
W.z,null!=W.m)){return ea(P,W)}function M(P,W,ea,ra){for(const {geometry:ja,attributes:oa}of W)P.push({attributes:oa,geometry:null!=ja?C(ja,ea,ra):null});return P}function C(P,W,ea){if(null==P)return null;const ra=m(W,ea),ja=[];for(let oa=0;oa<P.coords.length;oa+=ra){const qa=[];for(let sa=0;sa<ra;sa++)qa.push(P.coords[oa+sa]);ja.push(qa)}return W?ea?{points:ja,hasZ:W,hasM:ea}:{points:ja,hasZ:W}:ea?{points:ja,hasM:ea}:{points:ja}}function U(P,W,ea,ra,ja){ea=m(ea,ra);for(const {geometry:oa,attributes:qa}of W)W=
null!=oa?y(new l,oa,ea):null,P.push(new k.OptimizedFeature(W,qa,null,ja?qa[ja]:void 0));return P}function y(P,W,ea=m(W.hasZ,W.hasM)){P.lengths[0]=W.points.length;const ra=P.coords;let ja=0;for(const oa of W.points)for(W=0;W<ea;W++)ra[ja++]=oa[W];return P}function B(P,W,ea){if(!P)return null;const ra=m(W,ea),{coords:ja,lengths:oa}=P;P=[];let qa=0;for(const sa of oa){const ua=[];for(let ya=0;ya<sa;ya++){const wa=[];for(let Aa=0;Aa<ra;Aa++)wa.push(ja[qa++]);ua.push(wa)}P.push(ua)}return W?ea?{paths:P,
hasZ:W,hasM:ea}:{paths:P,hasZ:W}:ea?{paths:P,hasM:ea}:{paths:P}}function H(P,W,ea,ra,ja){ea=m(ea,ra);for(const {geometry:oa,attributes:qa,centroid:sa}of W)W=null!=oa?N(new l,oa,ea):null,ra=null!=sa?Q(new l,sa):null,P.push(new k.OptimizedFeature(W,qa,ra,ja?qa[ja]:void 0));return P}function N(P,W,ea=m(W.hasZ,W.hasM)){const {lengths:ra,coords:ja}=P;let oa=0;for(const qa of W.paths){for(const sa of qa)for(W=0;W<ea;W++)ja[oa++]=sa[W];ra.push(qa.length)}return P}function K(P,W,ea){if(!P)return null;const ra=
m(W,ea),{coords:ja,lengths:oa}=P;P=[];let qa=0;for(const sa of oa){const ua=[];for(let ya=0;ya<sa;ya++){const wa=[];for(let Aa=0;Aa<ra;Aa++)wa.push(ja[qa++]);ua.push(wa)}P.push(ua)}return W?ea?{rings:P,hasZ:W,hasM:ea}:{rings:P,hasZ:W}:ea?{rings:P,hasM:ea}:{rings:P}}function X(P,W,ea=W.hasZ,ra=W.hasM){return V(P,W.rings,ea,ra)}function V(P,W,ea,ra){ea=m(ea,ra);const {lengths:ja,coords:oa}=P;ra=0;G(P);for(const qa of W){for(const sa of qa)for(W=0;W<ea;W++)oa[ra++]=sa[W];ja.push(qa.length)}return P}
function da(P,W,ea,ra,ja,oa){ca(P);if(!ea){for(const qa of W)P.push(new k.OptimizedFeature(null,qa.attributes,null,oa?qa.attributes[oa]:void 0));return P}switch(ea){case "esriGeometryPoint":return L(P,W,ra,ja,oa);case "esriGeometryMultipoint":return U(P,W,ra,ja,oa);case "esriGeometryPolyline":return H(P,W,ra,ja,oa);case "esriGeometryPolygon":case "esriGeometryMultiPatch":for(const {geometry:qa,centroid:sa,attributes:ua}of W)W=null!=qa?X(new l,qa,ra,ja):null,ea=oa?ua[oa]:void 0,null!=sa?P.push(new k.OptimizedFeature(W,
ua,q(new l,sa),ea)):P.push(new k.OptimizedFeature(W,ua,null,ea));break;default:pa().error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ea}'`)),ca(P)}return P}function aa(P,W,ea,ra){P=P&&("coords"in P?P:P.geometry);if(null==P)return null;switch(W){case "esriGeometryPoint":return W=w,ea&&ra?W=D:ea?W=g:ra&&(W=x),W(P);case "esriGeometryMultipoint":return C(P,ea,ra);case "esriGeometryPolyline":return B(P,ea,ra);case "esriGeometryPolygon":return K(P,ea,ra);default:return pa().error("convertToGeometry:unknown-geometry",
new b(`Unable to parse unknown geometry type '${W}'`)),null}}function fa(P,W,ea,ra,ja){ca(P);if(null==ea){for(const qa of W)P.push({attributes:qa.attributes});return P}switch(ea){case "esriGeometryPoint":ea=w;ra&&ja?ea=D:ra?ea=g:ja&&(ea=x);for(var oa of W){const {geometry:qa,attributes:sa}=oa;ra=null!=qa?ea(qa):null;P.push({attributes:sa,geometry:ra})}break;case "esriGeometryMultipoint":return M(P,W,ra,ja);case "esriGeometryPolyline":for(const {geometry:qa,attributes:sa}of W)P.push({attributes:sa,
geometry:null!=qa?B(qa,ra,ja):null});break;case "esriGeometryPolygon":for(const {geometry:qa,attributes:sa,centroid:ua}of W)oa=null!=qa?K(qa,ra,ja):null,null!=ua?(W=w(ua),P.push({attributes:sa,centroid:W,geometry:oa})):P.push({attributes:sa,geometry:oa});break;default:pa().error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${ea}'`))}return P}function Z(P,W,ea,ra,ja,oa,qa=ea,sa=ra){G(P);if(!W?.coords.length)return null;ja=Y[ja];const {coords:ua,lengths:ya}=W;
W=m(ea,ra);const wa=m(ea&&qa,ra&&sa);ea=t(ea,ra,qa,sa);if(!ya.length)return ea(P.coords,ua,0,0,z(oa,ua[0]),r(oa,ua[1])),G(P,W,0),P;let Aa,Ca=0,Ea,Da=0;for(const Ia of ya){if(Ia<ja)continue;let Ha=0;Ea=Da;sa=ra=z(oa,ua[Ca]);Aa=qa=r(oa,ua[Ca+1]);ea(P.coords,ua,Ea,Ca,sa,Aa);Ha++;Ca+=W;Ea+=wa;for(let Ja=1;Ja<Ia;Ja++,Ca+=W)if(sa=z(oa,ua[Ca]),Aa=r(oa,ua[Ca+1]),sa!==ra||Aa!==qa)ea(P.coords,ua,Ea,Ca,sa-ra,Aa-qa),Ea+=wa,Ha++,ra=sa,qa=Aa;Ha>=ja&&(P.lengths.push(Ha),Da=Ea)}ca(P.coords,Da);return P.coords.length?
P:null}function ma(P,W,ea,ra,ja,oa,qa){let sa=ra,ua=0;for(let wa=oa+ea;wa<qa;wa+=ea){var ya=W[wa];const Aa=W[wa+1],Ca=W[qa],Ea=W[qa+1];let Da=W[oa],Ia=W[oa+1],Ha=Ca-Da,Ja=Ea-Ia;if(0!==Ha||0!==Ja){const Na=((ya-Da)*Ha+(Aa-Ia)*Ja)/(Ha*Ha+Ja*Ja);1<Na?(Da=Ca,Ia=Ea):0<Na&&(Da+=Ha*Na,Ia+=Ja*Na)}Ha=ya-Da;Ja=Aa-Ia;ya=Ha*Ha+Ja*Ja;ya>sa&&(ua=wa,sa=ya)}sa>ra&&(ua-oa>ea&&ma(P,W,ea,ra,ja,oa,ua),ja(P,W,P.length,ua,W[ua],W[ua+1]),qa-ua>ea&&ma(P,W,ea,ra,ja,ua,qa))}function S(P,W,ea,ra,ja){const {coords:oa,lengths:qa}=
W;ea=m(ea,ra);if(!oa.length)return P!==W&&G(P),P;f.assertIsSome(ja);const {originPosition:sa,scale:ua,translate:ya}=ja;ja=na;ja.originPosition=sa;ra=ja.scale;ra[0]=ua[0]??1;ra[1]=-(ua[1]??1);ra[2]=ua[2]??1;ra[3]=ua[3]??1;var wa=ja.translate;wa[0]=ya[0]??0;wa[1]=ya[1]??0;wa[2]=ya[2]??0;wa[3]=ya[3]??0;if(!qa.length){for(ra=0;ra<ea;++ra)P.coords[ra]=v(ja,oa[ra],ra);P!==W&&G(P,ea,0);return P}wa=0;for(let Ca=0;Ca<qa.length;Ca++){const Ea=qa[Ca];P.lengths[Ca]=Ea;for(var Aa=0;Aa<ea;++Aa)P.coords[wa+Aa]=
v(ja,oa[wa+Aa],Aa);Aa=P.coords[wa];let Da=P.coords[wa+1];wa+=ea;for(let Ia=1;Ia<Ea;Ia++,wa+=ea){Aa+=oa[wa]*ra[0];Da+=oa[wa+1]*ra[1];P.coords[wa]=Aa;P.coords[wa+1]=Da;for(let Ha=2;Ha<ea;++Ha)P.coords[wa+Ha]=v(ja,oa[wa+Ha],Ha)}}P!==W&&G(P,oa.length,qa.length);return P}function ha(P,W,ea,ra){let ja=0,oa=P[ra*W],qa=P[ra*(W+1)];for(let sa=1;sa<ea;sa++){const ua=oa+P[ra*(W+sa)],ya=qa+P[ra*(W+sa)+1],wa=(ua-oa)*(ya+qa);oa=ua;qa=ya;ja+=wa}return.5*ja}function G(P,W=0,ea=0){ca(P.lengths,ea);ca(P.coords,W)}
function ca(P,W=0){P.length!==W&&(P.length=W)}const pa=()=>c.getLogger("esri.layers.graphics.featureConversionUtils"),Y={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},R=(P,W,ea,ra,ja,oa)=>{P[ea]=ja;P[ea+1]=oa},ia=(P,W,ea,ra,ja,oa)=>{P[ea]=ja;P[ea+1]=oa;P[ea+2]=W[ra+2]},A=(P,W,ea,ra,ja,oa)=>{P[ea]=ja;P[ea+1]=oa;P[ea+2]=W[ra+3]},F=(P,W,ea,ra,ja,oa)=>{P[ea]=ja;P[ea+1]=oa;P[ea+2]=W[ra+2];P[ea+3]=W[ra+3]},O=[],
ba=[],na={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};a.convertFromFeature=function(P,W,ea,ra,ja){O[0]=P;[P]=da(ba,O,W,ea,ra,ja);ca(O);ca(ba);return P};a.convertFromFeatureSet=function(P,W){const ea=new h,{hasM:ra,hasZ:ja,features:oa,objectIdFieldName:qa,spatialReference:sa,geometryType:ua,exceededTransferLimit:ya,transform:wa,fields:Aa}=P;Aa&&(ea.fields=Aa);ea.geometryType=ua??null;ea.objectIdFieldName=qa??W??null;ea.spatialReference=sa??null;if(!ea.objectIdFieldName)return pa().error(new b("optimized-features:invalid-objectIdFieldName",
"objectIdFieldName is missing")),ea;oa&&da(ea.features,oa,ua,ja,ra,ea.objectIdFieldName);ya&&(ea.exceededTransferLimit=ya);ra&&(ea.hasM=ra);ja&&(ea.hasZ=ja);wa&&(ea.transform=wa);return ea};a.convertFromFeatures=da;a.convertFromGeometry=function(P,W,ea){if(null==P)return null;const ra=new l;"hasZ"in P&&null==W&&(W=P.hasZ);"hasM"in P&&null==ea&&(ea=P.hasM);if(d.isPoint(P))return E(null!=W?W:null!=P.z,null!=ea?ea:null!=P.m)(ra,P);if(d.isPolygon(P))return X(ra,P,W,ea);if(d.isPolyline(P))return N(ra,
P,m(W,ea));if(d.isMultipoint(P))return y(ra,P,m(W,ea));pa().error("convertFromGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${P}'`))};a.convertFromMultipoint=y;a.convertFromMultipointFeatures=U;a.convertFromNestedArray=V;a.convertFromPoint=Q;a.convertFromPointFeatures=L;a.convertFromPolygon=X;a.convertFromPolyline=N;a.convertFromPolylineFeatures=H;a.convertToFeature=function(P,W,ea,ra){ba[0]=P;fa(O,ba,W,ea,ra);P=O[0];ca(O);ca(ba);return P};a.convertToFeatureSet=function(P){const {objectIdFieldName:W,
spatialReference:ea,transform:ra,fields:ja,hasM:oa,hasZ:qa,features:sa,geometryType:ua,exceededTransferLimit:ya,uniqueIdField:wa,queryGeometry:Aa,queryGeometryType:Ca}=P;P=fa([],sa,ua,qa,oa);const Ea=aa(Aa,Ca,!1,!1);P={features:P,fields:ja,geometryType:ua,objectIdFieldName:W,spatialReference:ea,uniqueIdField:wa,queryGeometry:Ea};ra&&(P.transform=ra);ya&&(P.exceededTransferLimit=ya);oa&&(P.hasM=oa);qa&&(P.hasZ=qa);return P};a.convertToFeatures=fa;a.convertToGeometry=aa;a.convertToMultipoint=C;a.convertToMultipointFeatures=
M;a.convertToPoint=function(P,W,ea){return P?W?ea?D(P):g(P):ea?x(P):w(P):null};a.convertToPolygon=K;a.convertToPolyline=B;a.generalizeOptimizedGeometry=function(P,W,ea,ra,ja,oa,qa=ea,sa=ra){G(P);if(!W?.coords.length)return null;ja=Y[ja];const {coords:ua,lengths:ya}=W;W=m(ea,ra);const wa=m(ea&&qa,ra&&sa);ea=t(ea,ra,qa,sa);if(!ya.length)return ea(P.coords,ua,0,0,ua[0],ua[1]),G(P,W,0),P;ra=0;oa*=oa;for(const Aa of ya){if(Aa<ja){ra+=Aa*W;continue}qa=P.coords.length/wa;sa=ra;const Ca=ra+(Aa-1)*W;ea(P.coords,
ua,P.coords.length,sa,ua[sa],ua[sa+1]);ma(P.coords,ua,W,oa,ea,sa,Ca);ea(P.coords,ua,P.coords.length,Ca,ua[Ca],ua[Ca+1]);sa=P.coords.length/wa-qa;sa>=ja?P.lengths.push(sa):ca(P.coords,qa*wa);ra+=Aa*W}return P.coords.length?P:null};a.getBoundsOptimizedGeometry=function(P,W,ea,ra){if(!W?.coords?.length)return null;ea=m(ea,ra);let ja=ra=Number.POSITIVE_INFINITY,oa=Number.NEGATIVE_INFINITY,qa=Number.NEGATIVE_INFINITY;if(W&&W.coords){W=W.coords;for(let sa=0;sa<W.length;sa+=ea){const ua=W[sa],ya=W[sa+1];
ra=Math.min(ra,ua);oa=Math.max(oa,ua);ja=Math.min(ja,ya);qa=Math.max(qa,ya)}}e.is(P)?e.fromRectValues(P,ra,ja,oa,qa):n.fromValues(ra,ja,oa,qa,P);return P};a.getQuantizedArea=function(P,W){const {coords:ea,lengths:ra}=P;let ja=P=0;for(let oa=0;oa<ra.length;oa++){const qa=ra[oa];ja+=ha(ea,P,qa,W);P+=qa}return Math.abs(ja)};a.getQuantizedBoundsOptimizedGeometry=function(P,W,ea,ra){ea=m(ea,ra);const {lengths:ja,coords:oa}=W;ra=W=Number.POSITIVE_INFINITY;let qa=Number.NEGATIVE_INFINITY,sa=Number.NEGATIVE_INFINITY,
ua=0;for(const ya of ja){let wa=oa[ua],Aa=oa[ua+1];W=Math.min(wa,W);ra=Math.min(Aa,ra);qa=Math.max(wa,qa);sa=Math.max(Aa,sa);ua+=ea;for(let Ca=1;Ca<ya;Ca++,ua+=ea){const Ea=oa[ua],Da=oa[ua+1];wa+=Ea;Aa+=Da;0>Ea&&(W=Math.min(W,wa));0<Ea&&(qa=Math.max(qa,wa));0>Da?ra=Math.min(ra,Aa):0<Da&&(sa=Math.max(sa,Aa))}}P[0]=W;P[1]=ra;P[2]=qa;P[3]=sa;return P};a.getSignedQuantizedRingArea=ha;a.quantizeOptimizedFeatureSet=function(P,W){const {geometryType:ea,features:ra,hasM:ja,hasZ:oa}=W;if(!P)return W;for(let qa=
0;qa<ra.length;qa++){const sa=ra[qa],ua=sa.weakClone();ua.geometry=new l;Z(ua.geometry,sa.geometry,ja,oa,ea,P);sa.centroid&&(ua.centroid=new l,Z(ua.centroid,sa.centroid,ja,oa,"esriGeometryPoint",P));ra[qa]=ua}W.transform=P;return W};a.quantizeOptimizedGeometry=Z;a.quantizeX=z;a.quantizeY=r;a.removeCollinearVertices=function(P,W,ea,ra,ja){if(!W?.coords?.length)return null;ea=Y[ea];const {coords:oa,lengths:qa}=W;W=t(ra,ja,ra,ja);ra=m(ra,ja);let sa=ja=0,ua=0,ya=0;for(const Ca of qa){sa=ya;W(P.coords,
oa,sa,ja,oa[ja],oa[ja+1]);ja+=ra;var wa=oa[ja];let Ea=oa[ja+1],Da=wa,Ia=Ea;var Aa=Ea/wa;sa+=ra;W(P.coords,oa,sa,ja,Da,Ia);ja+=ra;for(let Ha=2;Ha<Ca;Ha++){wa=oa[ja];Ea=oa[ja+1];const Ja=Ea/wa,Na=Aa===Ja||!isFinite(Aa)&&!isFinite(Ja);Aa=Na&&isFinite(Ja)?0<=Aa&&0<=Ja||0>=Aa&&0>=Ja:0<=Ia&&0<=Ea||0>=Ia&&0>=Ea;Na&&Aa?(Da+=wa,Ia+=Ea):(Da=wa,Ia=Ea,sa+=ra);W(P.coords,oa,sa,ja,Da,Ia);ja+=ra;Aa=Ja}sa+=ra;wa=(sa-ya)/ra;wa>=ea&&(P.lengths[ua]=wa,ya=sa,ua++)}P.coords.length>ya&&(P.coords.length=ya);P.lengths.length>
ua&&(P.lengths.length=ua);return P.coords.length&&P.lengths.length?P:null};a.removeZMValues=function(P,W,ea,ra,ja,oa){G(P);P.lengths.push(...W.lengths);if(ea===ja&&ra===oa)for(var qa=0;qa<W.coords.length;qa++)P.coords.push(W.coords[qa]);else for(qa=m(ea,ra),ea=t(ea,ra,ja,oa),W=W.coords,ra=0;ra<W.length;ra+=qa)ea(P.coords,W,P.coords.length,ra,W[ra],W[ra+1]);return P};a.unquantizeOptimizedFeatureSet=function(P){const {transform:W,features:ea,hasM:ra,hasZ:ja}=P;if(!W)return P;for(const oa of ea)null!=
oa.geometry&&S(oa.geometry,oa.geometry,ra,ja,W),null!=oa.centroid&&S(oa.centroid,oa.centroid,ra,ja,W);P.transform=null;return P};a.unquantizeOptimizedGeometry=S;a.unquantizeValue=v;a.unquantizeX=function(P,W){return v(P,W,0)};a.unquantizeY=function(P,W){return v(P,-W,1)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],function(a,b){class c{constructor(e=null,n={},d,k){this.geometry=e;this.attributes=
n;this.centroid=d;this.objectId=k;this.geohashY=this.geohashX=this.displayId=0}static fromJSON(e,n){const d=e.geometry?b.fromJSON(e.geometry):null,k=e.centroid?b.fromJSON(e.centroid):null;return new c(d,e.attributes,k,e.attributes[n])}weakClone(){const e=new c(this.geometry,this.attributes,this.centroid,this.objectId);e.displayId=this.displayId;e.geohashX=this.geohashX;e.geohashY=this.geohashY;return e}clone(){var e=this.geometry?.clone();e=new c(e,{...this.attributes},this.centroid?.clone(),this.objectId);
e.displayId=this.displayId;e.geohashX=this.geohashX;e.geohashY=this.geohashY;return e}}class f extends c{}a.OptimizedFeature=c;a.OptimizedFeatureWithGeometry=f;a.hasGeometry=function(e){return!!e.geometry?.coords?.length};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class a{constructor(b=[],c=[]){this.lengths=b??[];this.coords=c??[]}static fromJSON(b){return new a(b.lengths,b.coords)}static fromRect(b){const [c,
f,e,n]=b;b=e-c;const d=n-f;return new a([5],[c,f,b,0,0,d,-b,0,0,-d])}get isPoint(){return 0===this.lengths.length&&2<=this.coords.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((b,c)=>b+c)}forEachVertex(b){let c=0;this.lengths.length||b(this.coords[0],this.coords[1]);for(let f=0;f<this.lengths.length;f++){const e=this.lengths[f];for(let n=0;n<e;n++)b(this.coords[2*(n+c)],this.coords[2*(n+c)+1]);c+=e}}deltaDecode(){const b=this.clone(),{coords:c,lengths:f}=
b;let e=0;for(const n of f){for(let d=1;d<n;d++)c[2*(e+d)]+=c[2*(e+d)-2],c[2*(e+d)+1]+=c[2*(e+d)-1];e+=n}return b}clone(b){if(0===this.lengths.length)return new a([],[this.coords[0],this.coords[1]]);var c=2*(0===this.lengths.length?1:this.lengths.reduce((f,e)=>f+e));c=this.coords.slice(0,c);return b?(b.set(c),new a(this.lengths,b)):new a(Array.from(this.lengths),Array.from(c))}}return a})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class a{constructor(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const b=new a;b.objectIdFieldName=this.objectIdFieldName;b.globalIdFieldName=this.globalIdFieldName;b.geohashFieldName=this.geohashFieldName;b.geometryProperties=this.geometryProperties;b.geometryType=this.geometryType;
b.spatialReference=this.spatialReference;b.hasZ=this.hasZ;b.hasM=this.hasM;b.features=this.features;b.fields=this.fields;b.transform=this.transform;b.exceededTransferLimit=this.exceededTransferLimit;b.uniqueIdField=this.uniqueIdField;b.queryGeometry=this.queryGeometry;b.queryGeometryType=this.queryGeometryType;return b}}return a})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(a,
b,c,f){function e(r,v,w={}){const q=n(v,r);if(!q)throw w=m.getError(v,r),new b("unsupported-query","invalid SQL expression",{expression:v,error:w});r=w.expressionName||"expression";if(w.validateStandardized&&!q.isStandardized)throw new b("unsupported-query",`${r} is not standard`,{expression:v});if(w.validateAggregate&&!q.isAggregate)throw new b("unsupported-query",`${r} does not contain a valid aggregate function`,{expression:v});return q.fieldNames}function n(r,v){return r?m.get(r,v):null}function d(r){return/\((.*?)\)/.test(r)?
r:r.split(" as ")[0]}function k(r,v,w,q={}){const g=new Map;h(g,r,v,q.allowedFieldTypes??z,w);if(g.size)throw new b("unsupported-query",`${q.expressionName??"expression"} contains invalid or missing fields`,{errors:Array.from(g.values()),query:q.query});}function h(r,v,w,q,g){g=g.includes("*")?[...w,...g.filter(p=>"*"!==p)]:g;for(const p of g)if(v.get(p))l(r,v,w,q,p);else try{const x=d(p),u=e(v,x,{validateStandardized:!0});for(const D of u)l(r,v,w,q,D)}catch(x){r.set(p,{type:"expression-error",expression:p,
error:x})}}function l(r,v,w,q,g){(v=v.get(g))?w.has(v.name)?"all"!==q&&!1===q?.has(v.type)&&r.set(g,{type:"invalid-type",fieldName:v.name,fieldType:f.kebabDict.fromJSON(v.type),allowedFieldTypes:Array.from(q,p=>f.kebabDict.fromJSON(p))}):r.set(g,{type:"missing-field",fieldName:v.name}):r.set(g,{type:"invalid-field",fieldName:g})}const m=new c.WhereClauseCache(50,500);c=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));
const t=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),z=new Set(["esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...c,...t]);a.allDateAndTimeFieldTypes=t;a.getAliasFromFieldName=function(r){return r.split(" as ")[1]};a.getExpressionFromFieldName=d;a.getWhereClause=n;a.numericFieldTypes=c;a.validateFields=k;a.validateHaving=function(r,v,w,q,g){if(!w)return!0;const p=e(r,w,{validateAggregate:!0,expressionName:"having clause"});
k(r,v,p,{expressionName:"having clause",query:g});if(!n(w,r)?.getExpressions().every(x=>{const {aggregateType:u,field:D}=x,J=r.get(D)?.name;return q.some(E=>{const {onStatisticField:L,statisticType:Q}=E;return r.get(L)?.name===J&&Q.toLowerCase().trim()===u})}))throw new b("unsupported-query","expressions in having clause should also exist in outStatistics",{having:w});return!0};a.validateWhere=function(r,v,w,q){if(!w)return!0;w=e(r,w,{validateStandardized:!0,expressionName:"where clause"});k(r,v,
w,{expressionName:"where clause",query:q});return!0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../LRUCache","./WhereClause"],function(a,b,c){class f{constructor(e,n){this._cache=new b.LRUCache(e);this._invalidCache=new b.LRUCache(n)}get(e,n){const d=`${n.uid}:${e}`,k=this._cache.get(d);if(k)return k;if(null!=this._invalidCache.get(d))return null;try{const h=c.WhereClause.create(e,{fieldsIndex:n});this._cache.put(d,
h);return h}catch(h){return this._invalidCache.put(d,h),null}}getError(e,n){return this._invalidCache.get(`${n.uid}:${e}`)??null}}a.WhereClauseCache=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(a,b){class c{constructor(f,e){this._storage=new b.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=f;this._storage.register(this);e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this);
this._storage.destroy()}put(f,e,n=1){this._storage.put(this,f,e,n,1)}pop(f){return this._storage.pop(this,f)}get(f){return this._storage.get(this,f)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(f){this._storage.maxSize=f}resetHitRate(){}}a.LRUCache=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(a,b){a.RemoveMode=void 0;(function(d){d[d.ALL=0]="ALL";d[d.SOME=1]=
"SOME"})(a.RemoveMode||(a.RemoveMode={}));class c{constructor(d,k,h){this.name=d;this._storage=k;this.id=`${e++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);h&&(this._storage.registerRemoveFunc(this.id,h),this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(d){return this._storage.getSize(this,
d)}resetHitRate(){this._hit=this._miss=0}put(d,k,h,l=0){this._storage.put(this,d,k,h,l)}pop(d){d=this._storage.pop(this,d);void 0===d?++this._miss:++this._hit;return d}get(d){d=this._storage.get(this,d);void 0===d?++this._miss:++this._hit;return d}peek(d){return this._storage.peek(this,d)}updateSize(d,k,h){this._storage.updateSize(this,d,k,h)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}
class f{get size(){return this._size}constructor(d=10485760){this._maxSize=d;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new b;this._users=new b}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(d){this._users.push(d)}deregister(d){this._users.removeUnordered(d)}registerRemoveFunc(d,k){this._removeFuncs.push([d,k])}deregisterRemoveFunc(d){this._removeFuncs.filterInPlace(k=>k[0]!==d)}get maxSize(){return this._maxSize}set maxSize(d){this._maxSize=
Math.max(d,-1);this._checkSize()}getSize(d,k){return this._db.get(d.id+k)?.size??0}put(d,k,h,l,m){k=d.id+k;const t=this._db.get(k);t&&(this._size-=t.size,d.size-=t.size,this._db.delete(k),t.entry!==h&&this._notifyRemove(k,t.entry,t.size,a.RemoveMode.ALL));l>this._maxSize?this._notifyRemove(k,h,l,a.RemoveMode.ALL):void 0===h?console.warn("Refusing to cache undefined entry "):!l||0>l?(console.warn(`Refusing to cache entry with size ${l} for key ${k}`),this._notifyRemove(k,h,0,a.RemoveMode.ALL)):(this._db.set(k,
new n(h,l,1+Math.max(m,-4)- -3)),this._size+=l,d.size+=l,this._checkSize())}updateSize(d,k,h,l){k=d.id+k;const m=this._db.get(k);if(m&&m.entry===h){this._size-=m.size;for(d.size-=m.size;l>this._maxSize;)if(l=this._notifyRemove(k,h,l,a.RemoveMode.SOME),!(null!=l&&0<l)){this._db.delete(k);return}m.size=l;this._size+=l;d.size+=l;this._checkSize()}}pop(d,k){k=d.id+k;const h=this._db.get(k);if(h)return this._size-=h.size,d.size-=h.size,this._db.delete(k),++this._hit,h.entry;++this._miss}get(d,k){k=d.id+
k;d=this._db.get(k);if(void 0===d)++this._miss;else return this._db.delete(k),d.lives=d.lifetime,this._db.set(k,d),++this._hit,d.entry}peek(d,k){(d=this._db.get(d.id+k))?++this._hit:++this._miss;return d?.entry}get performanceInfo(){const d={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},k={},h=[];this._db.forEach((t,z)=>{const r=t.lifetime;h[r]=(h[r]||0)+t.size;this._users.forAll(v=>
{const {id:w,name:q}=v;z.startsWith(w)&&(k[q]=(k[q]||0)+t.size)})});const l={};this._users.forAll(t=>{const z=t.name;"hitRate"in t&&"number"===typeof t.hitRate&&!isNaN(t.hitRate)&&0<t.hitRate?(k[z]=k[z]||0,l[z]=Math.round(100*t.hitRate)+"%"):l[z]="0%"});var m=Object.keys(k);m.sort((t,z)=>k[z]-k[t]);m.forEach(t=>d[t]=Math.round(k[t]/2**20)+"MB / "+l[t]);for(m=h.length-1;0<=m;--m){const t=h[m];t&&(d["Priority "+(m+-3-1)]=Math.round(t/this._size*100)+"%")}return d}resetStats(){this._hit=this._miss=0;
this._users.forAll(d=>d.resetHitRate())}clear(d){const k=d.id;this._db.forEach((h,l)=>{l.startsWith(k)&&(this._size-=h.size,this._db.delete(l),this._notifyRemove(l,h.entry,h.size,a.RemoveMode.ALL))});d.size=0}clearAll(){this._db.forEach((d,k)=>this._notifyRemove(k,d.entry,d.size,a.RemoveMode.ALL));this._users.forAll(d=>d.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(d,k,h,l){let m;this._removeFuncs.some(t=>d.startsWith(t[0])?(t=t[1](k,l,
h),"number"===typeof t&&(m=t),!0):!1);return m}_checkSize(){this._users.forAll(d=>this._checkSizeLimits(d));this._checkSizeLimits()}_checkSizeLimits(d){const k=d??this;if(!(0>k.maxSize||k.size<=k.maxSize)){for(var h=d?.id,l=!0;l;){l=!1;for(const [m,t]of this._db)if(0===t.lifetime&&(!h||m.startsWith(h))){this._purgeItem(m,t,d);if(k.size<=.9*k.maxSize)return;l||=this._db.has(m)}}for(const [m,t]of this._db)if(!h||m.startsWith(h))if(this._purgeItem(m,t,d),k.size<=.9*k.maxSize)break}}_purgeItem(d,k,h=
this._users.find(l=>d.startsWith(l.id))){this._db.delete(d);if(1>=k.lives){this._size-=k.size;h&&(h.size-=k.size);const l=this._notifyRemove(d,k.entry,k.size,a.RemoveMode.SOME);null!=l&&0<l&&(this._size+=l,h&&(h.size+=l),k.lives=k.lifetime,k.size=l,this._db.set(d,k))}else--k.lives,this._db.set(d,k)}}let e=0;class n{constructor(d,k,h){this.entry=d;this.size=k;this.lives=this.lifetime=h}}a.MemCache=c;a.MemCacheStorage=f;a.MinPriority=-3;a.NoPriority=-4;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../has ./AggregateFunctions ./DateOnly ./errorSupport ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(C){return Array.isArray(C)?C:[C]}function q(C){return null!==C?!0!==C:null}function g(C,U){return null!=C&&null!=U?!0===C&&!0===U:!1===C||
!1===U?!1:null}function p(C,U){return null!=C&&null!=U?!0===C||!0===U:!0===C||!0===U?!0:null}function x(C,U,y){if(null==C)return null;y=!1;for(const B of U)if(null==B)y=null;else if(C===B){y=!0;break}else if(k.isDateOrTimeValue(C)&&k.isDateOrTimeValue(B)&&(y=k.sqlCompare(C,B,"\x3d")))break;return y}function u(C,U,y){if(null==C)return null;let B="",H=Q.Normal;for(let N=0;N<U.length;N++){const K=U.charAt(N);switch(H){case Q.Normal:K===y?H=Q.Escaped:B="-[]/{}()*+?.\\^$|".includes(K)?B+("\\"+K):"%"===
K?B+".*":"_"===K?B+".":B+K;break;case Q.Escaped:B="-[]/{}()*+?.\\^$|".includes(K)?B+("\\"+K):B+K,H=Q.Normal}}return(new RegExp("^"+B+"$","m")).test(C)}function D(C,U,y,B){C=B.getAttribute(C,U);U=y?.get(U);return null==C||"esriFieldTypeDate"!==U?.type&&"date"!==U?.type?null==C||"esriFieldTypeDateOnly"!==U?.type&&"date-only"!==U?.type?null==C||"esriFieldTypeTimeOnly"!==U?.type&&"time-only"!==U?.type?null==C||"esriFieldTypeTimestampOffset"!==U?.type&&"timestamp-offset"!==U?.type?C:new m.SqlTimeStampOffset(C):
z.TimeOnly.fromReader(C):e.DateOnly.fromReader(C):h.convertToExecutingTimeZone(new Date(C),y?.getLuxonTimeZone(U.name)??v.FixedOffsetZone.utcInstance)}const J=new Set(["current_timestamp","current_date","current_time"]);class E{static makeBool(C){return!0===C}static featureValue(C,U,y,B){return D(C,U,y,B)}static equalsNull(C){return null===C}static applyLike(C,U,y){return u(C,U,y)}static ensureArray(C){return w(C)}static applyIn(C,U,y){return x(C,U)}static currentTimestamp(C){return h.convertToExecutingTimeZone(new Date,
C)}static currentDate(C){return e.DateOnly.fromNow(C)}static currentTime(C){C=h.convertToExecutingTimeZone(new Date,C);return z.TimeOnly.fromDateTime(C)}static makeSqlInterval(C,U,y){return l.SqlInterval.createFromValueAndQualifier(C,U,y)}static convertInterval(C){return C instanceof l.SqlInterval?C.valueInMilliseconds():C}static compare(C,U,y,B){return k.sqlCompare(U,y,C)}static calculate(C,U,y,B){return d.sqlCalculateFunction(C,U,y,B)}static evaluateTime(C){return h.parseTime(C)}static evaluateTimestamp(C,
U,y){return h.parseTimestamp(C,U,y)}static evaluateDate(C,U){return h.parseDate(C,U)}static evaluateFunction(C,U,y){return t.evaluateFunction(C,U,y)}static lookup(C,U){C=U[C];return void 0===C?null:C}static between(C,U,y){return null==C||null==U[0]||null==U[1]?null:k.sqlCompare(C,U[0],"\x3e\x3d")&&k.sqlCompare(C,U[1],"\x3c\x3d")}static notbetween(C,U,y){return null==C||null==U[0]||null==U[1]?null:k.sqlCompare(C,U[0],"\x3c")||k.sqlCompare(C,U[1],"\x3e")}static ternaryNot(C){return q(C)}static ternaryAnd(C,
U){return g(C,U)}static ternaryOr(C,U){return p(C,U)}}class L{constructor(C,U,y="UTC",B=null){this.fieldsIndex=U;this.timeZone=y;this.currentUser=B;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(C);const {isStandardized:H,isAggregate:N,currentUserRequired:K,referencedFieldNames:X}=this._extractExpressionInfo(U);this._referencedFieldNames=X;this.isStandardized=H;this.isAggregate=N;this.currentUserRequired=K}static convertValueToStorageFormat(C,U=null){if(null===
U)return h.isDate(C)?C.getTime():h.isDateTime(C)?C.toMillis():h.isTimestampOffset(C)?C.toStorageFormat():h.isTimeOnly(C)?C.toStorageString():h.isDateOnly(C)?C.toStorageFormat():C;switch(U){case "date":if(h.isDate(C))return C.getTime();if(h.isDateTime(C))return C.toMillis();if(h.isTimestampOffset(C))return C.toMilliseconds();if(h.isDateOnly(C))return C.toNumber();break;case "date-only":if(h.isDate(C))return e.DateOnly.fromDateJS(C).toString();if(h.isTimestampOffset(C))return e.DateOnly.fromSqlTimeStampOffset(C).toString();
if(h.isDateTime(C))return e.DateOnly.fromDateTime(C).toString();break;case "time-only":if(h.isDate(C))return z.TimeOnly.fromDateJS(C).toStorageString();if(h.isDateTime(C))return z.TimeOnly.fromDateTime(C).toStorageString();if(h.isTimestampOffset(C))return z.TimeOnly.fromSqlTimeStampOffset(C).toStorageString();if(h.isTimeOnly(C))return C.toStorageString();break;case "timestamp-offset":if(h.isDate(C))return m.SqlTimeStampOffset.fromJSDate(C).toStorageFormat();if(h.isDateTime(C))return m.SqlTimeStampOffset.fromDateTime(C).toStorageFormat();
if(h.isTimestampOffset(C))return C.toStorageFormat()}return C}static create(C,U={}){return new L(C,U.fieldsIndex,U.timeZone??void 0,U.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(C,U=M,y=this.currentUser){return!!this._evaluateNode(this.parseTree,null,U,C,y)}calculateValue(C,U=M,y=this.currentUser){C=this._evaluateNode(this.parseTree,C,U,null,y);return C instanceof l.SqlInterval?C.valueInMilliseconds()/864E5:C}calculateValueCompiled(C,U=M,y=this.currentUser){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(C,
this.parameters,U,this.fieldsIndex,this.timeZone,y??null);if(c("esri-csp-restrictions"))return this.calculateValue(C,U);this._compileMe();return this.parseTree._compiledVersion(C,this.parameters,U,this.fieldsIndex,this.timeZone,y??null)}testFeature(C,U=M,y=this.currentUser){return!!this._evaluateNode(this.parseTree,C,U,null,y)}testFeatureCompiled(C,U=M,y=this.currentUser){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(C,this.parameters,U,this.fieldsIndex,this.timeZone,
y??null);if(c("esri-csp-restrictions"))return this.testFeature(C,U);this._compileMe();return!!this.parseTree._compiledVersion(C,this.parameters,U,this.fieldsIndex,this.timeZone,y??null)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;r.visitAll(this.parseTree,C=>{"current-time"===C.type?this._hasDateFunctions=!0:"function"===C.type&&(this._hasDateFunctions=this._hasDateFunctions||J.has(C.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const C=
new Set;r.visitAll(this.parseTree,U=>{"function"===U.type&&C.add(U.name.toLowerCase())});return Array.from(C)}getExpressions(){const C=new Map;r.visitAll(this.parseTree,U=>{if("function"===U.type){const y=U.name.toLowerCase();U=U.args.value[0];if("column-reference"===U.type){U=U.column;const B=`${y}-${U}`;C.has(B)||C.set(B,{aggregateType:y,field:U})}}});return[...C.values()]}getVariables(){const C=new Set;r.visitAll(this.parseTree,U=>{"parameter"===U.type&&C.add(U.value.toLowerCase())});return Array.from(C)}_compileMe(){const C=
"return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",C)).bind(E)}_extractExpressionInfo(C){const U=[],y=new Set;let B=!0,H=!1,N=!1;r.visitAll(this.parseTree,K=>{switch(K.type){case "column-reference":var X=C?.get(K.column);let V;X?X=V=X.name??"":(V=K.column,X=V.toLowerCase());y.has(X)||(y.add(X),U.push(V));K.column=V;break;case "current-user":N=!0;
break;case "function":const {name:da,args:aa}=K;K=aa.value.length;B&&=t.isStandardized(da,K);!1===H&&(H=f.isAggregate(da,K))}});return{referencedFieldNames:Array.from(U),isStandardized:B,isAggregate:H,currentUserRequired:N}}evaluateNodeToJavaScript(C){switch(C.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(C.value)+", "+JSON.stringify(C.qualifier)+","+JSON.stringify(C.op)+")";case "case-expression":var U="";if("simple"===C.format){var y=this.evaluateNodeToJavaScript(C.operand);
U="( ";for(let B=0;B<C.clauses.length;B++)U+=" (this.compare('\x3d',"+y+","+this.evaluateNodeToJavaScript(C.clauses[B].operand)+") ? ("+this.evaluateNodeToJavaScript(C.clauses[B].value)+") : "}else for(U="( ",y=0;y<C.clauses.length;y++)U+=" this.makeBool("+this.evaluateNodeToJavaScript(C.clauses[y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(C.clauses[y].value)+") : ";U=null!==C.else?U+this.evaluateNodeToJavaScript(C.else):U+"null";return U+" )";case "parameter":return"this.lookup("+
JSON.stringify(C.value.toLowerCase())+",lookups)";case "expression-list":U="[";for(y of C.value)"["!==U&&(U+=","),U+=this.evaluateNodeToJavaScript(y);return U+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(C.expr)+")";case "binary-expression":switch(C.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+
" )";case "IS":if("null"!==C.right.type)throw new n.SqlError(n.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(C.left)+")";case "ISNOT":if("null"!==C.right.type)throw new n.SqlError(n.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(C.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(C.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(C.right)+"), timeZone)";case "NOT IN":return"this.ternaryNot(this.applyIn("+
this.evaluateNodeToJavaScript(C.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(C.right)+"), timeZone))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+
","+JSON.stringify(C.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+","+JSON.stringify(C.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(C.operator)+","+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+
JSON.stringify(C.operator)+","+this.evaluateNodeToJavaScript(C.left)+","+this.evaluateNodeToJavaScript(C.right)+", timeZone)";default:throw new n.SqlError(n.SqlErrorCodes.UnsupportedOperator,{operator:C.operator});}case "null":case "boolean":case "string":case "number":return JSON.stringify(C.value);case "time":return"this.evaluateTime("+JSON.stringify(C.value)+")";case "date":return"this.evaluateDate("+JSON.stringify(C.value)+", 'unknown')";case "timestamp":return"this.evaluateTimestamp("+JSON.stringify(C.value)+
", 'unknown')";case "current-time":return"date"===C.mode?"this.currentDate(timeZone)":"time"===C.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case "current-user":return"currentUser";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(C.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(C.name)+","+this.evaluateNodeToJavaScript(C.args)+", timeZone)"}throw new n.SqlError(n.SqlErrorCodes.UnsupportedSyntax,
{node:C.type});}_evaluateNode(C,U,y,B,H){switch(C.type){case "interval":return y=this._evaluateNode(C.value,U,y,B,H),l.SqlInterval.createFromValueAndQualifier(y,C.qualifier,C.op);case "case-expression":if("simple"===C.format){var N=this._evaluateNode(C.operand,U,y,B,H);for(var K=0;K<C.clauses.length;K++)if(k.sqlCompare(N,this._evaluateNode(C.clauses[K].operand,U,y,B,H),"\x3d",this.timeZone))return this._evaluateNode(C.clauses[K].value,U,y,B,H)}else for(N=0;N<C.clauses.length;N++)if(!0===this._evaluateNode(C.clauses[N].operand,
U,y,B,H))return this._evaluateNode(C.clauses[N].value,U,y,B,H);return null!==C.else?this._evaluateNode(C.else,U,y,B,H):null;case "parameter":return C=this.parameters[C.value.toLowerCase()],h.isDate(C)?v.DateTime.fromJSDate(C):C instanceof b.ArcadeDate?C.toDateTime():C;case "expression-list":N=[];for(var X of C.value)N.push(this._evaluateNode(X,U,y,B,H));return N;case "unary-expression":return q(this._evaluateNode(C.expr,U,y,B,H));case "binary-expression":switch(C.operator){case "AND":return g(this._evaluateNode(C.left,
U,y,B,H),this._evaluateNode(C.right,U,y,B,H));case "OR":return p(this._evaluateNode(C.left,U,y,B,H),this._evaluateNode(C.right,U,y,B,H));case "IS":if("null"!==C.right.type)throw new n.SqlError(n.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(C.left,U,y,B,H);case "ISNOT":if("null"!==C.right.type)throw new n.SqlError(n.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(C.left,U,y,B,H);case "IN":return N=w(this._evaluateNode(C.right,U,y,B,H)),x(this._evaluateNode(C.left,
U,y,B,H),N,this.timeZone);case "NOT IN":return N=w(this._evaluateNode(C.right,U,y,B,H)),q(x(this._evaluateNode(C.left,U,y,B,H),N,this.timeZone));case "BETWEEN":return N=this._evaluateNode(C.left,U,y,B,H),C=this._evaluateNode(C.right,U,y,B,H),null==N||null==C[0]||null==C[1]?null:k.sqlCompare(N,C[0],"\x3e\x3d",this.timeZone)&&k.sqlCompare(N,C[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return N=this._evaluateNode(C.left,U,y,B,H),C=this._evaluateNode(C.right,U,y,B,H),null==N||null==C[0]||null==C[1]?
null:k.sqlCompare(N,C[0],"\x3c",this.timeZone)||k.sqlCompare(N,C[1],"\x3e",this.timeZone);case "LIKE":return u(this._evaluateNode(C.left,U,y,B,H),this._evaluateNode(C.right,U,y,B,H),C.escape);case "NOT LIKE":return q(u(this._evaluateNode(C.left,U,y,B,H),this._evaluateNode(C.right,U,y,B,H),C.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return k.sqlCompare(this._evaluateNode(C.left,U,y,B,H),this._evaluateNode(C.right,U,y,B,H),C.operator,this.timeZone);
case "-":case "+":case "*":case "/":case "||":return d.sqlCalculateFunction(C.operator,this._evaluateNode(C.left,U,y,B,H),this._evaluateNode(C.right,U,y,B,H),this.timeZone)}case "null":case "boolean":case "string":case "number":return C.value;case "date":return C.parsedValue??(C.parsedValue=h.parseDate(C.value,"unknown")),C.parsedValue;case "timestamp":return C.parsedValue??(C.parsedValue=h.parseTimestamp(C.value,"unknown")),C.parsedValue;case "time":return h.parseTime(C.value);case "current-time":return"date"===
C.mode?E.currentDate(this.timeZone):"time"===C.mode?E.currentTime(this.timeZone):E.currentTimestamp(this.timeZone);case "current-user":return H??null;case "column-reference":return D(U,C.column,this.fieldsIndex,y);case "data-type":return C.value;case "function":if(this.isAggregate&&f.isAggregate(C.name,C.args.value.length)){U=[];for(N of C.args?.value||[]){X=[];for(K of B||[])X.push(this._evaluateNode(N,K,y,null,H));U.push(X)}return f.aggregateFunction(C.name,U)}y=this._evaluateNode(C.args,U,y,B,
H);return t.evaluateFunction(C.name,y,this.timeZone)}throw new n.SqlError(n.SqlErrorCodes.UnsupportedSyntax,{node:C.type});}}var Q;(function(C){C[C.Normal=0]="Normal";C[C.Escaped=1]="Escaped"})(Q||={});const M={getAttribute(C,U){return(C&&"object"===typeof C.attributes?C.attributes:C)[U]}};a.WhereClause=L;a.defaultAttributeAdapter=M;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],
function(a,b,c,f){function e(l,m,t){return l<m?l-m:l>t?l-t:0}function n(l,m=!0){if(l instanceof f.Zone)return l;if("system"===l.toLowerCase())return"system";if("utc"===l.toLowerCase())return"UTC";if("unknown"===l.toLowerCase())return c.UnknownTimeZone.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(l)){const t=f.FixedOffsetZone.parseSpecifier("UTC"+(l.startsWith("+")||l.startsWith("-")?"":"+")+l);if(t)return t}l=f.IANAZone.create(l);if(!l.isValid){if(m)throw new k(a.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return l}a.ArcadeDateErrorCodes=void 0;(a.ArcadeDateErrorCodes||(a.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const d={[a.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class k extends Error{constructor(l,m){super(b.replace(d[l],m));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,k)}}class h{constructor(l){this._date=l;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(l=
0,m=1,t=1,z=0,r=0,v=0,w=0,q){if(isNaN(l)||isNaN(m)||isNaN(t)||isNaN(z)||isNaN(r)||isNaN(v)||isNaN(w))return null;const g=f.DateTime.local(l,m).daysInMonth;l=f.DateTime.fromObject({day:1>t?1:t>g?g:t,year:l,month:1>m?1:12<m?12:m,hour:0>z?0:23<z?23:z,minute:0>r?0:59<r?59:r,second:0>v?0:59<v?59:v,millisecond:0>w?0:999<w?999:w},{zone:n(q)});l=l.plus({months:e(m,1,12),days:e(t,1,g),hours:e(z,0,23),minutes:e(r,0,59),seconds:e(v,0,59),milliseconds:e(w,0,999)});return new h(l)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(l,m){m=n(m);return l.isUnknownTimeZone||m===c.UnknownTimeZone.instance?h.fromParts(l.year,l.monthJS+1,l.day,l.hour,l.minute,l.second,l.millisecond,m):new h(l._date.setZone(m))}static dateJSToArcadeDate(l){return new h(f.DateTime.fromJSDate(l,{zone:"system"}))}static dateJSAndZoneToArcadeDate(l,m="system"){m=n(m);return new h(f.DateTime.fromJSDate(l,{zone:m}))}static unknownEpochToArcadeDate(l){return new h(f.DateTime.fromMillis(l,{zone:c.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(l){return new h(f.DateTime.fromMillis(l.getTime(),
{zone:c.UnknownTimeZone.instance}))}static epochToArcadeDate(l,m="system"){m=n(m);return new h(f.DateTime.fromMillis(l,{zone:m}))}static dateTimeToArcadeDate(l){return new h(l)}clone(){return new h(this._date)}changeTimeZone(l){l=n(l);return h.dateTimeToArcadeDate(this._date.setZone(l))}static dateTimeAndZoneToArcadeDate(l,m){m=n(m);return l.zone===c.UnknownTimeZone.instance||m===c.UnknownTimeZone.instance?h.fromParts(l.year,l.month,l.day,l.hour,l.minute,l.second,l.millisecond,m):new h(l.setZone(m))}static nowToArcadeDate(l){l=
n(l);return new h(f.DateTime.fromJSDate(new Date,{zone:l}))}static nowUTCToArcadeDate(){return new h(f.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===h.systemTimeZoneCanonicalName}equals(l){return this.isSystem&&l.isSystem?this.toNumber()===l.toNumber():this.isUnknownTimeZone!==l.isUnknownTimeZone?!1:this._date.equals(l._date)}get isUnknownTimeZone(){return this._date.zone===c.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let l=
this._date.weekday;6<l&&(l=0);return l}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const l=this.zone;return"fixed"===l.type?0===l.fixed?"UTC":l.formatOffset(0,"short"):l.name}stringify(){return JSON.stringify(this.toJSDate())}plus(l){return new h(this._date.plus(l))}diff(l,m="milliseconds"){return this._date.diff(l._date,m)[m]}toISODate(){return this._date.toISODate()}toISOString(l){return l?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(l,m){return this._date.toISOTime({suppressMilliseconds:l,
includeOffset:m&&!this.isUnknownTimeZone})}toFormat(l,m){this.isUnknownTimeZone&&(l=l.replaceAll("Z",""));return this._date.toFormat(l,m)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new h(this._date.toUTC())}toLocal(){return new h(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(l){if(!l)return null;
l=f.DateTime.fromISO(l,{setZone:!0});return new h(l)}}a.ArcadeDate=h;a.ArcadeDateError=k;a.arcadeDateErrorMessages=d;a.createDateTimeZone=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(a,b){function c(e){return e instanceof b.Zone?e===f.instance?!0:!1:"unknown"===e?.toString().toLowerCase()?!0:!1}class f{}f.instance=new b.IANAZone("Etc/UTC");a.UnknownTimeZone=f;a.adoptTimeZone=function(e,
n){return b.DateTime.fromObject({day:e.day,year:e.year,month:e.month,hour:e.hour,minute:e.minute,second:e.second,millisecond:e.millisecond},{zone:n})};a.isUnknownTimeZone=c;a.substituteUnknownTimezone=function(e){return c(e)?f.instance:e};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ./DateOnly ./errorSupport ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(a,b,c,f,e,n){function d(m){if(null===
m)return null;let t=0,z=0;for(let r=0;r<m.length;r++){const v=m[r];if(null!==v){if("number"!==typeof v)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);z++;t+=v}}return 0===z?null:t/m.length}function k(m,t){if(null===m)return null;let z=null,r=null;for(const v of m)m=v,m=v instanceof b.DateOnly?v.toNumber():v instanceof e.TimeOnly?v.toNumber():v instanceof n.DateTime?v.toMillis():v instanceof f.SqlTimeStampOffset?v.toMilliseconds():v,null===z?(z=v,r=m):"max"===t&&null!==r&&null!==
m&&r<=m?(z=v,r=m):"min"===t&&null!==r&&null!==m&&r>=m&&(z=v,r=m);return z}function h(m){if(null===m)return null;m=m.filter(r=>null!==r);if(0===m.length)return null;const t=d(m);if(null===t)return null;let z=0;for(const r of m){if("number"!==typeof r)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);z+=(t-r)**2}return z/(m.length-1)}const l={min:{minParams:1,maxParams:1,evaluate:m=>k(m[0],"min")},max:{minParams:1,maxParams:1,evaluate:m=>k(m[0],"max")},avg:{minParams:1,maxParams:1,
evaluate:m=>d(m[0])},sum:{minParams:1,maxParams:1,evaluate:m=>{m=m[0];if(null===m)m=null;else{var t=0;for(let z=0;z<m.length;z++){const r=m[z];if(null!==r){if("number"!==typeof r)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);t+=r}}m=t}return m}},stddev:{minParams:1,maxParams:1,evaluate:m=>{m=m[0];null===m?m=null:(m=h(m),m=null===m?null:Math.sqrt(m));return m}},count:{minParams:1,maxParams:1,evaluate:m=>null==m[0]?null:m[0].length},var:{minParams:1,maxParams:1,evaluate:m=>
h(m[0])}};a.aggregateFunction=function(m,t){const z=l[m.toLowerCase()];if(null==z)throw new c.SqlError(c.SqlErrorCodes.FunctionNotRecognized);if(t.length<z.minParams||t.length>z.maxParams)throw new c.SqlError(c.SqlErrorCodes.InvalidParameterCount,{name:m.toUpperCase()});return z.evaluate(t)};a.isAggregate=function(m,t){m=l[m.toLowerCase()];return null!=m&&t>=m.minParams&&t<=m.maxParams};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports",
"../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(a,b,c,f){function e(d){d=d.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let k="";const h=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const l of d.match(h)||[])switch(l){case "D":k+="d";break;case "DD":k+="dd";break;case "DDD":k+="o";break;case "d":k+="c";break;case "ddd":k+=
"ccc";break;case "dddd":k+="cccc";break;case "M":k+="L";break;case "MM":k+="LL";break;case "MMM":k+="LLL";break;case "MMMM":k+="LLLL";break;case "YY":k+="yy";break;case "Y":case "YYYY":k+="yyyy";break;case "Q":k+="q";break;case "X":case "x":k+=l;break;default:k=2<=l.length&&"["===l.slice(0,1)&&"]"===l.slice(-1)?k+`'${l.slice(1,-1)}'`:k+`'${l}'`}return k}class n{constructor(d,k,h){this._year=d;this._month=k;this._day=h;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-
1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(d){return d instanceof n&&d.day===this.day&&d.month===this.month&&d.year===this.year}clone(){return new n(this._year,this._month,this._day)}toDateTime(d){return f.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:b.createDateTimeZone(d)})}toDateTimeLuxon(d){return f.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:b.createDateTimeZone(d)})}toString(){return`${this.year.toString().padStart(4,
"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(d=null,k=!0){if(null===d||""===d)return this.toString();k&&(d=e(d));if(!d)return"";k=this.toDateTime("unknown");return b.ArcadeDate.dateTimeToArcadeDate(k).toFormat(d,{locale:c.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const d=this.toDateTime("unknown");return b.ArcadeDate.dateTimeToArcadeDate(d)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(d,k){return n.fromDateTime(this.toUTCDateTime().plus({[d]:k}))}toUTCDateTime(){return f.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(d,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(d.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(d.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===
k?this.toUTCDateTime().diff(d.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(d.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(d.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(d.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(d.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(d.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(d.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(d){d=f.DateTime.fromMillis(d,{zone:f.FixedOffsetZone.utcInstance});return d.isValid?n.fromParts(d.year,d.month,d.day):null}static fromSeconds(d){d=f.DateTime.fromSeconds(d,{zone:f.FixedOffsetZone.utcInstance});return d.isValid?n.fromParts(d.year,d.month,d.day):null}static fromReader(d){if(!d)return null;d=d.split("-");return 3!==d.length?null:new n(parseInt(d[0],10),parseInt(d[1],
10),parseInt(d[2],10))}static fromParts(d,k,h){d=new n(d,k,h);return!1===d.isValid?null:d}static fromDateJS(d){return n.fromParts(d.getFullYear(),d.getMonth()+1,d.getDay())}static fromDateTime(d){return n.fromParts(d.year,d.month,d.day)}static fromSqlTimeStampOffset(d){return this.fromDateTime(d.toDateTime())}static fromString(d,k=null){if(""===d||null===d)return null;var h=[];if(k)(k=e(k))&&h.push(k);else if(null===k||""===k)return d=f.DateTime.fromISO(d,{setZone:!0}),d.isValid?n.fromParts(d.year,
d.month,d.day):null;for(const l of h)if(h=f.DateTime.fromFormat(d,k??l),h.isValid)return new n(h.year,h.month,h.day);return null}static fromNow(d="system"){d=f.DateTime.fromJSDate(new Date).setZone(b.createDateTimeZone(d));return new n(d.year,d.month,d.day)}}a.DateOnly=n;a.standardizeDateOnlyFormat=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/errorSupport":function(){define(["exports","../string"],function(a,b){a.SqlErrorCodes=void 0;(function(e){e.InvalidFunctionParameters=
"InvalidFunctionParameters";e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";e.UnsupportedSqlFunction="UnsupportedSqlFunction";e.UnsupportedOperator="UnsupportedOperator";e.UnsupportedSyntax="UnsupportedSyntax";e.UnsupportedIsRhs="UnsupportedIsRhs";e.UnsupportedIsLhs="UnsupportedIsLhs";e.InvalidDataType="InvalidDataType";e.CannotCastValue="CannotCastValue";e.FunctionNotRecognized="FunctionNotRecognized";e.InvalidTime="InvalidTime";e.InvalidParameterCount="InvalidParameterCount";
e.InvalidTimeStamp="InvalidTimeStamp";e.InvalidDate="InvalidDate";e.InvalidOperator="InvalidOperator";e.IllegalInterval="IllegalInterval";e.YearMonthIntervals="YearMonthIntervals";e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";e.MissingStatisticParameters="MissingStatisticParameters"})(a.SqlErrorCodes||(a.SqlErrorCodes={}));const c={[a.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[a.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[a.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[a.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[a.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[a.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[a.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[a.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[a.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[a.SqlErrorCodes.InvalidDate]:"Invalid date encountered",[a.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[a.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[a.SqlErrorCodes.IllegalInterval]:"Illegal interval",[a.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[a.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[a.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[a.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",
[a.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",[a.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class f extends Error{constructor(e,n){super(b.replace(c[e],n));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,f)}}a.SqlError=f;a.sqlErrorMessages=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports",
"../../chunks/datetime"],function(a,b){function c(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}class f{constructor(e){this._timeStampOffset=e;this._date=null}toDateTime(){this._date??(this._date=b.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return c(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return c(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return f.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new f(b.DateTime.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new f(e.toISO({includeOffset:!0}))}static fromParts(e,
n,d=0,k=0,h=0,l=0,m=0,t=!1,z=0,r=0){e=`${e.toString().padStart(4,"0")}-${n.toString().padStart(2,"0")}-${d.toString().padStart(2,"0")}`;n="";10>l&&(n="0");k=`${k.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${n+l.toString()}`;0!==m&&(k+="."+m.toString().padStart(3,"0"));m=`${t?"-":"+"}${z.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return new f(e+"T"+k+m)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});e&&=e.replace(".000","");return e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){e=this.toDateTime().plus(e);return f.fromDateTime(e)}}a.SqlTimeStampOffset=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(a,b,c,f){function e(d){if(!d)return"";const k=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let h="";for(const l of d.match(k)||
[])switch(l){case "SSS":h+=l;break;case "A":case "a":h+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":h+=l;break;default:h+=`'${l}'`}return h}class n{constructor(d,k,h,l){this._hour=d;this._minute=k;this._second=h;this._millisecond=l;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(d){return d instanceof n&&d.hour===
this.hour&&d.minute===this.minute&&d.second===this.second&&d.millisecond===this.millisecond}clone(){return new n(this.hour,this.minute,this.second,this.millisecond)}isValid(){return b.isInteger(this.hour)&&b.isInteger(this.minute)&&b.isInteger(this.second)&&b.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(d=null){return null===d||""===d?this.toString():(d=e(d))?f.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(d,{locale:c.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(d,k,h,l){d=new n(d,k,h,l);return d.isValid()?d:null}static fromReader(d){if(!d)return null;d=d.split(":");return 3!==d.length?null:new n(parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],
10),0)}static fromMilliseconds(d){return 864E5<d||0>d?null:new n(Math.floor(d/36E5%24),Math.floor(d/6E4%60),Math.floor(d/1E3%60),Math.floor(d%1E3))}static fromDateJS(d){return new n(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())}static fromDateTime(d){return new n(d.hour,d.minute,d.second,d.millisecond)}static fromSqlTimeStampOffset(d){return this.fromDateTime(d.toDateTime())}static fromString(d,k=null){if(""===d||null===d)return null;const h=[];if(k)(k=e(k))&&h.push(k);else if(null===
k||""===k)h.push("HH:mm:ss"),h.push("HH:mm:ss.SSS"),h.push("hh:mm:ss a"),h.push("hh:mm:ss.SSS a"),h.push("HH:mm"),h.push("hh:mm a"),h.push("H:mm"),h.push("h:mm a"),h.push("H:mm:ss"),h.push("h:mm:ss a"),h.push("H:mm:ss.SSS"),h.push("h:mm:ss.SSS a");for(const l of h)if(k=f.DateTime.fromFormat(d,l),k.isValid)return new n(k.hour,k.minute,k.second,k.millisecond);return null}plus(d,k){switch(d){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return n.fromDateTime(this.toUTCDateTime().plus({[d]:k}))}return null}toUTCDateTime(){return f.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(d,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(d.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(d.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===k?this.toUTCDateTime().diff(d.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(d.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(d.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(d.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(d.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(d.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(d.toUTCDateTime(),"milliseconds").milliseconds}}}a.TimeOnly=n;a.standardizeTimeFormat=e;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(a,b){a.cloneGeometry=function(c){if(null==c)return null;const f=c.clone();void 0!==c.cache._geVersion&&(f.cache._geVersion=c.cache._geVersion);return f};a.convertLinearUnitsToCode=function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replaceAll(/\s/g,"");c=c.replaceAll("-","");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};a.convertSquareUnitsToCode=
function(c){if(null==c)return null;if("number"===typeof c)return c;c=c.toLowerCase();c=c.replaceAll(/\s/g,"");c=c.replaceAll("-","");switch(c){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};a.isInteger=function(c){return"number"===typeof c&&isFinite(c)&&Math.floor(c)===c};a.sameGeomType=function(c,f){return c===f||"point"===c&&"esriGeometryPoint"===f||"polyline"===c&&"esriGeometryPolyline"===
f||"polygon"===c&&"esriGeometryPolygon"===f||"extent"===c&&"esriGeometryEnvelope"===f||"multipoint"===c&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===c||"polyline"===f&&"esriGeometryPolyline"===c||"polygon"===f&&"esriGeometryPolygon"===c||"extent"===f&&"esriGeometryEnvelope"===c||"multipoint"===f&&"esriGeometryMultipoint"===c?!0:!1};a.shapeExtent=function(c){if(null==c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.extent;case "point":return new b({xmin:c.x,
ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","./errorSupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(a,b,c,f,e){function n(P,W,ea){switch(ea){case "+":return P+W;case "-":return P-W;case "*":return P*W;case "/":return P/W}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function d(P,
W,ea){switch(ea){case "+":return W.plus({milliseconds:P.valueInMilliseconds()});case "-":return P.valueInMilliseconds()-W.toMillis()}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function k(P,W,ea){switch(ea){case "+":return W.plus("milliseconds",P.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function h(P,W,ea){switch(ea){case "+":return W.plus("milliseconds",P.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function l(P,W,ea){switch(ea){case "+":return P.plus("milliseconds",
W.valueInMilliseconds());case "-":return P.plus("milliseconds",-1*W.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function m(P,W,ea){switch(ea){case "+":return W.addMilliseconds(P.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function t(P,W,ea){switch(ea){case "+":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()+W.valueInMilliseconds());case "-":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()-W.valueInMilliseconds());
case "*":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()*W.valueInMilliseconds());case "/":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()/W.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function z(P,W,ea){switch(ea){case "+":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()+W);case "-":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()-W);case "*":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()*
W);case "/":return f.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()/W)}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function r(P,W,ea){switch(ea){case "+":return f.SqlInterval.createFromMilliseconds(P+W.valueInMilliseconds());case "-":return f.SqlInterval.createFromMilliseconds(P-W.valueInMilliseconds());case "*":return f.SqlInterval.createFromMilliseconds(P*W.valueInMilliseconds());case "/":return f.SqlInterval.createFromMilliseconds(P/W.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function v(P,W,ea){switch(ea){case "+":return P.plus("milliseconds",W.valueInMilliseconds());case "-":return P.plus("milliseconds",-1*W.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function w(P,W,ea){switch(ea){case "+":return P.plus({milliseconds:W.valueInMilliseconds()});case "-":return P.minus({milliseconds:W.valueInMilliseconds()})}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function q(P,W,ea){switch(ea){case "+":return P.addMilliseconds(W.valueInMilliseconds());
case "-":return P.addMilliseconds(-1*W.valueInMilliseconds())}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function g(P,W,ea){W*=864E5;switch(ea){case "+":return P.plus({milliseconds:W});case "-":return P.minus({milliseconds:W})}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function p(P,W,ea){W*=864E5;switch(ea){case "+":return P.plus("milliseconds",W);case "-":return P.plus("milliseconds",-1*W)}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function x(P,W,ea){W*=864E5;
switch(ea){case "+":return P.plus("milliseconds",W);case "-":return P.plus("milliseconds",-1*W)}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function u(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function D(P,W,ea){W*=864E5;switch(ea){case "+":return P.addMilliseconds(W);case "-":return P.addMilliseconds(-1*W)}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function J(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function E(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function L(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function Q(P,W,ea){W=parseFloat(W);if(isNaN(W))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);return n(P,W,ea)}function M(P,W,ea){P=parseFloat(P);if(isNaN(P))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);return n(P,W,ea)}function C(P,W,ea){switch(ea){case "+":return P+W}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function U(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function y(P,
W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function B(P,W,ea){switch(ea){case "-":return P.toDateTimeLuxon(W.zone).diff(W).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function H(P,W,ea){switch(ea){case "-":return P.toDateTimeLuxon(W.toDateTime().zone).diff(W.toDateTime()).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function N(P,W,ea){switch(ea){case "-":return P.toDateTimeLuxon("UTC").diff(W.toDateTimeLuxon("UTC")).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function K(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function X(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function V(P,W,ea){switch(ea){case "-":return P.toDateTime().diff(W.toDateTimeLuxon(P.toDateTime().zone)).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function da(P,W,ea){switch(ea){case "-":return P.toDateTime().diff(W).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function aa(P,W,ea){switch(ea){case "-":return P.toDateTime().diff(W.toDateTime()).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function fa(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function Z(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function ma(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function S(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function ha(P,W,ea){switch(ea){case "-":return P.diff(W).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function G(P,W,ea){switch(ea){case "-":return P.diff(W.toDateTimeLuxon(P.zone)).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function ca(P,W,ea){switch(ea){case "-":return P.diff(W.toDateTime()).as("days")}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function pa(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function Y(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function R(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function ia(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function A(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}function F(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function O(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function ba(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}function na(P,W,ea){throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}a.calculateDateOnlyAndDateOnly=N;a.calculateDateOnlyAndDateTime=B;a.calculateDateOnlyAndNumber=p;a.calculateDateOnlyAndSqlInterval=v;a.calculateDateOnlyAndString=Y;a.calculateDateOnlyAndTimeOnly=K;a.calculateDateOnlyAndTimestamp=
H;a.calculateDateTimeAndDateOnly=G;a.calculateDateTimeAndDateTime=ha;a.calculateDateTimeAndNumber=g;a.calculateDateTimeAndSqlInterval=w;a.calculateDateTimeAndString=ia;a.calculateDateTimeAndTimeOnly=pa;a.calculateDateTimeAndTimestamp=ca;a.calculateNumberAndDateOnly=L;a.calculateNumberAndDateTime=u;a.calculateNumberAndNumber=n;a.calculateNumberAndSqlInterval=r;a.calculateNumberAndString=Q;a.calculateNumberAndTimeOnly=E;a.calculateNumberAndTimestamp=J;a.calculateSqlIntervalAndDateOnly=h;a.calculateSqlIntervalAndDateTime=
d;a.calculateSqlIntervalAndNumber=z;a.calculateSqlIntervalAndSqlInterval=t;a.calculateSqlIntervalAndString=U;a.calculateSqlIntervalAndTimeOnly=k;a.calculateSqlIntervalAndTimestamp=m;a.calculateStringAndDateOnly=O;a.calculateStringAndDateTime=ba;a.calculateStringAndNumber=M;a.calculateStringAndSqlInterval=y;a.calculateStringAndString=C;a.calculateStringAndTimeOnly=F;a.calculateStringAndTimestamp=na;a.calculateTimeOnlyAndDateOnly=Z;a.calculateTimeOnlyAndDateTime=fa;a.calculateTimeOnlyAndNumber=x;a.calculateTimeOnlyAndSqlInterval=
l;a.calculateTimeOnlyAndString=R;a.calculateTimeOnlyAndTimeOnly=S;a.calculateTimeOnlyAndTimestamp=ma;a.calculateTimestampAndDateOnly=V;a.calculateTimestampAndDateTime=da;a.calculateTimestampAndNumber=D;a.calculateTimestampAndSqlInterval=q;a.calculateTimestampAndString=A;a.calculateTimestampAndTimeOnly=X;a.calculateTimestampAndTimestamp=aa;a.sqlCalculateFunction=function(P,W,ea,ra){if("||"===P)return e.evaluateFunction("concat",[W,ea],ra);if(null===W||null===ea)return null;if(c.isNumber(W)){if(c.isNumber(ea))return n(W,
ea,P);if(c.isSqlInterval(ea))return r(W,ea,P);if(c.isTimeOnly(ea))return E();if(c.isDateOnly(ea))return L();if(c.isTimestampOffset(ea))return J();if(c.isDateTime(ea))return u();if(c.isString(ea))return Q(W,ea,P)}else if(c.isDateOnly(W)){if(c.isNumber(ea))return p(W,ea,P);if(c.isSqlInterval(ea))return v(W,ea,P);if(c.isTimeOnly(ea))return K();if(c.isDateOnly(ea))return N(W,ea,P);if(c.isTimestampOffset(ea))return H(W,ea,P);if(c.isDateTime(ea))return B(W,ea,P);if(c.isString(ea))return Y()}else if(c.isTimeOnly(W)){if(c.isNumber(ea))return x(W,
ea,P);if(c.isSqlInterval(ea))return l(W,ea,P);if(c.isTimeOnly(ea))return S();if(c.isDateOnly(ea))return Z();if(c.isTimestampOffset(ea))return ma();if(c.isDateTime(ea))return fa();if(c.isString(ea))return R()}else if(c.isSqlInterval(W)){if(c.isNumber(ea))return z(W,ea,P);if(c.isSqlInterval(ea))return t(W,ea,P);if(c.isTimeOnly(ea))return k(W,ea,P);if(c.isDateOnly(ea))return h(W,ea,P);if(c.isTimestampOffset(ea))return m(W,ea,P);if(c.isDateTime(ea))return d(W,ea,P);if(c.isString(ea))return U()}else if(c.isDateTime(W)){if(c.isNumber(ea))return g(W,
ea,P);if(c.isSqlInterval(ea))return w(W,ea,P);if(c.isTimeOnly(ea))return pa();if(c.isDateOnly(ea))return G(W,ea,P);if(c.isTimestampOffset(ea))return ca(W,ea,P);if(c.isDateTime(ea))return ha(W,ea,P);if(c.isString(ea))return ia()}else if(c.isTimestampOffset(W)){if(c.isNumber(ea))return D(W,ea,P);if(c.isSqlInterval(ea))return q(W,ea,P);if(c.isTimeOnly(ea))return X();if(c.isDateOnly(ea))return V(W,ea,P);if(c.isTimestampOffset(ea))return aa(W,ea,P);if(c.isDateTime(ea))return da(W,ea,P);if(c.isString(ea))return A()}else if(c.isString(W)){if(c.isNumber(ea))return M(W,
ea,P);if(c.isSqlInterval(ea))return y();if(c.isTimeOnly(ea))return F();if(c.isDateOnly(ea))return O();if(c.isTimestampOffset(ea))return na();if(c.isDateTime(ea))return ba();if(c.isString(ea))return C(W,ea,P)}throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ./DateOnly ./errorSupport ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(a,b,c,f,e,n,d,k){function h(g,p,x){x=r.exec(g);if(null!==x){const [,u,D,J,E,L,Q,M]=x;g=k.DateTime.fromObject({year:parseInt(u,10),month:parseInt(D,10),day:parseInt(J,10),hour:parseInt(E,10),minute:parseInt(L,10),second:parseInt(Q,10),millisecond:M?parseInt(M.replace(".",""),10):0},{zone:d.substituteUnknownTimezone(p)});if(!1===g.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return g}x=v.exec(g);if(null!==x){const [,u,D,J,E,L,Q,M,C,U,y]=x;g=e.SqlTimeStampOffset.fromParts(parseInt(u,
10),parseInt(D,10),parseInt(J,10),parseInt(E,10),parseInt(L,10),parseInt(Q,10),M?parseInt(M.replace(".",""),10):0,"-"===C,parseInt(U,10),parseInt(y,10));if(!1===g.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return g}x=w.exec(g);if(null!==x){const [,u,D,J,E,L,Q,M,C]=x;g=e.SqlTimeStampOffset.fromParts(parseInt(u,10),parseInt(D,10),parseInt(J,10),parseInt(E,10),parseInt(L,10),0,0,"-"===Q,parseInt(M,10),parseInt(C,10));if(!1===g.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);
return g}x=q.exec(g);if(null!==x){const [,u,D,J,E,L]=x;g=k.DateTime.fromObject({year:parseInt(u,10),month:parseInt(D,10),day:parseInt(J,10),hour:parseInt(E,10),minute:parseInt(L,10),second:0},{zone:d.substituteUnknownTimezone(p)});if(!1===g.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return g}x=z.exec(g);if(null!==x){const [,u,D,J]=x;g=k.DateTime.fromObject({year:parseInt(u,10),month:parseInt(D,10),day:parseInt(J,10),hour:0,minute:0,second:0},{zone:d.substituteUnknownTimezone(p)});
if(!1===g.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return g}throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);}const l=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,m=/^(\d{1,2}):(\d{1,2})$/,t=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,
q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;a.convertToExecutingTimeZone=function(g,p){if(p instanceof k.Zone)return p===d.UnknownTimeZone.instance?k.DateTime.fromMillis(g.getTime(),{zone:d.UnknownTimeZone.instance}):k.DateTime.fromJSDate(g,{zone:p});switch(p){case "system":case "local":case null:return k.DateTime.fromJSDate(g);default:return"unknown"===p?.toLowerCase()?k.DateTime.fromMillis(g.getTime(),{zone:d.UnknownTimeZone.instance}):k.DateTime.fromJSDate(g,{zone:p})}};a.isDate=function(g){return g instanceof
Date};a.isDateOnly=function(g){return g instanceof b.DateOnly};a.isDateTime=function(g){return g instanceof k.DateTime};a.isNumber=function(g){return"number"===typeof g};a.isSqlInterval=function(g){return g instanceof f.SqlInterval};a.isString=function(g){return"string"===typeof g||g instanceof String};a.isTimeOnly=function(g){return g instanceof n.TimeOnly};a.isTimestampOffset=function(g){return g instanceof e.SqlTimeStampOffset};a.parseDate=function(g,p){const x=z.exec(g);if(null===x)try{return h(g,
p)}catch{throw new c.SqlError(c.SqlErrorCodes.InvalidDate);}const [,u,D,J]=x;g=b.DateOnly.fromParts(parseInt(u,10),parseInt(D,10),parseInt(J,10));if(null===g)throw new c.SqlError(c.SqlErrorCodes.InvalidDate);return g};a.parseTime=function(g){let p=l.exec(g);if(null!==p){const [,x,u,D]=p;g=n.TimeOnly.fromParts(parseInt(x,10),parseInt(u,10),parseInt(D,10),0);if(null!==g)return g;throw new c.SqlError(c.SqlErrorCodes.InvalidTime);}p=m.exec(g);if(null!==p){const [,x,u]=p;g=n.TimeOnly.fromParts(parseInt(x,
10),parseInt(u,10),0,0);if(null!==g)return g;throw new c.SqlError(c.SqlErrorCodes.InvalidTime);}p=t.exec(g);if(null!==p){const [,x,u,D,J]=p;g=n.TimeOnly.fromParts(parseInt(x,10),parseInt(u,10),parseInt(D,10),parseInt(J,10));if(null!==g)return g}throw new c.SqlError(c.SqlErrorCodes.InvalidTime);};a.parseTimestamp=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","./errorSupport"],function(a,b){class c{constructor(){this.op="+";
this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(f){if(null!==f.precision||null!==f.secondary)throw new b.SqlError(b.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(f,e){e.includes(".")?(e=e.split("."),f.second=parseFloat(e[0]),f.millis=parseInt(e[1],10)):f.second=parseFloat(e)}static createFromMilliseconds(f){const e=new c;e.second=f/1E3;return e}static createFromValueAndQualifier(f,e,n){let d=null;const k=new c;k.op="-"===
n?"-":"+";if("interval-period"===e.type){c._fixDefaults(e);n=RegExp("^[0-9]{1,}$");if("year"===e.period||"month"===e.period)throw new b.SqlError(b.SqlErrorCodes.YearMonthIntervals);if("second"===e.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(f))c._parseSecondsComponent(k,f);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);else if(n.test(f))k[e.period]=parseFloat(f);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}else{c._fixDefaults(e.start);c._fixDefaults(e.end);if("year"===
e.start.period||"month"===e.start.period||"year"===e.end.period||"month"===e.end.period)throw new b.SqlError(b.SqlErrorCodes.YearMonthIntervals);switch(e.start.period){case "day":switch(e.end.period){case "hour":d=RegExp("^[0-9]{1,} [0-9]{1,}$");if(d.test(f))k[e.start.period]=parseFloat(f.split(" ")[0]),k[e.end.period]=parseFloat(f.split(" ")[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "minute":d=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(d.test(f))k[e.start.period]=
parseFloat(f.split(" ")[0]),f=f.split(" ")[1].split(":"),k.hour=parseFloat(f[0]),k.minute=parseFloat(f[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "second":d=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(d.test(f))k[e.start.period]=parseFloat(f.split(" ")[0]),f=f.split(" ")[1].split(":"),k.hour=parseFloat(f[0]),k.minute=parseFloat(f[1]),c._parseSecondsComponent(k,f[2]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(e.end.period){case "minute":d=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(d.test(f))k.hour=parseFloat(f.split(":")[0]),k.minute=parseFloat(f.split(":")[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "second":d=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(d.test(f))f=f.split(":"),k.hour=parseFloat(f[0]),k.minute=parseFloat(f[1]),c._parseSecondsComponent(k,f[2]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(e.end.period){case "second":d=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(d.test(f))f=f.split(":"),k.minute=parseFloat(f[0]),c._parseSecondsComponent(k,f[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}}return k}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}a.SqlInterval=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../mathUtils ../string ./DateOnly ./errorSupport ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(a,b,c,f,e,n,d,k,h){function l(q){return"string"===typeof q||q instanceof String}function m(q){return d.isDate(q)||d.isDateOnly(q)||d.isDateTime(q)||
d.isTimeOnly(q)||d.isTimestampOffset(q)?!1:!0}function t(q){return d.isDateOnly(q)||d.isTimeOnly(q)?q.toString():d.isTimestampOffset(q)?q.toSQLValue():d.isDateTime(q)?0===q.millisecond?q.toFormat("yyyy-LL-dd HH:mm:ss"):q.toSQL({includeOffset:!1}):d.isDate(q)?t(h.DateTime.fromJSDate(q)):q.toString()}function z(q){if(d.isDate(q))return f.DateOnly.fromDateJS(q);if(d.isDateTime(q))return f.DateOnly.fromParts(q.year,q.month,q.day);if(d.isDateOnly(q))return q;if(d.isTimeOnly(q))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);
if(d.isTimestampOffset(q)&&null===f.DateOnly.fromParts(q.year,q.month,q.day))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(l(q)&&(q=f.DateOnly.fromReader(q),null!==q&&q.isValid))return q;throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}function r(q,g,p){if(d.isDate(q))return d.convertToExecutingTimeZone(q,g);if(d.isDateTime(q))return q;if(d.isDateOnly(q))return q.toDateTimeLuxon("unknown");if(d.isTimeOnly(q))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(d.isTimestampOffset(q))return q;
if(l(q))return d.parseTimestamp(q,"unknown",p);throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}function v(q){if(d.isDate(q))return k.TimeOnly.fromDateJS(q);if(d.isDateTime(q))return k.TimeOnly.fromDateTime(q);if(d.isDateOnly(q))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(d.isTimeOnly(q))return q;if(d.isTimestampOffset(q))return k.TimeOnly.fromSqlTimeStampOffset(q);if(l(q))return d.parseTime(q);throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);}const w={extract:{minParams:2,
maxParams:2,evaluate:([q,g])=>{if(null==g)return null;if(d.isDate(g))switch(q.toUpperCase()){case "SECOND":return g.getSeconds();case "MINUTE":return g.getMinutes();case "HOUR":return g.getHours();case "DAY":return g.getDate();case "MONTH":return g.getMonth()+1;case "YEAR":return g.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(d.isDateTime(g))switch(q.toUpperCase()){case "SECOND":return g.second;case "MINUTE":return g.minute;case "HOUR":return g.hour;case "DAY":return g.day;
case "MONTH":return g.month;case "YEAR":return g.year}else if(d.isDateOnly(g))switch(q.toUpperCase()){case "DAY":return g.day;case "MONTH":return g.month;case "YEAR":return g.year}else if(d.isTimeOnly(g))switch(q.toUpperCase()){case "SECOND":return g.second;case "MINUTE":return g.minute;case "HOUR":return g.hour}else if(d.isTimestampOffset(g))switch(q.toUpperCase()){case "SECOND":return g.second;case "MINUTE":return g.minute;case "HOUR":return g.hour;case "DAY":return g.day;case "MONTH":return g.month;
case "YEAR":return g.year;case "TIMEZONE_HOUR":return g.timezoneOffsetHour;case "TIMEZONE_MINUTE":return g.timezoneOffsetMinutes}throw new e.SqlError(e.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [g,p]=q;return null==g||null==p?null:g.toString().substring(p-1)}if(3===q.length){const [g,p,x]=q;return null==g||null==p||null==x?null:0>=x?"":g.toString().substring(p-1,p+x-1)}}},position:{minParams:2,maxParams:2,
evaluate:([q,g])=>null==q||null==g?null:g.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var g=3===q.length,p=g?q[1]:" ";g=g?q[2]:q[1];if(null==p||null==g)return null;p=`(${c.escapeRegExpString(p)})`;switch(q[0]){case "BOTH":return g.replaceAll(new RegExp(`^${p}*|${p}*$`,"g"),"");case "LEADING":return g.replaceAll(new RegExp(`^${p}*`,"g"),"");case "TRAILING":return g.replaceAll(new RegExp(`${p}*$`,"g"),"")}throw new e.SqlError(e.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>
null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[0]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,
maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,maxParams:2,evaluate:q=>{const g=q[0];q=2===q.length?10**q[1]:1;return null==g?null:Math.round(g*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length||0===q[1]?Math.trunc(q[0]):b.decimalAdjust("trunc",q[0],-Number(q[1]))},char_length:{minParams:1,maxParams:1,evaluate:q=>l(q[0])?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let g="";for(let p=0;p<q.length;p++){if(null==
q[p])return null;g+=q[p].toString()}return g}},lower:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:q=>{for(const g of q)if(null!==g)return g;return null}},cosh:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cosh(q[0])},sinh:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sinh(q[0])},tanh:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:Math.tanh(q[0])},nullif:{minParams:2,maxParams:2,evaluate:(q,g)=>n.sqlCompare(q[0],q[1],"\x3d")?null:q[0]},cast:{minParams:2,maxParams:2,evaluate:(q,g)=>{const p=q[0];q=q[1];if(null===p)return null;switch(q.type){case "integer":if(!m(p))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);g=parseInt(p,10);if(isNaN(g))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return g;case "smallint":if(!m(p))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);
g=parseInt(p,10);if(isNaN(g))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);if(32767<g||-32767>g)throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return g;case "float":case "real":if(!m(p))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);g=parseFloat(p);if(isNaN(g))throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);return g;case "time":return v(p);case "date":return z(p);case "timestamp":return r(p,g,!0===q.withtimezone);case "varchar":g=t(p);if(g.length>q.size)throw new e.SqlError(e.SqlErrorCodes.CannotCastValue);
return g;default:throw new e.SqlError(e.SqlErrorCodes.InvalidDataType);}}}};a.evaluateFunction=function(q,g,p){const x=w[q.toLowerCase()];if(null==x)throw new e.SqlError(e.SqlErrorCodes.FunctionNotRecognized);if(g.length<x.minParams||g.length>x.maxParams)throw new e.SqlError(e.SqlErrorCodes.InvalidParameterCount,{name:q.toUpperCase()});return x.evaluate(g,p)};a.isStandardized=function(q,g){q=w[q.toLowerCase()];return null!=q&&g>=q.minParams&&g<=q.maxParams};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ./errorSupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),function(a,b,c,f,e,n){function d(w){return c.isDateTime(w)||c.isTimestampOffset(w)?!0:!1}function k(w){return c.isDateTime(w)||c.isDateOnly(w)||c.isTimestampOffset(w)||c.isTimeOnly(w)?!0:!1}function h(w){if(c.isDateTime(w))return w.toMillis();if(c.isDateOnly(w))return w.toNumber();if(c.isTimestampOffset(w))return w.toMilliseconds();
throw new b.SqlError(b.SqlErrorCodes.InvalidDataType);}function l(w,q,g){switch(g){case "\x3c\x3e":return w!==q;case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}}function m(w,q,g){const p=parseFloat(q);if(!isNaN(p))return l(w,p,g);w=w.toString();switch(g){case "\x3c\x3e":return w!==q;case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}}function t(w,
q,g){const p=parseFloat(w);if(!isNaN(p))return l(p,q,g);q=q.toString();switch(g){case "\x3c\x3e":return w!==q;case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}}function z(w,q,g){switch(g){case "\x3c\x3e":return w!==q;case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}}function r(w,q,g){w instanceof f.SqlTimeStampOffset&&(w=w.toDateTime());q instanceof
f.SqlTimeStampOffset&&(q=q.toDateTime());w=v(w);q=v(q);switch(g){case "\x3c\x3e":return w!==q;case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}}function v(w){return 321408E5*w.year+26784E5*w.month+864E5*w.day+36E5*w.hour+6E4*w.minute+1E3*w.second+w.millisecond}a.dateValueInMilliseconds=h;a.isDateOrTimeValue=k;a.isDateTimeComparableValue=d;a.sqlCompare=function(w,q,g,p){if(null==w||null==q)return null;if(c.isNumber(w)){if(c.isNumber(q))return l(w,
q,g);if(c.isString(q))return m(w,q,g);if(k(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isDateOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}else if(c.isString(w)){if(c.isNumber(q))return t(w,q,g);if(c.isString(q))return z(w,q,g);if(c.isDateTime(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isDateOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isTimeOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isTimestampOffset(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}else if(c.isDateTime(w)){if(d(q)){if(w instanceof n.DateTime&&e.isUnknownTimeZone(w.zone)){if(q instanceof n.DateTime&&!1===e.isUnknownTimeZone(q.zone)||q instanceof f.SqlTimeStampOffset)return r(w,q,g)}else if(q instanceof n.DateTime&&e.isUnknownTimeZone(q.zone)&&(w instanceof n.DateTime&&!1===e.isUnknownTimeZone(w.zone)||w instanceof f.SqlTimeStampOffset))return r(w,q,g);return l(h(w),h(q),g)}if(c.isString(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isDateOnly(q))return q=q.toDateTimeLuxon(w.zone),
w=w.startOf("day"),l(w.toMillis(),q.toMillis(),g);if(c.isTimeOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isNumber(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}else if(c.isDateOnly(w)){if(c.isTimestampOffset(q))return w=w.toDateTimeLuxon(q.toDateTime().zone),q=q.startOfDay(),l(w.toMillis(),q.toMilliseconds(),g);if(c.isDateTime(q))return w=w.toDateTimeLuxon(q.zone),q=q.startOf("day"),l(w.toMillis(),q.toMillis(),g);if(c.isString(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
if(c.isDateOnly(q))return l(w.toNumber(),q.toNumber(),g);if(c.isTimeOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isNumber(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}else if(c.isTimeOnly(w)){if(c.isTimeOnly(q))return l(w.toNumber(),q.toNumber(),g);if(c.isString(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isNumber(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isDateOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(d(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);
}else if(c.isTimestampOffset(w)){if(d(q))return q instanceof n.DateTime&&e.isUnknownTimeZone(q.zone)?r(w,q,g):l(h(w),h(q),g);if(c.isString(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isDateOnly(q))return q=q.toDateTimeLuxon(w.toDateTime().zone),w=w.startOfDay(),l(w.toMilliseconds(),q.toMillis(),g);if(c.isTimeOnly(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);if(c.isNumber(q))throw new b.SqlError(b.SqlErrorCodes.InvalidOperator);}switch(g){case "\x3c\x3e":return w!==q;
case "\x3d":return w===q;case "\x3e":return w>q;case "\x3c":return w<q;case "\x3e\x3d":return w>=q;case "\x3c\x3d":return w<=q}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports"],function(a){function b(d,k,h,l){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,b.prototype);d.expected=k;d.found=h;d.location=l;d.name="SyntaxError";return d}function c(d,k,h){h=h||" ";if(d.length>k)return d;k-=d.length;h+=h.repeat(k);
return d+h.slice(0,k)}function f(d,k){function h(){return r(Ba,T)}function l(ka,la){la=void 0!==la?la:r(Ba,T);throw new b(ka,null,null,la);}function m(ka,la){return{type:"literal",text:ka,ignoreCase:la}}function t(ka,la,ta){return{type:"class",parts:ka,inverted:la,ignoreCase:ta}}function z(ka){var la=Hb[ka];if(!la){if(ka>=Hb.length)var ta=Hb.length-1;else for(ta=ka;!Hb[--ta];);la=Hb[ta];for(la={line:la.line,column:la.column};ta<ka;)10===d.charCodeAt(ta)?(la.line++,la.column=1):la.column++,ta++;Hb[ka]=
la}return la}function r(ka,la,ta){ta=z(ka);var va=z(la);return{source:Hd,start:{offset:ka,line:ta.line,column:ta.column},end:{offset:la,line:va.line,column:va.column}}}function v(ka){T<ib||(T>ib&&(ib=T,jc=[]),jc.push(ka))}function w(){var ka=T;xa();var la=g();la!==I?(xa(),Ba=ka,ka=la):(T=ka,ka=I);return ka}function q(){var ka;var la=T;if(Ma()!==I){xa();var ta=[];for(ka=g();ka!==I;){ta.push(ka);var va=ka=T;var Fa=xa();var Ga=Oa();Ga!==I?(va=xa(),va=Fa=[Fa,Ga,va]):(T=va,va=I);va!==I?(va=g(),va===I?
(T=ka,ka=I):ka=va):ka=va}ka=xa();va=Ka();va!==I?(Ba=la,la=Qa(h(),...ta)):(T=la,la=I)}else T=la,la=I;return la}function g(){var ka=T;var la=p();if(la!==I){var ta=[];var va=T;xa();var Fa=ra();if(Fa!==I){xa();var Ga=p();Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)}else T=va,va=I;for(;va!==I;)ta.push(va),va=T,xa(),Fa=ra(),Fa!==I?(xa(),Ga=p(),Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)):(T=va,va=I);Ba=ka;ka=mb(la,ta)}else T=ka,ka=I;return ka}function p(){var ka=T;var la=x();
if(la!==I){var ta=[];var va=T;xa();var Fa=ea();if(Fa!==I){xa();var Ga=x();Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)}else T=va,va=I;for(;va!==I;)ta.push(va),va=T,xa(),Fa=ea(),Fa!==I?(xa(),Ga=x(),Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)):(T=va,va=I);Ba=ka;ka=mb(la,ta)}else T=ka,ka=I;return ka}function x(){var ka=T;var la=W();if(la===I){la=T;if(33===d.charCodeAt(T)){var ta=Id;T++}else ta=I,0===za&&v(Jd);if(ta!==I){var va=T;za++;if(61===d.charCodeAt(T)){var Fa=Kd;T++}else Fa=
I,0===za&&v(Ld);za--;Fa===I?va=void 0:(T=va,va=I);va!==I?la=ta=[ta,va]:(T=la,la=I)}else T=la,la=I}la!==I?(ta=xa(),va=x(),va!==I?(Ba=ka,ka={type:"unary-expression",location:h(),operator:"NOT",expr:va}):(T=ka,ka=I)):(T=ka,ka=I);if(ka===I){la=T;ka=E();if(ka!==I){ta=T;xa();va=T;Fa=[];var Ga=T;xa();var Pa=u();if(Pa!==I){xa();var Wa=E();Wa!==I?(Ba=Ga,Ga={op:Pa,expr:Wa,location:h()}):(T=Ga,Ga=I)}else T=Ga,Ga=I;if(Ga!==I)for(;Ga!==I;)Fa.push(Ga),Ga=T,xa(),Pa=u(),Pa!==I?(xa(),Wa=E(),Wa!==I?(Ba=Ga,Ga={op:Pa,
expr:Wa,location:h()}):(T=Ga,Ga=I)):(T=Ga,Ga=I);else Fa=I;Fa!==I&&(Ba=va,Fa={type:"arithmetic",tail:Fa});va=Fa;if(va===I&&(va=T,Fa=J(),Fa!==I?(xa(),Ga=q(),Ga!==I?(Ba=va,va={op:Fa,right:Ga}):(T=va,va=I)):(T=va,va=I),va===I&&(va=T,Fa=J(),Fa!==I?(xa(),Ga=X(),Ga!==I?(Ba=va,va={op:Fa,right:Ga}):(T=va,va=I)):(T=va,va=I)),va===I)){va=T;Fa=W();if(Fa!==I)if(xa(),Ga=ja(),Ga!==I){var Lb=xa();Pa=T;Wa=E();if(Wa!==I){xa();var db=ea();db!==I?(xa(),Fa=E(),Fa!==I?(Ba=Pa,Pa=Wa,Pa=Qa(h(),Pa,Fa)):(T=Pa,Pa=I)):(T=Pa,
Pa=I)}else T=Pa,Pa=I;Pa!==I?(Ba=va,va={op:"NOT"+Ga,right:Pa}):(T=va,va=I)}else T=va,va=I;else T=va,va=I;va===I&&(va=T,Fa=ja(),Fa!==I?(xa(),Ga=T,Lb=E(),Lb!==I?(Pa=xa(),Wa=ea(),Wa!==I?(xa(),db=E(),db!==I?(Ba=Ga,Ga=Lb,Pa=db,Ga=Qa(h(),Ga,Pa)):(T=Ga,Ga=I)):(T=Ga,Ga=I)):(T=Ga,Ga=I),Ga!==I?(Ba=va,va={op:Fa,right:Ga}):(T=va,va=I)):(T=va,va=I));va===I&&(va=T,Fa=na(),Fa!==I?(xa(),Ga=W(),Ga!==I?(xa(),Ga=E(),Ga!==I?(Ba=va,va={op:Fa+"NOT",right:Ga}):(T=va,va=I)):(T=va,va=I)):(T=va,va=I),va===I&&(va=T,Fa=na(),
Fa!==I?(xa(),Ga=E(),Ga!==I?(Ba=va,va={op:Fa,right:Ga}):(T=va,va=I)):(T=va,va=I)),va===I&&(va=T,Fa=D(),Fa!==I?(xa(),Ga=ha(),Ga!==I?(xa(),Pa=T,Wa=d.substr(T,6),Wa.toLowerCase()===Md?T+=6:(Wa=I,0===za&&v(Nd)),Wa!==I?(Wa=T,za++,db=B(),za--,db===I?Wa=void 0:(T=Wa,Wa=I),Wa!==I?(Ba=Pa,Pa="ESCAPE"):(T=Pa,Pa=I)):(T=Pa,Pa=I),Pa!==I?(xa(),Pa=G(),Pa!==I?(Ba=va,va={op:Fa,right:Ga,escape:Pa.value}):(T=va,va=I)):(T=va,va=I)):(T=va,va=I)):(T=va,va=I),va===I&&(va=T,Fa=D(),Fa!==I?(xa(),Ga=ha(),Ga!==I?(Ba=va,va={op:Fa,
right:Ga,escape:""}):(T=va,va=I)):(T=va,va=I))))}va!==I?ta=va:(T=ta,ta=I);ta===I&&(ta=null);Ba=la;la=ta;""==la||void 0==la||null==la?la=ka:(ta=null,la=ta="arithmetic"==la.type?mb(ka,la.tail):nb(la.op,ka,la.right,la.escape,h()))}else T=la,la=I;ka=la}return ka}function u(){if(d.substr(T,2)===fd){var ka=fd;T+=2}else ka=I,0===za&&v(Od);ka===I&&(62===d.charCodeAt(T)?(ka=Pd,T++):(ka=I,0===za&&v(Qd)),ka===I&&(d.substr(T,2)===gd?(ka=gd,T+=2):(ka=I,0===za&&v(Rd)),ka===I&&(d.substr(T,2)===hd?(ka=hd,T+=2):(ka=
I,0===za&&v(Sd)),ka===I&&(ka=d.charAt(T),Td.test(ka)?T++:(ka=I,0===za&&v(Ud)),ka===I&&(d.substr(T,2)===id?(ka=id,T+=2):(ka=I,0===za&&v(Vd)))))));return ka}function D(){var ka;var la=ka=T;var ta=W();if(ta!==I){var va=xa();var Fa=P();Fa!==I?la=ta=[ta,va,Fa]:(T=la,la=I)}else T=la,la=I;la!==I&&(Ba=ka,la=la[0]+" "+la[2]);ka=la;ka===I&&(ka=P());return ka}function J(){var ka;var la=ka=T;var ta=W();if(ta!==I){var va=xa();var Fa=ba();Fa!==I?la=ta=[ta,va,Fa]:(T=la,la=I)}else T=la,la=I;la!==I&&(Ba=ka,la=la[0]+
" "+la[2]);ka=la;ka===I&&(ka=ba());return ka}function E(){var ka=T;var la=Q();if(la!==I){var ta=[];var va=T;xa();var Fa=L();if(Fa!==I){xa();var Ga=Q();Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)}else T=va,va=I;for(;va!==I;)ta.push(va),va=T,xa(),Fa=L(),Fa!==I?(xa(),Ga=Q(),Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)):(T=va,va=I);Ba=ka;ka=mb(la,ta)}else T=ka,ka=I;return ka}function L(){var ka=d.charAt(T);kc.test(ka)?T++:(ka=I,0===za&&v(lc));ka===I&&(d.substr(T,2)===jd?(ka=
jd,T+=2):(ka=I,0===za&&v(Wd)));return ka}function Q(){var ka=T;var la=C();if(la!==I){var ta=[];var va=T;xa();var Fa=M();if(Fa!==I){xa();var Ga=C();Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)}else T=va,va=I;for(;va!==I;)ta.push(va),va=T,xa(),Fa=M(),Fa!==I?(xa(),Ga=C(),Ga!==I?(Ba=va,va={op:Fa,expr:Ga,location:h()}):(T=va,va=I)):(T=va,va=I);Ba=ka;ka=mb(la,ta)}else T=ka,ka=I;return ka}function M(){var ka=d.charAt(T);Xd.test(ka)?T++:(ka=I,0===za&&v(Yd));return ka}function C(){var ka=G();
if(ka===I){var la=T;var ta=T;var va=R();if(va!==I){var Fa=ia();if(Fa!==I){var Ga=A();Ga!==I?(Ba=ta,ta=parseFloat(va+Fa+Ga)):(T=ta,ta=I)}else T=ta,ta=I}else T=ta,ta=I;ta===I&&(ta=T,va=R(),va!==I?(Fa=ia(),Fa!==I?(Ba=ta,ta=parseFloat(va+Fa)):(T=ta,ta=I)):(T=ta,ta=I),ta===I&&(ta=T,va=R(),va!==I?(Fa=A(),Fa!==I?(Ba=ta,ta=parseFloat(va+Fa)):(T=ta,ta=I)):(T=ta,ta=I),ta===I&&(ta=T,va=R(),va!==I&&(Ba=ta,va=parseFloat(va)),ta=va)));var Pa=ta;if(Pa!==I){var Wa=T;za++;var Lb=y();za--;Lb===I?Wa=void 0:(T=Wa,Wa=
I);Wa!==I?(Ba=la,la={type:"number",location:h(),value:Pa}):(T=la,la=I)}else T=la,la=I;ka=la;if(ka===I){var db=T;var Ib=T;var Mb=d.substr(T,4);Mb.toLowerCase()===Zd?T+=4:(Mb=I,0===za&&v($d));if(Mb!==I){var Nb=T;za++;var ae=B();za--;ae===I?Nb=void 0:(T=Nb,Nb=I);Nb!==I?Ib=Mb=[Mb,Nb]:(T=Ib,Ib=I)}else T=Ib,Ib=I;var pb=Ib;pb!==I&&(Ba=db,pb={type:"boolean",location:h(),value:!0});db=pb;if(db===I){db=T;var Jb=T;var Ob=d.substr(T,5);Ob.toLowerCase()===be?T+=5:(Ob=I,0===za&&v(ce));if(Ob!==I){var Pb=T;za++;
var de=B();za--;de===I?Pb=void 0:(T=Pb,Pb=I);Pb!==I?Jb=Ob=[Ob,Pb]:(T=Jb,Jb=I)}else T=Jb,Jb=I;pb=Jb;pb!==I&&(Ba=db,pb={type:"boolean",location:h(),value:!1});db=pb}ka=db;if(ka===I){var ee=T;var Kb=T;var Qb=d.substr(T,4);Qb.toLowerCase()===fe?T+=4:(Qb=I,0===za&&v(ge));if(Qb!==I){var Rb=T;za++;var he=B();za--;he===I?Rb=void 0:(T=Rb,Rb=I);Rb!==I?Kb=Qb=[Qb,Rb]:(T=Kb,Kb=I)}else T=Kb,Kb=I;var Ec=Kb;Ec!==I&&(Ba=ee,Ec={type:"null",location:h(),value:null});ka=Ec;if(ka===I){var qb=T;if(ua()!==I){xa();var mc=
ha();mc!==I?(Ba=qb,"string"===mc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(mc.value)&&l("Date literal is invalid"),qb={type:"date",location:h(),value:mc.value}):(T=qb,qb=I)}else T=qb,qb=
I;ka=qb;if(ka===I){var rb=T;if(sa()!==I){xa();var nc=ha();nc!==I?(Ba=rb,"string"===nc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(nc.value)&&l("Timestamp literal is invalid"),rb={type:"timestamp",
location:h(),value:nc.value}):(T=rb,rb=I)}else T=rb,rb=I;ka=rb;if(ka===I){var ab=T;var Fc=wa();if(Fc!==I){xa();var sb=d.charAt(T);kc.test(sb)?T++:(sb=I,0===za&&v(lc));if(sb!==I){xa();var Sb=ha();if(Sb!==I){xa();var kd=fa();if(kd!==I){Ba=ab;var ie=sb,je=Sb;ab={type:"interval",location:h(),value:je,qualifier:kd,op:ie}}else T=ab,ab=I}else T=ab,ab=I}else T=ab,ab=I}else T=ab,ab=I;if(ab===I)if(ab=T,Fc=wa(),Fc!==I)if(xa(),sb=ha(),sb!==I)if(xa(),Sb=fa(),Sb!==I){Ba=ab;var ke=sb,le=Sb;ab={type:"interval",location:h(),
value:ke,qualifier:le,op:""}}else T=ab,ab=I;else T=ab,ab=I;else T=ab,ab=I;ka=ab;if(ka===I){var tb=T;if(ya()!==I){xa();var oc=ha();oc!==I?(Ba=tb,"string"===oc.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(oc.value)&&l("Time literal is invalid"),tb={type:"time",location:h(),value:oc.value}):(T=tb,tb=I)}else T=tb,tb=I;ka=tb}}}}}}}var Sa=ka;if(Sa===I){var ub=T;if(qa()!==I){xa();var Ta=T;var Gc=Ma();if(Gc!==I){xa();var Tb=aa();if(Tb!==
I){xa();var Hc=oa();if(Hc!==I){xa();var Ub=g();if(Ub!==I){xa();var Ic=Ka();if(Ic!==I){Ba=Ta;var me=Tb,ne=Ub;Ta=Qa(h(),me,ne)}else T=Ta,Ta=I}else T=Ta,Ta=I}else T=Ta,Ta=I}else T=Ta,Ta=I}else T=Ta,Ta=I;if(Ta===I)if(Ta=T,Gc=Ma(),Gc!==I)if(xa(),Tb=aa(),Tb!==I)if(xa(),Hc=Oa(),Hc!==I)if(xa(),Ub=g(),Ub!==I)if(xa(),Ic=Ka(),Ic!==I){Ba=Ta;var oe=Tb,pe=Ub;Ta=Qa(h(),oe,pe)}else T=Ta,Ta=I;else T=Ta,Ta=I;else T=Ta,Ta=I;else T=Ta,Ta=I;else T=Ta,Ta=I;if(Ta!==I){Ba=ub;var qe=Ta;ub={type:"function",location:h(),name:"extract",
args:qe}}else T=ub,ub=I}else T=ub,ub=I;Sa=ub;if(Sa===I){var vb=T;var wb=T;var Jc=d.substr(T,9);Jc.toLowerCase()===re?T+=9:(Jc=I,0===za&&v(se));if(Jc!==I){var pc=T;za++;var te=B();za--;te===I?pc=void 0:(T=pc,pc=I);pc!==I?(Ba=wb,wb="SUBSTRING"):(T=wb,wb=I)}else T=wb,wb=I;if(wb!==I){xa();var Ra=T;var Kc=Ma();if(Kc!==I){xa();var Vb=g();if(Vb!==I){xa();var Lc=oa();if(Lc!==I){xa();var Wb=g();if(Wb!==I){xa();var kb=T;var xb=T;var Mc=d.substr(T,3);Mc.toLowerCase()===ue?T+=3:(Mc=I,0===za&&v(ve));if(Mc!==I){var qc=
T;za++;var we=B();za--;we===I?qc=void 0:(T=qc,qc=I);qc!==I?(Ba=xb,xb="FOR"):(T=xb,xb=I)}else T=xb,xb=I;var rc=xb;if(rc!==I){var Nc=xa();var sc=g();sc!==I?(xa(),kb=sc):(T=kb,kb=I)}else T=kb,kb=I;kb===I&&(kb=null);rc=Ka();if(rc!==I){Ba=Ra;var xe=Vb,ye=Wb,ld=kb;Ra=Qa(h(),xe,ye,...(ld?[ld]:[]))}else T=Ra,Ra=I}else T=Ra,Ra=I}else T=Ra,Ra=I}else T=Ra,Ra=I}else T=Ra,Ra=I;if(Ra===I)if(Ra=T,Kc=Ma(),Kc!==I)if(xa(),Vb=g(),Vb!==I)if(xa(),Lc=Oa(),Lc!==I)if(xa(),Wb=g(),Wb!==I)if(xa(),kb=Oa(),kb!==I)if(rc=xa(),
Nc=g(),Nc!==I)if(sc=Ka(),sc!==I){Ba=Ra;var ze=Vb,Ae=Wb,Be=Nc;Ra=Qa(h(),ze,Ae,Be)}else T=Ra,Ra=I;else T=Ra,Ra=I;else T=Ra,Ra=I;else T=Ra,Ra=I;else T=Ra,Ra=I;else T=Ra,Ra=I;else T=Ra,Ra=I;if(Ra!==I){Ba=vb;var Ce=Ra;vb={type:"function",location:h(),name:"substring",args:Ce}}else T=vb,vb=I}else T=vb,vb=I;Sa=vb;if(Sa===I){var yb=T;var zb=T;var Oc=d.substr(T,4);Oc.toLowerCase()===De?T+=4:(Oc=I,0===za&&v(Ee));if(Oc!==I){var tc=T;za++;var Fe=B();za--;Fe===I?tc=void 0:(T=tc,tc=I);tc!==I?(Ba=zb,zb="TRIM"):
(T=zb,zb=I)}else T=zb,zb=I;if(zb!==I){xa();var Xa=T;var Pc=Ma();if(Pc!==I){xa();var Qc=da();xa();var Xb=g();if(Xb!==I){xa();var Rc=oa();if(Rc!==I){xa();var md=g();if(md!==I){xa();var Ge=Ka();if(Ge!==I){Ba=Xa;var He=Qc,Ie=Xb;Xa=Qa(h(),He,Ie,md)}else T=Xa,Xa=I}else T=Xa,Xa=I}else T=Xa,Xa=I}else T=Xa,Xa=I}else T=Xa,Xa=I;if(Xa===I)if(Xa=T,Pc=Ma(),Pc!==I)if(xa(),Qc=da(),xa(),Xb=g(),Xb!==I)if(xa(),Rc=Ka(),Rc!==I){Ba=Xa;var Je=Qc,Ke=Xb;Xa=Qa(h(),Je,Ke)}else T=Xa,Xa=I;else T=Xa,Xa=I;else T=Xa,Xa=I;if(Xa!==
I){Ba=yb;var Le=Xa;yb={type:"function",location:h(),name:"trim",args:Le}}else T=yb,yb=I}else T=yb,yb=I;Sa=yb;if(Sa===I){var Ab=T;var Bb=T;var Sc=d.substr(T,8);Sc.toLowerCase()===Me?T+=8:(Sc=I,0===za&&v(Ne));if(Sc!==I){var uc=T;za++;var Oe=B();za--;Oe===I?uc=void 0:(T=uc,uc=I);uc!==I?(Ba=Bb,Bb="POSITION"):(T=Bb,Bb=I)}else T=Bb,Bb=I;if(Bb!==I){xa();var Ua=T;var Tc=Ma();if(Tc!==I){xa();var Yb=g();if(Yb!==I){xa();var Uc=ba();if(Uc!==I){xa();var Zb=g();if(Zb!==I){xa();var Vc=Ka();if(Vc!==I){Ba=Ua;var Pe=
Yb,Qe=Zb;Ua=Qa(h(),Pe,Qe)}else T=Ua,Ua=I}else T=Ua,Ua=I}else T=Ua,Ua=I}else T=Ua,Ua=I}else T=Ua,Ua=I;if(Ua===I)if(Ua=T,Tc=Ma(),Tc!==I)if(xa(),Yb=g(),Yb!==I)if(xa(),Uc=Oa(),Uc!==I)if(xa(),Zb=g(),Zb!==I)if(xa(),Vc=Ka(),Vc!==I){Ba=Ua;var Re=Yb,Se=Zb;Ua=Qa(h(),Re,Se)}else T=Ua,Ua=I;else T=Ua,Ua=I;else T=Ua,Ua=I;else T=Ua,Ua=I;else T=Ua,Ua=I;if(Ua!==I){Ba=Ab;var Te=Ua;Ab={type:"function",location:h(),name:"position",args:Te}}else T=Ab,Ab=I}else T=Ab,Ab=I;Sa=Ab;if(Sa===I){var Cb=T;var Db=T;var Wc=d.substr(T,
4);Wc.toLowerCase()===Ue?T+=4:(Wc=I,0===za&&v(Ve));if(Wc!==I){var vc=T;za++;var We=B();za--;We===I?vc=void 0:(T=vc,vc=I);vc!==I?(Ba=Db,Db="CAST"):(T=Db,Db=I)}else T=Db,Db=I;if(Db!==I){xa();var Va=T;var Xc=Ma();if(Xc!==I){xa();var $b=g();if($b!==I){xa();var Eb=T;var Yc=d.substr(T,2);Yc.toLowerCase()===Xe?T+=2:(Yc=I,0===za&&v(Ye));if(Yc!==I){var wc=T;za++;var Ze=B();za--;Ze===I?wc=void 0:(T=wc,wc=I);wc!==I?(Ba=Eb,Eb="AS"):(T=Eb,Eb=I)}else T=Eb,Eb=I;var Zc=Eb;if(Zc!==I){xa();var ac=V();if(ac!==I){xa();
var $c=Ka();if($c!==I){Ba=Va;var $e=$b,af=ac;Va=Qa(h(),$e,af)}else T=Va,Va=I}else T=Va,Va=I}else T=Va,Va=I}else T=Va,Va=I}else T=Va,Va=I;if(Va===I)if(Va=T,Xc=Ma(),Xc!==I)if(xa(),$b=g(),$b!==I)if(xa(),Zc=Oa(),Zc!==I)if(xa(),ac=V(),ac!==I)if(xa(),$c=Ka(),$c!==I){Ba=Va;var bf=$b,cf=ac;Va=Qa(h(),bf,cf)}else T=Va,Va=I;else T=Va,Va=I;else T=Va,Va=I;else T=Va,Va=I;else T=Va,Va=I;if(Va!==I){Ba=Cb;var df=Va;Cb={type:"function",location:h(),name:"cast",args:df}}else T=Cb,Cb=I}else T=Cb,Cb=I;Sa=Cb;if(Sa===I){var lb;
var xc=lb=T;za++;var yc=qa();za--;yc===I?xc=void 0:(T=xc,xc=I);if(xc!==I){var eb=T;var bc=U();bc!==I&&(Ba=eb);eb=bc;if(eb===I)if(eb=T,96===d.charCodeAt(T)?(bc=nd,T++):(bc=I,0===za&&v(od)),bc!==I){var zc=[];var jb=d.charAt(T);pd.test(jb)?T++:(jb=I,0===za&&v(qd));if(jb!==I)for(;jb!==I;)zc.push(jb),jb=d.charAt(T),pd.test(jb)?T++:(jb=I,0===za&&v(qd));else zc=I;zc!==I?(96===d.charCodeAt(T)?(jb=nd,T++):(jb=I,0===za&&v(od)),jb!==I?(Ba=eb,eb=zc.join("")):(T=eb,eb=I)):(T=eb,eb=I)}else T=eb,eb=I;yc=eb;if(yc!==
I){xa();var rd=q();if(rd!==I){Ba=lb;var ef=yc;lb={type:"function",location:h(),name:ef,args:rd}}else T=lb,lb=I}else T=lb,lb=I}else T=lb,lb=I;Sa=lb;if(Sa===I){var bb=T;var ad=Ja();if(ad!==I){xa();var cc=g();if(cc!==I){xa();var dc=[];var Ya=T;var fb=pa();if(fb!==I){var ec=xa();Ya=fb}else T=Ya,Ya=I;for(;Ya!==I;)dc.push(Ya),Ya=T,fb=pa(),fb!==I?(ec=xa(),Ya=fb):(T=Ya,Ya=I);Ya=Na();if(Ya!==I){Ba=bb;var ff=cc,gf=dc;bb={type:"case-expression",location:h(),format:"simple",operand:ff,clauses:gf,else:null,elseLocation:null}}else T=
bb,bb=I}else T=bb,bb=I}else T=bb,bb=I;if(bb===I)if(bb=T,ad=Ja(),ad!==I)if(xa(),cc=g(),cc!==I){xa();dc=[];Ya=T;fb=pa();fb!==I?(ec=xa(),Ya=fb):(T=Ya,Ya=I);for(;Ya!==I;)dc.push(Ya),Ya=T,fb=pa(),fb!==I?(ec=xa(),Ya=fb):(T=Ya,Ya=I);Ya=Y();if(Ya!==I)if(fb=xa(),ec=Na(),ec!==I){Ba=bb;var hf=cc,jf=dc,sd=Ya;bb={type:"case-expression",location:h(),format:"simple",operand:hf,clauses:jf,else:sd.value,elseLocation:sd.location}}else T=bb,bb=I;else T=bb,bb=I}else T=bb,bb=I;else T=bb,bb=I;var bd=bb;if(bd===I){var cb=
T;var cd=Ja();if(cd!==I){xa();var fc=[];var Za=T;var gb=ca();if(gb!==I){var gc=xa();Za=gb}else T=Za,Za=I;for(;Za!==I;)fc.push(Za),Za=T,gb=ca(),gb!==I?(gc=xa(),Za=gb):(T=Za,Za=I);Za=Na();if(Za!==I){Ba=cb;var kf=fc;cb={type:"case-expression",location:h(),format:"searched",clauses:kf,else:null,elseLocation:null}}else T=cb,cb=I}else T=cb,cb=I;if(cb===I)if(cb=T,cd=Ja(),cd!==I){xa();fc=[];Za=T;gb=ca();gb!==I?(gc=xa(),Za=gb):(T=Za,Za=I);for(;Za!==I;)fc.push(Za),Za=T,gb=ca(),gb!==I?(gc=xa(),Za=gb):(T=Za,
Za=I);Za=Y();if(Za!==I)if(gb=xa(),gc=Na(),gc!==I){Ba=cb;var lf=fc,td=Za;cb={type:"case-expression",location:h(),format:"searched",clauses:lf,else:td.value,elseLocation:td.location}}else T=cb,cb=I;else T=cb,cb=I}else T=cb,cb=I;bd=cb}Sa=bd;if(Sa===I){var Fb=T;var mf=T;var Ac;var hc=T;var ud=y();if(ud!==I){var vd=[];for(Ac=H();Ac!==I;)vd.push(Ac),Ac=H();Ba=hc;hc=ud+vd.join("")}else T=hc,hc=I;var wd=hc;wd!==I&&(Ba=mf);var ob=wd;if(ob!==I){Ba=Fb;var ic=ob;ob=/^CURRENT_DATE$/i.test(ic)?{type:"current-time",
location:h(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(ic)?{type:"current-time",location:h(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(ic)?{type:"current-time",location:h(),mode:"time"}:/^CURRENT_USER$/i.test(ic)?{type:"current-user",location:h()}:{type:"column-reference",location:h(),table:"",column:ic}}Fb=ob;if(Fb===I){Fb=T;var Gb=T;if(K()!==I){var Bc;var nf=T;var dd=[];for(Bc=N();Bc!==I;)dd.push(Bc),Bc=N();Ba=nf;var of=dd=dd.join("");var pf=K();pf!==I?(Ba=Gb,Gb=of):(T=Gb,Gb=I)}else T=Gb,Gb=I;ob=
Gb;if(ob!==I){Ba=Fb;var qf=ob;ob={type:"column-reference",location:h(),table:"",column:qf,delimited:!0}}Fb=ob}Sa=Fb;if(Sa===I&&(Sa=X(),Sa===I)){Sa=T;var rf=Ma();if(rf!==I){xa();var ed=g();if(ed!==I){xa();var sf=Ka();sf!==I?(Ba=Sa,ed.paren=!0,Sa=ed):(T=Sa,Sa=I)}else T=Sa,Sa=I}else T=Sa,Sa=I}}}}}}}}}return Sa}function U(){var ka;var la=T;var ta=y();if(ta!==I){var va=[];for(ka=B();ka!==I;)va.push(ka),ka=B();Ba=la;la=ta+va.join("")}else T=la,la=I;return la}function y(){var ka=d.charAt(T);tf.test(ka)?
T++:(ka=I,0===za&&v(uf));return ka}function B(){var ka=d.charAt(T);vf.test(ka)?T++:(ka=I,0===za&&v(wf));return ka}function H(){var ka=d.charAt(T);xd.test(ka)?T++:(ka=I,0===za&&v(yd));return ka}function N(){var ka=d.charAt(T);xd.test(ka)?T++:(ka=I,0===za&&v(yd));if(ka===I)if(ka=T,K()!==I){var la=K();la!==I?(Ba=ka,ka='"'):(T=ka,ka=I)}else T=ka,ka=I;return ka}function K(){var ka=d.charAt(T);xf.test(ka)?T++:(ka=I,0===za&&v(yf));return ka}function X(){var ka;var la=ka=T;if(64===d.charCodeAt(T)){var ta=
zf;T++}else ta=I,0===za&&v(Af);if(ta!==I){var va=U();va!==I?la=ta=[ta,va]:(T=la,la=I)}else T=la,la=I;la!==I&&(Ba=ka,ka=la,la={type:"parameter",location:h(),value:ka[1]});return la}function V(){var ka=T;var la=T;var ta=d.substr(T,7);ta.toLowerCase()===Bf?T+=7:(ta=I,0===za&&v(Cf));if(ta!==I){ta=T;za++;var va=B();za--;va===I?ta=void 0:(T=ta,ta=I);ta!==I?(Ba=la,la="INTEGER"):(T=la,la=I)}else T=la,la=I;la===I&&(la=T,ta=d.substr(T,3),ta.toLowerCase()===Df?T+=3:(ta=I,0===za&&v(Ef)),ta!==I?(ta=T,za++,va=
B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="INT"):(T=la,la=I)):(T=la,la=I));la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"integer"}});ka=la;ka===I&&(la=ka=T,ta=d.substr(T,8),ta.toLowerCase()===Ff?T+=8:(ta=I,0===za&&v(Gf)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="SMALLINT"):(T=la,la=I)):(T=la,la=I),la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"smallint"}}),ka=la,ka===I&&(la=ka=T,ta=d.substr(T,5),ta.toLowerCase()===Hf?T+=
5:(ta=I,0===za&&v(If)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="FLOAT"):(T=la,la=I)):(T=la,la=I),la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"float"}}),ka=la,ka===I&&(la=ka=T,ta=d.substr(T,4),ta.toLowerCase()===Jf?T+=4:(ta=I,0===za&&v(Kf)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="REAL"):(T=la,la=I)):(T=la,la=I),la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"real"}}),ka=la,ka===I&&(ka=T,la=ua(),
la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"date"}}),ka=la,ka===I&&(ka=T,la=sa(),la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"timestamp"}}),ka=la,ka===I&&(ka=T,la=ya(),la!==I&&(Ba=ka,la={type:"data-type",location:h(),value:{type:"time"}}),ka=la,ka===I&&(la=ka=T,ta=d.substr(T,7),ta.toLowerCase()===Lf?T+=7:(ta=I,0===za&&v(Mf)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="VARCHAR"):(T=la,la=I)):(T=la,la=I),la!==I?(xa(),la=Ma(),la!==I?
(xa(),la=F(),la!==I?(xa(),ta=Ka(),ta!==I?(Ba=ka,ka={type:"data-type",location:h(),value:{type:"varchar",size:parseInt(la)}}):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I))))))));return ka}function da(){var ka=T;var la=T;var ta=d.substr(T,7);ta.toLowerCase()===Nf?T+=7:(ta=I,0===za&&v(Of));if(ta!==I){ta=T;za++;var va=B();za--;va===I?ta=void 0:(T=ta,ta=I);ta!==I?(Ba=la,la="LEADING"):(T=la,la=I)}else T=la,la=I;la===I&&(la=T,ta=d.substr(T,8),ta.toLowerCase()===Pf?T+=8:(ta=I,0===za&&v(Qf)),ta!==I?
(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="TRAILING"):(T=la,la=I)):(T=la,la=I),la===I&&(la=T,ta=d.substr(T,4),ta.toLowerCase()===Rf?T+=4:(ta=I,0===za&&v(Sf)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="BOTH"):(T=la,la=I)):(T=la,la=I)));la===I&&(la=null);Ba=ka;ka=la;return la={type:"string",location:h(),value:null==ka?"BOTH":ka}}function aa(){var ka=T;var la=Aa();if(la===I&&(la=Ca(),la===I&&(la=Ea(),la===I&&(la=Da(),la===I&&(la=Ia(),la===
I&&(la=Ha(),la===I)))))){la=T;var ta=d.substr(T,13);ta.toLowerCase()===Tf?T+=13:(ta=I,0===za&&v(Uf));if(ta!==I){ta=T;za++;var va=B();za--;va===I?ta=void 0:(T=ta,ta=I);ta!==I?(Ba=la,la="TIMEZONE_HOUR"):(T=la,la=I)}else T=la,la=I;la===I&&(la=T,ta=d.substr(T,15),ta.toLowerCase()===Vf?T+=15:(ta=I,0===za&&v(Wf)),ta!==I?(ta=T,za++,va=B(),za--,va===I?ta=void 0:(T=ta,ta=I),ta!==I?(Ba=la,la="TIMEZONE_MINUTE"):(T=la,la=I)):(T=la,la=I))}la!==I&&(Ba=ka,ka=la,la={type:"string",location:h(),value:ka});return la}
function fa(){var ka=T;var la=T;var ta=Z();if(ta!==I){xa();var va=Ma();if(va!==I)if(xa(),va=S(),va!==I){xa();var Fa=Ka();Fa!==I?(Ba=la,la=ta,la={type:"interval-period",location:h(),period:la.value,precision:va,secondary:null}):(T=la,la=I)}else T=la,la=I;else T=la,la=I}else T=la,la=I;la===I&&(la=T,ta=Z(),ta!==I&&(Ba=la,la=ta,ta={type:"interval-period",location:h(),period:la.value,precision:null,secondary:null}),la=ta);if(la!==I)if(xa(),ta=T,va=d.substr(T,2),va.toLowerCase()===Xf?T+=2:(va=I,0===za&&
v(Yf)),va!==I?(va=T,za++,Fa=B(),za--,Fa===I?va=void 0:(T=va,va=I),va!==I?(Ba=ta,ta="TO"):(T=ta,ta=I)):(T=ta,ta=I),ta!==I){xa();ta=T;va=Z();va!==I&&(Ba=ta,ta=va,va={type:"interval-period",location:h(),period:ta.value,precision:null,secondary:null});ta=va;if(ta===I){ta=T;va=Ha();if(va!==I)if(xa(),va=Ma(),va!==I)if(xa(),va=S(),va!==I)if(xa(),Fa=Oa(),Fa!==I)if(xa(),Fa=ma(),Fa!==I){xa();var Ga=Ka();Ga!==I?(Ba=ta,ta=va,ta={type:"interval-period",location:h(),period:"second",precision:ta,secondary:Fa}):
(T=ta,ta=I)}else T=ta,ta=I;else T=ta,ta=I;else T=ta,ta=I;else T=ta,ta=I;else T=ta,ta=I;ta===I&&(ta=T,va=Ha(),va!==I?(xa(),va=Ma(),va!==I?(xa(),va=S(),va!==I?(xa(),Fa=Ka(),Fa!==I?(Ba=ta,ta=va,ta={type:"interval-period",location:h(),period:"second",precision:ta,secondary:null}):(T=ta,ta=I)):(T=ta,ta=I)):(T=ta,ta=I)):(T=ta,ta=I),ta===I&&(ta=T,va=Ha(),va!==I&&(Ba=ta,va={type:"interval-period",location:h(),period:"second",precision:null,secondary:null}),ta=va))}ta!==I?(Ba=ka,ka={type:"interval-qualifier",
location:h(),start:la,end:ta}):(T=ka,ka=I)}else T=ka,ka=I;else T=ka,ka=I;ka===I&&(ka=T,ta=Z(),ta!==I?(xa(),la=Ma(),la!==I?(xa(),la=ma(),la!==I?(xa(),va=Ka(),va!==I?(Ba=ka,ka=ta,ka={type:"interval-period",location:h(),period:ka.value,precision:la,secondary:null}):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I),ka===I&&(ka=T,ta=Z(),ta!==I&&(Ba=ka,ka=ta,ta={type:"interval-period",location:h(),period:ka.value,precision:null,secondary:null}),ka=ta,ka===I&&(ka=T,ta=Ha(),ta!==I?(xa(),la=Ma(),la!==I?(xa(),
la=S(),la!==I?(xa(),va=Oa(),va!==I?(xa(),ta=ma(),ta!==I?(xa(),va=Ka(),va!==I?(Ba=ka,ka=la,ka={type:"interval-period",location:h(),period:"second",precision:ka,secondary:ta}):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I),ka===I&&(ka=T,ta=Ha(),ta!==I?(xa(),la=Ma(),la!==I?(xa(),la=ma(),la!==I?(xa(),va=Ka(),va!==I?(Ba=ka,ka=la,ka={type:"interval-period",location:h(),period:"second",precision:ka,secondary:null}):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I)):(T=ka,ka=I),ka===I&&
(ka=T,ta=Ha(),ta!==I&&(Ba=ka,ta={type:"interval-period",location:h(),period:"second",precision:null,secondary:null}),ka=ta)))));return ka}function Z(){var ka=T;var la=Ea();la!==I&&(Ba=ka,la={type:"string",location:h(),value:"day"});ka=la;ka===I&&(ka=T,la=Da(),la!==I&&(Ba=ka,la={type:"string",location:h(),value:"hour"}),ka=la,ka===I&&(ka=T,la=Ia(),la!==I&&(Ba=ka,la={type:"string",location:h(),value:"minute"}),ka=la,ka===I&&(ka=T,la=Ca(),la!==I&&(Ba=ka,la={type:"string",location:h(),value:"month"}),
ka=la,ka===I&&(ka=T,la=Aa(),la!==I&&(Ba=ka,la={type:"string",location:h(),value:"year"}),ka=la))));return ka}function ma(){var ka=T;var la=F();la!==I&&(Ba=ka,la=parseFloat(la));return la}function S(){var ka=T;var la=F();la!==I&&(Ba=ka,la=parseFloat(la));return la}function ha(){var ka=G();ka===I&&(ka=X());return ka}function G(){var ka=T;if(39===d.charCodeAt(T)){var la=zd;T++}else la=I,0===za&&v(Ad);la===I&&(d.substr(T,2)===Bd?(la=Bd,T+=2):(la=I,0===za&&v(Zf)));if(la!==I){la=[];var ta=T;if(d.substr(T,
2)===Cc){var va=Cc;T+=2}else va=I,0===za&&v(Cd);va!==I&&(Ba=ta,va="'");ta=va;ta===I&&(ta=d.charAt(T),Dd.test(ta)?T++:(ta=I,0===za&&v(Ed)));for(;ta!==I;)la.push(ta),ta=T,d.substr(T,2)===Cc?(va=Cc,T+=2):(va=I,0===za&&v(Cd)),va!==I&&(Ba=ta,va="'"),ta=va,ta===I&&(ta=d.charAt(T),Dd.test(ta)?T++:(ta=I,0===za&&v(Ed)));39===d.charCodeAt(T)?(ta=zd,T++):(ta=I,0===za&&v(Ad));ta!==I?(Ba=ka,ka={type:"string",location:h(),value:la.join("")}):(T=ka,ka=I)}else T=ka,ka=I;return ka}function ca(){var ka=T;if(La()!==
I){xa();var la=g();if(la!==I){xa();var ta=$a();ta!==I?(xa(),ta=g(),ta!==I?(Ba=ka,ka={type:"when-clause",location:h(),operand:la,value:ta}):(T=ka,ka=I)):(T=ka,ka=I)}else T=ka,ka=I}else T=ka,ka=I;return ka}function pa(){var ka=T;if(La()!==I){xa();var la=g();if(la!==I){xa();var ta=$a();ta!==I?(xa(),ta=g(),ta!==I?(Ba=ka,ka={type:"when-clause",location:h(),operand:la,value:ta}):(T=ka,ka=I)):(T=ka,ka=I)}else T=ka,ka=I}else T=ka,ka=I;return ka}function Y(){var ka=T;var la=T;var ta=d.substr(T,4);ta.toLowerCase()===
$f?T+=4:(ta=I,0===za&&v(ag));if(ta!==I){ta=T;za++;var va=B();za--;va===I?ta=void 0:(T=ta,ta=I);ta!==I?(Ba=la,la="ELSE"):(T=la,la=I)}else T=la,la=I;la!==I?(xa(),la=g(),la!==I?(Ba=ka,ka={type:"else-clause",location:h(),value:la}):(T=ka,ka=I)):(T=ka,ka=I);return ka}function R(){var ka=F();if(ka===I){ka=T;var la=d.charAt(T);kc.test(la)?T++:(la=I,0===za&&v(lc));if(la!==I){var ta=F();ta!==I?(Ba=ka,ka=la[0]+ta):(T=ka,ka=I)}else T=ka,ka=I}return ka}function ia(){var ka=T;if(46===d.charCodeAt(T)){var la=bg;
T++}else la=I,0===za&&v(cg);la!==I?(la=F(),la===I&&(la=null),Ba=ka,ka="."+(null!=la?la:"")):(T=ka,ka=I);return ka}function A(){var ka;var la=ka=T;var ta=d.charAt(T);dg.test(ta)?T++:(ta=I,0===za&&v(eg));ta!==I?(ta=d.charAt(T),kc.test(ta)?T++:(ta=I,0===za&&v(lc)),ta===I&&(ta=null),Ba=la,la="e"+(null===ta?"":ta)):(T=la,la=I);la!==I?(ta=F(),ta!==I?(Ba=ka,ka=la+ta):(T=ka,ka=I)):(T=ka,ka=I);return ka}function F(){var ka=T;var la=[];var ta=O();if(ta!==I)for(;ta!==I;)la.push(ta),ta=O();else la=I;la!==I&&
(Ba=ka,la=la.join(""));return la}function O(){var ka=d.charAt(T);fg.test(ka)?T++:(ka=I,0===za&&v(gg));return ka}function ba(){var ka=T;var la=d.substr(T,2);la.toLowerCase()===hg?T+=2:(la=I,0===za&&v(ig));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="IN"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function na(){var ka=T;var la=d.substr(T,2);la.toLowerCase()===jg?T+=2:(la=I,0===za&&v(kg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,
ka="IS"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function P(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===lg?T+=4:(la=I,0===za&&v(mg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="LIKE"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function W(){var ka=T;var la=d.substr(T,3);la.toLowerCase()===ng?T+=3:(la=I,0===za&&v(og));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="NOT"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function ea(){var ka=
T;var la=d.substr(T,3);la.toLowerCase()===pg?T+=3:(la=I,0===za&&v(qg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="AND"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function ra(){var ka=T;var la=d.substr(T,2);la.toLowerCase()===rg?T+=2:(la=I,0===za&&v(sg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="OR"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function ja(){var ka=T;var la=d.substr(T,7);la.toLowerCase()===tg?T+=7:(la=I,0===za&&
v(ug));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="BETWEEN"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function oa(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===vg?T+=4:(la=I,0===za&&v(wg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="FROM"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function qa(){var ka=T;var la=d.substr(T,7);la.toLowerCase()===xg?T+=7:(la=I,0===za&&v(yg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:
(T=la,la=I);la!==I?(Ba=ka,ka="EXTRACT"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function sa(){var ka=T;var la=d.substr(T,9);la.toLowerCase()===zg?T+=9:(la=I,0===za&&v(Ag));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="TIMESTAMP"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function ua(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Bg?T+=4:(la=I,0===za&&v(Cg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="DATE"):(T=ka,ka=I)}else T=
ka,ka=I;return ka}function ya(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Dg?T+=4:(la=I,0===za&&v(Eg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="TIME"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function wa(){var ka=T;var la=d.substr(T,8);la.toLowerCase()===Fg?T+=8:(la=I,0===za&&v(Gg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="INTERVAL"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Aa(){var ka=T;var la=d.substr(T,
4);la.toLowerCase()===Hg?T+=4:(la=I,0===za&&v(Ig));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="YEAR"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Ca(){var ka=T;var la=d.substr(T,5);la.toLowerCase()===Jg?T+=5:(la=I,0===za&&v(Kg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="MONTH"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Ea(){var ka=T;var la=d.substr(T,3);la.toLowerCase()===Lg?T+=3:(la=I,0===za&&v(Mg));if(la!==I){la=
T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="DAY"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Da(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Ng?T+=4:(la=I,0===za&&v(Og));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="HOUR"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Ia(){var ka=T;var la=d.substr(T,6);la.toLowerCase()===Pg?T+=6:(la=I,0===za&&v(Qg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=
ka,ka="MINUTE"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Ha(){var ka=T;var la=d.substr(T,6);la.toLowerCase()===Rg?T+=6:(la=I,0===za&&v(Sg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="SECOND"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Ja(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Tg?T+=4:(la=I,0===za&&v(Ug));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="CASE"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Na(){var ka=
T;var la=d.substr(T,3);la.toLowerCase()===Vg?T+=3:(la=I,0===za&&v(Wg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="END"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function La(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Xg?T+=4:(la=I,0===za&&v(Yg));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="WHEN"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function $a(){var ka=T;var la=d.substr(T,4);la.toLowerCase()===Zg?T+=4:(la=I,0===za&&
v($g));if(la!==I){la=T;za++;var ta=B();za--;ta===I?la=void 0:(T=la,la=I);la!==I?(Ba=ka,ka="THEN"):(T=ka,ka=I)}else T=ka,ka=I;return ka}function Oa(){if(44===d.charCodeAt(T)){var ka=ah;T++}else ka=I,0===za&&v(bh);return ka}function Ma(){if(40===d.charCodeAt(T)){var ka=ch;T++}else ka=I,0===za&&v(dh);return ka}function Ka(){if(41===d.charCodeAt(T)){var ka=eh;T++}else ka=I,0===za&&v(fh);return ka}function xa(){var ka;var la=[];for(ka=hb();ka!==I;)la.push(ka),ka=hb();return la}function hb(){var ka=d.charAt(T);
gh.test(ka)?T++:(ka=I,0===za&&v(hh));return ka}function nb(ka,la,ta,va,Fa){ka={type:"binary-expression",location:Fa,operator:ka,left:la,right:ta};void 0!==va&&(ka.escape=va);return ka}function Qa(ka,...la){return{type:"expression-list",location:ka,value:la}}function mb(ka,la){for(const {op:ta,expr:va,location:{end:Fa}}of la)ka=nb(ta,ka,va,void 0,{...ka.location,end:Fa});return ka}k=void 0!==k?k:{};var I={},Hd=k.grammarSource,Fd={start:w},Gd=w,Id="!",Kd="\x3d",fd="\x3e\x3d",Pd="\x3e",gd="\x3c\x3d",
hd="\x3c\x3e",id="!\x3d",jd="||",zf="@",zd="'",Bd="N'",Cc="''",bg=".",fe="null",Zd="true",be="false",hg="in",jg="is",lg="like",Md="escape",ng="not",pg="and",rg="or",tg="between",vg="from",ue="for",re="substring",xg="extract",De="trim",Me="position",zg="timestamp",Bg="date",Dg="time",Nf="leading",Pf="trailing",Rf="both",Ue="cast",Xe="as",Bf="integer",Df="int",Ff="smallint",Hf="float",Jf="real",Lf="varchar",Xf="to",Fg="interval",Hg="year",Tf="timezone_hour",Vf="timezone_minute",Jg="month",Lg="day",
Ng="hour",Pg="minute",Rg="second",Tg="case",Vg="end",Xg="when",Zg="then",$f="else",ah=",",ch="(",eh=")",nd="`",Td=/^[<-=]/,kc=/^[+\-]/,Xd=/^[*\/]/,tf=/^[A-Za-z_\x80-\uFFFF]/,vf=/^[A-Za-z0-9_]/,xd=/^[A-Za-z0-9_.\x80-\uFFFF]/,xf=/^["]/,Dd=/^[^']/,fg=/^[0-9]/,dg=/^[eE]/,gh=/^[ \t\n\r]/,pd=/^[^`]/,Jd=m("!",!1),Ld=m("\x3d",!1),Od=m("\x3e\x3d",!1),Qd=m("\x3e",!1),Rd=m("\x3c\x3d",!1),Sd=m("\x3c\x3e",!1),Ud=t([["\x3c","\x3d"]],!1,!1),Vd=m("!\x3d",!1),lc=t(["+","-"],!1,!1),Wd=m("||",!1),Yd=t(["*","/"],!1,
!1),uf=t([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),wf=t([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),yd=t([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),yf=t(['"'],!1,!1),Af=m("@",!1),Ad=m("'",!1),Zf=m("N'",!1),Cd=m("''",!1),Ed=t(["'"],!0,!1),cg=m(".",!1),gg=t([["0","9"]],!1,!1),eg=t(["e","E"],!1,!1),ge=m("NULL",!0),$d=m("TRUE",!0),ce=m("FALSE",!0),ig=m("IN",!0),kg=m("IS",!0),mg=m("LIKE",!0),Nd=m("ESCAPE",!0),og=m("NOT",!0),qg=m("AND",!0),sg=m("OR",!0),ug=m("BETWEEN",
!0),wg=m("FROM",!0),ve=m("FOR",!0),se=m("SUBSTRING",!0),yg=m("EXTRACT",!0),Ee=m("TRIM",!0),Ne=m("POSITION",!0),Ag=m("TIMESTAMP",!0),Cg=m("DATE",!0),Eg=m("TIME",!0),Of=m("LEADING",!0),Qf=m("TRAILING",!0),Sf=m("BOTH",!0),Ve=m("CAST",!0),Ye=m("AS",!0),Cf=m("INTEGER",!0),Ef=m("INT",!0),Gf=m("SMALLINT",!0),If=m("FLOAT",!0),Kf=m("REAL",!0),Mf=m("VARCHAR",!0),Yf=m("TO",!0),Gg=m("INTERVAL",!0),Ig=m("YEAR",!0),Uf=m("TIMEZONE_HOUR",!0),Wf=m("TIMEZONE_MINUTE",!0),Kg=m("MONTH",!0),Mg=m("DAY",!0),Og=m("HOUR",
!0),Qg=m("MINUTE",!0),Sg=m("SECOND",!0),Ug=m("CASE",!0),Wg=m("END",!0),Yg=m("WHEN",!0),$g=m("THEN",!0),ag=m("ELSE",!0),bh=m(",",!1),dh=m("(",!1),fh=m(")",!1),hh=t([" ","\t","\n","\r"],!1,!1),od=m("`",!1),qd=t(["`"],!0,!1),T=k.peg$currPos|0,Ba=T,Hb=[{line:1,column:1}],ib=T,jc=k.peg$maxFailExpected||[],za=k.peg$silentFails|0;if(k.startRule){if(!(k.startRule in Fd))throw Error("Can't start parsing from rule \""+k.startRule+'".');Gd=Fd[k.startRule]}var Dc=Gd();if(k.peg$library)return{peg$result:Dc,peg$currPos:T,
peg$FAILED:I,peg$maxFailExpected:jc,peg$maxFailPos:ib};if(Dc!==I&&T===d.length)return Dc;Dc!==I&&T<d.length&&v({type:"end"});throw function(ka,la,ta){return new b(b.buildMessage(ka,la),ka,la,ta)}(jc,ib<d.length?d.charAt(ib):null,ib<d.length?r(ib,ib+1):r(ib,ib));}function e(d,k){if(null!=d)switch(k(d),d.type){case "when-clause":e(d.operand,k);e(d.value,k);break;case "case-expression":for(const h of d.clauses)e(h,k);"simple"===d.format&&e(d.operand,k);null!==d.else&&e(d.else,k);break;case "expression-list":for(const h of d.value)e(h,
k);break;case "unary-expression":e(d.expr,k);break;case "binary-expression":e(d.left,k);e(d.right,k);break;case "function":e(d.args,k);break;case "interval":e(d.value,k);e(d.qualifier,k);break;case "interval-qualifier":e(d.start,k),e(d.end,k)}}(function(d,k){function h(){this.constructor=d}h.prototype=k.prototype;d.prototype=new h})(b,Error);b.prototype.format=function(d){var k="Error: "+this.message;if(this.location){var h=null,l;for(l=0;l<d.length;l++)if(d[l].source===this.location.source){h=d[l].text.split(/\r\n|\n|\r/g);
break}d=this.location.start;l=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var m=this.location.source+":"+l.line+":"+l.column;if(h){var t=this.location.end,z=c("",l.line.toString().length," ");h=h[d.line-1];t=(d.line===t.line?t.column:h.length+1)-d.column||1;k+="\n --\x3e "+m+"\n"+z+" |\n"+l.line+" | "+h+"\n"+z+" | "+c("",d.column-1," ")+c("",t,"^")}else k+="\n at "+m}return k};b.buildMessage=function(d,k){function h(r){return r.charCodeAt(0).toString(16).toUpperCase()}
function l(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+h(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+h(v)})}function m(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+
h(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+h(v)})}function t(r){return z[r.type](r)}var z={literal:function(r){return'"'+l(r.text)+'"'},class:function(r){var v=r.parts.map(function(w){return Array.isArray(w)?m(w[0])+"-"+m(w[1]):m(w)});return"["+(r.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description}};return"Expected "+function(r){r=r.map(t);var v,w;r.sort();if(0<r.length){for(w=v=1;v<
r.length;v++)r[v-1]!==r[v]&&(r[w]=r[v],w++);r.length=w}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(d)+" but "+(k?'"'+l(k)+'"':"end of input")+" found."};class n{static parse(d){return f(d)}}a.WhereGrammar=n;a.visitAll=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(a,b){b=new b.JSONMap({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});
a.kebabDict=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(a,b,c){const f=new c,e=new c,n=new c,d={esriGeometryPoint:b.convertToPoint,esriGeometryPolyline:b.convertToPolyline,esriGeometryPolygon:b.convertToPolygon,esriGeometryMultipoint:b.convertToMultipoint},k=(h,l)=>"_geVersion"!==h?l:void 0;a.cleanFromGeometryEngine=function(h){return h&&"_geVersion"in
h?JSON.parse(JSON.stringify(h,k)):h};a.getGeometry=function(h,l,m,t,z,r,v=l,w=m){const q=l&&v,g=m&&w;t=null!=t?"coords"in t?t:t.geometry:null;if(null==t)return null;if(z)return l=b.generalizeOptimizedGeometry(e,t,l,m,h,z,v,w),r&&(l=b.quantizeOptimizedGeometry(n,l,q,g,h,r)),d[h]?.(l,q,g)??null;if(r)return r=b.quantizeOptimizedGeometry(n,t,l,m,h,r,v,w),d[h]?.(r,q,g)??null;b.removeZMValues(f,t,l,m,v,w);return d[h]?.(f,q,g)??null};a.transformCentroid=function(h,l,m,t=h.hasZ,z=h.hasM){if(null==l)return null;
const r=h.hasZ&&t,v=h.hasM&&z;return m?(h=b.quantizeOptimizedGeometry(n,l,h.hasZ,h.hasM,"esriGeometryPoint",m,t,z),b.convertToPoint(h,r,v)):b.convertToPoint(l,r,v)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(a,b,c,f,e,n,d){function k(w,q){if(!q)return null;if("x"in q){var g={x:0,y:0};[g.x,g.y]=w(q.x,q.y,m);null!=q.z&&(g.z=q.z);null!=q.m&&(g.m=q.m);return g}return"xmin"in q?(g={xmin:0,ymin:0,xmax:0,ymax:0},[g.xmin,g.ymin]=w(q.xmin,q.ymin,m),[g.xmax,g.ymax]=w(q.xmax,q.ymax,m),q.hasZ&&(g.zmin=q.zmin,g.zmax=q.zmax,g.hasZ=!0),q.hasM&&(g.mmin=q.mmin,g.mmax=q.mmax,g.hasM=!0),g):"rings"in q?{rings:h(q.rings,w),hasM:q.hasM,hasZ:q.hasZ}:"paths"in q?{paths:h(q.paths,w),hasM:q.hasM,hasZ:q.hasZ}:"points"in
q?{points:l(q.points,w),hasM:q.hasM,hasZ:q.hasZ}:null}function h(w,q){const g=[];for(const p of w)g.push(l(p,q));return g}function l(w,q){const g=[];for(const p of w)w=q(p[0],p[1],[0,0]),g.push(w),2<p.length&&w.push(p[2]),3<p.length&&w.push(p[3]);return g}const m=[0,0],t=k.bind(null,d.lngLatToXY),z=k.bind(null,d.xyToLngLat);class r{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(w,q,g,p){if(!w?.length||!q||!g||n.equals(q,g))return w;w={geometries:w,inSpatialReference:q,
outSpatialReference:g,geographicTransformation:p,resolve:c.createResolver()};this._jobs.push(w);this._timer??(this._timer=setTimeout(this._process,10));return w.resolve.promise}_process(){this._timer=null;const w=this._jobs.shift();if(w){var {geometries:q,inSpatialReference:g,outSpatialReference:p,resolve:x,geographicTransformation:u}=w;d.canProject(g,p)?n.isWebMercator(p)?x(q.map(t)):x(q.map(z)):x(f.projectMany(e.jsonAdapter,q,g,p,u,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const v=new r;a.checkProjectionSupport=async function(w,q){w&&q&&(w=Array.isArray(w)?w.map(g=>null!=g.geometry?g.geometry.spatialReference:null).filter(b.isSome):[w],await f.initializeProjection(w.map(g=>({source:g,dest:q}))))};a.project=function(w,q,g,p){if(!w)return w;g||(g=q,q=w.spatialReference);return n.isValid(q)&&n.isValid(g)&&!n.equals(q,g)?d.canProject(q,g)?(w=n.isWebMercator(g)?t(w):z(w),w.spatialReference=g,w):f.projectMany(e.jsonAdapter,[w],q,g,null,p)[0]:w};a.projectMany=function(w,
q,g,p){return v.push(w,q,g,p)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(a){class b{constructor(d,k,h){this.x=d;this.y=k;this.spatialReference=h;this.m=this.z=void 0}}class c{constructor(d,k,h,l){this.rings=d;this.spatialReference=k;this.hasM=this.hasZ=void 0;h&&(this.hasZ=h);l&&(this.hasM=l)}}class f{constructor(d,k,h,l){this.paths=d;this.spatialReference=k;this.hasM=this.hasZ=void 0;h&&(this.hasZ=
h);l&&(this.hasM=l)}}class e{constructor(d,k,h,l){this.points=d;this.spatialReference=k;this.hasM=this.hasZ=void 0;h&&(this.hasZ=h);l&&(this.hasM=l)}}class n{constructor(d,k,h,l,m){this.xmin=d;this.ymin=k;this.xmax=h;this.ymax=l;this.spatialReference=m;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}a.jsonAdapter={convertToGEGeometry:function(d,k){return null==k?null:d.convertJSONToGeometry(k)},exportPoint:function(d,k,h){h=new b(d.getPointX(k),d.getPointY(k),h);const l=d.hasZ(k),m=d.hasM(k);l&&(h.z=
d.getPointZ(k));m&&(h.m=d.getPointM(k));return h},exportPolygon:function(d,k,h){return new c(d.exportPaths(k),h,d.hasZ(k),d.hasM(k))},exportPolyline:function(d,k,h){return new f(d.exportPaths(k),h,d.hasZ(k),d.hasM(k))},exportMultipoint:function(d,k,h){return new e(d.exportPoints(k),h,d.hasZ(k),d.hasM(k))},exportExtent:function(d,k,h){var l=d.hasZ(k);const m=d.hasM(k);h=new n(d.getXMin(k),d.getYMin(k),d.getXMax(k),d.getYMax(k),h);l&&(l=d.getZExtent(k),h.zmin=l.vmin,h.zmax=l.vmax);m&&(d=d.getMExtent(k),
h.mmin=d.vmin,h.mmax=d.vmax);return h}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCache":function(){define(["exports"],function(a){class b{constructor(){this._storage=new Map;this._purgeInterval=5;this._sweep=()=>{this._timer=void 0;if(this._storage){var e=1E3*this._purgeInterval,n=performance.now()-e;for(const [d,k]of this._storage)if(k.time<n)this._storage.delete(d);else{0<this._storage.size&&(this._timer=setTimeout(this._sweep,e));break}}}}destroy(){this._storage?.clear();
this._storage=null;clearTimeout(this._timer)}get size(){return this._storage?.size??0}put(e,n){this._storage?.set(e,new f(n));this._scheduleSweep()}get(e){if(this._storage){var n=this._storage?.get(e);if(n)return this._storage?.delete(e),n.time=performance.now(),this._storage?.set(e,n),n.items}}clear(){this._storage?.clear()}_scheduleSweep(){this._storage&&(this._timer??(this._timer=setTimeout(this._sweep,1E3*this._purgeInterval)))}}let c=0;class f{constructor(e){this.items=e;this.time=performance.now();
this.id=c++}}a.QueryEngineCache=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(a){a.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,
maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z){function r(g,p,x,u){const D=u.x-x.x;u=u.y-x.y;p=Math.min(1,Math.max(0,((p.x-x.x)*D+(p.y-x.y)*u)/(D*D+u*u)));g.x=x.x+D*p;g.y=x.y+u*p}function v(g,p){return g?p?4:3:p?3:2}class w{constructor(g,p,x){this.items=g;this.query=p;this.geometryType=x.geometryType;this.hasM=x.hasM;this.hasZ=x.hasZ;this.fieldsIndex=x.fieldsIndex;this.objectIdField=x.objectIdField;this.spatialReference=x.spatialReference;this.featureAdapter=x.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const g=
new k(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:p,having:x,outStatistics:u}=this.query;if(!p?.length)return 1;const D=new Map,J=new Map,E=new Set;for(const M of u){var {statisticType:L}=M;L="exceedslimit"!==L?M.onStatisticField:void 0;if(!J.has(L)){var Q=[];for(const C of p){const U=this._getAttributeValues(g,C,D);Q.push(U)}J.set(L,this._calculateUniqueValues(Q,g.returnDistinctValues))}L=
J.get(L);for(const C in L){const {data:U,items:y}=L[C];Q=U.join(",");x&&!g.validateItems(y,x)||E.add(Q)}}return E.size}async createQueryResponse(){let g;g=this.query.outStatistics?this.query.outStatistics.some(p=>"exceedslimit"===p.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const p=this.query.geometry;d.isValid(this.query.outSR)&&!d.equals(p.spatialReference,
this.query.outSR)?g.queryGeometry=h.cleanFromGeometryEngine({spatialReference:this.query.outSR,...l.project(p,p.spatialReference,this.query.outSR)}):g.queryGeometry=h.cleanFromGeometryEngine({spatialReference:this.query.outSR,...p})}return g}createSnappingResponse(g,p){const x=this.featureAdapter,u=v(this.hasZ,this.hasM),{point:D,mode:J}=g,E="number"===typeof g.distance?g.distance:g.distance.x,L="number"===typeof g.distance?g.distance:g.distance.y,Q={candidates:[]},M="esriGeometryPolygon"===this.geometryType;
p=this._getPointCreator(J,this.spatialReference,p);const C=new q(null,0),U=new q(null,0),y={x:0,y:0,z:0};for(const da of this.items){var B=x.getGeometry(da);if(null==B)continue;const {coords:aa,lengths:fa}=B;C.coords=aa;U.coords=aa;if(g.returnEdge){B=0;for(var H=0;H<fa.length;H++){var N=fa[H];for(var K=0;K<N;K++,B+=u){var X=C;X.coordsIndex=B;if(K!==N-1){const Z=U;Z.coordsIndex=B+u;const ma=y;r(y,D,X,Z);var V=(D.x-ma.x)/E;const S=(D.y-ma.y)/L;V=V*V+S*S;1>=V&&Q.candidates.push(m.makeEdgeCandidate(x.getObjectId(da),
p(ma),Math.sqrt(V),p(X),p(Z)))}}}}if("none"!==g.vertexMode)if(B=M?aa.length-u:aa.length,"all"===g.vertexMode)for(H=0;H<B;H+=u)N=C,N.coordsIndex=H,K=(D.x-N.x)/E,X=(D.y-N.y)/L,K=K*K+X*X,1>=K&&Q.candidates.push(m.makeVertexCandidate(x.getObjectId(da),p(N),Math.sqrt(K)));else if("ends"===g.vertexMode){B=[0];M||B.push(aa.length-u);for(const Z of B)B=C,B.coordsIndex=Z,H=(D.x-B.x)/E,N=(D.y-B.y)/L,H=H*H+N*N,1>=H&&Q.candidates.push(m.makeVertexCandidate(x.getObjectId(da),p(B),Math.sqrt(H)))}}Q.candidates.sort((da,
aa)=>da.distance-aa.distance);return Q}_getPointCreator(g,p,x){const u=null==x||d.equals(p,x)?J=>J:J=>l.project(J,p,x),{hasZ:D}=this;return"3d"===g?D?({x:J,y:E,z:L})=>u({x:J,y:E,z:L}):({x:J,y:E})=>u({x:J,y:E,z:0}):({x:J,y:E})=>u({x:J,y:E})}async createSummaryStatisticsResponse(g){const {field:p,valueExpression:x,normalizationField:u,normalizationType:D,normalizationTotal:J,minValue:E,maxValue:L,scale:Q,timeZone:M,outStatisticTypes:C}=g;var U=this.fieldsIndex.get(p);g=t.isDateField(U)||t.isDateOnlyField(U)||
t.isTimestampOffsetField(U);const y=await this._getDataValues({field:p,valueExpression:x,normalizationField:u,normalizationType:D,normalizationTotal:J,scale:Q,timeZone:M}),B=z.isNullCountSupported({normalizationType:D,normalizationField:u,minValue:E,maxValue:L}),H={value:.5,fieldType:U?.type};U=t.isStringField(U)?z.calculateStringStatistics({values:y,supportsNullCount:B,percentileParams:H,outStatisticTypes:C}):z.calculateStatistics({values:y,minValue:E,maxValue:L,useSampleStdDev:!D,supportsNullCount:B,
percentileParams:H,outStatisticTypes:C});return z.processSummaryStatisticsResult(U,C,g)}async createUniqueValuesResponse(g){const {field:p,valueExpression:x,domains:u,returnAllCodedValues:D,scale:J,timeZone:E}=g;var L=await this._getDataValues({field:p,field2:g.field2,field3:g.field3,fieldDelimiter:g.fieldDelimiter,valueExpression:x,scale:J,timeZone:E},!1);L=z.calculateUniqueValuesCount(L);return z.createUVResult(L,u,D,g.fieldDelimiter)}async createClassBreaksResponse(g){const {field:p,valueExpression:x,
normalizationField:u,normalizationType:D,normalizationTotal:J,classificationMethod:E,standardDeviationInterval:L,minValue:Q,maxValue:M,numClasses:C,scale:U,timeZone:y}=g;g=await this._getDataValues({field:p,valueExpression:x,normalizationField:u,normalizationType:D,normalizationTotal:J,scale:U,timeZone:y});g=z.calculateClassBreaks(g,{field:p,normalizationField:u,normalizationType:D,normalizationTotal:J,classificationMethod:E,standardDeviationInterval:L,minValue:Q,maxValue:M,numClasses:C});return z.resolveCBResult(g,
E)}async createHistogramResponse(g){const {field:p,valueExpression:x,normalizationField:u,normalizationType:D,normalizationTotal:J,classificationMethod:E,standardDeviationInterval:L,minValue:Q,maxValue:M,numBins:C,scale:U,timeZone:y}=g;g=await this._getDataValues({field:p,valueExpression:x,normalizationField:u,normalizationType:D,normalizationTotal:J,scale:U,timeZone:y});return z.calculateHistogram(g,{field:p,normalizationField:u,normalizationType:D,normalizationTotal:J,classificationMethod:E,standardDeviationInterval:L,
minValue:Q,maxValue:M,numBins:C})}_sortFeatures(g,p,x){if(1<g.length&&p?.length)for(const u of p.reverse()){p=u.split(" ");const D=p[0],J=this.fieldsIndex.get(D);p=p[1]?"desc"===p[1].toLowerCase():!1;const E=z.getAttributeComparator(J?.type,p);g.sort((L,Q)=>{L=x(L,D,J);Q=x(Q,D,J);return E(L,Q)})}}_createFeatureQueryResponse(g){const p=this.items,{geometryType:x,hasM:u,hasZ:D,objectIdField:J,spatialReference:E}=this,{outFields:L,outSR:Q,quantizationParameters:M,resultRecordCount:C,resultOffset:U,returnZ:y,
returnM:B}=g,H=null!=C?p.length>(U||0)+C:!1,N=L&&(L.includes("*")?[...this.fieldsIndex.fields]:L.map(K=>this.fieldsIndex.get(K)));return{exceededTransferLimit:H,features:this._createFeatures(g,p),fields:N,geometryType:x,hasM:u&&B,hasZ:D&&y,objectIdFieldName:J,spatialReference:h.cleanFromGeometryEngine(Q||E),transform:M&&n.toQuantizationTransform(M)||null}}_createFeatures(g,p){const x=new k(g,this.featureAdapter,this.fieldsIndex),{hasM:u,hasZ:D}=this,{orderByFields:J,quantizationParameters:E,returnGeometry:L,
returnCentroid:Q,maxAllowableOffset:M,resultOffset:C,resultRecordCount:U,returnZ:y=!1,returnM:B=!1}=g,H=D&&y,N=u&&B;g=[];var K=0;const X=[...p];this._sortFeatures(X,J,(Z,ma,S)=>x.getFieldValue(Z,ma,S));if(this.geometryType&&(L||Q)){var V=n.toQuantizationTransform(E)??void 0;p="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(L&&!Q)for(var da of X){var aa=this.featureAdapter.getGeometry(da),fa={attributes:x.getAttributes(da),geometry:h.getGeometry(this.geometryType,
this.hasZ,this.hasM,aa,M,V,H,N)};p&&aa&&!fa.geometry&&(fa.centroid=h.transformCentroid(this,this.featureAdapter.getCentroid(da,this),V));g[K++]=fa}else if(!L&&Q)for(aa of X)g[K++]={attributes:x.getAttributes(aa),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(aa,this),V)};else for(fa of X)g[K++]={attributes:x.getAttributes(fa),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(fa,this),V),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(fa),
M,V,H,N)}}else for(V of X)(da=x.getAttributes(V))&&(g[K++]={attributes:da});K=C||0;null!=U&&(g=g.slice(K,Math.min(g.length,K+U)));return g}_createExceedsLimitQueryResponse(g){var p=!1;let x=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;p=Number.POSITIVE_INFINITY;for(const D of g.outStatistics??[])if("exceedslimit"===D.statisticType){x=null!=D.maxPointCount?D.maxPointCount:Number.POSITIVE_INFINITY;u=null!=D.maxRecordCount?D.maxRecordCount:Number.POSITIVE_INFINITY;p=null!=D.maxVertexCount?D.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)p=this.items.length>x;else if(this.items.length>u)p=!0;else{g=v(this.hasZ,this.hasM);const D=this.featureAdapter;p=this.items.reduce((J,E)=>{E=D.getGeometry(E);return J+(null!=E&&E.coords.length||0)},0)/g>p}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(p)}}]}}async _createStatisticsQueryResponse(g){var p=
{attributes:{}};const x=[],u=new Map,D=new Map,J=new Map,E=new Map,L=new k(g,this.featureAdapter,this.fieldsIndex);var Q=g.outStatistics;const {groupByFieldsForStatistics:M,having:C,orderByFields:U,resultRecordCount:y}=g;g=M?.length;const B=!!g,H=B?M[0]:null,N=B&&!this.fieldsIndex.get(H);for(const aa of Q??[]){const {outStatisticFieldName:fa,statisticType:Z}=aa;Q=aa;const ma="exceedslimit"!==Z?aa.onStatisticField:void 0,S="percentile_disc"===Z||"percentile_cont"===Z;var K="EnvelopeAggregate"===Z||
"CentroidAggregate"===Z||"ConvexHullAggregate"===Z;const ha=B&&1===g&&(ma===H||N)&&"count"===Z;if(B){if(!J.has(ma)){var X=[];for(const G of M){var V=this._getAttributeValues(L,G,u);X.push(V)}J.set(ma,this._calculateUniqueValues(X,K?!1:L.returnDistinctValues))}X=J.get(ma);if(!X)continue;V=Object.keys(X);for(const G of V){const {count:ca,data:pa,items:Y,itemPositions:R}=X[G];V=pa.join(",");if(!C||L.validateItems(Y,C)){const ia=E.get(V)||{attributes:{}};if(K){ia.aggregateGeometries||(ia.aggregateGeometries=
{});const {aggregateGeometries:F,outStatisticFieldName:O}=await this._getAggregateGeometry(Q,Y);ia.aggregateGeometries[O]=F}else{var da=null;if(ha)da=ca;else{const F=this._getAttributeValues(L,ma,u);da=R.map(O=>F[O]);da=S&&"statisticParameters"in Q?this._getPercentileValue(Q,da):this._getStatisticValue(Q,da,null,L.returnDistinctValues)}ia.attributes[fa]=da}let A=0;M.forEach((F,O)=>ia.attributes[this.fieldsIndex.get(F)?F:`EXPR_${++A}`]=pa[O]);E.set(V,ia)}}}else if(K){p.aggregateGeometries||(p.aggregateGeometries=
{});const {aggregateGeometries:G,outStatisticFieldName:ca}=await this._getAggregateGeometry(Q,this.items);p.aggregateGeometries[ca]=G}else K=this._getAttributeValues(L,ma,u),p.attributes[fa]=S&&"statisticParameters"in Q?this._getPercentileValue(Q,K):this._getStatisticValue(Q,K,D,L.returnDistinctValues);Q="min"!==Z&&"max"!==Z||!t.isStringField(this.fieldsIndex.get(ma))&&!this._isAnyDateField(ma)?null:this.fieldsIndex.get(ma)?.type;x.push({name:fa,alias:fa,type:Q||"esriFieldTypeDouble"})}p=B?Array.from(E.values()):
[p];this._sortFeatures(p,U,(aa,fa)=>aa.attributes[fa]);y&&(p.length=Math.min(y,p.length));return{fields:x,features:p}}_isAnyDateField(g){g=this.fieldsIndex.get(g);return t.isDateField(g)||t.isDateOnlyField(g)||t.isTimestampOffsetField(g)||t.isTimeOnlyField(g)}async _getAggregateGeometry(g,p){const {convexHull:x,union:u}=await new Promise((y,B)=>a(["../../../geometry/geometryEngineJSON"],y,B)),{statisticType:D,outStatisticFieldName:J}=g,{featureAdapter:E,spatialReference:L,geometryType:Q,hasZ:M,hasM:C}=
this;p=p.map(y=>h.getGeometry(Q,M,C,E.getGeometry(y)));const U=x(L,p,!0)[0];g={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===D?(p=U?e.getPolygonExtent(U):e.getGeometryExtent(u(L,p)),g.aggregateGeometries={...p,spatialReference:L},g.outStatisticFieldName=J||"extent"):"CentroidAggregate"===D?(p=U?f.polygonCentroid(U):f.extentCentroid(e.getGeometryExtent(u(L,p))),g.aggregateGeometries={x:p[0],y:p[1],spatialReference:L},g.outStatisticFieldName=J||"centroid"):"ConvexHullAggregate"===
D&&(g.aggregateGeometries=U,g.outStatisticFieldName=J||"convexHull");return g}_getStatisticValue(g,p,x,u){const {onStatisticField:D,statisticType:J}=g;g=null;g=x?.has(D)?x.get(D):t.isStringField(this.fieldsIndex.get(D))||this._isAnyDateField(D)?z.calculateStringStatistics({values:p,returnDistinct:u}):z.calculateStatistics({values:u?[...(new Set(p))]:p,minValue:null,maxValue:null,useSampleStdDev:!0});x&&x.set(D,g);return g["var"===J?"variance":J]}_getPercentileValue(g,p){const {onStatisticField:x,
statisticParameters:u,statisticType:D}=g,{value:J,orderBy:E}=u;g=this.fieldsIndex.get(x);return z.calculatePercentile(p,{value:J,orderBy:E,fieldType:g?.type,isDiscrete:"percentile_disc"===D})}_getAttributeValues(g,p,x){if(x.has(p))return x.get(p);const u=this.fieldsIndex.get(p),D=this.items.map(J=>g.getFieldValue(J,p,u));x.set(p,D);return D}_calculateUniqueValues(g,p){const x={},u=this.items,D=u.length;for(let J=0;J<D;J++){const E=u[J],L=[];for(const M of g)L.push(M[J]);const Q=L.join(",");null==
x[Q]?x[Q]={count:1,data:L,items:[E],itemPositions:[J]}:(p||x[Q].count++,x[Q].items.push(E),x[Q].itemPositions.push(J))}return x}async _getDataValues(g,p=!0){const x=new k(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:u,scale:D,timeZone:J}=g;return u?x.getExpressionValues(this.items,u,{viewingMode:"map",scale:D,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},J):x.getDataValues(this.items,c.clone(g),p)}}class q{constructor(g,
p){this.coords=g;this.coordsIndex=p}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}b.QueryEngineResult=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(a,b){function c(y){if("lowerLeft"===y.originPosition&&4===y.scale.length&&4===y.translate.length)return y;const {originPosition:B,scale:H,translate:N}=
y;y=H[1]??1;return{originPosition:"lowerLeft",scale:[H[0]??1,"lowerLeft"===B?y:-y,H[2]??1,H[3]??1],translate:[N[0]??0,N[1]??0,N[2]??0,N[3]??0]}}function f({scale:y,translate:B},H){return Math.round((H-B[0])/y[0])}function e({scale:y,translate:B},H){return Math.round((H-B[1])/y[1])}function n({scale:y,translate:B},H){return Math.round(((H??0)-B[2])/y[2])}function d({scale:y,translate:B},H){return H?Math.round((H-B[3])/y[3]):0}function k(y,B){return y&&B?L:y&&!B?J:!y&&B?E:D}function h({scale:y,translate:B},
H){return H*y[0]+B[0]}function l({scale:y,translate:B},H){return H*y[1]+B[1]}function m({scale:y,translate:B},H){return(H??0)*y[2]+B[2]}function t({scale:y,translate:B},H){return H?H*y[3]+B[3]:0}function z(y,B){return y&&B?U:y&&!B?M:!y&&B?C:Q}function r(y,B,H){const N=Array(H.length);for(let K=0;K<H.length;K++)N[K]=B(y,H[K]);return N}function v(y,B,H){let [N,K]=H[0],X=Math.min(N,B[0]),V=Math.min(K,B[1]),da=Math.max(N,B[2]);B=Math.max(K,B[3]);for(let aa=1;aa<H.length;aa++){const [fa,Z]=H[aa];N+=fa;
K+=Z;0>fa&&(X=Math.min(X,N));0<fa&&(da=Math.max(da,N));0>Z?V=Math.min(V,K):0<Z&&(B=Math.max(B,K))}y[0]=X;y[1]=V;y[2]=da;y[3]=B;return y}function w(y,B){if(!B.length)return null;y[0]=y[1]=Number.POSITIVE_INFINITY;y[2]=y[3]=Number.NEGATIVE_INFINITY;for(let H=0;H<B.length;H++)v(y,y,B[H]);return y}function q(y,B,H){y=c(y);B.xmin=f(y,H.xmin);B.ymin=e(y,H.ymin);B.xmax=f(y,H.xmax);B.ymax=e(y,H.ymax);H.hasZ&&(B.zmin=n(y,H.zmin),B.zmax=n(y,H.zmax));H.hasM&&(B.mmin=d(y,H.mmin),B.mmax=d(y,H.mmax));B.hasZ=H.hasZ??
!1;B.hasM=H.hasM??!1;return B}function g(y,B,H){y=c(y);B.points=k(H.hasZ,H.hasM)(y,H.points)??[];B.hasZ=H.hasZ??!1;B.hasM=H.hasM??!1;return B}function p(y,B,H){y=c(y);B.x=f(y,H.x);B.y=e(y,H.y);null!=H.z&&(B.z=n(y,H.z));null!=H.m&&(B.m=d(y,H.m));return B}function x(y,B,H){{y=c(y);var N=H.rings;const K=[],X=k(H.hasZ,H.hasM);for(let V=0;V<N.length;V++){const da=X(y,N[V]);da&&3<=da.length&&K.push(da)}y=K.length?K:null}if(!y)return null;B.rings=y;B.hasZ=H.hasZ??!1;B.hasM=H.hasM??!1;return B}function u(y,
B,H){{y=c(y);var N=H.paths;const K=[],X=k(H.hasZ,H.hasM);for(let V=0;V<N.length;V++){const da=X(y,N[V]);da&&2<=da.length&&K.push(da)}y=K.length?K:null}if(!y)return null;B.paths=y;B.hasZ=H.hasZ??!1;B.hasM=H.hasM??!1;return B}const D=(y,B)=>{const H=[];if(!B.length)return null;var N=B[0];let K=f(y,N[0]);N=e(y,N[1]);H.push([K,N]);for(let X=1;X<B.length;X++){const [V,da]=B[X],aa=f(y,V),fa=e(y,da);aa===K&&fa===N||H.push([aa-K,fa-N]);K=aa;N=fa}return H},J=(y,B)=>{const H=[];if(!B.length)return null;var N=
B[0];let K=f(y,N[0]),X=e(y,N[1]);N=n(y,N[2]);H.push([K,X,N]);for(let V=1;V<B.length;V++){const [da,aa,fa]=B[V],Z=f(y,da),ma=e(y,aa),S=n(y,fa);Z===K&&ma===X&&S===N||H.push([Z-K,ma-X,S]);K=Z;X=ma;N=S}return H},E=(y,B)=>{const H=[];if(!B.length)return null;var N=B[0];let K=f(y,N[0]),X=e(y,N[1]);N=d(y,N[2]);H.push([K,X,N]);for(let V=1;V<B.length;V++){const [da,aa,fa]=B[V],Z=f(y,da),ma=e(y,aa),S=d(y,fa);Z===K&&ma===X&&S===N||H.push([Z-K,ma-X,S]);K=Z;X=ma;N=S}return H},L=(y,B)=>{const H=[];if(!B.length)return null;
var N=B[0];let K=f(y,N[0]),X=e(y,N[1]),V=n(y,N[2]);N=d(y,N[3]);H.push([K,X,V,N]);for(let da=1;da<B.length;da++){const [aa,fa,Z,ma]=B[da],S=f(y,aa),ha=e(y,fa),G=n(y,Z),ca=d(y,ma);S===K&&ha===X&&G===V&&ca===N||H.push([S-K,ha-X,G,ca]);K=S;X=ha;V=G;N=ca}return H},Q=(y,B)=>{const H=Array(B.length);if(!B.length)return H;var N=B[0];let K=h(y,N[0]);N=l(y,N[1]);H[0]=[K,N];const {scale:X,originPosition:V}=y;y=X[0];const da="lowerLeft"===V?X[1]:-X[1];for(let aa=1;aa<B.length;aa++){const [fa,Z]=B[aa];K+=y*fa;
N+=da*Z;H[aa]=[K,N]}return H},M=(y,B)=>{const H=Array(B.length);if(!B.length)return H;var N=B[0];let K=h(y,N[0]),X=l(y,N[1]);H[0]=[K,X,m(y,N[2])];const {scale:V,originPosition:da}=y;N=V[0];const aa="lowerLeft"===da?V[1]:-V[1];for(let fa=1;fa<B.length;fa++){const [Z,ma,S]=B[fa];K+=N*Z;X+=aa*ma;H[fa]=[K,X,m(y,S)]}return H},C=(y,B)=>{const H=Array(B.length);if(!B.length)return H;var N=B[0];let K=h(y,N[0]),X=l(y,N[1]);H[0]=[K,X,t(y,N[2])];const {scale:V,originPosition:da}=y;N=V[0];const aa="lowerLeft"===
da?V[1]:-V[1];for(let fa=1;fa<B.length;fa++){const [Z,ma,S]=B[fa];K+=N*Z;X+=aa*ma;H[fa]=[K,X,t(y,S)]}return H},U=(y,B)=>{const H=Array(B.length);if(!B.length)return H;var N=B[0];let K=h(y,N[0]),X=l(y,N[1]);H[0]=[K,X,m(y,N[2]),t(y,N[3])];const {scale:V,originPosition:da}=y;N=V[0];const aa="lowerLeft"===da?V[1]:-V[1];for(let fa=1;fa<B.length;fa++){const [Z,ma,S,ha]=B[fa];K+=N*Z;X+=aa*ma;H[fa]=[K,X,m(y,S),t(y,ha)]}return H};a.getQuantizedBoundsCoordsArray=v;a.getQuantizedBoundsCoordsArrayArray=w;a.getQuantizedBoundsPaths=
function(y){return w([0,0,0,0],y)};a.getQuantizedBoundsPoints=function(y){const B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return v(B,B,y)};a.getQuantizedBoundsRings=function(y){return w([0,0,0,0],y)};a.normalizeTransform=c;a.quantizeBounds=function(y,B,H){y=c(y);B[0]=f(y,H[0]);B[3]=e(y,H[1]);B[2]=f(y,H[2]);B[1]=e(y,H[3]);return B};a.quantizeCoordsArrayXY=D;a.quantizeCoordsArrayXYM=E;a.quantizeCoordsArrayXYZ=J;a.quantizeCoordsArrayXYZM=
L;a.quantizeExtent=q;a.quantizeGeometry=function(y,B){return y&&B?b.isPoint(B)?p(y,{},B):b.isPolyline(B)?u(y,{},B):b.isPolygon(B)?x(y,{},B):b.isMultipoint(B)?g(y,{},B):b.isExtent(B)?q(y,{},B):null:null};a.quantizeM=d;a.quantizeMultipoint=g;a.quantizePoint=p;a.quantizePolygon=x;a.quantizePolyline=u;a.quantizeX=f;a.quantizeY=e;a.quantizeZ=n;a.toQuantizationTransform=function(y){return y?{originPosition:"upper-left"===y.originPosition?"upperLeft":"lower-left"===y.originPosition?"lowerLeft":y.originPosition,
scale:y.tolerance?[y.tolerance,y.tolerance,1,1]:[1,1,1,1],translate:null!=y.extent?[y.extent.xmin,y.extent.ymax,y.extent.zmin??0,y.extent.mmin??0]:[0,0,0,0]}:null};a.unquantizeBounds=function(y,B,H){y=c(y);return H?(B[0]=h(y,H[0]),B[1]=l(y,H[3]),B[2]=h(y,H[2]),B[3]=l(y,H[1]),B):[h(y,B[0]),l(y,B[3]),h(y,B[2]),l(y,B[1])]};a.unquantizeCoordsArrayArray=r;a.unquantizeCoordsArrayXY=Q;a.unquantizeCoordsArrayXYM=C;a.unquantizeCoordsArrayXYZ=M;a.unquantizeCoordsArrayXYZM=U;a.unquantizeExtent=function(y,B,
H,N=H.hasZ??!1,K=H.hasM??!1){y=c(y);B.xmin=h(y,H.xmin);B.xmax=h(y,H.xmax);B.ymin=l(y,H.ymin);B.ymax=l(y,H.ymax);N&&(B.zmin=m(y,H.zmin),B.zmax=m(y,H.zmax));K&&(B.mmin=t(y,H.mmin),B.mmax=t(y,H.mmax));B.hasZ=N;B.hasM=K;return B};a.unquantizeM=t;a.unquantizeMultipoint=function(y,B,H,N=H?.hasZ??!1,K=H?.hasM??!1){null!=H&&(y=c(y),B.points=z(N,K)(y,H.points),B.hasZ=N,B.hasM=K);return B};a.unquantizePoint=function(y,B,H,N=null!=H?.z,K=null!=H?.m){if(null==H)return B;y=c(y);B.x=h(y,H.x);B.y=l(y,H.y);N&&(B.z=
m(y,H.z));K&&(B.m=t(y,H.m));return B};a.unquantizePolygon=function(y,B,H,N=H?.hasZ??!1,K=H?.hasM??!1){null!=H&&(y=c(y),B.rings=r(y,z(N,K),H.rings),B.hasZ=N,B.hasM=K);return B};a.unquantizePolyline=function(y,B,H,N=H?.hasZ??!1,K=H?.hasM??!1){null!=H&&(y=c(y),B.paths=r(y,z(N,K),H.paths),B.hasZ=N,B.hasM=K);return B};a.unquantizeX=h;a.unquantizeY=l;a.unquantizeZ=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(a,b,c,f,e,n){class d{constructor(k,h,l){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=k.returnDistinctValues??!1;this.fieldsIndex=l;this.featureAdapter=h;if((h=k.outFields)&&!h.includes("*")){this.outFields=h;k=0;for(const t of h){var m=a.getExpressionFromFieldName(t);m=(h=this.fieldsIndex.get(m))?null:a.getWhereClause(m,l);h=h?h.name:a.getAliasFromFieldName(t)||`FIELD_EXP_${k++}`;this._fieldDataCache.set(t,{alias:h,clause:m})}}}countDistinctValues(k){if(!this.returnDistinctValues)return k.length;
k.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size}getAttributes(k){k=this._processAttributesForOutFields(k);return this._processAttributesForDistinctValues(k)}getFieldValue(k,h,l){const m=l?l.name:h;let t=null;this._fieldDataCache.has(m)?t=this._fieldDataCache.get(m)?.clause:l||(t=a.getWhereClause(h,this.fieldsIndex),this._fieldDataCache.set(m,{alias:m,clause:t}));return l?this.featureAdapter.getAttribute(k,m):t?.calculateValue(k,this.featureAdapter)}getDataValues(k,h,l=!0){const m=
h.normalizationType,t=h.normalizationTotal,z=this.fieldsIndex.get(h.field),r=c.isDateOnlyField(z)||c.isTimestampOffsetField(z),v=c.isTimeOnlyField(z);return k.map(w=>{let q=h.field&&this.getFieldValue(w,h.field,this.fieldsIndex.get(h.field));h.field2?(q=`${e.processNullValue(q)}${h.fieldDelimiter}${e.processNullValue(this.getFieldValue(w,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(q=`${q}${h.fieldDelimiter}${e.processNullValue(this.getFieldValue(w,h.field3,this.fieldsIndex.get(h.field3)))}`)):
"string"===typeof q&&l&&(r?q=q?(new Date(q)).getTime():null:v&&(q=q?f.timeOnlyToMilliseconds(q):null));m&&Number.isFinite(q)&&(w="field"===m&&h.normalizationField?this.getFieldValue(w,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,q=e.getNormalizedValue(q,m,w,t));return q})}async getExpressionValues(k,h,l,m,t){const {arcadeUtils:z}=await n.loadArcade(),r=z.hasGeometryOperations(h);r&&await z.enableGeometryOperations();const v=z.createFunction(h),w=z.getViewInfo(l),q={fields:this.fieldsIndex.fields};
return k.map(g=>{g={attributes:this.featureAdapter.getAttributes(g),layer:q,geometry:r?{...b.getGeometry(m.geometryType,m.hasZ,m.hasM,this.featureAdapter.getGeometry(g)),spatialReference:l?.spatialReference}:null};g=z.createExecContext(g,w,t);return z.executeFunction(v,g)})}validateItem(k,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:a.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(k,this.featureAdapter)??!1}validateItems(k,
h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:a.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testSet(k,this.featureAdapter)??!1}_processAttributesForOutFields(k){const h=this.outFields;if(!h?.length)return this.featureAdapter.getAttributes(k);const l={};for(const m of h){const {alias:t,clause:z}=this._fieldDataCache.get(m);l[t]=z?z.calculateValue(k,this.featureAdapter):this.featureAdapter.getAttribute(k,t)}return l}_processAttributesForDistinctValues(k){if(null==
k||!this.returnDistinctValues)return k;var h=this.outFields,l=[];if(h)for(const t of h){var {alias:m}=this._fieldDataCache.get(t);l.push(k[m])}else for(m in k)l.push(k[m]);h=`${(h||["*"]).join(",")}=${l.join(",")}`;l=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++l);return 1<l?null:k}}return d})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r){function v(u){u=x.exec(u);if(!u)return null;const {hh:D,mm:J,ss:E,ms:L}=u.groups;return Number(D)*e.millisecondsPerTimeUnit.hours+Number(J)*e.millisecondsPerTimeUnit.minutes+Number(E)*e.millisecondsPerTimeUnit.seconds+Number(L||0)}function w(u,D){u=null!=u?u:"";null!=D&&D&&(u=u?"("+u+") AND ("+D+")":D);return u}function q(u){const D=u.layer;return u.fields.filter(J=>!D.getField(J))}function g(u){const D=u.layer;return u.fields.filter(J=>{J=D.getFieldUsageInfo(J);
return!J||!J.supportsStatistics})}let p=null;const x=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;a.calculateHeatmapStats=function(u,D=18,J,E,L){const Q=new Float64Array(E*L);D=Math.round(f.pt2px(D));let M=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY;J=l.createValueFunction(J);for(const {geometry:B,attributes:H}of u){const {x:N,y:K}=B;u=Math.max(0,N-D);var U=Math.max(0,K-D);const X=Math.min(L,K+D),V=Math.min(E,N+D),da=+J(H);for(;U<X;U++)for(let aa=
u;aa<V;aa++){var y=U*E+aa;const fa=l.evaluateDensityKernel(aa-N,U-K,D)*da;y=Q[y]+=fa;M=Math.min(M,y);C=Math.max(C,y)}}return{min:M,max:C}};a.getDataValues=async function(u,D,J=!0){if(!D)return[];const {field:E,field2:L,field3:Q,fieldDelimiter:M,fieldInfos:C,timeZone:U}=u;var y=E&&C?.find(ma=>ma.name.toLowerCase()===E.toLowerCase());const B=y?h.isTimeOnlyField(y):!1,H=y?m.isAnyDateField(y):!1,N=u.valueExpression,K=u.normalizationType,X=u.normalizationField,V=u.normalizationTotal,da=[];y=u.viewInfoParams;
let aa=null,fa=null;if(N){if(!p){const {arcadeUtils:ma}=await z.loadArcade();p=ma}p.hasGeometryOperations(N)&&await p.enableGeometryOperations();aa=p.createFunction(N);fa=y?p.getViewInfo({viewingMode:y.viewingMode,scale:y.scale,spatialReference:new n(y.spatialReference)}):null}u=u.fieldInfos;const Z=D[0]&&"declaredClass"in D[0]&&"esri.Graphic"===D[0].declaredClass||!u?null:{fields:u};D.forEach(ma=>{var S=ma.attributes;if(N){var ha=p.createExecContext(Z?{...ma,layer:Z}:ma,fa,U);ha=p.executeFunction(aa,
ha)}else S&&(ha=S[E],L?(ha=`${t.processNullValue(ha)}${M}${t.processNullValue(S[L])}`,Q&&(ha=`${ha}${M}${t.processNullValue(S[Q])}`)):"string"===typeof ha&&J&&(H?ha=ha?(new Date(ha)).getTime():null:B&&(ha=ha?v(ha):null)));K&&"number"===typeof ha&&isFinite(ha)&&(S=S&&parseFloat(S[X]),ha=t.getNormalizedValue(ha,K,S,V));da.push(ha)});return da};a.getRangeExpr=function(u,D,J){D=null!=D?u+" \x3e\x3d "+D:"";u=null!=J?u+" \x3c\x3d "+J:"";J="";return(J=D&&u?w(D,u):D||u)?"("+J+")":""};a.getSQLFilterForNormalization=
function(u){const D=u.field,J=u.normalizationType;u=u.normalizationField;let E;if("field"===J)E="(NOT "+u+" \x3d 0)";else if("log"===J||"natural-log"===J||"square-root"===J)E=`(${D} > 0)`;return E};a.getSumOfAttributesExpr=function(u,D,J){const E=[],L=[],Q=[],M=[],C=[];u.forEach((y,B)=>{const H=y.field?"field":"expression",N=y.field||y.valueExpression;y.field?(C.push(N),L.push(`var ${H}${B} = Number($feature["${N}"]);`)):(E.push(`function getValueForExpr${B}() {\n  ${N} \n}`),L.push(`var ${H}${B} = Number(getValueForExpr${B}());`));
J||Q.push(`${H}${B} = IIf(${H}${B} < 0, 0, ${H}${B});`);M.push(`${H}${B}`)});u=E.length?null:C.reduce((y,B)=>`${y} + ${B}`);let U=null;D||J?D?J||u&&(U=`(( ${u} ) >= 0)`):u&&(U=`(( ${u} ) <> 0)`):u&&(U=`(( ${u} ) > 0)`);return{valueExpression:[E.length?E.join("\n"):"",L.join("\n"),Q.join("\n"),`var total = ${M.join(" + ")};`,"return total;"].filter(Boolean).join("\n\n"),sqlExpression:u,sqlWhere:U}};a.mergeWhereClauses=w;a.quantizeFeatures=function(u,D,J,E){const L=k.isWrappable(J)?k.getInfo(J):null,
Q=L?Math.round((L.valid[1]-L.valid[0])/D.scale[0]):null;return u.map(M=>{const C=new r(M.geometry);d.quantizePoint(D,C,C);if(L){var U=Q??0,y=E[0];0>C.x?C.x+=U:C.x>y&&(C.x-=U)}M.geometry=C;return M})};a.timeOnlyToMilliseconds=v;a.verifyBasicFieldValidity=function(u,D,J){const E=q({layer:u,fields:D});if(E.length)return new c(J,"Unknown fields: "+E.join(", ")+". You can only use fields defined in the layer schema");u=g({layer:u,fields:D});if(u.length)return new c(J,"Unsupported fields: "+u.join(", ")+
". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};a.verifyFieldType=function(u,D,J,E){let L;D?D.name!==u.objectIdField&&E.includes(D.type)||(L=new c(J,"'field' should be one of these types: "+E.join(","))):L=new c(J,"'field' is not defined in the layer schema");return L};a.verifyFilterValidity=function(u,D){if(u&&"intersects"!==u.spatialRelationship)return new c(D,"Only 'intersects' spatialRelationship is supported for featureFilter")};a.verifyNumericField=
function(u,D,J){let E;D?D.name!==u.objectIdField&&h.isNumericField(D)||(E=new c(J,"'field' should be one of these numeric types: "+h.numericTypes.join(","))):E=new c(J,"'field' is not defined in the layer schema");return E};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(a){function b(e){return e?72*e/96:0}function c(e=0,n=0){return{x:e,y:n}}const f=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.castRenderScreenPointArray=function(e){return e};
a.castRenderScreenPointArray3=function(e){return e};a.castScreenPointArray=function(e){return e};a.cloneScreenPoint=function(e){return e?c(e.x,e.y):null};a.createRenderScreenPoint=function(e=0,n=0){return{x:e,y:n}};a.createRenderScreenPointArray=function(e=0,n=0){return[e,n]};a.createRenderScreenPointArray3=function(e=0,n=0,d=0){return[e,n,d]};a.createScreenPoint=c;a.createScreenPointArray=function(e=0,n=0){return[e,n]};a.pt2px=function(e){return e?e/72*96:0};a.px2pt=b;a.screenPointArrayToObject=
function(e,n){return n?(n.x=e[0],n.y=e[1],n):{x:e[0],y:e[1]}};a.screenPointObjectToArray=function(e,n){return n?(n[0]=e.x,n[1]=e.y,2<n.length&&(n[2]=0),n):[e.x,e.y]};a.toPt=function(e){if("string"===typeof e){var n=e.match(f);if(n){var d=Number(n[1]);n=n[3]&&n[3].toLowerCase();e="-"===e.charAt(0);d="px"===n?b(d):d;return e?-d:d}console.warn("screenUtils.toPt: input not recognized!");return null}return e};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports",
"../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(a,b,c,f){function e(k,h,l){return 0===k?0:k*d[h]/d[l]}function n(k){switch(k){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const d={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,
centuries:31536E8};a.convertTime=e;a.isValidDate=function(k){return k instanceof Date&&!isNaN(k.getTime())};a.makeUTCTime=function(k,h,l="milliseconds"){h=new Date(e(h,l,"milliseconds"));h.setUTCFullYear(k.getUTCFullYear(),k.getUTCMonth(),k.getUTCDate());return h};a.mergeTimeExtents=function(k,h){return k&&h?k.intersection(h):k||h};a.millisecondsPerTimeUnit=d;a.offsetDate=function(k,h,l,m=c.system){m=new f.IANAZone(b.resolveTimeZone(m));k=f.DateTime.fromJSDate(k,{zone:m});m="decades"===l||"centuries"===
l?"year":n(l);"decades"===l&&(h*=10);"centuries"===l&&(h*=100);return k.plus({[m]:h}).toJSDate()};a.offsetDateUTC=function(k,h,l="milliseconds"){k=k.getTime();h=e(h,l,"milliseconds");return new Date(k+h)};a.resetUTCDate=function(k,h){k=new Date(k.getTime());k.setUTCFullYear(h.getFullYear(),h.getMonth(),h.getDate());return k};a.timeSinceUTCMidnight=function(k,h="milliseconds"){const l=e(k.getUTCHours(),"hours","milliseconds"),m=e(k.getUTCMinutes(),"minutes","milliseconds"),t=e(k.getUTCSeconds(),"seconds",
"milliseconds");k=k.getUTCMilliseconds();return e(l+m+t+k,"milliseconds",h)};a.truncateDate=function(k,h,l=c.system){l=new f.IANAZone(b.resolveTimeZone(l));k=f.DateTime.fromJSDate(k,{zone:l});if("decades"===h||"centuries"===h)return k=k.startOf("year"),{year:l}=k,k.set({year:l-l%("decades"===h?10:100)}).toJSDate();h=n(h);return k.startOf(h).toJSDate()};a.truncateLocalTime=function(k){const h=new Date(0);h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0);h.setFullYear(k.getUTCFullYear(),
k.getUTCMonth(),k.getUTCDate());return h};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(a,b,c,f,e){function n(d,k,h,l){let {color:m,ratio:t}=k,{color:z,ratio:r}=h;r===t&&(1===r?t-=1E-6:r+=1E-6);k=b.clamp((l-t)/(r-t),0,1);f.lerp(d,m.toArray(),z.toArray(),k)}a.createValueFunction=function(d){return"function"===
typeof d?d:d?k=>+k[d]:()=>1};a.evaluateDensityKernel=function(d,k,h){d=Math.sqrt(d**2+k**2)/h;return 1<d?0:3/(Math.PI*h**2)*(1-d**2)**2};a.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(d){return c.px2pt(2.4*d)};a.generateGradient=function(d){const k=new Uint8ClampedArray(2048);d=d.filter(({ratio:z})=>0<=z&&1>=z).sort((z,r)=>z.ratio-r.ratio).map(({color:z,ratio:r})=>({color:z,ratio:Math.max(r,.001)}));if(1>d.length)return k;let h=d[0],l=d[0],m=1;const t=e.create();for(let z=0;512>z;z++){const r=
(z+.5)/512;for(;r>l.ratio&&m<d.length;)h=l,l=d[m++];n(t,h,l,r);k.set(t,4*z)}return k};a.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(d){return c.pt2px(d)/2.4};a.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(a,b,c,f,e,n){function d(r){return String(r).padStart(2,
"0")}function k(r,v,w){if("date"===v||"number"===v){"number"===v&&(r=new Date(r));v=w?r.getFullYear():r.getUTCFullYear();const q=d((w?r.getMonth():r.getUTCMonth())+1),g=d(w?r.getDate():r.getUTCDate()),p=d(w?r.getHours():r.getUTCHours()),x=d(w?r.getMinutes():r.getUTCMinutes());r=d(w?r.getSeconds():r.getUTCSeconds());r=`TIMESTAMP'${v}-${q}-${g} ${p}:${x}:${r}'`}return r}function h(r,v){if(v instanceof Date)return"date";if("number"===typeof v)return"number";if("string"===typeof v&&(r=r.getField(v),"\x3cnow\x3e"!==
v.toLowerCase()&&c.isDateField(r)))return"field"}const l={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},m={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},t=new Set(["integer","small-integer"]);let z=null;a.castIntegerFieldToFloat=function(r){return`cast(${r} as float)`};a.dateTypes=
["date","date-only","timestamp-offset"];a.defaultBasemapGroups=l;a.defaultStatisticTypes={exclude:["median"]};a.fieldDelimiter=",";a.formatAnyDate=function(r,v){const {format:w,timeZoneOptions:q,fieldType:g}=v??{};let p;q&&({timeZone:x,timeZoneName:p}=n.getTimeZoneFormattingOptions(q.layerTimeZone,q.datesInUnknownTimezone,q.viewTimeZone,b.convertDateFormatToIntlOptions(w||"short-date-short-time"),g));if("string"===typeof r&&isNaN(Date.parse("time-only"===g?`1970-01-01T${r}Z`:r)))return r;switch(g){case "date-only":var x=
b.convertDateFormatToIntlOptions(w||"short-date");return"string"===typeof r?b.formatDateOnly(r,{...x}):b.formatDate(r,{...x,timeZone:n.utc});case "time-only":return x=b.convertDateFormatToIntlOptions(w||"short-time"),"string"===typeof r?b.formatTimeOnly(r,x):b.formatDate(r,{...x,timeZone:n.utc});case "timestamp-offset":if(!x&&"string"===typeof r&&(new Date(r)).toISOString()!==r)return r;x=(v=w||q?b.convertDateFormatToIntlOptions(w||"short-date-short-time"):void 0)?{...v,timeZone:x,timeZoneName:p}:
void 0;return"string"===typeof r?b.formatTimestamp(r,x):b.formatDate(r,x);default:return v=w||q?b.convertDateFormatToIntlOptions(w||"short-date-short-time"):void 0,b.formatDate("string"===typeof r?new Date(r):r,v?{...v,timeZone:x,timeZoneName:p}:void 0)}};a.getBasemapGroup=function(r,v=l){for(const w in v)if(v[w].includes(r))return w};a.getBasemapId=function(r,v,w=!0){let q=null;r&&("string"===typeof r?v.includes(r)&&(q=r):q=e.getWellKnownBasemapId(r));return w?q||"gray":q};a.getDateDiffSQL=function(r,
v,w,q){const {hasQueryEngine:g}=r;w=k(w,h(r,w),g);r=k(v,h(r,v),g);r=`(${w} - ${r})`;q=m[q];v="/";1>q&&(q=1/q,v="*");return{sqlExpression:1===q?r:`(${r} ${v} ${q})`,sqlWhere:null}};a.getDateType=h;a.getFieldsList=async function(r){const {field:v,field2:w,field3:q,normalizationField:g,valueExpression:p}=r;r=[];p&&(z||({arcadeUtils:r}=await f.loadArcade(),z=r),r=z.extractFieldNames(p));v&&r.push(v);w&&r.push(w);q&&r.push(q);g&&r.push(g);return r};a.getNormalizationType=function(r){let v=r.normalizationType;
v||(r.normalizationField?v="field":null!=r.normalizationTotal&&(v="percent-of-total"));return v??void 0};a.isAnyDateField=function(r){return c.isDateField(r)||c.isDateOnlyField(r)||c.isTimestampOffsetField(r)};a.isIntegerField=function(r,v){r=v&&r.getField(v);return!!r&&t.has(r.type)};a.unitValueInDays=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(a,b,c,f,e,n,d,k,h,l){function m(y,B){let H;if("string"===typeof y){const N=y in l.esriBasemapDefinitions,K=!N&&y.includes("/");if(!N&&!K)return c.apiKey?M().warn(`Unable to find basemap definition for: ${y}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`):(B=Object.entries(l.esriBasemapDefinitions).filter(([,X])=>X.classic||X.is3d).map(([X])=>`"${X}"`).sort().join(", "),M().warn(`Unable to find basemap definition for: ${y}. Try one of these: ${B}`)),null;B&&(H=
B[y]);H||(H=N?b.fromId(y):new b({style:{id:y}}),B&&(B[y]=H))}else H=k.ensureType(b,y);H?.destroyed&&(M().warn("The provided basemap is already destroyed",{basemap:H}),H=null);return H}function t(y){if(C)return C(y);let B=null;y=w(y);const H=!y?.baseLayers.length;for(const K in l.esriBasemapDefinitions){var N=x(l.esriBasemapDefinitions[K]);N=D(y,N,{mustMatchReferences:H});if("equal"===N){B=K;break}"base-layers-equal"===N&&(B=K)}return B}function z(y,B){const H=new f;y.forEach(N=>{const K=B.find(X=>
"scene"!==X.type&&E(g(N),g(X)))||N;H.includes(K)?H.push(N):H.push(K)});return H}function r(y){if(v(y.url))return!0;if("vector-tile"===y.type)for(const B in y.sourceNameToSource)if(v(y.sourceNameToSource[B]?.sourceUrl))return!0;return!1}function v(y){if(!y)return!1;y=new d.Url(d.makeAbsolute(y));return!!y.authority&&U.test(y.authority)}function w(y){return y?!y.loaded&&y.resourceInfo?x(y.resourceInfo.data):{baseLayers:q(y.baseLayers),referenceLayers:q(y.referenceLayers)}:null}function q(y){return(f.isCollection(y)?
y.toArray():y).map(g)}function g(y){return{type:y.type,effect:"effect"in y?y.effect:void 0,url:L("urlTemplate"in y&&y.urlTemplate||y.url||"styleUrl"in y&&y.styleUrl||""),minScale:"minScale"in y&&null!=y.minScale?y.minScale:0,maxScale:"maxScale"in y&&null!=y.maxScale?y.maxScale:0,opacity:null!=y.opacity?y.opacity:1,visible:null!=y.visible?!!y.visible:!0,sublayers:"map-image"!==y.type&&"wms"!==y.type||null==y.sublayers?void 0:y.sublayers?.map(B=>({id:B.id,visible:B.visible})),activeLayerId:"wmts"===
y.type?y.activeLayer?.id:void 0}}function p(y){return y.isReference||"ArcGISSceneServiceLayer"===y.layerType}function x(y){return y?{baseLayers:u((y.baseMapLayers??[]).filter(B=>!p(B))),referenceLayers:u((y.baseMapLayers??[]).filter(B=>p(B)))}:null}function u(y){return y.map(B=>{let H;switch(B.layerType){case "VectorTileLayer":H="vector-tile";break;case "ArcGISTiledMapServiceLayer":H="tile";break;case "ArcGISSceneServiceLayer":H="scene";break;default:H="unknown"}return{type:H,effect:B.effect,url:L(B.templateUrl||
B.urlTemplate||B.styleUrl||B.url),minScale:B.minScale??0,maxScale:B.maxScale??0,opacity:B.opacity??1,visible:null!=B.visibility?!!B.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function D(y,B,H){return null!=y!==(null!=B)?"not-equal":y&&B?J(y.baseLayers,B.baseLayers)?J(y.referenceLayers,B.referenceLayers)?"equal":H.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function J(y,B){if(y.length!==B.length)return!1;for(let H=0;H<y.length;H++)if(!E(y[H],B[H]))return!1;return!0}
function E(y,B){if(y.type!==B.type||y.url!==B.url||y.minScale!==B.minScale||y.maxScale!==B.maxScale||y.visible!==B.visible||y.opacity!==B.opacity||!h.effectEquals(y.effect,B.effect))return!1;if(null!=y.activeLayerId||null!=B.activeLayerId)return y.activeLayerId===B.activeLayerId;if(null!=y.sublayers||null!=B.sublayers){if(null==y.sublayers||null==B.sublayers||y.sublayers.length!==B.sublayers.length)return!1;for(let H=0;H<y.sublayers.length;H++){const N=y.sublayers.at(H),K=B.sublayers.at(H);if(N?.id!==
K?.id||N?.visible!==K?.visible)return!1}}return!0}function L(y){return y?d.normalize(y).replace(/^\s*https?:/i,"").toLowerCase():""}function Q(y){return"portalItem"in y?y.portalItem?.thumbnailUrl:void 0}const M=()=>e.getLogger("esri.support.basemapUtils");let C;const U=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;a.clonePreservingTiledLayers=function(y,B=null){y=m(y);if(!y)return null;y=y.clone();B&&(y.baseLayers=z(y.baseLayers,B.baseLayers),y.referenceLayers=z(y.referenceLayers,B.referenceLayers));
return y};a.contentEquals=function(y,B){if(y===B||null!=y?.portalItem?.id&&y.portalItem.id===B?.portalItem?.id)return!0;y=w(y);B=w(B);return"equal"===D(y,B,{mustMatchReferences:!0})};a.createCache=function(){return{}};a.destroyCache=function(y){for(const B in y)n.destroyMaybe(y[B]),delete y[B]};a.ensureType=m;a.findSpatialReference=function(y,B){if(null==B||null==y)return{spatialReference:null,updating:!1};if("not-loaded"===B.loadStatus)return B.load(),{spatialReference:null,updating:!0};if(B.spatialReference)return{spatialReference:B.spatialReference,
updating:!1};if(0===B.baseLayers.length)return{spatialReference:null,updating:!1};B=B.baseLayers.at(0);switch(B.loadStatus){case "not-loaded":B.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}B=(("supportedSpatialReferences"in B?B.supportedSpatialReferences:null)||["tileInfo"in B?B.tileInfo?.spatialReference:B.spatialReference]).filter(Boolean);const H=y.spatialReference;return H?{spatialReference:B.find(N=>H.equals(N))??B[0]??
null,updating:!1}:{spatialReference:B[0],updating:!1}};a.getBasemapThumbnailUrl=function(y){if(!y)return null;var {thumbnailUrl:B}=y;return B?B:(B=t(y))?l.esriBasemapDefinitions[B].thumbnailUrl:n.mappedFind(y.baseLayers,Q)};a.getWellKnownBasemapId=t;a.hasDeveloperBasemapLayer=function(y){return!!y?.baseLayers.concat(y.referenceLayers).some(r)};a.isBasemap3D=function(y){return"Web Scene"===y.portalItem?.type||y.referenceLayers.some(B=>"scene"===B.type)};a.isBasemapInBeta=function(y){return!!y?.portalItem?.tags?.some(B=>
"beta"===B.toLowerCase())};a.isBasemapLayer=function(y,B){return y.basemap?.referenceLayers?.some(H=>H.uid===B)||y.basemap?.baseLayers?.some(H=>H.uid===B)};a.isDeveloperBasemapLayer=r;a.overrideGetWellKnownBasemapId=function(y){C=y};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J){var E;let L=0;n=E=class extends n.JSONSupportMixin(k){constructor(C){super(C);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+L++;this.baseLayers=new f;this.referenceLayers=new f;const U=y=>{y.parent&&y.parent!==this&&"remove"in y.parent&&y.parent.remove(y);y.parent=this;"elevation"===y.type&&l.getLogger(this).error(`Layer '${y.title}, id:${y.id}' of type '${y.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",y=>U(y.item)),this.referenceLayers.on("after-add",y=>U(y.item)),this.baseLayers.on("after-remove",y=>{y.item.parent=null}),this.referenceLayers.on("after-remove",y=>{y.item.parent=null})])}initialize(){this.when().catch(C=>{l.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,C)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var C=this.baseLayers.toArray();for(const U of C)U.destroy();
C=this.referenceLayers.toArray();for(const U of C)U.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=m.destroyMaybe(this.portalItem)}normalizeCtorArgs(C){C&&"resourceInfo"in C&&(this._set("resourceInfo",C.resourceInfo),C={...C},delete C.resourceInfo);return C}set baseLayers(C){this._set("baseLayers",e.referenceSetter(C,this._get("baseLayers")))}_writeBaseLayers(C,U,y){const B=[];C&&(y={...y,layerContainerType:"basemap"},this.baseLayers.forEach(H=>{H=J.getLayerJSON(H,
y.webmap?y.webmap.getLayerJSONFromResourceInfo(H):null,y);null!=H&&B.push(H)}),this.referenceLayers.forEach(H=>{const N=J.getLayerJSON(H,y.webmap?y.webmap.getLayerJSONFromResourceInfo(H):null,y);null!=N&&("scene"!==H.type&&(N.isReference=!0),B.push(N))}));U.baseMapLayers=B}set referenceLayers(C){this._set("referenceLayers",e.referenceSetter(C,this._get("referenceLayers")))}writeTitle(C,U){U.title=C||"Basemap"}load(C){this.addResolvingPromise(this._loadFromSource(C));return Promise.resolve(this)}loadAll(){return h.loadAll(this,
C=>{C(this.baseLayers,this.referenceLayers)})}clone(){const C={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(U=>d.isClonable(U)?U.clone():U),referenceLayers:this.referenceLayers.map(U=>d.isClonable(U)?U.clone():U)};this.loaded&&(C.loadStatus="loaded");return(new E({resourceInfo:this.resourceInfo})).set(C)}read(C,U){this.resourceInfo||this._set("resourceInfo",{data:C,context:U});super.read(C,U)}write(C,U){C=C||{};U?.origin||(U={origin:"web-map",...U});super.write(C,
U);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(C.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(y=>{y=d.clone(y);y.url&&z.isProtocolRelative(y.url)&&(y.url=`https:${y.url}`);y.templateUrl&&z.isProtocolRelative(y.templateUrl)&&(y.templateUrl=`https:${y.templateUrl}`);return y}));return C}async _loadFromSource(C){const {resourceInfo:U,portalItem:y,style:B}=this;t.throwIfAborted(C);const H=[];U?(H.push(this._loadLayersFromJSON(U.data,U.context?U.context.url:null,C)),U.data.id&&!U.data.title&&
H.push(u.getBasemapTitle(U.data.id).then(N=>{N&&this.read({title:N},U.context)}))):y?H.push(this._loadFromItem(y,C)):B&&H.push(this._loadFromStylesService(B,C));await Promise.all(H)}async _loadLayersFromJSON(C,U,y){const B=this.resourceInfo?.context,H=this.portalItem?.portal||B?.portal||null,N=M[B?.origin||""]??"web-map",{populateOperationalLayers:K}=await new Promise((V,da)=>a(["./layers/support/layersCreator"],V,da)),X=[];t.throwIfAborted(y);if(C.baseMapLayers&&Array.isArray(C.baseMapLayers)){U=
{context:{...B,origin:N,url:U,portal:H,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const V=da=>"web-scene"===N&&"ArcGISSceneServiceLayer"===da.layerType||da.isReference;y=K(this.baseLayers,C.baseMapLayers.filter(da=>!V(da)),U);X.push(y);C=K(this.referenceLayers,C.baseMapLayers.filter(V),U);X.push(C)}await Promise.allSettled(X)}async _loadFromItem(C,U){const y=await (await C.load(U)).fetchData("json",U),B=z.urlToObject(C.itemUrl??"");this._set("resourceInfo",{data:y.baseMap??
{},context:{origin:Q[C.type||""]??"web-map",portal:C.portal||p.getDefault(),url:B}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:y.spatialReference},this.resourceInfo.context);this.read({title:C.title,thumbnailUrl:C.thumbnailUrl},{origin:"portal-item",portal:C.portal||p.getDefault(),url:B});return this._loadLayersFromJSON(this.resourceInfo.data,B,U)}async _loadFromStylesService(C,U){var y=`${C.serviceUrl}/${C.id}`;const B=(await c(y,{query:{language:C.getLanguageParamValue(),
places:C.places,worldview:C.worldview,token:C.apiKey},signal:U?.signal})).data;y=z.urlToObject(y);this._set("resourceInfo",{data:B.baseMap??{},context:{origin:"web-map",url:y}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:B.spatialReference},this.resourceInfo.context);await this._loadLayersFromJSON(this.resourceInfo.data,y,U);if(C.apiKey)for(const H of[...this.baseLayers,...this.referenceLayers])"apiKey"in H&&(H.apiKey=C.apiKey)}static fromId(C){return(C=
u.esriBasemapDefinitions[C])?C.itemId?new E({portalItem:{id:C.itemId,portal:{url:"https://www.arcgis.com"}}}):E.fromJSON(C,{origin:C.is3d?"web-scene":"web-map"}):null}};b.__decorate([r.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(C,U,y,B){this._writeBaseLayers(C,U,B)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:f}},writer(C,U,y,B){this._writeBaseLayers(C,U,B)}}}}}})],n.prototype,"baseLayers",null);b.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],
n.prototype,"id",void 0);b.__decorate([r.property({type:x})],n.prototype,"portalItem",void 0);b.__decorate([r.property()],n.prototype,"referenceLayers",null);b.__decorate([r.property({readOnly:!0})],n.prototype,"resourceInfo",void 0);b.__decorate([r.property({type:g})],n.prototype,"spatialReference",void 0);b.__decorate([r.property({type:D})],n.prototype,"style",void 0);b.__decorate([r.property()],n.prototype,"thumbnailUrl",void 0);b.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],
n.prototype,"title",void 0);b.__decorate([q.writer("title")],n.prototype,"writeTitle",null);n=E=b.__decorate([w.subclass("esri.Basemap")],n);const Q={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},M={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return n})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(a,b){a.castForReferenceSetter=function(c){return c};a.referenceSetter=function(c,f,e=b){f||=new e;if(f===c)return f;
f.removeAll();c&&(Array.isArray(c)||"items"in c&&Array.isArray(c.items))?f.addMany(c):c&&f.add(c);return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){const h=l=>{l=class extends l{constructor(...m){super(...m);this.loadError=this._loadController=null;this.loadStatus=
"not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(t=>{const z=this.load.bind(this);this.load=r=>{const v=new Promise((w,q)=>{const g=e.onAbortOrThrow(r,q);this.destroyed&&q(new b("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(w,q).finally(()=>{g&&g.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const w=this._loadController=new AbortController;z({signal:w.signal})}t();
return v}}));this.when(()=>{this._set("loadStatus","loaded");this._loadController=null},t=>{this._set("loadStatus","failed");this._set("loadError",t);this._loadController=null})}destroy(){this._loadController&&(this._loadController=c.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;
this._set("loadError",new b("load:cancelled","Cancelled"));this._loadController?.abort();this._promiseProps.abort();return this}};a.__decorate([d.property({readOnly:!0})],l.prototype,"loaded",null);a.__decorate([d.property({readOnly:!0})],l.prototype,"loadError",void 0);a.__decorate([d.property({clonable:!1})],l.prototype,"loadStatus",void 0);a.__decorate([d.property({type:[n],readOnly:!0})],l.prototype,"loadWarnings",null);return l=a.__decorate([k.subclass("esri.core.Loadable")],l)};f=class extends h(f.EsriPromise){};
f=a.__decorate([k.subclass("esri.core.Loadable")],f);(function(l){l.LoadableMixin=h;l.isLoadable=function(m){return!(!m||!m.load)}})(f||={});return f})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(a,b,c,f,e){var n;(function(h){h[h.PENDING=0]="PENDING";h[h.RESOLVED=1]="RESOLVED";h[h.REJECTED=2]="REJECTED"})(n||={});class d{constructor(){this._resolver=f.createResolver();this._status=n.PENDING;
this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=n.RESOLVED;this._cleanUp()},()=>{this._status=n.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(h){this._resolvingPromises.push(h);this._tryResolve()}isResolved(){return this._status===n.RESOLVED}isRejected(){return this._status===n.REJECTED}isFulfilled(){return this._status!==n.PENDING}abort(){this._resolver.reject(f.createAbortError())}_cleanUp(){this._resolvingPromises=
this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var h=f.createResolver(),l=[...this._resolvingPromises,h.promise],m=this._allPromise=Promise.all(l);m.then(()=>{this.isFulfilled()||this._allPromise!==m||this._resolver.resolve()},t=>{this.isFulfilled()||this._allPromise!==m||f.isAbortError(t)||this._resolver.reject(t)});h.resolve()}}}const k=h=>{h=class extends h{constructor(...l){super(...l);this._promiseProps=new d;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(l,
m){return this._promiseProps.promise.then(()=>this).then(l,m)}catch(l){return this.when(null,l)}addResolvingPromise(l){l&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in l?l.when():l)}};return h=b.__decorate([e.subclass("esri.core.Promise")],h)};a.EsriPromise=class extends k(c){};a.EsriPromise=b.__decorate([e.subclass("esri.core.Promise")],a.EsriPromise);a.EsriPromiseMixin=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(a,b,c,f){async function e(n,d){const k=[],h=(...m)=>{for(const t of m)null!=t&&(Array.isArray(t)?h(...t):c.isCollection(t)?t.forEach(z=>h(z)):f.isLoadable(t)&&k.push(t))};d(h);let l=null;await b.map(k,async m=>{m=await b.result("loadAll"in m&&"function"===typeof m.loadAll?m.loadAll():m.load());!1!==m.ok||l||(l=m)});if(l)throw l.error;return n}a.loadAll=async function(n,d){await n.load();return e(n,d)};a.loadAllChildren=e;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E){function L(B){const H=f.id;return()=>{const N=B.deref();N&&H.findCredential(N.restUrl)&&N.signIn().catch(()=>{})}}const Q=B=>Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));var M;let C;const U={PortalGroup:()=>Promise.resolve({default:x}),PortalItem:()=>new Promise((B,H)=>a(["./PortalItem"],N=>B(Q(N)),H)),PortalUser:()=>Promise.resolve({default:J})};d=M=class extends d.JSONSupportMixin(k){constructor(B){super(B);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.layoutGroupQuery=
this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.default3DBasemapQuery=this.customBaseUrl=this.culture=this.created=null;this.hasClassificationSchema=this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=
null;this.isReadOnly=this.isPortal=!1;this.region=this.portalProperties=this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.recycleBinEnabled=!1;this.rotatorPanels=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=c.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=
this.useDefault3dBasemap=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(B){return"string"===typeof B?{url:B}:B}destroy(){y.unregister(this);this.defaultBasemap=h.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=h.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=h.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=h.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(B){if(B)for(const H of B)c.request.trustedServers.includes(H)||
c.request.trustedServers.push(H);return B}readDefaultBasemap(B){return this._readBasemap(B)}readDefaultDevBasemap(B){return this._readBasemap(B)}readDefaultVectorBasemap(B){return this._readBasemap(B)}get extraQuery(){const B=!this.user?.orgId||this.canSearchPublic;return this.id&&!B?` AND orgid:${this.id}`:null}get hasAPIKey(){return E.isApiKeyApplicable(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let B=this.url;
if(B){const H=B.indexOf("/sharing");B=0<H?B.slice(0,H):this.url.replace(/\/+$/,"");B+="/sharing/rest"}return B}get thumbnailUrl(){const B=this.restUrl,H=this.thumbnail;return B&&H?this._normalizeSSL(B+"/portals/self/resources/"+H):null}readUrlKey(B){return B?B.toLowerCase():B}readUser(B){let H=null;B&&(H=J.fromJSON(B),H.portal=this);return H}load(B){const H=(new Promise((N,K)=>a(["../Basemap"],X=>N(Q(X)),K))).then(({default:N})=>{l.throwIfAborted(B);C=N}).then(()=>this.sourceJSON?this.sourceJSON:
this.fetchSelf(this.authMode,!1,B)).then(N=>{if(!this.hasAPIKey&&f.id){const K=f.id;this.credential=K.findCredential(this.restUrl);this.credential||this.authMode!==M.AUTH_MODE_AUTO&&this.authMode!==M.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=K.on("credential-create",L(new WeakRef(this))),y.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=N;this.read(N)});this.addResolvingPromise(H);return Promise.resolve(this)}async createElevationLayers(){await this.load();
const B=this._getHelperService("defaultElevationLayers"),H=(await new Promise((N,K)=>a(["../layers/ElevationLayer"],X=>N(Q(X)),K))).default;return B?B.map(N=>new H({id:N.id,url:N.url})):[]}async fetchBasemaps(B,H){const N=await this._fetchBasemaps(B,H);!0===H?.include3d&&!1!==this.use3dBasemaps&&(B=await this._fetchBasemaps3D(B,H),N.unshift(...B));return N}async fetchDefault3DBasemap(B){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||"none"===this.default3DBasemapQuery)return null;const H=
new u;H.query=this.default3DBasemapQuery;H.disableExtraQuery=!0;return(B=(await this.queryItems(H,B)).results.find(N=>"Web Scene"===N.type))?new C({portalItem:B}):null}fetchCategorySchema(B){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",B).then(H=>H.categorySchema):l.isAborted(B)?Promise.reject(l.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(B){const H=this.featuredGroups,N=new u({num:100,sortField:"title"});if(H?.length){const K=[];for(const X of H)K.push(`(title:"${X.title}" AND owner:${X.owner})`);
N.query=K.join(" OR ");return this.queryGroups(N,B).then(X=>X.results)}return l.isAborted(B)?Promise.reject(l.createAbortError()):Promise.resolve([])}fetchRegions(B){const H=this.user?.culture||this.culture||g.getLocale();return this.request(this.restUrl+"/portals/regions",{...B,query:{culture:H}})}fetchSettings(B){const H=this.user?.culture||this.culture||g.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...B,query:{culture:H}})}static getDefault(){return p.ensureDefaultPortalInstance(()=>
new M)}queryGroups(B,H){return this.queryPortal("/community/groups",B,"PortalGroup",H)}queryItems(B,H){return this.queryPortal("/search",B,"PortalItem",H)}queryUsers(B,H){B.sortField||(B.sortField="username");return this.queryPortal("/community/users",B,"PortalUser",H)}fetchSelf(B=this.authMode,H=!1,N){const K=this.restUrl+"/portals/self";B={authMode:B,query:{culture:g.getLocale().toLowerCase()},withCredentials:!0,...N};"auto"===B.authMode&&(B.authMode="no-prompt");H&&(B.query.default=!0);return this.request(K,
B)}queryPortal(B,H,N,K){const X=t.ensureType(u,H),V=da=>this.request(this.restUrl+B,{...X.toRequestOptions(this),...K}).then(aa=>{const fa=X.clone();fa.start=aa.nextStart;return new D({nextQueryParams:fa,queryParams:X,total:aa.total,results:M._resultsToTypedArray(da,{portal:this},aa,K)})}).then(aa=>Promise.all(aa.results.map(fa=>"function"===typeof fa.when?fa.when():aa)).then(()=>aa,fa=>{l.throwIfAbortError(fa);return aa}));return N&&U[N]?U[N]().then(({default:da})=>{l.throwIfAborted(K);return V(da)}):
V()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new n("portal:not-authenticated","Unable to authenticate user. Portal.user is missing");});if(this.authMode===M.AUTH_MODE_ANONYMOUS||this.authMode===M.AUTH_MODE_NO_PROMPT&&!f.id)return Promise.reject(new n("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const B=H=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return H||
(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=H;return this.fetchSelf("immediate")});if(this.user&&this.credential===H)return null;this.credential=H;return this.fetchSelf("immediate")}).then(N=>{N&&(this.sourceJSON=N,this.read(N))});return f.id?f.id.getCredential(this.restUrl,{prompt:this.authMode!==M.AUTH_MODE_NO_PROMPT}).then(H=>B(H)):B(this.credential)}normalizeUrl(B){const H=this.credential?.token;
return this._normalizeSSL(H?B+(B.includes("?")?"\x26":"?")+"token\x3d"+H:B)}requestToTypedArray(B,H,N){return this.request(B,H).then(K=>{const X=M._resultsToTypedArray(N,{portal:this},K);return Promise.all(X.map(V=>"function"===typeof V.when?V.when():K)).then(()=>X,()=>X)})}request(B,H={}){var N={f:"json",...H.query};const {authMode:K=this.authMode===M.AUTH_MODE_ANONYMOUS||this.authMode===M.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:X=null,cacheBust:V=!1,method:da="auto",responseType:aa="json",
signal:fa}=H;N={authMode:K,body:X,cacheBust:V,method:da,query:N,responseType:aa,timeout:0,signal:fa};H.withCredentials&&(N.withCredentials=!0);return e(this._normalizeSSL(B),N).then(Z=>Z.data)}toJSON(){throw new n("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(B){if(!B)return null;if(B.declaredClass)throw Error("JSON object is already hydrated");return new M({sourceJSON:B})}_getHelperService(B){const H=this.helperServices&&this.helperServices[B];if(!H)throw new n("portal:service-not-found",
`The \`helperServices\` do not include an entry named "${B}"`);return H}async _fetchBasemaps(B,H){const N=new u;N.query=B||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);N.disableExtraQuery=!0;B=await this.queryGroups(N,H);if(!B.total)return[];B=B.results[0];N.num=100;N.query='type:"Web Map" -type:"Web Application"';N.sortField=B.sortField||"name";N.sortOrder=B.sortOrder||"desc";H=await B.queryItems(N,H);return H.total?
H.results.filter(K=>"Web Map"===K.type).map(K=>new C({portalItem:K})):[]}async _fetchBasemaps3D(B,H){B=B||this.basemapGalleryGroupQuery3D;if(!B)return[];B=new u({query:B,disableExtraQuery:!0});var N=await this.queryGroups(B,H);if(!N.total)return[];N=N.results[0];B.num=100;B.query='type:"Web Scene"';B.sortField=N.sortField||"name";B.sortOrder=N.sortOrder||"desc";H=await N.queryItems(B,H);return H.total?H.results.filter(K=>"Web Scene"===K.type).map(K=>new C({portalItem:K})):[]}_normalizeSSL(B){return B.replace(/^http:/i,
"https:").replace(":7080",":7443")}_readBasemap(B){return B?(B=C.fromJSON(B),B.portalItem={portal:this},B):null}static _resultsToTypedArray(B,H,N,K){if(N){const X=null!=K?K.signal:null;N=N.listings||N.notifications||N.userInvitations||N.tags||N.items||N.groups||N.comments||N.provisions||N.results||N.relatedItems||N;if(B||H)N=N.map(V=>{V=Object.assign(B?B.fromJSON(V):V,H);"function"===typeof V.load&&V.load(X);return V})}else N=[];return N}};d.AUTH_MODE_ANONYMOUS="anonymous";d.AUTH_MODE_AUTO="auto";
d.AUTH_MODE_IMMEDIATE="immediate";d.AUTH_MODE_NO_PROMPT="no-prompt";b.__decorate([m.property()],d.prototype,"access",void 0);b.__decorate([m.property()],d.prototype,"allSSL",void 0);b.__decorate([m.property()],d.prototype,"authMode",void 0);b.__decorate([m.property()],d.prototype,"authorizedCrossOriginDomains",void 0);b.__decorate([v.reader("authorizedCrossOriginDomains")],d.prototype,"readAuthorizedCrossOriginDomains",null);b.__decorate([m.property()],d.prototype,"basemapGalleryGroupQuery",void 0);
b.__decorate([m.property({json:{name:"3DBasemapGalleryGroupQuery"}})],d.prototype,"basemapGalleryGroupQuery3D",void 0);b.__decorate([m.property()],d.prototype,"bingKey",void 0);b.__decorate([m.property()],d.prototype,"canListApps",void 0);b.__decorate([m.property()],d.prototype,"canListData",void 0);b.__decorate([m.property()],d.prototype,"canListPreProvisionedItems",void 0);b.__decorate([m.property()],d.prototype,"canProvisionDirectPurchase",void 0);b.__decorate([m.property()],d.prototype,"canSearchPublic",
void 0);b.__decorate([m.property()],d.prototype,"canShareBingPublic",void 0);b.__decorate([m.property()],d.prototype,"canSharePublic",void 0);b.__decorate([m.property()],d.prototype,"canSignInArcGIS",void 0);b.__decorate([m.property()],d.prototype,"canSignInIDP",void 0);b.__decorate([m.property()],d.prototype,"colorSetsGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"commentsEnabled",void 0);b.__decorate([m.property({type:Date})],d.prototype,"created",void 0);b.__decorate([m.property()],
d.prototype,"credential",void 0);b.__decorate([m.property()],d.prototype,"culture",void 0);b.__decorate([m.property()],d.prototype,"currentVersion",void 0);b.__decorate([m.property()],d.prototype,"customBaseUrl",void 0);b.__decorate([m.property()],d.prototype,"default3DBasemapQuery",void 0);b.__decorate([m.property()],d.prototype,"defaultBasemap",void 0);b.__decorate([v.reader("defaultBasemap")],d.prototype,"readDefaultBasemap",null);b.__decorate([m.property()],d.prototype,"defaultDevBasemap",void 0);
b.__decorate([v.reader("defaultDevBasemap")],d.prototype,"readDefaultDevBasemap",null);b.__decorate([m.property({type:q})],d.prototype,"defaultExtent",void 0);b.__decorate([m.property()],d.prototype,"defaultVectorBasemap",void 0);b.__decorate([v.reader("defaultVectorBasemap")],d.prototype,"readDefaultVectorBasemap",null);b.__decorate([m.property()],d.prototype,"description",void 0);b.__decorate([m.property()],d.prototype,"devBasemapGalleryGroupQuery",void 0);b.__decorate([m.property()],d.prototype,
"eueiEnabled",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,"extraQuery",null);b.__decorate([m.property()],d.prototype,"featuredGroups",void 0);b.__decorate([m.property()],d.prototype,"featuredItemsGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"galleryTemplatesGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"layoutGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"livingAtlasGroupQuery",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,
"hasAPIKey",null);b.__decorate([m.property()],d.prototype,"hasCategorySchema",void 0);b.__decorate([m.property()],d.prototype,"hasClassificationSchema",void 0);b.__decorate([m.property()],d.prototype,"helpBase",void 0);b.__decorate([m.property()],d.prototype,"helperServices",void 0);b.__decorate([m.property()],d.prototype,"helpMap",void 0);b.__decorate([m.property()],d.prototype,"homePageFeaturedContent",void 0);b.__decorate([m.property()],d.prototype,"homePageFeaturedContentCount",void 0);b.__decorate([m.property()],
d.prototype,"httpPort",void 0);b.__decorate([m.property()],d.prototype,"httpsPort",void 0);b.__decorate([m.property()],d.prototype,"id",void 0);b.__decorate([m.property()],d.prototype,"ipCntryCode",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,"isOrganization",null);b.__decorate([m.property()],d.prototype,"isPortal",void 0);b.__decorate([m.property()],d.prototype,"isReadOnly",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,"itemPageUrl",null);b.__decorate([m.property()],
d.prototype,"layerTemplatesGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"maxTokenExpirationMinutes",void 0);b.__decorate([m.property({type:Date})],d.prototype,"modified",void 0);b.__decorate([m.property()],d.prototype,"name",void 0);b.__decorate([m.property()],d.prototype,"portalHostname",void 0);b.__decorate([m.property()],d.prototype,"portalMode",void 0);b.__decorate([m.property()],d.prototype,"portalProperties",void 0);b.__decorate([m.property()],d.prototype,"region",void 0);b.__decorate([m.property()],
d.prototype,"recycleBinEnabled",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,"restUrl",null);b.__decorate([m.property()],d.prototype,"rotatorPanels",void 0);b.__decorate([m.property()],d.prototype,"showHomePageDescription",void 0);b.__decorate([m.property()],d.prototype,"sourceJSON",void 0);b.__decorate([m.property()],d.prototype,"staticImagesUrl",void 0);b.__decorate([m.property({json:{name:"2DStylesGroupQuery"}})],d.prototype,"stylesGroupQuery2d",void 0);b.__decorate([m.property({json:{name:"stylesGroupQuery"}})],
d.prototype,"stylesGroupQuery3d",void 0);b.__decorate([m.property()],d.prototype,"supportsHostedServices",void 0);b.__decorate([m.property()],d.prototype,"symbolSetsGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"templatesGroupQuery",void 0);b.__decorate([m.property()],d.prototype,"thumbnail",void 0);b.__decorate([m.property({readOnly:!0})],d.prototype,"thumbnailUrl",null);b.__decorate([m.property()],d.prototype,"units",void 0);b.__decorate([m.property()],d.prototype,"url",void 0);b.__decorate([m.property()],
d.prototype,"urlKey",void 0);b.__decorate([v.reader("urlKey")],d.prototype,"readUrlKey",null);b.__decorate([m.property()],d.prototype,"user",void 0);b.__decorate([v.reader("user")],d.prototype,"readUser",null);b.__decorate([m.property()],d.prototype,"use3dBasemaps",void 0);b.__decorate([m.property()],d.prototype,"useDefault3dBasemap",void 0);b.__decorate([m.property()],d.prototype,"useStandardizedQuery",void 0);b.__decorate([m.property()],d.prototype,"useVectorBasemaps",void 0);b.__decorate([m.property()],
d.prototype,"vectorBasemapGalleryGroupQuery",void 0);b=d=M=b.__decorate([w.subclass("esri.portal.Portal")],d);const y=new FinalizationRegistry(B=>{B.remove()});return b})},"esri/portal/portalDefault":function(){define(["exports"],function(a){let b;a.clearDefaultPortalInstance=function(){b=void 0};a.ensureDefaultPortalInstance=function(c){if(!b||b.destroyed)b=c();return b};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(a,b,c,f,e,n,d,k,h){var l;c=l=class extends c.JSONSupport{constructor(m){super(m);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const m=this.url,t=this.thumbnail;return m&&t&&this.portal?this.portal?.normalizeUrl(`${m}/info/${t}?f=json`):null}get url(){const m=this.portal?.restUrl;return m?m+"/community/groups/"+this.id:
null}fetchCategorySchema(m){return this.portal.request(this.url+"/categorySchema",m).then(t=>{t=t.categorySchema||[];return t.some(z=>"contentCategorySetsGroupQuery.LivingAtlas"===z.source)?this._fetchCategorySchemaSet("LivingAtlas",m):t})}fetchMembers(m){return this.portal.request(this.url+"/users",m)}getThumbnailUrl(m){let t=this.thumbnailUrl;t&&m&&(t+=`&w=${m}`);return t}toJSON(){throw new b("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(m){if(!m)return null;
if(m.declaredClass)throw Error("JSON object is already hydrated");const t=new l({sourceJSON:m});t.read(m);return t}queryItems(m,t){m=e.ensureType(h,m);const z=this.portal;if(5<parseFloat(z.currentVersion))return m=m||new h,z.queryPortal(`/content/groups/${this.id}/search`,m,"PortalItem",t);m=m?m.clone():new h;m.query="group:"+this.id+(m.query?" "+m.query:"");return z.queryItems(m,t)}_fetchCategorySchemaSet(m,t){const z=this.portal;return z.fetchSelf(z.authMode,!0,t).then(r=>{if(r=r.contentCategorySetsGroupQuery)return r=
new h({disableExtraQuery:!0,num:1,query:r}),z.queryGroups(r,t);throw new b("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(r=>{if(r.total){r=r.results[0];const v=new h({num:1,query:`typekeywords:"${m}"`});return r.queryItems(v,t)}throw new b("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(r=>r.total?r.results[0].fetchData("json",t).then(v=>{v=v?.categorySchema;return v?.length?v:[]}):[])}};a.__decorate([f.property()],
c.prototype,"access",void 0);a.__decorate([f.property({type:Date})],c.prototype,"created",void 0);a.__decorate([f.property()],c.prototype,"description",void 0);a.__decorate([f.property()],c.prototype,"id",void 0);a.__decorate([f.property()],c.prototype,"isInvitationOnly",void 0);a.__decorate([f.property({type:Date})],c.prototype,"modified",void 0);a.__decorate([f.property()],c.prototype,"owner",void 0);a.__decorate([f.property()],c.prototype,"portal",void 0);a.__decorate([f.property()],c.prototype,
"snippet",void 0);a.__decorate([f.property()],c.prototype,"sortField",void 0);a.__decorate([f.property()],c.prototype,"sortOrder",void 0);a.__decorate([f.property()],c.prototype,"sourceJSON",void 0);a.__decorate([f.property()],c.prototype,"tags",void 0);a.__decorate([f.property()],c.prototype,"thumbnail",void 0);a.__decorate([f.property({readOnly:!0})],c.prototype,"thumbnailUrl",null);a.__decorate([f.property()],c.prototype,"title",void 0);a.__decorate([f.property({readOnly:!0})],c.prototype,"url",
null);return c=l=a.__decorate([k.subclass("esri.portal.PortalGroup")],c)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){var t;const z=new c.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});b=t=class extends b{constructor(r){super(r);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(r){"asc"!==r&&"desc"!==r||this._set("sortOrder",r)}clone(){return new t({categories:this.categories?f.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(r,v){let w=[];this.categories&&(w=this.categories.map(p=>Array.isArray(p)?JSON.stringify(p):p));let q="";if(this.extent){var g=m.project(this.extent,l.WGS84);null!=g&&(q=`${g.xmin},${g.ymin},${g.xmax},${g.ymax}`)}g=this.query;!this.disableExtraQuery&&r.extraQuery&&(g="("+g+")"+r.extraQuery);r={categories:w,bbox:q,q:g,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(r.sortField=this.sortField.split(",").map(p=>z.toJSON(p.trim())).join(","),r.sortOrder=this.sortOrder);return{query:{...v,...r}}}};a.__decorate([e.property()],b.prototype,"categories",void 0);a.__decorate([e.property()],b.prototype,"disableExtraQuery",void 0);a.__decorate([e.property({type:h})],b.prototype,"extent",void 0);a.__decorate([e.property()],b.prototype,"filter",void 0);a.__decorate([e.property()],b.prototype,"num",void 0);a.__decorate([e.property()],
b.prototype,"query",void 0);a.__decorate([e.property()],b.prototype,"sortField",void 0);a.__decorate([e.property()],b.prototype,"sortOrder",null);a.__decorate([e.property()],b.prototype,"start",void 0);return b=t=a.__decorate([k.subclass("esri.portal.PortalQueryParams")],b)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){b=class extends b{constructor(k){super(k);this.total=this.results=this.queryParams=this.nextQueryParams=null}};a.__decorate([c.property()],b.prototype,"nextQueryParams",void 0);a.__decorate([c.property()],b.prototype,"queryParams",void 0);a.__decorate([c.property()],b.prototype,"results",void 0);a.__decorate([c.property()],b.prototype,"total",void 0);return b=a.__decorate([d.subclass("esri.portal.PortalQueryResult")],b)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;f=t=class extends f.JSONSupport{constructor(z){super(z);this.userType=this.userLicenseTypeId=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const z=this.url,r=this.thumbnail;return z&&r?this.portal.normalizeUrl(`${z}/info/${r}?f=json`):null}get userContentUrl(){const z=
this.portal?.restUrl;return z?`${z}/content/users/${this.username}`:null}get url(){const z=this.portal?.restUrl;return z?`${z}/community/users/${this.username}`:null}addItem(z){const r=z&&z.item;var v=z?.data;z=z?.folder;const w={method:"post"};r&&(w.query=r.createPostQuery(),null!=v&&("string"===typeof v?w.query.text=v:"object"===typeof v&&(w.query.text=JSON.stringify(v))));v=this.userContentUrl;z&&(v+="/"+("string"===typeof z?z:z.id));return this.portal.request(v+"/addItem",w).then(q=>{r.id=q.id;
r.portal=this.portal;return r.loaded?r.reload():r.load()})}async deleteItem(z,r=!1){let v=this.userContentUrl;z.ownerFolder&&(v+="/"+z.ownerFolder);await this.portal.request(v+`/items/${z.id}/delete`,{method:"post",query:r?{permanentDelete:!0}:{}});z.id=null;z.portal=null}async deleteItems(z,r=!1){z=z.slice();var v=this.userContentUrl+"/deleteItems";const w=[];var q=z.map(g=>g.id);if(q.length){r={method:"post",query:{items:q.join(","),permanentDelete:r}};v=await this.portal.request(v,r);for(const g of v.results)v=
z.find(p=>g.itemId===p.id),r=g.success,q=null,r?(v.id=null,v.portal=null):g.error&&(q=new c("portal:delete-item-failed",g.error.message,g.error)),w.push({item:v,success:r,error:q})}return w}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(z=>z&&z.folders?z.folders.map(r=>{r=l.fromJSON(r);r.portal=this.portal;return r}):[])}fetchGroups(){return this.portal.request(this.url??"").then(z=>z&&z.groups?z.groups.map(r=>{r=m.fromJSON(r);r.portal=this.portal;return r}):
[])}async fetchItems(z){z??={};var r=this.userContentUrl??"";z.folder&&(r+="/"+z.folder.id);const {default:v}=await new Promise((w,q)=>a(["./PortalItem"],g=>w(Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"}))),q));z=await this.portal.request(r,{query:{folders:!1,inRecycleBin:z.inRecycleBin?!0:null,foldersContent:!z.folder&&z.includeSubfolderItems?!0:null,num:z.num||10,start:z.start||1,sortField:z.sortField||"created",sortOrder:z.sortOrder||"asc"}});
return z?.items?(r=z.items.map(w=>{w=v.fromJSON(w);w.portal=this.portal;return w}),await Promise.all(r.map(w=>w.load())),{items:r,nextStart:z.nextStart,total:z.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(z=>z.tags)}getThumbnailUrl(z){let r=this.thumbnailUrl;r&&z&&(r+=`&w=${z}`);return r}queryFavorites(z){return this.favGroupId?(this._favGroup||(this._favGroup=new m({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(z)):Promise.reject(new c("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(z,r){await this.portal.request(this.userContentUrl+`/items/${z.id}/restore`,{method:"post",query:r?{folderID:"string"===typeof r?r:r.id}:null})}toJSON(){throw new c("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(z){if(!z)return null;if(z.declaredClass)throw Error("JSON object is already hydrated");const r=new t({sourceJSON:z});r.read(z);return r}};b.__decorate([e.property()],
f.prototype,"access",void 0);b.__decorate([e.property({type:Date})],f.prototype,"created",void 0);b.__decorate([e.property()],f.prototype,"culture",void 0);b.__decorate([e.property()],f.prototype,"description",void 0);b.__decorate([e.property()],f.prototype,"email",void 0);b.__decorate([e.property()],f.prototype,"favGroupId",void 0);b.__decorate([e.property()],f.prototype,"fullName",void 0);b.__decorate([e.property({type:Date})],f.prototype,"modified",void 0);b.__decorate([e.property()],f.prototype,
"orgId",void 0);b.__decorate([e.property()],f.prototype,"portal",void 0);b.__decorate([e.property()],f.prototype,"preferredView",void 0);b.__decorate([e.property()],f.prototype,"privileges",void 0);b.__decorate([e.property()],f.prototype,"region",void 0);b.__decorate([e.property()],f.prototype,"role",void 0);b.__decorate([e.property()],f.prototype,"roleId",void 0);b.__decorate([e.property()],f.prototype,"sourceJSON",void 0);b.__decorate([e.property()],f.prototype,"thumbnail",void 0);b.__decorate([e.property({readOnly:!0})],
f.prototype,"thumbnailUrl",null);b.__decorate([e.property()],f.prototype,"units",void 0);b.__decorate([e.property({readOnly:!0})],f.prototype,"userContentUrl",null);b.__decorate([e.property({readOnly:!0})],f.prototype,"url",null);b.__decorate([e.property()],f.prototype,"username",void 0);b.__decorate([e.property()],f.prototype,"userLicenseTypeId",void 0);b.__decorate([e.property()],f.prototype,"userType",void 0);return f=t=b.__decorate([h.subclass("esri.portal.PortalUser")],f)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k){c=class extends c.JSONSupport{constructor(h){super(h);this.username=this.title=this.portal=this.id=this.created=null}get url(){const h=this.portal?.restUrl;return h?`${h}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new b("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};a.__decorate([f.property({type:Date})],c.prototype,"created",void 0);a.__decorate([f.property()],c.prototype,"id",void 0);a.__decorate([f.property()],c.prototype,
"portal",void 0);a.__decorate([f.property()],c.prototype,"title",void 0);a.__decorate([f.property({readOnly:!0})],c.prototype,"url",null);a.__decorate([f.property()],c.prototype,"username",void 0);return c=a.__decorate([k.subclass("esri.portal.PortalFolder")],c)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q){var g;const p=new Set("3DTiles Service;CSV;Feature Collection;Feature Service;Feed;GeoJson;Group Layer;Image Service;KML;Map Service;Media Layer;Scene Service;Stream Service;Vector Tile Service;WFS;WMS;WMTS".split(";")),x=new Set(["KML","GeoJson","CSV"]);e=g=class extends e.JSONSupportMixin(d){static from(u){return l.ensureClass(g,u)}constructor(u){super(u);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.classification=
this.categories=this.avgRating=this.applicationProxies=this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const u=this.type,D=this.typeKeywords||
[];let J=u;"Feature Service"===u||"Feature Collection"===u?J=D.includes("Table")?"Table":D.includes("Route Layer")?"Route Layer":D.includes("Markup")?"Markup":"Feature Layer":"Image Service"===u?J=D.includes("Elevation 3D Layer")?"Elevation Layer":D.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===u?J="Scene Layer":"Video Service"===u?J="Video Layer":"Scene Package"===u?J="Scene Layer Package":"Stream Service"===u?J="Feature Layer":"Geoprocessing Service"===u?J=D.includes("Web Tool")?
"Tool":"Geoprocessing Service":"Geoenrichment Service"===u?J="GeoEnrichment Service":"Geocoding Service"===u?J="Locator":"Microsoft Powerpoint"===u?J="Microsoft PowerPoint":"GeoJson"===u?J="GeoJSON":"Globe Service"===u?J="Globe Layer":"Vector Tile Service"===u?J="Tile Layer":"netCDF"===u?J="NetCDF":"Map Service"===u?J=D.includes("Spatiotemporal")||!D.includes("Hosted Service")&&!D.includes("Tiled")||D.includes("Relational")?"Map Image Layer":"Tile Layer":u?.toLowerCase().includes("add in")?J=u.replaceAll(/(add in)/gi,
"Add-In"):"datastore catalog service"===u?J="Big Data File Share":"Compact Tile Package"===u?J="Tile Package (tpkx)":"Raster function template"===u?J="Raster Function Template":"OGCFeatureServer"===u?J="OGC Feature Layer":"web mapping application"===u&&D.includes("configurableApp")?J="Instant App":"Insights Page"===u?J="Insights Report":"Excalibur Imagery Project"===u?J="Excalibur Project":"3DTiles Service"===u?J="3D tiles layer":"3DTiles Package"===u&&(J="3D tiles package");return J}readExtent(u){return u&&
u.length?new z(u[0][0],u[0][1],u[1][0],u[1][1]):null}get iconUrl(){var u=this.type?.toLowerCase()||"";const D=this.typeKeywords||[];var J=!1,E=!1;let L=!1,Q=!1,M=!1,C=!1;J=E=!1;0<u.indexOf("service")||"feature collection"===u||"kml"===u||"wms"===u||"wmts"===u||"wfs"===u?(J=D.includes("Hosted Service"),"feature service"===u||"feature collection"===u||"kml"===u||"wfs"===u?(E=D.includes("Table"),L=D.includes("Route Layer"),Q=D.includes("Markup"),M=D.includes("Spatiotemporal"),C=D.includes("UtilityNetwork"),
u=M&&E?"spatiotemporaltable":E?"table":L?"routelayer":Q?"markup":M?"spatiotemporal":C?"utilitynetwork":J?"featureshosted":"features"):"map service"===u||"wms"===u||"wmts"===u?(M=D.includes("Spatiotemporal"),E=D.includes("Relational"),u=M||E?"mapimages":J||D.includes("Tiled")||"wmts"===u?"maptiles":"mapimages"):u="scene service"===u?D.includes("Line")?"sceneweblayerline":D.includes("3DObject")?"sceneweblayermultipatch":D.includes("Point")?"sceneweblayerpoint":D.includes("IntegratedMesh")?"sceneweblayermesh":
D.includes("PointCloud")?"sceneweblayerpointcloud":D.includes("Polygon")?"sceneweblayerpolygon":D.includes("Building")?"sceneweblayerbuilding":D.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===u?D.includes("Elevation 3D Layer")?"elevationlayer":D.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===u?"streamlayer":"vector tile service"===u?"vectortile":"datastore catalog service"===u?"datastorecollection":"geocoding service"===u?"geocodeservice":"video service"===
u?D.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===u?D.includes("Web Tool")?"tool":"layers":"geodata service"===u?"geodataservice":"3dtiles service"===u?D.includes("3DObject")?"3dobjecttileslayer":D.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):u="web map"===u||"cityengine web scene"===u?"maps":"web scene"===u?D.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===u&&D.includes("configurableApp")?
"instantapps":"web mapping application"===u||"mobile application"===u||"application"===u||"operation view"===u||"desktop application"===u?"apps":"map document"===u||"map package"===u||"published map"===u||"scene document"===u||"globe document"===u||"basemap package"===u||"mobile basemap package"===u||"mobile map package"===u||"project package"===u||"project template"===u||"pro map"===u||"layout"===u||"layer"===u&&D.includes("ArcGIS Pro")||"explorer map"===u&&D.indexOf("Explorer Document")?"mapsgray":
"service definition"===u||"shapefile"===u||"cad drawing"===u||"geojson"===u||"netcdf"===u||"administrative report"===u?"datafiles":"360 vr experience"===u?"360vr":"explorer add in"===u||"desktop add in"===u||"windows viewer add in"===u||"windows viewer configuration"===u?"appsgray":"arcgis pro add in"===u||"arcgis pro configuration"===u?"addindesktop":"pdf"===u?"pdf":"microsoft word"===u?"word":"microsoft excel"===u?"excel":"microsoft powerpoint"===u?"ppt":"rule package"===u||"file geodatabase"===
u||"sqlite geodatabase"===u||"csv collection"===u||"kml collection"===u||"windows mobile package"===u||"map template"===u||"desktop application template"===u||"gml"===u||"arcpad package"===u||"code sample"===u||"document link"===u||"earth configuration"===u||"operations dashboard add in"===u||"rules package"===u||"workflow manager package"===u||"explorer map"===u&&D.includes("Explorer Mapping Application")||D.includes("Document")?"datafilesgray":"network analysis service"===u||"geoprocessing service"===
u||"geodata service"===u||"geometry service"===u||"geoprocessing package"===u||"locator package"===u||"geoprocessing sample"===u||"workflow manager service"===u?"toolsgray":"layer"===u||"layer package"===u||"explorer layer"===u?"layersgray":"analysis model"===u?"analysismodel":"scene package"===u?"scenepackage":"3dtiles package"===u?"3dtileslayerpackage":"3dtiles service"===u?"3dtileslayer":"mobile scene package"===u?"mobilescenepackage":"tile package"===u||"compact tile package"===u?"tilepackage":
"task file"===u?"taskfile":"report template"===u?"report-template":"statistical data collection"===u?"statisticaldatacollection":"insights workbook"===u?"workbook":"insights model"===u?"insightsmodel":"insights page"===u?"insightspage":"insights theme"===u?"insightstheme":"hub initiative"===u?"hubinitiative":"hub page"===u?"hubpage":"hub site application"===u?"hubsite":"hub event"===u?"hubevent":"hub project"===u?"hubproject":"relational database connection"===u?"relationaldatabaseconnection":"big data file share"===
u?"datastorecollection":"image collection"===u?"imagecollection":"desktop style"===u?"desktopstyle":"style"===u?D.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===u?"dashboard":"raster function template"===u?"rasterprocessingtemplate":"vector tile package"===u?"vectortilepackage":"ortho mapping project"===u?"orthomappingproject":"ortho mapping template"===u?"orthomappingtemplate":"solution"===u?"solutions":"geopackage"===u?"geopackage":"deep learning package"===u?"deeplearningpackage":
"real time analytic"===u?"realtimeanalytics":"reality mapping project"===u?"realitymappingproject":"big data analytic"===u?"bigdataanalytics":"feed"===u?"feed":"excalibur imagery project"===u?"excaliburimageryproject":"notebook"===u?"notebook":"storymap"===u?"storymap":"survey123 add in"===u?"survey123addin":"mission"===u?"mission":"mission report"===u?"missionreport":"mission template"===u?"missiontemplate":"quickcapture project"===u?"quickcaptureproject":"pro report"===u?"proreport":"pro report template"===
u?"proreporttemplate":"urban model"===u?"urbanmodel":"urban project"===u?"urbanproject":"web experience"===u?"experiencebuilder":"web experience template"===u?"webexperiencetemplate":"experience builder widget"===u?"experiencebuilderwidget":"experience builder widget package"===u?"experiencebuilderwidgetpackage":"workflow"===u?"workflow":"kernel gateway connection"===u?"kernelgatewayconnection":"insights script"===u?"insightsscript":"hub initiative template"===u?"hubinitiativetemplate":"storymap theme"===
u?"storymaptheme":"knowledge graph"===u?"knowledgegraph":"knowledge graph layer"===u?"knowledgegraphlayer":"knowledge studio project"===u?"knowledgestudio":"native application"===u?"nativeapp":"native application installer"===u?"nativeappinstaller":"web link chart"===u?"linkchart":"knowledge graph web investigation"===u?"investigation":"ogcfeatureserver"===u?"features":"pro presentation"===u?"propresentation":"pro project"===u?"proproject":"insights workbook package"===u?"insightsworkbookpackage":
"apache parquet"===u?"apacheparquet":"notebook code snippet library"===u?"notebookcodesnippets":"suitability model"===u?"suitabilitymodel":"esri classifier definition"===u?"classifierdefinition":"esri classification schema"===u?"classificationschema":"insights data engineering workbook"===u?"dataengineeringworkbook":"insights data engineering model"===u?"dataengineeringmodel":"deep learning studio project"===u?"deeplearningproject":"discussion"===u?"discussion":"allsource project"===u?"allsourceproject":
"api key"===u?"apikey":"data pipeline"===u?"datapipelines":"group layer"===u?(J=D.includes("Map"))?"layergroup2d":"layergroup":"media layer"===u?"onlinemedialayer":"form"===u?D.includes("Survey123")?"survey":"datafilesgray":"csv"===u?"csv":"image"===u?"image":"maps";return u?c.getAssetUrl("esri/images/portal/"+u+"16.png"):null}get isLayer(){return null!=this.type&&p.has(this.type)}get itemCdnUrl(){return q.toCDNUrl(this.itemUrl)}get itemPageUrl(){const u=this.portal?.itemPageUrl;return u&&this.id?
`${u}?id=${this.id}`:null}get itemUrl(){const u=this.portal?.restUrl;return u&&this.id?`${u}/content/items/${this.id}`:null}get thumbnailUrl(){const u=this.itemUrl,D=this.thumbnail;return u&&D?this.portal?.normalizeUrl(`${u}/info/${D}?f=json`)??null:null}get userItemUrl(){const u=this.portal?.restUrl;if(!u)return null;const D=this.owner||this.portal?.user?.username;return D?`${u}/content/users/${this.ownerFolder?`${D}/${this.ownerFolder}`:D}/items/${this.id}`:null}load(u){const D=this.portal??(this.portal=
r.getDefault()),J=D.load(u).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?D.request(this.itemUrl,{signal:null!=u?u.signal:null,query:{token:this.apiKey}}):{}).then(E=>{this.sourceJSON=E;this.read(E)});this.addResolvingPromise(J);return Promise.resolve(this)}async addRating(u){const D={method:"post",query:{}};u instanceof w&&(u=u.rating);null==u||isNaN(u)||"number"!==typeof u||(D.query.rating=u);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",D);return new w({rating:u,
created:new Date})}clone(){var u={access:this.access,accessInformation:this.accessInformation,applicationProxies:n.clone(this.applicationProxies),avgRating:this.avgRating,categories:n.clone(this.categories),classification:n.clone(this.classification),created:n.clone(this.created),culture:this.culture,description:this.description,extent:n.clone(this.extent),groupCategories:n.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:n.clone(this.modified),
name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:n.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:n.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:n.clone(this.typeKeywords),url:this.url};this.loaded&&(u.loadStatus="loaded");u=(new g({sourceJSON:this.sourceJSON})).set(u);
u._set("isOrgItem",this.isOrgItem);return u}createPostQuery(){const u=this.toJSON();for(var D of["tags","typeKeywords","categories"])u[D]=u[D]?.join(", ");for(const J of["extent","classification"])(D=u[J])&&(u[J]=JSON.stringify(D));return u}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(u="json",D){return this.portal.request(this.itemUrl+"/data",{responseType:u,...D,query:{token:this.apiKey}})}async fetchRating(u){u=await this.portal.request(this.itemUrl+
"/rating",{query:{token:this.apiKey},...u});return null!=u.rating?(u.created=new Date(u.created),new w(u)):null}fetchRelatedItems(u,D){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...u,token:this.apiKey},...D},g)}getThumbnailUrl(u){let D=this.thumbnailUrl;D&&u&&(D+=`&w=${u}`);return D}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(u=>{this.applicationProxies&&!Object.hasOwn(u,"appProxies")&&(this.applicationProxies=
null);this.sourceJSON=u;this.read(u);return this})}update(u){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const D=u?.data,J={method:"post"};J.query=this.createPostQuery();for(const E in J.query)null===J.query[E]&&(J.query[E]="");J.query.clearEmptyFields=!0;null!=D&&("string"===typeof D?J.query.text=D:"object"===typeof D&&(J.query.text=JSON.stringify(D)));return this.portal.request(`${this.userItemUrl}/update`,J).then(()=>this.reload())}):Promise.reject(new f("portal:item-does-not-exist",
"The item does not exist yet and cannot be updated"))}async copy(u){if(!this.id)throw new f("portal:item-does-not-exist","The item does not exist yet");await this.load();const {portal:D,itemUrl:J}=this;await D.signIn();const {copyResources:E,folder:L,tags:Q,title:M}=u||{};u={method:"post",query:{copyPrivateResources:"all"===E,folder:"string"===typeof L?L:L?.id,includeResources:!!E,tags:Q?.join(","),title:M}};({itemId:u}=await D.request(`${J}/copy`,u));return new g({id:u,portal:D})}updateThumbnail(u){return this.id?
this.load().then(()=>this.portal.signIn()).then(()=>{const D=u.thumbnail,J=u.filename,E={method:"post"};if("string"===typeof D)k.isDataProtocol(D)?E.query={data:D}:E.query={url:k.makeAbsolute(D)},null!=J&&(E.query.filename=J);else{const L=new FormData;null!=J?L.append("file",D,J):L.append("file",D);E.body=L}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,E).then(()=>this.reload())}):Promise.reject(new f("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(u=
{},D){const {fetchResources:J}=await new Promise((E,L)=>a(["./support/resourceUtils"],E,L));return J(this,u,D)}async addResource(u,D,J){const {addOrUpdateResources:E}=await new Promise((L,Q)=>a(["./support/resourceUtils"],L,Q));u.portalItem=this;await E(this,[{resource:u,content:D,compress:J?.compress,access:J?.access}],"add",J);return u}async removeResource(u,D){const {removeResource:J}=await new Promise((E,L)=>a(["./support/resourceUtils"],E,L));if(u.portalItem&&u.portalItem.itemUrl!==this.itemUrl)throw new f("removeresource:portal-item-mismatch",
"The portal item associated with the provided resource does not match the item");return J(this,u,D)}async removeAllResources(u){const {removeAllResources:D}=await new Promise((J,E)=>a(["./support/resourceUtils"],J,E));return D(this,u)}resourceFromPath(u){return new v({portalItem:this,path:u})}toJSON(){var u=this.extent;u={accessInformation:this.accessInformation,categories:n.clone(this.categories),classification:n.clone(this.classification),created:this.created?.getTime(),description:this.description,
extent:u&&[[u.xmin,u.ymin],[u.xmax,u.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:n.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:n.clone(this.typeKeywords),url:this.url};return n.fixJson(u)}static fromJSON(u){if(!u)return null;if(u.declaredClass)throw Error("JSON object is already hydrated");
return new g({sourceJSON:u})}_getPostQuery(){const u=this.toJSON();for(const D in u)"tags"===D&&null!==u[D]&&(u[D]=u[D].join(", ")),"typeKeywords"===D&&null!==u[D]&&(u[D]=u[D].join(", ")),"extent"===D&&u[D]&&(u[D]=JSON.stringify(u[D]));return u}};b.__decorate([h.property({type:["private","shared","org","public"]})],e.prototype,"access",void 0);b.__decorate([h.property()],e.prototype,"accessInformation",void 0);b.__decorate([h.property({type:String})],e.prototype,"apiKey",void 0);b.__decorate([h.property({json:{read:{source:"appProxies"}}})],
e.prototype,"applicationProxies",void 0);b.__decorate([h.property()],e.prototype,"avgRating",void 0);b.__decorate([h.property()],e.prototype,"categories",void 0);b.__decorate([h.property()],e.prototype,"classification",void 0);b.__decorate([h.property({type:Date})],e.prototype,"created",void 0);b.__decorate([h.property()],e.prototype,"culture",void 0);b.__decorate([h.property()],e.prototype,"description",void 0);b.__decorate([h.property({readOnly:!0})],e.prototype,"displayName",null);b.__decorate([h.property({type:z})],
e.prototype,"extent",void 0);b.__decorate([m.reader("extent")],e.prototype,"readExtent",null);b.__decorate([h.property()],e.prototype,"groupCategories",void 0);b.__decorate([h.property({readOnly:!0})],e.prototype,"iconUrl",null);b.__decorate([h.property()],e.prototype,"id",void 0);b.__decorate([h.property({readOnly:!0})],e.prototype,"isLayer",null);b.__decorate([h.property({type:Boolean,readOnly:!0})],e.prototype,"isOrgItem",void 0);b.__decorate([h.property()],e.prototype,"itemControl",void 0);b.__decorate([h.property({readOnly:!0})],
e.prototype,"itemPageUrl",null);b.__decorate([h.property({readOnly:!0})],e.prototype,"itemUrl",null);b.__decorate([h.property()],e.prototype,"licenseInfo",void 0);b.__decorate([h.property({type:Date})],e.prototype,"modified",void 0);b.__decorate([h.property()],e.prototype,"name",void 0);b.__decorate([h.property()],e.prototype,"numComments",void 0);b.__decorate([h.property()],e.prototype,"numRatings",void 0);b.__decorate([h.property()],e.prototype,"numViews",void 0);b.__decorate([h.property()],e.prototype,
"owner",void 0);b.__decorate([h.property()],e.prototype,"ownerFolder",void 0);b.__decorate([h.property({type:r})],e.prototype,"portal",void 0);b.__decorate([h.property()],e.prototype,"screenshots",void 0);b.__decorate([h.property()],e.prototype,"size",void 0);b.__decorate([h.property()],e.prototype,"snippet",void 0);b.__decorate([h.property()],e.prototype,"sourceJSON",void 0);b.__decorate([h.property({type:String})],e.prototype,"sourceUrl",void 0);b.__decorate([h.property({type:String})],e.prototype,
"spatialReference",void 0);b.__decorate([h.property()],e.prototype,"tags",void 0);b.__decorate([h.property()],e.prototype,"thumbnail",void 0);b.__decorate([h.property({readOnly:!0})],e.prototype,"thumbnailUrl",null);b.__decorate([h.property()],e.prototype,"title",void 0);b.__decorate([h.property()],e.prototype,"type",void 0);b.__decorate([h.property()],e.prototype,"typeKeywords",void 0);b.__decorate([h.property({type:String,json:{read(u,D){x.has(D.type)&&(D=this.portal?.restUrl,u||=D&&this.id?`${D}/content/items/${this.id}/data`:
null);return u}}})],e.prototype,"url",void 0);b.__decorate([h.property({readOnly:!0})],e.prototype,"userItemUrl",null);return e=g=b.__decorate([t.subclass("esri.portal.PortalItem")],e)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){function t(z,r){if(null==z)return z;z=z.replace(/^\/+/,"");null!=r&&n.isAbsolute(z)&&(z=n.makeRelative(z,r.itemUrl));return z?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}c=class extends c{constructor(z){super(z);this.portalItem=null}normalizeCtorArgs(z){return z?.portalItem&&z.path?{...z,path:t(z.path,z.portalItem)}:z}set path(z){null!=z&&n.isAbsolute(z)?e.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):
this._set("path",z)}_castPath(z){return t(z,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(z="json",r){const v=this.cdnUrl;if(null==v)throw new f("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal.request(v,{responseType:z,query:{token:this.portalItem.apiKey,_ts:r?.cacheBust?Date.now():null},signal:r?.signal})}async update(z,r){const {addOrUpdateResources:v}=await new Promise((w,q)=>a(["./support/resourceUtils"],w,q));await v(this.portalItem,[{resource:this,content:z,compress:r?.compress,access:r?.access}],"update",r);return this}hasPath(){return null!=this.path}};b.__decorate([d.property()],c.prototype,"portalItem",void 0);b.__decorate([d.property({type:String,
value:null})],c.prototype,"path",null);b.__decorate([k.cast("path")],c.prototype,"_castPath",null);b.__decorate([d.property({type:String,readOnly:!0})],c.prototype,"url",null);b.__decorate([d.property({type:String,readOnly:!0})],c.prototype,"cdnUrl",null);b.__decorate([d.property({type:String,readOnly:!0})],c.prototype,"itemRelativeUrl",null);return c=b.__decorate([m.subclass("esri.portal.PortalItemResource")],c)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){b=class extends b{constructor(k){super(k);this.rating=this.created=null}};a.__decorate([c.property()],b.prototype,"created",void 0);a.__decorate([c.property()],b.prototype,"rating",void 0);return b=a.__decorate([d.subclass("esri.portal.PortalRating")],b)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(a,b,c,f){function e(g,p){var x=p?.url?.path;g&&x&&(g=c.makeAbsolute(g,x,{preserveProtocolRelative:!0}),
p.portalItem&&p.readResourcePaths&&(x=c.makeRelative(g,p.portalItem.itemUrl),null!=x&&w.test(x)&&p.readResourcePaths.push(p.portalItem.resourceFromPath(x).path)));return(g=t(g,p?.portal))&&v.test(g)?z(g):g}function n(g,p,x=a.MarkKeep.YES){g=g&&v.test(g)?r(g):g;if(null==g)return g;!c.isAbsolute(g)&&p?.blockedRelativeUrls&&p.blockedRelativeUrls.push(g);let u=c.makeAbsolute(g);if(p){var D=p.verifyItemRelativeUrls?.rootPath||p.url?.path;if(D){D=t(D,p.portal);const J=t(u,p.portal);u=c.makeRelative(J,D,
D);null!=u&&u!==J&&u!==g&&p.verifyItemRelativeUrls&&p.verifyItemRelativeUrls.writtenUrls.push(u)}}u=m(u,p?.portal);c.isAbsolute(u)&&(u=c.normalize(u));p?.resources&&p?.portalItem&&!c.isAbsolute(u)&&!c.isDataProtocol(u)&&x===a.MarkKeep.YES&&p.resources.toKeep.push({resource:p.portalItem.resourceFromPath(u),compress:!1});return u}function d(g,p,x){return e(g,x)}function k(g,p,x,u){g=n(g,u);void 0!==g&&(p[x]=g)}function h(g){return(g?.match(v)??null)?.[1]??null}function l(g){g=g?.match(v)??null;if(null==
g)return null;g=g[2];const p=g.lastIndexOf("/");if(-1===p){const {path:D,extension:J}=c.splitPathExtension(g);return{prefix:null,filename:D,extension:J}}const {path:x,extension:u}=c.splitPathExtension(g.slice(p+1));return{prefix:g.slice(0,p),filename:x,extension:u}}function m(g,p){return p&&!p.isPortal&&p.urlKey&&p.customBaseUrl?c.changeDomain(g,`${p.urlKey}.${p.customBaseUrl}`,p.portalHostname):g}function t(g,p){if(!p||p.isPortal||!p.urlKey||!p.customBaseUrl)return g;const x=`${p.urlKey}.${p.customBaseUrl}`,
u=c.getAppUrl();return c.hasSameOrigin(u,`${u.scheme}://${x}`)?c.changeDomain(g,p.portalHostname,x):c.changeDomain(g,x,p.portalHostname)}function z(g){if(!g)return g||null;g&&b.id&&!b.id.findCredential(g)&&(g=f.normalizeArcGISOnlineOrgDomain(g),g=g.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),g=g.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),g=g.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return g}function r(g){if(!g)return g||
null;g=g.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");g=g.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(g=g.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&b.id&&!b.id.findCredential(g)&&(g=f.normalizeArcGISOnlineOrgDomain(g));return g}const v=/\/items\/([^/]+)\/resources\/(.*)/,w=/^\.\/resources\//;a.MarkKeep=void 0;(function(g){g[g.YES=0]="YES";g[g.NO=1]="NO"})(a.MarkKeep||(a.MarkKeep={}));const q=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return a.MarkKeep},ensureMainOnlineDomain:m,fromCDNUrl:r,fromJSON:e,itemIdFromResourceUrl:h,prefixAndFilenameFromResourceUrl:l,read:d,toCDNUrl:z,toJSON:n,write:k},Symbol.toStringTag,{value:"Module"}));a.ensureMainOnlineDomain=m;a.fromCDNUrl=r;a.fromJSON=e;a.itemIdFromResourceUrl=h;a.persistableUrlUtils=q;a.prefixAndFilenameFromResourceUrl=l;a.read=d;a.toCDNUrl=z;a.toJSON=n;a.write=k})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(a,
b,c){a.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",
layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},
{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return b.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};a.getBasemapTitle=async function(f){if(f){var e=f.includes("-vector")?f.slice(0,f.indexOf("-vector")):
f.includes("-3d")?f.slice(0,f.indexOf("-3d")):f,n=await c.fetchMessageBundle("esri/t9n/basemaps");return n[f]||n[e]}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(a,b,c,f,e,n,d,k){const h=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
b=class extends b{constructor(l){super(l);this.places=this.language=this.id=this.apiKey=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var l=k.getLocale().toLowerCase();switch(l){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}l=k.getLanguage(l);return"pt"===l?"pt-BR":l&&h.has(l)?
l:"global"}};a.__decorate([c.property()],b.prototype,"apiKey",void 0);a.__decorate([c.property()],b.prototype,"id",void 0);a.__decorate([c.property()],b.prototype,"language",void 0);a.__decorate([c.property()],b.prototype,"places",void 0);a.__decorate([c.property()],b.prototype,"serviceUrl",void 0);a.__decorate([c.property()],b.prototype,"worldview",void 0);return b=a.__decorate([d.subclass("esri.support.BasemapStyle")],b)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(a,b,c,f,e,n){function d(l,m){"maxScale"in l&&(m.maxScale=e.numberToJSON(l.maxScale)??void 0);"minScale"in l&&(m.minScale=e.numberToJSON(l.minScale)??void 0)}const k=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),h=new Set("catalog csv feature geo-rss geojson group imagery imagery-tile kml knowledge-graph map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
a.disableRestrictedWriting=function(l){k.add(l);h.add(l)};a.enableRestrictedWriting=function(l){k.delete(l);h.delete(l)};a.getLayerJSON=function(l,m,t){if(!l.persistenceEnabled)return null;if(!("write"in l&&l.write))return t?.messages&&t.messages.push(new b("layer:unsupported",`Layers (${l.title}, ${l.id}) of type '${l.declaredClass}' cannot be persisted`,{layer:l})),null;if(n.isFeatureCollectionLayer(l)&&!l.isTable)m=l.resourceInfo;else{if(t.restrictedWebMapWriting){var z="basemap"===t.layerContainerType?
k:"operational-layers"===t.layerContainerType?h:null;z=null!=z?z.has(l.type)&&!n.isFeatureCollectionLayer(l):!0}else z=!0;if(z)return m={},l.write(m,t)?m:null}if(null!=m){m=c.clone(m);if(t=m)n.isFeatureCollectionLayer(l)?(z=f.getDeepValue("featureCollection.layers",t)?.[0]?.layerDefinition)&&d(l,z):"group"!==l.type&&d(l,t);if(t&&(t.id=l.id,"blendMode"in l&&(t.blendMode=l.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=e.numberToJSON(l.opacity)??void 0,t.title=l.title||"Layer",t.visibility=
l.visible,"legendEnabled"in l&&"wmts"!==l.type))if(n.isFeatureCollectionLayer(l)){if(t=t.featureCollection)t.showLegend=l.legendEnabled}else t.showLegend=l.legendEnabled}return m};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(a,b,c){function f(d){return"scene"===d?.type}function e(d){return null!=d&&"object"===typeof d&&"type"in d&&"subtype-group"===d.type&&"sublayers"in d}function n(d){d=
d?.type;return"imagery-tile"===d||"tile"===d||"open-street-map"===d||"vector-tile"===d||"web-tile"===d||"wmts"===d}a.getEffectiveEditingEnabled=function(d){a:if("editingEnabled"in d)switch(d.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var k=!0;break a;default:k=!1}else k=!1;return k?"effectiveEditingEnabled"in d?d.effectiveEditingEnabled:d.editingEnabled:!1};a.getEffectiveLayerCapabilities=function(d){a:if("capabilities"in
d)switch(d.type){case "catalog":case "catalog-footprint":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "sublayer":case "subtype-group":case "subtype-sublayer":case "wfs":var k=!0;break a;default:k=!1}else k=!1;return k?"effectiveCapabilities"in d?d.effectiveCapabilities:d.capabilities:null};a.getOwningPortalUrl=async function(d,k){var h=b.id?.findServerInfo(d);if(null!=h?.currentVersion)return h.owningSystemUrl||
null;h=d.toLowerCase().indexOf("/rest/services");if(-1===h)return null;d=`${d.slice(0,h)}/rest/info`;({data:k}=await c(d,{query:{f:"json"},responseType:"json",signal:null!=k?k.signal:null}));return k?.owningSystemUrl||null};a.getSubtypesFromLayer=function(d){return d?("subtypes"in d?d.subtypes:e(d.parent)?d.parent.subtypes:[])??[]:[]};a.getTileMaxtrixSetFromActiveLayer=function(d){if(d.activeLayer){const k=d.activeLayer.tileMatrixSet;if(k)return k;if(d=d.activeLayer.tileMatrixSets)return d}return null};
a.isBaseLayer=function(d){return null!=d?.parent&&"declaredClass"in d.parent&&"esri.Basemap"===d.parent.declaredClass&&d.parent.baseLayers.includes(d)};a.isBasemap3DSupportedLayer=function(d){return n(d)||f(d)};a.isBasemapSupportedTiledLayer=n;a.isFeatureCollectionLayer=function(d){return"feature"===d?.type&&!d.url&&"memory"===d.source?.type};a.isFeatureLayer=function(d){return null!=d&&"object"===typeof d&&"type"in d&&"feature"===d.type};a.isFeatureServiceLayer=function(d){return"feature"===d?.type&&
"feature-layer"===d.source?.type};a.isGraphicsLayer=function(d){return null!=d&&"object"===typeof d&&"type"in d&&"graphics"===d.type};a.isGroupLayer=function(d){return null!=d&&"type"in d&&"group"===d.type};a.isImageryTileLayer=function(d){return"imagery-tile"===d?.type};a.isIntegratedMeshLayer=function(d){return"integrated-mesh"===d||"integrated-mesh-3dtiles"===d};a.isIntegratedMeshOperationalLayer=function(d){return"IntegratedMeshLayer"===d||"IntegratedMesh3DTilesLayer"===d};a.isKnowledgeGraphLayer=
function(d){return null!=d&&"object"===typeof d&&"type"in d&&"knowledge-graph"===d.type&&"layers"in d};a.isLayerWithFeatureLayerSource=function(d){const k=d?.type;return("feature"===k||"subtype-group"===k||"oriented-imagery"===k)&&"feature-layer"===d.source?.type};a.isLinkChartLayer=function(d){return null!=d&&"object"===typeof d&&"type"in d&&"link-chart"===d.type&&"layers"in d};a.isMapNotesLayer=function(d){return null!=d&&"object"===typeof d&&"type"in d&&"map-notes"===d.type&&"sublayers"in d};a.isSceneLayer=
f;a.isSceneServiceLayer=function(d){d=d?.type;return"building-scene"===d||"integrated-mesh"===d||"point-cloud"===d||"scene"===d};a.isSubtypeGroupLayer=e;a.isSubtypeSublayer=function(d){return"subtype-sublayer"===d?.type};a.isTable=function(d){return null!=d&&"object"===typeof d&&"isTable"in d&&!!d.isTable};a.isTiledLayer=function(d){d=d?.type;return"base-tile"===d||"tile"===d||"elevation"===d||"imagery-tile"===d||"base-elevation"===d||"open-street-map"===d||"wcs"===d||"web-tile"===d||"wmts"===d||
"vector-tile"===d};a.isVoxelLayer=function(d){return"voxel"===d?.type};a.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};a.serializeLayerDefinitions=function(d){const k=/[:;]/,h=[];let l=!1;if(d&&(d.forEach((m,t)=>{h.push([t,m]);!l&&k.test(m)&&(l=!0)}),0<h.length)){if(l){const m={};h.forEach(t=>{m[t[0]]=t[1]});d=JSON.stringify(m)}else{const m=[];h.forEach(t=>{m.push(t[0]+":"+
t[1])});d=m.join(";")}return d}return null};a.serializeTimeOptions=function(d){if(d){var k=[];d.forEach((h,l)=>{k.push('"'+l+'":'+JSON.stringify(h))});if(k.length)return"{"+k.join(",")+"}"}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(a,b){a.canInterpolateEffects=function(c,f){const e=c.length>f.length?c:f;return(c.length>f.length?f:c).every((n,d)=>n.type===e[d].type)};a.effectEquals=function(c,f){c=
JSON.stringify(c??null);f=JSON.stringify(f??null);return c===f};a.isEffectFunctions=function(c){return(c=c[0])?"type"in c:!1};a.normalizeEffects=function(c,f){const e=c.length>f.length?c:f;c=c.length>f.length?f:c;for(f=c.length;f<e.length;f++)c.push(b.createEffectWithInitialValues(e[f]))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32",
"./colorMatrixFunctions"],function(a,b,c,f,e){function n(r,v,w){return r+(v-r)*w}function d(r){return Math.round(1E3*c.px2pt(r))/1E3}class k{constructor(r,v,w){this.strength=r;this.radius=v;this.threshold=w;this.type="bloom"}interpolate(r,v,w){this.strength=n(r.strength,v.strength,w);this.radius=n(r.radius,v.radius,w);this.threshold=n(r.threshold,v.threshold,w)}clone(){return new k(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:d(this.radius),strength:this.strength,
threshold:this.threshold}}}class h{constructor(r){this.radius=r;this.type="blur"}interpolate(r,v,w){this.radius=Math.round(n(r.radius,v.radius,w))}clone(){return new h(this.radius)}toJSON(){return{type:"blur",radius:d(this.radius)}}}class l{constructor(r,v){this.type=r;this.amount=v;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(r,v,w){this.amount=
n(r.amount,v.amount,w);this._updateMatrix()}clone(){return new l(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const r=this._colorMatrix||f.create();switch(this.type){case "brightness":this._colorMatrix=e.brightness(r,this.amount);break;case "contrast":this._colorMatrix=e.contrast(r,this.amount);break;case "grayscale":this._colorMatrix=e.grayscale(r,this.amount);break;case "invert":this._colorMatrix=e.invert(r,this.amount);break;case "saturate":this._colorMatrix=
e.saturate(r,this.amount);break;case "sepia":this._colorMatrix=e.sepia(r,this.amount)}}}class m{constructor(r,v,w,q){this.offsetX=r;this.offsetY=v;this.blurRadius=w;this.color=q;this.type="drop-shadow"}interpolate(r,v,w){this.offsetX=n(r.offsetX,v.offsetX,w);this.offsetY=n(r.offsetY,v.offsetY,w);this.blurRadius=n(r.blurRadius,v.blurRadius,w);this.color[0]=Math.round(n(r.color[0],v.color[0],w));this.color[1]=Math.round(n(r.color[1],v.color[1],w));this.color[2]=Math.round(n(r.color[2],v.color[2],w));
this.color[3]=n(r.color[3],v.color[3],w)}clone(){return new m(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const r=[...this.color];r[3]*=255;return{type:"drop-shadow",xoffset:d(this.offsetX),yoffset:d(this.offsetY),blurRadius:d(this.blurRadius),color:r}}}class t{constructor(r){this.angle=r;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(r,v,w){this.angle=n(r.angle,v.angle,w);this._updateMatrix()}clone(){return new t(this.angle)}toJSON(){return{type:"hue-rotate",
angle:this.angle}}_updateMatrix(){const r=this._colorMatrix||f.create();this._colorMatrix=e.rotateHue(r,this.angle)}}class z{constructor(r){this.amount=r;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(r,v,w){this.amount=n(r.amount,v.amount,w)}clone(){return new z(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}a.BloomEffect=k;a.BlurEffect=h;a.ColorMatrixEffect=l;a.DropShadowEffect=m;a.HueRotateEffect=t;a.OpacityEffect=z;a.createEffectWithInitialValues=function(r){switch(r.type){case "grayscale":case "sepia":case "invert":return new l(r.type,
0);case "saturate":case "brightness":case "contrast":return new l(r.type,1);case "opacity":return new z(1);case "hue-rotate":return new t(0);case "blur":return new h(0);case "drop-shadow":return new m(0,0,0,[...b.getNamedColor("transparent")]);case "bloom":return new k(0,0,1)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(a){function b(){const k=new Float32Array(16);k[0]=1;k[5]=1;k[10]=1;k[15]=
1;return k}function c(k){const h=new Float32Array(16);h[0]=k[0];h[1]=k[1];h[2]=k[2];h[3]=k[3];h[4]=k[4];h[5]=k[5];h[6]=k[6];h[7]=k[7];h[8]=k[8];h[9]=k[9];h[10]=k[10];h[11]=k[11];h[12]=k[12];h[13]=k[13];h[14]=k[14];h[15]=k[15];return h}function f(k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J){const E=new Float32Array(16);E[0]=k;E[1]=h;E[2]=l;E[3]=m;E[4]=t;E[5]=z;E[6]=r;E[7]=v;E[8]=w;E[9]=q;E[10]=g;E[11]=p;E[12]=x;E[13]=u;E[14]=D;E[15]=J;return E}function e(k,h){return new Float32Array(k,h,16)}const n=b(),d=Object.freeze(Object.defineProperty({__proto__:null,
IDENTITY:n,clone:c,create:b,createView:e,fromValues:f},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=n;a.clone=c;a.create=b;a.createView=e;a.fromValues=f;a.mat4f32=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(a,b){a.brightness=(c,f)=>{c=b.set(c,f,0,0,0,0,f,0,0,0,0,f,0,0,0,0,1);return b.transpose(c,c)};a.contrast=(c,f)=>{c=b.set(c,f,0,0,.5-.5*f,0,f,0,.5-
.5*f,0,0,f,.5-.5*f,0,0,0,1);return b.transpose(c,c)};a.grayscale=(c,f)=>{f=1-f;c=b.set(c,.2126+.7874*f,.7152-.7152*f,.0722-.0722*f,0,.2126-.2126*f,.7152+.2848*f,.0722-.0722*f,0,.2126-.2126*f,.7152-.7152*f,.0722+.9278*f,0,0,0,0,1);return b.transpose(c,c)};a.invert=(c,f)=>{const e=1-2*f;c=b.set(c,e,0,0,f,0,e,0,f,0,0,e,f,0,0,0,1);return b.transpose(c,c)};a.rotateHue=(c,f)=>{const e=Math.sin(f*Math.PI/180);f=Math.cos(f*Math.PI/180);c=b.set(c,.213+.787*f-.213*e,.715-.715*f-.715*e,.072-.072*f+.928*e,0,
.213-.213*f+.143*e,.715+.285*f+.14*e,.072-.072*f-.283*e,0,.213-.213*f-.787*e,.715-.715*f+.715*e,.072+.928*f+.072*e,0,0,0,0,1);return b.transpose(c,c)};a.saturate=(c,f)=>{c=b.set(c,.213+.787*f,.715-.715*f,.072-.072*f,0,.213-.213*f,.715+.285*f,.072-.072*f,0,.213-.213*f,.715-.715*f,.072+.928*f,0,0,0,0,1);return b.transpose(c,c)};a.sepia=(c,f)=>{f=1-f;c=b.set(c,.393+.607*f,.769-.769*f,.189-.189*f,0,.349-.349*f,.686+.314*f,.168-.168*f,0,.272-.272*f,.534-.534*f,.131+.869*f,0,0,0,0,1);return b.transpose(c,
c)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(a,b,c){function f(A,F){A[0]=F[0];A[1]=F[1];A[2]=F[2];A[3]=F[3];A[4]=F[4];A[5]=F[5];A[6]=F[6];A[7]=F[7];A[8]=F[8];A[9]=F[9];A[10]=F[10];A[11]=F[11];A[12]=F[12];A[13]=F[13];A[14]=F[14];A[15]=F[15];return A}function e(A,F,O,ba,na,P,W,ea,ra,ja,oa,qa,sa,ua,ya,wa,Aa){A[0]=F;A[1]=O;A[2]=ba;A[3]=na;A[4]=P;A[5]=W;A[6]=ea;A[7]=ra;
A[8]=ja;A[9]=oa;A[10]=qa;A[11]=sa;A[12]=ua;A[13]=ya;A[14]=wa;A[15]=Aa;return A}function n(A){A[0]=1;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=1;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=1;A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function d(A,F){if(A===F){const O=F[1],ba=F[2],na=F[3],P=F[6],W=F[7],ea=F[11];A[1]=F[4];A[2]=F[8];A[3]=F[12];A[4]=O;A[6]=F[9];A[7]=F[13];A[8]=ba;A[9]=P;A[11]=F[14];A[12]=na;A[13]=W;A[14]=ea}else A[0]=F[0],A[1]=F[4],A[2]=F[8],A[3]=F[12],A[4]=F[1],A[5]=F[5],A[6]=F[9],A[7]=F[13],A[8]=
F[2],A[9]=F[6],A[10]=F[10],A[11]=F[14],A[12]=F[3],A[13]=F[7],A[14]=F[11],A[15]=F[15];return A}function k(A,F){h(A,F)||n(A);return A}function h(A,F){const O=F[0],ba=F[1],na=F[2],P=F[3],W=F[4],ea=F[5],ra=F[6],ja=F[7],oa=F[8],qa=F[9],sa=F[10],ua=F[11],ya=F[12],wa=F[13],Aa=F[14];F=F[15];const Ca=O*ea-ba*W,Ea=O*ra-na*W,Da=O*ja-P*W,Ia=ba*ra-na*ea,Ha=ba*ja-P*ea,Ja=na*ja-P*ra,Na=oa*wa-qa*ya,La=oa*Aa-sa*ya,$a=oa*F-ua*ya,Oa=qa*Aa-sa*wa,Ma=qa*F-ua*wa,Ka=sa*F-ua*Aa;let xa=Ca*Ka-Ea*Ma+Da*Oa+Ia*$a-Ha*La+Ja*Na;
if(!xa)return null;xa=1/xa;A[0]=(ea*Ka-ra*Ma+ja*Oa)*xa;A[1]=(na*Ma-ba*Ka-P*Oa)*xa;A[2]=(wa*Ja-Aa*Ha+F*Ia)*xa;A[3]=(sa*Ha-qa*Ja-ua*Ia)*xa;A[4]=(ra*$a-W*Ka-ja*La)*xa;A[5]=(O*Ka-na*$a+P*La)*xa;A[6]=(Aa*Da-ya*Ja-F*Ea)*xa;A[7]=(oa*Ja-sa*Da+ua*Ea)*xa;A[8]=(W*Ma-ea*$a+ja*Na)*xa;A[9]=(ba*$a-O*Ma-P*Na)*xa;A[10]=(ya*Ha-wa*Da+F*Ca)*xa;A[11]=(qa*Da-oa*Ha-ua*Ca)*xa;A[12]=(ea*La-W*Oa-ra*Na)*xa;A[13]=(O*Oa-ba*La+na*Na)*xa;A[14]=(wa*Ea-ya*Ia-Aa*Ca)*xa;A[15]=(oa*Ia-qa*Ea+sa*Ca)*xa;return A}function l(A,F){const O=
F[0],ba=F[1],na=F[2],P=F[3],W=F[4],ea=F[5],ra=F[6],ja=F[7],oa=F[8],qa=F[9],sa=F[10],ua=F[11],ya=F[12],wa=F[13],Aa=F[14];F=F[15];A[0]=ea*(sa*F-ua*Aa)-qa*(ra*F-ja*Aa)+wa*(ra*ua-ja*sa);A[1]=-(ba*(sa*F-ua*Aa)-qa*(na*F-P*Aa)+wa*(na*ua-P*sa));A[2]=ba*(ra*F-ja*Aa)-ea*(na*F-P*Aa)+wa*(na*ja-P*ra);A[3]=-(ba*(ra*ua-ja*sa)-ea*(na*ua-P*sa)+qa*(na*ja-P*ra));A[4]=-(W*(sa*F-ua*Aa)-oa*(ra*F-ja*Aa)+ya*(ra*ua-ja*sa));A[5]=O*(sa*F-ua*Aa)-oa*(na*F-P*Aa)+ya*(na*ua-P*sa);A[6]=-(O*(ra*F-ja*Aa)-W*(na*F-P*Aa)+ya*(na*ja-P*
ra));A[7]=O*(ra*ua-ja*sa)-W*(na*ua-P*sa)+oa*(na*ja-P*ra);A[8]=W*(qa*F-ua*wa)-oa*(ea*F-ja*wa)+ya*(ea*ua-ja*qa);A[9]=-(O*(qa*F-ua*wa)-oa*(ba*F-P*wa)+ya*(ba*ua-P*qa));A[10]=O*(ea*F-ja*wa)-W*(ba*F-P*wa)+ya*(ba*ja-P*ea);A[11]=-(O*(ea*ua-ja*qa)-W*(ba*ua-P*qa)+oa*(ba*ja-P*ea));A[12]=-(W*(qa*Aa-sa*wa)-oa*(ea*Aa-ra*wa)+ya*(ea*sa-ra*qa));A[13]=O*(qa*Aa-sa*wa)-oa*(ba*Aa-na*wa)+ya*(ba*sa-na*qa);A[14]=-(O*(ea*Aa-ra*wa)-W*(ba*Aa-na*wa)+ya*(ba*ra-na*ea));A[15]=O*(ea*sa-ra*qa)-W*(ba*sa-na*qa)+oa*(ba*ra-na*ea);return A}
function m(A){const F=A[0],O=A[1],ba=A[2],na=A[3],P=A[4],W=A[5],ea=A[6],ra=A[7],ja=A[8],oa=A[9],qa=A[10],sa=A[11],ua=A[12],ya=A[13],wa=A[14];A=A[15];return(F*W-O*P)*(qa*A-sa*wa)-(F*ea-ba*P)*(oa*A-sa*ya)+(F*ra-na*P)*(oa*wa-qa*ya)+(O*ea-ba*W)*(ja*A-sa*ua)-(O*ra-na*W)*(ja*wa-qa*ua)+(ba*ra-na*ea)*(ja*ya-oa*ua)}function t(A,F,O){const ba=F[0],na=F[1],P=F[2],W=F[3],ea=F[4],ra=F[5],ja=F[6],oa=F[7],qa=F[8],sa=F[9],ua=F[10],ya=F[11],wa=F[12],Aa=F[13],Ca=F[14];F=F[15];let Ea=O[0],Da=O[1],Ia=O[2],Ha=O[3];A[0]=
Ea*ba+Da*ea+Ia*qa+Ha*wa;A[1]=Ea*na+Da*ra+Ia*sa+Ha*Aa;A[2]=Ea*P+Da*ja+Ia*ua+Ha*Ca;A[3]=Ea*W+Da*oa+Ia*ya+Ha*F;Ea=O[4];Da=O[5];Ia=O[6];Ha=O[7];A[4]=Ea*ba+Da*ea+Ia*qa+Ha*wa;A[5]=Ea*na+Da*ra+Ia*sa+Ha*Aa;A[6]=Ea*P+Da*ja+Ia*ua+Ha*Ca;A[7]=Ea*W+Da*oa+Ia*ya+Ha*F;Ea=O[8];Da=O[9];Ia=O[10];Ha=O[11];A[8]=Ea*ba+Da*ea+Ia*qa+Ha*wa;A[9]=Ea*na+Da*ra+Ia*sa+Ha*Aa;A[10]=Ea*P+Da*ja+Ia*ua+Ha*Ca;A[11]=Ea*W+Da*oa+Ia*ya+Ha*F;Ea=O[12];Da=O[13];Ia=O[14];Ha=O[15];A[12]=Ea*ba+Da*ea+Ia*qa+Ha*wa;A[13]=Ea*na+Da*ra+Ia*sa+Ha*Aa;A[14]=
Ea*P+Da*ja+Ia*ua+Ha*Ca;A[15]=Ea*W+Da*oa+Ia*ya+Ha*F;return A}function z(A,F,O){const ba=O[0],na=O[1];O=O[2];if(F===A)A[12]=F[0]*ba+F[4]*na+F[8]*O+F[12],A[13]=F[1]*ba+F[5]*na+F[9]*O+F[13],A[14]=F[2]*ba+F[6]*na+F[10]*O+F[14],A[15]=F[3]*ba+F[7]*na+F[11]*O+F[15];else{const P=F[0],W=F[1],ea=F[2],ra=F[3],ja=F[4],oa=F[5],qa=F[6],sa=F[7],ua=F[8],ya=F[9],wa=F[10],Aa=F[11];A[0]=P;A[1]=W;A[2]=ea;A[3]=ra;A[4]=ja;A[5]=oa;A[6]=qa;A[7]=sa;A[8]=ua;A[9]=ya;A[10]=wa;A[11]=Aa;A[12]=P*ba+ja*na+ua*O+F[12];A[13]=W*ba+oa*
na+ya*O+F[13];A[14]=ea*ba+qa*na+wa*O+F[14];A[15]=ra*ba+sa*na+Aa*O+F[15]}return A}function r(A,F,O){const ba=O[0],na=O[1];O=O[2];A[0]=F[0]*ba;A[1]=F[1]*ba;A[2]=F[2]*ba;A[3]=F[3]*ba;A[4]=F[4]*na;A[5]=F[5]*na;A[6]=F[6]*na;A[7]=F[7]*na;A[8]=F[8]*O;A[9]=F[9]*O;A[10]=F[10]*O;A[11]=F[11]*O;A[12]=F[12];A[13]=F[13];A[14]=F[14];A[15]=F[15];return A}function v(A,F,O,ba){var na=ba[0],P=ba[1];ba=ba[2];var W=Math.sqrt(na*na+P*P+ba*ba);if(W<=c.getEpsilon())f(A,F);else{W=1/W;na*=W;P*=W;ba*=W;var ea=Math.sin(O),ra=
Math.cos(O),ja=1-ra;O=F[0];W=F[1];var oa=F[2],qa=F[3],sa=F[4],ua=F[5],ya=F[6],wa=F[7],Aa=F[8],Ca=F[9],Ea=F[10],Da=F[11],Ia=na*na*ja+ra,Ha=P*na*ja+ba*ea,Ja=ba*na*ja-P*ea,Na=na*P*ja-ba*ea,La=P*P*ja+ra,$a=ba*P*ja+na*ea,Oa=na*ba*ja+P*ea;na=P*ba*ja-na*ea;P=ba*ba*ja+ra;A[0]=O*Ia+sa*Ha+Aa*Ja;A[1]=W*Ia+ua*Ha+Ca*Ja;A[2]=oa*Ia+ya*Ha+Ea*Ja;A[3]=qa*Ia+wa*Ha+Da*Ja;A[4]=O*Na+sa*La+Aa*$a;A[5]=W*Na+ua*La+Ca*$a;A[6]=oa*Na+ya*La+Ea*$a;A[7]=qa*Na+wa*La+Da*$a;A[8]=O*Oa+sa*na+Aa*P;A[9]=W*Oa+ua*na+Ca*P;A[10]=oa*Oa+ya*
na+Ea*P;A[11]=qa*Oa+wa*na+Da*P;F!==A&&(A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15])}}function w(A,F,O){const ba=Math.sin(O);O=Math.cos(O);const na=F[4],P=F[5],W=F[6],ea=F[7],ra=F[8],ja=F[9],oa=F[10],qa=F[11];F!==A&&(A[0]=F[0],A[1]=F[1],A[2]=F[2],A[3]=F[3],A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15]);A[4]=na*O+ra*ba;A[5]=P*O+ja*ba;A[6]=W*O+oa*ba;A[7]=ea*O+qa*ba;A[8]=ra*O-na*ba;A[9]=ja*O-P*ba;A[10]=oa*O-W*ba;A[11]=qa*O-ea*ba;return A}function q(A,F,O){const ba=Math.sin(O);O=Math.cos(O);const na=
F[0],P=F[1],W=F[2],ea=F[3],ra=F[8],ja=F[9],oa=F[10],qa=F[11];F!==A&&(A[4]=F[4],A[5]=F[5],A[6]=F[6],A[7]=F[7],A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15]);A[0]=na*O-ra*ba;A[1]=P*O-ja*ba;A[2]=W*O-oa*ba;A[3]=ea*O-qa*ba;A[8]=na*ba+ra*O;A[9]=P*ba+ja*O;A[10]=W*ba+oa*O;A[11]=ea*ba+qa*O;return A}function g(A,F,O){const ba=Math.sin(O);O=Math.cos(O);const na=F[0],P=F[1],W=F[2],ea=F[3],ra=F[4],ja=F[5],oa=F[6],qa=F[7];F!==A&&(A[8]=F[8],A[9]=F[9],A[10]=F[10],A[11]=F[11],A[12]=F[12],A[13]=F[13],A[14]=F[14],
A[15]=F[15]);A[0]=na*O+ra*ba;A[1]=P*O+ja*ba;A[2]=W*O+oa*ba;A[3]=ea*O+qa*ba;A[4]=ra*O-na*ba;A[5]=ja*O-P*ba;A[6]=oa*O-W*ba;A[7]=qa*O-ea*ba;return A}function p(A,F){A[0]=1;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=1;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=1;A[11]=0;A[12]=F[0];A[13]=F[1];A[14]=F[2];A[15]=1;return A}function x(A,F){A[0]=F[0];A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=F[1];A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=F[2];A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function u(A,F,O){if(0===F)return n(A);let ba=O[0],
na=O[1];O=O[2];var P=Math.sqrt(ba*ba+na*na+O*O);if(P<=c.getEpsilon())return null;P=1/P;ba*=P;na*=P;O*=P;P=Math.sin(F);F=Math.cos(F);const W=1-F;A[0]=ba*ba*W+F;A[1]=na*ba*W+O*P;A[2]=O*ba*W-na*P;A[3]=0;A[4]=ba*na*W-O*P;A[5]=na*na*W+F;A[6]=O*na*W+ba*P;A[7]=0;A[8]=ba*O*W+na*P;A[9]=na*O*W-ba*P;A[10]=O*O*W+F;A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function D(A,F){const O=Math.sin(F);F=Math.cos(F);A[0]=1;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=F;A[6]=O;A[7]=0;A[8]=0;A[9]=-O;A[10]=F;A[11]=0;A[12]=0;A[13]=
0;A[14]=0;A[15]=1;return A}function J(A,F){const O=Math.sin(F);F=Math.cos(F);A[0]=F;A[1]=0;A[2]=-O;A[3]=0;A[4]=0;A[5]=1;A[6]=0;A[7]=0;A[8]=O;A[9]=0;A[10]=F;A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function E(A,F){const O=Math.sin(F);F=Math.cos(F);A[0]=F;A[1]=O;A[2]=0;A[3]=0;A[4]=-O;A[5]=F;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=1;A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function L(A,F,O){var ba=F[0],na=F[1],P=F[2],W=F[3],ea=ba+ba,ra=na+na;const ja=P+P;F=ba*ea;const oa=ba*ra;ba*=ja;const qa=
na*ra;na*=ja;P*=ja;ea*=W;ra*=W;W*=ja;A[0]=1-(qa+P);A[1]=oa+W;A[2]=ba-ra;A[3]=0;A[4]=oa-W;A[5]=1-(F+P);A[6]=na+ea;A[7]=0;A[8]=ba+ra;A[9]=na-ea;A[10]=1-(F+qa);A[11]=0;A[12]=O[0];A[13]=O[1];A[14]=O[2];A[15]=1;return A}function Q(A,F){const O=ia,ba=-F[0],na=-F[1],P=-F[2],W=F[3],ea=F[4],ra=F[5],ja=F[6],oa=F[7],qa=ba*ba+na*na+P*P+W*W;0<qa?(O[0]=2*(ea*W+oa*ba+ra*P-ja*na)/qa,O[1]=2*(ra*W+oa*na+ja*ba-ea*P)/qa,O[2]=2*(ja*W+oa*P+ea*na-ra*ba)/qa):(O[0]=2*(ea*W+oa*ba+ra*P-ja*na),O[1]=2*(ra*W+oa*na+ja*ba-ea*P),
O[2]=2*(ja*W+oa*P+ea*na-ra*ba));L(A,F,O);return A}function M(A,F){A[0]=F[12];A[1]=F[13];A[2]=F[14];return A}function C(A,F){const O=F[0],ba=F[1],na=F[2],P=F[4],W=F[5],ea=F[6],ra=F[8],ja=F[9];F=F[10];A[0]=Math.sqrt(O*O+ba*ba+na*na);A[1]=Math.sqrt(P*P+W*W+ea*ea);A[2]=Math.sqrt(ra*ra+ja*ja+F*F);return A}function U(A,F){const O=F[0]+F[5]+F[10];let ba=0;0<O?(ba=2*Math.sqrt(O+1),A[3]=.25*ba,A[0]=(F[6]-F[9])/ba,A[1]=(F[8]-F[2])/ba,A[2]=(F[1]-F[4])/ba):F[0]>F[5]&&F[0]>F[10]?(ba=2*Math.sqrt(1+F[0]-F[5]-F[10]),
A[3]=(F[6]-F[9])/ba,A[0]=.25*ba,A[1]=(F[1]+F[4])/ba,A[2]=(F[8]+F[2])/ba):F[5]>F[10]?(ba=2*Math.sqrt(1+F[5]-F[0]-F[10]),A[3]=(F[8]-F[2])/ba,A[0]=(F[1]+F[4])/ba,A[1]=.25*ba,A[2]=(F[6]+F[9])/ba):(ba=2*Math.sqrt(1+F[10]-F[0]-F[5]),A[3]=(F[1]-F[4])/ba,A[0]=(F[8]+F[2])/ba,A[1]=(F[6]+F[9])/ba,A[2]=.25*ba);return A}function y(A,F,O,ba){var na=F[0],P=F[1],W=F[2],ea=F[3],ra=na+na,ja=P+P,oa=W+W;F=na*ra;const qa=na*ja;na*=oa;const sa=P*ja;P*=oa;W*=oa;ra*=ea;ja*=ea;ea*=oa;oa=ba[0];const ua=ba[1];ba=ba[2];A[0]=
(1-(sa+W))*oa;A[1]=(qa+ea)*oa;A[2]=(na-ja)*oa;A[3]=0;A[4]=(qa-ea)*ua;A[5]=(1-(F+W))*ua;A[6]=(P+ra)*ua;A[7]=0;A[8]=(na+ja)*ba;A[9]=(P-ra)*ba;A[10]=(1-(F+sa))*ba;A[11]=0;A[12]=O[0];A[13]=O[1];A[14]=O[2];A[15]=1;return A}function B(A,F,O,ba,na){var P=F[0],W=F[1],ea=F[2],ra=F[3],ja=P+P,oa=W+W,qa=ea+ea;F=P*ja;var sa=P*oa,ua=P*qa;P=W*oa;W*=qa;var ya=ea*qa;ea=ra*ja;oa*=ra;const wa=ra*qa;var Aa=ba[0],Ca=ba[1];qa=ba[2];ba=na[0];ra=na[1];na=na[2];ja=(1-(P+ya))*Aa;const Ea=(sa+wa)*Aa;Aa*=ua-oa;sa=(sa-wa)*Ca;
ya=(1-(F+ya))*Ca;Ca*=W+ea;ua=(ua+oa)*qa;W=(W-ea)*qa;F=(1-(F+P))*qa;A[0]=ja;A[1]=Ea;A[2]=Aa;A[3]=0;A[4]=sa;A[5]=ya;A[6]=Ca;A[7]=0;A[8]=ua;A[9]=W;A[10]=F;A[11]=0;A[12]=O[0]+ba-(ja*ba+sa*ra+ua*na);A[13]=O[1]+ra-(Ea*ba+ya*ra+W*na);A[14]=O[2]+na-(Aa*ba+Ca*ra+F*na);A[15]=1;return A}function H(A,F){var O=F[0],ba=F[1],na=F[2];F=F[3];var P=O+O,W=ba+ba;const ea=na+na;O*=P;const ra=ba*P;ba*=W;const ja=na*P,oa=na*W;na*=ea;P*=F;W*=F;F*=ea;A[0]=1-ba-na;A[1]=ra+F;A[2]=ja-W;A[3]=0;A[4]=ra-F;A[5]=1-O-na;A[6]=oa+P;
A[7]=0;A[8]=ja+W;A[9]=oa-P;A[10]=1-O-ba;A[11]=0;A[12]=0;A[13]=0;A[14]=0;A[15]=1;return A}function N(A,F,O,ba,na,P,W){const ea=1/(O-F),ra=1/(na-ba),ja=1/(P-W);A[0]=2*P*ea;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=2*P*ra;A[6]=0;A[7]=0;A[8]=(O+F)*ea;A[9]=(na+ba)*ra;A[10]=(W+P)*ja;A[11]=-1;A[12]=0;A[13]=0;A[14]=W*P*2*ja;A[15]=0;return A}function K(A,F,O,ba,na){F=1/Math.tan(F/2);let P=void 0;A[0]=F/O;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=F;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[11]=-1;A[12]=0;A[13]=0;A[15]=0;null!=na&&Infinity!==
na?(P=1/(ba-na),A[10]=(na+ba)*P,A[14]=2*na*ba*P):(A[10]=-1,A[14]=-2*ba);return A}function X(A,F,O,ba){const na=Math.tan(F.upDegrees*Math.PI/180),P=Math.tan(F.downDegrees*Math.PI/180),W=Math.tan(F.leftDegrees*Math.PI/180);F=Math.tan(F.rightDegrees*Math.PI/180);const ea=2/(W+F),ra=2/(na+P);A[0]=ea;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=ra;A[6]=0;A[7]=0;A[8]=-((W-F)*ea*.5);A[9]=(na-P)*ra*.5;A[10]=ba/(O-ba);A[11]=-1;A[12]=0;A[13]=0;A[14]=ba*O/(O-ba);A[15]=0;return A}function V(A,F,O,ba,na,P,W){const ea=1/(F-
O),ra=1/(ba-na),ja=1/(P-W);A[0]=-2*ea;A[1]=0;A[2]=0;A[3]=0;A[4]=0;A[5]=-2*ra;A[6]=0;A[7]=0;A[8]=0;A[9]=0;A[10]=2*ja;A[11]=0;A[12]=(F+O)*ea;A[13]=(na+ba)*ra;A[14]=(W+P)*ja;A[15]=1;return A}function da(A,F,O,ba){const na=F[0],P=F[1];F=F[2];let W=na-O[0],ea=P-O[1];O=F-O[2];var ra=c.getEpsilon();if(Math.abs(W)<ra&&Math.abs(ea)<ra&&Math.abs(O)<ra)n(A);else{var ja=1/Math.sqrt(W*W+ea*ea+O*O);W*=ja;ea*=ja;O*=ja;ja=ba[0];var oa=ba[1];ra=ba[2];ba=oa*O-ra*ea;ra=ra*W-ja*O;oa=ja*ea-oa*W;(ja=Math.sqrt(ba*ba+ra*
ra+oa*oa))?(ja=1/ja,ba*=ja,ra*=ja,oa*=ja):oa=ra=ba=0;var qa=ea*oa-O*ra,sa=O*ba-W*oa,ua=W*ra-ea*ba;(ja=Math.sqrt(qa*qa+sa*sa+ua*ua))?(ja=1/ja,qa*=ja,sa*=ja,ua*=ja):ua=sa=qa=0;A[0]=ba;A[1]=qa;A[2]=W;A[3]=0;A[4]=ra;A[5]=sa;A[6]=ea;A[7]=0;A[8]=oa;A[9]=ua;A[10]=O;A[11]=0;A[12]=-(ba*na+ra*P+oa*F);A[13]=-(qa*na+sa*P+ua*F);A[14]=-(W*na+ea*P+O*F);A[15]=1}}function aa(A,F,O,ba){const na=F[0],P=F[1];F=F[2];var W=ba[0];const ea=ba[1];var ra=ba[2];ba=na-O[0];let ja=P-O[1];O=F-O[2];let oa=ba*ba+ja*ja+O*O;0<oa&&
(oa=1/Math.sqrt(oa),ba*=oa,ja*=oa,O*=oa);let qa=ea*O-ra*ja;ra=ra*ba-W*O;W=W*ja-ea*ba;oa=qa*qa+ra*ra+W*W;0<oa&&(oa=1/Math.sqrt(oa),qa*=oa,ra*=oa,W*=oa);A[0]=qa;A[1]=ra;A[2]=W;A[3]=0;A[4]=ja*W-O*ra;A[5]=O*qa-ba*W;A[6]=ba*ra-ja*qa;A[7]=0;A[8]=ba;A[9]=ja;A[10]=O;A[11]=0;A[12]=na;A[13]=P;A[14]=F;A[15]=1;return A}function fa(A){return"mat4("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+", "+A[6]+", "+A[7]+", "+A[8]+", "+A[9]+", "+A[10]+", "+A[11]+", "+A[12]+", "+A[13]+", "+A[14]+", "+A[15]+")"}
function Z(A){return Math.sqrt(A[0]**2+A[1]**2+A[2]**2+A[3]**2+A[4]**2+A[5]**2+A[6]**2+A[7]**2+A[8]**2+A[9]**2+A[10]**2+A[11]**2+A[12]**2+A[13]**2+A[14]**2+A[15]**2)}function ma(A,F,O){A[0]=F[0]+O[0];A[1]=F[1]+O[1];A[2]=F[2]+O[2];A[3]=F[3]+O[3];A[4]=F[4]+O[4];A[5]=F[5]+O[5];A[6]=F[6]+O[6];A[7]=F[7]+O[7];A[8]=F[8]+O[8];A[9]=F[9]+O[9];A[10]=F[10]+O[10];A[11]=F[11]+O[11];A[12]=F[12]+O[12];A[13]=F[13]+O[13];A[14]=F[14]+O[14];A[15]=F[15]+O[15];return A}function S(A,F,O){A[0]=F[0]-O[0];A[1]=F[1]-O[1];A[2]=
F[2]-O[2];A[3]=F[3]-O[3];A[4]=F[4]-O[4];A[5]=F[5]-O[5];A[6]=F[6]-O[6];A[7]=F[7]-O[7];A[8]=F[8]-O[8];A[9]=F[9]-O[9];A[10]=F[10]-O[10];A[11]=F[11]-O[11];A[12]=F[12]-O[12];A[13]=F[13]-O[13];A[14]=F[14]-O[14];A[15]=F[15]-O[15];return A}function ha(A,F,O){A[0]=F[0]*O;A[1]=F[1]*O;A[2]=F[2]*O;A[3]=F[3]*O;A[4]=F[4]*O;A[5]=F[5]*O;A[6]=F[6]*O;A[7]=F[7]*O;A[8]=F[8]*O;A[9]=F[9]*O;A[10]=F[10]*O;A[11]=F[11]*O;A[12]=F[12]*O;A[13]=F[13]*O;A[14]=F[14]*O;A[15]=F[15]*O;return A}function G(A,F,O,ba){A[0]=F[0]+O[0]*ba;
A[1]=F[1]+O[1]*ba;A[2]=F[2]+O[2]*ba;A[3]=F[3]+O[3]*ba;A[4]=F[4]+O[4]*ba;A[5]=F[5]+O[5]*ba;A[6]=F[6]+O[6]*ba;A[7]=F[7]+O[7]*ba;A[8]=F[8]+O[8]*ba;A[9]=F[9]+O[9]*ba;A[10]=F[10]+O[10]*ba;A[11]=F[11]+O[11]*ba;A[12]=F[12]+O[12]*ba;A[13]=F[13]+O[13]*ba;A[14]=F[14]+O[14]*ba;A[15]=F[15]+O[15]*ba;return A}function ca(A,F){return A[0]===F[0]&&A[1]===F[1]&&A[2]===F[2]&&A[3]===F[3]&&A[4]===F[4]&&A[5]===F[5]&&A[6]===F[6]&&A[7]===F[7]&&A[8]===F[8]&&A[9]===F[9]&&A[10]===F[10]&&A[11]===F[11]&&A[12]===F[12]&&A[13]===
F[13]&&A[14]===F[14]&&A[15]===F[15]}function pa(A,F){if(A===F)return!0;const O=A[0],ba=A[1],na=A[2],P=A[3],W=A[4],ea=A[5],ra=A[6],ja=A[7],oa=A[8],qa=A[9],sa=A[10],ua=A[11],ya=A[12],wa=A[13],Aa=A[14];A=A[15];const Ca=F[0],Ea=F[1],Da=F[2],Ia=F[3],Ha=F[4],Ja=F[5],Na=F[6],La=F[7],$a=F[8],Oa=F[9],Ma=F[10],Ka=F[11],xa=F[12],hb=F[13],nb=F[14];F=F[15];const Qa=c.getEpsilon();return Math.abs(O-Ca)<=Qa*Math.max(1,Math.abs(O),Math.abs(Ca))&&Math.abs(ba-Ea)<=Qa*Math.max(1,Math.abs(ba),Math.abs(Ea))&&Math.abs(na-
Da)<=Qa*Math.max(1,Math.abs(na),Math.abs(Da))&&Math.abs(P-Ia)<=Qa*Math.max(1,Math.abs(P),Math.abs(Ia))&&Math.abs(W-Ha)<=Qa*Math.max(1,Math.abs(W),Math.abs(Ha))&&Math.abs(ea-Ja)<=Qa*Math.max(1,Math.abs(ea),Math.abs(Ja))&&Math.abs(ra-Na)<=Qa*Math.max(1,Math.abs(ra),Math.abs(Na))&&Math.abs(ja-La)<=Qa*Math.max(1,Math.abs(ja),Math.abs(La))&&Math.abs(oa-$a)<=Qa*Math.max(1,Math.abs(oa),Math.abs($a))&&Math.abs(qa-Oa)<=Qa*Math.max(1,Math.abs(qa),Math.abs(Oa))&&Math.abs(sa-Ma)<=Qa*Math.max(1,Math.abs(sa),Math.abs(Ma))&&
Math.abs(ua-Ka)<=Qa*Math.max(1,Math.abs(ua),Math.abs(Ka))&&Math.abs(ya-xa)<=Qa*Math.max(1,Math.abs(ya),Math.abs(xa))&&Math.abs(wa-hb)<=Qa*Math.max(1,Math.abs(wa),Math.abs(hb))&&Math.abs(Aa-nb)<=Qa*Math.max(1,Math.abs(Aa),Math.abs(nb))&&Math.abs(A-F)<=Qa*Math.max(1,Math.abs(A),Math.abs(F))}function Y(A){const F=c.getEpsilon(),O=A[0],ba=A[1],na=A[2],P=A[4],W=A[5],ea=A[6],ra=A[8],ja=A[9];A=A[10];return Math.abs(1-(O*O+P*P+ra*ra))<=F&&Math.abs(1-(ba*ba+W*W+ja*ja))<=F&&Math.abs(1-(na*na+ea*ea+A*A))<=F}
function R(A){return 1===A[0]&&0===A[1]&&0===A[2]&&0===A[4]&&1===A[5]&&0===A[6]&&0===A[8]&&0===A[9]&&1===A[10]}const ia=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:ma,adjoint:l,copy:f,determinant:m,equals:pa,exactEquals:ca,frob:Z,fromQuat:H,fromQuat2:Q,fromRotation:u,fromRotationTranslation:L,fromRotationTranslationScale:y,fromRotationTranslationScaleOrigin:B,fromScaling:x,fromTranslation:p,fromXRotation:D,fromYRotation:J,fromZRotation:E,frustum:N,getRotation:U,getScaling:C,
getTranslation:M,hasIdentityRotation:R,identity:n,invert:h,invertOrIdentity:k,isOrthoNormal:Y,lookAt:da,mul:t,multiply:t,multiplyScalar:ha,multiplyScalarAndAdd:G,ortho:V,perspective:K,perspectiveFromFieldOfView:X,rotate:v,rotateX:w,rotateY:q,rotateZ:g,scale:r,set:e,str:fa,sub:S,subtract:S,targetTo:aa,translate:z,transpose:d},Symbol.toStringTag,{value:"Module"}));a.add=ma;a.adjoint=l;a.copy=f;a.determinant=m;a.equals=pa;a.exactEquals=ca;a.frob=Z;a.fromQuat=H;a.fromQuat2=Q;a.fromRotation=u;a.fromRotationTranslation=
L;a.fromRotationTranslationScale=y;a.fromRotationTranslationScaleOrigin=B;a.fromScaling=x;a.fromTranslation=p;a.fromXRotation=D;a.fromYRotation=J;a.fromZRotation=E;a.frustum=N;a.getRotation=U;a.getScaling=C;a.getTranslation=M;a.hasIdentityRotation=R;a.identity=n;a.invert=h;a.invertOrIdentity=k;a.isOrthoNormal=Y;a.lookAt=da;a.mat4=b;a.mul=t;a.multiply=t;a.multiplyScalar=ha;a.multiplyScalarAndAdd=G;a.ortho=V;a.perspective=K;a.perspectiveFromFieldOfView=X;a.rotate=v;a.rotateX=w;a.rotateY=q;a.rotateZ=
g;a.scale=r;a.set=e;a.str=fa;a.sub=S;a.subtract=S;a.targetTo=aa;a.translate=z;a.transpose=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(a,b,c){function f(y){return null==y||"string"===typeof y&&!y?"\x3cNull\x3e":y}function e(y){const B=null!=y.minValue||null!=y.maxValue,H=!!y.sqlExpression&&y.supportsSQLExpression;return!(null!=y.normalizationField||
null!=y.normalizationType)&&!B&&!H}function n(y){const {values:B,useSampleStdDev:H,supportsNullCount:N,outStatisticTypes:K}=y;var X=Number.POSITIVE_INFINITY;let V=Number.NEGATIVE_INFINITY,da=null,aa=null;var fa=null;let Z=null,ma=0;const S=null==y.minValue?-Infinity:y.minValue,ha=null==y.maxValue?Infinity:y.maxValue;for(const G of B)Number.isFinite(G)?G>=S&&G<=ha&&(da=null===da?G:da+G,X=Math.min(X,G),V=Math.max(V,G),ma++):"string"===typeof G&&ma++;if(ma&&null!=da){aa=da/ma;fa=0;for(const G of B)Number.isFinite(G)&&
G>=S&&G<=ha&&(fa+=(G-aa)**2);Z=H?1<ma?fa/(ma-1):0:0<ma?fa/ma:0;fa=Math.sqrt(Z)}else V=X=null;X={avg:aa,count:ma,max:V,min:X,stddev:fa,sum:da,variance:Z};N&&(X.nullcount=B.length-ma);!y.percentileParams||K?.include?.length&&!K.include.includes("median")||K?.exclude?.length&&K.exclude.includes("median")||(X.median=d(B,y.percentileParams));return X}function d(y,B){const {fieldType:H,value:N,orderBy:K,isDiscrete:X}=B,V=k(H,"desc"===K);y=[...y].filter(Z=>null!=Z).sort((Z,ma)=>V(Z,ma));if(0===y.length)return null;
if(0>=N)return y[0];if(1<=N)return y[y.length-1];var da=(y.length-1)*N,aa=Math.floor(da);B=aa+1;da%=1;aa=y[aa];const fa=y[B];return B>=y.length||X||"string"===typeof aa||"string"===typeof fa?aa:aa*(1-da)+fa*da}function k(y,B){if(y){if(p.has(y))return B?C:U;if(x.has(y))return h(B,!1);if("esriFieldTypeTimestampOffset"===y)return B?L:E;const V=h(B,!0);if("esriFieldTypeString"===y)return V;if("esriFieldTypeGUID"===y||"esriFieldTypeGlobalID"===y)return(da,aa)=>V(l(da),l(aa))}const H=B?1:-1,N=B?C:U,K=h(B,
!0),X=B?D:J;return(V,da)=>"number"===typeof V&&"number"===typeof da?N(V,da):"string"===typeof V&&"string"===typeof da?K(V,da):X(V,da)??H}function h(y,B){if(!B)return y?M:Q;const H=y?D:J;return y?(N,K)=>{const X=H(N,K);if(null!=X)return X;N=N.toUpperCase();K=K.toUpperCase();return N>K?-1:N<K?1:0}:(N,K)=>{const X=H(N,K);if(null!=X)return X;N=N.toUpperCase();K=K.toUpperCase();return N<K?-1:N>K?1:0}}function l(y){return y.slice(24,36)+y.slice(19,23)+y.slice(16,18)+y.slice(14,16)+y.slice(11,13)+y.slice(9,
11)+y.slice(6,8)+y.slice(4,6)+y.slice(2,4)+y.slice(0,2)}function m(y){return"coded-value"!==y?.type?[]:y.codedValues.map(B=>B.code)}function t(y,B){const H=r({field:B.field,normalizationType:B.normalizationType,normalizationField:B.normalizationField,classificationMethod:B.classificationMethod,standardDeviationInterval:B.standardDeviationInterval,breakCount:B.numClasses||5});y=z(y,B.minValue,B.maxValue);return c.createGenerateRendererClassBreaks({definition:H,values:y,normalizationTotal:B.normalizationTotal})}
function z(y,B,H){const N=null==B?-Infinity:B,K=null==H?Infinity:H;return y.filter(X=>Number.isFinite(X)&&X>=N&&X<=K)}function r(y){const {breakCount:B,field:H,normalizationField:N,normalizationType:K}=y,X=y.classificationMethod||"equal-interval";return new b({breakCount:B,classificationField:H,classificationMethod:X,normalizationField:"field"===K?N:void 0,normalizationType:K,standardDeviationInterval:"standard-deviation"===X?y.standardDeviationInterval||1:void 0,definedInterval:"defined-interval"===
X?y.definedInterval:void 0})}function v(y,B){const {field:H,classificationMethod:N,standardDeviationInterval:K,normalizationType:X,normalizationField:V,normalizationTotal:da,minValue:aa,maxValue:fa}=B,Z=B.numBins||10;let ma=B=null,S=null;N&&"equal-interval"!==N||X?({classBreaks:y}=t(y,{field:H,normalizationType:X,normalizationField:V,normalizationTotal:da,classificationMethod:N,standardDeviationInterval:K,minValue:aa,maxValue:fa,numClasses:Z}),B=y[0].minValue,ma=y[y.length-1].maxValue,S=y.map(ha=>
[ha.minValue,ha.maxValue])):(null!=aa&&null!=fa?(B=aa,ma=fa):(y=n({values:y,minValue:aa,maxValue:fa,useSampleStdDev:!X,supportsNullCount:e({normalizationType:X,normalizationField:V,minValue:aa,maxValue:fa})}),B=y.min??null,ma=y.max??null),S=q(B??0,ma??0,Z));return{min:B,max:ma,intervals:S}}function w(y,B){let H=-1;for(let N=y.length-1;0<=N;N--)if(B>=y[N][0]){H=N;break}return H}function q(y,B,H){const N=(B-y)/H,K=[];let X;for(let V=1;V<=H;V++)X=y+N,X=Number(X.toFixed(16)),K.push([y,V===H?B:X]),y=X;
return K}const g=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,p=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),x=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),u="min max avg stddev count sum variance nullcount median".split(" "),D=(y,B)=>null==y?null==B?0:1:null==B?-1:null,J=(y,B)=>null==y?null==B?0:-1:null==B?1:null,E=(y,B)=>J(y,B)??(y===B?0:(new Date(y)).getTime()-
(new Date(B)).getTime()),L=(y,B)=>D(y,B)??(y===B?0:(new Date(B)).getTime()-(new Date(y)).getTime()),Q=(y,B)=>J(y,B)??(y===B?0:y<B?-1:1),M=(y,B)=>D(y,B)??(y===B?0:y<B?1:-1),C=(y,B)=>D(y,B)??B-y,U=(y,B)=>J(y,B)??y-B;a.calculateClassBreaks=t;a.calculateHistogram=function(y,B){var H=v(y,B);if(null==H.min&&null==H.max)return{bins:[],minValue:H.min,maxValue:H.max,normalizationTotal:B.normalizationTotal};const N=H.intervals,K=H.min??0;H=H.max??0;const X=N.map((V,da)=>({minValue:N[da][0],maxValue:N[da][1],
count:0}));for(const V of y)null!=V&&V>=K&&V<=H&&(y=w(N,V),-1<y&&X[y].count++);return{bins:X,minValue:K,maxValue:H,normalizationTotal:B.normalizationTotal}};a.calculatePercentile=d;a.calculateStatistics=n;a.calculateStringStatistics=function(y){const {outStatisticTypes:B}=y,H=y.returnDistinct?[...(new Set(y.values))]:y.values;var N=H.filter(X=>null!=X).sort();const K=N.length;N={count:K,min:N[0],max:N[K-1]};y.supportsNullCount&&(N.nullcount=H.length-K);!y.percentileParams||B?.include?.length&&!B.include.includes("median")||
B?.exclude?.length&&B.exclude.includes("median")||(N.median=d(H,y.percentileParams));return N};a.calculateUniqueValuesCount=function(y){const B={};for(let H of y){if(null==H||"string"===typeof H&&""===H.trim())H=null;null==B[H]?B[H]={count:1,data:H}:B[H].count++}return{count:B}};a.createClassBreaksDefinition=r;a.createUVResult=function(y,B,H,N){y=y.count;const K=[];if(H&&B){H=[];var X=m(B[0]);for(const V of X)if(B[1]){X=m(B[1]);for(const da of X)if(B[2]){X=m(B[2]);for(const aa of X)H.push(`${f(V)}${N}${f(da)}${N}${f(aa)}`)}else H.push(`${f(V)}${N}${f(da)}`)}else H.push(V);
for(const V of H)y.hasOwnProperty(V)||(y[V]={data:V,count:0})}for(const V in y)B=y[V],K.push({value:B.data,count:B.count,label:B.label});return{uniqueValueInfos:K}};a.getAttributeComparator=k;a.getEqualIntervalBins=q;a.getNormalizedValue=function(y,B,H,N){let K=null;switch(B){case "log":0!==y&&(K=Math.log(y)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(N)&&0!==N&&(K=y/N*100);break;case "field":Number.isFinite(H)&&0!==H&&(K=y/H);break;case "natural-log":0<y&&(K=Math.log(y));break;case "square-root":0<
y&&(K=y**.5)}return K};a.isNullCountSupported=e;a.processNullValue=f;a.processSummaryStatisticsResult=function(y,B,H){let N;for(N in y)B?.include?.length&&!B.include.includes(N)||B?.exclude?.length&&B.exclude.includes(N)?delete y[N]:u.includes(N)&&(Number.isFinite(y[N])||(y[N]=null));if(!H)return y;["avg","stddev","variance"].forEach(K=>{null!=y[K]&&(y[K]=Math.ceil(y[K]??0))});return y};a.resolveCBResult=function(y,B){let H=y.classBreaks;const N=H[0]?.minValue,K=H[H.length-1]?.maxValue,X="standard-deviation"===
B;H=H.map(V=>{const da=V.label;V={minValue:V.minValue,maxValue:V.maxValue,label:da};if(X&&da){const aa=da.match(g)?.map(fa=>+fa.trim())??[];2===aa.length?(V.minStdDev=aa[0],V.maxStdDev=aa[1],0>aa[0]&&0<aa[1]&&(V.hasAvg=!0)):1===aa.length&&(da.includes("\x3c")?(V.minStdDev=null,V.maxStdDev=aa[0]):da.includes("\x3e")&&(V.minStdDev=aa[0],V.maxStdDev=null))}return V});return{minValue:N,maxValue:K,classBreakInfos:H,normalizationTotal:y.normalizationTotal}};a.statisticTypes=u;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k,h){e=new b.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",
esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});b=new b.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});c=class extends c.JSONSupport{constructor(l){super(l);this.type="class-breaks-definition";this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(l){"standard-deviation"===
this.classificationMethod&&this._set("standardDeviationInterval",l)}set definedInterval(l){"defined-interval"===this.classificationMethod&&this._set("definedInterval",l)}};a.__decorate([k.enumeration({classBreaksDef:"class-breaks-definition"})],c.prototype,"type",void 0);a.__decorate([f.property({json:{write:!0}})],c.prototype,"breakCount",void 0);a.__decorate([f.property({json:{write:!0}})],c.prototype,"classificationField",void 0);a.__decorate([f.property({type:String,json:{read:e.read,write:e.write}})],
c.prototype,"classificationMethod",void 0);a.__decorate([f.property({json:{write:!0}})],c.prototype,"normalizationField",void 0);a.__decorate([f.property({json:{read:b.read,write:b.write}})],c.prototype,"normalizationType",void 0);a.__decorate([f.property({value:null,json:{write:!0}})],c.prototype,"standardDeviationInterval",null);a.__decorate([f.property({value:null,json:{write:!0}})],c.prototype,"definedInterval",null);return c=a.__decorate([h.subclass("esri.rest.support.ClassBreaksDefinition")],
c)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(a,b,c){a.enumeration=function(f,e={}){f=f instanceof b.JSONMap?f:new b.JSONMap(f,e);const {alwaysWriteDefaults:n,default:d,ignoreUnknown:k=!0,name:h,nonNullable:l,readOnly:m=!1}=e;return c.property({type:k?f.apiValues:String,json:{type:f.jsonValues,default:d,name:h,read:m?!1:{reader:f.read},write:{writer:f.write,alwaysWriteDefaults:n}},nonNullable:l,readOnly:m})};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(a,b){function c(t){var z=t.definition;const {classificationMethod:r,normalizationType:v,definedInterval:w}=z;z=z.breakCount??1;const q=[];var g=t.values;if(0===g.length)return[];g=g.sort((E,L)=>E-L);var p=g[0],x=g[g.length-1];if("equal-interval"===r)if(g.length>=z){g=(x-p)/z;t=p;for(var u=1;u<z;u++){var D=Number((p+u*g).toFixed(6));q.push({minValue:t,maxValue:D,
label:f(t,D,v)});t=D}q.push({minValue:t,maxValue:x,label:f(t,x,v)})}else g.forEach(E=>{q.push({minValue:E,maxValue:E,label:f(E,E,v)})});else if("natural-breaks"===r){g=e(g);t=n(g.uniqueValues,t.valueFrequency||g.valueFrequency,z);for(u=1;u<z;u++)g.uniqueValues.length>u&&(D=Number(g.uniqueValues[t[u]].toFixed(6)),q.push({minValue:p,maxValue:D,label:f(p,D,v)}),p=D);q.push({minValue:p,maxValue:x,label:f(p,x,v)})}else if("quantile"===r)if(g.length>=z&&p!==x){t=Math.ceil(g.length/z);u=0;for(D=1;D<z;D++){var J=
t+u-1;J>g.length&&(J=g.length-1);0>J&&(J=0);q.push({minValue:p,maxValue:g[J],label:f(p,g[J],v)});p=g[J];u+=t;t=Math.ceil((g.length-u)/(z-D))}q.push({minValue:p,maxValue:x,label:f(p,x,v)})}else for(z=-1,x=0;x<g.length;x++)p=g[x],p!==z&&(z=p,q.push({minValue:z,maxValue:p,label:f(z,p,v)}),z=p);else if("standard-deviation"===r)if(t=h(g),u=l(g,t),0===u)q.push({minValue:g[0],maxValue:g[0],label:f(g[0],g[0],v)});else{g=k(p,x,z,t,u)*u;u=0;for(D=z;1<=D;D--)J=Number((t-(D-.5)*g).toFixed(6)),q.push({minValue:p,
maxValue:J,label:f(p,J,v)}),p=J,u++;D=Number((t+.5*g).toFixed(6));q.push({minValue:p,maxValue:D,label:f(p,D,v)});p=D;u++;for(J=1;J<=z;J++)D=u===2*z?x:Number((t+(J+.5)*g).toFixed(6)),q.push({minValue:p,maxValue:D,label:f(p,D,v)}),p=D,u++}else if("defined-interval"===r){if(!w)return q;z=g[0];x=g[g.length-1];g=Math.ceil((x-z)/w);p=z;for(t=1;t<g;t++)u=Number((z+t*w).toFixed(6)),q.push({minValue:p,maxValue:u,label:f(p,u,v)}),p=u;q.push({minValue:p,maxValue:x,label:f(p,x,v)})}return q}function f(t,z,r){let v=
null;return v=t===z?r&&"percent-of-total"===r?t+"%":t.toString():r&&"percent-of-total"===r?t+"% - "+z+"%":t+" - "+z}function e(t){const z=[],r=[];let v=Number.MIN_VALUE,w=1,q=-1;for(let g=0;g<t.length;g++){const p=t[g];p===v?(w++,r[q]=w):null!==p&&(z.push(p),v=p,w=1,r.push(w),q++)}return{uniqueValues:z,valueFrequency:r}}function n(t,z,r){var v=t.length;const w=[];r>v&&(r=v);for(var q=0;q<r;q++)w.push(Math.round(q*v/r-1));w.push(v-1);q=d(w,t,z,r);v=q.mean;q=q.sdcm;var g=r,p=0,x=0;let u=0,D=0,J=!0;
for(let L=0;2>L&&J;L++){0===L&&(J=!1);for(var E=0;E<g-1;E++)for(;w[E+1]+1!==w[E+2];)if(w[E+1]+=1,p=m(E,w,t,z),u=p.sbMean,p=p.sbSdcm,x=m(E+1,w,t,z),D=x.sbMean,x=x.sbSdcm,p+x<q[E]+q[E+1])q[E]=p,q[E+1]=x,v[E]=u,v[E+1]=D,J=!0;else{--w[E+1];break}for(E=g-1;0<E;E--)for(;w[E]!==w[E-1]+1;)if(--w[E],p=m(E-1,w,t,z),u=p.sbMean,p=p.sbSdcm,x=m(E,w,t,z),D=x.sbMean,x=x.sbSdcm,p+x<q[E-1]+q[E])q[E-1]=p,q[E]=x,v[E-1]=u,v[E]=D,J=!0;else{w[E]+=1;break}}J&&(q=d(w,t,z,r));return w}function d(t,z,r,v){let w=[];var q=[],
g=[];let p=0;const x=[],u=[];for(var D=0;D<v;D++){var J=m(D,t,z,r);x.push(J.sbMean);u.push(J.sbSdcm);p+=u[D]}J=p;for(D=!0;D||p<J;){D=!1;w=[];for(q=0;q<v;q++)w.push(t[q]);for(g=0;g<v;g++)for(J=t[g]+1;J<=t[g+1];J++)if(q=z[J],0<g&&J!==t[g+1]&&Math.abs(q-x[g])>Math.abs(q-x[g-1]))t[g]=J;else if(g<v-1&&t[g]!==J-1&&Math.abs(q-x[g])>Math.abs(q-x[g+1])){t[g+1]=J-1;break}J=p;p=0;q=[];g=[];for(let E=0;E<v;E++){q.push(x[E]);g.push(u[E]);const L=m(E,t,z,r);x[E]=L.sbMean;u[E]=L.sbSdcm;p+=u[E]}}if(p>J){for(z=0;z<
v;z++)t[z]=w[z],x[z]=q[z],u[z]=g[z];p=J}return{mean:x,sdcm:u}}function k(t,z,r,v,w){t=Math.max(v-t,z-v)/w/r;return 1<=t?1:.5<=t?.5:.25}function h(t){let z=0;for(let r=0;r<t.length;r++)z+=t[r];return z/=t.length}function l(t,z){let r=0;for(let v=0;v<t.length;v++){const w=t[v];r+=(w-z)*(w-z)}r/=t.length;return Math.sqrt(r)}function m(t,z,r,v){var w=0,q=0;for(var g=z[t]+1;g<=z[t+1];g++){const p=v[g];w+=r[g]*p;q+=p}0>=q&&b.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");
w/=q;q=0;for(g=z[t]+1;g<=z[t+1];g++)q+=v[g]*(r[g]-w)**2;return{sbMean:w,sbSdcm:q}}a.createGenerateRendererClassBreaks=function(t){const {normalizationTotal:z}=t;return{classBreaks:c(t),normalizationTotal:z}};a.createGenerateRendererUniqueValues=function(t){t=e(t);const z=[],r=t.uniqueValues.length;for(let v=0;v<r;v++){const w=t.uniqueValues[v];z.push({value:w,count:t.valueFrequency[v],label:w.toString()})}return{uniqueValues:z}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],
function(a){a.makeEdgeCandidate=function(b,c,f,e,n,d=!1){return{objectId:b,target:c,distance:f,type:"edge",start:e,end:n,draped:d}};a.makeVertexCandidate=function(b,c,f){return{objectId:b,target:c,distance:f,type:"vertex"}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),
function(a,b,c,f,e,n,d,k,h,l){async function m(q,g,p){if(!q)return null;var {where:x}=q;q.where=x=x?.trim();if(!x||/^1 *= *1$/.test(x)||g&&g===x)q.where=null;if(!q.geometry)return q;g=await z(q);q.distance=0;q.units=null;"esriSpatialRelEnvelopeIntersects"===q.spatialRel&&({spatialReference:x}=q.geometry,g=n.getGeometryExtent(g),g.spatialReference=x);if(g){await l.checkProjectionSupport(g.spatialReference,p);x=g.spatialReference;g=t(g,p)&&d.isExtent(g)?{spatialReference:x,rings:[[[g.xmin,g.ymin],[g.xmin,
g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]]]}:g;x=(await k.normalizeCentralMeridian(d.fromJSON(g)))[0];if(null==x)throw w;const u="quantizationParameters"in q&&q.quantizationParameters?.tolerance||"maxAllowableOffset"in q&&q.maxAllowableOffset||0;g=u&&t(g,p)?{densificationStep:8*u}:void 0;x=x.toJSON();g=l.project(x,x.spatialReference,p,g);if(!g)throw w;g.spatialReference=p;q.geometry=g}return q}function t(q,g){if(!q)return!1;const p=q.spatialReference;return(d.isExtent(q)||d.isPolygon(q)||
d.isPolyline(q))&&!h.equals(p,g)&&!e.canProjectWithoutEngine(p,g)}async function z(q){const {distance:g,units:p}=q,x=q.geometry;if(null==g||"vertexAttributes"in x)return x;var u=x.spatialReference;q=p?v.fromJSON(p):f.getUnitString(u);u=u&&(h.isGeographic(u)||h.isWebMercator(u))?x:await l.checkProjectionSupport(u,h.wgs84).then(()=>l.project(x,h.wgs84));return(await r())(u.spatialReference,u,g,q)}async function r(){return(await new Promise((q,g)=>a(["../../../geometry/geometryEngineJSON"],q,g))).geodesicBuffer}
const v=new c.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),w=Object.freeze({});b.normalizeQuery=async function(q,g,p){const {outFields:x,orderByFields:u,groupByFieldsForStatistics:D,outStatistics:J}=q;if(x)for(var E=0;E<x.length;E++)x[E]=x[E].trim();if(u)for(E=0;E<u.length;E++)u[E]=u[E].trim();if(D)for(E=0;E<D.length;E++)D[E]=D[E].trim();
if(J)for(E=0;E<J.length;E++)J[E].onStatisticField&&(J[E].onStatisticField=J[E].onStatisticField.trim());q.geometry&&!q.outSR&&(q.outSR=q.geometry.spatialReference);return m(q,g,p)};b.normalizeQueryLike=m;b.queryEngineEmptyResult=w;b.unitsKebabDict=v;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),
function(a,b,c,f,e,n){function d(t,z,r){const {outFields:v,orderByFields:w,returnDistinctValues:q,outStatistics:g}=r,p=g?g.map(x=>x.outStatisticFieldName&&x.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(w&&0<w.length){const x=w.map(u=>{const D=u.toLowerCase();return D.includes(" asc")?D.split(" asc")[0]:D.includes(" desc")?D.split(" desc")[0]:u}).filter(u=>!p.includes(u));c.validateFields(t,z,x,{expressionName:"orderByFields",query:r})}if(v&&0<v.length)c.validateFields(t,z,v,{expressionName:"outFields",
query:r,allowedFieldTypes:"all"});else if(q)throw new b("unsupported-query","outFields should be specified for returnDistinctValues",{query:r});c.validateWhere(t,z,r.where,r)}function k(t,z,r){const {outStatistics:v,groupByFieldsForStatistics:w,having:q}=r;var g=w?.length,p=v?.length;if(q){if(!g||!p)throw new b("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:r});c.validateHaving(t,z,q,v,r)}if(p&&l(v)){p=v.map(x=>x.onStatisticField).filter(Boolean);
c.validateFields(t,z,p,{expressionName:"onStatisticFields",query:r});g&&c.validateFields(t,z,w,{expressionName:"groupByFieldsForStatistics",query:r});for(const x of v){const {onStatisticField:u,statisticType:D}=x;if(("percentile_disc"===D||"percentile_cont"===D)&&"statisticParameters"in x){if({statisticParameters:g}=x,!g)throw new b("unsupported-query","statisticParameters should be set for percentile type",{definition:x,query:r});}else t.get(u)&&"count"!==D&&"min"!==D&&"max"!==D&&c.validateFields(t,
z,[u],{expressionName:`outStatistics with '${D}' statistic type`,allowedFieldTypes:m,query:r})}}}async function h(t,z,r,v){var w=[];r.valueExpression&&({arcadeUtils:w}=await n.loadArcade(),w=w.extractFieldNames(r.valueExpression));r.field&&w.push(r.field);r.field2&&w.push(r.field2);r.field3&&w.push(r.field3);r.normalizationField&&w.push(r.normalizationField);if(!w.length&&!r.valueExpression)throw new b("unsupported-query","field or valueExpression is required",{params:r});c.validateFields(t,z,w,{expressionName:"statistics",
query:v})}function l(t){return null!=t&&t.every(z=>"exceedslimit"!==z.statisticType)}const m=new Set([...c.numericFieldTypes,...c.allDateAndTimeFieldTypes]);a.validateQuery=async function(t,{fieldsIndex:z,geometryType:r,spatialReference:v,availableFields:w}){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption&&"xyFootprint"!==t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new b("unsupported-query","Unsupported query options",{query:t});d(z,w,t);k(z,w,t);return Promise.all([e.checkSpatialQuerySupport(t,
r,v),f.checkProjectionSupport(v,t.outSR)]).then(()=>t)};a.validateStatisticsQuery=async function(t,z,{fieldsIndex:r,geometryType:v,spatialReference:w,availableFields:q}){if(0>(t.distance??0)||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new b("unsupported-query","Unsupported query options",{query:t});d(r,q,t);return Promise.all([h(r,q,z,t),e.checkSpatialQuerySupport(t,v,w),f.checkProjectionSupport(w,
t.outSR)]).then(()=>t)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t){function z(){return new Promise((g,
p)=>a(["../../../geometry/geometryEngineJSON"],g,p))}const r={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var v={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,
esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},w={esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},q={esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};b.canQueryWithRBush=function(g){if(n.isExtent(g))return!0;
if(n.isPolygon(g)){for(const p of g.rings)if(5!==p.length||p[0][0]!==p[1][0]||p[0][0]!==p[4][0]||p[2][0]!==p[3][0]||p[0][1]!==p[3][1]||p[0][1]!==p[4][1]||p[1][1]!==p[2][1])return!1;return!0}return!1};b.checkSpatialQuerySupport=async function(g,p,x){const {spatialRel:u,geometry:D}=g;if(D){if(null==u||!0!==v[u])throw new c("unsupported-query","Unsupported query spatial relationship",{query:g});if(d.isValid(D.spatialReference)&&d.isValid(x)){if(null==D||!0!==w[n.getJsonType(D)])throw new c("unsupported-query",
"Unsupported query geometry type",{query:g});if(null==p||!0!==q[p])throw new c("unsupported-query","Unsupported layer geometry type",{query:g});if(g.outSR)return t.checkProjectionSupport(g.geometry?.spatialReference,g.outSR)}}};b.getSpatialQueryOperator=function(g,p,x,u,D){if(n.isPolygon(p)&&"esriGeometryPoint"===x&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g)){const J=h.convertFromPolygon(new l,p,!1,!1);return Promise.resolve(E=>k.polygonContainsPoint(J,!1,!1,E))}if(n.isPolygon(p)&&
"esriGeometryMultipoint"===x){const J=h.convertFromPolygon(new l,p,!1,!1);if("esriSpatialRelContains"===g)return Promise.resolve(E=>k.polygonContainsMultipoint(J,!1,!1,E,u,D))}if(n.isExtent(p)&&"esriGeometryPoint"===x&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g))return Promise.resolve(J=>f.extentContainsPoint(p,m.getGeometry(x,u,D,J)));if(n.isExtent(p)&&"esriGeometryMultipoint"===x&&"esriSpatialRelContains"===g)return Promise.resolve(J=>f.extentContainsMultipoint(p,m.getGeometry(x,
u,D,J)));if(n.isExtent(p)&&"esriSpatialRelIntersects"===g){const J=e.getExtentIntersector(x);return Promise.resolve(E=>J(p,m.getGeometry(x,u,D,E)))}return z().then(J=>{const E=J[r[g]].bind(null,p.spatialReference,p);return L=>E(m.getGeometry(x,u,D,L))})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(a,b){a.extentIntersectsExtent=b.extentIntersectsExtent;a.extentIntersectsMultipoint=b.extentIntersectsMultipoint;
a.extentIntersectsPoint=b.extentIntersectsPoint;a.extentIntersectsPolygon=b.extentIntersectsPolygon;a.extentIntersectsPolyline=b.extentIntersectsPolyline;a.getFeatureExtentIntersector=b.getFeatureExtentIntersector;a.isSelfIntersecting=b.isSelfIntersecting;a.segmentIntersects=b.segmentIntersects;a.getExtentIntersector=function(c){return"mesh"===c?b.extentIntersectsExtent:b.getFeatureExtentIntersector(c)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],
function(a){function b(c,f,e,n,d){if(!c)return!1;f=f?e?4:3:e?3:2;const {coords:k,lengths:h}=c;e=!1;c=0;for(const m of h){var l=c;for(let t=c,z=c+m*f;t<z;t+=f){l=t+f;l===z&&(l=c);const r=k[t],v=k[t+1],w=k[l];l=k[l+1];(v<d&&l>=d||l<d&&v>=d)&&r+(d-v)/(l-v)*(w-r)<n&&(e=!e)}c+=m*f}return e}a.polygonContainsCoords=b;a.polygonContainsMultipoint=function(c,f,e,n,d,k){d=d?k?4:3:k?3:2;const {coords:h,lengths:l}=n;if(!l)return!1;for(let m=0,t=0;m<l.length;m++,t+=d)if(!b(c,f,e,h[t],h[t+1]))return!1;return!0};
a.polygonContainsPoint=function(c,f,e,n){return b(c,f,e,n.coords[0],n.coords[1])};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(a){function b(e,n,d,k,h){if(null!=k&&null!=h)return l=>{const m=e(l,n);l=e(l,d);return(null==m||m<=h)&&(null==l||l>=k)};if(null!=k)return l=>{l=e(l,d);return null==l||l>=k};if(null!=h)return l=>{l=e(l,n);return null==l||l<=h}}function c(e,n,d,k){if(null!=d&&null!=k&&d===k)return h=>
e(h,n)===d;if(null!=d&&null!=k)return h=>{h=e(h,n);return null!=h&&h>=d&&h<=k};if(null!=d)return h=>{h=e(h,n);return null!=h&&h>=d};if(null!=k)return h=>{h=e(h,n);return null!=h&&h<=k}}function f(){return()=>!1}a.getTimeExtent=async function(e,n){if(!e)return null;const d=n.featureAdapter,{startTimeField:k,endTimeField:h}=e;let l=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;if(k&&h)await n.forEach(t=>{const z=d.getAttribute(t,k);t=d.getAttribute(t,h);null==z||isNaN(z)||(l=Math.min(l,z));null==
t||isNaN(t)||(m=Math.max(m,t))});else{const t=k||h;await n.forEach(z=>{z=d.getAttribute(z,t);null==z||isNaN(z)||(l=Math.min(l,z),m=Math.max(m,z))})}return{start:l,end:m}};a.getTimeOperator=function(e,n,d){if(!n||!e)return null;const {startTimeField:k,endTimeField:h}=e;if(!k&&!h)return null;const {start:l,end:m}=n;if(null===l&&null===m)return null;if(void 0===l&&void 0===m)return f();e=d.getAttributeAsTimestamp?.bind(d)??d.getAttribute.bind(d);return k&&h?b(e,k,h,l,m):c(e,k||h,l,m)};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),function(a,b,c,f,e,n,d,k){function h(r){return r.trim().toLowerCase()}function l(r){const v=new Map;if(!r.fields)return v;const w=!0===r.datesInUnknownTimezone,{timeInfo:q,editFieldsInfo:g}=r;var p=(q?"startField"in q?q.startField:
q.startTimeField:"")??"";const x=(q?"endField"in q?q.endField:q.endTimeField:"")??"",u="dateFieldsTimeZone"in r?r.dateFieldsTimeZone??null:r.dateFieldsTimeReference?d.fromTimeReference(r.dateFieldsTimeReference):null,D=g?"timeZone"in g?g.timeZone??u:g.dateFieldsTimeReference?d.fromTimeReference(g.dateFieldsTimeReference):u??d.utc:null,J=q?"timeZone"in q?q.timeZone??u:q.timeReference?d.fromTimeReference(q.timeReference):u:null;p=new Map([[h(g?.creationDateField??""),D],[h(g?.editDateField??""),D],
[h(p),J],[h(x),J]]);for(const {name:E,type:L}of r.fields)z.has(L)?v.set(E,d.unknown):"date"!==L&&"esriFieldTypeDate"!==L?v.set(E,null):w?v.set(E,d.unknown):(r=p.get(h(E??""))??u,v.set(E,r));return v}const m=new Map;class t{static fromJSON(r){return new t(r.fields,r.timeZoneByFieldName)}static fromLayer(r){return new t(r.fields??[],l(r))}static fromLayerJSON(r){return new t(r.fields??[],l(r))}constructor(r=[],v){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;
this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=r||[];this._timeZoneByFieldName=v?new Map(v):null;r=[];for(const w of this.fields){v=w?.name;const q=n.normalizeFieldName(v)?.toLowerCase()??"";if(v&&q){const g=h(v);this._fieldsMap.set(v,w);this._fieldsMap.set(g,w);this._normalizedFieldsMap.set(q,w);r.push(`${g}:${w.type}:${this._timeZoneByFieldName?.get(v)}`);n.isDateField(w)?(this.dateFields.push(w),this._dateFieldsSet.add(w)):n.isNumericField(w)&&
(this._numericFieldsSet.add(w),this.numericFields.push(w));n.isObjectIDField(w)||n.isGlobalIDField(w)||(w.editable=null==w.editable||!!w.editable,w.nullable=null==w.nullable||!!w.nullable)}}r.sort();this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const r of this.fields)n.isObjectIDField(r)||n.isGlobalIDField(r)||r.nullable||void 0!==n.getFieldDefaultValue(r)||this._requiredFields.push(r)}return this._requiredFields}equals(r){return this.uid===r?.uid}has(r){return null!=
this.get(r)}get(r){if(r){var v=this._fieldsMap.get(r);if(v)return v;(v=this._fieldsMap.get(h(r))??this._normalizedFieldsMap.get(n.normalizeFieldName(r)?.toLowerCase()??""))&&this._fieldsMap.set(r,v);return v}}getTimeZone(r){r=this.get(r&&"string"!==typeof r?r.name:r);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):"date"===r.type||"esriFieldTypeDate"===r.type?(c.getLogger("esri.layers.support.FieldsIndex").error(new a("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),
d.utc):z.has(r.type)?d.unknown:null:null}getLuxonTimeZone(r){const v=this.getTimeZone(r);return v?v===d.unknown?e.UnknownTimeZone.instance:v===d.utc?k.FixedOffsetZone.utcInstance:f.getOrCreateMapValue(m,v,()=>k.IANAZone.create(v)):null}isDateField(r){return this._dateFieldsSet.has(this.get(r))}isTimeOnlyField(r){return n.isTimeOnlyField(this.get(r))}isNumericField(r){return this._numericFieldsSet.has(this.get(r))}normalizeFieldName(r){return this.get(r)?.name??void 0}toJSON(){return{fields:this.fields.map(r=>
b.isSerializable(r)?r.toJSON():r),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const z=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return t})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(M){return q.has(M)?q.get(M):"number"===typeof M?M:1}a.TaskPriority=void 0;(function(M){M.RESOURCE_CONTROLLER_IMMEDIATE="immediate";M.RESOURCE_CONTROLLER="schedule";M.SLIDE="slide";M.STREAM_DATA_LOADER="stream loader";M.ELEVATION_QUERY="elevation query";M.TERRAIN_SURFACE="terrain";M.SURFACE_GEOMETRY_UPDATES="surface geometry updates";M.LOD_RENDERER="LoD renderer";M.GRAPHICS_CORE="Graphics3D";M.I3S_CONTROLLER="I3S";M.POINT_CLOUD_LAYER="point cloud";
M.FEATURE_TILE_FETCHER="feature fetcher";M.OVERLAY="overlay";M.STAGE="stage";M.GRAPHICS_DECONFLICTOR="graphics deconflictor";M.FILTER_VISIBILITY="Graphics3D filter visibility";M.SCALE_VISIBILITY="Graphics3D scale visibility";M.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";M.POINT_OF_INTEREST_FREQUENT="POI frequent";M.POINT_OF_INTEREST_INFREQUENT="POI infrequent";M.LABELER="labeler";M.FEATURE_QUERY_ENGINE="feature query";M.FEATURE_TILE_TREE="feature tile tree";M.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
M.ELEVATION_ALIGNMENT="elevation alignment";M.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";M.TEXT_TEXTURE_ATLAS="text texture atlas";M.TEXTURE_UNLOAD="texture unload";M.LINE_OF_SIGHT_TOOL="line of sight tool";M.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";M.ELEVATION_PROFILE="elevation profile";M.SNAPPING="snapping";M.SHADOW_ACCUMULATOR="shadow accumulator";M.CLOUDS_GENERATOR="clouds generator";M.MAPVIEW_FETCH_QUEUE="mapview fetch queue";M.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update";
M.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue";M[M.NONE=0]="NONE";M[M.TEST_PRIO=1]="TEST_PRIO"})(a.TaskPriority||(a.TaskPriority={}));const q=new Map([[a.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[a.TaskPriority.RESOURCE_CONTROLLER,4],[a.TaskPriority.SLIDE,0],[a.TaskPriority.STREAM_DATA_LOADER,0],[a.TaskPriority.ELEVATION_QUERY,0],[a.TaskPriority.TERRAIN_SURFACE,1],[a.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[a.TaskPriority.LOD_RENDERER,2],[a.TaskPriority.GRAPHICS_CORE,
2],[a.TaskPriority.I3S_CONTROLLER,2],[a.TaskPriority.POINT_CLOUD_LAYER,2],[a.TaskPriority.FEATURE_TILE_FETCHER,2],[a.TaskPriority.CLOUDS_GENERATOR,2],[a.TaskPriority.OVERLAY,4],[a.TaskPriority.STAGE,4],[a.TaskPriority.GRAPHICS_DECONFLICTOR,4],[a.TaskPriority.FILTER_VISIBILITY,4],[a.TaskPriority.SCALE_VISIBILITY,4],[a.TaskPriority.FRUSTUM_VISIBILITY,4],[a.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[a.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[a.TaskPriority.LABELER,8],[a.TaskPriority.FEATURE_QUERY_ENGINE,
8],[a.TaskPriority.FEATURE_TILE_TREE,16],[a.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[a.TaskPriority.ELEVATION_ALIGNMENT,12],[a.TaskPriority.ELEVATION_ALIGNMENT_SCENE,14],[a.TaskPriority.TEXT_TEXTURE_ATLAS,12],[a.TaskPriority.TEXTURE_UNLOAD,12],[a.TaskPriority.LINE_OF_SIGHT_TOOL,16],[a.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[a.TaskPriority.SNAPPING,0],[a.TaskPriority.SHADOW_ACCUMULATOR,30],[a.TaskPriority.MAPVIEW_FETCH_QUEUE,0],[a.TaskPriority.MAPVIEW_LAYERVIEW_UPDATE,2],[a.TaskPriority.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,
0]]),g=m.Milliseconds(6.5),p=m.Milliseconds(1),x=m.Milliseconds(30),u=m.Milliseconds(1E3/30),D=m.Milliseconds(100);var J;(function(M){class C{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(B=>B.needsUpdate)}constructor(){this._updating=l.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new n("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new y;this._state=r.RenderState.INTERACTING;this._tasks=
new d;this._runQueue=new d;this._load=0;this._idleStateCallbacks=new d;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=h.watch(()=>z.SCHEDULER_LOG_SLOW_TASKS,B=>this._debug=B,h.initial);for(const B of Object.keys(a.TaskPriority))this.performanceInfo.tasks.set(a.TaskPriority[B],new n(a.TaskPriority[B]))}destroy(){this._tasks.toArray().forEach(B=>B.remove());this._tasks.clear();e.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(B){this._updatingChanged();
B&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(B,H){H=new U(this,B,H);this._tasks.push(H);this._updatingChanged();this.performanceInfo.tasks.has(B)||this.performanceInfo.tasks.set(B,new n(B));return H}registerIdleStateCallbacks(B,H){const N={idleBegin:B,idleEnd:H};this._idleStateCallbacks.push(N);this.state===r.RenderState.IDLE&&
this._idleUpdatesStartFired&&N.idleBegin();const K=this;return{remove:()=>this._removeIdleStateCallbacks(N),set idleBegin(X){K._idleUpdatesStartFired&&(N.idleEnd(),K._state===r.RenderState.IDLE&&X());N.idleBegin=X},set idleEnd(X){N.idleEnd=X}}}get load(){return this._load}set state(B){this._state!==B&&(this._state=B,this.state!==r.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(H=>H.idleEnd())))}get state(){return this._state}updateBudget(B){this._test&&
(this._test.usedBudget=0);++this._frameNumber;let H=g,N=B.frameDuration,K=p;switch(this.state){case r.RenderState.IDLE:H=m.Milliseconds(0);N=m.Milliseconds(Math.max(D,B.frameDuration));K=x;break;case r.RenderState.INTERACTING:N=m.Milliseconds(Math.max(u,B.frameDuration))}N=m.Milliseconds(N-B.elapsedFrameTime-H);if(this.state!==r.RenderState.IDLE&&N<p&&!this._forceTask)return this._forceTask=!0,!1;N=m.Milliseconds(Math.max(N,K));this._budget.reset(N,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=
this._forceTask=!1;switch(this.state){case r.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(B=>B.idleBegin()));this._runIdle();break;case r.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(m.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(B){this._idleUpdatesStartFired&&B.idleEnd();
this._idleStateCallbacks.removeUnordered(B)}removeTask(B){this._tasks.removeUnordered(B);this._runQueue.removeUnordered(B);this._updatingChanged()}_updateTask(B){this._tasks.forAll(H=>{H.name===B&&H.setPriority(B)})}_getState(B){if(this._runQueue.some(N=>N.name===B))return a.TaskState.SCHEDULED;let H=a.TaskState.IDLE;this._tasks.forAll(N=>{N.name===B&&N.needsUpdate&&(1>=N.schedulePriority?H=a.TaskState.READY:H!==a.TaskState.READY&&(H=a.TaskState.WAITING))});return H}_getRuntime(B){let H=0;this._tasks.forAll(N=>
{N.name===B&&(H+=N.runtime)});return H}_resetRuntimes(){this._tasks.forAll(B=>B.runtime=0)}_getRunning(){const B=new Map;this._tasks.forAll(N=>{N.needsUpdate&&B.set(N.name,(B.get(N.name)||0)+1)});if(0===B.size)return null;let H="";B.forEach((N,K)=>{H=1<N?H+` ${N}x ${K}`:H+` ${K}`});return H}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const B=this._tasks.reduce((H,N)=>N.needsUpdate?++H:H,0);this._load=.9*this._load+B*(1-.9)}_schedule(){this._runQueue.filterInPlace(B=>
{if(B.needsUpdate)return!0;B.schedulePriority=B.basePriority;return!1});for(this._tasks.forAll(B=>{0===B.basePriority&&B.needsUpdate&&!this._runQueue.includes(B)&&B.blockFrame!==this._frameNumber&&this._runQueue.unshift(B)});0===this._runQueue.length;){let B=!1;this._tasks.forAll(H=>{if(H.needsUpdate&&0!==H.schedulePriority&&0!==H.basePriority&&H.blockFrame!==this._frameNumber)switch(B=!0,H.schedulePriority){case 1:H.schedulePriority=0;this._runQueue.push(H);break;default:--H.schedulePriority}});
if(!B)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const B=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var H=this._budget.now();const N=this._runQueue.pop();this._budget.resetProgress();try{N.task.runTask(this._budget)===v.Yield&&(N.blockFrame=this._frameNumber)}catch(K){f.getLogger("esri.views.support.Scheduler").error(`Exception in task "${N.name}"`,K),N.blockFrame=this._frameNumber}!this._budget.hasProgressed&&N.blockFrame!==this._frameNumber&&
N.needsUpdate&&(N.blockFrame=this._frameNumber);N.schedulePriority=N.basePriority;H=this._budget.now()-H;N.runtime+=H;this._frameTaskTimes.set(N.priority,this._frameTaskTimes.get(N.priority)+H);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-B);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-B)}_startFrameTaskTimes(){for(const B of Object.keys(a.TaskPriority))this._frameTaskTimes.set(a.TaskPriority[B],
0)}_recordFrameTaskTimes(B){this._frameTaskTimes.forEach((H,N)=>this.performanceInfo.tasks.get(N).push(H));this.performanceInfo.total.push(B)}get test(){return this._test}}M.Scheduler=C;class U{get task(){return this._task.value}get updating(){return this._queue.running}constructor(B,H,N){this._scheduler=B;this.name=H;this.runtime=this.blockFrame=0;this._queue=new t.PromiseQueue;this._handles=new b;this.schedulePriority=this._basePriority=w(H);this._task=l.signal(null!=N?N:this._queue);this._handles.add(h.when(()=>
this.task.running,K=>B.taskRunningChanged(K)))}remove(){this.processQueue(E);this._scheduler.removeTask(this);this.schedule=Q.schedule;this.reschedule=Q.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(B){if(this.name!==B){this.name=B;B=w(B);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=B;this._basePriority=B}}get priority(){return this.name}set priority(B){this.setPriority(B)}get needsUpdate(){return this.updating||this.task.running}schedule(B,
H,N){return this._queue.push(B,H,N)}reschedule(B,H,N){return this._queue.unshift(B,H,N)}processQueue(B){return this._queue.runTask(B)}}class y{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=r.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(B){if(this.done)return!1;!0===B()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(B){this._enabled=B}reset(B,H){this._begin=this.now();this._budget=B;this._state=H;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}M.Budget=y})(J||={});a.TaskState=void 0;(function(M){M.SCHEDULED=
"s";M.READY="r";M.WAITING="w";M.IDLE="i"})(a.TaskState||(a.TaskState={}));const E=(()=>{const M=new J.Budget;M.enabled=!1;return M})();class L{remove(){}processQueue(){}schedule(M,C,U){try{if(k.isAborted(C)){const y=k.createAbortError();return U?Promise.resolve(U(y)):Promise.reject(y)}return k.when(M(E))}catch(y){return Promise.reject(y)}}reschedule(M,C,U){return this.schedule(M,C,U)}}const Q=new L;a.ImmediateTask=Q;a.getTaskPriority=w;a.newScheduler=function(){return new J.Scheduler};a.noBudget=
E;a.taskPriorities=q;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(a,b,c,f){class e{constructor(n,d){this._observable=new f.SimpleObservable;this._value=n;this._equalityFunction=d}get value(){c.trackAccess(this._observable);return this._value}set value(n){this._equalityFunction(n,this._value)||(this._value=n,this._observable.notify())}mutate(n){n(this._value);
this._observable.notify()}}a.signal=function(n,d=b.equalsShallow){return new e(n,d)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(a,b,c,f){class e{constructor(){this._tasks=[];this._runningTasks=c.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(d){if(0===
this.length)return f.Yield;for(;!d.done&&this._process(d);)d.madeProgress()}push(d,k,h){++this._runningTasks.value;return(new Promise((l,m)=>this._tasks.push(new n(l,m,d,k,h)))).finally(()=>--this._runningTasks.value)}unshift(d,k,h){++this._runningTasks.value;return(new Promise((l,m)=>this._tasks.unshift(new n(l,m,d,k,h)))).finally(()=>--this._runningTasks.value)}_process(d){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const h=b.isAborted(k.signal);if(h&&!k.abortCallback)k.reject(b.createAbortError());
else{const l=h?k.abortCallback?.(b.createAbortError()):k.callback(d);b.isPromiseLike(l)?l.then(k.resolve,k.reject):k.resolve(l)}}catch(h){k.reject(h)}return!0}cancelAll(){const d=b.createAbortError();for(const k of this._tasks)if(k.abortCallback){const h=k.abortCallback(d);k.resolve(h)}else k.reject(d);this._tasks.length=0}}class n{constructor(d,k,h,l,m){this.resolve=d;this.reject=k;this.callback=h;this.signal=l;this.abortCallback=m}}a.PromiseQueue=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(a){const b=Symbol("Yield");a.Yield=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){b=class extends b{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};a.__decorate([c.property()],b.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([c.property()],b.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);b=a.__decorate([d.subclass("esri.views.support.debugFlags")],b);return new b})},"esri/views/support/RenderState":function(){define(["exports"],function(a){a.RenderState=void 0;var b=a.RenderState||(a.RenderState={});b[b.ANIMATING=0]="ANIMATING";b[b.INTERACTING=1]="INTERACTING";b[b.IDLE=2]=
"IDLE";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./spatialRelationships ./StatisticDefinition ../../time/TimeExtent ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x){var u;c=new c.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let D=u=class extends f.JSONSupport{static from(J){return m.ensureClass(u,J)}constructor(J){super(J);this.aggregateIds=null;this.cacheHint=void 0;this.compactGeometryEnabled=!1;this.datumTransformation=null;this.defaultSpatialReferenceEnabled=
!1;this.dynamicDataSource=this.distance=void 0;this.geometry=this.gdbVersion=this.fullText=this.formatOf3DObjects=null;this.geometryPrecision=void 0;this.historicMoment=this.having=this.groupByFieldsForStatistics=null;this.maxAllowableOffset=void 0;this.maxRecordCountFactor=1;this.multipatchOption=null;this.num=void 0;this.resultType=this.relationParameter=this.rangeValues=this.quantizationParameters=this.pixelSize=this.parameterValues=this.outStatistics=this.outSpatialReference=this.outFields=this.orderByFields=
this.objectIds=null;this.returnDistinctValues=this.returnCentroid=!1;this.returnExceededLimitFeatures=!0;this.returnQueryGeometry=this.returnGeometry=!1;this.returnZ=this.returnM=void 0;this.sourceSpatialReference=null;this.spatialRelationship="intersects";this.start=void 0;this.timeExtent=this.text=this.sqlFormat=null;this.timeReferenceUnknownClient=!1;this.where=this.units=null}castDatumTransformation(J){return"number"===typeof J||"object"===typeof J?J:null}writeHistoricMoment(J,E){E.historicMoment=
J&&J.getTime()}writeParameterValues(J,E){if(J){const L={};for(const Q in J){const M=J[Q];Array.isArray(M)?L[Q]=M.map(C=>C instanceof Date?C.getTime():C):L[Q]=M instanceof Date?M.getTime():M}E.parameterValues=L}}writeStart(J,E){E.resultOffset=this.start;E.resultRecordCount=this.num||10;E.where="1\x3d1"}writeWhere(J,E){E.where=J||"1\x3d1"}clone(){return new u(e.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};D.MAX_MAX_RECORD_COUNT_FACTOR=5;a.__decorate([n.property({json:{write:!0}})],
D.prototype,"aggregateIds",void 0);a.__decorate([n.property({type:Boolean,json:{write:!0}})],D.prototype,"cacheHint",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"compactGeometryEnabled",void 0);a.__decorate([n.property({json:{write:!0}})],D.prototype,"datumTransformation",void 0);a.__decorate([d.cast("datumTransformation")],D.prototype,"castDatumTransformation",null);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"defaultSpatialReferenceEnabled",
void 0);a.__decorate([n.property({type:Number,json:{write:{overridePolicy(J){return{enabled:0<J}}}}})],D.prototype,"distance",void 0);a.__decorate([n.property({type:z.DataLayerSource,json:{write:!0}})],D.prototype,"dynamicDataSource",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"formatOf3DObjects",void 0);a.__decorate([n.property({type:[r],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&0<this.fullText.length}}}}})],D.prototype,"fullText",
void 0);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"gdbVersion",void 0);a.__decorate([n.property({types:b.geometryTypes,json:{read:t.fromJSON,write:!0}})],D.prototype,"geometry",void 0);a.__decorate([n.property({type:Number,json:{write:!0}})],D.prototype,"geometryPrecision",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],D.prototype,"groupByFieldsForStatistics",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"having",void 0);
a.__decorate([n.property({type:Date})],D.prototype,"historicMoment",void 0);a.__decorate([l.writer("historicMoment")],D.prototype,"writeHistoricMoment",null);a.__decorate([n.property({type:Number,json:{write:!0}})],D.prototype,"maxAllowableOffset",void 0);a.__decorate([n.property({type:Number,cast(J){return 1>J?1:J>D.MAX_MAX_RECORD_COUNT_FACTOR?D.MAX_MAX_RECORD_COUNT_FACTOR:J},json:{write:{overridePolicy(J){return{enabled:1<J}}}}})],D.prototype,"maxRecordCountFactor",void 0);a.__decorate([n.property({type:["xyFootprint"],
json:{write:!0}})],D.prototype,"multipatchOption",void 0);a.__decorate([n.property({type:Number,json:{read:{source:"resultRecordCount"}}})],D.prototype,"num",void 0);a.__decorate([n.property({json:{write:!0}})],D.prototype,"objectIds",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],D.prototype,"orderByFields",void 0);a.__decorate([n.property({type:[String],json:{write:!0}})],D.prototype,"outFields",void 0);a.__decorate([n.property({type:p,json:{name:"outSR",write:!0}})],D.prototype,
"outSpatialReference",void 0);a.__decorate([n.property({type:[q],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&0<this.outStatistics.length}}}}})],D.prototype,"outStatistics",void 0);a.__decorate([n.property({json:{write:!0}})],D.prototype,"parameterValues",void 0);a.__decorate([l.writer("parameterValues")],D.prototype,"writeParameterValues",null);a.__decorate([n.property({type:x,json:{write:!0}})],D.prototype,"pixelSize",void 0);a.__decorate([n.property({type:v,
json:{write:!0}})],D.prototype,"quantizationParameters",void 0);a.__decorate([n.property({type:[Object],json:{write:!0}})],D.prototype,"rangeValues",void 0);a.__decorate([n.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],D.prototype,"relationParameter",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"resultType",void 0);a.__decorate([n.property({type:Boolean,
json:{default:!1,write:!0}})],D.prototype,"returnCentroid",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"returnDistinctValues",void 0);a.__decorate([n.property({type:Boolean,json:{default:!0,write:!0}})],D.prototype,"returnExceededLimitFeatures",void 0);a.__decorate([n.property({type:Boolean,json:{write:!0}})],D.prototype,"returnGeometry",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"returnQueryGeometry",void 0);
a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"returnM",void 0);a.__decorate([n.property({type:Boolean,json:{write:{overridePolicy(J){return{enabled:J}}}}})],D.prototype,"returnZ",void 0);a.__decorate([n.property({type:p,json:{write:!0}})],D.prototype,"sourceSpatialReference",void 0);a.__decorate([k.enumeration(w.spatialRelKebabDict,{ignoreUnknown:!1,name:"spatialRel"})],D.prototype,"spatialRelationship",void 0);a.__decorate([n.property({type:Number,json:{read:{source:"resultOffset"}}})],
D.prototype,"start",void 0);a.__decorate([l.writer("start"),l.writer("num")],D.prototype,"writeStart",null);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"sqlFormat",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],D.prototype,"text",void 0);a.__decorate([n.property({type:g,json:{write:!0}})],D.prototype,"timeExtent",void 0);a.__decorate([n.property({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"timeReferenceUnknownClient",void 0);a.__decorate([k.enumeration(c,
{ignoreUnknown:!1}),n.property({json:{write:{overridePolicy(J){return{enabled:!!J&&null!=this.distance&&0<this.distance}}}}})],D.prototype,"units",void 0);a.__decorate([n.property({type:String,json:{write:{overridePolicy(J){return{enabled:null!=J||null!=this.start&&0<this.start}}}}})],D.prototype,"where",void 0);a.__decorate([l.writer("where")],D.prototype,"writeWhere",null);return D=u=a.__decorate([h.subclass("esri.rest.support.Query")],D)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w){function q(){u||=m.createTypeReader({types:g()});return u}function g(){D||={key:"type",base:null,typeMap:{"data-layer":a.DataLayerSource,"map-layer":z.MapLayerSource}};return D}var p,x;c=c.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});a.JoinTableDataSource=p=class extends f.JSONSupport{constructor(J){super(J);this.type="join-table"}readLeftTableSource(J,E,L){return q()(J,E,L)}castLeftTableSource(J){return l.ensureOneOfType(g(),
J)}readRightTableSource(J,E,L){return q()(J,E,L)}castRightTableSource(J){return l.ensureOneOfType(g(),J)}clone(){const {leftTableKey:J,rightTableKey:E,leftTableSource:L,rightTableSource:Q,joinType:M}=this,C={leftTableKey:J,rightTableKey:E,leftTableSource:L?.clone()??void 0,rightTableSource:Q?.clone()??void 0,joinType:M};return new p(C)}};b.__decorate([d.enumeration({joinTable:"join-table"})],a.JoinTableDataSource.prototype,"type",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.JoinTableDataSource.prototype,
"leftTableKey",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.JoinTableDataSource.prototype,"rightTableKey",void 0);b.__decorate([e.property({json:{write:!0}})],a.JoinTableDataSource.prototype,"leftTableSource",void 0);b.__decorate([k.reader("leftTableSource")],a.JoinTableDataSource.prototype,"readLeftTableSource",null);b.__decorate([n.cast("leftTableSource")],a.JoinTableDataSource.prototype,"castLeftTableSource",null);b.__decorate([e.property({json:{write:!0}})],a.JoinTableDataSource.prototype,
"rightTableSource",void 0);b.__decorate([k.reader("rightTableSource")],a.JoinTableDataSource.prototype,"readRightTableSource",null);b.__decorate([n.cast("rightTableSource")],a.JoinTableDataSource.prototype,"castRightTableSource",null);b.__decorate([d.enumeration(c)],a.JoinTableDataSource.prototype,"joinType",void 0);a.JoinTableDataSource=p=b.__decorate([h.subclass("esri.layers.support.source.JoinTableDataSource")],a.JoinTableDataSource);let u=null,D=null;n={key:"type",base:null,typeMap:{"join-table":a.JoinTableDataSource,
"query-table":r.QueryTableDataSource,raster:v.RasterDataSource,table:w.TableDataSource}};a.DataLayerSource=x=class extends f.JSONSupport{constructor(J){super(J);this.type="data-layer"}clone(){const {fields:J,dataSource:E}=this;return new x({fields:J,dataSource:E})}};b.__decorate([d.enumeration({dataLayer:"data-layer"})],a.DataLayerSource.prototype,"type",void 0);b.__decorate([e.property({type:[t],json:{write:!0}})],a.DataLayerSource.prototype,"fields",void 0);b.__decorate([e.property({types:n,json:{write:!0}})],
a.DataLayerSource.prototype,"dataSource",void 0);a.DataLayerSource=x=b.__decorate([h.subclass("esri.layers.support.source.DataLayerSource")],a.DataLayerSource);a.DataLayerSource.from=l.ensureType(a.DataLayerSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){var z;const r=new b.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});b=z=class extends c.JSONSupport{constructor(v){super(v);
this.alias=null;this.defaultValue=void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(v,{description:w}){v=null;try{v=w?JSON.parse(w):null}catch(q){}return v?.value??null}readValueType(v,{description:w}){v=null;try{v=w?JSON.parse(w):null}catch(q){}return v?r.fromJSON(v.fieldValueType):null}clone(){return new z({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"alias",void 0);a.__decorate([f.property({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0);a.__decorate([f.property()],b.prototype,"description",void 0);a.__decorate([h.reader("description")],b.prototype,"readDescription",
null);a.__decorate([f.property({types:m.types,json:{read:{reader:m.fromJSON},write:!0}})],b.prototype,"domain",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0);a.__decorate([f.property({type:e.Integer,json:{write:{overridePolicy(v){return{enabled:Number.isFinite(v)}}}}})],b.prototype,"length",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,
"nullable",void 0);a.__decorate([k.enumeration(t.kebabDict)],b.prototype,"type",void 0);a.__decorate([f.property()],b.prototype,"valueType",void 0);a.__decorate([h.reader("valueType",["description"])],b.prototype,"readValueType",null);a.__decorate([f.property({type:Boolean,json:{read:!1}})],b.prototype,"visible",void 0);return b=z=a.__decorate([l.subclass("esri.layers.support.Field")],b)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(a,b,c,f,e,n){b={key:"type",base:f,typeMap:{range:n,"coded-value":c,inherited:e}};a.CodedValueDomain=c;a.DomainBase=f;a.InheritedDomain=e;a.RangeDomain=n;a.fromJSON=function(d){if(!d?.type)return null;switch(d.type){case "range":return n.fromJSON(d);case "codedValue":return c.fromJSON(d);case "inherited":return e.fromJSON(d)}return null};a.types=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(a,b,c,f,e,n,d,k,h){var l;f=l=class extends h{constructor(m){super(m);this.codedValues=null;this.type="coded-value"}getName(m){let t=null;if(this.codedValues){const z=String(m);this.codedValues.some(r=>{String(r.code)===z&&(t=r.name);return!!t})}return t}clone(){return new l({codedValues:b.clone(this.codedValues),name:this.name})}};a.__decorate([c.property({type:[k.CodedValue],json:{write:!0}})],f.prototype,"codedValues",void 0);a.__decorate([n.enumeration({codedValue:"coded-value"})],f.prototype,
"type",void 0);return f=l=a.__decorate([d.subclass("esri.layers.support.CodedValueDomain")],f)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){var h;a.CodedValue=h=class extends c.JSONSupport{constructor(l){super(l);this.code=this.name=null}clone(){return new h({name:this.name,
code:this.code})}};b.__decorate([f.property({type:String,json:{write:!0}})],a.CodedValue.prototype,"name",void 0);b.__decorate([f.property({type:[String,Number],json:{write:!0}})],a.CodedValue.prototype,"code",void 0);a.CodedValue=h=b.__decorate([k.subclass("esri.layers.support.CodedValue")],a.CodedValue);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h){b=new b.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});c=class extends c.JSONSupport{constructor(l){super(l);this.type=this.name=null}};a.__decorate([f.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);a.__decorate([k.enumeration(b)],c.prototype,"type",void 0);return c=a.__decorate([h.subclass("esri.layers.support.Domain")],c)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(a,b,c,f,e,n,d,k){var h;b=h=class extends k{constructor(l){super(l);this.type="inherited"}clone(){return new h}};a.__decorate([n.enumeration({inherited:"inherited"})],b.prototype,"type",void 0);return b=h=a.__decorate([d.subclass("esri.layers.support.InheritedDomain")],b)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends k{constructor(l){super(l);this.minValue=this.maxValue=null;this.type="range"}clone(){return new h({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};a.__decorate([b.property({json:{type:[Number],read:{source:"range",reader(l,m){return m.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(l,m,t){m[t]=[this.minValue||0,l]}}}})],c.prototype,"maxValue",void 0);a.__decorate([b.property({json:{type:[Number],
read:{source:"range",reader(l,m){return m.range?.[0]}},write:{target:"range",writer(l,m,t){m[t]=[l,this.maxValue||0]}}}})],c.prototype,"minValue",void 0);a.__decorate([n.enumeration({range:"range"})],c.prototype,"type",void 0);return c=h=a.__decorate([d.subclass("esri.layers.support.RangeDomain")],c)})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h){var l;a.MapLayerSource=l=class extends c.JSONSupport{constructor(m){super(m);this.type="map-layer"}clone(){const {mapLayerId:m,gdbVersion:t}=this;return new l({mapLayerId:m,gdbVersion:t})}};b.__decorate([k.enumeration({mapLayer:"map-layer"})],a.MapLayerSource.prototype,"type",void 0);b.__decorate([f.property({type:e.Integer,json:{write:!0}})],a.MapLayerSource.prototype,"mapLayerId",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.MapLayerSource.prototype,
"gdbVersion",void 0);a.MapLayerSource=l=b.__decorate([h.subclass("esri.layers.support.source.MapLayerSource")],a.MapLayerSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){var z;a.QueryTableDataSource=z=class extends f.JSONSupport{constructor(r){super(r);this.type="query-table"}clone(){const {workspaceId:r,query:v,oidFields:w,spatialReference:q,geometryType:g}=this,p={workspaceId:r,query:v,oidFields:w,spatialReference:q?.clone()??void 0,geometryType:g};return new z(p)}};b.__decorate([h.enumeration({queryTable:"query-table"})],a.QueryTableDataSource.prototype,"type",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,
"workspaceId",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,"query",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,"oidFields",void 0);b.__decorate([e.property({type:m,json:{write:!0}})],a.QueryTableDataSource.prototype,"spatialReference",void 0);b.__decorate([h.enumeration(t.featureGeometryTypeKebabDictionary)],a.QueryTableDataSource.prototype,"geometryType",void 0);a.QueryTableDataSource=z=b.__decorate([l.subclass("esri.layers.support.source.QueryTableDataSource")],
a.QueryTableDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k,h){var l;a.RasterDataSource=l=class extends c.JSONSupport{constructor(m){super(m);
this.type="raster"}clone(){const {workspaceId:m,dataSourceName:t}=this;return new l({workspaceId:m,dataSourceName:t})}};b.__decorate([k.enumeration({raster:"raster"})],a.RasterDataSource.prototype,"type",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.RasterDataSource.prototype,"dataSourceName",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.RasterDataSource.prototype,"workspaceId",void 0);a.RasterDataSource=l=b.__decorate([h.subclass("esri.layers.support.source.RasterDataSource")],
a.RasterDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k,h){var l;a.TableDataSource=l=class extends c.JSONSupport{constructor(m){super(m);
this.type="table"}clone(){const {workspaceId:m,gdbVersion:t,dataSourceName:z}=this;return new l({workspaceId:m,gdbVersion:t,dataSourceName:z})}};b.__decorate([k.enumeration({table:"table"})],a.TableDataSource.prototype,"type",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.TableDataSource.prototype,"workspaceId",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],a.TableDataSource.prototype,"gdbVersion",void 0);b.__decorate([f.property({type:String,json:{write:!0}})],
a.TableDataSource.prototype,"dataSourceName",void 0);a.TableDataSource=l=b.__decorate([h.subclass("esri.layers.support.source.TableDataSource")],a.TableDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k){b=class extends b.ClonableMixin(c.JSONSupport){constructor(h){super(h);this.searchType=this.searchTerm=this.operator=this.onFields=null}};a.__decorate([f.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&0<this.onFields.length}}}}})],b.prototype,"onFields",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"operator",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"searchTerm",
void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"searchType",void 0);return b=a.__decorate([k.subclass("esri.rest.support.FullTextSearch")],b)})},"esri/core/Clonable":function(){define("exports ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k,h,l){f=m=>{m=class extends m{clone(){var t=h.getProperties(this);d.assertIsSome(t,"unable to clone instance of non-accessor class");
var z=t.metadata;const r=t.store,v={};t=new Map;for(var w in z){var q=z[w];const g=r?.originOf(w),p=q.clonable;if(q.readOnly||!1===p||g!==k.OriginId.USER&&g!==k.OriginId.DEFAULTS&&g!==k.OriginId.WEB_MAP&&g!==k.OriginId.WEB_SCENE)continue;q=this[w];let x=null;x="function"===typeof p?p(q):"reference"===p?q:e.tryClone(q);if(null==q||null!=x)g===k.OriginId.DEFAULTS?t.set(w,x):v[w]=x}z=new (Object.getPrototypeOf(this).constructor)(v);if(t.size&&(w=h.getProperties(z)?.store))for(const [g,p]of t)w.set(g,
p,k.OriginId.DEFAULTS);return z}};return m=b.__decorate([l.subclass("esri.core.Clonable")],m)};a.Clonable=class extends f(c){};a.Clonable=b.__decorate([l.subclass("esri.core.Clonable")],a.Clonable);a.ClonableMixin=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(a,b,c,f,e,n,d,k,h,l){var m;b=new c.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});f=m=class extends f.JSONSupport{constructor(t){super(t);this.extent=null;this.mode="view";this.originPosition="upper-left";this.tolerance=1}clone(){return new m(e.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a.__decorate([n.property({type:l,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],f.prototype,"extent",void 0);
a.__decorate([n.property({type:["view","edit"],json:{write:!0}})],f.prototype,"mode",void 0);a.__decorate([n.property({type:String,json:{read:b.read,write:b.write}})],f.prototype,"originPosition",void 0);a.__decorate([n.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],f.prototype,"tolerance",void 0);return f=m=a.__decorate([h.subclass("esri.rest.support.QuantizationParameters")],f)})},"esri/rest/support/spatialRelationships":function(){define(["exports",
"../../core/jsonMap"],function(a,b){b=new b.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});a.spatialRelKebabDict=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/support/StatisticDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(a,b,c,f,e,n,d,k,h){var l;b=new b.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",
percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});c=l=class extends c.JSONSupport{constructor(m){super(m);this.maxVertexCount=this.maxRecordCount=this.maxPointCount=void 0;this.statisticParameters=this.statisticType=this.outStatisticFieldName=this.onStatisticField=null}writeStatisticParameters(m,t){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)t.statisticParameters=
f.clone(m)}clone(){return new l({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:f.clone(this.statisticParameters)})}};a.__decorate([e.property({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0);a.__decorate([e.property({type:Number,json:{write:!0}})],c.prototype,"maxRecordCount",void 0);
a.__decorate([e.property({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0);a.__decorate([e.property({type:String,json:{read:{source:"statisticType",reader:b.read},write:{target:"statisticType",writer:b.write}}})],c.prototype,"statisticType",void 0);a.__decorate([e.property({type:Object})],
c.prototype,"statisticParameters",void 0);a.__decorate([h.writer("statisticParameters")],c.prototype,"writeStatisticParameters",null);return c=l=a.__decorate([k.subclass("esri.rest.support.StatisticDefinition")],c)})},"esri/time/TimeExtent":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/timeUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./timeZoneUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;b=t=class extends b.JSONSupport{static get allTime(){return z}static get empty(){return r}static fromArray(v){return new t({start:null!=v[0]?new Date(v[0]):v[0],end:null!=v[1]?new Date(v[1]):v[1]})}constructor(v){super(v);this.start=this.end=null}readEnd(v,w){return null!=w.end?new Date(w.end):null}writeEnd(v,w){w.end=v?.getTime()??null}get isAllTime(){return this.equals(t.allTime)}get isEmpty(){return this.equals(t.empty)}readStart(v,w){return null!=w.start?
new Date(w.start):null}writeStart(v,w){w.start=v?.getTime()??null}clone(){return new t({end:this.end,start:this.start})}equals(v){if(!v)return!1;const w=this.start?.getTime()??this.start,q=this.end?.getTime()??this.end,g=v.start?.getTime()??v.start;v=v.end?.getTime()??v.end;return w===g&&q===v}expandTo(v,w=m.system){if(this.isEmpty||this.isAllTime)return this.clone();let q=this.start;q&&=c.truncateDate(q,v,w);let g=this.end;if(g){const p=c.truncateDate(g,v,w);g=g.getTime()===p.getTime()?p:c.offsetDate(p,
1,v,w)}return new t({start:q,end:g})}intersection(v){if(!v)return this.clone();if(this.isEmpty||v.isEmpty)return t.empty;if(this.isAllTime)return v.clone();if(v.isAllTime)return this.clone();const w=this.start?.getTime()??-Infinity,q=this.end?.getTime()??Infinity,g=v.start?.getTime()??-Infinity;v=v.end?.getTime()??Infinity;let p,x;g>=w&&g<=q?p=g:w>=g&&w<=v&&(p=w);q>=g&&q<=v?x=q:v>=w&&v<=q&&(x=v);return null==p||null==x||isNaN(p)||isNaN(x)?t.empty:new t({start:-Infinity===p?null:new Date(p),end:Infinity===
x?null:new Date(x)})}offset(v,w,q=m.system){if(this.isEmpty||this.isAllTime)return this.clone();const g=new t,{start:p,end:x}=this;null!=p&&(g.start=c.offsetDate(p,v,w,q));null!=x&&(g.end=c.offsetDate(x,v,w,q));return g}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(v){if(!v||v.isEmpty)return this.clone();if(this.isEmpty)return v.clone();if(this.isAllTime||v.isAllTime)return z.clone();const w=null!=this.start&&null!=v.start?new Date(Math.min(this.start.getTime(),
v.start.getTime())):null;v=null!=this.end&&null!=v.end?new Date(Math.max(this.end.getTime(),v.end.getTime())):null;return new t({start:w,end:v})}};a.__decorate([f.property({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"end",void 0);a.__decorate([k.reader("end")],b.prototype,"readEnd",null);a.__decorate([l.writer("end")],b.prototype,"writeEnd",null);a.__decorate([f.property({readOnly:!0,json:{read:!1}})],b.prototype,"isAllTime",null);a.__decorate([f.property({readOnly:!0,json:{read:!1}})],
b.prototype,"isEmpty",null);a.__decorate([f.property({type:Date,json:{write:{allowNull:!0}}})],b.prototype,"start",void 0);a.__decorate([k.reader("start")],b.prototype,"readStart",null);a.__decorate([l.writer("start")],b.prototype,"writeStart",null);a=b=t=a.__decorate([h.subclass("esri.time.TimeExtent")],b);const z=new b,r=new b({start:void 0,end:void 0});return a})},"esri/views/3d/layers/graphics/pipeline/Tile3DManager":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/asyncUtils ../../../../../core/promiseUtils ../../../../../core/ReactiveMap ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){a.Tile3DManager=class extends c{constructor(t){super(t);this._removing=0;this._tiles=new n}destroy(){for(const t of this._tiles.values())t.remove();this._tiles.clear()}get updating(){if(0<this._removing)return!0;for(const t of this._tiles.values())if(!t.finished)return!0;return!1}async onTileTreeChange(t){const {added:z,removed:r}=t;t=this._tiles;const v=[];for(const w of r){const q=t.get(w);null!=q&&(q.abort(),t.delete(w),v.push({tileId:w}))}for(const w of z)t.has(w.id)||
t.set(w.id,f.createTask(q=>this._addTile(w,q)));await this._removeTiles(v)}async _addTile(t,z){t=await this.addTile(t,z);e.throwIfAborted(z);return t}async _removeTiles(t){this._removing++;await this.removeTiles(t);this._removing--}};b.__decorate([d.property()],a.Tile3DManager.prototype,"updating",null);b.__decorate([d.property({constructOnly:!0})],a.Tile3DManager.prototype,"addTile",void 0);b.__decorate([d.property({constructOnly:!0})],a.Tile3DManager.prototype,"removeTiles",void 0);b.__decorate([d.property()],
a.Tile3DManager.prototype,"_removing",void 0);a.Tile3DManager=b.__decorate([m.subclass("esri.views.3d.layers.graphics.pipeline.Tile3DManager")],a.Tile3DManager);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/ReactiveMap":function(){define(["./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(a,b){class c{constructor(f){this._observable=new b.SimpleObservable;this._map=new Map(f)}get size(){a.trackAccess(this._observable);return this._map.size}clear(){0<
this._map.size&&(this._map.clear(),this._observable.notify())}delete(f){(f=this._map.delete(f))&&this._observable.notify();return f}entries(){a.trackAccess(this._observable);return this._map.entries()}forEach(f,e){a.trackAccess(this._observable);this._map.forEach((n,d)=>f.call(e,n,d,this),e)}get(f){a.trackAccess(this._observable);return this._map.get(f)}has(f){a.trackAccess(this._observable);return this._map.has(f)}keys(){a.trackAccess(this._observable);return this._map.keys()}set(f,e){this._map.set(f,
e);this._observable.notify();return this}values(){a.trackAccess(this._observable);return this._map.values()}[Symbol.iterator](){a.trackAccess(this._observable);return this._map[Symbol.iterator]()}get [Symbol.toStringTag](){return this._map[Symbol.toStringTag]}}return c})},"esri/views/3d/layers/graphics/pipeline/featureSet/TiledFeatureStore":function(){define(["exports","../../../../../../core/Evented","../../../../../../core/libs/rbush/PooledRBush","../../../../../../layers/graphics/centroid","../../../../../../layers/graphics/OptimizedGeometry"],
function(a,b,c,f,e){class n{constructor(m,t){this._index=m;this._view=t}getObjectId(){return this._view.getObjectId(this._index)}getAttribute(m){return this._view.getAttribute(this._index,m)}getAttributeAsTimestamp(m){return this._view.getAttributeAsTimestamp(this._index,m)}getAttributes(){return this._view.getAttributes(this._index)}getOptimizedGeometry(){return this._view.getOptimizedGeometry(this._index)}getCentroid(m){return this._view.getCentroid(this._index,m)}getBounds(){return this._view.getBounds(this._index)}getBoundingBox(){return this._view.getBoundingBox(this._index)}cloneWithGeometry(m){return new d(this._index,
this._view,m)}}class d extends n{constructor(m,t,z){super(m,t);this._geometryOverride=z}getOptimizedGeometry(){return this._geometryOverride}getCentroid(m){return f.getCentroidOptimizedGeometry(new e,this._geometryOverride,m.hasZ,m.hasM)}}class k{constructor(){this._storedTiles=new Map;this._pageBounds=new Map;this.events=new b;this.featureAdapter=h.shared}addTile(m){this._storedTiles.set(m.descriptor.id,m);for(const t of m.pages)this._addPage(t)}removeTile(m){const t=this._storedTiles,z=t.get(m);
if(null!=z){t.delete(m);for(const r of z.pages)this._removePage(r)}}_addPage(m){const {featureCount:t}=m;if(0!==t){var z=new c.PooledRBush(9,v=>m.getBounds(v)),r=[];for(let v=0;v<t;++v)r[v]=v;z.load(r);this._pageBounds.set(m,z);this.events.emit("changed")}}_removePage(m){this._pageBounds.delete(m);this.events.emit("changed")}clear(){this._storedTiles.clear();this._pageBounds.clear();this.events.emit("changed")}forEach(m){for(const [t,z]of this._pageBounds)z.all(r=>m(new n(r,t)))}forEachInBounds(m,
t){l.minX=m[0];l.minY=m[1];l.maxX=m[2];l.maxY=m[3];for(const [z,r]of this._pageBounds)r.search(l,v=>t(new n(v,z)))}forEachBounds(m,t){for(const z of m)t(z.getBoundingBox())}getFullExtent(m){let t=Infinity,z=Infinity,r=-Infinity,v=-Infinity;for(const w of this._pageBounds.values()){const {minX:q,minY:g,maxX:p,maxY:x}=w.toJSON();t=Math.min(t,q);z=Math.min(z,g);r=Math.min(r,p);v=Math.min(v,x)}return{xmin:t,ymin:z,xmax:r,ymax:v,spatialReference:m}}}class h{getObjectId(m){return m.getObjectId()}getAttribute(m,
t){return m.getAttribute(t)}getAttributeAsTimestamp(m,t){return m.getAttributeAsTimestamp(t)}getAttributes(m){return m.getAttributes()}getGeometry(m){return m.getOptimizedGeometry()}getCentroid(m,t){return m.getCentroid(t)}cloneWithGeometry(m,t){return m.cloneWithGeometry(t)}}h.shared=new h;const l=new c.BBox;a.FeatureHandle=n;a.TiledFeatureStore=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../has",
"../../PooledArray","../../../chunks/quickselect"],function(a,b,c,f,e){function n(Q,M){for(p.clear();Q;){if(!0===Q.leaf)for(const C of Q.children)M(C);else p.pushArray(Q.children);Q=p.pop()??null}}function d(Q,M){k(Q,0,Q.children.length,M,Q)}function k(Q,M,C,U,y){y||=new E([]);y.minX=Infinity;y.minY=Infinity;y.maxX=-Infinity;y.maxY=-Infinity;for(let B=M,H;B<C;B++)H=Q.children[B],h(y,Q.leaf?U(H):H);return y}function h(Q,M){Q.minX=Math.min(Q.minX,M.minX);Q.minY=Math.min(Q.minY,M.minY);Q.maxX=Math.max(Q.maxX,
M.maxX);Q.maxY=Math.max(Q.maxY,M.maxY)}function l(Q,M){return Q.minX-M.minX}function m(Q,M){return Q.minY-M.minY}function t(Q){return(Q.maxX-Q.minX)*(Q.maxY-Q.minY)}function z(Q){return Q.maxX-Q.minX+(Q.maxY-Q.minY)}function r(Q,M){return Q.minX<=M.minX&&Q.minY<=M.minY&&M.maxX<=Q.maxX&&M.maxY<=Q.maxY}function v(Q,M){return M.minX<=Q.maxX&&M.minY<=Q.maxY&&M.maxX>=Q.minX&&M.maxY>=Q.minY}function w(Q,M,C,U,y){for(M=[M,C];M.length;){C=M.pop();const B=M.pop();if(C-B<=U)continue;const H=B+Math.ceil((C-
B)/U/2)*U;e.quickselect(Q,H,B,C,y);M.push(B,H,H,C)}}class q{constructor(Q=9,M){this._compareMinX=l;this._compareMinY=m;this._toBBox=C=>C;this._maxEntries=Math.max(4,Q||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));M&&("function"===typeof M?this._toBBox=M:this._initFormat(M));this.clear()}destroy(){this.clear();g.prune();p.prune();x.prune();u.prune()}all(Q){n(this._data,Q)}search(Q,M){let C=this._data;const U=this._toBBox;if(v(Q,C))for(g.clear();C;){for(let y=0,B=C.children.length;y<
B;y++){const H=C.children[y],N=C.leaf?U(H):H;v(Q,N)&&(C.leaf?M(H):r(Q,N)?n(H,M):g.push(H))}C=g.pop()}}collides(Q){let M=this._data;const C=this._toBBox;if(!v(Q,M))return!1;for(g.clear();M;){for(let U=0,y=M.children.length;U<y;U++){const B=M.children[U],H=M.leaf?C(B):B;if(v(Q,H)){if(M.leaf||r(Q,H))return!0;g.push(B)}}M=g.pop()}return!1}load(Q){if(!Q.length)return this;if(Q.length<this._minEntries){for(let M=0,C=Q.length;M<C;M++)this.insert(Q[M]);return this}Q=this._build(Q.slice(),0,Q.length-1,0);
if(this._data.children.length)if(this._data.height===Q.height)this._splitRoot(this._data,Q);else{if(this._data.height<Q.height){const M=this._data;this._data=Q;Q=M}this._insert(Q,this._data.height-Q.height-1,!0)}else this._data=Q;return this}insert(Q){Q&&this._insert(Q,this._data.height-1);return this}clear(){this._data=new E([]);return this}remove(Q){if(!Q)return this;let M=this._data,C=null,U=0,y=!1,B;const H=this._toBBox(Q);x.clear();for(u.clear();M||0<x.length;){M||(M=x.pop(),C=x.data[x.length-
1],U=u.pop()??0,y=!0);if(M.leaf&&(B=b.indexOf(M.children,Q,M.children.length,M.indexHint),-1!==B)){M.children.splice(B,1);x.push(M);this._condense(x);break}y||M.leaf||!r(M,H)?C?(U++,M=C.children[U],y=!1):M=null:(x.push(M),u.push(U),U=0,C=M,M=M.children[0])}return this}toJSON(){return this._data}fromJSON(Q){this._data=Q;return this}_build(Q,M,C,U){var y=C-M+1,B=this._maxEntries;if(y<=B)return Q=new E(Q.slice(M,C+1)),d(Q,this._toBBox),Q;U||(U=Math.ceil(Math.log(y)/Math.log(B)),B=Math.ceil(y/B**(U-1)));
const H=new L([]);H.height=U;y=Math.ceil(y/B);B=y*Math.ceil(Math.sqrt(B));for(w(Q,M,C,B,this._compareMinX);M<=C;M+=B){const N=Math.min(M+B-1,C);w(Q,M,N,y,this._compareMinY);for(let K=M;K<=N;K+=y)H.children.push(this._build(Q,K,Math.min(K+y-1,N),U-1))}d(H,this._toBBox);return H}_insert(Q,M,C){var U=this._toBBox;C=C?Q:U(Q);x.clear();U=this._data;for(var y=M,B=x;;){B.push(U);if(!0===U.leaf||B.length-1===y)break;let H=Infinity,N=Infinity,K=void 0;for(let X=0,V=U.children.length;X<V;X++){const da=U.children[X],
aa=t(da),fa=(Math.max(da.maxX,C.maxX)-Math.min(da.minX,C.minX))*(Math.max(da.maxY,C.maxY)-Math.min(da.minY,C.minY))-aa;fa<N?(N=fa,H=aa<H?aa:H,K=da):fa===N&&aa<H&&(H=aa,K=da)}U=K||U.children[0]}U.children.push(Q);for(h(U,C);0<=M;)if(x.data[M].children.length>this._maxEntries)this._split(x,M),M--;else break;for(Q=x;0<=M;M--)h(Q.data[M],C)}_split(Q,M){const C=Q.data[M];var U=C.children.length;const y=this._minEntries;this._chooseSplitAxis(C,y,U);if(U=this._chooseSplitIndex(C,y,U))U=C.children.splice(U,
C.children.length-U),U=C.leaf?new E(U):new L(U),U.height=C.height,d(C,this._toBBox),d(U,this._toBBox),M?Q.data[M-1].children.push(U):this._splitRoot(C,U)}_splitRoot(Q,M){this._data=new L([Q,M]);this._data.height=Q.height+1;d(this._data,this._toBBox)}_chooseSplitIndex(Q,M,C){let U,y,B=void 0;U=y=Infinity;for(let N=M;N<=C-M;N++){var H=k(Q,0,N,this._toBBox);const K=k(Q,N,C,this._toBBox),X=Math.max(0,Math.min(H.maxX,K.maxX)-Math.max(H.minX,K.minX))*Math.max(0,Math.min(H.maxY,K.maxY)-Math.max(H.minY,K.minY));
H=t(H)+t(K);X<U?(U=X,B=N,y=H<y?H:y):X===U&&H<y&&(y=H,B=N)}return B}_chooseSplitAxis(Q,M,C){const U=Q.leaf?this._compareMinX:l,y=Q.leaf?this._compareMinY:m,B=this._allDistMargin(Q,M,C,U);M=this._allDistMargin(Q,M,C,y);B<M&&Q.children.sort(U)}_allDistMargin(Q,M,C,U){Q.children.sort(U);U=this._toBBox;var y=k(Q,0,M,U);const B=k(Q,C-M,C,U);let H=z(y)+z(B);for(let N=M;N<C-M;N++){const K=Q.children[N];h(y,Q.leaf?U(K):K);H+=z(y)}for(C=C-M-1;C>=M;C--)y=Q.children[C],h(B,Q.leaf?U(y):y),H+=z(B);return H}_condense(Q){for(let M=
Q.length-1;0<=M;M--){const C=Q.data[M];if(0===C.children.length)if(0<M){const U=Q.data[M-1],y=U.children;y.splice(b.indexOf(y,C,y.length,U.indexHint),1)}else this.clear();else d(C,this._toBBox)}}_initFormat(Q){const M=["return a"," - b",";"];this._compareMinX=new Function("a","b",M.join(Q[0]));this._compareMinY=new Function("a","b",M.join(Q[1]));this._toBBox=new Function("a","return {minX: a"+Q[0]+", minY: a"+Q[1]+", maxX: a"+Q[2]+", maxY: a"+Q[3]+"};")}}const g=new f,p=new f,x=new f,u=new f({deallocator:void 0});
class D{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class J extends D{constructor(){super(...arguments);this.height=1;this.indexHint=new b.PositionHint}}class E extends J{constructor(Q){super();this.children=Q;this.leaf=!0}}class L extends J{constructor(Q){super();this.children=Q;this.leaf=!1}}a.BBox=D;a.PooledRBush=q;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(a){function b(e,n,d,k,
h){for(;k>d;){if(600<k-d){var l=k-d+1,m=n-d+1,t=Math.log(l),z=.5*Math.exp(2*t/3);t=.5*Math.sqrt(t*z*(l-z)/l)*(0>m-l/2?-1:1);b(e,n,Math.max(d,Math.floor(n-m*z/l+t)),Math.min(k,Math.floor(n+(l-m)*z/l+t)),h)}l=e[n];m=d;z=k;c(e,d,n);for(0<h(e[k],l)&&c(e,d,k);m<z;){c(e,m,z);m++;for(z--;0>h(e[m],l);)m++;for(;0<h(e[z],l);)z--}0===h(e[d],l)?c(e,d,z):(z++,c(e,z,k));z<=n&&(d=z+1);n<=z&&(k=z-1)}}function c(e,n,d){var k=e[n];e[n]=e[d];e[d]=k}function f(e,n){return e<n?-1:e>n?1:0}a.quickselect=function(e,n,d,
k,h){b(e,n,d||0,k||e.length-1,h||f)}})},"esri/layers/graphics/centroid":function(){define(["exports"],function(a){function b(f,e,n,d,k,h){h=k?h?4:3:h?3:2;let l=n,m=n+h,t=0,z=0,r=n=0,v=0;for(let w=0,q=d-1;w<q;w++,l+=h,m+=h){d=e[l];const g=e[l+1],p=e[l+2],x=e[m],u=e[m+1],D=e[m+2];let J=d*u-x*g;r+=J;t+=(d+x)*J;z+=(g+u)*J;k&&(J=d*D-x*p,n+=(p+D)*J,v+=J);d<f[0]&&(f[0]=d);d>f[1]&&(f[1]=d);g<f[2]&&(f[2]=g);g>f[3]&&(f[3]=g);k&&(p<f[4]&&(f[4]=p),p>f[5]&&(f[5]=p))}0<r&&(r*=-1);0<v&&(v*=-1);if(!r)return null;
f=[t,z,.5*r];k&&(f[3]=n,f[4]=.5*v);return f}function c(f,e,n,d,k){k=d?k?4:3:k?3:2;let h=e,l=e+k,m=0,t=0,z=0,r=0;for(let g=0,p=n-1;g<p;g++,h+=k,l+=k){var v=f[h];const x=f[h+1],u=f[h+2],D=f[l],J=f[l+1],E=f[l+2];if(d){var w=D-v;var q=J-x;const L=E-u;w=Math.sqrt(w*w+q*q+L*L)}else w=D-v,q=J-x,w=Math.sqrt(w*w+q*q);w&&(m+=w,d?(v=[v+.5*(D-v),x+.5*(J-x),u+.5*(E-u)],t+=w*v[0],z+=w*v[1],r+=w*v[2]):(v=[v+.5*(D-v),x+.5*(J-x)],t+=w*v[0],z+=w*v[1]))}return 0<m?d?[t/m,z/m,r/m]:[t/m,z/m]:0<n?d?[f[e],f[e+1],f[e+2]]:
[f[e],f[e+1]]:null}a.getCentroidOptimizedGeometry=function(f,e,n,d){if(!e?.lengths.length)return null;f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);const k=f.coords,h=[],l=n?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:m,coords:t}=e;var z=n?d?4:3:d?3:2;
let r=0;for(const v of m){const w=b(l,t,r,v,n,d);w&&h.push(w);r+=v*z}h.sort((v,w)=>{let q=v[2]-w[2];0===q&&n&&(q=v[4]-w[4]);return q});h.length&&(z=6*h[0][2],k[0]=h[0][0]/z,k[1]=h[0][1]/z,n&&(z=6*h[0][4],k[2]=0!==z?h[0][3]/z:0),k[0]<l[0]||k[0]>l[1]||k[1]<l[2]||k[1]>l[3]||n&&(k[2]<l[4]||k[2]>l[5]))&&(k.length=0);if(!k.length)if(e=e.lengths[0]?c(t,0,m[0],n,d):null)k[0]=e[0],k[1]=e[1],n&&2<e.length&&(k[2]=e[2]);else return null;return f};a.lineCentroid=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/layers/graphics/pipeline/fetching/Tile3DFetcher":function(){define("exports ../../../../../../core/promiseUtils ../../../../../../geometry/support/aaBoundingRect ../../../../../../rest/query/operations/query ../Tile ../featureSet/PBFPointFeatureSetView".split(" "),function(a,b,c,f,e,n){class d{constructor(k,h,l,m,t){this.spatialReference=k;this.url=l;this.objectIdField=m;this.capabilities=t;const {supportsMaxRecordCountFactor:z,maxRecordCount:r}=this.capabilities.query;l=z?4:1;this._pageSize=
Math.min(8E3,(r??8E3)*l);h=h.clone();h.cacheHint=!0;h.resultType="tile";h.outSpatialReference=k;h.returnGeometry=!0;h.returnZ=!0;h.maxRecordCountFactor=l;h.num=this._pageSize;h.outFields=[m];this._baseQuery=h}async fetch(k,h){var {spatialReference:l}=this,m=c.toExtent(k.extent,l);l=this._baseQuery.clone();l.geometry=m;m=[];let t=0,z=!1,r=1;for(;!z;){var v=[];for(let w=0;w<r;++w)v.push(this._fetchPage(l,t++,h));v=await Promise.all(v);b.throwIfAborted(h);for(const w of v)v=0!==w.featureCount,z||=!w.exceededTransferLimit||
!v,v&&m.push(w);r=Math.min(r+1,4)}return new e.Tile(k,m)}async _fetchPage(k,h,l){k=k.clone();k.start=h*this._pageSize;h=(await f.executeQueryPBFBuffer(this.url,k,{signal:l})).data;b.throwIfAborted(l);return new n.PBFPointFeatureSetView(h)}}a.Tile3DFetcher=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define("exports ../../../request ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),
function(a,b,c,f,e,n,d,k,h){function l(r,v){if(v&&"extent"===r.type)return`${r.xmin},${r.ymin},${r.xmax},${r.ymax}`;if(v&&"point"===r.type)return`${r.x},${r.y}`;r=r.toJSON();delete r.spatialReference;return JSON.stringify(r)}function m(r,v){const w=r.geometry,q=r.toJSON();delete q.compactGeometryEnabled;delete q.defaultSpatialReferenceEnabled;let g,p,x;null!=w&&(p=w.spatialReference,x=n.srToRESTValue(p),q.geometryType=f.getJsonType(w),q.geometry=l(w,r.compactGeometryEnabled),q.inSR=x);q.groupByFieldsForStatistics&&
(q.groupByFieldsForStatistics=q.groupByFieldsForStatistics.join(","));q.objectIds&&(q.objectIds=q.objectIds.join(","));q.orderByFields&&(q.orderByFields=q.orderByFields.join(","));!q.outFields||!q.returnDistinctValues&&(v?.returnCountOnly||v?.returnExtentOnly||v?.returnIdsOnly)?delete q.outFields:q.outFields.includes("*")?q.outFields="*":q.outFields=q.outFields.join(",");q.outSR?(q.outSR=n.srToRESTValue(q.outSR),g=r.outSpatialReference):w&&(q.returnGeometry||q.returnCentroid)&&(q.outSR=q.inSR,g=p);
q.returnGeometry&&delete q.returnGeometry;q.outStatistics&&(q.outStatistics=JSON.stringify(q.outStatistics));q.fullText&&(q.fullText=JSON.stringify(q.fullText));q.pixelSize&&(q.pixelSize=JSON.stringify(q.pixelSize));q.quantizationParameters&&(r.defaultSpatialReferenceEnabled&&null!=p&&null!=r.quantizationParameters?.extent&&p.equals(r.quantizationParameters.extent.spatialReference)&&delete q.quantizationParameters.extent.spatialReference,q.quantizationParameters=JSON.stringify(q.quantizationParameters));
q.parameterValues&&(q.parameterValues=JSON.stringify(q.parameterValues));q.rangeValues&&(q.rangeValues=JSON.stringify(q.rangeValues));q.dynamicDataSource&&(q.layer=JSON.stringify({source:q.dynamicDataSource}),delete q.dynamicDataSource);if(q.timeExtent){const {start:u,end:D}=q.timeExtent;if(null!=u||null!=D)q.time=u===D?u:`${null==u?"null":u},${null==D?"null":D}`;delete q.timeExtent}r.defaultSpatialReferenceEnabled&&null!=p&&null!=g&&p.equals(g)&&(q.defaultSR=q.inSR,delete q.inSR,delete q.outSR);
return q}function t(r,v,w){return z(r,v,"pbf",w)}async function z(r,v,w,q={},g={}){r="string"===typeof r?c.urlToObject(r):r;var p=(await e.normalizeCentralMeridian(v.geometry?[v.geometry]:[],null,{signal:q.signal}))?.[0];null!=p&&(v=v.clone(),v.geometry=p);p=d.mapParameters({...r.query,f:w,...g,...m(v,g)});return b(c.join(r.path,null==v.formatOf3DObjects||g.returnCountOnly||g.returnExtentOnly||g.returnIdsOnly?"query":"query3d"),{...q,responseType:"pbf"===w?"array-buffer":"json",query:{...p,...q.query}})}
a.encodeGeometry=l;a.executeQuery=async function(r,v,w,q){r=null!=v.timeExtent&&v.timeExtent.isEmpty?{data:{features:[]}}:await z(r,v,"json",q);h.applyFeatureSetZUnitScaling(v,w,r.data);return r};a.executeQueryForCount=function(r,v,w){return null!=v.timeExtent&&v.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):z(r,v,"json",w,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=async function(r,v,w){if(null!=v.timeExtent&&v.timeExtent.isEmpty)return{data:{count:0,extent:null}};r=await z(r,
v,"json",w,{returnExtentOnly:!0,returnCountOnly:!0});v=r.data;if(v.hasOwnProperty("extent"))return r;if(v.features)throw Error("Layer does not support extent calculation.");if(v.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return r};a.executeQueryForIds=function(r,v,w){return null!=v.timeExtent&&v.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):z(r,v,"json",w,{returnIdsOnly:!0})};a.executeQueryPBF=async function(r,v,w,q){if(null!=v.timeExtent&&v.timeExtent.isEmpty)return{data:w.createFeatureResult()};
r=await t(r,v,q);r.data=k.parsePBFFeatureQuery(r.data,w);return r};a.executeQueryPBFBuffer=t;a.queryToQueryStringParameters=m;a.runQuery=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(a){function b(c){const f={};for(const e in c){if("declaredClass"===e)continue;const n=c[e];if(null!=n&&"function"!==typeof n)if(Array.isArray(n)){f[e]=[];for(let d=0;d<n.length;d++)f[e][d]=b(n[d])}else"object"===typeof n?n.toJSON&&
(f[e]=JSON.stringify(n)):f[e]=n}return f}a.mapParameters=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(a,b){a.parsePBFFeatureQuery=function(c,f){var e=b.parseFeatureQuery(c,f);c=e.queryResult.featureResult;f=e.queryResult.queryGeometry;e=e.queryResult.queryGeometryType;if(c&&c.features&&c.features.length&&c.objectIdFieldName){const n=c.objectIdFieldName;for(const d of c.features)d.attributes&&
(d.objectId=d.attributes[n])}c&&(c.queryGeometry=f,c.queryGeometryType=e);return c};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(a,b,c,f,e){function n(E){return E>=u.length?null:u[E]}function d(E,L,Q){E=E.asUnsafe();for(Q=L.createPointGeometry(Q);E.next();)switch(E.tag()){case 3:var M=
E.getUInt32();M=E.pos()+M;let C=0;for(;E.pos()<M;)L.addCoordinatePoint(Q,E.getSInt64(),C++);break;default:E.skip()}return Q}function k(E,L,Q){E=E.asUnsafe();const M=L.createGeometry(Q);for(Q=2+(Q.hasZ?1:0)+(Q.hasM?1:0);E.next();)switch(E.tag()){case 2:var C=E.getUInt32();C=E.pos()+C;for(var U=0;E.pos()<C;)L.addLength(M,E.getUInt32(),U++);break;case 3:C=E.getUInt32();C=E.pos()+C;U=0;for(L.allocateCoordinates(M);E.pos()<C;)L.addCoordinate(M,E.getSInt64(),U),U++,U===Q&&(U=0);break;default:E.skip()}return M}
function h(E){E=E.asUnsafe();const L=new f;let Q="esriGeometryPoint";for(;E.next();)switch(E.tag()){case 2:var M=E.getUInt32();for(M=E.pos()+M;E.pos()<M;)L.lengths.push(E.getUInt32());break;case 3:M=E.getUInt32();for(M=E.pos()+M;E.pos()<M;)L.coords.push(E.getSInt64());break;case 1:Q=e.optimizedGeometryTypes[E.getEnum()];break;default:E.skip()}return{queryGeometry:L,queryGeometryType:Q}}function l(E){for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:return E.getString();case 2:return E.getFloat();
case 3:return E.getDouble();case 4:return E.getSInt32();case 5:return E.getUInt32();case 6:return E.getInt64();case 7:return E.getUInt64();case 8:return E.getSInt64();case 9:return E.getBool();default:return E.skip(),null}return null}function m(E){E=E.asUnsafe();const L={type:n(0)};for(;E.next();)switch(E.tag()){case 1:L.name=E.getString();break;case 2:L.type=n(E.getEnum());break;case 3:L.alias=E.getString();break;case 4:var Q=E.getEnum();Q=Q>=D.length?null:D[Q];L.sqlType=Q;break;case 5:E.skip();
break;case 6:L.defaultValue=E.getString();break;default:E.skip()}return L}function t(E){const L={};for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:L.name=E.getString();break;case 2:L.isSystemMaintained=E.getBool();break;default:E.skip()}return L}function z(E,L,Q,M){const C=L.createFeature(Q);let U=0;for(;E.next();)switch(E.tag()){case 1:const y=M[U++].name;C.attributes[y]=E.processMessage(l);break;case 2:C.geometry=E.processMessageWithArgs(k,L,Q);break;case 4:C.centroid=E.processMessageWithArgs(d,
L,Q);break;default:E.skip()}return C}function r(E){const L=[1,1,1,1];for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:L[0]=E.getDouble();break;case 2:L[1]=E.getDouble();break;case 4:L[2]=E.getDouble();break;case 3:L[3]=E.getDouble();break;default:E.skip()}return L}function v(E){const L=[0,0,0,0];for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:L[0]=E.getDouble();break;case 2:L[1]=E.getDouble();break;case 4:L[2]=E.getDouble();break;case 3:L[3]=E.getDouble();break;default:E.skip()}return L}function w(E){const L=
{originPosition:0>=J.length?null:J[0]};for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:var Q=E.getEnum();L.originPosition=Q>=J.length?null:J[Q];break;case 2:L.scale=E.processMessage(r);break;case 3:L.translate=E.processMessage(v);break;default:E.skip()}return L}function q(E){const L={};for(E=E.asUnsafe();E.next();)switch(E.tag()){case 1:L.shapeAreaFieldName=E.getString();break;case 2:L.shapeLengthFieldName=E.getString();break;case 3:L.units=E.getString();break;default:E.skip()}return L}function g(E,
L){for(L=L.createSpatialReference();E.next();)switch(E.tag()){case 1:L.wkid=E.getUInt32();break;case 5:L.wkt=E.getString();break;case 2:L.latestWkid=E.getUInt32();break;case 3:L.vcsWkid=E.getUInt32();break;case 4:L.latestVcsWkid=E.getUInt32();break;default:E.skip()}return L}function p(E,L){const Q=L.createFeatureResult();E=E.asUnsafe();Q.geometryType=0>=L.geometryTypes.length?null:L.geometryTypes[0];let M=!1;for(;E.next();)switch(E.tag()){case 1:Q.objectIdFieldName=E.getString();break;case 3:Q.globalIdFieldName=
E.getString();break;case 4:Q.geohashFieldName=E.getString();break;case 5:Q.geometryProperties=E.processMessage(q);break;case 7:var C=E.getEnum();Q.geometryType=C>=L.geometryTypes.length?null:L.geometryTypes[C];break;case 8:Q.spatialReference=E.processMessageWithArgs(g,L);break;case 10:Q.hasZ=E.getBool();break;case 11:Q.hasM=E.getBool();break;case 12:Q.transform=E.processMessage(w);break;case 9:Q.exceededTransferLimit=E.getBool();break;case 13:L.addField(Q,E.processMessage(m));break;case 15:M||(L.prepareFeatures(Q),
M=!0);L.addFeature(Q,E.processMessageWithArgs(z,L,Q,Q.fields));break;case 2:Q.uniqueIdField=E.processMessage(t);break;default:E.skip()}L.finishFeatureResult(Q);return Q}function x(E,L){const Q={};let M=null;for(;E.next();)switch(E.tag()){case 4:M=E.processMessageWithArgs(h);break;case 1:Q.featureResult=E.processMessageWithArgs(p,L);break;default:E.skip()}null!=M&&Q.featureResult&&L.addQueryGeometry(Q,M);return Q}const u="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML esriFieldTypeBigInteger esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "),
D="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),J=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(E,L){try{const Q=new c(new Uint8Array(E),new DataView(E));
for(E={};Q.next();)switch(Q.tag()){case 2:E.queryResult=Q.processMessageWithArgs(x,L);break;default:Q.skip()}return E}catch(Q){throw new b("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:Q});}};a.parseField=m;a.parseFieldType=n;a.parseTransform=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(a,b,c,f,e,n){const d=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class k{constructor(h){this._options=h;this.geometryTypes=d;this._vertexDimension=this._coordinatePtr=0}createFeatureResult(){return new e}prepareFeatures(h){this._vertexDimension=2;h.hasZ&&this._vertexDimension++;h.hasM&&this._vertexDimension++}finishFeatureResult(h){if(h?.features&&h.hasZ&&this._options.sourceSpatialReference&&h.spatialReference&&!c.equals(h.spatialReference,
this._options.sourceSpatialReference)&&!h.spatialReference.vcsWkid){var l=b.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),m=b.getMetersPerVerticalUnitForSR(h.spatialReference);l/=m;if(1!==l)for(const t of h.features)if(f.hasGeometry(t))for(h=t.geometry.coords,m=2;m<h.length;m+=3)h[m]*=l}}addFeature(h,l){h.features.push(l)}createFeature(){return new f.OptimizedFeature}createSpatialReference(){return{wkid:0}}createGeometry(){return new n}addField(h,l){h.fields.push(l)}allocateCoordinates(h){h.coords.length=
h.lengths.reduce((l,m)=>l+m,0)*this._vertexDimension;this._coordinatePtr=0}addCoordinate(h,l){h.coords[this._coordinatePtr++]=l}addCoordinatePoint(h,l){h.coords.push(l)}addLength(h,l){h.lengths.push(l)}addQueryGeometry(h,l){h.queryGeometry=l.queryGeometry;h.queryGeometryType=l.queryGeometryType}createPointGeometry(){return new n}}a.OptimizedFeatureSetParserContext=k;a.optimizedGeometryTypes=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports",
"../../../geometry/support/zscale"],function(a,b){a.applyFeatureSetZUnitScaling=function(c,f,e){if(e?.features&&e.hasZ&&(c=b.getGeometryZScaler(e.geometryType,f,c.outSpatialReference),null!=c))for(const n of e.features)c(n.geometry)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/Tile":function(){define(["exports"],function(a){class b{constructor(c,f){this.descriptor=c;this.pages=f}}a.Tile=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/layers/graphics/pipeline/featureSet/PBFPointFeatureSetView":function(){define("exports ../../../../../../core/Error ../../../../../../core/pbf ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../core/libs/rbush/PooledRBush ../../../../../../geometry/support/aaBoundingBox ../../../../../../geometry/support/quantizationUtils ../../../../../../layers/graphics/OptimizedGeometry ../../../../../../layers/support/FieldsIndex ../../../../../../rest/query/operations/pbfFeatureServiceParser".split(" "),
function(a,b,c,f,e,n,d,k,h,l){function m(){const v=new b("pbf-parsing-failed","Error while parsing PBF",Error());console.error(v);throw v;}function t(v){var w=v.getLength();for(w=v.pos()+w;v.pos()<w&&v.next();)switch(v.tag()){case 1:return v.getString();case 2:return v.getFloat();case 3:return v.getDouble();case 4:return v.getSInt32();case 5:return v.getUInt32();case 6:return v.getInt64();case 7:return v.getUInt64();case 8:return v.getSInt64();case 9:return v.getBool();default:return v.skip(),null}return null}
class z{constructor(v){this._reader=v=new c(new Uint8Array(v),new DataView(v));a:{for(;v.next();)switch(v.tag()){case 2:b:{for(var w=v.getMessage();w.next();)switch(w.tag()){case 1:let p=v=void 0;var q=w.getMessage();let x=w=!1,u=0;const D=[],J=[],E=[];for(;q.next();)switch(q.tag()){case 1:v=q.getString();break;case 7:0!==q.getEnum()&&m();break;case 9:w=q.getBool()??!1;break;case 12:p=d.normalizeTransform(q.processMessage(l.parseTransform));break;case 13:var g=q.processMessage(l.parseField);g.index=
u++;D.push(g);break;case 15:J.push(q.pos());g=q.getUInt32();for(g=q.pos()+g;q.pos()<g&&q.next();)switch(q.tag()){case 1:E.push(q.pos());q.skip();break;default:q.skip()}break;case 10:x=q.getBool()??!1;break;default:q.skip()}q=new h(D);null!=p&&x&&null!=v&&q.has(v)||m();v={transform:p,exceededTransferLimit:w,fieldsIndex:q,objectIdFieldName:v,featureIndices:J,attributeIndices:E};break b;default:w.skip()}m();v=void 0}break a;default:v.skip()}m();v=void 0}this._index=v}get featureCount(){return this._index.featureIndices.length}get exceededTransferLimit(){return this._index.exceededTransferLimit}getObjectId(v){return this.getAttribute(v,
this._index.objectIdFieldName)}getAttribute(v,w){const {_index:{fieldsIndex:q,attributeIndices:g}}=this;w=q.get(w)?.index;if(null!=w){var p=this._reader;p.move(g[v*q.fields.length+w]);return t(p)}}getAttributeAsTimestamp(v,w){v=this.getAttribute(v,w);return"string"===typeof v?(new Date(v)).getTime():"number"===typeof v||null==v?v:null}getAttributes(v){const {_index:{fieldsIndex:w,attributeIndices:q}}=this;v*=w.fields.length;const g=this._reader,p={};for(const x of w.fields)g.move(q[v+x.index]),p[x.name]=
t(g);return p}getCoordinates(v,w,q=0){const g=this._reader,{transform:p,featureIndices:x}=this._index,{scale:u,translate:D}=p;g.move(x[v]);this._readCoordinates(u,D,w,q)}getOptimizedGeometry(v){const w=f.create();this.getCoordinates(v,w);return new k([],w)}getCentroid(v,{hasZ:w,hasM:q}){this.getCoordinates(v,r);const [g,p,x]=r;v=[g,p];w&&(v[3]=x);q&&(v[w?4:3]=0);return new k([],v)}getBounds(v){this.getCoordinates(v,r);const [w,q]=r;v=new e.BBox;v.minX=w;v.minY=q;v.maxX=w;v.maxY=q;return v}getBoundingBox(v){this.getCoordinates(v,
r);const [w,q,g]=r;return n.fromValues(w,q,g,w,q,g)}readAllObjectIds(v,w=0){const q=this._reader,{_index:g,featureCount:p}=this,{objectIdFieldName:x,attributeIndices:u,fieldsIndex:D}=g,J=D.get(x).index,E=D.fields.length;for(let L=0;L<p;++L)q.move(u[L*E+J]),v[w++]=t(q);return w}readAllCoordinates(v,w=0){const q=this._reader,{transform:g,featureIndices:p}=this._index,{scale:x,translate:u}=g;for(const D of p)q.move(D),w=this._readCoordinates(x,u,v,w);return w}_readCoordinates([v,w,q],[g,p,x],u,D){const J=
this._reader;var E=J.getLength();for(E=J.pos()+E;J.pos()<E&&J.next();)switch(J.tag()){case 2:var L=J.getLength();for(L=J.pos()+L;J.pos()<L&&J.next();)switch(J.tag()){case 3:J.getUInt32();u[D++]=g+v*J.getSInt64();u[D++]=p+w*J.getSInt64();u[D++]=x+q*J.getSInt64();break;default:J.skip()}break;default:J.skip()}return D}}const r=f.create();a.PBFPointFeatureSetView=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/RenderCommandContext":function(){define(["exports",
"../../../../../ViewingMode","./RenderCommandEncoder"],function(a,b,c){class f{constructor(e){this._idCounter=0;this._bufferWriters=new Map;this._dispatchRenderCommandsCallback=async()=>{};this.globalViewingMode=!1;this.globalViewingMode=e.viewingMode===b.ViewingMode.Global;this._dispatchRenderCommandsCallback=e.dispatchRenderCommandsCallback}generateId(e=""){return`${e}${this._idCounter++}`}createEncoder(){return new c.RenderCommandEncoder(this)}async dispatchRenderCommands(e,n){this._dispatchRenderCommandsCallback(e,
n)}registerRenderGeometryBufferWriter(e,n){this._bufferWriters.set(e,n)}getRenderGeometryBufferWriter(e){return this._bufferWriters.get(e)}}a.RenderCommandContext=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/ViewingMode":function(){define(["exports"],function(a){a.ViewingMode=void 0;(function(b){b[b.Global=1]="Global";b[b.Local=2]="Local"})(a.ViewingMode||(a.ViewingMode={}));a.stringFromViewingMode=function(b){return b===a.ViewingMode.Global?"global":"local"};a.viewingModeFromString=
function(b){return"global"===b?a.ViewingMode.Global:a.ViewingMode.Local};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/RenderCommandEncoder":function(){define("exports ../../../../../../geometry/support/Indices ./FeaturePipelineRenderManager ./RenderGeometryBufferWriter ../../../../webgl-engine/lib/BoundingInfo ../../../../webgl-engine/lib/VertexAttribute ../../../../webgl-engine/materials/DefaultMaterial".split(" "),function(a,b,
c,f,e,n,d){class k{constructor(h){this._context=h;this._commands=[];this._transferables=new Set}createMaterial(h){const l=this._context,m=l.generateId("material");switch(h){case "default":var t=new d.DefaultMaterial({},{spherical:this._context.globalViewingMode,doublePrecisionRequiresObfuscation:!0});t=new f.RenderGeometryBufferWriter(t);l.registerRenderGeometryBufferWriter(m,t);break;case "hud":t=c.createHudMaterial(null,this._context.globalViewingMode)[0],t=new f.RenderGeometryBufferWriter(t),l.registerRenderGeometryBufferWriter(m,
t)}this._commands.push({id:"create-material",type:h,materialId:m});return m}createDirectRenderer(h){const l=this._context.generateId("material-renderer");this._commands.push({id:"create-direct-renderer",materialRendererId:l,materialId:h});return l}addDirectRendererGeometry(h,l,m){const t=l.materialId,z=this._context.getRenderGeometryBufferWriter(t);if(null==z)throw Error(`no bufferwriter found for material ${t}`);l=z.createBuffer(l,m);this._transferables.add(l.data);this._commands.push({id:"add-direct-renderer-geometry",
renderGeometryId:h,materialId:t,renderGeometryBuffer:l,localOrigin:m})}removeDirectRendererGeometry(h){this._commands.push({id:"remove-direct-renderer-geometry",renderGeometryId:h})}createLodRenderer(h){const l=this._context.generateId("lod-renderer");h={levels:h.levels.map(m=>({components:m.components.map(t=>{var z=t.attributes.get(n.VertexAttribute.POSITION);if(!z||0===z.indices.length)throw Error("positions attribute expected");var r=b.getContinuousIndexArray(z.indices.length/3);z=new e.BoundingInfo(r,
3,z);r=this._context.getRenderGeometryBufferWriter(t.materialId);if(null==r)throw Error("writer not found");r=r.createBuffer(t,null);this._transferables.add(r.data);return{materialId:t.materialId,renderGeometryBuffer:r,boundingInfo:{bbMax:z.bbMax,bbMin:z.bbMin}}}),minScreenSpaceRadius:m.minScreenSpaceRadius}))};this._commands.push({id:"create-lod-renderer",lodRendererId:l,lodRenderGeometry:h});return l}addLodInstances(h,l){this._commands.push({id:"add-lod-instances",lodRendererId:h,data:l});this._transferables.add(l.featureIds.buffer);
this._transferables.add(l.globalTransforms.buffer);this._transferables.add(l.localTransforms.buffer)}removeLodInstances(h,l){this._commands.push({id:"remove-lod-instances",lodRendererId:h,featureIds:l});this._transferables.add(l.buffer)}async dispatch(){const h=this._commands,l=Array.from(this._transferables);this._clearCommandBuffer();this._context.dispatchRenderCommands(h,l)}_clearCommandBuffer(){this._commands=[];this._transferables.clear()}}Object.defineProperty(a,"VertexAttribute",{enumerable:!0,
get:()=>n.VertexAttribute});a.RenderCommandEncoder=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],function(a,b){function c(l){let m=!0;for(const t of l){if(65536<=t)return b.isArray(l)?new Uint32Array(l):l;256<=t&&(m=!1)}return m?new Uint8Array(l):new Uint16Array(l)}function f(l){if(1===l)return d;if(l<b.nativeArrayMaxSize)return Array.from(new Uint16Array(k.buffer,0,l));if(l<k.length)return new Uint16Array(k.buffer,
0,l);if(l>n.length){n=new Uint32Array(Math.max(2*n.length,l));for(let m=0;m<n.length;m++)n[m]=m}return new Uint32Array(n.buffer,0,l)}function e(l){if(1===l)return d;if(l<b.nativeArrayMaxSize)return Array(l).fill(0);l>h.length&&(h=new Uint8Array(Math.max(2*h.length,l)));return new Uint8Array(h.buffer,0,l)}let n=(()=>{const l=new Uint32Array(131072);for(let m=0;m<l.length;++m)l[m]=m;return l})();const d=[0],k=(()=>{const l=new Uint16Array(65536);for(let m=0;m<l.length;++m)l[m]=m;return l})();let h=
new Uint8Array(65536);a.compactIndices=function(l){if(b.isArray(l)){if(l.length<b.nativeArrayMaxSize)return l}else if(l.length<b.nativeArrayMaxSize)return Array.from(l);let m=!0,t=!0;l.some((z,r)=>{m=m&&0===z;t=t&&z===r;return!m&&!t});return m?e(l.length):t?f(l.length):b.isArray(l)||l.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?c(l):l};a.getContinuousIndexArray=f;a.getZeroIndexArray=e;a.newIndexArray=function(l){return l<=b.nativeArrayMaxSize?Array(l):65536>=l?new Uint16Array(l):new Uint32Array(l)};
a.newIntArray=function(l){return l<=b.nativeArrayMaxSize?Array(l):new Uint32Array(l)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/FeaturePipelineRenderManager":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/handleUtils ../../../../../../core/maybe ../../../../../../core/Logger ../../../../../../core/has ../../../../../../core/RandomLCG ../../../../../../core/Error ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../../../ViewingMode ../../placementUtils ./DirectRenderer ./LodRenderer ../../../../support/engineContent/sdfPrimitives ../../../../webgl-engine/lib/basicInterfaces ../../../../webgl-engine/materials/DefaultMaterial ../../../../webgl-engine/materials/HUDMaterial ../../../../webgl-engine/materials/pbrUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u){function D(L,Q){const M={anchorPosition:r.namedAnchorToHUDMaterialAnchorPos.center,occlusionTest:!0,hasSlicePlane:!1,color:[1,0,0,1],outlineColor:[0,0,0,1],outlineSize:1};null!=L&&(L=L.fromData("circle-icon",()=>q.createTexture("circle")),M.textureId=L.texture.id,M.textureIsSignedDistanceField=!0,M.sampleSignedDistanceFieldTexelCenter=q.requiresHalfTexelOffset("circle"));M.distanceFieldBoundingBox=E;return[new x.HUDMaterial(M,Q),null]}function J(L,
Q,M){const C={usePBR:Q.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:u.schematicMRRFactors,ambient:m.ONES,diffuse:m.ONES,hasSlicePlane:Q.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:Q.castShadows,offsetTransparentBackfaces:!Q.isPrimitive},U=C.opacity??1,y=1>U;C.transparent=y;C.opacity=U;C.cullFace=y?g.CullFaceOptions.None:g.CullFaceOptions.Back;Q.screenSizePerspectiveEnabled&&(C.screenSizePerspective=L.screenSizePerspectiveSettings);C.externalColor=t.ONES;C.isInstanced=!0;return new p.DefaultMaterial(C,
{spherical:M,doublePrecisionRequiresObfuscation:!0})}a.FeaturePipelineRenderManager=class extends c{constructor(L){super();this.layerUid=this.view=null;this._renderGeometries=new Map;this._materials=new Map;this._directRenderers=new Map;this._lodRenderers=new Map;this.view=L.view;this.layerUid=L.layerUid}initialize(){}destroy(){}async executeRenderCommands(L){for(const Q of L)switch(Q.id){case "create-material":await this._createMaterial(Q);break;case "create-direct-renderer":await this._createDirectRenderer(Q);
break;case "add-direct-renderer-geometry":await this._addDirectRendererGeometry(Q);break;case "remove-direct-renderer-geometry":await this._removeDirectRendererGeometry(Q);break;case "create-lod-renderer":await this._createLodRenderer(Q);break;case "add-lod-instances":await this._addLodInstances(Q);break;case "remove-lod-instances":await this._removeLodInstances(Q)}}async _createMaterial(L){const {view:Q}=this,{sharedSymbolResources:M}=Q;if(null==M)throw Error("No shared symbol resources found!");
const {textures:C}=M,U=Q.state.viewingMode===z.ViewingMode.Global;let y=null;switch(L.type){case "default":y=J(M,{physicalBasedRenderingEnabled:!0,slicePlaneEnabled:!1,castShadows:!0,isPrimitive:!0,screenSizePerspectiveEnabled:!0,doublePrecisionRequiresObfuscation:Q._stage.renderView.renderingContext.driverTest.doublePrecisionRequiresObfuscation.result},U);break;case "hud":const [B,H]=D(C,U);this.addHandles([f.makeHandle(()=>e.releaseMaybe(H))]);y=B;break;default:throw Error(`unable to create unknown material type ${L.type}`);
}this._materials.set(L.materialId,y)}_getMaterial(L){return this._materials.get(L)}async _createDirectRenderer(L){L=L.materialId;var Q=this._getMaterial(L);if(null==Q)throw Error(`material not found ${L}`);const {view:M}=this;Q=new v.DirectRenderer({material:Q});this._directRenderers.set(L,Q);M._stage.addRenderPlugin(Q);M._stage.renderView.renderer.updateHasFlags()}async _addDirectRendererGeometry(L){const Q=L.renderGeometryId,M=L.materialId;null!=this._renderGeometries.get(Q)&&await this._removeDirectRendererGeometry({renderGeometryId:Q});
const C=this._directRenderers.get(M);null==C?console.error("no renderer assigned to provided material"):(L=C.addRenderGeometry(Q,L.renderGeometryBuffer,L.localOrigin),this._renderGeometries.set(Q,{renderGeometry:L,materialId:M}),this.view._stage.renderView.requestRender())}async _removeDirectRendererGeometry(L){var Q=this._renderGeometries.get(L.renderGeometryId);null!=Q&&(Q=this._directRenderers.get(Q.materialId),null==Q?console.error("no renderer assigned to provided material"):Q.removeRenderGeometry(L.renderGeometryId))}async _createLodRenderer(L){const Q=
new w.LodRenderer({view:this.view,layerUid:this.layerUid}),M=new AbortController;await Q.doLoad(L.lodRenderGeometry,C=>this._getMaterial(C),M.signal);this._lodRenderers.set(L.lodRendererId,Q)}async _addLodInstances(L){const Q=this._lodRenderers.get(L.lodRendererId);if(null==Q)throw Error("no lod renderer assigned to provided lod renderer Id");Q.addInstances(L.data)}async _removeLodInstances(L){const Q=this._lodRenderers.get(L.lodRendererId);if(null==Q)throw Error("no lod renderer assigned to provided lod renderer Id");
Q.removeInstances(L.featureIds)}};a.FeaturePipelineRenderManager=b.__decorate([l.subclass("esri.views.3d.layers.graphics.pipeline.rendering.FeaturePipelineRenderManager")],a.FeaturePipelineRenderManager);b=q.defaultSymbolSizeRatio;const E=[b/2,b/2,1-b/2,1-b/2];a.createDefaultMaterial=J;a.createHudMaterial=D;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/placementUtils":function(){define(["exports","../../../../core/libs/gl-matrix-2/math/vec2","../../../../core/libs/gl-matrix-2/factories/vec2f64",
"../../webgl-engine/lib/TextRenderer"],function(a,b,c,f){const e=Object.freeze({left:0,center:.5,right:1}),n=Object.freeze({"bottom-left":c.fromValues(0,0),bottom:c.fromValues(.5,0),"bottom-right":c.fromValues(1,0),left:c.fromValues(0,.5),center:c.fromValues(.5,.5),right:c.fromValues(1,.5),"top-left":c.fromValues(0,1),top:c.fromValues(.5,1),"top-right":c.fromValues(1,1)});a.anchorFromPlacements=function(d,k){switch(k){case "bottom":return"left"===d?"bottom-left":"right"===d?"bottom-right":"bottom";
case "center":return d;case "top":return"left"===d?"top-left":"right"===d?"top-right":"top"}};a.horizontalPlacementFromAnchor=function(d){switch(d){case "bottom-left":case "left":case "top-left":return"left";case "bottom":case "center":case "top":return"center";case "bottom-right":case "right":case "top-right":return"right"}};a.horizontalPlacementToAnchorX=e;a.namedAnchorToHUDMaterialAnchorPos=n;a.textRenderAlignmentFromHorizontalPlacement=function(d){switch(d){case "left":return f.TextRenderAlignment.Left;
case "right":return f.TextRenderAlignment.Right;default:return f.TextRenderAlignment.Center}};a.verticalPlacementFromAlignment=function(d){return"middle"===d?"center":d};a.verticalPlacementFromAnchor=function(d){switch(d){case "bottom-left":case "bottom":case "bottom-right":return"bottom";case "left":case "center":case "right":return"center";case "top-left":case "top":case "top-right":return"top"}};a.verticalScreenOffsetFromAlignment=function(d,k){switch(d){case "top":return b.set(k,0,f.textVerticalPaddingPx);
case "bottom":return b.set(k,0,-f.textVerticalPaddingPx);default:return b.copy(k,c.ZEROS)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],function(a,b){function c(aa,fa){aa[0]=fa[0];aa[1]=fa[1];return aa}function f(aa,fa,Z){aa[0]=fa;aa[1]=Z;return aa}function e(aa,fa,Z){aa[0]=fa[0]+Z[0];aa[1]=fa[1]+Z[1];return aa}function n(aa,fa,Z){aa[0]=fa[0]-Z[0];aa[1]=fa[1]-Z[1];return aa}function d(aa,fa,Z){aa[0]=
fa[0]*Z[0];aa[1]=fa[1]*Z[1];return aa}function k(aa,fa,Z){aa[0]=fa[0]/Z[0];aa[1]=fa[1]/Z[1];return aa}function h(aa,fa){aa[0]=Math.ceil(fa[0]);aa[1]=Math.ceil(fa[1]);return aa}function l(aa,fa){aa[0]=Math.floor(fa[0]);aa[1]=Math.floor(fa[1]);return aa}function m(aa,fa,Z){aa[0]=Math.min(fa[0],Z[0]);aa[1]=Math.min(fa[1],Z[1]);return aa}function t(aa,fa,Z){aa[0]=Math.max(fa[0],Z[0]);aa[1]=Math.max(fa[1],Z[1]);return aa}function z(aa,fa){aa[0]=Math.round(fa[0]);aa[1]=Math.round(fa[1]);return aa}function r(aa,
fa,Z){aa[0]=fa[0]*Z;aa[1]=fa[1]*Z;return aa}function v(aa,fa,Z,ma){aa[0]=fa[0]+Z[0]*ma;aa[1]=fa[1]+Z[1]*ma;return aa}function w(aa,fa){const Z=fa[0]-aa[0];aa=fa[1]-aa[1];return Math.sqrt(Z*Z+aa*aa)}function q(aa,fa){const Z=fa[0]-aa[0];aa=fa[1]-aa[1];return Z*Z+aa*aa}function g(aa){const fa=aa[0];aa=aa[1];return Math.sqrt(fa*fa+aa*aa)}function p(aa){const fa=aa[0];aa=aa[1];return fa*fa+aa*aa}function x(aa,fa){aa[0]=-fa[0];aa[1]=-fa[1];return aa}function u(aa,fa){aa[0]=1/fa[0];aa[1]=1/fa[1];return aa}
function D(aa,fa){var Z=fa[0];const ma=fa[1];Z=Z*Z+ma*ma;0<Z&&(Z=1/Math.sqrt(Z),aa[0]=fa[0]*Z,aa[1]=fa[1]*Z);return aa}function J(aa,fa){return aa[0]*fa[0]+aa[1]*fa[1]}function E(aa,fa,Z){fa=fa[0]*Z[1]-fa[1]*Z[0];aa[0]=aa[1]=0;aa[2]=fa;return aa}function L(aa,fa,Z,ma){const S=fa[0];fa=fa[1];aa[0]=S+ma*(Z[0]-S);aa[1]=fa+ma*(Z[1]-fa);return aa}function Q(aa,fa=1){const Z=2*b.RANDOM()*Math.PI;aa[0]=Math.cos(Z)*fa;aa[1]=Math.sin(Z)*fa;return aa}function M(aa,fa,Z){const ma=fa[0];fa=fa[1];aa[0]=Z[0]*ma+
Z[2]*fa;aa[1]=Z[1]*ma+Z[3]*fa;return aa}function C(aa,fa,Z){const ma=fa[0];fa=fa[1];aa[0]=Z[0]*ma+Z[2]*fa+Z[4];aa[1]=Z[1]*ma+Z[3]*fa+Z[5];return aa}function U(aa,fa,Z){const ma=fa[0];fa=fa[1];aa[0]=Z[0]*ma+Z[3]*fa+Z[6];aa[1]=Z[1]*ma+Z[4]*fa+Z[7];return aa}function y(aa,fa,Z){const ma=fa[0];fa=fa[1];aa[0]=Z[0]*ma+Z[4]*fa+Z[12];aa[1]=Z[1]*ma+Z[5]*fa+Z[13];return aa}function B(aa,fa,Z,ma){const S=fa[0]-Z[0];fa=fa[1]-Z[1];const ha=Math.sin(ma);ma=Math.cos(ma);aa[0]=S*ma-fa*ha+Z[0];aa[1]=S*ha+fa*ma+Z[1];
return aa}function H(aa,fa){var Z=aa[0];aa=aa[1];const ma=fa[0];fa=fa[1];let S=Z*Z+aa*aa;0<S&&(S=1/Math.sqrt(S));let ha=ma*ma+fa*fa;0<ha&&(ha=1/Math.sqrt(ha));Z=(Z*ma+aa*fa)*S*ha;return 1<Z?0:-1>Z?Math.PI:Math.acos(Z)}function N(aa){return"vec2("+aa[0]+", "+aa[1]+")"}function K(aa,fa){return aa[0]===fa[0]&&aa[1]===fa[1]}function X(aa,fa){const Z=aa[0];aa=aa[1];const ma=fa[0];fa=fa[1];const S=b.getEpsilon();return Math.abs(Z-ma)<=S*Math.max(1,Math.abs(Z),Math.abs(ma))&&Math.abs(aa-fa)<=S*Math.max(1,
Math.abs(aa),Math.abs(fa))}function V(aa,fa,Z,ma,S){let ha=fa[0]-Z[0];Z=fa[1]-Z[1];S=(ma[0]*ha+ma[1]*Z)*(S-1);ha=ma[0]*S;Z=ma[1]*S;aa[0]=fa[0]+ha;aa[1]=fa[1]+Z;return aa}const da=Object.freeze(Object.defineProperty({__proto__:null,add:e,angle:H,ceil:h,copy:c,cross:E,dist:w,distance:w,div:k,divide:k,dot:J,equals:X,exactEquals:K,floor:l,inverse:u,len:g,length:g,lerp:L,max:t,min:m,mul:d,multiply:d,negate:x,normalize:D,projectAndScale:V,random:Q,rotate:B,round:z,scale:r,scaleAndAdd:v,set:f,sqrDist:q,
sqrLen:p,squaredDistance:q,squaredLength:p,str:N,sub:n,subtract:n,transformMat2:M,transformMat2d:C,transformMat3:U,transformMat4:y},Symbol.toStringTag,{value:"Module"}));a.add=e;a.angle=H;a.ceil=h;a.copy=c;a.cross=E;a.dist=w;a.distance=w;a.div=k;a.divide=k;a.dot=J;a.equals=X;a.exactEquals=K;a.floor=l;a.inverse=u;a.len=g;a.length=g;a.lerp=L;a.max=t;a.min=m;a.mul=d;a.multiply=d;a.negate=x;a.normalize=D;a.projectAndScale=V;a.random=Q;a.rotate=B;a.round=z;a.scale=r;a.scaleAndAdd=v;a.set=f;a.sqrDist=q;
a.sqrLen=p;a.squaredDistance=q;a.squaredLength=p;a.str=N;a.sub=n;a.subtract=n;a.transformMat2=M;a.transformMat2d=C;a.transformMat3=U;a.transformMat4=y;a.vec2=da;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(a){function b(){return[0,0]}function c(w){return[w[0],w[1]]}function f(w,q){return[w,q]}function e(w,q=[0,0]){const g=Math.min(2,w.length);for(let p=0;p<g;++p)q[p]=w[p];return q}function n(w,
q){return new Float64Array(w,q,2)}function d(){return[0,0]}function k(){return[1,1]}function h(){return[1,0]}function l(){return[0,1]}const m=[0,0],t=[1,1],z=[1,0],r=[0,1],v=Object.freeze(Object.defineProperty({__proto__:null,ONES:t,UNIT_X:z,UNIT_Y:r,ZEROS:m,clone:c,create:b,createView:n,fromArray:e,fromValues:f,ones:k,unitX:h,unitY:l,zeros:d},Symbol.toStringTag,{value:"Module"}));a.ONES=t;a.UNIT_X=z;a.UNIT_Y=r;a.ZEROS=m;a.clone=c;a.create=b;a.createView=n;a.fromArray=e;a.fromValues=f;a.ones=k;a.unitX=
h;a.unitY=l;a.vec2f64=v;a.zeros=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/TextRenderer":function(){define(["exports","../../../../core/mathUtils","../../support/debugFlags","./FontMetrics","./TextHelperCanvas"],function(a,b,c,f,e){class n{constructor(l,m,t,z){this.text=l;this._alignment=m;this._parameters=t;this._maxSize=z;this._textWidths=[];this._lineWidths=[];this._metricsCached=this._renderPixelRatio=null;this.key=`${l}--${this._parameters.key}-${this._alignment}`;
this._lines=l.replaceAll(" ","\u00a0").split(/\r?\n/)}get displayWidth(){return Math.ceil(this._displayWidth+2*this._horizontalPadding)}get displayHeight(){let l=this._metrics.firstLineAscent;for(let m=0;m<this._lines.length-1;m++)l+=this._lineSpacing;l+=this._metrics.lastLineDescent;return Math.ceil(l+2*this._haloSize+2*this._verticalPadding)}get renderedWidth(){return this._toRoundedRenderUnit(this.displayWidth)}get renderedHeight(){return this._toRoundedRenderUnit(this.displayHeight)}get firstRenderedBaselinePosition(){return this._toRenderUnit(this._firstLineYOffset+
this._metrics.firstLineAscent)}get _firstLineYOffset(){return this._verticalPadding+this._haloSize}get _metrics(){if(null==this._metricsCached){const m=e.getTextHelperCanvas(k,512,512).getContext("2d"),t=this._parameters.definition.pixelRatio;this._parameters.setFontProperties(m,this._fontSize*t);let z=2*this._haloSize;var l=this._parameters.definition.font;if("italic"===l.style||"oblique"===l.style||"bold"===l.weight||"bolder"===l.weight)z+=.3*m.measureText("A").width;this._textWidths.length=0;let r=
this._lineWidths.length=0,v=0,w=0,q=0,g=0;this._lines.forEach((x,u)=>{x=m.measureText(x);const D=x.width/t,J=D+z;this._textWidths.push(D);this._lineWidths.push(J);r=Math.max(r,J);q=Math.max(q,x.actualBoundingBoxAscent/t);g=Math.max(g,x.actualBoundingBoxDescent/t);0===u&&(v=x.actualBoundingBoxAscent/t);u===this._lines.length-1&&(w=x.actualBoundingBoxDescent/t)});l=f.getFontMetrics(this._parameters);const p=Math.max(g,l.maxDescent);this._metricsCached=new h(v,"underline"===this._parameters.definition.font.decoration?
p:w,Math.max(q,l.maxAscent),p,r)}return this._metricsCached}get _lineSpacing(){return(this._midLineHeight+this._linePadding)*this._parameters.definition.lineSpacingFactor}get _midLineHeight(){return this._metrics.midLineHeight}get _linePadding(){return.2*this._midLineHeight}get _midLineAscent(){return this._metrics.maxLineAscent}get _renderedFontSize(){return this._toRenderUnit(this._fontSize)}get _fontSize(){return this._parameters.definition.size}get _renderedHaloSize(){return this._toRenderUnit(this._haloSize)}get _haloSize(){return this._parameters.haloSize}get _horizontalPadding(){return this._hasBackground?
this._parameters.definition.background.padding[0]:0}get _verticalPadding(){return Math.max(this._hasBackground?this._parameters.definition.background.padding[1]:0,1)}get _hasBackground(){return!!this._parameters.backgroundStyle}get renderPixelRatio(){null==this._renderPixelRatio&&(this._renderPixelRatio=Math.min(this._parameters.definition.pixelRatio,Math.min(this._maxSize[0]/this.displayWidth,this._maxSize[1]/this.displayHeight)));return this._renderPixelRatio}_getLineXOffset(l){switch(this._alignment){case a.TextRenderAlignment.Left:return this._horizontalPadding;
case a.TextRenderAlignment.Center:return(this.displayWidth-this._lineWidths[l])/2;case a.TextRenderAlignment.Right:return this.displayWidth-this._horizontalPadding-this._lineWidths[l]}}render(l,m,t){l.save();m/=this.renderPixelRatio;t/=this.renderPixelRatio;const z=m,r=t;var v=this._haloSize;const w=this._firstLineYOffset+this._metrics.firstLineAscent;m+=v;t+=w;const q=0<this._haloSize;q&&this._renderHalo(l,z,r,v,w);this._parameters.setFontProperties(l,this._renderedFontSize);for(v=0;v<this._lines.length;++v){const g=
this._lines[v],p=this._getLineXOffset(v);q&&(l.globalCompositeOperation="destination-out",l.fillStyle="rgb(0, 0, 0)",this._fillText(l,g,m+p,t),this._renderLineDecoration(l,m+p,t,this._textWidths[v]));l.globalCompositeOperation="source-over";l.fillStyle=this._parameters.textStyle;this._fillText(l,g,m+this._getLineXOffset(v),t);this._renderLineDecoration(l,m+p,t,this._textWidths[v]);t+=this._lineSpacing}if(c.debugFlags.TEXT_SHOW_BASELINE)for(l.strokeStyle="rgb(255, 0, 255, 0.5)",l.setLineDash([2,2]),
l.lineWidth=1,m=r+w,t=0;t<this._lines.length;++t)this._drawLine(l,[z,m],[z+this.displayWidth,m]),m+=this._lineSpacing;c.debugFlags.TEXT_SHOW_BORDER&&(l.strokeStyle="rgb(255, 0, 255, 0.5)",l.setLineDash([]),l.lineWidth=1,this._drawBox(l,[z,r],[this.displayWidth,this.displayHeight]));this._hasBackground&&(this._roundedRect(l,z,r,this._parameters.definition.background.borderRadius*this.renderPixelRatio),l.globalCompositeOperation="destination-over",l.fillStyle=this._parameters.backgroundStyle,l.fill());
l.restore()}_renderLineDecoration(l,m,t,z,r=!1){if("none"!==this._parameters.definition.font.decoration&&0!==z){var v=Math.max(this._parameters.definition.size/16,1);switch(this._parameters.definition.font.decoration){case "underline":t+=2*v;break;case "line-through":t-=.33*this._midLineAscent}var w=r?this._haloSize:0;l.strokeStyle=r?this._parameters.haloStyle:this._parameters.textStyle;l.lineWidth=this._toRenderUnit(v+2*w);l.beginPath();l.moveTo(this._toRenderUnit(m-w),this._toRenderUnit(t));l.lineTo(this._toRenderUnit(m+
z+w),this._toRenderUnit(t));l.stroke()}}_roundedRect(l,m,t,z){m=this._toRenderUnit(m);t=this._toRenderUnit(t);const r=this.renderedWidth,v=this.renderedHeight;0===z?l.rect(m,t,r,v):(z=b.clamp(z,0,Math.floor(v/2)),l.beginPath(),l.moveTo(m,t+z),l.arcTo(m,t,m+z,t,z),l.lineTo(m+r-z,t),l.arcTo(m+r,t,m+r,t+z,z),l.lineTo(m+r,t+v-z),l.arcTo(m+r,t+v,m+r-z,t+v,z),l.lineTo(m+z,t+v),l.arcTo(m,t+v,m,t+v-z,z),l.closePath())}_renderHalo(l,m,t,z,r){const v=this.renderedWidth,w=this.renderedHeight,q=e.getTextHelperCanvas(k,
Math.max(v,512),Math.max(w,512)),g=q.getContext("2d");g.clearRect(0,0,v,w);this._parameters.setFontProperties(g,this._renderedFontSize);g.fillStyle=this._parameters.haloStyle;g.strokeStyle=this._parameters.haloStyle;var p=3>this._renderedHaloSize;g.lineJoin=p?"miter":"round";p?this._renderHaloEmulated(g,z,r):this._renderHaloNative(g,z,r);for(p=0;p<this._lines.length;++p){const x=this._getLineXOffset(p);this._renderLineDecoration(g,z+x,r,this._textWidths[p],!0);r+=this._lineSpacing}l.globalAlpha=this._parameters.definition.halo.color[3];
l.drawImage(q,0,0,v,w,this._toRenderUnit(m),this._toRenderUnit(t),v,w);l.globalAlpha=1}_renderHaloEmulated(l,m,t){for(let z=0;z<this._lines.length;++z){const r=this._lines[z],v=this._getLineXOffset(z);for(const [w,q]of d)this._fillText(l,r,m+v+this._haloSize*w,t+this._haloSize*q);t+=this._lineSpacing}}_renderHaloNative(l,m,t){const z=2*this._haloSize;for(let r=0;r<this._lines.length;++r){const v=this._lines[r],w=this._getLineXOffset(r);for(let q=0;5>q;q++)l.lineWidth=this._toRenderUnit((.6+.1*q)*
z),this._strokeText(l,v,m+w,t);t+=this._lineSpacing}}get _displayWidth(){return this._metrics.displayWidth}_toRenderUnit(l){return l*this.renderPixelRatio}_toRoundedRenderUnit(l){return Math.round(l*this.renderPixelRatio)}_fillText(l,m,t,z){l.fillText(m,this._toRenderUnit(t),this._toRenderUnit(z))}_strokeText(l,m,t,z){l.strokeText(m,this._toRenderUnit(t),this._toRenderUnit(z))}_drawLine(l,m,t){l.beginPath();l.moveTo(this._toRoundedRenderUnit(m[0])+.5,this._toRoundedRenderUnit(m[1])+.5);l.lineTo(this._toRoundedRenderUnit(t[0])+
.5,this._toRoundedRenderUnit(t[1])+.5);l.stroke()}_drawBox(l,m,t){var z=this._toRenderUnit(m[0]);m=this._toRenderUnit(m[1]);var r=this._toRenderUnit(t[0]);const v=this._toRenderUnit(t[1]);t=Math.floor(z)+.5;z=Math.ceil(z+r)-.5;r=Math.floor(m)+.5;m=Math.ceil(m+v)-.5;l.beginPath();l.moveTo(t,r);l.lineTo(z,r);l.lineTo(z,m);l.lineTo(t,m);l.lineTo(t,r);l.stroke()}}const d=[];for(let l=0;360>l;l+=22.5)d.push([Math.cos(Math.PI*l/180),Math.sin(Math.PI*l/180)]);a.TextRenderAlignment=void 0;(function(l){l[l.Left=
0]="Left";l[l.Center=1]="Center";l[l.Right=2]="Right"})(a.TextRenderAlignment||(a.TextRenderAlignment={}));const k={canvas:null};class h{get firstLineHeight(){return this.firstLineAscent+this.maxLineDescent}get midLineHeight(){return this.maxLineAscent+this.maxLineDescent}get lastLineHeight(){return this.maxLineAscent+this.lastLineDescent}constructor(l,m,t,z,r){this.firstLineAscent=l;this.lastLineDescent=m;this.maxLineAscent=t;this.maxLineDescent=z;this.displayWidth=r}}a.TextRenderer=n;a.textVerticalPaddingPx=
1;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/debugFlags":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){c=class extends c{constructor(){super(...arguments);this.LINE_WIREFRAMES=this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=
this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=this.I3S_SHOW_MODIFICATIONS=this.I3S_TREE_SHOW_TILES=this.TERRAIN_TILE_TREE_SHOW_TILES=this.FEATURE_TILE_TREE_SHOW_TILES=this.FEATURE_TILE_FETCH_SHOW_TILES=this.DRAW_MESH_GEOMETRY_NORMALS=this.TESTS_DISABLE_FAST_UPDATES=this.TESTS_DISABLE_OPTIMIZATIONS=this.SHOW_POI=this.OVERLAY_SHOW_CENTER=this.OVERLAY_DRAW_DEBUG_TEXTURE=this.TEXT_SHOW_BORDER=this.TEXT_SHOW_BASELINE=this.LABELS_SHOW_BORDER=this.DECONFLICTOR_SHOW_GRID=this.DECONFLICTOR_SHOW_INVISIBLE=this.DECONFLICTOR_SHOW_VISIBLE=
this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1}};b.__decorate([f.property()],c.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);b.__decorate([f.property()],c.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0);b.__decorate([f.property()],c.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0);b.__decorate([f.property()],c.prototype,"DECONFLICTOR_SHOW_GRID",void 0);b.__decorate([f.property()],c.prototype,"LABELS_SHOW_BORDER",void 0);b.__decorate([f.property()],c.prototype,"TEXT_SHOW_BASELINE",void 0);b.__decorate([f.property()],
c.prototype,"TEXT_SHOW_BORDER",void 0);b.__decorate([f.property()],c.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0);b.__decorate([f.property()],c.prototype,"OVERLAY_SHOW_CENTER",void 0);b.__decorate([f.property()],c.prototype,"SHOW_POI",void 0);b.__decorate([f.property()],c.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0);b.__decorate([f.property()],c.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0);b.__decorate([f.property()],c.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);b.__decorate([f.property()],
c.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);b.__decorate([f.property()],c.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);b.__decorate([f.property()],c.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0);b.__decorate([f.property()],c.prototype,"I3S_TREE_SHOW_TILES",void 0);b.__decorate([f.property()],c.prototype,"I3S_SHOW_MODIFICATIONS",void 0);b.__decorate([f.property()],c.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);b.__decorate([f.property()],c.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",
void 0);b.__decorate([f.property()],c.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0);b.__decorate([f.property()],c.prototype,"LINE_WIREFRAMES",void 0);c=b.__decorate([k.subclass("esri.views.3d.support.debugFlags")],c);b=new c;a.debugFlags=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/FontMetrics":function(){define(["exports","./TextHelperCanvas"],function(a,b){const c=new Map;class f{get maxHeight(){return this.maxAscent+this.maxDescent}constructor(d,
k){this.maxAscent=d;this.maxDescent=k}}const e={canvas:null},n=(()=>{let d="";for(let k=32;127>k;k++)d+=String.fromCharCode(k);return d})();a.getFontMetrics=function(d){const {size:k}=d.definition,h=d.fontString(k);var l=c.get(h);l||(l=b.getTextHelperCanvas(e,0,0).getContext("2d"),d.setFontProperties(l,k),d=l.measureText(n),l=new f(d.actualBoundingBoxAscent,d.actualBoundingBoxDescent),c.set(h,l));return l};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/TextHelperCanvas":function(){define(["exports"],
function(a){a.getTextHelperCanvas=function(b,c,f){b.canvas||(b.canvas=document.createElement("canvas"));b.canvas.width=c;b.canvas.height=f;return b.canvas};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/DirectRenderer":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/accessorSupport/decorators/property ../../../../../../core/has ../../../../../../core/Logger ../../../../../../core/RandomLCG ../../../../../../core/accessorSupport/decorators/subclass ../../../../support/buffer/glUtil ../../../../webgl-engine/core/shaderLibrary/ShaderOutput ../../../../webgl-engine/effects/RenderPlugin ../../../../webgl-engine/lib/GLMaterials ../../../../webgl-engine/lib/RenderSlot ../../../../webgl-engine/materials/DrawParameters ../../../../webgl-engine/materials/renderers/MergedRenderer".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r){a.DirectRenderer=class extends l.SyncRenderPlugin{constructor(v){super(v);this._hasHighlights=!1;this._glMaterials=null;this._produces=new Map;this._renderGeometries=new Map;this._vaoCache=null;this._drawParameters=new z.DrawParameters;this._bufferWriter=null}get produces(){return this._produces}initialize(){this._bufferWriter=this.material.createBufferWriter();this.material.produces.forEach((v,w)=>{this._produces.set(w,q=>q!==h.ShaderOutput.Highlight&&q!==h.ShaderOutput.ShadowHighlight||
this._hasHighlights?v(q):!1)})}destroy(){this._glMaterials.dispose();const v=this._renderGeometries.keys();for(const w of v)this.removeRenderGeometry(w)}acquireTechniques(v){const w=this.material;if(!w.shouldRender(v))return null;const {output:q,bind:g}=v;return w.produces.get(g.slot)?.(q)&&(q!==h.ShaderOutput.Highlight&&q!==h.ShaderOutput.ShadowHighlight||this._hasHighlights)?this._glMaterials.load(v.rctx,g.slot,q)?.beginSlot(g):null}render(v,w){const q=this._renderGeometries;if(0!==q.size){var {bind:g}=
v,p=g.slot===t.RenderSlot.OCCLUDER_MATERIAL||g.slot===t.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?g.slot:null;v=v.rctx;v.runAppleAmdDriverHelper();v.bindTechnique(w,g,this.material.parameters);var x=w.program;for(const [,u]of q)this._drawParameters.origin=u.localOrigin,x.bindDraw(g,this.material.parameters,this._drawParameters),w.ensureAttributeLocations(u.vao),v.bindVAO(u.vao),v.setPipelineState(w.getPipeline(!1,p)),v.drawArrays(w.primitiveType,0,u.numElements)}}initializeRenderContext(v,w){this._glMaterials=
new m.GLMaterials(this.material,v.materials);this._vaoCache=v.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,k.glLayout(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}addRenderGeometry(v,w,q){this.removeRenderGeometry(v);const g=this._bufferWriter.vertexBufferLayout.stride,p=this._vaoCache.newVao(r.sizeForVao(w.data.byteLength));p.vertexBuffers.get("geometry").setSubData(new Uint8Array(w.data),0,0,w.elementCount*g);w={localOrigin:q,vao:p,numElements:w.elementCount};
this._renderGeometries.set(v,w);return w}removeRenderGeometry(v){const w=this._renderGeometries.get(v);null!=w&&(this._vaoCache.deleteVao(w.vao),this._renderGeometries.delete(v))}};b.__decorate([c.property({constructOnly:!0})],a.DirectRenderer.prototype,"material",void 0);a.DirectRenderer=b.__decorate([d.subclass("esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer")],a.DirectRenderer);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports",
"../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(a,b,c){const f={u8:b.DataType.UNSIGNED_BYTE,u16:b.DataType.UNSIGNED_SHORT,u32:b.DataType.UNSIGNED_INT,i8:b.DataType.BYTE,i16:b.DataType.SHORT,i32:b.DataType.INT,f32:b.DataType.FLOAT};a.glLayout=function(e,n=0){const d=e.stride;return Array.from(e.fields.keys()).map(k=>{const h=e.fields.get(k),l=h.constructor.ElementCount;var m=f[h.constructor.ElementType];if(!m)throw Error("BufferType not supported in WebGL");return new c.VertexElementDescriptor(k,
l,m,h.offset,d,h.optional?.glNormalized??!1,n)})};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput":function(){define(["exports"],function(a){function b(t){return t===a.ShaderOutput.Highlight||t===a.ShaderOutput.ObjectAndLayerIdColor}function c(t){return t===a.ShaderOutput.Color}function f(t){return c(t)||m(t)}function e(t){return c(t)||t===a.ShaderOutput.Highlight}function n(t){return c(t)||b(t)}function d(t){return f(t)||
b(t)}function k(t){return n(t)||l(t)}function h(t){return d(t)||l(t)}function l(t){return t===a.ShaderOutput.Depth}function m(t){return t===a.ShaderOutput.ColorEmission}a.ShaderOutput=void 0;(function(t){t[t.Color=0]="Color";t[t.ColorEmission=1]="ColorEmission";t[t.Depth=2]="Depth";t[t.Normal=3]="Normal";t[t.Shadow=4]="Shadow";t[t.ShadowHighlight=5]="ShadowHighlight";t[t.ShadowExcludeHighlight=6]="ShadowExcludeHighlight";t[t.ViewshedShadow=7]="ViewshedShadow";t[t.Highlight=8]="Highlight";t[t.ObjectAndLayerIdColor=
9]="ObjectAndLayerIdColor";t[t.COUNT=10]="COUNT"})(a.ShaderOutput||(a.ShaderOutput={}));a.is2DGeometryOutput=function(t){return c(t)||b(t)};a.is3DGeometryOutput=function(t){return k(t)||t===a.ShaderOutput.Normal};a.is3DGeometryOutputMRT=function(t){return h(t)||t===a.ShaderOutput.Normal};a.isColor=c;a.isColorEmission=m;a.isColorEmissionHighlightOIDOrDepth=h;a.isColorEmissionHighlightOrOID=d;a.isColorHighlightOIDOrDepth=k;a.isColorHighlightOrDepth=function(t){return e(t)||l(t)};a.isColorHighlightOrOID=
n;a.isColorOrColorEmission=f;a.isColorOrHighlight=e;a.isColorOrOID=function(t){return c(t)||t===a.ShaderOutput.ObjectAndLayerIdColor};a.isDepth=l;a.isHighlightOrOID=b;a.isShadowRelatedOutput=function(t){return t===a.ShaderOutput.Shadow||t===a.ShaderOutput.ShadowHighlight||t===a.ShaderOutput.ShadowExcludeHighlight||t===a.ShaderOutput.ViewshedShadow};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/RenderPlugin":function(){define(["exports","../../../../core/Accessor",
"../core/shaderLibrary/ShaderOutput"],function(a,b,c){function f(h){Array.isArray(h)?h.forEach(l=>l?.release()):h?.release()}const e={required:[]};c={required:[c.ShaderOutput.Depth]};class n extends b{precompile(h){h=this.acquireTechniques(h);f(h);return null!=h}consumes(){return e}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}modify(h){}get numGeometries(){return 0}get hasOccludees(){return!1}get hasEmissions(){return!1}forEachGeometry(h){}queryRenderOccludedState(h){return!1}}
class d extends n{}class k extends n{}a.AsyncRenderPlugin=k;a.ConsumesDepth=c;a.ConsumesNone=e;a.SyncRenderPlugin=d;a.releaseTechniques=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GLMaterials":function(){define(["exports","./basicInterfaces"],function(a,b){class c{constructor(f,e){this._material=f;this._repository=e;this._map=new Map}dispose(){this._map.forEach((f,e)=>{null!=f&&this._repository.release(this._material,e)})}load(f,e,n){if(!this._material.produces.get(e)?.(n))return null;
this._map.has(n)||this._map.set(n,this._repository.acquire(this._material,e,n));e=this._map.get(n);if(null!=e){if(e.ensureResources(f)===b.ResourceState.LOADED)return e;this._repository.requestRender()}return null}}a.GLMaterials=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/basicInterfaces":function(){define(["exports"],function(a){a.CullFaceOptions=void 0;(function(b){b[b.None=0]="None";b[b.Front=1]="Front";b[b.Back=2]="Back";b[b.COUNT=3]="COUNT"})(a.CullFaceOptions||
(a.CullFaceOptions={}));a.DepthTestFunction=void 0;(function(b){b[b.Less=0]="Less";b[b.Lequal=1]="Lequal";b[b.COUNT=2]="COUNT"})(a.DepthTestFunction||(a.DepthTestFunction={}));a.RenderRequestType=void 0;(function(b){b[b.BACKGROUND=0]="BACKGROUND";b[b.UPDATE=1]="UPDATE"})(a.RenderRequestType||(a.RenderRequestType={}));a.ResourceState=void 0;(function(b){b[b.NOT_LOADED=0]="NOT_LOADED";b[b.LOADING=1]="LOADING";b[b.LOADED=2]="LOADED"})(a.ResourceState||(a.ResourceState={}));a.StencilBits=void 0;(function(b){b[b.IntegratedMeshMaskExcluded=
1]="IntegratedMeshMaskExcluded";b[b.OutlineVisualElementMask=2]="OutlineVisualElementMask"})(a.StencilBits||(a.StencilBits={}));a.Object3DState=void 0;(function(b){b[b.Highlight=0]="Highlight";b[b.MaskOccludee=1]="MaskOccludee"})(a.Object3DState||(a.Object3DState={}));a.AlphaDiscardMode=void 0;(function(b){b[b.Blend=0]="Blend";b[b.Opaque=1]="Opaque";b[b.Mask=2]="Mask";b[b.MaskBlend=3]="MaskBlend";b[b.COUNT=4]="COUNT"})(a.AlphaDiscardMode||(a.AlphaDiscardMode={}));a.TextureEncodingMimeType=void 0;
(function(b){b.DDS_ENCODING="image/vnd-ms.dds";b.KTX2_ENCODING="image/ktx2";b.BASIS_ENCODING="image/x.basis"})(a.TextureEncodingMimeType||(a.TextureEncodingMimeType={}));Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/RenderSlot":function(){define(["exports"],function(a){a.RenderSlot=void 0;var b=a.RenderSlot||(a.RenderSlot={});b[b.INTEGRATED_MESH=0]="INTEGRATED_MESH";b[b.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN";b[b.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL";b[b.OPAQUE_MATERIAL_WITHOUT_NORMALS=
3]="OPAQUE_MATERIAL_WITHOUT_NORMALS";b[b.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL";b[b.TRANSPARENT_MATERIAL_WITHOUT_NORMALS=5]="TRANSPARENT_MATERIAL_WITHOUT_NORMALS";b[b.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN";b[b.TRANSPARENT_MATERIAL_WITHOUT_DEPTH=7]="TRANSPARENT_MATERIAL_WITHOUT_DEPTH";b[b.OCCLUDED_TERRAIN=8]="OCCLUDED_TERRAIN";b[b.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL";b[b.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL";b[b.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS";
b[b.HUD_MATERIAL=12]="HUD_MATERIAL";b[b.LABEL_MATERIAL=13]="LABEL_MATERIAL";b[b.LINE_CALLOUTS=14]="LINE_CALLOUTS";b[b.LINE_CALLOUTS_HUD_DEPTH=15]="LINE_CALLOUTS_HUD_DEPTH";b[b.DRAPED_MATERIAL=16]="DRAPED_MATERIAL";b[b.DRAPED_WATER=17]="DRAPED_WATER";b[b.VOXEL=18]="VOXEL";b[b.MAX_SLOTS=19]="MAX_SLOTS";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/DrawParameters":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec3f64",
"../core/shaderLibrary/attributes/VertexNormal.glsl"],function(a,b,c){class f extends c.VertexNormalDrawParameters{constructor(e=b.create()){super();this.origin=e}get slicePlaneLocalOrigin(){return this.origin}}a.DrawParameters=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl":function(){define("exports ../../../../../../core/compilerUtils ../../../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../../../core/libs/gl-matrix-2/factories/vec4f64 ./NormalAttribute.glsl ./VertexPosition.glsl ../../shaderModules/interfaces ../../shaderModules/Matrix3DrawUniform ../../shaderModules/Matrix3PassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h){class l extends n.VertexPositionPassParameters{constructor(){super(...arguments);this.transformNormalViewFromGlobal=c.create()}}class m extends n.VertexPositionDrawParameters{constructor(){super(...arguments);this.transformNormalGlobalFromModel=c.create();this.toMapSpace=f.create()}}a.VertexNormal=function(t,z){switch(z.normalType){case e.NormalType.Attribute:case e.NormalType.Compressed:t.include(e.NormalAttribute,z);t.varyings.add("vNormalWorld","vec3");t.varyings.add("vNormalView",
"vec3");t.vertex.uniforms.add(new k.Matrix3DrawUniform("transformNormalGlobalFromModel",r=>r.transformNormalGlobalFromModel),new h.Matrix3PassUniform("transformNormalViewFromGlobal",r=>r.transformNormalViewFromGlobal));t.vertex.code.add(d.glsl`void forwardNormal() {
vNormalWorld = transformNormalGlobalFromModel * normalModel();
vNormalView = transformNormalViewFromGlobal * vNormalWorld;
}`);break;case e.NormalType.ScreenDerivative:t.vertex.code.add(d.glsl`void forwardNormal() {}`);break;default:b.neverReached(z.normalType);case e.NormalType.COUNT:}};a.VertexNormalDrawParameters=m;a.VertexNormalPassParameters=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/compilerUtils":function(){define(["exports","./has"],function(a,b){a.neverReached=function(c){};a.neverReachedSilent=function(c){};a.typeCast=function(c){return()=>c};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],function(a){function b(){return[1,0,0,0,1,0,0,0,1]}function c(k){return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8]]}function f(k,h,l,m,t,z,r,v,w){return[k,h,l,m,t,z,r,v,w]}function e(k,h){return new Float64Array(k,h,9)}const n=b(),d=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:n,clone:c,create:b,createView:e,fromValues:f},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=n;a.clone=c;
a.create=b;a.createView=e;a.fromValues=f;a.mat3f64=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl":function(){define(["exports","../../../../../../core/compilerUtils","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(a,b,c,f){a.NormalType=void 0;(function(e){e[e.Attribute=0]="Attribute";e[e.Compressed=1]="Compressed";e[e.ScreenDerivative=2]="ScreenDerivative";e[e.COUNT=3]="COUNT"})(a.NormalType||
(a.NormalType={}));a.NormalAttribute=function(e,n){switch(n.normalType){case a.NormalType.Compressed:e.attributes.add(f.VertexAttribute.NORMALCOMPRESSED,"vec2");e.vertex.code.add(c.glsl`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case a.NormalType.Attribute:e.attributes.add(f.VertexAttribute.NORMAL,"vec3");e.vertex.code.add(c.glsl`vec3 normalModel() {
return normal;
}`);break;case a.NormalType.ScreenDerivative:e.fragment.code.add(c.glsl`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:b.neverReached(n.normalType);case a.NormalType.COUNT:}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(a){function b(e,...n){let d="";for(let k=0;k<n.length;k++)d+=e[k]+n[k];return d+=e[e.length-1]}class c{}const f=c;(function(e){e.int=function(n){return Math.round(n).toString()};e.float=function(n){return n.toPrecision(8)}})(b||={});a.If=function(e,n,d=""){return e?
n:d};a.NoParameters=f;a.glsl=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(a){a.VertexAttribute=void 0;(function(b){b.POSITION="position";b.NORMAL="normal";b.NORMALCOMPRESSED="normalCompressed";b.UV0="uv0";b.COLOR="color";b.SYMBOLCOLOR="symbolColor";b.SIZE="size";b.ROTATION="rotation";b.TANGENT="tangent";b.OFFSET="offset";b.PERSPECTIVEDIVIDE="perspectiveDivide";b.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance";
b.LENGTH="length";b.PREVPOSITION="prevPosition";b.NEXTPOSITION="nextPosition";b.SUBDIVISIONFACTOR="subdivisionFactor";b.COLORFEATUREATTRIBUTE="colorFeatureAttribute";b.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";b.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";b.DISTANCETOSTART="distanceToStart";b.UVMAPSPACE="uvMapSpace";b.BOUNDINGRECT="boundingRect";b.UVREGION="uvRegion";b.PROFILERIGHT="profileRight";b.PROFILEUP="profileUp";b.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";b.FEATUREVALUE="featureValue";
b.INSTANCEMODELORIGINHI="instanceModelOriginHi";b.INSTANCEMODELORIGINLO="instanceModelOriginLo";b.INSTANCEMODEL="instanceModel";b.INSTANCEMODELNORMAL="instanceModelNormal";b.INSTANCECOLOR="instanceColor";b.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";b.LOCALTRANSFORM="localTransform";b.GLOBALTRANSFORM="globalTransform";b.BOUNDINGSPHERE="boundingSphere";b.MODELORIGIN="modelOrigin";b.MODELSCALEFACTORS="modelScaleFactors";b.FEATUREATTRIBUTE="featureAttribute";b.STATE="state";b.LODLEVEL="lodLevel";
b.POSITION0="position0";b.POSITION1="position1";b.NORMAL2COMPRESSED="normal2Compressed";b.COMPONENTINDEX="componentIndex";b.VARIANTOFFSET="variantOffset";b.VARIANTSTROKE="variantStroke";b.VARIANTEXTENSION="variantExtension";b.SIDENESS="sideness";b.START="start";b.END="end";b.UP="up";b.START_UP="startUp";b.END_UP="endUp";b.EXTRUDE="extrude";b.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";b.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(a.VertexAttribute||(a.VertexAttribute={}));a.affectsGeometry=
function(b){return b===a.VertexAttribute.POSITION};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ./PositionAttribute.glsl ../util/DoublePrecision.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3DrawUniform ../../shaderModules/Matrix3PassUniform ../../shaderModules/Matrix4PassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){class z extends h.NoParameters{constructor(){super(...arguments);this.transformWorldFromViewTH=f.create();this.transformWorldFromViewTL=f.create();this.transformViewFromCameraRelativeRS=b.create();this.transformProjFromView=c.create()}}class r extends h.NoParameters{constructor(){super(...arguments);this.transformWorldFromModelRS=b.create();this.transformWorldFromModelTH=f.create();this.transformWorldFromModelTL=f.create()}}a.VertexPosition=function(v,w){v.include(e.PositionAttribute);
const q=v.vertex;q.include(n.DoublePrecision,w);v.varyings.add("vPositionWorldCameraRelative","vec3");v.varyings.add("vPosition_view","vec3");q.uniforms.add(new k.Float3PassUniform("transformWorldFromViewTH",g=>g.transformWorldFromViewTH),new k.Float3PassUniform("transformWorldFromViewTL",g=>g.transformWorldFromViewTL),new m.Matrix3PassUniform("transformViewFromCameraRelativeRS",g=>g.transformViewFromCameraRelativeRS),new t.Matrix4PassUniform("transformProjFromView",g=>g.transformProjFromView),new l.Matrix3DrawUniform("transformWorldFromModelRS",
g=>g.transformWorldFromModelRS),new d.Float3DrawUniform("transformWorldFromModelTH",g=>g.transformWorldFromModelTH),new d.Float3DrawUniform("transformWorldFromModelTL",g=>g.transformWorldFromModelTL));q.code.add(h.glsl`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`);q.code.add(h.glsl`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${w.spherical?h.glsl`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:h.glsl`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `);v.fragment.uniforms.add(new k.Float3PassUniform("transformWorldFromViewTL",g=>g.transformWorldFromViewTL));q.code.add(h.glsl`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`);v.fragment.code.add(h.glsl`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)};a.VertexPositionDrawParameters=r;a.VertexPositionPassParameters=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["exports"],function(a){function b(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function c(k){return[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10],k[11],k[12],k[13],k[14],k[15]]}function f(k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J){return[k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J]}function e(k,h){return new Float64Array(k,
h,16)}const n=b(),d=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:n,clone:c,create:b,createView:e,fromValues:f},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=n;a.clone=c;a.create=b;a.createView=e;a.fromValues=f;a.mat4f64=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(a,b,c){a.PositionAttribute=
function(f){f.attributes.add(c.VertexAttribute.POSITION,"vec3");f.vertex.code.add(b.glsl`vec3 positionModel() { return position; }`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,b){a.DoublePrecision=function({code:c},f){f.doublePrecisionRequiresObfuscation?c.add(b.glsl`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):c.add(b.glsl`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec3",c.BindType.Draw,(d,k,h,l)=>d.setUniform3fv(e,n(k,h,l)))}}a.Float3DrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Uniform":function(){define(["exports",
"../shaderTechnique/BindType"],function(a,b){class c{constructor(f,e,n,d,k=null){this.name=f;this.type=e;this.arraySize=k;this.bind={[b.BindType.Pass]:null,[b.BindType.Draw]:null};if(d)switch(n){case b.BindType.Pass:this.bind[b.BindType.Pass]=d;break;case b.BindType.Draw:this.bind[b.BindType.Draw]=d}}equals(f){return this.type===f.type&&this.name===f.name&&this.arraySize===f.arraySize}}a.Uniform=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/BindType":function(){define(["exports"],
function(a){a.BindType=void 0;var b=a.BindType||(a.BindType={});b[b.Pass=0]="Pass";b[b.Draw=1]="Draw";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec3",c.BindType.Pass,(d,k,h)=>d.setUniform3fv(e,n(k,h)))}}a.Float3PassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"mat3",c.BindType.Draw,(d,k,h)=>d.setUniformMatrix3fv(e,n(k,h)))}}a.Matrix3DrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix3PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,
b,c){class f extends b.Uniform{constructor(e,n){super(e,"mat3",c.BindType.Pass,(d,k,h)=>d.setUniformMatrix3fv(e,n(k,h)))}}a.Matrix3PassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"mat4",c.BindType.Pass,(d,k,h)=>d.setUniformMatrix4fv(e,n(k,h)))}}a.Matrix4PassUniform=
f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/MergedRenderer":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/has ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/NestedMap ../../../../../core/PooledArray ../../../../../core/SetUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/libs/gl-matrix-2/math/mat4 ../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../support/buffer/glUtil ../../core/shaderLibrary/ShaderOutput ../../effects/RenderPlugin ../../lib/GLMaterials ../../lib/ModelDirtyTypes ../../lib/RenderSlot ../../lib/Util ../DrawParameters ./BufferRange ./Instance ./PerBufferData ./PerOriginData".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q){function M(V,da){const aa=V.find(Z=>Z.numElements>=da);if(null==aa)return null;const fa=aa.from;aa.from+=da;aa.from>=aa.to&&V.removeUnordered(aa);return fa}function C(V){K.length<V&&(K=new Float32Array(V));return K}function U(V){V*=4;return 1024>=V?1024:262144>V?e.nextHighestPowerOfTwo(V):Math.max(Math.min(262144*Math.ceil(1.5*V/262144),16777216),V)}a.MergedRenderer=class extends q.SyncRenderPlugin{get _hasAnyHighlight(){return 0<this._highlightGroups.size}constructor(V){super(V);
this._dataByOrigin=new Map;this._drawParameters=new D.DrawParameters;this._highlightGroups=new Set;this.drapedPriority=0;this._produces=new Map;this._hasOccludees=!1}destroy(){this._glMaterials=n.disposeMaybe(this._glMaterials);this._dataByOrigin.forEach(V=>V.dispose());this._dataByOrigin.clear();this._vaoCache=null}initialize(){this.material.produces.forEach((V,da)=>{this._produces.set(da,aa=>0!==this._dataByOrigin.size&&(aa!==w.ShaderOutput.Highlight&&aa!==w.ShaderOutput.ShadowHighlight||this._hasAnyHighlight)?
V(aa):!1)})}initializeRenderContext(V,da){this._glMaterials=new g.GLMaterials(this.material,da??V.materials);this._bufferWriter=this.material.createBufferWriter();this._vaoCache=V.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,v.glLayout(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}get produces(){return this._produces}get hasOccludees(){return this._hasOccludees}get hasEmissions(){return this.material.hasEmissions}get isDecoration(){return this.material.parameters.isDecoration}queryRenderOccludedState(V){return this.material.queryRenderOccludedState(V)}get numGeometries(){let V=
0;this._dataByOrigin.forEach(da=>V+=da.buffers.reduce((aa,fa)=>aa+=fa.instances.size,0));return V}get usedMemory(){let V=0;this._dataByOrigin.forEach(da=>V+=da.buffers.reduce((aa,fa)=>aa+fa.vao.usedMemory,0));return V}forEachGeometry(V){this._dataByOrigin.forEach(da=>da.buffers.forEach(aa=>aa.instances.forEach(({geometry:fa})=>V(fa))))}modify(V){this._updateGeometries(V.updates);this._addAndRemoveGeometries(V.adds,V.removes);this._updateDrawCommands()}_updateGeometries(V){const da=this._bufferWriter;
if(null!=da){var aa=da.vertexBufferLayout.stride/4;for(const Z of V){V=Z.renderGeometry;const ma=this._dataByOrigin.get(V.localOrigin.id)?.findBuffer(V.id);if(null==ma)break;const S=ma.instances.get(V.id);if(Z.updateType&(p.DirtyState.GEOMETRY|p.DirtyState.TRANSFORMATION)){var fa=da.elementCount(S.geometry.geometry.attributes)*aa;fa=C(fa);const ha=da.vertexBufferLayout.createView(fa.buffer);this._writeGeometry(V,ha,0);ma.vao.vertexBuffers.get("geometry").setSubData(fa,S.from*aa,0,S.numElements*aa)}Z.updateType&
(p.DirtyState.HIGHLIGHT|p.DirtyState.OCCLUDEE|p.DirtyState.VISIBILITY)&&(ma.drawCommandsDirty=!0)}}}_computeDeltas(V,da){const aa=new d.NestedMap;for(var fa of V){V=fa.localOrigin;if(null==V)continue;let Z=aa.get(V.id,null);null==Z&&(Z=new y(V.vec3),aa.set(V.id,null,Z));Z.changes.push(fa)}for(const Z of da)da=Z.localOrigin,null!=da&&(fa=this._dataByOrigin.get(da.id)?.findBuffer(Z.id),null!=fa&&(V=aa.get(da.id,fa),null==V&&(V=new y(da.vec3),aa.set(da.id,fa,V)),V.changes.push(Z)));return aa}_addAndRemoveGeometries(V,
da){if(null!=this._bufferWriter&&null!=this._vaoCache){var {_bufferWriter:aa,_dataByOrigin:fa}=this,Z=aa.vertexBufferLayout.stride/4,ma=this._computeDeltas(V,da);ma.forEach((S,ha)=>{const G=S.get(null),ca=G?.changes??[];ma.delete(ha,null);let pa=fa.get(ha);S.forEach((Y,R)=>{ma.delete(ha,R);if(null==R)u.assert(!1,"No VAO for removed geometries");else if(R.instances.size===Y.changes.length)this._vaoCache.deleteVao(R.vao),c.removeUnordered(pa.buffers,R),0===pa.buffers.length&&0===ca.length&&fa.delete(ha);
else{var ia=R.numElements,A=R.vao.byteSize/4,F=ca.reduce((ba,na)=>ba+aa.elementCount(na.geometry.attributes),0),O=Y.changes.reduce((ba,na)=>ba+aa.elementCount(na.geometry.attributes),0);ia=Math.min((ia+F-O)*Z,4194304);F=ia>A;65536<ia&&ia<A/2?(Y.changes.forEach(({id:ba})=>R.deleteInstance(ba)),R.instances.forEach(({geometry:ba})=>ca.push(ba)),this._vaoCache.deleteVao(R.vao),c.removeUnordered(pa.buffers,R)):F?this._applyAndRebuild(R,ca,Y):this._applyRemoves(R,Y)}});if(0<ca.length)for(null==pa&&(pa=
new Q.PerOriginData(G.origin),fa.set(ha,pa)),pa.buffers.forEach(Y=>this._applyAdds(Y,ca));0<ca.length;)pa.buffers.push(this._applyAndRebuild(new L.PerBufferData,ca,null))})}}_updateDrawCommands(){this._highlightGroups.clear();this._hasOccludees=!1;this._dataByOrigin.forEach(V=>{V.buffers.forEach(da=>{da.updateIfDrawCommandsDirty(this._bufferWriter.vertexBufferLayout.stride);da.hasHighlights&&h.addMany(this._highlightGroups,da.highlightGroups);this._hasOccludees=this._hasOccludees||da.hasOccludees})})}_applyAndRebuild(V,
da,aa){if(aa)for(var fa of aa.changes)V.deleteInstance(fa.id);const Z=this._bufferWriter;aa=Z.vertexBufferLayout.stride;fa=aa/4;var ma=Math.floor(4194304/fa);let S=V.numElements;for(;0<da.length;){const pa=da.pop();var ha=Z.elementCount(pa.geometry.attributes);if(S+ha>ma&&0<S){da.push(pa);break}S+=ha;ha=new E.Instance(pa,0,0);u.assert(null==V.instances.get(pa.id));V.addInstance(pa.id,ha)}da=S*fa;ma=C(da);const G=Z.vertexBufferLayout.createView(ma.buffer);let ca=0;V.resetInstanceSummary();V.instances.forEach((pa,
Y)=>{this._writeGeometry(pa.geometry,G,ca);const R=ca;ca+=Z.elementCount(pa.geometry.geometry.attributes);V.updateInstance(Y,R,ca);V.updateDrawState(pa)});this._vaoCache.deleteVao(V.vao);V.vao=this._vaoCache.newVao(U(da));V.vao.vertexBuffers.get("geometry").setSubData(ma,0,0,ca*fa);V.holes.clear();da=V.holes.pushNew();da.from=ca;da.to=Math.floor(V.vao.byteSize/aa);V.updateDrawCommands(aa);return V}_applyRemoves(V,da){if(0!==da.changes.length&&null!=this._bufferWriter){for(var aa of da.changes){var fa=
aa.id;if(da=V.instances.get(fa)){V.deleteInstance(fa);if(fa=N.back()){if(fa.to===da.from){fa.to=da.to;continue}if(fa.from===da.to){fa.from=da.from;continue}}fa=N.pushNew();fa.from=da.from;fa.to=da.to}}J.mergeAdjacentRanges(N);var Z=this._bufferWriter.vertexBufferLayout.stride/4;aa=N.reduce((ha,G)=>Math.max(ha,G.numElements),0)*Z;var ma=C(aa);ma.fill(0,0,aa);var S=V.vao.vertexBuffers.get("geometry");N.forAll(ha=>S.setSubData(ma,ha.from*Z,0,ha.numElements*Z));V.holes.pushArray(N.data,N.length);N.forAll((ha,
G)=>N.data[G]=null);N.clear();V.drawCommandsDirty=!0}}_applyAdds(V,da){if(0!==da.length&&null!=this._bufferWriter)if(L.hasVao(V)){var aa=this._bufferWriter,fa=aa.vertexBufferLayout.stride/4,Z=V.numElements,ma=da.reduce((A,F)=>A+aa.elementCount(F.geometry.attributes),0);Z=Math.min((Z+ma)*fa,4194304);ma=4*Z;if(V.vao.byteSize<U(4128768)&&ma>V.vao.byteSize)this._applyAndRebuild(V,da,null);else{J.mergeAdjacentRanges(V.holes);var S=[];for(var ha of da)ma=aa.elementCount(ha.geometry.attributes),ma=M(V.holes,
ma),S.push(ma);var G=V.vao.vertexBuffers.get("geometry"),ca=0,pa=0,Y=0,R=C(Z),ia=aa.vertexBufferLayout.createView(R.buffer);da.forEach((A,F)=>{F=S[F];if(null!=F){if(Y!==F){var O=Y-pa;0<O&&G.setSubData(R,pa*fa,0,O*fa);pa=F;ca=0}O=aa.elementCount(A.geometry.attributes);this._writeGeometry(A,ia,ca);ca+=O;Y=F+O;F=new E.Instance(A,F,F+O);u.assert(null==V.instances.get(A.id));V.addInstance(A.id,F);V.drawCommandsDirty=!0}});ha=Y-pa;0<ha&&G.setSubData(R,pa*fa,0,ha*fa);c.filterInPlace(da,(A,F)=>null==S[F])}}else this._applyAndRebuild(V,
da,null)}_writeGeometry(V,da,aa){null!=this._bufferWriter&&(z.copy(B,V.transformation),B[12]-=V.localOrigin.vec3[0],B[13]-=V.localOrigin.vec3[1],B[14]-=V.localOrigin.vec3[2],z.invert(H,B),z.transpose(H,H),this._bufferWriter.write(B,H,V.geometry.attributes,V.geometry.objectAndLayerIdColor,da,aa))}updateAnimation(V){return this.material.update(V)}acquireTechniques(V){if(!this.material.shouldRender(V))return null;const {output:da,bind:aa}=V;if(!this.material.produces.get(aa.slot)?.(da))return null;const {highlightGroupName:fa,
slot:Z}=aa,ma=da===w.ShaderOutput.ShadowHighlight,S=da===w.ShaderOutput.Highlight,ha=S||ma,G=R=>ha&&(0===this._highlightGroups.size||S&&!!fa&&!R.has(fa));if(G(this._highlightGroups))return null;const ca=da===w.ShaderOutput.ShadowExcludeHighlight,pa=!(ha||ca);for(const {buffers:R}of this._dataByOrigin.values())for(const ia of R){if(G(ia.highlightGroups))continue;var Y=ma?0<ia.drawCommandsHighlights.size:ha?fa?ia.drawCommandsHighlights.get(fa):0<ia.drawCommandsHighlights.size:((ca&&ia.needsMultipleCommands()?
ia.drawCommandsShadowHighlightRest:ia.drawCommandsDefault)||null)?.length??!1;const A=pa&&ia.drawCommandsOccludees||null;if(Y||A?.length)if(Y=this._glMaterials.load(V.rctx,Z,da)?.beginSlot(aa))return Y}return null}render(V,da){const {output:aa,bind:fa}=V,{slot:Z,highlightGroupName:ma}=fa,S=aa===w.ShaderOutput.Highlight;if(!S||ma){var ha=aa===w.ShaderOutput.ShadowHighlight,G=S||ha,ca=aa===w.ShaderOutput.ShadowExcludeHighlight,pa=!(G||ca),Y=Z===x.RenderSlot.OCCLUDER_MATERIAL||Z===x.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?
Z:null,{rctx:R}=V;R.runAppleAmdDriverHelper();V=R.bindTechnique(da,fa,this.material.parameters);for(const F of this._dataByOrigin.values())for(const O of F.buffers){if(S&&(!O.hasHighlights||!O.drawCommandsHighlights.has(ma)))continue;if(ha&&!O.hasHighlights)continue;var ia=()=>{const na=[];for(const P of O.drawCommandsHighlights.values())na.push(P);return na},A=G&&!ha?O.drawCommandsHighlights.get(ma)??null:null;ia=ha?ia():G?A?[A]:X:ca&&O.needsMultipleCommands()?[O.drawCommandsShadowHighlightRest]:
[O.drawCommandsDefault];A=ia.some(na=>0<na.length);const ba=pa&&O.drawCommandsOccludees||null;if(A||ba?.length){this._drawParameters.origin=F.origin;V.bindDraw(fa,this.material.parameters,this._drawParameters);da.ensureAttributeLocations(O.vao);R.bindVAO(O.vao);if(A)for(const na of ia)R.setPipelineState(da.getPipeline(!1,Y)),na.forAll(P=>R.drawArrays(da.primitiveType,P.first,P.count));ba?.length&&(R.setPipelineState(da.getPipeline(!0,Y)),ba.forAll(na=>R.drawArrays(da.primitiveType,na.first,na.count)))}}}}get test(){}};
b.__decorate([l.property({constructOnly:!0})],a.MergedRenderer.prototype,"material",void 0);a.MergedRenderer=b.__decorate([t.subclass("esri.views.3d.webgl-engine.materials.renderers.MergedRenderer")],a.MergedRenderer);class y{constructor(V){this.origin=V;this.changes=[]}}const B=r.create(),H=r.create(),N=new k({allocator:V=>V||new J.BufferRange,deallocator:null});let K=new Float32Array(65536);const X=[];a.sizeForVao=U;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/NestedMap":function(){define(["exports"],
function(a){class b{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(c,f){return this._outer.get(c)?.get(f)}getInner(c){return this._outer.get(c)}set(c,f,e){const n=this._outer.get(c);n?n.set(f,e):this._outer.set(c,new Map([[f,e]]))}delete(c,f){const e=this._outer.get(c);e&&(e.delete(f),0===e.size&&this._outer.delete(c))}forEach(c){this._outer.forEach((f,e)=>c(f,e))}forAll(c){for(const f of this._outer.values())for(const e of f.values())c(e)}}
a.NestedMap=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ModelDirtyTypes":function(){define(["exports"],function(a){a.DirtyOperation=void 0;(function(b){b[b.ADD=0]="ADD";b[b.UPDATE=1]="UPDATE";b[b.REMOVE=2]="REMOVE"})(a.DirtyOperation||(a.DirtyOperation={}));a.DirtyState=void 0;(function(b){b[b.NONE=0]="NONE";b[b.VISIBILITY=1]="VISIBILITY";b[b.GEOMETRY=2]="GEOMETRY";b[b.TRANSFORMATION=4]="TRANSFORMATION";b[b.HIGHLIGHT=8]="HIGHLIGHT";b[b.OCCLUDEE=
16]="OCCLUDEE"})(a.DirtyState||(a.DirtyState={}));Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec2f64","../../../../chunks/vec42","../../../../core/libs/gl-matrix-2/factories/vec4f64"],function(a,b,c,f){function e(k,h="Assertion"){if(!k)throw new d(`${h} at ${Error(h).stack}`);}const n=f.create();class d{constructor(k){this.message=k}toString(){return`AssertException: ${this.message}`}}
a.assert=e;a.isTranslationMatrix=function(k){return 1===k[0]&&0===k[1]&&0===k[2]&&0===k[3]&&0===k[4]&&1===k[5]&&0===k[6]&&0===k[7]&&0===k[8]&&0===k[9]&&1===k[10]&&0===k[11]&&1===k[15]};a.logWithBase=function(k,h){return Math.log(k)/Math.log(h)};a.project=function(k,h,l,m,t){n[0]=k[0];n[1]=k[1];n[2]=k[2];n[3]=1;c.transformMat4(n,n,h);2<t.length&&(t[2]=-n[2]);c.transformMat4(n,n,l);e(0!==n[3]);t[0]=n[0]/n[3];t[1]=n[1]/n[3];t[2]=n[2]/n[3];t[0]=(.5*t[0]+.5)*m[2]+m[0];t[1]=(.5*t[1]+.5)*m[3]+m[1]};a.rayBoxTest=
function(k,h,l,m){let t,z=(l[0]-k[0])/h[0],r=(m[0]-k[0])/h[0];z>r&&(t=z,z=r,r=t);let v=(l[1]-k[1])/h[1],w=(m[1]-k[1])/h[1];v>w&&(t=v,v=w,w=t);if(z>w||v>r)return!1;v>z&&(z=v);w<r&&(r=w);l=(l[2]-k[2])/h[2];k=(m[2]-k[2])/h[2];l>k&&(t=l,l=k,k=t);if(z>k||l>r)return!1;k<r&&(r=k);return 0>r?!1:!0};a.rayRay2D=function(k,h,l,m,t,z=b.create()){const r=(m[t]-l[t])*(h[0]-k[0])-(m[0]-l[0])*(h[t]-k[t]);if(0===r)return!1;l=((m[0]-l[0])*(k[t]-l[t])-(m[t]-l[t])*(k[0]-l[0]))/r;z[0]=k[0]+l*(h[0]-k[0]);z[1]=k[t]+l*(h[t]-
k[t]);return!0};a.setMatrixTranslation3=function(k,h,l,m){k[12]=h;k[13]=l;k[14]=m};a.verify=function(k,h){k||console.warn("Verify failed: "+(h||"")+"\n"+Error("verify").stack)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/BufferRange":function(){define(["exports"],function(a){class b{constructor(c=0,f=0){this.from=c;this.to=f}get numElements(){return this.to-this.from}}a.BufferRange=b;a.mergeAdjacentRanges=function(c){const f=new Map;
c.forAll(n=>f.set(n.from,n));for(var e=!0;e;){e=!1;for(let n=0;n<c.length;++n){e=c.data[n];const d=f.get(e.to);if(!d)return;e.to=d.to;f.delete(d.from);c.removeUnordered(d);e=!0}}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/Instance":function(){define(["exports","./BufferRange"],function(a,b){class c extends b.BufferRange{constructor(f,e,n){super(e,n);this.geometry=f}get isVisible(){return this.geometry.visible}get hasHighlights(){return this.isVisible&&
this.geometry.hasHighlights}foreachHighlightGroup(f){this.isVisible&&this.geometry.foreachHighlightGroup(f)}get hasOccludees(){return null!=this.geometry.occludees}}a.Instance=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/PerBufferData":function(){define(["exports","../../../../../core/PooledArray","./BufferRange","./DrawCommand"],function(a,b,c,f){function e(){return new b({allocator:h=>h||new f.DrawCommand,deallocator:h=>h})}function n(h,
l){const m=h.back();null==m?(h=h.pushNew(),h.first=l.from,h.count=l.numElements):m.first+m.count>=l.from?m.count=l.from-m.first+l.numElements:(h=h.pushNew(),h.first=l.from,h.count=l.numElements)}class d{constructor(){this._numElements=0;this._instances=new Map;this.holes=new b({allocator:h=>h||new c.BufferRange,deallocator:null});this.hasOccludees=this.hasHiddenInstances=!1;this.drawCommandsDirty=!0;this.highlightGroups=new Set;this.drawCommandsDefault=e();this.drawCommandsHighlights=new Map;this.drawCommandsOccludees=
e();this.drawCommandsShadowHighlightRest=e()}get numElements(){return this._numElements}get instances(){return this._instances}get hasHighlights(){return 0<this.highlightGroups.size}resetInstanceSummary(){this.hasOccludees=this.hasHiddenInstances=!1;this.highlightGroups.clear()}updateIfDrawCommandsDirty(h){if(this.drawCommandsDirty){this.resetInstanceSummary();for(const l of this.instances.values())this.updateDrawState(l);this.updateDrawCommands(h)}}addInstance(h,l){this.deleteInstance(h);this._instances.set(h,
l);this._numElements+=l.numElements}deleteInstance(h){const l=this._instances.get(h);l&&(this._numElements-=l.numElements,this._instances.delete(h))}updateInstance(h,l,m){if(h=this._instances.get(h))this._numElements-=h.numElements,h.from=l,h.to=m,this._numElements+=h.numElements}updateDrawState(h){h.isVisible?(h.foreachHighlightGroup(l=>this.highlightGroups.add(l)),h.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(h){this.drawCommandsDefault.clear();this.drawCommandsHighlights.clear();
this.drawCommandsOccludees.clear();this.drawCommandsShadowHighlightRest.clear();this.drawCommandsDirty=!1;if(0!==this._instances.size)if(this.needsMultipleCommands()){h=Array.from(this._instances.values()).sort((m,t)=>m.from===t.from?m.to-t.to:m.from-t.from);var {drawCommandsHighlights:l}=this;for(const m of h)m.isVisible&&(n(m.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,m),m.hasHighlights?m.foreachHighlightGroup(t=>{let z=l.get(t);z||(z=e(),l.set(t,z));n(z,m)}):n(this.drawCommandsShadowHighlightRest,
m))}else{const m=this.drawCommandsDefault.pushNew(),t=this.holes.front();null!=this.vao&&1===this.holes.length&&t.to===Math.floor(this.vao.byteSize/h)?(m.first=0,m.count=t.from):(m.first=Infinity,m.count=0,this._instances.forEach(z=>{m.first=Math.min(m.first,z.from);m.count=Math.max(m.count,z.to)}),m.count-=m.first)}}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}class k extends d{}a.PerBufferData=d;a.PerVaoData=k;a.hasVao=function(h){return null!=h.vao};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/DrawCommand":function(){define(["exports"],function(a){class b{constructor(){this.count=this.first=0}}a.DrawCommand=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/PerOriginData":function(){define(["exports"],function(a){class b{constructor(c){this.origin=c;this.buffers=[]}dispose(){this.buffers.forEach(c=>c.vao.dispose());
this.buffers.length=0}findBuffer(c){return this.buffers.find(f=>f.instances.has(c))}}a.PerOriginData=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/LodRenderer":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/has ../../../../../../core/promiseUtils ../../../../../../core/Logger ../../../../../../core/RandomLCG ../../../../../../core/Error ../../../../../../core/accessorSupport/decorators/subclass ../../../../webgl-engine/lib/VertexAttribute ../../../../webgl-engine/lib/lodRendering/LodRenderer ../../../../webgl-engine/lib/lodRendering/LodResources".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){function t(r,v){v=v.levels.map(w=>{const q=w.components.map(g=>{const p=r(g.materialId);if(!z(p))throw Error("LodRenderer only supports DefaultMaterial");const x=p.createBufferWriter().vertexBufferLayout;return new m.LodComponentResources({material:p,vertexBufferLayout:x,buffer:g.renderGeometryBuffer.data,elementCount:g.renderGeometryBuffer.elementCount,boundingInfo:g.boundingInfo})});return new m.LodLevelResources(q,w.minScreenSpaceRadius)});return new m.LodResources(v)}
function z(r){return null!=r&&"materialType"in r&&"default"===r.materialType}a.LodRenderer=class{constructor(r){this._optionalFields=[];this._instanceIndexToFeatureId=new Map;this._featureIdToInstanceIndex=new Map;this._disposeResourceHandles=[];this._lodRendererResources=null;this.layerUid=r.layerUid;this.view=r.view;this.sharedResources=this.view.sharedSymbolResources;this.scheduler=this.view.resourceController.scheduler}async doLoad(r,v,w){c("enable-feature:objectAndLayerId-rendering")&&this._optionalFields.push(h.VertexAttribute.OBJECTANDLAYERIDCOLOR);
r=t(x=>v(x),r);const q=this.view._stage,g=m.materialsFromLodResources(r);q.addMany(g);this._addDisposeResource(()=>q.removeMany(g));const p=m.texturesFromLodResources(r);q.addMany(p);this._addDisposeResource(()=>{p.forEach(x=>x.unload());q.removeMany(p)});await Promise.all(p.map(x=>this.view._stage.schedule(()=>x.load(q.renderView.renderingContext),w)));f.throwIfAborted(w);this._lodRendererResources={lodRenderer:await this._createLodRenderer(r,w),materials:g,textures:p}}addInstances(r){var v=this._lodRendererResources;
if(null!=v){var {featureIds:w,localTransforms:q,globalTransforms:g}=r;r=v.lodRenderer;if(null!=r){r=r.instanceData;v=w.length;for(let p=0;p<v;++p){const x=w[p],u=r.addInstance(),D=r.view,J=16*p;D.localTransform.copyFromTypedBuffer(u,q,J);D.globalTransform.copyFromTypedBuffer(u,g,J);r.updateModelTransform(u);r.setVisible(u,!0);this._instanceIndexToFeatureId.set(u,x);this._featureIdToInstanceIndex.set(x,u)}}}}removeInstances(r){var v=this._lodRendererResources;if(null!=v){v=(v?.lodRenderer).instanceData;
var w=this._instanceIndexToFeatureId,q=this._featureIdToInstanceIndex,g=r.length;for(let p=0;p<g;++p){const x=r[p],u=q.get(x);null!=u&&(v.removeInstance(u),w.delete(u),q.delete(x))}}}_addDisposeResource(r){this._disposeResourceHandles.push(r)}async _createLodRenderer(r,v){const w=this.view._stage,q=new l.LodRenderer({symbol:r,optionalFields:this._optionalFields,metadata:{layerUid:this.layerUid,graphicUid:g=>1,notifyGraphicGeometryChanged:g=>1,notifyGraphicVisibilityChanged:g=>1},shaderTransformation:null},
this.scheduler);q.slicePlaneEnabled=!1;this._addDisposeResource(()=>{w.removeRenderPlugin(q);q.destroy()});await w.addRenderPlugin(q,v);return q}};a.LodRenderer=b.__decorate([k.subclass("esri.views.3d.layers.graphics.pipeline.rendering.LodRenderer")],a.LodRenderer);a.isDefaultMaterial=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/LodRenderer":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/Error ../../../../../core/MapUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../chunks/vec32 ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../support/debugFlags ../../../support/buffer/glUtil ../../../support/buffer/InterleavedLayout ../../../webgl/RenderCamera ../../core/shaderLibrary/ShaderOutput ../../effects/RenderPlugin ../DefaultVertexAttributeLocations ../IntersectorInterfaces ../Octree ../RenderSlot ../Util ../VertexAttribute ./InstanceData ./InstanceOctree ./LevelSelector ./LodLevel ./RenderInstanceData ../../materials/internal/MaterialUtil ../../materials/renderers/utils ../../shaders/DefaultMaterialTechnique ../../../../support/Scheduler ../../../../webgl/Util".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H,N,K,X,V,da){function aa(R,ia,A){const F=R.allocateHead();R=R.view;K.encodeDoubleVec3(ia.modelOrigin,A,R.modelOriginHi,R.modelOriginLo,F);R.model.copyFrom(F,ia.model,A);R.modelNormal.copyFrom(F,ia.modelNormal,A);ia.color&&R.color&&R.color.copyFrom(F,ia.color,A);ia.objectAndLayerIdColor&&R.objectAndLayerIdColor&&R.objectAndLayerIdColor.copyFrom(F,ia.objectAndLayerIdColor,A);ia.featureAttribute&&R.featureAttribute&&R.featureAttribute.copyFrom(F,
ia.featureAttribute,A)}function fa(R){let ia=g.newLayout().vec3f(M.VertexAttribute.INSTANCEMODELORIGINHI).vec3f(M.VertexAttribute.INSTANCEMODELORIGINLO).mat3f(M.VertexAttribute.INSTANCEMODEL).mat3f(M.VertexAttribute.INSTANCEMODELNORMAL);null!=R&&R.includes("featureAttribute")&&(ia=ia.vec4f(M.VertexAttribute.INSTANCEFEATUREATTRIBUTE));null!=R&&R.includes("color")&&(ia=ia.vec4u8(M.VertexAttribute.INSTANCECOLOR));null!=R&&R.includes("objectAndLayerIdColor")&&(ia=ia.vec4u8(M.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR));
return ia}const Z=R=>{const ia=R.baseBoundingSphere.radius;R=R.levels.map(A=>A.minScreenSpaceRadius);return new y.LevelSelector(ia,R)};a.LodRenderer=class extends u.AsyncRenderPlugin{constructor(R,ia){super(R);this.type=J.IntersectorType.LOD;this.isGround=!1;this._levels=[];this._defaultRenderInstanceData=[];this._highlightRenderInstanceDataMap=new Map;this._cycleStartIndex=this._instanceIndex=0;this._slicePlane=!1;this._camera=new p;this._updateCyclesWithStaticCamera=-1;this._needFullCycle=!1;this.produces=
new Map([[L.RenderSlot.OPAQUE_MATERIAL,A=>this._produces(A)],[L.RenderSlot.TRANSPARENT_MATERIAL,A=>this._hasTransparentLevels()?this._produces(A):!1]]);this._instanceData=new C.InstanceData({shaderTransformation:R.shaderTransformation},R.optionalFields);this.addHandles(ia.registerTask(V.TaskPriority.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=fa(this.optionalFields);this._glInstanceBufferLayout=q.glLayout(this._instanceBufferLayout,1);this.addHandles([this._instanceData.events.on("instances-changed",
()=>this._requestUpdateCycle()),this._instanceData.events.on("instance-transform-changed",({index:R})=>{this._requestUpdateCycle();this.metadata.notifyGraphicGeometryChanged(R)}),this._instanceData.events.on("instance-visibility-changed",({index:R})=>{this._requestUpdateCycle(!0);this.metadata.notifyGraphicVisibilityChanged(R)}),this._instanceData.events.on("instance-highlight-changed",()=>this._requestUpdateCycle(!0))])}get _allRenderInstanceData(){const R=[this._defaultRenderInstanceData];for(const ia of this._highlightRenderInstanceDataMap)R.push(ia[1]);
return R}get _enableLevelSelection(){return 1<this.symbol.levels.length}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(R){this._slicePlane=R}get layerUid(){return this.metadata.layerUid}get instanceData(){return this._instanceData}get hasEmissions(){return this.baseMaterial.hasEmissions}get usedMemory(){return this._allRenderInstanceData.reduce((R,
ia)=>ia.reduce((A,F)=>A+F.usedMemory,R),0)}get renderStats(){const R=this._instanceData.size,ia=[];this._levels.forEach((A,F)=>{F=this._allRenderInstanceData[0][F].size+this._allRenderInstanceData[1][F].size;A=A.triangleCount;ia.push({renderedInstances:F,renderedTriangles:F*A,trianglesPerInstance:A})});return{totalInstances:R,renderedInstances:ia.reduce((A,F)=>A+F.renderedInstances,0),renderedTriangles:ia.reduce((A,F)=>A+F.renderedTriangles,0),levels:ia}}_createRenderInstanceDataArray(R=[]){const {rctx:ia}=
this._context.renderContext;this.symbol.levels.map(A=>{R.push(new H.RenderInstanceData(ia,this._instanceBufferLayout))});return R}async initializeRenderContext(R,ia){this._context=R;this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const A=await Promise.allSettled(this.symbol.levels.map(O=>B.LodLevel.create(R,O,ia))),F=A.map(O=>"fulfilled"===O.status?O.value:null).filter(c.isSome);if(d.isAborted(ia)||F.length!==A.length){F.forEach(O=>O.destroy());d.throwIfAborted(ia);for(const O of A)if("rejected"===
O.status)throw O.reason;}this._levels=F;this._levelSelector=Z(this)}uninitializeRenderContext(){this._invalidateOctree();this._levels.forEach(R=>R.destroy());this._defaultRenderInstanceData.forEach(R=>R.destroy());this._highlightRenderInstanceDataMap.forEach(R=>R.forEach(ia=>ia.destroy()))}_hasTransparentLevels(){return this._levels.some(R=>R.components.some(ia=>ia.material.produces.get(L.RenderSlot.TRANSPARENT_MATERIAL)?.(x.ShaderOutput.Color)))}hasHighlights(){return e.someMap(this._highlightRenderInstanceDataMap,
R=>R.some(ia=>0<ia.size))}_produces(R){return R!==x.ShaderOutput.Highlight&&R!==x.ShaderOutput.ShadowHighlight||this.hasHighlights()}prepareRender(R){if(!w.debugFlags.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const ia=R.bind.contentCamera.equals(this._camera);this._camera.copyFrom(R.bind.contentCamera);ia||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(V.noBudget),this._needFullCycle=!1)}}acquireTechniques(R){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(R.output))return null;
const ia=this._getInstanceDatas(R);if(!ia)return null;const A=[],F=this.levels;ia.forEach(O=>F.forEach(({components:ba},na)=>ba.forEach(P=>A.push(this._beginComponent(R,O[na],P)))));return A}render(R,ia){const A=this._getInstanceDatas(R);if(A&&null!=ia){var F=0;R.rctx.bindVAO();var O=this.levels;A.forEach(ba=>O.forEach(({components:na},P)=>na.forEach(W=>this._renderComponent(R,ia[F++],ba[P],W,P))))}}_getInstanceDatas(R){const {output:ia,bind:A}=R;R=ia===x.ShaderOutput.Highlight;const F=ia!==x.ShaderOutput.ShadowExcludeHighlight;
if(!R&&ia!==x.ShaderOutput.ShadowHighlight)return F?this._allRenderInstanceData:[this._defaultRenderInstanceData];if(F){if(R){var {highlightGroupName:O}=A;return O?(O=this._highlightRenderInstanceDataMap.get(O))?[O]:null:null}R=[];for(O of this._highlightRenderInstanceDataMap)R.push(O[1]);return R}return null}intersect(R,ia,A,F){if(this.baseMaterial.visible&&null!=this._octree){var O=r.create();z.subtract(O,F,A);var ba=na=>{this._instanceData.getCombinedModelTransform(na,ha);R.transform.set(ha);z.transformMat4(G,
A,R.transform.inverse);z.transformMat4(ca,F,R.transform.inverse);const P=this._instanceData.getState(na),W=this._instanceData.getLodLevel(na),ea=this._levels.length;Q.assert(0!==(P&C.StateFlags.ACTIVE),"invalid instance state");Q.assert(0<=W&&W<ea,"invaid lod level");this._levels[W].intersect(R,ia,G,ca,na,this.metadata,ea)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(ba):this._octree.forEachAlongRay(A,O,ba)}}notifyShaderTransformationChanged(){this._invalidateOctree();this._requestUpdateCycle()}get _octree(){if(null==
this._octreeCached){const R=this._instanceData,ia=R.view?.state;if(!ia)return null;this._octreeCached=new U.InstanceOctree(R,this.baseBoundingSphere);for(let A=0;A<R.capacity;++A)ia.get(A)&C.StateFlags.ACTIVE&&this._octreeCached.addInstance(A)}return this._octreeCached}_invalidateOctree(){this._octreeCached=n.destroyMaybe(this._octreeCached)}queryDepthRange(R){if(null==this._octree)return{near:Infinity,far:-Infinity};var ia=R.viewForward,A=this._octree.findClosest(ia,E.DepthOrder.FRONT_TO_BACK,R.frustum);
const F=this._octree.findClosest(ia,E.DepthOrder.BACK_TO_FRONT,R.frustum);if(null==A||null==F)return{near:Infinity,far:-Infinity};const O=R.eye,ba=this._instanceData.view;ba.boundingSphere.getVec(A,S);z.subtract(S,S,O);A=z.dot(S,ia)-S[3];ba.boundingSphere.getVec(F,S);z.subtract(S,S,O);ia=z.dot(S,ia)+S[3];return{near:Math.max(R.near,A),far:Math.min(R.far,ia)}}_requestUpdateCycle(R=!1){this._updateCyclesWithStaticCamera=-1;this._cycleStartIndex=this._instanceIndex;R&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++;
this._allRenderInstanceData.forEach(R=>R.forEach(ia=>ia.startUpdateCycle()))}get running(){return 0<this._instanceData.size&&1>this._updateCyclesWithStaticCamera}runTask(R){const {_enableLevelSelection:ia,_camera:A,_levelSelector:F}=this;this._allRenderInstanceData.forEach(ja=>ja.forEach(oa=>oa.beginUpdate()));const O=this._instanceData,ba=O.view;let na=O.size;const P=O.capacity;let W=this._instanceIndex;const ea=Math.ceil(P/500);for(let ja=0;ja<na&&!R.done;++ja){W===this._cycleStartIndex&&this._startUpdateCycle();
const oa=ba.state.get(W);var ra=0;if(!(oa&C.StateFlags.ALLOCATED)){W=W+1===P?0:W+1;na++;continue}const qa=ba.lodLevel.get(W);oa&C.StateFlags.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[qa].freeTail();oa&C.StateFlags.HIGHLIGHT_ACTIVE&&O.foreachHighlightGroupPrev(W,sa=>{if(sa=this._highlightRenderInstanceDataMap.get(sa))sa[qa].freeTail();else throw new f("Internal error in lodRenderer");});if(oa&C.StateFlags.REMOVE)O.freeInstance(W);else if(oa&C.StateFlags.VISIBLE){let sa=0;ia&&(ba.modelOrigin.getVec(W,
ma),sa=F.selectLevel(ma,O.getCombinedMedianScaleFactor(W),A));ra=oa&~(C.StateFlags.ACTIVE|C.StateFlags.TRANSFORM_CHANGED);0<=sa&&(oa&C.StateFlags.HIGHLIGHT?(O.foreachHighlightGroup(W,ua=>{let ya=this._highlightRenderInstanceDataMap.get(ua);ya||(ya=this._createRenderInstanceDataArray(),ya.forEach(wa=>wa.beginUpdate()),this._highlightRenderInstanceDataMap.set(ua,ya));if(sa>=ya.length)throw new f(`LodRenderer internal error - missing lodLevel ${sa}`);aa(ya[sa],ba,W)}),ra|=C.StateFlags.HIGHLIGHT_ACTIVE):
(aa(this._defaultRenderInstanceData[sa],ba,W),ra|=C.StateFlags.DEFAULT_ACTIVE));ba.state.set(W,ra);ba.lodLevel.set(W,sa)}else ra=oa&~(C.StateFlags.ACTIVE|C.StateFlags.TRANSFORM_CHANGED),ba.state.set(W,ra);if(null!=this._octreeCached){const sa=!!(oa&C.StateFlags.ACTIVE);ra=!!(ra&C.StateFlags.ACTIVE);!sa&&ra?this._octreeCached.addInstance(W):sa&&!ra?this._octreeCached.removeInstance(W):sa&&ra&&oa&C.StateFlags.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(W),this._octreeCached.addInstance(W))}W=
W+1===P?0:W+1;0===W%ea&&R.madeProgress()}this._instanceIndex=W;this._allRenderInstanceData.forEach(ja=>ja.forEach(oa=>oa.endUpdate()));this._context.requestRender()}_beginComponent(R,ia,A){return 0===ia.size?null:A.glMaterials.load(R.rctx,R.bind.slot,R.output)?.beginSlot(R.bind)}_renderComponent(R,ia,A,F,O){if(ia){var {bind:ba,rctx:na}=R;na.runAppleAmdDriverHelper();var P=na.bindTechnique(ia,ba,F.material.parameters,Y);na.bindVAO(F.vao);ia.ensureAttributeLocations(F.vao);w.debugFlags.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&
R.output===x.ShaderOutput.Color&&(P.setUniform4fv("externalColor",pa[Math.min(O,pa.length-1)]),P.setUniform1i("colorMixMode",N.colorMixModes.replace));R=A.capacity;O=A.headIndex;P=A.tailIndex;var W=A.firstIndex,ea=this._glInstanceBufferLayout,ra=(ja,oa)=>{da.bindVertexBufferLayout(na,D.Default3D,A.buffer,ea,ja);na.drawArraysInstanced(ia.primitiveType,0,F.vertexCount,oa-ja);da.unbindVertexBufferLayout(na,D.Default3D,A.buffer,ea)};F.material.parameters.transparent&&null!=W?O>P?(Q.assert(W>=P&&W<=O,
"invalid firstIndex"),ra(W,O),ra(P,W)):O<P&&(W<=O?(Q.assert(0<=W&&W<=O,"invalid firstIndex"),ra(W,O),ra(P,R),ra(0,W)):(Q.assert(W>=P&&W<=R,"invalid firstIndex"),ra(W,R),ra(0,O),ra(P,W))):O>P?ra(P,O):O<P&&(ra(0,O),ra(P,R));na.bindVAO(null)}}};b.__decorate([k.property({constructOnly:!0})],a.LodRenderer.prototype,"symbol",void 0);b.__decorate([k.property({constructOnly:!0})],a.LodRenderer.prototype,"optionalFields",void 0);b.__decorate([k.property({constructOnly:!0})],a.LodRenderer.prototype,"metadata",
void 0);b.__decorate([k.property({constructOnly:!0})],a.LodRenderer.prototype,"shaderTransformation",void 0);b.__decorate([k.property()],a.LodRenderer.prototype,"_instanceData",void 0);b.__decorate([k.property()],a.LodRenderer.prototype,"_cycleStartIndex",void 0);b.__decorate([k.property({readOnly:!0})],a.LodRenderer.prototype,"_enableLevelSelection",null);b.__decorate([k.property()],a.LodRenderer.prototype,"_updateCyclesWithStaticCamera",void 0);b.__decorate([k.property({readOnly:!0})],a.LodRenderer.prototype,
"running",null);a.LodRenderer=b.__decorate([m.subclass("esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer")],a.LodRenderer);const ma=r.create(),S=v.create(),ha=t.create(),G=r.create(),ca=r.create(),pa=[v.fromValues(1,0,1,1),v.fromValues(0,0,1,1),v.fromValues(0,1,0,1),v.fromValues(1,1,0,1),v.fromValues(1,0,0,1)],Y=new X.DefaultMaterialDrawParameters;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec32":function(){define(["exports","../core/libs/gl-matrix-2/factories/vec3f64",
"../core/libs/gl-matrix-2/math/common"],function(a,b,c){function f(Y){const R=Y[0],ia=Y[1];Y=Y[2];return Math.sqrt(R*R+ia*ia+Y*Y)}function e(Y,R){Y[0]=R[0];Y[1]=R[1];Y[2]=R[2];return Y}function n(Y,R,ia,A){Y[0]=R;Y[1]=ia;Y[2]=A;return Y}function d(Y,R,ia){Y[0]=R[0]+ia[0];Y[1]=R[1]+ia[1];Y[2]=R[2]+ia[2];return Y}function k(Y,R,ia){Y[0]=R[0]-ia[0];Y[1]=R[1]-ia[1];Y[2]=R[2]-ia[2];return Y}function h(Y,R,ia){Y[0]=R[0]*ia[0];Y[1]=R[1]*ia[1];Y[2]=R[2]*ia[2];return Y}function l(Y,R,ia){Y[0]=R[0]/ia[0];Y[1]=
R[1]/ia[1];Y[2]=R[2]/ia[2];return Y}function m(Y,R){Y[0]=Math.ceil(R[0]);Y[1]=Math.ceil(R[1]);Y[2]=Math.ceil(R[2]);return Y}function t(Y,R){Y[0]=Math.floor(R[0]);Y[1]=Math.floor(R[1]);Y[2]=Math.floor(R[2]);return Y}function z(Y,R){Y[0]=Math.abs(R[0]);Y[1]=Math.abs(R[1]);Y[2]=Math.abs(R[2]);return Y}function r(Y,R){Y[0]=Math.sign(R[0]);Y[1]=Math.sign(R[1]);Y[2]=Math.sign(R[2]);return Y}function v(Y,R,ia){Y[0]=Math.min(R[0],ia[0]);Y[1]=Math.min(R[1],ia[1]);Y[2]=Math.min(R[2],ia[2]);return Y}function w(Y,
R,ia){Y[0]=Math.max(R[0],ia[0]);Y[1]=Math.max(R[1],ia[1]);Y[2]=Math.max(R[2],ia[2]);return Y}function q(Y,R=0,ia=1){Y[0]=Math.min(Math.max(Y[0],R),ia);Y[1]=Math.min(Math.max(Y[1],R),ia);Y[2]=Math.min(Math.max(Y[2],R),ia);return Y}function g(Y,R){Y[0]=Math.round(R[0]);Y[1]=Math.round(R[1]);Y[2]=Math.round(R[2]);return Y}function p(Y,R,ia){Y[0]=R[0]*ia;Y[1]=R[1]*ia;Y[2]=R[2]*ia;return Y}function x(Y,R,ia,A){Y[0]=R[0]+ia[0]*A;Y[1]=R[1]+ia[1]*A;Y[2]=R[2]+ia[2]*A;return Y}function u(Y,R){const ia=R[0]-
Y[0],A=R[1]-Y[1];Y=R[2]-Y[2];return Math.sqrt(ia*ia+A*A+Y*Y)}function D(Y,R){const ia=R[0]-Y[0],A=R[1]-Y[1];Y=R[2]-Y[2];return ia*ia+A*A+Y*Y}function J(Y){const R=Y[0],ia=Y[1];Y=Y[2];return R*R+ia*ia+Y*Y}function E(Y,R){Y[0]=-R[0];Y[1]=-R[1];Y[2]=-R[2];return Y}function L(Y,R){Y[0]=1/R[0];Y[1]=1/R[1];Y[2]=1/R[2];return Y}function Q(Y,R){var ia=R[0];const A=R[1],F=R[2];ia=ia*ia+A*A+F*F;0<ia&&(ia=1/Math.sqrt(ia),Y[0]=R[0]*ia,Y[1]=R[1]*ia,Y[2]=R[2]*ia);return Y}function M(Y,R){return Y[0]*R[0]+Y[1]*
R[1]+Y[2]*R[2]}function C(Y,R,ia){const A=R[0],F=R[1];R=R[2];const O=ia[0],ba=ia[1];ia=ia[2];Y[0]=F*ia-R*ba;Y[1]=R*O-A*ia;Y[2]=A*ba-F*O;return Y}function U(Y,R,ia){var A=R[0],F=R[1],O=R[2];R=ia[0];const ba=ia[1],na=ia[2];ia=F*na-O*ba;O=O*R-A*na;A=A*ba-F*R;F=Math.sqrt(ia*ia+O*O+A*A);Y[0]=ia/F;Y[1]=O/F;Y[2]=A/F;return Y}function y(Y,R,ia,A){const F=R[0],O=R[1];R=R[2];Y[0]=F+A*(ia[0]-F);Y[1]=O+A*(ia[1]-O);Y[2]=R+A*(ia[2]-R);return Y}function B(Y,R,ia,A,F,O){const ba=O*O,na=ba*(2*O-3)+1,P=ba*(O-2)+O,
W=ba*(O-1);O=ba*(3-2*O);Y[0]=R[0]*na+ia[0]*P+A[0]*W+F[0]*O;Y[1]=R[1]*na+ia[1]*P+A[1]*W+F[1]*O;Y[2]=R[2]*na+ia[2]*P+A[2]*W+F[2]*O;return Y}function H(Y,R,ia,A,F,O){var ba=1-O,na=ba*ba;const P=O*O,W=na*ba;na*=3*O;ba*=3*P;O*=P;Y[0]=R[0]*W+ia[0]*na+A[0]*ba+F[0]*O;Y[1]=R[1]*W+ia[1]*na+A[1]*ba+F[1]*O;Y[2]=R[2]*W+ia[2]*na+A[2]*ba+F[2]*O;return Y}function N(Y,R=1){var ia=c.RANDOM;const A=2*ia()*Math.PI;ia=2*ia()-1;const F=Math.sqrt(1-ia*ia)*R;Y[0]=Math.cos(A)*F;Y[1]=Math.sin(A)*F;Y[2]=ia*R;return Y}function K(Y,
R,ia){const A=R[0],F=R[1];R=R[2];Y[0]=ia[0]*A+ia[4]*F+ia[8]*R+ia[12];Y[1]=ia[1]*A+ia[5]*F+ia[9]*R+ia[13];Y[2]=ia[2]*A+ia[6]*F+ia[10]*R+ia[14];return Y}function X(Y,R,ia){const A=R[0],F=R[1];R=R[2];Y[0]=A*ia[0]+F*ia[3]+R*ia[6];Y[1]=A*ia[1]+F*ia[4]+R*ia[7];Y[2]=A*ia[2]+F*ia[5]+R*ia[8];return Y}function V(Y,R,ia){const A=ia[0],F=ia[1],O=ia[2],ba=R[0],na=R[1];R=R[2];const P=F*R-O*na,W=O*ba-A*R,ea=A*na-F*ba;ia=2*ia[3];Y[0]=ba+P*ia+2*(F*ea-O*W);Y[1]=na+W*ia+2*(O*P-A*ea);Y[2]=R+ea*ia+2*(A*W-F*P);return Y}
function da(Y,R,ia,A){const F=[],O=[];F[0]=R[0]-ia[0];F[1]=R[1]-ia[1];F[2]=R[2]-ia[2];O[0]=F[0];O[1]=F[1]*Math.cos(A)-F[2]*Math.sin(A);O[2]=F[1]*Math.sin(A)+F[2]*Math.cos(A);Y[0]=O[0]+ia[0];Y[1]=O[1]+ia[1];Y[2]=O[2]+ia[2];return Y}function aa(Y,R,ia,A){const F=[],O=[];F[0]=R[0]-ia[0];F[1]=R[1]-ia[1];F[2]=R[2]-ia[2];O[0]=F[2]*Math.sin(A)+F[0]*Math.cos(A);O[1]=F[1];O[2]=F[2]*Math.cos(A)-F[0]*Math.sin(A);Y[0]=O[0]+ia[0];Y[1]=O[1]+ia[1];Y[2]=O[2]+ia[2];return Y}function fa(Y,R,ia,A){const F=[],O=[];F[0]=
R[0]-ia[0];F[1]=R[1]-ia[1];F[2]=R[2]-ia[2];O[0]=F[0]*Math.cos(A)-F[1]*Math.sin(A);O[1]=F[0]*Math.sin(A)+F[1]*Math.cos(A);O[2]=F[2];Y[0]=O[0]+ia[0];Y[1]=O[1]+ia[1];Y[2]=O[2]+ia[2];return Y}function Z(Y,R){Q(ca,Y);Q(pa,R);Y=M(ca,pa);return 1<Y?0:-1>Y?Math.PI:Math.acos(Y)}function ma(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"}function S(Y,R){return Y[0]===R[0]&&Y[1]===R[1]&&Y[2]===R[2]}function ha(Y,R){if(Y===R)return!0;const ia=Y[0],A=Y[1];Y=Y[2];const F=R[0],O=R[1];R=R[2];const ba=c.getEpsilon();
return Math.abs(ia-F)<=ba*Math.max(1,Math.abs(ia),Math.abs(F))&&Math.abs(A-O)<=ba*Math.max(1,Math.abs(A),Math.abs(O))&&Math.abs(Y-R)<=ba*Math.max(1,Math.abs(Y),Math.abs(R))}function G(Y,R,ia){const A=ia[0]-R[0],F=ia[1]-R[1];R=ia[2]-R[2];ia=A*A+F*F+R*R;if(0<ia)return ia=1/Math.sqrt(ia),Y[0]=A*ia,Y[1]=F*ia,Y[2]=R*ia,Y;Y[0]=0;Y[1]=0;Y[2]=0;return Y}const ca=b.create(),pa=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,abs:z,add:d,angle:Z,bezier:H,ceil:m,clamp:q,copy:e,cross:C,crossAndNormalize:U,
direction:G,dist:u,distance:u,div:l,divide:l,dot:M,equals:ha,exactEquals:S,floor:t,hermite:B,inverse:L,len:f,length:f,lerp:y,max:w,min:v,mul:h,multiply:h,negate:E,normalize:Q,random:N,rotateX:da,rotateY:aa,rotateZ:fa,round:g,scale:p,scaleAndAdd:x,set:n,sign:r,sqrDist:D,sqrLen:J,squaredDistance:D,squaredLength:J,str:ma,sub:k,subtract:k,transformMat3:X,transformMat4:K,transformQuat:V},Symbol.toStringTag,{value:"Module"}));a.abs=z;a.add=d;a.angle=Z;a.bezier=H;a.ceil=m;a.clamp=q;a.copy=e;a.cross=C;a.crossAndNormalize=
U;a.direction=G;a.dist=u;a.distance=u;a.div=l;a.divide=l;a.dot=M;a.equals=ha;a.exactEquals=S;a.floor=t;a.hermite=B;a.inverse=L;a.len=f;a.length=f;a.lerp=y;a.max=w;a.min=v;a.mul=h;a.multiply=h;a.negate=E;a.normalize=Q;a.random=N;a.rotateX=da;a.rotateY=aa;a.rotateZ=fa;a.round=g;a.scale=p;a.scaleAndAdd=x;a.set=n;a.sign=r;a.sqrDist=D;a.sqrLen=J;a.squaredDistance=D;a.squaredLength=J;a.str=ma;a.sub=k;a.subtract=k;a.transformMat3=X;a.transformMat4=K;a.transformQuat=V;a.vec3=b})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports",
"../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types","../../webgl-engine/lib/Util"],function(a,b,c,f){class e{constructor(l,m){this.layout=l;this.buffer="number"===typeof m?new ArrayBuffer(m*l.stride):m;for(const t of l.fields.keys())m=l.fields.get(t),this[t]=new m.constructor(this.buffer,m.offset,this.stride)}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(l,
m){return(l=this[l])&&l.elementCount===m.ElementCount&&l.elementType===m.ElementType?l:null}slice(l,m){return new e(this.layout,this.buffer.slice(l*this.stride,m*this.stride))}copyFrom(l,m=0,t=0,z=l.count){const r=this.stride;0===r%4?(l=new Uint32Array(l.buffer,m*r,z*r/4),(new Uint32Array(this.buffer,t*r,z*r/4)).set(l)):(l=new Uint8Array(l.buffer,m*r,z*r),(new Uint8Array(this.buffer,t*r,z*r)).set(l));return this}get usedMemory(){return this.byteLength}dispose(){}}class n{constructor(l){this._lastAligned=
this._stride=0;this._fields=new Map;l&&(this._stride=l.stride,l.fields.forEach(m=>this._fields.set(m[0],{...m[1],constructor:h.get(m[1].constructor)})))}freeze(){return this}vec2f(l,m){this._appendField(l,b.BufferViewVec2f,m);return this}vec2f64(l,m){this._appendField(l,b.BufferViewVec2f64,m);return this}vec3f(l,m){this._appendField(l,b.BufferViewVec3f,m);return this}vec3f64(l,m){this._appendField(l,b.BufferViewVec3f64,m);return this}vec4f(l,m){this._appendField(l,b.BufferViewVec4f,m);return this}vec4f64(l,
m){this._appendField(l,b.BufferViewVec4f64,m);return this}mat3f(l,m){this._appendField(l,b.BufferViewMat3f,m);return this}mat3f64(l,m){this._appendField(l,b.BufferViewMat3f64,m);return this}mat4f(l,m){this._appendField(l,b.BufferViewMat4f,m);return this}mat4f64(l,m){this._appendField(l,b.BufferViewMat4f64,m);return this}vec4u8(l,m){this._appendField(l,b.BufferViewVec4u8,m);return this}f32(l,m){this._appendField(l,b.BufferViewFloat,m);return this}f64(l,m){this._appendField(l,b.BufferViewFloat64,m);
return this}u8(l,m){this._appendField(l,b.BufferViewUint8,m);return this}u16(l,m){this._appendField(l,b.BufferViewUint16,m);return this}i8(l,m){this._appendField(l,b.BufferViewInt8,m);return this}vec2i8(l,m){this._appendField(l,b.BufferViewVec2i8,m);return this}vec2i16(l,m){this._appendField(l,b.BufferViewVec2i16,m);return this}vec2u8(l,m){this._appendField(l,b.BufferViewVec2u8,m);return this}vec4u16(l,m){this._appendField(l,b.BufferViewVec4u16,m);return this}u32(l,m){this._appendField(l,b.BufferViewUint32,
m);return this}_appendField(l,m,t){if(this._fields.has(l))f.assert(!1,`${l} already added to vertex buffer layout`);else{var z=m.ElementCount*c.elementTypeSize(m.ElementType),r=this._stride;this._stride+=z;this._fields.set(l,{size:z,constructor:m,offset:r,optional:t})}}createBuffer(l){return new e(this,l)}createView(l){return new e(this,l)}clone(){const l=new n;l._stride=this._stride;l._fields=new Map;this._fields.forEach((m,t)=>l._fields.set(t,m));l.BufferType=this.BufferType;return l}get stride(){if(this._lastAligned!==
this._fields.size){let l=1;this._fields.forEach(m=>l=Math.max(l,c.elementTypeSize(m.constructor.ElementType)));this._stride=Math.floor((this._stride+l-1)/l)*l;this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}class d{constructor(l){this.fields=[];l.fields.forEach((m,t)=>{var z=m.constructor;this.fields.push([t,{...m,constructor:`${z.ElementType}_${z.ElementCount}`}])});this.stride=l.stride}}const k=[b.BufferViewFloat,b.BufferViewVec2f,b.BufferViewVec3f,b.BufferViewVec4f,
b.BufferViewMat3f,b.BufferViewMat4f,b.BufferViewFloat64,b.BufferViewVec2f64,b.BufferViewVec3f64,b.BufferViewVec4f64,b.BufferViewMat3f64,b.BufferViewMat4f64,b.BufferViewUint8,b.BufferViewVec2u8,b.BufferViewVec3u8,b.BufferViewVec4u8,b.BufferViewUint16,b.BufferViewVec2u16,b.BufferViewVec3u16,b.BufferViewVec4u16,b.BufferViewUint32,b.BufferViewVec2u32,b.BufferViewVec3u32,b.BufferViewVec4u32,b.BufferViewInt8,b.BufferViewVec2i8,b.BufferViewVec3i8,b.BufferViewVec4i8,b.BufferViewInt16,b.BufferViewVec2i16,
b.BufferViewVec3i16,b.BufferViewVec4i16,b.BufferViewInt32,b.BufferViewVec2i32,b.BufferViewVec3i32,b.BufferViewVec4i32],h=new Map;k.forEach(l=>h.set(`${l.ElementType}_${l.ElementCount}`,l));a.InterleavedBuffer=e;a.InterleavedLayout=n;a.PackedLayout=d;a.newLayout=function(){return new n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),
function(a,b,c,f,e,n,d){class k extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}static fromTypedArray(G,ca){return new k(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}k.ElementType="f32";class h extends e.BufferViewVec2Impl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}slice(G,ca){return this.sliceBuffer(h,G,ca)}static fromTypedArray(G,ca){return new h(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}
h.ElementType="f32";class l extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}slice(G,ca){return this.sliceBuffer(l,G,ca)}static fromTypedArray(G,ca){return new l(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}l.ElementType="f32";class m extends d.BufferViewVec4Impl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}slice(G,ca){return this.sliceBuffer(m,G,ca)}static fromTypedArray(G,ca){return new m(G.buffer,
G.byteOffset,ca,G.byteOffset+G.byteLength)}}m.ElementType="f32";class t extends b.BufferViewMat3Impl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}slice(G,ca){return this.sliceBuffer(t,G,ca)}static fromTypedArray(G,ca){return new t(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}t.ElementType="f32";class z extends b.BufferViewMat3Impl{constructor(G,ca=0,pa,Y){super(Float64Array,G,ca,pa,Y);this.elementType="f64"}slice(G,ca){return this.sliceBuffer(z,G,ca)}static fromTypedArray(G,
ca){return new z(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}z.ElementType="f64";class r extends c.BufferViewMat4Impl{constructor(G,ca=0,pa,Y){super(Float32Array,G,ca,pa,Y);this.elementType="f32"}slice(G,ca){return this.sliceBuffer(r,G,ca)}static fromTypedArray(G,ca){return new r(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}r.ElementType="f32";class v extends c.BufferViewMat4Impl{constructor(G,ca=0,pa,Y){super(Float64Array,G,ca,pa,Y);this.elementType="f64"}slice(G,ca){return this.sliceBuffer(v,
G,ca)}static fromTypedArray(G,ca){return new v(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}v.ElementType="f64";class w extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Float64Array,G,ca,pa,Y);this.elementType="f64"}slice(G,ca){return this.sliceBuffer(w,G,ca)}static fromTypedArray(G,ca){return new w(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}w.ElementType="f64";class q extends e.BufferViewVec2Impl{constructor(G,ca=0,pa,Y){super(Float64Array,G,ca,pa,Y);this.elementType=
"f64"}slice(G,ca){return this.sliceBuffer(q,G,ca)}static fromTypedArray(G,ca){return new q(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}q.ElementType="f64";class g extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Float64Array,G,ca,pa,Y);this.elementType="f64"}slice(G,ca){return this.sliceBuffer(g,G,ca)}static fromTypedArray(G,ca){return new g(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}g.ElementType="f64";class p extends d.BufferViewVec4Impl{constructor(G,ca=0,pa,Y){super(Float64Array,
G,ca,pa,Y);this.elementType="f64"}slice(G,ca){return this.sliceBuffer(p,G,ca)}static fromTypedArray(G,ca){return new p(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}p.ElementType="f64";class x extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Uint8Array,G,ca,pa,Y);this.elementType="u8"}slice(G,ca){return this.sliceBuffer(x,G,ca)}static fromTypedArray(G,ca){return new x(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}x.ElementType="u8";class u extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Uint8Array,G,ca,pa,Y);this.elementType="u8"}slice(G,ca){return this.sliceBuffer(u,G,ca)}static fromTypedArray(G,ca){return new u(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}u.ElementType="u8";class D extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Uint8Array,G,ca,pa,Y);this.elementType="u8"}slice(G,ca){return this.sliceBuffer(D,G,ca)}static fromTypedArray(G,ca){return new D(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}D.ElementType="u8";class J extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Uint8Array,G,ca,pa,Y);this.elementType="u8"}slice(G,ca){return this.sliceBuffer(J,G,ca)}static fromTypedArray(G,ca){return new J(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}J.ElementType="u8";class E extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Uint16Array,G,ca,pa,Y);this.elementType="u16"}slice(G,ca){return this.sliceBuffer(E,G,ca)}static fromTypedArray(G,ca){return new E(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}E.ElementType="u16";class L extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Uint16Array,G,ca,pa,Y);this.elementType="u16"}slice(G,ca){return this.sliceBuffer(L,G,ca)}static fromTypedArray(G,ca){return new L(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}L.ElementType="u16";class Q extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Uint16Array,G,ca,pa,Y);this.elementType="u16"}slice(G,ca){return this.sliceBuffer(Q,G,ca)}static fromTypedArray(G,ca){return new Q(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}Q.ElementType="u16";class M extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Uint16Array,G,ca,pa,Y);this.elementType="u16"}slice(G,ca){return this.sliceBuffer(M,G,ca)}static fromTypedArray(G,ca){return new M(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}M.ElementType="u16";class C extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Uint32Array,G,ca,pa,Y);this.elementType="u32"}slice(G,ca){return this.sliceBuffer(C,G,ca)}static fromTypedArray(G,ca){return new C(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}C.ElementType="u32";class U extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Uint32Array,G,ca,pa,Y);this.elementType="u32"}slice(G,ca){return this.sliceBuffer(U,G,ca)}static fromTypedArray(G,ca){return new U(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}U.ElementType="u32";class y extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Uint32Array,G,ca,pa,Y);this.elementType="u32"}slice(G,ca){return this.sliceBuffer(y,G,ca)}static fromTypedArray(G,ca){return new y(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}y.ElementType="u32";class B extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Uint32Array,G,ca,pa,Y);this.elementType="u32"}slice(G,ca){return this.sliceBuffer(B,G,ca)}static fromTypedArray(G,ca){return new B(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}B.ElementType="u32";class H extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Int8Array,G,ca,pa,Y);this.elementType="i8"}slice(G,ca){return this.sliceBuffer(H,G,ca)}static fromTypedArray(G,ca){return new H(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}H.ElementType="i8";class N extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Int8Array,G,ca,pa,Y);this.elementType="i8"}slice(G,ca){return this.sliceBuffer(N,G,ca)}static fromTypedArray(G,ca){return new N(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}N.ElementType="i8";class K extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Int8Array,G,ca,pa,Y);this.elementType="i8"}slice(G,ca){return this.sliceBuffer(K,G,ca)}static fromTypedArray(G,ca){return new K(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}K.ElementType="i8";class X extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Int8Array,G,ca,pa,Y);this.elementType="i8"}slice(G,ca){return this.sliceBuffer(X,G,ca)}static fromTypedArray(G,ca){return new X(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}X.ElementType="i8";class V extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Int16Array,G,ca,pa,Y);this.elementType="i16"}slice(G,ca){return this.sliceBuffer(V,G,ca)}static fromTypedArray(G,ca){return new V(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}V.ElementType="i16";class da extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Int16Array,G,ca,pa,Y);this.elementType="i16"}slice(G,ca){return this.sliceBuffer(da,G,ca)}static fromTypedArray(G,ca){return new da(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}da.ElementType="i16";class aa extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Int16Array,G,ca,pa,Y);this.elementType="i16"}slice(G,ca){return this.sliceBuffer(aa,G,ca)}static fromTypedArray(G,ca){return new aa(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}aa.ElementType="i16";class fa extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Int16Array,G,ca,pa,Y);this.elementType="i16"}slice(G,ca){return this.sliceBuffer(fa,G,ca)}static fromTypedArray(G,ca){return new fa(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}fa.ElementType="i16";class Z extends f.BufferViewScalarImpl{constructor(G,ca=0,pa,Y){super(Int32Array,G,ca,pa,Y);this.elementType="i32"}slice(G,ca){return this.sliceBuffer(Z,G,ca)}static fromTypedArray(G,ca){return new Z(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}Z.ElementType="i32";class ma extends e.BufferViewVec2Impl{constructor(G,
ca=0,pa,Y){super(Int32Array,G,ca,pa,Y);this.elementType="i32"}slice(G,ca){return this.sliceBuffer(ma,G,ca)}static fromTypedArray(G,ca){return new ma(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}ma.ElementType="i32";class S extends n.BufferViewVec3Impl{constructor(G,ca=0,pa,Y){super(Int32Array,G,ca,pa,Y);this.elementType="i32"}slice(G,ca){return this.sliceBuffer(S,G,ca)}static fromTypedArray(G,ca){return new S(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}S.ElementType="i32";class ha extends d.BufferViewVec4Impl{constructor(G,
ca=0,pa,Y){super(Int32Array,G,ca,pa,Y);this.elementType="i32"}slice(G,ca){return this.sliceBuffer(ha,G,ca)}static fromTypedArray(G,ca){return new ha(G.buffer,G.byteOffset,ca,G.byteOffset+G.byteLength)}}ha.ElementType="i32";a.BufferViewFloat=k;a.BufferViewFloat64=w;a.BufferViewInt16=V;a.BufferViewInt32=Z;a.BufferViewInt8=H;a.BufferViewMat3f=t;a.BufferViewMat3f64=z;a.BufferViewMat4f=r;a.BufferViewMat4f64=v;a.BufferViewUint16=E;a.BufferViewUint32=C;a.BufferViewUint8=x;a.BufferViewVec2f=h;a.BufferViewVec2f64=
q;a.BufferViewVec2i16=da;a.BufferViewVec2i32=ma;a.BufferViewVec2i8=N;a.BufferViewVec2u16=L;a.BufferViewVec2u32=U;a.BufferViewVec2u8=u;a.BufferViewVec3f=l;a.BufferViewVec3f64=g;a.BufferViewVec3i16=aa;a.BufferViewVec3i32=S;a.BufferViewVec3i8=K;a.BufferViewVec3u16=Q;a.BufferViewVec3u32=y;a.BufferViewVec3u8=D;a.BufferViewVec4f=m;a.BufferViewVec4f64=p;a.BufferViewVec4i16=fa;a.BufferViewVec4i32=ha;a.BufferViewVec4i8=X;a.BufferViewVec4u16=M;a.BufferViewVec4u32=B;a.BufferViewVec4u8=J;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],function(a){class b{constructor(c,f,e=0,n,d){this.TypedArrayConstructor=c;this.elementCount=9;c=this.TypedArrayConstructor;void 0===n&&(n=9*c.BYTES_PER_ELEMENT);const k=0===f.byteLength?0:e;this.typedBuffer=null==d?new c(f,k):new c(f,k,(d-e)/c.BYTES_PER_ELEMENT);this.typedBufferStride=n/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=
this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(c,f,e=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new c(this.buffer,f,this.stride,f+e*this.stride)}getMat(c,f){c*=this.typedBufferStride;for(let e=0;9>e;e++)f[e]=this.typedBuffer[c++];return f}setMat(c,f){c*=this.typedBufferStride;for(let e=0;9>e;e++)this.typedBuffer[c++]=f[e]}get(c,f){return this.typedBuffer[c*this.typedBufferStride+f]}set(c,f,e){this.typedBuffer[c*this.typedBufferStride+f]=e}copyFrom(c,
f,e){const n=this.typedBuffer,d=f.typedBuffer;c*=this.typedBufferStride;f=e*f.typedBufferStride;for(e=0;9>e;++e)n[c++]=d[f++]}get buffer(){return this.typedBuffer.buffer}}b.ElementCount=9;a.BufferViewMat3Impl=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],function(a){class b{constructor(c,f,e=0,n,d){this.TypedArrayConstructor=c;this.elementCount=16;c=this.TypedArrayConstructor;void 0===n&&(n=16*c.BYTES_PER_ELEMENT);
const k=0===f.byteLength?0:e;this.typedBuffer=null==d?new c(f,k):new c(f,k,(d-e)/c.BYTES_PER_ELEMENT);this.typedBufferStride=n/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(c,f,e=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new c(this.buffer,f,this.stride,f+e*this.stride)}getMat(c,f){c*=this.typedBufferStride;for(let e=0;16>e;e++)f[e]=this.typedBuffer[c++];
return f}setMat(c,f){c*=this.typedBufferStride;for(let e=0;16>e;e++)this.typedBuffer[c++]=f[e]}get(c,f){return this.typedBuffer[c*this.typedBufferStride+f]}set(c,f,e){this.typedBuffer[c*this.typedBufferStride+f]=e}copyFrom(c,f,e){this.copyFromTypedBuffer(c,f.typedBuffer,e*f.typedBufferStride)}copyFromTypedBuffer(c,f,e){const n=this.typedBuffer;c*=this.typedBufferStride;for(let d=0;16>d;++d)n[c++]=f[e++]}get buffer(){return this.typedBuffer.buffer}}b.ElementCount=16;a.BufferViewMat4Impl=b;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],function(a){class b{constructor(c,f,e=0,n,d){this.TypedArrayConstructor=c;this.elementCount=1;c=this.TypedArrayConstructor;void 0===n&&(n=c.BYTES_PER_ELEMENT);const k=0===f.byteLength?0:e;this.typedBuffer=null==d?new c(f,k):new c(f,k,(d-e)/c.BYTES_PER_ELEMENT);this.stride=n;this.typedBufferStride=n/c.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(c,
f,e=this.count-f){f=this.typedBuffer.byteOffset+f*this.stride;return new c(this.buffer,f,this.stride,f+e*this.stride)}get(c){return this.typedBuffer[c*this.typedBufferStride]}set(c,f){this.typedBuffer[c*this.typedBufferStride]=f}get buffer(){return this.typedBuffer.buffer}}b.ElementCount=1;a.BufferViewScalarImpl=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../core/libs/gl-matrix-2/math/vec2"],
function(a,b){class c{constructor(f,e,n=0,d,k){this.TypedArrayConstructor=f;this.elementCount=2;f=this.TypedArrayConstructor;void 0===d&&(d=2*f.BYTES_PER_ELEMENT);const h=0===e.byteLength?0:n;this.typedBuffer=null==k?new f(e,h):new f(e,h,(k-n)/f.BYTES_PER_ELEMENT);this.typedBufferStride=d/f.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(f,e,n=this.count-e){e=this.typedBuffer.byteOffset+
e*this.stride;return new f(this.buffer,e,this.stride,e+n*this.stride)}getVec(f,e){f*=this.typedBufferStride;return b.set(e,this.typedBuffer[f],this.typedBuffer[f+1])}setVec(f,e){f*=this.typedBufferStride;this.typedBuffer[f++]=e[0];this.typedBuffer[f]=e[1]}get(f,e){return this.typedBuffer[f*this.typedBufferStride+e]}set(f,e,n){this.typedBuffer[f*this.typedBufferStride+e]=n}setValues(f,e,n){f*=this.typedBufferStride;this.typedBuffer[f++]=e;this.typedBuffer[f]=n}copyFrom(f,e,n){const d=this.typedBuffer,
k=e.typedBuffer;f*=this.typedBufferStride;e=n*e.typedBufferStride;d[f++]=k[e++];d[f]=k[e]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=2;a.BufferViewVec2Impl=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/vec32"],function(a,b){class c{constructor(f,e,n=0,d,k){this.TypedArrayConstructor=f;this.elementCount=3;f=this.TypedArrayConstructor;void 0===d&&(d=3*f.BYTES_PER_ELEMENT);
const h=0===e.byteLength?0:n;this.typedBuffer=null==k?new f(e,h):new f(e,h,(k-n)/f.BYTES_PER_ELEMENT);this.typedBufferStride=d/f.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(f,e,n=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new f(this.buffer,e,this.stride,e+n*this.stride)}getVec(f,e){f*=this.typedBufferStride;return b.set(e,this.typedBuffer[f],
this.typedBuffer[f+1],this.typedBuffer[f+2])}setVec(f,e){f*=this.typedBufferStride;this.typedBuffer[f++]=e[0];this.typedBuffer[f++]=e[1];this.typedBuffer[f]=e[2]}get(f,e){return this.typedBuffer[f*this.typedBufferStride+e]}set(f,e,n){this.typedBuffer[f*this.typedBufferStride+e]=n}setValues(f,e,n,d){f*=this.typedBufferStride;this.typedBuffer[f++]=e;this.typedBuffer[f++]=n;this.typedBuffer[f]=d}copyFrom(f,e,n){const d=this.typedBuffer,k=e.typedBuffer;f*=this.typedBufferStride;e=n*e.typedBufferStride;
d[f++]=k[e++];d[f++]=k[e++];d[f]=k[e]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;a.BufferViewVec3Impl=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/vec42"],function(a,b){class c{constructor(f,e,n=0,d,k){this.TypedArrayConstructor=f;this.start=n;this.elementCount=4;f=this.TypedArrayConstructor;void 0===d&&(d=4*f.BYTES_PER_ELEMENT);const h=0===e.byteLength?0:n;this.typedBuffer=
null==k?new f(e,h):new f(e,h,(k-n)/f.BYTES_PER_ELEMENT);this.typedBufferStride=d/f.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(f,e,n=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new f(this.buffer,e,this.stride,e+n*this.stride)}getVec(f,e){f*=this.typedBufferStride;return b.set(e,this.typedBuffer[f++],this.typedBuffer[f++],this.typedBuffer[f++],
this.typedBuffer[f])}setVec(f,e){f*=this.typedBufferStride;this.typedBuffer[f++]=e[0];this.typedBuffer[f++]=e[1];this.typedBuffer[f++]=e[2];this.typedBuffer[f]=e[3]}get(f,e){return this.typedBuffer[f*this.typedBufferStride+e]}set(f,e,n){this.typedBuffer[f*this.typedBufferStride+e]=n}setValues(f,e,n,d,k){f*=this.typedBufferStride;this.typedBuffer[f++]=e;this.typedBuffer[f++]=n;this.typedBuffer[f++]=d;this.typedBuffer[f]=k}copyFrom(f,e,n){const d=this.typedBuffer,k=e.typedBuffer;f*=this.typedBufferStride;
e=n*e.typedBufferStride;d[f++]=k[e++];d[f++]=k[e++];d[f++]=k[e++];d[f]=k[e]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=4;a.BufferViewVec4Impl=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/types":function(){define(["exports"],function(a){a.elementTypeSize=function(b){switch(b){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};
a.isInteger=function(b){switch(b){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};a.isSigned=function(b){switch(b){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};a.maximumValue=function(b){switch(b){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl/RenderCamera":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/mathUtils ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/mat4 ../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../core/libs/gl-matrix-2/math/vec2 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/support/frustum ../../../geometry/support/ray ../../../geometry/support/vector ../../ViewingMode ../webgl-engine/lib/fov ../webgl-engine/lib/rendererUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J){var E;b=E=class extends b{constructor(y){super(y);this._ray=p.create();this._viewport=q.fromValues(0,0,1,1);this._padding=q.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._nearFar=z.fromValues(1,1E3);this._viewDirty=!0;this._viewMatrix=m.create();this._viewProjectionDirty=!0;this._viewProjectionMatrix=m.create();this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=m.create();this._frustumDirty=!0;this._frustum=g.create();
this._fullViewport=q.create();this._pixelRatio=1;this.column=this.row=0;this._columns=this._rows=1;this._center=v.create();this._up=v.create();this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(y){this._pixelRatio=0<y?y:1}get rows(){return this._rows}set rows(y){this._rows=Math.max(1,y)}get columns(){return this._columns}set columns(y){this._columns=Math.max(1,y)}get eye(){return this._ray.origin}set eye(y){this._compareAndSetView(y,this._ray.origin)}get center(){return this._center}set center(y){this._compareAndSetView(y,
this._center,"_center")}get ray(){r.subtract(this._ray.direction,this.center,this.eye);return this._ray}get up(){return this._up}set up(y){this._compareAndSetView(y,this._up,"_up")}get viewMatrix(){this._ensureViewClean();return this._viewMatrix}set viewMatrix(y){l.copy(this._viewMatrix,y);this.notifyChange("_viewMatrix");this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._viewInverseTransposeMatrixDirty=!0}get viewForward(){this._ensureViewClean();return r.set(v.create(),-this._viewMatrix[2],
-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){this._ensureViewClean();return r.set(v.create(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){this._ensureViewClean();return r.set(v.create(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(y){this._nearFar[0]!==y&&(this._nearFar[0]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(y){this._nearFar[1]!==
y&&(this._nearFar[1]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(y){this.x=y[0];this.y=y[1];this.width=y[2];this.height=y[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const y=w.scale(q.create(),this._viewport,1/this.pixelRatio),B=this._get("screenViewport");return B&&w.equals(y,B)?B:y}get screenPadding(){if(1===this.pixelRatio)return this._padding;const y=w.scale(q.create(),this._padding,
1/this.pixelRatio),B=this._get("screenPadding");return B&&w.equals(y,B)?B:y}get x(){return this._viewport[0]}set x(y){y+=this._padding[J.PaddingSide.LEFT];this._viewport[0]!==y&&(this._viewport[0]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(y){y+=this._padding[J.PaddingSide.BOTTOM];this._viewport[1]!==y&&(this._viewport[1]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(y){this._viewport[2]!==
y&&(this._viewport[2]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(y){this._viewport[3]!==y&&(this._viewport[3]=y,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[J.PaddingSide.RIGHT]+this._padding[J.PaddingSide.LEFT]}set fullWidth(y){this.width=y-(this._padding[J.PaddingSide.RIGHT]+this._padding[J.PaddingSide.LEFT])}get fullHeight(){return this._viewport[3]+
this._padding[J.PaddingSide.TOP]+this._padding[J.PaddingSide.BOTTOM]}set fullHeight(y){this.height=y-(this._padding[J.PaddingSide.TOP]+this._padding[J.PaddingSide.BOTTOM])}get fullViewport(){this._fullViewport[0]=this._viewport[0]-this._padding[J.PaddingSide.LEFT];this._fullViewport[1]=this._viewport[1]-this._padding[J.PaddingSide.BOTTOM];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(y){w.exactEquals(this._padding,
y)||(this._viewport[0]+=y[J.PaddingSide.LEFT]-this._padding[J.PaddingSide.LEFT],this._viewport[1]+=y[J.PaddingSide.BOTTOM]-this._padding[J.PaddingSide.BOTTOM],this._viewport[2]-=y[J.PaddingSide.RIGHT]+y[J.PaddingSide.LEFT]-(this._padding[J.PaddingSide.RIGHT]+this._padding[J.PaddingSide.LEFT]),this._viewport[3]-=y[J.PaddingSide.TOP]+y[J.PaddingSide.BOTTOM]-(this._padding[J.PaddingSide.TOP]+this._padding[J.PaddingSide.BOTTOM]),w.copy(this._padding,y),this._frustumDirty=this._viewProjectionDirty=!0,
this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){this._viewProjectionDirty&&(l.multiply(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return l.invert(m.create(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||m.create()}get fov(){return this._fov}set fov(y){this._fov=y;this._frustumDirty=
this._viewProjectionDirty=!0}get fovX(){return D.fovd2fovx(this._fov,this.width,this.height)}set fovX(y){this._fov=D.fovx2fovd(y,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=!0}get fovY(){return D.fovd2fovy(this._fov,this.width,this.height)}set fovY(y){this._fov=D.fovy2fovd(y,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=!0}get distance(){return r.distance(this.center,this.eye)}get frustum(){this._recomputeFrustum();return this._frustum}get viewInverseTransposeMatrix(){if(this._viewInverseTransposeMatrixDirty||
this._viewDirty)l.invert(this._viewInverseTransposeMatrix,this.viewMatrix),l.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1;return this._viewInverseTransposeMatrix}depthNDCToWorld(y){return 2*this.near*this.far/(this.far+this.near-(2*y-1)*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=
this.relativeElevation&&0<=this.relativeElevation}get _projectionMatrixInternal(){var y=this.width,B=this.height,H=this.near*Math.tan(this.fovY/2)*2,N=H*this._aspect,K=H/this.rows,X=N/this.columns;N=-N/2+this.column*X;X=N+X;H=-H/2+this.row*K;K=H+K;y=l.frustum(m.create(),N*(1+2*this._padding[J.PaddingSide.LEFT]/y),X*(1+2*this._padding[J.PaddingSide.RIGHT]/y),H*(1+2*this._padding[J.PaddingSide.BOTTOM]/B),K*(1+2*this._padding[J.PaddingSide.TOP]/B),this.near,this.far);return(B=this._get("projectionMatrix"))&&
l.equals(B,y)?B:y}copyFrom(y){r.copy(this._ray.origin,y.eye);this.center=y.center;this.up=y.up;w.copy(this._viewport,y.viewport);this.notifyChange("_viewport");w.copy(this._padding,y.padding);this.notifyChange("_padding");t.copy(this._nearFar,y.nearFar);this.notifyChange("_nearFar");this._fov=y.fov;this.row=y.row;this.column=y.column;this.rows=y.rows;this.columns=y.columns;this.relativeElevation=y.relativeElevation;this._viewDirty=y._viewDirty;this._viewDirty||(l.copy(this._viewMatrix,y.viewMatrix),
this.notifyChange("_viewMatrix"));this._viewProjectionDirty=!0;this._frustumDirty=y._frustumDirty;this._frustumDirty||(g.copy(this._frustum,y.frustum),this._frustumDirty=!1);y._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(l.copy(this._viewInverseTransposeMatrix,y.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);w.copy(this._fullViewport,y.fullViewport);this.pixelRatio=y.pixelRatio;return this}copyViewFrom(y){this.eye=y.eye;this.center=y.center;this.up=
y.up;this.fov=y.fov}clone(){return(new E).copyFrom(this)}equals(y){return r.exactEquals(this.eye,y.eye)&&r.exactEquals(this.center,y.center)&&r.exactEquals(this.up,y.up)&&w.exactEquals(this._viewport,y.viewport)&&w.exactEquals(this._padding,y.padding)&&t.exactEquals(this.nearFar,y.nearFar)&&this._fov===y.fov&&this.pixelRatio===y.pixelRatio&&this.relativeElevation===y.relativeElevation&&this.row===y.row&&this.column===y.column&&this.rows===y.rows&&this.columns===y.columns}almostEquals(y){var B=Math.max(1,
1/this.pixelRatio,1/y.pixelRatio);if(.001<=Math.abs(y.fov-this._fov)||w.squaredDistance(y.screenPadding,this.screenPadding)>=B||w.squaredDistance(this.screenViewport,y.screenViewport)>=B||this.row!==y.row||this.column!==y.column||this.rows!==y.rows||this.columns!==y.columns)return!1;r.sub(M,y.eye,y.center);r.sub(C,this.eye,this.center);B=r.dot(M,C);const H=r.sqrLen(M),N=r.sqrLen(C);return B*B>=(1-1E-10)*H*N&&r.sqrDist(y.eye,this.eye)<2.5E-7*Math.max(H,N)}computeRenderPixelSizeAt(y){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(y))}computeRenderPixelSizeAtDist(y){return y*
this.perRenderPixelRatio}computeScreenPixelSizeAt(y){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(y))}_viewDirectionDistance(y){return Math.abs(x.projectPointSignedLength(this.viewForward,r.subtract(M,y,this.eye)))}computeScreenPixelSizeAtDist(y){return y*this.perScreenPixelRatio}computeDistanceFromRadius(y,B){return y/Math.tan(Math.min(this.fovX,this.fovY)/(2*(B||1)))}getScreenCenter(y=e.createScreenPointArray()){y[0]=(this.padding[J.PaddingSide.LEFT]+this.width/2)/this.pixelRatio;
y[1]=(this.padding[J.PaddingSide.TOP]+this.height/2)/this.pixelRatio;return y}getRenderCenter(y,B=.5,H=.5){y[0]=this.padding[J.PaddingSide.LEFT]+this.width*B;y[1]=this.padding[J.PaddingSide.BOTTOM]+this.height*H;y[2]=.5;return y}setGLViewport(y){const B=this.viewport,H=this.padding;y.setViewport(B[0]-H[3],B[1]-H[2],B[2]+H[1]+H[3],B[3]+H[0]+H[2])}applyProjection(y,B){y!==L&&r.copy(L,y);L[3]=1;w.transformMat4(L,L,this.projectionMatrix);y=Math.abs(L[3]);r.scale(L,L,1/y);const H=this.fullViewport;B[0]=
f.lerp(0,H[0]+H[2],.5+.5*L[0]);B[1]=f.lerp(0,H[1]+H[3],.5+.5*L[1]);B[2]=.5*(L[2]+1);B[3]=y}unapplyProjection(y,B){const H=this.fullViewport;L[0]=(y[0]/(H[0]+H[2])*2-1)*y[3];L[1]=(y[1]/(H[1]+H[3])*2-1)*y[3];L[2]=(2*y[2]-1)*y[3];L[3]=y[3];null!=this.inverseProjectionMatrix&&(w.transformMat4(L,L,this.inverseProjectionMatrix),B[0]=L[0],B[1]=L[1],B[2]=L[2])}projectToScreen(y,B){this.projectToRenderScreen(y,U);this.renderToScreen(U,B);return B}projectToRenderScreen(y,B){L[0]=y[0];L[1]=y[1];L[2]=y[2];L[3]=
1;w.transformMat4(L,L,this.viewProjectionMatrix);if(0===L[3])return null;y=L;r.scale(y,y,1/Math.abs(L[3]));var H=this.fullViewport;const N=f.lerp(0,H[0]+H[2],.5+.5*y[0]);H=f.lerp(0,H[1]+H[3],.5+.5*y[1]);"x"in B?(B.x=N,B.y=H):(B[0]=N,B[1]=H,2<B.length&&(B[2]=.5*(y[2]+1)));return B}unprojectFromScreen(y,B){return this.unprojectFromRenderScreen(this.screenToRender(y,U),B)}unprojectFromRenderScreen(y,B){l.multiply(Q,this.projectionMatrix,this.viewMatrix);if(!l.invert(Q,Q))return null;const H=this.fullViewport;
L[0]=2*(y[0]-H[0])/H[2]-1;L[1]=2*(y[1]-H[1])/H[3]-1;L[2]=2*y[2]-1;L[3]=1;w.transformMat4(L,L,Q);if(0===L[3])return null;B[0]=L[0]/L[3];B[1]=L[1]/L[3];B[2]=L[2]/L[3];return B}constrainWindowSize(y,B,H,N){y*=this.pixelRatio;B*=this.pixelRatio;return[Math.round(Math.max(y-H/2,0)),Math.round(Math.max(this.fullHeight-B-N/2,0)),Math.round(H- -Math.min(y-H/2,0)- -Math.min(this.fullWidth-y-H/2,0)),Math.round(N- -Math.min(this.fullHeight-B-N/2,0)- -Math.min(B-N/2,0))]}computeUp(y){y===u.ViewingMode.Global?
this._computeUpGlobal():this._computeUpLocal()}screenToRender(y,B){const H=this.fullHeight-y[1]*this.pixelRatio;B[0]=y[0]*this.pixelRatio;B[1]=H;return B}renderToScreen(y,B){const H=(this.fullHeight-y[1])/this.pixelRatio;B[0]=y[0]/this.pixelRatio;B[1]=H}_computeUpGlobal(){r.subtract(M,this.center,this.eye);const y=r.length(this.center);1>y?(r.set(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs(r.dot(M,this.center))>.9999*r.length(M)*y||(r.cross(this._up,M,this.center),r.cross(this._up,
this._up,M),r.normalize(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){r.direction(M,this.eye,this.center);.9999>=Math.abs(M[2])&&(r.scale(M,M,M[2]),r.set(this._up,-M[0],-M[1],1-M[2]),r.normalize(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(y,B,H=""){"number"===typeof y[0]&&isFinite(y[0])&&"number"===typeof y[1]&&isFinite(y[1])&&"number"===typeof y[2]&&isFinite(y[2])?r.exactEquals(y,B)||(r.copy(B,y),this._markViewDirty(),
H.length&&this.notifyChange(H)):c.getLogger("esri.views.3d.webgl-engine.lib.RenderCamera").warn("RenderCamera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewProjectionDirty=this._frustumDirty=this._viewDirty=!0}_recomputeFrustum(){this._frustumDirty&&(g.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(l.lookAt(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange("_viewMatrix"),this._viewDirty=
!1,this._viewInverseTransposeMatrixDirty=!0)}};a.__decorate([n.property()],b.prototype,"_viewport",void 0);a.__decorate([n.property()],b.prototype,"_padding",void 0);a.__decorate([n.property()],b.prototype,"_fov",void 0);a.__decorate([n.property()],b.prototype,"_nearFar",void 0);a.__decorate([n.property()],b.prototype,"_viewDirty",void 0);a.__decorate([n.property()],b.prototype,"_viewMatrix",void 0);a.__decorate([n.property()],b.prototype,"_pixelRatio",void 0);a.__decorate([n.property()],b.prototype,
"pixelRatio",null);a.__decorate([n.property()],b.prototype,"row",void 0);a.__decorate([n.property()],b.prototype,"column",void 0);a.__decorate([n.property()],b.prototype,"_rows",void 0);a.__decorate([n.property()],b.prototype,"rows",null);a.__decorate([n.property()],b.prototype,"_columns",void 0);a.__decorate([n.property()],b.prototype,"columns",null);a.__decorate([n.property()],b.prototype,"eye",null);a.__decorate([n.property()],b.prototype,"center",null);a.__decorate([n.property()],b.prototype,
"_center",void 0);a.__decorate([n.property()],b.prototype,"up",null);a.__decorate([n.property()],b.prototype,"_up",void 0);a.__decorate([n.property()],b.prototype,"viewMatrix",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"viewForward",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"viewUp",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"viewRight",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"nearFar",null);a.__decorate([n.property()],b.prototype,
"near",null);a.__decorate([n.property()],b.prototype,"far",null);a.__decorate([n.property()],b.prototype,"viewport",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"screenViewport",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"screenPadding",null);a.__decorate([n.property()],b.prototype,"x",null);a.__decorate([n.property()],b.prototype,"y",null);a.__decorate([n.property()],b.prototype,"width",null);a.__decorate([n.property()],b.prototype,"height",null);a.__decorate([n.property()],
b.prototype,"fullWidth",null);a.__decorate([n.property()],b.prototype,"fullHeight",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"_aspect",null);a.__decorate([n.property()],b.prototype,"padding",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"projectionMatrix",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"inverseProjectionMatrix",null);a.__decorate([n.property()],b.prototype,"fov",null);a.__decorate([n.property()],b.prototype,"fovX",null);a.__decorate([n.property()],
b.prototype,"fovY",null);a.__decorate([n.property()],b.prototype,"viewInverseTransposeMatrix",null);a.__decorate([n.property({readOnly:!0})],b.prototype,"_projectionMatrixInternal",null);a.__decorate([n.property()],b.prototype,"relativeElevation",void 0);a=b=E=a.__decorate([h.subclass("esri.views.3d.webgl.RenderCamera")],b);const L=q.create(),Q=m.create(),M=v.create(),C=v.create(),U=e.createRenderScreenPointArray3();return a})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../core/libs/gl-matrix-2/math/mat4 ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../chunks/vec42 ../../core/libs/gl-matrix-2/factories/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),
function(a,b,c,f,e,n,d,k,h,l){function m(){return[e.create(),e.create(),e.create(),e.create(),e.create(),e.create(),e.create(),e.create()]}function t(g,p){h.fromPoints(p[a.PointIndex.FAR_BOTTOM_LEFT],p[a.PointIndex.NEAR_BOTTOM_LEFT],p[a.PointIndex.NEAR_TOP_LEFT],g[a.PlaneIndex.LEFT]);h.fromPoints(p[a.PointIndex.NEAR_BOTTOM_RIGHT],p[a.PointIndex.FAR_BOTTOM_RIGHT],p[a.PointIndex.FAR_TOP_RIGHT],g[a.PlaneIndex.RIGHT]);h.fromPoints(p[a.PointIndex.FAR_BOTTOM_LEFT],p[a.PointIndex.FAR_BOTTOM_RIGHT],p[a.PointIndex.NEAR_BOTTOM_RIGHT],
g[a.PlaneIndex.BOTTOM]);h.fromPoints(p[a.PointIndex.NEAR_TOP_LEFT],p[a.PointIndex.NEAR_TOP_RIGHT],p[a.PointIndex.FAR_TOP_RIGHT],g[a.PlaneIndex.TOP]);h.fromPoints(p[a.PointIndex.NEAR_BOTTOM_LEFT],p[a.PointIndex.NEAR_BOTTOM_RIGHT],p[a.PointIndex.NEAR_TOP_RIGHT],g[a.PlaneIndex.NEAR]);h.fromPoints(p[a.PointIndex.FAR_BOTTOM_RIGHT],p[a.PointIndex.FAR_BOTTOM_LEFT],p[a.PointIndex.FAR_TOP_LEFT],g[a.PlaneIndex.FAR])}function z(g,p){for(let x=0;6>x;x++)if(!h.clip(g[x],p))return!1;return!0}a.PlaneIndex=void 0;
(function(g){g[g.LEFT=0]="LEFT";g[g.RIGHT=1]="RIGHT";g[g.BOTTOM=2]="BOTTOM";g[g.TOP=3]="TOP";g[g.NEAR=4]="NEAR";g[g.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(g){g[g.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";g[g.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";g[g.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";g[g.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";g[g.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";g[g.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";g[g.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";g[g.FAR_TOP_LEFT=7]=
"FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const r={bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,
a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]},v=[d.fromValues(-1,-1,-1,1),d.fromValues(1,-1,-1,1),d.fromValues(1,1,-1,1),d.fromValues(-1,1,-1,1),d.fromValues(-1,-1,1,1),d.fromValues(1,-1,1,1),d.fromValues(1,1,1,1),d.fromValues(-1,1,1,1)],w=new b.ObjectStack(k.create),q=m();a.computePlanes=
t;a.copy=function(g,p){for(let x=0;6>x;x++)h.copy(g[x],p[x]);return g};a.create=function(g){return g?[h.create(g[0]),h.create(g[1]),h.create(g[2]),h.create(g[3]),h.create(g[4]),h.create(g[5])]:[h.create(),h.create(),h.create(),h.create(),h.create(),h.create()]};a.createPoints=m;a.fromMatrix=function(g,p,x,u=q){g=c.multiply(l.sm4d.get(),p,g);c.invert(g,g);for(p=0;8>p;++p){const D=n.transformMat4(l.sv4d.get(),v[p],g);f.set(u[p],D[0]/D[3],D[1]/D[3],D[2]/D[3])}t(x,u)};a.intersectClipRay=function(g,p){for(let x=
0;6>x;x++)if(!h.clipInfinite(g[x],p))return!1;return!0};a.intersectsLineSegment=function(g,p,x){return z(g,k.fromLineSegmentAndDirection(p,x,w.get()))};a.intersectsPoint=function(g,p){for(let x=0;6>x;x++)if(0<h.signedDistance(g[x],p))return!1;return!0};a.intersectsRay=function(g,p){return z(g,k.fromRay(p,w.get()))};a.intersectsSphere=function(g,p){for(let x=0;6>x;x++){const u=g[x];if(u[0]*p[0]+u[1]*p[1]+u[2]*p[2]+u[3]>=p[3])return!1}return!0};a.numPlanes=6;a.numPoints=8;a.planePointIndices=r;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,b){class c{constructor(f){this._allocator=f;this._items=[];this._itemsPtr=0;this._grow()}get(){0===this._itemsPtr&&b.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]}_reset(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0}_grow(){for(let f=
0;f<Math.max(8,Math.min(this._items.length,1024));f++)this._items.push(this._allocator())}}a.ObjectStack=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec32","./ray"],function(a,b,c,f){function e(h){return h?{ray:f.create(h.ray),c0:h.c0,c1:h.c1}:{ray:f.create(),c0:0,c1:Number.MAX_VALUE}}function n(h,l,m,t=e()){f.copy(h,t.ray);t.c0=l;t.c1=m;return t}function d(h,l,m){return c.add(m,
h.ray.origin,c.scale(m,h.ray.direction,l))}const k=new b.ObjectStack(()=>e());a.copy=function(h,l=e()){return n(h.ray,h.c0,h.c1,l)};a.create=e;a.fromLineSegmentAndDirection=function(h,l,m=e()){const t=c.length(h.vector);f.fromValues(h.origin,l,m.ray);m.c0=0;m.c1=t;return m};a.fromRay=function(h,l=e()){f.copy(h,l.ray);l.c0=0;l.c1=Number.MAX_VALUE;return l};a.fromValues=n;a.getAt=d;a.getEnd=function(h,l){return d(h,h.c1,l)};a.getStart=function(h,l){return d(h,h.c0,l)};a.wrap=function(h,l,m){const t=
k.get();t.ray=h;t.c0=l;t.c1=m;return t};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../core/libs/gl-matrix-2/math/mat3 ../../core/libs/gl-matrix-2/factories/mat3f64 ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./vectorStacks".split(" "),function(a,b,c,f,e,n,d,k){function h(q){return q?l(d.clone(q.origin),d.clone(q.direction)):l(d.create(),d.create())}function l(q,
g){return{origin:q,direction:g}}function m(q,g,p=h()){n.copy(p.origin,q);n.copy(p.direction,g);return p}const t=new c.ObjectStack(()=>h()),z=d.create(),r=d.create(),v=d.create(),w=e.create();a.closestPoint=function(q,g,p){g=n.dot(q.direction,n.subtract(p,g,q.origin));n.add(p,q.origin,n.scale(p,q.direction,g));return p};a.closestPoints=function(q,g,p,x){const u=q.origin,D=g.origin;q=q.direction;g=g.direction;var J=n.dot(n.normalize(r,q),n.normalize(v,g));if(1<=Math.abs(J))return null;var E=n.cross(r,
q,g);J=n.sub(z,D,u);E=f.set(w,q[0],q[1],q[2],-g[0],-g[1],-g[2],E[0],E[1],E[2]);const L=f.invert(w,E);if(null==L)return[p,x];E=n.dot(n.set(r,L[0],L[3],L[6]),J);J=n.dot(n.set(v,L[1],L[4],L[7]),J);n.add(p,u,n.scale(z,q,E));n.add(x,D,n.scale(z,g,J));return[p,x]};a.copy=function(q,g=h()){return m(q.origin,q.direction,g)};a.create=h;a.distance2=function(q,g){q=n.cross(k.sv3d.get(),n.normalize(k.sv3d.get(),q.direction),n.subtract(k.sv3d.get(),g,q.origin));return n.dot(q,q)};a.equals=function(q,g){return b.equals(q.origin,
g.origin)&&b.equals(q.direction,g.direction)};a.fromPoints=function(q,g,p=h()){n.copy(p.origin,q);n.subtract(p.direction,g,q);return p};a.fromValues=m;a.wrap=function(q,g){const p=t.get();p.origin=q;p.direction=g;return p};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(a,b){function c(K,X){K[0]=X[0];K[1]=X[1];K[2]=X[2];K[3]=X[4];K[4]=X[5];K[5]=X[6];K[6]=X[8];K[7]=X[9];K[8]=X[10];return K}function f(K,
X){K[0]=X[0];K[1]=X[1];K[2]=X[2];K[3]=X[3];K[4]=X[4];K[5]=X[5];K[6]=X[6];K[7]=X[7];K[8]=X[8];return K}function e(K,X,V,da,aa,fa,Z,ma,S,ha){K[0]=X;K[1]=V;K[2]=da;K[3]=aa;K[4]=fa;K[5]=Z;K[6]=ma;K[7]=S;K[8]=ha;return K}function n(K){K[0]=1;K[1]=0;K[2]=0;K[3]=0;K[4]=1;K[5]=0;K[6]=0;K[7]=0;K[8]=1;return K}function d(K,X){if(K===X){const V=X[1],da=X[2],aa=X[5];K[1]=X[3];K[2]=X[6];K[3]=V;K[5]=X[7];K[6]=da;K[7]=aa}else K[0]=X[0],K[1]=X[3],K[2]=X[6],K[3]=X[1],K[4]=X[4],K[5]=X[7],K[6]=X[2],K[7]=X[5],K[8]=X[8];
return K}function k(K,X){const V=X[0],da=X[1],aa=X[2],fa=X[3],Z=X[4],ma=X[5],S=X[6],ha=X[7];X=X[8];const G=X*Z-ma*ha,ca=-X*fa+ma*S,pa=ha*fa-Z*S;let Y=V*G+da*ca+aa*pa;if(!Y)return null;Y=1/Y;K[0]=G*Y;K[1]=(-X*da+aa*ha)*Y;K[2]=(ma*da-aa*Z)*Y;K[3]=ca*Y;K[4]=(X*V-aa*S)*Y;K[5]=(-ma*V+aa*fa)*Y;K[6]=pa*Y;K[7]=(-ha*V+da*S)*Y;K[8]=(Z*V-da*fa)*Y;return K}function h(K,X){const V=X[0],da=X[1],aa=X[2],fa=X[3],Z=X[4],ma=X[5],S=X[6],ha=X[7];X=X[8];K[0]=Z*X-ma*ha;K[1]=aa*ha-da*X;K[2]=da*ma-aa*Z;K[3]=ma*S-fa*X;K[4]=
V*X-aa*S;K[5]=aa*fa-V*ma;K[6]=fa*ha-Z*S;K[7]=da*S-V*ha;K[8]=V*Z-da*fa;return K}function l(K){const X=K[3],V=K[4],da=K[5],aa=K[6],fa=K[7],Z=K[8];return K[0]*(Z*V-da*fa)+K[1]*(-Z*X+da*aa)+K[2]*(fa*X-V*aa)}function m(K,X,V){const da=X[0],aa=X[1],fa=X[2],Z=X[3],ma=X[4],S=X[5],ha=X[6],G=X[7];X=X[8];const ca=V[0],pa=V[1],Y=V[2],R=V[3],ia=V[4],A=V[5],F=V[6],O=V[7];V=V[8];K[0]=ca*da+pa*Z+Y*ha;K[1]=ca*aa+pa*ma+Y*G;K[2]=ca*fa+pa*S+Y*X;K[3]=R*da+ia*Z+A*ha;K[4]=R*aa+ia*ma+A*G;K[5]=R*fa+ia*S+A*X;K[6]=F*da+O*Z+
V*ha;K[7]=F*aa+O*ma+V*G;K[8]=F*fa+O*S+V*X;return K}function t(K,X,V){const da=X[0],aa=X[1],fa=X[2],Z=X[3],ma=X[4],S=X[5],ha=X[6],G=X[7];X=X[8];const ca=V[0];V=V[1];K[0]=da;K[1]=aa;K[2]=fa;K[3]=Z;K[4]=ma;K[5]=S;K[6]=ca*da+V*Z+ha;K[7]=ca*aa+V*ma+G;K[8]=ca*fa+V*S+X;return K}function z(K,X,V){const da=X[0],aa=X[1],fa=X[2],Z=X[3],ma=X[4],S=X[5],ha=X[6],G=X[7];X=X[8];const ca=Math.sin(V);V=Math.cos(V);K[0]=V*da+ca*Z;K[1]=V*aa+ca*ma;K[2]=V*fa+ca*S;K[3]=V*Z-ca*da;K[4]=V*ma-ca*aa;K[5]=V*S-ca*fa;K[6]=ha;K[7]=
G;K[8]=X;return K}function r(K,X,V){const da=V[0],aa=V[1];V=V[2];K[0]=da*X[0];K[1]=da*X[1];K[2]=da*X[2];K[3]=aa*X[3];K[4]=aa*X[4];K[5]=aa*X[5];K[6]=V*X[6];K[7]=V*X[7];K[8]=V*X[8];return K}function v(K,X,V){const da=V[0];V=V[1];K[0]=da*X[0];K[1]=da*X[1];K[2]=da*X[2];K[3]=V*X[3];K[4]=V*X[4];K[5]=V*X[5];return K}function w(K,X){K[0]=1;K[1]=0;K[2]=0;K[3]=0;K[4]=1;K[5]=0;K[6]=X[0];K[7]=X[1];K[8]=1;return K}function q(K,X){const V=Math.sin(X);X=Math.cos(X);K[0]=X;K[1]=V;K[2]=0;K[3]=-V;K[4]=X;K[5]=0;K[6]=
0;K[7]=0;K[8]=1;return K}function g(K,X){K[0]=X[0];K[1]=0;K[2]=0;K[3]=0;K[4]=X[1];K[5]=0;K[6]=0;K[7]=0;K[8]=1;return K}function p(K,X){K[0]=X[0];K[1]=X[1];K[2]=0;K[3]=X[2];K[4]=X[3];K[5]=0;K[6]=X[4];K[7]=X[5];K[8]=1;return K}function x(K,X){var V=X[0],da=X[1],aa=X[2];X=X[3];var fa=V+V,Z=da+da;const ma=aa+aa;V*=fa;const S=da*fa;da*=Z;const ha=aa*fa,G=aa*Z;aa*=ma;fa*=X;Z*=X;X*=ma;K[0]=1-da-aa;K[3]=S-X;K[6]=ha+Z;K[1]=S+X;K[4]=1-V-aa;K[7]=G-fa;K[2]=ha-Z;K[5]=G+fa;K[8]=1-V-da;return K}function u(K,X){const V=
X[0],da=X[1],aa=X[2],fa=X[4],Z=X[5],ma=X[6],S=X[8],ha=X[9];X=X[10];const G=X*Z-ma*ha,ca=-X*fa+ma*S,pa=ha*fa-Z*S;var Y=V*G+da*ca+aa*pa;if(!Y)return null;Y=1/Y;K[0]=G*Y;K[1]=(-X*da+aa*ha)*Y;K[2]=(ma*da-aa*Z)*Y;K[3]=ca*Y;K[4]=(X*V-aa*S)*Y;K[5]=(-ma*V+aa*fa)*Y;K[6]=pa*Y;K[7]=(-ha*V+da*S)*Y;K[8]=(Z*V-da*fa)*Y;return K}function D(K,X){const V=X[0],da=X[1],aa=X[2],fa=X[3],Z=X[4],ma=X[5],S=X[6],ha=X[7];var G=X[8],ca=X[9],pa=X[10],Y=X[11];const R=X[12],ia=X[13],A=X[14];X=X[15];const F=V*ma-da*Z,O=V*S-aa*Z,
ba=V*ha-fa*Z,na=da*S-aa*ma,P=da*ha-fa*ma,W=aa*ha-fa*S,ea=G*ia-ca*R,ra=G*A-pa*R;G=G*X-Y*R;const ja=ca*A-pa*ia;ca=ca*X-Y*ia;pa=pa*X-Y*A;Y=F*pa-O*ca+ba*ja+na*G-P*ra+W*ea;if(!Y)return null;Y=1/Y;K[0]=(ma*pa-S*ca+ha*ja)*Y;K[1]=(S*G-Z*pa-ha*ra)*Y;K[2]=(Z*ca-ma*G+ha*ea)*Y;K[3]=(aa*ca-da*pa-fa*ja)*Y;K[4]=(V*pa-aa*G+fa*ra)*Y;K[5]=(da*G-V*ca-fa*ea)*Y;K[6]=(ia*W-A*P+X*na)*Y;K[7]=(A*ba-R*W-X*O)*Y;K[8]=(R*P-ia*ba+X*F)*Y;return K}function J(K,X,V){K[0]=2/X;K[1]=0;K[2]=0;K[3]=0;K[4]=-2/V;K[5]=0;K[6]=-1;K[7]=1;K[8]=
1;return K}function E(K){return"mat3("+K[0]+", "+K[1]+", "+K[2]+", "+K[3]+", "+K[4]+", "+K[5]+", "+K[6]+", "+K[7]+", "+K[8]+")"}function L(K){return Math.sqrt(K[0]**2+K[1]**2+K[2]**2+K[3]**2+K[4]**2+K[5]**2+K[6]**2+K[7]**2+K[8]**2)}function Q(K,X,V){K[0]=X[0]+V[0];K[1]=X[1]+V[1];K[2]=X[2]+V[2];K[3]=X[3]+V[3];K[4]=X[4]+V[4];K[5]=X[5]+V[5];K[6]=X[6]+V[6];K[7]=X[7]+V[7];K[8]=X[8]+V[8];return K}function M(K,X,V){K[0]=X[0]-V[0];K[1]=X[1]-V[1];K[2]=X[2]-V[2];K[3]=X[3]-V[3];K[4]=X[4]-V[4];K[5]=X[5]-V[5];
K[6]=X[6]-V[6];K[7]=X[7]-V[7];K[8]=X[8]-V[8];return K}function C(K,X,V){K[0]=X[0]*V;K[1]=X[1]*V;K[2]=X[2]*V;K[3]=X[3]*V;K[4]=X[4]*V;K[5]=X[5]*V;K[6]=X[6]*V;K[7]=X[7]*V;K[8]=X[8]*V;return K}function U(K,X,V,da){K[0]=X[0]+V[0]*da;K[1]=X[1]+V[1]*da;K[2]=X[2]+V[2]*da;K[3]=X[3]+V[3]*da;K[4]=X[4]+V[4]*da;K[5]=X[5]+V[5]*da;K[6]=X[6]+V[6]*da;K[7]=X[7]+V[7]*da;K[8]=X[8]+V[8]*da;return K}function y(K,X){return K[0]===X[0]&&K[1]===X[1]&&K[2]===X[2]&&K[3]===X[3]&&K[4]===X[4]&&K[5]===X[5]&&K[6]===X[6]&&K[7]===
X[7]&&K[8]===X[8]}function B(K,X){const V=K[0],da=K[1],aa=K[2],fa=K[3],Z=K[4],ma=K[5],S=K[6],ha=K[7];K=K[8];const G=X[0],ca=X[1],pa=X[2],Y=X[3],R=X[4],ia=X[5],A=X[6],F=X[7];X=X[8];const O=b.getEpsilon();return Math.abs(V-G)<=O*Math.max(1,Math.abs(V),Math.abs(G))&&Math.abs(da-ca)<=O*Math.max(1,Math.abs(da),Math.abs(ca))&&Math.abs(aa-pa)<=O*Math.max(1,Math.abs(aa),Math.abs(pa))&&Math.abs(fa-Y)<=O*Math.max(1,Math.abs(fa),Math.abs(Y))&&Math.abs(Z-R)<=O*Math.max(1,Math.abs(Z),Math.abs(R))&&Math.abs(ma-
ia)<=O*Math.max(1,Math.abs(ma),Math.abs(ia))&&Math.abs(S-A)<=O*Math.max(1,Math.abs(S),Math.abs(A))&&Math.abs(ha-F)<=O*Math.max(1,Math.abs(ha),Math.abs(F))&&Math.abs(K-X)<=O*Math.max(1,Math.abs(K),Math.abs(X))}function H(K){const X=b.getEpsilon(),V=K[0],da=K[1],aa=K[2],fa=K[3],Z=K[4],ma=K[5],S=K[6],ha=K[7];K=K[8];return Math.abs(1-(V*V+fa*fa+S*S))<=X&&Math.abs(1-(da*da+Z*Z+ha*ha))<=X&&Math.abs(1-(aa*aa+ma*ma+K*K))<=X}const N=Object.freeze(Object.defineProperty({__proto__:null,add:Q,adjoint:h,copy:f,
determinant:l,equals:B,exactEquals:y,frob:L,fromMat2d:p,fromMat4:c,fromQuat:x,fromRotation:q,fromScaling:g,fromTranslation:w,identity:n,invert:k,isOrthoNormal:H,mul:m,multiply:m,multiplyScalar:C,multiplyScalarAndAdd:U,normalFromMat4:D,normalFromMat4Legacy:u,projection:J,rotate:z,scale:r,scaleByVec2:v,set:e,str:E,sub:M,subtract:M,translate:t,transpose:d},Symbol.toStringTag,{value:"Module"}));a.add=Q;a.adjoint=h;a.copy=f;a.determinant=l;a.equals=B;a.exactEquals=y;a.frob=L;a.fromMat2d=p;a.fromMat4=c;
a.fromQuat=x;a.fromRotation=q;a.fromScaling=g;a.fromTranslation=w;a.identity=n;a.invert=k;a.isOrthoNormal=H;a.mat3=N;a.mul=m;a.multiply=m;a.multiplyScalar=C;a.multiplyScalarAndAdd=U;a.normalFromMat4=D;a.normalFromMat4Legacy=u;a.projection=J;a.rotate=z;a.scale=r;a.scaleByVec2=v;a.set=e;a.str=E;a.sub=M;a.subtract=M;a.translate=t;a.transpose=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(a,
b){const c=b.VectorStack.createVec2f64(),f=b.VectorStack.createVec3f64(),e=b.VectorStack.createVec4f64(),n=b.VectorStack.createMat3f64(),d=b.VectorStack.createMat4f64();b=b.VectorStack.createQuatf64();a.sm3d=n;a.sm4d=d;a.sq4d=b;a.sv2d=c;a.sv3d=f;a.sv4d=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ./has ./nextTick ./libs/gl-matrix-2/factories/mat3f64 ./libs/gl-matrix-2/factories/mat4f64 ./libs/gl-matrix-2/factories/quatf64 ./libs/gl-matrix-2/factories/vec2f64 ./libs/gl-matrix-2/factories/vec3f64 ./libs/gl-matrix-2/factories/vec4f64".split(" "),
function(a,b,c,f,e,n,d,k,h){class l{constructor(m){this._create=m;this._items=[];this._itemsPtr=0}get(){0===this._itemsPtr&&c.nextTick(()=>this._reset());this._itemsPtr>=this._items.length&&this._items.push(this._create());return this._items[this._itemsPtr++]}_reset(){const m=2*this._itemsPtr;this._items.length>m&&(this._items.length=m);this._itemsPtr=0}static createVec2f64(){return new l(d.create)}static createVec3f64(){return new l(k.create)}static createVec4f64(){return new l(h.create)}static createMat3f64(){return new l(f.create)}static createMat4f64(){return new l(e.create)}static createQuatf64(){return new l(n.create)}get test(){}}
a.VectorStack=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],function(a){function b(){return[0,0,0,1]}function c(d){return[d[0],d[1],d[2],d[3]]}function f(d,k,h,l){return[d,k,h,l]}const e=b(),n=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:e,clone:c,create:b,fromValues:f},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=e;a.clone=c;a.create=b;a.fromValues=f;a.quatf64=n;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../chunks/vec42 ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),function(a,b,c,f,e,n,d,k){function h(C=L){return[C[0],C[1],C[2],C[3]]}function l(C,U){return m(U[0],U[1],U[2],U[3],C)}function m(C,U,y,B,H=h()){H[0]=C;H[1]=U;H[2]=y;H[3]=B;return H}function t(C,U,y){var B=U[0]*U[0]+U[1]*U[1]+U[2]*
U[2];B=1E-5<Math.abs(B-1)&&1E-12<B?1/Math.sqrt(B):1;y[0]=U[0]*B;y[1]=U[1]*B;y[2]=U[2]*B;y[3]=-(y[0]*C[0]+y[1]*C[1]+y[2]*C[2]);return y}function z(C,U,y,B=h()){var H=y[0]-U[0],N=y[1]-U[1],K=y[2]-U[2];y=C[0]-U[0];const X=C[1]-U[1],V=C[2]-U[2];U=N*V-K*X;K=K*y-H*V;H=H*X-N*y;N=U*U+K*K+H*H;N=1E-5<Math.abs(N-1)&&1E-12<N?1/Math.sqrt(N):1;B[0]=U*N;B[1]=K*N;B[2]=H*N;B[3]=-(B[0]*C[0]+B[1]*C[1]+B[2]*C[2]);return B}function r(C,U,y,B=0,H=Math.floor(1/3*y),N=Math.floor(2/3*y)){if(3>y)return!1;U(x,B);let K=H,X=
!1;for(;K<y-1&&!X;)U(u,K),K++,X=!c.exactEquals(x,u);if(!X)return!1;K=Math.max(K,N);for(X=!1;K<y&&!X;)U(D,K),K++,c.subtract(J,x,u),c.normalize(J,J),c.subtract(E,u,D),c.normalize(E,E),X=!c.exactEquals(x,D)&&!c.exactEquals(u,D)&&.99619469809>Math.abs(c.dot(J,E));if(!X)return 0===B&&1===H&&2===N?!1:r(C,U,y,0,1,2);z(x,u,D,C);return!0}function v(C,U,y){C=c.scale(d.sv3d.get(),C,c.dot(C,U));c.subtract(y,U,C);return y}function w(C,U){return c.dot(C,U)+C[3]}function q(C){return C===a.IntersectResult.INTERSECTS_INSIDE_OUT||
C===a.IntersectResult.INTERSECTS_OUTSIDE_IN}function g(C,U,y,B,H){var N=c.dot(C,y);C=w(C,U);if(0===N)return 0<=C?a.IntersectResult.INSIDE:a.IntersectResult.OUTSIDE;N=-C/N;B&a.IntersectFlags.CLAMP&&(N=b.clamp(N,0,1));if(!(B&a.IntersectFlags.INFINITE_MIN)&&0>N||!(B&a.IntersectFlags.INFINITE_MAX)&&1<N)return 0<=C?a.IntersectResult.INSIDE:a.IntersectResult.OUTSIDE;c.add(H,U,c.scale(H,y,N));return 0<=C?a.IntersectResult.INTERSECTS_INSIDE_OUT:a.IntersectResult.INTERSECTS_OUTSIDE_IN}const p=e.exactEquals;
e=e.equals;const x=f.create(),u=f.create(),D=f.create(),J=f.create(),E=f.create();a.IntersectResult=void 0;(function(C){C[C.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT";C[C.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN";C[C.INSIDE=2]="INSIDE";C[C.OUTSIDE=3]="OUTSIDE"})(a.IntersectResult||(a.IntersectResult={}));const L=[0,0,1,0];a.IntersectFlags=void 0;(function(C){C[C.NONE=0]="NONE";C[C.CLAMP=1]="CLAMP";C[C.INFINITE_MIN=4]="INFINITE_MIN";C[C.INFINITE_MAX=8]="INFINITE_MAX"})(a.IntersectFlags||
(a.IntersectFlags={}));const Q=a.IntersectFlags.INFINITE_MIN|a.IntersectFlags.INFINITE_MAX,M=a.IntersectFlags.INFINITE_MAX;a.clip=function(C,U){const y=c.dot(C,U.ray.direction);C=-w(C,U.ray.origin);if(0>C&&0<=y)return!1;if(-1E-6<y&&1E-6>y)return 0<C;if((0>C||0>y)&&!(0>C&&0>y))return!0;C/=y;0<y?C<U.c1&&(U.c1=C):C>U.c0&&(U.c0=C);return U.c0<=U.c1};a.clipInfinite=function(C,U){const y=c.dot(C,U.ray.direction);C=-w(C,U.ray.origin);if(-1E-6<y&&1E-6>y)return 0<C;C/=y;0<y?C<U.c1&&(U.c1=C):C>U.c0&&(U.c0=
C);return U.c0<=U.c1};a.copy=l;a.create=h;a.distance=function(C,U){return Math.abs(w(C,U))};a.equals=e;a.exactEquals=p;a.fromArray=function(C,U,y=!0){const B=U.length/3;return r(C,(H,N)=>c.set(H,U[3*N],U[3*N+1],U[3*N+2]),y?B-1:B)};a.fromManyPoints=r;a.fromNormalAndOffset=function(C,U,y){c.copy(y,C);y[3]=U;return y};a.fromPoints=z;a.fromPositionAndNormal=t;a.fromValues=m;a.fromVectorsAndPoint=function(C,U,y,B){c.cross(D,U,C);return t(y,D,B)};a.getNormal=function(C){return C};a.intersectLine=function(C,
U,y,B){y=c.subtract(d.sv3d.get(),y,U);return q(g(C,U,y,Q,B))};a.intersectLineOrRay=g;a.intersectLineSegment=function(C,U,y){return q(g(C,U.origin,U.vector,a.IntersectFlags.NONE,y))};a.intersectLineSegmentClamp=function(C,U,y){return q(g(C,U.origin,U.vector,a.IntersectFlags.CLAMP,y))};a.intersectRay=function(C,U,y){return null!=U?q(g(C,U.origin,U.direction,M,y)):!1};a.isPointInside=function(C,U){return 0<=w(C,U)};a.negate=function(C,U){U[0]=-C[0];U[1]=-C[1];U[2]=-C[2];U[3]=-C[3];return U};a.projectPoint=
function(C,U,y){const B=c.scale(d.sv3d.get(),C,-C[3]);U=c.subtract(d.sv3d.get(),U,B);C=v(C,U,d.sv3d.get());c.add(y,C,B);return y};a.projectPointLocal=function(C,U,y,B){var H=d.sv3d.get(),N=d.sv3d.get();k.tangentFrame(C,H,N);U=c.subtract(d.sv3d.get(),y,U);H=n.projectPointSignedLength(H,U);N=n.projectPointSignedLength(N,U);C=n.projectPointSignedLength(C,U);return c.set(B,H,N,C)};a.projectVector=v;a.setOffsetFromPoint=function(C,U,y){U!==C&&l(C,U);C[3]=-c.dot(C,y);return C};a.signedDistance=w;a.up=L;
a.wrap=function(C=L[0],U=L[1],y=L[2],B=L[3]){return m(C,U,y,B,d.sv4d.get())};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],function(a,b,c,f){const e=f.create(),n=f.create();a.angle=function(d,k){d=c.dot(d,k)/(c.length(d)*c.length(k));return-b.acosClamped(d)};a.angleAroundAxis=function(d,k,h){c.normalize(e,d);c.normalize(n,k);d=c.dot(e,
n);d=b.acosClamped(d);k=c.cross(e,e,n);return 0>c.dot(k,h)?2*Math.PI-d:d};a.projectPoint=function(d,k,h){k=c.dot(d,k)/c.dot(d,d);return c.scale(h,d,k)};a.projectPointSignedLength=function(d,k){return c.dot(d,k)/c.length(d)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],function(a,b,c,f){const e=f.create(),n=f.create(),
d=f.create(),k=f.create(),h=f.create();a.angle=function(l,m,t){l=c.normalize(k,l);m=c.normalize(h,m);const z=b.acosClamped(c.dot(l,m));return t&&(l=c.cross(d,l,m),0>c.dot(l,t))?-z:z};a.bilerp=function(l,m,t,z,r,v){l+=(m-l)*r;return l+(t+(z-t)*r-l)*v};a.cosCapped=function(l,m){return l>m?Math.cos(m):Math.cos(l)};a.fovx2fovy=function(l,m,t){return 2*Math.atan(t*Math.tan(.5*l)/m)};a.fovy2fovx=function(l,m,t){return 2*Math.atan(m*Math.tan(.5*l)/t)};a.makeOrthonormal=function(l,m,t){t=t||l;const z=c.dot(l,
m);c.set(t,l[0]-z*m[0],l[1]-z*m[1],l[2]-z*m[2]);c.normalize(t,t)};a.makePiecewiseLinearFunction=function(l){const m=l.length;return t=>{if(t<=l[0][0])return l[0][1];if(t>=l[m-1][0])return l[m-1][1];let z=1;for(;t>l[z][0];)z++;const r=l[z][0];t=(r-t)/(r-l[z-1][0]);return t*l[z-1][1]+(1-t)*l[z][1]}};a.maxScale=function(l){return Math.sqrt(Math.max(l[0]*l[0]+l[4]*l[4]+l[8]*l[8],l[1]*l[1]+l[5]*l[5]+l[9]*l[9],l[2]*l[2]+l[6]*l[6]+l[10]*l[10]))};a.midpoint3d=function(l,m){c.set(m,0,0,0);if(0<l.length){for(let t=
0;t<l.length;++t)c.add(m,m,l[t]);c.scale(m,m,1/l.length)}};a.planeFromPoints=function(l,m,t,z){c.subtract(e,m,l);c.subtract(n,t,l);c.cross(z,e,n);c.normalize(z,z);z[3]=-c.dot(l,z)};a.scaleFromMatrix=function(l,m){c.set(l,Math.sqrt(m[0]*m[0]+m[4]*m[4]+m[8]*m[8]),Math.sqrt(m[1]*m[1]+m[5]*m[5]+m[9]*m[9]),Math.sqrt(m[2]*m[2]+m[6]*m[6]+m[10]*m[10]));return l};a.slerp=function(l,m,t,z=f.create()){const r=c.length(l);var v=c.length(m),w=c.dot(l,m)/(r*v);if(.9999999999999999>w){w=Math.acos(w);const q=((1-
t)*r+t*v)/Math.sin(w);v=q/v*Math.sin(t*w);c.scale(k,l,q/r*Math.sin((1-t)*w));c.scale(h,m,v);return c.add(z,k,h)}return c.lerp(z,l,m,t)};a.slerpTangent=function(l,m,t,z=f.create(),r=f.create()){const v=c.length(l),w=c.length(m);var q=c.dot(l,m)/(v*w);if(.9999999999999999>q){q=Math.acos(q);const g=Math.sin(q),p=Math.sin(t*q),x=Math.sin((1-t)*q),u=(1-t)*v+t*w,D=u/g,J=D/w*p;c.scale(k,l,D/v*x);c.scale(h,m,J);c.add(z,k,h);c.scale(k,l,1/v*(-Math.cos((1-t)*q)*q*u+x*(-v+w)));c.scale(h,m,1/w*(Math.cos(t*q)*
q*u+p*(-v+w)));c.add(r,k,h);c.scale(r,r,1/g);return r}c.lerp(z,l,m,t);c.subtract(r,m,l);c.normalize(r,r);return r};a.tangentFrame=function(l,m,t){Math.abs(l[0])>Math.abs(l[1])?c.set(m,0,1,0):c.set(m,1,0,0);c.cross(t,l,m);c.cross(m,t,l);c.normalize(t,t);c.normalize(m,m)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/fov":function(){define(["exports"],function(a){a.fovd2fovx=function(b,c,f){return 2*Math.atan(c*Math.tan(.5*b)/Math.sqrt(c*c+f*f))};a.fovd2fovy=
function(b,c,f){return 2*Math.atan(f*Math.tan(.5*b)/Math.sqrt(c*c+f*f))};a.fovx2fovd=function(b,c,f){return 2*Math.atan(Math.sqrt(c*c+f*f)*Math.tan(.5*b)/c)};a.fovy2fovd=function(b,c,f){return 2*Math.atan(Math.sqrt(c*c+f*f)*Math.tan(.5*b)/f)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/rendererUtils":function(){define(["exports","./ChangeSet"],function(a,b){a.RendererTarget=void 0;(function(c){c[c.Default=0]="Default";c[c.Screenshot=1]="Screenshot";
c[c.ObjectAndLayerID=2]="ObjectAndLayerID"})(a.RendererTarget||(a.RendererTarget={}));a.PaddingSide=void 0;(function(c){c[c.TOP=0]="TOP";c[c.RIGHT=1]="RIGHT";c[c.BOTTOM=2]="BOTTOM";c[c.LEFT=3]="LEFT"})(a.PaddingSide||(a.PaddingSide={}));a.splitRenderGeometryChangeSetByMaterial=function(c){const f=new Map,e=n=>{let d=f.get(n);d||(d=new b.MaterialChangeSet,f.set(n,d));return d};c.removes.forAll(n=>{1<=n.geometry.indexCount&&e(n.material).removes.push(n)});c.adds.forAll(n=>{1<=n.geometry.indexCount&&
e(n.material).adds.push(n)});c.updates.forAll(n=>{1<=n.renderGeometry.geometry.indexCount&&e(n.renderGeometry.material).updates.push(n)});return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ChangeSet":function(){define(["exports","../../../../core/PooledArray"],function(a,b){class c{constructor(){this.adds=new b;this.removes=new b;this.updates=new b({allocator:n=>n||new f,deallocator:n=>{n.renderGeometry=null;return n}})}clear(){this.adds.clear();
this.removes.clear();this.updates.clear()}prune(){this.adds.prune();this.removes.prune();this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class f{}class e{constructor(){this.adds=[];this.removes=[];this.updates=[]}}a.ChangeSet=c;a.MaterialChangeSet=e;a.RenderGeometryUpdate=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports","./VertexAttribute"],
function(a,b){b=new Map([[b.VertexAttribute.POSITION,0],[b.VertexAttribute.NORMAL,1],[b.VertexAttribute.NORMALCOMPRESSED,1],[b.VertexAttribute.UV0,2],[b.VertexAttribute.COLOR,3],[b.VertexAttribute.COLORFEATUREATTRIBUTE,3],[b.VertexAttribute.SIZE,4],[b.VertexAttribute.TANGENT,4],[b.VertexAttribute.CENTEROFFSETANDDISTANCE,5],[b.VertexAttribute.SYMBOLCOLOR,5],[b.VertexAttribute.FEATUREATTRIBUTE,6],[b.VertexAttribute.INSTANCEFEATUREATTRIBUTE,6],[b.VertexAttribute.INSTANCECOLOR,7],[b.VertexAttribute.OBJECTANDLAYERIDCOLOR,
7],[b.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR,7],[b.VertexAttribute.ROTATION,8],[b.VertexAttribute.INSTANCEMODEL,8],[b.VertexAttribute.INSTANCEMODELNORMAL,12],[b.VertexAttribute.INSTANCEMODELORIGINHI,11],[b.VertexAttribute.INSTANCEMODELORIGINLO,15]]);a.Default3D=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],function(a){a.IntersectorType=void 0;(function(c){c[c.OBJECT=0]="OBJECT";c[c.HUD=
1]="HUD";c[c.TERRAIN=2]="TERRAIN";c[c.OVERLAY=3]="OVERLAY";c[c.I3S=4]="I3S";c[c.PCL=5]="PCL";c[c.LOD=6]="LOD";c[c.VOXEL=7]="VOXEL";c[c.TILES3D=8]="TILES3D"})(a.IntersectorType||(a.IntersectorType={}));class b{constructor(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.filteredLayerUids=[];this.store=a.StoreResults.ALL;this.normalRequired=!0;this.excludeLabels=!1}}a.StoreResults=void 0;
(function(c){c[c.MIN=0]="MIN";c[c.MINMAX=1]="MINMAX";c[c.ALL=2]="ALL"})(a.StoreResults||(a.StoreResults={}));a.IntersectorOptions=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),
function(a,b,c,f,e,n,d,k){function h(Z,ma){Z=J.acquire().init(Z);const S=[Z];for(;0!==S.length;){Z=S.pop();if(ma(Z)&&!Z.isLeaf())for(let ha=0;ha<Z.node.children.length;ha++)Z.node.children[ha]&&S.push(J.acquire().init(Z).advance(ha));J.release(Z)}}function l(Z,ma,S,ha=D.DepthOrder.FRONT_TO_BACK){Z=J.acquire().init(Z);const G=[Z];for(g(S,ha,fa);0!==G.length;){Z=G.pop();if(ma(Z)&&!Z.isLeaf())for(S=7;0<=S;--S)ha=fa[S],Z.node.children[ha]&&G.push(J.acquire().init(Z).advance(ha));J.release(Z)}}function m(Z,
ma,S){H.clear();ma=S.advanceTo(ma,(ha,G)=>{H.push(ha.node);H.push(G)})?S.node.terminals:S.node.residents;ma.removeUnordered(Z);if(0===ma.length)for(Z=H.length-2;0<=Z&&t(H.data[Z],H.data[Z+1]);Z-=2);}function t(Z,ma){0<=ma&&(Z.children[ma]=null);return v(Z)?(null===Z.residents&&(Z.residents=new b({shrink:!0})),!0):!1}function z(Z,ma){w(d.getCenter(ma.bounds),2*-ma.halfSize,y);w(d.getCenter(ma.bounds),2*ma.halfSize,B);return k.rayBoxTest(Z.origin,Z.direction,y,B)}function r(Z,ma,S){w(d.getCenter(ma.bounds),
2*-ma.halfSize,y);w(d.getCenter(ma.bounds),2*ma.halfSize,B);S.applyToMinMax(y,B);return k.rayBoxTest(Z.origin,Z.direction,y,B)}function v(Z){if(0!==Z.terminals.length)return!1;if(null!==Z.residents)return 0===Z.residents.length;for(let ma=0;ma<Z.children.length;ma++)if(Z.children[ma])return!1;return!0}function w(Z,ma,S){S[0]=Z[0]+ma;S[1]=Z[1]+ma;S[2]=Z[2]+ma}function q(Z,ma,S,ha){if(1===ma)Z=S(Z[0]),d.copy(Z,ha);else{y[0]=Infinity;y[1]=Infinity;y[2]=Infinity;B[0]=-Infinity;B[1]=-Infinity;B[2]=-Infinity;
for(let Y=0;Y<ma;Y++){var G=S(Z[Y]);if(u(G[3])){var ca=y,pa=G;ca[0]=Math.min(ca[0],pa[0]-pa[3]);ca[1]=Math.min(ca[1],pa[1]-pa[3]);ca[2]=Math.min(ca[2],pa[2]-pa[3]);ca=B;ca[0]=Math.max(ca[0],G[0]+G[3]);ca[1]=Math.max(ca[1],G[1]+G[3]);ca[2]=Math.max(ca[2],G[2]+G[3])}}c.lerp(d.getCenter(ha),y,B,.5);ha[3]=Math.max(B[0]-y[0],B[1]-y[1],B[2]-y[2])/2}}function g(Z,ma,S){if(!aa.length)for(var ha=0;8>ha;++ha)aa.push({index:0,distance:0});for(ha=0;8>ha;++ha){const G=E[ha];aa.data[ha].index=ha;aa.data[ha].distance=
x(Z,ma,G)}aa.sort((G,ca)=>G.distance-ca.distance);for(Z=0;8>Z;++Z)S[Z]=aa.data[Z].index}function p(Z,ma){let S=Infinity,ha;for(let G=0;8>G;++G){const ca=x(Z,ma,L[G]);ca<S&&(S=ca,ha=L[G])}return ha}function x(Z,ma,S){return ma*(Z[0]*S[0]+Z[1]*S[1]+Z[2]*S[2])}function u(Z){return!isNaN(Z)&&-Infinity!==Z&&Infinity!==Z&&0<Z}class D{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(Z,
ma){this.objectToBoundingSphere=Z;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new J;this._objectCount=0;ma&&(void 0!==ma.maximumObjectsPerNode&&(this._maximumObjectsPerNode=ma.maximumObjectsPerNode),void 0!==ma.maximumDepth&&(this._maximumDepth=ma.maximumDepth))}destroy(){this._degenerateObjects.clear();J.clearPool();M[0]=null;H.prune();aa.prune()}add(Z,ma=Z.length){this._objectCount+=ma;this._grow(Z,ma);const S=J.acquire();for(let ha=0;ha<ma;ha++){const G=
Z[ha];this._isDegenerate(G)?this._degenerateObjects.add(G):(S.init(this._root),this._add(G,S))}J.release(S)}remove(Z,ma=null){this._objectCount-=Z.length;const S=J.acquire();for(const ha of Z)Z=ma??d.copy(this.objectToBoundingSphere(ha),N),u(Z[3])?(S.init(this._root),m(ha,Z,S)):this._degenerateObjects.delete(ha);J.release(S);this._shrink()}update(Z,ma){if(u(ma[3])||!this._isDegenerate(Z))M[0]=Z,Z=M,this.remove(Z,ma),this.add(Z)}forEachAlongRay(Z,ma,S){const ha=n.wrap(Z,ma);h(this._root,G=>{if(!z(ha,
G))return!1;G=G.node;G.terminals.forAll(ca=>{this._intersectsObject(ha,ca)&&S(ca)});null!==G.residents&&G.residents.forAll(ca=>{this._intersectsObject(ha,ca)&&S(ca)});return!0})}forEachAlongRayWithVerticalOffset(Z,ma,S,ha){const G=n.wrap(Z,ma);h(this._root,ca=>{if(!r(G,ca,ha))return!1;ca=ca.node;ca.terminals.forAll(pa=>{this._intersectsObjectWithOffset(G,pa,ha)&&S(pa)});null!==ca.residents&&ca.residents.forAll(pa=>{this._intersectsObjectWithOffset(G,pa,ha)&&S(pa)});return!0})}forEach(Z){h(this._root,
ma=>{ma=ma.node;ma.terminals.forAll(Z);null!==ma.residents&&ma.residents.forAll(Z);return!0});this._degenerateObjects.forEach(Z)}forEachDegenerateObject(Z){this._degenerateObjects.forEach(Z)}findClosest(Z,ma,S,ha=()=>!0,G=Infinity){let ca=Infinity,pa=Infinity,Y=null;const R=p(Z,ma),ia=A=>{--G;if(ha(A)){var F=this.objectToBoundingSphere(A);if(e.intersectsSphere(S,F)){var O=x(Z,ma,d.getCenter(F)),ba=O-F[3];F=O+F[3];ba<ca&&(ca=ba,pa=F,Y=A)}}};l(this._root,A=>{if(0>=G||!e.intersectsSphere(S,A.bounds))return!1;
c.scale(U,R,A.halfSize);c.add(U,U,d.getCenter(A.bounds));if(x(Z,ma,U)>pa)return!1;A=A.node;A.terminals.forAll(F=>ia(F));null!==A.residents&&A.residents.forAll(F=>ia(F));return!0},Z,ma);return Y}forEachInDepthRange(Z,ma,S,ha,G,ca,pa){let Y=-Infinity,R=Infinity;const ia={setRange:na=>{S===D.DepthOrder.FRONT_TO_BACK?(Y=Math.max(Y,na.near),R=Math.min(R,na.far)):(Y=Math.max(Y,-na.far),R=Math.min(R,-na.near))}};ia.setRange(ha);const A=x(ma,S,Z),F=p(ma,S),O=p(ma,-S),ba=na=>{if(pa(na)){var P=this.objectToBoundingSphere(na),
W=d.getCenter(P);W=x(ma,S,W)-A;var ea=W+P[3];W-P[3]>R||ea<Y||!e.intersectsSphere(ca,P)||G(na,ia)}};l(this._root,na=>{if(!e.intersectsSphere(ca,na.bounds))return!1;c.scale(U,F,na.halfSize);c.add(U,U,d.getCenter(na.bounds));if(x(ma,S,U)-A>R)return!1;c.scale(U,O,na.halfSize);c.add(U,U,d.getCenter(na.bounds));if(x(ma,S,U)-A<Y)return!1;na=na.node;na.terminals.forAll(P=>ba(P));null!==na.residents&&na.residents.forAll(P=>ba(P));return!0},ma,S)}forEachNode(Z){h(this._root,ma=>Z(ma.node,ma.bounds,ma.halfSize,
ma.depth))}forEachNeighbor(Z,ma){const S=d.getRadius(ma),ha=d.getCenter(ma),G=Y=>{const R=this.objectToBoundingSphere(Y);var ia=d.getRadius(R);ia=S+ia;return 0>=c.squaredDistance(d.getCenter(R),ha)-ia*ia?Z(Y):!0};let ca=!0;const pa=Y=>{ca&&=G(Y)};h(this._root,Y=>{var R=d.getRadius(Y.bounds);R=S+R;if(0<c.squaredDistance(d.getCenter(Y.bounds),ha)-R*R)return!1;Y=Y.node;Y.terminals.forAll(pa);ca&&null!==Y.residents&&Y.residents.forAll(pa);return ca});ca&&this.forEachDegenerateObject(pa)}_intersectsObject(Z,
ma){ma=this.objectToBoundingSphere(ma);return 0<ma[3]?d.intersectsRay(ma,Z):!0}_intersectsObjectWithOffset(Z,ma,S){ma=this.objectToBoundingSphere(ma);return 0<ma[3]?d.intersectsRay(S.applyToBoundingSphere(ma),Z):!0}_add(Z,ma){ma.advanceTo(this.objectToBoundingSphere(Z))?ma.node.terminals.push(Z):(ma.node.residents.push(Z),ma.node.residents.length>this._maximumObjectsPerNode&&ma.depth<this._maximumDepth&&this._split(ma))}_split(Z){const ma=Z.node.residents;Z.node.residents=null;for(let S=0;S<ma.length;S++){const ha=
J.acquire().init(Z);this._add(ma.at(S),ha);J.release(ha)}}_grow(Z,ma){0!==ma&&(q(Z,ma,S=>this.objectToBoundingSphere(S),K),u(K[3])&&!this._fitsInsideTree(K)&&(v(this._root.node)?(d.copy(K,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize()):(Z=this._rootBoundsForRootAsSubNode(K),this._placingRootViolatesMaxDepth(Z)?this._rebuildTree(K,Z):this._growRootAsSubNode(Z),J.release(Z))))}_rebuildTree(Z,ma){c.copy(d.getCenter(X),d.getCenter(ma.bounds));
X[3]=ma.halfSize;q([Z,X],2,S=>S,V);Z=J.acquire().init(this._root);this._root.initFrom(null,V,V[3]);this._root.increaseHalfSize(1.25);h(Z,S=>{this.add(S.node.terminals.data,S.node.terminals.length);null!==S.node.residents&&this.add(S.node.residents.data,S.node.residents.length);return!0});J.release(Z)}_placingRootViolatesMaxDepth(Z){const ma=Math.log(Z.halfSize/this._root.halfSize)*Math.LOG2E;let S=0;h(this._root,ha=>{S=Math.max(S,ha.depth);return S+ma<=this._maximumDepth});return S+ma>this._maximumDepth}_rootBoundsForRootAsSubNode(Z){var ma=
Z[3],S=-Infinity;const ha=this._root.bounds,G=this._root.halfSize;for(var ca=0;3>ca;ca++){var pa=Math.max(0,Math.ceil((ha[ca]-G-(Z[ca]-ma))/(2*G)));const Y=Math.max(0,Math.ceil((Z[ca]+ma-(ha[ca]+G))/(2*G)))+1;S=Math.max(S,2**Math.ceil(Math.log(pa+Y)*Math.LOG2E));da[ca].min=pa;da[ca].max=Y}for(Z=0;3>Z;Z++)ma=da[Z].min,ca=da[Z].max,pa=(S-(ma+ca))/2,ma+=Math.ceil(pa),ca+=Math.floor(pa),C[Z]=ha[Z]-G-ma*G*2+(ca+ma)*G;S*=G;C[3]=S*Q;return J.acquire().initFrom(null,C,S,0)}_growRootAsSubNode(Z){const ma=
this._root.node;c.copy(d.getCenter(K),d.getCenter(this._root.bounds));K[3]=this._root.halfSize;this._root.init(Z);Z.advanceTo(K,null,!0);Z.node.children=ma.children;Z.node.residents=ma.residents;Z.node.terminals=ma.terminals}_shrink(){for(;;){const Z=this._findShrinkIndex();if(-1===Z)break;this._root.advance(Z);this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let Z=null;const ma=this._root.node.children;let S=0,ha=0;for(;ha<ma.length&&null==
Z;)S=ha++,Z=ma[S];for(;ha<ma.length;)if(ma[ha++])return-1;return S}_isDegenerate(Z){Z=this.objectToBoundingSphere(Z)[3];return!u(Z)}_fitsInsideTree(Z){const ma=this._root.bounds,S=this._root.halfSize;return Z[3]<=S&&Z[0]>=ma[0]-S&&Z[0]<=ma[0]+S&&Z[1]>=ma[1]-S&&Z[1]<=ma[1]+S&&Z[2]>=ma[2]-S&&Z[2]<=ma[2]+S}toJSON(){const {maximumDepth:Z,maximumObjectsPerNode:ma,_objectCount:S}=this,ha=this._nodeToJSON(this._root.node);return{maximumDepth:Z,maximumObjectsPerNode:ma,objectCount:S,root:{bounds:this._root.bounds,
halfSize:this._root.halfSize,depth:this._root.depth,node:ha}}}_nodeToJSON(Z){const ma=Z.children.map(ha=>ha?this._nodeToJSON(ha):null),S=Z.residents?.map(ha=>this.objectToBoundingSphere(ha));Z=Z.terminals?.map(ha=>this.objectToBoundingSphere(ha));return{children:ma,residents:S,terminals:Z}}static fromJSON(Z){const ma=new D(S=>S,{maximumDepth:Z.maximumDepth,maximumObjectsPerNode:Z.maximumObjectsPerNode});ma._objectCount=Z.objectCount;ma._root.initFrom(Z.root.node,Z.root.bounds,Z.root.halfSize,Z.root.depth);
return ma}}class J{constructor(){this.bounds=d.create();this.halfSize=0;this.initFrom(null,null,0,0)}init(Z){return this.initFrom(Z.node,Z.bounds,Z.halfSize,Z.depth)}initFrom(Z,ma,S,ha=this.depth){this.node=null!=Z?Z:J.createEmptyNode();ma&&d.copy(ma,this.bounds);this.halfSize=S;this.depth=ha;return this}increaseHalfSize(Z){this.halfSize*=Z;this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*Q}advance(Z){let ma=this.node.children[Z];ma||(ma=J.createEmptyNode(),
this.node.children[Z]=ma);this.node=ma;this.halfSize/=2;this.depth++;Z=E[Z];this.bounds[0]+=Z[0]*this.halfSize;this.bounds[1]+=Z[1]*this.halfSize;this.bounds[2]+=Z[2]*this.halfSize;this.updateBoundsRadiusFromHalfSize();return this}advanceTo(Z,ma,S=!1){for(;;){if(this.isTerminalFor(Z))return ma&&ma(this,-1),!0;if(this.isLeaf()){if(!S)return ma&&ma(this,-1),!1;this.node.residents=null}const ha=this._childIndex(Z);ma&&ma(this,ha);this.advance(ha)}}isLeaf(){return null!=this.node.residents}isTerminalFor(Z){return Z[3]>
this.halfSize/2}_childIndex(Z){const ma=this.bounds;return(ma[0]<Z[0]?1:0)+(ma[1]<Z[1]?2:0)+(ma[2]<Z[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new b({shrink:!0}),residents:new b({shrink:!0})}}static acquire(){return J._pool.acquire()}static release(Z){J._pool.release(Z)}static clearPool(){J._pool.prune()}}J._pool=new a(J);(function(Z){Z=Z.DepthOrder||(Z.DepthOrder={});Z[Z.FRONT_TO_BACK=1]="FRONT_TO_BACK";Z[Z.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(D||=
{});const E=[f.fromValues(-1,-1,-1),f.fromValues(1,-1,-1),f.fromValues(-1,1,-1),f.fromValues(1,1,-1),f.fromValues(-1,-1,1),f.fromValues(1,-1,1),f.fromValues(-1,1,1),f.fromValues(1,1,1)],L=[f.fromValues(-1,-1,-1),f.fromValues(-1,-1,1),f.fromValues(-1,1,-1),f.fromValues(-1,1,1),f.fromValues(1,-1,-1),f.fromValues(1,-1,1),f.fromValues(1,1,-1),f.fromValues(1,1,1)],Q=Math.sqrt(3),M=[null],C=d.create(),U=f.create(),y=f.create(),B=f.create(),H=new b,N=d.create(),K=d.create(),X=d.create(),V=d.create(),da=
[{min:0,max:0},{min:0,max:0},{min:0,max:0}],aa=new b,fa=[0,0,0,0,0,0,0,0];return D})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/libs/gl-matrix-2/math/mat4 ./vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ./vec42 ../core/libs/gl-matrix-2/factories/vec4f64 ../core/libs/gl-matrix-2/math/common ../geometry/support/Axis ../geometry/support/ray ../geometry/support/sphereUtils ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(){return h.create()}function q(F,O){return k.copy(O,F)}function g(F,O){return h.fromValues(F[0],F[1],F[2],O)}function p(F){return F}function x(F){F[0]=F[1]=F[2]=F[3]=0}function u(F,O){F[0]=F[1]=F[2]=0;F[3]=O;return F}function D(F){return F[3]}function J(F){return F}function E(F,O,ba,na){return h.fromValues(F,O,ba,na)}function L(F,O,ba){F!==ba&&(ba[0]=F[0],ba[1]=F[1],ba[2]=F[2]);ba[3]=F[3]+O;return ba}function Q(F,O,ba){F!==ba&&q(F,ba);return ba}function M(F,
O){return O}function C(F,O,ba){if(null==O||!y(F,O,ca))return!1;let {t0:na,t1:P}=ca;if(0>na||P<na&&0<P)na=P;if(0>na)return!1;if(ba){const {origin:W,direction:ea}=O;ba[0]=W[0]+ea[0]*na;ba[1]=W[1]+ea[1]*na;ba[2]=W[2]+ea[2]*na}return!0}function U(F,O,ba){O=t.fromPoints(O,ba);if(!y(F,O,ca))return[];const {origin:na,direction:P}=O,{t0:W,t1:ea}=ca;O=ra=>{const ja=d.create();n.scaleAndAdd(ja,na,P,ra);return V(F,ja,ja)};return Math.abs(W-ea)<l.getEpsilon()?[O(W)]:[O(W),O(ea)]}function y(F,O,ba){const {origin:na,
direction:P}=O,W=pa;W[0]=na[0]-F[0];W[1]=na[1]-F[1];W[2]=na[2]-F[2];O=P[0]*P[0]+P[1]*P[1]+P[2]*P[2];if(0===O)return!1;const ea=2*(P[0]*W[0]+P[1]*W[1]+P[2]*W[2]);F=ea*ea-4*O*(W[0]*W[0]+W[1]*W[1]+W[2]*W[2]-F[3]*F[3]);if(0>F)return!1;F=Math.sqrt(F);ba.t0=(-ea-F)/(2*O);ba.t1=(-ea+F)/(2*O);return!0}function B(F,O){return C(F,O,null)}function H(F,O,ba){if(C(F,O,ba))return ba;F=N(F,O,v.sv3d.get());n.add(ba,O.origin,n.scale(v.sv3d.get(),O.direction,n.distance(O.origin,F)/n.length(O.direction)));return ba}
function N(F,O,ba){const na=v.sv3d.get(),P=v.sm4d.get();n.cross(na,O.origin,O.direction);const W=F[3];n.cross(ba,na,O.origin);n.scale(ba,ba,1/n.length(ba)*W);F=aa(F,O.origin);O=r.angle(O.origin,ba);e.fromRotation(P,O+F,na);n.transformMat4(ba,ba,P);return ba}function K(F,O,ba,na){F=F[3];var P=F*F;O+=.5*Math.PI;const W=ba*ba+P-2*Math.cos(O)*ba*F;ba=Math.sqrt(W);P=W-P;return 0>=P?.5:Math.min(1,(Math.acos(Math.sqrt(P)/ba)-Math.asin(F/(ba/Math.sin(O)))+.5*na)/na)}function X(F,O,ba){if(C(F,O,ba))return ba;
t.closestPoint(O,F,ba);return V(F,ba,ba)}function V(F,O,ba){O=n.subtract(v.sv3d.get(),O,F);O=n.scale(v.sv3d.get(),O,F[3]/n.length(O));return n.add(ba,O,F)}function da(F,O){O=n.subtract(v.sv3d.get(),O,F);O=n.squaredLength(O);return Math.sqrt(Math.abs(O-F[3]*F[3]))}function aa(F,O){O=n.subtract(v.sv3d.get(),O,F);O=n.length(O);F=F[3];return f.acosClamped(F/(F+Math.abs(F-O)))}function fa(F,O,ba,na){F=n.subtract(Y,O,F);switch(ba){case m.Axis.X:return ba=z.cartesianToSpherical(F,Y)[2],n.set(na,-Math.sin(ba),
Math.cos(ba),0);case m.Axis.Y:return F=z.cartesianToSpherical(F,Y),ba=F[1],F=F[2],O=Math.sin(ba),n.set(na,-O*Math.cos(F),-O*Math.sin(F),Math.cos(ba));case m.Axis.Z:return n.normalize(na,F)}}function Z(F,O){O=n.subtract(R,O,F);return n.length(O)-F[3]}function ma(F,O,ba,na){const P=Z(F,O);F=fa(F,O,m.Axis.Z,R);ba=n.scale(R,F,ba-P);return n.add(na,O,ba)}function S(F,O){O=n.squaredDistance(F,O);F=F[3];return O<=F*F}function ha(F,O,ba=h.create()){const na=n.distance(F,O),P=F[3],W=O[3];if(na+W<P)return k.copy(ba,
F),ba;if(na+P<W)return k.copy(ba,O),ba;n.lerp(ba,F,O,(na+W-P)/(2*na));ba[3]=(na+P+W)/2;return ba}b=w();const G=c=k.equals,ca={t0:0,t1:0},pa=d.create(),Y=d.create(),R=d.create(),ia=w(),A=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:b,altitudeAt:Z,angleToSilhouette:aa,axisAt:fa,cameraFrustumCoverage:K,clear:x,closestPoint:X,closestPointOnSilhouette:N,containsPoint:S,copy:q,create:w,distanceToSilhouette:da,elevate:L,equals:G,exactEquals:c,fromCenterAndRadius:g,fromRadius:u,fromValues:E,
getCenter:J,getExtent:M,getRadius:D,intersectLine:U,intersectRay:C,intersectRayClosestSilhouette:H,intersectsRay:B,projectPoint:V,setAltitudeAt:ma,setExtent:Q,tmpSphere:ia,union:ha,wrap:p},Symbol.toStringTag,{value:"Module"}));a.NullSphere=b;a.altitudeAt=Z;a.angleToSilhouette=aa;a.axisAt=fa;a.cameraFrustumCoverage=K;a.clear=x;a.closestPoint=X;a.closestPointOnSilhouette=N;a.containsPoint=S;a.copy=q;a.create=w;a.distanceToSilhouette=da;a.elevate=L;a.equals=G;a.exactEquals=c;a.fromCenterAndRadius=g;
a.fromRadius=u;a.fromValues=E;a.getCenter=J;a.getExtent=M;a.getRadius=D;a.intersectLine=U;a.intersectRay=C;a.intersectRayClosestSilhouette=H;a.intersectsRay=B;a.projectPoint=V;a.setAltitudeAt=ma;a.setExtent=Q;a.sphere=A;a.tmpSphere=ia;a.union=ha;a.wrap=p})},"esri/geometry/support/sphereUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec32"],function(a,b,c){a.cartesianToSpherical=function(f,e){const n=c.length(f),d=b.asinClamped(f[2]/n);c.set(e,n,d,Math.atan2(f[1]/n,f[0]/n));
return e};a.sphericalToCartesian=function(f,e){const n=f[0],d=f[1];f=f[2];const k=Math.cos(d);c.set(e,n*k*Math.cos(f),n*k*Math.sin(f),n*Math.sin(d))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceData":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/arrayUtils ../../../../../core/Evented ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/libs/gl-matrix-2/math/mat3 ../../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../../core/libs/gl-matrix-2/math/mat4 ../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../chunks/vec32 ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../geometry/support/buffer/BufferView ../../../support/mathUtils ../../../support/buffer/InterleavedLayout ../Util ../VertexAttribute ./RenderInstanceData".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u){a.StateFlags=void 0;(function(M){M[M.ALLOCATED=1]="ALLOCATED";M[M.DEFAULT_ACTIVE=2]="DEFAULT_ACTIVE";M[M.VISIBLE=4]="VISIBLE";M[M.HIGHLIGHT=8]="HIGHLIGHT";M[M.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE";M[M.REMOVE=32]="REMOVE";M[M.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED";M[M.ACTIVE=18]="ACTIVE"})(a.StateFlags||(a.StateFlags={}));class D{constructor(M){this.localTransform=M.getField(x.VertexAttribute.LOCALTRANSFORM,w.BufferViewMat4f64);this.globalTransform=
M.getField(x.VertexAttribute.GLOBALTRANSFORM,w.BufferViewMat4f64);this.modelOrigin=M.getField(x.VertexAttribute.MODELORIGIN,w.BufferViewVec3f64);this.model=M.getField(x.VertexAttribute.INSTANCEMODEL,w.BufferViewMat3f);this.modelNormal=M.getField(x.VertexAttribute.INSTANCEMODELNORMAL,w.BufferViewMat3f);this.modelScaleFactors=M.getField(x.VertexAttribute.MODELSCALEFACTORS,w.BufferViewVec2f);this.boundingSphere=M.getField(x.VertexAttribute.BOUNDINGSPHERE,w.BufferViewVec4f64);this.featureAttribute=M.getField(x.VertexAttribute.FEATUREATTRIBUTE,
w.BufferViewVec4f);this.color=M.getField(x.VertexAttribute.COLOR,w.BufferViewVec4u8);this.objectAndLayerIdColor=M.getField(x.VertexAttribute.OBJECTANDLAYERIDCOLOR,w.BufferViewVec4u8);this.state=M.getField(x.VertexAttribute.STATE,w.BufferViewUint8);this.lodLevel=M.getField(x.VertexAttribute.LODLEVEL,w.BufferViewUint8)}}a.InstanceData=class extends c{constructor(M,C){super(M);this.events=new e;this._next=this._size=this._capacity=0;this._highlightGroupMap=new Map;this._highlightGroupMapPrev=new Map;
M=g.newLayout().mat4f64(x.VertexAttribute.LOCALTRANSFORM).mat4f64(x.VertexAttribute.GLOBALTRANSFORM).vec4f64(x.VertexAttribute.BOUNDINGSPHERE).vec3f64(x.VertexAttribute.MODELORIGIN).mat3f(x.VertexAttribute.INSTANCEMODEL).mat3f(x.VertexAttribute.INSTANCEMODELNORMAL).vec2f(x.VertexAttribute.MODELSCALEFACTORS);C.includes(x.VertexAttribute.FEATUREATTRIBUTE)&&(M=M.vec4f(x.VertexAttribute.FEATUREATTRIBUTE));C.includes(x.VertexAttribute.COLOR)&&(M=M.vec4u8(x.VertexAttribute.COLOR));C.includes(x.VertexAttribute.OBJECTANDLAYERIDCOLOR)&&
(M=M.vec4u8(x.VertexAttribute.OBJECTANDLAYERIDCOLOR));this._layout=M=M.u8(x.VertexAttribute.STATE).u8(x.VertexAttribute.LODLEVEL);this._capacity=u.initialCapacity;this._buffer=this._layout.createBuffer(this._capacity);this._view=new D(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const M=this._findSlot();this._view.state.set(M,a.StateFlags.ALLOCATED);this._size++;this.events.emit("instances-changed");
return M}removeInstance(M){const C=this._view.state;p.assert(0<=M&&M<this._capacity&&0!==(C.get(M)&a.StateFlags.ALLOCATED),"invalid instance handle");this._getStateFlag(M,a.StateFlags.ACTIVE)?this._setStateFlags(M,a.StateFlags.REMOVE):this.freeInstance(M);this.events.emit("instances-changed")}freeInstance(M){const C=this._view.state;p.assert(0<=M&&M<this._capacity&&0!==(C.get(M)&a.StateFlags.ALLOCATED),"invalid instance handle");C.set(M,0);this._size--}setLocalTransform(M,C,U=!0){this._view.localTransform.setMat(M,
C);U&&this.updateModelTransform(M)}getLocalTransform(M,C){this._view.localTransform.getMat(M,C)}setGlobalTransform(M,C,U=!0){this._view.globalTransform.setMat(M,C);U&&this.updateModelTransform(M)}getGlobalTransform(M,C){this._view.globalTransform.getMat(M,C)}updateModelTransform(M){const C=this._view;var U=J;const y=E;C.localTransform.getMat(M,L);C.globalTransform.getMat(M,Q);const B=t.multiply(Q,Q,L);r.set(U,B[12],B[13],B[14]);C.modelOrigin.setVec(M,U);l.fromMat4(y,B);C.model.setMat(M,y);U=q.scaleFromMatrix(J,
B);U.sort();C.modelScaleFactors.set(M,0,U[1]);C.modelScaleFactors.set(M,1,U[2]);l.invert(y,y);l.transpose(y,y);C.modelNormal.setMat(M,y);this._setStateFlags(M,a.StateFlags.TRANSFORM_CHANGED);this.events.emit("instance-transform-changed",{index:M})}getModelTransform(M,C){const U=this._view;U.model.getMat(M,E);U.modelOrigin.getVec(M,J);C[0]=E[0];C[1]=E[1];C[2]=E[2];C[3]=0;C[4]=E[3];C[5]=E[4];C[6]=E[5];C[7]=0;C[8]=E[6];C[9]=E[7];C[10]=E[8];C[11]=0;C[12]=J[0];C[13]=J[1];C[14]=J[2];C[15]=1}applyShaderTransformation(M,
C){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,M,C)}getCombinedModelTransform(M,C){this.getModelTransform(M,C);null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,M,C);return C}getCombinedLocalTransform(M,C){this._view.localTransform.getMat(M,C);null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,M,C)}getCombinedMaxScaleFactor(M){let C=this._view.modelScaleFactors.get(M,1);null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(J,
this,M),C*=Math.max(J[0],J[1],J[2]));return C}getCombinedMedianScaleFactor(M){let C=this._view.modelScaleFactors.get(M,0);if(null!=this.shaderTransformation){this.shaderTransformation.scaleFactor(J,this,M);M=J[0];var U=J[1];C*=Math.max(Math.min(M,U),Math.min(Math.max(M,U),J[2]))}return C}getModel(M,C){this._view.model.getMat(M,C)}setFeatureAttribute(M,C){this._view.featureAttribute.setVec(M,C)}getFeatureAttribute(M,C){this._view.featureAttribute.getVec(M,C)}setColor(M,C){this._view.color.setVec(M,
C)}setObjectAndLayerIdColor(M,C){this._view.objectAndLayerIdColor.setVec(M,C)}setVisible(M,C){C!==this.getVisible(M)&&(this._setStateFlag(M,a.StateFlags.VISIBLE,C),this.events.emit("instance-visibility-changed",{index:M}))}getVisible(M){return this._getStateFlag(M,a.StateFlags.VISIBLE)}setHighlight(M,C,U){let y=this._highlightGroupMap.get(M);C?(y||(y=new Set,this._highlightGroupMap.set(M,y)),y.add(U)&&(this._setStateFlag(M,a.StateFlags.HIGHLIGHT,!0),this.events.emit("instance-highlight-changed"))):
y?.delete(U)&&(0===y.size&&(this._highlightGroupMap.delete(M),this._setStateFlag(M,a.StateFlags.HIGHLIGHT,!1)),this.events.emit("instance-highlight-changed"))}getHighlight(M){return this._getStateFlag(M,a.StateFlags.HIGHLIGHT)}foreachHighlightGroupPrev(M,C){this._highlightGroupMapPrev.get(M)?.forEach(C);this._highlightGroupMapPrev.delete(M)}foreachHighlightGroup(M,C){const U=this._highlightGroupMap.get(M);U?.forEach(C);U?this._highlightGroupMapPrev.set(M,new Set(U)):this._highlightGroupMapPrev.delete(M)}getState(M){return this._view.state.get(M)}getLodLevel(M){return this._view.lodLevel.get(M)}countFlags(M){let C=
0;for(let U=0;U<this._capacity;++U)this.getState(U)&M&&++C;return C}_setStateFlags(M,C){const U=this._view.state;C|=U.get(M);U.set(M,C)}_clearStateFlags(M,C){const U=this._view.state;C=U.get(M)&~C;U.set(M,C)}_setStateFlag(M,C,U){U?this._setStateFlags(M,C):this._clearStateFlags(M,C)}_getStateFlag(M,C){return!!(this._view.state.get(M)&C)}_grow(){this._capacity=Math.max(u.initialCapacity,Math.floor(this._capacity*f.reallocGrowthFactor));this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer);
this._view=new D(this._buffer)}_findSlot(){const M=this._view.state;let C=this._next;for(;M.get(C)&a.StateFlags.ALLOCATED;)C=C+1===this._capacity?0:C+1;this._next=C+1===this._capacity?0:C+1;return C}};b.__decorate([n.property({constructOnly:!0})],a.InstanceData.prototype,"shaderTransformation",void 0);b.__decorate([n.property()],a.InstanceData.prototype,"_size",void 0);b.__decorate([n.property({readOnly:!0})],a.InstanceData.prototype,"size",null);a.InstanceData=b.__decorate([h.subclass("esri.views.3d.webgl-engine.lib.lodRendering.InstanceData")],
a.InstanceData);const J=v.create(),E=m.create(),L=z.create(),Q=z.create();a.InstanceDataView=D;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData":function(){define("exports ../../../../../core/arrayUtils ../../../../../geometry/support/buffer/BufferView ../Util ../VertexAttribute ./BackedBufferObject".split(" "),function(a,b,c,f,e,n){class d{constructor(h){this.modelOriginHi=h.getField(e.VertexAttribute.INSTANCEMODELORIGINHI,
c.BufferViewVec3f);this.modelOriginLo=h.getField(e.VertexAttribute.INSTANCEMODELORIGINLO,c.BufferViewVec3f);this.model=h.getField(e.VertexAttribute.INSTANCEMODEL,c.BufferViewMat3f);this.modelNormal=h.getField(e.VertexAttribute.INSTANCEMODELNORMAL,c.BufferViewMat3f);this.featureAttribute=h.getField(e.VertexAttribute.INSTANCEFEATUREATTRIBUTE,c.BufferViewVec4f);this.color=h.getField(e.VertexAttribute.INSTANCECOLOR,c.BufferViewVec4u8);this.objectAndLayerIdColor=h.getField(e.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR,
c.BufferViewVec4u8)}}class k{constructor(h,l){this._rctx=h;this._instanceBufferLayout=l;this._tailIndex=this._headIndex=0;this._firstIndex=null;this._captureFirstIndex=!0;this._updating=!1;this._prevHeadIndex=0;this._resized=!1;this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const h=this._headIndex,l=this._tailIndex;return h>=l?h-l:h+this._capacity-l}get isEmpty(){return this._headIndex===
this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._tailIndex=this._headIndex=0;this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){f.assert(!this._updating,"already updating");this._updating=!0;this._prevHeadIndex=this._headIndex}endUpdate(){f.assert(this._updating,
"not updating");this.size<b.reallocShrinkThreshold*this.capacity&&this._shrink();this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex);this._updating=!1}allocateHead(){f.assert(this._updating,"not updating");this.isFull&&this._grow();const h=this.headIndex;this._captureFirstIndex&&(this._firstIndex=h,this._captureFirstIndex=!1);this._incrementHead();f.assert(this._headIndex!==this._tailIndex,"invalid pointers");return h}freeTail(){f.assert(this._updating,
"not updating");f.assert(0<this.size,"invalid size");const h=this._tailIndex===this._firstIndex;this._incrementTail();h&&(this._firstIndex=this._tailIndex)}_grow(){this._resize(Math.max(64,Math.floor(this._capacity*b.reallocGrowthFactor)))}_shrink(){this._resize(Math.max(64,Math.floor(this._capacity*b.reallocShrinkFactor)))}_resize(h){f.assert(this._updating,"not updating");if(h!==this._capacity){var l=new n(this._rctx,this._instanceBufferLayout.stride,h);if(this._buffer){this._firstIndex&&(this._firstIndex=
(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const m=this.size,t=this._compactInstances(l);f.assert(t===m,"invalid compaction");this._buffer.destroy();this._tailIndex=0;this._headIndex=t;this._prevHeadIndex=0}this._resized=!0;this._capacity=h;this._buffer=l;this._view=new d(this._instanceBufferLayout.createView(this._buffer.array))}}_compactInstances(h){const l=this._headIndex,m=this._tailIndex;return m<l?(this._buffer.copyRange(m,l,h),l-m):m>l?(this._buffer.copyRange(m,this._capacity,
h),0<l&&this._buffer.copyRange(0,l,h,this._capacity-m),l+(this._capacity-m)):0}_incrementHead(h=1){this._headIndex=(this._headIndex+h)%this._capacity}_incrementTail(h=1){this._tailIndex=(this._tailIndex+h)%this._capacity}_transferRange(h,l){h<l?this._buffer.transferRange(h,l):h>l&&(0<l&&this._buffer.transferRange(0,l),this._buffer.transferRange(h,this._capacity))}}a.RenderInstanceData=k;a.RenderInstanceDataView=d;a.initialCapacity=64;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject":function(){define(["../../../../webgl/BufferObject","../../../../webgl/enums"],function(a,b){class c{constructor(f,e,n){this._elementSize=e;this._buffer=a.BufferObject.createVertex(f,b.Usage.STATIC_DRAW);this.resize(n)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+
this._buffer.usedMemory}copyRange(f,e,n,d=0){f=new Uint8Array(this.array,f*this.elementSize,(e-f)*this.elementSize);(new Uint8Array(n.array,d*this.elementSize)).set(f)}transferAll(){this._buffer.setData(this._array)}transferRange(f,e){f*=this._elementSize;e*=this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),f,f,e)}resize(f){const e=f*this._elementSize,n=new ArrayBuffer(e);this._array&&(f>=this._capacity?(new Uint8Array(n)).set(new Uint8Array(this._array)):(new Uint8Array(n)).set((new Uint8Array(this._array)).subarray(0,
f*this._elementSize)));this._array=n;this._buffer.setSize(e);this._capacity=f}}return c})},"esri/views/webgl/BufferObject":function(){define("exports ../../core/arrayUtils ../../core/has ../../core/Logger ../../core/typedArrayUtil ./checkWebGLError ./enums".split(" "),function(a,b,c,f,e,n,d){class k{static createIndex(h,l,m){return new k(h,d.BufferType.ELEMENT_ARRAY_BUFFER,l,m)}static createVertex(h,l,m){return new k(h,d.BufferType.ARRAY_BUFFER,l,m)}static createUniform(h,l,m){return new k(h,d.BufferType.UNIFORM_BUFFER,
l,m)}static createPixelPack(h,l=d.Usage.STREAM_READ,m){h=new k(h,d.BufferType.PIXEL_PACK_BUFFER,l);m&&h.setSize(m);return h}static createPixelUnpack(h,l=d.Usage.STREAM_DRAW,m){return new k(h,d.BufferType.PIXEL_UNPACK_BUFFER,l,m)}static createTransformFeedback(h,l=d.Usage.STATIC_DRAW,m){h=new k(h,d.BufferType.TRANSFORM_FEEDBACK_BUFFER,l);h.setSize(m);return h}constructor(h,l,m,t){this._context=h;this.bufferType=l;this.usage=m;this._glName=null;this._size=-1;this._indexType=void 0;h.instanceCounter.increment(d.ResourceType.BufferObject,
this);this._glName=this._context.gl.createBuffer();n.checkWebGLError(this._context.gl);t&&this.setData(t)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===d.BufferType.ELEMENT_ARRAY_BUFFER){if(this._indexType===d.DataType.UNSIGNED_INT)return 4*this._size;if(this._indexType===d.DataType.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===d.BufferType.ELEMENT_ARRAY_BUFFER||
this.bufferType===d.BufferType.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(d.ResourceType.BufferObject,this),this._context=null):this._glName&&f.getLogger("esri.views.webgl.BufferObject").warn("Leaked WebGL buffer object")}setSize(h,l=null){if(this.bufferType===d.BufferType.ELEMENT_ARRAY_BUFFER&&null!=l)switch(this._indexType=l,l){case d.DataType.UNSIGNED_SHORT:h*=2;break;case d.DataType.UNSIGNED_INT:h*=
4}this._setBufferData(h)}setData(h){if(h){var l=h.byteLength;this.bufferType===d.BufferType.ELEMENT_ARRAY_BUFFER&&(e.isUint8Array(h)?this._indexType=d.DataType.UNSIGNED_BYTE:e.isUint16Array(h)?(l/=2,this._indexType=d.DataType.UNSIGNED_SHORT):e.isUint32Array(h)&&(l/=4,this._indexType=d.DataType.UNSIGNED_INT));this._setBufferData(l,h)}}_setBufferData(h,l=null){this._size=h;const m=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);const t=this._context.gl;
null!=l?t.bufferData(this.bufferType,l,this.usage):t.bufferData(this.bufferType,h,this.usage);n.checkWebGLError(t);this._isVAOAware&&this._context.bindVAO(m)}setSubData(h,l,m,t){if(h){var z=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null);this._context.bindBuffer(this);var {gl:r}=this._context;r.bufferSubData(this.bufferType,l*h.BYTES_PER_ELEMENT,h,m,t-m);n.checkWebGLError(r);this._isVAOAware&&this._context.bindVAO(z)}}getSubData(h,l=0,m,t){if(!(0>m||0>t)){var z=b.isArrayLike(h)?
h.BYTES_PER_ELEMENT:1;z*((m??0)+(t??0))>h.byteLength||(l+z*(t??0)>this.usedMemory&&f.getLogger("esri.views.webgl.BufferObject").warn("Potential problem getting subdata: requested data exceeds buffer size!"),z=this._context.gl,this.bufferType===d.BufferType.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,d.BufferType.TRANSFORM_FEEDBACK_BUFFER),z.getBufferSubData(d.BufferType.TRANSFORM_FEEDBACK_BUFFER,l,h,m,t),this._context.unbindBuffer(d.BufferType.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,
d.BufferType.COPY_READ_BUFFER),z.getBufferSubData(d.BufferType.COPY_READ_BUFFER,l,h,m,t),this._context.unbindBuffer(d.BufferType.COPY_READ_BUFFER)))}}async getSubDataAsync(h,l=0,m,t){await this._context.clientWaitAsync();this.getSubData(h,l,m,t)}}a.BufferObject=k;a.tracer=null;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(a,b,c,f){function e(d,k){switch(k){case d.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";
case d.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case d.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case d.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case d.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case d.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";
default:return"Unknown error"}}const n=!!c("enable-feature:webgl-debug");a.checkWebGLError=function(d){if(n){var k=d.getError();k&&(d=e(d,k),k=Error().stack,f.getLogger("esri.views.webgl.checkWebGLError").error(new b("webgl-error","WebGL error occurred",{message:d,stack:k})))}};a.hasFeatureFlagWebGLDebug=n;a.webglDebugEnabled=function(){return n};a.webglValidateShadersEnabled=function(){return n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/InstanceOctree":function(){define("exports ../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../chunks/vec32 ../../../../../chunks/sphere ../../../support/mathUtils ../Octree".split(" "),
function(a,b,c,f,e,n){class d extends n{constructor(k,h){super(l=>f.wrap(this._instanceData.view.boundingSphere.getVec(l,this._tmpSphere)),{maximumDepth:25});this._instanceData=k;this._boundingSphere=h;this._tmpSphere=f.create();this._tmpMat4=b.create()}addInstance(k){const h=this._instanceData.view.boundingSphere,l=this._instanceData.getCombinedModelTransform(k,this._tmpMat4);c.transformMat4(f.getCenter(this._tmpSphere),this._boundingSphere.center,l);this._tmpSphere[3]=this._boundingSphere.radius*
e.maxScale(l);h.setVec(k,this._tmpSphere);this.add([k])}removeInstance(k){this.remove([k])}}a.InstanceOctree=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/LevelSelector":function(){define(["exports"],function(a){class b{constructor(c,f){this._worldSpaceRadius=c;this._minScreenSpaceRadii=f}selectLevel(c,f,e){c=e.computeScreenPixelSizeAt(c);f=this._worldSpaceRadius*f/c;c=0;for(e=1;e<this._minScreenSpaceRadii.length;++e)f>=this._minScreenSpaceRadii[e]&&
(c=e);return c}}a.LevelSelector=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/LodLevel":function(){define("exports ../../../../../core/arrayUtils ../../../../../core/promiseUtils ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../geometry/support/aaBoundingBox ./LodComponentData".split(" "),function(a,b,c,f,e,n){class d{static async create(k,h,l){const m=await Promise.allSettled(h.components.map(z=>k.controller.schedule(()=>
new n.LodComponentData(k,z),l))),t=m.map(z=>"fulfilled"===z.status?z.value:null).filter(b.isSome);if(c.isAborted(l)||t.length!==m.length){t.forEach(z=>z.destroy());c.throwIfAborted(l);for(const z of m)if("rejected"===z.status)throw z.reason;}return new d(h.minScreenSpaceRadius,t)}constructor(k,h){this.minScreenSpaceRadius=k;this.components=h}destroy(){this.components.forEach(k=>k.destroy())}intersect(k,h,l,m,t,z,r){this.components.forEach(v=>v.intersect(k,h,l,m,t,z,this.boundingSphere,r))}get boundingBox(){if(null==
this._boundingBox){const k=e.empty();this.components.forEach(h=>{null!=h.boundingInfo&&(e.expandWithVec3(k,h.boundingInfo.bbMin),e.expandWithVec3(k,h.boundingInfo.bbMax))});this._boundingBox=k}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const k=this.boundingBox,h=f.create();e.center(k,h);this._boundingSphere={center:h,radius:.5*e.diameter(k)}}return this._boundingSphere}get triangleCount(){return this.components.reduce((k,h)=>k+h.triangleCount,0)}}a.LodLevel=d;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/LodComponentData":function(){define("exports ../../../support/buffer/glUtil ../ContentObject ../DefaultVertexAttributeLocations ../GLMaterials ../Intersector ../IntersectorInterfaces ../VertexArrayObject ./Intersector ../../../../webgl/BufferObject ../../../../webgl/enums".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){function t(r,v,w,q=null){const g=r.createBufferWriter(),p=g.vertexBufferLayout,x=g.elementCount(v),
u=p.createBuffer(x);g.write(null,null,v,q,u,0);return{material:r,vertexBufferLayout:p,buffer:u.buffer,elementCount:x,boundingInfo:w}}class z{constructor(r,v){const w=r.renderContext.rctx;v=v.geometry;let q=null;q=v instanceof c.ContentObject?t(v.material,v.attributes,v.boundingInfo):v;const g=q.material;this._materials=r.materials;g.setParameters({instancedDoublePrecision:!0});this.geometry=v;this.material=g;this.glMaterials=new e.GLMaterials(g,this._materials);this.vertexBufferLayout=q.vertexBufferLayout;
this.vbo=l.BufferObject.createVertex(w,m.Usage.STATIC_DRAW,q.buffer);this.vao=new k.VertexArrayObject(w,f.Default3D,new Map([["geometry",b.glLayout(q.vertexBufferLayout)]]),new Map([["geometry",this.vbo]]));this.vertexCount=q.elementCount}destroy(){this.glMaterials.dispose();this.vbo.dispose();this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(r,v,w,q,g,p,x,u){if(this.geometry instanceof c.ContentObject){var D=this.geometry.id;
this.material.intersect(this.geometry,r.transform.transform,r,w,q,(J,E,L,Q,M)=>{0<=J&&(null==v||v(r.rayBegin,r.rayEnd,J))&&(L=new h.LodTarget(p.layerUid,p.graphicUid(g),D,L,x,u),(null==r.results.min.drapedLayerOrder||M>=r.results.min.drapedLayerOrder)&&(null==r.results.min.dist||J<r.results.min.dist)&&r.results.min.set(d.IntersectorType.LOD,L,J,E,r.transform.transform,M),r.options.store!==d.StoreResults.MIN&&(null==r.results.max.drapedLayerOrder||M>=r.results.max.drapedLayerOrder)&&(null==r.results.max.dist||
J>r.results.max.dist)&&r.results.max.set(d.IntersectorType.LOD,L,J,E,r.transform.transform,M),r.options.store===d.StoreResults.ALL&&(Q=n.newIntersectorResult(r.results.min.ray),Q.set(d.IntersectorType.LOD,L,J,E,r.transform.transform,M),r.results.all.push(Q)))})}}}a.LodComponentData=z;a.createLodComponentRenderGeometry=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(a,b){class c{constructor(){this.id=
b.generateUID()}}a.ContentObject=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../chunks/vec42 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../../geometry/support/ray ../../../ViewingMode ./IntersectorInterfaces ./IntersectorTarget ./intersectorUtils ./verticalOffsetUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z){class r{constructor(x){this.options=new l.IntersectorOptions;this._results=new v;this.transform=new z.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=k.create();this._rayEnd=e.create();this._rayBeginTransformed=e.create();this._rayEndTransformed=e.create();this.viewingMode=null==x?h.ViewingMode.Global:x}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(x,
u,D){this.resetWithRay(k.fromPoints(x,u,this._ray),D)}resetWithRay(x,u){this.camera=u;x!==this._ray&&k.copy(x,this._ray);0!==this.options.verticalOffset?this.viewingMode===h.ViewingMode.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;f.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)}intersect(x=null,u,D,J,E){this.point=u;this.filterPredicate=J;this.tolerance=null==D?1E-5:D;u=z.getVerticalOffsetObject3D(this.verticalOffset);
if(x&&0<x.length){const L=E?Q=>{E(Q)&&this.intersectObject(Q)}:Q=>{this.intersectObject(Q)};for(const Q of x)x=Q.getSpatialQueryAccelerator?.(),null!=x?(null!=u?x.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,L,u):x.forEachAlongRay(this._ray.origin,this._ray.direction,L),this.options.selectionMode&&this.options.hud&&x.forEachDegenerateObject(L)):Q.objects.forAll(M=>L(M))}this.sortResults()}intersectObject(x){const u=x.geometries;if(u){var D=x.effectiveTransformation,J=z.getVerticalOffsetObject3D(this.verticalOffset);
for(const E of u){if(!E.visible)continue;const {material:L,id:Q}=E;if(!L.visible)continue;this.transform.setAndInvalidateLazyTransforms(D,E.transformation);f.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);f.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const M=this.transform.transform;null!=J&&(J.objectTransform=this.transform);L.intersect(E,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(C,U,y,B,H,N)=>{if(0<=
C&&(null==this.filterPredicate||this.filterPredicate(this._ray.origin,this._rayEnd,C))){var K=B?this._results.hud:this._results,X=B?V=>{const da=new m.HudTarget(x,Q,y,N);V.set(l.IntersectorType.HUD,da,C,U,c.IDENTITY,H)}:V=>V.set(l.IntersectorType.OBJECT,{object:x,geometryId:Q,triangleNr:y},C,U,M,H);(null==K.min.drapedLayerOrder||H>=K.min.drapedLayerOrder)&&(null==K.min.dist||C<K.min.dist)&&X(K.min);this.options.store!==l.StoreResults.MIN&&(null==K.max.drapedLayerOrder||H<K.max.drapedLayerOrder)&&
(null==K.max.dist||C>K.max.dist)&&X(K.max);this.options.store===l.StoreResults.ALL&&(B?(B=new q(this._ray),X(B),this._results.hud.all.push(B)):(B=new w(this._ray),X(B),this._results.all.push(B)))}})}}}sortResults(x=this._results.all){x.sort((u,D)=>u.dist!==D.dist?(u.dist??0)-(D.dist??0):u.drapedLayerOrder!==D.drapedLayerOrder?(D.drapedLayerOrder??-Number.MAX_VALUE)-(u.drapedLayerOrder??-Number.MAX_VALUE):(D.drapedLayerGraphicOrder??-Number.MAX_VALUE)-(u.drapedLayerGraphicOrder??-Number.MAX_VALUE))}}
class v{constructor(){this.min=new w(k.create());this.max=new w(k.create());this.hud={min:new q(k.create()),max:new q(k.create()),all:[]};this.ground=new w(k.create());this.all=[]}init(x){this.min.init(x);this.max.init(x);this.ground.init(x);this.all.length=0;this.hud.min.init(x);this.hud.max.init(x);this.hud.all.length=0}}class w{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?(f.scale(g,this.ray.direction,this.dist),f.length(g)):null}getIntersectionPoint(x){if(!t.isValidIntersectorResult(this))return!1;
f.scale(g,this.ray.direction,this.dist);f.add(x,this.ray.origin,g);return!0}getTransformedNormal(x){f.copy(p,this.normal);p[3]=0;n.transformMat4(p,p,this.transformation);f.copy(x,p);return f.normalize(x,x)}constructor(x){this.intersector=l.IntersectorType.OBJECT;this.normal=e.create();this.transformation=c.create();this._ray=k.create();this.init(x)}init(x){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=null;this.intersector=l.IntersectorType.OBJECT;k.copy(x,this._ray)}set(x,
u,D,J,E,L,Q){this.intersector=x;this.dist=D;f.copy(this.normal,J??e.UNIT_Z);b.copy(this.transformation,E??c.IDENTITY);this.target=u;this.drapedLayerOrder=L;this.drapedLayerGraphicOrder=Q}copy(x){k.copy(x.ray,this._ray);this.intersector=x.intersector;this.dist=x.dist;this.target=x.target;this.drapedLayerOrder=x.drapedLayerOrder;this.drapedLayerGraphicOrder=x.drapedLayerGraphicOrder;f.copy(this.normal,x.normal);b.copy(this.transformation,x.transformation)}}class q extends w{constructor(){super(...arguments);
this.intersector=l.IntersectorType.HUD}}const g=e.create(),p=d.create();a.defaultTolerance=1E-5;a.newIntersector=function(x){return new r(x)};a.newIntersectorResult=function(x){return new w(x)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/IntersectorTarget":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec3f64"],function(a,b){class c{constructor(k,h,l){this.object=k;this.geometryId=h;this.triangleNr=l}}class f extends c{constructor(k,
h,l,m){super(k,h,l);this.center=null!=m?b.clone(m):null}}class e extends f{}class n{constructor(k){this.layerUid=k}}class d extends n{constructor(k,h){super(k);this.graphicUid=h}}a.Graphic3DTarget=d;a.HudTarget=f;a.LayerTarget=n;a.ObjectTarget=c;a.ValidHudTarget=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../chunks/boundedPlane",
"./IntersectorInterfaces"],function(a,b,c,f,e){function n(k){return null!=k?.dist}const d=c.create();a.isHudIntersectorResult=function(k){return n(k)&&k.intersector===e.IntersectorType.HUD&&!!k.target&&"center"in k.target&&null!=k.target.center};a.isObjectIntersectorResult=function(k){return n(k)&&k.intersector===e.IntersectorType.OBJECT&&!!k.target};a.isValidIntersectorResult=n;a.sliceFilterPredicate=function(k){return(h,l,m)=>{b.lerp(d,h,l,m);return!f.extrusionContainsPoint(k,d)}};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ../core/libs/gl-matrix-2/math/mat4 ../core/libs/gl-matrix-2/factories/mat4f64 ./vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ../geometry/support/aaBoundingRect ../geometry/support/Axis ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w){function q(ja=F){return{plane:z.create(ja.plane),origin:h.clone(ja.origin),basis1:h.clone(ja.basis1),basis2:h.clone(ja.basis2)}}function g(ja,oa,qa){const sa=P.get();sa.origin=ja;sa.basis1=oa;sa.basis2=qa;sa.plane=z.wrap(0,0,0,0);D(sa);return sa}function p(ja,oa=q()){return u(ja.origin,ja.basis1,ja.basis2,oa)}function x(ja,oa){k.copy(oa.origin,ja.origin);k.copy(oa.basis1,ja.basis1);k.copy(oa.basis2,ja.basis2);z.copy(oa.plane,ja.plane)}function u(ja,oa,qa,
sa=q()){k.copy(sa.origin,ja);k.copy(sa.basis1,oa);k.copy(sa.basis2,qa);D(sa);1E-6<Math.abs(k.dot(sa.basis1,sa.basis2)/(k.length(sa.basis1)*k.length(sa.basis2)))&&ia().warn("fromValues()","Provided basis vectors are not perpendicular");1E-6<Math.abs(k.dot(sa.basis1,G(sa)))&&ia().warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-k.dot(G(sa),sa.origin)-sa.plane[3])&&ia().warn("fromValues()","Plane offset is not consistent with plane origin");return sa}function D(ja){z.fromVectorsAndPoint(ja.basis2,
ja.basis1,ja.origin,ja.plane)}function J(ja,oa,qa){ja!==qa&&p(ja,qa);ja=k.scale(w.sv3d.get(),G(ja),oa);k.add(qa.origin,qa.origin,ja);qa.plane[3]-=oa;return qa}function E(ja,oa,qa){Q(oa,qa);J(qa,fa(ja,ja.origin),qa);return qa}function L(ja,oa){const qa=ja.basis1[0],sa=ja.basis2[1],[ua,ya]=ja.origin;return l.fromValues(ua-qa,ya-sa,ua+qa,ya+sa,oa)}function Q(ja,oa=q()){const qa=(ja[2]-ja[0])/2,sa=(ja[3]-ja[1])/2;k.set(oa.origin,ja[0]+qa,ja[1]+sa,0);k.set(oa.basis1,qa,0,0);k.set(oa.basis2,0,sa,0);z.fromValues(0,
0,1,0,oa.plane);return oa}function M(ja,oa,qa){return z.intersectRay(ja.plane,oa,qa)?ca(ja,qa):!1}function C(ja,oa,qa){if(M(ja,oa,qa))return qa;ja=U(ja,oa,w.sv3d.get());k.add(qa,oa.origin,k.scale(w.sv3d.get(),oa.direction,k.distance(oa.origin,ja)/k.length(oa.direction)));return qa}function U(ja,oa,qa){const sa=O.get();var ua=O.get();R(ja,oa,sa,ua);ua=Number.POSITIVE_INFINITY;for(const wa of W){var ya=Y(ja,wa,ba.get());const Aa=w.sv3d.get();z.intersectLineSegment(sa,ya,Aa)&&(ya=k.direction(w.sv3d.get(),
oa.origin,Aa),ya=Math.abs(f.acosClamped(k.dot(oa.direction,ya))),ya<ua&&(ua=ya,k.copy(qa,Aa)))}return ua===Number.POSITIVE_INFINITY?B(ja,oa,qa):qa}function y(ja,oa){return(oa-ja)/oa}function B(ja,oa,qa){if(M(ja,oa,qa))return qa;const sa=O.get(),ua=O.get();R(ja,oa,sa,ua);let ya=Number.POSITIVE_INFINITY;for(const Aa of W){var wa=Y(ja,Aa,ba.get());const Ca=w.sv3d.get();z.intersectLineSegmentClamp(sa,wa,Ca)&&(wa=r.distance2(oa,Ca),z.isPointInside(ua,Ca)&&wa<ya&&(ya=wa,k.copy(qa,Ca)))}K(ja,oa.origin)<
ya&&H(ja,oa.origin,qa);return qa}function H(ja,oa,qa){var sa=z.projectPoint(ja.plane,oa,w.sv3d.get());oa=t.projectPointClamp(pa(ja,ja.basis1),sa,-1,1,w.sv3d.get());sa=t.projectPointClamp(pa(ja,ja.basis2),sa,-1,1,w.sv3d.get());k.subtract(qa,k.add(w.sv3d.get(),oa,sa),ja.origin);return qa}function N(ja,oa,qa){const {origin:sa,basis1:ua,basis2:ya}=ja,wa=k.subtract(w.sv3d.get(),oa,sa);oa=v.projectPointSignedLength(ua,wa);const Aa=v.projectPointSignedLength(ya,wa);ja=v.projectPointSignedLength(G(ja),wa);
return k.set(qa,oa,Aa,ja)}function K(ja,oa){oa=N(ja,oa,w.sv3d.get());const {basis1:qa,basis2:sa}=ja;ja=k.length(qa);var ua=k.length(sa);ja=Math.max(Math.abs(oa[0])-ja,0);ua=Math.max(Math.abs(oa[1])-ua,0);oa=oa[2];return ja*ja+ua*ua+oa*oa}function X(ja,oa){return Math.sqrt(K(ja,oa))}function V(ja,oa){let qa=Number.NEGATIVE_INFINITY;for(const ua of W){var sa=Y(ja,ua,ba.get());sa=t.distance2(sa,oa);sa>qa&&(qa=sa)}return Math.sqrt(qa)}function da(ja,oa){return z.isPointInside(ja.plane,oa)&&ca(ja,oa)}
function aa(ja,oa,qa,sa){switch(qa){case m.Axis.X:k.copy(sa,ja.basis1);k.normalize(sa,sa);break;case m.Axis.Y:k.copy(sa,ja.basis2);k.normalize(sa,sa);break;case m.Axis.Z:k.copy(sa,G(ja))}return sa}function fa(ja,oa){const qa=-ja.plane[3];return v.projectPointSignedLength(G(ja),oa)-qa}function Z(ja,oa,qa,sa){const ua=fa(ja,oa);ja=k.scale(na,G(ja),qa-ua);k.add(sa,oa,ja);return sa}function ma(ja,oa){return k.exactEquals(ja.basis1,oa.basis1)&&k.exactEquals(ja.basis2,oa.basis2)&&k.exactEquals(ja.origin,
oa.origin)}function S(ja,oa,qa){ja!==qa&&p(ja,qa);n.invert(ea,oa);n.transpose(ea,ea);k.transformMat4(qa.basis1,ja.basis1,ea);k.transformMat4(qa.basis2,ja.basis2,ea);k.transformMat4(z.getNormal(qa.plane),z.getNormal(ja.plane),ea);k.transformMat4(qa.origin,ja.origin,oa);z.setOffsetFromPoint(qa.plane,qa.plane,qa.origin);return qa}function ha(ja,oa,qa,sa){ja!==sa&&p(ja,sa);n.fromRotation(ra,oa,qa);k.transformMat4(sa.basis1,ja.basis1,ra);k.transformMat4(sa.basis2,ja.basis2,ra);D(sa);return sa}function G(ja){return z.getNormal(ja.plane)}
function ca(ja,oa){const qa=k.subtract(w.sv3d.get(),oa,ja.origin);oa=k.squaredLength(ja.basis1);const sa=k.squaredLength(ja.basis2),ua=k.dot(ja.basis1,qa);ja=k.dot(ja.basis2,qa);return 0>-ua-oa&&0>ua-oa&&0>-ja-sa&&0>ja-sa}function pa(ja,oa){const qa=ba.get();k.copy(qa.origin,ja.origin);k.copy(qa.vector,oa);return qa}function Y(ja,oa,qa){const {basis1:sa,basis2:ua,origin:ya}=ja;ja=k.scale(w.sv3d.get(),sa,oa.origin[0]);const wa=k.scale(w.sv3d.get(),ua,oa.origin[1]);k.add(qa.origin,ja,wa);k.add(qa.origin,
qa.origin,ya);ja=k.scale(w.sv3d.get(),sa,oa.direction[0]);oa=k.scale(w.sv3d.get(),ua,oa.direction[1]);k.scale(qa.vector,k.add(ja,ja,oa),2);return qa}function R(ja,oa,qa,sa){ja=G(ja);z.fromVectorsAndPoint(ja,oa.direction,oa.origin,qa);z.fromVectorsAndPoint(z.getNormal(qa),ja,oa.origin,sa)}const ia=()=>c.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class A{constructor(){this.plane=z.create();this.origin=h.create();this.basis1=h.create();this.basis2=h.create()}}b=A;const F={plane:z.create(),
origin:h.fromValues(0,0,0),basis1:h.fromValues(1,0,0),basis2:h.fromValues(0,1,0)},O=new e.ObjectStack(z.create),ba=new e.ObjectStack(t.create),na=h.create(),P=new e.ObjectStack(()=>q()),W=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],ea=d.create(),ra=d.create();e=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:b,altitudeAt:fa,axisAt:aa,cameraFrustumCoverage:y,closestPoint:B,closestPointOnSilhouette:U,
copy:p,copyWithoutVerify:x,create:q,distance:X,distance2:K,distanceToSilhouette:V,elevate:J,equals:ma,extrusionContainsPoint:da,fromAABoundingRect:Q,fromValues:u,getExtent:L,intersectRay:M,intersectRayClosestSilhouette:C,normal:G,projectPoint:H,projectPointLocal:N,rotate:ha,setAltitudeAt:Z,setExtent:E,transform:S,up:F,updateUnboundedPlane:D,wrap:g},Symbol.toStringTag,{value:"Module"}));a.BoundedPlaneClass=b;a.altitudeAt=fa;a.axisAt=aa;a.boundedPlane=e;a.cameraFrustumCoverage=y;a.closestPoint=B;a.closestPointOnSilhouette=
U;a.copy=p;a.copyWithoutVerify=x;a.create=q;a.distance=X;a.distance2=K;a.distanceToSilhouette=V;a.elevate=J;a.equals=ma;a.extrusionContainsPoint=da;a.fromAABoundingRect=Q;a.fromValues=u;a.getExtent=L;a.intersectRay=M;a.intersectRayClosestSilhouette=C;a.normal=G;a.projectPoint=H;a.projectPointLocal=N;a.rotate=ha;a.setAltitudeAt=Z;a.setExtent=E;a.transform=S;a.up=F;a.updateUnboundedPlane=D;a.wrap=g})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./vectorStacks".split(" "),
function(a,b,c,f,e,n){function d(r){return r?{origin:e.clone(r.origin),vector:e.clone(r.vector)}:{origin:e.create(),vector:e.create()}}function k(r,v){const w=z.get();w.origin=r;w.vector=v;return w}function h(r,v,w=d()){f.copy(w.origin,r);f.copy(w.vector,v);return w}function l(r,v,w,q,g){const {vector:p,origin:x}=r;v=f.subtract(n.sv3d.get(),v,x);v=f.dot(p,v)/f.squaredLength(p);f.scale(g,p,b.clamp(v,w,q));return f.add(g,g,r.origin)}function m(r,v,w,q){const g=r.origin;var p=f.add(n.sv3d.get(),g,r.vector);
r=v.origin;var x=f.add(n.sv3d.get(),r,v.vector),u=n.sv3d.get();v=n.sv3d.get();u[0]=g[0]-r[0];u[1]=g[1]-r[1];u[2]=g[2]-r[2];v[0]=x[0]-r[0];v[1]=x[1]-r[1];v[2]=x[2]-r[2];if(1E-6>Math.abs(v[0])&&1E-6>Math.abs(v[1])&&1E-6>Math.abs(v[2]))return!1;x=n.sv3d.get();x[0]=p[0]-g[0];x[1]=p[1]-g[1];x[2]=p[2]-g[2];if(1E-6>Math.abs(x[0])&&1E-6>Math.abs(x[1])&&1E-6>Math.abs(x[2]))return!1;p=u[0]*v[0]+u[1]*v[1]+u[2]*v[2];var D=v[0]*x[0]+v[1]*x[1]+v[2]*x[2];const J=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],E=(x[0]*x[0]+x[1]*x[1]+
x[2]*x[2])*J-D*D;if(1E-6>Math.abs(E))return!1;u=(p*D-(u[0]*x[0]+u[1]*x[1]+u[2]*x[2])*J)/E;p=(p+D*u)/J;w&&(u=b.clamp(u,0,1),p=b.clamp(p,0,1));w=n.sv3d.get();D=n.sv3d.get();w[0]=g[0]+u*x[0];w[1]=g[1]+u*x[1];w[2]=g[2]+u*x[2];D[0]=r[0]+p*v[0];D[1]=r[1]+p*v[1];D[2]=r[2]+p*v[2];q.tA=u;q.tB=p;q.pA=w;q.pB=D;q.distance2=f.squaredDistance(w,D);return!0}const t={tA:0,tB:0,pA:e.create(),pB:e.create(),distance2:0},z=new c.ObjectStack(()=>d());a.closestLineSegmentPoint=function(r,v,w){return m(r,v,!0,t)?(f.copy(w,
t.pA),!0):!1};a.closestRayDistance2=function(r,v){if(m(r,k(v.origin,v.direction),!1,t)){const {tA:w,pB:q,distance2:g}=t;if(0<=w&&1>=w)return g;if(0>w)return f.squaredDistance(r.origin,q);if(1<w)return f.squaredDistance(f.add(n.sv3d.get(),r.origin,r.vector),q)}return null};a.copy=function(r,v=d()){return h(r.origin,r.vector,v)};a.create=d;a.distance2=function(r,v){v=f.subtract(n.sv3d.get(),v,r.origin);var w=f.dot(r.vector,v);const q=f.dot(r.vector,r.vector);w=b.clamp(w/q,0,1);r=f.subtract(n.sv3d.get(),
f.scale(n.sv3d.get(),r.vector,w),v);return f.dot(r,r)};a.fromPoints=function(r,v,w=d()){f.copy(w.origin,r);f.subtract(w.vector,v,r);return w};a.fromValues=h;a.pointAt=function(r,v,w){return f.add(w,r.origin,f.scale(w,r.vector,v))};a.projectPoint=function(r,v,w){return l(r,v,0,1,w)};a.projectPointClamp=l;a.wrap=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../core/libs/gl-matrix-2/math/mat3 ../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../chunks/sphere ../../../ViewingMode ../../support/orientedBoundingBox".split(" "),
function(a,b,c,f,e,n,d,k,h,l){class m{constructor(){this._transform=e.create();this._transformInverse=new t({value:this._transform},f.invert,e.create);this._transformInverseTranspose=new t(this._transformInverse,f.transpose,e.create);this._transformTranspose=new t({value:this._transform},f.transpose,e.create);this._transformInverseRotation=new t({value:this._transform},b.normalFromMat4Legacy,c.create)}_invalidateLazyTransforms(){this._transformInverse.invalidate();this._transformInverseTranspose.invalidate();
this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(E){f.copy(this._transform,E)}multiplyTransform(E){f.multiply(this._transform,this._transform,E)}set(E){f.copy(this._transform,
E);this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(E,L){this.setTransformMatrix(E);this.multiplyTransform(L);this._invalidateLazyTransforms()}}class t{constructor(E,L,Q){this._original=E;this._update=L;this._dirty=!0;this._transform=Q()}invalidate(){this._dirty=!0}get value(){this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1);return this._transform}}class z{constructor(E=0){this.offset=E;this.tmpVertex=d.create()}applyToVertex(E,L,Q){E=n.set(p,E,L,Q);
L=n.add(x,E,this.localOrigin);Q=this.offset/n.length(L);n.scaleAndAdd(this.tmpVertex,E,L,Q);return this.tmpVertex}applyToAabb(E){var L=u;const Q=D,M=J;for(var C=0;3>C;++C)L[C]=E[0+C]+this.localOrigin[C],Q[C]=E[3+C]+this.localOrigin[C],M[C]=L[C];C=this.applyToVertex(L[0],L[1],L[2]);for(var U=0;3>U;++U)E[U]=C[U],E[U+3]=C[U];C=B=>{B=this.applyToVertex(B[0],B[1],B[2]);for(let H=0;3>H;++H)E[H]=Math.min(E[H],B[H]),E[H+3]=Math.max(E[H+3],B[H])};for(U=1;8>U;++U){for(var y=0;3>y;++y)M[y]=0===(U&1<<y)?L[y]:
Q[y];C(M)}U=0;for(y=0;3>y;++y)0>L[y]*Q[y]&&(U|=1<<y);if(0!==U&&7!==U)for(y=0;8>y;++y)if(0===(U&y)){for(let B=0;3>B;++B)M[B]=0!==(U&1<<B)?0:0!==(y&1<<B)?L[B]:Q[B];C(M)}for(L=0;3>L;++L)E[L]-=this.localOrigin[L],E[L+3]-=this.localOrigin[L];return E}}class r{constructor(E=0){this._offset=this._totalOffset=this.componentLocalOriginLength=0;this._tmpVertex=d.create();this._tmpMbs=k.create();this._tmpObb=new l.Obb;this._resetOffset(E)}_resetOffset(E){this._totalOffset=this._offset=E}set offset(E){this._resetOffset(E)}get offset(){return this._offset}set componentOffset(E){this._totalOffset=
this._offset+E}set localOrigin(E){this.componentLocalOriginLength=n.length(E)}applyToVertex(E,L,Q){const M=n.set(p,E,L,Q);E=n.set(x,E,L,Q+this.componentLocalOriginLength);L=this._totalOffset/n.length(E);n.scaleAndAdd(this._tmpVertex,M,E,L);return this._tmpVertex}applyToAabb(E){var L=this.componentLocalOriginLength;const Q=E[0],M=E[1],C=E[2]+L,U=E[3],y=E[4];L=E[5]+L;var B=Math.abs(Q),H=Math.abs(M),N=Math.abs(C),K=Math.abs(U),X=Math.abs(y),V=Math.abs(L),da=.5*(1+Math.sign(Q*U))*Math.min(B,K),aa=.5*
(1+Math.sign(M*y))*Math.min(H,X);const fa=.5*(1+Math.sign(C*L))*Math.min(N,V);var Z=Math.max(B,K),ma=Math.max(H,X),S=Math.max(N,V);da=Math.sqrt(da*da+aa*aa+fa*fa);B=Math.sign(B+Q);H=Math.sign(H+M);N=Math.sign(N+C);K=Math.sign(K+U);X=Math.sign(X+y);V=Math.sign(V+L);aa=this._totalOffset;if(da<aa)return E[0]-=(1-B)*aa,E[1]-=(1-H)*aa,E[2]-=(1-N)*aa,E[3]+=K*aa,E[4]+=X*aa,E[5]+=V*aa,E;Z=aa/Math.sqrt(Z*Z+ma*ma+S*S);ma=aa/da;S=ma-Z;da=-S;E[0]+=Q*(B*da+ma);E[1]+=M*(H*da+ma);E[2]+=C*(N*da+ma);E[3]+=U*(K*S+
Z);E[4]+=y*(X*S+Z);E[5]+=L*(V*S+Z);return E}applyToMbs(E){const L=n.length(k.getCenter(E)),Q=this._totalOffset/L;n.scaleAndAdd(k.getCenter(this._tmpMbs),k.getCenter(E),k.getCenter(E),Q);this._tmpMbs[3]=E[3]+E[3]*this._totalOffset/L;return this._tmpMbs}applyToObb(E){l.computeOffsetObb(E,this._totalOffset,this._totalOffset,h.ViewingMode.Global,this._tmpObb);return this._tmpObb}}class v{constructor(E=0){this.offset=E;this.sphere=k.create();this.tmpVertex=d.create()}applyToVertex(E,L,Q){var M=this.objectTransform.transform;
E=n.set(p,E,L,Q);M=n.transformMat4(E,E,M);E=this.offset/n.length(M);n.scaleAndAdd(M,M,M,E);n.transformMat4(this.tmpVertex,M,this.objectTransform.inverse);return this.tmpVertex}applyToMinMax(E,L){const Q=this.offset/n.length(E);n.scaleAndAdd(E,E,E,Q);E=this.offset/n.length(L);n.scaleAndAdd(L,L,L,E)}applyToAabb(E){var L=this.offset/Math.sqrt(E[0]*E[0]+E[1]*E[1]+E[2]*E[2]);E[0]+=E[0]*L;E[1]+=E[1]*L;E[2]+=E[2]*L;L=this.offset/Math.sqrt(E[3]*E[3]+E[4]*E[4]+E[5]*E[5]);E[3]+=E[3]*L;E[4]+=E[4]*L;E[5]+=E[5]*
L;return E}applyToBoundingSphere(E){const L=n.length(k.getCenter(E)),Q=this.offset/L;n.scaleAndAdd(k.getCenter(this.sphere),k.getCenter(E),k.getCenter(E),Q);this.sphere[3]=E[3]+E[3]*this.offset/L;return this.sphere}}const w=new v,q=new r,g=new z,p=d.create(),x=d.create(),u=d.create(),D=d.create(),J=d.create();a.I3SVerticalOffsetGlobalViewingMode=r;a.IntersectorTransform=m;a.Object3DVerticalOffsetGlobalViewingMode=v;a.TerrainVerticalOffsetGlobalViewingMode=z;a.getVerticalOffsetI3S=function(E){return null!=
E?(q.offset=E,q):null};a.getVerticalOffsetObject3D=function(E){return null!=E?(w.offset=E,w):null};a.getVerticalOffsetTerrain=function(E){return null!=E?(g.offset=E,g):null};a.terrainId="terrain";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/orientedBoundingBox":function(){define("exports ../../../core/libs/gl-matrix-2/math/mat3 ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../core/libs/gl-matrix-2/math/quat ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/ellipsoidUtils ../../../geometry/spatialReferenceEllipsoidUtils ../../../geometry/projection/computeTranslationToOriginAndRotation ../../../geometry/projection/projectBuffer ../../../geometry/projection/projectors ../../../geometry/support/plane ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/vectorStacks ../../ViewingMode ./dito ../webgl-engine/lib/Attribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u){function D(R,ia=new Q){x.computeOBB(R,ia);return ia}function J(R,ia,A,F,O){var ba=ia.getQuaternion(C);ba=b.fromQuat(ma,ba);ia=ia.getHalfSize(Z);for(let P=0;8>P;++P){for(var na=0;3>na;++na)da[na]=ia[na]*(0!==(P&1<<na)?-1:1);for(na=0;3>na;++na){let W=A[na];for(let ea=0;3>ea;++ea)W+=da[ea]*ba[3*ea+na];X[3*P+na]=W}}r.projectBuffer(X,R,0,X,F,0,8);D(V,O)}function E(R,ia,A,F,O=t.getSphericalPCPF(A),ba=v.getProjector(A,O)){R.getCorners(ha);R.getCenter(da);
da[2]+=F;z.computeTranslationToOriginAndRotation(A,da,S,O);ia.setCenter(S[12],S[13],S[14]);A=2*Math.sqrt(1+S[0]+S[5]+S[10]);M[0]=(S[6]-S[9])/A;M[1]=(S[8]-S[2])/A;M[2]=(S[1]-S[4])/A;M[3]=.25*A;R=R.getQuaternion(C);ia.quaternion=e.multiply(M,M,R);e.conjugate(M,M);d.set(ca,0,0,0);R=ia.getCenter(fa);for(const na of ha)na[2]+=F,ba(na,0,na,0),d.sub(G,na,R),d.transformQuat(G,G,M),d.abs(G,G),d.max(ca,ca,G);ia.halfSize=ca}function L(R,ia,A,F,O=t.getSphericalPCPF(A)){const ba=m.getReferenceEllipsoid(A),na=
1+Math.max(0,F)/(ba.radius+R.centerZ);R.getCenter(da);da[2]+=F;r.projectBuffer(da,A,0,da,O,0);ia.center=da;A=R.getQuaternion(C);ia.quaternion=A;e.conjugate(M,A);d.set(G,0,0,1);d.transformQuat(G,G,M);R=R.getHalfSize(Z);d.set(G,R[0]*Math.abs(G[0]),R[1]*Math.abs(G[1]),R[2]*Math.abs(G[2]));d.scale(G,G,ba.inverseFlattening);d.add(G,R,G);ia.halfSize=d.scale(G,G,na)}class Q{constructor(R=k.ZEROS,ia=Y,A=n.IDENTITY){this._data=[R[0],R[1],R[2],ia[0],ia[1],ia[2],A[0],A[1],A[2],A[3]]}clone(){const R=new Q;R._data=
this._data.slice();return R}invalidate(){this._data[3]=-1}get isValid(){return 0<=this._data[3]}static fromData(R){const ia=new Q;ia._data=R.slice();return ia}static fromJSON(R){return new Q(R.center,R.halfSize,R.quaternion)}copy(R){this._data=R.data.slice()}get center(){return d.set(g.sv3d.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(R){R[0]=this._data[0];R[1]=this._data[1];R[2]=
this._data[2];return R}set center(R){this._data[0]=R[0];this._data[1]=R[1];this._data[2]=R[2]}setCenter(R,ia,A){this._data[0]=R;this._data[1]=ia;this._data[2]=A}get halfSize(){return d.set(g.sv3d.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(R){R[0]=this._data[3];R[1]=this._data[4];R[2]=this._data[5];return R}set halfSize(R){this._data[3]=R[0];this._data[4]=R[1];this._data[5]=
R[2]}get quaternion(){return e.set(g.sq4d.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(R){R[0]=this._data[6];R[1]=this._data[7];R[2]=this._data[8];R[3]=this._data[9];return R}set quaternion(R){this._data[6]=R[0];this._data[7]=R[1];this._data[8]=R[2];this._data[9]=R[3]}get data(){return this._data}getCorners(R){const ia=M,A=this._data;ia[0]=A[6];ia[1]=A[7];ia[2]=A[8];ia[3]=A[9];for(let F=0;8>F;++F){const O=R[F];O[0]=(F&1?-1:1)*A[3];O[1]=(F&2?-1:1)*A[4];O[2]=(F&4?-1:
1)*A[5];d.transformQuat(O,O,ia);O[0]+=A[0];O[1]+=A[1];O[2]+=A[2]}}doesIntersectFrustumConservativeApproximation(R){return 0>=this.intersectPlane(R[0])&&0>=this.intersectPlane(R[1])&&0>=this.intersectPlane(R[2])&&0>=this.intersectPlane(R[3])&&0>=this.intersectPlane(R[4])&&0>=this.intersectPlane(R[5])}get radius(){const R=this._data[3],ia=this._data[4],A=this._data[5];return Math.sqrt(R*R+ia*ia+A*A)}intersectSphere(R){y[0]=this._data[0]-R[0];y[1]=this._data[1]-R[1];y[2]=this._data[2]-R[2];const ia=
this.getQuaternion(C);e.conjugate(M,ia);d.transformQuat(y,y,M);d.abs(y,y);B[0]=Math.min(y[0],this._data[3]);B[1]=Math.min(y[1],this._data[4]);B[2]=Math.min(y[2],this._data[5]);return d.sqrDist(B,y)<R[3]*R[3]}intersectSphereWithMBS(R,ia=this.radius){const A=this._data;y[0]=A[0]-R[0];y[1]=A[1]-R[1];y[2]=A[2]-R[2];R=R[3];const F=d.sqrLen(y);ia=R+ia;if(F>ia*ia)return!1;M[0]=-A[6];M[1]=-A[7];M[2]=-A[8];M[3]=A[9];d.transformQuat(y,y,M);d.abs(y,y);B[0]=Math.min(y[0],A[3]);B[1]=Math.min(y[1],A[4]);B[2]=Math.min(y[2],
A[5]);return d.sqrDist(B,y)<R*R}intersectPlane(R){const ia=R[0]*this._data[0]+R[1]*this._data[1]+R[2]*this._data[2]+R[3];R=this.projectedRadius(w.getNormal(R));return ia>R?1:ia<-R?-1:0}intersectRay(R,ia,A=0){var F=this._data,O=M;O[0]=-F[6];O[1]=-F[7];O[2]=-F[8];O[3]=F[9];y[0]=R[0]-F[0];y[1]=R[1]-F[1];y[2]=R[2]-F[2];R=d.transformQuat(y,y,M);ia=d.transformQuat(B,ia,M);F=-Infinity;O=Infinity;const ba=this.getHalfSize(Z);for(let P=0;3>P;P++){var na=R[P];const W=ia[P],ea=ba[P]+A;if(1E-6<Math.abs(W)){const ra=
(ea-na)/W;na=(-ea-na)/W;F=Math.max(F,Math.min(ra,na));O=Math.min(O,Math.max(ra,na))}else if(na>ea||na<-ea)return!1}return F<=O}projectedArea(R,ia,A,F){var O=this.getQuaternion(C);e.conjugate(M,O);y[0]=R[0]-this._data[0];y[1]=R[1]-this._data[1];y[2]=R[2]-this._data[2];d.transformQuat(y,y,M);var ba=this.getHalfSize(Z),na=y[0]<-ba[0]?-1:y[0]>ba[0]?1:0,P=y[1]<-ba[1]?-1:y[1]>ba[1]?1:0;const W=y[2]<-ba[2]?-1:y[2]>ba[2]?1:0;R=Math.abs(na)+Math.abs(P)+Math.abs(W);if(0===R)return Infinity;R=1===R?4:6;na=6*
(na+3*P+9*W+13);b.fromQuat(ma,O);b.scale(ma,ma,ba);O=this.getCenter(aa);for(ba=0;ba<R;ba++)P=K[na+ba],d.set(y,((P&1)<<1)-1,(P&2)-1,((P&4)>>1)-1),d.transformMat3(y,y,ma),d.add(H,O,y),H[3]=1,h.transformMat4(H,H,ia),P=1/Math.max(1E-6,H[3]),N[2*ba]=H[0]*P,N[2*ba+1]=H[1]*P;ia=2*R-2;R=N[0]*(N[3]-N[ia+1])+N[ia]*(N[1]-N[ia-1]);for(O=2;O<ia;O+=2)R+=N[O]*(N[O+3]-N[O-1]);return Math.abs(R)*A*F*.125}projectedRadius(R){const ia=this.getQuaternion(C);e.conjugate(M,ia);d.transformQuat(y,R,M);return Math.abs(y[0]*
this._data[3])+Math.abs(y[1]*this._data[4])+Math.abs(y[2]*this._data[5])}minimumDistancePlane(R){const ia=R[0]*this._data[0]+R[1]*this._data[1]+R[2]*this._data[2]+R[3];R=this.projectedRadius(w.getNormal(R));return ia-R}maximumDistancePlane(R){const ia=R[0]*this._data[0]+R[1]*this._data[1]+R[2]*this._data[2]+R[3];R=this.projectedRadius(w.getNormal(R));return ia+R}toAaBoundingBox(R){var ia=this.getQuaternion(C),A=b.fromQuat(ma,ia);ia=this._data[3]*Math.abs(A[0])+this._data[4]*Math.abs(A[3])+this._data[5]*
Math.abs(A[6]);const F=this._data[3]*Math.abs(A[1])+this._data[4]*Math.abs(A[4])+this._data[5]*Math.abs(A[7]);A=this._data[3]*Math.abs(A[2])+this._data[4]*Math.abs(A[5])+this._data[5]*Math.abs(A[8]);R[0]=this._data[0]-ia;R[1]=this._data[1]-F;R[2]=this._data[2]-A;R[3]=this._data[0]+ia;R[4]=this._data[1]+F;R[5]=this._data[2]+A}transform(R,ia,A,F=0,O=t.getSphericalPCPF(A),ba=t.getSphericalPCPF(ia),na=v.getProjector(ia,ba)){A===O?ia.isGeographic?L(this,R,ia,F,ba):E(this,R,ia,F,ba,na):ia.isWGS84&&(A.isWebMercator||
q.isPlateCarree(A))?(this.getCenter(aa),aa[2]+=F,F=t.getSphericalPCPF(A),r.projectBuffer(aa,ia,0,aa,F,0),J(F,this,aa,A,R)):ia.isWebMercator&&q.isPlateCarree(A)?(this.getCenter(aa),aa[2]+=F,J(ia,this,aa,A,R)):(O=this.getCenter(aa),O[2]+=F,r.projectBuffer(O,ia,0,O,A,0),R.center=O,this!==R&&(R.quaternion=this.getQuaternion(C),R.halfSize=this.getHalfSize(Z)))}}const M=n.create(),C=n.create(),U=n.create(),y=k.create(),B=k.create(),H=l.create(),N=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],K=(()=>{const R=new Int8Array(162);
let ia=0;const A=F=>{for(let O=0;O<F.length;O++)R[ia+O]=F[O];ia+=6};A([6,2,3,1,5,4]);A([0,2,3,1,5,4]);A([0,2,3,7,5,4]);A([0,1,3,2,6,4]);A([0,1,3,2,0,0]);A([0,1,5,7,3,2]);A([0,1,3,7,6,4]);A([0,1,3,7,6,2]);A([0,1,5,7,6,2]);A([0,1,5,4,6,2]);A([0,1,5,4,0,0]);A([0,1,3,7,5,4]);A([0,2,6,4,0,0]);A([0,0,0,0,0,0]);A([1,3,7,5,0,0]);A([2,3,7,6,4,0]);A([2,3,7,6,0,0]);A([2,3,1,5,7,6]);A([0,1,5,7,6,2]);A([0,1,5,7,6,4]);A([0,1,3,7,6,4]);A([4,5,7,6,2,0]);A([4,5,7,6,0,0]);A([4,5,1,3,7,6]);A([0,2,3,7,5,4]);A([6,2,3,
7,5,4]);A([6,2,3,1,5,4]);return R})(),X=Array(24),V=new u.Vertices(X,3),da=k.create(),aa=k.create(),fa=k.create(),Z=k.create(),ma=c.create(),S=f.create(),ha=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],G=k.create(),ca=k.create(),pa=k.create(),Y=k.freeze(-1,-1,-1);a.Obb=Q;a.compute=D;a.computeOffsetObb=function(R,ia,A,F,O){var ba=R.getQuaternion(C);O.quaternion=ba;e.conjugate(M,ba);var na=R.getCenter(aa);ba=R.getHalfSize(Z);if(F===p.ViewingMode.Global){d.transformQuat(G,na,M);
d.abs(ca,G);d.min(pa,ca,ba);d.sub(pa,ca,pa);F=d.length(pa);d.add(pa,ca,ba);const P=d.length(pa);F<A?(O.center=na,d.set(G,A,A,A),O.halfSize=d.add(G,ba,G)):(ia=0<P?1+ia/P:1,na=0<F?1+A/F:1,A=(na+ia)/2,ia=(na-ia)/2,d.scale(pa,ca,ia),O.halfSize=d.scaleAndAdd(pa,pa,ba,A),d.scale(pa,ca,A),d.scaleAndAdd(pa,pa,ba,ia),d.sign(G,G),d.multiply(G,pa,G),R=R.getQuaternion(U),O.center=d.transformQuat(G,G,R))}else O.center=d.scaleAndAdd(G,na,k.UNIT_Z,(A+ia)/2),R=d.transformQuat(G,k.UNIT_Z,M),d.abs(R,R),O.halfSize=
d.scaleAndAdd(ca,ba,R,(A-ia)/2);return O};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/quat":function(){define("exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ../../../../chunks/vec32 ../../../../chunks/vec42".split(" "),function(a,b,c,f,e,n,d){function k(S){S[0]=0;S[1]=0;S[2]=0;S[3]=1;return S}function h(S,ha,G){G*=.5;const ca=Math.sin(G);S[0]=ca*ha[0];S[1]=ca*ha[1];S[2]=ca*ha[2];S[3]=Math.cos(G);return S}function l(S,
ha){const G=2*Math.acos(ha[3]),ca=Math.sin(G/2);ca>e.getEpsilon()?(S[0]=ha[0]/ca,S[1]=ha[1]/ca,S[2]=ha[2]/ca):(S[0]=1,S[1]=0,S[2]=0);return G}function m(S,ha,G){const ca=ha[0],pa=ha[1],Y=ha[2];ha=ha[3];const R=G[0],ia=G[1],A=G[2];G=G[3];S[0]=ca*G+ha*R+pa*A-Y*ia;S[1]=pa*G+ha*ia+Y*R-ca*A;S[2]=Y*G+ha*A+ca*ia-pa*R;S[3]=ha*G-ca*R-pa*ia-Y*A;return S}function t(S,ha,G){G*=.5;const ca=ha[0],pa=ha[1],Y=ha[2];ha=ha[3];const R=Math.sin(G);G=Math.cos(G);S[0]=ca*G+ha*R;S[1]=pa*G+Y*R;S[2]=Y*G-pa*R;S[3]=ha*G-ca*
R;return S}function z(S,ha,G){G*=.5;const ca=ha[0],pa=ha[1],Y=ha[2];ha=ha[3];const R=Math.sin(G);G=Math.cos(G);S[0]=ca*G-Y*R;S[1]=pa*G+ha*R;S[2]=Y*G+ca*R;S[3]=ha*G-pa*R;return S}function r(S,ha,G){G*=.5;const ca=ha[0],pa=ha[1],Y=ha[2];ha=ha[3];const R=Math.sin(G);G=Math.cos(G);S[0]=ca*G+pa*R;S[1]=pa*G-ca*R;S[2]=Y*G+ha*R;S[3]=ha*G-Y*R;return S}function v(S,ha){const G=ha[0],ca=ha[1];ha=ha[2];S[0]=G;S[1]=ca;S[2]=ha;S[3]=Math.sqrt(Math.abs(1-G*G-ca*ca-ha*ha));return S}function w(S,ha,G,ca){const pa=
ha[0],Y=ha[1],R=ha[2];ha=ha[3];let ia=G[0],A=G[1],F=G[2];G=G[3];let O;let ba;var na=pa*ia+Y*A+R*F+ha*G;0>na&&(na=-na,ia=-ia,A=-A,F=-F,G=-G);1-na>e.getEpsilon()?(O=Math.acos(na),ba=Math.sin(O),na=Math.sin((1-ca)*O)/ba,ca=Math.sin(ca*O)/ba):na=1-ca;S[0]=na*pa+ca*ia;S[1]=na*Y+ca*A;S[2]=na*R+ca*F;S[3]=na*ha+ca*G;return S}function q(S){var ha=e.RANDOM,G=ha();const ca=ha();ha=ha();const pa=Math.sqrt(1-G);G=Math.sqrt(G);S[0]=pa*Math.sin(2*Math.PI*ca);S[1]=pa*Math.cos(2*Math.PI*ca);S[2]=G*Math.sin(2*Math.PI*
ha);S[3]=G*Math.cos(2*Math.PI*ha);return S}function g(S,ha){const G=ha[0],ca=ha[1],pa=ha[2];ha=ha[3];var Y=G*G+ca*ca+pa*pa+ha*ha;Y=Y?1/Y:0;S[0]=-G*Y;S[1]=-ca*Y;S[2]=-pa*Y;S[3]=ha*Y;return S}function p(S,ha){S[0]=-ha[0];S[1]=-ha[1];S[2]=-ha[2];S[3]=ha[3];return S}function x(S,ha){var G=ha[0]+ha[4]+ha[8];if(0<G)G=Math.sqrt(G+1),S[3]=.5*G,G=.5/G,S[0]=(ha[5]-ha[7])*G,S[1]=(ha[6]-ha[2])*G,S[2]=(ha[1]-ha[3])*G;else{let ca=0;ha[4]>ha[0]&&(ca=1);ha[8]>ha[3*ca+ca]&&(ca=2);const pa=(ca+1)%3,Y=(ca+2)%3;G=Math.sqrt(ha[3*
ca+ca]-ha[3*pa+pa]-ha[3*Y+Y]+1);S[ca]=.5*G;G=.5/G;S[3]=(ha[3*pa+Y]-ha[3*Y+pa])*G;S[pa]=(ha[3*pa+ca]+ha[3*ca+pa])*G;S[Y]=(ha[3*Y+ca]+ha[3*ca+Y])*G}return S}function u(S,ha,G,ca){var pa=.5*Math.PI/180;ha*=pa;G*=pa;ca*=pa;pa=Math.sin(ha);ha=Math.cos(ha);const Y=Math.sin(G);G=Math.cos(G);const R=Math.sin(ca);ca=Math.cos(ca);S[0]=pa*G*ca-ha*Y*R;S[1]=ha*Y*ca+pa*G*R;S[2]=ha*G*R-pa*Y*ca;S[3]=ha*G*ca+pa*Y*R;return S}function D(S){return"quat("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+")"}function J(S,ha,G){const ca=
n.dot(ha,G);if(-.999999>ca)return n.cross(V,da,ha),1E-6>n.len(V)&&n.cross(V,aa,ha),n.normalize(V,V),h(S,V,Math.PI),S;if(.999999<ca)return S[0]=0,S[1]=0,S[2]=0,S[3]=1,S;n.cross(V,ha,G);S[0]=V[0];S[1]=V[1];S[2]=V[2];S[3]=1+ca;return K(S,S)}function E(S,ha,G,ca,pa,Y){w(fa,ha,pa,Y);w(Z,G,ca,Y);w(S,fa,Z,2*Y*(1-Y));return S}function L(S,ha,G,ca){const pa=ma;pa[0]=G[0];pa[3]=G[1];pa[6]=G[2];pa[1]=ca[0];pa[4]=ca[1];pa[7]=ca[2];pa[2]=-ha[0];pa[5]=-ha[1];pa[8]=-ha[2];return K(S,x(S,pa))}const Q=d.copy,M=d.set,
C=d.add,U=d.scale,y=d.dot,B=d.lerp,H=d.length,N=d.squaredLength,K=d.normalize,X=d.exactEquals;d=d.equals;const V=f.create(),da=f.fromValues(1,0,0),aa=f.fromValues(0,1,0),fa=c.create(),Z=c.create(),ma=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,add:C,calculateW:v,conjugate:p,copy:Q,dot:y,equals:d,exactEquals:X,fromEuler:u,fromMat3:x,getAxisAngle:l,identity:k,invert:g,len:H,length:H,lerp:B,mul:m,multiply:m,normalize:K,random:q,rotateX:t,rotateY:z,rotateZ:r,rotationTo:J,scale:U,
set:M,setAxes:L,setAxisAngle:h,slerp:w,sqlerp:E,sqrLen:N,squaredLength:N,str:D},Symbol.toStringTag,{value:"Module"}));a.add=C;a.calculateW=v;a.conjugate=p;a.copy=Q;a.dot=y;a.equals=d;a.exactEquals=X;a.fromEuler=u;a.fromMat3=x;a.getAxisAngle=l;a.identity=k;a.invert=g;a.len=H;a.length=H;a.lerp=B;a.mul=m;a.multiply=m;a.normalize=K;a.quat=b;a.random=q;a.rotateX=t;a.rotateY=z;a.rotateZ=r;a.rotationTo=J;a.scale=U;a.set=M;a.setAxes=L;a.setAxisAngle=h;a.slerp=w;a.sqlerp=E;a.sqrLen=N;a.squaredLength=N;a.str=
D;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/spatialReferenceEllipsoidUtils":function(){define(["exports","./ellipsoidUtils","./SpatialReference","./support/spatialReferenceUtils"],function(a,b,c,f){const e=new c(b.SphericalECEFSpatialReferenceLike),n=new c(b.SphericalPCPFMarsLike),d=new c(b.SphericalPCPFMoonLike);b=new c(b.WGS84ECEFSpatialReferenceLike);const k=new Map,h=n.wkt.toUpperCase(),l=d.wkt.toUpperCase();a.SphericalECEFSpatialReference=e;a.SphericalPCPFMars=
n;a.SphericalPCPFMoon=d;a.WGS84ECEFSpatialReference=b;a.getSphericalPCPF=function(m){var t=k.get(m);if(t)return t;t=e;if(m)if(m===n)t=n;else if(m===d)t=d;else{var z=m.wkid;const r=m.latestWkid;if(null!=z||null!=r)if(f.isWKIDFromMars(z)||f.isWKIDFromMars(r))t=n;else{if(f.isWKIDFromMoon(z)||f.isWKIDFromMoon(r))t=d}else if(z=m.wkt2??m.wkt)z=z.toUpperCase(),z===h?t=n:z===l&&(t=d)}k.set(m,t);return t};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/computeTranslationToOriginAndRotation":function(){define("exports ../../core/mathUtils ../../core/libs/gl-matrix-2/math/mat4 ../../core/libs/gl-matrix-2/factories/vec3f64 ./localRotationUtils ./projectors ../support/spatialReferenceUtils".split(" "),
function(a,b,c,f,e,n,d){function k(t){return t===n.ProjectionID.SPHERICAL_ECEF||t===n.ProjectionID.SPHERICAL_MARS_PCPF||t===n.ProjectionID.SPHERICAL_MOON_PCPF||t===n.ProjectionID.WGS84_ECEF}const h=b.deg2rad(1),l=f.create(),m=f.create();a.computeTranslationToOriginAndRotation=function(t,z,r,v){if(null==t||null==v)return!1;var w=n.classifySpatialReference(t,n.sourceClassificationCache),q=n.classifySpatialReference(v,n.destClassificationCache);if(w===q&&!k(q)&&(w!==n.ProjectionID.UNKNOWN||d.equals(t,
v)))return c.fromTranslation(r,z),!0;if(k(q)){w=n.projectionTable[w][n.ProjectionID.LON_LAT];q=n.projectionTable[n.ProjectionID.LON_LAT][q];if(null==w||null==q)return!1;w(z,0,l,0);q(l,0,m,0);e.computeENUToPCPFLocalRotation(h*l[0],h*l[1],r);r[12]=m[0];r[13]=m[1];r[14]=m[2];return!0}t=k(w);if((q===n.ProjectionID.WEB_MERCATOR||q===n.ProjectionID.PLATE_CARREE||q===n.ProjectionID.WGS84||q===n.ProjectionID.CGCS2000)&&(w===n.ProjectionID.WGS84||t||w===n.ProjectionID.WEB_MERCATOR||w===n.ProjectionID.CGCS2000)){w=
n.projectionTable[w][n.ProjectionID.LON_LAT];q=n.projectionTable[n.ProjectionID.LON_LAT][q];if(null==w||null==q)return!1;w(z,0,l,0);q(l,0,m,0);t?e.computePCPFToENULocalRotation(h*l[0],h*l[1],r):c.identity(r);r[12]=m[0];r[13]=m[1];r[14]=m[2];return!0}return!1};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/localRotationUtils":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(a,b){function c(f,e,n){const d=Math.sin(f);f=Math.cos(f);
const k=Math.sin(e);e=Math.cos(e);n[0]=-d;n[4]=-k*f;n[8]=e*f;n[12]=0;n[1]=f;n[5]=-k*d;n[9]=e*d;n[13]=0;n[2]=0;n[6]=e;n[10]=k;n[14]=0;n[3]=0;n[7]=0;n[11]=0;n[15]=1;return n}a.computeENUToPCPFLocalRotation=c;a.computePCPFToENULocalRotation=function(f,e,n){c(f,e,n);b.transpose(n,n);return n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/dito":function(){define("exports ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../webgl-engine/lib/Attribute".split(" "),
function(a,b,c,f,e,n,d){function k(O,ba,na,P,W,ea){if(!(1E-6>ba[0]*ba[0]+ba[1]*ba[1]+ba[2]*ba[2]))for(q(H,na,ba),q(N,P,ba),q(K,W,ba),h(O,ba,B),V[1]=B[0],X[1]=B[1],da[1]=X[1]-V[1],na=[na,P,W],P=[H,N,K],W=0;3>W;++W){h(O,na[W],B);V[0]=B[0];X[0]=B[1];h(O,P[W],B);V[2]=B[0];X[2]=B[1];da[0]=X[0]-V[0];da[2]=X[2]-V[2];const ra=t(da);ra<ea.quality&&(w(ea.b0,na[W]),w(ea.b1,ba),w(ea.b2,P[W]),ea.quality=ra)}}function h(O,ba,na){const {data:P,size:W}=O;na[0]=Number.POSITIVE_INFINITY;na[1]=Number.NEGATIVE_INFINITY;
for(O=0;O<P.length;O+=W){const ea=P[O]*ba[0]+P[O+1]*ba[1]+P[O+2]*ba[2];na[0]=Math.min(na[0],ea);na[1]=Math.max(na[1],ea)}}function l(O,ba,na,P,W,ea){h(O,ba,B);W[0]=B[0];ea[0]=B[1];h(O,na,B);W[1]=B[0];ea[1]=B[1];h(O,P,B);W[2]=B[0];ea[2]=B[1]}function m(O,ba,na,P,W,ea,ra){R[0]=O[0];R[1]=O[1];R[2]=O[2];R[3]=ba[0];R[4]=ba[1];R[5]=ba[2];R[6]=na[0];R[7]=na[1];R[8]=na[2];var ja=ia,oa=R,qa=oa[0]+oa[4]+oa[8];if(0<qa)qa=Math.sqrt(qa+1),ja[3]=.5*qa,qa=.5/qa,ja[0]=(oa[5]-oa[7])*qa,ja[1]=(oa[6]-oa[2])*qa,ja[2]=
(oa[1]-oa[3])*qa;else{qa=0;oa[4]>oa[0]&&(qa=1);oa[8]>oa[3*qa+qa]&&(qa=2);const sa=(qa+1)%3,ua=(qa+2)%3;let ya=Math.sqrt(oa[3*qa+qa]-oa[3*sa+sa]-oa[3*ua+ua]+1);ja[qa]=.5*ya;ya=.5/ya;ja[3]=(oa[3*sa+ua]-oa[3*ua+sa])*ya;ja[sa]=(oa[3*sa+qa]+oa[3*qa+sa])*ya;ja[ua]=(oa[3*ua+qa]+oa[3*qa+ua])*ya}ra.quaternion=ja;z(ca,P,W);v(ca,ca,.5);v(pa,O,ca[0]);v(Y,ba,ca[1]);z(pa,pa,Y);v(Y,na,ca[2]);ra.center=e.add(pa,pa,Y);ra.halfSize=e.scale(ca,ea,.5)}function t(O){return O[0]*O[1]+O[0]*O[2]+O[1]*O[2]}function z(O,ba,
na){O[0]=ba[0]+na[0];O[1]=ba[1]+na[1];O[2]=ba[2]+na[2]}function r(O,ba,na){O[0]=ba[0]-na[0];O[1]=ba[1]-na[1];O[2]=ba[2]-na[2]}function v(O,ba,na){O[0]=ba[0]*na;O[1]=ba[1]*na;O[2]=ba[2]*na}function w(O,ba,na=0){O[0]=ba[na];O[1]=ba[na+1];O[2]=ba[na+2]}function q(O,ba,na){const P=ba[0],W=ba[1];ba=ba[2];const ea=na[0],ra=na[1];na=na[2];O[0]=W*na-ba*ra;O[1]=ba*ea-P*na;O[2]=P*ra-W*ea}function g(O,ba){var na=ba[0]*ba[0]+ba[1]*ba[1]+ba[2]*ba[2];0<na&&(na=1/Math.sqrt(na),O[0]=ba[0]*na,O[1]=ba[1]*na,O[2]=ba[2]*
na)}function p(O,ba){const na=ba[0]-O[0],P=ba[1]-O[1];O=ba[2]-O[2];return na*na+P*P+O*O}const x=n.create(),u=n.create(),D=n.create(),J=n.create(),E=n.create(),L=n.create(),Q=n.create(),M=n.create(),C=n.create(),U=n.create(),y=[0,0,0],B=f.create(),H=n.create(),N=n.create(),K=n.create(),X=n.create(),V=n.create(),da=n.create(),aa=n.create(),fa=n.create(),Z=n.create(),ma=n.create(),S=n.create(),ha=n.create(),G=n.create(),ca=n.create(),pa=n.create(),Y=n.create(),R=b.fromValues(1,0,0,0,1,0,0,0,1),ia=c.create();
class A{constructor(O){this.minVert=Array(7);this.maxVert=Array(7);this.buffer=new ArrayBuffer(448);var ba=0;this.minProj=new Float64Array(this.buffer,ba,7);ba+=56;this.maxProj=new Float64Array(this.buffer,ba,7);ba+=56;for(var na=0;7>na;++na)this.minVert[na]=new Float64Array(this.buffer,ba,3),ba+=24;for(na=0;7>na;++na)this.maxVert[na]=new Float64Array(this.buffer,ba,3),ba+=24;for(ba=0;7>ba;++ba)this.minProj[ba]=Number.POSITIVE_INFINITY,this.maxProj[ba]=Number.NEGATIVE_INFINITY;ba=Array(7);na=Array(7);
const {data:P,size:W}=O;for(O=0;O<P.length;O+=W){var ea=P[O];ea<this.minProj[0]&&(this.minProj[0]=ea,ba[0]=O);ea>this.maxProj[0]&&(this.maxProj[0]=ea,na[0]=O);ea=P[O+1];ea<this.minProj[1]&&(this.minProj[1]=ea,ba[1]=O);ea>this.maxProj[1]&&(this.maxProj[1]=ea,na[1]=O);ea=P[O+2];ea<this.minProj[2]&&(this.minProj[2]=ea,ba[2]=O);ea>this.maxProj[2]&&(this.maxProj[2]=ea,na[2]=O);ea=P[O]+P[O+1]+P[O+2];ea<this.minProj[3]&&(this.minProj[3]=ea,ba[3]=O);ea>this.maxProj[3]&&(this.maxProj[3]=ea,na[3]=O);ea=P[O]+
P[O+1]-P[O+2];ea<this.minProj[4]&&(this.minProj[4]=ea,ba[4]=O);ea>this.maxProj[4]&&(this.maxProj[4]=ea,na[4]=O);ea=P[O]-P[O+1]+P[O+2];ea<this.minProj[5]&&(this.minProj[5]=ea,ba[5]=O);ea>this.maxProj[5]&&(this.maxProj[5]=ea,na[5]=O);ea=P[O]-P[O+1]-P[O+2];ea<this.minProj[6]&&(this.minProj[6]=ea,ba[6]=O);ea>this.maxProj[6]&&(this.maxProj[6]=ea,na[6]=O)}for(O=0;7>O;++O)ea=ba[O],w(this.minVert[O],P,ea),ea=na[O],w(this.maxVert[O],P,ea)}}class F{constructor(){this.b0=n.fromValues(1,0,0);this.b1=n.fromValues(0,
1,0);this.b2=n.fromValues(0,0,1);this.quality=0}}a.computeOBB=function(O,ba){const {data:na,size:P}=O;var W=na.length/P;if(!(0>=W)){var ea=new A(O);z(x,ea.minProj,ea.maxProj);v(x,x,.5);r(u,ea.maxProj,ea.minProj);var ra=t(u),ja=new F;ja.quality=ra;14>W&&(O=new d.Vertices(new Float64Array(ea.buffer,112,42),3));var oa=n.create(),qa=n.create(),sa=n.create();W=n.create();var ua=n.create(),ya=n.create(),wa=n.create();var Aa=O;var Ca=p(ea.maxVert[0],ea.minVert[0]),Ea=0;for(var Da=1;7>Da;++Da){const Ja=p(ea.maxVert[Da],
ea.minVert[Da]);Ja>Ca&&(Ca=Ja,Ea=Da)}w(oa,ea.minVert[Ea]);w(qa,ea.maxVert[Ea]);if(1E-6>p(oa,qa))Aa=1;else{r(W,oa,qa);g(W,W);const {data:Ja,size:Na}=Aa;ea=Number.NEGATIVE_INFINITY;Ca=0;for(Ea=0;Ea<Ja.length;Ea+=Na)y[0]=Ja[Ea]-oa[0],y[1]=Ja[Ea+1]-oa[1],y[2]=Ja[Ea+2]-oa[2],Da=W[0]*y[0]+W[1]*y[1]+W[2]*y[2],Da=y[0]*y[0]+y[1]*y[1]+y[2]*y[2]-Da*Da/(W[0]*W[0]+W[1]*W[1]+W[2]*W[2]),Da>ea&&(ea=Da,Ca=Ea);w(sa,Ja,Ca);1E-6>ea?Aa=2:(r(ua,qa,sa),g(ua,ua),r(ya,sa,oa),g(ya,ya),q(wa,ua,W),g(wa,wa),k(Aa,wa,W,ua,ya,ja),
Aa=0)}switch(Aa){case 1:ba.center=x;ba.halfSize=e.scale(u,u,.5);ba.quaternion=c.IDENTITY;return;case 2:ra=O;w(fa,W);Math.abs(W[0])>Math.abs(W[1])&&Math.abs(W[0])>Math.abs(W[2])?fa[0]=0:Math.abs(W[1])>Math.abs(W[2])?fa[1]=0:fa[2]=0;1E-6>fa[0]*fa[0]+fa[1]*fa[1]+fa[2]*fa[2]&&(fa[0]=fa[1]=fa[2]=1);q(Z,W,fa);g(Z,Z);q(ma,W,Z);g(ma,ma);l(ra,W,Z,ma,S,ha);r(G,ha,S);m(W,Z,ma,S,ha,G,ba);return}Aa=O;ea=B;const {data:Ia,size:Ha}=Aa;w(J,Ia);w(D,J);ea[0]=aa[0]*wa[0]+aa[1]*wa[1]+aa[2]*wa[2];ea[1]=ea[0];for(Ca=Ha;Ca<
Ia.length;Ca+=Ha)Ea=Ia[Ca]*wa[0]+Ia[Ca+1]*wa[1]+Ia[Ca+2]*wa[2],Ea<ea[0]&&(ea[0]=Ea,w(J,Ia,Ca)),Ea>ea[1]&&(ea[1]=Ea,w(D,Ia,Ca));wa=oa[0]*wa[0]+oa[1]*wa[1]+oa[2]*wa[2];B[1]-1E-6<=wa&&(D[0]=void 0);B[0]+1E-6>=wa&&(J[0]=void 0);void 0!==D[0]&&(r(E,D,oa),g(E,E),r(L,D,qa),g(L,L),r(Q,D,sa),g(Q,Q),q(M,L,W),g(M,M),q(C,Q,ua),g(C,C),q(U,E,ya),g(U,U),k(Aa,M,W,L,E,ja),k(Aa,C,ua,Q,L,ja),k(Aa,U,ya,E,Q,ja));void 0!==J[0]&&(r(E,J,oa),g(E,E),r(L,J,qa),g(L,L),r(Q,J,sa),g(Q,Q),q(M,L,W),g(M,M),q(C,Q,ua),g(C,C),q(U,E,
ya),g(U,U),k(Aa,M,W,L,E,ja),k(Aa,C,ua,Q,L,ja),k(Aa,U,ya,E,Q,ja));l(O,ja.b0,ja.b1,ja.b2,S,ha);O=n.create();r(O,ha,S);ja.quality=t(O);ja.quality<ra?m(ja.b0,ja.b1,ja.b2,S,ha,O,ba):(ba.center=x,ba.halfSize=e.scale(u,u,.5),ba.quaternion=c.IDENTITY)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Attribute":function(){define(["exports"],function(a){class b{constructor(f,e,n=e){this.data=f;this.size=e;this.stride=n}}class c extends b{constructor(f,e,n,d=
!1,k=n){super(f,n,k);this.indices=e;this.exclusive=d}}a.Attribute=c;a.Vertices=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexArrayObject":function(){define(["exports","../../../webgl/VertexArrayObject"],function(a,b){class c extends b.VertexArrayObject{}a.VertexArrayObject=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexArrayObject":function(){define("exports ../../core/Logger ../../core/maybe ../../core/typedArrayUtil ./enums ./Util".split(" "),
function(a,b,c,f,e,n){const d=()=>b.getLogger("esri.views.webgl.VertexArrayObject");a.VertexArrayObject=class{constructor(k,h,l,m,t=null){this._context=k;this._locations=h;this._layout=l;this._buffers=m;this._indexBuffer=t;this._glName=null;this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce((k,h)=>k+h.usedMemory,null!=
this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*f.typedArrayStaticSize}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach(k=>k.dispose()),this._buffers.clear(),this._indexBuffer=c.disposeMaybe(this._indexBuffer),this.disposeVAOOnly()):(this._glName||0<Object.getOwnPropertyNames(this._buffers).length)&&
d().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(e.ResourceType.VertexArrayObject,this));this._context=null}initialize(){if(!this._initialized){var {gl:k}=this._context,h=k.createVertexArray();k.bindVertexArray(h);this._bindLayout();k.bindVertexArray(null);this._glName=h;this._context.instanceCounter.increment(e.ResourceType.VertexArrayObject,this);this._initialized=!0}}bind(){this.initialize();
this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const {_buffers:k,_layout:h,_indexBuffer:l}=this;k||d().error("Vertex buffer dictionary is empty!");const m=this._context.gl;this._buffers.forEach((t,z)=>{(z=h.get(z))?n.bindVertexBufferLayout(this._context,this._locations,t,z):d().error("Vertex element descriptor is empty!")});null!=l&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,l.glName)}unbind(){this.initialize();this._context.gl.bindVertexArray(null)}};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","./checkWebGLError","./enums","./getDataTypeBytes"],function(a,b,c,f,e){function n(k){k=k.gl;switch(k.getError()){case k.NO_ERROR:return null;case k.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case k.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case k.INVALID_OPERATION:return"The specified command is not allowed for the current state";
case k.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case k.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case k.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function d(k){return k[0].stride}a.bindVertexBufferLayout=function(k,h,l,m,t=0){const z=k.gl;k.bindBuffer(l);for(const v of m)if(m=h.get(v.name),null==m)console.warn(`There is no location for vertex attribute '${v.name}' defined.`);else{l=t*
v.stride;if(4>=v.count)z.vertexAttribPointer(m,v.count,v.type,v.normalized,v.stride,v.offset+l),z.enableVertexAttribArray(m),0<v.divisor&&k.gl.vertexAttribDivisor(m,v.divisor);else if(9===v.count)for(var r=0;3>r;r++)z.vertexAttribPointer(m+r,3,v.type,v.normalized,v.stride,v.offset+12*r+l),z.enableVertexAttribArray(m+r),0<v.divisor&&k.gl.vertexAttribDivisor(m+r,v.divisor);else if(16===v.count)for(r=0;4>r;r++)z.vertexAttribPointer(m+r,4,v.type,v.normalized,v.stride,v.offset+16*r+l),z.enableVertexAttribArray(m+
r),0<v.divisor&&k.gl?.vertexAttribDivisor(m+r,v.divisor);else console.error("Unsupported vertex attribute element count: "+v.count);if(c.webglDebugEnabled()){m=n(k);r=e.getDataTypeBytes(v.type);const w=v.offset;r=Math.round(r/w)!==r/w?`. Offset not a multiple of stride. DataType requires ${r} bytes, but descriptor has an offset of ${w}`:"";m&&console.error(`Unable to bind vertex attribute "${v.name}" with baseInstanceOffset ${l}${r}:`,m,v)}}};a.getBytesPerElementFormat=function(k){switch(k){case f.PixelFormat.ALPHA:case f.PixelFormat.LUMINANCE:case f.PixelFormat.RED:case f.PixelFormat.RED_INTEGER:case f.SizedPixelFormat.R8:case f.SizedPixelFormat.R8I:case f.SizedPixelFormat.R8UI:case f.SizedPixelFormat.R8_SNORM:case f.RenderbufferFormat.STENCIL_INDEX8:return 1;
case f.PixelFormat.LUMINANCE_ALPHA:case f.PixelFormat.RG:case f.PixelFormat.RG_INTEGER:case f.SizedPixelFormat.RGBA4:case f.SizedPixelFormat.R16F:case f.SizedPixelFormat.R16I:case f.SizedPixelFormat.R16UI:case f.SizedPixelFormat.RG8:case f.SizedPixelFormat.RG8I:case f.SizedPixelFormat.RG8UI:case f.SizedPixelFormat.RG8_SNORM:case f.SizedPixelFormat.RGB565:case f.SizedPixelFormat.RGB5_A1:case f.RenderbufferFormat.DEPTH_COMPONENT16:return 2;case f.PixelFormat.DEPTH_COMPONENT:case f.PixelFormat.RGB:case f.PixelFormat.RGB_INTEGER:case f.SizedPixelFormat.RGB8:case f.SizedPixelFormat.RGB8I:case f.SizedPixelFormat.RGB8UI:case f.SizedPixelFormat.RGB8_SNORM:case f.SizedPixelFormat.SRGB8:case f.RenderbufferFormat.DEPTH_COMPONENT24:return 3;
case f.PixelFormat.DEPTH_STENCIL:case f.PixelFormat.DEPTH24_STENCIL8:case f.PixelFormat.RGBA:case f.PixelFormat.RGBA_INTEGER:case f.SizedPixelFormat.RGBA8:case f.SizedPixelFormat.R32F:case f.SizedPixelFormat.R11F_G11F_B10F:case f.SizedPixelFormat.RG16F:case f.SizedPixelFormat.R32I:case f.SizedPixelFormat.R32UI:case f.SizedPixelFormat.RG16I:case f.SizedPixelFormat.RG16UI:case f.SizedPixelFormat.RGBA8I:case f.SizedPixelFormat.RGBA8UI:case f.SizedPixelFormat.RGBA8_SNORM:case f.SizedPixelFormat.SRGB8_ALPHA8:case f.SizedPixelFormat.RGB9_E5:case f.SizedPixelFormat.RGB10_A2UI:case f.SizedPixelFormat.RGB10_A2:case f.RenderbufferFormat.DEPTH_STENCIL:case f.RenderbufferFormat.DEPTH_COMPONENT32F:case f.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case f.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case f.SizedPixelFormat.RGB16F:case f.SizedPixelFormat.RGB16I:case f.SizedPixelFormat.RGB16UI:return 6;case f.SizedPixelFormat.RG32F:case f.SizedPixelFormat.RG32I:case f.SizedPixelFormat.RG32UI:case f.SizedPixelFormat.RGBA16F:case f.SizedPixelFormat.RGBA16I:case f.SizedPixelFormat.RGBA16UI:return 8;case f.SizedPixelFormat.RGB32F:case f.SizedPixelFormat.RGB32I:case f.SizedPixelFormat.RGB32UI:return 12;case f.SizedPixelFormat.RGBA32F:case f.SizedPixelFormat.RGBA32I:case f.SizedPixelFormat.RGBA32UI:return 16;
case f.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case f.CompressedTextureFormat.COMPRESSED_R11_EAC:case f.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case f.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case f.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case f.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case f.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case f.CompressedTextureFormat.COMPRESSED_RG11_EAC:case f.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case f.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case f.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};a.getErrorString=n;a.getStride=d;a.unbindVertexBufferLayout=function(k,h,l,m){const t=k.gl;k.bindBuffer(l);for(const z of m)if(l=h.get(z.name),4>=z.count)t.disableVertexAttribArray(l),z.divisor&&0<z.divisor&&k.gl?.vertexAttribDivisor(l,0);else if(9===z.count)for(m=
0;3>m;m++)t.disableVertexAttribArray(l+m),z.divisor&&0<z.divisor&&k.gl?.vertexAttribDivisor(l+m,0);else if(16===z.count)for(m=0;4>m;m++)t.disableVertexAttribArray(l+m),z.divisor&&0<z.divisor&&k.gl?.vertexAttribDivisor(l+m,0);else console.error("Unsupported vertex attribute element count: "+z.count);k.unbindBuffer(f.BufferType.ARRAY_BUFFER)};a.vertexCount=function(k,h){return(k.vertexBuffers.get(h)?.usedMemory??0)/d(k.layout.get(h))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/getDataTypeBytes":function(){define(["exports","./enums"],function(a,b){a.getDataTypeBytes=function(c){switch(c){case b.DataType.BYTE:case b.DataType.UNSIGNED_BYTE:return 1;case b.DataType.SHORT:case b.DataType.UNSIGNED_SHORT:case b.DataType.HALF_FLOAT:return 2;case b.DataType.FLOAT:case b.DataType.INT:case b.DataType.UNSIGNED_INT:return 4}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/Intersector":function(){define(["exports",
"../IntersectorInterfaces","../IntersectorTarget","../intersectorUtils"],function(a,b,c,f){class e extends c.Graphic3DTarget{constructor(n,d,k,h,l,m){super(n,d);this.layerUid=n;this.graphicUid=d;this.geometryId=k;this.triangleNr=h;this.baseBoundingSphere=l;this.numLodLevels=m}}a.LodTarget=e;a.isLodIntersectorResult=function(n){return f.isValidIntersectorResult(n)&&n.intersector===b.IntersectorType.LOD&&!!n.target};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define(["exports",
"../../../../../core/arrayUtils","../../../../../core/mathUtils","../../lib/screenSizePerspectiveUtils"],function(a,b,c,f){a.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};a.updateParameters=function(e,n){let d=!1;for(const k in n){const h=n[k];void 0!==h&&(Array.isArray(h)?Array.isArray(e[k])&&b.equals(h,e[k])||(e[k]=h.slice(),d=!0):e[k]!==h&&(d=!0,e[k]=h))}return d};a.verticalOffsetAtDistance=function(e,n,d,k,h){let l=(d.screenLength||0)*e.pixelRatio;null!=h&&(l=f.scale(l,k,n,h));return c.clamp(l*
Math.tan(.5*e.fovY)/(.5*e.fullHeight)*n,d.minWorldLength||0,null!=d.maxWorldLength?d.maxWorldLength:Infinity)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../core/mathUtils","../../../../chunks/boundedPlane","../../../../chunks/sphere","../../../ViewingMode"],function(a,b,c,f,e){function n(z,r,v){v=v.parameters;l.scale=Math.min(v.divisor/(r-v.offset),1);l.factor=Math.abs(z*z*z);return l}
function d(z,r){return b.lerp(z*Math.max(r.scale,r.minScaleFactor),z,r.factor)}class k{get minScaleFactor(){return null!=this._fontHeight?Math.min(this._description.minPixelSize/this._fontHeight,1):0}constructor(z,r,v,w={camera:{distance:0,fovY:0},divisor:0,offset:0},q){this._viewingMode=z;this._description=r;this._ellipsoidRadius=v;this.parameters=w;this._fontHeight=q;this._viewingMode===e.ViewingMode.Local?(this._coverageCompensation=this._surfaceCoverageCompensationLocal,this._calculateCurvatureDependentParameters=
this._calculateCurvatureDependentParametersLocal):(this._coverageCompensation=this._surfaceCoverageCompensationGlobal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}update(z){if(this.parameters&&this.parameters.camera.fovY===z.fovY&&this.parameters.camera.distance===z.distance)return!1;this._calculateParameters(z,this._ellipsoidRadius,this.parameters);return!0}overrideFontHeight(z){return z!==this._fontHeight?new k(this._viewingMode,this._description,
this._ellipsoidRadius,this.parameters,z):this}_calculateParameters(z,r,v){const {scaleStart:w,scaleFallOffRange:q}=this._description,{fovY:g,distance:p}=z;var x=this._calculateCurvatureDependentParameters(z,r);r=this._coverageCompensation(z,r,x);const {tiltAngle:u,scaleFallOffFactor:D}=x,J=Math.sin(u)*p,E=.5*Math.PI-u-g*(.5-w*r);x=J/Math.cos(E);r=(x-J/Math.cos(E+g*q*r)*D)/(1-D);v.camera.fovY=z.fovY;v.camera.distance=z.distance;v.offset=r;v.divisor=x-r;return v}_calculateCurvatureDependentParametersLocal(z,
r,v=m){v.tiltAngle=this._description.curvatureDependent.min.tiltAngle;v.scaleFallOffFactor=this._description.curvatureDependent.min.scaleFallOffFactor;return v}_calculateCurvatureDependentParametersGlobal(z,r,v=m){const w=this._description.curvatureDependent;z=1+z.distance/r;z=Math.sqrt(z*z-1);const [q,g]=[w.min.curvature,w.max.curvature];z=b.clamp((z-q)/(g-q),0,1);const [p,x]=[w.min,w.max];v.tiltAngle=b.lerp(p.tiltAngle,x.tiltAngle,z);v.scaleFallOffFactor=b.lerp(p.scaleFallOffFactor,x.scaleFallOffFactor,
z);return v}_surfaceCoverageCompensationLocal(z,r,v){return c.cameraFrustumCoverage(v.tiltAngle,z.fovY)}_surfaceCoverageCompensationGlobal(z,r,v){f.fromRadius(t,r);return f.cameraFrustumCoverage(t,v.tiltAngle,z.distance,z.fovY)}}const h={curvatureDependent:{min:{curvature:b.deg2rad(10),tiltAngle:b.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:b.deg2rad(70),tiltAngle:b.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},l={scale:0,factor:0,minScaleFactor:0},
m={tiltAngle:0,scaleFallOffFactor:0},t=f.create();a.applyPrecomputedScaleFactor=function(z,r,v=[0,0]){r=Math.min(Math.max(r.scale,r.minScaleFactor),1);v[0]=z[0]*r;v[1]=z[1]*r;return v};a.applyScaleFactor=d;a.getLabelSettings=function(z,r){const {curvatureDependent:v,scaleStart:w,scaleFallOffRange:q}=h;return new k(z,{curvatureDependent:{min:{curvature:v.min.curvature,tiltAngle:v.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:v.max.curvature,tiltAngle:v.max.tiltAngle,scaleFallOffFactor:.95}},
scaleStart:w,scaleFallOffRange:q,minPixelSize:14},r)};a.getSettings=function(z,r){return new k(z,h,r)};a.precomputeScaleFactor=function(z,r,v,w){z=n(z,r,v);z.minScaleFactor=0;z=d(1,z);w.scale=z;w.factor=0;w.minScaleFactor=v.minScaleFactor};a.scale=function(z,r,v,w){return d(z,n(r,v,w))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define(["exports","../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../webgl/doublePrecisionUtils"],
function(a,b,c){const f=b.create(),e=new Float32Array(6);a.addObject3DStateID=function(n,d){null==n&&(n=[]);n.push(d);return n};a.encodeDoubleVec3=function(n,d,k,h,l){f[0]=n.get(d,0);f[1]=n.get(d,1);f[2]=n.get(d,2);c.encodeDoubleArray(f,e,3);k.set(l,0,e[0]);h.set(l,0,e[1]);k.set(l,1,e[2]);h.set(l,1,e[3]);k.set(l,2,e[4]);h.set(l,2,e[5])};a.removeObject3DStateID=function(n,d){if(null==n)return null;n=n.filter(k=>k!==d);return 0===n.length?null:n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(a){const b=new Float32Array(2);a.decodeDoubleArray=function(c,f,e){for(let n=0;n<e;++n)f[n]=c[2*n]+c[2*n+1]};a.encodeDoubleArray=function(c,f,e){for(let n=0;n<e;++n)f[2*n]=c[n],f[2*n+1]=c[n]-f[2*n]};a.encodeDoubleHi=function(c,f){const e=c.length;for(let n=0;n<e;++n)b[0]=c[n],f[n]=b[0];return f};a.encodeDoubleLo=function(c,f){const e=c.length;for(let n=0;n<e;++n)b[0]=c[n],b[1]=c[n]-b[0],f[n]=b[1];return f};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/DefaultMaterialTechnique":function(){define("require exports ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/attributes/NormalAttribute.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/util/AlphaCutoff ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/basicInterfaces ../lib/Material ../lib/OITPass ../lib/OrderIndependentTransparency ../lib/StencilUtils ../materials/pbrUtils ../../../../chunks/DefaultMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p){class x extends d.VertexNormalPassParameters{constructor(){super(...arguments);this.usePBR=this.isSchematic=!1;this.mrrFactors=w.advancedMRRFactors;this.doubleSided=this.hasSymbolColors=this.hasVertexColors=!1;this.doubleSidedType="normal";this.cullFace=m.CullFaceOptions.Back;this.hasInstancedColor=this.isInstanced=!1;this.emissiveFactor=c.ZEROS;this.instancedDoublePrecision=!1;this.normalType=n.NormalType.Attribute;this.castShadows=this.receiveAmbientOcclusion=
this.receiveShadows=!0;this.ambient=c.freeze(.2,.2,.2);this.diffuse=c.freeze(.8,.8,.8);this.externalColor=f.fromValues(1,1,1,1);this.colorMixMode="multiply";this.layerOpacity=this.opacity=1;this.origin=c.create();this.hasSlicePlane=!1;this.hasSliceHighlight=!0;this.offsetTransparentBackfaces=!1;this.modelTransformation=this.vvSymbolRotationMatrix=this.vvSymbolAnchor=this.vvOpacity=this.vvColor=this.vvSize=null;this.transparent=!1;this.writeDepth=!0;this.customDepthTest=m.DepthTestFunction.Less;this.textureAlphaMode=
m.AlphaDiscardMode.Blend;this.textureAlphaCutoff=k.alphaCutoff;this.textureAlphaPremultiplied=!1;this.renderOccluded=t.RenderOccludedFlag.Occlude;this.isDecoration=!1}}class u extends d.VertexNormalDrawParameters{constructor(){super(...arguments);this.slicePlaneLocalOrigin=this.origin=c.create()}}class D extends l.ShaderTechnique{constructor(J,E,L,Q=new h.ReloadableShaderModule(q.DefaultMaterial,()=>new Promise((M,C)=>a(["./DefaultMaterial.glsl"],M,C)))){super(J,E,Q,L);this.type="DefaultMaterialTechnique"}_makePipeline(J,
E){const {oitPass:L,output:Q,transparent:M,cullFace:C,customDepthTest:U,hasOccludees:y,enableOffset:B}=J,H=L===z.OITPass.NONE,N=L===z.OITPass.FrontFace;var K=p.makePipelineState,X=e.isColorOrColorEmission(Q)&&M?r.blending(L):null;var V=J.cullFace!==m.CullFaceOptions.None?!0:J.hasSlicePlane?!1:!J.transparent&&!J.doubleSidedMode;return K.call(p,{blending:X,culling:V?p.cullingParams(C):null,depthTest:{func:r.oitDepthTest(L,U===m.DepthTestFunction.Lequal?g.CompareFunction.LEQUAL:g.CompareFunction.LESS)},
depthWrite:r.depthWrite(J),drawBuffers:Q===e.ShaderOutput.Depth?{buffers:[g.SpecialDrawBuffers.NONE]}:r.getDrawBuffers(L,Q),colorWrite:p.defaultColorWrite,stencilWrite:y?v.stencilWriteMaskOn:null,stencilTest:y?E?v.stencilToolMaskBaseParams:v.stencilBaseAllZerosParams:null,polygonOffset:H||N?null:r.getOITPolygonOffset(B)})}initializePipeline(J){this._occludeePipelineState=this._makePipeline(J,!0);return this._makePipeline(J,!1)}getPipeline(J){return J?this._occludeePipelineState:super.getPipeline()}}
b.DefaultMaterialDrawParameters=u;b.DefaultMaterialPassParameters=x;b.DefaultMaterialTechnique=D;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff":function(){define(["exports"],function(a){a.alphaCutoff=1/255.5;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports"],function(a){class b{constructor(c,f){this._module=
c;this._load=f}get(){return this._module}async reload(){return this._module=await this._load()}}a.ReloadableShaderModule=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define("exports ../../../../../core/maybe ../../lib/DefaultVertexAttributeLocations ../../lib/Program ../../../../webgl/enums ../../../../webgl/renderState".split(" "),function(a,b,c,f,e,n){class d{constructor(k,h,l,m,t=c.Default3D){this.release=
m;this.locations=t;this.primitiveType=e.PrimitiveType.TRIANGLES;this.key=h.key;this._program=new f.Program(k.rctx,l.get().build(h),t);this._pipeline=this.initializePipeline(h);this.reload=async z=>{z&&await l.reload();if(!this.key.equals(h.key))throw Error("Configuration was changed after construction, cannot reload shader");b.disposeMaybe(this._program);this._program=new f.Program(k.rctx,l.get().build(h),t);this._pipeline=this.initializePipeline(h)}}destroy(){this._program=b.disposeMaybe(this._program);
this._pipeline=null}get program(){return this._program}get compiled(){return this.program.compiled}ensureAttributeLocations(k){this.program.assertCompatibleVertexAttributeLocations(k)}getPipeline(k,h){return this._pipeline}initializePipeline(k){return n.makePipelineState({blending:n.blendWithPremultipliedAlpha,colorWrite:n.defaultColorWrite})}}a.ShaderTechnique=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Program":function(){define(["exports","../../../../core/PooledArray",
"../../../webgl/checkWebGLError"],function(a,b,c){class f{constructor(e,n,d){this._context=e;this._locations=d;this._textures=new Map;this._freeTextureUnits=new b({deallocator:null});this._glProgram=e.programCache.acquire(n.generate("vertex"),n.generate("fragment"),d);this._glProgram.stop=()=>{throw Error("Wrapped _glProgram used directly");};this.bindPass=n.generateBindPass(this);this.bindDraw=n.generateBindDraw(this);this._fragmentUniforms=c.webglDebugEnabled()?n.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get hasTransformFeedbackVaryings(){return this._glProgram.hasTransformFeedbackVaryings}get compiled(){return this._glProgram.compiled}setUniform1b(e,
n){this._glProgram.setUniform1i(e,n?1:0)}setUniform1i(e,n){this._glProgram.setUniform1i(e,n)}setUniform1f(e,n){this._glProgram.setUniform1f(e,n)}setUniform2fv(e,n){this._glProgram.setUniform2fv(e,n)}setUniform3fv(e,n){this._glProgram.setUniform3fv(e,n)}setUniform4fv(e,n){this._glProgram.setUniform4fv(e,n)}setUniformMatrix3fv(e,n){this._glProgram.setUniformMatrix3fv(e,n)}setUniformMatrix4fv(e,n){this._glProgram.setUniformMatrix4fv(e,n)}setUniform1fv(e,n){this._glProgram.setUniform1fv(e,n)}setUniform1iv(e,
n){this._glProgram.setUniform1iv(e,n)}setUniform2iv(e,n){this._glProgram.setUniform2iv(e,n)}setUniform3iv(e,n){this._glProgram.setUniform3iv(e,n)}setUniform4iv(e,n){this._glProgram.setUniform4iv(e,n)}assertCompatibleVertexAttributeLocations(e){e.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear();this._freeTextureUnits.clear()}bindTexture(e,n){if(null==n?.glName){if(n=this._textures.get(e))this._context.bindTexture(null,n.unit),this._freeTextureUnit(n),
this._textures.delete(e);return null}let d=this._textures.get(e);null==d?(d=this._allocTextureUnit(n),this._textures.set(e,d)):d.texture=n;this._context.useProgram(this);this.setUniform1i(e,d.unit);this._context.bindTexture(n,d.unit);return d.unit}rebindTextures(){this._context.useProgram(this);this._textures.forEach((e,n)=>{this._context.bindTexture(e.texture,e.unit);this.setUniform1i(n,e.unit)});this._fragmentUniforms?.forEach(e=>{"sampler2D"!==e.type&&"samplerCube"!==e.type||this._textures.has(e.name)||
console.error(`Texture sampler ${e.name} has no bound texture`)})}_allocTextureUnit(e){return{texture:e,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(e){this._freeTextureUnits.push(e.unit)}}a.Program=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/renderState":function(){define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(a,b,c){function f(G,ca,pa=c.BlendOperation.ADD,Y=[0,0,
0,0]){return{srcRgb:G,srcAlpha:G,dstRgb:ca,dstAlpha:ca,opRgb:pa,opAlpha:pa,color:{r:Y[0],g:Y[1],b:Y[2],a:Y[3]}}}function e(G,ca,pa,Y,R=c.BlendOperation.ADD,ia=c.BlendOperation.ADD,A=[0,0,0,0]){return{srcRgb:G,srcAlpha:ca,dstRgb:pa,dstAlpha:Y,opRgb:R,opAlpha:ia,color:{r:A[0],g:A[1],b:A[2],a:A[3]}}}function n(G){return N.intern(G)}function d(G){return K.intern(G)}function k(G){return X.intern(G)}function h(G){return V.intern(G)}function l(G){return da.intern(G)}function m(G){return aa.intern(G)}function t(G){return fa.intern(G)}
function z(G){return Z.intern(G)}function r(G){return ma.intern(G)}function v(G){return"["+G.join(",")+"]"}function w(G){return G?v([G.srcRgb,G.srcAlpha,G.dstRgb,G.dstAlpha,G.opRgb,G.opAlpha,G.color.r,G.color.g,G.color.b,G.color.a]):null}function q(G){return G?v([G.face,G.mode]):null}function g(G){return G?v([G.factor,G.units]):null}function p(G){return G?v([G.func]):null}function x(G){return G?v([G.function.func,G.function.ref,G.function.mask,G.operation.fail,G.operation.zFail,G.operation.zPass]):
null}function u(G){return G?v([G.zNear,G.zFar]):null}function D(G){return G?v([G.r,G.g,G.b,G.a]):null}function J(G){return G?v([G.mask]):null}function E(G){return G?v(G.buffers):null}const L=f(c.BlendFactor.ZERO,c.BlendFactor.ONE_MINUS_SRC_ALPHA),Q=f(c.BlendFactor.ONE,c.BlendFactor.ZERO),M=f(c.BlendFactor.ONE,c.BlendFactor.ONE),C=f(c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA),U=e(c.BlendFactor.SRC_ALPHA,c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA,c.BlendFactor.ONE_MINUS_SRC_ALPHA),
y={face:c.Face.BACK,mode:c.CullMode.CCW},B={face:c.Face.FRONT,mode:c.CullMode.CCW};class H{constructor(G,ca){this._makeKey=G;this._makeRef=ca;this._interns=new Map}intern(G){if(!G)return null;const ca=this._makeKey(G),pa=this._interns;pa.has(ca)||pa.set(ca,this._makeRef(G));return pa.get(ca)??null}}const N=new H(w,G=>({__tag:"Blending",...G})),K=new H(q,G=>({__tag:"Culling",...G})),X=new H(g,G=>({__tag:"PolygonOffset",...G})),V=new H(p,G=>({__tag:"DepthTest",...G})),da=new H(x,G=>({__tag:"StencilTest",
...G})),aa=new H(u,G=>({__tag:"DepthWrite",...G})),fa=new H(D,G=>({__tag:"ColorWrite",...G})),Z=new H(J,G=>({__tag:"StencilWrite",...G})),ma=new H(E,G=>({__tag:"DrawBuffers",...G})),S=new H(function(G){return G?v([w(G.blending),q(G.culling),g(G.polygonOffset),p(G.depthTest),x(G.stencilTest),u(G.depthWrite),D(G.colorWrite),J(G.stencilWrite),E(G.drawBuffers)]):null},G=>({blending:n(G.blending),culling:d(G.culling),polygonOffset:k(G.polygonOffset),depthTest:h(G.depthTest),stencilTest:l(G.stencilTest),
depthWrite:m(G.depthWrite),colorWrite:t(G.colorWrite),stencilWrite:z(G.stencilWrite),drawBuffers:r(G.drawBuffers)}));class ha{constructor(G){this._drawBuffersInvalid=this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=G}setPipeline(G){if(this._pipelineInvalid||G!==this._pipeline)this._setBlending(G.blending),this._setCulling(G.culling),
this._setPolygonOffset(G.polygonOffset),this._setDepthTest(G.depthTest),this._setStencilTest(G.stencilTest),this._setDepthWrite(G.depthWrite),this._setColorWrite(G.colorWrite),this._setStencilWrite(G.stencilWrite),this._setDrawBuffers(G.drawBuffers),this._pipeline=G;this._pipelineInvalid=!1}invalidateBlending(){this._pipelineInvalid=this._blendingInvalid=!0}invalidateCulling(){this._pipelineInvalid=this._cullingInvalid=!0}invalidatePolygonOffset(){this._pipelineInvalid=this._polygonOffsetInvalid=
!0}invalidateDepthTest(){this._pipelineInvalid=this._depthTestInvalid=!0}invalidateStencilTest(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDepthWrite(){this._pipelineInvalid=this._depthWriteInvalid=!0}invalidateColorWrite(){this._pipelineInvalid=this._colorWriteInvalid=!0}invalidateStencilWrite(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDrawBuffers(){this._pipelineInvalid=this._drawBuffersInvalid=!0}_setBlending(G){this._blending=this._setSubState(G,this._blending,
this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1}_setCulling(G){this._culling=this._setSubState(G,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1}_setPolygonOffset(G){this._polygonOffset=this._setSubState(G,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1}_setDepthTest(G){this._depthTest=this._setSubState(G,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);
this._depthTestInvalid=!1}_setStencilTest(G){this._stencilTest=this._setSubState(G,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1}_setDepthWrite(G){this._depthWrite=this._setSubState(G,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1}_setColorWrite(G){this._colorWrite=this._setSubState(G,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1}_setStencilWrite(G){this._stencilWrite=
this._setSubState(G,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1}_setDrawBuffers(G){this._drawBuffers=this._setSubState(G,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers);this._drawBuffersInvalid=!1}_setSubState(G,ca,pa,Y){if(pa||G!==ca)Y(G),this._pipelineInvalid=!0;return G}}a.StateTracker=ha;a.backFaceCullingParams=y;a.blendWithPremultipliedAlpha=C;a.cullingParams=G=>G===b.CullFaceOptions.Back?y:G===b.CullFaceOptions.Front?
B:null;a.defaultColorWrite={r:!0,g:!0,b:!0,a:!0};a.defaultDepthWrite={zNear:0,zFar:1};a.frontFaceCullingParams=B;a.keepSourceValues=Q;a.makeBlending=n;a.makeColorWrite=t;a.makeCulling=d;a.makeDepthTest=h;a.makeDepthWrite=m;a.makeDrawBuffers=r;a.makePipelineState=function(G){return S.intern(G)};a.makePolygonOffset=k;a.makeStencilTest=l;a.makeStencilWrite=z;a.premultipliedAlphaToPremultipliedAlpha=U;a.separateBlendingParams=e;a.simpleBlendingParams=f;a.weightedAdd=M;a.writeDestinationPremultipliedAlpha=
L;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../core/shaderModules/interfaces ./ContentObject ./ContentObjectType ./DefaultVertexAttributeLocations ../materials/internal/MaterialUtil".split(" "),function(a,b,c,f,e,n,d){class k extends f.ContentObject{constructor(l,m){super();this.type=e.ContentObjectType.Material;this.supportsEdges=!1;this._renderPriority=0;
this.vertexAttributeLocations=n.Default3D;this._pp0=b.fromValues(0,0,1);this._pp1=b.fromValues(0,0,0);this._parameters=new m;d.updateParameters(this._parameters,l);this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(l){return!1}setParameters(l,m=!0){d.updateParameters(this._parameters,l)&&(this.validateParameters(this._parameters),m&&this._parametersChanged())}validateParameters(l){}shouldRender(l){return this.visible&&this.isVisibleForOutput(l.output)&&(!this.parameters.isDecoration||
l.bind.decorations)&&0!==(this.parameters.renderOccluded&l.renderOccludedMask)}isVisibleForOutput(l){return!0}get renderPriority(){return this._renderPriority}set renderPriority(l){l!==this._renderPriority&&(this._renderPriority=l,this._parametersChanged())}_parametersChanged(){this.repository?.materialChanged(this)}queryRenderOccludedState(l){return this.visible&&this.parameters.renderOccluded===l}get hasEmissions(){return!1}intersectDraped(l,m,t,z,r,v){this._pp0[0]=this._pp1[0]=z[0];this._pp0[1]=
this._pp1[1]=z[1];return this.intersect(l,m,t,this._pp0,this._pp1,r)}}a.RenderOccludedFlag=void 0;(function(l){l[l.None=0]="None";l[l.Occlude=1]="Occlude";l[l.Transparent=2]="Transparent";l[l.OccludeAndTransparent=4]="OccludeAndTransparent";l[l.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil";l[l.Opaque=16]="Opaque"})(a.RenderOccludedFlag||(a.RenderOccludedFlag={}));class h extends c.NoParameters{constructor(){super(...arguments);this.renderOccluded=a.RenderOccludedFlag.Occlude;this.isDecoration=
!1}}a.Material=k;a.MaterialParameters=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ContentObjectType":function(){define(["exports"],function(a){a.ContentObjectType=void 0;var b=a.ContentObjectType||(a.ContentObjectType={});b[b.Layer=0]="Layer";b[b.Object=1]="Object";b[b.Mesh=2]="Mesh";b[b.Line=3]="Line";b[b.Point=4]="Point";b[b.Material=5]="Material";b[b.Texture=6]="Texture";b[b.COUNT=7]="COUNT";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/OITPass":function(){define(["exports"],function(a){a.OITPass=void 0;var b=a.OITPass||(a.OITPass={});b[b.NONE=0]="NONE";b[b.ColorAlpha=1]="ColorAlpha";b[b.FrontFace=2]="FrontFace";b[b.COUNT=3]="COUNT";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","../core/shaderLibrary/ShaderOutput","./OITPass","../../../webgl/enums","../../../webgl/renderState"],function(a,b,
c,f,e){const n=e.separateBlendingParams(f.BlendFactor.ONE,f.BlendFactor.ZERO,f.BlendFactor.ONE,f.BlendFactor.ONE_MINUS_SRC_ALPHA),d={factor:-1,units:-2};a.OITPolygonOffset=d;a.OITPolygonOffsetLimit=5E5;a.blending=function(k){switch(k){case c.OITPass.NONE:return e.premultipliedAlphaToPremultipliedAlpha;case c.OITPass.ColorAlpha:return n;case c.OITPass.FrontFace:case c.OITPass.COUNT:return null}};a.blendingColorAlpha=n;a.depthWrite=function(k){if(k.draped)return null;switch(k.oitPass){case c.OITPass.NONE:case c.OITPass.FrontFace:return k.writeDepth?
e.defaultDepthWrite:null;case c.OITPass.ColorAlpha:case c.OITPass.COUNT:return null}};a.getDrawBuffers=function(k,h){h=b.isColorEmission(h);return k===c.OITPass.ColorAlpha?h?{buffers:[f.ColorAttachment.COLOR_ATTACHMENT0,f.ColorAttachment.COLOR_ATTACHMENT1,f.ColorAttachment.COLOR_ATTACHMENT2]}:{buffers:[f.ColorAttachment.COLOR_ATTACHMENT0,f.ColorAttachment.COLOR_ATTACHMENT1]}:h?{buffers:[f.ColorAttachment.COLOR_ATTACHMENT0,f.ColorAttachment.COLOR_ATTACHMENT1]}:null};a.getOITPolygonOffset=function(k){return k?
d:null};a.oitBlending=function(k){return k===c.OITPass.FrontFace?null:n};a.oitDepthTest=function(k,h=f.CompareFunction.LESS){return k===c.OITPass.NONE||k===c.OITPass.FrontFace?h:f.CompareFunction.LEQUAL};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports","./basicInterfaces","../../../webgl/enums"],function(a,b,c){const f={func:c.CompareFunction.LESS},e={function:{func:c.CompareFunction.ALWAYS,ref:b.StencilBits.OutlineVisualElementMask,
mask:b.StencilBits.OutlineVisualElementMask},operation:{fail:c.StencilOperation.KEEP,zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.ZERO}},n={function:{func:c.CompareFunction.ALWAYS,ref:b.StencilBits.OutlineVisualElementMask,mask:b.StencilBits.OutlineVisualElementMask},operation:{fail:c.StencilOperation.KEEP,zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.REPLACE}},d={function:{func:c.CompareFunction.EQUAL,ref:b.StencilBits.OutlineVisualElementMask,mask:b.StencilBits.OutlineVisualElementMask},
operation:{fail:c.StencilOperation.KEEP,zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.KEEP}};b={function:{func:c.CompareFunction.NOTEQUAL,ref:b.StencilBits.OutlineVisualElementMask,mask:b.StencilBits.OutlineVisualElementMask},operation:{fail:c.StencilOperation.KEEP,zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.KEEP}};a.depthCompareAlways={func:c.CompareFunction.ALWAYS};a.depthCompareLess=f;a.renderWhenBitIsNotSet=k=>({function:{func:c.CompareFunction.NOTEQUAL,ref:k,mask:k},operation:{fail:c.StencilOperation.KEEP,
zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.KEEP}});a.replaceBitWhenDepthTestPasses=k=>({function:{func:c.CompareFunction.ALWAYS,ref:k,mask:k},operation:{fail:c.StencilOperation.KEEP,zFail:c.StencilOperation.KEEP,zPass:c.StencilOperation.REPLACE}});a.stencilBaseAllZerosParams=e;a.stencilToolMaskBaseParams=n;a.stencilToolMaskOccluderParams=d;a.stencilToolTransparentOccluderParams=b;a.stencilWriteMaskOff={mask:0};a.stencilWriteMaskOn={mask:255};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/materials/pbrUtils":function(){define(["exports","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64"],function(a,b,c){const f=c.freeze(1,1,.5),e=c.freeze(0,.6,.2),n=c.freeze(0,1,.2);a.advancedMRRFactors=f;a.esriSymbologyMRRFactors=n;a.schematicMRRFactors=e;a.useSchematicPBR=function({normalTexture:d,metallicRoughnessTexture:k,metallicFactor:h,roughnessFactor:l,emissiveTexture:m,emissiveFactor:t,occlusionTexture:z}){return null==
d&&null==k&&null==m&&(null==t||b.exactEquals(t,c.ZEROS))&&null==z&&(null==l||1===l)&&(null==h||1===h)};a.useSchematicPBRI3S=function({normalTexture:d,metallicRoughnessTexture:k,metallicFactor:h,roughnessFactor:l,emissiveTexture:m,emissiveFactor:t,occlusionTexture:z}){return null==d&&null==k&&null==m&&(null==t||b.exactEquals(t,c.ZEROS))&&null==z&&(null==l||1===l)&&(null==h||1===h||0===h)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/DefaultMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl ../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform ../views/3d/webgl-engine/lib/VertexAttribute ../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H,N,K,X,V,da,aa){function fa(ma){const S=new X.ShaderBuilder,{vertex:ha,fragment:G,varyings:ca}=S,{output:pa,normalType:Y,offsetBackfaces:R,instancedColor:ia,spherical:A,receiveShadows:F,snowCover:O,pbrMode:ba,textureAlphaPremultiplied:na,instancedDoublePrecision:P,hasVertexColors:W,hasVertexTangents:ea,hasColorTexture:ra,hasNormalTexture:ja,hasNormalTextureTransform:oa,hasColorTextureTransform:qa}=ma;y.addProjViewLocalOrigin(ha,
ma);S.include(h.PositionAttribute);ca.add("vpos","vec3");S.include(Q.VisualVariables,ma);S.include(d.InstancedDoublePrecision,ma);S.include(r.VerticalOffset,ma);S.include(L.colorTextureUV,ma);if(!f.isColorOrColorEmission(pa))return S.include(v.DefaultMaterialAuxiliaryPasses,ma),S;S.include(L.normalTextureUV,ma);S.include(L.emissiveTextureUV,ma);S.include(L.occlusionTextureUV,ma);S.include(L.metallicRoughnessTextureUV,ma);y.addCameraPosition(ha,ma);S.include(k.NormalAttribute,ma);S.include(n.Transform,
ma);const sa=Y===k.NormalType.Attribute||Y===k.NormalType.Compressed;sa&&R&&S.include(c.Offset);S.include(w.ComputeNormalTexture,ma);S.include(z.VertexNormal,ma);ia&&S.attributes.add(da.VertexAttribute.INSTANCECOLOR,"vec4");ca.add("vPositionLocal","vec3");S.include(m.TextureCoordinateAttribute,ma);S.include(b.ForwardLinearDepth,ma);S.include(l.SymbolColor,ma);S.include(t.VertexColor,ma);ha.uniforms.add(new H.Float4PassUniform("externalColor",ua=>ua.externalColor));ca.add("vcolorExt","vec4");ma.terrainDepthTest&&
ca.add("depth","float");ha.main.add(K.glsl`
    forwardNormalizedVertexColor();
    vcolorExt = externalColor;
    ${K.If(ia,"vcolorExt *\x3d instanceColor * 0.003921568627451;")}
    vcolorExt *= vvColor();
    vcolorExt *= getSymbolColor();
    forwardColorMixMode();

    if (vcolorExt.a < ${K.glsl.float(M.alphaCutoff)}) {
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
    } else {
      vpos = getVertexInLocalOriginSpace();
      vPositionLocal = vpos - view[3].xyz;
      vpos = subtractOrigin(vpos);
      ${K.If(sa,"vNormalWorld \x3d dpNormal(vvLocalNormal(normalModel()));")}
      vpos = addVerticalOffset(vpos, localOrigin);
      ${K.If(ea,"vTangent \x3d dpTransformVertexTangent(tangent);")}
      gl_Position = transformPosition(proj, view, vpos);
      ${K.If(sa&&R,"gl_Position \x3d offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);")}
    }

    ${K.If(ma.terrainDepthTest,"depth \x3d (view * vec4(vpos, 1.0)).z;")}
    forwardLinearDepth();
    forwardTextureCoordinates();
    forwardColorUV();
    forwardNormalUV();
    forwardEmissiveUV();
    forwardOcclusionUV();
    forwardMetallicRoughnessUV();
  `);S.include(g.EvaluateSceneLighting,ma);S.include(q.EvaluateAmbientOcclusion,ma);S.include(C.DiscardOrAdjustAlphaPass,ma);S.include(P?J.ReadShadowMapPass:J.ReadShadowMapDraw,ma);S.include(E.terrainDepthTest,ma);S.include(e.SliceDraw,ma);S.include(aa.outputColorHighlightOID,ma);y.addCameraPosition(G,ma);G.uniforms.add(ha.uniforms.get("localOrigin"),new B.Float3PassUniform("ambient",ua=>ua.ambient),new B.Float3PassUniform("diffuse",ua=>ua.diffuse),new N.FloatPassUniform("opacity",ua=>ua.opacity),
new N.FloatPassUniform("layerOpacity",ua=>ua.layerOpacity));ra&&G.uniforms.add(new V.Texture2DPassUniform("tex",ua=>ua.texture));S.include(D.PhysicallyBasedRenderingParameters,ma);S.include(u.PhysicallyBasedRendering,ma);G.include(U.MixExternalColor);S.include(x.Normals,ma);g.addAmbientBoostFactor(G);g.addLightingGlobalFactor(G);p.addMainLightIntensity(G);G.main.add(K.glsl`
      discardBySlice(vpos);
      ${K.If(ma.terrainDepthTest,"terrainDepthTest(depth);")}
      ${ra?K.glsl`
              vec4 texColor = texture(tex, ${qa?"colorUV":"vuv0"});
              ${K.If(na,"texColor.rgb /\x3d texColor.a;")}
              discardOrAdjustAlpha(texColor);`:K.glsl`vec4 texColor = vec4(1.0);`}
      shadingParams.viewDirection = normalize(vpos - cameraPosition);
      ${Y===k.NormalType.ScreenDerivative?K.glsl`vec3 normal = screenDerivativeNormal(vPositionLocal);`:K.glsl`shadingParams.normalView = vNormalWorld;
                 vec3 normal = shadingNormal(shadingParams);`}
      applyPBRFactors();
      float ssao = evaluateAmbientOcclusionInverse() * getBakedOcclusion();

      vec3 posWorld = vpos + localOrigin;

      float additionalAmbientScale = additionalDirectedAmbientLight(posWorld);
      float shadow = ${F?"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))":K.If(A,"lightingGlobalFactor * (1.0 - additionalAmbientScale)","0.0")};

      vec3 matColor = max(ambient, diffuse);
      vec3 albedo = mixExternalColor(${K.If(W,"vColor.rgb *")} matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
      float opacity_ = layerOpacity * mixExternalOpacity(${K.If(W,"vColor.a * ")} opacity, texColor.a, vcolorExt.a, int(colorMixMode));
      ${ja?`mat3 tangentSpace = computeTangentSpace(${ea?"normal":"normal, vpos, vuv0"});\n             vec3 shadingNormal = computeTextureNormal(tangentSpace, ${oa?"normalUV":"vuv0"});`:"vec3 shadingNormal \x3d normal;"}
      vec3 normalGround = ${A?"normalize(posWorld);":"vec3(0.0, 0.0, 1.0);"}

      ${K.If(O,K.glsl`
            float snow = smoothstep(0.5, 0.55, dot(normal, normalGround));
            albedo = mix(albedo, vec3(1), snow);
            shadingNormal = mix(shadingNormal, normal, snow);
            ssao = mix(ssao, 1.0, snow);`)}

      vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;

      ${ba===D.PBRMode.Normal||ba===D.PBRMode.Schematic?K.glsl`
              float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];
              ${K.If(O,K.glsl`mrr = mix(mrr, vec3(0.0, 1.0, 0.04), snow);`)}
              vec4 emission = ${O?"mix(getEmissions(), vec4(0.0), snow)":"getEmissions()"};
              vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:K.glsl`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
      vec4 finalColor = vec4(shadedColor, opacity_);
      outputColorHighlightOID(finalColor, vpos);
  `);return S}const Z=Object.freeze(Object.defineProperty({__proto__:null,build:fa},Symbol.toStringTag,{value:"Module"}));a.DefaultMaterial=Z;a.build=fa})},"esri/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl":function(){define(["exports","./ShaderOutput","./attributes/VertexPosition.glsl","../shaderModules/Float2PassUniform","../shaderModules/interfaces"],function(a,b,c,f,e){function n(h){h.varyings.add("linearDepth","float")}function d(h){h.vertex.uniforms.add(new f.Float2PassUniform("nearFar",
(l,m)=>m.camera.nearFar))}function k(h){h.vertex.code.add(e.glsl`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}a.ForwardLinearDepth=function(h,l){const {vertex:m}=h;switch(l.output){case b.ShaderOutput.Color:case b.ShaderOutput.ColorEmission:if(l.receiveShadows){n(h);m.code.add(e.glsl`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);return}break;case b.ShaderOutput.Shadow:case b.ShaderOutput.ShadowHighlight:case b.ShaderOutput.ShadowExcludeHighlight:case b.ShaderOutput.ViewshedShadow:h.include(c.VertexPosition,l);n(h);d(h);k(h);m.code.add(e.glsl`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`);return}m.code.add(e.glsl`void forwardLinearDepth() {}`)};a.addCalculateLinearDepth=k;a.addLinearDepth=n;a.addNearFar=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float2PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec2",c.BindType.Pass,(d,k,h)=>d.setUniform2fv(e,n(k,h)))}}a.Float2PassUniform=f;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl":function(){define(["exports","../shaderModules/interfaces"],function(a,b){a.Offset=function(c){c.vertex.code.add(b.glsl`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {
vec3 camToVert = posWorld - camPosWorld;
bool isBackface = dot(camToVert, normalWorld) > 0.0;
if (isBackface) {
posClip.z += 0.0000003 * posClip.w;
}
return posClip;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define("exports ../../../../../core/libs/gl-matrix-2/math/mat4 ../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../chunks/vec32 ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../shaderModules/Float3DrawUniform ../shaderModules/Float3PassUniform ../shaderModules/interfaces".split(" "),function(a,b,c,f,e,n,d,k){function h(x,u,...D){if(u.hasSlicePlane){var J=
k.glsl`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,E=k.glsl`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`;E=u.hasSliceHighlight?k.glsl`
        ${E}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:k.glsl`#define highlightSlice(_color_, _pos_) (_color_)`;u.hasSliceInVertexProgram&&x.vertex.uniforms.add(...D).code.add(J);x.fragment.uniforms.add(...D).code.add(J);x.fragment.code.add(E)}else D=k.glsl`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`,u.hasSliceInVertexProgram&&x.vertex.code.add(D),x.fragment.code.add(D)}function l(x,u,D){return x.instancedDoublePrecision?f.set(w,D.camera.viewInverseTransposeMatrix[3],D.camera.viewInverseTransposeMatrix[7],D.camera.viewInverseTransposeMatrix[11]):u.slicePlaneLocalOrigin}function m(x,u){return null!=x?f.subtract(q,u.origin,x):u.origin}function t(x,u,D){return x.hasSliceTranslatedView?null!=u?b.translate(p,D.camera.viewMatrix,u):D.camera.viewMatrix:
null}function z(x,u,D){if(null==D.slicePlane)return e.ZEROS;const J=l(x,u,D);u=m(J,D.slicePlane);x=t(x,J,D);return null!=x?f.transformMat4(q,u,x):u}function r(x,u,D,J){if(null==J||null==D.slicePlane)return e.ZEROS;const E=l(x,u,D);u=m(E,D.slicePlane);x=t(x,E,D);return null!=x?(f.add(g,J,u),f.transformMat4(q,u,x),f.transformMat4(g,g,x),f.subtract(g,g,q)):J}class v extends k.NoParameters{constructor(x){super();this.slicePlaneLocalOrigin=x}}const w=e.create(),q=e.create(),g=e.create(),p=c.create();a.SliceDraw=
function(x,u){h(x,u,new n.Float3DrawUniform("slicePlaneOrigin",(D,J)=>z(u,D,J)),new n.Float3DrawUniform("slicePlaneBasis1",(D,J)=>r(u,D,J,J.slicePlane?.basis1)),new n.Float3DrawUniform("slicePlaneBasis2",(D,J)=>r(u,D,J,J.slicePlane?.basis2)))};a.SlicePass=function(x,u){h(x,u,new d.Float3PassUniform("slicePlaneOrigin",(D,J)=>z(u,D,J)),new d.Float3PassUniform("slicePlaneBasis1",(D,J)=>r(u,D,J,J.slicePlane?.basis1)),new d.Float3PassUniform("slicePlaneBasis2",(D,J)=>r(u,D,J,J.slicePlane?.basis2)))};a.SlicePlaneParameters=
v;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl":function(){define(["exports","./ForwardLinearDepth.glsl","../shaderModules/interfaces"],function(a,b,c){a.Transform=function(f){b.addCalculateLinearDepth(f);f.vertex.code.add(c.glsl`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = calculateLinearDepth(nearFar,eye.z);
return proj * eye;
}`);f.vertex.code.add(c.glsl`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/math/mat3 ../../../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../../chunks/vec32 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../ShaderOutput ../util/DoublePrecision.glsl ../util/View.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3PassUniform ../../shaderModules/Matrix4PassUniform ../../../lib/VertexAttribute ../../../../../webgl/doublePrecisionUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){class w extends m.NoParameters{constructor(){super(...arguments);this.modelTransformation=null}}const q=c.create(),g=n.create();a.InstancedDoublePassParameters=w;a.InstancedDoublePrecision=function(p,x){const u=x.hasModelTransformation,D=x.instancedDoublePrecision;u&&(p.vertex.uniforms.add(new z.Matrix4PassUniform("model",J=>J.modelTransformation??f.IDENTITY)),p.vertex.uniforms.add(new t.Matrix3PassUniform("normalLocalOriginFromModel",J=>{b.normalFromMat4(q,
J.modelTransformation??f.IDENTITY);return q})));x.instanced&&D&&(p.attributes.add(r.VertexAttribute.INSTANCEMODELORIGINHI,"vec3"),p.attributes.add(r.VertexAttribute.INSTANCEMODELORIGINLO,"vec3"),p.attributes.add(r.VertexAttribute.INSTANCEMODEL,"mat3"),p.attributes.add(r.VertexAttribute.INSTANCEMODELNORMAL,"mat3"));p=p.vertex;D&&(p.include(k.DoublePrecision,x),p.uniforms.add(new l.Float3DrawUniform("viewOriginHi",(J,E)=>v.encodeDoubleHi(e.set(g,E.camera.viewInverseTransposeMatrix[3],E.camera.viewInverseTransposeMatrix[7],
E.camera.viewInverseTransposeMatrix[11]),g)),new l.Float3DrawUniform("viewOriginLo",(J,E)=>v.encodeDoubleLo(e.set(g,E.camera.viewInverseTransposeMatrix[3],E.camera.viewInverseTransposeMatrix[7],E.camera.viewInverseTransposeMatrix[11]),g))));p.code.add(m.glsl`
    vec3 getVertexInLocalOriginSpace() {
      return ${u?D?"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz":"(model * localPosition()).xyz":D?"instanceModel * localPosition().xyz":"localPosition().xyz"};
    }

    vec3 subtractOrigin(vec3 _pos) {
      ${D?m.glsl`
          // Negated inputs are intentionally the first two arguments. The other way around the obfuscation in dpAdd() stopped
          // working for macOS 14+ and iOS 17+.
          // Issue: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280
          vec3 originDelta = dpAdd(-instanceModelOriginHi, -instanceModelOriginLo, viewOriginHi, viewOriginLo);
          return _pos - originDelta;`:"return vpos;"}
    }
    `);p.code.add(m.glsl`
    vec3 dpNormal(vec4 _normal) {
      return normalize(${u?D?"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)":"normalLocalOriginFromModel * _normal.xyz":D?"instanceModelNormal * _normal.xyz":"_normal.xyz"});
    }
    `);x.output===d.ShaderOutput.Normal&&(h.addViewNormal(p),p.code.add(m.glsl`
    vec3 dpNormalView(vec4 _normal) {
      return normalize((viewNormal * ${u?D?"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)":"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)":D?"vec4(instanceModelNormal * _normal.xyz, 1.0)":"_normal"}).xyz);
    }
    `));x.hasVertexTangents&&p.code.add(m.glsl`
    vec4 dpTransformVertexTangent(vec4 _tangent) {
      ${u?D?"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);":"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);":D?"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);":"return _tangent;"}
    }`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/math/mat4 ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../../chunks/vec32 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/Matrix4DrawUniform ../../shaderModules/Matrix4PassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h,l){const m=c.create(),t=e.create();a.addCameraPosition=function(z,r){r.instancedDoublePrecision?z.constants.add("cameraPosition","vec3",e.ZEROS):z.uniforms.add(new n.Float3DrawUniform("cameraPosition",(v,w)=>f.set(t,w.camera.viewInverseTransposeMatrix[3]-v.origin[0],w.camera.viewInverseTransposeMatrix[7]-v.origin[1],w.camera.viewInverseTransposeMatrix[11]-v.origin[2])))};a.addPixelRatio=function(z){z.uniforms.add(new k.FloatPassUniform("pixelRatio",(r,v)=>v.camera.pixelRatio/
v.overlayStretch))};a.addProjViewLocalOrigin=function(z,r){r.instancedDoublePrecision?z.uniforms.add(new l.Matrix4PassUniform("proj",(v,w)=>w.camera.projectionMatrix),new l.Matrix4PassUniform("view",(v,w)=>b.translate(m,w.camera.viewMatrix,f.set(t,w.camera.viewInverseTransposeMatrix[3],w.camera.viewInverseTransposeMatrix[7],w.camera.viewInverseTransposeMatrix[11]))),new d.Float3PassUniform("localOrigin",(v,w)=>f.set(t,w.camera.viewInverseTransposeMatrix[3],w.camera.viewInverseTransposeMatrix[7],w.camera.viewInverseTransposeMatrix[11]))):
z.uniforms.add(new l.Matrix4PassUniform("proj",(v,w)=>w.camera.projectionMatrix),new h.Matrix4DrawUniform("view",(v,w)=>b.translate(m,w.camera.viewMatrix,v.origin)),new n.Float3DrawUniform("localOrigin",v=>v.origin))};a.addViewNormal=function(z){z.uniforms.add(new l.Matrix4PassUniform("viewNormal",(r,v)=>v.camera.viewInverseTransposeMatrix))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatPassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"float",c.BindType.Pass,(d,k,h)=>d.setUniform1f(e,n(k,h)))}}a.FloatPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"mat4",c.BindType.Draw,(d,k,h)=>d.setUniformMatrix4fv(e,
n(k,h)))}}a.Matrix4DrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl":function(){define("exports ../../../collections/Component/Material/shader/DecodeSymbolColor.glsl ../../shaderModules/IntegerPassUniform ../../shaderModules/interfaces ../../../lib/VertexAttribute ../../../materials/internal/MaterialUtil".split(" "),function(a,b,c,f,e,n){a.SymbolColor=function(d,k){k.hasSymbolColors?(d.include(b.DecodeSymbolColor),
d.attributes.add(e.VertexAttribute.SYMBOLCOLOR,"vec4"),d.varyings.add("colorMixMode","mediump float"),d.vertex.code.add(f.glsl`int symbolColorMixMode;
vec4 getSymbolColor() {
return decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;
}
void forwardColorMixMode() {
colorMixMode = float(symbolColorMixMode) + 0.5;
}`)):(d.fragment.uniforms.add(new c.IntegerPassUniform("colorMixMode",h=>n.colorMixModes[h.colorMixMode])),d.vertex.code.add(f.glsl`vec4 getSymbolColor() { return vec4(1.0); }
void forwardColorMixMode() {}`))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl":function(){define(["exports","../../../../../layers/support/symbolColorUtils","../../../../core/shaderModules/interfaces"],function(a,b,c){a.DecodeSymbolColor=function(f){f.vertex.code.add(c.glsl`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${c.glsl.int(b.ColorMixModeEnum.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${c.glsl.int(b.ColorMixModeEnum.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${c.glsl.int(b.ColorMixModeEnum.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${c.glsl.int(b.ColorMixModeEnum.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/symbolColorUtils":function(){define(["exports","../../../../core/mathUtils"],function(a,b){a.ColorMixModeEnum=void 0;(function(c){c[c.Multiply=1]="Multiply";c[c.Ignore=2]="Ignore";c[c.Replace=3]="Replace";c[c.Tint=4]="Tint"})(a.ColorMixModeEnum||(a.ColorMixModeEnum={}));a.encodeSymbolColor=function(c,f,e){if(null==c||f===a.ColorMixModeEnum.Ignore)e[0]=255,e[1]=255,e[2]=255,e[3]=255;else{var n=b.clamp(Math.round(85*
c[3]),0,85);f=0===n||f===a.ColorMixModeEnum.Tint?0:f===a.ColorMixModeEnum.Replace?85:170;e[0]=b.clamp(Math.round(255*c[0]),0,255);e[1]=b.clamp(Math.round(255*c[1]),0,255);e[2]=b.clamp(Math.round(255*c[2]),0,255);e[3]=n+f}};a.parseColorMixMode=function(c){switch(c){case "multiply":return a.ColorMixModeEnum.Multiply;case "ignore":return a.ColorMixModeEnum.Ignore;case "replace":return a.ColorMixModeEnum.Replace;case "tint":return a.ColorMixModeEnum.Tint;default:return a.ColorMixModeEnum.Multiply}};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"int",c.BindType.Pass,(d,k,h)=>d.setUniform1i(e,n(k,h)))}}a.IntegerPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl":function(){define(["exports",
"../../../../../../core/compilerUtils","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(a,b,c,f){a.TextureCoordinateType=void 0;(function(e){e[e.None=0]="None";e[e.Default=1]="Default";e[e.Atlas=2]="Atlas";e[e.Compressed=3]="Compressed";e[e.COUNT=4]="COUNT"})(a.TextureCoordinateType||(a.TextureCoordinateType={}));a.TextureCoordinateAttribute=function(e,n){switch(n.textureCoordinateType){case a.TextureCoordinateType.Default:e.attributes.add(f.VertexAttribute.UV0,"vec2");e.varyings.add("vuv0",
"vec2");e.vertex.code.add(c.glsl`void forwardTextureCoordinates() {
vuv0 = uv0;
}`);break;case a.TextureCoordinateType.Compressed:e.attributes.add(f.VertexAttribute.UV0,"vec2");e.varyings.add("vuv0","vec2");e.vertex.code.add(c.glsl`vec2 getUV0() {
return uv0 / 16384.0;
}
void forwardTextureCoordinates() {
vuv0 = getUV0();
}`);break;case a.TextureCoordinateType.Atlas:e.attributes.add(f.VertexAttribute.UV0,"vec2");e.varyings.add("vuv0","vec2");e.attributes.add(f.VertexAttribute.UVREGION,"vec4");e.varyings.add("vuvRegion","vec4");e.vertex.code.add(c.glsl`void forwardTextureCoordinates() {
vuv0 = uv0;
vuvRegion = uvRegion;
}`);break;default:b.neverReached(n.textureCoordinateType);case a.TextureCoordinateType.None:e.vertex.code.add(c.glsl`void forwardTextureCoordinates() {}`);case a.TextureCoordinateType.COUNT:}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(a,b,c){a.VertexColor=function(f,e){e.hasVertexColors?(f.attributes.add(c.VertexAttribute.COLOR,
"vec4"),f.varyings.add("vColor","vec4"),f.vertex.code.add(b.glsl`void forwardVertexColor() { vColor = color; }`),f.vertex.code.add(b.glsl`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):f.vertex.code.add(b.glsl`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl":function(){define("exports ../../../../../../chunks/vec42 ../../../../../../core/libs/gl-matrix-2/factories/vec4f64 ../util/ScreenSizePerspective.glsl ../util/View.glsl ../../shaderModules/Float4PassUniform ../../shaderModules/interfaces".split(" "),function(a,b,c,f,e,n,d){function k(l){l.uniforms.add(new n.Float4PassUniform("verticalOffset",
(m,t)=>{const {minWorldLength:z,maxWorldLength:r,screenLength:v}=m.verticalOffset;return b.set(h,v*(t.camera.pixelRatio||1),Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),z,r)}))}const h=c.create();a.VerticalOffset=function(l,m){const t=l.vertex;m.hasVerticalOffset?(k(t),m.hasScreenSizePerspective&&(l.include(f.ScreenSizePerspective),f.addScreenSizePerspectiveAlignment(t),e.addCameraPosition(l.vertex,m)),t.code.add(d.glsl`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${m.spherical?d.glsl`vec3 worldNormal = normalize(worldPos + localOrigin);`:d.glsl`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${m.hasScreenSizePerspective?d.glsl`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:d.glsl`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):t.code.add(d.glsl`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)};a.addVerticalOffset=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl":function(){define(["exports","../../../../../../chunks/vec32","../../../../../../core/libs/gl-matrix-2/factories/vec3f64","../../shaderModules/Float3PassUniform","../../shaderModules/interfaces"],function(a,b,c,f,e){function n(k){return b.set(d,
k.parameters.divisor,k.parameters.offset,k.minScaleFactor)}const d=c.create();a.ScreenSizePerspective=function(k){k.vertex.code.add(e.glsl`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`);k.vertex.code.add(e.glsl`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`);k.vertex.code.add(e.glsl`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`);k.vertex.code.add(e.glsl`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`);k.vertex.code.add(e.glsl`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`);k.vertex.code.add(e.glsl`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)};a.addScreenSizePerspective=function(k){k.uniforms.add(new f.Float3PassUniform("screenSizePerspective",h=>n(h.screenSizePerspective)))};a.addScreenSizePerspectiveAlignment=function(k){k.uniforms.add(new f.Float3PassUniform("screenSizePerspectiveAlignment",h=>n(h.screenSizePerspectiveAlignment||h.screenSizePerspective)))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],
function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec4",c.BindType.Pass,(d,k,h)=>d.setUniform4fv(e,n(k,h)))}}a.Float4PassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl":function(){define("exports ../ForwardLinearDepth.glsl ../ShaderOutput ../Slice.glsl ../Transform.glsl ../attributes/NormalAttribute.glsl ../attributes/ObjectAndLayerIdColor.glsl ../attributes/TextureCoordinateAttribute.glsl ../attributes/VertexNormal.glsl ../output/OutputDepth.glsl ../output/OutputHighlight.glsl ../shading/VisualVariables.glsl ../util/DiscardOrAdjustAlpha.glsl ../util/View.glsl ../../shaderModules/interfaces ../../shaderModules/Texture2DPassUniform ../../../lib/basicInterfaces".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q){a.DefaultMaterialAuxiliaryPasses=function(g,p){const {vertex:x,fragment:u}=g,D=p.hasColorTexture&&p.alphaDiscardMode!==q.AlphaDiscardMode.Opaque,{output:J,normalType:E,hasColorTextureTransform:L}=p;switch(J){case c.ShaderOutput.Depth:r.addProjViewLocalOrigin(x,p);g.include(e.Transform,p);g.include(f.SliceDraw,p);g.include(k.TextureCoordinateAttribute,p);D&&u.uniforms.add(new w.Texture2DPassUniform("tex",Q=>Q.texture));x.main.add(v.glsl`vpos = getVertexInLocalOriginSpace();
vpos = subtractOrigin(vpos);
vpos = addVerticalOffset(vpos, localOrigin);
gl_Position = transformPosition(proj, view, vpos);
forwardTextureCoordinates();`);g.include(z.DiscardOrAdjustAlphaPass,p);u.main.add(v.glsl`
          discardBySlice(vpos);
          ${v.If(D,v.glsl`vec4 texColor = texture(tex, ${L?"colorUV":"vuv0"});
                 discardOrAdjustAlpha(texColor);`)}`);break;case c.ShaderOutput.Shadow:case c.ShaderOutput.ShadowHighlight:case c.ShaderOutput.ShadowExcludeHighlight:case c.ShaderOutput.ViewshedShadow:case c.ShaderOutput.ObjectAndLayerIdColor:r.addProjViewLocalOrigin(x,p);g.include(e.Transform,p);g.include(k.TextureCoordinateAttribute,p);g.include(t.VisualVariables,p);g.include(l.OutputDepth,p);g.include(f.SliceDraw,p);g.include(d.ObjectAndLayerIdColor,p);b.addNearFar(g);g.varyings.add("depth","float");
D&&u.uniforms.add(new w.Texture2DPassUniform("tex",Q=>Q.texture));x.main.add(v.glsl`vpos = getVertexInLocalOriginSpace();
vpos = subtractOrigin(vpos);
vpos = addVerticalOffset(vpos, localOrigin);
gl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);
forwardTextureCoordinates();
forwardObjectAndLayerIdColor();`);g.include(z.DiscardOrAdjustAlphaPass,p);u.main.add(v.glsl`
          discardBySlice(vpos);
          ${v.If(D,v.glsl`vec4 texColor = texture(tex, ${L?"colorUV":"vuv0"});
                 discardOrAdjustAlpha(texColor);`)}
          ${J===c.ShaderOutput.ObjectAndLayerIdColor?v.glsl`outputObjectAndLayerIdColor();`:v.glsl`outputDepth(depth);`}`);break;case c.ShaderOutput.Normal:r.addProjViewLocalOrigin(x,p);g.include(e.Transform,p);g.include(n.NormalAttribute,p);g.include(h.VertexNormal,p);g.include(k.TextureCoordinateAttribute,p);g.include(t.VisualVariables,p);D&&u.uniforms.add(new w.Texture2DPassUniform("tex",Q=>Q.texture));E===n.NormalType.ScreenDerivative&&g.varyings.add("vPositionView","vec3");x.main.add(v.glsl`
          vpos = getVertexInLocalOriginSpace();
          ${E===n.NormalType.Attribute||E===n.NormalType.Compressed?v.glsl`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:v.glsl`vPositionView = (view * vec4(vpos, 1.0)).xyz;`}
          vpos = subtractOrigin(vpos);
          vpos = addVerticalOffset(vpos, localOrigin);
          gl_Position = transformPosition(proj, view, vpos);
          forwardTextureCoordinates();`);g.include(f.SliceDraw,p);g.include(z.DiscardOrAdjustAlphaPass,p);u.main.add(v.glsl`
          discardBySlice(vpos);
          ${v.If(D,v.glsl`vec4 texColor = texture(tex, ${L?"colorUV":"vuv0"});
                 discardOrAdjustAlpha(texColor);`)}

          ${E===n.NormalType.ScreenDerivative?v.glsl`vec3 normal = screenDerivativeNormal(vPositionView);`:v.glsl`vec3 normal = normalize(vNormalWorld);
                     if (gl_FrontFacing == false){
                       normal = -normal;
                     }`}
          fragColor = vec4(0.5 + 0.5 * normal, 1.0);`);break;case c.ShaderOutput.Highlight:r.addProjViewLocalOrigin(x,p),g.include(e.Transform,p),g.include(k.TextureCoordinateAttribute,p),g.include(t.VisualVariables,p),D&&u.uniforms.add(new w.Texture2DPassUniform("tex",Q=>Q.texture)),x.main.add(v.glsl`vpos = getVertexInLocalOriginSpace();
vpos = subtractOrigin(vpos);
vpos = addVerticalOffset(vpos, localOrigin);
gl_Position = transformPosition(proj, view, vpos);
forwardTextureCoordinates();`),g.include(f.SliceDraw,p),g.include(z.DiscardOrAdjustAlphaPass,p),g.include(m.OutputHighlight,p),u.main.add(v.glsl`
          discardBySlice(vpos);
          ${v.If(D,v.glsl`vec4 texColor = texture(tex, ${L?"colorUV":"vuv0"});
                 discardOrAdjustAlpha(texColor);`)}
          calculateOcclusionAndOutputHighlight();`)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl":function(){define(["exports","../ShaderOutput","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(a,b,c,f){a.ObjectAndLayerIdColor=function(e,n){n.output!==b.ShaderOutput.ObjectAndLayerIdColor?(e.vertex.code.add(c.glsl`void forwardObjectAndLayerIdColor() {}`),e.fragment.code.add(c.glsl`void outputObjectAndLayerIdColor() {}`)):
(n=n.objectAndLayerIdColorInstanced,e.varyings.add("objectAndLayerIdColorVarying","vec4"),e.attributes.add(n?f.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR:f.VertexAttribute.OBJECTANDLAYERIDCOLOR,"vec4"),e.vertex.code.add(c.glsl`
    void forwardObjectAndLayerIdColor() {
      objectAndLayerIdColorVarying = ${n?"instanceObjectAndLayerIdColor":"objectAndLayerIdColor"} * 0.003921568627451;
    }`),e.fragment.code.add(c.glsl`void outputObjectAndLayerIdColor() {
fragColor = objectAndLayerIdColorVarying;
}`))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../ShaderOutput","../util/RgbaFloat16Encoding.glsl","../../shaderModules/interfaces"],function(a,b,c,f){a.OutputDepth=function(e,n){switch(n.output){case b.ShaderOutput.Shadow:case b.ShaderOutput.ShadowHighlight:case b.ShaderOutput.ShadowExcludeHighlight:case b.ShaderOutput.ViewshedShadow:e.fragment.include(c.Rgba4FloatEncoding),
e.fragment.code.add(f.glsl`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 20.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
return depth + SLOPE_SCALE * m + BIAS;
}
void outputDepth(float _linearDepth) {
fragColor = floatToRgba4(_calculateFragDepth(_linearDepth));
}`)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloat16Encoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,b){a.Rgba4FloatEncoding=function(c){c.code.add(b.glsl`const float MAX_RGBA4_FLOAT =
15.0 / 16.0 +
15.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 / 16.0;
const vec4 FIXED_POINT_FACTORS_RGBA4 = vec4(1.0, 16.0, 16.0 * 16.0, 16.0 * 16.0 * 16.0);
vec4 floatToRgba4(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA4_FLOAT);
vec4 fixedPointU4 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS_RGBA4) * 16.0);
const float toU4AsFloat = 1.0 / 15.0;
return fixedPointU4 * toU4AsFloat;
}
const vec4 RGBA4_2_FLOAT_FACTORS = vec4(
15.0 / (16.0),
15.0 / (16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0 * 16.0)
);
float rgba4ToFloat(vec4 rgba) {
return dot(rgba, RGBA4_2_FLOAT_FACTORS);
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl":function(){define("exports ../ShaderOutput ../../shaderModules/Integer2PassUniform ../../shaderModules/IntegerPassUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DPassUniform".split(" "),function(a,b,c,f,e,n){a.OutputHighlight=function(d,k){const {fragment:h}=d;k.output!==b.ShaderOutput.Highlight?h.code.add(e.glsl`void calculateOcclusionAndOutputHighlight() {}`):
(h.uniforms.add(new n.Texture2DPassUniform("depthTexture",(l,m)=>m.mainDepth),new n.Texture2DPassUniform("highlightTexture",(l,m)=>m.highlightMixTexture),new f.IntegerPassUniform("highlightLevel",(l,m)=>m.highlightLevel),new c.Integer2PassUniform("highlightMixOrigin",(l,m)=>m.highlightMixOrigin)),d.outputs.add("fragHighlight","vec2",0),h.code.add(e.glsl`vec2 getAccumulatedHighlight() {
return texelFetch(highlightTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;
}
void outputHighlight(bool occluded) {
if (highlightLevel == 0) {
uint bits = occluded ? 3u : 1u;
fragHighlight = vec2(float(bits) / 255.0, 0.0);
} else {
int ll = (highlightLevel & 3) << 1;
int li = (highlightLevel >> 2) & 3;
uint bits;
if (occluded) {
bits = 3u << ll;
} else {
bits = 1u << ll;
}
vec2 combinedHighlight = getAccumulatedHighlight();
uint accumulatedI = uint(combinedHighlight[li] * 255.0);
combinedHighlight[li] = float(bits | accumulatedI) / 255.0;
fragHighlight = combinedHighlight;
}
}
bool isHighlightOccluded() {
float sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;
return gl_FragCoord.z > sceneDepth + 5e-7;
}
void calculateOcclusionAndOutputHighlight() {
outputHighlight(isHighlightOccluded());
}`),k.canHaveOverlay&&(h.constants.add("occlusionAndMask","int",85),h.code.add(e.glsl`void outputAllHighlights(vec2 highlightToAdd) {
if (highlightToAdd == vec2(0.0)) { discard; }
int occludedOrMask = isHighlightOccluded() ? 0xaa : 0;
ivec2 added = ivec2(highlightToAdd * 255.0);
ivec2 masked = (added & ivec2(occlusionAndMask)) | (ivec2(occludedOrMask) & (added<<1));
fragHighlight = vec2(masked) / 255.0;
}`)))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Integer2PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"ivec2",c.BindType.Pass,(d,k,h)=>d.setUniform2iv(e,n(k,h)))}}a.Integer2PassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"sampler2D",c.BindType.Pass,(d,k,h)=>d.bindTexture(e,n(k,h)))}}a.Texture2DPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define("exports ../../shaderModules/Float3PassUniform ../../shaderModules/Float4sPassUniform ../../shaderModules/FloatsPassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3PassUniform ../../../lib/VertexAttribute ../../../materials/VisualVariablePassParameters".split(" "),
function(a,b,c,f,e,n,d,k){a.VisualVariables=function(h,l){const {vertex:m,attributes:t}=h;l.hasVvInstancing&&(l.vvSize||l.vvColor)&&t.add(d.VertexAttribute.INSTANCEFEATUREATTRIBUTE,"vec4");l.vvSize?(m.uniforms.add(new b.Float3PassUniform("vvSizeMinSize",z=>z.vvSize.minSize)),m.uniforms.add(new b.Float3PassUniform("vvSizeMaxSize",z=>z.vvSize.maxSize)),m.uniforms.add(new b.Float3PassUniform("vvSizeOffset",z=>z.vvSize.offset)),m.uniforms.add(new b.Float3PassUniform("vvSizeFactor",z=>z.vvSize.factor)),
m.uniforms.add(new n.Matrix3PassUniform("vvSymbolRotationMatrix",z=>z.vvSymbolRotationMatrix)),m.uniforms.add(new b.Float3PassUniform("vvSymbolAnchor",z=>z.vvSymbolAnchor)),m.code.add(e.glsl`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),m.code.add(e.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${l.hasVvInstancing?e.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):m.code.add(e.glsl`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`);l.vvColor?(m.constants.add("vvColorNumber","int",k.vvColorNumber),m.uniforms.add(new f.FloatsPassUniform("vvColorValues",z=>z.vvColor.values,k.vvColorNumber),new c.Float4sPassUniform("vvColorColors",z=>z.vvColor.colors,k.vvColorNumber)),m.code.add(e.glsl`
      vec4 interpolateVVColor(float value) {
        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${l.hasVvInstancing?e.glsl`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }`:"vec4 vvColor() { return vec4(1.0); }"}
    `)):m.code.add(e.glsl`vec4 vvColor() { return vec4(1.0); }`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4sPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n,d){super(e,"vec4",c.BindType.Pass,(k,h,l)=>k.setUniform4fv(e,n(h,l)),d)}}a.Float4sPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n,d){super(e,"float",c.BindType.Pass,(k,h,l)=>k.setUniform1fv(e,n(h,l)),d)}}a.FloatsPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/VisualVariablePassParameters":function(){define(["exports","../../layers/support/FastSymbolUpdates","../lib/Material"],function(a,b,c){class f extends b.VisualVariablesParameters{constructor(){super(...arguments);
this.renderOccluded=c.RenderOccludedFlag.Occlude;this.isDecoration=!1}}a.VisualVariablePassParameters=f;a.vvColorNumber=8;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("exports ../../../../core/has ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/math/mat3 ../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../renderers/support/lengthUtils ../../support/debugFlags ../../webgl-engine/core/shaderModules/interfaces".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){function z(S){return null!==S&&void 0!==S}function r(S){return"number"===typeof S}function v(S){return"string"===typeof S}function w(S,ha){S&&S.push(ha)}function q(S,ha,G,ca=d.create()){S=S||0;ha=ha||0;G=G||0;0!==S&&n.rotateZ(ca,ca,-S/180*Math.PI);0!==ha&&n.rotateX(ca,ca,ha/180*Math.PI);0!==G&&n.rotateY(ca,ca,G/180*Math.PI);return ca}function g(S,ha,G,ca,pa){const Y=S.minSize,R=S.maxSize;if(S.useSymbolValue)return S=ca.symbolSize[G],ha.minSize[G]=S,ha.maxSize[G]=
S,ha.offset[G]=ha.minSize[G],ha.factor[G]=0,ha.type[G]=a.FastSizeType.DefinedSize,!0;if(z(S.field)){if(z(S.stops)){if(2===S.stops.length&&r(S.stops[0].size)&&r(S.stops[1].size))return p(S.stops[0].size,S.stops[1].size,S.stops[0].value,S.stops[1].value,ha,G),ha.type[G]=a.FastSizeType.DefinedSize,!0;w(pa,"Could not convert size info: stops only supported with 2 elements");return!1}if(r(Y)&&r(R)&&z(S.minDataValue)&&z(S.maxDataValue))return p(Y,R,S.minDataValue,S.maxDataValue,ha,G),ha.type[G]=a.FastSizeType.DefinedSize,
!0;if("unknown"===S.valueUnit)return w(pa,"Could not convert size info: proportional size not supported"),!1;if(null!=l.meterIn[S.valueUnit])return ha.minSize[G]=-Infinity,ha.maxSize[G]=Infinity,ha.offset[G]=0,ha.factor[G]=1/l.meterIn[S.valueUnit],ha.type[G]=a.FastSizeType.DefinedSize,!0;w(pa,"Could not convert size info: scale-dependent size not supported");return!1}if(!z(S.field)){if(S.stops?.[0]&&r(S.stops[0].size))return ha.minSize[G]=S.stops[0].size,ha.maxSize[G]=S.stops[0].size,ha.offset[G]=
ha.minSize[G],ha.factor[G]=0,ha.type[G]=a.FastSizeType.DefinedSize,!0;if(r(Y))return ha.minSize[G]=Y,ha.maxSize[G]=Y,ha.offset[G]=Y,ha.factor[G]=0,ha.type[G]=a.FastSizeType.DefinedSize,!0}w(pa,"Could not convert size info: unsupported variant of sizeInfo");return!1}function p(S,ha,G,ca,pa,Y){ca=0<Math.abs(ca-G)?(ha-S)/(ca-G):0;pa.minSize[Y]=0<ca?S:ha;pa.maxSize[Y]=0<ca?ha:S;pa.offset[Y]=S-G*ca;pa.factor[Y]=ca}function x(S,ha,G,ca){if(S.normalizationField||S.valueRepresentation)return w(ca,"Could not convert size info: unsupported property"),
null;var pa=S.field;if(null!=pa&&!v(pa))return w(ca,"Could not convert size info: field is not a string"),null;if(!ha.size)ha.size=new B(S.field);else if(S.field)if(!ha.size.field)ha.size.field=S.field;else if(S.field!==ha.size.field)return w(ca,"Could not convert size info: multiple fields in use"),null;switch(S.axis){case "width":return(pa=g(S,ha.size,0,G,ca))?ha:null;case "height":return(pa=g(S,ha.size,2,G,ca))?ha:null;case "depth":return(pa=g(S,ha.size,1,G,ca))?ha:null;case "width-and-depth":return(pa=
g(S,ha.size,0,G,ca))&&g(S,ha.size,1,G,ca),pa?ha:null;case null:case void 0:case "all":return(pa=(pa=(pa=g(S,ha.size,0,G,ca))&&g(S,ha.size,1,G,ca))&&g(S,ha.size,2,G,ca))?ha:null;default:return w(ca,`Could not convert size info: unknown axis "${S.axis}""`),null}}function u(S,ha,G){for(let ca=0;3>ca;++ca){let pa=ha.unitInMeters;S.type[ca]===a.FastSizeType.DefinedSize&&(pa*=ha.modelSize[ca],S.type[ca]=a.FastSizeType.DefinedScale);S.minSize[ca]/=pa;S.maxSize[ca]/=pa;S.offset[ca]/=pa;S.factor[ca]/=pa}if(S.type[0]!==
a.FastSizeType.Undefined)ha=0;else if(S.type[1]!==a.FastSizeType.Undefined)ha=1;else if(S.type[2]!==a.FastSizeType.Undefined)ha=2;else return w(G,"No size axis contains a valid size or scale"),!1;for(G=0;3>G;++G)S.type[G]===a.FastSizeType.Undefined&&(S.minSize[G]=S.minSize[ha],S.maxSize[G]=S.maxSize[ha],S.offset[G]=S.offset[ha],S.factor[G]=S.factor[ha],S.type[G]=S.type[ha]);return!0}function D(S,ha,G){S[4*ha]=G.r/255;S[4*ha+1]=G.g/255;S[4*ha+2]=G.b/255;S[4*ha+3]=G.a}function J(S,ha,G){if(S.normalizationField)return w(G,
"Could not convert color info: unsupported property"),null;if(v(S.field))if(S.stops){if(8<S.stops.length)return w(G,"Could not convert color info: too many color stops"),null;ha.color=new H(S.field);S=S.stops;for(G=0;8>G;++G){const ca=S[Math.min(G,S.length-1)];ha.color.values[G]=ca.value;D(ha.color.colors,G,ca.color)}}else return w(G,"Could not convert color info: missing stops or colors"),null;else if(S.stops&&0<=S.stops.length)for(S=S.stops&&0<=S.stops.length&&S.stops[0].color,ha.color={field:null,
values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},G=0;8>G;G++)ha.color.values[G]=Infinity,D(ha.color.colors,G,S);else return w(G,"Could not convert color info: no field and no colors/stops"),null;return ha}function E(S,ha,G){if(S.normalizationField)return w(G,"Could not convert opacity info: unsupported property"),null;if(v(S.field))if(S.stops){if(8<S.stops.length)return w(G,"Could not convert opacity info: too many opacity stops"),null;ha.opacity=
new N(S.field);S=S.stops;for(G=0;8>G;++G){const ca=S[Math.min(G,S.length-1)];ha.opacity.values[G]=ca.value;ha.opacity.opacityValues[G]=ca.opacity}}else return w(G,"Could not convert opacity info: missing stops or opacities"),null;else if(S.stops&&0<=S.stops.length)for(S=S.stops&&0<=S.stops.length?S.stops[0].opacity:0,ha.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},G=0;8>G;G++)ha.opacity.values[G]=Infinity,ha.opacity.opacityValues[G]=S;else return w(G,"Could not convert opacity info: no field and no opacities/stops"),
null;return ha}function L(S,ha,G){S=2===G&&"arithmetic"===S.rotationType;ha.offset[G]=S?90:0;ha.factor[G]=S?-1:1;ha.type[G]=1}function Q(S,ha,G){if(!v(S.field))return w(G,"Could not convert rotation info: field is not a string"),null;if(!ha.rotation)ha.rotation={field:S.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(S.field)if(!ha.rotation.field)ha.rotation.field=S.field;else if(S.field!==ha.rotation.field)return w(G,"Could not convert rotation info: multiple fields in use"),null;switch(S.axis){case "tilt":return L(S,
ha.rotation,0),ha;case "roll":return L(S,ha.rotation,1),ha;case null:case void 0:case "heading":return L(S,ha.rotation,2),ha;default:return w(G,`Could not convert rotation info: unknown axis "${S.axis}""`),null}}function M(S,ha,G){if(!S)return null;const ca=S.reduce((pa,Y)=>{if(!pa)return pa;if(Y.valueExpression)return w(G,"Could not convert visual variables: arcade expressions not supported"),null;switch(Y.type){case "size":return ha.supports.size?x(Y,pa,ha,G):pa;case "color":return ha.supports.color?
J(Y,pa,G):pa;case "opacity":return ha.supports.opacity?E(Y,pa,G):null;case "rotation":return ha.supports.rotation?Q(Y,pa,G):pa;default:return null}},new X);return 0<S.length&&ca&&!ca.size&&!ca.color&&!ca.opacity&&!ca.rotation||ca?.size&&!u(ca.size,ha,G)?null:ca}function C(S,ha,G){if(!!S!==!!ha||S&&S.field!==ha?.field)return!1;if(S&&"rotation"===G)for(G=0;3>G;G++)if(S.type[G]!==ha.type[G]||S.offset[G]!==ha.offset[G]||S.factor[G]!==ha.factor[G])return!1;return!0}function U(S,ha){S=new aa(S);S.vvSize&&
(S.vvSymbolAnchor=ha.anchor,n.identity(ma),q(ha.rotation[2],ha.rotation[0],ha.rotation[1],ma),S.vvSymbolRotationMatrix=S.vvSymbolRotationMatrix||e.create(),f.fromMat4(S.vvSymbolRotationMatrix,ma));return S}a.FastSizeType=void 0;(function(S){S[S.Undefined=0]="Undefined";S[S.DefinedSize=1]="DefinedSize";S[S.DefinedScale=2]="DefinedScale"})(a.FastSizeType||(a.FastSizeType={}));a.FastRotationType=void 0;(function(S){S[S.Undefined=0]="Undefined";S[S.DefinedAngle=1]="DefinedAngle"})(a.FastRotationType||
(a.FastRotationType={}));class y{constructor(S){this.field=S}}class B extends y{constructor(S){super(S);this.minSize=[0,0,0];this.maxSize=[0,0,0];this.offset=[0,0,0];this.factor=[0,0,0];this.type=[a.FastSizeType.Undefined,a.FastSizeType.Undefined,a.FastSizeType.Undefined]}}class H extends y{constructor(S){super(S);this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.values=[0,0,0,0,0,0,0,0]}}class N extends y{constructor(S){super(S);this.values=[0,0,0,0,0,0,0,0];this.opacityValues=
[0,0,0,0,0,0,0,0]}}class K extends y{constructor(S){super(S);this.offset=[0,0,0];this.factor=[1,1,1];this.type=[0,0,0]}}class X{}class V{constructor(S,ha=[1,1,1],G=[1,1,1],ca=1,pa=[0,0,0],Y=[1,1,1],R=[0,0,0]){this.supports=S;this.modelSize=ha;this.symbolSize=G;this.unitInMeters=ca;this.anchor=pa;this.scale=Y;this.rotation=R}}class da{constructor(S,ha,G){this.visualVariables=S;this.materialParameters=ha;this.requiresShaderTransformation=G}}class aa extends t.NoParameters{constructor(S){super();this.vvSize=
S?.size??null;this.vvColor=S?.color??null;this.vvOpacity=S?.opacity??null}}const fa=d.create(),Z=h.create(),ma=d.create();a.ConvertOptions=V;a.FastColorInfo=H;a.FastOpacityInfo=N;a.FastRotationInfo=K;a.FastSizeInfo=B;a.FastSymbolUpdatesState=da;a.FastVisualVariables=X;a.VisualVariablesParameters=aa;a.convertVisualVariables=M;a.evaluateModelTransform=function(S,ha,G){if(!S.vvSize)return G;n.copy(fa,G);G=S.vvSymbolRotationMatrix;n.set(ma,G[0],G[1],G[2],0,G[3],G[4],G[5],0,G[6],G[7],G[8],0,0,0,0,1);n.multiply(fa,
fa,ma);for(G=0;3>G;++G)Z[G]=c.clamp(S.vvSize.offset[G]+ha[0]*S.vvSize.factor[G],S.vvSize.minSize[G],S.vvSize.maxSize[G]);n.scale(fa,fa,Z);n.translate(fa,fa,S.vvSymbolAnchor);return fa};a.evaluateModelTransformScale=function(S,ha,G){if(!ha.vvSize)return k.set(S,1,1,1),S;for(let ca=0;3>ca;++ca)S[ca]=c.clamp(ha.vvSize.offset[ca]+G[0]*ha.vvSize.factor[ca],ha.vvSize.minSize[ca],ha.vvSize.maxSize[ca]);return S};a.getAttributeValue=function(S,ha){S=null==S?0:ha.attributes[S];return"number"===typeof S&&isFinite(S)?
S:0};a.getMaterialParameters=U;a.initFastSymbolUpdatesState=function(S,ha){return!S||m.debugFlags.TESTS_DISABLE_FAST_UPDATES?null:(S=M(S.visualVariables,ha))?new da(S,U(S,ha),!!S.size):null};a.updateFastSymbolUpdatesState=function(S,ha,G){if(!ha||!S)return!1;const ca=S.visualVariables;ha=M(ha.visualVariables,G);if(!(ha&&C(ca.size,ha.size,"size")&&C(ca.color,ha.color,"color")&&C(ca.rotation,ha.rotation,"rotation")&&C(ca.opacity,ha.opacity,"opacity")))return!1;S.visualVariables=ha;S.materialParameters=
U(ha,G);S.requiresShaderTransformation=!!ha.size;return!0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(a,b,c){b={unknown:1,inches:b.convertUnit(1,"meters","inches"),feet:b.convertUnit(1,"meters","feet"),"us-feet":b.convertUnit(1,"meters","us-feet"),yards:b.convertUnit(1,"meters","yards"),miles:b.convertUnit(1,"meters","miles"),"nautical-miles":b.convertUnit(1,
"meters","nautical-miles"),millimeters:b.convertUnit(1,"meters","millimeters"),centimeters:b.convertUnit(1,"meters","centimeters"),decimeters:b.convertUnit(1,"meters","decimeters"),meters:b.convertUnit(1,"meters","meters"),kilometers:b.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/b.lengthToDegrees(1,"meters",c.earth.radius)};a.meterIn=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl":function(){define("exports ./AlphaCutoff ../../shaderModules/FloatDrawUniform ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../../lib/basicInterfaces".split(" "),
function(a,b,c,f,e,n){function d(k,h,l){const m=k.fragment;switch(h.alphaDiscardMode){case n.AlphaDiscardMode.Blend:k.fragment.code.add(e.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < ${e.glsl.float(b.alphaCutoff)}) { discard; } }
      `);break;case n.AlphaDiscardMode.Opaque:m.code.add(e.glsl`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case n.AlphaDiscardMode.Mask:m.uniforms.add(l).code.add(e.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case n.AlphaDiscardMode.MaskBlend:m.uniforms.add(l).code.add(e.glsl`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}a.DiscardOrAdjustAlphaDraw=function(k,h){d(k,h,new c.FloatDrawUniform("textureAlphaCutoff",l=>l.textureAlphaCutoff))};a.DiscardOrAdjustAlphaPass=function(k,
h){d(k,h,new f.FloatPassUniform("textureAlphaCutoff",l=>l.textureAlphaCutoff))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatDrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"float",c.BindType.Draw,(d,k,h)=>d.setUniform1f(e,n(k,h)))}}a.FloatDrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../../../core/libs/gl-matrix-2/factories/vec2f64 ../attributes/TextureCoordinateAttribute.glsl ../attributes/VertexTextureCoordinates.glsl ./Normals.glsl ../../shaderModules/Float2PassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3PassUniform ../../shaderModules/Texture2DDrawUniform ../../shaderModules/Texture2DPassUniform ../../shaderTechnique/BindType ../../../lib/VertexAttribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z){a.ComputeNormalTexture=function(r,v){const w=r.fragment;v.hasVertexTangents?(r.attributes.add(z.VertexAttribute.TANGENT,"vec4"),r.varyings.add("vTangent","vec4"),v.doubleSidedMode===n.NormalsDoubleSidedMode.WindingOrder?w.code.add(k.glsl`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;
vec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`):w.code.add(k.glsl`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = vTangent.w;
vec3 tangent = normalize(vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`)):w.code.add(k.glsl`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {
vec3 Q1 = dFdx(pos);
vec3 Q2 = dFdy(pos);
vec2 stx = dFdx(st);
vec2 sty = dFdy(st);
float det = stx.t * sty.s - sty.t * stx.s;
vec3 T = stx.t * Q2 - sty.t * Q1;
T = T - normal * dot(normal, T);
T *= inversesqrt(max(dot(T,T), 1.e-10));
vec3 B = sign(det) * cross(normal, T);
return mat3(T, B, normal);
}`);v.textureCoordinateType!==f.TextureCoordinateType.None&&(r.include(e.VertexTextureCoordinates,v),w.uniforms.add(v.bindType===t.BindType.Pass?new m.Texture2DPassUniform("normalTexture",q=>q.textureNormal):new l.Texture2DDrawUniform("normalTexture",q=>q.textureNormal)),v.hasNormalTextureTransform&&(w.uniforms.add(new d.Float2PassUniform("scale",q=>q.scale??c.ONES)),w.uniforms.add(new h.Matrix3PassUniform("normalTextureTransformMatrix",q=>q.normalTextureTransformMatrix??b.IDENTITY))),w.code.add(k.glsl`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {
vec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;`),v.hasNormalTextureTransform&&w.code.add(k.glsl`mat3 normalTextureRotation = mat3(normalTextureTransformMatrix[0][0]/scale[0], normalTextureTransformMatrix[0][1]/scale[1], 0.0,
normalTextureTransformMatrix[1][0]/scale[0], normalTextureTransformMatrix[1][1]/scale[1], 0.0,
0.0, 0.0, 0.0 );
rawNormal.xy = (normalTextureRotation * vec3(rawNormal.x, rawNormal.y, 1.0)).xy;`),w.code.add(k.glsl`return tangentSpace * rawNormal;
}`))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl":function(){define(["exports","./TextureCoordinateAttribute.glsl","../util/TextureAtlasLookup.glsl","../../shaderModules/interfaces"],function(a,b,c,f){a.VertexTextureCoordinates=function(e,n){const {textureCoordinateType:d}=n;d!==b.TextureCoordinateType.None&&d!==b.TextureCoordinateType.COUNT&&(e.include(b.TextureCoordinateAttribute,n),(n=d===
b.TextureCoordinateType.Atlas)&&e.include(c.TextureAtlasLookup),e.fragment.code.add(f.glsl`
    vec4 textureLookup(sampler2D tex, vec2 uv) {
      return ${n?"textureAtlasLookup(tex, uv, vuvRegion)":"texture(tex, uv)"};
    }
  `))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,b){a.TextureAtlasLookup=function(c){c.fragment.code.add(b.glsl`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {
vec2 atlasScale = atlasRegion.zw - atlasRegion.xy;
vec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;
float maxdUV = 0.125;
vec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
vec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
return textureGrad(tex, uvAtlas, dUVdx, dUVdy);
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl":function(){define(["exports","../../../../../../core/compilerUtils","../../shaderModules/interfaces"],function(a,b,c){a.NormalsDoubleSidedMode=void 0;(function(f){f[f.None=0]="None";f[f.View=1]="View";f[f.WindingOrder=2]="WindingOrder";f[f.COUNT=3]="COUNT"})(a.NormalsDoubleSidedMode||(a.NormalsDoubleSidedMode={}));a.Normals=function(f,e){f=f.fragment;f.code.add(c.glsl`struct ShadingNormalParameters {
vec3 normalView;
vec3 viewDirection;
} shadingParams;`);switch(e.doubleSidedMode){case a.NormalsDoubleSidedMode.None:f.code.add(c.glsl`vec3 shadingNormal(ShadingNormalParameters params) {
return normalize(params.normalView);
}`);break;case a.NormalsDoubleSidedMode.View:f.code.add(c.glsl`vec3 shadingNormal(ShadingNormalParameters params) {
return dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);
}`);break;case a.NormalsDoubleSidedMode.WindingOrder:f.code.add(c.glsl`vec3 shadingNormal(ShadingNormalParameters params) {
return gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);
}`);break;default:b.neverReached(e.doubleSidedMode);case a.NormalsDoubleSidedMode.COUNT:}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"sampler2D",c.BindType.Draw,(d,k,h)=>d.bindTexture(e,n(k,h)))}}a.Texture2DDrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl":function(){define(["exports","../../shaderModules/interfaces","../../shaderModules/Texture2DPassUniform","../../../effects/ssao/SSAO"],function(a,b,c,f){a.EvaluateAmbientOcclusion=function(e,n){e=e.fragment;n.receiveAmbientOcclusion?(e.uniforms.add(new c.Texture2DPassUniform("ssaoTex",(d,k)=>k.ssao?.getTexture())),e.constants.add("blurSizePixelsInverse","float",1/f.blurSizePixels),e.code.add(b.glsl`float evaluateAmbientOcclusionInverse() {
vec2 ssaoTextureSizeInverse = 1.0 / vec2(textureSize(ssaoTex, 0));
return texture(ssaoTex, gl_FragCoord.xy * blurSizePixelsInverse * ssaoTextureSizeInverse).r;
}
float evaluateAmbientOcclusion() {
return 1.0 - evaluateAmbientOcclusionInverse();
}`)):e.code.add(b.glsl`float evaluateAmbientOcclusionInverse() { return 1.0; }
float evaluateAmbientOcclusion() { return 0.0; }`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/ssao/SSAO":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/time ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/libs/gl-matrix-2/math/vec2 ../../../webgl ../../../webgl/formats ../../../webgl/RenderNode ../../core/shaderLibrary/shading/ScreenSpaceConstants ./SSAOBlurTechnique ./SSAONoiseData ./SSAOParameters ./SSAOTechnique ../../lib/basicInterfaces ../../../../../chunks/SSAO.glsl ../../../../webgl/enums ../../../../webgl/Texture ../../../../webgl/TextureDescriptor".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L){a.SSAO=class extends v{constructor(Q){super(Q);this.consumes={required:["normals"]};this.produces=z.InternalRenderCategory.SSAO;this.isEnabled=()=>!1;this._enableTime=n.Milliseconds(0);this._passParameters=new p.SSAOPassParameters;this._drawParameters=new p.BlurDrawParameters}initialize(){const Q=Uint8Array.from(atob(g.noiseData),C=>C.charCodeAt(0)),M=new L.TextureDescriptor;M.wrapMode=J.TextureWrapMode.CLAMP_TO_EDGE;M.pixelFormat=J.PixelFormat.RGB;
M.wrapMode=J.TextureWrapMode.REPEAT;M.hasMipmap=!0;M.width=32;M.height=32;this._passParameters.noiseTexture=new E.Texture(this.renderingContext,M,Q);this.techniques.precompile(x.SSAOTechnique);this.techniques.precompile(q.SSAOBlurTechnique);this.addHandles(e.watch(()=>this.isEnabled(),()=>this._enableTime=n.Milliseconds(0)))}destroy(){this._passParameters.noiseTexture=f.disposeMaybe(this._passParameters.noiseTexture)}render(Q){const M=this.bindParameters;Q=Q.find(({name:Z})=>"normals"===Z);var C=
Q?.getTexture();const U=Q?.getTexture(J.DepthStencilAttachment);var y=this.fboCache;Q=M.camera;const B=Q.fullViewport[2],H=Q.fullViewport[3],N=Math.round(B/2),K=Math.round(H/2);var X=this.techniques.acquire(x.SSAOTechnique);const V=this.techniques.acquire(q.SSAOBlurTechnique);if(!X.compiled||!V.compiled)return this._enableTime=n.Milliseconds(performance.now()),this.requestRender(u.RenderRequestType.UPDATE),X.release(),V.release(),y.acquire(N,K,z.InternalRenderCategory.SSAO,r.ColorFormat.RED);0===
this._enableTime&&(this._enableTime=n.Milliseconds(performance.now()));const da=this.renderingContext;var aa=this.view.qualitySettings.fadeDuration,fa=c.clamp((w.distanceFadeEnd-Q.relativeElevation)/(w.distanceFadeEnd-w.distanceFadeStart),0,1);aa=0<aa?Math.min(aa,performance.now()-this._enableTime)/aa:1;fa*=aa;this._passParameters.normalTexture=C;this._passParameters.depthTexture=U;this._passParameters.projScale=1/Q.computeScreenPixelSizeAtDist(1);this._passParameters.intensity=2/D.getRadius(Q)**
6*fa;C=y.acquire(B,H,"ssao input",r.ColorFormat.RG);da.bindFramebuffer(C.fbo);da.setViewport(0,0,B,H);da.bindTechnique(X,M,this._passParameters,this._drawParameters);da.screen.draw();X.release();X=y.acquire(N,K,"ssao blur",r.ColorFormat.RED);da.bindFramebuffer(X.fbo);this._drawParameters.colorTexture=C.getTexture();t.set(this._drawParameters.blurSize,0,2/H);da.bindTechnique(V,M,this._passParameters,this._drawParameters);da.setViewport(0,0,N,K);da.screen.draw();C.release();y=y.acquire(N,K,z.InternalRenderCategory.SSAO,
r.ColorFormat.RED);da.bindFramebuffer(y.fbo);da.setViewport(0,0,B,H);da.setClearColor(1,1,1,0);da.clear(J.FramebufferBit.COLOR);this._drawParameters.colorTexture=X.getTexture();t.set(this._drawParameters.blurSize,2/B,0);da.bindTechnique(V,M,this._passParameters,this._drawParameters);da.setViewport(0,0,N,K);da.screen.draw();V.release();da.setViewport4fv(Q.fullViewport);X.release();1>aa&&this.requestRender(u.RenderRequestType.UPDATE);return y}};b.__decorate([d.property()],a.SSAO.prototype,"consumes",
void 0);b.__decorate([d.property()],a.SSAO.prototype,"produces",void 0);b.__decorate([d.property({constructOnly:!0})],a.SSAO.prototype,"techniques",void 0);b.__decorate([d.property({constructOnly:!0})],a.SSAO.prototype,"isEnabled",void 0);a.SSAO=b.__decorate([m.subclass("esri.views.3d.webgl-engine.effects.ssao.SSAO")],a.SSAO);a.blurSizePixels=2;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl":function(){define(["exports","../../core/libs/gl-matrix-2/factories/mat4f64",
"../../geometry/projection/computeTranslationToOriginAndRotation","../../geometry/projection/projectBuffer"],function(a,b,c,f){a.RenderCategory=void 0;(function(e){e.OPAQUE="opaque-color";e.TRANSPARENT="transparent-color";e.COMPOSITE="composite-color";e.FINAL="final-color"})(a.RenderCategory||(a.RenderCategory={}));a.InternalRenderCategory=void 0;(function(e){e.SSAO="ssao";e.LASERLINES="laserline-color";e.ANTIALIASING="aa-color";e.HIGHLIGHTS="highlight-color";e.MAGNIFIER="magnifier-color";e.OCCLUDED=
"occluded-color";e.VIEWSHED="viewshed-color";e.OPAQUE_ENVIRONMENT="opaque-environment-color";e.TRANSPARENT_ENVIRONMENT="transparent-environment-color"})(a.InternalRenderCategory||(a.InternalRenderCategory={}));a.fromRenderCoordinates=function(e,n,d,k,h,l,m){l=l||e.spatialReference;return f.projectBuffer(n,e.renderCoordsHelper.spatialReference,d,k,l,h,m)?k:null};a.renderCoordinateTransformAt=function(e,n,d,k){k||=b.create();d=d||e.spatialReference;return c.computeTranslationToOriginAndRotation(d,n,
k,e.renderCoordsHelper.spatialReference)?k:null};a.toRenderCoordinates=function(e,n,d,k,h,l,m){k=k||e.spatialReference;return f.projectBuffer(n,k,d,h,e.renderCoordsHelper.spatialReference,l,m)?h:null};a.webgl=null;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl/formats":function(){define(["exports"],function(a){a.ColorFormat=void 0;(function(b){b[b.RED=0]="RED";b[b.RG=1]="RG";b[b.RGBA4=2]="RGBA4";b[b.RGBA=3]="RGBA";b[b.RGBA_MIPMAP=4]="RGBA_MIPMAP";b[b.R16F=5]=
"R16F";b[b.RGBA16F=6]="RGBA16F"})(a.ColorFormat||(a.ColorFormat={}));a.DepthFormat=void 0;(function(b){b[b.DEPTH_STENCIL_TEXTURE=0]="DEPTH_STENCIL_TEXTURE";b[b.DEPTH16_BUFFER=1]="DEPTH16_BUFFER"})(a.DepthFormat||(a.DepthFormat={}));Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl/RenderNode":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ../webgl ../webgl-engine/lib/basicInterfaces".split(" "),
function(a,b,c,f,e,n,d,k){b=class extends b{constructor(h){super(h);this.view=null;this.consumes={required:[]};this.produces=d.RenderCategory.COMPOSITE;this.requireGeometryDepth=!1;this._dirty=!0}initialize(){this.addHandles([f.watch(()=>this.view.ready,h=>{h&&this.view._stage?.renderer.addRenderNode(this)},f.initial)])}destroy(){this.view._stage?.renderer?.removeRenderNode(this)}precompile(){}render(){throw new c("RenderNode:render-function-not-implemented","render() is not implemented.");}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get gl(){return this.view._stage.renderView.renderingContext.gl}acquireOutputFramebuffer(){var h=
this._frameBuffer?.getTexture()?.descriptor;h=this.view._stage.renderer.fboCache.acquire(h?.width??640,h?.height??480,this.produces);h.fbo?.initializeAndBind();return h}bindRenderTarget(){this._frameBuffer?.fbo?.initializeAndBind();return this._frameBuffer}requestRender(h){h===k.RenderRequestType.UPDATE&&this.view._stage?.renderView.requestRender(h);this._dirty=!0}resetWebGLState(){this.renderingContext.resetState();this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}get fboCache(){return this.view._stage.renderer.fboCache}get bindParameters(){return this.renderContext.bind}get renderingContext(){return this.view._stage.renderView.renderingContext}get renderContext(){return this.view._stage?.renderer.renderContext}updateAnimation(h){return this._dirty?
(this._dirty=!1,!0):!1}doRender(h){this._frameBuffer=h.find(({name:l})=>l===this.produces);try{return this.render(h)}finally{this._frameBuffer=null}}};a.__decorate([e.property({constructOnly:!0})],b.prototype,"view",void 0);a.__decorate([e.property({constructOnly:!0})],b.prototype,"consumes",void 0);a.__decorate([e.property()],b.prototype,"produces",void 0);return b=a.__decorate([n.subclass("esri.views.3d.webgl.RenderNode")],b)})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceConstants":function(){define(["exports"],
function(a){a.distanceFadeEnd=5E5;a.distanceFadeStart=3E5;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/ssao/SSAOBlurTechnique":function(){define("require exports ../../core/shaderTechnique/ReloadableShaderModule ../../core/shaderTechnique/ShaderTechnique ../../../../../chunks/SSAOBlur.glsl ../../../../webgl/renderState".split(" "),function(a,b,c,f,e,n){class d extends f.ShaderTechnique{constructor(k,h,l){super(k,h,new c.ReloadableShaderModule(e.SSAOBlur,
()=>new Promise((m,t)=>a(["../../shaders/SSAOBlur.glsl"],m,t))),l)}initializePipeline(){return n.makePipelineState({colorWrite:n.defaultColorWrite})}}b.SSAOBlurTechnique=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/SSAOBlur.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl ../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h){function l(){const t=new d.ShaderBuilder,z=t.fragment;t.include(b.ScreenSpacePass);z.include(c.ReadDepth);z.uniforms.add(new h.Texture2DPassUniform("depthMap",r=>r.depthTexture),new k.Texture2DDrawUniform("tex",r=>r.colorTexture),new f.Float2DrawUniform("blurSize",r=>r.blurSize),new e.FloatPassUniform("projScale",(r,v)=>{v=v.camera.distance;return 5E4<v?Math.max(0,r.projScale-(v-5E4)):r.projScale}));z.code.add(n.glsl`
    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {
      float c = texture(tex, uv).r;
      float d = linearDepthFromTexture(depthMap, uv);

      float ddiff = d - center_d;

      float w = exp(-r * r * ${n.glsl.float(.08)} - ddiff * ddiff * sharpness);
      wTotal += w;
      bTotal += w * c;
    }
  `);t.outputs.add("fragBlur","float");z.main.add(n.glsl`
    float b = 0.0;
    float w_total = 0.0;

    float center_d = linearDepthFromTexture(depthMap, uv);

    float sharpness = -0.05 * projScale / center_d;
    for (int r = -${n.glsl.int(4)}; r <= ${n.glsl.int(4)}; ++r) {
      float rf = float(r);
      vec2 uvOffset = uv + rf * blurSize;
      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);
    }
    fragBlur = b / w_total;`);return t}const m=Object.freeze(Object.defineProperty({__proto__:null,build:l},Symbol.toStringTag,{value:"Module"}));a.SSAOBlur=m;a.build=l})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl":function(){define(["exports","../shaderModules/interfaces","../../lib/VertexAttribute"],function(a,b,c){a.ScreenSpacePass=function(f,e=!0){f.attributes.add(c.VertexAttribute.POSITION,"vec2");e&&f.varyings.add("uv","vec2");f.vertex.main.add(b.glsl`
      gl_Position = vec4(position, 0.0, 1.0);
      ${e?b.glsl`uv = position * 0.5 + vec2(0.5);`:""}
  `)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl":function(){define(["exports","../../../../../../core/libs/gl-matrix-2/math/vec2","../../../../../../core/libs/gl-matrix-2/factories/vec2f64","../../shaderModules/Float2PassUniform","../../shaderModules/interfaces"],function(a,b,c,f,e){const n=c.create();a.ReadDepth=function(d){d.uniforms.add(new f.Float2PassUniform("zProjectionMap",(k,h)=>{k=h.camera.projectionMatrix;
return b.set(n,k[14],k[10])}));d.code.add(e.glsl`float linearizeDepth(float depth) {
float depthNdc = depth * 2.0 - 1.0;
float c1 = zProjectionMap[0];
float c2 = zProjectionMap[1];
return -(c1 / (depthNdc + c2 + 1e-7));
}`);d.code.add(e.glsl`float depthFromTexture(sampler2D depthTexture, vec2 uv) {
ivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));
float depth = texelFetch(depthTexture, iuv, 0).r;
return depth;
}`);d.code.add(e.glsl`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {
return linearizeDepth(depthFromTexture(depthTexture, uv));
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float2DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec2",c.BindType.Draw,(d,k,h,l)=>d.setUniform2fv(e,n(k,h,l)))}}a.Float2DrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define("exports ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../shaderTechnique/BindType ../../lib/Util".split(" "),
function(a,b,c,f,e,n){class d{constructor(){this._includedModules=new Map}include(g,p){this._includedModules.has(g)?this._includedModules.get(g):(this._includedModules.set(g,p),g(this.builder,p))}}class k extends d{constructor(){super(...arguments);this.vertex=new t;this.fragment=new t;this.attributes=new z;this.varyings=new r;this.extensions=new v;this.outputs=new w}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(g){const p=this.extensions.generateSource(g),
x=this.attributes.generateSource(g),u=this.varyings.generateSource(g);var D="vertex"===g?this.vertex:this.fragment;const J=D.uniforms.generateSource(),E=D.code.generateSource(),L=D.main.generateSource(),Q="vertex"===g?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";D=D.constants.generateSource();g=this.outputs.generateSource(g);
return`#version 300 es\n${p.join("\n")}\n\n${Q}\n\n${D.join("\n")}\n\n${J.join("\n")}\n\n${x.join("\n")}\n\n${u.join("\n")}\n\n${g.join("\n")}\n\n${E.join("\n")}\n\n${L.join("\n")}`}generateBindPass(g){const p=new Map;this.vertex.uniforms.entries.forEach(D=>{const J=D.bind[e.BindType.Pass];J&&p.set(D.name,J)});this.fragment.uniforms.entries.forEach(D=>{const J=D.bind[e.BindType.Pass];J&&p.set(D.name,J)});const x=Array.from(p.values()),u=x.length;return(D,J)=>{for(let E=0;E<u;++E)x[E](g,D,J)}}generateBindDraw(g){const p=
new Map;this.vertex.uniforms.entries.forEach(D=>{const J=D.bind[e.BindType.Draw];J&&p.set(D.name,J)});this.fragment.uniforms.entries.forEach(D=>{const J=D.bind[e.BindType.Draw];J&&p.set(D.name,J)});const x=Array.from(p.values()),u=x.length;return(D,J,E)=>{for(let L=0;L<u;++L)x[L](g,E,D,J)}}}class h{constructor(g){this._stage=g;this._entries=new Map}add(...g){for(const p of g)this._add(p);return this._stage}get(g){return this._entries.get(g)}_add(g){if(null==g)f.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder").error(`Trying to add null Uniform from ${Error().stack}.`);
else{if(this._entries.has(g.name)&&!this._entries.get(g.name).equals(g))throw new b(`Duplicate uniform name ${g.name} for different uniform type`);this._entries.set(g.name,g)}}generateSource(){return Array.from(this._entries.values()).map(g=>null!=g.arraySize?`uniform ${g.type} ${g.name}[${g.arraySize}];`:`uniform ${g.type} ${g.name};`)}get entries(){return Array.from(this._entries.values())}}class l{constructor(g){this._stage=g;this._bodies=[]}add(g){this._bodies.push(g);return this._stage}generateSource(){if(0<
this._bodies.length)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];throw new b("Shader does not contain main function body.");}}class m{constructor(g){this._stage=g;this._entries=[]}add(g){this._entries.push(g);return this._stage}generateSource(){return this._entries}}class t extends d{constructor(){super(...arguments);this.uniforms=new h(this);this.main=new l(this);this.code=new m(this);this.constants=new q(this)}get builder(){return this}}class z{constructor(){this._entries=[]}add(g,
p){this._entries.push([g,p])}generateSource(g){return"fragment"===g?[]:this._entries.map(p=>`in ${p[1]} ${p[0]};`)}}class r{constructor(){this._entries=new Map}add(g,p){this._entries.has(g)&&n.assert(this._entries.get(g)===p);this._entries.set(g,p)}generateSource(g){const p=[];this._entries.forEach((x,u)=>p.push("vertex"===g?`out ${x} ${u};`:`in ${x} ${u};`));return p}}class v{constructor(){this._entries=new Set}add(g){this._entries.add(g)}generateSource(g){const p="vertex"===g?v.ALLOWLIST_VERTEX:
v.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(x=>p.includes(x)).map(x=>`#extension ${x} : enable`)}}v.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];v.ALLOWLIST_VERTEX=[];class w{constructor(){this._entries=new Map}add(g,p,x=0){const u=this._entries.get(x);u?n.assert(u.name===g&&u.type===p,`Fragment shader output location ${x} occupied`):this._entries.set(x,{name:g,type:p})}generateSource(g){if("vertex"===g)return[];0===this._entries.size&&this._entries.set(0,
{name:w.DEFAULT_NAME,type:w.DEFAULT_TYPE});const p=[];this._entries.forEach((x,u)=>p.push(`layout(location = ${u}) out ${x.type} ${x.name};`));return p}}w.DEFAULT_TYPE="vec4";w.DEFAULT_NAME="fragColor";class q{constructor(g){this._stage=g;this._entries=new Set}add(g,p,x){let u="ERROR_CONSTRUCTOR_STRING";switch(p){case "float":u=q._numberToFloatStr(x);break;case "int":u=q._numberToIntStr(x);break;case "bool":u=x.toString();break;case "vec2":u=`vec2(${q._numberToFloatStr(x[0])},                            ${q._numberToFloatStr(x[1])})`;
break;case "vec3":u=`vec3(${q._numberToFloatStr(x[0])},                            ${q._numberToFloatStr(x[1])},                            ${q._numberToFloatStr(x[2])})`;break;case "vec4":u=`vec4(${q._numberToFloatStr(x[0])},                            ${q._numberToFloatStr(x[1])},                            ${q._numberToFloatStr(x[2])},                            ${q._numberToFloatStr(x[3])})`;break;case "ivec2":u=`ivec2(${q._numberToIntStr(x[0])},                             ${q._numberToIntStr(x[1])})`;
break;case "ivec3":u=`ivec3(${q._numberToIntStr(x[0])},                             ${q._numberToIntStr(x[1])},                             ${q._numberToIntStr(x[2])})`;break;case "ivec4":u=`ivec4(${q._numberToIntStr(x[0])},                             ${q._numberToIntStr(x[1])},                             ${q._numberToIntStr(x[2])},                             ${q._numberToIntStr(x[3])})`;break;case "mat2":case "mat3":case "mat4":u=`${p}(${Array.prototype.map.call(x,D=>q._numberToFloatStr(D)).join(", ")})`}this._entries.add(`const ${p} ${g} = ${u};`);
return this._stage}static _numberToIntStr(g){return g.toFixed(0)}static _numberToFloatStr(g){return Number.isInteger(g)?g.toFixed(1):g.toString()}generateSource(){return Array.from(this._entries)}}a.Code=m;a.Includes=d;a.Main=l;a.ShaderBuilder=k;a.Stage=t;a.Uniforms=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/ssao/SSAONoiseData":function(){define(["exports"],function(a){a.noiseData="eXKEvZaUc66cjIKElE1jlJ6MjJ6Ufkl+jn2fcXp5jBx7c6KEflSGiXuXeW6OWs+tfqZ2Yot2Y7Zzfo2BhniEj3xoiXuXj4eGZpqEaHKDWjSMe7palFlzc3BziYOGlFVzg6Zzg7CUY5JrjFF7eYJ4jIKEcyyEonSXe7qUfqZ7j3xofqZ2c4R5lFZ5Y0WUbppoe1l2cIh2ezyUho+BcHN2cG6DbpqJhqp2e1GcezhrdldzjFGUcyxjc3aRjDyEc1h7Sl17c6aMjH92pb6Mjpd4dnqBjMOEhqZleIOBYzB7gYx+fnqGjJuEkWlwnCx7fGl+c4hjfGyRe5qMlNOMfnqGhIWHc6OMi4GDc6aMfqZuc6aMzqJzlKZ+lJ6Me3qRfoFue0WUhoR5UraEa6qMkXiPjMOMlJOGe7JrUqKMjK6MeYRzdod+Sl17boiPc6qEeYBlcIh2c1WEe7GDiWCDa0WMjEmMdod+Y0WcdntzhmN8WjyMjKJjiXtzgYxYaGd+a89zlEV7e2GJfnd+lF1rcK5zc4p5cHuBhL6EcXp5eYB7fnh8iX6HjIKEeaxuiYOGc66RfG2Ja5hzjlGMjEmMe9OEgXuPfHyGhPeEdl6JY02McGuMfnqGhFiMa3WJfnx2l4hwcG1uhmN8c0WMc39og1GBbrCEjE2EZY+JcIh2cIuGhIWHe0mEhIVrc09+gY5+eYBlnCyMhGCDl3drfmmMgX15aGd+gYx+fnuRfnhzY1SMsluJfnd+hm98WtNrcIuGh4SEj0qPdkqOjFF7jNNjdnqBgaqUjMt7boeBhnZ4jDR7c5pze4GGjEFrhLqMjHyMc0mUhKZze4WEa117kWlwbpqJjHZ2eX2Bc09zeId+e0V7WlF7jHJ2l72BfId8l3eBgXyBe897jGl7c66cgW+Xc76EjKNbgaSEjGx4fId8jFFjgZB8cG6DhlFziZhrcIh2fH6HgUqBgXiPY8dahGFzjEmMhEFre2dxhoBzc5SGfleGe6alc7aUeYBlhKqUdlp+cH5za4OEczxza0Gcc4J2jHZ5iXuXjH2Jh5yRjH2JcFx+hImBjH+MpddCl3dreZeJjIt8ZW18bm1zjoSEeIOBlF9oh3N7hlqBY4+UeYFwhLJjeYFwaGd+gUqBYxiEYot2fqZ2ondzhL6EYyiEY02Ea0VjgZB8doaGjHxoc66cjEGEiXuXiXWMiZhreHx8frGMe75rY02Ec5pzfnhzlEp4a3VzjM+EhFFza3mUY7Zza1V5e2iMfGyRcziEhDyEkXZ2Y4OBnCx7g5t2eyBjgV6EhEFrcIh2dod+c4Z+nJ5zjm15jEmUeYxijJp7nL6clIpjhoR5WrZraGd+fnuRa6pzlIiMg6ZzfHx5foh+eX1ufnB5eX1ufnB5aJt7UqKMjIh+e3aBfm5lbYSBhGFze6J4c39oc0mUc4Z+e0V7fKFVe0WEdoaGY02Ec4Z+Y02EZYWBfH6HgU1+gY5+hIWUgW+XjJ57ebWRhFVScHuBfJ6PhBx7WqJzlM+Ujpd4gHZziX6HjHmEgZN+lJt5boiPe2GJgX+GjIGJgHZzeaxufnB5hF2JtdN7jJ57hp57hK6ElFVzg6ZzbmiEbndzhIWHe3uJfoFue3qRhJd2j3xoc65zlE1jc3p8lE1jhniEgXJ7e657vZaUc3qBh52BhIF4aHKDa9drgY5+c52GWqZzbpqJe8tjnM+UhIeMfo2BfGl+hG1zSmmMjKJjZVaGgX15c1lze0mEp4OHa3mUhIWHhDyclJ6MeYOJkXiPc0VzhFiMlKaEboSJa5Jze41re3qRhn+HZYWBe0mEc4p5fnORbox5lEp4hGFjhGGEjJuEc1WEhLZjeHeGa7KlfHx2hLaMeX1ugY5+hIWHhKGPjMN7c1WEho1zhoBzZYx7fnhzlJt5exyUhFFziXtzfmmMa6qMYyiEiXxweV12kZSMeWqXSl17fnhzxmmMrVGEe1mcc4p5eHeGjK6MgY5+doaGa6pzlGV7g1qBh4KHkXiPeW6OaKqafqZ2eXZ5e1V7jGd7boSJc3BzhJd2e0mcYot2h1RoY8dahK6EQmWEWjx7e1l2lL6UgXyBdnR4eU9zc0VreX1umqaBhld7fo2Bc6KEc5Z+hDyEcIeBWtNrfHyGe5qMhMuMe5qMhEGEbVVupcNzg3aHhIF4boeBe0mEdlptc39ofFl5Y8uUlJOGiYt2UmGEcyxjjGx4jFF7a657ZYWBnElzhp57iXtrgZN+tfOEhIOBjE2HgU1+e8tjjKNbiWCDhE15gUqBgYN7fnqGc66ce9d7iYSBj0qPcG6DnGGcT3eGa6qMZY+JlIiMl4hwc3aRdnqBlGV7eHJ2hLZjfnuRhDyEeX6MSk17g6Z+c6aUjHmEhIF4gXyBc76EZW18fGl+fkl+jCxrhoVwhDyUhIqGlL2DlI6EhJd2tdN7eYORhEGMa2Faa6pzc3Bzc4R5lIRznM+UY9eMhDycc5Z+c4p5c4iGY117pb6MgXuPrbJafnx2eYOJeXZ5e657hDyEcziElKZjfoB5eHeGj4WRhGGEe6KGeX1utTStc76EhFGJnCyMa5hzfH6HnNeceYB7hmN8gYuMhIVrczSMgYF8h3N7c5pza5hzjJqEYIRdgYuMlL2DeYRzhGGEeX1uhLaEc4iGeZ1zdl6JhrVteX6Me2iMfm5lWqJzSpqEa6pzdnmchHx2c6OMhNdrhoR5g3aHczxzeW52gV6Ejm15frGMc0Vzc4Z+l3drfniJe+9rWq5rlF1rhGGEhoVwe9OEfoh+e7pac09+c3qBY0lrhDycdnp2lJ6MiYOGhGCDc3aRlL2DlJt5doaGdnp2gYF8gWeOjF2Uc4R5c5Z+jEmMe7KEc4mEeYJ4dmyBe0mcgXiPbqJ7eYB7fmGGiYSJjICGlF1reZ2PnElzbpqJfH6Hc39oe4WEc5eJhK6EhqyJc3qBgZB8c09+hEmEaHKDhFGJc5SGiXWMUpaEa89zc6OMnCyMiXtrho+Be5qMc7KEjJ57dmN+hKGPjICGbmiEe7prdod+hGCDdnmchBx7eX6MkXZ2hGGEa657hm98jFFjY5JreYOJgY2EjHZ2a295Y3FajJ6Mc1J+YzB7e4WBjF2Uc4R5eV12gYxzg1qBeId+c9OUc5pzjFFjgY5+hFiMlIaPhoR5lIpjjIKBlNdSe7KEeX2BfrGMhIqGc65zjE2UhK6EklZ+QmWEeziMWqZza3VzdnR4foh+gYF8n3iJiZhrnKp7gYF8eId+lJ6Me1lrcIuGjKJjhmN8c66MjFF7a6prjJ6UnJ5zezyUfruRWlF7nI5zfHyGe657h4SEe8tjhBx7jFFjc09+c39ojICMeZeJeXt+YzRzjHZ2c0WEcIeBeXZ5onSXkVR+gYJ+eYFwdldzgYF7eX2BjJ6UiXuXlE1jh4SEe1mchLJjc4Z+hqZ7eXZ5bm1zlL6Ue5p7iWeGhKqUY5pzjKJjcIeBe8t7gXyBYIRdlEp4a3mGnK6EfmmMZpqEfFl5gYxzjKZuhGFjhoKGhHx2fnx2eXuMe3aBiWeGvbKMe6KGa5hzYzB7gZOBlGV7hmN8hqZlYot2Y117a6pzc6KEfId8foB5rctrfneJfJ6PcHN2hFiMc5pzjH92c0VzgY2EcElzdmCBlFVzg1GBc65zY4OBboeBcHiBeYJ4ewxzfHx5lIRzlEmEnLKEbk1zfJ6PhmN8eYBljBiEnMOEiXxwezyUcIeBe76EdsKEeX2BdnR4jGWUrXWMjGd7fkl+j4WRlEGMa5Jzho+BhDyEfnqMeXt+g3aHlE1jczClhNN7ZW18eHx8hGFjZW18iXWMjKJjhH57gYuMcIuGWjyMe4ZtjJuExmmMj4WRdntzi4GDhFFzYIRdnGGcjJp7Y0F7e4WEkbCGiX57fnSHa657a6prhBCMe3Z+SmmMjH92eHJ2hK6EY1FzexhrvbKMnI5za4OEfnd+eXuMhImBe897hLaMjN+EfG+BeIOBhF1+eZeJi4GDkXZ2eXKEgZ6Ejpd4c2GHa1V5e5KUfqZuhCx7jKp7lLZrg11+hHx2hFWUoot2nI5zgbh5mo9zvZaUe3qRbqKMfqZ2kbCGhFiM";
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/ssao/SSAOParameters":function(){define(["exports","../../../../../core/libs/gl-matrix-2/factories/vec2f64","../../core/shaderModules/interfaces"],function(a,b,c){class f extends c.NoParameters{constructor(){super(...arguments);this.projScale=1}}class e extends f{constructor(){super(...arguments);this.intensity=1}}class n extends c.NoParameters{}class d extends n{constructor(){super(...arguments);this.blurSize=
b.create()}}a.BlurDrawParameters=d;a.BlurPassParameters=f;a.SSAODrawParameters=n;a.SSAOPassParameters=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/ssao/SSAOTechnique":function(){define("require exports ../../core/shaderTechnique/ReloadableShaderModule ../../core/shaderTechnique/ShaderTechnique ../../../../../chunks/SSAO.glsl ../../../../webgl/renderState".split(" "),function(a,b,c,f,e,n){class d extends f.ShaderTechnique{constructor(k,h,l){super(k,
h,new c.ReloadableShaderModule(e.SSAO,()=>new Promise((m,t)=>a(["../../shaders/SSAO.glsl"],m,t))),l)}initializePipeline(){return n.makePipelineState({colorWrite:n.defaultColorWrite})}}b.SSAOTechnique=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/SSAO.glsl":function(){define("exports ../core/libs/gl-matrix-2/math/vec2 ../core/libs/gl-matrix-2/factories/vec2f64 ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){function t(){const v=new l.ShaderBuilder,w=v.fragment;v.include(f.ScreenSpacePass);v.include(n.CameraSpace);w.include(e.ReadDepth);w.uniforms.add(new k.FloatPassUniform("radius",(q,g)=>z(g.camera))).code.add(h.glsl`vec3 sphere[16] = vec3[16](
vec3(0.186937, 0.0, 0.0),
vec3(0.700542, 0.0, 0.0),
vec3(-0.864858, -0.481795, -0.111713),
vec3(-0.624773, 0.102853, -0.730153),
vec3(-0.387172, 0.260319, 0.007229),
vec3(-0.222367, -0.642631, -0.707697),
vec3(-0.01336, -0.014956, 0.169662),
vec3(0.122575, 0.1544, -0.456944),
vec3(-0.177141, 0.85997, -0.42346),
vec3(-0.131631, 0.814545, 0.524355),
vec3(-0.779469, 0.007991, 0.624833),
vec3(0.308092, 0.209288,0.35969),
vec3(0.359331, -0.184533, -0.377458),
vec3(0.192633, -0.482999, -0.065284),
vec3(0.233538, 0.293706, -0.055139),
vec3(0.417709, -0.386701, 0.442449)
);
float fallOffFunction(float vv, float vn, float bias) {
float f = max(radius * radius - vv, 0.0);
return f * f * f * max(vn - bias, 0.0);
}`);w.code.add(h.glsl`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {
vec3 v = Q - C;
float vv = dot(v, v);
float vn = dot(normalize(v), n_C);
return fallOffFunction(vv, vn, 0.1);
}`);w.uniforms.add(new m.Texture2DPassUniform("normalMap",q=>q.normalTexture),new m.Texture2DPassUniform("depthMap",q=>q.depthTexture),new k.FloatPassUniform("projScale",q=>q.projScale),new m.Texture2DPassUniform("rnm",q=>q.noiseTexture),new d.Float2PassUniform("rnmScale",(q,g)=>b.set(r,g.camera.fullWidth/q.noiseTexture.descriptor.width,g.camera.fullHeight/q.noiseTexture.descriptor.height)),new k.FloatPassUniform("intensity",q=>q.intensity),new d.Float2PassUniform("screenSize",(q,g)=>b.set(r,g.camera.fullWidth,
g.camera.fullHeight)));v.outputs.add("fragOcclusion","float");w.main.add(h.glsl`
      float depth = depthFromTexture(depthMap, uv);

      // Early out if depth is out of range, such as in the sky
      if (depth >= 1.0 || depth <= 0.0) {
        fragOcclusion = 1.0;
        return;
      }

      // get the normal of current fragment
      vec4 norm4 = texture(normalMap, uv);
      if(norm4.a != 1.0) {
        fragOcclusion = 1.0;
        return;
      }
      vec3 norm = vec3(-1.0) + 2.0 * norm4.xyz;

      float currentPixelDepth = linearizeDepth(depth);
      vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy, currentPixelDepth);

      float sum = 0.0;
      vec3 tapPixelPos;

      vec3 fres = normalize(2.0 * texture(rnm, uv * rnmScale).xyz - 1.0);

      // note: the factor 2.0 should not be necessary, but makes ssao much nicer.
      // bug or deviation from CE somewhere else?
      float ps = projScale / (2.0 * currentPixelPos.z * zScale.x + zScale.y);

      for(int i = 0; i < ${h.glsl.int(16)}; ++i) {
        vec2 unitOffset = reflect(sphere[i], fres).xy;
        vec2 offset = vec2(-unitOffset * radius * ps);

        // don't use current or very nearby samples
        if( abs(offset.x) < 2.0 || abs(offset.y) < 2.0){
          continue;
        }

        vec2 tc = vec2(gl_FragCoord.xy + offset);
        if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;
        vec2 tcTap = tc / screenSize;
        float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap);

        tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);

        sum += aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);
      }

      // output the result
      float A = max(1.0 - sum * intensity / float(${h.glsl.int(16)}), 0.0);

      // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4) / 2.2
      A = (pow(A, 0.2) + 1.2 * A * A * A * A) / 2.2;

      fragOcclusion = A;`);return v}function z(v){return Math.max(10,20*v.computeScreenPixelSizeAtDist(Math.abs(4*v.relativeElevation)))}const r=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,build:t,getRadius:z},Symbol.toStringTag,{value:"Module"}));a.SSAO=c;a.build=t;a.getRadius=z})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/math/vec2 ../../../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../../../../chunks/vec42 ../../../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../shaderModules/Float2PassUniform ../../shaderModules/Float4PassUniform ../../shaderModules/interfaces".split(" "),
function(a,b,c,f,e,n,d,k){function h(z){const r=z.projectionMatrix;return 0===r[11]?f.set(m,2/(z.fullWidth*r[0]),2/(z.fullHeight*r[5]),(1+r[12])/r[0],(1+r[13])/r[5]):f.set(m,-2/(z.fullWidth*r[0]),-2/(z.fullHeight*r[5]),(1-r[8])/r[0],(1-r[9])/r[5])}function l(z){return 0===z.projectionMatrix[11]?b.set(t,0,1):b.set(t,1,0)}const m=e.create(),t=c.create();a.CameraSpace=function(z){z.fragment.uniforms.add(new d.Float4PassUniform("projInfo",(r,v)=>h(v.camera)));z.fragment.uniforms.add(new n.Float2PassUniform("zScale",
(r,v)=>l(v.camera)));z.fragment.code.add(k.glsl`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)};a.getProjectionInfo=h;a.getZScale=l;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ./checkWebGLError ./enums ./GLObjectType ./TextureDescriptor ./ValidatedTextureDescriptor".split(" "),function(a,b,c,f,e,n,d,k){function h(q){(null!=q.width&&0>q.width||null!=q.height&&0>q.height||null!=q.depth&&0>q.depth)&&console.error("Negative dimension parameters are not allowed!")}function l(q,g){let p=
g.samplingMode,x=g.samplingMode;if(p===e.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||p===e.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)p=e.TextureSamplingMode.LINEAR,g.hasMipmap||(x=e.TextureSamplingMode.LINEAR);else if(p===e.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||p===e.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)p=e.TextureSamplingMode.NEAREST,g.hasMipmap||(x=e.TextureSamplingMode.NEAREST);q.texParameteri(g.target,q.TEXTURE_MAG_FILTER,p);q.texParameteri(g.target,q.TEXTURE_MIN_FILTER,x)}function m(q,
g){"number"===typeof g.wrapMode?(q.texParameteri(g.target,q.TEXTURE_WRAP_S,g.wrapMode),q.texParameteri(g.target,q.TEXTURE_WRAP_T,g.wrapMode)):(q.texParameteri(g.target,q.TEXTURE_WRAP_S,g.wrapMode.s),q.texParameteri(g.target,q.TEXTURE_WRAP_T,g.wrapMode.t))}function t(q,g){const p=q.capabilities.textureFilterAnisotropic;p&&q.gl.texParameterf(g.target,p.TEXTURE_MAX_ANISOTROPY,g.maxAnisotropy??1)}function z(q){return null!=q&&"type"in q&&"compressed"===q.type}function r(q){return null!=q&&!z(q)&&!(null!=
q&&"byteLength"in q)}function v(q){return q===e.TextureType.TEXTURE_3D||q===e.TextureType.TEXTURE_2D_ARRAY}function w(q,g,p,x=1){g=Math.max(g,p);q===e.TextureType.TEXTURE_3D&&(g=Math.max(g,x));return Math.round(Math.log(g)/Math.LN2)+1}c=class q{constructor(g,p=null,x=null){this.type=n.GLObjectType.Texture;this._glName=null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;if("context"in g)this._descriptor=g,x=p;else{g=k.ValidatedTextureDescriptor.validate(g,p);if(!g)throw new b("Texture descriptor invalid");
this._descriptor=g}this._descriptor.target===e.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(x):this.setData(x)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return d.estimateMemory(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(e.ResourceType.Texture,this);this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),
this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(g,p){const x=this._descriptor;if(x.width!==g||x.height!==p){if(this._wasImmutablyAllocated)throw new b("Immutable textures can't be resized!");x.width=g;x.height=p;this._descriptor.target===e.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(g=null){for(let p=e.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;p<=e.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;p++)this._setData(g,
p)}setData(g){this._setData(g)}_setData(g,p){const x=this._descriptor.context?.gl;if(x){f.checkWebGLError(x);this._glName||(this._glName=x.createTexture())&&this._descriptor.context.instanceCounter.increment(e.ResourceType.Texture,this);var u=this._descriptor,D=p??u.target,J=v(D);p=this._descriptor.context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(q.TEXTURE_UNIT_FOR_UPDATES);h(u);this._configurePixelStorage();f.checkWebGLError(x);var E=this._deriveInternalFormat();
if(r(g)){let L="width"in g?g.width:g.codedWidth,Q="height"in g?g.height:g.codedHeight;g instanceof HTMLVideoElement&&(L=g.videoWidth,Q=g.videoHeight);u.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(D,E,u.hasMipmap,L,Q,1);this._texImage(D,0,E,L,Q,1,g);f.checkWebGLError(x);u.hasMipmap&&(this.generateMipmap(),f.checkWebGLError(x));u.width||(u.width=L);u.height||(u.height=Q);J&&!u.depth&&(u.depth=1)}else{const {width:L,height:Q,depth:M}=u;if(null==L||null==Q)throw new b("Width and height must be specified!");
if(J&&null==M)throw new b("Depth must be specified!");u.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(D,E,u.hasMipmap,L,Q,M);if(z(g)){const C=g.levels;g=w(D,L,Q,M);g=Math.min(g-1,C.length-1);x.texParameteri(u.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,g);if(!(E in e.CompressedTextureFormat))throw new b("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((U,y,B,H)=>{this._compressedTexImage(D,U,E,y,B,H,C[Math.min(U,C.length-1)])},g)}else this._texImage(D,
0,E,L,Q,M,g),f.checkWebGLError(x),u.hasMipmap&&this.generateMipmap()}l(x,this._descriptor);m(x,this._descriptor);t(this._descriptor.context,this._descriptor);f.checkWebGLError(x);this._descriptor.context.bindTexture(p,q.TEXTURE_UNIT_FOR_UPDATES)}}updateData(g,p,x,u,D,J,E=0){J||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var L=this._descriptor;const Q=this._deriveInternalFormat(),{context:M,pixelFormat:C,dataType:U,
target:y,isImmutable:B}=L;if(B&&!this._wasImmutablyAllocated)throw new b("Cannot update immutable texture before allocation!");const H=M.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES,!0);(0>p||0>x||p+u>L.width||x+D>L.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();({gl:L}=M);E&&L.pixelStorei(L.UNPACK_SKIP_ROWS,E);r(J)?L.texSubImage2D(y,g,p,x,u,D,C,U,J):z(J)?L.compressedTexSubImage2D(y,g,p,x,u,D,Q,J.levels[g]):L.texSubImage2D(y,g,p,x,u,D,C,U,
J);E&&L.pixelStorei(L.UNPACK_SKIP_ROWS,0);M.bindTexture(H,q.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(g,p,x,u,D,J,E,L){L||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");var Q=this._descriptor;const M=this._deriveInternalFormat(),{context:C,pixelFormat:U,dataType:y,isImmutable:B,target:H}=Q;if(B&&!this._wasImmutablyAllocated)throw new b("Cannot update immutable texture before allocation!");v(H)||console.warn("Attempting to set 3D texture data on a non-3D texture");
const N=C.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);C.setActiveTexture(q.TEXTURE_UNIT_FOR_UPDATES);(0>p||0>x||0>u||p+D>Q.width||x+J>Q.height||u+E>Q.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();({gl:Q}=C);z(L)?(L=L.levels[g],Q.compressedTexSubImage3D(H,g,p,x,u,D,J,E,M,L)):Q.texSubImage3D(H,g,p,x,u,D,J,E,U,y,L);C.bindTexture(N,q.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const g=this._descriptor;if(!g.hasMipmap){if(this._wasImmutablyAllocated)throw new b("Cannot add mipmaps to immutable texture after allocation");
this._samplingModeDirty=g.hasMipmap=!0;h(g)}g.samplingMode===e.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,g.samplingMode=e.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):g.samplingMode===e.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,g.samplingMode=e.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const p=this._descriptor.context.bindTexture(this,q.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(q.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(g.target);
this._descriptor.context.bindTexture(p,q.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const g=this._descriptor;if(g.hasMipmap){if(this._wasImmutablyAllocated)throw new b("Cannot delete mipmaps to immutable texture after allocation");g.hasMipmap=!1;this._samplingModeDirty=!0;h(g)}g.samplingMode===e.TextureSamplingMode.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,g.samplingMode=e.TextureSamplingMode.LINEAR):g.samplingMode===e.TextureSamplingMode.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,g.samplingMode=
e.TextureSamplingMode.NEAREST)}setSamplingMode(g){g!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=g,this._samplingModeDirty=!0)}setWrapMode(g){g!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=g,h(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const g=this._descriptor,p=g.context.gl;this._samplingModeDirty&&(l(p,g),this._samplingModeDirty=!1);this._wrapModeDirty&&(m(p,g),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===
e.PixelFormat.DEPTH_STENCIL&&(this._descriptor.internalFormat=e.PixelFormat.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case e.PixelType.FLOAT:switch(this._descriptor.pixelFormat){case e.PixelFormat.RGBA:return this._descriptor.internalFormat=e.SizedPixelFormat.RGBA32F;case e.PixelFormat.RGB:return this._descriptor.internalFormat=e.SizedPixelFormat.RGB32F;default:throw new b("Unable to derive format");}case e.PixelType.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case e.PixelFormat.RGBA:return this._descriptor.internalFormat=
e.SizedPixelFormat.RGBA8;case e.PixelFormat.RGB:return this._descriptor.internalFormat=e.SizedPixelFormat.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===e.PixelFormat.DEPTH_STENCIL?e.PixelFormat.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const g=this._descriptor.context.gl,{unpackAlignment:p,flipped:x,preMultiplyAlpha:u}=this._descriptor;g.pixelStorei(g.UNPACK_ALIGNMENT,p);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,x?1:0);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
u?1:0)}_texStorage(g,p,x,u,D,J){const {gl:E}=this._descriptor.context;if(!(p in e.SizedPixelFormat))throw new b("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){x=x?w(g,u,D,J):1;if(v(g)){if(null==J)throw new b("Missing depth dimension for 3D texture upload");E.texStorage3D(g,x,p,u,D,J)}else E.texStorage2D(g,x,p,u,D);this._wasImmutablyAllocated=!0}}_texImage(g,p,x,u,D,J,E){const L=this._descriptor.context.gl,Q=v(g),{isImmutable:M,pixelFormat:C,dataType:U}=this._descriptor;
if(M){if(null!=E)if(Q){if(null==J)throw new b("Missing depth dimension for 3D texture upload");L.texSubImage3D(g,p,0,0,0,u,D,J,C,U,E)}else L.texSubImage2D(g,p,0,0,u,D,C,U,E)}else if(Q){if(null==J)throw new b("Missing depth dimension for 3D texture upload");L.texImage3D(g,p,x,u,D,J,0,C,U,E)}else L.texImage2D(g,p,x,u,D,0,C,U,E)}_compressedTexImage(g,p,x,u,D,J,E){const L=this._descriptor.context.gl,Q=v(g);if(this._descriptor.isImmutable){if(null!=E)if(Q){if(null==J)throw new b("Missing depth dimension for 3D texture upload");
L.compressedTexSubImage3D(g,p,0,0,0,u,D,J,x,E)}else L.compressedTexSubImage2D(g,p,0,0,u,D,x,E)}else if(Q){if(null==J)throw new b("Missing depth dimension for 3D texture upload");L.compressedTexImage3D(g,p,x,u,D,J,0,E)}else L.compressedTexImage2D(g,p,x,u,D,0,E)}_forEachMipmapLevel(g,p=Infinity){let {width:x,height:u,depth:D,hasMipmap:J,target:E}=this._descriptor;const L=E===e.TextureType.TEXTURE_3D;if(null==x||null==u||L&&null==D)throw new b("Missing texture dimensions for mipmap calculation");for(let Q=
0;;++Q){g(Q,x,u,D);if(!J||1===x&&1===u&&(!L||1===D)||Q>=p)break;x=Math.max(1,x>>1);u=Math.max(1,u>>1);L&&(D=Math.max(1,D>>1))}}};c.TEXTURE_UNIT_FOR_UPDATES=0;a.Texture=c;a.tracer=null;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(a){a.GLObjectType=void 0;var b=a.GLObjectType||(a.GLObjectType={});b[b.Texture=0]="Texture";b[b.RenderBuffer=1]="RenderBuffer";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/TextureDescriptor":function(){define(["exports","./enums","./Util"],function(a,b,c){class f{constructor(e=0,n=e){this.width=e;this.height=n;this.target=b.TextureType.TEXTURE_2D;this.pixelFormat=b.PixelFormat.RGBA;this.dataType=b.PixelType.UNSIGNED_BYTE;this.samplingMode=b.TextureSamplingMode.LINEAR;this.wrapMode=b.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=4;this.preMultiplyAlpha=!1;this.depth=1;this.isImmutable=
!1}}a.TextureDescriptor=f;a.estimateMemory=function(e){return 0>=e.width||0>=e.height?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(null==e.internalFormat?4:c.getBytesPerElementFormat(e.internalFormat))*(e.target===b.TextureType.TEXTURE_CUBE_MAP?6:1))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports","./enums","./TextureDescriptor"],function(a,b,c){class f extends c.TextureDescriptor{constructor(e,n){super();
this.context=e;Object.assign(this,n);switch(this.internalFormat){case b.SizedPixelFormat.R16F:case b.SizedPixelFormat.R16I:case b.SizedPixelFormat.R16UI:case b.SizedPixelFormat.R32F:case b.SizedPixelFormat.R32I:case b.SizedPixelFormat.R32UI:case b.SizedPixelFormat.R8_SNORM:case b.SizedPixelFormat.R8:case b.SizedPixelFormat.R8I:case b.SizedPixelFormat.R8UI:this.pixelFormat=b.PixelFormat.RED}}static validate(e,n){return new f(e,n)}}a.ValidatedTextureDescriptor=f;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl":function(){define("exports ../../../../../../core/compilerUtils ./EvaluateAmbientLighting.glsl ./EvaluateAmbientOcclusion.glsl ./MainLighting.glsl ./PhysicallyBasedRendering.glsl ./PhysicallyBasedRenderingParameters.glsl ./PiUtils.glsl ../../shaderModules/BooleanPassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../../lighting/SceneLighting".split(" "),function(a,
b,c,f,e,n,d,k,h,l,m,t){function z(v){v.constants.add("ambientBoostFactor","float",t.ambientBoost)}function r(v){v.uniforms.add(new l.FloatPassUniform("lightingGlobalFactor",(w,q)=>q.lighting.globalFactor))}a.EvaluateSceneLighting=function(v,w){const q=v.fragment;v.include(f.EvaluateAmbientOcclusion,w);w.pbrMode!==d.PBRMode.Disabled&&v.include(n.PhysicallyBasedRendering,w);v.include(c.EvaluateAmbientLighting,w);v.include(k.PiUtils);q.code.add(m.glsl`
    const float GAMMA_SRGB = 2.1;
    const float INV_GAMMA_SRGB = 0.4761904;
    ${w.pbrMode===d.PBRMode.Disabled?"":"const vec3 GROUND_REFLECTANCE \x3d vec3(0.2);"}
  `);z(q);r(q);e.addMainLightDirection(q);q.code.add(m.glsl`
    float additionalDirectedAmbientLight(vec3 vPosWorld) {
      float vndl = dot(${w.spherical?m.glsl`normalize(vPosWorld)`:m.glsl`vec3(0.0, 0.0, 1.0)`}, mainLightDirection);
      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));
    }
  `);e.addMainLightIntensity(q);q.code.add(m.glsl`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {
float additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);
return (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * mainLightIntensity;
}`);switch(w.pbrMode){case d.PBRMode.Disabled:case d.PBRMode.WaterOnIntegratedMesh:case d.PBRMode.Water:v.include(e.applyShading);q.code.add(m.glsl`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight) {
vec3 mainLighting = applyShading(normalWorld, shadow);
vec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);
vec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
vec3 totalLight = mainLighting + ambientLighting + additionalLight;
totalLight = min(totalLight, vec3(PI));
vec3 outColor = vec3((albedoLinear / PI) * totalLight);
return pow(outColor, vec3(INV_GAMMA_SRGB));
}`);break;case d.PBRMode.Normal:case d.PBRMode.Schematic:q.code.add(m.glsl`const float fillLightIntensity = 0.25;
const float horizonLightDiffusion = 0.4;
const float additionalAmbientIrradianceFactor = 0.02;
vec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec4 _emission, float additionalAmbientIrradiance)
{
vec3 viewDirection = -viewDir;
vec3 h = normalize(viewDirection + mainLightDirection);
PBRShadingInfo inputs;
inputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);
inputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);
vec3 reflectedView = normalize(reflect(viewDirection, normal));
inputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);
inputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
inputs.ssao = ssao;
inputs.metalness = mrr[0];
inputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`);q.code.add(m.glsl`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;
inputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));
inputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`);w.useFillLights?q.uniforms.add(new h.BooleanPassUniform("hasFillLights",(g,p)=>p.enableFillLights)):q.constants.add("hasFillLights","bool",!1);q.code.add(m.glsl`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);
ambientDir = ambientDir != vec3(0.0) ? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));
inputs.NdotAmbDir = hasFillLights ? abs(dot(normal, ambientDir)) : 1.0;
float NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);
vec3 mainLightIrradianceComponent = NdotL * (1.0 - shadow) * mainLightIntensity;
vec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * mainLightIntensity * fillLightIntensity;
vec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;
inputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;
inputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`);q.uniforms.add(new l.FloatPassUniform("lightingSpecularStrength",(g,p)=>p.lighting.mainLight.specularStrength),new l.FloatPassUniform("lightingEnvironmentStrength",(g,p)=>p.lighting.mainLight.environmentStrength)).code.add(m.glsl`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;
vec3 horizonRingH = normalize(viewDirection + horizonRingDir);
inputs.NdotH_Horizon = dot(normal, horizonRingH);
float NdotH = clamp(dot(normal, h), 0.0, 1.0);
vec3 mainLightRadianceComponent = lightingSpecularStrength * normalDistribution(NdotH, inputs.roughness) * mainLightIntensity * (1.0 - shadow);
vec3 horizonLightRadianceComponent = lightingEnvironmentStrength * normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * mainLightIntensity * fillLightIntensity;
vec3 ambientLightRadianceComponent = lightingEnvironmentStrength * calculateAmbientRadiance(ssao) + additionalLight;
float normalDirectionModifier = mix(1., min(mix(0.1, 2.0, (inputs.NdotNG + 1.) * 0.5), 1.0), clamp(inputs.roughness * 5.0, 0.0 , 1.0));
inputs.skyRadianceToSurface = (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;
inputs.groundRadianceToSurface = 0.5 * GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;
inputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`);q.code.add(m.glsl`
        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);
        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;
        vec3 emissionComponent = _emission.rgb == vec3(0.0) ? _emission.rgb : pow(_emission.rgb, vec3(GAMMA_SRGB));
        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;
        ${w.pbrMode!==d.PBRMode.Schematic||w.hasColorTexture?m.glsl`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`:m.glsl`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`}
        return outColor;
      }
    `);break;case d.PBRMode.Simplified:case d.PBRMode.TerrainWithWater:e.addMainLightDirection(q);e.addMainLightIntensity(q);q.code.add(m.glsl`const float roughnessTerrain = 0.5;
const float specularityTerrain = 0.5;
const vec3 fresnelReflectionTerrain = vec3(0.04);
vec3 evaluatePBRSimplifiedLighting(vec3 n, vec3 c, float shadow, float ssao, vec3 al, vec3 vd, vec3 nup) {
vec3 viewDirection = -vd;
vec3 h = normalize(viewDirection + mainLightDirection);
float NdotL = clamp(dot(n, mainLightDirection), 0.001, 1.0);
float NdotV = clamp(abs(dot(n, viewDirection)), 0.001, 1.0);
float NdotH = clamp(dot(n, h), 0.0, 1.0);
float NdotNG = clamp(dot(n, nup), -1.0, 1.0);
vec3 albedoLinear = pow(c, vec3(GAMMA_SRGB));
float lightness = 0.3 * albedoLinear[0] + 0.5 * albedoLinear[1] + 0.2 * albedoLinear[2];
vec3 f0 = (0.85 * lightness + 0.15) * fresnelReflectionTerrain;
vec3 f90 =  vec3(clamp(dot(f0, vec3(50.0 * 0.33)), 0.0, 1.0));
vec3 mainLightIrradianceComponent = (1. - shadow) * NdotL * mainLightIntensity;
vec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(n, ssao) + al;
vec3 ambientSky = ambientLightIrradianceComponent + mainLightIrradianceComponent;
vec3 indirectDiffuse = ((1.0 - NdotNG) * mainLightIrradianceComponent + (1.0 + NdotNG ) * ambientSky) * 0.5;
vec3 outDiffColor = albedoLinear * (1.0 - f0) * indirectDiffuse / PI;
vec3 mainLightRadianceComponent = normalDistribution(NdotH, roughnessTerrain) * mainLightIntensity;
vec2 dfg = prefilteredDFGAnalytical(roughnessTerrain, NdotV);
vec3 specularColor = f0 * dfg.x + f90 * dfg.y;
vec3 specularComponent = specularityTerrain * specularColor * mainLightRadianceComponent;
vec3 outColorLinear = outDiffColor + specularComponent;
vec3 outColor = pow(outColorLinear, vec3(INV_GAMMA_SRGB));
return outColor;
}`);break;default:b.neverReached(w.pbrMode);case d.PBRMode.COUNT:}};a.addAmbientBoostFactor=z;a.addLightingGlobalFactor=r;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl":function(){define("exports ../../../../../../chunks/vec32 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../chunks/vec42 ../../../../../../core/libs/gl-matrix-2/factories/vec4f64 ./PhysicallyBasedRenderingParameters.glsl ../../shaderModules/Float3PassUniform ../../shaderModules/Float4PassUniform ../../shaderModules/interfaces".split(" "),
function(a,b,c,f,e,n,d,k,h){const l=c.create(),m=e.create();a.EvaluateAmbientLighting=function(t,z){t=t.fragment;const r=void 0!==z.lightingSphericalHarmonicsOrder?z.lightingSphericalHarmonicsOrder:2;0===r?(t.uniforms.add(new d.Float3PassUniform("lightingAmbientSH0",(v,w)=>b.set(l,w.lighting.sh.r[0],w.lighting.sh.g[0],w.lighting.sh.b[0]))),t.code.add(h.glsl`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
return ambientLight * (1.0 - ambientOcclusion);
}`)):1===r?(t.uniforms.add(new k.Float4PassUniform("lightingAmbientSH_R",(v,w)=>f.set(m,w.lighting.sh.r[0],w.lighting.sh.r[1],w.lighting.sh.r[2],w.lighting.sh.r[3])),new k.Float4PassUniform("lightingAmbientSH_G",(v,w)=>f.set(m,w.lighting.sh.g[0],w.lighting.sh.g[1],w.lighting.sh.g[2],w.lighting.sh.g[3])),new k.Float4PassUniform("lightingAmbientSH_B",(v,w)=>f.set(m,w.lighting.sh.b[0],w.lighting.sh.b[1],w.lighting.sh.b[2],w.lighting.sh.b[3]))),t.code.add(h.glsl`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec4 sh0 = vec4(
0.282095,
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y
);
vec3 ambientLight = vec3(
dot(lightingAmbientSH_R, sh0),
dot(lightingAmbientSH_G, sh0),
dot(lightingAmbientSH_B, sh0)
);
return ambientLight * (1.0 - ambientOcclusion);
}`)):2===r&&(t.uniforms.add(new d.Float3PassUniform("lightingAmbientSH0",(v,w)=>b.set(l,w.lighting.sh.r[0],w.lighting.sh.g[0],w.lighting.sh.b[0])),new k.Float4PassUniform("lightingAmbientSH_R1",(v,w)=>f.set(m,w.lighting.sh.r[1],w.lighting.sh.r[2],w.lighting.sh.r[3],w.lighting.sh.r[4])),new k.Float4PassUniform("lightingAmbientSH_G1",(v,w)=>f.set(m,w.lighting.sh.g[1],w.lighting.sh.g[2],w.lighting.sh.g[3],w.lighting.sh.g[4])),new k.Float4PassUniform("lightingAmbientSH_B1",(v,w)=>f.set(m,w.lighting.sh.b[1],
w.lighting.sh.b[2],w.lighting.sh.b[3],w.lighting.sh.b[4])),new k.Float4PassUniform("lightingAmbientSH_R2",(v,w)=>f.set(m,w.lighting.sh.r[5],w.lighting.sh.r[6],w.lighting.sh.r[7],w.lighting.sh.r[8])),new k.Float4PassUniform("lightingAmbientSH_G2",(v,w)=>f.set(m,w.lighting.sh.g[5],w.lighting.sh.g[6],w.lighting.sh.g[7],w.lighting.sh.g[8])),new k.Float4PassUniform("lightingAmbientSH_B2",(v,w)=>f.set(m,w.lighting.sh.b[5],w.lighting.sh.b[6],w.lighting.sh.b[7],w.lighting.sh.b[8]))),t.code.add(h.glsl`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
vec4 sh1 = vec4(
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y,
1.092548 * normal.x * normal.y
);
vec4 sh2 = vec4(
1.092548 * normal.y * normal.z,
0.315392 * (3.0 * normal.z * normal.z - 1.0),
1.092548 * normal.x * normal.z,
0.546274 * (normal.x * normal.x - normal.y * normal.y)
);
ambientLight += vec3(
dot(lightingAmbientSH_R1, sh1),
dot(lightingAmbientSH_G1, sh1),
dot(lightingAmbientSH_B1, sh1)
);
ambientLight += vec3(
dot(lightingAmbientSH_R2, sh2),
dot(lightingAmbientSH_G2, sh2),
dot(lightingAmbientSH_B2, sh2)
);
return ambientLight * (1.0 - ambientOcclusion);
}`),z.pbrMode!==n.PBRMode.Normal&&z.pbrMode!==n.PBRMode.Schematic||t.code.add(h.glsl`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);
vec3 calculateAmbientRadiance(float ambientOcclusion)
{
vec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;
return ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;
}`))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl":function(){define("exports ../attributes/VertexTextureCoordinates.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DDrawUniform ../../shaderModules/Texture2DPassUniform ../../shaderTechnique/BindType ../../../lib/GLTextureMaterial ../../../materials/pbrUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l){a.PBRMode=void 0;(function(t){t[t.Disabled=0]="Disabled";t[t.Normal=1]="Normal";t[t.Schematic=2]="Schematic";t[t.Water=3]="Water";t[t.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh";t[t.Simplified=5]="Simplified";t[t.TerrainWithWater=6]="TerrainWithWater";t[t.COUNT=7]="COUNT"})(a.PBRMode||(a.PBRMode={}));class m extends h.GLTextureMaterialBindParameters{constructor(){super(...arguments);this.mrrFactors=l.schematicMRRFactors}}a.PBRRenderingParameters=m;a.PhysicallyBasedRenderingParameters=
function(t,z){const r=z.pbrMode,v=t.fragment;if(r!==a.PBRMode.Schematic&&r!==a.PBRMode.Disabled&&r!==a.PBRMode.Normal)v.code.add(e.glsl`void applyPBRFactors() {}`);else if(r===a.PBRMode.Disabled)v.code.add(e.glsl`void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);else if(r===a.PBRMode.Schematic)v.code.add(e.glsl`vec3 mrr = vec3(0.0, 0.6, 0.2);
float occlusion = 1.0;
void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);else{var {hasMetallicRoughnessTexture:w,hasMetallicRoughnessTextureTransform:q,hasOcclusionTexture:g,hasOcclusionTextureTransform:p,bindType:x}=z;(w||g)&&t.include(b.VertexTextureCoordinates,z);v.code.add(e.glsl`vec3 mrr;
float occlusion;`);w&&v.uniforms.add(x===k.BindType.Pass?new d.Texture2DPassUniform("texMetallicRoughness",u=>u.textureMetallicRoughness):new n.Texture2DDrawUniform("texMetallicRoughness",u=>u.textureMetallicRoughness));g&&v.uniforms.add(x===k.BindType.Pass?new d.Texture2DPassUniform("texOcclusion",u=>u.textureOcclusion):new n.Texture2DDrawUniform("texOcclusion",u=>u.textureOcclusion));v.uniforms.add(x===k.BindType.Pass?new f.Float3PassUniform("mrrFactors",u=>u.mrrFactors):new c.Float3DrawUniform("mrrFactors",
u=>u.mrrFactors));v.code.add(e.glsl`
    ${e.If(w,e.glsl`void applyMetallicRoughness(vec2 uv) {
            vec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;
            mrr[0] *= metallicRoughness.b;
            mrr[1] *= metallicRoughness.g;
          }`)}

    ${e.If(g,"void applyOcclusion(vec2 uv) { occlusion *\x3d textureLookup(texOcclusion, uv).r; }")}

    float getBakedOcclusion() {
      return ${g?"occlusion":"1.0"};
    }

    void applyPBRFactors() {
      mrr = mrrFactors;
      occlusion = 1.0;

      ${e.If(w,`applyMetallicRoughness(${q?"metallicRoughnessUV":"vuv0"});`)}
      ${e.If(g,`applyOcclusion(${p?"occlusionUV":"vuv0"});`)}
    }
  `)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GLTextureMaterial":function(){define("exports ../../../../core/maybe ../../../../core/promiseUtils ../core/shaderModules/interfaces ./basicInterfaces ./GLMaterial".split(" "),function(a,b,c,f,e,n){class d extends n{constructor(l){super(l);this._numLoading=0;this._disposed=!1;this._textures=l.textures;this._textureId=l.textureId;this._acquire(l.textureId,m=>this._texture=m);this._acquire(l.normalTextureId,
m=>this._textureNormal=m);this._acquire(l.emissiveTextureId,m=>this._textureEmissive=m);this._acquire(l.occlusionTextureId,m=>this._textureOcclusion=m);this._acquire(l.metallicRoughnessTextureId,m=>this._textureMetallicRoughness=m)}dispose(){super.dispose();this._texture=b.releaseMaybe(this._texture);this._textureNormal=b.releaseMaybe(this._textureNormal);this._textureEmissive=b.releaseMaybe(this._textureEmissive);this._textureOcclusion=b.releaseMaybe(this._textureOcclusion);this._textureMetallicRoughness=
b.releaseMaybe(this._textureMetallicRoughness);this._disposed=!0}ensureResources(l){return 0===this._numLoading?e.ResourceState.LOADED:e.ResourceState.LOADING}get textureBindParameters(){return new h(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:
null)}updateTexture(l){if(null==this._texture||l!==this._texture.id)this._texture=b.releaseMaybe(this._texture),this._textureId=l,this._acquire(this._textureId,m=>this._texture=m)}_acquire(l,m){null==l?m(null):(l=this._textures.acquire(l),c.isPromiseLike(l)?(++this._numLoading,l.then(t=>{this._disposed?(b.releaseMaybe(t),m(null)):m(t)}).finally(()=>--this._numLoading)):m(l))}}class k extends f.NoParameters{constructor(l=null){super();this.textureEmissive=l}}class h extends k{constructor(l=null,m=
null,t=null,z=null,r=null,v,w){super(t);this.texture=l;this.textureNormal=m;this.textureOcclusion=z;this.textureMetallicRoughness=r;this.scale=v;this.normalTextureTransformMatrix=w}}a.GLEmissiveTexturePassParameters=k;a.GLTextureMaterial=d;a.GLTextureMaterialBindParameters=h;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["./basicInterfaces"],function(a){class b{constructor(c){this._material=c.material;this._techniques=
c.techniques;this._output=c.output}dispose(){}get _stippleTextures(){return this._techniques.context.stippleTextures}get _markerTextures(){return this._techniques.context.markerTextures}acquireTechnique(c,f){return this._techniques.acquire(c,this._material.getConfiguration(this._output,f))}ensureResources(c){return a.ResourceState.LOADED}}return b})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl":function(){define(["exports","../../shaderModules/Float3PassUniform","../../shaderModules/interfaces"],
function(a,b,c){function f(n){n.uniforms.add(new b.Float3PassUniform("mainLightDirection",(d,k)=>k.lighting.mainLight.direction))}function e(n){n.uniforms.add(new b.Float3PassUniform("mainLightIntensity",(d,k)=>k.lighting.mainLight.intensity))}a.addMainLightDirection=f;a.addMainLightIntensity=e;a.applyShading=function(n){f(n.fragment);e(n.fragment);n.fragment.code.add(c.glsl`vec3 applyShading(vec3 shadingNormalWorld, float shadow) {
float dotVal = clamp(dot(shadingNormalWorld, mainLightDirection), 0.0, 1.0);
return mainLightIntensity * ((1.0 - shadow) * dotVal);
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl":function(){define(["exports","./AnalyticalSkyModel.glsl","./PhysicallyBasedRenderingParameters.glsl","./PiUtils.glsl","../../shaderModules/interfaces"],function(a,b,c,f,e){a.PhysicallyBasedRendering=function(n,d){const k=n.fragment.code;n.include(f.PiUtils);if(d.pbrMode===c.PBRMode.Normal||d.pbrMode===c.PBRMode.Schematic||d.pbrMode===c.PBRMode.Simplified||
d.pbrMode===c.PBRMode.TerrainWithWater)k.add(e.glsl`float normalDistribution(float NdotH, float roughness)
{
float a = NdotH * roughness;
float b = roughness / (1.0 - NdotH * NdotH + a * a);
return b * b * INV_PI;
}`),k.add(e.glsl`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);
const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);
const vec2 c2 = vec2(-1.04, 1.04);
vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {
vec4 r = roughness * c0 + c1;
float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;
return c2 * a004 + r.zw;
}`);if(d.pbrMode===c.PBRMode.Normal||d.pbrMode===c.PBRMode.Schematic)n.include(b.AnalyticalSkyModel),k.add(e.glsl`struct PBRShadingInfo
{
float NdotV;
float LdotH;
float NdotNG;
float RdotNG;
float NdotAmbDir;
float NdotH_Horizon;
vec3 skyRadianceToSurface;
vec3 groundRadianceToSurface;
vec3 skyIrradianceToSurface;
vec3 groundIrradianceToSurface;
float averageAmbientRadiance;
float ssao;
vec3 albedoLinear;
vec3 f0;
vec3 f90;
vec3 diffuseColor;
float metalness;
float roughness;
};`),k.add(e.glsl`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {
vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);
vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);
vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;
vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);
vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;
vec3 specularComponent = specularColor * indirectSpecular;
return (diffuseComponent + specularComponent);
}`),k.add(e.glsl`float gamutMapChanel(float x, vec2 p){
return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );
}`),k.add(e.glsl`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){
vec3 outColor;
vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));
outColor.x = gamutMapChanel(inColor.x, p) ;
outColor.y = gamutMapChanel(inColor.y, p) ;
outColor.z = gamutMapChanel(inColor.z, p) ;
return outColor;
}`)};a.PhysicallyBasedRenderingWater=function(n,d){const k=n.fragment.code;n.include(f.PiUtils);k.add(e.glsl`
  struct PBRShadingWater
  {
      float NdotL;   // cos angle between normal and light direction
      float NdotV;   // cos angle between normal and view direction
      float NdotH;   // cos angle between normal and half vector
      float VdotH;   // cos angle between view direction and half vector
      float LdotH;   // cos angle between light direction and half vector
      float VdotN;   // cos angle between view direction and normal vector
  };

  float dtrExponent = ${d.useCustomDTRExponentForWater?"2.2":"2.0"};
  `);k.add(e.glsl`vec3 fresnelReflection(float angle, vec3 f0, float f90) {
return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);
}`);k.add(e.glsl`float normalDistributionWater(float NdotH, float roughness)
{
float r2 = roughness * roughness;
float NdotH2 = NdotH * NdotH;
float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;
return r2 / denom;
}`);k.add(e.glsl`float geometricOcclusionKelemen(float LoH)
{
return 0.25 / (LoH * LoH);
}`);k.add(e.glsl`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)
{
vec3  F = fresnelReflection(props.VdotH, F0, F0Max);
float dSun = normalDistributionWater(props.NdotH, roughness);
float V = geometricOcclusionKelemen(props.LdotH);
float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);
float strengthSunHaze  = 1.2;
float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze) * strengthSunHaze;
return ((dSun + dSunHaze) * V) * F;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,b){a.AnalyticalSkyModel=function(c){c=c.fragment.code;c.add(b.glsl`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)
{
return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;
}`);c.add(b.glsl`float integratedRadiance(float cosTheta2, float roughness)
{
return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);
}`);c.add(b.glsl`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)
{
float cosTheta2 = 1.0 - RdotNG * RdotNG;
float intRadTheta = integratedRadiance(cosTheta2, roughness);
float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;
float sky = 2.0 - ground;
return (ground * ambientGround + sky * ambientSky) * 0.5;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports"],function(a){a.PiUtils=function(b){b.vertex.constants.add("PI","float",3.141592653589793);b.fragment.constants.add("PI","float",3.141592653589793);b.fragment.constants.add("LIGHT_NORMALIZATION","float",.3183098861837907);b.fragment.constants.add("INV_PI","float",.3183098861837907);b.fragment.constants.add("HALF_PI","float",1.570796326794897);
b.fragment.constants.add("TWO_PI","float",6.28318530717958)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"bool",c.BindType.Pass,(d,k,h)=>d.setUniform1b(e,n(k,h)))}}a.BooleanPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lighting/SceneLighting":function(){define("exports ../../../../core/mathUtils ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ./Lightsources ./SphericalHarmonics".split(" "),
function(a,b,c,f,e,n){class d{constructor(){this.color=f.create();this.intensity=1}}class k{constructor(){this.direction=f.create();this.ambient=new d;this.diffuse=new d}}class h{constructor(){this._shOrder=2;this._legacy=new k;this.noonFactor=this.globalFactor=.5;this._sphericalHarmonics=new e.SphericalHarmonicsAmbientLight;this._mainLight=new e.MainLight(f.create(),f.fromValues(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(m){n.combineLights(m,
this._shOrder,this._mainLight,this._sphericalHarmonics);c.copy(this._legacy.direction,this._mainLight.direction);m=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*m;this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*m;this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*m;c.scale(this._legacy.diffuse.color,this._mainLight.intensity,m);c.copy(l,this._legacy.diffuse.color);c.scale(l,l,.4*this.globalFactor);c.add(this._legacy.ambient.color,
this._legacy.ambient.color,l)}copyFrom(m){this._sphericalHarmonics.r=Array.from(m.sh.r);this._sphericalHarmonics.g=Array.from(m.sh.g);this._sphericalHarmonics.b=Array.from(m.sh.b);c.copy(this._mainLight.direction,m.mainLight.direction);c.copy(this._mainLight.intensity,m.mainLight.intensity);this._mainLight.castShadows=m.mainLight.castShadows;this._mainLight.specularStrength=m.mainLight.specularStrength;this._mainLight.environmentStrength=m.mainLight.environmentStrength;this.globalFactor=m.globalFactor;
this.noonFactor=m.noonFactor}lerpLighting(m,t,z){c.lerp(this._mainLight.intensity,m.mainLight.intensity,t.mainLight.intensity,z);this._mainLight.environmentStrength=b.lerp(m.mainLight.environmentStrength,t.mainLight.environmentStrength,z);this._mainLight.specularStrength=b.lerp(m.mainLight.specularStrength,t.mainLight.specularStrength,z);c.copy(this._mainLight.direction,t.mainLight.direction);this._mainLight.castShadows=t.mainLight.castShadows;this.globalFactor=b.lerp(m.globalFactor,t.globalFactor,
z);this.noonFactor=b.lerp(m.noonFactor,t.noonFactor,z);if(m.sh.r.length===t.sh.r.length)for(let r=0;r<t.sh.r.length;r++)this._sphericalHarmonics.r[r]=b.lerp(m.sh.r[r],t.sh.r[r],z),this._sphericalHarmonics.g[r]=b.lerp(m.sh.g[r],t.sh.g[r],z),this._sphericalHarmonics.b[r]=b.lerp(m.sh.b[r],t.sh.b[r],z);else for(m=0;m<t.sh.r.length;m++)this._sphericalHarmonics.r[m]=t.sh.r[m],this._sphericalHarmonics.g[m]=t.sh.g[m],this._sphericalHarmonics.b[m]=t.sh.b[m]}}const l=f.create();a.SceneLighting=h;a.SunLight=
k;a.ambientBoost=.4;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lighting/Lightsources":function(){define(["exports","../../../../core/libs/gl-matrix-2/factories/vec3f64"],function(a,b){class c{constructor(d=b.zeros()){this.intensity=d}}class f{constructor(d=b.zeros(),k=b.fromValues(.57735,.57735,.57735)){this.intensity=d;this.direction=k}}class e{constructor(d=b.zeros(),k=b.fromValues(.57735,.57735,.57735),h=!0,l=1,m=1){this.intensity=d;this.direction=
k;this.castShadows=h;this.specularStrength=l;this.environmentStrength=m}}class n{constructor(){this.r=[0];this.g=[0];this.b=[0]}}a.AmbientLight=c;a.FillLight=f;a.MainLight=e;a.SphericalHarmonicsAmbientLight=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lighting/SphericalHarmonics":function(){define("exports ../../../../core/mathUtils ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../lib/LongVectorMath ./Lightsources".split(" "),
function(a,b,c,f,e,n){function d(x){return(x+1)*(x+1)}function k(x){return b.clamp(Math.floor(Math.sqrt(x)-1),0,2)}function h(x,u,D){const J=x[0],E=x[1];x=x[2];D=D||[];D.length=d(u);0<=u&&(D[0]=.28209479177);1<=u&&(D[1]=.4886025119*J,D[2]=.4886025119*x,D[3]=.4886025119*E);2<=u&&(D[4]=1.09254843059*J*E,D[5]=1.09254843059*E*x,D[6]=.31539156525*(3*x*x-1),D[7]=1.09254843059*J*x,D[8]=.54627421529*(J*J-E*E));return D}function l(x,u){x=d(x);u=u||{r:[],g:[],b:[]};u.r.length=u.g.length=u.b.length=x;for(let D=
0;D<x;D++)u.r[D]=u.g[D]=u.b[D]=0;return u}function m(x,u){const D=k(u.r.length);for(const J of x)c.negate(g,J.direction),h(g,D,w),e.elementwiseProduct(w,p),e.scalarProduct(w,J.intensity[0],q),e.add(u.r,q),e.scalarProduct(w,J.intensity[1],q),e.add(u.g,q),e.scalarProduct(w,J.intensity[2],q),e.add(u.b,q);return u}function t(x,u){h(g,0,w);for(const D of x)u.r[0]+=w[0]*p[0]*D.intensity[0]*4*Math.PI,u.g[0]+=w[0]*p[0]*D.intensity[1]*4*Math.PI,u.b[0]+=w[0]*p[0]*D.intensity[2]*4*Math.PI;return u}const z=[],
r=[],v=[],w=[0],q=[0],g=f.create(),p=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];a.combineLights=function(x,u,D,J){l(u,J);c.set(D.intensity,0,0,0);u=!1;z.length=0;r.length=0;v.length=0;for(const E of x)E instanceof n.MainLight&&!u?(c.copy(D.direction,E.direction),c.copy(D.intensity,E.intensity),D.specularStrength=E.specularStrength,D.environmentStrength=E.environmentStrength,D.castShadows=E.castShadows,u=!0):E instanceof n.MainLight||E instanceof n.FillLight?z.push(E):
E instanceof n.AmbientLight?r.push(E):E instanceof n.SphericalHarmonicsAmbientLight&&v.push(E);m(z,J);t(r,J);for(const E of v)e.add(J.r,E.r),e.add(J.g,E.g),e.add(J.b,E.b)};a.computeCoefficients=h;a.initSHCoefficients=l;a.numberOfCoefficients=d;a.orderFromNumberOfCoefficients=k;a.projectAmbientLights=t;a.projectFillLights=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/LongVectorMath":function(){define(["exports"],function(a){a.add=function(b,c,f){f=
f||b;f.length=b.length;for(let e=0;e<b.length;e++)f[e]=b[e]+c[e];return f};a.dotProduct=function(b,c){let f=0;for(let e=0;e<b.length;e++)f+=b[e]*c[e];return f};a.elementwiseProduct=function(b,c,f){f=f||b;f.length=b.length;for(let e=0;e<b.length;e++)f[e]=b[e]*c[e];return f};a.scalarProduct=function(b,c,f){f=f||b;f.length=b.length;for(let e=0;e<b.length;e++)f[e]=b[e]*c;return f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl":function(){define("exports ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../util/RgbaFloat16Encoding.glsl ../../shaderModules/Float4PassUniform ../../shaderModules/IntegerPassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix4sDrawUniform ../../shaderModules/Matrix4sPassUniform ../../shaderModules/Texture2DPassUniform".split(" "),
function(a,b,c,f,e,n,d,k,h,l){function m(w){w=w.fragment;w.include(f.Rgba4FloatEncoding);w.uniforms.add(new l.Texture2DPassUniform("shadowMap",(q,g)=>g.shadowMap.depthTexture),new n.IntegerPassUniform("numCascades",(q,g)=>g.shadowMap.numCascades),new e.Float4PassUniform("cascadeDistances",(q,g)=>g.shadowMap.cascadeDistances)).code.add(d.glsl`int chooseCascade(float depth, out mat4 mat) {
vec4 distance = cascadeDistances;
int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;
mat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];
return i;
}
vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {
vec4 lv = mat * vec4(_vpos, 1.0);
lv.xy /= lv.w;
return 0.5 * lv.xyz + vec3(0.5);
}
vec2 cascadeCoordinates(int i, ivec2 textureSize, vec3 lvpos) {
float xScale = float(textureSize.y) / float(textureSize.x);
return vec2((float(i) + lvpos.x) * xScale, lvpos.y);
}
float readShadowMapDepth(ivec2 uv, sampler2D _depthTex) {
return rgba4ToFloat(texelFetch(_depthTex, uv, 0));
}
float posIsInShadow(ivec2 uv, vec3 lvpos, sampler2D _depthTex) {
return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;
}
float filterShadow(vec2 uv, vec3 lvpos, ivec2 texSize, sampler2D _depthTex) {
vec2 st = fract(uv * vec2(texSize) + vec2(0.5));
ivec2 base = ivec2(uv * vec2(texSize) - vec2(0.5));
float s00 = posIsInShadow(ivec2(base.x, base.y), lvpos, _depthTex);
float s10 = posIsInShadow(ivec2(base.x + 1, base.y), lvpos, _depthTex);
float s11 = posIsInShadow(ivec2(base.x + 1, base.y + 1), lvpos, _depthTex);
float s01 = posIsInShadow(ivec2(base.x, base.y + 1), lvpos, _depthTex);
return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);
}
float readShadowMap(const in vec3 _vpos, float _linearDepth) {
mat4 mat;
int i = chooseCascade(_linearDepth, mat);
if (i >= numCascades) { return 0.0; }
vec3 lvpos = lightSpacePosition(_vpos, mat);
if (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }
ivec2 size = textureSize(shadowMap, 0);
vec2 uv = cascadeCoordinates(i, size, lvpos);
return filterShadow(uv, lvpos, size, shadowMap);
}`)}class t extends d.NoParameters{constructor(){super(...arguments);this.origin=c.create()}}class z extends t{}class r extends d.NoParameters{constructor(){super(...arguments);this.modelTransformation=b.IDENTITY}}class v extends r{constructor(){super(...arguments);this.origin=c.create()}}a.ReadShadowMapDraw=function(w,q){q.receiveShadows&&(w.fragment.uniforms.add(new k.Matrix4sDrawUniform("shadowMapMatrix",(g,p)=>p.shadowMap.getShadowMapMatrices(g.origin),4)),m(w))};a.ReadShadowMapDrawParameters=
z;a.ReadShadowMapParameters=r;a.ReadShadowMapPass=function(w,q){q.receiveShadows&&(w.fragment.uniforms.add(new h.Matrix4sPassUniform("shadowMapMatrix",(g,p)=>p.shadowMap.getShadowMapMatrices(g.origin),4)),m(w))};a.ReadShadowMapPassParameters=v;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4sDrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,
n,d){super(e,"mat4",c.BindType.Draw,(k,h,l,m)=>k.setUniformMatrix4fv(e,n(h,l,m)),d)}}a.Matrix4sDrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n,d){super(e,"mat4",c.BindType.Pass,(k,h,l)=>k.setUniformMatrix4fv(e,n(h,l)),d)}}a.Matrix4sPassUniform=f;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl":function(){define(["exports","../output/ReadDepth.glsl","../../shaderModules/interfaces","../../shaderModules/Texture2DPassUniform"],function(a,b,c,f){a.terrainDepthTest=function(e,{occlusionPass:n,terrainDepthTest:d,cullAboveTerrain:k}){d?(e.fragment.include(b.ReadDepth),e.fragment.uniforms.add(new f.Texture2DPassUniform("terrainDepthTexture",(h,l)=>l.terrainDepth?.attachment)).code.add(c.glsl`
   ${n?"bool":"void"} terrainDepthTest(float fragmentDepth) {
      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;
      float linearDepth = linearizeDepth(depth);
      ${n?c.glsl`return fragmentDepth < linearDepth && depth < 1.0;`:c.glsl`if(fragmentDepth ${k?"\x3e":"\x3c\x3d"} linearDepth) discard;`}
    }`)):n?e.fragment.code.add(c.glsl`#define terrainDepthTest(fragmentDepth) false`):e.fragment.code.add(c.glsl`#define terrainDepthTest(fragmentDepth) {}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl":function(){define(["exports","../../../../../../core/libs/gl-matrix-2/factories/mat3f64","../attributes/TextureCoordinateAttribute.glsl","../../shaderModules/interfaces","../../shaderModules/Matrix3PassUniform"],
function(a,b,c,f,e){a.colorTextureUV=function(n,d){d.hasColorTextureTransform?(n.varyings.add("colorUV","vec2"),n.vertex.uniforms.add(new e.Matrix3PassUniform("colorTextureTransformMatrix",k=>k.colorTextureTransformMatrix??b.IDENTITY)).code.add(f.glsl`void forwardColorUV(){
colorUV = (colorTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)):n.vertex.code.add(f.glsl`void forwardColorUV(){}`)};a.emissiveTextureUV=function(n,d){d.hasEmissionTextureTransform&&d.textureCoordinateType!==c.TextureCoordinateType.None?(n.varyings.add("emissiveUV","vec2"),n.vertex.uniforms.add(new e.Matrix3PassUniform("emissiveTextureTransformMatrix",k=>k.emissiveTextureTransformMatrix??b.IDENTITY)).code.add(f.glsl`void forwardEmissiveUV(){
emissiveUV = (emissiveTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)):n.vertex.code.add(f.glsl`void forwardEmissiveUV(){}`)};a.metallicRoughnessTextureUV=function(n,d){d.hasMetallicRoughnessTextureTransform&&d.textureCoordinateType!==c.TextureCoordinateType.None?(n.varyings.add("metallicRoughnessUV","vec2"),n.vertex.uniforms.add(new e.Matrix3PassUniform("metallicRoughnessTextureTransformMatrix",k=>k.metallicRoughnessTextureTransformMatrix??b.IDENTITY)).code.add(f.glsl`void forwardMetallicRoughnessUV(){
metallicRoughnessUV = (metallicRoughnessTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)):n.vertex.code.add(f.glsl`void forwardMetallicRoughnessUV(){}`)};a.normalTextureUV=function(n,d){d.hasNormalTextureTransform&&d.textureCoordinateType!==c.TextureCoordinateType.None?(n.varyings.add("normalUV","vec2"),n.vertex.uniforms.add(new e.Matrix3PassUniform("normalTextureTransformMatrix",k=>k.normalTextureTransformMatrix??b.IDENTITY)).code.add(f.glsl`void forwardNormalUV(){
normalUV = (normalTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)):n.vertex.code.add(f.glsl`void forwardNormalUV(){}`)};a.occlusionTextureUV=function(n,d){d.hasOcclusionTextureTransform&&d.textureCoordinateType!==c.TextureCoordinateType.None?(n.varyings.add("occlusionUV","vec2"),n.vertex.uniforms.add(new e.Matrix3PassUniform("occlusionTextureTransformMatrix",k=>k.occlusionTextureTransformMatrix??b.IDENTITY)).code.add(f.glsl`void forwardOcclusionUV(){
occlusionUV = (occlusionTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)):n.vertex.code.add(f.glsl`void forwardOcclusionUV(){}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl":function(){define(["exports","../../../../layers/support/symbolColorUtils","./ColorConversion.glsl","../../shaderModules/interfaces"],function(a,b,c,f){a.MixExternalColor=function(e){e.include(c.ColorConversion);e.code.add(f.glsl`
    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {
      // workaround for artifacts in macOS using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      vec3 internalMixed = internalColor * textureColor;
      vec3 allMixed = internalMixed * externalColor;

      if (mode == ${f.glsl.int(b.ColorMixModeEnum.Multiply)}) {
        return allMixed;
      }
      if (mode == ${f.glsl.int(b.ColorMixModeEnum.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${f.glsl.int(b.ColorMixModeEnum.Replace)}) {
        return externalColor;
      }

      // tint (or something invalid)
      float vIn = rgb2v(internalMixed);
      vec3 hsvTint = rgb2hsv(externalColor);
      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);
      return hsv2rgb(hsvOut);
    }

    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {
      // workaround for artifacts in macOS using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      float internalMixed = internalOpacity * textureOpacity;
      float allMixed = internalMixed * externalOpacity;

      if (mode == ${f.glsl.int(b.ColorMixModeEnum.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${f.glsl.int(b.ColorMixModeEnum.Replace)}) {
        return externalOpacity;
      }

      // multiply or tint (or something invalid)
      return allMixed;
    }
  `)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,b){a.ColorConversion=function(c){c.code.add(b.glsl`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl":function(){define("exports ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/output/Emissions.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/util/AlphaCutoff ../core/shaderLibrary/util/ColorConversion.glsl ../core/shaderModules/interfaces ../lib/OITPass".split(" "),function(a,b,c,f,e,n,d,k){a.outputColorHighlightOID=function(h,
l){h.include(f.OutputHighlight,l);h.include(c.Emissions,l);h.fragment.include(n.ColorConversion);const m=l.output===b.ShaderOutput.ObjectAndLayerIdColor,t=b.isColorEmission(l.output),z=b.isColorOrColorEmission(l.output)&&l.oitPass===k.OITPass.ColorAlpha,r=b.isColorOrColorEmission(l.output)&&l.oitPass!==k.OITPass.ColorAlpha;l=l.discardInvisibleFragments;let v=0;(r||t||z)&&h.outputs.add("fragColor","vec4",v++);t&&h.outputs.add("fragEmission","vec4",v++);z&&h.outputs.add("fragAlpha","float",v++);h.fragment.code.add(d.glsl`
    void outputColorHighlightOID(vec4 finalColor, const in vec3 vWorldPosition) {
      ${d.If(m,d.glsl`finalColor.a = 1.0;`)}

      ${d.If(l,d.glsl`if (finalColor.a < ${d.glsl.float(e.alphaCutoff)}){
              discard;
              return;
            }`)}

      finalColor = highlightSlice(finalColor, vWorldPosition);
      ${d.If(z,d.glsl`fragColor = premultiplyAlpha(finalColor);
             fragAlpha = finalColor.a;`)}
      ${d.If(r,"fragColor \x3d finalColor;")}
      ${d.If(t,"fragEmission \x3d getEmissions();")}
      calculateOcclusionAndOutputHighlight();
      ${d.If(m,"outputObjectAndLayerIdColor();")}
    }
  `)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl":function(){define("exports ../ShaderOutput ../attributes/VertexTextureCoordinates.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DDrawUniform ../../shaderModules/Texture2DPassUniform ../../shaderTechnique/BindType ../../../lib/GLTextureMaterial".split(" "),function(a,
b,c,f,e,n,d,k,h,l){a.EmissionSource=void 0;(function(t){t[t.None=0]="None";t[t.Value=1]="Value";t[t.Texture=2]="Texture";t[t.COUNT=3]="COUNT"})(a.EmissionSource||(a.EmissionSource={}));class m extends l.GLEmissiveTexturePassParameters{}a.Emissions=function(t,z){if(b.isColorOrColorEmission(z.output)){var {emissionSource:r,hasEmissiveTextureTransform:v,bindType:w}=z,q=r===a.EmissionSource.Texture;q&&(t.include(c.VertexTextureCoordinates,z),t.fragment.uniforms.add(w===h.BindType.Pass?new k.Texture2DPassUniform("texEmission",
g=>g.textureEmissive):new d.Texture2DDrawUniform("texEmission",g=>g.textureEmissive)));(z=r===a.EmissionSource.Value||q)&&t.fragment.uniforms.add(w===h.BindType.Pass?new e.Float3PassUniform("emissionFactor",g=>g.emissiveFactor):new f.Float3DrawUniform("emissionFactor",g=>g.emissiveFactor));t.fragment.code.add(n.glsl`
    vec4 getEmissions() {
      vec4 emissions = ${z?"vec4(emissionFactor, 1.0)":"vec4(0.0)"};
      ${n.If(q,`emissions *= textureLookup(texEmission, ${v?"emissiveUV":"vuv0"});\n         emissions.w = emissions.rgb == vec3(0.0) ? 0.0: emissions.w;`)};
      return emissions;
    }
  `)}};a.EmissionsParameters=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/lodRendering/LodResources":function(){define(["exports","../../../../../core/arrayUtils","../ContentObject","../VertexAttribute"],function(a,b,c,f){class e{constructor(k,h=null){this.geometry=k;this.textures=h}get material(){return this.geometry.material}get numTriangles(){return this.geometry instanceof c.ContentObject?this.geometry.indexCount/3:this.geometry.elementCount/
3}}class n{constructor(k,h,l){this.components=k;this.minScreenSpaceRadius=h;this.pivotOffset=l;this.numVertices=b.unique(this.components.map(m=>m.geometry)).reduce((m,t)=>{t=t instanceof c.ContentObject?t.attributes.get(f.VertexAttribute.POSITION).indices.length:t.elementCount;return m+t},0)}}class d{constructor(k){this.levels=k;this.levels.sort((h,l)=>h.minScreenSpaceRadius===l.minScreenSpaceRadius?h.numVertices-l.numVertices:h.minScreenSpaceRadius-l.minScreenSpaceRadius)}}a.LodComponentResources=
e;a.LodLevelResources=n;a.LodResources=d;a.geometriesFromLodResources=function(k){const h=[];k.levels.forEach(l=>l.components.forEach(m=>{m.geometry instanceof c.ContentObject&&h.push(m.geometry)}));return b.unique(h)};a.materialsFromLodResources=function(k){const h=[];k.levels.forEach(l=>l.components.forEach(m=>h.push(m.geometry.material)));return b.unique(h)};a.texturesFromLodResources=function(k){const h=[];k.levels.forEach(l=>l.components.forEach(m=>{null!=m.textures&&h.push(...m.textures)}));
return b.unique(h)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/engineContent/sdfPrimitives":function(){define(["exports","../../../../core/has","../../../../core/floatRGBA","../../webgl-engine/lib/Texture","../../../webgl/enums"],function(a,b,c,f,e){function n(p,x=128,u=.5*x,D=0){switch(p){case "circle":return d(x,u);case "square":return k(x,u);case "cross":return l(x,u,D);case "x":return m(x,u,D);case "kite":return h(x,u);case "triangle":return t(x,u);
case "arrow":return z(x,u);default:return d(x,u)}}function d(p,x){const u=p/2-.5;return g(p,w(u,u,x/2))}function k(p,x){return r(p,x,!1)}function h(p,x){return r(p,x,!0)}function l(p,x,u=0){return v(p,x,!1,u)}function m(p,x,u=0){return v(p,x,!0,u)}function t(p,x){return g(p,q(p/2,x,x/2))}function z(p,x){const u=x/2,D=p/2,J=.8*x,E=w(D,(p-x)/2-J,Math.sqrt(J*J+u*u)),L=q(D,x,u);return g(p,(Q,M)=>Math.max(L(Q,M),-E(Q,M)))}function r(p,x,u){u&&(x/=Math.SQRT2);return g(p,(D,J)=>{D=D-.5*p+.25;J=-J+.5*p-.75;
if(u){const E=(D+J)/Math.SQRT2;J=(J-D)/Math.SQRT2;D=E}return Math.max(Math.abs(D),Math.abs(J))-.5*x})}function v(p,x,u,D=0){x-=D;u&&(x*=Math.SQRT2);const J=.5*x;return g(p,(E,L)=>{E-=.5*p;L=-L+.5*p-1;if(u){const Q=(E+L)/Math.SQRT2;L=(L-E)/Math.SQRT2;E=Q}E=Math.abs(E);L=Math.abs(L);E=E>L?E>J?Math.sqrt((E-J)*(E-J)+L*L):L:L>J?Math.sqrt(E*E+(L-J)*(L-J)):E;return E-=D/2})}function w(p,x,u){return(D,J)=>{D-=p;J-=x;return Math.sqrt(D*D+J*J)-u}}function q(p,x,u){const D=Math.sqrt(x*x+u*u);return(J,E)=>{E=
E-p+x/2+.75;return Math.max((x*(Math.abs(J-p)-u)+u*E)/D,-E)}}function g(p,x){const u=new Uint8Array(4*p*p);for(let D=0;D<p;D++)for(let J=0;J<p;J++){const E=J+p*D;let L=x(J,D);L=L/p+.5;c.packFloatRGBA(L,u,4*E)}return u}a.createArrow=z;a.createCircle=d;a.createCross=l;a.createKite=h;a.createPrimitive=n;a.createSquare=k;a.createTexture=function(p,x=128,u=.5*x,D=0){p=n(p,x,u,D);return new f.Texture(p,{mipmap:!1,wrap:{s:e.TextureWrapMode.CLAMP_TO_EDGE,t:e.TextureWrapMode.CLAMP_TO_EDGE},width:x,height:x,
components:4,noUnpackFlip:!0,reloadable:!0})};a.createTriangle=t;a.createX=m;a.defaultSymbolSizeRatio=.5;a.defaultTexSize=128;a.requiresHalfTexelOffset=function(p){return"cross"===p||"x"===p};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/floatRGBA":function(){define(["exports","./mathUtils"],function(a,b){function c(d,k=0){let h=0;for(let l=0;4>l;l++)h+=d[k+l]*e[l];return h}const f=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],n=c(new Uint8ClampedArray([255,
255,255,255]));a.packFloatRGBA=function(d,k,h=0){d=b.clamp(d,0,n);for(let t=0;4>t;t++){var l=Math,m=d*f[t];k[h+t]=l.floor.call(l,256*(m-Math.floor(m)))}};a.unpackFloatRGBA=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("exports ../../../../core/has ../../../../core/Error ../../../../core/Evented ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/typedArrayUtil ../../../../core/urlUtils ../../../../support/requestImageUtils ../../../../support/requestUtils ./basicInterfaces ./BasisUtil ./ContentObject ./ContentObjectType ./DDSUtil ./textureUtils ./Util ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x){function u(L){return L instanceof HTMLVideoElement?{width:L.videoWidth,height:L.videoHeight}:L}class D extends z.ContentObject{get parameters(){return this._parameters}constructor(L,Q){super();this._data=L;this.type=r.ContentObjectType.Texture;this._loadingController=this._loadingPromise=this._glTexture=null;this.events=new f;this._parameters={...E,...Q};this._startPreload(L)}dispose(){this.unload();this._data=this.frameUpdate=void 0}_startPreload(L){null!=
L&&(L instanceof HTMLVideoElement?(this.frameUpdate=Q=>this._frameUpdate(L,Q),this._startPreloadVideoElement(L)):L instanceof HTMLImageElement&&this._startPreloadImageElement(L))}_startPreloadVideoElement(L){if(!(k.isBlobProtocol(L.src)||"auto"===L.preload&&L.crossOrigin)){L.preload="auto";L.crossOrigin="anonymous";const Q=!L.paused;L.src=L.src;if(Q&&L.autoplay){const M=()=>{L.removeEventListener("canplay",M);L.play()};L.addEventListener("canplay",M)}}}_startPreloadImageElement(L){k.isDataProtocol(L.src)||
k.isBlobProtocol(L.src)||L.crossOrigin||(L.crossOrigin="anonymous",L.src=L.src)}_createDescriptor(L){const Q=new x.TextureDescriptor;Q.wrapMode=this._parameters.wrap??g.TextureWrapMode.REPEAT;Q.flipped=!this._parameters.noUnpackFlip;Q.samplingMode=this._parameters.mipmap?g.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:g.TextureSamplingMode.LINEAR;Q.hasMipmap=!!this._parameters.mipmap;Q.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha;Q.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?
L.parameters.maxMaxAnisotropy:1);return Q}get glTexture(){return this._glTexture}get memoryEstimate(){var L;if(!(L=this._glTexture?.usedMemory)){L=this._data;var Q=this._parameters;if(null==L)L=0;else if(d.isArrayBuffer(L)||d.isUint8Array(L))L=Q.encoding===m.TextureEncodingMimeType.KTX2_ENCODING?t.estimateMemoryKTX2(L,!!Q.mipmap):Q.encoding===m.TextureEncodingMimeType.BASIS_ENCODING?t.estimateMemoryBasis(L,!!Q.mipmap):L.byteLength;else{var {width:M,height:C}=L instanceof Image||L instanceof ImageData||
L instanceof HTMLCanvasElement||L instanceof HTMLVideoElement?u(L):Q;L=(Q.mipmap?4/3:1)*M*C*(Q.components||4)||0}}return L}load(L){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;const Q=this._data;if(null==Q)return this._glTexture=new p.Texture(L,this._createDescriptor(L),null);this._parameters.reloadable||(this._data=void 0);return"string"===typeof Q?this._loadFromURL(L,Q):Q instanceof Image?this._loadFromImageElement(L,Q):Q instanceof HTMLVideoElement?
this._loadFromVideoElement(L,Q):Q instanceof ImageData||Q instanceof HTMLCanvasElement?this._loadFromImage(L,Q):d.isUint8Array(Q)&&this._parameters.encoding===m.TextureEncodingMimeType.DDS_ENCODING?this._loadFromDDSData(L,Q):d.isArrayBuffer(Q)&&this._parameters.encoding===m.TextureEncodingMimeType.DDS_ENCODING?this._loadFromDDSData(L,new Uint8Array(Q)):(d.isArrayBuffer(Q)||d.isUint8Array(Q))&&this._parameters.encoding===m.TextureEncodingMimeType.KTX2_ENCODING?this._loadFromKTX2(L,Q):(d.isArrayBuffer(Q)||
d.isUint8Array(Q))&&this._parameters.encoding===m.TextureEncodingMimeType.BASIS_ENCODING?this._loadFromBasis(L,Q):d.isUint8Array(Q)?this._loadFromPixelData(L,Q):d.isArrayBuffer(Q)?this._loadFromPixelData(L,new Uint8Array(Q)):null}_frameUpdate(L,Q){if(null==this._glTexture||L.readyState<J.HAVE_CURRENT_DATA||Q===L.currentTime)return Q;this._glTexture.setData(L);this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap();this._parameters.updateCallback&&this._parameters.updateCallback();return L.currentTime}_loadFromDDSData(L,
Q){return this._glTexture=v.createDDSTexture(L,this._createDescriptor(L),Q)}_loadFromKTX2(L,Q){return this._loadAsync(()=>t.createTextureKTX2(L,this._createDescriptor(L),Q).then(M=>this._glTexture=M))}_loadFromBasis(L,Q){return this._loadAsync(()=>t.createTextureBasis(L,this._createDescriptor(L),Q).then(M=>this._glTexture=M))}_loadFromPixelData(L,Q){q.assert(0<this._parameters.width&&0<this._parameters.height);const M=this._createDescriptor(L);M.pixelFormat=1===this._parameters.components?g.PixelFormat.LUMINANCE:
3===this._parameters.components?g.PixelFormat.RGB:g.PixelFormat.RGBA;M.width=this._parameters.width??0;M.height=this._parameters.height??0;return this._glTexture=new p.Texture(L,M,Q)}_loadFromURL(L,Q){return this._loadAsync(async M=>{const C=await h.requestImage(Q,{signal:M});n.throwIfAborted(M);return this._loadFromImage(L,C)})}_loadFromImageElement(L,Q){return Q.complete?this._loadFromImage(L,Q):this._loadAsync(async M=>{const C=await l.loadImageAsync(Q,Q.src,!1,M);n.throwIfAborted(M);return this._loadFromImage(L,
C)})}_loadFromVideoElement(L,Q){return Q.readyState>=J.HAVE_CURRENT_DATA?this._loadFromImage(L,Q):this._loadFromVideoElementAsync(L,Q)}_loadFromVideoElementAsync(L,Q){return this._loadAsync(M=>new Promise((C,U)=>{const y=()=>{Q.removeEventListener("loadeddata",B);Q.removeEventListener("error",H);e.removeMaybe(N)},B=()=>{Q.readyState>=J.HAVE_CURRENT_DATA&&(y(),C(this._loadFromImage(L,Q)))},H=K=>{y();U(K||new c("Failed to load video"))};Q.addEventListener("loadeddata",B);Q.addEventListener("error",
H);const N=n.onAbort(M,()=>H(n.createAbortError()))}))}_loadFromImage(L,Q){if(!(Q instanceof HTMLVideoElement)){var {maxTextureSize:M}=L.parameters;Q=this._parameters.downsampleUncompressed?w.downsampleImage(Q,M):w.ensureImageMaxSize(Q,M)}M=u(Q);this._parameters.width=M.width;this._parameters.height=M.height;const C=this._createDescriptor(L);C.pixelFormat=3===this._parameters.components?g.PixelFormat.RGB:g.PixelFormat.RGBA;C.width=M.width;C.height=M.height;return this._glTexture=new p.Texture(L,C,
Q)}_loadAsync(L){const Q=new AbortController;this._loadingController=Q;const M=L(Q.signal);this._loadingPromise=M;L=()=>{this._loadingController===Q&&(this._loadingController=null);this._loadingPromise===M&&(this._loadingPromise=null)};M.then(L,L);return M}unload(){this._glTexture=e.disposeMaybe(this._glTexture);if(null!=this._loadingController){const L=this._loadingController;this._loadingPromise=this._loadingController=null;L.abort()}this.events.emit("unloaded")}}var J;(function(L){L[L.HAVE_NOTHING=
0]="HAVE_NOTHING";L[L.HAVE_METADATA=1]="HAVE_METADATA";L[L.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA";L[L.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA";L[L.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"})(J||={});const E={wrap:{s:g.TextureWrapMode.REPEAT,t:g.TextureWrapMode.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1};a.Texture=D;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/requestImageUtils":function(){define(["exports","../request"],function(a,
b){a.requestImage=async function(c,f){({data:c}=await b(c,{responseType:"image",...f}));return c};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/BasisUtil":function(){define("exports ../../../../libs/basisu/BasisU ../../../../libs/basisu/TextureFormat ../../../webgl/enums ../../../webgl/Texture ../../../webgl/Util".split(" "),function(a,b,c,f,e,n){async function d(){null==z&&(z=b.getBasisTranscoder(),t=await z);return z}function k(r,v,w,q,g){v=n.getBytesPerElementFormat(v?
f.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:f.CompressedTextureFormat.COMPRESSED_RGB8_ETC2);return Math.ceil(w*q*v*(g&&1<r?(4**r-1)/(3*4**(r-1)):1))}function h(r){return 1<=r.getNumImages()&&!r.isUASTC()}function l(r){return 1<=r.getFaces()&&r.isETC1S()}function m(r,v,w,q,g,p,x,u){const {compressedTextureETC:D,compressedTextureS3TC:J}=r.capabilities,[E,L]=D?q?[c.TextureFormat.ETC2_RGBA,f.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC]:[c.TextureFormat.ETC1_RGB,f.CompressedTextureFormat.COMPRESSED_RGB8_ETC2]:
J?q?[c.TextureFormat.BC3_RGBA,f.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[c.TextureFormat.BC1_RGB,f.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT]:[c.TextureFormat.RGBA32,f.PixelFormat.RGBA];w=v.hasMipmap?w:Math.min(1,w);q=[];for(let Q=0;Q<w;Q++)q.push(new Uint8Array(x(Q,E))),u(Q,E,q[Q]);v.internalFormat=L;v.hasMipmap=1<q.length;v.samplingMode=v.hasMipmap?f.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:f.TextureSamplingMode.LINEAR;v.width=g;v.height=p;return new e.Texture(r,v,{type:"compressed",
levels:q})}let t=null,z=null;a.createTextureBasis=async function(r,v,w){null==t&&(t=await d());const q=new t.BasisFile(new Uint8Array(w));if(!h(q))return null;q.startTranscoding();r=m(r,v,q.getNumLevels(0),q.getHasAlpha(),q.getImageWidth(0,0),q.getImageHeight(0,0),(g,p)=>q.getImageTranscodedSizeInBytes(0,g,p),(g,p,x)=>q.transcodeImage(x,0,g,p,0,0));q.close();q.delete();return r};a.createTextureKTX2=async function(r,v,w){null==t&&(t=await d());const q=new t.KTX2File(new Uint8Array(w));if(!l(q))return null;
q.startTranscoding();r=m(r,v,q.getLevels(),q.getHasAlpha(),q.getWidth(),q.getHeight(),(g,p)=>q.getImageTranscodedSizeInBytes(g,0,0,p),(g,p,x)=>q.transcodeImage(x,g,0,0,p,0,-1,-1));q.close();q.delete();return r};a.estimateMemoryBasis=function(r,v){if(null==t)return r.byteLength;r=new t.BasisFile(new Uint8Array(r));v=h(r)?k(r.getNumLevels(0),r.getHasAlpha(),r.getImageWidth(0,0),r.getImageHeight(0,0),v):0;r.close();r.delete();return v};a.estimateMemoryKTX2=function(r,v){if(null==t)return r.byteLength;
r=new t.KTX2File(new Uint8Array(r));v=l(r)?k(r.getLevels(),r.getHasAlpha(),r.getWidth(),r.getHeight(),v):0;r.close();r.delete();return v};a.loadBasis=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/libs/basisu/BasisU":function(){define(["require","exports","../../assets"],function(a,b,c){let f;b.getBasisTranscoder=function(){f??=(async()=>{const e=await (await new Promise((n,d)=>a(["../../chunks/basis_transcoder"],n,d))).default({locateFile:n=>c.getAssetUrl(`esri/libs/basisu/${n}`)});
e.initializeBasis();return e})();return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/libs/basisu/TextureFormat":function(){define(["exports"],function(a){a.TextureFormat=void 0;var b=a.TextureFormat||(a.TextureFormat={});b[b.ETC1_RGB=0]="ETC1_RGB";b[b.ETC2_RGBA=1]="ETC2_RGBA";b[b.BC1_RGB=2]="BC1_RGB";b[b.BC3_RGBA=3]="BC3_RGBA";b[b.BC4_R=4]="BC4_R";b[b.BC5_RG=5]="BC5_RG";b[b.BC7_M6_RGB=6]="BC7_M6_RGB";b[b.BC7_M5_RGBA=7]="BC7_M5_RGBA";b[b.PVRTC1_4_RGB=8]="PVRTC1_4_RGB";b[b.PVRTC1_4_RGBA=
9]="PVRTC1_4_RGBA";b[b.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA";b[b.ATC_RGB=11]="ATC_RGB";b[b.ATC_RGBA=12]="ATC_RGBA";b[b.FXT1_RGB=17]="FXT1_RGB";b[b.PVRTC2_4_RGB=18]="PVRTC2_4_RGB";b[b.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA";b[b.ETC2_EAC_R11=20]="ETC2_EAC_R11";b[b.ETC2_EAC_RG11=21]="ETC2_EAC_RG11";b[b.RGBA32=13]="RGBA32";b[b.RGB565=14]="RGB565";b[b.BGR565=15]="BGR565";b[b.RGBA4444=16]="RGBA4444";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["exports",
"../../../../core/Logger","../../../webgl/enums","../../../webgl/Texture"],function(a,b,c,f){function e(m){return m.charCodeAt(0)+(m.charCodeAt(1)<<8)+(m.charCodeAt(2)<<16)+(m.charCodeAt(3)<<24)}function n(m,t){var z=new Int32Array(m.buffer,m.byteOffset,31);if(542327876!==z[0])return d().error("Invalid magic number in DDS header"),null;if(!(z[20]&4))return d().error("Unsupported format, must contain a FourCC code"),null;var r=z[21];let v;switch(r){case k:r=8;v=c.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT;
break;case h:r=16;v=c.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case l:r=16;v=c.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return d().error("Unsupported FourCC code:",String.fromCharCode(r&255,r>>8&255,r>>16&255,r>>24&255)),null}let w=1,q=z[4],g=z[3];if(0!==(q&3)||0!==(g&3))d().warn("Rounding up compressed texture size to nearest multiple of 4."),q=q+3&-4,g=g+3&-4;const p=q,x=g;z[2]&131072&&!1!==t&&(w=Math.max(1,z[7]));let u=m.byteOffset+z[1]+4;const D=[];
for(let J=0;J<w;++J)z=(q+3>>2)*(g+3>>2)*r,t=new Uint8Array(m.buffer,u,z),D.push(t),u+=z,q=Math.max(1,q>>1),g=Math.max(1,g>>1);return{textureData:{type:"compressed",levels:D},internalFormat:v,width:p,height:x}}const d=()=>b.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),k=e("DXT1"),h=e("DXT3"),l=e("DXT5");a.createDDSTexture=function(m,t,z){z=n(z,t.hasMipmap??!1);if(null==z)throw Error("DDS texture data is null");const {textureData:r,internalFormat:v,width:w,height:q}=z;t.samplingMode=1<r.levels.length?
c.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:c.TextureSamplingMode.LINEAR;t.hasMipmap=1<r.levels.length;t.internalFormat=v;t.width=w;t.height=q;return new f.Texture(m,t,r)};a.createDDSTextureData=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/textureUtils":function(){define(["exports","../../../../core/Error"],function(a,b){function c(e,n,d){if(e instanceof ImageData)return c(f(e),n,d);const k=document.createElement("canvas");k.width=n;k.height=d;k.getContext("2d").drawImage(e,
0,0,k.width,k.height);return k}function f(e){const n=document.createElement("canvas");n.width=e.width;n.height=e.height;const d=n.getContext("2d");if(null==d)throw new b("Failed to create 2d context from HTMLCanvasElement");d.putImageData(e,0,0);return n}a.applyTextureResizeFloorModulo=function(e){return 16*Math.floor(e/16)};a.applyTextureResizeModulo=function(e){return 16*Math.ceil(e/16)};a.downsampleImage=function(e,n){let d=e.width*e.height;if(4096>d)return e instanceof ImageData?f(e):e;let k=
e.width,h=e.height;do k=Math.ceil(k/2),h=Math.ceil(h/2),d=k*h;while(1048576<d||null!=n&&(k>n||h>n));return c(e,k,h)};a.ensureImageMaxSize=function(e,n){const d=Math.max(e.width,e.height);if(d<=n)return e;n/=d;return c(e,Math.round(e.width*n),Math.round(e.height*n))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/DefaultMaterial":function(){define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../ViewingMode ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/attributes/NormalAttribute.glsl ../core/shaderLibrary/output/Emissions.glsl ../core/shaderLibrary/shading/Normals.glsl ../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../core/shaderLibrary/util/AlphaCutoff ../effects/geometry/olidUtils ../lib/basicInterfaces ../lib/GLTextureMaterial ../lib/Material ../lib/OrderIndependentTransparency ../lib/RayIntersections ../lib/RenderSlot ../lib/VertexAttribute ../lib/verticalOffsetUtils ./DefaultBufferWriter ./internal/MaterialUtil ../shaders/DefaultMaterialTechnique ../shaders/DefaultMaterialTechniqueConfiguration ../shaders/RealisticTreeTechnique".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L){function Q(da){const aa=e.newLayout().vec3f(p.VertexAttribute.POSITION);da.normalType===d.NormalType.Compressed?aa.vec2i16(p.VertexAttribute.NORMALCOMPRESSED,{glNormalized:!0}):aa.vec3f(p.VertexAttribute.NORMAL);da.hasVertexTangents&&aa.vec4f(p.VertexAttribute.TANGENT);(da.textureId||da.normalTextureId||da.metallicRoughnessTextureId||da.emissiveTextureId||da.occlusionTextureId)&&aa.vec2f(p.VertexAttribute.UV0);da.hasVertexColors&&aa.vec4u8(p.VertexAttribute.COLOR);
da.hasSymbolColors&&aa.vec4u8(p.VertexAttribute.SYMBOLCOLOR);t.olidEnabled()&&aa.vec4u8(p.VertexAttribute.OBJECTANDLAYERIDCOLOR);return aa}class M extends v.Material{constructor(da,aa){super(da,U);this.materialType="default";this.supportsEdges=!0;this.produces=new Map([[g.RenderSlot.OPAQUE_MATERIAL,fa=>(n.is3DGeometryOutputMRT(fa)||n.isShadowRelatedOutput(fa))&&!this.parameters.transparent],[g.RenderSlot.TRANSPARENT_MATERIAL,fa=>(n.is3DGeometryOutputMRT(fa)||n.isShadowRelatedOutput(fa))&&this.parameters.transparent&&
this.parameters.writeDepth],[g.RenderSlot.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,fa=>(n.is3DGeometryOutput(fa)||n.isShadowRelatedOutput(fa))&&this.parameters.transparent&&!this.parameters.writeDepth]]);this._vertexBufferLayout=Q(this.parameters);this._configuration=new E.DefaultMaterialTechniqueConfiguration(aa.spherical,aa.doublePrecisionRequiresObfuscation)}isVisibleForOutput(da){return da===n.ShaderOutput.Shadow||da===n.ShaderOutput.ShadowExcludeHighlight||da===n.ShaderOutput.ShadowHighlight?this.parameters.castShadows:
!0}get visible(){var da=this.parameters;if(da.layerOpacity<m.alphaCutoff)return!1;const {hasInstancedColor:aa,hasVertexColors:fa,hasSymbolColors:Z,vvColor:ma}=da,S=aa||ma||Z,ha="replace"===da.colorMixMode,G=da.opacity>=m.alphaCutoff;if(fa&&S)return ha||G;da=da.externalColor&&da.externalColor[3]>=m.alphaCutoff;return fa?ha?da:G:S?ha||G:ha?da:G}get hasEmissions(){return!!this.parameters.emissiveTextureId||!b.exactEquals(this.parameters.emissiveFactor,c.ZEROS)}getConfiguration(da,aa){const fa=this.parameters,
{treeRendering:Z,doubleSided:ma,doubleSidedType:S}=fa;this._configuration.output=da;this._configuration.hasNormalTexture=!Z&&!!fa.normalTextureId;this._configuration.hasColorTexture=!!fa.textureId;this._configuration.hasVertexTangents=!Z&&fa.hasVertexTangents;this._configuration.instanced=fa.isInstanced;this._configuration.instancedDoublePrecision=fa.instancedDoublePrecision;this._configuration.vvSize=!!fa.vvSize;this._configuration.hasVerticalOffset=null!=fa.verticalOffset;this._configuration.hasScreenSizePerspective=
null!=fa.screenSizePerspective;this._configuration.hasSlicePlane=fa.hasSlicePlane;this._configuration.hasSliceHighlight=fa.hasSliceHighlight;this._configuration.alphaDiscardMode=fa.textureAlphaMode;this._configuration.normalType=Z?d.NormalType.Attribute:fa.normalType;this._configuration.transparent=fa.transparent;this._configuration.writeDepth=fa.writeDepth;null!=fa.customDepthTest&&(this._configuration.customDepthTest=fa.customDepthTest);this._configuration.hasOccludees=aa.hasOccludees;this._configuration.cullFace=
fa.hasSlicePlane?z.CullFaceOptions.None:fa.cullFace;this._configuration.terrainDepthTest=aa.terrainDepthTest;this._configuration.cullAboveTerrain=aa.cullAboveTerrain;this._configuration.hasModelTransformation=!Z&&null!=fa.modelTransformation;this._configuration.hasVertexColors=fa.hasVertexColors;this._configuration.hasSymbolColors=fa.hasSymbolColors;this._configuration.doubleSidedMode=Z?h.NormalsDoubleSidedMode.WindingOrder:ma&&"normal"===S?h.NormalsDoubleSidedMode.View:ma&&"winding-order"===S?h.NormalsDoubleSidedMode.WindingOrder:
h.NormalsDoubleSidedMode.None;this._configuration.instancedColor=fa.hasInstancedColor;this._configuration.receiveShadows=fa.receiveShadows&&fa.receiveShadows;this._configuration.receiveAmbientOcclusion=fa.receiveAmbientOcclusion&&null!=aa.ssao;this._configuration.vvColor=!!fa.vvColor;this._configuration.textureAlphaPremultiplied=!!fa.textureAlphaPremultiplied;this._configuration.pbrMode=fa.usePBR?fa.isSchematic?l.PBRMode.Schematic:l.PBRMode.Normal:l.PBRMode.Disabled;this._configuration.hasMetallicRoughnessTexture=
!Z&&!!fa.metallicRoughnessTextureId;this._configuration.emissionSource=Z?k.EmissionSource.None:null!=fa.emissiveTextureId?k.EmissionSource.Texture:fa.usePBR?k.EmissionSource.Value:k.EmissionSource.None;this._configuration.hasOcclusionTexture=!Z&&!!fa.occlusionTextureId;this._configuration.offsetBackfaces=!(!fa.transparent||!fa.offsetTransparentBackfaces);this._configuration.oitPass=aa.oitPass;this._configuration.enableOffset=aa.camera.relativeElevation<w.OITPolygonOffsetLimit;this._configuration.snowCover=
null!=aa.weather&&aa.weatherVisible&&"snowy"===aa.weather.type&&"enabled"===aa.weather.snowCover;this._configuration.hasColorTextureTransform=!!fa.colorTextureTransformMatrix;this._configuration.hasNormalTextureTransform=!!fa.normalTextureTransformMatrix;this._configuration.hasEmissionTextureTransform=!!fa.emissiveTextureTransformMatrix;this._configuration.hasOcclusionTextureTransform=!!fa.occlusionTextureTransformMatrix;this._configuration.hasMetallicRoughnessTextureTransform=!!fa.metallicRoughnessTextureTransformMatrix;
return this._configuration}intersect(da,aa,fa,Z,ma,S){if(null!=this.parameters.verticalOffset){const G=fa.camera;b.set(X,aa[12],aa[13],aa[14]);aa=null;switch(fa.viewingMode){case f.ViewingMode.Global:aa=b.normalize(N,X);break;case f.ViewingMode.Local:aa=b.copy(N,H)}let ca=0;var ha=b.subtract(V,X,G.eye);const pa=b.length(ha);ha=b.scale(ha,ha,1/pa);let Y=null;this.parameters.screenSizePerspective&&(Y=b.dot(aa,ha));ca+=D.verticalOffsetAtDistance(G,pa,this.parameters.verticalOffset,Y??0,this.parameters.screenSizePerspective);
b.scale(aa,aa,ca);b.transformMat3(K,aa,fa.transform.inverseRotation);Z=b.subtract(y,Z,K);ma=b.subtract(B,ma,K)}q.intersectTriangleGeometry(da,fa,Z,ma,x.getVerticalOffsetObject3D(fa.verticalOffset),S)}createGLMaterial(da){return new C(da)}createBufferWriter(){return new u.DefaultBufferWriter(this._vertexBufferLayout)}}class C extends r.GLTextureMaterial{constructor(da){super({...da,...da.material.parameters})}beginSlot(da){this._material.setParameters({receiveShadows:da.shadowMap.enabled});const aa=
this._material.parameters;this.updateTexture(aa.textureId);const fa=da.camera.viewInverseTransposeMatrix;b.set(aa.origin,fa[3],fa[7],fa[11]);this._material.setParameters(this.textureBindParameters);return this.acquireTechnique(aa.treeRendering?L.RealisticTreeTechnique:J.DefaultMaterialTechnique,da)}}class U extends J.DefaultMaterialPassParameters{constructor(){super(...arguments);this.hasVertexTangents=this.treeRendering=this.initTextureTransparent=!1}}const y=c.create(),B=c.create(),H=c.fromValues(0,
0,1),N=c.create(),K=c.create(),X=c.create(),V=c.create();a.DefaultGLMaterial=C;a.DefaultMaterial=M;a.DefaultMaterialParameters=U;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/geometry/olidUtils":function(){define(["exports","../../../../../core/has"],function(a,b){a.olidEnabled=function(){return!!b("enable-feature:objectAndLayerId-rendering")};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/RayIntersections":function(){define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/support/aaBoundingBox ./ContentObjectType ./Util ./VertexAttribute".split(" "),
function(a,b,c,f,e,n,d){function k(L,Q,M,C,U,y,B){if(null!=L){var H=m(M,w);f.setMin(v,L.bbMin);f.setMax(v,L.bbMax);null!=U&&U.applyToAabb(v);if(t(v,Q,H,C)){const {primitiveIndices:pa,position:Y}=L;H=pa?pa.length:Y.indices.length/3;if(1E3<H&&(L=L.getChildren(),void 0!==L)){for(var N of L)k(N,Q,M,C,U,y,B);return}C=H;N=Y.indices;L=Y.data;H=Y.stride;var K=pa;const R=Q[0],ia=Q[1];Q=Q[2];const A=M[0],F=M[1];M=M[2];({normalRequired:y}=y);for(let O=0;O<C;++O){const ba=K[O];var X=3*ba,V=H*N[X],da=L[V],aa=
L[V+1],fa=L[V+2],Z=H*N[X+1];V=L[Z];var ma=L[Z+1];Z=L[Z+2];var S=H*N[X+2];X=L[S];var ha=L[S+1];S=L[S+2];null!=U&&([da,aa,fa]=U.applyToVertex(da,aa,fa,O),[V,ma,Z]=U.applyToVertex(V,ma,Z,O),[X,ha,S]=U.applyToVertex(X,ha,S,O));V-=da;ma-=aa;Z-=fa;X-=da;ha-=aa;S-=fa;var G=F*S-ha*M,ca=M*X-S*A;const na=A*ha-X*F,P=V*G+ma*ca+Z*na;if(!(1E-7>=Math.abs(P))){da=R-da;aa=ia-aa;fa=Q-fa;G=da*G+aa*ca+fa*na;if(0<P){if(0>G||G>P)continue}else if(0<G||G<P)continue;ca=aa*Z-ma*fa;fa=fa*V-Z*da;aa=da*ma-V*aa;da=A*ca+F*fa+M*
aa;if(0<P){if(0>da||G+da>P)continue}else if(0<da||G+da<P)continue;aa=(X*ca+ha*fa+S*aa)/P;0<=aa&&(V=y?l(V,ma,Z,X,ha,S,q):null,B(aa,ba,V))}}}}}function h(L,Q,M,C,U,y,B,H,N,K){const X=E;var V=Math.abs(Q[0]),da=Math.abs(Q[1]),aa=Math.abs(Q[2]);V=V>=da?V>=aa?0:2:da>=aa?1:2;aa=0>Q[V]?2:1;da=(V+aa)%3;aa=(V+(3-aa))%3;const fa=Q[da]/Q[V],Z=Q[aa]/Q[V];Q=1/Q[V];const ma=g,S=p,ha=x;for({normalRequired:N}=N;M<C;++M){var G=3*M,ca=B*U[G];b.set(X[0],y[ca+0],y[ca+1],y[ca+2]);ca=B*U[G+1];b.set(X[1],y[ca+0],y[ca+1],
y[ca+2]);G=B*U[G+2];b.set(X[2],y[G+0],y[G+1],y[G+2]);H&&(b.copy(X[0],H.applyToVertex(X[0][0],X[0][1],X[0][2],M)),b.copy(X[1],H.applyToVertex(X[1][0],X[1][1],X[1][2],M)),b.copy(X[2],H.applyToVertex(X[2][0],X[2][1],X[2][2],M)));b.sub(ma,X[0],L);b.sub(S,X[1],L);b.sub(ha,X[2],L);ca=ma[da]-fa*ma[V];var pa=ma[aa]-Z*ma[V];const R=S[da]-fa*S[V],ia=S[aa]-Z*S[V];var Y=ha[da]-fa*ha[V];const A=ha[aa]-Z*ha[V];G=Y*ia-A*R;Y=ca*A-pa*Y;pa=R*pa-ia*ca;(0>G||0>Y||0>pa)&&(0<G||0<Y||0<pa)||(ca=G+Y+pa,0!==ca&&(G=G*Q*ma[V]+
Y*Q*S[V]+pa*Q*ha[V],0>G*Math.sign(ca)||(G/=ca,0<=G&&(N?(ca=X,b.sub(u,ca[1],ca[0]),b.sub(D,ca[2],ca[0]),b.cross(q,u,D),b.normalize(q,q),ca=q):ca=null,K(G,M,ca)))))}}function l(L,Q,M,C,U,y,B){b.set(u,L,Q,M);b.set(D,C,U,y);b.cross(B,u,D);b.normalize(B,B);return B}function m(L,Q){return b.set(Q,1/L[0],1/L[1],1/L[2])}function t(L,Q,M,C){return z(L,Q,M,C,Infinity)}function z(L,Q,M,C,U){var y=(L[0]-C-Q[0])*M[0],B=(L[3]+C-Q[0])*M[0];let H=Math.min(y,B);y=Math.max(y,B);B=(L[1]-C-Q[1])*M[1];const N=(L[4]+C-
Q[1])*M[1];y=Math.min(y,Math.max(B,N));if(0>y)return!1;H=Math.max(H,Math.min(B,N));if(H>y)return!1;B=(L[2]-C-Q[2])*M[2];L=(L[5]+C-Q[2])*M[2];y=Math.min(y,Math.max(B,L));if(0>y)return!1;H=Math.max(H,Math.min(B,L));return H>y?!1:H<U}class r{constructor(L=!1,Q=!0){this.isVerticalRay=L;this.normalRequired=Q}}const v=f.create(),w=c.create(),q=c.create(),g=c.create(),p=c.create(),x=c.create(),u=c.create(),D=c.create(),J=c.create(),E=[c.create(),c.create(),c.create()];a.MeshIntersectionOptions=r;a.computeInvDir=
function(L,Q,M){return b.set(M,1/(Q[0]-L[0]),1/(Q[1]-L[1]),1/(Q[2]-L[2]))};a.computeInvDirFromDirection=m;a.computeNormalFromBarycentric=l;a.intersectAabbInvDir=t;a.intersectAabbInvDirBefore=z;a.intersectRayTriangles=function(L,Q,M,C,U,y,B,H,N,K=null,X=0){const V=L[0],da=L[1];L=L[2];const aa=Q[0],fa=Q[1];for(Q=Q[2];M<C;++M){const A=X+(K?K[M]:M);var Z=3*A,ma=B*U[Z],S=y[ma],ha=y[ma+1],G=y[ma+2],ca=B*U[Z+1],pa=B*U[Z+2];Z=y[ca]-S;ma=y[ca+1]-ha;ca=y[ca+2]-G;const F=y[pa]-S,O=y[pa+1]-ha;pa=y[pa+2]-G;var Y=
fa*pa-O*Q,R=Q*F-pa*aa;const ba=aa*O-F*fa;var ia=Z*Y+ma*R+ca*ba;if(!(1E-7>=Math.abs(ia))){S=V-S;ha=da-ha;G=L-G;Y=S*Y+ha*R+G*ba;if(0<ia){if(0>Y||Y>ia)continue}else if(0<Y||Y<ia)continue;R=ha*ca-ma*G;G=G*Z-ca*S;ha=S*ma-Z*ha;S=aa*R+fa*G+Q*ha;if(0<ia){if(0>S||Y+S>ia)continue}else if(0<S||Y+S<ia)continue;ia=(F*R+O*G+pa*ha)/ia;0<=ia&&(Z=H?l(Z,ma,ca,F,O,pa,q):null,N(ia,A,Z))}}};a.intersectRayTrianglesWithDisplacementWatertight=h;a.intersectRayTrianglesWithVerticalOffsetENUGlobal=function(L,Q,M,C,U,y,B,H,
N,K,X,V=null,da=0){const aa=L[0],fa=L[1];L=L[2];const Z=Q[0],ma=Q[1];for(Q=Q[2];M<C;++M){const P=da+(V?V[M]:M);var S=3*P,ha=B*U[S],G=y[ha],ca=y[ha+1],pa=y[ha+2],Y=B*U[S+1];ha=y[Y];var R=y[Y+1];Y=y[Y+2];var ia=B*U[S+2];S=y[ia];var A=y[ia+1];ia=y[ia+2];var F=pa-N,O=H/Math.sqrt(G*G+ca*ca+F*F);G+=G*O;ca+=ca*O;pa+=F*O;var ba=Y-N,na=H/Math.sqrt(ha*ha+R*R+ba*ba);F=ia-N;O=H/Math.sqrt(S*S+A*A+F*F);ha=ha+ha*na-G;R=R+R*na-ca;Y=Y+ba*na-pa;S=S+S*O-G;A=A+A*O-ca;ia=ia+F*O-pa;O=ma*ia-A*Q;ba=Q*S-ia*Z;na=Z*A-S*ma;
F=ha*O+R*ba+Y*na;if(!(1E-7>=Math.abs(F))){G=aa-G;ca=fa-ca;pa=L-pa;O=G*O+ca*ba+pa*na;if(0<F){if(0>O||O>F)continue}else if(0<O||O<F)continue;ba=ca*Y-R*pa;pa=pa*ha-Y*G;G=G*R-ha*ca;ca=Z*ba+ma*pa+Q*G;if(0<F){if(0>ca||O+ca>F)continue}else if(0<ca||O+ca<F)continue;G=(S*ba+A*pa+ia*G)/F;0<=G&&(ha=K?l(ha,R,Y,S,A,ia,q):null,X(G,P,ha))}}};a.intersectTriangleGeometry=function(L,Q,M,C,U,y){if(L.visible){C=b.sub(J,C,M);var B=(N,K,X)=>{y(N,X,K,!1)},H=new r(!1,Q.options.normalRequired);L.boundingInfo?(n.assert(L.type===
e.ContentObjectType.Mesh),k(L.boundingInfo,M,C,Q.tolerance,U,H,B)):(L=L.attributes.get(d.VertexAttribute.POSITION),Q=L.indices,h(M,C,0,Q.length/3,Q,L.data,L.stride,U,H,B))}};a.intersectTriangles=function(L,Q,M,C,U,y,B,H,N){const {data:K,stride:X}=y;Q=b.sub(J,Q,L);h(L,Q,M,C,U,K,X,B,H,N)};a.triangleRayParallelTolerance=1E-7;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/DefaultBufferWriter":function(){define(["exports","../lib/VertexAttribute",
"./internal/bufferWriterUtils"],function(a,b,c){class f{constructor(e){this.vertexBufferLayout=e}elementCount(e){return e.get(b.VertexAttribute.POSITION).indices.length}write(e,n,d,k,h,l){c.writeDefaultAttributes(d,k,this.vertexBufferLayout,e,n,h,l)}}a.DefaultBufferWriter=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/internal/bufferWriterUtils":function(){define(["exports","../../../../../core/libs/gl-matrix-2/math/mat4","../../../../../geometry/support/buffer/BufferView",
"../../lib/Util","../../lib/VertexAttribute"],function(a,b,c,f,e){function n(w,q,g){const {data:p,indices:x}=w;w=q.typedBuffer;q=q.typedBufferStride;const u=x.length;g*=q;for(let D=0;D<u;++D){const J=2*x[D];w[g]=p[J];w[g+1]=p[J+1];g+=q}}function d(w,q,g,p){const {data:x,indices:u}=w;w=q.typedBuffer;q=q.typedBufferStride;const D=u.length;g*=q;if(null==p||1===p)for(p=0;p<D;++p){var J=3*u[p];w[g]=x[J];w[g+1]=x[J+1];w[g+2]=x[J+2];g+=q}else for(J=0;J<D;++J){const E=3*u[J];for(let L=0;L<p;++L)w[g]=x[E],
w[g+1]=x[E+1],w[g+2]=x[E+2],g+=q}}function k(w,q,g,p=1){const {data:x,indices:u}=w;w=q.typedBuffer;q=q.typedBufferStride;const D=u.length;g*=q;if(1===p)for(p=0;p<D;++p){var J=4*u[p];w[g]=x[J];w[g+1]=x[J+1];w[g+2]=x[J+2];w[g+3]=x[J+3];g+=q}else for(J=0;J<D;++J){const E=4*u[J];for(let L=0;L<p;++L)w[g]=x[E],w[g+1]=x[E+1],w[g+2]=x[E+2],w[g+3]=x[E+3],g+=q}}function h(w,q,g,p,x=1){if(q){var {data:u,indices:D}=w;w=g.typedBuffer;g=g.typedBufferStride;var J=D.length,E=q[0],L=q[1],Q=q[2],M=q[4],C=q[5],U=q[6],
y=q[8],B=q[9],H=q[10],N=q[12],K=q[13],X=q[14];p*=g;var V=0,da=0,aa=0;q=b.hasIdentityRotation(q)?fa=>{V=u[fa]+N;da=u[fa+1]+K;aa=u[fa+2]+X}:fa=>{const Z=u[fa],ma=u[fa+1];fa=u[fa+2];V=E*Z+M*ma+y*fa+N;da=L*Z+C*ma+B*fa+K;aa=Q*Z+U*ma+H*fa+X};if(1===x)for(x=0;x<J;++x)q(3*D[x]),w[p]=V,w[p+1]=da,w[p+2]=aa,p+=g;else for(let fa=0;fa<J;++fa){q(3*D[fa]);for(let Z=0;Z<x;++Z)w[p]=V,w[p+1]=da,w[p+2]=aa,p+=g}}else d(w,g,p,x)}function l(w,q,g,p,x=1){if(q){var {data:u,indices:D}=w;w=g.typedBuffer;g=g.typedBufferStride;
var J=D.length,E=q[0],L=q[1],Q=q[2],M=q[4],C=q[5],U=q[6],y=q[8],B=q[9],H=q[10],N=!b.isOrthoNormal(q);p*=g;var K=0,X=0,V=0;q=b.hasIdentityRotation(q)?aa=>{K=u[aa];X=u[aa+1];V=u[aa+2]}:aa=>{const fa=u[aa],Z=u[aa+1];aa=u[aa+2];K=E*fa+M*Z+y*aa;X=L*fa+C*Z+B*aa;V=Q*fa+U*Z+H*aa};if(1===x)if(N)for(x=0;x<J;++x)q(3*D[x]),N=K*K+X*X+V*V,.999999>N&&1E-6<N?(N=1/Math.sqrt(N),w[p]=K*N,w[p+1]=X*N,w[p+2]=V*N):(w[p]=K,w[p+1]=X,w[p+2]=V),p+=g;else for(x=0;x<J;++x)q(3*D[x]),w[p]=K,w[p+1]=X,w[p+2]=V,p+=g;else for(let aa=
0;aa<J;++aa){q(3*D[aa]);if(N){var da=K*K+X*X+V*V;.999999>da&&1E-6<da&&(da=1/Math.sqrt(da),K*=da,X*=da,V*=da)}for(da=0;da<x;++da)w[p]=K,w[p+1]=X,w[p+2]=V,p+=g}}else d(w,g,p,x)}function m(w,q,g,p,x=1){if(q){var {data:u,indices:D}=w;w=g.typedBuffer;g=g.typedBufferStride;var J=D.length,E=q[0],L=q[1],Q=q[2],M=q[4],C=q[5],U=q[6],y=q[8],B=q[9],H=q[10];q=!b.isOrthoNormal(q);p*=g;if(1===x)for(x=0;x<J;++x){var N=4*D[x],K=u[N],X=u[N+1],V=u[N+2];N=u[N+3];var da=E*K+M*X+y*V,aa=L*K+C*X+B*V;K=Q*K+U*X+H*V;q&&(X=
da*da+aa*aa+K*K,.999999>X&&1E-6<X&&(X=1/Math.sqrt(X),da*=X,aa*=X,K*=X));w[p]=da;w[p+1]=aa;w[p+2]=K;w[p+3]=N;p+=g}else for(N=0;N<J;++N){da=4*D[N];X=u[da];V=u[da+1];const fa=u[da+2];da=u[da+3];aa=E*X+M*V+y*fa;K=L*X+C*V+B*fa;X=Q*X+U*V+H*fa;q&&(V=aa*aa+K*K+X*X,.999999>V&&1E-6<V&&(V=1/Math.sqrt(V),aa*=V,K*=V,X*=V));for(V=0;V<x;++V)w[p]=aa,w[p+1]=K,w[p+2]=X,w[p+3]=da,p+=g}}else k(w,g,p,x)}function t(w,q,g,p,x=1){const {data:u,indices:D}=w;var J=g.typedBuffer,E=g.typedBufferStride;w=D.length;p*=E;if(q===
u.length&&4===q)for(J[p]=u[0],J[p+1]=u[1],J[p+2]=u[2],J[p+3]=u[3],J=new Uint32Array(g.typedBuffer.buffer,g.start),E/=4,p/=4,q=J[p],p+=E,w*=x,x=1;x<w;++x)J[p]=q,p+=E;else if(1===x)if(4===q)for(x=0;x<w;++x)q=4*D[x],J[p]=u[q],J[p+1]=u[q+1],J[p+2]=u[q+2],J[p+3]=u[q+3],p+=E;else for(x=0;x<w;++x)q=3*D[x],J[p]=u[q],J[p+1]=u[q+1],J[p+2]=u[q+2],J[p+3]=255,p+=E;else if(4===q)for(q=0;q<w;++q){g=4*D[q];for(var L=0;L<x;++L)J[p]=u[g],J[p+1]=u[g+1],J[p+2]=u[g+2],J[p+3]=u[g+3],p+=E}else for(q=0;q<w;++q)for(g=3*D[q],
L=0;L<x;++L)J[p]=u[g],J[p+1]=u[g+1],J[p+2]=u[g+2],J[p+3]=255,p+=E}function z(w,q,g){const {data:p,indices:x}=w;w=q.typedBuffer;q=q.typedBufferStride;const u=x.length,D=p[0];g*=q;for(let J=0;J<u;++J)w[g]=D,g+=q}function r(w,q,g,p,x=1){const u=q.typedBuffer;q=q.typedBufferStride;p*=q;if(1===x)for(x=0;x<g;++x)u[p]=w[0],u[p+1]=w[1],u[p+2]=w[2],u[p+3]=w[3],p+=q;else for(let D=0;D<g;++D)for(let J=0;J<x;++J)u[p]=w[0],u[p+1]=w[1],u[p+2]=w[2],u[p+3]=w[3],p+=q}function v(w,q,g,p,x,u){switch(w){case e.VertexAttribute.POSITION:f.assert(3===
q.size);p=x.getField(w,c.BufferViewVec3f);f.assert(!!p,`No buffer view for ${w}`);p&&h(q,g,p,u);break;case e.VertexAttribute.NORMAL:f.assert(3===q.size);g=x.getField(w,c.BufferViewVec3f);f.assert(!!g,`No buffer view for ${w}`);g&&l(q,p,g,u);break;case e.VertexAttribute.NORMALCOMPRESSED:f.assert(2===q.size);g=x.getField(w,c.BufferViewVec2i16);f.assert(!!g,`No buffer view for ${w}`);g&&n(q,g,u);break;case e.VertexAttribute.UV0:f.assert(2===q.size);g=x.getField(w,c.BufferViewVec2f);f.assert(!!g,`No buffer view for ${w}`);
g&&n(q,g,u);break;case e.VertexAttribute.COLOR:case e.VertexAttribute.SYMBOLCOLOR:g=x.getField(w,c.BufferViewVec4u8);f.assert(!!g,`No buffer view for ${w}`);f.assert(3===q.size||4===q.size);!g||3!==q.size&&4!==q.size||t(q,q.size,g,u);break;case e.VertexAttribute.COLORFEATUREATTRIBUTE:g=x.getField(w,c.BufferViewFloat);f.assert(!!g,`No buffer view for ${w}`);f.assert(1===q.size);g&&1===q.size&&z(q,g,u);break;case e.VertexAttribute.TANGENT:f.assert(4===q.size);p=x.getField(w,c.BufferViewVec4f);f.assert(!!p,
`No buffer view for ${w}`);p&&m(q,g,p,u);break;case e.VertexAttribute.PROFILERIGHT:case e.VertexAttribute.PROFILEUP:case e.VertexAttribute.PROFILEVERTEXANDNORMAL:case e.VertexAttribute.FEATUREVALUE:f.assert(4===q.size),g=x.getField(w,c.BufferViewVec4f),f.assert(!!g,`No buffer view for ${w}`),g&&k(q,g,u)}}a.writeBufferFloat=function(w,q,g,p=1){const {data:x,indices:u}=w;w=q.typedBuffer;q=q.typedBufferStride;const D=u.length;g*=q;if(1===p)for(p=0;p<D;++p)w[g]=x[u[p]],g+=q;else for(let J=0;J<D;++J){const E=
x[u[J]];for(let L=0;L<p;L++)w[g]=E,g+=q}};a.writeBufferMat3f=function(w,q,g){const {data:p,indices:x}=w;w=q.typedBuffer;q=q.typedBufferStride;const u=x.length;g*=q;for(let D=0;D<u;++D){const J=9*x[D];for(let E=0;9>E;++E)w[g+E]=p[J+E];g+=q}};a.writeBufferMat4f=function(w,q,g){const {data:p,indices:x}=w;w=q.typedBuffer;q=q.typedBufferStride;const u=x.length;g*=q;for(let D=0;D<u;++D){const J=16*x[D];for(let E=0;16>E;++E)w[g+E]=p[J+E];g+=q}};a.writeBufferVec2=n;a.writeBufferVec3=d;a.writeBufferVec4=k;
a.writeBufferVec4Zeros=function(w,q,g){const p=w.typedBuffer;w=w.typedBufferStride;q*=w;for(let x=0;x<g;++x)p[q]=0,p[q+1]=0,p[q+2]=0,p[q+3]=0,q+=w};a.writeColor=t;a.writeColorFeatureAttribute=z;a.writeDefaultAttribute=v;a.writeDefaultAttributes=function(w,q,g,p,x,u,D){for(const E of g.fields.keys()){g=w.get(E);var J=g?.indices;g&&J?v(E,g,p,x,u,D):E===e.VertexAttribute.OBJECTANDLAYERIDCOLOR&&null!=q&&(g=w.get(e.VertexAttribute.POSITION)?.indices)&&(g=g.length,J=u.getField(E,c.BufferViewVec4u8),r(q,
J,g,D))}};a.writeNormal=l;a.writeObjectAndLayerIdColor=r;a.writePosition=h;a.writeTangent=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/DefaultMaterialTechniqueConfiguration":function(){define("exports ../../../../chunks/tslib.es6 ../core/shaderLibrary/attributes/NormalAttribute.glsl ../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../core/shaderLibrary/output/Emissions.glsl ../core/shaderLibrary/shading/Normals.glsl ../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/basicInterfaces ../materials/DefaultTechniqueConfiguration".split(" "),
function(a,b,c,f,e,n,d,k,h,l){class m extends l.DefaultTechniqueConfiguration{constructor(t,z){super();this.spherical=t;this.doublePrecisionRequiresObfuscation=z;this.alphaDiscardMode=h.AlphaDiscardMode.Opaque;this.doubleSidedMode=n.NormalsDoubleSidedMode.None;this.pbrMode=d.PBRMode.Disabled;this.cullFace=h.CullFaceOptions.None;this.normalType=c.NormalType.Attribute;this.customDepthTest=h.DepthTestFunction.Less;this.emissionSource=e.EmissionSource.None;this.hasSlicePlane=this.hasVerticalOffset=this.hasSymbolColors=
this.hasVertexColors=!1;this.hasSliceHighlight=!0;this.instancedColor=this.instanced=this.textureAlphaPremultiplied=this.receiveAmbientOcclusion=this.receiveShadows=this.vvColor=this.vvSize=this.offsetBackfaces=this.hasModelTransformation=this.hasOccludees=this.hasVertexTangents=this.hasScreenSizePerspective=this.hasNormalTexture=this.hasOcclusionTexture=this.hasMetallicRoughnessTexture=this.hasColorTexture=!1;this.writeDepth=!0;this.transparent=!1;this.enableOffset=!0;this.occlusionPass=this.hasMetallicRoughnessTextureTransform=
this.hasOcclusionTextureTransform=this.hasNormalTextureTransform=this.hasEmissionTextureTransform=this.hasColorTextureTransform=this.snowCover=this.cullAboveTerrain=this.terrainDepthTest=!1;this.hasVvInstancing=!0;this.useCustomDTRExponentForWater=!1;this.useFillLights=!0}get textureCoordinateType(){return this.hasColorTexture||this.hasMetallicRoughnessTexture||this.emissionSource===e.EmissionSource.Texture||this.hasOcclusionTexture||this.hasNormalTexture?f.TextureCoordinateType.Default:f.TextureCoordinateType.None}get objectAndLayerIdColorInstanced(){return this.instanced}get discardInvisibleFragments(){return this.transparent}}
b.__decorate([k.parameter({count:h.AlphaDiscardMode.COUNT})],m.prototype,"alphaDiscardMode",void 0);b.__decorate([k.parameter({count:n.NormalsDoubleSidedMode.COUNT})],m.prototype,"doubleSidedMode",void 0);b.__decorate([k.parameter({count:d.PBRMode.COUNT})],m.prototype,"pbrMode",void 0);b.__decorate([k.parameter({count:h.CullFaceOptions.COUNT})],m.prototype,"cullFace",void 0);b.__decorate([k.parameter({count:c.NormalType.COUNT})],m.prototype,"normalType",void 0);b.__decorate([k.parameter({count:h.DepthTestFunction.COUNT})],
m.prototype,"customDepthTest",void 0);b.__decorate([k.parameter({count:e.EmissionSource.COUNT})],m.prototype,"emissionSource",void 0);b.__decorate([k.parameter()],m.prototype,"hasVertexColors",void 0);b.__decorate([k.parameter()],m.prototype,"hasSymbolColors",void 0);b.__decorate([k.parameter()],m.prototype,"hasVerticalOffset",void 0);b.__decorate([k.parameter()],m.prototype,"hasSlicePlane",void 0);b.__decorate([k.parameter()],m.prototype,"hasSliceHighlight",void 0);b.__decorate([k.parameter()],m.prototype,
"hasColorTexture",void 0);b.__decorate([k.parameter()],m.prototype,"hasMetallicRoughnessTexture",void 0);b.__decorate([k.parameter()],m.prototype,"hasOcclusionTexture",void 0);b.__decorate([k.parameter()],m.prototype,"hasNormalTexture",void 0);b.__decorate([k.parameter()],m.prototype,"hasScreenSizePerspective",void 0);b.__decorate([k.parameter()],m.prototype,"hasVertexTangents",void 0);b.__decorate([k.parameter()],m.prototype,"hasOccludees",void 0);b.__decorate([k.parameter()],m.prototype,"hasModelTransformation",
void 0);b.__decorate([k.parameter()],m.prototype,"offsetBackfaces",void 0);b.__decorate([k.parameter()],m.prototype,"vvSize",void 0);b.__decorate([k.parameter()],m.prototype,"vvColor",void 0);b.__decorate([k.parameter()],m.prototype,"receiveShadows",void 0);b.__decorate([k.parameter()],m.prototype,"receiveAmbientOcclusion",void 0);b.__decorate([k.parameter()],m.prototype,"textureAlphaPremultiplied",void 0);b.__decorate([k.parameter()],m.prototype,"instanced",void 0);b.__decorate([k.parameter()],m.prototype,
"instancedColor",void 0);b.__decorate([k.parameter()],m.prototype,"writeDepth",void 0);b.__decorate([k.parameter()],m.prototype,"transparent",void 0);b.__decorate([k.parameter()],m.prototype,"enableOffset",void 0);b.__decorate([k.parameter()],m.prototype,"terrainDepthTest",void 0);b.__decorate([k.parameter()],m.prototype,"cullAboveTerrain",void 0);b.__decorate([k.parameter()],m.prototype,"snowCover",void 0);b.__decorate([k.parameter()],m.prototype,"hasColorTextureTransform",void 0);b.__decorate([k.parameter()],
m.prototype,"hasEmissionTextureTransform",void 0);b.__decorate([k.parameter()],m.prototype,"hasNormalTextureTransform",void 0);b.__decorate([k.parameter()],m.prototype,"hasOcclusionTextureTransform",void 0);b.__decorate([k.parameter()],m.prototype,"hasMetallicRoughnessTextureTransform",void 0);a.DefaultMaterialTechniqueConfiguration=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports",
"../../../../../core/Error","../shaderModules/interfaces","./ShaderTechniqueConfigurationKey"],function(a,b,c,f){class e extends c.NoParameters{constructor(){super();this._parameterBits=this._parameterBits?.map(()=>0)??[];this._parameterNames??(this._parameterNames=[])}get key(){this._key??(this._key=new f.ShaderTechniqueConfigurationKey(this._parameterBits));return this._key}decode(n=this.key){const d=this._parameterBits;this._parameterBits=[...n.bits];n=this._parameterNames.map(k=>`    ${k}: ${this[k]}`).join("\n");
this._parameterBits=d;return n}}a.ShaderTechniqueConfiguration=e;a.parameter=function(n={}){return(d,k)=>{d.hasOwnProperty("_parameterNames")||Object.defineProperty(d,"_parameterNames",{value:d._parameterNames?.slice()??[],configurable:!0,writable:!0});d.hasOwnProperty("_parameterBits")||Object.defineProperty(d,"_parameterBits",{value:d._parameterBits?.slice()??[0],configurable:!0,writable:!0});d._parameterNames.push(k);const h=Math.ceil(Math.log2(n.count||2)),l=d._parameterBits;let m=0;for(;16<l[m]+
h;)m++,m>=l.length&&l.push(0);const t=l[m],z=(1<<h)-1<<t;l[m]+=h;n.count?Object.defineProperty(d,k,{get(){return(this._parameterBits[m]&z)>>t},set(r){if(this[k]!==r)if(this._key=null,this._parameterBits[m]=this._parameterBits[m]&~z|+r<<t&z,"number"===typeof r){if(null==n.count)throw new b(`Configuration value for ${k} must provide a count option`);}else throw new b(`Configuration value for ${k} must be a number, got ${typeof r}`);}}):Object.defineProperty(d,k,{get(){return!!((this._parameterBits[m]&
z)>>t)},set(r){if(this[k]!==r&&(this._key=null,this._parameterBits[m]=this._parameterBits[m]&~z|+r<<t&z,"boolean"!==typeof r))throw new b(`Configuration value for ${k} must be boolean, got ${typeof r}`);}})}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfigurationKey":function(){define(["exports","../../../../../core/arrayUtils"],function(a,b){class c{constructor(f){this._bits=[...f]}equals(f){return b.equals(this._bits,
f.bits)}get code(){this._code??(this._code=String.fromCharCode(...this._bits));return this._code}get bits(){return this._bits}}a.ShaderTechniqueConfigurationKey=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration":function(){define("exports ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/attributes/InstancedDoubleConfiguration ../core/shaderTechnique/BindType ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/OITPass".split(" "),
function(a,b,c,f,e,n,d){class k extends f.InstancedDoubleConfiguration{constructor(){super(...arguments);this.output=c.ShaderOutput.Color;this.oitPass=d.OITPass.NONE;this.hasSliceHighlight=!0;this.hasSliceInVertexProgram=!1;this.bindType=e.BindType.Pass;this.writeDepth=!0}}b.__decorate([n.parameter({count:c.ShaderOutput.COUNT})],k.prototype,"output",void 0);b.__decorate([n.parameter({count:d.OITPass.COUNT})],k.prototype,"oitPass",void 0);a.DefaultTechniqueConfiguration=k;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoubleConfiguration":function(){define(["exports","../../../../../../chunks/tslib.es6","../../shaderTechnique/ShaderTechniqueConfiguration"],function(a,b,c){class f extends c.ShaderTechniqueConfiguration{constructor(){super(...arguments);this.hasModelTransformation=this.instancedDoublePrecision=!1}}b.__decorate([c.parameter()],f.prototype,"instancedDoublePrecision",void 0);b.__decorate([c.parameter()],f.prototype,
"hasModelTransformation",void 0);a.InstancedDoubleConfiguration=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/RealisticTreeTechnique":function(){define(["require","exports","../core/shaderTechnique/ReloadableShaderModule","./DefaultMaterialTechnique","../../../../chunks/RealisticTree.glsl"],function(a,b,c,f,e){class n extends f.DefaultMaterialTechnique{constructor(d,k,h){super(d,k,h,new c.ReloadableShaderModule(e.RealisticTree,()=>new Promise((l,
m)=>a(["./RealisticTree.glsl"],l,m))));this.type="RealisticTreeTechnique"}}b.RealisticTreeTechnique=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/RealisticTree.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl ../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float3PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform ../views/3d/webgl-engine/lib/VertexAttribute ../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H,N,K){function X(da){const aa=new B.ShaderBuilder,{vertex:fa,fragment:Z,varyings:ma}=aa,{output:S,offsetBackfaces:ha,instancedColor:G,pbrMode:ca,snowCover:pa,spherical:Y}=da,R=ca===p.PBRMode.Normal||ca===p.PBRMode.Schematic;Q.addProjViewLocalOrigin(fa,da);aa.include(h.PositionAttribute);ma.add("vpos","vec3");aa.include(D.VisualVariables,da);aa.include(d.InstancedDoublePrecision,da);aa.include(z.VerticalOffset,da);S===f.ShaderOutput.Color&&
(Q.addCameraPosition(aa.vertex,da),aa.include(k.NormalAttribute,da),aa.include(n.Transform,da),ha&&aa.include(c.Offset),G&&aa.attributes.add(N.VertexAttribute.INSTANCECOLOR,"vec4"),ma.add("vNormalWorld","vec3"),ma.add("localvpos","vec3"),da.terrainDepthTest&&ma.add("depth","float"),aa.include(m.TextureCoordinateAttribute,da),aa.include(b.ForwardLinearDepth,da),aa.include(l.SymbolColor,da),aa.include(t.VertexColor,da),fa.uniforms.add(new C.Float4PassUniform("externalColor",ia=>ia.externalColor)),ma.add("vcolorExt",
"vec4"),fa.main.add(y.glsl`
      forwardNormalizedVertexColor();
      vcolorExt = externalColor;
      ${y.If(G,"vcolorExt *\x3d instanceColor * 0.003921568627451;")}
      vcolorExt *= vvColor();
      vcolorExt *= getSymbolColor();
      forwardColorMixMode();

      if (vcolorExt.a < ${y.glsl.float(J.alphaCutoff)}) {
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      } else {
        vpos = getVertexInLocalOriginSpace();
        localvpos = vpos - view[3].xyz;
        vpos = subtractOrigin(vpos);
        vNormalWorld = dpNormal(vvLocalNormal(normalModel()));
        vpos = addVerticalOffset(vpos, localOrigin);
        gl_Position = transformPosition(proj, view, vpos);
        ${y.If(ha,"gl_Position \x3d offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);")}
      }
      ${y.If(da.terrainDepthTest,"depth \x3d (view * vec4(vpos, 1.0)).z;")}
      forwardLinearDepth();
      forwardTextureCoordinates();`));if(S===f.ShaderOutput.Color){const {hasColorTexture:ia,hasColorTextureTransform:A,receiveShadows:F}=da;aa.include(w.EvaluateSceneLighting,da);aa.include(v.EvaluateAmbientOcclusion,da);aa.include(E.DiscardOrAdjustAlphaPass,da);aa.include(da.instancedDoublePrecision?x.ReadShadowMapPass:x.ReadShadowMapDraw,da);aa.include(u.terrainDepthTest,da);aa.include(e.SliceDraw,da);aa.include(K.outputColorHighlightOID,da);Q.addCameraPosition(aa.fragment,da);q.addMainLightDirection(Z);
w.addAmbientBoostFactor(Z);w.addLightingGlobalFactor(Z);Z.uniforms.add(fa.uniforms.get("localOrigin"),fa.uniforms.get("view"),new M.Float3PassUniform("ambient",O=>O.ambient),new M.Float3PassUniform("diffuse",O=>O.diffuse),new U.FloatPassUniform("opacity",O=>O.opacity),new U.FloatPassUniform("layerOpacity",O=>O.layerOpacity));ia&&Z.uniforms.add(new H.Texture2DPassUniform("tex",O=>O.texture));aa.include(p.PhysicallyBasedRenderingParameters,da);aa.include(g.PhysicallyBasedRendering,da);Z.include(L.MixExternalColor);
q.addMainLightIntensity(Z);Z.main.add(y.glsl`
      discardBySlice(vpos);
      ${y.If(da.terrainDepthTest,"terrainDepthTest(depth);")}
      vec4 texColor = ${ia?`texture(tex, ${A?"colorUV":"vuv0"})`:" vec4(1.0)"};
      ${y.If(ia,`${y.If(da.textureAlphaPremultiplied,"texColor.rgb /\x3d texColor.a;")}\n        discardOrAdjustAlpha(texColor);`)}
      vec3 viewDirection = normalize(vpos - cameraPosition);
      applyPBRFactors();
      float ssao = evaluateAmbientOcclusionInverse();
      ssao *= getBakedOcclusion();

      float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
      vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;
      float shadow = ${F?"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))":Y?"lightingGlobalFactor * (1.0 - additionalAmbientScale)":"0.0"};
      vec3 matColor = max(ambient, diffuse);
      ${da.hasVertexColors?y.glsl`vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
             float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:y.glsl`vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
             float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
      ${y.If(pa,"albedo \x3d mix(albedo, vec3(1), 0.9);")}
      ${y.glsl`vec3 shadingNormal = normalize(vNormalWorld);
             albedo *= 1.2;
             vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);
             float alignmentLightView = clamp(dot(viewForward, -mainLightDirection), 0.0, 1.0);
             float transmittance = 1.0 - clamp(dot(viewForward, shadingNormal), 0.0, 1.0);
             float treeRadialFalloff = vColor.r;
             float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);
             additionalLight += backLightFactor * mainLightIntensity;`}
      ${y.If(R,`vec3 normalGround = ${Y?"normalize(vpos + localOrigin)":"vec3(0.0, 0.0, 1.0)"};`)}
      ${R?y.glsl`float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];
                 ${y.If(pa,y.glsl`mrr = vec3(0.0, 1.0, 0.04);`)}
            vec4 emission = ${pa?"vec4(0.0)":"getEmissions()"};
            vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:y.glsl`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
      vec4 finalColor = vec4(shadedColor, opacity_);
      outputColorHighlightOID(finalColor, vpos);`)}aa.include(r.DefaultMaterialAuxiliaryPasses,da);return aa}const V=Object.freeze(Object.defineProperty({__proto__:null,build:X},Symbol.toStringTag,{value:"Module"}));a.RealisticTree=V;a.build=X})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("exports ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/math/mat3 ../../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../../core/libs/gl-matrix-2/types/mat4 ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/buffer/BufferView ../../layers/support/FastSymbolUpdates ../../support/debugFlags ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/util/AlphaCutoff ../effects/geometry/olidUtils ../lib/GLTextureMaterial ../lib/Material ../lib/RenderSlot ../lib/screenSizePerspectiveUtils ../lib/Util ../lib/VertexAttribute ./ScaleInfo ./internal/bufferWriterUtils ./internal/MaterialUtil ../../../../chunks/HUDMaterial.glsl ../shaders/HUDMaterialTechnique ../shaders/HUDMaterialTechniqueConfiguration".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H,N){function K(ja,oa,qa,sa){t.isMat4(oa)&&(oa=c.fromMat4(Y,oa));h.transformMat3(sa.normal,ja,oa);h.transformMat4(sa.normal,sa.normal,qa.viewInverseTransposeMatrix);sa.cosAngle=h.dot(S,na);return sa}function X(ja,oa,qa,sa,ua,ya,wa,Aa,Ca){let Ea=oa-ua-sa[0]*Ca[0],Da=Ea+sa[0]+2*ua;Ca=qa-ua-sa[1]*Ca[1];ua=Ca+sa[1]+2*ua;const Ia=Aa.distanceFieldBoundingBox;Aa.textureIsSignedDistanceField&&null!=Ia&&(Ea+=sa[0]*Ia[0],Ca+=sa[1]*Ia[1],
Da-=sa[0]*(1-Ia[2]),ua-=sa[1]*(1-Ia[3]),Ea-=ya,Da+=ya,Ca-=ya,ua+=ya);d.set(ca,oa,qa);d.rotate(G,ja,ca,b.deg2rad(wa));return G[0]>Ea&&G[0]<Da&&G[1]>Ca&&G[1]<ua}class V extends J.Material{constructor(ja,oa){super(ja,P);this.produces=new Map([[E.RenderSlot.HUD_MATERIAL,qa=>g.isColorHighlightOrOID(qa)&&!this.parameters.drawInSecondSlot],[E.RenderSlot.LABEL_MATERIAL,qa=>g.isColorHighlightOrOID(qa)&&this.parameters.drawInSecondSlot],[E.RenderSlot.OCCLUSION_PIXELS,()=>this.parameters.occlusionTest],[E.RenderSlot.DRAPED_MATERIAL,
qa=>this.parameters.draped&&g.isColorHighlightOrOID(qa)]]);this._visible=!0;this._configuration=new N.HUDMaterialTechniqueConfiguration(oa)}getConfiguration(ja,oa){this._configuration.output=ja;this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset;this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective;this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits;
this._configuration.hasPolygonOffset=this.parameters.polygonOffset;this._configuration.draped=this.parameters.draped;this._configuration.occlusionTestEnabled=this.parameters.occlusionTest;this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled;this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField;this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter;this._configuration.hasRotation=this.parameters.hasRotation;
this._configuration.vvSize=!!this.parameters.vvSize;this._configuration.vvColor=!!this.parameters.vvColor;this._configuration.occlusionPass=oa.slot===E.RenderSlot.OCCLUSION_PIXELS;this._configuration.occludedFragmentFade=this.parameters.occludedFragmentFade;this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled;this._configuration.depthTestEnabled=this.parameters.depthEnabled||oa.slot===E.RenderSlot.OCCLUSION_PIXELS;ja===g.ShaderOutput.Color&&(this._configuration.debugDrawLabelBorder=
!!w.debugFlags.LABELS_SHOW_BORDER);this._configuration.oitPass=oa.oitPass;this._configuration.terrainDepthTest=oa.terrainDepthTest;this._configuration.cullAboveTerrain=oa.cullAboveTerrain;return this._configuration}intersect(ja,oa,qa,sa,ua,ya){const {options:{selectionMode:wa,hud:Aa,excludeLabels:Ca},point:Ea,camera:Da}=qa;({parameters:sa}=this);if(wa&&Aa&&(!Ca||!sa.isLabel)&&ja.visible&&Ea){var {scaleX:Ia,scaleY:Ha}=this._getScreenScale(ja,Da.pixelRatio);c.fromMat4(pa,oa);if(ja.attributes.has(M.VertexAttribute.FEATUREATTRIBUTE)){ua=
pa;var Ja=ua[0],Na=ua[1],La=ua[2],$a=ua[3],Oa=ua[4],Ma=ua[5],Ka=ua[6],xa=ua[7],hb=ua[8];const nb=1/Math.sqrt(Ja*Ja+Na*Na+La*La),Qa=1/Math.sqrt($a*$a+Oa*Oa+Ma*Ma),mb=1/Math.sqrt(Ka*Ka+xa*xa+hb*hb);ua[0]=Ja*nb;ua[1]=Na*nb;ua[2]=La*nb;ua[3]=$a*Qa;ua[4]=Oa*Qa;ua[5]=Ma*Qa;ua[6]=Ka*mb;ua[7]=xa*mb;ua[8]=hb*mb}ua=ja.attributes.get(M.VertexAttribute.POSITION);Ja=ja.attributes.get(M.VertexAttribute.SIZE);Na=ja.attributes.get(M.VertexAttribute.NORMAL);La=ja.attributes.get(M.VertexAttribute.ROTATION);ja=ja.attributes.get(M.VertexAttribute.CENTEROFFSETANDDISTANCE);
Q.assert(3<=ua.size);$a=B.calculateAnchorPosForRendering(sa);Oa="screen"===this.parameters.centerOffsetUnits;for(Ma=0;Ma<ua.data.length/ua.size;Ma++)Ka=Ma*ua.size,h.set(fa,ua.data[Ka],ua.data[Ka+1],ua.data[Ka+2]),h.transformMat4(fa,fa,oa),h.transformMat4(fa,fa,Da.viewMatrix),Ka=Ma*ja.size,h.set(ia,ja.data[Ka],ja.data[Ka+1],ja.data[Ka+2]),Oa||(fa[0]+=ia[0],fa[1]+=ia[1],0!==ia[2]&&(Ka=ia[2],h.normalize(ia,fa),h.subtract(fa,fa,h.scale(ia,ia,Ka)))),Ka=Ma*Na.size,h.set(Z,Na.data[Ka],Na.data[Ka+1],Na.data[Ka+
2]),K(Z,pa,Da,O),this._applyVerticalOffsetTransformationView(fa,O,Da,aa),Da.applyProjection(fa,ma),-1<ma[0]&&(Oa&&(ia[0]||ia[1])&&(ma[0]+=ia[0]*Da.pixelRatio,0!==ia[1]&&(ma[1]+=L.applyScaleFactor(ia[1],aa.factorAlignment)*Da.pixelRatio),Da.unapplyProjection(ma,fa)),ma[0]+=this.parameters.screenOffset[0]*Da.pixelRatio,ma[1]+=this.parameters.screenOffset[1]*Da.pixelRatio,ma[0]=Math.floor(ma[0]),ma[1]=Math.floor(ma[1]),Ka=Ma*Ja.size,ba[0]=Ja.data[Ka],ba[1]=Ja.data[Ka+1],L.applyPrecomputedScaleFactor(ba,
aa.factor,ba),Ka=1*Da.pixelRatio,xa=0,sa.textureIsSignedDistanceField&&(xa=Math.min(sa.outlineSize,.5*ba[0])*Da.pixelRatio/2),ba[0]*=Ia,ba[1]*=Ha,X(Ea,ma[0],ma[1],ba,Ka,xa,sa.rotation+La.data[Ma*La.size],sa,$a)&&(xa=qa.ray,h.transformMat4(ha,fa,e.invert(R,Da.viewMatrix)),ma[0]=Ea[0],ma[1]=Ea[1],Da.unprojectFromRenderScreen(ma,fa)&&(Ka=l.create(),h.copy(Ka,xa.direction),hb=1/h.length(Ka),h.scale(Ka,Ka,hb),xa=h.distance(xa.origin,fa)*hb,ya(xa,Ka,-1,!0,1,ha))))}}intersectDraped(ja,oa,qa,sa,ua,ya){oa=
ja.attributes.get(M.VertexAttribute.POSITION);qa=ja.attributes.get(M.VertexAttribute.SIZE);const wa=ja.attributes.get(M.VertexAttribute.ROTATION),Aa=this.parameters,Ca=B.calculateAnchorPosForRendering(Aa),{scaleX:Ea,scaleY:Da}=this._getScreenScale(ja,ja.screenToWorldRatio),Ia=2*ja.screenToWorldRatio;for(let Na=0;Na<oa.data.length/oa.size;Na++){var Ha=Na*oa.size;const La=oa.data[Ha];Ha=oa.data[Ha+1];var Ja=Na*qa.size;ba[0]=qa.data[Ja];ba[1]=qa.data[Ja+1];Ja=0;Aa.textureIsSignedDistanceField&&(Ja=Math.min(Aa.outlineSize,
.5*ba[0])*ja.screenToWorldRatio/2);ba[0]*=Ea;ba[1]*=Da;X(sa,La,Ha,ba,Ia,Ja,Aa.rotation+wa.data[Na*wa.size],Aa,Ca)&&ua(ya.dist,ya.normal,-1,!1)}}createBufferWriter(){return new ra}_updateScaleInfo(ja,oa,qa){const sa=this.parameters;null!=sa.screenSizePerspective?L.precomputeScaleFactor(qa,oa,sa.screenSizePerspective,ja.factor):(ja.factor.scale=1,ja.factor.factor=0,ja.factor.minScaleFactor=0);null!=sa.screenSizePerspectiveAlignment?L.precomputeScaleFactor(qa,oa,sa.screenSizePerspectiveAlignment,ja.factorAlignment):
(ja.factorAlignment.factor=ja.factor.factor,ja.factorAlignment.scale=ja.factor.scale,ja.factorAlignment.minScaleFactor=ja.factor.minScaleFactor)}applyShaderOffsetsView(ja,oa,qa,sa,ua,ya,wa){oa=K(oa,qa,ua,O);this._applyVerticalGroundOffsetView(ja,oa,ua,wa);this._applyVerticalOffsetTransformationView(wa,oa,ua,ya);this._applyPolygonOffsetView(wa,oa,sa[3],ua,wa);this._applyCenterOffsetView(wa,sa,wa);return wa}applyShaderOffsetsNDC(ja,oa,qa,sa,ua){this._applyCenterOffsetNDC(ja,oa,qa,sa);null!=ua&&h.copy(ua,
sa);this._applyPolygonOffsetNDC(sa,oa,qa,sa);return sa}_applyPolygonOffsetView(ja,oa,qa,sa,ua){var ya=sa.aboveGround?1:-1;qa=Math.sign(qa);0===qa&&(qa=ya);ya*=qa;if(0>=this.parameters.shaderPolygonOffset)return h.copy(ua,ja);oa=b.clamp(Math.abs(oa.cosAngle),.01,1);sa=1-Math.sqrt(1-oa*oa)/oa/sa.viewport[2];0<ya?h.scale(ua,ja,sa):h.scale(ua,ja,1/sa);return ua}_applyVerticalGroundOffsetView(ja,oa,qa,sa){const ua=h.length(ja),ya=qa.aboveGround?1:-1;qa=qa.computeRenderPixelSizeAtDist(ua)*p.HUDVerticalPixelOffset;
oa=h.scale(fa,oa.normal,ya*qa);h.add(sa,ja,oa);return sa}_applyVerticalOffsetTransformationView(ja,oa,qa,sa){const ua=this.parameters;if(!ua.verticalOffset?.screenLength){if(ua.screenSizePerspective||ua.screenSizePerspectiveAlignment){var ya=h.length(ja);this._updateScaleInfo(sa,ya,oa.cosAngle)}else sa.factor.scale=1,sa.factorAlignment.scale=1;return ja}ya=h.length(ja);qa=y.verticalOffsetAtDistance(qa,ya,ua.verticalOffset,oa.cosAngle,ua.screenSizePerspectiveAlignment??ua.screenSizePerspective);this._updateScaleInfo(sa,
ya,oa.cosAngle);h.scale(oa.normal,oa.normal,qa);return h.add(ja,ja,oa.normal)}_applyCenterOffsetView(ja,oa,qa){const sa="screen"!==this.parameters.centerOffsetUnits;qa!==ja&&h.copy(qa,ja);sa&&(qa[0]+=oa[0],qa[1]+=oa[1],oa[2]&&(h.normalize(Z,qa),h.add(qa,qa,h.scale(Z,Z,oa[2]))));return qa}_applyCenterOffsetNDC(ja,oa,qa,sa){const ua="screen"!==this.parameters.centerOffsetUnits;sa!==ja&&h.copy(sa,ja);ua||(sa[0]+=oa[0]/qa.fullWidth*2,sa[1]+=oa[1]/qa.fullHeight*2);return sa}_applyPolygonOffsetNDC(ja,oa,
qa,sa){const ua=this.parameters.shaderPolygonOffset;ja!==sa&&h.copy(sa,ja);ua&&(ja=qa.aboveGround?1:-1,sa[2]-=(ja*Math.sign(oa[3])||ja)*ua);return sa}set visible(ja){this._visible=ja}get visible(){const {color:ja,outlineSize:oa,outlineColor:qa}=this.parameters,sa=ja[3]>=x.alphaCutoff||oa>=x.alphaCutoff&&qa[3]>=x.alphaCutoff;return this._visible&&sa}createGLMaterial(ja){return new da(ja)}calculateRelativeScreenBounds(ja,oa,qa=z.create()){var sa=this.parameters;qa[0]=sa.anchorPosition[0]*-ja[0]+sa.screenOffset[0]*
oa;qa[1]=sa.anchorPosition[1]*-ja[1]+sa.screenOffset[1]*oa;qa[2]=qa[0]+ja[0];qa[3]=qa[1]+ja[1];return qa}_getScreenScale(ja,oa){ja=ja.attributes.get(M.VertexAttribute.FEATUREATTRIBUTE);if(null==ja)return{scaleX:oa,scaleY:oa};ja=m.fromArray(ja.data,F);v.evaluateModelTransformScale(A,this.parameters,ja);return{scaleX:A[0]*oa,scaleY:A[1]*oa}}}class da extends D.GLTextureMaterial{constructor(ja){super({...ja,...ja.material.parameters})}beginSlot(ja){this.updateTexture(this._material.parameters.textureId);
this._material.setParameters(this.textureBindParameters);return this.acquireTechnique(H.HUDMaterialTechnique,ja)}}const aa=new C.ScaleInfo,fa=l.create(),Z=l.create(),ma=m.create(),S=l.create(),ha=l.create(),G=k.create(),ca=k.create(),pa=f.create(),Y=f.create(),R=n.create(),ia=l.create(),A=l.create(),F=m.create(),O={normal:S,cosAngle:0},ba=[0,0],na=l.fromValues(0,0,1);class P extends D.GLTextureMaterialBindParameters{constructor(){super(...arguments);this.renderOccluded=J.RenderOccludedFlag.Occlude;
this.isDecoration=!1;this.color=m.freeze(1,1,1,1);this.polygonOffset=!1;this.anchorPosition=k.fromValues(.5,.5);this.screenOffset=[0,0];this.shaderPolygonOffset=1E-5;this.sampleSignedDistanceFieldTexelCenter=this.textureIsSignedDistanceField=!1;this.outlineColor=m.freeze(1,1,1,1);this.rotation=this.outlineSize=0;this.vvSizeEnabled=this.hasRotation=!1;this.vvSymbolRotationMatrix=this.vvSymbolAnchor=this.vvOpacity=this.vvColor=this.vvSize=null;this.hasSlicePlane=!1;this.occlusionTest=this.pixelSnappingEnabled=
!0;this.horizonCullingEnabled=this.occludedFragmentFade=!1;this.centerOffsetUnits="world";this.drawInSecondSlot=!1;this.depthEnabled=!0;this.isLabel=this.draped=!1}}const W=q.newLayout().vec3f(M.VertexAttribute.POSITION).vec3f(M.VertexAttribute.NORMAL).vec2f(M.VertexAttribute.UV0).vec4u8(M.VertexAttribute.COLOR).vec2f(M.VertexAttribute.SIZE).f32(M.VertexAttribute.ROTATION).vec4f(M.VertexAttribute.CENTEROFFSETANDDISTANCE).vec4f(M.VertexAttribute.FEATUREATTRIBUTE),ea=W.clone().vec4u8(M.VertexAttribute.OBJECTANDLAYERIDCOLOR);
class ra{constructor(){this.vertexBufferLayout=u.olidEnabled()?ea:W}elementCount(ja){return 6*ja.get(M.VertexAttribute.POSITION).indices.length}write(ja,oa,qa,sa,ua,ya){U.writePosition(qa.get(M.VertexAttribute.POSITION),ja,ua.position,ya,6);U.writeNormal(qa.get(M.VertexAttribute.NORMAL),oa,ua.normal,ya,6);ja=qa.get(M.VertexAttribute.UV0)?.data;var wa=0,Aa=0,Ca=1,Ea=1;ja&&4<=ja.length&&(wa=ja[0],Aa=ja[1],Ca=ja[2],Ea=ja[3]);Ca=Math.min(1.99999,Ca+1);Ea=Math.min(1.99999,Ea+1);ja=qa.get(M.VertexAttribute.POSITION).indices.length;
oa=ya;var Da=ua.uv0;for(let Ja=0;Ja<ja;++Ja)Da.set(oa,0,wa),Da.set(oa,1,Aa),oa++,Da.set(oa,0,Ca),Da.set(oa,1,Aa),oa++,Da.set(oa,0,Ca),Da.set(oa,1,Ea),oa++,Da.set(oa,0,Ca),Da.set(oa,1,Ea),oa++,Da.set(oa,0,wa),Da.set(oa,1,Ea),oa++,Da.set(oa,0,wa),Da.set(oa,1,Aa),oa++;U.writeColor(qa.get(M.VertexAttribute.COLOR),4,ua.color,ya,6);const {data:Ia,indices:Ha}=qa.get(M.VertexAttribute.SIZE);ja=Ha.length;wa=ua.size;oa=ya;for(Aa=0;Aa<ja;++Aa)for(Ca=Ia[2*Ha[Aa]],Ea=Ia[2*Ha[Aa]+1],Da=0;6>Da;++Da)wa.set(oa,0,
Ca),wa.set(oa,1,Ea),oa++;U.writeBufferFloat(qa.get(M.VertexAttribute.ROTATION),ua.rotation,ya,6);qa.get(M.VertexAttribute.CENTEROFFSETANDDISTANCE)?U.writeBufferVec4(qa.get(M.VertexAttribute.CENTEROFFSETANDDISTANCE),ua.centerOffsetAndDistance,ya,6):U.writeBufferVec4Zeros(ua.centerOffsetAndDistance,ya,6*ja);qa.get(M.VertexAttribute.FEATUREATTRIBUTE)?U.writeBufferVec4(qa.get(M.VertexAttribute.FEATUREATTRIBUTE),ua.featureAttribute,ya,6):U.writeBufferVec4Zeros(ua.featureAttribute,ya,6*ja);null!=sa&&(qa=
qa.get(M.VertexAttribute.POSITION)?.indices)&&(qa=qa.length,ua=ua.getField(M.VertexAttribute.OBJECTANDLAYERIDCOLOR,r.BufferViewVec4u8),U.writeObjectAndLayerIdColor(sa,ua,qa,ya,6))}}a.HUDMaterial=V;a.Parameters=P;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["exports"],function(a){function b(f){return f instanceof Float32Array&&16<=f.length}function c(f){return Array.isArray(f)&&16<=f.length}a.isMat4=function(f){return b(f)||
c(f)};a.isMat4f32=b;a.isMat4f64=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl":function(){define("exports ../attributes/VerticalOffset.glsl ../util/ScreenSizePerspective.glsl ../util/View.glsl ../../shaderModules/Float4PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../../lib/VertexAttribute".split(" "),function(a,b,c,f,e,n,d,k){a.HUD=function(h,l){h.include(c.ScreenSizePerspective);
h.attributes.add(k.VertexAttribute.POSITION,"vec3");h.attributes.add(k.VertexAttribute.NORMAL,"vec3");h.attributes.add(k.VertexAttribute.CENTEROFFSETANDDISTANCE,"vec4");h=h.vertex;f.addProjViewLocalOrigin(h,l);f.addCameraPosition(h,l);h.uniforms.add(new e.Float4PassUniform("viewport",(m,t)=>t.camera.fullViewport),new n.FloatPassUniform("polygonOffset",m=>m.shaderPolygonOffset),new n.FloatPassUniform("cameraGroundRelative",(m,t)=>t.camera.aboveGround?1:-1));l.hasVerticalOffset&&b.addVerticalOffset(h);
h.constants.add("smallOffsetAngle","float",.984807753012208);h.code.add(d.glsl`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`);h.code.add(d.glsl`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${l.terrainDepthTest?d.glsl.float(0):d.glsl`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `);l.draped&&!l.hasVerticalOffset||f.addViewNormal(h);l.draped||(h.uniforms.add(new n.FloatPassUniform("perDistancePixelRatio",(m,t)=>Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2))),h.code.add(d.glsl`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${d.glsl.float(.5)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `));l.screenCenterOffsetUnitsEnabled&&f.addPixelRatio(h);l.hasScreenSizePerspective&&c.addScreenSizePerspectiveAlignment(h);h.code.add(d.glsl`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      vec3 centerOffset = centerOffsetAndDistance.xyz;
      float pointGroundDistance = centerOffsetAndDistance.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${l.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${l.hasScreenSizePerspective?l.hasVerticalOffset||l.screenCenterOffsetUnitsEnabled?"vec3 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"":""}

      ${l.hasVerticalOffset?l.hasScreenSizePerspective?"float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight \x3d verticalOffset.x;":""}

      ${l.hasVerticalOffset?d.glsl`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${l.screenCenterOffsetUnitsEnabled?"":d.glsl`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${l.screenCenterOffsetUnitsEnabled?l.hasScreenSizePerspective?"float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY \x3d centerOffset.y;":""}

      ${l.screenCenterOffsetUnitsEnabled?"posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)};a.HUDVerticalPixelOffset=.5;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/ScaleInfo":function(){define(["exports"],function(a){class b{constructor(){this.factor=new c;this.factorAlignment=new c}}class c{constructor(){this.minScaleFactor=this.factor=this.scale=0}}a.ScaleFactor=c;a.ScaleInfo=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/HUDMaterial.glsl":function(){define("exports ../core/libs/gl-matrix-2/math/vec2 ../core/libs/gl-matrix-2/factories/vec2f64 ../core/libs/gl-matrix-2/factories/vec4f64 ../geometry/support/Ellipsoid ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4DrawUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform ../views/3d/webgl-engine/lib/OITPass ../views/3d/webgl-engine/lib/VertexAttribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C){function U(N){const K=new L.ShaderBuilder;var X=N.signedDistanceFieldEnabled;K.include(l.HUD,N);K.include(d.SliceDraw,N);if(N.occlusionPass)return K.include(m.HUDOcclusionPass,N),K;const {vertex:V,fragment:da}=K;K.include(g.ScreenSizePerspective);K.include(r.VisualVariables,N);K.include(k.ObjectAndLayerIdColor,N);K.include(t.HUDVisibility);da.include(q.RgbaFloatEncoding);da.include(w.ColorConversion);K.varyings.add("vcolor","vec4");
K.varyings.add("vtc","vec2");K.varyings.add("vsize","vec2");K.varyings.add("voccluded","float");V.uniforms.add(new D.Float4PassUniform("viewport",(Z,ma)=>ma.camera.fullViewport),new x.Float2PassUniform("screenOffset",(Z,ma)=>b.set(H,2*Z.screenOffset[0]*ma.camera.pixelRatio,2*Z.screenOffset[1]*ma.camera.pixelRatio)),new x.Float2PassUniform("anchorPosition",Z=>y(Z)),new D.Float4PassUniform("materialColor",Z=>Z.color),new J.FloatPassUniform("materialRotation",Z=>Z.rotation));p.addPixelRatio(V);X&&(V.uniforms.add(new D.Float4PassUniform("outlineColor",
Z=>Z.outlineColor)),da.uniforms.add(new D.Float4PassUniform("outlineColor",Z=>0<Z.outlineColor[3]&&0<Z.outlineSize?Z.outlineColor:f.ZEROS),new J.FloatPassUniform("outlineSize",Z=>0<Z.outlineColor[3]&&0<Z.outlineSize?Z.outlineSize:0)));N.horizonCullingEnabled&&V.uniforms.add(new u.Float4DrawUniform("pointDistanceSphere",(Z,ma)=>{ma=ma.camera.eye;Z=Z.origin;return f.fromValues(Z[0]-ma[0],Z[1]-ma[1],Z[2]-ma[2],e.earth.radius)}));N.pixelSnappingEnabled&&V.include(h.AlignPixel);N.hasScreenSizePerspective&&
(g.addScreenSizePerspective(V),g.addScreenSizePerspectiveAlignment(V));N.debugDrawLabelBorder&&K.varyings.add("debugBorderCoords","vec4");K.attributes.add(C.VertexAttribute.UV0,"vec2");K.attributes.add(C.VertexAttribute.COLOR,"vec4");K.attributes.add(C.VertexAttribute.SIZE,"vec2");K.attributes.add(C.VertexAttribute.ROTATION,"float");K.attributes.add(C.VertexAttribute.FEATUREATTRIBUTE,"vec4");V.code.add(N.horizonCullingEnabled?E.glsl`bool behindHorizon(vec3 posModel) {
vec3 camToEarthCenter = pointDistanceSphere.xyz - localOrigin;
vec3 camToPos = pointDistanceSphere.xyz + posModel;
float earthRadius = pointDistanceSphere.w;
float a = dot(camToPos, camToPos);
float b = dot(camToPos, camToEarthCenter);
float c = dot(camToEarthCenter, camToEarthCenter) - earthRadius * earthRadius;
return  b > 0.0 && b < a && b * b  > a * c;
}`:E.glsl`bool behindHorizon(vec3 posModel) { return false; }`);V.main.add(E.glsl`
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      forwardObjectAndLayerIdColor();

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }

      if (behindHorizon(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }

      vec2 inputSize;
      ${E.If(N.hasScreenSizePerspective,E.glsl`
          inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
          vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);`,E.glsl`
          inputSize = size;
          vec2 screenOffsetScaled = screenOffset;`)}
      ${E.If(N.vvSize,E.glsl`inputSize *= vvScale(featureAttribute).xx;`)}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);
      bool visible = testHUDVisibility(posProj);
      voccluded = visible ? 0.0 : 1.0;
    `);var aa=E.glsl`
      vec2 uv01 = floor(uv0);
      vec2 uv = uv0 - uv01;
      quadOffset.xy = (uv01 - anchorPosition) * 2.0 * combinedSize;

      ${E.If(N.hasRotation,E.glsl`
          float angle = radians(materialRotation + rotation);
          float cosAngle = cos(angle);
          float sinAngle = sin(angle);
          mat2 rotate = mat2(cosAngle, -sinAngle, sinAngle,  cosAngle);

          quadOffset.xy = rotate * quadOffset.xy;
        `)}

      quadOffset.xy = (quadOffset.xy + screenOffsetScaled) / viewport.zw * posProj.w;
  `,fa=N.pixelSnappingEnabled?X?E.glsl`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:E.glsl`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:E.glsl`posProj += quadOffset;`;V.main.add(E.glsl`
    ${E.If(N.occlusionTestEnabled,E.glsl`
      if (!visible) {
        vtc = vec2(0.0);
        ${E.If(N.debugDrawLabelBorder,"debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);")}
        return;
      }`)}
    ${aa}
    ${N.vvColor?"vcolor \x3d interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor \x3d color / 255.0 * materialColor;"}

    ${E.If(N.output===n.ShaderOutput.ObjectAndLayerIdColor,E.glsl`vcolor.a = 1.0;`)}

    bool alphaDiscard = vcolor.a < ${E.glsl.float(v.alphaCutoff)};
    ${E.If(X,`alphaDiscard = alphaDiscard && outlineColor.a < ${E.glsl.float(v.alphaCutoff)};`)}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${fa}
      gl_Position = posProj;
    }

    vtc = uv;

    ${E.If(N.debugDrawLabelBorder,E.glsl`debugBorderCoords = vec4(uv01, 1.5 / combinedSize);`)}
    vsize = inputSize;
  `);da.uniforms.add(new Q.Texture2DPassUniform("tex",Z=>Z.texture));N.occludedFragmentFade&&(da.uniforms.add(new Q.Texture2DPassUniform("depthMap",(Z,ma)=>ma.mainDepth)),da.uniforms.add(new J.FloatPassUniform("fadeFactor",()=>B.occludedFadeFactor)));aa=N.debugDrawLabelBorder?E.glsl`(isBorder > 0.0 ? 0.0 : ${E.glsl.float(v.alphaCutoff)})`:E.glsl.float(v.alphaCutoff);fa=N.output===n.ShaderOutput.Highlight;X=E.glsl`
    ${E.If(N.debugDrawLabelBorder,E.glsl`float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`)}

    ${E.If(N.sampleSignedDistanceFieldTexelCenter,E.glsl`
      float txSize = float(textureSize(tex, 0).x);
      float texelSize = 1.0 / txSize;

      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;`,E.glsl`vec2 samplePos = vtc;`)}

    ${X?E.glsl`
      vec4 fillPixelColor = vcolor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${aa} ||
          fillPixelColor.a + outlinePixelColor.a < ${E.glsl.float(v.alphaCutoff)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        ${E.If(!fa,E.glsl`fragColor = vec4(compositeColor, compositeAlpha);`)}
      } else {
        if (fillAlphaFactor < ${aa}) {
          discard;
        }

        ${E.If(!fa,E.glsl`fragColor = premultiplyAlpha(fillPixelColor);`)}
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:E.glsl`
          vec4 texColor = texture(tex, vtc, -0.5);
          if (texColor.a < ${aa}) {
            discard;
          }
          ${E.If(!fa,E.glsl`fragColor = texColor * premultiplyAlpha(vcolor);`)}
          `}

    ${E.If(N.occludedFragmentFade&&!fa,E.glsl`
        float zSample = texelFetch(depthMap, ivec2(gl_FragCoord.xy), 0).x;
        if (zSample < gl_FragCoord.z) {
          fragColor *= fadeFactor;
        }
        `)}

    ${E.If(!fa&&N.debugDrawLabelBorder,E.glsl`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`)}
  `;switch(N.output){case n.ShaderOutput.Color:N.oitPass===M.OITPass.ColorAlpha&&(K.outputs.add("fragColor","vec4",0),K.outputs.add("fragAlpha","float",1));da.main.add(E.glsl`
        ${X}
        ${E.If(N.oitPass===M.OITPass.FrontFace,E.glsl`fragColor.rgb /= fragColor.a;`)}
        ${E.If(N.oitPass===M.OITPass.ColorAlpha,E.glsl`fragAlpha = fragColor.a;`)}`);break;case n.ShaderOutput.ObjectAndLayerIdColor:da.main.add(E.glsl`
        ${X}
        outputObjectAndLayerIdColor();`);break;case n.ShaderOutput.Highlight:K.include(z.OutputHighlight,N),da.main.add(E.glsl`
        ${X}
        outputHighlight(voccluded == 1.0);`)}return K}function y(N,K=H){if(N.textureIsSignedDistanceField){var X=N.anchorPosition;N=N.distanceFieldBoundingBox;null!=N?b.set(K,X[0]*(N[2]-N[0])+N[0],X[1]*(N[3]-N[1])+N[1]):b.set(K,0,0)}else b.copy(K,N.anchorPosition);return K}const B={occludedFadeFactor:.6},H=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,build:U,calculateAnchorPosForRendering:y,shaderSettings:B},Symbol.toStringTag,{value:"Module"}));a.HUDMaterial=c;a.build=U;a.calculateAnchorPosForRendering=
y;a.shaderSettings=B})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl":function(){define(["exports","../../shaderModules/BooleanPassUniform","../../shaderModules/interfaces"],function(a,b,c){a.AlignPixel=function(f){f.uniforms.add(new b.BooleanPassUniform("alignPixelEnabled",(e,n)=>n.alignPixelEnabled));f.code.add(c.glsl`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`);f.code.add(c.glsl`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl":function(){define(["exports","./AlignPixel.glsl","../shading/TerrainDepthTest.glsl","../../shaderModules/interfaces"],function(a,b,c,f){a.HUDOcclusionPass=function(e,n){const {vertex:d,fragment:k}=e;e.include(c.terrainDepthTest,n);d.include(b.AlignPixel);n.terrainDepthTest&&e.varyings.add("depth","float");d.main.add(f.glsl`
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${n.terrainDepthTest?f.glsl`depth = projectAux.posView.z;`:""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  `);k.main.add(f.glsl`fragColor = vec4(1);
if(terrainDepthTest(depth)) {
fragColor.g = 0.5;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl":function(){define("exports ./AlignPixel.glsl ./HUDRenderStyle ../../shaderModules/Float4PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DPassUniform".split(" "),function(a,b,c,f,e,n,d){a.HUDVisibility=function(k){k.vertex.uniforms.add(new e.FloatPassUniform("renderTransparentlyOccludedHUD",(h,l)=>l.hudRenderStyle===
c.HUDRenderStyle.Occluded?1:l.hudRenderStyle===c.HUDRenderStyle.NotOccluded?0:.75),new f.Float4PassUniform("viewport",(h,l)=>l.camera.fullViewport),new d.Texture2DPassUniform("hudVisibilityTexture",(h,l)=>l.hudVisibility?.getTexture()));k.vertex.include(b.AlignPixel);k.vertex.code.add(n.glsl`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle":function(){define(["exports"],function(a){a.HUDRenderStyle=void 0;var b=a.HUDRenderStyle||(a.HUDRenderStyle={});b[b.Occluded=0]="Occluded";b[b.NotOccluded=1]="NotOccluded";b[b.Both=2]="Both";b[b.COUNT=3]="COUNT";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(a,b){a.RgbaFloatEncoding=function(c){c.code.add(b.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}`);c.code.add(b.glsl`const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`);c.code.add(b.glsl`const vec4 uninterpolatedRGBAToFloatFactors = vec4(
1.0 / 256.0,
1.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0,
1.0 / 256.0 / 256.0 / 256.0 / 256.0
);
float uninterpolatedRGBAToFloat(vec4 rgba) {
return (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;
}`)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(a,b,c){class f extends b.Uniform{constructor(e,n){super(e,"vec4",c.BindType.Draw,(d,k,h)=>d.setUniform4fv(e,n(k,h)))}}a.Float4DrawUniform=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/HUDMaterialTechnique":function(){define("require exports ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OITPass ../lib/OrderIndependentTransparency ../../../../chunks/HUDMaterial.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(a,b,c,f,e,n,d,k,h,l){class m extends e.ShaderTechnique{constructor(z,r,v){super(z,r,new f.ReloadableShaderModule(k.HUDMaterial,()=>new Promise((w,q)=>a(["./HUDMaterial.glsl"],w,q))),v);this.primitiveType=r.occlusionPass?h.PrimitiveType.POINTS:h.PrimitiveType.TRIANGLES}initializePipeline(z){const {oitPass:r,hasPolygonOffset:v,draped:w,output:q,depthTestEnabled:g}=z;z=r===n.OITPass.NONE;const p=v?t:null;var x=r===n.OITPass.ColorAlpha;x=w||!g||x||q===c.ShaderOutput.Highlight?null:l.defaultDepthWrite;
return l.makePipelineState({blending:q===c.ShaderOutput.Color?z?l.blendWithPremultipliedAlpha:d.oitBlending(r):null,depthTest:g&&!w?{func:h.CompareFunction.LEQUAL}:null,depthWrite:x,drawBuffers:d.getDrawBuffers(r,q),colorWrite:l.defaultColorWrite,polygonOffset:p})}}const t={factor:0,units:-4};b.HUDMaterialTechnique=m;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration":function(){define("exports ../../../../chunks/tslib.es6 ../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl ../core/shaderLibrary/output/Emissions.glsl ../core/shaderTechnique/ShaderTechniqueConfiguration ../materials/DefaultTechniqueConfiguration".split(" "),
function(a,b,c,f,e,n){class d extends n.DefaultTechniqueConfiguration{constructor(k){super();this.spherical=k;this.screenCenterOffsetUnitsEnabled=!1;this.occlusionTestEnabled=!0;this.hasPolygonOffset=this.hasSlicePlane=this.debugDrawLabelBorder=this.hasRotation=this.hasScreenSizePerspective=this.hasVerticalOffset=this.vvColor=this.vvSize=this.sampleSignedDistanceFieldTexelCenter=this.signedDistanceFieldEnabled=!1;this.pixelSnappingEnabled=this.depthTestEnabled=!0;this.objectAndLayerIdColorInstanced=
this.occludedFragmentFade=this.occlusionPass=this.cullAboveTerrain=this.terrainDepthTest=this.draped=!1;this.horizonCullingEnabled=!0;this.textureCoordinateType=c.TextureCoordinateType.None;this.emissionSource=f.EmissionSource.None;this.hasSliceInVertexProgram=this.discardInvisibleFragments=!0;this.hasVvInstancing=!1}}b.__decorate([e.parameter()],d.prototype,"screenCenterOffsetUnitsEnabled",void 0);b.__decorate([e.parameter()],d.prototype,"occlusionTestEnabled",void 0);b.__decorate([e.parameter()],
d.prototype,"signedDistanceFieldEnabled",void 0);b.__decorate([e.parameter()],d.prototype,"sampleSignedDistanceFieldTexelCenter",void 0);b.__decorate([e.parameter()],d.prototype,"vvSize",void 0);b.__decorate([e.parameter()],d.prototype,"vvColor",void 0);b.__decorate([e.parameter()],d.prototype,"hasVerticalOffset",void 0);b.__decorate([e.parameter()],d.prototype,"hasScreenSizePerspective",void 0);b.__decorate([e.parameter()],d.prototype,"hasRotation",void 0);b.__decorate([e.parameter()],d.prototype,
"debugDrawLabelBorder",void 0);b.__decorate([e.parameter()],d.prototype,"hasSlicePlane",void 0);b.__decorate([e.parameter()],d.prototype,"hasPolygonOffset",void 0);b.__decorate([e.parameter()],d.prototype,"depthTestEnabled",void 0);b.__decorate([e.parameter()],d.prototype,"pixelSnappingEnabled",void 0);b.__decorate([e.parameter()],d.prototype,"draped",void 0);b.__decorate([e.parameter()],d.prototype,"terrainDepthTest",void 0);b.__decorate([e.parameter()],d.prototype,"cullAboveTerrain",void 0);b.__decorate([e.parameter()],
d.prototype,"occlusionPass",void 0);b.__decorate([e.parameter()],d.prototype,"occludedFragmentFade",void 0);b.__decorate([e.parameter()],d.prototype,"objectAndLayerIdColorInstanced",void 0);b.__decorate([e.parameter()],d.prototype,"horizonCullingEnabled",void 0);a.HUDMaterialTechniqueConfiguration=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/rendering/RenderGeometryBufferWriter":function(){define(["exports","../../../../../../core/libs/gl-matrix-2/math/mat4",
"../../../../../../core/libs/gl-matrix-2/factories/mat4f64"],function(a,b,c){class f{constructor(d){this._bufferWriter=null;this._bufferWriter=d.createBufferWriter()}createBuffer(d,k){const h=this._bufferWriter;let l=null;if(d.transformation&&k)b.copy(e,d.transformation),e[12]-=k[0],e[13]-=k[1],e[14]-=k[2],l=e;else{if(k)throw Error("not implemented");d.transformation&&(l=d.transformation)}k=null;l&&(b.invert(n,e),b.transpose(n,n),k=n);const m=d.attributes,t=h.elementCount(m);t>Math.floor(4194304/
(h.vertexBufferLayout.stride/4))&&console.warn("geometry with very large number of elements encountered");const z=h.vertexBufferLayout.createBuffer(t);h.write(l,k,m,d.objectAndLayerIdColor,z,0);return{data:z.buffer,elementCount:t}}}const e=c.create(),n=c.create();a.RenderGeometryBufferWriter=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports","../../../../core/PooledArray","../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64",
"./Util"],function(a,b,c,f,e){class n{constructor(k,h,l){this.primitiveIndices=k;this._numIndexPerPrimitive=h;this.position=l;this._children=void 0;e.assert(1<=k.length);e.assert(3===l.size||4===l.size);const {data:m,size:t,indices:z}=l;e.assert(0===z.length%this._numIndexPerPrimitive);e.assert(z.length>=k.length*this._numIndexPerPrimitive);var r=k.length;h=t*z[this._numIndexPerPrimitive*k[0]];d.clear();d.push(h);l=f.fromValues(m[h],m[h+1],m[h+2]);var v=f.clone(l);for(var w=0;w<r;++w){var q=this._numIndexPerPrimitive*
k[w];for(var g=0;g<this._numIndexPerPrimitive;++g){h=t*z[q+g];d.push(h);let p=m[h];l[0]=Math.min(p,l[0]);v[0]=Math.max(p,v[0]);p=m[h+1];l[1]=Math.min(p,l[1]);v[1]=Math.max(p,v[1]);p=m[h+2];l[2]=Math.min(p,l[2]);v[2]=Math.max(p,v[2])}}this.bbMin=l;this.bbMax=v;k=c.lerp(f.create(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(v[0]-l[0],v[1]-l[1]),v[2]-l[2]);l=this.radius*this.radius;for(v=0;v<d.length;++v)h=d.at(v),r=m[h]-k[0],w=m[h+1]-k[1],h=m[h+2]-k[2],q=r*r+w*w+h*h,q<=l||(q=Math.sqrt(q),
g=.5*(q-this.radius),this.radius+=g,l=this.radius*this.radius,q=g/q,k[0]+=r*q,k[1]+=w*q,k[2]+=h*q);this.center=k;d.clear()}getChildren(){if(this._children||1>=c.squaredDistance(this.bbMin,this.bbMax))return this._children;var k=c.lerp(f.create(),this.bbMin,this.bbMax,.5),h=this.primitiveIndices.length;const l=new Uint8Array(h),m=Array(8);for(var t=0;8>t;++t)m[t]=0;const {data:z,size:r,indices:v}=this.position;for(t=0;t<h;++t){var w=0;const g=this._numIndexPerPrimitive*this.primitiveIndices[t];var q=
r*v[g];let p=z[q],x=z[q+1],u=z[q+2];for(let D=1;D<this._numIndexPerPrimitive;++D){q=r*v[g+D];const J=z[q],E=z[q+1];q=z[q+2];J<p&&(p=J);E<x&&(x=E);q<u&&(u=q)}p<k[0]&&(w|=1);x<k[1]&&(w|=2);u<k[2]&&(w|=4);l[t]=w;++m[w]}k=0;for(t=0;8>t;++t)0<m[t]&&++k;if(!(2>k)){k=Array(8);for(t=0;8>t;++t)k[t]=0<m[t]?new Uint32Array(m[t]):void 0;for(t=0;8>t;++t)m[t]=0;for(t=0;t<h;++t)w=l[t],k[w][m[w]++]=this.primitiveIndices[t];this._children=[];for(h=0;8>h;++h)void 0!==k[h]&&this._children.push(new n(k[h],this._numIndexPerPrimitive,
this.position));return this._children}}static prune(){d.prune()}}const d=new b({deallocator:null});a.BoundingInfo=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/symbolization/Symbolizer":function(){define(["exports","../featureData/FeatureData","./UniqueValueFeatureRenderer","../../../../support/RenderCoordsHelper"],function(a,b,c,f){class e{constructor(n){this._tileFeatureData=new Map;this._context={viewSpatialReference:n.viewSpatialReference,
renderSpatialReference:n.renderSpatialReference,renderCoordsHelper:f.RenderCoordsHelper.create(n.viewingMode,n.renderSpatialReference)}}async add(n,d){this._featureRenderer||(this._featureRenderer=new c.UniqueValueFeatureRenderer(this._context),await this._featureRenderer.load());n=this._addTileFeatureData(n);await this._featureRenderer.add(n,d)}async remove(n,d){const k=this._getFeatureSetFromTileId(n);k&&(this._featureRenderer&&this._featureRenderer.remove(k,d),this._removeTileFeatureData(n))}_getFeatureSetFromTileId(n){return this._tileFeatureData.get(n)}_addTileFeatureData(n){const d=
n.descriptor.id,k=n.pages.reduce((h,{featureCount:l})=>h+l,0);n=new b.FeatureData(n,k);this._tileFeatureData.set(d,n);return n}_removeTileFeatureData(n){const d=this._tileFeatureData.get(n);d&&(d.dispose(),this._tileFeatureData.delete(n))}}a.Symbolizer=e;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/featureData/FeatureData":function(){define(["exports","./interfaces","./processingUtils"],function(a,b,c){class f{constructor(e,n,d=null){this._tile=
e;this._numFeatures=n;this._partitionInfo=d}get partitionInfo(){return this._partitionInfo}get tile(){return this._tile}get numFeatures(){return this._numFeatures}get tileId(){return this._tile.descriptor.id}get objectIds(){if(null==this._objectIds)throw Error("objectIds haven't been provisioned yet");return this._objectIds}get partitionIds(){if(null==this._partitionIds)throw Error("partitionIds haven't been provisioned yet");return this._partitionIds}get mapCoordinates(){if(null==this._mapCoordinates)throw Error("mapCoordinates haven't been provisioned yet");
return this._mapCoordinates}get renderCoordinates(){if(null==this._renderCoordinates)throw Error("renderCoordinates haven't been provisioned yet");return this._renderCoordinates}get tileCenterRenderCoordinates(){if(null==this._tileCenterRenderCoordinates)throw Error("tileCenterRenderCoordinates hasn't been provisioned yet");return this._tileCenterRenderCoordinates}async provision(e,n){for(const d of e)switch(d){case b.FeatureDataItem.OBJECT_ID:if(this._objectIds)return;this._objectIds=await c.getObjectIds(this);
break;case b.FeatureDataItem.PARTITION_ID:if(this._partitionIds)return;this._partitionIds=new Uint32Array(this._numFeatures);break;case b.FeatureDataItem.GEOMETRY_MAP_COORDINATES:if(this._mapCoordinates)return;this._mapCoordinates=await c.getMapCoordinates(this);break;case b.FeatureDataItem.GEOMETRY_RENDER_COORDINATES:if(this._renderCoordinates)return;this._renderCoordinates=await c.getRenderCoordinates(this,n);break;case b.FeatureDataItem.TILE_CENTER_RENDER_COORDINATES:if(this._tileCenterRenderCoordinates)return;
this._tileCenterRenderCoordinates=await c.getTileCenterRenderCoordinates(this,n);break;default:throw Error("not implemented");}}dispose(){if(this.partitions){for(const e of this.partitions)e.dispose();this.partitions=void 0}}}a.FeatureData=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/featureData/interfaces":function(){define(["exports"],function(a){a.FeatureDataItem=void 0;var b=a.FeatureDataItem||(a.FeatureDataItem={});b[b.OBJECT_ID=0]=
"OBJECT_ID";b[b.PARTITION_ID=1]="PARTITION_ID";b[b.GEOMETRY_MAP_COORDINATES=2]="GEOMETRY_MAP_COORDINATES";b[b.GEOMETRY_RENDER_COORDINATES=3]="GEOMETRY_RENDER_COORDINATES";b[b.TILE_CENTER_RENDER_COORDINATES=4]="TILE_CENTER_RENDER_COORDINATES";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/featureData/processingUtils":function(){define("exports ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../geometry/projection/projectBuffer ../../../../../../geometry/projection/projectVectorToVector ../../../../../../geometry/support/aaBoundingRect ./interfaces".split(" "),
function(a,b,c,f,e,n){a.getMapCoordinates=async function(d,k){const {numFeatures:h,tile:l,partitionInfo:m}=d;({pages:k}=l);if(0===k.length||0===h)return new Float64Array;d=new Float64Array(3*h);if(m){var t=k.reduce((v,{featureCount:w})=>v+w,0);t=new Float64Array(3*t);var z=0;for(var r of k)z=r.readAllCoordinates(t,z);r=m.tileIndices;for(k=0;k<h;++k){z=r[k];const v=t[3*z+1],w=t[3*z+2];d[3*k]=t[3*z];d[3*k+1]=v;d[3*k+2]=w}}else{r=0;for(t of k)r=t.readAllCoordinates(d,r)}return d};a.getObjectIds=async function(d,
k){const {numFeatures:h,tile:l,partitionInfo:m}=d;({pages:k}=l);if(0===k.length||0===h)return new Uint32Array;d=new Uint32Array(h);if(m){var t=k.reduce((v,{featureCount:w})=>v+w,0);t=new Uint32Array(t);let r=0;for(var z of k)r=z.readAllObjectIds(t,r);z=m.tileIndices;for(k=0;k<h;++k)d[k]=t[z[k]]}else{z=0;for(t of k)z=t.readAllObjectIds(d,z)}return d};a.getRenderCoordinates=async function(d,k){await d.provision([n.FeatureDataItem.GEOMETRY_MAP_COORDINATES],k);const {numFeatures:h,tile:l,mapCoordinates:m}=
d;({pages:d}=l);if(0===d.length||0===h)return new Float64Array;d=k.viewSpatialReference;k=k.renderSpatialReference;const t=new Float64Array(3*h);if(!c.projectBuffer(m,d,0,t,k,0,h))throw Error("Failed to project coordinates");return t};a.getTileCenterRenderCoordinates=async function(d,k){const h=k.viewSpatialReference;k=k.renderSpatialReference;d=e.center(d.tile.descriptor.extent);const l=b.create();f.projectVectorToVector([d[0],d[1],0],h,l,k);return l};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/projection/projectVectorToVector":function(){define(["exports","../projection","../SpatialReference","./projectPointToVector","../../layers/graphics/dehydratedPoint"],function(a,b,c,f,e){function n(k,h,l,m,t){if(null==h||null==m||2>k.length)return!1;d.x=k[0];d.y=k[1];d.z=k[2];d.spatialReference=h;return f.projectPointToVector(d,l,m,t)}const d=e.makeDehydratedPoint(0,0,0,c.WGS84);a.projectVectorToVector=n;a.projectVectorToVectorAsync=async function(k,h,l,m,t,z){await b.initializeProjection(h,
m,null,z);return n(k,h,l,m,t)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectPointToVector":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64","../projection","./projectBuffer"],function(a,b,c,f){function e(d,k,h,l){if(c.canProjectWithoutEngine(d.spatialReference,h))return n[0]=d.x,n[1]=d.y,n[2]=d.z??l??0,f.projectBuffer(n,d.spatialReference,0,k,h,0);d=c.tryProjectWithZConversion(d,h);if(!d)return!1;k[0]=d?.x;k[1]=d?.y;k[2]=
d?.z??l??0;return!0}const n=b.create();a.projectPointToVector=e;a.projectPointToVectorAsync=async function(d,k,h,l,m){await c.initializeProjection(d.spatialReference,h,null,m);return e(d,k,h,l)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedPoint":function(){define(["exports"],function(a){a.makeDehydratedPoint=function(b,c,f,e){return{x:b,y:c,z:f,hasZ:null!=f,hasM:!1,spatialReference:e,type:"point"}};a.setDehydratedPoint=function(b,c,f,e,n){b.x=c;
b.y=f;b.z=e;b.hasZ=null!=e;b.spatialReference=n};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/symbolization/UniqueValueFeatureRenderer":function(){define(["exports","../featureData/FeatureData","../featureData/interfaces","./TestObjectSymbol","./TestSymbol"],function(a,b,c,f,e){class n{constructor(d){this._symbols=new Map;this._context=d}async load(){this._symbols.set(0,new e.TestSymbol(this._context));this._symbols.set(1,new f.TestObjectSymbol(this._context))}async add(d,
k){await this._provisionFeatureData(d,this._context);d=this._partition(d);await Promise.all(d.map(async h=>{const l=await this._provisionSymbol(h.partitionInfo?.index,k);l&&await l.add(h,k)}))}async remove(d,k){d=d.partitions;if(!d)throw Error("partitioned featureset expected");await Promise.all(d.map(async h=>{const l=await this._provisionSymbol(h.partitionInfo?.index,k);l&&await l.remove(h,k)}))}async _provisionFeatureData(d,k){await d.provision([c.FeatureDataItem.PARTITION_ID,c.FeatureDataItem.OBJECT_ID],
k)}async _provisionSymbol(d,k){if(null==d)return null;d=this._symbols.get(d);if(!d)return null;d.loaded||await d.load(k);return d}_partition(d){const {numFeatures:k,objectIds:h,partitionIds:l}=d,m=[[],[]];for(let t=0;t<k;++t){const z=h[t]%2;m[z].push(t);l[t]=z}d.partitions=m.filter(t=>0<t.length).map((t,z)=>{const r=t.length;t={index:z,tileIndices:new Uint32Array(t)};return new b.FeatureData(d.tile,r,t)});return d.partitions}}a.UniqueValueFeatureRenderer=n;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/symbolization/TestObjectSymbol":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/Logger ../../../../../../core/has ../../../../../../core/RandomLCG ../../../../../../core/Error ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../core/libs/gl-matrix-2/math/mat4 ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../../geometry/projection/computeTranslationToOriginAndRotation ../../../../../../geometry/support/aaBoundingBox ../../../../../../symbols/support/symbolLayerUtils3D ../../graphicUtils ../featureData/interfaces ./primitiveObjectUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q){a.TestObjectSymbol=class extends c{constructor(u){super();this._context=u;this.lodRendererId=null;this._loaded=!1}get loaded(){return this._loaded}async load(u){var D=u.createMaterial("default");D=q.createPrimitiveGeometry("cone",D);this.lodRendererId=u.createLodRenderer(D);this._loaded=!0}async add(u,D){if(null==this.lodRendererId)throw Error("expected lod renderer id to not be null");await this._provisionFeatureData(u);const J=u.numFeatures;var E=z.create(r.objectSymbolLayerPrimitiveBoundingBox("cone"));
E=m.fromArray(z.size(E));const L=m.fromArray(r.objectSymbolLayerSizeWithResourceSize(E,{isPrimitive:!0,width:100,depth:null,height:null})),Q=new Float64Array(16*J),M=new Float64Array(16*J),C=u.mapCoordinates;for(let U=0;U<J;++U){const y=U,B=this._computeGlobalTransform(C[3*U],C[3*U+1],C[3*U+2],this._context.viewSpatialReference,x),H=this._computeLocalTransform(L,E,p);this._writeMatrixToTypedBuffer(Q,y,H);this._writeMatrixToTypedBuffer(M,y,B)}u={featureIds:new Uint32Array(u.objectIds),localTransforms:Q,
globalTransforms:M};D.addLodInstances(this.lodRendererId,u)}async remove(u,D){null!=this.lodRendererId&&(u=new Uint32Array(u.objectIds),D.removeLodInstances(this.lodRendererId,u))}async _provisionFeatureData(u){await u.provision([w.FeatureDataItem.GEOMETRY_MAP_COORDINATES,w.FeatureDataItem.OBJECT_ID],this._context)}_writeMatrixToTypedBuffer(u,D,J){D*=16;for(let E=0;16>E;E++)u[D++]=J[E]}_computeGlobalTransform(u,D,J,E,L){g[0]=u;g[1]=D;g[2]=J;t.computeTranslationToOriginAndRotation(E,g,L,this._context.renderSpatialReference);
return L}_computeLocalTransform(u,D,J){h.identity(J);this._applyObjectScale(u,D,J);return J}_applyObjectScale(u,D,J){u=v.computeObjectScale(u,u,D,this._context.renderCoordsHelper.unitInMeters);1===u[0]&&1===u[1]&&1===u[2]||h.scale(J,J,u)}};a.TestObjectSymbol=b.__decorate([k.subclass("esri.views.3d.layers.graphics.pipeline.symbolization.TestObjectSymbol")],a.TestObjectSymbol);const g=m.create(),p=l.create(),x=l.create();Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/symbolLayerUtils3D":function(){define(["exports",
"../../core/has","../../core/libs/gl-matrix-2/factories/vec3f64","../../geometry/support/aaBoundingBox"],function(a,b,c,f){const e=f.fromValues(-.5,-.5,-.5,.5,.5,.5),n=f.fromValues(-.5,-.5,0,.5,.5,1),d=f.fromValues(-.5,-.5,0,.5,.5,.5);b=["butt","square","round"];f=[...b,"none"];a.lineCaps=b;a.lineJoins=["miter","bevel","round"];a.objectSymbolLayerBoundingBoxTetrahedron=d;a.objectSymbolLayerBoundingBoxUnitCube=e;a.objectSymbolLayerBoundingBoxUnitCylinder=n;a.objectSymbolLayerPrimitiveBoundingBox=function(k){switch(k){case "sphere":case "cube":case "diamond":return e;
case "cylinder":case "cone":case "inverted-cone":return n;case "tetrahedron":return d}};a.objectSymbolLayerSizeWithResourceSize=function(k,{isPrimitive:h,width:l,depth:m,height:t}){h=h?10:1;if(null==l&&null==t&&null==m)return[h*k[0],h*k[1],h*k[2]];l=c.fromValues(l,m,t);let z;for(m=0;3>m;m++)if(t=l[m],null!=t){z=t/k[m];break}for(m=0;3>m;m++)null==l[m]&&(l[m]=k[m]*z);return l};a.pathCaps=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("exports ../../../../core/unitUtils ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../chunks/vec42 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/meshVertexSpaceUtils ../../../../layers/graphics/dehydratedPoint ../../../../layers/graphics/hydratedFeatures".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(p){var x=p.paths[0];if(!x||0===x.length)return null;x=t.getPointOnPath(x,t.getPathLength(x)/2);return r.makeDehydratedPoint(x[0],x[1],x[2],p.spatialReference)}function q(p,x,u){u=u?p:v.clonePoint(p);return x&&p?k.projectPoint(p,u,x)?u:null:u}function g(p){const x=u=>null==u||0<=u;return Array.isArray(p)?p.every(x):null==p||0<=p}a.computeCentroid=function(p,x){if("point"===p.type)return q(p,x,!1);if(v.isHydratedGeometry(p))switch(p.type){case "extent":return q(p.center,
x,!1);case "polygon":return q(p.centroid,x,!1);case "polyline":return q(w(p),x,!0);case "mesh":return q(z.vertexSpaceOriginToPoint(p.vertexSpace,p.spatialReference)??p.extent.center,x,!1)}else switch(p.type){case "extent":return p=r.makeDehydratedPoint(.5*(p.xmax+p.xmin),.5*(p.ymax+p.ymin),null!=p.zmin&&null!=p.zmax&&isFinite(p.zmin)&&isFinite(p.zmax)?.5*(p.zmax+p.zmin):void 0,p.spatialReference),q(p,x,!0);case "polygon":var u=p.rings[0];u&&0!==u.length?(u=m.ringsCentroid(p.rings,!!p.hasZ),p=r.makeDehydratedPoint(u[0],
u[1],u[2],p.spatialReference)):p=null;return q(p,x,!0);case "polyline":return q(w(p),x,!0)}};a.computeMaxZ=function(p){if(!p)return 0;switch(p.type){case "point":return p.z;case "extent":return p.zmax;case "polygon":return p.hasZ?p.rings.reduce((x,u)=>u.reduce((D,J)=>Math.max(D,J[2]),x),-Infinity):void 0;case "polyline":return p.hasZ?p.paths.reduce((x,u)=>u.reduce((D,J)=>Math.max(D,J[2]),x),-Infinity):void 0;case "mesh":return p.extent.zmax}};a.computeObjectRotation=function(p,x,u,D=f.create()){p&&
c.rotateZ(D,D,-p/180*Math.PI);x&&c.rotateX(D,D,x/180*Math.PI);u&&c.rotateY(D,D,u/180*Math.PI);return D};a.computeObjectScale=function(p=e.ONES,x,u,D=1){const J=Array(3);if(null==x||null==u)J[0]=1,J[1]=1,J[2]=1;else{let L=0;for(let Q=2;0<=Q;Q--){const M=p[Q];let C;const U=null!=M,y=0===Q&&!E&&!U,B=u[Q];"symbol-value"===M||y?C=0!==B?x[Q]/B:1:U&&"proportional"!==M&&isFinite(M)&&(C=0!==B?M/B:1);if(null!=C){var E=J[Q]=C;L=Math.max(L,Math.abs(C))}}for(p=2;0<=p;p--)null==J[p]?J[p]=E:0===J[p]&&(J[p]=.001*
L)}for(E=2;0<=E;E--)J[E]/=D;return e.fromArray(J)};a.demResolutionForBoundingBox=function(p,x,u){if(null!=u.minDemResolution)return u.minDemResolution;const D=b.getMetersPerUnitForSR(x),J=h.width(p)*D,E=h.depth(p)*D;p=h.height(p)*(x.isGeographic?1:D);return 0===J&&0===E&&0===p?u.minDemResolutionForPoints:.01*Math.max(J,E,p)};a.enlargeExtent=function(p,x,u,D=0){if(p){x||=l.create();let J=.5*p.width*(u-1);u=.5*p.height*(u-1);p.width<1E-7*p.height?J+=u/20:p.height<1E-7*p.width&&(u+=J/20);n.set(x,p.xmin-
J-D,p.ymin-u-D,p.xmax+J+D,p.ymax+u+D);return x}return null};a.isValidSize=g;a.mixinColorAndOpacity=function(p,x,u=null){const D=d.clone(d.ONES);null!=p&&(D[0]=p[0],D[1]=p[1],D[2]=p[2]);null!=x?D[3]=x:null!=p&&3<p.length&&(D[3]=p[3]);u&&(D[0]*=u,D[1]*=u,D[2]*=u,D[3]*=u);return D};a.overrideColor=function(p,x,u,D,J,E=[0,0,0,0]){for(let L=0;3>L;++L)E[L]=null!=p?.[L]?p[L]:null!=u?.[L]?u[L]:J[L];E[3]=null!=x?x:null!=D?D:J[3];return E};a.validateSymbolLayerSize=function(p){return g(null!=p.isPrimitive?
[p.width,p.depth,p.height]:p)?null:"Symbol sizes may not be negative values"};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/meshVertexSpaceUtils":function(){define("exports ../../core/deprecate ../../core/Logger ../../chunks/vec32 ../Point ./MeshGeoreferencedVertexSpace ./MeshLocalVertexSpace".split(" "),function(a,b,c,f,e,n,d){function k(h){return null!=h.origin}a.isAbsoluteVertexSpace=function(h){return!k(h)};a.isMeshWithRelativeVertexSpace=function(h){return k(h.vertexSpace)};
a.isRelativeVertexSpace=k;a.selectVertexSpace=function(h,l){const {x:m,y:t,z,spatialReference:r}=h;h=[m,t,z??0];void 0!==l?.geographic&&(b.deprecated(c.getLogger("esri.geometry.Mesh"),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),l.vertexSpace&&c.getLogger("esri.geometry.Mesh").warn("Deprecated geographic flag ignored since vertexSpace option is provided."));var v;null!=(v=l?.vertexSpace)?l=v:(l=l?.geographic,l=null==l?void 0:l?"local":"georeferenced");
return"local"===(l??(r.isGeographic||r.isWebMercator?"local":"georeferenced"))?new d({origin:h}):new n({origin:h})};a.vertexSpaceEquals=function(h,l){return h.type===l.type&&(h.origin===l.origin||null!=h.origin&&null!=l.origin&&f.exactEquals(h.origin,l.origin))};a.vertexSpaceOriginToPoint=function(h,l){if(!k(h))return null;const [m,t,z]=h.origin;return new e({x:m,y:t,z,spatialReference:l})};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/MeshGeoreferencedVertexSpace":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h){c=b=class extends b.ClonableMixin(c.JSONSupport){constructor(l){super(l);this.type="georeferenced";this.origin=null}};c.absolute=new b;a.__decorate([k.enumeration({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0);a.__decorate([f.property({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0);return c=b=a.__decorate([h.subclass("esri.geometry.support.MeshGeoreferencedVertexSpace")],c)})},"esri/geometry/support/MeshLocalVertexSpace":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec3f64".split(" "),
function(a,b,c,f,e,n,d,k,h,l){b=class extends b.ClonableMixin(c.JSONSupport){constructor(m){super(m);this.type="local";this.origin=l.create()}};a.__decorate([k.enumeration({local:"local"},{readOnly:!0})],b.prototype,"type",void 0);a.__decorate([f.property({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"origin",void 0);return b=a.__decorate([h.subclass("esri.geometry.support.MeshLocalVertexSpace")],b)})},"esri/layers/graphics/hydratedFeatures":function(){define("exports ../../geometry ../../Graphic ../../core/has ../../core/lang ../../core/typedArrayUtil ../../geometry/support/jsonUtils ./dehydratedPoint ../../geometry/SpatialReference".split(" "),
function(a,b,c,f,e,n,d,k,h){function l(p){return"declaredClass"in p}function m(p){return"declaredClass"in p}function t(p){return"declaredClass"in p}function z(p){return null==p?null:l(p)?p:d.fromJSON(r(p))}function r(p){const {wkid:x,wkt:u,wkt2:D,latestWkid:J}=p.spatialReference,E={wkid:x,wkt:u,wkt2:D,latestWkid:J};switch(p.type){case "point":const {x:L,y:Q,z:M,m:C}=p;return{x:L,y:Q,z:M,m:C,spatialReference:E};case "polygon":const {rings:U,hasZ:y,hasM:B}=p;return{rings:v(U),hasZ:y,hasM:B,spatialReference:E};
case "polyline":const {paths:H,hasZ:N,hasM:K}=p;return{paths:v(H),hasZ:N,hasM:K,spatialReference:E};case "extent":const {xmin:X,xmax:V,ymin:da,ymax:aa,zmin:fa,zmax:Z,mmin:ma,mmax:S,hasZ:ha,hasM:G}=p;return{xmin:X,xmax:V,ymin:da,ymax:aa,zmin:fa,zmax:Z,mmin:ma,mmax:S,hasZ:ha,hasM:G,spatialReference:E};case "multipoint":const {points:ca,hasZ:pa,hasM:Y}=p;return{points:g(ca)?w(ca):ca,hasZ:pa,hasM:Y,spatialReference:E}}}function v(p){return q(p)?p.map(x=>w(x)):p}function w(p){return p.map(x=>Array.from(x))}
function q(p){for(const x of p)if(0!==x.length)return g(x);return!1}function g(p){return 0<p.length&&(n.isFloat32Array(p[0])||n.isFloat64Array(p[0]))}a.clonePoint=function(p,x){if(!p)return null;if(m(p)){if(null==x)return p.clone();if(m(x))return x.copy(p)}null!=x?(x.x=p.x,x.y=p.y,x.spatialReference=p.spatialReference,p.hasZ?(x.z=p.z,x.hasZ=p.hasZ):(x.z=void 0,x.hasZ=!1),p.hasM?(x.m=p.m,x.hasM=!0):(x.m=void 0,x.hasM=!1)):(x=k.makeDehydratedPoint(p.x,p.y,p.z,p.spatialReference),p.hasM&&(x.m=p.m,x.hasM=
!0));return x};a.hydrateGeometry=z;a.hydrateGraphic=function(p,x){return p?t(p)?p:new c({layer:x,sourceLayer:x,visible:p.visible,symbol:e.clone(p.symbol),attributes:e.clone(p.attributes),geometry:z(p.geometry)}):null};a.hydratedSpatialReference=function(p){const {wkid:x,wkt:u,wkt2:D,latestWkid:J}=p;return h.fromJSON({wkid:x,wkt:u,wkt2:D,latestWkid:J})};a.isHydratedGeometry=l;a.isHydratedGraphic=t;a.isHydratedPoint=m;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/Graphic":function(){define("./chunks/tslib.es6 ./geometry ./PopupTemplate ./symbols ./core/Clonable ./core/deprecate ./core/JSONSupport ./core/Logger ./core/reactiveUtils ./core/uid ./core/accessorSupport/decorators/property ./core/has ./core/RandomLCG ./core/accessorSupport/decorators/subclass ./geometry/support/jsonUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){var w;e=w=class extends e.ClonableMixin(d.JSONSupport){constructor(q){super(q);this.isAggregate=!1;this.sourceLayer=this.popupTemplate=this.origin=this.layer=null;this._version=0;Object.defineProperty(this,"uid",{value:l.generateUID(),configurable:!0});Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1});1<arguments.length&&n.deprecatedConstructorSignature(k.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(q){const g=
this._get("aggregateGeometries");JSON.stringify(g)!==JSON.stringify(q)&&this._set("aggregateGeometries",q)}set attributes(q){const g=this._get("attributes");g!==q&&(this._set("attributes",q),this._notifyLayer("attributes",g,q))}set geometry(q){const g=this._get("geometry");g!==q&&(this._set("geometry",q),"mesh"!==q?.type&&this._notifyLayer("geometry",g,q))}set symbol(q){const g=this._get("symbol");g!==q&&(this._set("symbol",q),this._notifyLayer("symbol",g,q))}get version(){return this._version}set visible(q){const g=
this._get("visible");g!==q&&(this._set("visible",q),this._notifyLayer("visible",g,q))}cloneShallow(){return new w({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(q=!1){if(this.popupTemplate)return this.popupTemplate;const g=this.origin&&"layer"in this.origin?
this.origin.layer:null;for(const p of[g,this.sourceLayer,this.layer])if(p){if("popupTemplate"in p&&p.popupTemplate)return p.popupTemplate;if(q&&"defaultPopupTemplate"in p&&null!=p.defaultPopupTemplate)return p.defaultPopupTemplate}return null}getAttribute(q){return this.attributes?.[q]}setAttribute(q,g){if(this.attributes){const p=this.getAttribute(q);this.attributes[q]=g;this._notifyLayer("attributes",p,g,q)}else this.attributes={[q]:g},this._notifyLayer("attributes",void 0,g,q)}getObjectId(){return this.sourceLayer?
"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null}toJSON(){var q=this.aggregateGeometries;if(null==q)q=null;else{var g={};for(const p in q){const x=q[p];x&&(g[p]=x.toJSON())}q=0!==Object.keys(g).length?g:null}return{aggregateGeometries:q,geometry:null!=this.geometry?this.geometry.toJSON():null,symbol:null!=this.symbol?this.symbol.toJSON():null,attributes:d.isSerializable(this.attributes)?this.attributes.toJSON():{...this.attributes},
popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(q={}){var {geometry:g}=this;"mesh"===g?.type&&(g={origin:g.origin,transform:g.transform},this._notifyLayer("origin-transform",g,g,q.action))}_notifyLayer(q,g,p,x){this._version++;this.layer&&"graphicChanged"in this.layer&&(g={graphic:this,property:q,oldValue:g,newValue:p},"origin-transform"===q&&(g.action=x),"attributes"===q&&(g.attributeName=x),this.layer.graphicChanged(g))}_watchMeshGeometryChanges(){this.addHandles([h.when(()=>
"mesh"===this.geometry?.type&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:q,origin:g})=>{if(this._lastMeshTransform.localMatrix!==q||this._lastMeshTransform.origin!==g)this._lastMeshTransform.localMatrix=q,this._lastMeshTransform.origin=g,this.notifyMeshTransformChanged()}),h.when(()=>"mesh"===this.geometry?.type?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const q=this.geometry;"mesh"===
q?.type&&q.vertexSpace.origin?(this._lastMeshTransform.localMatrix=q.transform?.localMatrix,this._lastMeshTransform.origin=q.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0);this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(q,g)=>q===g,sync:!0})])}};a.__decorate([m.property({value:null,json:{read:function(q){if(!q)return null;const g={};for(const p in q){const x=v.fromJSON(q[p]);x&&(g[p]=x)}return 0!==Object.keys(g).length?g:
null}}})],e.prototype,"aggregateGeometries",null);a.__decorate([m.property({value:null})],e.prototype,"attributes",null);a.__decorate([m.property({value:null,types:b.geometryTypes,json:{read:v.fromJSON}})],e.prototype,"geometry",null);a.__decorate([m.property({type:Boolean})],e.prototype,"isAggregate",void 0);a.__decorate([m.property({clonable:"reference"})],e.prototype,"layer",void 0);a.__decorate([m.property({clonable:"reference"})],e.prototype,"origin",void 0);a.__decorate([m.property({type:c})],
e.prototype,"popupTemplate",void 0);a.__decorate([m.property({clonable:"reference"})],e.prototype,"sourceLayer",void 0);a.__decorate([m.property({value:null,types:f.symbolTypes})],e.prototype,"symbol",null);a.__decorate([m.property({clonable:!1,json:{read:!1,write:!1}})],e.prototype,"_version",void 0);a.__decorate([m.property({type:Boolean,value:!0})],e.prototype,"visible",null);return e=w=a.__decorate([r.subclass("esri.Graphic")],e)})},"esri/PopupTemplate":function(){define("./chunks/tslib.es6 ./core/Clonable ./core/Collection ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/AttachmentsContent ./popup/content/FieldsContent ./popup/content/ExpressionContent ./popup/content/RelationshipContent ./popup/content/UtilityNetworkAssociationsContent ./popup/content/Content ./popup/content/CustomContent".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H){u=c.ofType({key:"type",defaultKeyValue:"button",base:u,typeMap:{button:D,toggle:J}});const N={base:B,key:"type",typeMap:{media:E,custom:H,text:L,attachments:Q,fields:M,expression:C,relationship:U,utilityNetworkAssociations:y}},K=new Set("attachments fields media text expression relationship".split(" ")),X=new Set([...K,"utility-network-associations"]);b=class extends b.ClonableMixin(f.JSONSupport){constructor(){super(...arguments);
this.actions=null;this.content="";this.layerOptions=this.fieldInfos=this.expressionInfos=null;this.lastEditInfoEnabled=!0;this.outFields=null;this.returnGeometry=this.overwriteActions=!1;this.title=""}castContent(V){if(Array.isArray(V))return V.map(da=>z.ensureOneOfType(N,da));if("string"===typeof V||"function"===typeof V||V instanceof HTMLElement||d.isPromiseLike(V))return V;n.getLogger(this).error("content error","unsupported content value",{value:V});return null}readContent(V,da){({popupElements:V}=
da);return Array.isArray(V)&&0<V.length?this._readPopupInfoElements(da.description,da.mediaInfos,V):this._readPopupInfo(da)}writeWebSceneContent(V,da,aa,fa){this._writePopupTemplateContent(V,da,fa)}writeWebMapContent(V,da,aa,fa){this._writePopupTemplateContent(V,da,fa)}writeFieldInfos(V,da,aa,fa){({content:aa}=this);aa=Array.isArray(aa)?aa:null;if(V){const Z=aa?aa.filter(S=>"fields"===S.type):[],ma=Z.length&&Z.every(S=>S.fieldInfos?.length);da.fieldInfos=V.filter(Boolean).map(S=>{S=S.toJSON(fa);ma&&
(S.visible=!1);return S})}if(aa)for(const Z of aa)"fields"===Z.type&&this._writeFieldsContent(Z,da)}writeLayerOptions(V,da,aa,fa){da[aa]=!V||null===V.showNoDataRecords&&null===V.returnTopmostRaster?null:V.toJSON(fa)}writeTitle(V,da){da.title=V||""}async collectRequiredFields(V,da){const aa=this.expressionInfos||[];await this._collectExpressionInfoFields(V,da,[...aa,...this._getContentExpressionInfos(this.content,aa)]);r.collectFields(V,da,[...(this.outFields||[]),...this._getActionsFields(this.actions),
...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(V){const da=new Set;await this.collectRequiredFields(da,V);return[...da].sort()}_writePopupTemplateContent(V,da,aa){"string"===typeof V?da.description=V:Array.isArray(V)&&(da.popupElements=V.filter(fa=>"web-scene"===aa?.origin?K.has(fa.type):X.has(fa.type)).map(fa=>fa?.toJSON(aa)),da.popupElements.forEach(fa=>{"attachments"===fa.type?this._writeAttachmentContent(da):"media"===fa.type?this._writeMediaContent(fa,
da):"text"===fa.type?this._writeTextContent(fa,da):"relationship"===fa.type&&this._writeRelationshipContent(fa,da)}))}_writeFieldsContent(V,da){Array.isArray(V.fieldInfos)&&V.fieldInfos.length&&(V=e.clone(V.fieldInfos),Array.isArray(da.fieldInfos)?V.forEach(aa=>{const fa=da.fieldInfos.find(Z=>Z.fieldName?.toLowerCase()===aa.fieldName?.toLowerCase());fa?fa.visible=!0:da.fieldInfos.push(aa)}):da.fieldInfos=V)}_writeAttachmentContent(V){V.showAttachments||(V.showAttachments=!0)}_writeRelationshipContent(V,
da){var aa=V.orderByFields?.map(fa=>this._toFieldOrderJSON(fa,V.relationshipId))||[];aa=[...(da.relatedRecordsInfo?.orderByFields||[]),...aa];da.relatedRecordsInfo={showRelatedRecords:!0,...(aa?.length&&{orderByFields:aa})}}_writeTextContent(V,da){!da.description&&V.text&&(da.description=V.text)}_writeMediaContent(V,da){Array.isArray(V.mediaInfos)&&V.mediaInfos.length&&(V=e.clone(V.mediaInfos),Array.isArray(da.mediaInfos)?da.mediaInfos=[...da.mediaInfos,...V]:da.mediaInfos=V)}_readPopupInfoElements(V,
da,aa){var fa=!1,Z=!1;return aa.map(ma=>{if("media"===ma.type)return ma.mediaInfos||!da||Z||(ma.mediaInfos=da,Z=!0),E.fromJSON(ma);if("text"===ma.type)return ma.text||!V||fa||(ma.text=V,fa=!0),L.fromJSON(ma);if("attachments"===ma.type)return Q.fromJSON(ma);if("fields"===ma.type)return M.fromJSON(ma);if("expression"===ma.type)return C.fromJSON(ma);if("relationship"===ma.type)return U.fromJSON(ma);if("utilityNetworkAssociations"===ma.type)return y.fromJSON(ma)}).filter(Boolean)}_toRelationshipContent(V){const {field:da,
order:aa}=V;if(!da?.startsWith("relationships/"))return null;var fa=da.replace("relationships/","").split("/");if(2!==fa.length)return null;V=parseInt(fa[0],10);fa=fa[1];return"number"===typeof V&&fa?U.fromJSON({relationshipId:V,orderByFields:[{field:fa,order:aa}]}):null}_toFieldOrderJSON(V,da){const {order:aa,field:fa}=V;return{field:`${"relationships/"}${da}/${fa}`,order:aa}}_readPopupInfo({description:V,mediaInfos:da,showAttachments:aa,relatedRecordsInfo:fa={showRelatedRecords:!1}}){const Z=[];
V?Z.push(new L({text:V})):Z.push(new M);Array.isArray(da)&&da.length&&Z.push(E.fromJSON({mediaInfos:da}));aa&&Z.push(Q.fromJSON({displayType:"auto"}));const {showRelatedRecords:ma,orderByFields:S}=fa;ma&&S?.length&&S.forEach(ha=>{(ha=this._toRelationshipContent(ha))&&Z.push(ha)});return Z.length?Z:V}_getContentElementFields(V){var da=V?.type;return"attachments"===da?[...this._extractFieldNames(V.title),...this._extractFieldNames(V.description)]:"custom"===da?V.outFields||[]:"fields"===da?[...this._extractFieldNames(V.title),
...this._extractFieldNames(V.description),...this._getFieldInfoFields(V.fieldInfos??this.fieldInfos)]:"media"===da?(da=V.mediaInfos||[],[...this._extractFieldNames(V.title),...this._extractFieldNames(V.description),...da.reduce((aa,fa)=>[...aa,...this._getMediaInfoFields(fa)],[])]):"text"===da?this._extractFieldNames(V.text):"relationship"===da||"utility-network-associations"===da?[...this._extractFieldNames(V.title),...this._extractFieldNames(V.description)]:[]}_getMediaInfoFields(V){const {caption:da,
title:aa,value:fa}=V,{fields:Z,normalizeField:ma,tooltipField:S,sourceURL:ha,linkURL:G}=fa||{};V=[...this._extractFieldNames(aa),...this._extractFieldNames(da),...this._extractFieldNames(ha),...this._extractFieldNames(G),...(Z??[])];ma&&V.push(ma);S&&V.push(S);return V}_getContentExpressionInfos(V,da){return Array.isArray(V)?V.reduce((aa,fa)=>[...aa,...("expression"===fa.type&&fa.expressionInfo?[fa.expressionInfo]:[])],da):[]}_getContentFields(V){return"string"===typeof V?this._extractFieldNames(V):
Array.isArray(V)?V.reduce((da,aa)=>[...da,...this._getContentElementFields(aa)],[]):[]}async _collectExpressionInfoFields(V,da,aa){aa&&await Promise.all(aa.map(fa=>r.collectArcadeFieldNames(V,da,fa.expression)))}_getFieldInfoFields(V){return V?V.filter(({fieldName:da,visible:aa})=>(void 0===aa||!!aa)&&!!da&&!da.startsWith("relationships/")&&!da.startsWith("expression/")).map(da=>da.fieldName):[]}_getActionsFields(V){return V?V.toArray().reduce((da,aa)=>[...da,...this._getActionFields(aa)],[]):[]}_getActionFields(V){const {className:da,
title:aa,type:fa}=V;V="button"===fa||"toggle"===fa?V.image:"";return[...this._extractFieldNames(aa),...this._extractFieldNames(da),...this._extractFieldNames(V)]}_getTitleFields(V){return"string"===typeof V?this._extractFieldNames(V):[]}_extractFieldNames(V){return r.extractSubstitutionTemplatesFromString(V).filter(da=>!(0===da.indexOf("relationships/")||0===da.indexOf("expression/")))}};a.__decorate([k.property({type:u})],b.prototype,"actions",void 0);a.__decorate([k.property()],b.prototype,"content",
void 0);a.__decorate([h.cast("content")],b.prototype,"castContent",null);a.__decorate([l.reader("content","description fieldInfos popupElements mediaInfos showAttachments relatedRecordsInfo".split(" "))],b.prototype,"readContent",null);a.__decorate([t.writer("web-scene","content",{popupElements:{type:c.ofType(v.persistableWebSceneTypes)},showAttachments:{type:Boolean},mediaInfos:{type:c.ofType(x.types)},description:{type:String},relatedRecordsInfo:{type:p}})],b.prototype,"writeWebSceneContent",null);
a.__decorate([t.writer("content",{popupElements:{type:c.ofType(v.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:c.ofType(x.types)},description:{type:String},relatedRecordsInfo:{type:p}})],b.prototype,"writeWebMapContent",null);a.__decorate([k.property({type:[w],json:{write:!0}})],b.prototype,"expressionInfos",void 0);a.__decorate([k.property({type:[q]})],b.prototype,"fieldInfos",void 0);a.__decorate([t.writer("fieldInfos")],b.prototype,"writeFieldInfos",null);a.__decorate([k.property({type:g})],
b.prototype,"layerOptions",void 0);a.__decorate([t.writer("layerOptions")],b.prototype,"writeLayerOptions",null);a.__decorate([k.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],b.prototype,"lastEditInfoEnabled",void 0);a.__decorate([k.property()],b.prototype,"outFields",void 0);a.__decorate([k.property()],b.prototype,"overwriteActions",void 0);a.__decorate([k.property()],b.prototype,"returnGeometry",void 0);a.__decorate([k.property({json:{type:String}})],
b.prototype,"title",void 0);a.__decorate([t.writer("title")],b.prototype,"writeTitle",null);return b=a.__decorate([m.subclass("esri.PopupTemplate")],b)})},"esri/popup/content":function(){define("exports ./content/AttachmentsContent ./content/Content ./content/CustomContent ./content/ExpressionContent ./content/FieldsContent ./content/MediaContent ./content/RelationshipContent ./content/TextContent ./content/UtilityNetworkAssociationsContent".split(" "),function(a,b,c,f,e,n,d,k,h,l){const m={base:null,
key:"type",typeMap:{attachment:b,media:d,text:h,expression:e,field:n,relationship:k,utilityNetworkAssociations:l}},t={base:null,key:"type",typeMap:{attachment:b,media:d,text:h,expression:e,field:n,relationship:k}};a.AttachmentsContent=b;a.BaseContent=c;a.CustomContent=f;a.ExpressionContent=e;a.FieldsContent=n;a.MediaContent=d;a.RelationshipContent=k;a.TextContent=h;a.UtilityNetworkAssociationsContent=l;a.isContent=function(z){return z instanceof c};a.persistableTypes=m;a.persistableWebSceneTypes=
t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/AttachmentsContent":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Content".split(" "),function(a,b,c,f,e,n,d){var k;c=k=class extends d{constructor(h){super(h);this.description=null;this.displayType="auto";this.title=null;this.type="attachments"}clone(){return new k({description:this.description,
displayType:this.displayType,title:this.title})}};a.__decorate([b.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);a.__decorate([b.property({type:["auto","preview","list"],json:{write:!0}})],c.prototype,"displayType",void 0);a.__decorate([b.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);a.__decorate([b.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=k=a.__decorate([n.subclass("esri.popup.content.AttachmentsContent")],
c)})},"esri/popup/content/Content":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){b=class extends b.JSONSupport{constructor(k){super(k);this.type=null}};a.__decorate([c.property({type:"attachments custom fields media text expression relationship utility-network-associations".split(" "),readOnly:!0,
json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.popup.content.Content")],b)})},"esri/popup/content/CustomContent":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Content".split(" "),function(a,b,c,f,e,n,d){var k;f=k=class extends d{constructor(h){super(h);this.outFields=this.destroyer=this.creator=null;this.type="custom"}clone(){return new k({creator:this.creator,
destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?b.clone(this.outFields):null})}};a.__decorate([c.property()],f.prototype,"creator",void 0);a.__decorate([c.property()],f.prototype,"destroyer",void 0);a.__decorate([c.property()],f.prototype,"outFields",void 0);a.__decorate([c.property({type:["custom"],readOnly:!0})],f.prototype,"type",void 0);return f=k=a.__decorate([n.subclass("esri.popup.content.CustomContent")],f)})},"esri/popup/content/ExpressionContent":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ElementExpressionInfo ./Content".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends k{constructor(l){super(l);this.expressionInfo=null;this.type="expression"}clone(){return new h({expressionInfo:this.expressionInfo?.clone()})}};a.__decorate([b.property({type:d,json:{write:!0}})],c.prototype,"expressionInfo",void 0);a.__decorate([b.property({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.ExpressionContent")],c)})},"esri/popup/ElementExpressionInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){var k;b=k=class extends b.JSONSupport{constructor(h){super(h);this.expression=this.title=null;this.returnType="dictionary"}clone(){return new k({title:this.title,expression:this.expression})}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);a.__decorate([c.property({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"returnType",
void 0);return b=k=a.__decorate([d.subclass("esri.popup.ElementExpressionInfo")],b)})},"esri/popup/content/FieldsContent":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../FieldInfo ./Content".split(" "),function(a,b,c,f,e,n,d,k,h){var l;f=l=class extends h{constructor(m){super(m);this.title=this.fieldInfos=this.description=
this.attributes=null;this.type="fields"}writeFieldInfos(m,t){t.fieldInfos=m&&m.map(z=>z.toJSON())}clone(){return new l(b.clone({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};a.__decorate([c.property({type:Object,json:{write:!0}})],f.prototype,"attributes",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],f.prototype,"description",void 0);a.__decorate([c.property({type:[k]})],f.prototype,"fieldInfos",void 0);a.__decorate([d.writer("fieldInfos")],
f.prototype,"writeFieldInfos",null);a.__decorate([c.property({type:String,json:{write:!0}})],f.prototype,"title",void 0);a.__decorate([c.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0);return f=l=a.__decorate([n.subclass("esri.popup.content.FieldsContent")],f)})},"esri/popup/FieldInfo":function(){define("../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/FieldInfoFormat".split(" "),
function(a,b,c,f,e,n,d,k,h,l){var m;c=m=class extends c.JSONSupport{constructor(t){super(t);this.fieldName=null;this.format=void 0;this.isEditable=!0;this.label=null;this.stringFieldOption="text-box";this.tooltip=this.statisticType=null;this.visible=!0}clone(){return new m({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};a.__decorate([f.property({type:String,
json:{write:!0}})],c.prototype,"fieldName",void 0);a.__decorate([f.property({type:l,json:{write:!0}})],c.prototype,"format",void 0);a.__decorate([f.property({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],c.prototype,"isEditable",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);a.__decorate([k.enumeration(new b.JSONMap({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],c.prototype,"stringFieldOption",
void 0);a.__decorate([f.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],c.prototype,"statisticType",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],c.prototype,"tooltip",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],c.prototype,"visible",void 0);return c=m=a.__decorate([h.subclass("esri.popup.FieldInfo")],c)})},"esri/popup/support/FieldInfoFormat":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../intl/date".split(" "),
function(a,b,c,f,e,n,d,k,h,l){b=class extends b.ClonableMixin(c.JSONSupport){constructor(m){super(m);this.dateFormat=null;this.digitSeparator=!1;this.places=null}};a.__decorate([k.enumeration(l.dateFormatJSONMap)],b.prototype,"dateFormat",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"digitSeparator",void 0);a.__decorate([f.property({type:e.Integer,json:{write:!0}})],b.prototype,"places",void 0);return b=a.__decorate([h.subclass("esri.popup.support.FieldInfoFormat")],
b)})},"esri/popup/content/MediaContent":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){var w;
f=w=class extends m{constructor(q){super(q);this.title=this.mediaInfos=this.description=this.attributes=this.activeMediaInfoIndex=null;this.type="media"}readMediaInfos(q){return q&&q.map(g=>{if("image"===g.type)return t.fromJSON(g);if("barchart"===g.type)return h.fromJSON(g);if("columnchart"===g.type)return l.fromJSON(g);if("linechart"===g.type)return z.fromJSON(g);if("piechart"===g.type)return r.fromJSON(g)}).filter(Boolean)}writeMediaInfos(q,g){g.mediaInfos=q&&q.map(p=>p.toJSON())}clone(){return new w(b.clone({activeMediaInfoIndex:this.activeMediaInfoIndex,
attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};a.__decorate([c.property()],f.prototype,"activeMediaInfoIndex",void 0);a.__decorate([c.property({type:Object,json:{write:!0}})],f.prototype,"attributes",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],f.prototype,"description",void 0);a.__decorate([c.property({types:[v.types]})],f.prototype,"mediaInfos",void 0);a.__decorate([n.reader("mediaInfos")],f.prototype,"readMediaInfos",
null);a.__decorate([k.writer("mediaInfos")],f.prototype,"writeMediaInfos",null);a.__decorate([c.property({type:String,json:{write:!0}})],f.prototype,"title",void 0);a.__decorate([c.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0);return f=w=a.__decorate([d.subclass("esri.popup.content.MediaContent")],f)})},"esri/popup/content/BarChartMediaInfo":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.type="bar-chart"}clone(){return new h({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a.__decorate([b.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:k.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.BarChartMediaInfo")],c)})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./MediaInfo ../support/ChartMediaInfoValue".split(" "),
function(a,b,c,f,e,n,d,k){c=class extends d{constructor(h){super(h);this.type=null;this.value=void 0}};a.__decorate([b.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);a.__decorate([b.property({type:k,json:{write:!0}})],c.prototype,"value",void 0);return c=a.__decorate([n.subclass("esri.popup.content.mixins.ChartMediaInfo")],c)})},"esri/popup/content/mixins/MediaInfo":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){b=class extends b.JSONSupport{constructor(k){super(k);this.altText=null;this.title=this.caption="";this.type=null}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"altText",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"caption",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([c.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,
json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.popup.content.mixins.MediaInfo")],b)})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ChartMediaInfoValueSeries".split(" "),function(a,b,c,f,e,n,d,k){var h;
c=h=class extends c.JSONSupport{constructor(l){super(l);this.colors=null;this.fields=[];this.normalizeField=null;this.series=[];this.tooltipField=null}clone(){return new h({colors:f.clone(this.colors),fields:f.clone(this.fields),normalizeField:this.normalizeField,series:f.clone(this.series),tooltipField:this.tooltipField})}};a.__decorate([e.property({type:[b],json:{type:[[n.Integer]],write:!0}})],c.prototype,"colors",void 0);a.__decorate([e.property({type:[String],json:{write:!0}})],c.prototype,"fields",
void 0);a.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"normalizeField",void 0);a.__decorate([e.property({type:[k],json:{read:!1}})],c.prototype,"series",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"tooltipField",void 0);return c=h=a.__decorate([d.subclass("esri.popup.content.support.ChartMediaInfoValue")],c)})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){var k;b=k=class extends b{constructor(h){super(h);this.value=this.tooltip=this.fieldName=this.color=null}clone(){return new k({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};a.__decorate([c.property()],b.prototype,"color",void 0);a.__decorate([c.property()],b.prototype,"fieldName",void 0);a.__decorate([c.property()],b.prototype,"tooltip",void 0);a.__decorate([c.property()],b.prototype,"value",void 0);return b=k=a.__decorate([d.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],
b)})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(a,b){b=b.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});a.chartTypeKebabDict=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.type="column-chart"}clone(){return new h({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a.__decorate([b.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:k.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.ColumnChartMediaInfo")],c)})},"esri/popup/content/ImageMediaInfo":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.refreshInterval=0;this.type="image";this.value=void 0}clone(){return new h({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"refreshInterval",void 0);a.__decorate([b.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);a.__decorate([b.property({type:k,
json:{write:!0}})],c.prototype,"value",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.ImageMediaInfo")],c)})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){var k;b=k=class extends b.JSONSupport{constructor(h){super(h);
this.sourceURL=this.linkURL=null}clone(){return new k({linkURL:this.linkURL,sourceURL:this.sourceURL})}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"linkURL",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"sourceURL",void 0);return b=k=a.__decorate([d.subclass("esri.popup.content.support.ImageMediaInfoValue")],b)})},"esri/popup/content/LineChartMediaInfo":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.type="line-chart"}clone(){return new h({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a.__decorate([b.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:k.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.LineChartMediaInfo")],c)})},"esri/popup/content/PieChartMediaInfo":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.type="pie-chart"}clone(){return new h({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};a.__decorate([b.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:k.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=h=a.__decorate([n.subclass("esri.popup.content.PieChartMediaInfo")],c)})},"esri/popup/content/support/mediaInfoTypes":function(){define("exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),
function(a,b,c,f,e,n,d){a.types={base:d,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":b,"column-chart":c,"line-chart":e,"pie-chart":n,image:f}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/popup/content/RelationshipContent":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ./Content ../support/RelatedRecordsInfoFieldOrder".split(" "),
function(a,b,c,f,e,n,d,k,h){b=class extends b.ClonableMixin(k){constructor(l){super(l);this.displayCount=this.description=null;this.displayType="list";this.title=this.relationshipId=this.orderByFields=null;this.type="relationship"}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);a.__decorate([c.property({type:Number,json:{type:f.Integer,write:!0}})],b.prototype,"displayCount",void 0);a.__decorate([c.property({type:["list"],json:{write:!0}})],b.prototype,
"displayType",void 0);a.__decorate([c.property({type:[h],json:{write:!0}})],b.prototype,"orderByFields",void 0);a.__decorate([c.property({type:Number,json:{type:f.Integer,write:!0}})],b.prototype,"relationshipId",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([c.property({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.popup.content.RelationshipContent")],b)})},
"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){var k;b=k=class extends b.JSONSupport{constructor(h){super(h);this.order=this.field=null}clone(){return new k({field:this.field,order:this.order})}};a.__decorate([c.property({type:String,json:{write:!0}})],
b.prototype,"field",void 0);a.__decorate([c.property({type:["asc","desc"],json:{write:!0}})],b.prototype,"order",void 0);return b=k=a.__decorate([d.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],b)})},"esri/popup/content/TextContent":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Content".split(" "),function(a,b,c,f,e,n,d){var k;c=k=class extends d{constructor(h){super(h);
this.text=null;this.type="text"}clone(){return new k({text:this.text})}};a.__decorate([b.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);a.__decorate([b.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=k=a.__decorate([n.subclass("esri.popup.content.TextContent")],c)})},"esri/popup/content/UtilityNetworkAssociationsContent":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Content ../support/UtilityNetworkAssociationType".split(" "),
function(a,b,c,f,e,n,d,k,h,l){b=class extends b.ClonableMixin(h){constructor(m){super(m);this.title=this.description=null;this.associationTypes=[];this.type="utility-network-associations"}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([c.property({type:[l],json:{write:!0}})],b.prototype,"associationTypes",void 0);a.__decorate([d.enumeration({utilityNetworkAssociations:"utility-network-associations"})],
b.prototype,"type",void 0);return b=a.__decorate([k.subclass("esri.popup.content.UtilityNetworkAssociationsContent")],b)})},"esri/popup/support/UtilityNetworkAssociationType":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){b=class extends b.ClonableMixin(c.JSONSupport){constructor(h){super(h);
this.type=this.description=this.title=null;this.open=!1;this.associatedAssetType=this.associatedAssetGroup=this.associatedNetworkSourceId=null}};a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);a.__decorate([f.property({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],b.prototype,"type",void 0);a.__decorate([f.property({type:Boolean,
json:{read:!1}})],b.prototype,"open",void 0);a.__decorate([f.property({type:Number,json:{type:e.Integer,write:!0}})],b.prototype,"associatedNetworkSourceId",void 0);a.__decorate([f.property({type:Number,json:{type:e.Integer,write:!0}})],b.prototype,"associatedAssetGroup",void 0);a.__decorate([f.property({type:Number,json:{type:e.Integer,write:!0}})],b.prototype,"associatedAssetType",void 0);return b=a.__decorate([k.subclass("esri.popup.support.UtilityNetworkAssociationType")],b)})},"esri/popup/ExpressionInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){var k;b=k=class extends b.JSONSupport{constructor(h){super(h);this.returnType=this.expression=this.title=this.name=null}clone(){return new k({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);a.__decorate([c.property({type:String,json:{write:!0}})],b.prototype,"expression",
void 0);a.__decorate([c.property({type:["string","number"],json:{write:!0}})],b.prototype,"returnType",void 0);return b=k=a.__decorate([d.subclass("esri.popup.ExpressionInfo")],b)})},"esri/popup/LayerOptions":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){var k;b=k=class extends b.JSONSupport{constructor(h){super(h);this.showNoDataRecords=
this.returnTopmostRaster=null}clone(){return new k({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};a.__decorate([c.property({type:Boolean,json:{write:!0}})],b.prototype,"returnTopmostRaster",void 0);a.__decorate([c.property({type:Boolean,json:{write:!0}})],b.prototype,"showNoDataRecords",void 0);return b=k=a.__decorate([d.subclass("esri.popup.LayerOptions")],b)})},"esri/popup/RelatedRecordsInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./support/RelatedRecordsInfoFieldOrder".split(" "),
function(a,b,c,f,e,n,d,k){var h;b=h=class extends b.JSONSupport{constructor(l){super(l);this.orderByFields=this.showRelatedRecords=null}clone(){return new h({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?c.clone(this.orderByFields):null})}};a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"showRelatedRecords",void 0);a.__decorate([f.property({type:[k],json:{write:!0}})],b.prototype,"orderByFields",void 0);return b=h=a.__decorate([d.subclass("esri.popup.RelatedRecordsInfo")],
b)})},"esri/support/actions/ActionBase":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){var h;b=h=class extends c.IdentifiableMixin(b){constructor(l){super(l);this.active=!1;this.className=null;this.disabled=!1;this.id=this.icon=null;this.indicator=!1;this.type=this.title=null;
this.visible=!0}clone(){return new h({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};a.__decorate([f.property()],b.prototype,"active",void 0);a.__decorate([f.property()],b.prototype,"className",void 0);a.__decorate([f.property()],b.prototype,"disabled",void 0);a.__decorate([f.property()],b.prototype,"icon",void 0);a.__decorate([f.property()],b.prototype,"id",void 0);a.__decorate([f.property()],
b.prototype,"indicator",void 0);a.__decorate([f.property()],b.prototype,"title",void 0);a.__decorate([f.property()],b.prototype,"type",void 0);a.__decorate([f.property()],b.prototype,"visible",void 0);return b=h=a.__decorate([k.subclass("esri.support.actions.ActionBase")],b)})},"esri/core/Identifiable":function(){define(["exports","../chunks/tslib.es6","./accessorSupport/decorators/subclass"],function(a,b,c){let f=0;const e=n=>{n=class extends n{constructor(...d){super(...d);Object.defineProperty(this,
"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+f++})}};return n=b.__decorate([c.subclass("esri.core.Identifiable")],n)};a.Identifiable=class extends e(class{}){};a.Identifiable=b.__decorate([c.subclass("esri.core.Identifiable")],a.Identifiable);a.IdentifiableMixin=e;a.NumericIdentifiableMixin=n=>{n=class extends n{constructor(...d){super(...d);Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:f++})}};return n=b.__decorate([c.subclass("esri.core.Identifiable.NumericIdentifiable")],
n)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/actions/ActionButton":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(a,b,c,f,e,n,d){var k;c=k=class extends d{constructor(h){super(h);this.image=null;this.type="button"}clone(){return new k({active:this.active,className:this.className,disabled:this.disabled,
icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};a.__decorate([b.property()],c.prototype,"image",void 0);return c=k=a.__decorate([n.subclass("esri.support.actions.ActionButton")],c)})},"esri/support/actions/ActionToggle":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(a,
b,c,f,e,n,d){var k;c=k=class extends d{constructor(h){super(h);this.image=null;this.type="toggle";this.value=!1}clone(){return new k({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};a.__decorate([b.property()],c.prototype,"image",void 0);a.__decorate([b.property()],c.prototype,"value",void 0);return c=k=a.__decorate([n.subclass("esri.support.actions.ActionToggle")],
c)})},"esri/symbols":function(){define("exports ./core/accessorSupport/ensureType ./core/accessorSupport/extensions/serializableProperty/reader ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M,C,U,y,B,H){const N={base:E,key:"type",typeMap:{"simple-fill":u,"picture-fill":q,"picture-marker":g,"simple-line":D,"simple-marker":J,text:M,"label-3d":l,"line-3d":m,"mesh-3d":r,"point-3d":p,"polygon-3d":x,"web-style":y,cim:f},errorContext:"symbol"},K={base:E,key:"type",typeMap:{"picture-marker":g,"simple-marker":J,"point-3d":p,cim:f},errorContext:"symbol"},X={base:E,key:"type",typeMap:{"simple-line":D,"line-3d":m,cim:f},errorContext:"symbol"},
V={base:E,key:"type",typeMap:{"simple-fill":u,"picture-fill":q,"polygon-3d":x,cim:f},errorContext:"symbol"},da={base:E,key:"type",typeMap:{"picture-marker":g,"simple-marker":J,text:M,"web-style":y,cim:f},errorContext:"symbol"};c=c.createTypeReader({types:N});const aa={base:E,key:"type",typeMap:{"simple-fill":u,"picture-fill":q,"picture-marker":g,"simple-line":D,"simple-marker":J,text:M,"line-3d":m,"mesh-3d":r,"point-3d":p,"polygon-3d":x,"web-style":y,cim:f},errorContext:"symbol"},fa={base:E,key:"type",
typeMap:{text:M,"label-3d":l},errorContext:"symbol"},Z={base:E,key:"type",typeMap:{"label-3d":l,"line-3d":m,"mesh-3d":r,"point-3d":p,"polygon-3d":x,"web-style":y},errorContext:"symbol"},ma={base:E,key:"type",typeMap:{"line-3d":m,"mesh-3d":r,"point-3d":p,"polygon-3d":x,"web-style":y,cim:f},errorContext:"symbol"},S={base:E,key:"type",typeMap:{"label-3d":l},errorContext:"symbol"};b=b.ensureOneOfType(N);a.CIMSymbol=f;a.ExtrudeSymbol3DLayer=e;a.BaseFillSymbol=n;a.FillSymbol3DLayer=d;a.Font=k;a.IconSymbol3DLayer=
h;a.LabelSymbol3D=l;a.LineSymbol3D=m;a.LineSymbol3DLayer=t;a.BaseMarkerSymbol=z;a.MeshSymbol3D=r;a.ObjectSymbol3DLayer=v;a.PathSymbol3DLayer=w;a.PictureFillSymbol=q;a.PictureMarkerSymbol=g;a.PointSymbol3D=p;a.PolygonSymbol3D=x;a.SimpleFillSymbol=u;a.SimpleLineSymbol=D;a.SimpleMarkerSymbol=J;a.BaseSymbol=E;a.BaseSymbol3D=L;a.BaseSymbol3DLayer=Q;a.TextSymbol=M;a.TextSymbol3DLayer=C;a.WaterSymbol3DLayer=U;a.WebStyleSymbol=y;a.LineCallout3D=B;a.LineCallout3DBorder=H;a.ensureType=b;a.isSymbol=function(ha){return ha instanceof
E};a.isSymbol2D=function(ha){if(!ha)return!1;switch(ha.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;default:return!1}};a.isSymbol3D=function(ha){if(!ha)return!1;switch(ha.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};a.lineSymbolTypes=X;a.pointSymbolTypes=K;a.polygonSymbolTypes=V;a.readSymbol=c;a.symbolTypes=N;a.symbolTypes3D=Z;a.symbolTypesCluster=
da;a.symbolTypesLabel=fa;a.symbolTypesLabel3D=S;a.symbolTypesRenderer=aa;a.symbolTypesRenderer3D=ma;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/CIMSymbol":function(){define("../chunks/tslib.es6 ../core/lang ../core/string ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../layers/support/fieldUtils ./Symbol".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){var z;e=z=class extends t{constructor(r){super(r);this.data=null;this.type="cim"}readData(r,v){return v}writeData(r,v){Object.assign(v,r)}async collectRequiredFields(r,v){if("CIMSymbolReference"===this.data?.type){var w=this.data.primitiveOverrides;w&&(w=w.map(q=>(q=q.valueExpressionInfo)?m.collectArcadeFieldNames(r,v,q.expression):null),await Promise.all(w))}}clone(){return new z({data:b.clone(this.data)})}hash(){return c.numericHash(JSON.stringify(this.data)).toString()}};
a.__decorate([f.property({json:{write:!1}})],e.prototype,"color",void 0);a.__decorate([f.property({json:{write:!0}})],e.prototype,"data",void 0);a.__decorate([k.reader("data",["symbol"])],e.prototype,"readData",null);a.__decorate([l.writer("data",{})],e.prototype,"writeData",null);a.__decorate([d.enumeration({CIMSymbolReference:"cim"},{readOnly:!0})],e.prototype,"type",void 0);return e=z=a.__decorate([h.subclass("esri.symbols.CIMSymbol")],e)})},"esri/symbols/Symbol":function(){define("../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k,h,l){c=new c.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let m=0;f=class extends f.JSONSupport{constructor(t){super(t);this.id=`sym${m++}`;this.type=null;this.color=new b([0,
0,0,1])}readColor(t){return null!=t?.[0]?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,z){}hash(){return JSON.stringify(this.toJSON())}clone(){}};a.__decorate([e.property({type:c.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:c.write}}})],f.prototype,"type",void 0);a.__decorate([e.property({type:b,json:{write:{allowNull:!0}}})],f.prototype,"color",void 0);a.__decorate([h.reader("color")],f.prototype,"readColor",null);return f=a.__decorate([l.subclass("esri.symbols.Symbol")],
f)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),function(a,b,c,f,e,n,d,k,h,l){var m;c=m=class extends k{constructor(t){super(t);this.type="extrude";this.size=1;this.material=null;this.castShadows=!0;this.edges=null}clone(){return new m({edges:this.edges?.clone(),
enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};a.__decorate([n.enumeration({Extrude:"extrude"},{readOnly:!0})],c.prototype,"type",void 0);a.__decorate([b.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],c.prototype,"size",void 0);a.__decorate([b.property({type:l.Symbol3DMaterial,json:{write:!0}})],c.prototype,"material",void 0);a.__decorate([b.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,
"castShadows",void 0);a.__decorate([b.property(h.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=m=a.__decorate([d.subclass("esri.symbols.ExtrudeSymbol3DLayer")],c)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(a,b,c,f,e,n,d,k){b=class extends b.JSONSupport{constructor(h){super(h);
this.enabled=!0;this.type=null;this.ignoreDrivers=!1}writeEnabled(h,l,m){h||(l[m]=h)}};a.__decorate([c.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);a.__decorate([k.writer("enabled")],b.prototype,"writeEnabled",null);a.__decorate([c.property({type:"icon object line path fill water extrude text".split(" "),readOnly:!0})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.symbols.Symbol3DLayer")],b)})},"esri/symbols/edges/utils":function(){define(["exports",
"./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(a,b,c,f){a.symbol3dEdgesProperty={types:{key:"type",base:b,typeMap:{solid:f,sketch:c}},json:{write:!0}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l){c=class extends c.JSONSupport{constructor(m){super(m);this.color=new b([0,0,0,1]);this.extensionLength=0;this.size=e.px2pt(1)}clone(){}cloneProperties(){return{color:f.clone(this.color),size:this.size,extensionLength:this.extensionLength}}};a.__decorate([n.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);a.__decorate([n.property(l.colorAndTransparencyProperty)],c.prototype,"color",void 0);a.__decorate([n.property({...l.screenSizeProperty,
json:{write:{overridePolicy(m){return{enabled:!!m}}}}})],c.prototype,"extensionLength",void 0);a.__decorate([n.property(l.screenSizeProperty)],c.prototype,"size",void 0);return c=a.__decorate([h.subclass("esri.symbols.edges.Edges3D")],c)})},"esri/symbols/support/materialUtils":function(){define(["exports","../../Color","../../core/screenUtils","../../core/accessorSupport/ensureType","../../webdoc/support/opacityUtils"],function(a,b,c,f,e){c={type:Number,cast:c.toPt,json:{write:!0}};a.colorAndTransparencyProperty=
{type:b,json:{type:[f.Integer],default:null,read:{source:["color","transparency"],reader:function(n,d){n=null!=d.transparency?e.transparencyToOpacity(d.transparency):1;return(d=d.color)&&Array.isArray(d)?new b([d[0]||0,d[1]||0,d[2]||0,n]):null}},write:{target:{color:{type:[f.Integer]},transparency:{type:f.Integer}},writer:function(n,d){d.color=n.toJSON().slice(0,3);n=e.opacityToTransparency(n.a);0!==n&&(d.transparency=n)}}}};a.screenSizeProperty=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(a,b){a.opacityToTransparency=function(c){c=b.ensureInteger(100*(1-c));return Math.max(0,Math.min(c,100))};a.transparencyToOpacity=function(c){return Math.max(0,Math.min(1-c/100,1))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(a,b,c,f,e,n,d,k){var h;b=h=class extends k{constructor(l){super(l);this.type="sketch"}clone(){return new h(this.cloneProperties())}};a.__decorate([n.enumeration({sketch:"sketch"},{readOnly:!0})],b.prototype,"type",void 0);return b=h=a.__decorate([d.subclass("esri.symbols.edges.SketchEdges3D")],b)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Edges3D".split(" "),
function(a,b,c,f,e,n,d,k){var h;b=h=class extends k{constructor(l){super(l);this.type="solid"}clone(){return new h(this.cloneProperties())}};a.__decorate([n.enumeration({solid:"solid"},{readOnly:!0})],b.prototype,"type",void 0);return b=h=a.__decorate([d.subclass("esri.symbols.edges.SolidEdges3D")],b)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec3f64 ./materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l){var m;a.Symbol3DMaterial=m=class extends c.JSONSupport{constructor(t){super(t);this.emissiveFactor=this.color=null}clone(){const t={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?h.clone(this.emissiveFactor):null};return new m(t)}};b.__decorate([f.property(l.colorAndTransparencyProperty)],a.Symbol3DMaterial.prototype,"color",void 0);b.__decorate([f.property({type:[Number],json:{write:!1}})],a.Symbol3DMaterial.prototype,"emissiveFactor",void 0);a.Symbol3DMaterial=
m=b.__decorate([k.subclass("esri.symbols.support.Symbol3DMaterial")],a.Symbol3DMaterial);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/FillSymbol":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./SimpleLineSymbol ./Symbol".split(" "),function(a,b,c,f,e,n,d,k){c=class extends k{constructor(h){super(h);this.type=this.outline=null}hash(){return`${this.type}.${this.outline?.hash()}`}};
a.__decorate([b.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":d}},json:{default:null,write:!0}})],c.prototype,"outline",void 0);a.__decorate([b.property({type:["simple-fill","picture-fill"],readOnly:!0})],c.prototype,"type",void 0);return c=a.__decorate([n.subclass("esri.symbols.FillSymbol")],c)})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/tslib.es6 ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol ./LineSymbolMarker".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;b=new b.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});l=t=class extends l{constructor(...z){super(...z);this.type="simple-line";this.style="solid";this.join=
this.cap="round";this.marker=null;this.miterLimit=2}normalizeCtorArgs(z,r,v,w,q,g){if(z&&"string"!==typeof z)return z;const p={};null!=z&&(p.style=z);null!=r&&(p.color=r);null!=v&&(p.width=f.toPt(v));null!=w&&(p.cap=w);null!=q&&(p.join=q);null!=g&&(p.miterLimit=f.toPt(g));return p}clone(){return new t({color:c.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};
a.__decorate([k.enumeration({esriSLS:"simple-line"},{readOnly:!0})],l.prototype,"type",void 0);a.__decorate([e.property({type:b.apiValues,json:{read:b.read,write:b.write}})],l.prototype,"style",void 0);a.__decorate([e.property({type:["butt","round","square"],json:{write:{overridePolicy:(z,r,v)=>({enabled:"round"!==z&&null==v?.origin})}}})],l.prototype,"cap",void 0);a.__decorate([e.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(z,r,v)=>({enabled:"round"!==z&&null==v?.origin})}}})],
l.prototype,"join",void 0);a.__decorate([e.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":m}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],l.prototype,"marker",void 0);a.__decorate([e.property({type:Number,json:{read:!1,write:!1}})],l.prototype,"miterLimit",void 0);return l=t=a.__decorate([h.subclass("esri.symbols.SimpleLineSymbol")],l)})},"esri/symbols/LineSymbol":function(){define("../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),
function(a,b,c,f,e,n,d,k,h){f=class extends h{constructor(l){super(l);this.type="simple-line";this.width=.75}hash(){return`${this.type}.${this.width}`}};a.__decorate([d.enumeration({esriSLS:"simple-line"},{readOnly:!0})],f.prototype,"type",void 0);a.__decorate([c.property({type:Number,cast:b.toPt,json:{write:!0}})],f.prototype,"width",void 0);return f=a.__decorate([k.subclass("esri.symbols.LineSymbol")],f)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/tslib.es6 ../Color ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/lineMarkers".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){var z;c=z=class extends c.JSONSupport{constructor(r){super(r);this.placement="begin-end";this.type="line-marker";this.style="arrow"}writeStyle(r,v,w,q){v[w]="web-map"===q?.origin?"arrow":r}set color(r){this._set("color",r)}readColor(r){return null!=r?.[0]?[r[0],r[1],r[2],r[3]/255]:r}writeColor(r,v,w,q){"web-map"!==q?.origin&&(v[w]=r)}clone(){return new z({color:f.clone(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};
a.__decorate([e.property({type:["begin","end","begin-end"],json:{write:!0}})],c.prototype,"placement",void 0);a.__decorate([k.enumeration({"line-marker":"line-marker"},{readOnly:!0}),e.property({json:{origins:{"web-map":{write:!1}}}})],c.prototype,"type",void 0);a.__decorate([e.property({type:t.lineMarkerStyles})],c.prototype,"style",void 0);a.__decorate([m.writer("style")],c.prototype,"writeStyle",null);a.__decorate([e.property({type:b,value:null,json:{write:{allowNull:!0}}})],c.prototype,"color",
null);a.__decorate([h.reader("color")],c.prototype,"readColor",null);a.__decorate([m.writer("color")],c.prototype,"writeColor",null);return c=z=a.__decorate([l.subclass("esri.symbols.LineSymbolMarker")],c)})},"esri/symbols/support/lineMarkers":function(){define(["exports"],function(a){a.lineMarkerPlacements=["begin","end","begin-end"];a.lineMarkerStyles="arrow circle square diamond cross x".split(" ");Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./edges/utils ./patterns/LineStylePattern3D ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){var w;c=w=class extends k{constructor(q){super(q);this.type="fill";this.pattern=this.material=null;this.castShadows=!0;this.edges=this.outline=null}clone(){const q={edges:null!=this.edges?this.edges.clone():null,enabled:this.enabled,material:null!=this.material?this.material.clone():null,pattern:null!=this.pattern?this.pattern.clone():null,castShadows:this.castShadows,outline:null!=this.outline?this.outline.clone():null};return new w(q)}static fromSimpleFillSymbol(q){const g=
q.outline&&q.outline.style&&"solid"!==q.outline.style?new l({style:q.outline.style}):null,p={size:q.outline?.width??0,color:(q.outline?.color??z.white).clone(),pattern:g};g&&q.outline?.cap&&(p.patternCap=q.outline.cap);return new w({material:new r.Symbol3DFillMaterial({color:(q.color??z.transparentWhite).clone()}),pattern:q.style&&"solid"!==q.style?new m({style:q.style}):null,outline:p})}};a.__decorate([n.enumeration({Fill:"fill"},{readOnly:!0})],c.prototype,"type",void 0);a.__decorate([b.property({type:r.Symbol3DFillMaterial,
json:{write:!0}})],c.prototype,"material",void 0);a.__decorate([b.property(t.symbol3dPatternProperty)],c.prototype,"pattern",void 0);a.__decorate([b.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);a.__decorate([b.property({type:v.Symbol3DOutline,json:{write:!0}})],c.prototype,"outline",void 0);a.__decorate([b.property(h.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=w=a.__decorate([d.subclass("esri.symbols.FillSymbol3DLayer")],c)})},
"esri/symbols/patterns/LineStylePattern3D":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./LinePattern3D ./lineStyles".split(" "),function(a,b,c,f,e,n,d,k,h,l){var m;b=b.strict()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",
null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});h=m=class extends h{constructor(t){super(t);this.type="style";this.style="solid"}clone(){return new m({style:this.style})}};a.__decorate([c.property({type:["style"]})],h.prototype,"type",void 0);a.__decorate([d.enumeration(b),c.property({type:l.lineStyles})],h.prototype,"style",void 0);return h=m=a.__decorate([k.subclass("esri.symbols.patterns.LineStylePattern3D")],
h)})},"esri/symbols/patterns/LinePattern3D":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){b=class extends b.JSONSupport{constructor(k){super(k)}clone(){throw Error("Subclasses of LinePattern3D should implement their own clone method.");}};a.__decorate([c.property({type:["style"],readOnly:!0,json:{read:!0,
write:{ignoreOrigin:!0}}})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.symbols.patterns.LinePattern3D")],b)})},"esri/symbols/patterns/lineStyles":function(){define(["exports"],function(a){a.lineStyles="dash dash-dot dot long-dash long-dash-dot long-dash-dot-dot none short-dash short-dash-dot short-dash-dot-dot short-dot solid".split(" ");Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Pattern3D ./styles".split(" "),
function(a,b,c,f,e,n,d,k){var h;c=h=class extends d{constructor(l){super(l);this.type="style";this.style="solid"}clone(){return new h({style:this.style})}};a.__decorate([b.property({type:["style"]})],c.prototype,"type",void 0);a.__decorate([b.property({type:k,json:{read:!0,write:!0}})],c.prototype,"style",void 0);return c=h=a.__decorate([n.subclass("esri.symbols.patterns.StylePattern3D")],c)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d){b=class extends b.JSONSupport{constructor(k){super(k);this.type="style"}clone(){throw Error("Subclasses of Pattern3D should implement their own clone method.");}};a.__decorate([c.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],b.prototype,"type",void 0);return b=a.__decorate([d.subclass("esri.symbols.patterns.Pattern3D")],b)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./LinePattern3D","./LineStylePattern3D","./Pattern3D","./StylePattern3D"],function(a,b,c,f,e){f={types:{key:"type",base:f,typeMap:{style:e}},json:{write:!0}};a.symbol3dLinePatternProperty={types:{key:"type",base:b,typeMap:{style:c}},json:{write:!0}};a.symbol3dPatternProperty=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(a,b){const c=new b("white"),
f=new b("black");b=new b([255,255,255,0]);a.black=f;a.isBlack=function(e){return 0===e.r&&0===e.g&&0===e.b};a.transparentWhite=b;a.white=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec3f64 ./Symbol3DMaterial".split(" "),
function(a,b,c,f,e,n,d,k,h,l){var m;a.Symbol3DFillMaterial=m=class extends l.Symbol3DMaterial{constructor(t){super(t);this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?h.clone(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new m(t)}};b.__decorate([d.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],a.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);a.Symbol3DFillMaterial=m=b.__decorate([k.subclass("esri.symbols.support.Symbol3DFillMaterial")],
a.Symbol3DFillMaterial);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../patterns/utils ./materialUtils ./symbolLayerUtils3D".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t,z){var r;a.Symbol3DOutline=
r=class extends f.JSONSupport{constructor(v){super(v);this.color=new c([0,0,0,1]);this.size=e.px2pt(1);this.pattern=null;this.patternCap="butt"}clone(){const v={color:null!=this.color?this.color.clone():null,size:this.size,pattern:null!=this.pattern?this.pattern.clone():null,patternCap:this.patternCap};return new r(v)}};b.__decorate([n.property(t.colorAndTransparencyProperty)],a.Symbol3DOutline.prototype,"color",void 0);b.__decorate([n.property(t.screenSizeProperty)],a.Symbol3DOutline.prototype,"size",
void 0);b.__decorate([n.property(m.symbol3dLinePatternProperty)],a.Symbol3DOutline.prototype,"pattern",void 0);b.__decorate([n.property({type:z.lineCaps,json:{default:"butt",write:{overridePolicy(){return{enabled:null!=this.pattern}}}}})],a.Symbol3DOutline.prototype,"patternCap",void 0);a.Symbol3DOutline=r=b.__decorate([l.subclass("esri.symbols.support.Symbol3DOutline")],a.Symbol3DOutline);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/Font":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./support/textUtils".split(" "),
function(a,b,c,f,e,n,d,k,h){var l;b=l=class extends b.JSONSupport{constructor(m){super(m);this.decoration="none";this.family="sans-serif";this.size=9;this.weight=this.style="normal"}castSize(m){return c.toPt(m)}clone(){return new l({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};a.__decorate([f.property({type:h.fontDecorations,json:{default:"none",write:!0}})],
b.prototype,"decoration",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"family",void 0);a.__decorate([f.property({type:Number,json:{write:{overridePolicy(m,t,z){return{enabled:!z||!z.textSymbol3D}}}}})],b.prototype,"size",void 0);a.__decorate([e.cast("size")],b.prototype,"castSize",null);a.__decorate([f.property({type:h.fontStyles,json:{default:"normal",write:!0}})],b.prototype,"style",void 0);a.__decorate([f.property({type:h.fontWeights,json:{default:"normal",write:!0}})],
b.prototype,"weight",void 0);return b=l=a.__decorate([k.subclass("esri.symbols.Font")],b)})},"esri/symbols/support/textUtils":function(){define(["exports","../../core/mathUtils","../../core/accessorSupport/ensureType"],function(a,b,c){const f={type:Number,cast:h=>{h=c.ensureNumber(h);return 0===h?1:b.clamp(h,.1,4)},nonNullable:!0},e=["left","right","center"],n=["baseline","top","middle","bottom"],d={type:e,nonNullable:!0},k={type:n,nonNullable:!0};a.backgroundPadding=8;a.fontDecorations=["none","underline",
"line-through"];a.fontStyles=["normal","italic","oblique"];a.fontWeights=["normal","lighter","bold","bolder"];a.horizontalAlignmentProperty=d;a.horizontalAlignments=e;a.lineHeightProperty=f;a.verticalAlignmentProperty=k;a.verticalAlignments=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DIconOutline ./support/Symbol3DMaterial".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(x){const u="width"in x?x.width:x.size,D="height"in x?x.height:x.size,J=q(x.xoffset);x=q(x.yoffset);return(J||x)&&u&&D?{x:-J/u,y:x/D}:null}function q(x){return isFinite(x)?x:0}var g;n=g=class extends h{constructor(x){super(x);this.resource=this.material=null;this.type="icon";this.size=12;this.anchor="center";this.outline=this.anchorPosition=null;this.angle=0}clone(){return new g({anchor:this.anchor,anchorPosition:b.clone(this.anchorPosition),enabled:this.enabled,
material:b.clone(this.material),outline:b.clone(this.outline),resource:b.clone(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(x){const u=x.color||l.white,D=w(x),J=x.outline&&0<x.outline.width?{size:x.outline.width,color:(x.outline.color||l.white).clone()}:null;var E=g,L=x.size,Q=x.angle;{x=x.style;const M=p[x];M?x=M:(c.getLogger("esri.symbols.IconSymbol3DLayer").warn(`${x} cannot be mapped to Icon symbol. Fallback to "circle"`),x="circle")}return new E({size:L,angle:Q,
resource:{primitive:x},material:{color:u},outline:J,anchor:D?"relative":void 0,anchorPosition:D})}static fromPictureMarkerSymbol(x){const u=!x.color||l.isBlack(x.color)?l.white:x.color,D=w(x);return new g({size:x.width<=x.height?x.height:x.width,angle:x.angle,resource:{href:x.url},material:{color:u.clone()},anchor:D?"relative":void 0,anchorPosition:D})}static fromCIMSymbol(x){return new g({resource:{href:f.makeData({mediaType:"application/json",data:JSON.stringify(x.data)})}})}};a.__decorate([e.property({type:v.Symbol3DMaterial,
json:{write:!0}})],n.prototype,"material",void 0);a.__decorate([e.property({type:m.IconSymbol3DLayerResource,json:{write:!0}})],n.prototype,"resource",void 0);a.__decorate([d.enumeration({Icon:"icon"},{readOnly:!0})],n.prototype,"type",void 0);a.__decorate([e.property(t.screenSizeProperty)],n.prototype,"size",void 0);a.__decorate([d.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",
relative:"relative"},{default:"center"})],n.prototype,"anchor",void 0);a.__decorate([e.property({type:z.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:x=>new z.Symbol3DAnchorPosition2D({x:x[0],y:x[1]})},write:{writer:(x,u)=>{u.anchorPosition=[x.x,x.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],n.prototype,"anchorPosition",void 0);a.__decorate([e.property({type:r.Symbol3DIconOutline,json:{write:!0}})],n.prototype,"outline",void 0);a.__decorate([e.property({type:Number,
json:{write:!0,default:0}})],n.prototype,"angle",void 0);n=g=a.__decorate([k.subclass("esri.symbols.IconSymbol3DLayer")],n);const p={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return n})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../chunks/persistableUrlUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r){var v;c=c.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});a.IconSymbol3DLayerResource=v=class extends f.JSONSupport{constructor(w){super(w)}readHref(w,q,g){return w?r.fromJSON(w,g):q.dataURI}writeHref(w,q,g,p){w&&(e.isDataProtocol(w)?q.dataURI=w:(q.href=r.toJSON(w,p),e.isAbsolute(q.href)&&(q.href=e.normalize(q.href))))}clone(){return new v({href:this.href,primitive:this.primitive})}};b.__decorate([n.property({type:String,
json:{write:!0,read:{source:["href","dataURI"]}}})],a.IconSymbol3DLayerResource.prototype,"href",void 0);b.__decorate([m.reader("href")],a.IconSymbol3DLayerResource.prototype,"readHref",null);b.__decorate([z.writer("href",{href:{type:String},dataURI:{type:String}})],a.IconSymbol3DLayerResource.prototype,"writeHref",null);b.__decorate([l.enumeration(c)],a.IconSymbol3DLayerResource.prototype,"primitive",void 0);a.IconSymbol3DLayerResource=v=b.__decorate([t.subclass("esri.symbols.support.IconSymbol3DLayerResource")],
a.IconSymbol3DLayerResource);a.defaultPrimitive="circle";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d,k){var h;a.Symbol3DAnchorPosition2D=h=class extends c{constructor(){super(...arguments);
this.y=this.x=0}clone(){return new h({x:this.x,y:this.y})}};b.__decorate([f.property({type:Number})],a.Symbol3DAnchorPosition2D.prototype,"x",void 0);b.__decorate([f.property({type:Number})],a.Symbol3DAnchorPosition2D.prototype,"y",void 0);a.Symbol3DAnchorPosition2D=h=b.__decorate([k.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],a.Symbol3DAnchorPosition2D);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DIconOutline":function(){define("exports ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;a.Symbol3DIconOutline=t=class extends f.JSONSupport{constructor(z){super(z);this.color=new c([0,0,0,1]);this.size=e.px2pt(1)}clone(){const z={color:null!=this.color?this.color.clone():null,size:this.size};return new t(z)}};b.__decorate([n.property(m.colorAndTransparencyProperty)],a.Symbol3DIconOutline.prototype,"color",void 0);b.__decorate([n.property(m.screenSizeProperty)],a.Symbol3DIconOutline.prototype,"size",void 0);a.Symbol3DIconOutline=t=b.__decorate([l.subclass("esri.symbols.support.Symbol3DIconOutline")],
a.Symbol3DIconOutline);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t){var z;const r=b.ofType({base:null,
key:"type",typeMap:{text:l}});e=z=class extends h{constructor(v){super(v);this.styleOrigin=this.callout=this.verticalOffset=null;this.symbolLayers=new r;this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return m.hasVisibleCallout(this)}hasVisibleVerticalOffset(){return m.hasVisibleVerticalOffset(this)}clone(){return new z({styleOrigin:c.clone(this.styleOrigin),symbolLayers:c.clone(this.symbolLayers),thumbnail:c.clone(this.thumbnail),callout:c.clone(this.callout),verticalOffset:c.clone(this.verticalOffset)})}static fromTextSymbol(v){return new z({symbolLayers:new b([l.fromTextSymbol(v)])})}};
a.__decorate([f.property({type:t,json:{write:!0}})],e.prototype,"verticalOffset",void 0);a.__decorate([f.property(m.calloutProperty)],e.prototype,"callout",void 0);a.__decorate([f.property({json:{read:!1,write:!1}})],e.prototype,"styleOrigin",void 0);a.__decorate([f.property({type:r})],e.prototype,"symbolLayers",void 0);a.__decorate([d.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],e.prototype,"type",void 0);return e=z=a.__decorate([k.subclass("esri.symbols.LabelSymbol3D")],e)})},"esri/symbols/Symbol3D":function(){define("../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../portal/Portal ../chunks/persistableUrlUtils ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g,p,x,u,D,J,E,L,Q,M){const C={icon:g,object:x,line:p,path:u,fill:q,extrude:w,text:E,water:L};h=b.ofType({base:J,key:"type",typeMap:C,errorContext:"symbol-layer"});D=class extends D{constructor(U){super(U);this.type=this.thumbnail=this.styleOrigin=null;this._set("symbolLayers",new ((this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers)?.type||b))}get color(){return null}set color(U){this.constructed&&f.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(U){c.referenceSetter(U,
this._get("symbolLayers"))}readStyleOrigin(U,y,B){if(U.styleUrl&&U.name)return y=v.fromJSON(U.styleUrl,B),new Q({styleUrl:y,name:U.name});if(U.styleName&&U.name)return new Q({portal:B?.portal||r.getDefault(),styleName:U.styleName,name:U.name});B?.messages&&B.messages.push(new n("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:B,definition:U}))}writeStyleOrigin(U,y,B,H){U.styleUrl&&U.name?(B=v.toJSON(U.styleUrl,H),e.isAbsolute(B)&&
(B=e.normalize(B)),y.styleOrigin={styleUrl:B,name:U.name}):U.styleName&&U.name&&(U.portal&&H?.portal&&!e.hasSamePortal(U.portal.restUrl,H.portal.restUrl)?H?.messages&&H.messages.push(new n("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):y.styleOrigin={styleName:U.styleName,name:U.name})}normalizeCtorArgs(U){return U instanceof J||U&&C[U.type]?{symbolLayers:[U]}:Array.isArray(U)?{symbolLayers:U}:
U}};a.__decorate([d.property({json:{read:!1,write:!1}})],D.prototype,"color",null);a.__decorate([d.property({type:h,nonNullable:!0,json:{write:!0}}),k.cast(c.castForReferenceSetter)],D.prototype,"symbolLayers",null);a.__decorate([d.property({type:Q})],D.prototype,"styleOrigin",void 0);a.__decorate([m.reader("styleOrigin")],D.prototype,"readStyleOrigin",null);a.__decorate([z.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],
D.prototype,"writeStyleOrigin",null);a.__decorate([d.property({type:M.Thumbnail,json:{read:!1}})],D.prototype,"thumbnail",void 0);a.__decorate([d.property({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],D.prototype,"type",void 0);return D=a.__decorate([t.subclass("esri.symbols.Symbol3D")],D)})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineStyleMarker3D ./Symbol3DLayer ./patterns/LineStylePattern3D ./patterns/utils ./support/colors ./support/materialUtils ./support/Symbol3DMaterial ./support/symbolLayerUtils3D".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w){var q;f=q=class extends l{constructor(g){super(g);this.material=null;this.type="line";this.join="miter";this.cap="butt";this.size=b.px2pt(1);this.marker=this.pattern=null}clone(){const g={enabled:this.enabled,material:null!=this.material?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:null!=this.pattern?this.pattern.clone():null,marker:null!=this.marker?this.marker.clone():null};return new q(g)}static fromSimpleLineSymbol(g){g=
{enabled:!0,size:g.width??b.px2pt(1),cap:g.cap||"butt",join:g.join||"miter",pattern:g.style?new m({style:g.style}):null,material:new v.Symbol3DMaterial({color:(g.color||z.white).clone()}),marker:g.marker?new h({placement:g.marker.placement,style:g.marker.style,color:g.marker.color?.clone()??null}):null};return new q(g)}};a.__decorate([c.property({type:v.Symbol3DMaterial,json:{write:!0}})],f.prototype,"material",void 0);a.__decorate([d.enumeration({Line:"line"},{readOnly:!0})],f.prototype,"type",void 0);
a.__decorate([c.property({type:w.lineJoins,json:{write:!0,default:"miter"}})],f.prototype,"join",void 0);a.__decorate([c.property({type:w.lineCaps,json:{write:!0,default:"butt"}})],f.prototype,"cap",void 0);a.__decorate([c.property(r.screenSizeProperty)],f.prototype,"size",void 0);a.__decorate([c.property(t.symbol3dLinePatternProperty)],f.prototype,"pattern",void 0);a.__decorate([c.property({types:{key:"type",base:h,typeMap:{style:h}},json:{write:!0}})],f.prototype,"marker",void 0);return f=q=a.__decorate([k.subclass("esri.symbols.LineSymbol3DLayer")],
f)})},"esri/symbols/LineStyleMarker3D":function(){define("../chunks/tslib.es6 ../Color ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./support/lineMarkers".split(" "),function(a,b,c,f,e,n,d,k,h,l){c=class extends c.ClonableMixin(f.JSONSupport){constructor(m){super(m);this.type="style";this.placement="begin-end";this.style="arrow";this.color=null}equals(m){return null!=
m&&m.placement===this.placement&&m.style===this.style&&(null==this.color&&null==m.color||null!=this.color&&null!=m.color&&this.color.toJSON()===m.color.toJSON())}};a.__decorate([e.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);a.__decorate([e.property({type:l.lineMarkerPlacements,json:{default:"begin-end",write:!0}})],c.prototype,"placement",void 0);a.__decorate([e.property({type:l.lineMarkerStyles,json:{default:"arrow",write:!0}})],c.prototype,
"style",void 0);a.__decorate([e.property({type:b,json:{type:[n.Integer],default:null,write:!0}})],c.prototype,"color",void 0);return c=a.__decorate([h.subclass("esri.symbols.LineStyleMarker3D")],c)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;c=t=class extends k{constructor(z){super(z);this.material=null;this.castShadows=!0;this.resource=null;this.type="object";this.roll=this.tilt=this.heading=this.anchorPosition=this.anchor=this.depth=this.height=this.width=void 0}clone(){return new t({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,
resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!==typeof this.resource.href}};a.__decorate([b.property({type:m.Symbol3DMaterial,json:{write:!0}})],c.prototype,"material",void 0);a.__decorate([b.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);a.__decorate([b.property({type:h.ObjectSymbol3DLayerResource,json:{write:!0}})],c.prototype,"resource",void 0);a.__decorate([n.enumeration({Object:"object"},
{readOnly:!0})],c.prototype,"type",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"width",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"height",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"depth",void 0);a.__decorate([n.enumeration({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],c.prototype,"anchor",void 0);a.__decorate([b.property({type:l.Symbol3DAnchorPosition3D,
json:{type:[Number],read:{reader:z=>new l.Symbol3DAnchorPosition3D({x:z[0],y:z[1],z:z[2]})},write:{writer:(z,r)=>{r.anchorPosition=[z.x,z.y,z.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],c.prototype,"anchorPosition",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"heading",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"tilt",void 0);a.__decorate([b.property({type:Number,json:{write:!0}})],c.prototype,"roll",void 0);
a.__decorate([b.property({readOnly:!0})],c.prototype,"isPrimitive",null);return c=t=a.__decorate([d.subclass("esri.symbols.ObjectSymbol3DLayer")],c)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../chunks/persistableUrlUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;c=c.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});a.ObjectSymbol3DLayerResource=t=class extends f.JSONSupport{clone(){return new t({href:this.href,primitive:this.primitive})}};b.__decorate([e.property({type:String,json:{read:m.read,write:m.write}})],a.ObjectSymbol3DLayerResource.prototype,"href",void 0);b.__decorate([h.enumeration(c)],a.ObjectSymbol3DLayerResource.prototype,
"primitive",void 0);a.ObjectSymbol3DLayerResource=t=b.__decorate([l.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],a.ObjectSymbol3DLayerResource);a.defaultPrimitive="sphere";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k){var h;a.Symbol3DAnchorPosition3D=h=class extends c{constructor(){super(...arguments);this.z=this.y=this.x=0}clone(){return new h({x:this.x,y:this.y,z:this.z})}};b.__decorate([f.property({type:Number})],a.Symbol3DAnchorPosition3D.prototype,"x",void 0);b.__decorate([f.property({type:Number})],a.Symbol3DAnchorPosition3D.prototype,"y",void 0);b.__decorate([f.property({type:Number})],a.Symbol3DAnchorPosition3D.prototype,"z",void 0);a.Symbol3DAnchorPosition3D=h=b.__decorate([k.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],
a.Symbol3DAnchorPosition3D);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./Symbol3DLayer ./support/Symbol3DMaterial ./support/symbolLayerUtils3D".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){var t;
c=t=class extends h{constructor(z){super(z);this.material=null;this.castShadows=!0;this.type="path";this.profile="circle";this.join="miter";this.cap="butt";this.height=this.width=void 0;this.anchor="center";this.profileRotation="all"}readWidth(z,r){return null!=z?z:null==r.height&&null!=r.size?r.size:void 0}readHeight(z,r){return null!=z?z:null==r.width&&null!=r.size?r.size:void 0}clone(){return new t({enabled:this.enabled,material:null!=this.material?this.material.clone():null,castShadows:this.castShadows,
profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};a.__decorate([b.property({type:l.Symbol3DMaterial,json:{write:!0}})],c.prototype,"material",void 0);a.__decorate([b.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);a.__decorate([n.enumeration({Path:"path"},{readOnly:!0})],c.prototype,"type",void 0);a.__decorate([b.property({type:["circle","quad"],json:{write:!0,
default:"circle"}})],c.prototype,"profile",void 0);a.__decorate([b.property({type:m.lineJoins,json:{write:!0,default:"miter"}})],c.prototype,"join",void 0);a.__decorate([b.property({type:m.pathCaps,json:{write:!0,default:"butt"}})],c.prototype,"cap",void 0);a.__decorate([b.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],c.prototype,"width",void 0);a.__decorate([d.reader("width",["width","size","height"])],c.prototype,"readWidth",null);a.__decorate([b.property({type:Number,
json:{write:!0}})],c.prototype,"height",void 0);a.__decorate([d.reader("height",["height","size","width"])],c.prototype,"readHeight",null);a.__decorate([b.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],c.prototype,"anchor",void 0);a.__decorate([b.property({type:["heading","all"],json:{write:!0,default:"all"}})],c.prototype,"profileRotation",void 0);return c=t=a.__decorate([k.subclass("esri.symbols.PathSymbol3DLayer")],c)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial ./support/Symbol3DTextBackground ./support/textUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){var w;f=w=class extends l{constructor(q){super(q);this._userSize=void 0;this.halo=null;this.horizontalAlignment="center";this.lineHeight=1;this.text=this.background=this.material=null;this.type="text";this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(q){null!=q&&null!=this._userSize&&(q.size=this._userSize);this._set("font",q)}writeFont(q,g,p,x){g.font=q.write({},{...x,textSymbol3D:!0});delete g.font.size}get size(){return null!=
this._userSize?this._userSize:null!=this.font?.size?this.font.size:9}set size(q){this._userSize=q;null!=this.font&&(this.font.size=this._userSize);this.notifyChange("size")}clone(){const q=new w({enabled:this.enabled,font:this.font&&b.clone(this.font),halo:this.halo&&b.clone(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:null!=this.material?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:b.clone(this.background)});
q._userSize=this._userSize;return q}static fromTextSymbol(q){var g=w,p=null!=q.font?q.font.clone():new h;var x=q.haloColor;var u=q.haloSize;x=x&&null!=u&&0<u?new t.Symbol3DHalo({color:b.clone(x),size:u}):null;return new g({font:p,halo:x,horizontalAlignment:q.horizontalAlignment,lineHeight:q.lineHeight,material:q.color?new z.Symbol3DMaterial({color:q.color.clone()}):null,text:q.text,verticalAlignment:q.verticalAlignment,background:q.backgroundColor?new r.Symbol3DTextBackground({color:q.backgroundColor.clone()}):
null})}};a.__decorate([c.property({type:h,json:{write:!0}})],f.prototype,"font",null);a.__decorate([k.writer("font")],f.prototype,"writeFont",null);a.__decorate([c.property({type:t.Symbol3DHalo,json:{write:!0}})],f.prototype,"halo",void 0);a.__decorate([c.property({...v.horizontalAlignmentProperty,json:{default:"center",write:!0}})],f.prototype,"horizontalAlignment",void 0);a.__decorate([c.property({...v.lineHeightProperty,json:{default:1,write:!0}})],f.prototype,"lineHeight",void 0);a.__decorate([c.property({type:z.Symbol3DMaterial,
json:{write:!0}})],f.prototype,"material",void 0);a.__decorate([c.property({type:r.Symbol3DTextBackground,json:{write:!0}})],f.prototype,"background",void 0);a.__decorate([c.property(m.screenSizeProperty)],f.prototype,"size",null);a.__decorate([c.property({type:String,json:{write:!0}})],f.prototype,"text",void 0);a.__decorate([n.enumeration({Text:"text"},{readOnly:!0})],f.prototype,"type",void 0);a.__decorate([c.property({...v.verticalAlignmentProperty,json:{default:"baseline",write:!0}})],f.prototype,
"verticalAlignment",void 0);return f=w=a.__decorate([d.subclass("esri.symbols.TextSymbol3DLayer")],f)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),function(a,b,c,f,e,n,d,k,h,l){var m;a.Symbol3DHalo=m=class extends f.JSONSupport{constructor(){super(...arguments);
this.color=new c([0,0,0,1]);this.size=0}clone(){const t={color:e.clone(this.color),size:this.size};return new m(t)}};b.__decorate([n.property(l.colorAndTransparencyProperty)],a.Symbol3DHalo.prototype,"color",void 0);b.__decorate([n.property(l.screenSizeProperty)],a.Symbol3DHalo.prototype,"size",void 0);a.Symbol3DHalo=m=b.__decorate([h.subclass("esri.symbols.support.Symbol3DHalo")],a.Symbol3DHalo);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/Symbol3DTextBackground":function(){define("exports ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l){a.Symbol3DTextBackground=class extends c.ClonableMixin(f.JSONSupport){constructor(m){super(m);this.color=null}};b.__decorate([e.property(l.colorAndTransparencyProperty)],a.Symbol3DTextBackground.prototype,"color",void 0);a.Symbol3DTextBackground=b.__decorate([h.subclass("esri.symbols.support.Symbol3DTextBackground")],a.Symbol3DTextBackground);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/tslib.es6 ../Color ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./Symbol3DLayer".split(" "),
function(a,b,c,f,e,n,d,k){var h;k=h=class extends k{constructor(m){super(m);this.color=l.clone();this.type="water";this.waterbodySize="medium";this.waveDirection=null;this.waveStrength="moderate"}clone(){return new h({color:c.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};a.__decorate([f.property({type:b,nonNullable:!0,json:{type:[e.Integer],write:(m,t,z)=>t[z]=m.toArray(b.AlphaMode.UNLESS_OPAQUE),default:()=>l.clone(),defaultEquals:m=>
m.toCss(!0)===l.toCss(!0)}})],k.prototype,"color",void 0);a.__decorate([n.enumeration({Water:"water"},{readOnly:!0})],k.prototype,"type",void 0);a.__decorate([f.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],k.prototype,"waterbodySize",void 0);a.__decorate([f.property({type:Number,json:{write:!0,default:null}})],k.prototype,"waveDirection",void 0);a.__decorate([f.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],k.prototype,
"waveStrength",void 0);a=k=h=a.__decorate([d.subclass("esri.symbols.WaterSymbol3DLayer")],k);const l=new b([0,119,190]);return a})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../portal/Portal".split(" "),function(a,b,c,f,e,n,d,k){var h;b=h=class extends b{constructor(l){super(l);this.portal=this.styleName=
this.styleUrl=this.name=null}clone(){return new h({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};a.__decorate([c.property({type:String})],b.prototype,"name",void 0);a.__decorate([c.property({type:String})],b.prototype,"styleUrl",void 0);a.__decorate([c.property({type:String})],b.prototype,"styleName",void 0);a.__decorate([c.property({type:k})],b.prototype,"portal",void 0);return b=h=a.__decorate([d.subclass("esri.symbols.support.StyleOrigin")],b)})},"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,c,f,e,n,d,k){var h;a.Thumbnail=h=class extends c{constructor(){super(...arguments);this.url=""}clone(){return new h({url:this.url})}};b.__decorate([f.property({type:String})],a.Thumbnail.prototype,"url",void 0);a.Thumbnail=h=b.__decorate([k.subclass("esri.symbols.support.Thumbnail")],a.Thumbnail);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(a,b,c){function f(e){if(!e)return!1;
e=e.verticalOffset;return!e||0>=e.screenLength||null!=e.maxWorldLength&&0>=e.maxWorldLength?!1:!0}a.calloutProperty={types:{key:"type",base:b,typeMap:{line:c}},json:{write:!0}};a.hasCalloutSupport=function(e){return"point-3d"===e.type||"label-3d"===e.type};a.hasVisibleCallout=function(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const n=e.callout;return n&&n.visible?f(e)?!0:!1:!1};a.hasVisibleVerticalOffset=f;a.textSymbolLayerSupportsVerticalOffset=function(e){return"center"===e.horizontalAlignment};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,b,c,f,e,n,d){b=class extends b.JSONSupport{constructor(k){super(k);this.visible=!0}clone(){throw Error("Subclasses of Callout3D should implement their own clone method.");
}};a.__decorate([c.property({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],b.prototype,"type",void 0);a.__decorate([c.property({readOnly:!0})],b.prototype,"visible",void 0);return b=a.__decorate([d.subclass("esri.symbols.callouts.Callout3D")],b)})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){var z;n=z=class extends l{constructor(r){super(r);this.type="line";this.color=new b([0,0,0,1]);this.size=f.px2pt(1);this.border=null}get visible(){return 0<this.size&&null!=this.color&&0<this.color.a}clone(){return new z({color:c.clone(this.color),size:this.size,border:c.clone(this.border)})}};a.__decorate([k.enumeration({line:"line"})],n.prototype,"type",void 0);a.__decorate([e.property(t.colorAndTransparencyProperty)],n.prototype,"color",void 0);a.__decorate([e.property(t.screenSizeProperty)],
n.prototype,"size",void 0);a.__decorate([e.property({type:m,json:{write:!0}})],n.prototype,"border",void 0);a.__decorate([e.property({readOnly:!0})],n.prototype,"visible",null);return n=z=a.__decorate([h.subclass("esri.symbols.callouts.LineCallout3D")],n)})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../support/materialUtils".split(" "),
function(a,b,c,f,e,n,d,k,h){var l;c=l=class extends c.JSONSupport{constructor(m){super(m);this.color=new b("white")}clone(){return new l({color:f.clone(this.color)})}};a.__decorate([e.property(h.colorAndTransparencyProperty)],c.prototype,"color",void 0);return c=l=a.__decorate([k.subclass("esri.symbols.callouts.LineCallout3DBorder")],c)})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./materialUtils".split(" "),
function(a,b,c,f,e,n,d,k){var h;b=h=class extends b.JSONSupport{constructor(l){super(l);this.minWorldLength=this.screenLength=0;this.maxWorldLength=null}clone(){return new h({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};a.__decorate([c.property(k.screenSizeProperty)],b.prototype,"screenLength",void 0);a.__decorate([c.property({type:Number,nonNullable:!0,json:{write:!0,default:0}})],b.prototype,"minWorldLength",void 0);a.__decorate([c.property({type:Number,
json:{write:!0}})],b.prototype,"maxWorldLength",void 0);return b=h=a.__decorate([d.subclass("esri.symbols.support.Symbol3DVerticalOffset")],b)})},"esri/symbols/LineSymbol3D":function(){define("../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){var t;
const z=b.ofType({base:null,key:"type",typeMap:{line:h,path:l}});e=b.ofType({base:null,key:"type",typeMap:{line:h,path:l}});m=t=class extends m{constructor(r){super(r);this.symbolLayers=new z;this.type="line-3d"}clone(){return new t({styleOrigin:c.clone(this.styleOrigin),symbolLayers:c.clone(this.symbolLayers),thumbnail:c.clone(this.thumbnail)})}static fromSimpleLineSymbol(r){return new t({symbolLayers:new b([h.fromSimpleLineSymbol(r)])})}};a.__decorate([f.property({type:z,json:{type:e}})],m.prototype,
"symbolLayers",void 0);a.__decorate([d.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],m.prototype,"type",void 0);return m=t=a.__decorate([k.subclass("esri.symbols.LineSymbol3D")],m)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/tslib.es6 ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./Symbol".split(" "),function(a,b,c,f,e,n,d,k){e=class extends k{constructor(h){super(h);
this.angle=0;this.type=null;this.yoffset=this.xoffset=0;this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};a.__decorate([c.property({type:Number,json:{read:h=>h&&-1*h,write:(h,l)=>l.angle=h&&-1*h}})],e.prototype,"angle",void 0);a.__decorate([c.property({type:["simple-marker","picture-marker"],readOnly:!0})],e.prototype,"type",void 0);a.__decorate([c.property({type:Number,cast:b.toPt,json:{write:!0}})],e.prototype,"xoffset",void 0);a.__decorate([c.property({type:Number,
cast:b.toPt,json:{write:!0}})],e.prototype,"yoffset",void 0);a.__decorate([c.property({cast:h=>"auto"===h?h:f.ensureNumber(b.toPt(h)),json:{write:!0}})],e.prototype,"size",void 0);return e=a.__decorate([d.subclass("esri.symbols.MarkerSymbol")],e)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/tslib.es6 ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(a,b,c,f,e,n,d,k,h,l){var m;const t=b.ofType({base:null,key:"type",typeMap:{fill:h}});e=m=class extends l{constructor(z){super(z);this.symbolLayers=new t;this.type="mesh-3d"}clone(){return new m({styleOrigin:c.clone(this.styleOrigin),symbolLayers:c.clone(this.symbolLayers),thumbnail:c.clone(this.thumbnail)})}static fromSimpleFillSymbol(z){return new m({symbolLayers:new b([h.fromSimpleFillSymbol(z)])})}};a.__decorate([f.property({type:t})],e.prototype,"symbolLayers",void 0);a.__decorate([d.enumeration({MeshSymbol3D:"mesh-3d"},
{readOnly:!0})],e.prototype,"type",void 0);return e=m=a.__decorate([k.subclass("esri.symbols.MeshSymbol3D")],e)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./support/urlUtils".split(" "),function(a,b,c,f,e,n,d,k,h,l){var m;e=m=class extends h{constructor(...t){super(...t);
this.type="picture-fill";this.url=null;this.yscale=this.xscale=1;this.height=this.width=12;this.yoffset=this.xoffset=0;this.source=null}normalizeCtorArgs(t,z,r,v){if(t&&"string"!==typeof t&&null==t.imageData)return t;const w={};t&&(w.url=t);z&&(w.outline=z);null!=r&&(w.width=c.toPt(r));null!=v&&(w.height=c.toPt(v));return w}clone(){const t=new m({color:b.clone(this.color),height:this.height,outline:b.clone(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,
yscale:this.yscale});t._set("source",b.clone(this.source));return t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};a.__decorate([d.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],e.prototype,"type",void 0);a.__decorate([f.property(l.urlPropertyDefinition)],e.prototype,"url",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],e.prototype,"xscale",void 0);a.__decorate([f.property({type:Number,
json:{write:!0}})],e.prototype,"yscale",void 0);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"width",void 0);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"height",void 0);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"xoffset",void 0);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"yoffset",void 0);a.__decorate([f.property(l.sourcePropertyDefinition)],e.prototype,
"source",void 0);return e=m=a.__decorate([k.subclass("esri.symbols.PictureFillSymbol")],e)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(a,b,c){function f(k,h,l){return h.imageData?b.makeData({mediaType:h.contentType||"image/png",isBase64:!0,data:h.imageData}):e(h.url,l)}function e(k,h){if(!b.isAbsolute(k)){if(h){var {origin:l,layer:m}=h;if("service"!==l&&"portal-item"!==l)var t=null;else t=m?.type,t="feature"===
t||"stream"===t?m.parsedUrl?.path:"map-image"===t||"tile"===t?h.url?.path:null}else t=null;if(t)return b.join(t,"images",k)}return c.fromJSON(k,h)}function n(k,h,l,m){if(b.isDataProtocol(k)){if(k=b.dataComponents(k))h.contentType=k.mediaType,h.imageData=k.data,l&&l.imageData===h.imageData&&l.url&&c.write(l.url,h,"url",m)}else c.write(k,h,"url",m)}const d={json:{read:{source:["imageData","url"],reader:f},write:{writer(k,h,l,m){n(k,h,this.source,m)}}}};a.read=e;a.readImageDataOrUrl=f;a.sourcePropertyDefinition=
{readOnly:!0,json:{read:{source:["imageData","url"],reader(k,h,l){k={};h.imageData&&(k.imageData=h.imageData);h.contentType&&(k.contentType=h.contentType);h.url&&(k.url=e(h.url,l));return k}}}};a.urlPropertyDefinition=d;a.writeImageDataAndUrl=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/tslib.es6 ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ./MarkerSymbol ./support/urlUtils".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m){var t;e=t=class extends l{constructor(...z){super(...z);this.color=null;this.type="picture-marker";this.source=this.url=null;this.width=this.height=12;this.size=null}normalizeCtorArgs(z,r,v){if(z&&"string"!==typeof z&&null==z.imageData)return z;const w={};z&&(w.url=z);null!=r&&(w.width=c.toPt(r));null!=v&&(w.height=c.toPt(v));return w}readHeight(z,r){return r.size||z}readWidth(z,r){return r.size||z}clone(){const z=new t({angle:this.angle,height:this.height,url:this.url,
width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});z._set("source",b.clone(this.source));return z}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};a.__decorate([f.property({json:{write:!1}})],e.prototype,"color",void 0);a.__decorate([d.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],e.prototype,"type",void 0);a.__decorate([f.property(m.urlPropertyDefinition)],e.prototype,"url",void 0);a.__decorate([f.property(m.sourcePropertyDefinition)],e.prototype,"source",
void 0);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"height",void 0);a.__decorate([k.reader("height",["height","size"])],e.prototype,"readHeight",null);a.__decorate([f.property({type:Number,cast:c.toPt,json:{write:!0}})],e.prototype,"width",void 0);a.__decorate([f.property({json:{write:!1}})],e.prototype,"size",void 0);return e=t=a.__decorate([h.subclass("esri.symbols.PictureMarkerSymbol")],e)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/tslib.es6 ../Color ../core/Collection ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./callouts/LineCallout3D ./support/Symbol3DVerticalOffset".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w){var q;const g=c.ofType({base:null,key:"type",typeMap:{icon:l,object:m,text:z}});n=q=class extends t{constructor(p){super(p);this.callout=this.verticalOffset=null;this.symbolLayers=new g;this.type="point-3d"}supportsCallout(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const p of this.symbolLayers.items)switch(p.type){case "icon":case "text":case "object":continue;default:return!1}return!0}hasVisibleCallout(){return r.hasVisibleCallout(this)}hasVisibleVerticalOffset(){return r.hasVisibleVerticalOffset(this)}clone(){return new q({verticalOffset:f.clone(this.verticalOffset),
callout:f.clone(this.callout),styleOrigin:f.clone(this.styleOrigin),symbolLayers:f.clone(this.symbolLayers),thumbnail:f.clone(this.thumbnail)})}static fromSimpleMarkerSymbol(p){return new q({symbolLayers:new c([l.fromSimpleMarkerSymbol(p)])})}static fromPictureMarkerSymbol(p){return new q({symbolLayers:new c([l.fromPictureMarkerSymbol(p)])})}static fromCIMSymbol(p){return"CIMPointSymbol"!==p.data?.symbol?.type?null:p.data.symbol?.callout?new q({symbolLayers:new c([l.fromCIMSymbol(p)]),callout:new v({size:.5,
color:new b([0,0,0])}),verticalOffset:new w({screenLength:40})}):new q({symbolLayers:new c([l.fromCIMSymbol(p)])})}static fromTextSymbol(p){return new q({symbolLayers:new c([z.fromTextSymbol(p)])})}};a.__decorate([e.property({type:w,json:{write:!0}})],n.prototype,"verticalOffset",void 0);a.__decorate([e.property(r.calloutProperty)],n.prototype,"callout",void 0);a.__decorate([e.property({type:g,json:{origins:{"web-scene":{write:!0}}}})],n.prototype,"symbolLayers",void 0);a.__decorate([k.enumeration({PointSymbol3D:"point-3d"},
{readOnly:!0})],n.prototype,"type",void 0);return n=q=a.__decorate([h.subclass("esri.symbols.PointSymbol3D")],n)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/tslib.es6 ../core/Collection ../core/deprecate ../core/lang ../core/Logger ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g){var p;const x=b.ofType({base:null,key:"type",typeMap:{extrude:m,fill:t,icon:z,line:r,object:v,text:q,water:g}});k=p=class extends w{constructor(u){super(u);this.symbolLayers=new x;this.type="polygon-3d"}initialize(){const u=D=>{"line"===D.type&&c.deprecated(e.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"});"text"===D.type&&
c.deprecated(e.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const D of this.symbolLayers)u(D);this.addHandles(n.on(()=>this.symbolLayers,"after-add",({item:D})=>u(D),n.sync))}clone(){return new p({styleOrigin:f.clone(this.styleOrigin),symbolLayers:f.clone(this.symbolLayers),thumbnail:f.clone(this.thumbnail)})}static fromJSON(u){const D=new p;D.read(u);if(2===D.symbolLayers.length&&
"fill"===D.symbolLayers.at(0).type&&"line"===D.symbolLayers.at(1).type){const J=D.symbolLayers.at(0),E=D.symbolLayers.at(1);!E.enabled||u.symbolLayers?.[1]&&!1===u.symbolLayers[1].enable||(J.outline={size:E.size,color:null!=E.material?E.material.color:null});D.symbolLayers.removeAt(1)}return D}static fromSimpleFillSymbol(u){return new p({symbolLayers:new b([t.fromSimpleFillSymbol(u)])})}};a.__decorate([d.property({type:x,json:{write:!0}})],k.prototype,"symbolLayers",void 0);a.__decorate([h.enumeration({PolygonSymbol3D:"polygon-3d"},
{readOnly:!0})],k.prototype,"type",void 0);return k=p=a.__decorate([l.subclass("esri.symbols.PolygonSymbol3D")],k)})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./FillSymbol ./SimpleLineSymbol".split(" "),function(a,b,c,f,e,n,d,k,h,l,m){var t;c=new c.JSONMap({esriSFSSolid:"solid",
esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});l=t=class extends l{constructor(...z){super(...z);this.color=new b([0,0,0,.25]);this.outline=new m;this.type="simple-fill";this.style="solid"}normalizeCtorArgs(z,r,v){if(z&&"string"!==typeof z)return z;const w={};z&&(w.style=z);r&&(w.outline=r);v&&(w.color=v);return w}clone(){return new t({color:f.clone(this.color),
outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};a.__decorate([e.property()],l.prototype,"color",void 0);a.__decorate([e.property()],l.prototype,"outline",void 0);a.__decorate([k.enumeration({esriSFS:"simple-fill"},{readOnly:!0})],l.prototype,"type",void 0);a.__decorate([e.property({type:c.apiValues,json:{read:c.read,write:c.write}})],l.prototype,"style",void 0);return l=t=a.__decorate([h.subclass("esri.symbols.SimpleFillSymbol")],
l)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/tslib.es6 ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t,z){var r;c=new c.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",
esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});t=r=class extends t{constructor(...v){super(...v);this.color=new b([255,255,255,.25]);this.type="simple-marker";this.size=12;this.style="circle";this.outline=new z}normalizeCtorArgs(v,w,q,g){if(v&&"string"!==typeof v)return v;const p={};v&&(p.style=v);null!=w&&(p.size=e.toPt(w));q&&(p.outline=q);g&&(p.color=g);return p}writeColor(v,w){v&&"x"!==this.style&&"cross"!==this.style&&(w.color=v.toJSON());null===v&&(w.color=
null)}set path(v){this.style="path";this._set("path",v)}clone(){return new r({angle:this.angle,color:f.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};a.__decorate([n.property()],t.prototype,"color",void 0);a.__decorate([m.writer("color")],t.prototype,"writeColor",null);a.__decorate([h.enumeration({esriSMS:"simple-marker"},
{readOnly:!0})],t.prototype,"type",void 0);a.__decorate([n.property()],t.prototype,"size",void 0);a.__decorate([n.property({type:c.apiValues,json:{read:c.read,write:c.write}})],t.prototype,"style",void 0);a.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"path",null);a.__decorate([n.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":z}},json:{default:null,write:!0}})],t.prototype,"outline",void 0);return t=r=a.__decorate([l.subclass("esri.symbols.SimpleMarkerSymbol")],
t)})},"esri/symbols/TextSymbol":function(){define("../chunks/tslib.es6 ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Font ./Symbol ./support/textUtils".split(" "),function(a,b,c,f,e,n,d,k,h,l,m,t){var z;m=z=class extends m{constructor(...r){super(...r);this.borderLineSize=this.borderLineColor=
this.backgroundColor=null;this.font=new l;this.horizontalAlignment="center";this.kerning=!0;this.rightToLeft=this.haloSize=this.haloColor=null;this.rotated=!1;this.text="";this.type="text";this.verticalAlignment="baseline";this.angle=this.yoffset=this.xoffset=0;this.width=null;this.lineWidth=192;this.lineHeight=1}normalizeCtorArgs(r,v,w){if(r&&"string"!==typeof r)return r;const q={};r&&(q.text=r);v&&(q.font=v);w&&(q.color=w);return q}writeLineWidth(r,v,w,q){q&&"string"!==typeof q||(v[w]=r)}castLineWidth(r){return f.toPt(r)}writeLineHeight(r,
v,w,q){q&&"string"!==typeof q||(v[w]=r)}clone(){return new z({angle:this.angle,backgroundColor:c.clone(this.backgroundColor),borderLineColor:c.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:c.clone(this.color),font:this.font&&this.font.clone(),haloColor:c.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,
verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};
a.__decorate([e.property({type:b,json:{write:!0}})],m.prototype,"backgroundColor",void 0);a.__decorate([e.property({type:b,json:{write:!0}})],m.prototype,"borderLineColor",void 0);a.__decorate([e.property({type:Number,json:{write:!0},cast:f.toPt})],m.prototype,"borderLineSize",void 0);a.__decorate([e.property({type:l,json:{write:!0}})],m.prototype,"font",void 0);a.__decorate([e.property({...t.horizontalAlignmentProperty,json:{write:!0}})],m.prototype,"horizontalAlignment",void 0);a.__decorate([e.property({type:Boolean,
json:{write:!0}})],m.prototype,"kerning",void 0);a.__decorate([e.property({type:b,json:{write:!0}})],m.prototype,"haloColor",void 0);a.__decorate([e.property({type:Number,cast:f.toPt,json:{write:!0}})],m.prototype,"haloSize",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],m.prototype,"rightToLeft",void 0);a.__decorate([e.property({type:Boolean,json:{write:!0}})],m.prototype,"rotated",void 0);a.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);a.__decorate([d.enumeration({esriTS:"text"},
{readOnly:!0})],m.prototype,"type",void 0);a.__decorate([e.property({...t.verticalAlignmentProperty,json:{write:!0}})],m.prototype,"verticalAlignment",void 0);a.__decorate([e.property({type:Number,cast:f.toPt,json:{write:!0}})],m.prototype,"xoffset",void 0);a.__decorate([e.property({type:Number,cast:f.toPt,json:{write:!0}})],m.prototype,"yoffset",void 0);a.__decorate([e.property({type:Number,json:{read:r=>r&&-1*r,write:(r,v)=>v.angle=r&&-1*r}})],m.prototype,"angle",void 0);a.__decorate([e.property({type:Number,
json:{write:!0}})],m.prototype,"width",void 0);a.__decorate([e.property({type:Number})],m.prototype,"lineWidth",void 0);a.__decorate([h.writer("lineWidth")],m.prototype,"writeLineWidth",null);a.__decorate([n.cast("lineWidth")],m.prototype,"castLineWidth",null);a.__decorate([e.property(t.lineHeightProperty)],m.prototype,"lineHeight",void 0);a.__decorate([h.writer("lineHeight")],m.prototype,"writeLineHeight",null);return m=z=a.__decorate([k.subclass("esri.symbols.TextSymbol")],m)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/tslib.es6 ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../portal/Portal ../chunks/persistableUrlUtils ./Symbol ./support/Thumbnail".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z){var r;n=r=class extends t{constructor(v){super(v);this.name=this.thumbnail=this.styleUrl=this.portal=this.styleName=this.color=null;this.type="web-style"}get _fetchCacheKey(){const v=null!=this.portal?this.portal:l.getDefault();return`${this.styleName}:${this.styleUrl}:${this.name}:${v.user?v.user.username:null}:${v.url}`}read(v,w){this.portal=w?.portal;super.read(v,w)}clone(){return new r({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(v){return this._fetchSymbol("webRef",
v)}fetchCIMSymbol(v){return this._fetchSymbol("cimRef",v)}async _fetchSymbol(v,w){const q=null!=w?w.cache:null,g=q?this._fetchCacheKey:null;if(null!=q){var p=g&&q.get(g);if(p)return p.clone()}({resolveWebStyleSymbol:p}=await new Promise((x,u)=>a(["./support/webStyleSymbolUtils"],x,u)));f.throwIfAborted(w);w=p(this,{portal:this.portal},v,w);w.catch(x=>{c.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",x)});w=await w;if(!("webRef"===v&&"point-3d"===w.type||"cimRef"===v&&
"cim"===w.type))return null;null!=q&&q.set(g,w.clone());return w}};b.__decorate([e.property({json:{write:!1}})],n.prototype,"color",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],n.prototype,"styleName",void 0);b.__decorate([e.property({type:l,json:{write:!1}})],n.prototype,"portal",void 0);b.__decorate([e.property({type:String,json:{read:m.read,write:m.write}})],n.prototype,"styleUrl",void 0);b.__decorate([e.property({type:z.Thumbnail,json:{read:!1}})],n.prototype,"thumbnail",void 0);
b.__decorate([e.property({type:String,json:{write:!0}})],n.prototype,"name",void 0);b.__decorate([k.enumeration({styleSymbolReference:"web-style"},{readOnly:!0})],n.prototype,"type",void 0);b.__decorate([e.property()],n.prototype,"_fetchCacheKey",null);return n=r=b.__decorate([h.subclass("esri.symbols.WebStyleSymbol")],n)})},"esri/views/3d/layers/graphics/pipeline/symbolization/primitiveObjectUtils":function(){define("exports ../../../../../../core/has ./symbolizationUtils ../../../../webgl-engine/lib/AttributeArray ../../../../webgl-engine/lib/GeometryUtil ../../../../webgl-engine/lib/VertexAttribute".split(" "),
function(a,b,c,f,e,n){function d(l){const m=l.get(n.VertexAttribute.POSITION).data;var t=l.get(n.VertexAttribute.NORMAL).data;if(t){var z=k(l,n.VertexAttribute.NORMAL).data;for(let r=0;r<t.length;r+=3){const v=t[r+1];z[r+1]=-t[r+2];z[r+2]=v}}if(m)for(l=k(l,n.VertexAttribute.POSITION).data,t=0;t<m.length;t+=3)z=m[t+1],l[t+1]=-m[t+2],l[t+2]=z}function k(l,m){let t=l.get(m);t&&!t.exclusive&&(t={...t,exclusive:!0,data:f.cloneAttributeData(t.data)},l.set(m,t));return t}const h=[{tesselation:6,minScreenSpaceRadius:0},
{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];a.convertCoordinatesToZUp=d;a.createPrimitiveGeometry=function(l,m){const t=(z,r,v=!1)=>({levels:z.map(w=>{const q=c.inputAttributesToAttributesMap(r(w.tesselation));v&&d(q);return{components:[{attributes:q,objectAndLayerIdColor:void 0,transformation:null,materialId:m}],minScreenSpaceRadius:w.minScreenSpaceRadius}})});switch(l){case "cone":return t(h,z=>e.createConeGeometryData(1,.5,z,!1),!0);case "sphere":case "cube":case "inverted-cone":case "cylinder":case "tetrahedron":case "diamond":throw Error("not implemented");
}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/symbolization/symbolizationUtils":function(){define(["exports","../../../../../../geometry/support/Indices"],function(a,b){a.attributesMapToInputAttributes=function(c){const f=[];for(const [e,n]of c)f.push([e,n]);return f};a.inputAttributesToAttributesMap=function(c){const f=new Map;for(const [e,n]of c)f.set(e,{...n,indices:b.compactIndices(n.indices)});return f};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/lib/AttributeArray":function(){define(["exports","../../../../core/typedArrayUtil"],function(a,b){a.cloneAttributeData=function(c){if(c.length<b.nativeArrayMaxSize)return Array.from(c);if(b.isArray(c))return Float64Array.from(c);if(!("BYTES_PER_ELEMENT"in c))return Array.from(c);switch(c.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(c);case 2:return b.isUint16Array(c)?Uint16Array.from(c):Int16Array.from(c);case 4:return Float32Array.from(c);default:case 8:return Float64Array.from(c)}};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/support/DoubleArray ../../../../geometry/support/FloatArray ../../../../geometry/support/Indices ../../../../geometry/support/plane ../../../../geometry/support/ray ./Attribute ./BufferVectorMath ./ContentObjectType ./Geometry ./Util ./VertexAttribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v){function w(pa,Y,R){function ia(ba,na){ba>na&&([ba,na]=[na,ba]);const P=ba.toString()+"."+na.toString();if(O[P])return O[P];let W=A.length;A.length+=3;u.add(A,3*ba,A,3*na,A,W);u.scale(A,W,pa/u.length(A,W));W/=3;return O[P]=W}let A;R?(A=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],R=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1]):(R=pa*(1+Math.sqrt(5))/2,A=[-pa,R,0,pa,R,0,-pa,-R,0,pa,-R,0,0,-pa,R,0,pa,R,0,-pa,-R,0,pa,-R,R,0,-pa,R,0,pa,-R,0,-pa,-R,0,pa],R=[0,11,
5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]);for(var F=0;F<A.length;F+=3)u.scale(A,F,pa/u.length(A,F));let O={};for(F=0;F<Y;F++){const ba=R.length,na=Array(4*ba);for(let P=0;P<ba;P+=3){const W=R[P],ea=R[P+1],ra=R[P+2],ja=ia(W,ea),oa=ia(ea,ra),qa=ia(ra,W),sa=4*P;na[sa]=W;na[sa+1]=ja;na[sa+2]=qa;na[sa+3]=ea;na[sa+4]=oa;na[sa+5]=ja;na[sa+6]=ra;na[sa+7]=qa;na[sa+8]=oa;na[sa+9]=ja;na[sa+10]=oa;na[sa+11]=qa}R=na;O={}}Y=n.floatArrayFrom(A);
for(F=0;F<Y.length;F+=3)u.normalize(Y,F);return[[v.VertexAttribute.POSITION,new l.Attribute(n.floatArrayFrom(A),R,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(Y,R,3,!0)]]}function q(pa,Y,R,ia,A=!0,F=!0){let O=0;var ba=c.fromValues(0,O,0),na=c.fromValues(0,O+pa,0),P=c.fromValues(0,-1,0),W=c.fromValues(0,1,0);ia&&(O=pa,na=c.fromValues(0,0,0),ba=c.fromValues(0,O,0),P=c.fromValues(0,1,0),W=c.fromValues(0,-1,0));ba=[na,ba];P=[P,W];W=R+2;na=Math.sqrt(pa*pa+Y*Y);if(ia)for(ia=R-1;0<=ia;ia--){var ea=2*
Math.PI/R*ia,ra=c.fromValues(Math.cos(ea)*Y,O,Math.sin(ea)*Y);ba.push(ra);ea=c.fromValues(pa*Math.cos(ea)/na,-Y/na,pa*Math.sin(ea)/na);P.push(ea)}else for(ia=0;ia<R;ia++)ea=2*Math.PI/R*ia,ra=c.fromValues(Math.cos(ea)*Y,O,Math.sin(ea)*Y),ba.push(ra),ea=c.fromValues(pa*Math.cos(ea)/na,Y/na,pa*Math.sin(ea)/na),P.push(ea);pa=[];Y=[];if(A){for(A=3;A<ba.length;A++)pa.push(1),pa.push(A-1),pa.push(A),Y.push(0),Y.push(0),Y.push(0);pa.push(ba.length-1);pa.push(2);pa.push(1);Y.push(0);Y.push(0);Y.push(0)}if(F){for(F=
3;F<ba.length;F++)pa.push(F),pa.push(F-1),pa.push(0),Y.push(F),Y.push(F-1),Y.push(1);pa.push(0);pa.push(2);pa.push(ba.length-1);Y.push(1);Y.push(2);Y.push(P.length-1)}F=n.newFloatArray(3*W);for(A=0;A<W;A++)F[3*A]=ba[A][0],F[3*A+1]=ba[A][1],F[3*A+2]=ba[A][2];ba=n.newFloatArray(3*W);for(A=0;A<W;A++)ba[3*A]=P[A][0],ba[3*A+1]=P[A][1],ba[3*A+2]=P[A][2];return[[v.VertexAttribute.POSITION,new l.Attribute(F,pa,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(ba,Y,3,!0)]]}function g(pa,Y,R,ia,A,F,O=c.fromValues(0,
0,0)){var ba=Y.length;const na=n.newFloatArray(R.length*ba*3+(6*ia.length||0)),P=n.newFloatArray(R.length*ba*3+(ia?6:0)),W=[],ea=[];let ra=0;var ja=0;const oa=f.create(),qa=f.create(),sa=f.create(),ua=f.create(),ya=f.create(),wa=f.create(),Aa=f.create(),Ca=f.create(),Ea=f.create(),Da=f.create(),Ia=f.create(),Ha=f.create(),Ja=f.create(),Na=k.create();b.set(Ea,0,1,0);b.subtract(qa,R[1],R[0]);b.normalize(qa,qa);F?(b.add(Ca,R[0],O),b.normalize(sa,Ca)):b.set(sa,0,0,1);x(qa,sa,Ea,Ea,ya,sa,.99619469809);
b.copy(ua,sa);b.copy(Ha,ya);for(var La=0;La<ia.length;La++)b.scale(wa,ya,ia[La][0]),b.scale(Ca,sa,ia[La][2]),b.add(wa,wa,Ca),b.add(wa,wa,R[0]),na[ra++]=wa[0],na[ra++]=wa[1],na[ra++]=wa[2];P[ja++]=-qa[0];P[ja++]=-qa[1];P[ja++]=-qa[2];for(La=0;La<A.length;La++)W.push(0<A[La][0]?A[La][0]:-A[La][0]-1+ia.length),W.push(0<A[La][1]?A[La][1]:-A[La][1]-1+ia.length),W.push(0<A[La][2]?A[La][2]:-A[La][2]-1+ia.length),ea.push(0),ea.push(0),ea.push(0);La=ia.length;const $a=ia.length-1;for(let Ma=0;Ma<R.length;Ma++){let Ka=
!1;0<Ma&&(b.copy(oa,qa),Ma<R.length-1?(b.subtract(qa,R[Ma+1],R[Ma]),b.normalize(qa,qa)):Ka=!0,b.add(Da,oa,qa),b.normalize(Da,Da),b.add(Ia,R[Ma-1],ua),k.fromPositionAndNormal(R[Ma],Da,Na),k.intersectRay(Na,h.wrap(Ia,oa),Ca)?(b.subtract(Ca,Ca,R[Ma]),b.normalize(sa,Ca),b.cross(ya,Da,sa),b.normalize(ya,ya)):x(Da,ua,Ha,Ea,ya,sa,.99619469809),b.copy(ua,sa),b.copy(Ha,ya));F&&(b.add(Ca,R[Ma],O),b.normalize(Ja,Ca));for(let xa=0;xa<ba;xa++)if(b.scale(wa,ya,Y[xa][0]),b.scale(Ca,sa,Y[xa][1]),b.add(wa,wa,Ca),
b.normalize(Aa,wa),P[ja++]=Aa[0],P[ja++]=Aa[1],P[ja++]=Aa[2],b.add(wa,wa,R[Ma]),na[ra++]=wa[0],na[ra++]=wa[1],na[ra++]=wa[2],!Ka){var Oa=(xa+1)%ba;W.push(La+xa);W.push(La+ba+xa);W.push(La+Oa);W.push(La+Oa);W.push(La+ba+xa);W.push(La+ba+Oa);for(Oa=0;6>Oa;Oa++)ea.push(W[W.length-6+Oa]-$a)}La+=ba}Y=R[R.length-1];for(R=0;R<ia.length;R++)b.scale(wa,ya,ia[R][0]),b.scale(Ca,sa,ia[R][1]),b.add(wa,wa,Ca),b.add(wa,wa,Y),na[ra++]=wa[0],na[ra++]=wa[1],na[ra++]=wa[2];ia=ja/3;P[ja++]=qa[0];P[ja++]=qa[1];P[ja++]=
qa[2];ba=La-ba;for(ja=0;ja<A.length;ja++)W.push(0<=A[ja][0]?La+A[ja][0]:-A[ja][0]-1+ba),W.push(0<=A[ja][2]?La+A[ja][2]:-A[ja][2]-1+ba),W.push(0<=A[ja][1]?La+A[ja][1]:-A[ja][1]-1+ba),ea.push(ia),ea.push(ia),ea.push(ia);A=[[v.VertexAttribute.POSITION,new l.Attribute(na,W,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(P,ea,3,!0)]];return new z.Geometry(pa,A)}function p(pa,Y,R,ia,A){if(Math.abs(b.dot(Y,pa))>A)return!1;b.cross(R,pa,Y);b.normalize(R,R);b.cross(ia,R,pa);b.normalize(ia,ia);return!0}function x(pa,
Y,R,ia,A,F,O){return p(pa,Y,A,F,O)||p(pa,R,A,F,O)||p(pa,ia,A,F,O)}const u=m.Vec3Compact,D=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],J=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],E=[0,0,1,0,1,1,0,1],L=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Q=Array(36);for(m=0;6>m;m++)for(var M=0;6>M;M++)Q[6*m+M]=m;const C=Array(36);for(m=0;6>m;m++)C[6*m]=0,C[6*m+1]=1,C[6*m+2]=2,C[6*m+3]=2,C[6*m+4]=3,C[6*m+5]=0;const U=[[-.5,
0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],y=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],B=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],H=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];m=c.fromValues(-.5,0,-.5);M=c.fromValues(.5,0,-.5);const N=c.fromValues(0,0,.5),K=c.fromValues(0,.5,0),X=c.create(),V=c.create(),da=c.create(),aa=c.create(),fa=c.create();b.subtract(X,m,K);b.subtract(V,m,M);b.cross(da,X,V);b.normalize(da,da);b.subtract(X,M,K);b.subtract(V,M,N);
b.cross(aa,X,V);b.normalize(aa,aa);b.subtract(X,N,K);b.subtract(V,N,m);b.cross(fa,X,V);b.normalize(fa,fa);const Z=[m,M,N,K],ma=[0,-1,0,da[0],da[1],da[2],aa[0],aa[1],aa[2],fa[0],fa[1],fa[2]],S=[0,1,2,3,1,0,3,2,1,3,0,2],ha=[0,0,0,1,1,1,2,2,2,3,3,3],G=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],ca=f.create();a.cgToGIS=function(pa,Y=pa){var R=pa.attributes;pa=R.get(v.VertexAttribute.POSITION).data;if(R=R.get(v.VertexAttribute.NORMAL).data){var ia=Y.getMutableAttribute(v.VertexAttribute.NORMAL).data;for(let A=
0;A<R.length;A+=3){const F=R[A+1];ia[A+1]=-R[A+2];ia[A+2]=F}}if(pa)for(Y=Y.getMutableAttribute(v.VertexAttribute.POSITION).data,R=0;R<pa.length;R+=3)ia=pa[R+1],Y[R+1]=-pa[R+2],Y[R+2]=ia};a.createBoxGeometry=function(pa,Y){Array.isArray(Y)||(Y=[Y,Y,Y]);const R=Array(24);for(let ia=0;8>ia;ia++)R[3*ia]=D[ia][0]*Y[0],R[3*ia+1]=D[ia][1]*Y[1],R[3*ia+2]=D[ia][2]*Y[2];return new z.Geometry(pa,[[v.VertexAttribute.POSITION,new l.Attribute(R,L,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(J,Q,3)],[v.VertexAttribute.UV0,
new l.Attribute(E,C,2)]])};a.createConeGeometry=function(pa,Y,R,ia,A,F=!0,O=!0){return new z.Geometry(pa,q(Y,R,ia,A,F,O))};a.createConeGeometryData=q;a.createCylinderGeometry=function(pa,Y,R,ia,A,F,O){A=A?c.clone(A):c.fromValues(1,0,0);F=F?c.clone(F):c.fromValues(0,0,0);O??=!0;var ba=c.create();b.normalize(ba,A);var na=c.create();b.scale(na,ba,Math.abs(Y));var P=c.create();b.scale(P,na,-.5);b.add(P,P,F);const W=c.fromValues(0,1,0);.2>Math.abs(1-b.dot(ba,W))&&b.set(W,0,0,1);const ea=c.create();b.cross(ea,
ba,W);b.normalize(ea,ea);b.cross(W,ea,ba);Y=2*ia+(O?2:0);F=ia+(O?2:0);A=n.newFloatArray(3*Y);const ra=n.newFloatArray(3*F),ja=n.newFloatArray(2*Y),oa=Array(3*ia*(O?4:2)),qa=Array(3*ia*(O?4:2));O&&(A[3*(Y-2)]=P[0],A[3*(Y-2)+1]=P[1],A[3*(Y-2)+2]=P[2],ja[2*(Y-2)]=0,ja[2*(Y-2)+1]=0,A[3*(Y-1)]=A[3*(Y-2)]+na[0],A[3*(Y-1)+1]=A[3*(Y-2)+1]+na[1],A[3*(Y-1)+2]=A[3*(Y-2)+2]+na[2],ja[2*(Y-1)]=1,ja[2*(Y-1)+1]=1,ra[3*(F-2)]=-ba[0],ra[3*(F-2)+1]=-ba[1],ra[3*(F-2)+2]=-ba[2],ra[3*(F-1)]=ba[0],ra[3*(F-1)+1]=ba[1],ra[3*
(F-1)+2]=ba[2]);ba=0;const sa=c.create(),ua=c.create();for(let Ca=0;Ca<ia;Ca++){var ya=2*Math.PI/ia*Ca;b.scale(sa,W,Math.sin(ya));b.scale(ua,ea,Math.cos(ya));b.add(sa,sa,ua);ra[3*Ca]=sa[0];ra[3*Ca+1]=sa[1];ra[3*Ca+2]=sa[2];b.scale(sa,sa,R);b.add(sa,sa,P);A[3*Ca]=sa[0];A[3*Ca+1]=sa[1];A[3*Ca+2]=sa[2];ja[2*Ca]=Ca/ia;ja[2*Ca+1]=0;A[3*(Ca+ia)]=A[3*Ca]+na[0];A[3*(Ca+ia)+1]=A[3*Ca+1]+na[1];A[3*(Ca+ia)+2]=A[3*Ca+2]+na[2];ja[2*(Ca+ia)]=Ca/ia;ja[2*Ca+1]=1;ya=(Ca+1)%ia;var wa=ba++,Aa=Ca;oa[wa]=Ca;qa[wa]=Aa;
wa=ba++;Aa=Ca;oa[wa]=Ca+ia;qa[wa]=Aa;wa=ba++;Aa=ya;oa[wa]=ya;qa[wa]=Aa;wa=ba++;Aa=ya;oa[wa]=ya;qa[wa]=Aa;wa=ba++;Aa=Ca;oa[wa]=Ca+ia;qa[wa]=Aa;wa=ba++;Aa=ya;oa[wa]=ya+ia;qa[wa]=Aa}if(O){for(R=0;R<ia;R++)O=(R+1)%ia,na=ba++,P=F-2,oa[na]=Y-2,qa[na]=P,na=ba++,P=F-2,oa[na]=R,qa[na]=P,na=ba++,P=F-2,oa[na]=O,qa[na]=P;for(R=0;R<ia;R++)O=(R+1)%ia,na=ba++,P=F-1,oa[na]=R+ia,qa[na]=P,na=ba++,P=F-1,oa[na]=Y-1,qa[na]=P,na=ba++,P=F-1,oa[na]=O+ia,qa[na]=P}ia=[[v.VertexAttribute.POSITION,new l.Attribute(A,oa,3,!0)],
[v.VertexAttribute.NORMAL,new l.Attribute(ra,qa,3,!0)],[v.VertexAttribute.UV0,new l.Attribute(ja,oa,2,!0)]];return new z.Geometry(pa,ia)};a.createDiamondGeometry=function(pa,Y){Array.isArray(Y)||(Y=[Y,Y,Y]);const R=Array(18);for(let ia=0;6>ia;ia++)R[3*ia]=U[ia][0]*Y[0],R[3*ia+1]=U[ia][1]*Y[1],R[3*ia+2]=U[ia][2]*Y[2];return new z.Geometry(pa,[[v.VertexAttribute.POSITION,new l.Attribute(R,B,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(y,H,3)]])};a.createExtrudedTriangle=function(pa,Y,R,ia,A,F=0){const O=
Array(18);Y=[[-R,F,A/2],[ia,F,A/2],[0,Y+F,A/2],[-R,F,-A/2],[ia,F,-A/2],[0,Y+F,-A/2]];for(R=0;6>R;R++)O[3*R]=Y[R][0],O[3*R+1]=Y[R][1],O[3*R+2]=Y[R][2];return new z.Geometry(pa,[[v.VertexAttribute.POSITION,new l.Attribute(O,[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5],3,!0)]])};a.createPathExtrusionGeometry=g;a.createPointGeometry=function(pa,Y,R,ia,A,F,O,ba,na,P=null){R=R?f.clone(R):f.create();Y=Y?f.clone(Y):f.fromValues(0,0,1);ia=ia?[255*ia[0],255*ia[1],255*ia[2],3<ia.length?255*ia[3]:255]:[255,
255,255,255];F=null!=F&&2===F.length?F:[1,1];const W=null!=A?[A]:[0];A=d.getZeroIndexArray(1);R=[[v.VertexAttribute.POSITION,new l.Attribute(R,A,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(Y,A,3,!0)],[v.VertexAttribute.COLOR,new l.Attribute(ia,A,4,!0)],[v.VertexAttribute.SIZE,new l.Attribute(F,A,2)],[v.VertexAttribute.ROTATION,new l.Attribute(W,A,1,!0)]];ba&&R.push([v.VertexAttribute.UV0,new l.Attribute(ba,A,ba.length)]);null!=O&&(O=[O[0],O[1],O[2],O[3]],R.push([v.VertexAttribute.CENTEROFFSETANDDISTANCE,
new l.Attribute(O,A,4)]));na&&R.push([v.VertexAttribute.FEATUREATTRIBUTE,new l.Attribute([na[0],na[1],na[2],na[3]],A,4)]);return new z.Geometry(pa,R,null,t.ContentObjectType.Point,P)};a.createPolySphereData=w;a.createPolySphereGeometry=function(pa,Y,R,ia){Y=w(Y,R,ia);return new z.Geometry(pa,Y)};a.createPolylineGeometry=function(pa,Y,R,ia){r.assert(1<Y.length,"createPolylineGeometry(): polyline needs at least 2 points");r.assert(3===Y[0].length,"createPolylineGeometry(): malformed vertex");r.assert(null==
R||R.length===Y.length,"createPolylineGeometry: need same number of points and normals");r.assert(null==R||3===R[0].length,"createPolylineGeometry(): malformed normal");var A=e.newDoubleArray(3*Y.length);const F=Array(2*(Y.length-1));var O=0,ba=0;for(var na=0;na<Y.length;na++){for(var P=0;3>P;P++)A[O++]=Y[na][P];0<na&&(F[ba++]=na-1,F[ba++]=na)}A=[[v.VertexAttribute.POSITION,new l.Attribute(A,F,3,!0)]];if(R){O=n.newFloatArray(3*R.length);ba=0;for(na=0;na<Y.length;na++)for(P=0;3>P;P++)O[ba++]=R[na][P];
A.push([v.VertexAttribute.NORMAL,new l.Attribute(O,F,3,!0)])}ia&&A.push([v.VertexAttribute.COLOR,new l.Attribute(ia,d.getContinuousIndexArray(ia.length/4),4)]);return new z.Geometry(pa,A,null,t.ContentObjectType.Line)};a.createSphereGeometry=function(pa,Y,R,ia,A={uv:!0}){var F=-Math.PI,O=2*Math.PI,ba=-Math.PI/2,na=Math.PI;R=Math.max(3,Math.floor(R));ia=Math.max(2,Math.floor(ia));var P=(R+1)*(ia+1);const W=n.newFloatArray(3*P),ea=n.newFloatArray(3*P);P=n.newFloatArray(2*P);const ra=[];var ja=0;for(var oa=
0;oa<=ia;oa++){const sa=[],ua=oa/ia,ya=ba+ua*na,wa=Math.cos(ya);for(let Aa=0;Aa<=R;Aa++){const Ca=Aa/R;var qa=F+Ca*O;const Ea=Math.cos(qa)*wa,Da=Math.sin(ya);qa=-Math.sin(qa)*wa;W[3*ja]=Ea*Y;W[3*ja+1]=Da*Y;W[3*ja+2]=qa*Y;ea[3*ja]=Ea;ea[3*ja+1]=Da;ea[3*ja+2]=qa;P[2*ja]=Ca;P[2*ja+1]=ua;sa.push(ja);++ja}ra.push(sa)}Y=[];for(F=0;F<ia;F++)for(O=0;O<R;O++)ba=ra[F][O],na=ra[F][O+1],ja=ra[F+1][O+1],oa=ra[F+1][O],0===F?(Y.push(ba),Y.push(ja),Y.push(oa)):F===ia-1?(Y.push(ba),Y.push(na),Y.push(ja)):(Y.push(ba),
Y.push(na),Y.push(ja),Y.push(ja),Y.push(oa),Y.push(ba));R=[[v.VertexAttribute.POSITION,new l.Attribute(W,Y,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(ea,Y,3,!0)]];A.uv&&R.push([v.VertexAttribute.UV0,new l.Attribute(P,Y,2,!0)]);A.offset&&(R[0][0]=v.VertexAttribute.OFFSET,R.push([v.VertexAttribute.POSITION,new l.Attribute(Float64Array.from(A.offset),d.getZeroIndexArray(Y.length),3,!0)]));return new z.Geometry(pa,R)};a.createSquareGeometry=function(pa,Y=G){var R=Array(12);for(var ia=0;4>ia;ia++)for(let A=
0;3>A;A++)R[3*ia+A]=Y[ia][A];Y=[0,1,2,2,3,0];ia=[0,0,0,0,0,0];R=[[v.VertexAttribute.POSITION,new l.Attribute(R,Y,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute([0,0,1],ia,3,!0)],[v.VertexAttribute.UV0,new l.Attribute([0,0,1,0,1,1,0,1],Y,2,!0)],[v.VertexAttribute.COLOR,new l.Attribute([255,255,255,255],ia,4,!0)]];return new z.Geometry(pa,R)};a.createTetrahedronGeometry=function(pa,Y){Array.isArray(Y)||(Y=[Y,Y,Y]);const R=Array(12);for(let ia=0;4>ia;ia++)R[3*ia]=Z[ia][0]*Y[0],R[3*ia+1]=Z[ia][1]*Y[1],
R[3*ia+2]=Z[ia][2]*Y[2];return new z.Geometry(pa,[[v.VertexAttribute.POSITION,new l.Attribute(R,S,3,!0)],[v.VertexAttribute.NORMAL,new l.Attribute(ma,ha,3)]])};a.createTubeGeometry=function(pa,Y,R,ia,A,F){ia=ia||10;A=null!=A?A:!0;r.assert(1<Y.length);const O=[],ba=[];for(let na=0;na<ia;na++){O.push([0,-na-1,-((na+1)%ia)-1]);const P=na/ia*2*Math.PI;ba.push([Math.cos(P)*R,Math.sin(P)*R])}return g(pa,ba,Y,[[0,0,0]],O,A,F)};a.makeOrthoBasisDirUpFallback=x;a.transformInPlace=function(pa,Y){pa=pa.getMutableAttribute(v.VertexAttribute.POSITION).data;
for(let R=0;R<pa.length;R+=3)b.set(ca,pa[R],pa[R+1],pa[R+2]),b.transformMat4(ca,ca,Y),pa[R]=ca[0],pa[R+1]=ca[1],pa[R+2]=ca[2]};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["exports"],function(a){function b(){return new Float32Array(3)}function c(q){const g=new Float32Array(3);g[0]=q[0];g[1]=q[1];g[2]=q[2];return g}function f(q,g,p){const x=new Float32Array(3);x[0]=q;x[1]=g;x[2]=p;return x}function e(q,g){return new Float32Array(q,
g,3)}function n(){return b()}function d(){return f(1,1,1)}function k(){return f(1,0,0)}function h(){return f(0,1,0)}function l(){return f(0,0,1)}const m=b(),t=d(),z=k(),r=h(),v=l(),w=Object.freeze(Object.defineProperty({__proto__:null,ONES:t,UNIT_X:z,UNIT_Y:r,UNIT_Z:v,ZEROS:m,clone:c,create:b,createView:e,fromValues:f,ones:d,unitX:k,unitY:h,unitZ:l,zeros:n},Symbol.toStringTag,{value:"Module"}));a.ONES=t;a.UNIT_X=z;a.UNIT_Y=r;a.UNIT_Z=v;a.ZEROS=m;a.clone=c;a.create=b;a.createView=e;a.fromValues=f;
a.ones=d;a.unitX=k;a.unitY=h;a.unitZ=l;a.vec3f32=w;a.zeros=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/FloatArray":function(){define(["exports","../../core/typedArrayUtil"],function(a,b){a.compactFloatArray=function(c){return b.isArray(c)?c.length<b.nativeArrayMaxSize?c:new Float32Array(c):c.length<b.nativeArrayMaxSize?Array.from(c):c};a.floatArrayFrom=function(c){return(b.isArray(c)?c.length:c.byteLength/8)<=b.nativeArrayMaxSize?Array.from(c):new Float32Array(c)};
a.floatSubArray=function(c,f,e){return Array.isArray(c)?c.slice(f,f+e):c.subarray(f,f+e)};a.newFloatArray=function(c,f=!1){return c<=b.nativeArrayMaxSize?f?Array(c).fill(0):Array(c):new Float32Array(c)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["exports"],function(a){a.Vec3Compact=void 0;(function(b){b.length=function(c,f){const e=c[f],n=c[f+1];c=c[f+2];return Math.sqrt(e*e+n*n+c*c)};b.normalize=function(c,
f){var e=c[f];const n=c[f+1],d=c[f+2];e=1/Math.sqrt(e*e+n*n+d*d);c[f]*=e;c[f+1]*=e;c[f+2]*=e};b.scale=function(c,f,e){c[f]*=e;c[f+1]*=e;c[f+2]*=e};b.add=function(c,f,e,n,d,k=f){d=d||c;d[k]=c[f]+e[n];d[k+1]=c[f+1]+e[n+1];d[k+2]=c[f+2]+e[n+2]};b.subtract=function(c,f,e,n,d,k=f){d=d||c;d[k]=c[f]-e[n];d[k+1]=c[f+1]-e[n+1];d[k+2]=c[f+2]-e[n+2]}})(a.Vec3Compact||(a.Vec3Compact={}));Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/vec32 ../../../../geometry/support/Indices ./AttributeArray ./BoundingInfo ./ContentObject ./ContentObjectType ./geometryDataUtils ./Object3DStateID ./Util ./VertexAttribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t){class z extends d.ContentObject{constructor(r,v,w=null,q=k.ContentObjectType.Mesh,g=null,p=-1){super();this.material=r;this.mapPositions=w;this.type=q;this.objectAndLayerIdColor=g;this.edgeIndicesLength=p;this.highlights=new Set;this._highlightGroupCounts=new Map;this.visible=!0;this._attributes=new Map;this._boundingInfo=null;for(const [x,u]of v)this._attributes.set(x,{...u,indices:f.compactIndices(u.indices)}),x===t.VertexAttribute.POSITION&&(this.edgeIndicesLength=
0>this.edgeIndicesLength?this._attributes.get(x).indices.length:this.edgeIndicesLength)}instantiate(r={}){const v=new z(r.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);this._attributes.forEach((w,q)=>{w.exclusive=!1;v._attributes.set(q,w)});v._boundingInfo=this._boundingInfo;v.transformation=r.transformation||this.transformation;return v}get attributes(){return this._attributes}getMutableAttribute(r){let v=this._attributes.get(r);v&&!v.exclusive&&
(v={...v,exclusive:!0,data:e.cloneAttributeData(v.data)},this._attributes.set(r,v));return v}setAttributeData(r,v){const w=this._attributes.get(r);w&&this._attributes.set(r,{...w,exclusive:!0,data:v})}get indexCount(){return this._attributes.values().next().value.indices?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}computeAttachmentOrigin(r){return(this.type===k.ContentObjectType.Mesh?
this._computeAttachmentOriginTriangles(r):this.type===k.ContentObjectType.Line?this._computeAttachmentOriginLines(r):this._computeAttachmentOriginPoints(r))?(null!=this._transformation&&c.transformMat4(r,r,this._transformation),!0):!1}_computeAttachmentOriginTriangles(r){const v=this.attributes.get(t.VertexAttribute.POSITION);return h.computeAttachmentOriginTriangles(v,r)}_computeAttachmentOriginLines(r){const v=this.attributes.get(t.VertexAttribute.POSITION);var w=h.computeAttachmentOriginLines;
var q=this.material.parameters;q="isClosed"in q&&q.isClosed?2<v.indices.length:!1;return w.call(h,v,q,r)}_computeAttachmentOriginPoints(r){const v=this.attributes.get(t.VertexAttribute.POSITION);return h.computeAttachmentOriginPoints(v,r)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const r=this.attributes.get(t.VertexAttribute.POSITION);if(!r||0===r.indices.length)return null;const v=this.type===k.ContentObjectType.Mesh?3:1;m.assert(0===r.indices.length%v,"Indexing error: "+
r.indices.length+" not divisible by "+v);const w=f.getContinuousIndexArray(r.indices.length/v);return new n.BoundingInfo(w,v,r)}get transformation(){return this._transformation??b.IDENTITY}set transformation(r){this._transformation=r&&r!==b.IDENTITY?b.clone(r):null}get highlightGroups(){return this._highlightGroupCounts}get hasHighlights(){return 0<this._highlightGroupCounts.size}foreachHighlightGroup(r){this._highlightGroupCounts.forEach((v,w)=>r(w))}allocateIdAndHighlight(r){r=new l.Object3DHighlightStateID(r);
return this.addHighlight(r)}addHighlight(r){this.highlights.add(r);const {highlightGroupName:v}=r,w=(this._highlightGroupCounts.get(v)??0)+1;this._highlightGroupCounts.set(v,w);return r}removeHighlight(r){if(this.highlights.delete(r)){({highlightGroupName:r}=r);const v=this._highlightGroupCounts.get(r)??0;1>=v?this._highlightGroupCounts.delete(r):this._highlightGroupCounts.set(r,v-1)}}}a.Geometry=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports",
"../../../../chunks/vec32","../../../../core/libs/gl-matrix-2/factories/vec3f64","../../../../geometry/support/triangle"],function(a,b,c,f){const e=c.create(),n=c.create(),d=c.create(),k=c.create();a.computeAttachmentOriginLines=function(h,l,m){if(!h)return!1;b.set(m,0,0,0);b.set(k,0,0,0);let t=0,z=0;const {size:r,data:v,indices:w}=h;h=w.length-1;l=h+(l?2:0);for(let g=0;g<l;g+=2){var q=w[g<h?g:h]*r;const p=w[g<h?g+1:0]*r;e[0]=v[q];e[1]=v[q+1];e[2]=v[q+2];n[0]=v[p];n[1]=v[p+1];n[2]=v[p+2];b.scale(e,
b.add(e,e,n),.5);q=b.dist(e,n);0<q?(b.add(m,m,b.scale(e,e,q)),t+=q):0===t&&(b.add(k,k,e),z++)}return 0!==t?(b.scale(m,m,1/t),!0):0!==z?(b.scale(m,k,1/z),!0):!1};a.computeAttachmentOriginPoints=function(h,l){if(!h)return!1;const {size:m,data:t,indices:z}=h;b.set(l,0,0,0);h=-1;let r=0;for(let v=0;v<z.length;v++){const w=z[v]*m;h!==w&&(l[0]+=t[w],l[1]+=t[w+1],l[2]+=t[w+2],r++);h=w}1<r&&b.scale(l,l,1/r);return 0<r};a.computeAttachmentOriginTriangles=function(h,l){if(!h)return!1;const {size:m,data:t,indices:z}=
h;b.set(l,0,0,0);b.set(k,0,0,0);let r=h=0;for(let w=0;w<z.length-2;w+=3){var v=z[w]*m;const q=z[w+1]*m,g=z[w+2]*m;b.set(e,t[v],t[v+1],t[v+2]);b.set(n,t[q],t[q+1],t[q+2]);b.set(d,t[g],t[g+1],t[g+2]);(v=f.areaPoints3d(e,n,d))?(b.add(e,e,n),b.add(e,e,d),b.scale(e,e,1/3*v),b.add(l,l,e),h+=v):(b.add(k,k,e),b.add(k,k,n),b.add(k,k,d),r+=3)}return 0===r&&0===h?!1:0!==h?(b.scale(l,l,1/h),!0):0!==r?(b.scale(l,k,1/r),!0):!1};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/triangle":function(){define("exports ../../core/ObjectStack ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./lineSegment ./vectorStacks".split(" "),
function(a,b,c,f,e,n){function d(z){return z?{p0:f.clone(z.p0),p1:f.clone(z.p1),p2:f.clone(z.p2)}:{p0:f.create(),p1:f.create(),p2:f.create()}}function k(z,r,v,w=d()){c.copy(w.p0,z);c.copy(w.p1,r);c.copy(w.p2,v);return w}const h=new b.ObjectStack(e.create),l=new b.ObjectStack(()=>d()),m=f.create(),t=f.create();a.areaPoints2d=function(z,r,v){return.5*Math.abs((r[0]-z[0])*(v[1]-z[1])-(r[1]-z[1])*(v[0]-z[0]))};a.areaPoints3d=function(z,r,v){c.subtract(m,r,z);c.subtract(t,v,z);return.5*c.length(c.cross(m,
m,t))};a.copy=function(z,r=d()){return k(z.p0,z.p1,z.p2,r)};a.create=d;a.distance2=function(z,r){var v=z.p0,w=z.p1;z=z.p2;const q=c.subtract(n.sv3d.get(),w,v),g=c.subtract(n.sv3d.get(),z,w),p=c.subtract(n.sv3d.get(),v,z),x=c.subtract(n.sv3d.get(),r,v);var u=c.subtract(n.sv3d.get(),r,w),D=c.subtract(n.sv3d.get(),r,z);const J=c.cross(q,q,p),E=c.dot(c.cross(n.sv3d.get(),q,J),x);u=c.dot(c.cross(n.sv3d.get(),g,J),u);D=c.dot(c.cross(n.sv3d.get(),p,J),D);if(0<E&&0<u&&0<D)return r=c.dot(J,x),r*r/c.dot(J,
J);v=e.distance2(e.fromValues(v,q,h.get()),r);w=e.distance2(e.fromValues(w,g,h.get()),r);r=e.distance2(e.fromValues(z,p,h.get()),r);return Math.min(v,w,r)};a.fromValues=k;a.intersectRay=function(z,r,v){const {direction:w,origin:q}=r,{p0:g,p1:p,p2:x}=z;var u=p[0]-g[0],D=p[1]-g[1],J=p[2]-g[2];z=x[0]-g[0];r=x[1]-g[1];const E=x[2]-g[2];var L=w[1]*E-r*w[2],Q=w[2]*z-E*w[0];const M=w[0]*r-z*w[1];var C=u*L+D*Q+J*M;if(-1E-5<C&&1E-5>C)return!1;C=1/C;const U=q[0]-g[0],y=q[1]-g[1],B=q[2]-g[2];L=C*(U*L+y*Q+B*
M);if(0>L||1<L)return!1;Q=y*J-D*B;J=B*u-J*U;u=U*D-u*y;D=C*(w[0]*Q+w[1]*J+w[2]*u);if(0>D||1<L+D)return!1;v&&(c.scale(v,w,C*(z*Q+r*J+E*u)),c.add(v,q,v));return!0};a.wrap=function(z,r,v){const w=l.get();w.p0=z;w.p1=r;w.p2=v;return w};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid","./basicInterfaces"],function(a,b,c){class f{constructor(){this.uid=b.generateUID()}}class e extends f{constructor(d){super();
this.highlightGroupName=d;this.channel=c.Object3DState.Highlight}}class n extends f{constructor(){super(...arguments);this.channel=c.Object3DState.MaskOccludee}}a.Object3DHighlightStateID=e;a.Object3DOccludeeStateID=n;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/pipeline/symbolization/TestSymbol":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/Logger ../../../../../../core/has ../../../../../../core/RandomLCG ../../../../../../core/Error ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../core/libs/gl-matrix-2/factories/mat4f64 ../featureData/interfaces ./symbolizationUtils ../../../../webgl-engine/lib/Attribute ../../../../webgl-engine/lib/VertexAttribute".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z){a.TestSymbol=class extends c{constructor(r){super();this._context=r;this.materialId=null;this._loaded=!1}get loaded(){return this._loaded}async load(r){this.materialId=r.createMaterial("hud");r.createDirectRenderer(this.materialId);this._loaded=!0}async add(r,v){if(null==this.materialId)throw Error("expected material not to be null");await this._provisionFeatureData(r);const {numFeatures:w,tileId:q,renderCoordinates:g,tileCenterRenderCoordinates:p}=r;var x=new Float64Array([0,
0,1]),u=new Float64Array([255,255,255,255]),D=new Float64Array([24,24]);r=new Float64Array([0,0,0,1]);var J=new Float64Array([0,0]),E=new Float64Array([0]),L=new Uint32Array(w);for(var Q=0;Q<w;++Q)L[Q]=Q;Q=new Uint32Array(w);for(let M=0;M<w;++M)Q[M]=0;L=new t.Attribute(g,L,3,!0);x=new t.Attribute(x,Q,3,!0);J=new t.Attribute(J,Q,2,!0);u=new t.Attribute(u,Q,4,!0);E=new t.Attribute(E,Q,1,!0);D=new t.Attribute(D,Q,2,!0);r=new t.Attribute(r,Q,4,!0);r={attributes:m.inputAttributesToAttributesMap([[z.VertexAttribute.POSITION,
L],[z.VertexAttribute.NORMAL,x],[z.VertexAttribute.UV0,J],[z.VertexAttribute.COLOR,u],[z.VertexAttribute.ROTATION,E],[z.VertexAttribute.SIZE,D],[z.VertexAttribute.CENTEROFFSETANDDISTANCE,r]]),objectAndLayerIdColor:void 0,transformation:h.create(),materialId:this.materialId};v.addDirectRendererGeometry(q,r,p)}async remove(r,v){v.removeDirectRendererGeometry(r.tileId)}async _provisionFeatureData(r){await r.provision([l.FeatureDataItem.GEOMETRY_RENDER_COORDINATES,l.FeatureDataItem.TILE_CENTER_RENDER_COORDINATES],
this._context)}};a.TestSymbol=b.__decorate([k.subclass("esri.views.3d.layers.graphics.pipeline.symbolization.TestSymbol")],a.TestSymbol);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/RenderCoordsHelper":function(){define("exports ../../../core/mathUtils ../../../core/unitUtils ../../../core/libs/gl-matrix-2/math/mat4 ../../../chunks/vec32 ../../../geometry/ellipsoidUtils ../../../geometry/spatialReferenceEllipsoidUtils ../../../geometry/projection/projectPointToVector ../../../geometry/projection/projectVectorToPoint ../../../geometry/projection/projectVectorToVector ../../../geometry/support/aaBoundingRect ../../../geometry/support/Axis ../../../geometry/support/coordinateSystem ../../../geometry/support/plane ../../../geometry/support/vector ../../../geometry/support/vectorStacks ../../../layers/graphics/dehydratedFeatureUtils ../../ViewingMode".split(" "),
function(a,b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q,g){class p{constructor(x,u,D,J){this.viewingMode=x;this.spatialReference=u;this.unitInMeters=D;this._coordinateSystem=J;this._tmpCoordinateSystem=z.create(J);this.referenceEllipsoid=n.getReferenceEllipsoid(u);this.sphericalPCPF=d.getSphericalPCPF(u)}set extent(x){x&&z.setExtent(this._coordinateSystem,x,this._coordinateSystem)}get extent(){return z.getExtent(this._coordinateSystem,m.create())}getAltitude(x){return z.altitudeAt(this._coordinateSystem,x)}setAltitude(x,
u,D=x){return z.setAltitudeAt(this._coordinateSystem,D,u,x)}setAltitudeOfTransformation(x,u){z.setAltitudeOfTransformation(this._coordinateSystem,u,x,u)}worldUpAtPosition(x,u){return z.normalAt(this._coordinateSystem,x,u)}worldBasisAtPosition(x,u,D){return z.axisAt(this._coordinateSystem,x,u,D)}basisMatrixAtPosition(x,u){const D=this.worldBasisAtPosition(x,t.Axis.X,w.sv3d.get()),J=this.worldBasisAtPosition(x,t.Axis.Y,w.sv3d.get());x=this.worldBasisAtPosition(x,t.Axis.Z,w.sv3d.get());f.set(u,D[0],
D[1],D[2],0,J[0],J[1],J[2],0,x[0],x[1],x[2],0,0,0,0,1);return u}headingAtPosition(x,u){const D=this.worldUpAtPosition(x,w.sv3d.get());x=this.worldBasisAtPosition(x,t.Axis.Y,w.sv3d.get());u=v.angleAroundAxis(u,x,D);return b.rad2deg(u)}intersectManifoldClosestSilhouette(x,u,D){z.elevate(this._coordinateSystem,u,this._tmpCoordinateSystem);z.intersectRayClosestSilhouette(this._tmpCoordinateSystem,x,D);return D}intersectManifold(x,u,D){z.elevate(this._coordinateSystem,u,this._tmpCoordinateSystem);u=w.sv3d.get();
return z.intersectRay(this._tmpCoordinateSystem,x,u)?e.copy(D,u):null}intersectInfiniteManifold(x,u,D){if(this.viewingMode===g.ViewingMode.Global)return this.intersectManifold(x,u,D);z.elevate(this._coordinateSystem,u,this._tmpCoordinateSystem);u=this._tmpCoordinateSystem.value;const J=w.sv3d.get();return r.intersectRay(u.plane,x,J)?e.copy(D,J):null}toRenderCoords(x,u,D){return q.isDehydratedPoint(x)?k.projectPointToVector(x,u,this.spatialReference):l.projectVectorToVector(x,u,D,this.spatialReference)}fromRenderCoords(x,
u,D=null){return q.isDehydratedPoint(u)?(null!=D&&(u.spatialReference=D),h.projectVectorToPoint(x,this.spatialReference,u)?u:null):l.projectVectorToVector(x,this.spatialReference,u,D)?u:null}static create(x,u){switch(x){case g.ViewingMode.Local:return new p(g.ViewingMode.Local,u,c.getMetersPerUnitForSR(u),z.createLocal());case g.ViewingMode.Global:return new p(g.ViewingMode.Global,u,1,z.createGlobal(u))}}static renderUnitScaleFactor(x,u){return c.getMetersPerCartesianUnitForSR(x)/c.getMetersPerCartesianUnitForSR(u)}}
a.RenderCoordsHelper=p;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectVectorToPoint":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64","../projection","./projectVectorToVector"],function(a,b,c,f){function e(d,k,h){if(!f.projectVectorToVector(d,k,n,h.spatialReference))return!1;h.x=n[0];h.y=n[1];h.z=n[2];return!0}const n=b.create();a.projectVectorToPoint=e;a.projectVectorToPointAsync=async function(d,k,h,l){await c.initializeProjection(k,
h.spatialReference,null,l);return e(d,k,h)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/coordinateSystem":function(){define("exports ../../core/libs/gl-matrix-2/math/mat4 ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../ellipsoidUtils ../SpatialReference ../spatialReferenceEllipsoidUtils ./Axis ../../chunks/boundedPlane ../../chunks/sphere".split(" "),function(a,b,c,f,e,n,d,k,h,l){function m(q){return{operations:q,value:q.create()}}function t(q,
g,p=m(q)){p.operations=q;q.copy(g,p.value);return p}function z(q,g,p,x){return q.operations.setAltitudeAt(q.value,g,p,x)}const r=2**50,v=f.create(),w=f.create();a.altitudeAt=function(q,g){return q.operations.altitudeAt(q.value,g)};a.axisAt=function(q,g,p,x){return q.operations.axisAt(q.value,g,p,x)};a.closestPoint=function(q,g,p){return q.operations.closestPoint(q.value,g,p)};a.closestPointOnSilhouette=function(q,g,p){return q.operations.closestPointOnSilhouette(q.value,g,p)};a.coordinateSystemFromOneAxisAndNormalVector=
function(q,g,p,x,u){c.copy(p,q);c.copy(w,g);c.normalize(w,w);c.cross(x,w,p);c.cross(u,x,p)};a.create=function(q){const {value:g,operations:p}=q;return{operations:p,value:p.create(g)}};a.createFromOperations=m;a.createGlobal=function(q){return t(l.sphere,l.fromValues(0,0,0,e.getReferenceEllipsoid(q).radius))};a.createLocal=function(){return t(h.boundedPlane,h.fromValues([0,0,0],[r,0,0],[0,r,0]))};a.distanceToSilhouette=function(q,g){return q.operations.distanceToSilhouette(q.value,g)};a.elevate=function(q,
g,p){return q.operations.elevate(q.value,g,p.value)};a.fromValues=t;a.getExtent=function(q,g){q.operations.getExtent(q.value,g);return g};a.intersectRay=function(q,g,p){return q.operations.intersectRay(q.value,g,p)};a.intersectRayClosestSilhouette=function(q,g,p){return q.operations.intersectRayClosestSilhouette(q.value,g,p)};a.normalAt=function(q,g,p){return q.operations.axisAt(q.value,g,k.Axis.Z,p)};a.renderSRFromViewSR=function(q,g){return q?d.getSphericalPCPF(g):g.isGeographic?n.PlateCarree:g};
a.setAltitudeAt=z;a.setAltitudeOfTransformation=function(q,g,p,x){g!==x&&b.copy(x,g);c.set(v,x[12],x[13],x[14]);z(q,v,p,v);x[12]=v[0];x[13]=v[1];x[14]=v[2];return x};a.setExtent=function(q,g,p){q.operations.setExtent(q.value,g,p.value);return p};a.vectorCoordinates=function(q,g,p,x,u){u[0]=c.dot(q,g);u[1]=c.dot(q,p);u[2]=c.dot(q,x);return u};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=
function(b){return"point"===b.type};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/QueryEngine ../../../../../rest/support/Query ./Tile3DManager ./featureSet/TiledFeatureStore ./fetching/Tile3DFetcher ./rendering/RenderCommandContext ./symbolization/Symbolizer".split(" "),function(a,
b,c,f,e,n,d,k,h,l,m,t,z,r,v,w,q){b=class extends b.EventedAccessor{constructor(){super(...arguments);this.remoteClient=null;this._featureStore=new r.TiledFeatureStore;this._tileManager=new z.Tile3DManager({addTile:(p,x)=>this._addTile(p,x),removeTiles:p=>this._removeTiles(p)});this._defaultQueryJSON=this._queryEngine=this._symbolizer=this._fetcher=this._renderCommandContext=null}get updating(){return this._tileManager.updating}destroy(){this._featureStore.clear();this._tileManager.destroy()}async setup({viewSpatialReference:p,
renderSpatialReference:x,viewingMode:u,baseQuery:D,url:J,objectIdField:E,capabilities:L,fieldsIndex:Q,timeInfo:M}){this._renderCommandContext=new w.RenderCommandContext({viewingMode:u,dispatchRenderCommandsCallback:(U,y)=>this.remoteClient.invoke("dispatchRenderCommands",U,{transferList:y})});const C=l.fromJSON(p);x=l.fromJSON(x);this._fetcher=new v.Tile3DFetcher(C,t.fromJSON(D),J,E,L);this._symbolizer=new q.Symbolizer({viewSpatialReference:C,renderSpatialReference:x,viewingMode:u});this._queryEngine=
new m.QueryEngine({hasZ:!0,hasM:!1,geometryType:"esriGeometryPoint",objectIdField:E,fieldsIndex:Q,availableFields:[E],spatialReference:p,featureStore:this._featureStore,timeInfo:M});this._defaultQueryJSON=(new t({outSpatialReference:C})).toJSON();this.addHandles(f.watch(()=>this.updating,async U=>{this.emit("notify-updating",{updating:U})}),f.initial);return g}async executeQuery(p,x){return{result:await this._queryEngine.executeQuery(this._ensureQuery(p),x)}}async executeQueryForIds(p,x){p=await this._queryEngine.executeQueryForIdSet(this._ensureQuery(p),
x);return{result:Array.from(p)}}async executeQueryForCount(p,x){return{result:await this._queryEngine.executeQueryForCount(this._ensureQuery(p),x)}}async executeQueryForExtent(p,x){return{result:await this._queryEngine.executeQueryForExtent(this._ensureQuery(p),x)}}async executeQueryForLatestObservations(p,x){return{result:await this._queryEngine.executeQueryForLatestObservations(this._ensureQuery(p),x)}}async onTileTreeChange(p){await this._tileManager.onTileTreeChange(p);return g}async _addTile(p,
x){p=await this._fetcher.fetch(p,x);c.throwIfAborted(x);this._featureStore.addTile(p);x=this._renderCommandContext.createEncoder();await this._symbolizer.add(p,x);await x.dispatch();return p}async _removeTiles(p){const x=this._renderCommandContext.createEncoder(),u=this._featureStore,D=this._symbolizer;for(const J of p)u.removeTile(J.tileId),await D.remove(J.tileId,x);await x.dispatch()}_ensureQuery(p){return p??this._defaultQueryJSON}};a.__decorate([e.property()],b.prototype,"updating",null);b=a.__decorate([h.subclass("esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorker")],
b);const g={result:void 0};return b});