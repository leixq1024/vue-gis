// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/libs/gl-matrix-2/math/quat":function(){define("exports ../factories/mat3f64 ../factories/quatf64 ../factories/vec3f64 ./common ../../../../chunks/vec32 ../../../../chunks/vec42".split(" "),function(d,u,r,K,V,y,p){function q(A){A[0]=0;A[1]=0;A[2]=0;A[3]=1;return A}function E(A,B,D){D*=.5;const R=Math.sin(D);A[0]=R*B[0];A[1]=R*B[1];A[2]=R*B[2];A[3]=Math.cos(D);return A}function z(A,B){const D=2*Math.acos(B[3]),R=Math.sin(D/2);R>V.getEpsilon()?(A[0]=B[0]/R,A[1]=B[1]/R,A[2]=
B[2]/R):(A[0]=1,A[1]=0,A[2]=0);return D}function n(A,B,D){const R=B[0],Y=B[1],h=B[2];B=B[3];const e=D[0],m=D[1],a=D[2];D=D[3];A[0]=R*D+B*e+Y*a-h*m;A[1]=Y*D+B*m+h*e-R*a;A[2]=h*D+B*a+R*m-Y*e;A[3]=B*D-R*e-Y*m-h*a;return A}function v(A,B,D){D*=.5;const R=B[0],Y=B[1],h=B[2];B=B[3];const e=Math.sin(D);D=Math.cos(D);A[0]=R*D+B*e;A[1]=Y*D+h*e;A[2]=h*D-Y*e;A[3]=B*D-R*e;return A}function N(A,B,D){D*=.5;const R=B[0],Y=B[1],h=B[2];B=B[3];const e=Math.sin(D);D=Math.cos(D);A[0]=R*D-h*e;A[1]=Y*D+B*e;A[2]=h*D+R*
e;A[3]=B*D-Y*e;return A}function U(A,B,D){D*=.5;const R=B[0],Y=B[1],h=B[2];B=B[3];const e=Math.sin(D);D=Math.cos(D);A[0]=R*D+Y*e;A[1]=Y*D-R*e;A[2]=h*D+B*e;A[3]=B*D-h*e;return A}function T(A,B){const D=B[0],R=B[1];B=B[2];A[0]=D;A[1]=R;A[2]=B;A[3]=Math.sqrt(Math.abs(1-D*D-R*R-B*B));return A}function L(A,B,D,R){const Y=B[0],h=B[1],e=B[2];B=B[3];let m=D[0],a=D[1],b=D[2];D=D[3];let c;let f;var l=Y*m+h*a+e*b+B*D;0>l&&(l=-l,m=-m,a=-a,b=-b,D=-D);1-l>V.getEpsilon()?(c=Math.acos(l),f=Math.sin(c),l=Math.sin((1-
R)*c)/f,R=Math.sin(R*c)/f):l=1-R;A[0]=l*Y+R*m;A[1]=l*h+R*a;A[2]=l*e+R*b;A[3]=l*B+R*D;return A}function J(A){var B=V.RANDOM,D=B();const R=B();B=B();const Y=Math.sqrt(1-D);D=Math.sqrt(D);A[0]=Y*Math.sin(2*Math.PI*R);A[1]=Y*Math.cos(2*Math.PI*R);A[2]=D*Math.sin(2*Math.PI*B);A[3]=D*Math.cos(2*Math.PI*B);return A}function P(A,B){const D=B[0],R=B[1],Y=B[2];B=B[3];var h=D*D+R*R+Y*Y+B*B;h=h?1/h:0;A[0]=-D*h;A[1]=-R*h;A[2]=-Y*h;A[3]=B*h;return A}function da(A,B){A[0]=-B[0];A[1]=-B[1];A[2]=-B[2];A[3]=B[3];return A}
function Z(A,B){var D=B[0]+B[4]+B[8];if(0<D)D=Math.sqrt(D+1),A[3]=.5*D,D=.5/D,A[0]=(B[5]-B[7])*D,A[1]=(B[6]-B[2])*D,A[2]=(B[1]-B[3])*D;else{let R=0;B[4]>B[0]&&(R=1);B[8]>B[3*R+R]&&(R=2);const Y=(R+1)%3,h=(R+2)%3;D=Math.sqrt(B[3*R+R]-B[3*Y+Y]-B[3*h+h]+1);A[R]=.5*D;D=.5/D;A[3]=(B[3*Y+h]-B[3*h+Y])*D;A[Y]=(B[3*Y+R]+B[3*R+Y])*D;A[h]=(B[3*h+R]+B[3*R+h])*D}return A}function ea(A,B,D,R){var Y=.5*Math.PI/180;B*=Y;D*=Y;R*=Y;Y=Math.sin(B);B=Math.cos(B);const h=Math.sin(D);D=Math.cos(D);const e=Math.sin(R);R=
Math.cos(R);A[0]=Y*D*R-B*h*e;A[1]=B*h*R+Y*D*e;A[2]=B*D*e-Y*h*R;A[3]=B*D*R+Y*h*e;return A}function ca(A){return"quat("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+")"}function O(A,B,D){const R=y.dot(B,D);if(-.999999>R)return y.cross(F,X,B),1E-6>y.len(F)&&y.cross(F,fa,B),y.normalize(F,F),E(A,F,Math.PI),A;if(.999999<R)return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A;y.cross(F,B,D);A[0]=F[0];A[1]=F[1];A[2]=F[2];A[3]=1+R;return g(A,A)}function S(A,B,D,R,Y,h){L(ka,B,Y,h);L(ma,D,R,h);L(A,ka,ma,2*h*(1-h));return A}function aa(A,
B,D,R){const Y=qa;Y[0]=D[0];Y[3]=D[1];Y[6]=D[2];Y[1]=R[0];Y[4]=R[1];Y[7]=R[2];Y[2]=-B[0];Y[5]=-B[1];Y[8]=-B[2];return g(A,Z(A,Y))}const ja=p.copy,ha=p.set,C=p.add,G=p.scale,I=p.dot,ba=p.lerp,sa=p.length,na=p.squaredLength,g=p.normalize,k=p.exactEquals;p=p.equals;const F=K.create(),X=K.fromValues(1,0,0),fa=K.fromValues(0,1,0),ka=r.create(),ma=r.create(),qa=u.create();u=Object.freeze(Object.defineProperty({__proto__:null,add:C,calculateW:T,conjugate:da,copy:ja,dot:I,equals:p,exactEquals:k,fromEuler:ea,
fromMat3:Z,getAxisAngle:z,identity:q,invert:P,len:sa,length:sa,lerp:ba,mul:n,multiply:n,normalize:g,random:J,rotateX:v,rotateY:N,rotateZ:U,rotationTo:O,scale:G,set:ha,setAxes:aa,setAxisAngle:E,slerp:L,sqlerp:S,sqrLen:na,squaredLength:na,str:ca},Symbol.toStringTag,{value:"Module"}));d.add=C;d.calculateW=T;d.conjugate=da;d.copy=ja;d.dot=I;d.equals=p;d.exactEquals=k;d.fromEuler=ea;d.fromMat3=Z;d.getAxisAngle=z;d.identity=q;d.invert=P;d.len=sa;d.length=sa;d.lerp=ba;d.mul=n;d.multiply=n;d.normalize=g;
d.quat=u;d.random=J;d.rotateX=v;d.rotateY=N;d.rotateZ=U;d.rotationTo=O;d.scale=G;d.set=ha;d.setAxes=aa;d.setAxisAngle=E;d.slerp=L;d.sqlerp=S;d.sqrLen=na;d.squaredLength=na;d.str=ca;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],function(d){function u(){return[1,0,0,0,1,0,0,0,1]}function r(q){return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8]]}function K(q,E,z,n,v,N,U,T,L){return[q,E,z,n,v,N,U,T,L]}function V(q,
E){return new Float64Array(q,E,9)}const y=u(),p=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,clone:r,create:u,createView:V,fromValues:K},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=y;d.clone=r;d.create=u;d.createView=V;d.fromValues=K;d.mat3f64=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],function(d){function u(){return[0,0,0,1]}function r(p){return[p[0],p[1],p[2],p[3]]}function K(p,
q,E,z){return[p,q,E,z]}const V=u(),y=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:V,clone:r,create:u,fromValues:K},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=V;d.clone=r;d.create=u;d.fromValues=K;d.quatf64=y;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec32":function(){define(["exports","../core/libs/gl-matrix-2/factories/vec3f64","../core/libs/gl-matrix-2/math/common"],function(d,u,r){function K(h){const e=h[0],m=h[1];h=h[2];return Math.sqrt(e*
e+m*m+h*h)}function V(h,e){h[0]=e[0];h[1]=e[1];h[2]=e[2];return h}function y(h,e,m,a){h[0]=e;h[1]=m;h[2]=a;return h}function p(h,e,m){h[0]=e[0]+m[0];h[1]=e[1]+m[1];h[2]=e[2]+m[2];return h}function q(h,e,m){h[0]=e[0]-m[0];h[1]=e[1]-m[1];h[2]=e[2]-m[2];return h}function E(h,e,m){h[0]=e[0]*m[0];h[1]=e[1]*m[1];h[2]=e[2]*m[2];return h}function z(h,e,m){h[0]=e[0]/m[0];h[1]=e[1]/m[1];h[2]=e[2]/m[2];return h}function n(h,e){h[0]=Math.ceil(e[0]);h[1]=Math.ceil(e[1]);h[2]=Math.ceil(e[2]);return h}function v(h,
e){h[0]=Math.floor(e[0]);h[1]=Math.floor(e[1]);h[2]=Math.floor(e[2]);return h}function N(h,e){h[0]=Math.abs(e[0]);h[1]=Math.abs(e[1]);h[2]=Math.abs(e[2]);return h}function U(h,e){h[0]=Math.sign(e[0]);h[1]=Math.sign(e[1]);h[2]=Math.sign(e[2]);return h}function T(h,e,m){h[0]=Math.min(e[0],m[0]);h[1]=Math.min(e[1],m[1]);h[2]=Math.min(e[2],m[2]);return h}function L(h,e,m){h[0]=Math.max(e[0],m[0]);h[1]=Math.max(e[1],m[1]);h[2]=Math.max(e[2],m[2]);return h}function J(h,e=0,m=1){h[0]=Math.min(Math.max(h[0],
e),m);h[1]=Math.min(Math.max(h[1],e),m);h[2]=Math.min(Math.max(h[2],e),m);return h}function P(h,e){h[0]=Math.round(e[0]);h[1]=Math.round(e[1]);h[2]=Math.round(e[2]);return h}function da(h,e,m){h[0]=e[0]*m;h[1]=e[1]*m;h[2]=e[2]*m;return h}function Z(h,e,m,a){h[0]=e[0]+m[0]*a;h[1]=e[1]+m[1]*a;h[2]=e[2]+m[2]*a;return h}function ea(h,e){const m=e[0]-h[0],a=e[1]-h[1];h=e[2]-h[2];return Math.sqrt(m*m+a*a+h*h)}function ca(h,e){const m=e[0]-h[0],a=e[1]-h[1];h=e[2]-h[2];return m*m+a*a+h*h}function O(h){const e=
h[0],m=h[1];h=h[2];return e*e+m*m+h*h}function S(h,e){h[0]=-e[0];h[1]=-e[1];h[2]=-e[2];return h}function aa(h,e){h[0]=1/e[0];h[1]=1/e[1];h[2]=1/e[2];return h}function ja(h,e){var m=e[0];const a=e[1],b=e[2];m=m*m+a*a+b*b;0<m&&(m=1/Math.sqrt(m),h[0]=e[0]*m,h[1]=e[1]*m,h[2]=e[2]*m);return h}function ha(h,e){return h[0]*e[0]+h[1]*e[1]+h[2]*e[2]}function C(h,e,m){const a=e[0],b=e[1];e=e[2];const c=m[0],f=m[1];m=m[2];h[0]=b*m-e*f;h[1]=e*c-a*m;h[2]=a*f-b*c;return h}function G(h,e,m){var a=e[0],b=e[1],c=
e[2];e=m[0];const f=m[1],l=m[2];m=b*l-c*f;c=c*e-a*l;a=a*f-b*e;b=Math.sqrt(m*m+c*c+a*a);h[0]=m/b;h[1]=c/b;h[2]=a/b;return h}function I(h,e,m,a){const b=e[0],c=e[1];e=e[2];h[0]=b+a*(m[0]-b);h[1]=c+a*(m[1]-c);h[2]=e+a*(m[2]-e);return h}function ba(h,e,m,a,b,c){const f=c*c,l=f*(2*c-3)+1,t=f*(c-2)+c,w=f*(c-1);c=f*(3-2*c);h[0]=e[0]*l+m[0]*t+a[0]*w+b[0]*c;h[1]=e[1]*l+m[1]*t+a[1]*w+b[1]*c;h[2]=e[2]*l+m[2]*t+a[2]*w+b[2]*c;return h}function sa(h,e,m,a,b,c){var f=1-c,l=f*f;const t=c*c,w=l*f;l*=3*c;f*=3*t;c*=
t;h[0]=e[0]*w+m[0]*l+a[0]*f+b[0]*c;h[1]=e[1]*w+m[1]*l+a[1]*f+b[1]*c;h[2]=e[2]*w+m[2]*l+a[2]*f+b[2]*c;return h}function na(h,e=1){var m=r.RANDOM;const a=2*m()*Math.PI;m=2*m()-1;const b=Math.sqrt(1-m*m)*e;h[0]=Math.cos(a)*b;h[1]=Math.sin(a)*b;h[2]=m*e;return h}function g(h,e,m){const a=e[0],b=e[1];e=e[2];h[0]=m[0]*a+m[4]*b+m[8]*e+m[12];h[1]=m[1]*a+m[5]*b+m[9]*e+m[13];h[2]=m[2]*a+m[6]*b+m[10]*e+m[14];return h}function k(h,e,m){const a=e[0],b=e[1];e=e[2];h[0]=a*m[0]+b*m[3]+e*m[6];h[1]=a*m[1]+b*m[4]+e*
m[7];h[2]=a*m[2]+b*m[5]+e*m[8];return h}function F(h,e,m){const a=m[0],b=m[1],c=m[2],f=e[0],l=e[1];e=e[2];const t=b*e-c*l,w=c*f-a*e,x=a*l-b*f;m=2*m[3];h[0]=f+t*m+2*(b*x-c*w);h[1]=l+w*m+2*(c*t-a*x);h[2]=e+x*m+2*(a*w-b*t);return h}function X(h,e,m,a){const b=[],c=[];b[0]=e[0]-m[0];b[1]=e[1]-m[1];b[2]=e[2]-m[2];c[0]=b[0];c[1]=b[1]*Math.cos(a)-b[2]*Math.sin(a);c[2]=b[1]*Math.sin(a)+b[2]*Math.cos(a);h[0]=c[0]+m[0];h[1]=c[1]+m[1];h[2]=c[2]+m[2];return h}function fa(h,e,m,a){const b=[],c=[];b[0]=e[0]-m[0];
b[1]=e[1]-m[1];b[2]=e[2]-m[2];c[0]=b[2]*Math.sin(a)+b[0]*Math.cos(a);c[1]=b[1];c[2]=b[2]*Math.cos(a)-b[0]*Math.sin(a);h[0]=c[0]+m[0];h[1]=c[1]+m[1];h[2]=c[2]+m[2];return h}function ka(h,e,m,a){const b=[],c=[];b[0]=e[0]-m[0];b[1]=e[1]-m[1];b[2]=e[2]-m[2];c[0]=b[0]*Math.cos(a)-b[1]*Math.sin(a);c[1]=b[0]*Math.sin(a)+b[1]*Math.cos(a);c[2]=b[2];h[0]=c[0]+m[0];h[1]=c[1]+m[1];h[2]=c[2]+m[2];return h}function ma(h,e){ja(R,h);ja(Y,e);h=ha(R,Y);return 1<h?0:-1>h?Math.PI:Math.acos(h)}function qa(h){return"vec3("+
h[0]+", "+h[1]+", "+h[2]+")"}function A(h,e){return h[0]===e[0]&&h[1]===e[1]&&h[2]===e[2]}function B(h,e){if(h===e)return!0;const m=h[0],a=h[1];h=h[2];const b=e[0],c=e[1];e=e[2];const f=r.getEpsilon();return Math.abs(m-b)<=f*Math.max(1,Math.abs(m),Math.abs(b))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(h-e)<=f*Math.max(1,Math.abs(h),Math.abs(e))}function D(h,e,m){const a=m[0]-e[0],b=m[1]-e[1];e=m[2]-e[2];m=a*a+b*b+e*e;if(0<m)return m=1/Math.sqrt(m),h[0]=a*m,h[1]=b*m,h[2]=e*m,
h;h[0]=0;h[1]=0;h[2]=0;return h}const R=u.create(),Y=u.create();u=Object.freeze(Object.defineProperty({__proto__:null,abs:N,add:p,angle:ma,bezier:sa,ceil:n,clamp:J,copy:V,cross:C,crossAndNormalize:G,direction:D,dist:ea,distance:ea,div:z,divide:z,dot:ha,equals:B,exactEquals:A,floor:v,hermite:ba,inverse:aa,len:K,length:K,lerp:I,max:L,min:T,mul:E,multiply:E,negate:S,normalize:ja,random:na,rotateX:X,rotateY:fa,rotateZ:ka,round:P,scale:da,scaleAndAdd:Z,set:y,sign:U,sqrDist:ca,sqrLen:O,squaredDistance:ca,
squaredLength:O,str:qa,sub:q,subtract:q,transformMat3:k,transformMat4:g,transformQuat:F},Symbol.toStringTag,{value:"Module"}));d.abs=N;d.add=p;d.angle=ma;d.bezier=sa;d.ceil=n;d.clamp=J;d.copy=V;d.cross=C;d.crossAndNormalize=G;d.direction=D;d.dist=ea;d.distance=ea;d.div=z;d.divide=z;d.dot=ha;d.equals=B;d.exactEquals=A;d.floor=v;d.hermite=ba;d.inverse=aa;d.len=K;d.length=K;d.lerp=I;d.max=L;d.min=T;d.mul=E;d.multiply=E;d.negate=S;d.normalize=ja;d.random=na;d.rotateX=X;d.rotateY=fa;d.rotateZ=ka;d.round=
P;d.scale=da;d.scaleAndAdd=Z;d.set=y;d.sign=U;d.sqrDist=ca;d.sqrLen=O;d.squaredDistance=ca;d.squaredLength=O;d.str=qa;d.sub=q;d.subtract=q;d.transformMat3=k;d.transformMat4=g;d.transformQuat=F;d.vec3=u})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["exports"],function(d){function u(){return new Float32Array(3)}function r(J){const P=new Float32Array(3);P[0]=J[0];P[1]=J[1];P[2]=J[2];return P}function K(J,P,da){const Z=new Float32Array(3);Z[0]=J;Z[1]=P;Z[2]=da;return Z}function V(J,
P){return new Float32Array(J,P,3)}function y(){return u()}function p(){return K(1,1,1)}function q(){return K(1,0,0)}function E(){return K(0,1,0)}function z(){return K(0,0,1)}const n=u(),v=p(),N=q(),U=E(),T=z(),L=Object.freeze(Object.defineProperty({__proto__:null,ONES:v,UNIT_X:N,UNIT_Y:U,UNIT_Z:T,ZEROS:n,clone:r,create:u,createView:V,fromValues:K,ones:p,unitX:q,unitY:E,unitZ:z,zeros:y},Symbol.toStringTag,{value:"Module"}));d.ONES=v;d.UNIT_X=N;d.UNIT_Y=U;d.UNIT_Z=T;d.ZEROS=n;d.clone=r;d.create=u;d.createView=
V;d.fromValues=K;d.ones=p;d.unitX=q;d.unitY=E;d.unitZ=z;d.vec3f32=L;d.zeros=y;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/PointCloudWorkerUtil":function(){define("exports ../../../../core/has ../../../../renderers/PointCloudClassBreaksRenderer ../../../../renderers/PointCloudStretchRenderer ../../../../renderers/PointCloudUniqueValueRenderer ./I3SBinaryReader ./LEPCC".split(" "),function(d,u,r,K,V,y,p){function q(n,v){const N=new Float64Array(v);for(let U=
0;U<v;U++)N[U]=n[3*U+2];return N}function E(n){switch(n){default:case null:case "none":return v=>v;case "low-four-bit":return v=>v&15;case "high-four-bit":return v=>(v&240)>>4;case "absolute-value":return v=>Math.abs(v);case "modulo-ten":return v=>v%10}}function z(n){let v=0;for(const N of n||[])v|=1<<N;return v}d.elevationFromPositions=q;d.evaluateRenderer=function(n,v,N,U){const {rendererJSON:T,isRGBRenderer:L}=n;var J=n=null;if(v&&L)n=v;else if(v&&"pointCloudUniqueValueRenderer"===T?.type){J=V.fromJSON(T);
var P=J.colorUniqueValueInfos;n=new Uint8Array(3*U);var da=E(J.fieldTransformType);for(var Z=0;Z<U;Z++){var ea=(da?da(v[Z]):v[Z])+"";for(var ca=0;ca<P.length;ca++)if(P[ca].values.includes(ea)){n[3*Z]=P[ca].color.r;n[3*Z+1]=P[ca].color.g;n[3*Z+2]=P[ca].color.b;break}}}else if(v&&"pointCloudStretchRenderer"===T?.type)for(J=K.fromJSON(T),P=J.stops,n=new Uint8Array(3*U),da=E(J.fieldTransformType),Z=0;Z<U;Z++)if(ea=da?da(v[Z]):v[Z],ca=P.length-1,ea<P[0].value)n[3*Z]=P[0].color.r,n[3*Z+1]=P[0].color.g,
n[3*Z+2]=P[0].color.b;else if(ea>=P[ca].value)n[3*Z]=P[ca].color.r,n[3*Z+1]=P[ca].color.g,n[3*Z+2]=P[ca].color.b;else for(ca=1;ca<P.length;ca++){if(ea<P[ca].value){ea=(ea-P[ca-1].value)/(P[ca].value-P[ca-1].value);n[3*Z]=P[ca].color.r*ea+P[ca-1].color.r*(1-ea);n[3*Z+1]=P[ca].color.g*ea+P[ca-1].color.g*(1-ea);n[3*Z+2]=P[ca].color.b*ea+P[ca-1].color.b*(1-ea);break}}else if(v&&"pointCloudClassBreaksRenderer"===T?.type)for(J=r.fromJSON(T),P=J.colorClassBreakInfos,n=new Uint8Array(3*U),da=E(J.fieldTransformType),
Z=0;Z<U;Z++)for(ea=da?da(v[Z]):v[Z],ca=0;ca<P.length;ca++){if(ea>=P[ca].minValue&&ea<=P[ca].maxValue){n[3*Z]=P[ca].color.r;n[3*Z+1]=P[ca].color.g;n[3*Z+2]=P[ca].color.b;break}}else n=(new Uint8Array(3*U)).fill(255);if(N&&J?.colorModulation)for(v=J.colorModulation.minValue,J=J.colorModulation.maxValue,P=0;P<U;P++)da=N[P],da=da>=J?1:da<=v?.3:.3+.7*(da-v)/(J-v),n[3*P]*=da,n[3*P+1]*=da,n[3*P+2]*=da;return n};d.filterInPlace=function(n,v,N,U,T){const L=n.length/3;let J=0;for(let O=0;O<L;O++){let S=!0;
for(let aa=0;aa<U.length&&S;aa++){var {filterJSON:P}=U[aa],da=T[aa].values[O];switch(P.type){case "pointCloudValueFilter":var Z="exclude"===P.mode;P.values.includes(da)===Z&&(S=!1);break;case "pointCloudBitfieldFilter":Z=z(P.requiredSetBits);P=z(P.requiredClearBits);if((da&Z)!==Z||0!==(da&P))S=!1;break;case "pointCloudReturnFilter":var ea=da&15,ca=da>>>4&15;da=1<ca;Z=1===ea;ea=ea===ca;ca=!1;for(const ja of P.includedReturns)if("last"===ja&&ea||"firstOfMany"===ja&&Z&&da||"lastOfMany"===ja&&ea&&da||
"single"===ja&&!da){ca=!0;break}ca||(S=!1)}}S&&(N[J]=O,n[3*J]=n[3*O],n[3*J+1]=n[3*O+1],n[3*J+2]=n[3*O+2],v[3*J]=v[3*O],v[3*J+1]=v[3*O+1],v[3*J+2]=v[3*O+2],J++)}return J};d.getAttributeValues=function(n,v,N){return n?.attributeInfo.useElevation?v?q(v,N):null:n?.attributeInfo.storageInfo?y.readBinaryAttribute(n.attributeInfo.storageInfo,n.buffer,N):null};d.readGeometry=function(n,v){if(null==n.encoding||""===n.encoding){n=y.createGeometryIndexFromSchema(v,n);if(null==n.vertexAttributes.position)return;
v=y.createTypedView(v,n.vertexAttributes.position);var N=n.header.fields;n=[N.offsetX,N.offsetY,N.offsetZ];N=[N.scaleX,N.scaleY,N.scaleZ];const U=v.length/3,T=new Float64Array(3*U);for(let L=0;L<U;L++)T[3*L]=v[3*L]*N[0]+n[0],T[3*L+1]=v[3*L+1]*N[1]+n[1],T[3*L+2]=v[3*L+2]*N[2]+n[2];return T}if("lepcc-xyz"===n.encoding)return p.decodeXYZ(v).result};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/PointCloudClassBreaksRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/RendererLegendOptions ./support/pointCloud/ColorClassBreakInfo".split(" "),
function(d,u,r,K,V,y,p,q,E,z){var n;K=n=class extends q{constructor(v){super(v);this.type="point-cloud-class-breaks";this.colorClassBreakInfos=this.fieldTransformType=this.legendOptions=this.field=null}clone(){return new n({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:u.clone(this.colorClassBreakInfos),legendOptions:u.clone(this.legendOptions)})}};d.__decorate([y.enumeration({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],
K.prototype,"type",void 0);d.__decorate([r.property({json:{write:!0},type:String})],K.prototype,"field",void 0);d.__decorate([r.property({type:E,json:{write:!0}})],K.prototype,"legendOptions",void 0);d.__decorate([r.property({type:q.fieldTransformTypeKebabDict.apiValues,json:{type:q.fieldTransformTypeKebabDict.jsonValues,read:q.fieldTransformTypeKebabDict.read,write:q.fieldTransformTypeKebabDict.write}})],K.prototype,"fieldTransformType",void 0);d.__decorate([r.property({type:[z],json:{write:!0}})],
K.prototype,"colorClassBreakInfos",void 0);return K=n=d.__decorate([p.subclass("esri.renderers.PointCloudClassBreaksRenderer")],K)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(d,u,r){d.enumeration=function(K,V={}){K=K instanceof u.JSONMap?K:new u.JSONMap(K,V);const {alwaysWriteDefaults:y,default:p,ignoreUnknown:q=!0,name:E,nonNullable:z,readOnly:n=!1}=V;return r.property({type:q?K.apiValues:String,json:{type:K.jsonValues,
default:p,name:E,read:n?!1:{reader:K.read},write:{writer:K.write,alwaysWriteDefaults:y}},nonNullable:z,readOnly:n})};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/PointCloudRenderer":function(){define("../chunks/tslib.es6 ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./support/pointCloud/ColorModulation ./support/pointCloud/pointSizeAlgorithmTypeUtils".split(" "),
function(d,u,r,K,V,y,p,q,E,z){y=u.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});r=class extends r.JSONSupport{constructor(n){super(n);this.type=void 0;this.colorModulation=this.pointSizeAlgorithm=null;this.pointsPerInch=10}clone(){console.warn(".clone() is not implemented for "+this.declaredClass);return null}cloneProperties(){return{pointSizeAlgorithm:K.clone(this.pointSizeAlgorithm),
colorModulation:K.clone(this.colorModulation),pointsPerInch:K.clone(this.pointsPerInch)}}};d.__decorate([V.property({type:y.apiValues,readOnly:!0,nonNullable:!0,json:{type:y.jsonValues,read:!1,write:y.write}})],r.prototype,"type",void 0);d.__decorate([V.property({types:z.pointSizeAlgorithmTypes,json:{write:!0}})],r.prototype,"pointSizeAlgorithm",void 0);d.__decorate([V.property({type:E,json:{write:!0}})],r.prototype,"colorModulation",void 0);d.__decorate([V.property({json:{write:!0},nonNullable:!0,
type:Number})],r.prototype,"pointsPerInch",void 0);r=d.__decorate([q.subclass("esri.renderers.PointCloudRenderer")],r);(r||={}).fieldTransformTypeKebabDict=new u.JSONMap({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});return r})},"esri/renderers/support/pointCloud/ColorModulation":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,r,K,V,y,p){var q;u=q=class extends u.JSONSupport{constructor(){super(...arguments);this.field=null;this.minValue=0;this.maxValue=255}clone(){return new q({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};d.__decorate([r.property({type:String,json:{write:!0}})],u.prototype,"field",void 0);d.__decorate([r.property({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"minValue",void 0);d.__decorate([r.property({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,
"maxValue",void 0);return u=q=d.__decorate([p.subclass("esri.renderers.support.pointCloud.ColorModulation")],u)})},"esri/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":function(){define(["exports","./PointSizeAlgorithm","./PointSizeFixedSizeAlgorithm","./PointSizeSplatAlgorithm"],function(d,u,r,K){d.pointSizeAlgorithmTypes={key:"type",base:u,typeMap:{"fixed-size":r,splat:K}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/pointCloud/PointSizeAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,r,K,V,y,p,q){u=new u.JSONMap({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});r=class extends r.JSONSupport{};d.__decorate([K.property({type:u.apiValues,readOnly:!0,nonNullable:!0,json:{type:u.jsonValues,read:!1,write:u.write}})],r.prototype,"type",void 0);return r=d.__decorate([q.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],r)})},"esri/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./PointSizeAlgorithm".split(" "),
function(d,u,r,K,V,y,p,q){var E;r=E=class extends q{constructor(){super(...arguments);this.type="fixed-size";this.size=0;this.useRealWorldSymbolSizes=null}clone(){return new E({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};d.__decorate([y.enumeration({pointCloudFixedSizeAlgorithm:"fixed-size"})],r.prototype,"type",void 0);d.__decorate([u.property({type:Number,nonNullable:!0,json:{write:!0}})],r.prototype,"size",void 0);d.__decorate([u.property({type:Boolean,json:{write:!0}})],
r.prototype,"useRealWorldSymbolSizes",void 0);return r=E=d.__decorate([p.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],r)})},"esri/renderers/support/pointCloud/PointSizeSplatAlgorithm":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./PointSizeAlgorithm".split(" "),
function(d,u,r,K,V,y,p,q){var E;r=E=class extends q{constructor(){super(...arguments);this.type="splat";this.scaleFactor=1}clone(){return new E({scaleFactor:this.scaleFactor})}};d.__decorate([y.enumeration({pointCloudSplatAlgorithm:"splat"})],r.prototype,"type",void 0);d.__decorate([u.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],r.prototype,"scaleFactor",void 0);return r=E=d.__decorate([p.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],r)})},"esri/renderers/support/RendererLegendOptions":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,r,K,V,y,p,q,E,z){r=r.strict()({ascendingValues:"ascending-values",descendingValues:"descending-values"});u=class extends u.ClonableMixin(K.JSONSupport){constructor(n){super(n);this.order=this.title=null}};d.__decorate([V.property({type:String,json:{write:!0}})],u.prototype,"title",void 0);d.__decorate([E.enumeration(r)],u.prototype,"order",void 0);return u=d.__decorate([z.subclass("esri.renderers.support.RendererLegendOptions")],u)})},"esri/core/Clonable":function(){define("exports ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),
function(d,u,r,K,V,y,p,q,E,z){K=n=>{n=class extends n{clone(){var v=E.getProperties(this);p.assertIsSome(v,"unable to clone instance of non-accessor class");var N=v.metadata;const U=v.store,T={};v=new Map;for(var L in N){var J=N[L];const P=U?.originOf(L),da=J.clonable;if(J.readOnly||!1===da||P!==q.OriginId.USER&&P!==q.OriginId.DEFAULTS&&P!==q.OriginId.WEB_MAP&&P!==q.OriginId.WEB_SCENE)continue;J=this[L];let Z=null;Z="function"===typeof da?da(J):"reference"===da?J:V.tryClone(J);if(null==J||null!=Z)P===
q.OriginId.DEFAULTS?v.set(L,Z):T[L]=Z}N=new (Object.getPrototypeOf(this).constructor)(T);if(v.size&&(L=E.getProperties(N)?.store))for(const [P,da]of v)L.set(P,da,q.OriginId.DEFAULTS);return N}};return n=u.__decorate([z.subclass("esri.core.Clonable")],n)};d.Clonable=class extends K(r){};d.Clonable=u.__decorate([z.subclass("esri.core.Clonable")],d.Clonable);d.ClonableMixin=K;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/pointCloud/ColorClassBreakInfo":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(d,u,r,K,V,y,p){var q;r=q=class extends r.JSONSupport{constructor(){super(...arguments);this.label=this.description=null;this.maxValue=this.minValue=0;this.color=null}clone(){return new q({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:K.clone(this.color)})}};d.__decorate([V.property({type:String,json:{write:!0}})],r.prototype,"description",void 0);d.__decorate([V.property({type:String,json:{write:!0}})],r.prototype,"label",void 0);d.__decorate([V.property({type:Number,
json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],r.prototype,"minValue",void 0);d.__decorate([V.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],r.prototype,"maxValue",void 0);d.__decorate([V.property({type:u,json:{type:[y.Integer],write:!0}})],r.prototype,"color",void 0);return r=q=d.__decorate([p.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],r)})},"esri/renderers/PointCloudStretchRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/RendererLegendOptions ./visualVariables/support/ColorStop".split(" "),
function(d,u,r,K,V,y,p,q,E,z){var n;K=n=class extends q{constructor(v){super(v);this.type="point-cloud-stretch";this.stops=this.fieldTransformType=this.legendOptions=this.field=null}clone(){return new n({...this.cloneProperties(),field:u.clone(this.field),fieldTransformType:u.clone(this.fieldTransformType),stops:u.clone(this.stops),legendOptions:u.clone(this.legendOptions)})}};d.__decorate([y.enumeration({pointCloudStretchRenderer:"point-cloud-stretch"})],K.prototype,"type",void 0);d.__decorate([r.property({json:{write:!0},
type:String})],K.prototype,"field",void 0);d.__decorate([r.property({type:E,json:{write:!0}})],K.prototype,"legendOptions",void 0);d.__decorate([r.property({type:q.fieldTransformTypeKebabDict.apiValues,json:{type:q.fieldTransformTypeKebabDict.jsonValues,read:q.fieldTransformTypeKebabDict.read,write:q.fieldTransformTypeKebabDict.write}})],K.prototype,"fieldTransformType",void 0);d.__decorate([r.property({type:[z],json:{write:!0}})],K.prototype,"stops",void 0);return K=n=d.__decorate([p.subclass("esri.renderers.PointCloudStretchRenderer")],
K)})},"esri/renderers/visualVariables/support/ColorStop":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer".split(" "),function(d,u,r,K,V,y,p,q,E){var z;r=z=class extends r.JSONSupport{constructor(n){super(n);this.value=this.label=this.color=
null}writeValue(n,v,N){v[N]=null==n?0:n}clone(){return new z({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};d.__decorate([K.property({type:u,json:{type:[V.Integer],write:!0}})],r.prototype,"color",void 0);d.__decorate([K.property({type:String,json:{write:!0}})],r.prototype,"label",void 0);d.__decorate([K.property({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],r.prototype,"value",void 0);d.__decorate([E.writer("value")],r.prototype,"writeValue",null);return r=z=
d.__decorate([q.subclass("esri.renderers.visualVariables.support.ColorStop")],r)})},"esri/renderers/PointCloudUniqueValueRenderer":function(){define("../chunks/tslib.es6 ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./PointCloudRenderer ./support/RendererLegendOptions ./support/pointCloud/ColorUniqueValueInfo".split(" "),function(d,u,r,K,V,y,p,q,E,z){var n;K=n=class extends q{constructor(v){super(v);
this.type="point-cloud-unique-value";this.legendOptions=this.colorUniqueValueInfos=this.fieldTransformType=this.field=null}clone(){return new n({...this.cloneProperties(),field:u.clone(this.field),fieldTransformType:u.clone(this.fieldTransformType),colorUniqueValueInfos:u.clone(this.colorUniqueValueInfos),legendOptions:u.clone(this.legendOptions)})}};d.__decorate([y.enumeration({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],K.prototype,"type",void 0);d.__decorate([r.property({json:{write:!0},
type:String})],K.prototype,"field",void 0);d.__decorate([r.property({type:q.fieldTransformTypeKebabDict.apiValues,json:{type:q.fieldTransformTypeKebabDict.jsonValues,read:q.fieldTransformTypeKebabDict.read,write:q.fieldTransformTypeKebabDict.write}})],K.prototype,"fieldTransformType",void 0);d.__decorate([r.property({type:[z],json:{write:!0}})],K.prototype,"colorUniqueValueInfos",void 0);d.__decorate([r.property({type:E,json:{write:!0}})],K.prototype,"legendOptions",void 0);return K=n=d.__decorate([p.subclass("esri.renderers.PointCloudUniqueValueRenderer")],
K)})},"esri/renderers/support/pointCloud/ColorUniqueValueInfo":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(d,u,r,K,V,y,p){var q;r=q=class extends r.JSONSupport{constructor(){super(...arguments);this.color=this.values=this.label=this.description=null}clone(){return new q({description:this.description,
label:this.label,values:K.clone(this.values),color:K.clone(this.color)})}};d.__decorate([V.property({type:String,json:{write:!0}})],r.prototype,"description",void 0);d.__decorate([V.property({type:String,json:{write:!0}})],r.prototype,"label",void 0);d.__decorate([V.property({type:[String],json:{write:!0}})],r.prototype,"values",void 0);d.__decorate([V.property({type:u,json:{type:[y.Integer],write:!0}})],r.prototype,"color",void 0);return r=q=d.__decorate([p.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],
r)})},"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("exports ../../../../core/Error ../../../../core/lang ../../../../core/Logger ./LEPCC ../../webgl-engine/lib/VertexAttribute".split(" "),function(d,u,r,K,V,y){function p(O,S){const aa={byteOffset:0,byteCount:0,fields:Object.create(null)};let ja=0;for(let ha=0;ha<S.length;ha++){const C=S[ha],G=C.valueType||C.type;aa.fields[C.property]=(0,ca[G])(O,ja);ja+=ea[G].BYTES_PER_ELEMENT}aa.byteCount=ja;return aa}function q(O,S,aa){return E(O,
S,aa).map(ja=>{ja=ja?Date.parse(ja):null;return null==ja||Number.isNaN(ja)?null:ja})}function E(O,S,aa){const ja=[];let ha,C=0,G;for(G=0;G<O;G+=1){ha=S[G];if(0<ha){var I=ja,ba=I.push,sa=aa,na=C,g=ha-1;let F="",X=0;for(;X<g;){var k=sa[na+X];if(128>k)F+=String.fromCharCode(k),X++;else if(192<=k&&224>k){if(X+1>=g)throw new u("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");F+=String.fromCharCode((k&31)<<6|sa[na+X+1]&63);X+=2}else if(224<=k&&240>k){if(X+2>=g)throw new u("utf8-decode-error",
"UTF-8 Decode failed. Multi byte character was truncated.");F+=String.fromCharCode((k&15)<<12|(sa[na+X+1]&63)<<6|sa[na+X+2]&63);X+=3}else if(240<=k&&248>k){if(X+3>=g)throw new u("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");k=(k&7)<<18|(sa[na+X+1]&63)<<12|(sa[na+X+2]&63)<<6|sa[na+X+3]&63;F=65536<=k?F+String.fromCharCode((k-65536>>10)+55296,(k&1023)+56320):F+String.fromCharCode(k);X+=4}else throw new u("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");
}ba.call(I,F);if(0!==aa[C+ha-1])throw new u("string-array-error","Invalid string array: missing null termination.");}else ja.push(null);C+=ha}return ja}function z(O,S){return new ea[S.valueType](O,S.byteOffset,S.count*S.valuesPerElement)}function n(O,S){return new Uint8Array(O,S.byteOffset,S.byteCount)}function v(O,S,aa){O=null!=S.header?p(O,S.header):{byteOffset:0,byteCount:0,fields:{count:aa}};aa={header:O,byteOffset:O.byteCount,byteCount:0,entries:Object.create(null)};let ja=O.byteCount;for(let ha=
0;ha<S.ordering.length;ha++){const C=S.ordering[ha],G=r.clone(S[C]);G.count=O.fields.count??0;if("String"===G.valueType){G.byteOffset=ja;G.byteCount=O.fields[C+"ByteCount"];if("UTF-8"!==G.encoding)throw new u("unsupported-encoding","Unsupported String encoding.",{encoding:G.encoding});if(G.timeEncoding&&"ECMA_ISO8601"!==G.timeEncoding)throw new u("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:G.timeEncoding});}else if(J(G.valueType)){const I=P(G.valueType);ja+=0!==ja%I?I-ja%
I:0;G.byteOffset=ja;G.byteCount=I*G.valuesPerElement*G.count}else throw new u("unsupported-value-type","Unsupported binary valueType",{valueType:G.valueType});ja+=G.byteCount??0;aa.entries[C]=G}aa.byteCount=ja-aa.byteOffset;return aa}function N(O,S,aa){S!==O&&da().error(`Invalid ${aa} buffer size\n expected: ${O}, actual: ${S})`);if(S<O)throw new u("buffer-too-small","Binary buffer is too small",{expectedSize:O,actualSize:S});}function U(O){return{isDraco:!1,isLegacy:!1,color:null!=O.color,normal:null!=
O.normal,uv0:null!=O.uv0,uvRegion:null!=O.uvRegion,featureIndex:null!=O.faceRange&&null!=O.featureId}}function T(O){const S={isDraco:!1,isLegacy:!0,color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const aa of O.ordering)if(O.vertexAttributes[aa])switch(aa){case "normal":S.normal=!0;break;case "color":S.color=!0;break;case "uv0":S.uv0=!0;break;case "region":S.uvRegion=!0}O.featureAttributes&&O.featureAttributeOrder&&(S.featureIndex=!0);return S}function L(O){const S={isDraco:!0,isLegacy:!1,
color:!1,normal:!1,uv0:!1,uvRegion:!1,featureIndex:!1};for(const aa of O)switch(aa){case "normal":S.normal=!0;break;case "uv0":S.uv0=!0;break;case "color":S.color=!0;break;case "uv-region":S.uvRegion=!0;break;case "feature-index":S.featureIndex=!0}return S}function J(O){return ea.hasOwnProperty(O)}function P(O){return J(O)?ea[O].BYTES_PER_ELEMENT:0}const da=()=>K.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader"),Z={position:y.VertexAttribute.POSITION,normal:y.VertexAttribute.NORMAL,color:y.VertexAttribute.COLOR,
uv0:y.VertexAttribute.UV0,region:y.VertexAttribute.UVREGION},ea={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},ca={Float32:(O,S)=>(new DataView(O,0)).getFloat32(S,!0),Float64:(O,S)=>(new DataView(O,0)).getFloat64(S,!0),UInt8:(O,S)=>(new DataView(O,0)).getUint8(S),Int8:(O,S)=>(new DataView(O,0)).getInt8(S),UInt16:(O,S)=>(new DataView(O,0)).getUint16(S,!0),Int16:(O,S)=>(new DataView(O,0)).getInt16(S,
!0),UInt32:(O,S)=>(new DataView(O,0)).getUint32(S,!0),Int32:(O,S)=>(new DataView(O,0)).getInt32(S,!0)};d.createAttributeDataIndex=v;d.createGeometryDescriptor=function(O,S){return O&&O.compressedAttributes&&"draco"===O.compressedAttributes.encoding?L(O.compressedAttributes.attributes):O?U(O):T(S)};d.createGeometryDescriptorForDraco=L;d.createGeometryDescriptorFromDefinition=U;d.createGeometryDescriptorFromSchema=T;d.createGeometryIndexFromSchema=function(O,S){var aa=p(O,S&&S.header);let ja=aa.byteCount;
const ha={isDraco:!1,header:aa,byteOffset:aa.byteCount,byteCount:0,vertexAttributes:{}};aa=aa.fields;var C=null!=aa.vertexCount?aa.vertexCount:aa.count;for(var G of S.ordering){if(!S.vertexAttributes[G])continue;const ba={...S.vertexAttributes[G],byteOffset:ja,count:C};ha.vertexAttributes[Z[G]||"_"+G]=ba;ja+=P(ba.valueType)*ba.valuesPerElement*C}G=aa.faceCount;if(S.faces&&G){ha.faces={};for(var I of S.ordering)S.faces[I]&&(C={...S.faces[I],byteOffset:ja,count:G},ha.faces[I]=C,ja+=P(C.valueType)*C.valuesPerElement*
G)}I=aa.featureCount;if(S.featureAttributes&&S.featureAttributeOrder&&I){ha.featureAttributes={};for(const ba of S.featureAttributeOrder)S.featureAttributes[ba]&&(aa={...S.featureAttributes[ba],byteOffset:ja,count:I},ha.featureAttributes[ba]=aa,G="UInt64"===aa.valueType?8:P(aa.valueType),ja+=G*aa.valuesPerElement*I)}N(ja,O.byteLength,"geometry");ha.byteCount=ja-ha.byteOffset;return ha};d.createRawView=n;d.createTypedView=z;d.getBytesPerValue=P;d.isValueType=J;d.readBinaryAttribute=function(O,S,aa){if("lepcc-rgb"===
O.encoding)return V.decodeRGB(S);if("lepcc-intensity"===O.encoding)return V.decodeIntensity(S);if(null!=O.encoding&&""!==O.encoding)throw new u("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");O["attributeByteCounts "]&&!O.attributeByteCounts&&(da().warn("Warning: Trailing space in 'attributeByteCounts '."),O.attributeByteCounts=O["attributeByteCounts "]);"ObjectIds"===O.ordering[0]&&O.hasOwnProperty("objectIds")&&(da().warn("Warning: Case error in objectIds"),
O.ordering[0]="objectIds");aa=v(S,O,aa);N(aa.byteOffset+aa.byteCount,S.byteLength,"attribute");if(O=aa.entries.attributeValues||aa.entries.objectIds){if("String"===O.valueType){aa=aa.entries.attributeByteCounts;const ja=z(S,aa);S=n(S,O);return O.timeEncoding?q(aa.count,ja,S):E(aa.count,ja,S)}return z(S,O)}throw new u("bad-attribute-storage-info","Bad attributeStorageInfo specification.");};d.readDateStringArray=q;d.readHeader=p;d.readStringArray=E;d.valueType2ArrayBufferReader=ca;d.valueType2TypedArrayClassMap=
ea;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/i3s/LEPCC":function(){define(["exports","../../../../core/Error"],function(d,u){function r(p,q,E){return{identifier:String.fromCharCode.apply(null,new Uint8Array(p,E+y.identifierOffset,y.identifierLength)),version:q.getUint16(E+y.versionOffset,!0),checksum:q.getUint32(E+y.checksumOffset,!0)}}function K(p,q,E){const z=[];q=V(p,q,z);const n=[];for(let v=0;v<z.length;v++){n.length=0;q=V(p,q,n);for(let N=0;N<n.length;N++)E.push(n[N]+
z[v])}return q}function V(p,q,E){var z=new DataView(p,q),n=z.getUint8(0);const v=n&31;var N=!!(n&32),U=(n&192)>>6;n=0;if(0===U)n=z.getUint32(1,!0),q+=5;else if(1===U)n=z.getUint16(1,!0),q+=3;else if(2===U)n=z.getUint8(1),q+=2;else throw new u("lepcc-decode-error","Bad count type");if(N)throw new u("lepcc-decode-error","LUT not implemented");p=new Uint8Array(p,q,Math.ceil(n*v/8));U=N=z=0;const T=-1>>>32-v;for(let L=0;L<n;L++){for(;N<v;)z|=p[U]<<N,N+=8,U+=1;E[L]=z&T;z>>>=v;N-=v;32<N+v&&(z|=p[U-1]>>
8-N)}return q+U}const y={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};d.decodeIntensity=function(p){const q=new DataView(p,0);var E=0;const {identifier:z,version:n}=r(p,q,E);E+=y.byteCount;if("Intensity "!==z)throw new u("lepcc-decode-error","Bad identifier");if(1<n)throw new u("lepcc-decode-error","Unknown version");var v=E;var N=q.getUint32(v+0,!0);var U=q.getUint32(v+4,!0);var T=q.getUint32(v+8,!0);var L=q.getUint16(v+12,!0);var J=q.getUint8(v+14);q.getUint8(v+
15);E+=16;if(U*2**32+N!==p.byteLength)throw new u("lepcc-decode-error","Bad size");N=new Uint16Array(T);if(8===J){if(T+E!==p.byteLength)throw new u("lepcc-decode-error","Bad size");p=new Uint8Array(p,E,T);for(E=0;E<T;E++)N[E]=p[E]*L}else if(16===J){if(2*T+E!==p.byteLength)throw new u("lepcc-decode-error","Bad size");p=new Uint16Array(p,E,T);for(E=0;E<T;E++)N[E]=p[E]*L}else{J=[];if(V(p,E,J)!==p.byteLength)throw new u("lepcc-decode-error","Bad size");for(p=0;p<T;p++)N[p]=J[p]*L}return N};d.decodeRGB=
function(p){var q=new DataView(p,0),E=0;const {identifier:z,version:n}=r(p,q,E);E+=y.byteCount;if("ClusterRGB"!==z)throw new u("lepcc-decode-error","Bad identifier");if(1<n)throw new u("lepcc-decode-error","Unknown version");var v=E;var N=q.getUint32(v+0,!0);var U=q.getUint32(v+4,!0);var T=q.getUint32(v+8,!0);var L=q.getUint16(v+12,!0);var J=q.getUint8(v+14);v=q.getUint8(v+15);E+=16;if(U*2**32+N!==p.byteLength)throw new u("lepcc-decode-error","Bad size");if((2===J||1===J)&&0===v){if(3*L+T+E!==p.byteLength||
256<L)throw new u("lepcc-decode-error","Bad count");q=new Uint8Array(p,E,3*L);E=new Uint8Array(p,E+3*L,T);p=new Uint8Array(3*T);for(L=0;L<T;L++)N=E[L],p[3*L]=q[3*N],p[3*L+1]=q[3*N+1],p[3*L+2]=q[3*N+2];return p}if(0===J&&0===v){if(3*T+E!==p.byteLength||0!==L)throw new u("lepcc-decode-error","Bad count");return(new Uint8Array(p,E)).slice()}if(2>=J&&1===v){if(E+3!==p.byteLength||1!==L)throw new u("lepcc-decode-error","Bad count");p=q.getUint8(E);L=q.getUint8(E+1);E=q.getUint8(E+2);q=new Uint8Array(3*
T);for(N=0;N<T;N++)q[3*N]=p,q[3*N+1]=L,q[3*N+2]=E;return q}throw new u("lepcc-decode-error","Bad method "+J+","+v);};d.decodeXYZ=function(p){var q=new DataView(p,0),E=0;const {identifier:z,version:n}=r(p,q,E);E+=y.byteCount;if("LEPCC     "!==z)throw new u("lepcc-decode-error","Bad identifier");if(1<n)throw new u("lepcc-decode-error","Unknown version");var v=E;var N=q.getUint32(v+0,!0);var U=q.getUint32(v+4,!0);var T=q.getFloat64(v+8,!0);var L=q.getFloat64(v+16,!0);var J=q.getFloat64(v+24,!0);var P=
q.getFloat64(v+32,!0);var da=q.getFloat64(v+40,!0);var Z=q.getFloat64(v+48,!0);var ea=q.getFloat64(v+56,!0);var ca=q.getFloat64(v+64,!0);var O=q.getFloat64(v+72,!0);var S=q.getUint32(v+80,!0);q.getUint32(v+84,!0);E+=88;if(U*2**32+N!==p.byteLength)throw new u("lepcc-decode-error","Bad size");N=new Float64Array(3*S);U=[];S=[];q=[];v=[];E=K(p,E,U);E=K(p,E,S);E=K(p,E,q);E=K(p,E,v);if(E!==p.byteLength)throw new u("lepcc-decode-error","Bad length");E=p=0;for(let aa=0;aa<U.length;aa++){E+=U[aa];let ja=0;
for(let ha=0;ha<S[aa];ha++){ja+=q[p];const C=v[p];N[3*p]=Math.min(P,T+2*ea*ja);N[3*p+1]=Math.min(da,L+2*ca*E);N[3*p+2]=Math.min(Z,J+2*O*C);p++}}return{errorX:ea,errorY:ca,errorZ:O,result:N}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(d){d.VertexAttribute=void 0;(function(u){u.POSITION="position";u.NORMAL="normal";u.NORMALCOMPRESSED="normalCompressed";u.UV0="uv0";u.COLOR="color";u.SYMBOLCOLOR=
"symbolColor";u.SIZE="size";u.ROTATION="rotation";u.TANGENT="tangent";u.OFFSET="offset";u.PERSPECTIVEDIVIDE="perspectiveDivide";u.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance";u.LENGTH="length";u.PREVPOSITION="prevPosition";u.NEXTPOSITION="nextPosition";u.SUBDIVISIONFACTOR="subdivisionFactor";u.COLORFEATUREATTRIBUTE="colorFeatureAttribute";u.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";u.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";u.DISTANCETOSTART="distanceToStart";u.UVMAPSPACE="uvMapSpace";
u.BOUNDINGRECT="boundingRect";u.UVREGION="uvRegion";u.PROFILERIGHT="profileRight";u.PROFILEUP="profileUp";u.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";u.FEATUREVALUE="featureValue";u.INSTANCEMODELORIGINHI="instanceModelOriginHi";u.INSTANCEMODELORIGINLO="instanceModelOriginLo";u.INSTANCEMODEL="instanceModel";u.INSTANCEMODELNORMAL="instanceModelNormal";u.INSTANCECOLOR="instanceColor";u.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";u.LOCALTRANSFORM="localTransform";u.GLOBALTRANSFORM="globalTransform";
u.BOUNDINGSPHERE="boundingSphere";u.MODELORIGIN="modelOrigin";u.MODELSCALEFACTORS="modelScaleFactors";u.FEATUREATTRIBUTE="featureAttribute";u.STATE="state";u.LODLEVEL="lodLevel";u.POSITION0="position0";u.POSITION1="position1";u.NORMAL2COMPRESSED="normal2Compressed";u.COMPONENTINDEX="componentIndex";u.VARIANTOFFSET="variantOffset";u.VARIANTSTROKE="variantStroke";u.VARIANTEXTENSION="variantExtension";u.SIDENESS="sideness";u.START="start";u.END="end";u.UP="up";u.START_UP="startUp";u.END_UP="endUp";u.EXTRUDE=
"extrude";u.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";u.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(d.VertexAttribute||(d.VertexAttribute={}));d.affectsGeometry=function(u){return u===d.VertexAttribute.POSITION};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/orientedBoundingBox":function(){define("exports ../../../core/libs/gl-matrix-2/math/mat3 ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../core/libs/gl-matrix-2/math/quat ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/ellipsoidUtils ../../../geometry/spatialReferenceEllipsoidUtils ../../../geometry/projection/computeTranslationToOriginAndRotation ../../../geometry/projection/projectBuffer ../../../geometry/projection/projectors ../../../geometry/support/plane ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/vectorStacks ../../ViewingMode ./dito ../webgl-engine/lib/Attribute".split(" "),
function(d,u,r,K,V,y,p,q,E,z,n,v,N,U,T,L,J,P,da,Z,ea){function ca(e,m=new ja){Z.computeOBB(e,m);return m}function O(e,m,a,b,c){var f=m.getQuaternion(C);f=u.fromQuat(qa,f);m=m.getHalfSize(ma);for(let t=0;8>t;++t){for(var l=0;3>l;++l)X[l]=m[l]*(0!==(t&1<<l)?-1:1);for(l=0;3>l;++l){let w=a[l];for(let x=0;3>x;++x)w+=X[x]*f[3*x+l];k[3*t+l]=w}}U.projectBuffer(k,e,0,k,b,0,8);ca(F,c)}function S(e,m,a,b,c=v.getSphericalPCPF(a),f=T.getProjector(a,c)){e.getCorners(B);e.getCenter(X);X[2]+=b;N.computeTranslationToOriginAndRotation(a,
X,A,c);m.setCenter(A[12],A[13],A[14]);a=2*Math.sqrt(1+A[0]+A[5]+A[10]);ha[0]=(A[6]-A[9])/a;ha[1]=(A[8]-A[2])/a;ha[2]=(A[1]-A[4])/a;ha[3]=.25*a;e=e.getQuaternion(C);m.quaternion=V.multiply(ha,ha,e);V.conjugate(ha,ha);p.set(R,0,0,0);e=m.getCenter(ka);for(const l of B)l[2]+=b,f(l,0,l,0),p.sub(D,l,e),p.transformQuat(D,D,ha),p.abs(D,D),p.max(R,R,D);m.halfSize=R}function aa(e,m,a,b,c=v.getSphericalPCPF(a)){const f=n.getReferenceEllipsoid(a),l=1+Math.max(0,b)/(f.radius+e.centerZ);e.getCenter(X);X[2]+=b;
U.projectBuffer(X,a,0,X,c,0);m.center=X;a=e.getQuaternion(C);m.quaternion=a;V.conjugate(ha,a);p.set(D,0,0,1);p.transformQuat(D,D,ha);e=e.getHalfSize(ma);p.set(D,e[0]*Math.abs(D[0]),e[1]*Math.abs(D[1]),e[2]*Math.abs(D[2]));p.scale(D,D,f.inverseFlattening);p.add(D,e,D);m.halfSize=p.scale(D,D,l)}class ja{constructor(e=q.ZEROS,m=h,a=y.IDENTITY){this._data=[e[0],e[1],e[2],m[0],m[1],m[2],a[0],a[1],a[2],a[3]]}clone(){const e=new ja;e._data=this._data.slice();return e}invalidate(){this._data[3]=-1}get isValid(){return 0<=
this._data[3]}static fromData(e){const m=new ja;m._data=e.slice();return m}static fromJSON(e){return new ja(e.center,e.halfSize,e.quaternion)}copy(e){this._data=e.data.slice()}get center(){return p.set(P.sv3d.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(e){e[0]=this._data[0];e[1]=this._data[1];e[2]=this._data[2];return e}set center(e){this._data[0]=e[0];this._data[1]=e[1];this._data[2]=
e[2]}setCenter(e,m,a){this._data[0]=e;this._data[1]=m;this._data[2]=a}get halfSize(){return p.set(P.sv3d.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(e){e[0]=this._data[3];e[1]=this._data[4];e[2]=this._data[5];return e}set halfSize(e){this._data[3]=e[0];this._data[4]=e[1];this._data[5]=e[2]}get quaternion(){return V.set(P.sq4d.get(),this._data[6],this._data[7],this._data[8],
this._data[9])}getQuaternion(e){e[0]=this._data[6];e[1]=this._data[7];e[2]=this._data[8];e[3]=this._data[9];return e}set quaternion(e){this._data[6]=e[0];this._data[7]=e[1];this._data[8]=e[2];this._data[9]=e[3]}get data(){return this._data}getCorners(e){const m=ha,a=this._data;m[0]=a[6];m[1]=a[7];m[2]=a[8];m[3]=a[9];for(let b=0;8>b;++b){const c=e[b];c[0]=(b&1?-1:1)*a[3];c[1]=(b&2?-1:1)*a[4];c[2]=(b&4?-1:1)*a[5];p.transformQuat(c,c,m);c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}}doesIntersectFrustumConservativeApproximation(e){return 0>=
this.intersectPlane(e[0])&&0>=this.intersectPlane(e[1])&&0>=this.intersectPlane(e[2])&&0>=this.intersectPlane(e[3])&&0>=this.intersectPlane(e[4])&&0>=this.intersectPlane(e[5])}get radius(){const e=this._data[3],m=this._data[4],a=this._data[5];return Math.sqrt(e*e+m*m+a*a)}intersectSphere(e){I[0]=this._data[0]-e[0];I[1]=this._data[1]-e[1];I[2]=this._data[2]-e[2];const m=this.getQuaternion(C);V.conjugate(ha,m);p.transformQuat(I,I,ha);p.abs(I,I);ba[0]=Math.min(I[0],this._data[3]);ba[1]=Math.min(I[1],
this._data[4]);ba[2]=Math.min(I[2],this._data[5]);return p.sqrDist(ba,I)<e[3]*e[3]}intersectSphereWithMBS(e,m=this.radius){const a=this._data;I[0]=a[0]-e[0];I[1]=a[1]-e[1];I[2]=a[2]-e[2];e=e[3];const b=p.sqrLen(I);m=e+m;if(b>m*m)return!1;ha[0]=-a[6];ha[1]=-a[7];ha[2]=-a[8];ha[3]=a[9];p.transformQuat(I,I,ha);p.abs(I,I);ba[0]=Math.min(I[0],a[3]);ba[1]=Math.min(I[1],a[4]);ba[2]=Math.min(I[2],a[5]);return p.sqrDist(ba,I)<e*e}intersectPlane(e){const m=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+
e[3];e=this.projectedRadius(L.getNormal(e));return m>e?1:m<-e?-1:0}intersectRay(e,m,a=0){var b=this._data,c=ha;c[0]=-b[6];c[1]=-b[7];c[2]=-b[8];c[3]=b[9];I[0]=e[0]-b[0];I[1]=e[1]-b[1];I[2]=e[2]-b[2];e=p.transformQuat(I,I,ha);m=p.transformQuat(ba,m,ha);b=-Infinity;c=Infinity;const f=this.getHalfSize(ma);for(let t=0;3>t;t++){var l=e[t];const w=m[t],x=f[t]+a;if(1E-6<Math.abs(w)){const M=(x-l)/w;l=(-x-l)/w;b=Math.max(b,Math.min(M,l));c=Math.min(c,Math.max(M,l))}else if(l>x||l<-x)return!1}return b<=c}projectedArea(e,
m,a,b){var c=this.getQuaternion(C);V.conjugate(ha,c);I[0]=e[0]-this._data[0];I[1]=e[1]-this._data[1];I[2]=e[2]-this._data[2];p.transformQuat(I,I,ha);var f=this.getHalfSize(ma),l=I[0]<-f[0]?-1:I[0]>f[0]?1:0,t=I[1]<-f[1]?-1:I[1]>f[1]?1:0;const w=I[2]<-f[2]?-1:I[2]>f[2]?1:0;e=Math.abs(l)+Math.abs(t)+Math.abs(w);if(0===e)return Infinity;e=1===e?4:6;l=6*(l+3*t+9*w+13);u.fromQuat(qa,c);u.scale(qa,qa,f);c=this.getCenter(fa);for(f=0;f<e;f++)t=g[l+f],p.set(I,((t&1)<<1)-1,(t&2)-1,((t&4)>>1)-1),p.transformMat3(I,
I,qa),p.add(sa,c,I),sa[3]=1,E.transformMat4(sa,sa,m),t=1/Math.max(1E-6,sa[3]),na[2*f]=sa[0]*t,na[2*f+1]=sa[1]*t;m=2*e-2;e=na[0]*(na[3]-na[m+1])+na[m]*(na[1]-na[m-1]);for(c=2;c<m;c+=2)e+=na[c]*(na[c+3]-na[c-1]);return Math.abs(e)*a*b*.125}projectedRadius(e){const m=this.getQuaternion(C);V.conjugate(ha,m);p.transformQuat(I,e,ha);return Math.abs(I[0]*this._data[3])+Math.abs(I[1]*this._data[4])+Math.abs(I[2]*this._data[5])}minimumDistancePlane(e){const m=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+
e[3];e=this.projectedRadius(L.getNormal(e));return m-e}maximumDistancePlane(e){const m=e[0]*this._data[0]+e[1]*this._data[1]+e[2]*this._data[2]+e[3];e=this.projectedRadius(L.getNormal(e));return m+e}toAaBoundingBox(e){var m=this.getQuaternion(C),a=u.fromQuat(qa,m);m=this._data[3]*Math.abs(a[0])+this._data[4]*Math.abs(a[3])+this._data[5]*Math.abs(a[6]);const b=this._data[3]*Math.abs(a[1])+this._data[4]*Math.abs(a[4])+this._data[5]*Math.abs(a[7]);a=this._data[3]*Math.abs(a[2])+this._data[4]*Math.abs(a[5])+
this._data[5]*Math.abs(a[8]);e[0]=this._data[0]-m;e[1]=this._data[1]-b;e[2]=this._data[2]-a;e[3]=this._data[0]+m;e[4]=this._data[1]+b;e[5]=this._data[2]+a}transform(e,m,a,b=0,c=v.getSphericalPCPF(a),f=v.getSphericalPCPF(m),l=T.getProjector(m,f)){a===c?m.isGeographic?aa(this,e,m,b,f):S(this,e,m,b,f,l):m.isWGS84&&(a.isWebMercator||J.isPlateCarree(a))?(this.getCenter(fa),fa[2]+=b,b=v.getSphericalPCPF(a),U.projectBuffer(fa,m,0,fa,b,0),O(b,this,fa,a,e)):m.isWebMercator&&J.isPlateCarree(a)?(this.getCenter(fa),
fa[2]+=b,O(m,this,fa,a,e)):(c=this.getCenter(fa),c[2]+=b,U.projectBuffer(c,m,0,c,a,0),e.center=c,this!==e&&(e.quaternion=this.getQuaternion(C),e.halfSize=this.getHalfSize(ma)))}}const ha=y.create(),C=y.create(),G=y.create(),I=q.create(),ba=q.create(),sa=z.create(),na=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],g=(()=>{const e=new Int8Array(162);let m=0;const a=b=>{for(let c=0;c<b.length;c++)e[m+c]=b[c];m+=6};a([6,2,3,1,5,4]);a([0,2,3,1,5,4]);a([0,2,3,7,5,4]);a([0,1,3,2,6,4]);a([0,1,3,2,0,0]);a([0,1,5,
7,3,2]);a([0,1,3,7,6,4]);a([0,1,3,7,6,2]);a([0,1,5,7,6,2]);a([0,1,5,4,6,2]);a([0,1,5,4,0,0]);a([0,1,3,7,5,4]);a([0,2,6,4,0,0]);a([0,0,0,0,0,0]);a([1,3,7,5,0,0]);a([2,3,7,6,4,0]);a([2,3,7,6,0,0]);a([2,3,1,5,7,6]);a([0,1,5,7,6,2]);a([0,1,5,7,6,4]);a([0,1,3,7,6,4]);a([4,5,7,6,2,0]);a([4,5,7,6,0,0]);a([4,5,1,3,7,6]);a([0,2,3,7,5,4]);a([6,2,3,7,5,4]);a([6,2,3,1,5,4]);return e})(),k=Array(24),F=new ea.Vertices(k,3),X=q.create(),fa=q.create(),ka=q.create(),ma=q.create(),qa=r.create(),A=K.create(),B=[[0,
0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],D=q.create(),R=q.create(),Y=q.create(),h=q.freeze(-1,-1,-1);d.Obb=ja;d.compute=ca;d.computeOffsetObb=function(e,m,a,b,c){var f=e.getQuaternion(C);c.quaternion=f;V.conjugate(ha,f);var l=e.getCenter(fa);f=e.getHalfSize(ma);if(b===da.ViewingMode.Global){p.transformQuat(D,l,ha);p.abs(R,D);p.min(Y,R,f);p.sub(Y,R,Y);b=p.length(Y);p.add(Y,R,f);const t=p.length(Y);b<a?(c.center=l,p.set(D,a,a,a),c.halfSize=p.add(D,f,D)):(m=0<t?1+m/t:1,l=0<b?1+a/
b:1,a=(l+m)/2,m=(l-m)/2,p.scale(Y,R,m),c.halfSize=p.scaleAndAdd(Y,Y,f,a),p.scale(Y,R,a),p.scaleAndAdd(Y,Y,f,m),p.sign(D,D),p.multiply(D,Y,D),e=e.getQuaternion(G),c.center=p.transformQuat(D,D,e))}else c.center=p.scaleAndAdd(D,l,q.UNIT_Z,(a+m)/2),e=p.transformQuat(D,q.UNIT_Z,ha),p.abs(e,e),c.halfSize=p.scaleAndAdd(R,f,e,(a-m)/2);return c};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(d,u){function r(g,
k){g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=k[4];g[4]=k[5];g[5]=k[6];g[6]=k[8];g[7]=k[9];g[8]=k[10];return g}function K(g,k){g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=k[3];g[4]=k[4];g[5]=k[5];g[6]=k[6];g[7]=k[7];g[8]=k[8];return g}function V(g,k,F,X,fa,ka,ma,qa,A,B){g[0]=k;g[1]=F;g[2]=X;g[3]=fa;g[4]=ka;g[5]=ma;g[6]=qa;g[7]=A;g[8]=B;return g}function y(g){g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=1;g[5]=0;g[6]=0;g[7]=0;g[8]=1;return g}function p(g,k){if(g===k){const F=k[1],X=k[2],fa=k[5];g[1]=k[3];g[2]=k[6];g[3]=F;g[5]=
k[7];g[6]=X;g[7]=fa}else g[0]=k[0],g[1]=k[3],g[2]=k[6],g[3]=k[1],g[4]=k[4],g[5]=k[7],g[6]=k[2],g[7]=k[5],g[8]=k[8];return g}function q(g,k){const F=k[0],X=k[1],fa=k[2],ka=k[3],ma=k[4],qa=k[5],A=k[6],B=k[7];k=k[8];const D=k*ma-qa*B,R=-k*ka+qa*A,Y=B*ka-ma*A;let h=F*D+X*R+fa*Y;if(!h)return null;h=1/h;g[0]=D*h;g[1]=(-k*X+fa*B)*h;g[2]=(qa*X-fa*ma)*h;g[3]=R*h;g[4]=(k*F-fa*A)*h;g[5]=(-qa*F+fa*ka)*h;g[6]=Y*h;g[7]=(-B*F+X*A)*h;g[8]=(ma*F-X*ka)*h;return g}function E(g,k){const F=k[0],X=k[1],fa=k[2],ka=k[3],
ma=k[4],qa=k[5],A=k[6],B=k[7];k=k[8];g[0]=ma*k-qa*B;g[1]=fa*B-X*k;g[2]=X*qa-fa*ma;g[3]=qa*A-ka*k;g[4]=F*k-fa*A;g[5]=fa*ka-F*qa;g[6]=ka*B-ma*A;g[7]=X*A-F*B;g[8]=F*ma-X*ka;return g}function z(g){const k=g[3],F=g[4],X=g[5],fa=g[6],ka=g[7],ma=g[8];return g[0]*(ma*F-X*ka)+g[1]*(-ma*k+X*fa)+g[2]*(ka*k-F*fa)}function n(g,k,F){const X=k[0],fa=k[1],ka=k[2],ma=k[3],qa=k[4],A=k[5],B=k[6],D=k[7];k=k[8];const R=F[0],Y=F[1],h=F[2],e=F[3],m=F[4],a=F[5],b=F[6],c=F[7];F=F[8];g[0]=R*X+Y*ma+h*B;g[1]=R*fa+Y*qa+h*D;g[2]=
R*ka+Y*A+h*k;g[3]=e*X+m*ma+a*B;g[4]=e*fa+m*qa+a*D;g[5]=e*ka+m*A+a*k;g[6]=b*X+c*ma+F*B;g[7]=b*fa+c*qa+F*D;g[8]=b*ka+c*A+F*k;return g}function v(g,k,F){const X=k[0],fa=k[1],ka=k[2],ma=k[3],qa=k[4],A=k[5],B=k[6],D=k[7];k=k[8];const R=F[0];F=F[1];g[0]=X;g[1]=fa;g[2]=ka;g[3]=ma;g[4]=qa;g[5]=A;g[6]=R*X+F*ma+B;g[7]=R*fa+F*qa+D;g[8]=R*ka+F*A+k;return g}function N(g,k,F){const X=k[0],fa=k[1],ka=k[2],ma=k[3],qa=k[4],A=k[5],B=k[6],D=k[7];k=k[8];const R=Math.sin(F);F=Math.cos(F);g[0]=F*X+R*ma;g[1]=F*fa+R*qa;
g[2]=F*ka+R*A;g[3]=F*ma-R*X;g[4]=F*qa-R*fa;g[5]=F*A-R*ka;g[6]=B;g[7]=D;g[8]=k;return g}function U(g,k,F){const X=F[0],fa=F[1];F=F[2];g[0]=X*k[0];g[1]=X*k[1];g[2]=X*k[2];g[3]=fa*k[3];g[4]=fa*k[4];g[5]=fa*k[5];g[6]=F*k[6];g[7]=F*k[7];g[8]=F*k[8];return g}function T(g,k,F){const X=F[0];F=F[1];g[0]=X*k[0];g[1]=X*k[1];g[2]=X*k[2];g[3]=F*k[3];g[4]=F*k[4];g[5]=F*k[5];return g}function L(g,k){g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=1;g[5]=0;g[6]=k[0];g[7]=k[1];g[8]=1;return g}function J(g,k){const F=Math.sin(k);
k=Math.cos(k);g[0]=k;g[1]=F;g[2]=0;g[3]=-F;g[4]=k;g[5]=0;g[6]=0;g[7]=0;g[8]=1;return g}function P(g,k){g[0]=k[0];g[1]=0;g[2]=0;g[3]=0;g[4]=k[1];g[5]=0;g[6]=0;g[7]=0;g[8]=1;return g}function da(g,k){g[0]=k[0];g[1]=k[1];g[2]=0;g[3]=k[2];g[4]=k[3];g[5]=0;g[6]=k[4];g[7]=k[5];g[8]=1;return g}function Z(g,k){var F=k[0],X=k[1],fa=k[2];k=k[3];var ka=F+F,ma=X+X;const qa=fa+fa;F*=ka;const A=X*ka;X*=ma;const B=fa*ka,D=fa*ma;fa*=qa;ka*=k;ma*=k;k*=qa;g[0]=1-X-fa;g[3]=A-k;g[6]=B+ma;g[1]=A+k;g[4]=1-F-fa;g[7]=D-
ka;g[2]=B-ma;g[5]=D+ka;g[8]=1-F-X;return g}function ea(g,k){const F=k[0],X=k[1],fa=k[2],ka=k[4],ma=k[5],qa=k[6],A=k[8],B=k[9];k=k[10];const D=k*ma-qa*B,R=-k*ka+qa*A,Y=B*ka-ma*A;var h=F*D+X*R+fa*Y;if(!h)return null;h=1/h;g[0]=D*h;g[1]=(-k*X+fa*B)*h;g[2]=(qa*X-fa*ma)*h;g[3]=R*h;g[4]=(k*F-fa*A)*h;g[5]=(-qa*F+fa*ka)*h;g[6]=Y*h;g[7]=(-B*F+X*A)*h;g[8]=(ma*F-X*ka)*h;return g}function ca(g,k){const F=k[0],X=k[1],fa=k[2],ka=k[3],ma=k[4],qa=k[5],A=k[6],B=k[7];var D=k[8],R=k[9],Y=k[10],h=k[11];const e=k[12],
m=k[13],a=k[14];k=k[15];const b=F*qa-X*ma,c=F*A-fa*ma,f=F*B-ka*ma,l=X*A-fa*qa,t=X*B-ka*qa,w=fa*B-ka*A,x=D*m-R*e,M=D*a-Y*e;D=D*k-h*e;const H=R*a-Y*m;R=R*k-h*m;Y=Y*k-h*a;h=b*Y-c*R+f*H+l*D-t*M+w*x;if(!h)return null;h=1/h;g[0]=(qa*Y-A*R+B*H)*h;g[1]=(A*D-ma*Y-B*M)*h;g[2]=(ma*R-qa*D+B*x)*h;g[3]=(fa*R-X*Y-ka*H)*h;g[4]=(F*Y-fa*D+ka*M)*h;g[5]=(X*D-F*R-ka*x)*h;g[6]=(m*w-a*t+k*l)*h;g[7]=(a*f-e*w-k*c)*h;g[8]=(e*t-m*f+k*b)*h;return g}function O(g,k,F){g[0]=2/k;g[1]=0;g[2]=0;g[3]=0;g[4]=-2/F;g[5]=0;g[6]=-1;g[7]=
1;g[8]=1;return g}function S(g){return"mat3("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+")"}function aa(g){return Math.sqrt(g[0]**2+g[1]**2+g[2]**2+g[3]**2+g[4]**2+g[5]**2+g[6]**2+g[7]**2+g[8]**2)}function ja(g,k,F){g[0]=k[0]+F[0];g[1]=k[1]+F[1];g[2]=k[2]+F[2];g[3]=k[3]+F[3];g[4]=k[4]+F[4];g[5]=k[5]+F[5];g[6]=k[6]+F[6];g[7]=k[7]+F[7];g[8]=k[8]+F[8];return g}function ha(g,k,F){g[0]=k[0]-F[0];g[1]=k[1]-F[1];g[2]=k[2]-F[2];g[3]=k[3]-F[3];g[4]=k[4]-F[4];g[5]=
k[5]-F[5];g[6]=k[6]-F[6];g[7]=k[7]-F[7];g[8]=k[8]-F[8];return g}function C(g,k,F){g[0]=k[0]*F;g[1]=k[1]*F;g[2]=k[2]*F;g[3]=k[3]*F;g[4]=k[4]*F;g[5]=k[5]*F;g[6]=k[6]*F;g[7]=k[7]*F;g[8]=k[8]*F;return g}function G(g,k,F,X){g[0]=k[0]+F[0]*X;g[1]=k[1]+F[1]*X;g[2]=k[2]+F[2]*X;g[3]=k[3]+F[3]*X;g[4]=k[4]+F[4]*X;g[5]=k[5]+F[5]*X;g[6]=k[6]+F[6]*X;g[7]=k[7]+F[7]*X;g[8]=k[8]+F[8]*X;return g}function I(g,k){return g[0]===k[0]&&g[1]===k[1]&&g[2]===k[2]&&g[3]===k[3]&&g[4]===k[4]&&g[5]===k[5]&&g[6]===k[6]&&g[7]===
k[7]&&g[8]===k[8]}function ba(g,k){const F=g[0],X=g[1],fa=g[2],ka=g[3],ma=g[4],qa=g[5],A=g[6],B=g[7];g=g[8];const D=k[0],R=k[1],Y=k[2],h=k[3],e=k[4],m=k[5],a=k[6],b=k[7];k=k[8];const c=u.getEpsilon();return Math.abs(F-D)<=c*Math.max(1,Math.abs(F),Math.abs(D))&&Math.abs(X-R)<=c*Math.max(1,Math.abs(X),Math.abs(R))&&Math.abs(fa-Y)<=c*Math.max(1,Math.abs(fa),Math.abs(Y))&&Math.abs(ka-h)<=c*Math.max(1,Math.abs(ka),Math.abs(h))&&Math.abs(ma-e)<=c*Math.max(1,Math.abs(ma),Math.abs(e))&&Math.abs(qa-m)<=c*
Math.max(1,Math.abs(qa),Math.abs(m))&&Math.abs(A-a)<=c*Math.max(1,Math.abs(A),Math.abs(a))&&Math.abs(B-b)<=c*Math.max(1,Math.abs(B),Math.abs(b))&&Math.abs(g-k)<=c*Math.max(1,Math.abs(g),Math.abs(k))}function sa(g){const k=u.getEpsilon(),F=g[0],X=g[1],fa=g[2],ka=g[3],ma=g[4],qa=g[5],A=g[6],B=g[7];g=g[8];return Math.abs(1-(F*F+ka*ka+A*A))<=k&&Math.abs(1-(X*X+ma*ma+B*B))<=k&&Math.abs(1-(fa*fa+qa*qa+g*g))<=k}const na=Object.freeze(Object.defineProperty({__proto__:null,add:ja,adjoint:E,copy:K,determinant:z,
equals:ba,exactEquals:I,frob:aa,fromMat2d:da,fromMat4:r,fromQuat:Z,fromRotation:J,fromScaling:P,fromTranslation:L,identity:y,invert:q,isOrthoNormal:sa,mul:n,multiply:n,multiplyScalar:C,multiplyScalarAndAdd:G,normalFromMat4:ca,normalFromMat4Legacy:ea,projection:O,rotate:N,scale:U,scaleByVec2:T,set:V,str:S,sub:ha,subtract:ha,translate:v,transpose:p},Symbol.toStringTag,{value:"Module"}));d.add=ja;d.adjoint=E;d.copy=K;d.determinant=z;d.equals=ba;d.exactEquals=I;d.frob=aa;d.fromMat2d=da;d.fromMat4=r;d.fromQuat=
Z;d.fromRotation=J;d.fromScaling=P;d.fromTranslation=L;d.identity=y;d.invert=q;d.isOrthoNormal=sa;d.mat3=na;d.mul=n;d.multiply=n;d.multiplyScalar=C;d.multiplyScalarAndAdd=G;d.normalFromMat4=ca;d.normalFromMat4Legacy=ea;d.projection=O;d.rotate=N;d.scale=U;d.scaleByVec2=T;d.set=V;d.str=S;d.sub=ha;d.subtract=ha;d.translate=v;d.transpose=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["exports"],function(d){function u(){return[1,
0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(q){return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15]]}function K(q,E,z,n,v,N,U,T,L,J,P,da,Z,ea,ca,O){return[q,E,z,n,v,N,U,T,L,J,P,da,Z,ea,ca,O]}function V(q,E){return new Float64Array(q,E,16)}const y=u(),p=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,clone:r,create:u,createView:V,fromValues:K},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=y;d.clone=r;d.create=u;d.createView=V;d.fromValues=K;d.mat4f64=
p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/spatialReferenceEllipsoidUtils":function(){define(["exports","./ellipsoidUtils","./SpatialReference","./support/spatialReferenceUtils"],function(d,u,r,K){const V=new r(u.SphericalECEFSpatialReferenceLike),y=new r(u.SphericalPCPFMarsLike),p=new r(u.SphericalPCPFMoonLike);u=new r(u.WGS84ECEFSpatialReferenceLike);const q=new Map,E=y.wkt.toUpperCase(),z=p.wkt.toUpperCase();d.SphericalECEFSpatialReference=V;d.SphericalPCPFMars=
y;d.SphericalPCPFMoon=p;d.WGS84ECEFSpatialReference=u;d.getSphericalPCPF=function(n){var v=q.get(n);if(v)return v;v=V;if(n)if(n===y)v=y;else if(n===p)v=p;else{var N=n.wkid;const U=n.latestWkid;if(null!=N||null!=U)if(K.isWKIDFromMars(N)||K.isWKIDFromMars(U))v=y;else{if(K.isWKIDFromMoon(N)||K.isWKIDFromMoon(U))v=p}else if(N=n.wkt2??n.wkt)N=N.toUpperCase(),N===E?v=y:N===z&&(v=p)}q.set(n,v);return v};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/computeTranslationToOriginAndRotation":function(){define("exports ../../core/mathUtils ../../core/libs/gl-matrix-2/math/mat4 ../../core/libs/gl-matrix-2/factories/vec3f64 ./localRotationUtils ./projectors ../support/spatialReferenceUtils".split(" "),
function(d,u,r,K,V,y,p){function q(v){return v===y.ProjectionID.SPHERICAL_ECEF||v===y.ProjectionID.SPHERICAL_MARS_PCPF||v===y.ProjectionID.SPHERICAL_MOON_PCPF||v===y.ProjectionID.WGS84_ECEF}const E=u.deg2rad(1),z=K.create(),n=K.create();d.computeTranslationToOriginAndRotation=function(v,N,U,T){if(null==v||null==T)return!1;var L=y.classifySpatialReference(v,y.sourceClassificationCache),J=y.classifySpatialReference(T,y.destClassificationCache);if(L===J&&!q(J)&&(L!==y.ProjectionID.UNKNOWN||p.equals(v,
T)))return r.fromTranslation(U,N),!0;if(q(J)){L=y.projectionTable[L][y.ProjectionID.LON_LAT];J=y.projectionTable[y.ProjectionID.LON_LAT][J];if(null==L||null==J)return!1;L(N,0,z,0);J(z,0,n,0);V.computeENUToPCPFLocalRotation(E*z[0],E*z[1],U);U[12]=n[0];U[13]=n[1];U[14]=n[2];return!0}v=q(L);if((J===y.ProjectionID.WEB_MERCATOR||J===y.ProjectionID.PLATE_CARREE||J===y.ProjectionID.WGS84||J===y.ProjectionID.CGCS2000)&&(L===y.ProjectionID.WGS84||v||L===y.ProjectionID.WEB_MERCATOR||L===y.ProjectionID.CGCS2000)){L=
y.projectionTable[L][y.ProjectionID.LON_LAT];J=y.projectionTable[y.ProjectionID.LON_LAT][J];if(null==L||null==J)return!1;L(N,0,z,0);J(z,0,n,0);v?V.computePCPFToENULocalRotation(E*z[0],E*z[1],U):r.identity(U);U[12]=n[0];U[13]=n[1];U[14]=n[2];return!0}return!1};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(d,u,r){function K(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=
b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function V(a,b,c,f,l,t,w,x,M,H,Q,W,la,ia,ra,pa,oa){a[0]=b;a[1]=c;a[2]=f;a[3]=l;a[4]=t;a[5]=w;a[6]=x;a[7]=M;a[8]=H;a[9]=Q;a[10]=W;a[11]=la;a[12]=ia;a[13]=ra;a[14]=pa;a[15]=oa;return a}function y(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function p(a,b){if(a===b){const c=b[1],f=
b[2],l=b[3],t=b[6],w=b[7],x=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=f;a[9]=t;a[11]=b[14];a[12]=l;a[13]=w;a[14]=x}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function q(a,b){E(a,b)||y(a);return a}function E(a,b){const c=b[0],f=b[1],l=b[2],t=b[3],w=b[4],x=b[5],M=b[6],H=b[7],Q=b[8],W=b[9],la=b[10],ia=b[11],ra=b[12],pa=b[13],oa=b[14];
b=b[15];const wa=c*x-f*w,ta=c*M-l*w,ua=c*H-t*w,va=f*M-l*x,xa=f*H-t*x,ya=l*H-t*M,Ba=Q*pa-W*ra,Ca=Q*oa-la*ra,Da=Q*b-ia*ra,Ea=W*oa-la*pa,Fa=W*b-ia*pa,Ga=la*b-ia*oa;let za=wa*Ga-ta*Fa+ua*Ea+va*Da-xa*Ca+ya*Ba;if(!za)return null;za=1/za;a[0]=(x*Ga-M*Fa+H*Ea)*za;a[1]=(l*Fa-f*Ga-t*Ea)*za;a[2]=(pa*ya-oa*xa+b*va)*za;a[3]=(la*xa-W*ya-ia*va)*za;a[4]=(M*Da-w*Ga-H*Ca)*za;a[5]=(c*Ga-l*Da+t*Ca)*za;a[6]=(oa*ua-ra*ya-b*ta)*za;a[7]=(Q*ya-la*ua+ia*ta)*za;a[8]=(w*Fa-x*Da+H*Ba)*za;a[9]=(f*Da-c*Fa-t*Ba)*za;a[10]=(ra*xa-
pa*ua+b*wa)*za;a[11]=(W*ua-Q*xa-ia*wa)*za;a[12]=(x*Ca-w*Ea-M*Ba)*za;a[13]=(c*Ea-f*Ca+l*Ba)*za;a[14]=(pa*ta-ra*va-oa*wa)*za;a[15]=(Q*va-W*ta+la*wa)*za;return a}function z(a,b){const c=b[0],f=b[1],l=b[2],t=b[3],w=b[4],x=b[5],M=b[6],H=b[7],Q=b[8],W=b[9],la=b[10],ia=b[11],ra=b[12],pa=b[13],oa=b[14];b=b[15];a[0]=x*(la*b-ia*oa)-W*(M*b-H*oa)+pa*(M*ia-H*la);a[1]=-(f*(la*b-ia*oa)-W*(l*b-t*oa)+pa*(l*ia-t*la));a[2]=f*(M*b-H*oa)-x*(l*b-t*oa)+pa*(l*H-t*M);a[3]=-(f*(M*ia-H*la)-x*(l*ia-t*la)+W*(l*H-t*M));a[4]=-(w*
(la*b-ia*oa)-Q*(M*b-H*oa)+ra*(M*ia-H*la));a[5]=c*(la*b-ia*oa)-Q*(l*b-t*oa)+ra*(l*ia-t*la);a[6]=-(c*(M*b-H*oa)-w*(l*b-t*oa)+ra*(l*H-t*M));a[7]=c*(M*ia-H*la)-w*(l*ia-t*la)+Q*(l*H-t*M);a[8]=w*(W*b-ia*pa)-Q*(x*b-H*pa)+ra*(x*ia-H*W);a[9]=-(c*(W*b-ia*pa)-Q*(f*b-t*pa)+ra*(f*ia-t*W));a[10]=c*(x*b-H*pa)-w*(f*b-t*pa)+ra*(f*H-t*x);a[11]=-(c*(x*ia-H*W)-w*(f*ia-t*W)+Q*(f*H-t*x));a[12]=-(w*(W*oa-la*pa)-Q*(x*oa-M*pa)+ra*(x*la-M*W));a[13]=c*(W*oa-la*pa)-Q*(f*oa-l*pa)+ra*(f*la-l*W);a[14]=-(c*(x*oa-M*pa)-w*(f*oa-l*
pa)+ra*(f*M-l*x));a[15]=c*(x*la-M*W)-w*(f*la-l*W)+Q*(f*M-l*x);return a}function n(a){const b=a[0],c=a[1],f=a[2],l=a[3],t=a[4],w=a[5],x=a[6],M=a[7],H=a[8],Q=a[9],W=a[10],la=a[11],ia=a[12],ra=a[13],pa=a[14];a=a[15];return(b*w-c*t)*(W*a-la*pa)-(b*x-f*t)*(Q*a-la*ra)+(b*M-l*t)*(Q*pa-W*ra)+(c*x-f*w)*(H*a-la*ia)-(c*M-l*w)*(H*pa-W*ia)+(f*M-l*x)*(H*ra-Q*ia)}function v(a,b,c){const f=b[0],l=b[1],t=b[2],w=b[3],x=b[4],M=b[5],H=b[6],Q=b[7],W=b[8],la=b[9],ia=b[10],ra=b[11],pa=b[12],oa=b[13],wa=b[14];b=b[15];let ta=
c[0],ua=c[1],va=c[2],xa=c[3];a[0]=ta*f+ua*x+va*W+xa*pa;a[1]=ta*l+ua*M+va*la+xa*oa;a[2]=ta*t+ua*H+va*ia+xa*wa;a[3]=ta*w+ua*Q+va*ra+xa*b;ta=c[4];ua=c[5];va=c[6];xa=c[7];a[4]=ta*f+ua*x+va*W+xa*pa;a[5]=ta*l+ua*M+va*la+xa*oa;a[6]=ta*t+ua*H+va*ia+xa*wa;a[7]=ta*w+ua*Q+va*ra+xa*b;ta=c[8];ua=c[9];va=c[10];xa=c[11];a[8]=ta*f+ua*x+va*W+xa*pa;a[9]=ta*l+ua*M+va*la+xa*oa;a[10]=ta*t+ua*H+va*ia+xa*wa;a[11]=ta*w+ua*Q+va*ra+xa*b;ta=c[12];ua=c[13];va=c[14];xa=c[15];a[12]=ta*f+ua*x+va*W+xa*pa;a[13]=ta*l+ua*M+va*la+xa*
oa;a[14]=ta*t+ua*H+va*ia+xa*wa;a[15]=ta*w+ua*Q+va*ra+xa*b;return a}function N(a,b,c){const f=c[0],l=c[1];c=c[2];if(b===a)a[12]=b[0]*f+b[4]*l+b[8]*c+b[12],a[13]=b[1]*f+b[5]*l+b[9]*c+b[13],a[14]=b[2]*f+b[6]*l+b[10]*c+b[14],a[15]=b[3]*f+b[7]*l+b[11]*c+b[15];else{const t=b[0],w=b[1],x=b[2],M=b[3],H=b[4],Q=b[5],W=b[6],la=b[7],ia=b[8],ra=b[9],pa=b[10],oa=b[11];a[0]=t;a[1]=w;a[2]=x;a[3]=M;a[4]=H;a[5]=Q;a[6]=W;a[7]=la;a[8]=ia;a[9]=ra;a[10]=pa;a[11]=oa;a[12]=t*f+H*l+ia*c+b[12];a[13]=w*f+Q*l+ra*c+b[13];a[14]=
x*f+W*l+pa*c+b[14];a[15]=M*f+la*l+oa*c+b[15]}return a}function U(a,b,c){const f=c[0],l=c[1];c=c[2];a[0]=b[0]*f;a[1]=b[1]*f;a[2]=b[2]*f;a[3]=b[3]*f;a[4]=b[4]*l;a[5]=b[5]*l;a[6]=b[6]*l;a[7]=b[7]*l;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function T(a,b,c,f){var l=f[0],t=f[1];f=f[2];var w=Math.sqrt(l*l+t*t+f*f);if(w<=r.getEpsilon())K(a,b);else{w=1/w;l*=w;t*=w;f*=w;var x=Math.sin(c),M=Math.cos(c),H=1-M;c=b[0];w=b[1];var Q=b[2],W=b[3],
la=b[4],ia=b[5],ra=b[6],pa=b[7],oa=b[8],wa=b[9],ta=b[10],ua=b[11],va=l*l*H+M,xa=t*l*H+f*x,ya=f*l*H-t*x,Ba=l*t*H-f*x,Ca=t*t*H+M,Da=f*t*H+l*x,Ea=l*f*H+t*x;l=t*f*H-l*x;t=f*f*H+M;a[0]=c*va+la*xa+oa*ya;a[1]=w*va+ia*xa+wa*ya;a[2]=Q*va+ra*xa+ta*ya;a[3]=W*va+pa*xa+ua*ya;a[4]=c*Ba+la*Ca+oa*Da;a[5]=w*Ba+ia*Ca+wa*Da;a[6]=Q*Ba+ra*Ca+ta*Da;a[7]=W*Ba+pa*Ca+ua*Da;a[8]=c*Ea+la*l+oa*t;a[9]=w*Ea+ia*l+wa*t;a[10]=Q*Ea+ra*l+ta*t;a[11]=W*Ea+pa*l+ua*t;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15])}}function L(a,
b,c){const f=Math.sin(c);c=Math.cos(c);const l=b[4],t=b[5],w=b[6],x=b[7],M=b[8],H=b[9],Q=b[10],W=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=l*c+M*f;a[5]=t*c+H*f;a[6]=w*c+Q*f;a[7]=x*c+W*f;a[8]=M*c-l*f;a[9]=H*c-t*f;a[10]=Q*c-w*f;a[11]=W*c-x*f;return a}function J(a,b,c){const f=Math.sin(c);c=Math.cos(c);const l=b[0],t=b[1],w=b[2],x=b[3],M=b[8],H=b[9],Q=b[10],W=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],
a[14]=b[14],a[15]=b[15]);a[0]=l*c-M*f;a[1]=t*c-H*f;a[2]=w*c-Q*f;a[3]=x*c-W*f;a[8]=l*f+M*c;a[9]=t*f+H*c;a[10]=w*f+Q*c;a[11]=x*f+W*c;return a}function P(a,b,c){const f=Math.sin(c);c=Math.cos(c);const l=b[0],t=b[1],w=b[2],x=b[3],M=b[4],H=b[5],Q=b[6],W=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=l*c+M*f;a[1]=t*c+H*f;a[2]=w*c+Q*f;a[3]=x*c+W*f;a[4]=M*c-l*f;a[5]=H*c-t*f;a[6]=Q*c-w*f;a[7]=W*c-x*f;return a}function da(a,b){a[0]=1;a[1]=0;a[2]=
0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function Z(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ea(a,b,c){if(0===b)return y(a);let f=c[0],l=c[1];c=c[2];var t=Math.sqrt(f*f+l*l+c*c);if(t<=r.getEpsilon())return null;t=1/t;f*=t;l*=t;c*=t;t=Math.sin(b);b=Math.cos(b);const w=1-b;a[0]=f*f*w+b;a[1]=l*f*w+c*t;a[2]=c*f*w-l*t;a[3]=
0;a[4]=f*l*w-c*t;a[5]=l*l*w+b;a[6]=c*l*w+f*t;a[7]=0;a[8]=f*c*w+l*t;a[9]=l*c*w-f*t;a[10]=c*c*w+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ca(a,b){const c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function O(a,b){const c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function S(a,b){const c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function aa(a,b,c){var f=b[0],l=b[1],t=b[2],w=b[3],x=f+f,M=l+l;const H=t+t;b=f*x;const Q=f*M;f*=H;const W=l*M;l*=H;t*=H;x*=w;M*=w;w*=H;a[0]=1-(W+t);a[1]=Q+w;a[2]=f-M;a[3]=0;a[4]=Q-w;a[5]=1-(b+t);a[6]=l+x;a[7]=0;a[8]=f+M;a[9]=l-x;a[10]=1-(b+W);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function ja(a,b){const c=
m,f=-b[0],l=-b[1],t=-b[2],w=b[3],x=b[4],M=b[5],H=b[6],Q=b[7],W=f*f+l*l+t*t+w*w;0<W?(c[0]=2*(x*w+Q*f+M*t-H*l)/W,c[1]=2*(M*w+Q*l+H*f-x*t)/W,c[2]=2*(H*w+Q*t+x*l-M*f)/W):(c[0]=2*(x*w+Q*f+M*t-H*l),c[1]=2*(M*w+Q*l+H*f-x*t),c[2]=2*(H*w+Q*t+x*l-M*f));aa(a,b,c);return a}function ha(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function C(a,b){const c=b[0],f=b[1],l=b[2],t=b[4],w=b[5],x=b[6],M=b[8],H=b[9];b=b[10];a[0]=Math.sqrt(c*c+f*f+l*l);a[1]=Math.sqrt(t*t+w*w+x*x);a[2]=Math.sqrt(M*M+H*H+b*b);return a}function G(a,
b){const c=b[0]+b[5]+b[10];let f=0;0<c?(f=2*Math.sqrt(c+1),a[3]=.25*f,a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=.25*f,a[1]=(b[1]+b[4])/f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=.25*f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=.25*f);return a}function I(a,b,c,f){var l=
b[0],t=b[1],w=b[2],x=b[3],M=l+l,H=t+t,Q=w+w;b=l*M;const W=l*H;l*=Q;const la=t*H;t*=Q;w*=Q;M*=x;H*=x;x*=Q;Q=f[0];const ia=f[1];f=f[2];a[0]=(1-(la+w))*Q;a[1]=(W+x)*Q;a[2]=(l-H)*Q;a[3]=0;a[4]=(W-x)*ia;a[5]=(1-(b+w))*ia;a[6]=(t+M)*ia;a[7]=0;a[8]=(l+H)*f;a[9]=(t-M)*f;a[10]=(1-(b+la))*f;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function ba(a,b,c,f,l){var t=b[0],w=b[1],x=b[2],M=b[3],H=t+t,Q=w+w,W=x+x;b=t*H;var la=t*Q,ia=t*W;t=w*Q;w*=W;var ra=x*W;x=M*H;Q*=M;const pa=M*W;var oa=f[0],wa=f[1];
W=f[2];f=l[0];M=l[1];l=l[2];H=(1-(t+ra))*oa;const ta=(la+pa)*oa;oa*=ia-Q;la=(la-pa)*wa;ra=(1-(b+ra))*wa;wa*=w+x;ia=(ia+Q)*W;w=(w-x)*W;b=(1-(b+t))*W;a[0]=H;a[1]=ta;a[2]=oa;a[3]=0;a[4]=la;a[5]=ra;a[6]=wa;a[7]=0;a[8]=ia;a[9]=w;a[10]=b;a[11]=0;a[12]=c[0]+f-(H*f+la*M+ia*l);a[13]=c[1]+M-(ta*f+ra*M+w*l);a[14]=c[2]+l-(oa*f+wa*M+b*l);a[15]=1;return a}function sa(a,b){var c=b[0],f=b[1],l=b[2];b=b[3];var t=c+c,w=f+f;const x=l+l;c*=t;const M=f*t;f*=w;const H=l*t,Q=l*w;l*=x;t*=b;w*=b;b*=x;a[0]=1-f-l;a[1]=M+b;
a[2]=H-w;a[3]=0;a[4]=M-b;a[5]=1-c-l;a[6]=Q+t;a[7]=0;a[8]=H+w;a[9]=Q-t;a[10]=1-c-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function na(a,b,c,f,l,t,w){const x=1/(c-b),M=1/(l-f),H=1/(t-w);a[0]=2*t*x;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*t*M;a[6]=0;a[7]=0;a[8]=(c+b)*x;a[9]=(l+f)*M;a[10]=(w+t)*H;a[11]=-1;a[12]=0;a[13]=0;a[14]=w*t*2*H;a[15]=0;return a}function g(a,b,c,f,l){b=1/Math.tan(b/2);let t=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=
0;a[15]=0;null!=l&&Infinity!==l?(t=1/(f-l),a[10]=(l+f)*t,a[14]=2*l*f*t):(a[10]=-1,a[14]=-2*f);return a}function k(a,b,c,f){const l=Math.tan(b.upDegrees*Math.PI/180),t=Math.tan(b.downDegrees*Math.PI/180),w=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);const x=2/(w+b),M=2/(l+t);a[0]=x;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=M;a[6]=0;a[7]=0;a[8]=-((w-b)*x*.5);a[9]=(l-t)*M*.5;a[10]=f/(c-f);a[11]=-1;a[12]=0;a[13]=0;a[14]=f*c/(c-f);a[15]=0;return a}function F(a,b,c,f,l,t,w){const x=
1/(b-c),M=1/(f-l),H=1/(t-w);a[0]=-2*x;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*M;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*H;a[11]=0;a[12]=(b+c)*x;a[13]=(l+f)*M;a[14]=(w+t)*H;a[15]=1;return a}function X(a,b,c,f){const l=b[0],t=b[1];b=b[2];let w=l-c[0],x=t-c[1];c=b-c[2];var M=r.getEpsilon();if(Math.abs(w)<M&&Math.abs(x)<M&&Math.abs(c)<M)y(a);else{var H=1/Math.sqrt(w*w+x*x+c*c);w*=H;x*=H;c*=H;H=f[0];var Q=f[1];M=f[2];f=Q*c-M*x;M=M*w-H*c;Q=H*x-Q*w;(H=Math.sqrt(f*f+M*M+Q*Q))?(H=1/H,f*=H,M*=H,Q*=H):Q=M=f=0;var W=
x*Q-c*M,la=c*f-w*Q,ia=w*M-x*f;(H=Math.sqrt(W*W+la*la+ia*ia))?(H=1/H,W*=H,la*=H,ia*=H):ia=la=W=0;a[0]=f;a[1]=W;a[2]=w;a[3]=0;a[4]=M;a[5]=la;a[6]=x;a[7]=0;a[8]=Q;a[9]=ia;a[10]=c;a[11]=0;a[12]=-(f*l+M*t+Q*b);a[13]=-(W*l+la*t+ia*b);a[14]=-(w*l+x*t+c*b);a[15]=1}}function fa(a,b,c,f){const l=b[0],t=b[1];b=b[2];var w=f[0];const x=f[1];var M=f[2];f=l-c[0];let H=t-c[1];c=b-c[2];let Q=f*f+H*H+c*c;0<Q&&(Q=1/Math.sqrt(Q),f*=Q,H*=Q,c*=Q);let W=x*c-M*H;M=M*f-w*c;w=w*H-x*f;Q=W*W+M*M+w*w;0<Q&&(Q=1/Math.sqrt(Q),W*=
Q,M*=Q,w*=Q);a[0]=W;a[1]=M;a[2]=w;a[3]=0;a[4]=H*w-c*M;a[5]=c*W-f*w;a[6]=f*M-H*W;a[7]=0;a[8]=f;a[9]=H;a[10]=c;a[11]=0;a[12]=l;a[13]=t;a[14]=b;a[15]=1;return a}function ka(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function ma(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**
2+a[15]**2)}function qa(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a}function A(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];
a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}function B(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a}function D(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;a[2]=b[2]+c[2]*f;a[3]=b[3]+c[3]*f;a[4]=b[4]+c[4]*f;a[5]=b[5]+c[5]*f;a[6]=b[6]+c[6]*f;a[7]=b[7]+c[7]*f;a[8]=b[8]+c[8]*f;a[9]=b[9]+c[9]*f;
a[10]=b[10]+c[10]*f;a[11]=b[11]+c[11]*f;a[12]=b[12]+c[12]*f;a[13]=b[13]+c[13]*f;a[14]=b[14]+c[14]*f;a[15]=b[15]+c[15]*f;return a}function R(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function Y(a,b){if(a===b)return!0;const c=a[0],f=a[1],l=a[2],t=a[3],w=a[4],x=a[5],M=a[6],H=a[7],Q=a[8],W=a[9],la=a[10],ia=a[11],ra=
a[12],pa=a[13],oa=a[14];a=a[15];const wa=b[0],ta=b[1],ua=b[2],va=b[3],xa=b[4],ya=b[5],Ba=b[6],Ca=b[7],Da=b[8],Ea=b[9],Fa=b[10],Ga=b[11],za=b[12],Ha=b[13],Ia=b[14];b=b[15];const Aa=r.getEpsilon();return Math.abs(c-wa)<=Aa*Math.max(1,Math.abs(c),Math.abs(wa))&&Math.abs(f-ta)<=Aa*Math.max(1,Math.abs(f),Math.abs(ta))&&Math.abs(l-ua)<=Aa*Math.max(1,Math.abs(l),Math.abs(ua))&&Math.abs(t-va)<=Aa*Math.max(1,Math.abs(t),Math.abs(va))&&Math.abs(w-xa)<=Aa*Math.max(1,Math.abs(w),Math.abs(xa))&&Math.abs(x-ya)<=
Aa*Math.max(1,Math.abs(x),Math.abs(ya))&&Math.abs(M-Ba)<=Aa*Math.max(1,Math.abs(M),Math.abs(Ba))&&Math.abs(H-Ca)<=Aa*Math.max(1,Math.abs(H),Math.abs(Ca))&&Math.abs(Q-Da)<=Aa*Math.max(1,Math.abs(Q),Math.abs(Da))&&Math.abs(W-Ea)<=Aa*Math.max(1,Math.abs(W),Math.abs(Ea))&&Math.abs(la-Fa)<=Aa*Math.max(1,Math.abs(la),Math.abs(Fa))&&Math.abs(ia-Ga)<=Aa*Math.max(1,Math.abs(ia),Math.abs(Ga))&&Math.abs(ra-za)<=Aa*Math.max(1,Math.abs(ra),Math.abs(za))&&Math.abs(pa-Ha)<=Aa*Math.max(1,Math.abs(pa),Math.abs(Ha))&&
Math.abs(oa-Ia)<=Aa*Math.max(1,Math.abs(oa),Math.abs(Ia))&&Math.abs(a-b)<=Aa*Math.max(1,Math.abs(a),Math.abs(b))}function h(a){const b=r.getEpsilon(),c=a[0],f=a[1],l=a[2],t=a[4],w=a[5],x=a[6],M=a[8],H=a[9];a=a[10];return Math.abs(1-(c*c+t*t+M*M))<=b&&Math.abs(1-(f*f+w*w+H*H))<=b&&Math.abs(1-(l*l+x*x+a*a))<=b}function e(a){return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const m=u.create();u=Object.freeze(Object.defineProperty({__proto__:null,add:qa,
adjoint:z,copy:K,determinant:n,equals:Y,exactEquals:R,frob:ma,fromQuat:sa,fromQuat2:ja,fromRotation:ea,fromRotationTranslation:aa,fromRotationTranslationScale:I,fromRotationTranslationScaleOrigin:ba,fromScaling:Z,fromTranslation:da,fromXRotation:ca,fromYRotation:O,fromZRotation:S,frustum:na,getRotation:G,getScaling:C,getTranslation:ha,hasIdentityRotation:e,identity:y,invert:E,invertOrIdentity:q,isOrthoNormal:h,lookAt:X,mul:v,multiply:v,multiplyScalar:B,multiplyScalarAndAdd:D,ortho:F,perspective:g,
perspectiveFromFieldOfView:k,rotate:T,rotateX:L,rotateY:J,rotateZ:P,scale:U,set:V,str:ka,sub:A,subtract:A,targetTo:fa,translate:N,transpose:p},Symbol.toStringTag,{value:"Module"}));d.add=qa;d.adjoint=z;d.copy=K;d.determinant=n;d.equals=Y;d.exactEquals=R;d.frob=ma;d.fromQuat=sa;d.fromQuat2=ja;d.fromRotation=ea;d.fromRotationTranslation=aa;d.fromRotationTranslationScale=I;d.fromRotationTranslationScaleOrigin=ba;d.fromScaling=Z;d.fromTranslation=da;d.fromXRotation=ca;d.fromYRotation=O;d.fromZRotation=
S;d.frustum=na;d.getRotation=G;d.getScaling=C;d.getTranslation=ha;d.hasIdentityRotation=e;d.identity=y;d.invert=E;d.invertOrIdentity=q;d.isOrthoNormal=h;d.lookAt=X;d.mat4=u;d.mul=v;d.multiply=v;d.multiplyScalar=B;d.multiplyScalarAndAdd=D;d.ortho=F;d.perspective=g;d.perspectiveFromFieldOfView=k;d.rotate=T;d.rotateX=L;d.rotateY=J;d.rotateZ=P;d.scale=U;d.set=V;d.str=ka;d.sub=A;d.subtract=A;d.targetTo=fa;d.translate=N;d.transpose=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/localRotationUtils":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(d,u){function r(K,V,y){const p=Math.sin(K);K=Math.cos(K);const q=Math.sin(V);V=Math.cos(V);y[0]=-p;y[4]=-q*K;y[8]=V*K;y[12]=0;y[1]=K;y[5]=-q*p;y[9]=V*p;y[13]=0;y[2]=0;y[6]=V;y[10]=q;y[14]=0;y[3]=0;y[7]=0;y[11]=0;y[15]=1;return y}d.computeENUToPCPFLocalRotation=r;d.computePCPFToENULocalRotation=function(K,V,y){r(K,V,y);u.transpose(y,y);return y};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../chunks/vec42 ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(d,u,r,K,V,y,p,q){function E(C=aa){return[C[0],C[1],C[2],C[3]]}function z(C,G){return n(G[0],G[1],G[2],G[3],C)}function n(C,G,I,ba,sa=E()){sa[0]=C;sa[1]=G;sa[2]=I;sa[3]=ba;return sa}function v(C,G,I){var ba=G[0]*G[0]+G[1]*G[1]+G[2]*G[2];ba=1E-5<Math.abs(ba-1)&&1E-12<ba?1/Math.sqrt(ba):1;I[0]=G[0]*ba;I[1]=G[1]*ba;I[2]=G[2]*ba;I[3]=-(I[0]*C[0]+I[1]*C[1]+I[2]*C[2]);return I}function N(C,G,I,ba=E()){var sa=I[0]-G[0],na=I[1]-G[1],g=I[2]-G[2];I=C[0]-G[0];const k=C[1]-G[1],F=C[2]-G[2];G=na*F-g*k;
g=g*I-sa*F;sa=sa*k-na*I;na=G*G+g*g+sa*sa;na=1E-5<Math.abs(na-1)&&1E-12<na?1/Math.sqrt(na):1;ba[0]=G*na;ba[1]=g*na;ba[2]=sa*na;ba[3]=-(ba[0]*C[0]+ba[1]*C[1]+ba[2]*C[2]);return ba}function U(C,G,I,ba=0,sa=Math.floor(1/3*I),na=Math.floor(2/3*I)){if(3>I)return!1;G(Z,ba);let g=sa,k=!1;for(;g<I-1&&!k;)G(ea,g),g++,k=!r.exactEquals(Z,ea);if(!k)return!1;g=Math.max(g,na);for(k=!1;g<I&&!k;)G(ca,g),g++,r.subtract(O,Z,ea),r.normalize(O,O),r.subtract(S,ea,ca),r.normalize(S,S),k=!r.exactEquals(Z,ca)&&!r.exactEquals(ea,
ca)&&.99619469809>Math.abs(r.dot(O,S));if(!k)return 0===ba&&1===sa&&2===na?!1:U(C,G,I,0,1,2);N(Z,ea,ca,C);return!0}function T(C,G,I){C=r.scale(p.sv3d.get(),C,r.dot(C,G));r.subtract(I,G,C);return I}function L(C,G){return r.dot(C,G)+C[3]}function J(C){return C===d.IntersectResult.INTERSECTS_INSIDE_OUT||C===d.IntersectResult.INTERSECTS_OUTSIDE_IN}function P(C,G,I,ba,sa){var na=r.dot(C,I);C=L(C,G);if(0===na)return 0<=C?d.IntersectResult.INSIDE:d.IntersectResult.OUTSIDE;na=-C/na;ba&d.IntersectFlags.CLAMP&&
(na=u.clamp(na,0,1));if(!(ba&d.IntersectFlags.INFINITE_MIN)&&0>na||!(ba&d.IntersectFlags.INFINITE_MAX)&&1<na)return 0<=C?d.IntersectResult.INSIDE:d.IntersectResult.OUTSIDE;r.add(sa,G,r.scale(sa,I,na));return 0<=C?d.IntersectResult.INTERSECTS_INSIDE_OUT:d.IntersectResult.INTERSECTS_OUTSIDE_IN}const da=V.exactEquals;V=V.equals;const Z=K.create(),ea=K.create(),ca=K.create(),O=K.create(),S=K.create();d.IntersectResult=void 0;(function(C){C[C.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT";C[C.INTERSECTS_OUTSIDE_IN=
1]="INTERSECTS_OUTSIDE_IN";C[C.INSIDE=2]="INSIDE";C[C.OUTSIDE=3]="OUTSIDE"})(d.IntersectResult||(d.IntersectResult={}));const aa=[0,0,1,0];d.IntersectFlags=void 0;(function(C){C[C.NONE=0]="NONE";C[C.CLAMP=1]="CLAMP";C[C.INFINITE_MIN=4]="INFINITE_MIN";C[C.INFINITE_MAX=8]="INFINITE_MAX"})(d.IntersectFlags||(d.IntersectFlags={}));const ja=d.IntersectFlags.INFINITE_MIN|d.IntersectFlags.INFINITE_MAX,ha=d.IntersectFlags.INFINITE_MAX;d.clip=function(C,G){const I=r.dot(C,G.ray.direction);C=-L(C,G.ray.origin);
if(0>C&&0<=I)return!1;if(-1E-6<I&&1E-6>I)return 0<C;if((0>C||0>I)&&!(0>C&&0>I))return!0;C/=I;0<I?C<G.c1&&(G.c1=C):C>G.c0&&(G.c0=C);return G.c0<=G.c1};d.clipInfinite=function(C,G){const I=r.dot(C,G.ray.direction);C=-L(C,G.ray.origin);if(-1E-6<I&&1E-6>I)return 0<C;C/=I;0<I?C<G.c1&&(G.c1=C):C>G.c0&&(G.c0=C);return G.c0<=G.c1};d.copy=z;d.create=E;d.distance=function(C,G){return Math.abs(L(C,G))};d.equals=V;d.exactEquals=da;d.fromArray=function(C,G,I=!0){const ba=G.length/3;return U(C,(sa,na)=>r.set(sa,
G[3*na],G[3*na+1],G[3*na+2]),I?ba-1:ba)};d.fromManyPoints=U;d.fromNormalAndOffset=function(C,G,I){r.copy(I,C);I[3]=G;return I};d.fromPoints=N;d.fromPositionAndNormal=v;d.fromValues=n;d.fromVectorsAndPoint=function(C,G,I,ba){r.cross(ca,G,C);return v(I,ca,ba)};d.getNormal=function(C){return C};d.intersectLine=function(C,G,I,ba){I=r.subtract(p.sv3d.get(),I,G);return J(P(C,G,I,ja,ba))};d.intersectLineOrRay=P;d.intersectLineSegment=function(C,G,I){return J(P(C,G.origin,G.vector,d.IntersectFlags.NONE,I))};
d.intersectLineSegmentClamp=function(C,G,I){return J(P(C,G.origin,G.vector,d.IntersectFlags.CLAMP,I))};d.intersectRay=function(C,G,I){return null!=G?J(P(C,G.origin,G.direction,ha,I)):!1};d.isPointInside=function(C,G){return 0<=L(C,G)};d.negate=function(C,G){G[0]=-C[0];G[1]=-C[1];G[2]=-C[2];G[3]=-C[3];return G};d.projectPoint=function(C,G,I){const ba=r.scale(p.sv3d.get(),C,-C[3]);G=r.subtract(p.sv3d.get(),G,ba);C=T(C,G,p.sv3d.get());r.add(I,C,ba);return I};d.projectPointLocal=function(C,G,I,ba){var sa=
p.sv3d.get(),na=p.sv3d.get();q.tangentFrame(C,sa,na);G=r.subtract(p.sv3d.get(),I,G);sa=y.projectPointSignedLength(sa,G);na=y.projectPointSignedLength(na,G);C=y.projectPointSignedLength(C,G);return r.set(ba,sa,na,C)};d.projectVector=T;d.setOffsetFromPoint=function(C,G,I){G!==C&&z(C,G);C[3]=-r.dot(C,I);return C};d.signedDistance=L;d.up=aa;d.wrap=function(C=aa[0],G=aa[1],I=aa[2],ba=aa[3]){return n(C,G,I,ba,p.sv4d.get())};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],function(d,u,r,K){const V=K.create(),y=K.create();d.angle=function(p,q){p=r.dot(p,q)/(r.length(p)*r.length(q));return-u.acosClamped(p)};d.angleAroundAxis=function(p,q,E){r.normalize(V,p);r.normalize(y,q);p=r.dot(V,y);p=u.acosClamped(p);q=r.cross(V,V,y);return 0>r.dot(q,E)?2*Math.PI-p:p};d.projectPoint=function(p,q,E){q=r.dot(p,q)/r.dot(p,p);return r.scale(E,p,q)};d.projectPointSignedLength=function(p,q){return r.dot(p,
q)/r.length(p)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(d,u){const r=u.VectorStack.createVec2f64(),K=u.VectorStack.createVec3f64(),V=u.VectorStack.createVec4f64(),y=u.VectorStack.createMat3f64(),p=u.VectorStack.createMat4f64();u=u.VectorStack.createQuatf64();d.sm3d=y;d.sm4d=p;d.sq4d=u;d.sv2d=r;d.sv3d=K;d.sv4d=V;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/core/VectorStack":function(){define("exports ./has ./nextTick ./libs/gl-matrix-2/factories/mat3f64 ./libs/gl-matrix-2/factories/mat4f64 ./libs/gl-matrix-2/factories/quatf64 ./libs/gl-matrix-2/factories/vec2f64 ./libs/gl-matrix-2/factories/vec3f64 ./libs/gl-matrix-2/factories/vec4f64".split(" "),function(d,u,r,K,V,y,p,q,E){class z{constructor(n){this._create=n;this._items=[];this._itemsPtr=0}get(){0===this._itemsPtr&&r.nextTick(()=>this._reset());this._itemsPtr>=this._items.length&&this._items.push(this._create());
return this._items[this._itemsPtr++]}_reset(){const n=2*this._itemsPtr;this._items.length>n&&(this._items.length=n);this._itemsPtr=0}static createVec2f64(){return new z(p.create)}static createVec3f64(){return new z(q.create)}static createVec4f64(){return new z(E.create)}static createMat3f64(){return new z(K.create)}static createMat4f64(){return new z(V.create)}static createQuatf64(){return new z(y.create)}get test(){}}d.VectorStack=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(d){function u(){return[0,0]}function r(L){return[L[0],L[1]]}function K(L,J){return[L,J]}function V(L,J=[0,0]){const P=Math.min(2,L.length);for(let da=0;da<P;++da)J[da]=L[da];return J}function y(L,J){return new Float64Array(L,J,2)}function p(){return[0,0]}function q(){return[1,1]}function E(){return[1,0]}function z(){return[0,1]}const n=[0,0],v=[1,1],N=[1,0],U=[0,1],T=Object.freeze(Object.defineProperty({__proto__:null,
ONES:v,UNIT_X:N,UNIT_Y:U,ZEROS:n,clone:r,create:u,createView:y,fromArray:V,fromValues:K,ones:q,unitX:E,unitY:z,zeros:p},Symbol.toStringTag,{value:"Module"}));d.ONES=v;d.UNIT_X=N;d.UNIT_Y=U;d.ZEROS=n;d.clone=r;d.create=u;d.createView=y;d.fromArray=V;d.fromValues=K;d.ones=q;d.unitX=E;d.unitY=z;d.vec2f64=T;d.zeros=p;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],
function(d,u,r,K){const V=K.create(),y=K.create(),p=K.create(),q=K.create(),E=K.create();d.angle=function(z,n,v){z=r.normalize(q,z);n=r.normalize(E,n);const N=u.acosClamped(r.dot(z,n));return v&&(z=r.cross(p,z,n),0>r.dot(z,v))?-N:N};d.bilerp=function(z,n,v,N,U,T){z+=(n-z)*U;return z+(v+(N-v)*U-z)*T};d.cosCapped=function(z,n){return z>n?Math.cos(n):Math.cos(z)};d.fovx2fovy=function(z,n,v){return 2*Math.atan(v*Math.tan(.5*z)/n)};d.fovy2fovx=function(z,n,v){return 2*Math.atan(n*Math.tan(.5*z)/v)};d.makeOrthonormal=
function(z,n,v){v=v||z;const N=r.dot(z,n);r.set(v,z[0]-N*n[0],z[1]-N*n[1],z[2]-N*n[2]);r.normalize(v,v)};d.makePiecewiseLinearFunction=function(z){const n=z.length;return v=>{if(v<=z[0][0])return z[0][1];if(v>=z[n-1][0])return z[n-1][1];let N=1;for(;v>z[N][0];)N++;const U=z[N][0];v=(U-v)/(U-z[N-1][0]);return v*z[N-1][1]+(1-v)*z[N][1]}};d.maxScale=function(z){return Math.sqrt(Math.max(z[0]*z[0]+z[4]*z[4]+z[8]*z[8],z[1]*z[1]+z[5]*z[5]+z[9]*z[9],z[2]*z[2]+z[6]*z[6]+z[10]*z[10]))};d.midpoint3d=function(z,
n){r.set(n,0,0,0);if(0<z.length){for(let v=0;v<z.length;++v)r.add(n,n,z[v]);r.scale(n,n,1/z.length)}};d.planeFromPoints=function(z,n,v,N){r.subtract(V,n,z);r.subtract(y,v,z);r.cross(N,V,y);r.normalize(N,N);N[3]=-r.dot(z,N)};d.scaleFromMatrix=function(z,n){r.set(z,Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]));return z};d.slerp=function(z,n,v,N=K.create()){const U=r.length(z);var T=r.length(n),L=r.dot(z,n)/(U*T);if(.9999999999999999>
L){L=Math.acos(L);const J=((1-v)*U+v*T)/Math.sin(L);T=J/T*Math.sin(v*L);r.scale(q,z,J/U*Math.sin((1-v)*L));r.scale(E,n,T);return r.add(N,q,E)}return r.lerp(N,z,n,v)};d.slerpTangent=function(z,n,v,N=K.create(),U=K.create()){const T=r.length(z),L=r.length(n);var J=r.dot(z,n)/(T*L);if(.9999999999999999>J){J=Math.acos(J);const P=Math.sin(J),da=Math.sin(v*J),Z=Math.sin((1-v)*J),ea=(1-v)*T+v*L,ca=ea/P,O=ca/L*da;r.scale(q,z,ca/T*Z);r.scale(E,n,O);r.add(N,q,E);r.scale(q,z,1/T*(-Math.cos((1-v)*J)*J*ea+Z*(-T+
L)));r.scale(E,n,1/L*(Math.cos(v*J)*J*ea+da*(-T+L)));r.add(U,q,E);r.scale(U,U,1/P);return U}r.lerp(N,z,n,v);r.subtract(U,n,z);r.normalize(U,U);return U};d.tangentFrame=function(z,n,v){Math.abs(z[0])>Math.abs(z[1])?r.set(n,0,1,0):r.set(n,1,0,0);r.cross(v,z,n);r.cross(n,v,z);r.normalize(v,v);r.normalize(n,n)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/ViewingMode":function(){define(["exports"],function(d){d.ViewingMode=void 0;(function(u){u[u.Global=1]="Global";u[u.Local=
2]="Local"})(d.ViewingMode||(d.ViewingMode={}));d.stringFromViewingMode=function(u){return u===d.ViewingMode.Global?"global":"local"};d.viewingModeFromString=function(u){return"global"===u?d.ViewingMode.Global:d.ViewingMode.Local};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/dito":function(){define("exports ../../../core/libs/gl-matrix-2/factories/mat3f64 ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../webgl-engine/lib/Attribute".split(" "),
function(d,u,r,K,V,y,p){function q(c,f,l,t,w,x){if(!(1E-6>f[0]*f[0]+f[1]*f[1]+f[2]*f[2]))for(J(sa,l,f),J(na,t,f),J(g,w,f),E(c,f,ba),F[1]=ba[0],k[1]=ba[1],X[1]=k[1]-F[1],l=[l,t,w],t=[sa,na,g],w=0;3>w;++w){E(c,l[w],ba);F[0]=ba[0];k[0]=ba[1];E(c,t[w],ba);F[2]=ba[0];k[2]=ba[1];X[0]=k[0]-F[0];X[2]=k[2]-F[2];const M=v(X);M<x.quality&&(L(x.b0,l[w]),L(x.b1,f),L(x.b2,t[w]),x.quality=M)}}function E(c,f,l){const {data:t,size:w}=c;l[0]=Number.POSITIVE_INFINITY;l[1]=Number.NEGATIVE_INFINITY;for(c=0;c<t.length;c+=
w){const x=t[c]*f[0]+t[c+1]*f[1]+t[c+2]*f[2];l[0]=Math.min(l[0],x);l[1]=Math.max(l[1],x)}}function z(c,f,l,t,w,x){E(c,f,ba);w[0]=ba[0];x[0]=ba[1];E(c,l,ba);w[1]=ba[0];x[1]=ba[1];E(c,t,ba);w[2]=ba[0];x[2]=ba[1]}function n(c,f,l,t,w,x,M){e[0]=c[0];e[1]=c[1];e[2]=c[2];e[3]=f[0];e[4]=f[1];e[5]=f[2];e[6]=l[0];e[7]=l[1];e[8]=l[2];var H=m,Q=e,W=Q[0]+Q[4]+Q[8];if(0<W)W=Math.sqrt(W+1),H[3]=.5*W,W=.5/W,H[0]=(Q[5]-Q[7])*W,H[1]=(Q[6]-Q[2])*W,H[2]=(Q[1]-Q[3])*W;else{W=0;Q[4]>Q[0]&&(W=1);Q[8]>Q[3*W+W]&&(W=2);const la=
(W+1)%3,ia=(W+2)%3;let ra=Math.sqrt(Q[3*W+W]-Q[3*la+la]-Q[3*ia+ia]+1);H[W]=.5*ra;ra=.5/ra;H[3]=(Q[3*la+ia]-Q[3*ia+la])*ra;H[la]=(Q[3*la+W]+Q[3*W+la])*ra;H[ia]=(Q[3*ia+W]+Q[3*W+ia])*ra}M.quaternion=H;N(R,t,w);T(R,R,.5);T(Y,c,R[0]);T(h,f,R[1]);N(Y,Y,h);T(h,l,R[2]);M.center=V.add(Y,Y,h);M.halfSize=V.scale(R,x,.5)}function v(c){return c[0]*c[1]+c[0]*c[2]+c[1]*c[2]}function N(c,f,l){c[0]=f[0]+l[0];c[1]=f[1]+l[1];c[2]=f[2]+l[2]}function U(c,f,l){c[0]=f[0]-l[0];c[1]=f[1]-l[1];c[2]=f[2]-l[2]}function T(c,
f,l){c[0]=f[0]*l;c[1]=f[1]*l;c[2]=f[2]*l}function L(c,f,l=0){c[0]=f[l];c[1]=f[l+1];c[2]=f[l+2]}function J(c,f,l){const t=f[0],w=f[1];f=f[2];const x=l[0],M=l[1];l=l[2];c[0]=w*l-f*M;c[1]=f*x-t*l;c[2]=t*M-w*x}function P(c,f){var l=f[0]*f[0]+f[1]*f[1]+f[2]*f[2];0<l&&(l=1/Math.sqrt(l),c[0]=f[0]*l,c[1]=f[1]*l,c[2]=f[2]*l)}function da(c,f){const l=f[0]-c[0],t=f[1]-c[1];c=f[2]-c[2];return l*l+t*t+c*c}const Z=y.create(),ea=y.create(),ca=y.create(),O=y.create(),S=y.create(),aa=y.create(),ja=y.create(),ha=y.create(),
C=y.create(),G=y.create(),I=[0,0,0],ba=K.create(),sa=y.create(),na=y.create(),g=y.create(),k=y.create(),F=y.create(),X=y.create(),fa=y.create(),ka=y.create(),ma=y.create(),qa=y.create(),A=y.create(),B=y.create(),D=y.create(),R=y.create(),Y=y.create(),h=y.create(),e=u.fromValues(1,0,0,0,1,0,0,0,1),m=r.create();class a{constructor(c){this.minVert=Array(7);this.maxVert=Array(7);this.buffer=new ArrayBuffer(448);var f=0;this.minProj=new Float64Array(this.buffer,f,7);f+=56;this.maxProj=new Float64Array(this.buffer,
f,7);f+=56;for(var l=0;7>l;++l)this.minVert[l]=new Float64Array(this.buffer,f,3),f+=24;for(l=0;7>l;++l)this.maxVert[l]=new Float64Array(this.buffer,f,3),f+=24;for(f=0;7>f;++f)this.minProj[f]=Number.POSITIVE_INFINITY,this.maxProj[f]=Number.NEGATIVE_INFINITY;f=Array(7);l=Array(7);const {data:t,size:w}=c;for(c=0;c<t.length;c+=w){var x=t[c];x<this.minProj[0]&&(this.minProj[0]=x,f[0]=c);x>this.maxProj[0]&&(this.maxProj[0]=x,l[0]=c);x=t[c+1];x<this.minProj[1]&&(this.minProj[1]=x,f[1]=c);x>this.maxProj[1]&&
(this.maxProj[1]=x,l[1]=c);x=t[c+2];x<this.minProj[2]&&(this.minProj[2]=x,f[2]=c);x>this.maxProj[2]&&(this.maxProj[2]=x,l[2]=c);x=t[c]+t[c+1]+t[c+2];x<this.minProj[3]&&(this.minProj[3]=x,f[3]=c);x>this.maxProj[3]&&(this.maxProj[3]=x,l[3]=c);x=t[c]+t[c+1]-t[c+2];x<this.minProj[4]&&(this.minProj[4]=x,f[4]=c);x>this.maxProj[4]&&(this.maxProj[4]=x,l[4]=c);x=t[c]-t[c+1]+t[c+2];x<this.minProj[5]&&(this.minProj[5]=x,f[5]=c);x>this.maxProj[5]&&(this.maxProj[5]=x,l[5]=c);x=t[c]-t[c+1]-t[c+2];x<this.minProj[6]&&
(this.minProj[6]=x,f[6]=c);x>this.maxProj[6]&&(this.maxProj[6]=x,l[6]=c)}for(c=0;7>c;++c)x=f[c],L(this.minVert[c],t,x),x=l[c],L(this.maxVert[c],t,x)}}class b{constructor(){this.b0=y.fromValues(1,0,0);this.b1=y.fromValues(0,1,0);this.b2=y.fromValues(0,0,1);this.quality=0}}d.computeOBB=function(c,f){const {data:l,size:t}=c;var w=l.length/t;if(!(0>=w)){var x=new a(c);N(Z,x.minProj,x.maxProj);T(Z,Z,.5);U(ea,x.maxProj,x.minProj);var M=v(ea),H=new b;H.quality=M;14>w&&(c=new p.Vertices(new Float64Array(x.buffer,
112,42),3));var Q=y.create(),W=y.create(),la=y.create();w=y.create();var ia=y.create(),ra=y.create(),pa=y.create();var oa=c;var wa=da(x.maxVert[0],x.minVert[0]),ta=0;for(var ua=1;7>ua;++ua){const ya=da(x.maxVert[ua],x.minVert[ua]);ya>wa&&(wa=ya,ta=ua)}L(Q,x.minVert[ta]);L(W,x.maxVert[ta]);if(1E-6>da(Q,W))oa=1;else{U(w,Q,W);P(w,w);const {data:ya,size:Ba}=oa;x=Number.NEGATIVE_INFINITY;wa=0;for(ta=0;ta<ya.length;ta+=Ba)I[0]=ya[ta]-Q[0],I[1]=ya[ta+1]-Q[1],I[2]=ya[ta+2]-Q[2],ua=w[0]*I[0]+w[1]*I[1]+w[2]*
I[2],ua=I[0]*I[0]+I[1]*I[1]+I[2]*I[2]-ua*ua/(w[0]*w[0]+w[1]*w[1]+w[2]*w[2]),ua>x&&(x=ua,wa=ta);L(la,ya,wa);1E-6>x?oa=2:(U(ia,W,la),P(ia,ia),U(ra,la,Q),P(ra,ra),J(pa,ia,w),P(pa,pa),q(oa,pa,w,ia,ra,H),oa=0)}switch(oa){case 1:f.center=Z;f.halfSize=V.scale(ea,ea,.5);f.quaternion=r.IDENTITY;return;case 2:M=c;L(ka,w);Math.abs(w[0])>Math.abs(w[1])&&Math.abs(w[0])>Math.abs(w[2])?ka[0]=0:Math.abs(w[1])>Math.abs(w[2])?ka[1]=0:ka[2]=0;1E-6>ka[0]*ka[0]+ka[1]*ka[1]+ka[2]*ka[2]&&(ka[0]=ka[1]=ka[2]=1);J(ma,w,ka);
P(ma,ma);J(qa,w,ma);P(qa,qa);z(M,w,ma,qa,A,B);U(D,B,A);n(w,ma,qa,A,B,D,f);return}oa=c;x=ba;const {data:va,size:xa}=oa;L(O,va);L(ca,O);x[0]=fa[0]*pa[0]+fa[1]*pa[1]+fa[2]*pa[2];x[1]=x[0];for(wa=xa;wa<va.length;wa+=xa)ta=va[wa]*pa[0]+va[wa+1]*pa[1]+va[wa+2]*pa[2],ta<x[0]&&(x[0]=ta,L(O,va,wa)),ta>x[1]&&(x[1]=ta,L(ca,va,wa));pa=Q[0]*pa[0]+Q[1]*pa[1]+Q[2]*pa[2];ba[1]-1E-6<=pa&&(ca[0]=void 0);ba[0]+1E-6>=pa&&(O[0]=void 0);void 0!==ca[0]&&(U(S,ca,Q),P(S,S),U(aa,ca,W),P(aa,aa),U(ja,ca,la),P(ja,ja),J(ha,aa,
w),P(ha,ha),J(C,ja,ia),P(C,C),J(G,S,ra),P(G,G),q(oa,ha,w,aa,S,H),q(oa,C,ia,ja,aa,H),q(oa,G,ra,S,ja,H));void 0!==O[0]&&(U(S,O,Q),P(S,S),U(aa,O,W),P(aa,aa),U(ja,O,la),P(ja,ja),J(ha,aa,w),P(ha,ha),J(C,ja,ia),P(C,C),J(G,S,ra),P(G,G),q(oa,ha,w,aa,S,H),q(oa,C,ia,ja,aa,H),q(oa,G,ra,S,ja,H));z(c,H.b0,H.b1,H.b2,A,B);c=y.create();U(c,B,A);H.quality=v(c);H.quality<M?n(H.b0,H.b1,H.b2,A,B,c,f):(f.center=Z,f.halfSize=V.scale(ea,ea,.5),f.quaternion=r.IDENTITY)}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/Attribute":function(){define(["exports"],function(d){class u{constructor(K,V,y=V){this.data=K;this.size=V;this.stride=y}}class r extends u{constructor(K,V,y,p=!1,q=y){super(K,y,q);this.indices=V;this.exclusive=p}}d.Attribute=r;d.Vertices=u;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../core/arrayUtils ../../../core/typedArrayUtil ../../../core/libs/gl-matrix-2/math/quat ../../../core/libs/gl-matrix-2/factories/quatf64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f32 ../../../geometry/SpatialReference ../../../geometry/projection/projectBuffer ./i3s/PointCloudWorkerUtil ../support/orientedBoundingBox".split(" "),function(d,u,r,K,V,y,p,q,E,z){function n(T,L,J,P,da){if(!q.projectBuffer(T,P,0,T,da,0,L))throw Error("Can't reproject");P=y.clone(J.center);
da=y.create();const Z=y.create(),ea=y.clone(J.halfSize);r.conjugate(U,J.quaternion);const ca=new Float32Array(3*L);for(let O=0;O<L;O++){let S=3*O;da[0]=T[S]-P[0];da[1]=T[S+1]-P[1];da[2]=T[S+2]-P[2];V.transformQuat(Z,da,U);ea[0]=Math.max(ea[0],Math.abs(Z[0]));ea[1]=Math.max(ea[1],Math.abs(Z[1]));ea[2]=Math.max(ea[2],Math.abs(Z[2]));ca[S++]=da[0];ca[S++]=da[1];ca[S]=da[2]}J.halfSize=ea;return ca}function v(T,L,J){if(0!==J)for(let P=0;P<L;P++)T[3*P+2]+=J}class N{transform(T){T=this._transform(T);const L=
[T.points.buffer,T.rgb.buffer];null!=T.pointIdFilterMap&&L.push(T.pointIdFilterMap.buffer);for(const J of T.attributes)"buffer"in J.values&&u.isArrayBuffer(J.values.buffer)&&J.values.buffer!==T.rgb.buffer&&L.push(J.values.buffer);return Promise.resolve({result:T,transferList:L})}_transform(T){const L=E.readGeometry(T.schema,T.geometryBuffer);let J=L.length/3,P=null;const da=[];var Z=E.getAttributeValues(T.primaryAttributeData,L,J);null!=T.primaryAttributeData&&Z&&da.push({attributeInfo:T.primaryAttributeData.attributeInfo,
values:Z});var ea=E.getAttributeValues(T.modulationAttributeData,L,J);null!=T.modulationAttributeData&&ea&&da.push({attributeInfo:T.modulationAttributeData.attributeInfo,values:ea});Z=E.evaluateRenderer(T.rendererInfo,Z,ea,J);T.filterInfo&&0<T.filterInfo.length&&null!=T.filterAttributesData&&(ea=T.filterAttributesData.filter(d.isSome).map(O=>{const S=E.getAttributeValues(O,L,J);O={attributeInfo:O.attributeInfo,values:S};da.push(O);return O}),P=new Uint32Array(J),J=E.filterInPlace(L,Z,P,T.filterInfo,
ea));for(var ca of T.userAttributesData)ea=E.getAttributeValues(ca,L,J),da.push({attributeInfo:ca.attributeInfo,values:ea});3*J<Z.length&&(Z=new Uint8Array(Z.buffer.slice(0,3*J)));v(L,J,T.elevationOffset);ca=n(L,J,z.Obb.fromData(T.obbData),p.fromJSON(T.inSR),p.fromJSON(T.outSR));return{obbData:T.obbData,points:ca,rgb:Z,attributes:da,pointIdFilterMap:P}}}const U=K.create();return function(){return new N}});