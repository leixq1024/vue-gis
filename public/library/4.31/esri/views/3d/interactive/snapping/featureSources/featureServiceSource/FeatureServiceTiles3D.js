// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/reactiveUtils ../../../../../../core/accessorSupport/decorators/property ../../../../../../core/has ../../../../../../core/Logger ../../../../../../core/RandomLCG ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../layers/support/TileKey ../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils".split(" "),function(b,c,l,k,e,t,u,v,m,n,h){function p({lij:[a,
f,g],extent:d}){return new n.TileKey(`${a}/${f}/${g}`,a,f,g,d)}b.FeatureServiceTiles3D=class extends l{get tiles(){const a=this.tilesCoveringView,f=this._effectivePointOfInterest;if(null!=f){const g=a.map(d=>h.distanceToTile(f,d));for(let d=1;d<g.length;d++)if(g[d-1]>g[d])return a.sort((q,r)=>h.distanceToTile(f,q)-h.distanceToTile(f,r)),a.slice()}return a}get tilesCoveringView(){return(this.view.featureTiles?.tiles?.toArray()??[]).map(p)}get tileInfo(){return this.view.featureTiles?.tilingScheme?.toTileInfo()??
null}get tileSize(){return this.view.featureTiles?.tileSize??256}get _effectivePointOfInterest(){const a=this.pointOfInterest;return null!=a?a:this.view.pointsOfInterest?.focus.location}constructor(a){super(a);this.pointOfInterest=null}initialize(){this.addHandles(k.watch(()=>this.view.featureTiles,a=>{this.removeHandles("feature-tiles");a&&this.addHandles(a.addClient(),"feature-tiles")},k.initial))}};c.__decorate([e.property({readOnly:!0})],b.FeatureServiceTiles3D.prototype,"tiles",null);c.__decorate([e.property({readOnly:!0})],
b.FeatureServiceTiles3D.prototype,"tilesCoveringView",null);c.__decorate([e.property({readOnly:!0})],b.FeatureServiceTiles3D.prototype,"tileInfo",null);c.__decorate([e.property({readOnly:!0})],b.FeatureServiceTiles3D.prototype,"tileSize",null);c.__decorate([e.property({constructOnly:!0})],b.FeatureServiceTiles3D.prototype,"view",void 0);c.__decorate([e.property()],b.FeatureServiceTiles3D.prototype,"pointOfInterest",void 0);c.__decorate([e.property()],b.FeatureServiceTiles3D.prototype,"_effectivePointOfInterest",
null);b.FeatureServiceTiles3D=c.__decorate([m.subclass("esri.views.3d.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D")],b.FeatureServiceTiles3D);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});