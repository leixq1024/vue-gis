// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../../../core/handleUtils ../../../../../core/quantityUtils ../../../../../core/reactiveUtils ../manipulatedObjectUtils ../tooltipUtils3D ../manipulations/MoveManipulation ../manipulations/moveUtils ../../../../interactive/editGeometry/interfaces ../../../../interactive/tooltip/tooltipCommonUtils ../../../../interactive/tooltip/infos/MovePointTooltipInfo ../../../../interactive/tooltip/infos/ReshapeEdgeOffsetTooltipInfo ../../../../interactive/tooltip/infos/SelectedVertexTooltipInfo ../../../../interactive/tooltip/infos/TranslateTooltipInfo ../../../../interactive/tooltip/infos/TranslateXYTooltipInfo ../../../../interactive/tooltip/infos/TranslateZTooltipInfo ../../../../support/automaticAreaMeasurementUtils ../../../../support/automaticLengthMeasurementUtils ../../../../support/euclideanLengthMeasurementUtils".split(" "),
function(l,y,m,p,u,q,r,z,A,v,B,C,D,E,F,G,w,n,H){function x(b,{activeTooltipInfo:a,selectedVertexManipulatorInfo:f,callbacks:c}){if(a){c.onBeforeReshape();var d=u.manipulatedObjectGeometry(b);switch(d?.type){case "mesh":"move-point"===a.type&&q.updateXYZFromTooltipInfo(a,d.origin,b,c);break;case "point":"move-point"===a.type&&q.updateXYZFromTooltipInfo(a,d,b,c);break;case "polyline":case "polygon":if("selected-vertex"===a.type&&f){var {dx:h,dy:g,dz:e}=v.getXYZDeltasFromTooltipInfo(a,f.manipulator.location);
if(0!==h||0!==g||0!==e)c.onReshapeStart(),b.operations?.moveVertices([f.handle],h,g,e,A.AccumulationBehavior.NEW_STEP),c.onReshape(),c.onReshapeStop()}}}}function I(b,{activeTooltipInfo:a,selectedVertexManipulatorInfo:f,sketchOptions:c}){if(a)switch(a.sketchOptions=c,a?.type){case "move-point":q.updateTooltipInfoFromManipulatedObject(a,b);break;case "selected-vertex":if(a&&"selected-vertex"===a.type)switch(f=f?.manipulator.location,a.setLocationFromPoint(f),q.updateElevationFromPoint(a,f,b),b=b.operations?.data.geometry,
b?.type){case "polygon":a.geometryType="polygon";a.totalLength.visible=!1;a.area.actual=w.autoArea2D(b);break;case "polyline":a.geometryType="polyline",a.totalLength.actual=n.autoLength2D(b),a.area.visible=!1}}}function t(b,a,f){if(null!=a&&"end"!==a.action){const {mapStart:c,mapEnd:d}=a;a=f(c,d);b.distance=null!=a?a:m.zeroMeters}else b.distance=m.zeroMeters}l.connectTooltipToManipulatedObject=function(b,a,f){function c(){const e=f();return{...e,activeTooltipInfo:e.sketchOptions.tooltips.effectiveEnabled?
e.activeTooltipInfo:null}}function d(e){g||(g=!0,e(),g=!1)}function h(e){d(()=>{I(a,e);b.info=e.activeTooltipInfo})}let g=!1;return y.handlesGroup([p.watch(c,h,p.syncAndInitial),p.watch(()=>{const e=c(),{activeTooltipInfo:k}=e;if(k&&"key"in k)return{context:e,activeTooltipInfo:k,key:k.key,geometry:u.manipulatedObjectGeometry(a)}},(e,k)=>{e&&k&&k.key!==e.key&&d(()=>x(a,e.context))},p.sync),a.on("committed",()=>h(c())),v.connectPasteEvent(b,{onBeforePaste:()=>{g=!0},onAfterPaste:()=>{x(a,c());g=!1}})])};
l.createTooltipInfos=function(b,a){a=a?.type;return{edgeOffset:new C.ReshapeEdgeOffsetTooltipInfo({sketchOptions:b,viewType:a}),movePoint:new B.MovePointTooltipInfo({sketchOptions:b,viewType:a}),selectedVertex:new D.SelectedVertexTooltipInfo({sketchOptions:b,viewType:a}),translate:new E.TranslateTooltipInfo({sketchOptions:b,viewType:a}),translateXY:new F.TranslateXYTooltipInfo({sketchOptions:b,viewType:a}),translateZ:new G.TranslateZTooltipInfo({sketchOptions:b,viewType:a})}};l.getUpdatedEdgeOffsetTooltipInfo=
function({operations:b},a,{sketchOptions:f,tooltipInfos:c}){c=c.edgeOffset;c.distance.committed=null;if(null!=a&&null!=a.signedDistance&&"end"!==a.action&&null!=b){var d=b.data.coordinateHelper;const {start:h,end:g}=a.operation.clampedStartAndEnd(a.mapEnd);d=n.autoDistance2D(h,g,d.spatialReference);a=Math.sign(a.signedDistance*a.operation.selectedArrow);c.distance.actual=null!=d?m.scale(d,a):null}else c.distance.actual=m.zeroMeters;b=b?.data.geometry;c.area.actual=null;c.area.visible=!1;c.totalLength.actual=
null;c.totalLength.visible=!1;switch(b?.type){case "polygon":c.area.actual=w.autoArea2D(b);c.area.visible=!0;break;case "polyline":c.totalLength.actual=n.autoLength2D(b),c.totalLength.visible=!0}c.sketchOptions=f;return c};l.getUpdatedTranslateObjectTooltipInfo=function(b,a,{sketchOptions:f,tooltipInfos:c}){let d=null;switch(b){case r.ManipulationType.XY:d=c.translate;t(d,a,(h,g)=>n.autoDistanceBetweenPoints2D(h,g));break;case r.ManipulationType.XY_AXIS:d=c.translateXY;t(d,a,(h,g)=>m.scale(n.autoDistanceBetweenPoints2D(h,
g),z.axisConstrainedDragSign(a)));break;case r.ManipulationType.Z:d=c.translateZ,t(d,a,H.verticalSignedDistanceBetweenPoints)}d.sketchOptions=f;return d};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});