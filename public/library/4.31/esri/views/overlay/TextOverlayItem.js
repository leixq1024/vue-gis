// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../Color ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../libs/maquette/projection ../../libs/maquette/h ../../libs/maquette/projector".split(" "),function(c,m,f,h,u,v,w,p,x,q,y){const n={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",
top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};f=class extends f{get position(){return[this.x,this.y]}set position(a){this._set("x",a[0]);this._set("y",a[1])}get _textShadowColor(){const {textColor:a,backgroundColor:b}=this,d=b.clone();d.a*=a.a;return d}get _textShadow(){const a=
this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${a}`}get padding(){return.5*this.fontSize}get borderRadius(){return this.padding}set borderRadius(a){this._overrideIfSome("borderRadius",a)}constructor(a){super(a);this.y=this.x=0;this.text="-";this.fontSize=14;this.anchor="center";this.isDecoration=this.visible=!0;this.backgroundColor=new m([0,0,0,.6]);this.textColor=new m([255,255,255]);this._textShadowSize=1}render(){return q.h("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+
"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this.borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(a){if(this.visible){var b=a.font.replace(/^(.*?)px/,"");a.font=`${this.fontSize}px ${b}`;var {padding:d,borderRadius:k}=this,g=a.measureText(this.text).width,e=""!==this.text?
this.fontSize:0;b=r[this.anchor];a.textAlign="center";a.textBaseline="middle";g+=2*d;e+=2*d;this._roundedRect(a,this.x+b.x*g,this.y+b.y*e,g,e,k);a.fillStyle=this.backgroundColor.toCss(!0);a.fill();g=this.x+(b.x+.5)*g;b=this.y+(b.y+.5)*e;this._renderTextShadow(a,this.text,g,b);a.fillStyle=this.textColor.toCss(!0);a.fillText(this.text,g,b)}}_renderTextShadow(a,b,d,k){a.lineJoin="miter";a.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/l.length})`;
const g=this._textShadowSize;for(const [e,t]of l)a.fillText(b,d+g*e,k+g*t)}_roundedRect(a,b,d,k,g,e){e=Math.min(e,g/2,k/2);a.beginPath();a.moveTo(b,d+e);a.arcTo(b,d,b+e,d,e);a.lineTo(b+k-e,d);a.arcTo(b+k,d,b+k,d+e,e);a.lineTo(b+k,d+g-e);a.arcTo(b+k,d+g,b+k-e,d+g,e);a.lineTo(b+e,d+g);a.arcTo(b,d+g,b,d+g-e,e);a.closePath()}_cssClasses(){const a={"esri-text-overlay-item":!0};let b;for(b in n)a[n[b]]=this.anchor===b;return a}};c.__decorate([h.property()],f.prototype,"x",void 0);c.__decorate([h.property()],
f.prototype,"y",void 0);c.__decorate([h.property()],f.prototype,"position",null);c.__decorate([h.property()],f.prototype,"text",void 0);c.__decorate([h.property()],f.prototype,"fontSize",void 0);c.__decorate([h.property()],f.prototype,"anchor",void 0);c.__decorate([h.property()],f.prototype,"visible",void 0);c.__decorate([h.property()],f.prototype,"isDecoration",void 0);c.__decorate([h.property()],f.prototype,"backgroundColor",void 0);c.__decorate([h.property()],f.prototype,"textColor",void 0);c.__decorate([h.property()],
f.prototype,"_textShadowSize",void 0);c.__decorate([h.property()],f.prototype,"_textShadowColor",null);c.__decorate([h.property()],f.prototype,"_textShadow",null);c.__decorate([h.property()],f.prototype,"padding",null);c.__decorate([h.property()],f.prototype,"borderRadius",null);f=c.__decorate([p.subclass("esri.views.overlay.TextOverlayItem")],f);const r={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,
y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},l=[];for(c=0;360>c;c+=22.5)l.push([Math.cos(Math.PI*c/180),Math.sin(Math.PI*c/180)]);return f});