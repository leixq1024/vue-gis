// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(b,m,c){function k(a,d,e=c.BlendOperation.ADD,h=[0,0,0,0]){return{srcRgb:a,srcAlpha:a,dstRgb:d,dstAlpha:d,opRgb:e,opAlpha:e,color:{r:h[0],g:h[1],b:h[2],a:h[3]}}}function n(a,d,e,h,K=c.BlendOperation.ADD,L=c.BlendOperation.ADD,l=[0,0,0,0]){return{srcRgb:a,srcAlpha:d,dstRgb:e,dstAlpha:h,opRgb:K,opAlpha:L,color:{r:l[0],g:l[1],b:l[2],a:l[3]}}}function p(a){return M.intern(a)}function q(a){return N.intern(a)}function r(a){return O.intern(a)}
function t(a){return P.intern(a)}function u(a){return Q.intern(a)}function v(a){return R.intern(a)}function w(a){return S.intern(a)}function x(a){return T.intern(a)}function y(a){return U.intern(a)}function f(a){return"["+a.join(",")+"]"}function z(a){return a?f([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,a.color.r,a.color.g,a.color.b,a.color.a]):null}function A(a){return a?f([a.face,a.mode]):null}function B(a){return a?f([a.factor,a.units]):null}function C(a){return a?f([a.func]):
null}function D(a){return a?f([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}function E(a){return a?f([a.zNear,a.zFar]):null}function F(a){return a?f([a.r,a.g,a.b,a.a]):null}function G(a){return a?f([a.mask]):null}function H(a){return a?f(a.buffers):null}const V=k(c.BlendFactor.ZERO,c.BlendFactor.ONE_MINUS_SRC_ALPHA),W=k(c.BlendFactor.ONE,c.BlendFactor.ZERO),X=k(c.BlendFactor.ONE,c.BlendFactor.ONE),Y=k(c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA),
Z=n(c.BlendFactor.SRC_ALPHA,c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA,c.BlendFactor.ONE_MINUS_SRC_ALPHA),I={face:c.Face.BACK,mode:c.CullMode.CCW},J={face:c.Face.FRONT,mode:c.CullMode.CCW};class g{constructor(a,d){this._makeKey=a;this._makeRef=d;this._interns=new Map}intern(a){if(!a)return null;const d=this._makeKey(a),e=this._interns;e.has(d)||e.set(d,this._makeRef(a));return e.get(d)??null}}const M=new g(z,a=>({__tag:"Blending",...a})),N=new g(A,a=>({__tag:"Culling",...a})),O=new g(B,a=>
({__tag:"PolygonOffset",...a})),P=new g(C,a=>({__tag:"DepthTest",...a})),Q=new g(D,a=>({__tag:"StencilTest",...a})),R=new g(E,a=>({__tag:"DepthWrite",...a})),S=new g(F,a=>({__tag:"ColorWrite",...a})),T=new g(G,a=>({__tag:"StencilWrite",...a})),U=new g(H,a=>({__tag:"DrawBuffers",...a})),aa=new g(function(a){return a?f([z(a.blending),A(a.culling),B(a.polygonOffset),C(a.depthTest),D(a.stencilTest),E(a.depthWrite),F(a.colorWrite),G(a.stencilWrite),H(a.drawBuffers)]):null},a=>({blending:p(a.blending),
culling:q(a.culling),polygonOffset:r(a.polygonOffset),depthTest:t(a.depthTest),stencilTest:u(a.stencilTest),depthWrite:v(a.depthWrite),colorWrite:w(a.colorWrite),stencilWrite:x(a.stencilWrite),drawBuffers:y(a.drawBuffers)}));class ba{constructor(a){this._drawBuffersInvalid=this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=
a}setPipeline(a){if(this._pipelineInvalid||a!==this._pipeline)this._setBlending(a.blending),this._setCulling(a.culling),this._setPolygonOffset(a.polygonOffset),this._setDepthTest(a.depthTest),this._setStencilTest(a.stencilTest),this._setDepthWrite(a.depthWrite),this._setColorWrite(a.colorWrite),this._setStencilWrite(a.stencilWrite),this._setDrawBuffers(a.drawBuffers),this._pipeline=a;this._pipelineInvalid=!1}invalidateBlending(){this._pipelineInvalid=this._blendingInvalid=!0}invalidateCulling(){this._pipelineInvalid=
this._cullingInvalid=!0}invalidatePolygonOffset(){this._pipelineInvalid=this._polygonOffsetInvalid=!0}invalidateDepthTest(){this._pipelineInvalid=this._depthTestInvalid=!0}invalidateStencilTest(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDepthWrite(){this._pipelineInvalid=this._depthWriteInvalid=!0}invalidateColorWrite(){this._pipelineInvalid=this._colorWriteInvalid=!0}invalidateStencilWrite(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDrawBuffers(){this._pipelineInvalid=
this._drawBuffersInvalid=!0}_setBlending(a){this._blending=this._setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1}_setCulling(a){this._culling=this._setSubState(a,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1}_setPolygonOffset(a){this._polygonOffset=this._setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1}_setDepthTest(a){this._depthTest=
this._setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1}_setStencilTest(a){this._stencilTest=this._setSubState(a,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1}_setDepthWrite(a){this._depthWrite=this._setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1}_setColorWrite(a){this._colorWrite=this._setSubState(a,this._colorWrite,
this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1}_setStencilWrite(a){this._stencilWrite=this._setSubState(a,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1}_setDrawBuffers(a){this._drawBuffers=this._setSubState(a,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers);this._drawBuffersInvalid=!1}_setSubState(a,d,e,h){if(e||a!==d)h(a),this._pipelineInvalid=!0;return a}}b.StateTracker=
ba;b.backFaceCullingParams=I;b.blendWithPremultipliedAlpha=Y;b.cullingParams=a=>a===m.CullFaceOptions.Back?I:a===m.CullFaceOptions.Front?J:null;b.defaultColorWrite={r:!0,g:!0,b:!0,a:!0};b.defaultDepthWrite={zNear:0,zFar:1};b.frontFaceCullingParams=J;b.keepSourceValues=W;b.makeBlending=p;b.makeColorWrite=w;b.makeCulling=q;b.makeDepthTest=t;b.makeDepthWrite=v;b.makeDrawBuffers=y;b.makePipelineState=function(a){return aa.intern(a)};b.makePolygonOffset=r;b.makeStencilTest=u;b.makeStencilWrite=x;b.premultipliedAlphaToPremultipliedAlpha=
Z;b.separateBlendingParams=n;b.simpleBlendingParams=k;b.weightedAdd=X;b.writeDestinationPremultipliedAlpha=V;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});