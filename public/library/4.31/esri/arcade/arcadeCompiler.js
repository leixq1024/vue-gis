// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require exports ./arcadeEnvironment ./ArcadeModule ./ArcadeModuleLoader ./containerUtils ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference".split(" "),function(Z,B,x,aa,O,I,C,e,J,z,g,P,Q,K,ba,ca,da,ea,fa,R,ha,S){function u(a,b,c){try{return c(a,
null,b.arguments)}catch(d){throw d;}}function l(a,b){switch(b.type){case "AssignmentExpression":return ia(a,b);case "UpdateExpression":return ja(a,b);case "TemplateLiteral":try{var c=[],d=0;for(var f of b.quasis)c.push(f.value?JSON.stringify(f.value.cooked):JSON.stringify("")),!1===f.tail&&(c.push(b.expressions[d]?"lang.castString(lang.aCheck("+l(a,b.expressions[d])+", 'TemplateLiteral'))":""),d++);var k="(["+c.join(",")+"]).join('')"}catch(h){throw h;}return k;case "Identifier":return ka(a,b);case "MemberExpression":try{let h;
!0===b.computed?h=l(a,b.property):(v(b.property.name),h="'"+b.property.name+"'");d="lang.member("+l(a,b.object)+","+h+")"}catch(h){throw h;}return d;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "CallExpression":return la(a,b);case "UnaryExpression":try{var m="lang.unary("+l(a,b.argument)+",'"+b.operator+"')"}catch(h){throw h;}return m;case "BinaryExpression":try{var q="lang.binary("+l(a,b.left)+","+l(a,b.right)+",'"+b.operator+"')"}catch(h){throw h;}return q;
case "LogicalExpression":try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,b);if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,b);if("\x26\x26"===b.operator||"||"===b.operator)var n="(lang.logicalCheck("+l(a,b.left)+") "+b.operator+" lang.logicalCheck("+l(a,b.right)+"))";
else throw new e.ArcadeCompilationError(null,e.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(h){throw h;}return n;case "ArrayExpression":try{k=[];for(f=0;f<b.elements.length;f++)"Literal"===b.elements[f].type?k.push(l(a,b.elements[f])):k.push("lang.aCheck("+l(a,b.elements[f])+",'ArrayExpression')");c="["+k.join(",")+"]"}catch(h){throw h;}return c;case "ObjectExpression":k="lang.dictionary([";for(c=0;c<b.properties.length;c++)d=b.properties[c],"Identifier"===d.key.type?(v(d.key.name),f="'"+
d.key.name+"'"):f=l(a,d.key),d=l(a,d.value),0<c&&(k+=","),k+="lang.strCheck("+f+",'ObjectExpression'),lang.aCheck("+d+", 'ObjectExpression')";return k+"])";default:throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.Unrecognized,b);}}function t(a,b){switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclaration":var c=[];for(var d=0;d<b.declarations.length;d++)c.push(ma(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return E(a,
b);case "FunctionDeclaration":var f=x.toSymbolId(b.id);v(f);d=!1;void 0!==a.globalScope[f]?c=f:void 0!==a.globalScope._SymbolsMap[f]?c=a.globalScope._SymbolsMap[f]:a.undeclaredGlobalsInFunctions.has(f)?(c=a.undeclaredGlobalsInFunctions.get(f).manglename,a.globalScope._SymbolsMap[f]=c,a.mangleMap[f]=c,a.undeclaredGlobalsInFunctions.delete(f),d=!0):(c=y(a),a.globalScope._SymbolsMap[f]=c,a.mangleMap[f]=c);f={isAsync:a.isAsync,console:a.console,exports:a.exports,undeclaredGlobalsInFunctions:a.undeclaredGlobalsInFunctions,
customfunctions:a.customfunctions,moduleFactory:a.moduleFactory,moduleFactoryMap:a.moduleFactoryMap,libraryResolver:a.libraryResolver,lrucache:a.lrucache,interceptor:a.interceptor,services:a.services,symbols:a.symbols,mangleMap:a.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter,globalScope:a.globalScope};var k="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var m=0;m<b.params.length;m++){var q=x.toSymbolId(b.params[m]);v(q);var n=y(a);f.localScope._SymbolsMap[q]=n;f.mangleMap[q]=n;k+="lscope['"+n+"']\x3darguments["+m.toString()+"];\n"}!0===a.isAsync?(k=k+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(E(f,b.body)+"\n return lastStatement; "),k=k+"});  }, runtimeCtx),"+(b.params.length+")")):k+=E(f,b.body)+"\n return lastStatement; }, runtimeCtx),"+b.params.length+")";k+="\n lastStatement \x3d lc.voidOperation; \n";a=d?"gscope[lang.setAssig('"+
c+"', runtimeCtx)]\x3d"+k:"gscope['"+c+"']\x3d"+k;return a;case "ImportDeclaration":return b=x.toSymbolId(b.specifiers[0].local),v(b),d=a.libraryResolver?.loadLibrary(b),c=y(a),void 0===a.moduleFactory[d.uri]&&(a.moduleFactory[d.uri]=na(d.syntax,{interceptor:a.interceptor,services:a.services,moduleFactory:a.moduleFactory,lrucache:a.lrucache,timeZone:a.timeZone??null,libraryResolver:a.libraryResolver,customfunctions:a.customfunctions,vars:{}},a.isAsync)),a.moduleFactoryMap[c]=d.uri,d="",d=a.isAsync?
"(yield lang.loadModule('"+c+"', runtimeCtx) ); ":"lang.loadModule('"+c+"', runtimeCtx); ",void 0!==a.globalScope[b]?a="gscope['"+b+"']\x3d"+d:void 0!==a.globalScope._SymbolsMap[b]?a="gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+d:(a.undeclaredGlobalsInFunctions.has(b)?(c=a.undeclaredGlobalsInFunctions.get(b).manglename,a.undeclaredGlobalsInFunctions.delete(b)):c=y(a),a.globalScope._SymbolsMap[b]=c,a.mangleMap[b]=c,a="gscope[lang.setAssig('"+c+"', runtimeCtx)]\x3d"+d),a;case "ExportNamedDeclaration":c=
t(a,b.declaration);if("FunctionDeclaration"===b.declaration.type)a.exports[x.toSymbolId(b.declaration.id)]="function";else if("VariableDeclaration"===b.declaration.type)for(d of b.declaration.declarations)a.exports[x.toSymbolId(d.id)]="variable";return c;case "ReturnStatement":return a=null===b.argument?"return lc.voidOperation":"return "+l(a,b.argument),a;case "IfStatement":return T(a,b);case "ExpressionStatement":return a="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+
l(a,b.expression)+"; \n ":"lastStatement \x3d "+l(a,b.expression)+"; ",a;case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":return c="lastStatement \x3d lc.voidOperation; \n",null!==b.init&&(c="VariableDeclaration"===b.init.type?c+t(a,b.init):c+(l(a,b.init)+"; ")),d=w(a),f=w(a),c+="var "+d+" \x3d true; \n do { ",null!==b.update&&(c+=" if ("+d+"\x3d\x3d\x3dfalse) {\n "+l(a,b.update)+"  \n}\n "+d+"\x3dfalse; \n"),null!==b.test&&(c+="var "+f+" \x3d "+l(a,
b.test)+"; ",c+="if ("+f+"\x3d\x3d\x3dfalse) { break; } else if ("+f+"!\x3d\x3dtrue) { lang.error('"+e.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n"),c+=t(a,b.body),null!==b.update&&(c+="\n "+l(a,b.update)),c+("\n"+d+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":return c=w(a),d=w(a),f=w(a),k="var "+c+" \x3d "+l(a,b.right)+";\n","VariableDeclaration"===b.left.type&&(k+=t(a,b.left)),m=x.toSymbolId("VariableDeclaration"===b.left.type?b.left.declarations[0].id:
b.left),v(m),q="",null!==a.localScope&&(void 0!==a.localScope[m]?q="lscope['"+m+"']":void 0!==a.localScope._SymbolsMap[m]&&(q="lscope['"+a.localScope._SymbolsMap[m]+"']")),n="",""===q&&(void 0!==a.globalScope[m]?q="gscope['"+m+"']":void 0!==a.globalScope._SymbolsMap[m]?q="gscope['"+a.globalScope._SymbolsMap[m]+"']":null!==a.localScope&&(a.undeclaredGlobalsInFunctions.has(m)?(q="gscope['"+a.undeclaredGlobalsInFunctions.get(m).manglename+"']",n=a.undeclaredGlobalsInFunctions.get(m).manglename):(n={manglename:y(a),
node:b.left},a.undeclaredGlobalsInFunctions.set(m,n),q="gscope['"+n.manglename+"']",n=n.manglename))),n&&(k+="lang.chkAssig('"+n+"',runtimeCtx); \n"),k=k+("if ("+c+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(c+") || lc.isString("+c+")) {var ")+(d+"\x3d"+c+".length; \nfor(var ")+(f+"\x3d0; "+f+"\x3c"+d+"; "+f+"++) {\n")+(q+"\x3d"+f+";\n")+t(a,b.body),k=k+"\n}\n lastStatement \x3d lc.voidOperation; \n \n}\nelse if (lc.isImmutableArray("+(c+")) {var ")+(d+"\x3d"+
c+".length(); \nfor(var ")+(f+"\x3d0; "+f+"\x3c"+d+"; "+f+"++) {\n")+(q+"\x3d"+f+";\n")+t(a,b.body),k=k+"\n}\n lastStatement \x3d lc.voidOperation; \n \n}\nelse if (( "+(c+" instanceof lang.Dictionary) || ( "+c+" instanceof lang.Feature)) {var ")+(d+"\x3d"+c+".keys(); \nfor(var ")+(f+"\x3d0; "+f+"\x3c"+d+".length; "+f+"++) {\n")+(q+"\x3d"+d+"["+f+"];\n")+t(a,b.body),k+="\n}\n lastStatement \x3d lc.voidOperation; \n \n}\n",a.isAsync&&(k=k+("else if (lc.isFeatureSet("+c+")) {var ")+(d+"\x3d"+c+".iterator(runtimeCtx.abortSignal); \nfor(var ")+
(f+"\x3dlang. graphicToFeature( yield "+d+".next(),"+c+", runtimeCtx); "+f+"!\x3dnull; "+f+"\x3dlang. graphicToFeature( yield "+d+".next(),"+c+", runtimeCtx)) {\n")+(q+"\x3d"+f+";\n")+t(a,b.body),k+="\n}\n lastStatement \x3d lc.voidOperation; \n \n}\n"),k+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":return c="lastStatement \x3d lc.voidOperation; \n",d=w(a),c+=`\n  var ${d} = true;\n    do {\n      ${d} = ${l(a,b.test)};\n      if (${d}==false) {\n        break;\n      }\n      if (${d}!==true) {\n        lang.error('${e.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${t(a,
b.body)}\n    }\n    while (${d} !== false);\n    lastStatement = lc.voidOperation;\n  `;default:throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.Unrecognized,b);}}function ja(a,b){if("CallExpression"===b.argument.type)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.NeverReach,b);if("MemberExpression"===b.argument.type){var c=l(a,b.argument.object);!0===b.argument.computed?a=l(a,b.argument.property):(v(b.argument.property.name),a="'"+b.argument.property.name+"'");return"lang.memberupdate("+
c+","+a+",'"+b.operator+"',"+b.prefix+")"}c=x.toSymbolId(b.argument);v(c);if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+
"','"+b.operator+"',"+b.prefix+")";if(null!==a.localScope){if(a.undeclaredGlobalsInFunctions.has(c))return"lang.update(gscope,lang.chkAssig( '"+a.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx),'"+b.operator+"',"+b.prefix+")";const d={manglename:y(a),node:b.argument};a.undeclaredGlobalsInFunctions.set(c,d);return"lang.update(gscope, lang.chkAssig('"+d.manglename+"',runtimeCtx),'"+b.operator+"',"+b.prefix+")"}throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.InvalidIdentifier,
b);}function ia(a,b){const c=l(a,b.right);if("MemberExpression"===b.left.type){var d=l(a,b.left.object);!0===b.left.computed?a=l(a,b.left.property):(a="'"+b.left.property.name+"'",v(b.left.property.name));return"lang.assignmember("+d+","+a+",'"+b.operator+"',"+c+")"}d=x.toSymbolId(b.left);v(d);if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"'])";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+
"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"'])"}if(void 0!==a.globalScope[d])return"gscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"'])";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"'])";if(null!==a.localScope){if(a.undeclaredGlobalsInFunctions.has(d))return"gscope[lang.chkAssig('"+a.undeclaredGlobalsInFunctions.get(d).manglename+
"',runtimeCtx)]\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.undeclaredGlobalsInFunctions.get(d).manglename+"'])";const f={manglename:y(a),node:b.left};a.undeclaredGlobalsInFunctions.set(d,f);return"gscope[lang.chkAssig('"+f.manglename+"',runtimeCtx)]\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+f.manglename+"'])"}throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.InvalidIdentifier,b);}function U(a,b){return"BlockStatement"===b.type?t(a,b):"ReturnStatement"===b.type||"BreakStatement"===
b.type||"ContinueStatement"===b.type?t(a,b)+"; ":"ExpressionStatement"===b.type?t(a,b):t(a,b)+"; "}function T(a,b){return`if (lang.mustBoolean(${l(a,b.test)}, runtimeCtx) === true) {\n    ${U(a,b.consequent)}\n  } `+(null!==b.alternate?"IfStatement"===b.alternate.type?" else "+T(a,b.alternate):` else {\n      ${U(a,b.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function E(a,b){let c="";for(let d=0;d<b.body.length;d++)"EmptyStatement"!==b.body[d].type&&(c="ReturnStatement"===
b.body[d].type?c+(t(a,b.body[d])+"; \n"):"BreakStatement"===b.body[d].type?c+(t(a,b.body[d])+"; \n"):"ContinueStatement"===b.body[d].type?c+(t(a,b.body[d])+"; \n"):c+(t(a,b.body[d])+" \n"));return c}function v(a){if("iif"===a)throw new e.ArcadeUncompilableError;if("decode"===a)throw new e.ArcadeUncompilableError;if("when"===a)throw new e.ArcadeUncompilableError;if("defaultvalue"===a)throw new e.ArcadeUncompilableError;}function ma(a,b){const c=null===b.init?null:l(a,b.init);b=x.toSymbolId(b.id);v(b);
if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+"; ";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+"; ";var d=y(a);a.localScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"lscope['"+d+"']\x3d"+c+"; "}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+"; ";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+a.globalScope._SymbolsMap[b]+"']\x3d"+c+"; ";if(a.undeclaredGlobalsInFunctions.has(b))return d=a.undeclaredGlobalsInFunctions.get(b).manglename,
a.globalScope._SymbolsMap[b]=d,a.mangleMap[b]=d,a.undeclaredGlobalsInFunctions.delete(b),"gscope[lang.setAssig('"+d+"', runtimeCtx)]\x3d"+c+"; ";d=y(a);a.globalScope._SymbolsMap[b]=d;a.mangleMap[b]=d;return"gscope['"+d+"']\x3d"+c+"; "}function ka(a,b){try{const c=x.toSymbolId(b);v(c);if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";
if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";if(null!==a.localScope){if(a.undeclaredGlobalsInFunctions.has(c))return"gscope[lang.chkAssig('"+a.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";const d={manglename:y(a),node:b};a.undeclaredGlobalsInFunctions.set(c,d);return"gscope[lang.chkAssig('"+d.manglename+"',runtimeCtx)]"}throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.InvalidIdentifier,b);}catch(c){throw c;}}function la(a,
b){try{if("MemberExpression"===b.callee.type){if(!0===b.callee.computed)var c=l(a,b.callee.property);else v(b.callee.property.name),c="'"+b.callee.property.name+"'";var d="[";for(var f=0;f<b.arguments.length;f++)0<f&&(d+=", "),d+=l(a,b.arguments[f]);d+="]";return a.isAsync?"(yield lang.callModuleFunction("+l(a,b.callee.object)+","+d+","+c+",runtimeCtx))":"lang.callModuleFunction("+l(a,b.callee.object)+","+d+","+c+",runtimeCtx)"}if("Identifier"!==b.callee.type)throw new e.ArcadeCompilationError(a,
e.ExecutionErrorCodes.FunctionNotFound,b);const h=x.toSymbolId(b.callee);if("iif"===h){try{if(3!==b.arguments.length)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,b);const p=w(a);var k=`${a.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${p} = ${l(a,b.arguments[0])};\n\n        if (${p} === true) {\n          return  ${l(a,b.arguments[1])};\n        }\n        else if (${p} === false) {\n          return ${l(a,
b.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${a.isAsync?"})}()))":"}()"}`}catch(p){throw p;}return k}if("when"===h){try{if(3>b.arguments.length)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,b);if(0===b.arguments.length%2)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,b);const p=w(a);f="var ";for(var m=0;m<b.arguments.length-1;m+=2)f+=`${p} = lang.mustBoolean(${l(a,
b.arguments[m])}, runtimeCtx);\n      if (${p} === true ) {\n        return ${l(a,b.arguments[m+1])}\n      }\n`;d=`${a.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${f}\n        return ${l(a,b.arguments[b.arguments.length-1])}\n        ${a.isAsync?"})}()))":"}()"}`}catch(p){throw p;}return d}if("defaultvalue"===h){try{if(2>b.arguments.length||3<b.arguments.length)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,
b);const p=w(a),A=w(a);var q=3===b.arguments.length?`${a.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${p} = ${l(a,b.arguments[0])};\n      var ${A} = ${l(a,b.arguments[1])};\n      ${p} = lang.getNestedOptionalValue(${p}, ${A});\n      return ${p} != null && ${p} !== "" ? ${p} : ${l(a,b.arguments[2])};\n      ${a.isAsync?"})}()))":"}()"}`:`${a.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${p} = ${l(a,b.arguments[0])};\n        if (${p} === null) {\n          return  ${l(a,b.arguments[1])};\n        }\n        if (${p} === "") {\n          return  ${l(a,b.arguments[1])};\n        }\n        if (${p} === undefined) {\n          return  ${l(a,b.arguments[1])};\n        }\n        return ${p};\n      ${a.isAsync?"})}()))":"}()"}`}catch(p){throw p;}return q}if("decode"===h){try{if(2>b.arguments.length)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,
b);if(2===b.arguments.length)f=`(${l(a,b.arguments[1])})`;else{if(0===(b.arguments.length-1)%2)throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,b);m=w(a);var n=w(a);d="var ";for(c=1;c<b.arguments.length-1;c+=2)d+=`${n} = ${l(a,b.arguments[c])};\n      if (lang.binary(${n}, ${m}, "==") === true ) {\n        return ${l(a,b.arguments[c+1])}\n      }\n`;f=`${a.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${m} = ${l(a,
b.arguments[0])};\n        ${d}\n        return ${l(a,b.arguments[b.arguments.length-1])}\n        ${a.isAsync?"})}()))":"}()"}`}}catch(p){throw p;}return f}d="";null!==a.localScope&&(void 0!==a.localScope[h]?d="lscope['"+h+"']":void 0!==a.localScope._SymbolsMap[h]&&(d="lscope['"+a.localScope._SymbolsMap[h]+"']"));if(""===d)if(void 0!==a.globalScope[h])d="gscope['"+h+"']";else if(void 0!==a.globalScope._SymbolsMap[h])d="gscope['"+a.globalScope._SymbolsMap[h]+"']";else if(null!==a.localScope)if(a.undeclaredGlobalsInFunctions.has(h))d=
"gscope[lang.chkAssig('"+a.undeclaredGlobalsInFunctions.get(h).manglename+"',runtimeCtx)]";else{const p={manglename:y(a),node:b.callee};a.undeclaredGlobalsInFunctions.set(h,p);d="gscope[lang.chkAssig('"+p.manglename+"',runtimeCtx)]"}if(""!==d){f="[";for(m=0;m<b.arguments.length;m++)0<m&&(f+=", "),f+=l(a,b.arguments[m]);f+="]";return a.isAsync?"(yield lang.callfunc("+d+","+f+",runtimeCtx) )":"lang.callfunc("+d+","+f+",runtimeCtx)"}throw new e.ArcadeCompilationError(a,e.ExecutionErrorCodes.FunctionNotFound,
b);}catch(h){throw h;}}function y(a){a.symbols.symbolCounter++;return`_T${a.symbols.symbolCounter}`}function w(a){a.symbols.symbolCounter++;return`_Tvar${a.symbols.symbolCounter}`}function V(a,b,c){const d={_SymbolsMap:{}};a||={};c||={};d.textformatting=1;d.infinity=1;d.pi=1;for(const f in b)d[f]=1;for(const f in c)d[f]=1;for(const f in a)d[f]=1;return d}function W(a,b,c,d){c=c?new L:new M;a||={};b||={};const f=new C({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});
f.immutable=!1;c._SymbolsMap={textformatting:1,infinity:1,pi:1};c.textformatting=f;c.infinity=Number.POSITIVE_INFINITY;c.pi=Math.PI;for(const k in b)c[k]=b[k],c._SymbolsMap[k]=1;for(const k in a)b=a[k],c._SymbolsMap[k]=1,g.isGraphic(b)?c[k]=J.createFromGraphic(b,d??null):c[k]=b;return c}function G(a,b){const c={mode:b,compiled:!0,functions:{},signatures:[],standardFunction:u,standardFunctionAsync:u,evaluateIdentifier:oa};for(let d=0;d<a.length;d++)a[d].registerFunctions(c);if("sync"===b){for(const d in c.functions)r[d]=
new z.NativeFunction(c.functions[d]),M.prototype[d]=r[d];for(a=0;a<c.signatures.length;a++)P.addFunctionDeclaration(c.signatures[a],"sync")}else{for(const d in c.functions)D[d]=new z.NativeFunction(c.functions[d]),L.prototype[d]=D[d];for(a=0;a<c.signatures.length;a++)P.addFunctionDeclaration(c.signatures[a],"async")}}function oa(a,b){b=b.name;if("_SymbolsMap"===b)throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.InvalidIdentifier,null);if(0<a.localStack.length){if(!b.toLowerCase().startsWith("_t")&&
void 0!==a.localStack[a.localStack.length-1][b])return a.localStack[a.localStack.length-1][b];const c=a.mangleMap[b];if(void 0!==c&&void 0!==a.localStack[a.localStack.length-1][c])return a.localStack[a.localStack.length-1][c]}if(!b.toLowerCase().startsWith("_t")&&void 0!==a.globalScope[b]||1===a.globalScope._SymbolsMap[b])return a.globalScope[b];b=a.mangleMap[b];if(void 0!==b)return a.globalScope[b]}function H(a){console.log(a)}function na(a,b,c=!1){b={isAsync:c,moduleFactory:b.moduleFactory,moduleFactoryMap:{},
libraryResolver:new O.ArcadeModuleLoader(null,a.loadedModules),globalScope:V(b.vars,c?D:r,b.customfunctions),customfunctions:b.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:H,lrucache:b.lrucache,timeZone:b.timeZone??null,interceptor:b.interceptor,services:b.services,symbols:{symbolCounter:0}};a=E(b,a);""===a&&(a="lc.voidOperation; ");const d=b.moduleFactory,f=b.moduleFactoryMap,k=b.exports,m={};for(var q in k)m[q]=b.mangleMap[q]??
q;q={lc:g.lc,lang:X,mangles:b.mangleMap,prepareModule(n){return new F(n)},prepare(n,h){let p=n.spatialReference;if(null===p||void 0===p)p=new S({wkid:102100});const A=W(n.vars,n.customfunctions,h,n.timeZone);return{localStack:[],isAsync:h,exports:k,exportmangle:m,gdefs:{},moduleFactory:d,moduleFactoryMap:f,moduleSingletons:n.moduleSingletons,mangleMap:this.mangles,spatialReference:p,globalScope:A,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,localScope:null,services:n.services,
console:n.console??H,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor,symbols:{symbolCounter:0},depthCounter:n.depthCounter}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
a+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(q)}class Y extends z.ArcadeFunction{constructor(a,b){super();this.paramCount=b;this.fn=a}createFunction(a){return(...b)=>
{if(b.length!==this.paramCount)throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...b)}}call(a,b){return this.fn(...b.arguments)}marshalledCall(a,b,c,d){return d(a,b,(f,k,m)=>{m=m.map(q=>!g.isFunctionParameter(q)||q instanceof z.ScopeMarshalledFunction?q:z.wrapModuleScopedResponse(q,a,d));f=this.call(c,{arguments:m});return R.isPromiseLike(f)?f.then(q=>z.wrapModuleScopedResponse(q,c,d)):f})}}const r={};K.registerFunctions(r,u);fa.registerFunctions(r,
u);da.registerFunctions(r,u);ba.registerFunctions(r,u);ea.registerFunctions(r,u);r.iif=function(a,b){try{return u(a,b,(c,d,f)=>{throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.Unrecognized,b);})}catch(c){throw c;}};r.decode=function(a,b){try{return u(a,b,(c,d,f)=>{throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.Unrecognized,b);})}catch(c){throw c;}};r.when=function(a,b){try{return u(a,b,(c,d,f)=>{throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.Unrecognized,b);})}catch(c){throw c;
}};r.defaultvalue=function(a,b){try{return u(a,b,(c,d,f)=>{throw new e.ArcadeExecutionError(a,e.ExecutionErrorCodes.Unrecognized,b);})}catch(c){throw c;}};const D={};for(const a in r)D[a]=new z.NativeFunction(r[a]);ca.registerFunctions(r,u);for(const a in r)r[a]=new z.NativeFunction(r[a]);const M=function(){};M.prototype=r;const L=function(){};L.prototype=D;K={fixSpatialReference:g.fixSpatialReference,parseArguments:function(a,b){const c=[];for(let d=0;d<b.arguments.length;d++)c.push(l(a,b.arguments[d]));
return c},standardFunction:u};G([Q.ArrayFunctions],"sync");G([Q.ArrayFunctions],"async");let N=0;const X={isNumber(a){return g.isNumber(a)},isArray(a){return g.isArray(a)},isImmutableArray(a){return g.isImmutableArray(a)},isFeature(a){return g.isFeature(a)},isString(a){return g.isString(a)},isDictionary(a){return g.isDictionary(a)},isGeometry(a){return g.isGeometry(a)},geometryMember(a,b,c,d,f=1){return I.geometryMember(a,b,c,d,f)},error(a){throw new e.ArcadeExecutionError(null,a,null);},__awaiter(a,
b,c,d){return new Promise((f,k)=>{function m(h){try{n(d.next(h))}catch(p){k(p)}}function q(h){try{n(d["throw"](h))}catch(p){k(p)}}function n(h){h.done?f(h.value):h.value?.then?h.value.then(m,q):(N++,0===N%100?setTimeout(()=>{N=0;m(h.value)},0):m(h.value))}n((d=d.apply(a,b||[])).next())})},functionDepthchecker(a,b){return function(){b.depthCounter.depth++;b.localStack.push({});if(64<b.depthCounter.depth)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.MaximumCallDepth,null);const c=a.apply(this,
arguments);if(R.isPromiseLike(c))return c.then(d=>{b.depthCounter.depth--;--b.localStack.length;return d});b.depthCounter.depth--;--b.localStack.length;return c}},chkAssig(a,b){if(void 0===b.gdefs[a])throw new e.ArcadeExecutionError(b,e.ExecutionErrorCodes.InvalidIdentifier,null);return a},mustBoolean(a,b){if(!0===a||!1===a)return a;throw new e.ArcadeExecutionError(b,e.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(a,b){b.gdefs[a]=1;return a},castString(a){return g.toString(a)},aCheck(a,
b){if(g.isFunctionParameter(a)){if("ArrayExpression"===b)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===b)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return a===g.voidOperation?null:a},Dictionary:C,Feature:J,UserDefinedCompiledFunction:Y,dictionary(a){const b={},c=new Map;for(let d=0;d<a.length;d+=2){if(g.isFunctionParameter(a[d+
1]))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===g.isString(a[d]))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyMustBeString,null);let f=a[d].toString();const k=f.toLowerCase();c.has(k)?f=c.get(k):c.set(k,f);b[f]=a[d+1]===g.voidOperation?null:a[d+1]}a=new C(b);a.immutable=!1;return a},strCheck(a){if(!1===g.isString(a))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyMustBeString,null);return a},unary(a,b){if(g.isBoolean(a)){if("!"===
b)return!a;if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);if("~"===b)return~g.toNumber(a);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===b)return-1*g.toNumber(a);if("+"===b)return 1*g.toNumber(a);if("~"===b)return~g.toNumber(a);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(a){if(!1===g.isBoolean(a))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicExpressionOrAnd,
null);return a},logical(a,b,c){if(g.isBoolean(a)&&g.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(a,b,c){switch(c){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(a),g.toNumber(b),c);case "\x3d\x3d":return g.equalityTest(a,b);case "\x3d":return g.equalityTest(a,b);case "!\x3d":return!g.equalityTest(a,b);case "\x3c":return g.greaterThanLessThan(a,
b,c);case "\x3e":return g.greaterThanLessThan(a,b,c);case "\x3c\x3d":return g.greaterThanLessThan(a,b,c);case "\x3e\x3d":return g.greaterThanLessThan(a,b,c);case "+":return g.isString(a)||g.isString(b)?g.toString(a)+g.toString(b):g.toNumber(a)+g.toNumber(b);case "-":return g.toNumber(a)-g.toNumber(b);case "*":return g.toNumber(a)*g.toNumber(b);case "/":return g.toNumber(a)/g.toNumber(b);case "%":return g.toNumber(a)%g.toNumber(b);default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.UnsupportedOperator,
null);}},assign(a,b,c){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%g.toNumber(a);default:throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.UnsupportedOperator,null);}},update(a,b,c,d){const f=g.toNumber(a[b]);
a[b]="++"===c?f+1:f-1;return!1===d?f:"++"===c?f+1:f-1},graphicToFeature(a,b,c){return null===a?null:J.createFromGraphicLikeObject(a.geometry,a.attributes,b,c.timeZone)},memberupdate(a,b,c,d){let f;if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>=a.length)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);f=g.toNumber(a[b]);a[b]="++"===c?f+1:f-1}else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(a instanceof
C){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===a.hasField(b))f=g.toNumber(a.field(b)),a.setField(b,"++"===c?f+1:f-1);else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.FieldNotFound,null,{key:b});}else if(g.isFeature(a)){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===a.hasField(b))f=g.toNumber(a.field(b)),a.setField(b,"++"===c?f+1:f-1);
else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.FieldNotFound,null);}else{if(g.isImmutableArray(a))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.Immutable,null);if(a instanceof F){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===a.hasGlobal(b))f=g.toNumber(a.global(b)),a.setGlobal(b,"++"===c?f+1:f-1);else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===d?f:"++"===c?f+1:f-1},assignmember(a,b,c,d){if(g.isArray(a))if(g.isNumber(b)){0>b&&(b=a.length+b);if(0>b||b>a.length)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);if(b===a.length&&"\x3d"!==c)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);a[b]=this.assign(d,c,a[b])}else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(a instanceof
C){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===a.hasField(b))a.setField(b,this.assign(d,c,a.field(b)));else{if("\x3d"!==c)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.FieldNotFound,null);a.setField(b,this.assign(d,c,null))}}else if(g.isFeature(a)){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===a.hasField(b))a.setField(b,this.assign(d,c,
a.field(b)));else{if("\x3d"!==c)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.FieldNotFound,null);a.setField(b,this.assign(d,c,null))}}else{if(g.isImmutableArray(a))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.Immutable,null);if(a instanceof F){if(!1===g.isString(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(a.hasGlobal(b))a.setGlobal(b,this.assign(d,c,a.global(b)));else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidIdentifier,null);}},member(a,b){if(null===a)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.MemberOfNull,null);if(a instanceof C||g.isFeature(a)){if(g.isString(b))return a.field(b);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(a instanceof ha){if(g.isString(b))return I.geometryMember(a,b,null,null);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidMemberAccessKey,
null);}if(g.isArray(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);return a[b]}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isString(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length+b);if(b>=a.length||0>b)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);return a[b]}throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isImmutableArray(a)){if(g.isNumber(b)&&isFinite(b)&&Math.floor(b)===b){0>b&&(b=a.length()+b);if(b>=a.length()||0>b)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.OutOfBounds,null);return a.get(b)}throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(a instanceof F&&g.isString(b))return a.global(b);throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(a,
b,c){return a.call(c,{arguments:b,preparsed:!0})},loadModule(a,b){a=b.moduleFactoryMap[a];if(b.moduleSingletons[a])return b.moduleSingletons[a];const c=b.moduleFactory[a]({vars:{},moduleSingletons:b.moduleSingletons,depthCounter:b.depthCounter,console:b.console,abortSignal:b.abortSignal,isAsync:b.isAsync,services:b.services,lrucache:b.lrucache,timeZone:b.timeZone??null,interceptor:b.interceptor},b.spatialReference);return b.moduleSingletons[a]=c},callModuleFunction(a,b,c,d){if(!(a instanceof F))throw new e.ArcadeExecutionError(null,
e.ExecutionErrorCodes.FunctionNotFound,null);a=a.global(c);if(!1===g.isFunctionParameter(a))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.CallNonFunction,null);return a.call(d,{preparsed:!0,arguments:b})},getNestedOptionalValue(a,b){return I.getNestedOptionalValue(a,b)}};class F extends aa.ArcadeModule{constructor(a){super();this.moduleContext=a}hasGlobal(a){void 0===this.moduleContext.exports[a]&&(a=a.toLowerCase());return void 0!==this.moduleContext.exports[a]?!0:!1}setGlobal(a,b){const c=
this.moduleContext.globalScope;a=a.toLowerCase();if(g.isFunctionParameter(b))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.AssignModuleFunction,null);c[this.moduleContext.exportmangle[a]]=b}global(a){const b=this.moduleContext.globalScope;a=a.toLowerCase();const c=b[this.moduleContext.exportmangle[a]];if(void 0===c)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.InvalidIdentifier,null);if(g.isFunctionParameter(c)&&!(c instanceof z.ScopeMarshalledFunction)){const d=new z.ScopeMarshalledFunction;
d.fn=c;d.parameterEvaluator=u;d.context=this.moduleContext;return b[this.moduleContext.exportmangle[a]]=d}return c}}B.UserDefinedCompiledFunction=Y;B.compileScript=function(a,b,c=!1){null===b&&(b={vars:{},customfunctions:{}});var d=null;a.usesModules&&(d=new O.ArcadeModuleLoader(null,a.loadedModules));d={isAsync:c,globalScope:V(b.vars,c?D:r,b.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:b.customfunctions,libraryResolver:d,localScope:null,
mangleMap:{},depthCounter:{depth:1},exports:{},console:H,lrucache:b.lrucache,timeZone:b.timeZone??null,interceptor:b.interceptor,services:b.services,symbols:{symbolCounter:0}};a=E(d,a);""===a&&(a="lc.voidOperation; ");0<d.undeclaredGlobalsInFunctions.size&&d.undeclaredGlobalsInFunctions.forEach(h=>{throw new e.ArcadeCompilationError(b,e.ExecutionErrorCodes.InvalidIdentifier,h.node);});const f=d.moduleFactory,k=d.moduleFactoryMap,m=d.exports,q={};for(var n in m)q[n]=d.mangleMap[n]??n;n={lc:g.lc,lang:X,
mangles:d.mangleMap,postProcess(h){h instanceof g.ReturnResult&&(h=h.value);h instanceof g.ImplicitResult&&(h=h.value);h===g.voidOperation&&(h=null);if(h===g.breakResult)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.IllegalResult,null);if(h===g.continueResult)throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.IllegalResult,null);if(g.isFunctionParameter(h))throw new e.ArcadeExecutionError(null,e.ExecutionErrorCodes.IllegalResult,null);return h},prepare(h,p){let A=h.spatialReference;
if(null===A||void 0===A)A=S.WebMercator;const pa=W(h.vars,h.customfunctions,p,h.timeZone);return{localStack:[],isAsync:p,moduleFactory:f,moduleFactoryMap:k,mangleMap:this.mangles,moduleSingletons:{},exports:m,gdefs:{},exportmangle:q,spatialReference:A,globalScope:pa,abortSignal:void 0===h.abortSignal||null===h.abortSignal?{aborted:!1}:h.abortSignal,localScope:null,services:h.services,console:h.console??H,lrucache:h.lrucache,timeZone:h.timeZone??null,interceptor:h.interceptor,symbols:{symbolCounter:0},
depthCounter:{depth:1}}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+a+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
a+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(n)};B.enableAsyncSupport=async function(){const a=await new Promise((b,c)=>Z(["./functions/geomasync"],b,c));G([a],"async");return!0};B.executeScript=function(a,b){return a(b)};B.extend=G;B.functionHelper=K;Object.defineProperty(B,Symbol.toStringTag,{value:"Module"})});