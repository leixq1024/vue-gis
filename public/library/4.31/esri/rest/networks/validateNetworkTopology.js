// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../request","../../core/Error","../utils","./support/ValidateNetworkTopologyResult"],function(f,g,k,d,l){function h(b){b.serviceEdits&&(b.serviceEdits=b.serviceEdits.map(a=>{a.editedFeatures.spatialReference&&(a.editedFeatures.spatialReference={wkid:a.editedFeatures.spatialReference.wkid,wkt:a.editedFeatures.spatialReference.wkt,wkt2:a.editedFeatures.spatialReference.wkt2,latestWkid:a.editedFeatures.spatialReference.latestWkid,latestVcsWkid:a.editedFeatures.spatialReference.latestVcsWkid,
vcsWkid:a.editedFeatures.spatialReference.vcsWkid});return a={layerId:a.id,editedFeatures:a.editedFeatures}}));return b}f.handleValidateNetworkTopologyResult=h;f.submitValidateNetworkTopologyJob=async function(b,a,c){if(!a.gdbVersion)throw new k("submit-validate-network-topology-job:missing-gdb-version","version is missing");b=d.parseUrl(b);const e=a.toJSON();a.validationSet&&(e.validationSet=JSON.stringify(a.validationSet));a=d.asValidOptions(b.query,{query:d.encode({...e,returnEdits:!0,async:!0,
f:"json"}),...c,method:"post"});({data:a}=await g(`${b.path}/validateNetworkTopology`,a));return a?a.statusUrl:null};f.validateNetworkTopology=async function(b,a,c){b=d.parseUrl(b);const e=a.toJSON();a.validationSet&&(e.validationSet=JSON.stringify(a.validationSet));a=d.encode({...b.query,...e,returnEdits:!0,f:"json"});c=d.asValidOptions(a,{...c,method:"post"});({data:c}=await g(`${b.path}/validateNetworkTopology`,c));return l.fromJSON(h(c))};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});