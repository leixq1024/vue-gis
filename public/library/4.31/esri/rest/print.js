// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../kernel ../request ../core/jsonMap ../core/screenUtils ../core/urlUtils ../geometry/Polygon ../layers/support/fieldUtils ../layers/support/floorFilterUtils ../renderers/visualVariables/support/visualVariableUtils ./utils ./geoprocessor/execute ./geoprocessor/submitJob ./support/fileFormat ./support/layoutTemplate ./support/printTaskUtils ./support/PrintTemplate ./support/reportTemplate".split(" "),function(w,C,J,K,x,y,R,S,T,U,D,V,W,X,Y,r,Z,aa){async function H(a,b){a=L(a);const c=
E.get(a)??{gpServerUrl:a,legendLayerNameMap:{},legendLayers:[]};c.gpMetadata??(c.gpMetadata=(await J(a,D.asValidOptions({f:"json"},b))).data);c.cimVersion=c.gpMetadata.cimVersion;E.set(a,c);return c}async function M(a,b){a=await H(a,b);return a.gpMetadata?.executionType?ba.fromJSON(a.gpMetadata.executionType):"sync"}async function N(a,b){b=b||{is11xService:!1,legendLayerNameMap:{},legendLayers:[]};var c=a.template||new Z;null==c.showLabels&&(c.showLabels=!0);var d=c.exportOptions,g=Y.toJSON(c.layout);
if(d){var h={dpi:d.dpi};if("map_only"===g?.toLowerCase()||""===g){const {width:l,height:k}=d;h.outputSize=null!=l&&null!=k?[l,k]:void 0}}d=c.layoutOptions;let f;if(d){if("Miles"===d.scalebarUnit||"Kilometers"===d.scalebarUnit){var e="Kilometers";var m="Miles"}else if("Meters"===d.scalebarUnit||"Feet"===d.scalebarUnit)e="Meters",m="Feet";f={titleText:d.titleText,authorText:d.authorText,copyrightText:d.copyrightText,customTextElements:d.customTextElements,elementOverrides:d.elementOverrides,scaleBarOptions:{metricUnit:O.toJSON(e),
metricLabel:e?P[e]:void 0,nonMetricUnit:O.toJSON(m),nonMetricLabel:m?P[m]:void 0}}}e=null;d?.legendLayers&&(e=d.legendLayers.map(l=>{var k=l.layerId;b.legendLayerNameMap[k]=l.title;k={id:k};l.subLayerIds&&(k.subLayerIds=l.subLayerIds);return k}));d=await ca(a,c,b);if(d.operationalLayers){const l=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),k=/[\u0600-\u06FF]/;m=n=>{const q=n.text;n=n.font;const p=n?.family?.toLowerCase();q&&n&&("arial"===p||
"arial unicode ms"===p)&&(n.family=l.test(q)?"Arial Unicode MS":"Arial","normal"!==n.style&&k.test(q)&&(n.family="Arial Unicode MS"))};for(const n of d.operationalLayers)if(n.featureCollection?.layers)for(const q of n.featureCollection.layers){if(q.layerDefinition?.drawingInfo?.renderer?.symbol){const p=q.layerDefinition.drawingInfo.renderer;"esriTS"===p.symbol.type&&m(p.symbol)}if(q.featureSet?.features)for(const p of q.featureSet.features)p.symbol&&"esriTS"===p.symbol.type&&m(p.symbol)}}a.outSpatialReference&&
(d.mapOptions.spatialReference=a.outSpatialReference.toJSON());Object.assign(d,{exportOptions:h,layoutOptions:f||{}});Object.assign(d.layoutOptions,{legendOptions:{operationalLayers:null!=e?e:b.legendLayers.slice()}});b.legendLayers.length=0;E.set(b.gpServerUrl,b);h={Web_Map_as_JSON:JSON.stringify(d),Format:X.formatJsonMap.toJSON(c.format),Layout_Template:g,Layout_Item_ID:void 0,Report_Template:aa.toJSON(c.report),Report_Item_ID:void 0};c.layoutItem&&(delete h.Layout_Template,g=c.layoutItem,await g.load(),
"public"!==g.access&&C.id&&await C.id.getCredential(b.gpServerUrl),h.Layout_Item_ID=JSON.stringify({id:g.id}));c.reportItem&&(delete h.Report_Template,c=c.reportItem,await c.load(),"public"!==c.access&&C.id&&await C.id.getCredential(b.gpServerUrl),h.Report_Item_ID=JSON.stringify({id:c.id}));a.extraParameters&&Object.assign(h,a.extraParameters);return h}async function ca(a,b,c){var d=a.view;let g=d.spatialReference;const h={operationalLayers:await da(d,b,c)};b.includeTables&&(h.tables=await ea(d));
a=a.extent||c.ssExtent||d.extent;g?.isWrappable&&(a=a.clone()._normalize(!0),g=a.spatialReference);h.mapOptions={extent:a&&a.toJSON(),spatialReference:g&&g.toJSON(),showAttribution:b.attributionVisible};c.ssExtent=null;d.background&&(h.background=d.background.toJSON());d.rotation&&(h.mapOptions.rotation=-d.rotation);b.scalePreserved&&(h.mapOptions.scale=b.outScale||d.scale);null!=d.timeExtent&&(c=null!=d.timeExtent.start?d.timeExtent.start.getTime():null,d=null!=d.timeExtent.end?d.timeExtent.end.getTime():
null,h.mapOptions.time=[c,d]);b.reportOptions&&(h.reportOptions=b.reportOptions);return h}function L(a){const b=a.lastIndexOf("/GPServer/");0<b&&(a=a.slice(0,b+9));return a}async function da(a,b,c){const d=[],g={layerView:null,printTemplate:b,view:a};let h=0;b.scalePreserved&&(h=b.outScale||a.scale);var f=r.getVisibleLayerViews(a,h);for(const k of f)if(f=k.layer,f.loaded&&!("layers"in f)){var e=void 0;g.layerView=k;if(r.isScreenshotRequired(k))e=await z(f,g,c);else if(r.isBingMapsLayer(f))e={culture:f.culture,
key:f.key,type:`BingMaps${"aerial"===f.style?"Aerial":"hybrid"===f.style?"Hybrid":"Road"}`};else if("csv"===f?.type)e=await fa(f,g,c);else if("catalog-footprint"===f?.type)e=await ha(f,g,c);else if("feature"===f?.type)e=await ia(f,g,c);else if("geojson"===f?.type)e=await ja(f,g,c);else if("graphics"===f?.type)e=await ka(f,g,c);else if("imagery"===f?.type){var m=void 0,l=void 0;e=f;e.legendEnabled&&c.legendLayers.push({id:e.id});l=t(e);l={layerType:l.layerType,customParameters:l.customParameters};
l.bandIds=e.bandIds;l.compressionQuality=e.compressionQuality;l.format=e.format;l.interpolation=e.interpolation;if(e.mosaicRule||e.definitionExpression)l.mosaicRule=e.exportImageServiceParameters.mosaicRule.toJSON();e.rasterFunction&&(l.renderingRule=e.rasterFunction.toJSON());e.renderer&&(l.layerDefinition??(l.layerDefinition={}),(m=l.layerDefinition).drawingInfo??(m.drawingInfo={}),l.layerDefinition.drawingInfo.renderer=e.renderer.toJSON());v(l,e);e=l}else"imagery-tile"===f?.type?e=await la(f,g,
c):"kml"===f?.type?e=await ma(f,g,c):"map-image"===f?.type?e=na(f,g,c):"map-notes"===f?.type?e=await oa(g,c):"open-street-map"===f?.type?e={type:"OpenStreetMap"}:"stream"===f?.type?e=await pa(f,g,c):"subtype-group"===f?.type?e=await qa(f,c):"tile"===f?.type?(m=void 0,e=f,e.legendEnabled&&c.legendLayers.push({id:e.id}),m=t(e),m={layerType:m.layerType,customParameters:m.customParameters},v(m,e),e=m):"vector-tile"===f?.type?e=await ra(f,g,c):"web-tile"===f?.type?(e={type:"WebTiledLayer",urlTemplate:f.urlTemplate?.replace(/\${/g,
"{"),credits:f.copyright},f.subDomains&&0<f.subDomains.length&&(e.subDomains=f.subDomains)):"wms"===f?.type?e=sa(f,c):"wmts"===f?.type?(e=f.activeLayer,e={type:"wmts",customLayerParameters:f.customLayerParameters,customParameters:f.customParameters,format:e.imageFormat,layer:e.id,style:e.styleId,tileMatrixSet:e.tileMatrixSetId,url:y.normalize(f.url)}):e=await z(f,g,c);e&&(Array.isArray(e)?d.push(...e):(e.id=f.id,e.title=c.legendLayerNameMap[f.id]||f.title,e.opacity=k.fullOpacity,e.minScale=f.minScale||
0,e.maxScale=f.maxScale||0,r.isBlendLayer(f)&&f.blendMode&&"normal"!==f.blendMode&&(e.blendMode=f.blendMode),d.push(e)))}if(h)for(const k of d)k.minScale=0,k.maxScale=0;a.graphics?.length&&(a=await u(null,a.graphics,b,c))&&d.push(a);return d}async function ha(a,{layerView:b,printTemplate:c},d){if(3.1>parseFloat(d.cimVersion))return b=await B(b),u(a,b,c,d);a=a.parent;c=t(a,"web-map");c={id:c.id,url:c.url,layerType:c.layerType,customParameters:c.customParameters,dynamicGroupLayer:{visibility:!1},footprintLayer:c.footprintLayer,
layerDefinition:c.layerDefinition};v(c,a);return c}async function fa(a,b,c){a.legendEnabled&&c.legendLayers.push({id:a.id});var d=b.layerView;b=b.printTemplate;if(!(d.filter||a.portalItem&&"public"!==a.portalItem.access))return c=t(a,"web-map"),c.type="CSV",delete c.popupInfo,delete c.layerType,c.showLabels=b.showLabels&&a.labelsVisible,c;d=await B(d);return u(a,d,b,c)}async function u(a,b,c,d){let g;var h=r.createPolygonLayer();const f=r.createPolylineLayer(),e=r.createPointLayer(),m=r.createMultipointLayer(),
l=r.createPointLayer();l.layerDefinition.name="textLayer";delete l.layerDefinition.drawingInfo;if(a){"esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass?h.layerDefinition.name=f.layerDefinition.name=e.layerDefinition.name=m.layerDefinition.name=d.legendLayerNameMap[a.id]||a.get("arcgisProps.title")||a.title:"esri.layers.GraphicsLayer"===a.declaredClass&&(b=a.graphics.items);if(a.renderer){var k=a.renderer.toJSON(),n=h.layerDefinition.drawingInfo;n&&(n.renderer=
k);if(n=f.layerDefinition.drawingInfo)n.renderer=k;if(n=e.layerDefinition.drawingInfo)n.renderer=k;if(n=m.layerDefinition.drawingInfo)n.renderer=k}if(c.showLabels&&a.labelsVisible&&"function"===typeof a.write&&(k=t(a,"web-map").layerDefinition?.drawingInfo?.labelingInfo)){g=!0;if(n=h.layerDefinition.drawingInfo)n.labelingInfo=k;if(n=f.layerDefinition.drawingInfo)n.labelingInfo=k;if(n=e.layerDefinition.drawingInfo)n.labelingInfo=k;if(n=m.layerDefinition.drawingInfo)n.labelingInfo=k}}a?.renderer||g||
(delete h.layerDefinition.drawingInfo,delete f.layerDefinition.drawingInfo,delete e.layerDefinition.drawingInfo,delete m.layerDefinition.drawingInfo);k=a?.fieldsIndex;n=a?.renderer;if(k){var q=new Set;g&&await S.collectLabelingFields(q,a);n&&"function"===typeof n.collectRequiredFields&&await n.collectRequiredFields(q,k);q=Array.from(q);a=k.fields.map(p=>p.toJSON());h.layerDefinition.fields=a;f.layerDefinition.fields=a;e.layerDefinition.fields=a;m.layerDefinition.fields=a}a=b?.length;for(n=0;n<a;n++){const p=
b[n]||b.at(n);if(!1!==p.visible&&p.geometry){k=p.toJSON();k.hasOwnProperty("popupTemplate")&&delete k.popupTemplate;k.geometry?.z&&delete k.geometry.z;k.symbol&&(k.symbol.angle||delete k.symbol.angle,F(k.symbol)?k.symbol=await G(k.symbol,d):k.symbol.text&&delete k.attributes);if((!c||!c.forceFeatureAttributes)&&q?.length){const A={};for(const I of q)k.attributes?.hasOwnProperty(I)&&(A[I]=k.attributes[I]);k.attributes=A}"polygon"===p.geometry.type?h.featureSet.features.push(k):"polyline"===p.geometry.type?
f.featureSet.features.push(k):"point"===p.geometry.type?k.symbol?.text?l.featureSet.features.push(k):e.featureSet.features.push(k):"multipoint"===p.geometry.type?m.featureSet.features.push(k):"extent"===p.geometry.type&&(k.geometry=R.fromExtent(p.geometry).toJSON(),h.featureSet.features.push(k))}}b=[h,f,m,e,l].filter(p=>0<p.featureSet.features.length);for(const p of b){if((h=p.featureSet.features.every(A=>A.symbol))&&(!c||!c.forceFeatureAttributes))for(const A of p.featureSet.features)delete A.attributes;
h&&delete p.layerDefinition.drawingInfo;p.layerDefinition.drawingInfo?.renderer&&await Q(p.layerDefinition.drawingInfo.renderer,d)}return b.length?{featureCollection:{layers:b},showLabels:g}:null}async function ia(a,b,c){const d=a.renderer;var g=parseFloat(c.cimVersion);if("binning"===a.featureReduction?.type||"cluster"===a.featureReduction?.type&&2.9>g||"pie-chart"===d?.type||"dot-density"===d?.type&&2.6>g)return z(a,b,c);a.legendEnabled&&c.legendLayers.push({id:a.id});g=b.layerView;const {printTemplate:h,
view:f}=b;b="feature-layer"!==a.source?.type&&"ogc-feature"!==a.source?.type;if(g.filter||b||!d||"field"in d&&null!=d.field&&!a.getField(d.field)){var e=await B(g);b=await u(a,e,h,c)}else{b=t(a);b={id:b.id,title:b.title,url:b.url,layerType:b.layerType,customParameters:b.customParameters,layerDefinition:b.layerDefinition,charts:h.includeCharts?b.charts:void 0};b.showLabels=h.showLabels&&a.labelsVisible;v(b,a);delete b.layerDefinition?.featureReduction?.disablePopup;delete b.layerDefinition?.featureReduction?.popupInfo;
b.layerDefinition?.drawingInfo?.renderer&&(delete b.layerDefinition.minScale,delete b.layerDefinition.maxScale,await Q(b.layerDefinition.drawingInfo.renderer,c),"visualVariables"in d&&d.visualVariables?.[0]&&(c=d.visualVariables[0],"size"===c.type&&c.maxSize&&"number"!==typeof c.maxSize&&c.minSize&&"number"!==typeof c.minSize&&(c=U.getSizeRangeAtScale(c,f.scale),b.layerDefinition.drawingInfo.renderer.visualVariables[0].minSize=c.minSize,b.layerDefinition.drawingInfo.renderer.visualVariables[0].maxSize=
c.maxSize)));if(c=T.getFloorFilterClause(g))(e=b).layerDefinition??(e.layerDefinition={}),b.layerDefinition.definitionExpression=b.layerDefinition.definitionExpression?`(${b.layerDefinition.definitionExpression}) AND (${c})`:c;if(a.gdbVersion){let m;(m=b).layerDefinition??(m.layerDefinition={});b.layerDefinition.gdbVersion=a.gdbVersion}g.hasHighlight?.()&&"getHighlightIds"in g&&(b.selectionObjectIds=g.getHighlightIds(),b.selectionSymbol=r.getSelectionSymbol(a.geometryType,g.highlightOptions??f.highlightOptions))}return b}
async function ja(a,b,c){if("binning"===a.featureReduction?.type||"cluster"===a.featureReduction?.type)return z(a,b,c);a.legendEnabled&&c.legendLayers.push({id:a.id});const d=await B(b.layerView);return u(a,d,b.printTemplate,c)}async function ka(a,{printTemplate:b},c){return u(a,null,b,c)}async function la(a,b,c){if("flow"===a.renderer?.type)return z(a,b,c);a.legendEnabled&&c.legendLayers.push({id:a.id});b=t(a);b={bandIds:b.bandIds,customParameters:b.customParameters,interpolation:b.interpolation,
layerDefinition:b.layerDefinition,layerType:"ArcGISImageServiceLayer"};v(b,a);return b}async function ma(a,b,c){const d=b.printTemplate;if(!a.portalItem||"public"===a.portalItem.access)return c=t(a,"web-map"),c.type="kml",delete c.layerType,c.url=y.normalize(a.url),c;const g=[],h=b.layerView;h.allVisibleMapImages.forEach((f,e)=>{e={id:`${a.id}_image${e}`,type:"image",title:a.id,minScale:a.minScale||0,maxScale:a.maxScale||0,opacity:h.fullOpacity,extent:f.extent};f.href.startsWith("data:image/png;base64,")?
e.imageData=f.href.slice(22):e.url=f.href;g.push(e)});b=[...h.allVisiblePoints.items,...h.allVisiblePolylines.items,...h.allVisiblePolygons.items];c={id:a.id,...(await u(null,b,d,c))};g.push(c);return g}function na(a,{view:b},c){let d;const g={id:a.id,subLayerIds:[]};let h=[];const f=b.scale,e=m=>{var l=0===f;const k=0===m.minScale||f<=m.minScale,n=0===m.maxScale||f>=m.maxScale;m.visible&&(l||k&&n)&&(m.sublayers?m.sublayers.forEach(e):(l=m.toExportImageJSON(),h.unshift({id:m.id,name:m.title,layerDefinition:{drawingInfo:l.drawingInfo,
definitionExpression:l.definitionExpression,source:l.source}}),g.subLayerIds.push(m.id)))};a.sublayers&&a.sublayers.forEach(e);h.length&&(h=h.map(({id:m,name:l,layerDefinition:k})=>({id:m,name:l,layerDefinition:k})),d=(m=>({layerType:m.layerType,customParameters:m.customParameters}))(t(a)),d.layers=h,d.visibleLayers=a.capabilities?.exportMap?.supportsDynamicLayers?void 0:g.subLayerIds,a.gdbVersion&&(d.gdbVersion=a.gdbVersion),v(d,a),a.legendEnabled&&c.legendLayers.push(g));return d}async function oa({layerView:a,
printTemplate:b},c){const d=[];a=a.layer;if(null!=a.featureCollections)for(var g of a.featureCollections){var h=await u(g,g.source,b,c);h&&d.push(...h.featureCollection.layers)}else if(null!=a.sublayers)for(h of a.sublayers)(g=await u(null,h.graphics,b,c))&&d.push(...g.featureCollection.layers);return{featureCollection:{layers:d}}}async function z(a,{printTemplate:b,view:c},d){const g={type:"image"};a={format:"png",ignoreBackground:!0,ignorePadding:!0,layers:[a]};0!==c.rotation&&(a.rotation=0);const h=
d.ssExtent||c.state.extent.clone();let f=96,e=!0,m=!0;if(b.exportOptions){const l=b.exportOptions;null!=l.dpi&&0<l.dpi&&(f=l.dpi);null!=l.width&&0<l.width&&(e=l.width%2===c.width%2);null!=l.height&&0<l.height&&(m=l.height%2===c.height%2)}"map-only"!==b.layout||!b.scalePreserved||b.outScale&&b.outScale!==c.scale||96!==f||e&&m||!c.state.extent.equals(c.extent)||(a.area={x:0,y:0,width:c.width,height:c.height},e||--a.area.width,m||--a.area.height,d.ssExtent||(b=c.toMap(x.createScreenPoint(a.area.width,
a.area.height)),h.ymin=b.y,h.xmax=b.x,d.ssExtent=h));g.extent=h.clone()._normalize(!0).toJSON();c=await c.takeScreenshot(a);g.imageData=y.dataComponents(c.dataUrl)?.data;return g}async function pa(a,{layerView:b,printTemplate:c},d){a.legendEnabled&&d.legendLayers.push({id:a.id});b=await B(b);return u(a,b,c,d)}async function qa(a,b){if(a.legendEnabled)for(const c of a.sublayers)c.legendEnabled&&b.legendLayers.push({id:c.id});b=t(a);b={customParameters:b.customParameters,effect:b.effect,layerDefinition:b.layerDefinition,
layerType:b.layerType,layers:b.layers,url:b.url};if(Array.isArray(b.layers))for(const c of b.layers)delete c.popupInfo;v(b,a);return b}async function ea(a){const b=[],c=[];for(const d of a.map.allTables)"feature"!==d.type||d.loaded||c.push(d.load());c.length&&await Promise.allSettled(c);for(const d of a.map.allTables)"feature"===d.type&&d.loaded&&d.isTable&&"feature-layer"===d.source?.type&&(a=t(d),a={id:a.id,title:a.title,customParameters:a.customParameters,layerDefinition:{definitionExpression:a.layerDefinition?.definitionExpression},
url:a.url},v(a,d),b.push(a));return b.length?b:void 0}async function ra(a,b,c){var d=b.layerView;if(a.serviceUrl&&a.styleUrl&&!d.spriteSourceChanged&&!d.styleChanged){d=D.getToken(a.styleUrl,a.apiKey);const g=D.getToken(a.serviceUrl,a.apiKey);if(!d&&!g||"2.1.0"!==c.cimVersion)return b={type:"VectorTileLayer"},b.styleUrl=y.normalize(a.styleUrl),b.token=d,g!==d&&(b.additionalTokens=[{url:a.serviceUrl,token:g}]),b}return z(a,b,c)}function sa(a,b){let c;const d=[],g=h=>{h.visible&&(h.sublayers?h.sublayers.forEach(g):
h.name&&d.unshift(h.name))};a.sublayers&&a.sublayers.forEach(g);d.length&&(a.legendEnabled&&b.legendLayers.push({id:a.id,subLayerIds:d}),c={type:"wms",customLayerParameters:a.customLayerParameters,customParameters:a.customParameters,transparentBackground:a.imageTransparency,visibleLayers:d,url:y.normalize(a.url),version:a.version});return c}function v(a,b){b.url&&(a.url=y.normalize(a.url||b.url),a.token=D.getToken(a.url,b.apiKey))}async function G(a,b){b.canvas||(b.canvas=document.createElement("canvas"));
b.canvas.width=1024;b.canvas.height=1024;b=b.canvas.getContext("2d");if(a.path){var c=new Path2D(a.path);c.closePath();b.fillStyle=Array.isArray(a.color)?`rgba(${a.color[0]},${a.color[1]},${a.color[2]},${a.color[3]/255})`:"rgb(0,0,0)";b.fill(c);var d=r.getContextBoundingBox(b);if(!d)return null;b.clearRect(0,0,1024,1024);var g=x.pt2px(a.size)/Math.max(d.width,d.height);b.scale(g,g);var h=1024/g;b.translate(h/2-d.width/2-d.x,h/2-d.height/2-d.y);Array.isArray(a.color)&&b.fill(c);a.outline?.width&&Array.isArray(a.outline.color)&&
(h=a.outline,b.lineWidth=x.pt2px(h.width)/g,b.lineJoin="round",b.strokeStyle=`rgba(${h.color[0]},${h.color[1]},${h.color[2]},${h.color[3]/255})`,b.stroke(c),d.width+=b.lineWidth,d.height+=b.lineWidth);d.width*=g;d.height*=g;g=b.getImageData(512-d.width/2,512-d.height/2,Math.ceil(d.width),Math.ceil(d.height));c=g.width;d=g.height;b.canvas.width=c;b.canvas.height=d;b.putImageData(g,0,0)}else g=(await J("image/svg+xml"===a.contentType?"data:image/svg+xml;base64,"+a.imageData:a.url,{responseType:"image"})).data,
c=x.pt2px(a.width),d=x.pt2px(a.height),b.canvas.width=c,b.canvas.height=d,b.drawImage(g,0,0,b.canvas.width,b.canvas.height);return{type:"esriPMS",imageData:b.canvas.toDataURL("image/png").slice(22),angle:a.angle,contentType:"image/png",height:x.px2pt(d),width:x.px2pt(c),xoffset:a.xoffset,yoffset:a.yoffset}}async function Q(a,b){const c=a.type;if("simple"===c&&F(a.symbol))a.symbol=await G(a.symbol,b);else if("uniqueValue"===c||"classBreaks"===c)if(F(a.defaultSymbol)&&(a.defaultSymbol=await G(a.defaultSymbol,
b)),a=a["uniqueValue"===c?"uniqueValueInfos":"classBreakInfos"])for(const d of a)F(d.symbol)&&(d.symbol=await G(d.symbol,b))}async function B(a){return a.queryFeatures(a.createQuery()).then(b=>b.features)}function t(a,b){return a.write({},{ignorePersistenceEnabled:!0,origin:b})??{}}function F(a){return a&&(a.path||"image/svg+xml"===a.contentType||a.url?.endsWith(".svg"))}const P={Feet:"ft",Kilometers:"km",Meters:"m",Miles:"mi"},O=new K.JSONMap({esriFeet:"Feet",esriKilometers:"Kilometers",esriMeters:"Meters",
esriMiles:"Miles"}),ba=new K.JSONMap({esriExecutionTypeSynchronous:"sync",esriExecutionTypeAsynchronous:"async"}),E=new Map;w.execute=async function(a,b,c){var d=await H(a,c);d=await N(b,d);if("sync"===await M(a,c))return{results:b}=await V.execute(a,d,void 0,c),b?.[0]?.value;a=await W.submitJob(a,d,void 0,c);await a.waitForJobCompletion({interval:b.updateDelay});({value:b}=await a.fetchResultData("Output_File",null,c));return b};w.getGpPrintParams=N;w.getGpServerUrl=L;w.getMode=M;w.getTasks=async function(a,
b){return(await H(a,b)).gpMetadata.tasks};w.printCacheMap=E;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});