// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../Color ../../core/has ../../core/maybe ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/math/mat2d ./gfxUtils ./svgGlobalState ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),function(w,E,N,F,O,t,Y,G,H,l){function A(a,b){a*=Z/180;return Math.abs(b*Math.sin(a))+Math.abs(b*Math.cos(a))}function P(a){return a.map(b=>`${b.command} ${b.values.join(" ")}`).join(" ").trim()}function I(a,b,c,d,h){if(a){if("circle"===a.type)return l.tsx("circle",
{cx:a.cx,cy:a.cy,fill:b,"fill-rule":"evenodd",r:a.r,stroke:c.color,"stroke-dasharray":c.dashArray,"stroke-dashoffset":c.dashOffset,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-miterlimit":"4","stroke-width":c.width});if("ellipse"===a.type)return l.tsx("ellipse",{cx:a.cx,cy:a.cy,fill:b,"fill-rule":"evenodd",rx:a.rx,ry:a.ry,stroke:c.color,"stroke-dasharray":c.dashArray,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-miterlimit":"4","stroke-width":c.width});if("rect"===a.type)return l.tsx("rect",
{fill:b,"fill-rule":"evenodd",height:a.height,stroke:c.color,"stroke-dasharray":c.dashArray,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-miterlimit":"4","stroke-width":c.width,width:a.width,x:a.x,y:a.y});if("image"===a.type)return l.tsx("image",{alt:h||"image",height:a.height,href:a.src,preserveAspectRatio:"none",width:a.width,x:a.x,y:a.y});if("path"===a.type)return a="string"!==typeof a.path?P(a.path):a.path,l.tsx("path",{d:a,fill:b,"fill-rule":"evenodd",stroke:c.color,"stroke-dasharray":c.dashArray,
"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-miterlimit":"4","stroke-width":c.width});if("text"===a.type)return F.assertIsSome(d),l.tsx("text",{"dominant-baseline":d.dominantBaseline,fill:b,"fill-rule":"evenodd","font-family":d.font.family,"font-size":d.font.size,"font-style":d.font.style,"font-variant":d.font.variant,"font-weight":d.font.weight,kerning:d.kerning,rotate:d.rotate,stroke:c.color,"stroke-dasharray":c.dashArray,"stroke-linecap":c.cap,"stroke-linejoin":c.join,"stroke-miterlimit":"4",
"stroke-width":c.width,"text-anchor":d.align,"text-decoration":d.decoration,"text-rendering":aa,x:a.x,y:a.y},a.text)}return null}function J(a){if(!a)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in a))return{fill:(new E(a)).toString(),pattern:null,linearGradient:null};if("pattern"===a.type){var b=`patternId-${G.nextPatternId()}`;return{fill:`url(#${b})`,pattern:{id:b,x:a.x,y:a.y,width:a.width,height:a.height,image:{x:0,y:0,width:a.width,height:a.height,href:a.src}},linearGradient:null}}b=
`linearGradientId-${G.nextLinearGradientId()}`;return{fill:`url(#${b})`,pattern:null,linearGradient:{id:b,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,stops:a.colors.map(c=>({offset:c.offset,color:c.color&&(new E(c.color)).toString()}))}}}function K(a){const b={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};a&&(null!=a.width&&(b.width=a.width),a.cap&&(b.cap=a.cap),a.join&&(b.join=a.join.toString()),a.color&&(b.color=(new E(a.color)).toString()),a.dashArray&&(b.dashArray=a.dashArray),
a.dashoffset&&(b.dashOffset=a.dashoffset),a.style&&!a.dashArray&&(b.dashArray=Y.getDashArray(a).join(",")||"none"));return b}function L(a,b){const c={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(a){const d=a.alignBaseline;c.align=a.align;c.dominantBaseline="baseline"===d?"auto":"top"===d?"text-top":"bottom"===d?"hanging":d;c.decoration=a.decoration;c.kerning=a.kerning?"auto":"0";c.rotate=a.rotated?"90":"0";F.assertIsSome(b);
c.font.style=b.style||"normal";c.font.variant=b.variant||"normal";c.font.weight=b.weight||"normal";c.font.size=b.size&&b.size.toString()||"10pt";c.font.family=b.family||"serif"}return c}function Q(a){const {pattern:b,linearGradient:c}=a;return b?l.tsx("pattern",{height:b.height,id:b.id,patternUnits:"userSpaceOnUse",width:b.width,x:b.x,y:b.y},l.tsx("image",{height:b.image.height,href:b.image.href,width:b.image.width,x:b.image.x,y:b.image.y})):c?(a=c.stops.map((d,h)=>l.tsx("stop",{key:`${h}-stop`,offset:d.offset,
"stop-color":d.color})),l.tsx("linearGradient",{gradientUnits:"userSpaceOnUse",id:c.id,x1:c.x1,x2:c.x2,y1:c.y1,y2:c.y2},a)):null}function ba(a,b){if(!a||0===a.length)return null;const c=[];for(const d of a){const {shape:h,fill:g,stroke:k,font:p}=d;a=J(g);const f=K(k),q="text"===h.type?L(h,p):null;(a=I(h,a.fill,f,q))&&c.push(a)}return l.tsx("mask",{id:b,maskUnits:"userSpaceOnUse"},l.tsx("g",null,c))}function R(a,b,c,d,h){t.scale(a,t.identity(a),[b,c]);a[4]=a[4]*b-d*b+d;a[5]=a[5]*c-h*c+h;return a}function u(a,
b){if(n&&"left"in n){null!=n.left&&n.left>a&&(n.left=a);if(null==n.right||n.right<a)n.right=a;if(null==n.top||n.top>b)n.top=b;if(null==n.bottom||n.bottom<b)n.bottom=b}else n={left:a,bottom:b,right:a,top:b}}function S(a){const b=a.args,c=b.length;switch(a.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(a=0;a<c;a+=2)u(b[a],b[a+1]);e.x=b[c-2];e.y=b[c-1];break;case "H":for(a=0;a<c;++a)u(b[a],e.y);e.x=b[c-1];break;case "V":for(a=0;a<c;++a)u(e.x,b[a]);e.y=b[c-1];break;case "m":a=0;"x"in
e||(u(e.x=b[0],e.y=b[1]),a=2);for(;a<c;a+=2)u(e.x+=b[a],e.y+=b[a+1]);break;case "l":case "t":for(a=0;a<c;a+=2)u(e.x+=b[a],e.y+=b[a+1]);break;case "h":for(a=0;a<c;++a)u(e.x+=b[a],e.y);break;case "v":for(a=0;a<c;++a)u(e.x,e.y+=b[a]);break;case "c":for(a=0;a<c;a+=6)u(e.x+b[a],e.y+b[a+1]),u(e.x+b[a+2],e.y+b[a+3]),u(e.x+=b[a+4],e.y+=b[a+5]);break;case "s":case "q":for(a=0;a<c;a+=4)u(e.x+b[a],e.y+b[a+1]),u(e.x+=b[a+2],e.y+=b[a+3]);break;case "A":for(a=0;a<c;a+=7)u(b[a+5],b[a+6]);e.x=b[c-2];e.y=b[c-1];break;
case "a":for(a=0;a<c;a+=7)u(e.x+=b[a+5],e.y+=b[a+6])}}function T(a,b,c){const d=ca[a.toLowerCase()];"number"===typeof d&&(d?b.length>=d&&(a={action:a,args:b.slice(0,b.length-b.length%d)},c.push(a),S(a)):(a={action:a,args:[]},c.push(a),S(a)))}function U(a){const b={x:0,y:0,width:0,height:0};if("circle"===a.type)b.x=a.cx-a.r,b.y=a.cy-a.r,b.width=2*a.r,b.height=2*a.r;else if("ellipse"===a.type)b.x=a.cx-a.rx,b.y=a.cy-a.ry,b.width=2*a.rx,b.height=2*a.ry;else if("image"===a.type||"rect"===a.type)b.x=a.x,
b.y=a.y,b.width=a.width,b.height=a.height;else if("path"===a.type){{const h=("string"!==typeof a.path?P(a.path):a.path).match(da),g=[];n={};e={};if(h){a="";var c=[],d=h.length;for(let k=0;k<d;++k){const p=h[k],f=parseFloat(p);isNaN(f)?(a&&T(a,c,g),c=[],a=p):c.push(f)}T(a,c,g);a={x:0,y:0,width:0,height:0};n&&"left"in n&&(a.x=n.left,a.y=n.top,a.width=n.right-n.left,a.height=n.bottom-n.top)}else a=null}b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height}return b}function V(a){const b={x:0,y:0,width:0,
height:0};let c=null,d=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(const g of a)c?(c.x=Math.min(c.x,g.x),c.y=Math.min(c.y,g.y),d=Math.max(d,g.x+g.width),h=Math.max(h,g.y+g.height)):(c=b,c.x=g.x,c.y=g.y,d=g.x+g.width,h=g.y+g.height);c&&(c.width=d-c.x,c.height=h-c.y);return c}function W(a,b,c,d,h,g,k,p,f){var q=(k&&g?A(g,b):b)/2,x=(k&&g?A(g,c):c)/2;if(f){var m=f[0];f=f[1];q=(k&&g?A(g,m):m)/2;x=(k&&g?A(g,f):f)/2}m=a.width+d;const v=a.height+d;k=O.create();f=O.create();var r=!1;if(h&&0!==
m&&0!==v){h=b!==c?b/c:m/v;r=b>c?b:c;let B=1,z=1;isNaN(r)||(1<h?(B=r/m,z=r/h/v):(z=r/v,B=r*h/m));t.multiply(f,f,R(k,B,z,q,x));r=!0}h=a.x+(m-d)/2;a=a.y+(v-d)/2;d=t.multiply;q-=h;x-=a;q=t.translate(k,t.identity(k),[q,x]);d.call(t,f,f,q);!r&&(m>b||v>c)&&(q=m/b>v/c,b=(q?b:c)/(q?m:v),t.multiply(f,f,R(k,b,b,h,a)));p&&(b=t.multiply,c=p[0],p=p[1],p=t.translate(k,t.identity(k),[c,p]),b.call(t,f,f,p));g&&(p=t.multiply,b=g%360*Math.PI/180,t.rotate(k,t.identity(k),b),g=Math.cos(b),b=Math.sin(b),c=k[4],m=k[5],
k[4]=c*g-m*b+a*b-h*g+h,k[5]=m*g+c*b-h*b-a*g+a,p.call(t,f,f,k));return`matrix(${f[0]},${f[1]},${f[2]},${f[3]},${f[4]},${f[5]})`}function ea(a,b,c){a=a?.effects.find(p=>"bloom"===p.type);if(!a)return null;const {strength:d,radius:h}=a;a=0<d?h:0;const g=(d+a)*b,k=4*d+1;return l.tsx("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${c}`,width:"300%",x:"-100%",y:"-100%"},l.tsx("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(d+.5*a)*5**(b/100)*(.4+b/100),result:"dilate"}),l.tsx("feGaussianBlur",
{in:"dilate",result:"blur",stdDeviation:g/25}),l.tsx("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:g/50}),l.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},l.tsx("feFuncR",{slope:k,type:"linear"}),l.tsx("feFuncG",{slope:k,type:"linear"}),l.tsx("feFuncB",{slope:k,type:"linear"})),l.tsx("feMerge",null,l.tsx("feMergeNode",{in:"intensityBlur"}),l.tsx("feMergeNode",{in:"intensityBrightness"}),l.tsx("feGaussianBlur",{stdDeviation:d/10})))}H=N("android");const aa=
N("chrome")||H&&4<=H?"auto":"optimizeLegibility",ca={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},da=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let n={},e={};const Z=Math.PI;w.computeBBox=V;w.generateFillAttributes=J;w.generateStrokeAttributes=K;w.generateTextAttributes=L;w.getBoundingBox=U;w.getTransformMatrix=W;w.renderDef=Q;w.renderSVG=function(a,b,c,d={}){const h=[],g=[],k=G.nextBloomId(),p=ea(d.effectView,b,k);var f=null;p&&(f=d.effectView?.effects.find(C=>"bloom"===C.type),f=(f.strength?
f.strength+f.radius/2:0)/3,f=[Math.max(b+b*f,10),Math.max(c+c*f,10)]);let q=b,x=c;if(d.useRotationSize)for(var m=0;m<a.length;m++){var v=d.rotations?.[m]??0;q=Math.max(A(v,b),q);x=Math.max(A(v,c),x)}for(m=0;m<a.length;m++){var r=a[m];v=[];var B=[],z=0,y=0;let C=0;for(const fa of r){const {shape:D,fill:ha,stroke:X,font:ia,offset:M}=fa;d.ignoreStrokeWidth||"text"===D.type||(z+=X?.width||0);r=J(ha);const ja=K(X),ka="text"===D.type?L(D,ia):null;h.push(Q(r));v.push(I(D,r.fill,ja,ka,d.ariaLabel));B.push(U(D));
M&&(y+=M[0],C+=M[1])}r=d.rotations?.[m]??0;d.useRotationSize&&(y+=(q-A(r,b))/2,C+=(x-A(r,c))/2);B=V(B);z=W(B,b,c,z,d.scale??!1,r,d.useRotationSize??!1,[y,C],f);y=null;d.masking&&(y=`mask-${m}`,h.push(ba(d.masking[m],y)),y=`url(#${y})`);g.push(y?l.tsx("g",{mask:y},l.tsx("g",{transform:z},v)):l.tsx("g",{transform:z},v))}p&&(F.assertIsSome(f),q=f[0],x=f[1]);return l.tsx("svg",{"aria-label":d.ariaLabel,focusable:!1,height:x,role:"img",style:"display: block;",width:q,xmlns:"http://www.w3.org/2000/svg"},
p,l.tsx("defs",null,h),p?l.tsx("g",{filter:`url(#bloom${k})`},g):g)};w.renderShape=I;Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});