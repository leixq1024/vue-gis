// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../core/floatRGBA","../../core/mathUtils","./constants"],function(r,v,w,q){r.rasterizeDash=function(d,b){null==d&&(d=[]);var f="Butt"===b,c="Square"===b;b=!f&&!c;1===d.length%2&&(d=[...d,...d]);const a=q.dashRadius,e=2*a;var h=0;for(var k of d)h+=k;k=Math.round(h*a);h=new Float32Array(k*e);const p=.5*a;let m=0,n=0,g=.5,u=!0;for(var t of d){m=n;for(n+=t*a;g<=n;){for(d=.5;d<e;){const l=b?(d-a)*(d-a):Math.abs(d-a);h[(d-.5)*k+g-.5]=u?f?Math.max(Math.max(m+p-g,l),Math.max(g-n+p,l)):
l:b?Math.min((g-m)*(g-m)+l,(g-n)*(g-n)+l):c?Math.min(Math.max(g-m,l),Math.max(n-g,l)):Math.min(Math.max(g-m+p,l),Math.max(n+p-g,l));d++}g++}u=!u}f=h.length;t=new Uint8Array(4*f);for(c=0;c<f;++c)v.packFloatRGBA((b?Math.sqrt(h[c]):h[c])/a,t,4*c);return[t,k,e]};r.rasterizeDash1D=function(d){1===d.length%2&&(d=[...d,...d]);var b=d.reduce((p,m)=>p+m,0);b=Math.round(b*q.dashSdfRasterizationScale);const f=new Float32Array(1*b);var c=0;let a=0,e=.5,h=!0;for(var k of d){c=a;for(a+=k*q.dashSdfRasterizationScale;e<=
a;)d=Math.min(Math.abs(e-c),Math.abs(e-a)),f[e-.5]=h?-d:d,e++;h=!h}k=f.length;d=new Uint8Array(4*k);for(c=0;c<k;++c)v.packFloatRGBA(f[c]/q.dashSdfRasterizationScale/q.dashSdfDistanceNormalization*.5+.5,d,4*c);return[d,b,1]};r.rasterizeFillStyle=function(d,b,f){b=b.style;f=w.nextPowerOfTwo(Math.ceil(f));var c="vertical"===b||"horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b||"esriSFSHorizontal"===b?8*f:16*f,a=2*f;d.width=c;d.height=c;const e=d.getContext("2d");e.strokeStyle=
"#ffffff";e.lineWidth=f;e.beginPath();if("vertical"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b)e.moveTo(c/2,-a),e.lineTo(c/2,c+a);if("horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSHorizontal"===b)e.moveTo(-a,c/2),e.lineTo(c+a,c/2);if("backward-diagonal"===b||"diagonal-cross"===b||"esriSFSDiagonalCross"===b||"esriSFSBackwardDiagonal"===b)e.moveTo(-a,-a),e.lineTo(c+a,c+a),e.moveTo(c-a,-a),e.lineTo(c+a,a),e.moveTo(-a,c-a),e.lineTo(a,c+a);if("forward-diagonal"===b||"diagonal-cross"===
b||"esriSFSForwardDiagonal"===b||"esriSFSDiagonalCross"===b)e.moveTo(c+a,-a),e.lineTo(-a,c+a),e.moveTo(a,-a),e.lineTo(-a,a),e.moveTo(c+a,c-a),e.lineTo(c-a,c+a);e.stroke();b=e.getImageData(0,0,d.width,d.height);b=new Uint8Array(b.data);for(a=0;a<b.length;a+=4)c=b[a+3]/255,b[a]*=c,b[a+1]*=c,b[a+2]*=c;return[b,d.width,d.height,f]};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});