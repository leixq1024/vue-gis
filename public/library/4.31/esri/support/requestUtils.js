// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../config","../core/has","../core/promiseUtils","../core/urlUtils"],function(e,f,q,t,c){function r(){try{return new DOMException("Aborted","AbortError")}catch{const a=Error();a.name="AbortError";return a}}e.createTimeoutError=function(){return Error("Timeout exceeded")};e.isNoCorsRequestRequired=function(a){const b=f.request.crossOriginNoCorsDomains;return b&&(a=c.getOrigin(a))?(a=a.toLowerCase(),!c.hasSameOrigin(a,c.getAppUrl())&&b[a]<Date.now()-36E5):!1};e.isTimeoutError=function(a){return"object"===
typeof a&&!!a&&"message"in a&&"Timeout exceeded"===a.message};e.loadImageAsync=function(a,b,d=!1,g){return new Promise((u,l)=>{if(t.isAborted(g))l(r());else{var h=()=>{m();l(Error(`Unable to load ${b}`))},k=()=>{const n=a;m();u(n)},p=()=>{if(a){var n=a;m();n.src="";l(r())}},m=()=>{q("esri-image-decode")||(a.removeEventListener("error",h),a.removeEventListener("load",k));a=k=h=null;null!=g&&g.removeEventListener("abort",p);p=null;d&&URL.revokeObjectURL(b)};null!=g&&g.addEventListener("abort",p);q("esri-image-decode")?
a.decode().then(k,h):(a.addEventListener("error",h),a.addEventListener("load",k))}})};e.registerNoCorsDomains=function(a){f.request.crossOriginNoCorsDomains||(f.request.crossOriginNoCorsDomains={});const b=f.request.crossOriginNoCorsDomains;for(let d of a)d=d.toLowerCase(),/^https?:\/\//.test(d)?b[c.getOrigin(d)??""]=0:(b[c.getOrigin("http://"+d)??""]=0,b[c.getOrigin("https://"+d)??""]=0)};e.sendNoCorsRequest=async function(a){var b=c.urlToObject(a);a=b.path;"json"===b.query?.f&&(a+="?f\x3djson");
try{await fetch(a,{mode:"no-cors",credentials:"include"})}catch{}b=f.request.crossOriginNoCorsDomains;a=c.getOrigin(a);b&&a&&(b[a.toLowerCase()]=Date.now())};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});