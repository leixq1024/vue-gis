// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../arcade/functions/geomsync ../core/has ../core/maybe".split(" "),function(F,K,z,m,l,x,r,y,w,b,p){function A(Y,h){if(!0===h.useAsync||!0===Y.isAsync)return J(Y,h);if(b("esri-csp-restrictions"))return function(t){return l.executeScript(Y,t)};try{return z.compileScript(Y,h)}catch(t){if("esri.arcade.arcadeuncompilableerror"===
t.declaredRootClass)return function(N){return l.executeScript(Y,N)};throw t;}}function J(Y,h){if(null===V)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.AsyncNotEnabled,null);if(b("esri-csp-restrictions"))return function(t){return V.executeScript(Y,t)};try{return z.compileScript(Y,h,!0)}catch(t){if("esri.arcade.arcadeuncompilableerror"===t.declaredRootClass)return function(N){return V.executeScript(Y,N)};throw t;}}function G(Y){l.extend(Y);z.extend(Y,"sync");null===V?B.push(Y):(z.extend(Y,
"async"),V.extend(Y))}function d(Y,h=[]){return r.parseScript(Y,h)}function k(Y,h,t=[]){Y=r.parseScript(Y,t);return e(Y,h)}function e(Y,h){if(!0===h.useAsync||!0===Y.isAsync){if(null===V)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.AsyncNotEnabled,null);return V.executeScript(Y,h)}return l.executeScript(Y,h)}function f(Y,h){return y.referencesMember(Y,h)}function g(Y,h){return y.referencesFunction(Y,h)}function q(Y,h=!1){void 0===h&&(h=!1);return y.findFieldLiterals(Y)}function n(Y){return y.findExpectedFieldLiterals(Y)}
function C(Y,h=[]){void 0===Y.usesGeometry&&y.findScriptDependencies(Y,h);return!0===Y.usesGeometry}function a(){return D?D:D=E()}async function E(){const Y=await new Promise((h,t)=>F(["../geometry/geometryEngine"],h,t));L=!0;w.setGeometryEngine(Y);return!0}function c(){return null!==O?O:O=S()}async function S(){await z.enableAsyncSupport();V=await new Promise((Y,h)=>F(["../arcade/arcadeAsyncRuntime"],Y,h));for(const Y of B)V.extend(Y),z.extend(Y,"async");B=null;return!0}function M(){return wa}function ia(){return V?
!0:!1}function v(){return L}function H(){return R?R:R=P()}async function P(){await c();const [Y,h,t,N,Q,W]=await Promise.all([new Promise((ha,ba)=>F(["../arcade/featureSetUtils"],ha,ba)),new Promise((ha,ba)=>F(["../arcade/functions/featuresetbase"],ha,ba)),new Promise((ha,ba)=>F(["../arcade/functions/featuresetgeom"],ha,ba)),new Promise((ha,ba)=>F(["../arcade/functions/featuresetstats"],ha,ba)),new Promise((ha,ba)=>F(["../arcade/functions/featuresetstring"],ha,ba)),new Promise((ha,ba)=>F(["../arcade/functions/knowledgegraph"],
ha,ba))]);ca=Y;V.extend([h,t,N,Q,W]);z.extend([h,t,N,Q,W],"async");return wa=!0}function U(Y,h=[]){void 0===Y.usesFeatureSet&&y.findScriptDependencies(Y,h);return!0===Y.usesFeatureSet}function Z(Y,h=[]){void 0===Y.isAsync&&y.findScriptDependencies(Y,h);return!0===Y.isAsync}async function X(Y,h,t=[],N=!1,Q=null){return da(new Set,Y,h,t,N,Q)}async function da(Y,h,t,N=[],Q=!1,W=null){h="string"===typeof h?d(h):h;const ha=[];if(h&&(!1===L&&(C(h)||Q)&&ha.push(a()),!1===ia()&&(!0===h.isAsync||t)&&ha.push(c()),
!1===wa)){var ba;if(!(ba=U(h)))a:{if(N)for(const ma of N)if(f(h,ma)){ba=!0;break a}ba=!1}ba&&ha.push(H())}ha.length&&await Promise.all(ha);await ua(Y,h,W,t,Q);return!0}function qa(Y,h=[]){void 0===Y.usesModules&&y.findScriptDependencies(Y,h);return!0===Y.usesModules}async function ua(Y,h,t=null,N=!1,Q=!1){var W=y.findModuleImports(h);null===t&&0<W.length&&(t=m.ArcadeModuleResolver.getDefault());h.loadedModules={};for(const ha of W){p.assertIsSome(t);W=t.normalizeModuleUri(ha.source);if(Y.has(W.uri))throw new x.ArcadeExecutionError(null,
x.ExecutionErrorCodes.CircularModules,null);Y.add(W.uri);const ba=await t.fetchModule(W);await da(Y,ba,N,[],Q,t);Y.delete(W.uri);ba.isAsync&&(h.isAsync=!0);ba.usesFeatureSet&&(h.usesFeatureSet=!0);ba.usesGeometry&&(h.usesGeometry=!0);h.loadedModules[ha.libname]={uri:W.uri,script:ba}}}function va(Y){if(C(Y))return!0;Y=y.findFunctionCalls(Y);let h=!1;for(let t=0;t<Y.length;t++)if(xa.has(Y[t])){h=!0;break}return h}function ra(){return ca}const xa=new Set("feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "));
let wa=!1,L=!1,V=null,B=[],D=null,O=null,R=null,ca=null;const ea=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:da,compileScript:A,enableAsyncSupport:c,enableAsyncSupportImpl:S,enableFeatureSetSupport:H,enableFeatureSetSupportImpl:P,enableGeometrySupport:a,enableGeometrySupportImpl:E,executeScript:e,extend:G,extractExpectedFieldLiterals:n,extractFieldLiterals:q,featureSetUtils:ra,isAsyncEnabled:ia,isFeatureSetSupportEnabled:M,isGeometryEnabled:v,loadDependentModules:ua,
loadScriptDependencies:X,parseAndExecuteScript:k,parseScript:d,referencesFunction:g,referencesMember:f,scriptIsAsync:Z,scriptTouchesGeometry:va,scriptUsesFeatureSet:U,scriptUsesGeometryEngine:C,scriptUsesModules:qa},Symbol.toStringTag,{value:"Module"}));K._loadScriptDependenciesImpl=da;K.arcade=ea;K.compileScript=A;K.enableAsyncSupport=c;K.enableAsyncSupportImpl=S;K.enableFeatureSetSupport=H;K.enableFeatureSetSupportImpl=P;K.enableGeometrySupport=a;K.enableGeometrySupportImpl=E;K.executeScript=e;
K.extend=G;K.extractExpectedFieldLiterals=n;K.extractFieldLiterals=q;K.featureSetUtils=ra;K.isAsyncEnabled=ia;K.isFeatureSetSupportEnabled=M;K.isGeometryEnabled=v;K.loadDependentModules=ua;K.loadScriptDependencies=X;K.parseAndExecuteScript=k;K.parseScript=d;K.referencesFunction=g;K.referencesMember=f;K.scriptIsAsync=Z;K.scriptTouchesGeometry=va;K.scriptUsesFeatureSet=U;K.scriptUsesGeometryEngine=C;K.scriptUsesModules=qa})},"esri/arcade/arcadeCompiler":function(){define("require exports ./arcadeEnvironment ./ArcadeModule ./ArcadeModuleLoader ./containerUtils ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d,k,e,f,g,q,n,C){function a(h,t,N){try{return N(h,null,t.arguments)}catch(Q){throw Q;}}function E(h,t){switch(t.type){case "AssignmentExpression":return M(h,t);case "UpdateExpression":return S(h,t);case "TemplateLiteral":try{var N=[],Q=0;for(var W of t.quasis)N.push(W.value?JSON.stringify(W.value.cooked):JSON.stringify("")),!1===W.tail&&(N.push(t.expressions[Q]?"lang.castString(lang.aCheck("+E(h,t.expressions[Q])+", 'TemplateLiteral'))":""),Q++);var ha="(["+N.join(",")+
"]).join('')"}catch(fa){throw fa;}return ha;case "Identifier":return Z(h,t);case "MemberExpression":try{let fa;!0===t.computed?fa=E(h,t.property):(P(t.property.name),fa="'"+t.property.name+"'");Q="lang.member("+E(h,t.object)+","+fa+")"}catch(fa){throw fa;}return Q;case "Literal":return null===t.value||void 0===t.value?"null":JSON.stringify(t.value);case "CallExpression":return X(h,t);case "UnaryExpression":try{var ba="lang.unary("+E(h,t.argument)+",'"+t.operator+"')"}catch(fa){throw fa;}return ba;
case "BinaryExpression":try{var ma="lang.binary("+E(h,t.left)+","+E(h,t.right)+",'"+t.operator+"')"}catch(fa){throw fa;}return ma;case "LogicalExpression":try{if("AssignmentExpression"===t.left.type||"UpdateExpression"===t.left.type)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,t);if("AssignmentExpression"===t.right.type||"UpdateExpression"===t.right.type)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,t);if("\x26\x26"===
t.operator||"||"===t.operator)var na="(lang.logicalCheck("+E(h,t.left)+") "+t.operator+" lang.logicalCheck("+E(h,t.right)+"))";else throw new y.ArcadeCompilationError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(fa){throw fa;}return na;case "ArrayExpression":try{ha=[];for(W=0;W<t.elements.length;W++)"Literal"===t.elements[W].type?ha.push(E(h,t.elements[W])):ha.push("lang.aCheck("+E(h,t.elements[W])+",'ArrayExpression')");N="["+ha.join(",")+"]"}catch(fa){throw fa;}return N;case "ObjectExpression":ha=
"lang.dictionary([";for(N=0;N<t.properties.length;N++)Q=t.properties[N],"Identifier"===Q.key.type?(P(Q.key.name),W="'"+Q.key.name+"'"):W=E(h,Q.key),Q=E(h,Q.value),0<N&&(ha+=","),ha+="lang.strCheck("+W+",'ObjectExpression'),lang.aCheck("+Q+", 'ObjectExpression')";return ha+"])";default:throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.Unrecognized,t);}}function c(h,t){switch(t.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclaration":var N=[];for(var Q=0;Q<t.declarations.length;Q++)N.push(U(h,
t.declarations[Q]));return N.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return H(h,t);case "FunctionDeclaration":var W=z.toSymbolId(t.id);P(W);Q=!1;void 0!==h.globalScope[W]?N=W:void 0!==h.globalScope._SymbolsMap[W]?N=h.globalScope._SymbolsMap[W]:h.undeclaredGlobalsInFunctions.has(W)?(N=h.undeclaredGlobalsInFunctions.get(W).manglename,h.globalScope._SymbolsMap[W]=N,h.mangleMap[W]=N,h.undeclaredGlobalsInFunctions.delete(W),Q=!0):(N=da(h),h.globalScope._SymbolsMap[W]=
N,h.mangleMap[W]=N);W={isAsync:h.isAsync,console:h.console,exports:h.exports,undeclaredGlobalsInFunctions:h.undeclaredGlobalsInFunctions,customfunctions:h.customfunctions,moduleFactory:h.moduleFactory,moduleFactoryMap:h.moduleFactoryMap,libraryResolver:h.libraryResolver,lrucache:h.lrucache,interceptor:h.interceptor,services:h.services,symbols:h.symbols,mangleMap:h.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:h.depthCounter,globalScope:h.globalScope};var ha="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var ba=0;ba<t.params.length;ba++){var ma=z.toSymbolId(t.params[ba]);P(ma);var na=da(h);W.localScope._SymbolsMap[ma]=na;W.mangleMap[ma]=na;ha+="lscope['"+na+"']\x3darguments["+ba.toString()+"];\n"}!0===h.isAsync?(ha=ha+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(H(W,t.body)+"\n return lastStatement; "),ha=ha+"});  }, runtimeCtx),"+(t.params.length+")")):ha+=H(W,t.body)+"\n return lastStatement; }, runtimeCtx),"+t.params.length+")";ha+="\n lastStatement \x3d lc.voidOperation; \n";
h=Q?"gscope[lang.setAssig('"+N+"', runtimeCtx)]\x3d"+ha:"gscope['"+N+"']\x3d"+ha;return h;case "ImportDeclaration":return t=z.toSymbolId(t.specifiers[0].local),P(t),Q=h.libraryResolver?.loadLibrary(t),N=da(h),void 0===h.moduleFactory[Q.uri]&&(h.moduleFactory[Q.uri]=L(Q.syntax,{interceptor:h.interceptor,services:h.services,moduleFactory:h.moduleFactory,lrucache:h.lrucache,timeZone:h.timeZone??null,libraryResolver:h.libraryResolver,customfunctions:h.customfunctions,vars:{}},h.isAsync)),h.moduleFactoryMap[N]=
Q.uri,Q="",Q=h.isAsync?"(yield lang.loadModule('"+N+"', runtimeCtx) ); ":"lang.loadModule('"+N+"', runtimeCtx); ",void 0!==h.globalScope[t]?h="gscope['"+t+"']\x3d"+Q:void 0!==h.globalScope._SymbolsMap[t]?h="gscope['"+h.globalScope._SymbolsMap[t]+"']\x3d"+Q:(h.undeclaredGlobalsInFunctions.has(t)?(N=h.undeclaredGlobalsInFunctions.get(t).manglename,h.undeclaredGlobalsInFunctions.delete(t)):N=da(h),h.globalScope._SymbolsMap[t]=N,h.mangleMap[t]=N,h="gscope[lang.setAssig('"+N+"', runtimeCtx)]\x3d"+Q),h;
case "ExportNamedDeclaration":N=c(h,t.declaration);if("FunctionDeclaration"===t.declaration.type)h.exports[z.toSymbolId(t.declaration.id)]="function";else if("VariableDeclaration"===t.declaration.type)for(Q of t.declaration.declarations)h.exports[z.toSymbolId(Q.id)]="variable";return N;case "ReturnStatement":return h=null===t.argument?"return lc.voidOperation":"return "+E(h,t.argument),h;case "IfStatement":return v(h,t);case "ExpressionStatement":return h="AssignmentExpression"===t.expression.type?
"lastStatement \x3d lc.voidOperation; "+E(h,t.expression)+"; \n ":"lastStatement \x3d "+E(h,t.expression)+"; ",h;case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":return N="lastStatement \x3d lc.voidOperation; \n",null!==t.init&&(N="VariableDeclaration"===t.init.type?N+c(h,t.init):N+(E(h,t.init)+"; ")),Q=qa(h),W=qa(h),N+="var "+Q+" \x3d true; \n do { ",null!==t.update&&(N+=" if ("+Q+"\x3d\x3d\x3dfalse) {\n "+E(h,t.update)+"  \n}\n "+Q+"\x3dfalse; \n"),
null!==t.test&&(N+="var "+W+" \x3d "+E(h,t.test)+"; ",N+="if ("+W+"\x3d\x3d\x3dfalse) { break; } else if ("+W+"!\x3d\x3dtrue) { lang.error('"+y.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n"),N+=c(h,t.body),null!==t.update&&(N+="\n "+E(h,t.update)),N+("\n"+Q+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":return N=qa(h),Q=qa(h),W=qa(h),ha="var "+N+" \x3d "+E(h,t.right)+";\n","VariableDeclaration"===t.left.type&&(ha+=c(h,t.left)),ba=z.toSymbolId("VariableDeclaration"===
t.left.type?t.left.declarations[0].id:t.left),P(ba),ma="",null!==h.localScope&&(void 0!==h.localScope[ba]?ma="lscope['"+ba+"']":void 0!==h.localScope._SymbolsMap[ba]&&(ma="lscope['"+h.localScope._SymbolsMap[ba]+"']")),na="",""===ma&&(void 0!==h.globalScope[ba]?ma="gscope['"+ba+"']":void 0!==h.globalScope._SymbolsMap[ba]?ma="gscope['"+h.globalScope._SymbolsMap[ba]+"']":null!==h.localScope&&(h.undeclaredGlobalsInFunctions.has(ba)?(ma="gscope['"+h.undeclaredGlobalsInFunctions.get(ba).manglename+"']",
na=h.undeclaredGlobalsInFunctions.get(ba).manglename):(na={manglename:da(h),node:t.left},h.undeclaredGlobalsInFunctions.set(ba,na),ma="gscope['"+na.manglename+"']",na=na.manglename))),na&&(ha+="lang.chkAssig('"+na+"',runtimeCtx); \n"),ha=ha+("if ("+N+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(N+") || lc.isString("+N+")) {var ")+(Q+"\x3d"+N+".length; \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Q+"; "+W+"++) {\n")+(ma+"\x3d"+W+";\n")+c(h,t.body),ha=ha+"\n}\n lastStatement \x3d lc.voidOperation; \n \n}\nelse if (lc.isImmutableArray("+
(N+")) {var ")+(Q+"\x3d"+N+".length(); \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Q+"; "+W+"++) {\n")+(ma+"\x3d"+W+";\n")+c(h,t.body),ha=ha+"\n}\n lastStatement \x3d lc.voidOperation; \n \n}\nelse if (( "+(N+" instanceof lang.Dictionary) || ( "+N+" instanceof lang.Feature)) {var ")+(Q+"\x3d"+N+".keys(); \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Q+".length; "+W+"++) {\n")+(ma+"\x3d"+Q+"["+W+"];\n")+c(h,t.body),ha+="\n}\n lastStatement \x3d lc.voidOperation; \n \n}\n",h.isAsync&&(ha=ha+("else if (lc.isFeatureSet("+
N+")) {var ")+(Q+"\x3d"+N+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(W+"\x3dlang. graphicToFeature( yield "+Q+".next(),"+N+", runtimeCtx); "+W+"!\x3dnull; "+W+"\x3dlang. graphicToFeature( yield "+Q+".next(),"+N+", runtimeCtx)) {\n")+(ma+"\x3d"+W+";\n")+c(h,t.body),ha+="\n}\n lastStatement \x3d lc.voidOperation; \n \n}\n"),ha+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":return N="lastStatement \x3d lc.voidOperation; \n",Q=qa(h),N+=`\n  var ${Q} = true;\n    do {\n      ${Q} = ${E(h,
t.test)};\n      if (${Q}==false) {\n        break;\n      }\n      if (${Q}!==true) {\n        lang.error('${y.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${c(h,t.body)}\n    }\n    while (${Q} !== false);\n    lastStatement = lc.voidOperation;\n  `;default:throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.Unrecognized,t);}}function S(h,t){if("CallExpression"===t.argument.type)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.NeverReach,t);if("MemberExpression"===
t.argument.type){var N=E(h,t.argument.object);!0===t.argument.computed?h=E(h,t.argument.property):(P(t.argument.property.name),h="'"+t.argument.property.name+"'");return"lang.memberupdate("+N+","+h+",'"+t.operator+"',"+t.prefix+")"}N=z.toSymbolId(t.argument);P(N);if(null!==h.localScope){if(void 0!==h.localScope[N])return"lang.update(lscope, '"+N+"','"+t.operator+"',"+t.prefix+")";if(void 0!==h.localScope._SymbolsMap[N])return"lang.update(lscope, '"+h.localScope._SymbolsMap[N]+"','"+t.operator+"',"+
t.prefix+")"}if(void 0!==h.globalScope[N])return"lang.update(gscope, '"+N+"','"+t.operator+"',"+t.prefix+")";if(void 0!==h.globalScope._SymbolsMap[N])return"lang.update(gscope, '"+h.globalScope._SymbolsMap[N]+"','"+t.operator+"',"+t.prefix+")";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(N))return"lang.update(gscope,lang.chkAssig( '"+h.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx),'"+t.operator+"',"+t.prefix+")";const Q={manglename:da(h),node:t.argument};h.undeclaredGlobalsInFunctions.set(N,
Q);return"lang.update(gscope, lang.chkAssig('"+Q.manglename+"',runtimeCtx),'"+t.operator+"',"+t.prefix+")"}throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.InvalidIdentifier,t);}function M(h,t){const N=E(h,t.right);if("MemberExpression"===t.left.type){var Q=E(h,t.left.object);!0===t.left.computed?h=E(h,t.left.property):(h="'"+t.left.property.name+"'",P(t.left.property.name));return"lang.assignmember("+Q+","+h+",'"+t.operator+"',"+N+")"}Q=z.toSymbolId(t.left);P(Q);if(null!==h.localScope){if(void 0!==
h.localScope[Q])return"lscope['"+Q+"']\x3dlang.assign("+N+",'"+t.operator+"', lscope['"+Q+"'])";if(void 0!==h.localScope._SymbolsMap[Q])return"lscope['"+h.localScope._SymbolsMap[Q]+"']\x3dlang.assign("+N+",'"+t.operator+"', lscope['"+h.localScope._SymbolsMap[Q]+"'])"}if(void 0!==h.globalScope[Q])return"gscope['"+Q+"']\x3dlang.assign("+N+",'"+t.operator+"', gscope['"+Q+"'])";if(void 0!==h.globalScope._SymbolsMap[Q])return"gscope['"+h.globalScope._SymbolsMap[Q]+"']\x3dlang.assign("+N+",'"+t.operator+
"', gscope['"+h.globalScope._SymbolsMap[Q]+"'])";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(Q))return"gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(Q).manglename+"',runtimeCtx)]\x3dlang.assign("+N+",'"+t.operator+"', gscope['"+h.undeclaredGlobalsInFunctions.get(Q).manglename+"'])";const W={manglename:da(h),node:t.left};h.undeclaredGlobalsInFunctions.set(Q,W);return"gscope[lang.chkAssig('"+W.manglename+"',runtimeCtx)]\x3dlang.assign("+N+",'"+t.operator+"', gscope['"+
W.manglename+"'])"}throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.InvalidIdentifier,t);}function ia(h,t){return"BlockStatement"===t.type?c(h,t):"ReturnStatement"===t.type||"BreakStatement"===t.type||"ContinueStatement"===t.type?c(h,t)+"; ":"ExpressionStatement"===t.type?c(h,t):c(h,t)+"; "}function v(h,t){return`if (lang.mustBoolean(${E(h,t.test)}, runtimeCtx) === true) {\n    ${ia(h,t.consequent)}\n  } `+(null!==t.alternate?"IfStatement"===t.alternate.type?" else "+v(h,t.alternate):` else {\n      ${ia(h,
t.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function H(h,t){let N="";for(let Q=0;Q<t.body.length;Q++)"EmptyStatement"!==t.body[Q].type&&(N="ReturnStatement"===t.body[Q].type?N+(c(h,t.body[Q])+"; \n"):"BreakStatement"===t.body[Q].type?N+(c(h,t.body[Q])+"; \n"):"ContinueStatement"===t.body[Q].type?N+(c(h,t.body[Q])+"; \n"):N+(c(h,t.body[Q])+" \n"));return N}function P(h){if("iif"===h)throw new y.ArcadeUncompilableError;if("decode"===h)throw new y.ArcadeUncompilableError;
if("when"===h)throw new y.ArcadeUncompilableError;if("defaultvalue"===h)throw new y.ArcadeUncompilableError;}function U(h,t){const N=null===t.init?null:E(h,t.init);t=z.toSymbolId(t.id);P(t);if(null!==h.localScope){if(void 0!==h.localScope[t])return"lscope['"+t+"']\x3d"+N+"; ";if(void 0!==h.localScope._SymbolsMap[t])return"lscope['"+h.localScope._SymbolsMap[t]+"']\x3d"+N+"; ";var Q=da(h);h.localScope._SymbolsMap[t]=Q;h.mangleMap[t]=Q;return"lscope['"+Q+"']\x3d"+N+"; "}if(void 0!==h.globalScope[t])return"gscope['"+
t+"']\x3d"+N+"; ";if(void 0!==h.globalScope._SymbolsMap[t])return"gscope['"+h.globalScope._SymbolsMap[t]+"']\x3d"+N+"; ";if(h.undeclaredGlobalsInFunctions.has(t))return Q=h.undeclaredGlobalsInFunctions.get(t).manglename,h.globalScope._SymbolsMap[t]=Q,h.mangleMap[t]=Q,h.undeclaredGlobalsInFunctions.delete(t),"gscope[lang.setAssig('"+Q+"', runtimeCtx)]\x3d"+N+"; ";Q=da(h);h.globalScope._SymbolsMap[t]=Q;h.mangleMap[t]=Q;return"gscope['"+Q+"']\x3d"+N+"; "}function Z(h,t){try{const N=z.toSymbolId(t);P(N);
if(null!==h.localScope){if(void 0!==h.localScope[N])return"lscope['"+N+"']";if(void 0!==h.localScope._SymbolsMap[N])return"lscope['"+h.localScope._SymbolsMap[N]+"']"}if(void 0!==h.globalScope[N])return"gscope['"+N+"']";if(void 0!==h.globalScope._SymbolsMap[N])return"gscope['"+h.globalScope._SymbolsMap[N]+"']";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(N))return"gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx)]";const Q={manglename:da(h),node:t};
h.undeclaredGlobalsInFunctions.set(N,Q);return"gscope[lang.chkAssig('"+Q.manglename+"',runtimeCtx)]"}throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.InvalidIdentifier,t);}catch(N){throw N;}}function X(h,t){try{if("MemberExpression"===t.callee.type){if(!0===t.callee.computed)var N=E(h,t.callee.property);else P(t.callee.property.name),N="'"+t.callee.property.name+"'";var Q="[";for(var W=0;W<t.arguments.length;W++)0<W&&(Q+=", "),Q+=E(h,t.arguments[W]);Q+="]";return h.isAsync?"(yield lang.callModuleFunction("+
E(h,t.callee.object)+","+Q+","+N+",runtimeCtx))":"lang.callModuleFunction("+E(h,t.callee.object)+","+Q+","+N+",runtimeCtx)"}if("Identifier"!==t.callee.type)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.FunctionNotFound,t);const fa=z.toSymbolId(t.callee);if("iif"===fa){try{if(3!==t.arguments.length)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,t);const aa=qa(h);var ha=`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${aa} = ${E(h,t.arguments[0])};\n\n        if (${aa} === true) {\n          return  ${E(h,t.arguments[1])};\n        }\n        else if (${aa} === false) {\n          return ${E(h,t.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${h.isAsync?"})}()))":"}()"}`}catch(aa){throw aa;}return ha}if("when"===fa){try{if(3>t.arguments.length)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,
t);if(0===t.arguments.length%2)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,t);const aa=qa(h);W="var ";for(var ba=0;ba<t.arguments.length-1;ba+=2)W+=`${aa} = lang.mustBoolean(${E(h,t.arguments[ba])}, runtimeCtx);\n      if (${aa} === true ) {\n        return ${E(h,t.arguments[ba+1])}\n      }\n`;Q=`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${W}\n        return ${E(h,t.arguments[t.arguments.length-
1])}\n        ${h.isAsync?"})}()))":"}()"}`}catch(aa){throw aa;}return Q}if("defaultvalue"===fa){try{if(2>t.arguments.length||3<t.arguments.length)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,t);const aa=qa(h),la=qa(h);var ma=3===t.arguments.length?`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${aa} = ${E(h,t.arguments[0])};\n      var ${la} = ${E(h,t.arguments[1])};\n      ${aa} = lang.getNestedOptionalValue(${aa}, ${la});\n      return ${aa} != null && ${aa} !== "" ? ${aa} : ${E(h,
t.arguments[2])};\n      ${h.isAsync?"})}()))":"}()"}`:`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${aa} = ${E(h,t.arguments[0])};\n        if (${aa} === null) {\n          return  ${E(h,t.arguments[1])};\n        }\n        if (${aa} === "") {\n          return  ${E(h,t.arguments[1])};\n        }\n        if (${aa} === undefined) {\n          return  ${E(h,t.arguments[1])};\n        }\n        return ${aa};\n      ${h.isAsync?
"})}()))":"}()"}`}catch(aa){throw aa;}return ma}if("decode"===fa){try{if(2>t.arguments.length)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,t);if(2===t.arguments.length)W=`(${E(h,t.arguments[1])})`;else{if(0===(t.arguments.length-1)%2)throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,t);ba=qa(h);var na=qa(h);Q="var ";for(N=1;N<t.arguments.length-1;N+=2)Q+=`${na} = ${E(h,t.arguments[N])};\n      if (lang.binary(${na}, ${ba}, "==") === true ) {\n        return ${E(h,
t.arguments[N+1])}\n      }\n`;W=`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${ba} = ${E(h,t.arguments[0])};\n        ${Q}\n        return ${E(h,t.arguments[t.arguments.length-1])}\n        ${h.isAsync?"})}()))":"}()"}`}}catch(aa){throw aa;}return W}Q="";null!==h.localScope&&(void 0!==h.localScope[fa]?Q="lscope['"+fa+"']":void 0!==h.localScope._SymbolsMap[fa]&&(Q="lscope['"+h.localScope._SymbolsMap[fa]+"']"));if(""===
Q)if(void 0!==h.globalScope[fa])Q="gscope['"+fa+"']";else if(void 0!==h.globalScope._SymbolsMap[fa])Q="gscope['"+h.globalScope._SymbolsMap[fa]+"']";else if(null!==h.localScope)if(h.undeclaredGlobalsInFunctions.has(fa))Q="gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(fa).manglename+"',runtimeCtx)]";else{const aa={manglename:da(h),node:t.callee};h.undeclaredGlobalsInFunctions.set(fa,aa);Q="gscope[lang.chkAssig('"+aa.manglename+"',runtimeCtx)]"}if(""!==Q){W="[";for(ba=0;ba<t.arguments.length;ba++)0<
ba&&(W+=", "),W+=E(h,t.arguments[ba]);W+="]";return h.isAsync?"(yield lang.callfunc("+Q+","+W+",runtimeCtx) )":"lang.callfunc("+Q+","+W+",runtimeCtx)"}throw new y.ArcadeCompilationError(h,y.ExecutionErrorCodes.FunctionNotFound,t);}catch(fa){throw fa;}}function da(h){h.symbols.symbolCounter++;return`_T${h.symbols.symbolCounter}`}function qa(h){h.symbols.symbolCounter++;return`_Tvar${h.symbols.symbolCounter}`}function ua(h,t,N){const Q={_SymbolsMap:{}};h||={};N||={};Q.textformatting=1;Q.infinity=1;
Q.pi=1;for(const W in t)Q[W]=1;for(const W in N)Q[W]=1;for(const W in h)Q[W]=1;return Q}function va(h,t,N,Q){N=N?new R:new O;h||={};t||={};const W=new r({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});W.immutable=!1;N._SymbolsMap={textformatting:1,infinity:1,pi:1};N.textformatting=W;N.infinity=Number.POSITIVE_INFINITY;N.pi=Math.PI;for(const ha in t)N[ha]=t[ha],N._SymbolsMap[ha]=1;for(const ha in h)t=h[ha],N._SymbolsMap[ha]=1,p.isGraphic(t)?N[ha]=w.createFromGraphic(t,
Q??null):N[ha]=t;return N}function ra(h,t){const N={mode:t,compiled:!0,functions:{},signatures:[],standardFunction:a,standardFunctionAsync:a,evaluateIdentifier:xa};for(let Q=0;Q<h.length;Q++)h[Q].registerFunctions(N);if("sync"===t){for(const Q in N.functions)B[Q]=new b.NativeFunction(N.functions[Q]),O.prototype[Q]=B[Q];for(h=0;h<N.signatures.length;h++)A.addFunctionDeclaration(N.signatures[h],"sync")}else{for(const Q in N.functions)D[Q]=new b.NativeFunction(N.functions[Q]),R.prototype[Q]=D[Q];for(h=
0;h<N.signatures.length;h++)A.addFunctionDeclaration(N.signatures[h],"async")}}function xa(h,t){t=t.name;if("_SymbolsMap"===t)throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.InvalidIdentifier,null);if(0<h.localStack.length){if(!t.toLowerCase().startsWith("_t")&&void 0!==h.localStack[h.localStack.length-1][t])return h.localStack[h.localStack.length-1][t];const N=h.mangleMap[t];if(void 0!==N&&void 0!==h.localStack[h.localStack.length-1][N])return h.localStack[h.localStack.length-1][N]}if(!t.toLowerCase().startsWith("_t")&&
void 0!==h.globalScope[t]||1===h.globalScope._SymbolsMap[t])return h.globalScope[t];t=h.mangleMap[t];if(void 0!==t)return h.globalScope[t]}function wa(h){console.log(h)}function L(h,t,N=!1){t={isAsync:N,moduleFactory:t.moduleFactory,moduleFactoryMap:{},libraryResolver:new l.ArcadeModuleLoader(null,h.loadedModules),globalScope:ua(t.vars,N?D:B,t.customfunctions),customfunctions:t.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:wa,
lrucache:t.lrucache,timeZone:t.timeZone??null,interceptor:t.interceptor,services:t.services,symbols:{symbolCounter:0}};h=H(t,h);""===h&&(h="lc.voidOperation; ");const Q=t.moduleFactory,W=t.moduleFactoryMap,ha=t.exports,ba={};for(var ma in ha)ba[ma]=t.mangleMap[ma]??ma;ma={lc:p.lc,lang:ea,mangles:t.mangleMap,prepareModule(na){return new Y(na)},prepare(na,fa){let aa=na.spatialReference;if(null===aa||void 0===aa)aa=new C({wkid:102100});const la=va(na.vars,na.customfunctions,fa,na.timeZone);return{localStack:[],
isAsync:fa,exports:ha,exportmangle:ba,gdefs:{},moduleFactory:Q,moduleFactoryMap:W,moduleSingletons:na.moduleSingletons,mangleMap:this.mangles,spatialReference:aa,globalScope:la,abortSignal:void 0===na.abortSignal||null===na.abortSignal?{aborted:!1}:na.abortSignal,localScope:null,services:na.services,console:na.console??wa,lrucache:na.lrucache,timeZone:na.timeZone??null,interceptor:na.interceptor,symbols:{symbolCounter:0},depthCounter:na.depthCounter}}};return(new Function("context","spatialReference",
N?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+h+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
h+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(ma)}class V extends b.ArcadeFunction{constructor(h,t){super();this.paramCount=t;this.fn=h}createFunction(h){return(...t)=>{if(t.length!==this.paramCount)throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...t)}}call(h,t){return this.fn(...t.arguments)}marshalledCall(h,t,N,Q){return Q(h,t,(W,ha,ba)=>{ba=ba.map(ma=>!p.isFunctionParameter(ma)||ma instanceof
b.ScopeMarshalledFunction?ma:b.wrapModuleScopedResponse(ma,h,Q));W=this.call(N,{arguments:ba});return q.isPromiseLike(W)?W.then(ma=>b.wrapModuleScopedResponse(ma,N,Q)):W})}}const B={};G.registerFunctions(B,a);g.registerFunctions(B,a);e.registerFunctions(B,a);d.registerFunctions(B,a);f.registerFunctions(B,a);B.iif=function(h,t){try{return a(h,t,(N,Q,W)=>{throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.Unrecognized,t);})}catch(N){throw N;}};B.decode=function(h,t){try{return a(h,t,(N,Q,W)=>
{throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.Unrecognized,t);})}catch(N){throw N;}};B.when=function(h,t){try{return a(h,t,(N,Q,W)=>{throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.Unrecognized,t);})}catch(N){throw N;}};B.defaultvalue=function(h,t){try{return a(h,t,(N,Q,W)=>{throw new y.ArcadeExecutionError(h,y.ExecutionErrorCodes.Unrecognized,t);})}catch(N){throw N;}};const D={};for(const h in B)D[h]=new b.NativeFunction(B[h]);k.registerFunctions(B,a);for(const h in B)B[h]=new b.NativeFunction(B[h]);
const O=function(){};O.prototype=B;const R=function(){};R.prototype=D;G={fixSpatialReference:p.fixSpatialReference,parseArguments:function(h,t){const N=[];for(let Q=0;Q<t.arguments.length;Q++)N.push(E(h,t.arguments[Q]));return N},standardFunction:a};ra([J.ArrayFunctions],"sync");ra([J.ArrayFunctions],"async");let ca=0;const ea={isNumber(h){return p.isNumber(h)},isArray(h){return p.isArray(h)},isImmutableArray(h){return p.isImmutableArray(h)},isFeature(h){return p.isFeature(h)},isString(h){return p.isString(h)},
isDictionary(h){return p.isDictionary(h)},isGeometry(h){return p.isGeometry(h)},geometryMember(h,t,N,Q,W=1){return x.geometryMember(h,t,N,Q,W)},error(h){throw new y.ArcadeExecutionError(null,h,null);},__awaiter(h,t,N,Q){return new Promise((W,ha)=>{function ba(fa){try{na(Q.next(fa))}catch(aa){ha(aa)}}function ma(fa){try{na(Q["throw"](fa))}catch(aa){ha(aa)}}function na(fa){fa.done?W(fa.value):fa.value?.then?fa.value.then(ba,ma):(ca++,0===ca%100?setTimeout(()=>{ca=0;ba(fa.value)},0):ba(fa.value))}na((Q=
Q.apply(h,t||[])).next())})},functionDepthchecker(h,t){return function(){t.depthCounter.depth++;t.localStack.push({});if(64<t.depthCounter.depth)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.MaximumCallDepth,null);const N=h.apply(this,arguments);if(q.isPromiseLike(N))return N.then(Q=>{t.depthCounter.depth--;--t.localStack.length;return Q});t.depthCounter.depth--;--t.localStack.length;return N}},chkAssig(h,t){if(void 0===t.gdefs[h])throw new y.ArcadeExecutionError(t,y.ExecutionErrorCodes.InvalidIdentifier,
null);return h},mustBoolean(h,t){if(!0===h||!1===h)return h;throw new y.ArcadeExecutionError(t,y.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(h,t){t.gdefs[h]=1;return h},castString(h){return p.toString(h)},aCheck(h,t){if(p.isFunctionParameter(h)){if("ArrayExpression"===t)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===t)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return h===p.voidOperation?null:h},Dictionary:r,Feature:w,UserDefinedCompiledFunction:V,dictionary(h){const t={},N=new Map;for(let Q=0;Q<h.length;Q+=2){if(p.isFunctionParameter(h[Q+1]))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===p.isString(h[Q]))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyMustBeString,null);let W=h[Q].toString();const ha=W.toLowerCase();N.has(ha)?W=N.get(ha):
N.set(ha,W);t[W]=h[Q+1]===p.voidOperation?null:h[Q+1]}h=new r(t);h.immutable=!1;return h},strCheck(h){if(!1===p.isString(h))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyMustBeString,null);return h},unary(h,t){if(p.isBoolean(h)){if("!"===t)return!h;if("-"===t)return-1*p.toNumber(h);if("+"===t)return 1*p.toNumber(h);if("~"===t)return~p.toNumber(h);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===t)return-1*p.toNumber(h);if("+"===
t)return 1*p.toNumber(h);if("~"===t)return~p.toNumber(h);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(h){if(!1===p.isBoolean(h))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);return h},logical(h,t,N){if(p.isBoolean(h)&&p.isBoolean(t))switch(N){case "||":return h||t;case "\x26\x26":return h&&t}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(h,t,N){switch(N){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return p.binaryOperator(p.toNumber(h),
p.toNumber(t),N);case "\x3d\x3d":return p.equalityTest(h,t);case "\x3d":return p.equalityTest(h,t);case "!\x3d":return!p.equalityTest(h,t);case "\x3c":return p.greaterThanLessThan(h,t,N);case "\x3e":return p.greaterThanLessThan(h,t,N);case "\x3c\x3d":return p.greaterThanLessThan(h,t,N);case "\x3e\x3d":return p.greaterThanLessThan(h,t,N);case "+":return p.isString(h)||p.isString(t)?p.toString(h)+p.toString(t):p.toNumber(h)+p.toNumber(t);case "-":return p.toNumber(h)-p.toNumber(t);case "*":return p.toNumber(h)*
p.toNumber(t);case "/":return p.toNumber(h)/p.toNumber(t);case "%":return p.toNumber(h)%p.toNumber(t);default:throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(h,t,N){switch(t){case "\x3d":return h===p.voidOperation?null:h;case "/\x3d":return p.toNumber(N)/p.toNumber(h);case "*\x3d":return p.toNumber(N)*p.toNumber(h);case "-\x3d":return p.toNumber(N)-p.toNumber(h);case "+\x3d":return p.isString(N)||p.isString(h)?p.toString(N)+p.toString(h):p.toNumber(N)+
p.toNumber(h);case "%\x3d":return p.toNumber(N)%p.toNumber(h);default:throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.UnsupportedOperator,null);}},update(h,t,N,Q){const W=p.toNumber(h[t]);h[t]="++"===N?W+1:W-1;return!1===Q?W:"++"===N?W+1:W-1},graphicToFeature(h,t,N){return null===h?null:w.createFromGraphicLikeObject(h.geometry,h.attributes,t,N.timeZone)},memberupdate(h,t,N,Q){let W;if(p.isArray(h))if(p.isNumber(t)){0>t&&(t=h.length+t);if(0>t||t>=h.length)throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.OutOfBounds,null);W=p.toNumber(h[t]);h[t]="++"===N?W+1:W-1}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(h instanceof r){if(!1===p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(t))W=p.toNumber(h.field(t)),h.setField(t,"++"===N?W+1:W-1);else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null,{key:t});}else if(p.isFeature(h)){if(!1===
p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(t))W=p.toNumber(h.field(t)),h.setField(t,"++"===N?W+1:W-1);else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null);}else{if(p.isImmutableArray(h))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.Immutable,null);if(h instanceof Y){if(!1===p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleAccessorMustBeString,
null);if(!0===h.hasGlobal(t))W=p.toNumber(h.global(t)),h.setGlobal(t,"++"===N?W+1:W-1);else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===Q?W:"++"===N?W+1:W-1},assignmember(h,t,N,Q){if(p.isArray(h))if(p.isNumber(t)){0>t&&(t=h.length+t);if(0>t||t>h.length)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);if(t===h.length&&"\x3d"!==
N)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);h[t]=this.assign(Q,N,h[t])}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ArrayAccessorMustBeNumber,null);else if(h instanceof r){if(!1===p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(t))h.setField(t,this.assign(Q,N,h.field(t)));else{if("\x3d"!==N)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null);
h.setField(t,this.assign(Q,N,null))}}else if(p.isFeature(h)){if(!1===p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(t))h.setField(t,this.assign(Q,N,h.field(t)));else{if("\x3d"!==N)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FieldNotFound,null);h.setField(t,this.assign(Q,N,null))}}else{if(p.isImmutableArray(h))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.Immutable,null);if(h instanceof Y){if(!1===
p.isString(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(h.hasGlobal(t))h.setGlobal(t,this.assign(Q,N,h.global(t)));else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);}},member(h,t){if(null===h)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.MemberOfNull,null);if(h instanceof r||p.isFeature(h)){if(p.isString(t))return h.field(t);
throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(h instanceof n){if(p.isString(t))return x.geometryMember(h,t,null,null);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(p.isArray(h)){if(p.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){0>t&&(t=h.length+t);if(t>=h.length||0>t)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);return h[t]}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,
null);}if(p.isString(h)){if(p.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){0>t&&(t=h.length+t);if(t>=h.length||0>t)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);return h[t]}throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(p.isImmutableArray(h)){if(p.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){0>t&&(t=h.length()+t);if(t>=h.length()||0>t)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.OutOfBounds,null);return h.get(t)}throw new y.ArcadeExecutionError(null,
y.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(h instanceof Y&&p.isString(t))return h.global(t);throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(h,t,N){return h.call(N,{arguments:t,preparsed:!0})},loadModule(h,t){h=t.moduleFactoryMap[h];if(t.moduleSingletons[h])return t.moduleSingletons[h];const N=t.moduleFactory[h]({vars:{},moduleSingletons:t.moduleSingletons,depthCounter:t.depthCounter,console:t.console,abortSignal:t.abortSignal,isAsync:t.isAsync,
services:t.services,lrucache:t.lrucache,timeZone:t.timeZone??null,interceptor:t.interceptor},t.spatialReference);return t.moduleSingletons[h]=N},callModuleFunction(h,t,N,Q){if(!(h instanceof Y))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.FunctionNotFound,null);h=h.global(N);if(!1===p.isFunctionParameter(h))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.CallNonFunction,null);return h.call(Q,{preparsed:!0,arguments:t})},getNestedOptionalValue(h,t){return x.getNestedOptionalValue(h,
t)}};class Y extends m.ArcadeModule{constructor(h){super();this.moduleContext=h}hasGlobal(h){void 0===this.moduleContext.exports[h]&&(h=h.toLowerCase());return void 0!==this.moduleContext.exports[h]?!0:!1}setGlobal(h,t){const N=this.moduleContext.globalScope;h=h.toLowerCase();if(p.isFunctionParameter(t))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.AssignModuleFunction,null);N[this.moduleContext.exportmangle[h]]=t}global(h){const t=this.moduleContext.globalScope;h=h.toLowerCase();const N=
t[this.moduleContext.exportmangle[h]];if(void 0===N)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.InvalidIdentifier,null);if(p.isFunctionParameter(N)&&!(N instanceof b.ScopeMarshalledFunction)){const Q=new b.ScopeMarshalledFunction;Q.fn=N;Q.parameterEvaluator=a;Q.context=this.moduleContext;return t[this.moduleContext.exportmangle[h]]=Q}return N}}K.UserDefinedCompiledFunction=V;K.compileScript=function(h,t,N=!1){null===t&&(t={vars:{},customfunctions:{}});var Q=null;h.usesModules&&(Q=
new l.ArcadeModuleLoader(null,h.loadedModules));Q={isAsync:N,globalScope:ua(t.vars,N?D:B,t.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:t.customfunctions,libraryResolver:Q,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:wa,lrucache:t.lrucache,timeZone:t.timeZone??null,interceptor:t.interceptor,services:t.services,symbols:{symbolCounter:0}};h=H(Q,h);""===h&&(h="lc.voidOperation; ");0<Q.undeclaredGlobalsInFunctions.size&&
Q.undeclaredGlobalsInFunctions.forEach(fa=>{throw new y.ArcadeCompilationError(t,y.ExecutionErrorCodes.InvalidIdentifier,fa.node);});const W=Q.moduleFactory,ha=Q.moduleFactoryMap,ba=Q.exports,ma={};for(var na in ba)ma[na]=Q.mangleMap[na]??na;na={lc:p.lc,lang:ea,mangles:Q.mangleMap,postProcess(fa){fa instanceof p.ReturnResult&&(fa=fa.value);fa instanceof p.ImplicitResult&&(fa=fa.value);fa===p.voidOperation&&(fa=null);if(fa===p.breakResult)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,
null);if(fa===p.continueResult)throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,null);if(p.isFunctionParameter(fa))throw new y.ArcadeExecutionError(null,y.ExecutionErrorCodes.IllegalResult,null);return fa},prepare(fa,aa){let la=fa.spatialReference;if(null===la||void 0===la)la=C.WebMercator;const pa=va(fa.vars,fa.customfunctions,aa,fa.timeZone);return{localStack:[],isAsync:aa,moduleFactory:W,moduleFactoryMap:ha,mangleMap:this.mangles,moduleSingletons:{},exports:ba,gdefs:{},
exportmangle:ma,spatialReference:la,globalScope:pa,abortSignal:void 0===fa.abortSignal||null===fa.abortSignal?{aborted:!1}:fa.abortSignal,localScope:null,services:fa.services,console:fa.console??wa,lrucache:fa.lrucache,timeZone:fa.timeZone??null,interceptor:fa.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",N?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
h+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+h+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(na)};K.enableAsyncSupport=async function(){const h=await new Promise((t,N)=>F(["./functions/geomasync"],t,N));ra([h],"async");return!0};
K.executeScript=function(h,t){return h(t)};K.extend=ra;K.functionHelper=G;Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/arcadeEnvironment":function(){define(["exports"],function(F){F.toSymbolId=function(K){return K.name.toLowerCase()};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports"],function(F){class K{}F.ArcadeModule=K;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports"],
function(F){class K{constructor(z,m){this._moduleSingletons=z;this._syntaxModules=m}loadLibrary(z){return null==this._syntaxModules?null:(z=this._syntaxModules[z])?{syntax:z.script,uri:z.uri}:null}}F.ArcadeModuleLoader=K;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/containerUtils":function(){define("exports ./Dictionary ./executionError ./ImmutablePathArray ./ImmutablePointArray ../chunks/languageUtils ../core/Accessor".split(" "),function(F,K,z,m,l,x,r){function y(b,
p,A,J,G=1){p=p.toLowerCase();switch(p){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return p=b.spatialReference._arcadeCacheId,void 0===p&&(A=!0,r.isFrozen(b.spatialReference)&&(A=!1),A&&(w++,p=b.spatialReference._arcadeCacheId=w)),b=new K({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==p&&(b._arcadeCacheId="SPREF"+p.toString()),b}switch(b.type){case "extent":switch(p){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=
b[p],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(p){case "rings":return p=b.cache._arcadeCacheId,void 0===p&&(w++,p=w,b.cache._arcadeCacheId=p),new m(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,p);case "type":return"Polygon"}break;case "point":switch(p){case "x":case "y":case "z":case "m":return b[p]??null;case "type":return"Point"}break;case "polyline":switch(p){case "paths":return p=b.cache._arcadeCacheId,void 0===p&&(w++,p=w,b.cache._arcadeCacheId=p),new m(b.paths,
b.spatialReference,!0===b.hasZ,!0===b.hasM,p);case "type":return"Polyline"}break;case "multipoint":switch(p){case "points":return p=b.cache._arcadeCacheId,void 0===p&&(w++,p=w,b.cache._arcadeCacheId=p),new l(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,p,1);case "type":return"Multipoint"}}if(1===G)throw new z.ArcadeExecutionError(A,z.ExecutionErrorCodes.InvalidIdentifier,J);return 2===G?{keystate:"notfound"}:null}let w=0;F.geometryMember=y;F.getNestedOptionalValue=function(b,p){if(null==b)return null;
if(!x.isArray(p))if(x.isImmutableArray(p))p=p.toArray();else if(null!=p)p=[p];else return null;for(const A of p){if(x.isFeature(b)){if(!1===x.isString(A)||!b.hasField(A))return null;b=b.field(A)}else if(x.isDictionary(b)){if(!1===x.isString(A)||!b.hasField(A))return null;b=b.field(A)}else if(x.isGeometry(b)){if(!1===x.isString(A))return null;b=y(b,A,null,null,0)}else if(x.isArray(b)){if(!1===x.isNumber(A))return null;b=0<=A?b[A]:b[b.length+A]}else if(x.isImmutableArray(b)){if(!1===x.isNumber(A))return null;
b=0<=A?b.get(A):b.get(b.length()+A)}else return null;if(null==b)return null}return b};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(F,K,z,m,l,x){function r(w,b,p=!1,A=!1){if(null===w||void 0===w)return null;if(l.isNumber(w))return l.toNumber(w);if(l.isBoolean(w))return l.toBoolean(w);if(l.isString(w))return l.toString(w);
if(l.isDate(w))return l.toDate(w,b);if(l.isDateOnly(w)||l.isTime(w))return w;if(l.isArray(w)){var J=[];for(var G of w)J.push(r(G,b,p,A));return J}if(A&&l.isGeometry(w))return w;G=new y;G.immutable=!1;for(J of Object.keys(w)){const d=w[J];void 0!==d&&G.setField(J,r(d,b,p,A))}G.immutable=p;return G}class y{constructor(w){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=w instanceof y?w.attributes:void 0===w?{}:null===w?{}:w}field(w){const b=
w.toLowerCase(),p=this.attributes[w];if(void 0!==p)return p;for(const A in this.attributes)if(A.toLowerCase()===b)return this.attributes[A];throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.FieldNotFound,null,{key:w});}setField(w,b){if(this.immutable)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.Immutable,null);if(l.isFunctionParameter(b))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.NoFunctionInDictionary,null);const p=w.toLowerCase();b instanceof Date&&(b=F.ArcadeDate.dateJSToArcadeDate(b));
if(void 0===this.attributes[w])for(const A in this.attributes)if(A.toLowerCase()===p){this.attributes[A]=b;return}this.attributes[w]=b}hasField(w){const b=w.toLowerCase();if(void 0!==this.attributes[w])return!0;for(const p in this.attributes)if(p.toLowerCase()===b)return!0;return!1}keys(){let w=[];for(const b in this.attributes)w.push(b);return w=w.sort()}castToText(w=!1){let b="";for(const p in this.attributes){""!==b&&(b+=",");const A=this.attributes[p];null==A?b+=JSON.stringify(p)+":null":l.isBoolean(A)||
l.isNumber(A)||l.isString(A)?b+=JSON.stringify(p)+":"+JSON.stringify(A):A instanceof x?b+=JSON.stringify(p)+":"+l.toStringExplicit(A):A instanceof m?b+=JSON.stringify(p)+":"+l.toStringExplicit(A,null,w):Array.isArray(A)?b+=JSON.stringify(p)+":"+l.toStringExplicit(A,null,w):A instanceof F.ArcadeDate?b=w?b+(JSON.stringify(p)+":"+JSON.stringify(A.getTime())):b+(JSON.stringify(p)+":"+A.stringify()):null!==A&&"object"===typeof A&&void 0!==A.castToText&&(b+=JSON.stringify(p)+":"+A.castToText(w))}return"{"+
b+"}"}static convertObjectToArcadeDictionary(w,b,p=!0,A=!1){const J=new y;J.immutable=!1;for(const G in w){const d=w[G];void 0!==d&&J.setField(G.toString(),r(d,b,p,A))}J.immutable=p;return J}static convertJsonToArcade(w,b,p=!1,A=!1){return r(w,b,p,A)}castAsJson(w=null){const b={};for(let p in this.attributes){const A=this.attributes[p];void 0!==A&&(w?.keyTranslate&&(p=w.keyTranslate(p)),b[p]=l.castAsJson(A,w))}return b}async castDictionaryValueAsJsonAsync(w,b,p,A=null,J){p=await l.castAsJsonAsync(p,
A,J);return w[b]=p}async castAsJsonAsync(w=null,b=null){const p={},A=[];for(let J in this.attributes){const G=this.attributes[J];b?.keyTranslate&&(J=b.keyTranslate(J));void 0!==G&&(l.isSimpleType(G)||G instanceof x||G instanceof F.ArcadeDate?p[J]=l.castAsJson(G,b):A.push(this.castDictionaryValueAsJsonAsync(p,J,G,w,b)))}0<A.length&&await Promise.all(A);return p}deepClone(){const w=new y;w.immutable=!1;for(const b of this.keys())w.setField(b,K.deepClone(this.field(b)));return w}}return y})},"esri/arcade/ArcadeDate":function(){define(["exports",
"../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(F,K,z,m){function l(b,p,A){return b<p?b-p:b>A?b-A:0}function x(b,p=!0){if(b instanceof m.Zone)return b;if("system"===b.toLowerCase())return"system";if("utc"===b.toLowerCase())return"UTC";if("unknown"===b.toLowerCase())return z.UnknownTimeZone.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(b)){const A=m.FixedOffsetZone.parseSpecifier("UTC"+(b.startsWith("+")||b.startsWith("-")?"":"+")+b);if(A)return A}b=m.IANAZone.create(b);
if(!b.isValid){if(p)throw new y(F.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return b}F.ArcadeDateErrorCodes=void 0;(F.ArcadeDateErrorCodes||(F.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const r={[F.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class y extends Error{constructor(b,p){super(K.replace(r[b],p));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,
y)}}class w{constructor(b){this._date=b;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(b=0,p=1,A=1,J=0,G=0,d=0,k=0,e){if(isNaN(b)||isNaN(p)||isNaN(A)||isNaN(J)||isNaN(G)||isNaN(d)||isNaN(k))return null;const f=m.DateTime.local(b,p).daysInMonth;b=m.DateTime.fromObject({day:1>A?1:A>f?f:A,year:b,month:1>p?1:12<p?12:p,hour:0>J?0:23<J?23:J,minute:0>G?0:59<G?59:G,second:0>d?0:59<d?59:d,millisecond:0>k?0:999<k?999:k},{zone:x(e)});b=b.plus({months:l(p,1,12),days:l(A,1,f),hours:l(J,0,23),
minutes:l(G,0,59),seconds:l(d,0,59),milliseconds:l(k,0,999)});return new w(b)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(b,p){p=x(p);return b.isUnknownTimeZone||p===z.UnknownTimeZone.instance?w.fromParts(b.year,b.monthJS+1,b.day,b.hour,b.minute,b.second,b.millisecond,p):new w(b._date.setZone(p))}static dateJSToArcadeDate(b){return new w(m.DateTime.fromJSDate(b,{zone:"system"}))}static dateJSAndZoneToArcadeDate(b,
p="system"){p=x(p);return new w(m.DateTime.fromJSDate(b,{zone:p}))}static unknownEpochToArcadeDate(b){return new w(m.DateTime.fromMillis(b,{zone:z.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(b){return new w(m.DateTime.fromMillis(b.getTime(),{zone:z.UnknownTimeZone.instance}))}static epochToArcadeDate(b,p="system"){p=x(p);return new w(m.DateTime.fromMillis(b,{zone:p}))}static dateTimeToArcadeDate(b){return new w(b)}clone(){return new w(this._date)}changeTimeZone(b){b=x(b);return w.dateTimeToArcadeDate(this._date.setZone(b))}static dateTimeAndZoneToArcadeDate(b,
p){p=x(p);return b.zone===z.UnknownTimeZone.instance||p===z.UnknownTimeZone.instance?w.fromParts(b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond,p):new w(b.setZone(p))}static nowToArcadeDate(b){b=x(b);return new w(m.DateTime.fromJSDate(new Date,{zone:b}))}static nowUTCToArcadeDate(){return new w(m.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===w.systemTimeZoneCanonicalName}equals(b){return this.isSystem&&b.isSystem?this.toNumber()===b.toNumber():this.isUnknownTimeZone!==
b.isUnknownTimeZone?!1:this._date.equals(b._date)}get isUnknownTimeZone(){return this._date.zone===z.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let b=this._date.weekday;6<b&&(b=0);return b}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-
1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const b=this.zone;return"fixed"===b.type?0===b.fixed?"UTC":b.formatOffset(0,"short"):b.name}stringify(){return JSON.stringify(this.toJSDate())}plus(b){return new w(this._date.plus(b))}diff(b,p="milliseconds"){return this._date.diff(b._date,
p)[p]}toISODate(){return this._date.toISODate()}toISOString(b){return b?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(b,p){return this._date.toISOTime({suppressMilliseconds:b,includeOffset:p&&!this.isUnknownTimeZone})}toFormat(b,p){this.isUnknownTimeZone&&(b=b.replaceAll("Z",""));return this._date.toFormat(b,p)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new w(this._date.toUTC())}toLocal(){return new w(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(b){if(!b)return null;
b=m.DateTime.fromISO(b,{setZone:!0});return new w(b)}}F.ArcadeDate=w;F.ArcadeDateError=y;F.arcadeDateErrorMessages=r;F.createDateTimeZone=x;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/deepClone":function(){define(["exports","./ArcadeModule","../chunks/languageUtils"],function(F,K,z){function m(x){if(null===x)return null;if(z.isDate(x))return x.clone();if(z.isSimpleType(x))return x;if(z.isGeometry(x))return x.clone();if(z.isImmutableArray(x))return x.toArray().map(r=>
m(r));if(z.isArray(x))return x.map(r=>m(r));if(z.isFeature(x))return l.createFromArcadeFeature(x);if(z.isFeatureSetCollection(x)||z.isFeatureSet(x))return x;if(z.isDictionary(x)||"esri.arcade.Attachment"===x?.declaredClass)return x.deepClone();if("esri.arcade.Portal"===x?.declaredClass||z.isKnowledgeGraph(x)||x instanceof K.ArcadeModule)return x;z.isFunctionParameter(x);return x}let l;F.configureDeepClone=function(x){l=x};F.deepClone=m;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/languageUtils":function(){define("exports ../config ../kernel ../arcade/ArcadeDate ../arcade/ArcadeModule ../arcade/executionError ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/featureset/support/shared ../core/number ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference ../geometry/support/coordsUtils ../geometry/support/jsonUtils ../intl/locale ../rest/support/Query ./datetime".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d,k,e,f,g,q,n,C,a,E,c,S){function M(u,I,T){return""===I||null===I||void 0===I||I===T||I===T?u:u=u.split(I).join(T)}function ia(u){return u instanceof r.ArcadeFunction}function v(u){return u instanceof l.ArcadeModule}function H(u){return Z(u)||da(u)||R(u)||ca(u)||ea(u)||X(u)||null===u||u===ya||"number"===typeof u?!0:!1}function P(u,I){return void 0===u?I:u}function U(u){return null==u?"":va(u)||O(u)?"Array":R(u)?"Date":ea(u)?"Time":ca(u)?"DateOnly":Z(u)?"String":
X(u)?"Boolean":da(u)?"Number":"esri.arcade.Attachment"===u?.declaredClass?"Attachment":"esri.arcade.Portal"===u?.declaredClass?"Portal":"esri.arcade.Dictionary"===u?.declaredClass?"Dictionary":D(u)?"KnowledgeGraph":u instanceof l.ArcadeModule?"Module":ra(u)?"Feature":u instanceof f?"Point":u instanceof g?"Polygon":u instanceof q?"Polyline":u instanceof e?"Multipoint":u instanceof d?"Extent":ia(u)?"Function":L(u)?"FeatureSet":B(u)?"FeatureSetCollection":u===ya?"":"number"===typeof u&&isNaN(u)?"Number":
"Unrecognized Type"}function Z(u){return"string"===typeof u||u instanceof String}function X(u){return"boolean"===typeof u}function da(u){return"number"===typeof u}function qa(u){return"number"===typeof u&&isFinite(u)&&Math.floor(u)===u}function ua(u){return u instanceof k}function va(u){return Array.isArray(u)}function ra(u){return"esri.arcade.Feature"===u?.arcadeDeclaredClass?!0:!1}function xa(u){return"esri.Graphic"===u?.declaredClass}function wa(u){return u instanceof c}function L(u){return"esri.arcade.featureset.support.FeatureSet"===
u?.declaredRootClass}function V(u){return"esri.arcade.Dictionary"===u?.declaredClass}function B(u){return"esri.arcade.featureSetCollection"===u?.declaredRootClass}function D(u){return"esri.rest.knowledgeGraph.KnowledgeGraph"===u?.declaredClass}function O(u){return u instanceof y}function R(u){return u instanceof m.ArcadeDate}function ca(u){return u instanceof J.DateOnly}function ea(u){return u instanceof G.TimeOnly}function Y(u){return null!=u&&"object"===typeof u}function h(u){return u instanceof
Date}function t(u,I,T,ka,ja){if(u.length<I||u.length>T)throw new x.ArcadeExecutionError(ka,x.ExecutionErrorCodes.WrongNumberOfParameters,ja);}function N(u){return 0>u?-Math.round(-u):Math.round(u)}function Q(u,I){if(!isNaN(u)){if(void 0===I||null===I||""===I)return u.toString();I=M(I,"\u2030","");I=M(I,"\u00a4","");return A.format(u,{pattern:I})}return u.toString()}function W(u,I){return void 0===I||null===I||""===I?u.toISOString(!0):u.toFormat(ha(I),{locale:E.getLocale(),numberingSystem:"latn"})}
function ha(u,I=!1){u=u.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let T="";const ka=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const ja of u.match(ka)||[])switch(ja){case "D":T+="d";break;case "DD":T+="dd";break;case "DDD":T+="o";break;case "d":T+="c";break;case "ddd":T+="ccc";break;case "dddd":T+="cccc";break;case "M":T+="L";break;case "MM":T+=
"LL";break;case "MMM":T+="LLL";break;case "MMMM":T+="LLLL";break;case "YY":T+="yy";break;case "Y":case "YYYY":T+="yyyy";break;case "Q":T+="q";break;case "Z":T+="Z";break;case "ZZ":T+="ZZ";break;case "ZZZ":T+="ZZZ";break;case "ZZZZ":T=I?T+"[ZZZZ]":T+"ZZZZ";break;case "ZZZZZ":T=I?T+"[ZZZZZ]":T+"ZZZZZ";break;case "S":T+="'S'";break;case "SS":T+="'SS'";break;case "SSS":T+="u";break;case "A":case "a":T+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":T+=
ja;break;default:T=2<=ja.length&&"["===ja.slice(0,1)&&"]"===ja.slice(-1)?T+`'${ja.slice(1,-1)}'`:T+`'${ja}'`}return T}function ba(u,I,T){switch(T){case "\x3e":return u>I;case "\x3c":return u<I;case "\x3e\x3d":return u>=I;case "\x3c\x3d":return u<=I}return!1}function ma(u,I,T){if(null===u){if(null===I||I===ya)return ba(null,null,T);if(da(I))return ba(0,I,T);if(Z(I)||X(I))return ba(0,ta(I),T);if(R(I))return ba(0,I.toNumber(),T);if(ea(I)||ca(I))return ba(u,I.toNumber(),T)}if(u===ya){if(null===I||I===
ya)return ba(null,null,T);if(da(I))return ba(0,I,T);if(Z(I)||X(I))return ba(0,ta(I),T);if(R(I))return ba(0,I.toNumber(),T);if(ea(I)||ca(I))return ba(u,I.toNumber(),T)}else if(da(u)){if(da(I))return ba(u,I,T);if(X(I))return ba(u,ta(I),T);if(null===I||I===ya)return ba(u,0,T);if(Z(I))return ba(u,ta(I),T);if(R(I)||ea(I)||ca(I))return ba(u,I.toNumber(),T)}else if(Z(u)){if(Z(I))return ba(fa(u),fa(I),T);if(R(I)||ea(I)||ca(I))return ba(ta(u),I.toNumber(),T);if(da(I))return ba(ta(u),I,T);if(null===I||I===
ya)return ba(ta(u),0,T);if(X(I))return ba(ta(u),ta(I),T)}else if(R(u)){if(R(I))return u.timeZone!==I.timeZone&&(u.isUnknownTimeZone?u=m.ArcadeDate.arcadeDateAndZoneToArcadeDate(u,I.timeZone):I.isUnknownTimeZone&&(I=m.ArcadeDate.arcadeDateAndZoneToArcadeDate(I,u.timeZone))),ba(u.toNumber(),I.toNumber(),T);if(null===I||I===ya)return ba(u.toNumber(),0,T);if(da(I))return ba(u.toNumber(),I,T);if(X(I)||Z(I))return ba(u.toNumber(),ta(I),T);if(ea(I))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.CannotCompareDateAndTime,
null);if(ca(I))return ba(u.toNumber(),I.toNumber(),T)}else if(X(u)){if(X(I))return ba(u,I,T);if(da(I))return ba(ta(u),ta(I),T);if(R(I)||ea(I)||ca(I))return ba(ta(u),I.toNumber(),T);if(null===I||I===ya)return ba(ta(u),0,T);if(Z(I))return ba(ta(u),ta(I),T)}else if(ca(u)){if(R(I))return ba(u.toNumber(),I.toNumber(),T);if(null===I||I===ya)return ba(u.toNumber(),0,T);if(da(I))return ba(u.toNumber(),I,T);if(X(I)||Z(I))return ba(u.toNumber(),ta(I),T);if(ea(I))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.CannotCompareDateAndTime,
null);if(ca(I))return ba(u.toNumber(),I.toNumber(),T)}else if(ea(u)){if(R(I))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(null===I||I===ya)return ba(u.toNumber(),0,T);if(da(I))return ba(u.toNumber(),I,T);if(X(I)||Z(I))return ba(u.toNumber(),ta(I),T);if(ea(I))return ba(u.toNumber(),I.toNumber(),T);if(ca(I))throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.CannotCompareDateAndTime,null);}return!na(u,I)||"\x3c\x3d"!==T&&"\x3e\x3d"!==T?!1:!0}
function na(u,I){if(u===I||null===u&&I===ya||null===I&&u===ya)return!0;if(R(u)&&R(I)||ea(u)&&ea(I)||ca(u)&&ca(I))return u.equals(I);if(u instanceof w||u instanceof b)return u.equalityTest(I);if(u instanceof f&&I instanceof f){const T=u.cache._arcadeCacheId,ka=I.cache._arcadeCacheId;if(void 0!==T&&null!==T)return T===ka}return Y(u)&&Y(I)&&(u._arcadeCacheId===I._arcadeCacheId&&void 0!==u._arcadeCacheId&&null!==u._arcadeCacheId||u._underlyingGraphic===I._underlyingGraphic&&void 0!==u._underlyingGraphic&&
null!==u._underlyingGraphic)?!0:!1}function fa(u,I){if(Z(u))return u;if(null===u)return"";if(da(u))return Q(u,I);if(X(u))return u.toString();if(R(u))return W(u,I);if(ea(u)||ca(u))return u.toFormat(I);if(u instanceof k)return JSON.stringify(u.toJSON());if(va(u)){I=[];for(var T=0;T<u.length;T++)I[T]=pa(u[T]);return"["+I.join(",")+"]"}if(u instanceof y){I=[];for(T=0;T<u.length();T++)I[T]=pa(u.get(T));return"["+I.join(",")+"]"}return null!==u&&"object"===typeof u&&void 0!==u.castToText?u.castToText():
ia(u)?"object, Function":u===ya?"":v(u)?"object, Module":""}function aa(u){const I=[];if(!va(u))return null;if(u instanceof y){for(var T=0;T<u.length();T++)I[T]=ta(u.get(T));return I}for(T=0;T<u.length;T++)I[T]=ta(u[T]);return I}function la(u,I,T=!1){if(Z(u))return u;if(null===u)return"";if(da(u))return Q(u,I);if(X(u))return u.toString();if(R(u))return W(u,I);if(ea(u)||ca(u))return u.toFormat(I);if(u instanceof k)return u instanceof d?'{"xmin":'+u.xmin.toString()+',"ymin":'+u.ymin.toString()+","+
(u.hasZ?'"zmin":'+u.zmin.toString()+",":"")+(u.hasM?'"mmin":'+u.mmin.toString()+",":"")+'"xmax":'+u.xmax.toString()+',"ymax":'+u.ymax.toString()+","+(u.hasZ?'"zmax":'+u.zmax.toString()+",":"")+(u.hasM?'"mmax":'+u.mmax.toString()+",":"")+'"spatialReference":'+Ia(u.spatialReference)+"}":Ia(u.toJSON(),(ja,oa)=>ja.key===oa.key?0:"spatialReference"===ja.key?1:"spatialReference"===oa.key||ja.key<oa.key?-1:ja.key>oa.key?1:0);if(va(u)){I=[];for(var ka=0;ka<u.length;ka++)I[ka]=pa(u[ka],T);return"["+I.join(",")+
"]"}if(u instanceof y){I=[];for(ka=0;ka<u.length();ka++)I[ka]=pa(u.get(ka),T);return"["+I.join(",")+"]"}return null!==u&&"object"===typeof u&&void 0!==u.castToText?u.castToText(T):ia(u)?"object, Function":u===ya?"":v(u)?"object, Module":""}function pa(u,I=!1){return null===u?"null":X(u)||da(u)||Z(u)?JSON.stringify(u):u instanceof k||u instanceof y||Array.isArray(u)?la(u,null,I):R(u)?I?JSON.stringify(u.getTime()):JSON.stringify(W(u,"")):ea(u)||ca(u)?JSON.stringify(u.toString()):null!==u&&"object"===
typeof u&&void 0!==u.castToText?u.castToText(I):"null"}function ta(u,I){return da(u)?u:null===u||""===u?0:R(u)||ca(u)||ea(u)?NaN:X(u)?u?1:0:va(u)||""===u||void 0===u?NaN:void 0!==I&&Z(u)?(I=M(I,"\u2030",""),I=M(I,"\u00a4",""),A.parse(u,{pattern:I})):u===ya?0:Number(u)}function Oa(u,I){if(R(u))return u;if(Z(u)){a:{const ka=/ (\d\d)/;var T=m.createDateTimeZone(I);T=S.DateTime.fromISO(u,{zone:T});if(T.isValid)I=T;else{if(ka.test(u)&&(u=u.replace(ka,"T$1"),T=S.DateTime.fromISO(u,{zone:I}),T.isValid)){I=
T;break a}I=null}}if(I)return m.ArcadeDate.dateTimeToArcadeDate(I)}return null}function Pa(u){return X(u)?u:Z(u)?(u=u.toLowerCase(),"true"===u?!0:!1):da(u)?0===u||isNaN(u)?!1:!0:!1}function Qa(u,I){(u=JSON.parse(u))&&!u.spatialReference&&(u.spatialReference=I);return a.fromJSON(u)}function Ra(u,I){if(null==u)return null;if(null===u.spatialReference||void 0===u.spatialReference)u.spatialReference=I;return u}function Sa(u){if(null===u)return null;if(u instanceof f)return"NaN"===u.x||null===u.x||isNaN(u.x)?
null:u;if(u instanceof g){if(0===u.rings.length)return null;for(const I of u.rings)if(0<I.length)return u;return null}if(u instanceof q){if(0===u.paths.length)return null;for(const I of u.paths)if(0<I.length)return u;return null}return u instanceof e?0===u.points.length?null:u:u instanceof d?"NaN"===u.xmin||null===u.xmin||isNaN(u.xmin)?null:u:null}function Ja(u,I){if(!u||!u.domain)return I;let T=null,ka=null;if(R(I))T=I.toNumber();else if(ca(I))T=I.toString();else if(ea(I))T=I.toStorageString();else if("string"===
u.field.type||"esriFieldTypeString"===u.field.type)T=fa(I);else{if(null===I||void 0===I)return null;if(""===I)return I;T=ta(I)}for(let ja=0;ja<u.domain.codedValues.length;ja++){const oa=u.domain.codedValues[ja];oa.code===T&&(ka=oa)}return null===ka?fa(I):ka.name}function Ka(u,I){if(!u||!u.domain)return I;let T=null;const ka=fa(I);for(let ja=0;ja<u.domain.codedValues.length;ja++){const oa=u.domain.codedValues[ja];oa.name===ka&&(T=oa)}return null===T?I:T.code}function Ga(u,I,T=null,ka=null){if(!I||
!I.fields)return null;let ja=null;for(var oa=0;oa<I.fields.length;oa++){var sa=I.fields[oa];sa.name.toLowerCase()===u.toString().toLowerCase()&&(ja=sa)}if(null===ja)throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.FieldNotFound,null,{key:u});let Ba,za;oa=I.typeIdField;let Aa="id";sa=I.types;I.subtypeField&&(oa=I.subtypeField,Aa="code",sa=I.subtypes??[]);if(null===ka&&T&&oa)ka=T.hasField(oa)?T.field(oa):null;else if(oa&&null!==ka){let Ca=!1;for(const Da of sa||[])if(ka===Da[Aa]){Ca=!0;break}if(!Ca)for(const Da of sa||
[])if(ka===Da.name){ka=Da[Aa];Ca=!0;break}Ca||(ka=null,T&&oa&&(ka=T.hasField(oa)?T.field(oa):null))}null!==ka&&void 0!==ka&&sa.some(Ca=>Ca[Aa]===ka?((Ba=Ca.domains?.[ja.name])&&"inherited"===Ba.type&&(Ba=Ta(ja.name,I),za=!0),!0):!1);za||Ba||(Ba=Ta(u,I));return{field:ja,domain:Ba}}function Ta(u,I){let T;I.fields.some(ka=>{ka.name.toLowerCase()===u.toLowerCase()&&(T=ka.domain);return!!T});return T}function Ia(u,I){I||={};"function"===typeof I&&(I={cmp:I});const T="boolean"===typeof I.cycles?I.cycles:
!1,ka=I.cmp&&function(oa){return function(sa){return function(Ba,za){return oa({key:Ba,value:sa[Ba]},{key:za,value:sa[za]})}}}(I.cmp),ja=[];return function Ba(sa){sa?.toJSON&&"function"===typeof sa.toJSON&&(sa=sa.toJSON());if(void 0!==sa){if("number"===typeof sa)return isFinite(sa)?""+sa:"null";if("object"!==typeof sa)return JSON.stringify(sa);var za;if(Array.isArray(sa)){var Aa="[";for(za=0;za<sa.length;za++)za&&(Aa+=","),Aa+=Ba(sa[za])||"null";return Aa+"]"}if(null===sa)return"null";if(ja.includes(sa)){if(T)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var Ca=ja.push(sa)-1,Da=Object.keys(sa).sort(ka?.(sa));Aa="";for(za=0;za<Da.length;za++){const Ua=Da[za],Va=Ba(sa[Ua]);Va&&(Aa&&(Aa+=","),Aa+=JSON.stringify(Ua)+":"+Va)}ja.splice(Ca,1);return"{"+Aa+"}"}}(u)}function Wa(u){if(null===u)return null;const I=[];for(const T of u)T?.arcadeDeclaredClass&&"esri.arcade.Feature"===T.arcadeDeclaredClass?I.push(T.geometry()):I.push(T);return I}function Ea(u,I){if(I instanceof f)u.push(I.hasZ?I.hasM?
[I.x,I.y,I.z,I.m]:[I.x,I.y,I.z]:[I.x,I.y]);else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidParameter,null);}function Xa(u,I){if(va(u)||O(u)){let T=!1,ka=!1,ja=[];if(va(u)){for(const oa of u)Ea(ja,oa);0<ja.length&&(I=u[0].spatialReference,T=u[0].hasZ,ka=u[0].hasM)}else if(u instanceof b)ja=u._elements,0<ja.length&&(T=u._hasZ,ka=u._hasM,I=u.get(0).spatialReference);else if(O(u)){for(const oa of u.toArray())Ea(ja,oa);0<ja.length&&(I=u.get(0).spatialReference,T=!0===u.get(0).hasZ,
ka=!0===u.get(0).hasM)}else throw new x.ArcadeExecutionError(null,x.ExecutionErrorCodes.InvalidParameter,null);if(0===ja.length)return null;C.isClockwise(ja)||(ja=ja.slice().reverse());return new g({rings:[ja],spatialReference:I,hasZ:T,hasM:ka})}return u}function Ya(u,I){if(va(u)||O(u)){let T=!1,ka=!1,ja=[];if(va(u)){for(const oa of u)Ea(ja,oa);0<ja.length&&(I=u[0].spatialReference,T=!0===u[0].hasZ,ka=!0===u[0].hasM)}else if(u instanceof b)ja=u._elements,0<ja.length&&(T=u._hasZ,ka=u._hasM,I=u.get(0).spatialReference);
else if(O(u)){for(const oa of u.toArray())Ea(ja,oa);0<ja.length&&(I=u.get(0).spatialReference,T=!0===u.get(0).hasZ,ka=!0===u.get(0).hasM)}return 0===ja.length?null:new q({paths:[ja],spatialReference:I,hasZ:T,hasM:ka})}return u}function Za(u,I){if(va(u)||O(u)){let T=!1,ka=!1,ja=[];if(va(u)){for(const oa of u)Ea(ja,oa);0<ja.length&&(I=u[0].spatialReference,T=!0===u[0].hasZ,ka=!0===u[0].hasM)}else if(u instanceof b)ja=u._elements,0<ja.length&&(T=u._hasZ,ka=u._hasM,I=u.get(0).spatialReference);else if(O(u)){for(const oa of u.toArray())Ea(ja,
oa);0<ja.length&&(I=u.get(0).spatialReference,T=!0===u.get(0).hasZ,ka=!0===u.get(0).hasM)}return 0===ja.length?null:new e({points:ja,spatialReference:I,hasZ:T,hasM:ka})}return u}function $a(u,I=!1){const T=[];if(null===u)return T;if(!0===va(u)){for(var ka=0;ka<u.length;ka++){var ja=fa(u[ka]);""===ja&&!0!==I||T.push(ja)}return T}if(u instanceof y){for(ka=0;ka<u.length();ka++)ja=fa(u.get(ka)),""===ja&&!0!==I||T.push(ja);return T}return H(u)?(u=fa(u),""===u&&!0!==I||T.push(u),T):[]}function ab(u){La++;
return 0===La%100?(La=0,new Promise(I=>{setTimeout(()=>{I(u)},0)})):u}function bb(u,I,T){switch(T){case "\x26":return u&I;case "|":return u|I;case "^":return u^I;case "\x3c\x3c":return u<<I;case "\x3e\x3e":return u>>I;case "\x3e\x3e\x3e":return u>>>I}}function Fa(u,I=null){if(null!=u){if(X(u)||da(u)||Z(u))return u;if(u instanceof k)return!0===I?.keepGeometryType?u:u.toJSON();if(u instanceof y)return u.toArray().map(T=>Fa(T,I));if(Array.isArray(u))return u.map(T=>Fa(T,I));if(h(u))return u;if(R(u))return u.toJSDate();
if(ea(u))return u.toString();if(ca(u))return u.toJSDate();if(null!==u&&"object"===typeof u&&void 0!==u.castAsJson)return u.castAsJson(I)}return null}async function ob(u,I,T,ka,ja){u=await Ma(u,I,T);ja[ka]=u}async function Ma(u,I=null,T=null){u instanceof y&&(u=u.toArray());if(null!=u){if(H(u)||u instanceof k||h(u)||R(u))return Fa(u,T);if(Array.isArray(u)){const ka=[],ja=[];for(const oa of u)null===oa||H(oa)||oa instanceof k||h(oa)||R(oa)?ja.push(Fa(oa,T)):(ja.push(null),ka.push(ob(oa,I,T,ja.length-
1,ja)));0<ka.length&&await Promise.all(ka);return ja}if(null!==u&&"object"===typeof u&&void 0!==u.castAsJsonAsync)return u.castAsJsonAsync(I,T)}return null}function Ha(u){return Na(u)?u.parent:u}function Na(u){return u&&"declaredClass"in u&&"esri.layers.support.SubtypeSublayer"===u.declaredClass}function cb(u){return u&&"declaredClass"in u&&"esri.layers.SubtypeGroupLayer"===u.declaredClass}function db(u,I,T){const ka=Ha(u.fullSchema());return null!==ka&&ka.fields?Ga(I,ka,u,T):null}function eb(u){u=
Ha(u.fullSchema());return null!==u&&u.fields?u.subtypeField?{subtypeField:u.subtypeField,subtypes:u.subtypes?u.subtypes.map(I=>({name:I.name,code:I.code})):[]}:u.typeIdField?{subtypeField:u.typeIdField,subtypes:u.types?u.types.map(I=>({name:I.name,code:I.id})):[]}:null:null}function fb(u,I,T,ka){const ja=Ha(u.fullSchema());if(null===ja||!ja.fields)return null;ka=Ga(I,ja,u,ka);if(void 0===T)try{T=u.field(I)}catch(oa){return null}return Ja(ka,T)}function gb(u,I,T,ka){const ja=Ha(u.fullSchema());if(null===
ja||!ja.fields)return null;if(void 0===T){try{T=u.field(I)}catch(oa){return null}return T}u=Ga(I,ja,u,ka);return Ka(u,T)}function hb(u){return u?.timeZone??"system"}function ib(u){u=Ha(u.fullSchema());if(null===u||!u.fields)return null;const I=[];for(const T of u.fields)I.push(p.esriFieldToJson(T));return{objectIdField:u.objectIdField,globalIdField:u.globalIdField??"",geometryType:void 0===p.layerGeometryEsriRestConstants[u.geometryType]?"":p.layerGeometryEsriRestConstants[u.geometryType],fields:I}}
function jb(u,I){"system"===u&&(u=m.ArcadeDate.systemTimeZoneCanonicalName);return{version:"1.28",engineVersion:z.version,timeZone:u,spatialReference:I instanceof n?I.toJSON():I,application:K.applicationName??"",engine:"web",locale:E.getLocale()}}class kb{constructor(u){this.value=u}}class lb{constructor(u){this.value=u}}const ya={type:"VOID"},mb=Symbol("BREAK"),nb=Symbol("CONTINUE");let La=0;const pb=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:lb,ReturnResult:kb,absRound:N,
arcadeVersion:"1.28",autoCastArrayOfPointsToMultiPoint:Za,autoCastArrayOfPointsToPolygon:Xa,autoCastArrayOfPointsToPolyline:Ya,autoCastFeatureToGeometry:Wa,binaryOperator:bb,breakResult:mb,castAsJson:Fa,castAsJsonAsync:Ma,continueResult:nb,defaultExecutingContext:jb,defaultTimeZone:hb,defaultUndefined:P,equalityTest:na,featureDomainCodeLookup:gb,featureDomainValueLookup:fb,featureFullDomain:db,featureSchema:ib,featureSubtypes:eb,fixNullGeometry:Sa,fixSpatialReference:Ra,formatDate:W,formatNumber:Q,
getDomain:Ga,getDomainCode:Ka,getDomainValue:Ja,getType:U,greaterThanLessThan:ma,isArray:va,isBoolean:X,isDate:R,isDateOnly:ca,isDictionary:V,isFeature:ra,isFeatureSet:L,isFeatureSetCollection:B,isFunctionParameter:ia,isGeometry:ua,isGraphic:xa,isImmutableArray:O,isInteger:qa,isJsDate:h,isKnowledgeGraph:D,isModule:v,isNumber:da,isObject:Y,isQuery:wa,isSimpleType:H,isString:Z,isSubtypeGrouplayer:cb,isSubtypeSublayer:Na,isTime:ea,multiReplace:M,parseGeometryFromJson:Qa,pcCheck:t,stableStringify:Ia,
standardiseDateFormat:ha,tick:ab,toBoolean:Pa,toDate:Oa,toNumber:ta,toNumberArray:aa,toString:fa,toStringArray:$a,toStringExplicit:la,voidOperation:ya},Symbol.toStringTag,{value:"Module"}));F.ImplicitResult=lb;F.ReturnResult=kb;F.absRound=N;F.arcadeVersion="1.28";F.autoCastArrayOfPointsToMultiPoint=Za;F.autoCastArrayOfPointsToPolygon=Xa;F.autoCastArrayOfPointsToPolyline=Ya;F.autoCastFeatureToGeometry=Wa;F.binaryOperator=bb;F.breakResult=mb;F.castAsJson=Fa;F.castAsJsonAsync=Ma;F.continueResult=nb;
F.defaultExecutingContext=jb;F.defaultTimeZone=hb;F.defaultUndefined=P;F.equalityTest=na;F.featureDomainCodeLookup=gb;F.featureDomainValueLookup=fb;F.featureFullDomain=db;F.featureSchema=ib;F.featureSubtypes=eb;F.fixNullGeometry=Sa;F.fixSpatialReference=Ra;F.formatDate=W;F.formatNumber=Q;F.getDomain=Ga;F.getDomainCode=Ka;F.getDomainValue=Ja;F.getType=U;F.greaterThanLessThan=ma;F.isArray=va;F.isBoolean=X;F.isDate=R;F.isDateOnly=ca;F.isDictionary=V;F.isFeature=ra;F.isFeatureSet=L;F.isFeatureSetCollection=
B;F.isFunctionParameter=ia;F.isGeometry=ua;F.isGraphic=xa;F.isImmutableArray=O;F.isInteger=qa;F.isJsDate=h;F.isKnowledgeGraph=D;F.isModule=v;F.isNumber=da;F.isObject=Y;F.isQuery=wa;F.isSimpleType=H;F.isString=Z;F.isSubtypeGrouplayer=cb;F.isSubtypeSublayer=Na;F.isTime=ea;F.lc=pb;F.multiReplace=M;F.parseGeometryFromJson=Qa;F.pcCheck=t;F.stableStringify=Ia;F.standardiseDateFormat=ha;F.tick=ab;F.toBoolean=Pa;F.toDate=Oa;F.toNumber=ta;F.toNumberArray=aa;F.toString=fa;F.toStringArray=$a;F.toStringExplicit=
la;F.voidOperation=ya})},"esri/arcade/executionError":function(){define(["exports","../core/string"],function(F,K){function z(A){return A&&A.loc?`Line : ${A.loc.start?.line}, ${A.loc.start?.column}: `:""}F.ExecutionErrorCodes=void 0;(function(A){A.AsyncNotEnabled="AsyncNotEnabled";A.ModulesNotSupported="ModulesNotSupported";A.CircularModules="CircularModules";A.CannotCompareDateAndTime="CannotCompareDateAndTime";A.NeverReach="NeverReach";A.UnsupportedHashType="UnsupportedHashType";A.InvalidParameter=
"InvalidParameter";A.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes";A.UnexpectedToken="UnexpectedToken";A.Unrecognized="Unrecognized";A.UnrecognizedType="UnrecognizedType";A.MaximumCallDepth="MaximumCallDepth";A.BooleanConditionRequired="BooleanConditionRequired";A.TypeNotAllowedInFeature="TypeNotAllowedInFeature";A.KeyMustBeString="KeyMustBeString";A.WrongNumberOfParameters="WrongNumberOfParameters";A.CallNonFunction="CallNonFunction";A.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
A.NoFunctionInDictionary="NoFunctionInDictionary";A.NoFunctionInArray="NoFunctionInArray";A.AssignModuleFunction="AssignModuleFunction";A.LogicExpressionOrAnd="LogicExpressionOrAnd";A.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";A.FunctionNotFound="FunctionNotFound";A.InvalidMemberAccessKey="InvalidMemberAccessKey";A.UnsupportedUnaryOperator="UnsupportUnaryOperator";A.InvalidIdentifier="InvalidIdentifier";A.MemberOfNull="MemberOfNull";A.UnsupportedOperator="UnsupportedOperator";A.Cancelled=
"Cancelled";A.ModuleAccessorMustBeString="ModuleAccessorMustBeString";A.ModuleExportNotFound="ModuleExportNotFound";A.Immutable="Immutable";A.OutOfBounds="OutOfBounds";A.IllegalResult="IllegalResult";A.FieldNotFound="FieldNotFound";A.PortalRequired="PortalRequired";A.LogicError="LogicError";A.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";A.KeyAccessorMustBeString="KeyAccessorMustBeString";A.WrongSpatialReference="WrongSpatialReference";A.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime";A.CannotChangeTimeZoneDateOnly=
"CannotChangeTimeZoneDateOnly"})(F.ExecutionErrorCodes||(F.ExecutionErrorCodes={}));const m={[F.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[F.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[F.ExecutionErrorCodes.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[F.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[F.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",
[F.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[F.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[F.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[F.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[F.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[F.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[F.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",
[F.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[F.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[F.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[F.ExecutionErrorCodes.PortalRequired]:"Portal is required",[F.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[F.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[F.ExecutionErrorCodes.Unrecognized]:"Unrecognized code structure",[F.ExecutionErrorCodes.UnrecognizedType]:"Unrecognized type",
[F.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[F.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[F.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[F.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[F.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",
[F.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[F.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[F.ExecutionErrorCodes.Immutable]:"Object is immutable",[F.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[F.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[F.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[F.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[F.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognized",
[F.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[F.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[F.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[F.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[F.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[F.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[F.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26",
[F.ExecutionErrorCodes.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[F.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[F.ExecutionErrorCodes.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};class l extends Error{constructor(...A){super(...A)}}class x extends l{constructor(A,J){super(z(J)+A.message,{cause:A});this.loc=null;Error.captureStackTrace&&Error.captureStackTrace(this,x);J?.loc&&(this.loc=J.loc)}}class r extends Error{constructor(A,
J,G,d){super("Execution error - "+z(G)+K.replace(m[J],d));this.loc=null;this.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(this,r);G?.loc&&(this.loc=G.loc)}}class y extends Error{constructor(A,J,G,d){super("Compilation error - "+z(G)+K.replace(m[J],d));this.loc=null;this.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(this,y);G?.loc&&(this.loc=G.loc)}}class w extends Error{constructor(){super("Uncompilable code structures");
this.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(this,w)}}F.ModuleErrorCodes=void 0;(function(A){A.UnrecognizedUri="UnrecognizedUri";A.UnsupportedUriProtocol="UnsupportedUriProtocol"})(F.ModuleErrorCodes||(F.ModuleErrorCodes={}));const b={[F.ModuleErrorCodes.UnrecognizedUri]:"Unrecognized uri - {uri}",[F.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class p extends Error{constructor(A,J){super(K.replace(b[A],J));
this.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(this,p)}}F.ArcadeCompilationError=y;F.ArcadeExecutionError=r;F.ArcadeUncompilableError=w;F.ErrorWithCause=l;F.LocatableArcadeExecutionError=x;F.ModuleError=p;F.ensureArcadeExecutionError=function(A,J,G){return"esri.arcade.arcadeexecutionerror"===G.declaredRootClass||"esri.arcade.arcadecompilationerror"===G.declaredRootClass?null===G.loc&&J?.loc?new x(G,{cause:G}):G:J?.loc?new x(G,{cause:G}):G};
F.executionErrorMessages=m;F.moduleErrorMessages=b;F.parsingValidationMessage=function(A,J,G){return"Parsing error - "+z(A)+K.replace(m[J],G)};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/FunctionWrapper":function(){define(["exports","../core/promiseUtils"],function(F,K){function z(r,y,w){if(r instanceof m&&!(r instanceof x)){const b=new x;b.fn=r;b.parameterEvaluator=w;b.context=y;return b}return r}class m{constructor(){}}class l extends m{constructor(r){super();this.fn=
r}createFunction(r){return(...y)=>this.fn(r,{preparsed:!0,arguments:y})}call(r,y){return this.fn(r,y)}marshalledCall(r,y,w,b){return b(r,y,(p,A,J)=>{J=J.map(G=>G instanceof m&&!(G instanceof x)?z(G,r,b):G);p=this.call(w,{args:J});return K.isPromiseLike(p)?p.then(G=>z(G,w,b)):p})}}class x extends m{constructor(){super(...arguments);this.context=this.fn=null}createFunction(r){return this.fn.createFunction(this.context)}call(r,y){return this.fn.marshalledCall(r,y,this.context,this.parameterEvaluator)}marshalledCall(r,
y,w){return this.fn.marshalledCall(r,y,this.context,this.parameterEvaluator)}}F.ArcadeFunction=m;F.NativeFunction=l;F.ScopeMarshalledFunction=x;F.wrapModuleScopedResponse=z;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){class F{constructor(K=[]){this._elements=K}length(){return this._elements.length}get(K){return this._elements[K]}toArray(){return this.slice()}slice(K=0,z=this.length()){const m=[];for(;K<z;K++)m.push(this.get(K));
return m}}return F})},"esri/arcade/ImmutablePathArray":function(){define(["./ImmutableArray","./ImmutablePointArray"],function(F,K){class z extends F{constructor(m,l,x,r,y){super(m);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=x;this._hasM=r;this._spRef=l;this._cacheId=y}get(m){if(void 0===this._lazyPath[m]){const l=this._elements[m];if(void 0===l)return;this._lazyPath[m]=new K(l,this._spRef,this._hasZ,this._hasM,this._cacheId,m)}return this._lazyPath[m]}equalityTest(m){return m===this?!0:
null===m||!1===m instanceof z?!1:m.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}return z})},"esri/arcade/ImmutablePointArray":function(){define(["./ImmutableArray","../geometry/Point"],function(F,K){class z extends F{constructor(m,l,x,r,y,w){super(m);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=l;this._hasZ=x;this._hasM=r;this._cacheId=y;this._partId=w}get(m){if(void 0===this._lazyPt[m]){var l=this._elements[m];if(void 0===l)return;const x=this._hasZ,
r=this._hasM;l=x&&!r?new K(l[0],l[1],l[2],void 0,this._spRef):r&&!x?new K(l[0],l[1],void 0,l[2],this._spRef):x&&r?new K(l[0],l[1],l[2],l[3],this._spRef):new K(l[0],l[1],this._spRef);l.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+m.toString();this._lazyPt[m]=l}return this._lazyPt[m]}equalityTest(m){return m===this?!0:null===m||!1===m instanceof z?!1:m.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}
return z})},"esri/arcade/featureset/support/shared":function(){define("exports ../../ArcadeDate ../../../core/sql/DateOnly ../../../core/sql/TimeOnly ../../../geometry/Extent ../../../layers/support/Field ../../../chunks/datetime".split(" "),function(F,K,z,m,l,x,r){function y(p){return p instanceof Date}function w(p){return p instanceof K.ArcadeDate}function b(p){switch(p.type){case "catalog":case "csv":case "feature":case "geojson":case "oriented-imagery":case "subtype-group":case "wfs":return!0;
default:return!1}}F.FeatureServiceDatabaseType=void 0;(function(p){p[p.Standardised=0]="Standardised";p[p.StandardisedNoInterval=1]="StandardisedNoInterval";p[p.SqlServer=2]="SqlServer";p[p.Oracle=3]="Oracle";p[p.Postgres=4]="Postgres";p[p.PGDB=5]="PGDB";p[p.FILEGDB=6]="FILEGDB";p[p.NotEvaluated=7]="NotEvaluated"})(F.FeatureServiceDatabaseType||(F.FeatureServiceDatabaseType={}));F.IdState=void 0;(function(p){p[p.InFeatureSet=0]="InFeatureSet";p[p.NotInFeatureSet=1]="NotInFeatureSet";p[p.Unknown=2]=
"Unknown"})(F.IdState||(F.IdState={}));F.callback=function(p,A){return function(){try{p.apply(null,arguments)}catch(J){A.reject(J)}}};F.cloneAttributes=function(p){const A={};for(const J in p)A[J]=p[J];return A};F.cloneField=function(p){return x.fromJSON(p.toJSON())};F.convertLinearUnitsToCode=function(p){if(null==p)return null;if("number"===typeof p||"number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
F.convertSquareUnitsToCode=function(p){if(null==p)return null;if("number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};F.defaultMaxRecords=1E3;F.equalityTest=function(p,A){return p===A?!0:(y(p)||w(p))&&(y(A)||w(A))?p.getTime()===A.getTime():!1};F.errback=function(p){return function(A){p.reject(A)}};F.esriFieldToJson=function(p){return p.toJSON?p.toJSON():
p};F.extractServiceUrl=function(p){if(void 0===p)return"";p=p.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");p=p.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return p=p.split("?")[0]};F.isArcadeDate=w;F.isArcadeDateOnly=function(p){return p instanceof z.DateOnly};F.isArcadeTime=function(p){return p instanceof m.TimeOnly};F.isArray=function(p){return Array.isArray(p)};F.isBoolean=function(p){return"boolean"===typeof p};F.isDate=y;F.isLuxonDate=function(p){return p instanceof r.DateTime};F.isNumber=
function(p){return"number"===typeof p};F.isString=function(p){return"string"===typeof p||p instanceof String};F.isSupportedLayer=function(p){switch(p.type){case "catalog-footprint":case "subtype-sublayer":return!0;default:return b(p)}};F.isSupportedSourceLayer=b;F.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",
"date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",
esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",
esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};F.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};F.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",
multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};F.sameGeomType=function(p,A){return p===A||"point"===p&&"esriGeometryPoint"===A||"polyline"===p&&"esriGeometryPolyline"===A||"polygon"===p&&"esriGeometryPolygon"===A||"extent"===p&&"esriGeometryEnvelope"===
A||"multipoint"===p&&"esriGeometryMultipoint"===A||"point"===A&&"esriGeometryPoint"===p||"polyline"===A&&"esriGeometryPolyline"===p||"polygon"===A&&"esriGeometryPolygon"===p||"extent"===A&&"esriGeometryEnvelope"===p||"multipoint"===A&&"esriGeometryMultipoint"===p?!0:!1};F.shapeExtent=function(p){if(null==p)return null;switch(p.type){case "polygon":case "multipoint":case "polyline":return p.extent;case "point":return new l({xmin:p.x,ymin:p.y,xmax:p.x,ymax:p.y,spatialReference:p.spatialReference});
case "extent":return p}return null};F.stableStringify=function(p,A){A||={};"function"===typeof A&&(A={cmp:A});const J="boolean"===typeof A.cycles?A.cycles:!1,G=A.cmp&&function(k){return function(e){return function(f,g){return k({key:f,value:e[f]},{key:g,value:e[g]})}}}(A.cmp),d=[];return function f(e){e?.toJSON&&"function"===typeof e.toJSON&&(e=e.toJSON());if(void 0!==e){if("number"===typeof e)return isFinite(e)?""+e:"null";if("object"!==typeof e)return JSON.stringify(e);var g;if(Array.isArray(e)){var q=
"[";for(g=0;g<e.length;g++)g&&(q+=","),q+=f(e[g])||"null";return q+"]"}if(null===e)return"null";if(d.includes(e)){if(J)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var n=d.push(e)-1,C=Object.keys(e).sort(G?.(e));q="";for(g=0;g<C.length;g++){const a=C[g],E=f(e[a]);E&&(q&&(q+=","),q+=JSON.stringify(a)+":"+E)}d.splice(n,1);return"{"+q+"}"}}(p)};F.toEsriGeometryType=function(p){switch(p){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";
case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(F,K,z,m){function l(r){r=r.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let y="";const w=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;
for(const b of r.match(w)||[])switch(b){case "D":y+="d";break;case "DD":y+="dd";break;case "DDD":y+="o";break;case "d":y+="c";break;case "ddd":y+="ccc";break;case "dddd":y+="cccc";break;case "M":y+="L";break;case "MM":y+="LL";break;case "MMM":y+="LLL";break;case "MMMM":y+="LLLL";break;case "YY":y+="yy";break;case "Y":case "YYYY":y+="yyyy";break;case "Q":y+="q";break;case "X":case "x":y+=b;break;default:y=2<=b.length&&"["===b.slice(0,1)&&"]"===b.slice(-1)?y+`'${b.slice(1,-1)}'`:y+`'${b}'`}return y}
class x{constructor(r,y,w){this._year=r;this._month=y;this._day=w;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(r){return r instanceof x&&r.day===this.day&&r.month===this.month&&r.year===this.year}clone(){return new x(this._year,this._month,this._day)}toDateTime(r){return m.DateTime.fromObject({day:this.day,month:this.month,
year:this.year},{zone:K.createDateTimeZone(r)})}toDateTimeLuxon(r){return m.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:K.createDateTimeZone(r)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(r=null,y=!0){if(null===r||""===r)return this.toString();y&&(r=l(r));if(!r)return"";y=this.toDateTime("unknown");return K.ArcadeDate.dateTimeToArcadeDate(y).toFormat(r,{locale:z.getLocale(),
numberingSystem:"latn"})}toArcadeDate(){const r=this.toDateTime("unknown");return K.ArcadeDate.dateTimeToArcadeDate(r)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(r,y){return x.fromDateTime(this.toUTCDateTime().plus({[r]:y}))}toUTCDateTime(){return m.DateTime.utc(this.year,
this.month,this.day,0,0,0,0)}difference(r,y){switch(y.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(r.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(r.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===y?this.toUTCDateTime().diff(r.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(r.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(r.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(r.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(r.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(r.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(r.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(r){r=m.DateTime.fromMillis(r,{zone:m.FixedOffsetZone.utcInstance});
return r.isValid?x.fromParts(r.year,r.month,r.day):null}static fromSeconds(r){r=m.DateTime.fromSeconds(r,{zone:m.FixedOffsetZone.utcInstance});return r.isValid?x.fromParts(r.year,r.month,r.day):null}static fromReader(r){if(!r)return null;r=r.split("-");return 3!==r.length?null:new x(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10))}static fromParts(r,y,w){r=new x(r,y,w);return!1===r.isValid?null:r}static fromDateJS(r){return x.fromParts(r.getFullYear(),r.getMonth()+1,r.getDay())}static fromDateTime(r){return x.fromParts(r.year,
r.month,r.day)}static fromSqlTimeStampOffset(r){return this.fromDateTime(r.toDateTime())}static fromString(r,y=null){if(""===r||null===r)return null;var w=[];if(y)(y=l(y))&&w.push(y);else if(null===y||""===y)return r=m.DateTime.fromISO(r,{setZone:!0}),r.isValid?x.fromParts(r.year,r.month,r.day):null;for(const b of w)if(w=m.DateTime.fromFormat(r,y??b),w.isValid)return new x(w.year,w.month,w.day);return null}static fromNow(r="system"){r=m.DateTime.fromJSDate(new Date).setZone(K.createDateTimeZone(r));
return new x(r.year,r.month,r.day)}}F.DateOnly=x;F.standardizeDateOnlyFormat=l;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(F,K,z,m){function l(r){if(!r)return"";const y=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let w="";for(const b of r.match(y)||[])switch(b){case "SSS":w+=b;break;case "A":case "a":w+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":w+=
b;break;default:w+=`'${b}'`}return w}class x{constructor(r,y,w,b){this._hour=r;this._minute=y;this._second=w;this._millisecond=b;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(r){return r instanceof x&&r.hour===this.hour&&r.minute===this.minute&&r.second===this.second&&r.millisecond===this.millisecond}clone(){return new x(this.hour,this.minute,this.second,
this.millisecond)}isValid(){return K.isInteger(this.hour)&&K.isInteger(this.minute)&&K.isInteger(this.second)&&K.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,
"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(r=null){return null===r||""===r?this.toString():(r=l(r))?m.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(r,{locale:z.getLocale(),numberingSystem:"latn"}):
""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(r,y,w,b){r=new x(r,y,w,b);return r.isValid()?r:null}static fromReader(r){if(!r)return null;r=r.split(":");return 3!==r.length?null:new x(parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),0)}static fromMilliseconds(r){return 864E5<r||0>r?null:new x(Math.floor(r/36E5%24),Math.floor(r/6E4%60),Math.floor(r/1E3%60),Math.floor(r%1E3))}static fromDateJS(r){return new x(r.getHours(),r.getMinutes(),r.getSeconds(),
r.getMilliseconds())}static fromDateTime(r){return new x(r.hour,r.minute,r.second,r.millisecond)}static fromSqlTimeStampOffset(r){return this.fromDateTime(r.toDateTime())}static fromString(r,y=null){if(""===r||null===r)return null;const w=[];if(y)(y=l(y))&&w.push(y);else if(null===y||""===y)w.push("HH:mm:ss"),w.push("HH:mm:ss.SSS"),w.push("hh:mm:ss a"),w.push("hh:mm:ss.SSS a"),w.push("HH:mm"),w.push("hh:mm a"),w.push("H:mm"),w.push("h:mm a"),w.push("H:mm:ss"),w.push("h:mm:ss a"),w.push("H:mm:ss.SSS"),
w.push("h:mm:ss.SSS a");for(const b of w)if(y=m.DateTime.fromFormat(r,b),y.isValid)return new x(y.hour,y.minute,y.second,y.millisecond);return null}plus(r,y){switch(r){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return x.fromDateTime(this.toUTCDateTime().plus({[r]:y}))}return null}toUTCDateTime(){return m.DateTime.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(r,y){switch(y.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(r.toUTCDateTime(),
"days").days;case "months":case "month":return this.toUTCDateTime().diff(r.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===y?this.toUTCDateTime().diff(r.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(r.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(r.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(r.toUTCDateTime(),"milliseconds").milliseconds;
case "hours":case "hour":case "h":return this.toUTCDateTime().diff(r.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(r.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(r.toUTCDateTime(),"milliseconds").milliseconds}}}F.TimeOnly=x;F.standardizeTimeFormat=l;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(F,K){F.cloneGeometry=function(z){if(null==
z)return null;const m=z.clone();void 0!==z.cache._geVersion&&(m.cache._geVersion=z.cache._geVersion);return m};F.convertLinearUnitsToCode=function(z){if(null==z)return null;if("number"===typeof z)return z;z=z.toLowerCase();z=z.replaceAll(/\s/g,"");z=z.replaceAll("-","");switch(z){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};F.convertSquareUnitsToCode=function(z){if(null==z)return null;if("number"===typeof z)return z;z=z.toLowerCase();z=z.replaceAll(/\s/g,"");z=z.replaceAll("-","");switch(z){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;
case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};
F.isInteger=function(z){return"number"===typeof z&&isFinite(z)&&Math.floor(z)===z};F.sameGeomType=function(z,m){return z===m||"point"===z&&"esriGeometryPoint"===m||"polyline"===z&&"esriGeometryPolyline"===m||"polygon"===z&&"esriGeometryPolygon"===m||"extent"===z&&"esriGeometryEnvelope"===m||"multipoint"===z&&"esriGeometryMultipoint"===m||"point"===m&&"esriGeometryPoint"===z||"polyline"===m&&"esriGeometryPolyline"===z||"polygon"===m&&"esriGeometryPolygon"===z||"extent"===m&&"esriGeometryEnvelope"===
z||"multipoint"===m&&"esriGeometryMultipoint"===z?!0:!1};F.shapeExtent=function(z){if(null==z)return null;switch(z.type){case "polygon":case "multipoint":case "polyline":return z.extent;case "point":return new K({xmin:z.x,ymin:z.y,xmax:z.x,ymax:z.y,spatialReference:z.spatialReference});case "extent":return z}return null};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(F,K,z){function m(p=z.getLocale()){p=
p.toLowerCase();let A=p in y;if(!A){const k=p.split("-");1<k.length&&k[0]in y&&(p=k[0],A=!0);A||(p="en")}const [J,G,d="#,##0.###"]=y[p];return{decimal:J,group:G,pattern:d}}function l(p){p=p||{};var A=m(p.locale);const J=p.pattern||A.pattern,G=A.group,d=A.decimal;let k=1;if(J.includes("%"))k/=100;else if(J.includes("\u2030"))k/=1E3;else if(J.includes("\u00a4"))throw Error("currency notation not supported");A=J.split(";");1===A.length&&A.push("-"+A[0]);return{regexp:b(A,e=>{e="(?:"+K.escapeRegExpString(e,
".")+")";return e.replace(w,f=>{const g={signed:!1,separator:p.strict?G:[G,""],fractional:p.fractional,decimal:d,exponent:!1};f=f.split(".");let q=p.places;1===f.length&&1!==k&&(f[1]="###");1===f.length||0===q?g.fractional=!1:(void 0===q&&(q=p.pattern?f[1].lastIndexOf("0")+1:Infinity),q&&null==p.fractional&&(g.fractional=!0),!p.places&&+q<f[1].length&&(q+=","+f[1].length),g.places=q);f=f[0].split(",");1<f.length&&(g.groupSize=f.pop().length,1<f.length&&(g.groupSize2=f.pop().length));return"("+x(g)+
")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:G,decimal:d,factor:k}}function x(p){p=p||{};"places"in p||(p.places=Infinity);"string"!==typeof p.decimal&&(p.decimal=".");"fractional"in p&&!String(p.places).startsWith("0")||(p.fractional=[!0,!1]);"exponent"in p||(p.exponent=[!0,!1]);"eSigned"in p||(p.eSigned=[!0,!1]);var A=r(p);const J=b(p.fractional,d=>{let k="";d&&0!==p.places&&(k="\\"+p.decimal,k=Infinity===p.places?"(?:"+k+"\\d+)?":k+("\\d{"+p.places+"}"));return k},!0),G=b(p.exponent,d=>
d?"([eE]"+r({signed:p.eSigned})+")":"");A+=J;J&&(A="(?:(?:"+A+")|(?:"+J+"))");return A+G}function r(p){p=p||{};"signed"in p||(p.signed=[!0,!1]);"separator"in p?"groupSize"in p||(p.groupSize=3):p.separator="";const A=b(p.signed,G=>G?"[-+]":"",!0),J=b(p.separator,G=>{if(!G)return"(?:\\d+)";G=K.escapeRegExpString(G);" "===G?G="\\s":"\u00a0"===G&&(G="\\s\\xa0");const d=p.groupSize,k=p.groupSize2;return k?(G="(?:0|[1-9]\\d{0,"+(k-1)+"}(?:["+G+"]\\d{"+k+"})*["+G+"]\\d{"+d+"})",0<d-k?"(?:"+G+"|(?:0|[1-9]\\d{0,"+
(d-1)+"}))":G):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+G+"]\\d{"+d+"})*)"},!0);return A+J}const y={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],
ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},w=/[#0,]*[#0](?:\.0*#*)?/,b=(p,A,J)=>{if(!Array.isArray(p))return A(p);const G=[];for(let d=0;d<p.length;d++)G.push(A(p[d]));p=G.join("|");return"("+(J?"?:":"")+p+")"};F._parseInfo=l;F.format=
function(p,A){A={...A};var J=m(A.locale);A.customs=J;J=A.pattern||J.pattern;if(isNaN(p)||Infinity===Math.abs(p))return null;var G=p;var d=A||{};var k=d.customs.group,e=d.customs.decimal;J=J.split(";");p=J[0];A=J[0>G?1:0]||"-"+p;if(A.includes("%"))G*=100;else if(A.includes("\u2030"))G*=1E3;else{if(A.includes("\u00a4"))throw Error("currency notation not supported");if(A.includes("E"))throw Error("exponential notation not supported");}J=w;var f=p.match(J);if(!f)throw Error("unable to find a number expression in pattern: "+
A);!1===d.fractional&&(d.places=0);p=A.replace;f=f[0];d=d={decimal:e,group:k,places:d.places,round:d.round};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);e=f.split(".");var g="string"===typeof d.places&&d.places.indexOf(",");f=d.places;g?f=d.places.slice(g+1):0<=+f||(f=(e[1]||[]).length);0>d.round||(G=Number(G.toFixed(Number(f))));k=String(Math.abs(G)).split(".");G=k[1]||"";e[1]||d.places?(g&&(d.places=d.places.slice(0,Math.max(0,g))),g=void 0!==d.places?d.places:e[1]&&e[1].lastIndexOf("0")+
1,+g>G.length&&(k[1]=G.padEnd(Number(g),"0")),+f<G.length&&(k[1]=G.slice(0,Math.max(0,Number(f))))):k[1]&&k.pop();G=e[0].replace(",","");f=G.indexOf("0");-1!==f&&(f=G.length-f,f>k[0].length&&(k[0]=k[0].padStart(f,"0")),G.includes("#")||(k[0]=k[0].slice(-f)));G=e[0].lastIndexOf(",");let q;if(-1!==G){var n=e[0].length-G-1;e=e[0].slice(0,G);G=e.lastIndexOf(",");-1!==G&&(q=e.length-G-1)}e=[];for(G=k[0];G;)f=G.length-n,e.push(0<f?G.slice(Math.max(0,f)):G),G=0<f?G.slice(0,f):"",q&&(n=q,q=void 0);k[0]=e.reverse().join(d.group||
",");n=k.join(d.decimal||".");return p.call(A,J,n)};F.getCustoms=m;F.parse=function(p,A){A=l(A);p=(new RegExp("^"+A.regexp+"$")).exec(p);if(!p)return NaN;let J=p[1];if(!p[1]){if(!p[2])return NaN;J=p[2];A.factor*=-1}J=J.replaceAll(new RegExp("["+A.group+"\\s\\xa0]","g"),"").replace(A.decimal,".");return Number(J)*A.factor};F.regexp=function(p){return l(p).regexp};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("./ArcadeDate ./deepClone ./Dictionary ./executionError ./ImmutableArray ../chunks/languageUtils ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../layers/support/FieldsIndex".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J){class G{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._fieldTypesFixed=!0;this.contextTimeZone=this.fieldsIndex=null;this.immutable=!0;this._fieldsToFixDataTypes=null;this.immutable=!0}static createFromGraphic(d,k){const e=new G;e.contextTimeZone=k??null;e._geometry=null!=d.geometry?d.geometry:null;e.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;
d._sourceLayer?(e._layer=d._sourceLayer,e._fieldTypesFixed=!1):d._layer?(e._layer=d._layer,e._fieldTypesFixed=!1):d.layer&&"fields"in d.layer?(e._layer=d.layer,e._fieldTypesFixed=!1):d.sourceLayer&&"fields"in d.sourceLayer&&(e._layer=d.sourceLayer,e._fieldTypesFixed=!1);e._layer&&!e._fieldTypesFixed&&(e.fieldsIndex=this.hydrateFieldsIndex(e._layer));return e}static createFromArcadeFeature(d){if(d instanceof G){var k=new G;k._fieldTypesFixed=d._fieldTypesFixed;k.attributes=d.attributes;k._geometry=
d._geometry;k._optimizedGeomDefinition=d._optimizedGeomDefinition;d._layer&&(k._layer=d._layer);k.fieldsIndex=d.fieldsIndex;k.contextTimeZone=d.contextTimeZone;return k}k={};for(const e of d.keys())k[e]=d.field(e);return G.createFromGraphicLikeObject(d.geometry(),k,d.fullSchema(),d.contextTimeZone)}static createFromOptimisedFeature(d,k,e){const f=new G;f._geometry=d.geometry?{geometry:d.geometry}:null;f._optimizedGeomDefinition=e;f.attributes=d.attributes||{};f._layer=k;f._fieldTypesFixed=!1;return f}static createFromArcadeDictionary(d,
k){const e=new G;e.attributes=d.field("attributes");null!==e.attributes?e.attributes instanceof z?(e.attributes=e.attributes.attributes,null===e.attributes&&(e.attributes={})):e.attributes={}:e.attributes={};e._geometry=d.field("geometry");null!==e._geometry&&(e._geometry instanceof z?e._geometry=G.parseGeometryFromDictionary(e._geometry,k):e._geometry instanceof w||(e._geometry=null));return e}static createFromGraphicLikeObject(d,k,e=null,f){const g=new G;g.contextTimeZone=f??null;null===k&&(k={});
g.attributes=k;g._geometry=null!=d?d:null;g._layer=e;g._layer&&(g._fieldTypesFixed=!1,g.fieldsIndex=this.hydrateFieldsIndex(g._layer));return g}static hydrateFieldsIndex(d){return null===d?null:x.isFeatureSet(d)?d.getFieldsIndex():d.fieldsIndex?d.fieldsIndex:J.fromLayerJSON({datesInUnknownTimezone:d.datesInUnknownTimezone,fields:d.fields,timeInfo:d.timeInfo,editFieldsInfo:d.editFieldsInfo,dateFieldsTimeReference:d.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(d,
k,e=null){null===k&&(k={});this.attributes=k;this._geometry=d??null;this._fieldTypesFixed=(this._layer=e)?!1:!0}castToText(d=!1){let k="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const e in this.attributes){""!==k&&(k+=",");const f=this.attributes[e];null==f?k+=JSON.stringify(e)+":null":x.isBoolean(f)||x.isNumber(f)||x.isString(f)?k+=JSON.stringify(e)+":"+JSON.stringify(f):f instanceof w?k+=JSON.stringify(e)+":"+x.toStringExplicit(f):f instanceof y.TimeOnly||f instanceof r.DateOnly?k+=
`${JSON.stringify(e)}:${JSON.stringify(f.toString())}`:f instanceof l?k+=JSON.stringify(e)+":"+x.toStringExplicit(f,null,d):Array.isArray(f)?k+=JSON.stringify(e)+":"+x.toStringExplicit(f,null,d):f instanceof F.ArcadeDate?k=d?k+(JSON.stringify(e)+":"+JSON.stringify(f.getTime())):k+(JSON.stringify(e)+":"+f.stringify()):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(k+=JSON.stringify(e)+":"+f.castToText(d))}return'{"geometry":'+(null===this.geometry()?"null":x.toStringExplicit(this.geometry()))+
',"attributes":{'+k+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&0<this._fieldsToFixDataTypes?.length)this._fixAllFields(this._fieldsToFixDataTypes);else{var d=[],k=this._layer.fields;for(let e=0;e<k.length;e++){const {name:f,type:g}=k[e];switch(g){case "date":case "esriFieldTypeDate":d.push({field:f,dataType:"date"});break;case "date-only":case "esriFieldTypeDateOnly":d.push({field:f,dataType:"date-only"});break;case "time-only":case "esriFieldTypeTimeOnly":d.push({field:f,dataType:"time-only"});
break;case "timestamp-offset":case "esriFieldTypeTimestampOffset":d.push({field:f,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=d;0<d.length&&this._fixAllFields(d)}this._fieldTypesFixed=!0}isUnknownDateTimeField(d){return"unknown"===this.fieldsIndex?.getTimeZone(d)}_fixAllFields(d){this.attributes={...this.attributes};const k=this.contextTimeZone??"system";for(let g=0;g<d.length;g++){var e=d[g].field,f=d[g].dataType;let q=this.attributes[e];if(void 0===q)for(const n in this.attributes){if(n.toLowerCase()===
e.toLowerCase()){q=this.attributes[n];if(null!==q){if("time-only"===f){x.isTime(q)||(this.attributes[n]=y.TimeOnly.fromReader(q.toString()));break}if("date-only"===f){x.isDateOnly(q)||(this.attributes[n]=r.DateOnly.fromReader(q.toString()));break}if("timestamp-offset"===f){x.isDate(q)||(this.attributes[n]=F.ArcadeDate.fromReaderAsTimeStampOffset(q.toString()));break}e=this.isUnknownDateTimeField(n);q instanceof Date?this.attributes[n]=e?F.ArcadeDate.unknownDateJSToArcadeDate(q):F.ArcadeDate.dateJSAndZoneToArcadeDate(q,
k):x.isDate(q)||(this.attributes[n]=e?F.ArcadeDate.unknownEpochToArcadeDate(q):F.ArcadeDate.epochToArcadeDate(q,k))}break}}else null!==q&&("time-only"===f?x.isTime(q)?this.attributes[e]=q:this.attributes[e]=y.TimeOnly.fromReader(q.toString()):"date-only"===f?x.isDateOnly(q)?this.attributes[e]=q:this.attributes[e]=r.DateOnly.fromReader(q.toString()):"timestamp-offset"===f?x.isDate(q)?this.attributes[e]=q:this.attributes[e]=F.ArcadeDate.fromReaderAsTimeStampOffset(q.toString()):(f=this.isUnknownDateTimeField(e),
x.isDate(q)?this.attributes[e]=q:this.attributes[e]=q instanceof Date?f?F.ArcadeDate.unknownDateJSToArcadeDate(q):F.ArcadeDate.dateJSAndZoneToArcadeDate(q,k):f?F.ArcadeDate.unknownEpochToArcadeDate(q):F.ArcadeDate.epochToArcadeDate(q,k)))}}geometry(){if(null===this._geometry||this._geometry instanceof w)return this._geometry;this._optimizedGeomDefinition?(this._geometry=p.fromJSON(A.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=p.fromJSON(this._geometry);return this._geometry}field(d){this._fieldTypesFixed||this._fixFieldTypes();var k=this.attributes[d];if(void 0!==k)return k;k=d.toLowerCase();for(const e in this.attributes)if(e.toLowerCase()===k)return this.attributes[e];if(this._hasFieldDefinition(k))return null;throw new m.ArcadeExecutionError(null,m.ExecutionErrorCodes.FieldNotFound,null,{key:d});}_hasFieldDefinition(d){if(null===
this._layer)return!1;for(let k=0;k<this._layer.fields.length;k++)if(this._layer.fields[k].name.toLowerCase()===d)return!0;return!1}setField(d,k){if(this.immutable)throw new m.ArcadeExecutionError(null,m.ExecutionErrorCodes.Immutable,null);k instanceof Date&&(k=this.isUnknownDateTimeField(d)?F.ArcadeDate.unknownDateJSToArcadeDate(k):F.ArcadeDate.dateJSToArcadeDate(k));if(!1===x.isSimpleType(k))throw new m.ArcadeExecutionError(null,m.ExecutionErrorCodes.TypeNotAllowedInFeature,null);const e=d.toLowerCase();
if(void 0===this.attributes[d])for(const f in this.attributes)if(f.toLowerCase()===e){this.attributes[f]=k;return}this.attributes[d]=k}hasField(d){const k=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(const e in this.attributes)if(e.toLowerCase()===k)return!0;return this._hasFieldDefinition(k)?!0:!1}keys(){let d=[];const k={};for(var e in this.attributes)d.push(e),k[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){const f=this._layer.fields[e];1!==k[f.name.toLowerCase()]&&
d.push(f.name)}return d=d.sort()}static parseGeometryFromDictionary(d,k){d=G._convertDictionaryToJson(d,!0);void 0!==d.hasm&&(d.hasM=d.hasm,delete d.hasm);void 0!==d.hasz&&(d.hasZ=d.hasz,delete d.hasz);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);d.spatialReference||(d.spatialReference=k);void 0!==d.rings&&(d.rings=this._fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasZ));void 0!==d.paths&&(d.paths=this._fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));
void 0!==d.points&&(d.points=this._fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return p.fromJSON(d)}static _fixPathArrays(d,k,e){const f=[];if(Array.isArray(d))for(var g=0;g<d.length;g++)f.push(this._fixPointArrays(d[g],k,e));else if(d instanceof l)for(g=0;g<d.length();g++)f.push(this._fixPointArrays(d.get(g),k,e));return f}static _fixPointArrays(d,k,e){const f=[];if(Array.isArray(d))for(var g=0;g<d.length;g++){var q=d[g];q instanceof b?k&&e?f.push([q.x,q.y,q.z,q.m]):k?f.push([q.x,q.y,q.z]):
e?f.push([q.x,q.y,q.m]):f.push([q.x,q.y]):q instanceof l?f.push(q.toArray()):f.push(q)}else if(d instanceof l)for(g=0;g<d.length();g++)q=d.get(g),q instanceof b?k&&e?f.push([q.x,q.y,q.z,q.m]):k?f.push([q.x,q.y,q.z]):e?f.push([q.x,q.y,q.m]):f.push([q.x,q.y]):q instanceof l?f.push(q.toArray()):f.push(q);return f}static _convertDictionaryToJson(d,k=!1){const e={};for(const f in d.attributes){let g=d.attributes[f];g instanceof z&&(g=G._convertDictionaryToJson(g));k?e[f.toLowerCase()]=g:e[f]=g}return e}static parseAttributesFromDictionary(d){const k=
{};for(const e in d.attributes){const f=d.attributes[e];if(x.isSimpleType(f))k[e]=f;else throw new m.ArcadeExecutionError(null,m.ExecutionErrorCodes.InvalidParameter,null);}return k}static fromJson(d,k){let e=null;null!==d.geometry&&void 0!==d.geometry&&(e=p.fromJSON(d.geometry));const f={};if(null!==d.attributes&&void 0!==d.attributes)for(const g in d.attributes){const q=d.attributes[g];if(null===q)f[g]=q;else if(x.isString(q)||x.isNumber(q)||x.isBoolean(q)||x.isDate(q)||x.isTime(q)||x.isDateOnly(q))f[g]=
q;else throw new m.ArcadeExecutionError(null,m.ExecutionErrorCodes.InvalidParameter,null);}return G.createFromGraphicLikeObject(e,f,null,k??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const d=this._layer.gdbVersion;return void 0===d?"":""===d&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":d}castAsJson(d){const k={attributes:{},geometry:!0===d?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const e in this.attributes){const f=this.attributes[e];
void 0!==f&&(k.attributes[e]=x.castAsJson(f,d))}return k}async castAsJsonAsync(d,k){return this.castAsJson(k)}}K.configureDeepClone(G);return G})},"esri/arcade/treeAnalysis":function(){define(["exports","./arcadeEnvironment"],function(F,K){function z(d){return"string"===typeof d||d instanceof String}function m(d,k){if(d)for(const e of d)l(e,k)}function l(d,k){if(d&&!1!==k(d))switch(d.type){case "ImportDeclaration":m(d.specifiers,k);l(d.source,k);break;case "ExportNamedDeclaration":l(d.declaration,
k);break;case "ArrayExpression":m(d.elements,k);break;case "AssignmentExpression":case "BinaryExpression":l(d.left,k);l(d.right,k);break;case "BlockStatement":m(d.body,k);break;case "Program":m(d.body,k);break;case "CallExpression":l(d.callee,k);m(d.arguments,k);break;case "ExpressionStatement":l(d.expression,k);break;case "ForInStatement":l(d.left,k);l(d.right,k);l(d.body,k);break;case "ForStatement":l(d.init,k);l(d.test,k);l(d.update,k);l(d.body,k);break;case "WhileStatement":l(d.test,k);l(d.body,
k);break;case "FunctionDeclaration":l(d.id,k);m(d.params,k);l(d.body,k);break;case "IfStatement":l(d.test,k);l(d.consequent,k);l(d.alternate,k);break;case "LogicalExpression":l(d.left,k);l(d.right,k);break;case "MemberExpression":l(d.object,k);l(d.property,k);break;case "ObjectExpression":m(d.properties,k);break;case "Property":l(d.key,k);l(d.value,k);break;case "ReturnStatement":l(d.argument,k);break;case "UnaryExpression":l(d.argument,k);break;case "UpdateExpression":l(d.argument,k);break;case "VariableDeclaration":m(d.declarations,
k);break;case "VariableDeclarator":l(d.id,k);l(d.init,k);break;case "TemplateLiteral":m(d.expressions,k),m(d.quasis,k)}}function x(d,k){let e=!1;const f=k.toLowerCase();l(d,g=>{if(e)return!1;"Identifier"===g.type&&g.name&&g.name.toLowerCase()===f&&(e=!0);return!0});return e}function r(d){const k=[];l(d,e=>{"ImportDeclaration"===e.type&&e.source&&e.source.value&&k.push({libname:K.toSymbolId(e.specifiers[0].local),source:e.source.value});return!0});return k}function y(d){const k=[];l(d,e=>{"CallExpression"===
e.type&&"Identifier"===e.callee.type&&k.push(e.callee.name.toLowerCase());return!0});return k}const w={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,
max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,
max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,
max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,
max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},
distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,
max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,
max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},b={functionDefinitions:new Map,
constantDefinitions:new Map},p={functionDefinitions:new Map,constantDefinitions:new Map};for(var A of["pi","infinity"])p.constantDefinitions.set(A,{type:"constant"}),b.constantDefinitions.set(A,{type:"constant"});p.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});
b.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const d in w)A=w[d],p.functionDefinitions.set(d,{overloads:[{type:"function",parametersInfo:{min:A.min,max:A.max}}]}),b.functionDefinitions.set(d,{overloads:[{type:"function",parametersInfo:{min:A.min,
max:A.max}}]});const J=new Set("featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem getfeaturesetinfo filterbysubtypecode knowledgegraphbyportalitem querygraph".split(" ")),G=new Set("disjoint intersects touches crosses within contains overlaps equals relate intersection nearestvertex nearestcoordinate union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart pointtocoordinate distancetocoordinate measuretocoordinate".split(" "));
F.addFunctionDeclaration=function(d,k){k="sync"===k?b:p;k.functionDefinitions.has(d.name.toLowerCase())?k.functionDefinitions.get(d.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:d.min,max:d.max}}):k.functionDefinitions.set(d.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:d.min,max:d.max}}]})};F.extractFunctionDeclaration=function(d,k){const e=[];if(void 0!==k.params&&null!==k.params)for(let f=0;f<k.params.length;f++)e.push("any");return{name:d,return:"any",
params:e}};F.findExpectedFieldLiterals=function(d){const k=[];l(d,e=>{if("CallExpression"===e.type){if("Identifier"===e.callee.type&&"expects"===e.callee.name.toLowerCase()){var f="";for(let g=0;g<(e.arguments||[]).length;g++)0===g?"Identifier"===e.arguments[g].type&&(f=e.arguments[g].name.toLowerCase()):f&&"Literal"===e.arguments[g].type&&z(e.arguments[g].value)&&k.push(f+"."+e.arguments[g].value.toLowerCase());return!1}if("Identifier"===e.callee.type&&["domainname","domaincode","domain","haskey"].includes(e.callee.name.toLowerCase())&&
2<=e.arguments.length)return f="","Identifier"===e.arguments[0].type&&(f=e.arguments[0].name.toLowerCase()),f&&"Literal"===e.arguments[1].type&&z(e.arguments[1].value)&&k.push(f+"."+e.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==e.type||"Identifier"!==e.object.type)return!0;!1===e.computed&&e.object&&e.object.name&&e.property&&"Identifier"===e.property.type&&e.property.name?k.push(e.object.name.toLowerCase()+"."+e.property.name.toLowerCase()):e.object&&e.object.name&&e.property&&"Literal"===
e.property.type&&"string"===typeof e.property.value&&k.push(e.object.name.toLowerCase()+"."+e.property.value?.toString().toLowerCase());return!1});return k};F.findFieldLiterals=function(d){const k=[];l(d,e=>{if("MemberExpression"!==e.type||"Identifier"!==e.object.type)return!0;!1===e.computed&&e.object&&e.object.name&&e.property&&"Identifier"===e.property.type&&e.property.name?k.push(e.object.name.toLowerCase()+"."+e.property.name.toLowerCase()):e.object&&e.object.name&&e.property&&"Literal"===e.property.type&&
"string"===typeof e.property.value&&k.push(e.object.name.toLowerCase()+"."+e.property.value?.toString().toLowerCase());return!1});return k};F.findFunctionCalls=y;F.findModuleImports=r;F.findScriptDependencies=function(d,k=[]){let e=null;if(void 0===d.usesFeatureSet){null===e&&(e=y(d));d.usesFeatureSet=!1;for(let f=0;f<e.length;f++)J.has(e[f])&&(d.usesFeatureSet=!0,d.isAsync=!0);if(!1===d.usesFeatureSet&&k&&0<k.length)for(const f of k)if(x(d,f)){d.usesFeatureSet=!0;d.isAsync=!0;break}}void 0===d.usesModules&&
(d.usesModules=!1,0<r(d).length&&(d.usesModules=!0));if(void 0===d.usesGeometry)for(d.usesGeometry=!1,null===e&&(e=y(d)),k=0;k<e.length;k++)G.has(e[k])&&(d.usesGeometry=!0)};F.fullArcadeApiAsync=p;F.fullArcadeApiSync=b;F.referencesFunction=function(d,k){let e=!1;const f=k.toLowerCase();l(d,g=>e?!1:"CallExpression"===g.type&&"Identifier"===g.callee.type&&g.callee.name&&g.callee.name.toLowerCase()===f?(e=!0,!1):!0);return e};F.referencesMember=x;F.scriptUsesFeatureSet=function(d){d=y(d);for(let k=0;k<
d.length;k++)if(J.has(d[k]))return!0;return!1};F.walk=l;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/array":function(){define("exports ../arcade/deepClone ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(F,K,z,m,l,x){function r(w){function b(d,k,e){if(d instanceof m)return d.toArray();if(l.isArray(d))return d;throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.InvalidParameter,e);}function p(d,k){var e=
d.length,f=Math.floor(e/2);if(0===e)return[];if(1===e)return[d[0]];var g=p(d.slice(0,f),k);d=p(d.slice(f,e),k);for(e=[];0<g.length||0<d.length;)0<g.length&&0<d.length?(f=k(g[0],d[0]),isNaN(f)&&(f=0),0>=f?(e.push(g[0]),g=g.slice(1)):(e.push(d[0]),d=d.slice(1))):0<g.length?(e.push(g[0]),g=g.slice(1)):0<d.length&&(e.push(d[0]),d=d.slice(1));return e}async function A(d,k){const e=d.length,f=Math.floor(e/2);if(0===e)return[];if(1===e)return[d[0]];d=[await A(d.slice(0,f),k),await A(d.slice(f,e),k)];return J(d[0],
d[1],k,[])}async function J(d,k,e,f){if(0<d.length||0<k.length){if(0<d.length&&0<k.length){let g=await e(d[0],k[0]);isNaN(g)&&(g=1);0>=g?(f.push(d[0]),d=d.slice(1)):(f.push(k[0]),k=k.slice(1));return J(d,k,e,f)}if(0<d.length)return f.push(d[0]),d=d.slice(1),J(d,k,e,f);f.push(k[0]);k=k.slice(1);return J(d,k,e,f)}return f}function G(d,k,e,f){l.pcCheck(e,1,2,d,k);let g=e[0];l.isImmutableArray(g)&&(g=g.toArray());if(!1===l.isArray(g))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,
k);if(1<e.length){if(!1===l.isFunctionParameter(e[1]))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);var q=g;const n=e[1].createFunction(d);return f?A(q,n):q=p(q,(C,a)=>n(C,a))}d=g;if(0===d.length)return[];e={};for(f=0;f<d.length;f++)k=l.getType(d[f]),""!==k&&(e[k]=!0);if(!0===e.Array||!0===e.Dictionary||!0===e.Feature||!0===e.Point||!0===e.Polygon||!0===e.Polyline||!0===e.Multipoint||!0===e.Extent||!0===e.Function)return d.slice();f=0;k="";for(q in e)f++,k=q;return d=
1<f||"String"===k?p(d,(n,C)=>{if(null===n||void 0===n||n===l.voidOperation)return null===C||void 0===C||C===l.voidOperation?0:1;if(null===C||void 0===C||C===l.voidOperation)return-1;n=l.toString(n);C=l.toString(C);return n<C?-1:n===C?0:1}):"Number"===k?p(d,(n,C)=>n-C):"Boolean"===k?p(d,(n,C)=>n===C?0:C?-1:1):"Date"===k?p(d,(n,C)=>C-n):d.slice()}w.functions.array=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,0,2,d,k);if(0===g.length||1===g.length&&null===g[0])return[];if(l.isArray(g[0])){if(2===
g.length&&!1===l.isBoolean(g[1]))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);return!0===l.defaultUndefined(g[1],!1)?K.deepClone(g[0]):g[0].slice()}if(l.isImmutableArray(g[0])){if(2===g.length&&!1===l.isBoolean(g[1]))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);return!0===l.defaultUndefined(g[1],!1)?K.deepClone(g[0]):g[0].toArray().slice()}e=l.toNumber(g[0]);if(isNaN(e)||!1===l.isInteger(e))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,
k);g=l.defaultUndefined(g[1],null);e=Array(e);e.fill(g);return e})};w.functions.front=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,1,1,d,k);if(l.isImmutableArray(g[0])){if(0>=g[0].length())throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);return g[0].get(0)}if(l.isArray(g[0])){if(0>=g[0].length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);return g[0][0]}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);
})};w.functions.back=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,1,1,d,k);if(l.isImmutableArray(g[0])){if(0>=g[0].length())throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);return g[0].get(g[0].length()-1)}if(l.isArray(g[0])){if(0>=g[0].length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);return g[0][g[0].length-1]}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.push=function(d,k){return w.standardFunction(d,
k,(e,f,g)=>{l.pcCheck(g,1,2,d,k);if(l.isArray(g[0]))return g[0][g[0].length]=g[1],g[0].length;throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.pop=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,1,1,d,k);if(l.isArray(g[0])){if(0>=g[0].length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);e=g[0][g[0].length-1];--g[0].length;return e}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};
w.functions.erase=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,k);if(l.isArray(g[0])){e=l.toNumber(g[1]);if(isNaN(e)||!1===l.isInteger(e))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);g=g[0];if(0>=g.length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);0>e&&(e=g.length+e);if(0>e)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);if(e>=g.length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,
k);g.splice(e,1);return l.voidOperation}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.insert=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,3,3,d,k);if(l.isArray(g[0])){e=l.toNumber(g[1]);if(isNaN(e)||!1===l.isInteger(e))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);f=g[2];g=g[0];if(e>g.length)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.OutOfBounds,k);if(0>e&&e<-1*g.length)throw new z.ArcadeExecutionError(d,
z.ExecutionErrorCodes.OutOfBounds,k);if(e===g.length)return g[e]=f,l.voidOperation;g.splice(e,0,f);return l.voidOperation}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.resize=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,3,d,k);if(l.isArray(g[0])){f=l.toNumber(g[1]);if(isNaN(f)||!1===l.isInteger(f))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);if(0>f)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,
k);e=l.defaultUndefined(g[2],null);g=g[0];if(g.length>=f)return g.length=f,l.voidOperation;const q=g.length;g.length=f;for(f=q;f<g.length;f++)g[f]=e;return l.voidOperation}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.includes=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,k);if(l.isArray(g[0])){const q=g[1];return g[0].some(n=>l.equalityTest(n,q))?!0:!1}if(l.isImmutableArray(g[0])){const q=g[1];return g[0].toArray().some(n=>
l.equalityTest(n,q))?!0:!1}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.slice=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,1,3,d,k);if(l.isArray(g[0])){e=l.toNumber(l.defaultUndefined(g[1],0));f=l.toNumber(l.defaultUndefined(g[2],g[0].length));if(isNaN(e)||!1===l.isInteger(e))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);if(isNaN(f)||!1===l.isInteger(f))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,
k);return g[0].slice(e,f)}if(l.isImmutableArray(g[0])){e=g[0];f=l.toNumber(l.defaultUndefined(g[1],0));g=l.toNumber(l.defaultUndefined(g[2],e.length()));if(isNaN(f)||!1===l.isInteger(f))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);if(isNaN(g)||!1===l.isInteger(g))throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);return e.toArray().slice(f,g)}throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.splice=
function(d,k){return w.standardFunction(d,k,(e,f,g)=>{e=[];for(f=0;f<g.length;f++)l.isArray(g[f])?e.push(...g[f]):l.isImmutableArray(g[f])?e.push(...g[f].toArray()):e.push(g[f]);return e})};w.functions.top=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,k);if(l.isArray(g[0]))return l.toNumber(g[1])>=g[0].length?g[0].slice():g[0].slice(0,l.toNumber(g[1]));if(l.isImmutableArray(g[0]))return l.toNumber(g[1])>=g[0].length()?g[0].slice():g[0].slice(0,l.toNumber(g[1]));throw new z.ArcadeExecutionError(d,
z.ExecutionErrorCodes.InvalidParameter,k);})};w.functions.first=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,1,1,d,k);return l.isArray(g[0])?0===g[0].length?null:g[0][0]:l.isImmutableArray(g[0])?0===g[0].length()?null:g[0].get(0):null})};"sync"===w.mode&&(w.functions.sort=function(d,k){return w.standardFunction(d,k,(e,f,g)=>G(d,f,g,!1))},w.functions.any=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(f=
e(q),l.isBoolean(f)&&!0===f)return!0;return!1})},w.functions.all=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(!0!==e(q))return!1;return!0})},w.functions.none=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(!0===e(q))return!1;return!0})},w.functions.reduce=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,3,
d,f);const q=g[1].createFunction(d);e=b(g[0],d,f);return 2===g.length?0===e.length?null:e.reduce((n,C)=>{n=q(n,C);return n=void 0!==n&&n!==l.voidOperation?n:null}):e.reduce((n,C)=>{n=q(n,C);return n=void 0!==n&&n!==l.voidOperation?n:null},g[2])})},w.functions.map=function(d,k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);g=b(g[0],d,f);f=[];for(const q of g)g=e(q),void 0!==g&&g!==l.voidOperation?f.push(g):f.push(null);return f})},w.functions.filter=function(d,
k){return w.standardFunction(d,k,(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);g=[];for(const q of f)!0===e(q)&&g.push(q);return g})});"async"===w.mode&&(w.functions.sort=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>G(d,f,g,!0))},w.functions.any=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(f=await e(q),g=null,g=x.isPromiseLike(g)?await f:f,l.isBoolean(g)&&!0===
g)return!0;return!1})},w.functions.all=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(f=await e(q),g=null,g=x.isPromiseLike(g)?await f:f,!0!==g)return!1;return!0})},w.functions.none=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);f=b(g[0],d,f);for(const q of f)if(f=await e(q),g=null,g=x.isPromiseLike(g)?await f:f,!0===g)return!1;return!0})},
w.functions.filter=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);g=b(g[0],d,f);f=[];for(const q of g){g=await e(q);let n=null;n=x.isPromiseLike(n)?await g:g;!0===n&&f.push(q)}return f})},w.functions.reduce=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,3,d,f);const q=g[1].createFunction(d);e=b(g[0],d,f);if(2<g.length)g=l.defaultUndefined(g[2],null),g=e.reduce(async(n,C)=>{n=await n;if(void 0===n||n===l.voidOperation)n=
null;return q(n,C)},Promise.resolve(g));else{if(0===e.length)return null;g=e.reduce(async(n,C,a)=>{if(1>=a)return q(n,C);n=await n;if(void 0===n||n===l.voidOperation)n=null;return q(n,C)})}return g.then(n=>void 0!==n&&n!==l.voidOperation?n:null)})},w.functions.map=function(d,k){return w.standardFunctionAsync(d,k,async(e,f,g)=>{l.pcCheck(g,2,2,d,f);e=g[1].createFunction(d);g=b(g[0],d,f);f=[];for(const q of g){g=await e(q);let n=null;n=x.isPromiseLike(n)?await g:g;void 0!==n&&n!==l.voidOperation?f.push(n):
f.push(null)}return f})})}const y=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:r},Symbol.toStringTag,{value:"Module"}));F.ArrayFunctions=y;F.registerFunctions=r})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../executionError ../../chunks/languageUtils ../../core/sql/DateOnly ../../core/sql/TimeOnly ../../intl/locale ../../chunks/datetime".split(" "),function(F,K,z,m,l,x,r,y){function w(G){return null===G?G:!1===G.isValid?null:G}function b(G,d){return""===
G||"default"===G.toLowerCase().trim()?m.defaultTimeZone(d):"z"===G||"Z"===G?"UTC":G}function p(G,d){return m.isDateOnly(G)?G.toArcadeDate():m.toDate(G,m.defaultTimeZone(d))}const A=[0,31,59,90,120,151,181,212,243,273,304,334],J=[0,31,60,91,121,152,182,213,244,274,305,335];F.registerFunctions=function(G,d){G.today=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,0,0,k,e);f=new Date;f.setHours(0,0,0,0);return K.ArcadeDate.dateJSAndZoneToArcadeDate(f,m.defaultTimeZone(k))})};G.time=function(k,e){return d(k,
e,(f,g,q)=>{m.pcCheck(q,0,4,k,e);switch(q.length){case 0:return f=K.ArcadeDate.nowToArcadeDate(m.defaultTimeZone(k)),new x.TimeOnly(f.hour,f.minute,f.second,f.millisecond);case 1:if(m.isTime(q[0]))return q[0].clone();if(m.isDate(q[0]))return new x.TimeOnly(q[0].hour,q[0].minute,q[0].second,q[0].millisecond);if(m.isDateOnly(q[0]))return new x.TimeOnly(0,0,0,0);if(m.isString(q[0]))return x.TimeOnly.fromString(q[0]);f=m.toNumber(q[0]);return!1===isNaN(f)?x.TimeOnly.fromMilliseconds(f):null;case 2:return m.isString(q[0])&&
m.isString(q[1])?x.TimeOnly.fromString(q[0],q[1]):x.TimeOnly.fromParts(m.toNumber(q[0]),m.toNumber(q[1]),0,0);case 3:return x.TimeOnly.fromParts(m.toNumber(q[0]),m.toNumber(q[1]),m.toNumber(q[2]),0);case 4:return x.TimeOnly.fromParts(m.toNumber(q[0]),m.toNumber(q[1]),m.toNumber(q[2]),m.toNumber(q[3]))}throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.InvalidParameter,e);})};G.dateonly=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,0,3,k,e);if(3===q.length)return l.DateOnly.fromParts(m.toNumber(q[0]),
m.toNumber(q[1])+1,m.toNumber(q[2]));if(2===q.length)return f=m.toString(q[1]),""===f?null:"X"===f?l.DateOnly.fromSeconds(m.toNumber(q[0])):"x"===f?l.DateOnly.fromMilliseconds(m.toNumber(q[0])):l.DateOnly.fromString(m.toString(q[0]),f);if(1===q.length){if(m.isString(q[0])){if(""===q[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(q[0]))return l.DateOnly.fromString(q[0]+"-01-01")}if(m.isDateOnly(q[0]))return q[0].clone();if(m.isDate(q[0]))return l.DateOnly.fromParts(q[0].year,
q[0].monthJS+1,q[0].day);f=m.toNumber(q[0]);return!1===isNaN(f)?l.DateOnly.fromMilliseconds(f):m.isString(q[0])?l.DateOnly.fromString(q[0]):null}return 0===q.length?(q=K.ArcadeDate.nowToArcadeDate(m.defaultTimeZone(k)),!1===q.isValid?null:l.DateOnly.fromParts(q.year,q.monthJS+1,q.day)):null})};G.changetimezone=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,2,2,k,e);if(null===q[0])return null;if(m.isDateOnly(q[0]))throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly,
e);if(m.isDateOnly(q[0]))throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.CannotChangeTimeZoneTime,e);f=m.toDate(q[0],m.defaultTimeZone(k));if(null===f)throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.InvalidParameter,e);q=K.createDateTimeZone(b(m.toString(q[1]),k),!1);if(null===q)return null;q=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(f,q);return!1===q.isValid?null:q})};G.timezone=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,2,k,e);if(m.isTime(q[0])||m.isDateOnly(q[0]))return"Unknown";
f=m.toDate(q[0],m.defaultTimeZone(k));if(null===f)return null;f=f.timeZone;return"system"===f?K.ArcadeDate.systemTimeZoneCanonicalName:"utc"===f.toLowerCase()?"UTC":"unknown"===f.toLowerCase()?"Unknown":f})};G.timezoneoffset=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?null:6E4*f.timeZoneOffset})};G.now=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,0,0,k,e);f=K.ArcadeDate.nowToArcadeDate(m.defaultTimeZone(k));return!1===f.isValid?
null:f})};G.timestamp=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,0,0,k,e);f=K.ArcadeDate.nowUTCToArcadeDate();return!1===f.isValid?null:f})};G.toutc=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?null:f.toUTC()})};G.tolocal=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?null:f.toLocal()})};G.day=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));
return null===f?NaN:f.day})};G.month=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.monthJS})};G.year=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.year})};G.hour=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);if(m.isTime(q[0]))return q[0].hour;f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?NaN:f.hour})};G.second=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,
1,1,k,e);if(m.isTime(q[0]))return q[0].second;f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?NaN:f.second})};G.millisecond=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);if(m.isTime(q[0]))return q[0].millisecond;f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?NaN:f.millisecond})};G.minute=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);if(m.isTime(q[0]))return q[0].minute;f=m.toDate(q[0],m.defaultTimeZone(k));return null===f?NaN:f.minute})};G.week=function(k,e){return d(k,
e,(f,g,q)=>{m.pcCheck(q,1,2,k,e);g=p(q[0],m.defaultTimeZone(k));if(null===g)return NaN;q=m.toNumber(m.defaultUndefined(q[1],0));if(0>q||6<q)throw new z.ArcadeExecutionError(k,z.ExecutionErrorCodes.InvalidParameter,e);f=g.dayOfWeekJS;var n=g.year;g=g.day+(0!==n%4||0===n%100&&0!==n%400?A:J)[g.monthJS]-1;n=Math.floor(g/7);return f-q+(0>f-q?7:0)<g-7*n?n+1:n})};G.weekday=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.dayOfWeekJS})};G.isoweekday=
function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.dayOfWeekISO})};G.isomonth=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.monthISO})};G.isoweek=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===f?NaN:f.weekISO})};G.isoyear=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,1,1,k,e);f=p(q[0],m.defaultTimeZone(k));return null===
f?NaN:f.yearISO})};G.date=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,0,8,k,e);if(3===q.length)return m.isDateOnly(q[0])&&m.isTime(q[1])&&m.isString(q[2])?(f=K.createDateTimeZone(b(m.toString(q[2])??"unknown",k),!1),null===f?null:w(K.ArcadeDate.fromParts(q[0].year,q[0].month,q[0].day,q[1].hour,q[1].minute,q[1].second,q[1].millisecond,f))):w(K.ArcadeDate.fromParts(m.toNumber(q[0]),m.toNumber(q[1])+1,m.toNumber(q[2]),0,0,0,0,m.defaultTimeZone(k)));if(4===q.length)return w(K.ArcadeDate.fromParts(m.toNumber(q[0]),
m.toNumber(q[1])+1,m.toNumber(q[2]),m.toNumber(q[3]),0,0,0,m.defaultTimeZone(k)));if(5===q.length)return w(K.ArcadeDate.fromParts(m.toNumber(q[0]),m.toNumber(q[1])+1,m.toNumber(q[2]),m.toNumber(q[3]),m.toNumber(q[4]),0,0,m.defaultTimeZone(k)));if(6===q.length)return w(K.ArcadeDate.fromParts(m.toNumber(q[0]),m.toNumber(q[1])+1,m.toNumber(q[2]),m.toNumber(q[3]),m.toNumber(q[4]),m.toNumber(q[5]),0,m.defaultTimeZone(k)));if(7===q.length)return w(K.ArcadeDate.fromParts(m.toNumber(q[0]),m.toNumber(q[1])+
1,m.toNumber(q[2]),m.toNumber(q[3]),m.toNumber(q[4]),m.toNumber(q[5]),m.toNumber(q[6]),m.defaultTimeZone(k)));if(8===q.length)return f=K.createDateTimeZone(b(m.toString(q[7])??"unknown",k),!1),null===f?null:w(K.ArcadeDate.fromParts(m.toNumber(q[0]),m.toNumber(q[1])+1,m.toNumber(q[2]),m.toNumber(q[3]),m.toNumber(q[4]),m.toNumber(q[5]),m.toNumber(q[6]),f));if(2===q.length){if(m.isDateOnly(q[0])&&m.isString(q[1]))return f=K.createDateTimeZone(b(m.toString(q[1])??"unknown",k),!1),null===f?null:w(K.ArcadeDate.fromParts(q[0].year,
q[0].month,q[0].day,0,0,0,0,f));if(m.isDateOnly(q[0])&&m.isTime(q[1]))return w(K.ArcadeDate.fromParts(q[0].year,q[0].month,q[0].day,q[1].hour,q[1].minute,q[1].second,q[1].millisecond,"unknown"));f=m.toString(q[1]);if(""===f)return null;f=m.standardiseDateFormat(f,!0);q="X"===f?y.DateTime.fromSeconds(m.toNumber(q[0])):"x"===f?y.DateTime.fromMillis(m.toNumber(q[0])):y.DateTime.fromFormat(m.toString(q[0]),f,{locale:r.getLocale(),numberingSystem:"latn"});return q.isValid?K.ArcadeDate.dateTimeToArcadeDate(q):
null}if(1===q.length){if(m.isDateOnly(q[0]))return w(K.ArcadeDate.fromParts(q[0].year,q[0].month,q[0].day,0,0,0,0,"unknown"));if(m.isString(q[0])){if(""===q[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(q[0]))return m.toDate(q[0]+"-01-01",m.defaultTimeZone(k))}f=m.toNumber(q[0]);return!1===isNaN(f)?(q=y.DateTime.fromMillis(f),q.isValid?K.ArcadeDate.dateTimeAndZoneToArcadeDate(q,m.defaultTimeZone(k)):null):m.toDate(q[0],m.defaultTimeZone(k))}return 0===
q.length?K.ArcadeDate.nowToArcadeDate(m.defaultTimeZone(k)):null})};G.datediff=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,2,4,k,e);if(m.isTime(q[0]))return m.isTime(q[1])?q[0].difference(q[1],m.toString(q[2])):NaN;if(m.isTime(q[1]))return NaN;if(m.isDateOnly(q[0]))return m.isDateOnly(q[1])?q[0].difference(q[1],m.toString(q[2])):NaN;if(m.isDateOnly(q[1]))return NaN;f=m.toDate(q[0],m.defaultTimeZone(k));g=m.toDate(q[1],m.defaultTimeZone(k));if(null===f||null===g)return NaN;let n=m.defaultUndefined(q[3],
"");""!==n&&null!==n?(n=b(m.toString(n),k),f=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(f,n),g=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,n)):f.timeZone!==g.timeZone&&(f.isUnknownTimeZone?f=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(f,g.timeZone):g=K.ArcadeDate.arcadeDateAndZoneToArcadeDate(g,f.timeZone));switch(m.toString(q[2]).toLowerCase()){case "days":case "day":case "d":return f.diff(g,"days");case "months":case "month":return f.diff(g,"months");case "minutes":case "minute":case "m":return"M"===
q[2]?f.diff(g,"months"):f.diff(g,"minutes");case "seconds":case "second":case "s":return f.diff(g,"seconds");case "milliseconds":case "millisecond":case "ms":return f.diff(g);case "hours":case "hour":case "h":return f.diff(g,"hours");case "years":case "year":case "y":return f.diff(g,"years");default:return f.diff(g)}})};G.dateadd=function(k,e){return d(k,e,(f,g,q)=>{m.pcCheck(q,2,3,k,e);f=m.toNumber(q[1]);if(isNaN(f)||Infinity===f||-Infinity===f)return m.isTime(q[0])||m.isDateOnly(q[0])?q[0].clone():
m.toDate(q[0],m.defaultTimeZone(k));g="milliseconds";switch(m.toString(q[2]).toLowerCase()){case "days":case "day":case "d":g="days";f=m.isDateOnly(q[0])?f:m.absRound(f);break;case "months":case "month":g="months";f=m.isDateOnly(q[0])?f:m.absRound(f);break;case "minutes":case "minute":case "m":g="M"===q[2]?"months":"minutes";break;case "seconds":case "second":case "s":g="seconds";break;case "milliseconds":case "millisecond":case "ms":g="milliseconds";break;case "hours":case "hour":case "h":g="hours";
break;case "years":case "year":case "y":g="years"}if(m.isTime(q[0])||m.isDateOnly(q[0]))return q[0].plus(g,f);q=m.toDate(q[0],m.defaultTimeZone(k));return null===q?null:q.plus({[g]:f})})}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../containerUtils ../Dictionary ../executionError ../Feature ../ImmutablePointArray ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/coordsUtils ../../geometry/support/jsonUtils".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d,k){F.registerFunctions=function(e,f){e.ringisclockwise=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);n=[];if(null===a[0])return!1;if(r.isArray(a[0]))for(const E of a[0])if(E instanceof A)n.push(E.hasZ?E.hasM?[E.x,E.y,E.z,E.m]:[E.x,E.y,E.z]:[E.x,E.y]);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);else if(a[0]instanceof x)n=a[0]._elements;else if(r.isImmutableArray(a[0]))for(const E of a[0].toArray())if(E instanceof
A)n.push(E.hasZ?E.hasM?[E.x,E.y,E.z,E.m]:[E.x,E.y,E.z]:[E.x,E.y]);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);return 3>n.length?!1:d.isClockwise(n)})};e.polygon=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);if(a[0]instanceof z){if(n=r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),g.spatialReference),!1===n instanceof J)throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);}else a[0]instanceof J?n=k.fromJSON(a[0].toJSON()):((n=JSON.parse(a[0]))&&!n.spatialReference&&(n.spatialReference=g.spatialReference),n=r.fixSpatialReference(new J(n),g.spatialReference));if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,q);return r.fixNullGeometry(n)})};e.polyline=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);if(a[0]instanceof z){if(n=
r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),g.spatialReference),!1===n instanceof G)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}else a[0]instanceof G?n=k.fromJSON(a[0].toJSON()):((n=JSON.parse(a[0]))&&!n.spatialReference&&(n.spatialReference=g.spatialReference),n=r.fixSpatialReference(new G(n),g.spatialReference));if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,
q);return r.fixNullGeometry(n)})};e.point=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);if(a[0]instanceof z){if(n=r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),g.spatialReference),!1===n instanceof A)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}else a[0]instanceof A?n=k.fromJSON(a[0].toJSON()):((n=JSON.parse(a[0]))&&!n.spatialReference&&(n.spatialReference=g.spatialReference),n=r.fixSpatialReference(new A(n),g.spatialReference));
if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,q);return r.fixNullGeometry(n)})};e.multipoint=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);if(a[0]instanceof z){if(n=r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),g.spatialReference),!1===n instanceof p)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}else a[0]instanceof p?n=k.fromJSON(a[0].toJSON()):
((n=JSON.parse(a[0]))&&!n.spatialReference&&(n.spatialReference=g.spatialReference),n=r.fixSpatialReference(new p(n),g.spatialReference));if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,q);return r.fixNullGeometry(n)})};e.extent=function(g,q){return f(g,q,(n,C,a)=>{a=r.autoCastFeatureToGeometry(a);r.pcCheck(a,1,1,g,q);n=null;a[0]instanceof z?n=r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),
g.spatialReference):a[0]instanceof A?(n={xmin:a[0].x,ymin:a[0].y,xmax:a[0].x,ymax:a[0].y,spatialReference:a[0].spatialReference.toJSON()},a=a[0],a.hasZ?(n.zmin=a.z,n.zmax=a.z):a.hasM&&(n.mmin=a.m,n.mmax=a.m),n=k.fromJSON(n)):a[0]instanceof J?n=k.fromJSON(a[0].extent?.toJSON()):a[0]instanceof G?n=k.fromJSON(a[0].extent?.toJSON()):a[0]instanceof p?n=k.fromJSON(a[0].extent?.toJSON()):a[0]instanceof w?n=k.fromJSON(a[0].toJSON()):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=g.spatialReference),
n=r.fixSpatialReference(new w(a),g.spatialReference));if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,q);return r.fixNullGeometry(n)})};e.geometry=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,1,1,g,q);n=null;if(null===a[0])return null;r.isFeature(a[0])?n=r.fixSpatialReference(a[0].geometry(),g.spatialReference):a[0]instanceof z?n=r.fixSpatialReference(l.parseGeometryFromDictionary(a[0],g.spatialReference),
g.spatialReference):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=g.spatialReference),n=r.fixSpatialReference(k.fromJSON(a),g.spatialReference));if(null!==n&&!1===n.spatialReference.equals(g.spatialReference))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongSpatialReference,q);return r.fixNullGeometry(n)})};e.setgeometry=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,2,2,g,q);if(r.isFeature(a[0])){if(!0===a[0].immutable)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.Immutable,
q);if(a[1]instanceof b||null===a[1])a[0]._geometry=a[1];else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);return r.voidOperation})};e.feature=function(g,q){return f(g,q,(n,C,a)=>{if(0===a.length)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongNumberOfParameters,q);if(1===a.length)if(r.isString(a[0]))a=l.fromJson(JSON.parse(a[0]),g.timeZone);else if(r.isFeature(a[0]))a=l.createFromArcadeFeature(a[0]);
else if(a[0]instanceof b)a=l.createFromGraphicLikeObject(a[0],null,null,g.timeZone);else if(a[0]instanceof z)n=a[0].hasField("geometry")?a[0].field("geometry"):null,a=a[0].hasField("attributes")?a[0].field("attributes"):null,null!==n&&n instanceof z&&(n=l.parseGeometryFromDictionary(n,g.spatialReference)),null!==a&&(a=l.parseAttributesFromDictionary(a)),a=l.createFromGraphicLikeObject(n,a,null,g.timeZone);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);else if(2===
a.length){C=n=null;if(null!==a[0])if(a[0]instanceof b)n=a[0];else if(n instanceof z)n=l.parseGeometryFromDictionary(a[0],g.spatialReference);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);if(null!==a[1])if(a[1]instanceof z)C=l.parseAttributesFromDictionary(a[1]);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);a=l.createFromGraphicLikeObject(n,C,null,g.timeZone)}else{n=null;C={};if(null!==a[0])if(a[0]instanceof b)n=a[0];else if(n instanceof
z)n=l.parseGeometryFromDictionary(a[0],g.spatialReference);else throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);for(let E=1;E<a.length;E+=2){const c=r.toString(a[E]),S=a[E+1];if(null===S||void 0===S||r.isString(S)||isNaN(S)||r.isDate(S)||r.isNumber(S)||r.isTime(S)||r.isDateOnly(S)||r.isBoolean(S)){if(r.isFunctionParameter(S)||!1===r.isSimpleType(S))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);C[c]=S===r.voidOperation?null:S}else throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);}a=l.createFromGraphicLikeObject(n,C,null,g.timeZone)}a._geometry=r.fixSpatialReference(a.geometry(),g.spatialReference);a.immutable=!1;return a})};e.dictionary=function(g,q){return f(g,q,(n,C,a)=>{if(0===a.length||1===a.length&&null===a[0])return a=new z,a.immutable=!1,a;if(1===a.length&&r.isString(a[0]))try{var E=JSON.parse(a[0]),c=z.convertObjectToArcadeDictionary(E,r.defaultTimeZone(g),!1);c.immutable=!1;return c}catch(S){throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);}if(1===a.length&&a[0]instanceof b)try{const S=a[0].toJSON();S.hasZ=!0===a[0].hasZ;S.hasM=!0===a[0].hasM;const M=z.convertObjectToArcadeDictionary(S,r.defaultTimeZone(g),!1);M.immutable=!1;return M}catch(S){throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}if(1===a.length&&r.isFeature(a[0]))try{const S=new z;S.immutable=!1;S.setField("geometry",a[0].geometry());const M=new z;M.immutable=!1;S.setField("attributes",M);for(const ia of a[0].keys())M.setField(ia,
a[0].field(ia));return S}catch(S){throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}if(1===a.length&&a[0]instanceof z)try{const S=new z;S.immutable=!1;for(const M of a[0].keys())S.setField(M,a[0].field(M));return S}catch(S){throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);}if(2===a.length&&a[0]instanceof z&&r.isBoolean(a[1]))try{if(!0!==a[1]){const S=new z;S.immutable=!1;for(const M of a[0].keys())S.setField(M,a[0].field(M));return S}return a[0].deepClone()}catch(S){throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);}if(0!==a.length%2)throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.WrongNumberOfParameters,q);n={};for(C=0;C<a.length;C+=2)if(E=r.toString(a[C]),c=a[C+1],null===c||void 0===c||r.isString(c)||isNaN(c)||r.isDate(c)||r.isNumber(c)||r.isBoolean(c)||r.isDateOnly(c)||r.isTime(c)||r.isArray(c)||r.isImmutableArray(c)){if(r.isFunctionParameter(c))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);n[E]=c===r.voidOperation?null:c}else throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);a=new z(n);a.immutable=!1;return a})};e.haskey=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,2,2,g,q);n=r.toString(a[1]);if(r.isFeature(a[0])||a[0]instanceof z)return a[0].hasField(n);if(a[0]instanceof b)return(a=K.geometryMember(a[0],n,null,null,2))&&"notfound"===a.keystate?!1:!0;throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);})};e.hasvalue=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,2,2,g,q);return null!=K.getNestedOptionalValue(a[0],
a[1])})};e.indexof=function(g,q){return f(g,q,(n,C,a)=>{r.pcCheck(a,2,2,g,q);n=a[1];if(r.isArray(a[0])){for(C=0;C<a[0].length;C++)if(r.equalityTest(n,a[0][C]))return C;return-1}if(r.isImmutableArray(a[0])){C=a[0].length();for(let E=0;E<C;E++)if(r.equalityTest(n,a[0].get(E)))return E;return-1}throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);})};e.angle=function(g,q){return f(g,q,(n,C,a)=>{a=r.autoCastFeatureToGeometry(a);r.pcCheck(a,2,3,g,q);if(!(a[0]instanceof A))throw new m.ArcadeExecutionError(g,
m.ExecutionErrorCodes.InvalidParameter,q);if(!(a[1]instanceof A))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);if(2<a.length&&!(a[2]instanceof A))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);return 2===a.length?y.angle2D(a[0],a[1]):y.angleBetween2D(a[0],a[1],a[2])})};e.bearing=function(g,q){return f(g,q,(n,C,a)=>{a=r.autoCastFeatureToGeometry(a);r.pcCheck(a,2,3,g,q);if(!(a[0]instanceof A))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,
q);if(!(a[1]instanceof A))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);if(2<a.length&&!(a[2]instanceof A))throw new m.ArcadeExecutionError(g,m.ExecutionErrorCodes.InvalidParameter,q);return 2===a.length?y.bearing2D(a[0],a[1]):y.bearingBetween2D(a[0],a[1],a[2])})};e.isselfintersecting=function(g,q){return f(g,q,(n,C,a)=>{a=r.autoCastFeatureToGeometry(a);r.pcCheck(a,1,1,g,q);n=a[0];if(n instanceof J)return n.isSelfIntersecting;if(n instanceof G)return y.pathsSelfIntersecting(n.paths);
if(n instanceof p)for(C=n.points,a=0;a<C.length;a++)for(let E=0;E<C.length;E++)if(E!==a){let c=!0;for(let S=0;S<C[a].length;S++)if(C[a][S]!==C[E][S]){c=!1;break}if(!0===c)return!0}return r.isArray(n)||r.isImmutableArray(n)?(C=r.autoCastArrayOfPointsToPolyline(n,g.spatialReference),null!==C&&(n=C.paths),y.pathsSelfIntersecting(n)):!1})}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../core/mathUtils","../../geometry/Point",
"../../geometry/support/intersectsBase"],function(F,K,z,m){function l(J,G,d){const k={x:0,y:0};G&&(k.z=0);d&&(k.m=0);let e=0;var f=J[0];for(let a=0;a<J.length;a++){const E=J[a];a:if(E.length!==f.length)var g=!1;else{for(g=0;g<E.length;g++)if(E[g]!==f[g]){g=!1;break a}g=!0}if(!1===g){g=x(f,E,G);var q=E,n=G,C=d;const c={x:(f[0]+q[0])/2,y:(f[1]+q[1])/2};n&&(c.z=(f[2]+q[2])/2);n&&C?c.m=(f[3]+q[3])/2:C&&(c.m=(f[2]+q[2])/2);f=c;f.x*=g;f.y*=g;k.x+=f.x;k.y+=f.y;G&&(f.z*=g,k.z+=f.z);d&&(f.m*=g,k.m+=f.m);e+=
g;f=E}}0<e?(k.x/=e,k.y/=e,G&&(k.z/=e),d&&(k.m/=e)):(k.x=J[0][0],k.y=J[0][1],G&&(k.z=J[0][2]),d&&G?k.m=J[0][3]:d&&(k.m=J[0][2]));return k}function x(J,G,d){const k=G[0]-J[0];J=G[1]-J[1];return d?(G=G[2]-G[2],Math.sqrt(k*k+J*J+G*G)):Math.sqrt(k*k+J*J)}function r(J,G,d=0){for(;J<d;)J+=G;for(d+=G;J>=d;)J-=G;return J}function y(J,G){return Math.atan2(G.y-J.y,G.x-J.x)}function w(J,G,d){var k=J.x-G.x;J=J.y-G.y;var e=d.x-G.x;G=d.y-G.y;return Math.atan2(k*G-e*J,k*e+J*G)}const b=[];for(const J of[[9002,56146130,
6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const G=J[0];for(let d=1;d<J.length;d++)b[J[d]]=G}const p=[];p[9002]=.3048;p[9003]=.3048006096012192;p[9095]=.3048007491;const A=[0,0];F.angle2D=function(J,G){return r(y(J,G),2*Math.PI)*(180/Math.PI)};F.angleBetween2D=function(J,G,d){return K.rad2deg(r(w(J,G,d),2*Math.PI))};F.angleBetweenRad=w;F.angleRad=y;F.bearing2D=function(J,G){return r(Math.PI/2-y(J,G),2*Math.PI)*(180/Math.PI)};F.bearingBetween2D=function(J,G,d){return K.rad2deg(r(-1*
w(J,G,d),2*Math.PI))};F.centroidMultiPoint=function(J){if(0===J.points.length)return null;var G=0;let d=0,k=0,e=0;for(let f=0;f<J.points.length;f++){const g=J.getPoint(f);!0===g.hasZ&&(k+=g.z);!0===g.hasM&&(e+=g.m);G+=g.x;d+=g.y;e+=g.m}G={x:G/J.points.length,y:d/J.points.length,spatialReference:null};G.spatialReference=J.spatialReference.toJSON();!0===J.hasZ&&(G.z=k/J.points.length);!0===J.hasM&&(G.m=e/J.points.length);return new z(G)};F.centroidPolyline=function(J){const G={x:0,y:0,spatialReference:J.spatialReference.toJSON()},
d={x:0,y:0,spatialReference:J.spatialReference.toJSON()};let k=0,e=0;for(let q=0;q<J.paths.length;q++)if(0!==J.paths[q].length){a:{var f=J.paths[q];var g=!0===J.hasZ;if(1>=f.length){f=0;break a}let n=0;for(let C=1;C<f.length;C++)n+=x(f[C-1],f[C],g);f=n}0===f?(f=l(J.paths[q],!0===J.hasZ,!0===J.hasM),G.x+=f.x,G.y+=f.y,!0===J.hasZ&&(G.z+=f.z),!0===J.hasM&&(G.m+=f.m),++k):(g=l(J.paths[q],!0===J.hasZ,!0===J.hasM),d.x+=g.x*f,d.y+=g.y*f,!0===J.hasZ&&(d.z+=g.z*f),!0===J.hasM&&(d.m+=g.m*f),e+=f)}return 0<
e?(d.x/=e,d.y/=e,!0===J.hasZ&&(d.z/=e),!0===J.hasM&&(d.m/=e),new z(d)):0<k?(G.x/=k,G.y/=k,!0===J.hasZ&&(d.z/=k),!0===J.hasM&&(G.m/=k),new z(G)):null};F.closestPointOnLineSegment=function(J,G,d){var k=0;k=d[0]-G[0];const e=d[1]-G[1],f=k*k+e*e;0===f?k=.5:(k=((J[0]-G[0])*k+(J[1]-G[1])*e)/f,0>k?k=0:1<k&&(k=1));return.5>=k?[G[0]+(d[0]-G[0])*k,G[1]+(d[1]-G[1])*k]:[d[0]-(d[0]-G[0])*(1-k),d[1]-(d[1]-G[1])*(1-k)]};F.closestPointOnLineSegmentWithZ=function(J,G,d){var k=[d[0]-G[0],d[1]-G[1],d[2]-G[2]];J=[J[0]-
G[0],J[1]-G[1],J[2]-G[2]];k=Math.max(0,Math.min(1,(k[0]*J[0]+k[1]*J[1]+k[2]*J[2])/(k[0]*k[0]+k[1]*k[1]+k[2]*k[2])));return[G[0]+(d[0]-G[0])*k,G[1]+(d[1]-G[1])*k,G[2]+(d[2]-G[2])*k]};F.getMetersPerVerticalUnitForSR=function(J){return J.vcsWkid&&void 0!==b[J.vcsWkid]?p[b[J.vcsWkid]]:J.latestVcsWkid&&void 0!==b[J.latestVcsWkid]?p[b[J.latestVcsWkid]]:1};F.pathsSelfIntersecting=function(J){for(let n=0;n<J.length;n++){const C=J[n];for(var G=0;G<C.length-1;G++){var d=C[G],k=C[G+1];for(var e=n+1;e<J.length;e++)for(var f=
0;f<J[e].length-1;f++){var g=J[e][f],q=J[e][f+1];if(m.segmentIntersects(d,k,g,q,A)&&!(A[0]===d[0]&&A[1]===d[1]||A[0]===g[0]&&A[1]===g[1]||A[0]===k[0]&&A[1]===k[1]||A[0]===q[0]&&A[1]===q[1]))return!0}}G=C.length;if(!(3>G))for(d=0;d<=G-2;d++)for(k=C[d],e=C[d+1],f=d+2;f<=G-2;f++)if(g=C[f],q=C[f+1],m.segmentIntersects(k,e,g,q,A)&&!(A[0]===k[0]&&A[1]===k[1]||A[0]===g[0]&&A[1]===g[1]||A[0]===e[0]&&A[1]===e[1]||A[0]===q[0]&&A[1]===q[1]))return!0}return!1};F.segmentLength=x;F.segmentLength3d=function(J,G,
d){return Math.sqrt((J[0]-G[0])**2+(J[1]-G[1])**2+(void 0!==J[2]&&void 0!==G[2]?(J[2]*d-G[2]*d)**2:0))};F.segmentLength3dSqr=function(J,G,d){return(J[0]-G[0])**2+(J[1]-G[1])**2+(void 0!==J[2]&&void 0!==G[2]?(J[2]*d-G[2]*d)**2:0)};F.segmentLengthSqr=function(J,G,d){const k=G[0]-J[0];J=G[1]-J[1];return d?(G=G[2]-G[2],k*k+J*J+G*G):k*k+J*J};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../Dictionary ../executionError ../kernel ../../chunks/languageUtils ./centroid ./measures ../../core/unitUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d){function k(f,g){if("polygon"!==f.type&&"polyline"!==f.type&&"extent"!==f.type)return 0;var q=1;if(f.spatialReference.vcsWkid||f.spatialReference.latestVcsWkid){q=x.getMetersPerVerticalUnitForSR(f.spatialReference);var n=y.getMetersPerUnitForSR(f.spatialReference);q/=n}n=0;if("polyline"===f.type)for(var C of f.paths)for(var a=1;a<C.length;a++)n+=x.segmentLength3d(C[a],C[a-1],q);else if("polygon"===f.type)for(a of f.rings){for(C=1;C<a.length;C++)n+=x.segmentLength3d(a[C],
a[C-1],q);if(a[0][0]!==a[a.length-1][0]||a[0][1]!==a[a.length-1][1]||void 0!==a[0][2]&&a[0][2]!==a[a.length-1][2])n+=x.segmentLength3d(a[0],a[a.length-1],q)}else"extent"===f.type&&(n+=2*x.segmentLength3d([f.xmin,f.ymin,0],[f.xmax,f.ymin,0],q),n+=2*x.segmentLength3d([f.xmin,f.ymin,0],[f.xmin,f.ymax,0],q),n=2*n+4*Math.abs(l.defaultUndefined(f.zmax,0)*q-l.defaultUndefined(f.zmin,0)*q));f=new G({hasZ:!1,hasM:!1,spatialReference:f.spatialReference,paths:[[[0,0],[0,n]]]});return e.planarLength(f,g)}let e=
null;F.registerFunctions=function(f,g){function q(n,C,a){l.pcCheck(a,2,2,n,C);if(!(a[0]instanceof b&&a[1]instanceof b||a[0]instanceof b&&null===a[1]||a[1]instanceof b&&null===a[0]||null===a[0]&&null===a[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);}f.disjoint=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!0:e.disjoint(c[0],c[1])})};f.intersects=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);
q(n,C,c);return null===c[0]||null===c[1]?!1:e.intersects(c[0],c[1])})};f.touches=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!1:e.touches(c[0],c[1])})};f.crosses=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!1:e.crosses(c[0],c[1])})};f.within=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!1:e.within(c[0],
c[1])})};f.contains=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!1:e.contains(c[0],c[1])})};f.overlaps=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]||null===c[1]?!1:e.overlaps(c[0],c[1])})};f.equals=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,2,2,n,C);return c[0]===c[1]?!0:c[0]instanceof b&&c[1]instanceof b?e.equals(c[0],c[1]):l.isDate(c[0])&&l.isDate(c[1])||l.isTime(c[0])&&
l.isTime(c[1])||l.isDateOnly(c[0])&&l.isDateOnly(c[1])?c[0].equals(c[1]):!1})};f.relate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,3,3,n,C);if(c[0]instanceof b&&c[1]instanceof b)return e.relate(c[0],c[1],l.toString(c[2]));if(c[0]instanceof b&&null===c[1]||c[1]instanceof b&&null===c[0]||null===c[0]&&null===c[1])return!1;throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);})};f.intersection=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);
q(n,C,c);return null===c[0]||null===c[1]?null:e.intersect(c[0],c[1])})};f.union=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);a=[];if(0===c.length)throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.WrongNumberOfParameters,C);if(1===c.length)if(l.isArray(c[0]))for(c=l.autoCastFeatureToGeometry(c[0]),E=0;E<c.length;E++){if(null!==c[E]){if(!(c[E]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a.push(c[E])}}else if(l.isImmutableArray(c[0]))for(c=
l.autoCastFeatureToGeometry(c[0].toArray()),E=0;E<c.length;E++){if(null!==c[E]){if(!(c[E]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a.push(c[E])}}else{if(c[0]instanceof b)return l.fixSpatialReference(m.cloneGeometry(c[0]),n.spatialReference);if(null===c[0])return null;throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);}else for(E=0;E<c.length;E++)if(null!==c[E]){if(!(c[E]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,
C);a.push(c[E])}return 0===a.length?null:e.union(a)})};f.difference=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]?null:null===c[1]?m.cloneGeometry(c[0]):e.difference(c[0],c[1])})};f.symmetricdifference=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);q(n,C,c);return null===c[0]&&null===c[1]?null:null===c[0]?m.cloneGeometry(c[1]):null===c[1]?m.cloneGeometry(c[0]):e.symmetricDifference(c[0],c[1])})};f.clip=function(n,C){return g(n,
C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2,n,C);if(!(c[1]instanceof w)&&null!==c[1])throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return null===c[1]?null:e.clip(c[0],c[1])})};f.cut=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2,n,C);if(!(c[1]instanceof G)&&null!==c[1])throw new z.ArcadeExecutionError(n,
z.ExecutionErrorCodes.InvalidParameter,C);if(null===c[0])return[];if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return null===c[1]?[m.cloneGeometry(c[0])]:e.cut(c[0],c[1])})};f.area=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,1,2,n,C);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolygon(c[0],n.spatialReference),null===a?0:e.planarArea(a,m.convertSquareUnitsToCode(l.defaultUndefined(c[1],
-1)));if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.planarArea(c[0],m.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.areageodetic=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,1,2,n,C);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolygon(c[0],n.spatialReference),null===a?0:e.geodesicArea(a,m.convertSquareUnitsToCode(l.defaultUndefined(c[1],
-1)));if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.geodesicArea(c[0],m.convertSquareUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.length=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,1,2,n,C);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference),null===a?0:e.planarLength(a,m.convertLinearUnitsToCode(l.defaultUndefined(c[1],
-1)));if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.planarLength(c[0],m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.length3d=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,1,2,n,C);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference),null===a?0:!0===a.hasZ?k(a,m.convertLinearUnitsToCode(l.defaultUndefined(c[1],
-1))):e.planarLength(a,m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return!0===c[0].hasZ?k(c[0],m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1))):e.planarLength(c[0],m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.lengthgeodetic=function(n,C){return g(n,C,(a,E,c)=>{l.pcCheck(c,1,2,n,C);c=l.autoCastFeatureToGeometry(c);if(null===c[0])return 0;if(l.isArray(c[0])||l.isImmutableArray(c[0]))return a=
l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference),null===a?0:e.geodesicLength(a,m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)));if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.geodesicLength(c[0],m.convertLinearUnitsToCode(l.defaultUndefined(c[1],-1)))})};f.distance=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToMultiPoint(c[0],
n.spatialReference);E=c[1];if(l.isArray(c[1])||l.isImmutableArray(c[1]))E=l.autoCastArrayOfPointsToMultiPoint(c[1],n.spatialReference);if(!(a instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(E instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.distance(a,E,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.distancegeodetic=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);
l.pcCheck(c,2,3,n,C);a=c[0];E=c[1];if(!(a instanceof A))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(E instanceof A))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);const S=new G({paths:[],spatialReference:a.spatialReference});S.addPath([a,E]);return e.geodesicLength(S,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.densify=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);if(null===
c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(0>=a)throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return c[0]instanceof J||c[0]instanceof G?e.densify(c[0],a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]instanceof w?e.densify(J.fromExtent(c[0]),a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],
-1))):c[0]})};f.densifygeodetic=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(0>=a)throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return c[0]instanceof J||c[0]instanceof G?e.geodesicDensify(c[0],
a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]instanceof w?e.geodesicDensify(J.fromExtent(c[0]),a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1))):c[0]})};f.generalize=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,4,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,
C);return e.generalize(c[0],a,l.toBoolean(l.defaultUndefined(c[2],!0)),m.convertLinearUnitsToCode(l.defaultUndefined(c[3],-1)))})};f.buffer=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return 0===a?m.cloneGeometry(c[0]):
e.buffer(c[0],a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)))})};f.buffergeodetic=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return 0===a?m.cloneGeometry(c[0]):e.geodesicBuffer(c[0],a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],
-1)))})};f.offset=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,6,n,C);if(null===c[0])return null;if(!(c[0]instanceof J||c[0]instanceof G))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);a=l.toNumber(c[1]);if(isNaN(a))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);E=l.toNumber(l.defaultUndefined(c[4],10));if(isNaN(E))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);const S=
l.toNumber(l.defaultUndefined(c[5],0));if(isNaN(S))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.offset(c[0],a,m.convertLinearUnitsToCode(l.defaultUndefined(c[2],-1)),l.toString(l.defaultUndefined(c[3],"round")).toLowerCase(),E,S)})};f.rotate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,3,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);
a=c[0]instanceof w?J.fromExtent(c[0]):c[0];E=l.toNumber(c[1]);if(isNaN(E))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);c=l.defaultUndefined(c[2],null);if(null===c)return e.rotate(a,E);if(c instanceof A)return e.rotate(a,E,c);throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);})};f.centroid=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1,n,C);if(null===c[0])return null;a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=
l.autoCastArrayOfPointsToMultiPoint(c[0],n.spatialReference);if(null===a)return null;if(!(a instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return a instanceof A?l.fixSpatialReference(m.cloneGeometry(a),n.spatialReference):a instanceof J?a.centroid:a instanceof G?x.centroidPolyline(a):a instanceof p?x.centroidMultiPoint(a):a instanceof w?a.center:null})};f.measuretocoordinate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,
2,2,n,C);if(null===c[0])return null;a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference);if(null===a)return null;if(!(a instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(a instanceof G))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(l.isNumber(!1===c[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return(c=r.measureToCoordinate(a,
c[1]))?K.convertObjectToArcadeDictionary(c,l.defaultTimeZone(n),!1,!0):null})};f.pointtocoordinate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2,n,C);if(null===c[0])return null;a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference);if(null===a)return null;if(!(a instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(a instanceof G))throw new z.ArcadeExecutionError(n,
z.ExecutionErrorCodes.InvalidParameter,C);E=c[1];if(null===E)return null;if(!(E instanceof A))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(l.isNumber(!1===c[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return(c=r.pointToCoordinate(a,E))?K.convertObjectToArcadeDictionary(c,l.defaultTimeZone(n),!1,!0):null})};f.distancetocoordinate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2,n,C);if(null===
c[0])return null;a=c[0];if(l.isArray(c[0])||l.isImmutableArray(c[0]))a=l.autoCastArrayOfPointsToPolyline(c[0],n.spatialReference);if(null===a)return null;if(!(a instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(a instanceof G))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(l.isNumber(!1===c[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return(c=r.distanceToCoordinate(a,c[1]))?K.convertObjectToArcadeDictionary(c,
l.defaultTimeZone(n),!1,!0):null})};f.multiparttosinglepart=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(c[0]instanceof A||c[0]instanceof w)return[l.fixSpatialReference(m.cloneGeometry(c[0]),n.spatialReference)];a=e.simplify(c[0]);if(a instanceof J){c=[];E=[];for(var S=0;S<a.rings.length;S++)if(a.isClockwise(a.rings[S])){const M=
d.fromJSON({rings:[a.rings[S]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()});c.push(M)}else E.push({ring:a.rings[S],pt:a.getPoint(S,0)});for(a=0;a<E.length;a++)for(S=0;S<c.length;S++)if(c[S].contains(E[a].pt)){c[S].addRing(E[a].ring);break}return c}if(a instanceof G){c=[];for(E=0;E<a.paths.length;E++)S=d.fromJSON({paths:[a.paths[E]],hasZ:!0===a.hasZ,hasM:!0===a.hasM,spatialReference:a.spatialReference.toJSON()}),c.push(S);return c}if(c[0]instanceof p){a=[];c=l.fixSpatialReference(m.cloneGeometry(c[0]),
n.spatialReference);for(E=0;E<c.points.length;E++)a.push(c.getPoint(E));return a}return null})};f.issimple=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1,n,C);if(null===c[0])return!0;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.isSimple(c[0])})};f.simplify=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,
z.ExecutionErrorCodes.InvalidParameter,C);return e.simplify(c[0])})};f.convexhull=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,1,1,n,C);if(null===c[0])return null;if(!(c[0]instanceof b))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);return e.convexHull(c[0])})};f.nearestcoordinate=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);l.pcCheck(c,2,2,n,C);if(!(c[0]instanceof b||null===c[0]))throw new z.ArcadeExecutionError(n,
z.ExecutionErrorCodes.InvalidParameter,C);if(!(c[1]instanceof A||null===c[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(null===c[0]||null===c[1])return null;a=e.nearestCoordinate(c[0],c[1]);return null===a||a.isEmpty?null:K.convertObjectToArcadeDictionary({coordinate:a.coordinate,distance:a.distance,sideOfLine:0===a.distance?"straddle":a.isRightSide?"right":"left"},l.defaultTimeZone(n),!1,!0)})};f.nearestvertex=function(n,C){return g(n,C,(a,E,c)=>{c=l.autoCastFeatureToGeometry(c);
l.pcCheck(c,2,2,n,C);if(!(c[0]instanceof b||null===c[0]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(!(c[1]instanceof A||null===c[1]))throw new z.ArcadeExecutionError(n,z.ExecutionErrorCodes.InvalidParameter,C);if(null===c[0]||null===c[1])return null;a=e.nearestVertex(c[0],c[1]);return null===a||a.isEmpty?null:K.convertObjectToArcadeDictionary({coordinate:a.coordinate,distance:a.distance,sideOfLine:0===a.distance?"straddle":a.isRightSide?"right":"left"},l.defaultTimeZone(n),
!1,!0)})}};F.setGeometryEngine=function(f){e=f};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/measures":function(){define(["exports","./centroid","../../core/unitUtils","../../geometry/Point","../../geometry/Polygon"],function(F,K,z,m,l){function x(w,b,p){p=b[0]-w[0];w=b[1]-w[1];return Math.sqrt(p*p+w*w)}function r(w,b,p,A){b=[b[0]-w[0],b[1]-w[1],b[2]*A-w[2]*A];A=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b=[b[0]/A,b[1]/A,b[2]/A];return[w[0]+b[0]*p,w[1]+b[1]*
p,w[2]+b[2]*p]}function y(w,b,p){let A=b[0]-w[0];b=b[1]-w[1];const J=Math.sqrt(A*A+b*b);return[w[0]+A/J*p,w[1]+b/J*p]}F.distanceToCoordinate=function(w,b){if(!w)return null;switch(w.type){case "extent":case "multipoint":case "mesh":case "point":return null}var p="polygon"===w.type?w.rings:w.paths;if(0>b)return null;var A=1;if(w.spatialReference.vcsWkid||w.spatialReference.latestVcsWkid){var J=K.getMetersPerVerticalUnitForSR(w.spatialReference),G=z.getMetersPerUnitForSR(w.spatialReference);A=J/G}let d=
0;J=w.hasZ?3:2;var k=w.hasZ?K.segmentLength3d:x;G=-1;if(0===b)return 0===p.length||0===p[0].length?null:{partId:0,coordinate:new m({hasZ:w.hasZ,hasM:w.hasM,spatialReference:w.spatialReference,x:p[0][0][0],y:p[0][0][1],...(w.hasZ?{z:p[0][0][2]}:{}),...(w.hasM?{m:p[0][0][J]}:{})}),segmentId:0};for(const e of p){G++;p=-1;for(let f=1;f<e.length;f++){p++;const g=k(e[f-1],e[f],A),q=d+g;if(q===b)return{partId:G,coordinate:new m({hasZ:w.hasZ,hasM:w.hasM,spatialReference:w.spatialReference,x:e[f][0],y:e[f][1],
...(w.hasZ?{z:e[f][2]}:{}),...(w.hasM?{m:e[f][J]}:{})}),segmentId:p};if(q>b)return A=w.hasZ?r(e[f-1],e[f],b-d,A):y(e[f-1],e[f],b-d),A=[...A],k=e[f-1][J],b=k+(e[f][J]-k)/g*(b-d),A=[...A,b],{partId:G,coordinate:new m({hasZ:w.hasZ,hasM:w.hasM,spatialReference:w.spatialReference,x:A[0],y:A[1],...(w.hasZ?{z:A[2]}:{}),...(w.hasM?{m:A[J]}:{})}),segmentId:p};d=q}}return null};F.measureToCoordinate=function(w,b){if(!w)return null;switch(w.type){case "extent":case "multipoint":case "mesh":case "point":return null}var p=
"polygon"===w.type?w.rings:w.paths,A=1;if(w.spatialReference.vcsWkid||w.spatialReference.latestVcsWkid){A=K.getMetersPerVerticalUnitForSR(w.spatialReference);var J=z.getMetersPerUnitForSR(w.spatialReference);A/=J}if(0===p.length||0===p[0].length||!1===w.hasM)return null;J=-1;let G=0;const d=w.hasZ?K.segmentLength3d:x,k=w.hasZ?3:2;for(const f of p){J++;if(0<f.length&&f[0][k]===b)return{partId:J,distanceAlong:G,coordinate:new m({hasZ:w.hasZ,hasM:w.hasM,spatialReference:w.spatialReference,x:f[0][0],
y:f[0][1],...(w.hasZ?{z:f[0][2]}:{}),...(w.hasM?{m:f[0][k]}:{})}),segmentId:0};p=-1;for(let g=1;g<f.length;g++){var e=d(f[g-1],f[g],A);p++;const q=f[g][k]-f[g-1][k],n=f[g][k];if(n===b)return{partId:J,distanceAlong:e+G,coordinate:new m({hasZ:w.hasZ,hasM:w.hasM,spatialReference:w.spatialReference,x:f[g][0],y:f[g][1],...(w.hasZ?{z:f[g][2]}:{}),...(w.hasM?{m:f[g][k]}:{})}),segmentId:p};if(n>b&&b>f[g-1][k])return e*=(b-f[g-1][k])/q,e=w.hasZ?r(f[g-1],f[g],e,A):y(f[g-1],f[g],e),e=[...e,b],w=new m({hasZ:w.hasZ,
hasM:w.hasM,spatialReference:w.spatialReference,x:e[0],y:e[1],...(w.hasZ?{z:e[2]}:{}),...(w.hasM?{m:e[k]}:{})}),{partId:J,distanceAlong:G+d(f[g-1],[w.x,w.y,...(w.hasZ?[w.z]:[]),...(w.hasM?[w.m]:[])],A),coordinate:w,segmentId:p};G+=e}}return null};F.pointToCoordinate=function(w,b){if(!w||!b)return null;if("extent"===w.type){var p=w;w=new l({spatialReference:w.spatialReference,rings:[[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]]]})}switch(w.type){case "point":var A=
w;if(A)if(b){w=1;if(b.spatialReference.vcsWkid||b.spatialReference.latestVcsWkid)w=K.getMetersPerVerticalUnitForSR(b.spatialReference),p=z.getMetersPerUnitForSR(b.spatialReference),w/=p;p=null;var J=0;p=A;J=A.hasZ&&b.hasZ?K.segmentLength3d([b.x,b.y,b.z],[A.x,A.y,A.z],w):K.segmentLength([b.x,b.y],[A.x,A.y],!1);b={coordinate:p,distance:J}}else b=null;else b=null;return b??null;case "multipoint":if(w&&b){p=1;if(b.spatialReference.vcsWkid||b.spatialReference.latestVcsWkid)p=K.getMetersPerVerticalUnitForSR(b.spatialReference),
J=z.getMetersPerUnitForSR(b.spatialReference),p/=J;J=null;var G=0;G=Number.MAX_VALUE;var d=J=-1;for(A of w.points||[]){d++;var k=w.hasZ&&b.hasZ?K.segmentLength3dSqr([A[0],A[1],A[2]],[b.x,b.y,b.z],p):K.segmentLengthSqr([A[0],A[1]],[b.x,b.y],!1);k<G&&(G=k,J=d)}0>J?b=null:(J=w.getPoint(J),b={coordinate:J,distance:Math.sqrt(G)})}else b=null;return b??null;case "polygon":case "polyline":if((A=w)&&b){w="polygon"===A.type?A.rings:A.paths;p=1;if(b.spatialReference.vcsWkid||b.spatialReference.latestVcsWkid)p=
K.getMetersPerVerticalUnitForSR(b.spatialReference),J=z.getMetersPerUnitForSR(b.spatialReference),p/=J;J=Number.MAX_VALUE;var e=G=-1;d=-1;k=A.hasZ&&b.hasZ;var f=null,g=k?[b.x,b.y,b.z]:[b.x,b.y];for(var q of w){e++;for(var n=1;n<q.length;n++){var C=k?K.closestPointOnLineSegmentWithZ(g,q[n-1],q[n]):K.closestPointOnLineSegment(g,q[n-1],q[n]),a=k?K.segmentLength3dSqr(C,g,p):K.segmentLengthSqr(C,g,!1);a<J&&(J=a,f=C,d=e,G=n-1)}}if(0>G)b=null;else{g=A.hasM&&A.hasZ?3:2;q=w[d][G];e=w[d][G+1];n=n=null;C=k?
f[2]:null;if(A.hasM){n=q[g];a=k?K.segmentLength3d(q,e,p):K.segmentLength(q,e,!1);var E=k?K.segmentLength3d(q,f,p):K.segmentLength(q,f,!1);n+=(e[g]-n)/a*E}A.hasZ&&!1===b.hasZ&&(g=q[2],C=k?K.segmentLength3d(q,e,p):K.segmentLength(q,e,!1),a=k?K.segmentLength3d(q,f,p):K.segmentLength(q,f,!1),C=g+(e[2]-g)/C*a);n=new m({hasZ:k,hasM:A.hasM,spatialReference:b.spatialReference,x:f[0],y:f[1],...(A.hasZ?{z:C}:{}),...(A.hasM?{m:n}:{})});b=0;for(k=0;k<=d;k++)for(f=w[k],e=k===d?G:f.length-1,g=1;g<=e;g++)b+=A.hasZ?
K.segmentLength3d(f[g-1],f[g],p):K.segmentLength([f[g-1][0],f[g-1][1]],[f[g][0],f[g][1]],!1);b+=A.hasZ?K.segmentLength3d(q,[n.x,n.y,n.z],p):K.segmentLength(q,[n.x,n.y],!1);b={partId:d,segmentId:G,coordinate:n,distance:Math.sqrt(J),distanceAlong:b}}}else b=null;return b??null;default:return null}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/mathUtils","../../core/number"],function(F,
K,z,m){F.registerFunctions=function(l,x){function r(y,w,b){y=K.toNumber(y);return isNaN(y)?y:isNaN(w)||isNaN(b)||w>b?NaN:y<w?w:y>b?b:y}l.number=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,2,y,w);b=A[0];return K.isNumber(b)?b:null===b?0:K.isDate(b)||K.isTime(b)||K.isDateOnly(b)?b.toNumber():K.isBoolean(b)?Number(b):K.isArray(b)?NaN:""===b||void 0===b?Number(b):K.isString(b)?void 0!==A[1]?(A=K.multiReplace(A[1],"\u2030",""),A=K.multiReplace(A,"\u00a4",""),m.parse(b,{pattern:A})):Number(b.trim()):
Number(b)})};l.abs=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.abs(K.toNumber(A[0]))})};l.acos=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.acos(K.toNumber(A[0]))})};l.asin=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.asin(K.toNumber(A[0]))})};l.atan=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.atan(K.toNumber(A[0]))})};l.atan2=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,2,2,y,w);return Math.atan2(K.toNumber(A[0]),
K.toNumber(A[1]))})};l.ceil=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,2,y,w);return 2===A.length?(b=K.toNumber(A[1]),isNaN(b)&&(b=0),z.decimalAdjust("ceil",K.toNumber(A[0]),-1*b)):Math.ceil(K.toNumber(A[0]))})};l.round=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,2,y,w);return 2===A.length?(b=K.toNumber(A[1]),isNaN(b)&&(b=0),z.decimalAdjust("round",K.toNumber(A[0]),-1*b)):Math.round(K.toNumber(A[0]))})};l.floor=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,2,y,w);return 2===A.length?
(b=K.toNumber(A[1]),isNaN(b)&&(b=0),z.decimalAdjust("floor",K.toNumber(A[0]),-1*b)):Math.floor(K.toNumber(A[0]))})};l.cos=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.cos(K.toNumber(A[0]))})};l.isnan=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return"number"===typeof A[0]&&isNaN(A[0])})};l.exp=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.exp(K.toNumber(A[0]))})};l.log=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.log(K.toNumber(A[0]))})};
l.pow=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,2,2,y,w);return K.toNumber(A[0])**K.toNumber(A[1])})};l.random=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,0,0,y,w);return Math.random()})};l.sin=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.sin(K.toNumber(A[0]))})};l.sqrt=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.sqrt(K.toNumber(A[0]))})};l.tan=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return Math.tan(K.toNumber(A[0]))})};
l.isempty=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return null===A[0]||""===A[0]||void 0===A[0]||A[0]===K.voidOperation?!0:!1})};l.boolean=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,1,1,y,w);return K.toBoolean(A[0])})};l.constrain=function(y,w){return x(y,w,(b,p,A)=>{K.pcCheck(A,3,3,y,w);b=K.toNumber(A[1]);p=K.toNumber(A[2]);if(K.isArray(A[0])){var J=[];for(var G of A[0])J.push(r(G,b,p));return J}if(K.isImmutableArray(A[0])){G=[];for(J=0;J<A[0].length();J++)G.push(r(A[0].get(J),
b,p));return G}return r(A[0],b,p)})}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(F,K,z,m){function l(x,r){if(1===r.length){if(z.isArray(r[0]))return m.calculateStat(x,r[0],-1);if(z.isImmutableArray(r[0]))return m.calculateStat(x,r[0].toArray(),-1)}return m.calculateStat(x,r,-1)}F.registerFunctions=function(x,r){x.stdev=function(y,w){return r(y,w,
(b,p,A)=>l("stdev",A))};x.variance=function(y,w){return r(y,w,(b,p,A)=>l("variance",A))};x.average=function(y,w){return r(y,w,(b,p,A)=>l("mean",A))};x.mean=function(y,w){return r(y,w,(b,p,A)=>l("mean",A))};x.sum=function(y,w){return r(y,w,(b,p,A)=>l("sum",A))};x.min=function(y,w){return r(y,w,(b,p,A)=>l("min",A))};x.max=function(y,w){return r(y,w,(b,p,A)=>l("max",A))};x.distinct=function(y,w){return r(y,w,(b,p,A)=>l("distinct",A))};x.count=function(y,w){return r(y,w,(b,p,A)=>{z.pcCheck(A,1,1,y,w);
if(z.isArray(A[0])||z.isString(A[0]))return A[0].length;if(z.isImmutableArray(A[0]))return A[0].length();throw new K.ArcadeExecutionError(y,K.ExecutionErrorCodes.InvalidParameter,w);})}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(F,K){function z(l){let x=0;for(let r=0;r<l.length;r++)x+=l[r];return x/l.length}function m(l){const x=z(l);let r=0;for(let y=0;y<l.length;y++)r+=(x-
l[y])**2;return r/l.length}F.calculateStat=function(l,x,r=1E3){switch(l.toLowerCase()){case "distinct":a:{l=[];const y={},w=[];for(let b=0;b<x.length;b++){if(void 0!==x[b]&&null!==x[b]&&x[b]!==K.voidOperation){const p=x[b];if(K.isNumber(p)||K.isString(p))void 0===y[p]&&(l.push(p),y[p]=1);else{let A=!1;for(let J=0;J<w.length;J++)!0===K.equalityTest(w[J],p)&&(A=!0);!1===A&&(w.push(p),l.push(p))}}if(l.length>=r&&-1!==r){x=l;break a}}x=l}return x;case "avg":case "mean":return z(K.toNumberArray(x));case "min":return Math.min.apply(Math,
K.toNumberArray(x));case "sum":x=K.toNumberArray(x);r=0;for(l=0;l<x.length;l++)r+=x[l];return r;case "max":return Math.max.apply(Math,K.toNumberArray(x));case "stdev":case "stddev":return Math.sqrt(m(K.toNumberArray(x)));case "var":case "variance":return m(K.toNumberArray(x));case "count":return x.length}return 0};F.decodeStatType=function(l){switch(l.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";
case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../core/urlUtils ../../core/uuid ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../portal/Portal".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d,k,e,f){function g(n,C){if(!n||!C)return n===C;if(n.x===C.x&&n.y===C.y){if(n.hasZ){if(n.z!==C.z)return!1}else if(C.hasZ)return!1;if(n.hasM){if(n.m!==C.m)return!1}else if(C.hasM)return!1;return!0}return!1}function q(n,C,a){if(null===n)C.updateUint8Array([0,139]);else if(x.isArray(n)){C.updateUint8Array([61]);if(a.map.has(n))n=a.map.get(n),C.updateIntArray([n^61237541]);else{a.map.set(n,a.currentLength++);for(var E of n)q(E,C,a);a.map.delete(n);a.currentLength--}C.updateUint8Array([199])}else if(x.isImmutableArray(n)){C.updateUint8Array([61]);
if(a.map.has(n))n=a.map.get(n),C.updateIntArray([n^61237541]);else{a.map.set(n,a.currentLength++);for(var c of n.toArray())q(c,C,a);a.map.delete(n);a.currentLength--}C.updateUint8Array([199])}else if(x.isDate(n))C.updateIntArray([n.toNumber()]),C.updateUint8Array([241]);else if(x.isDateOnly(n))C.updateIntArray([n.toNumber()]),C.updateIntArray([257]);else if(x.isTime(n))C.updateIntArray([n.toNumber()]),C.updateIntArray([263]);else if(x.isString(n))C.updateIntArray([n.length]),C.updateWithString(n),
C.updateUint8Array([41]);else if(x.isBoolean(n))C.updateUint8Array([!0===n?1:0,113]);else if(x.isNumber(n))C.updateFloatArray([n]),C.updateUint8Array([173]);else{if(n instanceof z)throw new l.ArcadeExecutionError(a.context,l.ExecutionErrorCodes.UnsupportedHashType,a.node);if(n instanceof K)throw new l.ArcadeExecutionError(a.context,l.ExecutionErrorCodes.UnsupportedHashType,a.node);if(n instanceof m){C.updateUint8Array([223]);if(a.map.has(n))n=a.map.get(n),C.updateIntArray([n^61237541]);else{a.map.set(n,
a.currentLength++);for(var S of n.keys())C.updateIntArray([S.length]),C.updateWithString(S),C.updateUint8Array([251]),E=n.field(S),q(E,C,a),C.updateUint8Array([239]);a.map.delete(n);a.currentLength--}C.updateUint8Array([73])}else{if(x.isFeature(n))throw new l.ArcadeExecutionError(a.context,l.ExecutionErrorCodes.UnsupportedHashType,a.node);if(n instanceof G)C.updateIntArray([3833836621]),C.updateIntArray([0]),C.updateFloatArray([n.x]),C.updateIntArray([1]),C.updateFloatArray([n.y]),n.hasZ&&(C.updateIntArray([2]),
C.updateFloatArray([n.z])),n.hasM&&(C.updateIntArray([3]),C.updateFloatArray([n.m])),C.updateIntArray([3765347959]),q(n.spatialReference.wkid,C,a);else if(n instanceof d){C.updateIntArray([1266616829]);for(S=0;S<n.rings.length;S++){c=n.rings[S];E=[];var M=null;let ia=null;for(let v=0;v<c.length;v++){const H=n.getPoint(S,v);if(0===v)M=H;else if(g(ia,H))continue;ia=H;v===c.length-1&&g(M,H)||E.push(H)}C.updateIntArray([1397116793,E.length]);for(c=0;c<E.length;c++)M=E[c],C.updateIntArray([3962308117,
c]),q(M,C,a),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([3878477243]);q(n.spatialReference.wkid,C,a)}else if(n instanceof k){C.updateIntArray([4106883559]);for(S=0;S<n.paths.length;S++){E=n.paths[S];C.updateIntArray([1397116793,E.length]);for(c=0;c<E.length;c++)C.updateIntArray([3962308117,c]),q(n.getPoint(S,c),C,a),C.updateIntArray([2716288009]);C.updateIntArray([2278822459])}C.updateIntArray([2568784753]);q(n.spatialReference.wkid,C,a)}else if(n instanceof J){C.updateIntArray([588535921,
n.points.length]);for(S=0;S<n.points.length;S++)E=n.getPoint(S),C.updateIntArray([S]),q(E,C,a);C.updateIntArray([1700171621]);q(n.spatialReference.wkid,C,a)}else if(n instanceof A)C.updateIntArray([3483648373]),C.updateIntArray([0]),C.updateFloatArray([n.xmax]),C.updateIntArray([1]),C.updateFloatArray([n.xmin]),C.updateIntArray([2]),C.updateFloatArray([n.ymax]),C.updateIntArray([3]),C.updateFloatArray([n.ymin]),n.hasZ&&(C.updateIntArray([4]),C.updateFloatArray([n.zmax]),C.updateIntArray([5]),C.updateFloatArray([n.zmin])),
n.hasM&&(C.updateIntArray([6]),C.updateFloatArray([n.mmax]),C.updateIntArray([7]),C.updateFloatArray([n.mmin])),C.updateIntArray([3622027469]),q(n.spatialReference.wkid,C,a);else if(n instanceof e)C.updateIntArray([14]),void 0!==n.wkid&&null!==n.wkid&&C.updateIntArray([n.wkid]),n.wkt&&C.updateWithString(n.wkt),n.wkt2&&C.updateWithString(n.wkt2);else{if(x.isFunctionParameter(n))throw new l.ArcadeExecutionError(a.context,l.ExecutionErrorCodes.UnsupportedHashType,a.node);if(x.isFeatureSet(n))throw new l.ArcadeExecutionError(a.context,
l.ExecutionErrorCodes.UnsupportedHashType,a.node);x.isFeatureSetCollection(n);throw new l.ArcadeExecutionError(a.context,l.ExecutionErrorCodes.UnsupportedHashType,a.node);}}}}F.registerFunctions=function(n,C){n.portal=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);return new K(x.toString(M[0]))})};n.typeof=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);c=x.getType(M[0]);if("Unrecognized Type"===c)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.UnrecognizedType,E);return c})};
n.trim=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);return x.toString(M[0]).trim()})};n.tohex=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);c=x.toNumber(M[0]);return isNaN(c)?c:c.toString(16)})};n.upper=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);return x.toString(M[0]).toUpperCase()})};n.proper=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,2,a,E);c=1;2===M.length&&"firstword"===x.toString(M[1]).toLowerCase()&&(c=2);S=/\s/;M=x.toString(M[0]);let ia="",v=
!0;for(let H=0;H<M.length;H++){let P=M[H];S.test(P)?1===c&&(v=!0):P.toUpperCase()!==P.toLowerCase()&&(v?(P=P.toUpperCase(),v=!1):P=P.toLowerCase());ia+=P}return ia})};n.lower=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);return x.toString(M[0]).toLowerCase()})};n.guid=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,0,1,a,E);if(0<M.length)switch(x.toString(M[0]).toLowerCase()){case "digits":return p.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return p.generateUUID();
case "digits-hyphen-parentheses":return"("+p.generateUUID()+")"}return"{"+p.generateUUID()+"}"})};n.standardizeguid=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,2,a,E);c=x.toString(M[0]);if(""===c||null===c)return"";c=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(c);if(!c)return"";c=c.groups;c=c.partA+"-"+c.partB+"-"+c.partC+"-"+c.partD+"-"+c.partE;switch(x.toString(M[1]).toLowerCase()){case "digits":return c.replace("-",
"").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return c;case "digits-hyphen-parentheses":return"("+c+")"}return"{"+c+"}"})};n.console=function(a,E){return C(a,E,(c,S,M)=>{0!==M.length&&(1===M.length?a.console(x.toString(M[0])):a.console(x.toString(M)));return x.voidOperation})};n.mid=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,3,a,E);c=x.toNumber(M[1]);if(isNaN(c))return"";c=Math.max(0,c);if(2===M.length)return x.toString(M[0]).slice(c);S=x.toNumber(M[2]);if(isNaN(S))return"";
0>S&&(S=0);return x.toString(M[0]).slice(c,c+S)})};n.find=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,3,a,E);c=0;if(2<M.length){c=x.toNumber(x.defaultUndefined(M[2],0));if(isNaN(c))return-1;0>c&&(c=0)}return x.toString(M[1]).indexOf(x.toString(M[0]),c)})};n.left=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,2,a,E);c=x.toNumber(M[1]);if(isNaN(c))return"";0>c&&(c=0);return x.toString(M[0]).slice(0,c)})};n.right=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,2,a,E);c=x.toNumber(M[1]);
return isNaN(c)||0>=c?"":x.toString(M[0]).slice(-c)})};n.split=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,4,a,E);c=x.toNumber(x.defaultUndefined(M[2],-1));S=x.toBoolean(x.defaultUndefined(M[3],!1));-1===c||null===c||!0===S?M=x.toString(M[0]).split(x.toString(M[1])):(isNaN(c)&&(c=-1),-1>c&&(c=-1),M=x.toString(M[0]).split(x.toString(M[1]),c));if(!1===S)return M;S=[];for(let ia=0;ia<M.length&&!(-1!==c&&S.length>=c);ia++)""!==M[ia]&&void 0!==M[ia]&&S.push(M[ia]);return S})};n.text=function(a,
E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,2,a,E);return x.toStringExplicit(M[0],M[1])})};n.concatenate=function(a,E){return C(a,E,(c,S,M)=>{c=[];if(1>M.length)return"";if(x.isArray(M[0])){S=x.defaultUndefined(M[2],"");for(var ia=0;ia<M[0].length;ia++)c[ia]=x.toStringExplicit(M[0][ia],S);return 1<M.length?c.join(M[1]):c.join("")}if(x.isImmutableArray(M[0])){S=x.defaultUndefined(M[2],"");for(ia=0;ia<M[0].length();ia++)c[ia]=x.toStringExplicit(M[0].get(ia),S);return 1<M.length?c.join(M[1]):c.join("")}for(S=
0;S<M.length;S++)c[S]=x.toStringExplicit(M[S]);return c.join("")})};n.reverse=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(x.isArray(M[0]))return c=M[0].slice(),c.reverse(),c;if(x.isImmutableArray(M[0]))return c=M[0].toArray().slice(),c.reverse(),c;throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.replace=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,3,4,a,E);c=x.toString(M[0]);S=x.toString(M[1]);const ia=x.toString(M[2]);return(4===M.length?x.toBoolean(M[3]):
1)?x.multiReplace(c,S,ia):c.replace(S,ia)})};n.schema=function(a,E){return C(a,E,(c,S,M)=>{if(x.isFeature(M[0]))return(c=x.featureSchema(M[0]))?m.convertObjectToArcadeDictionary(c,x.defaultTimeZone(a)):null;throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.subtypes=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(x.isFeature(M[0]))return(c=x.featureSubtypes(M[0]))?m.convertObjectToArcadeDictionary(c,x.defaultTimeZone(a)):null;throw new l.ArcadeExecutionError(a,
l.ExecutionErrorCodes.InvalidParameter,E);})};n.subtypecode=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(x.isFeature(M[0])){c=x.featureSubtypes(M[0]);if(!c)return null;if(c.subtypeField&&M[0].hasField(c.subtypeField)){M=M[0].field(c.subtypeField);for(const ia of c.subtypes)if(ia.code===M)return ia.code}return null}throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.subtypename=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(x.isFeature(M[0])){c=
x.featureSubtypes(M[0]);if(!c)return"";if(c.subtypeField&&M[0].hasField(c.subtypeField)){M=M[0].field(c.subtypeField);for(const ia of c.subtypes)if(ia.code===M)return ia.name}return""}throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.gdbversion=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(x.isFeature(M[0]))return M[0].gdbVersion();throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.domain=function(a,E){return C(a,E,(c,
S,M)=>{x.pcCheck(M,2,3,a,E);if(x.isFeature(M[0]))return(c=x.featureFullDomain(M[0],x.toString(M[1]),void 0===M[2]?void 0:M[2]))&&c.domain?"coded-value"===c.domain.type||"codedValue"===c.domain.type?m.convertObjectToArcadeDictionary({type:"codedValue",name:c.domain.name,dataType:r.layerFieldEsriConstants[c.field.type],codedValues:c.domain.codedValues.map(ia=>({name:ia.name,code:ia.code}))},x.defaultTimeZone(a)):m.convertObjectToArcadeDictionary({type:"range",name:c.domain.name,dataType:r.layerFieldEsriConstants[c.field.type],
min:c.domain.minValue,max:c.domain.maxValue},x.defaultTimeZone(a)):null;throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.domainname=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,4,a,E);if(x.isFeature(M[0]))return x.featureDomainValueLookup(M[0],x.toString(M[1]),M[2],void 0===M[3]?void 0:M[3]);throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.domaincode=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,2,4,a,E);if(x.isFeature(M[0]))return x.featureDomainCodeLookup(M[0],
x.toString(M[1]),M[2],void 0===M[3]?void 0:M[3]);throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);})};n.urlencode=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(null===M[0])return"";if(M[0]instanceof m){c="";for(const ia of M[0].keys())S=M[0].field(ia),""!==c&&(c+="\x26"),c=null===S?c+(encodeURIComponent(ia)+"\x3d"):c+(encodeURIComponent(ia)+"\x3d"+encodeURIComponent(S));return c}return encodeURIComponent(x.toString(M[0]))})};n.hash=function(a,E){return C(a,
E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);c=new w.XXH(0);q(M[0],c,{context:a,node:E,map:new Map,currentLength:0});return c.digest()})};n.convertdirection=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,3,3,a,E);return y.convertDirection(M[0],M[1],M[2])})};n.fromjson=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,1,a,E);if(!1===x.isString(M[0]))throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.InvalidParameter,E);return m.convertJsonToArcade(JSON.parse(x.toString(M[0])),x.defaultTimeZone(a))})};
n.expects=function(a,E){return C(a,E,(c,S,M)=>{if(1>M.length)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.WrongNumberOfParameters,E);return x.voidOperation})};n.tocharcode=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,1,2,a,E);c=x.toNumber(x.defaultUndefined(M[1],0));S=x.toString(M[0]);if(0===S.length&&1===M.length)return null;if(S.length<=c||0>c)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.OutOfBounds,E);return S.charCodeAt(c)})};n.tocodepoint=function(a,E){return C(a,
E,(c,S,M)=>{x.pcCheck(M,1,2,a,E);c=x.toNumber(x.defaultUndefined(M[1],0));S=x.toString(M[0]);if(0===S.length&&1===M.length)return null;if(S.length<=c||0>c)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.OutOfBounds,E);return S.codePointAt(c)})};n.fromcharcode=function(a,E){return C(a,E,(c,S,M)=>{if(1>M.length)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.WrongNumberOfParameters,E);c=M.map(ia=>Math.trunc(x.toNumber(ia))).filter(ia=>0<=ia&&65535>=ia);return 0===c.length?null:String.fromCharCode.apply(null,
c)})};n.fromcodepoint=function(a,E){return C(a,E,(c,S,M)=>{if(1>M.length)throw new l.ArcadeExecutionError(a,l.ExecutionErrorCodes.WrongNumberOfParameters,E);let ia;try{ia=M.map(v=>Math.trunc(x.toNumber(v))).filter(v=>1114111>=v&&v>>>0===v)}catch(v){return null}return 0===ia.length?null:String.fromCodePoint.apply(null,ia)})};n.getuser=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,0,2,a,E);c=x.defaultUndefined(M[1],"");c=!0===c||!1===c?"":x.toString(c);if(null!==c&&""!==c)return null;if(0===M.length||
M[0]instanceof K){S=null;S=a.services?.portal?a.services.portal:f.getDefault();if(0<M.length&&(M=M[0].field("url"),M=M?b.hasSamePortal(M,S?.restUrl||""):!1,!M)||!S)return null;if(""===c&&(M="loaded"===S.loadStatus&&S.user?.sourceJSON?S.user.sourceJSON:null,M)){M=JSON.parse(JSON.stringify(M));for(const ia of["lastLogin","created","modified"])void 0!==M[ia]&&null!==M[ia]&&(M[ia]=new Date(M[ia]));return m.convertObjectToArcadeDictionary(M,x.defaultTimeZone(a))}return null}throw new l.ArcadeExecutionError(a,
l.ExecutionErrorCodes.InvalidParameter,E);})};n.getenvironment=function(a,E){return C(a,E,(c,S,M)=>{x.pcCheck(M,0,0,a,E);return m.convertObjectToArcadeDictionary(x.defaultExecutingContext(x.defaultTimeZone(a),a.spatialReference),x.defaultTimeZone(a),!0)})}};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["./Dictionary"],function(F){class K extends F{constructor(z){super();this.declaredClass="esri.arcade.Portal";this.immutable=!1;this.setField("url",
z);this.immutable=!0}}return K})},"esri/arcade/Attachment":function(){define(["./Dictionary"],function(F){class K extends F{constructor(z,m,l,x,r,y,w){super();this.attachmentUrl=r;this.declaredClass="esri.arcade.Attachment";this.immutable=!1;this.setField("id",z);this.setField("name",m);this.setField("contenttype",l);this.setField("size",x);this.setField("exifinfo",y);this.setField("keywords",w);this.immutable=!0}deepClone(){return new K(this.field("id"),this.field("name"),this.field("contenttype"),
this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}return K})},"esri/arcade/functions/convertdirection":function(){define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../../core/maybe"],function(F,K,z,m,l){function x(L){if(!1===m.isString(L))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,null);return L}function r(L,V){V=10**V;return Math.round(L*V)/V}function y(L){const V=parseFloat(L.toString().replace(Math.trunc(L).toString(),
"0"))*Math.sign(L);return 0>L?{fraction:V,integer:Math.ceil(L)}:{fraction:V,integer:Math.floor(L)}}function w(L,V){switch(L){case Z.north:return"SHORT"===V?"N":"North";case Z.east:return"SHORT"===V?"E":"East";case Z.south:return"SHORT"===V?"S":"South";case Z.west:return"SHORT"===V?"W":"West"}}function b(L,V){return L-Math.floor(L/V)*V}function p(L){switch(L){case X.truncated_degrees:case X.decimal_degrees:return 360;case X.radians:return H;case X.gradians:return 400;case X.seconds:return 1296E3;case X.fractional_degree_minutes:return 60;
case X.fractional_minute_seconds:return 60;default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function A(L){switch(L.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return da.north_azimuth;case "POLAR":return da.polar;case "QUADRANT":return da.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return da.south_azimuth}throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,
null,{reason:"unsupported directionType"});}function J(L){switch(L.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return X.decimal_degrees;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return X.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return X.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return X.gradians}throw new z.ArcadeExecutionError(null,
z.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function G(L,V,B){let D=null;switch(V){case X.decimal_degrees:D=ia(L,3600);break;case X.seconds:D=L;break;case X.gradians:D=ia(L,3240);break;case X.radians:D=ia(L,P);break;default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(B){case X.decimal_degrees:return v(D,3600);case X.seconds:return D;case X.gradians:return v(D,3240);case X.radians:return D/P;default:throw new z.ArcadeExecutionError(null,
z.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function d(L){l.assertIsSome(L);switch(L){case X.decimal_degrees:case X.truncated_degrees:case X.degrees_minutes_seconds:return X.decimal_degrees;case X.gradians:return X.gradians;case X.fractional_degree_minutes:return X.fractional_degree_minutes;case X.radians:return X.radians;case X.seconds:case X.fractional_minute_seconds:return X.seconds}}function k(L){switch(m.toNumber(L)){case 1:return{first:Z.north,second:Z.east};case 2:return{first:Z.south,
second:Z.east};case 3:return{first:Z.south,second:Z.west};case 4:return{first:Z.north,second:Z.west}}return null}function e(L){switch(L.toUpperCase().trim()){case "N":case "NORTH":return Z.north;case "E":case "EAST":return Z.east;case "S":case "SOUTH":return Z.south;case "W":case "WEST":return Z.west}return null}function f(L){L=parseFloat(L);if(m.isNumber(L)){if(isNaN(L))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});return L}throw new z.ArcadeExecutionError(null,
z.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function g(L,V,B){const D=B===da.quadrant;let O=null;var R=null;let ca=0;var ea=0;ea=0;if(D){if(2>L.length)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});ea=1;(R=k(m.toString(L[L.length-1])))?(O=R.first,R=R.second):(ca=1,O=e(m.toString(L[0])),R=e(m.toString(L[L.length-1])));if(null===O||null===R)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,
{reason:"invalid conversion"});}switch(V){case X.decimal_degrees:case X.radians:case X.gradians:if(0===L.length)break;return D?ra.createFromAngleMeridianAndDirection(xa.createFromAngleAndUnits(f(L[ca]),d(V)),O,R):ra.createFromAngleAndDirection(xa.createFromAngleAndUnits(f(L[ca]),d(V)),B);case X.degrees_minutes_seconds:ea=L.length-ea-ca;if(3===ea)return L=xa.createFromDegreesMinutesSeconds(f(L[ca]),f(L[ca+1]),f(L[ca+2])),D?ra.createFromAngleMeridianAndDirection(L,O,R):ra.createFromAngleAndDirection(L,
B);if(1===ea)return L=f(L[ca]),L=ua.numberToDms(L),L=xa.createFromDegreesMinutesSeconds(L.m_degrees,L.m_minutes,L.m_seconds),D?ra.createFromAngleMeridianAndDirection(L,O,R):ra.createFromAngleAndDirection(L,B)}throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function q(L){const V=new Set([" ","-","/","'",'"',"\\","^","\u00b0",U,"\t","\r","\n","*"]);let B="";for(let D=0;D<L.length;D++){const O=L.charAt(D);B=V.has(O)?B+"RRSPLITRRSPLITRR":B+O}return B.split("RRSPLITRRSPLITRR").filter(D=>
""!==D)}function n(L,V,B){const D={padding:0,rounding:0,newpos:V};let O=!1;for(;V<L.length;){const R=L[V];if(R===B)O?D.rounding++:D.padding++,V++;else if("."===R)O=!0,V++;else break}D.newpos=V-1;return D}const C=L=>(V,B,D=14)=>+L(V,B).toFixed(D),a=(L,V)=>L+V,E=(L,V)=>L-V,c=(L,V)=>L*V,S=(L,V)=>L/V,M=(L,V,B)=>C(a)(L,V,B),ia=(L,V,B)=>C(c)(L,V,B),v=(L,V,B)=>C(S)(L,V,B),H=2*Math.PI,P=648E3/Math.PI,U=String.fromCharCode(7501);var Z;(function(L){L[L.north=0]="north";L[L.east=1]="east";L[L.south=2]="south";
L[L.west=3]="west"})(Z||={});var X;(function(L){L[L.decimal_degrees=1]="decimal_degrees";L[L.seconds=2]="seconds";L[L.degrees_minutes_seconds=3]="degrees_minutes_seconds";L[L.radians=4]="radians";L[L.gradians=5]="gradians";L[L.truncated_degrees=6]="truncated_degrees";L[L.fractional_degree_minutes=7]="fractional_degree_minutes";L[L.fractional_minute_seconds=8]="fractional_minute_seconds"})(X||={});var da;(function(L){L[L.north_azimuth=1]="north_azimuth";L[L.polar=2]="polar";L[L.quadrant=3]="quadrant";
L[L.south_azimuth=4]="south_azimuth"})(da||={});var qa;(function(L){L[L.meridian=0]="meridian";L[L.direction=1]="direction"})(qa||={});class ua{constructor(L,V,B){this.m_degrees=L;this.m_minutes=V;this.m_seconds=B}getField(L){switch(L){case X.decimal_degrees:case X.truncated_degrees:return this.m_degrees;case X.fractional_degree_minutes:return this.m_minutes;case X.seconds:case X.fractional_minute_seconds:return this.m_seconds;default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});}}static secondsToDMS(L){const V=y(L).fraction;L=y(L).integer;const B=Math.floor(L/3600);L-=3600*B;const D=Math.floor(L/60);return new ua(B,D,L-60*D+V)}static numberToDms(L){var V=y(L).fraction;L=y(L).integer;const B=ia(y(100*V).fraction,100);V=y(100*V).integer;return new ua(L,V,B)}format(L,V){V=r(this.m_seconds,V);let B=this.m_minutes,D=this.m_degrees;if(L===X.seconds||L===X.fractional_minute_seconds)60<=V&&(V-=60,++B),60<=B&&(B=0,++D),360<=D&&(D=0);else if(L===
X.fractional_degree_minutes)V=0,B=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,D=this.m_degrees,60<=B&&(B=0,++D),360<=D&&(D=0);else if(L===X.decimal_degrees||L===X.truncated_degrees)L=v(this.m_seconds,3600),V=v(this.m_minutes,60),D=Math.round(this.m_degrees+V+L),V=B=0;return new ua(D,B,V)}static dmsToSeconds(L,V,B){return 3600*L+60*V+B}}class va{constructor(L,V,B){this.meridian=L;this.angle=V;this.direction=B}fetchAzimuth(L){return L===qa.meridian?this.meridian:this.direction}}class ra{constructor(L){this._angle=
L}static createFromAngleAndDirection(L,V){return new ra(new xa(ra._convertDirectionFormat(L.extractAngularUnits(X.seconds),V,da.north_azimuth)))}getAngle(L){const V=this._angle.extractAngularUnits(X.seconds);switch(L){case da.north_azimuth:case da.south_azimuth:case da.polar:return new xa(ra._convertDirectionFormat(V,da.north_azimuth,L));case da.quadrant:return L=ra.secondsNorthAzimuthToQuadrant(V),new xa(L.angle)}}getMeridian(L){const V=this._angle.extractAngularUnits(X.seconds);switch(L){case da.north_azimuth:return Z.north;
case da.south_azimuth:return Z.south;case da.polar:return Z.east;case da.quadrant:return ra.secondsNorthAzimuthToQuadrant(V).meridian}}getDirection(L){const V=this._angle.extractAngularUnits(X.seconds);switch(L){case da.north_azimuth:return Z.east;case da.south_azimuth:return Z.west;case da.polar:return Z.north;case da.quadrant:return ra.secondsNorthAzimuthToQuadrant(V).direction}}static secondsNorthAzimuthToQuadrant(L){const V=324E3>=L||972E3<=L?Z.north:Z.south;return new va(V,V===Z.north?Math.min(1296E3-
L,L):Math.abs(L-648E3),648E3<L?Z.west:Z.east)}static createFromAngleMeridianAndDirection(L,V,B){return new ra(new xa(ra.secondsQuadrantToNorthAzimuth(L.extractAngularUnits(X.seconds),V,B)))}static secondsQuadrantToNorthAzimuth(L,V,B){return V===Z.north?B===Z.east?L:1296E3-L:B===Z.east?648E3-L:648E3+L}static _convertDirectionFormat(L,V,B){let D=0;switch(V){case da.north_azimuth:D=L;break;case da.polar:D=324E3-L;break;case da.quadrant:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});case da.south_azimuth:D=L+648E3}L=0;switch(B){case da.north_azimuth:L=D;break;case da.polar:L=324E3-D;break;case da.quadrant:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case da.south_azimuth:L=D-648E3}L%=1296E3;return 0>L?1296E3+L:L}}class xa{constructor(L){this._seconds=L}static createFromAngleAndUnits(L,V){return new xa(G(L,V,X.seconds))}extractAngularUnits(L){return G(this._seconds,X.seconds,
d(L))}static createFromDegreesMinutesSeconds(L,V,B){return new xa(M(M(ia(L,3600),ia(V,60)),B))}}class wa{constructor(L,V,B,D){this.view=L;this.angle=V;this.merdian=B;this.direction=D;this._formattedDms=this._dms=null}static createFromStringAndBearing(L,V,B){return new wa(L,V.getAngle(B),V.getMeridian(B),V.getDirection(B))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){null===this._dms&&this._calculateDms();
return this._dms}fetchFormattedDms(){null===this._formattedDms&&this._calculateDms();return this._formattedDms}_calculateDms(){var L=null;let V=X.truncated_degrees,B=0;for(L=0;L<this.view.length;L++){const D=this.view[L];switch(D){case "m":L=n(this.view,L,D);V=V===X.truncated_degrees?X.fractional_degree_minutes:V;L=L.newpos;continue;case "s":L=n(this.view,L,D),V=X.fractional_minute_seconds,B=B<L.rounding?L.rounding:B,L=L.newpos}}this._dms=ua.secondsToDMS(this.angle.extractAngularUnits(X.seconds));
this._formattedDms=ua.secondsToDMS(this.angle.extractAngularUnits(X.seconds)).format(V,B)}}F.convertDirection=function(L,V,B){if(!(V instanceof K))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,null);if(!1===V.hasField("directionType"))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===V.hasField("angleType"))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});
var D=A(x(V.field("directiontype")));V=J(x(V.field("angletype")));if(m.isNumber(L)){L=m.toNumber(L);if(D===da.quadrant)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});V===X.degrees_minutes_seconds?(L=ua.numberToDms(L),D=ra.createFromAngleAndDirection(xa.createFromDegreesMinutesSeconds(L.m_degrees,L.m_minutes,L.m_seconds),D)):D=ra.createFromAngleAndDirection(xa.createFromAngleAndUnits(L,d(V)),D)}else if(m.isString(L))D=g(q(L),V,D);else if(m.isArray(L))D=
g(L,V,D);else if(m.isImmutableArray(L))D=g(L.toArray(),V,D);else throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(B instanceof K))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,null);if(!1===B.hasField("directionType"))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===B.hasField("outputType"))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,
null,{reason:"missing angleType"});L=A(x(B.field("directiontype")));V=B.hasField("angleType")?J(x(B.field("angletype"))):null;var O=x(B.field("outputType")).toUpperCase().trim();if(!L||!O)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(V||"TEXT"===O&&B.hasField("format")))throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(O){case "VALUE":if(L===da.quadrant||V===X.degrees_minutes_seconds)return B=
D.getAngle(L),L===da.quadrant&&V===X.degrees_minutes_seconds?(B=ua.secondsToDMS(B.extractAngularUnits(X.seconds)),D=[w(D.getMeridian(L),"SHORT"),B.m_degrees,B.m_minutes,B.m_seconds,w(D.getDirection(L),"SHORT")]):V===X.degrees_minutes_seconds?(D=ua.secondsToDMS(B.extractAngularUnits(X.seconds)),D=[D.m_degrees,D.m_minutes,D.m_seconds]):D=L===da.quadrant?[w(D.getMeridian(L),"SHORT"),B.extractAngularUnits(V),w(D.getDirection(L),"SHORT")]:[B.extractAngularUnits(V)],D;if((B=d(V))&&V!==X.degrees_minutes_seconds)D=
D.getAngle(L).extractAngularUnits(B);else throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return D;case "TEXT":O="";B.hasField("format")&&(O=m.toString(B.field("format")));if(null===O||""===O){B="";switch(V){case X.decimal_degrees:B=L===da.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case X.degrees_minutes_seconds:B=L===da.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case X.radians:B="R.RR";break;case X.gradians:B="GGG.GG"+U;break;
default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}L===da.quadrant&&(B="p "+B+" b");O=B}B=O;var R="",ca=null,ea=null;V=wa.createFromStringAndBearing(B,D,L);O={D:X.decimal_degrees,d:X.truncated_degrees,m:X.fractional_degree_minutes,s:X.fractional_minute_seconds,R:X.radians,G:X.gradians};for(ea=0;ea<B.length;ea++){var Y=B[ea];switch(Y){case "[":ca=B;Y={escaped:"",newpos:ea};for(ea++;ea<ca.length;){var h=ca[ea];ea++;if("]"===h)break;Y.escaped+=
h}Y.newpos=ea-1;ca=Y;R+=ca.escaped;ea=ca.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ca=n(B,ea,Y);ea=D.getAngle(L);a:{Y=O[Y];h=ca.padding;var t=ca.rounding,N=V;let Q=null;switch(Y){case X.decimal_degrees:case X.radians:case X.gradians:Q=b(r(ea.extractAngularUnits(Y),t),p(Y));ea=Q.toFixed(t).padStart(h+t+(0<t?1:0),"0");break a;case X.truncated_degrees:case X.fractional_degree_minutes:Q=b(N.fetchFormattedDms().getField(Y),p(Y));ea=Q.toFixed(t).padStart(h+t+(0<t?1:0),"0");break a;
case X.fractional_minute_seconds:Q=b(r(N.fetchDms().getField(Y),t),p(Y));ea=Q.toFixed(t).padStart(h+t+(0<t?1:0),"0");break a;default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}R+=ea;ea=ca.newpos;continue;case "P":case "p":R+=w(V.fetchMeridian(),"p"===Y?"SHORT":"LONG");continue;case "B":case "b":R+=w(V.fetchDirection(),"b"===Y?"SHORT":"LONG");continue;default:R+=Y}}return R;default:throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,
null);}};F.preciseAdd=M;F.preciseDivide=v;F.preciseMinus=(L,V,B)=>C(E)(L,V,B);F.preciseMultiply=ia;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports"],function(F){function K(m){const l=[];for(let x=0,r=m.length;x<r;x++){let y=m.charCodeAt(x);128>y?l.push(y):2048>y?l.push(192|y>>6,128|y&63):55296>y||57344<=y?l.push(224|y>>12,128|y>>6&63,128|y&63):(x++,y=65536+((y&1023)<<10|m.charCodeAt(x)&1023),l.push(240|y>>18,128|y>>12&63,128|
y>>6&63,128|y&63))}return new Uint8Array(l)}class z{constructor(m){this._seed=m;this._totallen=0;this._bufs=[];this.init()}init(){this._bufs=[];this._totallen=0;return this}updateFloatArray(m){const l=[];for(const x of m)isNaN(x)?l.push("NaN"):Infinity===x?l.push("Infinity"):-Infinity===x?l.push("-Infinity"):0===x?l.push("0"):l.push(x.toString(16));this.update(K(l.join("")))}updateIntArray(m){m=Int32Array.from(m);this.update(new Uint8Array(m.buffer))}updateUint8Array(m){this.update(Uint8Array.from(m))}updateWithString(m){return this.update(K(m))}update(m){this._bufs.push(m);
this._totallen+=m.length;return this}digest(){const m=new Uint8Array(this._totallen);let l=0;for(const x of this._bufs)m.set(x,l),l+=x.length;this.init();return this._xxHash32(m,this._seed)}_xxHash32(m,l=0){var x=l+374761393&4294967295;let r=0;if(16<=m.length){x=[l+2654435761+2246822519&4294967295,l+2246822519&4294967295,l+0&4294967295,l-2654435761&4294967295];l=m.length-16;var y=0;for(r=0;(r&4294967280)<=l;r+=4){var w=r;w=x[y]+(2246822519*(m[w]+(m[w+1]<<8))+(2246822519*(m[w+2]+(m[w+3]<<8))<<16))&
4294967295;w=w<<13|w>>>19;x[y]=2654435761*(w&65535)+(2654435761*(w>>>16)<<16)&4294967295;y=y+1&3}x=(x[0]<<1|x[0]>>>31)+(x[1]<<7|x[1]>>>25)+(x[2]<<12|x[2]>>>20)+(x[3]<<18|x[3]>>>14)&4294967295}x=x+m.length&4294967295;for(l=m.length-4;r<=l;r+=4)y=r,x=x+(3266489917*(m[y]+(m[y+1]<<8))+(3266489917*(m[y+2]+(m[y+3]<<8))<<16))&4294967295,x=x<<17|x>>>15,x=668265263*(x&65535)+(668265263*(x>>>16)<<16)&4294967295;for(;r<m.length;++r)x+=374761393*m[r],x=x<<11|x>>>21,x=2654435761*(x&65535)+(2654435761*(x>>>16)<<
16)&4294967295;x^=x>>>15;x=(2246822519*(x&65535)&4294967295)+(2246822519*(x>>>16)<<16);x^=x>>>13;x=(3266489917*(x&65535)&4294967295)+(3266489917*(x>>>16)<<16);x^=x>>>16;return 0>x?x+4294967296:x}}F.XXH=z;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../request ./executionError ./parser ./featureset/support/RecentlyUsedCache ../portal/Portal".split(" "),function(F,K,z,m,l,x){class r{constructor(y){this.portalUri=y}normalizeModuleUri(y){const w=
/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi;var b=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;const p=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,A=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var J=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;if(y.startsWith("portal+")){let k=y.slice(7);var G="",d=k;let e=!1;for(const f of[b,A,p])if(b=f.exec(k),null!==b){G=b.groups;d=G.itemid;G=G.portalurl;
e=!0;break}if(!1===e)if(w.test(k))d=k,G=this.portalUri;else throw new z.ModuleError(z.ModuleErrorCodes.UnsupportedUriProtocol,{uri:y});d.includes("/")&&(d=d.split("/")[0]);d.includes("?")&&(d=d.split("?")[0]);y="current";J=J.exec(d);null!==J&&(y=J.groups,d=y.itemid,y=y.versionstring);k=(new x({url:G})).restUrl+"/content/items/"+d+"/resources/"+y+".arc";return{url:k,scheme:"portal",uri:"PO:"+k}}if(y.startsWith("mock")){if("mock"===y)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',
uri:"mock"};d=y.replace("mock:","");if(void 0!==r.mocks[d])return{url:"",scheme:"mock",data:r.mocks[d],uri:y}}throw new z.ModuleError(z.ModuleErrorCodes.UnrecognizedUri,{uri:y});}async fetchModule(y){var w=r.cachedModules.getFromCache(y.uri);if(w)return w;w=this.fetchSource(y);r.cachedModules.addToCache(y.uri,w);let b=null;try{b=await w}catch(p){throw r.cachedModules.removeFromCache(y.uri),p;}return b}async fetchSource(y){if("portal"===y.scheme){const w=await K(y.url,{responseType:"text",query:{}});
if(w.data)return m.parseScript(w.data,[])}if("mock"===y.scheme)return m.parseScript(y.data??"",[]);throw new z.ModuleError(z.ModuleErrorCodes.UnsupportedUriProtocol);}static create(y){return new r(y)}static getDefault(){return this._default??(r._default=r._moduleResolverFactory())}static set moduleResolverClass(y){this._moduleResolverFactory=y;this._default=null}}r.mocks={};r.cachedModules=new l(30);r._default=null;r._moduleResolverFactory=()=>{const y=x.getDefault();return new r(y.url)};F.ArcadeModuleResolver=
r;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","../chunks/index","./treeAnalysis"],function(F,K,z){F.parseScript=function(m,l=[]){m=K.rt(m);if(null===m.body||void 0===m.body)throw new K.T({index:0,line:0,column:0,data:null,description:"",code:K.o.InvalidExpression});m.loadedModules={};z.findScriptDependencies(m,l);return m};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/index":function(){define(["exports"],
function(F){function K(v){return!!v&&"object"==typeof v&&"type"in v&&v.type===b.BlockStatement}function z(v){return!!v&&"object"==typeof v&&"type"in v&&v.type===b.EmptyStatement}function m(v,H){return H.loc.end.line===v.loc.start.line&&H.loc.end.column<=v.loc.start.column}function l(v,H){v=f[v];return H?v.replace(n,(P,U)=>H[U]?.toString()??""):v}function x(v,H=0){let P=v.start-v.lineStart,U=v.lineNumber;return 0>P&&(P+=H,--U),{index:v.start,line:U,column:P}}function r(v){return[{index:v.range[0],
...v.loc.start},{index:v.range[1],...v.loc.end}]}function y(v){return v in d?d[v]:0}var w={Break:"break",Continue:"continue",Else:"else",For:"for",From:"from",Function:"function",If:"if",Import:"import",Export:"export",In:"in",Return:"return",Var:"var",While:"while"},b={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockComment:"BlockComment",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",
ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",LineComment:"LineComment",Literal:"Literal",LogicalExpression:"LogicalExpression",
MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"},p=["++","--"],A=["-","+","!","~"],J="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" "),G=["||","\x26\x26"],
d={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10},k="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" "),e={InvalidModuleUri:"InvalidModuleUri",ForInOfLoopInitializer:"ForInOfLoopInitializer",IdentiferExpected:"IdentiferExpected",InvalidEscapedReservedWord:"InvalidEscapedReservedWord",InvalidExpression:"InvalidExpression",
InvalidFunctionIdentifier:"InvalidFunctionIdentifier",InvalidHexEscapeSequence:"InvalidHexEscapeSequence",InvalidLeftHandSideInAssignment:"InvalidLeftHandSideInAssignment",InvalidLeftHandSideInForIn:"InvalidLeftHandSideInForIn",InvalidTemplateHead:"InvalidTemplateHead",InvalidVariableAssignment:"InvalidVariableAssignment",KeyMustBeString:"KeyMustBeString",NoFunctionInsideBlock:"NoFunctionInsideBlock",NoFunctionInsideFunction:"NoFunctionInsideFunction",ModuleExportRootOnly:"ModuleExportRootOnly",ModuleImportRootOnly:"ModuleImportRootOnly",
PunctuatorExpected:"PunctuatorExpected",TemplateOctalLiteral:"TemplateOctalLiteral",UnexpectedBoolean:"UnexpectedBoolean",UnexpectedEndOfScript:"UnexpectedEndOfScript",UnexpectedIdentifier:"UnexpectedIdentifier",UnexpectedKeyword:"UnexpectedKeyword",UnexpectedNull:"UnexpectedNull",UnexpectedNumber:"UnexpectedNumber",UnexpectedPunctuator:"UnexpectedPunctuator",UnexpectedString:"UnexpectedString",UnexpectedTemplate:"UnexpectedTemplate",UnexpectedToken:"UnexpectedToken"},f={[e.InvalidModuleUri]:"Module uri must be a text literal.",
[e.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[e.IdentiferExpected]:"'${value}' is an invalid identifier.",[e.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[e.InvalidExpression]:"Invalid expression.",[e.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[e.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[e.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[e.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",
[e.InvalidTemplateHead]:"Invalid template structure.",[e.InvalidVariableAssignment]:"Invalid variable assignment.",[e.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[e.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[e.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[e.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[e.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",
[e.PunctuatorExpected]:"'${value}' expected.",[e.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[e.UnexpectedBoolean]:"Unexpected boolean literal.",[e.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[e.UnexpectedIdentifier]:"Unexpected identifier.",[e.UnexpectedKeyword]:"Unexpected keyword.",[e.UnexpectedNull]:"Unexpected null literal.",[e.UnexpectedNumber]:"Unexpected number.",[e.UnexpectedPunctuator]:"Unexpected ponctuator.",[e.UnexpectedString]:"Unexpected text literal.",
[e.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[e.UnexpectedToken]:"Unexpected token '${value}'."},g=class v extends Error{constructor({code:H,index:P,line:U,column:Z,len:X=0,description:da,data:qa}){super(da??H);this.declaredRootClass="esri.arcade.lib.diagnostic";this.name="ParsingError";this.code=H;this.index=P;this.line=U;this.column=Z;this.len=X;this.data=qa;this.description=da;this.range={start:{line:U,column:Z-1},end:{line:U,column:Z+X}};Error.captureStackTrace?.(this,v)}},q=class{constructor(){this.comments=
[];this._nodeStack=[];this._newComments=[]}insertInnerComments(v){if(K(v)&&0===v.body.length){var H=[];for(let P=this._newComments.length-1;0<=P;P--){let U=this._newComments[P];v.range[1]>=U.range[0]&&(H.unshift(U),this._newComments.splice(P,1))}H.length&&(v.innerComments=H)}}attachTrailingComments(v){let H=this._nodeStack.at(-1);if(H){if(K(v)&&H.range[0]>=v.range[0]&&H.range[1]<=v.range[1])for(var P=this._newComments.length-1;0<=P;P--){var U=this._newComments[P];U.range[0]>=v.range[0]&&U.range[1]<=
v.range[1]&&(H.trailingComments=[...(H.trailingComments??[]),U],this._newComments.splice(P,1))}P=[];if(0<this._newComments.length)for(U=this._newComments.length-1;0<=U;U--){let Z=this._newComments[U];m(Z,H)?(H.trailingComments=[...(H.trailingComments??[]),Z],this._newComments.splice(U,1)):m(Z,v)&&(P.unshift(Z),this._newComments.splice(U,1))}H.trailingComments&&m(H.trailingComments[0],v)&&(P=[...P,...H.trailingComments],delete H.trailingComments);0<P.length&&(v.trailingComments=P)}}attachLeadingComments(v){for(var H;0<
this._nodeStack.length;){var P=this._nodeStack[this._nodeStack.length-1];if(v.range[0]<=P.range[0])H=P,this._nodeStack.pop();else break}P=[];var U=[];if(null!=H){if(H.leadingComments){for(let Z=H.leadingComments.length-1;0<=Z;Z--){let X=H.leadingComments[Z];v.range[0]>=X.range[1]?(P.unshift(X),H.leadingComments.splice(Z,1)):v&&"object"==typeof v&&"type"in v&&v.type===b.VariableDeclarator&&!(X&&"object"==typeof X&&"type"in X&&X.type===b.BlockComment)&&(U.unshift(X),H.leadingComments.splice(Z,1))}0===
H.leadingComments.length&&delete H.leadingComments;P.length&&(v.leadingComments=P);U.length&&(v.trailingComments=[...U,...(v.trailingComments??[])])}}else{for(H=this._newComments.length-1;0<=H;H--)U=this._newComments[H],v.range[0]>=U.range[0]&&(P.unshift(U),this._newComments.splice(H,1));P.length&&(v.leadingComments=P)}}attachComments(v){if(v&&"object"==typeof v&&"type"in v&&v.type===b.Program&&0<v.body.length){let H=this._nodeStack.at(-1);H?(H.trailingComments=[...(H.trailingComments??[]),...this._newComments],
this._newComments.length=0,this._nodeStack.pop()):(v.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(v),this.attachLeadingComments(v),this.insertInnerComments(v),this._nodeStack.push(v)}collectComment(v){this.comments.push(v);this._newComments.push(v)}},n=/\$\{(.*?)\}/gu,C=class{constructor(v=!1){this.tolerant=v;this.errors=[]}recordError(v){this.errors.push(v)}tolerate(v){if(this.tolerant)this.recordError(v);else throw v;}throwError(v){throw v.description??
(v.description=l(v.code,v.data)),new g(v);}tolerateError(v){v.description??(v.description=l(v.code,v.data));v=new g(v);if(this.tolerant)this.recordError(v);else throw v;}},a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u,
E=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u,
c={fromCodePoint(v){return 65536>v?String.fromCharCode(v):String.fromCharCode(55296+(v-65536>>10))+String.fromCharCode(56320+(v-65536&1023))},isWhiteSpace(v){return 32===v||9===v||11===v||12===v||160===v||5760<=v&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(v)},isLineTerminator(v){return 10===v||13===v||8232===v||8233===v},isIdentifierStart(v){return 36===v||95===v||65<=v&&90>=v||97<=v&&122>=v||92===v||128<=v&&a.test(c.fromCodePoint(v))},isIdentifierPart(v){return 36===
v||95===v||65<=v&&90>=v||97<=v&&122>=v||48<=v&&57>=v||92===v||128<=v&&E.test(c.fromCodePoint(v))},isDecimalDigit(v){return 48<=v&&57>=v},isHexDigit(v){return 48<=v&&57>=v||65<=v&&70>=v||97<=v&&102>=v},isOctalDigit(v){return 48<=v&&55>=v}},S=[[],[],[]];p.forEach(v=>S[v.length-1]?.push(v));A.forEach(v=>S[v.length-1]?.push(v));G.forEach(v=>S[v.length-1]?.push(v));J.forEach(v=>S[v.length-1]?.push(v));"| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ").forEach(v=>
S[v.length-1]?.push(v));var M=class{constructor(v,H){this.source=v;this.errorHandler=H;this._length=v.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(v){this.index=v.index;this.lineNumber=v.lineNumber;this.lineStart=v.lineStart;this.curlyStack=v.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(v=e.UnexpectedToken){this.errorHandler.throwError({code:v,
index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1,data:{value:this.source.charAt(this.index)}})}tolerateUnexpectedToken(v=e.UnexpectedToken){this.errorHandler.tolerateError({code:v,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(v){let H=[],P=this.index-v,U={start:{line:this.lineNumber,column:this.index-this.lineStart-v},end:{line:0,column:0}};for(;!this.eof();){let Z=this.source.charCodeAt(this.index);if(this.index+=1,c.isLineTerminator(Z))return U.end=
{line:this.lineNumber,column:this.index-this.lineStart-1},H.push({multiLine:!1,start:P+v,end:this.index-1,range:[P,this.index-1],loc:U}),13===Z&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index,H}U.end={line:this.lineNumber,column:this.index-this.lineStart};return H.push({multiLine:!1,start:P+v,end:this.index,range:[P,this.index],loc:U}),H}skipMultiLineComment(){let v=[],H=this.index-2,P={start:{line:this.lineNumber,column:this.index-this.lineStart-
2},end:{line:0,column:0}};for(;!this.eof();){let U=this.source.charCodeAt(this.index);if(c.isLineTerminator(U))13===U&&10===this.source.charCodeAt(this.index+1)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index+=1;else{if(42===U&&47===this.source.charCodeAt(this.index+1))return this.index+=2,P.end={line:this.lineNumber,column:this.index-this.lineStart},v.push({multiLine:!0,start:H+2,end:this.index-2,range:[H,this.index],loc:P}),v;this.index+=1}}P.end={line:this.lineNumber,column:this.index-
this.lineStart};return v.push({multiLine:!0,start:H+2,end:this.index,range:[H,this.index],loc:P}),this.tolerateUnexpectedToken(),v}scanComments(){let v=[];for(;!this.eof();){var H=this.source.charCodeAt(this.index);if(c.isWhiteSpace(H))this.index+=1;else if(c.isLineTerminator(H))this.index+=1,13===H&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index;else if(47===H)if(H=this.source.charCodeAt(this.index+1),47===H)this.index+=2,H=this.skipSingleLineComment(2),
v=[...v,...H];else if(42===H)this.index+=2,H=this.skipMultiLineComment(),v=[...v,...H];else break;else break}return v}isKeyword(v){switch(v=v.toLowerCase(),v.length){case 2:return v===w.If||v===w.In;case 3:return v===w.Var||v===w.For;case 4:return v===w.Else;case 5:return v===w.Break||v===w.While;case 6:return v===w.Return||v===w.Import||v===w.Export;case 8:return v===w.Function||v===w.Continue;default:return!1}}codePointAt(v){let H=this.source.charCodeAt(v);55296<=H&&56319>=H&&(v=this.source.charCodeAt(v+
1),56320<=v&&57343>=v&&(H=1024*(H-55296)+v-56320+65536));return H}scanHexEscape(v){v="u"===v?4:2;let H=0;for(let P=0;P<v;P++)if(!this.eof()&&c.isHexDigit(this.source.charCodeAt(this.index)))H=16*H+"0123456789abcdef".indexOf((this.source[this.index]??"").toLowerCase()),this.index+=1;else return null;return String.fromCharCode(H)}scanUnicodeCodePointEscape(){let v=this.source[this.index],H=0;for("}"===v&&this.throwUnexpectedToken();!this.eof()&&(v=this.source[this.index]??"",this.index+=1,c.isHexDigit(v.charCodeAt(0)));)H=
16*H+"0123456789abcdef".indexOf(v.toLowerCase());return(1114111<H||"}"!==v)&&this.throwUnexpectedToken(),c.fromCodePoint(H)}getIdentifier(){let v=this.index;for(this.index+=1;!this.eof();){let H=this.source.charCodeAt(this.index);if(92===H||55296<=H&&57343>H)return this.index=v,this.getComplexIdentifier();if(c.isIdentifierPart(H))this.index+=1;else break}return this.source.slice(v,this.index)}getComplexIdentifier(){let v=this.codePointAt(this.index),H=c.fromCodePoint(v);this.index+=H.length;let P;
for(92===v&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,P=this.scanUnicodeCodePointEscape()):(P=this.scanHexEscape("u"),(null===P||"\\"===P||!c.isIdentifierStart(P.charCodeAt(0)))&&this.throwUnexpectedToken()),H=P);!this.eof()&&(v=this.codePointAt(this.index),c.isIdentifierPart(v));)P=c.fromCodePoint(v),H+=P,this.index+=P.length,92===v&&(H=H.substring(0,H.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),
this.index+=1,"{"===this.source[this.index]?(this.index+=1,P=this.scanUnicodeCodePointEscape()):(P=this.scanHexEscape("u"),(null===P||"\\"===P||!c.isIdentifierPart(P.charCodeAt(0)))&&this.throwUnexpectedToken()),H+=P);return H}octalToDecimal(v){let H="0"!==v,P="01234567".indexOf(v);return!this.eof()&&c.isOctalDigit(this.source.charCodeAt(this.index))&&(H=!0,P=8*P+"01234567".indexOf(this.source[this.index]??""),this.index+=1,"0123".includes(v)&&!this.eof()&&c.isOctalDigit(this.source.charCodeAt(this.index))&&
(P=8*P+"01234567".indexOf(this.source[this.index]??""),this.index+=1)),{code:P,octal:H}}scanIdentifier(){let v,H=this.index,P=92===this.source.charCodeAt(H)?this.getComplexIdentifier():this.getIdentifier();if(1===P.length?v=3:this.isKeyword(P)?v=4:"null"===P.toLowerCase()?v=5:"true"===P.toLowerCase()||"false"===P.toLowerCase()?v=1:v=3,3!==v&&H+P.length!==this.index){let U=this.index;this.index=H;this.tolerateUnexpectedToken(e.InvalidEscapedReservedWord);this.index=U}return{type:v,value:P,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:H,end:this.index}}scanPunctuator(){let v=this.index,H=this.source[this.index]??"";switch(H){case "(":case "{":"{"===H&&this.curlyStack.push("{");this.index+=1;break;case ".":this.index+=1;break;case "}":this.index+=1;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":this.index+=1;break;default:for(let P=S.length;0<P;P--)if(H=this.source.substring(this.index,this.index+P),S[P-1]?.includes(H)){this.index+=P;break}}return this.index===
v&&this.throwUnexpectedToken(),{type:7,value:H,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}}scanHexLiteral(v){let H="";for(;!this.eof()&&c.isHexDigit(this.source.charCodeAt(this.index));)H+=this.source[this.index],this.index+=1;return 0===H.length&&this.throwUnexpectedToken(),c.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(`0x${H}`,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}}scanBinaryLiteral(v){let H=
"";for(;!this.eof();){var P=this.source[this.index];if("0"!==P&&"1"!==P)break;H+=this.source[this.index];this.index+=1}(0===H.length&&this.throwUnexpectedToken(),this.eof())||(P=this.source.charCodeAt(this.index),(c.isIdentifierStart(P)||c.isDecimalDigit(P))&&this.throwUnexpectedToken());return{type:6,value:Number.parseInt(H,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}}scanOctalLiteral(v,H){let P="",U=!1;c.isOctalDigit(v.charCodeAt(0))&&(U=!0,P=`0${this.source[this.index]}`);
for(this.index+=1;!this.eof()&&c.isOctalDigit(this.source.charCodeAt(this.index));)P+=this.source[this.index],this.index+=1;return!U&&0===P.length&&this.throwUnexpectedToken(),(c.isIdentifierStart(this.source.charCodeAt(this.index))||c.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(P,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:H,end:this.index}}scanNumericLiteral(){let v=this.index,H=this.source[v]??"";if(!c.isDecimalDigit(H.charCodeAt(0))&&
"."!==H)throw Error("ASSERT: Numeric literal must start with a decimal digit or a decimal point");let P="";if("."!==H){if(P=this.source[this.index]??"",this.index+=1,H=this.source[this.index]??"","0"===P){if("x"===H||"X"===H)return this.index+=1,this.scanHexLiteral(v);if("b"===H||"B"===H)return this.index+=1,this.scanBinaryLiteral(v);if("o"===H||"O"===H)return this.scanOctalLiteral(H,v)}for(;c.isDecimalDigit(this.source.charCodeAt(this.index));)P+=this.source[this.index],this.index+=1;H=this.source[this.index]??
""}if("."===H){P+=this.source[this.index];for(this.index+=1;c.isDecimalDigit(this.source.charCodeAt(this.index));)P+=this.source[this.index],this.index+=1;H=this.source[this.index]??""}if("e"===H||"E"===H)if(P+=this.source[this.index],this.index+=1,H=this.source[this.index]??"",("+"===H||"-"===H)&&(P+=this.source[this.index],this.index+=1),c.isDecimalDigit(this.source.charCodeAt(this.index)))for(;c.isDecimalDigit(this.source.charCodeAt(this.index));)P+=this.source[this.index],this.index+=1;else this.throwUnexpectedToken();
return c.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseFloat(P),lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}}scanStringLiteral(){let v=this.index,H=this.source[v];if("'"!==H&&'"'!==H)throw Error("ASSERT: String literal must starts with a quote");this.index+=1;let P="";for(;!this.eof();){var U=this.source[this.index]??"";if(this.index+=1,U===H){H="";break}if("\\"===U)if(U=this.source[this.index]??"",this.index+=
1,U&&c.isLineTerminator(U.charCodeAt(0)))this.lineNumber+=1,"\r"===U&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(U){case "u":"{"===this.source[this.index]?(this.index+=1,P+=this.scanUnicodeCodePointEscape()):(U=this.scanHexEscape(U),null===U&&this.throwUnexpectedToken(),P+=U);break;case "x":U=this.scanHexEscape(U);null===U&&this.throwUnexpectedToken(e.InvalidHexEscapeSequence);P+=U;break;case "n":P+="\n";break;case "r":P+="\r";break;case "t":P+="\t";break;
case "b":P+="\b";break;case "f":P+="\f";break;case "v":P+="\v";break;case "8":case "9":P+=U;this.tolerateUnexpectedToken();break;default:U&&c.isOctalDigit(U.charCodeAt(0))?(U=this.octalToDecimal(U),P+=String.fromCharCode(U.code)):P+=U}else{if(c.isLineTerminator(U.charCodeAt(0)))break;P+=U}}return""!==H&&(this.index=v,this.throwUnexpectedToken()),{type:8,value:P,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}}scanTemplate(){let v="",H=!1,P=this.index,U="`"===this.source[P],
Z=!1,X=2;for(this.index+=1;!this.eof();){var da=this.source[this.index]??"";if(this.index+=1,"`"===da){X=1;H=Z=!0;break}if("$"===da){if("{"===this.source[this.index]){this.curlyStack.push("${");this.index+=1;H=!0;break}v+=da}else if("\\"===da)if(da=this.source[this.index]??"",this.index+=1,c.isLineTerminator(da.charCodeAt(0)))this.lineNumber+=1,"\r"===da&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(da){case "n":v+="\n";break;case "r":v+="\r";break;case "t":v+=
"\t";break;case "u":if("{"===this.source[this.index])this.index+=1,v+=this.scanUnicodeCodePointEscape();else{let qa=this.index,ua=this.scanHexEscape(da);null!==ua?v+=ua:(this.index=qa,v+=da)}break;case "x":da=this.scanHexEscape(da);null===da&&this.throwUnexpectedToken(e.InvalidHexEscapeSequence);v+=da;break;case "b":v+="\b";break;case "f":v+="\f";break;case "v":v+="\v";break;default:"0"===da?(c.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(e.TemplateOctalLiteral),v+=
"\x00"):c.isOctalDigit(da.charCodeAt(0))?this.throwUnexpectedToken(e.TemplateOctalLiteral):v+=da}else c.isLineTerminator(da.charCodeAt(0))?(this.lineNumber+=1,"\r"===da&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index,v+="\n"):v+=da}return H||this.throwUnexpectedToken(),U||this.curlyStack.pop(),{type:10,value:this.source.slice(P+1,this.index-X),cooked:v,head:U,tail:Z,lineNumber:this.lineNumber,lineStart:this.lineStart,start:P,end:this.index}}lex(){if(this.eof())return{type:2,
value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};let v=this.source.charCodeAt(this.index);return c.isIdentifierStart(v)?this.scanIdentifier():40===v||41===v||59===v?this.scanPunctuator():39===v||34===v?this.scanStringLiteral():46===v?c.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():c.isDecimalDigit(v)?this.scanNumericLiteral():96===v||125===v&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=v&&57343>v&&c.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}},ia=class{constructor(v,H={},P){this.delegate=P;this.hasLineTerminator=!1;this.options={tokens:"boolean"==typeof H.tokens&&H.tokens,comments:"boolean"==typeof H.comments&&H.comments,tolerant:"boolean"==typeof H.tolerant&&H.tolerant};this.options.comments&&(this.commentHandler=new q);this.errorHandler=new C(this.options.tolerant);this.scanner=new M(v,this.errorHandler);this.context={isAssignmentTarget:!1,
blockContext:0,curlyParsingType:0};this.rawToken={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(v,H,{validTypes:P,invalidTypes:U}){P?.some(Z=>v.type===Z)||U?.some(Z=>
v.type===Z)&&this.throwError(e.InvalidExpression,H)}throwError(v,H,P=this.endMarker){let {index:U,line:Z,column:X}=H;this.errorHandler.throwError({code:v,index:U,line:Z,column:X+1,len:P.index-U-1})}tolerateError(v,H){throw Error("######################################### !!!");}unexpectedTokenError(v={}){let {rawToken:H}=v,{code:P,data:U}=v;if(H){if(!P)switch(H.type){case 2:P=e.UnexpectedEndOfScript;break;case 3:P=e.UnexpectedIdentifier;break;case 6:P=e.UnexpectedNumber;break;case 8:P=e.UnexpectedString;
break;case 10:P=e.UnexpectedTemplate}v=H.value.toString()}else v="ILLEGAL";P??=e.UnexpectedToken;U||={value:v};v=l(P,U);if(H)return new g({code:P,index:H.start,line:H.lineNumber,column:H.start-H.lineStart+1,len:H.end-H.start-1,data:U,description:v});let {index:Z,line:X}=this.endMarker;return new g({code:P,index:Z,line:X,column:this.endMarker.column+1,data:U,description:v})}throwUnexpectedToken(v={}){throw v.rawToken??(v.rawToken=this.rawToken),this.unexpectedTokenError(v);}collectComments(v){let {commentHandler:H}=
this;H&&v.length&&v.forEach(P=>{P={type:P.multiLine?b.BlockComment:b.LineComment,value:this.getSourceValue(P),range:P.range,loc:P.loc};H.collectComment(P)})}peekAhead(v){let H=this.scanner.saveState();v=v.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(H),v}getSourceValue(v){return this.scanner.source.slice(v.start,v.end)}convertToToken(v){return{type:k[v.type],value:this.getSourceValue(v),range:[v.start,v.end],loc:{start:{line:this.startMarker.line,
column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;let v=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=
this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=v.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(v){return{range:[v.index,this.endMarker.index],loc:{start:{line:v.line,column:v.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(v){return(this.delegate??
this.commentHandler)&&(this.commentHandler?.attachComments(v),this.delegate?.(v)),v}expectPunctuator(v){let H=this.rawToken;this.matchPunctuator(v)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:H,code:e.PunctuatorExpected,data:{value:v}})}expectKeyword(v){4===this.rawToken.type&&this.rawToken.value.toLowerCase()===v.toString()?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}expectContextualKeyword(v){3===this.rawToken.type&&this.rawToken.value.toLowerCase()===
v?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}matchKeyword(v){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===v}matchContextualKeyword(v){return 3===this.rawToken.type&&this.rawToken.value===v}matchPunctuator(v){return 7===this.rawToken.type&&this.rawToken.value===v}getMatchingPunctuator(v){if("string"==typeof v&&(v=v.split("")),7===this.rawToken.type&&v.length)return v.find(this.matchPunctuator.bind(this))}isolateCoverGrammar(v){let H=this.context.isAssignmentTarget;
this.context.isAssignmentTarget=!0;v=v.call(this);return this.context.isAssignmentTarget=H,v}inheritCoverGrammar(v){var H;let P=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;v=v.call(this);return(H=this.context).isAssignmentTarget&&(H.isAssignmentTarget=P),v}withBlockContext(v,H){let P=this.context.blockContext;this.context.blockContext|=v;v=this.context.curlyParsingType;this.context.curlyParsingType=1;H=H.call(this);return this.context.blockContext=P,this.context.curlyParsingType=
v,H}consumeSemicolon(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(2===this.rawToken.type||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))}parsePrimaryExpression(){let v=this.captureStartMarker(),H=this.rawToken;switch(H.type){case 3:return this.readNextRawToken(),this.finalize({type:b.Identifier,name:H.value,
...this.getItemLocation(v)});case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Literal,value:H.value,raw:this.getSourceValue(H),isString:"string"==typeof H.value,...this.getItemLocation(v)});case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Literal,value:"true"===H.value.toLowerCase(),raw:this.getSourceValue(H),isString:!1,...this.getItemLocation(v)});case 5:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),
this.finalize({type:b.Literal,value:null,raw:this.getSourceValue(H),isString:!1,...this.getItemLocation(v)});case 10:return this.parseTemplateLiteral();case 7:switch(H.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));case "[":return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));case "{":return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=
!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){let v=this.captureStartMarker();this.expectPunctuator("[");let H=[];for(;!this.matchPunctuator("]");){let P=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(e.InvalidExpression,P)):(H.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),
this.finalize({type:b.ArrayExpression,elements:H,...this.getItemLocation(v)})}parseObjectPropertyKey(){let v=this.captureStartMarker(),H=this.rawToken;switch(H.type){case 8:return this.readNextRawToken(),this.finalize({type:b.Literal,value:H.value,raw:this.getSourceValue(H),isString:!0,...this.getItemLocation(v)});case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize({type:b.Identifier,name:H.value,...this.getItemLocation(v)});default:this.throwError(e.KeyMustBeString,v)}}parseObjectProperty(){let v=
this.rawToken,H=this.captureStartMarker(),P=this.parseObjectPropertyKey(),U=!1,Z=null;return this.matchPunctuator(":")?(this.readNextRawToken(),Z=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))):3===v.type?(U=!0,Z=this.finalize({type:b.Identifier,name:v.value,...this.getItemLocation(H)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:b.Property,kind:"init",key:P,value:Z,shorthand:U,...this.getItemLocation(H)})}parseObjectExpression(){let v=this.captureStartMarker();
this.expectPunctuator("{");let H=[];for(;!this.matchPunctuator("}");)H.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:b.ObjectExpression,properties:H,...this.getItemLocation(v)})}parseTemplateElement(v=!1){var H=this.rawToken;10!==H.type&&this.throwUnexpectedToken({rawToken:H});v&&!H.head&&this.throwUnexpectedToken({code:e.InvalidTemplateHead,rawToken:H});v=this.captureStartMarker();this.readNextRawToken();
let {value:P,cooked:U,tail:Z}=H;H=this.finalize({type:b.TemplateElement,value:{raw:P,cooked:U},tail:Z,...this.getItemLocation(v)});return H.loc.start.column+=1,H.loc.end.column-=Z?1:2,H}parseTemplateLiteral(){let v=this.captureStartMarker(),H=[],P=[],U=this.parseTemplateElement(!0);for(P.push(U);!U.tail;)H.push(this.parseExpression()),U=this.parseTemplateElement(),P.push(U);return this.finalize({type:b.TemplateLiteral,quasis:P,expressions:H,...this.getItemLocation(v)})}parseGroupExpression(){this.expectPunctuator("(");
let v=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));return this.expectPunctuator(")"),v}parseArguments(){this.expectPunctuator("(");let v=[];if(!this.matchPunctuator(")"))for(;;){let H=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));if(v.push(H),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),v}parseMemberName(){let v=this.rawToken,H=this.captureStartMarker();return this.readNextRawToken(),
5!==v.type&&3!==v.type&&4!==v.type&&1!==v.type&&this.throwUnexpectedToken({rawToken:v}),this.finalize({type:b.Identifier,name:v.value,...this.getItemLocation(H)})}parseLeftHandSideExpression(){let v=this.captureStartMarker(),H=this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this)),P=this.captureStartMarker();for(var U;U=this.getMatchingPunctuator("([.");)switch(U){case "(":this.context.isAssignmentTarget=!1;H.type!==b.Identifier&&H.type!==b.MemberExpression&&this.throwError(e.IdentiferExpected,
v,P);U=this.parseArguments();H=this.finalize({type:b.CallExpression,callee:H,arguments:U,...this.getItemLocation(v)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");U=this.isolateCoverGrammar(()=>this.parseExpression());this.expectPunctuator("]");H=this.finalize({type:b.MemberExpression,computed:!0,object:H,property:U,...this.getItemLocation(v)});continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),U=this.parseMemberName(),H=this.finalize({type:b.MemberExpression,
computed:!1,object:H,property:U,...this.getItemLocation(v)})}return H}parseUpdateExpression(){let v=this.captureStartMarker(),H=this.getMatchingPunctuator(p);if(H){this.readNextRawToken();var P=this.captureStartMarker(),U=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return U.type!==b.Identifier&&U.type!==b.MemberExpression&&U.type!==b.CallExpression&&this.throwError(e.InvalidExpression,P),this.context.isAssignmentTarget||this.tolerateError(e.InvalidLeftHandSideInAssignment,v),this.context.isAssignmentTarget=
!1,this.finalize({type:b.UpdateExpression,operator:H,argument:U,prefix:!0,...this.getItemLocation(v)})}P=this.captureStartMarker();U=this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this));let Z=this.captureStartMarker();return this.hasLineTerminator||(H=this.getMatchingPunctuator(p),!H)?U:(U.type!==b.Identifier&&U.type!==b.MemberExpression&&this.throwError(e.InvalidExpression,P,Z),this.context.isAssignmentTarget||this.tolerateError(e.InvalidLeftHandSideInAssignment,v),this.readNextRawToken(),
this.context.isAssignmentTarget=!1,this.finalize({type:b.UpdateExpression,operator:H,argument:U,prefix:!1,...this.getItemLocation(v)}))}parseUnaryExpression(){let v=this.getMatchingPunctuator(A);if(v){let H=this.captureStartMarker();this.readNextRawToken();let P=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return this.context.isAssignmentTarget=!1,this.finalize({type:b.UnaryExpression,operator:v,argument:P,prefix:!0,...this.getItemLocation(H)})}return this.parseUpdateExpression()}parseBinaryExpression(){var v=
this.rawToken,H=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));if(7!==this.rawToken.type)return H;var P=this.rawToken.value,U=y(P);if(0===U)return H;this.readNextRawToken();this.context.isAssignmentTarget=!1;v=[v,this.rawToken];var Z=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));P=[H,P,Z];for(var X=[U];7===this.rawToken.type&&0<(U=y(this.rawToken.value));){for(;2<P.length&&U<=X[X.length-1];){Z=P.pop();let qa=P.pop();X.pop();H=P.pop();v.pop();var da=v[v.length-1];da=
x(da,da.lineStart);P.push(this.finalize(this.createBinaryOrLogicalExpression(da,qa,H,Z)))}P.push(this.rawToken.value);X.push(U);v.push(this.rawToken);this.readNextRawToken();P.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)))}U=P.length-1;H=P[U];for(X=v.pop();1<U;){Z=v.pop();if(!Z)break;X=x(Z,X?.lineStart);H=this.finalize(this.createBinaryOrLogicalExpression(X,P[U-1],P[U-2],H));U-=2;X=Z}return H}createBinaryOrLogicalExpression(v,H,P,U){let Z=G.includes(H)?b.LogicalExpression:b.BinaryExpression;
return Z===b.BinaryExpression?{type:Z,operator:H,left:P,right:U,...this.getItemLocation(v)}:((P.type===b.AssignmentExpression||P.type===b.UpdateExpression)&&this.throwError(e.InvalidExpression,...r(P)),(U.type===b.AssignmentExpression||U.type===b.UpdateExpression)&&this.throwError(e.InvalidExpression,...r(P)),{type:Z,operator:H,left:P,right:U,...this.getItemLocation(v)})}parseAssignmentExpression(){let v=this.captureStartMarker(),H=this.inheritCoverGrammar(this.parseBinaryExpression.bind(this));var P=
this.captureStartMarker();let U=this.getMatchingPunctuator(J);if(!U)return H;H.type!==b.Identifier&&H.type!==b.MemberExpression&&this.throwError(e.InvalidExpression,v,P);this.context.isAssignmentTarget||this.tolerateError(e.InvalidLeftHandSideInAssignment,v);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();P=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));return this.finalize({type:b.AssignmentExpression,left:H,operator:U,right:P,...this.getItemLocation(v)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}parseStatements(v){let H=
[];for(;2!==this.rawToken.type&&!this.matchPunctuator(v);){let P=this.parseStatementListItem();z(P)||H.push(P)}return H}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(w.Function)?this.parseFunctionDeclaration():this.matchKeyword(w.Export)?this.parseExportDeclaration():this.matchKeyword(w.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){let v=this.captureStartMarker();this.expectPunctuator("{");let H=this.parseStatements("}");return this.expectPunctuator("}"),
this.finalize({type:b.BlockStatement,body:H,...this.getItemLocation(v)})}parseObjectStatement(){let v=this.captureStartMarker(),H=this.parseObjectExpression();return this.finalize({type:b.ExpressionStatement,expression:H,...this.getItemLocation(v)})}parseBlockOrObjectStatement(){return 0===this.context.curlyParsingType?this.parseObjectStatement():this.peekAhead(v=>{let H=v();return!(3!==H.type&&8!==H.type||(H=v(),7!==H.type||":"!==H.value))})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){let v=
this.rawToken;if(3!==v.type)return null;let H=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:b.Identifier,name:v.value,...this.getItemLocation(H)})}parseVariableDeclarator(){let v=this.captureStartMarker(),H=this.parseIdentifier();H||this.throwUnexpectedToken({code:e.IdentiferExpected});let P=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();let U=this.rawToken;try{P=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}catch{this.throwUnexpectedToken({rawToken:U,
code:e.InvalidVariableAssignment})}}return this.finalize({type:b.VariableDeclarator,id:H,init:P,...this.getItemLocation(v)})}parseVariableDeclarationList(){let v=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),v.push(this.parseVariableDeclarator());return v}parseVariableDeclaration(){let v=this.captureStartMarker();this.expectKeyword(w.Var);let H=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:b.VariableDeclaration,declarations:H,
kind:"var",...this.getItemLocation(v)})}parseEmptyStatement(){let v=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:b.EmptyStatement,...this.getItemLocation(v)})}parseExpressionStatement(){let v=this.captureStartMarker(),H=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:b.ExpressionStatement,expression:H,...this.getItemLocation(v)})}parseIfClause(){return this.withBlockContext(2,this.parseStatement.bind(this))}parseIfStatement(){let v=this.captureStartMarker();
this.expectKeyword(w.If);this.expectPunctuator("(");var H=this.captureStartMarker();let P=this.parseExpression();var U=this.captureStartMarker();this.expectPunctuator(")");P.type!==b.AssignmentExpression&&P.type!==b.UpdateExpression||this.throwError(e.InvalidExpression,H,U);H=this.parseIfClause();U=null;return this.matchKeyword(w.Else)&&(this.readNextRawToken(),U=this.parseIfClause()),this.finalize({type:b.IfStatement,test:P,consequent:H,alternate:U,...this.getItemLocation(v)})}parseWhileStatement(){let v=
this.captureStartMarker();this.expectKeyword(w.While);this.expectPunctuator("(");var H=this.captureStartMarker();let P=this.parseExpression(),U=this.captureStartMarker();this.expectPunctuator(")");P.type!==b.AssignmentExpression&&P.type!==b.UpdateExpression||this.throwError(e.InvalidExpression,H,U);H=this.withBlockContext(8,this.parseStatement.bind(this));return this.finalize({type:b.WhileStatement,test:P,body:H,...this.getItemLocation(v)})}parseForStatement(){let v=null,H=null,P=null,U=null,Z=null,
X=this.captureStartMarker();if(this.expectKeyword(w.For),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(w.Var)){var da=this.captureStartMarker();this.readNextRawToken();var qa=this.parseVariableDeclarationList();1===qa.length&&this.matchKeyword(w.In)?(qa[0].init&&this.throwError(e.ForInOfLoopInitializer,da),U=this.finalize({type:b.VariableDeclaration,declarations:qa,kind:"var",...this.getItemLocation(da)}),this.readNextRawToken(),Z=this.parseExpression()):
(this.matchKeyword(w.In)&&this.throwError(e.InvalidLeftHandSideInForIn,da),v=this.finalize({type:b.VariableDeclaration,declarations:qa,kind:"var",...this.getItemLocation(da)}),this.expectPunctuator(";"))}else da=this.context.isAssignmentTarget,qa=this.captureStartMarker(),v=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this)),this.matchKeyword(w.In)?(this.context.isAssignmentTarget||this.tolerateError(e.InvalidLeftHandSideInForIn,qa),v.type!==b.Identifier&&this.throwError(e.InvalidLeftHandSideInForIn,
qa),this.readNextRawToken(),U=v,Z=this.parseExpression(),v=null):(this.context.isAssignmentTarget=da,this.expectPunctuator(";"));U||(this.matchPunctuator(";")||(H=this.isolateCoverGrammar(this.parseExpression.bind(this))),this.expectPunctuator(";"),this.matchPunctuator(")")||(P=this.isolateCoverGrammar(this.parseExpression.bind(this))));this.expectPunctuator(")");da=this.withBlockContext(4,()=>this.isolateCoverGrammar(this.parseStatement.bind(this)));return U&&Z?this.finalize({type:b.ForInStatement,
left:U,right:Z,body:da,...this.getItemLocation(X)}):this.finalize({type:b.ForStatement,init:v,test:H,update:P,body:da,...this.getItemLocation(X)})}parseContinueStatement(){let v=this.captureStartMarker();return this.expectKeyword(w.Continue),this.consumeSemicolon(),this.finalize({type:b.ContinueStatement,...this.getItemLocation(v)})}parseBreakStatement(){let v=this.captureStartMarker();return this.expectKeyword(w.Break),this.consumeSemicolon(),this.finalize({type:b.BreakStatement,...this.getItemLocation(v)})}parseReturnStatement(){let v=
this.captureStartMarker();this.expectKeyword(w.Return);let H=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:b.ReturnStatement,argument:H,...this.getItemLocation(v)})}parseStatement(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?
this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case 4:switch(this.rawToken.value.toLowerCase()){case w.Break:return this.parseBreakStatement();case w.Continue:return this.parseContinueStatement();case w.For:return this.parseForStatement();case w.Function:return this.parseFunctionDeclaration();case w.If:return this.parseIfStatement();case w.Return:return this.parseReturnStatement();
case w.Var:return this.parseVariableDeclaration();case w.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){let v=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){let H=this.parseIdentifier();if(H||this.throwUnexpectedToken({rawToken:this.rawToken,code:e.IdentiferExpected}),v.push(H),this.matchPunctuator(")")||(this.expectPunctuator(","),
this.matchPunctuator(")")))break}return this.expectPunctuator(")"),v}parseFunctionDeclaration(){1===(this.context.blockContext&1)&&this.throwUnexpectedToken({code:e.NoFunctionInsideFunction});8!==(this.context.blockContext&8)&&2!==(this.context.blockContext&2)||this.throwUnexpectedToken({code:e.NoFunctionInsideBlock});let v=this.captureStartMarker();this.expectKeyword(w.Function);let H=this.parseIdentifier();H||this.throwUnexpectedToken({code:e.InvalidFunctionIdentifier});let P=this.parseFormalParameters(),
U=this.context.blockContext;this.context.blockContext|=1;let Z=this.parseBlock();return this.context.blockContext=U,this.finalize({type:b.FunctionDeclaration,id:H,params:P,body:Z,...this.getItemLocation(v)})}parseScript(){var v=this.captureStartMarker();let H=this.parseStatements();v=this.finalize({type:b.Program,body:H,...this.getItemLocation(v)});return this.options.tokens&&(v.tokens=this.tokens),this.options.tolerant&&(v.errors=this.errorHandler.errors),v}parseExportDeclaration(){0!==this.context.blockContext&&
this.throwUnexpectedToken({code:e.ModuleExportRootOnly});let v=null,H=this.captureStartMarker();return this.expectKeyword(w.Export),this.matchKeyword(w.Var)?v=this.parseVariableDeclaration():this.matchKeyword("function")?v=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:e.InvalidExpression}),this.finalize({type:b.ExportNamedDeclaration,declaration:v,specifiers:[],source:null,...this.getItemLocation(H)})}parseModuleSpecifier(){let v=this.captureStartMarker(),H=this.rawToken;if(8===
H.type)return this.readNextRawToken(),this.finalize({type:b.Literal,value:H.value,raw:this.getSourceValue(H),isString:!0,...this.getItemLocation(v)});this.throwError(e.InvalidModuleUri,v)}parseDefaultSpecifier(){let v=this.captureStartMarker(),H=this.parseIdentifier();return H||this.throwUnexpectedToken({code:e.IdentiferExpected}),this.finalize({type:b.ImportDefaultSpecifier,local:H,...this.getItemLocation(v)})}parseImportDeclaration(){0!==this.context.blockContext&&this.throwUnexpectedToken({code:e.ModuleImportRootOnly});
let v=this.captureStartMarker();this.expectKeyword(w.Import);let H=this.parseDefaultSpecifier();this.expectContextualKeyword(w.From);let P=this.parseModuleSpecifier();return this.finalize({type:b.ImportDeclaration,specifiers:[H],source:P,...this.getItemLocation(v)})}};F.Ee=function(v){return!!v&&"object"==typeof v&&"type"in v&&v.type===b.VariableDeclaration};F.Q=z;F.T=g;F.i=b;F.j=K;F.ke=function(v){return!!v&&"object"==typeof v&&"type"in v&&v.type===b.Identifier};F.l=w;F.o=e;F.q=f;F.rt=function(v,
H,P){return(new ia(v,H,P)).parseScript()}})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(function(){class F{constructor(m){const l=this;l._keys=[];l._values=[];l.length=0;m&&m.forEach(x=>{l.set(x[0],x[1])})}entries(){return[].slice.call(this.keys().map((m,l)=>[m,this._values[l]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(m){return this._keys.includes(m)}get(m){m=this._keys.indexOf(m);return-1<m?this._values[m]:null}deepGet(m){if(!m?.length)return null;
const l=(x,r)=>null==x?null:r.length?l(x instanceof F?x.get(r[0]):x[r[0]],r.slice(1)):x;return l(this.get(m[0]),m.slice(1))}set(m,l){const x=this._keys.indexOf(m);-1<x?this._values[x]=l:(this._keys.push(m),this._values.push(l),this.length=this._values.length);return this}sortedSet(m,l,x,r){var y=this._keys.length;x=x||0;r=void 0!==r?r:y-1;if(0===y)return this._keys.push(m),this._values.push(l),this;if(m===this._keys[x])return this._values.splice(x,0,l),this;if(m===this._keys[r])return this._values.splice(r,
0,l),this;if(m>this._keys[r])return this._keys.splice(r+1,0,m),this._values.splice(r+1,0,l),this;if(m<this._keys[x])return this._values.splice(x,0,l),this._keys.splice(x,0,m),this;if(x>=r)return this;y=x+Math.floor((r-x)/2);return m<this._keys[y]?this.sortedSet(m,l,x,y-1):m>this._keys[y]?this.sortedSet(m,l,y+1,r):this}size(){return this.length}clear(){this._keys.length=this.length=this._values.length=0;return this}delete(m){m=this._keys.indexOf(m);return-1<m?(this._keys.splice(m,1),this._values.splice(m,
1),this.length=this._keys.length,!0):!1}forEach(m){this._keys.forEach((l,x)=>{m(this._values[x],l,x)})}map(m){return this.keys().map((l,x)=>m(this._values[x],l,x))}filter(m){const l=this;l._keys.forEach((x,r)=>{!1===m(l._values[r],x,r)&&l.delete(x)});return this}clone(){return new F(this.entries())}}class K{constructor(m=20){this._maxEntries=m;this._values=new F}delete(m){this._values.has(m)&&this._values.delete(m)}get(m){let l=null;this._values.has(m)&&(l=this._values.get(m),this._values.delete(m),
this._values.set(m,l));return l}put(m,l){if(this._values.size()>=this._maxEntries){const x=this._values.keys()[0];this._values.delete(x)}this._values.set(m,l)}}class z{constructor(m=20){this._maxEntries=m;this._cache=new K(this._maxEntries);this._layerMetadata=new K(this._maxEntries);this._serviceMetadata=new K(this._maxEntries);this._portalItems=new K(this._maxEntries);this._portalItemLayers=new K(this._maxEntries)}clear(){this._cache=new K(this._maxEntries);this._layerMetadata=new K(this._maxEntries);
this._serviceMetadata=new K(this._maxEntries);this._portalItems=new K(this._maxEntries);this._portalItemLayers=new K(this._maxEntries)}addToCache(m,l){this._cache.put(m,l)}removeFromCache(m){this._cache.delete(m)}getFromCache(m){return this._cache.get(m)}getCachedLayerMetadata(m){return this._layerMetadata.get(m)}setCachedLayerMetadata(m,l){this._layerMetadata.put(m,l)}removeCachedLayerMetadata(m,l){this._layerMetadata.get(m)===l&&this._layerMetadata.delete(m)}getCachedServiceMetadata(m){return this._serviceMetadata.get(m)}setCachedServiceMetadata(m,
l){this._serviceMetadata.put(m,l)}removeCachedServiceMetadata(m,l){this._serviceMetadata.get(m)===l&&this._serviceMetadata.delete(m)}getCachedPortalItem(m,l){return this._portalItems.get(`${l}:${m}`)}setCachedPortalItem(m,l,x){this._portalItems.put(`${l}:${m}`,x)}removeCachedPortalItem(m,l,x){m=`${l}:${m}`;this._portalItems.get(m)===x&&this._portalItems.delete(m)}getCachedPortalItemLayer(m,l){return this._portalItemLayers.get(`${l}:${m}`)}setCachedPortalItemLayer(m,l,x){this._portalItemLayers.put(`${l}:${m}`,
x)}removeCachedPortalItemLayer(m,l,x){m=`${l}:${m}`;this._portalItemLayers.get(m)===x&&this._portalItemLayers.delete(m)}}return z})},"esri/arcade/arcadeRuntime":function(){define("exports ./arcadeEnvironment ./ArcadeModule ./ArcadeModuleLoader ./containerUtils ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(F,K,z,m,l,x,r,y,w,b,p,A,J,G,d,k,e,f,g,q){function n(B,D){const O=[];for(let R=0;R<D.arguments.length;R++)O.push(a(B,D.arguments[R]));return O}function C(B,D,O){try{return!0===D.preparsed?O(B,null,D.arguments):O(B,D,n(B,D))}catch(R){throw R;}}function a(B,D){try{switch(D.type){case "AssignmentExpression":if("MemberExpression"===D.left.type){const aa=a(B,D.left.object);let la;if(!0===D.left.computed)la=a(B,D.left.property);else if("Identifier"===D.left.property.type)la=D.left.property.name;
else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidIdentifier,D);const pa=a(B,D.right);if(b.isArray(aa))if(b.isNumber(la)){0>la&&(la=aa.length+la);if(0>la||la>aa.length)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.OutOfBounds,D);if(la===aa.length&&"\x3d"!==D.operator)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.OutOfBounds,D);aa[la]=S(pa,D.operator,aa[la],D,B)}else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.ArrayAccessorMustBeNumber,D);else if(aa instanceof
x){if(!1===b.isString(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.KeyAccessorMustBeString,D);if(!0===aa.hasField(la))aa.setField(la,S(pa,D.operator,aa.field(la),D,B));else{if("\x3d"!==D.operator)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FieldNotFound,D,{key:la});aa.setField(la,S(pa,D.operator,null,D,B))}}else if(b.isFeature(aa)){if(!1===b.isString(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.KeyAccessorMustBeString,D);if(!0===aa.hasField(la))aa.setField(la,
S(pa,D.operator,aa.field(la),D,B));else{if("\x3d"!==D.operator)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FieldNotFound,D,{key:la});aa.setField(la,S(pa,D.operator,null,D,B))}}else{if(b.isImmutableArray(aa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.Immutable,D);if(aa instanceof wa){if(!1===b.isString(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.ModuleAccessorMustBeString,D);if(!0===aa.hasGlobal(la))aa.setGlobal(la,S(pa,D.operator,aa.global(la),D,B));else throw new r.ArcadeExecutionError(B,
r.ExecutionErrorCodes.ModuleExportNotFound,D);}else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidIdentifier,D);}var O=b.voidOperation}else{var R=K.toSymbolId(D.left),ca=a(B,D.right);if(null!=B.localScope&&void 0!==B.localScope[R])B.localScope[R]={value:S(ca,D.operator,B.localScope[R].value,D,B),valueset:!0,node:D.right},O=b.voidOperation;else if(void 0!==B.globalScope[R])B.globalScope[R]={value:S(ca,D.operator,B.globalScope[R].value,D,B),valueset:!0,node:D.right},O=b.voidOperation;
else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidIdentifier,D);}return O;case "UpdateExpression":{if("CallExpression"===D.argument.type)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NeverReach,D);let aa;if("MemberExpression"===D.argument.type){const la=a(B,D.argument.object);let pa;if(!0===D.argument.computed)pa=a(B,D.argument.property);else if("Identifier"===D.argument.property.type)pa=D.argument.property.name;else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.Unrecognized,
D);if(b.isArray(la))if(b.isNumber(pa)){0>pa&&(pa=la.length+pa);if(0>pa||pa>=la.length)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.OutOfBounds,D);aa=b.toNumber(la[pa]);la[pa]="++"===D.operator?aa+1:aa-1}else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.ArrayAccessorMustBeNumber,D);else if(la instanceof x){if(!1===b.isString(pa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.KeyAccessorMustBeString,D);if(!0===la.hasField(pa))aa=b.toNumber(la.field(pa)),la.setField(pa,
"++"===D.operator?aa+1:aa-1);else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FieldNotFound,D);}else if(b.isFeature(la)){if(!1===b.isString(pa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.KeyAccessorMustBeString,D);if(!0===la.hasField(pa))aa=b.toNumber(la.field(pa)),la.setField(pa,"++"===D.operator?aa+1:aa-1);else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FieldNotFound,D);}else{if(b.isImmutableArray(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.Immutable,
D);if(la instanceof wa){if(!1===b.isString(pa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.ModuleAccessorMustBeString,D);if(!0===la.hasGlobal(pa))aa=b.toNumber(la.global(pa)),la.setGlobal(pa,"++"===D.operator?aa+1:aa-1);else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.ModuleExportNotFound,D);}else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidParameter,D);}var ea=!1===D.prefix?aa:"++"===D.operator?aa+1:aa-1}else{var Y=K.toSymbolId(D.argument);if(null!=B.localScope&&
void 0!==B.localScope[Y])aa=b.toNumber(B.localScope[Y].value),B.localScope[Y]={value:"++"===D.operator?aa+1:aa-1,valueset:!0,node:D},ea=!1===D.prefix?aa:"++"===D.operator?aa+1:aa-1;else if(void 0!==B.globalScope[Y])aa=b.toNumber(B.globalScope[Y].value),B.globalScope[Y]={value:"++"===D.operator?aa+1:aa-1,valueset:!0,node:D},ea=!1===D.prefix?aa:"++"===D.operator?aa+1:aa-1;else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidIdentifier,D);}}return ea;case "TemplateLiteral":var h="",t=
0;for(const aa of D.quasis)if(h+=aa.value?aa.value.cooked:"",!1===aa.tail){if(D.expressions[t]){var N=b,Q=N.toString,W=a(B,D.expressions[t]),ha=B,ba=D;if(b.isFunctionParameter(W))throw new r.ArcadeExecutionError(ha,r.ExecutionErrorCodes.NoFunctionInTemplateLiteral,ba);var ma=Q.call(N,W)}else ma="";h+=ma;t++}return h;case "Identifier":return Z(B,D);case "MemberExpression":return v(B,D);case "Literal":return D.value;case "CallExpression":a:try{if("MemberExpression"===D.callee.type){const aa=a(B,D.callee.object);
if(!(aa instanceof wa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FunctionNotFound,D);const la=!1===D.callee.computed?D.callee.property.name:a(B,D.callee.property);if(!aa.hasGlobal(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FunctionNotFound,D);const pa=aa.global(la);if(!b.isFunctionParameter(pa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.CallNonFunction,D);var na=pa.call(B,D)}else{if("Identifier"!==D.callee.type)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FunctionNotFound,
D);var fa=K.toSymbolId(D.callee);if(null!=B.localScope&&void 0!==B.localScope[fa]){const aa=B.localScope[fa];if(b.isFunctionParameter(aa.value)){na=aa.value.call(B,D);break a}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.CallNonFunction,D);}if(void 0!==B.globalScope[fa]){const aa=B.globalScope[fa];if(b.isFunctionParameter(aa.value)){na=aa.value.call(B,D);break a}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.CallNonFunction,D);}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.FunctionNotFound,
D);}}catch(aa){throw aa;}return na;case "UnaryExpression":return H(B,D);case "BinaryExpression":return P(B,D);case "LogicalExpression":return U(B,D);case "ArrayExpression":try{ma=[];for(Q=0;Q<D.elements.length;Q++){h=a(B,D.elements[Q]);if(b.isFunctionParameter(h))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NoFunctionInArray,D);h===b.voidOperation?ma.push(null):ma.push(h)}N=ma}catch(aa){throw aa;}return N;case "ObjectExpression":ma={};ha=new Map;for(Q=0;Q<D.properties.length;Q++){t=D.properties[Q];
const aa="Identifier"===t.key.type?t.key.name:a(B,t.key),la=a(B,t.value);if(b.isFunctionParameter(la))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NoFunctionInDictionary,D);if(!1===b.isString(aa))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.KeyMustBeString,D);let pa=aa.toString();const ta=pa.toLowerCase();ha.has(ta)?pa=ha.get(ta):ha.set(ta,pa);ma[pa]=la===b.voidOperation?null:la}ba=new x(ma);ba.immutable=!1;return ba;default:throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.Unrecognized,
D);}}catch(aa){throw r.ensureArcadeExecutionError(B,D,aa);}}function E(B,D){switch(D.type){case "EmptyStatement":return b.voidOperation;case "VariableDeclaration":return ia(B,D);case "ImportDeclaration":var O=K.toSymbolId(D.specifiers[0].local),R=B.libraryResolver.loadLibrary(O);if(B.libraryResolver._moduleSingletons?.has(R.uri))var ca=B.libraryResolver._moduleSingletons.get(R.uri);else ca=new wa(R),ca.loadModule(B),B.libraryResolver._moduleSingletons?.set(R.uri,ca);B.globalScope[O]={value:ca,valueset:!0,
node:D};return b.voidOperation;case "ExportNamedDeclaration":E(B,D.declaration);if("FunctionDeclaration"===D.declaration.type)B.exports[K.toSymbolId(D.declaration.id)]="function";else if("VariableDeclaration"===D.declaration.type)for(O of D.declaration.declarations)B.exports[K.toSymbolId(O.id)]="variable";return b.voidOperation;case "BlockStatement":return M(B,D);case "FunctionDeclaration":return O=K.toSymbolId(D.id),B.globalScope[O]={valueset:!0,node:null,value:new xa(D,B)},b.voidOperation;case "ReturnStatement":return null===
D.argument?B=new b.ReturnResult(b.voidOperation):(B=a(B,D.argument),B=new b.ReturnResult(B)),B;case "IfStatement":O=a(B,D.test);if(!0===O)B=E(B,D.consequent);else if(!1===O)B=null!==D.alternate?E(B,D.alternate):b.voidOperation;else throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.BooleanConditionRequired,D);return B;case "ExpressionStatement":return B=a(B,D.expression),B=B===b.voidOperation?b.voidOperation:new b.ImplicitResult(B),B;case "BreakStatement":return b.breakResult;case "ContinueStatement":return b.continueResult;
case "ForStatement":{null!==D.init&&("VariableDeclaration"===D.init.type?E(B,D.init):a(B,D.init));const ea={testResult:!0,lastAction:b.voidOperation};do b:{O=B;R=D;ca=ea;if(null!==R.test){ca.testResult=a(O,R.test);if(!1===ca.testResult)break b;if(!0!==ca.testResult)throw new r.ArcadeExecutionError(O,r.ExecutionErrorCodes.BooleanConditionRequired,R);}ca.lastAction=E(O,R.body);ca.lastAction===b.breakResult?ca.testResult=!1:ca.lastAction instanceof b.ReturnResult?ca.testResult=!1:null!==R.update&&a(O,
R.update)}while(!0===ea.testResult);B=ea.lastAction instanceof b.ReturnResult?ea.lastAction:b.voidOperation}return B;case "ForInStatement":return c(B,D);case "WhileStatement":O=!0;R=b.voidOperation;O=a(B,D.test);if(!1===O)B=b.voidOperation;else{if(!0!==O)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.BooleanConditionRequired,D);for(;!0===O;){R=E(B,D.body);if(R===b.breakResult)break;if(R instanceof b.ReturnResult)break;O=a(B,D.test);if(!0!==O&&!1!==O)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.BooleanConditionRequired,
D);}B=R instanceof b.ReturnResult?R:b.voidOperation}return B;default:throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.Unrecognized,D);}}function c(B,D){var O=a(B,D.right);"VariableDeclaration"===D.left.type&&ia(B,D.left);var R=K.toSymbolId("VariableDeclaration"===D.left.type?D.left.declarations[0].id:D.left);let ca=null;null!=B.localScope&&void 0!==B.localScope[R]&&(ca=B.localScope[R]);null===ca&&void 0!==B.globalScope[R]&&(ca=B.globalScope[R]);if(null===ca)throw new r.ArcadeExecutionError(B,
r.ExecutionErrorCodes.InvalidIdentifier,D);if(b.isArray(O)||b.isString(O)){O=O.length;for(R=0;R<O;R++){ca.value=R;var ea=E(B,D.body);if(ea===b.breakResult)break;if(ea instanceof b.ReturnResult)return ea}return b.voidOperation}if(b.isImmutableArray(O)){for(R=0;R<O.length();R++){ca.value=R;ea=E(B,D.body);if(ea===b.breakResult)break;if(ea instanceof b.ReturnResult)return ea}return b.voidOperation}if(O instanceof x||b.isFeature(O))for(O=O.keys(),R=0;R<O.length;R++){ca.value=O[R];ea=E(B,D.body);if(ea===
b.breakResult)break;if(ea instanceof b.ReturnResult)return ea}return b.voidOperation}function S(B,D,O,R,ca){switch(D){case "\x3d":return B===b.voidOperation?null:B;case "/\x3d":return b.toNumber(O)/b.toNumber(B);case "*\x3d":return b.toNumber(O)*b.toNumber(B);case "-\x3d":return b.toNumber(O)-b.toNumber(B);case "+\x3d":return b.isString(O)||b.isString(B)?b.toString(O)+b.toString(B):b.toNumber(O)+b.toNumber(B);case "%\x3d":return b.toNumber(O)%b.toNumber(B);default:throw new r.ArcadeExecutionError(ca,
r.ExecutionErrorCodes.UnsupportedOperator,R);}}function M(B,D){let O=b.voidOperation;for(let R=0;R<D.body.length&&!(O=E(B,D.body[R]),O instanceof b.ReturnResult||O===b.breakResult||O===b.continueResult);R++);return O}function ia(B,D){for(let ca=0;ca<D.declarations.length;ca++){var O=B,R=D.declarations[ca];let ea=null===R.init?null:a(O,R.init);ea===b.voidOperation&&(ea=null);if("Identifier"!==R.id.type)throw new r.ArcadeExecutionError(O,r.ExecutionErrorCodes.InvalidIdentifier,R);const Y=K.toSymbolId(R.id);
null!=O.localScope?O.localScope[Y]={value:ea,valueset:!0,node:R.init}:O.globalScope[Y]={value:ea,valueset:!0,node:R.init}}return b.voidOperation}function v(B,D){try{const O=a(B,D.object);if(null===O)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.MemberOfNull,D);if(!1===D.computed){if("Identifier"===D.property.type){if(O instanceof x||b.isFeature(O))return O.field(D.property.name);if(O instanceof g)return l.geometryMember(O,D.property.name,B,D);if(O instanceof wa){if(!O.hasGlobal(D.property.name))throw new r.ArcadeExecutionError(B,
r.ExecutionErrorCodes.InvalidIdentifier,D);return O.global(D.property.name)}}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}let R=a(B,D.property);if(O instanceof x||b.isFeature(O)){if(b.isString(R))return O.field(R);throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}if(O instanceof wa){if(b.isString(R))return O.global(R);throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}if(O instanceof g){if(b.isString(R))return l.geometryMember(O,
R,B,D);throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}if(b.isArray(O)){if(b.isNumber(R)&&isFinite(R)&&Math.floor(R)===R){0>R&&(R=O.length+R);if(R>=O.length||0>R)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.OutOfBounds,D);return O[R]}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}if(b.isString(O)){if(b.isNumber(R)&&isFinite(R)&&Math.floor(R)===R){0>R&&(R=O.length+R);if(R>=O.length||0>R)throw new r.ArcadeExecutionError(B,
r.ExecutionErrorCodes.OutOfBounds,D);return O[R]}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}if(b.isImmutableArray(O)&&b.isNumber(R)&&isFinite(R)&&Math.floor(R)===R){0>R&&(R=O.length()+R);if(R>=O.length()||0>R)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.OutOfBounds,D);return O.get(R)}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidMemberAccessKey,D);}catch(O){throw O;}}function H(B,D){try{const O=a(B,D.argument);if(b.isBoolean(O)){if("!"===
D.operator)return!O;if("-"===D.operator)return-1*b.toNumber(O);if("+"===D.operator)return 1*b.toNumber(O);if("~"===D.operator)return~b.toNumber(O);throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.UnsupportedUnaryOperator,D);}if("~"===D.operator)return~b.toNumber(O);if("-"===D.operator)return-1*b.toNumber(O);if("+"===D.operator)return 1*b.toNumber(O);throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.UnsupportedUnaryOperator,D);}catch(O){throw O;}}function P(B,D){try{const O=a(B,D.left),
R=a(B,D.right);switch(D.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return b.binaryOperator(b.toNumber(O),b.toNumber(R),D.operator);case "\x3d\x3d":return b.equalityTest(O,R);case "!\x3d":return!b.equalityTest(O,R);case "\x3c":return b.greaterThanLessThan(O,R,D.operator);case "\x3e":return b.greaterThanLessThan(O,R,D.operator);case "\x3c\x3d":return b.greaterThanLessThan(O,R,D.operator);case "\x3e\x3d":return b.greaterThanLessThan(O,R,D.operator);case "+":return b.isString(O)||
b.isString(R)?b.toString(O)+b.toString(R):b.toNumber(O)+b.toNumber(R);case "-":return b.toNumber(O)-b.toNumber(R);case "*":return b.toNumber(O)*b.toNumber(R);case "/":return b.toNumber(O)/b.toNumber(R);case "%":return b.toNumber(O)%b.toNumber(R);default:throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.UnsupportedOperator,D);}}catch(O){throw O;}}function U(B,D){try{const O=a(B,D.left);if(b.isBoolean(O))switch(D.operator){case "||":if(!0===O)return O;const R=a(B,D.right);if(b.isBoolean(R))return R;
throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.LogicExpressionOrAnd,D);case "\x26\x26":if(!1===O)return O;const ca=a(B,D.right);if(b.isBoolean(ca))return ca;throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.LogicExpressionOrAnd,D);default:throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.LogicExpressionOrAnd,D);}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,D);}catch(O){throw O;}}function Z(B,D){try{const O=K.toSymbolId(D);if(null!=B.localScope&&
void 0!==B.localScope[O]){const R=B.localScope[O];if(!0===R.valueset)return R.value;R.value=a(B,R.node);R.valueset=!0;return R.value}if(void 0!==B.globalScope[O]){const R=B.globalScope[O];if(!0===R.valueset)return R.value;R.value=a(B,R.node);R.valueset=!0;return R.value}throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.InvalidIdentifier,D);}catch(O){throw O;}}function X(B,D,O,R){try{const ca=D.arguments,ea=a(B,ca[O]);if(b.equalityTest(ea,R))return a(B,ca[O+1]);const Y=ca.length-O;return 1===
Y?a(B,ca[O]):2===Y?null:3===Y?a(B,ca[O+2]):X(B,D,O+2,R)}catch(ca){throw ca;}}function da(B,D,O,R){try{const ca=D.arguments;if(!0===R)return a(B,ca[O+1]);if(3===ca.length-O)return a(B,ca[O+2]);const ea=a(B,ca[O+2]);if(!1===b.isBoolean(ea))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.BooleanConditionRequired,ca[O+2]);return da(B,D,O+2,ea)}catch(ca){throw ca;}}function qa(B,D,O,R){try{const ca=B.body;if(O.length!==B.params.length)throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.WrongNumberOfParameters,
R);if(null!=D.localScope)for(let Y=0;Y<O.length;Y++)D.localScope[K.toSymbolId(B.params[Y])]={value:O[Y],valueset:!0,node:null};const ea=E(D,ca);if(ea instanceof b.ReturnResult)return ea.value;if(ea===b.breakResult)throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.UnexpectedToken,R);if(ea===b.continueResult)throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.UnexpectedToken,R);return ea instanceof b.ImplicitResult?ea.value:ea}catch(ca){throw ca;}}function ua(B,D,O){const R=new V;B||={};
D||={};const ca=new x({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});ca.immutable=!1;R.textformatting={value:ca,valueset:!0,node:null};for(const ea in D)R[ea]={value:new w.NativeFunction(D[ea]),native:!0,valueset:!0,node:null};for(const ea in B)R[ea]={value:b.isGraphic(B[ea])?y.createFromGraphic(B[ea],O):B[ea],valueset:!0,node:null};return R}function va(B){console.log(B)}function ra(B){const D={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:C,
evaluateIdentifier:Z};for(let O=0;O<B.length;O++)B[O].registerFunctions(D);for(const O in D.functions)L[O]={value:new w.NativeFunction(D.functions[O]),valueset:!0,node:null},V.prototype[O]=L[O];for(B=0;B<D.signatures.length;B++)p.addFunctionDeclaration(D.signatures[B],"sync")}class xa extends w.ArcadeFunction{constructor(B,D){super();this.definition=B;this.context=D}createFunction(B){return(...D)=>{const O={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,
timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:B.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<O.depthCounter.depth)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.MaximumCallDepth,null);return qa(this.definition,O,D,null)}}call(B,D){return C(B,D,(O,R,ca)=>{O={spatialReference:B.spatialReference,services:B.services,
globalScope:B.globalScope,depthCounter:{depth:B.depthCounter.depth+1},libraryResolver:B.libraryResolver,exports:B.exports,timeZone:B.timeZone??null,console:B.console,lrucache:B.lrucache,interceptor:B.interceptor,localScope:{}};if(64<O.depthCounter.depth)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.MaximumCallDepth,D);return qa(this.definition,O,ca,D)})}marshalledCall(B,D,O,R){return R(B,D,(ca,ea,Y)=>{ca={spatialReference:B.spatialReference,globalScope:O.globalScope,services:B.services,
depthCounter:{depth:B.depthCounter.depth+1},libraryResolver:B.libraryResolver,exports:B.exports,console:B.console,timeZone:B.timeZone??null,lrucache:B.lrucache,interceptor:B.interceptor,localScope:{}};Y=Y.map(h=>!b.isFunctionParameter(h)||h instanceof w.ScopeMarshalledFunction?h:w.wrapModuleScopedResponse(h,B,R));return w.wrapModuleScopedResponse(qa(this.definition,ca,Y,D),O,R)})}}class wa extends z.ArcadeModule{constructor(B){super();this.source=B}global(B){B=this.executingContext.globalScope[B.toLowerCase()];
B.valueset||(B.value=a(this.executingContext,B.node),B.valueset=!0);if(b.isFunctionParameter(B.value)&&!(B.value instanceof w.ScopeMarshalledFunction)){const D=new w.ScopeMarshalledFunction;D.fn=B.value;D.parameterEvaluator=C;D.context=this.executingContext;B.value=D}return B.value}setGlobal(B,D){if(b.isFunctionParameter(D))throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[B.toLowerCase()]={value:D,valueset:!0,node:null}}hasGlobal(B){void 0===
this.executingContext.exports[B]&&(B=B.toLowerCase());return void 0!==this.executingContext.exports[B]?!0:!1}loadModule(B){let D=B.spatialReference;if(null===D||void 0===D)D=new q({wkid:102100});this.moduleScope=ua({},B.customfunctions,B.timeZone);this.executingContext={spatialReference:D,globalScope:this.moduleScope,localScope:null,libraryResolver:new m.ArcadeModuleLoader(B.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:B.services,console:B.console??va,timeZone:B.timeZone??
null,lrucache:B.lrucache,interceptor:B.interceptor,depthCounter:{depth:1}};M(this.executingContext,this.source.syntax)}}const L={};J.registerFunctions(L,C);f.registerFunctions(L,C);k.registerFunctions(L,C);G.registerFunctions(L,C);e.registerFunctions(L,C);d.registerFunctions(L,C);L.iif=function(B,D){try{if(!0===D.preparsed)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NeverReach,D);const O=D.arguments;b.pcCheck(null===O?[]:O,3,3,B,D);const R=a(B,O[0]);if(!1===b.isBoolean(R))throw new r.ArcadeExecutionError(B,
r.ExecutionErrorCodes.BooleanConditionRequired,D);return!0===R?a(B,O[1]):a(B,O[2])}catch(O){throw O;}};L.defaultvalue=function(B,D){try{if(!0===D.preparsed)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NeverReach,D);const O=D.arguments;b.pcCheck(null===O?[]:O,2,3,B,D);const R=a(B,O[0]);if(3===O.length){const ca=a(B,O[1]),ea=l.getNestedOptionalValue(R,ca);return null!=ea&&""!==ea?ea:a(B,O[2])}return null===R||""===R||void 0===R?a(B,O[1]):R}catch(O){throw O;}};L.decode=function(B,D){try{if(!0===
D.preparsed)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NeverReach,D);const O=D.arguments;if(2>O.length)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.WrongNumberOfParameters,D);if(2===O.length)return a(B,O[1]);if(0===(O.length-1)%2)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.WrongNumberOfParameters,D);const R=a(B,O[0]);return X(B,D,1,R)}catch(O){throw O;}};L.when=function(B,D){try{if(!0===D.preparsed)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.NeverReach,
D);const O=D.arguments;if(3>O.length)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.WrongNumberOfParameters,D);if(0===O.length%2)throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.WrongNumberOfParameters,D);const R=a(B,O[0]);if(!1===b.isBoolean(R))throw new r.ArcadeExecutionError(B,r.ExecutionErrorCodes.BooleanConditionRequired,O[0]);return da(B,D,0,R)}catch(O){throw O;}};for(const B in L)L[B]={value:new w.NativeFunction(L[B]),valueset:!0,node:null};const V=function(){};V.prototype=
L;V.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};V.prototype.pi={value:Math.PI,valueset:!0,node:null};z={fixSpatialReference:b.fixSpatialReference,parseArguments:n,standardFunction:C};ra([A.ArrayFunctions]);F.executeScript=function(B,D){let O=D.spatialReference;if(null===O||void 0===O)O=new q({wkid:102100});let R=null;B.usesModules&&(R=new m.ArcadeModuleLoader(new Map,B.loadedModules));const ca=ua(D.vars,D.customfunctions,D.timeZone);D={spatialReference:O,globalScope:ca,
localScope:null,services:D.services,exports:{},libraryResolver:R,console:D.console??va,timeZone:D.timeZone??null,lrucache:D.lrucache,interceptor:D.interceptor,depthCounter:{depth:1}};B=M(D,B);if(B instanceof b.ReturnResult||B instanceof b.ImplicitResult){B=B.value;if(B===b.voidOperation)return null;if(b.isFunctionParameter(B))throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.IllegalResult,null);return B}if(B===b.voidOperation)return null;if(B===b.breakResult)throw new r.ArcadeExecutionError(D,
r.ExecutionErrorCodes.IllegalResult,null);if(B===b.continueResult)throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.IllegalResult,null);throw new r.ArcadeExecutionError(D,r.ExecutionErrorCodes.NeverReach,null);};F.extend=ra;F.functionHelper=z;Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(F,K,z,m,l,x,r,y,w,b,p,A,J,G){function d(a){return a.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function k(a){if(!a)return null;try{return z.parseScript(a)}catch(E){}return null}function e(a,E){if(!a)return!1;if("string"===
typeof a)return E(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type||"pie-chart"===a.type){if("dot-density"===a.type){var c=a.attributes?.some(S=>E(S.valueExpression));if(c)return c}c=a.visualVariables;c=!!c&&c.some(S=>{let M=E(S.valueExpression);"size"===S.type&&(q(S.minSize)&&(M=M||E(S.minSize.valueExpression)),q(S.maxSize)&&(M=M||E(S.maxSize.valueExpression)));return M});return"valueExpression"in a&&E(a.valueExpression)?!0:
c}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo?.expression,!(!a||!E(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(S=>E(S.expression))||Array.isArray(a.content)&&a.content.some(S=>"expression"===S.type&&E(S.expressionInfo?.expression)):!1}function f(a){a=k(a);return!!a&&z.scriptTouchesGeometry(a)}function g(a){a=k(a);return!!a&&z.scriptUsesGeometryEngine(a)}function q(a){return a&&"esri.renderers.visualVariables.SizeVariable"===
a.declaredClass}const n=/^\$(feature|aggregatedFeatures)\./i,C={vars:{$feature:"any",$view:"any"},spatialReference:null};F.arcade=z.arcade;F.Dictionary=m;F.arcadeFeature=l;F.convertFeatureLayerToFeatureSet=function({layer:a,spatialReference:E,outFields:c,returnGeometry:S,lrucache:M,interceptor:ia}){if(null===a)return null;const v=z.featureSetUtils();return v?v.constructFeatureSet(a,E,c,S??!0,M,ia):null};F.convertJsonToArcade=function(a,E){return m.convertJsonToArcade(a,E)};F.convertMapToFeatureSetCollection=
function(a){if(null===a?.map)return null;const E=z.featureSetUtils();return E?E.createFeatureSetCollectionFromMap(a.map,a.spatialReference,a.lrucache,a.interceptor):null};F.convertServiceUrlToWorkspace=function({url:a,spatialReference:E,lrucache:c,interceptor:S}){const M=z.featureSetUtils();return M?M.createFeatureSetCollectionFromService(a,E,c,S):null};F.createExecContext=function(a,E,c){return{vars:{$feature:null==a?new l:l.createFromGraphic(a,c),$view:E?.view},spatialReference:E?.sr,timeZone:c??
null}};F.createFeature=function(a,E,c){return l.createFromGraphicLikeObject(E,a,c,null)};F.createFunction=function(a,E){a="string"===typeof a?k(a):a;if(!a)return null;try{return E=E||r.clone(C),z.compileScript(a,E)}catch(c){}return null};F.createSyntaxTree=k;F.dependsOnView=function(a){return z.referencesMember(a,"$view")};F.enableFeatureSetOperations=function(){return z.enableFeatureSetSupport()};F.enableGeometryOperations=function(){return z.enableGeometrySupport()};F.evalSyntaxTree=function(a,
E){let c;try{c=z.executeScript(a,E)}catch(S){c=null}return c};F.executeAsyncFunction=function(a,E){try{return a?a(E):Promise.resolve(null)}catch(c){return Promise.resolve(null)}};F.executeFunction=function(a,E){let c;try{c=a?a(E):null}catch(S){c=null}return c};F.extractFieldNames=function(a,E){if(!a)return[];a="string"===typeof a?k(a):a;if(!a)return[];let c=[];z.extractExpectedFieldLiterals(a).forEach(M=>{n.test(M)&&(M=M.replace(n,""),c.push(M))});const S=c.filter(M=>M.includes("*"));c=c.filter(M=>
!S.includes(M));E&&S.forEach(M=>{const ia=new RegExp(`^${M.split(/\*+/).map(d).join(".*")}$`,"i");E.forEach(v=>ia.test(v)?c.push(v):null)});return[...(new Set(c.sort()))]};F.getArcadeType=function(a){return null==a?null:x.isArray(a)||x.isImmutableArray(a)?"array":x.isDate(a)?"date":x.isString(a)?"text":x.isBoolean(a)?"boolean":x.isNumber(a)?"number":a instanceof m?"dictionary":x.isFeature(a)?"feature":a instanceof b?"point":a instanceof p?"polygon":a instanceof A?"polyline":a instanceof J?"multipoint":
a instanceof G?"extent":a instanceof y.DateOnly?"dateOnly":a instanceof w.TimeOnly?"time":x.isFeatureSet(a)?"featureSet":x.isFeatureSetCollection(a)?"featureSetCollection":null};F.getViewInfo=function(a){if(a&&(null!=a.spatialReference||null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new m({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};F.hasGeometryFunctions=function(a){return e(a,f)};F.hasGeometryOperations=function(a){return e(a,g)};F.hasVariable=
function(a,E){return a?z.referencesMember(a,E):!1};F.loadScriptDependencies=function(a,E,c=[]){return z.loadScriptDependencies(a,E,c)};F.updateExecContext=function(a,E){null!=a.vars&&(a.vars.$feature=E)};Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})});