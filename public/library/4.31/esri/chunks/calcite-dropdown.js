// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ./componentsUtils ./dom ./floating-ui ./interactive ./key ./loadable ./observers ./openCloseComponent".split(" "),function(k,d,e,f,n,v,l,p,q){function r(){"undefined"!==typeof customElements&&["calcite-dropdown"].forEach(a=>{switch(a){case "calcite-dropdown":customElements.get(a)||customElements.define(a,t)}})}const t=d.proxyCustomElement(class extends d.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteDropdownSelect=d.createEvent(this,"calciteDropdownSelect",
6);this.calciteDropdownBeforeClose=d.createEvent(this,"calciteDropdownBeforeClose",6);this.calciteDropdownClose=d.createEvent(this,"calciteDropdownClose",6);this.calciteDropdownBeforeOpen=d.createEvent(this,"calciteDropdownBeforeOpen",6);this.calciteDropdownOpen=d.createEvent(this,"calciteDropdownOpen",6);this.items=[];this.groups=[];this.mutationObserver=p.createObserver("mutation",()=>this.updateItems());this.resizeObserver=p.createObserver("resize",a=>this.resizeObserverCallback(a));this.openTransitionProp=
"opacity";this.guid=`calcite-dropdown-${e.guid()}`;this.focusLastDropdownItem=!1;this.setFilteredPlacements=()=>{const {el:a,flipPlacements:b}=this;this.filteredFlipPlacements=b?f.filterValidFlipPlacements(b,a):null};this.updateTriggers=a=>{this.triggers=a.target.assignedElements({flatten:!0});this.reposition(!0)};this.updateItems=()=>{this.items=this.groups.map(a=>Array.from(a?.querySelectorAll("calcite-dropdown-item"))).reduce((a,b)=>[...a,...b],[]);this.updateSelectedItems();this.reposition(!0);
this.items.forEach(a=>a.scale=this.scale)};this.updateGroups=a=>{this.groups=a.target.assignedElements({flatten:!0}).filter(b=>b?.matches("calcite-dropdown-group"));this.updateItems();this.updateGroupScale()};this.resizeObserverCallback=a=>{a.forEach(b=>{({target:b}=b);b===this.referenceEl?this.setDropdownWidth():b===this.scrollerEl&&this.setMaxScrollerHeight()})};this.setDropdownWidth=()=>{const {referenceEl:a,scrollerEl:b}=this,c=a?.clientWidth;c&&b&&(b.style.minWidth=`${c}px`)};this.setMaxScrollerHeight=
()=>{const {scrollerEl:a}=this;if(a){this.reposition(!0);var b=this.getMaxScrollerHeight();a.style.maxHeight=0<b?`${b}px`:"";this.reposition(!0)}};this.setScrollerAndTransitionEl=a=>{this.resizeObserver.observe(a);this.transitionEl=this.scrollerEl=a};this.setReferenceEl=a=>{this.referenceEl=a;f.connectFloatingUI(this,this.referenceEl,this.floatingEl);this.resizeObserver.observe(a)};this.setFloatingEl=a=>{this.floatingEl=a;f.connectFloatingUI(this,this.referenceEl,this.floatingEl)};this.keyDownHandler=
a=>{if(a.composedPath().includes(this.referenceEl)){var {defaultPrevented:b,key:c}=a;if(!b)if("Escape"===c)this.closeCalciteDropdown(),a.preventDefault();else if(this.open&&a.shiftKey&&"Tab"===c)this.closeCalciteDropdown(),a.preventDefault();else if(v.isActivationKey(c))this.toggleDropdown(),a.preventDefault();else if("ArrowDown"===c||"ArrowUp"===c)this.focusLastDropdownItem="ArrowUp"===c,this.open=!0,this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)}};this.focusOnFirstActiveOrDefaultItem=
()=>{const a=this.getTraversableItems().find(b=>b.selected)||(this.focusLastDropdownItem?this.items[this.items.length-1]:this.items[0]);this.focusLastDropdownItem=!1;a&&e.focusElement(a)};this.onOpenEnd=()=>{this.focusOnFirstActiveOrDefaultItem();this.el.removeEventListener("calciteDropdownOpen",this.onOpenEnd)};this.toggleDropdown=()=>{(this.open=!this.open)&&this.el.addEventListener("calciteDropdownOpen",this.onOpenEnd)};this.disabled=this.closeOnSelectDisabled=this.open=!1;this.flipPlacements=
void 0;this.maxItems=0;this.overlayPositioning="absolute";this.placement=f.defaultMenuPlacement;this.selectedItems=[];this.type="click";this.widthScale=void 0;this.scale="m"}openHandler(){q.onToggleOpenCloseComponent(this);this.disabled?this.open=!1:this.reposition(!0)}handleDisabledChange(a){a||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements();this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}handlePropsChange(){this.updateItems();
this.updateGroupScale()}async setFocus(){await l.componentFocusable(this);e.focusFirstTabbable(this.referenceEl)}connectedCallback(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0});this.setFilteredPlacements();this.open&&(this.openHandler(),q.onToggleOpenCloseComponent(this));this.updateItems();f.connectFloatingUI(this,this.referenceEl,this.floatingEl)}componentWillLoad(){l.setUpLoadableComponent(this)}componentDidLoad(){l.setComponentLoaded(this);f.connectFloatingUI(this,this.referenceEl,
this.floatingEl)}componentDidRender(){n.updateHostInteraction(this)}disconnectedCallback(){this.mutationObserver?.disconnect();this.resizeObserver?.disconnect();f.disconnectFloatingUI(this,this.referenceEl,this.floatingEl)}render(){const {open:a,guid:b}=this;return d.h(d.Host,{key:"377c3d9687bc025f004b4efe58bfa5f0893d86d0"},d.h(n.InteractiveContainer,{key:"9e2f48be045fc6db10cc7203a8b998ec2b6abafd",disabled:this.disabled},d.h("div",{key:"8607de2d53a4f8c4b29206ee56aa23ad4c2cbe3d",class:"calcite-trigger-container",
id:`${b}-menubutton`,onClick:this.toggleDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},d.h("slot",{key:"07de8df34055ddc39301654a5ca312ddf293e6a9","aria-controls":`${b}-menu`,"aria-expanded":e.toAriaBoolean(a),"aria-haspopup":"menu",name:"trigger",onSlotchange:this.updateTriggers})),d.h("div",{key:"c1469efb62eb704b021ce6479ad55deda59582d4","aria-hidden":e.toAriaBoolean(!a),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},d.h("div",{key:"f875166d486a53cd393f17d9295974aa449d449f",
"aria-labelledby":`${b}-menubutton`,class:{["calcite-dropdown-content"]:!0,[f.FloatingCSS.animation]:!0,[f.FloatingCSS.animationActive]:a},id:`${b}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},d.h("slot",{key:"bc6e61383aaf85b3d6242a86c50da68bc8b31e27",onSlotchange:this.updateGroups})))))}async reposition(a=!1){const {floatingEl:b,referenceEl:c,placement:g,overlayPositioning:h,filteredFlipPlacements:m}=this;return f.reposition(this,{floatingEl:b,referenceEl:c,overlayPositioning:h,placement:g,
flipPlacements:m,type:"menu"},a)}closeCalciteDropdownOnClick(a){this.disabled||!this.open||a.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(a){this.closeCalciteDropdown();a.stopPropagation()}closeCalciteDropdownOnOpenEvent(a){a.composedPath().includes(this.el)||(this.open=!1)}pointerEnterHandler(){this.disabled||"hover"!==this.type||this.toggleDropdown()}pointerLeaveHandler(){this.disabled||"hover"!==this.type||this.closeCalciteDropdown()}getTraversableItems(){return this.items.filter(a=>
!a.disabled&&!a.hidden)}calciteInternalDropdownItemKeyEvent(a){const {keyboardEvent:b}=a.detail,c=b.target,g=this.getTraversableItems();switch(b.key){case "Tab":this.open=!1;this.updateTabIndexOfItems(c);break;case "ArrowDown":e.focusElementInGroup(g,c,"next");break;case "ArrowUp":e.focusElementInGroup(g,c,"previous");break;case "Home":e.focusElementInGroup(g,c,"first");break;case "End":e.focusElementInGroup(g,c,"last")}a.stopPropagation()}handleItemSelect(a){this.updateSelectedItems();a.stopPropagation();
this.calciteDropdownSelect.emit();this.closeOnSelectDisabled&&"none"!==a.detail.requestedDropdownGroup.selectionMode||this.closeCalciteDropdown();a.stopPropagation()}updateGroupScale(){this.groups?.forEach(a=>a.scale=this.scale)}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(a=>a.selected)}getMaxScrollerHeight(){const {maxItems:a,
items:b}=this;let c=0,g=0,h;this.groups.forEach(m=>{0<a&&c<a&&Array.from(m.children).forEach((u,w)=>{0===w&&(isNaN(h)&&(h=u.offsetTop),g+=h);c<a&&(g+=u.offsetHeight,c+=1)})});return b.length>a?g:0}closeCalciteDropdown(a=!0){this.open=!1;a&&e.focusElement(this.triggers[0])}updateTabIndexOfItems(a){this.items.forEach(b=>{b.tabIndex=a!==b?-1:0})}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],
maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}}static get style(){return":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:var(--calcite-z-index-dropdown);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^\x3dbottom] .calcite-floating-ui-anim{inset-block-start:-5px}.calcite-dropdown-wrapper[data-placement^\x3dtop] .calcite-floating-ui-anim{inset-block-start:5px}.calcite-dropdown-wrapper[data-placement^\x3dleft] .calcite-floating-ui-anim{left:5px}.calcite-dropdown-wrapper[data-placement^\x3dright] .calcite-floating-ui-anim{left:-5px}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;block-size:100%;flex:1 1 auto;word-wrap:break-word;word-break:break-word}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width-scale\x3ds]){--calcite-dropdown-width:12rem}:host([width-scale\x3dm]){--calcite-dropdown-width:14rem}:host([width-scale\x3dl]){--calcite-dropdown-width:16rem}:host([hidden]){display:none}[hidden]{display:none}"}},
[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],selectedItems:[1040],type:[513],widthScale:[513,"width-scale"],scale:[513],setFocus:[64],reposition:[64]},[[8,"click","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter",
"pointerEnterHandler"],[1,"pointerleave","pointerLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]],{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],scale:["handlePropsChange"]}]);r();k.CalciteDropdown=t;k.defineCustomElement=r;Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})});