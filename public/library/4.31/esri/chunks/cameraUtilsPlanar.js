// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../geometry ../core/mathUtils ../core/libs/gl-matrix-2/math/mat4 ../core/libs/gl-matrix-2/factories/mat4f64 ../core/libs/gl-matrix-2/factories/vec2f64 ./vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ../geometry/Extent ../geometry/projection/projectPointToVector ../geometry/projection/projectVectorToVector ../geometry/support/coordsUtils ../geometry/support/frustum ../geometry/support/polygonExtentClipping ../geometry/support/ray ../views/3d/state/Frustum ../views/3d/support/cameraUtilsInternal ../geometry/Polygon".split(" "),
function(l,w,r,x,K,L,m,n,M,y,z,N,O,P,Q,R,t,A){function u(a,e,b,c=t.createDirectionUp()){const {direction:d,up:f}=c;x.fromZRotation(q,-r.deg2rad(e));x.rotateX(q,q,r.deg2rad(b));m.transformMat4(d,B,q);m.scale(d,d,-1);m.transformMat4(f,C,q);return c}function D(a,e,b,c){return t.directionToHeadingTilt(e,b,c,B,C)}function E(a,e,b,c){const d=u(a,b,c),f=n.create();m.scale(f,d.direction,-e);m.add(f,f,a);return{up:d.up,eye:f,heading:b,tilt:c}}function F(a){return r.rad2deg(a)}function G(a){return r.deg2rad(a)}
function H(a,e,b,c,d){const f=a.renderSpatialReference;a=a.spatialReference??e.spatialReference;y.projectPointToVector(e,g,f);y.projectPointToVector(e,h,f);g[0]-=b/2;h[0]+=b/2;g[1]-=c/2;h[1]+=c/2;z.projectVectorToVector(g,f,g,a);z.projectVectorToVector(h,f,h,a);d?(d.xmin=g[0],d.ymin=g[1],d.xmax=h[0],d.ymax=h[1],d.spatialReference=a):d=new M(g[0],g[1],h[0],h[1],a);return d}function I(a,e){var b=a.frustum;const {renderCoordsHelper:c}=a,d=c.getAltitude(e);e=a.spatialReference;a=a.state.camera.eye;const f=
[],S=b.planes[O.PlaneIndex.FAR];for(let v=0;4>v;v++){var p=b.lines[v];if(!c.intersectInfiniteManifold(Q.wrap(p.origin,p.direction),d,k)){var T=k;p=p.endpoint;var U=d;const J=b.lines[R.LineIndex.FAR_LEFT].direction,V=c.getAltitude(p);m.scaleAndAdd(T,p,J,(U-V)/J[2])}t.clampLineSegmentToPlane(k,a,k,S);f.push(L.fromValues(k[0],k[1]))}b=P.clipPolygonToExtent(f,c.extent);return W(b,c,e)}function W(a,e,b){a=a.map(c=>{m.set(k,c[0],c[1],0);e.fromRenderCoords(k,k,b);return[k[0],k[1]]});if(2>=a.length)return new A({spatialReference:b});
a.push(a[0].slice());N.isClockwise(a)||a.reverse();return new A({rings:[a],spatialReference:b})}const C=n.fromValues(0,1,0),B=n.fromValues(0,0,1),q=K.create(),g=n.create(),h=n.create(),k=n.create();w=Object.freeze(Object.defineProperty({__proto__:null,directionToHeadingTilt:D,eyeForCenterWithHeadingTilt:E,eyeTiltToLookAtTilt:G,headingTiltToDirectionUp:u,lookAtTiltToEyeTilt:F,toArea:I,toExtent:H},Symbol.toStringTag,{value:"Module"}));l.cameraUtilsPlanar=w;l.directionToHeadingTilt=D;l.eyeForCenterWithHeadingTilt=
E;l.eyeTiltToLookAtTilt=G;l.headingTiltToDirectionUp=u;l.lookAtTiltToEyeTilt=F;l.toArea=I;l.toExtent=H});