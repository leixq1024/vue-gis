// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ./componentsUtils ./color-picker-swatch ./dom ./interactive ./key ./loadable ./locale ./math ./t9n ./button ./icon ./input-message ./input-number ./input-text ./progress ./loader ./tab ./tab-nav ./tab-title ./tabs ./throttle".split(" "),function(z,h,c,t,B,S,r,C,v,w,T,D,E,F,G,H,U,V,W,X,Y,Z){function I(){"undefined"!==typeof customElements&&"calcite-color-picker-hex-input calcite-icon calcite-input-message calcite-input-number calcite-input-text calcite-progress".split(" ").forEach(a=>
{switch(a){case "calcite-color-picker-hex-input":customElements.get(a)||customElements.define(a,aa);break;case "calcite-icon":customElements.get(a)||D.defineCustomElement();break;case "calcite-input-message":customElements.get(a)||E.defineCustomElement();break;case "calcite-input-number":customElements.get(a)||F.defineCustomElement();break;case "calcite-input-text":customElements.get(a)||G.defineCustomElement();break;case "calcite-progress":customElements.get(a)||H.defineCustomElement()}})}function J(){"undefined"!==
typeof customElements&&"calcite-color-picker calcite-button calcite-color-picker-hex-input calcite-color-picker-swatch calcite-icon calcite-input-message calcite-input-number calcite-input-text calcite-loader calcite-progress calcite-tab calcite-tab-nav calcite-tab-title calcite-tabs".split(" ").forEach(a=>{switch(a){case "calcite-color-picker":customElements.get(a)||customElements.define(a,K);break;case "calcite-button":customElements.get(a)||T.defineCustomElement();break;case "calcite-color-picker-hex-input":customElements.get(a)||
I();break;case "calcite-color-picker-swatch":customElements.get(a)||c.defineCustomElement();break;case "calcite-icon":customElements.get(a)||D.defineCustomElement();break;case "calcite-input-message":customElements.get(a)||E.defineCustomElement();break;case "calcite-input-number":customElements.get(a)||F.defineCustomElement();break;case "calcite-input-text":customElements.get(a)||G.defineCustomElement();break;case "calcite-loader":customElements.get(a)||U.defineCustomElement();break;case "calcite-progress":customElements.get(a)||
H.defineCustomElement();break;case "calcite-tab":customElements.get(a)||V.defineCustomElement();break;case "calcite-tab-nav":customElements.get(a)||W.defineCustomElement();break;case "calcite-tab-title":customElements.get(a)||X.defineCustomElement();break;case "calcite-tabs":customElements.get(a)||Y.defineCustomElement()}})}const L=c.Color$1(),aa=h.proxyCustomElement(class extends h.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteColorPickerHexInputChange=h.createEvent(this,
"calciteColorPickerHexInputChange",6);this.onHexInputBlur=()=>{const a=this.hexInputNode;var b=a.value;const d=`#${b}`,{allowEmpty:e,internalColor:f}=this;b=e&&!b;const g=c.isLonghandHex(d);if(c.isShorthandHex(d,this.alphaChannel))this.onHexInputChange();b||c.isValidHex(d)&&g||(a.value=e&&!f?"":this.formatHexForInternalInput(c.rgbToHex(f.object())))};this.onOpacityInputBlur=()=>{const a=this.opacityInputNode,b=a.value,{allowEmpty:d,internalColor:e}=this;if(!d||b)a.value=d&&!e?"":this.formatOpacityForInternalInput(e)};
this.onOpacityInputInput=()=>{this.onOpacityInputChange()};this.onHexInputChange=()=>{var a=this.hexInputNode.value;if(a){const b=c.normalizeHex(a,!1);c.isValidHex(b)&&this.alphaChannel&&this.internalColor&&(a=c.normalizeHex(this.internalColor.hexa(),!0).slice(-2),a=`${b+a}`)}this.internalSetValue(a,this.value)};this.onOpacityInputChange=()=>{var a=this.opacityInputNode;a.value?(a=c.opacityToAlpha(Number(a.value)),a=this.internalColor?.alpha(a).hexa()):a=a.value;this.internalSetValue(a,this.value)};
this.onInputFocus=a=>{"calciteInternalInputTextFocus"===a.type?this.hexInputNode.selectText():this.opacityInputNode.selectText()};this.onHexInputInput=()=>{const a=`#${this.hexInputNode.value}`,b=this.value;c.isValidHex(a,this.alphaChannel)&&c.isLonghandHex(a,this.alphaChannel)&&this.internalSetValue(a,b)};this.onInputKeyDown=a=>{const {altKey:b,ctrlKey:d,metaKey:e,shiftKey:f}=a,{alphaChannel:g,hexInputNode:k,internalColor:n,value:p}=this;var {key:m}=a,l=a.composedPath();if("Tab"===m&&c.isShorthandHex(p,
this.alphaChannel)||"Enter"===m){if(l.includes(k))this.onHexInputChange();else this.onOpacityInputChange();"Enter"===m&&a.preventDefault()}else{var q=this.value;"ArrowDown"===m||"ArrowUp"===m?(p?this.internalSetValue(c.hexify(this.nudgeRGBChannels(n,(f?10:1)*("ArrowUp"===m?1:-1),l.includes(k)?"rgb":"a"),g),q):this.internalSetValue(this.previousNonNullValue,q),a.preventDefault()):(l=b||d||e,q=1===m.length,m=c.hexChar.test(m),!q||l||m||a.preventDefault())}};this.onHexInputPaste=a=>{const b=a.clipboardData.getData("text");
c.isValidHex(b,this.alphaChannel)&&c.isLonghandHex(b,this.alphaChannel)&&(a.preventDefault(),this.hexInputNode.value=b.slice(1),this.internalSetValue(b,this.value))};this.previousNonNullValue=this.value;this.storeHexInputRef=a=>{this.hexInputNode=a};this.storeOpacityInputRef=a=>{this.opacityInputNode=a};this.alphaChannel=this.allowEmpty=!1;this.hexLabel="Hex";this.numberingSystem=this.messages=void 0;this.scale="m";this.value=c.normalizeHex(c.hexify(L,this.alphaChannel),this.alphaChannel,!0);this.internalColor=
L}connectedCallback(){const {allowEmpty:a,alphaChannel:b,value:d}=this;if(d){const e=c.normalizeHex(d,b);c.isValidHex(e,b)&&this.internalSetValue(e,e,!1)}else a&&this.internalSetValue(null,null,!1)}componentWillLoad(){r.setUpLoadableComponent(this)}componentDidLoad(){r.setComponentLoaded(this)}handleValueChange(a,b){this.internalSetValue(a,b,!1)}render(){const {alphaChannel:a,hexLabel:b,internalColor:d,messages:e,scale:f,value:g}=this,k=this.formatHexForInternalInput(g),n=this.formatOpacityForInternalInput(d),
p="l"===f?"m":"s";return h.h("div",{key:"70f804fdbc3c29fdf49616f56c39593fdc3717da",class:"container"},h.h("calcite-input-text",{key:"777d1f8ffa673a0d74f049d4a6bdacbf3510006a",class:"hex-input",label:e?.hex||b,maxLength:this.alphaChannel?8:6,onCalciteInputTextChange:this.onHexInputChange,onCalciteInputTextInput:this.onHexInputInput,onCalciteInternalInputTextBlur:this.onHexInputBlur,onCalciteInternalInputTextFocus:this.onInputFocus,onKeyDown:this.onInputKeyDown,onPaste:this.onHexInputPaste,prefixText:"#",
ref:this.storeHexInputRef,scale:p,value:k}),a?h.h("calcite-input-number",{class:"opacity-input",key:"opacity-input",label:e?.opacity,max:c.OPACITY_LIMITS.max,maxLength:3,min:c.OPACITY_LIMITS.min,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberInput:this.onOpacityInputInput,onCalciteInternalInputNumberBlur:this.onOpacityInputBlur,onCalciteInternalInputNumberFocus:this.onInputFocus,onKeyDown:this.onInputKeyDown,ref:this.storeOpacityInputRef,scale:p,suffixText:"%",value:n}):
null)}async setFocus(){await r.componentFocusable(this);return t.focusElement(this.hexInputNode)}internalSetValue(a,b,d=!0){if(a){var {alphaChannel:e}=this;a=c.normalizeHex(a,e,e);if(c.isValidHex(a,e)){({internalColor:b}=this);a=c.Color$1(a);const f=c.normalizeHex(c.hexify(a,e),e);e=!b||f!==c.normalizeHex(c.hexify(b,e),e);this.internalColor=a;this.value=this.previousNonNullValue=f;e&&d&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.value=this.internalColor=null;
d&&this.calciteColorPickerHexInputChange.emit();return}this.value=b}formatHexForInternalInput(a){return a?a.replace("#","").slice(0,6):""}formatOpacityForInternalInput(a){return a?`${c.alphaToOpacity(a.alpha())}`:""}nudgeRGBChannels(a,b,d){const e=a.array();var f=e.slice(0,3);"rgb"===d?f=[...f.map(g=>g+b),this.alphaChannel?e[3]:void 0]:(a=c.opacityToAlpha(c.alphaToOpacity(a.alpha())+b),f=[...f,a]);return c.Color$1(f)}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return":host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:68px;margin-inline-start:-1px}:host([scale\x3ds]) .container{flex-wrap:wrap;row-gap:0.125rem}:host([scale\x3ds]) .opacity-input{inline-size:unset;margin-inline-start:unset}:host([scale\x3dl]) .opacity-input{inline-size:88px}:host([hidden]){display:none}[hidden]{display:none}"}},
[1,"calcite-color-picker-hex-input",{allowEmpty:[4,"allow-empty"],alphaChannel:[4,"alpha-channel"],hexLabel:[1,"hex-label"],messages:[16],numberingSystem:[1,"numbering-system"],scale:[513],value:[1537],internalColor:[32],setFocus:[64]},void 0,{value:["handleValueChange"]}]);I();const K=h.proxyCustomElement(class extends h.H{constructor(){super();this.__registerHost();this.__attachShadow();this.calciteColorPickerChange=h.createEvent(this,"calciteColorPickerChange",6);this.calciteColorPickerInput=h.createEvent(this,
"calciteColorPickerInput",6);this.internalColorUpdateContext=null;this.isActiveChannelInputEmpty=!1;this.mode=c.CSSColorMode.HEX;this.shiftKeyChannelAdjustment=0;this.upOrDownArrowKeyTracker=null;this.handleTabActivate=a=>{this.channelMode=a.currentTarget.getAttribute("data-color-mode");this.updateChannelsFromColor(this.color)};this.handleColorFieldScopeKeyDown=a=>{const {key:b}=a,d={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};d[b]&&(a.preventDefault(),this.scopeOrientation=
"ArrowDown"===b||"ArrowUp"===b?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+d[b].x||0,this.colorFieldScopeTop+d[b].y||0,!1))};this.handleHueScopeKeyDown=a=>{var b=a.shiftKey?10:1;const {key:d}=a,e={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};e[d]&&(a.preventDefault(),a=e[d]*b,b=this.baseColorFieldColor.hue(),a=this.baseColorFieldColor.hue(b+a),this.internalColorSet(a,!1))};this.handleHexInputChange=a=>{a.stopPropagation();const {isClearable:b,color:d}=this;a=
a.target.value;if(b&&!a)this.internalColorSet(null);else{var e=d&&c.normalizeHex(c.hexify(d,c.alphaCompatible(this.mode)));a!==e&&this.internalColorSet(c.Color$1(a))}};this.handleSavedColorSelect=a=>{this.internalColorSet(c.Color$1(a.currentTarget.color))};this.handleChannelInput=a=>{const b=a.currentTarget;var d=Number(b.getAttribute("data-channel-index"));d=3===d?c.OPACITY_LIMITS.max:"rgb"===this.channelMode?c.RGB_LIMITS[Object.keys(c.RGB_LIMITS)[d]]:c.HSV_LIMITS[Object.keys(c.HSV_LIMITS)[d]];b.value?
d=v.clamp(Number(b.value)+this.shiftKeyChannelAdjustment,0,d).toString():(d="",this.isActiveChannelInputEmpty=!0,this.upOrDownArrowKeyTracker=null);b.value=d;""!==d&&0!==this.shiftKeyChannelAdjustment?this.handleChannelChange(a):""!==d&&this.handleChannelChange(a)};this.handleChannelBlur=a=>{a=a.currentTarget;const b=Number(a.getAttribute("data-channel-index")),d=[...this.channels];a.value||this.isClearable||(a.value=d[b]?.toString())};this.handleChannelFocus=a=>{a.currentTarget.selectText()};this.handleChannelChange=
a=>{var b=a.currentTarget;a=Number(b.getAttribute("data-channel-index"));const d=[...this.channels];if(this.isClearable&&!b.value)this.channels=[null,null,null,null],this.internalColorSet(null);else{var e=3===a;this.isActiveChannelInputEmpty&&this.upOrDownArrowKeyTracker&&(b.value="up"===this.upOrDownArrowKeyTracker?(d[a]+1<=this.getChannelInputLimit(a)?d[a]+1:this.getChannelInputLimit(a)).toString():(0<=d[a]-1?d[a]-1:0).toString(),this.isActiveChannelInputEmpty=!1,this.upOrDownArrowKeyTracker=null);
b=b.value?Number(b.value):d[a];d[a]=e?c.opacityToAlpha(b):b;this.updateColorFromChannels(d)}};this.handleSavedColorKeyDown=a=>{S.isActivationKey(a.key)&&(a.preventDefault(),this.handleSavedColorSelect(a))};this.handleColorFieldPointerDown=a=>{this.handleCanvasControlPointerDown(a,this.colorFieldRenderingContext,this.captureColorFieldColor,this.colorFieldScopeNode)};this.handleHueSliderPointerDown=a=>{this.handleCanvasControlPointerDown(a,this.hueSliderRenderingContext,this.captureHueSliderColor,this.hueScopeNode)};
this.handleOpacitySliderPointerDown=a=>{this.handleCanvasControlPointerDown(a,this.opacitySliderRenderingContext,this.captureOpacitySliderValue,this.opacityScopeNode)};this.globalPointerUpHandler=a=>{t.isPrimaryPointerButton(a)&&(a=this.activeCanvasInfo,this.activeCanvasInfo=null,this.drawColorControls(),a&&this.calciteColorPickerChange.emit())};this.globalPointerMoveHandler=a=>{const {activeCanvasInfo:b,el:d}=this;if(d.isConnected&&b){var {context:e,bounds:f}=b,{clientX:g,clientY:k}=a;if(e.canvas.matches(":hover")){a=
g-f.x;var n=k-f.y}else a=g<f.x+f.width&&g>f.x?g-f.x:g<f.x?0:f.width,n=k<f.y+f.height&&k>f.y?k-f.y:k<f.y?0:f.height;e===this.colorFieldRenderingContext?this.captureColorFieldColor(a,n,!1):e===this.hueSliderRenderingContext?this.captureHueSliderColor(a):e===this.opacitySliderRenderingContext&&this.captureOpacitySliderValue(a)}};this.storeColorFieldScope=a=>{this.colorFieldScopeNode=a};this.storeHueScope=a=>{this.hueScopeNode=a};this.renderChannelsTabTitle=a=>{const {channelMode:b,messages:d}=this;return h.h("calcite-tab-title",
{class:c.CSS.colorMode,"data-color-mode":a,key:a,onCalciteTabsActivate:this.handleTabActivate,selected:a===b},"rgb"===a?d.rgb:d.hsv)};this.renderChannelsTab=a=>{const {isClearable:b,channelMode:d,channels:e,messages:f,alphaChannel:g}=this,k=a===d,n="rgb"===a?[f.red,f.green,f.blue]:[f.hue,f.saturation,f.value],p=t.getElementDir(this.el),m=g?e:e.slice(0,3);return h.h("calcite-tab",{class:c.CSS.control,key:a,selected:k},h.h("div",{class:c.CSS.channels,dir:"ltr"},m.map((l,q)=>{const x=3===q;x&&(l=b&&
!l?l:c.alphaToOpacity(l));return this.renderChannel(l,q,n[q],p,x?"%":"")})))};this.renderChannel=(a,b,d,e,f)=>h.h("calcite-input-number",{class:c.CSS.channel,"data-channel-index":b,dir:e,key:b,label:d,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.handleChannelChange,onCalciteInputNumberInput:this.handleChannelInput,onCalciteInternalInputNumberBlur:this.handleChannelBlur,onCalciteInternalInputNumberFocus:this.handleChannelFocus,
onKeyDown:this.handleKeyDown,scale:"l"===this.scale?"m":"s",style:{marginLeft:0<b&&("s"!==this.scale||!this.alphaChannel||3!==b)?"-1px":""},suffixText:f,value:a?.toString()});this.deleteColor=()=>{const a=c.hexify(this.color,this.alphaChannel);if(-1<this.savedColors.indexOf(a)){var b=this.savedColors.filter(e=>e!==a);this.savedColors=b;var d=`${c.DEFAULT_STORAGE_KEY_PREFIX}${this.storageId}`;this.storageId&&localStorage.setItem(d,JSON.stringify(b))}};this.saveColor=()=>{var a=c.hexify(this.color,
this.alphaChannel);if(!(-1<this.savedColors.indexOf(a))){this.savedColors=a=[...this.savedColors,a];var b=`${c.DEFAULT_STORAGE_KEY_PREFIX}${this.storageId}`;this.storageId&&localStorage.setItem(b,JSON.stringify(a))}};this.drawColorControls=Z.throttle((a="all")=>{"all"!==a&&"color-field"!==a||!this.colorFieldRenderingContext||this.drawColorField();"all"!==a&&"hue-slider"!==a||!this.hueSliderRenderingContext||this.drawHueSlider();this.alphaChannel&&("all"===a||"opacity-slider"===a)&&this.opacitySliderRenderingContext&&
this.drawOpacitySlider()},16);this.captureColorFieldColor=(a,b,d=!0)=>{const {dimensions:{colorField:{height:e,width:f}}}=this;a=Math.round(c.HSV_LIMITS.s/f*a);b=Math.round(c.HSV_LIMITS.v/e*(e-b));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(a).value(b),d)};this.initColorField=a=>{this.colorFieldRenderingContext=a.getContext("2d");this.updateCanvasSize("color-field");this.drawColorControls()};this.initHueSlider=a=>{this.hueSliderRenderingContext=a.getContext("2d");this.updateCanvasSize("hue-slider");
this.drawHueSlider()};this.initOpacitySlider=a=>{a&&(this.opacitySliderRenderingContext=a.getContext("2d"),this.updateCanvasSize("opacity-slider"),this.drawOpacitySlider())};this.storeOpacityScope=a=>{this.opacityScopeNode=a};this.handleOpacityScopeKeyDown=a=>{var b=a.shiftKey?10:1;const {key:d}=a,e={ArrowUp:.01,ArrowRight:.01,ArrowDown:-.01,ArrowLeft:-.01};e[d]&&(a.preventDefault(),a=e[d]*b,b=this.baseColorFieldColor.alpha(),a=this.baseColorFieldColor.alpha(b+a),this.internalColorSet(a,!1))};this.clearable=
this.channelsDisabled=this.alphaChannel=this.allowEmpty=!1;this.color=c.DEFAULT_COLOR;this.disabled=!1;this.format="auto";this.savedDisabled=this.hideSaved=this.hideHex=this.hexDisabled=this.hideChannels=!1;this.scale="m";this.numberingSystem=this.messageOverrides=this.storageId=void 0;this.value=c.normalizeHex(c.hexify(c.DEFAULT_COLOR,this.alphaChannel));this.channelMode="rgb";this.channels=this.toChannels(c.DEFAULT_COLOR);this.defaultMessages=void 0;this.dimensions=c.DIMENSIONS.m;this.effectiveLocale=
"";this.messages=void 0;this.savedColors=[];this.scopeOrientation=this.opacityScopeLeft=this.hueScopeLeft=this.colorFieldScopeLeft=this.colorFieldScopeTop=void 0}handleAllowEmptyOrClearableChange(){this.isClearable=this.clearable||this.allowEmpty}handleAlphaChannelChange(a){const {format:b}=this;a&&"auto"!==b&&!c.alphaCompatible(b)&&(console.warn(`ignoring alphaChannel as the current format (${b}) does not support alpha`),this.alphaChannel=!1)}handleAlphaChannelDimensionsChange(){this.effectiveSliderWidth=
c.getSliderWidth(this.dimensions,this.alphaChannel);this.drawColorControls()}handleColorChange(a,b){this.drawColorControls();this.updateChannelsFromColor(a);this.previousColor=b}handleFormatOrAlphaChannelChange(){this.setMode(this.format);this.internalColorSet(this.color,!1,"internal")}handleScaleChange(a="m"){this.updateDimensions(a);this.updateCanvasSize("all");this.drawColorControls()}onMessagesChange(){}handleValueChange(a,b){const {isClearable:d,format:e}=this;let f=!1;if(!d||a){const g=c.parseMode(a);
if(!g||"auto"!==e&&g!==e){this.showIncompatibleColorWarning(a,e);this.value=b;return}f=this.mode!==g;this.setMode(g,null===this.internalColorUpdateContext)}b=this.activeCanvasInfo;"initial"!==this.internalColorUpdateContext&&("user-interaction"===this.internalColorUpdateContext?(this.calciteColorPickerInput.emit(),b||this.calciteColorPickerChange.emit()):(a=d&&!a?null:c.Color$1(null!=a&&"object"===typeof a&&c.alphaCompatible(this.mode)?c.normalizeColor(a):a),b=!c.colorEqual(a,this.color),(f||b)&&
this.internalColorSet(a,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css")),"internal")))}get baseColorFieldColor(){return this.color||this.previousColor||c.DEFAULT_COLOR}effectiveLocaleChange(){w.updateMessages(this,this.effectiveLocale)}handleChannelKeyUpOrDown(a){this.shiftKeyChannelAdjustment=0;const {key:b}=a;if(("ArrowUp"===b||"ArrowDown"===b)&&a.composedPath().some(e=>e.classList?.contains(c.CSS.channel))){var {shiftKey:d}=a;a.preventDefault();this.color?(this.shiftKeyChannelAdjustment=
"ArrowUp"===b&&d?9:"ArrowDown"===b&&d?-9:0,"ArrowUp"===b&&(this.upOrDownArrowKeyTracker="up"),"ArrowDown"===b&&(this.upOrDownArrowKeyTracker="down")):(this.internalColorSet(this.previousColor),a.stopPropagation())}}getChannelInputLimit(a){return"rgb"===this.channelMode?c.RGB_LIMITS[Object.keys(c.RGB_LIMITS)[a]]:c.HSV_LIMITS[Object.keys(c.HSV_LIMITS)[a]]}focusScope(a){requestAnimationFrame(()=>{a.focus()})}handleCanvasControlPointerDown(a,b,d,e){t.isPrimaryPointerButton(a)&&(window.addEventListener("pointermove",
this.globalPointerMoveHandler),window.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:b,bounds:b.canvas.getBoundingClientRect()},d.call(this,a.offsetX,a.offsetY),this.focusScope(e))}async setFocus(){await r.componentFocusable(this);t.focusFirstTabbable(this.el)}async componentWillLoad(){r.setUpLoadableComponent(this);this.handleAllowEmptyOrClearableChange();this.handleAlphaChannelDimensionsChange();const {isClearable:a,color:b,format:d,value:e}=this;
var f=a&&!e,g=c.parseMode(e);g=f||"auto"===d&&g||d===g;f=f?null:g?c.Color$1(e):b;g||this.showIncompatibleColorWarning(e,d);this.setMode(d,!1);this.internalColorSet(f,!1,"initial");this.updateDimensions(this.scale);f=`${c.DEFAULT_STORAGE_KEY_PREFIX}${this.storageId}`;this.storageId&&localStorage.getItem(f)&&(this.savedColors=JSON.parse(localStorage.getItem(f)));await w.setUpMessages(this)}connectedCallback(){C.connectLocalized(this);w.connectMessages(this)}componentDidLoad(){r.setComponentLoaded(this)}disconnectedCallback(){window.removeEventListener("pointermove",
this.globalPointerMoveHandler);window.removeEventListener("pointerup",this.globalPointerUpHandler);C.disconnectLocalized(this);w.disconnectMessages(this)}componentDidRender(){B.updateHostInteraction(this)}render(){const {channelsDisabled:a,color:b,colorFieldScopeLeft:d,colorFieldScopeTop:e,dimensions:{thumb:{radius:f}},hexDisabled:g,hideChannels:k,hideHex:n,hideSaved:p,hueScopeLeft:m,messages:l,alphaChannel:q,opacityScopeLeft:x,savedColors:M,savedDisabled:ba,scale:u,scopeOrientation:ca}=this;var y=
this.effectiveSliderWidth;const N=b?c.hexify(b,q):null,da=m??y*c.DEFAULT_COLOR.hue()/c.HSV_LIMITS.h;y=x??y*c.alphaToOpacity(c.DEFAULT_COLOR.alpha())/c.OPACITY_LIMITS.max;const O=null===b,A="vertical"===ca,P=g||n,Q=a||k,ea=ba||p,[fa,ha]=this.getAdjustedScopePosition(d,e),[ia,ja]=this.getAdjustedScopePosition(da,f),[ka,la]=this.getAdjustedScopePosition(y,f);return h.h(B.InteractiveContainer,{key:"c4837ef7cbe25b5fc3f0c72fe82d0090c6e0cdb5",disabled:this.disabled},h.h("div",{key:"28230570482ee9d33df9518e3cca534e3fac44ac",
class:c.CSS.container},h.h("div",{key:"83172bc55f13955f5b69b59300e68642d59999af",class:c.CSS.controlAndScope},h.h("canvas",{key:"c20db7054ab5ebdb1e13ba295ac463609c44de47",class:c.CSS.colorField,onPointerDown:this.handleColorFieldPointerDown,ref:this.initColorField}),h.h("div",{key:"1e44beb121ed5a2247a6d69bf42c49a7f1ce5829","aria-label":A?l.value:l.saturation,"aria-valuemax":A?c.HSV_LIMITS.v:c.HSV_LIMITS.s,"aria-valuemin":"0","aria-valuenow":(A?b?.saturationv():b?.value())||"0",class:{[c.CSS.scope]:!0,
[c.CSS.colorFieldScope]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,ref:this.storeColorFieldScope,role:"slider",style:{top:`${ha||0}px`,left:`${fa||0}px`},tabindex:"0"})),h.h("div",{key:"5b873f4e7266cc654086f59c8483d3b4a65c8e8f",class:c.CSS.previewAndSliders},h.h("calcite-color-picker-swatch",{key:"db7c903a933ed061cc2edcd766fde70a8b670f00",class:c.CSS.preview,color:N,scale:this.alphaChannel?"l":this.scale}),h.h("div",{key:"33ea2354cbcfaa6677e82713bd8f02d1b83a9c26",class:c.CSS.sliders},h.h("div",
{key:"28493b4bd177b8c97583cabeb5716a7cb7202e76",class:c.CSS.controlAndScope},h.h("canvas",{key:"d0a9ce7fb098b7434cd62f68b6b6092efcef3dc4",class:{[c.CSS.slider]:!0,[c.CSS.hueSlider]:!0},onPointerDown:this.handleHueSliderPointerDown,ref:this.initHueSlider}),h.h("div",{key:"2356120385aabf09384f0077dffb7881c55c5ea9","aria-label":l.hue,"aria-valuemax":c.HSV_LIMITS.h,"aria-valuemin":"0","aria-valuenow":b?.round().hue()||c.DEFAULT_COLOR.round().hue(),class:{[c.CSS.scope]:!0,[c.CSS.hueScope]:!0},onKeyDown:this.handleHueScopeKeyDown,
ref:this.storeHueScope,role:"slider",style:{top:`${ja}px`,left:`${ia}px`},tabindex:"0"})),q?h.h("div",{class:c.CSS.controlAndScope},h.h("canvas",{class:{[c.CSS.slider]:!0,[c.CSS.opacitySlider]:!0},onPointerDown:this.handleOpacitySliderPointerDown,ref:this.initOpacitySlider}),h.h("div",{"aria-label":l.opacity,"aria-valuemax":c.OPACITY_LIMITS.max,"aria-valuemin":c.OPACITY_LIMITS.min,"aria-valuenow":(b||c.DEFAULT_COLOR).round().alpha(),class:{[c.CSS.scope]:!0,[c.CSS.opacityScope]:!0},onKeyDown:this.handleOpacityScopeKeyDown,
ref:this.storeOpacityScope,role:"slider",style:{top:`${la}px`,left:`${ka}px`},tabindex:"0"})):null)),P&&Q?null:h.h("div",{class:{[c.CSS.controlSection]:!0,[c.CSS.section]:!0}},h.h("div",{class:c.CSS.hexAndChannelsGroup},P?null:h.h("div",{class:c.CSS.hexOptions},h.h("calcite-color-picker-hex-input",{allowEmpty:this.isClearable,alphaChannel:q,class:c.CSS.control,messages:l,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:u,value:N})),Q?null:h.h("calcite-tabs",
{class:{[c.CSS.colorModeContainer]:!0,[c.CSS.splitSection]:!0},scale:"l"===u?"m":"s"},h.h("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv")))),ea?null:h.h("div",{class:{[c.CSS.savedColorsSection]:!0,[c.CSS.section]:!0}},h.h("div",{class:c.CSS.header},h.h("label",null,l.saved),h.h("div",{class:c.CSS.savedColorsButtons},h.h("calcite-button",{appearance:"transparent",class:c.CSS.deleteColor,
disabled:O,iconStart:"minus",kind:"neutral",label:l.deleteColor,onClick:this.deleteColor,scale:u,type:"button"}),h.h("calcite-button",{appearance:"transparent",class:c.CSS.saveColor,disabled:O,iconStart:"plus",kind:"neutral",label:l.saveColor,onClick:this.saveColor,scale:u,type:"button"}))),0<M.length?h.h("div",{class:c.CSS.savedColors},[...M.map(R=>h.h("calcite-color-picker-swatch",{class:c.CSS.savedColor,color:R,key:R,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:u,
tabIndex:0}))]):null)))}handleKeyDown(a){"Enter"===a.key&&a.preventDefault()}showIncompatibleColorWarning(a,b){console.warn(`ignoring color value (${a}) as it is not compatible with the current format (${b})`)}setMode(a,b=!0){this.mode=this.ensureCompatibleMode("auto"===a?this.mode:a,b)}ensureCompatibleMode(a,b){var {alphaChannel:d}=this;const e=c.alphaCompatible(a);return d&&!e?(d=c.toAlphaMode(a),b&&console.warn(`setting format to (${d}) as the provided one (${a}) does not support alpha`),d):!d&&
e?(d=c.toNonAlphaMode(a),b&&console.warn(`setting format to (${d}) as the provided one (${a}) does not support alpha`),d):a}captureHueSliderColor(a){this.internalColorSet(this.baseColorFieldColor.hue(c.HUE_LIMIT_CONSTRAINED/this.effectiveSliderWidth*a),!1)}captureOpacitySliderValue(a){a=c.opacityToAlpha(c.OPACITY_LIMITS.max/this.effectiveSliderWidth*a);this.internalColorSet(this.baseColorFieldColor.alpha(a),!1)}internalColorSet(a,b=!0,d="user-interaction"){b&&c.colorEqual(a,this.color)||(this.internalColorUpdateContext=
d,this.color=a,this.value=this.toValue(a),this.internalColorUpdateContext=null)}toValue(a,b=this.mode){if(!a)return null;if(b.includes("hex"))return b=b===c.CSSColorMode.HEXA,c.normalizeHex(c.hexify(a.round(),b),b);if(b.includes("-css")){var d=a[b.replace("-css","").replace("a","")]().round().string();return(b.endsWith("a")||b.endsWith("a-css"))&&1===a.alpha()?(b=d.slice(0,3),d=d.slice(4,-1),`${b}a(${d}, ${a.alpha()})`):d}a=a[c.toNonAlphaMode(b)]().round().object();return b.endsWith("a")?c.normalizeAlpha(a):
a}getSliderCapSpacing(){const {dimensions:{slider:{height:a},thumb:{radius:b}}}=this;return 2*b-a}updateDimensions(a="m"){this.dimensions=c.DIMENSIONS[a]}drawColorField(){const a=this.colorFieldRenderingContext,{dimensions:{colorField:{height:b,width:d}}}=this;a.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string();a.fillRect(0,0,d,b);var e=a.createLinearGradient(0,0,d,0);e.addColorStop(0,"rgba(255,255,255,1)");e.addColorStop(1,"rgba(255,255,255,0)");a.fillStyle=e;
a.fillRect(0,0,d,b);e=a.createLinearGradient(0,0,0,b);e.addColorStop(0,"rgba(0,0,0,0)");e.addColorStop(1,"rgba(0,0,0,1)");a.fillStyle=e;a.fillRect(0,0,d,b);this.drawActiveColorFieldColor()}setCanvasContextSize(a,{height:b,width:d}){if(a){var e=window.devicePixelRatio||1;a.width=d*e;a.height=b*e;a.style.height=`${b}px`;a.style.width=`${d}px`;a.getContext("2d").scale(e,e)}}updateCanvasSize(a="all"){var {dimensions:b}=this;"all"!==a&&"color-field"!==a||this.setCanvasContextSize(this.colorFieldRenderingContext?.canvas,
b.colorField);b={width:this.effectiveSliderWidth,height:b.slider.height+2*(b.thumb.radius-b.slider.height/2)};"all"!==a&&"hue-slider"!==a||this.setCanvasContextSize(this.hueSliderRenderingContext?.canvas,b);"all"!==a&&"opacity-slider"!==a||this.setCanvasContextSize(this.opacitySliderRenderingContext?.canvas,b)}drawActiveColorFieldColor(){var {color:a}=this;if(a){a=a.hsv();var {dimensions:{colorField:{height:b,width:d},thumb:{radius:e}}}=this,f=a.saturationv()/(c.HSV_LIMITS.s/d),g=b-a.value()/(c.HSV_LIMITS.v/
b);requestAnimationFrame(()=>{this.colorFieldScopeLeft=f;this.colorFieldScopeTop=g});this.drawThumb(this.colorFieldRenderingContext,e,f,g,a,!1)}}drawThumb(a,b,d,e,f,g){const k=2*Math.PI;a.beginPath();a.arc(d,e,b,0,k);a.fillStyle="#fff";a.fill();a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();if(g&&1>f.alpha()){const n=a.createPattern(this.getCheckeredBackgroundPattern(),"repeat");a.beginPath();a.arc(d,e,b-3,0,k);a.fillStyle=n;a.fill()}a.globalCompositeOperation="source-atop";a.beginPath();
a.arc(d,e,b-3,0,k);b=g?f.alpha():1;a.fillStyle=f.rgb().alpha(b).string();a.fill();a.globalCompositeOperation="source-over"}drawActiveHueSliderColor(){var {color:a}=this;if(a){a=a.hsv().saturationv(100).value(100);var {dimensions:{thumb:{radius:b}}}=this,d=this.effectiveSliderWidth,e=a.hue()/(c.HUE_LIMIT_CONSTRAINED/d),f=this.getSliderBoundX(e,d,b);requestAnimationFrame(()=>{this.hueScopeLeft=f});this.drawThumb(this.hueSliderRenderingContext,b,f,b,a,!1)}}drawHueSlider(){const a=this.hueSliderRenderingContext,
{dimensions:{slider:{height:b},thumb:{radius:d}}}=this,e=d-b/2,f=this.effectiveSliderWidth,g=a.createLinearGradient(0,0,f,0),k="red yellow lime cyan blue magenta #ff0004".split(" "),n=1/(k.length-1);let p=0;k.forEach(m=>{g.addColorStop(p,c.Color$1(m).string());p+=n});a.clearRect(0,0,f,b+2*this.getSliderCapSpacing());this.drawSliderPath(a,b,f,0,e);a.fillStyle=g;a.fill();a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();this.drawActiveHueSliderColor()}drawOpacitySlider(){const a=this.opacitySliderRenderingContext,
{baseColorFieldColor:b,dimensions:{slider:{height:d},thumb:{radius:e}}}=this;var f=e-d/2;const g=this.effectiveSliderWidth;a.clearRect(0,0,g,d+2*this.getSliderCapSpacing());const k=a.createLinearGradient(0,f,g,0),n=b.rgb().alpha(0),p=b.rgb().alpha(.5),m=b.rgb().alpha(1);k.addColorStop(0,n.string());k.addColorStop(.5,p.string());k.addColorStop(1,m.string());this.drawSliderPath(a,d,g,0,f);f=a.createPattern(this.getCheckeredBackgroundPattern(),"repeat");a.fillStyle=f;a.fill();a.fillStyle=k;a.fill();
a.strokeStyle="rgba(0,0,0,0.3)";a.lineWidth=1;a.stroke();this.drawActiveOpacitySliderColor()}drawSliderPath(a,b,d,e,f){const g=b/2+1;a.beginPath();a.moveTo(e+g,f);a.lineTo(e+d-g,f);a.quadraticCurveTo(e+d,f,e+d,f+g);a.lineTo(e+d,f+b-g);a.quadraticCurveTo(e+d,f+b,e+d-g,f+b);a.lineTo(e+g,f+b);a.quadraticCurveTo(e,f+b,e,f+b-g);a.lineTo(e,f+g);a.quadraticCurveTo(e,f,e+g,f);a.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern)return this.checkerPattern;const a=document.createElement("canvas");
a.width=10;a.height=10;const b=a.getContext("2d");b.fillStyle="#ccc";b.fillRect(0,0,10,10);b.fillStyle="#fff";b.fillRect(0,0,5,5);b.fillRect(5,5,5,5);return this.checkerPattern=a}drawActiveOpacitySliderColor(){const {color:a}=this;if(a){var {dimensions:{thumb:{radius:b}}}=this,d=this.effectiveSliderWidth,e=c.alphaToOpacity(a.alpha())/(c.OPACITY_LIMITS.max/d),f=this.getSliderBoundX(e,d,b);requestAnimationFrame(()=>{this.opacityScopeLeft=f});this.drawThumb(this.opacitySliderRenderingContext,b,f,b,a,
!0)}}getSliderBoundX(a,b,d){const e=v.closeToRangeEdge(a,b,d);return 0===e?a:-1===e?v.remap(a,0,b,d,2*d):v.remap(a,0,b,b-2*d,b-d)}updateColorFromChannels(a){this.internalColorSet(c.Color$1(a,this.channelMode))}updateChannelsFromColor(a){this.channels=a?this.toChannels(a):[null,null,null,null]}toChannels(a){const {channelMode:b}=this;a=a[b]().array().map((d,e)=>3===e?d:Math.floor(d));3===a.length&&a.push(1);return a}getAdjustedScopePosition(a,b){return[a-c.SCOPE_SIZE/2,b-c.SCOPE_SIZE/2]}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{allowEmpty:["handleAllowEmptyOrClearableChange"],
clearable:["handleAllowEmptyOrClearableChange"],alphaChannel:["handleAlphaChannelChange","handleAlphaChannelDimensionsChange","handleFormatOrAlphaChannelChange"],dimensions:["handleAlphaChannelDimensionsChange"],color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return':host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([scale\x3ds]){--calcite-color-picker-spacing:8px}:host([scale\x3ds]) .container{inline-size:160px}:host([scale\x3ds]) .saved-colors{gap:0.25rem;grid-template-columns:repeat(auto-fill, 20px)}:host([scale\x3dm]){--calcite-color-picker-spacing:12px}:host([scale\x3dm]) .container{inline-size:272px}:host([scale\x3dl]){--calcite-color-picker-spacing:16px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale\x3dl]) .container{inline-size:464px}:host([scale\x3dl]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale\x3dl]) .saved-colors{grid-template-columns:repeat(auto-fill, 32px)}:host([scale\x3dl]) .control-section{flex-wrap:nowrap;align-items:baseline;flex-wrap:wrap}:host([scale\x3dl]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale\x3dl]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-color-foreground-1);display:inline-block;border:1px solid var(--calcite-color-border-1)}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.color-field,.control-and-scope{-webkit-user-select:none;user-select:none}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));outline-offset:calc(\n            2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          );outline-offset:6px}.hex-and-channels-group{inline-size:100%}.hex-and-channels-group,.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing);gap:var(--calcite-spacing-xxs)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-color-text-1)}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex;row-gap:0.125rem}.channel[data-channel-index\x3d"3"]{inline-size:159px}:host([scale\x3ds]) .channels{flex-wrap:wrap}:host([scale\x3ds]) .channel{flex-basis:30%;flex-grow:1}:host([scale\x3ds]) .channel[data-channel-index\x3d"3"]{inline-size:unset;margin-inline-start:unset}:host([scale\x3dl]) .channel[data-channel-index\x3d"3"]{inline-size:131px}.saved-colors{display:grid;gap:0.5rem;padding-block-start:var(--calcite-color-picker-spacing);grid-template-columns:repeat(auto-fill, 24px)}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-color-border-2);outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}'}},
[1,"calcite-color-picker",{allowEmpty:[516,"allow-empty"],alphaChannel:[4,"alpha-channel"],channelsDisabled:[4,"channels-disabled"],clearable:[516],color:[1040],disabled:[516],format:[513],hideChannels:[516,"hide-channels"],hexDisabled:[4,"hex-disabled"],hideHex:[516,"hide-hex"],hideSaved:[516,"hide-saved"],savedDisabled:[516,"saved-disabled"],scale:[513],storageId:[513,"storage-id"],messageOverrides:[1040],numberingSystem:[513,"numbering-system"],value:[1025],messages:[1040],channelMode:[32],channels:[32],
defaultMessages:[32],dimensions:[32],effectiveLocale:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],hueScopeLeft:[32],opacityScopeLeft:[32],scopeOrientation:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]],{allowEmpty:["handleAllowEmptyOrClearableChange"],clearable:["handleAllowEmptyOrClearableChange"],alphaChannel:["handleAlphaChannelChange","handleAlphaChannelDimensionsChange","handleFormatOrAlphaChannelChange"],dimensions:["handleAlphaChannelDimensionsChange"],
color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}]);J();z.CalciteColorPicker=K;z.defineCustomElement=J;Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});