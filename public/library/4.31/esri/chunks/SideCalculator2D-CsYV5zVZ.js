// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","./Transformation2D","./Geometry","./QuadraticBezier"],function(l,h,f,m){function p(a,b,c){return{m_coordinate:a.clone(),m_vertexIndex:b,m_geometryIndex:0,m_distance:c,m_bRightSide:!1,isEmpty:q}}function q(){return Number.isNaN(this.m_distance)}function n(a,b,c=-1,e=-1){if(a.isEmpty())return 3;const d=a.getGeometryType();return f.isSegment(d)?(0<=c||0<=e?b=f.throwInvalidArgumentException(""):a.isDegenerate(0)?b=a.getStartXY().equals(b)?2:3:a.isCurve()?(e=a.getClosestCoordinate(b,
!1),c=a.getTangent(e),a=a.getCoord2D(e),b=h.Point2D.orientationRobust(b,a,a.add(c)),b=0>b?1:0<b?0:2):(b=h.Point2D.orientationRobust(b,a.getStartXY(),a.getEndXY()),b=0>b?1:0<b?0:2),b):d===f.GeometryType.enumPolygon?((0<=c||0<=e)&&f.throwInvalidArgumentException(""),c=new m.Envelope2D,a.queryEnvelope(c),b=m.isPoint2DInPolygon2D(a,b,0),b=0===b?0:1===b?1:2,b):d===f.GeometryType.enumPolyline?r(a,b,c,e):d===f.GeometryType.enumEnvelope?(c=new m.Envelope2D,a.queryEnvelope(c),c.contains(b)?c.containsExclusive(b)?
1:2:0):3}function r(a,b,c,e){(0>c&&0<=e||0<=c&&0>e)&&f.throwInvalidArgumentException("");a=a.querySegmentIterator();if(0>c){var d=Number.MAX_VALUE;let k=0;for(;a.nextPath();)for(;a.hasNextSegment();){var g=a.nextSegment();const t=g.getClosestCoordinate(b,!1);g=g.getCoord2D(t);g=h.Point2D.sqrDistance(g,b);g<d?(k=1,c=a.getStartPointIndex(),e=a.getPathIndex(),d=g):g===d&&k++}if(0===k)return 3;if(1===k)return a.resetToVertex(c,e),c=a.nextSegment(),n(c,b)}f.geometryReleaseAssert(0);d={};if(-1!==d.i1&&
-1===d.i2)return d.bRight1?1:0;if(-1!==d.i1&&-1!==d.i2){if(d.bRight1===d.bRight2)return d.bRight1?1:0;a.resetToVertex(d.i1,-1);b=a.nextSegment().getTangent(1);a.resetToVertex(d.i2,-1);c=a.nextSegment().getTangent(0);return 0<=b.crossProduct(c)?1:0}a.resetToVertex(c,e);c=a.nextSegment();return n(c,b)}l.calculateSide=n;l.makeEmptyProximity2DResult=function(){return p(new h.Point2D,-1,Number.NaN)};l.makeProximity2DResult=p});