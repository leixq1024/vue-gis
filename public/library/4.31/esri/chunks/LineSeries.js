// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ./Theme ./ColorSet ./DefaultTheme ./Tick ./Button2 ./tslib.es6".split(" "),function(H,f,Z,A,y,na,N){function aa(a){return"object"===typeof a&&"length"in a?a:Array.from(a)}function ba(a){this._context=a}function ca(a){return new ba(a)}function da(a){return a[0]}function ea(a){return a[1]}function fa(a,b){function c(l){var p,n=(l=aa(l)).length,m,q=!1,r;null==e&&(h=g(r=k()));for(p=0;p<=n;++p)!(p<n&&d(m=l[p],p,l))===q&&((q=!q)?h.lineStart():h.lineEnd()),q&&h.point(+a(m,p,l),+b(m,p,l));
if(r)return h=null,r+""||null}var d=y.constant(!0),e=null,g=ca,h=null,k=y.withPath(c);a="function"===typeof a?a:void 0===a?da:y.constant(a);b="function"===typeof b?b:void 0===b?ea:y.constant(b);c.x=function(l){return arguments.length?(a="function"===typeof l?l:y.constant(+l),c):a};c.y=function(l){return arguments.length?(b="function"===typeof l?l:y.constant(+l),c):b};c.defined=function(l){return arguments.length?(d="function"===typeof l?l:y.constant(!!l),c):d};c.curve=function(l){return arguments.length?
(g=l,null!=e&&(h=g(e)),c):g};c.context=function(l){return arguments.length?(null==l?e=h=null:h=g(e=l),c):e};return c}function oa(a,b,c){function d(m){var q,r,t=(m=aa(m)).length,v,u=!1,w,x=Array(t),z=Array(t);null==k&&(p=l(w=n()));for(q=0;q<=t;++q){if(!(q<t&&h(v=m[q],q,m))===u)if(u=!u){var B=q;p.areaStart();p.lineStart()}else{p.lineEnd();p.lineStart();for(r=q-1;r>=B;--r)p.point(x[r],z[r]);p.lineEnd();p.areaEnd()}u&&(x[q]=+a(v,q,m),z[q]=+b(v,q,m),p.point(g?+g(v,q,m):x[q],c?+c(v,q,m):z[q]))}if(w)return p=
null,w+""||null}function e(){return fa().defined(h).curve(l).context(k)}var g=null,h=y.constant(!0),k=null,l=ca,p=null,n=y.withPath(d);a="function"===typeof a?a:void 0===a?da:y.constant(+a);b="function"===typeof b?b:void 0===b?y.constant(0):y.constant(+b);c="function"===typeof c?c:void 0===c?ea:y.constant(+c);d.x=function(m){return arguments.length?(a="function"===typeof m?m:y.constant(+m),g=null,d):a};d.x0=function(m){return arguments.length?(a="function"===typeof m?m:y.constant(+m),d):a};d.x1=function(m){return arguments.length?
(g=null==m?null:"function"===typeof m?m:y.constant(+m),d):g};d.y=function(m){return arguments.length?(b="function"===typeof m?m:y.constant(+m),c=null,d):b};d.y0=function(m){return arguments.length?(b="function"===typeof m?m:y.constant(+m),d):b};d.y1=function(m){return arguments.length?(c=null==m?null:"function"===typeof m?m:y.constant(+m),d):c};d.lineX0=d.lineY0=function(){return e().x(a).y(b)};d.lineY1=function(){return e().x(a).y(c)};d.lineX1=function(){return e().x(g).y(b)};d.defined=function(m){return arguments.length?
(h="function"===typeof m?m:y.constant(!!m),d):h};d.curve=function(m){return arguments.length?(l=m,null!=k&&(p=l(k)),d):l};d.context=function(m){return arguments.length?(null==m?k=p=null:p=l(k=m),d):k};return d}ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(a,b){a=+a;b=+b;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}};class pa extends f.Theme{setupDefaultRules(){super.setupDefaultRules();const a=this._root.interfaceColors;var b=this._root.language;const c=this.rule.bind(this);c("XYChart").setAll({colors:Z.ColorSet.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1});c("XYSeries").setAll({legendLabelText:"{name}"});
c("Rectangle",["plotbackground","xy","background"]).setAll({fill:f.Color.fromHex(0),fillOpacity:0});c("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:Z.ColorSet.new(this._root,{saturation:0})});var d=c("Graphics",["scrollbar","overlay"]);d.setAll({fillOpacity:.5});A.setColor(d,"fill",a,"background");c("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0});
c("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4});c("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0});c("RoundedRectangle","xy scrollbar chart background resize button".split(" ")).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40});c("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0});c("AxisRendererY",["xy","chart",
"scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5});c("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:f.p100,minPosition:.01,maxPosition:.99,fontSize:"0.8em"});c("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0});c("AxisLabel",["x"]).setAll({centerY:0});c("AxisLabel",["x","inside"]).setAll({centerY:f.p100});c("AxisLabel",["x","inside","opposite"]).setAll({centerY:0});c("AxisLabel",["x","opposite"]).setAll({centerY:f.p100});c("AxisLabel",["y"]).setAll({centerX:f.p100});
c("AxisLabel",["y","inside"]).setAll({centerX:0});c("AxisLabel",["y","inside","opposite"]).setAll({centerX:f.p100});c("AxisLabel",["y","opposite"]).setAll({centerX:0});c("AxisLabel",["minor"]).setAll({fontSize:"0.6em"});c("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1});c("Grid",["xy","scrollbar","y"]).setAll({visible:!1});c("Grid",["xy","scrollbar","x"]).setAll({opacity:.5});c("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy",moveThreshold:1});d=c("Grid",["cursor",
"x"]);d.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:"slider",ariaLabel:b.translate("Use left and right arrows to move selection")});A.setColor(d,"stroke",a,"alternativeBackground");d=c("Grid",["cursor","y"]);d.setAll({forceInactive:!0,strokeOpacity:.8,strokeDasharray:[2,2],role:"slider",ariaLabel:b.translate("Use up and down arrows to move selection")});A.setColor(d,"stroke",a,"alternativeBackground");d=c("Graphics",["cursor","selection"]);d.setAll({fillOpacity:.15});A.setColor(d,
"fill",a,"alternativeBackground");c("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:Infinity,maxZoomFactor:1E3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0});c("AxisLabel").setAll({location:.5,multiLocation:0,centerX:f.p50,centerY:f.p50,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5});c("Container",["axis","header"]).setAll({layer:30});c("Rectangle",["axis","header","background"]).setAll({crisp:!0});d=c("AxisRenderer");d.setAll({crisp:!0,
strokeOpacity:0});A.setColor(d,"stroke",a,"grid");c("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:f.p100});c("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:f.p100});d=c("Rectangle",["axis","thumb"]);d.setAll({fillOpacity:0});A.setColor(d,"fill",a,"alternativeBackground");d.states.create("hover",{fillOpacity:.1});c("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"});
c("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"});d=c("Grid");d.setAll({location:0,strokeOpacity:.15,crisp:!0});A.setColor(d,"stroke",a,"grid");d=c("Grid",["minor"]);d.setAll({location:0,strokeOpacity:.07,crisp:!0});A.setColor(d,"stroke",a,"grid");c("Grid",["base"]).setAll({strokeOpacity:.3});d=c("Graphics",["axis","fill"]);d.setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05});A.setColor(d,"fill",a,"alternativeBackground");c("Graphics",["axis","fill","range"]).setAll({isMeasured:!0});
c("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0});c("Grid",["series","range"]).setAll({visible:!1});c("AxisTick",["series","range"]).setAll({visible:!1});c("AxisLabel",["series","range"]).setAll({visible:!1});d=c("AxisTick");d.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1});A.setColor(d,"stroke",a,"grid");c("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:(h,k)=>{(h=h.get("axisFill"))&&(f.isNumber(k)&&0!=k%2?
h.setPrivate("visible",!1):h.setPrivate("visible",!0))}});d=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",
count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},
{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1E3},{timeUnit:"year",count:2E3},{timeUnit:"year",count:5E3},{timeUnit:"year",count:1E4},{timeUnit:"year",count:1E5}];const e={millisecond:b.translate("_date_millisecond"),second:b.translate("_date_second"),minute:b.translate("_date_minute"),hour:b.translate("_date_hour"),day:b.translate("_date_day"),week:b.translate("_date_day"),month:b.translate("_date_month"),year:b.translate("_date_year")},
g={millisecond:b.translate("_date_millisecond"),second:b.translate("_date_second"),minute:b.translate("_date_minute"),hour:b.translate("_date_day"),day:b.translate("_date_day"),week:b.translate("_date_day"),month:b.translate("_date_month")+" "+b.translate("_date_year"),year:b.translate("_date_year")};b={millisecond:b.translate("_date_millisecond_full"),second:b.translate("_date_second_full"),minute:b.translate("_date_minute_full"),hour:b.translate("_date_hour_full"),day:b.translate("_date_day_full"),
week:b.translate("_date_week_full"),month:b.translate("_date_month_full"),year:b.translate("_date_year")};c("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:f.copy$1(d),dateFormats:f.copy(e),periodChangeDateFormats:f.copy(g)});c("DateAxis").setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:f.copy$1(d),dateFormats:f.copy(e),periodChangeDateFormats:f.copy(g),tooltipDateFormats:b,groupIntervals:[{timeUnit:"millisecond",
count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:h=>{const k=h.get("axisFill");if(k){var l=h.component,p=h.get("value");h=h.get("endValue");const m=l.intervalDuration();var n=l.getPrivate("baseInterval");n=l.getPrivate("gridInterval",
n);l=l.getPrivate("min",0);l=y.round(new Date(l),n.timeUnit,n.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime();null!=p&&null!=h&&(p=Math.round(Math.round((p-l)/m))/2,p==Math.round(p)?k.setPrivate("visible",!0):k.setPrivate("visible",!1))}}});c("GaplessDateAxis").setAll({fillRule:h=>{const k=h.get("axisFill");if(k){h=h.get("index");let l=!1;f.isNumber(h)&&0!=h%2||(l=!0);k.setPrivate("visible",l)}}});c("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,
autoZoom:!0,fillRule:h=>{const k=h.get("axisFill");if(k){var l=h.component;h=h.get("value");l=l.getPrivate("step");f.isNumber(h)&&f.isNumber(l)&&(f.round(h/l/2,5)==Math.round(h/l/2)?k.setPrivate("visible",!1):k.setPrivate("visible",!0))}}});c("DurationAxis").setAll({baseUnit:"second"});c("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"});
c("BaseColumnSeries").setAll({adjustBulletPosition:!0});c("ColumnSeries").setAll({clustered:!0});c("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:f.percent(70),height:f.percent(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"});c("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1});c("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,
isMeasured:!1});c("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1});c("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:(h,k)=>{var l=k.parent;l&&(k=l.height(),l=l.width(),h.moveTo(0,k/2),h.lineTo(l,k/2))}});b=c("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{});A.setColor(b,"stroke",a,"disabled");c("Graphics",["line","series","legend","marker","fill"]).setAll({draw:(h,
k)=>{var l=k.parent;l&&(k=l.height(),l=l.width(),h.moveTo(0,0),h.lineTo(l,0),h.lineTo(l,k),h.lineTo(0,k),h.lineTo(0,0))}});b=c("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{});A.setColor(b,"stroke",a,"disabled");c("SmoothedXYLineSeries").setAll({tension:.5});c("SmoothedXLineSeries").setAll({tension:.5});c("SmoothedYLineSeries").setAll({tension:.5});c("Candlestick").setAll({position:"absolute",isMeasured:!1,width:f.percent(50),height:f.percent(50),strokeWidth:1,strokeOpacity:1,
cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"});c("OHLC").setAll({width:f.percent(80),height:f.percent(80)});c("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"});b=c("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{});A.setColor(b,"fill",a,"positive");A.setColor(b,
"stroke",a,"positive");b=c("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{});A.setColor(b,"fill",a,"negative");A.setColor(b,"stroke",a,"negative");c("Rectangle",["column","autocolor","pro"]).states.create("riseFromOpen",{fillOpacity:0});c("Rectangle",["column","autocolor","pro"]).states.create("dropFromOpen",{fillOpacity:1});b=c("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{});A.setColor(b,"fill",a,"positive");A.setColor(b,"stroke",a,"positive");b=
c("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{});A.setColor(b,"fill",a,"negative");A.setColor(b,"stroke",a,"negative");c("RoundedRectangle",["rangegrip"]).setAll({strokeOpacity:0,fillOpacity:0,strokeWidth:1,width:12,height:12});b=c("Graphics",["rangegrip","button","icon"]);b.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:h=>{h.moveTo(0,.5);h.lineTo(0,12.5);h.moveTo(2,.5);h.lineTo(2,12.5);h.moveTo(4,.5);h.lineTo(4,12.5)}});A.setColor(b,"stroke",a,"secondaryButtonText");
c("Button",["rangegrip"]).setAll({draggable:!0,paddingTop:0,paddingBottom:0});c("Button",["rangegrip","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize",centerX:f.p50});c("Button",["rangegrip","horizontal"]).setAll({cursorOverStyle:"ew-resize",centerX:f.p50});c("Button",["rangegrip","vertical","left"]).setAll({centerY:f.p100});c("Button",["rangegrip","vertical","right"]).setAll({centerY:0});c("Button",["rangegrip","horizontal","top"]).setAll({centerY:0});c("Button",["rangegrip","horizontal",
"bottom"]).setAll({centerY:f.p100})}}class O extends y.SerialChart{constructor(){super(...arguments);Object.defineProperty(this,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new f.ListAutoDispose});Object.defineProperty(this,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new f.ListAutoDispose});Object.defineProperty(this,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(f.Container.new(this._root,{width:f.p100,layout:this._root.verticalLayout}))});
Object.defineProperty(this,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(f.Container.new(this._root,{width:f.p100,height:f.p100,layout:this._root.horizontalLayout}))});Object.defineProperty(this,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(f.Container.new(this._root,{width:f.p100,layout:this._root.verticalLayout}))});Object.defineProperty(this,"leftAxesContainer",{enumerable:!0,
configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(f.Container.new(this._root,{height:f.p100,layout:this._root.horizontalLayout}))});Object.defineProperty(this,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(f.Container.new(this._root,{width:f.p100,height:f.p100,maskContent:!1}))});Object.defineProperty(this,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(f.Container.new(this._root,
{width:f.p100,height:f.p100}))});Object.defineProperty(this,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(f.Container.new(this._root,{width:f.p100,height:f.p100}))});Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(f.Container.new(this._root,{width:f.p100,height:f.p100,isMeasured:!1}))});Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,
value:f.Container.new(this._root,{width:f.p100,height:f.p100,isMeasured:!1})});Object.defineProperty(this,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(f.Container.new(this._root,{height:f.p100,layout:this._root.horizontalLayout}))});Object.defineProperty(this,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(f.Container.new(this._root,{}))});Object.defineProperty(this,"zoomOutButton",
{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(na.Button.new(this._root,{themeTags:["zoom"],icon:f.Graphics.new(this._root,{themeTags:["button","icon"]})}))});Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}});Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(pa.new(this._root));
super._afterNew();this._disposers.push(this.xAxes);this._disposers.push(this.yAxes);const a=this._root;var b=this._root.verticalLayout;const c=this.zoomOutButton;c.events.on("click",()=>{this.zoomOut()});c.hide(0);c.states.lookup("default").set("opacity",1);this.chartContainer.set("layout",b);b=this.plotContainer;b.children.push(this.seriesContainer);this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer));this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer));
b.children.push(this.topGridContainer);b.children.push(this.bulletsContainer);b.set("interactive",!0);b.set("interactiveChildren",!1);b.set("background",f.Rectangle.new(a,{themeTags:["plotbackground","xy","background"]}));this._disposers.push(b.events.on("pointerdown",d=>{this._handlePlotDown(d)}));this._disposers.push(b.events.on("globalpointerup",d=>{this._handlePlotUp(d)}));this._disposers.push(b.events.on("globalpointermove",d=>{this._handlePlotMove(d)}));this._maskGrid();this._setUpTouch()}_beforeChanged(){super._beforeChanged();
(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")?!0:!1)}_maskGrid(){this.gridContainer.set("maskContent",!0);this.topGridContainer.set("maskContent",!0)}_removeSeries(a){a._unstack();a._posXDp&&a._posXDp.dispose();a._posYDp&&a._posYDp.dispose();a.set("baseAxis",
void 0);var b=a.get("xAxis");b&&(f.remove(b.series,a),b.markDirtyExtremes());if(b=a.get("yAxis"))f.remove(b.series,a),b.markDirtyExtremes();(b=this.get("cursor"))&&(b=b.get("snapToSeries"))&&f.remove(b,a);super._removeSeries(a)}handleWheel(a){const b=this.get("wheelX"),c=this.get("wheelY"),d=this.plotContainer,e=a.originalEvent;if(f.isLocalEvent(e,this)){e.preventDefault();var g=d.toLocal(a.point),h=this.get("wheelStep",.2),k=e.deltaY/100,l=e.deltaX/100,p=this.get("wheelZoomPositionX"),n=this.get("wheelZoomPositionY");
"zoomX"!==b&&"zoomXY"!==b||0==l||this.xAxes.each(m=>{if(m.get("zoomX")){var q=m.get("start");let r=m.get("end"),t=m.fixPosition(g.x/d.width());null!=p&&(t=p);let v=m.get("maxDeviation",0),u=Math.min(1+v,Math.max(-v,q-h*(r-q)*l*t));q=Math.max(-v,Math.min(1+v,r+h*(r-q)*l*(1-t)));1/(q-u)<m.getPrivate("maxZoomFactor",Infinity)/m.get("minZoomCount",1)&&this._handleWheelAnimation(m.zoom(u,q))}});"zoomX"!==c&&"zoomXY"!==c||0==k||this.xAxes.each(m=>{if(m.get("zoomX")){var q=m.get("start");let r=m.get("end"),
t=m.fixPosition(g.x/d.width());null!=p&&(t=p);let v=m.get("maxDeviation",0),u=Math.min(1+v,Math.max(-v,q-h*(r-q)*k*t));q=Math.max(-v,Math.min(1+v,r+h*(r-q)*k*(1-t)));1/(q-u)<m.getPrivate("maxZoomFactor",Infinity)/m.get("minZoomCount",1)&&this._handleWheelAnimation(m.zoom(u,q))}});"zoomY"!==b&&"zoomXY"!==b||0==l||this.yAxes.each(m=>{if(m.get("zoomY")){var q=m.get("start");let r=m.get("end"),t=m.fixPosition(g.y/d.height());null!=n&&(t=n);let v=m.get("maxDeviation",0),u=Math.min(1+v,Math.max(-v,q-h*
(r-q)*l*t));q=Math.max(-v,Math.min(1+v,r+h*(r-q)*l*(1-t)));1/(q-u)<m.getPrivate("maxZoomFactor",Infinity)/m.get("minZoomCount",1)&&this._handleWheelAnimation(m.zoom(u,q))}});"zoomY"!==c&&"zoomXY"!==c||0==k||this.yAxes.each(m=>{if(m.get("zoomY")){var q=m.get("start");let r=m.get("end"),t=m.fixPosition(g.y/d.height());null!=n&&(t=n);let v=m.get("maxDeviation",0),u=Math.min(1+v,Math.max(-v,q-h*(r-q)*k*t));q=Math.max(-v,Math.min(1+v,r+h*(r-q)*k*(1-t)));1/(q-u)<m.getPrivate("maxZoomFactor",Infinity)/m.get("minZoomCount",
1)&&this._handleWheelAnimation(m.zoom(u,q))}});"panX"!==b&&"panXY"!==b||0==l||this.xAxes.each(m=>{if(m.get("panX")){var q=m.get("start");let r=m.get("end"),t=this._getWheelSign(m)*h*(r-q)*l;q=this._fixWheel(q+t,r+t);this._handleWheelAnimation(m.zoom(q[0],q[1]))}});"panX"!==c&&"panXY"!==c||0==k||this.xAxes.each(m=>{if(m.get("panX")){var q=m.get("start");let r=m.get("end"),t=this._getWheelSign(m)*h*(r-q)*k;q=this._fixWheel(q+t,r+t);this._handleWheelAnimation(m.zoom(q[0],q[1]))}});"panY"!==b&&"panXY"!==
b||0==l||this.yAxes.each(m=>{if(m.get("panY")){var q=m.get("start");let r=m.get("end"),t=this._getWheelSign(m)*h*(r-q)*l;q=this._fixWheel(q+t,r+t);this._handleWheelAnimation(m.zoom(q[0],q[1]))}});"panY"!==c&&"panXY"!==c||0==k||this.yAxes.each(m=>{if(m.get("panY")){var q=m.get("start");let r=m.get("end"),t=this._getWheelSign(m)*h*(r-q)*k;q=this._fixWheel(q-t,r-t);this._handleWheelAnimation(m.zoom(q[0],q[1]))}})}}_handleSetWheel(){const a=this.get("wheelX"),b=this.get("wheelY"),c=this.plotContainer;
"none"!==a||"none"!==b?(this._wheelDp=c.events.on("wheel",d=>{const e=d.originalEvent;("none"!==a&&0!=Math.abs(e.deltaX)||"none"!==b&&0!=Math.abs(e.deltaY))&&this.handleWheel(d)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(a){let b=1;a.get("renderer").get("inversed")&&(b=-1);return b}_fixWheel(a,b){const c=b-a;0>a&&(a=0,b=a+c);1<b&&(b=1,a=b-c);return[a,b]}_handlePlotDown(a){var b=a.originalEvent;if(2!=b.button){var c=this.plotContainer,d=c.toLocal(a.point);
if((this.get("pinchZoomX")||this.get("pinchZoomY"))&&b.pointerId&&0<f.keys(c._downPoints).length){const e=this.xAxes.getIndex(0),g=this.yAxes.getIndex(0);e&&(this._downStartX=e.get("start",0),this._downEndX=e.get("end",1));g&&(this._downStartY=g.get("start",0),this._downEndY=g.get("end",1))}(this.get("panX")||this.get("panY"))&&0<=d.x&&0<=d.y&&d.x<=c.width()&&d.y<=this.height()&&(this._downPoint={x:b.clientX,y:b.clientY},b=this.get("panX"),c=this.get("panY"),b&&this.xAxes.each(e=>{e._panStart=e.get("start");
e._panEnd=e.get("end")}),c&&this.yAxes.each(e=>{e._panStart=e.get("start");e._panEnd=e.get("end")}),this.events.isEnabled("panstarted")&&this.events.dispatch("panstarted",{type:"panstarted",target:this,originalEvent:a.originalEvent}))}}_handleWheelAnimation(a){if(a)a.events.on("stopped",()=>{this._dispatchWheelAnimation()});else this._dispatchWheelAnimation()}_dispatchWheelAnimation(){this.events.isEnabled("wheelended")&&this.events.dispatch("wheelended",{type:"wheelended",target:this})}_handlePlotUp(a){const b=
this._downPoint;b&&(this.get("panX")||this.get("panY"))&&(a.originalEvent.clientX==b.x&&a.originalEvent.clientY==b.y&&this.events.isEnabled("pancancelled")&&this.events.dispatch("pancancelled",{type:"pancancelled",target:this,originalEvent:a.originalEvent}),this.events.isEnabled("panended")&&this.events.dispatch("panended",{type:"panended",target:this,originalEvent:a.originalEvent}));this._downPoint=void 0;this.xAxes.each(c=>{c._isPanning=!1});this.yAxes.each(c=>{c._isPanning=!1})}_handlePlotMove(a){const b=
this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){var c=a.originalEvent.pointerId;if(c&&(this._movePoints[c]=a.point,1<f.keys(b._downPoints).length)){this._handlePinch();return}}let d=this._downPoint;if(d){d=b.toLocal(this._root.documentPointToRoot(d));let e=b.toLocal(a.point);c=this.get("panX");a=this.get("panY");c&&((c=this.get("scrollbarX"))&&c.events.disableType("rangechanged"),this.xAxes.each(g=>{if(g.get("panX")){g._isPanning=!0;var h=g._panStart,k=g._panEnd;let l=(k-h)*
(d.x-e.x)/b.width();g.get("renderer").get("inversed")&&(l*=-1);h+=l;k+=l;k-h<1+2*g.get("maxDeviation",1)&&(g.set("start",h),g.set("end",k))}}),c&&c.events.enableType("rangechanged"));a&&((a=this.get("scrollbarY"))&&a.events.disableType("rangechanged"),this.yAxes.each(g=>{if(g.get("panY")){g._isPanning=!0;var h=g._panStart,k=g._panEnd;let l=(k-h)*(d.y-e.y)/b.height();g.get("renderer").get("inversed")&&(l*=-1);h-=l;k-=l;k-h<1+2*g.get("maxDeviation",1)&&(g.set("start",h),g.set("end",k))}}),a&&a.events.enableType("rangechanged"))}}_handlePinch(){var a=
this.plotContainer;let b=0,c=[],d=[];f.each$1(a._downPoints,(m,q)=>{c[b]=q;(m=this._movePoints[m])&&(d[b]=m);b++});if(1<c.length&&1<d.length){var e=a.width(),g=a.height(),h=c[0],k=c[1],l=d[0],p=d[1];if(h&&k&&l&&p){l=a.toLocal(l);p=a.toLocal(p);h=a.toLocal(h);k=a.toLocal(k);if(this.get("pinchZoomX")){a=this._downStartX;var n=this._downEndX;if(null!=a&&null!=n){h.x>k.x&&([h,k]=[k,h],[l,p]=[p,l]);let m=a+h.x/e*(n-a),q=a+k.x/e*(n-a),r=a+l.x/e*(n-a);e=a+p.x/e*(n-a);let t=Math.max(.001,q-m)/Math.max(.001,
e-r),v=a*t+m-r*t,u=n*t+q-e*t;this.xAxes.each(w=>{let x=w.fixPosition(v),z=w.fixPosition(u);w.zoom(x,z,0)})}}if(this.get("pinchZoomY")&&(a=this._downStartY,n=this._downEndY,null!=a&&null!=n)){h.y<k.y&&([h,k]=[k,h],[l,p]=[p,l]);h=a+(1-h.y/g)*(n-a);k=a+(1-k.y/g)*(n-a);l=a+(1-l.y/g)*(n-a);g=a+(1-p.y/g)*(n-a);p=Math.max(.001,k-h)/Math.max(.001,g-l);let m=a*p+h-l*p,q=n*p+k-g*p;this.yAxes.each(r=>{let t=r.fixPosition(m),v=r.fixPosition(q);r.zoom(t,v,0)})}}}}_handleCursorPosition(){const a=this.get("cursor");
if(a){const c=a.getPrivate("point");var b=a.get("snapToSeries");a._downPoint&&(b=void 0);if(b&&c){const d=a.get("snapToSeriesBy"),e=[];f.each(b,k=>{if(!k.isHidden()&&!k.isHiding())if("x!"!=d&&"y!"!=d){var l=k.startIndex();const p=k.endIndex();for(;l<p;l++){const n=k.dataItems[l];n&&!n.isHidden()&&e.push(n)}}else(k=k.get("tooltipDataItem"))&&e.push(k)});let g=Infinity,h;f.each(e,k=>{const l=k.get("point");if(l){let p=0;p="x"==d||"x!"==d?Math.abs(c.x-l.x):"y"==d||"y!"==d?Math.abs(c.y-l.y):Math.hypot(c.x-
l.x,c.y-l.y);p<g&&(g=p,h=k)}});f.each(b,k=>{(k=k.get("tooltip"))&&k._setDataItem(void 0)});if(h){b=h.component;b.showDataItemTooltip(h);b.setRaw("tooltipDataItem",h);const k=h.get("point");k&&a.handleMove(b.toGlobal({x:k.x-b.x(),y:k.y-b.y()}),!0)}}}}_updateCursor(){let a=this.get("cursor");a&&a.updateCursor()}_addCursor(a){this.plotContainer.children.push(a)}_prepareChildren(){super._prepareChildren();this.series.each(c=>{this._colorize(c)});(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel();
if(this.isDirty("cursor")){var a=this._prevSettings.cursor,b=this.get("cursor");b!==a&&(this._disposeProperty("cursor"),a&&a.dispose(),b&&(b._setChart(this),this._addCursor(b),this._pushPropertyDisposer("cursor",b.events.on("selectended",()=>{this._handleCursorSelectEnd()}))),this._prevSettings.cursor=b)}this.isDirty("scrollbarX")&&(a=this._prevSettings.scrollbarX,b=this.get("scrollbarX"),b!==a&&(this._disposeProperty("scrollbarX"),a&&a.dispose(),b&&(b.parent||this.topAxesContainer.children.push(b),
this._pushPropertyDisposer("scrollbarX",b.events.on("rangechanged",c=>{this._handleScrollbar(this.xAxes,c.start,c.end,c.grip)})),this._pushPropertyDisposer("scrollbarX",b.events.on("released",()=>{this.xAxes.each(c=>{c.get("zoomable")&&this._handleAxisSelection(c)})})),b.setPrivate("positionTextFunction",c=>{const d=this.xAxes.getIndex(0);return d?d.getTooltipText(c,!1)||"":""})),this._prevSettings.scrollbarX=b));this.isDirty("scrollbarY")&&(a=this._prevSettings.scrollbarY,b=this.get("scrollbarY"),
b!==a&&(this._disposeProperty("scrollbarY"),a&&a.dispose(),b&&(b.parent||this.rightAxesContainer.children.push(b),this._pushPropertyDisposer("scrollbarY",b.events.on("rangechanged",c=>{this._handleScrollbar(this.yAxes,c.start,c.end,c.grip)})),this._pushPropertyDisposer("scrollbarY",b.events.on("released",()=>{this.yAxes.each(c=>{c.get("zoomable")&&this._handleAxisSelection(c)})})),b.setPrivate("positionTextFunction",c=>{const d=this.yAxes.getIndex(0);return d?d.getTooltipText(c,!1)||"":""})),this._prevSettings.scrollbarY=
b));this._handleZoomOut()}_processSeries(a){super._processSeries(a);const b=a.get("xAxis"),c=a.get("yAxis");f.move(b.series,a);f.move(c.series,a);a._posXDp=a.addDisposer(b.events.on("positionchanged",()=>{a._fixPosition()}));a._posXDp=a.addDisposer(c.events.on("positionchanged",()=>{a._fixPosition()}));a.get("baseAxis")||(c.isType("CategoryAxis")||c.isType("DateAxis")?a.set("baseAxis",c):a.set("baseAxis",b));a.get("stacked")&&(a._markDirtyKey("stacked"),f.each(a.dataItems,d=>{d.set("stackToItemY",
void 0);d.set("stackToItemX",void 0)}));a._markDirtyAxes();c.markDirtyExtremes();b.markDirtyExtremes();b._seriesAdded=!0;c._seriesAdded=!0;this._colorize(a)}_colorize(a){var b=this.get("colors");b&&null==a.get("fill")&&(b=b.next(),a._setSoft("stroke",b),a._setSoft("fill",b));(b=this.get("patterns"))&&null==a.get("fillPattern")&&(b=b.next(),a._setSoft("fillPattern",b))}_handleCursorSelectEnd(){const a=this.get("cursor"),b=a.get("behavior"),c=a.getPrivate("downPositionX",0),d=a.getPrivate("downPositionY",
0),e=Math.min(1,Math.max(0,a.getPrivate("positionX",.5))),g=Math.min(1,Math.max(0,a.getPrivate("positionY",.5)));this.xAxes.each(h=>{if("zoomX"===b||"zoomXY"===b){let k=h.toAxisPosition(c),l=h.toAxisPosition(e);h.zoom(k,l)}h.setPrivate("updateScrollbar",!0)});this.yAxes.each(h=>{if("zoomY"===b||"zoomXY"===b){let k=h.toAxisPosition(d),l=h.toAxisPosition(g);h.zoom(k,l)}h.setPrivate("updateScrollbar",!0)})}_handleScrollbar(a,b,c,d){a.each(e=>{var g=e.fixPosition(b);let h=e.fixPosition(c);g=e.zoom(g,
h,void 0,d);e.setPrivateRaw("updateScrollbar",!1);if(g)g.events.on("stopped",()=>{e.setPrivateRaw("updateScrollbar",!0)});else e.setPrivateRaw("updateScrollbar",!0)})}_processAxis(a,b){return a.events.onAll(c=>{if("clear"===c.type)f.each(c.oldValues,d=>{this._removeAxis(d)});else if("push"===c.type)b.children.push(c.newValue),c.newValue.processChart(this);else if("setIndex"===c.type)b.children.setIndex(c.index,c.newValue),c.newValue.processChart(this);else if("insertIndex"===c.type)b.children.insertIndex(c.index,
c.newValue),c.newValue.processChart(this);else if("removeIndex"===c.type)this._removeAxis(c.oldValue);else if("moveIndex"===c.type)b.children.moveValue(c.value,c.newIndex),c.value.processChart(this);else throw Error("Unknown IListEvent type");})}_removeAxis(a){if(!a.isDisposed()){var b=a.parent;b&&b.children.removeValue(a);b=a.gridContainer;const c=b.parent;c&&c.children.removeValue(b);a=a.topGridContainer;(b=a.parent)&&b.children.removeValue(a)}}_updateChartLayout(){const a=this.leftAxesContainer.width(),
b=this.rightAxesContainer.width();var c=this.bottomAxesContainer;c.set("paddingLeft",a);c.set("paddingRight",b);c=this.topAxesContainer;c.set("paddingLeft",a);c.set("paddingRight",b)}processAxis(a){this.get("cursor")&&(this.addDisposer(a.on("start",()=>{this._updateCursor()})),this.addDisposer(a.on("end",()=>{this._updateCursor()})))}_handleAxisSelection(a,b){let c=a.fixPosition(a.get("start",0)),d=a.fixPosition(a.get("end",1));c>d&&([c,d]=[d,c]);if(-1!=this.xAxes.indexOf(a)){if(b||a.getPrivate("updateScrollbar"))!(a=
this.get("scrollbarX"))||a.getPrivate("isBusy")&&!b||(a.setRaw("start",c),a.setRaw("end",d),a.updateGrips())}else-1!=this.yAxes.indexOf(a)&&(b||a.getPrivate("updateScrollbar"))&&(!(a=this.get("scrollbarY"))||a.getPrivate("isBusy")&&!b||(a.setRaw("start",c),a.setRaw("end",d),a.updateGrips()));this._handleZoomOut()}_handleZoomOut(){let a=this.zoomOutButton;if(a&&a.parent){let b=!1;this.xAxes.each(c=>{if(0!=f.round(c.get("start",0),6)||1!=f.round(c.get("end",1),6))b=!0});this.yAxes.each(c=>{if(0!=f.round(c.get("start",
0),6)||1!=f.round(c.get("end",1),6))b=!0});b?a.isHidden()&&a.show():a.hide()}}inPlot(a){var b=this.plotContainer;const c=this.getPrivate("otherCharts",this._otherCharts),d=b.toGlobal(a);if(-.5<=a.x&&-.5<=a.y&&a.x<=b.width()+.5&&a.y<=b.height()+.5)return!0;if(c)for(a=c.length-1;0<=a;a--){var e=c[a];if(e!=this){b=e.plotContainer;const g=this._root.rootPointToDocument(d);e=e._root.documentPointToRoot(g);e=b.toLocal(e);if(-.1<=e.x&&-.1<=e.y&&e.x<=b.width()+.1&&e.y<=b.height()+.1)return!0}}return!1}arrangeTooltips(){const a=
this.plotContainer,b=a.width(),c=a.height(),d=this.height();let e=a._display.toGlobal({x:0,y:0}),g=a._display.toGlobal({x:b,y:c});const h=[];let k=0,l=Infinity,p=this._movePoint,n=this.get("maxTooltipDistance"),m=this.get("maxTooltipDistanceBy","xy"),q,r;f.isNumber(n)&&this.series.each(v=>{if(!v.isHidden()){var u=v.get("tooltip");if(u&&(u=u.get("pointTo"))){let w=Math.hypot(p.x-u.x,p.y-u.y);"x"==m?w=Math.abs(p.x-u.x):"y"==m&&(w=Math.abs(p.y-u.y));w<l&&(l=w,q=v,r=u)}}});const t=[];this.series.each(v=>
{const u=v.get("tooltip");if(u&&!u.get("forceHidden")){let w=!1,x=u.get("pointTo");if(x){if(0<=n){let z=u.get("pointTo");if(z&&r&&v!=q){let B=Math.hypot(r.x-z.x,r.y-z.y);"x"==m?B=Math.abs(r.x-z.x):"y"==m&&(B=Math.abs(r.y-z.y));B>n&&(w=!0)}}else-1==n&&v!=q&&(w=!0);this.inPlot(this._tooltipToLocal(x))&&u.dataItem?w||(k+=x.y):w=!0;w||v.isHidden()||v.isHiding()?u.hide(0):(u.show(),h.push(u),t.push(v))}}});this.setPrivate("tooltipSeries",t);if(this.get("arrangeTooltips")){const v=this._root.tooltipContainer;
if(k/h.length>c/2+e.y){h.sort((w,x)=>f.compareNumber(x.get("pointTo").y,w.get("pointTo").y));let u=g.y;f.each(h,w=>{let x=w.height(),z=w.get("centerY");z instanceof f.Percent&&(x*=z.value);x+=w.get("marginBottom",0);w.set("bounds",{left:e.x,top:e.y,right:g.x,bottom:u});w.setPrivate("customData",{left:e.x,top:e.y,right:g.x,bottom:u});u=Math.min(u-x,w._fy-x);w.parent==v&&v.children.moveValue(w,0)});if(0>u){h.reverse();let w=u;f.each(h,x=>{let z=x.get("bounds");if(z){let B=z.top-u,D=z.bottom-u;B<w&&
(B=w,D=B+x.height());x.set("bounds",{left:z.left,top:B,right:z.right,bottom:D});w=z.bottom-u+x.get("marginBottom",0)}})}}else{h.reverse();h.sort((w,x)=>f.compareNumber(w.get("pointTo").y,x.get("pointTo").y));let u=0;f.each(h,w=>{let x=w.height(),z=w.get("centerY");z instanceof f.Percent&&(x*=z.value);x+=w.get("marginBottom",0);w.set("bounds",{left:e.x,top:u,right:g.x,bottom:Math.max(e.y+d,u+x)});w.parent==v&&v.children.moveValue(w,0);u=Math.max(u+x,w._fy+x)});if(u>d){h.reverse();let w=d;f.each(h,
x=>{let z=x.get("bounds");if(z){let B=z.top-(d-u),D=z.bottom-(d-u);D>w&&(D=w,B=D-x.height());x.set("bounds",{left:z.left,top:B,right:z.right,bottom:D});w=D-x.height()-x.get("marginBottom",0)}})}}}}_tooltipToLocal(a){return this.plotContainer.toLocal(a)}zoomOut(){this.xAxes.each(a=>{a.setPrivate("updateScrollbar",!0);a.zoom(0,1)});this.yAxes.each(a=>{a.setPrivate("updateScrollbar",!0);a.zoom(0,1)})}_dispose(){super._dispose();const a=this.get("cursor");a&&a.dispose()}}Object.defineProperty(O,"className",
{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"});Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.SerialChart.classNames.concat([O.className])});class J extends f.Graphics{_beforeChanged(){super._beforeChanged();if(this.isPrivateDirty("width")||this.isPrivateDirty("height"))this._clear=!0}}Object.defineProperty(J,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"});Object.defineProperty(J,"classNames",{enumerable:!0,configurable:!0,
writable:!0,value:f.Graphics.classNames.concat([J.className])});class P extends f.Container{constructor(){super(...arguments);Object.defineProperty(this,"_alwaysShow",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(J.new(this._root,{themeTags:["x"]}))});Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(J.new(this._root,{themeTags:["y"]}))});
Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.Graphics.new(this._root,{themeTags:["selection","cursor"],layer:30}))});Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}});Object.defineProperty(this,"_lastPoint2",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}});Object.defineProperty(this,
"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=f.mergeTags(this._settings.themeTags,
["xy","cursor"]);super._afterNew();this.setAll({width:f.p100,height:f.p100,isMeasured:!0,position:"absolute"});this.states.create("hidden",{visible:!0,opacity:0});this._drawLines();this.setPrivateRaw("visible",!1);this._disposers.push(this.setTimeout(()=>{this.setPrivate("visible",!0)},500));this._disposers.push(this.lineX.events.on("positionchanged",()=>{this._handleXLine()}));this._disposers.push(this.lineY.events.on("positionchanged",()=>{this._handleYLine()}));this._disposers.push(this.lineX.events.on("focus",
()=>this._handleLineFocus()));this._disposers.push(this.lineX.events.on("blur",()=>this._handleLineBlur()));this._disposers.push(this.lineY.events.on("focus",()=>this._handleLineFocus()));this._disposers.push(this.lineY.events.on("blur",()=>this._handleLineBlur()));f.supports("keyboardevents")&&this._disposers.push(f.addEventListener(document,"keydown",a=>{this._handleLineMove(f.getEventKey(a),a.ctrlKey)}))}_setUpTouch(){const a=this.chart;a&&(a.plotContainer._display.cancelTouch="none"!=this.get("behavior")?
!0:!1)}_handleXLine(){let a=this.lineX.x(),b=!0;if(0>a||a>this.width())b=!1;this.lineX.setPrivate("visible",b)}_handleYLine(){let a=this.lineY.y(),b=!0;if(0>a||a>this.height())b=!1;this.lineY.setPrivate("visible",b)}_handleLineMove(a,b){let c="";var d=this.chart;let e;if(d&&d.xAxes.length&&(this._root.focused(this.lineX)?(c="positionX",e=d.xAxes.getIndex(0)):this._root.focused(this.lineY)&&(e=d.yAxes.getIndex(0),c="positionY"),d=1,b&&(d=5),e)){b=e.get("renderer").get("inversed",!1);let g;"ArrowRight"==
a||"ArrowDown"==a?g=1:"ArrowLeft"==a||"ArrowUp"==a?g=-1:"Tab"==a&&(g=0);null!=g&&(b&&(g*=-1),this.set(c,e.nextPosition(g*d)))}}_handleLineFocus(){this._alwaysShow=this.get("alwaysShow",!1);this.setAll({positionX:this.getPrivate("positionX",0),positionY:this.getPrivate("positionY",0),alwaysShow:!0});this._handleLineMove("Tab")}_handleLineBlur(){(this.lineX.isFocus()||this.lineY.isFocus())&&this.setAll({positionX:void 0,positionY:void 0,alwaysShow:this._alwaysShow})}_prepareChildren(){super._prepareChildren();
if(this.isDirty("xAxis")){this._tooltipX=!1;var a=this.get("xAxis");if(a){const b=a.get("tooltip");b&&(this._tooltipX=!0,this._disposers.push(b.on("pointTo",()=>{this._updateXLine(b)})))}}if(this.isDirty("yAxis")&&(this._tooltipY=!1,a=this.get("yAxis"))){const b=a.get("tooltip");b&&(this._tooltipY=!0,this._disposers.push(b.on("pointTo",()=>{this._updateYLine(b)})))}}_handleSyncWith(){const a=this.chart;if(a){const b=this.get("syncWith"),c=[];b&&f.each(b,d=>{(d=d.chart)&&c.push(d)});a._otherCharts=
c}}_updateChildren(){super._updateChildren();this._handleSyncWith();if(this.isDirty("positionX")||this.isDirty("positionY")){const a=this.get("positionX"),b=this.get("positionY");null==a&&null==b?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(a){let b=f.round(this._display.toLocal(a.get("pointTo",{x:0,y:0})).x,3);this._toX!=b&&(this.lineX.animate({key:"x",to:b,duration:a.get("animationDuration",0),easing:a.get("animationEasing")}),
this._toX=b)}_updateYLine(a){let b=f.round(this._display.toLocal(a.get("pointTo",{x:0,y:0})).y,3);this._toY!=b&&(this.lineY.animate({key:"y",to:b,duration:a.get("animationDuration",0),easing:a.get("animationEasing")}),this._toY=b)}_drawLines(){this.lineX.set("draw",a=>{a.moveTo(0,0);a.lineTo(0,this.height())});this.lineY.set("draw",a=>{a.moveTo(0,0);a.lineTo(this.width(),0)})}updateCursor(){this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",
0))));this.handleMove()}_setChart(a){this.chart=a;this._handleSyncWith();const b=a.plotContainer;this.events.on("boundschanged",()=>{this._disposers.push(this.setTimeout(()=>{this.updateCursor()},50))});f.supports("touchevents")&&(this._disposers.push(b.events.on("click",c=>{f.isTouchEvent(c.originalEvent)&&this._handleMove(c)})),this._setUpTouch());this._disposers.push(b.events.on("pointerdown",c=>{this._handleCursorDown(c)}));this._disposers.push(b.events.on("globalpointerup",c=>{this._handleCursorUp(c);
c.native||this.isHidden()||this._handleMove(c)}));this._disposers.push(b.events.on("globalpointermove",c=>{if(this.get("syncWith")||0!=f.keys(b._downPoints).length||c.native||!this.isHidden())this._handleMove(c),1<Math.hypot(this._lastPoint2.x-c.point.x,this._lastPoint2.y-c.point.y)&&(this._handleLineBlur(),this._lastPoint2=c.point)}));(a=this.parent)&&a.children.moveValue(this.selection)}_inPlot(a){const b=this.chart;return b?b.inPlot(a):!1}_handleCursorDown(a){if(2!=a.originalEvent.button){var b=
this._display.toLocal(a.point),c=this.chart;this.selection.set("draw",()=>{});c&&this._inPlot(b)&&(this._downPoint=b,"none"!=this.get("behavior")&&(this.selection.show(),this.events.isEnabled("selectstarted")&&this.events.dispatch("selectstarted",{type:"selectstarted",target:this,originalEvent:a.originalEvent})),a=this._getPosition(b).x,b=this._getPosition(b).y,this.setPrivate("downPositionX",a),this.setPrivate("downPositionY",b))}}_handleCursorUp(a){if(this._downPoint){const b=this.get("behavior",
"none");if("none"!=b){"z"===b.charAt(0)&&this.selection.hide();let c=this._display.toLocal(a.point);const d=this._downPoint,e=this.get("moveThreshold",1);if(c&&d){let g=!1;("zoomX"===b||"zoomXY"===b||"selectX"===b||"selectXY"===b)&&Math.abs(c.x-d.x)>e&&(g=!0);("zoomY"===b||"zoomXY"===b||"selectY"===b||"selectXY"===b)&&Math.abs(c.y-d.y)>e&&(g=!0);g?this.events.isEnabled("selectended")&&this.events.dispatch("selectended",{type:"selectended",target:this,originalEvent:a.originalEvent}):this.events.isEnabled("selectcancelled")&&
this.events.dispatch("selectcancelled",{type:"selectcancelled",target:this,originalEvent:a.originalEvent})}}}this._downPoint=void 0}_handleMove(a){if(this.getPrivate("visible")){var b=this.chart;if(b&&1<f.keys(b.plotContainer._downPoints).length)this.set("forceHidden",!0);else{this.set("forceHidden",!1);b=a.point;var c=this._lastPoint;if(Math.round(c.x)!==Math.round(b.x)||Math.round(c.y)!==Math.round(b.y))this._lastPoint=b,this.setPrivate("lastPoint",b),this.handleMove({x:b.x,y:b.y},!1,a.originalEvent)}}}_getPosition(a){return{x:a.x/
this.width(),y:a.y/this.height()}}handleMove(a,b,c){a||(a=this._movePoint);const d=this.get("alwaysShow");if(a){this._movePoint=a;var e=this._display.toLocal(a),g=this.chart;if(g&&(this._inPlot(e)||this._downPoint)){g._movePoint=a;this.isHidden()&&(this.show(),"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",()=>{}));var h=e.x,k=e.y;h=this._getPosition(e);this.setPrivate("point",e);let l=this.get("snapToSeries");this._downPoint&&(l=void 0);k=this.get("positionX");let p=h.x;f.isNumber(k)&&
(p=k);k=this.get("positionY");let n=h.y;f.isNumber(k)&&(n=k);this.setPrivate("positionX",p);this.setPrivate("positionY",n);k=this._getPoint(p,n);h=k.x;k=k.y;g.xAxes.each(m=>{m._handleCursorPosition(p,l);d&&m.handleCursorShow()});g.yAxes.each(m=>{m._handleCursorPosition(n,l);d&&m.handleCursorShow()});b||(g._handleCursorPosition(),this.events.isEnabled("cursormoved")&&this.events.dispatch("cursormoved",{type:"cursormoved",target:this,point:a,originalEvent:c}));this._updateLines(h,k);g.arrangeTooltips()}else this._downPoint||
d||(this.hide(0),this.events.isEnabled("cursorhidden")&&this.events.dispatch("cursorhidden",{type:"cursorhidden",target:this}));this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(e)}else this.hide(0)}_getPoint(a,b){return{x:this.width()*a,y:this.height()*b}}_updateLines(a,b){this._tooltipX||this.lineX.set("x",a);this._tooltipY||this.lineY.set("y",b);this._drawLines()}_updateSelection(a){const b=this.selection,c=this.get("behavior"),d=this.width(),e=this.height();0>a.x&&(a.x=0);a.x>
d&&(a.x=d);0>a.y&&(a.y=0);a.y>e&&(a.y=e);b.set("draw",g=>{const h=this._downPoint;if(h)if("zoomXY"===c||"selectXY"===c)g.moveTo(h.x,h.y),g.lineTo(h.x,a.y),g.lineTo(a.x,a.y),g.lineTo(a.x,h.y),g.lineTo(h.x,h.y);else if("zoomX"===c||"selectX"===c)g.moveTo(h.x,0),g.lineTo(h.x,e),g.lineTo(a.x,e),g.lineTo(a.x,0),g.lineTo(h.x,0);else if("zoomY"===c||"selectY"===c)g.moveTo(0,h.y),g.lineTo(d,h.y),g.lineTo(d,a.y),g.lineTo(0,a.y),g.lineTo(0,h.y)})}_onHide(){if(this.isHidden()){let a=this.chart;a&&(a.xAxes.each(b=>
{b.handleCursorHide()}),a.yAxes.each(b=>{b.handleCursorHide()}),a.series.each(b=>{b.handleCursorHide()}))}super._onHide()}_onShow(){if(!this.isHidden()){let a=this.chart;a&&(a.xAxes.each(b=>{b.handleCursorShow()}),a.yAxes.each(b=>{b.handleCursorShow()}))}super._onShow()}_dispose(){super._dispose();this.selection.dispose()}}Object.defineProperty(P,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"});Object.defineProperty(P,"classNames",{enumerable:!0,configurable:!0,writable:!0,
value:f.Container.classNames.concat([P.className])});class K extends y.Series{constructor(){super(...arguments);Object.defineProperty(this,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_stackDirty",
{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,
writable:!0,value:0});Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.Container.new(this._root,{}))});Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new f.List});Object.defineProperty(this,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_couldStackTo",{enumerable:!0,
configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}});Object.defineProperty(this,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,
value:0});Object.defineProperty(this,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0});Object.defineProperty(this,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]});Object.defineProperty(this,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]});Object.defineProperty(this,
"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,
"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new y.DataItem(this,void 0,{})});Object.defineProperty(this,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});
Object.defineProperty(this,"_posXDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_posYDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY");this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY");this._setRawDefault("vcx",1);this._setRawDefault("vcy",1);this._setRawDefault("valueXShow","valueXWorking");
this._setRawDefault("valueYShow","valueYWorking");this._setRawDefault("openValueXShow","openValueXWorking");this._setRawDefault("openValueYShow","openValueYWorking");this._setRawDefault("lowValueXShow","lowValueXWorking");this._setRawDefault("lowValueYShow","lowValueYWorking");this._setRawDefault("highValueXShow","highValueXWorking");this._setRawDefault("highValueYShow","highValueYWorking");this._setRawDefault("lowValueXGrouped","low");this._setRawDefault("lowValueYGrouped","low");this._setRawDefault("highValueXGrouped",
"high");this._setRawDefault("highValueYGrouped","high");super._afterNew();this.set("maskContent",!0);this._disposers.push(this.axisRanges.events.onAll(a=>{if("clear"===a.type)f.each(a.oldValues,b=>{this._removeAxisRange(b)});else if("push"===a.type)this._processAxisRange(a.newValue);else if("setIndex"===a.type)this._processAxisRange(a.newValue);else if("insertIndex"===a.type)this._processAxisRange(a.newValue);else if("removeIndex"===a.type)this._removeAxisRange(a.oldValue);else if("moveIndex"===a.type)this._processAxisRange(a.value);
else throw Error("Unknown IStreamEvent type");}));this.states.create("hidden",{opacity:1,visible:!1});this.onPrivate("startIndex",()=>{this.root.events.once("frameended",()=>{this.updateLegendValue()})});this.onPrivate("endIndex",()=>{this.root.events.once("frameended",()=>{this.updateLegendValue()})});this._makeFieldNames()}_processAxisRange(a){const b=f.Container.new(this._root,{});a.container=b;this.children.push(b);a.series=this;a=a.axisDataItem;a.setRaw("isRange",!0);const c=a.component;if(c){c._processAxisRange(a,
["range","series"]);var d=a.get("bullet");d&&(d=d.get("sprite"))&&d.setPrivate("visible",!1);(d=a.get("axisFill"))&&b.set("mask",d);c._seriesAxisRanges.push(a)}}_removeAxisRange(a){const b=a.axisDataItem,c=b.component;c.disposeDataItem(b);f.remove(c._seriesAxisRanges,b);(a=a.container)&&a.dispose()}_updateFields(){super._updateFields();this._valueXFields=[];this._valueYFields=[];this._valueXShowFields=[];this._valueYShowFields=[];this.__valueXShowFields=[];this.__valueYShowFields=[];this.valueXFields&&
f.each(this.valueXFields,a=>{this.get(a+"Field")&&(this._valueXFields.push(a),a=this.get(a+"Show"),this.__valueXShowFields.push(a),-1!=a.indexOf("Working")?this._valueXShowFields.push(a.split("Working")[0]):this._valueXShowFields.push(a))});this.valueYFields&&f.each(this.valueYFields,a=>{this.get(a+"Field")&&(this._valueYFields.push(a),a=this.get(a+"Show"),this.__valueYShowFields.push(a),-1!=a.indexOf("Working")?this._valueYShowFields.push(a.split("Working")[0]):this._valueYShowFields.push(a))})}_dispose(){super._dispose();
this._bullets={};const a=this.chart;a&&a.series.removeValue(this);f.removeFirst(this.get("xAxis").series,this);f.removeFirst(this.get("yAxis").series,this)}_min(a,b){var c=this.getPrivate(a);this.setPrivate(a,null==c?b:null==b?c:b<c?b:c)}_max(a,b){var c=this.getPrivate(a);this.setPrivate(a,null==c?b:null==b?c:b>c?b:c)}_shouldMakeBullet(a){const b=this.get("xAxis"),c=this.get("yAxis"),d=this.get("baseAxis");if(!b.inited||!c.inited)return!1;const e=this.get("minBulletDistance",0);if(0<e){var g=this.startIndex();
g=this.endIndex()-g;if(b==d){if(b.get("renderer").axisLength()/g<e/5)return!1}else if(c==d&&c.get("renderer").axisLength()/g<e/5)return!1}return null!=a.get(this._xField)&&null!=a.get(this._yField)?!0:!1}_makeFieldNames(){const a=this.get("xAxis"),b=this.get("yAxis"),c=a.getPrivate("name"),d=f.capitalizeFirst(c),e=b.getPrivate("name"),g=f.capitalizeFirst(e),h=a.get("renderer").getPrivate("letter"),k=b.get("renderer").getPrivate("letter");"ValueAxis"===a.className?(this._xField=this.get(c+h+"Show"),
this._xOpenField=this.get("open"+d+h+"Show"),this._xLowField=this.get("low"+d+h+"Show"),this._xHighField=this.get("high"+d+h+"Show")):(this._xField=c+h,this._xOpenField="open"+d+h,this._xLowField="low"+d+h,this._xHighField="high"+d+h);"ValueAxis"===b.className?(this._yField=this.get(e+k+"Show"),this._yOpenField=this.get("open"+g+k+"Show"),this._yLowField=this.get("low"+g+k+"Show"),this._yHighField=this.get("high"+g+k+"Show")):(this._yField=e+k,this._yOpenField="open"+g+k,this._yLowField="low"+g+k,
this._yHighField="high"+g+k)}_fixVC(){const a=this.get("xAxis"),b=this.get("yAxis"),c=this.get("baseAxis"),d=this.states.lookup("hidden"),e=this.get("sequencedInterpolation");if(d){let g=0;e&&(g=.999999999999);a===c?d.set("vcy",g):(b!==c&&d.set("vcy",g),d.set("vcx",g))}}_handleMaskBullets(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}_fixPosition(){const a=this.get("xAxis"),b=this.get("yAxis");this.set("x",a.x()-f.relativeToValue(a.get("centerX",0),
a.width())-a.parent.get("paddingLeft",0));this.set("y",b.y()-f.relativeToValue(b.get("centerY",0),b.height())-b.parent.get("paddingTop",0));this.bulletsContainer.set("y",this.y());this.bulletsContainer.set("x",this.x())}_prepareChildren(){super._prepareChildren();this._bullets={};if(this.isDirty("valueYShow")||this.isDirty("valueXShow")||this.isDirty("openValueYShow")||this.isDirty("openValueXShow")||this.isDirty("lowValueYShow")||this.isDirty("lowValueXShow")||this.isDirty("highValueYShow")||this.isDirty("highValueXShow"))this._updateFields(),
this._makeFieldNames(),this._valuesDirty=!0;if(this.isDirty("xAxis")||this.isDirty("yAxis"))this._valuesDirty=!0;this.set("width",this.get("xAxis").width());this.set("height",this.get("yAxis").height());this._handleMaskBullets();const a=this.get("xAxis"),b=this.get("yAxis");var c=this.get("baseAxis");switch(this.get("tooltipPositionX")){case "open":var d=this._xOpenField;break;case "low":d=this._xLowField;break;case "high":d=this._xHighField;break;default:d=this._xField}this._tooltipFieldX=d;switch(this.get("tooltipPositionY")){case "open":d=
this._yOpenField;break;case "low":d=this._yLowField;break;case "high":d=this._yHighField;break;default:d=this._yField}this._tooltipFieldY=d;this.isDirty("baseAxis")&&this._fixVC();this._fixPosition();const e=this.get("stacked");this.isDirty("stacked")&&(e?(!this._valuesDirty||this._dataProcessed)&&this._stack():this._unstack());this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,e&&this._stack(),f.each(this.dataItems,k=>{f.each(this._valueXShowFields,l=>{let p=k.get(l);null!=p&&(e&&(p+=
this.getStackedXValue(k,l)),this._min("minX",p),this._max("maxX",p))});f.each(this._valueYShowFields,l=>{let p=k.get(l);null!=p&&(e&&(p+=this.getStackedYValue(k,l)),this._min("minY",p),this._max("maxY",p))});a.processSeriesDataItem(k,this._valueXFields);b.processSeriesDataItem(k,this._valueYFields)}),a._seriesValuesDirty=!0,b._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&a.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&
b.markDirtyExtremes()),this._markStakedDirtyStack(),this.get("tooltipDataItem")||this.updateLegendValue(void 0));(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack();this._dataGrouped||(a._groupSeriesData(this),b._groupSeriesData(this),this._dataGrouped=!0);if(this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("adjustedStartIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._sizeDirty){var g=this.startIndex();
d=this.endIndex();var h=this.get("minBulletDistance",0);0<h&&c&&(c.get("renderer").axisLength()/(d-g)>h?this._showBullets=!0:this._showBullets=!1);if((this._psi!=g||this._pei!=d||this.isDirty("vcx")||this.isDirty("vcy")||this.isPrivateDirty("adjustedStartIndex")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;h=this.get("vcx",1);const k=this.get("vcy",1),l=this.get("stacked",!1),p=this.getPrivate("outOfSelection");if(c===a||!c)if(b._calculateTotals(),
this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),p)b.markDirtySelectionExtremes();else for(let n=g;n<d;n++)this.processYSelectionDataItem(this.dataItems[n],k,l);if(c===b||!c)if(a._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),p)b.markDirtySelectionExtremes();else for(;g<d;g++)this.processXSelectionDataItem(this.dataItems[g],h,l);c!==a&&c||"valueYWorking"===this.get("valueYShow")||(d=this.getPrivate("selectionMinY"),
null!=d&&(this.setPrivateRaw("minY",d),b.markDirtyExtremes()),d=this.getPrivate("selectionMaxY"),null!=d&&(this.setPrivateRaw("maxY",d),b.markDirtyExtremes()));c!==b&&c||"valueXWorking"===this.get("valueXShow")||(c=this.getPrivate("selectionMinX"),null!=c&&(this.setPrivateRaw("minX",c),b.markDirtyExtremes()),c=this.getPrivate("selectionMaxX"),null!=c&&(this.setPrivateRaw("maxX",c),a.markDirtyExtremes()));(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&a.markDirtySelectionExtremes();
(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&b.markDirtySelectionExtremes()}}}_makeRangeMask(){if(0<this.axisRanges.length){let a=this._mainContainerMask;null==a&&(this._mainContainerMask=a=this.children.push(f.Graphics.new(this._root,{})),a.set("draw",(b,c)=>{const d=this.parent;if(d){const e=this._root.container.width(),g=this._root.container.height();b.moveTo(-e,-g);b.lineTo(-e,2*g);b.lineTo(2*e,2*g);b.lineTo(2*e,-g);b.lineTo(-e,-g);this.axisRanges.each(h=>{h=h.axisDataItem.get("axisFill");
d&&h&&(h=h.get("draw"))&&h(b,c)})}this.mainContainer._display.mask=a._display}));a.markDirty();a._markDirtyKey("fill")}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren();this._x=this.x();this._y=this.y();this._makeRangeMask()}_stack(){const a=this.chart;if(a){var b=a.series.indexOf(this);this._couldStackTo=[];if(0<b)for(let c=b-1;0<=c&&(b=a.series.getIndex(c),b.get("xAxis")!==this.get("xAxis")||b.get("yAxis")!==this.get("yAxis")||b.className!==this.className||(this._couldStackTo.push(b),
b.get("stacked")));c--);this._stackDataItems()}}_unstack(){f.each$1(this._reallyStackedTo,(a,b)=>{delete b._stackedSeries[this.uid]});this._reallyStackedTo={};f.each(this.dataItems,a=>{a.setRaw("stackToItemY",void 0);a.setRaw("stackToItemX",void 0)})}_stackDataItems(){const a=this.get("baseAxis"),b=this.get("xAxis"),c=this.get("yAxis");let d,e;a===b?(d="valueY",e="stackToItemY"):a===c&&(d="valueX",e="stackToItemX");let g=this._couldStackTo.length,h=0;const k=this.get("stackToNegative");this._reallyStackedTo=
{};f.each(this.dataItems,l=>{for(let p=0;p<g;p++){let n=this._couldStackTo[p],m=n.dataItems[h],q=l.get(d);if(m){let r=m.get(d);if(k)if(f.isNumber(q)){if(f.isNumber(r)){if(0<=q&&0<=r){l.setRaw(e,m);this._reallyStackedTo[n.uid]=n;n._stackedSeries[this.uid]=this;break}if(0>q&&0>r){l.setRaw(e,m);this._reallyStackedTo[n.uid]=n;n._stackedSeries[this.uid]=this;break}}}else break;else if(f.isNumber(q)&&f.isNumber(r)){l.setRaw(e,m);this._reallyStackedTo[n.uid]=n;n._stackedSeries[this.uid]=this;break}}}h++})}processXSelectionDataItem(a,
b,c){f.each(this.__valueXShowFields,d=>{let e=a.get(d);null!=e&&(c&&(e+=this.getStackedXValueWorking(a,d)),this._min("selectionMinX",e),this._max("selectionMaxX",e*b))})}processYSelectionDataItem(a,b,c){f.each(this.__valueYShowFields,d=>{let e=a.get(d);null!=e&&(c&&(e+=this.getStackedYValueWorking(a,d)),this._min("selectionMinY",e),this._max("selectionMaxY",e*b))})}getStackedYValueWorking(a,b){if(a=a.get("stackToItemY")){const c=a.component;return a.get(b,0)*c.get("vcy",1)+this.getStackedYValueWorking(a,
b)}return 0}getStackedXValueWorking(a,b){if(a=a.get("stackToItemX")){const c=a.component;return a.get(b,0)*c.get("vcx",1)+this.getStackedXValueWorking(a,b)}return 0}getStackedYValue(a,b){return(a=a.get("stackToItemY"))?a.get(b,0)+this.getStackedYValue(a,b):0}getStackedXValue(a,b){return(a=a.get("stackToItemX"))?a.get(b,0)+this.getStackedXValue(a,b):0}createLegendMarker(a){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0;this.markDirty()}_markDataSetDirty(){this._afterDataChange();this._valuesDirty=
!0;this._aggregatesCalculated=this._dataProcessed=!1;this.markDirty()}_clearDirty(){super._clearDirty();this._dataProcessed=this._stackDirty=this._selectionProcessed=this._axesDirty=!1}_positionBullet(a){let b=a.get("sprite");if(b){var c=b.dataItem,d=a.get("locationX",c.get("locationX",.5)),e=a.get("locationY",c.get("locationY",.5)),g=this.get("xAxis"),h=this.get("yAxis");g=g.getDataItemPositionX(c,this._xField,d,this.get("vcx",1));h=h.getDataItemPositionY(c,this._yField,e,this.get("vcy",1));var k=
this.getPoint(g,h);let m=c.get("left",k.x);var l=c.get("right",k.x),p=c.get("top",k.y);let q=c.get("bottom",k.y),r=k=0;l-=m;p=q-p;if(this._shouldShowBullet(g,h)){b.setPrivate("visible",!a.getPrivate("hidden"));let t=a.get("field");const v=this.get("baseAxis"),u=this.get("xAxis"),w=this.get("yAxis");if(void 0!=t)if(v==u){if("value"==t)var n=this._yField;else"open"==t?n=this._yOpenField:"high"==t?n=this._yHighField:"low"==t&&(n=this._yLowField);n&&(h=w.getDataItemPositionY(c,n,0,this.get("vcy",1)),
k=w.get("renderer").positionToPoint(h),r=k.y,k=m+l*d)}else"value"==t?n=this._xField:"open"==t?n=this._xOpenField:"high"==t?n=this._xHighField:"low"==t&&(n=this._xLowField),n&&(g=u.getDataItemPositionX(c,n,0,this.get("vcx",1)),k=u.get("renderer").positionToPoint(g),k=k.x,r=q-p*e);else k=m+l*d,r=q-p*e;if(a=a.get("stacked")){c=this.chart;if(v==u){if(d=this._bullets[g+"_"+h])d=d.bounds(),e=b.localBounds(),n=r,r=d.top,"down"==a?r=d.bottom-e.top:"auto"==a?c&&(r=n<c.plotContainer.height()/2?d.bottom-e.top:
r+e.bottom):r+=e.bottom}else if(d=this._bullets[g+"_"+h])d=d.bounds(),e=b.localBounds(),n=k,k=d.right,"down"==a?k=d.left-e.right:"auto"==a?c&&(k=n<c.plotContainer.width()/2?d.left-e.right:k-e.left):k-=e.left;this._bullets[g+"_"+h]=b}b.isType("Label")&&(b.setPrivate("maxWidth",Math.abs(l)),b.setPrivate("maxHeight",Math.abs(p)));b.setAll({x:k,y:r})}else b.setPrivate("visible",!1)}}_shouldShowBullet(a,b){return this._showBullets}setDataSet(a){this._dataSets[a]&&(this._handleDataSetChange(),this._dataItems=
this._dataSets[a],this._markDataSetDirty(),this._dataSetId=a,this.events.isEnabled("datasetchanged")&&this.events.dispatch("datasetchanged",{type:"datasetchanged",target:this,id:a}))}resetGrouping(){f.each$1(this._dataSets,(a,b)=>{b!=this._mainDataItems&&f.each(b,c=>{this.disposeDataItem(c)})});this._dataSets={};this._dataItems=this.mainDataItems}_handleDataSetChange(){f.each(this._dataItems,a=>{(a=a.bullets)&&f.each(a,b=>{b&&(b=b.get("sprite"))&&b.setPrivate("visible",!1)})});this._selectionProcessed=
!1}show(a){const b=Object.create(null,{show:{get:()=>super.show}});return N.__awaiter(this,void 0,void 0,function*(){this._fixVC();let c=[];c.push(b.show.call(this,a).then(()=>{this._isShowing=!1;let d=this.get("xAxis"),e=this.get("yAxis"),g=this.get("baseAxis");e!==g&&e.markDirtySelectionExtremes();d!==g&&d.markDirtySelectionExtremes()}));c.push(this.bulletsContainer.show(a));c.push(this._sequencedShowHide(!0,a));yield Promise.all(c)})}hide(a){const b=Object.create(null,{hide:{get:()=>super.hide}});
return N.__awaiter(this,void 0,void 0,function*(){this._fixVC();let c=[];c.push(b.hide.call(this,a).then(()=>{this._isHiding=!1}));c.push(this.bulletsContainer.hide(a));c.push(this._sequencedShowHide(!1,a));yield Promise.all(c)})}showDataItem(a,b){const c=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return N.__awaiter(this,void 0,void 0,function*(){const d=[c.showDataItem.call(this,a,b)];f.isNumber(b)||(b=this.get("stateAnimationDuration",0));const e=this.get("stateAnimationEasing");
f.each(this._valueFields,g=>{d.push(a.animate({key:g+"Working",to:a.get(g),duration:b,easing:e}).waitForStop())});yield Promise.all(d)})}hideDataItem(a,b){const c=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return N.__awaiter(this,void 0,void 0,function*(){const d=[c.hideDataItem.call(this,a,b)];var e=this.states.create("hidden",{});f.isNumber(b)||(b=e.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const g=e.get("stateAnimationEasing",this.get("stateAnimationEasing"));
e=this.get("xAxis");const h=this.get("yAxis");var k=this.get("baseAxis");const l=this.get("stacked");k!==e&&k||f.each(this._valueYFields,p=>{let n=h.getPrivate("min"),m=h.baseValue();f.isNumber(n)&&n>m&&(m=n);l&&(m=0);null!=a.get(p)&&d.push(a.animate({key:p+"Working",to:m,duration:b,easing:g}).waitForStop())});if(k===h||!k){k=e.getPrivate("min");let p=e.baseValue();f.isNumber(k)&&k>p&&(p=k);l&&(p=0);f.each(this._valueXFields,n=>{null!=a.get(n)&&d.push(a.animate({key:n+"Working",to:p,duration:b,easing:g}).waitForStop())})}yield Promise.all(d)})}_markDirtyStack(){this._stackDirty=
!0;this.markDirty();this._markStakedDirtyStack()}_markStakedDirtyStack(){const a=this._stackedSeries;a&&f.each$1(a,(b,c)=>{c._stackDirty||c._markDirtyStack()})}_afterChanged(){super._afterChanged();this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}showDataItemTooltip(a){this.getPrivate("doNotUpdateLegend")||(this.updateLegendMarker(a),this.updateLegendValue(a));const b=this.get("tooltip");if(b)if(!this.isHidden()&&this.get("visible")){if(b._setDataItem(a),a){var c=this.get("locationX",0),d=
this.get("locationY",1);c=a.get("locationX",c);d=a.get("locationY",d);const e=this.get("xAxis"),g=this.get("yAxis"),h=this.get("vcx",1),k=this.get("vcy",1);c=e.getDataItemPositionX(a,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*c,h);d=g.getDataItemPositionY(a,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*d,k);c=this.getPoint(c,d);let l=!0;f.each(this._valueFields,p=>{null==a.get(p)&&(l=!1)});l?(d=this.chart)&&d.inPlot(c)?(b.label.text.markDirtyText(),
b.set("tooltipTarget",this._getTooltipTarget(a)),b.set("pointTo",this._display.toGlobal({x:c.x,y:c.y}))):b._setDataItem(void 0):b._setDataItem(void 0)}}else this.hideTooltip()}hideTooltip(){const a=this.get("tooltip");a&&a.set("tooltipTarget",this);return super.hideTooltip()}_getTooltipTarget(a){return"bullet"==this.get("seriesTooltipTarget")&&(a=a.bullets)&&0<a.length&&(a=a[0].get("sprite"))?a:this}updateLegendValue(a){var b=this.get("legendDataItem");if(b){var c=b.get("label");if(c){let d="";a?
(c._setDataItem(a),d=this.get("legendLabelText",c.get("text",this.get("name","")))):(c._setDataItem(this._emptyDataItem),d=this.get("legendRangeLabelText",this.get("legendLabelText",c.get("text",this.get("name","")))));c.set("text",d)}if(b=b.get("valueLabel"))c="",a?(b._setDataItem(a),c=this.get("legendValueText",b.get("text",""))):(b._setDataItem(this._emptyDataItem),c=this.get("legendRangeValueText",b.get("text",""))),b.set("text",c)}}_getItemReaderLabel(){let a="X: {"+this._xField;this.get("xAxis").isType("DateAxis")&&
(a+=".formatDate()");a+="}; Y: {"+this._yField;this.get("yAxis").isType("DateAxis")&&(a+=".formatDate()");return a+"}"}getPoint(a,b){a=this.get("xAxis").get("renderer").positionToCoordinate(a);b=this.get("yAxis").get("renderer").positionToCoordinate(b);-999999999>b&&(b=-999999999);999999999<b&&(b=999999999);-999999999>a&&(a=-999999999);999999999<a&&(a=999999999);return{x:a,y:b}}_shouldInclude(a){return!0}handleCursorHide(){this.hideTooltip();this.updateLegendValue(void 0);this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange();
this.get("xAxis")._markDirtyKey("start");this.get("yAxis")._markDirtyKey("start");this.resetExtremes()}resetExtremes(){this.setPrivate("selectionMinX",void 0);this.setPrivate("selectionMaxX",void 0);this.setPrivate("selectionMinY",void 0);this.setPrivate("selectionMaxY",void 0);this.setPrivate("minX",void 0);this.setPrivate("minY",void 0);this.setPrivate("maxX",void 0);this.setPrivate("maxY",void 0)}createAxisRange(a){return this.axisRanges.push({axisDataItem:a})}get mainDataItems(){return this._mainDataItems}_adjustStartIndex(a){var b=
this.get("xAxis");if(this.get("baseAxis")==b&&b.isType("DateAxis")){var c=b.baseDuration();b=b.getPrivate("selectionMin",b.getPrivate("min",0));c*=this.get("locationX",.5);for(var d=-Infinity;d<b;)if(d=this.dataItems[a]){const e=d.open;d=e?e.valueX:d.get("valueX",0);d+=c;if(d<b)a++;else break}else break}return a}}Object.defineProperty(K,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"});Object.defineProperty(K,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.Series.classNames.concat([K.className])});
class L extends y.Component{constructor(){super(...arguments);Object.defineProperty(this,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"minorDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.Container.new(this._root,{}))});Object.defineProperty(this,
"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:f.Container.new(this._root,{width:f.p100,height:f.p100})});Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:f.Container.new(this._root,{width:f.p100,height:f.p100})});Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.Container.new(this._root,{isMeasured:!1,width:f.p100,height:f.p100,position:"absolute"}))});Object.defineProperty(this,
"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_eAnimation",{enumerable:!0,configurable:!0,
writable:!0,value:void 0});Object.defineProperty(this,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new f.List});Object.defineProperty(this,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]});Object.defineProperty(this,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,
value:-1});Object.defineProperty(this,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_seriesAdded",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(f.Container.new(this._root,{themeTags:["axis","header"],position:"absolute",background:f.Rectangle.new(this._root,
{themeTags:["header","background"],fill:this._root.interfaceColors.get("background")})}))});Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose();this.topGridContainer.dispose();this.bulletsContainer.dispose();this.labelsContainer.dispose();this.axisHeader.dispose();super._dispose()}_afterNew(){super._afterNew();this.setPrivate("updateScrollbar",!0);this._disposers.push(this.axisRanges.events.onAll(b=>{if("clear"===b.type)f.each(b.oldValues,
c=>{this.disposeDataItem(c)});else if("push"===b.type)this._processAxisRange(b.newValue,["range"]);else if("setIndex"===b.type)this._processAxisRange(b.newValue,["range"]);else if("insertIndex"===b.type)this._processAxisRange(b.newValue,["range"]);else if("removeIndex"===b.type)this.disposeDataItem(b.oldValue);else if("moveIndex"===b.type)this._processAxisRange(b.value,["range"]);else throw Error("Unknown IStreamEvent type");}));const a=this.get("renderer");a&&(a.axis=this,a.processAxis());this.children.push(a);
this.ghostLabel=a.makeLabel(new y.DataItem(this,void 0,{}),[]);this.ghostLabel.adapters.disable("text");this.ghostLabel.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1});this.ghostLabel.events.disable()}_updateFinals(a,b){}zoom(a,b,c,d){if(this.get("zoomable",!0))if(this._updateFinals(a,b),this.get("start")!==a||this.get("end")!=b){var e=this._sAnimation;let h=this._eAnimation;var g=this.get("maxDeviation",.5)*Math.min(1,b-a);a<-g&&(a=-g);b>1+g&&(b=1+g);a>b&&([a,b]=[b,a]);f.isNumber(c)||
(c=this.get("interpolationDuration",0));d||="end";let k=g=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100));1===b&&0!==a&&(d=a<this.get("start",0)?"start":"end");0===a&&1!==b&&(d=b>this.get("end",1)?"end":"start");let l=this.get("minZoomCount",0),p=this.get("maxZoomCount",Infinity);f.isNumber(l)&&(g=k/l);let n=1;f.isNumber(p)&&(n=k/p);"start"===d?(0<p&&1/(b-a)<n&&(b=a+1/n),1/(b-a)>g&&(b=a+1/g),1<b&&b-a<1/g&&(a=b-1/g)):(0<p&&1/(b-a)<n&&(a=b-1/n),1/(b-a)>g&&(a=b-1/g),0>a&&b-a<1/g&&(b=a+
1/g));1/(b-a)>g&&(b=a+1/g);1/(b-a)>g&&(a=b-1/g);null!=p&&null!=l&&a==this.get("start")&&b==this.get("end")&&(d=this.chart)&&d._handleAxisSelection(this,!0);if(!(e&&e.playing&&e.to==a||this.get("start")==a)||!(h&&h.playing&&h.to==b||this.get("end")==b))if(0<c){e=this.get("interpolationEasing");let m,q;this.get("start")!=a&&(m=this.animate({key:"start",to:a,duration:c,easing:e}));this.get("end")!=b&&(q=this.animate({key:"end",to:b,duration:c,easing:e}));this._sAnimation=m;this._eAnimation=q;if(m)return m;
if(q)return q}else this.set("start",a),this.set("end",b)}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(a,b){a.setRaw("isRange",!0);this._createAssets(a,b);this._rangesDirty=!0;this._prepareDataItem(a);b=a.get("above");const c=this.topGridContainer,d=a.get("grid");b&&d&&c.children.moveValue(d);a=a.get("axisFill");b&&a&&c.children.moveValue(a)}_prepareDataItem(a,b){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets=
{};this.axisRanges.each(a=>{this._prepareDataItem(a)});f.each(this._seriesAxisRanges,a=>{this._prepareDataItem(a)})}_prepareChildren(){super._prepareChildren();this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1);if(this.isDirty("start")||this.isDirty("end")){var a=this.chart;a&&a._updateCursor();a=this.get("start",0);var b=this.get("end",1),c=this.get("maxDeviation",.5)*Math.min(1,b-a);if(a<-c){let d=a+c;a=-c;this.setRaw("start",a);this.isDirty("end")&&this.setRaw("end",
b-d)}b>1+c&&(b=b-1-c,this.setRaw("end",1+c),this.isDirty("start")&&this.setRaw("start",a-b))}c=this.get("renderer");c._start=this.get("start");c._end=this.get("end");c._inversed=c.get("inversed",!1);c._axisLength=c.axisLength()/(c._end-c._start);c._updateLC();this.isDirty("tooltip")&&(a=this.get("tooltip"))&&(c=c.get("themeTags"),a.addTag("axis"),a.addTag(this.className.toLowerCase()),a._applyThemes(),c&&(a.set("themeTags",f.mergeTags(a.get("themeTags"),c)),a.label._applyThemes()))}_updateTooltipBounds(){const a=
this.get("tooltip");a&&this.get("renderer").updateTooltipBounds(a)}_updateBounds(){super._updateBounds();this._updateTooltipBounds()}processChart(a){this.chart=a;this.get("renderer").chart=a;a.gridContainer.children.push(this.gridContainer);a.topGridContainer.children.push(this.topGridContainer);a.axisHeadersContainer.children.push(this.axisHeader);this.on("start",()=>{a._handleAxisSelection(this)});this.on("end",()=>{a._handleAxisSelection(this)});a.plotContainer.onPrivate("width",()=>{this.markDirtySize()});
a.plotContainer.onPrivate("height",()=>{this.markDirtySize()});a.processAxis(this)}hideDataItem(a){this._toggleFHDataItem(a,!0);return super.hideDataItem(a)}showDataItem(a){this._toggleFHDataItem(a,!1);return super.showDataItem(a)}_toggleFHDataItem(a,b){var c=a.get("label");c&&c.set("forceHidden",b);(c=a.get("grid"))&&c.set("forceHidden",b);(c=a.get("tick"))&&c.set("forceHidden",b);(c=a.get("axisFill"))&&c.set("forceHidden",b);(a=a.get("bullet"))&&(a=a.get("sprite"))&&a.set("forceHidden",b)}_toggleDataItem(a,
b){var c=a.get("label");c&&c.setPrivate("visible",b);(c=a.get("grid"))&&c.setPrivate("visible",b);(c=a.get("tick"))&&c.setPrivate("visible",b);(c=a.get("axisFill"))&&c.setPrivate("visible",b);(a=a.get("bullet"))&&(a=a.get("sprite"))&&a.setPrivate("visible",b)}_createAssets(a,b,c){var d,e,g;const h=this.get("renderer");var k=a.get("label");if(k){var l=k.get("themeTags");let p=!1;c?-1==(null===l||void 0===l?void 0:l.indexOf("minor"))&&(p=!0):-1!=(null===l||void 0===l?void 0:l.indexOf("minor"))&&(p=
!0);p&&(null===(d=k.parent)||void 0===d?void 0:d.children.removeValue(k),h.makeLabel(a,b),k.dispose(),h.labels.removeValue(k))}else h.makeLabel(a,b);(d=a.get("grid"))?(k=d.get("themeTags"),l=!1,c?-1==(null===k||void 0===k?void 0:k.indexOf("minor"))&&(l=!0):-1!=(null===k||void 0===k?void 0:k.indexOf("minor"))&&(l=!0),l&&(null===(e=d.parent)||void 0===e?void 0:e.children.removeValue(d),h.makeGrid(a,b),d.dispose(),h.grid.removeValue(d))):h.makeGrid(a,b);(e=a.get("tick"))?(d=!1,k=e.get("themeTags"),c?
-1==(null===k||void 0===k?void 0:k.indexOf("minor"))&&(d=!0):-1!=(null===k||void 0===k?void 0:k.indexOf("minor"))&&(d=!0),d&&(null===(g=e.parent)||void 0===g?void 0:g.children.removeValue(e),h.makeTick(a,b),e.dispose(),h.ticks.removeValue(e))):h.makeTick(a,b);c||a.get("axisFill")||h.makeAxisFill(a,b);this._processBullet(a)}_processBullet(a){let b=a.get("bullet");var c=this.get("bullet");b||!c||a.get("isRange")||(b=c(this._root,this,a));b&&(b.axis=this,c=b.get("sprite"))&&(c._setDataItem(a),a.setRaw("bullet",
b),c.parent||this.bulletsContainer.children.push(c))}_afterChanged(){super._afterChanged();const a=this.chart;a&&(a._updateChartLayout(),a.axisHeadersContainer.markDirtySize());this.get("renderer")._updatePositions();this._seriesAdded=!1}disposeDataItem(a){super.disposeDataItem(a);const b=this.get("renderer");var c=a.get("label");c&&(b.labels.removeValue(c),c.dispose());if(c=a.get("tick"))b.ticks.removeValue(c),c.dispose();if(c=a.get("grid"))b.grid.removeValue(c),c.dispose();if(c=a.get("axisFill"))b.axisFills.removeValue(c),
c.dispose();(a=a.get("bullet"))&&a.dispose()}_updateGhost(){this.setPrivate("cellWidth",this.getCellWidthPosition()*this.get("renderer").axisLength());const a=this.ghostLabel;if(!a.isHidden()){var b=a.localBounds();const d=Math.ceil(b.right-b.left);let e=a.get("text");f.each(this.dataItems,g=>{if((g=g.get("label"))&&!g.isHidden()){const h=g.localBounds();Math.ceil(h.right-h.left)>d&&(e=g.text._getText())}});a.set("text",e)}b=this.get("start",0);let c=this.get("end",1);this.get("renderer").updateLabel(a,
b+.5*(c-b))}_handleCursorPosition(a,b){this._cursorPosition=a=this.get("renderer").toAxisPosition(a);this._snapToSeries=b;this.updateTooltip()}updateTooltip(){const a=this._snapToSeries;let b=this._cursorPosition;const c=this.get("tooltip"),d=this.get("renderer");f.isNumber(b)&&(f.each(this.series,e=>{if(e.get("baseAxis")===this){const g=this.getSeriesItem(e,b,this.get("tooltipLocation"));a&&-1!=a.indexOf(e)?(e.updateLegendMarker(g),e.updateLegendValue(g),e._settings.tooltipDataItem=g):(e.showDataItemTooltip(g),
e.setRaw("tooltipDataItem",g))}}),this.get("snapTooltip")&&(b=this.roundAxisPosition(b,this.get("tooltipLocation",.5))),this.setPrivateRaw("tooltipPosition",b),c&&(d.updateTooltipBounds(c),f.isNaN(b)?c.hide(0):(this._updateTooltipText(c,b),d.positionTooltip(c,b),b<this.get("start",0)||b>this.get("end",1)?c.hide(0):c.show(0))))}_updateTooltipText(a,b){a.label.set("text",this.getTooltipText(b))}roundAxisPosition(a,b){return a}handleCursorShow(){let a=this.get("tooltip");a&&a.show()}handleCursorHide(){let a=
this.get("tooltip");a&&a.hide()}processSeriesDataItem(a,b){}_clearDirty(){super._clearDirty();this._rangesDirty=this._sizeDirty=!1}coordinateToPosition(a){const b=this.get("renderer");return b.toAxisPosition(a/b.axisLength())}toAxisPosition(a){return this.get("renderer").toAxisPosition(a)}toGlobalPosition(a){return this.get("renderer").toGlobalPosition(a)}fixPosition(a){return this.get("renderer").fixPosition(a)}shouldGap(a,b,c,d){return!1}createAxisRange(a){return this.axisRanges.push(a)}_groupSeriesData(a){}getCellWidthPosition(){return.05}}
Object.defineProperty(L,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"});Object.defineProperty(L,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.Component.classNames.concat([L.className])});class Q extends L{constructor(){super(...arguments);Object.defineProperty(this,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,
"_dseHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_minRealLog",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_baseValue",{enumerable:!0,
configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0;this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0;this.markDirty()}_afterNew(){this._settings.themeTags=f.mergeTags(this._settings.themeTags,["axis"]);this.setPrivateRaw("name","value");this.addTag("value");
super._afterNew()}_prepareChildren(){super._prepareChildren();if(this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();var a=this.get("syncWithAxis");a&&(this._syncDp=new f.MultiDisposer([a.onPrivate("selectionMinFinal",()=>{this._dirtySelectionExtremes=!0}),a.onPrivate("selectionMaxFinal",()=>{this._dirtySelectionExtremes=!0})]))}a=!1;if(this.isDirty("min")||this.isDirty("max")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))a=!0,this.ghostLabel.set("text",
"");if(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||a||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection"))this._getMinMax(),this._dirtyExtremes=!1;this._handleSizeDirty();if(this._dirtySelectionExtremes&&!this._isPanning&&this.get("autoZoom",!0)){a=this.chart;let b=!1;if(a){const c=
this.get("renderer").getPrivate("letter");"Y"==c?a.xAxes.each(d=>{"ValueAxis"!=d.className&&(b=!0)}):"X"==c&&a.yAxes.each(d=>{"ValueAxis"!=d.className&&(b=!0)})}b&&this._getSelectionMinMax();this._dirtySelectionExtremes=!1}this._groupData();if(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||
this.isPrivateDirty("height")||this.isDirty("logarithmic"))this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges();this._baseValue=this.baseValue()}_handleSizeDirty(){this._sizeDirty&&!this._dseHandled&&(this._dseHandled=this._dirtySelectionExtremes=!0)}_clearDirty(){super._clearDirty();this._dseHandled=!1}_groupData(){}_formatText(a){const b=this.get("numberFormat"),c=this.getNumberFormatter();let d="";return d=b?c.format(a,b):c.format(a,void 0,this.getPrivate("stepDecimalPlaces"))}_prepareAxisItems(){var a=
this.getPrivate("min"),b=this.getPrivate("max");if(f.isNumber(a)&&f.isNumber(b)){b=this.get("logarithmic");const n=this.getPrivate("step");var c=this.getPrivate("selectionMin");const m=this.getPrivate("selectionMax")+n;var d=c-n;let q=1;if(b){d=this._minLogAdjusted;if(d<c)for(;d<c;)d+=n;a=d;0>=a&&(a=1,1>n&&(a=f.isNumber(this._minRealLog)?this._minRealLog:Math.pow(10,-50)));q=Math.log(m-n)*Math.LOG10E-Math.log(a)*Math.LOG10E;2<q&&(d=Math.pow(10,Math.log(a)*Math.LOG10E-50))}var e=this.get("renderer");
c=e.get("minorLabelsEnabled");e=e.get("minorGridEnabled",c);var g=Math.round(n/Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E))),h=2;0==f.round(g/5,10)%1&&(h=5);0==f.round(g/10,10)%1&&(h=10);h=n/h;let r=0;g=0;for(var k=-Infinity;d<m;){var l=void 0;this.dataItems.length<r+1?(l=new y.DataItem(this,void 0,{}),this._dataItems.push(l),this.processDataItem(l)):l=this.dataItems[r];this._createAssets(l,[]);this._toggleDataItem(l,!0);l.setRaw("value",d);var p=l.get("label");p&&p.set("text",this._formatText(d));
this._prepareDataItem(l);l=d;l=b?2<q?Math.pow(10,Math.log(a)*Math.LOG10E+r-50):l+n:l+n;if(e)for(p=d+h,b&&(2<q&&(h=this._adjustMinMax(d,l,10).step),p=d+h);p<l-1E-11*n;){this.minorDataItems.length<g+1?(d=new y.DataItem(this,void 0,{}),this.minorDataItems.push(d),this.processDataItem(d)):d=this.minorDataItems[g];this._createAssets(d,["minor"],!0);this._toggleDataItem(d,!0);d.setRaw("value",p);const t=d.get("label");t&&(c?t.set("text",this._formatText(p)):t.setPrivate("visible",!1));this._prepareDataItem(d);
p+=h;g++}d=l;if(k==d)break;k=Math.pow(10,Math.floor(Math.log(Math.abs(n))*Math.LOG10E));1>k&&!b&&(d=f.round(d,Math.round(Math.abs(Math.log(Math.abs(k))*Math.LOG10E))+2));r++;k=d}for(b=r;b<this.dataItems.length;b++)this._toggleDataItem(this.dataItems[b],!1);for(b=g;b<this.minorDataItems.length;b++)this._toggleDataItem(this.minorDataItems[b],!1);f.each(this.series,t=>{t.inited&&t._markDirtyAxes()});this._updateGhost()}}_prepareDataItem(a,b){let c=this.get("renderer"),d=a.get("value");var e=a.get("endValue");
let g=this.valueToPosition(d),h=g,k=this.valueToPosition(d+this.getPrivate("step"));f.isNumber(e)&&(k=h=this.valueToPosition(e));a.get("isRange")&&null==e&&(k=g);e=h;var l=a.get("labelEndValue");null!=l&&(e=this.valueToPosition(l));c.updateLabel(a.get("label"),g,e,b);l=a.get("grid");c.updateGrid(l,g,h);l&&(d==this.get("baseValue",0)?(l.addTag("base"),l._applyThemes()):l.hasTag("base")&&(l.removeTag("base"),l._applyThemes()));c.updateTick(a.get("tick"),g,e,b);c.updateFill(a.get("axisFill"),g,k);this._processBullet(a);
c.updateBullet(a.get("bullet"),g,h);a.get("isRange")||(b=this.get("fillRule"))&&b(a)}_handleRangeChange(){let a=this.positionToValue(this.get("start",0)),b=this.positionToValue(this.get("end",1));var c=this.get("renderer").gridCount(),d=this._adjustMinMax(a,b,c,!0);d=f.decimalPlaces(d.step);this.setPrivateRaw("stepDecimalPlaces",d);a=f.round(a,d);b=f.round(b,d);d=this._adjustMinMax(a,b,c,!0);c=d.step;a=d.min;b=d.max;if(this.getPrivate("selectionMin")!==a||this.getPrivate("selectionMax")!==b||this.getPrivate("step")!==
c)this.setPrivateRaw("selectionMin",a),this.setPrivateRaw("selectionMax",b),this.setPrivateRaw("step",c)}positionToValue(a){const b=this.getPrivate("min"),c=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(a*(Math.log(c)*Math.LOG10E-Math.log(b)*Math.LOG10E)+Math.log(b)*Math.LOG10E)/Math.LOG10E):a*(c-b)+b}valueToPosition(a){const b=this.getPrivate("min"),c=this.getPrivate("max");if(this.get("logarithmic")){if(0>=a){let d=this.get("treatZeroAs");f.isNumber(d)&&(a=d)}return(Math.log(a)*
Math.LOG10E-Math.log(b)*Math.LOG10E)/(Math.log(c)*Math.LOG10E-Math.log(b)*Math.LOG10E)}return(a-b)/(c-b)}valueToFinalPosition(a){const b=this.getPrivate("minFinal"),c=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(0>=a){let d=this.get("treatZeroAs");f.isNumber(d)&&(a=d)}return(Math.log(a)*Math.LOG10E-Math.log(b)*Math.LOG10E)/(Math.log(c)*Math.LOG10E-Math.log(b)*Math.LOG10E)}return(a-b)/(c-b)}getX(a,b,c){a=this.valueToPosition(c+(a-c)*b);return this._settings.renderer.positionToCoordinate(a)}getY(a,
b,c){a=this.valueToPosition(c+(a-c)*b);return this._settings.renderer.positionToCoordinate(a)}getDataItemCoordinateX(a,b,c,d){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(a,b,c,d))}getDataItemPositionX(a,b,c,d){c=a.get(b);c=a.get("stackToItemX")?c*d+a.component.getStackedXValueWorking(a,b):this._baseValue+(c-this._baseValue)*d;return this.valueToPosition(c)}getDataItemCoordinateY(a,b,c,d){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(a,
b,c,d))}getDataItemPositionY(a,b,c,d){c=a.get(b);c=a.get("stackToItemY")?c*d+a.component.getStackedYValueWorking(a,b):this._baseValue+(c-this._baseValue)*d;return this.valueToPosition(c)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){const a=Math.min(this.getPrivate("minFinal",-Infinity),this.getPrivate("selectionMin",-Infinity)),b=Math.max(this.getPrivate("maxFinal",Infinity),this.getPrivate("selectionMax",Infinity));let c=this.get("baseValue",0);c<a&&(c=a);c>b&&(c=b);return c}cellEndValue(a){return a}fixSmallStep(a){return 1===
1+a?this.fixSmallStep(2*a):a}_fixMin(a){return a}_fixMax(a){return a}_calculateTotals(){if(this.get("calculateTotals")){let a=this.series[0];if(a){let b=a.startIndex();if(0<a.dataItems.length){0<b&&b--;let c=a.endIndex();c<a.dataItems.length&&c++;let d,e;a.get("yAxis")==this?(d="valueY",e="vcy"):a.get("xAxis")==this&&(d="valueX",e="vcx");let g=d+"Working";if(d)for(let h=b;h<c;h++){let k=0,l=0;f.each(this.series,p=>{if(!p.get("excludeFromTotal")){let n=p.dataItems[h];n&&(p=n.get(g)*p.get(e),f.isNaN(p)||
(k+=p,l+=Math.abs(p)))}});f.each(this.series,p=>{if(!p.get("excludeFromTotal")){let n=p.dataItems[h];n&&(p=n.get(g)*p.get(e),f.isNaN(p)||(n.set(d+"Total",l),n.set(d+"Sum",k),n.set(d+"TotalPercent",p/l*100)))}})}}}}}_getSelectionMinMax(){var a=this.getPrivate("minFinal"),b=this.getPrivate("maxFinal"),c=this.get("min");const d=this.get("max");let e=this.get("extraMin",0),g=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(e=.1),null==this.get("extraMax")&&(g=.2));var h=this.get("renderer").gridCount();
const k=this.get("strictMinMaxSelection");var l=this.get("strictMinMax");if(f.isNumber(a)&&f.isNumber(b)){let n=b,m=a;f.each(this.series,t=>{if(!t.get("ignoreMinMax")){const w=t.getPrivate("outOfSelection");if(t.get("xAxis")===this){if(!w){var v=t.getPrivate("minX");var u=t.getPrivate("maxX");if(0!=t.startIndex()||t.endIndex()!=t.dataItems.length)u=v=void 0;v=t.getPrivate("selectionMinX",v);u=t.getPrivate("selectionMaxX",u)}}else if(t.get("yAxis")===this&&!w){v=t.getPrivate("minY");u=t.getPrivate("maxY");
if(0!=t.startIndex()||t.endIndex()!=t.dataItems.length)u=v=void 0;v=t.getPrivate("selectionMinY",v);u=t.getPrivate("selectionMaxY",u)}t.isHidden()||t.isShowing()||(f.isNumber(v)&&(n=Math.min(n,v)),f.isNumber(u)&&(m=Math.max(m,u)))}});this.axisRanges.each(t=>{if(t.get("affectsMinMax")){let v=t.get("value");null!=v&&(n=Math.min(n,v),m=Math.max(m,v));v=t.get("endValue");null!=v&&(n=Math.min(n,v),m=Math.max(m,v))}});n>m&&([n,m]=[m,n]);f.isNumber(c)?n=l?c:a:l&&f.isNumber(this._minReal)&&(n=this._minReal);
f.isNumber(d)?m=l?d:b:l&&f.isNumber(this._maxReal)&&(m=this._maxReal);if(n===m){var p=n;n-=this._deltaMinMax;m+=this._deltaMinMax;n<a&&(l=p-a,0==l&&(l=this._deltaMinMax),n=p-l,m=p+l,l=!0);p=this._adjustMinMax(n,m,h,l);n=p.min;m=p.max}let q=n,r=m;p=m-n;n-=p*e;m+=p*g;p=this._adjustMinMax(n,m,h);n=p.min;m=p.max;n=f.fitToRange(n,a,b);m=f.fitToRange(m,a,b);p=this._adjustMinMax(n,m,h,!0);l||(n=p.min,m=p.max);if(h=this.get("syncWithAxis"))p=this._syncAxes(n,m,p.step,h.getPrivate("selectionMinFinal",h.getPrivate("minFinal",
0)),h.getPrivate("selectionMaxFinal",h.getPrivate("maxFinal",1)),h.getPrivate("selectionStepFinal",h.getPrivate("step",1))),p.min<a&&(p.min=a),p.max>b&&(p.max=b),n=p.min,m=p.max;l&&(f.isNumber(c)&&(n=Math.max(n,c)),f.isNumber(d)&&(m=Math.min(m,d)));k&&(n=q-(r-q)*e,m=r+(r-q)*g);l&&(n=f.isNumber(c)?c:q,m=f.isNumber(d)?d:r,1E-8>=m-n&&(n-=this._deltaMinMax,m+=this._deltaMinMax),c=m-n,n-=c*e,m+=c*g);this.get("logarithmic")&&(0>=n&&(n=q*(1-Math.min(e,.99))),n<a&&(n=a),m>b&&(m=b));b=Math.min(20,Math.ceil(Math.log(this.getPrivate("maxZoomFactor",
100)+1)/Math.LN10)+2);a=f.round(this.valueToFinalPosition(n),b);b=f.round(this.valueToFinalPosition(m),b);this.setPrivateRaw("selectionMinFinal",n);this.setPrivateRaw("selectionMaxFinal",m);this.setPrivateRaw("selectionStepFinal",p.step);this.zoom(a,b)}}_getMinMax(){var a=this.get("min");let b=this.get("max"),c=Infinity,d=-Infinity;var e=this.get("extraMin",0),g=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(e=.1),null==this.get("extraMax")&&(g=.2));let h=Infinity;f.each(this.series,
m=>{if(!m.get("ignoreMinMax")){let q,r;m.get("xAxis")===this?(q=m.getPrivate("minX"),r=m.getPrivate("maxX")):m.get("yAxis")===this&&(q=m.getPrivate("minY"),r=m.getPrivate("maxY"));f.isNumber(q)&&f.isNumber(r)&&(c=Math.min(c,q),d=Math.max(d,r),m=r-q,0>=m&&(m=Math.abs(r/100)),m<h&&(h=m))}});this.axisRanges.each(m=>{if(m.get("affectsMinMax")){let q=m.get("value");null!=q&&(c=Math.min(c,q),d=Math.max(d,q));q=m.get("endValue");null!=q&&(c=Math.min(c,q),d=Math.max(d,q))}});if(this.get("logarithmic")){var k=
this.get("treatZeroAs");f.isNumber(k)&&0>=c&&(c=k)}0===c&&0===d&&(d=.9,c=-.9);f.isNumber(a)&&(c=a);f.isNumber(b)&&(d=b);if(Infinity===c||-Infinity===d)this.setPrivate("minFinal",void 0),this.setPrivate("maxFinal",void 0);else{c>d&&([c,d]=[d,c]);k=c;var l=d,p=this.adapters.fold("min",c),n=this.adapters.fold("max",d);this._minRealLog=c;f.isNumber(p)&&(c=p);f.isNumber(n)&&(d=n);c=this._fixMin(c);d=this._fixMax(d);d-c<=1/Math.pow(10,15)&&(0!==d-c?this._deltaMinMax=(d-c)/2:this._getDelta(d),c-=this._deltaMinMax,
d+=this._deltaMinMax);c-=(d-c)*e;d+=(d-c)*g;this.get("logarithmic")&&(0>c&&0<=k&&(c=0),0<d&&0>=l&&(d=0));this._minReal=c;this._maxReal=d;p=this.get("strictMinMax");(l=this.get("strictMinMaxSelection",!1))&&(p=l);l=p;f.isNumber(b)&&(l=!0);n=this.get("renderer").gridCount();l=this._adjustMinMax(c,d,n,l);c=l.min;d=l.max;l=this._adjustMinMax(c,d,n,!0);c=l.min;d=l.max;p&&(c=f.isNumber(a)?a:this._minReal,d=f.isNumber(b)?b:this._maxReal,1E-8>=d-c&&(c-=this._deltaMinMax,d+=this._deltaMinMax),a=d-c,c-=a*e,
d+=a*g);p=this.adapters.fold("min",c);n=this.adapters.fold("max",d);f.isNumber(p)&&(c=p);f.isNumber(n)&&(d=n);Infinity==h&&(h=d-c);g=Math.round(Math.abs(Math.log(Math.abs(d-c))*Math.LOG10E))+5;c=f.round(c,g);d=f.round(d,g);if(g=this.get("syncWithAxis"))l=this._syncAxes(c,d,l.step,g.getPrivate("minFinal",g.getPrivate("min",0)),g.getPrivate("maxFinal",g.getPrivate("max",1)),g.getPrivate("step",1)),c=l.min,d=l.max;this.setPrivateRaw("maxZoomFactor",Math.max(1,Math.ceil((d-c)/h*this.get("maxZoomFactor",
100))));this._fixZoomFactor();this.get("logarithmic")&&(this._minLogAdjusted=c,c=this._minReal,d=this._maxReal,0>=c&&(c=k*(1-Math.min(e,.99))));f.isNumber(c)&&f.isNumber(d)&&(this.getPrivate("minFinal")!==c||this.getPrivate("maxFinal")!==d)&&(this.setPrivate("minFinal",c),this.setPrivate("maxFinal",d),this._saveMinMax(c,d),e=this.get("interpolationDuration",0),k=this.get("interpolationEasing"),this.animatePrivate({key:"min",to:c,duration:e,easing:k}),this.animatePrivate({key:"max",to:d,duration:e,
easing:k}))}}_fixZoomFactor(){}_getDelta(a){this._deltaMinMax=Math.pow(10,Math.floor(Math.log(Math.abs(a))*Math.LOG10E))/10}_saveMinMax(a,b){}_adjustMinMax(a,b,c,d){1>=c&&(c=1);c=Math.round(c);let e=a,g=b;var h=b-a;0===h&&(h=Math.abs(b));var k=Math.log(Math.abs(h))*Math.LOG10E;k=Math.pow(10,Math.floor(k));var l=k/=10;d&&(l=0);d?(a=Math.floor(a/k)*k,b=Math.ceil(b/k)*k):(a=Math.ceil(a/k)*k-l,b=Math.floor(b/k)*k+l);0>a&&0<=e&&(a=0);0<b&&0>=g&&(b=0);k=Math.log(Math.abs(h))*Math.LOG10E;k=Math.pow(10,Math.floor(k));
k/=100;c=Math.ceil(h/c/k)*k;h=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E));k=Math.ceil(c/h);5<k?k=10:5>=k&&2<k&&(k=5);c=Math.ceil(c/(h*k))*h*k;k=this.get("maxPrecision");f.isNumber(k)&&(l=f.ceil(c,k),k<Number.MAX_VALUE&&c!==l&&(c=l,0==c&&(c=1)));k=0;1>h&&(k=Math.round(Math.abs(Math.log(Math.abs(h))*Math.LOG10E))+1,c=f.round(c,k));h=Math.floor(a/c);a=f.round(c*h,k);b=d?Math.floor(b/c):Math.ceil(b/c);b===h&&b++;b=f.round(c*b,k);b<g&&(b+=c);a>e&&(a-=c);c=this.fixSmallStep(c);return{min:a,
max:b,step:c}}getTooltipText(a,b){b=this.get("tooltipNumberFormat",this.get("numberFormat"));const c=this.getNumberFormatter();var d=this.get("extraTooltipPrecision",0);d=this.getPrivate("stepDecimalPlaces",0)+d;a=f.round(this.positionToValue(a),d);return b?c.format(a,b):c.format(a,void 0,d)}getSeriesItem(a,b){let c=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),d=this.positionToValue(b),e=void 0,g;f.each(a.dataItems,(h,k)=>{h=Math.abs(h.get(c)-d);if(void 0===e||h<g)e=k,g=h});if(null!=
e)return a.dataItems[e]}zoomToValues(a,b,c){const d=this.getPrivate("minFinal",0),e=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((a-d)/(e-d),(b-d)/(e-d),c)}_syncAxes(a,b,c,d,e,g){if(this.get("syncWithAxis")&&(d=Math.round(e-d)/g,g=Math.round((b-a)/c),e=this.get("renderer").gridCount(),f.isNumber(d)&&f.isNumber(g))){g=!1;let k=0,l=.01*(b-a),p=a,n=b;for(var h=c;1!=g;)g=this._checkSync(p,n,h,d),k++,500<k&&(g=!0),g?(a=p,b=n,c=h):(k/3==Math.round(k/
3)?(p=a-l*k,0<=a&&0>p&&(p=0)):(n=b+l*k,0>=n&&0<n&&(n=0)),h=this._adjustMinMax(p,n,e,!0),p=h.min,n=h.max,h=h.step)}return{min:a,max:b,step:c}}_checkSync(a,b,c,d){a=(b-a)/c;for(b=1;b<d;b++)if(f.round(a/b,1)==d||a*b==d)return!0;return!1}getCellWidthPosition(){let a=this.getPrivate("selectionMax",this.getPrivate("max")),b=this.getPrivate("selectionMin",this.getPrivate("min"));return f.isNumber(a)&&f.isNumber(b)?this.getPrivate("step",1)/(a-b):.05}nextPosition(a){null==a&&(a=1);"Y"==this.get("renderer").getPrivate("letter")&&
(a*=-1);let b=this.positionToValue(this.getPrivate("tooltipPosition",0));b+=this.getPrivate("step",1)*a;b=f.fitToRange(b,this.getPrivate("selectionMin",0),this.getPrivate("selectionMax",1));return this.toGlobalPosition(this.valueToPosition(b))}}Object.defineProperty(Q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"});Object.defineProperty(Q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:L.classNames.concat([Q.className])});class R extends f.Label{constructor(){super(...arguments);
Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(R,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"});Object.defineProperty(R,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:f.Label.classNames.concat([R.className])});class S extends y.Tick{constructor(){super(...arguments);Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(S,
"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"});Object.defineProperty(S,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:y.Tick.classNames.concat([S.className])});class I extends f.Graphics{constructor(){super(...arguments);Object.defineProperty(this,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100});Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,
writable:!0,value:1});Object.defineProperty(this,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1});Object.defineProperty(this,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1});Object.defineProperty(this,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_thumbDownPoint",
{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>S._new(this._root,{themeTags:f.mergeTags(this.ticks.template.get("themeTags",[]),this.get("themeTags",[]))},
[this.ticks.template])))});Object.defineProperty(this,"grid",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>J._new(this._root,{themeTags:f.mergeTags(this.grid.template.get("themeTags",[]),this.get("themeTags",[]))},[this.grid.template])))});Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>f.Graphics._new(this._root,{themeTags:f.mergeTags(this.axisFills.template.get("themeTags",
["axis","fill"]),this.get("themeTags",[]))},[this.axisFills.template])))});Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>R._new(this._root,{themeTags:f.mergeTags(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template])))});Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,
writable:!0,value:void 0})}makeTick(a,b){const c=this.ticks.make();c._setDataItem(a);a.setRaw("tick",c);c.set("themeTags",f.mergeTags(c.get("themeTags"),b));this.axis.labelsContainer.children.push(c);this.ticks.push(c);return c}makeGrid(a,b){const c=this.grid.make();c._setDataItem(a);a.setRaw("grid",c);c.set("themeTags",f.mergeTags(c.get("themeTags"),b));this.axis.gridContainer.children.push(c);this.grid.push(c);return c}makeAxisFill(a,b){const c=this.axisFills.make();c._setDataItem(a);c.set("themeTags",
f.mergeTags(c.get("themeTags"),b));this.axis.gridContainer.children.push(c);a.setRaw("axisFill",c);this.axisFills.push(c);return c}makeLabel(a,b){const c=this.labels.make();c.set("themeTags",f.mergeTags(c.get("themeTags"),b));this.axis.labelsContainer.children.moveValue(c,0);c._setDataItem(a);a.setRaw("label",c);this.labels.push(c);return c}axisLength(){return 0}gridCount(){return this.axisLength()/this.get("minGridDistance",50)}_updatePositions(){}_afterNew(){super._afterNew();this.set("isMeasured",
!1);const a=this.thumb;a&&(this._disposers.push(a.events.on("pointerdown",b=>{this._handleThumbDown(b)})),this._disposers.push(a.events.on("globalpointerup",b=>{this._handleThumbUp(b)})),this._disposers.push(a.events.on("globalpointermove",b=>{this._handleThumbMove(b)})))}_beforeChanged(){super._beforeChanged();if(this.isDirty("minGridDistance"))this.root.events.once("frameended",()=>{this.axis.markDirtySize()})}_changed(){super._changed();if(this.isDirty("pan")){const a=this.thumb;if(a){const b=
this.axis.labelsContainer,c=this.get("pan");"zoom"==c?b.children.push(a):"none"==c&&b.children.removeValue(a)}}}_handleThumbDown(a){this._thumbDownPoint=this.toLocal(a.point);a=this.axis;this._downStart=a.get("start");this._downEnd=a.get("end")}_handleThumbUp(a){this._thumbDownPoint=void 0}_handleThumbMove(a){var b=this._thumbDownPoint;if(b){const c=this.toLocal(a.point);a=this._downStart;const d=this._downEnd;b=this._getPan(c,b)*Math.min(1,d-a)/2*this.get("panSensitivity",1);this.axis.zoom(a-b,d+
b,0)}}_getPan(a,b){return 0}positionToCoordinate(a){return this._inversed?(this._end-a)*this._axisLength:(a-this._start)*this._axisLength}updateTooltipBounds(a){}_updateSize(){this.markDirty();this._clear=!0}toAxisPosition(a){const b=this._start||0,c=this._end||1;a*=c-b;return a=this.get("inversed")?c-a:b+a}toGlobalPosition(a){const b=this._start||0,c=this._end||1;a=this.get("inversed")?c-a:a-b;return a/=c-b}fixPosition(a){return this.get("inversed")?1-a:a}_updateLC(){}toggleVisibility(a,b,c,d){var e=
this.axis;const g=e.get("start",0);e=e.get("end",1);b<g+(e-g)*(c-1E-4)||b>g+(e-g)*(d+1E-4)?a.setPrivate("visible",!1):a.setPrivate("visible",!0)}_positionTooltip(a,b){const c=this.chart;c&&(a.set("pointTo",this._display.toGlobal(b)),c.inPlot(b)||a.hide())}processAxis(){}}Object.defineProperty(I,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"});Object.defineProperty(I,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:f.Graphics.classNames.concat([I.className])});
class T extends I{constructor(){super(...arguments);Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:f.Rectangle.new(this._root,{width:f.p100,isMeasured:!1,themeTags:["axis","x","thumb"]})})}_afterNew(){this._settings.themeTags=f.mergeTags(this._settings.themeTags,["renderer","x"]);super._afterNew();this.setPrivateRaw("letter","X");const a=this.grid.template;a.set("height",f.p100);a.set("width",0);a.set("draw",(b,c)=>{b.moveTo(0,0);b.lineTo(0,c.height())});this.set("draw",
(b,c)=>{b.moveTo(0,0);b.lineTo(c.width(),0)})}_changed(){super._changed();const a=this.axis;a.ghostLabel.setPrivate("visible",!this.get("inside"));a.ghostLabel.set("x",-1E3);if(this.isDirty("opposite")||this.isDirty("inside")){var b=this.chart;const c=a.children;this.get("inside")?a.addTag("inside"):a.removeTag("inside");b&&(this.get("opposite")?(b=b.topAxesContainer.children,-1==b.indexOf(a)&&b.insertIndex(0,a),a.addTag("opposite"),c.moveValue(this)):(b=b.bottomAxesContainer.children,-1==b.indexOf(a)&&
b.moveValue(a),a.removeTag("opposite"),c.moveValue(this,0)),a.ghostLabel._applyThemes(),this.labels.each(d=>{d._applyThemes()}),this.root._markDirtyRedraw());a.markDirtySize()}this.thumb.setPrivate("height",a.labelsContainer.height())}_getPan(a,b){return(b.x-a.x)/this.width()}toAxisPosition(a){const b=this._start||0,c=this._end||1;a-=this._ls;a=a*(c-b)/this._lc;return a=this.get("inversed")?c-a:b+a}toGlobalPosition(a){const b=this._start||0,c=this._end||1;a=this.get("inversed")?c-a:a-b;a=a/(c-b)*
this._lc;return a+=this._ls}_updateLC(){const a=this.axis,b=a.parent;if(b){const c=b.innerWidth();this._lc=this.axisLength()/c;this._ls=(a.x()-b.get("paddingLeft",0))/c}}_updatePositions(){const a=this.axis;var b=a.x()-f.relativeToValue(a.get("centerX",0),a.width())-a.parent.get("paddingLeft",0);a.gridContainer.set("x",b);a.topGridContainer.set("x",b);a.bulletsContainer.set("y",this.y());if(b=a.chart){b=b.plotContainer;const c=a.axisHeader;let d=a.get("marginLeft",0),e=a.x()-d;const g=a.parent;g&&
(e-=g.get("paddingLeft",0));0<c.children.length?(d=a.axisHeader.width(),a.set("marginLeft",d+1)):c.set("width",d);c.setAll({x:e,y:-1,height:b.height()+2})}}processAxis(){super.processAxis();const a=this.axis;null==a.get("width")&&a.set("width",f.p100);const b=this._root.verticalLayout;a.set("layout",b);a.labelsContainer.set("width",f.p100);a.axisHeader.setAll({layout:b})}axisLength(){return this.axis.width()}positionToPoint(a){return{x:this.positionToCoordinate(a),y:0}}updateTick(a,b,c,d){if(a){f.isNumber(b)||
(b=0);let e=.5;e=f.isNumber(d)&&1<d?a.get("multiLocation",e):a.get("location",e);f.isNumber(c)&&c!=b&&(b+=(c-b)*e);a.set("x",this.positionToCoordinate(b));let g=a.get("length",0);c=a.get("inside",this.get("inside",!1));this.get("opposite")?(a.set("y",f.p100),c||(g*=-1)):(a.set("y",0),c&&(g*=-1));a.set("draw",h=>{h.moveTo(0,0);h.lineTo(0,g)});this.toggleVisibility(a,b,a.get("minPosition",0),a.get("maxPosition",1))}}updateLabel(a,b,c,d){if(a){let e=.5;e=f.isNumber(d)&&1<d?a.get("multiLocation",e):a.get("location",
e);f.isNumber(b)||(b=0);d=a.get("inside",this.get("inside",!1));this.get("opposite")?d?(a.set("position","absolute"),a.set("y",0)):(a.set("position","relative"),a.set("y",f.p100)):d?(a.set("y",0),a.set("position","absolute")):(a.set("y",void 0),a.set("position","relative"));f.isNumber(c)&&c!=b&&(b+=(c-b)*e);a.set("x",this.positionToCoordinate(b));this.toggleVisibility(a,b,a.get("minPosition",0),a.get("maxPosition",1))}}updateGrid(a,b,c){if(a){f.isNumber(b)||(b=0);let d=a.get("location",.5);f.isNumber(c)&&
c!=b&&(b+=(c-b)*d);a.set("x",this.positionToCoordinate(b));this.toggleVisibility(a,b,0,1)}}updateBullet(a,b,c){if(a){const g=a.get("sprite");if(g){f.isNumber(b)||(b=0);var d=a.get("location",.5);f.isNumber(c)&&c!=b&&(b+=(c-b)*d);c=this.axis.roundAxisPosition(b,d);var e=this.axis._bullets[c];d=-1;this.get("opposite")&&(d=1);a.get("stacked")&&(e?(e=e.get("sprite"))&&g.set("y",e.y()+e.height()*d):g.set("y",0));this.axis._bullets[c]=a;g.set("x",this.positionToCoordinate(b));this.toggleVisibility(g,b,
0,1)}}}updateFill(a,b,c){a&&(f.isNumber(b)||(b=0),f.isNumber(c)||(c=1),b=this.positionToCoordinate(b),c=this.positionToCoordinate(c),this.fillDrawMethod(a,b,c))}fillDrawMethod(a,b,c){a.set("draw",d=>{const e=this.axis.gridContainer.height(),g=this.width();c<b&&([c,b]=[b,c]);b>g||0>c||(d.moveTo(b,0),d.lineTo(c,0),d.lineTo(c,e),d.lineTo(b,e),d.lineTo(b,0))})}positionTooltip(a,b){this._positionTooltip(a,{x:this.positionToCoordinate(b),y:0})}updateTooltipBounds(a){var b=this.get("inside"),c=this._display.toGlobal({x:0,
y:0});let d=c.x,e=0,g=this.axisLength(),h="up";this.get("opposite")?b?(h="up",e=c.y):(h="down",e=c.y-1E5):b?(h="down",e=c.y-1E5):(h="up",e=c.y);b={left:d,right:d+g,top:e,bottom:e+1E5};c=a.get("bounds");f.sameBounds(b,c)||(a.set("bounds",b),a.set("pointerOrientation",h))}}Object.defineProperty(T,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"});Object.defineProperty(T,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:I.classNames.concat([T.className])});class U extends I{constructor(){super(...arguments);
Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:f.Rectangle.new(this._root,{height:f.p100,isMeasured:!1,themeTags:["axis","y","thumb"]})})}_afterNew(){this._settings.themeTags=f.mergeTags(this._settings.themeTags,["renderer","y"]);this._settings.opposite&&this._settings.themeTags.push("opposite");super._afterNew();this.setPrivateRaw("letter","Y");const a=this.grid.template;
a.set("width",f.p100);a.set("height",0);a.set("draw",(b,c)=>{b.moveTo(0,0);b.lineTo(c.width(),0)});this.set("draw",(b,c)=>{b.moveTo(0,0);b.lineTo(0,c.height())})}_getPan(a,b){return(a.y-b.y)/this.height()}_changed(){super._changed();var a=this.axis;a.ghostLabel.setPrivate("visible",!this.get("inside"));a.ghostLabel.set("y",-1E3);const b=this.thumb,c=this.chart;if(this.isDirty("opposite")||this.isDirty("inside")){const e=a.children;this.get("inside")?a.addTag("inside"):a.removeTag("inside");if(c){if(this.get("opposite")){var d=
c.rightAxesContainer.children;-1==d.indexOf(a)&&d.moveValue(a,0);a.addTag("opposite");e.moveValue(this,0)}else d=c.leftAxesContainer.children,-1==d.indexOf(a)&&d.moveValue(a),a.removeTag("opposite"),e.moveValue(this);a.ghostLabel._applyThemes();this.labels.each(g=>{g._applyThemes()});this.root._markDirtyRedraw()}a.markDirtySize()}a=a.labelsContainer.width();c&&(this.get("opposite")?b.set("centerX",0):b.set("centerX",a));b.setPrivate("width",a)}processAxis(){super.processAxis();const a=this.axis;null==
a.get("height")&&a.set("height",f.p100);const b=this._root.horizontalLayout;a.set("layout",b);a.labelsContainer.set("height",f.p100);a.axisHeader.set("layout",b)}_updatePositions(){const a=this.axis;var b=a.y()-f.relativeToValue(a.get("centerY",0),a.height());a.gridContainer.set("y",b);a.topGridContainer.set("y",b);a.bulletsContainer.set("x",this.x());if(b=a.chart){b=b.plotContainer;const c=a.axisHeader;let d=a.get("marginTop",0);0<c.children.length?(d=a.axisHeader.height(),a.set("marginTop",d+1)):
c.set("height",d);c.setAll({y:a.y()-d,x:-1,width:b.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(a){return{x:0,y:this.positionToCoordinate(a)}}updateLabel(a,b,c,d){if(a){f.isNumber(b)||(b=0);let e=.5;e=f.isNumber(d)&&1<d?a.get("multiLocation",e):a.get("location",e);d=this.get("opposite");const g=a.get("inside",this.get("inside",!1));d?(a.set("x",0),g?a.set("position","absolute"):a.set("position","relative")):g?(a.set("x",0),a.set("position","absolute")):(a.set("x",void 0),
a.set("position","relative"));f.isNumber(c)&&c!=b&&(b+=(c-b)*e);a.set("y",this.positionToCoordinate(b));this.toggleVisibility(a,b,a.get("minPosition",0),a.get("maxPosition",1))}}updateGrid(a,b,c){if(a){f.isNumber(b)||(b=0);let d=a.get("location",.5);f.isNumber(c)&&c!=b&&(b+=(c-b)*d);a.set("y",this.positionToCoordinate(b));this.toggleVisibility(a,b,0,1)}}updateTick(a,b,c,d){if(a){f.isNumber(b)||(b=0);let e=.5;e=f.isNumber(d)&&1<d?a.get("multiLocation",e):a.get("location",e);f.isNumber(c)&&c!=b&&(b+=
(c-b)*e);a.set("y",this.positionToCoordinate(b));let g=a.get("length",0);c=a.get("inside",this.get("inside",!1));this.get("opposite")?(a.set("x",0),c&&(g*=-1)):c||(g*=-1);a.set("draw",h=>{h.moveTo(0,0);h.lineTo(g,0)});this.toggleVisibility(a,b,a.get("minPosition",0),a.get("maxPosition",1))}}updateBullet(a,b,c){if(a){const g=a.get("sprite");if(g){f.isNumber(b)||(b=0);var d=a.get("location",.5);f.isNumber(c)&&c!=b&&(b+=(c-b)*d);c=this.axis.roundAxisPosition(b,d);var e=this.axis._bullets[c];d=1;this.get("opposite")&&
(d=-1);a.get("stacked")&&(e?(e=e.get("sprite"))&&g.set("x",e.x()+e.width()*d):g.set("x",0));this.axis._bullets[c]=a;g.set("y",this.positionToCoordinate(b));this.toggleVisibility(g,b,0,1)}}}updateFill(a,b,c){a&&(f.isNumber(b)||(b=0),f.isNumber(c)||(c=1),b=this.positionToCoordinate(b),c=this.positionToCoordinate(c),this.fillDrawMethod(a,b,c))}fillDrawMethod(a,b,c){a.set("draw",d=>{const e=this.axis.gridContainer.width(),g=this.height();c<b&&([c,b]=[b,c]);b>g||0>c||(d.moveTo(0,b),d.lineTo(e,b),d.lineTo(e,
c),d.lineTo(0,c),d.lineTo(0,b))})}positionToCoordinate(a){return this._inversed?(a-this._start)*this._axisLength:(this._end-a)*this._axisLength}positionTooltip(a,b){this._positionTooltip(a,{x:0,y:this.positionToCoordinate(b)})}updateTooltipBounds(a){var b=this.get("inside"),c=this._display.toGlobal({x:0,y:0});let d=c.y,e=0,g=this.axisLength(),h="right";this.get("opposite")?b?(h="right",e=c.x-1E5):(h="left",e=c.x):b?(h="left",e=c.x):(h="right",e=c.x-1E5);b={left:e,right:e+1E5,top:d,bottom:d+g};c=a.get("bounds");
f.sameBounds(b,c)||(a.set("bounds",b),a.set("pointerOrientation",h))}_updateLC(){const a=this.axis;var b=a.parent;b&&(b=b.innerHeight(),this._lc=this.axisLength()/b,this._ls=a.y()/b)}toAxisPosition(a){const b=this._start||0,c=this._end||1;a-=this._ls;a=a*(c-b)/this._lc;return a=this.get("inversed")?b+a:c-a}toGlobalPosition(a){const b=this._start||0,c=this._end||1;a=this.get("inversed")?a-b:c-a;a=a/(c-b)*this._lc;return a+=this._ls}fixPosition(a){return this.get("inversed")?a:1-a}}Object.defineProperty(U,
"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"});Object.defineProperty(U,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:I.classNames.concat([U.className])});class V extends K{constructor(){super(...arguments);Object.defineProperty(this,"_endIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_strokeGenerator",{enumerable:!0,configurable:!0,writable:!0,value:fa()});Object.defineProperty(this,"_fillGenerator",{enumerable:!0,
configurable:!0,writable:!0,value:oa()});Object.defineProperty(this,"_legendStroke",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_legendFill",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"strokes",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>f.Graphics._new(this._root,{themeTags:f.mergeTags(this.strokes.template.get("themeTags",[]),["line","series","stroke"])},
[this.strokes.template])))});Object.defineProperty(this,"fills",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new f.ListTemplate(f.Template.new({}),()=>f.Graphics._new(this._root,{themeTags:f.mergeTags(this.strokes.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template])))});Object.defineProperty(this,"_fillTemplate",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"_strokeTemplate",{enumerable:!0,configurable:!0,writable:!0,
value:void 0});Object.defineProperty(this,"_previousPoint",{enumerable:!0,configurable:!0,writable:!0,value:[0,0,0,0]});Object.defineProperty(this,"_dindex",{enumerable:!0,configurable:!0,writable:!0,value:0});Object.defineProperty(this,"_sindex",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this._fillGenerator.y0(function(a){return a[3]});this._fillGenerator.x0(function(a){return a[2]});this._fillGenerator.y1(function(a){return a[1]});this._fillGenerator.x1(function(a){return a[0]});
super._afterNew()}makeStroke(a){const b=this.mainContainer.children.push(a.make());a.push(b);return b}makeFill(a){const b=this.mainContainer.children.push(a.make());a.push(b);return b}_updateChildren(){this._fillTemplate=this._strokeTemplate=void 0;var a=this.get("xAxis"),b=this.get("yAxis");if(this.isDirty("stroke")){var c=this.get("stroke");this.strokes.template.set("stroke",c);var d=this._legendStroke;d&&d.states.lookup("default").set("stroke",c)}this.isDirty("fill")&&(c=this.get("fill"),this.fills.template.set("fill",
c),(d=this._legendFill)&&d.states.lookup("default").set("fill",c));this.isDirty("fillPattern")&&(c=this.get("fillPattern"),this.fills.template.set("fillPattern",c),(d=this._legendFill)&&d.states.lookup("default").set("fillPattern",c));this.isDirty("curveFactory")&&(c=this.get("curveFactory"))&&(this._strokeGenerator.curve(c),this._fillGenerator.curve(c));if(a.inited&&b.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty||this.isDirty("connect")||
this.isDirty("curveFactory")){this.fills.each(g=>{g.setPrivate("visible",!1)});this.strokes.each(g=>{g.setPrivate("visible",!1)});this.axisRanges.each(g=>{let h=g.fills;h&&h.each(k=>{k.setPrivate("visible",!1)});(g=g.strokes)&&g.each(k=>{k.setPrivate("visible",!1)})});a=this.startIndex();b=this.strokes.template.get("templateField");c=this.fills.template.get("templateField");let e=d=!0;b&&(d=!1);c&&(e=!1);for(let g=a-1;0<=g;g--){let h=this.dataItems[g],k=!0,l=h.dataContext;b&&l[b]&&(d=!0);c&&l[c]&&
(e=!0);f.each(this._valueFields,p=>{f.isNumber(h.get(p))||(k=!1)});if(k&&d&&e){a=g;break}}b=this.dataItems.length;c=this.endIndex();if(c<b)for(c++,d=c;d<b;d++){let g=this.dataItems[d],h=!0;f.each(this._valueFields,k=>{f.isNumber(g.get(k))||(h=!1)});if(h){c=d+1;break}}0<a&&a--;this._endIndex=c;this._clearGraphics();this._sindex=0;this._dindex=a;if(1==this.dataItems.length)this._startSegment(0);else for(;this._dindex<c-1;)this._startSegment(this._dindex),this._sindex++}}else this._skipped=!0;super._updateChildren()}_clearGraphics(){this.strokes.clear();
this.fills.clear();this.axisRanges.each(a=>{a.fills.clear();a.strokes.clear()})}_startSegment(a){let b=this._endIndex,c=b;const d=this.get("autoGapCount"),e=this.get("connect"),g=this.makeFill(this.fills);var h=this._fillTemplate,k=this.fills.template;h&&h!=k&&(g.template=h);g.setPrivate("visible",!0);h=this.makeStroke(this.strokes);(k=this._strokeTemplate)&&k!=this.strokes.template&&(h.template=k);h.setPrivate("visible",!0);var l=this.get("xAxis"),p=this.get("yAxis");k=this.get("baseAxis");var n=
this.get("vcx",1),m=this.get("vcy",1);let q=this._xField,r=this._yField,t=this._xOpenField,v=this._yOpenField;const u=this.get("openValueXField"),w=this.get("openValueYField");u||(t=this._xField);w||(v=this._yField);const x=this.get("stacked"),z=l.basePosition(),B=p.basePosition();let D;D=k===p?this._yField:this._xField;const E=[];let F=[];E.push(F);const ha=this.strokes.template.get("templateField"),ia=this.fills.template.get("templateField");let ja=this.get("locationX",.5),ka=this.get("locationY",
.5),qa=this.get("openLocationX",ja),ra=this.get("openLocationY",ka);const sa=this.get("minDistance",0);let C,la=this.fills.template.get("visible");0<this.axisRanges.length&&(la=!0);let ma=!1;if(x||u||w)ma=!0;l={points:F,segments:E,stacked:x,getOpen:ma,basePosX:z,basePosY:B,fillVisible:la,xField:q,yField:r,xOpenField:t,yOpenField:v,vcx:n,vcy:m,baseAxis:k,xAxis:l,yAxis:p,locationX:ja,locationY:ka,openLocationX:qa,openLocationY:ra,minDistance:sa};let W=this._strokeTemplate,X=this._fillTemplate;for(C=
a;C<c;C++){this._dindex=C;p=this._dataItems[C];n=p.get(q);m=p.get(r);null==n||null==m?e||(F=[],E.push(F),l.points=F):this._getPoints(p,l);if(ha&&(n=p.dataContext[ha]))if(n instanceof f.Template||(n=f.Template.new(n)),this._strokeTemplate=n,C>a){c=C;break}else W=n,h.template=n;if(ia&&(n=p.dataContext[ia]))if(n instanceof f.Template||(n=f.Template.new(n)),this._fillTemplate=n,C>a){c=C;break}else X=n,g.template=n;e||(n=this.dataItems[C+1])&&k.shouldGap(p,n,d,D)&&(F=[],E.push(F),l.points=F)}g.setRaw("userData",
[a,C]);h.setRaw("userData",[a,C]);C===b&&this._endLine(F,E[0][0]);h&&this._drawStroke(h,E);g&&this._drawFill(g,E);this.axisRanges.each(G=>{const Y=G.container,M=this.makeFill(G.fills);Y&&Y.children.push(M);M.setPrivate("visible",!0);this._drawFill(M,E);G=this.makeStroke(G.strokes);Y&&Y.children.push(G);W&&W!=this.strokes.template&&(G.template=W);X&&X!=this.fills.template&&(M.template=X);G.setPrivate("visible",!0);this._drawStroke(G,E);M.setRaw("userData",[a,C]);G.setRaw("userData",[a,C])})}_getPoints(a,
b){let c=b.points;var d=a.get("locationX",b.locationX),e=a.get("locationY",b.locationY);d=b.xAxis.getDataItemPositionX(a,b.xField,d,b.vcx);var g=b.yAxis.getDataItemPositionY(a,b.yField,e,b.vcy);if(this._shouldInclude(d)){var h=this.getPoint(d,g);e=[h.x,h.y];h.x+=this._x;h.y+=this._y;a.set("point",h);if(b.fillVisible){b.baseAxis===b.xAxis?g=b.basePosY:b.baseAxis===b.yAxis&&(d=b.basePosX);if(b.getOpen){h=a.get(b.xOpenField);var k=a.get(b.yOpenField);null!=h&&null!=k&&(d=a.get("openLocationX",b.openLocationX),
g=a.get("openLocationY",b.openLocationY),b.stacked?(k=a.get("stackToItemX"),h=a.get("stackToItemY"),k?(d=b.xAxis.getDataItemPositionX(k,b.xField,d,k.component.get("vcx")),f.isNaN(d)&&(d=b.basePosX)):d=b.yAxis===b.baseAxis?b.basePosX:b.xAxis.getDataItemPositionX(a,b.xOpenField,d,b.vcx),h?(g=b.yAxis.getDataItemPositionY(h,b.yField,g,h.component.get("vcy")),f.isNaN(g)&&(g=b.basePosY)):g=b.xAxis===b.baseAxis?b.basePosY:b.yAxis.getDataItemPositionY(a,b.yOpenField,g,b.vcy)):(d=b.xAxis.getDataItemPositionX(a,
b.xOpenField,d,b.vcx),g=b.yAxis.getDataItemPositionY(a,b.yOpenField,g,b.vcy)))}a=this.getPoint(d,g);e[2]=a.x;e[3]=a.y}if(0<b.minDistance){if(a=e[2],d=e[3],g=this._previousPoint,h=g[2],k=g[3],Math.hypot(e[0]-g[0],e[1]-g[1])>b.minDistance||a&&d&&Math.hypot(a-h,d-k)>b.minDistance)c.push(e),this._previousPoint=e}else c.push(e)}}_endLine(a,b){}_drawStroke(a,b){a.get("visible")&&!a.get("forceHidden")&&a.set("draw",c=>{f.each(b,d=>{this._strokeGenerator.context(c);this._strokeGenerator(d)})})}_drawFill(a,
b){a.get("visible")&&!a.get("forceHidden")&&a.set("draw",c=>{f.each(b,d=>{this._fillGenerator.context(c);this._fillGenerator(d)})})}_processAxisRange(a){super._processAxisRange(a);a.fills=new f.ListTemplate(f.Template.new({}),()=>f.Graphics._new(this._root,{themeTags:f.mergeTags(a.fills.template.get("themeTags",[]),["line","series","fill"])},[this.fills.template,a.fills.template]));a.strokes=new f.ListTemplate(f.Template.new({}),()=>f.Graphics._new(this._root,{themeTags:f.mergeTags(a.strokes.template.get("themeTags",
[]),["line","series","stroke"])},[this.strokes.template,a.strokes.template]))}createLegendMarker(a){if(a=this.get("legendDataItem")){const c=a.get("marker");(a=a.get("markerRectangle"))&&a.setPrivate("visible",!1);c.set("background",f.Rectangle.new(c._root,{fillOpacity:0,fill:f.color(0)}));var b=c.children.push(f.Graphics._new(c._root,{themeTags:["line","series","legend","marker","stroke"],interactive:!1},[this.strokes.template]));this._legendStroke=b;const d=c.children.push(f.Graphics._new(c._root,
{themeTags:["line","series","legend","marker","fill"]},[this.fills.template]));this._legendFill=d;a=this._root.interfaceColors.get("disabled");b.states.create("disabled",{fill:a,stroke:a});d.states.create("disabled",{fill:a,stroke:a});if(0<this.bullets.length&&(b=this.bullets.getIndex(0))&&(b=b(c._root,this,new y.DataItem(this,{legend:!0},{})))){const e=b.get("sprite");e instanceof f.Graphics&&e.states.create("disabled",{fill:a,stroke:a});e&&(e.set("tooltipText",void 0),e.set("tooltipHTML",void 0),
c.children.push(e),e.setAll({x:c.width()/2,y:c.height()/2}),c.events.on("boundschanged",()=>{e.setAll({x:c.width()/2,y:c.height()/2})}))}}}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LineSeries"});Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:K.classNames.concat([V.className])});H.Axis=L;H.AxisRendererX=T;H.AxisRendererY=U;H.LineSeries=V;H.ValueAxis=Q;H.XYChart=O;H.XYCursor=P;H.XYSeries=K});