// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["require","exports","../assets","../core/has"],function(z,a,A,B){function w(){return!!a._pe}function x(){return!!B("esri-wasm")}function y(){return u?u:u=(new Promise((b,d)=>z(["./pe-wasm"],b,d))).then(b=>b.peWasm).then(({default:b})=>b({locateFile:d=>A.getAssetUrl(`esri/geometry/support/${d}`)})).then(b=>{v(b)})}function v(b){function d(e,c,f){e[c]=f(e[c])}a._pe=b;a.PeDefs.init();a.PeGTlistExtended.init();a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeDouble=class extends a._pe.PeDouble{constructor(e=
NaN){super(e)}destroy(){a._pe.destroy(this)}[Symbol.dispose](){this.destroy()}};a.PeGCSExtent=class extends a._pe.PeGCSExtent{destroy(){a._pe.destroy(this)}[Symbol.dispose](){this.destroy()}};b=[a._pe.PeAngunit,a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var h of b)d(h.prototype,"getName",e=>function(){return e.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const e of[a._pe.PeGeogtran,a._pe.PeProjcs])d(e.prototype,
"getParameters",c=>function(){const f=Array(a.PeDefs.PE_PARM_MAX);let k=c.call(this);for(let l=0;l<f.length;l++){const m=a._pe.getValue(k,"*");f[l]=m?a._pe.wrapPointer(m,a._pe.PeParameter):null;k+=Int32Array.BYTES_PER_ELEMENT}return f});d(a._pe.PeHorizon.prototype,"getCoord",e=>function(c=!1){const f=this.getSize();if(!f)return null;const k=[],l=e.call(this);q(k,f,l,c);return k});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",e=>{const c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){let f=
null;var k=e.call(this);if(!a._pe.compare(k,a._pe.NULL)){f=[k];const l=this.getSteps();if(1<l){k=a._pe.getPointer(k);for(let m=1;m<l;m++)f.push(a._pe.wrapPointer(k+c*m,a._pe.PeGTlistExtendedGTs))}}return f}});const g=a._pe._pe_getPeHorizonSize();h=e=>function(){let c=this._cache;c||(this._cache=c=new Map);if(c.has(e))return c.get(e);let f=null;var k=e.call(this);if(!a._pe.compare(k,a._pe.NULL)){f=[k];const l=k.getNump();if(1<l){k=a._pe.getPointer(k);for(let m=1;m<l;m++)f.push(a._pe.wrapPointer(k+
g*m,a._pe.PeHorizon))}}c.set(e,f);return f};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",h);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",h);a._pe.PeObject.prototype.toString=function(e=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();const c=a._pe.getPointer(this),f=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,e,f))};a._pe.PeGeogcs.prototype.destroy=function(){this.Delete();n(this);this.ptr=0};a._pe.PeGeogcs.prototype[Symbol.dispose]=
function(){this.destroy()};a._pe.PeProjcs.prototype.destroy=function(){this.Delete();n(this);this.ptr=0};a._pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function n(b){if(b){var d=a._pe.getClass(b);d&&(d=a._pe.getCache(d))&&(b=a._pe.getPointer(b))&&delete d[b]}}function t(b,d){const h=[];d=Array(d);for(let g=0;g<b;g++)h.push(a._pe.ensureInt8(d));return h}function r(b){return ArrayBuffer.isView(b)?b:Array.isArray(b[0])?b.flat():b}function q(b,d,h,g=!1){if(g)for(g=0;g<2*d;g++)b[g]=
a._pe.getValue(h+g*Float64Array.BYTES_PER_ELEMENT,"double");else{g=0===b.length;for(let e=0;e<d;e++)g&&(b[e]=Array(2)),b[e][0]=a._pe.getValue(h,"double"),b[e][1]=a._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}let u;a._pe=null;a.PeCSTransformations=void 0;(function(b){function d(e,c,f){a._pe.ensureCache.prepare();var k=r(f);const l=f===k;k=a._pe.ensureFloat64(k);(e=a._pe._pe_geog_to_proj(a._pe.getPointer(e),c,k))&&q(f,c,k,l);return e}function h(e,c,f){return g(e,
c,f,0)}function g(e,c,f,k){a._pe.ensureCache.prepare();var l=r(f);const m=f===l;l=a._pe.ensureFloat64(l);(e=a._pe._pe_proj_to_geog_center(a._pe.getPointer(e),c,l,k))&&q(f,c,l,m);return e}b.geogToProj=d;b.projGeog=function(e,c,f,k){switch(k){case a.PeDefs.PE_TRANSFORM_P_TO_G:return h(e,c,f);case a.PeDefs.PE_TRANSFORM_G_TO_P:return d(e,c,f)}return 0};b.projToGeog=h;b.projToGeogCenter=g})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(b){b.init=function(){b.PE_BUFFER_MAX=
a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;
b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;
b.PE_STR_FMT_WKT=a._pe.PeDefs.prototype.PE_STR_FMT_WKT;b.PE_STR_FMT_WKT2=a._pe.PeDefs.prototype.PE_STR_FMT_WKT2;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;
b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||(a.PeDefs={}));a.PeDouble=null;a.PeFactory=void 0;(function(b){function d(c,f){let k=null,l=h[c];l||(l={},h[c]=l);l.hasOwnProperty(String(f))&&(k=l[f],a._pe.compare(k,a._pe.NULL)&&(k=null));k||(c=a._pe.PeFactory.prototype.factoryByType(c,f),a._pe.compare(c,a._pe.NULL)||(k=e(c),l[f]=k));return k}const h={},g={},e=c=>
{const f=c.getType();switch(f){case a.PeDefs.PE_TYPE_GEOGCS:c=a._pe.castObject(c,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:c=a._pe.castObject(c,a._pe.PeProjcs);break;case a.PeDefs.PE_TYPE_GEOGTRAN:c=a._pe.castObject(c,a._pe.PeGeogtran);break;default:f&a.PeDefs.PE_TYPE_UNIT&&(c=a._pe.castObject(c,a._pe.PeUnit))}return c};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(c){return d(a.PeDefs.PE_TYPE_COORDSYS,c)};b.factoryByType=d;b.fromString=function(c,
f){let k=null,l=g[c];l||(l={},g[c]=l);l.hasOwnProperty(f)&&(k=l[f],a._pe.compare(k,a._pe.NULL)&&(k=null));k||(c=a._pe.PeFactory.prototype.fromString(c,f),a._pe.compare(c,a._pe.NULL)||(k=e(c),l[f]=k));return k};b.geogcs=function(c){return d(a.PeDefs.PE_TYPE_GEOGCS,c)};b.geogtran=function(c){return d(a.PeDefs.PE_TYPE_GEOGTRAN,c)};b.getCode=function(c){return a._pe.PeFactory.prototype.getCode(c)};b.projcs=function(c){return d(a.PeDefs.PE_TYPE_PROJCS,c)};b.unit=function(c){return d(a.PeDefs.PE_TYPE_UNIT,
c)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;a.PeGTlistExtended=void 0;(function(b){let d;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(h,g,e,c,f,k){let l=null;const m=new a._pe.PeInteger(k);try{const p=a._pe.PeGTlistExtended.prototype.getGTlist(h,g,e,c,f,m);if(k=m.val)if(l=[p],1<k){const C=a._pe.getPointer(p);for(h=1;h<k;h++)l.push(a._pe.wrapPointer(C+d*h,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(m)}return l}})(a.PeGTlistExtended||
(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(b){b.destroy=function(d){if(d?.length){for(const h of d)n(h),h.getEntries().forEach(g=>{n(g);g=g.getGeogtran();n(g);g.getParameters().forEach(n);[g.getGeogcs1(),g.getGeogcs2()].forEach(e=>{n(e);const c=e.getDatum();n(c);n(c.getSpheroid());n(e.getPrimem());n(e.getUnit())})});a._pe.PeGTlistExtendedEntry.prototype.Delete(d[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(b){b.geogToGeog=
function(d,h,g,e,c){a._pe.ensureCache.prepare();var f=r(g);const k=g===f;f=a._pe.ensureFloat64(f);let l=0;e&&(l=a._pe.ensureFloat64(e));(d=a._pe._pe_geog_to_geog(a._pe.getPointer(d),h,f,l,c))&&q(g,h,f,k);return d}})(a.PeGTTransformations||(a.PeGTTransformations={}));a.PeLineType=void 0;(function(b){b.geodesicCoordinate=function(d,h,g,e,c,f,k,l){a._pe.PeLineType.prototype.geodesic_coordinate(d,h,g,e,c,f,k,l)};b.geodeticCoordinate=function(d,h,g,e,c,f,k,l,m){a._pe.PeLineType.prototype.geodetic_coordinate(d,
h,g,e,c,f,k,l,m)};b.geodeticDistance=function(d,h,g,e,c,f,k,l,m,p){a._pe.PeLineType.prototype.geodetic_distance(d,h,g,e,c,f,k,l,m,p)};b.greatEllipticDistance=function(d,h,g,e,c,f,k,l,m){a._pe.PeLineType.prototype.great_elliptic_distance(d,h,g,e,c,f,k,l,m)}})(a.PeLineType||(a.PeLineType={}));a.PeMath=void 0;(function(b){b.phiToEta=function(d,h){return a._pe.PeMath.prototype.phi_to_eta(d,h)};b.etaToPhi=function(d,h){return a._pe.PeMath.prototype.eta_to_phi(d,h)};b.phiToPhig=function(d,h){return a._pe.PeMath.prototype.phi_to_phig(d,
h)};b.q=function(d,h,g){return a._pe.PeMath.prototype.q(d,h,g)};b.q90=function(d,h){return a._pe.PeMath.prototype.q90(d,h)}})(a.PeMath||(a.PeMath={}));a.PeNotationDms=void 0;(function(b){const d=(g,e,c,f,k,l)=>{a._pe.ensureCache.prepare();switch(g){case "dd":var m=a._pe._pe_geog_to_dd;var p=a.PeDefs.PE_DD_MAX;break;case "ddm":m=a._pe._pe_geog_to_ddm;p=a.PeDefs.PE_DDM_MAX;break;case "dms":m=a._pe._pe_geog_to_dms,p=a.PeDefs.PE_DMS_MAX}g=0;e&&(g=a._pe.getPointer(e));e=r(f);e=a._pe.ensureFloat64(e);p=
t(c,p);f=a._pe.ensureInt32(p);if(k=m(g,c,e,k,f))for(m=0;m<c;m++)l[m]=a._pe.UTF8ToString(p[m]);return k},h=(g,e,c,f,k)=>{a._pe.ensureCache.prepare();switch(g){case "dd":var l=a._pe._pe_dd_to_geog;break;case "ddm":l=a._pe._pe_ddm_to_geog;break;case "dms":l=a._pe._pe_dms_to_geog}g=0;e&&(g=a._pe.getPointer(e));e=f.map(m=>a._pe.ensureString(m));f=a._pe.ensureInt32(e);e=a._pe.ensureFloat64(Array(2*c));(l=l(g,c,f,e))&&q(k,c,e);return l};b.geogToDms=function(g,e,c,f,k){return d("dms",g,e,c,f,k)};b.dmsToGeog=
function(g,e,c,f){return h("dms",g,e,c,f)};b.geogToDdm=function(g,e,c,f,k){return d("ddm",g,e,c,f,k)};b.ddmToGeog=function(g,e,c,f){return h("ddm",g,e,c,f)};b.geogToDd=function(g,e,c,f,k){return d("dd",g,e,c,f,k)};b.ddToGeog=function(g,e,c,f){return h("dd",g,e,c,f)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;
b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geogToMgrsExtended=function(d,h,g,e,c,f,k){a._pe.ensureCache.prepare();let l=0;d&&(l=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=t(h,a.PeDefs.PE_MGRS_MAX);const m=a._pe.ensureInt32(d);if(e=a._pe._pe_geog_to_mgrs_extended(l,h,g,e,c,f,m))for(c=0;c<h;c++)k[c]=a._pe.UTF8ToString(d[c]);
return e};b.mgrsToGeogExtended=function(d,h,g,e,c){a._pe.ensureCache.prepare();let f=0;d&&(f=a._pe.getPointer(d));d=g.map(k=>a._pe.ensureString(k));g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(e=a._pe._pe_mgrs_to_geog_extended(f,h,g,e,d))&&q(c,h,d);return e}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(b){b.geogToUsng=function(d,h,g,e,c,f,k){a._pe.ensureCache.prepare();let l=0;d&&(l=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=t(h,a.PeDefs.PE_MGRS_MAX);
const m=a._pe.ensureInt32(d);if(e=a._pe._pe_geog_to_usng(l,h,g,e,c,f,m))for(c=0;c<h;c++)k[c]=a._pe.UTF8ToString(d[c]);return e};b.usngToGeog=function(d,h,g,e){a._pe.ensureCache.prepare();var c=0;d&&(c=a._pe.getPointer(d));d=g.map(f=>a._pe.ensureString(f));g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(c=a._pe._pe_usng_to_geog(c,h,g,d))&&q(e,h,d);return c}})(a.PeNotationUsng||(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;
b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geogToUtm=function(d,h,g,e,c){a._pe.ensureCache.prepare();var f=0;d&&(f=a._pe.getPointer(d));d=r(g);g=a._pe.ensureFloat64(d);d=t(h,a.PeDefs.PE_UTM_MAX);const k=a._pe.ensureInt32(d);if(e=a._pe._pe_geog_to_utm(f,h,g,e,k))for(f=0;f<h;f++)c[f]=a._pe.UTF8ToString(d[f]);return e};b.utmToGeog=function(d,h,g,e,c){a._pe.ensureCache.prepare();let f=0;d&&(f=a._pe.getPointer(d));
d=g.map(k=>a._pe.ensureString(k));g=a._pe.ensureInt32(d);d=a._pe.ensureFloat64(Array(2*h));(e=a._pe._pe_utm_to_geog(f,h,g,e,d))&&q(c,h,d);return e}})(a.PeNotationUtm||(a.PeNotationUtm={}));a.PePCSInfo=void 0;(function(b){const d=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=
a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(h,g=b.PE_PCSINFO_OPTION_DOMAIN){let e=null,c=null;d.has(h)&&(c=d.get(h),c[g]&&(e=c[g]));e||(e=a._pe.PePCSInfo.prototype.generate(h,g),c||(c=[],d.set(h,c)),c[g]=e);return e}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(b){b.versionString=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));const D=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return a.PeCSTransformations},
get PeDefs(){return a.PeDefs},get PeDouble(){return a.PeDouble},get PeFactory(){return a.PeFactory},get PeGCSExtent(){return a.PeGCSExtent},get PeGTTransformations(){return a.PeGTTransformations},get PeGTlistExtended(){return a.PeGTlistExtended},get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeLineType(){return a.PeLineType},get PeMath(){return a.PeMath},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},get PeNotationUsng(){return a.PeNotationUsng},
get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:v,get _pe(){return a._pe},isLoaded:w,isSupported:x,load:y},Symbol.toStringTag,{value:"Module"}));a._init=v;a.isLoaded=w;a.isSupported=x;a.load=y;a.pe=D});