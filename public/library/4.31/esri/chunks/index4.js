// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","./time-zones","./region"],function(r,t,n){function u(a,d=5){const b=a.length;if(b<=d)return a;d=Math.min(b-2,d-2);const c=(b-1)/(d+1);return[a[0],...Array.from({length:d},(f,e)=>a[Math.round((e+1)*c)]),a[b-1]]}const v={groupDateRange:365,startDate:(new Date).toISOString()},w=(a,d,b)=>{const c=[];a=b.create(a);for(let f=0;f<=d;f++)a=b.increase(a),c.push(b.formatToIsoDateString(a));return c},x=(a,d,b,c)=>{const f=new Map,e=w(d,b,c);return a.map(g=>{const {label:h}=g,p=n.extractRegion(h),
q=e.map(m=>{const l=`${m}-${h}`;let k=f.get(l);if(k)return k;k=c.isoToTimeZone(m,h);f.set(l,k);return k});return{...g,continent:p,isRegularContinent:p!==n.global,dates:q}})},y=(a,d,b)=>a.length===d.length&&a.every((c,f)=>b.same(c,d[f])),z=(a,d=5)=>{var b=a.filter(({label:c})=>n.extractRegion(c)!==n.global);if(0===b.length)return[0];b=b.map(c=>a.indexOf(c));return u(b,d)};r.groupByOffset=async function(a){const {groupDateRange:d,startDate:b,dateEngine:c}={...v,...a};a=[];if(!c)throw Error("dateEngine is required");
var f=t.timeZones.map(e=>({label:e}));f=x(f,b,d,c);for(const e of f){const {label:g,continent:h,dates:p}=e;if(e.visited)continue;e.visited=!0;const q={labelIdx:[],tzs:[{label:g}]};for(const m of f.filter(l=>!l.visited)){const {label:l,continent:k,isRegularContinent:A,dates:B}=m;h!==k&&A||!y(p,B,c)||(q.tzs.push({label:l}),m.visited=!0)}a.push(q)}return a.map(e=>{e.tzs=e.tzs.sort((g,h)=>g.label.localeCompare(h.label));return{labelTzIdx:z(e.tzs,7),tzs:e.tzs.map(g=>g.label)}}).sort((e,g)=>g.tzs.length-
e.tzs.length)};Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});