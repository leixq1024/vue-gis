// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","./Geometry"],function(p,n){function fa(a){let b=0;a&65535n||(b+=16,a>>=16n);a&255n||(b+=8,a>>=8n);a&15n||(b+=4,a>>=4n);return b+Ja[Number(BigInt.asUintN(4,a))]}function sa(a){let b=0;a&4294967295n||(b=32,a>>=32n);return b+fa(BigInt.asUintN(32,a))}function G(a,b){a=W(a);b=W(b);a=53-sa(a);b=53-sa(b);return 52>=(0<=a?a:0)+(0<=b?b:0)}function X(a,b){const c=a+b;return c-a===b&&c-b===a}function I(a,b){const c=a-b;return a-c===b&&b+c===a}function ha(a){var b=Math.PI*Math.PI/6;if(1!==
a&&!(1<a))if(0===a)b=a;else if(0>a){a=Math.abs(a);b=1+a;var c=Math.log(b);b=c*c/-2-ha(a/b)}else if(.5<a)c=1-a,a=Math.log(a)*Math.log(c),b=b-ha(c)-a;else{b=0;var d=1+Math.trunc(-16*Math.log(10)/Math.log(a)+1.5);for(c=d;0<d;d--,--c)b*=a,b+=1/(c*c);b*=a}return b}function ta(a,b,c,d,e){e[0]=b[0]+(c[0]-b[0])*d;e[1]=b[1]+(c[1]-b[1])*d;3===a&&(e[2]=b[2]+(c[2]-b[2])*d)}function ua(a,b,c,d,e){e[0]=c[0]-(c[0]-b[0])*(1-d);e[1]=c[1]-(c[1]-b[1])*(1-d);3===a&&(e[2]=c[2]-(c[2]-b[2])*(1-d))}function Y(a,b,c){return.5>=
c?a+(b-a)*c:b-(b-a)*(1-c)}function va(a,b,c,d){.5>=c?(d.x=a.x+(b.x-a.x)*c,d.y=a.y+(b.y-a.y)*c):(d.x=b.x-(b.x-a.x)*(1-c),d.y=b.y-(b.y-a.y)*(1-c))}function N(a){return a*a}function Z(a,b,c){const d=a*b;var e=ia,g=ja;const f=134217729*a;e[0]=f-(f-a);g[0]=a-e[0];a=ka;e=la;g=134217729*b;a[0]=g-(g-b);e[0]=b-a[0];c[0]=ja[0]*la[0]-(d-ia[0]*ka[0]-ja[0]*ka[0]-ia[0]*la[0]);return d}function aa(a,b,c){const d=a+b;c[0]=Math.abs(a)>Math.abs(b)?a-d+b:b-d+a;return d}function ma(a){var b=1-a;if(0===b)return 1;if(.01>=
b)a=Math.log(b),b=1+b*(.4431471805599453-.25*a+b*(.05680519270997949-.09375*a+b*(.02183137044373718-.05859375*a+b*(.011544521417308362-.042724609375*a+b*(.00714200031339596-.0336456298828125*a+b*(.004854743337164948-.027757644653320312*a+b*(.003514687963781376-.023627042770385742*a)))))));else{if(.016>a)return J*(1-a*(.25+a*(.046875+a*(.01953125+a*(.01068115234375+a*(.0067291259765625+a*(.004626274108886719+a*(.0033752918243408203+.0025710230693221092*a))))))));b=wa(0,b,1)-a*xa(0,b,1)/3}return na(b,
1,J)}function ya(a,b,c=Number.NaN){n.geometryReleaseAssert(0<=b&&1>=b);if(0===b)return a;let d=1;var e=a;0>e&&(e=-e,d=-1);if(1===b)return b=Math.round(e/ba),d*(2*b+Math.sin(e-b*ba));var g=J;a=Math.floor(e/g);e=a&1?(a+1)*g-e:e-a*g;var f=Math.sin(e);c=Number.isNaN(c)?ma(b):c;if(1===f)b=c+Math.sqrt(1-b)*(e-g);else if(g=e*e,.01424*Math.pow(g,4)<=2*K())b=e*(1+g*b*(-1/6+g*((4-3*b)/120-(16+(-60+45*b)*b)/5040*g)));else if(.01>=b){f=Math.sin(2*e);g=Math.sin(4*e);var h=Math.sin(6*e);const k=Math.sin(8*e),l=
Math.sin(10*e);b=e+b*((2*-e+f)/8+b*((-3*e+2*f-.25*g)/64+b*((-20*e+15*f-3*g+h/3)/1024+b*(5*(-140*e+112*f-28*g+16/3*h-.5*k)/65536+7*b*((-63*e+52.5*f-15*g+3.75*h-.625*k+.05*l)/65536+b*(-693*e+594*f-185.625*g+1.375*h-12.375*k+1.8*l-.125*Math.sin(12*e))/1048576)))))}else g=f*f,h=Math.cos(e),e=h*h,h=.999>f?1-b*f*f:1-b+b*h*h,b=f*(wa(e,h,1)-b*g*xa(e,h,1)/3);return d*(a&1?c*(a+1)-b:b+c*a)}function wa(a,b,c){n.geometryReleaseAssert(1<(0!==a?1:0)+(0!==b?1:0)+1);let d=c;for(;;){c=Math.sqrt(a*b)+Math.sqrt(b*d)+
Math.sqrt(d*a);a=.25*(a+c);b=.25*(b+c);d=.25*(d+c);c=(a+b+d)/3;const e=(c-a)/c,g=(c-b)/c,f=(c-d)/c;if(.0024>=Math.abs(e)&&.0024>=Math.abs(g)&&.0024>=Math.abs(f))return a=e*g-f*f,b=e*g*f,(1+(-.1+1/24*a-3/44*b-5*a*a/208+a*b/16)*a+(1/14+3*b/104)*b)/Math.sqrt(c)}}function xa(a,b,c){n.geometryReleaseAssert(0!==a||0!==b);var d=a,e=b,g=c;c=new T(0);for(b=1;;){a=.2*(d+e+3*g);var f=(a-d)/a,h=(a-e)/a,k=(a-g)/a;if(.0015>=Math.abs(f)&&.0015>=Math.abs(h)&&.0015>=Math.abs(k)){d=f*h;g=k*k;e=d-g;var l=d-6*g;g=l+
e+e;f=9/22;h=3/26;l*=-(3/14)+.25*f*l-1.5*h*k*g;k*=1/6*g+k*(-f*e+k*h*d);return 3*c.getResult()+b*(1+l+k)/(a*Math.sqrt(a))}k=Math.sqrt(e);a=Math.sqrt(g);k=Math.sqrt(d)*(k+a)+k*a;c.add(b/(a*(g+k)));b*=.25;d=.25*(d+k);e=.25*(e+k);g=.25*(g+k)}}function M(a,b,c,d,e){if(0!==e)for(var g=0;g++<e;)a[c++]=b[d++]}function R(a,b){return a}function za(a){a.sort((b,c)=>b<c?-1:b>c?1:0)}function oa(a,b){return Array.from({length:b},()=>new a)}function Aa(a,b){return Array.from({length:a},()=>b)}function ca(a){Ba[0]=
a;return Ca[0]}function W(a){return ca(a)&4503599627370495n}function Da(a){return Number((ca(a)&9218868437227405312n)>>52n)}function O(a){if(0n===a)return-1n;if(1n===a||-1n===a)return 0n;0n>a&&(a=-a);var b=0n;let c=512n;for(var d=1n<<b+c;a>=d;)b+=c,c<<=1n,d<<=c;c>>=1n;for(d=b+c;0n<c;)a<1n<<d||(b=d),c>>=1n,d=b+c;return b}function pa(a,b){return a===b||Number.isNaN(a)&&Number.isNaN(b)}function da(a,b){return b+2654435769+(a<<6)+(a>>2)&2147483647}function Ea(a){return da(3735928559,a)}function qa(){return 100*
Number.EPSILON}function K(){return Number.EPSILON}function na(a,b,c){return a>=b?a<=c?a:c:b}function ra(a,b){n.geometryReleaseAssert((2===b.rows()||3===b.rows())&&(2===b.cols()||3===b.rows()));a.xx=b.atRowCol(0,0);a.xy=b.atRowCol(0,1);a.yx=b.atRowCol(1,0);a.yy=b.atRowCol(1,1);3===b.cols()?(a.xd=b.atRowCol(0,2),a.yd=b.atRowCol(1,2)):(a.xd=0,a.yd=0)}class T{constructor(a){this.sum=a;this.compensation=0}assign(a){this.compensation=a.compensation;this.sum=a.sum;return this}reset(){this.sum=this.compensation=
0}resetToStart(a){this.sum=a;this.compensation=0}normalize(){n.geometryReleaseAssert(0)}add(a){const b=this.sum+a;a=Math.abs(this.sum)>=Math.abs(a)?this.compensation+(this.sum-b+a):this.compensation+(a-b+this.sum);this.sum=b;this.compensation=a}sub(a){this.add(-a)}addProduct(a,b){const c=[0];a=Z(a,b,c);this.add(a);this.add(c[0])}addKahan(a){n.geometryReleaseAssert(0)}subKahan(a){n.geometryReleaseAssert(0)}mulKahan(a){n.geometryReleaseAssert(0)}mul(a){const b=new T(0);b.addProduct(this.sum,a);b.addProduct(this.compensation,
a);this.assign(b)}getResult(){return this.sum+this.compensation}pe(a){this.add(a);return this}me(a){this.add(-a);return this}meKahan(a){this.subKahan(a);return this}peKahan(a){this.addKahan(a);return this}}const Ja=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],Ka=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];class P{constructor(a,b){void 0===a?this.setEmpty():a instanceof P?(this.vmin=a.vmin,this.vmax=a.vmax):(this.vmin=a,this.vmax=b,this.normalize())}static construct(a,b){return new P(a,b)}static constructEmpty(){return new P}setCoords(a,
b){this.vmin=a;this.vmax=b;this.normalize()}setCoordsFromEnvelope(a){this.vmin=a.vmin;this.vmax=a.vmax}setEmpty(){this.vmax=this.vmin=Number.NaN}getCenter(){return.5*(this.vmin+this.vmax)}equalsRange(a,b){return pa(this.vmin,a)&&pa(this.vmax,b)}equals(a,b){return this.isEmpty()&&a.isEmpty()?!0:void 0!==b?Math.abs(this.vmin-a.vmin)<=b&&Math.abs(this.vmax-a.vmax)<=b:this.vmin===a.vmin&&this.vmax===a.vmax}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){n.geometryReleaseAssert(0);
return!0}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY;this.vmax=Number.POSITIVE_INFINITY}move(a){this.isEmpty()||(this.vmin+=a,this.vmax+=a)}contains(a){return a.vmin>=this.vmin&&a.vmax<=this.vmax}containsCoordinate(a){return a>=this.vmin&&a<=this.vmax}containsRightExclusive(a){return a>=this.vmin&&a<this.vmax}containsExclusiveCoordinate(a){return a>this.vmin&&a<this.vmax}containsExclusive(a){n.geometryReleaseAssert(0);return!0}isIntersecting(a){return this.vmin<=a.vmin?this.vmax>=a.vmin:a.vmax>=
this.vmin}mergeCoordinate(a){this.isEmpty()?this.vmax=this.vmin=a:this.mergeNeCoordinate(a)}merge(a){if(!a.isEmpty()){var b=a.vmax;this.mergeCoordinate(a.vmin);this.mergeCoordinate(b)}}mergeNe(a){const b=a.vmax;this.mergeNeCoordinate(a.vmin);this.mergeNeCoordinate(b)}mergeNeCoordinate(a){a<this.vmin?this.vmin=a:a>this.vmax&&(this.vmax=a)}intersect(a){this.isEmpty()||a.isEmpty()?this.setEmpty():(this.vmin<a.vmin&&(this.vmin=a.vmin),this.vmax>a.vmax&&(this.vmax=a.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(a){n.geometryReleaseAssert(0)}normalize(){this.vmin<=
this.vmax||(this.vmin>this.vmax?this.vmax=R(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(a){return na(a,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?qa():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*qa()}static unit(){return La}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=R(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(a,b){this.vmin=a;this.vmax=b;this.normalizeNoNAN()}clone(){return new P(this.vmin,
this.vmax)}}const La=new P(0,1);class y{static getNAN(){return new y(Number.NaN)}constructor(a,b){this.m_value=a??0;this.m_eps=b??0}[Symbol.toPrimitive](a){return this}clone(){return new y(this.m_value,this.m_eps)}assign(a){this.m_value=a.m_value;this.m_eps=a.m_eps;return this}scaleError(a){this.m_eps*=a}setError(a){this.m_eps=a}set(a,b){this.m_value=a;this.m_eps=b??0;return this}setWithEps(a,b){void 0===b&&(b=1);this.m_value=a;this.m_eps=y.ulp(a)*b;return this}setE(a){this.m_value=a.m_value;this.m_eps=
a.m_eps;return this}precise(){return new y(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){this.m_eps=0;return this}absThis(){this.m_value=Math.abs(this.m_value);return this}add(a){return this.clone().addThis(a)}addE(a){return this.clone().addThisE(a)}addThisE(a){const b=this.m_value+a.m_value;a=this.m_eps+a.m_eps+y.ulp(b);this.m_value=b;this.m_eps=a;return this}addThis(a){a=this.m_value+a;const b=this.m_eps+y.ulp(a);this.m_value=a;this.m_eps=
b;return this}subE(a){return this.clone().subThisE(a)}sub(a){return this.clone().subThis(a)}subThisE(a){const b=this.m_value-a.m_value;a=this.m_eps+a.m_eps+y.ulp(b);this.m_value=b;this.m_eps=a;return this}subThis(a){a=this.m_value-a;const b=this.m_eps+y.ulp(a);this.m_value=a;this.m_eps=b;return this}setAddE(a,b){this.m_value=a.m_value+b.m_value;this.m_eps=a.m_eps+b.m_eps+y.ulp(this.m_value);return this}setAdd(a,b){this.m_value=a+b;this.m_eps=y.ulp(this.m_value);return this}setAddEN(a,b){this.m_value=
a.m_value+b;this.m_eps=a.m_eps+y.ulp(this.m_value);return this}setAddNE(a,b){this.m_value=a+b.m_value;this.m_eps=b.m_eps+y.ulp(this.m_value);return this}setSubE(a,b){this.m_value=a.m_value-b.m_value;this.m_eps=a.m_eps+b.m_eps+y.ulp(this.m_value);return this}setSub(a,b){this.m_value=a-b;this.m_eps=y.ulp(this.m_value);return this}setSubEN(a,b){this.m_value=a.m_value-b;this.m_eps=a.m_eps+y.ulp(this.m_value);return this}setSubNE(a,b){this.m_value=a-b.m_value;this.m_eps=b.m_eps+y.ulp(this.m_value);return this}mulThisE(a){const b=
this.m_value*a.m_value;this.m_eps=this.m_eps*Math.abs(a.m_value)+a.m_eps*Math.abs(this.m_value)+this.m_eps*a.m_eps+y.ulp(b);this.m_value=b;return this}mulThis(a){const b=this.m_value*a;this.m_eps=this.m_eps*Math.abs(a)+y.ulp(b);this.m_value=b;return this}mul(a){return this.clone().mulThis(a)}mulE(a){return this.clone().mulThisE(a)}setMulE(a,b){const c=a.m_value*b.m_value;this.m_eps=a.m_eps*Math.abs(b.m_value)+b.m_eps*Math.abs(a.m_value)+a.m_eps*b.m_eps+y.ulp(c);this.m_value=c;return this}setMul(a,
b){this.m_value=a*b;this.m_eps=y.ulp(this.m_value);return this}setMulEN(a,b){this.setE(a);return this.mulThis(b)}setMulNE(a,b){this.setE(b);return this.mulThis(a)}mulThisByPower2(a){this.m_value*=a;this.m_eps*=Math.abs(a);return this}static st_mulByPower2(a,b){return(new y(a.m_value,a.m_eps)).mulThisByPower2(b)}divE(a){return this.clone().divThisE(a)}divThisE(a){const b=Math.abs(a.m_value),c=this.m_value/a.m_value;let d=(this.m_eps+Math.abs(c)*a.m_eps)/b;a.m_eps>.01*b&&(a=a.m_eps/b,d*=1+(1+a)*a);
this.m_value=c;this.m_eps=d+y.ulp(c);return this}divThis(a){const b=Math.abs(a);this.m_value/=a;this.m_eps=this.m_eps/b+y.ulp(this.m_value);return this}setDivE(a,b){this.setE(a);return this.divThisE(b)}setDiv(a,b){this.m_value=a/b;this.m_eps=y.ulp(this.m_value);return this}setDivEN(a,b){this.setE(a);return this.divThis(b)}setDivNE(a,b){this.set(a);return this.divThisE(b)}divThisByPower2(a){this.m_value/=a;this.m_eps/=Math.abs(a);return this}invThis(){this.setE(U.clone().divThisE(this));return this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let a,
b;0<=this.m_value?(a=Math.sqrt(this.m_value),b=this.m_value>10*this.m_eps?.5*this.m_eps/a:this.m_value>this.m_eps?a-Math.sqrt(this.m_value-this.m_eps):Math.max(a,Math.sqrt(this.m_value+this.m_eps)-a),b+=y.ulp(a)):this.m_value<-this.m_eps?b=a=Number.NaN:(a=0,b=Math.sqrt(this.m_eps));this.m_value=a;this.m_eps=b;return this}sqr(){return this.clone().sqrThis()}sqrThis(){const a=this.m_value*this.m_value;this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+y.ulp(a);this.m_value=a;return this}cubeThis(){n.geometryReleaseAssert(0);
return this}setSin(a){var b=Math.sin(a.m_value);const c=Math.cos(a.m_value);this.m_value=b;b=Math.abs(b);const d=Math.abs(a.value());this.m_eps=(Math.abs(c)+.5*b*a.m_eps)*a.m_eps+y.ulp(b+d);return this}static ulp(a){const b=((ca(a)&9218868437227405312n)>>52n)-1075n;return-1023n<b?(Ca[0]=b+1023n<<52n,Ba[0]):0===a?0:Number.MIN_VALUE}setCos(a){const b=Math.sin(a.m_value);var c=Math.cos(a.m_value);this.m_value=c;c=Math.abs(c);const d=Math.abs(a.value());this.m_eps=(Math.abs(b)+.5*c*a.m_eps)*a.m_eps+y.ulp(c+
d);return this}static st_cosAndSin(a,b,c){const d=Math.sin(a.m_value),e=Math.cos(a.m_value);c.m_value=d;b.m_value=e;const g=Math.abs(d),f=Math.abs(e),h=Math.abs(a.value());c.m_eps=(Math.abs(e)+.5*g*a.m_eps)*a.m_eps+y.ulp(g+h);b.m_eps=(Math.abs(d)+.5*f*a.m_eps)*a.m_eps+y.ulp(f+h)}setLog(a){n.geometryReleaseAssert(0);return this}negate(){return this.clone().negateThis()}negateThis(){this.m_value=-this.m_value;return this}setAbs(){this.m_value=Math.abs(this.m_value);return this}static atan2(a,b){n.geometryReleaseAssert(0);
return new y}acosThis(){n.geometryReleaseAssert(0);return this}asinThis(){n.geometryReleaseAssert(0);return this}isInInterval(a){return P.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(a)}eq(a){return Math.abs(this.m_value-a.m_value)<=this.m_eps+a.m_eps}ne(a){return!this.eq(a)}gt(a){return this.m_value-a.m_value>this.m_eps+a.m_eps}lt(a){return a.m_value-this.m_value>this.m_eps+a.m_eps}ge(a){return!this.lt(a)}le(a){return!this.gt(a)}tolEQ(a,b){return Math.abs(this.m_value-
a.m_value)<=b||this.eq(a)}tolNE(a,b){return!this.tolEQ(a,b)}tolGT(a,b){return this.m_value-a.m_value>b&&this.gt(a)}tolLT(a,b){return a.m_value-this.m_value>b&&this.lt(a)}tolGE(a,b){return!this.tolLT(a,b)}tolLE(a,b){return!this.tolGT(a,b)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&0!==this.m_eps}tolIsZero(a){return Math.abs(this.m_value)<=Math.max(this.m_eps,a)}setPi(){this.setE(Ma)}setEuler(){this.set(2.718281828459045,K())}cubicRootThis(){n.geometryReleaseAssert(0);
return this}powerThis(a){n.geometryReleaseAssert(0);return this}setPower(a,b){this.setE(a);return this.powerThis(b)}static size(){return 1}}y.dimensions=1;const Ma=new y(Math.PI,.5*K()),Na=new y(0,0),U=new y(1,0),Oa=new y(4,0),Fa=[0],Pa=[0],ia=[0],ja=[0],ka=[0],la=[0],Ga=[0],Ha=[0];class Qa{constructor(...a){this.m_elts=a}get length(){return this.m_elts.length}at(a){return this.m_elts[a]}[Symbol.dispose](){for(const a of this.m_elts)a[Symbol.dispose]()}}const ba=Math.PI,Ia=2*Math.PI,J=.5*Math.PI;
class Ra{constructor(a,b){this.m_cr=a;this.m_cc=b;this.m_v=Aa(a*b,0)}get(a,b){return this.m_v[a*this.m_cc+b]}set(a,b,c){this.m_v[a*this.m_cc+b]=c}inc(a,b){return++this.m_v[a*this.m_cc+b]}}var ea=new ArrayBuffer(8);const Ba=new Float64Array(ea),Ca=new BigUint64Array(ea),Sa=BigInt(2147483647),Ta=3*J;class v{constructor(){this.m_rn={v:0n};this.m_rd={v:1n};this.m_bNormalized=this.m_bNaN=!1;this.m_sign=this.m_power=0}static constructAssign(a,b){a=a.clone();void 0!==b&&a.limitPrecisionThis(b);return a}static constructDouble(a){return(new v).setDouble(a)}static constructInt64(a){return(new v).setInt64(a)}static constructRational(a,
b){return(new v).setRational(a,b)}static constructInt32(a){return this.constructInt64(BigInt(Math.trunc(a)))}[Symbol.toPrimitive](a){return this}compare(a){return this.lt(a)?-1:this.gt(a)?1:0}assignCopy(a){return this.setThis(a)}abs(){return this.clone().absThis()}absThis(){if(this.isNAN())return this;this.m_sign*=this.m_sign;return this}clone(){return(new v).setThis(this)}setThis(a){this.m_bNaN=a.m_bNaN;this.m_bNormalized=a.m_bNormalized;this.m_rn.v=a.m_rn.v;this.m_rd.v=a.m_rd.v;this.m_power=a.m_power;
this.m_sign=a.m_sign;return this}setZero(){this.m_rn.v=0n;this.m_rd.v=1n;this.m_bNaN=!1;this.m_power=0;this.m_bNormalized=!0;this.m_sign=0;return this}setDouble(a){this.setZero();if(0===a)return this;if(Number.isInteger(a)&&2147483647>Math.abs(a))return this.setInt32(a);var b=ca(a),c=(b&v.s_em)>>52n;a=!!(b&v.s_sm);b&=v.s_fm;if(c===v.s_emax)return b?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0):(this.m_rn.v=a?-1n:1n,this.m_rd.v=0n),this;0n===c&&n.throwNotImplementedException("denormalized numbers not yet implemented");
c-=1023n;this.m_rn.v=(1n<<52n|b)<<(0n<=c?c:0n);this.m_rd.v=1n<<52n+(0n>c?-c:0n);this.m_sign=a?-1:1;this.m_bNormalized=!1;return this.normalizeThis()}setInt64(a){if(0n===a)return this.setZero();this.m_bNaN=!1;this.m_sign=0n<a?1:-1;this.m_rn.v=0n<a?a:-a;this.m_rd.v=1n;this.m_power=0;this.m_bNormalized=!1;return this.normalizeThis()}setRational(a,b){if(0n===a)return 0n===b?this.setNAN():this.setZero();if(0n===b)return 0n<a?this.setPositiveInf():this.setNegativeInf();this.m_sign=(0n<a?1:-1)*(0n<b?1:-1);
this.m_rn.v=0n<a?a:-a;this.m_rd.v=0n<b?b:-b;this.m_power=0;this.m_bNormalized=!1;return this.normalizeThis()}setInt32(a){return this.setInt64(BigInt(Math.trunc(a)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return this.isNAN()?!1:0n===this.m_rd.v&&1===this.m_sign}isNegativeInf(){return this.isNAN()?!1:0n===this.m_rd.v&&-1===this.m_sign}isFinite(){return this.isNAN()?!1:0n!==this.m_rd.v}setNAN(){this.m_bNaN=
!0;this.m_rn.v=0n;this.m_rd.v=0n;this.m_power=0;this.m_bNormalized=!0;return this}setPositiveInf(){this.m_rn.v=1n;this.m_rd.v=0n;this.m_bNaN=!1;this.m_bNormalized=!0;this.m_sign=1;this.m_power=0;return this}setNegativeInf(){this.m_rn.v=1n;this.m_rd.v=0n;this.m_bNaN=!1;this.m_bNormalized=!0;this.m_sign=-1;this.m_power=0;return this}subThis(a){a.isNAN()&&this.setNAN();if(this.isPositiveInf()&&a.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&a.isNegativeInf())return this.setPositiveInf(),
this;if(this.isNegativeInf()&&a.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&a.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(a,!1)}thisSubAbs(a){n.geometryReleaseAssert(0);return this}mulThis(a){a.isNAN()&&this.setNAN();if(this.isNAN())return this;this.m_sign*=a.m_sign;if(0===this.m_sign)return this.setZero();this.m_rn.v*=a.m_rn.v;this.m_rd.v*=a.m_rd.v;this.m_power+=a.m_power;this.m_bNormalized=!1;this.normalizeThis();return this}mulDoubleThis(a){return this.mulThis(v.constructDouble(a))}thisMulInt64(a){n.geometryReleaseAssert(0);
return this}thisMulInt32(a){n.geometryReleaseAssert(0);return this}divThis(a){return this.mulThis(a.clone().invertThis())}divDoubleThis(a){return this.divThis(v.constructDouble(a))}addDoubleThis(a){return this.addThis(v.constructDouble(a))}subDoubleThis(a){return this.subThis(v.constructDouble(a))}mul(a){return this.clone().mulThis(a)}mulBigIntThis(a){return this.mulThis(v.constructInt64(a))}mulDouble(a){return this.clone().mulThis(v.constructDouble(a))}div(a){return this.clone().divThis(a)}divDouble(a){return this.clone().divDoubleThis(a)}add(a){return this.clone().addThis(a)}fmSubThis(a,
b){return this.subThis(a.clone().mulThis(b))}fmAddThis(a,b){return this.addThis(a.clone().mulThis(b))}addThis(a){a.isNAN()&&this.setNAN();if(this.isPositiveInf()&&a.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&a.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&a.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&a.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(a,!0)}addDouble(a){return this.clone().addThis(v.constructDouble(a))}sub(a){return this.clone().subThis(a)}subDouble(a){return this.clone().subThis(v.constructDouble(a))}isZero(){return 0===
this.m_sign}equals(a){return this.clone().subThis(a).isZero()}lt(a){return this.isNAN()||a.isNAN()||this.isPositiveInf()&&a.isPositiveInf()||this.isNegativeInf()&&a.isNegativeInf()||this.isPositiveInf()?!1:a.isPositiveInf()?!0:this.clone().sub(a).LZ()}absLessAbs(a){return this.abs().lt(a.abs())}gt(a){return this.clone().sub(a).GZ()}lte(a){return this.sub(a).LEZ()}gte(a){return this.sub(a).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(0n===this.m_rn.v)return this.setZero();let a=0,b;b=
4294967295n&this.m_rn.v;b>>=BigInt(a);a+=fa(BigInt.asUintN(32,b))-1;let c=0;b=4294967295n&this.m_rd.v;b>>=BigInt(c);c+=fa(BigInt.asUintN(32,b))-1;this.m_rn.v>>=BigInt(a);this.m_rd.v>>=BigInt(c);this.m_power+=a-c;this.m_bNormalized=!0;return this}negateThis(){if(this.isNAN())return this;this.m_sign*=-1;return this}negate(){return this.clone().negateThis()}invertThis(){if(this.isNAN())return this;if(this.isPositiveInf()||this.isNegativeInf())return this.setZero(),this;if(0n===this.m_rn.v)return this.setPositiveInf(),
this;this.m_rd=R(this.m_rn,this.m_rn=this.m_rd);this.m_power=-this.m_power;return this}limitPrecisionThis(a){if(0===a)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let b=Number(O(this.m_rn.v));b>a&&(this.m_rn.v>>=BigInt(b-a),this.m_power+=b-a);b=Number(O(this.m_rd.v));b>a&&(this.m_rd.v>>=BigInt(b-a),this.m_power-=b-a);return this}hiBitIndex(){return Math.max(Number(O(this.m_rn.v)),Number(O(this.m_rd.v)))}ldexp(a){return this.clone().ldexpThis(a)}ldexpThis(a){a&&
(this.m_bNormalized=!1,this.m_power+=a,this.normalizeThis());return this}LZ(){return this.isNAN()?!1:-1===this.m_sign}GZ(){return this.isNAN()?!1:1===this.m_sign}LEZ(){return this.isNAN()?!1:0>=this.m_sign}GEZ(){return this.isNAN()?!1:0<=this.m_sign}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(a,b){0n>a.m_sign&&n.throwOutOfRangeException("MP_value: sqrt(-1)");if(a.isZero())return a.clone();let c=52;for(var d=
2.220446049250313E-16;c<b;)2*c<=b?(d*=d,c*=2):(d*=2.220446049250313E-16,c+=52);c+=52;b=O(a.m_rn.v);var e=O(a.m_rd.v);b=a.m_power+Number(b-e);e=new v;if(200<Math.abs(b)){Math.abs(b)&1&&(b+=1);var g=v.constructAssign(a,53).ldexpThis(-b).value();e.setThis(a).ldexpThis(-b);n.geometryReleaseAssert(Number.isFinite(g))}else e.setThis(a),g=e.value(),n.geometryReleaseAssert(Number.isFinite(g)),b=0;g=Math.sqrt(g);a=v.constructDouble(g);const f=v.constructDouble(d);f.mulThis(a).ldexpThis(1);d=d*g*2;g=a.clone();
const h=new v;let k;for(let q=0;10>q;++q){g.mulThis(a);h.setThis(e).subThis(g).absThis();var l=h.value();k=1;if(.9>l)for(;l>d;)l*=l,++k;else k=4;if(h.lte(f))break;for(l=0;l<k;l++)g.setThis(a).divThis(e).invertThis().addThis(a).ldexpThis(-1).limitPrecisionThis(c),a.setThis(g)}return a.ldexpThis(b/2)}static cubicRoot(a,b){if(a.isZero())return a.clone();let c=52;for(var d=2.220446049250313E-16;c<b;)2*c<=b?(d*=d,c*=2):(d*=2.220446049250313E-16,c+=52);c+=52;b=Math.pow(Math.abs(a.value()),1/3);b=v.constructDouble(b);
const e=b.clone();e.sqrThis().mulDoubleThis(3).mulDoubleThis(d);e.limitPrecisionThis(32);a.LZ()&&b.negateThis();for(d=0;10>d;++d){var g=b.clone();g.sqrThis().mulThis(b);const f=g.clone();f.subThis(a);f.absThis().limitPrecisionThis(32);if(f.lte(e))break;f.setThis(a);f.ldexpThis(1);f.addThis(g);g=g.clone();g.ldexpThis(1);g.addThis(a);f.divThis(g);b.mulThis(f);b.limitPrecisionThis(c)}return b}isInTheRangeOfDouble(){n.geometryReleaseAssert(0);return!1}sign(){return this.m_sign}cosAndSin(a,b){n.geometryReleaseAssert(0)}static nan(){n.geometryReleaseAssert(0);
return new v}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(0n===this.m_rd.v)return 1===this.m_sign?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const a=-1===this.m_sign;var b=this.m_rn.v<<(0<=this.m_power?BigInt(this.m_power):0n);let c=this.m_rd.v<<(0>this.m_power?BigInt(-this.m_power):0n);var d=b/c;let e=Number(d);if(BigInt(e)!==d)return a?-e:e;if(b-=d*c){d=O(c)-1023n;0n<d&&(c>>=d,b=b<<52n>>d);let g=Number(b);Number.isFinite(g)||(g=Number(b>>52n),d=0n);0n<d&&
(g/=Math.pow(2,52));e+=g/Number(c)}return a?-e:e}signVal(){return 1===this.m_sign?1n:-1===this.m_sign?-1n:0n}opPlusMinus(a,b){const c=Math.min(this.m_power,a.m_power);if(this.m_power>c){var d=BigInt(this.m_power-c);var e=0n}else d=0n,e=BigInt(a.m_power-c);d=this.signVal()*this.m_rn.v*a.m_rd.v<<d;e=a.signVal()*a.m_rn.v*this.m_rd.v<<e;this.m_rn.v=b?d+e:d-e;this.m_rd.v*=a.m_rd.v;this.m_power=c;this.m_sign=1;0n>this.m_rn.v&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v);this.m_bNormalized=!1;this.normalizeThis();
return this}}v.s_sm=9223372036854775808n;v.s_em=9218868437227405312n;v.s_fm=4503599627370495n;v.s_emax=2047n;ea=v.constructInt32(1);const Ua=v.constructInt32(0);class w{static construct(a,b){return new w(a,b)}constructor(a,b){void 0===a?this.x=this.y=Number.NaN:(this.x=a,this.y=b)}clone(){return new w(this.x,this.y)}assign(a){this.setCoordsPoint2D(a)}setCoords(a,b){this.x=a;this.y=b;return this}setCoordsPoint2D(a){this.x=a.x;this.y=a.y}isEqualPoint2D(a,b){return void 0!==b?Math.abs(this.x-a.x)<=b&&
Math.abs(this.y-a.y)<=b:this.x===a.x&&this.y===a.y}isEqual(a,b,c){return void 0!==c?Math.abs(this.x-a)<=c&&Math.abs(this.y-b)<=c:this.x===a&&this.y===b}equalsPoint2D(a,b){return this.isEqualPoint2D(a,b)}setSub(a,b){this.x=a.x-b.x;this.y=a.y-b.y}addThis(a){this.x+=a.x;this.y+=a.y;return this}setAdd(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this}absoluteOther(a){}absolute(){n.geometryReleaseAssert(0);return this}setNegate(){this.x=-this.x;this.y=-this.y}setNegateOther(a){this.x=-a.x;this.y=-a.y}interpolateThis(a,
b){}interpolate(a,b,c){n.geometryReleaseAssert(0)}scaleAddThis(a,b){this.x=this.x*a+b.x;this.y=this.y*a+b.y}scaleAddOther(a,b,c){n.geometryReleaseAssert(0)}scaleOther(a,b){n.geometryReleaseAssert(0)}scale(a){this.x*=a;this.y*=a}compare(a){return this.y<a.y?-1:this.y>a.y?1:this.x<a.x?-1:this.x>a.x?1:0}compareX(a){return this.x<a.x?-1:this.x>a.x?1:this.y<a.y?-1:this.y>a.y?1:0}normalizeOther(a){n.geometryReleaseAssert(0)}normalize(){const a=this.length();a?(this.x/=a,this.y/=a):(this.x=1,this.y=0);return this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*
this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(a,b){n.geometryReleaseAssert(0);return{}}static average(a,b){const c=new w;if(0===b)return c.setNAN(),c;if(1===b)return c.assign(a[0]),c;const d=new T(a[0].x),e=new T(a[0].y);for(let g=1;g<b;g++)d.add(a[g].x),e.add(a[g].y),0===(g&255)&&(d.normalize(),e.normalize());c.x=d.getResult()/b;c.y=e.getResult()/b;return c}offset(a,b){const c=w.distance(a,b),d=w.construct(this.x,this.y);if(0===c)return w.distance(d,a);b=
b.clone();b.subThis(a);d.subThis(a);return d.crossProduct(b)/c}side(a,b){n.geometryReleaseAssert(0);return 0}static sqrDistance(a,b){const c=a.x-b.x;a=a.y-b.y;return c*c+a*a}static sqrDistanceCoords(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}static distance(a,b){return Math.sqrt(w.sqrDistance(a,b))}dotProduct(a){return this.x*a.x+this.y*a.y}dotProductAbs(a){return Math.abs(this.x*a.x)+Math.abs(this.y*a.y)}crossProduct(a){return this.x*a.y-this.y*a.x}crossProductAbs(a){n.geometryReleaseAssert(0);return 0}rotateDirect(a,
b){const c=this.x*b+this.y*a;this.x=this.x*a-this.y*b;this.y=c}rotateReverse(a,b){const c=-this.x*b+this.y*a;this.x=this.x*a+this.y*b;this.y=c}leftPerpendicularThis(){const a=this.x;this.x=-this.y;this.y=a}leftPerpendicularOther(a){const b=a.x;this.x=-a.y;this.y=b}rightPerpendicularThis(){const a=this.x;this.x=this.y;this.y=-a}rightPerpendicularOther(a){const b=a.x;this.x=a.y;this.y=-b}equals(a){return this.x===a.x&&this.y===a.y}notequals(a){return this.x!==a.x||this.y!==a.y}not(){return!this.x&&
!this.y}gt(a){return this.y>a.y||this.y===a.y&&this.x>a.x}gte(a){return!this.lt(a)}lt(a){return this.y<a.y||this.y===a.y&&this.x<a.x}lte(a){return!this.gt(a)}subThis(a){this.x-=a.x;this.y-=a.y;return this}divThis(a){this.x/=a;this.y/=a;return this}add(a){return new w(this.x+a.x,this.y+a.y)}sub(a){return new w(this.x-a.x,this.y-a.y)}negateThis(){this.x=-this.x;this.y=-this.y;return this}negate(){return new w(-this.x,-this.y)}mul(a){return new w(this.x*a,this.y*a)}mulThis(a){this.x*=a;this.y*=a;return this}divide(a){return new w(this.x/
a,this.y/a)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new w(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return 0===this.x&&0===this.y}norm(a){switch(a){case 0:a=Math.abs(this.x);const b=Math.abs(this.y),c=a-b;return 0<=c?a:0>=c?b:Number.NaN;case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:n.throwInvalidArgumentException("norm")}}getQuarter(){return w.getQuarterCoords(this.x,
this.y)}static getQuarterCoords(a,b){return 0<a?0<=b?1:4:0<b?2:0===a?4:3}static compareVectors(a,b){const c=a.getQuarter(),d=b.getQuarter();return d===c?w.orientationRobustImpl(w.construct(0,0),b,a,!0):c<d?-1:1}static compareVectorsOrigin(a,b,c){var d=b.sub(a),e=c.sub(a);d=d.getQuarter();e=e.getQuarter();return e===d?w.orientationRobustImpl(a,c,b,!0):d<e?-1:1}static orientationRobust(a,b,c){return w.orientationRobustImpl(a,b,c,!1)}static orientationRobustEx(a,b,c,d){if(a.equals(b)||c.equals(d))return 0;
var e=b.x-a.x,g=b.y-a.y,f=d.x-c.x;const h=d.y-c.y;var k=w.getQuarterCoords(e,g)-1;const l=w.getQuarterCoords(f,h)-1;k=w.d[k][l];if(0!==k)return k;e*=h;f*=g;g=4*K()*(Math.abs(e)+Math.abs(f));f=e-f;return Math.abs(f)>=g?0>f?-1:0<f?1:0:w.orientationRobustExMp(a,b,c,d)}static orientationRobustExMp(a,b,c,d){const e=v.constructDouble(b.x),g=v.constructDouble(d.x);e.subThis(v.constructDouble(a.x));g.subThis(v.constructDouble(c.x));b=v.constructDouble(b.y);d=v.constructDouble(d.y);b.subThis(v.constructDouble(a.y));
d.subThis(v.constructDouble(c.y));e.mulThis(d);b.mulThis(g);e.subThis(b);return e.LZ()?-1:e.GZ()?1:0}static orientationNonRobust(a,b,c){a=b.sub(a).crossProduct(c.sub(a));return 0>a?-1:0<a?1:0}static orientationRobustImpl(a,b,c,d){if(b.isEqualPoint2D(a)||c.isEqualPoint2D(a)||b.isEqualPoint2D(c))return 0;var e=b.x-a.x,g=b.y-a.y;const f=c.x-a.x,h=c.y-a.y;if(!d){d=w.getQuarterCoords(e,g)-1;var k=w.getQuarterCoords(f,h)-1;d=w.d[d][k];if(0!==d)return d}d=(Math.abs(e)+Math.abs(g)+Math.abs(f)+Math.abs(h))*
(Math.abs(b.x)+Math.abs(b.y)+Math.abs(c.x)+Math.abs(c.y))*8*K();k=e*h-g*f;return Math.abs(k)>d?0>k?-1:1:I(b.x,a.x)&&I(c.y,a.y)&&I(b.y,a.y)&&I(c.x,a.x)&&G(e,h)&&G(g,f)&&(e*=h,g*=f,I(e,g))?(a=e-g,0>a?-1:0<a?1:0):w.orientationRobustMp(a,b,c)}static orientationRobustMp(a,b,c){const d=v.constructDouble(b.x),e=v.constructDouble(c.x),g=v.constructDouble(a.x);d.subThis(g);e.subThis(g);c=v.constructDouble(c.y);b=v.constructDouble(b.y);a=v.constructDouble(a.y);c.subThis(a);b.subThis(a);d.mulThis(c);b.mulThis(e);
d.subThis(b);return d.LZ()?-1:d.GZ()?1:0}static inCircleRobust(a,b,c,d){var e=new y;const g=new y;e.set(a.x);e.subThis(d.x);g.set(a.y);g.subThis(d.y);var f=new y;const h=new y;f.set(b.x);f.subThis(d.x);h.set(b.y);h.subThis(d.y);var k=new y;const l=new y;k.set(c.x);k.subThis(d.x);l.set(c.y);l.subThis(d.y);var q=e.mulE(h).subE(g.mulE(f));const m=f.mulE(l).subE(h.mulE(k)),r=e.mulE(l).subE(g.mulE(k));e=e.mulE(e).addE(g.mulE(g));f=f.mulE(f).addE(h.mulE(h));k=k.mulE(k).addE(l.mulE(l));q=e.mulE(m).subE(f.mulE(r)).addE(k.mulE(q));
return q.isFuzzyZero()?w.inCircleRobustMp(a,b,c,d):(a=q.value(),0>a?-1:0<a?1:0)}static inCircleRobustMp(a,b,c,d){do{if(!I(a.x,d.x)||!I(a.y,d.y))break;if(!I(b.x,d.x)||!I(b.y,d.y))break;if(!I(c.x,d.x)||!I(c.y,d.y))break;var e=a.x-d.x,g=a.y-d.y,f=b.x-d.x,h=b.y-d.y,k=c.x-d.x,l=c.y-d.y;if(!G(e,h)||!G(g,f))break;if(!G(f,l)||!G(h,k))break;if(!G(e,l)||!G(g,k))break;if(!G(e,e)||!G(g,g))break;if(!G(f,f)||!G(h,h))break;if(!G(k,k)||!G(l,l))break;var q=e*h;const x=g*f;var m=f*l,r=h*k,z=e*l,u=g*k;e*=e;g*=g;f*=
f;h*=h;k*=k;l*=l;if(I(q,x)&&I(m,r)&&I(z,u)&&X(e,g)&&X(f,h)&&X(k,l)&&(q-=x,m-=r,z-=u,u=e+g,e=f+h,r=k+l,G(u,m)&&G(e,z)&&G(r,q)&&(u*=m,z*=e,e=r*q,I(u,z)&&(z=u-z,X(z,e)))))return c=z+e,0>c?-1:0<c?1:0}while(0);e=v.constructDouble(d.x);m=v.constructDouble(d.y);d=v.constructDouble(a.x);z=v.constructDouble(a.y);d.subThis(e);z.subThis(m);a=v.constructDouble(b.x);u=v.constructDouble(b.y);a.subThis(e);u.subThis(m);b=v.constructDouble(c.x);c=v.constructDouble(c.y);b.subThis(e);c.subThis(m);e=d.mul(u).sub(z.mul(a));
m=a.mul(c).sub(u.mul(b));r=d.mul(c).sub(z.mul(b));d=d.mul(d).add(z.mul(z));a=a.mul(a).add(u.mul(u));c=b.mul(b).add(c.mul(c));c=d.mul(m).sub(a.mul(r)).add(c.mul(e));return c.LZ()?-1:c.GZ()?1:0}static inCircleRobustMp3Point(a,b,c){var d=v.constructDouble(a.x);a=v.constructDouble(a.y);const e=v.constructDouble(b.x);b=v.constructDouble(b.y);const g=v.constructDouble(c.x);c=v.constructDouble(c.y);d=g.mul(g).add(c.mul(c)).sub(g.mul(d).add(c.mul(a)).add(g.mul(e)).add(c.mul(b))).add(d.mul(e).add(a.mul(b)));
return d.LZ()?-1:d.GZ()?1:0}static inCircleRobust3Point(a,b,c){var d=new y(a.x);const e=new y(a.y),g=new y(b.x),f=new y(b.y),h=new y(c.x),k=new y(c.y);d=h.mulE(h).addE(k.mulE(k)).subE(h.mulE(d).addE(k.mulE(e)).addE(h.mulE(g)).addE(k.mulE(f))).addE(d.mulE(g).addE(e.mulE(f)));return d.isFuzzyZero()?w.inCircleRobustMp3Point(a,b,c):(a=d.value(),0>a?-1:0<a?1:0)}static calculateCircleCenterFromThreePoints(a,b,c){if(a.equals(c)||a.equals(b)||c.equals(b))return w.getNAN();var d=new y(b.x);d.subThis(a.x);
var e=new y(b.y);e.subThis(a.y);var g=new y(c.x);g.subThis(a.x);var f=new y(c.y);f.subThis(a.y);var h=d.clone();h.mulThisE(f);var k=e.clone();k.mulThisE(g);h.subThisE(k);if(0===h.value())e=w.getNAN();else{h.mulThis(2);var l=d.clone();l.mulThisE(d);var q=e.clone();q.mulThisE(e);l=l.clone();l.addThisE(q);q=g.clone();q.mulThisE(g);k=f.clone();k.mulThisE(f);q=q.clone();q.addThisE(k);e=e.clone();e.mulThisE(q);k=f.clone();k.mulThisE(l);e.subThisE(k);e.divThisE(h);d=d.clone();d.mulThisE(q);k=g.clone();k.mulThisE(l);
d.subThisE(k);d.divThisE(h);g=w.construct(a.x-e.value(),a.y+d.value());h=a.sub(g).length();l=b.sub(g).length();f=c.sub(g).length();q=1E-15*(h+Math.abs(a.x)+Math.abs(b.x)+Math.abs(c.x)+Math.abs(a.y)+Math.abs(b.y)+Math.abs(c.y));e=Math.abs(h-l)<=q&&Math.abs(h-f)<=q&&e.eps()<q&&d.eps()<q?g:w.getNAN()}return e.isNAN()?(e=v.constructDouble(b.x),e.subDoubleThis(a.x),h=v.constructDouble(b.y),h.subDoubleThis(a.y),b=v.constructDouble(c.x),b.subDoubleThis(a.x),l=v.constructDouble(c.y),l.subDoubleThis(a.y),
c=e.clone(),c.mulThis(l),f=h.clone(),f.mulThis(b),c.subThis(f),c.isZero()?a=w.getNAN():(c.mulDouble(2),g=e.clone(),g.mulThis(e),d=h.clone(),d.mulThis(h),g=g.clone(),g.addThis(d),d=b.clone(),d.mulThis(b),f=l.clone(),f.mulThis(l),d=d.clone(),d.addThis(f),h=h.clone(),h.mulThis(d),f=l.clone(),f.mulThis(g),h.subThis(f),h.divThis(c),e=e.clone(),e.mulThis(d),f=b.clone(),f.mulThis(g),e.subThis(f),e.divThis(c),a=w.construct(a.x-h.value(),a.y+e.value())),a):e}static calculateAngle(a,b){return Math.atan2(a.crossProduct(b),
a.dotProduct(b))}static isBisectorRobust(a,b,c){n.geometryReleaseAssert(0);return!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(a){this.x=a}set 1(a){this.y=a}static compareZorder(a,b){var c=w.c_compare_zorder_xx[0>a.x?1:0]|w.c_compare_zorder_yy[0>a.y?1:0],d=w.c_compare_zorder_xx[0>b.x?1:0]|w.c_compare_zorder_yy[0>b.y?1:0];if(c===d){d=c=0;for(let k=0;2>k;++k){var e=a[k],g=b[k];var f=Da(e);var h=Da(g);f===h?(e=W(e),g=W(g),e^=g,g=0,e&18446744069414584320n&&(g=32,e>>=32n),
h=0,e&4294901760n&&(h+=16,e>>=16n),e&65280n&&(h+=8,e>>=8n),e&240n&&(h+=4,e>>=4n),e=h+Ka[Number(BigInt.asUintN(4,e))]+1,f-=53-(g+e)):f=f>h?f:h;f>c&&(c=f,d=k)}return a[d]<b[d]}return c<d}static lerp(a,b,c){const d=new w;va(a,b,c,d);return d}static getClosestCoordinate(a,b,c,d=!1){const e=w.getNAN();e.setSub(b,a);const g=e.sqrLength();if(0===g)return.5;if(b.isEqualPoint2D(c))return 1;b=w.getNAN();b.setSub(c,a);a=b.dotProduct(e)/g;d||(0>a?a=0:1<a&&(a=1));return a}static intersectLinesAtOnePoint(a,b,c,
d){n.geometryReleaseAssert(0);return new w(0,0)}toString(){return`[${this.x},${this.y}]`}}w.dimensions=2;w.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]];w.c_compare_zorder_xx=[2,0];w.c_compare_zorder_yy=[1,0];class D{constructor(a,b,c){a instanceof D?(this.data=a.data,this.N=a.N,this.M=a.M,a.data=null,a.N=0,a.M=0):(this.data=a,this.N=b,this.M=c)}assignMove(a){n.geometryReleaseAssert(0);return this}assignCopy(a){if(this===a)return this;n.geometryReleaseAssert(this.N*this.M===a.N*a.M);this.data.set(a.data);
this.N=a.N;this.M=a.M;return this}setZero(){this.data?.fill(0);return this}setIdentity(){for(let a=0;a<this.N;a++)for(let b=0;b<this.M;b++)this.setRowCol(a,b,a===b?1:0);return this}rows(){return this.N}cols(){return this.M}row(a){n.geometryReleaseAssert(0);return{}}set(a,b){this.data[a]=b;return this}setRowCol(a,b,c){this.data[a*this.M+b]=c;return this}at(a){return this.data[a]}atRowCol(a,b){return this.data[a*this.M+b]}mulScalar(a,b){n.geometryReleaseAssert(0)}mul(a,b){n.geometryReleaseAssert(this.M===
a.rows());n.geometryReleaseAssert(this.N===b.rows());n.geometryReleaseAssert(a.cols()===b.cols());if(b===this){var c=new Float64Array(this.N*this.M);c=new D(c,this.N,this.M);this.mul(a,c);b.assignCopy(c)}else if(b===a)c=new Float64Array(a.N*a.M),c=new D(c,a.N,a.M),this.mul(a,c),b.assignCopy(c);else{c=a.cols();for(let d=0;d<this.N;d++)for(let e=0;e<c;e++){let g=0;for(let f=0;f<this.M;f++)g+=this.atRowCol(d,f)*a.atRowCol(f,e);b.setRowCol(d,e,g)}}}mulTranspose(a,b){n.geometryReleaseAssert(this.M===a.cols());
n.geometryReleaseAssert(this.N===b.rows());n.geometryReleaseAssert(a.rows()===b.cols());if(b===this){var c=new Float64Array(this.N*this.M);c=new D(c,this.N,this.M);this.mulTranspose(a,c);b.assignCopy(c)}else if(b===a)c=new Float64Array(a.N*a.M),c=new D(c,a.N,a.M),this.mulTranspose(a,c),b.assignCopy(c);else{c=a.rows();for(let d=0;d<this.N;d++)for(let e=0;e<c;e++){let g=0;for(let f=0;f<this.M;f++)g+=this.atRowCol(d,f)*a.atRowCol(e,f);b.setRowCol(d,e,g)}}}mulLeft(a,b){n.geometryReleaseAssert(0)}mulLeftTranspose(a,
b){n.geometryReleaseAssert(0)}mulDiag(a,b){n.geometryReleaseAssert(this.M===a.N*a.M);n.geometryReleaseAssert(this.N===b.rows());n.geometryReleaseAssert(this.M===b.cols());if(b===this){var c=new Float64Array(this.N*this.M);c=new D(c,this.N,this.M);this.mulDiag(a,c);b.assignCopy(c)}else{c=this.M;for(let d=0;d<this.N;d++)for(let e=0;e<c;e++)b.setRowCol(d,e,this.atRowCol(d,e)*a.at(e))}}transposeInPlace(){if(this.N===this.M){for(var a=0;a<this.N;a++)for(let b=a+1;b<this.M;b++){const c=this.atRowCol(a,
b);this.setRowCol(a,b,this.atRowCol(b,a));this.setRowCol(b,a,c)}return this}a=new Float64Array(this.N*this.M);a=new D(a,this.N,this.M);a.assignCopy(this);this.M=R(this.N,this.N=this.M);a.transpose(this);return this}transpose(a){if(this===a)a.transposeInPlace();else{D.checkDims(a,this.M,this.N);for(let b=0;b<this.N;b++)for(let c=0;c<this.M;c++)a.setRowCol(c,b,this.atRowCol(b,c))}}add(a,b){}svd(a,b,c,d=!1){D.checkDims(a,this.N,this.M);D.checkDims(b,this.M,1);D.checkDims(c,this.M,this.M);if(d){n.geometryReleaseAssert(this.N===
this.M);if(!this.symmetricEigen(b,c))return!1;for(d=0;d<this.M;++d)0>b.at(d)&&b.set(d,0);a.assignCopy(c);return!0}var e=0;d=0;var g,f,h,k;let l,q;var m=0,r=0,z=0,u=this.M,x=this.N;a.assignCopy(this);var t=new Float64Array(u);t=new D(t,u,1);var C=(E,F)=>0<=F?Math.abs(E):-Math.abs(E),H=(E,F)=>{E=Math.abs(E);F=Math.abs(F);return E>F?(F/=E,E*Math.sqrt(F*F+1)):0<F?(E/=F,F*Math.sqrt(E*E+1)):0};for(var A=0;A<u;A++){e=A+1;t.set(A,r*m);m=h=r=0;if(A<x){for(f=A;f<x;f++)r+=Math.abs(a.atRowCol(f,A));if(r){for(m=
A;m<x;m++)a.setRowCol(m,A,a.atRowCol(m,A)/r),h+=a.atRowCol(m,A)*a.atRowCol(m,A);f=a.atRowCol(A,A);m=-C(Math.sqrt(h),f);var B=f*m-h;a.setRowCol(A,A,f-m);for(g=e;g<u;g++){h=0;for(f=A;f<x;f++)h+=a.atRowCol(f,A)*a.atRowCol(f,g);f=h/B;for(h=A;h<x;h++)a.setRowCol(h,g,a.atRowCol(h,g)+f*a.atRowCol(h,A))}for(h=A;h<x;h++)a.setRowCol(h,A,a.atRowCol(h,A)*r)}}b.set(A,r*m);m=h=r=0;if(A<x&&A!==u-1){for(f=e;f<u;f++)r+=Math.abs(a.atRowCol(A,f));if(r){for(m=e;m<u;m++)a.setRowCol(A,m,a.atRowCol(A,m)/r),h+=a.atRowCol(A,
m)*a.atRowCol(A,m);f=a.atRowCol(A,e);m=-C(Math.sqrt(h),f);B=f*m-h;a.setRowCol(A,e,f-m);for(h=e;h<u;h++)t.set(h,a.atRowCol(A,h)/B);for(f=e;f<x;f++){h=0;for(B=e;B<u;B++)h+=a.atRowCol(f,B)*a.atRowCol(A,B);for(B=e;B<u;B++)a.setRowCol(f,B,a.atRowCol(f,B)+h*t.at(B))}for(h=e;h<u;h++)a.setRowCol(A,h,a.atRowCol(A,h)*r)}}h=Math.abs(b.at(A))+Math.abs(t.at(A));z=h>z?h:z}for(f=u-1;0<=f;f--){if(f<u-1){if(m){for(h=e;h<u;h++)c.setRowCol(h,f,a.atRowCol(f,h)/a.atRowCol(f,e)/m);for(m=e;m<u;m++){h=0;for(r=e;r<u;r++)h+=
a.atRowCol(f,r)*c.atRowCol(r,m);for(r=e;r<u;r++)c.setRowCol(r,m,c.atRowCol(r,m)+h*c.atRowCol(r,f))}}for(;e<u;e++)c.setRowCol(f,e,0),c.setRowCol(e,f,0)}c.setRowCol(f,f,1);m=t.at(f);e=f}e=x<u?x:u;for(r=e-1;0<=r;r--){e=r+1;m=b.at(r);for(h=e;h<u;h++)a.setRowCol(r,h,0);if(m){m=1/m;for(B=e;B<u;B++){h=0;for(f=e;f<x;f++)h+=a.atRowCol(f,r)*a.atRowCol(f,B);f=h/a.atRowCol(r,r)*m;for(h=r;h<x;h++)a.setRowCol(h,B,a.atRowCol(h,B)+f*a.atRowCol(h,r))}for(e=r;e<x;e++)a.setRowCol(e,r,a.atRowCol(e,r)*m)}else for(e=r;e<
x;e++)a.setRowCol(e,r,0);a.setRowCol(r,r,a.atRowCol(r,r)+1)}for(r=u-1;0<=r;r--)for(A=1;;A++){m=1;for(e=r;0<=e;e--){d=e-1;if(Math.abs(t.at(e))+z===z){m=0;break}if(Math.abs(b.at(d))+z===z)break}if(m)for(g=0,h=1,k=e;k<=r;k++){f=h*t.at(k);t.set(k,t.at(k)*g);if(Math.abs(f)+z===z)break;m=b.at(k);B=H(f,m);b.set(k,B);B=1/B;g=m*B;h=-f*B;for(m=0;m<x;m++)l=a.atRowCol(m,d),q=a.atRowCol(m,k),a.setRowCol(m,d,l*g+q*h),a.setRowCol(m,k,q*g-l*h)}q=b.at(r);if(e===r){if(0>q)for(b.set(r,-q),e=0;e<u;e++)c.setRowCol(e,
r,-c.atRowCol(e,r));break}if(100===A)return!1;k=b.at(e);d=r-1;l=b.at(d);m=t.at(d);B=t.at(r);f=((l-q)*(l+q)+(m-B)*(m+B))/(2*B*l);m=H(f,1);f=((k-q)*(k+q)+B*(l/(f+C(m,f))-B))/k;g=h=1;for(let E=e;E<=d;E++){const F=E+1;m=t.at(F);l=b.at(F);B=h*m;m*=g;q=H(f,B);t.set(E,q);g=f/q;h=B/q;f=k*g+m*h;m=m*g-k*h;B=l*h;l*=g;for(let S=0;S<u;S++)k=c.atRowCol(S,E),q=c.atRowCol(S,F),c.setRowCol(S,E,k*g+q*h),c.setRowCol(S,F,q*g-k*h);q=H(f,B);b.set(E,q);q&&(q=1/q,g=f*q,h=B*q);f=g*m+h*l;k=g*l-h*m;for(m=0;m<x;m++)l=a.atRowCol(m,
E),q=a.atRowCol(m,F),a.setRowCol(m,E,l*g+q*h),a.setRowCol(m,F,q*g-l*h)}t.set(e,0);t.set(r,f);b.set(r,k)}d=new Float64Array(this.N);z=new Float64Array(this.M);d=new D(d,this.N,1);z=new D(z,this.M,1);u=1;do u*=3,u++;while(u<=this.M);do for(u/=3,u=Math.trunc(u),x=u;x<this.M;x++){t=b.at(x);for(C=0;C<this.N;C++)d.set(C,a.atRowCol(C,x));for(C=0;C<this.M;C++)z.set(C,c.atRowCol(C,x));for(C=x;b.at(C-u)<t;){b.set(C,b.at(C-u));for(H=0;H<this.N;H++)a.setRowCol(H,C,a.atRowCol(H,C-u));for(H=0;H<this.M;H++)c.setRowCol(H,
C,c.atRowCol(H,C-u));C-=u;if(C<u)break}b.set(C,t);for(t=0;t<this.N;t++)a.setRowCol(t,C,d.at(t));for(t=0;t<this.M;t++)c.setRowCol(t,C,z.at(t))}while(1<u);for(b=0;b<this.M;b++){d=0;for(z=0;z<this.N;z++)0>a.atRowCol(z,b)&&d++;for(z=0;z<this.M;z++)0>c.atRowCol(z,b)&&d++;if(d>Math.trunc((this.N+this.M)/2)){for(d=0;d<this.N;d++)a.setRowCol(d,b,-a.atRowCol(d,b));for(d=0;d<this.M;d++)c.setRowCol(d,b,-c.atRowCol(d,b))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let a=0;a<this.N;a++)for(let b=a+
1;b<this.M;b++)if(this.atRowCol(a,b)!==this.atRowCol(b,a))return!1;return!0}isZero(){n.geometryReleaseAssert(0);return!1}isIdentity(){n.geometryReleaseAssert(0);return!1}equals(a,b){void 0!==b&&n.geometryReleaseAssert(0);if(this.N!==a.N||this.M!==a.M)return!1;for(b=0;b<this.N*this.M;b++)if(this.data[b]!==a.data[b])return!1;return!0}maxElement(){n.geometryReleaseAssert(0);return 0}min_element(){n.geometryReleaseAssert(0);return 0}determinant(){n.geometryReleaseAssert(this.N===this.M);if(1===this.N)return this.data[0];
if(2===this.N)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(3===this.N)return this.atRowCol(0,0)*(this.atRowCol(1,1)*this.atRowCol(2,2)-this.atRowCol(1,2)*this.atRowCol(2,1))-this.atRowCol(0,1)*(this.atRowCol(1,0)*this.atRowCol(2,2)-this.atRowCol(2,0)*this.atRowCol(1,2))+this.atRowCol(0,2)*(this.atRowCol(1,0)*this.atRowCol(2,1)-this.atRowCol(1,1)*this.atRowCol(2,0));var a=new Float64Array(this.N*this.N);a=new D(a,this.N,this.N);const b=new Float64Array(this.N);if(!this.luDecomposition(a,
b))return 0;let c=1;for(let d=0;d<this.N;d++)c*=a.atRowCol(d,d),b[d]!==d&&(c=-c);return c}submatrix(a,b,c){n.geometryReleaseAssert(0)}inverse(a){n.geometryReleaseAssert(0)}pseudoInverse(a,b=!1,c=2.220446049250313E-16){a.setZero();if(1===this.N&&1===this.M)return 0!==this.atRowCol(0,0)?a.setRowCol(0,0,1/this.atRowCol(0,0)):a.setRowCol(0,0,0),!0;if(2===this.N&&2===this.M){var d=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),e=1E-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,
1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(d)>e)return a.setRowCol(0,0,this.atRowCol(1,1)/d),a.setRowCol(0,1,-this.atRowCol(0,1)/d),a.setRowCol(1,0,-this.atRowCol(1,0)/d),a.setRowCol(1,1,this.atRowCol(0,0)/d),!0}d=new Float64Array(this.N*this.M);d=new D(d,this.N,this.M);e=new Float64Array(this.M);e=new D(e,this.M,1);var g=new Float64Array(this.M*this.M);g=new D(g,this.M,this.M);if(!this.svd(d,e,g,b))return!1;b=Math.max(this.N,this.M);c=c*Math.abs(e.at(0))*b;for(b=0;b<this.M;b++)e.at(b)>
c?e.set(b,1/e.at(b)):e.set(b,0);g.mulDiag(e,a);a.mulTranspose(d,a);return!0}luDecomposition(a,b){n.geometryReleaseAssert(0);return!1}symmetricEigen(a,b){n.geometryReleaseAssert(this.rows()===this.cols());n.geometryReleaseAssert(this.rows()===a.rows());n.geometryReleaseAssert(b.rows()===b.cols()&&b.rows()===this.rows());n.geometryReleaseAssert(this.isSymmetric());var c=new Float64Array(this.N*this.M);c=new D(c,this.N,this.M);c.assignCopy(this);const d=100/Number.EPSILON,e=this.rows();var g=new Float64Array(e),
f=new Float64Array(e);const h=new D(g,e,1);g=new D(f,e,1);for(f=0;f<e;f++)h.set(f,c.atRowCol(f,f)),a.set(f,c.atRowCol(f,f)),g.set(f,0);b.setIdentity();f=()=>{b.transposeInPlace();let u=1;do u*=3,u++;while(u<=e);do{u/=3;u=Math.trunc(u);for(let C=u;C<e;C++){var x=a.at(C);const H=Math.abs(x);for(var t=0;t<this.M;t++)h.set(t,b.atRowCol(t,C));for(t=C;Math.abs(a.at(t-u))<H;){a.set(t,a.at(t-u));for(let A=0;A<this.M;A++)b.setRowCol(A,t,b.atRowCol(A,t-u));t-=u;if(t<u)break}if(t!==C)for(a.set(t,x),x=0;x<this.M;x++)b.setRowCol(x,
t,h.at(x))}}while(1<u)};for(let u=1;;u++){var k=0;for(var l=1;l<e;l++)for(var q=0;q<l;q++)k+=Math.abs(c.atRowCol(l,q));if(0===k)return f(),!0;k=4>u?.2*k/(e*e):0;for(l=0;l<e;l++)for(q=l+1;q<e;q++){var m=d*Math.abs(c.atRowCol(q,l));if(4<u&&m<=Math.abs(a.at(l))&&m<=Math.abs(a.at(q)))c.setRowCol(q,l,0);else if(Math.abs(c.atRowCol(q,l))>k){let x=a.at(q)-a.at(l);if(m<Math.abs(x))m=c.atRowCol(q,l)/x;else{var r=.5*x/c.atRowCol(q,l);m=1/(Math.abs(r)+Math.sqrt(1+r*r));0>r&&(m=-m)}var z=1/Math.sqrt(1+m*m);r=
m*z;z=r/(1+z);x=m*c.atRowCol(q,l);g.set(l,g.at(l)-x);g.set(q,g.at(q)+x);a.set(l,a.at(l)-x);a.set(q,a.at(q)+x);c.setRowCol(q,l,0);let t=0;for(;t<l;t++)m=c.atRowCol(l,t),x=c.atRowCol(q,t),c.setRowCol(l,t,m-r*(x+m*z)),c.setRowCol(q,t,x+r*(m-x*z));for(t++;t<q;t++)m=c.atRowCol(t,l),x=c.atRowCol(q,t),c.setRowCol(t,l,m-r*(x+m*z)),c.setRowCol(q,t,x+r*(m-x*z));for(t++;t<e;t++)m=c.atRowCol(t,l),x=c.atRowCol(t,q),c.setRowCol(t,l,m-r*(x+m*z)),c.setRowCol(t,q,x+r*(m-x*z));for(t=0;t<e;t++)m=b.atRowCol(l,t),x=b.atRowCol(q,
t),b.setRowCol(l,t,m-r*(x+m*z)),b.setRowCol(q,t,x+r*(m-x*z))}}for(k=0;k<e;k++)h.set(k,h.at(k)+g.at(k)),a.set(k,h.at(k)),g.set(k,0)}}static checkDims(a,b,c){n.geometryReleaseAssert(a.rows()===b&&a.cols()===c)}}class L extends D{constructor(a){if(a.copy){var b=new Float64Array(a.copy.N*a.copy.M);super(b,a.copy.N,a.copy.M);this.buffer=b;this.assignCopy(a.copy)}else b=new Float64Array(a.NN*a.MM),super(b,a.NN,a.MM),this.buffer=b,a.initializerList&&M(this.buffer,a.initializerList,0,0,a.initializerList.length)}assignCopy(a){if(this===
a)return this;super.assignCopy(a);return this}}class Q{constructor(a){void 0===a?this.setIdentity():a instanceof Q?this.set(a):this.setScale(a)}set(a){this.xx=a.xx;this.xy=a.xy;this.xd=a.xd;this.yx=a.yx;this.yy=a.yy;this.yd=a.yd;return this}clone(){return(new Q).set(this)}setZero(){this.yd=this.xd=this.yx=this.xy=this.yy=this.xx=0}isEqual(a){return this===a||this.xx===a.xx&&this.xy===a.xy&&this.xd===a.xd&&this.yx===a.yx&&this.yy===a.yy&&this.yd===a.yd}transformInPlace(a){const b=this.yx*a.x+this.yy*
a.y+this.yd;a.x=this.xx*a.x+this.xy*a.y+this.xd;a.y=b}transform(a){a=a.clone();this.transformInPlace(a);return a}queryTransform(a,b){b.setCoords(this.xx*a.x+this.xy*a.y+this.xd,this.yx*a.x+this.yy*a.y+this.yd)}transformEnvInPlace(a){if(!a.isEmpty()){var b=oa(w,4);a.queryCorners(b);this.transformPoints2D(b,4,b);a.setFromPoints(b,4)}}queryTransformEnv(a,b){n.geometryReleaseAssert(0)}transformInterleaved(a,b,c){n.geometryReleaseAssert(0)}transformPoints2D(a,b,c){for(let d=0;d<b;++d)this.queryTransform(a[d],
c[d])}transformInterleavedPoints(a,b,c){b*=2;const d=w.getNAN();for(let e=0;e<b;e+=2)d.x=a[e],d.y=a[e+1],this.transformInPlace(d),c[e]=d.x,c[e+1]=d.y}multiply(a){Q.st_multiply(this,a,this);return this}mulLeft(a){n.geometryReleaseAssert(0);return this}static st_multiply(a,b,c){const d=a.xy*b.xx+a.yy*b.xy,e=a.xd*b.xx+a.yd*b.xy+b.xd,g=a.xx*b.yx+a.yx*b.yy,f=a.xy*b.yx+a.yy*b.yy,h=a.xd*b.yx+a.yd*b.yy+b.yd;c.xx=a.xx*b.xx+a.yx*b.xy;c.xy=d;c.xd=e;c.yx=g;c.yy=f;c.yd=h}getCoefficients(a){n.geometryReleaseAssert(0)}setCoefficients(a){this.xx=
a[0];this.xy=a[1];this.xd=a[2];this.yx=a[3];this.yy=a[4];this.yd=a[5]}copyTo(a){n.geometryReleaseAssert(0)}initializeFromRect(a,b){a.isEmpty()||b.isEmpty()||!a.width()||!a.height()?this.setZero():(this.xy=this.yx=0,this.xx=b.width()/a.width(),this.yy=b.height()/a.height(),this.xd=b.xmin-a.xmin*this.xx,this.yd=b.ymin-a.ymin*this.yy)}initializeFromRectIsotropic(a,b){a.isEmpty()||!a.width()||!a.height()||b.isEmpty()?this.setZero():(this.xy=this.yx=0,this.xx=b.width()/a.width(),this.yy=b.height()/a.height(),
this.xx>this.yy?this.xx=this.yy:this.yy=this.xx,b=b.getCenter(),a=a.getCenter(),this.xd=b.x-a.x*this.xx,this.yd=b.y-a.y*this.yy)}initializeFromCurveParameters(a,b,c){n.geometryReleaseAssert(0)}initializeFromTwoPointsArray(a,b){if(a[0].equals(b[0])&&a[1].equals(b[1]))this.setIdentity();else{if(a[0].equals(a[1])){if(b[0].equals(b[1])){this.setShift(b[0].sub(a[0]));return}n.throwInvalidArgumentException("")}if(!a[0].equals(a[1])&&b[0].equals(b[1]))this.setZero(),this.shift(b[0]);else{this.setShiftCoords(-a[0].x,
-a[0].y);var c=w.distance(a[0],a[1]),d=w.distance(b[0],b[1]),e=d/c;this.scale(e,e);a=a[1].sub(a[0]);a.divThis(c);c=b[1].sub(b[0]);c.divThis(d);d=a.crossProduct(c);c=a.dotProduct(c);this.rotate(c,d);this.shiftCoords(b[0].x,b[0].y)}}}initializeFromTwoPoints(a,b,c,d){this.initializeFromTwoPointsArray([a,b],[c,d])}transformSizeInPlace(a){n.geometryReleaseAssert(0)}transformSize(a,b){n.geometryReleaseAssert(0)}transformTol(a){n.geometryReleaseAssert(0);return 0}transformWithoutTranslateArray(a,b,c){for(let d=
0;d<b;++d)this.transformWithoutTranslate(a[d],c[d])}transformWithoutTranslateInPlace(a){a.setCoords(this.xx*a.x+this.xy*a.y,this.yx*a.x+this.yy*a.y)}transformWithoutTranslate(a,b){b.setCoords(this.xx*a.x+this.xy*a.y,this.yx*a.x+this.yy*a.y)}setIdentity(){this.xx=1;this.yx=this.xd=this.xy=0;this.yy=1;this.yd=0}isIdentity(){return 1===this.xx&&1===this.yy&&!this.xy&&!this.xd&&!this.yx&&!this.yd}isIdentityTol(a){a*=a;return N(this.xd)+N(this.yd)>a||N(this.xy+this.xd)+N(this.yy+this.yd-1)>a||N(this.xx+
this.xd-1)+N(this.yx+this.yd)>a?!1:!0}isReflective(){return 0>this.xx*this.yy-this.yx*this.xy}isUniform(a){const b=this.xx*this.xx+this.yx*this.yx,c=this.xy*this.xy+this.yy*this.yy;a*=b+c;return Math.abs(b-c)<=a&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=a}isUniformNoRotation(){return 0!==this.xx&&Math.abs(this.xx)===Math.abs(this.yy)&&0===this.xy&&0===this.yx}isTranslate(){n.geometryReleaseAssert(0);return!1}isTranslateTol(a){n.geometryReleaseAssert(0);return!1}isOrthonormal(a){n.geometryReleaseAssert(0);
return!1}isDegenerate(a){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*a*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return 0===this.xx&&0===this.yy&&0===this.xy&&0===this.yx&&0===this.xd&&0===this.yd}isScaleAndTranslate(a){n.geometryReleaseAssert(0);return!1}setTranslate(a,b){this.xx=1;this.xy=0;this.xd=a;this.yx=0;this.yy=1;this.yd=b;return this}setShiftCoords(a,b){this.xx=1;this.xy=0;this.xd=a;this.yx=0;this.yy=1;this.yd=b;return this}setShift(a){this.xx=1;this.xy=0;this.xd=
a.x;this.yx=0;this.yy=1;this.yd=a.y;return this}setScaleCoords(a,b){this.xx=a;this.yx=this.xd=this.xy=0;this.yy=b;this.yd=0;return this}setScale(a){this.setScaleCoords(a,a);return this}setFlipX(a,b){this.xx=-1;this.xy=0;this.xd=a+b;this.yx=0;this.yy=1;this.yd=0;return this}setFlipY(a,b){this.xx=1;this.yx=this.xd=this.xy=0;this.yy=-1;this.yd=a+b;return this}setShear(a,b){n.geometryReleaseAssert(0);return this}scale(a,b){this.xx*=a;this.xy*=a;this.xd*=a;this.yx*=b;this.yy*=b;this.yd*=b;return this}setRotateAngle(a){return this.setRotate(Math.cos(a),
Math.sin(a))}setRotate(a,b){this.xx=a;this.xy=-b;this.xd=0;this.yx=b;this.yy=a;this.yd=0;return this}setRotateAngleAbout(a,b){return this.setRotateAbout(Math.cos(a),Math.sin(a),b)}setRotateAbout(a,b,c){this.setTranslate(-c.x,-c.y);this.rotate(a,b);return this.translate(c.x,c.y)}setSwapCoordinates(){this.xx=0;this.xy=1;this.xd=0;this.yx=1;this.yd=this.yy=0;return this}setRotateCw90(){this.xx=0;this.xy=1;this.xd=0;this.yx=-1;this.yd=this.yy=0;return this}setRotateCcw90(){this.xx=0;this.xy=-1;this.xd=
0;this.yx=1;this.yd=this.yy=0;return this}shiftCoords(a,b){this.xd+=a;this.yd+=b;return this}shift(a){this.xd+=a.x;this.yd+=a.y;return this}translate(a,b){this.xd+=a;this.yd+=b;return this}flipX(a,b){this.xx=-this.xx;this.xy=-this.xy;this.xd=a+b-this.xd;return this}flipY(a,b){this.yx=-this.yx;this.yy=-this.yy;this.yd=a+b-this.yd;return this}shear(a,b){n.geometryReleaseAssert(0);return this}rotateAngle(a){const b=new Q;b.setRotateAngle(a);return this.multiply(b)}rotate(a,b){const c=new Q;c.setRotate(a,
b);return this.multiply(c)}rotateAbout(a,b,c){this.translate(-c.x,-c.y);this.rotate(a,b);return this.translate(c.x,c.y)}rotateAngleAbout(a,b){return this.rotateAbout(Math.cos(a),Math.sin(a),b)}setInvert(a){this.set(a);return this.invertThis()}invertThis(){let a=this.xx*this.yy-this.xy*this.yx;if(0===a)return this.setZero(),this;a=1/a;const b=(this.xd*this.yx-this.xx*this.yd)*a,c=this.yy*a,d=-this.xy*a,e=-this.yx*a,g=this.xx*a;this.xd=(this.xy*this.yd-this.xd*this.yy)*a;this.yd=b;this.xx=c;this.yy=
g;this.xy=d;this.yx=e;return this}invertPrecise(a){this.set(a);return this.invertPreciseThis()}invertPreciseThis(){var a=v.constructDouble(this.xy),b=v.constructDouble(this.xx),c=b.mulDouble(this.yy).sub(a.mulDouble(this.yx));if(c.isZero())return this.setZero(),this;c=c.clone();c.invertThis();var d=v.constructDouble(this.xd);a=a.mulDouble(this.yd).sub(d.mulDouble(this.yy)).mul(c).toDouble();b=d.mulDouble(this.yx).sub(b.mulDouble(this.yd)).mul(c).toDouble();d=c.mulDouble(this.yy).toDouble();const e=
c.mulDouble(-this.xy).toDouble(),g=c.mulDouble(-this.yx).toDouble();c=c.mulDouble(this.xx).toDouble();this.xd=a;this.yd=b;this.xx=d;this.yy=c;this.xy=e;this.yx=g;return this}extractScaleTransform(a,b){n.geometryReleaseAssert(0)}setFromTwoTriangles(a,b){var c=!0;for(var d=0;3>d;++d)c=c&&a[d].equals(b[d]);if(c)return this.setIdentity(),!0;c=new w;c.setSub(a[0],a[1]);d=new w;d.setSub(a[0],a[2]);const e=new w;e.setSub(b[0],b[1]);const g=new w;g.setSub(b[0],b[2]);let f=c.x*d.y-c.y*d.x;if(Math.abs(f)>4*
Number.EPSILON*(Math.abs(c.x*d.y)+Math.abs(d.x*c.y)))f=1/f,this.xx=(e.x*d.y-c.y*g.x)*f,this.xy=(c.x*g.x-e.x*d.x)*f,this.yx=(e.y*d.y-c.y*g.y)*f,this.yy=(c.x*g.y-e.y*d.x)*f;else return this.setZero(),!1;this.xd=b[0].x-(this.xx*a[0].x+this.xy*a[0].y);this.yd=b[0].y-(this.yx*a[0].x+this.yy*a[0].y);return!0}initializeFromControlPoints(a,b,c,d,e=null){if(0===b)this.setIdentity(),e&&e.setIdentity();else if(1===b)this.setShift(d[0].sub(c[0])),e&&e.setShift(c[0].sub(d[0]));else if(3>b&&(a=1),4===a&&2<b){a=
w.average(c,b);var g=w.average(d,b),f=new L({NN:2,MM:2});f.setZero();var h=new L({NN:2,MM:2});h.setZero();for(var k=0;k<b;++k)f.setRowCol(0,0,f.atRowCol(0,0)+(c[k].x-a.x)*(c[k].x-a.x)),f.setRowCol(0,1,f.atRowCol(0,1)+(c[k].x-a.x)*(c[k].y-a.y)),f.setRowCol(1,1,f.atRowCol(1,1)+(c[k].y-a.y)*(c[k].y-a.y)),h.setRowCol(0,0,h.atRowCol(0,0)+(d[k].x-g.x)*(c[k].x-a.x)),h.setRowCol(0,1,h.atRowCol(0,1)+(d[k].x-g.x)*(c[k].y-a.y)),h.setRowCol(1,0,h.atRowCol(1,0)+(d[k].y-g.y)*(c[k].x-a.x)),h.setRowCol(1,1,h.atRowCol(1,
1)+(d[k].y-g.y)*(c[k].y-a.y));f.setRowCol(1,0,f.atRowCol(0,1));b=new L({NN:2,MM:2});f.pseudoInverse(b,!0)||n.throwMathSingularityException("Failed to compute pseudo inverse");h.mul(b,h);ra(this,h);c=a.clone();this.transformInPlace(c);this.xd=g.x-c.x;this.yd=g.y-c.y;e&&(h.pseudoInverse(b,!1)||n.throwMathSingularityException("Failed to compute pseudo inverse"),ra(e,b),e.transformInPlace(g),e.xd=a.x-g.x,e.yd=a.y-g.y)}else{h=a;n.geometryReleaseAssert(1===h||0===h||2===h||3===h);this.setIdentity();a=w.average(c,
b);g=w.average(d,b);n.geometryReleaseAssert(h<V.length&&0<h);if(V[h]&8){k=new L({NN:2,MM:2});k.setZero();for(f=0;f<b;++f)k.setRowCol(0,0,k.atRowCol(0,0)+(d[f].x-g.x)*(c[f].x-a.x)),k.setRowCol(1,0,k.atRowCol(1,0)+(d[f].x-g.x)*(c[f].y-a.y)),k.setRowCol(0,1,k.atRowCol(0,1)+(d[f].y-g.y)*(c[f].x-a.x)),k.setRowCol(1,1,k.atRowCol(1,1)+(d[f].y-g.y)*(c[f].y-a.y));var l=new L({NN:2,MM:2});const q=new L({NN:2,MM:1});f=new L({NN:2,MM:2});k.svd(l,q,f)||n.throwMathSingularityException("Failed to compute svd");
k=new L({NN:2,MM:2});l.transpose(k);l=new L({NN:2,MM:2});f.mul(k,l);0===(V[h]&32)&&0>l.determinant()&&(k.setRowCol(1,0,-k.atRowCol(1,0)),k.setRowCol(1,1,-k.atRowCol(1,1)),f.mul(k,l));f=new Q;ra(f,l);this.set(f)}if(0!==(V[h]&2)){f=h=0;for(k=0;k<b;++k)l=c[k].sub(a),h+=l.sqrLength(),this.transformInPlace(l),f+=l.dotProduct(d[k].sub(g));0===h?0===f?this.setIdentity():this.setZero():(b=f/h,this.scale(b,b))}else n.geometryReleaseAssert(0===(V[h]&4));b=a.clone();this.transformInPlace(b);this.xd=g.x-b.x;
this.yd=g.y-b.y;e&&(e.set(this),e.invertThis(),e.isZero()&&(e.xd=a.x,e.yd=a.y))}}calculateErrors(a,b,c,d){n.geometryReleaseAssert(0<a&&null!==b&&null!==c);let e=0;for(let f=0;f<a;++f){var g=this.transform(b[f]);g=w.sqrDistance(c[f],g);e+=g;d&&(d[f]=Math.sqrt(g))}return Math.sqrt(e/a)}}const V=[43,11,41,9,61];p.ECoordinate=y;p.Envelope1D=P;p.KahanSummator=T;p.MPValue=v;p.Point2D=w;p.SimpleDisposableArray=Qa;p.SmallMatrix=Ra;p.Transformation2D=Q;p.assignObjectArray=function(a,b,c){for(let d=0;d<c;++d)a[d].assign(b[d]);
return c};p.atanhUOverU=function(a){let b;if(0===a)b=1;else if(.01<Math.abs(a))b=Math.atanh(a)/a;else{b=0;a*=a;var c=Math.trunc(-36.841361487904734/Math.log(a)+2.5);for(let d=2*c-1;1<d;d-=2)c=1/d,b=(b+c)*a;b+=1}return b};p.cloneObjectArray=function(a,b){a=a.slice(0,b);for(let c=0;c<b;++c)a[c]=a[c].clone();return a};p.compareNoNANs=function(a,b){return a<b?-1:a>b?1:0};p.compareWithNANs=function(a,b){if(a<b)return-1;if(a>b)return 1;if(a===b)return 0;a=Number.isNaN(a);b=Number.isNaN(b);return a<b?-1:
a>b?1:0};p.compensatedDot=function(a,b,c,d){const e=[0];a=Z(a,c,e);c=[0];b=Z(b,d,c);d=[0];return aa(a,b,d)+(e[0]+c[0]+d[0])};p.completeEllipticE=ma;p.coordinateArrayToPoint2DArray=function(a){const b=oa(w,a.length);for(let c=0,d=a.length;c<d;++c)b[c].setCoords(a[c][0],a[c][1]);return b};p.copySign=function(a,b){a=Math.abs(a);return 0<=b?a:-a};p.cube=function(a){return a*a*a};p.dilogarithmEzOverE=function(a,b){const c=b*a;if(.1>Math.abs(b)){b=0;for(let d=60;1<=d;d--)b*=c,b+=1/d/d;return b*a}return ha(c)/
b};p.doubleEps=K;p.ellipticE=ya;p.fma=function(a,b,c){b=Z(a,b,Fa);a=Fa[0];c=aa(b,c,Ga);c=aa(c,a,Ha);return aa(c,Ga[0]+Ha[0],Pa)};p.fmod=function(a,b){return a%b};p.geographyEpsFactor=function(){return 100*Number.EPSILON};p.geomEpsFactor=qa;p.geometry2Pi=Ia;p.geometryHalfPi=J;p.geometryPi=ba;p.goldenRatio=function(){return.38196601125010515};p.halfPi=function(){return J};p.hashCombine=da;p.hashCombineInt64=function(a,b){var c=Number;let d=b;b=1099511628211n*(14695981039346656037n^d&255n);d>>=8n;b=
1099511628211n*(b^d&255n);d>>=8n;b=1099511628211n*(b^d&255n);d>>=8n;b=1099511628211n*(b^d&255n);d>>=8n;b=1099511628211n*(b^d&255n);d>>=8n;return da(a,c(1099511628211n*(1099511628211n*(b^d&255n)^d>>8n&255n)&Sa))};p.hashForClustering=Ea;p.hashForClustering2=function(a,b){return da(a,Ea(b))};p.hashInt32=function(a){let b=a;a=16777619*(2166136261^b&255);b>>=8;a=16777619*(a^b&255);b>>=8;return 16777619*(16777619*(a^b&255)^b>>8&255)&2147483647};p.hashString=function(a){let b=2166136261;for(let c=0,d=a.length;c<
d;++c)b=16777619*(b^a.charCodeAt(c));return b&2147483647};p.indexTypeMax=function(){return 2147483647};p.intMax=function(){return 2147483647};p.interpolate=function(a,b,c,d,e){if(0===a)return 0===d?b:1===d?c:e;if(1===a)return 0===d?b:1===d?c:Y(b,c,d);2===a&&n.throwNotImplementedException("angular interpolation");n.throwNotImplementedException("")};p.interpolateArray=function(a,b,c,d,e,g,f,h){if(0===a)for(a=0;a<g;++a)d[a+e]=0===f?b[a]:1===f?c[a]:h;else if(1===a)if(0===f)M(d,b,e,0,g);else if(1===f)M(d,
c,e,0,g);else for(h=0;h<g;++h)d[h+e]=Y(b[h],c[h],f);else if(2===a)if(0===f)M(d,b,e,0,g);else if(1===f)M(d,c,e,0,g);else{h=0;for(let k=0,l=e;k<g;++k,++l)d[l]=Y(b[k],c[k],f),h+=d[l]*d[l];if(0<h)for(h=Math.sqrt(h),b=e;b<e+g;++b)d[b]/=h;else{for(b=e;b<e+g;++b)d[b]=0;d[e]=1}}else n.throwNotImplementedException("")};p.inverseEllipticE=function(a,b,c=Number.NaN){if(0===a)return 0;let d=1;var e=a;0>a&&(e=-e,d=-1);c=Number.isNaN(c)?ma(b):c;a=Math.floor(e/c);e=a&1?(a+1)*c-e:e-a*c;if(0>=e)b=0;else if(e>=c)b=
J;else a:if(0===b)b=e;else if(1===b)b=Math.asin(e);else{var g=0,f=!0;if(.2>e){g=e*e;f=e*(1+g*b*(1/6+g*((13*b-4)/120+(16-284*b+493*b*b)/5040*g)));var h=Math.abs(b*(-64+4944*b-31224*b*b+37369*b*b*b)/362880*Math.pow(e,9));if(h<Math.abs(f)*K()){b=f;break a}g=f;f=h>.1*f}f&&(g=1-b,f=1-e/c,f=Math.sqrt(f*f+g*g),g=Math.atan2(g,e+K()),g=J+Math.sqrt(f)*(g-J));f=0;for(let l=0;7>l;l++){f=ya(g,b,c);h=Math.sin(g);var k=Math.cos(g);g-=(f-e)/Math.sqrt(.999>h?1-b*h*h:1-b+b*k*k);if(0<l&&Math.abs(f-e)<=4*K()*e)break}b=
g}b=a&1?J*(a+1)-b:b+J*a;return d*b};p.isEqualNonIEEE=pa;p.isEqualNonIEEETol=function(a,b,c){return a===b||Math.abs(a-b)<=c||Number.isNaN(a)&&Number.isNaN(b)};p.isOneOf=function(a,b,c){return a===b||a===c};p.isOnlyProperty=function(a,b){return b in a&&1===Object.getOwnPropertyNames(a).length};p.lerp=Y;p.lerpHi=function(a,b,c){return b-(b-a)*(1-c)};p.lerpHiE=function(a,b,c){return b.subE(b.subE(a).mulE(U.subE(c)))};p.lerpHiPointE=function(a,b,c,d,e){e[0]=c[0].subE(c[0].subE(b[0]).mulE(U.subE(d)));e[1]=
c[1].subE(c[1].subE(b[1]).mulE(U.subE(d)))};p.lerpLo=function(a,b,c){return a+(b-a)*c};p.lerpLoE=function(a,b,c){return a.addE(b.subE(a).mulE(c))};p.lerpLoPointE=function(a,b,c,d,e){e[0]=b[0].addE(c[0].subE(b[0]).mulE(d));e[1]=b[1].addE(c[1].subE(b[1]).mulE(d))};p.lerpPoint=function(a,b,c,d,e){.5>=d?ta(a,b,c,d,e):ua(a,b,c,d,e)};p.lerpPoint2D=va;p.lerpPoint3D=function(a,b,c,d){.5>=c?(d.x=a.x+(b.x-a.x)*c,d.y=a.y+(b.y-a.y)*c,d.z=a.z+(b.z-a.z)*c):(d.x=b.x-(b.x-a.x)*(1-c),d.y=b.y-(b.y-a.y)*(1-c),d.z=b.z-
(b.z-a.z)*(1-c))};p.lerpPointHi=ua;p.lerpPointLo=ta;p.makeNullArray=function(a){return Array.from({length:a},()=>null)};p.makeObjectArray=oa;p.makePair=function(a,b){return{first:a,second:b}};p.makePrimitiveArray=Aa;p.makeScopedCall=function(a,b=!1){return{[Symbol.dispose](){this.bForget||a()},bForget:b}};p.makeStructArray=function(a,b){return Array.from({length:b},()=>a())};p.memcpy=M;p.minMax=function(a,b){return a<b?{first:a,second:b}:{first:b,second:a}};p.nextRand=function(a){return 1103515245*
a+12345&2147483647};p.normalizeSignedZero=function(a){return a+0};p.numericSort=za;p.numericSortRange=function(a,b){const c=a.slice(0,b);za(c);M(a,c,0,0,b)};p.pi=function(){return ba};p.querySnap=function(a,b,c){const d=a[0];if(d>=b){if(d<=c)return!1;a[0]=c}else a[0]=b;return!0};p.round=function(a){return Math.round(a)};p.rsqrt=function(a){return 1/Math.sqrt(a)};p.s_four=Oa;p.s_one=U;p.s_one$1=ea;p.s_zero=Na;p.s_zero$1=Ua;p.shortMax=function(){return 32767};p.sign=function(a){return 0>a?-1:0<a?1:
0};p.snap=na;p.snapMagnitude=function(a,b){return a>=b?b:a<-b?-b:a};p.sortRange=function(a,b,c,d){const e=a.slice(b,b+c);e.sort(d);M(a,e,b,0,c)};p.sqr=N;p.sqrt2=function(){return 1.4142135623730951};p.standardNumericCompare=function(a,b){return a<b?-1:a>b?1:0};p.standardNumericCompare2=function(a,b,c,d){return a<c?-1:a>c?1:b<d?-1:b>d?1:0};p.swap=R;p.threeHalfPi=function(){return Ta};p.twoPi=function(){return Ia};p.unique=function(a,b){if(2>a.length)return a.length;let c=0;for(let d=1;d<a.length;++d)b(a[d],
a[c])||(c++,a[d]=R(a[c],a[c]=a[d]));return 1+c};p.unorderedPop=function(a,b){a[b]=a.at(-1);a.pop()}});