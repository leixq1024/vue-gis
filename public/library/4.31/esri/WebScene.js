// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(b,a){b.updateOrigins=function(g){g?.writtenProperties&&g.writtenProperties.forEach(({target:d,propName:n,newOrigin:q})=>{a.isMultiOriginJSONMixin(d)&&q&&d.originOf(n)!==q&&d.updateOrigin(n,q)})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(b){b.isMultiOriginJSONMixin=function(a){return a&&
"getAtOrigin"in a&&"originOf"in a};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports","../../core/urlUtils","../Portal"],function(b,a,g){function d(n,q){return{origin:q,url:a.urlToObject(n.itemUrl),portal:n.portal||g.getDefault(),portalItem:n}}b.createForItemRead=function(n,q){return{...d(n,q),readResourcePaths:[]}};b.createForItemWrite=function(n,q,e){const k=a.urlToObject(n.itemUrl);return{...d(n,q),messages:[],writtenProperties:[],
blockedRelativeUrls:[],verifyItemRelativeUrls:k?{rootPath:k.path,writtenUrls:[]}:null,resources:e?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/MapFloorInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,a,g,d,n,q,e,k,l,p){a=class extends a.JSONSupport{constructor(r){super(r);this.siteLayer=this.facilityLayer=this.levelLayer=null}};b.__decorate([g.property({type:l,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([g.property({type:p,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([e.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){a=class extends a.JSONSupport{constructor(k){super(k);this.sublayerId=this.siteIdField=this.nameField=this.layerId=this.facilityIdField=null}};b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,
"siteIdField",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([e.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){a=class extends a.JSONSupport{constructor(k){super(k);this.verticalOrderField=this.sublayerId=this.shortNameField=this.longNameField=this.levelNumberField=this.levelIdField=this.layerId=this.facilityIdField=null}};b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",
void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);b.__decorate([g.property({type:String,
json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([e.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e){a=class extends a.JSONSupport{constructor(k){super(k);this.sublayerId=this.siteIdField=
this.nameField=this.layerId=null}};b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([e.subclass("esri.layers.support.SiteLayerInfo")],
a)})},"esri/support/tagSymbols":function(){define(["exports"],function(b){const a=Symbol("WebScene");b.WebSceneTag=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(b,a){b.createCopyError=function(){return new a("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};b.createSchemaValidationError=function(g){return new a("webscene:schema-validation",
"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:g})};b.schemaValidationErrorName="webscene:schema-validation";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(b,a,g){b.isSpatialReferenceSupported=function(d,n){return null==d?!1:null==n?!0:n===g.ViewingMode.Local?d.isGeographic?
d.isWGS84||d.wkid===a.SupportedGCSWkids.CGCS2000:!0:d.isWebMercator||d.isWGS84||d.wkid===a.SupportedGCSWkids.CGCS2000||d.wkid===a.SupportedGCSWkids.GCSMARS2000||d.wkid===a.SupportedGCSWkids.GCSMARS2000_SPHERE||d.wkid===a.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/Widgets":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(b,a,g,d,n,q,e,k,l,p){var r;a=r=class extends a.JSONSupport{constructor(x){super(x);this.floorFilter=this.timeSlider=this.range=null}clone(){return new r(g.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};b.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([d.property({type:p,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([d.property({type:k,json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=
r=b.__decorate([e.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(l){super(l);this.pinnedLevels=this.minimized=this.longNames=this.enabled=!1;this.level=this.facility=this.site=null}clone(){return new k(g.clone({enabled:this.enabled,
longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};b.__decorate([d.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],
a.prototype,"minimized",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([d.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([d.property({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([d.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],
a.prototype,"level",void 0);return a=k=b.__decorate([e.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e,k){var l;a=new a.JSONMap({slider:"slider",picker:"picker"});g=l=class extends g.JSONSupport{constructor(p){super(p);
this.stopInterval=this.numStops=this.interactionMode=null}clone(){return new l({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};b.__decorate([d.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},write:{isRequired:!0,writer:a.write}}})],g.prototype,"interactionMode",void 0);b.__decorate([d.property({type:n.Integer,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const p=
null!=this.stopInterval;return{enabled:!p,isRequired:!p}}}}})],g.prototype,"numStops",void 0);b.__decorate([d.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],g.prototype,"stopInterval",void 0);return g=l=b.__decorate([k.subclass("esri.webdoc.widgets.Range")],g)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../portal/timeUnitKebabDictionary ../../time/TimeExtent ../../time/TimeInterval".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x){var F;a=F=class extends a.JSONSupport{constructor(w){super(w);this.fullTimeExtent=this.currentTimeExtent=null;this.loop=!1;this.stops=this.stopInterval=this.stopDelay=this.numThumbs=this.numStops=null}readCurrentTimeExtent(w){return w?r.fromArray(w):void 0}writeCurrentTimeExtent(w,E,y){w&&d.setDeepValue(y,w.toArray(),E)}readFullTimeExtent(w,E){if(w=E.properties)return new r({start:null!=w.startTime?new Date(w.startTime):null,end:null!=w.endTime?new Date(w.endTime):
null})}writeFullTimeExtent(w,E){if(w){E=E.properties=E.properties||{};var y=w.end;w=w.start;y&&(E.endTime=null!=y?y.getTime():null);w&&(E.startTime=null!=w?w.getTime():null)}}readStopInterval(w,E,y){return w?x.fromJSON({value:w.interval,unit:w.units},y):null}writeStopInterval(w,E,y,M){w&&(w=w.toJSON(M),d.setDeepValue("properties.timeStopInterval",{interval:w.value,units:w.unit},E))}readStops(w){return w?.length?w.map(E=>new Date(E)):null}writeStops(w,E,y){w?.length&&d.setDeepValue(y,w.map(M=>M.getTime()),
E)}clone(){return new F(g.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};b.__decorate([n.property({type:r,json:{type:[[q.Integer,q.Null]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],a.prototype,"currentTimeExtent",void 0);b.__decorate([e.reader("currentTimeExtent")],a.prototype,
"readCurrentTimeExtent",null);b.__decorate([l.writer("currentTimeExtent")],a.prototype,"writeCurrentTimeExtent",null);b.__decorate([n.property({type:r,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],a.prototype,"fullTimeExtent",void 0);b.__decorate([e.reader("fullTimeExtent")],a.prototype,"readFullTimeExtent",null);b.__decorate([l.writer("fullTimeExtent")],a.prototype,"writeFullTimeExtent",
null);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],a.prototype,"loop",void 0);b.__decorate([n.property({type:q.Integer,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var w=!!this.stops?.length;w=!(this.stopInterval||w);return{enabled:w,isRequired:w}}}}})],a.prototype,"numStops",void 0);b.__decorate([n.property({type:[1,2],nonNullable:!0,json:{type:q.Integer,
read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],a.prototype,"numThumbs",void 0);b.__decorate([n.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],a.prototype,"stopDelay",void 0);b.__decorate([n.property({type:x,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:p.timeUnitKebabDictionary.jsonValues.filter(w=>
"esriTimeUnitsUnknown"!==w)}},overridePolicy(){const w=!!this.stops?.length;return{enabled:!w,isRequired:!(null!=this.numStops||w)}}}}})],a.prototype,"stopInterval",void 0);b.__decorate([e.reader("stopInterval")],a.prototype,"readStopInterval",null);b.__decorate([l.writer("stopInterval")],a.prototype,"writeStopInterval",null);b.__decorate([n.property({type:[Date],json:{type:[q.Integer],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&
!this.stopInterval}}}}})],a.prototype,"stops",void 0);b.__decorate([e.reader("stops")],a.prototype,"readStops",null);b.__decorate([l.writer("stops")],a.prototype,"writeStops",null);return a=F=b.__decorate([k.subclass("esri.webdoc.widgets.TimeSlider")],a)})},"esri/webdoc/support/resourceUtils":function(){define("require exports ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(b,a,g,d,n,q){async function e(l,p,r){if(p?.resources){var x=
p.portalItem===l.portalItem?new Set(l.paths):new Set;l.paths.length=0;l.portalItem=p.portalItem;var F=new Set(p.resources.toKeep.map(J=>J.resource.path)),w=new Set,E=[];F.forEach(J=>{x.delete(J);l.paths.push(J)});var y=[],M=[],L=[];for(const J of p.resources.toUpdate)if(x.delete(J.resource.path),F.has(J.resource.path)||w.has(J.resource.path)){const {resource:R,content:ea,finish:T}=J,aa=q.getSiblingOfSameTypeI(R,n.generateUUID());l.paths.push(aa.path);y.push({resource:aa,content:await q.contentToBlob(ea),
compress:J.compress});T&&L.push(()=>T(aa))}else{l.paths.push(J.resource.path);M.push({resource:J.resource,content:await q.contentToBlob(J.content),compress:J.compress});const R=J.finish;R&&L.push(()=>R(J.resource));w.add(J.resource.path)}for(const J of p.resources.toAdd)if(l.paths.push(J.resource.path),x.has(J.resource.path))x.delete(J.resource.path);else{y.push({resource:J.resource,content:await q.contentToBlob(J.content),compress:J.compress});const R=J.finish;R&&L.push(()=>R(J.resource))}if(y.length||
M.length)({addOrUpdateResources:F}=await new Promise((J,R)=>b(["../../portal/support/resourceUtils"],J,R))),await F(p.portalItem,y,"add",r),await F(p.portalItem,M,"update",r);L.forEach(J=>J());if(0===E.length)return x;p=await d.allSettledErrors(E);d.throwIfAborted(r);if(0<p.length)throw new g("save:resources","Failed to save one or more resources",{errors:p});return x}}async function k(l,p,r){if(l&&p.portalItem){var x=[];for(const F of l)l=p.portalItem.resourceFromPath(F),x.push(l.portalItem.removeResource(l,
r));await d.eachAlways(x)}}a.saveResources=async function(l,p,r){l=await e(l,p,r);await k(l,p,r)};a.updateItemWithResources=async function(l,p,r,x,F){r=await e(r,x,F);await l.update({data:p});await k(r,x,F)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceUtils":function(){define(["exports","../../request","../../core/Error","../../core/urlUtils"],function(b,a,g,d){function n(e){const k=e.lastIndexOf("/");return-1===k?[".",e]:[e.slice(0,k),e.slice(k+1)]}
function q(e){{const x=d.getPathExtension(e);e=null==x?[e,""]:[e.slice(0,e.length-x.length-1),`.${x}`]}const [k,l]=e,[p,r]=n(k);return[p,r,l]}b.addOrUpdateResources=async function(e,k,l,p){var r=new Map;for(const {resource:x,content:F,compress:w,access:E}of k){if(!x.hasPath())throw new g(`portal-item-resource-${l}:invalid-path`,"Resource does not have a valid path");const [y,M]=n(x.path);k=`${y}/${w??""}/${E??""}`;r.has(k)||r.set(k,{prefix:y,compress:w,access:E,files:[]});r.get(k).files.push({fileName:M,
content:F})}await e.load(p);l=d.join(e.userItemUrl,"add"===l?"addResources":"updateResources");for(const {prefix:x,compress:F,access:w,files:E}of r.values())for(r=0;r<E.length;r+=25){k=E.slice(r,r+25);const y=new FormData;x&&"."!==x&&y.append("resourcesPrefix",x);F&&y.append("compress","true");w&&y.append("access",w);let M=0;for(const {fileName:L,content:J}of k)y.append(`file${++M}`,J,L);y.append("f","json");await e.portal.request(l,{method:"post",body:y,signal:p?.signal})}};b.contentToBlob=async function(e){return"blob"===
e.type?e.blob:"json"===e.type?new Blob([e.jsonString],{type:"application/json"}):(await a(e.url,{responseType:"blob"})).data};b.fetchResources=async function(e,k={},l){await e.load(l);const p=d.join(e.itemUrl,"resources"),{start:r=1,num:x=10,sortOrder:F="asc",sortField:w="resource"}=k;k=await e.portal.request(p,{query:{start:r,num:x,sortOrder:F,sortField:w,token:e.apiKey},signal:l?.signal});return{total:k.total,nextStart:k.nextStart,resources:k.resources.map(({created:E,size:y,resource:M})=>({created:new Date(E),
size:y,resource:e.resourceFromPath(M)}))}};b.getSiblingOfSameType=function(e,k){if(!e.hasPath())return null;const [l,,p]=q(e.path);return e.portalItem.resourceFromPath(d.join(l,k+p))};b.getSiblingOfSameTypeI=function(e,k){if(!e.hasPath())return null;const [l,,p]=q(e.path);return e.portalItem.resourceFromPath(d.join(l,k+p))};b.removeAllResources=async function(e,k){await e.load(k);const l=d.join(e.userItemUrl,"removeResources");return e.portal.request(l,{method:"post",query:{deleteAll:!0},signal:k?.signal})};
b.removeResource=async function(e,k,l){if(!k.hasPath())throw new g("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(l);const p=d.join(e.userItemUrl,"removeResources");await e.portal.request(p,{method:"post",query:{resource:k.path},signal:l?.signal});k.portalItem=null};b.splitPrefixFileNameAndExtension=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveUtils":function(){define(["exports","../../core/Error"],function(b,
a){const g=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);b.beforeSave=async function(d){const n=[];for(const q of d.allLayers)"beforeSave"in q&&"function"===typeof q.beforeSave&&(d=q.beforeSave())&&n.push(d);await Promise.allSettled(n)};b.evaluateWriteErrors=function(d,n,q){let e=(d.messages??[]).filter(({type:k})=>"error"===k).map(({name:k,message:l,details:p})=>new a(k,l,p));d.blockedRelativeUrls&&(e=e.concat(d.blockedRelativeUrls.map(k=>
new a("url:unsupported",`Relative url '${k}' is not supported`))));if(q){const {ignoreUnsupported:k,supplementalUnsupportedErrors:l=[],requiredPropertyChecksDisabled:p}=q;k&&(e=e.filter(({name:r})=>!(g.has(r)||l.includes(r))));p&&(e=e.filter(r=>"web-document-write:property-required"!==r.name))}if(0<e.length)throw new a(n.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:e});};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(g,d){d=d||a;let {width:n,height:q}=d;d=n/q;1.5>d?q=n/1.5:1.5<d&&(n=1.5*q);n>g.width&&(q*=g.width/n,n=g.width);q>g.height&&(n*=g.height/q,q=g.height);return{width:Math.round(n),height:Math.round(q)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/webdocSaveUtils":function(){define("require exports ../../core/Error ../../core/MultiOriginJSONSupport ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/originUtils ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../layers/support/arcgisLayerUrl ../../layers/support/layerUtils ../../portal/Portal ../../portal/PortalItem ../../portal/support/jsonContext ../../portal/support/portalItemUtils ../../rest/geometryService/project ../../rest/support/ProjectParameters ../../support/basemapUtils ./resourceUtils ./saveUtils".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x,F,w,E,y,M,L,J,R,ea){async function T(t,f){f=E.createForItemWrite(f,"web-map",!0);t=t.write({},f);await Promise.all(f.resources.pendingOperations);return{json:t,jsonContext:f}}function aa(t,f){if(!f.portalItem)throw new g(`${t.name}:portal-item-not-set`,"Portal item to save to has not been set on the WebMap");ha(t,f.portalItem)}function ha(t,f){if(f.type!==t.itemType)throw new g(`${t.name}:portal-item-wrong-type`,`Portal item needs to have type "${t.itemType}"`);}async function la(t,
f){if(!f.basemap?.baseLayers.length)throw new g(`${t.name}:save`,"Map does not have a valid basemap with a base layer.");let B=null;await n.whenOnce(()=>{const G=J.findSpatialReference(f.initialViewProperties,f.basemap);B=G.spatialReference;return!G.updating});if(!l.equals(B,f.initialViewProperties.spatialReference))throw new g(`${t.name}:save`,"The spatial reference of the basemap is not compatible with the one from the map.",{expected:f.initialViewProperties.spatialReference,actual:B});}function ba(t,
f){f=w.from(f);f.id&&(f=f.clone(),f.id=null);f.type||(f.type=t.itemType);f.portal||(f.portal=F.getDefault());ha(t,f);return f}function A(t){const f=[];t.basemap&&f.push(t.basemap.load());t.ground&&f.push(t.ground.load());return Promise.allSettled(f).then(()=>{})}async function V(t,f){f.extent=await m(t.portalItem,t.initialViewProperties.viewpoint.targetGeometry);await Y(t,f)}async function fa(t,f){y.removeTypeKeyword(f,"CollectorDisabled");y.removeTypeKeyword(f,"FieldMapsDisabled");y.removeTypeKeyword(f,
y.typeKeyword.METADATA);y.removeTypeKeyword(f,"OfflineDisabled");y.removeTypeKeyword(f,"Offline Map Areas");y.removeTypeKeyword(f,"Workforce Dispatcher");y.removeTypeKeyword(f,"Workforce Project");y.removeTypeKeyword(f,"Workforce Worker");await V(t,f)}async function Y(t,f){y.addTypeKeyword(f,qa);await u(t);Q(t,f);ca(t,f);oa(t,f);ra(t,f);sa(t,f);pa(t,f);f.typeKeywords&&(f.typeKeywords=f.typeKeywords.filter((B,G,N)=>N.indexOf(B)===G))}function u(t){t=t.allLayers.concat(t.allTables).map(f=>f.load()).toArray();
return Promise.allSettled(t).then(()=>{})}function C(t){return t.allLayers.concat(t.allTables).some(f=>f.loaded&&x.isLayerWithFeatureLayerSource(f)&&f.capabilities.operations.supportsEditing&&f.editingEnabled&&("subtype-group"!==f.type||f.sublayers.some(B=>B.editingEnabled)))}function D(t){return t.allLayers.concat(t.allTables).filter(f=>"group"!==f.type).every(f=>{var B;if(B=f.loaded)(B=x.isLayerWithFeatureLayerSource(f)&&f.capabilities.operations.supportsSync)||(B=(x.isFeatureCollectionLayer(f)||
"map-notes"===f.type||"route"===f.type)&&!f.portalItem),B||=("tile"===f.type||"vector-tile"===f.type)&&(f.capabilities.operations.supportsExportTiles||I(f)||J.isDeveloperBasemapLayer(f))&&!("vector-tile"===f.type&&1<Object.keys(f.sourceNameToSource).length)&&f.spatialReference.equals(t.initialViewProperties.spatialReference);return B})}function Q(t,f){y.hasTypeKeyword(f,"CollectorDisabled")||y.hasTypeKeyword(f,"Workforce Project")||y.hasTypeKeyword(f,"Workforce Worker")||y.hasTypeKeyword(f,"Workforce Dispatcher")||
!C(t)?y.removeTypeKeyword(f,"Collector"):y.addTypeKeyword(f,"Collector")}function ca(t,f){C(t)?y.addTypeKeyword(f,"Data Editing"):y.removeTypeKeyword(f,"Data Editing")}function oa(t,f){!y.hasTypeKeyword(f,"OfflineDisabled")&&D(t)?y.addTypeKeyword(f,"Offline"):y.removeTypeKeyword(f,"Offline")}function ra(t,f){J.hasDeveloperBasemapLayer(t.basemap)?y.addTypeKeyword(f,ma):y.removeTypeKeyword(f,ma)}function sa(t,f){t.utilityNetworks?.length?y.addTypeKeyword(f,"UtilityNetwork"):y.removeTypeKeyword(f,"UtilityNetwork")}
function pa(t,f){t.ipsInfo?y.addTypeKeyword(f,"IPS"):y.removeTypeKeyword(f,"IPS")}async function m(t,f){f=f.clone().normalize();let B;if(1<f.length)for(const G of f)B?G.width>B.width&&(B=G):B=G;else B=f[0];return z(t,B)}async function z(t,f){var B=f.spatialReference;if(B.isWGS84)return f.clone();if(B.isWebMercator)return p.webMercatorToGeographic(f);({getGeometryServiceURL:B}=await new Promise((G,N)=>b(["../../portal/support/geometryServiceUtils"],G,N)));t=await B(t);f=new L({geometries:[f],outSpatialReference:k.WGS84});
return(await M.project(t,f))[0]}function I(t){return"tile"===t.type?r.isServerOrServicesAGOLUrl(t.url)&&ia.some(f=>t.url?.toLowerCase().includes("/"+f+"/")):!1}async function O(t,f,B,G,N){await B.update({data:G});Z(t,f,B,G,N)}async function W(t,f,B,G,N,S){var da=f.portalItem;da={item:da,authenticated:!(!da?.id||!da.portal.user)};const c=B.portal;await c.signIn();const {copyAllowed:h,itemReloaded:v}=await X(da,c);da.authenticated||(da.authenticated=v);if(!h)throw new g(`${t.name}:save-as-copy-not-allowed`,
"Owner of this map does not allow others to save a copy");S=await ka(B,da,G,S);f.portalItem=B;Z(t,f,B,G,N);return S}async function X(t,f){const {item:B,authenticated:G}=t;if(B?.id&&B.typeKeywords?.includes("useOnly")){if(B.portal.portalHostname!==f.portalHostname)return{copyAllowed:!1,itemReloaded:!1};G||await B.reload();return{copyAllowed:"admin"===B.itemControl||"update"===B.itemControl,itemReloaded:!0}}return{copyAllowed:!0,itemReloaded:!1}}async function ka(t,f,B,G){var N=t.portal;({item:f}=f);
const {folder:S,copyAllResources:da}=G;G=!1;da&&f?.id&&q.hasSameCanonicalPortal(f.portal.url,N.url)&&2023<=parseInt(f.portal.currentVersion,10)&&({total:G}=await f.fetchResources(),G=!!G);G?(N=await f.copy({copyResources:"all",folder:S}),t.id=N.id,t.portal=N.portal,N=t.toJSON(),await t.load(),t.read(N),await t.update({data:B})):await N.user.addItem({item:t,folder:S,data:B});return G}function Z(t,f,B,G,N){d.MultiOriginJSONSupport.prototype.read.call(f,{version:G.version,authoringApp:G.authoringApp,
authoringAppVersion:G.authoringAppVersion},{origin:t.origin,ignoreDefaults:!0,url:B.itemUrl?q.urlToObject(B.itemUrl):void 0});e.updateOrigins(N);f.resourceInfo=G}const ia="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(t=>
t.toLowerCase()),qa=y.typeKeyword.JSAPI,ma=y.typeKeyword.DEVELOPER_BASEMAP;a.createJSON=T;a.initializeNewItem=ka;a.isCopyAllowed=X;a.save=async function(t,f,B){B??={};aa(t,f);await n.whenOnce(()=>!f.updatingFromView);await f.load();await A(f);await ea.beforeSave(f);await la(t,f);const G=f.portalItem,{json:N,jsonContext:S}=await T(f,G);ea.evaluateWriteErrors(S,{errorName:`${t.name}:save`},B);await V(f,G);await O(t,f,G,N,S);await Promise.all([f.updateItemThumbnail(),R.saveResources(f.resourceReferences,
S)]);return G};a.saveAs=async function(t,f,B,G){G??={};B=ba(t,B);await n.whenOnce(()=>!f.updatingFromView);await f.load();await A(f);await ea.beforeSave(f);await la(t,f);const {json:N,jsonContext:S}=await T(f,B);ea.evaluateWriteErrors(S,{errorName:`${t.name}:save`},G);await fa(f,B);const da=f.getThumbnailState();await W(t,f,B,N,S,G)&&(f.resourceReferences.portalItem=B);f.restoreThumbnailFromState(da);await Promise.all([f.updateItemThumbnail(),R.saveResources(f.resourceReferences,S)]);return B};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(b,a,g,d,n,q,e){const k=g.ensureType(e);b.project=async function(l,p,r){p=k(p);l=n.parseUrl(l);const x={...l.query,f:"json",...p.toJSON()},F=p.outSpatialReference,w=d.getJsonType(p.geometries[0]);p=n.asValidOptions(x,r);return a(l.path+"/project",
p).then(({data:{geometries:E}})=>q.decodeGeometries(E,w,F))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils".split(" "),function(b,a,g,d,n,q,e,k,l){a=class extends a.JSONSupport{constructor(p){super(p);
this.geometries=[];this.transformForward=this.transformation=this.outSpatialReference=null}toJSON(){const p=this.geometries.map(F=>F.toJSON()),r=this.geometries[0],x={};x.outSR=l.srToRESTValue(this.outSpatialReference);x.inSR=l.srToRESTValue(r.spatialReference);x.geometries=JSON.stringify({geometryType:k.getJsonType(r),geometries:p});this.transformation&&(x.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(x.transformForward=this.transformForward);
return x}};b.__decorate([g.property()],a.prototype,"geometries",void 0);b.__decorate([g.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([g.property()],a.prototype,"transformation",void 0);b.__decorate([g.property()],a.prototype,"transformForward",void 0);return a=b.__decorate([e.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/webscene/ApplicationProperties":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.viewing=null}clone(){return new l({viewing:this.viewing?.clone()??null})}};b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"viewing",void 0);return a=l=b.__decorate([e.subclass("esri.webscene.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.search=null}clone(){return new l(g.clone({search:this.search}))}};b.__decorate([d.property({type:k,json:{write:!0}})],a.prototype,"search",void 0);return a=l=b.__decorate([e.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x,F){var w;const E=a.ofType(x),y=a.ofType(F);a=w=class extends g.JSONSupport{constructor(M){super(M);this.enabled=this.addressSearchEnabled=!0;this.hintText=null;this.layers=new E;this.tables=new y}readAddressSearchEnabled(M){return!M}writeAddressSearchEnabled(M,L,J){L[J]=!M}clone(){return new w(d.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};b.__decorate([n.property({type:Boolean,
nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([k.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([p.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,
write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([n.property({type:E,json:{write:{overridePolicy:r.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([n.property({type:y,json:{read:!0,write:{overridePolicy:r.writeNonEmptyCollectionPolicy}}})],a.prototype,"tables",void 0);return a=w=b.__decorate([l.subclass("esri.webdoc.applicationProperties.Search")],
a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!!a?.length}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(l){super(l);this.subLayer=this.id=this.field=null}clone(){return new k(g.clone({field:this.field,id:this.id,subLayer:this.subLayer}))}};b.__decorate([d.property({type:e,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([d.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([d.property({type:n.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=k=b.__decorate([q.subclass("esri.webdoc.applicationProperties.SearchLayer")],
a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,g,d,n,q,e,k,l){var p;a=p=class extends a.JSONSupport{constructor(r){super(r);this.exactMatch=!1;this.type=this.name=null}clone(){return new p({exactMatch:this.exactMatch,
type:this.type,name:this.name})}};b.__decorate([g.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([e.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=p=b.__decorate([k.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.id=this.field=null}clone(){return new l(g.clone({field:this.field,id:this.id}))}};b.__decorate([d.property({type:k,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([d.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=l=b.__decorate([e.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,g,d,n,q,e,k,l){var p;a=p=class extends a.JSONSupport{constructor(r){super(r);this.exactMatch=!1;this.type=this.name=null}clone(){return new p({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([g.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([e.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=p=b.__decorate([k.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webscene/Environment":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),function(b,a,g,d,n,q,e,k,l,p,r,x,F){var w;q=(E,y,M)=>({enabled:!M?.isPresentation});a=w=class extends a.JSONSupport{constructor(E){super(E);
this.lighting=new r;this.background=null;this.starsEnabled=this.atmosphereEnabled=!0}set weather(E){l.validateWeatherType(E?.type,d.getLogger(this))&&this._set("weather",E)}clone(){return new w(this.cloneConstructProperties())}cloneConstructProperties(){return{lighting:this.lighting&&"virtual"===this.lighting.type?x.prototype.clone.call(this.lighting):r.prototype.clone.call(this.lighting),background:g.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}}};
b.__decorate([n.property({types:p.lightingTypes,nonNullable:!0,json:{write:!0}})],a.prototype,"lighting",void 0);b.__decorate([n.property(F.backgroundProperty)],a.prototype,"background",void 0);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:q}}})],a.prototype,"atmosphereEnabled",void 0);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:q}}})],a.prototype,"starsEnabled",void 0);b.__decorate([n.property({types:l.weatherTypes,nonNullable:!0,
json:{write:!0},value:new k})],a.prototype,"weather",null);return a=w=b.__decorate([e.subclass("esri.webscene.Environment")],a)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e,k){var l;
a=l=class extends a.JSONSupport{constructor(p){super(p);this.type="sunny";this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover})}};b.__decorate([e.enumeration({sunny:"sunny"})],a.prototype,"type",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=l=b.__decorate([k.subclass("esri.views.3d.environment.SunnyWeather")],a)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),
function(b,a,g,d,n,q){a={key:"type",base:q,typeMap:{sunny:q,cloudy:a,rainy:d,snowy:n,foggy:g}};const e=Object.keys(a.typeMap);b.cloudsHeight=1E5;b.heightLimit=1E4;b.validateWeatherType=function(k,l){return e.includes(k)?!0:(l.error(`"${k}" is not a valid weather type`),!1)};b.weatherTypes=a;b.weatherTypesArray=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.type="cloudy";this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover})}};b.__decorate([e.enumeration({cloudy:"cloudy"})],a.prototype,"type",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=l=b.__decorate([k.subclass("esri.views.3d.environment.CloudyWeather")],a)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.type="foggy";this.fogStrength=.5}clone(){return new l({fogStrength:this.fogStrength})}};b.__decorate([e.enumeration({foggy:"foggy"})],a.prototype,"type",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"fogStrength",void 0);return a=l=b.__decorate([k.subclass("esri.views.3d.environment.FoggyWeather")],a)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.type="rainy";this.precipitation=this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover,precipitation:this.precipitation})}};b.__decorate([e.enumeration({rainy:"rainy"})],a.prototype,"type",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},
json:{write:!0}})],a.prototype,"precipitation",void 0);return a=l=b.__decorate([k.subclass("esri.views.3d.environment.RainyWeather")],a)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,
e,k){var l;a=l=class extends a.JSONSupport{constructor(p){super(p);this.type="snowy";this.precipitation=this.cloudCover=.5;this.snowCover="disabled"}clone(){return new l({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};b.__decorate([e.enumeration({snowy:"snowy"})],a.prototype,"type",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([g.property({type:Number,nonNullable:!0,
range:{min:0,max:1},json:{write:!0}})],a.prototype,"precipitation",void 0);b.__decorate([g.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],a.prototype,"snowCover",void 0);return a=l=b.__decorate([k.subclass("esri.views.3d.environment.SnowyWeather")],a)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(b,a,g){b.lightingTypes={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:a,virtual:g}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/webscene/SunLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(b,a,g,d,n,q,e,k,l){var p;a=p=class extends a.JSONSupport{constructor(r){super(r);this.type="sun";this.date=null;this.directShadowsEnabled=
!1;this.displayUTCOffset=null}readDate(r,x){return null!=x.datetime&&new Date(x.datetime)||null}writeDate(r,x,F){x[F]=r.getTime()}readDirectShadowsEnabled(r,x){return!!x.directShadows}writedirectShadowsEnabled(r,x,F){r&&(x[F]=r)}writeDisplayUTCOffset(r,x){null!=r&&(x.displayUTCOffset=r)}clone(){return new p(this.cloneConstructProperties())}cloneConstructProperties(){const r={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=
this.date&&(r.date=new Date(this.date.getTime()));return r}};b.__decorate([g.property({readOnly:!0,type:["sun"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([g.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],a.prototype,"date",void 0);b.__decorate([e.reader("date",["datetime"])],a.prototype,"readDate",null);b.__decorate([l.writer("date")],a.prototype,"writeDate",null);b.__decorate([g.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],a.prototype,
"directShadowsEnabled",void 0);b.__decorate([e.reader("directShadowsEnabled",["directShadows"])],a.prototype,"readDirectShadowsEnabled",null);b.__decorate([l.writer("directShadowsEnabled")],a.prototype,"writedirectShadowsEnabled",null);b.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"displayUTCOffset",void 0);b.__decorate([l.writer("displayUTCOffset")],a.prototype,"writeDisplayUTCOffset",null);return a=p=b.__decorate([k.subclass("esri.webscene.SunLighting")],a)})},"esri/webscene/VirtualLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(l){super(l);this.type="virtual";this.directShadowsEnabled=!1}clone(){return new k(this.cloneConstructProperties())}cloneConstructProperties(){return{directShadowsEnabled:this.directShadowsEnabled}}};b.__decorate([g.property({readOnly:!0,type:["virtual"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([g.property({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],a.prototype,"directShadowsEnabled",void 0);
return a=k=b.__decorate([e.subclass("esri.webscene.VirtualLighting")],a)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(b,a,g){a={base:a,key:"type",typeMap:{color:g}};a={types:a,json:{read:function(d){return(n,q,e)=>{if(!n)return n;for(const k in d.typeMap)if(n.type===k)return q=new d.typeMap[k],q.read(n,e),q}}(a),write:{overridePolicy:(d,n,q)=>({enabled:!q?.isPresentation})}}};b.backgroundProperty=a;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/webscene/background/Background":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e){a=class extends a.JSONSupport{constructor(k){super(k)}clone(){throw Error("Subclasses of Background should implement their own clone method.");}};b.__decorate([g.property({readOnly:!0,json:{read:!1}})],
a.prototype,"type",void 0);return a=b.__decorate([e.subclass("esri.webscene.background.Background")],a)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),function(b,a,g,d,n,q,e,k,l,p){var r;d=
{...l.colorAndTransparencyProperty,nonNullable:!0};p=r=class extends p{constructor(x){super(x);this.type="color";this.color=new a([0,0,0,1])}clone(){return new r(this.cloneProperties())}cloneProperties(){return{color:this.color.clone()}}};b.__decorate([e.enumeration({color:"color"},{readOnly:!0})],p.prototype,"type",void 0);b.__decorate([g.property(d)],p.prototype,"color",void 0);return p=r=b.__decorate([k.subclass("esri.webscene.background.ColorBackground")],p)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/support/timeProperties ./Environment".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r){var x;g=x=class extends g.JSONSupport{constructor(F){super(F);this.environment=new r;this.timeExtent=this.viewpoint=this.spatialReference=null}set viewingMode(F){this._set("viewingMode",F)}clone(){return new x({environment:this.environment.clone(),spatialReference:this.spatialReference?.clone()??null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?.clone()??null,timeExtent:this.timeExtent?.clone()??null})}};b.__decorate([d.property({type:r,json:{write:{isRequired:!0}}})],
g.prototype,"environment",void 0);b.__decorate([d.property({type:l})],g.prototype,"spatialReference",void 0);b.__decorate([d.property({type:["local","global"]})],g.prototype,"viewingMode",null);b.__decorate([d.property({type:a,json:{write:{isRequired:!0}}})],g.prototype,"viewpoint",void 0);b.__decorate([d.property(p.timeExtent)],g.prototype,"timeExtent",void 0);return g=x=b.__decorate([k.subclass("esri.webscene.InitialViewProperties")],g)})},"esri/webdoc/support/timeProperties":function(){define(["exports",
"../../core/Error","../../core/accessorSupport/ensureType","../../time/TimeExtent"],function(b,a,g,d){b.timeExtent={type:d,json:{read:{source:"timeExtent",reader:n=>n?Array.isArray(n)?d.fromArray(n):d.fromJSON(n):null},write:{writer:(n,q,e,k)=>{n&&(n.isEmpty?k?.messages&&k.messages.push(new a("invalid-timeExtent","TimeExtent cannot be empty")):q[e]=n.toArray())},target:{timeExtent:{type:[[g.Integer,g.Null]]}}}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/Presentation":function(){define("../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(b,a,g,d,n,q,e,k,l,p){const r=a.ofType(p);a=class extends d.JSONSupport{constructor(x){super(x);this.slides=new r}destroy(){this.slides.forEach(x=>x.destroy());this.slides.removeAll()}set slides(x){x&&=x.filter(F=>!!F.viewpoint);this._set("slides",g.referenceSetter(x,this._get("slides"),r))}clone(){return new this.constructor({slides:this.slides.clone()})}};b.__decorate([n.property({type:r,nonNullable:!0,json:{write:!0}}),q.cast(g.castForReferenceSetter)],a.prototype,"slides",null);return a=
b.__decorate([l.subclass("esri.webscene.Presentation")],a)})},"esri/webscene/Slide":function(){define("require ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Clonable ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ../layers/Layer ../support/basemapUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ../webdoc/support/timeProperties ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x,F,w,E,y,M,L,J,R,ea,T,aa,ha,la,ba,A,V,fa,Y,u,C,D,Q){function ca(m){if("building-scene"===m.type||"map-image"===m.type)return m.allSublayers.toArray()}function oa(m){if(m=ca(m))return m.filter(z=>z.visible).map(z=>z.id)}function ra(m,z){m=z-m;43200<m&&(m-=86400);-43200>m&&(m+=86400);return m}let sa=0;const pa=e.ofType(D.SlideVisibleLayer);q=class extends q.ClonableMixin(l.JSONSupport){constructor(m){super(m);this.id=Date.now().toString(16)+"-slide-"+sa++;this.title=
new Q;this.description=new Y;this.hidden=!1;this.thumbnail=new ba.SlideThumbnail;this.ground=this.basemap=this.viewpoint=null;this.layout="caption";this.environment=new u.SlideEnvironment;this.timeExtent=null;this.visibleLayers=new pa}destroy(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail=x.destroyMaybe(this.thumbnail);this.thumbnail=this.title=this.description=null}castTitle(m){return"string"===typeof m?new Q({text:m}):R.ensureType(Q,m)}castDescription(m){return"string"===typeof m?
new Y({text:m}):R.ensureType(Y,m)}castThumbnail(m){return"string"===typeof m?new ba.SlideThumbnail({url:m}):R.ensureType(ba.SlideThumbnail,m)}castBasemap(m){return ha.ensureType(m)}set visibleLayers(m){this._set("visibleLayers",k.referenceSetter(m,this._get("visibleLayers"),pa))}castVisibleLayers(m){return m&&"function"===typeof m.map?m.map(z=>{if("string"===typeof z)return{id:z};if(z instanceof aa){const I=oa(z);return{id:z.id,sublayerIds:I}}if(z.id)return{id:z.id,sublayerIds:"sublayerIds"in z?z.sublayerIds:
void 0};p.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"');return z}):null}async _updateVisibleLayersFrom(m){const z=[];await Promise.allSettled(this._getLayers(m.map).map(I=>m.whenLayerView(I).then(O=>{if(O.visible){const W=oa(I);z.push(new D.SlideVisibleLayer({id:O.layer.id,sublayerIds:W}))}})).toArray());this.visibleLayers.removeAll();this.visibleLayers.addMany(z)}updateFrom(m,z){const I={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...z?.screenshot};
return m.when(()=>{this.viewpoint=m.viewpoint.clone();this.environment.lighting="virtual"===m.environment.lighting.type?fa.prototype.clone.apply(m.environment.lighting):V.prototype.clone.apply(m.environment.lighting);this.environment.weather=m.environment.weather.clone();this.basemap=m.map.basemap&&m.map.basemap.clone()||null;this.ground=m.map.ground?C.fromGround(m.map.ground):null;this.timeExtent=m.timeExtent?.clone()??null;return this._updateVisibleLayersFrom(m)}).then(()=>m.takeScreenshot(I)).then(O=>
{this.thumbnail=new ba.SlideThumbnail({url:O.dataUrl});return this})}async applyTo(m,z){null!=this._applyToController&&this._applyToController.abort();let I=new AbortController;this._applyToController=I;const O=F.onAbortOrThrow(z,()=>I?.abort()),W=()=>{this._applyToController===I&&(this._applyToController=null);I=null;O?.remove()};try{await w.whenOnce(()=>m.ready,I.signal)}catch(ia){throw W(),ia;}if(I.signal.aborted)throw W(),F.createAbortError();const X=m.resourceController.scheduler.registerTask(la.TaskPriority.SLIDE);
let ka=!1;const Z={animate:!0,...z,signal:this._applyToController.signal};z=await n.result(m.addUpdatingPromise((async()=>{await Promise.all([X.schedule(async()=>ka=await this._setViewpointOfInterest(m,Z)),X.schedule(()=>this._applyBasemap(m,Z),Z.signal),X.schedule(()=>this._loadLayersWithSublayerVisibility(m))]);await Promise.all([X.schedule(()=>this._applyLayerVisibility(m),Z.signal),X.schedule(()=>this._applyGround(m),Z.signal),X.schedule(()=>this._applyViewpoint(m,Z),Z.signal),X.schedule(()=>
m.timeExtent=this.timeExtent?.clone()??null,Z.signal),X.schedule(()=>m.environment.weather=this.environment.weather.clone())])})()));ka&&(m.contentCamera=null);X.remove();W();if(!1===z.ok)throw z.error;return this}async _applyBasemap(m,z){if(this.basemap){try{await this.basemap.load(z)}catch(I){if(F.isAbortError(I))throw I;}m.map.basemap=ha.clonePreservingTiledLayers(this.basemap,m.map.basemap)}}_applyGround(m){this.ground&&(m.map.ground=this.ground.cloneAndApplyTo(m.map.ground))}_getLayers(m){const z=
new e;this._collectLayers(m,z);this._collectLayers(m.ground,z);return z}_collectLayers(m,z){m.layers.forEach(I=>{I.persistenceEnabled&&(z.add(I),"layers"in I&&this._collectLayers(I,z))})}async _loadLayersWithSublayerVisibility(m){this.visibleLayers&&await Promise.allSettled(this._getLayers(m.map).items.map(z=>this.visibleLayers.find(I=>I.id===z.id)?.sublayerIds?z.load():null))}_applyLayerVisibility(m){this.visibleLayers&&this._getLayers(m.map).forEach(z=>{var I=this.visibleLayers.find(W=>W.id===z.id);
z.visible=null!=I;const O=I?.sublayerIds;I=ca(z);O&&I&&I.forEach(W=>W.visible=O.includes(W.id))})}async _setViewpointOfInterest(m,z){if(m.state.fixedContentCamera||!this.viewpoint||z?.ignoreViewpoint||!z?.useDestinationCamera)return!1;({toCameraAsync:z}=await new Promise((I,O)=>b(["../views/3d/support/viewpointUtils"],I,O)));z=await z(m,this.viewpoint);m.contentCamera=z;return null!=z}async _applyViewpoint(m,z){this._applyCachedCameraTrackingEnabled(m);if(this.viewpoint&&!z.ignoreViewpoint){const I=
this.environment.lighting;if(z.animate&&"sun"===I.type&&I.date)return this._animateToLighting(m,z);z.animate&&(m.environment.applyLighting(I.clone()),await m.goTo(this.viewpoint,z));m.viewpoint=this.viewpoint}m.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(m,z){let I=null;"virtual"!==m.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===m.viewingMode&&(I=this._animateLightingWithCamera(m,m.environment.lighting,this.environment.lighting)),
m.environment.cachedCameraTrackingEnabled=m.environment.lighting.cameraTrackingEnabled,m.environment.lighting.cameraTrackingEnabled=!1);m.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===m.environment.lighting.type?(m.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==m.environment.lighting.type&&(m.environment.cachedCameraTrackingEnabled=m.environment.lighting.cameraTrackingEnabled,
m.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(m.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return m.goTo(this.viewpoint,z).then(()=>{this._applyCachedCameraTrackingEnabled(m);m.environment.applyLighting(this.environment.lighting.clone())}).catch(O=>{null==m.animation&&this._applyCachedCameraTrackingEnabled(m);throw O;}).finally(()=>{x.removeMaybe(I)})}_applyCachedCameraTrackingEnabled(m){null!=m.environment.cachedCameraTrackingEnabled&&
(m.environment.lighting.cameraTrackingEnabled=m.environment.cachedCameraTrackingEnabled,m.environment.cachedCameraTrackingEnabled=null)}_getTime(m){const z=m.getTime();m=3600*m.getUTCHours()+60*m.getUTCMinutes()+m.getUTCSeconds();return[z,m]}_setTime(m,z,I){m.setTime(z);m.setUTCHours(I/3600);m.setUTCMinutes(I%3600/60);m.setUTCSeconds(I%3600%60);return m}_animateLightingWithCamera(m,z,I){const [O,W]=this._getTime(new Date(z.date.toString())),[X,ka]=this._getTime(I.date),Z=ra(W,ka),ia=m.renderCoordsHelper,
qa=T.create();ia.toRenderCoords(m.camera.position,qa);const ma=T.create(),t=T.create();null!=this.viewpoint.camera&&ia.toRenderCoords(this.viewpoint.camera.position,ma);const f=new Date;return w.when(()=>m.camera,B=>{ia.toRenderCoords(B.position,t);var G=ea.squaredDistance(qa,t);const N=ea.squaredDistance(ma,t);B=0;0!==G+N&&(B=G/(G+N));G=O+(X-O)*B;B=r.moduloPositive(W+Z*B,86400);z.date=this._setTime(f,G,B)})}static createFrom(m,z){return(new this).updateFrom(m,z)}};a.__decorate([E.property({type:String,
json:{write:{isRequired:!0}}})],q.prototype,"id",void 0);a.__decorate([E.property({type:Q,json:{default:()=>new Q({text:""}),write:{isRequired:!0}}})],q.prototype,"title",void 0);a.__decorate([y.cast("title")],q.prototype,"castTitle",null);a.__decorate([E.property({type:Y,json:{write:{overridePolicy(m){return{enabled:!(!m||!m.text)}}}}})],q.prototype,"description",void 0);a.__decorate([y.cast("description")],q.prototype,"castDescription",null);a.__decorate([E.property({type:Boolean,nonNullable:!0,
json:{write:!0,default:!1}})],q.prototype,"hidden",void 0);a.__decorate([E.property({type:ba.SlideThumbnail,json:{default:()=>new ba.SlideThumbnail({url:""}),write:{isRequired:!0}}})],q.prototype,"thumbnail",void 0);a.__decorate([y.cast("thumbnail")],q.prototype,"castThumbnail",null);a.__decorate([E.property({type:d,nonNullable:!0,json:{write:{isRequired:!0}}})],q.prototype,"viewpoint",void 0);a.__decorate([E.property({type:g,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],q.prototype,
"basemap",void 0);a.__decorate([y.cast("basemap")],q.prototype,"castBasemap",null);a.__decorate([E.property({type:C,json:{write:!0}})],q.prototype,"ground",void 0);a.__decorate([E.property({type:["caption","cover","none"],json:{write:!0,default:"caption"},nonNullable:!0})],q.prototype,"layout",void 0);a.__decorate([E.property({type:pa,json:{write:{isRequired:!0}}})],q.prototype,"visibleLayers",null);a.__decorate([y.cast("visibleLayers")],q.prototype,"castVisibleLayers",null);a.__decorate([E.property({type:u.SlideEnvironment,
json:{write:!0}})],q.prototype,"environment",void 0);a.__decorate([E.property(A.timeExtent)],q.prototype,"timeExtent",void 0);return q=a.__decorate([J.subclass("esri.webscene.Slide")],q)})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x,F,w,E){function y(A){return M.has(A)?M.get(A):"number"===typeof A?A:1}b.TaskPriority=void 0;(function(A){A.RESOURCE_CONTROLLER_IMMEDIATE="immediate";A.RESOURCE_CONTROLLER="schedule";A.SLIDE="slide";A.STREAM_DATA_LOADER="stream loader";A.ELEVATION_QUERY="elevation query";A.TERRAIN_SURFACE="terrain";A.SURFACE_GEOMETRY_UPDATES="surface geometry updates";A.LOD_RENDERER="LoD renderer";A.GRAPHICS_CORE="Graphics3D";A.I3S_CONTROLLER="I3S";A.POINT_CLOUD_LAYER="point cloud";
A.FEATURE_TILE_FETCHER="feature fetcher";A.OVERLAY="overlay";A.STAGE="stage";A.GRAPHICS_DECONFLICTOR="graphics deconflictor";A.FILTER_VISIBILITY="Graphics3D filter visibility";A.SCALE_VISIBILITY="Graphics3D scale visibility";A.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";A.POINT_OF_INTEREST_FREQUENT="POI frequent";A.POINT_OF_INTEREST_INFREQUENT="POI infrequent";A.LABELER="labeler";A.FEATURE_QUERY_ENGINE="feature query";A.FEATURE_TILE_TREE="feature tile tree";A.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
A.ELEVATION_ALIGNMENT="elevation alignment";A.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";A.TEXT_TEXTURE_ATLAS="text texture atlas";A.TEXTURE_UNLOAD="texture unload";A.LINE_OF_SIGHT_TOOL="line of sight tool";A.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";A.ELEVATION_PROFILE="elevation profile";A.SNAPPING="snapping";A.SHADOW_ACCUMULATOR="shadow accumulator";A.CLOUDS_GENERATOR="clouds generator";A.MAPVIEW_FETCH_QUEUE="mapview fetch queue";A.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update";
A.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue";A[A.NONE=0]="NONE";A[A.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority={}));const M=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,
2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.CLOUDS_GENERATOR,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,
8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30],[b.TaskPriority.MAPVIEW_FETCH_QUEUE,0],[b.TaskPriority.MAPVIEW_LAYERVIEW_UPDATE,2],[b.TaskPriority.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,
0]]),L=r.Milliseconds(6.5),J=r.Milliseconds(1),R=r.Milliseconds(30),ea=r.Milliseconds(1E3/30),T=r.Milliseconds(100);var aa;(function(A){class V{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(u=>u.needsUpdate)}constructor(){this._updating=p.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new q("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new Y;this._state=w.RenderState.INTERACTING;this._tasks=
new e;this._runQueue=new e;this._load=0;this._idleStateCallbacks=new e;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=l.watch(()=>F.SCHEDULER_LOG_SLOW_TASKS,u=>this._debug=u,l.initial);for(const u of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[u],new q(b.TaskPriority[u]))}destroy(){this._tasks.toArray().forEach(u=>u.remove());this._tasks.clear();n.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(u){this._updatingChanged();
u&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(u,C){C=new fa(this,u,C);this._tasks.push(C);this._updatingChanged();this.performanceInfo.tasks.has(u)||this.performanceInfo.tasks.set(u,new q(u));return C}registerIdleStateCallbacks(u,C){const D={idleBegin:u,idleEnd:C};this._idleStateCallbacks.push(D);this.state===w.RenderState.IDLE&&
this._idleUpdatesStartFired&&D.idleBegin();const Q=this;return{remove:()=>this._removeIdleStateCallbacks(D),set idleBegin(ca){Q._idleUpdatesStartFired&&(D.idleEnd(),Q._state===w.RenderState.IDLE&&ca());D.idleBegin=ca},set idleEnd(ca){D.idleEnd=ca}}}get load(){return this._load}set state(u){this._state!==u&&(this._state=u,this.state!==w.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(C=>C.idleEnd())))}get state(){return this._state}updateBudget(u){this._test&&
(this._test.usedBudget=0);++this._frameNumber;let C=L,D=u.frameDuration,Q=J;switch(this.state){case w.RenderState.IDLE:C=r.Milliseconds(0);D=r.Milliseconds(Math.max(T,u.frameDuration));Q=R;break;case w.RenderState.INTERACTING:D=r.Milliseconds(Math.max(ea,u.frameDuration))}D=r.Milliseconds(D-u.elapsedFrameTime-C);if(this.state!==w.RenderState.IDLE&&D<J&&!this._forceTask)return this._forceTask=!0,!1;D=r.Milliseconds(Math.max(D,Q));this._budget.reset(D,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=
this._forceTask=!1;switch(this.state){case w.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(u=>u.idleBegin()));this._runIdle();break;case w.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(r.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(u){this._idleUpdatesStartFired&&u.idleEnd();
this._idleStateCallbacks.removeUnordered(u)}removeTask(u){this._tasks.removeUnordered(u);this._runQueue.removeUnordered(u);this._updatingChanged()}_updateTask(u){this._tasks.forAll(C=>{C.name===u&&C.setPriority(u)})}_getState(u){if(this._runQueue.some(D=>D.name===u))return b.TaskState.SCHEDULED;let C=b.TaskState.IDLE;this._tasks.forAll(D=>{D.name===u&&D.needsUpdate&&(1>=D.schedulePriority?C=b.TaskState.READY:C!==b.TaskState.READY&&(C=b.TaskState.WAITING))});return C}_getRuntime(u){let C=0;this._tasks.forAll(D=>
{D.name===u&&(C+=D.runtime)});return C}_resetRuntimes(){this._tasks.forAll(u=>u.runtime=0)}_getRunning(){const u=new Map;this._tasks.forAll(D=>{D.needsUpdate&&u.set(D.name,(u.get(D.name)||0)+1)});if(0===u.size)return null;let C="";u.forEach((D,Q)=>{C=1<D?C+` ${D}x ${Q}`:C+` ${Q}`});return C}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const u=this._tasks.reduce((C,D)=>D.needsUpdate?++C:C,0);this._load=.9*this._load+u*(1-.9)}_schedule(){this._runQueue.filterInPlace(u=>
{if(u.needsUpdate)return!0;u.schedulePriority=u.basePriority;return!1});for(this._tasks.forAll(u=>{0===u.basePriority&&u.needsUpdate&&!this._runQueue.includes(u)&&u.blockFrame!==this._frameNumber&&this._runQueue.unshift(u)});0===this._runQueue.length;){let u=!1;this._tasks.forAll(C=>{if(C.needsUpdate&&0!==C.schedulePriority&&0!==C.basePriority&&C.blockFrame!==this._frameNumber)switch(u=!0,C.schedulePriority){case 1:C.schedulePriority=0;this._runQueue.push(C);break;default:--C.schedulePriority}});
if(!u)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const u=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var C=this._budget.now();const D=this._runQueue.pop();this._budget.resetProgress();try{D.task.runTask(this._budget)===E.Yield&&(D.blockFrame=this._frameNumber)}catch(Q){d.getLogger("esri.views.support.Scheduler").error(`Exception in task "${D.name}"`,Q),D.blockFrame=this._frameNumber}!this._budget.hasProgressed&&D.blockFrame!==this._frameNumber&&
D.needsUpdate&&(D.blockFrame=this._frameNumber);D.schedulePriority=D.basePriority;C=this._budget.now()-C;D.runtime+=C;this._frameTaskTimes.set(D.priority,this._frameTaskTimes.get(D.priority)+C);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-u);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-u)}_startFrameTaskTimes(){for(const u of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[u],
0)}_recordFrameTaskTimes(u){this._frameTaskTimes.forEach((C,D)=>this.performanceInfo.tasks.get(D).push(C));this.performanceInfo.total.push(u)}get test(){return this._test}}A.Scheduler=V;class fa{get task(){return this._task.value}get updating(){return this._queue.running}constructor(u,C,D){this._scheduler=u;this.name=C;this.runtime=this.blockFrame=0;this._queue=new x.PromiseQueue;this._handles=new a;this.schedulePriority=this._basePriority=y(C);this._task=p.signal(null!=D?D:this._queue);this._handles.add(l.when(()=>
this.task.running,Q=>u.taskRunningChanged(Q)))}remove(){this.processQueue(ha);this._scheduler.removeTask(this);this.schedule=ba.schedule;this.reschedule=ba.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(u){if(this.name!==u){this.name=u;u=y(u);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=u;this._basePriority=u}}get priority(){return this.name}set priority(u){this.setPriority(u)}get needsUpdate(){return this.updating||this.task.running}schedule(u,
C,D){return this._queue.push(u,C,D)}reschedule(u,C,D){return this._queue.unshift(u,C,D)}processQueue(u){return this._queue.runTask(u)}}class Y{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=w.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(u){if(this.done)return!1;!0===u()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(u){this._enabled=u}reset(u,C){this._begin=this.now();this._budget=u;this._state=C;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}A.Budget=Y})(aa||={});b.TaskState=void 0;(function(A){A.SCHEDULED=
"s";A.READY="r";A.WAITING="w";A.IDLE="i"})(b.TaskState||(b.TaskState={}));const ha=(()=>{const A=new aa.Budget;A.enabled=!1;return A})();class la{remove(){}processQueue(){}schedule(A,V,fa){try{if(k.isAborted(V)){const Y=k.createAbortError();return fa?Promise.resolve(fa(Y)):Promise.reject(Y)}return k.when(A(ha))}catch(Y){return Promise.reject(Y)}}reschedule(A,V,fa){return this.schedule(A,V,fa)}}const ba=new la;b.ImmediateTask=ba;b.getTaskPriority=y;b.newScheduler=function(){return new aa.Scheduler};
b.noBudget=ha;b.taskPriorities=M;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,a,g,d){class n{constructor(){this._tasks=[];this._runningTasks=g.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return d.Yield;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,
k,l){++this._runningTasks.value;return(new Promise((p,r)=>this._tasks.push(new q(p,r,e,k,l)))).finally(()=>--this._runningTasks.value)}unshift(e,k,l){++this._runningTasks.value;return(new Promise((p,r)=>this._tasks.unshift(new q(p,r,e,k,l)))).finally(()=>--this._runningTasks.value)}_process(e){if(0===this._tasks.length)return!1;const k=this._tasks.shift();try{const l=a.isAborted(k.signal);if(l&&!k.abortCallback)k.reject(a.createAbortError());else{const p=l?k.abortCallback?.(a.createAbortError()):
k.callback(e);a.isPromiseLike(p)?p.then(k.resolve,k.reject):k.resolve(p)}}catch(l){k.reject(l)}return!0}cancelAll(){const e=a.createAbortError();for(const k of this._tasks)if(k.abortCallback){const l=k.abortCallback(e);k.resolve(l)}else k.reject(e);this._tasks.length=0}}class q{constructor(e,k,l,p,r){this.resolve=e;this.reject=k;this.callback=l;this.signal=p;this.abortCallback=r}}b.PromiseQueue=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],
function(b){const a=Symbol("Yield");b.Yield=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e){a=class extends a{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=
!1}};b.__decorate([g.property()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([g.property()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);a=b.__decorate([e.subclass("esri.views.support.debugFlags")],a);return new a})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=void 0;var a=b.RenderState||(b.RenderState={});a[a.ANIMATING=0]="ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]="IDLE";Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e,k,l){var p;b.SlideThumbnail=p=class extends g.JSONSupport{constructor(){super(...arguments);this.url=""}destroy(){this.url=""}get isSecureUrl(){return d.isHTTPSProtocol(this.url)}get isDataURI(){return d.isDataProtocol(this.url)}clone(){return new p({url:this.url})}};
a.__decorate([n.property({type:String,json:{write:{isRequired:!0}}})],b.SlideThumbnail.prototype,"url",void 0);a.__decorate([n.property()],b.SlideThumbnail.prototype,"isSecureUrl",null);a.__decorate([n.property()],b.SlideThumbnail.prototype,"isDataURI",null);b.SlideThumbnail=p=a.__decorate([l.subclass("esri.webdoc.support.SlideThumbnail")],b.SlideThumbnail);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Description":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new k({text:this.text})}};b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=k=b.__decorate([e.subclass("esri.webscene.support.Description")],a)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(b,a,g,d,n,q,e,k,l,p,r,x){var F;b.SlideEnvironment=F=class extends g.JSONSupport{constructor(){super(...arguments);this.lighting=new x;this.weather=new l}clone(){return new F({lighting:d.clone(this.lighting),weather:d.clone(this.weather)})}};a.__decorate([n.property({types:r.lightingTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"lighting",void 0);a.__decorate([n.property({types:p.weatherTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"weather",void 0);b.SlideEnvironment=F=a.__decorate([k.subclass("esri.webscene.Environment")],
b.SlideEnvironment);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(b,a,g,d,n,q,e,k,l){var p;g=p=class extends g.JSONSupport{constructor(){super(...arguments);
this.opacity=null}clone(){return new p({opacity:this.opacity})}cloneAndApplyTo(r){if(null==this.opacity)return r;r=r?.clone()??new a;r.opacity=this.opacity;return r}static fromGround(r){return new p({opacity:r.opacity})}};b.__decorate([d.property({type:Number,json:{type:n.Integer,read:{reader:l.transparencyToOpacity,source:"transparency"},write:{writer:(r,x)=>{x.transparency=l.opacityToTransparency(r)},target:"transparency"}}})],g.prototype,"opacity",void 0);return g=p=b.__decorate([k.subclass("esri.webscene.support.SlideGround")],
g)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,g,d,n,q,e){var k;b.SlideVisibleLayer=k=class extends g.JSONSupport{constructor(l){super(l);this.id="";this.sublayerIds=null}clone(){return new k({id:this.id,sublayerIds:d.clone(this.sublayerIds)})}};a.__decorate([n.property({type:String,
json:{write:!0}})],b.SlideVisibleLayer.prototype,"id",void 0);a.__decorate([n.property({type:[q.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.SlideVisibleLayer.prototype,"sublayerIds",void 0);b.SlideVisibleLayer=k=a.__decorate([e.subclass("esri.webscene.support.SlideVisibleLayer")],b.SlideVisibleLayer);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Title":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new k({text:this.text})}};b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"text",void 0);return a=k=b.__decorate([e.subclass("esri.webscene.support.Title")],a)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,g,d,n,q,e){var k;a=k=class extends a.JSONSupport{constructor(l){super(l)}clone(){return new k({name:this.name,path:this.path,title:this.title})}};b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"path",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=k=b.__decorate([e.subclass("esri.webscene.TransportationNetwork")],a)})},"esri/webscene/Version":function(){define(["exports",
"../core/Version"],function(b,a){class g extends a.Version{constructor(d,n){super(d,n,"webscene")}get supportsGround(){return this.greaterEqual(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}b.Version=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/schemaValidatorLoader":function(){define(["exports"],function(b){let a=null;b.getLoader=function(){return a};b.registerLoader=function(g){a=g};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"*noref":1}});
define("require ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./portal/support/jsonContext ./portal/support/portalItemUtils ./support/basemapUtils ./support/MapFloorInfo ./support/tagSymbols ./support/webSceneUtils ./time/TimeExtent ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/interfaces ./webdoc/Widgets ./webdoc/support/resourceUtils ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webdoc/support/webdocSaveUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version ./webscene/support/schemaValidatorLoader".split(" "),function(b,
a,g,d,n,q,e,k,l,p,r,x,F,w,E,y,M,L,J,R,ea,T,aa,ha,la,ba,A,V,fa,Y,u,C,D,Q,ca,oa,ra,sa,pa,m,z,I,O,W,X,ka,Z,ia,qa,ma,t,f,B,G,N){const S=new G.Version(1,35);d=class extends l.LoadableMixin(w.EsriPromiseMixin(F.MultiOriginJSONMixin(d))){constructor(c){super(c);this[da]=!0;this._layersIdGCTimeoutId=void 0;this.clippingArea=this.applicationProperties=this._updateFromPromise=null;this.clippingEnabled=!1;this.floorInfo=null;this.heightModelInfo=void 0;this.transportationNetworks=this.sourceVersion=null;this.presentation=
new f;this.initialViewProperties=new t;this.widgets=this.resourceInfo=this.portalItem=null;this._debouncedSaveOperations=E.debounce(async(h,v,H)=>{switch(h){case O.SaveOperationType.SAVE:return this._saveImpl(v);case O.SaveOperationType.SAVE_AS:return this._saveAsImpl(H,v)}});this._resourceReferences={portalItem:null,paths:[]};this.authoringAppVersion=this.authoringApp=null;this._isAuthoringAppVersionSetByUser=this._isAuthoringAppSetByUser=!1}initialize(){this.when().catch(c=>{r.getLogger(this).error("#load()",
"Failed to load web scene",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(h){this.addResolvingPromise(Promise.reject(h));return}this.read(c);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(y.on(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC();this.presentation&&this.presentation.destroy();this.portalItem=x.destroyMaybe(this.portalItem)}writeClippingArea(c,
h){h.clippingArea||(h.clippingArea={});h.clippingArea.geometry=c.toJSON()}readClippingEnabled(c,h){return h.clippingArea?!!h.clippingArea.clip:!1}writeClippingEnabled(c,h){this.clippingArea&&(h.clippingArea||(h.clippingArea={}),h.clippingArea.clip=c)}writeLayers(c,h,v,H){h[v]=this._layersToJSON(c,"operational-layers",H)}readSourceVersion(c,h){const [v,H]=h.version.split(".");return new G.Version(parseInt(v,10),parseInt(H,10))}writeSourceVersion(c,h,v){h[v]=`${S.major}.${S.minor}`}writeTables(c,h,
v,H){c=this._layersToJSON(c,"tables",H);c.length&&(h[v]=c)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl??null}set thumbnailUrl(c){c?this._override("thumbnailUrl",c):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}writeAuthoringApp(c,h){h.authoringApp=c&&this._isAuthoringAppSetByUser?c:"ArcGIS API for JavaScript"}set authoringAppVersion(c){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",
c)}writeAuthoringAppVersion(c,h){h.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:g.version}writeGround(c,h,v,H){h[v]=c?c.write({},H):{transparency:0,layers:[]}}readInitialViewProperties(c,h){c={};h.initialState?.environment&&(c.environment=ma.fromJSON(h.initialState.environment));c.spatialReference=h.spatialReference?V.fromJSON(h.spatialReference):V.WebMercator;c.viewingMode=h.viewingMode??"global";h.initialState?.viewpoint&&(c.viewpoint=n.fromJSON(h.initialState.viewpoint));h=h.initialState?.timeExtent;
null!=h&&(c.timeExtent=m.fromArray(h));return new t(c)}get spatialReference(){return this.initialViewProperties?.spatialReference??V.WebMercator}get viewingMode(){return this.initialViewProperties?.viewingMode??"global"}load(c){const h=this.ground;this.addResolvingPromise(this._loadFromSource().then(()=>{h&&h!==this.ground&&h.destroy();this._validateFeatureLayerSymbolVisibility()}));return Promise.resolve(this)}loadAll(){return p.loadAll(this,c=>{const h=this.presentation&&this.presentation.slides;
c(this.ground,this.basemap,this.layers,h&&h.map(v=>v.basemap),this.tables)})}read(c,h){h={...h,origin:"web-scene"};const v=this._isAuthoringAppVersionSetByUser,H=this._isAuthoringAppSetByUser;ha.readLoadable(this,c,K=>super.read(c,K),h);H||(this._isAuthoringAppSetByUser=!1);v||(this._isAuthoringAppVersionSetByUser=!1);if(c.baseMap&&Array.isArray(c.baseMap.elevationLayers)&&(this.sourceVersion?.supportsVisibleElevationLayersInSlides??!1)){h=c.baseMap.elevationLayers.map(P=>({id:P.id}));const K=this.presentation.slides,
U=(P,ja)=>P.visibleLayers.some(ta=>ta.id===ja),na=h.filter(P=>!K.some(ja=>U(ja,P.id)));K.forEach(P=>{P.visibleLayers.addMany(na)})}}_writeBasemapElevationLayers(c){const h=c.ground?.layers;!c.baseMap&&h?.length&&(c.baseMap={title:"Basemap",baseMapLayers:[]});c.baseMap&&(c.baseMap.elevationLayers=k.clone(h))}_layersToJSON(c,h,v){const H={...v,layerContainerType:h};return c.map(K=>this._verifyWritableLayer(K,v)?K.write({},H):null).filter(K=>!!K).toArray()}_verifyWritableLayer(c,h){return c.persistenceEnabled?
"write"in c?!0:(h?.messages&&h.messages.push(new e("layer:unsupported",`Layers (${c.title}, ${c.id}) of type '${c.declaredClass}' cannot be persisted in web scenes`,{layer:c})),!1):!1}write(c,h){if("loaded"!==this.loadStatus)throw h=new e("webscene:not-loaded","Web scene must be loaded before it can be serialized"),r.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),h;this._runLayersIdGC();var v=!h?.messages;h={messages:[],...h,
origin:"web-scene"};c=super.write(c,h);if(v&&(h=h.messages?.filter(H=>"web-document-write:property-required"===H.name)??[],h.length))throw v=new e("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:h}),r.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",h),v;this._writeBasemapElevationLayers(c);return c}async save(c){return this._debouncedSaveOperations(O.SaveOperationType.SAVE,
c)}async _saveImpl(c){if(!this.portalItem)throw new e("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");if("Web Scene"!==this.portalItem?.type)throw new e("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"');const h=this._updateFromPromise;await this._ensureLoadBeforeSave();const v=this._enableVerifyItemRelativeUrls(Q.createForItemWrite(this.portalItem,"web-scene",!0)),H=this.write({},v);await Promise.all(v.resources.pendingOperations);
await this._verifySave(H,v,O.SaveOperationType.SAVE,c);this._updateTypeKeywords(this.portalItem);await X.updateItemWithResources(this.portalItem,H,this._resourceReferences,v);aa.updateOrigins(v);h&&await h;await this._saveThumbnail();return this.portalItem}async saveAs(c,h){return this._debouncedSaveOperations(O.SaveOperationType.SAVE_AS,h,c)}async _saveAsImpl(c,h){c=D.from(c);if(!c)throw new e("webscene:portal-item-required","saveAs requires a portal item to save to");c.id&&(c=c.clone(),c.id=null);
const v=c.portal||C.getDefault();await this._ensureLoadBeforeSave();c.type="Web Scene";c.portal=v;const H=this._enableVerifyItemRelativeUrls(Q.createForItemWrite(c,"web-scene",!0)),K=this.write({},H);await Promise.all(H.resources.pendingOperations);await this._verifySaveAs(K,H,h);const U=this.thumbnailUrl,na=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(c);await v.signIn();var P=this.portalItem;P={item:P,authenticated:!(!P?.id||!P.portal.user)};const {copyAllowed:ja,itemReloaded:ta}=
await ia.isCopyAllowed(P,v);P.authenticated||(P.authenticated=ta);if(!ja)throw new e(`${H.name}:save-as-copy-not-allowed`,"Owner of this map does not allow others to save a copy");await ia.initializeNewItem(c,P,K,{...h,copyAllResources:!0})&&(this._resourceReferences.portalItem=c);await X.saveResources(this._resourceReferences,H);this.portalItem=c;F.MultiOriginJSONSupport.prototype.read.call(this,{version:K.version,authoringApp:K.authoringApp,authoringAppVersion:K.authoringAppVersion},{name:"web-scene",
ignoreDefaults:!0,url:c.itemUrl?M.urlToObject(c.itemUrl):void 0});aa.updateOrigins(H);U&&(this.thumbnailUrl=na?M.addQueryParameter(U,"w","8192"):U);H.portalItem=c;await this._saveThumbnail();return c}async _saveThumbnail(){this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}async _verifySave(c,h,v,H){if(!u.isEarth(this.spatialReference))throw new e("webscene:unsupported-spatial-reference",
"Webscenes using spatial reference systems from Mars or Moon can not be saved currently.");const {ignoreUnsupported:K,requiredPropertyChecksDisabled:U,strictSchemaValidationEnabled:na}=H||{};ka.evaluateWriteErrors(h,{errorName:"webscene:save"},{ignoreUnsupported:K,supplementalUnsupportedErrors:["scenemodification:unsupported"],requiredPropertyChecksDisabled:U});h=N.getLoader();if(na&&h&&(h=(await h()).validate(c),h.length))throw c=`webscene did not validate:\n${h.join("\n")}`,r.getLogger(this).error(`${v===
O.SaveOperationType.SAVE_AS?"saveAs":"save"}(): ${c}`),v=h.map(P=>new e("webscene:schema-validation",P)),pa.createSchemaValidationError(v);}_verifySaveAs(c,h,v){return this._verifySave(c,h,O.SaveOperationType.SAVE_AS,v)}verifySaveAs(c){const h=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),v=this.write({},h);return this._verifySaveAs(v,h,c)}canNotSaveAs(){return!1}async updateFrom(c,h={}){this._updateFromPromise=c=this._updateFrom(c,h);await c;this._updateFromPromise===c&&(this._updateFromPromise=
null)}async _updateFrom(c,h={}){await c.whenReady();!h.environmentExcluded&&c.environment&&(this.initialViewProperties.environment=ma.prototype.clone.apply(c.environment));!h.viewpointExcluded&&c.viewpoint&&(this.initialViewProperties.viewpoint=c.viewpoint.clone());this.initialViewProperties.spatialReference=c.spatialReference.clone();this.initialViewProperties.viewingMode=c.viewingMode;this.initialViewProperties.timeExtent=c.timeExtent?.clone()??null;null!=c.clippingArea?c.clippingArea!==this.clippingArea&&
(this.clippingArea=c.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;c.heightModelInfo&&(this.heightModelInfo=c.heightModelInfo.clone());if(c.map===this)for(const v of c.allLayerViews)"visible"in v&&"visible"in v.layer&&v._isOverridden("visible")&&(v.layer.visible=v.visible);if(!h.widgetsExcluded)for(const v of c.persistableViewModels)v.updateWebDocument(this);(!1===h.thumbnailExcluded||null==h.thumbnailExcluded&&!h.viewpointExcluded)&&await this._updateFromThumbnail(c,h.thumbnailSize??
void 0)}async _updateFromThumbnail(c,h){h=Z.getOptimalThumbnailSize(c,h);this.thumbnailUrl=(await c.takeScreenshot({format:"jpg",width:h.width,height:h.height,disableDecorations:!0})).dataUrl}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem?.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(c,h){c=this._validateJSON(c);this.read(c,h);return this._loadFromJSON(c,h)}_extractOperationalLayers(c){const h=
[];if(!this.sourceVersion?.supportsGround&&c.baseMap&&Array.isArray(c.baseMap.elevationLayers))for(const K of c.baseMap.elevationLayers)h.push(K);const v=[],H=K=>{K.layers&&(K.layers=K.layers.filter(H));return"ArcGISTiledElevationServiceLayer"===K.layerType?(this.sourceVersion?.supportsGround||v.push(K),!1):!0};return{operationalLayers:c.operationalLayers?c.operationalLayers.filter(H):[],operationalElevationLayers:v,basemapElevationLayers:h}}async _loadFromJSON(c,h){const v=new q;await this._validateSpatialReference();
await this._validateHeightModelInfo();const {populateOperationalLayers:H}=await new Promise((ja,ta)=>b(["./layers/support/layersCreator"],ja,ta)),{operationalLayers:K,operationalElevationLayers:U,basemapElevationLayers:na}=this._extractOperationalLayers(c),P=[];h={context:{...h,layerContainerType:"operational-layers"}};this.portalItem&&(h.context.portal=this.portalItem.portal||C.getDefault());0<na.length&&P.push(H(this.ground.layers,na,{...h,context:{...h.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));
0<U.length&&P.push(H(v,U,{...h,context:{...h.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));K&&0<K.length&&P.push(H(this.layers,K,h));c.tables?.length&&P.push(H(this.tables,c.tables,{...h,context:{...h.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"}));await Promise.allSettled(P);await this._loadObjectsWithLayers();this.ground.layers.addMany(v.filter(ja=>"base-elevation"===ja.type||"elevation"===ja.type))}async _ensureLoadBeforeSave(){await this.load();
await this._loadObjectsWithLayers();const c=[];var h=[...this.allLayers.items];for(const {basemap:v}of this.presentation.slides.items)v&&(h.push(...v.baseLayers.items),h.push(...v.referenceLayers.items));for(const v of h)"beforeSave"in v&&"function"===typeof v.beforeSave&&(h=v.beforeSave())&&c.push(h);await Promise.allSettled(c)}async _loadObjectsWithLayers(){const c=[];this.ground&&c.push(this.ground.load());this.basemap&&c.push(this.basemap.load());this.presentation.slides.forEach(h=>{h.basemap&&
c.push(h.basemap.load())});await Promise.allSettled(c)}async _loadFromItem(c){await c.load().catch(H=>{throw new e("webscene:load-portal-item","Failed to load portal item",{error:H});});if("Web Scene"!==c.type)throw new e("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:c.type});const h=await c.fetchData();this.resourceInfo=h;const v={origin:"web-scene",url:M.urlToObject(c.itemUrl),portal:c.portal||C.getDefault(),portalItem:c,readResourcePaths:[]};await this._readAndLoadFromJSON(h,
v);this._resourceReferences={portalItem:c,paths:v.readResourcePaths??[]}}_validateSpatialReference(){const c=this.initialViewProperties,h=this._sceneSpatialReference;let v=void 0;if("local"!==c.viewingMode){if(!I.isSpatialReferenceSupported(h,z.ViewingMode.Global))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:h,viewingMode:c.viewingMode}));
v=U=>!U||A.canProjectWithoutEngine(U,h)}else{if(!I.isSpatialReferenceSupported(h,z.ViewingMode.Local))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:h,viewingMode:c.viewingMode}));v=U=>!U||U.equals(h)}const H=U=>U?.camera?.position.spatialReference??U?.targetGeometry?.spatialReference;var K=H(c.viewpoint);return K&&!v(K)?Promise.reject(new e("webscene:incompatible-camera-spatial-reference",
"Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:K,sceneSpatialReference:h,viewingMode:c.viewingMode})):(K=this.presentation.slides.find(U=>!v(H(U.viewpoint))))?(K=H(K.viewpoint),Promise.reject(new e("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:K,sceneSpatialReference:h,viewingMode:c.viewingMode}))):Promise.resolve()}_validateHeightModelInfo(){const c=fa.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return c?Promise.reject(c):Promise.resolve()}_validateFeatureLayerSymbolVisibility(){this.sourceVersion?.greaterEqual(1,35)||this.layers.forEach(c=>{"feature"===c.type&&y.watch(()=>c.loaded,()=>c.warnInvisibleDrapedSymbols(),{once:!0,sync:!0})})}_validateJSON(c){const h=G.Version.parse(c.version||
"","webscene");S.validate(h);c.version=`${h.major}.${h.minor}`;1===h.major&&2>=h.minor&&(c.spatialReference=V.WebMercator.toJSON());return c}_updateTypeKeywords(c){ca.toggleTypeKeyword(c,ca.typeKeyword.LOCAL_SCENE,"local"===this.initialViewProperties.viewingMode);ca.toggleTypeKeyword(c,ca.typeKeyword.DEVELOPER_BASEMAP,oa.hasDeveloperBasemapLayer(this.basemap)||this.presentation.slides.some(({basemap:h})=>!!h&&oa.hasDeveloperBasemapLayer(h)));c.typeKeywords&&(c.typeKeywords=c.typeKeywords.filter((h,
v,H)=>H.indexOf(h)===v))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||V.WebMercator}get _verifyItemRelativeRootPath(){return this.portalItem?.itemUrl?M.urlToObject(this.portalItem.itemUrl).path:null}_enableVerifyItemRelativeUrls(c){const h=this._verifyItemRelativeRootPath;h&&(c.verifyItemRelativeUrls={rootPath:h,writtenUrls:[]});return c}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC();
this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)}_runLayersIdGC(){this._unscheduleLayersIdGC();var c=this.applicationProperties?.viewing?.search;const h=v=>this.allLayers.some(H=>H.id===v&&H.persistenceEnabled);c?.layers&&(c.layers=c.layers.filter(v=>h(v.id)));(c=this.presentation&&this.presentation.slides)&&c.forEach(v=>{v.visibleLayers&&(v.visibleLayers=v.visibleLayers.filter(H=>h(H.id)))})}static fromJSON(c){if(!c)throw new e("webscene:empty-resource",
"Expected a JSON resource but got nothing");return new this({resourceInfo:c})}};var da=sa.WebSceneTag;d.version=`${S.major}.${S.minor}`;a.__decorate([L.property({type:qa,json:{write:!0}})],d.prototype,"applicationProperties",void 0);a.__decorate([L.property({type:la,json:{read:{source:"clippingArea.geometry",reader:Y.fromJSON},write:{target:"clippingArea.geometry"}}})],d.prototype,"clippingArea",void 0);a.__decorate([T.writer("clippingArea")],d.prototype,"writeClippingArea",null);a.__decorate([L.property({type:Boolean,
json:{write:{target:"clippingArea.clip"}}})],d.prototype,"clippingEnabled",void 0);a.__decorate([R.reader("clippingEnabled",["clippingArea"])],d.prototype,"readClippingEnabled",null);a.__decorate([T.writer("clippingEnabled")],d.prototype,"writeClippingEnabled",null);a.__decorate([L.property({type:ra,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],d.prototype,"floorInfo",void 0);a.__decorate([L.property({type:ba,json:{write:!0}})],d.prototype,"heightModelInfo",void 0);a.__decorate([L.property({json:{write:{target:"operationalLayers",
ignoreOrigin:!0}}})],d.prototype,"layers",void 0);a.__decorate([T.writer("layers")],d.prototype,"writeLayers",null);a.__decorate([L.property({readOnly:!0,type:G.Version,json:{type:(()=>{const c=[],h=S.major;for(let v=8;v<=S.minor;v++)c.push(`${h}.${v}`);return c})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],d.prototype,"sourceVersion",void 0);a.__decorate([R.reader("sourceVersion",["version"])],d.prototype,"readSourceVersion",
null);a.__decorate([T.writer("sourceVersion")],d.prototype,"writeSourceVersion",null);a.__decorate([L.property({json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],d.prototype,"tables",void 0);a.__decorate([T.writer("tables")],d.prototype,"writeTables",null);a.__decorate([L.property()],d.prototype,"thumbnailUrl",null);a.__decorate([L.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],d.prototype,"authoringApp",null);a.__decorate([T.writer("authoringApp")],d.prototype,
"writeAuthoringApp",null);a.__decorate([L.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],d.prototype,"authoringAppVersion",null);a.__decorate([T.writer("authoringAppVersion")],d.prototype,"writeAuthoringAppVersion",null);a.__decorate([L.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],d.prototype,"ground",void 0);a.__decorate([T.writer("ground")],d.prototype,"writeGround",null);a.__decorate([L.property({type:q.ofType(B),json:{write:!0}})],
d.prototype,"transportationNetworks",void 0);a.__decorate([L.property({type:f,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(c,h,v,H)=>{c.slides&&0<c.slides.length&&(h.presentation=c.write({},{...H,isPresentation:!0}))}}}})],d.prototype,"presentation",void 0);a.__decorate([L.property({type:t,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new t({viewingMode:"global",spatialReference:V.WebMercator})}})],d.prototype,"initialViewProperties",void 0);a.__decorate([R.reader("initialViewProperties",
["initialState.timeExtent","initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],d.prototype,"readInitialViewProperties",null);a.__decorate([L.property({type:V,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],d.prototype,"spatialReference",null);a.__decorate([L.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],d.prototype,"viewingMode",null);a.__decorate([L.property({type:D})],d.prototype,"portalItem",void 0);a.__decorate([L.property()],
d.prototype,"resourceInfo",void 0);a.__decorate([L.property({type:W,json:{write:!0}})],d.prototype,"widgets",void 0);return d=a.__decorate([ea.subclass("esri.WebScene")],d)});