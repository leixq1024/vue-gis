// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,c,l,h,g,d,p,q,r,m){function k(a,e){let f=null;for(const n of a.items){a=e(n);if(null!=f&&f!==a)return null;f=a}return f}b.LayerTreeNode=class extends l{constructor(a){super(a);this.id="root";this.parent=
null;this.children=new h;this.layers=new h;this.level=0;this._childIds=new Set;this._layerUniqueIds=new Set}initialize(){this.addHandles([this.layers.on("before-add",a=>{this._layerUniqueIds.has(a.item.uid)?a.preventDefault():this._layerUniqueIds.add(a.item.uid)}),this.layers.on("after-add",({item:a})=>{this.addHandles([g.watch(()=>a.visible,()=>this.notifyChange("visible"),g.initial),g.watch(()=>a.title,()=>this.notifyChange("title"),g.initial)],a.uid)}),this.layers.on("before-remove",({item:a})=>
{this.removeHandles(a.uid);this.notifyChange("title");this.notifyChange("visible")}),this.children.on("before-add",a=>{this._childIds.has(a.item.id)?a.preventDefault():(a.item._set("parent",this),this._childIds.add(a.item.id))})])}destroy(){this.children.forEach(a=>a.destroy())}get hasChildren(){return 0<this.children.length}get isDiscipline(){return 1===this.level}get visible(){return k(this.layers,a=>a.visible)}get title(){return k(this.layers,a=>a.title)||this.layers.items.map(a=>a.title).join(", ")||
null}toggleVisibility(a){const e=void 0===a?!this.visible:a;this.layers.forEach(f=>{f.visible=e});e&&null!=this.parent&&this.parent.toggleVisibility(!0)}toggleAllSiblingsVisibility(a){const e=void 0===a?!this.visible:a;this.toggleVisibility(e);null!=this.parent&&(this.parent.toggleVisibility(e),this.parent.children.forEach(f=>f.toggleVisibility(e)))}};c.__decorate([d.property({nonNullable:!0})],b.LayerTreeNode.prototype,"id",void 0);c.__decorate([d.property()],b.LayerTreeNode.prototype,"parent",void 0);
c.__decorate([d.property({nonNullable:!0,readOnly:!0})],b.LayerTreeNode.prototype,"children",void 0);c.__decorate([d.property({nonNullable:!0,readOnly:!0})],b.LayerTreeNode.prototype,"layers",void 0);c.__decorate([d.property({nonNullable:!0})],b.LayerTreeNode.prototype,"level",void 0);c.__decorate([d.property({readOnly:!0})],b.LayerTreeNode.prototype,"hasChildren",null);c.__decorate([d.property({readOnly:!0})],b.LayerTreeNode.prototype,"isDiscipline",null);c.__decorate([d.property({readOnly:!0})],
b.LayerTreeNode.prototype,"visible",null);c.__decorate([d.property({readOnly:!0})],b.LayerTreeNode.prototype,"title",null);b.LayerTreeNode=c.__decorate([m.subclass("esri.widgets.BuildingExplorer.support.LayerTreeNode")],b.LayerTreeNode);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});