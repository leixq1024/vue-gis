// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../intl ../core/has ../core/accessorSupport/decorators/property ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./BatchAttributeForm/BatchAttributeFormViewModel ./BatchAttributeForm/css ./BatchAttributeForm/VisibleElements ./BatchAttributeForm/inputs/support/inputUtils ../chunks/componentsUtils ./support/dateUtils ./support/globalCss ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(g,k,h,E,l,F,G,y,z,A,f,t,u,B,q,v,C,H,w,d,D){h=class extends z{constructor(a,b){super(a,b);this.headingLevel=2;this.messages=this.messagesCommon=null;this.readOnly=!1;this.viewModel=new A;this.visibleElements=new t.VisibleElements}loadDependencies(){return B.loadCalciteComponents({input:()=>new Promise((a,b)=>g(["../chunks/calcite-input"],a,b)),block:()=>new Promise((a,b)=>g(["../chunks/calcite-block"],a,b)),"input-date-picker":()=>new Promise((a,b)=>g(["../chunks/calcite-input-date-picker"],
a,b)),"input-number":()=>new Promise((a,b)=>g(["../chunks/calcite-input-number"],a,b)),"input-time-picker":()=>new Promise((a,b)=>g(["../chunks/calcite-input-time-picker"],a,b)),"input-time-zone":()=>new Promise((a,b)=>g(["../chunks/calcite-input-time-zone"],a,b)),"text-area":()=>new Promise((a,b)=>g(["../chunks/calcite-text-area"],a,b)),label:()=>new Promise((a,b)=>g(["../chunks/calcite-label"],a,b)),combobox:()=>new Promise((a,b)=>g(["../chunks/calcite-combobox"],a,b)),"combobox-item":()=>new Promise((a,
b)=>g(["../chunks/calcite-combobox-item"],a,b)),"radio-button":()=>new Promise((a,b)=>g(["../chunks/calcite-radio-button"],a,b)),"radio-button-group":()=>new Promise((a,b)=>g(["../chunks/calcite-radio-button-group"],a,b)),switch:()=>new Promise((a,b)=>g(["../chunks/calcite-switch"],a,b))})}get activeFeatureIndex(){return this.viewModel.activeFeatureIndex}set activeFeatureIndex(a){this.viewModel.activeFeatureIndex=a}get disabled(){return this.viewModel.disabled}set disabled(a){this.viewModel.disabled=
a}get features(){return this.viewModel.features}set features(a){this.viewModel.features=a}get icon(){return"edit-attributes"}set icon(a){this._overrideIfSome("icon",a)}render(){return d.tsx("div",{class:this.classes(f.css.base,v.globalCss.widget,v.globalCss.panel)},this._renderForm())}_renderForm(){return"single"!==this.viewModel.mode?d.tsx("div",null,d.tsx("form",null,this._renderHeader(),this._renderContent())):d.tsx("div",null)}_renderHeader(){const a=d.tsx(C.Heading,{key:"title",level:this.headingLevel},
"title"),b=d.tsx("p",{key:"description"},"description");return d.tsx("div",null,a,b)}_renderContent(){const {inputs:a}=this.viewModel.activeForm;return a.items.filter(b=>b.visible).map(b=>this._renderInput(b))}_renderInput(a){if(u.isGroupInput(a))return this._renderGroupInput(a);if(u.isFieldInput(a))return this._renderLabeledField(a)}_renderGroupInput(a){const {inputs:b,template:c}=a;a=b.filter(e=>e.visible);return d.tsx("calcite-block",{class:this.classes(f.css.group,f.css.groupSequential,f.css.block),
collapsible:!0,description:c.description??void 0,disabled:!1,heading:c.label??"",headingLevel:this.headingLevel,key:`{${c.elementId}-key}`,open:!0},a.map(e=>this._renderInput(e)))}_renderLabeledField(a){const {fieldName:b,description:c,label:e,field:m,elementId:n}=a.template,p=m.nullable,r=p?D.substitute(this.messages.requiredFieldLabel,{name:e}):e;return d.tsx("calcite-label",{"aria-label":r,class:f.css.label,key:`field--${n}`},d.tsx("div",{class:f.css.labelTextContent,key:"labelTextContainer"},
e,c?d.tsx("span",{title:`${b}`},c):void 0,p?d.tsx("span",{"aria-hidden":"true",title:this.messagesCommon.required},"*"):void 0),m.editable?this._renderFieldInput(a):this._renderReadOnlyComponent(a))}_renderFieldInput(a){const b=this.getCommonInputProps(a);var {template:c}=a;if(c.input){const {type:e}=c.input;return q.isDateType(e)?this._renderDateComponents(a,b):"coded-value"===c.field.domain?.type?({domain:c}=c.field,this._renderCodedInputs({input:a,domain:c,type:e,props:b})):q.isNumberType(e)?this._renderNumberComponent(a,
b):this._renderStringComponent(a,b)}return null}_renderCodedInputs({input:a,domain:b,type:c,props:e}){b=this.viewModel.getCodedValueOptions(b);switch(c){case "combo-box":return this._renderComboBoxComponent({input:a,options:b,props:e});case "switch":return this._renderSwitchComponent(e);case "radio-buttons":return this._renderRadioButtonGroupComponent({input:a,options:b,props:e});default:return null}}_renderSwitchComponent(a){return d.tsx("calcite-switch",{...a,checked:!1,class:f.css.inputSwitch})}_renderComboBoxComponent({input:a,
options:b,props:c}){const {label:e,field:m}=a.template;a=b.map(n=>this.renderComboboxItem({value:`${n.value}`,text:n.name,selected:m.defaultValue===n.value.toString()}));return d.tsx("calcite-combobox",{...c,label:e??"",selectionMode:"single"},a)}renderComboboxItem({text:a,value:b,selected:c}){return d.tsx("calcite-combobox-item",{key:b,selected:c,textLabel:a,value:b})}_renderRadioButtonGroupComponent({input:a,options:b,props:c}){b=b.map(({name:e,value:m})=>this._renderRadioButtons({label:e,name:e,
value:m,checked:m===a.template.field.defaultValue}));return d.tsx("calcite-radio-button-group",{...c,layout:"vertical",name:c.label??""},b)}_renderRadioButtons({name:a,value:b,checked:c,label:e}){return d.tsx("calcite-label",{class:f.css.inputRadioLabel,key:a,layout:"inline"},d.tsx("calcite-radio-button",{checked:c,name:a,value:`${b}`}),e)}_renderStringComponent(a,b){const {template:c}=a;return c.field.editable?c.input&&"text-area"===c.input.type?d.tsx("calcite-text-area",{...b,class:this.classes(f.css.group,
f.css.groupSequential,f.css.individualElement),resize:"vertical"}):d.tsx("calcite-input",{...b,class:this.classes(f.css.group,f.css.groupSequential,f.css.individualElement),type:"text"}):this._renderReadOnlyComponent(a)}_renderNumberComponent(a,b){return d.tsx("calcite-input-number",{...b,type:"number",value:a.template.field.defaultValue?a.template.field.defaultValue.toString():void 0})}_renderReadOnlyComponent(a,b){a=this.getCommonInputProps(a);return d.tsx("calcite-input",{class:this.classes(f.css.fieldInput,
f.css.inputDisabled,f.css.individualElement),readOnly:!0,type:"text",value:null!=b?`${b}`:a.value})}_renderDateComponents(a,b){const {input:c}=a.template;switch(c?.type){case "datetime-picker":return this._renderDateFieldComponents(b);case "date-picker":return this._renderDateOnlyFieldComponent(b);case "time-picker":return this._renderTimeOnlyFieldComponent(b);case "datetimeoffset-picker":return this._renderTimestampOffsetFieldComponents(b);default:return this._renderReadOnlyComponent(a,q.getLabelForDateFieldValue(a.field,
b.value))}}_renderDateOnlyFieldComponent(a){const {class:b,key:c}=a;return d.tsx("calcite-input-date-picker",{class:b,"data-date-part":"date","data-field-name":"fieldNameAttribute",key:`${c}-date-input`,overlayPositioning:"fixed",value:void 0})}_renderTimeOnlyFieldComponent(a){const {class:b,key:c}=a;return d.tsx("calcite-input-time-picker",{class:b,"data-date-part":"time","data-field-name":"fieldNameAttribute",key:`${c}-time-input`,overlayPositioning:"fixed",value:void 0})}_renderTimestampOffsetFieldComponents(a){const {class:b,
key:c}=a;return d.tsx("div",{class:f.css.dateInputContainer,key:`${c}-date-time-container`},d.tsx("calcite-input-date-picker",{class:b,"data-date-part":"date",key:`${c}-date-input`,value:void 0}),d.tsx("calcite-input-time-picker",{class:b,"data-date-part":"time",key:`${c}-time-input`,value:void 0}),null)}_renderDateFieldComponents(a){const {class:b,key:c}=a;return d.tsx("div",{class:f.css.dateInputContainer,key:`${c}-date-time-container`},d.tsx("calcite-input-date-picker",{class:b,"data-date-part":"date",
key:`${c}-date-input`,value:void 0}),d.tsx("calcite-input-time-picker",{"data-date-part":"time",key:`${c}-time-input`,step:1,value:void 0}))}getCommonInputProps(a){var {disabled:b}=this;const {template:c,field:e,valid:m}=a,{editable:n,name:p,nullable:r,defaultValue:x}=e;a=a.userHasChangedValue;b=!n||b;return{"aria-invalid":m?"false":"true",class:this.classes(f.css.fieldInput,b?f.css.inputDisabled:null),status:a&&!m?"invalid":"idle",key:c.elementId,label:p,placeholder:c.hint??void 0,readOnly:b,required:!r,
value:null==x?"":`${x}`}}};k.__decorate([l.property()],h.prototype,"activeFeatureIndex",null);k.__decorate([l.property()],h.prototype,"disabled",null);k.__decorate([l.property()],h.prototype,"features",null);k.__decorate([l.property()],h.prototype,"headingLevel",void 0);k.__decorate([l.property()],h.prototype,"icon",null);k.__decorate([l.property(),w.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);k.__decorate([l.property(),w.messageBundle("esri/widgets/BatchAttributeForm/t9n/BatchAttributeForm")],
h.prototype,"messages",void 0);k.__decorate([l.property()],h.prototype,"readOnly",void 0);k.__decorate([l.property()],h.prototype,"viewModel",void 0);k.__decorate([l.property({type:t.VisibleElements,nonNullable:!0})],h.prototype,"visibleElements",void 0);return h=k.__decorate([y.subclass("esri.widgets.BatchAttributeForm")],h)});