// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/Polyline ../../../views/3d/interactive/visualElements/OutlineVisualElement ./constants".split(" "),function(g,l,r,t,n,u,p,z,A,B,v,w,x,y,q){g.ProfileLines3D=
class extends t{constructor(a){super(a);this._chartData=null;this._visualElements=[];this._update=c=>{var {chartData:d}=c;if(null==d)return this.remove();if(d.refined){var f=this._visualElements;d=d.lines.filter(h=>h.viewVisualizationEnabled);for(var e=d.length;f.length>e;)f.pop().destroy();for(var b=q.getConfig().profileLinesStyle3D;f.length<e;){var k=new y.OutlineVisualElement({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:b.innerWidth,innerColor:b.innerColor,width:b.width,
falloff:b.falloff,renderOccluded:b.renderOccluded,isDecoration:!0});f.push(k)}c=c.spatialReference;for(b=0;b<e;++b){k=f[b];const h=d[e-1-b];k.geometry=this._createLineGeometry(h,c);k.color=w.fromArray(r.toUnitRGBA(h.color))}}}}initialize(){var a=q.getConfig().profileLines3DUpdateThrottleMillis;let c=this._update;0<a&&(a=u.throttle(this._update,a),this.addHandles(a),c=a);this.addHandles([n.watch(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),c,n.syncAndInitial)])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(a){this._chartData=
a}_createLineGeometry(a,c){a=a.samples??[];const d=a.length-1,f=[];let e=[];for(let b=0;b<=d;b++){const {x:k,y:h,z:m}=a[b];null!=m&&e.push([k,h,m]);b!==d&&null!=m||!e.length||(f.push(e),e=[])}return new x({paths:f,hasZ:!0,spatialReference:c})}_destroyVisualElements(){this._visualElements.forEach(a=>a.destroy());this._visualElements.length=0}};l.__decorate([p.property()],g.ProfileLines3D.prototype,"view",void 0);l.__decorate([p.property()],g.ProfileLines3D.prototype,"_chartData",void 0);g.ProfileLines3D=
l.__decorate([v.subclass("esri.widgets.ElevationProfile.support.ProfileLines3D")],g.ProfileLines3D);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});