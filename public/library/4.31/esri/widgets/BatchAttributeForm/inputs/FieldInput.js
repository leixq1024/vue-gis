// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../form/support/formUtils ../../../layers/support/fieldUtils ../../../smartMapping/support/utils ./EditableInput ./support/inputUtils ../../support/forms/formUtils".split(" "),function(b,d,e,q,r,t,l,k,h,m,n,p,f){b.FieldInput=class extends n.EditableInput{constructor(a){super(a);this.group=
null;this.type="field";this.userHasChangedValue=!1}get dataType(){const {field:a}=this;return h.isNumericField(a)?f.FieldInputDataTypes.Number:h.isStringField(a)?f.FieldInputDataTypes.Text:m.isAnyDateField(a)||h.isTimeOnlyField(a)?f.FieldInputDataTypes.Date:f.FieldInputDataTypes.Unsupported}get distinctValues(){if(this.featuresHaveSameValue)return[this.value];const a=new Set;for(const c of this.features)a.add(c.getAttribute(this.fieldName));return Array.from(a)}get editable(){return this.field.editable?
this._evaluatedEditableExpression??!0:!1}get featuresHaveSameValue(){const {fieldName:a}=this,c=this.features.at(0)?.getAttribute(a);return this.features.every(g=>g.getAttribute(a)===c)}get field(){return this.template.field}get fieldName(){return this.field.name}get isSubtypeField(){return this.layers.some(a=>{if(a&&"subtypeField"in a){const {subtypeField:c,fieldsIndex:g}=a;return(g.get(c)?.name??c)===this.fieldName}return!1})}get maxLength(){if(this.dataType!==f.FieldInputDataTypes.Date){var a=
this.field.length,{input:c}=this.template;if(!c||!k.isTextInput(c))return a;c=c.maxLength;return"number"!==typeof c?a:"number"!==typeof a?c:Math.min(a,c)}}get minLength(){if(this.dataType!==f.FieldInputDataTypes.Date){var {input:a}=this.template;if(a&&k.isTextInput(a)&&(a=a.minLength,"number"===typeof a)){var c=this.field.length;if(!("number"===typeof c&&a>c))return a}}}get required(){if(!this.editable)return!1;if(!this.field.nullable||this.isSubtypeField)return!0;const a=this._evaluatedRequiredExpression;
return this.visible&&!1!==this.group?.visible&&null!=a?a:!1}get valid(){return!0}get value(){return this.featuresHaveSameValue?this.features.at(0)?.getAttribute(this.fieldName)??null:p.differentValuesString}get visible(){return this.field.visible?this._visible:!1}get _evaluatedRequiredExpression(){return null}async setValueFromExpressionManager(a){}async setValueFromUser(a){this.userHasChangedValue=!0;this._setValue(a)}_setValue(a){const {fieldName:c}=this;for(const g of this.features)g.setAttribute(c,
a)}};d.__decorate([e.property()],b.FieldInput.prototype,"dataType",null);d.__decorate([e.property()],b.FieldInput.prototype,"distinctValues",null);d.__decorate([e.property()],b.FieldInput.prototype,"editable",null);d.__decorate([e.property()],b.FieldInput.prototype,"featuresHaveSameValue",null);d.__decorate([e.property()],b.FieldInput.prototype,"field",null);d.__decorate([e.property()],b.FieldInput.prototype,"fieldName",null);d.__decorate([e.property()],b.FieldInput.prototype,"group",void 0);d.__decorate([e.property()],
b.FieldInput.prototype,"isSubtypeField",null);d.__decorate([e.property()],b.FieldInput.prototype,"maxLength",null);d.__decorate([e.property()],b.FieldInput.prototype,"minLength",null);d.__decorate([e.property()],b.FieldInput.prototype,"required",null);d.__decorate([e.property({readOnly:!0})],b.FieldInput.prototype,"type",void 0);d.__decorate([e.property()],b.FieldInput.prototype,"userHasChangedValue",void 0);d.__decorate([e.property()],b.FieldInput.prototype,"valid",null);d.__decorate([e.property()],
b.FieldInput.prototype,"value",null);d.__decorate([e.property()],b.FieldInput.prototype,"visible",null);b.FieldInput=d.__decorate([l.subclass("esri.widgets.BatchAttributeForm.inputs.FieldInput")],b.FieldInput);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});