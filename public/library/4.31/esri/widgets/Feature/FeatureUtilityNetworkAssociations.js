// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require ../../chunks/tslib.es6 ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureUtilityNetworkAssociationType ./FeatureUtilityNetworkAssociations/FeatureUtilityNetworkAssociationsViewModel ./FeatureUtilityNetworkAssociations/VisibleElements ./support/FeatureElementInfo ../../chunks/componentsUtils ../support/globalCss ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(h,d,t,m,f,c,A,B,u,v,w,n,p,x,y,z,C,q,e){c=class extends v{constructor(a,b){super(a,b);this._featureElementInfo=null;this.flowType="feature-utility-network-associations";this.parentFeatureViewModel=this.flowItems=null;this.headingLevel=2;this.viewModel=new n;this.messagesCommon=this.messages=null;this.visibleElements=new p}initialize(){this._featureElementInfo=new x;this.addHandles([m.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),
m.initial)])}loadDependencies(){return y.loadCalciteComponents({chip:()=>new Promise((a,b)=>h(["../../chunks/calcite-chip"],a,b)),icon:()=>new Promise((a,b)=>h(["../../chunks/calcite-icon"],a,b)),loader:()=>new Promise((a,b)=>h(["../../chunks/calcite-loader"],a,b)),notice:()=>new Promise((a,b)=>h(["../../chunks/calcite-notice"],a,b)),list:()=>new Promise((a,b)=>h(["../../chunks/calcite-list"],a,b)),"list-item":()=>new Promise((a,b)=>h(["../../chunks/calcite-list-item"],a,b))})}destroy(){this._featureElementInfo=
t.destroyMaybe(this._featureElementInfo)}get description(){return this.viewModel.description}set description(a){this.viewModel.description=a}get title(){return this.viewModel.title}set title(a){this.viewModel.title=a}render(){const {state:a}=this.viewModel;return e.tsx("div",{class:this.classes("esri-feature-relationship",z.globalCss.widget)},this._featureElementInfo?.render(),"loading"===a?this._renderLoading():"disabled"===a?this._renderAssociationNotFound():this._renderContent())}_renderStickyLoading(){return"querying"===
this.viewModel.state?e.tsx("div",{class:"esri-feature__sticky-loading-container",key:"sticky-loader"},this._renderLoadingIcon()):null}_renderLoadingIcon(){return e.tsx("calcite-loader",{inline:!0,label:""})}_renderLoading(){return e.tsx("div",{class:"esri-feature__loading-container",key:"loading-container"},this._renderLoadingIcon())}_renderAssociationNotFound(){return e.tsx("calcite-notice",{icon:"exclamation-mark-triangle",key:"association-not-found",kind:"danger",open:!0,scale:"s",width:"full"},
e.tsx("div",{slot:"message"},this.messages?.noAssociations))}_setupFeatureElementInfo(){const {headingLevel:a,visibleElements:b}=this,g=b.description&&this.description,k=b.title&&this.title;this._featureElementInfo?.set({description:g,title:k,headingLevel:a})}_getAssociationTypeTitle(a){const {messages:b}=this;if(a.title)return a.title;switch(a.type){case "attachment":return b.associationsAttachments;case "connectivity":return b.associationsConnectivity;case "structure":return b.associationsStructure;
case "content":return b.associationsContents;case "container":return b.associationsContainer}}_selectAssociationType(a){const {viewModel:b,flowItems:g,parentFeatureViewModel:k}=this;if(g){var {associationTypes:l}=b;l.forEach(r=>{r.open=r.type===a.type?!0:!1});l=new w({viewModel:b,parentFeatureViewModel:k,listType:a,title:this._getAssociationTypeTitle(a),featureVisibleElements:this.featureVisibleElements,description:this.parentFeatureViewModel?.title,flowItems:g});g.push(l)}}_renderAssociationType(a){const b=
this._getAssociationTypeTitle(a);return e.tsx("calcite-list-item",{description:a.description,key:`association-type-${a.type}`,label:b,value:a.type,onCalciteListItemSelect:()=>this._selectAssociationType(a)},e.tsx("calcite-chip",{scale:"s",slot:"content-end",value:a.type},this._getFeatureCount(a.type)),e.tsx("calcite-icon",{flipRtl:!0,icon:"chevron-right",scale:"s",slot:"content-end"}))}_getFeatureCount(a){switch(a){case "attachment":return this.viewModel.attachmentsFeatureCount;case "structure":return this.viewModel.structureFeatureCount;
case "content":return this.viewModel.contentFeatureCount;case "container":return this.viewModel.containerFeatureCount;case "connectivity":return this.viewModel.connectivityFeatureCount}}_renderAssociations(a){return e.tsx("div",null,0<this._getFeatureCount(a.type)?this._renderAssociationType(a):null)}_renderContent(){const {state:a,associationTypes:b}=this.viewModel;return e.tsx("div",{class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===
a}),key:"list-container"},"ready"===a?e.tsx("calcite-list",null,b.map(g=>this._renderAssociations(g))):null,this._renderStickyLoading())}};d.__decorate([f.property()],c.prototype,"flowType",void 0);d.__decorate([f.property()],c.prototype,"flowItems",void 0);d.__decorate([f.property()],c.prototype,"parentFeatureViewModel",void 0);d.__decorate([f.property()],c.prototype,"featureVisibleElements",void 0);d.__decorate([f.property()],c.prototype,"description",null);d.__decorate([f.property()],c.prototype,
"headingLevel",void 0);d.__decorate([f.property()],c.prototype,"title",null);d.__decorate([f.property({type:n})],c.prototype,"viewModel",void 0);d.__decorate([f.property(),q.messageBundle("esri/widgets/Feature/t9n/Feature")],c.prototype,"messages",void 0);d.__decorate([f.property(),q.messageBundle("esri/t9n/common")],c.prototype,"messagesCommon",void 0);d.__decorate([f.property({type:p,nonNullable:!0})],c.prototype,"visibleElements",void 0);return c=d.__decorate([u.subclass("esri.widgets.Feature.FeatureUtilityNetworkAssociations")],
c)});