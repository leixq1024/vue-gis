// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require ../../chunks/tslib.es6 ../../intl ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./css ../Popup/actions ../../chunks/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),function(h,g,e,k,A,B,C,p,q,l,r,t,D,u,c,v){const d=r.zoomToFeature.clone();e=class extends q{constructor(a,b){super(a,b);this.messages=
null;this.closed=!1;this.closable=!0;this._handleOpenFeature=f=>{this.emit("open-feature",{feature:f})};this._handleZoomToFeature=f=>{this.emit("zoom-to-feature",{featureWidget:f})}}loadDependencies(){return t.loadCalciteComponents({action:()=>new Promise((a,b)=>h(["../../chunks/calcite-action"],a,b)),"action-bar":()=>new Promise((a,b)=>h(["../../chunks/calcite-action-bar"],a,b)),"action-group":()=>new Promise((a,b)=>h(["../../chunks/calcite-action-group"],a,b)),"flow-item":()=>new Promise((a,b)=>
h(["../../chunks/calcite-flow-item"],a,b))})}render(){var {flowItems:a}=this;a=a?.toArray();return c.tsx(c.tsxFragment,null,a?.map(b=>this._renderFlowItem(b)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleDrillInBackClick(){const a=this.flowItems?.pop();a&&("showAllEnabled"in a.viewModel&&(a.viewModel.showAllEnabled=!1),a&&(a.viewModel=null,a.destroy()))}_getExitMessage(a){switch(a.flowType){case "feature":case "feature-association":return"";case "feature-relationship":return this.messages.exitRelatedRecords;
case "feature-utility-network-associations":case "feature-utility-network-association-type":return this.messages.exitAssociations}}_renderFlowItem(a){const {messages:b,closable:f,closed:w}=this,x="graphic"in a&&!a.isTable,y="feature-association"===a.flowType,m=this._getExitMessage(a),n=b.selectFeature;return c.tsx("calcite-flow-item",{bind:this,closable:f,closed:w,description:this._getDrillInFlowItemDescription(a),heading:a.title??"",key:`flow-item-${a.viewModel.uid}`,onCalciteFlowItemBack:z=>{z.preventDefault();
this._handleDrillInBackClick()},onCalciteFlowItemClose:this._handleCloseClick},c.tsx("calcite-action",{appearance:"transparent",bind:this,class:l.css.actionExit,icon:"move-up",key:"exit-action",onclick:this._handleExitClick,slot:"header-actions-start",text:m,title:m}),x?c.tsx("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-feature-action",onclick:()=>this._handleOpenFeature(a),slot:"header-actions-end",text:n,title:n}):null,y?c.tsx("calcite-action-bar",{expandDisabled:!0,
expanded:!0,key:"header-action-bar",scale:"s",slot:"action-bar"},c.tsx("calcite-action-group",{overlayPositioning:"fixed",scale:"s"},this._renderDefaultActions(a))):null,c.tsx("div",{class:l.css.container},a.render()))}_renderDefaultActions(a){const b=this._getActionTitle(d);return c.tsx("calcite-action",{active:d.active,appearance:"solid",bind:this,"data-action-uid":d.uid,disabled:d.disabled,icon:d.icon??"question",indicator:d.indicator,key:`action-${d.uid}`,loading:d.active,onclick:()=>this._handleZoomToFeature(a),
scale:"s",text:b,textEnabled:!0,title:b})}_getActionTitle(a){const {messages:b}=this,{id:f}=a;a=a.title??"";return"zoom-to-feature"===f?v.substitute(a,{messages:b}):a}_getDrillInFlowItemDescription(a){switch(a.flowType){case "feature":case "feature-association":case "feature-utility-network-associations":return a.viewModel.description??"";case "feature-relationship":return a.featureCountDescription;case "feature-utility-network-association-type":return a.description??""}}};g.__decorate([k.property()],
e.prototype,"flowItems",void 0);g.__decorate([k.property(),u.messageBundle("esri/widgets/Features/t9n/Features")],e.prototype,"messages",void 0);g.__decorate([k.property()],e.prototype,"closed",void 0);g.__decorate([k.property()],e.prototype,"closable",void 0);return e=g.__decorate([p.subclass("esri.widgets.Features.FeaturesDrillIn")],e)});