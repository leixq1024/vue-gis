// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../support/columnUtils ../support/tableUtils".split(" "),function(c,h,l,b,d,r,t,u,q,k,n){b=class extends b.EventedAccessor{constructor(a){super(a);this.cellPartNameGenerator=(e,f)=>{let g="";f?.item&&this.rowHighlightIds.includes(f.item.objectId)&&
(g+=" highlight");e=this.findColumn(e?.path);if(!e)return g;e.invalid&&(g+=" invalid");e.textWrap&&(g+=" text-wrap");"editInfo"in e&&e.editInfo&&e.editInfo.rowData?.index===f.index&&(g+=" editing");return g};this.columnReorderingEnabled=this.columnPerformanceModeEnabled=!0;this.columns=new h;this.dataProvider=async(e,f)=>{const {store:g}=this;f&&(g?(e=await g.fetchItems(e),f(e)):f&&f([]))};this.maxSize=null;this.multipleSelectionEnabled=!0;this.paginationEnabled=this.multiSortEnabled=!1;this.store=
this.rowDetailsRenderer=null}get actionColumn(){return this.allColumns.find(a=>a.fieldName===n.uniqueColumnNames.action)}get allColumns(){return this.columns.toArray().flatMap(a=>[a,...(k.isGroupColumn(a)&&a.columns?.length?a.columns:[])])}get columnMenuIsOpen(){return this.allColumns.some(a=>a.menuIsOpen)}get editing(){return this.editableColumns.some(a=>a.editInfo)}get editableColumns(){return this.allColumns.filter(a=>"editable"in a)}get effectiveSize(){const {filterBySelectionEnabled:a,highlightIds:e,
objectIds:f,pageSize:g,size:p}=this;if(this.paginationEnabled){const m=this.pageCount===this.pageIndex+1?p%g:g;return a?Math.min(e.length,m):f.length?Math.min(f.length,m):m}return a?e.length:f.length?f.length:p}get fieldColumns(){return this.allColumns.filter(a=>k.isFieldColumn(a))}get filterBySelectionEnabled(){return!!this._get("filterBySelectionEnabled")}set filterBySelectionEnabled(a){this._set("filterBySelectionEnabled",a)}get groupColumns(){return this.columns.toArray().filter(a=>k.isGroupColumn(a))}get hasInvalidColumnConfiguration(){return this.visibleColumns.every(a=>
a.frozen||a.frozenToEnd)}get highlightIds(){return this._get("highlightIds")||new h}set highlightIds(a){a=Array.isArray(a)?new h(a):a;this.multipleSelectionEnabled||a.splice(1,a.length-1);this._set("highlightIds",l.referenceSetter(a,this._get("highlightIds"),h))}get objectIds(){return this._get("objectIds")??new h}set objectIds(a){this._set("objectIds",l.referenceSetter(a,this._get("objectIds"),h))}get pageCount(){const {pageSize:a,size:e}=this;return 0===e||0===a?1:Math.ceil(e/a)}get pageIndex(){return this._get("pageIndex")||
0}set pageIndex(a){const {pageCount:e}=this;n.isPageIndexValid(a,e)&&this._set("pageIndex",a)}get pageSize(){return this._get("pageSize")??50}set pageSize(a){this.store?.set("pageSize",a);this._set("pageSize",a)}get relationshipColumns(){return this.allColumns.filter(a=>k.isRelationshipColumn(a))}get rowHighlightIds(){return this._get("rowHighlightIds")||new h}set rowHighlightIds(a){this._set("rowHighlightIds",l.referenceSetter(a,this._get("rowHighlightIds"),h))}get size(){const a=this.store?.count??
0,{maxSize:e}=this;return null!=a&&null!=e?Math.min(e,a):a}get state(){return this.store?.state??"disabled"}get visibleColumns(){return this.columns.toArray().filter(a=>!a.hidden)}closeColumnMenus(){this.allColumns.forEach(a=>a.closeMenu())}sortColumn(a,e){a&&(a=this.findColumn(a))&&(a.direction=e)}hideColumn(a){a=this.findColumn(a);!1===a?.hidden&&(a.hidden=!0)}showColumn(a){a=this.findColumn(a);a?.hidden&&(a.hidden=!1)}showAllColumns(){this.allColumns.forEach(a=>{a.hidden&&(a.hidden=!1)})}findColumn(a){return this.allColumns.find(e=>
e.fieldName===a)}refresh(){this.store&&(this.store.reset(),this.store.load())}toggleColumnVisibility(a){if(a=this.findColumn(a))a.hidden=!a.hidden}};c.__decorate([d.property()],b.prototype,"actionColumn",null);c.__decorate([d.property()],b.prototype,"allColumns",null);c.__decorate([d.property()],b.prototype,"cellPartNameGenerator",void 0);c.__decorate([d.property()],b.prototype,"columnMenuIsOpen",null);c.__decorate([d.property()],b.prototype,"columnPerformanceModeEnabled",void 0);c.__decorate([d.property()],
b.prototype,"columnReorderingEnabled",void 0);c.__decorate([d.property()],b.prototype,"columns",void 0);c.__decorate([d.property()],b.prototype,"dataProvider",void 0);c.__decorate([d.property()],b.prototype,"editing",null);c.__decorate([d.property()],b.prototype,"editableColumns",null);c.__decorate([d.property()],b.prototype,"effectiveSize",null);c.__decorate([d.property()],b.prototype,"fieldColumns",null);c.__decorate([d.property()],b.prototype,"filterBySelectionEnabled",null);c.__decorate([d.property()],
b.prototype,"groupColumns",null);c.__decorate([d.property()],b.prototype,"hasInvalidColumnConfiguration",null);c.__decorate([d.property()],b.prototype,"highlightIds",null);c.__decorate([d.property()],b.prototype,"maxSize",void 0);c.__decorate([d.property()],b.prototype,"multipleSelectionEnabled",void 0);c.__decorate([d.property()],b.prototype,"multiSortEnabled",void 0);c.__decorate([d.property()],b.prototype,"objectIds",null);c.__decorate([d.property()],b.prototype,"pageCount",null);c.__decorate([d.property()],
b.prototype,"pageIndex",null);c.__decorate([d.property()],b.prototype,"pageSize",null);c.__decorate([d.property()],b.prototype,"paginationEnabled",void 0);c.__decorate([d.property()],b.prototype,"relationshipColumns",null);c.__decorate([d.property()],b.prototype,"rowHighlightIds",null);c.__decorate([d.property()],b.prototype,"rowDetailsRenderer",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"size",null);c.__decorate([d.property()],b.prototype,"store",void 0);c.__decorate([d.property({readOnly:!0})],
b.prototype,"state",null);c.__decorate([d.property()],b.prototype,"visibleColumns",null);return b=c.__decorate([q.subclass("esri.widgets.FeatureTable.Grid.GridViewModel")],b)});