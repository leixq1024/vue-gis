// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["require","exports","./columnUtils","../../../chunks/componentsUtils"],function(f,c,w,l){function k(a){return null!=a&&"object"===typeof a&&"createQuery"in a&&"getField"in a&&"queryFeatureCount"in a&&"queryFeatures"in a&&"queryObjectIds"in a&&"capabilities"in a&&"fields"in a&&"fieldsIndex"in a&&"id"in a&&"load"in a&&"objectIdField"in a&&"type"in a&&"when"in a}function q(a){return k(a)&&"queryAttachments"in a}function h(a){return k(a)&&"relationships"in a&&"queryRelatedFeatures"in a&&"queryRelatedFeaturesCount"in
a}function m(a){return null!=a&&"object"===typeof a&&"type"in a&&"map-image"===a.type}function r(a,b){return b.some(d=>"group"===d.type&&r(a,d.columnTemplates)?!0:d.fieldName===a)}function t(a,b){return b?.some(d=>w.isGroupColumn(d)&&t(a,d.columns)?!0:d.fieldName===a)??!1}const u=()=>l.loadCalciteComponents({action:()=>new Promise((a,b)=>f(["../../../chunks/calcite-action"],a,b)),button:()=>new Promise((a,b)=>f(["../../../chunks/calcite-button"],a,b)),dropdown:()=>new Promise((a,b)=>f(["../../../chunks/calcite-dropdown"],
a,b)),"dropdown-item":()=>new Promise((a,b)=>f(["../../../chunks/calcite-dropdown-item"],a,b)),"dropdown-group":()=>new Promise((a,b)=>f(["../../../chunks/calcite-dropdown-group"],a,b)),icon:()=>new Promise((a,b)=>f(["../../../chunks/calcite-icon"],a,b))}),v=()=>Promise.all([l.loadCalciteComponents({input:()=>new Promise((a,b)=>f(["../../../chunks/calcite-input"],a,b)),option:()=>new Promise((a,b)=>f(["../../../chunks/calcite-option"],a,b)),select:()=>new Promise((a,b)=>f(["../../../chunks/calcite-select"],
a,b)),"input-date-picker":()=>new Promise((a,b)=>f(["../../../chunks/calcite-input-date-picker"],a,b)),"input-time-picker":()=>new Promise((a,b)=>f(["../../../chunks/calcite-input-time-picker"],a,b))}),u()]);c.findField=function(a,b){return null==b?null:a?.fields?.find(d=>b.toLowerCase()===d.name?.toLowerCase())};c.findRelatedLayer=function(a,b,{relatedTableId:d}){if(b?.map){var x="scene"===a.type&&a.associatedLayer?a.associatedLayer.url:a.url,n=e=>h(e)&&e!==a?"sublayer"===e.type&&e.layer?.url===
a.url?e.id===d:x===e.url&&e.layerId===d:!1;if("sublayer"===a.type&&m(a.parent)){var g=p=>h(p)&&p!==a&&p.id===d;const e=a.parent;g=e.sublayers?.find(g)||e.subtables?.find(g);if(h(g))return g}g=[...b.map.allLayers,...b.map.allTables];b=null;for(const e of g)if(m(e)){if(g=e.sublayers?.find(n)||e.subtables?.find(n)){b=g;break}}else if(n(e)){b=e;break}if(h(b))return b}};c.findRelationship=function(a,b){return a.relationships?.find(({id:d})=>d===b)};c.getRelationshipIdsToShow=function(a,b){return(a.relationships??
[]).filter(d=>!(d.id===b&&"one-to-one"===d.cardinality)).map(({id:d})=>({relationshipId:d}))};c.hasColumnForField=t;c.hasTemplateForField=r;c.isEmptyStringOrWhitespace=function(a){return null==a||0===a.trim().length};c.isIFeatureTableSupportedLayer=k;c.isIFeatureTableSupportedLayerWithAttachments=q;c.isIFeatureTableSupportedLayerWithAttachmentsEditing=function(a){return q(a)&&"addAttachment"in a&&"deleteAttachments"in a&&"updateAttachment"in a};c.isIFeatureTableSupportedLayerWithEditing=function(a){return k(a)&&
"editingEnabled"in a&&"applyEdits"in a};c.isIFeatureTableSupportedLayerWithRelationships=h;c.isMapImageLayer=m;c.isPageIndexValid=function(a,b){return null!=a&&Number.isInteger(a)&&-1<a&&a<b};c.isSelectionFilter=function(a){return a&&"selection"===a.type};c.loadColumnComponents=u;c.loadEditorColumnComponents=v;c.loadFieldColumnComponents=()=>Promise.all([l.loadCalciteComponents({"action-bar":()=>new Promise((a,b)=>f(["../../../chunks/calcite-action-bar"],a,b))}),v()]);c.uniqueColumnNames={action:"EsriFeatureTableActionColumn",
attachments:"EsriFeatureTableAttachmentsColumn",relationship:"EsriFeatureTableRelationshipColumn"};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});