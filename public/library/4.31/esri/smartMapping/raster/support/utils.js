// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","./adapters/ImageryLayerAdapter","./adapters/ImageryTileLayerAdapter"],function(e,m,d,p,n){function f(a){if("raster-layer-adapter"===a.type)return a;const b=k[a.type]?.adapter;return null==b?null:new b({layer:a})}async function l(a){var {layer:b}=a;if(!b)throw new m("raster-renderer-creator:missing-parameters","'layer' parameter is required");const c=f(b);if(null==c)throw new m("raster-renderer-creator:invalid-parameters",
"'layer' must be one of these types: "+q.join(", "));await c.load();b=a.rasterFunction??a.renderingRule??b.rasterFunction;await c.updateRasterInfo({rasterFunction:b,signal:a.signal});return{...a,layer:c,rasterFunction:b}}const k={imagery:{adapter:p,label:"ImageryLayer"},"imagery-tile":{adapter:n,label:"ImageryTileLayer"},wcs:{adapter:n,label:"WCSLayer"}},r={"raster-stretch":"raster-stretch","unique-value":"raster-unique-value","raster-rgb":"raster-rgb","class-breaks":"raster-class-breaks","raster-colormap":"raster-colormap",
"raster-shaded-relief":"raster-shaded-relief","vector-field":"raster-vector-field",flow:"raster-flow"},q=Object.keys(k).map(a=>k[a].label);e.createRasterLayerAdapter=f;e.getDefaultBandCombination=async function(a){a=await l(a);var b=f(a.layer);const c=await b.generateRasterInfo(a);({layer:b}=b);return"wcs"!==b.type&&b.presetRenderers?.length&&(a=d.matchPresetRenderer({variableName:a.variableName,rasterFunctionName:a.rasterFunction?.functionName,presetRenderers:b.presetRenderers}),a?.bandIds?.length)?
a.bandIds:d.getDefaultBandCombination(c)};e.getSupportedRendererInfo=async function(a){a=await l(a);const b=f(a.layer);var c=await b.generateRasterInfo(a);const g=d.getSupportedRendererTypes(c,!0).map(t=>r[t]),h=b.layer,u="imagery-tile"===h.type?d.getFunctionColorRamp(h.raster):void 0;a=d.matchPresetRenderer({variableName:a.variableName,rasterFunctionName:a.rasterFunction?.functionName,presetRenderers:"wcs"!==h.type?h.presetRenderers:void 0})?.renderer??d.createDefaultRenderer(c,{rasterFunctionColorRamp:u,
variableName:a.variableName});({bandCount:c}=c);1<c&&g.push("raster-rgb");!g.includes("raster-class-breaks")&&1===c&&10.3<=+b.layer?.version&&g.push("raster-class-breaks");return{supportedTypes:g,defaultRenderer:a}};e.processRasterRendererParameters=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});