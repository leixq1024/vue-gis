// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../chunks/tslib.es6 ./Collection ./reactiveUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./accessorSupport/trackingUtils".split(" "),function(e,h,k,g,l,m){let d=class extends h{constructor(a){super(a);this.getCollections=null}initialize(){this.addHandles(m.autorun(()=>this._refresh(),k.sync))}destroy(){this.getCollections=null}_refresh(){const a=null!=this.getCollections?this.getCollections():null;if(null==a)this.removeAll();else{var b=0;for(const f of a)null!=
f&&(b=this._processCollection(b,f));this.splice(b,this.length)}}_createNewInstance(a){return new h(a)}_processCollection(a,b){if(!b)return a;const f=this.itemFilterFunction??(c=>!!c);for(const c of b)if(c&&(f(c)&&(b=this.indexOf(c,a),0<=b?b!==a&&this.reorder(c,a):this.add(c,a),++a),this.getChildrenFunction))if(b=this.getChildrenFunction(c),Array.isArray(b))for(const n of b)a=this._processCollection(a,n);else a=this._processCollection(a,b);return a}};e.__decorate([g.property()],d.prototype,"getCollections",
void 0);e.__decorate([g.property()],d.prototype,"getChildrenFunction",void 0);e.__decorate([g.property()],d.prototype,"itemFilterFunction",void 0);return d=e.__decorate([l.subclass("esri.core.CollectionFlattener")],d)});