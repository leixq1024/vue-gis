// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define(["./arrayUtils","./HeapSort"],function(f,g){function h(a){a.data.length>1.5*a.length&&(a.data.length=Math.floor(1.1*a.length))}class k{constructor(a){this.data=[];this._length=0;this._allocator=void 0;this._deallocator=()=>null;this._shrink=()=>{};this._hint=new f.PositionHint;a&&(a.initialSize&&(this.data=Array(a.initialSize)),a.allocator&&(this._allocator=a.allocator),void 0!==a.deallocator&&(this._deallocator=a.deallocator),a.shrink&&(this._shrink=()=>h(this)))}toArray(){return this.data.slice(0,
this.length)}filter(a){const b=[];for(let c=0;c<this._length;c++){const d=this.data[c];a(d)&&b.push(d)}return b}at(a){a=Math.trunc(a)||0;0>a&&(a+=this._length);if(!(0>a||a>=this._length))return this.data[a]}includes(a,b){a=this.data.indexOf(a,b);return-1!==a&&a<this.length}get length(){return this._length}set length(a){if(a>this._length)if(this._allocator)for(;this._length<a;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=a;else{if(this._deallocator)for(let b=
a;b<this._length;++b)this.data[b]=this._deallocator(this.data[b]);this._length=a;this._shrink()}}clear(){this.length=0}prune(){this.clear();this.data=[]}push(a){this.data[this._length++]=a}pushArray(a,b=a.length){for(let c=0;c<b;c++)this.data[this._length++]=a[c]}fill(a,b){for(let c=0;c<b;c++)this.data[this._length++]=a}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const a=this.data[this._length];++this._length;return a}unshift(a){this.data.unshift(a);
this._length++;h(this)}pop(){if(0!==this.length){var a=this.data[this.length-1];--this.length;this._shrink();return a}}remove(a){const b=f.indexOf(this.data,a,this.length,this._hint);if(-1!==b)return this.data.splice(b,1),--this.length,a}removeUnordered(a){return this.removeUnorderedIndex(f.indexOf(this.data,a,this.length,this._hint))}removeUnorderedIndex(a){if(!(a>=this.length||0>a))return this.swapElements(a,this.length-1),this.pop()}removeUnorderedMany(a,b=a.length,c){this.length=f.removeUnorderedMany(this.data,
a,this.length,b,this._hint,c);this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(a,b){if(!(a>=this.length||b>=this.length||a===b)){var c=this.data[a];this.data[a]=this.data[b];this.data[b]=c}}sort(a){g.sort(this.data,0,this.length,a)}iterableSort(a){return g.iterableSort(this.data,0,this.length,a)}some(a,b){for(let c=0;c<this.length;++c)if(a.call(b,this.data[c],c,this.data))return!0;return!1}find(a,b){const {data:c,
length:d}=this;for(let e=0;e<d;++e)if(a.call(b,c[e]))return c[e]}filterInPlace(a,b){let c=0;for(let d=0;d<this._length;++d){const e=this.data[d];a.call(b,e,d,this.data)&&(this.data[d]=this.data[c],this.data[c]=e,c++)}if(this._deallocator)for(a=c;a<this._length;a++)this.data[a]=this._deallocator(this.data[a]);this._length=c;this._shrink();return this}forAll(a,b){const {data:c,length:d}=this;for(let e=0;e<d;++e)a.call(b,c[e],e,c)}forEach(a,b){this.data.slice(0,this.length).forEach(a,b)}map(a,b){const c=
Array(this.length);for(let d=0;d<this.length;++d)c[d]=a.call(b,this.data[d],d,this.data);return c}reduce(a,b){for(let c=0;c<this.length;++c)b=a(b,this.data[c],c,this.data);return b}has(a){const b=this.length,c=this.data;for(let d=0;d<b;++d)if(c[d]===a)return!0;return!1}*[Symbol.iterator](){for(let a=0;a<this.length;a++)yield this.data[a]}}return k});