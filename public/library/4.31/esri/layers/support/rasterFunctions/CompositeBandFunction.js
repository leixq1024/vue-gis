// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CompositeBandFunctionArguments ./pixelUtils".split(" "),function(g,h,f,t,u,l,m,n,p){f=class extends m{constructor(){super(...arguments);this.functionName="CompositeBand";this.functionArguments=null;this.rasterArgumentNames=["rasters"]}_bindSourceRasters(){const {sourceRasterInfos:c}=
this;var b=c[0];this.outputPixelType=this._getOutputPixelType(b.pixelType);b=b.clone();b.attributeTable=null;b.colormap=null;b.pixelType=this.outputPixelType;b.bandCount=c.map(({bandCount:a})=>a).reduce((a,d)=>a+d);if(c.every(({statistics:a})=>null!=a&&a.length)){const a=[];c.forEach(({statistics:d})=>null!=d&&a.push(...d));b.statistics=a}if(c.every(({histograms:a})=>null!=a&&a.length)){const a=[];c.forEach(({histograms:d})=>null!=d&&a.push(...d));b.histograms=a}b.multidimensionalInfo&&b.multidimensionalInfo.variables.forEach(a=>
{var d=c.map(e=>e.multidimensionalInfo?.variables.find(({name:q})=>q===a.name));const k=d.map(e=>e?.statistics?.length?e.statistics:null);d=d.map(e=>e?.histograms?.length?e.histograms:null);a.statistics=k.every(e=>null!=e)?k.flat():null;a.histograms=d.every(e=>null!=e)?d.flat():null});1<b.bandCount&&(b.colormap=null,b.attributeTable=null);const r=c.every(a=>a.keyProperties.BandProperties?.length)?c.flatMap(a=>a.keyProperties.BandProperties):void 0;b.keyProperties={...b.keyProperties,BandProperties:r};
this.rasterInfo=b;return{success:!0,supportsGPU:3>=b.bandCount}}_processPixels(c){({pixelBlocks:c}=c);return c&&null!=c?.[0]?p.compositeBands(c):null}_getWebGLParameters(){return{bandCount:this.rasterInfo.bandCount}}};g.__decorate([h.property({json:{write:!0,name:"rasterFunction"}})],f.prototype,"functionName",void 0);g.__decorate([h.property({type:n,json:{write:!0,name:"rasterFunctionArguments"}})],f.prototype,"functionArguments",void 0);g.__decorate([h.property()],f.prototype,"rasterArgumentNames",
void 0);return f=g.__decorate([l.subclass("esri.layers.support.rasterFunctions.CompositeBandFunction")],f)});