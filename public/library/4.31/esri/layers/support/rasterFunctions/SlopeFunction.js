// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./SlopeFunctionArguments ./surfaceUtils".split(" "),function(d,e,b,v,w,n,p,q,r,m){b=class extends q{constructor(){super(...arguments);this.functionName="Slope";this.functionArguments=null;this.rasterArgumentNames=["raster"];this.isGCS=!1}_bindSourceRasters(){this.outputPixelType=
this._getOutputPixelType("f32");const a=this.sourceRasterInfos[0].clone();a.pixelType=this.outputPixelType;this._removeStatsHistColormapVAT(a);a.statistics="percent-rise"!==this.functionArguments.slopeType?[{min:0,max:90,avg:1,stddev:1}]:null;a.bandCount=1;this.rasterInfo=a;this.isGCS=a.spatialReference?.isGeographic??!1;return{success:!0,supportsGPU:!0}}_processPixels(a){const c=a.pixelBlocks?.[0];if(null==c)return null;const {zFactor:f,slopeType:g,pixelSizePower:h,pixelSizeFactor:k}=this.functionArguments,
{isGCS:t}=this,{extent:l,primaryPixelSizes:u}=a;a=u?.[0];return m.slope(c,{zFactor:f,slopeType:g,pixelSizePower:h,pixelSizeFactor:k,isGCS:t,resolution:null==a?l?{x:l.width/c.width,y:l.height/c.height}:{x:1,y:1}:a})}_getWebGLParameters(){const {zFactor:a,slopeType:c,pixelSizeFactor:f,pixelSizePower:g}=this.functionArguments,h=this.isGCS&&1<=a?a*m.gcsFactor:a,k=p.isIntegerPixelType(this.outputPixelType);return{zFactor:h,slopeType:c,pixelSizeFactor:f??0,pixelSizePower:g??0,isOutputRounded:k}}};d.__decorate([e.property({json:{write:!0,
name:"rasterFunction"}})],b.prototype,"functionName",void 0);d.__decorate([e.property({type:r,json:{write:!0,name:"rasterFunctionArguments"}})],b.prototype,"functionArguments",void 0);d.__decorate([e.property()],b.prototype,"rasterArgumentNames",void 0);d.__decorate([e.property({json:{write:!0}})],b.prototype,"isGCS",void 0);return b=d.__decorate([n.subclass("esri.layers.support.rasterFunctions.SlopeFunction")],b)});