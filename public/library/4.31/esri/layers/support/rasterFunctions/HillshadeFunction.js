// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../rasterFormats/pixelRangeUtils ./BaseRasterFunction ./HillshadeFunctionArguments ./surfaceUtils".split(" "),function(d,g,c,t,u,l,m,n,p,e){c=class extends n{constructor(){super(...arguments);this.functionName="Hillshade";this.functionArguments=null;this.rasterArgumentNames=["raster"];this.isGCS=!1}_bindSourceRasters(){var a=
this.sourceRasterInfos[0];if(1<a.bandCount)return{success:!1,supportsGPU:!1,error:"hillshade-function: source data must be single band"};this.outputPixelType=this._getOutputPixelType("u8");a=a.clone();this._removeStatsHistColormapVAT(a);a.pixelType=this.outputPixelType;a.bandCount=1;a.statistics=[{min:0,max:255,avg:60,stddev:10}];this.rasterInfo=a;this.isGCS=a.spatialReference?.isGeographic??!1;return{success:!0,supportsGPU:!0}}_processPixels(a){var b=a.pixelBlocks?.[0];if(!b)return null;const {extent:f,
primaryPixelSizes:h}=a;a=h?.[0];a=e.getHillshadeOptions(this.functionArguments,null==a?f?{x:f.width/b.width,y:f.height/b.height}:{x:1,y:1}:a,this.isGCS);b=e.hillshade(b,a);b.pixelType=this.outputPixelType;return b}_getWebGLParameters(){var a=e.getHillshadeOptions(this.functionArguments,{x:1,y:1},this.isGCS);a=e.calculateHillshadeParams(a);const {slopeType:b,zFactor:f,pixelSizeFactor:h,pixelSizePower:q}=this.functionArguments,k="scaled"===b,r=m.isIntegerPixelType(this.outputPixelType);return{...a,
zFactor:f,gcsFactor:this.isGCS?e.gcsFactor:1,pixelSizeFactor:k?h:0,pixelSizePower:k?q:0,isOutputRounded:r}}};d.__decorate([g.property({json:{write:!0,name:"rasterFunction"}})],c.prototype,"functionName",void 0);d.__decorate([g.property({type:p,json:{write:!0,name:"rasterFunctionArguments"}})],c.prototype,"functionArguments",void 0);d.__decorate([g.property()],c.prototype,"rasterArgumentNames",void 0);d.__decorate([g.property({json:{write:!0}})],c.prototype,"isGCS",void 0);return c=d.__decorate([l.subclass("esri.layers.support.rasterFunctions.HillshadeFunction")],
c)});