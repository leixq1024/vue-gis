// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Error ../../core/Identifiable ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./ControlPointsGeoreference ./mediaUtils".split(" "),function(d,n,b,p,q,r,h,x,y,t,u,v,w,k){b=class extends b.NumericIdentifiableMixin(r.MultiOriginJSONMixin(p)){constructor(a){super(a);
this.georeference=null;this.opacity=1}readGeoreference(a){return w.fromJSON(a)}writeGeoreference(a,e,f,c){const l=c?.resources?.pendingOperations,m=()=>{const g=k.toControlPointsGeoreference(this.georeference,this.contentWidth,this.contentHeight);g&&("control-points"!==a.type&&q.getLogger(this).warn(`only georeference of type 'control-points' may be persisted. The georeference of type '${a.type}' has been automatically converted.`),4!==g.controlPoints?.length&&c?.messages?c.messages.push(new n("property:unsupported",
"only 'control-points' georeference with 4 control points may be persisted.")):e[f]=g.write({},c))};"control-points"!==a.type&&!this.loaded&&l?(e[f]={},l.push(this.load().then(m))):m()}get contentWidth(){return 0}get contentHeight(){return 0}toSource(a){const {georeference:e,contentWidth:f,contentHeight:c}=this;if(null==a||null==e||0===f||0===c)return null;a=e.toSourceNormalized(a);if(null==a)return null;a.x*=f;a.y*=c;return a}};d.__decorate([h.property(k.mediaGeoreferenceProperty)],b.prototype,"georeference",
void 0);d.__decorate([t.reader("georeference")],b.prototype,"readGeoreference",null);d.__decorate([v.writer("georeference")],b.prototype,"writeGeoreference",null);d.__decorate([h.property({json:{read:!1,write:!1}})],b.prototype,"opacity",void 0);return b=d.__decorate([u.subclass("esri.layers.support.MediaElementBase")],b)});