// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/TileInfo ../support/TileInfoTilemapCache ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(c,a,q,e,k,g,h,n,b,f,l,x,A){c.ArcGISCachedService=u=>{u=class extends u{constructor(){super(...arguments);
this.copyright=null;this.maxScale=this.minScale=0;this.tilemapCache=this.tileInfo=this.spatialReference=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(p,v){return null!=v.minLOD&&null!=v.maxLOD?p:0}readMaxScale(p,v){return null!=v.minLOD&&null!=v.maxLOD?p:0}get supportsBlankTile(){return 10.2<=this.version}readTilemapCache(p,v,E){p=v.capabilities?.includes("Tilemap");let {minLOD:I,maxLOD:H,minScale:z,maxScale:C}=v;if(null==I&&null==H&&0!==z&&0!==C){z=z?Math.round(1E4*z)/1E4:Math.round(1E4*
v.tileInfo.lods[0].scale)/1E4;C=C?Math.round(1E4*C)/1E4:Math.round(1E4*v.tileInfo.lods[v.tileInfo.lods.length-1].scale)/1E4;for(var G of v.tileInfo.lods){const F=Math.round(1E4*G.scale)/1E4;I=F>=z?G.level:I;H=F>=C?G.level:H}}return p?new x.TilemapCache({layer:this,minLOD:I,maxLOD:H}):v.tileInfo?(G=new f,G.read(v.tileInfo,E),new l(G,I,H)):null}};a.__decorate([e.property({json:{read:{source:"copyrightText"}}})],u.prototype,"copyright",void 0);a.__decorate([e.property()],u.prototype,"minScale",void 0);
a.__decorate([n.reader("service","minScale")],u.prototype,"readMinScale",null);a.__decorate([e.property()],u.prototype,"maxScale",void 0);a.__decorate([n.reader("service","maxScale")],u.prototype,"readMaxScale",null);a.__decorate([e.property({type:A})],u.prototype,"spatialReference",void 0);a.__decorate([e.property({readOnly:!0})],u.prototype,"supportsBlankTile",null);a.__decorate([e.property({type:f})],u.prototype,"tileInfo",void 0);a.__decorate([e.property()],u.prototype,"tilemapCache",void 0);
a.__decorate([n.reader("service","tilemapCache",["capabilities","tileInfo"])],u.prototype,"readTilemapCache",null);a.__decorate([e.property()],u.prototype,"version",void 0);return u=a.__decorate([b.subclass("esri.layers.mixins.ArcGISCachedService")],u)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(c,a,q,e,k,g,h,n,b,f,l,x,A,u,p,v,E,I){var H;a=new a.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});q=H=class extends q.JSONSupport{static create(z={}){const {resolutionFactor:C=1,scales:G,size:F=256,spatialReference:r=A.WebMercator,numLODs:y=24}=z;if(!p.isValid(r)){z=[];if(G)for(var w=0;w<G.length;w++){var D=
G[w];z.push(new E({level:w,scale:D,resolution:D}))}else for(w=5E-4,D=y-1;0<=D;D--)z.unshift(new E({level:D,scale:w,resolution:w})),w*=2;return new H({dpi:96,lods:z,origin:new x(0,0,r),size:[F,F],spatialReference:r})}w=p.getInfo(r);z=z.origin?new x({x:z.origin.x,y:z.origin.y,spatialReference:r}):w?new x({x:w.origin[0],y:w.origin[1],spatialReference:r}):new x({x:0,y:0,spatialReference:r});w=1/(39.37*e.getMetersPerUnitForSR(r)*96);D=[];if(G)for(var K=0;K<G.length;K++){var N=G[K];D.push(new E({level:K,
scale:N,resolution:N*w}))}else{var O=p.isGeographic(r)?512/F*5.916575275917094E8:256/F*5.91657527591555E8;K=Math.ceil(y/C);D.push(new E({level:0,scale:O,resolution:O*w}));for(N=1;N<K;N++)O/=2**C,D.push(new E({level:N,scale:O,resolution:O*w}))}return new H({dpi:96,lods:D,origin:z,size:[F,F],spatialReference:r})}constructor(z){super(z);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:z,origin:C}=this;if(z&&C){const G=p.getInfo(z);return z.isWrappable&&
!!G&&Math.abs(G.origin[0]-C.x)<=G.dx}return!1}readOrigin(z,C){return x.fromJSON({spatialReference:C.spatialReference,...z})}set lods(z){const C=[],G=this._levelToLOD={};z&&z.forEach(F=>{C.push(F.scale);G[F.level]=F});this._set("scales",C);this._set("lods",z);this._initializeUpsampleLevels()}readSize(z,C){return[C.cols,C.rows]}writeSize(z,C){C.cols=z[0];C.rows=z[1]}zoomToScale(z){const C=this.scales;if(0>=z)return C[0];if(z>=C.length-1)return C[C.length-1];const G=Math.floor(z);return C[G]/(C[G]/C[G+
1])**(z-G)}scaleToZoom(z){const C=this.scales,G=C.length-1;let F=0;for(;F<G;F++){const r=C[F],y=C[F+1];if(r<=z)break;if(y===z)return F+1;if(r>z&&y<z)return F+Math.log(r/z)/Math.log(r/y)}return F}tileAt(z,C,G,F){var r=this.lodAt(z);if(!r)return null;let y;if("number"===typeof C)y=C,C=G;else{if(p.equals(C.spatialReference,this.spatialReference))y=C.x,C=C.y;else{F=v.project(C,this.spatialReference);if(null==F)return null;y=F.x;C=F.y}F=G}G=r.resolution*this.size[0];r=r.resolution*this.size[1];F||=new I.TileKey(null,
0,0,0,u.create());F.level=z;F.row=Math.floor((this.origin.y-C)/r+.001);F.col=Math.floor((y-this.origin.x)/G+.001);this.updateTileInfo(F);return F}updateTileInfo(z,C=H.ExtrapolateOptions.NONE){var G=this.lodAt(z.level);G||C!==H.ExtrapolateOptions.POWER_OF_TWO||(C=this.lods[this.lods.length-1],C.level<z.level&&(G=C));if(G){var F=z.level-G.level;C=G.resolution*this.size[0]/2**F;G=G.resolution*this.size[1]/2**F;z.id=`${z.level}/${z.row}/${z.col}`;z.extent||(z.extent=u.create());z.extent[0]=this.origin.x+
z.col*C;z.extent[1]=this.origin.y-(z.row+1)*G;z.extent[2]=z.extent[0]+C;z.extent[3]=z.extent[1]+G}}upsampleTile(z){const C=this._upsampleLevels[z.level];if(!C||-1===C.parentLevel)return!1;z.level=C.parentLevel;z.row=Math.floor(z.row/C.factor+.001);z.col=Math.floor(z.col/C.factor+.001);this.updateTileInfo(z);return!0}getTileBounds(z,C){var G=this.lodAt(C.level);if(null==G)return null;var {resolution:F}=G;G=F*this.size[0];F*=this.size[1];z[0]=this.origin.x+C.col*G;z[1]=this.origin.y-(C.row+1)*F;z[2]=
z[0]+G;z[3]=z[1]+F;return z}lodAt(z){return this._levelToLOD?.[z]??null}clone(){return H.fromJSON(this.write({}))}getCompatibleForVTL(z){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===z)return null;const C=(512===this.size[0]&&256===z?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===z&&0===C)return this;const G=[],F=this.lods.length-C;for(let r=0;r<F;r++){const y=r+C,{scale:w,resolution:D}=0<=y?this.lods[y]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};
G.push(new E({level:r,scale:w,resolution:D}))}return new H({size:[z,z],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:G})}_initializeUpsampleLevels(){const z=this.lods;this._upsampleLevels=[];let C=null;for(let G=0;G<z.length;G++){const F=z[G];this._upsampleLevels[F.level]={parentLevel:C?C.level:-1,factor:C?C.resolution/F.resolution:0};C=F}}};c.__decorate([k.property({type:Number,json:{write:!0}})],q.prototype,
"compressionQuality",void 0);c.__decorate([k.property({type:Number,json:{write:!0}})],q.prototype,"dpi",void 0);c.__decorate([k.property({type:String,json:{read:a.read,write:a.write,origins:{"web-scene":{read:!1,write:!1}}}})],q.prototype,"format",void 0);c.__decorate([k.property({readOnly:!0})],q.prototype,"isWrappable",null);c.__decorate([k.property({type:x,json:{write:!0}})],q.prototype,"origin",void 0);c.__decorate([b.reader("origin")],q.prototype,"readOrigin",null);c.__decorate([k.property({type:[E],
value:null,json:{write:!0}})],q.prototype,"lods",null);c.__decorate([k.property({readOnly:!0})],q.prototype,"scales",void 0);c.__decorate([k.property({cast:z=>Array.isArray(z)?z:"number"===typeof z?[z,z]:[256,256]})],q.prototype,"size",void 0);c.__decorate([b.reader("size",["rows","cols"])],q.prototype,"readSize",null);c.__decorate([l.writer("size",{cols:{type:g.Integer},rows:{type:g.Integer}})],q.prototype,"writeSize",null);c.__decorate([k.property({type:A,json:{write:!0}})],q.prototype,"spatialReference",
void 0);q=H=c.__decorate([f.subclass("esri.layers.support.TileInfo")],q);(function(z){z=z.ExtrapolateOptions||(z.ExtrapolateOptions={});z[z.NONE=0]="NONE";z[z.POWER_OF_TWO=1]="POWER_OF_TWO"})(q||={});return q})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,q,e,k,
g,h){var n;a=n=class extends a.JSONSupport{constructor(b){super(b);this.cols=null;this.level=0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c.__decorate([q.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"cols",void 0);c.__decorate([q.property({type:e.Integer,
json:{write:!0}})],a.prototype,"level",void 0);c.__decorate([q.property({type:String,json:{write:!0}})],a.prototype,"levelValue",void 0);c.__decorate([q.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"origin",void 0);c.__decorate([q.property({type:Number,json:{write:!0}})],a.prototype,"resolution",void 0);c.__decorate([q.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,
"rows",void 0);c.__decorate([q.property({type:Number,json:{write:!0}})],a.prototype,"scale",void 0);return a=n=c.__decorate([h.subclass("esri.layers.support.LOD")],a)})},"esri/layers/support/TileKey":function(){define(["exports"],function(c){class a{constructor(q,e,k,g,h){this.id=q;this.level=e;this.row=k;this.col=g;this.extent=h}}c.TileKey=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfoTilemapCache":function(){define(["../../core/Error","../../core/promiseUtils"],
function(c,a){class q{constructor(e,k=0,g=e.lods[e.lods.length-1].level){this.tileInfo=e;this.minLOD=k;this.maxLOD=g;e.lodAt(k)||(this.minLOD=e.lods[0].level);e.lodAt(g)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,k,g){const h=this.tileInfo?.lodAt(e);return!h||e<this.minLOD||e>this.maxLOD?"unavailable":h.cols&&h.rows?
g>=h.cols[0]&&g<=h.cols[1]&&k>=h.rows[0]&&k<=h.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,k,g,h){await a.waitTick(h);h=this.getAvailability(e,k,g);if("unavailable"===h)throw new c("tile-map:tile-unavailable","Tile is not available",{level:e,row:k,col:g});return h}async fetchAvailabilityUpsample(e,k,g,h,n){await a.waitTick(n);h.level=e;h.row=k;h.col=g;const b=this.tileInfo;b.updateTileInfo(h);return this.fetchAvailability(e,k,g,n).catch(f=>{if(a.isAbortError(f))throw f;if(b.upsampleTile(h))return this.fetchAvailabilityUpsample(h.level,
h.row,h.col,h,n);throw f;})}}return q})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/ByteSizeUnit ../../core/Error ../../core/handleUtils ../../core/has ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(c,a,q,e,k,g,h,n,b,f,l,x,A,u,p,v,E,I,H,z){function C(F,r,y){return new g("tile-map:tile-unavailable","Tile is not available",{level:F,row:r,col:y})}var G;c.TilemapCache=G=class extends e{constructor(F){super(F);this._pendingTilemapRequests={};this.request=q;this.size=32;this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new b.LRUCache(2*k.ByteSizeUnit.MEGABYTES);this.addHandles(x.watch(()=>{const {layer:F}=this;return[F?.parsedUrl,F?.tileServers,F?.apiKey,F?.customParameters]},()=>
this._initializeTilemapDefinition(),x.initial))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(F,r,y){return!this.layer.tileInfo.lodAt(F)||F<this.effectiveMinLOD||F>this.effectiveMaxLOD?"unavailable":(F=this._tilemapFromCache(F,r,y,this._tmpTilemapDefinition))?F.getAvailability(r,y):"unknown"}fetchAvailability(F,r,y,w){return!this.layer.tileInfo.lodAt(F)||
F<this.effectiveMinLOD||F>this.effectiveMaxLOD?Promise.reject(C(F,r,y)):this._fetchTilemap(F,r,y,w).catch(D=>D).then(D=>{if(D instanceof z.Tilemap){D=D.getAvailability(r,y);if("unavailable"===D)throw C(F,r,y);return D}if(l.isAbortError(D))throw D;return"unknown"})}fetchAvailabilityUpsample(F,r,y,w,D){w.level=F;w.row=r;w.col=y;const K=this.layer.tileInfo;K.updateTileInfo(w);const N=this.fetchAvailability(F,r,y,D).catch(O=>{if(l.isAbortError(O))throw O;if(K.upsampleTile(w))return this.fetchAvailabilityUpsample(w.level,
w.row,w.col,w,D);throw O;});this._fetchAvailabilityUpsamplePrefetch(w.id,F,r,y,D,N);return N}async _fetchAvailabilityUpsamplePrefetch(F,r,y,w,D,K){if(this._prefetchingEnabled&&null!=F){var N=`prefetch-${F}`;if(!this.hasHandles(N)){var O=new AbortController;K.then(()=>O.abort(),()=>O.abort());var R=!1;K=h.makeHandle(()=>{R||(R=!0,O.abort())});this.addHandles(K,N);await A.waitTicks(10,O.signal).catch(()=>{});R||(R=!0,this.removeHandles(N));if(!l.isAborted(O))for(F=new H.TileKey(F,r,y,w),D={...D,signal:O.signal},
r=this.layer.tileInfo,y=0;G._prefetches.length<G._maxPrefetch&&r.upsampleTile(F);++y){const T=this.fetchAvailability(F.level,F.row,F.col,D);G._prefetches.push(T);w=()=>{G._prefetches.removeUnordered(T)};T.then(w,w)}}}}_fetchTilemap(F,r,y,w){if(!this.layer.tileInfo.lodAt(F)||F<this.effectiveMinLOD||F>this.effectiveMaxLOD)return Promise.reject(new g("tilemap-cache:level-unavailable",`Level ${F} is unavailable in the service`));const D=this._tmpTilemapDefinition;if(F=this._tilemapFromCache(F,r,y,D))return Promise.resolve(F);
const K=w?.signal;w={...w,signal:null};return new Promise((N,O)=>{l.onAbort(K,()=>O(l.createAbortError()));const R=z.tilemapDefinitionId(D);let T=this._pendingTilemapRequests[R];if(!T){T=z.Tilemap.fromDefinition(D,w).then(X=>{this._tilemapCache.put(R,X,X.byteSize);return X});const Y=()=>{delete this._pendingTilemapRequests[R]};this._pendingTilemapRequests[R]=T;T.then(Y,Y)}T.then(N,O)})}_initializeTilemapDefinition(){if(this.layer.parsedUrl){var {parsedUrl:F,apiKey:r,customParameters:y}=this.layer;
this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:F.path,query:u.objectToQuery({...F.query,...y,token:r??F.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}}_tilemapFromCache(F,r,y,w){w.level=F;w.row=r-r%this.size;w.col=y-y%this.size;F=z.tilemapDefinitionId(w);return this._tilemapCache.get(F)}get test(){}};c.TilemapCache._maxPrefetch=4;c.TilemapCache._prefetches=new f({initialSize:G._maxPrefetch});a.__decorate([p.property({constructOnly:!0})],
c.TilemapCache.prototype,"layer",void 0);a.__decorate([p.property({constructOnly:!0})],c.TilemapCache.prototype,"minLOD",void 0);a.__decorate([p.property({constructOnly:!0})],c.TilemapCache.prototype,"maxLOD",void 0);a.__decorate([p.property({constructOnly:!0})],c.TilemapCache.prototype,"request",void 0);a.__decorate([p.property({constructOnly:!0})],c.TilemapCache.prototype,"size",void 0);c.TilemapCache=G=a.__decorate([I.subclass("esri.layers.support.TilemapCache")],c.TilemapCache);Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(c){c.ByteSizeUnit=void 0;var a=c.ByteSizeUnit||(c.ByteSizeUnit={});a[a.KILOBYTES=1024]="KILOBYTES";a[a.MEGABYTES=1048576]="MEGABYTES";a[a.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../request ../../core/Error ../../core/lang ../../core/typedArrayUtil ../../geometry/support/UintArray".split(" "),
function(c,a,q,e,k,g){function h(b){if(b.service.tileServers?.length){var f=b.service.tileServers;f=`${f&&f.length?f[b.row%f.length]:b.service.url}/tilemap/${b.level}/${b.row}/${b.col}/${b.width}/${b.height}`}else f=`${b.service.url}/tilemap/${b.level}/${b.row}/${b.col}/${b.width}/${b.height}`;(b=b.service.query)&&(f=`${f}?${b}`);return f}class n{constructor(b){if(!b?.location)throw new q("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new q("tilemap:invalid",
"Tilemap response was marked as invalid");if(!b.data)throw new q("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new q("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new q("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");const {location:f,data:l}=b;this.location=Object.freeze(e.clone(f));let x=b=!0;const A=g.newUintArray(Math.ceil(this.location.width*
this.location.height/32));let u=0;for(let p=0;p<l.length;p++){const v=p%32;l[p]?(x=!1,A[u]|=1<<v):b=!1;31===v&&++u}x?(this._availability="unavailable",this.byteSize=40):b?(this._availability="available",this.byteSize=40):(this._availability=A,this.byteSize=40+k.estimateSize(A))}getAvailability(b,f){if("unavailable"===this._availability||"available"===this._availability)return this._availability;b=(b-this.location.top)*this.location.width+(f-this.location.left);f=b>>5;const l=this._availability;return 0>
f||f>l.length?"unknown":l[f]&1<<b%32?"available":"unavailable"}static fromDefinition(b,f){const l=b.service.request||a,{row:x,col:A,width:u,height:p}=b,v={query:{f:"json"}};f=f?{...v,...f}:v;return l(h(b),f).then(E=>E.data).catch(E=>{if(422===E?.details?.httpStatus)return{location:{top:x,left:A,width:u,height:p},valid:!0,data:Array(u*p).fill(0)};throw E;}).then(E=>{if(E.location&&(E.location.top!==x||E.location.left!==A||E.location.width!==u||E.location.height!==p))throw new q("tilemap:location-mismatch",
"Tilemap response for different location than requested",{response:E,definition:{top:x,left:A,width:u,height:p}});return n.fromJSON(E)})}static fromJSON(b){return Object.freeze(new n(b))}}c.Tilemap=n;c.tilemapDefinitionId=function(b){return`${b.level}/${b.row}/${b.col}/${b.width}/${b.height}`};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/UintArray":function(){define(["exports","../../core/typedArrayUtil"],function(c,a){c.newUintArray=function(q,e=!1){return q<=
a.nativeArrayMaxSize?e?Array(q).fill(0):Array(q):new Uint32Array(q)};c.uintSubArray=function(q,e,k){return Array.isArray(q)?q.slice(e,e+k):q.subarray(e,e+k)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(c){let a=null;c.checkWebPSupport=function(q){if(a)return a;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",
animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return a=new Promise(k=>{const g=new Image;g.onload=()=>{g.onload=g.onerror=null;k(0<g.width&&0<g.height)};g.onerror=()=>{g.onload=g.onerror=null;k(!1)};g.src="data:image/webp;base64,"+e[q]})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/SpriteSource":function(){define(["../../request","../../core/Error","../../core/Logger","../../core/typedArrayUtil",
"../../core/urlUtils"],function(c,a,q,e,k){function g(n){var b=document.createElement("canvas");const f=b.getContext("2d");b.width=n.width;b.height=n.height;f.drawImage(n,0,0,n.width,n.height);b=f.getImageData(0,0,n.width,n.height);return{width:n.width,height:n.height,data:new Uint8Array(b.data)}}class h{constructor(n,b){this._spriteSource=n;this._maxTextureSize=b;this.devicePixelRatio=1;this._spriteImageFormat="png";this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus=
"not-loaded";"url"===n.type&&n.spriteFormat&&(this._spriteImageFormat=n.spriteFormat);n.pixelRatio&&(this.devicePixelRatio=n.pixelRatio);this.baseURL=n.spriteUrl}get spriteNames(){const n=[];for(const b in this._spritesData)n.push(b);n.sort();return n}getSpriteInfo(n){return this._spritesData?this._spritesData[n]:null}async load(n){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(n),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(n){this._isRetina=
1.15<this.devicePixelRatio;const {width:b,height:f,data:l,json:x}=await this._getSpriteData(this._spriteSource,n);if((n=Object.keys(x))&&0!==n.length&&l){this._spritesData=x;this.width=b;this.height=f;n=Math.max(this._maxTextureSize,4096);if(b>n||f>n)throw n=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${n} pixels}`,q.getLogger("esri.layers.support.SpriteSource").error(n),new a("SpriteSource",n);for(let A=0;A<l.length;A+=4)n=l[A+3]/255,l[A]*=n,l[A+1]*=n,l[A+2]*=
n;this.image=l}else this._spritesData=this.image=null,this.width=this.height=0}async _getSpriteData(n,b){if("image"===n.type){if(1.15>this.devicePixelRatio){if(!n.spriteSource1x)throw new a("SpriteSource","no image data provided for low resolution sprites!");b=n.spriteSource1x.image;n=n.spriteSource1x.json}else{if(!n.spriteSource2x)throw new a("SpriteSource","no image data provided for high resolution sprites!");b=n.spriteSource2x.image;n=n.spriteSource2x.json}return"width"in b&&"height"in b&&"data"in
b&&(e.isArrayBuffer(b.data)||e.isUint8ClampedArray(b.data))?{width:b.width,height:b.height,data:new Uint8Array(b.data),json:n}:{...g(b),json:n}}n=k.urlToObject(this.baseURL);const f=n.query?"?"+k.objectToQuery(n.query):"",l=this._isRetina?"@2x":"",x=`${n.path}${l}.${this._spriteImageFormat}${f}`,[A,u]=await Promise.all([c(`${n.path}${l}.json${f}`,b),c(x,{responseType:"image",...b})]);return{...g(u.data),json:A.data}}}return h})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../request ../../core/lang ../../core/promiseUtils ../../core/urlUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(c,a,q,e,k,g,h,n){function b(...u){let p=void 0;for(const v of u)null!=v&&(k.isProtocolRelative(v)?p&&=p.split("://")[0]+":"+v.trim():p=k.isAbsolute(v)?v:k.join(p,v));return p?k.removeTrailingSlash(p):void 0}async function f(u,p,v,E,I){e.throwIfAborted(I);let H,z;if("string"===typeof v){v=k.normalize(v);var C=await a(v,{...I,responseType:"json",query:{f:"json",...I?.query}});C.ssl&&(H&&=H.replace(/^http:/i,"https:"),z&&=z.replace(/^http:/i,"https:"));z=H=v}else null!=v&&(C={data:v},H=v.jsonUrl||
null,z=E);if((C=C?.data)&&"sources"in C&&C.sources)return u.styleUrl=H||null,x(u,C,z,I);if(!(C&&"sources"in C&&C.sources))return u.sourceUrl?A(u,C,z,!1,p,I):(u.sourceUrl=H||null,A(u,C,z,!0,p,I));throw Error("You must specify the URL or the JSON for a service or for a style.");}function l(u){return"object"===typeof u&&!!u&&"tilejson"in u&&null!=u.tilejson}async function x(u,p,v,E){v=v?k.removeFile(v):k.getAppBaseUrl();u.styleBase=v;u.style=p;p["sprite-format"]&&"webp"===p["sprite-format"].toLowerCase()&&
(u.spriteFormat="webp");const I=[];if(p.sources&&p.sources.esri){const H=p.sources.esri;H.url?await f(u,"esri",b(v,H.url),void 0,E):I.push(f(u,"esri",H,v,E))}for(const H of Object.keys(p.sources))"esri"!==H&&"vector"===p.sources[H].type&&(p.sources[H].url?I.push(f(u,H,b(v,p.sources[H].url),void 0,E)):p.sources[H].tiles&&I.push(f(u,H,p.sources[H],v,E)));await Promise.all(I)}async function A(u,p,v,E,I,H){v=v?k.removeTrailingSlash(v)+"/":k.getAppBaseUrl();if(p.hasOwnProperty("tileInfo")){var z=p?.tileInfo;
null!=z&&(null==z.rows&&(z.rows=512),null==z.cols&&(z.cols=512));z=p}else{z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100,latestWkid:3857}};var C=null;if(l(p)){var {bounds:G}=p;G&&(C=h.geographicToWebMercator({x:G[0],y:G[1],spatialReference:q.clone(g.wgs84)}),G=h.geographicToWebMercator({x:G[2],y:G[3],spatialReference:q.clone(g.wgs84)}),C={xmin:C.x,ymin:C.y,xmax:G.x,ymax:G.y,spatialReference:q.clone(g.webMercator)})}null===
C&&(C=z);G=78271.51696400007;var F=2.958287637957775E8,r=[],y=p.hasOwnProperty("maxzoom")&&null!=p.maxzoom?+p.maxzoom:22;for(let w=0;w<=y;w++)r.push({level:w,scale:F,resolution:G}),G/=2,F/=2;z={capabilities:"TilesOnly",initialExtent:C,fullExtent:z,minScale:0,maxScale:0,tiles:p.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:r,spatialReference:q.clone(g.webMercator)}}}C=new n(I,k.addQueryParameters(v,H?.query??{}),z);if(!E&&u.primarySourceName in
u.sourceNameToSource){G=u.sourceNameToSource[u.primarySourceName];if(!G.isCompatibleWith(C))return;null!=C.fullExtent&&(null!=G.fullExtent?G.fullExtent.union(C.fullExtent):G.fullExtent=C.fullExtent.clone());G.tileInfo&&C.tileInfo&&G.tileInfo.lods.length<C.tileInfo.lods.length&&(G.tileInfo=C.tileInfo)}E&&(u.sourceBase=v,u.source=p,u.validatedSource=z,u.primarySourceName=I);u.sourceNameToSource[I]=C;if(!l(u)&&"defaultStyles"in p&&!u.style){if(null==p.defaultStyles)throw Error();return"string"===typeof p.defaultStyles?
f(u,"",b(v,p.defaultStyles,"root.json"),void 0,H):f(u,"",p.defaultStyles,b(v,"root.json"),H)}}c.loadMetadata=async function(u,p){const v={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[E,I]="string"===typeof u?[u,null]:[null,u.jsonUrl];await f(v,"esri",u,I,p);return{layerDefinition:v.validatedSource,url:E,serviceUrl:v.sourceUrl,style:v.style,styleUrl:v.styleUrl,spriteUrl:v.style.sprite&&
b(v.styleBase,v.style.sprite),spriteFormat:v.spriteFormat,glyphsUrl:v.style.glyphs&&b(v.styleBase,v.style.glyphs),sourceNameToSource:v.sourceNameToSource,primarySourceName:v.primarySourceName}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/TileInfo ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(c,a,q,e,k,g,h,n){class b{constructor(f,l,x){this.initialExtent=this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=f;this.sourceUrl=l;f=a.urlToObject(this.sourceUrl);l=c.clone(x);var A=l.tiles;if(f)for(var u=0;u<A.length;u++){var p=a.urlToObject(A[u]);p&&(a.isAbsolute(p.path)||(p.path=a.join(f.path,p.path)),A[u]=a.addQueryParameters(p.path,{...f.query,...p.query}))}this.tileServers=A;u=x.capabilities&&x.capabilities.split(",").map(v=>v.toLowerCase().trim());A=!0===
x?.exportTilesAllowed;u=!0===u?.includes("tilemap");p=A&&x.hasOwnProperty("maxExportTilesCount")?x.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:A,supportsTileMap:u},exportTiles:A?{maxExportTilesCount:+p}:null};this.tileInfo=e.fromJSON(l.tileInfo);A=x.tileMap?a.addQueryParameters(a.join(f.path,x.tileMap),f.query??{}):null;u?(this.type="vector-tile",this.tilemap=new h(new k.TilemapCache({layer:{parsedUrl:f,tileInfo:this.tileInfo},minLOD:l.minLOD??this.tileInfo.lods[0].level,
maxLOD:l.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),A)):A&&(this.tilemap=new g(A));this.fullExtent=q.fromJSON(x.fullExtent);this.initialExtent=q.fromJSON(x.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(f,l){return this.tilemap?this.tilemap.dataKey(f,l):f}requestTile(f,l,x,A){return n.request(this.tileServers[l%this.tileServers.length],f,l,x,A)}isCompatibleWith(f){var l=this.tileInfo;f=f.tileInfo;if(!l.spatialReference.equals(f.spatialReference)||!l.origin.equals(f.origin)||
Math.round(l.dpi)!==Math.round(f.dpi))return!1;l=l.lods;f=f.lods;const x=Math.min(l.length,f.length);for(let A=0;A<x;A++){const u=l[A],p=f[A];if(u.level!==p.level||Math.round(u.scale)!==Math.round(p.scale))return!1}return!0}}return b})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(c,a,q){class e{constructor(k){this.url=k}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){this._tileIndexPromise||
(this._tileIndexPromise=c(this.url).then(k=>k.data.index));return this._tileIndexPromise}async dataKey(k,g){const h=await this.fetchTileIndex();a.throwIfAborted(g);return this._getIndexedDataKey(h,k)}_getIndexedDataKey(k,g){const h=[g];if(0>g.level||0>g.row||0>g.col||0<g.row>>g.level||0<g.col>>g.level)return null;for(;0!==g.level;)g=new q(g.level-1,g.row>>1,g.col>>1,g.world),h.push(g);g=h.pop();let n,b;if(1===k)return g;for(;h.length;)if(n=h.pop(),b=(n.col&1)+((n.row&1)<<1),k){if(0===k[b]){g=null;
break}if(1===k[b]){g=n;break}g=n;k=k[b]}return g}}return e})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],function(c){class a{static getId(q,e,k,g){return"object"===typeof q?`${q.level}/${q.row}/${q.col}/${q.world}`:`${q}/${e}/${k}/${g}`}constructor(q,e,k,g){this.set(q,e,k,g)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(q){this.set(q)}get hash(){return(this.world&3)<<30|(this.col&4095)<<
22|(this.row&4095)<<8|this.level&63}acquire(q,e,k,g){this.set(q,e,k,g)}contains(q){const e=q.level-this.level;return 0<=e&&this.row===q.row>>e&&this.col===q.col>>e&&this.world===q.world}containsChild(q){const e=q.level-this.level;return 0<e&&this.row===q.row>>e&&this.col===q.col>>e&&this.world===q.world}equals(q){return this.level===q.level&&this.row===q.row&&this.col===q.col&&this.world===q.world}clone(){return new a(this)}release(){this.world=this.col=this.row=this.level=0}set(q,e,k,g){if(null==
q)this.world=this.col=this.row=this.level=0;else if("object"===typeof q)this.level=q.level||0,this.row=q.row||0,this.col=q.col||0,this.world=q.world||0;else if("string"===typeof q){const [h,n,b,f]=q.split("/");this.level=parseFloat(h);this.row=parseFloat(n);this.col=parseFloat(b);this.world=parseFloat(f)}else this.level=+q,this.row=+e,this.col=+k,this.world=+g||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new a(this.level-
1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(q,e,k){const g=this.clone();g.col+=q;g.row+=e;k.normalizeKey(g);return g}getChildKeys(){const q=this.level+1,e=this.row<<1,k=this.col<<1,g=this.world;return[new a(q,e,k,g),new a(q,e,k+1,g),new a(q,e+1,k,g),new a(q,e+1,k+1,g)]}compareRowMajor(q){return this.row<q.row?-1:this.row>q.row?1:this.col<q.col?-1:this.col>q.col?1:0}}a.pool=new c(a,null,null,25,50);return a})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../request",
"../../../../core/maybe","../../../../core/promiseUtils","../../tiling/TileKey"],function(c,a,q,e){class k{constructor(g,h){this._tilemap=g;this._tileIndexUrl=h}destroy(){this._tilemap=a.destroyMaybe(this._tilemap);this._tileIndexPromise=null}async fetchTileIndex(g){this._tileIndexPromise||(this._tileIndexPromise=c(this._tileIndexUrl,{query:{...g?.query}}).then(h=>h.data.index));return this._tileIndexPromise}dataKey(g,h){const {level:n,row:b,col:f}=g,l=new e(g);return this._tilemap.fetchAvailabilityUpsample(n,
b,f,l,h).then(()=>{l.world=g.world;return l}).catch(x=>{if(q.isAbortError(x))throw x;return null})}}return k})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define("exports ../../../../../request ../../../../../core/lang ../../../../../core/MapUtils ../../../../../core/promiseUtils ../../../../../core/urlUtils".split(" "),function(c,a,q,e,k,g){function h(f,l){return e.getOrCreateMapValue(b,f,()=>new n(f)).getData(l).finally(()=>b.delete(f))}class n{constructor(f){this._tileUrl=
f;this._abortController=this._promise=null;this._abortOptions=[]}getData(f){if(null==this._promise||k.isAborted(this._abortController?.signal))this._promise=this._makeRequest(this._tileUrl);const l=this._abortOptions;l.push(f);k.onAbort(f,()=>{l.every(x=>k.isAborted(x))&&this._abortController.abort()});return this._promise.then(x=>q.clone(x))}async _makeRequest(f){this._abortController=new AbortController;({data:f}=await a(f,{responseType:"array-buffer",signal:this._abortController.signal}));return f}}
const b=new Map;c.request=function(f,l,x,A,u){f=g.urlToObject(f);const p=f.query;if(p)for(const [v,E]of Object.entries(p))switch(E){case "{x}":p[v]=A.toString();break;case "{y}":p[v]=x.toString();break;case "{z}":p[v]=l.toString()}l=g.addQueryParameters(f.path.replaceAll(/\{z\}/gi,l.toString()).replaceAll(/\{y\}/gi,x.toString()).replaceAll(/\{x\}/gi,A.toString()),{...f.query});return h(l,u)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports",
"../../core/urlUtils","../Portal"],function(c,a,q){function e(k,g){return{origin:g,url:a.urlToObject(k.itemUrl),portal:k.portal||q.getDefault(),portalItem:k}}c.createForItemRead=function(k,g){return{...e(k,g),readResourcePaths:[]}};c.createForItemWrite=function(k,g,h){const n=a.urlToObject(k.itemUrl);return{...e(k,g),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:n?{rootPath:n.path,writtenUrls:[]}:null,resources:h?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:
null}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../geometry/Point","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(c,a,q,e){c.areSchemasOverlapping=function(k,g){if(k===g)return!0;if(null==k&&null!=g||null!=k&&null==g||null==k||null==g||!k.spatialReference.equals(g.spatialReference)||k.dpi!==g.dpi)return!1;var h=k.origin;const n=g.origin;if(1E-6<=Math.abs(h.x-
n.x)||1E-6<=Math.abs(h.y-n.y))return!1;k.lods[0].scale>g.lods[0].scale?(h=k,k=g):h=g;for(g=h.lods[0].scale;g>=k.lods[k.lods.length-1].scale-1E-6;g/=2)if(1E-6>Math.abs(g-k.lods[0].scale))return!0;return!1};c.unionTileInfos=function(k,g){if(k===g)return k;if(null==k&&null!=g)return g;if(null!=k&&null==g)return k;if(null==k||null==g)return null;const h=k.size[0],n=k.format,b=k.dpi,f=new a({x:k.origin.x,y:k.origin.y}),l=k.spatialReference;var x=k.lods[0].scale>g.lods[0].scale?k.lods[0]:g.lods[0];k=(k.lods[k.lods.length-
1].scale<=g.lods[g.lods.length-1].scale?k.lods[k.lods.length-1]:g.lods[g.lods.length-1]).scale;g=[];let A=x.scale;x=x.resolution;let u=0;for(;A>k;)g.push(new q({level:u,resolution:x,scale:A})),u++,A/=2,x/=2;return new e({size:[h,h],dpi:b,format:n||"pbf",origin:f,lods:g,spatialReference:l})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(c,a){class q{constructor(e){this._style=
e;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;e.layers||(e.layers=[]);this.version=parseFloat(e.version);if(this.layers=e.layers.map((k,g,h)=>this._create(k,g,h)).filter(k=>!!k))for(e=0;e<this.layers.length;e++){const k=this.layers[e];this._layerByName[k.id]=k;this._uidToLayer.set(k.uid,k);k.type===c.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(k.id)}this._identifyRefLayers()}isPainterDataDriven(e){return(e=this._layerByName[e])?e.isPainterDataDriven():
!1}getStyleLayerId(e){return e>=this.layers.length?null:this.layers[e].id}getStyleLayerByUID(e){return this._uidToLayer.get(e)??null}getStyleLayerIndex(e){return(e=this._layerByName[e])?this.layers.indexOf(e):-1}setStyleLayer(e,k){if(e?.id){var g=this._style;null!=k&&k>=this.layers.length&&(k=this.layers.length-1);var h=!0,n;if(n=this._layerByName[e.id]){const b=this.layers.indexOf(n);k||=b;k===b?(h=!1,n=q._recreateLayer(e,n),this.layers[k]=n,g.layers[k]=e):(this.layers.splice(b,1),g.layers.splice(b,
1),n=this._create(e,k,this.layers),this.layers.splice(k,0,n),g.layers.splice(k,0,e))}else n=this._create(e,k,this.layers),!k||k>=this.layers.length?(this.layers.push(n),g.layers.push(e)):(this.layers.splice(k,0,n),g.layers.splice(k,0,e));this._layerByName[e.id]=n;this._uidToLayer.set(n.uid,n);h&&this._recomputeZValues();this._identifyRefLayers()}}getStyleLayer(e){return(e=this._layerByName[e])?{type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,
filter:e.filter,layout:e.layout,paint:e.paint}:null}deleteStyleLayer(e){const k=this._layerByName[e];k&&(delete this._layerByName[e],this._uidToLayer.delete(k.uid),e=this.layers.indexOf(k),this.layers.splice(e,1),this._style.layers.splice(e,1),this._recomputeZValues(),this._identifyRefLayers())}getLayerById(e){return this._layerByName[e]}getLayoutProperties(e){return(e=this._layerByName[e])?e.layout:null}getPaintProperties(e){return(e=this._layerByName[e])?e.paint:null}setPaintProperties(e,k){if(e=
this._layerByName[e]){var g=q._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:k},e),h=this.layers.indexOf(e);this.layers[h]=g;this._style.layers[h].paint=k;this._layerByName[e.id]=g;this._uidToLayer.set(e.uid,g)}}setLayoutProperties(e,k){if(e=this._layerByName[e]){var g=q._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,
filter:e.filter,layout:k,paint:e.paint},e),h=this.layers.indexOf(e);this.layers[h]=g;this._style.layers[h].layout=k;this._layerByName[e.id]=g;this._uidToLayer.set(e.uid,g)}}setStyleLayerVisibility(e,k){if(e=this._layerByName[e]){var g=e.layout||{};g.visibility=k;k=q._recreateLayer({type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:g,paint:e.paint},e);var h=this.layers.indexOf(e);this.layers[h]=k;this._style.layers[h].layout=
g;this._layerByName[e.id]=k;this._uidToLayer.set(e.uid,k)}}getStyleLayerVisibility(e){return(e=this._layerByName[e])?e.layout?.visibility??"visible":"none"}_recomputeZValues(){const e=this.layers,k=1/(e.length+1);for(let g=0;g<e.length;g++)e[g].z=1-(1+g)*k}_identifyRefLayers(){const e=[],k=[];let g=0;for(const b of this.layers){const f=b.layout;if(b.type===c.StyleLayerType.FILL){var h=b,n=b.source+"|"+b.sourceLayer;n+="|"+(f?.visibility??"");n+="|"+b.minzoom;n+="|"+b.maxzoom;n+="|"+JSON.stringify(b.filter);
if(h.hasDataDrivenFill||h.hasDataDrivenOutline)n+="|"+g;e.push({key:n,layer:b})}else if(b.type===c.StyleLayerType.LINE){h=b;n=b.paint;n=null!=n&&(null!=n["line-pattern"]||null!=n["line-dasharray"]);let l=b.source+"|"+b.sourceLayer;l+="|"+(f?.visibility??"");l+="|"+b.minzoom;l+="|"+b.maxzoom;l+="|"+JSON.stringify(b.filter);l+="|"+(void 0!==f?f["line-cap"]:"");l+="|"+(void 0!==f?f["line-join"]:"");if(h.hasDataDrivenLine||n)l+="|"+g;k.push({key:l,layer:b})}++g}this._assignRefLayers(e);this._assignRefLayers(k)}_assignRefLayers(e){e.sort((f,
l)=>f.key<l.key?-1:f.key>l.key?1:0);let k,g;const h=e.length;for(let f=0;f<h;f++){const l=e[f];if(l.key===k)l.layer.refLayerId=g;else if(k=l.key,g=l.layer.id,l.layer.type===c.StyleLayerType.FILL){if(!l.layer.getPaintProperty("fill-outline-color"))for(var n=f+1;n<h;n++){var b=e[n];if(b.key===k){if(b.layer.getPaintProperty("fill-outline-color")){e[f]=b;e[n]=l;g=b.layer.id;break}}else break}}else if(l.layer.type===c.StyleLayerType.LINE)for(n=l.layer,b=f+1;b<h;b++){const x=e[b];if(x.key!==k)break;const A=
x.layer;if(n.canUseThinTessellation&&!A.canUseThinTessellation||!n.canUseThinTessellation&&(A.getPaintProperty("line-pattern")||A.getPaintProperty("line-dasharray")))n=A,e[f]=x,e[b]=l,g=x.layer.id}}}_create(e,k,g){k=1-1/(g.length+1)*(1+k);g=this._runningId++;switch(e.type){case "background":return new a.BackgroundStyleLayer(c.StyleLayerType.BACKGROUND,e,k,g);case "fill":return new a.FillStyleLayer(c.StyleLayerType.FILL,e,k,g);case "line":return new a.LineStyleLayer(c.StyleLayerType.LINE,e,k,g);case "symbol":return new a.SymbolStyleLayer(c.StyleLayerType.SYMBOL,
e,k,g);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new a.CircleStyleLayer(c.StyleLayerType.CIRCLE,e,k,g)}return null}static _recreateLayer(e,k){switch(e.type){case "background":return new a.BackgroundStyleLayer(c.StyleLayerType.BACKGROUND,e,k.z,k.uid);case "fill":return new a.FillStyleLayer(c.StyleLayerType.FILL,e,k.z,k.uid);case "line":return new a.LineStyleLayer(c.StyleLayerType.LINE,e,k.z,k.uid);case "symbol":return new a.SymbolStyleLayer(c.StyleLayerType.SYMBOL,
e,k.z,k.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${e.id}`);break;case "circle":return new a.CircleStyleLayer(c.StyleLayerType.CIRCLE,e,k.z,k.uid)}return null}}return q})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../symbols/cim/enums"],function(c,a){c.StyleLayerType=void 0;(function(e){e[e.BACKGROUND=0]="BACKGROUND";e[e.FILL=1]="FILL";e[e.LINE=2]="LINE";e[e.SYMBOL=3]="SYMBOL";e[e.CIRCLE=4]="CIRCLE"})(c.StyleLayerType||
(c.StyleLayerType={}));c.Visibility=void 0;(function(e){e[e.VISIBLE=0]="VISIBLE";e[e.NONE=1]="NONE"})(c.Visibility||(c.Visibility={}));c.SymbolPlacement=void 0;(function(e){e[e.POINT=0]="POINT";e[e.LINE=1]="LINE";e[e.LINE_CENTER=2]="LINE_CENTER"})(c.SymbolPlacement||(c.SymbolPlacement={}));c.RotationAlignment=void 0;(function(e){e[e.MAP=0]="MAP";e[e.VIEWPORT=1]="VIEWPORT";e[e.AUTO=2]="AUTO"})(c.RotationAlignment||(c.RotationAlignment={}));c.TextJustification=void 0;(function(e){e[e.AUTO=0]="AUTO";
e[e.LEFT=1]="LEFT";e[e.CENTER=2]="CENTER";e[e.RIGHT=3]="RIGHT"})(c.TextJustification||(c.TextJustification={}));c.SymbolAnchor=void 0;(function(e){e[e.CENTER=0]="CENTER";e[e.LEFT=1]="LEFT";e[e.RIGHT=2]="RIGHT";e[e.TOP=3]="TOP";e[e.BOTTOM=4]="BOTTOM";e[e.TOP_LEFT=5]="TOP_LEFT";e[e.TOP_RIGHT=6]="TOP_RIGHT";e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT";e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"})(c.SymbolAnchor||(c.SymbolAnchor={}));c.TextTransform=void 0;(function(e){e[e.NONE=0]="NONE";e[e.UPPERCASE=1]="UPPERCASE";e[e.LOWERCASE=
2]="LOWERCASE"})(c.TextTransform||(c.TextTransform={}));c.TranslateAnchor=void 0;(function(e){e[e.MAP=0]="MAP";e[e.VIEWPORT=1]="VIEWPORT"})(c.TranslateAnchor||(c.TranslateAnchor={}));c.TextWritingMode=void 0;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL";e[e.VERTICAL=1]="VERTICAL"})(c.TextWritingMode||(c.TextWritingMode={}));class q{}q.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:c.Visibility.VISIBLE}};q.fillLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:c.Visibility.VISIBLE}};q.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:c.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:a.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:a.JoinType.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};q.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:c.Visibility.VISIBLE},
"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:c.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:c.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},
"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:c.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",
values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:c.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:c.TextJustification.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},
"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:c.RotationAlignment.AUTO},"text-size":{type:"number",minimum:0,default:16},
"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:c.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[c.TextWritingMode.HORIZONTAL]}};q.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:c.Visibility.VISIBLE}};q.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};
q.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:c.TranslateAnchor.MAP}};q.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",
default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:c.TranslateAnchor.MAP},"line-width":{type:"number",minimum:0,default:1}};q.symbolPaintDefinition={"icon-color":{type:"color",
default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:c.TranslateAnchor.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},
"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:c.TranslateAnchor.MAP}};q.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",
minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};q.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",
minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:c.TranslateAnchor.MAP}};c.StyleDefinition=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../geometry/support/aaBoundingRect ../enums ../GeometryUtils ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(c,a,q,e,k,g,h,n,b,f,l,x,A){function u(r){r=r?.getGeometry();if(null==r)return null;let y=Infinity,w=Infinity,D=-Infinity,K=-Infinity;for(const N of r)if(N)for(const O of N)y=Math.min(y,O.x),w=Math.min(w,O.y),D=Math.max(D,O.x),K=Math.max(K,O.y);return a.fromValues(y,w,D,K)}c.CapType=void 0;(function(r){r[r.BUTT=0]="BUTT";r[r.ROUND=1]="ROUND";r[r.SQUARE=2]="SQUARE";r[r.UNKNOWN=4]="UNKNOWN"})(c.CapType||(c.CapType={}));class p{constructor(r,y,w,D,K,N){this.layer=r;this.feature=y;this.bounds=
w;this.normalizationRatio=D;this.normalizationOffsetX=K;this.normalizationOffsetY=N}}class v{constructor(r,y,w,D){this.type=r;this.typeName=y.type;this.id=y.id;this.source=y.source;this.sourceLayer=y["source-layer"];this.minzoom=y.minzoom;this.maxzoom=y.maxzoom;this.filter=y.filter;this.layout=y.layout;this.paint=y.paint;this.z=w;this.uid=D;switch(r){case l.StyleLayerType.BACKGROUND:this._layoutDefinition=l.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=l.StyleDefinition.backgroundPaintDefinition;
break;case l.StyleLayerType.FILL:this._layoutDefinition=l.StyleDefinition.fillLayoutDefinition;this._paintDefinition=l.StyleDefinition.fillPaintDefinition;break;case l.StyleLayerType.LINE:this._layoutDefinition=l.StyleDefinition.lineLayoutDefinition;this._paintDefinition=l.StyleDefinition.linePaintDefinition;break;case l.StyleLayerType.SYMBOL:this._layoutDefinition=l.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=l.StyleDefinition.symbolPaintDefinition;break;case l.StyleLayerType.CIRCLE:this._layoutDefinition=
l.StyleDefinition.circleLayoutDefinition,this._paintDefinition=l.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=f.createFilter(this.filter)}getLayoutProperty(r){return this._layoutProperties[r]}getPaintProperty(r){return this._paintProperties[r]}getLayoutValue(r,y,w){let D;const K=this._layoutProperties[r];K&&
(D=K.getValue(y,w));void 0===D&&(D=this._layoutDefinition[r]["default"]);return D}getPaintValue(r,y,w){let D;const K=this._paintProperties[r];K&&(D=K.getValue(y,w));void 0===D&&(D=this._paintDefinition[r]["default"]);return D}isPainterDataDriven(){const r=this._paintProperties;if(r)for(const y in r)if(r[y].isDataDriven)return!0;return!1}isIntersectingFeature(r,y,w,D,K,N,O){return!1}getFeatureInflatedBounds(r,y,w,D){return null}_parseLayout(r){const y={};for(const w in r){const D=this._layoutDefinition[w];
D&&(y[w]=new x(D,r[w]))}return y}_parsePaint(r){const y={};for(const w in r){const D=this._paintDefinition[w];D&&(y[w]=new x(D,r[w]))}return y}computeAttributesKey(r,y,w,D){let K=0,N=0;for(const O of y){y=3;if(!O||O!==D){const {isLayout:R,isOptional:T}=w[O];y=R?this.getLayoutProperty(O):this.getPaintProperty(O);y=y?.interpolator?2:y?.isDataDriven?1:T&&!y?3:0}N|=y<<K;K+=2}return N<<3|r}}class E extends v{constructor(r,y,w,D){super(r,y,w,D);this.backgroundMaterial=new k.VTLBackgroundMaterial(this.computeAttributesKey(q.ShaderProgramType.BACKGROUND,
k.VTLBackgroundMaterial.ATTRIBUTES,k.VTLBackgroundMaterial.ATTRIBUTES_INFO))}}class I extends v{constructor(r,y,w,D){super(r,y,w,D);r=this.getPaintProperty("fill-color");y=this.getPaintProperty("fill-opacity");w=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=r?.isDataDriven;this.hasDataDrivenOpacity=y?.isDataDriven;this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||w?.isDataDriven;y=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!y;this.hasDataDrivenOutlineColor=
y?.isDataDriven;this.hasDataDrivenOutline=y?y.isDataDriven:r?r.isDataDriven:!1;this.hasDataDrivenOutline=(y?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity;this.fillMaterial=new h.VTLFillMaterial(this.computeAttributesKey(q.ShaderProgramType.FILL,h.VTLFillMaterial.ATTRIBUTES,h.VTLFillMaterial.ATTRIBUTES_INFO));this.outlineMaterial=new h.VTLOutlineMaterial(this.computeAttributesKey(q.ShaderProgramType.OUTLINE,this.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_FILL:
h.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?h.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:h.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(r,y,w,D){w=u(r);if(!w)return null;r=this.getPaintValue("fill-translate",y,r);D*=Math.max(r[0],r[1]);w[0]-=D;w[2]-=D;w[1]+=D;w[3]+=D;return w}isIntersectingFeature(r,y,w,D,K,N,O){const R=D.getGeometry();if(!R)return!1;const T=8/O.normalizationRatio;r=r/O.normalizationRatio+O.normalizationOffsetX;
y=y/O.normalizationRatio+O.normalizationOffsetY;D=e.translateAnchor(this.getPaintValue("fill-translate",K,D),this.getPaintValue("fill-translate-anchor",K,D),N,8);r-=T*D.x;y-=T*D.y;return e.pointInPolygon(r,y,R)?!0:e.distanceFromToPolylineWithinThreshold(r,y,R,T*w)}}class H extends v{constructor(r,y,w,D){super(r,y,w,D);r=this.getPaintProperty("line-pattern");this.lineMaterial=new n.VTLLineMaterial(this.computeAttributesKey(q.ShaderProgramType.LINE,n.VTLLineMaterial.ATTRIBUTES,n.VTLLineMaterial.ATTRIBUTES_INFO,
r?"line-dasharray":""));this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven;
this.canUseThinTessellation=!1;!this.hasDataDrivenLine&&(r=this.getPaintProperty("line-width"),!r||"number"===typeof r&&.5*r<A.thinLineHalfWidthThreshold)&&(r=this.getPaintProperty("line-offset"),!r||"number"===typeof r&&0===r)&&(this.canUseThinTessellation=!0)}getDashKey(r,y){switch(y){case c.CapType.BUTT:y="Butt";break;case c.CapType.ROUND:y="Round";break;case c.CapType.SQUARE:y="Square";break;default:y="Butt"}return`dasharray-[${r.toString()}]-${y}`}getFeatureInflatedBounds(r,y,w,D){w=u(r);if(!w)return null;
var K=this.getPaintValue("line-translate",y,r);K=D*Math.max(K[0],K[1]);w[0]-=K;w[2]-=K;w[1]+=K;w[3]+=K;K=D*Math.abs(this.getPaintValue("line-offset",y,r)||0);r=this.getPaintValue("line-width",y,r);D*=r/2;w[0]-=K+D;w[1]-=K+D;w[2]+=K+D;w[3]+=K+D;return w}isIntersectingFeature(r,y,w,D,K,N,O){let R=D.getGeometry();if(!R)return!1;const T=8/O.normalizationRatio;r=r/O.normalizationRatio+O.normalizationOffsetX;y=y/O.normalizationRatio+O.normalizationOffsetY;N=e.translateAnchor(this.getPaintValue("line-translate",
K,D),this.getPaintValue("line-translate-anchor",K,D),N,8);r-=T*N.x;y-=T*N.y;N=T*this.getPaintValue("line-offset",K,D)||0;0!==N&&(R=e.offsetLine(R,-N));D=this.getPaintValue("line-width",K,D);return e.distanceFromToPolylineWithinThreshold(r,y,R,T*(w+D/2))}}class z extends v{constructor(r,y,w,D){super(r,y,w,D);this.iconMaterial=new b.VTLIconMaterial(this.computeAttributesKey(q.ShaderProgramType.ICON,b.VTLIconMaterial.ATTRIBUTES,b.VTLIconMaterial.ATTRIBUTES_INFO));this.textMaterial=new b.VTLTextMaterial(this.computeAttributesKey(q.ShaderProgramType.TEXT,
b.VTLTextMaterial.ATTRIBUTES,b.VTLTextMaterial.ATTRIBUTES_INFO));this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven;this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||
this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class C extends v{constructor(r,y,w,D){super(r,y,w,D);this.circleMaterial=new g.VTLCircleMaterial(this.computeAttributesKey(q.ShaderProgramType.CIRCLE,g.VTLCircleMaterial.ATTRIBUTES,g.VTLCircleMaterial.ATTRIBUTES_INFO))}getFeatureInflatedBounds(r,y,w,D){w=u(r);if(!w)return null;var K=
this.getPaintValue("circle-translate",y,r);K=Math.max(K[0],K[1]);w[0]-=K;w[2]-=K;w[1]+=K;w[3]+=K;r=8*(this.getPaintValue("circle-radius",y,r)+this.getPaintValue("circle-stroke-width",y,r));D*=r/2;w[0]-=D;w[1]-=D;w[2]+=D;w[3]+=D;return w}isIntersectingFeature(r,y,w,D,K,N,O){var R=D.getGeometry();if(!R)return!1;const T=8/O.normalizationRatio;r=r/O.normalizationRatio+O.normalizationOffsetX;y=y/O.normalizationRatio+O.normalizationOffsetY;w*=T;N=e.translateAnchor(this.getPaintValue("circle-translate",
K,D),this.getPaintValue("circle-translate-anchor",K,D),N,T);D=T*(this.getPaintValue("circle-radius",K,D)+this.getPaintValue("circle-stroke-width",K,D));for(const Y of R)if(Y)for(const X of Y)if(R=X.x+N.x,K=X.y+N.y,Math.sqrt((r-R)*(r-R)+(y-K)*(y-K))-w<=D)return!0;return!1}}class G{constructor(r,y,w){this.allowOverlap=r.getLayoutValue("icon-allow-overlap",y);this.ignorePlacement=r.getLayoutValue("icon-ignore-placement",y);this.keepUpright=r.getLayoutValue("icon-keep-upright",y);this.optional=r.getLayoutValue("icon-optional",
y);this.rotationAlignment=r.getLayoutValue("icon-rotation-alignment",y);this.rotationAlignment===l.RotationAlignment.AUTO&&(this.rotationAlignment=w?l.RotationAlignment.MAP:l.RotationAlignment.VIEWPORT);w=r.getLayoutProperty("icon-anchor");w?.isDataDriven?this._anchorProp=w:this.anchor=r.getLayoutValue("icon-anchor",y);w=r.getLayoutProperty("icon-offset");w?.isDataDriven?this._offsetProp=w:this.offset=r.getLayoutValue("icon-offset",y);w=r.getLayoutProperty("icon-padding");w?.isDataDriven?this._paddingProp=
w:this.padding=r.getLayoutValue("icon-padding",y);w=r.getLayoutProperty("icon-rotate");w?.isDataDriven?this._rotateProp=w:this.rotate=r.getLayoutValue("icon-rotate",y);w=r.getLayoutProperty("icon-size");w?.isDataDriven?this._sizeProp=w:this.size=r.getLayoutValue("icon-size",y)}update(r,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(r,y));this._offsetProp&&(this.offset=this._offsetProp.getValue(r,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(r,y));this._rotateProp&&(this.rotate=
this._rotateProp.getValue(r,y));this._sizeProp&&(this.size=this._sizeProp.getValue(r,y))}}class F{constructor(r,y,w){this.allowOverlap=r.getLayoutValue("text-allow-overlap",y);this.ignorePlacement=r.getLayoutValue("text-ignore-placement",y);this.keepUpright=r.getLayoutValue("text-keep-upright",y);this.optional=r.getLayoutValue("text-optional",y);this.rotationAlignment=r.getLayoutValue("text-rotation-alignment",y);this.rotationAlignment===l.RotationAlignment.AUTO&&(this.rotationAlignment=w?l.RotationAlignment.MAP:
l.RotationAlignment.VIEWPORT);w=r.getLayoutProperty("text-anchor");w?.isDataDriven?this._anchorProp=w:this.anchor=r.getLayoutValue("text-anchor",y);w=r.getLayoutProperty("text-justify");w?.isDataDriven?this._justifyProp=w:this.justify=r.getLayoutValue("text-justify",y);w=r.getLayoutProperty("text-letter-spacing");w?.isDataDriven?this._letterSpacingProp=w:this.letterSpacing=r.getLayoutValue("text-letter-spacing",y);w=r.getLayoutProperty("text-line-height");w?.isDataDriven?this._lineHeightProp=w:this.lineHeight=
r.getLayoutValue("text-line-height",y);w=r.getLayoutProperty("text-max-angle");w?.isDataDriven?this._maxAngleProp=w:this.maxAngle=r.getLayoutValue("text-max-angle",y);w=r.getLayoutProperty("text-max-width");w?.isDataDriven?this._maxWidthProp=w:this.maxWidth=r.getLayoutValue("text-max-width",y);w=r.getLayoutProperty("text-offset");w?.isDataDriven?this._offsetProp=w:this.offset=r.getLayoutValue("text-offset",y);w=r.getLayoutProperty("text-padding");w?.isDataDriven?this._paddingProp=w:this.padding=r.getLayoutValue("text-padding",
y);w=r.getLayoutProperty("text-rotate");w?.isDataDriven?this._rotateProp=w:this.rotate=r.getLayoutValue("text-rotate",y);w=r.getLayoutProperty("text-size");w?.isDataDriven?this._sizeProp=w:this.size=r.getLayoutValue("text-size",y);w=r.getLayoutProperty("text-writing-mode");w?.isDataDriven?this._writingModeProp=w:this.writingMode=r.getLayoutValue("text-writing-mode",y)}update(r,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(r,y));this._justifyProp&&(this.justify=this._justifyProp.getValue(r,
y));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(r,y));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(r,y));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(r,y));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(r,y));this._offsetProp&&(this.offset=this._offsetProp.getValue(r,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(r,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(r,y));this._sizeProp&&
(this.size=this._sizeProp.getValue(r,y));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(r,y))}}c.BackgroundStyleLayer=E;c.CircleStyleLayer=C;c.FillStyleLayer=I;c.IconLayout=G;c.IndexItem=p;c.LineStyleLayer=H;c.StyleLayer=v;c.SymbolStyleLayer=z;c.TextLayout=F;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/enums":function(){define(["exports"],function(c){c.BucketType=void 0;(function(a){a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";
a[a.SYMBOL=3]="SYMBOL";a[a.CIRCLE=4]="CIRCLE"})(c.BucketType||(c.BucketType={}));c.ShaderProgramType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.FILL=1]="FILL";a[a.OUTLINE=2]="OUTLINE";a[a.LINE=3]="LINE";a[a.ICON=4]="ICON";a[a.CIRCLE=5]="CIRCLE";a[a.TEXT=6]="TEXT";a[a.TILEINFO=7]="TILEINFO"})(c.ShaderProgramType||(c.ShaderProgramType={}));c.StyleUpdateType=void 0;(function(a){a[a.PAINTER_CHANGED=0]="PAINTER_CHANGED";a[a.LAYOUT_CHANGED=1]="LAYOUT_CHANGED";a[a.LAYER_CHANGED=2]="LAYER_CHANGED";
a[a.LAYER_REMOVED=3]="LAYER_REMOVED";a[a.SPRITES_CHANGED=4]="SPRITES_CHANGED"})(c.StyleUpdateType||(c.StyleUpdateType={}));Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports","../../../../geometry/support/coordsUtils","../../../../geometry/support/TileClipper"],function(c,a,q){function e(f,l){f%=l;return 0<=f?f:f+l}const k=Number.POSITIVE_INFINITY,g=Math.PI,h=128/g,n=256/360,b=1/Math.LN2;c.between=function(f,
l,x){return f>=l&&f<=x||f>=x&&f<=l};c.c2pi=2*g;c.cDegTo256=n;c.cDegToRad=g/180;c.cInfinity=k;c.cPi=g;c.cRadTo256=h;c.degToByte=function(f){return e(f*n,256)};c.distanceFromToPolylineWithinThreshold=function(f,l,x,A){let u,p,v;A*=A;for(const E of x){const I=E.length;if(!(2>I)){x=E[0].x;u=E[0].y;for(let H=1;H<I;++H){p=E[H].x;v=E[H].y;if(a.distanceToSegmentSquared(f,l,x,u,p,v)<A)return!0;x=p;u=v}}}return!1};c.getTileMargins=function(f){return 8+Math.max(16*(f-14),0)};c.interpolate=function(f,l,x){return f*
(1-x)+l*x};c.isCircleOverlapingRect=function(f,l,x,A,u,p,v){l=Math.max(A,Math.min(l,p))-l;x=Math.max(u,Math.min(x,v))-x;return l*l+x*x<=f*f};c.log2=function(f){return Math.log(f)*b};c.offsetLine=function(f,l){if(0===l||Number.isNaN(l))return f;const x=[],A=new q.Point(0,0),u=new q.Point(0,0),p=new q.Point(0,0);for(let E=0;E<f.length;E++){const I=f[E],H=[];for(let z=0;z<I.length;z++){var v=I[z-1];const C=I[z],G=I[z+1];0===z?A.setCoords(0,0):A.assignSub(C,v).normalize().rightPerpendicular();z===I.length-
1?u.setCoords(0,0):u.assignSub(G,C).normalize().rightPerpendicular();p.assignAdd(A,u).normalize();v=p.x*u.x+p.y*u.y;0!==v&&p.scale(1/v);H.push(q.Point.add(C,p.scale(l)))}x.push(H)}return x};c.pointInPolygon=function(f,l,x){let A=0,u,p;for(const v of x){x=v.length;for(let E=1;E<x;++E)u=v[E-1],p=v[E],u.y>l!==p.y>l&&(0<(p.x-u.x)*(l-u.y)-(p.y-u.y)*(f-u.x)?A++:A--)}return 0!==A};c.positiveMod=e;c.radToByte=function(f){return e(f*h,256)};c.sqr=function(f){return f*f};c.translateAnchor=function(f,l,x,A){f=
new q.Point(f[0],f[1]);f.scale(A);"viewport"===l&&(l=Math.PI/180*-x,f.rotate(Math.cos(l),Math.sin(l)));return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/TileClipper":function(){define(["exports"],function(c){c.GeometryType=void 0;(function(b){b[b.Unknown=0]="Unknown";b[b.Point=1]="Point";b[b.LineString=2]="LineString";b[b.Polygon=3]="Polygon"})(c.GeometryType||(c.GeometryType={}));class a{constructor(b,f){this.x=b;this.y=f}clone(){return new a(this.x,
this.y)}equals(b,f){return b===this.x&&f===this.y}isEqual(b){return b.x===this.x&&b.y===this.y}setCoords(b,f){this.x=b;this.y=f;return this}normalize(){var b=this.x;const f=this.y;b=Math.sqrt(b*b+f*f);this.x/=b;this.y/=b;return this}rightPerpendicular(){const b=this.x;this.x=this.y;this.y=-b;return this}leftPerpendicular(){const b=this.x;this.x=-this.y;this.y=b;return this}move(b,f){this.x+=b;this.y+=f;return this}assign(b){this.x=b.x;this.y=b.y;return this}assignAdd(b,f){this.x=b.x+f.x;this.y=b.y+
f.y;return this}assignSub(b,f){this.x=b.x-f.x;this.y=b.y-f.y;return this}rotate(b,f){const l=this.x,x=this.y;this.x=l*b-x*f;this.y=l*f+x*b;return this}scale(b){this.x*=b;this.y*=b;return this}length(){const b=this.x,f=this.y;return Math.sqrt(b*b+f*f)}sub(b){this.x-=b.x;this.y-=b.y;return this}add(b){this.x+=b.x;this.y+=b.y;return this}static distance(b,f){const l=f.x-b.x;b=f.y-b.y;return Math.sqrt(l*l+b*b)}static add(b,f){return new a(b.x+f.x,b.y+f.y)}static sub(b,f){return new a(b.x-f.x,b.y-f.y)}}
class q{constructor(b,f,l){this.ratio=b;this.x=f;this.y=l}}class e{constructor(b,f,l,x=8,A=8){this._lines=[];this._starts=[];this.validateTessellation=!0;this._pixelRatio=x;this._pixelMargin=A;this._tileSize=512*x;this._dz=b;this._yPos=f;this._xPos=l}setPixelMargin(b){b!==this._pixelMargin&&(this._pixelMargin=b,this.setExtent(this._extent))}setExtent(b){this._extent=b;this._finalRatio=this._tileSize/b*(1<<this._dz);let f=this._pixelRatio*this._pixelMargin;f/=this._finalRatio;b>>=this._dz;f>b&&(f=
b);this._margin=f;this._xmin=b*this._xPos-f;this._ymin=b*this._yPos-f;this._xmax=this._xmin+b+2*f;this._ymax=this._ymin+b+2*f}reset(b){this._type=b;this._lines=[];this._starts=[];this._line=null;this._start=0}moveTo(b,f){this._pushLine();this._prevIsIn=this._isIn(b,f);this._moveTo(b,f,this._prevIsIn);this._prevPt=new a(b,f);this._firstPt=new a(b,f);this._dist=0}lineTo(b,f){const l=this._isIn(b,f),x=new a(b,f),A=a.distance(this._prevPt,x);if(l)if(this._prevIsIn)this._lineTo(b,f,!0);else{var u=this._prevPt;
var p=x;b=this._intersect(p,u);this._start=this._dist+A*(1-this._r);this._lineTo(b.x,b.y,!0);this._lineTo(p.x,p.y,!0)}else if(this._prevIsIn)p=this._prevPt,u=x,b=this._intersect(p,u),this._lineTo(b.x,b.y,!0),this._lineTo(u.x,u.y,!1);else{const E=this._prevPt;if(!(E.x<=this._xmin&&x.x<=this._xmin||E.x>=this._xmax&&x.x>=this._xmax||E.y<=this._ymin&&x.y<=this._ymin||E.y>=this._ymax&&x.y>=this._ymax)){b=[];if(E.x<this._xmin&&x.x>this._xmin||E.x>this._xmin&&x.x<this._xmin){f=(this._xmin-E.x)/(x.x-E.x);
var v=E.y+f*(x.y-E.y);v<=this._ymin?p=!1:v>=this._ymax?p=!0:b.push(new q(f,this._xmin,v))}if(E.x<this._xmax&&x.x>this._xmax||E.x>this._xmax&&x.x<this._xmax)f=(this._xmax-E.x)/(x.x-E.x),v=E.y+f*(x.y-E.y),v<=this._ymin?p=!1:v>=this._ymax?p=!0:b.push(new q(f,this._xmax,v));if(E.y<this._ymin&&x.y>this._ymin||E.y>this._ymin&&x.y<this._ymin)f=(this._ymin-E.y)/(x.y-E.y),v=E.x+f*(x.x-E.x),v<=this._xmin?u=!1:v>=this._xmax?u=!0:b.push(new q(f,v,this._ymin));if(E.y<this._ymax&&x.y>this._ymax||E.y>this._ymax&&
x.y<this._ymax)f=(this._ymax-E.y)/(x.y-E.y),v=E.x+f*(x.x-E.x),v<=this._xmin?u=!1:v>=this._xmax?u=!0:b.push(new q(f,v,this._ymax));if(0===b.length)u?p?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):p?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(1<b.length&&b[0].ratio>b[1].ratio)this._start=this._dist+A*b[1].ratio,this._lineTo(b[1].x,b[1].y,!0),this._lineTo(b[0].x,b[0].y,!0);else for(this._start=this._dist+A*b[0].ratio,u=0;u<b.length;u++)this._lineTo(b[u].x,
b[u].y,!0)}this._lineTo(x.x,x.y,!1)}this._dist+=A;this._prevIsIn=l;this._prevPt=x}close(){if(2<this._line.length){var b=this._firstPt,f=this._prevPt;b.x===f.x&&b.y===f.y||this.lineTo(b.x,b.y);b=this._line;for(f=b.length;4<=f;)if(b[0].x===b[1].x&&b[0].x===b[f-2].x||b[0].y===b[1].y&&b[0].y===b[f-2].y)b.pop(),b[0].x=b[f-2].x,b[0].y=b[f-2].y,--f;else break}}result(b=!0){this._pushLine();if(0===this._lines.length)return null;this._type===c.GeometryType.Polygon&&b&&h.simplify(this._tileSize,this._margin*
this._finalRatio,this._lines);return this._lines}resultWithStarts(){if(this._type!==c.GeometryType.LineString)throw Error("Only valid for lines");this._pushLine();const b=this._lines,f=b.length;if(0===f)return null;const l=[];for(let x=0;x<f;x++)l.push({line:b[x],start:this._starts[x]||0});return l}_isIn(b,f){return b>=this._xmin&&b<=this._xmax&&f>=this._ymin&&f<=this._ymax}_intersect(b,f){let l,x,A;if(f.x>=this._xmin&&f.x<=this._xmax)x=f.y<=this._ymin?this._ymin:this._ymax,A=(x-b.y)/(f.y-b.y),l=
b.x+A*(f.x-b.x);else if(f.y>=this._ymin&&f.y<=this._ymax)l=f.x<=this._xmin?this._xmin:this._xmax,A=(l-b.x)/(f.x-b.x),x=b.y+A*(f.y-b.y);else{x=f.y<=this._ymin?this._ymin:this._ymax;l=f.x<=this._xmin?this._xmin:this._xmax;const u=(l-b.x)/(f.x-b.x),p=(x-b.y)/(f.y-b.y);u<p?(A=u,x=b.y+u*(f.y-b.y)):(A=p,l=b.x+p*(f.x-b.x))}this._r=A;return new a(l,x)}_pushLine(){this._line&&(this._type===c.GeometryType.Point?0<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===
c.GeometryType.LineString?1<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===c.GeometryType.Polygon&&3<this._line.length&&(this._lines.push(this._line),this._starts.push(this._start)));this._line=[];this._start=0}_moveTo(b,f,l){this._type!==c.GeometryType.Polygon?l&&(b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new a(b,f))):(l||(b<this._xmin&&(b=this._xmin),b>this._xmax&&
(b=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line.push(new a(b,f)),this._isV=this._isH=!1)}_lineTo(b,f,l){if(this._type!==c.GeometryType.Polygon)if(l){b=Math.round((b-(this._xmin+this._margin))*this._finalRatio);f=Math.round((f-(this._ymin+this._margin))*this._finalRatio);if(0<this._line.length&&(l=this._line[this._line.length-1],l.equals(b,f)))return;
this._line.push(new a(b,f))}else this._line&&0<this._line.length&&this._pushLine();else if(l||(b<this._xmin&&(b=this._xmin),b>this._xmax&&(b=this._xmax),f<this._ymin&&(f=this._ymin),f>this._ymax&&(f=this._ymax)),b=Math.round((b-(this._xmin+this._margin))*this._finalRatio),f=Math.round((f-(this._ymin+this._margin))*this._finalRatio),this._line&&0<this._line.length){l=this._line[this._line.length-1];const x=l.x===b,A=l.y===f;x&&A||(this._isH&&x?(l.x=b,l.y=f,l=this._line[this._line.length-2],l.x===b&&
l.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(l=this._line[this._line.length-2],this._isH=l.x===b,this._isV=l.y===f)):(this._isH=l.x===b,this._isV=l.y===f)):this._isV&&A?(l.x=b,l.y=f,l=this._line[this._line.length-2],l.x===b&&l.y===f?(this._line.pop(),1>=this._line.length?this._isV=this._isH=!1:(l=this._line[this._line.length-2],this._isH=l.x===b,this._isV=l.y===f)):(this._isH=l.x===b,this._isV=l.y===f)):(this._line.push(new a(b,f)),this._isH=x,this._isV=A))}else this._line.push(new a(b,
f))}}class k{setExtent(b){this._ratio=4096===b?1:4096/b}get validateTessellation(){return 1>this._ratio}reset(b){this._lines=[];this._line=null}moveTo(b,f){this._line&&this._lines.push(this._line);this._line=[];const l=this._ratio;this._line.push(new a(b*l,f*l))}lineTo(b,f){const l=this._ratio;this._line.push(new a(b*l,f*l))}close(){const b=this._line;b&&!b[0].isEqual(b[b.length-1])&&b.push(b[0])}result(){this._line&&this._lines.push(this._line);return 0===this._lines.length?null:this._lines}}var g;
(function(b){b[b.sideLeft=0]="sideLeft";b[b.sideRight=1]="sideRight";b[b.sideTop=2]="sideTop";b[b.sideBottom=3]="sideBottom"})(g||={});class h{static simplify(b,f,l){if(l){var x=-f,A=b+f,u=-f,p=b+f;b=[];f=[];var v=l.length;for(let E=0;E<v;++E){const I=l[E];if(!I||2>I.length)continue;let H=I[0],z;const C=I.length;for(let G=1;G<C;++G)z=I[G],H.x===z.x&&(H.x<=x&&(H.y>z.y?(b.push(E),b.push(G),b.push(g.sideLeft),b.push(-1)):(f.push(E),f.push(G),f.push(g.sideLeft),f.push(-1))),H.x>=A&&(H.y<z.y?(b.push(E),
b.push(G),b.push(g.sideRight),b.push(-1)):(f.push(E),f.push(G),f.push(g.sideRight),f.push(-1)))),H.y===z.y&&(H.y<=u&&(H.x<z.x?(b.push(E),b.push(G),b.push(g.sideTop),b.push(-1)):(f.push(E),f.push(G),f.push(g.sideTop),f.push(-1))),H.y>=p&&(H.x>z.x?(b.push(E),b.push(G),b.push(g.sideBottom),b.push(-1)):(f.push(E),f.push(G),f.push(g.sideBottom),f.push(-1)))),H=z}0!==b.length&&0!==f.length&&(h.fillParent(l,f,b),h.fillParent(l,b,f),x=[],h.calcDeltas(x,f,b),h.calcDeltas(x,b,f),h.addDeltas(x,l))}}static fillParent(b,
f,l){const x=l.length,A=f.length;for(let I=0;I<A;I+=4){var u=f[I],p=f[I+1];const H=f[I+2],z=b[u][p-1];u=b[u][p];p=8092;let C=-1;for(let G=0;G<x;G+=4){if(l[G+2]!==H)continue;var v=l[G];const F=l[G+1];var E=b[v][F-1];v=b[v][F];switch(H){case g.sideLeft:case g.sideRight:n(z.y,E.y,v.y)&&n(u.y,E.y,v.y)&&(E=Math.abs(v.y-E.y),E<p&&(p=E,C=G));break;case g.sideTop:case g.sideBottom:n(z.x,E.x,v.x)&&n(u.x,E.x,v.x)&&(E=Math.abs(v.x-E.x),E<p&&(p=E,C=G))}}f[I+3]=C}}static calcDeltas(b,f,l){const x=f.length;for(let A=
0;A<x;A+=4){const u=h.calcDelta(A,f,l,[]);b.push(f[A]);b.push(f[A+1]);b.push(f[A+2]);b.push(u)}}static calcDelta(b,f,l,x){b=f[b+3];if(-1===b)return 0;const A=x.length;if(1<A&&x[A-2]===b)return 0;x.push(b);return h.calcDelta(b,l,f,x)+1}static addDeltas(b,f){const l=b.length;let x=0;for(var A=0;A<l;A+=4){var u=b[A+3];u>x&&(x=u)}for(A=0;A<l;A+=4){u=f[b[A]];const p=b[A+1],v=x-b[A+3];switch(b[A+2]){case g.sideLeft:u[p-1].x-=v;u[p].x-=v;1===p&&(u[u.length-1].x-=v);p===u.length-1&&(u[0].x-=v);break;case g.sideRight:u[p-
1].x+=v;u[p].x+=v;1===p&&(u[u.length-1].x+=v);p===u.length-1&&(u[0].x+=v);break;case g.sideTop:u[p-1].y-=v;u[p].y-=v;1===p&&(u[u.length-1].y-=v);p===u.length-1&&(u[0].y-=v);break;case g.sideBottom:u[p-1].y+=v,u[p].y+=v,1===p&&(u[u.length-1].y+=v),p===u.length-1&&(u[0].y+=v)}}}}const n=(b,f,l)=>b>=f&&b<=l||b>=l&&b<=f;c.Point=a;c.SimpleBuilder=k;c.TileClipper=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports",
"./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e){class k extends a.VTLMaterial{constructor(g){super(g)}geometryInfo(){return k.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return k.ATTRIBUTES}attributesInfo(){return k.ATTRIBUTES_INFO}}k.ATTRIBUTES=[];k.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,q.DataType.BYTE,0,2)];k.ATTRIBUTES_INFO={};c.VTLBackgroundMaterial=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define(["exports","../MemoryBuffer","./enums","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e,k){class g{constructor(b){this._locations=new Map;this._key=b}get key(){return this._key}get type(){return this._key&7}defines(){return[]}getStride(){this._layout||this._buildAttributesInfo();return this._stride}getAttributeLocations(){0===this._locations.size&&this._buildAttributesInfo();return this._locations}getLayoutInfo(){this._layout||
this._buildAttributesInfo();return this._layout}getEncodingInfos(){this._propertyEncodingInfo||this._buildAttributesInfo();return this._propertyEncodingInfo}getUniforms(){this._uniforms||this._buildAttributesInfo();return this._uniforms}getShaderHeader(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader}getShaderMain(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain}setDataUniforms(b,f,l,x,A){var u=this.getUniforms();for(const p of u){const {name:v,type:E,
getValue:I}=p;u=I(l,f,x,A);if(null!==u)switch(E){case "float":b.setUniform1f(v,u);break;case "vec2":b.setUniform2fv(v,u);break;case "vec4":b.setUniform4fv(v,u)}}}encodeAttributes(b,f,l,x){const A=this.attributesInfo(),u=this.getEncodingInfos(),p=[];let v=0,E=0;for(const H of Object.keys(u)){var I=u[H];const {type:z,precisionFactor:C,isLayout:G}=A[H],F=G?l.getLayoutProperty(H):l.getPaintProperty(H),r=F.interpolator?.getInterpolationRange(f);let y=0;for(const w of I){const {offset:D,bufferElementsToAdd:K}=
w;if(0<K){for(I=0;I<K;I++)p.push(0);v+=E;E=w.bufferElementsToAdd}I=x??F.getValue(r?r[y]:f,b);switch(z){case q.EncodingType.R8_SIGNED:case q.EncodingType.R8_UNSIGNED:p[v]|=this._encodeByte(I*(C||1),8*D);break;case q.EncodingType.R16_SIGNED:case q.EncodingType.R16_UNSIGNED:p[v]|=this._encodeShort(I*(C||1),8*D);break;case q.EncodingType.R8G8_SIGNED:case q.EncodingType.R8G8_UNSIGNED:p[v]|=this._encodeByte(I*(C||1),8*D);p[v]|=this._encodeByte(I*(C||1),8*D+8);break;case q.EncodingType.R16G16_SIGNED:case q.EncodingType.R16G16_UNSIGNED:p[v]|=
this._encodeShort(I*(C||1),8*D);p[v]|=this._encodeShort(I*(C||1),8*D+16);break;case q.EncodingType.R8G8B8A8_SIGNED:case q.EncodingType.R8G8B8A8_UNSIGNED:p[v]|=this._encodeByte(I*(C||1),8*D);p[v]|=this._encodeByte(I*(C||1),8*D+8);p[v]|=this._encodeByte(I*(C||1),8*D+16);p[v]|=this._encodeByte(I*(C||1),8*D+24);break;case q.EncodingType.R8G8B8A8_COLOR:p[v]=this._encodeColor(I);break;case q.EncodingType.R16G16B16A16_DASHARRAY:case q.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(v,p,I);break;default:throw Error("Unsupported encoding type");
}y++}}return p}getAtributeState(b){const f=3+2*b;b=0|this._bit(f);return b|=this._bit(f+1)<<1}_buildAttributesInfo(){const b=[],f={};var l={},x=-1;const A=this.attributesInfo();var u=this.attributes();let p=-1;for(const H of u){p++;u=this.getAtributeState(p);if(u===q.AttributeStatus.UNIFORM||u===q.AttributeStatus.UNUSED)continue;var v=A[H];const z=[];f[H]=z;v=v.type;for(let C=0;C<u;C++){const {dataType:G,bytesPerElement:F,count:r,normalized:y}=g._encodingInfo[v],w=F*r;var E=`${G}-${!0===y}`;let D=
l[E],K=0;!D||4<D.count+r?(x++,D={dataIndex:x,count:0,offset:0},4!==r&&(l[E]=D),b.push({location:-1,name:"a_data_"+x,count:r,type:G,normalized:y}),K=Math.ceil(Math.max(w/4,1))):(E=b[D.dataIndex],E.count+=r,K=Math.ceil(Math.max(E.count*F/4,1))-Math.ceil(Math.max(D.offset/4,1)));z.push({dataIndex:D.dataIndex,offset:D.offset,bufferElementsToAdd:K});D.offset+=w;D.count+=r}}for(const H of b)switch(H.type){case e.DataType.BYTE:case e.DataType.UNSIGNED_BYTE:H.count=4;break;case e.DataType.SHORT:case e.DataType.UNSIGNED_SHORT:H.count+=
H.count%2}this._buildVertexBufferLayout(b);l=0;x=this._layout.get("geometry");for(var I of x)this._locations.set(I.name,l++);if(I=this._layout.get("opacity"))for(const H of I)this._locations.set(H.name,l++);this._buildShaderInfo(b,f);this._propertyEncodingInfo=f}_buildVertexBufferLayout(b){const f=new Map,l=this.geometryInfo();let x=l[0].stride;if(0===b.length)f.set("geometry",l);else{const A=[];let u=x;for(const p of b)x+=h(p.type)*p.count;for(const p of l)A.push(new k.VertexElementDescriptor(p.name,
p.count,p.type,p.offset,x,p.normalized));for(const p of b)A.push(new k.VertexElementDescriptor(p.name,p.count,p.type,u,x,p.normalized)),u+=h(p.type)*p.count;f.set("geometry",A)}(b=this.opacityInfo())&&f.set("opacity",b);this._layout=f;this._stride=x}_buildShaderInfo(b,f){let l="\n",x="\n";const A=[];for(var u of b)l+=`attribute ${this._getType(u.count)} ${u.name};\n`;var p=this.attributes();b=this.attributesInfo();u=-1;for(const I of p){u++;const {name:H,type:z,precisionFactor:C,isLayout:G}=b[I];
p=C&&1!==C?` * ${1/C}`:"";const {bytesPerElement:F,count:r}=g._encodingInfo[z];var v=y=>`a_data_${y.dataIndex}${n(r,y.offset,F)}`;switch(this.getAtributeState(u)){case q.AttributeStatus.UNIFORM:p=this._getType(r);var E=`u_${H}`;A.push({name:E,type:p,getValue:(w,D,K,N)=>{K=G?w.getLayoutValue(I,D):w.getPaintValue(I,D);if(z===q.EncodingType.R16G16B16A16_DASHARRAY){w=w.getDashKey(K,w.getLayoutValue("line-cap",D));N=N.getMosaicItemPosition(w,!1);if(null==N)return null;const {tl:O,br:R}=N;return[O[0],R[1],
R[0],O[1]]}if(z===q.EncodingType.R16G16B16A16_PATTERN){N=N.getMosaicItemPosition(K,!I.includes("line-"));if(null==N)return null;const {tl:O,br:R}=N;return[O[0],R[1],R[0],O[1]]}return z===q.EncodingType.R8G8B8A8_COLOR?(N=K[3],[N*K[0],N*K[1],N*K[2],N]):K}});l+=`uniform ${p} ${E};\n`;x+=`${p} ${H} = ${E};\n`;break;case q.AttributeStatus.DATA_DRIVEN:E=v(f[I][0]);x+=`${this._getType(r)} ${H} = ${E}${p};\n`;break;case q.AttributeStatus.INTERPOLATED_DATA_DRIVEN:E=`u_t_${H}`;A.push({name:E,type:"float",getValue:(w,
D,K,N)=>(G?w.getLayoutProperty(I):w.getPaintProperty(I)).interpolator.interpolationUniformValue(K,D)});l+=`uniform float ${E};\n`;const y=v(f[I][0]);v=v(f[I][1]);x+=`${this._getType(r)} ${H} = mix(${y}${p}, ${v}${p}, ${E});\n`}}this._shaderHeader=l;this._shaderMain=x;this._uniforms=A}_bit(b){return(this._key&1<<b)>>b}_getType(b){switch(b){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");}_encodeColor(b){const f=255*b[3];return a.i8888to32(b[0]*
f,b[1]*f,b[2]*f,f)}_encodePattern(b,f,l){if(l?.rect){var x=l.rect,A=l.width;l=l.height;f[b]=this._encodeShort(x.x+2,0);f[b]|=this._encodeShort(x.y+2+l,16);f[b+1]=this._encodeShort(x.x+2+A,0);f[b+1]|=this._encodeShort(x.y+2,16)}}_encodeByte(b,f){return(b&255)<<f}_encodeShort(b,f){return(b&65535)<<f}}g._encodingInfo={[q.EncodingType.R8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[q.EncodingType.R8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,
normalized:!1},[q.EncodingType.R16_SIGNED]:{dataType:e.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[q.EncodingType.R16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[q.EncodingType.R8G8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:2,normalized:!1},[q.EncodingType.R8G8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[q.EncodingType.R16G16_SIGNED]:{dataType:e.DataType.SHORT,bytesPerElement:2,count:2,
normalized:!1},[q.EncodingType.R16G16_UNSIGNED]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[q.EncodingType.R8G8B8A8_SIGNED]:{dataType:e.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[q.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[q.EncodingType.R8G8B8A8_COLOR]:{dataType:e.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[q.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:e.DataType.UNSIGNED_SHORT,
bytesPerElement:2,count:4,normalized:!1},[q.EncodingType.R16G16B16A16_PATTERN]:{dataType:e.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const h=b=>{switch(b){case e.DataType.FLOAT:case e.DataType.INT:case e.DataType.UNSIGNED_INT:return 4;case e.DataType.SHORT:case e.DataType.UNSIGNED_SHORT:case e.DataType.HALF_FLOAT:return 2;case e.DataType.BYTE:case e.DataType.UNSIGNED_BYTE:return 1}},n=(b,f,l)=>{f/=l;if(1===b)switch(f){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===
b)switch(f){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===b)switch(f){case 0:return".xyz";case 1:return".yzw"}return""};c.VTLMaterial=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../core/has"],function(c){class a{constructor(q){this._array=[];this._stride=q}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*
this._array.length}reset(){this.array.length=0}toBuffer(){return(new Uint32Array(this._array)).buffer}static i1616to32(q,e){return 65535&q|e<<16}static i8888to32(q,e,k,g){return q&255|(e&255)<<8|(k&255)<<16|g<<24}static i8816to32(q,e,k){return q&255|(e&255)<<8|k<<16}}return a})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(c){c.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=
3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(c.EncodingType||(c.EncodingType={}));c.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";
a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";a[a.UNUSED=3]="UNUSED"})(c.AttributeStatus||(c.AttributeStatus={}));Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(c){c.FramebufferBit=void 0;(function(a){a[a.DEPTH=256]="DEPTH";a[a.STENCIL=1024]="STENCIL";a[a.COLOR=16384]="COLOR"})(c.FramebufferBit||(c.FramebufferBit={}));c.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";
a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(c.PrimitiveType||(c.PrimitiveType={}));c.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=
773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(c.BlendFactor||(c.BlendFactor={}));c.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]=
"MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(c.BlendOperation||(c.BlendOperation={}));c.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER";a[a.TRANSFORM_FEEDBACK_BUFFER=
35982]="TRANSFORM_FEEDBACK_BUFFER"})(c.BufferType||(c.BufferType={}));c.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(c.Face||(c.Face={}));c.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(c.CullMode||(c.CullMode={}));c.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=
5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT";a[a.HALF_FLOAT=5131]="HALF_FLOAT"})(c.DataType||(c.DataType={}));c.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(c.CompareFunction||(c.CompareFunction={}));c.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=
7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(c.StencilOperation||(c.StencilOperation={}));c.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(c.TextureSamplingMode||
(c.TextureSamplingMode={}));c.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(c.TextureWrapMode||(c.TextureWrapMode={}));c.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";
a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(c.TextureType||(c.TextureType={}));c.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]=
"DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(c.PixelFormat||(c.PixelFormat={}));c.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=
34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=
33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";
a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(c.SizedPixelFormat||(c.SizedPixelFormat={}));c.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";
a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=
36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(c.PixelType||(c.PixelType={}));c.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(c.RenderbufferFormat||(c.RenderbufferFormat={}));c.Usage=
void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(c.Usage||(c.Usage={}));c.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(c.ShaderType||
(c.ShaderType={}));c.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(c.FramebufferTarget||(c.FramebufferTarget={}));c.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";
a[a.TransformFeedback=7]="TransformFeedback";a[a.Sync=8]="Sync";a[a.UNCOUNTED=9]="UNCOUNTED";a[a.LinesOfCode=9]="LinesOfCode";a[a.Uniform=10]="Uniform";a[a.COUNT=11]="COUNT"})(c.ResourceType||(c.ResourceType={}));c.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=
36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=
36079]="COLOR_ATTACHMENT15"})(c.ColorAttachment||(c.ColorAttachment={}));c.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(c.SpecialDrawBuffers||(c.SpecialDrawBuffers={}));c.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=
33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=
37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(c.CompressedTextureFormat||(c.CompressedTextureFormat={}));c.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";
a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";
a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]=
"INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(c.UniformType||(c.UniformType={}));c.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=
37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(c.SyncParameter||(c.SyncParameter={}));c.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(c.SyncStatus||(c.SyncStatus={}));c.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=
37149]="WAIT_FAILED"})(c.ClientWaitSyncStatus||(c.ClientWaitSyncStatus={}));c.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(c.SyncCondition||(c.SyncCondition={}));c.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(c.SyncFlag||(c.SyncFlag={}));c.DepthStencilAttachment=33306;c.baseTextureUnit=33984;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexElementDescriptor":function(){define(["exports"],
function(c){class a{constructor(q,e,k,g,h,n=!1,b=0){this.name=q;this.count=e;this.type=k;this.offset=g;this.stride=h;this.normalized=n;this.divisor=b}}c.VertexElementDescriptor=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e,k){class g extends q.VTLMaterial{constructor(h){super(h)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}
g.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");g.GEOMETRY_LAYOUT=[new k.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:a.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",
type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32}};c.VTLCircleMaterial=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define(["exports","./enums","./VTLMaterial",
"../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e,k){class g extends q.VTLMaterial{constructor(n){super(n)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}g.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];g.GEOMETRY_LAYOUT=[new k.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},
"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};class h extends q.VTLMaterial{constructor(n,b){super(n);this._usefillColor=b}geometryInfo(){return h.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?h.ATTRIBUTES_FILL:h.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?h.ATTRIBUTES_INFO_FILL:h.ATTRIBUTES_INFO_OUTLINE}}h.ATTRIBUTES_OUTLINE=
["fill-outline-color","fill-opacity"];h.ATTRIBUTES_FILL=["fill-color","fill-opacity"];h.GEOMETRY_LAYOUT=[new k.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,8),new k.VertexElementDescriptor("a_offset",2,e.DataType.BYTE,4,8),new k.VertexElementDescriptor("a_xnormal",2,e.DataType.BYTE,6,8)];h.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};h.ATTRIBUTES_INFO_FILL=
{"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};c.VTLFillMaterial=g;c.VTLOutlineMaterial=h;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e,k){class g extends q.VTLMaterial{constructor(h){super(h)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}
g.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");g.GEOMETRY_LAYOUT=[new k.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,16),new k.VertexElementDescriptor("a_extrude_offset",4,e.DataType.BYTE,4,16),new k.VertexElementDescriptor("a_dir_normal",4,e.DataType.BYTE,8,16),new k.VertexElementDescriptor("a_accumulatedDistance",2,e.DataType.UNSIGNED_SHORT,12,16)];g.ATTRIBUTES_INFO={"line-width":{name:"width",type:a.EncodingType.R8_UNSIGNED,
precisionFactor:2},"line-gap-width":{name:"gap_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:a.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",
type:a.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};c.VTLLineMaterial=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(c,a,q,e,k){const g=[new k.VertexElementDescriptor("a_pos",2,e.DataType.SHORT,0,16),new k.VertexElementDescriptor("a_vertexOffset",2,e.DataType.SHORT,4,16),new k.VertexElementDescriptor("a_texAngleRange",
4,e.DataType.UNSIGNED_BYTE,8,16),new k.VertexElementDescriptor("a_levelInfo",4,e.DataType.UNSIGNED_BYTE,12,16)],h=[new k.VertexElementDescriptor("a_opacityInfo",1,e.DataType.UNSIGNED_BYTE,0,1)];class n extends q.VTLMaterial{constructor(f){super(f)}geometryInfo(){return g}opacityInfo(){return h}attributes(){return n.ATTRIBUTES}attributesInfo(){return n.ATTRIBUTES_INFO}}n.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");n.ATTRIBUTES_INFO={"icon-color":{name:"color",
type:a.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class b extends q.VTLMaterial{constructor(f){super(f)}geometryInfo(){return g}opacityInfo(){return h}attributes(){return b.ATTRIBUTES}attributesInfo(){return b.ATTRIBUTES_INFO}}
b.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");b.ATTRIBUTES_INFO={"text-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,
precisionFactor:4},"text-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,isLayout:!0}};c.VTLIconMaterial=n;c.VTLTextMaterial=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(c,a){class q{constructor(e){this._expression=e}filter(e,k){if(!this._expression)return!0;try{return this._expression.evaluate(e,k)}catch(g){return console.log(g.message),!0}}static createFilter(e){if(!e)return null;
this.isLegacyFilter(e)&&(e=this.convertLegacyFilter(e));try{const k=c.createExpression(e,null,a.booleanType);return new q(k)}catch(k){return console.log(k.message),null}}static isLegacyFilter(e){if(!Array.isArray(e)||0===e.length)return!0;switch(e[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===e.length&&"string"===typeof e[1]&&!Array.isArray(e[2]);case "in":return 3<=e.length&&"string"===typeof e[1]&&!Array.isArray(e[2]);case "!in":return!0;case "any":case "all":for(let k=
1;k<e.length;k++)if(this.isLegacyFilter(e[k]))return!0;return!1;case "none":return!0;case "has":return 2===e.length&&("$id"===e[1]||"$type"===e[1]);case "!has":return!0;default:return!1}}static convertLegacyFilter(e){if(!Array.isArray(e)||0===e.length)return!0;const k=e[0];if(1===e.length)return"any"!==k;switch(k){case "\x3d\x3d":return q.convertComparison("\x3d\x3d",e[1],e[2]);case "!\x3d":return q.negate(q.convertComparison("\x3d\x3d",e[1],e[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return q.convertComparison(k,
e[1],e[2]);case "in":return q.convertIn(e[1],e.slice(2));case "!in":return q.negate(q.convertIn(e[1],e.slice(2)));case "any":case "all":case "none":return q.convertCombining(k,e.slice(1));case "has":return q.convertHas(e[1]);case "!has":return q.negate(q.convertHas(e[1]));default:throw Error("Unexpected legacy filter.");}}static convertComparison(e,k,g){switch(k){case "$type":return[e,["geometry-type"],g];case "$id":return[e,["id"],g];default:return[e,["get",k],g]}}static convertIn(e,k){switch(e){case "$type":return["in",
["geometry-type"],["literal",k]];case "$id":return["in",["id"],["literal",k]];default:return["in",["get",e],["literal",k]]}}static convertHas(e){switch(e){case "$type":return!0;case "$id":return["has-id"];default:return["has",e]}}static convertCombining(e,k){return[e].concat(k.map(this.convertLegacyFilter))}static negate(e){return["!",e]}}return q})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(c,a,q,e,k,g,h){function n(d,m,t){var B=typeof d;if("string"===B||"boolean"===B||"number"===B||null===d){if(t)switch(t.kind){case "string":"string"!==B&&(d=Z.toString(d));break;case "number":"number"!==B&&(d=Z.toNumber(d));break;case "color":d=Z.toColor(d)}d=["literal",d]}if(!Array.isArray(d)||0===d.length)throw Error("Expression must be a non empty array");B=d[0];if("string"!==typeof B)throw Error("First element of expression must be a string");const L=pa[B];if(void 0===L)throw Error(`Invalid expression operator "${B}"`);
if(!L)throw Error(`Unimplemented expression operator "${B}"`);return L.parse(d,m,t)}class b{constructor(d){this._parent=d;this._vars={}}add(d,m){this._vars[d]=m}get(d){return this._vars[d]?this._vars[d]:this._parent?this._parent.get(d):null}}class f{constructor(){this.type=h.valueType}static parse(d){if(1<d.length)throw Error('"id" does not expect arguments');return new f}evaluate(d,m){return d?.id}}class l{constructor(){this.type=h.stringType}static parse(d){if(1<d.length)throw Error('"geometry-type" does not expect arguments');
return new l}evaluate(d,m){if(!d)return null;switch(d.type){case e.GeometryType.Point:return"Point";case e.GeometryType.LineString:return"LineString";case e.GeometryType.Polygon:return"Polygon";default:return null}}}class x{constructor(){this.type=h.objectType}static parse(d){if(1<d.length)throw Error('"properties" does not expect arguments');return new x}evaluate(d,m){return d?.values}}class A{constructor(){this.type=h.numberType}static parse(d){if(1<d.length)throw Error('"zoom" does not expect arguments');
return new A}evaluate(d,m){return m}}class u{constructor(d,m,t){this._lhs=d;this._rhs=m;this._compare=t;this.type=h.booleanType}static parse(d,m,t){if(3!==d.length&&4!==d.length)throw Error(`"${d[0]}" expects 2 or 3 arguments`);if(4===d.length)throw Error(`"${d[0]}" collator not supported`);return new u(n(d[1],m),n(d[2],m),t)}evaluate(d,m){return this._compare(this._lhs.evaluate(d,m),this._rhs.evaluate(d,m))}}class p extends u{static parse(d,m){return u.parse(d,m,(t,B)=>t===B)}}class v extends u{static parse(d,
m){return u.parse(d,m,(t,B)=>t!==B)}}class E extends u{static parse(d,m){return u.parse(d,m,(t,B)=>t<B)}}class I extends u{static parse(d,m){return u.parse(d,m,(t,B)=>t<=B)}}class H extends u{static parse(d,m){return u.parse(d,m,(t,B)=>t>B)}}class z extends u{static parse(d,m){return u.parse(d,m,(t,B)=>t>=B)}}class C{constructor(d){this._arg=d;this.type=h.booleanType}static parse(d,m){if(2!==d.length)throw Error('"!" expects 1 argument');return new C(n(d[1],m))}evaluate(d,m){return!this._arg.evaluate(d,
m)}}class G{constructor(d){this._args=d;this.type=h.booleanType}static parse(d,m){const t=[];for(let B=1;B<d.length;B++)t.push(n(d[B],m));return new G(t)}evaluate(d,m){for(const t of this._args)if(!t.evaluate(d,m))return!1;return!0}}class F{constructor(d){this._args=d;this.type=h.booleanType}static parse(d,m){const t=[];for(let B=1;B<d.length;B++)t.push(n(d[B],m));return new F(t)}evaluate(d,m){for(const t of this._args)if(t.evaluate(d,m))return!0;return!1}}class r{constructor(d){this._args=d;this.type=
h.booleanType}static parse(d,m){const t=[];for(let B=1;B<d.length;B++)t.push(n(d[B],m));return new r(t)}evaluate(d,m){for(const t of this._args)if(t.evaluate(d,m))return!1;return!0}}class y{constructor(d,m,t){this.type=d;this._args=m;this._fallback=t}static parse(d,m,t){if(4>d.length)throw Error('"case" expects at least 3 arguments');if(1===d.length%2)throw Error('"case" expects an odd number of arguments');let B;const L=[];for(let P=1;P<d.length-1;P+=2){const U=n(d[P],m),S=n(d[P+1],m,t);B||(B=S.type);
L.push({condition:U,output:S})}d=n(d[d.length-1],m,t);B||(B=d.type);return new y(B,L,d)}evaluate(d,m){for(const t of this._args)if(t.condition.evaluate(d,m))return t.output.evaluate(d,m);return this._fallback.evaluate(d,m)}}class w{constructor(d,m){this.type=d;this._args=m}static parse(d,m){if(2>d.length)throw Error('"coalesce" expects at least 1 argument');let t;const B=[];for(let L=1;L<d.length;L++){const P=n(d[L],m);t||(t=P.type);B.push(P)}return new w(t,B)}evaluate(d,m){for(const t of this._args){const B=
t.evaluate(d,m);if(null!==B)return B}return null}}class D{constructor(d,m,t,B,L){this.type=d;this._input=m;this._labels=t;this._outputs=B;this._fallback=L}static parse(d,m){if(3>d.length)throw Error('"match" expects at least 3 arguments');if(0===d.length%2)throw Error('"case" expects an even number of arguments');let t;const B=n(d[1],m),L=[],P={};let U;for(let aa=2;aa<d.length-1;aa+=2){var S=d[aa];Array.isArray(S)||(S=[S]);for(const ia of S){S=typeof ia;if("string"!==S&&"number"!==S)throw Error('"match" requires string or number literal as labels');
if(!U)U=S;else if(S!==U)throw Error('"match" requires labels to have the same type');P[ia]=L.length}S=n(d[aa+1],m);t||(t=S.type);L.push(S)}return new D(t,B,P,L,n(d[d.length-1],m))}evaluate(d,m){const t=this._input.evaluate(d,m);return(this._outputs[this._labels[t]]||this._fallback).evaluate(d,m)}}class K{constructor(d,m,t,B,L){this._operator=d;this.type=m;this.interpolation=t;this.input=B;this._stops=L}static parse(d,m,t){const B=d[0];if(5>d.length)throw Error(`"${B}" expects at least 4 arguments`);
const L=d[1];if(!Array.isArray(L)||0===L.length)throw Error(`"${L}" is not a valid interpolation`);switch(L[0]){case "linear":if(1!==L.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==L.length||"number"!==typeof L[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==L.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var P=1;5>P;P++){var U=
L[P];if("number"!==typeof U||0>U||1<U)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${d[0]}" unknown interpolation type "${L[0]}"`);}if(1!==d.length%2)throw Error(`"${B}" expects an even number of arguments`);P=n(d[2],m,h.numberType);let S;"interpolate-hcl"===B||"interpolate-lab"===B?S=h.colorType:t&&"value"!==t.kind&&(S=t);t=[];for(U=3;U<d.length;U+=2){const aa=d[U];if("number"!==typeof aa)throw Error(`"${B}" requires stop inputs as literal numbers`);
if(t.length&&t[t.length-1][0]>=aa)throw Error(`"${B}" requires strictly ascending stop inputs`);const ia=n(d[U+1],m,S);S||(S=ia.type);t.push([aa,ia])}if(S&&S!==h.colorType&&S!==h.numberType&&("array"!==S.kind||S.itemType!==h.numberType))throw Error(`"${B}" cannot interpolate type ${h.typeToString(S)}`);return new K(B,S,L,P,t)}evaluate(d,m){var t=this._stops;if(1===t.length)return t[0][1].evaluate(d,m);var B=this.input.evaluate(d,m);if(B<=t[0][0])return t[0][1].evaluate(d,m);if(B>=t[t.length-1][0])return t[t.length-
1][1].evaluate(d,m);let L=0;for(;++L<t.length&&!(B<t[L][0]););const P=K.interpolationRatio(this.interpolation,B,t[L-1][0],t[L][0]);B=t[L-1][1].evaluate(d,m);const U=t[L][1].evaluate(d,m);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(B)&&Array.isArray(U))return B.map((S,aa)=>g.interpolate(S,U[aa],P));if("color"===this.type.kind&&B instanceof a&&U instanceof a)return B=new a(B),d=new a(U),new a([g.interpolate(B.r,d.r,P),g.interpolate(B.g,d.g,P),g.interpolate(B.b,d.b,
P),g.interpolate(B.a,d.a,P)]);if("number"===this.type.kind&&"number"===typeof B&&"number"===typeof U)return g.interpolate(B,U,P);throw Error(`"${this._operator}" cannot interpolate type ${h.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return d=q.toLCH(B),m=q.toLCH(U),t=m.h-d.h,d=q.toRGB({h:d.h+P*(180<t||-180>t?t-360*Math.round(t/360):t),c:g.interpolate(d.c,m.c,P),l:g.interpolate(d.l,m.l,P)}),new a({a:g.interpolate(B.a,U.a,P),...d});if("interpolate-lab"===this._operator)return d=
q.toLAB(B),m=q.toLAB(U),d=q.toRGB({l:g.interpolate(d.l,m.l,P),a:g.interpolate(d.a,m.a,P),b:g.interpolate(d.b,m.b,P)}),new a({a:g.interpolate(B.a,U.a,P),...d});throw Error(`Unexpected operator "${this._operator}"`);}interpolationUniformValue(d,m){const t=this._stops;if(1===t.length||d>=t[t.length-1][0])return 0;let B=0;for(;++B<t.length&&!(d<t[B][0]););return K.interpolationRatio(this.interpolation,m,t[B-1][0],t[B][0])}getInterpolationRange(d){const m=this._stops;if(1===m.length)return d=m[0][0],[d,
d];var t=m[m.length-1][0];if(d>=t)return[t,t];for(t=0;++t<m.length&&!(d<m[t][0]););return[m[t-1][0],m[t][0]]}static interpolationRatio(d,m,t,B){let L=0;"linear"===d[0]?L=K._exponentialInterpolationRatio(m,1,t,B):"exponential"===d[0]?L=K._exponentialInterpolationRatio(m,d[1],t,B):"cubic-bezier"===d[0]&&(L=k.unitBezier(d[1],d[2],d[3],d[4])(K._exponentialInterpolationRatio(m,1,t,B),1E-5));0>L?L=0:1<L&&(L=1);return L}static _exponentialInterpolationRatio(d,m,t,B){B-=t;if(0===B)return 0;d-=t;return 1===
m?d/B:(m**d-1)/(m**B-1)}}class N{constructor(d,m,t){this.type=d;this._input=m;this._stops=t}static parse(d,m){if(5>d.length)throw Error('"step" expects at least 4 arguments');if(1!==d.length%2)throw Error('"step" expects an even number of arguments');const t=n(d[1],m,h.numberType);let B;const L=[];L.push([-Infinity,n(d[2],m)]);for(let P=3;P<d.length;P+=2){const U=d[P];if("number"!==typeof U)throw Error('"step" requires stop inputs as literal numbers');if(L.length&&L[L.length-1][0]>=U)throw Error('"step" requires strictly ascending stop inputs');
const S=n(d[P+1],m);B||(B=S.type);L.push([U,S])}return new N(B,t,L)}evaluate(d,m){const t=this._stops;if(1===t.length)return t[0][1].evaluate(d,m);const B=this._input.evaluate(d,m);let L=0;for(;++L<t.length&&!(B<t[L][0]););return this._stops[L-1][1].evaluate(d,m)}}class O{constructor(d,m){this.type=d;this._output=m}static parse(d,m,t){if(4>d.length)throw Error('"let" expects at least 3 arguments');if(1===d.length%2)throw Error('"let" expects an odd number of arguments');const B=new b(m);for(let L=
1;L<d.length-1;L+=2){const P=d[L];if("string"!==typeof P)throw Error(`"let" requires a string to define variable names - found ${P}`);B.add(P,n(d[L+1],m))}d=n(d[d.length-1],B,t);return new O(d.type,d)}evaluate(d,m){return this._output.evaluate(d,m)}}class R{constructor(d,m){this.type=d;this.output=m}static parse(d,m,t){if(2!==d.length||"string"!==typeof d[1])throw Error('"var" requires just one literal string argument');m=m.get(d[1]);if(!m)throw Error(`${d[1]} must be defined before being used in a "var" expression`);
return new R(t||h.valueType,m)}evaluate(d,m){return this.output.evaluate(d,m)}}class T{constructor(d,m,t){this.type=d;this._index=m;this._array=t}static parse(d,m){if(3!==d.length)throw Error('"at" expects 2 arguments');const t=n(d[1],m,h.numberType);d=n(d[2],m);return new T(d.type.itemType,t,d)}evaluate(d,m){const t=this._index.evaluate(d,m);d=this._array.evaluate(d,m);if(0>t||t>=d.length)throw Error('"at" index out of bounds');if(t!==Math.floor(t))throw Error('"at" index must be an integer');return d[t]}}
class Y{constructor(d,m){this._key=d;this._obj=m;this.type=h.valueType}static parse(d,m){let t;switch(d.length){case 2:return t=n(d[1],m),new Y(t);case 3:return t=n(d[1],m),d=n(d[2],m),new Y(t,d);default:throw Error('"get" expects 1 or 2 arguments');}}evaluate(d,m){const t=this._key.evaluate(d,m);return this._obj?this._obj.evaluate(d,m)[t]:d?.values[t]}}class X{constructor(d,m){this._key=d;this._obj=m;this.type=h.booleanType}static parse(d,m){let t;switch(d.length){case 2:return t=n(d[1],m),new X(t);
case 3:return t=n(d[1],m),d=n(d[2],m),new X(t,d);default:throw Error('"has" expects 1 or 2 arguments');}}evaluate(d,m){const t=this._key.evaluate(d,m);return this._obj?(d=this._obj.evaluate(d,m),t in d):!!d?.values[t]}}class ca{constructor(d,m){this._key=d;this._vals=m;this.type=h.booleanType}static parse(d,m){if(3!==d.length)throw Error('"in" expects 2 arguments');return new ca(n(d[1],m),n(d[2],m))}evaluate(d,m){const t=this._key.evaluate(d,m);return this._vals.evaluate(d,m).includes(t)}}class da{constructor(d,
m,t){this._item=d;this._array=m;this._from=t;this.type=h.numberType}static parse(d,m){if(3>d.length||4<d.length)throw Error('"index-of" expects 3 or 4 arguments');const t=n(d[1],m),B=n(d[2],m);return 4===d.length?(d=n(d[3],m,h.numberType),new da(t,B,d)):new da(t,B)}evaluate(d,m){const t=this._item.evaluate(d,m),B=this._array.evaluate(d,m);if(this._from){d=this._from.evaluate(d,m);if(d!==Math.floor(d))throw Error('"index-of" index must be an integer');return B.indexOf(t,d)}return B.indexOf(t)}}class ea{constructor(d){this._arg=
d;this.type=h.numberType}static parse(d,m){if(2!==d.length)throw Error('"length" expects 2 arguments');d=n(d[1],m);return new ea(d)}evaluate(d,m){d=this._arg.evaluate(d,m);if("string"===typeof d||Array.isArray(d))return d.length;throw Error('"length" expects string or array');}}class J{constructor(d,m,t,B){this.type=d;this._array=m;this._from=t;this._to=B}static parse(d,m){if(3>d.length||4<d.length)throw Error('"slice" expects 2 or 3 arguments');const t=n(d[1],m),B=n(d[2],m,h.numberType);if(B.type!==
h.numberType)throw Error('"slice" index must return a number');if(4===d.length){d=n(d[3],m,h.numberType);if(d.type!==h.numberType)throw Error('"slice" index must return a number');return new J(t.type,t,B,d)}return new J(t.type,t,B)}evaluate(d,m){const t=this._array.evaluate(d,m);if(!Array.isArray(t)&&"string"!==typeof t)throw Error('"slice" input must be an array or a string');const B=this._from.evaluate(d,m);if(0>B||B>=t.length)throw Error('"slice" index out of bounds');if(B!==Math.floor(B))throw Error('"slice" index must be an integer');
if(this._to){d=this._to.evaluate(d,m);if(0>d||d>=t.length)throw Error('"slice" index out of bounds');if(d!==Math.floor(d))throw Error('"slice" index must be an integer');return t.slice(B,d)}return t.slice(B)}}class M{constructor(){this.type=h.booleanType}static parse(d){if(1!==d.length)throw Error('"has-id" expects no arguments');return new M}evaluate(d,m){return void 0!==d?.id}}class Q{constructor(d,m){this._args=d;this._calculate=m;this.type=h.numberType}static parse(d,m,t){d=d.slice(1).map(B=>
n(B,m));return new Q(d,t)}evaluate(d,m){let t;this._args&&(t=this._args.map(B=>B.evaluate(d,m)));return this._calculate(t)}}class W extends Q{static parse(d,m){switch(d.length){case 2:return Q.parse(d,m,t=>-t[0]);case 3:return Q.parse(d,m,t=>t[0]-t[1]);default:throw Error('"-" expects 1 or 2 arguments');}}}class fa extends Q{static parse(d,m){return Q.parse(d,m,t=>{let B=1;for(const L of t)B*=L;return B})}}class qa extends Q{static parse(d,m){if(3===d.length)return Q.parse(d,m,t=>t[0]/t[1]);throw Error('"/" expects 2 arguments');
}}class ra extends Q{static parse(d,m){if(3===d.length)return Q.parse(d,m,t=>t[0]%t[1]);throw Error('"%" expects 2 arguments');}}class sa extends Q{static parse(d,m){if(3===d.length)return Q.parse(d,m,t=>t[0]**t[1]);throw Error('"^" expects 1 or 2 arguments');}}class ta extends Q{static parse(d,m){return Q.parse(d,m,t=>{let B=0;for(const L of t)B+=L;return B})}}class V{constructor(d,m){this._args=d;this._calculate=m;this.type=h.numberType}static parse(d,m){const t=d.slice(1).map(B=>n(B,m));return new V(t,
V.ops[d[0]])}evaluate(d,m){let t;this._args&&(t=this._args.map(B=>B.evaluate(d,m)));return this._calculate(t)}}V.ops={abs:d=>Math.abs(d[0]),acos:d=>Math.acos(d[0]),asin:d=>Math.asin(d[0]),atan:d=>Math.atan(d[0]),ceil:d=>Math.ceil(d[0]),cos:d=>Math.cos(d[0]),e:()=>Math.E,floor:d=>Math.floor(d[0]),ln:d=>Math.log(d[0]),ln2:()=>Math.LN2,log10:d=>Math.log(d[0])/Math.LN10,log2:d=>Math.log(d[0])/Math.LN2,max:d=>Math.max(...d),min:d=>Math.min(...d),pi:()=>Math.PI,round:d=>Math.round(d[0]),sin:d=>Math.sin(d[0]),
sqrt:d=>Math.sqrt(d[0]),tan:d=>Math.tan(d[0])};class ja{constructor(d){this._args=d;this.type=h.stringType}static parse(d,m){return new ja(d.slice(1).map(t=>n(t,m)))}evaluate(d,m){return this._args.map(t=>t.evaluate(d,m)).join("")}}class ha{constructor(d,m){this._arg=d;this._calculate=m;this.type=h.stringType}static parse(d,m){if(2!==d.length)throw Error(`${d[0]} expects 1 argument`);m=n(d[1],m);return new ha(m,ha.ops[d[0]])}evaluate(d,m){return this._calculate(this._arg.evaluate(d,m))}}ha.ops={downcase:d=>
d.toLowerCase(),upcase:d=>d.toUpperCase()};class ka{constructor(d){this._args=d;this.type=h.colorType}static parse(d,m){if(4!==d.length)throw Error('"rgb" expects 3 arguments');d=d.slice(1).map(t=>n(t,m));return new ka(d)}evaluate(d,m){const t=this._validate(this._args[0].evaluate(d,m)),B=this._validate(this._args[1].evaluate(d,m));d=this._validate(this._args[2].evaluate(d,m));return new a({r:t,g:B,b:d})}_validate(d){if("number"!==typeof d||0>d||255<d)throw Error(`${d}: invalid color component`);
return Math.round(d)}}class la{constructor(d){this._args=d;this.type=h.colorType}static parse(d,m){if(5!==d.length)throw Error('"rgba" expects 4 arguments');d=d.slice(1).map(t=>n(t,m));return new la(d)}evaluate(d,m){const t=this._validate(this._args[0].evaluate(d,m)),B=this._validate(this._args[1].evaluate(d,m)),L=this._validate(this._args[2].evaluate(d,m));d=this._validateAlpha(this._args[3].evaluate(d,m));return new a({r:t,g:B,b:L,a:d})}_validate(d){if("number"!==typeof d||0>d||255<d)throw Error(`${d}: invalid color component`);
return Math.round(d)}_validateAlpha(d){if("number"!==typeof d||0>d||1<d)throw Error(`${d}: invalid alpha color component`);return d}}class ma{constructor(d){this._color=d;this.type=h.arrayType(h.numberType,4)}static parse(d,m){if(2!==d.length)throw Error('"to-rgba" expects 1 argument');d=n(d[1],m);return new ma(d)}evaluate(d,m){return(new a(this._color.evaluate(d,m))).toRgba()}}class ba{constructor(d,m){this.type=d;this._args=m}static parse(d,m){var t=d[0];if(2>d.length)throw Error(`${t} expects at least one argument`);
let B=1,L;if("array"===t){if(2<d.length){switch(d[1]){case "string":L=h.stringType;break;case "number":L=h.numberType;break;case "boolean":L=h.booleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}B++}else L=h.valueType;if(3<d.length){var P=d[2];if(null!==P&&("number"!==typeof P||0>P||P!==Math.floor(P)))throw Error('"array" length argument must be a positive integer literal');B++}L=h.arrayType(L,P)}else switch(t){case "string":L=h.stringType;break;case "number":L=
h.numberType;break;case "boolean":L=h.booleanType;break;case "object":L=h.objectType}for(t=[];B<d.length;B++)P=n(d[B],m),t.push(P);return new ba(L,t)}evaluate(d,m){let t;for(const B of this._args){const L=B.evaluate(d,m);t=h.getType(L);if(h.matchType(t,this.type))return L}throw Error(`Expected ${h.typeToString(this.type)} but got ${h.typeToString(t)}`);}}class Z{constructor(d,m){this.type=d;this._args=m}static parse(d,m){var t=d[0];const B=Z.types[t];if(B===h.booleanType||B===h.stringType){if(2!==
d.length)throw Error(`${t} expects one argument`);}else if(2>d.length)throw Error(`${t} expects at least one argument`);t=[];for(let L=1;L<d.length;L++){const P=n(d[L],m);t.push(P)}return new Z(B,t)}evaluate(d,m){if(this.type===h.booleanType)return!!this._args[0].evaluate(d,m);if(this.type===h.stringType)return h.valueToString(this._args[0].evaluate(d,m));if(this.type===h.numberType){for(const B of this._args){var t=Number(B.evaluate(d,m));if(!isNaN(t))return t}return null}if(this.type===h.colorType){for(t of this._args)try{const B=
Z.toColor(t.evaluate(d,m));if(B instanceof a)return B}catch{}return null}}static toBoolean(d){return!!d}static toString(d){return h.valueToString(d)}static toNumber(d){const m=Number(d);if(isNaN(m))throw Error(`"${d}" is not a number`);return m}static toColor(d){if(d instanceof a)return d;if("string"===typeof d){const m=a.fromString(d);if(m)return m;throw Error(`"${d}" is not a color`);}if(Array.isArray(d))return a.fromArray(d);throw Error(`"${d}" is not a color`);}}Z.types={"to-boolean":h.booleanType,
"to-color":h.colorType,"to-number":h.numberType,"to-string":h.stringType};class na{constructor(d){this._val=d;this.type=h.getType(d)}static parse(d){if(2!==d.length)throw Error('"literal" expects 1 argument');return new na(d[1])}evaluate(d,m){return this._val}}class oa{constructor(d){this._arg=d;this.type=h.stringType}static parse(d,m){if(2!==d.length)throw Error('"typeof" expects 1 argument');return new oa(n(d[1],m))}evaluate(d,m){return h.typeToString(h.getType(this._arg.evaluate(d,m)))}}const pa=
{array:ba,boolean:ba,collator:null,format:null,image:null,literal:na,number:ba,"number-format":null,object:ba,string:ba,"to-boolean":Z,"to-color":Z,"to-number":Z,"to-string":Z,typeof:oa,accumulated:null,"feature-state":null,"geometry-type":l,id:f,"line-progress":null,properties:x,at:T,get:Y,has:X,in:ca,"index-of":da,length:ea,slice:J,"!":C,"!\x3d":v,"\x3c":E,"\x3c\x3d":I,"\x3d\x3d":p,"\x3e":H,"\x3e\x3d":z,all:G,any:F,case:y,coalesce:w,match:D,within:null,interpolate:K,"interpolate-hcl":K,"interpolate-lab":K,
step:N,let:O,var:R,concat:ja,downcase:ha,"is-supported-script":null,"resolved-locale":null,upcase:ha,rgb:ka,rgba:la,"to-rgba":ma,"-":W,"*":fa,"/":qa,"%":ra,"^":sa,"+":ta,abs:V,acos:V,asin:V,atan:V,ceil:V,cos:V,e:V,floor:V,ln:V,ln2:V,log10:V,log2:V,max:V,min:V,pi:V,round:V,sin:V,sqrt:V,tan:V,zoom:A,"heatmap-density":null,"has-id":M,none:r};c.ALL=G;c.ANY=F;c.Add=ta;c.Assert=ba;c.At=T;c.Calculate=V;c.Case=y;c.Coalesce=w;c.Coerce=Z;c.Concat=ja;c.Div=qa;c.EQ=p;c.GE=z;c.GT=H;c.GeomType=l;c.Get=Y;c.Has=
X;c.HasID=M;c.ID=f;c.In=ca;c.IndexOf=da;c.Interpolate=K;c.LE=I;c.LT=E;c.Length=ea;c.Let=O;c.Literal=na;c.Match=D;c.Mod=ra;c.Mul=fa;c.NE=v;c.NONE=r;c.NOT=C;c.Pow=sa;c.Properties=x;c.Rgb=ka;c.Rgba=la;c.Slice=J;c.Step=N;c.String=ha;c.Sub=W;c.ToRgba=ma;c.TypeOf=oa;c.Var=R;c.Zoom=A;c.createExpression=n;c.ops=pa;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(c){function a(k,g,h,n){function b(v,E){var I;let H,z;H=v;for(I=
0;8>I;I++){z=((x*H+l)*H+f)*H-v;if(Math.abs(z)<E)return H;var C=(3*x*H+2*l)*H+f;if(1E-6>Math.abs(C))break;H-=z/C}C=0;I=1;H=v;if(H<C)return C;if(H>I)return I;for(;C<I;){z=((x*H+l)*H+f)*H;if(Math.abs(z-v)<E)break;v>z?C=H:I=H;H=.5*(I-C)+C}return H}const f=3*k,l=3*(h-k)-f,x=1-f-l,A=3*g,u=3*(n-g)-A,p=1-A-u;return function(v,E=1E-6){v=b(v,E);return((p*v+u)*v+A)*v}}const q=/^cubic-bezier\((.*)\)/,e={};e.ease=a(.25,.1,.25,1);e.linear=a(0,0,1,1);e.easeIn=e["ease-in"]=a(.42,0,1,1);e.easeOut=e["ease-out"]=a(0,
0,.58,1);e.easeInOut=e["ease-in-out"]=a(.42,0,.58,1);c.easingFunctions=e;c.parse=function(k){let g=e[k]||null;!g&&(k=q.exec(k))&&(k=k[1].split(",").map(h=>parseFloat(h.trim())),4!==k.length||k.some(h=>isNaN(h))||(g=a.apply(a,k)));return g};c.unitBezier=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(c,a){function q(p,v){return{kind:"array",itemType:p,n:v}}function e(p){if("array"===
p.kind){const v=e(p.itemType);return"number"===typeof p.n?`array<${v}, ${p.n}>`:"value"===p.itemType.kind?"array":`array<${v}>`}return p.kind}function k(p){if(null===p)return h;if("string"===typeof p)return b;if("boolean"===typeof p)return f;if("number"===typeof p)return n;if(p instanceof a)return l;if(Array.isArray(p)){let v;for(const E of p){const I=k(E);if(!v)v=I;else if(v!==I){v=A;break}}return q(v||A,p.length)}return"object"===typeof p?x:A}function g(p,v){if("array"===v.kind)return"array"===
p.kind&&(0===p.n&&"value"===p.itemType.kind||g(p.itemType,v.itemType))&&("number"!==typeof v.n||v.n===p.n);if("value"===v.kind)for(const E of u)if(g(p,E))return!0;return v.kind===p.kind}const h={kind:"null"},n={kind:"number"},b={kind:"string"},f={kind:"boolean"},l={kind:"color"},x={kind:"object"},A={kind:"value"},u=[h,n,b,f,l,x,q(A)];c.arrayType=q;c.booleanType=f;c.colorType=l;c.getType=k;c.matchType=g;c.nullType=h;c.numberType=n;c.objectType=x;c.stringType=b;c.typeToString=e;c.valueToString=function(p){if(null===
p)return"";const v=typeof p;return"string"===v?p:"number"===v||"boolean"===v?String(p):p instanceof a?p.toString():JSON.stringify(p)};c.valueType=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(c,a,q,e){class k{constructor(g,h){this.isDataDriven=!1;this.interpolator=null;switch(g.type){case "number":var n=!0;
break;case "color":n=!0;break;case "array":n="number"===g.value;break;default:n=!1}null==h&&(h=g.default);if(Array.isArray(h)&&0<h.length&&q.ops[h[0]]){n={number:e.numberType,color:e.colorType,string:e.stringType,boolean:e.booleanType,enum:e.stringType};try{var b="array"===g.type?e.arrayType(n[g.value]||e.valueType,g.length):n[g.type];const f=q.createExpression(h,null,b);this.getValue=this._buildExpression(f,g);this.isDataDriven=!0;f instanceof q.Interpolate&&f.input instanceof q.Zoom&&(this.interpolator=
f)}catch(f){console.log(f.message),this.getValue=this._buildSimple(g.default)}}else{n&&"interval"===h.type&&(n=!1);if(b=h?.stops&&0<h.stops.length)for(const f of h.stops)f[1]=this._validate(f[1],g);if(this.isDataDriven=h?!!h.property:!1)if(void 0!==h.default&&(h.default=this._validate(h.default,g)),b)switch(h.type){case "identity":this.getValue=this._buildIdentity(h,g);break;case "categorical":this.getValue=this._buildCategorical(h,g);break;default:this.getValue=n?this._buildInterpolate(h,g):this._buildInterval(h,
g)}else this.getValue=this._buildIdentity(h,g);else b?this.getValue=n?this._buildZoomInterpolate(h):this._buildZoomInterval(h):(h=this._validate(h,g),this.getValue=this._buildSimple(h))}}_validate(g,h){if("number"===h.type){if(null!=h.minimum&&g<h.minimum)return h.minimum;if(null!=h.maximum&&g>h.maximum)return h.maximum}else"color"===h.type?g=k._parseColor(g):"enum"===h.type?"string"===typeof g&&(g=h.values.indexOf(g)):"array"===h.type&&"enum"===h.value?g=g.map(n=>"string"===typeof n?h.values.indexOf(n):
n):"string"===h.type&&(g=e.valueToString(g));return g}_buildSimple(g){return()=>g}_buildExpression(g,h){return(n,b)=>{try{const f=g.evaluate(b,n);return void 0===f?h.default:this._validate(f,h)}catch(f){return console.log(f.message),h.default}}}_buildIdentity(g,h){return(n,b)=>{let f;b&&(f=b.values[g.property]);void 0!==f&&(f=this._validate(f,h));return null!=f?f:void 0!==g.default?g.default:h.default}}_buildCategorical(g,h){return(n,b)=>{let f;b&&(f=b.values[g.property]);f=this._categorical(f,g.stops);
return void 0!==f?f:void 0!==g.default?g.default:h.default}}_buildInterval(g,h){return(n,b)=>{let f;b&&(f=b.values[g.property]);return"number"===typeof f?this._interval(f,g.stops):void 0!==g.default?g.default:h.default}}_buildInterpolate(g,h){return(n,b)=>{let f;b&&(f=b.values[g.property]);return"number"===typeof f?this._interpolate(f,g.stops,g.base||1):void 0!==g.default?g.default:h.default}}_buildZoomInterpolate(g){return h=>this._interpolate(h,g.stops,g.base||1)}_buildZoomInterval(g){return h=>
this._interval(h,g.stops)}_categorical(g,h){const n=h.length;for(let b=0;b<n;b++)if(h[b][0]===g)return h[b][1]}_interval(g,h){const n=h.length;let b=0;for(let f=0;f<n;f++)if(h[f][0]<=g)b=f;else break;return h[b][1]}_interpolate(g,h,n){const b=h.length;for(let x=0;x<b;x++){const A=h[x];if(A[0]<=g)var f=A;else{var l=A;break}}if(f&&l){h=l[0]-f[0];g-=f[0];n=1===n?g/h:(n**g-1)/(n**h-1);if(Array.isArray(f[1])){f=f[1];l=l[1];g=[];for(h=0;h<f.length;h++)g.push(a.interpolate(f[h],l[h],n));return g}return a.interpolate(f[1],
l[1],n)}if(f)return f[1];if(l)return l[1]}static _isEmpty(g){for(const h in g)if(g.hasOwnProperty(h))return!1;return!0}static _parseColor(g){if(Array.isArray(g))return g;"string"===typeof g&&(g=new c(g));if(g instanceof c&&!this._isEmpty(g))return c.toUnitRGBA(g)}}return k})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(c){c.AttributeDataType=void 0;var a=c.AttributeDataType||(c.AttributeDataType={});a[a.FilterFlags=0]="FilterFlags";a[a.Animation=1]="Animation";
a[a.GPGPU=2]="GPGPU";a[a.VV=3]="VV";a[a.DD0=4]="DD0";a[a.DD1=5]="DD1";a[a.DD2=6]="DD2";a[a.LocalTimeOrigin=7]="LocalTimeOrigin";c.MAX_TILE_RESHUFFLES_PER_FRAME=1;c.RESHUFFLING_EXEMPT_DRAW_CALLS=10;c.RESHUFFLING_EXEMPT_MEMORY_BYTES=1048576;c.RESHUFFLING_TARGET_DRAW_EFFICIENCY=.75;c.RESHUFFLING_TARGET_MEMORY_EFFICIENCY=.75;c.angleFactor256=256/360;c.animationUnit=2;c.attributeStoreInitialSize=256;c.attributeStoreTextureSize=1024;c.averageGlyphMosaicItem={metrics:{width:15,height:17,left:0,top:-7,advance:14}};
c.backbufferStencilClipped=1;c.backbufferStencilVisible=0;c.bitsetFillHasPatternHeightPrecisionFactor=32;c.bitsetFillHasPatternWidthPrecisionFactor=64;c.bitsetFillHasUnresolvedReplacementColor=8;c.bitsetFillRandomPatternOffset=4;c.bitsetGenericConsiderAlphaOnly=16;c.bitsetGenericLockColor=2;c.bitsetLineScaleDash=4;c.bitsetMarkerAlignmentMap=1;c.bitsetMarkerAlignmentScreen=0;c.bitsetMarkerOutlineAllowColorOverride=4;c.bitsetMarkerScaleSymbolsProportionally=8;c.bitsetTypeFillOutline=1;c.bufferDataMinimumSize=
128;c.bufferDataPoolSize=4;c.chartMaxFields=10;c.collisionBoxPadding=16;c.collisionBucketSize=128;c.collisionEarlyRejectBucketSize=16;c.collisionMaxZoomDelta=1;c.collisionPlacementPadding=8;c.collisionTileBoxSize=4;c.compressionFactorForU16=128;c.dataDrivenUnit0=4;c.dataDrivenUnit1=5;c.dataDrivenUnit2=6;c.debugLabels=!1;c.defaultSdfTextureSize=128;c.displayRecordIntPerElement=8;c.dotDensityMaxFields=8;c.effectFlag0=128;c.enableEarlyLabelDiscard=!1;c.extrudeScale=64;c.filterFlag0=64;c.filterFlagsUnit=
1;c.glyphSize=24;c.gpgpuUnit=12;c.heuristicGlyphsPerFeature=10;c.heuristicGlyphsPerLine=50;c.hittestSmallSymbolThreshold=3;c.hittestToleranceDesktop=1;c.hittestToleranceMobile=3;c.hittestToleranceSmallSymbol=3;c.labelPlacementOffsetPadding=4;c.localTimeOriginUnit=13;c.magicLabelLineHeight=29;c.maxGeohashLevel=12;c.maxGpuUploadsPerFrame=2;c.maxHighlightReasons=6;c.maxRepresentableInt=16777216;c.maxTextLineWidth=512;c.minMaxZoomPrecisionFactor=10;c.minTextLineWidth=32;c.nanMagicNumber=1E-30;c.patchPixelBufferAllocSize=
500;c.patternFillRasterizationScale=2;c.pictureFillColor=4294967295;c.randomInsidePolygonTextureSize=1024;c.rasterTileSize=256;c.rasterizedVectorMarkerMinSize=128;c.spritePadding=2;c.svgSdfTextureInnerSize=252;c.svgSdfTextureSize=256;c.textureBindingBitmap=0;c.textureBindingGlyphAtlas=0;c.textureBindingHighlight0=5;c.textureBindingHighlight1=6;c.textureBindingRenderer0=5;c.textureBindingRenderer1=6;c.textureBindingSpriteAtlas=0;c.textureUploadManagerBudget=4;c.textureUploadManagerChunkSize=128;c.thinLineHalfWidthThreshold=
1.05;c.tileSize=512;c.visualVariableUnit=3;c.vtlHighResCutoff=1.15;c.vtlTextureBindingUnitGlyphs=6;c.vtlTextureBindingUnitSprites=5;c.webglMaxInnerStops=6;c.webglMaxStops=8;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports"],function(c){function a(k){if("undefined"===typeof WebGL2RenderingContext)return null;var g=document.createElement("canvas");if(!g)return null;let h=g.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});
null==h&&(h=g.getContext("webgl2"),null!=h&&(k.majorPerformanceCaveat=!0));if(null==h)return h;k.available=!0;k.maxTextureSize=h.getParameter(h.MAX_TEXTURE_SIZE);k.supportsVertexShaderSamplers=0<h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(g=h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT))k.supportsHighPrecisionFragment=0<g.precision;return h}let q;class e{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=
this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}c.getWebGLCapabilities=function(){if(!q){{const k=new e,g=a(k);null!=g&&(k.supportsColorBufferFloat=null!==g.getExtension("EXT_color_buffer_float"),k.supportsColorBufferFloatBlend=null!==g.getExtension("EXT_float_blend"),k.supportsColorBufferHalfFloat=k.supportsColorBufferFloat||null!==g.getExtension("EXT_color_buffer_half_float"));q=k}}return q};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("../chunks/tslib.es6 ../request ../core/asyncUtils ../core/Error ../core/lang ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(c,
a,q,e,k,g,h,n,b,f,l,x,A,u,p,v,E,I,H,z,C,G,F,r,y,w,D,K,N,O,R,T,Y,X,ca,da,ea){g=class extends C.BlendLayer(w.ScaleRangeLayer(y.RefreshableLayer(H.ArcGISCachedService(z.ArcGISService(F.OperationalLayer(r.PortalLayer(G.CustomParametersMixin(I.APIKeyMixin(g.MultiOriginJSONMixin(E)))))))))){constructor(...J){super(...J);this._spriteSourceMap=new Map;this.isReference=this.currentStyleInfo=null;this.operationalLayerType="VectorTileLayer";this.path=null;this.refreshInterval=0;this.tilemapCache=this.style=
null;this.type="vector-tile";this.url=null}normalizeCtorArgs(J,M){return"string"===typeof J?{url:J,...M}:J}destroy(){if(this.sourceNameToSource)for(const J of Object.values(this.sourceNameToSource))J?.destroy();this.primarySource?.destroy();this._spriteSourceMap.clear()}async prefetchResources(J){await this.loadSpriteSource(globalThis.devicePixelRatio||1,J)}load(J){const M=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},J).catch(h.throwIfAbortError).then(async()=>{if(this.portalItem?.id){var Q=
`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;(await a(Q,{...J,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:Q},T.createForItemRead(this.portalItem,"portal-item"))}}).catch(h.throwIfAbortError).then(()=>this._loadStyle(J));this.addResolvingPromise(M);return Promise.resolve(this)}get attributionDataUrl(){var J=this.currentStyleInfo;J=J?.serviceUrl&&n.urlToObject(J.serviceUrl);return J?(J=this._getDefaultAttribution(J.path))?n.addQueryParameters(J,
{...this.customParameters,token:this.apiKey}):null:null}get capabilities(){const J=this.primarySource;return J?J.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?n.urlToObject(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??
null}get styleUrl(){return this.currentStyleInfo?.styleUrl||null}writeStyleUrl(J,M){J&&n.isProtocolRelative(J)&&(J=`https:${J}`);const Q=Y.parseKnownArcGISOnlineDomain(J);M.styleUrl=X.ensureMainOnlineDomain(J,Q)}get tileInfo(){const J=[];for(var M in this.sourceNameToSource)J.push(this.sourceNameToSource[M]);M=this.primarySource?.tileInfo||new N;if(1<J.length)for(let Q=0;Q<J.length;Q++)ca.areSchemasOverlapping(M,J[Q].tileInfo)&&(M=ca.unionTileInfos(M,J[Q].tileInfo));return M}readTilemapCache(J,M){return M.capabilities?.includes("Tilemap")?
new O.TilemapCache({layer:this}):null}readVersion(J,M){return M.version?parseFloat(M.version):parseFloat(M.currentVersion)}async loadSpriteSource(J=1,M){if(!this._spriteSourceMap.has(J)){var Q=ea.getWebGLCapabilities().maxTextureSize;const W=this.currentStyleInfo?.spriteUrl?n.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;Q=new K({type:"url",spriteUrl:W,pixelRatio:J,spriteFormat:this.currentStyleInfo?.spriteFormat},Q);await Q.load(M);this._spriteSourceMap.set(J,
Q)}return this._spriteSourceMap.get(J)}async setSpriteSource(J,M){if(!J)return null;var Q=ea.getWebGLCapabilities().maxTextureSize,W=J.spriteUrl;W=W?n.addQueryParameters(W,{...this.customParameters,token:this.apiKey}):null;if(!W&&"url"===J.type)return null;Q=new K(J,Q);try{await Q.load(M);const fa=J.pixelRatio||1;this._spriteSourceMap.clear();this._spriteSourceMap.set(fa,Q);W&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=W);this.emit("spriteSource-change",{spriteSource:Q});return Q}catch(fa){h.throwIfAbortError(fa)}return null}async loadStyle(J,
M){const Q=J||this.style||this.url;if(this._loadingTask&&"string"===typeof Q&&this.url===Q)return this._loadingTask.promise;this._loadingTask?.abort();this._loadingTask=q.createTask(W=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(Q,{signal:W})},M);return this._loadingTask.promise}getStyleLayerId(J){return this.styleRepository.getStyleLayerId(J)}getStyleLayerIndex(J){return this.styleRepository.getStyleLayerIndex(J)}getPaintProperties(J){return k.clone(this.styleRepository?.getPaintProperties(J))}setPaintProperties(J,
M){const Q=this.styleRepository.isPainterDataDriven(J);this.styleRepository.setPaintProperties(J,M);const W=this.styleRepository.isPainterDataDriven(J);this.emit("paint-change",{layer:J,paint:M,isDataDriven:Q||W})}getStyleLayer(J){return k.clone(this.styleRepository.getStyleLayer(J))}setStyleLayer(J,M){this.styleRepository.setStyleLayer(J,M);this.emit("style-layer-change",{layer:J,index:M})}deleteStyleLayer(J){this.styleRepository.deleteStyleLayer(J);this.emit("delete-style-layer",{layer:J})}getLayoutProperties(J){return k.clone(this.styleRepository.getLayoutProperties(J))}setLayoutProperties(J,
M){this.styleRepository.setLayoutProperties(J,M);this.emit("layout-change",{layer:J,layout:M})}setStyleLayerVisibility(J,M){this.styleRepository.setStyleLayerVisibility(J,M);this.emit("style-layer-visibility-change",{layer:J,visibility:M})}getStyleLayerVisibility(J){return this.styleRepository.getStyleLayerVisibility(J)}write(J,M){return M?.origin&&!this.styleUrl?(M.messages&&M.messages.push(new e("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,
{layer:this})),null):super.write(J,M)}getTileUrl(J,M,Q){return null}async _getSourceAndStyle(J,M){if(!J)throw Error("invalid style!");M=await R.loadMetadata(J,{...M,query:{...this.customParameters,token:this.apiKey}});"webp"!==M.spriteFormat||await D.checkWebPSupport("lossy")||(M.spriteFormat="png");this._set("currentStyleInfo",{...M});"string"===typeof J?(this.url=J,this.style=null):(this.url=null,this.style=J);this._set("sourceNameToSource",M.sourceNameToSource);this._set("primarySource",M.sourceNameToSource[M.primarySourceName]);
this._set("styleRepository",new da(M.style));this.read(M.layerDefinition,{origin:"service"});this.emit("load-style")}_getDefaultAttribution(J){var M=J.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^/]+)?\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/vectortileserver/i);J="OpenBasemap_v2 OpenBasemap_GCS_v2 OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2 World_Hillshade_v2".split(" ");
if(M){var Q=M[2]&&M[2].toLowerCase();if(Q){M=M[1]||"";for(const W of J)if(W.toLowerCase().includes(Q))return n.normalize(`//static.arcgis.com/attribution/Vector${M}/${W}`)}}}async _loadStyle(J){return this._loadingTask?.promise??this.loadStyle(null,J)}};c.__decorate([b.property({readOnly:!0})],g.prototype,"attributionDataUrl",null);c.__decorate([b.property({type:["show","hide"]})],g.prototype,"listMode",void 0);c.__decorate([b.property({json:{read:!0,write:!0}})],g.prototype,"blendMode",void 0);c.__decorate([b.property({readOnly:!0,
json:{read:!1}})],g.prototype,"capabilities",null);c.__decorate([b.property({readOnly:!0})],g.prototype,"currentStyleInfo",void 0);c.__decorate([b.property({json:{read:!1},readOnly:!0,type:p})],g.prototype,"fullExtent",null);c.__decorate([b.property({json:{read:!1},readOnly:!0,type:p})],g.prototype,"initialExtent",null);c.__decorate([b.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],g.prototype,"isReference",void 0);c.__decorate([b.property({type:["VectorTileLayer"]})],
g.prototype,"operationalLayerType",void 0);c.__decorate([b.property({readOnly:!0})],g.prototype,"parsedUrl",null);c.__decorate([b.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],g.prototype,"path",void 0);c.__decorate([b.property({type:Number,json:{write:!1,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],g.prototype,"refreshInterval",void 0);c.__decorate([b.property()],g.prototype,"style",void 0);c.__decorate([b.property({readOnly:!0})],
g.prototype,"serviceUrl",null);c.__decorate([b.property({type:v,readOnly:!0})],g.prototype,"spatialReference",null);c.__decorate([b.property({readOnly:!0})],g.prototype,"styleRepository",void 0);c.__decorate([b.property({readOnly:!0})],g.prototype,"sourceNameToSource",void 0);c.__decorate([b.property({readOnly:!0})],g.prototype,"primarySource",void 0);c.__decorate([b.property({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],
g.prototype,"styleUrl",null);c.__decorate([u.writer(["portal-item","web-document"],"styleUrl")],g.prototype,"writeStyleUrl",null);c.__decorate([b.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:N})],g.prototype,"tileInfo",null);c.__decorate([b.property()],g.prototype,"tilemapCache",void 0);c.__decorate([x.reader("service","tilemapCache",["capabilities","tileInfo"])],g.prototype,"readTilemapCache",null);c.__decorate([b.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],
g.prototype,"type",void 0);c.__decorate([b.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],g.prototype,"url",void 0);c.__decorate([b.property({readOnly:!0})],g.prototype,"version",void 0);c.__decorate([x.reader("version",["version","currentVersion"])],g.prototype,"readVersion",null);return g=c.__decorate([A.subclass("esri.layers.VectorTileLayer")],g)});