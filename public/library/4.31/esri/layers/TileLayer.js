// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/TileInfo ../support/TileInfoTilemapCache ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(l,f,g,r,p,y,q,t,u,C,T,P,A){l.ArcGISCachedService=z=>{z=class extends z{constructor(){super(...arguments);
this.copyright=null;this.maxScale=this.minScale=0;this.tilemapCache=this.tileInfo=this.spatialReference=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(G,L){return null!=L.minLOD&&null!=L.maxLOD?G:0}readMaxScale(G,L){return null!=L.minLOD&&null!=L.maxLOD?G:0}get supportsBlankTile(){return 10.2<=this.version}readTilemapCache(G,L,I){G=L.capabilities?.includes("Tilemap");let {minLOD:E,maxLOD:D,minScale:b,maxScale:c}=L;if(null==E&&null==D&&0!==b&&0!==c){b=b?Math.round(1E4*b)/1E4:Math.round(1E4*
L.tileInfo.lods[0].scale)/1E4;c=c?Math.round(1E4*c)/1E4:Math.round(1E4*L.tileInfo.lods[L.tileInfo.lods.length-1].scale)/1E4;for(var h of L.tileInfo.lods){const d=Math.round(1E4*h.scale)/1E4;E=d>=b?h.level:E;D=d>=c?h.level:D}}return G?new P.TilemapCache({layer:this,minLOD:E,maxLOD:D}):L.tileInfo?(h=new C,h.read(L.tileInfo,I),new T(h,E,D)):null}};f.__decorate([r.property({json:{read:{source:"copyrightText"}}})],z.prototype,"copyright",void 0);f.__decorate([r.property()],z.prototype,"minScale",void 0);
f.__decorate([t.reader("service","minScale")],z.prototype,"readMinScale",null);f.__decorate([r.property()],z.prototype,"maxScale",void 0);f.__decorate([t.reader("service","maxScale")],z.prototype,"readMaxScale",null);f.__decorate([r.property({type:A})],z.prototype,"spatialReference",void 0);f.__decorate([r.property({readOnly:!0})],z.prototype,"supportsBlankTile",null);f.__decorate([r.property({type:C})],z.prototype,"tileInfo",void 0);f.__decorate([r.property()],z.prototype,"tilemapCache",void 0);
f.__decorate([t.reader("service","tilemapCache",["capabilities","tileInfo"])],z.prototype,"readTilemapCache",null);f.__decorate([r.property()],z.prototype,"version",void 0);return z=f.__decorate([u.subclass("esri.layers.mixins.ArcGISCachedService")],z)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(l,f,g,r,p,y,q,t,u,C,T,P,A,z,G,L,I,E){var D;f=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});g=D=class extends g.JSONSupport{static create(b={}){const {resolutionFactor:c=1,scales:h,size:d=256,spatialReference:k=A.WebMercator,numLODs:v=24}=b;if(!G.isValid(k)){b=[];if(h)for(var w=0;w<h.length;w++){var m=
h[w];b.push(new I({level:w,scale:m,resolution:m}))}else for(w=5E-4,m=v-1;0<=m;m--)b.unshift(new I({level:m,scale:w,resolution:w})),w*=2;return new D({dpi:96,lods:b,origin:new P(0,0,k),size:[d,d],spatialReference:k})}w=G.getInfo(k);b=b.origin?new P({x:b.origin.x,y:b.origin.y,spatialReference:k}):w?new P({x:w.origin[0],y:w.origin[1],spatialReference:k}):new P({x:0,y:0,spatialReference:k});w=1/(39.37*r.getMetersPerUnitForSR(k)*96);m=[];if(h)for(var M=0;M<h.length;M++){var J=h[M];m.push(new I({level:M,
scale:J,resolution:J*w}))}else{var N=G.isGeographic(k)?512/d*5.916575275917094E8:256/d*5.91657527591555E8;M=Math.ceil(v/c);m.push(new I({level:0,scale:N,resolution:N*w}));for(J=1;J<M;J++)N/=2**c,m.push(new I({level:J,scale:N,resolution:N*w}))}return new D({dpi:96,lods:m,origin:b,size:[d,d],spatialReference:k})}constructor(b){super(b);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:b,origin:c}=this;if(b&&c){const h=G.getInfo(b);return b.isWrappable&&
!!h&&Math.abs(h.origin[0]-c.x)<=h.dx}return!1}readOrigin(b,c){return P.fromJSON({spatialReference:c.spatialReference,...b})}set lods(b){const c=[],h=this._levelToLOD={};b&&b.forEach(d=>{c.push(d.scale);h[d.level]=d});this._set("scales",c);this._set("lods",b);this._initializeUpsampleLevels()}readSize(b,c){return[c.cols,c.rows]}writeSize(b,c){c.cols=b[0];c.rows=b[1]}zoomToScale(b){const c=this.scales;if(0>=b)return c[0];if(b>=c.length-1)return c[c.length-1];const h=Math.floor(b);return c[h]/(c[h]/c[h+
1])**(b-h)}scaleToZoom(b){const c=this.scales,h=c.length-1;let d=0;for(;d<h;d++){const k=c[d],v=c[d+1];if(k<=b)break;if(v===b)return d+1;if(k>b&&v<b)return d+Math.log(k/b)/Math.log(k/v)}return d}tileAt(b,c,h,d){var k=this.lodAt(b);if(!k)return null;let v;if("number"===typeof c)v=c,c=h;else{if(G.equals(c.spatialReference,this.spatialReference))v=c.x,c=c.y;else{d=L.project(c,this.spatialReference);if(null==d)return null;v=d.x;c=d.y}d=h}h=k.resolution*this.size[0];k=k.resolution*this.size[1];d||=new E.TileKey(null,
0,0,0,z.create());d.level=b;d.row=Math.floor((this.origin.y-c)/k+.001);d.col=Math.floor((v-this.origin.x)/h+.001);this.updateTileInfo(d);return d}updateTileInfo(b,c=D.ExtrapolateOptions.NONE){var h=this.lodAt(b.level);h||c!==D.ExtrapolateOptions.POWER_OF_TWO||(c=this.lods[this.lods.length-1],c.level<b.level&&(h=c));if(h){var d=b.level-h.level;c=h.resolution*this.size[0]/2**d;h=h.resolution*this.size[1]/2**d;b.id=`${b.level}/${b.row}/${b.col}`;b.extent||(b.extent=z.create());b.extent[0]=this.origin.x+
b.col*c;b.extent[1]=this.origin.y-(b.row+1)*h;b.extent[2]=b.extent[0]+c;b.extent[3]=b.extent[1]+h}}upsampleTile(b){const c=this._upsampleLevels[b.level];if(!c||-1===c.parentLevel)return!1;b.level=c.parentLevel;b.row=Math.floor(b.row/c.factor+.001);b.col=Math.floor(b.col/c.factor+.001);this.updateTileInfo(b);return!0}getTileBounds(b,c){var h=this.lodAt(c.level);if(null==h)return null;var {resolution:d}=h;h=d*this.size[0];d*=this.size[1];b[0]=this.origin.x+c.col*h;b[1]=this.origin.y-(c.row+1)*d;b[2]=
b[0]+h;b[3]=b[1]+d;return b}lodAt(b){return this._levelToLOD?.[b]??null}clone(){return D.fromJSON(this.write({}))}getCompatibleForVTL(b){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===b)return null;const c=(512===this.size[0]&&256===b?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===b&&0===c)return this;const h=[],d=this.lods.length-c;for(let k=0;k<d;k++){const v=k+c,{scale:w,resolution:m}=0<=v?this.lods[v]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};
h.push(new I({level:k,scale:w,resolution:m}))}return new D({size:[b,b],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:h})}_initializeUpsampleLevels(){const b=this.lods;this._upsampleLevels=[];let c=null;for(let h=0;h<b.length;h++){const d=b[h];this._upsampleLevels[d.level]={parentLevel:c?c.level:-1,factor:c?c.resolution/d.resolution:0};c=d}}};l.__decorate([p.property({type:Number,json:{write:!0}})],g.prototype,
"compressionQuality",void 0);l.__decorate([p.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);l.__decorate([p.property({type:String,json:{read:f.read,write:f.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);l.__decorate([p.property({readOnly:!0})],g.prototype,"isWrappable",null);l.__decorate([p.property({type:P,json:{write:!0}})],g.prototype,"origin",void 0);l.__decorate([u.reader("origin")],g.prototype,"readOrigin",null);l.__decorate([p.property({type:[I],
value:null,json:{write:!0}})],g.prototype,"lods",null);l.__decorate([p.property({readOnly:!0})],g.prototype,"scales",void 0);l.__decorate([p.property({cast:b=>Array.isArray(b)?b:"number"===typeof b?[b,b]:[256,256]})],g.prototype,"size",void 0);l.__decorate([u.reader("size",["rows","cols"])],g.prototype,"readSize",null);l.__decorate([T.writer("size",{cols:{type:y.Integer},rows:{type:y.Integer}})],g.prototype,"writeSize",null);l.__decorate([p.property({type:A,json:{write:!0}})],g.prototype,"spatialReference",
void 0);g=D=l.__decorate([C.subclass("esri.layers.support.TileInfo")],g);(function(b){b=b.ExtrapolateOptions||(b.ExtrapolateOptions={});b[b.NONE=0]="NONE";b[b.POWER_OF_TWO=1]="POWER_OF_TWO"})(g||={});return g})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(l,f,g,r,p,
y,q){var t;f=t=class extends f.JSONSupport{constructor(u){super(u);this.cols=null;this.level=0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new t({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"cols",void 0);l.__decorate([g.property({type:r.Integer,
json:{write:!0}})],f.prototype,"level",void 0);l.__decorate([g.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,"origin",void 0);l.__decorate([g.property({type:Number,json:{write:!0}})],f.prototype,"resolution",void 0);l.__decorate([g.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],f.prototype,
"rows",void 0);l.__decorate([g.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);return f=t=l.__decorate([q.subclass("esri.layers.support.LOD")],f)})},"esri/layers/support/TileKey":function(){define(["exports"],function(l){class f{constructor(g,r,p,y,q){this.id=g;this.level=r;this.row=p;this.col=y;this.extent=q}}l.TileKey=f;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfoTilemapCache":function(){define(["../../core/Error","../../core/promiseUtils"],
function(l,f){class g{constructor(r,p=0,y=r.lods[r.lods.length-1].level){this.tileInfo=r;this.minLOD=p;this.maxLOD=y;r.lodAt(p)||(this.minLOD=r.lods[0].level);r.lodAt(y)||(this.maxLOD=r.lods[r.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(r,p,y){const q=this.tileInfo?.lodAt(r);return!q||r<this.minLOD||r>this.maxLOD?"unavailable":q.cols&&q.rows?
y>=q.cols[0]&&y<=q.cols[1]&&p>=q.rows[0]&&p<=q.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(r,p,y,q){await f.waitTick(q);q=this.getAvailability(r,p,y);if("unavailable"===q)throw new l("tile-map:tile-unavailable","Tile is not available",{level:r,row:p,col:y});return q}async fetchAvailabilityUpsample(r,p,y,q,t){await f.waitTick(t);q.level=r;q.row=p;q.col=y;const u=this.tileInfo;u.updateTileInfo(q);return this.fetchAvailability(r,p,y,t).catch(C=>{if(f.isAbortError(C))throw C;if(u.upsampleTile(q))return this.fetchAvailabilityUpsample(q.level,
q.row,q.col,q,t);throw C;})}}return g})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/ByteSizeUnit ../../core/Error ../../core/handleUtils ../../core/has ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(l,f,g,r,p,y,q,t,u,C,T,P,A,z,G,L,I,E,D,b){function c(d,k,v){return new y("tile-map:tile-unavailable","Tile is not available",{level:d,row:k,col:v})}var h;l.TilemapCache=h=class extends r{constructor(d){super(d);this._pendingTilemapRequests={};this.request=g;this.size=32;this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new u.LRUCache(2*p.ByteSizeUnit.MEGABYTES);this.addHandles(P.watch(()=>{const {layer:d}=this;return[d?.parsedUrl,d?.tileServers,d?.apiKey,d?.customParameters]},()=>
this._initializeTilemapDefinition(),P.initial))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(d,k,v){return!this.layer.tileInfo.lodAt(d)||d<this.effectiveMinLOD||d>this.effectiveMaxLOD?"unavailable":(d=this._tilemapFromCache(d,k,v,this._tmpTilemapDefinition))?d.getAvailability(k,v):"unknown"}fetchAvailability(d,k,v,w){return!this.layer.tileInfo.lodAt(d)||
d<this.effectiveMinLOD||d>this.effectiveMaxLOD?Promise.reject(c(d,k,v)):this._fetchTilemap(d,k,v,w).catch(m=>m).then(m=>{if(m instanceof b.Tilemap){m=m.getAvailability(k,v);if("unavailable"===m)throw c(d,k,v);return m}if(T.isAbortError(m))throw m;return"unknown"})}fetchAvailabilityUpsample(d,k,v,w,m){w.level=d;w.row=k;w.col=v;const M=this.layer.tileInfo;M.updateTileInfo(w);const J=this.fetchAvailability(d,k,v,m).catch(N=>{if(T.isAbortError(N))throw N;if(M.upsampleTile(w))return this.fetchAvailabilityUpsample(w.level,
w.row,w.col,w,m);throw N;});this._fetchAvailabilityUpsamplePrefetch(w.id,d,k,v,m,J);return J}async _fetchAvailabilityUpsamplePrefetch(d,k,v,w,m,M){if(this._prefetchingEnabled&&null!=d){var J=`prefetch-${d}`;if(!this.hasHandles(J)){var N=new AbortController;M.then(()=>N.abort(),()=>N.abort());var B=!1;M=q.makeHandle(()=>{B||(B=!0,N.abort())});this.addHandles(M,J);await A.waitTicks(10,N.signal).catch(()=>{});B||(B=!0,this.removeHandles(J));if(!T.isAborted(N))for(d=new D.TileKey(d,k,v,w),m={...m,signal:N.signal},
k=this.layer.tileInfo,v=0;h._prefetches.length<h._maxPrefetch&&k.upsampleTile(d);++v){const Q=this.fetchAvailability(d.level,d.row,d.col,m);h._prefetches.push(Q);w=()=>{h._prefetches.removeUnordered(Q)};Q.then(w,w)}}}}_fetchTilemap(d,k,v,w){if(!this.layer.tileInfo.lodAt(d)||d<this.effectiveMinLOD||d>this.effectiveMaxLOD)return Promise.reject(new y("tilemap-cache:level-unavailable",`Level ${d} is unavailable in the service`));const m=this._tmpTilemapDefinition;if(d=this._tilemapFromCache(d,k,v,m))return Promise.resolve(d);
const M=w?.signal;w={...w,signal:null};return new Promise((J,N)=>{T.onAbort(M,()=>N(T.createAbortError()));const B=b.tilemapDefinitionId(m);let Q=this._pendingTilemapRequests[B];if(!Q){Q=b.Tilemap.fromDefinition(m,w).then(X=>{this._tilemapCache.put(B,X,X.byteSize);return X});const K=()=>{delete this._pendingTilemapRequests[B]};this._pendingTilemapRequests[B]=Q;Q.then(K,K)}Q.then(J,N)})}_initializeTilemapDefinition(){if(this.layer.parsedUrl){var {parsedUrl:d,apiKey:k,customParameters:v}=this.layer;
this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:d.path,query:z.objectToQuery({...d.query,...v,token:k??d.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}}_tilemapFromCache(d,k,v,w){w.level=d;w.row=k-k%this.size;w.col=v-v%this.size;d=b.tilemapDefinitionId(w);return this._tilemapCache.get(d)}get test(){}};l.TilemapCache._maxPrefetch=4;l.TilemapCache._prefetches=new C({initialSize:h._maxPrefetch});f.__decorate([G.property({constructOnly:!0})],
l.TilemapCache.prototype,"layer",void 0);f.__decorate([G.property({constructOnly:!0})],l.TilemapCache.prototype,"minLOD",void 0);f.__decorate([G.property({constructOnly:!0})],l.TilemapCache.prototype,"maxLOD",void 0);f.__decorate([G.property({constructOnly:!0})],l.TilemapCache.prototype,"request",void 0);f.__decorate([G.property({constructOnly:!0})],l.TilemapCache.prototype,"size",void 0);l.TilemapCache=h=f.__decorate([E.subclass("esri.layers.support.TilemapCache")],l.TilemapCache);Object.defineProperty(l,
Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(l){l.ByteSizeUnit=void 0;var f=l.ByteSizeUnit||(l.ByteSizeUnit={});f[f.KILOBYTES=1024]="KILOBYTES";f[f.MEGABYTES=1048576]="MEGABYTES";f[f.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../request ../../core/Error ../../core/lang ../../core/typedArrayUtil ../../geometry/support/UintArray".split(" "),
function(l,f,g,r,p,y){function q(u){if(u.service.tileServers?.length){var C=u.service.tileServers;C=`${C&&C.length?C[u.row%C.length]:u.service.url}/tilemap/${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`}else C=`${u.service.url}/tilemap/${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`;(u=u.service.query)&&(C=`${C}?${u}`);return C}class t{constructor(u){if(!u?.location)throw new g("tilemap:missing-location","Location missing from tilemap response");if(!1===u.valid)throw new g("tilemap:invalid",
"Tilemap response was marked as invalid");if(!u.data)throw new g("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(u.data))throw new g("tilemap:data-mismatch","Data must be an array of numbers");if(u.data.length!==u.location.width*u.location.height)throw new g("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");const {location:C,data:T}=u;this.location=Object.freeze(r.clone(C));let P=u=!0;const A=y.newUintArray(Math.ceil(this.location.width*
this.location.height/32));let z=0;for(let G=0;G<T.length;G++){const L=G%32;T[G]?(P=!1,A[z]|=1<<L):u=!1;31===L&&++z}P?(this._availability="unavailable",this.byteSize=40):u?(this._availability="available",this.byteSize=40):(this._availability=A,this.byteSize=40+p.estimateSize(A))}getAvailability(u,C){if("unavailable"===this._availability||"available"===this._availability)return this._availability;u=(u-this.location.top)*this.location.width+(C-this.location.left);C=u>>5;const T=this._availability;return 0>
C||C>T.length?"unknown":T[C]&1<<u%32?"available":"unavailable"}static fromDefinition(u,C){const T=u.service.request||f,{row:P,col:A,width:z,height:G}=u,L={query:{f:"json"}};C=C?{...L,...C}:L;return T(q(u),C).then(I=>I.data).catch(I=>{if(422===I?.details?.httpStatus)return{location:{top:P,left:A,width:z,height:G},valid:!0,data:Array(z*G).fill(0)};throw I;}).then(I=>{if(I.location&&(I.location.top!==P||I.location.left!==A||I.location.width!==z||I.location.height!==G))throw new g("tilemap:location-mismatch",
"Tilemap response for different location than requested",{response:I,definition:{top:P,left:A,width:z,height:G}});return t.fromJSON(I)})}static fromJSON(u){return Object.freeze(new t(u))}}l.Tilemap=t;l.tilemapDefinitionId=function(u){return`${u.level}/${u.row}/${u.col}/${u.width}/${u.height}`};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/UintArray":function(){define(["exports","../../core/typedArrayUtil"],function(l,f){l.newUintArray=function(g,r=!1){return g<=
f.nativeArrayMaxSize?r?Array(g).fill(0):Array(g):new Uint32Array(g)};l.uintSubArray=function(g,r,p){return Array.isArray(g)?g.slice(r,r+p):g.subarray(r,r+p)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/ArcGISMapService":function(){define("exports ../../chunks/tslib.es6 ../../request ../../core/MapUtils ../../core/promiseUtils ../../core/urlUtils ../../core/Version ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../../geometry/Extent ../../geometry/SpatialReference ../support/arcgisLayerUrl ../support/commonProperties ../../portal/support/portalItemUtils".split(" "),
function(l,f,g,r,p,y,q,t,u,C,T,P,A,z,G,L,I,E,D){l.ArcGISMapService=b=>{b=class extends b{constructor(){super(...arguments);this.capabilities=void 0;this.fullExtent=this.copyright=null;this.legendEnabled=!0;this.spatialReference=null;this.version=void 0;this._allLayersAndTablesMap=null}readCapabilities(c,h){var d=h.capabilities&&h.capabilities.split(",").map(K=>K.toLowerCase().trim());if(!d)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},
exportMap:null,exportTiles:null};var k=this.type;c="tile"!==k&&!!h.supportsDynamicLayers;const v=d.includes("query"),w=d.includes("map"),m=!!h.exportTilesAllowed,M=d.includes("tilemap");d=d.includes("data");const J="tile"!==k&&(!h.tileInfo||c),N="tile"!==k&&(!h.tileInfo||c);k="tile"!==k;var B=h.cimVersion?q.Version.parse(h.cimVersion):null;const Q=B?.greaterEqual(1,4)??!1;B=B?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:w,supportsExportTiles:m,supportsIdentify:v,supportsQuery:d,supportsTileMap:M},
exportMap:w?{supportsArcadeExpressionForLabeling:Q,supportsSublayersChanges:k,supportsDynamicLayers:c,supportsSublayerVisibility:J,supportsSublayerDefinitionExpression:N,supportsCIMSymbols:B}:null,exportTiles:m?{maxExportTilesCount:+h.maxExportTilesCount}:null}}readVersion(c,h){(c=h.currentVersion)||(c=h.hasOwnProperty("capabilities")||h.hasOwnProperty("tables")?10:h.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return c}async fetchRelatedService(c){var h=this.portalItem;if(!h||!D.isHostedLayer(h))return null;
this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=h.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},c).then(d=>d.find(k=>"Feature Service"===k.type)??null,()=>null));h=await this._relatedFeatureServicePromise;p.throwIfAborted(c);return h?{itemId:h.id,url:h.url}:null}async fetchSublayerInfo(c,h){const {source:d}=c;if(this?.portalItem&&"tile"===this.type&&"map-layer"===d?.type&&D.isHostedLayer(this.portalItem)&&c.originIdOf("url")<z.OriginId.SERVICE){var k=
await this.fetchRelatedService(h);k&&(c.url=y.join(k.url,d.mapLayerId.toString()),c.layerItemId=k.itemId)}({url:k}=c);let v;if("data-layer"===d.type)v=(await g(k,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...h})).data;else if(k&&c.originIdOf("url")>z.OriginId.SERVICE)try{const w=await this._fetchAllLayersAndTablesFromService(k),m=I.parse(k)?.sublayer??d.mapLayerId;v=w.get(m)}catch{}else{c=c.id;"map-layer"===d?.type&&(c=d.mapLayerId);try{v=(await this.fetchAllLayersAndTables(h)).get(c)}catch{}}return v}async fetchAllLayersAndTables(c){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,
c)}async _fetchAllLayersAndTablesFromService(c,h){await this.load(h);this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map);const d=I.parse(c);c=await r.getOrCreateMapValue(this._allLayersAndTablesMap,d?.url.path,()=>g(y.join(d?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(k=>{const v=new Map,{layers:w,tables:m}=k.data;k=[...(w??[]),...(m??[])];for(const M of k)v.set(M.id,M);return{result:v}},k=>({error:k})));p.throwIfAborted(h);
if("result"in c)return c.result;throw c.error;}};f.__decorate([t.property({readOnly:!0})],b.prototype,"capabilities",void 0);f.__decorate([P.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],b.prototype,"readCapabilities",null);f.__decorate([t.property({json:{read:{source:"copyrightText"}}})],b.prototype,"copyright",void 0);f.__decorate([t.property({type:G})],b.prototype,"fullExtent",void 0);f.__decorate([t.property(E.id)],
b.prototype,"id",void 0);f.__decorate([t.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],b.prototype,"legendEnabled",void 0);f.__decorate([t.property(E.popupEnabled)],b.prototype,"popupEnabled",void 0);f.__decorate([t.property({type:L})],b.prototype,"spatialReference",void 0);f.__decorate([t.property({readOnly:!0})],b.prototype,"version",void 0);f.__decorate([P.reader("service","version",["currentVersion","capabilities",
"tables","supportedImageFormatTypes"])],b.prototype,"readVersion",null);return b=f.__decorate([A.subclass("esri.layers.mixins.ArcGISMapService")],b)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/mixins/SublayersOwner":function(){define("exports ../../chunks/tslib.es6 ../../core/Collection ../../core/CollectionFlattener ../../core/Error ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/PropertyOrigin ../support/Sublayer ../support/sublayerUtils".split(" "),
function(l,f,g,r,p,y,q,t,u,C,T,P,A,z,G){function L(D,b){const c=[],h={};if(!D)return c;D.forEach(d=>{const k=new z;k.read(d,b);h[k.id]=k;null!=d.parentLayerId&&-1!==d.parentLayerId?(d=h[d.parentLayerId],d.sublayers||(d.sublayers=[]),d.sublayers.unshift(k)):c.unshift(k)});return c}function I(D,b){D&&D.forEach(c=>{b(c);c.sublayers&&c.sublayers.length&&I(c.sublayers,b)})}const E=g.ofType(z);l.SublayersOwner=D=>{D=class extends D{constructor(...b){super(...b);this.allSublayers=new r({getCollections:()=>
[this.sublayers],getChildrenFunction(c){return c.sublayers}});this.sublayersSourceJSON={[A.OriginId.SERVICE]:{},[A.OriginId.PORTAL_ITEM]:{},[A.OriginId.WEB_SCENE]:{},[A.OriginId.WEB_MAP]:{}};this.subtables=null;this.addHandles([q.watch(()=>this.sublayers,(c,h)=>this._handleSublayersChange(c,h),q.sync),q.watch(()=>this.subtables,(c,h)=>this._handleSublayersChange(c,h),q.sync)])}destroy(){this.allSublayers.destroy()}readSublayers(b,c){if(c&&b){var {sublayersSourceJSON:h}=this,d=A.nameToId(c.origin);
if(!(d<A.OriginId.SERVICE||(h[d]={context:c,visibleLayers:b.visibleLayers||h[d].visibleLayers,layers:b.layers||h[d].layers},d>A.OriginId.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var {sublayers:k,origin:v}=this.createSublayersForOrigin("web-document");b=T.getProperties(this);b.setDefaultOrigin(v);this._set("sublayers",new E(k));b.setDefaultOrigin("user")}}}findSublayerById(b){return this.allSublayers.find(c=>c.id===b)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(b){const c=
"web-document"===b?A.nameToId("web-map"):A.nameToId(b);let h=A.OriginId.SERVICE;b=this.sublayersSourceJSON[A.OriginId.SERVICE].layers;let d=this.sublayersSourceJSON[A.OriginId.SERVICE].context,k=null;var v=[A.OriginId.PORTAL_ITEM,A.OriginId.WEB_SCENE,A.OriginId.WEB_MAP].filter(B=>B<=c);for(var w of v)v=this.sublayersSourceJSON[w],G.isSublayerOverhaul(v.layers)&&(h=w,b=v.layers,d=v.context,v.visibleLayers&&(k={visibleLayers:v.visibleLayers,context:v.context}));w=[A.OriginId.PORTAL_ITEM,A.OriginId.WEB_SCENE,
A.OriginId.WEB_MAP].filter(B=>B>h&&B<=c);let m=null;for(var M of w){const {layers:B,visibleLayers:Q,context:K}=this.sublayersSourceJSON[M];B&&(m={layers:B,context:K});Q&&(k={visibleLayers:Q,context:K})}M=L(b,d);const J=new Map,N=new Set;if(m)for(const B of m.layers)J.set(B.id,B);if(k?.visibleLayers)for(const B of k.visibleLayers)N.add(B);I(M,B=>{m&&B.read(J.get(B.id),m.context);k&&B.read({defaultVisibility:N.has(B.id)},k.context)});return{origin:A.idToName(h),sublayers:new E({items:M})}}read(b,c){super.read(b,
c);this.readSublayers(b,c)}_handleSublayersChange(b,c){c&&(c.forEach(h=>{h.parent=null;h.layer=null}),this.removeHandles("sublayers-owner"));b&&(b.forEach(h=>{h.parent=this;h.layer=this}),this.addHandles([b.on("after-add",({item:h})=>{h.parent=this;h.layer=this}),b.on("after-remove",({item:h})=>{h.parent=null;h.layer=null})],"sublayers-owner"),"tile"===this.type&&this.addHandles(b.on("before-changes",h=>{y.getLogger("esri.layers.TileLayer").error(new p("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",
{layer:this}));h.preventDefault()}),"sublayers-owner"))}};f.__decorate([t.property({readOnly:!0})],D.prototype,"allSublayers",void 0);f.__decorate([t.property({readOnly:!0,type:g.ofType(z)})],D.prototype,"serviceSublayers",void 0);f.__decorate([t.property({value:null,type:E,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],D.prototype,"sublayers",void 0);f.__decorate([t.property({readOnly:!0})],D.prototype,"sublayersSourceJSON",void 0);f.__decorate([t.property({type:E,json:{read:{source:"tables"}}})],
D.prototype,"subtables",void 0);return D=f.__decorate([P.subclass("esri.layers.mixins.SublayersOwner")],D)};l.forEachSublayer=I;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/tslib.es6 ../../geometry ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/PieChartRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/has ../../core/Identifiable ../../core/lang ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/sql ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../../core/accessorSupport/utils ../graphics/sources/support/QueryTask ./featureLayerUtils ./FeatureType ./Field ./FieldsIndex ./fieldUtils ./LabelClass ./labelingInfo ./LayerFloorInfo ./Relationship ./serviceCapabilitiesUtils ./source/DataLayerSource ./source/MapLayerSource ../../rest/utils ../../rest/support/AttachmentQuery ../../rest/support/Query ../../support/popupUtils ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/typeUtils".split(" "),
function(l,f,g,r,p,y,q,t,u,C,T,P,A,z,G,L,I,E,D,b,c,h,d,k,v,w,m,M,J,N,B,Q,K,X,x,F,O,R,U,ca,Y,ma,na,oa,pa,ka,da,qa,ra,sa,ta,ua,va,ea){function fa(a,e,n){a=this.originIdOf(e)>=K.nameToId(n.origin);return{ignoreOrigin:!0,allowNull:a,enabled:n?"map-image"===n.layer?.type&&(n.writeSublayerStructure||a):!1}}function ha(a,e,n){return{enabled:n?"tile"===n.layer?.type&&(n.origin&&this.originIdOf(e)>=K.nameToId(n.origin)||this._isOverridden(e)):!1}}function W(a,e,n){return{ignoreOrigin:!0,enabled:n&&n.writeSublayerStructure||
!1}}function aa(a,e,n){return{ignoreOrigin:!0,enabled:n?n.writeSublayerStructure||this.originIdOf(e)>=K.nameToId(n.origin):!1}}var ba;let wa=0;const xa=new Set("layer parent loaded loadStatus loadError loadWarnings".split(" "));g=ba=class extends k.MultiOriginJSONMixin(b.IdentifiableMixin(h)){constructor(a){super(a);this.capabilities=void 0;this.maxScaleRange={minScale:0,maxScale:0};this.globalIdField=this.geometryType=this.fullExtent=this.fields=null;this.isTable=!1;this.legendEnabled=!0;this.parent=
this.objectIdField=null;this.popupEnabled=!0;this.typeIdField=this.title=this.spatialReference=this.sourceJSON=this.relationships=this.popupTemplate=null;this.type="sublayer";this._lastParsedUrl=this.types=null}async load(a){this.addResolvingPromise((async()=>{const {layer:e,url:n}=this;if(!e&&!n)throw new E("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const H=e?await e.fetchSublayerInfo(this,a):(await G(n,{responseType:"json",query:{f:"json"},
...a})).data;H&&(this.sourceJSON=H,this.read({layerDefinition:H},{origin:"service",layer:e,url:qa.parseUrl(n)}))})());return this}readCapabilities(a,e){e=e.layerDefinition||e;const {operations:{supportsQuery:n,supportsQueryAttachments:H},query:{supportsFormatPBF:S,supportsOrderBy:V,supportsPagination:Z},data:{supportsAttachment:ia},queryRelated:ja}=pa.getFeatureLayerCapabilities(e,this.url);return{exportMap:{supportsModification:!!e.canModifyLayer},operations:{supportsQuery:n,supportsQueryAttachments:H},
data:{supportsAttachment:ia},query:{supportsFormatPBF:S,supportsOrderBy:V,supportsPagination:Z},queryRelated:ja}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(a){this._setAndNotifyLayer("definitionExpression",a)}get effectiveScaleRange(){const {minScale:a,maxScale:e}=this;return{minScale:a,maxScale:e}}readMaxScaleRange(a,e){e=e.layerDefinition||e;return{minScale:e.minScale??0,maxScale:e.maxScale??0}}get fieldsIndex(){return new U(this.fields||[])}set floorInfo(a){this._setAndNotifyLayer("floorInfo",
a)}readGlobalIdFieldFromService(a,e){e=e.layerDefinition||e;if(e.globalIdField)return e.globalIdField;if(e.fields)for(const n of e.fields)if("esriFieldTypeGlobalID"===n.type)return n.name}get id(){const a=this._get("id");return null==a?wa++:a}set id(a){this._get("id")!==a&&(!1===this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",a))}readIsTable(a,e){return"Table"===e.type}set labelingInfo(a){this._setAndNotifyLayer("labelingInfo",
a)}writeLabelingInfo(a,e,n,H){a&&a.length&&(e.layerDefinition={drawingInfo:{labelingInfo:a.map(S=>S.write({},H))}})}set labelsVisible(a){this._setAndNotifyLayer("labelsVisible",a)}set layer(a){this._set("layer",a);this.sublayers?.forEach(e=>e.layer=a)}set listMode(a){this._set("listMode",a)}set minScale(a){this._setAndNotifyLayer("minScale",a)}readMinScale(a,e){return e.minScale||e.layerDefinition?.minScale||0}set maxScale(a){this._setAndNotifyLayer("maxScale",a)}readMaxScale(a,e){return e.maxScale||
e.layerDefinition?.maxScale||0}readObjectIdFieldFromService(a,e){e=e.layerDefinition||e;return e.objectIdField?e.objectIdField:e.fields?.find(n=>"esriFieldTypeOID"===n.type)?.name}set opacity(a){this._setAndNotifyLayer("opacity",a)}readOpacity(a,e){({layerDefinition:a}=e);return 1-.01*(a?.transparency??a?.drawingInfo?.transparency??0)}writeOpacity(a,e,n,H){e.layerDefinition={drawingInfo:{transparency:100-100*a}}}writeParent(a,e){e.parentLayerId=this.parent&&this.parent!==this.layer?Q.ensureInteger(this.parent.id):
-1}get queryTask(){if(!this.layer)return null;const {capabilities:a,fieldsIndex:e,layer:n,url:H}=this,{spatialReference:S}=n,V="gdbVersion"in n?n.gdbVersion:void 0,Z=D("featurelayer-pbf")&&a?.query.supportsFormatPBF;return new x({fieldsIndex:e,gdbVersion:V,pbfSupported:Z,queryAttachmentsSupported:a?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:S,url:H})}set renderer(a){ca.fixRendererFields(a,this.fieldsIndex);if(a)for(const e of a.getSymbols())if(L.isSymbol3D(e)){d.getLogger(this).warn("Sublayer renderer should use 2D symbols");
break}this._setAndNotifyLayer("renderer",a)}get source(){return this._get("source")||new da.MapLayerSource({mapLayerId:this.id})}set source(a){this._setAndNotifyLayer("source",a)}set sublayers(a){this._handleSublayersChange(a,this._get("sublayers"));this._set("sublayers",a)}castSublayers(a){return Q.ensureType(I.ofType(ba),a)}writeSublayers(a,e,n){this.sublayers?.length&&(e[n]=this.sublayers.map(H=>H.id).toArray().reverse())}readTitle(a,e){return e.layerDefinition?.name??e.name}readTypeIdField(a,
e){e=e.layerDefinition||e;let n=e.typeIdField;n&&e.fields&&(n=n.toLowerCase(),a=e.fields.find(H=>H.name.toLowerCase()===n))&&(n=a.name);return n}get url(){const a=this.layer?.parsedUrl??this._lastParsedUrl;var e=this.source;if(!a)return null;this._lastParsedUrl=a;if("map-layer"===e?.type)return`${a.path}/${e.mapLayerId}`;e={layer:JSON.stringify({source:this.source})};return`${a.path}/dynamicLayer?${w.objectToQuery(e)}`}set url(a){this._overrideIfSome("url",a)}set visible(a){this._setAndNotifyLayer("visible",
a)}writeVisible(a,e,n,H){e[n]=this.getAtOrigin("defaultVisibility","service")||a}clone(){const {store:a}=X.getProperties(this),e=new ba;X.getProperties(e).store=a.clone(xa);this.commitProperty("url");e._lastParsedUrl=this._lastParsedUrl;return e}createPopupTemplate(a){return ta.createPopupTemplate(this,a)}createQuery(){return new sa({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;var a=(await new Promise((H,
S)=>l(["../FeatureLayer"],V=>H(Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}))),S))).default;const {layer:e,url:n}=this;if(n&&this.originIdOf("url")>K.OriginId.SERVICE)a=new a({url:n});else if(e?.parsedUrl){const H=e.parsedUrl;a=new a({url:H.path});H&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source)}else throw new E("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");
null!=e?.refreshInterval&&(a.refreshInterval=e.refreshInterval);this.definitionExpression&&(a.definitionExpression=this.definitionExpression);this.floorInfo&&(a.floorInfo=c.clone(this.floorInfo));this.originIdOf("labelingInfo")>K.OriginId.SERVICE&&(a.labelingInfo=c.clone(this.labelingInfo));this.originIdOf("labelsVisible")>K.OriginId.DEFAULTS&&(a.labelsVisible=this.labelsVisible);this.originIdOf("legendEnabled")>K.OriginId.DEFAULTS&&(a.legendEnabled=this.legendEnabled);this.originIdOf("visible")>
K.OriginId.DEFAULTS&&(a.visible=this.visible);this.originIdOf("minScale")>K.OriginId.DEFAULTS&&(a.minScale=this.minScale);this.originIdOf("maxScale")>K.OriginId.DEFAULTS&&(a.maxScale=this.maxScale);this.originIdOf("opacity")>K.OriginId.DEFAULTS&&(a.opacity=this.opacity);this.originIdOf("popupTemplate")>K.OriginId.DEFAULTS&&(a.popupTemplate=c.clone(this.popupTemplate));this.originIdOf("renderer")>K.OriginId.SERVICE&&(a.renderer=c.clone(this.renderer));"data-layer"===this.source?.type&&(a.dynamicDataSource=
this.source.clone());this.originIdOf("title")>K.OriginId.DEFAULTS&&(a.title=this.title);"map-image"===e?.type&&e.originIdOf("customParameters")>K.OriginId.DEFAULTS&&(a.customParameters=e.customParameters);"tile"===e?.type&&e.originIdOf("customParameters")>K.OriginId.DEFAULTS&&(a.customParameters=e.customParameters);return a}getField(a){return this.fieldsIndex.get(a)}getFeatureType(a){return F.getFeatureType(this.types,this.typeIdField,a)}getFieldDomain(a,e){return(e=this.getFeatureType(e?.feature))&&
(e=e.domains&&e.domains[a])&&"inherited"!==e.type?e:this._getLayerDomain(a)}async queryAttachments(a,e){await this.load();a=ra.from(a);const n=this.capabilities;if(!n?.data?.supportsAttachment)throw new E("queryAttachments:not-supported","this layer doesn't support attachments");const {attachmentTypes:H,objectIds:S,globalIds:V,num:Z,size:ia,start:ja,where:la}=a;if(!n?.operations?.supportsQueryAttachments&&(0<H?.length||0<V?.length||0<ia?.length||Z||ja||la))throw new E("queryAttachments:option-not-supported",
"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",a);if(!(S?.length||V?.length||la))throw new E("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",a);return this.queryTask.executeAttachmentQuery(a,e)}async queryFeatureCount(a=this.createQuery(),e){await this.load();if(!this.capabilities.operations.supportsQuery)throw new E("queryFeatureCount:not-supported","this layer doesn't support queries.");
if(!this.url)throw new E("queryFeatureCount:not-supported","this layer has no url.");return await this.queryTask.executeForCount(a,{...e,query:{...this.layer?.customParameters,token:this.layer?.apiKey}})}async queryFeatures(a=this.createQuery(),e){await this.load();if(!this.capabilities.operations.supportsQuery)throw new E("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new E("queryFeatures:not-supported","this layer has no url.");a=await this.queryTask.execute(a,
{...e,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(a?.features)for(const n of a.features)n.sourceLayer=this;return a}async queryObjectIds(a=this.createQuery(),e){await this.load();if(!this.capabilities.operations.supportsQuery)throw new E("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new E("queryObjectIds:not-supported","this layer has no url.");return await this.queryTask.executeForIds(a,{...e,query:{...this.layer?.customParameters,
token:this.layer?.apiKey}})}async queryRelatedFeatures(a,e){await this.load();if(!this.capabilities.operations.supportsQuery)throw new E("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new E("queryRelatedFeatures:not-supported","this layer has no url.");return await this.queryTask.executeRelationshipQuery(a,{...e,query:{...this.layer?.customParameters,token:this.layer?.apiKey}})}async queryRelatedFeaturesCount(a,e){await this.load();if(!this.capabilities.operations.supportsQuery)throw new E("queryRelatedFeaturesCount:not-supported",
"this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new E("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new E("queryRelatedFeaturesCount:not-supported","this layer has no url.");return await this.queryTask.executeRelationshipQueryForCount(a,{...e,query:{...this.layer?.customParameters,token:this.layer?.apiKey}})}toExportImageJSON(a){const e={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,
type:"mapLayer"}};a=v.sqlAnd(a,this.definitionExpression);null!=a&&(e.definitionExpression=a);const n=["renderer","labelingInfo","opacity","labelsVisible"].reduce((H,S)=>{H[S]=this.originIdOf(S);return H},{});if(Object.keys(n).some(H=>n[H]>K.OriginId.SERVICE)){a=e.drawingInfo={};n.renderer>K.OriginId.SERVICE&&(a.renderer=this.renderer?this.renderer.toJSON():null);n.labelsVisible>K.OriginId.SERVICE&&(a.showLabels=this.labelsVisible);if(this.labelsVisible&&n.labelingInfo>K.OriginId.SERVICE)if(this.labelingInfo){!this.loaded&&
this.labelingInfo?.some(S=>!S.labelPlacement)&&d.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' `+"and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.",{sublayer:this});let H=this.labelingInfo;null!=this.geometryType&&(H=ma.validateLabelingInfo(this.labelingInfo,ea.featureGeometryTypeKebabDictionary.toJSON(this.geometryType)));a.showLabels=!0;
a.labelingInfo=H.filter(S=>S.labelPlacement).map(S=>S.toJSON({origin:"service",layer:this.layer}))}else a.showLabels=!1;n.opacity>K.OriginId.SERVICE&&(a.transparency=100-100*this.opacity);this._assignDefaultSymbolColors(a.renderer)}return e}_assignDefaultSymbolColors(a){this._forEachSimpleMarkerSymbols(a,e=>{e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.color=e.outline?.color?e.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(a,e){if(a){const n=("uniqueValueInfos"in a?a.uniqueValueInfos:
"classBreakInfos"in a?a.classBreakInfos:null)??[];for(const H of n)"esriSMS"===H.symbol?.type&&e(H.symbol);"symbol"in a&&"esriSMS"===a.symbol?.type&&e(a.symbol);"defaultSymbol"in a&&"esriSMS"===a.defaultSymbol?.type&&e(a.defaultSymbol)}}_setAndNotifyLayer(a,e){const n=this.layer,H=this._get(a);let S,V;switch(a){case "definitionExpression":case "floorInfo":S="supportsSublayerDefinitionExpression";break;case "minScale":case "maxScale":case "visible":S="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":S=
"supportsDynamicLayers",V="supportsModification"}const Z=X.getProperties(this).getDefaultOrigin();if("service"!==Z){if(S&&!1===this.layer?.capabilities?.exportMap?.[S]){this._logLockedError(a,`capability not available 'layer.capabilities.exportMap.${S}'`);return}if(V&&!1===this.capabilities?.exportMap[V]){this._logLockedError(a,`capability not available 'capabilities.exportMap.${V}'`);return}}"source"===a&&"not-loaded"!==this.loadStatus?this._logLockedError(a,"'source' can't be changed after calling sublayer.load()"):
(this._set(a,e),"service"!==Z&&H!==e&&n&&n.emit&&n.emit("sublayer-update",{propertyName:a,target:this}))}_handleSublayersChange(a,e){e&&(e.forEach(n=>{n.parent=null;n.layer=null}),this.removeAllHandles());a&&(a.forEach(n=>{n.parent=this;n.layer=this.layer}),this.addHandles([a.on("after-add",({item:n})=>{n.parent=this;n.layer=this.layer}),a.on("after-remove",({item:n})=>{n.parent=null;n.layer=null}),a.on("before-changes",n=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??!0)||(d.getLogger(this).error(new E("sublayer:sublayers-non-modifiable",
"Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),n.preventDefault())})]))}_logLockedError(a,e){const {layer:n,declaredClass:H}=this;d.getLogger(H).error(new E("sublayer:locked",`Property '${String(a)}' can't be changed on Sublayer from the layer '${n?.id}'`,{reason:e,sublayer:this,layer:n}))}_getLayerDomain(a){return this.fieldsIndex.get(a)?.domain??null}};g.test={isMapImageLayerOverridePolicy:a=>a===W||a===fa,isTileImageLayerOverridePolicy:a=>
a===ha};f.__decorate([m.property({readOnly:!0})],g.prototype,"capabilities",void 0);f.__decorate([J.reader("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],g.prototype,"readCapabilities",null);f.__decorate([m.property()],g.prototype,"defaultPopupTemplate",null);f.__decorate([m.property({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:fa}}})],g.prototype,"definitionExpression",null);f.__decorate([m.property({readOnly:!0})],
g.prototype,"effectiveScaleRange",null);f.__decorate([J.reader("service","maxScaleRange",["minScale","maxScale"])],g.prototype,"readMaxScaleRange",null);f.__decorate([m.property({type:[R],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],g.prototype,"fields",void 0);f.__decorate([m.property({readOnly:!0})],g.prototype,"fieldsIndex",null);f.__decorate([m.property({type:na,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",
overridePolicy:fa},origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"floorInfo",null);f.__decorate([m.property({type:ua,json:{read:{source:"layerDefinition.extent"}}})],g.prototype,"fullExtent",void 0);f.__decorate([m.property({type:ea.featureGeometryTypeKebabDictionary.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:ea.featureGeometryTypeKebabDictionary.read}}}}})],g.prototype,"geometryType",void 0);f.__decorate([m.property({type:String})],g.prototype,"globalIdField",
void 0);f.__decorate([J.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],g.prototype,"readGlobalIdFieldFromService",null);f.__decorate([m.property({type:Q.Integer,json:{write:{ignoreOrigin:!0}}})],g.prototype,"id",null);f.__decorate([m.property({readOnly:!0})],g.prototype,"isTable",void 0);f.__decorate([J.reader("service","isTable",["type"])],g.prototype,"readIsTable",null);f.__decorate([m.property({value:null,type:[Y],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},
write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:W}}})],g.prototype,"labelingInfo",null);f.__decorate([B.writer("labelingInfo")],g.prototype,"writeLabelingInfo",null);f.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:W}}})],g.prototype,"labelsVisible",null);f.__decorate([m.property({value:null})],g.prototype,"layer",null);f.__decorate([m.property({type:String,
json:{write:{overridePolicy:ha}}})],g.prototype,"layerItemId",void 0);f.__decorate([m.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:aa}}})],g.prototype,"legendEnabled",void 0);f.__decorate([m.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"listMode",null);f.__decorate([m.property({type:Number,value:0,json:{write:{overridePolicy:W}}})],
g.prototype,"minScale",null);f.__decorate([J.reader("minScale",["minScale","layerDefinition.minScale"])],g.prototype,"readMinScale",null);f.__decorate([m.property({type:Number,value:0,json:{write:{overridePolicy:W}}})],g.prototype,"maxScale",null);f.__decorate([J.reader("maxScale",["maxScale","layerDefinition.maxScale"])],g.prototype,"readMaxScale",null);f.__decorate([m.property()],g.prototype,"objectIdField",void 0);f.__decorate([J.reader("service","objectIdField",["layerDefinition.objectIdField",
"layerDefinition.fields"])],g.prototype,"readObjectIdFieldFromService",null);f.__decorate([m.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:W}}})],g.prototype,"opacity",null);f.__decorate([J.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],g.prototype,"readOpacity",null);f.__decorate([B.writer("opacity")],g.prototype,"writeOpacity",null);f.__decorate([m.property({json:{type:Q.Integer,write:{target:"parentLayerId",
writerEnsuresNonNull:!0,overridePolicy:W}}})],g.prototype,"parent",void 0);f.__decorate([B.writer("parent")],g.prototype,"writeParent",null);f.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(a,e){return!e.disablePopup}},write:{target:"disablePopup",overridePolicy:aa,writer(a,e,n){e[n]=!a}}}})],g.prototype,"popupEnabled",void 0);f.__decorate([m.property({type:r,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:aa}}})],g.prototype,"popupTemplate",
void 0);f.__decorate([m.property({readOnly:!0})],g.prototype,"queryTask",null);f.__decorate([m.property({type:[oa],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],g.prototype,"relationships",void 0);f.__decorate([m.property({types:z.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:W},origins:{"web-scene":{types:z.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:W}}}}})],g.prototype,
"renderer",null);f.__decorate([m.property({types:{key:"type",base:null,typeMap:{"data-layer":ka.DataLayerSource,"map-layer":da.MapLayerSource}},cast(a){if(a){if("mapLayerId"in a)return Q.ensureClass(da.MapLayerSource,a);if("dataSource"in a)return Q.ensureClass(ka.DataLayerSource,a)}return a},json:{name:"layerDefinition.source",write:{overridePolicy:W}}})],g.prototype,"source",null);f.__decorate([m.property()],g.prototype,"sourceJSON",void 0);f.__decorate([m.property({type:va,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],
g.prototype,"spatialReference",void 0);f.__decorate([m.property({value:null,json:{type:[Q.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:W}}})],g.prototype,"sublayers",null);f.__decorate([M.cast("sublayers")],g.prototype,"castSublayers",null);f.__decorate([B.writer("sublayers")],g.prototype,"writeSublayers",null);f.__decorate([m.property({type:String,json:{name:"name",write:{overridePolicy:aa}}})],g.prototype,"title",void 0);f.__decorate([J.reader("service","title",["name","layerDefinition.name"])],
g.prototype,"readTitle",null);f.__decorate([m.property({type:String})],g.prototype,"typeIdField",void 0);f.__decorate([m.property({json:{read:!1},readOnly:!0,value:"sublayer"})],g.prototype,"type",void 0);f.__decorate([J.reader("typeIdField",["layerDefinition.typeIdField"])],g.prototype,"readTypeIdField",null);f.__decorate([m.property({type:[O],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],g.prototype,"types",void 0);f.__decorate([m.property({type:String,json:{name:"layerUrl",
write:{overridePolicy:ha}}})],g.prototype,"url",null);f.__decorate([m.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:W}}})],g.prototype,"visible",null);f.__decorate([B.writer("visible")],g.prototype,"writeVisible",null);return g=ba=f.__decorate([N.subclass("esri.layers.support.Sublayer")],g)})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/accessorSupport/PropertyOrigin"],function(l,f){function g(r,
p){if(!r?.length||null==p)return!0;p=p.slice().reverse().flatten(({sublayers:t})=>t&&t.toArray().reverse()).map(t=>t.id).toArray();if(r.length>p.length)return!1;let y=0;const q=p.length;for(const {id:t}of r){for(;y<q&&p[y]!==t;)y++;if(y>=q)return!1}return!0}l.isExportDynamic=function(r,p,y){return r.some(q=>{var t=q.source;t=!t||"map-layer"===t.type&&t.mapLayerId===q.id&&(null==t.gdbVersion||t.gdbVersion===y);q.commitProperty("renderer");q.commitProperty("labelingInfo");q.commitProperty("opacity");
q.commitProperty("labelsVisible");return!t||q.originIdOf("renderer")>f.OriginId.SERVICE||q.originIdOf("labelingInfo")>f.OriginId.SERVICE||q.originIdOf("opacity")>f.OriginId.SERVICE||q.originIdOf("labelsVisible")>f.OriginId.SERVICE})?!0:!g(r,p)};l.isSublayerOverhaul=function(r){return!!r&&r.some(p=>null!=p.minScale||null!=p.layerDefinition?.minScale)};l.shouldWriteSublayerStructure=function(r,p,y){return p.flatten(({sublayers:q})=>q).length!==r.length||r.some(q=>q.originIdOf("minScale")>y||q.originIdOf("maxScale")>
y||q.originIdOf("renderer")>y||q.originIdOf("labelingInfo")>y||q.originIdOf("opacity")>y||q.originIdOf("labelsVisible")>y||q.originIdOf("source")>y)?!0:!g(r,p)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error","../../core/promiseUtils"],function(l,f,g){l.createBitmap=async function(r,p,y){let q;try{q=await createImageBitmap(r)}catch(t){throw new f("request:server",`Unable to load ${p}`,{url:p,error:t});
}g.throwIfAborted(y);return q};l.createTileBitmap=async function(r,p,y,q,t){let u;try{u=await createImageBitmap(r)}catch(C){throw new f("request:server",`Unable to load tile ${p}/${y}/${q}`,{error:C,level:p,row:y,col:q});}g.throwIfAborted(t);return u};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/tslib.es6 ../request ../core/Error ../core/loadAll ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISMapService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/SublayersOwner ./support/arcgisLayerUrl ./support/commonProperties ./support/imageBitmapUtils ./support/Sublayer".split(" "),function(l,
f,g,r,p,y,q,t,u,C,T,P,A,z,G,L,I,E,D,b,c,h,d,k,v,w,m,M,J,N,B){var Q;const K="Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Elevation/World_Hillshade_Dark Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" ");p=Q=
class extends c.BlendLayer(w.ScaleRangeLayer(m.SublayersOwner(E.ArcGISCachedService(D.ArcGISMapService(d.OperationalLayer(k.PortalLayer(b.ArcGISService(p.MultiOriginJSONMixin(v.RefreshableLayer(I.APIKeyMixin(h.CustomParametersMixin(L)))))))))))){constructor(...x){super(...x);this.listMode="show";this.isReference=null;this.operationalLayerType="ArcGISTiledMapServiceLayer";this.resampling=!0;this.sublayers=this.path=this.spatialReference=this.sourceJSON=null;this.type="tile";this.url=null}normalizeCtorArgs(x,
F){return"string"===typeof x?{url:x,...F}:x}load(x){const F=null!=x?x.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},x).catch(y.throwIfAbortError).then(()=>this._fetchService(F)));return Promise.resolve(this)}get attributionDataUrl(){const x=this.parsedUrl?.path.toLowerCase();return x?this._getDefaultAttribution(this._getMapName(x)):null}readSpatialReference(x,F){return(x=x||F.tileInfo?.spatialReference)&&G.fromJSON(x)}writeSublayers(x,F,O,R){if(this.loaded&&
x){x=x.slice().reverse().flatten(({sublayers:Y})=>Y&&Y.toArray().reverse()).toArray();var U=[],ca={writeSublayerStructure:!1,...R};x.forEach(Y=>{Y=Y.write({},ca);U.push(Y)});U.some(Y=>1<Object.keys(Y).length)&&(F.layers=U)}}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(x){return Array.isArray(x)?x.map(F=>q.urlToObject(F).path):null}fetchTile(x,F,O,R={}){({signal:R}=R);x=this.getTileUrl(x,F,O);return f(x,{responseType:"image",signal:R,query:{...this.refreshParameters}}).then(U=>
U.data)}async fetchImageBitmapTile(x,F,O,R={}){const {signal:U}=R;if(this.fetchTile!==Q.prototype.fetchTile)return R=await this.fetchTile(x,F,O,R),N.createTileBitmap(R,x,F,O,U);R=this.getTileUrl(x,F,O);({data:R}=await f(R,{responseType:"blob",signal:U,query:{...this.refreshParameters}}));return N.createTileBitmap(R,x,F,O,U)}getTileUrl(x,F,O){const R=q.objectToQuery({...this.parsedUrl?.query,blankTile:!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile?!1:null,...this.customParameters,
token:this.apiKey}),U=this.tileServers;return`${U&&U.length?U[F%U.length]:this.parsedUrl?.path}/tile/${x}/${F}/${O}${R?"?"+R:""}`}loadAll(){return r.loadAll(this,x=>{x(this.allSublayers)})}_fetchService(x){return(new Promise((F,O)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new g("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");F({data:this.sourceJSON})}else{if(!this.parsedUrl)throw new g("tile-layer:undefined-url",
"layer's url is not defined");var R=M.parse(this.parsedUrl.path);if(null!=R&&"ImageServer"===R.serverType)throw new g("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");f(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:x}).then(F,O)}})).then(F=>{let O=this.url;F.ssl&&(O=this.url=O.replace(/^http:/i,"https:"));this.sourceJSON=F.data;this.read(F.data,{origin:"service",url:this.parsedUrl});
if(10.1===this.version&&!M.isHostedAgolService(O))return this._fetchServerVersion(O,x).then(R=>{this.read({currentVersion:R})}).catch(()=>{})})}_fetchServerVersion(x,F){if(!M.isArcGISUrl(x))return Promise.reject();x=x.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return f(x,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:F}).then(O=>{if(O.data&&O.data.currentVersion)return O.data.currentVersion;throw new g("tile-layer:version-not-available");})}_getMapName(x){return(x=
x.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i))?x[2]:void 0}_getDefaultAttribution(x){if(null==x)return null;let F;x=x.toLowerCase();for(let O=0,R=K.length;O<R;O++)if(F=K[O],F.toLowerCase().includes(x))return q.makeAbsolute("//static.arcgis.com/attribution/"+F);return null}_getDefaultTileServers(x){if(null==x)return[];const F=-1!==x.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),
O=-1!==x.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return F||O?[x,x.replace(F?/server\.arcgisonline/i:/services\.arcgisonline/i,F?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[X]}};l.__decorate([t.property({readOnly:!0})],p.prototype,"attributionDataUrl",null);l.__decorate([t.property({type:["show","hide","hide-children"]})],p.prototype,"listMode",void 0);l.__decorate([t.property({json:{read:!0,write:!0}})],p.prototype,"blendMode",
void 0);l.__decorate([t.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);l.__decorate([t.property({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],p.prototype,"operationalLayerType",void 0);l.__decorate([t.property({type:Boolean})],p.prototype,"resampling",void 0);l.__decorate([t.property()],p.prototype,"sourceJSON",void 0);l.__decorate([t.property({type:G})],p.prototype,"spatialReference",void 0);l.__decorate([P.reader("spatialReference",
["spatialReference","tileInfo"])],p.prototype,"readSpatialReference",null);l.__decorate([t.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],p.prototype,"path",void 0);l.__decorate([t.property({readOnly:!0})],p.prototype,"sublayers",void 0);l.__decorate([z.writer("sublayers",{layers:{type:[B]}})],p.prototype,"writeSublayers",null);l.__decorate([t.property({json:{read:!1,write:!1}})],p.prototype,"popupEnabled",void 0);l.__decorate([t.property()],p.prototype,"tileServers",
null);l.__decorate([u.cast("tileServers")],p.prototype,"castTileServers",null);l.__decorate([t.property({readOnly:!0,json:{read:!1}})],p.prototype,"type",void 0);l.__decorate([t.property(J.url)],p.prototype,"url",void 0);p=Q=l.__decorate([A.subclass("esri.layers.TileLayer")],p);const X=Symbol("default-fetch-tile");p.prototype.fetchTile[X]=!0;return p});