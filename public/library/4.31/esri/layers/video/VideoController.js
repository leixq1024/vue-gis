// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/mathUtils ../../core/reactiveUtils ../../core/XHRAdapter ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./VideoCameraSensorModel ./videoUtils ../../chunks/_commonjsHelpers".split(" "),function(Oa,Ll,Ml,Nl,Kd,Ol,Qa,Jq,Kq,Pl,Ql,jd,Xb){function Ld(){if(Lg)return Mg;Lg=1;return Mg="undefined"!==typeof window?window:"undefined"!==typeof Xb.commonjsGlobal?
Xb.commonjsGlobal:"undefined"!==typeof self?self:{}}function Ng(){if(Og)return Pg;Og=1;var g=Array.prototype.slice;return Pg=function(l,m){"length"in l||(l=[l]);for(l=g.call(l);l.length;){var r=l.shift(),w=m(r);if(w)return w;r.childNodes&&r.childNodes.length&&(l=g.call(r.childNodes).concat(l))}}}function Rl(){function g(l,m){if(!(this instanceof g))return new g(l,m);this.nodeValue=this.data=l;this.length=l.length;this.ownerDocument=m||null}if(Qg)return Se;Qg=1;Se=g;g.prototype.nodeType=8;g.prototype.nodeName=
"#comment";g.prototype.toString=function(){return"[object Comment]"};return Se}function Sl(){function g(l,m){if(!(this instanceof g))return new g(l);this.data=l||"";this.length=this.data.length;this.ownerDocument=m||null}if(Rg)return Te;Rg=1;Te=g;g.prototype.type="DOMTextNode";g.prototype.nodeType=3;g.prototype.nodeName="#text";g.prototype.toString=function(){return this.data};g.prototype.replaceData=function(l,m,r){var w=this.data,a=w.substring(0,l);l=w.substring(l+m,w.length);this.data=a+r+l;this.length=
this.data.length};return Te}function Sg(){if(Tg)return Ug;Tg=1;return Ug=function(g){var l=this,m=g.type;g.target||(g.target=l);l.listeners||(l.listeners={});if(m=l.listeners[m])return m.forEach(function(r){g.currentTarget=l;"function"===typeof r?r(g):r.handleEvent(g)});l.parentNode&&l.parentNode.dispatchEvent(g)}}function Vg(){if(Wg)return Xg;Wg=1;return Xg=function(g,l){this.listeners||(this.listeners={});this.listeners[g]||(this.listeners[g]=[]);-1===this.listeners[g].indexOf(l)&&this.listeners[g].push(l)}}
function Yg(){if(Zg)return $g;Zg=1;return $g=function(g,l){this.listeners&&this.listeners[g]&&(g=this.listeners[g],l=g.indexOf(l),-1!==l&&g.splice(l,1))}}function Tl(){function g(a){switch(a.nodeType){case 3:return r(a.data);case 8:return"\x3c!--"+a.data+"--\x3e";default:var b=[],c=a.tagName;"http://www.w3.org/1999/xhtml"===a.namespaceURI&&(c=c.toLowerCase());var d=b.push,e="\x3c"+c;var h=[];for(var n in a){var u=a;var t=n,A=typeof u[t];u="style"===t&&0<Object.keys(u.style).length?!0:u.hasOwnProperty(t)&&
("string"===A||"boolean"===A||"number"===A)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t;u&&h.push({name:n,value:a[n]})}for(var F in a._attributes)for(var y in a._attributes[F])n=a._attributes[F][y],h.push({name:(n.prefix?n.prefix+":":"")+y,value:n.value});a.className&&h.push({name:"class",value:a.className});h=h.length?m(h):"";e+=h;h=a.dataset;F=[];for(C in h)F.push({name:"data-"+C,value:h[C]});var C=F.length?m(F):"";d.call(b,
e+C);-1<w.indexOf(c)?b.push(" /\x3e"):(b.push("\x3e"),a.childNodes.length?b.push.apply(b,a.childNodes.map(g)):a.textContent||a.innerText?b.push(r(a.textContent||a.innerText)):a.innerHTML&&b.push(a.innerHTML),b.push("\x3c/"+c+"\x3e"));return b.join("")}}function l(a){if("string"===typeof a)return a;var b="";Object.keys(a).forEach(function(c){var d=a[c];c=c.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});b+=c+":"+d+";"});return b}function m(a){var b=[];a.forEach(function(c){var d=c.name;c=
c.value;"style"===d&&(c=l(c));b.push(d+'\x3d"'+r(c).replace(/"/g,"\x26quot;")+'"')});return b.length?" "+b.join(" "):""}function r(a){var b="";"string"===typeof a?b=a:a&&(b=a.toString());return b.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")}if(ah)return Ue;ah=1;Ue=g;var w="area base br col embed hr img input keygen link menuitem meta param source track wbr".split(" ");return Ue}function bh(){function g(b,c,d){if(!(this instanceof g))return new g(b);d=void 0===d?"http://www.w3.org/1999/xhtml":
d||null;this.nodeName=this.tagName="http://www.w3.org/1999/xhtml"===d?String(b).toUpperCase():b;this.className="";this.dataset={};this.childNodes=[];this.parentNode=null;this.style={};this.ownerDocument=c||null;this.namespaceURI=d;this._attributes={};"INPUT"===this.tagName&&(this.type="text")}if(ch)return Ve;ch=1;var l=Ng(),m=Sg(),r=Vg(),w=Yg(),a=Tl();Ve=g;g.prototype.type="DOMElement";g.prototype.nodeType=1;g.prototype.appendChild=function(b){b.parentNode&&b.parentNode.removeChild(b);this.childNodes.push(b);
b.parentNode=this;return b};g.prototype.replaceChild=function(b,c){b.parentNode&&b.parentNode.removeChild(b);var d=this.childNodes.indexOf(c);c.parentNode=null;this.childNodes[d]=b;b.parentNode=this;return c};g.prototype.removeChild=function(b){var c=this.childNodes.indexOf(b);this.childNodes.splice(c,1);b.parentNode=null;return b};g.prototype.insertBefore=function(b,c){b.parentNode&&b.parentNode.removeChild(b);c=null===c||void 0===c?-1:this.childNodes.indexOf(c);-1<c?this.childNodes.splice(c,0,b):
this.childNodes.push(b);b.parentNode=this;return b};g.prototype.setAttributeNS=function(b,c,d){var e=null,h=c,n=c.indexOf(":");-1<n&&(e=c.substr(0,n),h=c.substr(n+1));"INPUT"===this.tagName&&"type"===c?this.type=d:(this._attributes[b]||(this._attributes[b]={}))[h]={value:d,prefix:e}};g.prototype.getAttributeNS=function(b,c){b=(b=this._attributes[b])&&b[c]&&b[c].value;return"INPUT"===this.tagName&&"type"===c?this.type:"string"!==typeof b?null:b};g.prototype.removeAttributeNS=function(b,c){(b=this._attributes[b])&&
delete b[c]};g.prototype.hasAttributeNS=function(b,c){b=this._attributes[b];return!!b&&c in b};g.prototype.setAttribute=function(b,c){return this.setAttributeNS(null,b,c)};g.prototype.getAttribute=function(b){return this.getAttributeNS(null,b)};g.prototype.removeAttribute=function(b){return this.removeAttributeNS(null,b)};g.prototype.hasAttribute=function(b){return this.hasAttributeNS(null,b)};g.prototype.removeEventListener=w;g.prototype.addEventListener=r;g.prototype.dispatchEvent=m;g.prototype.focus=
function(){};g.prototype.toString=function(){return a(this)};g.prototype.getElementsByClassName=function(b){var c=b.split(" "),d=[];l(this,function(e){if(1===e.nodeType){var h=(e.className||"").split(" ");c.every(function(n){return-1!==h.indexOf(n)})&&d.push(e)}});return d};g.prototype.getElementsByTagName=function(b){b=b.toLowerCase();var c=[];l(this.childNodes,function(d){1!==d.nodeType||"*"!==b&&d.tagName.toLowerCase()!==b||c.push(d)});return c};g.prototype.contains=function(b){return l(this,function(c){return b===
c})||!1};return Ve}function Ul(){function g(m){if(!(this instanceof g))return new g;this.childNodes=[];this.parentNode=null;this.ownerDocument=m||null}if(dh)return We;dh=1;var l=bh();We=g;g.prototype.type="DocumentFragment";g.prototype.nodeType=11;g.prototype.nodeName="#document-fragment";g.prototype.appendChild=l.prototype.appendChild;g.prototype.replaceChild=l.prototype.replaceChild;g.prototype.removeChild=l.prototype.removeChild;g.prototype.toString=function(){return this.childNodes.map(function(m){return String(m)}).join("")};
return We}function Vl(){function g(l){}if(eh)return Xe;eh=1;Xe=g;g.prototype.initEvent=function(l,m,r){this.type=l;this.bubbles=m;this.cancelable=r};g.prototype.preventDefault=function(){};return Xe}function Wl(){function g(){if(!(this instanceof g))return new g;this.head=this.createElement("head");this.body=this.createElement("body");this.documentElement=this.createElement("html");this.documentElement.appendChild(this.head);this.documentElement.appendChild(this.body);this.childNodes=[this.documentElement];
this.nodeType=9}if(fh)return Ye;fh=1;var l=Ng(),m=Rl(),r=Sl(),w=bh(),a=Ul(),b=Vl(),c=Sg(),d=Vg(),e=Yg();Ye=g;var h=g.prototype;h.createTextNode=function(n){return new r(n,this)};h.createElementNS=function(n,u){return new w(u,this,null===n?null:String(n))};h.createElement=function(n){return new w(n,this)};h.createDocumentFragment=function(){return new a(this)};h.createEvent=function(n){return new b(n)};h.createComment=function(n){return new m(n,this)};h.getElementById=function(n){n=String(n);return l(this.childNodes,
function(u){if(String(u.id)===n)return u})||null};h.getElementsByClassName=w.prototype.getElementsByClassName;h.getElementsByTagName=w.prototype.getElementsByTagName;h.contains=w.prototype.contains;h.removeEventListener=e;h.addEventListener=d;h.dispatchEvent=c;return Ye}function gh(){if(hh)return ih;hh=1;var g="undefined"!==typeof Xb.commonjsGlobal?Xb.commonjsGlobal:"undefined"!==typeof window?window:{};jh||(jh=1,kh=new (Wl()));var l=kh;if("undefined"!==typeof document)var m=document;else(m=g["__GLOBAL_DOCUMENT_CACHE@4"])||
(m=g["__GLOBAL_DOCUMENT_CACHE@4"]=l);return ih=m}function Xl(){if(lh)return Ze.exports;lh=1;(function(g){function l(){return g.exports=l=Object.assign?Object.assign.bind():function(m){for(var r=1;r<arguments.length;r++){var w=arguments[r],a;for(a in w)({}).hasOwnProperty.call(w,a)&&(m[a]=w[a])}return m},g.exports.__esModule=!0,g.exports["default"]=g.exports,l.apply(null,arguments)}g.exports=l;g.exports.__esModule=!0;g.exports["default"]=g.exports})(Ze);return Ze.exports}function Yl(){if(mh)return $e;
mh=1;$e=function(l){if(!l)return!1;var m=g.call(l);return"[object Function]"===m||"function"===typeof l&&"[object RegExp]"!==m||"undefined"!==typeof window&&(l===window.setTimeout||l===window.alert||l===window.confirm||l===window.prompt)};var g=Object.prototype.toString;return $e}function Zl(){function g(r,w){var a="undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(a)return(a=a.call(r)).next.bind(a);if(Array.isArray(r)||(a=l(r))||w){a&&(r=a);var b=0;return function(){return b>=r.length?
{done:!0}:{done:!1,value:r[b++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function l(r,w){if(r){if("string"===typeof r)return m(r,w);var a=Object.prototype.toString.call(r).slice(8,-1);"Object"===a&&r.constructor&&(a=r.constructor.name);if("Map"===a||"Set"===a)return Array.from(r);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(r,w)}}function m(r,w){if(null==
w||w>r.length)w=r.length;for(var a=0,b=Array(w);a<w;a++)b[a]=r[a];return b}if(nh)return oh;nh=1;return oh=function(){function r(){this.typeToInterceptorsMap_=new Map;this.enabled_=!1}var w=r.prototype;w.getIsEnabled=function(){return this.enabled_};w.enable=function(){this.enabled_=!0};w.disable=function(){this.enabled_=!1};w.reset=function(){this.typeToInterceptorsMap_=new Map;this.enabled_=!1};w.addInterceptor=function(a,b){this.typeToInterceptorsMap_.has(a)||this.typeToInterceptorsMap_.set(a,new Set);
a=this.typeToInterceptorsMap_.get(a);if(a.has(b))return!1;a.add(b);return!0};w.removeInterceptor=function(a,b){return(a=this.typeToInterceptorsMap_.get(a))&&a.has(b)?(a.delete(b),!0):!1};w.clearInterceptorsByType=function(a){if(!this.typeToInterceptorsMap_.get(a))return!1;this.typeToInterceptorsMap_.delete(a);this.typeToInterceptorsMap_.set(a,new Set);return!0};w.clear=function(){if(!this.typeToInterceptorsMap_.size)return!1;this.typeToInterceptorsMap_=new Map;return!0};w.getForType=function(a){return this.typeToInterceptorsMap_.get(a)||
new Set};w.execute=function(a,b){a=this.getForType(a);a=g(a);for(var c;!(c=a()).done;){c=c.value;try{b=c(b)}catch(d){}}return b};return r}()}function $l(){if(ph)return qh;ph=1;var g=function(){function m(){this.maxAttempts_=1;this.fuzzFactor_=this.delayFactor_=.1;this.initialDelay_=1E3;this.enabled_=!1}var r=m.prototype;r.getIsEnabled=function(){return this.enabled_};r.enable=function(){this.enabled_=!0};r.disable=function(){this.enabled_=!1};r.reset=function(){this.maxAttempts_=1;this.fuzzFactor_=
this.delayFactor_=.1;this.initialDelay_=1E3;this.enabled_=!1};r.getMaxAttempts=function(){return this.maxAttempts_};r.setMaxAttempts=function(w){this.maxAttempts_=w};r.getDelayFactor=function(){return this.delayFactor_};r.setDelayFactor=function(w){this.delayFactor_=w};r.getFuzzFactor=function(){return this.fuzzFactor_};r.setFuzzFactor=function(w){this.fuzzFactor_=w};r.getInitialDelay=function(){return this.initialDelay_};r.setInitialDelay=function(w){this.initialDelay_=w};r.createRetry=function(w){w=
void 0===w?{}:w;return new l({maxAttempts:w.maxAttempts||this.maxAttempts_,delayFactor:w.delayFactor||this.delayFactor_,fuzzFactor:w.fuzzFactor||this.fuzzFactor_,initialDelay:w.initialDelay||this.initialDelay_})};return m}(),l=function(){function m(w){this.maxAttempts_=w.maxAttempts;this.delayFactor_=w.delayFactor;this.fuzzFactor_=w.fuzzFactor;this.currentDelay_=w.initialDelay;this.currentAttempt_=1}var r=m.prototype;r.moveToNextAttempt=function(){this.currentAttempt_++;this.currentDelay_+=this.currentDelay_*
this.delayFactor_};r.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_};r.getCurrentDelay=function(){return this.currentDelay_};r.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_};r.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_};r.getCurrentFuzzedDelay=function(){var w=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return w+Math.random()*(a-w)};return m}();return qh=g}function am(){function g(m){void 0===
m&&(m="");return m.toLowerCase().split(";").reduce(function(r,w){w=w.split("\x3d");var a=w[1];return"charset"===w[0].trim()?a.trim():r},"utf-8")}if(rh)return sh;rh=1;var l=Ld();return sh=function(m,r){void 0===r&&(r=!1);return function(w,a,b){if(w)m(w);else if(400<=a.statusCode&&599>=a.statusCode){w=b;if(r)if(l.TextDecoder){a=g(a.headers&&a.headers["content-type"]);try{w=(new TextDecoder(a)).decode(b)}catch(c){}}else w=String.fromCharCode.apply(null,new Uint8Array(b));m({cause:w})}else m(null,b)}}}
function bm(){function g(B,E){this.name="ParsingError";this.code=B.code;this.message=E||B.message}function l(B){B=B.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!B)return null;if(B[3]){var E=B[3].replace(":","");return 3600*(B[1]|0)+60*(B[2]|0)+(E|0)+(B[4]|0)/1E3}return 59<B[1]?3600*(B[1]|0)+60*(B[2]|0)+(B[4]|0)/1E3:60*(B[1]|0)+(B[2]|0)+(B[4]|0)/1E3}function m(){this.values=t(null)}function r(B,E,P,U){B=U?B.split(U):[B];for(var X in B)if("string"===typeof B[X]){var M=B[X].split(P);2===M.length&&
(U=M[0].trim(),M=M[1].trim(),E(U,M))}}function w(B,E,P){function U(){var O=l(B);if(null===O)throw new g(g.Errors.BadTimeStamp,"Malformed timestamp: "+M);B=B.replace(/^[^\sa-zA-Z-]+/,"");return O}function X(){B=B.replace(/^\s+/,"")}var M=B;X();E.startTime=U();X();if("--\x3e"!==B.substr(0,3))throw new g(g.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+M);B=B.substr(3);X();E.endTime=U();X();(function(O,S){var aa=new m;r(O,function(Z,ba){switch(Z){case "region":for(var da=
P.length-1;0<=da;da--)if(P[da].id===ba){aa.set(Z,P[da].region);break}break;case "vertical":aa.alt(Z,ba,["rl","lr"]);break;case "line":ba=ba.split(",");da=ba[0];aa.integer(Z,da);aa.percent(Z,da)?aa.set("snapToLines",!1):null;aa.alt(Z,da,["auto"]);2===ba.length&&aa.alt("lineAlign",ba[1],["start","center","end"]);break;case "position":ba=ba.split(",");aa.percent(Z,ba[0]);2===ba.length&&aa.alt("positionAlign",ba[1],["start","center","end"]);break;case "size":aa.percent(Z,ba);break;case "align":aa.alt(Z,
ba,["start","center","end","left","right"])}},/:/,/\s/);S.region=aa.get("region",null);S.vertical=aa.get("vertical","");try{S.line=aa.get("line","auto")}catch(Z){}S.lineAlign=aa.get("lineAlign","start");S.snapToLines=aa.get("snapToLines",!0);S.size=aa.get("size",100);try{S.align=aa.get("align","center")}catch(Z){S.align=aa.get("align","middle")}try{S.position=aa.get("position","auto")}catch(Z){S.position=aa.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},S.align)}S.positionAlign=
aa.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},S.align)})(B,E)}function a(B,E){function P(){if(!E)return null;var da=E.match(/^([^<]*)(<[^>]*>?)?/);da=da[1]?da[1]:da[2];E=E.substr(da.length);return da}function U(da){A.innerHTML=da;da=A.textContent;A.textContent="";return da}function X(da,na){var la=F[da];if(!la)return null;la=B.document.createElement(la);(da=C[da])&&na&&(la[da]=na.trim());return la}for(var M=B.document.createElement("div"),
O=M,S,aa=[];null!==(S=P());)if("\x3c"===S[0])if("/"===S[1])aa.length&&aa[aa.length-1]===S.substr(2).replace("\x3e","")&&(aa.pop(),O=O.parentNode);else{var Z=l(S.substr(1,S.length-2));if(Z){var ba=B.document.createProcessingInstruction("timestamp",Z);O.appendChild(ba)}else if(S=S.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))!(ba=X(S[1],S[3]))||L[ba.localName]&&L[ba.localName]!==O.localName||(S[2]&&(Z=S[2].split("."),Z.forEach(function(da){var na=/^bg_/.test(da);da=na?da.slice(3):da;y.hasOwnProperty(da)&&
(ba.style[na?"background-color":"color"]=y[da])}),ba.className=Z.join(" ")),aa.push(S[1]),O.appendChild(ba),O=ba)}else O.appendChild(B.document.createTextNode(U(S)));return M}function b(B){for(var E=0;E<H.length;E++){var P=H[E];if(B>=P[0]&&B<=P[1])return!0}return!1}function c(B){function E(O,S){for(var aa=S.childNodes.length-1;0<=aa;aa--)O.push(S.childNodes[aa])}function P(O){if(!O||!O.length)return null;var S=O.pop(),aa=S.textContent||S.innerText;if(aa)return(S=aa.match(/^.*(\n|\r)/))?(O.length=
0,S[0]):aa;if("ruby"===S.tagName)return P(O);if(S.childNodes)return E(O,S),P(O)}var U=[],X="";if(!B||!B.childNodes)return"ltr";for(E(U,B);X=P(U);)for(var M=0;M<X.length;M++)if(B=X.charCodeAt(M),b(B))return"rtl";return"ltr"}function d(){}function e(B,E,P){this.cue=E;this.cueDiv=a(B,E.text);var U={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===E.vertical?"horizontal-tb":"lr"===E.vertical?"vertical-lr":
"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(U,this.cueDiv);this.div=B.document.createElement("div");U={direction:c(this.cueDiv),writingMode:""===E.vertical?"horizontal-tb":"lr"===E.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===E.align?"center":E.align,font:P.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(U);this.div.appendChild(this.cueDiv);B=0;switch(E.positionAlign){case "start":case "line-left":B=E.position;break;case "center":B=
E.position-E.size/2;break;case "end":case "line-right":B=E.position-E.size}""===E.vertical?this.applyStyles({left:this.formatStyle(B,"%"),width:this.formatStyle(E.size,"%")}):this.applyStyles({top:this.formatStyle(B,"%"),height:this.formatStyle(E.size,"%")});this.move=function(X){this.applyStyles({top:this.formatStyle(X.top,"px"),bottom:this.formatStyle(X.bottom,"px"),left:this.formatStyle(X.left,"px"),right:this.formatStyle(X.right,"px"),height:this.formatStyle(X.height,"px"),width:this.formatStyle(X.width,
"px")})}}function h(B){if(B.div){var E=B.div.offsetHeight;var P=B.div.offsetWidth;var U=B.div.offsetTop;var X=(X=B.div.childNodes)&&(X=X[0])&&X.getClientRects&&X.getClientRects();B=B.div.getBoundingClientRect();var M=X?Math.max(X[0]&&X[0].height||0,B.height/X.length):0}this.left=B.left;this.right=B.right;this.top=B.top||U;this.height=B.height||E;this.bottom=B.bottom||U+(B.height||E);this.width=B.width||P;this.lineHeight=void 0!==M?M:B.lineHeight}function n(){}if(th)return uh;th=1;var u=gh(),t=Object.create||
function(){function B(){}return function(E){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");B.prototype=E;return new B}}();g.prototype=t(Error.prototype);g.prototype.constructor=g;g.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};m.prototype={set:function(B,E){this.get(B)||""===E||(this.values[B]=E)},get:function(B,E,P){return P?this.has(B)?this.values[B]:E[P]:this.has(B)?this.values[B]:
E},has:function(B){return B in this.values},alt:function(B,E,P){for(var U=0;U<P.length;++U)if(E===P[U]){this.set(B,E);break}},integer:function(B,E){/^-?\d+$/.test(E)&&this.set(B,parseInt(E,10))},percent:function(B,E){return E.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(E=parseFloat(E),0<=E&&100>=E)?(this.set(B,E),!0):!1}};var A=u.createElement&&u.createElement("textarea"),F={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},y={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",
red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},C={v:"title",lang:"lang"},L={rt:"ruby"},H=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],
[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,
68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],
[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];d.prototype.applyStyles=function(B,E){E=E||this.div;for(var P in B)B.hasOwnProperty(P)&&(E.style[P]=B[P])};d.prototype.formatStyle=function(B,E){return 0===B?0:B+E};e.prototype=t(d.prototype);e.prototype.constructor=e;h.prototype.move=function(B,E){E=void 0!==E?E:this.lineHeight;switch(B){case "+x":this.left+=E;this.right+=E;break;case "-x":this.left-=E;this.right-=E;
break;case "+y":this.top+=E;this.bottom+=E;break;case "-y":this.top-=E,this.bottom-=E}};h.prototype.overlaps=function(B){return this.left<B.right&&this.right>B.left&&this.top<B.bottom&&this.bottom>B.top};h.prototype.overlapsAny=function(B){for(var E=0;E<B.length;E++)if(this.overlaps(B[E]))return!0;return!1};h.prototype.within=function(B){return this.top>=B.top&&this.bottom<=B.bottom&&this.left>=B.left&&this.right<=B.right};h.prototype.overlapsOppositeAxis=function(B,E){switch(E){case "+x":return this.left<
B.left;case "-x":return this.right>B.right;case "+y":return this.top<B.top;case "-y":return this.bottom>B.bottom}};h.prototype.intersectPercentage=function(B){return Math.max(0,Math.min(this.right,B.right)-Math.max(this.left,B.left))*Math.max(0,Math.min(this.bottom,B.bottom)-Math.max(this.top,B.top))/(this.height*this.width)};h.prototype.toCSSCompatValues=function(B){return{top:this.top-B.top,bottom:B.bottom-this.bottom,left:this.left-B.left,right:B.right-this.right,height:this.height,width:this.width}};
h.getSimpleBoxPosition=function(B){var E=B.div?B.div.offsetHeight:B.tagName?B.offsetHeight:0,P=B.div?B.div.offsetWidth:B.tagName?B.offsetWidth:0,U=B.div?B.div.offsetTop:B.tagName?B.offsetTop:0;B=B.div?B.div.getBoundingClientRect():B.tagName?B.getBoundingClientRect():B;return{left:B.left,right:B.right,top:B.top||U,height:B.height||E,bottom:B.bottom||U+(B.height||E),width:B.width||P}};n.StringDecoder=function(){return{decode:function(B){if(!B)return"";if("string"!==typeof B)throw Error("Error - expected string data.");
return decodeURIComponent(encodeURIComponent(B))}}};n.convertCueToDOMTree=function(B,E){return B&&E?a(B,E):null};n.processCues=function(B,E,P){if(!B||!E||!P)return null;for(;P.firstChild;)P.removeChild(P.firstChild);var U=B.document.createElement("div");U.style.position="absolute";U.style.left="0";U.style.right="0";U.style.top="0";U.style.bottom="0";U.style.margin="1.5%";P.appendChild(U);if(function(S){for(var aa=0;aa<S.length;aa++)if(S[aa].hasBeenReset||!S[aa].displayState)return!0;return!1}(E)){var X=
[],M=h.getSimpleBoxPosition(U),O={font:Math.round(5*M.height)/100+"px sans-serif"};(function(){for(var S,aa,Z=0;Z<E.length;Z++){aa=E[Z];S=new e(B,aa,O);U.appendChild(S.div);var ba=void 0,da=void 0,na=void 0,la=S,wa=M;da=X;var xa=new h(la),ta=la.cue;if("number"===typeof ta.line&&(ta.snapToLines||0<=ta.line&&100>=ta.line))var Ja=ta.line;else if(ta.track&&ta.track.textTrackList&&ta.track.textTrackList.mediaElement){Ja=ta.track;for(var Da=Ja.textTrackList,ya=0,Va=0;Va<Da.length&&Da[Va]!==Ja;Va++)"showing"===
Da[Va].mode&&ya++;Ja=-1*++ya}else Ja=-1;Da=[];if(ta.snapToLines){switch(ta.vertical){case "":Da=["+y","-y"];na="height";break;case "rl":Da=["+x","-x"];na="width";break;case "lr":Da=["-x","+x"],na="width"}ya=xa.lineHeight;Va=ya*Math.round(Ja);na=wa[na]+ya;var Yb=Da[0];Math.abs(Va)>na&&(Va=(0>Va?-1:1)*Math.ceil(na/ya)*ya);0>Ja&&(Va+=""===ta.vertical?wa.height:wa.width,Da=Da.reverse());xa.move(Yb,Va)}else{xa=xa.lineHeight/wa.height*100;switch(ta.lineAlign){case "center":Ja-=xa/2;break;case "end":Ja-=
xa}switch(ta.vertical){case "":la.applyStyles({top:la.formatStyle(Ja,"%")});break;case "rl":la.applyStyles({left:la.formatStyle(Ja,"%")});break;case "lr":la.applyStyles({right:la.formatStyle(Ja,"%")})}Da=["+y","-x","+x","-y"];xa=new h(la)}a:{ta=xa;xa=Da;na=new h(ta);Ja=1;for(Da=0;Da<xa.length;Da++){for(;ta.overlapsOppositeAxis(wa,xa[Da])||ta.within(wa)&&ta.overlapsAny(da);)ta.move(xa[Da]);if(ta.within(wa)){da=ta;break a}ya=ta.intersectPercentage(wa);Ja>ya&&(ba=new h(ta),Ja=ya);ta=new h(na)}da=ba||
na}la.move(da.toCSSCompatValues(wa));aa.displayState=S.div;X.push(h.getSimpleBoxPosition(S))}})()}else for(P=0;P<E.length;P++)U.appendChild(E[P].displayState)};n.Parser=function(B,E,P){P||(P=E,E={});E||={};this.window=B;this.vttjs=E;this.state="INITIAL";this.buffer="";this.decoder=P||new TextDecoder("utf8");this.regionList=[]};n.Parser.prototype={reportOrThrowError:function(B){if(B instanceof g)this.onparsingerror&&this.onparsingerror(B);else throw B;},parse:function(B){function E(){for(var Z=M.buffer,
ba=0;ba<Z.length&&"\r"!==Z[ba]&&"\n"!==Z[ba];)++ba;var da=Z.substr(0,ba);"\r"===Z[ba]&&++ba;"\n"===Z[ba]&&++ba;M.buffer=Z.substr(ba);return da}function P(Z){var ba=new m;r(Z,function(da,na){switch(da){case "id":ba.set(da,na);break;case "width":ba.percent(da,na);break;case "lines":ba.integer(da,na);break;case "regionanchor":case "viewportanchor":na=na.split(",");if(2!==na.length)break;var la=new m;la.percent("x",na[0]);la.percent("y",na[1]);if(!la.has("x")||!la.has("y"))break;ba.set(da+"X",la.get("x"));
ba.set(da+"Y",la.get("y"));break;case "scroll":ba.alt(da,na,["up"])}},/=/,/\s/);ba.has("id")&&(Z=new (M.vttjs.VTTRegion||M.window.VTTRegion),Z.width=ba.get("width",100),Z.lines=ba.get("lines",3),Z.regionAnchorX=ba.get("regionanchorX",0),Z.regionAnchorY=ba.get("regionanchorY",100),Z.viewportAnchorX=ba.get("viewportanchorX",0),Z.viewportAnchorY=ba.get("viewportanchorY",100),Z.scroll=ba.get("scroll",""),M.onregion&&M.onregion(Z),M.regionList.push({id:ba.get("id"),region:Z}))}function U(Z){var ba=new m;
r(Z,function(da,na){switch(da){case "MPEGT":ba.integer(da+"S",na);break;case "LOCA":ba.set(da+"L",l(na))}},/[^\d]:/,/,/);M.ontimestampmap&&M.ontimestampmap({MPEGTS:ba.get("MPEGTS"),LOCAL:ba.get("LOCAL")})}function X(Z){Z.match(/X-TIMESTAMP-MAP/)?r(Z,function(ba,da){switch(ba){case "X-TIMESTAMP-MAP":U(da)}},/=/):r(Z,function(ba,da){switch(ba){case "Region":P(da)}},/:/)}var M=this;B&&(M.buffer+=M.decoder.decode(B,{stream:!0}));try{if("INITIAL"===M.state){if(!/\r\n|\n/.test(M.buffer))return this;var O=
E();var S=O.match(/^WEBVTT([ \t].*)?$/);if(!S||!S[0])throw new g(g.Errors.BadSignature);M.state="HEADER"}for(B=!1;M.buffer;){if(!/\r\n|\n/.test(M.buffer))return this;B?B=!1:O=E();switch(M.state){case "HEADER":/:/.test(O)?X(O):O||(M.state="ID");continue;case "NOTE":O||(M.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(O)){M.state="NOTE";break}if(!O)continue;M.cue=new (M.vttjs.VTTCue||M.window.VTTCue)(0,0,"");try{M.cue.align="center"}catch(Z){M.cue.align="middle"}M.state="CUE";if(-1===O.indexOf("--\x3e")){M.cue.id=
O;continue}case "CUE":try{w(O,M.cue,M.regionList)}catch(Z){M.reportOrThrowError(Z);M.cue=null;M.state="BADCUE";continue}M.state="CUETEXT";continue;case "CUETEXT":var aa=-1!==O.indexOf("--\x3e");if(!O||aa&&(B=!0)){M.oncue&&M.oncue(M.cue);M.cue=null;M.state="ID";continue}M.cue.text&&(M.cue.text+="\n");M.cue.text+=O.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case "BADCUE":O||(M.state="ID")}}}catch(Z){M.reportOrThrowError(Z);if("CUETEXT"===M.state&&M.cue&&M.oncue)M.oncue(M.cue);M.cue=null;
M.state="INITIAL"===M.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new g(g.Errors.BadSignature);}catch(B){this.reportOrThrowError(B)}this.onflush&&this.onflush();return this}};return uh=n}function cm(){function g(w){return"string"!==typeof w?!1:r[w.toLowerCase()]?w.toLowerCase():!1}function l(w,a,b){this.hasBeenReset=!1;var c="",d=!1,e=w,h=a,n=b,u=
null,t="",A=!0,F="auto",y="start",C="auto",L="auto",H=100,B="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return c},set:function(E){c=""+E}},pauseOnExit:{enumerable:!0,get:function(){return d},set:function(E){d=!!E}},startTime:{enumerable:!0,get:function(){return e},set:function(E){if("number"!==typeof E)throw new TypeError("Start time must be set to a number.");e=E;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return h},set:function(E){if("number"!==typeof E)throw new TypeError("End time must be set to a number.");
h=E;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return n},set:function(E){n=""+E;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(E){u=E;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return t},set:function(E){E="string"!==typeof E?!1:m[E.toLowerCase()]?E.toLowerCase():!1;if(!1===E)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");t=E;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return A},
set:function(E){A=!!E;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return F},set:function(E){if("number"!==typeof E&&"auto"!==E)throw new SyntaxError("Line: an invalid number or illegal string was specified.");F=E;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return y},set:function(E){(E=g(E))?(y=E,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return C},set:function(E){if(0>E||100<
E)throw Error("Position must be between 0 and 100.");C=E;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return L},set:function(E){(E=g(E))?(L=E,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return H},set:function(E){if(0>E||100<E)throw Error("Size must be between 0 and 100.");H=E;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return B},set:function(E){E=g(E);if(!E)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");
B=E;this.hasBeenReset=!0}}});this.displayState=void 0}if(vh)return wh;vh=1;var m={"":1,lr:1,rl:1},r={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};l.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};return wh=l}function dm(){function g(m){return"number"===typeof m&&0<=m&&100>=m}if(xh)return yh;xh=1;var l={"":!0,up:!0};return yh=function(){var m=100,r=3,w=0,a=100,b=0,c=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return m},
set:function(e){if(!g(e))throw Error("Width must be between 0 and 100.");m=e}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!g(e))throw Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return w},set:function(e){if(!g(e))throw Error("RegionAnchorY must be between 0 and 100.");w=
e}},viewportAnchorY:{enumerable:!0,get:function(){return c},set:function(e){if(!g(e))throw Error("ViewportAnchorY must be between 0 and 100.");c=e}},viewportAnchorX:{enumerable:!0,get:function(){return b},set:function(e){if(!g(e))throw Error("ViewportAnchorX must be between 0 and 100.");b=e}},scroll:{enumerable:!0,get:function(){return d},set:function(e){e="string"!==typeof e?!1:l[e.toLowerCase()]?e.toLowerCase():!1;!1===e?console.warn("Scroll: an invalid or illegal string was specified."):d=e}}})}}
function Ra(){return Ra=Object.assign?Object.assign.bind():function(g){for(var l=1;l<arguments.length;l++){var m=arguments[l],r;for(r in m)({}).hasOwnProperty.call(m,r)&&(g[r]=m[r])}return g},Ra.apply(null,arguments)}function zh(g){g=J.atob?J.atob(g):Buffer.from(g,"base64").toString("binary");for(var l=new Uint8Array(g.length),m=0;m<g.length;m++)l[m]=g.charCodeAt(m);return l}function Md(){function g(r,w){void 0===w&&(w=Object);return w&&"function"===typeof w.freeze?w.freeze(r):r}if(Ah)return tc;Ah=
1;var l=g({HTML:"text/html",isHTML:function(r){return r===l.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),m=g({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===m.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});tc.assign=function(r,w){if(null===r||"object"!==typeof r)throw new TypeError("target is not an object");for(var a in w)Object.prototype.hasOwnProperty.call(w,
a)&&(r[a]=w[a]);return r};tc.find=function(r,w,a){void 0===a&&(a=Array.prototype);if(r&&"function"===typeof a.find)return a.find.call(r,w);for(a=0;a<r.length;a++)if(Object.prototype.hasOwnProperty.call(r,a)){var b=r[a];if(w.call(void 0,b,a,r))return b}};tc.freeze=g;tc.MIME_TYPE=l;tc.NAMESPACE=m;return tc}function Bh(){function g(z){return""!==z}function l(z,D){z.hasOwnProperty(D)||(z[D]=!0);return z}function m(z){if(!z)return[];z=z?z.split(/[\t\n\f\r ]+/).filter(g):[];return Object.keys(z.reduce(l,
{}))}function r(z){return function(D){return z&&-1!==z.indexOf(D)}}function w(z,D){for(var N in z)Object.prototype.hasOwnProperty.call(z,N)&&(D[N]=z[N])}function a(z,D){var N=z.prototype;if(!(N instanceof D)){function Q(){}Q.prototype=D.prototype;Q=new Q;w(N,Q);z.prototype=N=Q}N.constructor!=z&&("function"!=typeof z&&console.error("unknown Class:"+z),N.constructor=z)}function b(z,D){if(D instanceof Error)var N=D;else N=this,Error.call(this,Ka[z]),this.message=Ka[z],Error.captureStackTrace&&Error.captureStackTrace(this,
b);N.code=z;D&&(this.message=this.message+": "+D);return N}function c(){}function d(z,D){this._node=z;this._refresh=D;e(this)}function e(z){var D=z._node._inc||z._node.ownerDocument._inc;if(z._inc!==D){var N=z._refresh(z._node);Nd(z,"length",N.length);if(!z.$$length||N.length<z.$$length)for(var Q=N.length;Q in z;Q++)Object.prototype.hasOwnProperty.call(z,Q)&&delete z[Q];w(N,z);z._inc=D}}function h(){}function n(z,D){for(var N=z.length;N--;)if(z[N]===D)return N}function u(z,D,N,Q){Q?D[n(D,Q)]=N:D[D.length++]=
N;z&&(N.ownerElement=z,D=z.ownerDocument)&&(Q&&(D&&D._inc++,Q.namespaceURI===Zb.XMLNS&&delete z._nsMap[Q.prefix?Q.localName:""]),D&&D._inc++,N.namespaceURI===Zb.XMLNS&&(z._nsMap[N.prefix?N.localName:""]=N.value))}function t(z,D,N){var Q=n(D,N);if(0<=Q){for(var fa=D.length-1;Q<fa;)D[Q]=D[++Q];D.length=fa;z&&(D=z.ownerDocument)&&(D&&D._inc++,N.namespaceURI===Zb.XMLNS&&delete z._nsMap[N.prefix?N.localName:""],N.ownerElement=null)}else throw new b(Kb,Error(z.tagName+"@"+N));}function A(){}function F(){}
function y(z){return"\x3c"==z&&"\x26lt;"||"\x3e"==z&&"\x26gt;"||"\x26"==z&&"\x26amp;"||'"'==z&&"\x26quot;"||"\x26#"+z.charCodeAt()+";"}function C(z,D){if(D(z))return!0;if(z=z.firstChild){do if(C(z,D))return!0;while(z=z.nextSibling)}}function L(){this.ownerDocument=this}function H(z,D,N){if(z&&z._inc)if(z._inc++,z=D.childNodes,N)z[z.length++]=N;else{D=D.firstChild;for(N=0;D;)z[N++]=D,D=D.nextSibling;z.length=N;delete z[z.length]}}function B(z,D){var N=D.previousSibling,Q=D.nextSibling;N?N.nextSibling=
Q:z.firstChild=Q;Q?Q.previousSibling=N:z.lastChild=N;D.parentNode=null;D.previousSibling=null;D.nextSibling=null;H(z.ownerDocument,z);return D}function E(z){return z&&z.nodeType===F.DOCUMENT_TYPE_NODE}function P(z){return z&&z.nodeType===F.ELEMENT_NODE}function U(z){return z&&z.nodeType===F.TEXT_NODE}function X(z,D){z=z.childNodes||[];if(vb(z,P)||E(D))return!1;var N=vb(z,E);return!(D&&N&&z.indexOf(N)>z.indexOf(D))}function M(z,D){z=z.childNodes||[];if(vb(z,function(Q){return P(Q)&&Q!==D}))return!1;
var N=vb(z,E);return!(D&&N&&z.indexOf(N)>z.indexOf(D))}function O(z,D,N){var Q=z.childNodes||[],fa=D.childNodes||[];if(D.nodeType===F.DOCUMENT_FRAGMENT_NODE){var pa=fa.filter(P);if(1<pa.length||vb(fa,U))throw new b(hb,"More than one element or text in fragment");if(1===pa.length&&!X(z,N))throw new b(hb,"Element in fragment can not be inserted before doctype");}if(P(D)&&!X(z,N))throw new b(hb,"Only one element can be added and only after doctype");if(E(D)){if(vb(Q,E))throw new b(hb,"Only one doctype is allowed");
z=vb(Q,P);if(N&&Q.indexOf(z)<Q.indexOf(N))throw new b(hb,"Doctype can only be inserted before an element");if(!N&&z)throw new b(hb,"Doctype can not be appended since element is present");}}function S(z,D,N){var Q=z.childNodes||[],fa=D.childNodes||[];if(D.nodeType===F.DOCUMENT_FRAGMENT_NODE){var pa=fa.filter(P);if(1<pa.length||vb(fa,U))throw new b(hb,"More than one element or text in fragment");if(1===pa.length&&!M(z,N))throw new b(hb,"Element in fragment can not be inserted before doctype");}if(P(D)&&
!M(z,N))throw new b(hb,"Only one element can be added and only after doctype");if(E(D)){if(vb(Q,function(Xa){return E(Xa)&&Xa!==N}))throw new b(hb,"Only one doctype is allowed");z=vb(Q,P);if(N&&Q.indexOf(z)<Q.indexOf(N))throw new b(hb,"Doctype can only be inserted before an element");}}function aa(z,D,N,Q){if(!z||z.nodeType!==F.DOCUMENT_NODE&&z.nodeType!==F.DOCUMENT_FRAGMENT_NODE&&z.nodeType!==F.ELEMENT_NODE)throw new b(hb,"Unexpected parent node type "+z.nodeType);if(N&&N.parentNode!==z)throw new b(Kb,
"child not in parent");if(!D||!(P(D)||U(D)||E(D)||D.nodeType===F.DOCUMENT_FRAGMENT_NODE||D.nodeType===F.COMMENT_NODE||D.nodeType===F.PROCESSING_INSTRUCTION_NODE)||E(D)&&z.nodeType!==F.DOCUMENT_NODE)throw new b(hb,"Unexpected node type "+D.nodeType+" for parent node type "+z.nodeType);z.nodeType===F.DOCUMENT_NODE&&(Q||O)(z,D,N);(Q=D.parentNode)&&Q.removeChild(D);if(D.nodeType===sb){Q=D.firstChild;if(null==Q)return D;var fa=D.lastChild}else Q=fa=D;var pa=N?N.previousSibling:z.lastChild;Q.previousSibling=
pa;fa.nextSibling=N;pa?pa.nextSibling=Q:z.firstChild=Q;null==N?z.lastChild=fa:N.previousSibling=fa;do Q.parentNode=z;while(Q!==fa&&(Q=Q.nextSibling));H(z.ownerDocument||z,z);D.nodeType==sb&&(D.firstChild=D.lastChild=null);return D}function Z(){this._nsMap={}}function ba(){}function da(){}function na(){}function la(){}function wa(){}function xa(){}function ta(){}function Ja(){}function Da(){}function ya(){}function Va(){}function Yb(){}function Jc(z,D){var N=[],Q=9==this.nodeType&&this.documentElement||
this,fa=Q.prefix,pa=Q.namespaceURI;if(pa&&null==fa&&(fa=Q.lookupPrefix(pa),null==fa))var Xa=[{namespace:pa,prefix:null}];oa(this,N,z,D,Xa);return N.join("")}function Cb(z,D,N){D=z.prefix||"";z=z.namespaceURI;if(!z||"xml"===D&&z===Zb.XML||z===Zb.XMLNS)return!1;for(var Q=N.length;Q--;){var fa=N[Q];if(fa.prefix===D)return fa.namespace!==z}return!0}function $b(z,D,N){z.push(" ",D,'\x3d"',N.replace(/[<>&"\t\n\r]/g,y),'"')}function oa(z,D,N,Q,fa){fa||=[];if(Q)if(z=Q(z)){if("string"==typeof z){D.push(z);
return}}else return;switch(z.nodeType){case mb:var pa=z.attributes,Xa=pa.length,Sa=z.firstChild,ib=z.tagName;N=Zb.isHTML(z.namespaceURI)||N;var Lb=ib;if(!N&&!z.prefix&&z.namespaceURI){for(var Za,ua=0;ua<pa.length;ua++)if("xmlns"===pa.item(ua).name){Za=pa.item(ua).value;break}if(!Za)for(ua=fa.length-1;0<=ua;ua--){var Ya=fa[ua];if(""===Ya.prefix&&Ya.namespace===z.namespaceURI){Za=Ya.namespace;break}}if(Za!==z.namespaceURI)for(ua=fa.length-1;0<=ua;ua--)if(Ya=fa[ua],Ya.namespace===z.namespaceURI){Ya.prefix&&
(Lb=Ya.prefix+":"+ib);break}}D.push("\x3c",Lb);for(Za=0;Za<Xa;Za++)ua=pa.item(Za),"xmlns"==ua.prefix?fa.push({prefix:ua.localName,namespace:ua.value}):"xmlns"==ua.nodeName&&fa.push({prefix:"",namespace:ua.value});for(Za=0;Za<Xa;Za++){ua=pa.item(Za);if(Cb(ua,N,fa)){Ya=ua.prefix||"";var ac=ua.namespaceURI;$b(D,Ya?"xmlns:"+Ya:"xmlns",ac);fa.push({prefix:Ya,namespace:ac})}oa(ua,D,N,Q,fa)}ib===Lb&&Cb(z,N,fa)&&(Ya=z.prefix||"",ac=z.namespaceURI,$b(D,Ya?"xmlns:"+Ya:"xmlns",ac),fa.push({prefix:Ya,namespace:ac}));
if(Sa||N&&!/^(?:meta|link|img|br|hr|input)$/i.test(ib)){D.push("\x3e");if(N&&/^script$/i.test(ib))for(;Sa;)Sa.data?D.push(Sa.data):oa(Sa,D,N,Q,fa.slice()),Sa=Sa.nextSibling;else for(;Sa;)oa(Sa,D,N,Q,fa.slice()),Sa=Sa.nextSibling;D.push("\x3c/",Lb,"\x3e")}else D.push("/\x3e");break;case uc:case sb:for(Sa=z.firstChild;Sa;)oa(Sa,D,N,Q,fa.slice()),Sa=Sa.nextSibling;break;case bc:return $b(D,z.name,z.value);case qa:return D.push(z.data.replace(/[<&>]/g,y));case Od:return D.push("\x3c![CDATA[",z.data,"]]\x3e");
case Pd:return D.push("\x3c!--",z.data,"--\x3e");case Db:N=z.publicId;Q=z.systemId;D.push("\x3c!DOCTYPE ",z.name);N?(D.push(" PUBLIC ",N),Q&&"."!=Q&&D.push(" ",Q),D.push("\x3e")):Q&&"."!=Q?D.push(" SYSTEM ",Q,"\x3e"):((z=z.internalSubset)&&D.push(" [",z,"]"),D.push("\x3e"));break;case Qd:return D.push("\x3c?",z.target," ",z.data,"?\x3e");case jc:return D.push("\x26",z.nodeName,";");default:D.push("??",z.nodeName)}}function db(z,D,N){switch(D.nodeType){case mb:var Q=D.cloneNode(!1);Q.ownerDocument=
z;case sb:break;case bc:N=!0}Q||=D.cloneNode(!1);Q.ownerDocument=z;Q.parentNode=null;if(N)for(D=D.firstChild;D;)Q.appendChild(db(z,D,N)),D=D.nextSibling;return Q}function va(z,D,N){var Q=new D.constructor;for(pa in D)if(Object.prototype.hasOwnProperty.call(D,pa)){var fa=D[pa];"object"!=typeof fa&&fa!=Q[pa]&&(Q[pa]=fa)}D.childNodes&&(Q.childNodes=new c);Q.ownerDocument=z;switch(Q.nodeType){case mb:var pa=D.attributes;var Xa=Q.attributes=new h;fa=pa.length;Xa._ownerElement=Q;for(Xa=0;Xa<fa;Xa++)Q.setAttributeNode(va(z,
pa.item(Xa),!0));break;case bc:N=!0}if(N)for(D=D.firstChild;D;)Q.appendChild(va(z,D,N)),D=D.nextSibling;return Q}function Nd(z,D,N){z[D]=N}if(Ch)return cc;Ch=1;var Ta=Md(),vb=Ta.find,Zb=Ta.NAMESPACE;Ta={};var mb=Ta.ELEMENT_NODE=1,bc=Ta.ATTRIBUTE_NODE=2,qa=Ta.TEXT_NODE=3,Od=Ta.CDATA_SECTION_NODE=4,jc=Ta.ENTITY_REFERENCE_NODE=5,jb=Ta.ENTITY_NODE=6,Qd=Ta.PROCESSING_INSTRUCTION_NODE=7,Pd=Ta.COMMENT_NODE=8,uc=Ta.DOCUMENT_NODE=9,Db=Ta.DOCUMENT_TYPE_NODE=10,sb=Ta.DOCUMENT_FRAGMENT_NODE=11,Aa=Ta.NOTATION_NODE=
12,$a={},Ka={};$a.INDEX_SIZE_ERR=(Ka[1]="Index size error",1);$a.DOMSTRING_SIZE_ERR=(Ka[2]="DOMString size error",2);var hb=$a.HIERARCHY_REQUEST_ERR=(Ka[3]="Hierarchy request error",3);$a.WRONG_DOCUMENT_ERR=(Ka[4]="Wrong document",4);$a.INVALID_CHARACTER_ERR=(Ka[5]="Invalid character",5);$a.NO_DATA_ALLOWED_ERR=(Ka[6]="No data allowed",6);$a.NO_MODIFICATION_ALLOWED_ERR=(Ka[7]="No modification allowed",7);var Kb=$a.NOT_FOUND_ERR=(Ka[8]="Not found",8);$a.NOT_SUPPORTED_ERR=(Ka[9]="Not supported",9);var Ba=
$a.INUSE_ATTRIBUTE_ERR=(Ka[10]="Attribute in use",10);$a.INVALID_STATE_ERR=(Ka[11]="Invalid state",11);$a.SYNTAX_ERR=(Ka[12]="Syntax error",12);$a.INVALID_MODIFICATION_ERR=(Ka[13]="Invalid modification",13);$a.NAMESPACE_ERR=(Ka[14]="Invalid namespace",14);$a.INVALID_ACCESS_ERR=(Ka[15]="Invalid access",15);b.prototype=Error.prototype;w($a,b);c.prototype={length:0,item:function(z){return 0<=z&&z<this.length?this[z]:null},toString:function(z,D){for(var N=[],Q=0;Q<this.length;Q++)oa(this[Q],N,z,D);return N.join("")},
filter:function(z){return Array.prototype.filter.call(this,z)},indexOf:function(z){return Array.prototype.indexOf.call(this,z)}};d.prototype.item=function(z){e(this);return this[z]||null};a(d,c);h.prototype={length:0,item:c.prototype.item,getNamedItem:function(z){for(var D=this.length;D--;){var N=this[D];if(N.nodeName==z)return N}},setNamedItem:function(z){var D=z.ownerElement;if(D&&D!=this._ownerElement)throw new b(Ba);D=this.getNamedItem(z.nodeName);u(this._ownerElement,this,z,D);return D},setNamedItemNS:function(z){var D=
z.ownerElement;if(D&&D!=this._ownerElement)throw new b(Ba);D=this.getNamedItemNS(z.namespaceURI,z.localName);u(this._ownerElement,this,z,D);return D},removeNamedItem:function(z){z=this.getNamedItem(z);t(this._ownerElement,this,z);return z},removeNamedItemNS:function(z,D){z=this.getNamedItemNS(z,D);t(this._ownerElement,this,z);return z},getNamedItemNS:function(z,D){for(var N=this.length;N--;){var Q=this[N];if(Q.localName==D&&Q.namespaceURI==z)return Q}return null}};A.prototype={hasFeature:function(z,
D){return!0},createDocument:function(z,D,N){var Q=new L;Q.implementation=this;Q.childNodes=new c;Q.doctype=N||null;N&&Q.appendChild(N);D&&(z=Q.createElementNS(z,D),Q.appendChild(z));return Q},createDocumentType:function(z,D,N){var Q=new xa;Q.name=z;Q.nodeName=z;Q.publicId=D||"";Q.systemId=N||"";return Q}};F.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,
localName:null,insertBefore:function(z,D){return aa(this,z,D)},replaceChild:function(z,D){aa(this,z,D,S);D&&this.removeChild(D)},removeChild:function(z){return B(this,z)},appendChild:function(z){return this.insertBefore(z,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(z){return va(this.ownerDocument||this,this,z)},normalize:function(){for(var z=this.firstChild;z;){var D=z.nextSibling;D&&D.nodeType==qa&&z.nodeType==qa?(this.removeChild(D),z.appendData(D.data)):(z.normalize(),
z=D)}},isSupported:function(z,D){return this.ownerDocument.implementation.hasFeature(z,D)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(z){for(var D=this;D;){var N=D._nsMap;if(N)for(var Q in N)if(Object.prototype.hasOwnProperty.call(N,Q)&&N[Q]===z)return Q;D=D.nodeType==bc?D.ownerDocument:D.parentNode}return null},lookupNamespaceURI:function(z){for(var D=this;D;){var N=D._nsMap;if(N&&Object.prototype.hasOwnProperty.call(N,z))return N[z];D=D.nodeType==bc?D.ownerDocument:
D.parentNode}return null},isDefaultNamespace:function(z){return null==this.lookupPrefix(z)}};w(Ta,F);w(Ta,F.prototype);L.prototype={nodeName:"#document",nodeType:uc,doctype:null,documentElement:null,_inc:1,insertBefore:function(z,D){if(z.nodeType==sb){for(var N=z.firstChild;N;){var Q=N.nextSibling;this.insertBefore(N,D);N=Q}return z}aa(this,z,D);z.ownerDocument=this;null===this.documentElement&&z.nodeType===mb&&(this.documentElement=z);return z},removeChild:function(z){this.documentElement==z&&(this.documentElement=
null);return B(this,z)},replaceChild:function(z,D){aa(this,z,D,S);z.ownerDocument=this;D&&this.removeChild(D);P(z)&&(this.documentElement=z)},importNode:function(z,D){return db(this,z,D)},getElementById:function(z){var D=null;C(this.documentElement,function(N){if(N.nodeType==mb&&N.getAttribute("id")==z)return D=N,!0});return D},getElementsByClassName:function(z){var D=m(z);return new d(this,function(N){var Q=[];0<D.length&&C(N.documentElement,function(fa){if(fa!==N&&fa.nodeType===mb){var pa=fa.getAttribute("class");
if(pa){var Xa=z===pa;Xa||(pa=m(pa),Xa=D.every(r(pa)));Xa&&Q.push(fa)}}});return Q})},createElement:function(z){var D=new Z;D.ownerDocument=this;D.nodeName=z;D.tagName=z;D.localName=z;D.childNodes=new c;return(D.attributes=new h)._ownerElement=D},createDocumentFragment:function(){var z=new ya;z.ownerDocument=this;z.childNodes=new c;return z},createTextNode:function(z){var D=new na;D.ownerDocument=this;D.appendData(z);return D},createComment:function(z){var D=new la;D.ownerDocument=this;D.appendData(z);
return D},createCDATASection:function(z){var D=new wa;D.ownerDocument=this;D.appendData(z);return D},createProcessingInstruction:function(z,D){var N=new Va;N.ownerDocument=this;N.tagName=N.nodeName=N.target=z;N.nodeValue=N.data=D;return N},createAttribute:function(z){var D=new ba;D.ownerDocument=this;D.name=z;D.nodeName=z;D.localName=z;D.specified=!0;return D},createEntityReference:function(z){var D=new Da;D.ownerDocument=this;D.nodeName=z;return D},createElementNS:function(z,D){var N=new Z,Q=D.split(":"),
fa=N.attributes=new h;N.childNodes=new c;N.ownerDocument=this;N.nodeName=D;N.tagName=D;N.namespaceURI=z;2==Q.length?(N.prefix=Q[0],N.localName=Q[1]):N.localName=D;return fa._ownerElement=N},createAttributeNS:function(z,D){var N=new ba,Q=D.split(":");N.ownerDocument=this;N.nodeName=D;N.name=D;N.namespaceURI=z;N.specified=!0;2==Q.length?(N.prefix=Q[0],N.localName=Q[1]):N.localName=D;return N}};a(L,F);Z.prototype={nodeType:mb,hasAttribute:function(z){return null!=this.getAttributeNode(z)},getAttribute:function(z){return(z=
this.getAttributeNode(z))&&z.value||""},getAttributeNode:function(z){return this.attributes.getNamedItem(z)},setAttribute:function(z,D){z=this.ownerDocument.createAttribute(z);z.value=z.nodeValue=""+D;this.setAttributeNode(z)},removeAttribute:function(z){(z=this.getAttributeNode(z))&&this.removeAttributeNode(z)},appendChild:function(z){if(z.nodeType===sb)return this.insertBefore(z,null);z.parentNode&&z.parentNode.removeChild(z);z.parentNode=this;z.previousSibling=this.lastChild;z.nextSibling=null;
z.previousSibling?z.previousSibling.nextSibling=z:this.firstChild=z;this.lastChild=z;H(this.ownerDocument,this,z);return z},setAttributeNode:function(z){return this.attributes.setNamedItem(z)},setAttributeNodeNS:function(z){return this.attributes.setNamedItemNS(z)},removeAttributeNode:function(z){return this.attributes.removeNamedItem(z.nodeName)},removeAttributeNS:function(z,D){(z=this.getAttributeNodeNS(z,D))&&this.removeAttributeNode(z)},hasAttributeNS:function(z,D){return null!=this.getAttributeNodeNS(z,
D)},getAttributeNS:function(z,D){return(z=this.getAttributeNodeNS(z,D))&&z.value||""},setAttributeNS:function(z,D,N){z=this.ownerDocument.createAttributeNS(z,D);z.value=z.nodeValue=""+N;this.setAttributeNode(z)},getAttributeNodeNS:function(z,D){return this.attributes.getNamedItemNS(z,D)},getElementsByTagName:function(z){return new d(this,function(D){var N=[];C(D,function(Q){Q===D||Q.nodeType!=mb||"*"!==z&&Q.tagName!=z||N.push(Q)});return N})},getElementsByTagNameNS:function(z,D){return new d(this,
function(N){var Q=[];C(N,function(fa){fa===N||fa.nodeType!==mb||"*"!==z&&fa.namespaceURI!==z||"*"!==D&&fa.localName!=D||Q.push(fa)});return Q})}};L.prototype.getElementsByTagName=Z.prototype.getElementsByTagName;L.prototype.getElementsByTagNameNS=Z.prototype.getElementsByTagNameNS;a(Z,F);ba.prototype.nodeType=bc;a(ba,F);da.prototype={data:"",substringData:function(z,D){return this.data.substring(z,z+D)},appendData:function(z){this.nodeValue=this.data=z=this.data+z;this.length=z.length},insertData:function(z,
D){this.replaceData(z,0,D)},appendChild:function(z){throw Error(Ka[hb]);},deleteData:function(z,D){this.replaceData(z,D,"")},replaceData:function(z,D,N){var Q=this.data.substring(0,z);z=this.data.substring(z+D);this.nodeValue=this.data=N=Q+N+z;this.length=N.length}};a(da,F);na.prototype={nodeName:"#text",nodeType:qa,splitText:function(z){var D=this.data,N=D.substring(z);this.data=this.nodeValue=D=D.substring(0,z);this.length=D.length;z=this.ownerDocument.createTextNode(N);this.parentNode&&this.parentNode.insertBefore(z,
this.nextSibling);return z}};a(na,da);la.prototype={nodeName:"#comment",nodeType:Pd};a(la,da);wa.prototype={nodeName:"#cdata-section",nodeType:Od};a(wa,da);xa.prototype.nodeType=Db;a(xa,F);ta.prototype.nodeType=Aa;a(ta,F);Ja.prototype.nodeType=jb;a(Ja,F);Da.prototype.nodeType=jc;a(Da,F);ya.prototype.nodeName="#document-fragment";ya.prototype.nodeType=sb;a(ya,F);Va.prototype.nodeType=Qd;a(Va,F);Yb.prototype.serializeToString=function(z,D,N){return Jc.call(z,D,N)};F.prototype.toString=Jc;try{if(Object.defineProperty){Object.defineProperty(d.prototype,
"length",{get:function(){e(this);return this.$$length}});Object.defineProperty(F.prototype,"textContent",{get:function(){return z(this)},set:function(D){switch(this.nodeType){case mb:case sb:for(;this.firstChild;)this.removeChild(this.firstChild);(D||String(D))&&this.appendChild(this.ownerDocument.createTextNode(D));break;default:this.nodeValue=this.value=this.data=D}}});function z(D){switch(D.nodeType){case mb:case sb:var N=[];for(D=D.firstChild;D;)7!==D.nodeType&&8!==D.nodeType&&N.push(z(D)),D=
D.nextSibling;return N.join("");default:return D.nodeValue}}Nd=function(D,N,Q){D["$$"+N]=Q}}}catch(z){}cc.DocumentType=xa;cc.DOMException=b;cc.DOMImplementation=A;cc.Element=Z;cc.Node=F;cc.NodeList=c;cc.XMLSerializer=Yb;return cc}function em(){if(Dh)return af;Dh=1;var g=af,l=Md().freeze;g.XML_ENTITIES=l({amp:"\x26",apos:"'",gt:"\x3e",lt:"\x3c",quot:'"'});g.HTML_ENTITIES=l({Aacute:"\u00c1",aacute:"\u00e1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\u00c2",acirc:"\u00e2",
acute:"\u00b4",Acy:"\u0410",acy:"\u0430",AElig:"\u00c6",aelig:"\u00e6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\u00c0",agrave:"\u00e0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"\x26",amp:"\x26",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",
angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\u00c5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\u00c5",aring:"\u00e5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\u00c3",atilde:"\u00e3",
Auml:"\u00c4",auml:"\u00e4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",
between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",
blk34:"\u2593",block:"\u2588",bne:"\x3d\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",
boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\u00a6",Bscr:"\u212c",bscr:"\ud835\udcb7",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",
bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\u00c7",ccedil:"\u00e7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",
ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\u00b8",Cedilla:"\u00b8",cemptyv:"\u29b2",cent:"\u00a2",CenterDot:"\u00b7",centerdot:"\u00b7",Cfr:"\u212d",cfr:"\ud835\udd20",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\u00ae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",
CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",
copf:"\ud835\udd54",coprod:"\u2210",Coproduct:"\u2210",COPY:"\u00a9",copy:"\u00a9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",
cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\u00a4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",
dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\u00b0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\u00b4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\u00a8",
DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\u00f7",divide:"\u00f7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\u00a8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\u00a8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",
DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",
DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\u00c9",
eacute:"\u00e9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\u00ca",ecirc:"\u00ea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\u00c8",egrave:"\u00e8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",
emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"\x3d",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",
eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",
FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\u00bd",frac13:"\u2153",frac14:"\u00bc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\u00be",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",
Fscr:"\u2131",fscr:"\ud835\udcbb",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",
Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",
gsiml:"\u2a90",Gt:"\u226b",GT:"\x3e",gt:"\x3e",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\u00bd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",
heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\ud835\udd25",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\ud835\udd59",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\ud835\udcbd",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\u00cd",iacute:"\u00ed",ic:"\u2063",Icirc:"\u00ce",
icirc:"\u00ee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\u00a1",iff:"\u21d4",Ifr:"\u2111",ifr:"\ud835\udd26",Igrave:"\u00cc",igrave:"\u00ec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",
inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\u00bf",Iscr:"\u2110",iscr:"\ud835\udcbe",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",
Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\u00cf",iuml:"\u00ef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",
khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\u00ab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",
lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",
LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",
LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",
lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",
lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",
Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\ud835\udcc1",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",
Lt:"\u226a",LT:"\x3c",lt:"\x3c",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\u00af",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",
mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\u00b5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\u00b7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",Mscr:"\u2133",mscr:"\ud835\udcc2",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",
nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\u00a0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",
nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",
ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",
nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\u00a0",Nopf:"\u2115",nopf:"\ud835\udd5f",Not:"\u2aec",not:"\u00ac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",
NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",
notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",
NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",
nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",
ntgl:"\u2279",Ntilde:"\u00d1",ntilde:"\u00f1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:"\x3e\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"\x3c\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",
nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\u00d3",oacute:"\u00f3",oast:"\u229b",ocir:"\u229a",Ocirc:"\u00d4",ocirc:"\u00f4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\u00d2",ograve:"\u00f2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",
oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\u00aa",ordm:"\u00ba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",
Oslash:"\u00d8",oslash:"\u00f8",osol:"\u2298",Otilde:"\u00d5",otilde:"\u00f5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\u00d6",ouml:"\u00f6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\u00b6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",
phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\u00b1",plusmn:"\u00b1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\u00b1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\ud835\udd61",pound:"\u00a3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",
pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",
prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",Qopf:"\u211a",qopf:"\ud835\udd62",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\u00bb",
Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",
rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\u00ae",reg:"\u00ae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\ud835\udd2f",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",
Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",
RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\ud835\udd63",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",
rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\ud835\udcc7",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",
scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\u00a7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",
shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\u00ad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",
softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",
SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\u00af",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",
subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",supdot:"\u2abe",
supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\u00df",Tab:"\t",target:"\u2316",Tau:"\u03a4",
tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\u00de",thorn:"\u00fe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",
TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\u00d7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",
triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\u00da",uacute:"\u00fa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\u00db",ucirc:"\u00fb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",
udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\u00d9",ugrave:"\u00f9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\u00a8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrow:"\u2191",Uparrow:"\u21d1",
uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",
uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\u00dc",uuml:"\u00fc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",
Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",
vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",
Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\u00dd",yacute:"\u00fd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\u00a5",
Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\u00ff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\ud835\udd37",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\ud835\udd6b",Zscr:"\ud835\udcb5",
zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"});g.entityMap=g.HTML_ENTITIES;return af}function fm(){function g(y,C){this.message=y;this.locator=C;Error.captureStackTrace&&Error.captureStackTrace(this,g)}function l(){}function m(y,C,L,H,B){function E(oa){var db=oa.slice(1,-1);if(Object.hasOwnProperty.call(L,db))return L[db];if("#"===db.charAt(0))return oa=parseInt(db.substr(1).replace("x","0x")),65535<oa?(oa-=65536,oa=String.fromCharCode(55296+(oa>>10),56320+(oa&1023))):oa=String.fromCharCode(oa),
oa;B.error("entity not found:"+oa);return oa}function P(oa){if(oa>Z){var db=y.substring(Z,oa).replace(/&#?\w+;/g,E);S&&U(Z);H.characters(db,0,oa-Z);Z=oa}}function U(oa,db){for(;oa>=M&&(db=O.exec(y));)X=db.index,M=X+db[0].length,S.lineNumber++;S.columnNumber=oa-X+1}var X=0,M=0,O=/.*(?:\r\n?|\n)|.*$/g,S=H.locator;C=[{currentNSMap:C}];for(var aa={},Z=0;;){try{var ba=y.indexOf("\x3c",Z);if(0>ba){if(!y.substr(Z).match(/^\s*$/)){var da=H.doc,na=da.createTextNode(y.substr(Z));da.appendChild(na);H.currentElement=
na}break}ba>Z&&P(ba);switch(y.charAt(ba+1)){case "/":var la=y.indexOf("\x3e",ba+3),wa=y.substring(ba+2,la).replace(/[ \t\n\r]+$/g,""),xa=C.pop();0>la?(wa=y.substring(ba+2).replace(/[\s<].*/,""),B.error("end tag name: "+wa+" is not complete:"+xa.tagName),la=ba+1+wa.length):wa.match(/\s</)&&(wa=wa.replace(/[\s<].*/,""),B.error("end tag name: "+wa+" maybe not complete"),la=ba+1+wa.length);var ta=xa.localNSMap,Ja=xa.tagName==wa;if(Ja||xa.tagName&&xa.tagName.toLowerCase()==wa.toLowerCase()){H.endElement(xa.uri,
xa.localName,wa);if(ta)for(var Da in ta)Object.prototype.hasOwnProperty.call(ta,Da)&&H.endPrefixMapping(Da);Ja||B.fatalError("end tag name: "+wa+" is not match the current start tagName:"+xa.tagName)}else C.push(xa);la++;break;case "?":S&&U(ba);la=h(y,ba,H);break;case "!":S&&U(ba);la=e(y,ba,H,B);break;default:S&&U(ba);var ya=new n,Va=C[C.length-1].currentNSMap;la=w(y,ba,ya,Va,E,B);var Yb=ya.length;!ya.closed&&c(y,la,ya.tagName,aa)&&(ya.closed=!0,L.nbsp||B.warning("unclosed xml attribute"));if(S&&
Yb){for(var Jc=r(S,{}),Cb=0;Cb<Yb;Cb++){var $b=ya[Cb];U($b.offset);$b.locator=r(S,{})}H.locator=Jc;a(ya,H,Va)&&C.push(ya);H.locator=S}else a(ya,H,Va)&&C.push(ya);u.isHTML(ya.uri)&&!ya.closed?la=b(y,la,ya.tagName,E,H):la++}}catch(oa){if(oa instanceof g)throw oa;B.error("element parse error: "+oa);la=-1}la>Z?Z=la:P(Math.max(ba,Z)+1)}}function r(y,C){C.lineNumber=y.lineNumber;C.columnNumber=y.columnNumber;return C}function w(y,C,L,H,B,E){function P(aa,Z,ba){L.attributeNames.hasOwnProperty(aa)&&E.fatalError("Attribute "+
aa+" redefined");L.addValue(aa,Z.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,B),ba)}for(var U,X,M=++C,O=0;;){var S=y.charAt(M);switch(S){case "\x3d":if(1===O)U=y.slice(C,M),O=3;else if(2===O)O=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===O||1===O)if(1===O&&(E.warning('attribute value must after "\x3d"'),U=y.slice(C,M)),C=M+1,M=y.indexOf(S,C),0<M)X=y.slice(C,M),P(U,X,C-1),O=5;else throw Error("attribute value no end '"+S+"' match");else if(4==O)X=y.slice(C,
M),P(U,X,C),E.warning('attribute "'+U+'" missed start quot('+S+")!!"),C=M+1,O=5;else throw Error('attribute value must after "\x3d"');break;case "/":switch(O){case 0:L.setTagName(y.slice(C,M));case 5:case 6:case 7:O=7,L.closed=!0;case 4:case 1:break;case 2:L.closed=!0;break;default:throw Error("attribute invalid close char('/')");}break;case "":return E.error("unexpected end of input"),0==O&&L.setTagName(y.slice(C,M)),M;case "\x3e":switch(O){case 0:L.setTagName(y.slice(C,M));case 5:case 6:case 7:break;
case 4:case 1:X=y.slice(C,M),"/"===X.slice(-1)&&(L.closed=!0,X=X.slice(0,-1));case 2:2===O&&(X=U);4==O?(E.warning('attribute "'+X+'" missed quot(")!'),P(U,X,C)):(u.isHTML(H[""])&&X.match(/^(?:disabled|checked|selected)$/i)||E.warning('attribute "'+X+'" missed value!! "'+X+'" instead!!'),P(X,X,C));break;case 3:throw Error("attribute value missed!!");}return M;case "\u0080":S=" ";default:if(" ">=S)switch(O){case 0:L.setTagName(y.slice(C,M));O=6;break;case 1:U=y.slice(C,M);O=2;break;case 4:X=y.slice(C,
M),E.warning('attribute "'+X+'" missed quot(")!!'),P(U,X,C);case 5:O=6}else switch(O){case 2:L.tagName;u.isHTML(H[""])&&U.match(/^(?:disabled|checked|selected)$/i)||E.warning('attribute "'+U+'" missed value!! "'+U+'" instead2!!');P(U,U,C);C=M;O=1;break;case 5:E.warning('attribute space is required"'+U+'"!!');case 6:O=1;C=M;break;case 3:O=4;C=M;break;case 7:throw Error("elements closed character '/' and '\x3e' must be connected to");}}M++}}function a(y,C,L){for(var H=y.tagName,B=null,E=y.length;E--;){var P=
y[E],U=P.qName,X=P.value,M=U.indexOf(":");if(0<M){var O=P.prefix=U.slice(0,M);M=U.slice(M+1);O="xmlns"===O&&M}else M=U,O=null,O="xmlns"===U&&"";P.localName=M;!1!==O&&(null==B&&(B={},d(L,L={})),L[O]=B[O]=X,P.uri=u.XMLNS,C.startPrefixMapping(O,X))}for(E=y.length;E--;)if(P=y[E],O=P.prefix)"xml"===O&&(P.uri=u.XML),"xmlns"!==O&&(P.uri=L[O||""]);M=H.indexOf(":");0<M?(O=y.prefix=H.slice(0,M),M=y.localName=H.slice(M+1)):(O=null,M=y.localName=H);E=y.uri=L[O||""];C.startElement(E,M,H,y);if(y.closed){if(C.endElement(E,
M,H),B)for(O in B)Object.prototype.hasOwnProperty.call(B,O)&&C.endPrefixMapping(O)}else return y.currentNSMap=L,y.localNSMap=B,!0}function b(y,C,L,H,B){if(/^(?:script|textarea)$/i.test(L)){var E=y.indexOf("\x3c/"+L+"\x3e",C);y=y.substring(C+1,E);if(/[&<]/.test(y)){if(/^script$/i.test(L))return B.characters(y,0,y.length),E;y=y.replace(/&#?\w+;/g,H);B.characters(y,0,y.length);return E}}return C+1}function c(y,C,L,H){var B=H[L];null==B&&(B=y.lastIndexOf("\x3c/"+L+"\x3e"),B<C&&(B=y.lastIndexOf("\x3c/"+
L)),H[L]=B);return B<C}function d(y,C){for(var L in y)Object.prototype.hasOwnProperty.call(y,L)&&(C[L]=y[L])}function e(y,C,L,H){switch(y.charAt(C+2)){case "-":if("-"===y.charAt(C+3)){var B=y.indexOf("--\x3e",C+4);if(B>C)return L.comment(y,C+4,B-C-4),B+3;H.error("Unclosed comment")}break;default:if("CDATA["==y.substr(C+3,6))return B=y.indexOf("]]\x3e",C+9),L.startCDATA(),L.characters(y,C+9,B-C-9),L.endCDATA(),B+3;a:{H=[];B=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;B.lastIndex=C;for(B.exec(y);C=
B.exec(y);)if(H.push(C),C[1]){B=H;break a}B=void 0}var E=B.length;if(1<E&&/!doctype/i.test(B[0][0]))return y=B[1][0],H=C=!1,3<E&&(/^public$/i.test(B[2][0])?(C=B[3][0],H=4<E&&B[4][0]):/^system$/i.test(B[2][0])&&(H=B[3][0])),B=B[E-1],L.startDTD(y,C,H),L.endDTD(),B.index+B[0].length}return-1}function h(y,C,L){var H=y.indexOf("?\x3e",C);return H&&(y=y.substring(C,H).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(y[0].length,L.processingInstruction(y[1],y[2]),H+2):-1}function n(){this.attributeNames={}}if(Eh)return Rd;
Eh=1;var u=Md().NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,A=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),F=new RegExp("^"+t.source+A.source+"*(?::"+t.source+A.source+"*)?$");g.prototype=Error();g.prototype.name=g.name;l.prototype={parse:function(y,C,L){var H=this.domBuilder;H.startDocument();d(C,C={});m(y,C,L,H,this.errorHandler);H.endDocument()}};
n.prototype={setTagName:function(y){if(!F.test(y))throw Error("invalid tagName:"+y);this.tagName=y},addValue:function(y,C,L){if(!F.test(y))throw Error("invalid attribute:"+y);this.attributeNames[y]=this.length;this[this.length++]={qName:y,value:C,offset:L}},length:0,getLocalName:function(y){return this[y].localName},getLocator:function(y){return this[y].locator},getQName:function(y){return this[y].qName},getURI:function(y){return this[y].uri},getValue:function(y){return this[y].value}};Rd.XMLReader=
l;Rd.ParseError=g;return Rd}function gm(){function g(y){return y.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function l(y){this.options=y||{locator:{}}}function m(y,C,L){function H(P){var U=y[P];!U&&E&&(U=2==y.length?function(X){y(P,X)}:y);B[P]=U&&function(X){U("[xmldom "+P+"]\t"+X+a(L))}||function(){}}if(!y){if(C instanceof r)return C;y=C}var B={},E=y instanceof Function;L=L||{};H("warning");H("error");H("fatalError");return B}function r(){this.cdata=!1}function w(y,C){C.lineNumber=
y.lineNumber;C.columnNumber=y.columnNumber}function a(y){if(y)return"\n@"+(y.systemId||"")+"#[line:"+y.lineNumber+",col:"+y.columnNumber+"]"}function b(y,C,L){return"string"==typeof y?y.substr(C,L):y.length>=C+L||C?new java.lang.String(y,C,L)+"":y}function c(y,C){y.currentElement?y.currentElement.appendChild(C):y.doc.appendChild(C)}if(Fh)return kd;Fh=1;var d=Md(),e=Bh(),h=em(),n=fm(),u=e.DOMImplementation,t=d.NAMESPACE,A=n.ParseError,F=n.XMLReader;l.prototype.parseFromString=function(y,C){var L=this.options,
H=new F,B=L.domBuilder||new r,E=L.errorHandler,P=L.locator,U=L.xmlns||{},X=/\/x?html?$/.test(C);C=X?h.HTML_ENTITIES:h.XML_ENTITIES;P&&B.setDocumentLocator(P);H.errorHandler=m(E,B,P);H.domBuilder=L.domBuilder||B;X&&(U[""]=t.HTML);U.xml=U.xml||t.XML;L=L.normalizeLineEndings||g;y&&"string"===typeof y?H.parse(L(y),U,C):H.errorHandler.error("invalid doc source");return B.doc};r.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},
startElement:function(y,C,L,H){var B=this.doc;C=B.createElementNS(y,L||C);var E=H.length;c(this,C);this.currentElement=C;this.locator&&w(this.locator,C);for(var P=0;P<E;P++){y=H.getURI(P);var U=H.getValue(P);L=H.getQName(P);y=B.createAttributeNS(y,L);this.locator&&w(H.getLocator(P),y);y.value=y.nodeValue=U;C.setAttributeNode(y)}},endElement:function(y,C,L){y=this.currentElement;y.tagName;this.currentElement=y.parentNode},startPrefixMapping:function(y,C){},endPrefixMapping:function(y){},processingInstruction:function(y,
C){y=this.doc.createProcessingInstruction(y,C);this.locator&&w(this.locator,y);c(this,y)},ignorableWhitespace:function(y,C,L){},characters:function(y,C,L){if(y=b.apply(this,arguments)){var H=this.cdata?this.doc.createCDATASection(y):this.doc.createTextNode(y);this.currentElement?this.currentElement.appendChild(H):/^\s*$/.test(y)&&this.doc.appendChild(H);this.locator&&w(this.locator,H)}},skippedEntity:function(y){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(y){if(this.locator=
y)y.lineNumber=0},comment:function(y,C,L){y=b.apply(this,arguments);var H=this.doc.createComment(y);this.locator&&w(this.locator,H);c(this,H)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(y,C,L){var H=this.doc.implementation;H&&H.createDocumentType&&(y=H.createDocumentType(y,C,L),this.locator&&w(this.locator,y),c(this,y),this.doc.doctype=y)},warning:function(y){console.warn("[xmldom warning]\t"+y,a(this.locator))},error:function(y){console.error("[xmldom error]\t"+
y,a(this.locator))},fatalError:function(y){throw new A(y,this.locator);}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(y){r.prototype[y]=function(){return null}});kd.__DOMHandler=r;kd.normalizeLineEndings=g;kd.DOMParser=l;return kd}function hm(){if(Gh)return Hh;Gh=1;var g=Math.pow(2,32);return Hh={getUint64:function(l){l=new DataView(l.buffer,l.byteOffset,l.byteLength);
return l.getBigUint64?(l=l.getBigUint64(0),l<Number.MAX_SAFE_INTEGER?Number(l):l):l.getUint32(0)*g+l.getUint32(4)},MAX_UINT32:g}}function bf(g,l=":",m=""){function r(...b){a("log",w,b)}let w="info",a;a=im(g,r,m);r.createLogger=(b,c,d)=>{c=void 0!==c?c:l;return bf(`${g} ${c} ${b}`,c,void 0!==d?d:m)};r.createNewLogger=(b,c,d)=>bf(b,c,d);r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:w};r.level=b=>{if("string"===
typeof b){if(!r.levels.hasOwnProperty(b))throw Error(`"${b}" in not a valid log level`);w=b}return w};r.history=()=>tb?[].concat(tb):[];r.history.filter=b=>(tb||[]).filter(c=>(new RegExp(`.*${b}.*`)).test(c[0]));r.history.clear=()=>{tb&&(tb.length=0)};r.history.disable=()=>{null!==tb&&(tb.length=0,tb=null)};r.history.enable=()=>{null===tb&&(tb=[])};r.error=(...b)=>a("error",w,b);r.warn=(...b)=>a("warn",w,b);r.debug=(...b)=>a("debug",w,b);return r}function Kc(g,l){Ih(g).forEach(m=>l(g[m],m))}function Jh(g,
l,m=0){return Ih(g).reduce((r,w)=>l(r,g[w],w),m)}function Mb(g){return!!g&&"object"===typeof g}function Lc(g){return Mb(g)&&"[object Object]"===jm.call(g)&&g.constructor===Object}function Ca(...g){const l={};g.forEach(m=>{m&&Kc(m,(r,w)=>{Lc(r)?(Lc(l[w])||(l[w]={}),l[w]=Ca(l[w],r)):l[w]=r})});return l}function Kh(g={}){const l=[];for(const m in g)g.hasOwnProperty(m)&&l.push(g[m]);return l}function Sd(g,l,m,r=!0){const w=b=>Object.defineProperty(g,l,{value:b,enumerable:!0,writable:!0}),a={configurable:!0,
enumerable:!0,get(){const b=m();w(b);return b}};r&&(a.set=w);return Object.defineProperty(g,l,a)}function Mc(){return ca===J.document}function Nc(g){return Mb(g)&&1===g.nodeType}function Lh(){try{return J.parent!==J.self}catch(g){return!0}}function Mh(g){return function(l,m){if("string"!==typeof l||!l.trim())return ca[g](null);"string"===typeof m&&m.trim()&&(m=ca.querySelector(m));m=Nc(m)?m:ca;return m[g]&&m[g](l)}}function ja(g="div",l={},m={},r){const w=ca.createElement(g);Object.getOwnPropertyNames(l).forEach(function(a){const b=
l[a];if("textContent"===a)kc(w,b);else if(w[a]!==b||"tabIndex"===a)w[a]=b});Object.getOwnPropertyNames(m).forEach(function(a){w.setAttribute(a,m[a])});r&&cf(w,r);return w}function kc(g,l){"undefined"===typeof g.textContent?g.innerText=l:g.textContent=l;return g}function df(g,l){l.firstChild?l.insertBefore(g,l.firstChild):l.appendChild(g)}function ld(g,l){if(0<=l.indexOf(" "))throw Error("class has illegal whitespace characters");return g.classList.contains(l)}function vc(g,...l){g.classList.add(...l.reduce((m,
r)=>m.concat(r.split(/\s+/)),[]));return g}function Td(g,...l){if(!g)return ra.warn("removeClass was called with an element that doesn't exist"),null;g.classList.remove(...l.reduce((m,r)=>m.concat(r.split(/\s+/)),[]));return g}function Nh(g,l,m){"function"===typeof m&&(m=m(g,l));"boolean"!==typeof m&&(m=void 0);l.split(/\s+/).forEach(r=>g.classList.toggle(r,m));return g}function Oh(g,l){Object.getOwnPropertyNames(l).forEach(function(m){const r=l[m];null===r||"undefined"===typeof r||!1===r?g.removeAttribute(m):
g.setAttribute(m,!0===r?"":r)})}function lc(g){const l={},m="autoplay controls playsinline loop muted default defaultMuted".split(" ");if(g&&g.attributes&&0<g.attributes.length){g=g.attributes;for(let r=g.length-1;0<=r;r--){const w=g[r].name;let a=g[r].value;m.includes(w)&&(a=null!==a?!0:!1);l[w]=a}}return l}function Ph(){ca.body.focus();ca.onselectstart=function(){return!1}}function Qh(){ca.onselectstart=function(){return!0}}function Oc(g){if(g&&g.getBoundingClientRect&&g.parentNode){const l=g.getBoundingClientRect(),
m={};"bottom height left right top width".split(" ").forEach(r=>{void 0!==l[r]&&(m[r]=l[r])});m.height||(m.height=parseFloat(Pc(g,"height")));m.width||(m.width=parseFloat(Pc(g,"width")));return m}}function md(g){if(!g||g&&!g.offsetParent)return{left:0,top:0,width:0,height:0};const l=g.offsetWidth,m=g.offsetHeight;let r=0,w=0;for(;g.offsetParent&&g!==ca[Ud.fullscreenElement];)r+=g.offsetLeft,w+=g.offsetTop,g=g.offsetParent;return{left:r,top:w,width:l,height:m}}function Vd(g,l){var m=0,r=0;if(nb)for(var w=
g;w&&"html"!==w.nodeName.toLowerCase();){var a=Pc(w,"transform");/^matrix/.test(a)?(a=a.slice(7,-1).split(/,\s/).map(Number),m+=a[4],r+=a[5]):/^matrix3d/.test(a)&&(a=a.slice(9,-1).split(/,\s/).map(Number),m+=a[12],r+=a[13]);w.assignedSlot&&w.assignedSlot.parentElement&&J.WebKitCSSMatrix&&(a=J.getComputedStyle(w.assignedSlot.parentElement).transform,a=new J.WebKitCSSMatrix(a),m+=a.m41,r+=a.m42);w=w.parentNode||w.host}w={};a=md(l.target);g=md(g);const b=g.width,c=g.height;let d=l.offsetY-(g.top-a.top);
a=l.offsetX-(g.left-a.left);l.changedTouches&&(a=l.changedTouches[0].pageX-g.left,d=l.changedTouches[0].pageY+g.top,nb&&(a-=m,d-=r));w.y=1-Math.max(0,Math.min(1,d/c));w.x=Math.max(0,Math.min(1,a/b));return w}function Rh(g){return Mb(g)&&3===g.nodeType}function Wd(g){for(;g.firstChild;)g.removeChild(g.firstChild);return g}function Sh(g){"function"===typeof g&&(g=g());return(Array.isArray(g)?g:[g]).map(l=>{"function"===typeof l&&(l=l());if(Nc(l)||Rh(l))return l;if("string"===typeof l&&/\S/.test(l))return ca.createTextNode(l)}).filter(l=>
l)}function cf(g,l){Sh(l).forEach(m=>g.appendChild(m));return g}function Th(g,l){return cf(Wd(g),l)}function nd(g){return void 0===g.button&&void 0===g.buttons||0===g.button&&void 0===g.buttons||"mouseup"===g.type&&0===g.button&&0===g.buttons||"mousedown"===g.type&&0===g.button&&0===g.buttons?!0:0!==g.button||1!==g.buttons?!1:!0}function Pc(g,l){if(!g||!l)return"";if("function"===typeof J.getComputedStyle){let m;try{m=J.getComputedStyle(g)}catch(r){return""}return m?m.getPropertyValue(l)||m[l]:""}return""}
function Uh(g){[...ca.styleSheets].forEach(l=>{try{var m=[...l.cssRules].map(w=>w.cssText).join("");const r=ca.createElement("style");r.textContent=m;g.document.head.appendChild(r)}catch(r){m=ca.createElement("link"),m.rel="stylesheet",m.type=l.type,m.media=l.media.mediaText,m.href=l.href,g.document.head.appendChild(m)}})}function ef(g,l){Mc()&&(l&&(ff=l),J.setTimeout(km,g))}function gf(){Vh=!0;J.removeEventListener("load",gf)}function Wh(g,l){if(ob.has(g)){var m=ob.get(g);0===m.handlers[l].length&&
(delete m.handlers[l],g.removeEventListener?g.removeEventListener(l,m.dispatcher,!1):g.detachEvent&&g.detachEvent("on"+l,m.dispatcher));0>=Object.getOwnPropertyNames(m.handlers).length&&(delete m.handlers,delete m.dispatcher,delete m.disabled);0===Object.getOwnPropertyNames(m).length&&ob.delete(g)}}function hf(g,l,m,r){m.forEach(function(w){g(l,w,r)})}function Xd(g){function l(){return!0}function m(){return!1}if(g.fixed_)return g;if(!g||!g.isPropagationStopped||!g.isImmediatePropagationStopped){const a=
g||J.event;g={};var r="layerX layerY keyLocation path webkitMovementX webkitMovementY mozPressure mozInputSource".split(" ");for(var w in a)r.includes(w)||"returnValue"===w&&a.preventDefault||(g[w]=a[w]);g.target||(g.target=g.srcElement||ca);g.relatedTarget||(g.relatedTarget=g.fromElement===g.target?g.toElement:g.fromElement);g.preventDefault=function(){a.preventDefault&&a.preventDefault();g.returnValue=!1;a.returnValue=!1;g.defaultPrevented=!0};g.defaultPrevented=!1;g.stopPropagation=function(){a.stopPropagation&&
a.stopPropagation();g.cancelBubble=!0;a.cancelBubble=!0;g.isPropagationStopped=l};g.isPropagationStopped=m;g.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation();g.isImmediatePropagationStopped=l;g.stopPropagation()};g.isImmediatePropagationStopped=m;null!==g.clientX&&void 0!==g.clientX&&(r=ca.documentElement,w=ca.body,g.pageX=g.clientX+(r&&r.scrollLeft||w&&w.scrollLeft||0)-(r&&r.clientLeft||w&&w.clientLeft||0),g.pageY=g.clientY+(r&&r.scrollTop||w&&w.scrollTop||
0)-(r&&r.clientTop||w&&w.clientTop||0));g.which=g.charCode||g.keyCode;null!==g.button&&void 0!==g.button&&(g.button=g.button&1?0:g.button&4?1:g.button&2?2:0)}g.fixed_=!0;return g}function wb(g,l,m){if(Array.isArray(l))return hf(wb,g,l,m);ob.has(g)||ob.set(g,{});const r=ob.get(g);r.handlers||(r.handlers={});r.handlers[l]||(r.handlers[l]=[]);m.guid||(m.guid=Eb++);r.handlers[l].push(m);r.dispatcher||(r.disabled=!1,r.dispatcher=function(w,a){if(!r.disabled){w=Xd(w);var b=r.handlers[w.type];if(b){b=b.slice(0);
for(let c=0,d=b.length;c<d&&!w.isImmediatePropagationStopped();c++)try{b[c].call(g,w,a)}catch(e){ra.error(e)}}}});1===r.handlers[l].length&&(g.addEventListener?(m=!1,lm()&&-1<mm.indexOf(l)&&(m={passive:!0}),g.addEventListener(l,r.dispatcher,m)):g.attachEvent&&g.attachEvent("on"+l,r.dispatcher))}function kb(g,l,m){if(ob.has(g)){var r=ob.get(g);if(r.handlers){if(Array.isArray(l))return hf(kb,g,l,m);if(void 0===l)for(var w in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},w)&&(l=g,m=
w,r.handlers[m]=[],Wh(l,m));else if(w=r.handlers[l]){if(!m)r.handlers[l]=[];else if(m.guid)for(r=0;r<w.length;r++)w[r].guid===m.guid&&w.splice(r--,1);Wh(g,l)}}}}function Qc(g,l,m){const r=ob.has(g)?ob.get(g):{},w=g.parentNode||g.ownerDocument;"string"===typeof l?l={type:l,target:g}:l.target||(l.target=g);l=Xd(l);r.dispatcher&&r.dispatcher.call(g,l,m);if(w&&!l.isPropagationStopped()&&!0===l.bubbles)Qc.call(null,w,l,m);else if(!w&&!l.defaultPrevented&&l.target&&l.target[l.type]&&(ob.has(l.target)||
ob.set(l.target,{}),g=ob.get(l.target),l.target[l.type])){g.disabled=!0;if("function"===typeof l.target[l.type])l.target[l.type]();g.disabled=!1}return!l.defaultPrevented}function Yd(g,l,m){if(Array.isArray(l))return hf(Yd,g,l,m);const r=function(){kb(g,l,r);m.apply(this,arguments)};r.guid=m.guid=m.guid||Eb++;wb(g,l,r)}function jf(g,l,m){const r=function(){kb(g,l,r);m.apply(this,arguments)};r.guid=m.guid=m.guid||Eb++;wb(g,l,r)}function kf(g,l={}){({eventBusKey:l}=l);if(l){if(!g[l].nodeName)throw Error(`The eventBusKey "${l}" does not refer to an element.`);
g.eventBusEl_=g[l]}else g.eventBusEl_=ja("span",{className:"vjs-event-bus"});Object.assign(g,nm);g.eventedCallbacks&&g.eventedCallbacks.forEach(m=>{m()});g.on("dispose",()=>{g.off();[g,g.el_,g.eventBusEl_].forEach(function(m){m&&ob.has(m)&&ob.delete(m)});J.setTimeout(()=>{g.eventBusEl_=null},0)});return g}function Xh(g,l){Object.assign(g,om);g.state=Object.assign({},g.state,l);if("function"===typeof g.handleStateChanged&&dc(g))g.on("statechanged",g.handleStateChanged);return g}function Yh(g,l,m,r){var w=
m.length-1;if("number"!==typeof r||0>r||r>w)throw Error(`Failed to execute '${g}' on 'TimeRanges': The index provided (${r}) is non-numeric or out of bounds (0-${w}).`);return m[r][l]}function lf(g){let l;l=void 0===g||0===g.length?{length:0,start(){throw Error("This TimeRanges object is empty");},end(){throw Error("This TimeRanges object is empty");}}:{length:g.length,start:Yh.bind(null,"start",0,g),end:Yh.bind(null,"end",1,g)};J.Symbol&&J.Symbol.iterator&&(l[J.Symbol.iterator]=()=>(g||[]).values());
return l}function Hb(g,l){return Array.isArray(g)?lf(g):void 0===g||void 0===l?lf():lf([[g,l]])}function Zh(g){mf=g}function $h(){mf=ai}function wc(g,l=g){return mf(g,l)}function bi(g,l){let m=0,r,w;if(!l)return 0;g&&g.length||(g=Hb(0,0));for(let a=0;a<g.length;a++)r=g.start(a),w=g.end(a),w>l&&(w=l),m+=w-r;return m/l}function La(g){if(g instanceof La)return g;"number"===typeof g?this.code=g:"string"===typeof g?this.message=g:Mb(g)&&("number"===typeof g.code&&(this.code=g.code),Object.assign(this,
g));this.message||(this.message=La.defaultMessages[this.code]||"")}function od(g){return void 0!==g&&null!==g&&"function"===typeof g.then}function Nb(g){od(g)&&g.then(null,l=>{})}function pm(g,l,m,r,w={}){const a=g.textTracks();w.kind=l;m&&(w.label=m);r&&(w.language=r);w.tech=g;g=new pb.text.TrackClass(w);a.addTrack(g);return g}function qm(g,l,m){g.setTimeout(()=>xc(l,yc[l.type],m,g),1)}function rm(g,l){g.forEach(m=>m.setTech&&m.setTech(l))}function ci(g,l,m,r=null){var w="call"+Pa(m);w=g.reduce(nf(w),
r);l=(r=w===Zd)?null:l[m](w);for(w=g.length-1;0<=w;w--){const a=g[w];if(a[m])a[m](r,l)}return l}function nf(g){return(l,m)=>l===Zd?Zd:m[g]?m[g](l):l}function sm(g,l){const m=$d[g.id()];let r=null;if(void 0===m||null===m)return r=l(g),$d[g.id()]=[[l,r]],r;for(let w=0;w<m.length;w++){const [a,b]=m[w];a===l&&(r=b)}null===r&&(r=l(g),m.push([l,r]));return r}function xc(g={},l=[],m,r,w=[],a=!1){const [b,...c]=l;if("string"===typeof b)xc(g,yc[b],m,r,w,a);else if(b){const d=sm(r,b);if(!d.setSource)return w.push(d),
xc(g,c,m,r,w,a);d.setSource(Object.assign({},g),function(e,h){if(e)return xc(g,c,m,r,w,a);w.push(d);xc(h,g.type===h.type?c:yc[h.type],m,r,w,a)})}else c.length?xc(g,c,m,r,w,a):a?m(g,w):xc(g,yc["*"],m,r,w,!0)}function di(g){if(!g.type){const l=ae(g.src);l&&(g.type=l)}return g}function of(g,l){if(4===g.length)g=g[1]+g[1]+g[2]+g[2]+g[3]+g[3];else if(7===g.length)g=g.slice(1);else throw Error("Invalid color code provided, "+g+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(g.slice(0,
2),16)+","+parseInt(g.slice(2,4),16)+","+parseInt(g.slice(4,6),16)+","+l+")"}function Ob(g,l,m){try{g.style[l]=m}catch(r){}}function zc(g,l,m){g=Number(g);return Math.min(m,Math.max(l,isNaN(g)?l:g))}function ei(g,l){l&&(g=l(g));if(g&&"none"!==g)return g}function tm(g,l){let m=!1;return function(...r){m||ra.warn(g);m=!0;return l.apply(this,r)}}function Ib(g,l,m,r){return tm(`${l} is deprecated and will be removed in ${g}.0; please use ${m} instead.`,r)}function R(g,l,m){let r=R.getPlayer(g);if(r)return l&&
ra.warn(`Player "${g}" is already initialised. Options will not be applied.`),m&&r.ready(m),r;const w="string"===typeof g?mc("#"+fi(g)):g;if(!Nc(w))throw new TypeError("The element or ID supplied is not valid. (videojs)");g="getRootNode"in w&&w.getRootNode()instanceof J.ShadowRoot?w.getRootNode():w.ownerDocument.body;w.ownerDocument.defaultView&&g.contains(w)||ra.warn("The element supplied is not included in the DOM");l=l||{};!0===l.restoreEl&&(l.restoreEl=(w.parentNode&&w.parentNode.hasAttribute&&
w.parentNode.hasAttribute("data-vjs-player")?w.parentNode:w).cloneNode(!0));nc("beforesetup").forEach(a=>{a=a(w,Ca(l));!Mb(a)||Array.isArray(a)?ra.error("please return an object in beforesetup hooks"):l=Ca(l,a)});r=new (V.getComponent("Player"))(w,l,m);nc("setup").forEach(a=>a(r));return r}function za(...g){const l=R.obj||R;return(l.merge||l.mergeOptions).apply(l,g)}function eb(...g){const l=R.time||R;return(l.createTimeRanges||l.createTimeRanges).apply(l,g)}function gi(g){try{return(new URL(g)).pathname.split("/").slice(-2).join("/")}catch(l){return""}}
function ec(){}var Mg,Lg,um=Ld();const J=Xb.getDefaultExportFromCjs(um);var Pg,Og,Se,Qg,Te,Rg,Ug,Tg,Xg,Wg,$g,Zg,Ue,ah,Ve,ch,We,dh,Xe,eh,Ye,fh,kh,jh,ih,hh,vm=gh();const ca=Xb.getDefaultExportFromCjs(vm);var be={},Ze={exports:{}},lh,$e,mh,oh,nh,qh,ph,sh,rh,hi,wm=function(){function g(n){for(var u in n)if(n.hasOwnProperty(u))return!1;return!0}function l(n,u,t){var A=n;c(u)?(t=u,"string"===typeof n&&(A={uri:n})):A=b({},u,{uri:n});A.callback=t;return A}function m(n,u,t){u=l(n,u,t);return r(u)}function r(n){function u(S){clearTimeout(M);
clearTimeout(n.retryTimeout);S instanceof Error||(S=Error(""+(S||"Unknown XMLHttpRequest Error")));S.statusCode=0;if(!H&&m.retryManager.getIsEnabled()&&n.retry&&n.retry.shouldRetry())n.retryTimeout=setTimeout(function(){n.retry.moveToNextAttempt();n.xhr=C;r(n)},n.retry.getCurrentFuzzedDelay());else{if(n.requestType&&m.responseInterceptorsStorage.getIsEnabled()){var aa=m.responseInterceptorsStorage.execute(n.requestType,{headers:O.headers||{},body:O.body,responseUrl:C.responseURL,responseType:C.responseType});
O.body=aa.body;O.headers=aa.headers}return y(S,O)}}function t(){if(!H){clearTimeout(M);clearTimeout(n.retryTimeout);var S=n.useXDR&&void 0===C.status?200:1223===C.status?204:C.status;var aa=O,Z=null;if(0!==S){aa=void 0;if(C.response)var ba=C.response;else{if(!(aa=C.responseText))a:{try{if("document"===C.responseType){aa=C.responseXML;break a}ba=C.responseXML&&"parsererror"===C.responseXML.documentElement.nodeName;if(""===C.responseType&&!ba){aa=C.responseXML;break a}}catch(da){}aa=null}ba=aa}aa=ba;
if(X)try{aa=JSON.parse(aa)}catch(da){}aa={body:aa,statusCode:S,method:E,headers:{},url:B,rawRequest:C};C.getAllResponseHeaders&&(aa.headers=h(C.getAllResponseHeaders()))}else Z=Error("Internal XMLHttpRequest Error");n.requestType&&m.responseInterceptorsStorage.getIsEnabled()&&(S=m.responseInterceptorsStorage.execute(n.requestType,{headers:aa.headers||{},body:aa.body,responseUrl:C.responseURL,responseType:C.responseType}),aa.body=S.body,aa.headers=S.headers);return y(Z,aa,aa.body)}}if("undefined"===
typeof n.callback)throw Error("callback argument missing");if(n.requestType&&m.requestInterceptorsStorage.getIsEnabled()){var A=m.requestInterceptorsStorage.execute(n.requestType,{uri:n.uri||n.url,headers:n.headers||{},body:n.body,metadata:n.metadata||{},retry:n.retry,timeout:n.timeout});n.uri=A.uri;n.headers=A.headers;n.body=A.body;n.metadata=A.metadata;n.retry=A.retry;n.timeout=A.timeout}var F=!1,y=function(S,aa,Z){F||(F=!0,n.callback(S,aa,Z))},C=n.xhr||null;C||=n.cors||n.useXDR?new m.XDomainRequest:
new m.XMLHttpRequest;var L,H,B=C.url=n.uri||n.url,E=C.method=n.method||"GET";A=n.body||n.data;var P=C.headers=n.headers||{},U=!!n.sync,X=!1,M,O={body:void 0,headers:{},statusCode:0,method:E,url:B,rawRequest:C};"json"in n&&!1!==n.json&&(X=!0,P.accept||P.Accept||(P.Accept="application/json"),"GET"!==E&&"HEAD"!==E&&(P["content-type"]||P["Content-Type"]||(P["Content-Type"]="application/json"),A=JSON.stringify(!0===n.json?A:n.json)));C.onreadystatechange=function(){4!==C.readyState||m.responseInterceptorsStorage.getIsEnabled()||
setTimeout(t,0)};C.onload=t;C.onerror=u;C.onprogress=function(){};C.onabort=function(){H=!0;clearTimeout(n.retryTimeout)};C.ontimeout=u;C.open(E,B,!U,n.username,n.password);U||(C.withCredentials=!!n.withCredentials);!U&&0<n.timeout&&(M=setTimeout(function(){if(!H){H=!0;C.abort("timeout");var S=Error("XMLHttpRequest timeout");S.code="ETIMEDOUT";u(S)}},n.timeout));if(C.setRequestHeader)for(L in P)P.hasOwnProperty(L)&&C.setRequestHeader(L,P[L]);else if(n.headers&&!g(n.headers))throw Error("Headers cannot be set on an XDomainRequest object");
"responseType"in n&&(C.responseType=n.responseType);"beforeSend"in n&&"function"===typeof n.beforeSend&&n.beforeSend(C);C.send(A||null);return C}function w(){}if(hi)return be;hi=1;var a=Ld(),b=Xl(),c=Yl(),d=Zl(),e=$l();m.httpHandler=am();m.requestInterceptorsStorage=new d;m.responseInterceptorsStorage=new d;m.retryManager=new e;var h=function(n){var u={};if(!n)return u;n.trim().split("\n").forEach(function(t){var A=t.indexOf(":"),F=t.slice(0,A).trim().toLowerCase();t=t.slice(A+1).trim();"undefined"===
typeof u[F]?u[F]=t:Array.isArray(u[F])?u[F].push(t):u[F]=[u[F],t]});return u};be=m;be.default=m;m.XMLHttpRequest=a.XMLHttpRequest||w;m.XDomainRequest="withCredentials"in new m.XMLHttpRequest?m.XMLHttpRequest:a.XDomainRequest;(function(n,u){for(var t=0;t<n.length;t++)u(n[t])})("get put post patch head delete".split(" "),function(n){m["delete"===n?"del":n]=function(u,t,A){t=l(u,t,A);t.method=n.toUpperCase();return r(t)}});return be}();const ii=Xb.getDefaultExportFromCjs(wm);var pf={},uh,th,wh,vh,yh,
xh,ji,xm=function(){if(ji)return pf;ji=1;var g=Ld(),l=pf={WebVTT:bm(),VTTCue:cm(),VTTRegion:dm()};g.vttjs=l;g.WebVTT=l.WebVTT;var m=l.VTTCue,r=l.VTTRegion,w=g.VTTCue,a=g.VTTRegion;l.shim=function(){g.VTTCue=m;g.VTTRegion=r};l.restore=function(){g.VTTCue=w;g.VTTRegion=a};g.VTTCue||l.shim();return pf}();const ki=Xb.getDefaultExportFromCjs(xm);var fb=function(g,l){if(/^[a-z]+:/i.test(l))return l;/^data:/.test(g)&&(g=J.location&&J.location.href||"");var m=/^\/\//.test(g),r=!J.location&&!/\/\//i.test(g);
g=new J.URL(g,J.location||"https://example.com");g=new URL(l,g);return r?g.href.slice(19):m?g.href.slice(g.protocol.length):g.href},qf=function(){function g(){this.listeners={}}var l=g.prototype;l.on=function(m,r){this.listeners[m]||(this.listeners[m]=[]);this.listeners[m].push(r)};l.off=function(m,r){if(!this.listeners[m])return!1;r=this.listeners[m].indexOf(r);this.listeners[m]=this.listeners[m].slice(0);this.listeners[m].splice(r,1);return-1<r};l.trigger=function(m){var r=this.listeners[m];if(r)if(2===
arguments.length)for(var w=r.length,a=0;a<w;++a)r[a].call(this,arguments[1]);else{w=Array.prototype.slice.call(arguments,1);a=r.length;for(var b=0;b<a;++b)r[b].apply(this,w)}};l.dispose=function(){this.listeners={}};l.pipe=function(m){this.on("data",function(r){m.push(r)})};return g}();class ym extends qf{constructor(){super();this.buffer=""}push(g){this.buffer+=g;for(g=this.buffer.indexOf("\n");-1<g;g=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,g)),this.buffer=this.buffer.substring(g+
1)}}const zm=String.fromCharCode(9),rf=function(g){g=/([0-9.]*)?@?([0-9.]*)?/.exec(g||"");const l={};g[1]&&(l.length=parseInt(g[1],10));g[2]&&(l.offset=parseInt(g[2],10));return l},qb=function(g){const l={};if(!g)return l;g=g.split.call(g,RegExp('(?:^|,)((?:[^\x3d]*)\x3d(?:"[^"]*"|[^,]*))'));let m=g.length,r;for(;m--;)""!==g[m]&&(r=/([^=]*)=(.*)/.exec(g[m]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),l[r[0]]=r[1]);return l},
li=g=>{g=g.split("x");const l={};g[0]&&(l.width=parseInt(g[0],10));g[1]&&(l.height=parseInt(g[1],10));return l};class Am extends qf{constructor(){super();this.customParsers=[];this.tagMappers=[]}push(g){let l,m;g=g.trim();0!==g.length&&("#"!==g[0]?this.trigger("data",{type:"uri",uri:g}):this.tagMappers.reduce((r,w)=>{w=w(g);return w===g?r:r.concat([w])},[g]).forEach(r=>{for(var w=0;w<this.customParsers.length;w++)if(this.customParsers[w].call(this,r))return;if(0!==r.indexOf("#EXT"))this.trigger("data",
{type:"comment",text:r.slice(1)});else if(r=r.replace("\r",""),l=/^#EXTM3U/.exec(r))this.trigger("data",{type:"tag",tagType:"m3u"});else if(l=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(r))m={type:"tag",tagType:"inf"},l[1]&&(m.duration=parseFloat(l[1])),l[2]&&(m.title=l[2]),this.trigger("data",m);else if(l=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(r))m={type:"tag",tagType:"targetduration"},l[1]&&(m.duration=parseInt(l[1],10)),this.trigger("data",m);else if(l=/^#EXT-X-VERSION:([0-9.]*)?/.exec(r))m={type:"tag",
tagType:"version"},l[1]&&(m.version=parseInt(l[1],10)),this.trigger("data",m);else if(l=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(r))m={type:"tag",tagType:"media-sequence"},l[1]&&(m.number=parseInt(l[1],10)),this.trigger("data",m);else if(l=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(r))m={type:"tag",tagType:"discontinuity-sequence"},l[1]&&(m.number=parseInt(l[1],10)),this.trigger("data",m);else if(l=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(r))m={type:"tag",tagType:"playlist-type"},l[1]&&(m.playlistType=
l[1]),this.trigger("data",m);else if(l=/^#EXT-X-BYTERANGE:(.*)?$/.exec(r))m=Ra(rf(l[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",m);else if(l=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(r))m={type:"tag",tagType:"allow-cache"},l[1]&&(m.allowed=!/NO/.test(l[1])),this.trigger("data",m);else if(l=/^#EXT-X-MAP:(.*)$/.exec(r)){m={type:"tag",tagType:"map"};if(l[1]){var a=qb(l[1]);a.URI&&(m.uri=a.URI);a.BYTERANGE&&(m.byterange=rf(a.BYTERANGE))}this.trigger("data",m)}else if(l=/^#EXT-X-STREAM-INF:(.*)$/.exec(r))m=
{type:"tag",tagType:"stream-inf"},l[1]&&(m.attributes=qb(l[1]),m.attributes.RESOLUTION&&(m.attributes.RESOLUTION=li(m.attributes.RESOLUTION)),m.attributes.BANDWIDTH&&(m.attributes.BANDWIDTH=parseInt(m.attributes.BANDWIDTH,10)),m.attributes["FRAME-RATE"]&&(m.attributes["FRAME-RATE"]=parseFloat(m.attributes["FRAME-RATE"])),m.attributes["PROGRAM-ID"]&&(m.attributes["PROGRAM-ID"]=parseInt(m.attributes["PROGRAM-ID"],10))),this.trigger("data",m);else if(l=/^#EXT-X-MEDIA:(.*)$/.exec(r))m={type:"tag",tagType:"media"},
l[1]&&(m.attributes=qb(l[1])),this.trigger("data",m);else if(l=/^#EXT-X-ENDLIST/.exec(r))this.trigger("data",{type:"tag",tagType:"endlist"});else if(l=/^#EXT-X-DISCONTINUITY/.exec(r))this.trigger("data",{type:"tag",tagType:"discontinuity"});else if(l=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(r))m={type:"tag",tagType:"program-date-time"},l[1]&&(m.dateTimeString=l[1],m.dateTimeObject=new Date(l[1])),this.trigger("data",m);else if(l=/^#EXT-X-KEY:(.*)$/.exec(r))m={type:"tag",tagType:"key"},l[1]&&(m.attributes=
qb(l[1]),m.attributes.IV&&("0x"===m.attributes.IV.substring(0,2).toLowerCase()&&(m.attributes.IV=m.attributes.IV.substring(2)),m.attributes.IV=m.attributes.IV.match(/.{8}/g),m.attributes.IV[0]=parseInt(m.attributes.IV[0],16),m.attributes.IV[1]=parseInt(m.attributes.IV[1],16),m.attributes.IV[2]=parseInt(m.attributes.IV[2],16),m.attributes.IV[3]=parseInt(m.attributes.IV[3],16),m.attributes.IV=new Uint32Array(m.attributes.IV))),this.trigger("data",m);else if(l=/^#EXT-X-START:(.*)$/.exec(r))m={type:"tag",
tagType:"start"},l[1]&&(m.attributes=qb(l[1]),m.attributes["TIME-OFFSET"]=parseFloat(m.attributes["TIME-OFFSET"]),m.attributes.PRECISE=/YES/.test(m.attributes.PRECISE)),this.trigger("data",m);else if(l=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(r))m={type:"tag",tagType:"cue-out-cont"},m.data=l[1]?l[1]:"",this.trigger("data",m);else if(l=/^#EXT-X-CUE-OUT:(.*)?$/.exec(r))m={type:"tag",tagType:"cue-out"},m.data=l[1]?l[1]:"",this.trigger("data",m);else if(l=/^#EXT-X-CUE-IN:?(.*)?$/.exec(r))m={type:"tag",tagType:"cue-in"},
m.data=l[1]?l[1]:"",this.trigger("data",m);else if((l=/^#EXT-X-SKIP:(.*)$/.exec(r))&&l[1])m={type:"tag",tagType:"skip"},m.attributes=qb(l[1]),m.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(m.attributes["SKIPPED-SEGMENTS"]=parseInt(m.attributes["SKIPPED-SEGMENTS"],10)),m.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(m.attributes["RECENTLY-REMOVED-DATERANGES"]=m.attributes["RECENTLY-REMOVED-DATERANGES"].split(zm)),this.trigger("data",m);else if((l=/^#EXT-X-PART:(.*)$/.exec(r))&&l[1])m=
{type:"tag",tagType:"part"},m.attributes=qb(l[1]),["DURATION"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=parseFloat(m.attributes[b]))}),["INDEPENDENT","GAP"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=/YES/.test(m.attributes[b]))}),m.attributes.hasOwnProperty("BYTERANGE")&&(m.attributes.byterange=rf(m.attributes.BYTERANGE)),this.trigger("data",m);else if((l=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(r))&&l[1])m={type:"tag",tagType:"server-control"},m.attributes=
qb(l[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=parseFloat(m.attributes[b]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=/YES/.test(m.attributes[b]))}),this.trigger("data",m);else if((l=/^#EXT-X-PART-INF:(.*)$/.exec(r))&&l[1])m={type:"tag",tagType:"part-inf"},m.attributes=qb(l[1]),["PART-TARGET"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=
parseFloat(m.attributes[b]))}),this.trigger("data",m);else if((l=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(r))&&l[1])m={type:"tag",tagType:"preload-hint"},m.attributes=qb(l[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=parseInt(m.attributes[b],10),m.attributes.byterange=m.attributes.byterange||{},m.attributes.byterange["BYTERANGE-LENGTH"===b?"length":"offset"]=m.attributes[b],delete m.attributes[b])}),this.trigger("data",m);else if((l=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(r))&&
l[1])m={type:"tag",tagType:"rendition-report"},m.attributes=qb(l[1]),["LAST-MSN","LAST-PART"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=parseInt(m.attributes[b],10))}),this.trigger("data",m);else if((l=/^#EXT-X-DATERANGE:(.*)$/.exec(r))&&l[1]){m={type:"tag",tagType:"daterange"};m.attributes=qb(l[1]);["ID","CLASS"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=String(m.attributes[b]))});["START-DATE","END-DATE"].forEach(function(b){m.attributes.hasOwnProperty(b)&&
(m.attributes[b]=new Date(m.attributes[b]))});["DURATION","PLANNED-DURATION"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=parseFloat(m.attributes[b]))});["END-ON-NEXT"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=/YES/i.test(m.attributes[b]))});["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(b){m.attributes.hasOwnProperty(b)&&(m.attributes[b]=m.attributes[b].toString(16))});r=/^X-([A-Z]+-)+[A-Z]+$/;for(a in m.attributes){if(!r.test(a))continue;
w=/[0-9A-Fa-f]{6}/g.test(m.attributes[a]);const b=/^\d+(\.\d+)?$/.test(m.attributes[a]);m.attributes[a]=w?m.attributes[a].toString(16):b?parseFloat(m.attributes[a]):String(m.attributes[a])}this.trigger("data",m)}else(l=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(r))?this.trigger("data",{type:"tag",tagType:"independent-segments"}):(l=/^#EXT-X-I-FRAMES-ONLY/.exec(r))?this.trigger("data",{type:"tag",tagType:"i-frames-only"}):(l=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(r))?(m={type:"tag",tagType:"content-steering"},
m.attributes=qb(l[1]),this.trigger("data",m)):(l=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(r))?(m={type:"tag",tagType:"i-frame-playlist"},m.attributes=qb(l[1]),m.attributes.URI&&(m.uri=m.attributes.URI),m.attributes.BANDWIDTH&&(m.attributes.BANDWIDTH=parseInt(m.attributes.BANDWIDTH,10)),m.attributes.RESOLUTION&&(m.attributes.RESOLUTION=li(m.attributes.RESOLUTION)),m.attributes["AVERAGE-BANDWIDTH"]&&(m.attributes["AVERAGE-BANDWIDTH"]=parseInt(m.attributes["AVERAGE-BANDWIDTH"],10)),m.attributes["FRAME-RATE"]&&
(m.attributes["FRAME-RATE"]=parseFloat(m.attributes["FRAME-RATE"])),this.trigger("data",m)):(l=/^#EXT-X-DEFINE:(.*)$/.exec(r))?(m={type:"tag",tagType:"define"},m.attributes=qb(l[1]),this.trigger("data",m)):this.trigger("data",{type:"tag",data:r.slice(4)})}))}addParser({expression:g,customType:l,dataParser:m,segment:r}){"function"!==typeof m&&(m=w=>w);this.customParsers.push(w=>{if(g.exec(w))return this.trigger("data",{type:"custom",data:m(w),customType:l,segment:r}),!0})}addTagMapper({expression:g,
map:l}){this.tagMappers.push(m=>g.test(m)?l(m):m)}}const Bm=g=>g.toLowerCase().replace(/-(\w)/g,l=>l[1].toUpperCase()),oc=function(g){const l={};Object.keys(g).forEach(function(m){l[Bm(m)]=g[m]});return l},sf=function(g){const {serverControl:l,targetDuration:m,partTargetDuration:r}=g;if(l){g=m&&3*m;var w=r&&2*r;m&&!l.hasOwnProperty("holdBack")&&(l.holdBack=g,this.trigger("info",{message:`${"#EXT-X-SERVER-CONTROL"} defaulting HOLD-BACK to targetDuration * 3 (${g}).`}));g&&l.holdBack<g&&(this.trigger("warn",
{message:`${"#EXT-X-SERVER-CONTROL"} clamping HOLD-BACK (${l.holdBack}) to targetDuration * 3 (${g})`}),l.holdBack=g);r&&!l.hasOwnProperty("partHoldBack")&&(l.partHoldBack=3*r,this.trigger("info",{message:`${"#EXT-X-SERVER-CONTROL"} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${l.partHoldBack}).`}));r&&l.partHoldBack<w&&(this.trigger("warn",{message:`${"#EXT-X-SERVER-CONTROL"} clamping PART-HOLD-BACK (${l.partHoldBack}) to partTargetDuration * 2 (${w}).`}),l.partHoldBack=w)}};class Cm extends qf{constructor(g=
{}){super();this.lineStream=new ym;this.parseStream=new Am;this.lineStream.pipe(this.parseStream);this.mainDefinitions=g.mainDefinitions||{};this.params=(new URL(g.uri,"https://a.com")).searchParams;this.lastProgramDateTime=null;const l=this,m=[];let r={},w,a,b=!1;const c=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let e=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let h=0,n=0;const u={};this.on("end",()=>{r.uri||!r.parts&&
!r.preloadHints||(!r.map&&w&&(r.map=w),!r.key&&a&&(r.key=a),r.timeline||"number"!==typeof e||(r.timeline=e),this.manifest.preloadSegment=r)});this.parseStream.on("data",function(t){let A,F;if(l.manifest.definitions)for(const y in l.manifest.definitions)if(t.uri&&(t.uri=t.uri.replace(`{$${y}}`,l.manifest.definitions[y])),t.attributes)for(const C in t.attributes)"string"===typeof t.attributes[C]&&(t.attributes[C]=t.attributes[C].replace(`{$${y}}`,l.manifest.definitions[y]));({tag(){({version(){t.version&&
(this.manifest.version=t.version)},["allow-cache"](){this.manifest.allowCache=t.allowed;"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const y={};"length"in t&&(r.byterange=y,y.length=t.length,"offset"in t||(t.offset=h));"offset"in t&&(r.byterange=y,y.offset=t.offset);h=y.offset+y.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));
"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));t.title&&(r.title=t.title);0<t.duration&&(r.duration=t.duration);0===t.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=m},key(){t.attributes?"NONE"===t.attributes.METHOD?a=null:t.attributes.URI?"com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT?(this.manifest.contentProtection=
this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes}):"com.microsoft.playready"===t.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:t.attributes.URI}):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?this.trigger("warn",{message:"invalid key method provided for Widevine"}):
("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,
keyId:t.attributes.KEYID.substring(2)},pssh:zh(t.attributes.URI.split(",")[1])}):this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},"undefined"!==typeof t.attributes.IV&&(a.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},
["media-sequence"](){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},["discontinuity-sequence"](){isFinite(t.number)?e=this.manifest.discontinuitySequence=t.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},["playlist-type"](){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},
map(){w={};t.uri&&(w.uri=t.uri);t.byterange&&(w.byterange=t.byterange);a&&(w.key=a)},["stream-inf"](){this.manifest.playlists=m;this.manifest.mediaGroups=this.manifest.mediaGroups||d;t.attributes?(r.attributes||(r.attributes={}),Ra(r.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){this.manifest.mediaGroups=this.manifest.mediaGroups||d;if(t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var y=this.manifest.mediaGroups[t.attributes.TYPE];
y[t.attributes["GROUP-ID"]]=y[t.attributes["GROUP-ID"]]||{};A=y[t.attributes["GROUP-ID"]];F={default:/yes/i.test(t.attributes.DEFAULT)};F.autoselect=F.default?!0:/yes/i.test(t.attributes.AUTOSELECT);t.attributes.LANGUAGE&&(F.language=t.attributes.LANGUAGE);t.attributes.URI&&(F.uri=t.attributes.URI);t.attributes["INSTREAM-ID"]&&(F.instreamId=t.attributes["INSTREAM-ID"]);t.attributes.CHARACTERISTICS&&(F.characteristics=t.attributes.CHARACTERISTICS);t.attributes.FORCED&&(F.forced=/yes/i.test(t.attributes.FORCED));
A[t.attributes.NAME]=F}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity(){e+=1;r.discontinuity=!0;this.manifest.discontinuityStarts.push(m.length)},["program-date-time"](){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject);r.dateTimeString=t.dateTimeString;r.dateTimeObject=t.dateTimeObject;const {lastProgramDateTime:y}=this;this.lastProgramDateTime=(new Date(t.dateTimeString)).getTime();
null===y&&this.manifest.segments.reduceRight((C,L)=>{L.programDateTime=C-1E3*L.duration;return L.programDateTime},this.lastProgramDateTime)},targetduration(){!isFinite(t.duration)||0>t.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,sf.call(this,this.manifest))},start(){!t.attributes||isNaN(t.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start=
{timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}},["cue-out"](){r.cueOut=t.data},["cue-out-cont"](){r.cueOutCont=t.data},["cue-in"](){r.cueIn=t.data},skip(){this.manifest.skip=oc(t.attributes);this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part(){b=!0;const y=this.manifest.segments.length,C=oc(t.attributes);r.parts=r.parts||[];r.parts.push(C);C.byterange&&(C.byterange.hasOwnProperty("offset")||(C.byterange.offset=n),n=C.byterange.offset+C.byterange.length);
this.warnOnMissingAttributes_(`#EXT-X-PART #${r.parts.length-1} for segment #${y}`,t.attributes,["URI","DURATION"]);this.manifest.renditionReports&&this.manifest.renditionReports.forEach((L,H)=>{L.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${H} lacks required attribute(s): LAST-PART`})})},["server-control"](){const y=this.manifest.serverControl=oc(t.attributes);y.hasOwnProperty("canBlockReload")||(y.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"}));
sf.call(this,this.manifest);y.canSkipDateranges&&!y.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},["preload-hint"](){const y=this.manifest.segments.length,C=oc(t.attributes);var L=C.type&&"PART"===C.type;r.preloadHints=r.preloadHints||[];r.preloadHints.push(C);C.byterange&&!C.byterange.hasOwnProperty("offset")&&(C.byterange.offset=L?n:0,L&&(n=C.byterange.offset+C.byterange.length));
L=r.preloadHints.length-1;this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${L} for segment #${y}`,t.attributes,["TYPE","URI"]);if(C.type)for(let H=0;H<r.preloadHints.length-1;H++){const B=r.preloadHints[H];B.type&&B.type===C.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${L} for segment #${y} has the same TYPE ${C.type} as preload hint #${H}`})}},["rendition-report"](){var y=oc(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(y);
y=this.manifest.renditionReports.length-1;const C=["LAST-MSN","URI"];b&&C.push("LAST-PART");this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${y}`,t.attributes,C)},["part-inf"](){this.manifest.partInf=oc(t.attributes);this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]);this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget);sf.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(oc(t.attributes));var y=this.manifest.dateRanges.length-
1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${y}`,t.attributes,["ID","START-DATE"]);const C=this.manifest.dateRanges[y];C.endDate&&C.startDate&&new Date(C.endDate)<new Date(C.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"});C.duration&&0>C.duration&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"});C.plannedDuration&&0>C.plannedDuration&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});
var L=!!C.endOnNext;L&&!C.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT\x3dYES attribute must have a CLASS attribute"});L&&(C.duration||C.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT\x3dYES attribute must not contain DURATION or END-DATE attributes"});C.duration&&C.endDate&&(L=C.startDate.getTime()+1E3*C.duration,this.manifest.dateRanges[y].endDate=new Date(L));if(u[C.id]){for(const H in u[C.id])if(C[H]&&JSON.stringify(u[C.id][H])!==JSON.stringify(C[H])){this.trigger("warn",
{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}y=this.manifest.dateRanges.findIndex(H=>H.id===C.id);this.manifest.dateRanges[y]=Ra(this.manifest.dateRanges[y],C);u[C.id]=Ra(u[C.id],C);this.manifest.dateRanges.pop()}else u[C.id]=C},["independent-segments"](){this.manifest.independentSegments=!0},["i-frames-only"](){this.manifest.iFramesOnly=!0;this.requiredCompatibilityversion(this.manifest.version,4)},["content-steering"](){this.manifest.contentSteering=
oc(t.attributes);this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",t.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const y=(L,H)=>{L in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${L}`}):this.manifest.definitions[L]=H};if("QUERYPARAM"in t.attributes)if("NAME"in t.attributes||"IMPORT"in t.attributes)this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});else{var C=this.params.get(t.attributes.QUERYPARAM);
C?y(t.attributes.QUERYPARAM,decodeURIComponent(C)):this.trigger("error",{message:`EXT-X-DEFINE: No query param ${t.attributes.QUERYPARAM}`})}else"NAME"in t.attributes?"IMPORT"in t.attributes?this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in t.attributes&&"string"===typeof t.attributes.VALUE?y(t.attributes.NAME,t.attributes.VALUE):this.trigger("error",{message:`EXT-X-DEFINE: No value for ${t.attributes.NAME}`}):"IMPORT"in t.attributes?this.mainDefinitions[t.attributes.IMPORT]?
y(t.attributes.IMPORT,this.mainDefinitions[t.attributes.IMPORT]):this.trigger("error",{message:`EXT-X-DEFINE: No value ${t.attributes.IMPORT} to import, or IMPORT used on main playlist`}):this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},["i-frame-playlist"](){this.manifest.iFramePlaylists.push({attributes:t.attributes,uri:t.uri,timeline:e});this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",t.attributes,["BANDWIDTH","URI"])}}[t.tagType]||c).call(l)},uri(){r.uri=t.uri;m.push(r);
!this.manifest.targetDuration||"duration"in r||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration);a&&(r.key=a);r.timeline=e;w&&(r.map=w);n=0;null!==this.lastProgramDateTime&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1E3*r.duration);r={}},comment(){},custom(){t.segment?(r.custom=r.custom||{},r.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=
t.data)}})[t.type].call(l)})}requiredCompatibilityversion(g,l){(g<l||!g)&&this.trigger("warn",{message:`manifest must be at least version ${l}`})}warnOnMissingAttributes_(g,l,m){const r=[];m.forEach(function(w){l.hasOwnProperty(w)||r.push(w)});r.length&&this.trigger("warn",{message:`${g} lacks required attribute(s): ${r.join(", ")}`})}push(g){this.lineStream.push(g)}end(){this.lineStream.push("\n");this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"});
this.lastProgramDateTime=null;this.trigger("end")}addParser(g){this.parseStream.addParser(g)}addTagMapper(g){this.parseStream.addTagMapper(g)}}var Ac={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},
Dm=["video","audio","text"],mi=["Video","Audio","Text"],ni=function(g){return g?g.replace(/avc1\.(\d+)\.(\d+)/i,function(l,m,r){l=("00"+Number(m).toString(16)).slice(-2);r=("00"+Number(r).toString(16)).slice(-2);return"avc1."+l+"00"+r}):g},Pb=function(g){void 0===g&&(g="");var l=[];g.split(",").forEach(function(m){m=m.trim();var r;Dm.forEach(function(w){var a=Ac[w].exec(m.toLowerCase());if(a&&!(1>=a.length)){r=w;a=m.substring(0,a[1].length);var b=m.replace(a,"");l.push({type:a,details:b,mediaType:w})}});
r||l.push({type:m,details:"",mediaType:"unknown"})});return l},Em=function(g,l){if(!g.mediaGroups.AUDIO||!l)return null;g=g.mediaGroups.AUDIO[l];if(!g)return null;for(var m in g)if(l=g[m],l.default&&l.playlists)return Pb(l.playlists[0].attributes.CODECS);return null},oi=function(g){void 0===g&&(g="");return Ac.audio.test(g.trim().toLowerCase())},Fm=function(g){void 0===g&&(g="");return Ac.text.test(g.trim().toLowerCase())},Rc=function(g){if(g&&"string"===typeof g){var l=g.toLowerCase().split(",").map(function(w){return ni(w.trim())}),
m="video";1===l.length&&oi(l[0])?m="audio":1===l.length&&Fm(l[0])&&(m="application");var r="mp4";l.every(function(w){return Ac.mp4.test(w)})?r="mp4":l.every(function(w){return Ac.webm.test(w)})?r="webm":l.every(function(w){return Ac.ogg.test(w)})&&(r="ogg");return m+"/"+r+';codecs\x3d"'+g+'"'}},pd=function(g,l){void 0===g&&(g="");void 0===l&&(l=!1);return J.MediaSource&&J.MediaSource.isTypeSupported&&J.MediaSource.isTypeSupported(Rc(g))||l&&J.ManagedMediaSource&&J.ManagedMediaSource.isTypeSupported&&
J.ManagedMediaSource.isTypeSupported(Rc(g))||!1},tf=function(g){void 0===g&&(g="");return g.toLowerCase().split(",").every(function(l){l=l.trim();for(var m=0;m<mi.length;m++)if(Ac["muxer"+mi[m]].test(l))return!0;return!1})},Gm=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Hm=/^application\/dash\+xml/i,pi=function(g){return Gm.test(g)?"hls":Hm.test(g)?"dash":"application/vnd.videojs.vhs+json"===g?"vhs-json":null},qi=function(g){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(g):
g&&g.buffer instanceof ArrayBuffer},ia=function(g){if(g instanceof Uint8Array)return g;Array.isArray(g)||qi(g)||g instanceof ArrayBuffer||(g="number"!==typeof g||"number"===typeof g&&g!==g?0:[g]);return new Uint8Array(g&&g.buffer||g,g&&g.byteOffset||0,g&&g.byteLength||0)},gb=J.BigInt||Number,uf=[gb("0x1"),gb("0x100"),gb("0x10000"),gb("0x1000000"),gb("0x100000000"),gb("0x10000000000"),gb("0x1000000000000"),gb("0x100000000000000"),gb("0x10000000000000000")];(function(){var g=new Uint16Array([65484]);
g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);return 255===g[0]?"big":204===g[0]?"little":"unknown"})();var Im=function(g,l){var m=void 0===l?{}:l;l=m.signed;l=void 0===l?!1:l;m=m.le;var r=void 0===m?!1:m;g=ia(g);m=r?"reduce":"reduceRight";m=(g[m]?g[m]:Array.prototype[m]).call(g,function(w,a,b){return w+gb(a)*uf[r?b:Math.abs(b+1-g.length)]},gb(0));l&&(l=uf[g.length]/gb(2)-gb(1),m=gb(m),m>l&&(m=m-l-l-gb(2)));return Number(m)},Jm=function(g,l){l={}.le;l=void 0===l?!1:l;if("bigint"!==typeof g&&
"number"!==typeof g||"number"===typeof g&&g!==g)g=0;g=gb(g);for(var m=Math.ceil(g.toString(2).length/8),r=new Uint8Array(new ArrayBuffer(m)),w=0;w<m;w++){var a=l?w:Math.abs(w+1-r.length);r[a]=Number(g/uf[w]&gb(255));0>g&&(r[a]=Math.abs(~r[a]),r[a]-=0===w?1:2)}return r},ri=function(g,l){"string"!==typeof g&&g&&"function"===typeof g.toString&&(g=g.toString());if("string"!==typeof g)return new Uint8Array;l||(g=unescape(encodeURIComponent(g)));l=new Uint8Array(g.length);for(var m=0;m<g.length;m++)l[m]=
g.charCodeAt(m);return l},Km=function(){for(var g=arguments.length,l=Array(g),m=0;m<g;m++)l[m]=arguments[m];l=l.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!==typeof a});if(1>=l.length)return ia(l[0]);g=l.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0);var r=new Uint8Array(g),w=0;l.forEach(function(a){a=ia(a);r.set(a,w);w+=a.byteLength});return r},Ga=function(g,l,m){m=void 0===m?{}:m;var r=m.offset,w=void 0===r?0:r;m=m.mask;var a=void 0===m?[]:m;g=ia(g);l=ia(l);m=l.every?
l.every:Array.prototype.every;return l.length&&g.length-w>=l.length&&m.call(l,function(b,c){return b===(a[c]?a[c]&g[w+c]:g[w+c])})},Lm=function(g,l,m){l.forEach(function(r){for(var w in g.mediaGroups[r])for(var a in g.mediaGroups[r][w])m(g.mediaGroups[r][w][a],r,w,a)})},qd={},cc={},tc={},Ah,Ch,kd={},af={},Dh,Rd={},Eh,Fh,si,Mm=function(){if(si)return qd;si=1;var g=Bh();qd.DOMImplementation=g.DOMImplementation;qd.XMLSerializer=g.XMLSerializer;qd.DOMParser=gm().DOMParser;return qd}();const ti=g=>!!g&&
"object"===typeof g,ab=(...g)=>g.reduce((l,m)=>{if("object"!==typeof m)return l;Object.keys(m).forEach(r=>{Array.isArray(l[r])&&Array.isArray(m[r])?l[r]=l[r].concat(m[r]):ti(l[r])&&ti(m[r])?l[r]=ab(l[r],m[r]):l[r]=m[r]});return l},{}),ui=g=>Object.keys(g).map(l=>g[l]),Sc=g=>g.reduce((l,m)=>l.concat(m),[]),vi=g=>{if(!g.length)return[];const l=[];for(let m=0;m<g.length;m++)l.push(g[m]);return l},Nm=(g,l)=>g.reduce((m,r,w)=>{r[l]&&m.push(w);return m},[]),Om=(g,l)=>ui(g.reduce((m,r)=>{r.forEach(w=>{m[l(w)]=
w});return m},{})),rd=({baseUrl:g="",source:l="",range:m="",indexRange:r=""})=>{g={uri:l,resolvedUri:fb(g||"",l)};if(m||r)r=(m?m:r).split("-"),m=J.BigInt?J.BigInt(r[0]):parseInt(r[0],10),r=J.BigInt?J.BigInt(r[1]):parseInt(r[1],10),m<Number.MAX_SAFE_INTEGER&&"bigint"===typeof m&&(m=Number(m)),r<Number.MAX_SAFE_INTEGER&&"bigint"===typeof r&&(r=Number(r)),r="bigint"===typeof r||"bigint"===typeof m?J.BigInt(r)-J.BigInt(m)+J.BigInt(1):r-m+1,"bigint"===typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),
g.byterange={length:r,offset:m};return g},wi=g=>{g&&"number"!==typeof g&&(g=parseInt(g,10));return isNaN(g)?null:g},Pm={static(g){const {duration:l,timescale:m=1,sourceDuration:r,periodDuration:w}=g;g=wi(g.endNumber);const a=l/m;return"number"===typeof g?{start:0,end:g}:"number"===typeof w?{start:0,end:w/a}:{start:0,end:r/a}},dynamic(g){const {NOW:l,clientOffset:m,availabilityStartTime:r,timescale:w=1,duration:a,periodStart:b=0,minimumUpdatePeriod:c=0,timeShiftBufferDepth:d=Infinity}=g;g=wi(g.endNumber);
const e=(l+m)/1E3,h=r+b,n=Math.ceil((e+c-h)*w/a),u=Math.floor((e-h)*w/a);return{start:Math.max(0,Math.floor((e-h-d)*w/a)),end:"number"===typeof g?g:Math.min(n,u)}}},Qm=g=>l=>{const {duration:m,timescale:r=1,periodStart:w,startNumber:a=1}=g;return{number:a+l,duration:m/r,timeline:w,time:l*m}},vf=g=>{const {type:l,duration:m,timescale:r=1,periodDuration:w,sourceDuration:a}=g,{start:b,end:c}=Pm[l](g);var d=[];for(let e=b;e<c;e++)d.push(e);g=d.map(Qm(g));"static"===l&&(d=g.length-1,g[d].duration=("number"===
typeof w?w:a)-m/r*d);return g},xi=g=>{const {baseUrl:l,initialization:m={},sourceDuration:r,indexRange:w="",periodStart:a,presentationTime:b,number:c=0,duration:d}=g;if(!l)throw Error("NO_BASE_URL");const e=rd({baseUrl:l,source:m.sourceURL,range:m.range}),h=rd({baseUrl:l,source:l,indexRange:w});h.map=e;d?(g=vf(g),g.length&&(h.duration=g[0].duration,h.timeline=g[0].timeline)):r&&(h.duration=r,h.timeline=a);h.presentationTime=b||a;h.number=c;return[h]},wf=(g,l,m)=>{const r=g.sidx.map?g.sidx.map:null,
w=g.sidx.duration,a=g.timeline||0;var b=g.sidx.byterange,c=b.offset+b.length;b=l.timescale;const d=l.references.filter(y=>1!==y.referenceType),e=[],h=g.endList?"static":"dynamic",n=g.sidx.timeline;let u=n,t=g.mediaSequence||0;c="bigint"===typeof l.firstOffset?J.BigInt(c)+l.firstOffset:c+l.firstOffset;for(let y=0;y<d.length;y++){var A=l.references[y];const C=A.referencedSize;A=A.subsegmentDuration;var F=void 0;F="bigint"===typeof c?c+J.BigInt(C)-J.BigInt(1):c+C-1;F=xi({baseUrl:m,timescale:b,timeline:a,
periodStart:n,presentationTime:u,number:t,duration:A,sourceDuration:w,indexRange:`${c}-${F}`,type:h})[0];r&&(F.map=r);e.push(F);c="bigint"===typeof c?c+J.BigInt(C):c+C;u+=A/b;t++}g.segments=e;return g},Rm=["AUDIO","SUBTITLES"],Sm=1/60,yi=g=>Om(g,({timeline:l})=>l).sort((l,m)=>l.timeline>m.timeline?1:-1),Tm=(g,l)=>{for(let m=0;m<g.length;m++)if(g[m].attributes.NAME===l)return g[m];return null},zi=g=>{let l=[];Lm(g,Rm,(m,r,w,a)=>{l=l.concat(m.playlists||[])});return l},Ai=({playlist:g,mediaSequence:l})=>
{g.mediaSequence=l;g.segments.forEach((m,r)=>{m.number=g.mediaSequence+r})},Um=({oldPlaylists:g,newPlaylists:l,timelineStarts:m})=>{l.forEach(r=>{r.discontinuitySequence=m.findIndex(function({timeline:c}){return c===r.timeline});const w=Tm(g,r.attributes.NAME);if(w&&!r.sidx){var a=r.segments[0],b=w.segments.findIndex(function(c){return Math.abs(c.presentationTime-a.presentationTime)<Sm});-1===b?(Ai({playlist:r,mediaSequence:w.mediaSequence+w.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),
(!w.segments.length&&r.timeline>w.timeline||w.segments.length&&r.timeline>w.segments[w.segments.length-1].timeline)&&r.discontinuitySequence--):(w.segments[b].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),Ai({playlist:r,mediaSequence:w.segments[b].number}))}})},Vm=({oldManifest:g,newManifest:l})=>{const m=g.playlists.concat(zi(g)),r=l.playlists.concat(zi(l));l.timelineStarts=yi([g.timelineStarts,l.timelineStarts]);Um({oldPlaylists:m,
newPlaylists:r,timelineStarts:l.timelineStarts});return l},ce=g=>{var l;if(l=g){l=g.uri+"-";g=g.byterange;let m;m="bigint"===typeof g.offset||"bigint"===typeof g.length?J.BigInt(g.offset)+J.BigInt(g.length)-J.BigInt(1):g.offset+g.length-1;l+=`${g.offset}-${m}`}return l},xf=g=>{g=g.reduce(function(m,r){m[r.attributes.baseUrl]||(m[r.attributes.baseUrl]=[]);m[r.attributes.baseUrl].push(r);return m},{});let l=[];Object.values(g).forEach(m=>{m=ui(m.reduce((r,w)=>{const a=w.attributes.id+(w.attributes.lang||
"");r[a]?(w.segments&&(w.segments[0]&&(w.segments[0].discontinuity=!0),r[a].segments.push(...w.segments)),w.attributes.contentProtection&&(r[a].attributes.contentProtection=w.attributes.contentProtection)):(r[a]=w,r[a].attributes.timelineStarts=[]);r[a].attributes.timelineStarts.push({start:w.attributes.periodStart,timeline:w.attributes.periodStart});return r},{}));l=l.concat(m)});return l.map(m=>{m.discontinuityStarts=Nm(m.segments||[],"discontinuity");return m})},yf=(g,l)=>{const m=ce(g.sidx);(l=
m&&l[m]&&l[m].sidx)&&wf(g,l,g.sidx.resolvedUri);return g},Wm=(g,l={})=>{if(!Object.keys(l).length)return g;for(const m in g)g[m]=yf(g[m],l);return g},Xm=({attributes:g,segments:l,sidx:m,mediaSequence:r,discontinuitySequence:w,discontinuityStarts:a},b)=>{l={attributes:{NAME:g.id,BANDWIDTH:g.bandwidth,CODECS:g.codecs,["PROGRAM-ID"]:1},uri:"",endList:"static"===g.type,timeline:g.periodStart,resolvedUri:g.baseUrl||"",targetDuration:g.duration,discontinuitySequence:w,discontinuityStarts:a,timelineStarts:g.timelineStarts,
mediaSequence:r,segments:l};g.contentProtection&&(l.contentProtection=g.contentProtection);g.serviceLocation&&(l.attributes.serviceLocation=g.serviceLocation);m&&(l.sidx=m);b&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs");return l},Ym=({attributes:g,segments:l,mediaSequence:m,discontinuityStarts:r,discontinuitySequence:w})=>{"undefined"===typeof l&&(l=[{uri:g.baseUrl,timeline:g.periodStart,resolvedUri:g.baseUrl||"",duration:g.sourceDuration,number:0}],g.duration=g.sourceDuration);const a=
{NAME:g.id,BANDWIDTH:g.bandwidth,["PROGRAM-ID"]:1};g.codecs&&(a.CODECS=g.codecs);l={attributes:a,uri:"",endList:"static"===g.type,timeline:g.periodStart,resolvedUri:g.baseUrl||"",targetDuration:g.duration,timelineStarts:g.timelineStarts,discontinuityStarts:r,discontinuitySequence:w,mediaSequence:m,segments:l};g.serviceLocation&&(l.attributes.serviceLocation=g.serviceLocation);return l},Zm=(g,l={},m=!1)=>{let r;g=g.reduce((w,a)=>{const b=a.attributes.role&&a.attributes.role.value||"";var c=a.attributes.lang||
"";let d=a.attributes.label||"main";c&&!a.attributes.label&&(d=`${a.attributes.lang}${b?` (${b})`:""}`);w[d]||(w[d]={language:c,autoselect:!0,default:"main"===b,playlists:[],uri:""});c=yf(Xm(a,m),l);w[d].playlists.push(c);"undefined"===typeof r&&"main"===b&&(r=a,r.default=!0);return w},{});if(!r){const w=Object.keys(g)[0];g[w].default=!0}return g},$m=(g,l={})=>g.reduce((m,r)=>{const w=r.attributes.label||r.attributes.lang||"text",a=r.attributes.lang||"und";m[w]||(m[w]={language:a,default:!1,autoselect:!1,
playlists:[],uri:""});m[w].playlists.push(yf(Ym(r),l));return m},{}),an=g=>g.reduce((l,m)=>{if(!m)return l;m.forEach(r=>{const {channel:w,language:a}=r;l[a]={autoselect:!1,default:!1,instreamId:w,language:a};r.hasOwnProperty("aspectRatio")&&(l[a].aspectRatio=r.aspectRatio);r.hasOwnProperty("easyReader")&&(l[a].easyReader=r.easyReader);r.hasOwnProperty("3D")&&(l[a]["3D"]=r["3D"])});return l},{}),bn=({attributes:g,segments:l,sidx:m,discontinuityStarts:r})=>{l={attributes:{NAME:g.id,AUDIO:"audio",SUBTITLES:"subs",
RESOLUTION:{width:g.width,height:g.height},CODECS:g.codecs,BANDWIDTH:g.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:"static"===g.type,timeline:g.periodStart,resolvedUri:g.baseUrl||"",targetDuration:g.duration,discontinuityStarts:r,timelineStarts:g.timelineStarts,segments:l};g.frameRate&&(l.attributes["FRAME-RATE"]=g.frameRate);g.contentProtection&&(l.contentProtection=g.contentProtection);g.serviceLocation&&(l.attributes.serviceLocation=g.serviceLocation);m&&(l.sidx=m);return l},cn=({attributes:g})=>
"video/mp4"===g.mimeType||"video/webm"===g.mimeType||"video"===g.contentType,dn=({attributes:g})=>"audio/mp4"===g.mimeType||"audio/webm"===g.mimeType||"audio"===g.contentType,en=({attributes:g})=>"text/vtt"===g.mimeType||"text"===g.contentType,fn=(g,l)=>{g.forEach(m=>{m.mediaSequence=0;m.discontinuitySequence=l.findIndex(function({timeline:r}){return r===m.timeline});m.segments&&m.segments.forEach((r,w)=>{r.number=w})})},Bi=g=>g?Object.keys(g).reduce((l,m)=>l.concat(g[m].playlists),[]):[],gn=({dashPlaylists:g,
locations:l,contentSteering:m,sidxMapping:r={},previousManifest:w,eventStream:a})=>{if(!g.length)return{};const {sourceDuration:b,type:c,suggestedPresentationDelay:d,minimumUpdatePeriod:e}=g[0].attributes;var h=xf(g.filter(cn)).map(bn),n=xf(g.filter(dn)),u=xf(g.filter(en));g=g.map(A=>A.attributes.captionServices).filter(Boolean);const t={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:b,playlists:Wm(h,
r)};0<=e&&(t.minimumUpdatePeriod=1E3*e);l&&(t.locations=l);m&&(t.contentSteering=m);"dynamic"===c&&(t.suggestedPresentationDelay=d);a&&0<a.length&&(t.eventStream=a);l=0===t.playlists.length;n=n.length?Zm(n,r,l):null;r=u.length?$m(u,r):null;h=h.concat(Bi(n),Bi(r));u=h.map(({timelineStarts:A})=>A);t.timelineStarts=yi(u);fn(h,t.timelineStarts);n&&(t.mediaGroups.AUDIO.audio=n);r&&(t.mediaGroups.SUBTITLES.subs=r);g.length&&(t.mediaGroups["CLOSED-CAPTIONS"].cc=an(g));return w?Vm({oldManifest:w,newManifest:t}):
t},Ci=(g,l)=>{const {type:m,minimumUpdatePeriod:r=0,media:w="",sourceDuration:a,timescale:b=1,startNumber:c=1,periodStart:d}=g,e=[];let h=-1;for(let t=0;t<l.length;t++){var n=l[t];const A=n.d;var u=n.r||0;n=n.t||0;0>h&&(h=n);n&&n>h&&(h=n);if(0>u)if(u=t+1,u===l.length)if("dynamic"===m&&0<r&&0<w.indexOf("$Number$")){const {NOW:F,clientOffset:y,availabilityStartTime:C,timescale:L=1,periodStart:H=0,minimumUpdatePeriod:B=0}=g;u=Math.ceil((((F+y)/1E3+B-(C+H))*L-h)/A)}else u=(a*b-h)/A;else u=(l[u].t-h)/
A;else u+=1;u=c+e.length+u;for(n=c+e.length;n<u;)e.push({number:n,duration:A/b,time:h,timeline:d}),h+=A,n++}return e},Di=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Ei=g=>(l,m,r,w)=>{if("$$"===l)return"$";if("undefined"===typeof g[m])return l;l=""+g[m];if("RepresentationID"===m)return l;w=r?parseInt(w,10):1;return l.length>=w?l:`${Array(w-l.length+1).join("0")}${l}`},hn=(g,l)=>g.duration||l?g.duration?vf(g):Ci(g,l):[{number:g.startNumber||1,duration:g.sourceDuration,time:0,timeline:g.periodStart}],jn=(g,l)=>
{const m={RepresentationID:g.id,Bandwidth:g.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=g,w=rd({baseUrl:g.baseUrl,source:r.sourceURL.replace(Di,Ei(m)),range:r.range});return hn(g,l).map(a=>{m.Number=a.number;m.Time=a.time;const b=(g.media||"").replace(Di,Ei(m)),c=g.periodStart+(a.time-(g.presentationTimeOffset||0))/(g.timescale||1);return{uri:b,timeline:a.timeline,duration:a.duration,resolvedUri:fb(g.baseUrl||"",b),map:w,number:a.number,presentationTime:c}})},kn=(g,l)=>{const {duration:m,
segmentUrls:r=[],periodStart:w}=g;if(!m&&!l||m&&l)throw Error("SEGMENT_TIME_UNSPECIFIED");const a=r.map(c=>{const {baseUrl:d,initialization:e={}}=g,h=rd({baseUrl:d,source:e.sourceURL,range:e.range});c=rd({baseUrl:d,source:c.media,range:c.mediaRange});c.map=h;return c});let b;m&&(b=vf(g));l&&(b=Ci(g,l));return b.map((c,d)=>{if(a[d]){d=a[d];const e=g.timescale||1,h=g.presentationTimeOffset||0;d.timeline=c.timeline;d.duration=c.duration;d.number=c.number;d.presentationTime=w+(c.time-h)/e;return d}}).filter(c=>
c)},ln=({attributes:g,segmentInfo:l})=>{let m;if(l.template){var r=jn;m=ab(g,l.template)}else l.base?(r=xi,m=ab(g,l.base)):l.list&&(r=kn,m=ab(g,l.list));g={attributes:g};if(!r)return g;r=r(m,l.segmentTimeline);if(m.duration){const {duration:w,timescale:a=1}=m;m.duration=w/a}else m.duration=r.length?r.reduce((w,a)=>Math.max(w,Math.ceil(a.duration)),0):0;g.attributes=m;g.segments=r;l.base&&m.indexRange&&(g.sidx=r[0],g.segments=[]);return g},Ha=(g,l)=>vi(g.childNodes).filter(({tagName:m})=>m===l),mn=
g=>g.textContent.trim(),nn=g=>parseFloat(g.split("/").reduce((l,m)=>l/m)),Tc=g=>{g=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(g);if(!g)return 0;const [l,m,r,w,a,b]=g.slice(1);return 31536E3*parseFloat(l||0)+2592E3*parseFloat(m||0)+86400*parseFloat(r||0)+3600*parseFloat(w||0)+60*parseFloat(a||0)+parseFloat(b||0)},Fi={mediaPresentationDuration(g){return Tc(g)},availabilityStartTime(g){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(g)&&(g+="Z");return Date.parse(g)/
1E3},minimumUpdatePeriod(g){return Tc(g)},suggestedPresentationDelay(g){return Tc(g)},type(g){return g},timeShiftBufferDepth(g){return Tc(g)},start(g){return Tc(g)},width(g){return parseInt(g,10)},height(g){return parseInt(g,10)},bandwidth(g){return parseInt(g,10)},frameRate(g){return nn(g)},startNumber(g){return parseInt(g,10)},timescale(g){return parseInt(g,10)},presentationTimeOffset(g){return parseInt(g,10)},duration(g){const l=parseInt(g,10);return isNaN(l)?Tc(g):l},d(g){return parseInt(g,10)},
t(g){return parseInt(g,10)},r(g){return parseInt(g,10)},presentationTime(g){return parseInt(g,10)},DEFAULT(g){return g}},Wa=g=>g&&g.attributes?vi(g.attributes).reduce((l,m)=>{l[m.name]=(Fi[m.name]||Fi.DEFAULT)(m.value);return l},{}):{},on={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime",
"urn:mpeg:dash:mp4protection:2011":"mp4protection"},de=(g,l)=>l.length?Sc(g.map(function(m){return l.map(function(r){const w=r.textContent.trim(),a=fb(m.baseUrl,w);r=ab(Wa(r),{baseUrl:a});a!==w&&!r.serviceLocation&&m.serviceLocation&&(r.serviceLocation=m.serviceLocation);return r})})):g,zf=g=>{var l=Ha(g,"SegmentTemplate")[0];const m=Ha(g,"SegmentList")[0],r=m&&Ha(m,"SegmentURL").map(c=>ab({tag:"SegmentURL"},Wa(c)));g=Ha(g,"SegmentBase")[0];var w=m||l;w=w&&Ha(w,"SegmentTimeline")[0];var a=m||g||l;
a=a&&Ha(a,"Initialization")[0];(l=l&&Wa(l))&&a?l.initialization=a&&Wa(a):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});const b={template:l,segmentTimeline:w&&Ha(w,"S").map(c=>Wa(c)),list:m&&ab(Wa(m),{segmentUrls:r,initialization:Wa(a)}),base:g&&ab(Wa(g),{initialization:Wa(a)})};Object.keys(b).forEach(c=>{b[c]||delete b[c]});return b},pn=(g,l,m)=>r=>{var w=Ha(r,"BaseURL");w=de(l,w);const a=ab(g,Wa(r)),b=zf(r);return w.map(c=>({segmentInfo:ab(m,b),attributes:ab(a,c)}))},qn=g=>
g.reduce((l,m)=>{const r=Wa(m);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const w=on[r.schemeIdUri];w&&(l[w]={attributes:r},m=Ha(m,"cenc:pssh")[0])&&(m=m.textContent.trim(),l[w].pssh=m&&zh(m));return l},{}),rn=g=>{if("urn:scte:dash:cc:cea-608:2015"===g.schemeIdUri)return("string"!==typeof g.value?[]:g.value.split(";")).map(l=>{let m,r;r=l;/^CC\d=/.test(l)?[m,r]=l.split("\x3d"):/^CC\d$/.test(l)&&(m=l);return{channel:m,language:r}});if("urn:scte:dash:cc:cea-708:2015"===g.schemeIdUri)return("string"!==
typeof g.value?[]:g.value.split(";")).map(l=>{const m={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(l)){const [r,w=""]=l.split("\x3d");m.channel=r;m.language=l;w.split(",").forEach(a=>{const [b,c]=a.split(":");"lang"===b?m.language=c:"er"===b?m.easyReader=Number(c):"war"===b?m.aspectRatio=Number(c):"3D"===b&&(m["3D"]=Number(c))})}else m.language=l;m.channel&&(m.channel="SERVICE"+m.channel);return m})},sn=g=>Sc(Ha(g.node,"EventStream").map(l=>{const m=Wa(l),r=m.schemeIdUri;
return Ha(l,"Event").map(w=>{const a=Wa(w),b=m.timescale||1,c=(a.presentationTime||0)/b+g.attributes.start;return{schemeIdUri:r,value:m.value,id:a.id,start:c,end:c+(a.duration||0)/b,messageData:w.textContent.trim()||a.messageData,contentEncoding:m.contentEncoding,presentationTimeOffset:m.presentationTimeOffset||0}})})),tn=(g,l,m)=>r=>{var w=Wa(r);const a=de(l,Ha(r,"BaseURL"));var b=Ha(r,"Role")[0];b={role:Wa(b)};w=ab(g,w,b);b=Ha(r,"Accessibility")[0];(b=rn(Wa(b)))&&(w=ab(w,{captionServices:b}));(b=
Ha(r,"Label")[0])&&b.childNodes.length&&(b=b.childNodes[0].nodeValue.trim(),w=ab(w,{label:b}));b=qn(Ha(r,"ContentProtection"));Object.keys(b).length&&(w=ab(w,{contentProtection:b}));b=zf(r);r=Ha(r,"Representation");b=ab(m,b);return Sc(r.map(pn(w,a,b)))},un=(g,l)=>(m,r)=>{r=de(l,Ha(m.node,"BaseURL"));const w=ab(g,{periodStart:m.attributes.start});"number"===typeof m.attributes.duration&&(w.periodDuration=m.attributes.duration);const a=Ha(m.node,"AdaptationSet");m=zf(m.node);return Sc(a.map(tn(w,r,
m)))},vn=(g,l)=>{1<g.length&&l({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"});if(!g.length)return null;g=ab({serverURL:g[0].textContent.trim()},Wa(g[0]));g.queryBeforeStart="true"===g.queryBeforeStart;return g},wn=({attributes:g,priorPeriodAttributes:l,mpdType:m})=>"number"===typeof g.start?g.start:l&&"number"===typeof l.start&&"number"===typeof l.duration?l.start+l.duration:l||"static"!==m?null:0,xn=(g,l={})=>{const {manifestUri:m="",NOW:r=Date.now(),
clientOffset:w=0,eventHandler:a=function(){}}=l;l=Ha(g,"Period");if(!l.length)throw Error("INVALID_NUMBER_OF_PERIOD");const b=Ha(g,"Location"),c=Wa(g),d=de([{baseUrl:m}],Ha(g,"BaseURL"));g=Ha(g,"ContentSteering");c.type=c.type||"static";c.sourceDuration=c.mediaPresentationDuration||0;c.NOW=r;c.clientOffset=w;b.length&&(c.locations=b.map(mn));const e=[];l.forEach((h,n)=>{const u=Wa(h);n=e[n-1];u.start=wn({attributes:u,priorPeriodAttributes:n?n.attributes:null,mpdType:c.type});e.push({node:h,attributes:u})});
return{locations:c.locations,contentSteeringInfo:vn(g,a),representationInfo:Sc(e.map(un(c,d))),eventStream:Sc(e.map(sn))}},Gi=g=>{if(""===g)throw Error("DASH_EMPTY_MANIFEST");const l=new Mm.DOMParser;let m,r;try{r=(m=l.parseFromString(g,"application/xml"))&&"MPD"===m.documentElement.tagName?m.documentElement:null}catch(w){}if(!r||r&&0<r.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return r},yn=g=>{g=Ha(g,"UTCTiming")[0];if(!g)return null;g=Wa(g);switch(g.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":g.method=
"HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":g.method="GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":g.method="DIRECT";g.value=Date.parse(g.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return g},zn=(g,l={})=>{g=xn(Gi(g),l);const m=g.representationInfo.map(ln);return gn({dashPlaylists:m,locations:g.locations,contentSteering:g.contentSteeringInfo,
sidxMapping:l.sidxMapping,previousManifest:l.previousManifest,eventStream:g.eventStream})};var Hh,Gh,Hi,Ii,An=function(){if(Ii)return Hi;Ii=1;var g=hm().getUint64;return Hi=function(l){var m=new DataView(l.buffer,l.byteOffset,l.byteLength),r={version:l[0],flags:new Uint8Array(l.subarray(1,4)),references:[],referenceId:m.getUint32(4),timescale:m.getUint32(8)},w=12;0===r.version?(r.earliestPresentationTime=m.getUint32(w),r.firstOffset=m.getUint32(w+4),w+=8):(r.earliestPresentationTime=g(l.subarray(w)),
r.firstOffset=g(l.subarray(w+8)),w+=16);w+=2;var a=m.getUint16(w);for(w+=2;0<a;w+=12,a--)r.references.push({referenceType:(l[w]&128)>>>7,referencedSize:m.getUint32(w)&2147483647,subsegmentDuration:m.getUint32(w+4),startsWithSap:!!(l[w+8]&128),sapType:(l[w+8]&112)>>>4,sapDeltaTime:m.getUint32(w+8)&268435455});return r}}();const Bn=Xb.getDefaultExportFromCjs(An);var Cn=ia([73,68,51]),sd=function r(l,m){void 0===m&&(m=0);l=ia(l);if(10>l.length-m||!Ga(l,Cn,{offset:m}))return m;var w=m;var a=m;void 0===
a&&(a=0);m=ia(l);var b=m[a+6]<<21|m[a+7]<<14|m[a+8]<<7|m[a+9];m=(m[a+5]&16)>>4?b+20:b+10;m=w+m;return r(l,m)},Ji=function(l){return"string"===typeof l?ri(l):l},Dn=function(l){return Array.isArray(l)?l.map(function(m){return Ji(m)}):[Ji(l)]},En=function a(m,r,w){void 0===w&&(w=!1);r=Dn(r);m=ia(m);var b=[];if(!r.length)return b;for(var c=0;c<m.length;){var d=(m[c]<<24|m[c+1]<<16|m[c+2]<<8|m[c+3])>>>0,e=m.subarray(c+4,c+8);if(0===d)break;d=c+d;if(d>m.length){if(w)break;d=m.length}c=m.subarray(c+8,d);
Ga(e,r[0])&&(1===r.length?b.push(c):b.push.apply(b,a(c,r.slice(1),w)));c=d}return b},Ki=ia([26,69,223,163]),Li=ia([66,130]);ia([24,83,128,103]);ia([21,73,169,102]);ia([22,84,174,107]);ia([174]);ia([215]);ia([35,227,131]);ia([174]);ia([131]);ia([136]);ia([134]);ia([99,162]);ia([224]);ia([225]);ia([31,67,182,117]);ia([231]);ia([42,215,177]);ia([160]);ia([155]);ia([161]);ia([163]);var Af=[128,64,32,16,8,4,2,1],ee=function(m,r,w,a){void 0===w&&(w=!0);void 0===a&&(a=!1);var b=1;for(var c=0;c<Af.length&&
!(m[r]&Af[c]);c++)b++;c=m.subarray(r,r+b);w&&(c=Array.prototype.slice.call(m,r,r+b),c[0]^=Af[b-1]);return{length:b,value:Im(c,{signed:a}),bytes:c}},Mi=function w(r){return"string"===typeof r?r.match(/.{1,2}/g).map(function(a){return w(a)}):"number"===typeof r?Jm(r):r},Fn=function(r){return Array.isArray(r)?r.map(function(w){return Mi(w)}):[Mi(r)]},Gn=function c(w,a,b){if(b>=a.length)return a.length;var d=ee(a,b,!1);if(Ga(w.bytes,d.bytes))return b;var e=ee(a,b+d.length);return c(w,a,b+e.length+e.value+
d.length)},Ni=function c(a,b){b=Fn(b);a=ia(a);var d=[];if(!b.length)return d;for(var e=0;e<a.length;){var h=ee(a,e,!1),n=ee(a,e+h.length),u=e+h.length+n.length;127===n.value&&(n.value=Gn(h,a,u),n.value!==a.length&&(n.value-=u));u=a.subarray(u,u+n.value>a.length?a.length:u+n.value);Ga(b[0],h.bytes)&&(1===b.length?d.push(u):d=d.concat(c(u,b.slice(1))));e+=h.length+n.length+u.length}return d},Hn=ia([0,0,0,1]),In=ia([0,0,1]),Jn=ia([0,0,3]),Oi=function(a,b,c,d){a=ia(a);c=[].concat(c);for(var e=0,h,n=0;e<
a.length&&(n<d||h);){var u=void 0;Ga(a.subarray(e),Hn)?u=4:Ga(a.subarray(e),In)&&(u=3);if(u){n++;if(h){a=a.subarray(h,e);b=[];for(c=1;c<a.length-2;)Ga(a.subarray(c,c+3),Jn)&&(b.push(c+2),c++),c++;if(0!==b.length){d=a.length-b.length;e=new Uint8Array(d);for(c=h=0;c<d;h++,c++)h===b[0]&&(h++,b.shift()),e[c]=a[h];a=e}return a}var t=void 0;"h264"===b?t=a[e+u]&31:"h265"===b&&(t=a[e+u]>>1&63);-1!==c.indexOf(t)&&(h=e+u);e+=u+("h264"===b?1:2)}else e++}return a.subarray(0,0)},rb={webm:ia([119,101,98,109]),
matroska:ia([109,97,116,114,111,115,107,97]),flac:ia([102,76,97,67]),ogg:ia([79,103,103,83]),ac3:ia([11,119]),riff:ia([82,73,70,70]),avi:ia([65,86,73]),wav:ia([87,65,86,69]),"3gp":ia([102,116,121,112,51,103]),mp4:ia([102,116,121,112]),fmp4:ia([115,116,121,112]),mov:ia([102,116,121,112,113,116]),moov:ia([109,111,111,118]),moof:ia([109,111,111,102])},Uc={aac:function(a){var b=sd(a);return Ga(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=sd(a);return Ga(a,[255,2],{offset:b,mask:[255,6]})},
webm:function(a){a=Ni(a,[Ki,Li])[0];return Ga(a,rb.webm)},mkv:function(a){a=Ni(a,[Ki,Li])[0];return Ga(a,rb.matroska)},mp4:function(a){if(Uc["3gp"](a)||Uc.mov(a))return!1;if(Ga(a,rb.mp4,{offset:4})||Ga(a,rb.fmp4,{offset:4})||Ga(a,rb.moof,{offset:4})||Ga(a,rb.moov,{offset:4}))return!0},mov:function(a){return Ga(a,rb.mov,{offset:4})},"3gp":function(a){return Ga(a,rb["3gp"],{offset:4})},ac3:function(a){var b=sd(a);return Ga(a,rb.ac3,{offset:b})},ts:function(a){if(189>a.length&&1<=a.length)return 71===
a[0];for(var b=0;b+188<a.length&&188>b;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=sd(a);return Ga(a,rb.flac,{offset:b})},ogg:function(a){return Ga(a,rb.ogg)},avi:function(a){return Ga(a,rb.riff)&&Ga(a,rb.avi,{offset:8})},wav:function(a){return Ga(a,rb.riff)&&Ga(a,rb.wav,{offset:8})},h264:function(a){return Oi(a,"h264",7,3).length},h265:function(a){return Oi(a,"h265",[32,33],3).length}},Bf=Object.keys(Uc).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts",
"h264","h265"]);Bf.forEach(function(a){var b=Uc[a];Uc[a]=function(c){return b(ia(c))}});var Kn=Uc,Cf=function(a){a=ia(a);for(var b=0;b<Bf.length;b++){var c=Bf[b];if(Kn[c](a))return c}return""},Pi,Qi,Bc=function(){if(Qi)return Pi;Qi=1;var a=function(e){return 9E4*e};var b=function(e,h){return e*h};var c=function(e){return e/9E4};var d=function(e,h){return e/h};return Pi={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:a,secondsToAudioTs:b,videoTsToSeconds:c,audioTsToSeconds:d,audioTsToVideoTs:function(e,h){return a(d(e,
h))},videoTsToAudioTs:function(e,h){return b(c(e),h)},metadataTsToSeconds:function(e,h,n){return c(n?e:e-h)}}}();const fc={},nc=function(a,b){fc[a]=fc[a]||[];b&&(fc[a]=fc[a].concat(b));return fc[a]},Ri=function(a,b){b=nc(a).indexOf(b);if(-1>=b)return!1;fc[a]=fc[a].slice();fc[a].splice(b,1);return!0},Ud={prefixed:!0},fe=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror fullscreen".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror -webkit-full-screen".split(" ")],
Si=fe[0];let td;for(let a=0;a<fe.length;a++)if(fe[a][1]in ca){td=fe[a];break}if(td){for(let a=0;a<td.length;a++)Ud[Si[a]]=td[a];Ud.prefixed=td[0]!==Si[0]}let tb=[];const im=(a,b,c)=>(d,e,h)=>{e=b.levels[e];const n=new RegExp(`^(${e})$`);var u=a;"log"!==d&&h.unshift(d.toUpperCase()+":");c&&(u=`%c${a}`,h.unshift(c));h.unshift(u+":");tb&&(tb.push([].concat(h)),u=tb.length-1E3,tb.splice(0,0<u?u:0));if(J.console&&((u=J.console[d])||"debug"!==d||(u=J.console.info||J.console.log),u&&e&&n.test(d)))u[Array.isArray(h)?
"apply":"call"](J.console,h)},ra=bf("VIDEOJS"),Ti=ra.createLogger,jm=Object.prototype.toString,Ih=function(a){return Mb(a)?Object.keys(a):[]};var Ln=Object.freeze({__proto__:null,each:Kc,reduce:Jh,isObject:Mb,isPlain:Lc,merge:Ca,values:Kh,defineLazyProperty:Sd});let Df=!1,Ui=null,Qb=!1,Vi,Wi=!1,Vc=!1,Wc=!1,Rb=!1,Ef=null,ge=null;const Mn=!!(J.cast&&J.cast.framework&&J.cast.framework.CastReceiverContext);let Xi=null,he=!1,ie=!1,je=!1,ke=!1,le=!1,me=!1,ne=!1;const ud=!(!Mc()||!("ontouchstart"in J||J.navigator.maxTouchPoints||
J.DocumentTouch&&J.document instanceof J.DocumentTouch)),pc=J.navigator&&J.navigator.userAgentData;pc&&pc.platform&&pc.brands&&(Qb="Android"===pc.platform,Vc=!!pc.brands.find(a=>"Microsoft Edge"===a.brand),Wc=!!pc.brands.find(a=>"Chromium"===a.brand),Rb=!Vc&&Wc,Ef=ge=(pc.brands.find(a=>"Chromium"===a.brand)||{}).version||null,ie="Windows"===pc.platform);if(!Wc){const a=J.navigator&&J.navigator.userAgent||"";Df=/iPod/i.test(a);Ui=function(){const b=a.match(/OS (\d+)_/i);return b&&b[1]?b[1]:null}();
Qb=/Android/i.test(a);Vi=function(){const b=a.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!b)return null;const c=b[1]&&parseFloat(b[1]),d=b[2]&&parseFloat(b[2]);return c&&d?parseFloat(b[1]+"."+b[2]):c?c:null}();Wi=/Firefox/i.test(a);Vc=/Edg/i.test(a);Wc=/Chrome/i.test(a)||/CriOS/i.test(a);Rb=!Vc&&Wc;Ef=ge=function(){const b=a.match(/(Chrome|CriOS)\/(\d+)/);return b&&b[2]?parseFloat(b[2]):null}();Xi=function(){var b=/MSIE\s(\d+)\.\d/.exec(a);b=b&&parseFloat(b[1]);!b&&/Trident\/7.0/i.test(a)&&
/rv:11.0/.test(a)&&(b=11);return b}();le=/Tizen/i.test(a);me=/Web0S/i.test(a);ne=le||me;he=/Safari/i.test(a)&&!Rb&&!Qb&&!Vc&&!ne;ie=/Windows/i.test(a);je=/iPad/i.test(a)||he&&ud&&!/iPhone/i.test(a);ke=/iPhone/i.test(a)&&!je}const nb=ke||je||Df,oe=(he||nb)&&!Rb;var Yi=Object.freeze({__proto__:null,get IS_IPOD(){return Df},get IOS_VERSION(){return Ui},get IS_ANDROID(){return Qb},get ANDROID_VERSION(){return Vi},get IS_FIREFOX(){return Wi},get IS_EDGE(){return Vc},get IS_CHROMIUM(){return Wc},get IS_CHROME(){return Rb},
get CHROMIUM_VERSION(){return Ef},get CHROME_VERSION(){return ge},IS_CHROMECAST_RECEIVER:Mn,get IE_VERSION(){return Xi},get IS_SAFARI(){return he},get IS_WINDOWS(){return ie},get IS_IPAD(){return je},get IS_IPHONE(){return ke},get IS_TIZEN(){return le},get IS_WEBOS(){return me},get IS_SMART_TV(){return ne},TOUCH_ENABLED:ud,IS_IOS:nb,IS_ANY_SAFARI:oe});const mc=Mh("querySelector"),Zi=Mh("querySelectorAll");var $i=Object.freeze({__proto__:null,isReal:Mc,isEl:Nc,isInFrame:Lh,createEl:ja,textContent:kc,
prependTo:df,hasClass:ld,addClass:vc,removeClass:Td,toggleClass:Nh,setAttributes:Oh,getAttributes:lc,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},removeAttribute:function(a,b){a.removeAttribute(b)},blockTextSelection:Ph,unblockTextSelection:Qh,getBoundingClientRect:Oc,findPosition:md,getPointerPosition:Vd,isTextNode:Rh,emptyEl:Wd,normalizeContent:Sh,appendContent:cf,insertContent:Th,isSingleLeftClick:nd,$:mc,$$:Zi,computedStyle:Pc,copyStyleSheetsToWindow:Uh});
let Vh=!1,ff;const km=function(){if(!1!==ff.options.autoSetup){var a=Array.prototype.slice.call(ca.getElementsByTagName("video")),b=Array.prototype.slice.call(ca.getElementsByTagName("audio")),c=Array.prototype.slice.call(ca.getElementsByTagName("video-js"));if((a=a.concat(b,c))&&0<a.length)for(let d=0,e=a.length;d<e;d++)if((b=a[d])&&b.getAttribute)void 0===b.player&&null!==b.getAttribute("data-setup")&&ff(b);else{ef(1);break}else Vh||ef(1)}};Mc()&&("complete"===ca.readyState?gf():J.addEventListener("load",
gf));const aj=function(a){const b=ca.createElement("style");b.className=a;return b},bj=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b};var ob=new WeakMap;let Eb=3,pe;const lm=function(){if("boolean"!==typeof pe){pe=!1;try{const a=Object.defineProperty({},"passive",{get(){pe=!0}});J.addEventListener("test",null,a);J.removeEventListener("test",null,a)}catch(a){}}return pe},mm=["touchstart","touchmove"];var Nn=Object.freeze({__proto__:null,fixEvent:Xd,on:wb,off:kb,trigger:Qc,one:Yd,
any:jf});const Ea=function(a,b,c){b.guid||(b.guid=Eb++);a=b.bind(a);a.guid=c?c+"_"+b.guid:b.guid;return a},Sb=function(a,b){let c=J.performance.now();return function(...d){const e=J.performance.now();e-c>=b&&(a(...d),c=e)}},cj=function(a,b,c,d=J){let e;const h=function(){const n=this,u=arguments;let t=function(){t=e=null;c||a.apply(n,u)};!e&&c&&a.apply(n,u);d.clearTimeout(e);e=d.setTimeout(t,b)};h.cancel=()=>{d.clearTimeout(e);e=null};return h};var On=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,
bind_:Ea,throttle:Sb,debounce:cj});let qe;class xb{on(a,b){const c=this.addEventListener;this.addEventListener=()=>{};wb(this,a,b);this.addEventListener=c}off(a,b){kb(this,a,b)}one(a,b){const c=this.addEventListener;this.addEventListener=()=>{};Yd(this,a,b);this.addEventListener=c}any(a,b){const c=this.addEventListener;this.addEventListener=()=>{};jf(this,a,b);this.addEventListener=c}trigger(a){const b=a.type||a;"string"===typeof a&&(a={type:b});a=Xd(a);if(this.allowedEvents_[b]&&this["on"+b])this["on"+
b](a);Qc(this,a)}queueTrigger(a){qe||=new Map;const b=a.type||a;let c=qe.get(this);c||(c=new Map,qe.set(this,c));var d=c.get(b);c.delete(b);J.clearTimeout(d);d=J.setTimeout(()=>{c.delete(b);0===c.size&&(c=null,qe.delete(this));this.trigger(a)},0);c.set(b,d)}}xb.prototype.allowedEvents_={};xb.prototype.addEventListener=xb.prototype.on;xb.prototype.removeEventListener=xb.prototype.off;xb.prototype.dispatchEvent=xb.prototype.trigger;const re=a=>"function"===typeof a.name?a.name():"string"===typeof a.name?
a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a,dc=a=>a instanceof xb||!!a.eventBusEl_&&["on","one","off","trigger"].every(b=>"function"===typeof a[b]),Pn=(a,b)=>{dc(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},Ff=a=>"string"===typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length,se=(a,b,c)=>{if(!a||!a.nodeName&&!dc(a))throw Error(`Invalid target for ${re(b)}#${c}; must be a DOM node or evented object.`);},dj=(a,b,c)=>{if(!Ff(a))throw Error(`Invalid event type for ${re(b)}#${c}; must be a non-empty string or array.`);
},ej=(a,b,c)=>{if("function"!==typeof a)throw Error(`Invalid listener for ${re(b)}#${c}; must be a function.`);},Gf=(a,b,c)=>{const d=3>b.length||b[0]===a||b[0]===a.eventBusEl_;let e,h;d?(e=a.eventBusEl_,3<=b.length&&b.shift(),[h,b]=b):(e=b[0],h=b[1],b=b[2]);se(e,a,c);dj(h,a,c);ej(b,a,c);b=Ea(a,b);return{isTargetingSelf:d,target:e,type:h,listener:b}},Cc=(a,b,c,d)=>{se(a,a,b);if(a.nodeName)Nn[b](a,c,d);else a[b](c,d)},nm={on(...a){const {isTargetingSelf:b,target:c,type:d,listener:e}=Gf(this,a,"on");
Cc(c,"on",d,e);if(!b){const h=()=>this.off(c,d,e);h.guid=e.guid;a=()=>this.off("dispose",h);a.guid=e.guid;Cc(this,"on","dispose",h);Cc(c,"on","dispose",a)}},one(...a){const {isTargetingSelf:b,target:c,type:d,listener:e}=Gf(this,a,"one");if(b)Cc(c,"one",d,e);else{const h=(...n)=>{this.off(c,d,h);e.apply(null,n)};h.guid=e.guid;Cc(c,"one",d,h)}},any(...a){const {isTargetingSelf:b,target:c,type:d,listener:e}=Gf(this,a,"any");if(b)Cc(c,"any",d,e);else{const h=(...n)=>{this.off(c,d,h);e.apply(null,n)};
h.guid=e.guid;Cc(c,"any",d,h)}},off(a,b,c){!a||Ff(a)?kb(this.eventBusEl_,a,b):(se(a,this,"off"),dj(b,this,"off"),ej(c,this,"off"),c=Ea(this,c),this.off("dispose",c),a.nodeName?(kb(a,b,c),kb(a,"dispose",c)):dc(a)&&(a.off(b,c),a.off("dispose",c)))},trigger(a,b){se(this.eventBusEl_,this,"trigger");if(!Ff(a&&"string"!==typeof a?a.type:a))throw Error(`Invalid event type for ${re(this)}#trigger; `+"must be a non-empty string or object with a type key that has a non-empty value.");return Qc(this.eventBusEl_,
a,b)}},om={state:{},setState(a){"function"===typeof a&&(a=a());let b;Kc(a,(c,d)=>{this.state[d]!==c&&(b=b||{},b[d]={from:this.state[d],to:c});this.state[d]=c});b&&dc(this)&&this.trigger({changes:b,type:"statechanged"});return b}},vd=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toLowerCase())},Pa=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toUpperCase())},fj=function(a,b){return Pa(a)===Pa(b)};var Qn=Object.freeze({__proto__:null,toLowerCase:vd,toTitleCase:Pa,titleCaseEquals:fj});
class V{constructor(a,b,c){this.player_=!a&&this.play?a=this:a;this.isDisposed_=!1;this.parentComponent_=null;this.options_=Ca({},this.options_);b=this.options_=Ca(this.options_,b);this.id_=b.id||b.el&&b.el.id;this.id_||(this.id_=`${a&&a.id&&a.id()||"no_player"}_component_${Eb++}`);this.name_=b.name||null;b.el?this.el_=b.el:!1!==b.createEl&&(this.el_=this.createEl());b.className&&this.el_&&b.className.split(" ").forEach(d=>this.addClass(d));["on","off","one","any","trigger"].forEach(d=>{this[d]=void 0});
!1!==b.evented&&(kf(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange));Xh(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new Set;this.setIntervalIds_=new Set;this.rafIds_=new Set;this.namedRafs_=new Map;this.clearingTimersOnDispose_=!1;!1!==b.initChildren&&this.initChildren();this.ready(c);!1!==b.reportTouchActivity&&
this.enableTouchActivity()}dispose(a={}){if(!this.isDisposed_){this.readyQueue_&&(this.readyQueue_.length=0);this.trigger({type:"dispose",bubbles:!1});this.isDisposed_=!0;if(this.children_)for(let b=this.children_.length-1;0<=b;b--)this.children_[b].dispose&&this.children_[b].dispose();this.parentComponent_=this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&(a.restoreEl?this.el_.parentNode.replaceChild(a.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),
this.el_=null);this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(a){return a?this.options_=Ca(this.options_,a):this.options_}el(){return this.el_}createEl(a,b,c){return ja(a,b,c)}localize(a,b,c=a){var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages();const h=e&&e[d];d=d&&d.split("-")[0];e=e&&e[d];h&&h[a]?c=h[a]:e&&e[a]&&(c=e[a]);b&&(c=c.replace(/\{(\d+)\}/g,function(n,u){let t=u=b[u-1];"undefined"===typeof u&&
(t=n);return t}));return c}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(a){return this.childIndex_[a]}getChild(a){if(a)return this.childNameIndex_[a]}getDescendant(...a){a=a.reduce((c,d)=>c.concat(d),[]);let b=this;for(let c=0;c<a.length;c++)if(b=b.getChild(a[c]),!b||!b.getChild)return;return b}setIcon(a,b=this.el()){if(this.player_.options_.experimentalSvgIcons){var c=ja("span",{className:"vjs-icon-placeholder vjs-svg-icon"},
{"aria-hidden":"true"}),d=ca.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"viewBox","0 0 512 512");var e=ca.createElementNS("http://www.w3.org/2000/svg","use");d.appendChild(e);e.setAttributeNS(null,"href",`#vjs-icon-${a}`);c.appendChild(d);this.iconIsSet_?b.replaceChild(c,b.querySelector(".vjs-icon-placeholder")):b.appendChild(c);this.iconIsSet_=!0;return c}}addChild(a,b={},c=this.children_.length){if("string"===typeof a){var d=Pa(a);a=b.componentClass||d;b.name=d;const e=
V.getComponent(a);if(!e)throw Error(`Component ${a} does not exist`);if("function"!==typeof e)return null;b=new e(this.player_||this,b)}else b=a;b.parentComponent_&&b.parentComponent_.removeChild(b);this.children_.splice(c,0,b);b.parentComponent_=this;"function"===typeof b.id&&(this.childIndex_[b.id()]=b);if(d=d||b.name&&Pa(b.name()))this.childNameIndex_[d]=b,this.childNameIndex_[vd(d)]=b;"function"===typeof b.el&&b.el()&&(d=null,this.children_[c+1]&&(this.children_[c+1].el_?d=this.children_[c+1].el_:
Nc(this.children_[c+1])&&(d=this.children_[c+1])),this.contentEl().insertBefore(b.el(),d));return b}removeChild(a){"string"===typeof a&&(a=this.getChild(a));if(a&&this.children_){var b=!1;for(let c=this.children_.length-1;0<=c;c--)if(this.children_[c]===a){b=!0;this.children_.splice(c,1);break}b&&(a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[Pa(a.name())]=null,this.childNameIndex_[vd(a.name())]=null,(b=a.el())&&b.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el()))}}initChildren(){const a=
this.options_.children;if(a){const b=this.options_;let c;const d=V.getComponent("Tech");c=Array.isArray(a)?a:Object.keys(a);c.concat(Object.keys(this.options_).filter(function(e){return!c.some(function(h){return"string"===typeof h?e===h:e===h.name})})).map(e=>{let h;"string"===typeof e?(h=e,e=a[h]||this.options_[h]||{}):h=e.name;return{name:h,opts:e}}).filter(e=>(e=V.getComponent(e.opts.componentClass||Pa(e.name)))&&!d.isTech(e)).forEach(e=>{const h=e.name;e=e.opts;void 0!==b[h]&&(e=b[h]);!1!==e&&
(!0===e&&(e={}),e.playerOptions=this.options_.playerOptions,(e=this.addChild(h,e))&&(this[h]=e))})}}buildCSSClass(){return""}ready(a,b=!1){a&&(this.isReady_?b?a.call(this):this.setTimeout(a,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(a)))}triggerReady(){this.isReady_=!0;this.setTimeout(function(){const a=this.readyQueue_;this.readyQueue_=[];a&&0<a.length&&a.forEach(function(b){b.call(this)},this);this.trigger("ready")},1)}$(a,b){return mc(a,b||this.contentEl())}$$(a,b){return Zi(a,
b||this.contentEl())}hasClass(a){return ld(this.el_,a)}addClass(...a){vc(this.el_,...a)}removeClass(...a){Td(this.el_,...a)}toggleClass(a,b){Nh(this.el_,a,b)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(a){return this.el_.getAttribute(a)}setAttribute(a,b){this.el_.setAttribute(a,b)}removeAttribute(a){this.el_.removeAttribute(a)}width(a,b){return this.dimension("width",
a,b)}height(a,b){return this.dimension("height",a,b)}dimensions(a,b){this.width(a,!0);this.height(b)}dimension(a,b,c){if(void 0!==b){if(null===b||b!==b)b=0;-1!==(""+b).indexOf("%")||-1!==(""+b).indexOf("px")?this.el_.style[a]=b:this.el_.style[a]="auto"===b?"":b+"px";c||this.trigger("componentresize")}else{if(!this.el_)return 0;b=this.el_.style[a];c=b.indexOf("px");return-1!==c?parseInt(b.slice(0,c),10):parseInt(this.el_["offset"+Pa(a)],10)}}currentDimension(a){let b=0;if("width"!==a&&"height"!==a)throw Error("currentDimension only accepts width or height value");
b=Pc(this.el_,a);b=parseFloat(b);if(0===b||isNaN(b))a=`offset${Pa(a)}`,b=this.el_[a];return b}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const a=this.el_.getBoundingClientRect();return{boundingClientRect:{x:a.x,y:a.y,width:a.width,height:a.height,top:a.top,right:a.right,bottom:a.bottom,left:a.left},center:{x:a.left+
a.width/2,y:a.top+a.height/2,width:0,height:0,top:a.top+a.height/2,right:a.left+a.width/2,bottom:a.top+a.height/2,left:a.left+a.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(a){this.player_&&("Tab"===a.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||a.stopPropagation(),this.player_.handleKeyDown(a))}handleKeyPress(a){this.handleKeyDown(a)}emitTapEvents(){let a=0,b=null,c;this.on("touchstart",function(e){1===
e.touches.length&&(b={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},a=J.performance.now(),c=!0)});this.on("touchmove",function(e){if(1<e.touches.length)c=!1;else if(b){const h=e.touches[0].pageX-b.pageX;e=e.touches[0].pageY-b.pageY;10<Math.sqrt(h*h+e*e)&&(c=!1)}});const d=function(){c=!1};this.on("touchleave",d);this.on("touchcancel",d);this.on("touchend",function(e){b=null;!0===c&&200>J.performance.now()-a&&(e.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){var a=
Ea(this.player(),this.player().reportUserActivity),b;this.on("touchstart",function(){a();this.clearInterval(b);b=this.setInterval(a,250)});var c=function(d){a();this.clearInterval(b)};this.on("touchmove",a);this.on("touchend",c);this.on("touchcancel",c)}}setTimeout(a,b){a=Ea(this,a);this.clearTimersOnDispose_();var c=J.setTimeout(()=>{this.setTimeoutIds_.has(c)&&this.setTimeoutIds_.delete(c);a()},b);this.setTimeoutIds_.add(c);return c}clearTimeout(a){this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_.delete(a),
J.clearTimeout(a));return a}setInterval(a,b){a=Ea(this,a);this.clearTimersOnDispose_();a=J.setInterval(a,b);this.setIntervalIds_.add(a);return a}clearInterval(a){this.setIntervalIds_.has(a)&&(this.setIntervalIds_.delete(a),J.clearInterval(a));return a}requestAnimationFrame(a){this.clearTimersOnDispose_();a=Ea(this,a);var b=J.requestAnimationFrame(()=>{this.rafIds_.has(b)&&this.rafIds_.delete(b);a()});this.rafIds_.add(b);return b}requestNamedAnimationFrame(a,b){this.namedRafs_.has(a)&&this.cancelNamedAnimationFrame(a);
this.clearTimersOnDispose_();b=Ea(this,b);const c=this.requestAnimationFrame(()=>{b();this.namedRafs_.has(a)&&this.namedRafs_.delete(a)});this.namedRafs_.set(a,c);return a}cancelNamedAnimationFrame(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),this.namedRafs_.delete(a))}cancelAnimationFrame(a){this.rafIds_.has(a)&&(this.rafIds_.delete(a),J.cancelAnimationFrame(a));return a}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",
()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([a,b])=>{this[a].forEach((c,d)=>this[b](d))});this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(a){return 0<=(a||this.el_).tabIndex&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(a){function b(d){d=
J.getComputedStyle(d,null);const e=d.getPropertyValue("visibility"),h=["hidden","collapse"];return"none"!==d.getPropertyValue("display")&&!h.includes(e)}function c(d){return b(d.parentElement)&&b(d)&&"0"!==d.style.opacity&&"0px"!==J.getComputedStyle(d).height&&"0px"!==J.getComputedStyle(d).width?!0:!1}a||=this.el();return function(d){if(0===d.offsetWidth+d.offsetHeight+d.getBoundingClientRect().height+d.getBoundingClientRect().width)return!1;var e=d.getBoundingClientRect().left+d.offsetWidth/2,h=
d.getBoundingClientRect().top+d.offsetHeight/2;if(0>e||e>(ca.documentElement.clientWidth||J.innerWidth)||0>h||h>(ca.documentElement.clientHeight||J.innerHeight))return!1;for(e=ca.elementFromPoint(e,h);e;){if(e===d)return!0;if(e.parentNode)e=e.parentNode;else return!1}}(a)&&c(a)&&(!a.parentElement||0<=a.tabIndex)?!0:!1}static registerComponent(a,b){if("string"!==typeof a||!a)throw Error(`Illegal component name, "${a}"; must be a non-empty string.`);var c=V.getComponent("Tech");c=c&&c.isTech(b);const d=
V===b||V.prototype.isPrototypeOf(b.prototype);if(c||!d)throw Error(`Illegal component, "${a}"; ${c?"techs must be registered using Tech.registerTech()":"must be a Component subclass"}.`);a=Pa(a);V.components_||(V.components_={});c=V.getComponent("Player");if("Player"===a&&c&&c.players){const e=c.players;c=Object.keys(e);if(e&&0<c.length&&c.map(h=>e[h]).every(Boolean))throw Error("Can not register Player component after player has been created.");}V.components_[a]=b;return V.components_[vd(a)]=b}static getComponent(a){if(a&&
V.components_)return V.components_[a]}}V.registerComponent("Component",V);const ai=function(a,b){a=0>a?0:a;let c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600);const h=Math.floor(b/60%60);b=Math.floor(b/3600);if(isNaN(a)||Infinity===a)e=d=c="-";e=0<e||0<b?e+":":"";return e+(((e||10<=h)&&10>d?"0"+d:d)+":")+(10>c?"0"+c:c)};let mf=ai;var Rn=Object.freeze({__proto__:null,createTimeRanges:Hb,createTimeRange:Hb,setFormatTime:Zh,resetFormatTime:$h,formatTime:wc});La.prototype.code=0;La.prototype.message=
"";La.prototype.status=null;La.prototype.metadata=null;La.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");La.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",
5:"The media is encrypted and we do not have the keys to decrypt it."};La.MEDIA_ERR_CUSTOM=0;La.prototype.MEDIA_ERR_CUSTOM=0;La.MEDIA_ERR_ABORTED=1;La.prototype.MEDIA_ERR_ABORTED=1;La.MEDIA_ERR_NETWORK=2;La.prototype.MEDIA_ERR_NETWORK=2;La.MEDIA_ERR_DECODE=3;La.prototype.MEDIA_ERR_DECODE=3;La.MEDIA_ERR_SRC_NOT_SUPPORTED=4;La.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;La.MEDIA_ERR_ENCRYPTED=5;La.prototype.MEDIA_ERR_ENCRYPTED=5;const Hf=function(a){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce((b,
c,d)=>{a[c]&&(b[c]=a[c]);return b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(b){return{startTime:b.startTime,endTime:b.endTime,text:b.text,id:b.id}})})};var gj={textTracksToJson:function(a){const b=a.$$("track"),c=Array.prototype.map.call(b,d=>d.track);return Array.prototype.map.call(b,function(d){const e=Hf(d.track);d.src&&(e.src=d.src);return e}).concat(Array.prototype.filter.call(a.textTracks(),function(d){return-1===c.indexOf(d)}).map(Hf))},jsonToTextTracks:function(a,b){a.forEach(function(c){const d=
b.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(e=>d.addCue(e))});return b.textTracks()},trackToJson_:Hf};class Xc extends V{constructor(a,b){super(a,b);this.handleKeyDown_=c=>this.handleKeyDown(c);this.close_=c=>this.close(c);this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1;this.closeable(!this.options_.uncloseable);this.content(this.options_.content);this.contentEl_=ja("div",{className:"vjs-modal-dialog-content"},{role:"document"});this.descEl_=ja("p",{className:"vjs-modal-dialog-description vjs-control-text",
id:this.el().getAttribute("aria-describedby")});kc(this.descEl_,this.description());this.el_.appendChild(this.descEl_);this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;super.dispose()}buildCSSClass(){return`${"vjs-modal-dialog"} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||
"Modal Window")}description(){let a=this.options_.description||this.localize("This is a modal window.");this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return a}open(){if(this.opened_)this.options_.fillAlways&&this.fill();else{var a=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!a.paused();this.options_.pauseOnOpen&&
this.wasPlaying_&&a.pause();this.on("keydown",this.handleKeyDown_);this.hadControls_=a.controls();a.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}}opened(a){if("boolean"===typeof a)this[a?"open":"close"]();return this.opened_}close(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&a.play();this.off("keydown",this.handleKeyDown_);
this.hadControls_&&a.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger({type:"modalclose",bubbles:!0});this.conditionalBlur_();this.options_.temporary&&this.dispose()}}closeable(a){if("boolean"===typeof a){a=this.closeable_=!!a;let b=this.getChild("closeButton");if(a&&!b){const c=this.contentEl_;this.contentEl_=this.el_;b=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=c;this.on(b,"close",this.close_)}!a&&b&&(this.off(b,"close",this.close_),
this.removeChild(b),b.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(a){const b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;c.removeChild(b);this.empty();Th(b,a);this.trigger("modalfill");d?c.insertBefore(b,d):c.appendChild(b);(a=this.getChild("closeButton"))&&c.appendChild(a.el_);this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty");Wd(this.contentEl());this.trigger("modalempty")}content(a){"undefined"!==
typeof a&&(this.content_=a);return this.content_}conditionalFocus_(){const a=ca.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null;if(b.contains(a)||b===a)this.previouslyActiveEl_=a,this.focus()}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(a){this.trigger({type:"modalKeydown",originalEvent:a,target:this,bubbles:!0});a.stopPropagation();if("Escape"===a.key&&this.closeable())a.preventDefault(),this.close();else if("Tab"===
a.key){var b=this.focusableEls_(),c=this.el_.querySelector(":focus");for(let e=0;e<b.length;e++)if(c===b[e]){var d=e;break}ca.activeElement===this.el_&&(d=0);a.shiftKey&&0===d?(b[b.length-1].focus(),a.preventDefault()):a.shiftKey||d!==b.length-1||(b[0].focus(),a.preventDefault())}}focusableEls_(){const a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,b=>(b instanceof J.HTMLAnchorElement||b instanceof J.HTMLAreaElement)&&b.hasAttribute("href")||(b instanceof J.HTMLInputElement||
b instanceof J.HTMLSelectElement||b instanceof J.HTMLTextAreaElement||b instanceof J.HTMLButtonElement)&&!b.hasAttribute("disabled")||b instanceof J.HTMLIFrameElement||b instanceof J.HTMLObjectElement||b instanceof J.HTMLEmbedElement||b.hasAttribute("tabindex")&&-1!==b.getAttribute("tabindex")||b.hasAttribute("contenteditable"))}}Xc.prototype.options_={pauseOnOpen:!0,temporary:!0};V.registerComponent("ModalDialog",Xc);class Yc extends xb{constructor(a=[]){super();this.tracks_=[];Object.defineProperty(this,
"length",{get(){return this.tracks_.length}});for(let b=0;b<a.length;b++)this.addTrack(a[b])}addTrack(a){const b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.tracks_[b]}});-1===this.tracks_.indexOf(a)&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this}));a.labelchange_=()=>{this.trigger({track:a,type:"labelchange",target:this})};dc(a)&&a.addEventListener("labelchange",a.labelchange_)}removeTrack(a){let b;for(let c=0,d=this.length;c<d;c++)if(this[c]===
a){b=this[c];b.off&&b.off();this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})}getTrackById(a){let b=null;for(let c=0,d=this.length;c<d;c++){const e=this[c];if(e.id===a){b=e;break}}return b}}Yc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const a in Yc.prototype.allowedEvents_)Yc.prototype["on"+a]=null;const If=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&
(a[c].enabled=!1)};class Sn extends Yc{constructor(a=[]){for(let b=a.length-1;0<=b;b--)if(a[b].enabled){If(a,a[b]);break}super(a);this.changing_=!1}addTrack(a){a.enabled&&If(this,a);super.addTrack(a);a.addEventListener&&(a.enabledChange_=()=>{this.changing_||(this.changing_=!0,If(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("enabledchange",a.enabledChange_))}removeTrack(a){super.removeTrack(a);a.removeEventListener&&a.enabledChange_&&(a.removeEventListener("enabledchange",
a.enabledChange_),a.enabledChange_=null)}}const Jf=function(a,b){for(let c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)};class Tn extends Yc{constructor(a=[]){for(let b=a.length-1;0<=b;b--)if(a[b].selected){Jf(a,a[b]);break}super(a);this.changing_=!1;Object.defineProperty(this,"selectedIndex",{get(){for(let b=0;b<this.length;b++)if(this[b].selected)return b;return-1},set(){}})}addTrack(a){a.selected&&Jf(this,a);super.addTrack(a);a.addEventListener&&(a.selectedChange_=
()=>{this.changing_||(this.changing_=!0,Jf(this,a),this.changing_=!1,this.trigger("change"))},a.addEventListener("selectedchange",a.selectedChange_))}removeTrack(a){super.removeTrack(a);a.removeEventListener&&a.selectedChange_&&(a.removeEventListener("selectedchange",a.selectedChange_),a.selectedChange_=null)}}class hj extends Yc{addTrack(a){super.addTrack(a);this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change"));this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=
()=>this.trigger("selectedlanguagechange"));a.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(a.kind)&&a.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(a){super.removeTrack(a);a.removeEventListener&&(this.queueChange_&&a.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&a.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class Un{constructor(a=[]){this.trackElements_=[];Object.defineProperty(this,
"length",{get(){return this.trackElements_.length}});for(let b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}addTrackElement_(a){const b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get(){return this.trackElements_[b]}});-1===this.trackElements_.indexOf(a)&&this.trackElements_.push(a)}getTrackElementByTrack_(a){let b;for(let c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b}removeTrackElement_(a){for(let b=
0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"===typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off();"function"===typeof this.trackElements_[b].off&&this.trackElements_[b].off();this.trackElements_.splice(b,1);break}}}class Kf{constructor(a){Kf.prototype.setCues_.call(this,a);Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(a){const b=this.length||0;let c=0;const d=a.length;this.cues_=
a;this.length_=a.length;a=function(e){""+e in this||Object.defineProperty(this,""+e,{get(){return this.cues_[e]}})};if(b<d)for(c=b;c<d;c++)a.call(this,c)}getCueById(a){let b=null;for(let c=0,d=this.length;c<d;c++){const e=this[c];if(e.id===a){b=e;break}}return b}}const Vn={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Wn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",
commentary:"commentary"},Xn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ij={disabled:"disabled",hidden:"hidden",showing:"showing"};class Lf extends xb{constructor(a={}){super();const b={id:a.id||"vjs_track_"+Eb++,kind:a.kind||"",language:a.language||""};let c=a.label||"";for(const d in b)Object.defineProperty(this,d,{get(){return b[d]},set(){}});Object.defineProperty(this,"label",{get(){return c},set(d){d!==c&&(c=d,this.trigger("labelchange"))}})}}
const Mf=function(a){return new URL(a,ca.baseURI)},jj=function(a){return(new URL(a,ca.baseURI)).href},Nf=function(a){return"string"===typeof a&&(a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(a))?a.pop().toLowerCase():""},te=function(a,b=J.location){return Mf(a).origin!==b.origin};var Yn=Object.freeze({__proto__:null,parseUrl:Mf,getAbsoluteURL:jj,getFileExtension:Nf,isCrossOrigin:te});const kj=function(a,b){const c=new J.WebVTT.Parser(J,J.vttjs,J.WebVTT.StringDecoder()),
d=[];c.oncue=function(e){b.addCue(e)};c.onparsingerror=function(e){d.push(e)};c.onflush=function(){b.trigger({type:"loadeddata",target:b})};c.parse(a);0<d.length&&(J.console&&J.console.groupCollapsed&&J.console.groupCollapsed(`Text Track parsing errors for ${b.src}`),d.forEach(e=>ra.error(e)),J.console&&J.console.groupEnd&&J.console.groupEnd());c.flush()},lj=function(a,b){const c={uri:a};if(a=te(a))c.cors=a;if(a="use-credentials"===b.tech_.crossOrigin())c.withCredentials=a;ii(c,Ea(this,function(d,
e,h){if(d)return ra.error(d,e);b.loaded_=!0;"function"!==typeof J.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],n=>{if("vttjserror"===n.type)ra.error(`vttjs failed to load, stopping trying to process ${b.src}`);else return kj(h,b)}):kj(h,b)}))};class wd extends Lf{constructor(a={}){if(!a.tech)throw Error("A tech was not provided.");a=Ca(a,{kind:Xn[a.kind]||"subtitles",language:a.language||a.srclang||""});let b=ij[a.mode]||"disabled";const c=a.default;if("metadata"===a.kind||"chapters"===
a.kind)b="hidden";super(a);this.tech_=a.tech;this.cues_=[];this.activeCues_=[];this.preload_=!1!==this.tech_.preloadTextTracks;const d=new Kf(this.cues_),e=new Kf(this.activeCues_);let h=!1;this.timeupdateHandler=Ea(this,function(n={}){this.tech_.isDisposed()||(this.tech_.isReady_&&(this.activeCues=this.activeCues,h&&(this.trigger("cuechange"),h=!1)),"timeupdate"!==n.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))});this.tech_.one("dispose",()=>{this.stopTracking()});
"disabled"!==b&&this.startTracking();Object.defineProperties(this,{default:{get(){return c},set(){}},mode:{get(){return b},set(n){ij[n]&&b!==n&&(b=n,this.preload_||"disabled"===b||0!==this.cues.length||lj(this.src,this),this.stopTracking(),"disabled"!==b&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?d:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return e;var n=this.tech_.currentTime();const u=[];for(let t=0,A=this.cues.length;t<
A;t++){const F=this.cues[t];F.startTime<=n&&F.endTime>=n&&u.push(F)}h=!1;if(u.length!==this.activeCues_.length)h=!0;else for(n=0;n<u.length;n++)-1===this.activeCues_.indexOf(u[n])&&(h=!0);this.activeCues_=u;e.setCues_(this.activeCues_);return e},set(){}}});a.src?(this.src=a.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==a.kind&&"captions"!==a.kind)&&lj(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);this.tech_.on("timeupdate",
this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0);this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(a){let b=a;if(!("getCueAsHTML"in b)){b=new J.vttjs.VTTCue(a.startTime,a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id;b.originalCue_=a}a=this.tech_.textTracks();for(c=0;c<a.length;c++)a[c]!==this&&a[c].removeCue(b);this.cues_.push(b);this.cues.setCues_(this.cues_)}removeCue(a){let b=this.cues_.length;for(;b--;){const c=
this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1);this.cues.setCues_(this.cues_);break}}}}wd.prototype.allowedEvents_={cuechange:"cuechange"};class mj extends Lf{constructor(a={}){a=Ca(a,{kind:Wn[a.kind]||""});super(a);let b=!1;Object.defineProperty(this,"enabled",{get(){return b},set(c){"boolean"===typeof c&&c!==b&&(b=c,this.trigger("enabledchange"))}});a.enabled&&(this.enabled=a.enabled);this.loaded_=!0}}class nj extends Lf{constructor(a={}){a=Ca(a,{kind:Vn[a.kind]||
""});super(a);let b=!1;Object.defineProperty(this,"selected",{get(){return b},set(c){"boolean"===typeof c&&c!==b&&(b=c,this.trigger("selectedchange"))}});a.selected&&(this.selected=a.selected)}}class qc extends xb{constructor(a={}){super();let b;const c=new wd(a);this.kind=c.kind;this.src=c.src;this.srclang=c.language;this.label=c.label;this.default=c.default;Object.defineProperties(this,{readyState:{get(){return b}},track:{get(){return c}}});b=qc.NONE;c.addEventListener("loadeddata",()=>{b=qc.LOADED;
this.trigger({type:"load",target:this})})}}qc.prototype.allowedEvents_={load:"load"};qc.NONE=0;qc.LOADING=1;qc.LOADED=2;qc.ERROR=3;const Fb={audio:{ListClass:Sn,TrackClass:mj,capitalName:"Audio"},video:{ListClass:Tn,TrackClass:nj,capitalName:"Video"},text:{ListClass:hj,TrackClass:wd,capitalName:"Text"}};Object.keys(Fb).forEach(function(a){Fb[a].getterName=`${a}Tracks`;Fb[a].privateName=`${a}Tracks_`});const Zc={remoteText:{ListClass:hj,TrackClass:wd,capitalName:"RemoteText",getterName:"remoteTextTracks",
privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Un,TrackClass:qc,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},pb=Object.assign({},Fb,Zc);Zc.names=Object.keys(Zc);Fb.names=Object.keys(Fb);pb.names=[].concat(Zc.names).concat(Fb.names);class ma extends V{constructor(a={},b=function(){}){a.reportTouchActivity=!1;super(null,a,b);this.onDurationChange_=c=>this.onDurationChange(c);this.trackProgress_=c=>this.trackProgress(c);this.trackCurrentTime_=
c=>this.trackCurrentTime(c);this.stopTrackingCurrentTime_=c=>this.stopTrackingCurrentTime(c);this.disposeSourceHandler_=c=>this.disposeSourceHandler(c);this.queuedHanders_=new Set;this.hasStarted_=!1;this.on("playing",function(){this.hasStarted_=!0});this.on("loadstart",function(){this.hasStarted_=!1});pb.names.forEach(c=>{c=pb[c];a&&a[c.getterName]&&(this[c.privateName]=a[c.getterName])});this.featuresProgressEvents||this.manualProgressOn();this.featuresTimeupdateEvents||this.manualTimeUpdatesOn();
["Text","Audio","Video"].forEach(c=>{!1===a[`native${c}Tracks`]&&(this[`featuresNative${c}Tracks`]=!1)});if(!1===a.nativeCaptions||!1===a.nativeTextTracks)this.featuresNativeTextTracks=!1;else if(!0===a.nativeCaptions||!0===a.nativeTextTracks)this.featuresNativeTextTracks=!0;this.featuresNativeTextTracks||this.emulateTextTracks();this.preloadTextTracks=!1!==a.preloadTextTracks;this.autoRemoteTextTracks_=new pb.text.ListClass;this.initTrackListeners();a.nativeControlsForTouch||this.emitTapEvents();
this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(a){if(!this.isReady_)this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(a),1));this.trigger({src:a,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_);this.manualProgress=!0;this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange_)}trackProgress(a){this.stopTrackingProgress();
this.progressInterval=this.setInterval(Ea(this,function(){const b=this.bufferedPercent();this.bufferedPercent_!==b&&this.trigger("progress");this.bufferedPercent_=b;1===b&&this.stopTrackingProgress()}),500)}onDurationChange(a){this.duration_=this.duration()}buffered(){return Hb(0,0)}bufferedPercent(){return bi(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime_);this.on("pause",
this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime_);this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",
target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Fb.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();super.dispose()}clearTracks(a){a=[].concat(a);a.forEach(b=>{const c=this[`${b}Tracks`]()||[];let d=c.length;for(;d--;){const e=c[d];"text"===b&&this.removeRemoteTextTrack(e);c.removeTrack(e)}})}cleanupAutoTextTracks(){const a=this.autoRemoteTextTracks_||[];let b=a.length;for(;b--;)this.removeRemoteTextTrack(a[b])}reset(){}crossOrigin(){}setCrossOrigin(){}error(a){void 0!==
a&&(this.error_=new La(a),this.trigger("error"));return this.error_}played(){return this.hasStarted_?Hb(0,0):Hb()}play(){}setScrubbing(a){}scrubbing(){}setCurrentTime(a){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Fb.names.forEach(a=>{const b=()=>{this.trigger(`${a}trackchange`)},c=this[Fb[a].getterName]();c.addEventListener("removetrack",b);c.addEventListener("addtrack",b);this.on("dispose",()=>{c.removeEventListener("removetrack",
b);c.removeEventListener("addtrack",b)})})}addWebVttScript_(){if(!J.WebVTT)if(ca.body.contains(this.el()))if(!this.options_["vtt.js"]&&Lc(ki)&&0<Object.keys(ki).length)this.trigger("vttjsloaded");else{var a=ca.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";a.onload=()=>{this.trigger("vttjsloaded")};a.onerror=()=>{this.trigger("vttjserror")};this.on("dispose",()=>{a.onload=null;a.onerror=null});J.WebVTT=!0;this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const a=
this.textTracks(),b=this.remoteTextTracks(),c=n=>a.addTrack(n.track),d=n=>a.removeTrack(n.track);b.on("addtrack",c);b.on("removetrack",d);this.addWebVttScript_();const e=()=>this.trigger("texttrackchange"),h=()=>{e();for(let n=0;n<a.length;n++){const u=a[n];u.removeEventListener("cuechange",e);"showing"===u.mode&&u.addEventListener("cuechange",e)}};h();a.addEventListener("change",h);a.addEventListener("addtrack",h);a.addEventListener("removetrack",h);this.on("dispose",function(){b.off("addtrack",
c);b.off("removetrack",d);a.removeEventListener("change",h);a.removeEventListener("addtrack",h);a.removeEventListener("removetrack",h);for(let n=0;n<a.length;n++)a[n].removeEventListener("cuechange",e)})}addTextTrack(a,b,c){if(!a)throw Error("TextTrack kind is required but was not provided");return pm(this,a,b,c)}createRemoteTextTrack(a){a=Ca(a,{tech:this});return new Zc.remoteTextEl.TrackClass(a)}addRemoteTextTrack(a={},b){const c=this.createRemoteTextTrack(a);"boolean"!==typeof b&&(b=!1);this.remoteTextTrackEls().addTrackElement_(c);
this.remoteTextTracks().addTrack(c.track);!1===b&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(c.track));return c}removeRemoteTextTrack(a){const b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b);this.remoteTextTracks().removeTrack(a);this.autoRemoteTextTracks_.removeTrack(a)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(a){const b=
Eb++;!this.isReady_||this.paused()?(this.queuedHanders_.add(b),this.one("playing",()=>{this.queuedHanders_.has(b)&&(this.queuedHanders_.delete(b),a())})):this.requestNamedAnimationFrame(b,a);return b}cancelVideoFrameCallback(a){this.queuedHanders_.has(a)?this.queuedHanders_.delete(a):this.cancelNamedAnimationFrame(a)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(a){}overrideNativeVideoTracks(a){}canPlayType(a){return""}static canPlayType(a){return""}static canPlaySource(a,
b){return ma.canPlayType(a.type)}static isTech(a){return a.prototype instanceof ma||a instanceof ma||a===ma}static registerTech(a,b){ma.techs_||(ma.techs_={});if(!ma.isTech(b))throw Error(`Tech ${a} must be a Tech`);if(!ma.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!ma.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");a=Pa(a);ma.techs_[a]=b;ma.techs_[vd(a)]=b;"Tech"!==a&&ma.defaultTechOrder_.push(a);return b}static getTech(a){if(a){if(ma.techs_&&
ma.techs_[a])return ma.techs_[a];a=Pa(a);if(J&&J.videojs&&J.videojs[a])return ra.warn(`The ${a} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),J.videojs[a]}}}pb.names.forEach(function(a){const b=pb[a];ma.prototype[b.getterName]=function(){this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});ma.prototype.featuresVolumeControl=!0;ma.prototype.featuresMuteControl=!0;ma.prototype.featuresFullscreenResize=!1;
ma.prototype.featuresPlaybackRate=!1;ma.prototype.featuresProgressEvents=!1;ma.prototype.featuresSourceset=!1;ma.prototype.featuresTimeupdateEvents=!1;ma.prototype.featuresNativeTextTracks=!1;ma.prototype.featuresVideoFrameCallback=!1;ma.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){let d=a.sourceHandlers;d||(d=a.sourceHandlers=[]);void 0===c&&(c=d.length);d.splice(c,0,b)};a.canPlayType=function(b){const c=a.sourceHandlers||[];let d;for(let e=0;e<c.length;e++)if(d=c[e].canPlayType(b))return d;
return""};a.selectSourceHandler=function(b,c){const d=a.sourceHandlers||[];let e;for(let h=0;h<d.length;h++)if(e=d[h].canHandleSource(b,c))return d[h];return null};a.canPlaySource=function(b,c){const d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};["seekable","seeking","duration"].forEach(function(b){const c=this[b];"function"===typeof c&&(this[b]=function(){return this.sourceHandler_&&this.sourceHandler_[b]?this.sourceHandler_[b].apply(this.sourceHandler_,arguments):c.apply(this,
arguments)})},a.prototype);a.prototype.setSource=function(b){let c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:ra.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler_);c!==a.nativeSourceHandler&&(this.currentSource_=b);this.sourceHandler_=c.handleSource(b,this,this.options_);this.one("dispose",this.disposeSourceHandler_)};a.prototype.disposeSourceHandler=function(){this.currentSource_&&
(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};V.registerComponent("Tech",ma);ma.registerTech("Tech",ma);ma.defaultTechOrder_=[];const yc={},$d={},Zd={},Zn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},$n={setCurrentTime:1,setMuted:1,setVolume:1},oj={play:1,pause:1},ao={opus:"video/ogg",ogv:"video/ogg",
mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},ae=function(a=""){a=Nf(a);return ao[a.toLowerCase()]||""},bo=(a,b)=>{if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;
var c=a.cache_.sources.filter(d=>d.src===b);if(c.length)return c[0].type;a=a.$$("source");for(c=0;c<a.length;c++){const d=a[c];if(d.type&&d.src&&d.src===b)return d.type}return ae(b)},pj=function(a){if(Array.isArray(a)){let b=[];a.forEach(function(c){c=pj(c);Array.isArray(c)?b=b.concat(c):Mb(c)&&b.push(c)});a=b}else a="string"===typeof a&&a.trim()?[di({src:a})]:Mb(a)&&"string"===typeof a.src&&a.src&&a.src.trim()?[di(a)]:[];return a},qj=le?10009:me?461:8,$c={codes:{play:415,pause:19,ff:417,rw:412,back:qj},
names:{415:"play",19:"pause",417:"ff",412:"rw",[qj]:"back"},isEventKey(a,b){b=b.toLowerCase();return this.names[a.keyCode]&&this.names[a.keyCode]===b?!0:!1},getEventName(a){return this.names[a.keyCode]?this.names[a.keyCode]:this.codes[a.code]?this.names[this.codes[a.code]]:null}};class co extends xb{constructor(a){super();this.player_=a;this.focusableComponents=[];this.isPaused_=this.isListening_=!1;this.onKeyDown_=this.onKeyDown_.bind(this);this.lastFocusedComponent_=null}start(){if(!this.isListening_&&
(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay))this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents();this.focusableComponents.length&&
(1<this.focusableComponents.length?this.focusableComponents[1].focus():this.focusableComponents[0].focus())})}stop(){this.player_.off("keydown",this.onKeyDown_);this.isListening_=!1}onKeyDown_(a){const b=a.originalEvent?a.originalEvent:a;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(b.key)?this.isPaused_||(b.preventDefault(),a=b.key.substring(5).toLowerCase(),this.move(a)):$c.isEventKey(b,"play")||$c.isEventKey(b,"pause")||$c.isEventKey(b,"ff")||$c.isEventKey(b,"rw")?(b.preventDefault(),
a=$c.getEventName(b),this.performMediaAction_(a)):$c.isEventKey(b,"Back")&&a.target&&"function"===typeof a.target.closeable&&a.target.closeable()&&(b.preventDefault(),a.target.close())}performMediaAction_(a){if(this.player_)switch(a){case "play":this.player_.paused()&&this.player_.play();break;case "pause":this.player_.paused()||this.player_.pause();break;case "ff":this.userSeek_(this.player_.currentTime()+5);break;case "rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(a){this.player_.liveTracker&&
this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser();this.player_.currentTime(a)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(a){const b=a.relatedTarget;let c=null;const d=this.getCurrentComponent(a.target);b&&(c=!!b.closest(".video-js"),b.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_());(a.currentTarget.contains(a.relatedTarget)||c)&&b||(d&&"CloseButton"===d.name()?this.refocusComponent():(this.pause(),
d&&d.el()&&(this.lastFocusedComponent_=d)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){function a(c){for(const d of c)d.hasOwnProperty("el_")&&d.getIsFocusable()&&d.getIsAvailableToBeFocused(d.el())&&b.push(d),d.hasOwnProperty("children_")&&0<d.children_.length&&a(d.children_)}const b=[];this.player_.children_.forEach(c=>{if(c.hasOwnProperty("el_")){if(c.getIsFocusable&&c.getIsAvailableToBeFocused&&c.getIsFocusable()&&
c.getIsAvailableToBeFocused(c.el())){b.push(c);return}c.hasOwnProperty("children_")&&0<c.children_.length?a(c.children_):c.hasOwnProperty("items")&&0<c.items.length?a(c.items):this.findSuitableDOMChild(c)&&b.push(c)}"ErrorDisplay"===c.name_&&c.opened_&&(c=c.el_.querySelector(".vjs-errors-ok-button-container"))&&c.querySelectorAll("button").forEach((d,e)=>{b.push({name:()=>"ModalButton"+(e+1),el:()=>d,getPositions:()=>{const h=d.getBoundingClientRect();return{boundingClientRect:{x:h.x,y:h.y,width:h.width,
height:h.height,top:h.top,right:h.right,bottom:h.bottom,left:h.left},center:{x:h.left+h.width/2,y:h.top+h.height/2,width:0,height:0,top:h.top+h.height/2,right:h.left+h.width/2,bottom:h.top+h.height/2,left:h.left+h.width/2}}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:h=>!0,focus:()=>d.focus()})})});return this.focusableComponents=b}findSuitableDOMChild(a){function b(c){if(a.getIsFocusable(c)&&a.getIsAvailableToBeFocused(c))return c;for(let d=0;d<c.children.length;d++){const e=b(c.children[d]);
if(e)return e}return null}return a.el()?b(a.el()):null}getCurrentComponent(a){this.updateFocusableComponents();a=a||document.activeElement;if(this.focusableComponents.length)for(const b of this.focusableComponents)if(b.el()===a)return b}add(a){const b=[...this.focusableComponents];a.hasOwnProperty("el_")&&a.getIsFocusable()&&a.getIsAvailableToBeFocused(a.el())&&b.push(a);this.focusableComponents=b;this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(a){for(let b=
0;b<this.focusableComponents.length;b++)if(this.focusableComponents[b].name()===a.name()){this.focusableComponents.splice(b,1);this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});break}}clear(){0<this.focusableComponents.length&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(a){const b=this.getCurrentComponent();if(b){var c=b.getPositions(),d=this.focusableComponents.filter(e=>
e!==b&&this.isInDirection_(c.boundingClientRect,e.getPositions().boundingClientRect,a));(d=this.findBestCandidate_(c.center,d,a))?this.focus(d):this.trigger({type:"endOfFocusableComponents",direction:a,focusedComponent:b})}}findBestCandidate_(a,b,c){let d=Infinity,e=null;for(const h of b)b=h.getPositions().center,b=this.calculateDistance_(a,b,c),b<d&&(d=b,e=h);return e}isInDirection_(a,b,c){switch(c){case "right":return b.left>=a.right;case "left":return b.right<=a.left;case "down":return b.top>=
a.bottom;case "up":return b.bottom<=a.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0);this.updateFocusableComponents();for(let a=0;a<this.focusableComponents.length;a++)if(this.focusableComponents[a].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[a]);break}}else this.focus(this.updateFocusableComponents()[0])}focus(a){"object"===typeof a&&(a.getIsAvailableToBeFocused(a.el())?a.focus():this.findSuitableDOMChild(a)&&
this.findSuitableDOMChild(a).focus())}calculateDistance_(a,b,c){const d=Math.abs(a.x-b.x);a=Math.abs(a.y-b.y);switch(c){case "right":case "left":c=d+100*a;break;case "up":c=2*a+.5*d;break;case "down":c=5*a+d;break;default:c=d+a}return c}searchForTrackSelect_(){for(const a of this.updateFocusableComponents())if("TextTrackSelect"===a.constructor.name){this.focus(a);break}}}class eo extends V{constructor(a,b,c){const d=Ca({createEl:!1},b);super(a,d,c);if(b.playerOptions.sources&&0!==b.playerOptions.sources.length)a.src(b.playerOptions.sources);
else for(let e=0,h=b.playerOptions.techOrder;e<h.length;e++)if(b=Pa(h[e]),c=ma.getTech(b),b||(c=V.getComponent(b)),c&&c.isSupported()){a.loadTech_(b);break}}}V.registerComponent("MediaLoader",eo);class ue extends V{constructor(a,b){super(a,b);this.options_.controlText&&this.controlText(this.options_.controlText);this.handleMouseOver_=c=>this.handleMouseOver(c);this.handleMouseOut_=c=>this.handleMouseOut(c);this.handleClick_=c=>this.handleClick(c);this.handleKeyDown_=c=>this.handleKeyDown(c);this.emitTapEvents();
this.enable()}createEl(a="div",b={},c={}){b=Object.assign({className:this.buildCSSClass(),tabIndex:0},b);"button"===a&&ra.error(`Creating a ClickableComponent with an HTML element of ${a} is not supported; use a Button instead.`);c=Object.assign({role:"button"},c);this.tabIndex_=b.tabIndex;a=ja(a,b,c);this.player_.options_.experimentalSvgIcons||a.appendChild(ja("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(a);return a}dispose(){this.controlTextEl_=null;super.dispose()}createControlTextEl(a){this.controlTextEl_=
ja("span",{className:"vjs-control-text"},{"aria-live":"polite"});a&&a.appendChild(this.controlTextEl_);this.controlText(this.controlText_,a);return this.controlTextEl_}controlText(a,b=this.el()){if(void 0===a)return this.controlText_||"Need Text";const c=this.localize(a);this.controlText_=a;kc(this.controlTextEl_,c);this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",c)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||
(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off("mouseover",this.handleMouseOver_);this.off("mouseout",
this.handleMouseOut_);this.off(["tap","click"],this.handleClick_);this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(a){" "===a.key||"Enter"===a.key?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}}V.registerComponent("ClickableComponent",ue);class Of extends ue{constructor(a,b){super(a,b);this.update();this.update_=
c=>this.update(c);a.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_);super.dispose()}createEl(){return ja("div",{className:"vjs-poster"})}crossOrigin(a){if("undefined"===typeof a)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null!==a&&"anonymous"!==a&&"use-credentials"!==a?this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):
this.$("img")&&(this.$("img").crossOrigin=a)}update(a){a=this.player().poster();this.setSrc(a);a?this.show():this.hide()}setSrc(a){a?(this.$("img")||this.el_.appendChild(ja("picture",{className:"vjs-poster",tabIndex:-1},{},ja("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=a):this.el_.textContent=""}handleClick(a){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Nb(this.player_.play()):this.player_.pause())}}Of.prototype.crossorigin=
Of.prototype.crossOrigin;V.registerComponent("PosterImage",Of);const fo={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};class go extends V{constructor(a,b,c){super(a,b,c);const d=
e=>{this.updateDisplayOverlay();this.updateDisplay(e)};a.on("loadstart",e=>this.toggleDisplay(e));a.on("texttrackchange",e=>this.updateDisplay(e));a.on("loadedmetadata",e=>{this.updateDisplayOverlay();this.preselectTrack(e)});a.ready(Ea(this,function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",d);a.on("playerresize",d);var e=J.screen.orientation||J,h=J.screen.orientation?"change":"orientationchange";e.addEventListener(h,d);a.on("dispose",()=>e.removeEventListener(h,
d));var n=this.options_.playerOptions.tracks||[];for(let u=0;u<n.length;u++)this.player_.addRemoteTextTrack(n[u],!0);this.preselectTrack()}}))}preselectTrack(){const a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage;let d,e,h;for(let n=0;n<b.length;n++){const u=b[n];c&&c.enabled&&c.language&&c.language===u.language&&u.kind in a?u.kind===c.kind?h=u:h||=u:c&&!c.enabled?e=d=h=null:u.default&&("descriptions"!==u.kind||d?u.kind in a&&!e&&(e=u):d=u)}h?h.mode=
"showing":e?e.mode="showing":d&&(d.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"===typeof J.WebVTT&&J.WebVTT.processCues(J,[],this.el_)}updateDisplay(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(b){b=[];for(var c=
0;c<a.length;++c){var d=a[c];"showing"===d.mode&&b.push(d)}this.updateForTrack(b)}else{c=b=null;for(d=a.length;d--;){const e=a[d];"showing"===e.mode&&("descriptions"===e.kind?b=e:c=e)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b));J.CSS.supports("inset","10px")||(a=this.el_,b=a.querySelectorAll(".vjs-text-track-cue"),c=this.player_.controlBar.el_.getBoundingClientRect().height,
d=this.player_.el_.getBoundingClientRect().height,a.style="",Ob(a,"position","relative"),Ob(a,"height",d-c+"px"),Ob(a,"top","unset"),ne?Ob(a,"bottom",d+"px"):Ob(a,"bottom","0px"),0<b.length&&b.forEach(e=>{if(e.style.inset){const h=e.style.inset.split(" ");3===h.length&&Object.assign(e.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}}))}}updateDisplayOverlay(){if(this.player_.videoHeight()&&J.CSS.supports("inset-inline: 10px")){var a=this.player_.currentWidth(),b=this.player_.currentHeight(),
c=a/b,d=this.player_.videoWidth()/this.player_.videoHeight(),e=0,h=0;.1<Math.abs(c-d)&&(c>d?e=Math.round((a-b*d)/2):h=Math.round((b-a/d)/2));Ob(this.el_,"insetInline",e?`${e}px`:"");Ob(this.el_,"insetBlock",h?`${h}px`:"")}}updateDisplayState(a){const b=this.player_.textTrackSettings.getValues();a=a.activeCues;let c=a.length;for(;c--;){var d=a[c];if(d){d=d.displayState;b.color&&(d.firstChild.style.color=b.color);b.textOpacity&&Ob(d.firstChild,"color",of(b.color||"#fff",b.textOpacity));b.backgroundColor&&
(d.firstChild.style.backgroundColor=b.backgroundColor);b.backgroundOpacity&&Ob(d.firstChild,"backgroundColor",of(b.backgroundColor||"#000",b.backgroundOpacity));b.windowColor&&(b.windowOpacity?Ob(d,"backgroundColor",of(b.windowColor,b.windowOpacity)):d.style.backgroundColor=b.windowColor);b.edgeStyle&&("dropshadow"===b.edgeStyle?d.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===b.edgeStyle?d.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":
"depressed"===b.edgeStyle?d.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===b.edgeStyle&&(d.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));if(b.fontPercent&&1!==b.fontPercent){const e=J.parseFloat(d.style.fontSize);d.style.fontSize=e*b.fontPercent+"px";d.style.height="auto";d.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?d.firstChild.style.fontVariant="small-caps":d.firstChild.style.fontFamily=
fo[b.fontFamily])}}}updateForTrack(a){Array.isArray(a)||(a=[a]);if("function"===typeof J.WebVTT&&!a.every(h=>!h.activeCues)){var b=[];for(var c=0;c<a.length;++c){var d=a[c];for(var e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e])}J.WebVTT.processCues(J,b,this.el_);for(b=0;b<a.length;++b){c=a[b];for(d=0;d<c.activeCues.length;++d)e=c.activeCues[d].displayState,vc(e,"vjs-text-track-cue","vjs-text-track-cue-"+(c.language?c.language:b)),c.language&&e.setAttribute("lang",c.language);this.player_.textTrackSettings&&
this.updateDisplayState(c)}}}}V.registerComponent("TextTrackDisplay",go);class ho extends V{createEl(){var a=this.player_.isAudio();a=this.localize(a?"Audio Player":"Video Player");a=ja("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])});const b=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});b.appendChild(a);return b}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":
"Video Player"])}}V.registerComponent("LoadingSpinner",ho);class lb extends ue{createEl(a,b={},c={}){a="button";b=Object.assign({className:this.buildCSSClass()},b);c=Object.assign({type:"button"},c);a=ja(a,b,c);this.player_.options_.experimentalSvgIcons||a.appendChild(ja("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0}));this.createControlTextEl(a);return a}addChild(a,b={}){ra.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`);
return V.prototype.addChild.call(this,a,b)}enable(){super.enable();this.el_.removeAttribute("disabled")}disable(){super.disable();this.el_.setAttribute("disabled","disabled")}handleKeyDown(a){" "===a.key||"Enter"===a.key?a.stopPropagation():super.handleKeyDown(a)}}V.registerComponent("Button",lb);class rj extends lb{constructor(a,b){super(a,b);this.mouseused_=!1;this.setIcon("play");this.on("mousedown",c=>this.handleMouseDown(c))}buildCSSClass(){return"vjs-big-play-button"}handleClick(a){const b=
this.player_.play();if(this.mouseused_&&"clientX"in a&&"clientY"in a)Nb(b),this.player_.tech(!0)&&this.player_.tech(!0).focus();else{var c=(a=this.player_.getChild("controlBar"))&&a.getChild("playToggle");c?(a=()=>c.focus(),od(b)?b.then(a,()=>{}):this.setTimeout(a,1)):this.player_.tech(!0).focus()}}handleKeyDown(a){this.mouseused_=!1;super.handleKeyDown(a)}handleMouseDown(a){this.mouseused_=!0}}rj.prototype.controlText_="Play Video";V.registerComponent("BigPlayButton",rj);class io extends lb{constructor(a,
b){super(a,b);this.setIcon("cancel");this.controlText(b&&b.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(a){this.trigger({type:"close",bubbles:!1})}handleKeyDown(a){"Escape"===a.key?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):super.handleKeyDown(a)}}V.registerComponent("CloseButton",io);class sj extends lb{constructor(a,b={}){super(a,b);b.replay=void 0===b.replay||b.replay;this.setIcon("play");this.on(a,"play",
c=>this.handlePlay(c));this.on(a,"pause",c=>this.handlePause(c));if(b.replay)this.on(a,"ended",c=>this.handleEnded(c))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(a){this.player_.paused()?Nb(this.player_.play()):this.player_.pause()}handleSeeked(a){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(a):this.handlePlay(a)}handlePlay(a){this.removeClass("vjs-ended","vjs-paused");this.addClass("vjs-playing");this.setIcon("pause");this.controlText("Pause")}handlePause(a){this.removeClass("vjs-playing");
this.addClass("vjs-paused");this.setIcon("play");this.controlText("Play")}handleEnded(a){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.setIcon("replay");this.controlText("Replay");this.one(this.player_,"seeked",b=>this.handleSeeked(b))}}sj.prototype.controlText_="Play";V.registerComponent("PlayToggle",sj);class ad extends V{constructor(a,b){super(a,b);this.on(a,["timeupdate","ended","seeking"],c=>this.update(c));this.updateTextNode_()}createEl(){const a=this.buildCSSClass(),b=super.createEl("div",
{className:`${a} vjs-time-control vjs-control`}),c=ja("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\u00a0`},{role:"presentation"});b.appendChild(c);this.contentEl_=ja("span",{className:`${a}-display`},{role:"presentation"});b.appendChild(this.contentEl_);return b}dispose(){this.textNode_=this.contentEl_=null;super.dispose()}update(a){(this.player_.options_.enableSmoothSeeking||"seeking"!==a.type)&&this.updateContent(a)}updateTextNode_(a=0){a=wc(a);this.formattedTime_!==
a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(this.contentEl_){var b=this.textNode_;b&&this.contentEl_.firstChild!==b&&(b=null,ra.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead."));(this.textNode_=ca.createTextNode(this.formattedTime_))&&(b?this.contentEl_.replaceChild(this.textNode_,b):this.contentEl_.appendChild(this.textNode_))}}))}updateContent(a){}}
ad.prototype.labelText_="Time";ad.prototype.controlText_="Time";V.registerComponent("TimeDisplay",ad);class Pf extends ad{buildCSSClass(){return"vjs-current-time"}updateContent(a){a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(a)}}Pf.prototype.labelText_="Current Time";Pf.prototype.controlText_="Current Time";V.registerComponent("CurrentTimeDisplay",Pf);class Qf extends ad{constructor(a,b){super(a,
b);b=c=>this.updateContent(c);this.on(a,"durationchange",b);this.on(a,"loadstart",b);this.on(a,"loadedmetadata",b)}buildCSSClass(){return"vjs-duration"}updateContent(a){a=this.player_.duration();this.updateTextNode_(a)}}Qf.prototype.labelText_="Duration";Qf.prototype.controlText_="Duration";V.registerComponent("DurationDisplay",Qf);class jo extends V{createEl(){const a=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),b=super.createEl("div"),c=super.createEl("span",
{textContent:"/"});b.appendChild(c);a.appendChild(b);return a}}V.registerComponent("TimeDivider",jo);class Rf extends ad{constructor(a,b){super(a,b);this.on(a,"durationchange",c=>this.updateContent(c))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const a=super.createEl();!1!==this.options_.displayNegative&&a.insertBefore(ja("span",{},{"aria-hidden":!0},"-"),this.contentEl_);return a}updateContent(a){"number"===typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?
this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))}}Rf.prototype.labelText_="Remaining Time";Rf.prototype.controlText_="Remaining Time";V.registerComponent("RemainingTimeDisplay",Rf);class ko extends V{constructor(a,b){super(a,b);this.updateShowing();this.on(this.player(),"durationchange",c=>this.updateShowing(c))}createEl(){const a=super.createEl("div",{className:"vjs-live-control vjs-control"});this.contentEl_=ja("div",{className:"vjs-live-display"},{"aria-live":"off"});
this.contentEl_.appendChild(ja("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\u00a0`}));this.contentEl_.appendChild(ca.createTextNode(this.localize("LIVE")));a.appendChild(this.contentEl_);return a}dispose(){this.contentEl_=null;super.dispose()}updateShowing(a){Infinity===this.player().duration()?this.show():this.hide()}}V.registerComponent("LiveDisplay",ko);class tj extends lb{constructor(a,b){super(a,b);this.updateLiveEdgeStatus();this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=
c=>this.updateLiveEdgeStatus(c),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const a=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});this.setIcon("circle",a);this.textEl_=ja("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"});a.appendChild(this.textEl_);return a}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",
!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_);this.textEl_=null;super.dispose()}}tj.prototype.controlText_="Seek to live, currently playing live";
V.registerComponent("SeekToLive",tj);var lo=Object.freeze({__proto__:null,clamp:zc});class Sf extends V{constructor(a,b){super(a,b);this.handleMouseDown_=c=>this.handleMouseDown(c);this.handleMouseUp_=c=>this.handleMouseUp(c);this.handleKeyDown_=c=>this.handleKeyDown(c);this.handleClick_=c=>this.handleClick(c);this.handleMouseMove_=c=>this.handleMouseMove(c);this.update_=c=>this.update(c);this.bar=this.getChild(this.options_.barName);this.vertical(!!this.options_.vertical);this.enable()}enabled(){return this.enabled_}enable(){if(!this.enabled()){this.on("mousedown",
this.handleMouseDown_);this.on("touchstart",this.handleMouseDown_);this.on("keydown",this.handleKeyDown_);this.on("click",this.handleClick_);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}}disable(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_);this.off("touchstart",this.handleMouseDown_);this.off("keydown",
this.handleKeyDown_);this.off("click",this.handleClick_);this.off(this.player_,"controlsvisible",this.update_);this.off(a,"mousemove",this.handleMouseMove_);this.off(a,"mouseup",this.handleMouseUp_);this.off(a,"touchmove",this.handleMouseMove_);this.off(a,"touchend",this.handleMouseUp_);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}}createEl(a,b={},c={}){b.className+=" vjs-slider";b=Object.assign({tabIndex:0},
b);c=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},c);return super.createEl(a,b,c)}handleMouseDown(a){const b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault();"touchstart"!==a.type||Rb||a.preventDefault();Ph();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(b,"mousemove",this.handleMouseMove_);this.on(b,"mouseup",this.handleMouseUp_);this.on(b,"touchmove",this.handleMouseMove_);this.on(b,"touchend",this.handleMouseUp_);this.handleMouseMove(a,
!0)}handleMouseMove(a){}handleMouseUp(a){a=this.bar.el_.ownerDocument;Qh();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(a,"mousemove",this.handleMouseMove_);this.off(a,"mouseup",this.handleMouseUp_);this.off(a,"touchmove",this.handleMouseMove_);this.off(a,"touchend",this.handleMouseUp_);this.update()}update(){if(this.el_&&this.bar){var a=this.getProgress();if(a===this.progress_)return a;this.progress_=a;this.requestNamedAnimationFrame("Slider#update",()=>{const b=this.vertical()?
"height":"width";this.bar.el().style[b]=(100*a).toFixed(2)+"%"});return a}}getProgress(){return Number(zc(this.getPercent(),0,1).toFixed(4))}calculateDistance(a){a=Vd(this.el_,a);return this.vertical()?a.y:a.x}handleKeyDown(a){const b=this.options_.playerOptions.spatialNavigation,c=b&&b.horizontalSeek;b&&b.enabled?c&&"ArrowLeft"===a.key||!c&&"ArrowDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepBack()):c&&"ArrowRight"===a.key||!c&&"ArrowUp"===a.key?(a.preventDefault(),a.stopPropagation(),
this.stepForward()):super.handleKeyDown(a):"ArrowLeft"===a.key||"ArrowDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepBack()):"ArrowUp"===a.key||"ArrowRight"===a.key?(a.preventDefault(),a.stopPropagation(),this.stepForward()):super.handleKeyDown(a)}handleClick(a){a.stopPropagation();a.preventDefault()}vertical(a){if(void 0===a)return this.vertical_||!1;(this.vertical_=!!a)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}V.registerComponent("Slider",Sf);
class mo extends V{constructor(a,b){super(a,b);this.partEls_=[];this.on(a,"progress",c=>this.update(c))}createEl(){const a=super.createEl("div",{className:"vjs-load-progress"}),b=ja("span",{className:"vjs-control-text"}),c=ja("span",{textContent:this.localize("Loaded")}),d=ca.createTextNode(": ");this.percentageEl_=ja("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});a.appendChild(b);b.appendChild(c);b.appendChild(d);b.appendChild(this.percentageEl_);return a}dispose(){this.percentageEl_=
this.partEls_=null;super.dispose()}update(a){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{var b=this.player_.liveTracker;const c=this.player_.buffered();var d=b&&b.isLive()?b.seekableEnd():this.player_.duration(),e=this.player_.bufferedEnd();b=this.partEls_;d=zc(e/d*100,0,100).toFixed(2)+"%";this.percent_!==d&&(this.el_.style.width=d,kc(this.percentageEl_,d),this.percent_=d);for(d=0;d<c.length;d++){const h=c.start(d),n=c.end(d);let u=b[d];u||(u=this.el_.appendChild(ja()),b[d]=u);
if(u.dataset.start!==h||u.dataset.end!==n)u.dataset.start=h,u.dataset.end=n,u.style.left=zc(h/e*100,0,100).toFixed(2)+"%",u.style.width=zc((n-h)/e*100,0,100).toFixed(2)+"%"}for(e=b.length;e>c.length;e--)this.el_.removeChild(b[e-1]);b.length=c.length})}}V.registerComponent("LoadProgressBar",mo);class no extends V{constructor(a,b){super(a,b);this.update=Sb(Ea(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(a,b,c){const d=md(this.el_);
var e=Oc(this.player_.el());const h=a.width*b;e&&d&&(b=a.left-e.left+h,e=a.width-h+(e.right-a.right),e||(e=a.width-h,b=h),a=d.width/2,b<a?a+=a-b:e<a&&(a=e),0>a?a=0:a>d.width&&(a=d.width),a=Math.round(a),this.el_.style.right=`-${a}px`,this.write(c))}write(a){kc(this.el_,a)}updateTime(a,b,c,d){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{var e=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){e=this.player_.liveTracker.liveWindow();const h=e-b*
e;e=(1>h?"":"-")+wc(h,e)}else e=wc(c,e);this.update(a,b,e);d&&d()})}}V.registerComponent("TimeTooltip",no);class Tf extends V{constructor(a,b){super(a,b);this.setIcon("circle");this.update=Sb(Ea(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(a,b){const c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}}}Tf.prototype.options_=
{children:[]};nb||Qb||Tf.prototype.options_.children.push("timeTooltip");V.registerComponent("PlayProgressBar",Tf);class uj extends V{constructor(a,b){super(a,b);this.update=Sb(Ea(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(a,b){const c=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,c,()=>{this.el_.style.left=`${a.width*b}px`})}}uj.prototype.options_={children:["timeTooltip"]};V.registerComponent("MouseTimeDisplay",uj);
class Uf extends Sf{constructor(a,b){super(a,b);this.setEventHandlers_()}setEventHandlers_(){this.update_=Ea(this,this.update);this.update=Sb(this.update_,30);this.on(this.player_,["durationchange","timeupdate"],this.update);this.on(this.player_,["ended"],this.update_);if(this.player_.liveTracker)this.on(this.player_.liveTracker,"liveedgechange",this.update);this.updateInterval=null;this.enableIntervalHandler_=a=>this.enableInterval_(a);this.disableIntervalHandler_=a=>this.disableInterval_(a);this.on(this.player_,
["playing"],this.enableIntervalHandler_);this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in ca&&"visibilityState"in ca)this.on(ca,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(a){"hidden"===ca.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||
(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(a){if("hidden"!==ca.visibilityState){var b=super.update();this.requestNamedAnimationFrame("SeekBar#update",()=>{const c=this.player_.ended()?
this.player_.duration():this.getCurrentTime_(),d=this.player_.liveTracker;let e=this.player_.duration();d&&d.isLive()&&(e=this.player_.liveTracker.liveCurrentTime());this.percent_!==b&&(this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2)),this.percent_=b);if(this.currentTime_!==c||this.duration_!==e)this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime\x3d{1} duration\x3d{2}",[wc(c,e),wc(e,e)],"{1} of {2}")),this.currentTime_=c,this.duration_=e;this.bar&&this.bar.update(Oc(this.el()),
this.getProgress())});return b}}userSeek_(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser();this.player_.currentTime(a)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){var a=this.getCurrentTime_();const b=this.player_.liveTracker;b&&b.isLive()?(a=(a-b.seekableStart())/b.liveWindow(),b.atLiveEdge()&&(a=1)):a/=this.player_.duration();return a}handleMouseDown(a){nd(a)&&
(a.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(a))}handleMouseMove(a,b=!1){if(nd(a)&&!isNaN(this.player_.duration())){b||this.player_.scrubbing()||this.player_.scrubbing(!0);var c=this.calculateDistance(a);var d=this.player_.liveTracker;if(d&&d.isLive()){if(.99<=c){d.seekToLiveEdge();return}a=d.seekableStart();b=d.liveCurrentTime();c=a+c*d.liveWindow();c>=b&&(c=b);c<=a&&(c=a+.1);if(Infinity===c)return}else c*=this.player_.duration(),c===
this.player_.duration()&&(c-=.1);this.userSeek_(c);this.player_.options_.enableSmoothSeeking&&this.update()}}enable(){super.enable();const a=this.getChild("mouseTimeDisplay");a&&a.show()}disable(){super.disable();const a=this.getChild("mouseTimeDisplay");a&&a.hide()}handleMouseUp(a){super.handleMouseUp(a);a&&a.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying?Nb(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+
5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(a){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(a){const b=this.player_.liveTracker;" "===a.key||"Enter"===a.key?(a.preventDefault(),a.stopPropagation(),this.handleAction(a)):"Home"===a.key?(a.preventDefault(),a.stopPropagation(),this.userSeek_(0)):"End"===a.key?(a.preventDefault(),a.stopPropagation(),b&&b.isLive()?this.userSeek_(b.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(a.key)?
(a.preventDefault(),a.stopPropagation(),a=.1*parseInt(a.key,10),b&&b.isLive()?this.userSeek_(b.seekableStart()+b.liveWindow()*a):this.userSeek_(this.player_.duration()*a)):"PageDown"===a.key?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):"PageUp"===a.key?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(a)}dispose(){this.disableInterval_();this.off(this.player_,["durationchange","timeupdate"],this.update);
this.off(this.player_,["ended"],this.update_);this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update);this.off(this.player_,["playing"],this.enableIntervalHandler_);this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);"hidden"in ca&&"visibilityState"in ca&&this.off(ca,"visibilitychange",this.toggleVisibility_);super.dispose()}}Uf.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};nb||Qb||Uf.prototype.options_.children.splice(1,
0,"mouseTimeDisplay");V.registerComponent("SeekBar",Uf);class vj extends V{constructor(a,b){super(a,b);this.handleMouseMove=Sb(Ea(this,this.handleMouseMove),30);this.throttledHandleMouseSeek=Sb(Ea(this,this.handleMouseSeek),30);this.handleMouseUpHandler_=c=>this.handleMouseUp(c);this.handleMouseDownHandler_=c=>this.handleMouseDown(c);this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(a){const b=this.getChild("seekBar");if(b){var c=
b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),h=md(e);a=Vd(e,a).x;a=zc(a,0,1);d&&d.update(h,a);c&&c.update(h,b.getProgress())}}}handleMouseSeek(a){const b=this.getChild("seekBar");b&&b.handleMouseMove(a)}enabled(){return this.enabled_}disable(){this.children().forEach(a=>a.disable&&a.disable());if(this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),
this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const a=this.getChild("seekBar");this.player_.scrubbing(!1);a.videoWasPlaying&&Nb(this.player_.play())}}enable(){this.children().forEach(a=>a.enable&&a.enable());this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const a=this.el_.ownerDocument;this.off(a,
"mousemove",this.throttledHandleMouseSeek);this.off(a,"touchmove",this.throttledHandleMouseSeek);this.off(a,"mouseup",this.handleMouseUpHandler_);this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseDown(a){const b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a);this.on(b,"mousemove",this.throttledHandleMouseSeek);this.on(b,"touchmove",this.throttledHandleMouseSeek);this.on(b,"mouseup",this.handleMouseUpHandler_);this.on(b,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){const b=
this.getChild("seekBar");b&&b.handleMouseUp(a);this.removeListenersAddedOnMousedownAndTouchstart()}}vj.prototype.options_={children:["seekBar"]};V.registerComponent("ProgressControl",vj);class wj extends lb{constructor(a,b){super(a,b);this.setIcon("picture-in-picture-enter");this.on(a,["enterpictureinpicture","leavepictureinpicture"],c=>this.handlePictureInPictureChange(c));this.on(a,["disablepictureinpicturechanged","loadedmetadata"],c=>this.handlePictureInPictureEnabledChange(c));this.on(a,["loadedmetadata",
"audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange());this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){ca.pictureInPictureEnabled&&
!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in J?this.enable():this.disable()}handlePictureInPictureChange(a){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture"));this.handlePictureInPictureEnabledChange()}handleClick(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():
this.player_.requestPictureInPicture()}show(){"function"===typeof ca.exitPictureInPicture&&super.show()}}wj.prototype.controlText_="Picture-in-Picture";V.registerComponent("PictureInPictureToggle",wj);class xj extends lb{constructor(a,b){super(a,b);this.setIcon("fullscreen-enter");this.on(a,"fullscreenchange",c=>this.handleFullscreenChange(c));!1===ca[a.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(a){this.player_.isFullscreen()?
(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}xj.prototype.controlText_="Fullscreen";V.registerComponent("FullscreenToggle",xj);const oo=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):
a.addClass("vjs-hidden")})};class po extends V{createEl(){const a=super.createEl("div",{className:"vjs-volume-level"});this.setIcon("circle",a);a.appendChild(super.createEl("span",{className:"vjs-control-text"}));return a}}V.registerComponent("VolumeLevel",po);class qo extends V{constructor(a,b){super(a,b);this.update=Sb(Ea(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(a,b,c,d){if(!c){c=Oc(this.el_);var e=Oc(this.player_.el());
const h=a.width*b;if(!e||!c)return;b=a.left-e.left+h;a=a.width-h+(e.right-a.right);e=c.width/2;b<e?e+=e-b:a<e&&(e=a);0>e?e=0:e>c.width&&(e=c.width);this.el_.style.right=`-${e}px`}this.write(`${d}%`)}write(a){kc(this.el_,a)}updateVolume(a,b,c,d,e){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(a,b,c,d.toFixed(0));e&&e()})}}V.registerComponent("VolumeLevelTooltip",qo);class yj extends V{constructor(a,b){super(a,b);this.update=Sb(Ea(this,this.update),30)}createEl(){return super.createEl("div",
{className:"vjs-mouse-display"})}update(a,b,c){const d=100*b;this.getChild("volumeLevelTooltip").updateVolume(a,b,c,d,()=>{c?this.el_.style.bottom=`${a.height*b}px`:this.el_.style.left=`${a.width*b}px`})}}yj.prototype.options_={children:["volumeLevelTooltip"]};V.registerComponent("MouseVolumeLevelDisplay",yj);class ve extends Sf{constructor(a,b){super(a,b);this.on("slideractive",c=>this.updateLastVolume_(c));this.on(a,"volumechange",c=>this.updateARIAAttributes(c));a.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",
{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(a){nd(a)&&super.handleMouseDown(a)}handleMouseMove(a){const b=this.getChild("mouseVolumeLevelDisplay");if(b){var c=this.el();const d=Oc(c),e=this.vertical();c=Vd(c,a);c=e?c.y:c.x;c=zc(c,0,1);b.update(d,c,e)}nd(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?
0:this.player_.volume()}stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(a){a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a);this.el_.setAttribute("aria-valuetext",a+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const a=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&
this.player_.lastVolume_(a)})}}ve.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};nb||Qb||ve.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");ve.prototype.playerEvent="volumechange";V.registerComponent("VolumeBar",ve);class zj extends V{constructor(a,b={}){b.vertical=b.vertical||!1;if("undefined"===typeof b.volumeBar||Lc(b.volumeBar))b.volumeBar=b.volumeBar||{},b.volumeBar.vertical=b.vertical;super(a,b);oo(this,a);this.throttledHandleMouseMove=Sb(Ea(this,this.handleMouseMove),
30);this.handleMouseUpHandler_=c=>this.handleMouseUp(c);this.on("mousedown",c=>this.handleMouseDown(c));this.on("touchstart",c=>this.handleMouseDown(c));this.on("mousemove",c=>this.handleMouseMove(c));this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active");this.addClass("vjs-slider-active");this.trigger("slideractive")});this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active");this.removeClass("vjs-slider-active");
this.trigger("sliderinactive")})}createEl(){let a="vjs-volume-horizontal";this.options_.vertical&&(a="vjs-volume-vertical");return super.createEl("div",{className:`vjs-volume-control vjs-control ${a}`})}handleMouseDown(a){a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove);this.on(a,"touchmove",this.throttledHandleMouseMove);this.on(a,"mouseup",this.handleMouseUpHandler_);this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(a){a=this.el_.ownerDocument;this.off(a,
"mousemove",this.throttledHandleMouseMove);this.off(a,"touchmove",this.throttledHandleMouseMove);this.off(a,"mouseup",this.handleMouseUpHandler_);this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseMove(a){this.volumeBar.handleMouseMove(a)}}zj.prototype.options_={children:["volumeBar"]};V.registerComponent("VolumeControl",zj);const ro=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden");a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):
a.addClass("vjs-hidden")})};class Aj extends lb{constructor(a,b){super(a,b);ro(this,a);this.on(a,["loadstart","volumechange"],c=>this.update(c))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(a){a=this.player_.volume();const b=this.player_.lastVolume_();0===a?(this.player_.volume(.1>b?.1:b),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)}update(a){this.updateIcon_();this.updateControlText_()}updateIcon_(){const a=this.player_.volume();let b=3;
this.setIcon("volume-high");nb&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted);0===a||this.player_.muted()?(this.setIcon("volume-mute"),b=0):.33>a?(this.setIcon("volume-low"),b=1):.67>a&&(this.setIcon("volume-medium"),b=2);Td(this.el_,[0,1,2,3].reduce((c,d)=>c+`${d?" ":""}vjs-vol-${d}`,""));vc(this.el_,`vjs-vol-${b}`)}updateControlText_(){const a=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)}}
Aj.prototype.controlText_="Mute";V.registerComponent("MuteToggle",Aj);class Bj extends V{constructor(a,b={}){b.inline="undefined"!==typeof b.inline?b.inline:!0;if("undefined"===typeof b.volumeControl||Lc(b.volumeControl))b.volumeControl=b.volumeControl||{},b.volumeControl.vertical=!b.inline;super(a,b);this.handleKeyPressHandler_=c=>this.handleKeyPress(c);this.on(a,["loadstart"],c=>this.volumePanelState_(c));this.on(this.muteToggle,"keyup",c=>this.handleKeyPress(c));this.on(this.volumeControl,"keyup",
c=>this.handleVolumeControlKeyUp(c));this.on("keydown",c=>this.handleKeyPress(c));this.on("mouseover",c=>this.handleMouseOver(c));this.on("mouseout",c=>this.handleMouseOut(c));this.on(this.volumeControl,["slideractive"],this.sliderActive_);this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&
this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let a="vjs-volume-panel-horizontal";this.options_.inline||(a="vjs-volume-panel-vertical");return super.createEl("div",{className:`vjs-volume-panel vjs-control ${a}`})}dispose(){this.handleMouseOut();super.dispose()}handleVolumeControlKeyUp(a){"Escape"===a.key&&this.muteToggle.focus()}handleMouseOver(a){this.addClass("vjs-hover");wb(ca,"keyup",
this.handleKeyPressHandler_)}handleMouseOut(a){this.removeClass("vjs-hover");kb(ca,"keyup",this.handleKeyPressHandler_)}handleKeyPress(a){"Escape"===a.key&&this.handleMouseOut()}}Bj.prototype.options_={children:["muteToggle","volumeControl"]};V.registerComponent("VolumePanel",Bj);class Cj extends lb{constructor(a,b){super(a,b);this.validOptions=[5,10,30];(this.skipTime=this.getSkipForwardTime())&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",
[this.skipTime.toLocaleString(a.language())])),this.show()):this.hide()}getSkipForwardTime(){const a=this.options_.playerOptions;return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(a){if(!isNaN(this.player_.duration())){a=this.player_.currentTime();var b=this.player_.liveTracker;b=b&&b.isLive()?b.seekableEnd():this.player_.duration();this.player_.currentTime(a+this.skipTime<=
b?a+this.skipTime:b)}}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Cj.prototype.controlText_="Skip Forward";V.registerComponent("SkipForward",Cj);class Dj extends lb{constructor(a,b){super(a,b);this.validOptions=[5,10,30];(this.skipTime=this.getSkipBackwardTime())&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(a.language())])),
this.show()):this.hide()}getSkipBackwardTime(){const a=this.options_.playerOptions;return a.controlBar&&a.controlBar.skipButtons&&a.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(a){a=this.player_.currentTime();var b=this.player_.liveTracker;b=b&&b.isLive()&&b.seekableStart();this.player_.currentTime(b&&a-this.skipTime<=b?b:a>=this.skipTime?a-this.skipTime:0)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",
[this.skipTime]))}}Dj.prototype.controlText_="Skip Backward";V.registerComponent("SkipBackward",Dj);class Ej extends V{constructor(a,b){super(a,b);b&&(this.menuButton_=b.menuButton);this.focusedChild_=-1;this.on("keydown",c=>this.handleKeyDown(c));this.boundHandleBlur_=c=>this.handleBlur(c);this.boundHandleTapClick_=c=>this.handleTapClick(c)}addEventListenerForItem(a){a instanceof V&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(a){a instanceof
V&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))}removeChild(a){"string"===typeof a&&(a=this.getChild(a));this.removeEventListenerForItem(a);super.removeChild(a)}addItem(a){(a=this.addChild(a))&&this.addEventListenerForItem(a)}createEl(){this.contentEl_=ja(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");const a=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);
wb(a,"click",function(b){b.preventDefault();b.stopImmediatePropagation()});return a}dispose(){this.boundHandleTapClick_=this.boundHandleBlur_=this.contentEl_=null;super.dispose()}handleBlur(a){const b=a.relatedTarget||ca.activeElement;this.children().some(c=>c.el()===b)||(a=this.menuButton_)&&a.buttonPressed_&&b!==a.el().firstChild&&a.unpressButton()}handleTapClick(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();Array.isArray(b)&&(b=b.filter(c=>c.el()===a.target)[0])&&
"CaptionSettingsMenuItem"!==b.name()&&this.menuButton_.focus()}}handleKeyDown(a){if("ArrowLeft"===a.key||"ArrowDown"===a.key)a.preventDefault(),a.stopPropagation(),this.stepForward();else if("ArrowRight"===a.key||"ArrowUp"===a.key)a.preventDefault(),a.stopPropagation(),this.stepBack()}stepForward(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1);this.focus(a)}stepBack(){let a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1);this.focus(a)}focus(a=0){const b=this.children().slice();
b.length&&b[0].hasClass("vjs-menu-title")&&b.shift();0<b.length&&(0>a?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())}}V.registerComponent("Menu",Ej);class Vf extends V{constructor(a,b={}){super(a,b);this.menuButton_=new lb(a,b);this.menuButton_.controlText(this.controlText_);this.menuButton_.el_.setAttribute("aria-haspopup","true");a=lb.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+a;this.menuButton_.removeClass("vjs-control");this.addChild(this.menuButton_);
this.update();this.enabled_=!0;a=c=>this.handleClick(c);this.handleMenuKeyUp_=c=>this.handleMenuKeyUp(c);this.on(this.menuButton_,"tap",a);this.on(this.menuButton_,"click",a);this.on(this.menuButton_,"keydown",c=>this.handleKeyDown(c));this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover");this.menu.show();wb(ca,"keyup",this.handleMenuKeyUp_)});this.on("mouseleave",c=>this.handleMouseLeave(c));this.on("keydown",c=>this.handleSubmenuKeyDown(c))}update(){const a=this.createMenu();this.menu&&
(this.menu.dispose(),this.removeChild(this.menu));this.menu=a;this.addChild(a);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const a=new Ej(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var b=ja("li",{className:"vjs-menu-title",textContent:Pa(this.options_.title),
tabIndex:-1});b=new V(this.player_,{el:b});a.addItem(b)}if(this.items=this.createItems())for(b=0;b<this.items.length;b++)a.addItem(this.items[b]);return a}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(a){super.setIcon(a,this.menuButton_.el_)}buildWrapperCSSClass(){let a="vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";const b=lb.prototype.buildCSSClass();return`vjs-menu-button ${a} ${b} ${super.buildCSSClass()}`}buildCSSClass(){let a=
"vjs-menu-button";a=!0===this.options_.inline?a+"-inline":a+"-popup";return`vjs-menu-button ${a} ${super.buildCSSClass()}`}controlText(a,b=this.menuButton_.el()){return this.menuButton_.controlText(a,b)}dispose(){this.handleMouseLeave();super.dispose()}handleClick(a){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(a){this.removeClass("vjs-hover");kb(ca,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(a){"Esc"===
a.key||"Tab"===a.key?this.buttonPressed_&&this.unpressButton():"Up"!==a.key&&("Down"!==a.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(a.preventDefault(),this.pressButton())}handleMenuKeyUp(a){"Esc"!==a.key&&"Tab"!==a.key||this.removeClass("vjs-hover")}handleSubmenuKeyPress(a){this.handleSubmenuKeyDown(a)}handleSubmenuKeyDown(a){("Esc"===a.key||"Tab"===a.key)&&this.buttonPressed_&&this.unpressButton()}pressButton(){this.enabled_&&
(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),nb&&Lh()||this.menu.focus())}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()}enable(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()}}
V.registerComponent("MenuButton",Vf);class Wf extends Vf{constructor(a,b){const c=b.tracks;super(a,b);1>=this.items.length&&this.hide();if(c){var d=Ea(this,this.update);c.addEventListener("removetrack",d);c.addEventListener("addtrack",d);c.addEventListener("labelchange",d);this.player_.on("ready",d);this.player_.on("dispose",function(){c.removeEventListener("removetrack",d);c.removeEventListener("addtrack",d);c.removeEventListener("labelchange",d)})}}}V.registerComponent("TrackButton",Wf);class xd extends ue{constructor(a,
b){super(a,b);this.selectable=b.selectable;this.isSelected_=b.selected||!1;this.multiSelectable=b.multiSelectable;this.selected(this.isSelected_);this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(a,b,c){this.nonIconControl=!0;a=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},b),c);b=ja("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});
this.player_.options_.experimentalSvgIcons?a.appendChild(b):a.replaceChild(b,a.querySelector(".vjs-icon-placeholder"));return a}handleKeyDown(a){"Tab Escape ArrowUp ArrowLeft ArrowRight ArrowDown".split(" ").includes(a.key)||super.handleKeyDown(a)}handleClick(a){this.selected(!0)}selected(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked",
"false"),this.controlText(""),this.isSelected_=!1))}}V.registerComponent("MenuItem",xd);class yd extends xd{constructor(a,b){const c=b.track,d=a.textTracks();b.label=c.label||c.language||"Unknown";b.selected="showing"===c.mode;super(a,b);this.track=c;this.kinds=(b.kinds||[b.kind||this.track.kind]).filter(Boolean);const e=(...n)=>{this.handleTracksChange.apply(this,n)},h=(...n)=>{this.handleSelectedLanguageChange.apply(this,n)};a.on(["loadstart","texttrackchange"],e);d.addEventListener("change",e);
d.addEventListener("selectedlanguagechange",h);this.on("dispose",function(){a.off(["loadstart","texttrackchange"],e);d.removeEventListener("change",e);d.removeEventListener("selectedlanguagechange",h)});if(void 0===d.onchange){let n;this.on(["tap","click"],function(){if("object"!==typeof J.Event)try{n=new J.Event("change")}catch(u){}n||(n=ca.createEvent("Event"),n.initEvent("change",!0,!0));d.dispatchEvent(n)})}this.handleTracksChange()}handleClick(a){const b=this.track,c=this.player_.textTracks();
super.handleClick(a);if(c)for(a=0;a<c.length;a++){const d=c[a];-1!==this.kinds.indexOf(d.kind)&&(d===b?"showing"!==d.mode&&(d.mode="showing"):"disabled"!==d.mode&&(d.mode="disabled"))}}handleTracksChange(a){a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(a){"showing"===this.track.mode&&(a=this.player_.cache_.selectedLanguage,a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,
language:this.track.language,kind:this.track.kind}))}dispose(){this.track=null;super.dispose()}}V.registerComponent("TextTrackMenuItem",yd);class Fj extends yd{constructor(a,b){b.track={player:a,kind:b.kind,kinds:b.kinds,default:!1,mode:"disabled"};b.kinds||(b.kinds=[b.kind]);b.track.label=b.label?b.label:b.kinds.join(" and ")+" off";b.selectable=!0;b.multiSelectable=!1;super(a,b)}handleTracksChange(a){a=this.player().textTracks();let b=!0;for(let c=0,d=a.length;c<d;c++){const e=a[c];if(-1<this.options_.kinds.indexOf(e.kind)&&
"showing"===e.mode){b=!1;break}}b!==this.isSelected_&&this.selected(b)}handleSelectedLanguageChange(a){a=this.player().textTracks();let b=!0;for(let c=0,d=a.length;c<d;c++){const e=a[c];if(-1<["captions","descriptions","subtitles"].indexOf(e.kind)&&"showing"===e.mode){b=!1;break}}b&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label);super.handleLanguagechange()}}V.registerComponent("OffTextTrackMenuItem",
Fj);class bd extends Wf{constructor(a,b={}){b.tracks=a.textTracks();super(a,b)}createItems(a=[],b=yd){var c;this.label_&&(c=`${this.label_} off`);a.push(new Fj(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c}));this.hideThreshold_+=1;c=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let d=0;d<c.length;d++){const e=c[d];if(-1<this.kinds_.indexOf(e.kind)){const h=new b(this.player_,{track:e,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});
h.addClass(`vjs-${e.kind}-menu-item`);a.push(h)}}return a}}V.registerComponent("TextTrackButton",bd);class Gj extends xd{constructor(a,b){const c=b.track,d=b.cue,e=a.currentTime();b.selectable=!0;b.multiSelectable=!1;b.label=d.text;b.selected=d.startTime<=e&&e<d.endTime;super(a,b);this.track=c;this.cue=d}handleClick(a){super.handleClick();this.player_.currentTime(this.cue.startTime)}}V.registerComponent("ChaptersTrackMenuItem",Gj);class Xf extends bd{constructor(a,b,c){super(a,b,c);this.setIcon("chapters");
this.selectCurrentItem_=()=>{this.items.forEach(d=>{d.selected(this.track_.activeCues[0]===d.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(a){a&&a.track&&"chapters"!==a.track.kind||(a=this.findChaptersTrack(),a!==this.track_?(this.setTrack(a),super.update()):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&super.update())}setTrack(a){if(this.track_!==a){this.updateHandler_||
(this.updateHandler_=this.update.bind(this));if(this.track_){const b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_);this.track_.removeEventListener("cuechange",this.selectCurrentItem_);this.track_=null}if(this.track_=a)this.track_.mode="hidden",(a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}findChaptersTrack(){const a=
this.player_.textTracks()||[];for(let b=a.length-1;0<=b;b--){const c=a[b];if(c.kind===this.kind_)return c}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Pa(this.kind_))}createMenu(){this.options_.title=this.getMenuCaption();return super.createMenu()}createItems(){const a=[];if(!this.track_)return a;const b=this.track_.cues;if(!b)return a;for(let c=0,d=b.length;c<d;c++){const e=new Gj(this.player_,{track:this.track_,cue:b[c]});a.push(e)}return a}}Xf.prototype.kind_=
"chapters";Xf.prototype.controlText_="Chapters";V.registerComponent("ChaptersButton",Xf);class Yf extends bd{constructor(a,b,c){super(a,b,c);this.setIcon("audio-description");const d=a.textTracks(),e=Ea(this,this.handleTracksChange);d.addEventListener("change",e);this.on("dispose",function(){d.removeEventListener("change",e)})}handleTracksChange(a){a=this.player().textTracks();let b=!1;for(let c=0,d=a.length;c<d;c++){const e=a[c];if(e.kind!==this.kind_&&"showing"===e.mode){b=!0;break}}b?this.disable():
this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}Yf.prototype.kind_="descriptions";Yf.prototype.controlText_="Descriptions";V.registerComponent("DescriptionsButton",Yf);class Zf extends bd{constructor(a,b,c){super(a,b,c);this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}
Zf.prototype.kind_="subtitles";Zf.prototype.controlText_="Subtitles";V.registerComponent("SubtitlesButton",Zf);class $f extends yd{constructor(a,b){b.track={player:a,kind:b.kind,label:b.kind+" settings",selectable:!1,default:!1,mode:"disabled"};b.selectable=!1;b.name="CaptionSettingsMenuItem";super(a,b);this.addClass("vjs-texttrack-settings");this.controlText(", opens "+b.kind+" settings dialog")}handleClick(a){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=
this.player_.localize(this.options_.kind+" settings");super.handleLanguagechange()}}V.registerComponent("CaptionSettingsMenuItem",$f);class ag extends bd{constructor(a,b,c){super(a,b,c);this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const a=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||
(a.push(new $f(this.player_,{kind:this.kind_})),this.hideThreshold_+=1);return super.createItems(a)}}ag.prototype.kind_="captions";ag.prototype.controlText_="Captions";V.registerComponent("CaptionsButton",ag);class Hj extends yd{createEl(a,b,c){a=super.createEl(a,b,c);b=a.querySelector(".vjs-menu-item-text");"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",a):b.appendChild(ja("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),b.appendChild(ja("span",
{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`})));return a}}V.registerComponent("SubsCapsMenuItem",Hj);class bg extends bd{constructor(a,b={}){super(a,b);this.label_="subtitles";this.setIcon("subtitles");-1<["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)&&(this.label_="captions",this.setIcon("captions"));this.menuButton_.controlText(Pa(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let a=
[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new $f(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return a=super.createItems(a,Hj)}}bg.prototype.kinds_=["captions","subtitles"];bg.prototype.controlText_="Subtitles";V.registerComponent("SubsCapsButton",bg);class Ij extends xd{constructor(a,b){const c=b.track,d=a.audioTracks();b.label=c.label||c.language||"Unknown";b.selected=c.enabled;super(a,b);this.track=c;
this.addClass(`vjs-${c.kind}-menu-item`);const e=(...h)=>{this.handleTracksChange.apply(this,h)};d.addEventListener("change",e);this.on("dispose",()=>{d.removeEventListener("change",e)})}createEl(a,b,c){a=super.createEl(a,b,c);b=a.querySelector(".vjs-menu-item-text");0<=["main-desc","descriptions"].indexOf(this.options_.track.kind)&&(b.appendChild(ja("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),b.appendChild(ja("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")})));
return a}handleClick(a){super.handleClick(a);this.track.enabled=!0;if(this.player_.tech_.featuresNativeAudioTracks){a=this.player_.audioTracks();for(let b=0;b<a.length;b++){const c=a[b];c!==this.track&&(c.enabled=c===this.track)}}}handleTracksChange(a){this.selected(this.track.enabled)}}V.registerComponent("AudioTrackMenuItem",Ij);class Jj extends Wf{constructor(a,b={}){b.tracks=a.audioTracks();super(a,b);this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(a=
[]){this.hideThreshold_=1;const b=this.player_.audioTracks();for(let c=0;c<b.length;c++)a.push(new Ij(this.player_,{track:b[c],selectable:!0,multiSelectable:!1}));return a}}Jj.prototype.controlText_="Audio Track";V.registerComponent("AudioTrackButton",Jj);class cg extends xd{constructor(a,b){const c=b.rate,d=parseFloat(c,10);b.label=c;b.selected=d===a.playbackRate();b.selectable=!0;b.multiSelectable=!1;super(a,b);this.label=c;this.rate=d;this.on(a,"ratechange",e=>this.update(e))}handleClick(a){super.handleClick();
this.player().playbackRate(this.rate)}update(a){this.selected(this.player().playbackRate()===this.rate)}}cg.prototype.contentElType="button";V.registerComponent("PlaybackRateMenuItem",cg);class Kj extends Vf{constructor(a,b){super(a,b);this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_);this.updateVisibility();this.updateLabel();this.on(a,"loadstart",c=>this.updateVisibility(c));this.on(a,"ratechange",c=>this.updateLabel(c));this.on(a,"playbackrateschange",c=>this.handlePlaybackRateschange(c))}createEl(){const a=
super.createEl();this.labelElId_="vjs-playback-rate-value-label-"+this.id_;this.labelEl_=ja("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"});a.appendChild(this.labelEl_);return a}dispose(){this.labelEl_=null;super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const a=this.playbackRates(),b=[];for(let c=a.length-1;0<=c;c--)b.push(new cg(this.player(),
{rate:a[c]+"x"}));return b}handlePlaybackRateschange(a){this.update()}playbackRates(){const a=this.player();return a.playbackRates&&a.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length}updateVisibility(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+
"x")}}Kj.prototype.controlText_="Playback Rate";V.registerComponent("PlaybackRateMenuButton",Kj);class Lj extends V{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(a="div",b={},c={}){b.className||(b.className=this.buildCSSClass());return super.createEl(a,b,c)}}V.registerComponent("Spacer",Lj);class so extends Lj{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\u00a0"})}}
V.registerComponent("CustomControlSpacer",so);class Mj extends V{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Mj.prototype.options_={children:"playToggle skipBackward skipForward volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay seekToLive remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton pictureInPictureToggle fullscreenToggle".split(" ")};V.registerComponent("ControlBar",
Mj);class Nj extends Xc{constructor(a,b){super(a,b);this.on(a,"error",c=>{this.open(c)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const a=this.player().error();return a?this.localize(a.message):""}}Nj.prototype.options_=Object.assign({},Xc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});V.registerComponent("ErrorDisplay",Nj);class Oj extends V{constructor(a,b={}){super(a,b);this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){this.selectLabelledbyIds=
[this.options_.legendId,this.options_.labelId].join(" ").trim();return ja("select",{id:this.options_.id},{},this.options_.SelectOptions.map(a=>{const b=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Eb++}`)+"-"+a[1].replace(/\W+/g,"");a=ja("option",{id:b,value:this.localize(a[0]),textContent:a[1]});a.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${b}`);return a}))}}V.registerComponent("TextTrackSelect",Oj);class Dc extends V{constructor(a,b={}){super(a,b);b=ja("legend",
{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(b);b=this.options_.selects;for(const e of b){var c=this.options_.selectConfigs[e],d=c.className;const h=c.id.replace("%s",this.options_.id_);b=null;const n=`vjs_select_${Eb++}`;"colors"===this.options_.type&&(b=ja("span",{className:d}),d=ja("label",{id:h,className:"vjs-label",textContent:c.label}),d.setAttribute("for",n),b.appendChild(d));c=new Oj(a,{SelectOptions:c.options,legendId:this.options_.legendId,
id:n,labelId:h});this.addChild(c);"colors"===this.options_.type&&(b.appendChild(c.el()),this.el().appendChild(b))}}createEl(){return ja("fieldset",{className:this.options_.className})}}V.registerComponent("TextTrackFieldset",Dc);class Pj extends V{constructor(a,b={}){super(a,b);b=this.options_.textTrackComponentid;var c=new Dc(a,{id_:b,legendId:`captions-text-legend-${b}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,
type:"colors"});this.addChild(c);c=new Dc(a,{id_:b,legendId:`captions-background-${b}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(c);a=new Dc(a,{id_:b,legendId:`captions-window-${b}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});
this.addChild(a)}createEl(){return ja("div",{className:"vjs-track-settings-colors"})}}V.registerComponent("TextTrackSettingsColors",Pj);class Qj extends V{constructor(a,b={}){super(a,b);b=this.options_.textTrackComponentid;var c=new Dc(a,{id_:b,legendId:`captions-font-size-${b}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(c);c=new Dc(a,{id_:b,legendId:`captions-edge-style-${b}`,
legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(c);a=new Dc(a,{id_:b,legendId:`captions-font-family-${b}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return ja("div",{className:"vjs-track-settings-font"})}}
V.registerComponent("TextTrackSettingsFont",Qj);class Rj extends V{constructor(a,b={}){super(a,b);b=this.localize("restore all settings to the default values");const c=new lb(a,{controlText:b,className:"vjs-default-button"});c.el().classList.remove("vjs-control","vjs-button");c.el().textContent=this.localize("Reset");this.addChild(c);a=new lb(a,{controlText:b,className:"vjs-done-button"});a.el().classList.remove("vjs-control","vjs-button");a.el().textContent=this.localize("Done");this.addChild(a)}createEl(){return ja("div",
{className:"vjs-track-settings-controls"})}}V.registerComponent("TrackSettingsControls",Rj);const Sj=["#000","Black"],Tj=["#00F","Blue"],Uj=["#0FF","Cyan"],Vj=["#0F0","Green"],Wj=["#F0F","Magenta"],Xj=["#F00","Red"],Yj=["#FFF","White"],Zj=["#FF0","Yellow"],dg=["1","Opaque"],eg=["0.5","Semi-Transparent"],ak=["0","Transparent"],rc={backgroundColor:{selector:".vjs-bg-color \x3e select",id:"captions-background-color-%s",label:"Color",options:[Sj,Yj,Xj,Vj,Tj,Zj,Wj,Uj],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity \x3e select",
id:"captions-background-opacity-%s",label:"Opacity",options:[dg,eg,ak],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color \x3e select",id:"captions-foreground-color-%s",label:"Color",options:[Yj,Sj,Xj,Vj,Tj,Zj,Wj,Uj],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style \x3e select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family \x3e select",
id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent \x3e select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00",
"400%"]],default:2,parser:a=>"1.00"===a?null:Number(a)},textOpacity:{selector:".vjs-text-opacity \x3e select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[dg,eg],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color \x3e select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity \x3e select",id:"captions-window-opacity-%s",label:"Opacity",options:[ak,eg,dg],className:"vjs-window-opacity vjs-opacity"}};
rc.windowColor.options=rc.backgroundColor.options;class to extends Xc{constructor(a,b){b.temporary=!1;super(a,b);this.updateDisplay=this.updateDisplay.bind(this);this.fill();this.hasBeenOpened_=this.hasBeenFilled_=!0;this.renderModalComponents(a);this.endDialog=ja("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")});this.el().appendChild(this.endDialog);this.setDefaults();void 0===b.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings);
this.bindFunctionsToSelectsAndButtons();this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(a){var b=new Pj(a,{textTrackComponentid:this.id_,selectConfigs:rc,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(b);b=new Qj(a,{textTrackComponentid:this.id_,selectConfigs:rc,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(b);a=new Rj(a);this.addChild(a)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),
["click","tap"],()=>{this.saveSettings();this.close()});this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults();this.updateDisplay()});Kc(rc,a=>{this.on(this.$(a.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null;super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return Jh(rc,
(a,b,c)=>{var d=this.$(b.selector);b=ei(d.options[d.options.selectedIndex].value,b.parser);void 0!==b&&(a[c]=b);return a},{})}setValues(a){Kc(rc,(b,c)=>{var d=this.$(b.selector);c=a[c];b=b.parser;if(c)for(let e=0;e<d.options.length;e++)if(ei(d.options[e].value,b)===c){d.selectedIndex=e;break}})}setDefaults(){Kc(rc,a=>{const b=a.hasOwnProperty("default")?a.default:0;this.$(a.selector).selectedIndex=b})}restoreSettings(){let a;try{a=JSON.parse(J.localStorage.getItem("vjs-text-track-settings"))}catch(b){ra.warn(b)}a&&
this.setValues(a)}saveSettings(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?J.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a)):J.localStorage.removeItem("vjs-text-track-settings")}catch(b){ra.warn(b)}}}updateDisplay(){const a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()}handleLanguagechange(){this.fill();this.renderModalComponents(this.player_);this.bindFunctionsToSelectsAndButtons()}}V.registerComponent("TextTrackSettings",
to);class uo extends V{constructor(a,b){let c=b.ResizeObserver||J.ResizeObserver;null===b.ResizeObserver&&(c=!1);const d=Ca({createEl:!c,reportTouchActivity:!1},b);super(a,d);this.ResizeObserver=b.ResizeObserver||J.ResizeObserver;this.resizeObserver_=this.loadListener_=null;this.debouncedHandler_=cj(()=>{this.resizeHandler()},100,!1,this);c?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(a.el())):(this.loadListener_=()=>{if(this.el_&&this.el_.contentWindow){var e=
this.debouncedHandler_,h=this.unloadListener_=function(){kb(this,"resize",e);kb(this,"unload",h);h=null};wb(this.el_.contentWindow,"unload",h);wb(this.el_.contentWindow,"resize",e)}},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel();
this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.loadListener_&&this.off("load",this.loadListener_);this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow);this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null;super.dispose()}}V.registerComponent("ResizeManager",uo);const vo={trackingThreshold:20,liveTolerance:15};class wo extends V{constructor(a,
b){b=Ca(vo,b,{createEl:!1});super(a,b);this.trackLiveHandler_=()=>this.trackLive_();this.handlePlay_=c=>this.handlePlay(c);this.handleFirstTimeupdate_=c=>this.handleFirstTimeupdate(c);this.handleSeeked_=c=>this.handleSeeked(c);this.seekToLiveEdge_=c=>this.seekToLiveEdge(c);this.reset_();this.on(this.player_,"durationchange",c=>this.handleDurationchange(c));this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){var a=this.player_.seekable();if(a&&a.length){a=Number(J.performance.now().toFixed(4));
var b=-1===this.lastTime_?0:(a-this.lastTime_)/1E3;this.lastTime_=a;this.pastSeekEnd_=this.pastSeekEnd()+b;a=this.liveCurrentTime();b=this.player_.currentTime();b=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-b)>this.options_.liveTolerance;this.timeupdateSeen_&&Infinity!==a||(b=!1);b!==this.behindLiveEdge_&&(this.behindLiveEdge_=b,this.trigger("liveedgechange"))}}handleDurationchange(){this.toggleTracking()}toggleTracking(){Infinity===this.player_.duration()&&this.liveWindow()>=this.options_.trackingThreshold?
(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){if(!this.isTracking())if(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_)this.on(this.player_,"seeked",this.handleSeeked_);else this.one(this.player_,
"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)}handleFirstTimeupdate(){this.timeupdateSeen_=!0;this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<a;this.nextSeekedFromUser_=!1;this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=
-1;this.behindLiveEdge_=!0;this.nextSeekedFromUser_=this.seekedBehindLive_=this.timeupdateSeen_=!1;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLiveHandler_);this.off(this.player_,"seeked",this.handleSeeked_);this.off(this.player_,"play",this.handlePlay_);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_);this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&
(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const a=this.player_.seekable(),b=[];let c=a?a.length:0;for(;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:Infinity}seekableStart(){const a=this.player_.seekable(),b=[];let c=a?a.length:0;for(;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0}liveWindow(){const a=this.liveCurrentTime();return Infinity===a?0:a-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+
this.seekableEnd()}pastSeekEnd(){const a=this.seekableEnd();-1!==this.lastSeekEnd_&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0);this.lastSeekEnd_=a;return this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"===typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1;this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking();super.dispose()}}V.registerComponent("LiveTracker",
wo);class xo extends V{constructor(a,b){super(a,b);this.on("statechanged",c=>this.updateDom_());this.updateDom_()}createEl(){this.els={title:ja("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Eb++}`}),description:ja("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Eb++}`})};return ja("div",{className:"vjs-title-bar"},{},Kh(this.els))}updateDom_(){const a=this.player_.tech_,b=a&&a.el_,c={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(d=>
{const e=this.state[d],h=this.els[d];d=c[d];Wd(h);e&&kc(h,e);b&&(b.removeAttribute(d),e&&b.setAttribute(d,h.id))});this.state.title||this.state.description?this.show():this.hide()}update(a){this.setState(a)}dispose(){var a=this.player_.tech_;if(a=a&&a.el_)a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby");super.dispose();this.els=null}}V.registerComponent("TitleBar",xo);const yo={initialDisplay:4E3,position:[],takeFocus:!1};class zo extends lb{constructor(a,b){b=Ca(yo,b);super(a,
b);this.controlText(b.controlText);this.hide();this.on(this.player_,["useractive","userinactive"],c=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(a=>`vjs-${a}`).join(" ")}`}createEl(){const a=ja("button",{},{type:"button",class:this.buildCSSClass()},ja("span"));this.controlTextEl_=a.querySelector("span");return a}show(){super.show();this.addClass("force-display");this.options_.takeFocus&&this.el().focus({preventScroll:!0});
this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display");super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout);super.dispose()}}V.registerComponent("TransientButton",zo);const fg=a=>{var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;b=a.$$("source");const c=[];let d="";if(!b.length)return!1;for(let e=0;e<b.length;e++){const h=b[e].src;h&&-1===c.indexOf(h)&&
c.push(h)}if(!c.length)return!1;1===c.length&&(d=c[0]);a.triggerSourceset(d);return!0},Ao=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(a){const b=ca.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(a=ca.createDocumentFragment();b.childNodes.length;)a.appendChild(b.childNodes[0]);this.innerText="";J.Element.prototype.appendChild.call(this,a);return this.innerHTML}}),bk=(a,b)=>{let c={};for(let d=0;d<a.length&&!((c=Object.getOwnPropertyDescriptor(a[d],
b))&&c.set&&c.get);d++);c.enumerable=!0;c.configurable=!0;return c},ck=function(a){const b=a.el();if(!b.resetSourceWatch_){var c={},d=bk([a.el(),J.HTMLMediaElement.prototype,J.Element.prototype,Ao],"innerHTML"),e=h=>(...n)=>{n=h.apply(b,n);fg(a);return n};["append","appendChild","insertAdjacentHTML"].forEach(h=>{b[h]&&(c[h]=b[h],b[h]=e(c[h]))});Object.defineProperty(b,"innerHTML",Ca(d,{set:e(d.set)}));b.resetSourceWatch_=()=>{b.resetSourceWatch_=null;Object.keys(c).forEach(h=>{b[h]=c[h]});Object.defineProperty(b,
"innerHTML",d)};a.one("sourceset",b.resetSourceWatch_)}},Bo=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?jj(J.Element.prototype.getAttribute.call(this,"src")):""},set(a){J.Element.prototype.setAttribute.call(this,"src",a);return a}}),Co=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=bk([a.el(),J.HTMLMediaElement.prototype,Bo],"src"),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",Ca(c,{set:h=>{h=c.set.call(b,h);a.triggerSourceset(b.src);
return h}}));b.setAttribute=(h,n)=>{n=d.call(b,h,n);/src/i.test(h)&&a.triggerSourceset(b.src);return n};b.load=()=>{const h=e.call(b);fg(a)||(a.triggerSourceset(""),ck(a));return h};b.currentSrc?a.triggerSourceset(b.currentSrc):fg(a)||ck(a);b.resetSourceset_=()=>{b.resetSourceset_=null;b.load=e;b.setAttribute=d;Object.defineProperty(b,"src",c);b.resetSourceWatch_&&b.resetSourceWatch_()}}}};class ea extends ma{constructor(a,b){super(a,b);var c=a.source;b=!1;this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&
"VIDEO"===this.el_.tagName;c&&(this.el_.currentSrc!==c.src||a.tag&&3===a.tag.initNetworkState_)?this.setSource(c):this.handleLateInit_(this.el_);a.enableSourceset&&this.setupSourcesetHandling_();this.isScrubbing_=!1;if(this.el_.hasChildNodes()){var d=this.el_.childNodes;let e=d.length;for(c=[];e--;){const h=d[e];"track"===h.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(h),this.remoteTextTracks().addTrack(h.track),this.textTracks().addTrack(h.track),
b||this.el_.hasAttribute("crossorigin")||!te(h.src)||(b=!0)):c.push(h))}for(d=0;d<c.length;d++)this.el_.removeChild(c[d])}this.proxyNativeTracks_();this.featuresNativeTextTracks&&b&&ra.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");this.restoreMetadataTracksInIOSNativePlayer_();(ud||ke)&&!0===a.nativeControlsForTouch&&this.setControls(!0);this.proxyWebkitFullscreen_();this.triggerReady()}dispose(){this.el_&&
this.el_.resetSourceset_&&this.el_.resetSourceset_();ea.disposeMediaElement(this.el_);this.options_=null;super.dispose()}setupSourcesetHandling_(){Co(this)}restoreMetadataTracksInIOSNativePlayer_(){const a=this.textTracks();let b;const c=()=>{b=[];for(let e=0;e<a.length;e++){const h=a[e];"metadata"===h.kind&&b.push({track:h,storedMode:h.mode})}};c();a.addEventListener("change",c);this.on("dispose",()=>a.removeEventListener("change",c));const d=()=>{for(let e=0;e<b.length;e++){const h=b[e];"disabled"===
h.track.mode&&h.track.mode!==h.storedMode&&(h.track.mode=h.storedMode)}a.removeEventListener("change",d)};this.on("webkitbeginfullscreen",()=>{a.removeEventListener("change",c);a.removeEventListener("change",d);a.addEventListener("change",d)});this.on("webkitendfullscreen",()=>{a.removeEventListener("change",c);a.addEventListener("change",c);a.removeEventListener("change",d)})}overrideNative_(a,b){if(b===this[`featuresNative${a}Tracks`]){var c=a.toLowerCase();this[`${c}TracksListeners_`]&&Object.keys(this[`${c}TracksListeners_`]).forEach(d=>
{this.el()[`${c}Tracks`].removeEventListener(d,this[`${c}TracksListeners_`][d])});this[`featuresNative${a}Tracks`]=!b;this[`${c}TracksListeners_`]=null;this.proxyNativeTracksForType_(c)}}overrideNativeAudioTracks(a){this.overrideNative_("Audio",a)}overrideNativeVideoTracks(a){this.overrideNative_("Video",a)}proxyNativeTracksForType_(a){const b=Fb[a],c=this.el()[b.getterName],d=this[b.getterName]();if(this[`featuresNative${b.capitalName}Tracks`]&&c&&c.addEventListener){var e={change:n=>{n={type:"change",
target:d,currentTarget:d,srcElement:d};d.trigger(n);"text"===a&&this[Zc.remoteText.getterName]().trigger(n)},addtrack(n){d.addTrack(n.track)},removetrack(n){d.removeTrack(n.track)}},h=function(){const n=[];for(let u=0;u<d.length;u++){let t=!1;for(let A=0;A<c.length;A++)if(c[A]===d[u]){t=!0;break}t||n.push(d[u])}for(;n.length;)d.removeTrack(n.shift())};this[b.getterName+"Listeners_"]=e;Object.keys(e).forEach(n=>{const u=e[n];c.addEventListener(n,u);this.on("dispose",t=>c.removeEventListener(n,u))});
this.on("loadstart",h);this.on("dispose",n=>this.off("loadstart",h))}}proxyNativeTracks_(){Fb.names.forEach(a=>{this.proxyNativeTracksForType_(a)})}createEl(){let a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var b=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(b,a);ea.disposeMediaElement(a);a=b}else a=ca.createElement("video"),b=this.options_.tag&&lc(this.options_.tag),b=Ca({},b),ud&&!0===this.options_.nativeControlsForTouch||delete b.controls,
Oh(a,Object.assign(b,{id:this.options_.techId,class:"vjs-tech"}));a.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&a.setAttribute("preload",this.options_.preload);void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);b=["loop","muted","playsinline","autoplay"];for(let c=0;c<b.length;c++){const d=b[c],e=this.options_[d];"undefined"!==typeof e&&(e?a.setAttribute(d,d):a.removeAttribute(d),a[d]=e)}return a}handleLateInit_(a){if(0!==
a.networkState&&3!==a.networkState)if(0===a.readyState){let c=!1;const d=function(){c=!0};this.on("loadstart",d);const e=function(){c||this.trigger("loadstart")};this.on("loadedmetadata",e);this.ready(function(){this.off("loadstart",d);this.off("loadedmetadata",e);c||this.trigger("loadstart")})}else{var b=["loadstart"];b.push("loadedmetadata");2<=a.readyState&&b.push("loadeddata");3<=a.readyState&&b.push("canplay");4<=a.readyState&&b.push("canplaythrough");this.ready(function(){b.forEach(function(c){this.trigger(c)},
this)})}}setScrubbing(a){this.isScrubbing_=a}scrubbing(){return this.isScrubbing_}setCurrentTime(a){try{this.isScrubbing_&&this.el_.fastSeek&&oe?this.el_.fastSeek(a):this.el_.currentTime=a}catch(b){ra(b,"Video is not ready. (Video.js)")}}duration(){if(Infinity===this.el_.duration&&Qb&&Rb&&0===this.el_.currentTime){const a=()=>{0<this.el_.currentTime&&(Infinity===this.el_.duration&&this.trigger("durationchange"),this.off("timeupdate",a))};this.on("timeupdate",a);return NaN}return this.el_.duration||
NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1});this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},b=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,
nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",b);this.on("dispose",()=>{this.off("webkitbeginfullscreen",b);this.off("webkitendfullscreen",a)})}}supportsFullScreen(){return"function"===typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)Nb(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},0);else try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",
b)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(a){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(a):super.requestVideoFrameCallback(a)}cancelVideoFrameCallback(a){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(a):
super.cancelVideoFrameCallback(a)}src(a){if(void 0===a)return this.el_.src;this.setSrc(a)}reset(){ea.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(a){this.el_.controls=!!a}addTextTrack(a,b,c){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,b,c):super.addTextTrack(a,b,c)}createRemoteTextTrack(a){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(a);const b=ca.createElement("track");a.kind&&
(b.kind=a.kind);a.label&&(b.label=a.label);if(a.language||a.srclang)b.srclang=a.language||a.srclang;a.default&&(b.default=a.default);a.id&&(b.id=a.id);a.src&&(b.src=a.src);return b}addRemoteTextTrack(a,b){a=super.addRemoteTextTrack(a,b);this.featuresNativeTextTracks&&this.el().appendChild(a);return a}removeRemoteTextTrack(a){super.removeRemoteTextTrack(a);if(this.featuresNativeTextTracks){const b=this.$$("track");let c=b.length;for(;c--;)a!==b[c]&&a!==b[c].track||this.el().removeChild(b[c])}}getVideoPlaybackQuality(){if("function"===
typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const a={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount);J.performance&&(a.creationTime=J.performance.now());return a}}Sd(ea,"TEST_VID",function(){if(Mc()){var a=ca.createElement("video"),b=ca.createElement("track");b.kind="captions";b.srclang=
"en";b.label="English";a.appendChild(b);return a}});ea.isSupported=function(){try{ea.TEST_VID.volume=.5}catch(a){return!1}return!(!ea.TEST_VID||!ea.TEST_VID.canPlayType)};ea.canPlayType=function(a){return ea.TEST_VID.canPlayType(a)};ea.canPlaySource=function(a,b){return ea.canPlayType(a.type)};ea.canControlVolume=function(){try{const a=ea.TEST_VID.volume;ea.TEST_VID.volume=a/2+.1;const b=a!==ea.TEST_VID.volume;return b&&nb?(J.setTimeout(()=>{ea&&ea.prototype&&(ea.prototype.featuresVolumeControl=a!==
ea.TEST_VID.volume)}),!1):b}catch(a){return!1}};ea.canMuteVolume=function(){try{const a=ea.TEST_VID.muted;ea.TEST_VID.muted=!a;ea.TEST_VID.muted?ea.TEST_VID.setAttribute("muted","muted"):ea.TEST_VID.removeAttribute("muted");return a!==ea.TEST_VID.muted}catch(a){return!1}};ea.canControlPlaybackRate=function(){if(Qb&&Rb&&58>ge)return!1;try{const a=ea.TEST_VID.playbackRate;ea.TEST_VID.playbackRate=a/2+.1;return a!==ea.TEST_VID.playbackRate}catch(a){return!1}};ea.canOverrideAttributes=function(){try{const a=
()=>{};Object.defineProperty(ca.createElement("video"),"src",{get:a,set:a});Object.defineProperty(ca.createElement("audio"),"src",{get:a,set:a});Object.defineProperty(ca.createElement("video"),"innerHTML",{get:a,set:a});Object.defineProperty(ca.createElement("audio"),"innerHTML",{get:a,set:a})}catch(a){return!1}return!0};ea.supportsNativeTextTracks=function(){return oe||nb&&Rb};ea.supportsNativeVideoTracks=function(){return!(!ea.TEST_VID||!ea.TEST_VID.videoTracks)};ea.supportsNativeAudioTracks=function(){return!(!ea.TEST_VID||
!ea.TEST_VID.audioTracks)};ea.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],
["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([a,b]){Sd(ea.prototype,a,()=>ea[b](),!0)});ea.prototype.featuresVolumeControl=ea.canControlVolume();ea.prototype.movingMediaElementInDOM=!nb;ea.prototype.featuresFullscreenResize=!0;ea.prototype.featuresProgressEvents=!0;ea.prototype.featuresTimeupdateEvents=!0;ea.prototype.featuresVideoFrameCallback=!(!ea.TEST_VID||!ea.TEST_VID.requestVideoFrameCallback);ea.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);
a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(b){}}};ea.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(d){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(a){ea.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){ea.prototype["set"+
Pa(a)]=function(b){(this.el_[a]=b)?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate disablePictureInPicture played networkState readyState videoWidth videoHeight crossOrigin".split(" ").forEach(function(a){ea.prototype[a]=function(){return this.el_[a]}});"volume src poster preload playbackRate defaultPlaybackRate disablePictureInPicture crossOrigin".split(" ").forEach(function(a){ea.prototype["set"+
Pa(a)]=function(b){this.el_[a]=b}});["pause","load","play"].forEach(function(a){ea.prototype[a]=function(){return this.el_[a]()}});ma.withSourceHandlers(ea);ea.nativeSourceHandler={};ea.nativeSourceHandler.canPlayType=function(a){try{return ea.TEST_VID.canPlayType(a)}catch(b){return""}};ea.nativeSourceHandler.canHandleSource=function(a,b){return a.type?ea.nativeSourceHandler.canPlayType(a.type):a.src?(a=Nf(a.src),ea.nativeSourceHandler.canPlayType(`video/${a}`)):""};ea.nativeSourceHandler.handleSource=
function(a,b,c){b.setSrc(a.src)};ea.nativeSourceHandler.dispose=function(){};ea.registerSourceHandler(ea.nativeSourceHandler);ma.registerTech("Html5",ea);const dk="progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),gg={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},hg="tiny xsmall small medium large xlarge huge".split(" "),we={};hg.forEach(a=>{const b="x"===a.charAt(0)?`x-${a.substring(1)}`:
a;we[a]=`vjs-layout-${b}`});const Do={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};class Ia extends V{constructor(a,b,c){a.id=a.id||b.id||`vjs_video_${Eb++}`;b=Object.assign(Ia.getTagSettings(a),b);b.initChildren=!1;b.createEl=!1;b.evented=!1;b.reportTouchActivity=!1;if(!b.language){const d=a.closest("[lang]");d&&(b.language=d.getAttribute("lang"))}super(null,b,c);this.boundDocumentFullscreenChange_=d=>this.documentFullscreenChange_(d);this.boundFullWindowOnEscKey_=
d=>this.fullWindowOnEscKey(d);this.boundUpdateStyleEl_=d=>this.updateStyleEl_(d);this.boundApplyInitTime_=d=>this.applyInitTime_(d);this.boundUpdateCurrentBreakpoint_=d=>this.updateCurrentBreakpoint_(d);this.boundHandleTechClick_=d=>this.handleTechClick_(d);this.boundHandleTechDoubleClick_=d=>this.handleTechDoubleClick_(d);this.boundHandleTechTouchStart_=d=>this.handleTechTouchStart_(d);this.boundHandleTechTouchMove_=d=>this.handleTechTouchMove_(d);this.boundHandleTechTouchEnd_=d=>this.handleTechTouchEnd_(d);
this.boundHandleTechTap_=d=>this.handleTechTap_(d);this.boundUpdatePlayerHeightOnAudioOnlyMode_=d=>this.updatePlayerHeightOnAudioOnlyMode_(d);this.isFullscreen_=!1;this.log=Ti(this.id_);this.fsApi_=Ud;this.isPosterFromTech_=!1;this.queuedCallbacks_=[];this.audioPosterMode_=this.audioOnlyMode_=this.debugEnabled_=this.userActive_=this.hasStarted_=this.isReady_=!1;this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]};if(!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
this.tagAttributes=(this.tag=a)&&lc(a);this.language(this.options_.language);if(b.languages){const d={};Object.getOwnPropertyNames(b.languages).forEach(function(e){d[e.toLowerCase()]=b.languages[e]});this.languages_=d}else this.languages_=Ia.prototype.options_.languages;this.resetCache_();this.poster_=b.poster||"";this.controls_=!!b.controls;a.controls=!1;a.removeAttribute("controls");this.changingSrc_=!1;this.playCallbacks_=[];this.playTerminatedQueue_=[];a.hasAttribute("autoplay")?this.autoplay(!0):
this.autoplay(this.options_.autoplay);b.plugins&&Object.keys(b.plugins).forEach(d=>{if("function"!==typeof this[d])throw Error(`plugin "${d}" does not exist`);});this.scrubbing_=!1;this.el_=this.createEl();kf(this,{eventBusKey:"el_"});this.fsApi_.requestFullscreen&&(wb(ca,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_));if(this.fluid_)this.on(["playerreset","resize"],this.boundUpdateStyleEl_);c=Ca(this.options_);
b.plugins&&Object.keys(b.plugins).forEach(d=>{this[d](b.plugins[d])});b.debug&&this.debug(!0);this.options_.playerOptions=c;this.middleware_=[];this.playbackRates(b.playbackRates);b.experimentalSvgIcons&&(c=(new J.DOMParser).parseFromString('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"\x3e\n  \x3cdefs\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-play"\x3e\n      \x3cpath d\x3d"M16 10v28l22-14z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-pause"\x3e\n      \x3cpath d\x3d"M12 38h8V10h-8v28zm16-28v28h8V10h-8z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-audio"\x3e\n      \x3cpath d\x3d"M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-captions"\x3e\n      \x3cpath d\x3d"M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-subtitles"\x3e\n      \x3cpath d\x3d"M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-fullscreen-enter"\x3e\n      \x3cpath d\x3d"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-fullscreen-exit"\x3e\n      \x3cpath d\x3d"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-play-circle"\x3e\n      \x3cpath d\x3d"M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-volume-mute"\x3e\n      \x3cpath d\x3d"M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-volume-low"\x3e\n      \x3cpath d\x3d"M14 18v12h8l10 10V8L22 18h-8z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-volume-medium"\x3e\n      \x3cpath d\x3d"M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-volume-high"\x3e\n      \x3cpath d\x3d"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-spinner"\x3e\n      \x3cpath d\x3d"M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 24 24" id\x3d"vjs-icon-hd"\x3e\n      \x3cpath d\x3d"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-chapters"\x3e\n      \x3cpath d\x3d"M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 40 40" id\x3d"vjs-icon-downloading"\x3e\n      \x3cpath d\x3d"M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-file-download"\x3e\n      \x3cpath d\x3d"M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-file-download-done"\x3e\n      \x3cpath d\x3d"M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-file-download-off"\x3e\n      \x3cpath d\x3d"M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-share"\x3e\n      \x3cpath d\x3d"M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-cog"\x3e\n      \x3cpath d\x3d"M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-square"\x3e\n      \x3cpath d\x3d"M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-circle"\x3e\n      \x3ccircle cx\x3d"24" cy\x3d"24" r\x3d"20"\x3e\x3c/circle\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-circle-outline"\x3e\n      \x3cpath d\x3d"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-circle-inner-circle"\x3e\n      \x3cpath d\x3d"M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-cancel"\x3e\n      \x3cpath d\x3d"M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-replay"\x3e\n      \x3cpath d\x3d"M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-repeat"\x3e\n      \x3cpath d\x3d"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-5"\x3e\n      \x3cpath d\x3d"M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-10"\x3e\n      \x3cpath d\x3d"M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-replay-30"\x3e\n      \x3cpath d\x3d"M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-5"\x3e\n      \x3cpath d\x3d"M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-10"\x3e\n      \x3cpath d\x3d"M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 96 48 48" id\x3d"vjs-icon-forward-30"\x3e\n      \x3cpath d\x3d"M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 512 512" id\x3d"vjs-icon-audio-description"\x3e\n      \x3cg fill-rule\x3d"evenodd"\x3e\x3cpath d\x3d"M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"\x3e\x3c/path\x3e\x3cpath d\x3d"M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"\x3e\x3c/path\x3e\x3cpath d\x3d"M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"\x3e\x3c/path\x3e\x3cpath d\x3d"M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"\x3e\x3c/path\x3e\x3c/g\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-next-item"\x3e\n      \x3cpath d\x3d"M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-previous-item"\x3e\n      \x3cpath d\x3d"M12 12h4v24h-4zm7 12l17 12V12z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-shuffle"\x3e\n      \x3cpath d\x3d"M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-cast"\x3e\n      \x3cpath d\x3d"M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 48 48" id\x3d"vjs-icon-picture-in-picture-enter"\x3e\n      \x3cpath d\x3d"M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 22 18" id\x3d"vjs-icon-picture-in-picture-exit"\x3e\n      \x3cpath d\x3d"M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"\x3e\x3c/path\x3e\n      \x3cpath fill\x3d"none" d\x3d"M-1-3h24v24H-1z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 1792 1792" id\x3d"vjs-icon-facebook"\x3e\n      \x3cpath d\x3d"M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 1792 1792" id\x3d"vjs-icon-linkedin"\x3e\n      \x3cpath d\x3d"M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 1200 1227" id\x3d"vjs-icon-twitter"\x3e\n      \x3cpath d\x3d"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 1792 1792" id\x3d"vjs-icon-tumblr"\x3e\n      \x3cpath d\x3d"M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n    \x3csymbol viewBox\x3d"0 0 1792 1792" id\x3d"vjs-icon-pinterest"\x3e\n      \x3cpath d\x3d"M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"\x3e\x3c/path\x3e\n    \x3c/symbol\x3e\n  \x3c/defs\x3e\n\x3c/svg\x3e',
"image/svg+xml"),c.querySelector("parsererror")?(ra.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null):(c=c.documentElement,c.style.display="none",this.el_.appendChild(c),this.addClass("vjs-svg-icons-enabled")));this.initChildren();this.isAudio("audio"===a.nodeName.toLowerCase());this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled");this.el_.setAttribute("role","region");this.isAudio()?this.el_.setAttribute("aria-label",
this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player"));this.isAudio()&&this.addClass("vjs-audio");b.spatialNavigation&&b.spatialNavigation.enabled&&(this.spatialNavigation=new co(this),this.addClass("vjs-spatial-navigation-enabled"));ud&&this.addClass("vjs-touch-enabled");nb||this.addClass("vjs-workinghover");Ia.players[this.id_]=this;this.addClass("vjs-v8");this.userActive(!0);this.reportUserActivity();this.one("play",d=>this.listenForUserActivity_(d));this.on("keydown",
d=>this.handleKeyDown(d));this.on("languagechange",d=>this.handleLanguagechange(d));this.breakpoints(this.options_.breakpoints);this.responsive(this.options_.responsive);this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode);this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose");this.off("dispose");kb(ca,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);kb(ca,"keydown",this.boundFullWindowOnEscKey_);this.styleEl_&&this.styleEl_.parentNode&&
(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);Ia.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);$d.hasOwnProperty(this.id())&&delete $d[this.id()];pb.names.forEach(a=>{(a=this[pb[a].getterName]())&&a.off&&a.off()});super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let a=
this.tag,b,c=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player");const d="video-js"===this.tag.tagName.toLowerCase();c?b=this.el_=a.parentNode:d||(b=this.el_=super.createEl("div"));const e=lc(a);if(d){b=this.el_=a;for(a=this.tag=ca.createElement("video");b.children.length;)a.appendChild(b.firstChild);ld(b,"video-js")||vc(b,"video-js");b.appendChild(a);c=this.playerElIngest_=b;Object.keys(b).forEach(u=>{try{a[u]=b[u]}catch(t){}})}a.setAttribute("tabindex",
"-1");e.tabindex="-1";Rb&&ie&&(a.setAttribute("role","application"),e.role="application");a.removeAttribute("width");a.removeAttribute("height");"width"in e&&delete e.width;"height"in e&&delete e.height;Object.getOwnPropertyNames(e).forEach(function(u){d&&"class"===u||b.setAttribute(u,e[u]);d&&a.setAttribute(u,e[u])});a.playerId=a.id;a.id+="_html5_api";a.className="vjs-tech";a.player=b.player=this;this.addClass("vjs-paused");var h="IS_SMART_TV IS_TIZEN IS_WEBOS IS_ANDROID IS_IPAD IS_IPHONE IS_CHROMECAST_RECEIVER".split(" ").filter(u=>
Yi[u]).map(u=>"vjs-device-"+u.substring(3).toLowerCase().replace(/_/g,"-"));this.addClass(...h);if(!0!==J.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=aj("vjs-styles-dimensions");h=mc(".vjs-styles-defaults");var n=mc("head");n.insertBefore(this.styleEl_,h?h.nextSibling:n.firstChild)}this.fluid_=this.fill_=!1;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||
this.options_.crossorigin);h=a.getElementsByTagName("a");for(n=0;n<h.length;n++){const u=h.item(n);vc(u,"vjs-hidden");u.setAttribute("hidden","hidden")}a.initNetworkState_=a.networkState;a.parentNode&&!c&&a.parentNode.insertBefore(b,a);df(a,b);this.children_.unshift(a);this.el_.setAttribute("lang",this.language_);this.el_.setAttribute("translate","no");return this.el_=b}crossOrigin(a){if("undefined"===typeof a)return this.techGet_("crossOrigin");null!==a&&"anonymous"!==a&&"use-credentials"!==a?ra.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${a}"`):
(this.techCall_("setCrossOrigin",a),this.posterImage&&this.posterImage.crossOrigin(a))}width(a){return this.dimension("width",a)}height(a){return this.dimension("height",a)}dimension(a,b){const c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)this[c]=void 0,this.updateStyleEl_();else{var d=parseFloat(b);isNaN(d)?ra.error(`Improper value "${b}" supplied for for ${a}`):(this[c]=d,this.updateStyleEl_())}}fluid(a){if(void 0===a)return!!this.fluid_;this.fluid_=!!a;dc(this)&&this.off(["playerreset",
"resize"],this.boundUpdateStyleEl_);a?(this.addClass("vjs-fluid"),this.fill(!1),Pn(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid");this.updateStyleEl_()}fill(a){if(void 0===a)return!!this.fill_;this.fill_=!!a;a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+:\d+$/.test(a))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
this.aspectRatio_=a;this.fluid(!0);this.updateStyleEl_()}updateStyleEl_(){if(!0===J.VIDEOJS_NO_DYNAMIC_STYLE){var a="number"===typeof this.width_?this.width_:this.options_.width,b="number"===typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();c&&(0<=a&&(c.width=a),0<=b&&(c.height=b))}else{a=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var d=a[1]/a[0];a=void 0!==
this.width_?this.width_:void 0!==this.height_?this.height_/d:this.videoWidth()||300;b=void 0!==this.height_?this.height_:a*d;c=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(c);bj(this.styleEl_,`\n      .${c} {\n        width: ${a}px;\n        height: ${b}px;\n      }\n\n      .${c}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*d}%;\n      }\n    `)}}loadTech_(a,b){this.tech_&&this.unloadTech_();const c=Pa(a),d=a.charAt(0).toLowerCase()+
a.slice(1);"Html5"!==c&&this.tag&&(ma.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=c;this.isReady_=!1;let e=this.autoplay();if("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)e=!1;const h={source:b,autoplay:e,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${d}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,
muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};pb.names.forEach(n=>{n=pb[n];h[n.getterName]=this[n.privateName]});Object.assign(h,this.options_[c]);Object.assign(h,this.options_[d]);Object.assign(h,this.options_[a.toLowerCase()]);this.tag&&(h.tag=this.tag);b&&b.src===this.cache_.src&&0<this.cache_.currentTime&&
(h.startTime=this.cache_.currentTime);a=ma.getTech(a);if(!a)throw Error(`No Tech named '${c}' exists! '${c}' should be registered using videojs.registerTech()'`);this.tech_=new a(h);this.tech_.ready(Ea(this,this.handleTechReady_),!0);gj.jsonToTextTracks(this.textTracksJson_||[],this.tech_);dk.forEach(n=>{this.on(this.tech_,n,u=>this[`handleTech${Pa(n)}_`](u))});Object.keys(gg).forEach(n=>{this.on(this.tech_,n,u=>{if(0===this.tech_.playbackRate()&&this.tech_.seeking())this.queuedCallbacks_.push({callback:this[`handleTech${gg[n]}_`].bind(this),
event:u});else this[`handleTech${gg[n]}_`](u)})});this.on(this.tech_,"loadstart",n=>this.handleTechLoadStart_(n));this.on(this.tech_,"sourceset",n=>this.handleTechSourceset_(n));this.on(this.tech_,"waiting",n=>this.handleTechWaiting_(n));this.on(this.tech_,"ended",n=>this.handleTechEnded_(n));this.on(this.tech_,"seeking",n=>this.handleTechSeeking_(n));this.on(this.tech_,"play",n=>this.handleTechPlay_(n));this.on(this.tech_,"pause",n=>this.handleTechPause_(n));this.on(this.tech_,"durationchange",n=>
this.handleTechDurationChange_(n));this.on(this.tech_,"fullscreenchange",(n,u)=>this.handleTechFullscreenChange_(n,u));this.on(this.tech_,"fullscreenerror",(n,u)=>this.handleTechFullscreenError_(n,u));this.on(this.tech_,"enterpictureinpicture",n=>this.handleTechEnterPictureInPicture_(n));this.on(this.tech_,"leavepictureinpicture",n=>this.handleTechLeavePictureInPicture_(n));this.on(this.tech_,"error",n=>this.handleTechError_(n));this.on(this.tech_,"posterchange",n=>this.handleTechPosterChange_(n));
this.on(this.tech_,"textdata",n=>this.handleTechTextData_(n));this.on(this.tech_,"ratechange",n=>this.handleTechRateChange_(n));this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===c&&this.tag||df(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)}unloadTech_(){pb.names.forEach(a=>{a=pb[a];this[a.privateName]=
this[a.getterName]()});this.textTracksJson_=gj.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1}tech(a){void 0===a&&ra.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");return this.tech_}version(){return{"video.js":"8.18.1"}}addTechControlsListeners_(){this.removeTechControlsListeners_();
this.on(this.tech_,"click",this.boundHandleTechClick_);this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_);this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_);
this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.off(this.tech_,"click",this.boundHandleTechClick_);this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking");this.error(null);
this.handleTechDurationChange_();this.paused()&&this.hasStarted(!1);this.trigger("loadstart");this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(a){if(this.tech_&&"string"===typeof a){var b=()=>{const d=this.muted();this.muted(!0);const e=()=>{this.muted(d)};this.playTerminatedQueue_.push(e);const h=this.play();if(od(h))return h.catch(n=>{e();throw Error(`Rejection at manualAutoplay. Restoring muted value. ${n?n:""}`);})};if("any"!==
a||this.muted())var c="muted"!==a||this.muted()?this.play():b();else c=this.play(),od(c)&&(c=c.catch(b));if(od(c))return c.then(()=>{this.trigger({type:"autoplay-success",autoplay:a})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:a})})}}updateSourceCaches_(a=""){let b=a;var c="";"string"!==typeof b&&(b=a.src,c=a.type);this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];b&&!c&&(c=bo(this,b));this.cache_.source=Ca({},a,{src:b,type:c});a=this.cache_.sources.filter(h=>
h.src&&h.src===b);c=[];const d=this.$$("source"),e=[];for(let h=0;h<d.length;h++){const n=lc(d[h]);c.push(n);n.src&&n.src===b&&e.push(n.src)}e.length&&!a.length?this.cache_.sources=c:a.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=b}handleTechSourceset_(a){if(!this.changingSrc_){let b=e=>this.updateSourceCaches_(e);const c=this.currentSource().src,d=a.src;c&&!/^blob:/.test(c)&&/^blob:/.test(d)&&(!this.lastSource_||this.lastSource_.tech!==d&&this.lastSource_.player!==c)&&(b=()=>
{});b(d);a.src||this.tech_.any(["sourceset","loadstart"],e=>{"sourceset"!==e.type&&(e=this.techGet_("currentSrc"),this.lastSource_.tech=e,this.updateSourceCaches_(e))})}this.lastSource_={player:this.currentSource().src,tech:a.src};this.trigger({src:a.src,type:"sourceset"})}hasStarted(a){if(void 0===a)return this.hasStarted_;a!==this.hasStarted_&&((this.hasStarted_=a)?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused");
this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")}handleTechRateChange_(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(a=>a.callback(a.event)),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting");this.trigger("waiting");const a=this.currentTime(),b=()=>{a!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",
b))};this.on("timeupdate",b)}handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended");this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");
this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended");this.removeClass("vjs-waiting");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(a){!this.controls_||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&
"function"===typeof this.options_.userActions.click?this.options_.userActions.click.call(this,a):this.paused()?Nb(this.play()):this.pause())}handleTechDoubleClick_(a){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),b=>b.contains(a.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===
typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(a){a.cancelable&&a.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(a){a=
a.target.player;if(!a||a===this){a=this.el();var b=ca[this.fsApi_.fullscreenElement]===a;!b&&a.matches&&(b=a.matches(":"+this.fsApi_.fullscreen));this.isFullscreen(b)}}handleTechFullscreenChange_(a,b){b&&(b.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(b.isFullscreen))}handleTechFullscreenError_(a,b){this.trigger("fullscreenerror",b)}togglePictureInPictureClass_(){this.isInPictureInPicture()?
this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(a){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(a){this.isInPictureInPicture(!1)}handleTechError_(){const a=this.tech_.error();a&&this.error(a)}handleTechTextData_(){let a=null;1<arguments.length&&(a=arguments[1]);this.trigger("textdata",a)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,
duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(a,b){this.ready(function(){if(a in $n)return this.tech_[a](this.middleware_.reduce(nf(a),b));if(a in oj)return ci(this.middleware_,this.tech_,a,b);try{if(this.tech_)this.tech_[a](b)}catch(c){throw ra(c),c;}},!0)}techGet_(a){if(this.tech_&&this.tech_.isReady_){if(a in Zn){var b=this.tech_;return this.middleware_.reduceRight(nf(a),b[a]())}if(a in oj)return ci(this.middleware_,
this.tech_,a);try{return this.tech_[a]()}catch(c){if(void 0===this.tech_[a])throw ra(`Video.js: ${a} method not defined for ${this.techName_} playback technology.`,c),c;if("TypeError"===c.name)throw ra(`Video.js: ${a} unavailable on ${this.techName_} playback technology element.`,c),this.tech_.isReady_=!1,c;ra(c);throw c;}}}play(){return new Promise(a=>{this.play_(a)})}play_(a=Nb){this.playCallbacks_.push(a);var b=!(this.changingSrc_||!this.src()&&!this.currentSrc());a=!(!oe&&!nb);this.waitToPlay_&&
(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null);this.isReady_&&b?(b=this.techGet_("play"),a&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===b?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(b)):(this.waitToPlay_=c=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!b&&a&&this.load())}runPlayTerminatedQueue_(){const a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];a.forEach(function(b){b()})}runPlayCallbacks_(a){const b=this.playCallbacks_.slice(0);
this.playCallbacks_=[];this.playTerminatedQueue_=[];b.forEach(function(c){c(a)})}pause(){this.techCall_("pause")}paused(){return!1===this.techGet_("paused")?!1:!0}played(){return this.techGet_("played")||Hb(0,0)}scrubbing(a){if("undefined"===typeof a)return this.scrubbing_;this.scrubbing_=!!a;this.techCall_("setScrubbing",this.scrubbing_);a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(a){if(void 0===a)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;
0>a&&(a=0);this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),this.cache_.initTime=0,isFinite(a)&&(this.cache_.currentTime=Number(a))):(this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(a){if(void 0===a)return void 0!==this.cache_.duration?this.cache_.duration:NaN;a=parseFloat(a);0>a&&(a=Infinity);a!==this.cache_.duration&&
(this.cache_.duration=a,Infinity===a?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let a=this.techGet_("buffered");a&&a.length||(a=Hb(0,0));return a}seekable(){let a=this.techGet_("seekable");a&&a.length||(a=Hb(0,0));return a}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bi(this.buffered(),
this.duration())}bufferedEnd(){var a=this.buffered();const b=this.duration();a=a.end(a.length-1);a>b&&(a=b);return a}volume(a){if(void 0!==a)a=Math.max(0,Math.min(1,a)),this.cache_.volume=a,this.techCall_("setVolume",a),0<a&&this.lastVolume_(a);else return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a}muted(a){if(void 0!==a)this.techCall_("setMuted",a);else return this.techGet_("muted")||!1}defaultMuted(a){void 0!==a&&this.techCall_("setDefaultMuted",a);return this.techGet_("defaultMuted")||
!1}lastVolume_(a){if(void 0!==a&&0!==a)this.cache_.lastVolume=a;else return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(a){if(void 0!==a){const b=this.isFullscreen_;this.isFullscreen_=!!a;this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange");this.toggleFullscreenClass_()}else return this.isFullscreen_}requestFullscreen(a){this.isInPictureInPicture()&&this.exitPictureInPicture();const b=this;return new Promise((c,
d)=>{function e(){b.off("fullscreenerror",n);b.off("fullscreenchange",h)}function h(){e();c()}function n(t,A){e();d(A)}b.one("fullscreenchange",h);b.one("fullscreenerror",n);const u=b.requestFullscreenHelper_(a);u&&(u.then(e,e),u.then(c,d))})}requestFullscreenHelper_(a){let b;this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a));if(this.fsApi_.requestFullscreen)return(a=this.el_[this.fsApi_.requestFullscreen](b))&&a.then(()=>this.isFullscreen(!0),
()=>this.isFullscreen(!1)),a;this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const a=this;return new Promise((b,c)=>{function d(){a.off("fullscreenerror",h);a.off("fullscreenchange",e)}function e(){d();b()}function h(u,t){d();c(t)}a.one("fullscreenchange",e);a.one("fullscreenerror",h);const n=a.exitFullscreenHelper_();n&&(n.then(d,d),n.then(b,c))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const a=
ca[this.fsApi_.exitFullscreen]();a&&Nb(a.then(()=>this.isFullscreen(!1)));return a}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0);this.isFullWindow=!0;this.docOrigOverflow=ca.documentElement.style.overflow;wb(ca,"keydown",this.boundFullWindowOnEscKey_);ca.documentElement.style.overflow="hidden";vc(ca.body,"vjs-full-window");this.trigger("enterFullWindow")}fullWindowOnEscKey(a){"Escape"===
a.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1);this.isFullWindow=!1;kb(ca,"keydown",this.boundFullWindowOnEscKey_);ca.documentElement.style.overflow=this.docOrigOverflow;Td(ca.body,"vjs-full-window");this.trigger("exitFullWindow")}disablePictureInPicture(a){if(void 0===a)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",a);this.options_.disablePictureInPicture=a;this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(a){if(void 0!==
a)this.isInPictureInPicture_=!!a,this.togglePictureInPictureClass_();else return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&J.documentPictureInPicture){const a=ca.createElement(this.el().tagName);a.classList=this.el().classList;a.classList.add("vjs-pip-container");this.posterImage&&a.appendChild(this.posterImage.el().cloneNode(!0));this.titleBar&&a.appendChild(this.titleBar.el().cloneNode(!0));a.appendChild(ja("p",{className:"vjs-pip-text"},
{},this.localize("Playing in picture-in-picture")));return J.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(b=>{Uh(b);this.el_.parentNode.insertBefore(a,this.el_);b.document.body.appendChild(this.el_);b.document.body.classList.add("vjs-pip-window");this.player_.isInPictureInPicture(!0);this.player_.trigger({type:"enterpictureinpicture",pipWindow:b});b.addEventListener("pagehide",c=>{c=c.target.querySelector(".video-js");a.parentNode.replaceChild(c,
a);this.player_.isInPictureInPicture(!1);this.player_.trigger("leavepictureinpicture")});return b})}return"pictureInPictureEnabled"in ca&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(J.documentPictureInPicture&&J.documentPictureInPicture.window)return J.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in ca)return ca.exitPictureInPicture()}handleKeyDown(a){const {userActions:b}=
this.options_;if(b&&b.hotkeys){{var c=this.el_.ownerDocument.activeElement;const e=c.tagName.toLowerCase();if(c.isContentEditable)c=!0;else{var d="button checkbox hidden radio reset submit".split(" ");c="input"===e?-1===d.indexOf(c.type):-1!==["textarea"].indexOf(e)}}c||("function"===typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}}handleHotkeys(a){const {fullscreenKey:b=e=>"f"===a.key.toLowerCase(),muteKey:c=e=>"m"===a.key.toLowerCase(),playPauseKey:d=e=>"k"===a.key.toLowerCase()||
" "===a.key.toLowerCase()}=this.options_.userActions?this.options_.userActions.hotkeys:{};if(b.call(this,a)){a.preventDefault();a.stopPropagation();const e=V.getComponent("FullscreenToggle");!1!==ca[this.fsApi_.fullscreenEnabled]&&e.prototype.handleClick.call(this,a)}else c.call(this,a)?(a.preventDefault(),a.stopPropagation(),V.getComponent("MuteToggle").prototype.handleClick.call(this,a)):d.call(this,a)&&(a.preventDefault(),a.stopPropagation(),V.getComponent("PlayToggle").prototype.handleClick.call(this,
a))}canPlayType(a){for(let c=0,d=this.options_.techOrder;c<d.length;c++){var b=d[c];let e=ma.getTech(b);e||=V.getComponent(b);if(!e)ra.error(`The "${b}" tech is undefined. Skipped browser support check for that tech.`);else if(e.isSupported()&&(b=e.canPlayType(a)))return b}return""}selectSource(a){const b=this.options_.techOrder.map(h=>[h,ma.getTech(h)]).filter(([h,n])=>{if(n)return n.isSupported();ra.error(`The "${h}" tech is undefined. Skipped browser support check for that tech.`);return!1}),c=
function(h,n,u){let t;h.some(A=>n.some(F=>{if(t=u(A,F))return!0}));return t},d=h=>(n,u)=>h(u,n),e=([h,n],u)=>{if(n.canPlaySource(u,this.options_[h.toLowerCase()]))return{source:u,tech:h}};return(this.options_.sourceOrder?c(a,b,d(e)):c(b,a,e))||!1}handleSrc_(a,b){if("undefined"===typeof a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const c=pj(a);if(c.length){if(this.changingSrc_=!0,b||(this.cache_.sources=c),this.updateSourceCaches_(c[0]),qm(this,c[0],(d,e)=>{this.middleware_=
e;b||(this.cache_.sources=c);this.updateSourceCaches_(d);if(this.src_(d)){if(1<c.length)return this.handleSrc_(c.slice(1));this.changingSrc_=!1;this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);this.triggerReady()}else rm(e,this.tech_)}),1<c.length){const d=()=>{this.error(null);this.handleSrc_(c.slice(1),!0)},e=()=>{this.off("error",d)};this.one("error",d);this.one("playing",e);this.resetRetryOnError_=()=>{this.off("error",d);this.off("playing",e)}}}else this.setTimeout(function(){this.error({code:4,
message:this.options_.notSupportedMessage})},0)}src(a){return this.handleSrc_(a,!1)}src_(a){const b=this.selectSource([a]);if(!b)return!0;if(!fj(b.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(b.tech,b.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src);this.changingSrc_=!1},!0);return!1}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):
this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const a=this.play();Nb(a.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text");this.removeClass("vjs-playing");this.addClass("vjs-paused");this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();this.error(null);this.titleBar&&this.titleBar.update({title:void 0,description:void 0});dc(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_();
this.resetPlaybackRate_();this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const {currentTimeDisplay:a,durationDisplay:b,progressControl:c,remainingTimeDisplay:d}=this.controlBar||{},{seekBar:e}=c||{};a&&a.updateContent();b&&b.updateContent();d&&d.updateContent();e&&(e.update(),e.loadProgressBar&&e.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1);this.trigger("volumechange")}currentSources(){const a=
this.currentSource(),b=[];0!==Object.keys(a).length&&b.push(a);return this.cache_.sources||b}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(a){if(void 0!==a)this.techCall_("setPreload",a),this.options_.preload=a;else return this.techGet_("preload")}autoplay(a){if(void 0===a)return this.options_.autoplay||!1;let b;"string"===typeof a&&/(any|play|muted)/.test(a)||
!0===a&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"===typeof a?a:"play"),b=!1):this.options_.autoplay=a?!0:!1;b="undefined"===typeof b?this.options_.autoplay:b;this.tech_&&this.techCall_("setAutoplay",b)}playsinline(a){void 0!==a&&(this.techCall_("setPlaysinline",a),this.options_.playsinline=a);return this.techGet_("playsinline")}loop(a){if(void 0!==a)this.techCall_("setLoop",a),this.options_.loop=a;else return this.techGet_("loop")}poster(a){if(void 0===
a)return this.poster_;a||="";a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(a){if(void 0===a)return!!this.controls_;a=!!a;this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&
this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(a){if(void 0===a)return!!this.usingNativeControls_;a=!!a;this.usingNativeControls_!==
a&&((this.usingNativeControls_=a)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(a){if(void 0===a)return this.error_||null;nc("beforeerror").forEach(b=>{b=b(this,a);Mb(b)&&!Array.isArray(b)||"string"===typeof b||"number"===typeof b||null===b?a=b:this.log.error("please return a value that MediaError expects in beforeerror hooks")});if(this.options_.suppressNotSupportedError&&
a&&4===a.code){const b=function(){this.error(a)};this.options_.suppressNotSupportedError=!1;this.any(["click","touchstart"],b);this.one("loadstart",function(){this.off(["click","touchstart"],b)})}else null===a?(this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new La(a),this.addClass("vjs-error"),ra.error(`(CODE:${this.error_.code} ${La.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),nc("error").forEach(b=>
b(this,this.error_)))}reportUserActivity(a){this.userActivity_=!0}userActive(a){if(void 0===a)return this.userActive_;a=!!a;if(a!==this.userActive_)if(this.userActive_=a)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}}listenForUserActivity_(){let a,
b,c;const d=Ea(this,this.reportUserActivity);var e=function(n){d();this.clearInterval(a)};this.on("mousedown",function(){d();this.clearInterval(a);a=this.setInterval(d,250)});this.on("mousemove",function(n){if(n.screenX!==b||n.screenY!==c)b=n.screenX,c=n.screenY,d()});this.on("mouseup",e);this.on("mouseleave",e);!(e=this.getChild("controlBar"))||nb||Qb||(e.on("mouseenter",function(n){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout);
this.player().options_.inactivityTimeout=0}),e.on("mouseleave",function(n){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}));this.on("keydown",d);this.on("keyup",d);let h;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(h);var n=this.options_.inactivityTimeout;0>=n||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},n))}},250)}playbackRate(a){if(void 0!==a)this.techCall_("setPlaybackRate",
a);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(a){if(void 0!==a)this.isAudio_=!!a;else return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const a=this.getChild("ControlBar");a&&this.audioOnlyCache_.controlBarHeight!==a.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=
a.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const a=this.children(),b=this.getChild("ControlBar"),c=b&&b.currentHeight();a.forEach(d=>{d!==b&&d.el_&&!d.hasClass("vjs-hidden")&&(d.hide(),this.audioOnlyCache_.hiddenChildren.push(d))});this.audioOnlyCache_.playerHeight=this.currentHeight();this.audioOnlyCache_.controlBarHeight=c;this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_);this.height(c);this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode");
this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_);this.audioOnlyCache_.hiddenChildren.forEach(a=>a.show());this.height(this.audioOnlyCache_.playerHeight);this.trigger("audioonlymodechange")}audioOnlyMode(a){return"boolean"!==typeof a||a===this.audioOnlyMode_?this.audioOnlyMode_:(this.audioOnlyMode_=a)?(a=[],this.isInPictureInPicture()&&a.push(this.exitPictureInPicture()),this.isFullscreen()&&a.push(this.exitFullscreen()),this.audioPosterMode()&&a.push(this.audioPosterMode(!1)),
Promise.all(a).then(()=>this.enableAudioOnlyUI_())):Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide();this.addClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show();this.removeClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange")}audioPosterMode(a){return"boolean"!==typeof a||a===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=a)?this.audioOnlyMode()?
this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)}addRemoteTextTrack(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)}removeRemoteTextTrack(a={}){let {track:b}=a;b||=a;if(this.tech_)return this.tech_.removeRemoteTextTrack(b)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&
this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(a){if(void 0===a)return this.language_;this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),dc(this)&&this.trigger("languagechange"))}languages(){return Ca(Ia.prototype.options_.languages,this.languages_)}toJSON(){const a=Ca(this.options_),b=a.tracks;a.tracks=[];for(let c=0;c<b.length;c++){let d=b[c];d=Ca(d);d.player=void 0;a.tracks[c]=
d}return a}createModal(a,b){b=b||{};b.content=a||"";const c=new Xc(this,b);this.addChild(c);c.on("dispose",()=>{this.removeChild(c)});c.open();return c}updateCurrentBreakpoint_(){if(this.responsive()){var a=this.currentBreakpoint(),b=this.currentWidth();for(let c=0;c<hg.length;c++){const d=hg[c];if(b<=this.breakpoints_[d]){if(a===d)break;a&&this.removeClass(we[a]);this.addClass(we[d]);this.breakpoint_=d;break}}}}removeCurrentBreakpoint_(){const a=this.currentBreakpointClass();this.breakpoint_="";
a&&this.removeClass(a)}breakpoints(a){if(void 0===a)return Object.assign(this.breakpoints_);this.breakpoint_="";this.breakpoints_=Object.assign({},Do,a);this.updateCurrentBreakpoint_();return Object.assign(this.breakpoints_)}responsive(a){if(void 0===a)return this.responsive_;a=!!a;if(a!==this.responsive_)return(this.responsive_=a)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),
a}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return we[this.breakpoint_]||""}loadMedia(a,b){if(a&&"object"===typeof a){var c=this.crossOrigin();this.reset();this.cache_.media=Ca(a);var {artist:d,artwork:e,description:h,poster:n,src:u,textTracks:t,title:A}=this.cache_.media;!e&&n&&(this.cache_.media.artwork=[{src:n,type:ae(n)}]);c&&this.crossOrigin(c);u&&this.src(u);n&&this.poster(n);Array.isArray(t)&&t.forEach(F=>this.addRemoteTextTrack(F,!1));this.titleBar&&this.titleBar.update({title:A,
description:h||d||""});this.ready(b)}}getMedia(){if(!this.cache_.media){const b=this.poster();var a=this.currentSources();const c=Array.prototype.map.call(this.remoteTextTracks(),d=>({kind:d.kind,label:d.label,language:d.language,src:d.src}));a={src:a,textTracks:c};b&&(a.poster=b,a.artwork=[{src:a.poster,type:ae(a.poster)}]);return a}return Ca(this.cache_.media)}static getTagSettings(a){const b={sources:[],tracks:[]};var c=lc(a),d=c["data-setup"];ld(a,"vjs-fill")&&(c.fill=!0);ld(a,"vjs-fluid")&&(c.fluid=
!0);if(null!==d)try{Object.assign(c,JSON.parse(d||"{}"))}catch(e){ra.error("data-setup",e)}Object.assign(b,c);if(a.hasChildNodes()){a=a.childNodes;for(let e=0,h=a.length;e<h;e++)c=a[e],d=c.nodeName.toLowerCase(),"source"===d?b.sources.push(lc(c)):"track"===d&&b.tracks.push(lc(c))}return b}debug(a){if(void 0===a)return this.debugEnabled_;a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),
this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(a){if(void 0===a)return this.cache_.playbackRates;Array.isArray(a)&&a.every(b=>"number"===typeof b)&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange"))}}pb.names.forEach(function(a){const b=pb[a];Ia.prototype[b.getterName]=function(){if(this.tech_)return this.tech_[b.getterName]();this[b.privateName]=this[b.privateName]||new b.ListClass;return this[b.privateName]}});Ia.prototype.crossorigin=Ia.prototype.crossOrigin;
Ia.players={};const zd=J.navigator;Ia.prototype.options_={techOrder:ma.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2E3,playbackRates:[],liveui:!1,children:"mediaLoader posterImage titleBar textTrackDisplay loadingSpinner bigPlayButton liveTracker controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:zd&&(zd.languages&&zd.languages[0]||zd.userLanguage||zd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,
fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1};dk.forEach(function(a){Ia.prototype[`handleTech${Pa(a)}_`]=function(){return this.trigger(a)}});V.registerComponent("Player",Ia);const gc={},xe=a=>gc.hasOwnProperty(a)?gc[a]:void 0,ye=(a,b,c)=>{c=(c?"before":"")+"pluginsetup";a.trigger(c,b);a.trigger(c+":"+b.name,b)},Eo=function(a,b){const c=function(){ye(this,{name:a,
plugin:b,instance:null},!0);const d=b.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[a]=!0;ye(this,{name:a,plugin:b,instance:d});return d};Object.keys(b).forEach(function(d){c[d]=b[d]});return c},ek=(a,b)=>{b.prototype.name=a;return function(...c){ye(this,{name:a,plugin:b,instance:null},!0);const d=new b(...[this,...c]);this[a]=()=>d;ye(this,d.getEventHash());return d}};class yb{constructor(a){if(this.constructor===yb)throw Error("Plugin must be sub-classed; not directly instantiated.");
this.player=a;this.log||(this.log=this.player.log.createLogger(this.name));kf(this);delete this.trigger;Xh(this,this.constructor.defaultState);var b=this.name;a.activePlugins_=a.activePlugins_||{};a.activePlugins_[b]=!0;this.dispose=this.dispose.bind(this);a.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(a={}){a.name=this.name;a.plugin=this.constructor;a.instance=this;return a}trigger(a,b={}){return Qc(this.eventBusEl_,a,this.getEventHash(b))}handleStateChanged(a){}dispose(){const {name:a,
player:b}=this;this.trigger("dispose");this.off();b.off("dispose",this.dispose);b.activePlugins_[a]=!1;this.player=this.state=null;b[a]=ek(a,gc[a])}static isBasic(a){a="string"===typeof a?xe(a):a;return"function"===typeof a&&!yb.prototype.isPrototypeOf(a.prototype)}static registerPlugin(a,b){if("string"!==typeof a)throw Error(`Illegal plugin name, "${a}", must be a string, was ${typeof a}.`);if(gc.hasOwnProperty(a))ra.warn(`A plugin named "${a}" already exists. You may want to avoid re-registering plugins!`);
else if(Ia.prototype.hasOwnProperty(a))throw Error(`Illegal plugin name, "${a}", cannot share a name with an existing player method!`);if("function"!==typeof b)throw Error(`Illegal plugin for "${a}", must be a function, was ${typeof b}.`);gc[a]=b;"plugin"!==a&&(yb.isBasic(b)?Ia.prototype[a]=Eo(a,b):Ia.prototype[a]=ek(a,b));return b}static deregisterPlugin(a){if("plugin"===a)throw Error("Cannot de-register base plugin.");gc.hasOwnProperty(a)&&(delete gc[a],delete Ia.prototype[a])}static getPlugins(a=
Object.keys(gc)){let b;a.forEach(c=>{const d=xe(c);d&&(b=b||{},b[c]=d)});return b}static getPluginVersion(a){return(a=xe(a))&&a.VERSION||""}}yb.getPlugin=xe;yb.BASE_PLUGIN_NAME="plugin";yb.registerPlugin("plugin",yb);Ia.prototype.usingPlugin=function(a){return!!this.activePlugins_&&!0===this.activePlugins_[a]};Ia.prototype.hasPlugin=function(a){return!!gc.hasOwnProperty(a)};const fi=a=>0===a.indexOf("#")?a.slice(1):a;R.hooks_=fc;R.hooks=nc;R.hook=function(a,b){nc(a,b)};R.hookOnce=function(a,b){nc(a,
[].concat(b).map(c=>{const d=(...e)=>{Ri(a,d);return c(...e)};return d}))};R.removeHook=Ri;if(!0!==J.VIDEOJS_NO_DYNAMIC_STYLE&&Mc()){let a=mc(".vjs-styles-defaults");if(!a){a=aj("vjs-styles-defaults");const b=mc("head");b&&b.insertBefore(a,b.firstChild);bj(a,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}ef(1,R);R.VERSION="8.18.1";R.options=Ia.prototype.options_;R.getPlayers=
()=>Ia.players;R.getPlayer=a=>{const b=Ia.players;if("string"===typeof a){a=fi(a);const c=b[a];if(c)return c;a=mc("#"+a)}if(Nc(a)){const {player:c,playerId:d}=a;if(c||b[d])return c||b[d]}};R.getAllPlayers=()=>Object.keys(Ia.players).map(a=>Ia.players[a]).filter(Boolean);R.players=Ia.players;R.getComponent=V.getComponent;R.registerComponent=(a,b)=>{ma.isTech(b)&&ra.warn(`The ${a} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`);return V.registerComponent.call(V,
a,b)};R.getTech=ma.getTech;R.registerTech=ma.registerTech;R.use=function(a,b){yc[a]=yc[a]||[];yc[a].push(b)};Object.defineProperty(R,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(R.middleware,"TERMINATOR",{value:Zd,writeable:!1,enumerable:!0});R.browser=Yi;R.obj=Ln;R.mergeOptions=Ib(9,"videojs.mergeOptions","videojs.obj.merge",Ca);R.defineLazyProperty=Ib(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Sd);R.bind=Ib(9,"videojs.bind","native Function.prototype.bind",
Ea);R.registerPlugin=yb.registerPlugin;R.deregisterPlugin=yb.deregisterPlugin;R.plugin=(a,b)=>{ra.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return yb.registerPlugin(a,b)};R.getPlugins=yb.getPlugins;R.getPlugin=yb.getPlugin;R.getPluginVersion=yb.getPluginVersion;R.addLanguage=function(a,b){a=(""+a).toLowerCase();R.options.languages=Ca(R.options.languages,{[a]:b});return R.options.languages[a]};R.log=ra;R.createLogger=Ti;R.time=Rn;R.createTimeRange=Ib(9,"videojs.createTimeRange",
"videojs.time.createTimeRanges",Hb);R.createTimeRanges=Ib(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Hb);R.formatTime=Ib(9,"videojs.formatTime","videojs.time.formatTime",wc);R.setFormatTime=Ib(9,"videojs.setFormatTime","videojs.time.setFormatTime",Zh);R.resetFormatTime=Ib(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",$h);R.parseUrl=Ib(9,"videojs.parseUrl","videojs.url.parseUrl",Mf);R.isCrossOrigin=Ib(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",te);R.EventTarget=
xb;R.any=jf;R.on=wb;R.one=Yd;R.off=kb;R.trigger=Qc;R.xhr=ii;R.TextTrack=wd;R.AudioTrack=mj;R.VideoTrack=nj;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(a=>{R[a]=function(){ra.warn(`videojs.${a}() is deprecated; use videojs.dom.${a}() instead`);return $i[a].apply(null,arguments)}});R.computedStyle=Ib(9,"videojs.computedStyle","videojs.dom.computedStyle",Pc);R.dom=$i;R.fn=On;R.num=lo;R.str=Qn;
R.url=Yn;R.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",
StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};class Fo{constructor(a){let b=this;b.id=a.id;b.label=b.id;b.width=a.width;b.height=a.height;b.bitrate=a.bandwidth;b.frameRate=a.frameRate;b.enabled_=a.enabled;Object.defineProperty(b,"enabled",{get(){return b.enabled_()},set(c){b.enabled_(c)}});return b}}
class ze extends R.EventTarget{constructor(){super();let a=this;a.levels_=[];a.selectedIndex_=-1;Object.defineProperty(a,"selectedIndex",{get(){return a.selectedIndex_}});Object.defineProperty(a,"length",{get(){return a.levels_.length}});a[Symbol.iterator]=()=>a.levels_.values();return a}addQualityLevel(a){let b=this.getQualityLevelById(a.id);if(b)return b;const c=this.levels_.length;b=new Fo(a);""+c in this||Object.defineProperty(this,c,{get(){return this.levels_[c]}});this.levels_.push(b);this.trigger({qualityLevel:b,
type:"addqualitylevel"});return b}removeQualityLevel(a){let b=null;for(let c=0,d=this.length;c<d;c++)if(this[c]===a){b=this.levels_.splice(c,1)[0];this.selectedIndex_===c?this.selectedIndex_=-1:this.selectedIndex_>c&&this.selectedIndex_--;break}b&&this.trigger({qualityLevel:a,type:"removequalitylevel"});return b}getQualityLevelById(a){for(let b=0,c=this.length;b<c;b++){const d=this[b];if(d.id===a)return d}return null}dispose(){this.selectedIndex_=-1;this.levels_.length=0}}ze.prototype.allowedEvents_=
{change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const a in ze.prototype.allowedEvents_)ze.prototype["on"+a]=null;const Go=function(a,b){const c=a.qualityLevels,d=new ze,e=function(){d.dispose();a.qualityLevels=c;a.off("dispose",e)};a.on("dispose",e);a.qualityLevels=()=>d;a.qualityLevels.VERSION="4.1.0";return d},fk=function(a){return Go(this,R.obj.merge({},a))};R.registerPlugin("qualityLevels",fk);fk.VERSION="4.1.0";const Ae=(a,b)=>b&&b.responseURL&&
a!==b.responseURL?b.responseURL:a,Gb=a=>R.log.debug?R.log.debug.bind(R,"VHS:",`${a} >`):function(){},Tb=1/30,Ub=3*Tb,gk=function(a,b){const c=[];let d;if(a&&a.length)for(d=0;d<a.length;d++)b(a.start(d),a.end(d))&&c.push([a.start(d),a.end(d)]);return eb(c)},cd=function(a,b){return gk(a,function(c,d){return c-Ub<=b&&d+Ub>=b})},Be=function(a,b){return gk(a,function(c){return c-Tb>=b})},Ho=function(a,b){let c=null,d=null,e=0;const h=[],n=[];if(!(a&&a.length&&b&&b.length))return eb();let u=a.length;for(;u--;)h.push({time:a.start(u),
type:"start"}),h.push({time:a.end(u),type:"end"});for(u=b.length;u--;)h.push({time:b.start(u),type:"start"}),h.push({time:b.end(u),type:"end"});h.sort(function(t,A){return t.time-A.time});for(u=0;u<h.length;u++)"start"===h[u].type?(e++,2===e&&(c=h[u].time)):"end"===h[u].type&&(e--,1===e&&(d=h[u].time)),null!==c&&null!==d&&(n.push([c,d]),d=c=null);return eb(n)},hk=a=>{const b=[];if(!a||!a.length)return"";for(let c=0;c<a.length;c++)b.push(a.start(c)+" \x3d\x3e "+a.end(c));return b.join(", ")},Io=function(a,
b,c=1){return((a.length?a.end(a.length-1):0)-b)/c},Ec=a=>{const b=[];for(let c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},Jo=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a||a.length!==b.length)return!0;for(let c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1},ig=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},jg=function(a,b){let c=0;if(!a||!a.length)return c;for(let d=0;d<a.length;d++){const e=a.start(d),h=a.end(d);b>h||(c=
b>e&&b<=h?c+(h-b):c+(h-e))}return c},kg=(a,b)=>{if(!b.preload)return b.duration;let c=0;(b.parts||[]).forEach(function(d){c+=d.duration});(b.preloadHints||[]).forEach(function(d){"PART"===d.type&&(c+=a.partTargetDuration)});return c},lg=a=>(a.segments||[]).reduce((b,c,d)=>{c.parts?c.parts.forEach(function(e,h){b.push({duration:e.duration,segmentIndex:d,partIndex:h,part:e,segment:c})}):b.push({duration:c.duration,segmentIndex:d,partIndex:null,segment:c,part:null});return b},[]),ik=a=>(a=a.segments&&
a.segments.length&&a.segments[a.segments.length-1])&&a.parts||[],jk=({preloadSegment:a})=>{if(a){var {parts:b,preloadHints:c}=a;a=(c||[]).reduce((d,e)=>d+("PART"===e.type?1:0),0);return a+=b&&b.length?b.length:0}},kk=(a,b)=>b.endList?0:a&&a.suggestedPresentationDelay?a.suggestedPresentationDelay:(a=0<ik(b).length)&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:a&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:
b.targetDuration?3*b.targetDuration:0,Ko=function(a,b){let c=0;b-=a.mediaSequence;let d=a.segments[b];if(d){if("undefined"!==typeof d.start)return{result:d.start,precise:!0};if("undefined"!==typeof d.end)return{result:d.end-d.duration,precise:!0}}for(;b--;){d=a.segments[b];if("undefined"!==typeof d.end)return{result:c+d.end,precise:!0};c+=kg(a,d);if("undefined"!==typeof d.start)return{result:c+d.start,precise:!0}}return{result:c,precise:!1}},lk=function(a,b,c){"undefined"===typeof b&&(b=a.mediaSequence+
a.segments.length);if(b<a.mediaSequence)return 0;const d=Ko(a,b);if(d.precise)return d.result;a:{let e=0,h=b-a.mediaSequence;for(;h<a.segments.length;h++){b=a.segments[h];if("undefined"!==typeof b.start){a={result:b.start-e,precise:!0};break a}e+=kg(a,b);if("undefined"!==typeof b.end){a={result:b.end-e,precise:!0};break a}}a={result:-1,precise:!1}}return a.precise?a.result:d.result+c},mk=function(a,b,c){if(!a)return 0;"number"!==typeof c&&(c=0);if("undefined"===typeof b){if(a.totalDuration)return a.totalDuration;
if(!a.endList)return J.Infinity}return lk(a,b,c)},Ad=function({defaultDuration:a,durationList:b,startIndex:c,endIndex:d}){let e=0;c>d&&([c,d]=[d,c]);if(0>c){for(;c<Math.min(0,d);c++)e+=a;c=0}for(a=c;a<d;a++)e+=b[a].duration;return e},nk=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return mk(a);if(null===b)return null;b=lk(a,a.mediaSequence+a.segments.length,b||0);c&&(d="number"===typeof d?d:kk(null,a),b-=d);return Math.max(0,b)},ok=function(a){return a.excludeUntil&&a.excludeUntil>
Date.now()},mg=function(a){return a.excludeUntil&&Infinity===a.excludeUntil},Ce=function(a){const b=ok(a);return!a.disabled&&!b},pk=function(a,b){return b.attributes&&b.attributes[a]},ng=(a,b)=>{if(1===a.playlists.length)return!0;const c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(d=>Ce(d)?(d.attributes.BANDWIDTH||0)<c:!1).length},og=(a,b)=>!a&&!b||!a&&b||a&&!b?!1:a===b||a.id&&b.id&&a.id===b.id||a.resolvedUri&&b.resolvedUri&&a.resolvedUri===b.resolvedUri||a.uri&&b.uri&&
a.uri===b.uri?!0:!1,qk=function(a,b){a=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{};let c=!1;for(const d in a){for(const e in a[d])if(c=b(a[d][e]))break;if(c)break}return!!c},Bd=a=>{if(!a||!a.playlists||!a.playlists.length)return qk(a,b=>b.playlists&&b.playlists.length||b.uri);for(let b=0;b<a.playlists.length;b++){const c=a.playlists[b],d=c.attributes&&c.attributes.CODECS;if(!(d&&d.split(",").every(e=>oi(e))||qk(a,e=>og(c,e))))return!1}return!0};var ub={liveEdgeDelay:kk,duration:mk,seekable:function(a,
b,c){const d=b||0;a=nk(a,b,!0,c);if(null===a)return eb();a<d&&(a=d);return eb(d,a)},getMediaInfoForTime:function({playlist:a,currentTime:b,startingSegmentIndex:c,startingPartIndex:d,startTime:e,exactManifestTimings:h}){let n=b-e;const u=lg(a);var t=0;for(var A=0;A<u.length;A++){const F=u[A];if(c===F.segmentIndex&&("number"!==typeof d||"number"!==typeof F.partIndex||d===F.partIndex)){t=A;break}}if(0>n){if(0<t)for(c=t-1;0<=c;c--){d=u[c];n+=d.duration;if(h){if(0>n)continue}else if(0>=n+Tb)continue;return{partIndex:d.partIndex,
segmentIndex:d.segmentIndex,startTime:e-Ad({defaultDuration:a.targetDuration,durationList:u,startIndex:t,endIndex:c})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:b}}if(0>t){for(;0>t;t++)if(n-=a.targetDuration,0>n)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:b};t=0}for(c=t;c<u.length;c++)if(d=u[c],n-=d.duration,A=d.duration>Tb&&0<=n+Tb,0!==n&&!A||c===u.length-1){if(h){if(0<n)continue}else if(0<=n-Tb)continue;
return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:e+Ad({defaultDuration:a.targetDuration,durationList:u,startIndex:t,endIndex:c})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:b}},isEnabled:Ce,isDisabled:function(a){return a.disabled},isExcluded:ok,isIncompatible:mg,playlistEnd:nk,isAes:function(a){for(let b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},hasAttribute:pk,estimateSegmentRequestTime:function(a,b,c,d=0){return pk("BANDWIDTH",
c)?(a*c.attributes.BANDWIDTH-8*d)/b:NaN},isLowestEnabledRendition:ng,isAudioOnly:Bd,playlistMatch:og,segmentDurationWithParts:kg};const {log:rk}=R,sk=(a,b,c)=>`placeholder-uri-${a}-${b}-${c}`,Lo=({onwarn:a,oninfo:b,manifestString:c,customTagParsers:d=[],customTagMappers:e=[],llhls:h})=>{const n=new Cm;if(a)n.on("warn",a);if(b)n.on("info",b);d.forEach(t=>n.addParser(t));e.forEach(t=>n.addTagMapper(t));n.push(c);n.end();const u=n.manifest;h||("preloadSegment skip serverControl renditionReports partInf partTargetDuration".split(" ").forEach(function(t){u.hasOwnProperty(t)&&
delete u[t]}),u.segments&&u.segments.forEach(function(t){["parts","preloadHints"].forEach(function(A){t.hasOwnProperty(A)&&delete t[A]})}));u.targetDuration||(b=10,u.segments&&u.segments.length&&(b=u.segments.reduce((t,A)=>Math.max(t,A.duration),0)),a&&a({message:`manifest has no targetDuration defaulting to ${b}`}),u.targetDuration=b);b=ik(u);b.length&&!u.partTargetDuration&&(b=b.reduce((t,A)=>Math.max(t,A.duration),0),a&&(a({message:`manifest has no partTargetDuration defaulting to ${b}`}),rk.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),
u.partTargetDuration=b);return u},dd=(a,b)=>{a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(c=>{if(a.mediaGroups[c])for(const d in a.mediaGroups[c])for(const e in a.mediaGroups[c][d])b(a.mediaGroups[c][d][e],c,d,e)})},tk=({playlist:a,uri:b,id:c})=>{a.id=c;a.playlistErrors_=0;b&&(a.uri=b);a.attributes=a.attributes||{}},Mo=a=>{let b=a.playlists.length;for(;b--;){const c=a.playlists[b];tk({playlist:c,id:`${b}-${c.uri}`});c.resolvedUri=fb(a.uri,c.uri);a.playlists[c.id]=c;a.playlists[c.uri]=c;c.attributes.BANDWIDTH||
rk.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},No=a=>{dd(a,b=>{b.uri&&(b.resolvedUri=fb(a.uri,b.uri))})},Oo=(a,b)=>{a=`${0}-${b}`;const c={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:J.location.href,resolvedUri:J.location.href,playlists:[{uri:b,id:a,resolvedUri:b,attributes:{}}]};c.playlists[a]=c.playlists[0];c.playlists[b]=c.playlists[0];return c},uk=(a,b,c=sk)=>{a.uri=b;for(b=0;b<a.playlists.length;b++)a.playlists[b].uri||(a.playlists[b].uri=
`placeholder-uri-${b}`);const d=Bd(a);dd(a,(e,h,n,u)=>{if(!e.playlists||!e.playlists.length){if(d&&"AUDIO"===h&&!e.uri)for(let t=0;t<a.playlists.length;t++){const A=a.playlists[t];if(A.attributes&&A.attributes.AUDIO&&A.attributes.AUDIO===n)return}e.playlists=[Ra({},e)]}e.playlists.forEach(function(t,A){const F=c(h,n,u,t),y=`${A}-${F}`;t.uri?t.resolvedUri=t.resolvedUri||fb(a.uri,t.uri):(t.uri=0===A?F:y,t.resolvedUri=t.uri);t.id=t.id||y;t.attributes=t.attributes||{};a.playlists[t.id]=t;a.playlists[t.uri]=
t})});Mo(a);No(a)};class vk{constructor(){this.offset_=null;this.pendingDateRanges_=new Map;this.processedDateRanges_=new Map}setOffset(a=[]){null===this.offset_&&a.length&&([a]=a,void 0!==a.programDateTime&&(this.offset_=a.programDateTime/1E3))}setPendingDateRanges(a=[]){if(a.length){var [b]=a;b=b.startDate.getTime();this.trimProcessedDateRanges_(b);this.pendingDateRanges_=a.reduce((c,d)=>{c.set(d.id,d);return c},new Map)}}processDateRange(a){this.pendingDateRanges_.delete(a.id);this.processedDateRanges_.set(a.id,
a)}getDateRangesToProcess(){if(null===this.offset_)return[];const a={},b=[];this.pendingDateRanges_.forEach((c,d)=>{this.processedDateRanges_.has(d)||(c.startTime=c.startDate.getTime()/1E3-this.offset_,c.processDateRange=()=>this.processDateRange(c),b.push(c),c.class&&(a[c.class]?(d=a[c.class].push(c),c.classListIndex=d-1):(a[c.class]=[c],c.classListIndex=0)))});for(const c of b){const d=a[c.class]||[];c.endTime=c.endDate?c.endDate.getTime()/1E3-this.offset_:c.endOnNext&&d[c.classListIndex+1]?d[c.classListIndex+
1].startTime:c.duration?c.startTime+c.duration:c.plannedDuration?c.startTime+c.plannedDuration:c.startTime}return b}trimProcessedDateRanges_(a){(new Map(this.processedDateRanges_)).forEach((b,c)=>{b.startDate.getTime()<a&&this.processedDateRanges_.delete(c)})}}const Fc=({requestType:a,request:b,error:c,parseFailure:d})=>{const e=400<=b.status&&499>=b.status;a={uri:b.uri,requestType:a};const h=(200>b.status||299<b.status)&&!e||d;c&&e?(a.error=Ra({},c),a.errorType=R.Error.NetworkRequestFailed):b.aborted?
a.errorType=R.Error.NetworkRequestAborted:b.timedout?a.erroType=R.Error.NetworkRequestTimeout:h&&(a.errorType=d?R.Error.NetworkBodyParserFailed:R.Error.NetworkBadStatus,a.status=b.status,a.headers=b.headers);return a},{EventTarget:Po}=R,Qo=(a,b)=>{if(b.endList||!b.serverControl)return a;const c={};if(b.serverControl.canBlockReload){var {preloadSegment:d}=b;let e=b.mediaSequence+b.segments.length;if(d){d=d.parts||[];const h=jk(b)-1;-1<h&&h!==d.length-1&&(c._HLS_part=h);(-1<h||d.length)&&e--}c._HLS_msn=
e}b.serverControl&&b.serverControl.canSkipUntil&&(c._HLS_skip=b.serverControl.canSkipDateranges?"v2":"YES");if(Object.keys(c).length){const e=new J.URL(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(h){c.hasOwnProperty(h)&&e.searchParams.set(h,c[h])});a=e.toString()}return a},Ro=(a,b,c)=>{a=a.slice();b=b.slice();c=c||0;const d=[];let e;for(let A=0;A<b.length;A++){var h=a[A+c],n=b[A];if(h){e=h.map||e;var u=d,t=u.push;a:{if(!h){h=n;break a}const F=za(h,n);h.preloadHints&&!n.preloadHints&&
delete F.preloadHints;if(h.parts&&!n.parts)delete F.parts;else if(h.parts&&n.parts)for(let y=0;y<n.parts.length;y++)h.parts&&h.parts[y]&&(F.parts[y]=za(h.parts[y],n.parts[y]));!h.skipped&&n.skipped&&(F.skipped=!1);h.preload&&!n.preload&&(F.preload=!1);h=F}t.call(u,h)}else e&&!n.map&&(n.map=e),d.push(n)}return d},wk=(a,b)=>{!a.resolvedUri&&a.uri&&(a.resolvedUri=fb(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=fb(b,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=fb(b,a.map.uri));
a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=fb(b,a.map.key.uri));a.parts&&a.parts.length&&a.parts.forEach(c=>{c.resolvedUri||(c.resolvedUri=fb(b,c.uri))});a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(c=>{c.resolvedUri||(c.resolvedUri=fb(b,c.uri))})},xk=function(a){const b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints)for(let d=0;d<c.preloadHints.length;d++)if("MAP"===c.preloadHints[d].type)return b;c.duration=a.targetDuration;
c.preload=!0;b.push(c)}return b},yk=(a,b)=>a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence&&a.preloadSegment===b.preloadSegment,pg=(a,b,c=yk)=>{const d=za(a,{});var e=d.playlists[b.id];if(!e||c(e,b))return null;b.segments=xk(b);const h=za(e,b);h.preloadSegment&&!b.preloadSegment&&delete h.preloadSegment;if(e.segments){if(b.skip)for(b.segments=b.segments||[],c=0;c<b.skip.skippedSegments;c++)b.segments.unshift({skipped:!0});
h.segments=Ro(e.segments,b.segments,b.mediaSequence-e.mediaSequence)}h.segments.forEach(n=>{wk(n,h.resolvedUri)});for(e=0;e<d.playlists.length;e++)d.playlists[e].id===b.id&&(d.playlists[e]=h);d.playlists[b.id]=h;d.playlists[b.uri]=h;dd(a,(n,u,t,A)=>{if(n.playlists)for(u=0;u<n.playlists.length;u++)b.id===n.playlists[u].id&&(n.playlists[u]=h)});return d},qg=(a,b)=>{var c=a.segments||[];const d=(c=c[c.length-1])&&c.parts&&c.parts[c.parts.length-1];c=d&&d.duration||c&&c.duration;return b&&c?1E3*c:500*
(a.partTargetDuration||a.targetDuration||10)},zk=(a,b,c)=>{if(a){var d=[];a.forEach(e=>{if(e.attributes){var {BANDWIDTH:h,RESOLUTION:n,CODECS:u}=e.attributes;d.push({id:e.id,bandwidth:h,resolution:n,codecs:u})}});return{type:b,isLive:c,renditions:d}}};class ed extends Po{constructor(a,b,c={}){super();if(!a)throw Error("A non-empty playlist URL or object is required");this.logger_=Gb("PlaylistLoader");const {withCredentials:d=!1}=c;this.src=a;this.vhs_=b;this.withCredentials=d;this.addDateRangesToTextTrack_=
c.addDateRangesToTextTrack;this.customTagParsers=(a=b.options_)&&a.customTagParsers||[];this.customTagMappers=a&&a.customTagMappers||[];this.llhls=a&&a.llhls;this.dateRangesStorage_=new vk;this.state="HAVE_NOTHING";this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this);this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_);this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){var a=this.media();a&&(this.dateRangesStorage_.setOffset(a.segments),
this.dateRangesStorage_.setPendingDateRanges(a.dateRanges),a=this.dateRangesStorage_.getDateRangesToProcess(),a.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(a))}handleMediaupdatetimeout_(){if("HAVE_METADATA"===this.state){var a=this.media(),b=fb(this.main.uri,a.uri);this.llhls&&(b=Qo(b,a));this.state="HAVE_CURRENT_METADATA";this.request=this.vhs_.xhr({uri:b,withCredentials:this.withCredentials,requestType:"hls-playlist"},(c,d)=>{if(this.request){if(c)return this.playlistRequestError(this.request,
this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}}playlistRequestError(a,b,c){const {uri:d,id:e}=b;this.request=null;c&&(this.state=c);this.error={playlist:this.main.playlists[e],status:a.status,message:`HLS playlist request error at URL: ${d}.`,responseText:a.responseText,code:500<=a.status?4:2,metadata:Fc({requestType:a.requestType,request:a,error:a.error})};this.trigger("error")}parseManifest_({url:a,manifestString:b}){try{return Lo({onwarn:({message:c})=>
this.logger_(`m3u8-parser warn for ${a}: ${c}`),oninfo:({message:c})=>this.logger_(`m3u8-parser info for ${a}: ${c}`),manifestString:b,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(c){this.error=c,this.error.metadata={errorType:R.Error.StreamingHlsPlaylistParserError,error:c}}}haveMetadata({playlistString:a,playlistObject:b,url:c,id:d}){this.request=null;this.state="HAVE_METADATA";const e={playlistInfo:{type:"media",uri:c}};this.trigger({type:"playlistparsestart",
metadata:e});a=b||this.parseManifest_({url:c,manifestString:a});a.lastRequest=Date.now();tk({playlist:a,uri:c,id:d});c=pg(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration;this.pendingMedia_=null;c?(this.main=c,this.media_=this.main.playlists[d]):this.trigger("playlistunchanged");this.updateMediaUpdateTimeout_(qg(this.media(),!!c));e.parsedPlaylist=zk(this.main.playlists,e.playlistInfo.type,!this.media_.endList);this.trigger({type:"playlistparsecomplete",metadata:e});this.trigger("loadedplaylist")}dispose(){this.trigger("dispose");
this.stopRequest();J.clearTimeout(this.mediaUpdateTimeout);J.clearTimeout(this.finalRenditionTimeout);this.dateRangesStorage_=new vk;this.off()}stopRequest(){if(this.request){const a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}media(a,b){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);if("string"===typeof a){if(!this.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.main.playlists[a]}J.clearTimeout(this.finalRenditionTimeout);
if(b)b=(a.partTargetDuration||a.targetDuration)/2*1E3||5E3,this.finalRenditionTimeout=J.setTimeout(this.media.bind(this,a,!1),b);else{var c=this.state;b=!this.media_||a.id!==this.media_.id;var d=this.main.playlists[a.id];if(d&&d.endList||a.endList&&a.segments.length)this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,b&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange"));
else if(this.updateMediaUpdateTimeout_(qg(a,!0)),b){this.state="SWITCHING_MEDIA";if(this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.pendingMedia_=a;var e={playlistInfo:{type:"media",uri:a.uri}};this.trigger({type:"playlistrequeststart",metadata:e});this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(h,n)=>{if(this.request){a.lastRequest=
Date.now();a.resolvedUri=Ae(a.resolvedUri,n);if(h)return this.playlistRequestError(this.request,a,c);this.trigger({type:"playlistrequestcomplete",metadata:e});this.haveMetadata({playlistString:n.responseText,url:a.uri,id:a.id});"HAVE_MAIN_MANIFEST"===c?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}}pause(){this.mediaUpdateTimeout&&(J.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===
this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(a){this.mediaUpdateTimeout&&(J.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const b=this.media();a?this.mediaUpdateTimeout=J.setTimeout(()=>{this.mediaUpdateTimeout=null;this.load()},b?(b.partTargetDuration||b.targetDuration)/2*1E3:5E3):this.started?b&&!b.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(a){this.mediaUpdateTimeout&&
(J.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=J.setTimeout(()=>{this.mediaUpdateTimeout=null;this.trigger("mediaupdatetimeout");this.updateMediaUpdateTimeout_(a)},a))}start(){this.started=!0;if("object"===typeof this.src)this.src.uri||(this.src.uri=J.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);else{var a={playlistInfo:{type:"multivariant",uri:this.src}};
this.trigger({type:"playlistrequeststart",metadata:a});this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(b,c)=>{if(this.request){this.request=null;if(b)return this.error={status:c.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:c.responseText,code:2,metadata:Fc({requestType:c.requestType,request:c,error:b})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",
metadata:a});this.src=Ae(this.src,c);this.trigger({type:"playlistparsestart",metadata:a});b=this.parseManifest_({manifestString:c.responseText,url:this.src});a.parsedPlaylist=zk(b.playlists,a.playlistInfo.type,!1);this.trigger({type:"playlistparsecomplete",metadata:a});this.setupInitialPlaylist(b)}})}}srcUri(){return"string"===typeof this.src?this.src:this.src.uri}setupInitialPlaylist(a){this.state="HAVE_MAIN_MANIFEST";if(a.playlists)this.main=a,uk(this.main,this.srcUri()),a.playlists.forEach(c=>
{c.segments=xk(c);c.segments.forEach(d=>{wk(d,c.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);else{var b=this.srcUri()||J.location.href;this.main=Oo(a,b);this.haveMetadata({playlistObject:a,url:b,id:this.main.playlists[0].id});this.trigger("loadedmetadata")}}updateOrDeleteClone(a,b){const c=this.main,d=a.ID;let e=c.playlists.length;for(;e--;){var h=c.playlists[e];if(h.attributes["PATHWAY-ID"]===d){const n=h.resolvedUri,u=h.id;if(b){const t=this.createCloneURI_(h.resolvedUri,
a),A=`${d}-${t}`,F=this.createCloneAttributes_(d,h.attributes);h=this.createClonePlaylist_(h,A,a,F);c.playlists[e]=h;c.playlists[A]=h;c.playlists[t]=h}else c.playlists.splice(e,1);delete c.playlists[u];delete c.playlists[n]}}this.updateOrDeleteCloneMedia(a,b)}updateOrDeleteCloneMedia(a,b){const c=this.main,d=a.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{if(c.mediaGroups[e]&&c.mediaGroups[e][d])for(const h in c.mediaGroups[e])if(h===d){for(const n in c.mediaGroups[e][h])c.mediaGroups[e][h][n].playlists.forEach((u,
t)=>{u=c.playlists[u.id];t=u.resolvedUri;delete c.playlists[u.id];delete c.playlists[t]});delete c.mediaGroups[e][h]}});b&&this.createClonedMediaGroups_(a)}addClonePathway(a,b={}){const c=this.main,d=c.playlists.length,e=this.createCloneURI_(b.resolvedUri,a),h=`${a.ID}-${e}`,n=this.createCloneAttributes_(a.ID,b.attributes);b=this.createClonePlaylist_(b,h,a,n);c.playlists[d]=b;c.playlists[h]=b;c.playlists[e]=b;this.createClonedMediaGroups_(a)}createClonedMediaGroups_(a){const b=a.ID,c=a["BASE-ID"],
d=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{if(d.mediaGroups[e]&&!d.mediaGroups[e][b])for(const h in d.mediaGroups[e])if(h===c){d.mediaGroups[e][b]={};for(const n in d.mediaGroups[e][h]){const u=d.mediaGroups[e][h][n];d.mediaGroups[e][b][n]=Ra({},u);const t=d.mediaGroups[e][b][n],A=this.createCloneURI_(u.resolvedUri,a);t.resolvedUri=A;t.uri=A;t.playlists=[];u.playlists.forEach((F,y)=>{var C=d.playlists[F.id],L=sk(e,b,n);L=`${b}-${L}`;if(C&&!d.playlists[L]){C=this.createClonePlaylist_(C,
L,a);const H=C.resolvedUri;d.playlists[L]=C;d.playlists[H]=C}t.playlists[y]=this.createClonePlaylist_(F,L,a)})}}})}createClonePlaylist_(a,b,c,d){c=this.createCloneURI_(a.resolvedUri,c);b={resolvedUri:c,uri:c,id:b};a.segments&&(b.segments=[]);d&&(b.attributes=d);return za(a,b)}createCloneURI_(a,b){a=new URL(a);a.hostname=b["URI-REPLACEMENT"].HOST;b=b["URI-REPLACEMENT"].PARAMS;for(const c of Object.keys(b))a.searchParams.set(c,b[c]);return a.href}createCloneAttributes_(a,b){const c={["PATHWAY-ID"]:a};
["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(d=>{b[d]&&(c[d]=a)});return c}getKeyIdSet(a){if(a.contentProtection){const b=new Set;for(const c in a.contentProtection){const d=a.contentProtection[c].attributes.keyId;d&&b.add(d.toLowerCase())}return b}}}const rg=function(a,b,c,d){const e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/
a.roundTripTime*8E3)));c.headers&&(a.responseHeaders=c.headers);b&&"ETIMEDOUT"===b.code&&(a.timedout=!0);b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=Error("XHR Failed with a response of: "+(a&&(e||a.responseText))));d(b,a)},So=(a,b)=>{if(a&&a.size){var c=b;a.forEach(d=>{c=d(c)});return c}},To=(a,b,c,d)=>{a&&a.size&&a.forEach(e=>{e(b,c,d)})},Ak=function(){const a=function e(c,d){c=za({timeout:45E3},c);const h=e.beforeRequest||R.Vhs.xhr.beforeRequest,n=e._requestCallbackSet||
R.Vhs.xhr._requestCallbackSet||new Set,u=e._responseCallbackSet||R.Vhs.xhr._responseCallbackSet;h&&"function"===typeof h&&(R.log.warn("beforeRequest is deprecated, use onRequest instead."),n.add(h));const t=!0===R.Vhs.xhr.original?R.xhr:R.Vhs.xhr,A=So(n,c);n.delete(h);const F=t(A||c,function(C,L){To(u,F,C,L);return rg(F,C,L,d)}),y=F.abort;F.abort=function(){F.aborted=!0;return y.apply(F,arguments)};F.uri=c.uri;F.requestType=c.requestType;F.requestTime=Date.now();return F};a.original=!0;return a},
sg=function(a){const b={};if(a.byterange){var c=a.byterange;a=c.offset;c="bigint"===typeof c.offset||"bigint"===typeof c.length?J.BigInt(c.offset)+J.BigInt(c.length)-J.BigInt(1):c.offset+c.length-1;b.Range="bytes\x3d"+a+"-"+c}return b},Uo=function(a,b){a=a.toString(16);return"00".substring(0,2-a.length)+a+(b%2?" ":"")},Vo=function(a){return 32<=a&&126>a?String.fromCharCode(a):"."},Bk=function(a){const b={};Object.keys(a).forEach(c=>{const d=a[c];qi(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,
byteLength:d.byteLength}:b[c]=d});return b},De=function(a){const b=a.byterange||{length:Infinity,offset:0};return[b.length,b.offset,a.resolvedUri].join()},Ck=a=>{a=Array.prototype.slice.call(a);let b="",c,d;for(let e=0;e<a.length/16;e++)c=a.slice(16*e,16*e+16).map(Uo).join(""),d=a.slice(16*e,16*e+16).map(Vo).join(""),b+=c+" "+d+"\n";return b};var Wo=Object.freeze({__proto__:null,createTransferableMessage:Bk,initSegmentId:De,segmentKeyId:function(a){return a.resolvedUri},hexDump:Ck,tagDump:({bytes:a})=>
Ck(a),textRanges:a=>{var b="";let c;for(c=0;c<a.length;c++){var d=a;var e=c;d=d.start(e)+"-"+d.end(e);b+=d+" "}return b}});const Xo=(a,b)=>{let c;try{c=new Date(a)}catch(n){return null}if(!b||!b.segments||0===b.segments.length)return null;a=b.segments[0];if(c<new Date(a.dateTimeObject))return null;for(var d=0;d<b.segments.length-1&&!(a=b.segments[d],c<new Date(b.segments[d+1].dateTimeObject));d++);d=b.segments[b.segments.length-1];const e=d.dateTimeObject;if(d.videoTimingInfo){var h=d.videoTimingInfo;
h=h.transmuxedPresentationEnd-h.transmuxedPresentationStart-h.transmuxerPrependedSeconds}else h=d.duration+.25*d.duration;h=new Date(e.getTime()+1E3*h);if(c>h)return null;c>new Date(e)&&(a=d);return{segment:a,estimatedStart:a.videoTimingInfo?a.videoTimingInfo.transmuxedPresentationStart:ub.duration(b,b.mediaSequence+b.segments.indexOf(a)),type:a.videoTimingInfo?"accurate":"estimate"}},Yo=(a,b)=>{if(!b||!b.segments||0===b.segments.length)return null;let c=0,d;for(let e=0;e<b.segments.length&&!(d=b.segments[e],
c=d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationEnd:c+d.duration,a<=c);e++);b=b.segments[b.segments.length-1];if(b.videoTimingInfo&&b.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>c){if(a>c+.25*b.duration)return null;d=b}return{segment:d,estimatedStart:d.videoTimingInfo?d.videoTimingInfo.transmuxedPresentationStart:c-d.duration,type:d.videoTimingInfo?"accurate":"estimate"}},Zo=(a,b)=>{let c,d;try{c=new Date(a),d=new Date(b)}catch(e){}a=c.getTime();return(d.getTime()-a)/
1E3},$o=a=>{if(!a.segments||0===a.segments.length)return!1;for(let b=0;b<a.segments.length;b++)if(!a.segments[b].dateTimeObject)return!1;return!0},ap=({playlist:a,time:b,callback:c})=>{if(!c)throw Error("getProgramTime: callback must be provided");if(!a||void 0===b)return c({message:"getProgramTime: playlist and time must be provided"});var d=Yo(b,a);if(!d)return c({message:"valid programTime was not found"});if("estimate"===d.type)return c({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",
seekTime:d.estimatedStart});a={mediaSeconds:b};d=d.segment;d.dateTimeObject?(b-=d.videoTimingInfo.transmuxedPresentationStart+d.videoTimingInfo.transmuxerPrependedSeconds,b=new Date(d.dateTimeObject.getTime()+1E3*b)):b=null;b&&(a.programDateTime=b.toISOString());return c(null,a)},Dk=({programTime:a,playlist:b,retryCount:c=2,seekTo:d,pauseAfterSeek:e=!0,tech:h,callback:n})=>{if(!n)throw Error("seekToProgramTime: callback must be provided");if("undefined"===typeof a||!b||!d)return n({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});
if(!b.endList&&!h.hasStarted_)return n({message:"player must be playing a live stream to start buffering"});if(!$o(b))return n({message:"programDateTime tags must be provided in the manifest "+b.resolvedUri});var u=Xo(a,b);if(!u)return n({message:`${a} was not found in the stream`});const t=u.segment,A=Zo(t.dateTimeObject,a);if("estimate"===u.type){if(0===c)return n({message:`${a} is not buffered yet. Try again`});d(u.estimatedStart+A);h.one("seeked",()=>{Dk({programTime:a,playlist:b,retryCount:c-
1,seekTo:d,pauseAfterSeek:e,tech:h,callback:n})})}else u=t.start+A,h.one("seeked",()=>n(null,h.currentTime())),e&&h.pause(),d(u)},Ek=(a,b)=>{if(4===a.readyState)return b()},bp=(a,b,c,d)=>{let e=[],h,n=!1;const u=function(F,y,C,L){y.abort();n=!0;return c(F,y,C,L)},t=function(F,y){if(!n){if(F)return F.metadata=Fc({requestType:d,request:y,error:F}),u(F,y,"",e);var C=y.responseText.substring(e&&e.byteLength||0,y.responseText.length);e=Km(e,ri(C,!0));h=h||sd(e);if(10>e.length||h&&e.length<h+2)return Ek(y,
()=>u(F,y,"",e));C=Cf(e);return"ts"===C&&188>e.length||!C&&376>e.length?Ek(y,()=>u(F,y,"",e)):u(null,y,C,e)}},A=b({uri:a,beforeSend(F){F.overrideMimeType("text/plain; charset\x3dx-user-defined");F.addEventListener("progress",function({}){return rg(F,null,{statusCode:F.status},t)})}},function(F,y){return rg(A,F,y,t)});return A},{EventTarget:cp}=R,Fk=function(a,b){if(!yk(a,b)||a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length)||!a.sidx&&b.sidx||a.sidx&&!b.sidx||a.segments&&
!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(let e=0;e<a.segments.length;e++){var c=a.segments[e],d=b.segments[e];if(c.uri!==d.uri)return!1;if(c.byterange||d.byterange)if(c=c.byterange,d=d.byterange,c&&!d||!c&&d||c.offset!==d.offset||c.length!==d.length)return!1}return!0},dp=(a,b,c,d)=>`placeholder-uri-${a}-${b}-${d.attributes.NAME||c}`,ep=({mainXml:a,srcUrl:b,clientOffset:c,sidxMapping:d,previousManifest:e})=>{a=zn(a,{manifestUri:b,clientOffset:c,sidxMapping:d,
previousManifest:e});uk(a,b,dp);return a},fp=(a,b)=>{dd(a,(c,d,e,h)=>{b.mediaGroups[d][e]&&h in b.mediaGroups[d][e]||delete a.mediaGroups[d][e][h]})},gp=(a,b,c)=>{let d=!0,e=za(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod,timelineStarts:b.timelineStarts});for(let n=0;n<b.playlists.length;n++){var h=b.playlists[n];if(h.sidx){const u=ce(h.sidx);c&&c[u]&&c[u].sidx&&wf(h,c[u].sidx,h.sidx.resolvedUri)}if(h=pg(e,h,Fk))e=h,d=!1}dd(b,(n,u,t,A)=>{if(n.playlists&&n.playlists.length){const F=
n.playlists[0].id,y=pg(e,n.playlists[0],Fk);y&&(e=y,A in e.mediaGroups[u][t]||(e.mediaGroups[u][t][A]=n),e.mediaGroups[u][t][A].playlists[0]=e.playlists[F],d=!1)}});fp(e,b);b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1);return d?null:e},Gk=(a,b)=>{const c={};for(const d in a){const e=a[d].sidx;if(e){const h=ce(e);if(!b[h])break;const n=b[h].sidxInfo;(!n.map&&!e.map||n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length)&&n.uri===e.uri&&
n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length&&(c[h]=b[h])}}return c},hp=(a,b)=>{let c=Gk(a.playlists,b);dd(a,(d,e,h,n)=>{d.playlists&&d.playlists.length&&(c=za(c,Gk(d.playlists,b)))});return c};class tg extends cp{constructor(a,b,c={},d){super();this.mainPlaylistLoader_=d||this;d||(this.isMain_=!0);({withCredentials:d=!1}=c);this.vhs_=b;this.withCredentials=d;this.addMetadataToTextTrack=c.addMetadataToTextTrack;if(!a)throw Error("A non-empty playlist URL or object is required");
this.on("minimumUpdatePeriod",()=>{this.refreshXml_()});this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)});this.state="HAVE_NOTHING";this.loadedPlaylists_={};this.logger_=Gb("DashPlaylistLoader");this.isMain_?(this.mainPlaylistLoader_.srcUrl=a,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=a}requestErrored_(a,b,c){if(!this.request)return!0;this.request=null;if(a)return this.error="object"!==typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+
b.uri,response:b.response,code:2,metadata:a.metadata}:a,c&&(this.state=c),this.trigger("error"),!0}addSidxSegments_(a,b,c){const d=a.sidx&&ce(a.sidx);if(a.sidx&&d&&!this.mainPlaylistLoader_.sidxMapping_[d]){var e=Ae(a.sidx.resolvedUri),h=(n,u)=>{if(!this.requestErrored_(n,u,b)){n=this.mainPlaylistLoader_.sidxMapping_;var {requestType:t}=u;try{var A=Bn(ia(u.response).subarray(8))}catch(F){F.metadata=Fc({requestType:t,request:u,parseFailure:!0});this.requestErrored_(F,u,b);return}n[d]={sidxInfo:a.sidx,
sidx:A};wf(a,A,a.sidx.resolvedUri);return c(!0)}};this.request=bp(e,this.vhs_.xhr,(n,u,t,A)=>{if(n)return h(n,u);if(!t||"mp4"!==t)return h({status:u.status,message:`Unsupported ${t||"unknown"} container type for sidx segment at URL: ${e}`,response:"",playlist:a,internal:!0,playlistExclusionDuration:Infinity,code:2},u);const {offset:F,length:y}=a.sidx.byterange;if(A.length>=y+F)return h(n,{response:A.subarray(F,F+y),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:e,responseType:"arraybuffer",
requestType:"dash-sidx",headers:sg({byterange:a.sidx.byterange})},h)},"dash-sidx")}else this.mediaRequest_=J.setTimeout(()=>c(!1),0)}dispose(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};J.clearTimeout(this.minimumUpdatePeriodTimeout_);J.clearTimeout(this.mediaRequest_);J.clearTimeout(this.mediaUpdateTimeout);this.minimumUpdatePeriodTimeout_=this.mediaRequest_=this.mediaUpdateTimeout=null;this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),
this.mainPlaylistLoader_.createMupOnMedia_=null);this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}media(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);const b=this.state;if("string"===typeof a){if(!this.mainPlaylistLoader_.main.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.mainPlaylistLoader_.main.playlists[a]}const c=
!this.media_||a.id!==this.media_.id;c&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,c&&(this.trigger("mediachanging"),this.trigger("mediachange"))):c&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,b,d=>{this.haveMetadata({startingState:b,playlist:a})}))}haveMetadata({startingState:a,playlist:b}){this.state="HAVE_METADATA";this.loadedPlaylists_[b.id]=b;this.mediaRequest_=null;this.refreshMedia_(b.id);"HAVE_MAIN_MANIFEST"===
a?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null);this.stopRequest();J.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;this.isMain_&&(J.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null);"HAVE_NOTHING"===this.state&&(this.started=
!1)}load(a){J.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;const b=this.media();a?this.mediaUpdateTimeout=J.setTimeout(()=>this.load(),b?b.targetDuration/2*1E3:5E3):this.started?b&&!b.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0;this.isMain_?this.requestMain_((a,b)=>{this.haveMain_();
this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=J.setTimeout(()=>this.haveMain_(),0)}requestMain_(a){const b={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:b});this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(c,d)=>{if(c){const {requestType:h}=d;c.metadata=Fc({requestType:h,request:d,error:c})}if(this.requestErrored_(c,
d))"HAVE_NOTHING"===this.state&&(this.started=!1);else{this.trigger({type:"manifestrequestcomplete",metadata:b});var e=d.responseText!==this.mainPlaylistLoader_.mainXml_;this.mainPlaylistLoader_.mainXml_=d.responseText;this.mainLoaded_=d.responseHeaders&&d.responseHeaders.date?Date.parse(d.responseHeaders.date):Date.now();this.mainPlaylistLoader_.srcUrl=Ae(this.mainPlaylistLoader_.srcUrl,d);if(e)this.handleMain_(),this.syncClientServerClock_(()=>a(d,e));else return a(d,e)}})}syncClientServerClock_(a){const b=
yn(Gi(this.mainPlaylistLoader_.mainXml_));if(null===b)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),a();if("DIRECT"===b.method)return this.mainPlaylistLoader_.clientOffset_=b.value-Date.now(),a();this.request=this.vhs_.xhr({uri:fb(this.mainPlaylistLoader_.srcUrl,b.value),method:b.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(c,d)=>{if(this.request){if(c){const {requestType:e}=d;this.error.metadata=Fc({requestType:e,request:d,error:c});this.mainPlaylistLoader_.clientOffset_=
this.mainLoaded_-Date.now();return a()}c="HEAD"===b.method?d.responseHeaders&&d.responseHeaders.date?Date.parse(d.responseHeaders.date):this.mainLoaded_:Date.parse(d.responseText);this.mainPlaylistLoader_.clientOffset_=c-Date.now();a()}})}haveMain_(){this.state="HAVE_MAIN_MANIFEST";this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const a=this.mainPlaylistLoader_.main,b={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};
this.trigger({type:"manifestparsestart",metadata:b});let c;try{c=ep({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:a})}catch(e){this.error=e,this.error.metadata={errorType:R.Error.StreamingDashManifestParserError,error:e},this.trigger("error")}a&&(c=gp(a,c,this.mainPlaylistLoader_.sidxMapping_));this.mainPlaylistLoader_.main=c?c:a;const d=this.mainPlaylistLoader_.main.locations&&
this.mainPlaylistLoader_.main.locations[0];d&&d!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=d);(!a||c&&c.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_();this.addEventStreamToMetadataTrack_(c);if(c){const {duration:e,endList:h}=c,n=[];c.playlists.forEach(u=>{n.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});b.parsedManifest={duration:e,isLive:!h,renditions:n};this.trigger({type:"manifestparsecomplete",
metadata:b})}return!!c}updateMinimumUpdatePeriodTimeout_(){const a=this.mainPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null);a.minimumUpdatePeriodTimeout_&&(J.clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);let b=a.main&&a.main.minimumUpdatePeriod;0===b&&(a.media()?b=1E3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_)));"number"!==
typeof b||0>=b?0>b&&this.logger_(`found invalid minimumUpdatePeriod of ${b}, not setting a timeout`):this.createMUPTimeout_(b)}createMUPTimeout_(a){const b=this.mainPlaylistLoader_;b.minimumUpdatePeriodTimeout_=J.setTimeout(()=>{b.minimumUpdatePeriodTimeout_=null;b.trigger("minimumUpdatePeriod");b.createMUPTimeout_(a)},a)}refreshXml_(){this.requestMain_((a,b)=>{b&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=hp(this.mainPlaylistLoader_.main,
this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,c=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(a){if(!a)throw Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const b=this.mainPlaylistLoader_.main.playlists,c=!this.media_||this.media_!==b[a];c?this.media_=b[a]:this.trigger("playlistunchanged");if(!this.mediaUpdateTimeout){const d=()=>{this.media().endList||(this.mediaUpdateTimeout=J.setTimeout(()=>{this.trigger("mediaupdatetimeout");
d()},qg(this.media(),!!c)))};d()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(a){a&&this.mainPlaylistLoader_.main.eventStream&&(a=this.mainPlaylistLoader_.main.eventStream.map(b=>({cueTime:b.start,frames:[{data:b.messageData}]})),this.addMetadataToTextTrack("EventStream",a,this.mainPlaylistLoader_.main.duration))}getKeyIdSet(a){if(a.contentProtection){const b=new Set;for(const c in a.contentProtection){const d=a.contentProtection[c].attributes["cenc:default_KID"];d&&b.add(d.replace(/-/g,
"").toLowerCase())}return b}}}var bb={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const Hk=function(a){a.on=a.addEventListener;a.off=a.removeEventListener;return a},ip=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(b){const c=
new BlobBuilder;c.append(a);return URL.createObjectURL(c.getBlob())}},Ik=function(a){return function(){const b=ip(a),c=Hk(new Worker(b));c.objURL=b;const d=c.terminate;c.on=c.addEventListener;c.off=c.removeEventListener;c.terminate=function(){URL.revokeObjectURL(b);return d.call(this)};return c}},Jk=function(a){return`var browserWorkerPolyFill = ${Hk.toString()};\n`+"browserWorkerPolyFill(self);\n"+a},Kk=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)},Ap=Jk(Kk(function(){var a=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},b=function(){this.init=function(){var f={};this.on=function(k,q){f[k]||(f[k]=[]);f[k]=f[k].concat(q)};this.off=function(k,q){if(!f[k])return!1;q=f[k].indexOf(q);f[k]=f[k].slice();f[k].splice(q,1);return-1<q};this.trigger=function(k){var q,p;if(q=f[k])if(2===arguments.length){var v=q.length;for(p=0;p<v;++p)q[p].call(this,arguments[1])}else{var x=[];p=arguments.length;
for(p=1;p<arguments.length;++p)x.push(arguments[p]);v=q.length;for(p=0;p<v;++p)q[p].apply(this,x)}};this.dispose=function(){f={}}}};b.prototype.pipe=function(f){this.on("data",function(k){f.push(k)});this.on("done",function(k){f.flush(k)});this.on("partialdone",function(k){f.partialFlush(k)});this.on("endedtimeline",function(k){f.endTimeline(k)});this.on("reset",function(k){f.reset(k)});return f};b.prototype.push=function(f){this.trigger("data",f)};b.prototype.flush=function(f){this.trigger("done",
f)};b.prototype.partialFlush=function(f){this.trigger("partialdone",f)};b.prototype.endTimeline=function(f){this.trigger("endedtimeline",f)};b.prototype.reset=function(f){this.trigger("reset",f)};var c=Math.pow(2,32),d=function(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);return f.getBigUint64?(f=f.getBigUint64(0),f<Number.MAX_SAFE_INTEGER?Number(f):f):f.getUint32(0)*c+f.getUint32(4)},e,h,n,u,t,A,F,y,C,L,H,B,E,P,U,X;(function(){var f;n={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],
hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(f in n)n.hasOwnProperty(f)&&(n[f]=[f.charCodeAt(0),f.charCodeAt(1),f.charCodeAt(2),f.charCodeAt(3)]);u=new Uint8Array([105,115,111,109]);A=new Uint8Array([97,118,99,49]);t=new Uint8Array([0,0,0,1]);F=new Uint8Array([0,0,0,0,0,0,
0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);y=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);C={video:F,audio:y};B=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);H=new Uint8Array([0,0,0,0,0,0,0,0]);P=E=new Uint8Array([0,0,0,0,0,0,0,0]);U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);X=E;L=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var M=function(f){var k=[],
q=0,p;for(p=1;p<arguments.length;p++)k.push(arguments[p]);for(p=k.length;p--;)q+=k[p].byteLength;var v=new Uint8Array(q+8);(new DataView(v.buffer,v.byteOffset,v.byteLength)).setUint32(0,v.byteLength);v.set(f,4);p=0;for(q=8;p<k.length;p++)v.set(k[p],q),q+=k[p].byteLength;return v};var O=function(){return M(n.dinf,M(n.dref,B))};var S=function(f){return M(n.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<
7|f.channelcount<<3,6,1,2]))};var aa=function(){return M(n.ftyp,u,t,u,A)};var Z=function(f){return M(n.hdlr,C[f])};var ba=function(f){var k=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);f.samplerate&&(k[12]=f.samplerate>>>24&255,k[13]=f.samplerate>>>16&255,k[14]=f.samplerate>>>8&255,k[15]=f.samplerate&255);return M(n.mdhd,k)};var da=function(f){return M(n.mdia,ba(f),Z(f.type),la(f))};var na=function(f){return M(n.mfhd,
new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))};var la=function(f){return M(n.minf,"video"===f.type?M(n.vmhd,L):M(n.smhd,H),O(),Da(f))};var wa=function(f){for(var k=f.length,q=[];k--;)q[k]=Yb(f[k]);return M.apply(null,[n.moov,ta(4294967295)].concat(q).concat(xa(f)))};var xa=function(f){for(var k=f.length,q=[];k--;)q[k]=Jc(f[k]);return M.apply(null,[n.mvex].concat(q))};var ta=function(f){f=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>
16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return M(n.mvhd,f)};var Ja=function(f){f=f.samples||[];var k=new Uint8Array(4+f.length),q;for(q=0;q<f.length;q++){var p=f[q].flags;k[q+4]=p.dependsOn<<4|p.isDependedOn<<2|p.hasRedundancy}return M(n.sdtp,k)};var Da=function(f){return M(n.stbl,e(f),M(n.stts,X),M(n.stsc,P),M(n.stsz,U),M(n.stco,E))};(function(){e=
function(q){return M(n.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===q.type?f(q):k(q))};var f=function(q){var p=q.sps||[],v=q.pps||[],x=[],G=[],I;for(I=0;I<p.length;I++)x.push((p[I].byteLength&65280)>>>8),x.push(p[I].byteLength&255),x=x.concat(Array.prototype.slice.call(p[I]));for(I=0;I<v.length;I++)G.push((v[I].byteLength&65280)>>>8),G.push(v[I].byteLength&255),G=G.concat(Array.prototype.slice.call(v[I]));p=[n.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(q.width&65280)>>
8,q.width&255,(q.height&65280)>>8,q.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),M(n.avcC,new Uint8Array([1,q.profileIdc,q.profileCompatibility,q.levelIdc,255].concat([p.length],x,[v.length],G))),M(n.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];q.sarRatio&&(v=q.sarRatio[0],q=q.sarRatio[1],p.push(M(n.pasp,new Uint8Array([(v&4278190080)>>24,(v&16711680)>>16,(v&65280)>>8,v&255,
(q&4278190080)>>24,(q&16711680)>>16,(q&65280)>>8,q&255]))));return M.apply(null,p)};var k=function(q){return M(n.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(q.channelcount&65280)>>8,q.channelcount&255,(q.samplesize&65280)>>8,q.samplesize&255,0,0,0,0,(q.samplerate&65280)>>8,q.samplerate&255,0,0]),S(q))}})();var ya=function(f){f=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>
16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return M(n.tkhd,f)};var Va=function(f){var k=M(n.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var q=Math.floor(f.baseMediaDecodeTime/c);var p=Math.floor(f.baseMediaDecodeTime%c);q=M(n.tfdt,new Uint8Array([1,
0,0,0,q>>>24&255,q>>>16&255,q>>>8&255,q&255,p>>>24&255,p>>>16&255,p>>>8&255,p&255]));if("audio"===f.type)return f=h(f,92),M(n.traf,k,q,f);p=Ja(f);f=h(f,p.length+92);return M(n.traf,k,q,f,p)};var Yb=function(f){f.duration=f.duration||4294967295;return M(n.trak,ya(f),da(f))};var Jc=function(f){var k=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==f.type&&(k[k.length-1]=0);return M(n.trex,k)};(function(){var f=function(p,
v){var x=0,G=0,I=0,K=0;p.length&&(void 0!==p[0].duration&&(x=1),void 0!==p[0].size&&(G=2),void 0!==p[0].flags&&(I=4),void 0!==p[0].compositionTimeOffset&&(K=8));return[0,0,x|G|I|K,1,(p.length&4278190080)>>>24,(p.length&16711680)>>>16,(p.length&65280)>>>8,p.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]};var k=function(p,v){var x;p=p.samples||[];v+=20+16*p.length;var G=f(p,v);v=new Uint8Array(G.length+16*p.length);v.set(G);G=G.length;for(x=0;x<p.length;x++){var I=p[x];v[G++]=
(I.duration&4278190080)>>>24;v[G++]=(I.duration&16711680)>>>16;v[G++]=(I.duration&65280)>>>8;v[G++]=I.duration&255;v[G++]=(I.size&4278190080)>>>24;v[G++]=(I.size&16711680)>>>16;v[G++]=(I.size&65280)>>>8;v[G++]=I.size&255;v[G++]=I.flags.isLeading<<2|I.flags.dependsOn;v[G++]=I.flags.isDependedOn<<6|I.flags.hasRedundancy<<4|I.flags.paddingValue<<1|I.flags.isNonSyncSample;v[G++]=I.flags.degradationPriority&61440;v[G++]=I.flags.degradationPriority&15;v[G++]=(I.compositionTimeOffset&4278190080)>>>24;v[G++]=
(I.compositionTimeOffset&16711680)>>>16;v[G++]=(I.compositionTimeOffset&65280)>>>8;v[G++]=I.compositionTimeOffset&255}return M(n.trun,v)};var q=function(p,v){var x;p=p.samples||[];v+=20+8*p.length;var G=f(p,v);v=new Uint8Array(G.length+8*p.length);v.set(G);G=G.length;for(x=0;x<p.length;x++){var I=p[x];v[G++]=(I.duration&4278190080)>>>24;v[G++]=(I.duration&16711680)>>>16;v[G++]=(I.duration&65280)>>>8;v[G++]=I.duration&255;v[G++]=(I.size&4278190080)>>>24;v[G++]=(I.size&16711680)>>>16;v[G++]=(I.size&
65280)>>>8;v[G++]=I.size&255}return M(n.trun,v)};h=function(p,v){return"audio"===p.type?q(p,v):k(p,v)}})();var Cb={ftyp:aa,mdat:function(f){return M(n.mdat,f)},moof:function(f,k){for(var q=[],p=k.length;p--;)q[p]=Va(k[p]);return M.apply(null,[n.moof,na(f)].concat(q))},moov:wa,initSegment:function(f){var k=aa();f=wa(f);var q=new Uint8Array(k.byteLength+f.byteLength);q.set(k);q.set(f,k.byteLength);return q}},$b=function(f,k){var q={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,
degradationPriority:0,isNonSyncSample:1}};q.dataOffset=k;q.compositionTimeOffset=f.pts-f.dts;q.duration=f.duration;q.size=4*f.length;q.size+=f.byteLength;f.keyFrame&&(q.flags.dependsOn=2,q.flags.isNonSyncSample=0);return q},oa=[33,16,5,32,164,27],db=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],va=function(f){for(var k=[];f--;)k.push(0);return k},Nd=function(f){return Object.keys(f).reduce(function(k,q){k[q]=new Uint8Array(f[q].reduce(function(p,v){return p.concat(v)},[]));return k},{})},Ta;var vb=
function(f){return 9E4*f};var Zb=function(f,k){return f*k};var mb=function(f){return f/9E4};var bc=function(f,k){return f/k};var qa={ONE_SECOND_IN_TS:9E4,secondsToVideoTs:vb,secondsToAudioTs:Zb,videoTsToSeconds:mb,audioTsToSeconds:bc,audioTsToVideoTs:function(f,k){return vb(bc(f,k))},videoTsToAudioTs:function(f,k){return Zb(mb(f),k)},metadataTsToSeconds:function(f,k,q){return mb(q?f:f-k)}},Od=qa.ONE_SECOND_IN_TS,jc={parseSei:function(f){for(var k=0,q={payloadType:-1,payloadSize:0},p=0,v=0;k<f.byteLength&&
128!==f[k];){for(;255===f[k];)p+=255,k++;for(p+=f[k++];255===f[k];)v+=255,k++;v+=f[k++];if(!q.payload&&4===p)if("GA94"===String.fromCharCode(f[k+3],f[k+4],f[k+5],f[k+6])){q.payloadType=p;q.payloadSize=v;q.payload=f.subarray(k,k+v);break}else q.payload=void 0;k+=v;v=p=0}return q},parseUserData:function(f){return 181!==f.payload[0]||49!==(f.payload[1]<<8|f.payload[2])||"GA94"!==String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])||3!==f.payload[7]?null:f.payload.subarray(8,f.payload.length-
1)},parseCaptionPackets:function(f,k){var q=[],p;if(!(k[0]&64))return q;var v=k[0]&31;for(p=0;p<v;p++){var x=3*p;var G={type:k[x+2]&3,pts:f};k[x+2]&4&&(G.ccData=k[x+3]<<8|k[x+4],q.push(G))}return q},discardEmulationPreventionBytes:function(f){for(var k=f.byteLength,q=[],p=1,v;p<k-2;)0===f[p]&&0===f[p+1]&&3===f[p+2]?(q.push(p+2),p+=2):p++;if(0===q.length)return f;k-=q.length;v=new Uint8Array(k);var x=0;for(p=0;p<k;x++,p++)x===q[0]&&(x++,q.shift()),v[p]=f[x];return v},USER_DATA_REGISTERED_ITU_T_T35:4},
jb=function(f){f=f||{};jb.prototype.init.call(this);this.parse708captions_="boolean"===typeof f.parse708captions?f.parse708captions:!0;this.captionPackets_=[];this.ccStreams_=[new Ba(0,0),new Ba(0,1),new Ba(1,0),new Ba(1,1)];this.parse708captions_&&(this.cc708Stream_=new Aa({captionServices:f.captionServices}));this.reset();this.ccStreams_.forEach(function(k){k.on("data",this.trigger.bind(this,"data"));k.on("partialdone",this.trigger.bind(this,"partialdone"));k.on("done",this.trigger.bind(this,"done"))},
this);this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};jb.prototype=new b;jb.prototype.push=function(f){if("sei_rbsp"===f.nalUnitType){var k=jc.parseSei(f.escapedRBSP);k.payload&&k.payloadType===jc.USER_DATA_REGISTERED_ITU_T_T35&&(k=jc.parseUserData(k))&&(f.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:f.dts===this.latestDts_&&
this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(k=jc.parseCaptionPackets(f.pts,k),this.captionPackets_=this.captionPackets_.concat(k),this.latestDts_!==f.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=f.dts))}};jb.prototype.flushCCStreams=function(f){this.ccStreams_.forEach(function(k){return"flush"===f?k.flush():k.partialFlush()},this)};jb.prototype.flushStream=function(f){this.captionPackets_.length&&(this.captionPackets_.forEach(function(k,
q){k.presortIndex=q}),this.captionPackets_.sort(function(k,q){return k.pts===q.pts?k.presortIndex-q.presortIndex:k.pts-q.pts}),this.captionPackets_.forEach(function(k){2>k.type?this.dispatchCea608Packet(k):this.dispatchCea708Packet(k)},this),this.captionPackets_.length=0);this.flushCCStreams(f)};jb.prototype.flush=function(){return this.flushStream("flush")};jb.prototype.partialFlush=function(){return this.flushStream("partialFlush")};jb.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=
!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(f){f.reset()})};jb.prototype.dispatchCea608Packet=function(f){this.setsTextOrXDSActive(f)?this.activeCea608Channel_[f.type]=null:this.setsChannel1Active(f)?this.activeCea608Channel_[f.type]=0:this.setsChannel2Active(f)&&(this.activeCea608Channel_[f.type]=1);null!==this.activeCea608Channel_[f.type]&&this.ccStreams_[(f.type<<1)+this.activeCea608Channel_[f.type]].push(f)};jb.prototype.setsChannel1Active=function(f){return 4096===
(f.ccData&30720)};jb.prototype.setsChannel2Active=function(f){return 6144===(f.ccData&30720)};jb.prototype.setsTextOrXDSActive=function(f){return 256===(f.ccData&28928)||4138===(f.ccData&30974)||6186===(f.ccData&30974)};jb.prototype.dispatchCea708Packet=function(f){this.parse708captions_&&this.cc708Stream_.push(f)};var Qd={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,
4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Pd=function(f){var k=Qd[f]||f;return f&4096&&f===k?"":String.fromCharCode(k)},uc=function(f){return 32<=f&&127>=f||160<=f&&255>=f},Db=function(f){this.windowNum=f;this.reset()};Db.prototype.reset=function(){this.clearText();this.pendingNewLine=!1;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.anchorPoint=this.anchorHorizontal=this.anchorVertical=this.relativePositioning=this.priority=
this.columnLock=this.rowLock=this.visible=0;this.rowCount=1;this.virtualRowCount=this.rowCount+1;this.columnCount=41;this.penStyle=this.windowStyle=0};Db.prototype.getText=function(){return this.rows.join("\n")};Db.prototype.clearText=function(){this.rows=[""];this.rowIdx=0};Db.prototype.newLine=function(f){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(f);0<this.rows.length&&(this.rows.push(""),this.rowIdx++);for(;this.rows.length>this.virtualRowCount;)this.rows.shift(),
this.rowIdx--};Db.prototype.isEmpty=function(){return 0===this.rows.length?!0:1===this.rows.length?""===this.rows[0]:!1};Db.prototype.addText=function(f){this.rows[this.rowIdx]+=f};Db.prototype.backspace=function(){if(!this.isEmpty()){var f=this.rows[this.rowIdx];this.rows[this.rowIdx]=f.substr(0,f.length-1)}};var sb=function(f,k,q){this.serviceNum=f;this.text="";this.currentWindow=new Db(-1);this.windows=[];this.stream=q;"string"===typeof k&&this.createTextDecoder(k)};sb.prototype.init=function(f,
k){this.startPts=f;for(f=0;8>f;f++)this.windows[f]=new Db(f),"function"===typeof k&&(this.windows[f].beforeRowOverflow=k)};sb.prototype.setCurrentWindow=function(f){this.currentWindow=this.windows[f]};sb.prototype.createTextDecoder=function(f){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(f)}catch(k){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+
f+" encoding. "+k})}};var Aa=function(f){f=f||{};Aa.prototype.init.call(this);var k=this,q=f.captionServices||{},p={},v;Object.keys(q).forEach(x=>{v=q[x];/^SERVICE/.test(x)&&(p[x]=v.encoding)});this.serviceEncodings=p;this.current708Packet=null;this.services={};this.push=function(x){3===x.type?k.new708Packet():null===k.current708Packet&&k.new708Packet();k.add708Bytes(x)}};Aa.prototype=new b;Aa.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet();this.current708Packet=
{data:[],ptsVals:[]}};Aa.prototype.add708Bytes=function(f){var k=f.ccData,q=k>>>8;k&=255;this.current708Packet.ptsVals.push(f.pts);this.current708Packet.data.push(q);this.current708Packet.data.push(k)};Aa.prototype.push708Packet=function(){var f=this.current708Packet,k=f.data,q=null,p=null,v=0,x=k[v++];f.seq=x>>6;for(f.sizeCode=x&63;v<k.length;v++)x=k[v++],q=x>>5,p=x&31,7===q&&0<p&&(q=x=k[v++]),this.pushServiceBlock(q,v,p),0<p&&(v+=p-1)};Aa.prototype.pushServiceBlock=function(f,k,q){var p=k,v=this.current708Packet.data,
x=this.services[f];for(x||=this.initService(f,p);p<k+q&&p<v.length;p++)f=v[p],uc(f)?p=this.handleText(p,x):24===f?p=this.multiByteCharacter(p,x):16===f?p=this.extendedCommands(p,x):128<=f&&135>=f?p=this.setCurrentWindow(p,x):152<=f&&159>=f?p=this.defineWindow(p,x):136===f?p=this.clearWindows(p,x):140===f?p=this.deleteWindows(p,x):137===f?p=this.displayWindows(p,x):138===f?p=this.hideWindows(p,x):139===f?p=this.toggleWindows(p,x):151===f?p=this.setWindowAttributes(p,x):144===f?p=this.setPenAttributes(p,
x):145===f?p=this.setPenColor(p,x):146===f?p=this.setPenLocation(p,x):143===f?x=this.reset(p,x):8===f?x.currentWindow.backspace():12===f?x.currentWindow.clearText():13===f?x.currentWindow.pendingNewLine=!0:14===f?x.currentWindow.clearText():141===f&&p++};Aa.prototype.extendedCommands=function(f,k){var q=this.current708Packet.data[++f];uc(q)&&(f=this.handleText(f,k,{isExtended:!0}));return f};Aa.prototype.getPts=function(f){return this.current708Packet.ptsVals[Math.floor(f/2)]};Aa.prototype.initService=
function(f,k){var q="SERVICE"+f,p=this,v;q in this.serviceEncodings&&(v=this.serviceEncodings[q]);this.services[f]=new sb(f,v,p);this.services[f].init(this.getPts(k),function(x){p.flushDisplayed(x,p.services[f])});return this.services[f]};Aa.prototype.handleText=function(f,k,q){function p(T){return T.map(Y=>("0"+(Y&255).toString(16)).slice(-2)).join("")}var v=q&&q.isExtended,x=q&&q.isMultiByte;q=this.current708Packet.data;var G=v?4096:0,I=q[f],K=q[f+1];q=k.currentWindow;x?(K=[I,K],f++):K=[I];k.textDecoder_&&
!v?k=k.textDecoder_.decode(new Uint8Array(K)):x?(k=p(K),k=String.fromCharCode(parseInt(k,16))):k=Pd(G|I);q.pendingNewLine&&!q.isEmpty()&&q.newLine(this.getPts(f));q.pendingNewLine=!1;q.addText(k);return f};Aa.prototype.multiByteCharacter=function(f,k){var q=this.current708Packet.data,p=q[f+2];uc(q[f+1])&&uc(p)&&(f=this.handleText(++f,k,{isMultiByte:!0}));return f};Aa.prototype.setCurrentWindow=function(f,k){k.setCurrentWindow(this.current708Packet.data[f]&7);return f};Aa.prototype.defineWindow=function(f,
k){var q=this.current708Packet.data,p=q[f];k.setCurrentWindow(p&7);k=k.currentWindow;p=q[++f];k.visible=(p&32)>>5;k.rowLock=(p&16)>>4;k.columnLock=(p&8)>>3;k.priority=p&7;p=q[++f];k.relativePositioning=(p&128)>>7;k.anchorVertical=p&127;p=q[++f];k.anchorHorizontal=p;p=q[++f];k.anchorPoint=(p&240)>>4;k.rowCount=p&15;p=q[++f];k.columnCount=p&63;p=q[++f];k.windowStyle=(p&56)>>3;k.penStyle=p&7;k.virtualRowCount=k.rowCount+1;return f};Aa.prototype.setWindowAttributes=function(f,k){var q=this.current708Packet.data,
p=q[f];k=k.currentWindow.winAttr;p=q[++f];k.fillOpacity=(p&192)>>6;k.fillRed=(p&48)>>4;k.fillGreen=(p&12)>>2;k.fillBlue=p&3;p=q[++f];k.borderType=(p&192)>>6;k.borderRed=(p&48)>>4;k.borderGreen=(p&12)>>2;k.borderBlue=p&3;p=q[++f];k.borderType+=(p&128)>>5;k.wordWrap=(p&64)>>6;k.printDirection=(p&48)>>4;k.scrollDirection=(p&12)>>2;k.justify=p&3;p=q[++f];k.effectSpeed=(p&240)>>4;k.effectDirection=(p&12)>>2;k.displayEffect=p&3;return f};Aa.prototype.flushDisplayed=function(f,k){for(var q=[],p=0;8>p;p++)k.windows[p].visible&&
!k.windows[p].isEmpty()&&q.push(k.windows[p].getText());k.endPts=f;k.text=q.join("\n\n");this.pushCaption(k);k.startPts=f};Aa.prototype.pushCaption=function(f){""!==f.text&&(this.trigger("data",{startPts:f.startPts,endPts:f.endPts,text:f.text,stream:"cc708_"+f.serviceNum}),f.text="",f.startPts=f.endPts)};Aa.prototype.displayWindows=function(f,k){var q=this.current708Packet.data[++f],p=this.getPts(f);this.flushDisplayed(p,k);for(p=0;8>p;p++)q&1<<p&&(k.windows[p].visible=1);return f};Aa.prototype.hideWindows=
function(f,k){var q=this.current708Packet.data[++f],p=this.getPts(f);this.flushDisplayed(p,k);for(p=0;8>p;p++)q&1<<p&&(k.windows[p].visible=0);return f};Aa.prototype.toggleWindows=function(f,k){var q=this.current708Packet.data[++f],p=this.getPts(f);this.flushDisplayed(p,k);for(p=0;8>p;p++)q&1<<p&&(k.windows[p].visible^=1);return f};Aa.prototype.clearWindows=function(f,k){var q=this.current708Packet.data[++f],p=this.getPts(f);this.flushDisplayed(p,k);for(p=0;8>p;p++)q&1<<p&&k.windows[p].clearText();
return f};Aa.prototype.deleteWindows=function(f,k){var q=this.current708Packet.data[++f],p=this.getPts(f);this.flushDisplayed(p,k);for(p=0;8>p;p++)q&1<<p&&k.windows[p].reset();return f};Aa.prototype.setPenAttributes=function(f,k){var q=this.current708Packet.data,p=q[f];k=k.currentWindow.penAttr;p=q[++f];k.textTag=(p&240)>>4;k.offset=(p&12)>>2;k.penSize=p&3;p=q[++f];k.italics=(p&128)>>7;k.underline=(p&64)>>6;k.edgeType=(p&56)>>3;k.fontStyle=p&7;return f};Aa.prototype.setPenColor=function(f,k){var q=
this.current708Packet.data,p=q[f];k=k.currentWindow.penColor;p=q[++f];k.fgOpacity=(p&192)>>6;k.fgRed=(p&48)>>4;k.fgGreen=(p&12)>>2;k.fgBlue=p&3;p=q[++f];k.bgOpacity=(p&192)>>6;k.bgRed=(p&48)>>4;k.bgGreen=(p&12)>>2;k.bgBlue=p&3;p=q[++f];k.edgeRed=(p&48)>>4;k.edgeGreen=(p&12)>>2;k.edgeBlue=p&3;return f};Aa.prototype.setPenLocation=function(f,k){var q=this.current708Packet.data,p=q[f],v=k.currentWindow.penLoc;k.currentWindow.pendingNewLine=!0;p=q[++f];v.row=p&15;p=q[++f];v.column=p&63;return f};Aa.prototype.reset=
function(f,k){var q=this.getPts(f);this.flushDisplayed(q,k);return this.initService(k.serviceNum,f)};var $a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,
567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ka=function(f){if(null===f)return"";f=$a[f]||f;return String.fromCharCode(f)},hb=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Kb=function(){for(var f=
[],k=15;k--;)f.push({text:"",indent:0,offset:0});return f},Ba=function(f,k){Ba.prototype.init.call(this);this.field_=f||0;this.dataChannel_=k||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(q){var p=q.ccData&32639;if(p===this.lastControlCode_)this.lastControlCode_=null;else{4096===(p&61440)?this.lastControlCode_=p:p!==this.PADDING_&&(this.lastControlCode_=null);var v=p>>>8;var x=p&255;p!==this.PADDING_&&(p===this.RESUME_CAPTION_LOADING_?
this.mode_="popOn":p===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(q.pts),this.flushDisplayed(q.pts),x=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=x,this.startPts_=q.pts):p===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(q.pts)):p===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(q.pts)):p===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(q.pts)):p===this.CARRIAGE_RETURN_?(this.clearFormatting(q.pts),this.flushDisplayed(q.pts),
this.shiftRowsUp_(),this.startPts_=q.pts):p===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1):p===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(q.pts),this.displayed_=Kb()):p===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Kb():p===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(q.pts),this.displayed_=Kb()),this.mode_=
"paintOn",this.startPts_=q.pts):this.isSpecialCharacter(v,x)?(p=Ka((v&3)<<8|x),this[this.mode_](q.pts,p),this.column_++):this.isExtCharacter(v,x)?("popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),p=Ka((v&3)<<8|x),this[this.mode_](q.pts,p),this.column_++):this.isMidRowCode(v,x)?(this.clearFormatting(q.pts),this[this.mode_](q.pts," "),this.column_++,14===(x&14)&&this.addFormatting(q.pts,
["i"]),1===(x&1)&&this.addFormatting(q.pts,["u"])):this.isOffsetControlCode(v,x)?(q=x&3,this.nonDisplayed_[this.row_].offset=q,this.column_+=q):this.isPAC(v,x)?(v=hb.indexOf(p&7968),"rollUp"===this.mode_&&(0>v-this.rollUpRows_+1&&(v=this.rollUpRows_-1),this.setRollUp(q.pts,v)),v!==this.row_&&0<=v&&14>=v&&(this.clearFormatting(q.pts),this.row_=v),x&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(q.pts,["u"]),16===(p&16)&&(p=(p&14)>>1,this.column_=4*p,this.nonDisplayed_[this.row_].indent+=
p),this.isColorPAC(x)&&14===(x&14)&&this.addFormatting(q.pts,["i"])):this.isNormalChar(v)&&(0===x&&(x=null),p=Ka(v),p+=Ka(x),this[this.mode_](q.pts,p),this.column_+=p.length))}}};Ba.prototype=new b;Ba.prototype.flushDisplayed=function(f){const k=p=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+p+"."})},q=[];this.displayed_.forEach((p,v)=>{if(p&&p.text&&p.text.length){try{p.text=p.text.trim()}catch(x){k(v)}p.text.length&&q.push({text:p.text,line:v+1,position:10+
Math.min(70,10*p.indent)+2.5*p.offset})}else void 0!==p&&null!==p||k(v)});q.length&&this.trigger("data",{startPts:this.startPts_,endPts:f,content:q,stream:this.name_})};Ba.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Kb();this.nonDisplayed_=Kb();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};Ba.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<
8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;
this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Ba.prototype.isSpecialCharacter=function(f,k){return f===this.EXT_&&48<=k&&63>=k};Ba.prototype.isExtCharacter=function(f,k){return(f===this.EXT_+1||f===this.EXT_+2)&&32<=k&&63>=k};Ba.prototype.isMidRowCode=function(f,k){return f===this.EXT_&&32<=k&&47>=k};Ba.prototype.isOffsetControlCode=function(f,k){return f===this.OFFSET_&&33<=k&&35>=k};Ba.prototype.isPAC=function(f,k){return f>=this.BASE_&&f<this.BASE_+8&&64<=k&&127>=k};Ba.prototype.isColorPAC=
function(f){return 64<=f&&79>=f||96<=f&&127>=f};Ba.prototype.isNormalChar=function(f){return 32<=f&&127>=f};Ba.prototype.setRollUp=function(f,k){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(f),this.nonDisplayed_=Kb(),this.displayed_=Kb());if(void 0!==k&&k!==this.row_)for(f=0;f<this.rollUpRows_;f++)this.displayed_[k-f]=this.displayed_[this.row_-f],this.displayed_[this.row_-f]={text:"",indent:0,offset:0};void 0===k&&(k=this.row_);this.topRow_=k-this.rollUpRows_+1};Ba.prototype.addFormatting=
function(f,k){this.formatting_=this.formatting_.concat(k);k=k.reduce(function(q,p){return q+"\x3c"+p+"\x3e"},"");this[this.mode_](f,k)};Ba.prototype.clearFormatting=function(f){if(this.formatting_.length){var k=this.formatting_.reverse().reduce(function(q,p){return q+"\x3c/"+p+"\x3e"},"");this.formatting_=[];this[this.mode_](f,k)}};Ba.prototype.popOn=function(f,k){this.nonDisplayed_[this.row_].text+=k};Ba.prototype.rollUp=function(f,k){this.displayed_[this.row_].text+=k};Ba.prototype.shiftRowsUp_=
function(){var f;for(f=0;f<this.topRow_;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.row_+1;15>f;f++)this.displayed_[f]={text:"",indent:0,offset:0};for(f=this.topRow_;f<this.row_;f++)this.displayed_[f]=this.displayed_[f+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}};Ba.prototype.paintOn=function(f,k){this.displayed_[this.row_].text+=k};var z=jb,D=Ba,N=Aa,Q={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},fa=function(f,k){var q=1;for(f>k&&(q=-1);4294967296<
Math.abs(k-f);)f+=8589934592*q;return f},pa=function(f){var k,q;pa.prototype.init.call(this);this.type_=f||"shared";this.push=function(p){if("metadata"===p.type)this.trigger("data",p);else if("shared"===this.type_||p.type===this.type_)void 0===q&&(q=p.dts),p.dts=fa(p.dts,q),p.pts=fa(p.pts,q),k=p.dts,this.trigger("data",p)};this.flush=function(){q=k;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){k=q=void 0};this.reset=function(){this.discontinuity();
this.trigger("reset")}};pa.prototype=new b;var Xa=pa,Sa=(f,k,q)=>{if(!f)return-1;for(;q<f.length;q++)if(f[q]===k)return q;return-1},ib=function(f,k,q){for(var p="";k<q;k++)p+="%"+("00"+f[k].toString(16)).slice(-2);return p},Lb=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Za={APIC:function(f){var k=1;if(3===f.data[0]){var q=Sa(f.data,0,k);0>q||(f.mimeType=unescape(ib(f.data,k,q)),k=q+1,f.pictureType=f.data[k],k++,q=Sa(f.data,0,k),0>q||(f.description=decodeURIComponent(ib(f.data,k,q)),k=q+1,"--\x3e"===
f.mimeType?f.url=unescape(ib(f.data,k,f.data.length)):f.pictureData=f.data.subarray(k,f.data.length)))}},"T*":function(f){3===f.data[0]&&(f.value=decodeURIComponent(ib(f.data,1,f.data.length)).replace(/\0*$/,""),f.values=f.value.split("\x00"))},TXXX:function(f){if(3===f.data[0]){var k=Sa(f.data,0,1);-1!==k&&(f.description=decodeURIComponent(ib(f.data,1,k)),f.value=decodeURIComponent(ib(f.data,k+1,f.data.length)).replace(/\0*$/,""),f.data=f.value)}},"W*":function(f){f.url=unescape(ib(f.data,0,f.data.length)).replace(/\0.*$/,
"")},WXXX:function(f){if(3===f.data[0]){var k=Sa(f.data,0,1);-1!==k&&(f.description=decodeURIComponent(ib(f.data,1,k)),f.url=unescape(ib(f.data,k+1,f.data.length)).replace(/\0.*$/,""))}},PRIV:function(f){var k;for(k=0;k<f.data.length;k++)if(0===f.data[k]){f.owner=unescape(ib(f.data,0,k));break}f.privateData=f.data.subarray(k+1);f.data=f.privateData}},ua={parseId3Frames:function(f){var k=10,q=0,p=[];if(!(10>f.length||73!==f[0]||68!==f[1]||51!==f[2])){q=Lb(f.subarray(6,10));q+=10;f[5]&64&&(k=k+4+Lb(f.subarray(10,
14)),q-=Lb(f.subarray(16,20)));do{var v=Lb(f.subarray(k+4,k+8));if(1>v)break;var x=String.fromCharCode(f[k],f[k+1],f[k+2],f[k+3]);x={id:x,data:f.subarray(k+10,k+v+10)};x.key=x.id;if(Za[x.id])Za[x.id](x);else if("T"===x.id[0])Za["T*"](x);else if("W"===x.id[0])Za["W*"](x);p.push(x);k+=10;k+=v}while(k<q);return p}},parseSyncSafeInteger:Lb,frameParsers:Za};var Ya=function(f){f=f&&f.descriptor;var k=0,q=[],p=0,v;Ya.prototype.init.call(this);this.dispatchType=Q.METADATA_STREAM_TYPE.toString(16);if(f)for(v=
0;v<f.length;v++)this.dispatchType+=("00"+f[v].toString(16)).slice(-2);this.push=function(x){var G;if("timed-metadata"===x.type)if(x.dataAlignmentIndicator&&(p=0,q.length=0),0===q.length&&(10>x.data.length||73!==x.data[0]||68!==x.data[1]||51!==x.data[2]))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(q.push(x),p+=x.data.byteLength,1===q.length&&(k=ua.parseSyncSafeInteger(x.data.subarray(6,10)),k+=10),!(p<k)){x={data:new Uint8Array(k),frames:[],pts:q[0].pts,
dts:q[0].dts};for(G=0;G<k;)x.data.set(q[0].data.subarray(0,k-G),G),G+=q[0].data.byteLength,p-=q[0].data.byteLength,q.shift();G=10;x.data[5]&64&&(G=G+4+ua.parseSyncSafeInteger(x.data.subarray(10,14)),k-=ua.parseSyncSafeInteger(x.data.subarray(16,20)));do{var I=ua.parseSyncSafeInteger(x.data.subarray(G+4,G+8));if(1>I){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}var K=String.fromCharCode(x.data[G],x.data[G+1],x.data[G+2],x.data[G+
3]);K={id:K,data:x.data.subarray(G+10,G+I+10)};K.key=K.id;if(ua.frameParsers[K.id])ua.frameParsers[K.id](K);else if("T"===K.id[0])ua.frameParsers["T*"](K);else if("W"===K.id[0])ua.frameParsers["W*"](K);if("com.apple.streaming.transportStreamTimestamp"===K.owner){var T=K.data,Y=(T[3]&1)<<30|T[4]<<22|T[5]<<14|T[6]<<6|T[7]>>>2;Y*=4;Y+=T[7]&3;K.timeStamp=Y;void 0===x.pts&&void 0===x.dts&&(x.pts=K.timeStamp,x.dts=K.timeStamp);this.trigger("timestamp",K)}x.frames.push(K);G+=10;G+=I}while(G<k);this.trigger("data",
x)}}};Ya.prototype=new b;var ac=function(){var f=new Uint8Array(188),k=0;ac.prototype.init.call(this);this.push=function(q){var p=0,v=188;if(k){var x=new Uint8Array(q.byteLength+k);x.set(f.subarray(0,k));x.set(q,k);k=0}else x=q;for(;v<x.byteLength;)71===x[p]&&71===x[v]?(this.trigger("data",x.subarray(p,v)),p+=188,v+=188):(p++,v++);p<x.byteLength&&(f.set(x.subarray(p),0),k=x.byteLength-p)};this.flush=function(){188===k&&71===f[0]&&(this.trigger("data",f),k=0);this.trigger("done")};this.endTimeline=
function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){k=0;this.trigger("reset")}};ac.prototype=new b;var Ee=function(){Ee.prototype.init.call(this);var f=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var k=function(v,x){var G=0;x.payloadUnitStartIndicator&&(G+=v[G]+1);"pat"===x.type?q(v.subarray(G),x):p(v.subarray(G),x)};var q=function(v,x){x.section_number=v[7];x.last_section_number=v[8];f.pmtPid=(v[10]&31)<<8|v[11];x.pmtPid=f.pmtPid};var p=function(v,x){var G;
if(v[5]&1){f.programMapTable={video:null,audio:null,"timed-metadata":{}};var I=3+((v[1]&15)<<8|v[2])-4;for(G=12+((v[10]&15)<<8|v[11]);G<I;){var K=v[G],T=(v[G+1]&31)<<8|v[G+2];K===Q.H264_STREAM_TYPE&&null===f.programMapTable.video?f.programMapTable.video=T:K===Q.ADTS_STREAM_TYPE&&null===f.programMapTable.audio?f.programMapTable.audio=T:K===Q.METADATA_STREAM_TYPE&&(f.programMapTable["timed-metadata"][T]=K);G+=((v[G+3]&15)<<8|v[G+4])+5}x.programMapTable=f.programMapTable}};this.push=function(v){var x=
{},G=4;x.payloadUnitStartIndicator=!!(v[1]&64);x.pid=v[1]&31;x.pid<<=8;x.pid|=v[2];1<(v[3]&48)>>>4&&(G+=v[G]+1);if(0===x.pid)x.type="pat",k(v.subarray(G),x),this.trigger("data",x);else if(x.pid===this.pmtPid)for(x.type="pmt",k(v.subarray(G),x),this.trigger("data",x);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([v,G,x]):this.processPes_(v,G,x)};this.processPes_=function(v,x,G){G.streamType=
G.pid===this.programMapTable.video?Q.H264_STREAM_TYPE:G.pid===this.programMapTable.audio?Q.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][G.pid];G.type="pes";G.data=v.subarray(x);this.trigger("data",G)}};Ee.prototype=new b;Ee.STREAM_TYPES={h264:27,adts:15};var ug=function(){var f=this,k=!1,q={data:[],size:0},p={data:[],size:0},v={data:[],size:0},x,G=function(I,K,T){var Y=new Uint8Array(I.size),W={type:K},ka=0,ha=0;ka=!1;if(I.data.length&&!(9>I.size)){W.trackId=I.data[0].pid;for(ka=0;ka<I.data.length;ka++){var sa=
I.data[ka];Y.set(sa.data,ha);ha+=sa.data.byteLength}ha=Y[0]<<16|Y[1]<<8|Y[2];W.data=new Uint8Array;1===ha&&(W.packetLength=6+(Y[4]<<8|Y[5]),W.dataAlignmentIndicator=0!==(Y[6]&4),ha=Y[7],ha&192&&(W.pts=(Y[9]&14)<<27|(Y[10]&255)<<20|(Y[11]&254)<<12|(Y[12]&255)<<5|(Y[13]&254)>>>3,W.pts*=4,W.pts+=(Y[13]&6)>>>1,W.dts=W.pts,ha&64&&(W.dts=(Y[14]&14)<<27|(Y[15]&255)<<20|(Y[16]&254)<<12|(Y[17]&255)<<5|(Y[18]&254)>>>3,W.dts*=4,W.dts+=(Y[18]&6)>>>1)),W.data=Y.subarray(9+Y[8]));ka="video"===K||W.packetLength<=
I.size;if(T||ka)I.size=0,I.data.length=0;ka&&f.trigger("data",W)}};ug.prototype.init.call(this);this.push=function(I){({pat:function(){},pes:function(){switch(I.streamType){case Q.H264_STREAM_TYPE:var K=q;var T="video";break;case Q.ADTS_STREAM_TYPE:K=p;T="audio";break;case Q.METADATA_STREAM_TYPE:K=v;T="timed-metadata";break;default:return}I.payloadUnitStartIndicator&&G(K,T,!0);K.data.push(I);K.size+=I.data.byteLength},pmt:function(){var K={type:"metadata",tracks:[]};x=I.programMapTable;null!==x.video&&
K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"});null!==x.audio&&K.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"});k=!0;f.trigger("data",K)}})[I.type]()};this.reset=function(){q.size=0;q.data.length=0;p.size=0;p.data.length=0;this.trigger("reset")};this.flushStreams_=function(){G(q,"video");G(p,"audio");G(v,"timed-metadata")};this.flush=function(){if(!k&&x){var I={type:"metadata",tracks:[]};null!==x.video&&
I.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.video,codec:"avc",type:"video"});null!==x.audio&&I.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+x.audio,codec:"adts",type:"audio"});f.trigger("data",I)}k=!1;this.flushStreams_();this.trigger("done")}};ug.prototype=new b;var Vb={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:ac,TransportParseStream:Ee,ElementaryStream:ug,TimestampRolloverStream:Xa,CaptionStream:z,Cea608Stream:D,Cea708Stream:N,MetadataStream:Ya},Fe;
for(Fe in Q)Q.hasOwnProperty(Fe)&&(Vb[Fe]=Q[Fe]);var jp=qa.ONE_SECOND_IN_TS,Lk=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ge=function(f){var k,q=0;Ge.prototype.init.call(this);this.skipWarn_=function(p,v){this.trigger("log",{level:"warn",message:`adts skiping bytes ${p} to ${v} in frame ${q} outside syncword`})};this.push=function(p){var v=0;f||(q=0);if("audio"===p.type){if(k&&k.length){var x=k;k=new Uint8Array(x.byteLength+p.data.byteLength);k.set(x);k.set(p.data,x.byteLength)}else k=
p.data;for(var G;v+7<k.length;)if(255!==k[v]||240!==(k[v+1]&246))"number"!==typeof G&&(G=v),v++;else{"number"===typeof G&&(this.skipWarn_(G,v),G=null);var I=2*(~k[v+1]&1);x=(k[v+3]&3)<<11|k[v+4]<<3|(k[v+5]&224)>>5;var K=1024*((k[v+6]&3)+1);var T=K*jp/Lk[(k[v+2]&60)>>>2];if(k.byteLength-v<x)break;this.trigger("data",{pts:p.pts+q*T,dts:p.dts+q*T,sampleCount:K,audioobjecttype:(k[v+2]>>>6&3)+1,channelcount:(k[v+2]&1)<<2|(k[v+3]&192)>>>6,samplerate:Lk[(k[v+2]&60)>>>2],samplingfrequencyindex:(k[v+2]&60)>>>
2,samplesize:16,data:k.subarray(v+7+I,v+x)});q++;v+=x}"number"===typeof G&&(this.skipWarn_(G,v),G=null);k=k.subarray(v)}};this.flush=function(){q=0;this.trigger("done")};this.reset=function(){k=void 0;this.trigger("reset")};this.endTimeline=function(){k=void 0;this.trigger("endedtimeline")}};Ge.prototype=new b;var kp=function(f){var k=f.byteLength,q=0,p=0;this.length=function(){return 8*k};this.bitsAvailable=function(){return 8*k+p};this.loadWord=function(){var v=f.byteLength-k,x=new Uint8Array(4),
G=Math.min(4,k);if(0===G)throw Error("no bytes available");x.set(f.subarray(v,v+G));q=(new DataView(x.buffer)).getUint32(0);p=8*G;k-=G};this.skipBits=function(v){if(!(p>v)){v-=p;var x=Math.floor(v/8);v-=8*x;k-=x;this.loadWord()}q<<=v;p-=v};this.readBits=function(v){var x=Math.min(p,v),G=q>>>32-x;p-=x;0<p?q<<=x:0<k&&this.loadWord();x=v-x;return 0<x?G<<x|this.readBits(x):G};this.skipLeadingZeros=function(){var v;for(v=0;v<p;++v)if(0!==(q&2147483648>>>v))return q<<=v,p-=v,v;this.loadWord();return v+
this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1};this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};
var vg=function(){var f=0,k,q;vg.prototype.init.call(this);this.push=function(p){if(q){var v=new Uint8Array(q.byteLength+p.data.byteLength);v.set(q);v.set(p.data,q.byteLength);q=v}else q=p.data;for(p=q.byteLength;f<p-3;f++)if(1===q[f+2]){k=f+5;break}for(;k<p;)switch(q[k]){case 0:if(0!==q[k-1]){k+=2;break}else if(0!==q[k-2]){k++;break}f+3!==k-2&&this.trigger("data",q.subarray(f+3,k-2));do k++;while(1!==q[k]&&k<p);f=k-2;k+=3;break;case 1:if(0!==q[k-1]||0!==q[k-2]){k+=3;break}this.trigger("data",q.subarray(f+
3,k-2));f=k-2;k+=3;break;default:k+=3}q=q.subarray(f);k-=f;f=0};this.reset=function(){q=null;f=0;this.trigger("reset")};this.flush=function(){q&&3<q.byteLength&&this.trigger("data",q.subarray(f+3));q=null;f=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};vg.prototype=new b;var lp={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var wg=function(){var f=new vg,k,q,p;wg.prototype.init.call(this);var v=this;this.push=function(K){"video"===
K.type&&(k=K.trackId,q=K.pts,p=K.dts,f.push(K))};f.on("data",function(K){var T={trackId:k,pts:q,dts:p,data:K,nalUnitTypeCode:K[0]&31};switch(T.nalUnitTypeCode){case 5:T.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:T.nalUnitType="sei_rbsp";T.escapedRBSP=G(K.subarray(1));break;case 7:T.nalUnitType="seq_parameter_set_rbsp";T.escapedRBSP=G(K.subarray(1));T.config=I(T.escapedRBSP);break;case 8:T.nalUnitType="pic_parameter_set_rbsp";break;case 9:T.nalUnitType="access_unit_delimiter_rbsp"}v.trigger("data",
T)});f.on("done",function(){v.trigger("done")});f.on("partialdone",function(){v.trigger("partialdone")});f.on("reset",function(){v.trigger("reset")});f.on("endedtimeline",function(){v.trigger("endedtimeline")});this.flush=function(){f.flush()};this.partialFlush=function(){f.partialFlush()};this.reset=function(){f.reset()};this.endTimeline=function(){f.endTimeline()};var x=function(K,T){var Y=8,W=8,ka;for(ka=0;ka<K;ka++)0!==W&&(W=T.readExpGolomb(),W=(Y+W+256)%256),Y=0===W?Y:W};var G=function(K){for(var T=
K.byteLength,Y=[],W=1,ka;W<T-2;)0===K[W]&&0===K[W+1]&&3===K[W+2]?(Y.push(W+2),W+=2):W++;if(0===Y.length)return K;T-=Y.length;ka=new Uint8Array(T);var ha=0;for(W=0;W<T;ha++,W++)ha===Y[0]&&(ha++,Y.shift()),ka[W]=K[ha];return ka};var I=function(K){var T=0,Y=0,W=0,ka=0,ha=[1,1];K=new kp(K);var sa=K.readUnsignedByte();var zb=K.readUnsignedByte();var Cd=K.readUnsignedByte();K.skipUnsignedExpGolomb();if(lp[sa]){var cb=K.readUnsignedExpGolomb();3===cb&&K.skipBits(1);K.skipUnsignedExpGolomb();K.skipUnsignedExpGolomb();
K.skipBits(1);if(K.readBoolean()){var Dd=3!==cb?8:12;for(cb=0;cb<Dd;cb++)K.readBoolean()&&(6>cb?x(16,K):x(64,K))}}K.skipUnsignedExpGolomb();cb=K.readUnsignedExpGolomb();if(0===cb)K.readUnsignedExpGolomb();else if(1===cb)for(K.skipBits(1),K.skipExpGolomb(),K.skipExpGolomb(),Dd=K.readUnsignedExpGolomb(),cb=0;cb<Dd;cb++)K.skipExpGolomb();K.skipUnsignedExpGolomb();K.skipBits(1);cb=K.readUnsignedExpGolomb();Dd=K.readUnsignedExpGolomb();var Mk=K.readBits(1);0===Mk&&K.skipBits(1);K.skipBits(1);K.readBoolean()&&
(T=K.readUnsignedExpGolomb(),Y=K.readUnsignedExpGolomb(),W=K.readUnsignedExpGolomb(),ka=K.readUnsignedExpGolomb());if(K.readBoolean()&&K.readBoolean()){var mp=K.readUnsignedByte();switch(mp){case 1:ha=[1,1];break;case 2:ha=[12,11];break;case 3:ha=[10,11];break;case 4:ha=[16,11];break;case 5:ha=[40,33];break;case 6:ha=[24,11];break;case 7:ha=[20,11];break;case 8:ha=[32,11];break;case 9:ha=[80,33];break;case 10:ha=[18,11];break;case 11:ha=[15,11];break;case 12:ha=[64,33];break;case 13:ha=[160,99];break;
case 14:ha=[4,3];break;case 15:ha=[3,2];break;case 16:ha=[2,1];break;case 255:ha=[K.readUnsignedByte()<<8|K.readUnsignedByte(),K.readUnsignedByte()<<8|K.readUnsignedByte()]}ha&&ha[0]/ha[1]}return{profileIdc:sa,levelIdc:Cd,profileCompatibility:zb,width:16*(cb+1)-2*T-2*Y,height:(2-Mk)*(Dd+1)*16-2*W-2*ka,sarRatio:ha}}};wg.prototype=new b;var np=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],Nk=function(f,k){var q=f[k+6]<<21|f[k+7]<<14|f[k+8]<<7|f[k+9];f=f[k+5];q=0<=q?q:0;return(f&
16)>>4?q+20:q+10},Ok=function(f,k){if(10>f.length-k||73!==f[k]||68!==f[k+1]||51!==f[k+2])return k;k+=Nk(f,k);return Ok(f,k)},Pk=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},hc={isLikelyAacData:function(f){var k=Ok(f,0);return f.length>=k+2&&255===(f[k]&255)&&240===(f[k+1]&240)&&16===(f[k+1]&22)},parseId3TagSize:Nk,parseAdtsSize:function(f,k){return f[k+3]&6144|f[k+4]<<3|(f[k+5]&224)>>5},parseType:function(f,k){return 73===f[k]&&68===f[k+1]&&51===f[k+2]?"timed-metadata":f[k]&1&&240===(f[k+1]&
240)?"audio":null},parseSampleRate:function(f){for(var k=0;k+5<f.length;)if(255!==f[k]||240!==(f[k+1]&246))k++;else return np[(f[k+2]&60)>>>2];return null},parseAacTimestamp:function(f){var k=10;f[5]&64&&(k=k+4+Pk(f.subarray(10,14)));do{var q=Pk(f.subarray(k+4,k+8));if(1>q)break;var p=String.fromCharCode(f[k],f[k+1],f[k+2],f[k+3]);if("PRIV"===p){p=f.subarray(k+10,k+q+10);for(var v=0;v<p.byteLength;v++)if(0===p[v]){var x=unescape,G=void 0,I=p,K=v,T="";for(G=0;G<K;G++)T+="%"+("00"+I[G].toString(16)).slice(-2);
if("com.apple.streaming.transportStreamTimestamp"===x(T))return f=p.subarray(v+1),k=(f[3]&1)<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2,k*=4,k+=f[7]&3;break}}k+=10;k+=q}while(k<f.byteLength);return null}};var xg=function(){var f=new Uint8Array,k=0;xg.prototype.init.call(this);this.setTimestamp=function(q){k=q};this.push=function(q){var p=0,v=0;f.length?(p=f.length,f=new Uint8Array(q.byteLength+p),f.set(f.subarray(0,p)),f.set(q,p)):f=q;for(;3<=f.length-v;)if(73===f[v]&&68===f[v+1]&&51===f[v+2]){if(10>
f.length-v)break;p=hc.parseId3TagSize(f,v);if(v+p>f.length)break;q={type:"timed-metadata",data:f.subarray(v,v+p)};this.trigger("data",q);v+=p}else if(255===(f[v]&255)&&240===(f[v+1]&240)){if(7>f.length-v)break;p=hc.parseAdtsSize(f,v);if(v+p>f.length)break;q={type:"audio",data:f.subarray(v,v+p),pts:k,dts:k};this.trigger("data",q);v+=p}else v++;f=0<f.length-v?f.subarray(v):new Uint8Array};this.reset=function(){f=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){f=new Uint8Array;this.trigger("endedtimeline")}};
xg.prototype=new b;var Ed={groupNalsIntoFrames:function(f){var k,q=[],p=[];p.byteLength=0;p.nalCount=0;p.duration=0;for(k=q.byteLength=0;k<f.length;k++){var v=f[k];"access_unit_delimiter_rbsp"===v.nalUnitType?(q.length&&(q.duration=v.dts-q.dts,p.byteLength+=q.byteLength,p.nalCount+=q.length,p.duration+=q.duration,p.push(q)),q=[v],q.byteLength=v.data.byteLength,q.pts=v.pts,q.dts=v.dts):("slice_layer_without_partitioning_rbsp_idr"===v.nalUnitType&&(q.keyFrame=!0),q.duration=v.dts-q.dts,q.byteLength+=
v.data.byteLength,q.push(v))}p.length&&(!q.duration||0>=q.duration)&&(q.duration=p[p.length-1].duration);p.byteLength+=q.byteLength;p.nalCount+=q.length;p.duration+=q.duration;p.push(q);return p},groupFramesIntoGops:function(f){var k,q=[],p=[];q.byteLength=0;q.nalCount=0;q.duration=0;q.pts=f[0].pts;q.dts=f[0].dts;p.byteLength=0;p.nalCount=0;p.duration=0;p.pts=f[0].pts;p.dts=f[0].dts;for(k=0;k<f.length;k++){var v=f[k];v.keyFrame?(q.length&&(p.push(q),p.byteLength+=q.byteLength,p.nalCount+=q.nalCount,
p.duration+=q.duration),q=[v],q.nalCount=v.length,q.byteLength=v.byteLength,q.pts=v.pts,q.dts=v.dts,q.duration=v.duration):(q.duration+=v.duration,q.nalCount+=v.length,q.byteLength+=v.byteLength,q.push(v))}p.length&&0>=q.duration&&(q.duration=p[p.length-1].duration);p.byteLength+=q.byteLength;p.nalCount+=q.nalCount;p.duration+=q.duration;p.push(q);return p},extendFirstKeyFrame:function(f){if(!f[0][0].keyFrame&&1<f.length){var k=f.shift();f.byteLength-=k.byteLength;f.nalCount-=k.nalCount;f[0][0].dts=
k.dts;f[0][0].pts=k.pts;f[0][0].duration+=k.duration}return f},generateSampleTable:function(f,k){var q,p=k||0,v=[];for(k=0;k<f.length;k++){var x=f[k];for(q=0;q<x.length;q++){var G=x[q];G=$b(G,p);p+=G.size;v.push(G)}}return v},concatenateNalData:function(f){var k,q,p,v=0,x=new Uint8Array(f.byteLength+4*f.nalCount),G=new DataView(x.buffer);for(k=0;k<f.length;k++){var I=f[k];for(q=0;q<I.length;q++){var K=I[q];for(p=0;p<K.length;p++){var T=K[p];G.setUint32(v,T.data.byteLength);v+=4;x.set(T.data,v);v+=
T.data.byteLength}}}return x},generateSampleTableForFrame:function(f,k){var q=[];f=$b(f,k||0);q.push(f);return q},concatenateNalDataForFrame:function(f){var k,q=0,p=new Uint8Array(f.byteLength+4*f.length),v=new DataView(p.buffer);for(k=0;k<f.length;k++){var x=f[k];v.setUint32(q,x.data.byteLength);q+=4;p.set(x.data,q);q+=x.data.byteLength}return p}},He={prefixWithSilence:function(f,k,q,p){var v=0,x=0,G=x=0;if(k.length){var I=qa.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate);v=Math.ceil(qa.ONE_SECOND_IN_TS/
(f.samplerate/1024));q&&p&&(x=I-Math.max(q,p),x=Math.floor(x/v),G=x*v);if(!(1>x||G>qa.ONE_SECOND_IN_TS/2)){Ta||(q={96E3:[oa,[227,64],va(154),[56]],88200:[oa,[231],va(170),[56]],64E3:[oa,[248,192],va(240),[56]],48E3:[oa,[255,192],va(268),[55,148,128],va(54),[112]],44100:[oa,[255,192],va(268),[55,163,128],va(84),[112]],32E3:[oa,[255,192],va(268),[55,234],va(226),[112]],24E3:[oa,[255,192],va(268),[55,255,128],va(268),[111,112],va(126),[224]],16E3:[oa,[255,192],va(268),[55,255,128],va(268),[111,255],
va(269),[223,108],va(195),[1,192]],12E3:[db,va(268),[3,127,248],va(268),[6,255,240],va(268),[13,255,224],va(268),[27,253,128],va(259),[56]],11025:[db,va(268),[3,127,248],va(268),[6,255,240],va(268),[13,255,224],va(268),[27,255,192],va(268),[55,175,128],va(108),[112]],8E3:[db,va(268),[3,121,16],va(47),[7]]},Ta=Nd(q));q=Ta[f.samplerate];q||(q=k[0].data);for(p=0;p<x;p++)I=k[0],k.splice(0,0,{data:q,dts:I.dts-v,pts:I.pts-v});f.baseMediaDecodeTime-=Math.floor(qa.videoTsToAudioTs(G,f.samplerate));return G}}},
trimAdtsFramesByEarliestDts:function(f,k,q){if(k.minSegmentDts>=q)return f;k.minSegmentDts=Infinity;return f.filter(function(p){return p.dts>=q?(k.minSegmentDts=Math.min(k.minSegmentDts,p.dts),k.minSegmentPts=k.minSegmentDts,!0):!1})},generateSampleTable:function(f){var k,q=[];for(k=0;k<f.length;k++){var p=f[k];q.push({size:p.data.byteLength,duration:1024})}return q},concatenateFrameData:function(f){var k,q=0;var p=Uint8Array;var v=0;for(k=0;k<f.length;k++){var x=f[k];v+=x.data.byteLength}x=new p(v);
for(p=0;p<f.length;p++)k=f[p],x.set(k.data,q),q+=k.data.byteLength;return x}},Jb={clearDtsInfo:function(f){delete f.minSegmentDts;delete f.maxSegmentDts;delete f.minSegmentPts;delete f.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(f,k){var q=f.minSegmentDts;k||(q-=f.timelineStartInfo.dts);k=f.timelineStartInfo.baseMediaDecodeTime;k=Math.max(0,k+q);"audio"===f.type&&(f=f.samplerate/Od,k=Math.floor(k*f));return k},collectDtsInfo:function(f,k){"number"===typeof k.pts&&(void 0===f.timelineStartInfo.pts&&
(f.timelineStartInfo.pts=k.pts),f.minSegmentPts=void 0===f.minSegmentPts?k.pts:Math.min(f.minSegmentPts,k.pts),f.maxSegmentPts=void 0===f.maxSegmentPts?k.pts:Math.max(f.maxSegmentPts,k.pts));"number"===typeof k.dts&&(void 0===f.timelineStartInfo.dts&&(f.timelineStartInfo.dts=k.dts),f.minSegmentDts=void 0===f.minSegmentDts?k.dts:Math.min(f.minSegmentDts,k.dts),f.maxSegmentDts=void 0===f.maxSegmentDts?k.dts:Math.max(f.maxSegmentDts,k.dts))}},op=hc.isLikelyAacData,pp=qa.ONE_SECOND_IN_TS,Qk=["audioobjecttype",
"channelcount","samplerate","samplingfrequencyindex","samplesize"],Rk="width height profileIdc levelIdc profileCompatibility sarRatio".split(" "),qp=function(f,k){k.stream=f;this.trigger("log",k)},Sk=function(f,k){for(var q=Object.keys(k),p=0;p<q.length;p++){var v=q[p];if("headOfPipeline"!==v&&k[v].on)k[v].on("log",qp.bind(f,v))}},Tk=function(f,k){var q;if(f.length!==k.length)return!1;for(q=0;q<f.length;q++)if(f[q]!==k[q])return!1;return!0},Uk=function(f,k,q,p,v,x){return{start:{dts:f,pts:f+(q-k)},
end:{dts:f+(p-k),pts:f+(v-q)},prependedContentDuration:x,baseMediaDecodeTime:f}};var Ie=function(f,k){var q=[],p=0,v=0,x=Infinity;k=k||{};var G=k.firstSequenceNumber||0;Ie.prototype.init.call(this);this.push=function(I){Jb.collectDtsInfo(f,I);f&&Qk.forEach(function(K){f[K]=I[K]});q.push(I)};this.setEarliestDts=function(I){p=I};this.setVideoBaseMediaDecodeTime=function(I){x=I};this.setAudioAppendStart=function(I){v=I};this.flush=function(){if(0!==q.length){var I=He.trimAdtsFramesByEarliestDts(q,f,
p);f.baseMediaDecodeTime=Jb.calculateTrackBaseMediaDecodeTime(f,k.keepOriginalTimestamps);var K=He.prefixWithSilence(f,I,v,x);f.samples=He.generateSampleTable(I);var T=Cb.mdat(He.concatenateFrameData(I));q=[];var Y=Cb.moof(G,[f]);var W=new Uint8Array(Y.byteLength+T.byteLength);G++;W.set(Y);W.set(T,Y.byteLength);Jb.clearDtsInfo(f);Y=Math.ceil(1024*pp/f.samplerate);I.length&&(Y*=I.length,this.trigger("segmentTimingInfo",Uk(qa.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),I[0].dts,I[0].pts,I[0].dts+
Y,I[0].pts+Y,K||0)),this.trigger("timingInfo",{start:I[0].pts,end:I[0].pts+Y}));this.trigger("data",{track:f,boxes:W})}this.trigger("done","AudioSegmentStream")};this.reset=function(){Jb.clearDtsInfo(f);q=[];this.trigger("reset")}};Ie.prototype=new b;var yg=function(f,k){var q=[],p=[],v,x;k=k||{};var G=k.firstSequenceNumber||0;yg.prototype.init.call(this);delete f.minPTS;this.gopCache_=[];this.push=function(I){Jb.collectDtsInfo(f,I);"seq_parameter_set_rbsp"!==I.nalUnitType||v||(v=I.config,f.sps=[I.data],
Rk.forEach(function(K){f[K]=v[K]},this));"pic_parameter_set_rbsp"!==I.nalUnitType||x||(x=I.data,f.pps=[I.data]);q.push(I)};this.flush=function(){var I;var K=0;for(var T,Y;q.length&&"access_unit_delimiter_rbsp"!==q[0].nalUnitType;)q.shift();if(0!==q.length){var W=Ed.groupNalsIntoFrames(q);W=Ed.groupFramesIntoGops(W);W[0][0].keyFrame||((I=this.getGopForFusion_(q[0],f))?(K=I.duration,W.unshift(I),W.byteLength+=I.byteLength,W.nalCount+=I.nalCount,W.pts=I.pts,W.dts=I.dts,W.duration+=I.duration):W=Ed.extendFirstKeyFrame(W));
if(p.length){I=k.alignGopsAtEnd?this.alignGopsAtEnd_(W):this.alignGopsAtStart_(W);if(!I){this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);q=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Jb.clearDtsInfo(f);W=I}Jb.collectDtsInfo(f,W);f.samples=Ed.generateSampleTable(W);I=Cb.mdat(Ed.concatenateNalData(W));f.baseMediaDecodeTime=Jb.calculateTrackBaseMediaDecodeTime(f,k.keepOriginalTimestamps);this.trigger("processedGopsInfo",
W.map(function(ka){return{pts:ka.pts,dts:ka.dts,byteLength:ka.byteLength}}));T=W[0];Y=W[W.length-1];this.trigger("segmentTimingInfo",Uk(f.baseMediaDecodeTime,T.dts,T.pts,Y.dts+Y.duration,Y.pts+Y.duration,K));this.trigger("timingInfo",{start:W[0].pts,end:W[W.length-1].pts+W[W.length-1].duration});this.gopCache_.unshift({gop:W.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);q=[];this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime);this.trigger("timelineStartInfo",
f.timelineStartInfo);K=Cb.moof(G,[f]);W=new Uint8Array(K.byteLength+I.byteLength);G++;W.set(K);W.set(I,K.byteLength);this.trigger("data",{track:f,boxes:W})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();q=[];this.gopCache_.length=0;p.length=0;this.trigger("reset")};this.resetStream_=function(){Jb.clearDtsInfo(f);x=v=void 0};this.getGopForFusion_=function(I){var K=Infinity,T;for(T=0;T<this.gopCache_.length;T++){var Y=this.gopCache_[T];var W=
Y.gop;if(f.pps&&Tk(f.pps[0],Y.pps[0])&&f.sps&&Tk(f.sps[0],Y.sps[0])&&!(W.dts<f.timelineStartInfo.dts)&&(W=I.dts-W.dts-W.duration,-1E4<=W&&45E3>=W&&(!ka||K>W))){var ka=Y;K=W}}return ka?ka.gop:null};this.alignGopsAtStart_=function(I){var K,T;var Y=I.byteLength;var W=I.nalCount;var ka=I.duration;for(K=T=0;K<p.length&&T<I.length;){var ha=p[K];var sa=I[T];if(ha.pts===sa.pts)break;sa.pts>ha.pts?K++:(T++,Y-=sa.byteLength,W-=sa.nalCount,ka-=sa.duration)}if(0===T)return I;if(T===I.length)return null;I=I.slice(T);
I.byteLength=Y;I.duration=ka;I.nalCount=W;I.pts=I[0].pts;I.dts=I[0].dts;return I};this.alignGopsAtEnd_=function(I){var K;var T=p.length-1;var Y=I.length-1;var W=null;for(K=!1;0<=T&&0<=Y;){var ka=p[T];var ha=I[Y];if(ka.pts===ha.pts){K=!0;break}ka.pts>ha.pts?T--:(T===p.length-1&&(W=Y),Y--)}if(!K&&null===W)return null;T=K?Y:W;if(0===T)return I;I=I.slice(T);T=I.reduce(function(sa,zb){sa.byteLength+=zb.byteLength;sa.duration+=zb.duration;sa.nalCount+=zb.nalCount;return sa},{byteLength:0,duration:0,nalCount:0});
I.byteLength=T.byteLength;I.duration=T.duration;I.nalCount=T.nalCount;I.pts=I[0].pts;I.dts=I[0].dts;return I};this.alignGopsWith=function(I){p=I}};yg.prototype=new b;var fd=function(f,k){this.numberOfTracks=0;this.metadataStream=k;f=f||{};this.remuxTracks="undefined"!==typeof f.remux?!!f.remux:!0;this.keepOriginalTimestamps="boolean"===typeof f.keepOriginalTimestamps?f.keepOriginalTimestamps:!1;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=
[];this.emittedTracks=this.pendingBytes=0;fd.prototype.init.call(this);this.push=function(q){if(q.content||q.text)return this.pendingCaptions.push(q);if(q.frames)return this.pendingMetadata.push(q);this.pendingTracks.push(q.track);this.pendingBytes+=q.boxes.byteLength;"video"===q.track.type&&(this.videoTrack=q.track,this.pendingBoxes.push(q.boxes));"audio"===q.track.type&&(this.audioTrack=q.track,this.pendingBoxes.unshift(q.boxes))}};fd.prototype=new b;fd.prototype.flush=function(f){var k=0,q={captions:[],
captionStreams:{},metadata:[],info:{}},p=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==f&&"AudioSegmentStream"!==f||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(p=this.videoTrack.timelineStartInfo.pts,Rk.forEach(function(v){q.info[v]=this.videoTrack[v]},this)):this.audioTrack&&(p=this.audioTrack.timelineStartInfo.pts,Qk.forEach(function(v){q.info[v]=
this.audioTrack[v]},this));if(this.videoTrack||this.audioTrack){q.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;f=Cb.initSegment(this.pendingTracks);q.initSegment=new Uint8Array(f.byteLength);q.initSegment.set(f);q.data=new Uint8Array(this.pendingBytes);for(f=0;f<this.pendingBoxes.length;f++)q.data.set(this.pendingBoxes[f],k),k+=this.pendingBoxes[f].byteLength;for(f=0;f<this.pendingCaptions.length;f++)k=this.pendingCaptions[f],
k.startTime=qa.metadataTsToSeconds(k.startPts,p,this.keepOriginalTimestamps),k.endTime=qa.metadataTsToSeconds(k.endPts,p,this.keepOriginalTimestamps),q.captionStreams[k.stream]=!0,q.captions.push(k);for(f=0;f<this.pendingMetadata.length;f++)k=this.pendingMetadata[f],k.cueTime=qa.metadataTsToSeconds(k.pts,p,this.keepOriginalTimestamps),q.metadata.push(k);q.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=
this.pendingCaptions.length=0;this.pendingMetadata.length=0;this.trigger("data",q);for(f=0;f<q.captions.length;f++)k=q.captions[f],this.trigger("caption",k);for(f=0;f<q.metadata.length;f++)k=q.metadata[f],this.trigger("id3Frame",k)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};fd.prototype.setRemux=function(f){this.remuxTracks=f};var zg=function(f){var k=this,q=!0,p,v;zg.prototype.init.call(this);f=f||{};this.baseMediaDecodeTime=f.baseMediaDecodeTime||0;this.transmuxPipeline_=
{};this.setupAacPipeline=function(){var x={};this.transmuxPipeline_=x;x.type="aac";x.metadataStream=new Vb.MetadataStream;x.aacStream=new xg;x.audioTimestampRolloverStream=new Vb.TimestampRolloverStream("audio");x.timedMetadataTimestampRolloverStream=new Vb.TimestampRolloverStream("timed-metadata");x.adtsStream=new Ge;x.coalesceStream=new fd(f,x.metadataStream);x.headOfPipeline=x.aacStream;x.aacStream.pipe(x.audioTimestampRolloverStream).pipe(x.adtsStream);x.aacStream.pipe(x.timedMetadataTimestampRolloverStream).pipe(x.metadataStream).pipe(x.coalesceStream);
x.metadataStream.on("timestamp",function(G){x.aacStream.setTimestamp(G.timeStamp)});x.aacStream.on("data",function(G){"timed-metadata"!==G.type&&"audio"!==G.type||x.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:k.baseMediaDecodeTime},codec:"adts",type:"audio"},x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Ie(v,f),x.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream),
k.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p}))});x.coalesceStream.on("data",this.trigger.bind(this,"data"));x.coalesceStream.on("done",this.trigger.bind(this,"done"));Sk(this,x)};this.setupTsPipeline=function(){var x={};this.transmuxPipeline_=x;x.type="ts";x.metadataStream=new Vb.MetadataStream;x.packetStream=new Vb.TransportPacketStream;x.parseStream=new Vb.TransportParseStream;x.elementaryStream=new Vb.ElementaryStream;x.timestampRolloverStream=new Vb.TimestampRolloverStream;x.adtsStream=new Ge;
x.h264Stream=new wg;x.captionStream=new Vb.CaptionStream(f);x.coalesceStream=new fd(f,x.metadataStream);x.headOfPipeline=x.packetStream;x.packetStream.pipe(x.parseStream).pipe(x.elementaryStream).pipe(x.timestampRolloverStream);x.timestampRolloverStream.pipe(x.h264Stream);x.timestampRolloverStream.pipe(x.adtsStream);x.timestampRolloverStream.pipe(x.metadataStream).pipe(x.coalesceStream);x.h264Stream.pipe(x.captionStream).pipe(x.coalesceStream);x.elementaryStream.on("data",function(G){var I;if("metadata"===
G.type){for(I=G.tracks.length;I--;)p||"video"!==G.tracks[I].type?v||"audio"!==G.tracks[I].type||(v=G.tracks[I],v.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime):(p=G.tracks[I],p.timelineStartInfo.baseMediaDecodeTime=k.baseMediaDecodeTime);p&&!x.videoSegmentStream&&(x.coalesceStream.numberOfTracks++,x.videoSegmentStream=new yg(p,f),x.videoSegmentStream.on("log",k.getLogTrigger_("videoSegmentStream")),x.videoSegmentStream.on("timelineStartInfo",function(K){v&&!f.keepOriginalTimestamps&&
(v.timelineStartInfo=K,x.audioSegmentStream.setEarliestDts(K.dts-k.baseMediaDecodeTime))}),x.videoSegmentStream.on("processedGopsInfo",k.trigger.bind(k,"gopInfo")),x.videoSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"videoSegmentTimingInfo")),x.videoSegmentStream.on("baseMediaDecodeTime",function(K){v&&x.audioSegmentStream.setVideoBaseMediaDecodeTime(K)}),x.videoSegmentStream.on("timingInfo",k.trigger.bind(k,"videoTimingInfo")),x.h264Stream.pipe(x.videoSegmentStream).pipe(x.coalesceStream));
v&&!x.audioSegmentStream&&(x.coalesceStream.numberOfTracks++,x.audioSegmentStream=new Ie(v,f),x.audioSegmentStream.on("log",k.getLogTrigger_("audioSegmentStream")),x.audioSegmentStream.on("timingInfo",k.trigger.bind(k,"audioTimingInfo")),x.audioSegmentStream.on("segmentTimingInfo",k.trigger.bind(k,"audioSegmentTimingInfo")),x.adtsStream.pipe(x.audioSegmentStream).pipe(x.coalesceStream));k.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!p})}});x.coalesceStream.on("data",this.trigger.bind(this,"data"));
x.coalesceStream.on("id3Frame",function(G){G.dispatchType=x.metadataStream.dispatchType;k.trigger("id3Frame",G)});x.coalesceStream.on("caption",this.trigger.bind(this,"caption"));x.coalesceStream.on("done",this.trigger.bind(this,"done"));Sk(this,x)};this.setBaseMediaDecodeTime=function(x){var G=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=x);v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,Jb.clearDtsInfo(v),G.audioTimestampRolloverStream&&G.audioTimestampRolloverStream.discontinuity());
p&&(G.videoSegmentStream&&(G.videoSegmentStream.gopCache_=[]),p.timelineStartInfo.dts=void 0,p.timelineStartInfo.pts=void 0,Jb.clearDtsInfo(p),G.captionStream.reset());G.timestampRolloverStream&&G.timestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(x){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(x)};this.setRemux=function(x){var G=this.transmuxPipeline_;f.remux=x;G&&G.coalesceStream&&G.coalesceStream.setRemux(x)};this.alignGopsWith=function(x){p&&this.transmuxPipeline_.videoSegmentStream&&
this.transmuxPipeline_.videoSegmentStream.alignGopsWith(x)};this.getLogTrigger_=function(x){var G=this;return function(I){I.stream=x;G.trigger("log",I)}};this.push=function(x){if(q){var G=op(x);G&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():G||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();q=!1}this.transmuxPipeline_.headOfPipeline.push(x)};this.flush=function(){q=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};
this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};zg.prototype=new b;var Gc=function(f){var k=""+String.fromCharCode(f[0]);k+=String.fromCharCode(f[1]);k+=String.fromCharCode(f[2]);return k+=String.fromCharCode(f[3])},Vk=function(f,k){var q=[],p;if(!k.length)return null;for(p=0;p<f.byteLength;){var v=(f[p]<<24|f[p+1]<<16|f[p+2]<<
8|f[p+3])>>>0;var x=Gc(f.subarray(p+4,p+8));v=1<v?p+v:f.byteLength;x===k[0]&&(1===k.length?q.push(f.subarray(p+8,v)):(p=Vk(f.subarray(p+8,v),k.slice(1)),p.length&&(q=q.concat(p))));p=v}return q},Fa=Vk,Wk=function(f){var k={version:f[0],flags:new Uint8Array(f.subarray(1,4))};k.baseMediaDecodeTime=1===k.version?d(f.subarray(4)):(f[4]<<24|f[5]<<16|f[6]<<8|f[7])>>>0;return k},Xk=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&
14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},Yk=function(f){var k={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},q=new DataView(f.buffer,f.byteOffset,f.byteLength),p=k.flags[2]&1,v=k.flags[2]&4,x=k.flags[1]&1,G=k.flags[1]&2,I=k.flags[1]&4,K=k.flags[1]&8,T=q.getUint32(4),Y=8;p&&(k.dataOffset=q.getInt32(Y),Y+=4);v&&T&&(p={flags:Xk(f.subarray(Y,Y+4))},Y+=4,x&&(p.duration=q.getUint32(Y),Y+=4),G&&(p.size=q.getUint32(Y),Y+=4),K&&(p.compositionTimeOffset=1===k.version?
q.getInt32(Y):q.getUint32(Y),Y+=4),k.samples.push(p),T--);for(;T--;)p={},x&&(p.duration=q.getUint32(Y),Y+=4),G&&(p.size=q.getUint32(Y),Y+=4),I&&(p.flags=Xk(f.subarray(Y,Y+4)),Y+=4),K&&(p.compositionTimeOffset=1===k.version?q.getInt32(Y):q.getUint32(Y),Y+=4),k.samples.push(p);return k},Zk=function(f){var k=new DataView(f.buffer,f.byteOffset,f.byteLength);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:k.getUint32(4)};var q=f.flags[2]&1,p=f.flags[2]&2,v=f.flags[2]&8,x=f.flags[2]&16,G=
f.flags[2]&32,I=f.flags[0]&65536,K=f.flags[0]&131072;var T=8;q&&(T+=4,f.baseDataOffset=k.getUint32(12),T+=4);p&&(f.sampleDescriptionIndex=k.getUint32(T),T+=4);v&&(f.defaultSampleDuration=k.getUint32(T),T+=4);x&&(f.defaultSampleSize=k.getUint32(T),T+=4);G&&(f.defaultSampleFlags=k.getUint32(T));I&&(f.durationIsEmpty=!0);!q&&K&&(f.baseDataOffsetIsMoof=!0);return f},Fd="undefined"!==typeof window?window:"undefined"!==typeof a?a:"undefined"!==typeof self?self:{},rp=jc.discardEmulationPreventionBytes,sp=
function(f,k,q){var p=k,v=q.defaultSampleDuration||0,x=q.defaultSampleSize||0,G=q.trackId,I=[];f.forEach(function(K){K=Yk(K).samples;K.forEach(function(T){void 0===T.duration&&(T.duration=v);void 0===T.size&&(T.size=x);T.trackId=G;T.dts=p;void 0===T.compositionTimeOffset&&(T.compositionTimeOffset=0);"bigint"===typeof p?(T.pts=p+Fd.BigInt(T.compositionTimeOffset),p+=Fd.BigInt(T.duration)):(T.pts=p+T.compositionTimeOffset,p+=T.duration)});I=I.concat(K)});return I},tp=function(f,k){var q=Fa(f,["moof",
"traf"]),p={},v=[];Fa(f,["mdat"]).forEach(function(x,G){v.push({mdat:x,traf:q[G]})});v.forEach(function(x){var G=x.mdat,I=x.traf;x=Fa(I,["tfhd"]);var K=Zk(x[0]);x=K.trackId;var T=Fa(I,["tfdt"]);T=0<T.length?Wk(T[0]).baseMediaDecodeTime:0;I=Fa(I,["trun"]);if(k===x&&0<I.length){I=sp(I,T,K);K=new DataView(G.buffer,G.byteOffset,G.byteLength);T=[];var Y=[],W;for(W=0;W+4<G.length;W+=ka){var ka=K.getUint32(W);W+=4;if(!(0>=ka))switch(G[W]&31){case 6:var ha=G.subarray(W+1,W+1+ka);a:{var sa=W;for(var zb=0;zb<
I.length;zb++){var Cd=I[zb];if(sa<Cd.size){sa=Cd;break a}sa-=Cd.size}sa=null}ha={nalUnitType:"sei_rbsp",size:ka,data:ha,escapedRBSP:rp(ha),trackId:x};if(sa){ha.pts=sa.pts;ha.dts=sa.dts;var cb=sa}else if(cb)ha.pts=cb.pts,ha.dts=cb.dts;else{T.push({level:"warn",message:"We've encountered a nal unit without data at "+W+" for trackId "+x+". See mux.js#223."});break}Y.push(ha)}}p[x]||(p[x]={seiNals:[],logs:[]});p[x].seiNals=p[x].seiNals.concat(Y);p[x].logs=p[x].logs.concat(T)}});return p},up=function(){var f=
!1,k,q,p,v,x,G;this.isInitialized=function(){return f};this.init=function(I){k=new z;f=!0;G=I?I.isPartial:!1;k.on("data",function(K){K.startTime=K.startPts/v;K.endTime=K.endPts/v;x.captions.push(K);x.captionStreams[K.stream]=!0});k.on("log",function(K){x.logs.push(K)})};this.isNewInit=function(I,K){return I&&0===I.length||K&&"object"===typeof K&&0===Object.keys(K).length?!1:p!==I[0]||v!==K[p]};this.parse=function(I,K,T){if(this.isInitialized()){if(!K||!T)return null;if(this.isNewInit(K,T))p=K[0],
v=T[p];else if(null===p||!v)return q.push(I),null}else return null;for(;0<q.length;){var Y=q.shift();this.parse(Y,K,T)}T=p;K=v;null===T?I=null:(I=tp(I,T)[T]||{},I={seiNals:I.seiNals,logs:I.logs,timescale:K});I&&I.logs&&(x.logs=x.logs.concat(I.logs));if(null===I||!I.seiNals)return x.logs.length?{logs:x.logs,captions:[],captionStreams:[]}:null;this.pushNals(I.seiNals);this.flushStream();return x};this.pushNals=function(I){if(!this.isInitialized()||!I||0===I.length)return null;I.forEach(function(K){k.push(K)})};
this.flushStream=function(){if(!this.isInitialized())return null;G?k.partialFlush():k.flush()};this.clearParsedCaptions=function(){x.captions=[];x.captionStreams={};x.logs=[]};this.resetCaptionStream=function(){if(!this.isInitialized())return null;k.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){q=[];v=p=null;x?this.clearParsedCaptions():x={captions:[],captionStreams:{},logs:[]};this.resetCaptionStream()};this.reset()},Je=function(f){for(var k=
0,q=String.fromCharCode(f[k]),p="";"\x00"!==q;)p+=q,k++,q=String.fromCharCode(f[k]);return p+q},$k=function(f){return void 0!==f||null!==f},Gd=function(f){return("00"+f.toString(16)).slice(-2)},Ag={parseEmsgBox:function(f){var k=4,q=f[0];if(0===q){var p=Je(f.subarray(k));k+=p.length;var v=Je(f.subarray(k));k+=v.length;var x=new DataView(f.buffer);var G=x.getUint32(k);k+=4;var I=x.getUint32(k);k+=4;var K=x.getUint32(k);k+=4;x=x.getUint32(k);k+=4}else if(1===q){x=new DataView(f.buffer);G=x.getUint32(k);
k+=4;var T=d(f.subarray(k));k+=8;K=x.getUint32(k);k+=4;x=x.getUint32(k);k+=4;p=Je(f.subarray(k));k+=p.length;v=Je(f.subarray(k));k+=v.length}f=new Uint8Array(f.subarray(k,f.byteLength));p={scheme_id_uri:p,value:v,timescale:G?G:1,presentation_time:T,presentation_time_delta:I,event_duration:K,id:x,message_data:f};G="\x00"!==p.scheme_id_uri;v=0===q&&$k(p.presentation_time_delta)&&G;G=1===q&&$k(p.presentation_time)&&G;return!(1<q)&&v||G?p:void 0},scaleTime:function(f,k,q,p){return f||0===f?f/k:p+q/k}},
vp=ua.parseId3Frames;var al=function(f){var k=0===f[0]?12:20;return(f[k]<<24|f[k+1]<<16|f[k+2]<<8|f[k+3])>>>0};var Bg={findBox:Fa,parseType:Gc,timescale:function(f){return Fa(f,["moov","trak"]).reduce(function(k,q){var p=Fa(q,["tkhd"])[0];if(!p)return null;var v=p[0];v=0===v?12:20;p=(p[v]<<24|p[v+1]<<16|p[v+2]<<8|p[v+3])>>>0;q=Fa(q,["mdia","mdhd"])[0];if(!q)return null;v=q[0];v=0===v?12:20;k[p]=(q[v]<<24|q[v+1]<<16|q[v+2]<<8|q[v+3])>>>0;return k},{})},startTime:function(f,k){k=Fa(k,["moof","traf"]).reduce(function(q,
p){var v=Fa(p,["tfhd"])[0];v=f[(v[4]<<24|v[5]<<16|v[6]<<8|v[7])>>>0]||9E4;p=Fa(p,["tfdt"])[0];var x=new DataView(p.buffer,p.byteOffset,p.byteLength);p=1===p[0]?d(p.subarray(4,12)):x.getUint32(4);let G;"bigint"===typeof p?G=p/Fd.BigInt(v):"number"!==typeof p||isNaN(p)||(G=p/v);G<Number.MAX_SAFE_INTEGER&&(G=Number(G));G<q&&(q=G);return q},Infinity);return"bigint"===typeof k||isFinite(k)?k:0},compositionStartTime:function(f,k){var q=Fa(k,["moof","traf"]),p=k=0;if(q&&q.length){var v=Fa(q[0],["tfhd"])[0],
x=Fa(q[0],["trun"])[0];q=Fa(q[0],["tfdt"])[0];if(v)var G=Zk(v).trackId;q&&(k=Wk(q).baseMediaDecodeTime);x&&(v=Yk(x),v.samples&&v.samples.length&&(p=v.samples[0].compositionTimeOffset||0))}f=f[G]||9E4;"bigint"===typeof k&&(p=Fd.BigInt(p),f=Fd.BigInt(f));f=(k+p)/f;"bigint"===typeof f&&f<Number.MAX_SAFE_INTEGER&&(f=Number(f));return f},videoTrackIds:function(f){var k=[];Fa(f,["moov","trak"]).forEach(function(q){var p=Fa(q,["mdia","hdlr"]),v=Fa(q,["tkhd"]);p.forEach(function(x,G){x=Gc(x.subarray(8,12));
G=v[G];"vide"===x&&(G=new DataView(G.buffer,G.byteOffset,G.byteLength),x=G.getUint8(0),G=0===x?G.getUint32(12):G.getUint32(20),k.push(G))})});return k},tracks:function(f){var k=[];Fa(f,["moov","trak"]).forEach(function(q){var p={},v=Fa(q,["tkhd"])[0];if(v){v=new DataView(v.buffer,v.byteOffset,v.byteLength);var x=v.getUint8(0);p.id=0===x?v.getUint32(12):v.getUint32(20)}if(v=Fa(q,["mdia","hdlr"])[0])v=Gc(v.subarray(8,12)),p.type="vide"===v?"video":"soun"===v?"audio":v;if(v=Fa(q,["mdia","minf","stbl",
"stsd"])[0])if(v=v.subarray(8),p.codec=Gc(v.subarray(4,8)),v=Fa(v,[p.codec])[0])/^[asm]vc[1-9]$/i.test(p.codec)?(v=v.subarray(78),x=Gc(v.subarray(4,8)),"avcC"===x&&11<v.length?(p.codec+=".",p.codec+=Gd(v[9]),p.codec+=Gd(v[10]),p.codec+=Gd(v[11])):p.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(p.codec)?(v=v.subarray(28),x=Gc(v.subarray(4,8)),"esds"===x&&20<v.length&&0!==v[19]?(p.codec+="."+Gd(v[19]),p.codec+="."+Gd(v[20]>>>2&63).replace(/^0/,"")):p.codec="mp4a.40.2"):p.codec=p.codec.toLowerCase();if(q=
Fa(q,["mdia","mdhd"])[0])p.timescale=al(q);k.push(p)});return k},getTimescaleFromMediaHeader:al,getEmsgID3:function(f,k=0){return Fa(f,["emsg"]).map(q=>{q=Ag.parseEmsgBox(new Uint8Array(q));var p=vp(q.message_data);return{cueTime:Ag.scaleTime(q.presentation_time,q.timescale,q.presentation_time_delta,k),duration:Ag.scaleTime(q.event_duration,q.timescale),frames:p}})}},bl=function(f){var k=f[1]&31;return k=k<<8|f[2]},Ke=function(f){return!!(f[1]&64)},Le=function(f){var k=0;1<(f[3]&48)>>>4&&(k+=f[4]+
1);return k},Cg=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var Ua={parseType:function(f,k){f=bl(f);return 0===f?"pat":f===k?"pmt":k?"pes":null},parsePat:function(f){var k=Ke(f),q=4+Le(f);k&&(q+=f[q]+1);return(f[q+10]&31)<<8|f[q+11]},parsePmt:function(f){var k={},q=Ke(f),p=4+Le(f);q&&(p+=f[p]+1);if(f[p+
5]&1){q=3+((f[p+1]&15)<<8|f[p+2])-4;for(var v=12+((f[p+10]&15)<<8|f[p+11]);v<q;){var x=p+v;k[(f[x+1]&31)<<8|f[x+2]]=f[x];v+=((f[x+3]&15)<<8|f[x+4])+5}return k}},parsePayloadUnitStartIndicator:Ke,parsePesType:function(f,k){f=bl(f);switch(k[f]){case Q.H264_STREAM_TYPE:return"video";case Q.ADTS_STREAM_TYPE:return"audio";case Q.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(f){if(!Ke(f))return null;var k=4+Le(f);if(k>=f.byteLength)return null;var q=null;var p=
f[k+7];p&192&&(q={},q.pts=(f[k+9]&14)<<27|(f[k+10]&255)<<20|(f[k+11]&254)<<12|(f[k+12]&255)<<5|(f[k+13]&254)>>>3,q.pts*=4,q.pts+=(f[k+13]&6)>>>1,q.dts=q.pts,p&64&&(q.dts=(f[k+14]&14)<<27|(f[k+15]&255)<<20|(f[k+16]&254)<<12|(f[k+17]&255)<<5|(f[k+18]&254)>>>3,q.dts*=4,q.dts+=(f[k+18]&6)>>>1));return q},videoPacketContainsKeyFrame:function(f){var k=4+Le(f);f=f.subarray(k);for(var q=k=0,p=!1;q<f.byteLength-3;q++)if(1===f[q+2]){k=q+5;break}for(;k<f.byteLength;)switch(f[k]){case 0:if(0!==f[k-1]){k+=2;break}else if(0!==
f[k-2]){k++;break}q+3!==k-2&&(q=Cg(f[q+3]&31),"slice_layer_without_partitioning_rbsp_idr"===q&&(p=!0));do k++;while(1!==f[k]&&k<f.length);q=k-2;k+=3;break;case 1:if(0!==f[k-1]||0!==f[k-2]){k+=3;break}q=Cg(f[q+3]&31);"slice_layer_without_partitioning_rbsp_idr"===q&&(p=!0);q=k-2;k+=3;break;default:k+=3}f=f.subarray(q);k-=q;f&&3<f.byteLength&&(q=Cg(f[3]&31),"slice_layer_without_partitioning_rbsp_idr"===q&&(p=!0));return p}};var Hc=qa.ONE_SECOND_IN_TS,wp=function(f,k){for(var q=0,p=188,v,x;p<f.byteLength;)if(71===
f[q]&&71===f[p]){v=f.subarray(q,p);x=Ua.parseType(v,k.pid);switch(x){case "pat":k.pid=Ua.parsePat(v);break;case "pmt":var G=Ua.parsePmt(v);k.table=k.table||{};Object.keys(G).forEach(function(I){k.table[I]=G[I]})}q+=188;p+=188}else q++,p++},cl=function(f,k,q){for(var p=0,v=188,x,G,I,K=!1;v<=f.byteLength;)if(71!==f[p]||71!==f[v]&&v!==f.byteLength)p++,v++;else{x=f.subarray(p,v);G=Ua.parseType(x,k.pid);switch(G){case "pes":if(G=Ua.parsePesType(x,k.table),I=Ua.parsePayloadUnitStartIndicator(x),"audio"===
G&&I&&(x=Ua.parsePesTime(x)))x.type="audio",q.audio.push(x),K=!0}if(K)break;p+=188;v+=188}v=f.byteLength;p=v-188;for(K=!1;0<=p;)if(71!==f[p]||71!==f[v]&&v!==f.byteLength)p--,v--;else{x=f.subarray(p,v);G=Ua.parseType(x,k.pid);switch(G){case "pes":if(G=Ua.parsePesType(x,k.table),I=Ua.parsePayloadUnitStartIndicator(x),"audio"===G&&I&&(x=Ua.parsePesTime(x)))x.type="audio",q.audio.push(x),K=!0}if(K)break;p-=188;v-=188}},xp=function(f,k){if(f.audio&&f.audio.length){var q=k;if("undefined"===typeof q||isNaN(q))q=
f.audio[0].dts;f.audio.forEach(function(v){v.dts=fa(v.dts,q);v.pts=fa(v.pts,q);v.dtsTime=v.dts/Hc;v.ptsTime=v.pts/Hc})}if(f.video&&f.video.length){var p=k;if("undefined"===typeof p||isNaN(p))p=f.video[0].dts;f.video.forEach(function(v){v.dts=fa(v.dts,p);v.pts=fa(v.pts,p);v.dtsTime=v.dts/Hc;v.ptsTime=v.pts/Hc});f.firstKeyFrame&&(f=f.firstKeyFrame,f.dts=fa(f.dts,p),f.pts=fa(f.pts,p),f.dtsTime=f.dts/Hc,f.ptsTime=f.pts/Hc)}},yp={inspect:function(f,k){if(hc.isLikelyAacData(f))a:{for(var q=!1,p=0,v=null,
x=null,G=0,I=0,K;3<=f.length-I;){switch(hc.parseType(f,I)){case "timed-metadata":if(10>f.length-I){q=!0;break}G=hc.parseId3TagSize(f,I);if(G>f.length){q=!0;break}null===x&&(K=f.subarray(I,I+G),x=hc.parseAacTimestamp(K));I+=G;break;case "audio":if(7>f.length-I){q=!0;break}G=hc.parseAdtsSize(f,I);if(G>f.length){q=!0;break}null===v&&(K=f.subarray(I,I+G),v=hc.parseSampleRate(K));p++;I+=G;break;default:I++}if(q){f=null;break a}}null===v||null===x?f=null:(f=Hc/v,f={audio:[{type:"audio",dts:x,pts:x},{type:"audio",
dts:x+1024*p*f,pts:x+1024*p*f}]})}else{p={pid:null,table:null};x={};wp(f,p);for(q in p.table)if(p.table.hasOwnProperty(q))switch(p.table[q]){case Q.H264_STREAM_TYPE:x.video=[];var T=void 0,Y=void 0,W=void 0;v=Y=W=Y=W=void 0;G=f;I=p;K=x;var ka=0,ha=188,sa=!1,zb=[];for(T=0;ha<G.byteLength;)if(71===G[ka]&&71===G[ha]){v=G.subarray(ka,ha);Y=Ua.parseType(v,I.pid);switch(Y){case "pes":if(W=Ua.parsePesType(v,I.table),Y=Ua.parsePayloadUnitStartIndicator(v),"video"===W)if(Y&&!sa&&(W=Ua.parsePesTime(v))&&(W.type=
"video",K.video.push(W),sa=!0),!K.firstKeyFrame){if(Y&&0!==T){W=new Uint8Array(T);for(Y=0;zb.length;)T=zb.shift(),W.set(T,Y),Y+=T.byteLength;Ua.videoPacketContainsKeyFrame(W)&&((T=Ua.parsePesTime(W))?(K.firstKeyFrame=T,K.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself."));
T=0}zb.push(v);T+=v.byteLength}}if(sa&&K.firstKeyFrame)break;ka+=188;ha+=188}else ka++,ha++;ha=G.byteLength;ka=ha-188;for(sa=!1;0<=ka;)if(71===G[ka]&&71===G[ha]){v=G.subarray(ka,ha);Y=Ua.parseType(v,I.pid);switch(Y){case "pes":if(W=Ua.parsePesType(v,I.table),Y=Ua.parsePayloadUnitStartIndicator(v),"video"===W&&Y&&(W=Ua.parsePesTime(v)))W.type="video",K.video.push(W),sa=!0}if(sa)break;ka-=188;ha-=188}else ka--,ha--;0===x.video.length&&delete x.video;break;case Q.ADTS_STREAM_TYPE:x.audio=[],cl(f,p,x),
0===x.audio.length&&delete x.audio}f=x}if(!f||!f.audio&&!f.video)return null;xp(f,k);return f},parseAudioPes_:cl};const zp=function(f,k){k.on("data",function(q){var p=q.initSegment;q.initSegment={data:p.buffer,byteOffset:p.byteOffset,byteLength:p.byteLength};p=q.data;q.data=p.buffer;f.postMessage({action:"data",segment:q,byteOffset:p.byteOffset,byteLength:p.byteLength},[q.data])});k.on("done",function(q){f.postMessage({action:"done"})});k.on("gopInfo",function(q){f.postMessage({action:"gopInfo",gopInfo:q})});
k.on("videoSegmentTimingInfo",function(q){const p={start:{decode:qa.videoTsToSeconds(q.start.dts),presentation:qa.videoTsToSeconds(q.start.pts)},end:{decode:qa.videoTsToSeconds(q.end.dts),presentation:qa.videoTsToSeconds(q.end.pts)},baseMediaDecodeTime:qa.videoTsToSeconds(q.baseMediaDecodeTime)};q.prependedContentDuration&&(p.prependedContentDuration=qa.videoTsToSeconds(q.prependedContentDuration));f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:p})});k.on("audioSegmentTimingInfo",
function(q){const p={start:{decode:qa.videoTsToSeconds(q.start.dts),presentation:qa.videoTsToSeconds(q.start.pts)},end:{decode:qa.videoTsToSeconds(q.end.dts),presentation:qa.videoTsToSeconds(q.end.pts)},baseMediaDecodeTime:qa.videoTsToSeconds(q.baseMediaDecodeTime)};q.prependedContentDuration&&(p.prependedContentDuration=qa.videoTsToSeconds(q.prependedContentDuration));f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:p})});k.on("id3Frame",function(q){f.postMessage({action:"id3Frame",
id3Frame:q})});k.on("caption",function(q){f.postMessage({action:"caption",caption:q})});k.on("trackinfo",function(q){f.postMessage({action:"trackinfo",trackInfo:q})});k.on("audioTimingInfo",function(q){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:qa.videoTsToSeconds(q.start),end:qa.videoTsToSeconds(q.end)}})});k.on("videoTimingInfo",function(q){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:qa.videoTsToSeconds(q.start),end:qa.videoTsToSeconds(q.end)}})});k.on("log",
function(q){f.postMessage({action:"log",log:q})})};class dl{constructor(f,k){this.options=k||{};this.self=f;this.init()}init(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new zg(this.options);zp(this.self,this.transmuxer)}pushMp4Captions(f){this.captionParser||(this.captionParser=new up,this.captionParser.init());const k=new Uint8Array(f.data,f.byteOffset,f.byteLength);f=this.captionParser.parse(k,f.trackIds,f.timescales);this.self.postMessage({action:"mp4Captions",captions:f&&f.captions||
[],logs:f&&f.logs||[],data:k.buffer},[k.buffer])}probeMp4StartTime({timescales:f,data:k}){f=Bg.startTime(f,k);this.self.postMessage({action:"probeMp4StartTime",startTime:f,data:k},[k.buffer])}probeMp4Tracks({data:f}){const k=Bg.tracks(f);this.self.postMessage({action:"probeMp4Tracks",tracks:k,data:f},[f.buffer])}probeEmsgID3({data:f,offset:k}){k=Bg.getEmsgID3(f,k);this.self.postMessage({action:"probeEmsgID3",id3Frames:k,emsgData:f},[f.buffer])}probeTs({data:f,baseStartTime:k}){k="number"!==typeof k||
isNaN(k)?void 0:k*qa.ONE_SECOND_IN_TS;k=yp.inspect(f,k);let q=null;k&&(q={hasVideo:k.video&&2===k.video.length||!1,hasAudio:k.audio&&2===k.audio.length||!1},q.hasVideo&&(q.videoStart=k.video[0].ptsTime),q.hasAudio&&(q.audioStart=k.audio[0].ptsTime));this.self.postMessage({action:"probeTs",result:q,data:f},[f.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(f){f=new Uint8Array(f.data,
f.byteOffset,f.byteLength);this.transmuxer.push(f)}reset(){this.transmuxer.reset()}setTimestampOffset(f){this.transmuxer.setBaseMediaDecodeTime(Math.round(qa.secondsToVideoTs(f.timestampOffset||0)))}setAudioAppendStart(f){this.transmuxer.setAudioAppendStart(Math.ceil(qa.secondsToVideoTs(f.appendStart)))}setRemux(f){this.transmuxer.setRemux(f.remux)}flush(f){this.transmuxer.flush();self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline();self.postMessage({action:"endedtimeline",
type:"transmuxed"})}alignGopsWith(f){this.transmuxer.alignGopsWith(f.gopsToAlignWith.slice())}}self.onmessage=function(f){if("init"===f.data.action&&f.data.options)this.messageHandlers=new dl(self,f.data.options);else if(this.messageHandlers||(this.messageHandlers=new dl(self)),f.data&&f.data.action&&"init"!==f.data.action&&this.messageHandlers[f.data.action])this.messageHandlers[f.data.action](f.data)}}));var Bp=Ik(Ap);const Cp=({transmuxedData:a,callback:b})=>{a.buffer=[];b(a)},fl=a=>{const {transmuxer:b,
bytes:c,audioAppendStart:d,gopsToAlignWith:e,remux:h,onData:n,onTrackInfo:u,onAudioTimingInfo:t,onVideoTimingInfo:A,onVideoSegmentTimingInfo:F,onAudioSegmentTimingInfo:y,onId3:C,onCaptions:L,onDone:H,onEndedTimeline:B,onTransmuxerLog:E,isEndOfTimeline:P,segment:U,triggerSegmentEventFn:X}=a,M={buffer:[]};let O=P;b.onmessage=S=>{if(b.currentTransmux===a){if("data"===S.data.action){const {type:Z,initSegment:ba,captions:da,captionStreams:na,metadata:la,videoFrameDtsTime:wa,videoFramePtsTime:xa}=S.data.segment;
M.buffer.push({captions:da,captionStreams:na,metadata:la});var aa=S.data.segment.boxes||{data:S.data.segment.data};aa={type:Z,data:new Uint8Array(aa.data,aa.data.byteOffset,aa.data.byteLength),initSegment:new Uint8Array(ba.data,ba.byteOffset,ba.byteLength)};"undefined"!==typeof wa&&(aa.videoFrameDtsTime=wa);"undefined"!==typeof xa&&(aa.videoFramePtsTime=xa);n(aa)}"trackinfo"===S.data.action&&u(S.data.trackInfo);"gopInfo"===S.data.action&&(M.gopInfo=S.data.gopInfo);"audioTimingInfo"===S.data.action&&
t(S.data.audioTimingInfo);"videoTimingInfo"===S.data.action&&A(S.data.videoTimingInfo);"videoSegmentTimingInfo"===S.data.action&&F(S.data.videoSegmentTimingInfo);"audioSegmentTimingInfo"===S.data.action&&y(S.data.audioSegmentTimingInfo);"id3Frame"===S.data.action&&C([S.data.id3Frame],S.data.id3Frame.dispatchType);"caption"===S.data.action&&L(S.data.caption);"endedtimeline"===S.data.action&&(O=!1,B());"log"===S.data.action&&E(S.data.log);"transmuxed"!==S.data.type||O||(b.onmessage=null,Cp({transmuxedData:M,
callback:H}),el(b))}};b.onerror=()=>{const S={message:"Received an error message from the transmuxer worker",metadata:{errorType:R.Error.StreamingFailedToTransmuxSegment,segmentInfo:Ic({segment:U})}};H(null,S)};d&&b.postMessage({action:"setAudioAppendStart",appendStart:d});Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e});"undefined"!==typeof h&&b.postMessage({action:"setRemux",remux:h});if(c.byteLength){const S=c instanceof ArrayBuffer?c:c.buffer,aa=c instanceof ArrayBuffer?
0:c.byteOffset;X({type:"segmenttransmuxingstart",segment:U});b.postMessage({action:"push",data:S,byteOffset:aa,byteLength:c.byteLength},[S])}P&&b.postMessage({action:"endTimeline"});b.postMessage({action:"flush"})},el=a=>{a.currentTransmux=null;a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"===typeof a.currentTransmux?a.currentTransmux():fl(a.currentTransmux))},gl=(a,b)=>{a.postMessage({action:b});el(a)},hl=(a,b)=>{b.currentTransmux?b.transmuxQueue.push(gl.bind(null,
b,a)):(b.currentTransmux=a,gl(b,a))},il=a=>{a.transmuxer.currentTransmux?a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,fl(a))};var Dg={reset:a=>{hl("reset",a)},endTimeline:a=>{hl("endTimeline",a)},transmux:il,createTransmuxer:a=>{const b=new Bp;b.currentTransmux=null;b.transmuxQueue=[];const c=b.terminate;b.terminate=()=>{b.currentTransmux=null;b.transmuxQueue.length=0;return c.call(b)};b.postMessage({action:"init",options:a});return b}};const Hd=function(a){const b=a.transmuxer,
c=a.endAction||a.action,d=a.callback,e=Ra({},a,{endAction:null,transmuxer:null,callback:null}),h=n=>{n.data.action===c&&(b.removeEventListener("message",h),n.data.data&&(n.data.data=new Uint8Array(n.data.data,a.byteOffset||0,a.byteLength||n.data.data.byteLength),a.data&&(a.data=n.data.data)),d(n.data))};b.addEventListener("message",h);if(a.data){const n=a.data instanceof ArrayBuffer;e.byteOffset=n?0:a.data.byteOffset;e.byteLength=a.data.byteLength;b.postMessage(e,[n?a.data:a.data.buffer])}else b.postMessage(e)},
Eg=a=>{a.forEach(b=>{b.abort()})},Fg=(a,b)=>{var {requestType:c}=b;c=Fc({requestType:c,request:b,error:a});return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:-101,xhr:b,metadata:c}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:-102,xhr:b,metadata:c}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:2,xhr:b,metadata:c}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+
b.uri,code:2,xhr:b,metadata:c}:null},jl=(a,b,c,d)=>(e,h)=>{var n=h.response;if(e=Fg(e,h))return c(e,a);if(16!==n.byteLength)return c({status:h.status,message:"Invalid HLS key at URL: "+h.uri,code:2,xhr:h},a);n=new DataView(n);n=new Uint32Array([n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12)]);for(e=0;e<b.length;e++)b[e].bytes=n;d({type:"segmentkeyloadcomplete",segment:a,keyInfo:{uri:h.uri}});return c(null,a)},kl=(a,b)=>{var c=Cf(a.map.bytes);if("mp4"!==c)return c=c||"unknown",b({internal:!0,
message:`Found unsupported ${c} container for initialization segment at URL: ${a.map.resolvedUri||a.map.uri}`,code:2,metadata:{mediaType:c}});Hd({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:({tracks:d,data:e})=>{a.map.bytes=e;d.forEach(function(h){a.map.tracks=a.map.tracks||{};a.map.tracks[h.type]||(a.map.tracks[h.type]=h,"number"===typeof h.id&&h.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[h.id]=h.timescale))});return b(null)}})},Dp=({segment:a,
finishProcessingFn:b,triggerSegmentEventFn:c})=>(d,e)=>{if(d=Fg(d,e))return b(d,a);d=new Uint8Array(e.response);c({type:"segmentloaded",segment:a});if(a.map.key)return a.map.encryptedBytes=d,b(null,a);a.map.bytes=d;kl(a,function(h){if(h)return h.xhr=e,h.status=e.status,b(h,a);b(null,a)})},Ep=({segment:a,finishProcessingFn:b,responseType:c,triggerSegmentEventFn:d})=>(e,h)=>{if(e=Fg(e,h))return b(e,a);d({type:"segmentloaded",segment:a});if("arraybuffer"!==c&&h.responseText){e=h.responseText.substring(a.lastReachedChar||
0);const n=new Uint8Array(new ArrayBuffer(e.length));for(let u=0;u<e.length;u++)n[u]=e.charCodeAt(u);e=n.buffer}else e=h.response;a.stats={bandwidth:h.bandwidth,bytesReceived:h.bytesReceived||0,roundTripTime:h.roundTripTime||0};a.key?a.encryptedBytes=new Uint8Array(e):a.bytes=new Uint8Array(e);return b(null,a)},Fp=({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,
triggerSegmentEventFn:L})=>{const H=a.map&&a.map.tracks||{},B=!(!H.audio||!H.video);let E=d.bind(null,a,"audio","start");const P=d.bind(null,a,"audio","end");let U=d.bind(null,a,"video","start");const X=d.bind(null,a,"video","end"),M=()=>il({bytes:b,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:B,onData:O=>{O.type="combined"===O.type?"video":O.type;F(a,O)},onTrackInfo:O=>{c&&(B&&(O.isMuxed=!0),c(a,O))},onAudioTimingInfo:O=>{E&&"undefined"!==typeof O.start&&
(E(O.start),E=null);P&&"undefined"!==typeof O.end&&P(O.end)},onVideoTimingInfo:O=>{U&&"undefined"!==typeof O.start&&(U(O.start),U=null);X&&"undefined"!==typeof O.end&&X(O.end)},onVideoSegmentTimingInfo:O=>{L({type:"segmenttransmuxingtiminginfoavailable",segment:a,timingInfo:{pts:{start:O.start.presentation,end:O.end.presentation},dts:{start:O.start.decode,end:O.end.decode}}});e(O)},onAudioSegmentTimingInfo:O=>{L({type:"segmenttransmuxingtiminginfoavailable",segment:a,timingInfo:{pts:{start:O.start.pts,
end:O.end.pts},dts:{start:O.start.dts,end:O.end.dts}}});h(O)},onId3:(O,S)=>{n(a,O,S)},onCaptions:O=>{u(a,[O])},isEndOfTimeline:t,onEndedTimeline:()=>{A()},onTransmuxerLog:C,onDone:(O,S)=>{y&&(O.type="combined"===O.type?"video":O.type,L({type:"segmenttransmuxingcomplete",segment:a}),y(S,a,O))},segment:a,triggerSegmentEventFn:L});Hd({action:"probeTs",transmuxer:a.transmuxer,data:b,baseStartTime:a.baseStartTime,callback:O=>{a.bytes=b=O.data;if(O=O.result)c(a,{hasAudio:O.hasAudio,hasVideo:O.hasVideo,
isMuxed:B}),c=null;M()}})},ll=({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})=>{let H=new Uint8Array(b);if(0<En(H,["moof"]).length){a.isFmp4=!0;const {tracks:B}=a.map,E={isFmp4:!0,hasVideo:!!B.video,hasAudio:!!B.audio};B.audio&&B.audio.codec&&"enca"!==B.audio.codec&&(E.audioCodec=B.audio.codec);B.video&&B.video.codec&&"encv"!==
B.video.codec&&(E.videoCodec=B.video.codec);B.video&&B.audio&&(E.isMuxed=!0);c(a,E);const P=(U,X)=>{F(a,{data:H,type:E.hasAudio&&!E.isMuxed?"audio":"video"});X&&X.length&&n(a,X);U&&U.length&&u(a,U);y(null,a,{})};Hd({action:"probeMp4StartTime",timescales:a.map.timescales,data:H,transmuxer:a.transmuxer,callback:({data:U,startTime:X})=>{b=U.buffer;a.bytes=H=U;E.hasAudio&&!E.isMuxed&&d(a,"audio","start",X);E.hasVideo&&d(a,"video","start",X);Hd({action:"probeEmsgID3",data:H,transmuxer:a.transmuxer,offset:X,
callback:({emsgData:M,id3Frames:O})=>{b=M.buffer;a.bytes=H=M;B.video&&M.byteLength&&a.transmuxer?Hd({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:H,timescales:a.map.timescales,trackIds:[B.video.id],callback:S=>{b=S.data.buffer;a.bytes=H=S.data;S.logs.forEach(function(aa){C(za(aa,{stream:"mp4CaptionParser"}))});P(S.captions,O)}}):P(void 0,O)}})}})}else a.transmuxer?("undefined"===typeof a.container&&(a.container=Cf(H)),"ts"!==a.container&&"aac"!==a.container?(c(a,{hasAudio:!1,
hasVideo:!1}),y(null,a,{})):Fp({segment:a,bytes:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})):y(null,a,{})},ml=function({id:a,key:b,encryptedBytes:c,decryptionWorker:d,segment:e,doneFn:h},n){const u=A=>{A.data.source===a&&(d.removeEventListener("message",u),A=A.data.decrypted,n(new Uint8Array(A.bytes,A.byteOffset,A.byteLength)))};d.onerror=
()=>{const A=Ic({segment:e});h({message:"An error occurred in the decryption worker",metadata:{error:Error("An error occurred in the decryption worker"),errorType:R.Error.StreamingFailedToDecryptSegment,segmentInfo:A,keyInfo:{uri:e.key.resolvedUri||e.map.key.resolvedUri}}},e)};d.addEventListener("message",u);let t;t=b.bytes.slice?b.bytes.slice():new Uint32Array(Array.prototype.slice.call(b.bytes));d.postMessage(Bk({source:a,encrypted:c,key:t,iv:b.iv}),[c.buffer,t.buffer])},Gp=({decryptionWorker:a,
segment:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})=>{L({type:"segmentdecryptionstart"});ml({id:b.requestId,key:b.key,encryptedBytes:b.encryptedBytes,decryptionWorker:a,segment:b,doneFn:y},H=>{b.bytes=H;L({type:"segmentdecryptioncomplete",segment:b});ll({segment:b,bytes:b.bytes,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,
id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})})},Hp=({activeXhrs:a,decryptionWorker:b,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})=>{let H=0,B=!1;return(E,P)=>{if(!B){if(E)return B=!0,Eg(a),y(E,P);H+=1;if(H===a.length){const U=function(){if(P.encryptedBytes)return Gp({decryptionWorker:b,
segment:P,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L});ll({segment:P,bytes:P.bytes,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:e,audioSegmentTimingInfoFn:h,id3Fn:n,captionsFn:u,isEndOfTimeline:t,endedTimelineFn:A,dataFn:F,doneFn:y,onTransmuxerLog:C,triggerSegmentEventFn:L})};P.endOfAllRequests=Date.now();if(P.map&&P.map.encryptedBytes&&
!P.map.bytes)return L({type:"segmentdecryptionstart",segment:P}),ml({decryptionWorker:b,id:P.requestId+"-init",encryptedBytes:P.map.encryptedBytes,key:P.map.key,segment:P,doneFn:y},X=>{P.map.bytes=X;L({type:"segmentdecryptioncomplete",segment:P});kl(P,M=>{if(M)return Eg(a),y(M,P);U()})});U()}}}},Ip=({loadendState:a,abortFn:b})=>c=>{c.target.aborted&&b&&!a.calledAbortFn&&(b(),a.calledAbortFn=!0)},Jp=({segment:a,progressFn:b})=>c=>{if(!c.target.aborted){var d=a.stats,e=c.target;e=Date.now()-e.requestTime;
e={bandwidth:Infinity,bytesReceived:0,roundTripTime:e||0};e.bytesReceived=c.loaded;e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8E3);a.stats=za(d,e);!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now());return b(c,a)}},Kp=({xhr:a,xhrOptions:b,decryptionWorker:c,segment:d,abortFn:e,progressFn:h,trackInfoFn:n,timingInfoFn:u,videoSegmentTimingInfoFn:t,audioSegmentTimingInfoFn:A,id3Fn:F,captionsFn:y,isEndOfTimeline:C,endedTimelineFn:L,dataFn:H,doneFn:B,
onTransmuxerLog:E,triggerSegmentEventFn:P})=>{const U=[];c=Hp({activeXhrs:U,decryptionWorker:c,trackInfoFn:n,timingInfoFn:u,videoSegmentTimingInfoFn:t,audioSegmentTimingInfoFn:A,id3Fn:F,captionsFn:y,isEndOfTimeline:C,endedTimelineFn:L,dataFn:H,doneFn:B,onTransmuxerLog:E,triggerSegmentEventFn:P});d.key&&!d.key.bytes&&(E=[d.key],d.map&&!d.map.bytes&&d.map.key&&d.map.key.resolvedUri===d.key.resolvedUri&&E.push(d.map.key),B=za(b,{uri:d.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),
E=jl(d,E,c,P),P({type:"segmentkeyloadstart",segment:d,keyInfo:{uri:d.key.resolvedUri}}),B=a(B,E),U.push(B));d.map&&!d.map.bytes&&(!d.map.key||d.key&&d.key.resolvedUri===d.map.key.resolvedUri||(B=za(b,{uri:d.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),E=jl(d,[d.map.key],c,P),P({type:"segmentkeyloadstart",segment:d,keyInfo:{uri:d.map.key.resolvedUri}}),B=a(B,E),U.push(B)),B=za(b,{uri:d.map.resolvedUri,responseType:"arraybuffer",headers:sg(d.map),requestType:"segment-media-initialization"}),
E=Dp({segment:d,finishProcessingFn:c,triggerSegmentEventFn:P}),P({type:"segmentloadstart",segment:d}),B=a(B,E),U.push(B));b=za(b,{uri:d.part&&d.part.resolvedUri||d.resolvedUri,responseType:"arraybuffer",headers:sg(d),requestType:"segment"});c=Ep({segment:d,finishProcessingFn:c,responseType:b.responseType,triggerSegmentEventFn:P});P({type:"segmentloadstart",segment:d});a=a(b,c);a.addEventListener("progress",Jp({segment:d,progressFn:h,trackInfoFn:n,timingInfoFn:u,videoSegmentTimingInfoFn:t,audioSegmentTimingInfoFn:A,
id3Fn:F,captionsFn:y,isEndOfTimeline:C,endedTimelineFn:L,dataFn:H}));U.push(a);const X={};U.forEach(M=>{M.addEventListener("loadend",Ip({loadendState:X,abortFn:e}))});return()=>Eg(U)},Lp=Gb("CodecUtils"),nl=(a,b)=>{b=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&b.AUDIO&&a.mediaGroups.AUDIO[b.AUDIO]},Me=function(a){const b={};a.forEach(({mediaType:c,type:d,details:e})=>{b[c]=b[c]||[];b[c].push(ni(`${d}${e}`))});Object.keys(b).forEach(function(c){1<b[c].length?(Lp(`multiple ${c} codecs found as attributes: ${b[c].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),
b[c]=null):b[c]=b[c][0]});return b},ol=function(a){let b=0;a.audio&&b++;a.video&&b++;return b},Id=function(a,b){const c=b.attributes||{};var d=b.attributes||{};d=d.CODECS?Pb(d.CODECS):void 0;d=Me(d||[]);if(nl(a,b)&&!d.audio){a:if(nl(a,b)){b=a.mediaGroups.AUDIO[(b.attributes||{}).AUDIO];for(e in b)if(!b[e].uri&&!b[e].playlists){var e=!0;break a}e=!1}else e=!0;e||(a=Me(Em(a,c.AUDIO)||[]),a.audio&&(d.audio=a.audio))}return d},Ne=Gb("PlaylistSelector"),pl=function(a){if(a&&a.playlist){var b=a.playlist;
return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}},Oe=function(a,b){return a?(a=J.getComputedStyle(a))?a[b]:"":""},gd=function(a,b){const c=a.slice();a.sort(function(d,e){const h=b(d,e);return 0===h?c.indexOf(d)-c.indexOf(e):h})},Gg=function(a,b){let c,d;a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH);c=c||J.Number.MAX_VALUE;b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH);d=d||J.Number.MAX_VALUE;return c-d};let ql=
function(a,b,c,d,e,h){if(a){var n={bandwidth:b,width:c,height:d,limitRenditionByPlayerDimensions:e},u=a.playlists;ub.isAudioOnly(a)&&(u=h.getAudioTrackPlaylists_(),n.audioOnly=!0);var t=u.map(H=>{let B;const E=H.attributes&&H.attributes.RESOLUTION&&H.attributes.RESOLUTION.width,P=H.attributes&&H.attributes.RESOLUTION&&H.attributes.RESOLUTION.height;B=(B=H.attributes&&H.attributes.BANDWIDTH)||J.Number.MAX_VALUE;return{bandwidth:B,width:E,height:P,playlist:H}});gd(t,(H,B)=>H.bandwidth-B.bandwidth);
t=t.filter(H=>!ub.isIncompatible(H.playlist));a=t.filter(H=>ub.isEnabled(H.playlist));a.length||(a=t.filter(H=>!ub.isDisabled(H.playlist)));var A=a.filter(H=>H.bandwidth*bb.BANDWIDTH_VARIANCE<b),F=A[A.length-1];u=A.filter(H=>H.bandwidth===F.bandwidth)[0];if(!1===e){var y=u||a[0]||t[0];if(y&&y.playlist){var C="sortedPlaylistReps";u&&(C="bandwidthBestRep");a[0]&&(C="enabledPlaylistReps");Ne(`choosing ${pl(y)} using ${C} with options`,n);return y.playlist}Ne("could not choose a playlist with options",
n);return null}A=A.filter(H=>H.width&&H.height);gd(A,(H,B)=>H.width-B.width);e=A.filter(H=>H.width===c&&H.height===d);F=e[e.length-1];e=e.filter(H=>H.bandwidth===F.bandwidth)[0];if(!e){var L=A.filter(H=>H.width>c||H.height>d);y=L.filter(H=>H.width===L[0].width&&H.height===L[0].height);F=y[y.length-1];y=y.filter(H=>H.bandwidth===F.bandwidth)[0]}h.leastPixelDiffSelector&&(C=A.map(H=>{H.pixelDiff=Math.abs(H.width-c)+Math.abs(H.height-d);return H}),gd(C,(H,B)=>H.pixelDiff===B.pixelDiff?B.bandwidth-H.bandwidth:
H.pixelDiff-B.pixelDiff),C=C[0]);if((h=C||y||e||u||a[0]||t[0])&&h.playlist)return t="sortedPlaylistReps",C?t="leastPixelDiffRep":y?t="resolutionPlusOneRep":e?t="resolutionBestRep":u?t="bandwidthBestRep":a[0]&&(t="enabledPlaylistReps"),Ne(`choosing ${pl(h)} using ${t} with options`,n),h.playlist;Ne("could not choose a playlist with options",n);return null}};const rl=function(){let a=this.useDevicePixelRatio?J.devicePixelRatio||1:1;isNaN(this.customPixelRatio)||(a=this.customPixelRatio);return ql(this.playlists.main,
this.systemBandwidth,parseInt(Oe(this.tech_.el(),"width"),10)*a,parseInt(Oe(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.playlistController_)},Mp=function(a){const {main:b,currentTime:c,bandwidth:d,duration:e,segmentDuration:h,timeUntilRebuffer:n,currentTimeline:u,syncController:t}=a;a=b.playlists.filter(F=>!ub.isIncompatible(F));var A=a.filter(ub.isEnabled);A.length||(A=a.filter(F=>!ub.isDisabled(F)));a=A.filter(ub.hasAttribute.bind(null,"BANDWIDTH")).map(F=>{var y=
t.getSyncPoint(F,e,u,c)?1:2;y=ub.estimateSegmentRequestTime(h,d,F)*y-n;return{playlist:F,rebufferingImpact:y}});A=a.filter(F=>0>=F.rebufferingImpact);gd(A,(F,y)=>Gg(y.playlist,F.playlist));if(A.length)return A[0];gd(a,(F,y)=>F.rebufferingImpact-y.rebufferingImpact);return a[0]||null},Np=a=>{let b=0,c;a.bytes&&(c=new Uint8Array(a.bytes),a.segments.forEach(d=>{c.set(d,b);b+=d.byteLength}));return c},Op=function({inbandTextTracks:a,captionArray:b,timestampOffset:c}){if(b){var d=J.WebKitDataCue||J.VTTCue;
b.forEach(e=>{const h=e.stream;e.content?e.content.forEach(n=>{const u=new d(e.startTime+c,e.endTime+c,n.text);u.line=n.line;u.align="left";u.position=n.position;u.positionAlign="line-left";a[h].addCue(u)}):a[h].addCue(new d(e.startTime+c,e.endTime+c,e.text))})}},Pp=function(a){Object.defineProperties(a.frame,{id:{get(){R.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return a.value.key}},value:{get(){R.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return a.value.data}},
privateData:{get(){R.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return a.value.data}}})},Qp=({inbandTextTracks:a,metadataArray:b,timestampOffset:c,videoDuration:d})=>{if(b){var e=J.WebKitDataCue||J.VTTCue,h=a.metadataTrack_;if(h&&(b.forEach(t=>{const A=t.cueTime+c;!("number"!==typeof A||J.isNaN(A)||0>A)&&Infinity>A&&t.frames&&t.frames.length&&t.frames.forEach(F=>{const y=new e(A,A,F.value||F.url||F.data||"");y.frame=F;y.value=F;Pp(y);h.addCue(y)})}),h.cues&&h.cues.length)){a=
h.cues;b=[];for(let t=0;t<a.length;t++)a[t]&&b.push(a[t]);var n=b.reduce((t,A)=>{const F=t[A.startTime]||[];F.push(A);t[A.startTime]=F;return t},{}),u=Object.keys(n).sort((t,A)=>Number(t)-Number(A));u.forEach((t,A)=>{const F=n[t];t=isFinite(d)?d:t;const y=Number(u[A+1])||t;F.forEach(C=>{C.endTime=y})})}}},Rp={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Sp=
new Set("id class startDate duration endDate endOnNext startTime endTime processDateRange".split(" ")),Tp=({inbandTextTracks:a,dateRanges:b})=>{const c=a.metadataTrack_;if(c){var d=J.WebKitDataCue||J.VTTCue;b.forEach(e=>{for(const h of Object.keys(e)){if(Sp.has(h))continue;const n=new d(e.startTime,e.endTime,"");n.id=e.id;n.type="com.apple.quicktime.HLS";n.value={key:Rp[h],data:e[h]};if("scte35Out"===h||"scte35In"===h)n.value.data=(new Uint8Array(n.value.data.match(/[\da-f]{2}/gi))).buffer;c.addCue(n)}e.processDateRange()})}},
sl=(a,b,c)=>{a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,R.browser.IS_ANY_SAFARI||(a.metadataTrack_.inBandMetadataTrackDispatchType=b))},Jd=function(a,b,c){let d,e;if(c&&c.cues)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime>=a&&e.endTime<=b&&c.removeCue(e)},Up=function(a){const b=a.cues;if(b){var c={};for(let d=b.length-1;0<=d;d--){const e=b[d],h=`${e.startTime}-${e.endTime}-${e.text}`;c[h]?a.removeCue(e):c[h]=e}}},Vp=(a,b,c,d)=>{b=
Math.ceil((b-d)*Bc.ONE_SECOND_IN_TS);var e=Math.ceil((c-d)*Bc.ONE_SECOND_IN_TS);c=a.slice();for(d=a.length;d--&&!(a[d].pts<=e););if(-1===d)return c;for(e=d+1;e--&&!(a[e].pts<=b););e=Math.max(e,0);c.splice(e,d-e+1);return c},Wp=function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;const c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(let e=0;e<c.length;e++){const h=c[e];if(h!==d[e]||a[h]!==b[h])return!1}return!0},Pe=1/60,hd=a=>{const {startOfSegment:b,
duration:c,segment:d,part:e,playlist:{mediaSequence:h,id:n,segments:u=[]},mediaIndex:t,partIndex:A,timeline:F}=a,y=u.length-1;let C="mediaIndex/partIndex increment";a.getMediaInfoForTime?C=`getMediaInfoForTime (${a.getMediaInfoForTime})`:a.isSyncRequest&&(C="getSyncSegmentCandidate (isSyncRequest)");a.independent&&(C+=` with independent ${a.independent}`);const L="number"===typeof A;a=a.segment.uri?"segment":"pre-segment";const H=L?jk({preloadSegment:d})-1:0;return`${a} [${h+t}/${h+y}]`+(L?` part [${A}/${H}]`:
"")+` segment start/end [${d.start} => ${d.end}]`+(L?` part start/end [${e.start} => ${e.end}]`:"")+` startOfSegment [${b}]`+` duration [${c}]`+` timeline [${F}]`+` selected by [${C}]`+` playlist [${n}]`},Xp=({segmentTimeline:a,currentTimeline:b,startOfSegment:c,buffered:d,overrideCheck:e})=>e||a!==b?a<b?c:d.length?d.end(d.length-1):c:null,Hg=({timelineChangeController:a,currentTimeline:b,segmentTimeline:c,loaderType:d,audioDisabled:e})=>b===c?!1:"audio"===d?(a=a.lastTimelineChange({type:"main"}),
!a||a.to!==c):"main"===d&&e?(a=a.pendingTimelineChange({type:"audio"}))&&a.to===c?!1:!0:!1,sc=a=>{var b=a.pendingSegment_;if(b){if(b=Hg({timelineChangeController:a.timelineChangeController_,currentTimeline:a.currentTimeline_,segmentTimeline:b.timeline,loaderType:a.loaderType_,audioDisabled:a.audioDisabled_})){var c=a.timelineChangeController_;if(c){b=c.pendingTimelineChange({type:"audio"});c=c.pendingTimelineChange({type:"main"});var d=b&&c,e=d&&b.to!==c.to;b=d&&-1!==b.from&&-1!==c.from&&e?!0:!1}else b=
!1}b&&(b=a.timelineChangeController_.pendingTimelineChange({type:"audio"}),c=a.timelineChangeController_.pendingTimelineChange({type:"main"}),b&&c&&b.to<c.to?a.timelineChangeController_.trigger("audioTimelineBehind"):a&&(a.pause(),a.resetEverything(),a.load()))}},Yp=a=>{let b=0;["video","audio"].forEach(function(c){if(c=a[`${c}TimingInfo`]){var {start:d,end:e}=c,h;"bigint"===typeof d||"bigint"===typeof e?h=J.BigInt(e)-J.BigInt(d):"number"===typeof d&&"number"===typeof e&&(h=e-d);"undefined"!==typeof h&&
h>b&&(b=h)}});"bigint"===typeof b&&b<Number.MAX_SAFE_INTEGER&&(b=Number(b));return b},tl=({segmentDuration:a,maxDuration:b})=>a?Math.round(a)>b+Tb:!1,Ic=({type:a,segment:b})=>{if(b)return{type:a||b.type,uri:b.resolvedUri||b.uri,start:void 0===b.startOfSegment?b.start:b.startOfSegment,duration:b.duration,isEncrypted:!!(b.key||b.map&&b.map.ke),isMediaInitialization:!(!b.map||b.map.bytes)}};class Ig extends R.EventTarget{constructor(a,b){super();if(!a)throw new TypeError("Initialization settings are required");
if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=a.bandwidth;this.throughput={rate:0,count:0};this.roundTrip=NaN;this.resetStats_();this.partIndex=this.mediaIndex=null;this.hasPlayed_=a.hasPlayed;this.currentTime_=a.currentTime;this.seekable_=a.seekable;this.seeking_=a.seeking;this.duration_=a.duration;this.mediaSource_=a.mediaSource;this.vhs_=a.vhs;this.loaderType_=a.loaderType;
this.startingMediaInfo_=this.currentMediaInfo_=void 0;this.segmentMetadataTrack_=a.segmentMetadataTrack;this.goalBufferLength_=a.goalBufferLength;this.sourceType_=a.sourceType;this.sourceUpdater_=a.sourceUpdater;this.inbandTextTracks_=a.inbandTextTracks;this.state_="INIT";this.timelineChangeController_=a.timelineChangeController;this.shouldSaveSegmentTimingInfo_=!0;this.parse708captions_=a.parse708captions;this.useDtsForTimestampOffset_=a.useDtsForTimestampOffset;this.captionServices_=a.captionServices;
this.exactManifestTimings=a.exactManifestTimings;this.addMetadataToTextTrack=a.addMetadataToTextTrack;this.checkBufferTimeout_=null;this.error_=void 0;this.currentTimeline_=-1;this.shouldForceTimestampOffsetAfterResync_=!1;this.xhrOptions_=this.pendingSegment_=null;this.pendingSegments_=[];this.isPendingTimestampOffset_=this.audioDisabled_=!1;this.gopBuffer_=[];this.timeMapping_=0;this.safeAppend_=!1;this.appendInitSegment_={audio:!0,video:!0};this.playlistOfLastInitSegment_={audio:null,video:null};
this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_={id3:[],caption:[]};this.waitingOnRemove_=!1;this.activeInitSegmentId_=this.quotaExceededErrorRetryTimeout_=null;this.initSegments_={};this.cacheEncryptionKeys_=a.cacheEncryptionKeys;this.keyCache_={};this.decrypter_=a.decrypter;this.syncController_=a.syncController;this.syncPoint_={segmentIndex:0,time:0};this.transmuxer_=this.createTransmuxer_();this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate");this.syncController_.on("syncinfoupdate",
this.triggerSyncInfoUpdate_);this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)});this.fetchAtBuffer_=!1;this.logger_=Gb(`SegmentLoader[${this.loaderType_}]`);Object.defineProperty(this,"state",{get(){return this.state_},set(c){c!==this.state_&&(this.logger_(`${this.state_} -> ${c}`),this.state_=c,this.trigger("statechange"))}});this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():sc(this)});this.sourceUpdater_.on("codecschange",
c=>{this.trigger(Ra({type:"codecschange"},c))});if("main"===this.loaderType_)this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():sc(this)});if("audio"===this.loaderType_)this.timelineChangeController_.on("timelinechange",c=>{this.trigger(Ra({type:"timelinechange"},c));this.hasEnoughInfoToLoad_()?this.processLoadQueue_():sc(this);this.hasEnoughInfoToAppend_()?this.processCallQueue_():sc(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Dg.createTransmuxer({remux:!1,
alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaAppends=this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}dispose(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();this.transmuxer_&&this.transmuxer_.terminate();this.resetStats_();this.checkBufferTimeout_&&
J.clearTimeout(this.checkBufferTimeout_);this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);this.off()}setAudio(a){this.audioDisabled_=!a;a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&
this.pendingSegment_.abortRequests();this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.waitingOnRemove_=!1;J.clearTimeout(this.quotaExceededErrorRetryTimeout_);this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(a){return"APPENDING"!==this.state||this.pendingSegment_?this.pendingSegment_&&this.pendingSegment_.requestId===a?!1:!0:(this.state=
"READY",!0)}error(a){"undefined"!==typeof a&&(this.logger_("error occurred:",a),this.error_=a);this.pendingSegment_=null;return this.error_}endOfStream(){this.ended_=!0;this.transmuxer_&&Dg.reset(this.transmuxer_);this.gopBuffer_.length=0;this.pause();this.trigger("ended")}buffered_(){const a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return eb();if("main"===this.loaderType_){const {hasAudio:b,hasVideo:c,isMuxed:d}=a;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(a,
b=!1){if(!a)return null;const c=De(a);let d=this.initSegments_[c];b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales});return d||a}segmentKey(a,b=!1){if(!a)return null;const c=a.resolvedUri;let d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});a={resolvedUri:(d||a).resolvedUri};d&&(a.bytes=d.bytes);return a}couldBeginLoading_(){return this.playlist_&&
!this.paused()}load(){this.monitorBuffer_();if(this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}playlist(a,b={}){if(a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&
this.syncController_.setDateTimeMappingForStart(a));b=null;c&&(c.id?b=c.id:c.uri&&(b=c.uri));this.logger_(`playlist update [${b} => ${a.id||a.uri}]`);this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(a,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${ig(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics));this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(c&&c.uri===a.uri){b=
a.mediaSequence-c.mediaSequence;this.logger_(`live window shift [${b}]`);if(null!==this.mediaIndex)if(this.mediaIndex-=b,0>this.mediaIndex)this.partIndex=this.mediaIndex=null;else{var e=this.playlist_.segments[this.mediaIndex];!this.partIndex||e.parts&&e.parts.length&&e.parts[this.partIndex]||(e=this.mediaIndex,this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=e)}d&&(d.mediaIndex-=b,0>d.mediaIndex?(d.mediaIndex=null,d.partIndex=
null):(0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex]),0<=d.partIndex&&d.segment.parts&&(d.part=d.segment.parts[d.partIndex])));this.syncController_.saveExpiredSegmentInfo(c,a)}else null!==this.mediaIndex&&(a.endList||"number"!==typeof a.partTargetDuration?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate")}}pause(){this.checkBufferTimeout_&&(J.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(a){this.ended_=
!1;this.activeInitSegmentId_=null;this.appendInitSegment_={audio:!0,video:!0};this.resetLoader();this.remove(0,Infinity,a);this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1;this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus();this.resyncLoader()}resyncLoader(){this.transmuxer_&&Dg.reset(this.transmuxer_);this.syncPoint_=this.partIndex=this.mediaIndex=null;this.isPendingTimestampOffset_=
!1;const a=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;"hls"!==this.sourceType_||a||(this.shouldForceTimestampOffsetAfterResync_=!0);this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(a,b,c=()=>{},d=!1){Infinity===b&&(b=this.duration_());if(b<=a)this.logger_("skipping remove because end ${end} is \x3c\x3d start ${start}");else if(this.sourceUpdater_&&
this.getMediaInfo_()){var e=1,h=()=>{e--;0===e&&c()};if(d||!this.audioDisabled_)e++,this.sourceUpdater_.removeAudio(a,b,h);if(d||"main"===this.loaderType_)this.gopBuffer_=Vp(this.gopBuffer_,a,b,this.timeMapping_),e++,this.sourceUpdater_.removeVideo(a,b,h);for(const n in this.inbandTextTracks_)Jd(a,b,this.inbandTextTracks_[n]);Jd(a,b,this.segmentMetadataTrack_);h()}else this.logger_("skipping remove because no source updater or starting media info")}monitorBuffer_(){this.checkBufferTimeout_&&J.clearTimeout(this.checkBufferTimeout_);
this.checkBufferTimeout_=J.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&J.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=J.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(!this.sourceUpdater_.updating()){var a=this.chooseNextRequest_();if(a){var b={segmentInfo:Ic({type:this.loaderType_,segment:a})};this.trigger({type:"segmentselected",metadata:b});"number"===typeof a.timestampOffset&&
(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}));this.loadSegment_(a)}}}isEndOfStream_(a=this.mediaIndex,b=this.playlist_,c=this.partIndex){if(!b||!this.mediaSource_)return!1;const d="number"===typeof a&&b.segments[a];a=a+1===b.segments.length;c=!d||!d.parts||c+1===d.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&a&&c}chooseNextRequest_(){var a=this.buffered_(),b=ig(a)||
0,c=jg(a,this.currentTime_()),d=!this.hasPlayed_()&&1<=c,e=c>=this.goalBufferLength_();a=this.playlist_.segments;if(!a.length||d||e)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);d={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(d.isSyncRequest){a:{e=this.currentTimeline_;var h=a||[];var n=[];let u=0;for(let t=0;t<
h.length;t++){const A=h[t];if(e===A.timeline&&(n.push(t),u+=A.duration,u>b)){b=t;break a}}b=0===n.length?0:n[n.length-1]}d.mediaIndex=b;this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${d.mediaIndex}`)}else if(null!==this.mediaIndex)e=a[this.mediaIndex],h="number"===typeof this.partIndex?this.partIndex:-1,d.startOfSegment=e.end?e.end:b,e.parts&&e.parts[h+1]?(d.mediaIndex=this.mediaIndex,d.partIndex=h+1):d.mediaIndex=this.mediaIndex+1;else{e=this.fetchAtBuffer_?
b:this.currentTime_();this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${e}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${b}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics);if(this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){n=this.getSyncInfoFromMediaSequenceSync_(e);if(!n)return this.error({message:"No sync info found while using media sequence sync",metadata:{errorType:R.Error.StreamingFailedToSelectNextSegment,
error:Error("No sync info found while using media sequence sync")}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null;this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${n.start} --\x3e ${n.end})`);b=n.segmentIndex;h=n.partIndex;n=n.start}else this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint."),n=ub.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:e,
startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),b=n.segmentIndex,h=n.partIndex,n=n.startTime;d.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${e}`:`currentTime ${e}`;d.mediaIndex=b;d.startOfSegment=n;d.partIndex=h;this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${d.mediaIndex} `)}e=(b=a[d.mediaIndex])&&"number"===typeof d.partIndex&&b.parts&&b.parts[d.partIndex];if(!b||
"number"===typeof d.partIndex&&!e)return null;"number"!==typeof d.partIndex&&b.parts&&(d.partIndex=0,e=b.parts[0]);h=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;c||!e||h||e.independent||(0===d.partIndex?(c=a[d.mediaIndex-1],(b=c.parts&&c.parts.length&&c.parts[c.parts.length-1])&&b.independent&&(--d.mediaIndex,d.partIndex=c.parts.length-1,d.independent="previous segment")):b.parts[d.partIndex-1].independent&&(--d.partIndex,
d.independent="previous part"));c=this.mediaSource_&&"ended"===this.mediaSource_.readyState;if(d.mediaIndex>=a.length-1&&c&&!this.seeking_())return null;this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,d.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync"));return this.generateSegmentInfo_(d)}getSyncInfoFromMediaSequenceSync_(a){if(!this.mediaSequenceSync_)return null;const b=Math.max(a,this.mediaSequenceSync_.start);
a!==b&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${a} to ${b}`);a=this.mediaSequenceSync_.getSyncInfoForTime(b);if(!a)return null;if(!a.isAppended)return a;a=this.mediaSequenceSync_.getSyncInfoForTime(a.end);if(!a)return null;a.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!");return a}generateSegmentInfo_(a){const {independent:b,playlist:c,mediaIndex:d,startOfSegment:e,
isSyncRequest:h,partIndex:n,forceTimestampOffset:u,getMediaInfoForTime:t}=a;var A=c.segments[d];a="number"===typeof n&&A.parts[n];a={requestId:"segment-loader-"+Math.random(),uri:a&&a.resolvedUri||A.resolvedUri,mediaIndex:d,partIndex:a?n:null,isSyncRequest:h,startOfSegment:e,playlist:c,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:A.timeline,duration:a&&a.duration||A.duration,segment:A,part:a,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:t,independent:b};var F="undefined"!==
typeof u?u:this.isPendingTimestampOffset_;a.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:A.timeline,currentTimeline:this.currentTimeline_,startOfSegment:e,buffered:this.buffered_(),overrideCheck:F});A=ig(this.sourceUpdater_.audioBuffered());"number"===typeof A&&(a.audioAppendStart=A-this.sourceUpdater_.audioTimestampOffset());if(this.sourceUpdater_.videoBuffered().length){A=this.gopBuffer_;F=this.currentTime_()-this.sourceUpdater_.videoTimestampOffset();if("undefined"!==typeof F&&
null!==F&&A.length){F=Math.ceil((F-this.timeMapping_+3)*Bc.ONE_SECOND_IN_TS);var y;for(y=0;y<A.length&&!(A[y].pts>F);y++);A=A.slice(y)}else A=[];a.gopsToAlignWith=A}return a}timestampOffsetForSegment_(a){return Xp(a)}earlyAbortWhenNeeded_(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))){var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=ub.estimateSegmentRequestTime(d,c,this.playlist_,
a.bytesReceived);a=Io(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;e<=a||!(b=Mp({main:this.vhs_.playlists.main,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_}))||(c=e-a-b.rebufferingImpact,d=.5,a<=Tb&&(d=1),!b.playlist||b.playlist.uri===this.playlist_.uri||c<d||(this.bandwidth=b.playlist.attributes.BANDWIDTH*bb.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort")))}}handleAbort_(a){this.logger_(`Aborting ${hd(a)}`);
this.mediaRequestsAborted+=1}handleProgress_(a,b){this.earlyAbortWhenNeeded_(b.stats);this.checkForAbort_(b.requestId)||this.trigger("progress")}handleTrackInfo_(a,b){const {hasAudio:c,hasVideo:d}=b,e={segmentInfo:Ic({type:this.loaderType_,segment:a}),trackInfo:{hasAudio:c,hasVideo:d}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:e});this.earlyAbortWhenNeeded_(a.stats);this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},Wp(this.currentMediaInfo_,b)||
(this.appendInitSegment_={audio:!0,video:!0},this.currentMediaInfo_=this.startingMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()?this.processCallQueue_():sc(this)))}handleTimingInfo_(a,b,c,d){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId)){a=this.pendingSegment_;var e=`${b}TimingInfo`;a[e]=a[e]||{};a[e][c]=d;this.logger_(`timinginfo: ${b} - ${c} - ${d}`);
this.hasEnoughInfoToAppend_()?this.processCallQueue_():sc(this)}}handleCaptions_(a,b){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(0===b.length)this.logger_("SegmentLoader received no captions from a caption event");else if(this.pendingSegment_.hasAppendedData_){var c=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),d={};b.forEach(e=>{d[e.stream]=d[e.stream]||{startTime:Infinity,captions:[],
endTime:0};const h=d[e.stream];h.startTime=Math.min(h.startTime,e.startTime+c);h.endTime=Math.max(h.endTime,e.endTime+c);h.captions.push(e)});Object.keys(d).forEach(e=>{const {startTime:h,endTime:n,captions:u}=d[e],t=this.inbandTextTracks_;this.logger_(`adding cues from ${h} -> ${n} for ${e}`);var A=this.vhs_.tech_;if(!t[e]){A.trigger({type:"usage",name:"vhs-608"});let y=e;/^cc708_/.test(e)&&(y="SERVICE"+e.split("_")[1]);var F=A.textTracks().getTrackById(y);if(F)t[e]=F;else{let C=F=e,L=!1;const H=
(A.options_.vhs&&A.options_.vhs.captionServices||{})[y];H&&(F=H.label,C=H.language,L=H.default);t[e]=A.addRemoteTextTrack({kind:"captions",id:y,default:L,label:F,language:C},!1).track}}Jd(h,n,t[e]);Op({captionArray:u,inbandTextTracks:t,timestampOffset:c})});this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b))}handleId3_(a,b,c){this.earlyAbortWhenNeeded_(a.stats);this.checkForAbort_(a.requestId)||
(this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(c,b,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c)))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(a=>a());this.metadataQueue_.caption.forEach(a=>a());this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]}processCallQueue_(){const a=this.callQueue_;this.callQueue_=[];a.forEach(b=>b())}processLoadQueue_(){const a=this.loadQueue_;this.loadQueue_=[];a.forEach(b=>b())}hasEnoughInfoToLoad_(){if("audio"!==
this.loaderType_)return!0;const a=this.pendingSegment_;return a?this.getCurrentMediaInfo_()?Hg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})?!1:!0:!0:!1}getCurrentMediaInfo_(a=this.pendingSegment_){return a&&a.trackInfo||this.currentMediaInfo_}getMediaInfo_(a=this.pendingSegment_){return this.getCurrentMediaInfo_(a)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?
this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const a=this.pendingSegment_,b=this.getCurrentMediaInfo_();if(!a||!b)return!1;const {hasAudio:c,hasVideo:d,isMuxed:e}=b;return d&&!a.videoTimingInfo||c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo||Hg({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,
audioDisabled:this.audioDisabled_})?!1:!0}handleData_(a,b){this.earlyAbortWhenNeeded_(a.stats);if(!this.checkForAbort_(a.requestId))if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())sc(this),this.callQueue_.push(this.handleData_.bind(this,a,b));else{var c=this.pendingSegment_;this.setTimeMapping_(c.timeline);this.updateMediaSecondsLoaded_(c.part||c.segment);if("closed"!==this.mediaSource_.readyState){a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map);a.key&&this.segmentKey(a.key,
!0);c.isFmp4=a.isFmp4;c.timingInfo=c.timingInfo||{};if(c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[`${b.type}TimingInfo`].start;else{a=this.getCurrentMediaInfo_();a="main"===this.loaderType_&&a&&a.hasVideo;if(a)var d=c.videoTimingInfo.start;c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:d,videoTimingInfo:c.videoTimingInfo,
audioTimingInfo:c.audioTimingInfo})}this.updateAppendInitSegmentStatus(c,b.type);this.updateSourceBufferTimestampOffset_(c);if(c.isSyncRequest){this.updateTimingInfoEnd_(c);this.syncController_.saveSegmentTimingInfo({segmentInfo:c,shouldSaveTimelineMapping:"main"===this.loaderType_});d=this.chooseNextRequest_();if(d.mediaIndex!==c.mediaIndex||d.partIndex!==c.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}c.hasAppendedData_=
!0;this.processMetadataQueue_();this.appendData_(c,b)}}}updateAppendInitSegmentStatus(a,b){"main"!==this.loaderType_||"number"!==typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0});this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)}getInitSegmentAndUpdateState_({type:a,initSegment:b,map:c,playlist:d}){if(c){const e=De(c);if(this.activeInitSegmentId_===e)return null;b=this.initSegmentForMap(c,!0).bytes;this.activeInitSegmentId_=
e}return b&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=d,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,b):null}handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c},d){d=this.sourceUpdater_.audioBuffered();const e=this.sourceUpdater_.videoBuffered();1<d.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Ec(d).join(", "));1<e.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Ec(e).join(", "));const h=d.length?
d.start(0):0,n=d.length?d.end(d.length-1):0,u=e.length?e.start(0):0,t=e.length?e.end(e.length-1):0;1>=n-h&&1>=t-u?(this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+`Appended byte length: ${c.byteLength}, `+`audio buffer: ${Ec(d).join(", ")}, `+`video buffer: ${Ec(e).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:Infinity}),this.trigger("error")):(this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,
{segmentInfo:a,type:b,bytes:c})),a=this.currentTime_()-1,this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${a}`),this.remove(0,a,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s");this.waitingOnRemove_=!1;this.quotaExceededErrorRetryTimeout_=J.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue");this.quotaExceededErrorRetryTimeout_=null;this.processCallQueue_()},1E3)},!0))}handleAppendError_({segmentInfo:a,type:b,bytes:c},d){d&&(22===d.code?
this.handleQuotaExceededError_({segmentInfo:a,type:b,bytes:c}):(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",d),this.error({message:`${b} append of ${c.length}b failed for segment `+`#${a.mediaIndex} in playlist ${a.playlist.id}`,metadata:{errorType:R.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")))}appendToSourceBuffer_({segmentInfo:a,type:b,initSegment:c,data:d,bytes:e}){e||(e=[d],d=d.byteLength,c&&(e.unshift(c),d+=c.byteLength),e=Np({bytes:d,segments:e}));c={segmentInfo:Ic({type:this.loaderType_,
segment:a})};this.trigger({type:"segmentappendstart",metadata:c});this.sourceUpdater_.appendBuffer({segmentInfo:a,type:b,bytes:e},this.handleAppendError_.bind(this,{segmentInfo:a,type:b,bytes:e}))}handleSegmentTimingInfo_(a,b,c){this.pendingSegment_&&b===this.pendingSegment_.requestId&&(b=this.pendingSegment_.segment,a=`${a}TimingInfo`,b[a]||(b[a]={}),b[a].transmuxerPrependedSeconds=c.prependedContentDuration||0,b[a].transmuxedPresentationStart=c.start.presentation,b[a].transmuxedDecodeStart=c.start.decode,
b[a].transmuxedPresentationEnd=c.end.presentation,b[a].transmuxedDecodeEnd=c.end.decode,b[a].baseMediaDecodeTime=c.baseMediaDecodeTime)}appendData_(a,b){const {type:c,data:d}=b;!d||!d.byteLength||"audio"===c&&this.audioDisabled_||(b=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:b,data:d}))}loadSegment_(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);
"number"===typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(a):(sc(this),this.loadQueue_.push(()=>{const b=Ra({},a,{forceTimestampOffset:!0});Ra(a,this.generateSegmentInfo_(b));this.isPendingTimestampOffset_=!1;this.updateTransmuxerAndRequestSegment_(a)}))}updateTransmuxerAndRequestSegment_(a){this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=
0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));const b=this.createSimplifiedSegmentObj_(a);var c=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex);const d=null!==this.mediaIndex,e=a.timeline!==this.currentTimeline_&&0<a.timeline;c=c||d&&e;this.logger_(`Requesting\n${gi(a.uri)}\n${hd(a)}`);b.map&&!b.map.bytes&&(this.logger_("going to request init segment."),
this.appendInitSegment_={video:!0,audio:!0});a.abortRequests=Kp({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:b,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),
isEndOfTimeline:c,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:h,level:n,stream:u})=>{this.logger_(`${hd(a)} logged from transmuxer stream ${u} as a ${n}: ${h}`)},triggerSegmentEventFn:({type:h,segment:n,keyInfo:u,trackInfo:t,timingInfo:A})=>{n={segmentInfo:Ic({segment:n})};u&&(n.keyInfo=u);t&&(n.trackInfo=t);A&&(n.timingInfo=A);this.trigger({type:h,
metadata:n})}})}trimBackBuffer_(a){a=this.seekable_();var b=this.currentTime_(),c=this.playlist_.targetDuration||10;let d=b-bb.BACK_BUFFER_LENGTH;a.length&&(d=Math.max(d,a.start(0)));a=Math.min(b-c,d);0<a&&this.remove(0,a)}createSimplifiedSegmentObj_(a){const b=a.segment;var c=a.part;c={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part,type:this.loaderType_,
start:a.startOfSegment,duration:a.duration,isEncrypted:a.segment.key||a.segment.map&&a.segment.map.key,isMediaInitialization:a.segment.map&&!a.segment.map.bytes};const d=a.playlist.segments[a.mediaIndex-1];d&&d.timeline===b.timeline&&(d.videoTimingInfo?c.baseStartTime=d.videoTimingInfo.transmuxedDecodeEnd:d.audioTimingInfo&&(c.baseStartTime=d.audioTimingInfo.transmuxedDecodeEnd));b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),c.key=this.segmentKey(b.key),c.key.iv=
a);b.map&&(c.map=this.initSegmentForMap(b.map));return c}saveTransferStats_(a){this.mediaRequests+=1;a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)}saveBandwidthRelatedStats_(a,b){this.pendingSegment_.byteLength=b.bytesReceived;a<Pe?this.logger_(`Ignoring segment's bandwidth because its duration of ${a}`+` is less than the min to record ${Pe}`):(this.trigger({type:"bandwidthupdated",metadata:{bandwidthInfo:{from:this.bandwidth,to:b.bandwidth}}}),this.bandwidth=
b.bandwidth,this.roundTrip=b.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");this.trigger("timeout")}segmentRequestFinished_(a,b,c){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));else if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId)if(a)this.pendingSegment_=null,this.state="READY",-102!==a.code&&(this.pause(),-101===
a.code?this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")));else{a=this.pendingSegment_;this.saveBandwidthRelatedStats_(a.duration,b.stats);a.endOfAllRequests=b.endOfAllRequests;if(c.gopInfo){b=this.gopBuffer_;c=c.gopInfo;if(c.length)if(this.safeAppend_)b=c.slice();else{var d=c[0].pts,e=0;for(e;e<b.length&&!(b[e].pts>=d);e++);b=b.slice(0,e).concat(c)}this.gopBuffer_=b}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(a)}}setTimeMapping_(a){a=
this.syncController_.mappingForTimeline(a);null!==a&&(this.timeMapping_=a)}updateMediaSecondsLoaded_(a){this.mediaSecondsLoaded="number"===typeof a.start&&"number"===typeof a.end?this.mediaSecondsLoaded+(a.end-a.start):this.mediaSecondsLoaded+a.duration}shouldUpdateTransmuxerTimestampOffset_(a){return null===a?!1:"main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset()?!0:!1}trueSegmentStart_({currentStart:a,playlist:b,
mediaIndex:c,firstVideoFrameTimeForData:d,currentVideoTimestampOffset:e,useVideoTimingInfo:h,videoTimingInfo:n,audioTimingInfo:u}){if("undefined"!==typeof a)return a;if(!h)return u.start;a=b.segments[c-1];return 0!==c&&a&&"undefined"!==typeof a.start&&a.end===d+e?n.start:d}waitForAppendsToComplete_(a){var b=this.getCurrentMediaInfo_(a);if(b){var {hasAudio:c,hasVideo:d,isMuxed:e}=b;b="main"===this.loaderType_&&d;var h=!this.audioDisabled_&&c&&!e;a.waitingOnAppends=0;a.hasAppendedData_?(b&&a.waitingOnAppends++,
h&&a.waitingOnAppends++,b&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),h&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a))):(a.timingInfo||"number"!==typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),this.checkAppendsDone_(a))}else this.error({message:"No starting media returned, likely due to an unsupported media format.",
playlistExclusionDuration:Infinity}),this.trigger("error")}checkAppendsDone_(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(a){var b=this.getCurrentMediaInfo_();return(a="main"===this.loaderType_&&b&&a?a.hasAudio||a.hasVideo?b.hasVideo&&!a.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":
!b.hasVideo&&a.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)?(this.error({message:a,playlistExclusionDuration:Infinity}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(a){if(null!==a.timestampOffset&&"number"===typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===
this.loaderType_){var b=!1;a.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a.segment.videoTimingInfo,audioTimingInfo:a.segment.audioTimingInfo,timingInfo:a.timingInfo});a.changedTimestampOffset=!0;a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0);a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0);
b&&this.trigger("timestampoffset")}}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:a,audioTimingInfo:b,timingInfo:c}){return this.useDtsForTimestampOffset_?a&&"number"===typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:b&&"number"===typeof b.transmuxedDecodeStart?b.transmuxedDecodeStart:c.start:c.start}updateTimingInfoEnd_(a){a.timingInfo=a.timingInfo||{};var b=this.getMediaInfo_();if(b="main"===this.loaderType_&&b&&b.hasVideo&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo)a.timingInfo.end=
"number"===typeof b.end?b.end:b.start+a.duration}handleAppendsDone_(){if(this.pendingSegment_){var a={segmentInfo:Ic({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:a})}if(this.pendingSegment_){a=this.pendingSegment_;a.part&&a.part.syncInfo?a.part.syncInfo.markAppended():a.segment.syncInfo&&a.segment.syncInfo.markAppended();this.updateTimingInfoEnd_(a);this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===
this.loaderType_});if("hls"!==this.sourceType_)var b=null;else{var c=Yp({audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo});if(c){var d=a.playlist.targetDuration;b=tl({segmentDuration:c,maxDuration:2*d});var e=tl({segmentDuration:c,maxDuration:d});c=`Segment with index ${a.mediaIndex} `+`from playlist ${a.playlist.id} `+`has a duration of ${c} `+`when the reported duration is ${a.duration} `+`and the target duration is ${d}. `+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";
b=b||e?{severity:b?"warn":"info",message:c}:null}else b=null}b&&("warn"===b.severity?R.log.warn(b.message):this.logger_(b.message));this.recordThroughput_(a);this.pendingSegment_=null;this.state="READY";if(a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${hd(a)}`);return}this.logger_(`Appended ${hd(a)}`);this.addSegmentMetadataCue_(a);this.fetchAtBuffer_=!0;this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,
from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline}));this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");e=a.segment;b=a.part;e=e.end&&this.currentTime_()-e.end>3*a.playlist.targetDuration;b=b&&b.end&&this.currentTime_()-b.end>3*a.playlist.partTargetDuration;e||b?(this.logger_(`bad ${e?"segment":"part"} ${hd(a)}`),this.resetEverything()):(null!==
this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}recordThroughput_(a){if(a.duration<Pe)this.logger_(`Ignoring segment's throughput because its duration of ${a.duration}`+` is less than the min to record ${Pe}`);
else{var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/c*8E3)-b)/++this.throughput.count}}addSegmentMetadataCue_(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if("number"===typeof c&&isFinite(c)&&"number"===typeof d&&isFinite(d)){Jd(c,d,this.segmentMetadataTrack_);var e=J.WebKitDataCue||J.VTTCue;a={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,programDateTime:b.programDateTime,bandwidth:a.playlist.attributes.BANDWIDTH,
resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d};b=JSON.stringify(a);c=new e(c,d,b);c.value=a;this.segmentMetadataTrack_.addCue(c)}}}}const ul=function(a){return"string"!==typeof a?a:a.replace(/./,b=>b.toUpperCase())},Zp=["video","audio"],Jg=(a,b)=>{const c=b[`${a}Buffer`];return c&&c.updating||b.queuePending[a]},id=(a,b)=>{if(0!==b.queue.length){var c=0,d=b.queue[c];if("mediaSource"===
d.type)b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),id("audio",b),id("video",b));else if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!Jg(a,b)){if(d.type!==a){a:{c=b.queue;for(d=0;d<c.length;d++){const e=c[d];if("mediaSource"===e.type){c=null;break a}if(e.type===a){c=d;break a}}c=null}if(null===c)return;d=b.queue[c]}b.queue.splice(c,1);b.queuePending[a]=d;d.action(a,b);d.doneFn||(b.queuePending[a]=null,id(a,b))}}},vl=(a,
b)=>{const c=b[`${a}Buffer`],d=ul(a);c&&(c.removeEventListener("updateend",b[`on${d}UpdateEnd_`]),c.removeEventListener("error",b[`on${d}Error_`]),b.codecs[a]=null,b[`${a}Buffer`]=null)},Wb=(a,b)=>a&&b&&-1!==Array.prototype.indexOf.call(a.sourceBuffers,b),Ab={appendBuffer:(a,b,c)=>(d,e)=>{const h=e[`${d}Buffer`];if(Wb(e.mediaSource,h)){e.logger_(`Appending segment ${b.mediaIndex}'s ${a.length} bytes to ${d}Buffer`);try{h.appendBuffer(a)}catch(n){e.logger_(`Error with code ${n.code} `+(22===n.code?
"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${b.mediaIndex} to ${d}Buffer`),e.queuePending[d]=null,c(n)}}},remove:(a,b)=>(c,d)=>{const e=d[`${c}Buffer`];if(Wb(d.mediaSource,e)){d.logger_(`Removing ${a} to ${b} from ${c}Buffer`);try{e.remove(a,b)}catch(h){d.logger_(`Remove ${a} to ${b} from ${c}Buffer failed`)}}},timestampOffset:a=>(b,c)=>{const d=c[`${b}Buffer`];Wb(c.mediaSource,d)&&(c.logger_(`Setting ${b}timestampOffset to ${a}`),d.timestampOffset=a)},callback:a=>(b,c)=>{a()},endOfStream:a=>
b=>{if("open"===b.mediaSource.readyState){b.logger_(`Calling mediaSource endOfStream(${a||""})`);try{b.mediaSource.endOfStream(a)}catch(c){R.log.warn("Failed to call media source endOfStream",c)}}},duration:a=>b=>{b.logger_(`Setting mediaSource duration to ${a}`);try{b.mediaSource.duration=a}catch(c){R.log.warn("Failed to set media source duration",c)}},abort:()=>(a,b)=>{if("open"===b.mediaSource.readyState){var c=b[`${a}Buffer`];if(Wb(b.mediaSource,c)){b.logger_(`calling abort on ${a}Buffer`);try{c.abort()}catch(d){R.log.warn(`Failed to abort on ${a}Buffer`,
d)}}}},addSourceBuffer:(a,b)=>c=>{const d=ul(a);var e=Rc(b);c.logger_(`Adding ${a}Buffer with codec ${b} to mediaSource`);e=c.mediaSource.addSourceBuffer(e);e.addEventListener("updateend",c[`on${d}UpdateEnd_`]);e.addEventListener("error",c[`on${d}Error_`]);c.codecs[a]=b;c[`${a}Buffer`]=e},removeSourceBuffer:a=>b=>{const c=b[`${a}Buffer`];vl(a,b);if(Wb(b.mediaSource,c)){b.logger_(`Removing ${a}Buffer with codec ${b.codecs[a]} from mediaSource`);try{b.mediaSource.removeSourceBuffer(c)}catch(d){R.log.warn(`Failed to removeSourceBuffer ${a}Buffer`,
d)}}},changeType:a=>(b,c)=>{const d=c[`${b}Buffer`],e=Rc(a);if(Wb(c.mediaSource,d)){var h=a.substring(0,a.indexOf(".")),n=c.codecs[b];if(n.substring(0,n.indexOf("."))!==h){h={codecsChangeInfo:{from:n,to:a}};c.trigger({type:"codecschange",metadata:h});c.logger_(`changing ${b}Buffer codec from ${n} to ${a}`);try{d.changeType(e),c.codecs[b]=a}catch(u){h.errorType=R.Error.StreamingCodecsChangeError,h.error=u,u.metadata=h,c.error_=u,c.trigger("error"),R.log.warn(`Failed to changeType on ${b}Buffer`,u)}}}}},
Bb=({type:a,sourceUpdater:b,action:c,doneFn:d,name:e})=>{b.queue.push({type:a,action:c,doneFn:d,name:e});id(a,b)},wl=(a,b)=>c=>{c=b[`${a}Buffered`]();if(0===c.length)c="Buffered Ranges are empty";else{var d="Buffered Ranges: \n";for(let e=0;e<c.length;e++){const h=c.start(e),n=c.end(e);d+=`${h} --\x3e ${n}. Duration (${n-h})\n`}c=d}b.logger_(`received "updateend" event for ${a} Source Buffer: `,c);b.queuePending[a]&&(c=b.queuePending[a].doneFn,b.queuePending[a]=null,c&&c(b[`${a}Error_`]));id(a,b)};
class xl extends R.EventTarget{constructor(a){super();this.mediaSource=a;this.sourceopenListener_=()=>id("mediaSource",this);this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_);this.logger_=Gb("SourceUpdater");this.videoTimestampOffset_=this.audioTimestampOffset_=0;this.queue=[];this.queuePending={audio:null,video:null};this.delayedAudioAppendQueue_=[];this.videoAppendQueued_=!1;this.codecs={};this.onVideoUpdateEnd_=wl("video",this);this.onAudioUpdateEnd_=wl("audio",this);this.onVideoError_=
b=>{this.videoError_=b};this.onAudioError_=b=>{this.audioError_=b};this.triggeredReady_=this.initializedEme_=this.createdSourceBuffers_=!1}initializedEme(){this.initializedEme_=!0;this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=
!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(a,b){Bb({type:"mediaSource",sourceUpdater:this,action:Ab.addSourceBuffer(a,b),name:"addSourceBuffer"})}abort(a){Bb({type:a,sourceUpdater:this,action:Ab.abort(a),name:"abort"})}removeSourceBuffer(a){this.canRemoveSourceBuffer()?Bb({type:"mediaSource",sourceUpdater:this,action:Ab.removeSourceBuffer(a),name:"removeSourceBuffer"}):
R.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!R.browser.IS_FIREFOX&&J.MediaSource&&J.MediaSource.prototype&&"function"===typeof J.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return J.SourceBuffer&&J.SourceBuffer.prototype&&"function"===typeof J.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(a,b){this.canChangeType()?Bb({type:a,sourceUpdater:this,action:Ab.changeType(b),name:"changeType"}):
R.log.error("changeType is not supported!")}addOrChangeSourceBuffers(a){if(!a||"object"!==typeof a||0===Object.keys(a).length)throw Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(b=>{const c=a[b];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(b,c);this.canChangeType()&&this.changeType(b,c)})}appendBuffer(a,b){const {segmentInfo:c,type:d,bytes:e}=a;this.processedAppend_=!0;"audio"===d&&this.videoBuffer&&!this.videoAppendQueued_?(this.delayedAudioAppendQueue_.push([a,
b]),this.logger_(`delayed audio append of ${e.length} until video append`)):(Bb({type:d,sourceUpdater:this,action:Ab.appendBuffer(e,c||{mediaIndex:-1},b),doneFn:b,name:"appendBuffer"}),"video"===d&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(a=this.delayedAudioAppendQueue_.slice(),this.logger_(`queuing delayed audio ${a.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,a.forEach(h=>{this.appendBuffer.apply(this,h)}))))}audioBuffered(){return Wb(this.mediaSource,
this.audioBuffer)?this.audioBuffer.buffered?this.audioBuffer.buffered:eb():eb()}videoBuffered(){return Wb(this.mediaSource,this.videoBuffer)?this.videoBuffer.buffered?this.videoBuffer.buffered:eb():eb()}buffered(){const a=Wb(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=Wb(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():Ho(this.audioBuffered(),this.videoBuffered())}setDuration(a,b=ec){Bb({type:"mediaSource",sourceUpdater:this,
action:Ab.duration(a),name:"duration",doneFn:b})}endOfStream(a=null,b=ec){"string"!==typeof a&&(a=void 0);Bb({type:"mediaSource",sourceUpdater:this,action:Ab.endOfStream(a),name:"endOfStream",doneFn:b})}removeAudio(a,b,c=ec){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Bb({type:"audio",sourceUpdater:this,action:Ab.remove(a,b),doneFn:c,name:"remove"}):c()}removeVideo(a,b,c=ec){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Bb({type:"video",sourceUpdater:this,action:Ab.remove(a,
b),doneFn:c,name:"remove"}):c()}updating(){return Jg("audio",this)||Jg("video",this)?!0:!1}audioTimestampOffset(a){"undefined"!==typeof a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(Bb({type:"audio",sourceUpdater:this,action:Ab.timestampOffset(a),name:"timestampOffset"}),this.audioTimestampOffset_=a);return this.audioTimestampOffset_}videoTimestampOffset(a){"undefined"!==typeof a&&this.videoBuffer&&this.videoTimestampOffset_!==a&&(Bb({type:"video",sourceUpdater:this,action:Ab.timestampOffset(a),
name:"timestampOffset"}),this.videoTimestampOffset_=a);return this.videoTimestampOffset_}audioQueueCallback(a){this.audioBuffer&&Bb({type:"audio",sourceUpdater:this,action:Ab.callback(a),name:"callback"})}videoQueueCallback(a){this.videoBuffer&&Bb({type:"video",sourceUpdater:this,action:Ab.callback(a),name:"callback"})}dispose(){this.trigger("dispose");Zp.forEach(a=>{this.abort(a);if(this.canRemoveSourceBuffer())this.removeSourceBuffer(a);else this[`${a}QueueCallback`](()=>vl(a,this))});this.videoAppendQueued_=
!1;this.delayedAudioAppendQueue_.length=0;this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);this.off()}}const $p=a=>{a=new Uint8Array(a);return Array.from(a).map(b=>b.toString(16).padStart(2,"0")).join("")},yl=new Uint8Array(["\n","\n"].map(a=>a.charCodeAt(0)));class aq extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class bq extends Ig{constructor(a,b={}){super(a,b);this.subtitlesTrack_=
this.mediaSource_=null;this.featuresNativeTextTracks_=a.featuresNativeTextTracks;this.loadVttJs=a.loadVttJs;this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return eb();const a=this.subtitlesTrack_.cues;return eb([[a[0].startTime,a[a.length-1].startTime]])}initSegmentForMap(a,b=!1){if(!a)return null;const c=De(a);let d=this.initSegments_[c];b&&!d&&a.bytes&&(b=new Uint8Array(yl.byteLength+
a.bytes.byteLength),b.set(a.bytes),b.set(yl,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}track(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}remove(a,
b){Jd(a,b,this.subtitlesTrack_)}fillBuffer_(){const a=this.chooseNextRequest_();a&&(null===this.syncController_.timestampOffsetForTimeline(a.timeline)?(this.syncController_.one("timestampoffset",()=>{this.state="READY";this.paused()||this.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(a))}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=
a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a}stopForError(a){this.error(a);this.state="READY";this.pause();this.trigger("error")}segmentRequestFinished_(a,b,c){if(this.subtitlesTrack_)if(this.saveTransferStats_(b.stats),this.pendingSegment_)if(a)-101===a.code&&this.handleTimeout_(),-102===a.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=
1,this.stopForError(a);else{var d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats);b.key&&this.segmentKey(b.key,!0);this.state="APPENDING";this.trigger("appending");var e=d.segment;e.map&&(e.map.bytes=b.map.bytes);d.bytes=b.bytes;if("function"!==typeof J.WebVTT&&"function"===typeof this.loadVttJs)this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(a,b,c),()=>this.stopForError({message:"Error loading vtt.js"}));else{e.requested=!0;try{this.parseVTTCues_(d)}catch(h){this.stopForError({message:h.message,
metadata:{errorType:R.Error.StreamingVttParserError,error:h}});return}this.updateTimeMapping_(d,this.syncController_.timelines[d.timeline],this.playlist_);d.timingInfo=d.cues.length?{start:d.cues[0].startTime,end:d.cues[d.cues.length-1].endTime}:{start:d.startOfSegment,end:d.startOfSegment+d.duration};d.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(d.byteLength=d.bytes.byteLength,this.mediaSecondsLoaded+=e.duration,d.cues.forEach(h=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?
new J.VTTCue(h.startTime,h.endTime,h.text):h)}),Up(this.subtitlesTrack_),this.handleAppendsDone_())}}else this.state="READY",this.mediaRequestsAborted+=1;else this.state="READY"}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(a){let b=!1;if("function"!==typeof J.WebVTT)throw new aq;if("function"===typeof J.TextDecoder)var c=new J.TextDecoder("utf8");else c=J.WebVTT.StringDecoder(),b=!0;c=new J.WebVTT.Parser(J,J.vttjs,c);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};c.oncue=a.cues.push.bind(a.cues);
c.ontimestampmap=e=>{a.timestampmap=e};c.onparsingerror=e=>{R.log.warn("Error encountered when parsing cues: "+e.message)};if(a.segment.map){var d=a.segment.map.bytes;b&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));c.parse(d)}d=a.bytes;b&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));c.parse(d);c.flush()}updateTimeMapping_(a,b,c){const d=a.segment;if(b)if(a.cues.length){var {MPEGTS:e,LOCAL:h}=a.timestampmap,n=e/Bc.ONE_SECOND_IN_TS-h+b.mapping;a.cues.forEach(u=>
{const t=u.endTime-u.startTime,A=this.handleRollover_(u.startTime+n,b.time);u.startTime=Math.max(A,0);u.endTime=Math.max(A+t,0)});c.syncInfo||(c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-d.duration)})}else d.empty=!0}handleRollover_(a,b){if(null===b)return a;a*=Bc.ONE_SECOND_IN_TS;b*=Bc.ONE_SECOND_IN_TS;let c;for(c=b<a?-8589934592:8589934592;4294967296<Math.abs(a-b);)a+=c;return a/Bc.ONE_SECOND_IN_TS}}const cq=function(a,
b,c=0){if(a.segments)for(let e=0;e<a.segments.length;e++){const h=a.segments[e];if(!d)a:{var d=c+h.duration/2;const n=b.cues;for(let u=0;u<n.length;u++){const t=n[u];if(d>=t.adStartTime&&d<=t.adEndTime){d=t;break a}}d=null}if(d){if("cueIn"in h){d.endTime=c;d.adEndTime=c;c+=h.duration;d=null;continue}if(c<d.endTime){c+=h.duration;continue}d.endTime+=h.duration}else if("cueOut"in h&&(d=new J.VTTCue(c,c+h.duration,h.cueOut),d.adStartTime=c,d.adEndTime=c+parseFloat(h.cueOut),b.addCue(d)),"cueOutCont"in
h){const [n,u]=h.cueOutCont.split("/").map(parseFloat);d=new J.VTTCue(c,c+h.duration,"");d.adStartTime=c-n;d.adEndTime=d.adStartTime+u;b.addCue(d)}c+=h.duration}};class zl{constructor({start:a,end:b,segmentIndex:c,partIndex:d=null,appended:e=!1}){this.start_=a;this.end_=b;this.segmentIndex_=c;this.partIndex_=d;this.appended_=e}isInRange(a){return a>=this.start&&a<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}
class dq{constructor(a,b=[]){this.segmentSyncInfo_=a;this.partsSyncInfo_=b}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return 0<this.partsSyncInfo_.length}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus();this.partsSyncInfo_.forEach(a=>a.resetAppendedStatus())}}class Al{constructor(){this.storage_=new Map;this.diagnostics_="";this.isReliable_=!1;this.start_=-Infinity;this.end_=Infinity}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(a=>
a.resetAppendStatus())}update(a,b){const {mediaSequence:c,segments:d}=a;if(this.isReliable_=this.isReliablePlaylist_(c,d))return this.updateStorage_(d,c,this.calculateBaseTime_(c,b))}getSyncInfoForTime(a){for(const {segmentSyncInfo:b,partsSyncInfo:c}of this.storage_.values())if(c.length)for(const d of c){if(d.isInRange(a))return d}else if(b.isInRange(a))return b;return null}getSyncInfoForMediaSequence(a){return this.storage_.get(a)}updateStorage_(a,b,c){const d=new Map;let e="\n",h=c,n=b;this.start_=
h;a.forEach((u,t)=>{const A=this.storage_.get(n),F=h,y=F+u.duration,C=!!(A&&A.segmentSyncInfo&&A.segmentSyncInfo.isAppended),L=new zl({start:F,end:y,appended:C,segmentIndex:t});u.syncInfo=L;let H=h;const B=(u.parts||[]).map((E,P)=>{const U=H,X=H+E.duration,M=!!(A&&A.partsSyncInfo&&A.partsSyncInfo[P]&&A.partsSyncInfo[P].isAppended),O=new zl({start:U,end:X,appended:M,segmentIndex:t,partIndex:P});H=X;e+=`Media Sequence: ${n}.${P} | Range: ${U} --\x3e ${X} | Appended: ${M}\n`;return E.syncInfo=O});d.set(n,
new dq(L,B));e+=`${gi(u.resolvedUri)} | Media Sequence: ${n} | Range: ${F} --\x3e ${y} | Appended: ${C}\n`;n++;h=y});this.end_=h;this.storage_=d;this.diagnostics_=e}calculateBaseTime_(a,b){return this.storage_.size?this.storage_.has(a)?this.storage_.get(a).segmentSyncInfo.start:b:0}isReliablePlaylist_(a,b){return void 0!==a&&null!==a&&Array.isArray(b)&&b.length}}class Bl extends Al{constructor(a){super();this.parent_=a}calculateBaseTime_(a,b){return this.storage_.size?super.calculateBaseTime_(a,b):
(a=this.parent_.getSyncInfoForMediaSequence(a))?a.segmentSyncInfo.start:0}}const Kg=[{name:"VOD",run:(a,b,c,d,e)=>Infinity!==c?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(a,b,c,d,e,h)=>{a=a.getMediaSequenceSync(h);return a&&a.isReliable?(e=a.getSyncInfoForTime(e))?{time:e.start,partIndex:e.partIndex,segmentIndex:e.segmentIndex}:null:null}},{name:"ProgramDateTime",run:(a,b,c,d,e)=>{if(!Object.keys(a.timelineToDatetimeMappings).length)return null;d=c=null;const h=lg(b);e=
e||0;for(let t=0;t<h.length;t++){const A=h[b.endList||0===e?t:h.length-(t+1)];var n=A.segment,u=a.timelineToDatetimeMappings[n.timeline];if(u&&n.dateTimeObject){u=n.dateTimeObject.getTime()/1E3+u;if(n.parts&&"number"===typeof A.partIndex)for(let F=0;F<A.partIndex;F++)u+=n.parts[F].duration;n=Math.abs(e-u);if(null!==d&&(0===n||d<n))break;d=n;c={time:u,segmentIndex:A.segmentIndex,partIndex:A.partIndex}}}return c}},{name:"Segment",run:(a,b,c,d,e)=>{c=a=null;e=e||0;const h=lg(b);for(let u=0;u<h.length;u++){const t=
h[b.endList||0===e?u:h.length-(u+1)];var n=t.segment;const A=t.part&&t.part.start||n&&n.start;if(n.timeline===d&&"undefined"!==typeof A){n=Math.abs(e-A);if(null!==c&&c<n)break;if(!a||null===c||c>=n)c=n,a={time:A,segmentIndex:t.segmentIndex,partIndex:t.partIndex}}}return a}},{name:"Discontinuity",run:(a,b,c,d,e)=>{c=null;e=e||0;if(b.discontinuityStarts&&b.discontinuityStarts.length){d=null;for(let h=0;h<b.discontinuityStarts.length;h++){const n=b.discontinuityStarts[h],u=a.discontinuities[b.discontinuitySequence+
h+1];if(u){const t=Math.abs(e-u.time);if(null!==d&&d<t)break;if(!c||null===d||d>=t)d=t,c={time:u.time,segmentIndex:n,partIndex:null}}}}return c}},{name:"Playlist",run:(a,b,c,d,e)=>b.syncInfo?{time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null}:null}];class eq extends R.EventTarget{constructor(a){super();this.timelines=[];this.discontinuities=[];this.timelineToDatetimeMappings={};a=new Al;const b=new Bl(a),c=new Bl(a);this.mediaSequenceStorage_={main:a,audio:b,
vtt:c};this.logger_=Gb("SyncController")}getMediaSequenceSync(a){return this.mediaSequenceStorage_[a]||null}getSyncPoint(a,b,c,d,e){if(Infinity!==b)return Kg.find(({name:h})=>"VOD"===h).run(this,a,b);b=this.runStrategies_(a,b,c,d,e);if(!b.length)return null;for(const h of b){const {syncPoint:n,strategy:u}=h,{segmentIndex:t,time:A}=n;if(!(0>t)&&(c=A,e=c+a.segments[t].duration,this.logger_(`Strategy: ${u}. Current time: ${d}. selected segment: ${t}. Time: [${c} -> ${e}]}`),d>=c&&d<e))return this.logger_("Found sync point with exact match: ",
n),n}return this.selectSyncPoint_(b,{key:"time",value:d})}getExpiredTime(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Ad({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:b.segmentIndex,endIndex:0}))}runStrategies_(a,b,c,d,e){const h=[];for(let n=0;n<Kg.length;n++){const u=Kg[n],t=u.run(this,a,b,c,d,e);
t&&(t.strategy=u.name,h.push({strategy:u.name,syncPoint:t}))}return h}selectSyncPoint_(a,b){let c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy;for(let h=1;h<a.length;h++){const n=Math.abs(a[h].syncPoint[b.key]-b.value);n<d&&(d=n,c=a[h].syncPoint,e=a[h].strategy)}this.logger_(`syncPoint for [${b.key}: ${b.value}] chosen with strategy`+` [${e}]: [time:${c.time},`+` segmentIndex:${c.segmentIndex}`+("number"===typeof c.partIndex?`,partIndex:${c.partIndex}`:"")+"]");return c}saveExpiredSegmentInfo(a,
b){var c=b.mediaSequence-a.mediaSequence;if(86400<c)R.log.warn(`Not saving expired segment info. Media sequence gap ${c} is too large.`);else for(--c;0<=c;c--){const d=a.segments[c];if(d&&"undefined"!==typeof d.start){b.syncInfo={mediaSequence:a.mediaSequence+c,time:d.start};this.logger_(`playlist refresh sync: [time:${b.syncInfo.time},`+` mediaSequence: ${b.syncInfo.mediaSequence}]`);this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(a){this.timelineToDatetimeMappings={};if(a.segments&&
a.segments.length&&a.segments[0].dateTimeObject){a=a.segments[0];const b=a.dateTimeObject.getTime()/1E3;this.timelineToDatetimeMappings[a.timeline]=-b}}saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:b}){const c=this.calculateSegmentTimeMapping_(a,a.timingInfo,b),d=a.segment;c&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:d.start}));a=d.dateTimeObject;d.discontinuity&&b&&a&&(this.timelineToDatetimeMappings[d.timeline]=
-(a.getTime()/1E3))}timestampOffsetForTimeline(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}mappingForTimeline(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}calculateSegmentTimeMapping_(a,b,c){const d=a.segment,e=a.part;let h=this.timelines[a.timeline];if("number"===typeof a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${a.timeline}: `+
`[time: ${h.time}] [mapping: ${h.mapping}]`)),a=a.startOfSegment,b=b.end+h.mapping;else if(h)a=b.start+h.mapping,b=b.end+h.mapping;else return!1;e&&(e.start=a,e.end=b);if(!d.start||a<d.start)d.start=a;d.end=b;return!0}saveDiscontinuitySyncInfo_(a){const b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(let e=0;e<b.discontinuityStarts.length;e++){var d=b.discontinuityStarts[e];const h=
b.discontinuitySequence+e+1,n=d-a.mediaIndex,u=Math.abs(n);if(!this.discontinuities[h]||this.discontinuities[h].accuracy>u)d=0>n?c.start-Ad({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:d}):c.end+Ad({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:d}),this.discontinuities[h]={time:d,accuracy:u}}}dispose(){this.trigger("dispose");this.off()}}class fq extends R.EventTarget{constructor(){super();this.pendingTimelineChanges_=
{};this.lastTimelineChanges_={}}clearPendingTimelineChange(a){this.pendingTimelineChanges_[a]=null;this.trigger("pendingtimelinechange")}pendingTimelineChange({type:a,from:b,to:c}){"number"===typeof b&&"number"===typeof c&&(this.pendingTimelineChanges_[a]={type:a,from:b,to:c},this.trigger("pendingtimelinechange"));return this.pendingTimelineChanges_[a]}lastTimelineChange({type:a,from:b,to:c}){"number"===typeof b&&"number"===typeof c&&(this.lastTimelineChanges_[a]={type:a,from:b,to:c},delete this.pendingTimelineChanges_[a],
this.trigger({type:"timelinechange",metadata:{timelineChangeInfo:{from:b,to:c}}}));return this.lastTimelineChanges_[a]}dispose(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()}}const gq=Jk(Kk(function(){var a=function(){function t(){this.listeners={}}var A=t.prototype;A.on=function(F,y){this.listeners[F]||(this.listeners[F]=[]);this.listeners[F].push(y)};A.off=function(F,y){if(!this.listeners[F])return!1;y=this.listeners[F].indexOf(y);this.listeners[F]=
this.listeners[F].slice(0);this.listeners[F].splice(y,1);return-1<y};A.trigger=function(F){var y=this.listeners[F];if(y)if(2===arguments.length)for(var C=y.length,L=0;L<C;++L)y[L].call(this,arguments[1]);else{C=Array.prototype.slice.call(arguments,1);L=y.length;for(var H=0;H<L;++H)y[H].apply(this,C)}};A.dispose=function(){this.listeners={}};A.pipe=function(F){this.on("data",function(y){F.push(y)})};return t}();let b=null;class c{constructor(t){if(!b){var A=[[[],[],[],[],[]],[[],[],[],[],[]]],F=A[0],
y=A[1],C=F[4],L=y[4],H,B,E;const U=[],X=[];let M;let O,S;for(H=0;256>H;H++)X[(U[H]=H<<1^283*(H>>7))^H]=H;for(B=E=0;!C[B];B^=M||1,E=X[E]||1){O=E^E<<1^E<<2^E<<3^E<<4;O=O>>8^O&255^99;C[B]=O;L[O]=B;var P=U[H=U[M=U[B]]];S=16843009*P^65537*H^257*M^16843008*B;P=257*U[O]^16843008*O;for(H=0;4>H;H++)F[H][B]=P=P<<24^P>>>8,y[H][O]=S=S<<24^S>>>8}for(H=0;5>H;H++)F[H]=F[H].slice(0),y[H]=y[H].slice(0);b=A}this._tables=[[b[0][0].slice(),b[0][1].slice(),b[0][2].slice(),b[0][3].slice(),b[0][4].slice()],[b[1][0].slice(),
b[1][1].slice(),b[1][2].slice(),b[1][3].slice(),b[1][4].slice()]];A=this._tables[0][4];F=this._tables[1];C=t.length;L=1;if(4!==C&&6!==C&&8!==C)throw Error("Invalid aes key size");B=t.slice(0);E=[];this._key=[B,E];for(t=C;t<4*C+28;t++){y=B[t-1];if(0===t%C||8===C&&4===t%C)y=A[y>>>24]<<24^A[y>>16&255]<<16^A[y>>8&255]<<8^A[y&255],0===t%C&&(y=y<<8^y>>>24^L<<24,L=L<<1^283*(L>>7));B[t]=B[t-C]^y}for(C=0;t;C++,t--)y=B[C&3?t:t-4],E[C]=4>=t||4>C?y:F[0][A[y>>>24]]^F[1][A[y>>16&255]]^F[2][A[y>>8&255]]^F[3][A[y&
255]]}decrypt(t,A,F,y,C,L){const H=this._key[1];t^=H[0];y^=H[1];F^=H[2];A^=H[3];let B,E;const P=H.length/4-2;let U,X=4;var M=this._tables[1];const O=M[0],S=M[1],aa=M[2],Z=M[3],ba=M[4];for(U=0;U<P;U++)M=O[t>>>24]^S[y>>16&255]^aa[F>>8&255]^Z[A&255]^H[X],B=O[y>>>24]^S[F>>16&255]^aa[A>>8&255]^Z[t&255]^H[X+1],E=O[F>>>24]^S[A>>16&255]^aa[t>>8&255]^Z[y&255]^H[X+2],A=O[A>>>24]^S[t>>16&255]^aa[y>>8&255]^Z[F&255]^H[X+3],X+=4,t=M,y=B,F=E;for(U=0;4>U;U++)C[(3&-U)+L]=ba[t>>>24]<<24^ba[y>>16&255]<<16^ba[F>>8&255]<<
8^ba[A&255]^H[X++],M=t,t=y,y=F,F=A,A=M}}class d extends a{constructor(){super(a);this.jobs=[];this.delay=1;this.timeout_=null}processJob_(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(t){this.jobs.push(t);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const e=function(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};class h{constructor(t,A,F,y){const C=h.STEP,L=new Int32Array(t.buffer),H=new Uint8Array(t.byteLength);
t=0;this.asyncStream_=new d;this.asyncStream_.push(this.decryptChunk_(L.subarray(t,t+C),A,F,H));for(t=C;t<L.length;t+=C)F=new Uint32Array([e(L[t-4]),e(L[t-3]),e(L[t-2]),e(L[t-1])]),this.asyncStream_.push(this.decryptChunk_(L.subarray(t,t+C),A,F,H));this.asyncStream_.push(function(){y(null,H.subarray(0,H.byteLength-H[H.byteLength-1]))})}static get STEP(){return 32E3}decryptChunk_(t,A,F,y){return function(){const C=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),L=new c(Array.prototype.slice.call(A)),
H=new Uint8Array(t.byteLength),B=new Int32Array(H.buffer);let E,P,U,X,M,O,S,aa,Z;E=F[0];P=F[1];U=F[2];X=F[3];for(Z=0;Z<C.length;Z+=4)M=e(C[Z]),O=e(C[Z+1]),S=e(C[Z+2]),aa=e(C[Z+3]),L.decrypt(M,O,S,aa,B,Z),B[Z]=e(B[Z]^E),B[Z+1]=e(B[Z+1]^P),B[Z+2]=e(B[Z+2]^U),B[Z+3]=e(B[Z+3]^X),E=M,P=O,U=S,X=aa;y.set(H,t.byteOffset)}}}var n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};n=("undefined"!==typeof window?
window:"undefined"!==typeof n?n:"undefined"!==typeof self?self:{}).BigInt||Number;[n("0x1"),n("0x100"),n("0x10000"),n("0x1000000"),n("0x100000000"),n("0x10000000000"),n("0x1000000000000"),n("0x100000000000000"),n("0x10000000000000000")];(function(){var t=new Uint16Array([65484]);t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return 255===t[0]?"big":204===t[0]?"little":"unknown"})();const u=function(t){const A={};Object.keys(t).forEach(F=>{const y=t[F];var C="function"===ArrayBuffer.isView?ArrayBuffer.isView(y):
y&&y.buffer instanceof ArrayBuffer;A[F]=C?{bytes:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength}:y});return A};self.onmessage=function(t){const A=t.data;t=new Uint8Array(A.encrypted.bytes,A.encrypted.byteOffset,A.encrypted.byteLength);const F=new Uint32Array(A.key.bytes,A.key.byteOffset,A.key.byteLength/4),y=new Uint32Array(A.iv.bytes,A.iv.byteOffset,A.iv.byteLength/4);new h(t,F,y,function(C,L){self.postMessage(u({source:A.source,decrypted:L}),[L.buffer])})}}));var hq=Ik(gq);const Cl=(a,
b)=>{a.abort();a.pause();b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},iq=(a,b)=>()=>{const {segmentLoaders:{[a]:c,main:d},mediaTypes:{[a]:e}}=b;var h=e.activeTrack();const n=e.getActiveGroup(),u=e.activePlaylistLoader,t=e.lastGroup_;n&&t&&n.id===t.id||(e.lastGroup_=n,e.lastTrack_=h,Cl(c,e),n&&!n.isMainPlaylist&&(n.playlistLoader?(c.resyncLoader(),h=n.playlistLoader,e.activePlaylistLoader=h,h.load()):u&&d.resetEverything()))},jq=(a,b)=>()=>{const {segmentLoaders:{[a]:c},
mediaTypes:{[a]:d}}=b;d.lastGroup_=null;c.abort();c.pause()},kq=(a,b)=>()=>{const {mainPlaylistLoader:c,segmentLoaders:{[a]:d,main:e},mediaTypes:{[a]:h}}=b;var n=h.activeTrack(),u=h.getActiveGroup(),t=h.activePlaylistLoader;const A=h.lastTrack_;if(!A||!n||A.id!==n.id)if(h.lastGroup_=u,h.lastTrack_=n,Cl(d,h),u)if(u.isMainPlaylist)n&&A&&n.id!==A.id&&(u=b.vhs.playlistController_,t=u.selectPlaylist(),u.media()!==t&&(h.logger_(`track change. Switching main audio from ${A.id} to ${n.id}`),c.pause(),e.resetEverything(),
u.fastQualityChange_(t)));else{if("AUDIO"===a){if(!u.playlistLoader){e.setAudio(!0);e.resetEverything();return}d.setAudio(!0);e.setAudio(!1)}t===u.playlistLoader?(n=u.playlistLoader,h.activePlaylistLoader=n,n.load()):(d.track&&d.track(n),d.resetEverything(),n=u.playlistLoader,h.activePlaylistLoader=n,n.load())}},Qe={AUDIO:(a,b)=>()=>{const {mediaTypes:{[a]:c},excludePlaylist:d}=b,e=c.activeTrack();var h=c.activeGroup();h=(h.filter(n=>n.default)[0]||h[0]).id;h=c.tracks[h];if(e===h)d({error:{message:"Problem encountered loading the default audio track."}});
else{R.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const n in c.tracks)c.tracks[n].enabled=c.tracks[n]===h;c.onTrackChanged()}},SUBTITLES:(a,b)=>()=>{const {mediaTypes:{[a]:c}}=b;R.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const d=c.activeTrack();d&&(d.mode="disabled");c.onTrackChanged()}},Dl={AUDIO:(a,b,c)=>{if(b){var {tech:d,requestOptions:e,segmentLoaders:{[a]:h}}=c;b.on("loadedmetadata",()=>{const n=
b.media();h.playlist(n,e);(!d.paused()||n.endList&&"none"!==d.preload())&&h.load()});b.on("loadedplaylist",()=>{h.playlist(b.media(),e);d.paused()||h.load()});b.on("error",Qe[a](a,c))}},SUBTITLES:(a,b,c)=>{const {tech:d,requestOptions:e,segmentLoaders:{[a]:h},mediaTypes:{[a]:n}}=c;b.on("loadedmetadata",()=>{const u=b.media();h.playlist(u,e);h.track(n.activeTrack());(!d.paused()||u.endList&&"none"!==d.preload())&&h.load()});b.on("loadedplaylist",()=>{h.playlist(b.media(),e);d.paused()||h.load()});
b.on("error",Qe[a](a,c))}},lq={AUDIO:(a,b)=>{const {vhs:c,sourceType:d,segmentLoaders:{[a]:e},requestOptions:h,main:{mediaGroups:n},mediaTypes:{[a]:{groups:u,tracks:t,logger_:A}},mainPlaylistLoader:F}=b,y=Bd(F.main);n[a]&&0!==Object.keys(n[a]).length||(n[a]={main:{default:{default:!0}}},y&&(n[a].main.default.playlists=F.main.playlists));for(const H in n[a]){u[H]||(u[H]=[]);for(const B in n[a][H]){var C=n[a][H][B],L=void 0;y?(A(`AUDIO group '${H}' label '${B}' is a main playlist`),C.isMainPlaylist=
!0,L=null):L="vhs-json"===d&&C.playlists?new ed(C.playlists[0],c,h):C.resolvedUri?new ed(C.resolvedUri,c,h):C.playlists&&"dash"===d?new tg(C.playlists[0],c,h,F):null;C=za({id:B,playlistLoader:L},C);Dl[a](a,C.playlistLoader,b);u[H].push(C);if("undefined"===typeof t[B]){L=R.AudioTrack;let E=C.default?"main":"alternative";C.characteristics&&0<=C.characteristics.indexOf("public.accessibility.describes-video")&&(E="main-desc");C=new L({id:B,kind:E,enabled:!1,language:C.language,default:C.default,label:B});
t[B]=C}}}e.on("error",Qe[a](a,b))},SUBTITLES:(a,b)=>{const {tech:c,vhs:d,sourceType:e,segmentLoaders:{[a]:h},requestOptions:n,main:{mediaGroups:u},mediaTypes:{[a]:{groups:t,tracks:A}},mainPlaylistLoader:F}=b;for(const C in u[a]){t[C]||(t[C]=[]);for(const L in u[a][C]){if(!d.options_.useForcedSubtitles&&u[a][C][L].forced)continue;var y=u[a][C][L];let H;if("hls"===e)H=new ed(y.resolvedUri,d,n);else if("dash"===e){if(!y.playlists.filter(B=>Infinity!==B.excludeUntil).length)return;H=new tg(y.playlists[0],
d,n,F)}else"vhs-json"===e&&(H=new ed(y.playlists?y.playlists[0]:y.resolvedUri,d,n));y=za({id:L,playlistLoader:H},y);Dl[a](a,y.playlistLoader,b);t[C].push(y);"undefined"===typeof A[L]&&(y=c.addRemoteTextTrack({id:L,kind:"subtitles",default:y.default&&y.autoselect,language:y.language,label:L},!1).track,A[L]=y)}}h.on("error",Qe[a](a,b))},"CLOSED-CAPTIONS":(a,b)=>{const {tech:c,main:{mediaGroups:d},mediaTypes:{[a]:{groups:e,tracks:h}}}=b;for(const n in d[a]){e[n]||(e[n]=[]);for(const u in d[a][n]){b=
d[a][n][u];if(!/^(?:CC|SERVICE)/.test(b.instreamId))continue;const t=c.options_.vhs&&c.options_.vhs.captionServices||{};let A={label:u,language:b.language,instreamId:b.instreamId,default:b.default&&b.autoselect};t[A.instreamId]&&(A=za(A,t[A.instreamId]));void 0===A.default&&delete A.default;e[n].push(za({id:u},b));"undefined"===typeof h[u]&&(b=c.addRemoteTextTrack({id:A.instreamId,kind:"captions",default:A.default,language:A.language,label:A.label},!1).track,h[u]=b)}}}},El=(a,b)=>{for(let c=0;c<a.length;c++)if(og(b,
a[c])||a[c].playlists&&El(a[c].playlists,b))return!0;return!1},mq=(a,b)=>c=>{const {mainPlaylistLoader:d,mediaTypes:{[a]:{groups:e}}}=b,h=d.media();if(!h)return null;let n=null;h.attributes[a]&&(n=e[h.attributes[a]]);const u=Object.keys(e);if(!n)if("AUDIO"===a&&1<u.length&&Bd(b.main))for(let t=0;t<u.length;t++){const A=e[u[t]];if(El(A,h)){n=A;break}}else e.main?n=e.main:1===u.length&&(n=e[u[0]]);return"undefined"===typeof c?n:null!==c&&n?n.filter(t=>t.id===c.id)[0]||null:null},nq={AUDIO:(a,b)=>()=>
{const {mediaTypes:{[a]:{tracks:c}}}=b;for(const d in c)if(c[d].enabled)return c[d];return null},SUBTITLES:(a,b)=>()=>{const {mediaTypes:{[a]:{tracks:c}}}=b;for(const d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}},oq=(a,{mediaTypes:b})=>()=>{const c=b[a].activeTrack();return c?b[a].activeGroup(c):null},pq=a=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(A=>{lq[A](A,a)});const {mediaTypes:b,mainPlaylistLoader:c,tech:d,vhs:e,segmentLoaders:{AUDIO:h,main:n}}=a;["AUDIO",
"SUBTITLES"].forEach(A=>{b[A].activeGroup=mq(A,a);b[A].activeTrack=nq[A](A,a);b[A].onGroupChanged=iq(A,a);b[A].onGroupChanging=jq(A,a);b[A].onTrackChanged=kq(A,a);b[A].getActiveGroup=oq(A,a)});var u=b.AUDIO.activeGroup();u&&(u=(u.filter(A=>A.default)[0]||u[0]).id,b.AUDIO.tracks[u].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged(),b.AUDIO.getActiveGroup().playlistLoader?(n.setAudio(!1),h.setAudio(!0)):n.setAudio(!0));c.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(A=>b[A].onGroupChanged())});
c.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(A=>b[A].onGroupChanging())});const t=()=>{b.AUDIO.onTrackChanged();d.trigger({type:"usage",name:"vhs-audio-change"})};d.audioTracks().addEventListener("change",t);d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged);e.on("dispose",()=>{d.audioTracks().removeEventListener("change",t);d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)});d.clearTracks("audio");for(const A in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[A])},
qq=()=>{const a={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(b=>{a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ec,activeTrack:ec,getActiveGroup:ec,onGroupChanged:ec,onTrackChanged:ec,lastTrack_:null,logger_:Gb(`MediaGroups[${b}]`)}});return a};class Fl{constructor(){this.priority_=[];this.pathwayClones_=new Map}set version(a){1===a&&(this.version_=a)}set ttl(a){this.ttl_=a||300}set reloadUri(a){a&&(this.reloadUri_=fb(this.reloadUri_,a))}set priority(a){a&&a.length&&(this.priority_=
a)}set pathwayClones(a){a&&a.length&&(this.pathwayClones_=new Map(a.map(b=>[b.ID,b])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class rq extends R.EventTarget{constructor(a,b){super();this.defaultPathway=this.currentPathway=null;this.queryBeforeStart=!1;this.availablePathways_=new Set;this.steeringManifest=new Fl;this.request_=this.ttlTimeout_=this.manifestType_=
this.proxyServerUrl_=null;this.currentPathwayClones=new Map;this.nextPathwayClones=new Map;this.excludedSteeringManifestURLs=new Set;this.logger_=Gb("Content Steering");this.xhr_=a;this.getBandwidth_=b}assignTagProperties(a,b){this.manifestType_=b.serverUri?"HLS":"DASH";const c=b.serverUri||b.serverURL;c?c.startsWith("data:")?this.decodeDataUriManifest_(c.substring(c.indexOf(",")+1)):(this.steeringManifest.reloadUri=fb(a,c),this.defaultPathway=b.pathwayId||b.defaultServiceLocation,this.queryBeforeStart=
b.queryBeforeStart,this.proxyServerUrl_=b.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")):(this.logger_(`steering manifest URL is ${c}, cannot request steering manifest.`),this.trigger("error"))}requestSteeringManifest(a){const b=this.steeringManifest.reloadUri;if(b){var c=a?b:this.getRequestURI(b);if(c){var d={contentSteeringInfo:{uri:c}};this.trigger({type:"contentsteeringloadstart",metadata:d});this.request_=this.xhr_({uri:c,requestType:"content-steering-manifest"},
(e,h)=>{if(e)410===h.status?(this.logger_(`manifest request 410 ${e}.`),this.logger_(`There will be no more content steering requests to ${c} this session.`),this.excludedSteeringManifestURLs.add(c)):429===h.status?(h=h.responseHeaders["retry-after"],this.logger_(`manifest request 429 ${e}.`),this.logger_(`content steering will retry in ${h} seconds.`),this.startTTLTimeout_(parseInt(h,10))):(this.logger_(`manifest failed to load ${e}.`),this.startTTLTimeout_());else{this.trigger({type:"contentsteeringloadcomplete",
metadata:d});try{var n=JSON.parse(this.request_.responseText)}catch(u){this.trigger({type:"error",metadata:{errorType:R.Error.StreamingContentSteeringParserError,error:u}})}this.assignSteeringProperties_(n);this.trigger({type:"contentsteeringparsed",metadata:{contentSteeringInfo:d.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}}});this.startTTLTimeout_()}})}else this.logger_("No valid content steering manifest URIs. Stopping content steering."),
this.trigger("error"),this.dispose()}}setProxyServerUrl_(a){a=new J.URL(a);const b=new J.URL(this.proxyServerUrl_);b.searchParams.set("url",encodeURI(a.toString()));return this.setSteeringParams_(b.toString())}decodeDataUriManifest_(a){a=JSON.parse(J.atob(a));this.assignSteeringProperties_(a)}setSteeringParams_(a){a=new J.URL(a);const b=this.getPathway(),c=this.getBandwidth_();b&&a.searchParams.set(`_${this.manifestType_}_pathway`,b);c&&a.searchParams.set(`_${this.manifestType_}_throughput`,c);return a.toString()}assignSteeringProperties_(a){this.steeringManifest.version=
a.VERSION;this.steeringManifest.version?(this.steeringManifest.ttl=a.TTL,this.steeringManifest.reloadUri=a["RELOAD-URI"],this.steeringManifest.priority=a["PATHWAY-PRIORITY"]||a["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=a["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose()),a=(b=>{for(const c of b)if(this.availablePathways_.has(c))return c;
return[...this.availablePathways_][0]})(this.steeringManifest.priority),this.currentPathway!==a&&(this.currentPathway=a,this.trigger("content-steering"))):(this.logger_(`manifest version is ${a.VERSION}, which is not supported.`),this.trigger("error"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(a){if(!a)return null;const b=c=>this.excludedSteeringManifestURLs.has(c);if(this.proxyServerUrl_){const c=this.setProxyServerUrl_(a);if(!b(c))return c}a=this.setSteeringParams_(a);
return b(a)?null:a}startTTLTimeout_(a=this.steeringManifest.ttl){this.ttlTimeout_=J.setTimeout(()=>{this.requestSteeringManifest()},1E3*a)}clearTTLTimeout_(){J.clearTimeout(this.ttlTimeout_);this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort();this.request_=null}dispose(){this.off("content-steering");this.off("error");this.abort();this.clearTTLTimeout_();this.request_=this.ttlTimeout_=this.manifestType_=this.proxyServerUrl_=this.queryBeforeStart=this.defaultPathway=this.currentPathway=
null;this.excludedSteeringManifestURLs=new Set;this.availablePathways_=new Set;this.steeringManifest=new Fl}addAvailablePathway(a){a&&this.availablePathways_.add(a)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(a){return this.availablePathways_.delete(a)}didDASHTagChange(a,b){return!b&&this.steeringManifest.reloadUri||b&&(fb(a,b.serverURL)!==this.steeringManifest.reloadUri||b.defaultServiceLocation!==this.defaultPathway||b.queryBeforeStart!==this.queryBeforeStart||b.proxyServerURL!==
this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}let ic;const sq="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred mediaAppends".split(" "),tq=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},uq=function({currentPlaylist:a,buffered:b,currentTime:c,nextPlaylist:d,bufferLowWaterLine:e,bufferHighWaterLine:h,duration:n,bufferBasedABR:u,log:t}){if(!d)return R.log.warn("We received no playlist to switch to. Please check your stream."),
!1;const A=`allowing switch ${a&&a.id||"null"} -> ${d.id}`;if(!a)return t(`${A} as current playlist is not set`),!0;if(d.id===a.id)return!1;const F=!!cd(b,c).length;if(!a.endList){if(!F&&"number"===typeof a.partTargetDuration)return t(`not ${A} as current playlist is live llhls, but currentTime isn't in buffered.`),!1;t(`${A} as current playlist is live`);return!0}b=jg(b,c);c=u?bb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:bb.MAX_BUFFER_LOW_WATER_LINE;if(n<c)return t(`${A} as duration < max low water line (${n} < ${c})`),
!0;d=d.attributes.BANDWIDTH;a=a.attributes.BANDWIDTH;if(d<a&&(!u||b<h))return e=`${A} as next bandwidth < current bandwidth (${d} < ${a})`,u&&(e+=` and forwardBuffer < bufferHighWaterLine (${b} < ${h})`),t(e),!0;if((!u||d>a)&&b>=e)return h=`${A} as forwardBuffer >= bufferLowWaterLine (${b} >= ${e})`,u&&(h+=` and next bandwidth > current bandwidth (${d} > ${a})`),t(h),!0;t(`not ${A} as no switching criteria met`);return!1};class vq extends R.EventTarget{constructor(a){super();const {src:b,withCredentials:c,
tech:d,bandwidth:e,externVhs:h,useCueTags:n,playlistExclusionDuration:u,enableLowInitialPlaylist:t,sourceType:A,cacheEncryptionKeys:F,bufferBasedABR:y,leastPixelDiffSelector:C,captionServices:L,experimentalUseMMS:H}=a;if(!b)throw Error("A non-empty playlist URL or JSON manifest string is required");var {maxPlaylistRetries:B}=a;if(null===B||"undefined"===typeof B)B=Infinity;ic=h;this.bufferBasedABR=!!y;this.leastPixelDiffSelector=!!C;this.withCredentials=c;this.tech_=d;this.vhs_=d.vhs;this.player_=
a.player_;this.sourceType_=A;this.useCueTags_=n;this.playlistExclusionDuration=u;this.maxPlaylistRetries=B;this.enableLowInitialPlaylist=t;this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType="");this.requestOptions_={withCredentials:c,maxPlaylistRetries:B,timeout:null};this.on("error",this.pauseLoading);this.mediaTypes_=qq();H&&J.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new J.ManagedMediaSource,
R.log("Using ManagedMediaSource")):J.MediaSource&&(this.mediaSource=new J.MediaSource);this.handleDurationChange_=this.handleDurationChange_.bind(this);this.handleSourceOpen_=this.handleSourceOpen_.bind(this);this.handleSourceEnded_=this.handleSourceEnded_.bind(this);this.mediaSource.addEventListener("durationchange",this.handleDurationChange_);this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_);this.seekable_=
eb();this.hasPlayed_=!1;this.syncController_=new eq(a);this.segmentMetadataTrack_=d.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;this.decrypter_=new hq;this.sourceUpdater_=new xl(this.mediaSource);this.inbandTextTracks_={};this.timelineChangeController_=new fq;this.keyStatusMap_=new Map;B={vhs:this.vhs_,parse708captions:a.parse708captions,useDtsForTimestampOffset:a.useDtsForTimestampOffset,captionServices:L,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),
seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:e,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:F,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:a.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};
this.mainPlaylistLoader_="dash"===this.sourceType_?new tg(b,this.vhs_,za(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new ed(b,this.vhs_,za(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)}));this.setupMainPlaylistLoaderListeners_();this.mainSegmentLoader_=new Ig(za(B,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),a);this.audioSegmentLoader_=new Ig(za(B,{loaderType:"audio"}),a);this.subtitleSegmentLoader_=
new bq(za(B,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((E,P)=>{function U(){d.off("vttjserror",X);E()}function X(){d.off("vttjsloaded",U);P()}d.one("vttjsloaded",U);d.one("vttjserror",X);d.addWebVttScript_()})}),a);this.contentSteeringController_=new rq(this.vhs_.xhr,()=>this.mainSegmentLoader_.bandwidth);this.setupSegmentLoaderListeners_();this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",
()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_()));sq.forEach(E=>{this[E+"_"]=tq.bind(this,E)});this.logger_=Gb("pc");this.triggeredFmp4Usage=!1;"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null;this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load();this.audioAppendsToLoadedData__=this.mainAppendsToLoadedData__=this.timeToLoadedData__=-1;a="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(a,
()=>{const E=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-E;this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends;this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return-1===a||-1===b?-1:a+b}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(a=
"abr"){const b=this.selectPlaylist();b&&this.shouldSwitchToMedia_(b)&&this.switchMedia_(b,a)}switchMedia_(a,b,c){var d=this.media();d=d&&(d.id||d.uri);const e=a&&(a.id||a.uri);d&&d!==e&&(this.logger_(`switch media ${d} -> ${e} from ${b}`),this.trigger({type:"renditionselected",metadata:{renditionInfo:{id:e,bandwidth:a.attributes.BANDWIDTH,resolution:a.attributes.RESOLUTION,codecs:a.attributes.CODECS},cause:b}}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${b}`}));this.mainPlaylistLoader_.media(a,
c)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{var b=this.mediaTypes_[a];b=b?b.activeGroup():null;const c=this.contentSteeringController_.getPathway();b&&c&&(b=(b.length?b[0].playlists:b.playlists).filter(d=>d.attributes.serviceLocation===c),b.length&&this.mediaTypes_[a].activePlaylistLoader.media(b[0]))})}startABRTimer_(){this.stopABRTimer_();this.abrTimer_=J.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||
(J.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const a=this.main(),b=a&&a.playlists||[];if(!a||!a.mediaGroups||!a.mediaGroups.AUDIO)return b;const c=a.mediaGroups.AUDIO;var d=Object.keys(c);let e;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)e=this.mediaTypes_.AUDIO.activeTrack();else{d=c.main||d.length&&c[d[0]];for(var h in d)if(d[h].default){e={label:h};break}}if(!e)return b;h=[];for(const n in c)if(c[n][e.label])if(d=c[n][e.label],d.playlists&&d.playlists.length)h.push.apply(h,
d.playlists);else if(d.uri)h.push(d);else if(a.playlists.length)for(d=0;d<a.playlists.length;d++){const u=a.playlists[d];u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===n&&h.push(u)}return h.length?h:b}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const a=this.mainPlaylistLoader_.media(),b=1500*a.targetDuration;ng(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b;a.endList&&"none"!==
this.tech_.preload()&&(this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.mainSegmentLoader_.load());pq({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)});this.triggerPresenceUsage_(this.main(),
a);this.setupFirstPlay();if(!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media())this.trigger("selectedinitialmedia");else this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})});this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let a=this.mainPlaylistLoader_.media();if(!a){this.attachContentSteeringListeners_();this.initContentSteeringController_();
this.excludeUnsupportedVariants_();let b;this.enableLowInitialPlaylist&&(b=this.selectInitialPlaylist());b||=this.selectPlaylist();if(!b||!this.shouldSwitchToMedia_(b))return;this.initialMedia_=b;this.switchMedia_(this.initialMedia_,"initial");if("vhs-json"!==this.sourceType_||!this.initialMedia_.segments)return;a=this.initialMedia_}this.handleUpdatedMediaPlaylist(a)});this.mainPlaylistLoader_.on("error",()=>{const a=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:a.playlist,
error:a})});this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort();this.mainSegmentLoader_.pause()});this.mainPlaylistLoader_.on("mediachange",()=>{const a=this.mainPlaylistLoader_.media(),b=1500*a.targetDuration;ng(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=b;"dash"===this.sourceType_&&this.mainPlaylistLoader_.load();this.mainSegmentLoader_.pause();this.mainSegmentLoader_.playlist(a,this.requestOptions_);
this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load();this.tech_.trigger({type:"mediachange",bubbles:!0})});this.mainPlaylistLoader_.on("playlistunchanged",()=>{const a=this.mainPlaylistLoader_.media();"playlist-unchanged"!==a.lastExcludeReason_&&this.stuckAtPlaylistEnd_(a)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))});this.mainPlaylistLoader_.on("renditiondisabled",
()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})});this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})});"manifestrequeststart manifestrequestcomplete manifestparsestart manifestparsecomplete playlistrequeststart playlistrequestcomplete playlistparsestart playlistparsecomplete renditiondisabled renditionenabled".split(" ").forEach(a=>{this.mainPlaylistLoader_.on(a,b=>{this.player_.trigger(Ra({},b))})})}handleUpdatedMediaPlaylist(a){this.useCueTags_&&
this.updateAdCues_(a);this.mainSegmentLoader_.pause();this.mainSegmentLoader_.playlist(a,this.requestOptions_);this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_();this.updateDuration(!a.endList);this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(a,b){a=a.mediaGroups||{};let c=!0;const d=Object.keys(a.AUDIO);for(const e in a.AUDIO)for(const h in a.AUDIO[e])a.AUDIO[e][h].uri||(c=!1);c&&this.tech_.trigger({type:"usage",
name:"vhs-demuxed"});Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"});ic.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"vhs-aes"});d.length&&1<Object.keys(a.AUDIO[d[0]]).length&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(a){const b=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,c=this.tech_.currentTime(),
d=this.bufferLowWaterLine(),e=this.bufferHighWaterLine(),h=this.tech_.buffered();return uq({buffered:h,currentTime:c,currentPlaylist:b,nextPlaylist:a,bufferLowWaterLine:d,bufferHighWaterLine:e,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate");this.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()});
if(!this.bufferBasedABR)this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")});this.mainSegmentLoader_.on("error",()=>{const b=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:b.playlist,error:b})});this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_;this.trigger("error")});this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",
name:"vhs-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_;this.trigger("error")});this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended");this.onEndOfStream()});this.timelineChangeController_.on("audioTimelineBehind",()=>{const b=this.audioSegmentLoader_.pendingSegment_;b&&b.segment&&b.segment.syncInfo&&this.tech_.setCurrentTime(b.segment.syncInfo.end+
.01)});this.mainSegmentLoader_.on("earlyabort",b=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const a=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const b=this.getCodecsOrExclude_();b&&this.sourceUpdater_.addOrChangeSourceBuffers(b)};this.mainSegmentLoader_.on("trackinfo",
a);this.audioSegmentLoader_.on("trackinfo",a);this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)});this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended");this.onEndOfStream()});"segmentselected segmentloadstart segmentloaded segmentkeyloadstart segmentkeyloadcomplete segmentdecryptionstart segmentdecryptioncomplete segmenttransmuxingstart segmenttransmuxingcomplete segmenttransmuxingtrackinfoavailable segmenttransmuxingtiminginfoavailable segmentappendstart appendsdone bandwidthupdated timelinechange codecschange".split(" ").forEach(b=>
{this.mainSegmentLoader_.on(b,c=>{this.player_.trigger(Ra({},c))});this.audioSegmentLoader_.on(b,c=>{this.player_.trigger(Ra({},c))});this.subtitleSegmentLoader_.on(b,c=>{this.player_.trigger(Ra({},c))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(a=
this.selectPlaylist()){a&&a===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(a,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1;this.mainSegmentLoader_.pause();this.mainSegmentLoader_.resetEverything(()=>{this.mainSegmentLoader_.load()})}play(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0);this.hasPlayed_&&
this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.tech_.setCurrentTime(a.end(a.length-1))}}setupFirstPlay(){var a=this.mainPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList||a.start){const b=this.seekable();if(!b.length)return!1;const c=b.end(0);let d=c;a.start&&(a=a.start.timeOffset,d=0>a?Math.max(c+a,b.start(0)):Math.min(c,a));this.trigger("firstplay");this.tech_.setCurrentTime(d)}this.hasPlayed_=
!0;this.load();return!0}handleSourceOpen_(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){const a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,b=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Infinity===Math.abs(b)?Number.MAX_VALUE:b}}}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let a=
this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const b=this.mainSegmentLoader_.getCurrentMediaInfo_();a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.duration());if(null===b)return!1;a=ic.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var c=this.tech_.buffered();
if(!c.length)return a-b<=Ub;c=c.end(c.length-1);return c-b<=Ub&&a-c<=Ub}excludePlaylist({playlistToExclude:a=this.mainPlaylistLoader_.media(),error:b={},playlistExclusionDuration:c}){a=a||this.mainPlaylistLoader_.media();c=c||b.playlistExclusionDuration||this.playlistExclusionDuration;if(a){a.playlistErrors_++;var d=this.mainPlaylistLoader_.main.playlists,e=d.filter(Ce);e=1===e.length&&e[0]===a;if(1===d.length&&Infinity!==c)return R.log.warn(`Problem encountered with playlist ${a.id}. `+"Trying again since it is the only playlist."),
this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(e);if(e){if(this.main().contentSteering){const n=this.pathwayAttribute_(a);e=1E3*this.contentSteeringController_.steeringManifest.ttl;this.contentSteeringController_.excludePathway(n);this.excludeThenChangePathway_();setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(n)},e);return}let h=!1;d.forEach(n=>{if(n!==a){var u=n.excludeUntil;"undefined"!==typeof u&&Infinity!==u&&(h=!0,delete n.excludeUntil)}});h&&(R.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),
this.tech_.trigger("retryplaylist"))}c=a.playlistErrors_>this.maxPlaylistRetries?Infinity:Date.now()+1E3*c;a.excludeUntil=c;b.reason&&(a.lastExcludeReason_=b.reason);this.tech_.trigger("excludeplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});if(c=this.selectPlaylist())return(b.internal?this.logger_:R.log.warn)(`${b.internal?"Internal problem":"Problem"} encountered with playlist ${a.id}.`+`${b.message?" "+b.message:""} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==
a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),b=c.targetDuration/2*1E3||5E3,b="number"===typeof c.lastRequest&&Date.now()-c.lastRequest<=b,this.switchMedia_(c,"exclude",e||b);this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error")}else this.error=b,"open"!==this.mediaSource.readyState?
this.trigger("error"):this.sourceUpdater_.endOfStream("network")}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_()}delegateLoaders_(a,b){const c=[],d="all"===a;(d||"main"===a)&&c.push(this.mainPlaylistLoader_);const e=[];(d||"audio"===a)&&e.push("AUDIO");if(d||"subtitle"===a)e.push("CLOSED-CAPTIONS"),e.push("SUBTITLES");e.forEach(h=>{(h=this.mediaTypes_[h]&&this.mediaTypes_[h].activePlaylistLoader)&&c.push(h)});["main","audio","subtitle"].forEach(h=>{const n=this[`${h}SegmentLoader_`];
!n||a!==h&&"all"!==a||c.push(n)});c.forEach(h=>b.forEach(n=>{if("function"===typeof h[n])h[n]()}))}setCurrentTime(a){const b=cd(this.tech_.buffered(),a);if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.media()||!this.mainPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;this.mainSegmentLoader_.pause();this.mainSegmentLoader_.resetEverything();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&
(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything());this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const a=this.mainPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:ic.Playlist.duration(a):Infinity:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let a;if(this.mainPlaylistLoader_){var b=this.mainPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var d=this.mainPlaylistLoader_.main,
e=ic.Playlist.seekable(b,c,ic.Playlist.liveEdgeDelay(d,b));if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=this.mediaTypes_.AUDIO.activePlaylistLoader.media();c=this.syncController_.getExpiredTime(b,this.duration());if(null===c)return;a=ic.Playlist.seekable(b,c,ic.Playlist.liveEdgeDelay(d,b));if(0===a.length)return}if(this.seekable_&&this.seekable_.length){var h=this.seekable_.end(0);var n=this.seekable_.start(0)}a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=
eb([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e;this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===h&&this.seekable_.start(0)===n||(this.logger_(`seekable updated [${hk(this.seekable_)}]`),this.trigger({type:"seekablerangeschanged",metadata:{seekableRanges:this.seekable_}}),this.tech_.trigger("seekablechanged"))}}}}}updateDuration(a){this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=
null);if("open"!==this.mediaSource.readyState)this.updateDuration_=this.updateDuration.bind(this,a),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);else if(a)a=this.seekable(),a.length&&(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));else{a=this.tech_.buffered();var b=ic.Playlist.duration(this.mainPlaylistLoader_.media());0<a.length&&(b=Math.max(b,a.end(a.length-1)));this.mediaSource.duration!==
b&&this.sourceUpdater_.setDuration(b)}}dispose(){this.trigger("dispose");this.decrypter_.terminate();this.mainPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();this.contentSteeringController_.dispose();this.keyStatusMap_.clear();this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);["AUDIO","SUBTITLES"].forEach(a=>{a=this.mediaTypes_[a].groups;for(const b in a)a[b].forEach(c=>{c.playlistLoader&&c.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();
this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||
this.initialMedia_}areMediaTypesKnown_(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;const b=!!this.mainSegmentLoader_.getCurrentMediaInfo_();a=a?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return b&&a?!0:!1}getCodecsOrExclude_(){const a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},b=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var c=Id(this.main(),b);const d={},e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;
a.main.hasVideo&&(d.video=c.video||a.main.videoCodec||"avc1.4d400d");a.main.isMuxed&&(d.video+=`,${c.audio||a.main.audioCodec||"mp4a.40.2"}`);if(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||e)d.audio=c.audio||a.main.audioCodec||a.audio.audioCodec||"mp4a.40.2",a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4;if(d.audio||d.video){var h={},n;["video","audio"].forEach(function(u){var t;if(t=d.hasOwnProperty(u))t=d[u],t=!(a[u].isFmp4?pd(t):tf(t));t&&(t=a[u].isFmp4?"browser":
"muxer",h[t]=h[t]||[],h[t].push(d[u]),"audio"===u&&(n=t))});if(e&&n&&b.attributes.AUDIO){const u=b.attributes.AUDIO;this.main().playlists.forEach(t=>{(t.attributes&&t.attributes.AUDIO)===u&&t!==b&&(t.excludeUntil=Infinity)});this.logger_(`excluding audio group ${u} as ${n} does not support codec(s): "${d.audio}"`)}if(Object.keys(h).length)c=Object.keys(h).reduce((u,t)=>{u&&(u+=", ");return u+=`${t} does not support codec(s): "${h[t].join(",")}"`},"")+".",this.excludePlaylist({playlistToExclude:b,
error:{internal:!0,message:c},playlistExclusionDuration:Infinity});else{if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];["video","audio"].forEach(t=>{const A=(Pb(this.sourceUpdater_.codecs[t]||"")[0]||{}).type,F=(Pb(d[t]||"")[0]||{}).type;A&&F&&A.toLowerCase()!==F.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[t]}" -> "${d[t]}"`)});if(u.length){this.excludePlaylist({playlistToExclude:b,error:{message:`Codec switching not supported: ${u.join(", ")}.`,
internal:!0},playlistExclusionDuration:Infinity});return}}return d}}else this.excludePlaylist({playlistToExclude:b,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:Infinity})}tryToCreateSourceBuffers_(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();a&&(this.sourceUpdater_.createSourceBuffers(a),a=[a.video,a.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(a))}}excludeUnsupportedVariants_(){const a=
this.main().playlists,b=[];Object.keys(a).forEach(c=>{c=a[c];if(-1===b.indexOf(c.id)){b.push(c.id);var d=Id(this.main,c),e=[];!d.audio||tf(d.audio)||pd(d.audio)||e.push(`audio codec ${d.audio}`);!d.video||tf(d.video)||pd(d.video)||e.push(`video codec ${d.video}`);d.text&&"stpp.ttml.im1t"===d.text&&e.push(`text codec ${d.text}`);e.length&&(c.excludeUntil=Infinity,this.logger_(`excluding ${c.id} for unsupported: ${e.join(", ")}`))}})}excludeIncompatibleVariants_(a){const b=[],c=this.main().playlists;
a=Me(Pb(a));const d=ol(a),e=a.video&&Pb(a.video)[0]||null,h=a.audio&&Pb(a.audio)[0]||null;Object.keys(c).forEach(n=>{n=c[n];if(-1===b.indexOf(n.id)&&Infinity!==n.excludeUntil){b.push(n.id);var u=[],t=Id(this.mainPlaylistLoader_.main,n),A=ol(t);if(t.audio||t.video)A!==d&&u.push(`codec count "${A}" !== "${d}"`),this.sourceUpdater_.canChangeType()||(A=t.video&&Pb(t.video)[0]||null,t=t.audio&&Pb(t.audio)[0]||null,A&&e&&A.type.toLowerCase()!==e.type.toLowerCase()&&u.push(`video codec "${A.type}" !== "${e.type}"`),
t&&h&&t.type.toLowerCase()!==h.type.toLowerCase()&&u.push(`audio codec "${t.type}" !== "${h.type}"`)),u.length&&(n.excludeUntil=Infinity,this.logger_(`excluding ${n.id}: ${u.join(" \x26\x26 ")}`))}})}updateAdCues_(a){let b=0;const c=this.seekable();c.length&&(b=c.start(0));cq(a,this.cueTagsTrack_,b)}goalBufferLength(){const a=this.tech_.currentTime(),b=bb.GOAL_BUFFER_LENGTH;return Math.min(b+a*bb.GOAL_BUFFER_LENGTH_RATE,Math.max(b,bb.MAX_GOAL_BUFFER_LENGTH))}bufferLowWaterLine(){const a=this.tech_.currentTime(),
b=bb.BUFFER_LOW_WATER_LINE,c=Math.max(b,bb.MAX_BUFFER_LOW_WATER_LINE),d=Math.max(b,bb.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*bb.BUFFER_LOW_WATER_LINE_RATE,this.bufferBasedABR?d:c)}bufferHighWaterLine(){return bb.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(a){sl(this.inbandTextTracks_,"com.apple.streaming",this.tech_);Tp({inbandTextTracks:this.inbandTextTracks_,dateRanges:a})}addMetadataToTextTrack(a,b,c){const d=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():
this.sourceUpdater_.audioTimestampOffset();sl(this.inbandTextTracks_,a,this.tech_);Qp({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:d,videoDuration:c})}pathwayAttribute_(a){return a.attributes["PATHWAY-ID"]||a.attributes.serviceLocation}initContentSteeringController_(){const a=this.main();if(a.contentSteering){for(const b of a.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(b));this.contentSteeringController_.assignTagProperties(a.uri,
a.contentSteering);if(this.contentSteeringController_.queryBeforeStart)this.contentSteeringController_.requestSteeringManifest(!0);else this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways();this.contentSteeringController_.dispose();this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this));
["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(a=>{this.contentSteeringController_.on(a,b=>{this.trigger(Ra({},b))})});if("dash"===this.sourceType_)this.mainPlaylistLoader_.on("loadedplaylist",()=>{const a=this.main(),b=()=>{const c=this.contentSteeringController_.getAvailablePathways(),d=[];for(const e of a.playlists){const h=e.attributes.serviceLocation;if(h&&(d.push(h),!c.has(h)))return!0}return!d.length&&c.size?!0:!1};(this.contentSteeringController_.didDASHTagChange(a.uri,
a.contentSteering)||b())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const a=this.contentSteeringController_.getPathway();if(a){this.handlePathwayClones_();var b=this.main().playlists,c=new Set,d=!1;Object.keys(b).forEach(e=>{e=b[e];var h=this.pathwayAttribute_(e);h=h&&a!==h;Infinity!==e.excludeUntil||"content-steering"!==e.lastExcludeReason_||h||(delete e.excludeUntil,delete e.lastExcludeReason_,d=!0);const n=!e.excludeUntil&&Infinity!==e.excludeUntil;!c.has(e.id)&&h&&n&&
(c.add(e.id),e.excludeUntil=Infinity,e.lastExcludeReason_="content-steering",this.logger_(`excluding ${e.id} for ${e.lastExcludeReason_}`))});"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(e=>{e=this.mediaTypes_[e];e.activePlaylistLoader&&(e=e.activePlaylistLoader.media_)&&e.attributes.serviceLocation!==a&&(d=!0)});d&&this.changeSegmentPathway_()}}handlePathwayClones_(){const a=this.main().playlists,b=this.contentSteeringController_.currentPathwayClones,
c=this.contentSteeringController_.nextPathwayClones;if(b&&b.size||c&&c.size){for(const [d,e]of b.entries())c.get(d)||(this.mainPlaylistLoader_.updateOrDeleteClone(e),this.contentSteeringController_.excludePathway(d));for(const [d,e]of c.entries()){const h=b.get(d);h?this.equalPathwayClones_(h,e)||(this.mainPlaylistLoader_.updateOrDeleteClone(e,!0),this.contentSteeringController_.addAvailablePathway(d)):(a.filter(n=>n.attributes["PATHWAY-ID"]===e["BASE-ID"]).forEach(n=>{this.mainPlaylistLoader_.addClonePathway(e,
n)}),this.contentSteeringController_.addAvailablePathway(d))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...c])))}}equalPathwayClones_(a,b){if(a["BASE-ID"]!==b["BASE-ID"]||a.ID!==b.ID||a["URI-REPLACEMENT"].HOST!==b["URI-REPLACEMENT"].HOST)return!1;a=a["URI-REPLACEMENT"].PARAMS;b=b["URI-REPLACEMENT"].PARAMS;for(const c in a)if(a[c]!==b[c])return!1;for(const c in b)if(a[c]!==b[c])return!1;return!0}changeSegmentPathway_(){const a=this.selectPlaylist();this.pauseLoading();
"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_();this.switchMedia_(a,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.main){var a=0;this.mainPlaylistLoader_.main.playlists.forEach(b=>{const c=this.mainPlaylistLoader_.getKeyIdSet(b);c&&c.size&&c.forEach(d=>{const e=this.keyStatusMap_.has(d)&&"usable"===this.keyStatusMap_.get(d),h="non-usable"===b.lastExcludeReason_&&Infinity===b.excludeUntil;
e?e&&h&&(delete b.excludeUntil,delete b.lastExcludeReason_,this.logger_(`enabling playlist ${b.id} because key ID ${d} is ${"usable"}`)):(Infinity!==b.excludeUntil&&"non-usable"!==b.lastExcludeReason_&&(b.excludeUntil=Infinity,b.lastExcludeReason_="non-usable",this.logger_(`excluding playlist ${b.id} because the key ID ${d} doesn't exist in the keyStatusMap or is not ${"usable"}`)),a++)})});a>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(b=>{const c=
Infinity===b.excludeUntil&&"non-usable"===b.lastExcludeReason_;b&&b.attributes&&b.attributes.RESOLUTION&&720>b.attributes.RESOLUTION.height&&c&&(delete b.excludeUntil,R.log.warn(`enabling non-HD playlist ${b.id} because all playlists were excluded due to ${"non-usable"} key IDs`))})}}addKeyStatus_(a,b){a=("string"===typeof a?a:$p(a)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${b}' with key ID ${a} added to the keyStatusMap`);this.keyStatusMap_.set(a,b)}updatePlaylistByKeyStatus(a,b){this.addKeyStatus_(a,
b);this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_();this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this));this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_();this.fastQualityChange_()}}const wq=(a,b,c)=>d=>{const e=a.main.playlists[b],h=mg(e),n=Ce(e);if("undefined"===typeof d)return n;d?delete e.disabled:
e.disabled=!0;const u={renditionInfo:{id:b,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:"fast-quality"};d===n||h||(c(e),d?a.trigger({type:"renditionenabled",metadata:u}):a.trigger({type:"renditiondisabled",metadata:u}));return d};class xq{constructor(a,b,c){const {playlistController_:d}=a,e=d.fastQualityChange_.bind(d);if(b.attributes){const h=b.attributes.RESOLUTION;this.width=h&&h.width;this.height=h&&h.height;this.bandwidth=b.attributes.BANDWIDTH;
this.frameRate=b.attributes["FRAME-RATE"]}this.codecs=Id(d.main(),b);this.playlist=b;this.id=c;this.enabled=wq(a.playlists,b.id,e)}}const yq=function(a){a.representations=()=>{var b=a.playlistController_.main();return(b=Bd(b)?a.playlistController_.getAudioTrackPlaylists_():b.playlists)?b.filter(c=>!mg(c)).map((c,d)=>new xq(a,c,c.id)):[]}},Gl=["seeking","seeked","pause","playing","error"];class zq extends R.EventTarget{constructor(a){super();this.playlistController_=a.playlistController;this.tech_=
a.tech;this.seekable=a.seekable;this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta;this.media=a.media;this.playedRanges_=[];this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.lastRecordedTime=null;this.logger_=Gb("PlaybackWatcher");this.logger_("initialize");const b=()=>this.monitorCurrentTime_(),c=()=>this.monitorCurrentTime_(),d=()=>this.techWaiting_(),e=()=>this.resetTimeUpdate_(),h=this.playlistController_,n=
["main","subtitle","audio"],u={};n.forEach(A=>{u[A]={reset:()=>this.resetSegmentDownloads_(A),updateend:()=>this.checkSegmentDownloads_(A)};h[`${A}SegmentLoader_`].on("appendsdone",u[A].updateend);h[`${A}SegmentLoader_`].on("playlistupdate",u[A].reset);this.tech_.on(["seeked","seeking"],u[A].reset)});const t=A=>{["main","audio"].forEach(F=>{h[`${F}SegmentLoader_`][A]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=
this.tech_.currentTime(),t("off"))};this.clearSeekingAppendCheck_=()=>t("off");this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_();t("on")};this.tech_.on("seeked",this.clearSeekingAppendCheck_);this.tech_.on("seeking",this.watchForBadSeeking_);this.tech_.on("waiting",d);this.tech_.on(Gl,e);this.tech_.on("canplay",c);this.tech_.one("play",b);this.dispose=()=>{this.clearSeekingAppendCheck_();this.logger_("dispose");this.tech_.off("waiting",d);this.tech_.off(Gl,e);this.tech_.off("canplay",
c);this.tech_.off("play",b);this.tech_.off("seeking",this.watchForBadSeeking_);this.tech_.off("seeked",this.clearSeekingAppendCheck_);n.forEach(A=>{h[`${A}SegmentLoader_`].off("appendsdone",u[A].updateend);h[`${A}SegmentLoader_`].off("playlistupdate",u[A].reset);this.tech_.off(["seeked","seeking"],u[A].reset)});this.checkCurrentTimeTimeout_&&J.clearTimeout(this.checkCurrentTimeTimeout_);this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&J.clearTimeout(this.checkCurrentTimeTimeout_);
this.checkCurrentTimeTimeout_=J.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(a){const b=this.playlistController_[`${a}SegmentLoader_`];0<this[`${a}StalledDownloads_`]&&this.logger_(`resetting possible stalled download count for ${a} loader`);this[`${a}StalledDownloads_`]=0;this[`${a}Buffered_`]=b.buffered_()}checkSegmentDownloads_(a){const b=this.playlistController_,c=b[`${a}SegmentLoader_`],d=c.buffered_(),e=Jo(this[`${a}Buffered_`],d);this[`${a}Buffered_`]=d;e?(b.trigger({type:"bufferedrangeschanged",
metadata:{bufferedRanges:d}}),this.resetSegmentDownloads_(a)):(this[`${a}StalledDownloads_`]++,this.logger_(`found #${this[`${a}StalledDownloads_`]} ${a} appends that did not increase buffer (possible stalled download)`,{playlistId:c.playlist_&&c.playlist_.id,buffered:Ec(d)}),10>this[`${a}StalledDownloads_`]||(this.logger_(`${a} loader stalled download exclusion`),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:`vhs-${a}-download-exclusion`}),"subtitle"!==a&&b.excludePlaylist({error:{message:`Excessive ${a} segment downloading detected.`},
playlistExclusionDuration:Infinity})))}checkCurrentTime_(){if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();if(this.lastRecordedTime===a&&(!b.length||a+Ub>=b.end(b.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.playedRanges_.push(eb([this.lastRecordedTime,a])),this.playlistController_.trigger({type:"playedrangeschanged",
metadata:{playedRanges:this.playedRanges_}}),this.consecutiveUpdates=0,this.lastRecordedTime=a)}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var a=this.seekable();const b=this.tech_.currentTime();var c;this.afterSeekableWindow_(a,b,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(c=a.end(a.length-1));this.beforeSeekableWindow_(a,b)&&(c=a.start(0),c+=c===a.end(0)?0:Ub);if("undefined"!==typeof c)return this.logger_(`Trying to seek outside of seekable at time ${b} with `+
`seekable range ${hk(a)}. Seeking to `+`${c}.`),this.tech_.setCurrentTime(c),!0;var d=this.playlistController_.sourceUpdater_;a=this.tech_.buffered();c=d.audioBuffer?d.audioBuffered():null;var e=d.videoBuffer?d.videoBuffered():null;d=this.media();d=d.partTargetDuration?d.partTargetDuration:2*(d.targetDuration-Tb);c=[c,e];for(e=0;e<c.length;e++)if(c[e]&&jg(c[e],b)<d)return!1;a=Be(a,b);if(0===a.length)return!1;c=a.start(0)+Ub;this.logger_(`Buffered region starts (${a.start(0)}) `+` just beyond seek point (${b}). Seeking to ${c}.`);
this.tech_.setCurrentTime(c);return!0}waiting_(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered();b=cd(b,a);b.length&&a+3<=b.end(0)&&(this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.logger_(`Stopped at ${a} while inside a buffered region `+`[${b.start(0)} -> ${b.end(0)}]. Attempting to resume `+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}))}}techWaiting_(){var a=this.seekable();const b=this.tech_.currentTime();
if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(a,b))return a=a.end(a.length-1),this.logger_(`Fell out of live window at time ${b}. Seeking to `+`live point (seekable end) ${a}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0;a=this.tech_.vhs.playlistController_.sourceUpdater_;const c=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:b}))return this.resetTimeUpdate_(),
this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;a=Be(c,b);return 0<a.length?(this.logger_(`Stopped at ${b} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(b),!0):!1}afterSeekableWindow_(a,b,c,d=!1){if(!a.length)return!1;let e=a.end(a.length-1)+Ub;const h="number"===typeof c.partTargetDuration;c.endList||!h&&!d||(e=a.end(a.length-1)+3*c.targetDuration);return b>e?!0:!1}beforeSeekableWindow_(a,b){return a.length&&0<a.start(0)&&b<
a.start(0)-this.liveRangeSafeTimeDelta?!0:!1}videoUnderflow_({videoBuffered:a,audioBuffered:b,currentTime:c}){if(a){var d;if(a.length&&b.length){const e=cd(a,c-3);a=cd(a,c);b=cd(b,c);b.length&&!a.length&&e.length&&(d={start:e.end(0),end:b.end(0)})}else Be(a,c).length||(d=this.gapFromVideoUnderflow_(a,c));return d?(this.logger_(`Encountered a gap in video from ${d.start} to ${d.end}. `+`Seeking to current time ${c}`),!0):!1}}skipTheGap_(a){var b=this.tech_.buffered();const c=this.tech_.currentTime();
b=Be(b,c);this.resetTimeUpdate_();0!==b.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",b.start(0)),this.tech_.setCurrentTime(b.start(0)+Tb),a={gapInfo:{from:c,to:b.start(0)}},this.playlistController_.trigger({type:"gapjumped",metadata:a}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(a,b){if(2>a.length)a=eb();else{var c=[];for(var d=1;d<a.length;d++){var e=a.end(d-1);const h=a.start(d);c.push([e,h])}a=eb(c)}for(c=
0;c<a.length;c++)if(d=a.start(c),e=a.end(c),4>b-d&&2<b-d)return{start:d,end:e};return null}}const Aq={errorInterval:30,getSource(a){const b=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return a(b)}},Hl=function(a,b){let c=0,d=0;const e=za(Aq,b);a.ready(()=>{a.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const h=function(){d&&a.currentTime(d)},n=function(A){null!==A&&void 0!==A&&(d=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",
h),a.src(A),a.trigger({type:"usage",name:"vhs-error-reload"}),a.play())},u=function(){if(Date.now()-c<1E3*e.errorInterval)a.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(e.getSource&&"function"===typeof e.getSource)return c=Date.now(),e.getSource.call(a,n);R.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},t=function(){a.off("loadedmetadata",h);a.off("error",u);a.off("dispose",t)};a.on("error",u);a.on("dispose",t);a.reloadSourceOnError=function(A){t();
Hl(a,A)}},Bq=function(a){Hl(this,a)},Ma={PlaylistLoader:ed,Playlist:ub,utils:Wo,STANDARD_PLAYLIST_SELECTOR:rl,INITIAL_PLAYLIST_SELECTOR:function(){const a=this.playlists.main.playlists.filter(ub.isEnabled);gd(a,(b,c)=>Gg(b,c));return a.filter(b=>!!Id(this.playlists.main,b).video)[0]||null},lastBandwidthSelector:rl,movingAverageBandwidthSelector:function(a){let b=-1,c=-1;if(0>a||1<a)throw Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let d=this.useDevicePixelRatio?
J.devicePixelRatio||1:1;isNaN(this.customPixelRatio)||(d=this.customPixelRatio);0>b&&(c=b=this.systemBandwidth);0<this.systemBandwidth&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth);return ql(this.playlists.main,b,parseInt(Oe(this.tech_.el(),"width"),10)*d,parseInt(Oe(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Gg,comparePlaylistResolution:function(a,b){let c,d;a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width);c=c||J.Number.MAX_VALUE;b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width);d=d||J.Number.MAX_VALUE;return c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},xhr:Ak()};Object.keys(bb).forEach(a=>{Object.defineProperty(Ma,a,{get(){R.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`);return bb[a]},set(b){R.log.warn(`using Vhs.${a} is UNSAFE be sure you know what you are doing`);
"number"!==typeof b||0>b?R.log.warn(`value of Vhs.${a} must be greater than or equal to 0`):bb[a]=b}})});const Il=function(a,b){b=b.media();let c=-1;for(let d=0;d<a.length;d++)if(a[d].id===b.id){c=d;break}a.selectedIndex_=c;a.trigger({selectedIndex:c,type:"change"})},Cq=function(a,b){b.representations().forEach(c=>{a.addQualityLevel(c)});Il(a,b.playlists)};Ma.canPlaySource=function(){return R.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Dq=(a,b)=>a.reduce((c,
d)=>{if(!d.contentProtection)return c;const e=b.reduce((h,n)=>{const u=d.contentProtection[n];u&&u.pssh&&(h[n]={pssh:u.pssh});return h},{});Object.keys(e).length&&c.push(e);return c},[]),Eq=({player:a,sourceKeySystems:b,audioMedia:c,mainPlaylists:d})=>{if(!a.eme.initializeMediaKeys)return Promise.resolve();c=c?d.concat([c]):d;const e=[],h=[];Dq(c,Object.keys(b)).forEach(n=>{h.push(new Promise((u,t)=>{a.tech_.one("keysessioncreated",u)}));e.push(new Promise((u,t)=>{a.eme.initializeMediaKeys({keySystems:n},
A=>{A?t(A):u()})}))});return Promise.race([Promise.all(e),Promise.race(h)])},Fq=({player:a,sourceKeySystems:b,media:c,audioMedia:d})=>{if(b){var e={};c&&c.attributes&&c.attributes.CODECS&&(e=Me(Pb(c.attributes.CODECS)));d&&d.attributes&&d.attributes.CODECS&&(e.audio=d.attributes.CODECS);d=Rc(e.video);e=Rc(e.audio);var h={};for(const n in b)h[n]={},e&&(h[n].audioContentType=e),d&&(h[n].videoContentType=d),c.contentProtection&&c.contentProtection[n]&&c.contentProtection[n].pssh&&(h[n].pssh=c.contentProtection[n].pssh),
"string"===typeof b[n]&&(h[n].url=b[n]);b=za(b,h)}return b?(a.currentSource().keySystems=b)&&!a.eme?(R.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0:!1},Jl=()=>{if(!J.localStorage)return null;const a=J.localStorage.getItem("videojs-vhs");if(!a)return null;try{return JSON.parse(a)}catch(b){return null}},Gq=a=>0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a;Ma.supportsNativeHls=function(){if(!ca||!ca.createElement)return!1;
const a=ca.createElement("video");return R.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(b){return/maybe|probably/i.test(a.canPlayType(b))}):!1}();var Hq=ca&&ca.createElement&&R.getTech("Html5").isSupported()?/maybe|probably/i.test(ca.createElement("video").canPlayType("application/dash+xml")):!1;Ma.supportsNativeDash=Hq;Ma.supportsTypeNatively=a=>"hls"===
a?Ma.supportsNativeHls:"dash"===a?Ma.supportsNativeDash:!1;Ma.isSupported=function(){return R.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ma.xhr.onRequest=function(a){var b=Ma.xhr;b._requestCallbackSet||(b._requestCallbackSet=new Set);b._requestCallbackSet.add(a)};Ma.xhr.onResponse=function(a){var b=Ma.xhr;b._responseCallbackSet||(b._responseCallbackSet=new Set);b._responseCallbackSet.add(a)};Ma.xhr.offRequest=function(a){var b=Ma.xhr;b._requestCallbackSet&&
(b._requestCallbackSet.delete(a),b._requestCallbackSet.size||delete b._requestCallbackSet)};Ma.xhr.offResponse=function(a){var b=Ma.xhr;b._responseCallbackSet&&(b._responseCallbackSet.delete(a),b._responseCallbackSet.size||delete b._responseCallbackSet)};const Iq=R.getComponent("Component");class Kl extends Iq{constructor(a,b,c){super(b,c.vhs);"number"===typeof c.initialBandwidth&&(this.options_.bandwidth=c.initialBandwidth);this.logger_=Gb("VhsHandler");b.options_&&b.options_.playerId&&(this.player_=
R.getPlayer(b.options_.playerId));this.tech_=b;this.source_=a;this.stats={};this.ignoreNextSeekingEvent_=!1;this.setOptions_();if(this.options_.overrideNative&&b.overrideNativeAudioTracks&&b.overrideNativeVideoTracks)b.overrideNativeAudioTracks(!0),b.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(b.featuresNativeVideoTracks||b.featuresNativeAudioTracks))throw Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(ca,["fullscreenchange","webkitfullscreenchange",
"mozfullscreenchange","MSFullscreenChange"],d=>{(d=ca.fullscreenElement||ca.webkitFullscreenElement||ca.mozFullScreenElement||ca.msFullscreenElement)&&d.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()});this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())});this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()});
this.on(this.tech_,"play",this.play)}setOptions_(a={}){this.options_=za(this.options_,a);this.options_.withCredentials=this.options_.withCredentials||!1;this.options_.limitRenditionByPlayerDimensions=!1===this.options_.limitRenditionByPlayerDimensions?!1:!0;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1;this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||
!1;this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1;this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1;this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1;this.options_.llhls=!1===this.options_.llhls?!1:!0;this.options_.bufferBasedABR=
this.options_.bufferBasedABR||!1;"number"!==typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60);"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((a=Jl())&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"})));"number"!==
typeof this.options_.bandwidth&&(this.options_.bandwidth=bb.INITIAL_BANDWIDTH);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===bb.INITIAL_BANDWIDTH;"withCredentials useDevicePixelRatio customPixelRatio limitRenditionByPlayerDimensions bandwidth customTagParsers customTagMappers cacheEncryptionKeys playlistSelector initialPlaylistSelector bufferBasedABR liveRangeSafeTimeDelta llhls useForcedSubtitles useNetworkInformationApi useDtsForTimestampOffset exactManifestTimings leastPixelDiffSelector".split(" ").forEach(b=>
{"undefined"!==typeof this.source_[b]&&(this.options_[b]=this.source_[b])});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio;a=this.options_.customPixelRatio;"number"===typeof a&&0<=a&&(this.customPixelRatio=a)}setOptions(a={}){this.setOptions_(a)}src(a,b){a&&(this.setOptions_(),this.options_.src=Gq(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ma,this.options_.sourceType=pi(b),
this.options_.seekTo=c=>{this.tech_.setCurrentTime(c)},this.options_.player_=this.player_,this.playlistController_=new vq(this.options_),a=za({liveRangeSafeTimeDelta:Ub},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_}),this.playbackWatcher_=new zq(a),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const c=R.players[this.tech_.options_.playerId];let d=this.playlistController_.error;"object"!==
typeof d||d.code?"string"===typeof d&&(d={message:d,code:3}):d.code=3;c.error(d)}),a=this.options_.bufferBasedABR?Ma.movingAverageBandwidthSelector(.55):Ma.STANDARD_PLAYLIST_SELECTOR,this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.playlistController_.selectInitialPlaylist=Ma.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,
{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(c){this.playlistController_.selectPlaylist=c.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(c){this.playlistController_.mainSegmentLoader_.throughput.rate=c;this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let c=this.playlistController_.mainSegmentLoader_.bandwidth;var d=J.navigator.connection||J.navigator.mozConnection||J.navigator.webkitConnection;
this.options_.useNetworkInformationApi&&d&&(d=1E6*d.downlink,c=1E7<=d&&1E7<=c?Math.max(c,d):d);return c},set(c){this.playlistController_.mainSegmentLoader_.bandwidth=c;this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set(){R.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&
(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},
mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>
this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Ec(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>
this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Ec(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{if(this.options_.useBandwidthFromLocalStorage){var c=
{bandwidth:this.bandwidth,throughput:Math.round(this.throughput)};if(J.localStorage){var d=Jl();d=d?za(d,c):c;try{J.localStorage.setItem("videojs-vhs",JSON.stringify(d))}catch(e){}}}}),this.playlistController_.on("selectedinitialmedia",()=>{yq(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=
!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=J.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))}createKeySessions_(){const a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation");Eq({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session");
this.playlistController_.sourceUpdater_.initializedEme()}).catch(b=>{this.logger_("error while creating EME key session",b);this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions");this.createKeySessions_()}setupEme_(){var a=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;a=Fq({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),
audioMedia:a&&a.media()});this.player_.tech_.on("keystatuschange",b=>{this.playlistController_.updatePlaylistByKeyStatus(b.keyId,b.status)});this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this);this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_);a?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const a=R.players[this.tech_.options_.playerId];a&&a.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=a.qualityLevels(),
this.playlistController_.on("selectedinitialmedia",()=>{Cq(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Il(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.14.2","mux.js":"7.0.3","mpd-parser":"1.3.0","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return xl.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(a){this.playlistController_.setCurrentTime(a)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&
this.playbackWatcher_.dispose();this.playlistController_&&this.playlistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();this.tech_&&this.tech_.vhs&&delete this.tech_.vhs;this.mediaSourceUrl_&&J.URL.revokeObjectURL&&(J.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null);this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_);super.dispose()}convertToProgramTime(a,b){return ap({playlist:this.playlistController_.media(),time:a,callback:b})}seekToProgramTime(a,
b,c=!0,d=2){return Dk({programTime:a,playlist:this.playlistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})}setupXhrHooks_(){this.xhr.onRequest=a=>{var b=this.xhr;b._requestCallbackSet||(b._requestCallbackSet=new Set);b._requestCallbackSet.add(a)};this.xhr.onResponse=a=>{var b=this.xhr;b._responseCallbackSet||(b._responseCallbackSet=new Set);b._responseCallbackSet.add(a)};this.xhr.offRequest=a=>{var b=this.xhr;b._requestCallbackSet&&
(b._requestCallbackSet.delete(a),b._requestCallbackSet.size||delete b._requestCallbackSet)};this.xhr.offResponse=a=>{var b=this.xhr;b._responseCallbackSet&&(b._responseCallbackSet.delete(a),b._responseCallbackSet.size||delete b._responseCallbackSet)};this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(a=>{this.playlistController_.on(a,b=>{this.player_.trigger(Ra({},
b))})});["gapjumped","playedrangeschanged"].forEach(a=>{this.playbackWatcher_.on(a,b=>{this.player_.trigger(Ra({},b))})})}}const Re={name:"videojs-http-streaming",VERSION:"3.14.2",canHandleSource(a,b={}){b=za(R.options,b);return b.vhs.experimentalUseMMS||pd("avc1.4d400d,mp4a.40.2",!1)?Re.canPlayType(a.type,b):!1},handleSource(a,b,c={}){c=za(R.options,c);b.vhs=new Kl(a,b,c);b.vhs.xhr=Ak();b.vhs.setupXhrHooks_();b.vhs.src(a.src,a.type);return b.vhs},canPlayType(a,b){a=pi(a);if(!a)return"";b=Re.getOverrideNative(b);
return!Ma.supportsTypeNatively(a)||b?"maybe":""},getOverrideNative(a={}){({vhs:a={}}=a);const b=!(R.browser.IS_ANY_SAFARI||R.browser.IS_IOS);({overrideNative:a=b}=a);return a}};pd("avc1.4d400d,mp4a.40.2",!0)&&R.getTech("Html5").registerSourceHandler(Re,0);R.VhsHandler=Kl;R.VhsSourceHandler=Re;R.Vhs=Ma;R.use||R.registerComponent("Vhs",Ma);R.options.vhs=R.options.vhs||{};R.getPlugin&&R.getPlugin("reloadSourceOnError")||R.registerPlugin("reloadSourceOnError",Bq);let Na=class extends Ll{constructor(){super();
this._defaultConfigs={autoplay:!1,fluid:!1,fullscreen:!1,loop:!1,muted:!1,preload:"auto",responsive:!1,startTime:0};this._prevPlayingState=!1;this.sensorModel=this.mimeType=this.element=this.currentMetadata=null;this.state="not-ready";this.waitingTimestamp=null;this._initController=()=>{!this._controller&&this.playerUrl&&(this.element=document.createElement("video"),R.log.level("error"),this._controller=R(this.element,this._defaultConfigs),this._controller.muted(this.muted),this._controller.loop(this.loop),
this._controller.playbackRate(this.rate),this._controller.ready(this._handleReady),this._controller.on("canplay",this._handleCanPlay),this._controller.on("durationchange",this._handleDurationChange),this._controller.on("ended",this._handleEnded),this._controller.on("error",this._handleError),this._controller.on("loadeddata",this._handleDataLoaded),this._controller.on("loadedmetadata",this._handleLoadedMetadata),this._controller.on("loadstart",this._handleLoadStart),this._controller.on("play",this._handlePlay),
this._controller.on("timeupdate",this._handleTimeUpdate),this._controller.on("waiting",this._handleWaiting),this._controller.on("xhr-hooks-ready",this._handleXHRhooksReady))};this._handleReady=()=>{this.state="ready"};this._handleCanPlay=()=>{this._prevPlayingState="playing"===this.state;this.state="can-play"};this._handleCueChange=()=>{if(this.subtitleTrack?.activeCues?.length){var a=this.subtitleTrack?.activeCues[0];a=a.text?JSON.parse(a.text):null;if(a?.data?.length){a=a.data[0]?.value??[];var b=
new Map;for(const c of a)Array.isArray(c.value)?90064===c.tagId?b.set(c.tagId,c):c.value.forEach(d=>{b.set(d.tagId,d)}):b.set(c.tagId,c);b.set(jd.videoMetadataEntryId.EsriVideoWidth,{name:"Video Width",tagId:jd.videoMetadataEntryId.EsriVideoWidth,value:this._controller?.videoWidth()});b.set(jd.videoMetadataEntryId.EsriVideoHeight,{name:"Video Height",tagId:jd.videoMetadataEntryId.EsriVideoHeight,value:this._controller?.videoHeight()});this.currentMetadata=new Map(b);this.sensorModel=new Ql({videoMetadata:this.currentMetadata})}}};
this._handleDataLoaded=()=>{this.state="data-loaded";this._set("videoWidth",this._controller?.videoWidth());this._set("videoHeight",this._controller?.videoHeight())};this._handleDurationChange=()=>this.notifyChange("duration");this._handleEnded=()=>{this.loop?(this.setCurrentTime(0),this.play()):(this._set("ended",!0),this.notifyChange("buffered"),this.notifyChange("currentTime"),this.notifyChange("duration"),this.notifyChange("waiting"),this.state="can-play")};this._handleError=()=>{Ml.getLogger(this).error("video stream error ::",
this._controller?.error())};this._handleLoadStart=()=>{this.state="can-play"};this._handleLoadedMetadata=()=>{this.notifyChange("subtitleTrack");this.notifyChange("buffered")};this._handlePlay=()=>this.notifyChange("ended");this._handleTimeUpdate=()=>{this.notifyChange("currentTime");this.notifyChange("buffered");this.notifyChange("bufferedPercent");this._set("videoWidth",this._controller?.videoWidth());this._set("videoHeight",this._controller?.videoHeight())};this._handleWaiting=()=>{this.waitingTimestamp=
this._controller?.currentTime()};this._handleXHRhooksReady=()=>{const a=b=>{b.xhr=new Ol.XHRAdapter;return b};this._controller?.tech(!0)?.vhs.xhr.onRequest(a)}}initialize(){this.addHandles([Kd.watch(()=>this.playerUrl,a=>{a&&(this._initController(),this.mimeType=jd.getVideoMimeType(a),this._controller?.src({type:this.mimeType,src:this.playerUrl}))},Kd.initial),Kd.watch(()=>this.subtitleTrack,()=>{this.subtitleTrack&&(this.subtitleTrack.mode="showing")})]);this.addHandles(Kd.on(()=>this.subtitleTrack,
"cuechange",this._handleCueChange))}destroy(){this._controller?.dispose()}get buffered(){return this._controller?.bufferedEnd()??0}get bufferedPercent(){return this._controller?.bufferedPercent()??0}get currentTime(){return this._controller?.currentTime()??0}get duration(){return this._controller?.duration()??0}get ended(){return this._controller?.ended()??this._get("ended")??!0}set ended(a){this._controller?.ended(a);this._set("ended",a)}get loop(){return this._controller?.loop()??this._get("loop")??
!1}set loop(a){this._controller?.loop(a);this._set("loop",a)}get muted(){return this._controller?.muted()??this._get("muted")??!1}set muted(a){this._controller?.muted(a);this._set("muted",a)}get playerUrl(){return this._controller?.src()||""}set playerUrl(a){this._set("playerUrl",a)}get playing(){return this.ended?!1:"can-play"===this.state?this._prevPlayingState:"playing"===this.state}get rate(){return this._controller?.playbackRate()??this._get("rate")??1}set rate(a){this._controller?.playbackRate(a);
this._set("rate",a)}get started(){return this._controller?.hasStarted()||!1}get subtitleTrack(){const a=this._controller?.textTracks();return a?.length?Array.from(a).find(b=>"subtitles"===b.kind):null}get waiting(){return this.waitingTimestamp?!1:this.waitingTimestamp!==this.currentTime?(this.waitingTimestamp=null,!1):!0}pause(){this._controller?.pause();this.state="paused"}play(){this._controller?.play();this.state="playing"}reset(){this._controller&&(this.pause(),this.setCurrentTime(0),this._set("ended",
!0))}setCurrentTime(a){a=Nl.clamp(a,0,this.duration);this._controller?.currentTime(a);this.notifyChange("currentTime")}};Oa.__decorate([Qa.property()],Na.prototype,"buffered",null);Oa.__decorate([Qa.property()],Na.prototype,"bufferedPercent",null);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"currentTime",null);Oa.__decorate([Qa.property()],Na.prototype,"currentMetadata",void 0);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"duration",null);Oa.__decorate([Qa.property()],Na.prototype,
"element",void 0);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"ended",null);Oa.__decorate([Qa.property()],Na.prototype,"loop",null);Oa.__decorate([Qa.property()],Na.prototype,"mimeType",void 0);Oa.__decorate([Qa.property()],Na.prototype,"muted",null);Oa.__decorate([Qa.property()],Na.prototype,"playerUrl",null);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"playing",null);Oa.__decorate([Qa.property()],Na.prototype,"rate",null);Oa.__decorate([Qa.property()],Na.prototype,"sensorModel",
void 0);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"started",null);Oa.__decorate([Qa.property()],Na.prototype,"state",void 0);Oa.__decorate([Qa.property()],Na.prototype,"subtitleTrack",null);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"videoHeight",void 0);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"videoWidth",void 0);Oa.__decorate([Qa.property({readOnly:!0})],Na.prototype,"waiting",null);Oa.__decorate([Qa.property()],Na.prototype,"waitingTimestamp",void 0);
return Na=Oa.__decorate([Pl.subclass("esri.layers.video.VideoController")],Na)});