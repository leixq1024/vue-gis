// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/date":function(){define(["exports"],function(e){function l(a){const q=new Date(a);if(Number.isNaN(q.getTime()))a=!1;else{var h=!0;if(M&&/\d+\W*$/.test(a)&&(a=a.match(/[a-zA-Z]{2,}/))){h=!1;let w=0;for(;!h&&w<=a.length;)h=!u.test(a[w]),w++;h=!h}a=h}return a?Number.isNaN(q.getTime())?null:q.getTime()-6E4*q.getTimezoneOffset():null}function x(a){a=C.exec(a);if(!a?.groups)return null;a=a.groups;const q=+a.year,h=+a.month-1,w=+a.day,r=+(a.hours??0),F=+(a.minutes??0),H=+(a.seconds??
0);if(23<r||59<F||59<H)return null;var t=a.ms??"0";t=t?+t.padEnd(3,"0").slice(0,3):0;a=a.isUTC||!a.offsetSign?Date.UTC(q,h,w,r,F,H,t):6E4*("+"===a.offsetSign?-1:1)*(60*+a.offsetHours+ +a.offsetMinutes)+Date.UTC(q,h,w,r,F,H,t);return Number.isNaN(a)?null:a}const C=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,u=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
M=!Number.isNaN((new Date("technology 10")).getTime());e.isDateString=function(a){return null!=x(a)||null!=l(a)};e.isISO8601Date=function(a){return C.test(a)};e.parseDate=function(a){return x(a)??l(a)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(e){class l{constructor(a,q,h){this.x=a;this.y=q;this.spatialReference=h;this.m=this.z=void 0}}class x{constructor(a,q,h,w){this.rings=a;this.spatialReference=
q;this.hasM=this.hasZ=void 0;h&&(this.hasZ=h);w&&(this.hasM=w)}}class C{constructor(a,q,h,w){this.paths=a;this.spatialReference=q;this.hasM=this.hasZ=void 0;h&&(this.hasZ=h);w&&(this.hasM=w)}}class u{constructor(a,q,h,w){this.points=a;this.spatialReference=q;this.hasM=this.hasZ=void 0;h&&(this.hasZ=h);w&&(this.hasM=w)}}class M{constructor(a,q,h,w,r){this.xmin=a;this.ymin=q;this.xmax=h;this.ymax=w;this.spatialReference=r;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}e.jsonAdapter={convertToGEGeometry:function(a,
q){return null==q?null:a.convertJSONToGeometry(q)},exportPoint:function(a,q,h){h=new l(a.getPointX(q),a.getPointY(q),h);const w=a.hasZ(q),r=a.hasM(q);w&&(h.z=a.getPointZ(q));r&&(h.m=a.getPointM(q));return h},exportPolygon:function(a,q,h){return new x(a.exportPaths(q),h,a.hasZ(q),a.hasM(q))},exportPolyline:function(a,q,h){return new C(a.exportPaths(q),h,a.hasZ(q),a.hasM(q))},exportMultipoint:function(a,q,h){return new u(a.exportPoints(q),h,a.hasZ(q),a.hasM(q))},exportExtent:function(a,q,h){var w=a.hasZ(q);
const r=a.hasM(q);h=new M(a.getXMin(q),a.getYMin(q),a.getXMax(q),a.getYMax(q),h);w&&(w=a.getZExtent(q),h.zmin=w.vmin,h.zmax=w.vmax);r&&(a=a.getMExtent(q),h.mmin=a.vmin,h.mmax=a.vmax);return h}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","./OptimizedGeometry"],function(e,l){class x{constructor(u=null,M={},a,q){this.geometry=u;this.attributes=M;this.centroid=a;this.objectId=q;this.geohashY=this.geohashX=this.displayId=
0}static fromJSON(u,M){const a=u.geometry?l.fromJSON(u.geometry):null,q=u.centroid?l.fromJSON(u.centroid):null;return new x(a,u.attributes,q,u.attributes[M])}weakClone(){const u=new x(this.geometry,this.attributes,this.centroid,this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;return u}clone(){var u=this.geometry?.clone();u=new x(u,{...this.attributes},this.centroid?.clone(),this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;
return u}}class C extends x{}e.OptimizedFeature=x;e.OptimizedFeatureWithGeometry=C;e.hasGeometry=function(u){return!!u.geometry?.coords?.length};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class e{constructor(l=[],x=[]){this.lengths=l??[];this.coords=x??[]}static fromJSON(l){return new e(l.lengths,l.coords)}static fromRect(l){const [x,C,u,M]=l;l=u-x;const a=M-C;return new e([5],[x,C,l,0,0,a,-l,0,0,-a])}get isPoint(){return 0===
this.lengths.length&&2<=this.coords.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((l,x)=>l+x)}forEachVertex(l){let x=0;this.lengths.length||l(this.coords[0],this.coords[1]);for(let C=0;C<this.lengths.length;C++){const u=this.lengths[C];for(let M=0;M<u;M++)l(this.coords[2*(M+x)],this.coords[2*(M+x)+1]);x+=u}}deltaDecode(){const l=this.clone(),{coords:x,lengths:C}=l;let u=0;for(const M of C){for(let a=1;a<M;a++)x[2*(u+a)]+=x[2*(u+a)-2],x[2*(u+a)+1]+=x[2*
(u+a)-1];u+=M}return l}clone(l){if(0===this.lengths.length)return new e([],[this.coords[0],this.coords[1]]);var x=2*(0===this.lengths.length?1:this.lengths.reduce((C,u)=>C+u));x=this.coords.slice(0,x);return l?(l.set(x),new e(this.lengths,l)):new e(Array.from(this.lengths),Array.from(x))}}return e})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(e,l,x,C,u,M,a,q,h,w){const r=u.create();class F{constructor(H){this.geometryInfo=H;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this.events=new x;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let H=0;
this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(H+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:H/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(H){if(null==this.fullBounds)return null;const [t,G,J,v]=this.fullBounds;return{xmin:t,ymin:G,xmax:J,ymax:v,spatialReference:h.cleanFromGeometryEngine(H)}}add(H){this._add(H);this._emitChanged()}addMany(H){for(const t of H)this._add(t);this._emitChanged()}upsertMany(H){H=H.map(t=>this._upsert(t));
this._emitChanged();return H.filter(e.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(H){H=this._featuresById.get(H);if(!H)return null;this._remove(H);this._emitChanged();return H}removeManyById(H){this._boundsStore.invalidateIndex();for(const t of H)(H=this._featuresById.get(t))&&this._remove(H);this._emitChanged()}forEachBounds(H,t){for(const G of H)(H=this._boundsStore.get(G.objectId))&&t(u.fromRect(r,H))}getFeature(H){return this._featuresById.get(H)}has(H){return this._featuresById.has(H)}forEach(H){this._featuresById.forEach(t=>
H(t))}forEachInBounds(H,t){this._boundsStore.forEachInBounds(H,G=>{t(this._featuresById.get(G))})}_emitChanged(){this.events.emit("changed",void 0)}_add(H){if(H){var t=H.objectId;if(null==t)C.getLogger("esri.layers.graphics.data.FeatureStore").error(new l("featurestore:invalid-feature","feature id is missing",{feature:H}));else{var G=this._featuresById.get(t);if(G){H.displayId=G.displayId;var J=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(H);
H.geometry?.coords?.length?(J=a.getBoundsOptimizedGeometry(null!=J?J:M.create(),H.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=J&&this._boundsStore.set(t,J)):this._boundsStore.set(t,null);this._featuresById.set(t,H)}}}_upsert(H){const t=H?.objectId;if(null==t)return C.getLogger("esri.layers.graphics.data.FeatureStore").error(new l("featurestore:invalid-feature","feature id is missing",{feature:H})),null;const G=this._featuresById.get(t);if(!G)return this._add(H),H;const {geometry:J,
attributes:v}=H;for(const b in v)G.attributes[b]=v[b];J&&(G.geometry=J,this._boundsStore.set(t,a.getBoundsOptimizedGeometry(M.create(),J,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return G}_remove(H){if(null!=this.onFeatureRemove)this.onFeatureRemove(H);const t=H.objectId;this._boundsStore.delete(t);this._featuresById.delete(t);return H}}return F})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect","./DoubleArray"],function(e,l,x,C){function u(b=
J){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function M(b,m,I,f,L,P,S=u()){S[0]=b;S[1]=m;S[2]=I;S[3]=f;S[4]=L;S[5]=P;return S}function a(b,m,I,f=u()){H(f,G);q(f,b,m,I);return f}function q(b,m,I=0,f=m.length/3){let L=b[0],P=b[1],S=b[2],ca=b[3],U=b[4],T=b[5];for(let y=0;y<f;y++)L=Math.min(L,m[I+3*y]),P=Math.min(P,m[I+3*y+1]),S=Math.min(S,m[I+3*y+2]),ca=Math.max(ca,m[I+3*y]),U=Math.max(U,m[I+3*y+1]),T=Math.max(T,m[I+3*y+2]);b[0]=L;b[1]=P;b[2]=S;b[3]=ca;b[4]=U;b[5]=T}function h(b){return b[0]>=b[3]?0:b[3]-
b[0]}function w(b){return b[1]>=b[4]?0:b[4]-b[1]}function r(b){return b[2]>=b[5]?0:b[5]-b[2]}function F(b,m){return Math.max(m[0],b[0])<=Math.min(m[3],b[3])&&Math.max(m[1],b[1])<=Math.min(m[4],b[4])&&Math.max(m[2],b[2])<=Math.min(m[5],b[5])}function H(b,m){b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=m[3];b[4]=m[4];b[5]=m[5];return b}function t(b){return 6===b.length}const G=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],J=[0,0,0,0,0,0],v=u();e.allFinite=function(b){for(let m=0;6>m;m++)if(!isFinite(b[m]))return!1;
return!0};e.center=function(b,m=[0,0,0]){m[0]=b[0]+h(b)/2;m[1]=b[1]+w(b)/2;m[2]=b[2]+r(b)/2;return m};e.contains=function(b,m){return m[0]>=b[0]&&m[1]>=b[1]&&m[2]>=b[2]&&m[3]<=b[3]&&m[4]<=b[4]&&m[5]<=b[5]};e.containsPoint=function(b,m){return m[0]>=b[0]&&m[1]>=b[1]&&m[2]>=b[2]&&m[0]<=b[3]&&m[1]<=b[4]&&m[2]<=b[5]};e.containsPointWithMargin=function(b,m,I){return m[0]>=b[0]-I&&m[1]>=b[1]-I&&m[2]>=b[2]-I&&m[0]<=b[3]+I&&m[1]<=b[4]+I&&m[2]<=b[5]+I};e.create=u;e.depth=w;e.diameter=function(b){const m=h(b),
I=r(b);b=w(b);return Math.sqrt(m*m+I*I+b*b)};e.empty=function(b){return b?H(b,G):u(G)};e.equals=function(b,m,I){if(null==b||null==m)return b===m;if(!t(b)||!t(m))return!1;if(I)for(let f=0;f<b.length;f++){if(!I(b[f],m[f]))return!1}else for(I=0;I<b.length;I++)if(b[I]!==m[I])return!1;return!0};e.expandWithAABB=function(b,m){b[0]=Math.min(b[0],m[0]);b[1]=Math.min(b[1],m[1]);b[2]=Math.min(b[2],m[2]);b[3]=Math.max(b[3],m[3]);b[4]=Math.max(b[4],m[4]);b[5]=Math.max(b[5],m[5])};e.expandWithBuffer=q;e.expandWithNestedArray=
function(b,m,I){const f=m.length;let L=b[0],P=b[1],S=b[2],ca=b[3],U=b[4],T=b[5];if(I)for(I=0;I<f;I++){var y=m[I];L=Math.min(L,y[0]);P=Math.min(P,y[1]);S=Math.min(S,y[2]);ca=Math.max(ca,y[0]);U=Math.max(U,y[1]);T=Math.max(T,y[2])}else for(I=0;I<f;I++)y=m[I],L=Math.min(L,y[0]),P=Math.min(P,y[1]),ca=Math.max(ca,y[0]),U=Math.max(U,y[1]);b[0]=L;b[1]=P;b[2]=S;b[3]=ca;b[4]=U;b[5]=T};e.expandWithOffset=function(b,m,I,f){b[0]=Math.min(b[0],b[0]+m);b[3]=Math.max(b[3],b[3]+m);b[1]=Math.min(b[1],b[1]+I);b[4]=
Math.max(b[4],b[4]+I);b[2]=Math.min(b[2],b[2]+f);b[5]=Math.max(b[5],b[5]+f)};e.expandWithRect=function(b,m){b[0]=Math.min(b[0],m[0]);b[1]=Math.min(b[1],m[1]);b[3]=Math.max(b[3],m[2]);b[4]=Math.max(b[4],m[3])};e.expandWithVec3=function(b,m){b[0]=Math.min(b[0],m[0]);b[1]=Math.min(b[1],m[1]);b[2]=Math.min(b[2],m[2]);b[3]=Math.max(b[3],m[0]);b[4]=Math.max(b[4],m[1]);b[5]=Math.max(b[5],m[2])};e.fromBuffer=function(b,m=u()){return a(b,0,b.length/3,m)};e.fromExtent=function(b,m=u()){m[0]=b.xmin;m[1]=b.ymin;
m[2]=b.hasZ?b.zmin:-Infinity;m[3]=b.xmax;m[4]=b.ymax;m[5]=b.hasZ?b.zmax:Infinity;return m};e.fromMinMax=function(b,m,I=u()){I[0]=b[0];I[1]=b[1];I[2]=b[2];I[3]=m[0];I[4]=m[1];I[5]=m[2];return I};e.fromRect=function(b,m){b[0]=m[0];b[1]=m[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=m[2];b[4]=m[3];b[5]=Number.POSITIVE_INFINITY;return b};e.fromRectValues=function(b,m,I,f,L){b[0]=m;b[1]=I;b[2]=Number.NEGATIVE_INFINITY;b[3]=f;b[4]=L;b[5]=Number.POSITIVE_INFINITY;return b};e.fromSubBuffer=a;e.fromValues=M;e.getMax=
function(b,m){m[0]=b[3];m[1]=b[4];m[2]=b[5];return m};e.getMin=function(b,m){m[0]=b[0];m[1]=b[1];m[2]=b[2];return m};e.height=r;e.intersects=F;e.intersectsClippingArea=function(b,m){return null==m?!0:F(b,m)};e.is=t;e.isPoint=function(b){return 0===h(b)&&0===w(b)&&0===r(b)};e.maximumDimension=function(b){return Math.max(h(b),r(b),w(b))};e.negativeInfinity=G;e.offset=function(b,m,I,f,L=b){L[0]=b[0]+m;L[1]=b[1]+I;L[2]=b[2]+f;L[3]=b[3]+m;L[4]=b[4]+I;L[5]=b[5]+f;return L};e.positiveInfinity=[-Infinity,
-Infinity,-Infinity,Infinity,Infinity,Infinity];e.scale=function(b,m,I=b){const f=b[0]+h(b)/2,L=b[1]+w(b)/2,P=b[2]+r(b)/2;I[0]=f+(b[0]-f)*m;I[1]=L+(b[1]-L)*m;I[2]=P+(b[2]-P)*m;I[3]=f+(b[3]-f)*m;I[4]=L+(b[4]-L)*m;I[5]=P+(b[5]-P)*m;return I};e.set=H;e.setMax=function(b,m,I=b){I[3]=m[0];I[4]=m[1];I[5]=m[2];I!==b&&(I[0]=b[0],I[1]=b[1],I[2]=b[2]);return b};e.setMin=function(b,m,I=b){I[0]=m[0];I[1]=m[1];I[2]=m[2];I!==b&&(I[3]=b[3],I[4]=b[4],I[5]=b[5]);return I};e.size=function(b,m=[0,0,0]){m[0]=h(b);m[1]=
w(b);m[2]=r(b);return m};e.toCorners=function(b,m=C.newDoubleArray(24)){const [I,f,L,P,S,ca]=b;m[0]=I;m[1]=f;m[2]=L;m[3]=I;m[4]=f;m[5]=ca;m[6]=I;m[7]=S;m[8]=L;m[9]=I;m[10]=S;m[11]=ca;m[12]=P;m[13]=f;m[14]=L;m[15]=P;m[16]=f;m[17]=ca;m[18]=P;m[19]=S;m[20]=L;m[21]=P;m[22]=S;m[23]=ca;return m};e.toExtent=function(b,m){return isFinite(b[2])||isFinite(b[5])?new l({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:m}):new l({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],spatialReference:m})};
e.toRect=function(b,m){m||=x.create();m[0]=b[0];m[1]=b[1];m[2]=b[3];m[3]=b[4];return m};e.width=h;e.wrap=function(b,m,I,f,L,P){return M(b,m,I,f,L,P,v)};e.zero=J;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/DoubleArray":function(){define(["exports","../../core/typedArrayUtil"],function(e,l){e.copyInto=function(x,C){for(let u=0;u<C.length;++u)x[u]=C[u];return x};e.doubleArrayFrom=function(x){return(l.isArray(x)?x.length:x.byteLength/8)<=l.nativeArrayMaxSize?
Array.from(x):new Float64Array(x)};e.doubleSubArray=function(x,C,u){return Array.isArray(x)?x.slice(C,C+u):x.subarray(C,C+u)};e.newDoubleArray=function(x,C=!1){return x<=l.nativeArrayMaxSize?C?Array(x).fill(0):Array(x):new Float64Array(x)};e.toFloat64Array=function(x){return Array.isArray(x)?new Float64Array(x):x};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(e,l,x,C,u,M,a,q,h,w){function r(B,K){return B?K?4:3:K?3:2}function F(B,K,N,V){if(B){if(N)return K&&V?E:La;if(K&&V)return n}else if(K&&V)return La;return ab}function H({scale:B,translate:K},N){return Math.round((N-K[0])/B[0])}function t({scale:B,translate:K},N){return Math.round((K[1]-N)/B[1])}function G({scale:B,translate:K},N,V){return N*B[V]+K[V]}function J(B){B=B.coords;return{x:B[0],y:B[1]}}function v(B,K){B.coords[0]=K.x;B.coords[1]=K.y;return B}function b(B){B=B.coords;return{x:B[0],
y:B[1],z:B[2]}}function m(B,K){B.coords[0]=K.x;B.coords[1]=K.y;B.coords[2]=K.z;return B}function I(B){B=B.coords;return{x:B[0],y:B[1],m:B[2]}}function f(B,K){B.coords[0]=K.x;B.coords[1]=K.y;B.coords[2]=K.m;return B}function L(B){B=B.coords;return{x:B[0],y:B[1],z:B[2],m:B[3]}}function P(B,K){B.coords[0]=K.x;B.coords[1]=K.y;B.coords[2]=K.z;B.coords[3]=K.m;return B}function S(B,K){return B&&K?P:B?m:K?f:v}function ca(B,K,N,V,Z){N=S(N,V);for(const {geometry:da,attributes:ea}of K)K=null!=da?N(new w,da):
null,B.push(new q.OptimizedFeature(K,ea,null,Z?ea[Z]:void 0));return B}function U(B,K,N=S(null!=K.z,null!=K.m)){return N(B,K)}function T(B,K,N,V){for(const {geometry:Z,attributes:da}of K)B.push({attributes:da,geometry:null!=Z?y(Z,N,V):null});return B}function y(B,K,N){if(null==B)return null;const V=r(K,N),Z=[];for(let da=0;da<B.coords.length;da+=V){const ea=[];for(let la=0;la<V;la++)ea.push(B.coords[da+la]);Z.push(ea)}return K?N?{points:Z,hasZ:K,hasM:N}:{points:Z,hasZ:K}:N?{points:Z,hasM:N}:{points:Z}}
function Q(B,K,N,V,Z){N=r(N,V);for(const {geometry:da,attributes:ea}of K)K=null!=da?g(new w,da,N):null,B.push(new q.OptimizedFeature(K,ea,null,Z?ea[Z]:void 0));return B}function g(B,K,N=r(K.hasZ,K.hasM)){B.lengths[0]=K.points.length;const V=B.coords;let Z=0;for(const da of K.points)for(K=0;K<N;K++)V[Z++]=da[K];return B}function d(B,K,N){if(!B)return null;const V=r(K,N),{coords:Z,lengths:da}=B;B=[];let ea=0;for(const la of da){const na=[];for(let ua=0;ua<la;ua++){const ra=[];for(let sa=0;sa<V;sa++)ra.push(Z[ea++]);
na.push(ra)}B.push(na)}return K?N?{paths:B,hasZ:K,hasM:N}:{paths:B,hasZ:K}:N?{paths:B,hasM:N}:{paths:B}}function k(B,K,N,V,Z){N=r(N,V);for(const {geometry:da,attributes:ea,centroid:la}of K)K=null!=da?z(new w,da,N):null,V=null!=la?U(new w,la):null,B.push(new q.OptimizedFeature(K,ea,V,Z?ea[Z]:void 0));return B}function z(B,K,N=r(K.hasZ,K.hasM)){const {lengths:V,coords:Z}=B;let da=0;for(const ea of K.paths){for(const la of ea)for(K=0;K<N;K++)Z[da++]=la[K];V.push(ea.length)}return B}function O(B,K,N){if(!B)return null;
const V=r(K,N),{coords:Z,lengths:da}=B;B=[];let ea=0;for(const la of da){const na=[];for(let ua=0;ua<la;ua++){const ra=[];for(let sa=0;sa<V;sa++)ra.push(Z[ea++]);na.push(ra)}B.push(na)}return K?N?{rings:B,hasZ:K,hasM:N}:{rings:B,hasZ:K}:N?{rings:B,hasM:N}:{rings:B}}function X(B,K,N=K.hasZ,V=K.hasM){return ba(B,K.rings,N,V)}function ba(B,K,N,V){N=r(N,V);const {lengths:Z,coords:da}=B;V=0;Aa(B);for(const ea of K){for(const la of ea)for(K=0;K<N;K++)da[V++]=la[K];Z.push(ea.length)}return B}function fa(B,
K,N,V,Z,da){Ea(B);if(!N){for(const ea of K)B.push(new q.OptimizedFeature(null,ea.attributes,null,da?ea.attributes[da]:void 0));return B}switch(N){case "esriGeometryPoint":return ca(B,K,V,Z,da);case "esriGeometryMultipoint":return Q(B,K,V,Z,da);case "esriGeometryPolyline":return k(B,K,V,Z,da);case "esriGeometryPolygon":case "esriGeometryMultiPatch":for(const {geometry:ea,centroid:la,attributes:na}of K)K=null!=ea?X(new w,ea,V,Z):null,N=da?na[da]:void 0,null!=la?B.push(new q.OptimizedFeature(K,na,v(new w,
la),N)):B.push(new q.OptimizedFeature(K,na,null,N));break;default:Ja().error("convertToFeatureSet:unknown-geometry",new l(`Unable to parse unknown geometry type '${N}'`)),Ea(B)}return B}function ma(B,K,N,V){B=B&&("coords"in B?B:B.geometry);if(null==B)return null;switch(K){case "esriGeometryPoint":return K=J,N&&V?K=L:N?K=b:V&&(K=I),K(B);case "esriGeometryMultipoint":return y(B,N,V);case "esriGeometryPolyline":return d(B,N,V);case "esriGeometryPolygon":return O(B,N,V);default:return Ja().error("convertToGeometry:unknown-geometry",
new l(`Unable to parse unknown geometry type '${K}'`)),null}}function pa(B,K,N,V,Z){Ea(B);if(null==N){for(const ea of K)B.push({attributes:ea.attributes});return B}switch(N){case "esriGeometryPoint":N=J;V&&Z?N=L:V?N=b:Z&&(N=I);for(var da of K){const {geometry:ea,attributes:la}=da;V=null!=ea?N(ea):null;B.push({attributes:la,geometry:V})}break;case "esriGeometryMultipoint":return T(B,K,V,Z);case "esriGeometryPolyline":for(const {geometry:ea,attributes:la}of K)B.push({attributes:la,geometry:null!=ea?
d(ea,V,Z):null});break;case "esriGeometryPolygon":for(const {geometry:ea,attributes:la,centroid:na}of K)da=null!=ea?O(ea,V,Z):null,null!=na?(K=J(na),B.push({attributes:la,centroid:K,geometry:da})):B.push({attributes:la,geometry:da});break;default:Ja().error("convertToFeatureSet:unknown-geometry",new l(`Unable to parse unknown geometry type '${N}'`))}return B}function oa(B,K,N,V,Z,da,ea=N,la=V){Aa(B);if(!K?.coords.length)return null;Z=Sa[Z];const {coords:na,lengths:ua}=K;K=r(N,V);const ra=r(N&&ea,
V&&la);N=F(N,V,ea,la);if(!ua.length)return N(B.coords,na,0,0,H(da,na[0]),t(da,na[1])),Aa(B,K,0),B;let sa,Ca=0,ya,Ba=0;for(const Da of ua){if(Da<Z)continue;let za=0;ya=Ba;la=V=H(da,na[Ca]);sa=ea=t(da,na[Ca+1]);N(B.coords,na,ya,Ca,la,sa);za++;Ca+=K;ya+=ra;for(let Fa=1;Fa<Da;Fa++,Ca+=K)if(la=H(da,na[Ca]),sa=t(da,na[Ca+1]),la!==V||sa!==ea)N(B.coords,na,ya,Ca,la-V,sa-ea),ya+=ra,za++,V=la,ea=sa;za>=Z&&(B.lengths.push(za),Ba=ya)}Ea(B.coords,Ba);return B.coords.length?B:null}function qa(B,K,N,V,Z,da,ea){let la=
V,na=0;for(let ra=da+N;ra<ea;ra+=N){var ua=K[ra];const sa=K[ra+1],Ca=K[ea],ya=K[ea+1];let Ba=K[da],Da=K[da+1],za=Ca-Ba,Fa=ya-Da;if(0!==za||0!==Fa){const Ra=((ua-Ba)*za+(sa-Da)*Fa)/(za*za+Fa*Fa);1<Ra?(Ba=Ca,Da=ya):0<Ra&&(Ba+=za*Ra,Da+=Fa*Ra)}za=ua-Ba;Fa=sa-Da;ua=za*za+Fa*Fa;ua>la&&(na=ra,la=ua)}la>V&&(na-da>N&&qa(B,K,N,V,Z,da,na),Z(B,K,B.length,na,K[na],K[na+1]),ea-na>N&&qa(B,K,N,V,Z,na,ea))}function va(B,K,N,V,Z){const {coords:da,lengths:ea}=K;N=r(N,V);if(!da.length)return B!==K&&Aa(B),B;C.assertIsSome(Z);
const {originPosition:la,scale:na,translate:ua}=Z;Z=ja;Z.originPosition=la;V=Z.scale;V[0]=na[0]??1;V[1]=-(na[1]??1);V[2]=na[2]??1;V[3]=na[3]??1;var ra=Z.translate;ra[0]=ua[0]??0;ra[1]=ua[1]??0;ra[2]=ua[2]??0;ra[3]=ua[3]??0;if(!ea.length){for(V=0;V<N;++V)B.coords[V]=G(Z,da[V],V);B!==K&&Aa(B,N,0);return B}ra=0;for(let Ca=0;Ca<ea.length;Ca++){const ya=ea[Ca];B.lengths[Ca]=ya;for(var sa=0;sa<N;++sa)B.coords[ra+sa]=G(Z,da[ra+sa],sa);sa=B.coords[ra];let Ba=B.coords[ra+1];ra+=N;for(let Da=1;Da<ya;Da++,ra+=
N){sa+=da[ra]*V[0];Ba+=da[ra+1]*V[1];B.coords[ra]=sa;B.coords[ra+1]=Ba;for(let za=2;za<N;++za)B.coords[ra+za]=G(Z,da[ra+za],za)}}B!==K&&Aa(B,da.length,ea.length);return B}function xa(B,K,N,V){let Z=0,da=B[V*K],ea=B[V*(K+1)];for(let la=1;la<N;la++){const na=da+B[V*(K+la)],ua=ea+B[V*(K+la)+1],ra=(na-da)*(ua+ea);da=na;ea=ua;Z+=ra}return.5*Z}function Aa(B,K=0,N=0){Ea(B.lengths,N);Ea(B.coords,K)}function Ea(B,K=0){B.length!==K&&(B.length=K)}const Ja=()=>x.getLogger("esri.layers.graphics.featureConversionUtils"),
Sa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},ab=(B,K,N,V,Z,da)=>{B[N]=Z;B[N+1]=da},La=(B,K,N,V,Z,da)=>{B[N]=Z;B[N+1]=da;B[N+2]=K[V+2]},n=(B,K,N,V,Z,da)=>{B[N]=Z;B[N+1]=da;B[N+2]=K[V+3]},E=(B,K,N,V,Z,da)=>{B[N]=Z;B[N+1]=da;B[N+2]=K[V+2];B[N+3]=K[V+3]},W=[],aa=[],ja={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};e.convertFromFeature=function(B,K,N,V,Z){W[0]=B;[B]=fa(aa,W,K,N,V,Z);Ea(W);
Ea(aa);return B};e.convertFromFeatureSet=function(B,K){const N=new h,{hasM:V,hasZ:Z,features:da,objectIdFieldName:ea,spatialReference:la,geometryType:na,exceededTransferLimit:ua,transform:ra,fields:sa}=B;sa&&(N.fields=sa);N.geometryType=na??null;N.objectIdFieldName=ea??K??null;N.spatialReference=la??null;if(!N.objectIdFieldName)return Ja().error(new l("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),N;da&&fa(N.features,da,na,Z,V,N.objectIdFieldName);ua&&(N.exceededTransferLimit=
ua);V&&(N.hasM=V);Z&&(N.hasZ=Z);ra&&(N.transform=ra);return N};e.convertFromFeatures=fa;e.convertFromGeometry=function(B,K,N){if(null==B)return null;const V=new w;"hasZ"in B&&null==K&&(K=B.hasZ);"hasM"in B&&null==N&&(N=B.hasM);if(a.isPoint(B))return S(null!=K?K:null!=B.z,null!=N?N:null!=B.m)(V,B);if(a.isPolygon(B))return X(V,B,K,N);if(a.isPolyline(B))return z(V,B,r(K,N));if(a.isMultipoint(B))return g(V,B,r(K,N));Ja().error("convertFromGeometry:unknown-geometry",new l(`Unable to parse unknown geometry type '${B}'`))};
e.convertFromMultipoint=g;e.convertFromMultipointFeatures=Q;e.convertFromNestedArray=ba;e.convertFromPoint=U;e.convertFromPointFeatures=ca;e.convertFromPolygon=X;e.convertFromPolyline=z;e.convertFromPolylineFeatures=k;e.convertToFeature=function(B,K,N,V){aa[0]=B;pa(W,aa,K,N,V);B=W[0];Ea(W);Ea(aa);return B};e.convertToFeatureSet=function(B){const {objectIdFieldName:K,spatialReference:N,transform:V,fields:Z,hasM:da,hasZ:ea,features:la,geometryType:na,exceededTransferLimit:ua,uniqueIdField:ra,queryGeometry:sa,
queryGeometryType:Ca}=B;B=pa([],la,na,ea,da);const ya=ma(sa,Ca,!1,!1);B={features:B,fields:Z,geometryType:na,objectIdFieldName:K,spatialReference:N,uniqueIdField:ra,queryGeometry:ya};V&&(B.transform=V);ua&&(B.exceededTransferLimit=ua);da&&(B.hasM=da);ea&&(B.hasZ=ea);return B};e.convertToFeatures=pa;e.convertToGeometry=ma;e.convertToMultipoint=y;e.convertToMultipointFeatures=T;e.convertToPoint=function(B,K,N){return B?K?N?L(B):b(B):N?I(B):J(B):null};e.convertToPolygon=O;e.convertToPolyline=d;e.generalizeOptimizedGeometry=
function(B,K,N,V,Z,da,ea=N,la=V){Aa(B);if(!K?.coords.length)return null;Z=Sa[Z];const {coords:na,lengths:ua}=K;K=r(N,V);const ra=r(N&&ea,V&&la);N=F(N,V,ea,la);if(!ua.length)return N(B.coords,na,0,0,na[0],na[1]),Aa(B,K,0),B;V=0;da*=da;for(const sa of ua){if(sa<Z){V+=sa*K;continue}ea=B.coords.length/ra;la=V;const Ca=V+(sa-1)*K;N(B.coords,na,B.coords.length,la,na[la],na[la+1]);qa(B.coords,na,K,da,N,la,Ca);N(B.coords,na,B.coords.length,Ca,na[Ca],na[Ca+1]);la=B.coords.length/ra-ea;la>=Z?B.lengths.push(la):
Ea(B.coords,ea*ra);V+=sa*K}return B.coords.length?B:null};e.getBoundsOptimizedGeometry=function(B,K,N,V){if(!K?.coords?.length)return null;N=r(N,V);let Z=V=Number.POSITIVE_INFINITY,da=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;if(K&&K.coords){K=K.coords;for(let la=0;la<K.length;la+=N){const na=K[la],ua=K[la+1];V=Math.min(V,na);da=Math.max(da,na);Z=Math.min(Z,ua);ea=Math.max(ea,ua)}}u.is(B)?u.fromRectValues(B,V,Z,da,ea):M.fromValues(V,Z,da,ea,B);return B};e.getQuantizedArea=function(B,K){const {coords:N,
lengths:V}=B;let Z=B=0;for(let da=0;da<V.length;da++){const ea=V[da];Z+=xa(N,B,ea,K);B+=ea}return Math.abs(Z)};e.getQuantizedBoundsOptimizedGeometry=function(B,K,N,V){N=r(N,V);const {lengths:Z,coords:da}=K;V=K=Number.POSITIVE_INFINITY;let ea=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,na=0;for(const ua of Z){let ra=da[na],sa=da[na+1];K=Math.min(ra,K);V=Math.min(sa,V);ea=Math.max(ra,ea);la=Math.max(sa,la);na+=N;for(let Ca=1;Ca<ua;Ca++,na+=N){const ya=da[na],Ba=da[na+1];ra+=ya;sa+=Ba;0>ya&&
(K=Math.min(K,ra));0<ya&&(ea=Math.max(ea,ra));0>Ba?V=Math.min(V,sa):0<Ba&&(la=Math.max(la,sa))}}B[0]=K;B[1]=V;B[2]=ea;B[3]=la;return B};e.getSignedQuantizedRingArea=xa;e.quantizeOptimizedFeatureSet=function(B,K){const {geometryType:N,features:V,hasM:Z,hasZ:da}=K;if(!B)return K;for(let ea=0;ea<V.length;ea++){const la=V[ea],na=la.weakClone();na.geometry=new w;oa(na.geometry,la.geometry,Z,da,N,B);la.centroid&&(na.centroid=new w,oa(na.centroid,la.centroid,Z,da,"esriGeometryPoint",B));V[ea]=na}K.transform=
B;return K};e.quantizeOptimizedGeometry=oa;e.quantizeX=H;e.quantizeY=t;e.removeCollinearVertices=function(B,K,N,V,Z){if(!K?.coords?.length)return null;N=Sa[N];const {coords:da,lengths:ea}=K;K=F(V,Z,V,Z);V=r(V,Z);let la=Z=0,na=0,ua=0;for(const Ca of ea){la=ua;K(B.coords,da,la,Z,da[Z],da[Z+1]);Z+=V;var ra=da[Z];let ya=da[Z+1],Ba=ra,Da=ya;var sa=ya/ra;la+=V;K(B.coords,da,la,Z,Ba,Da);Z+=V;for(let za=2;za<Ca;za++){ra=da[Z];ya=da[Z+1];const Fa=ya/ra,Ra=sa===Fa||!isFinite(sa)&&!isFinite(Fa);sa=Ra&&isFinite(Fa)?
0<=sa&&0<=Fa||0>=sa&&0>=Fa:0<=Da&&0<=ya||0>=Da&&0>=ya;Ra&&sa?(Ba+=ra,Da+=ya):(Ba=ra,Da=ya,la+=V);K(B.coords,da,la,Z,Ba,Da);Z+=V;sa=Fa}la+=V;ra=(la-ua)/V;ra>=N&&(B.lengths[na]=ra,ua=la,na++)}B.coords.length>ua&&(B.coords.length=ua);B.lengths.length>na&&(B.lengths.length=na);return B.coords.length&&B.lengths.length?B:null};e.removeZMValues=function(B,K,N,V,Z,da){Aa(B);B.lengths.push(...K.lengths);if(N===Z&&V===da)for(var ea=0;ea<K.coords.length;ea++)B.coords.push(K.coords[ea]);else for(ea=r(N,V),N=
F(N,V,Z,da),K=K.coords,V=0;V<K.length;V+=ea)N(B.coords,K,B.coords.length,V,K[V],K[V+1]);return B};e.unquantizeOptimizedFeatureSet=function(B){const {transform:K,features:N,hasM:V,hasZ:Z}=B;if(!K)return B;for(const da of N)null!=da.geometry&&va(da.geometry,da.geometry,V,Z,K),null!=da.centroid&&va(da.centroid,da.centroid,V,Z,K);B.transform=null;return B};e.unquantizeOptimizedGeometry=va;e.unquantizeValue=G;e.unquantizeX=function(B,K){return G(B,K,0)};e.unquantizeY=function(B,K){return G(B,-K,1)};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class e{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const l=new e;l.objectIdFieldName=this.objectIdFieldName;
l.globalIdFieldName=this.globalIdFieldName;l.geohashFieldName=this.geohashFieldName;l.geometryProperties=this.geometryProperties;l.geometryType=this.geometryType;l.spatialReference=this.spatialReference;l.hasZ=this.hasZ;l.hasM=this.hasM;l.features=this.features;l.fields=this.fields;l.transform=this.transform;l.exceededTransferLimit=this.exceededTransferLimit;l.uniqueIdField=this.uniqueIdField;l.queryGeometry=this.queryGeometry;l.queryGeometryType=this.queryGeometryType;return l}}return e})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(e,l,x,C){function u(q,h,w){M.minX=h[0];M.minY=h[1];M.maxX=h[2];M.maxY=h[3];q.search(M,w)}const M={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new x.PooledRBush(9,l("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let h=0;this._idByBounds.forEach((w,r)=>{q[h++]=r});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(q=>this._idByBounds.has(q))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const q=C.empty();for(const h of this._boundsById.values())h&&(q[0]=Math.min(h[0],q[0]),q[1]=Math.min(h[1],q[1]),
q[2]=Math.max(h[2],q[2]),q[3]=Math.max(h[3],q[3]));return q}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(q){const h=this._boundsById.get(q);this._boundsById.delete(q);h&&(this._idByBounds.delete(h),this._indexInvalid||this._index.remove(h))}forEachInBounds(q,h){this._loadIndex();u(this._index,q,w=>h(this._idByBounds.get(w)))}get(q){return this._boundsById.get(q)}has(q){return this._boundsById.has(q)}invalidateIndex(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(q,h){if(!this._indexInvalid){const w=this._boundsById.get(q);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(q,h);h&&(this._idByBounds.set(h,q),this._indexInvalid||(this._boundsToLoad.push(h),5E4<this._boundsToLoad.length&&this._loadIndex()))}}e.BoundsStore=a;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../has",
"../../PooledArray","../../../chunks/quickselect"],function(e,l,x,C,u){function M(U,T){for(m.clear();U;){if(!0===U.leaf)for(const y of U.children)T(y);else m.pushArray(U.children);U=m.pop()??null}}function a(U,T){q(U,0,U.children.length,T,U)}function q(U,T,y,Q,g){g||=new S([]);g.minX=Infinity;g.minY=Infinity;g.maxX=-Infinity;g.maxY=-Infinity;for(let d=T,k;d<y;d++)k=U.children[d],h(g,U.leaf?Q(k):k);return g}function h(U,T){U.minX=Math.min(U.minX,T.minX);U.minY=Math.min(U.minY,T.minY);U.maxX=Math.max(U.maxX,
T.maxX);U.maxY=Math.max(U.maxY,T.maxY)}function w(U,T){return U.minX-T.minX}function r(U,T){return U.minY-T.minY}function F(U){return(U.maxX-U.minX)*(U.maxY-U.minY)}function H(U){return U.maxX-U.minX+(U.maxY-U.minY)}function t(U,T){return U.minX<=T.minX&&U.minY<=T.minY&&T.maxX<=U.maxX&&T.maxY<=U.maxY}function G(U,T){return T.minX<=U.maxX&&T.minY<=U.maxY&&T.maxX>=U.minX&&T.maxY>=U.minY}function J(U,T,y,Q,g){for(T=[T,y];T.length;){y=T.pop();const d=T.pop();if(y-d<=Q)continue;const k=d+Math.ceil((y-
d)/Q/2)*Q;u.quickselect(U,k,d,y,g);T.push(d,k,k,y)}}class v{constructor(U=9,T){this._compareMinX=w;this._compareMinY=r;this._toBBox=y=>y;this._maxEntries=Math.max(4,U||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));T&&("function"===typeof T?this._toBBox=T:this._initFormat(T));this.clear()}destroy(){this.clear();b.prune();m.prune();I.prune();f.prune()}all(U){M(this._data,U)}search(U,T){let y=this._data;const Q=this._toBBox;if(G(U,y))for(b.clear();y;){for(let g=0,d=y.children.length;g<
d;g++){const k=y.children[g],z=y.leaf?Q(k):k;G(U,z)&&(y.leaf?T(k):t(U,z)?M(k,T):b.push(k))}y=b.pop()}}collides(U){let T=this._data;const y=this._toBBox;if(!G(U,T))return!1;for(b.clear();T;){for(let Q=0,g=T.children.length;Q<g;Q++){const d=T.children[Q],k=T.leaf?y(d):d;if(G(U,k)){if(T.leaf||t(U,k))return!0;b.push(d)}}T=b.pop()}return!1}load(U){if(!U.length)return this;if(U.length<this._minEntries){for(let T=0,y=U.length;T<y;T++)this.insert(U[T]);return this}U=this._build(U.slice(),0,U.length-1,0);
if(this._data.children.length)if(this._data.height===U.height)this._splitRoot(this._data,U);else{if(this._data.height<U.height){const T=this._data;this._data=U;U=T}this._insert(U,this._data.height-U.height-1,!0)}else this._data=U;return this}insert(U){U&&this._insert(U,this._data.height-1);return this}clear(){this._data=new S([]);return this}remove(U){if(!U)return this;let T=this._data,y=null,Q=0,g=!1,d;const k=this._toBBox(U);I.clear();for(f.clear();T||0<I.length;){T||(T=I.pop(),y=I.data[I.length-
1],Q=f.pop()??0,g=!0);if(T.leaf&&(d=l.indexOf(T.children,U,T.children.length,T.indexHint),-1!==d)){T.children.splice(d,1);I.push(T);this._condense(I);break}g||T.leaf||!t(T,k)?y?(Q++,T=y.children[Q],g=!1):T=null:(I.push(T),f.push(Q),Q=0,y=T,T=T.children[0])}return this}toJSON(){return this._data}fromJSON(U){this._data=U;return this}_build(U,T,y,Q){var g=y-T+1,d=this._maxEntries;if(g<=d)return U=new S(U.slice(T,y+1)),a(U,this._toBBox),U;Q||(Q=Math.ceil(Math.log(g)/Math.log(d)),d=Math.ceil(g/d**(Q-1)));
const k=new ca([]);k.height=Q;g=Math.ceil(g/d);d=g*Math.ceil(Math.sqrt(d));for(J(U,T,y,d,this._compareMinX);T<=y;T+=d){const z=Math.min(T+d-1,y);J(U,T,z,g,this._compareMinY);for(let O=T;O<=z;O+=g)k.children.push(this._build(U,O,Math.min(O+g-1,z),Q-1))}a(k,this._toBBox);return k}_insert(U,T,y){var Q=this._toBBox;y=y?U:Q(U);I.clear();Q=this._data;for(var g=T,d=I;;){d.push(Q);if(!0===Q.leaf||d.length-1===g)break;let k=Infinity,z=Infinity,O=void 0;for(let X=0,ba=Q.children.length;X<ba;X++){const fa=Q.children[X],
ma=F(fa),pa=(Math.max(fa.maxX,y.maxX)-Math.min(fa.minX,y.minX))*(Math.max(fa.maxY,y.maxY)-Math.min(fa.minY,y.minY))-ma;pa<z?(z=pa,k=ma<k?ma:k,O=fa):pa===z&&ma<k&&(k=ma,O=fa)}Q=O||Q.children[0]}Q.children.push(U);for(h(Q,y);0<=T;)if(I.data[T].children.length>this._maxEntries)this._split(I,T),T--;else break;for(U=I;0<=T;T--)h(U.data[T],y)}_split(U,T){const y=U.data[T];var Q=y.children.length;const g=this._minEntries;this._chooseSplitAxis(y,g,Q);if(Q=this._chooseSplitIndex(y,g,Q))Q=y.children.splice(Q,
y.children.length-Q),Q=y.leaf?new S(Q):new ca(Q),Q.height=y.height,a(y,this._toBBox),a(Q,this._toBBox),T?U.data[T-1].children.push(Q):this._splitRoot(y,Q)}_splitRoot(U,T){this._data=new ca([U,T]);this._data.height=U.height+1;a(this._data,this._toBBox)}_chooseSplitIndex(U,T,y){let Q,g,d=void 0;Q=g=Infinity;for(let z=T;z<=y-T;z++){var k=q(U,0,z,this._toBBox);const O=q(U,z,y,this._toBBox),X=Math.max(0,Math.min(k.maxX,O.maxX)-Math.max(k.minX,O.minX))*Math.max(0,Math.min(k.maxY,O.maxY)-Math.max(k.minY,
O.minY));k=F(k)+F(O);X<Q?(Q=X,d=z,g=k<g?k:g):X===Q&&k<g&&(g=k,d=z)}return d}_chooseSplitAxis(U,T,y){const Q=U.leaf?this._compareMinX:w,g=U.leaf?this._compareMinY:r,d=this._allDistMargin(U,T,y,Q);T=this._allDistMargin(U,T,y,g);d<T&&U.children.sort(Q)}_allDistMargin(U,T,y,Q){U.children.sort(Q);Q=this._toBBox;var g=q(U,0,T,Q);const d=q(U,y-T,y,Q);let k=H(g)+H(d);for(let z=T;z<y-T;z++){const O=U.children[z];h(g,U.leaf?Q(O):O);k+=H(g)}for(y=y-T-1;y>=T;y--)g=U.children[y],h(d,U.leaf?Q(g):g),k+=H(d);return k}_condense(U){for(let T=
U.length-1;0<=T;T--){const y=U.data[T];if(0===y.children.length)if(0<T){const Q=U.data[T-1],g=Q.children;g.splice(l.indexOf(g,y,g.length,Q.indexHint),1)}else this.clear();else a(y,this._toBBox)}}_initFormat(U){const T=["return a"," - b",";"];this._compareMinX=new Function("a","b",T.join(U[0]));this._compareMinY=new Function("a","b",T.join(U[1]));this._toBBox=new Function("a","return {minX: a"+U[0]+", minY: a"+U[1]+", maxX: a"+U[2]+", maxY: a"+U[3]+"};")}}const b=new C,m=new C,I=new C,f=new C({deallocator:void 0});
class L{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class P extends L{constructor(){super(...arguments);this.height=1;this.indexHint=new l.PositionHint}}class S extends P{constructor(U){super();this.children=U;this.leaf=!0}}class ca extends P{constructor(U){super();this.children=U;this.leaf=!1}}e.BBox=L;e.PooledRBush=v;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports"],function(e){function l(u,M,a,q,
h){for(;q>a;){if(600<q-a){var w=q-a+1,r=M-a+1,F=Math.log(w),H=.5*Math.exp(2*F/3);F=.5*Math.sqrt(F*H*(w-H)/w)*(0>r-w/2?-1:1);l(u,M,Math.max(a,Math.floor(M-r*H/w+F)),Math.min(q,Math.floor(M+(w-r)*H/w+F)),h)}w=u[M];r=a;H=q;x(u,a,M);for(0<h(u[q],w)&&x(u,a,q);r<H;){x(u,r,H);r++;for(H--;0>h(u[r],w);)r++;for(;0<h(u[H],w);)H--}0===h(u[a],w)?x(u,a,H):(H++,x(u,H,q));H<=M&&(a=H+1);M<=H&&(q=H-1)}}function x(u,M,a){var q=u[M];u[M]=u[a];u[a]=q}function C(u,M){return u<M?-1:u>M?1:0}e.quickselect=function(u,M,a,
q,h){l(u,M,a||0,q||u.length-1,h||C)}})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(e,l,x){const C=new x,u=new x,M=new x,a={esriGeometryPoint:l.convertToPoint,esriGeometryPolyline:l.convertToPolyline,esriGeometryPolygon:l.convertToPolygon,esriGeometryMultipoint:l.convertToMultipoint},q=(h,w)=>"_geVersion"!==h?w:void 0;e.cleanFromGeometryEngine=function(h){return h&&"_geVersion"in h?JSON.parse(JSON.stringify(h,
q)):h};e.getGeometry=function(h,w,r,F,H,t,G=w,J=r){const v=w&&G,b=r&&J;F=null!=F?"coords"in F?F:F.geometry:null;if(null==F)return null;if(H)return w=l.generalizeOptimizedGeometry(u,F,w,r,h,H,G,J),t&&(w=l.quantizeOptimizedGeometry(M,w,v,b,h,t)),a[h]?.(w,v,b)??null;if(t)return t=l.quantizeOptimizedGeometry(M,F,w,r,h,t,G,J),a[h]?.(t,v,b)??null;l.removeZMValues(C,F,w,r,G,J);return a[h]?.(C,v,b)??null};e.transformCentroid=function(h,w,r,F=h.hasZ,H=h.hasM){if(null==w)return null;const t=h.hasZ&&F,G=h.hasM&&
H;return r?(h=l.quantizeOptimizedGeometry(M,w,h.hasZ,h.hasM,"esriGeometryPoint",r,F,H),l.convertToPoint(h,t,G)):l.convertToPoint(w,t,G)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(e,l,x,C){e.optimizedFeatureQueryEngineAdapter={getObjectId(u){return u.objectId},getAttributes(u){return u.attributes},getAttribute(u,M){return u.attributes[M]},
cloneWithGeometry(u,M){return new x.OptimizedFeature(M,u.attributes,null,u.objectId)},getGeometry(u){return u.geometry},getCentroid(u,M){null==u.centroid&&(u.centroid=l.getCentroidOptimizedGeometry(new C,u.geometry,M.hasZ,M.hasM));return u.centroid}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(e){function l(C,u,M,a,q,h){h=q?h?4:3:h?3:2;let w=M,r=M+h,F=0,H=0,t=M=0,G=0;for(let J=0,v=a-1;J<v;J++,w+=h,r+=h){a=u[w];
const b=u[w+1],m=u[w+2],I=u[r],f=u[r+1],L=u[r+2];let P=a*f-I*b;t+=P;F+=(a+I)*P;H+=(b+f)*P;q&&(P=a*L-I*m,M+=(m+L)*P,G+=P);a<C[0]&&(C[0]=a);a>C[1]&&(C[1]=a);b<C[2]&&(C[2]=b);b>C[3]&&(C[3]=b);q&&(m<C[4]&&(C[4]=m),m>C[5]&&(C[5]=m))}0<t&&(t*=-1);0<G&&(G*=-1);if(!t)return null;C=[F,H,.5*t];q&&(C[3]=M,C[4]=.5*G);return C}function x(C,u,M,a,q){q=a?q?4:3:q?3:2;let h=u,w=u+q,r=0,F=0,H=0,t=0;for(let b=0,m=M-1;b<m;b++,h+=q,w+=q){var G=C[h];const I=C[h+1],f=C[h+2],L=C[w],P=C[w+1],S=C[w+2];if(a){var J=L-G;var v=
P-I;const ca=S-f;J=Math.sqrt(J*J+v*v+ca*ca)}else J=L-G,v=P-I,J=Math.sqrt(J*J+v*v);J&&(r+=J,a?(G=[G+.5*(L-G),I+.5*(P-I),f+.5*(S-f)],F+=J*G[0],H+=J*G[1],t+=J*G[2]):(G=[G+.5*(L-G),I+.5*(P-I)],F+=J*G[0],H+=J*G[1]))}return 0<r?a?[F/r,H/r,t/r]:[F/r,H/r]:0<M?a?[C[u],C[u+1],C[u+2]]:[C[u],C[u+1]]:null}e.getCentroidOptimizedGeometry=function(C,u,M,a){if(!u?.lengths.length)return null;C.lengths.length&&(C.lengths.length=0);C.coords.length&&(C.coords.length=0);const q=C.coords,h=[],w=M?[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:r,coords:F}=u;var H=M?a?4:3:a?3:2;let t=0;for(const G of r){const J=l(w,F,t,G,M,a);J&&h.push(J);t+=G*H}h.sort((G,J)=>{let v=G[2]-J[2];0===v&&M&&(v=G[4]-J[4]);return v});h.length&&(H=6*h[0][2],q[0]=h[0][0]/H,q[1]=h[0][1]/H,M&&(H=6*h[0][4],q[2]=0!==H?h[0][3]/H:0),q[0]<
w[0]||q[0]>w[1]||q[1]<w[2]||q[1]>w[3]||M&&(q[2]<w[4]||q[2]>w[5]))&&(q.length=0);if(!q.length)if(u=u.lengths[0]?x(F,0,r[0],M,a):null)q[0]=u[0],q[1]=u[1],M&&2<u.length&&(q[2]=u[2]);else return null;return C};e.lineCentroid=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(e,l,x,C,u,M,a){function q(J,v){if(!v)return null;if("x"in v){var b={x:0,y:0};[b.x,b.y]=J(v.x,v.y,r);null!=v.z&&(b.z=v.z);null!=v.m&&(b.m=v.m);return b}return"xmin"in v?(b={xmin:0,ymin:0,xmax:0,ymax:0},[b.xmin,b.ymin]=J(v.xmin,v.ymin,r),[b.xmax,b.ymax]=J(v.xmax,v.ymax,r),v.hasZ&&(b.zmin=v.zmin,b.zmax=v.zmax,b.hasZ=!0),v.hasM&&(b.mmin=v.mmin,b.mmax=v.mmax,b.hasM=!0),b):"rings"in v?{rings:h(v.rings,J),hasM:v.hasM,hasZ:v.hasZ}:"paths"in v?{paths:h(v.paths,J),hasM:v.hasM,hasZ:v.hasZ}:"points"in
v?{points:w(v.points,J),hasM:v.hasM,hasZ:v.hasZ}:null}function h(J,v){const b=[];for(const m of J)b.push(w(m,v));return b}function w(J,v){const b=[];for(const m of J)J=v(m[0],m[1],[0,0]),b.push(J),2<m.length&&J.push(m[2]),3<m.length&&J.push(m[3]);return b}const r=[0,0],F=q.bind(null,a.lngLatToXY),H=q.bind(null,a.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(J,v,b,m){if(!J?.length||!v||!b||M.equals(v,b))return J;J={geometries:J,inSpatialReference:v,
outSpatialReference:b,geographicTransformation:m,resolve:x.createResolver()};this._jobs.push(J);this._timer??(this._timer=setTimeout(this._process,10));return J.resolve.promise}_process(){this._timer=null;const J=this._jobs.shift();if(J){var {geometries:v,inSpatialReference:b,outSpatialReference:m,resolve:I,geographicTransformation:f}=J;a.canProject(b,m)?M.isWebMercator(m)?I(v.map(F)):I(v.map(H)):I(C.projectMany(u.jsonAdapter,v,b,m,f,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const G=new t;e.checkProjectionSupport=async function(J,v){J&&v&&(J=Array.isArray(J)?J.map(b=>null!=b.geometry?b.geometry.spatialReference:null).filter(l.isSome):[J],await C.initializeProjection(J.map(b=>({source:b,dest:v}))))};e.project=function(J,v,b,m){if(!J)return J;b||(b=v,v=J.spatialReference);return M.isValid(v)&&M.isValid(b)&&!M.equals(v,b)?a.canProject(v,b)?(J=M.isWebMercator(b)?F(J):H(J),J.spatialReference=b,J):C.projectMany(u.jsonAdapter,[J],v,b,null,m)[0]:J};e.projectMany=function(J,
v,b,m){return G.push(J,v,b,m)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCache ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G,J,v,b,m,I,f,L,P,S,ca,U,T,y){function Q(k){if(ca.canQueryWithRBush(k)){if(H.isExtent(k))return[r.fromValues(Math.min(k.xmin,k.xmax),Math.min(k.ymin,k.ymax),Math.max(k.xmin,k.xmax),Math.max(k.ymin,k.ymax))];if(H.isPolygon(k))return k.rings.map(z=>r.fromValues(Math.min(z[0][0],z[2][0]),Math.min(z[0][1],z[2][1]),Math.max(z[0][0],z[2][0]),Math.max(z[0][1],z[2][1])))}return[F.getBoundsXY(r.create(),k)]}class g{constructor(k,z=null,O,X,ba){this.attributes=k;this.geometry=
O;this.centroid=X;this.filterFlags=ba;this.groupId=-1;this.displayId=z}}class d{constructor(k){this._cache=new I.QueryEngineCache;this._changeHandle=null;this.capabilities={query:f.queryCapabilities};this.geometryType=k.geometryType;this.hasM=!!k.hasM;this.hasZ=!!k.hasZ;this.objectIdField=k.objectIdField;this.spatialReference=k.spatialReference;this.definitionExpression=k.definitionExpression;this.featureStore=k.featureStore;this.aggregateAdapter=k.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",
()=>this.clearCache());this.timeInfo=k.timeInfo;this.fieldsIndex=C.isSerializable(k.fieldsIndex)?k.fieldsIndex:T.fromJSON(k.fieldsIndex);this.availableFields=!k.availableFields||1===k.availableFields.length&&"*"===k.availableFields[0]?new Set(this.fieldsIndex.fields.map(z=>z.name)):new Set(k.availableFields.map(z=>this.fieldsIndex.get(z)?.name).filter(z=>null!=z));k.scheduler&&k.priority&&(this._frameTask=k.scheduler.registerTask(k.priority))}destroy(){this._frameTask=M.removeMaybe(this._frameTask);
this.clearCache();M.destroyMaybe(this._cache);this._changeHandle=M.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._cache.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(k,z){z=a.signalFromSignalOrOptions(z);try{return await (await this._executeQuery(k,{},z)).createQueryResponse()}catch(O){if(O!==P.queryEngineEmptyResult)throw O;return(new L.QueryEngineResult([],k,this)).createQueryResponse()}}async executeQueryForCount(k=
{},z){z=a.signalFromSignalOrOptions(z);try{return(await this._executeQuery(k,{returnGeometry:!1,returnCentroid:!1,outSR:null},z)).createQueryResponseForCount()}catch(O){if(O!==P.queryEngineEmptyResult)throw O;return 0}}async executeQueryForExtent(k,z){z=a.signalFromSignalOrOptions(z);const O=k.outSR;try{const X=await this._executeQuery(k,{returnGeometry:!0,returnCentroid:!1,outSR:null},z),ba=X.size;if(!ba)return{count:0,extent:null};const fa=await this._getBounds(X.items,X.spatialReference,O||this.spatialReference);
return{count:ba,extent:fa}}catch(X){if(X===P.queryEngineEmptyResult)return{count:0,extent:null};throw X;}}async executeQueryForIds(k,z){return this.executeQueryForIdSet(k,z).then(O=>Array.from(O))}async executeQueryForIdSet(k,z){z=a.signalFromSignalOrOptions(z);try{const O=await this._executeQuery(k,{returnGeometry:!0,returnCentroid:!1,outSR:null},z),X=O.items,ba=new Set;await this._reschedule(()=>{for(const fa of X)ba.add(O.featureAdapter.getObjectId(fa))},z);return ba}catch(O){if(O===P.queryEngineEmptyResult)return new Set;
throw O;}}async executeQueryForSnapping(k,z){const O=a.signalFromSignalOrOptions(z),{point:X,distance:ba,returnEdge:fa,vertexMode:ma}=k;if(!fa&&"none"===ma)return{candidates:[]};let pa=u.clone(k.query);pa=await this._schedule(()=>P.normalizeQueryLike(pa,this.definitionExpression,this.spatialReference),O);pa=await this._reschedule(()=>S.validateQuery(pa,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),O);(z=!G.equals(X.spatialReference,
this.spatialReference))&&await m.checkProjectionSupport(X.spatialReference,this.spatialReference);var oa="number"===typeof ba?ba:ba.x,qa="number"===typeof ba?ba:ba.y;oa={xmin:X.x-oa,xmax:X.x+oa,ymin:X.y-qa,ymax:X.y+qa,spatialReference:X.spatialReference};oa=z?m.project(oa,this.spatialReference):oa;if(!oa)return{candidates:[]};qa=(await t.normalizeCentralMeridian(H.fromJSON(X),null,{signal:O}))[0];const va=(await t.normalizeCentralMeridian(H.fromJSON(oa),null,{signal:O}))[0];if(null==qa||null==va)return{candidates:[]};
const xa=new L.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(Q(va.toJSON())),O),pa,this);await this._reschedule(()=>this._executeObjectIdsQuery(xa),O);await this._reschedule(()=>this._executeTimeQuery(xa),O);await this._reschedule(()=>this._executeAttributesQuery(xa),O);await this._reschedule(()=>this._executeGeometryQueryForSnapping(xa,O),O);qa=qa.toJSON();qa=z?m.project(qa,this.spatialReference):qa;return xa.createSnappingResponse({...k,point:qa,distance:z?Math.max(oa.xmax-oa.xmin,
oa.ymax-oa.ymin)/2:ba},X.spatialReference)}async executeQueryForLatestObservations(k,z){z=a.signalFromSignalOrOptions(z);if(!this.timeInfo?.trackIdField)throw new x("unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:k,timeInfo:this.timeInfo});try{const O=await this._executeQuery(k,{},z);await this._reschedule(()=>this._filterLatest(O),z);return await O.createQueryResponse()}catch(O){if(O!==P.queryEngineEmptyResult)throw O;return(new L.QueryEngineResult([],k,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(k=
{},z,O){O=a.signalFromSignalOrOptions(O);const {field:X,normalizationField:ba,valueExpression:fa}=z;return(await this._executeQueryForStatistics(k,{field:X,normalizationField:ba,valueExpression:fa},O)).createSummaryStatisticsResponse(z)}async executeQueryForUniqueValues(k={},z,O){O=a.signalFromSignalOrOptions(O);const {field:X,field2:ba,field3:fa,valueExpression:ma}=z;return(await this._executeQueryForStatistics(k,{field:X,field2:ba,field3:fa,valueExpression:ma},O)).createUniqueValuesResponse(z)}async executeQueryForClassBreaks(k=
{},z,O){O=a.signalFromSignalOrOptions(O);const {field:X,normalizationField:ba,valueExpression:fa}=z;return(await this._executeQueryForStatistics(k,{field:X,normalizationField:ba,valueExpression:fa},O)).createClassBreaksResponse(z)}async executeQueryForHistogram(k={},z,O){O=a.signalFromSignalOrOptions(O);const {field:X,normalizationField:ba,valueExpression:fa}=z;return(await this._executeQueryForStatistics(k,{field:X,normalizationField:ba,valueExpression:fa},O)).createHistogramResponse(z)}async fetchRecomputedExtents(k){k=
a.signalFromSignalOrOptions(k);this._timeExtentPromise||(this._timeExtentPromise=U.getTimeExtent(this.timeInfo,this.featureStore));const [z,O]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);a.throwIfAborted(k);return{fullExtent:z,timeExtent:O}}async _getBounds(k,z,O){const X=w.set(w.create(),w.negativeInfinity);await this.featureStore.forEachBounds(k,ba=>w.expandWithAABB(X,ba));k={xmin:X[0],ymin:X[1],xmax:X[3],ymax:X[4],spatialReference:b.cleanFromGeometryEngine(this.spatialReference)};
this.hasZ&&isFinite(X[2])&&isFinite(X[5])&&(k.zmin=X[2],k.zmax=X[5],k.hasZ=!0);z=m.project(k,z,O);z.spatialReference=b.cleanFromGeometryEngine(O);0===z.xmax-z.xmin&&(O=q.getMetersPerUnitForSR(z.spatialReference),z.xmin-=O,z.xmax+=O);0===z.ymax-z.ymin&&(O=q.getMetersPerUnitForSR(z.spatialReference),z.ymin-=O,z.ymax+=O);this.hasZ&&null!=z.zmin&&null!=z.zmax&&0===z.zmax-z.zmin&&(O=q.getMetersPerUnitForSR(z.spatialReference),z.zmin-=O,z.zmax+=O);return z}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise=
"getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then(k=>this._getBounds(k,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(k,z){return null!=this._frameTask?this._frameTask.schedule(k,z):k(y.noBudget)}async _reschedule(k,z){return null!=this._frameTask?this._frameTask.reschedule(k,z):k(y.noBudget)}async _getAllFeaturesQueryEngineResult(k){return new L.QueryEngineResult(await this._getAllFeatures(),
k,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const O=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach(X=>O.push(X))})().then(()=>O)}const k=this._allFeaturesPromise,z=await k;return k===this._allFeaturesPromise?z.slice():this._getAllFeatures()}async _executeQuery(k,z,O){k=u.clone(k);k=await this._schedule(()=>P.normalizeQuery(k,this.definitionExpression,this.spatialReference),O);k=await this._reschedule(()=>S.validateQuery(k,{availableFields:this.availableFields,
fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),O);k={...k,...z};const X=await this._reschedule(()=>this._executeSceneFilterQuery(k,O),O),ba=await this._reschedule(()=>this._executeGeometryQuery(k,X,O),O);await this._reschedule(()=>this._executeAggregateIdsQuery(ba),O);await this._reschedule(()=>this._executeObjectIdsQuery(ba),O);await this._reschedule(()=>this._executeTimeQuery(ba),O);await this._reschedule(()=>this._executeAttributesQuery(ba),
O);return ba}async _executeSceneFilterQuery(k,z){if(null==k.sceneFilter)return null;const {outSR:O,returnGeometry:X,returnCentroid:ba}=k;var fa=this.featureStore.featureSpatialReference,ma=k.sceneFilter.geometry;const pa=null==fa||G.equals(fa,ma.spatialReference)?ma:m.project(ma,fa);if(!pa)return null;fa=X||ba;fa=G.isValid(O)&&!G.equals(this.spatialReference,O)&&fa?async xa=>this._project(xa,O):xa=>xa;const oa=this.featureAdapter;ma=await this._reschedule(()=>this._searchFeatures(Q(pa)),z);if("disjoint"===
k.sceneFilter.spatialRelationship){if(!ma.length)return null;const xa=new Set;for(var qa of ma)xa.add(oa.getObjectId(qa));const Aa=await this._reschedule(()=>this._getAllFeatures(),z);qa=await this._reschedule(async()=>{const Ea=await ca.getSpatialQueryOperator("esriSpatialRelDisjoint",pa,this.geometryType,this.hasZ,this.hasM),Ja=await this._runSpatialFilter(Aa,Sa=>!xa.has(oa.getObjectId(Sa))||Ea(oa.getGeometry(Sa)),z);return new L.QueryEngineResult(Ja,k,this)},z);return fa(qa)}if(!ma.length)return new L.QueryEngineResult([],
k,this);if(this._canExecuteSinglePass(pa,k))return fa(new L.QueryEngineResult(ma,k,this));const va=await ca.getSpatialQueryOperator("esriSpatialRelContains",pa,this.geometryType,this.hasZ,this.hasM);qa=await this._runSpatialFilter(ma,xa=>va(oa.getGeometry(xa)),z);return fa(new L.QueryEngineResult(qa,k,this))}async _executeGeometryQuery(k,z,O){if(null!=z&&0===z.items.length)return z;k=null!=z?z.query:k;const {geometry:X,outSR:ba,spatialRel:fa,returnGeometry:ma,returnCentroid:pa}=k;var oa=this.featureStore.featureSpatialReference;
const qa=!X||null==oa||G.equals(oa,X.spatialReference)?X:m.project(X,oa),va=ma||pa,xa=G.isValid(ba)&&!G.equals(this.spatialReference,ba),Aa=null==z?this._getCacheKey(k):null;oa=Aa?this._cache.get(Aa):null;if(null!=oa)return new L.QueryEngineResult(oa,k,this);oa=async La=>{xa&&va&&await this._project(La,ba);Aa&&this._cache.put(Aa,La.items);return La};if(!qa)return oa(null!=z?z:await this._getAllFeaturesQueryEngineResult(k));const Ea=this.featureAdapter;let Ja=await this._reschedule(()=>this._searchFeatures(Q(X)),
O);if("esriSpatialRelDisjoint"===fa){if(!Ja.length)return oa(null!=z?z:await this._getAllFeaturesQueryEngineResult(k));const La=new Set;for(var Sa of Ja)La.add(Ea.getObjectId(Sa));const n=null!=z?z.items:await this._reschedule(()=>this._getAllFeatures(),O);Sa=await this._reschedule(async()=>{const E=await ca.getSpatialQueryOperator(fa,qa,this.geometryType,this.hasZ,this.hasM),W=await this._runSpatialFilter(n,aa=>!La.has(Ea.getObjectId(aa))||E(Ea.getGeometry(aa)),O);return new L.QueryEngineResult(W,
k,this)},O);return oa(Sa)}if(null!=z){const La=new l.PositionHint;Ja=Ja.filter(n=>0<=l.indexOf(z.items,n,z.items.length,La))}if(!Ja.length)return oa=new L.QueryEngineResult([],k,this),Aa&&this._cache.put(Aa,oa.items),oa;if(this._canExecuteSinglePass(qa,k))return oa(new L.QueryEngineResult(Ja,k,this));const ab=await ca.getSpatialQueryOperator(fa,qa,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Ja,La=>ab(Ea.getGeometry(La)),O);return oa(new L.QueryEngineResult(Sa,k,this))}async _executeGeometryQueryForSnapping(k,
z){const {query:O}=k,{spatialRel:X}=O;if(k?.items?.length&&O.geometry&&X){var ba=await ca.getSpatialQueryOperator(X,O.geometry,this.geometryType,this.hasZ,this.hasM);z=await this._runSpatialFilter(k.items,fa=>ba(fa.geometry),z);k.items=z}}_executeAggregateIdsQuery(k){if(0!==k.items.length&&k.query.aggregateIds?.length&&null!=this.aggregateAdapter){var z=new Set;for(const X of k.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(X).forEach(ba=>z.add(ba));var O=this.featureAdapter.getObjectId;
k.items=k.items.filter(X=>z.has(O(X)))}}_executeObjectIdsQuery(k){if(0!==k.items.length&&k.query.objectIds?.length){var z=new Set(k.query.objectIds),O=this.featureAdapter.getObjectId;k.items=k.items.filter(X=>z.has(O(X)))}}_executeTimeQuery(k){if(0!==k.items.length){var z=U.getTimeOperator(this.timeInfo,k.query.timeExtent,this.featureAdapter);null!=z&&(k.items=k.items.filter(z))}}_executeAttributesQuery(k){if(0!==k.items.length){var z=v.getWhereClause(k.query.where,this.fieldsIndex);if(z){if(!z.isStandardized)throw new TypeError("Where clause is not standardized");
k.items=k.items.filter(O=>z.testFeature(O,this.featureAdapter))}}}async _runSpatialFilter(k,z,O){if(!z)return k;if(null==this._frameTask)return k.filter(ma=>z(ma));let X=0;const ba=[],fa=async ma=>{for(;X<k.length;){const pa=k[X++];z(pa)&&(ba.push(pa),ma.madeProgress());ma.done&&await this._reschedule(oa=>fa(oa),O)}};return this._reschedule(ma=>fa(ma),O).then(()=>ba)}_filterLatest(k){const {trackIdField:z,startTimeField:O,endTimeField:X}=this.timeInfo,ba=X||O,fa=new Map,ma=this.featureAdapter.getAttribute;
for(const pa of k.items){const oa=ma(pa,z),qa=ma(pa,ba),va=fa.get(oa);(!va||qa>ma(va,ba))&&fa.set(oa,pa)}k.items=Array.from(fa.values())}_getCacheKey(k){const {geometry:z,spatialRel:O,returnGeometry:X,returnCentroid:ba,outSR:fa,resultType:ma,cacheHint:pa}=k;if("tile"!==ma&&!pa)return null;k=X||ba;return G.isValid(fa)&&!G.equals(this.spatialReference,fa)&&k?JSON.stringify([z,O,fa]):JSON.stringify([z,O])}_canExecuteSinglePass(k,z){({spatialRel:z}=z);return ca.canQueryWithRBush(k)&&("esriSpatialRelEnvelopeIntersects"===
z||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===z||"esriSpatialRelContains"===z))}async _project(k,z){if(!z||G.equals(this.spatialReference,z))return k;const O=this.featureAdapter;let X=void 0;try{const ba=await this._getFullExtent();X=h.getTransformation(this.spatialReference,z,ba)}catch{}z=await m.projectMany(k.items.map(ba=>b.getGeometry(this.geometryType,this.hasZ,this.hasM,O.getGeometry(ba))),this.spatialReference,z,X);k.items=z.map((ba,fa)=>O.cloneWithGeometry(k.items[fa],
J.convertFromGeometry(ba,this.hasZ,this.hasM)));return k}async _searchFeatures(k){const z=new Set;await Promise.all(k.map(O=>this.featureStore.forEachInBounds(O,X=>z.add(X))));k=Array.from(z.values());z.clear();return k}async _executeQueryForStatistics(k,z,O){k=u.clone(k);try{k=await this._schedule(()=>P.normalizeQuery(k,this.definitionExpression,this.spatialReference),O);k=await this._reschedule(()=>S.validateStatisticsQuery(k,z,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,
geometryType:this.geometryType,spatialReference:this.spatialReference}),O);const X=await this._reschedule(()=>this._executeSceneFilterQuery(k,O),O),ba=await this._reschedule(()=>this._executeGeometryQuery(k,X,O),O);await this._reschedule(()=>this._executeAggregateIdsQuery(ba),O);await this._reschedule(()=>this._executeObjectIdsQuery(ba),O);await this._reschedule(()=>this._executeTimeQuery(ba),O);await this._reschedule(()=>this._executeAttributesQuery(ba),O);return ba}catch(X){if(X!==P.queryEngineEmptyResult)throw X;
return new L.QueryEngineResult([],k,this)}}}e.Feature=g;e.QueryEngine=d;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(e,l,x,C,u,M,a,q,h,w,r){function F(m){const I=[];let f=0,L=0;for(let P=0;P<
m.length;P++){const S=m[P];let ca=null;for(let U=0;U<S.length;U++)ca=S[U],I.push(ca),0===U?L=f=ca[0]:(f=Math.min(f,ca[0]),L=Math.max(L,ca[0]));ca&&I.push([(f+L)/2,0])}return I}function H(m,I){if(!(m instanceof M||m instanceof u))throw b().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new x("straightLineDensify: the input geometry is neither polyline nor polygon");var f=a.getGeometryParts(m);const L=[];for(const S of f){f=[];L.push(f);f.push([S[0][0],S[0][1]]);for(let ca=
0;ca<S.length-1;ca++){const U=S[ca][0],T=S[ca][1],y=S[ca+1][0],Q=S[ca+1][1];var P=Math.sqrt((y-U)*(y-U)+(Q-T)*(Q-T));const g=(Q-T)/P,d=(y-U)/P,k=P/I;if(1<k){for(let z=1;z<=k-1;z++){const O=z*I;f.push([d*O+U,g*O+T])}P=(P+Math.floor(k-1)*I)/2;f.push([d*P+U,g*P+T])}f.push([y,Q])}}return"polygon"===m.type?new u({rings:L,spatialReference:m.spatialReference}):new M({paths:L,spatialReference:m.spatialReference})}function t(m,I,f){I&&(m=H(m,1E6),m=h.webMercatorToGeographic(m,!0));f&&(m=a.updatePolyGeometry(m,
f));return m}function G(m,I,f){if(Array.isArray(m)){var L=m[0];L>I?(f=a.offsetMagnitude(L,I),m[0]=L+-2*f*I):L<f&&(I=a.offsetMagnitude(L,f),m[0]=L+-2*I*f)}else L=m.x,L>I?(f=a.offsetMagnitude(L,I),m=m.clone().offset(-2*f*I,0)):L<f&&(I=a.offsetMagnitude(L,f),m=m.clone().offset(-2*I*f,0));return m}function J(m,I){let f=-1;for(let L=0;L<I.cutIndexes.length;L++){const P=I.cutIndexes[L],S=I.geometries[L],ca=a.getGeometryParts(S);for(let U=0;U<ca.length;U++){const T=ca[U];T.some(y=>{if(180>y[0])return!0;
y=0;for(var Q=0;Q<T.length;Q++){var g=T[Q][0];y=g>y?g:y}y=Number(y.toFixed(9));y=-360*a.offsetMagnitude(y,180);for(Q=0;Q<T.length;Q++)g=S.getPoint(U,Q),S.setPoint(U,Q,g.clone().offset(y,0));return!0})}if(P===f)if("polygon"===m[0].type)for(const U of a.getGeometryParts(S))m[P]=m[P].addRing(U);else{if("polyline"===m[0].type)for(const U of a.getGeometryParts(S))m[P]=m[P].addPath(U)}else f=P,m[P]=S}return m}async function v(m,I,f){if(!Array.isArray(m))return v([m],I);I&&"string"!==typeof I&&b().warn("normalizeCentralMeridian()",
"The url object is deprecated, use the url string instead");var L="string"===typeof I?I:I?.url??l.geometryServiceUrl;let P,S,ca;let U=0;var T=[];I=[];for(var y of m)if(null==y)I.push(y);else{if(!Q){var Q=y.spatialReference;var g=q.getInfo(Q);var d=(P=Q.isWebMercator)?102100:4326;S=a.cutParams[d].maxX;ca=a.cutParams[d].minX;var k=a.cutParams[d].plus180Line;d=a.cutParams[d].minus180Line}if(g)if("mesh"===y.type)I.push(y);else if("point"===y.type)I.push(G(y.clone(),S,ca));else if("multipoint"===y.type){var z=
y.clone();z.points=z.points.map(O=>G(O,S,ca));I.push(z)}else if("extent"===y.type)z=y.clone()._normalize(!1,!1,g),I.push(z.rings?new u(z):z);else if(y.extent){z=y.extent;const O=2*a.offsetMagnitude(z.xmin,ca)*S;let X=0===O?y.clone():a.updatePolyGeometry(y.clone(),O);z.offset(O,0);let {xmin:ba,xmax:fa}=z;ba=Number(ba.toFixed(9));fa=Number(fa.toFixed(9));z.intersects(k)&&fa!==S?(U=fa>U?fa:U,X=t(X,P),T.push(X),I.push("cut")):z.intersects(d)&&ba!==ca?(U=2*fa*S>U?2*fa*S:U,X=t(X,P,360),T.push(X),I.push("cut")):
I.push(X)}else I.push(y.clone());else I.push(y)}Q=a.offsetMagnitude(U,S);g=-90;k=Q;for(y=new M;0<Q;)d=-180+360*Q,y.addPath([[d,g],[d,-1*g]]),g*=-1,Q--;if(0<T.length&&0<k){Q=await w.cut(L,T,y,f);Q=J(T,Q);g=[];T=[];for(k=0;k<I.length;k++)y=I[k],"cut"!==y?T.push(y):(y=Q.shift(),d=m[k],null!=d&&"polygon"===d.type&&d.rings&&1<d.rings.length&&y.rings.length>=d.rings.length?(g.push(y),T.push("simplify")):T.push(P?h.geographicToWebMercator(y):y));if(!g.length)return T;I=await r.simplify(L,g,f);m=[];for(f=
0;f<T.length;f++)L=T[f],"simplify"!==L?m.push(L):m.push(P?h.geographicToWebMercator(I.shift()):I.shift());return m}m=[];for(f=0;f<I.length;f++)L=I[f],"cut"!==L?m.push(L):(L=T.shift(),m.push(!0===P?h.geographicToWebMercator(L):L));return m}const b=()=>C.getLogger("esri.geometry.support.normalizeUtils");e.getClosestDenormalizedXToReference=function(m,I,f){f=q.getInfo(f);if(null==f)return m;const [L,P]=f.valid;f=2*P;let S=0,ca=0;I>P?S=Math.ceil(Math.abs(I-P)/f):I<L&&(S=-Math.ceil(Math.abs(I-L)/f));m>
P?ca=Math.ceil(Math.abs(m-P)/f):m<L&&(ca=-Math.ceil(Math.abs(m-L)/f));m+=(S-ca)*f;I=m-I;I>P?m-=f:I<L&&(m+=f);return m};e.getDenormalizedExtent=function(m){if(!m)return null;const I=m.extent;if(!I)return null;var f=m.spatialReference&&q.getInfo(m.spatialReference);if(!f)return I;const [L,P]=f.valid;({width:f}=I);let {xmin:S,xmax:ca}=I;[S,ca]=[ca,S];if("extent"===m.type||0===f||f<=P||f>2*P||S<L||ca>P)return I;let U;switch(m.type){case "polygon":if(1<m.rings.length)U=F(m.rings);else return I;break;case "polyline":if(1<
m.paths.length)U=F(m.paths);else return I;break;case "multipoint":U=m.points}m=I.clone();for(let T=0;T<U.length;T++){let y=U[T][0];0>y?(y+=P,ca=Math.max(y,ca)):(y-=P,S=Math.min(y,S))}m.xmin=S;m.xmax=ca;return m.width<f?(m.xmin-=P,m.xmax-=P,m):I};e.normalizeCentralMeridian=v;e.normalizeMapX=function(m,I){if(I=q.getInfo(I)){const [f,L]=I.valid;I=L-f;if(m<f)for(;m<f;)m+=I;if(m>L)for(;m>L;)m-=I}return m};e.straightLineDensify=H;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports",
"../Polyline","../SpatialReference","./jsonUtils"],function(e,l,x,C){function u(M){return C.isPolygon(M)?M.rings:M.paths}l={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new l({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator}),minus180Line:new l({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator})},4326:{maxX:180,
minX:-180,plus180Line:new l({paths:[[[180,-180],[180,180]]],spatialReference:x.WGS84}),minus180Line:new l({paths:[[[-180,-180],[-180,180]]],spatialReference:x.WGS84})}};e.cutParams=l;e.getGeometryParts=u;e.offsetMagnitude=function(M,a){return Math.ceil((M-a)/(2*a))};e.updatePolyGeometry=function(M,a){const q=u(M);for(const h of q)for(const w of h)w[0]+=a;return M};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),
function(e,l,x,C,u,M){e.cut=async function(a,q,h,w){a=M.parseUrl(a);const r=q[0].spatialReference;q={...w,responseType:"json",query:{...a.query,f:"json",sr:u.srToRESTValue(r),target:JSON.stringify({geometryType:C.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(h)}};q=await x(a.path+"/cut",q);const {cutIndexes:F,geometries:H=[]}=q.data;return{cutIndexes:F,geometries:H.map(t=>{t=C.fromJSON(t);t.spatialReference=r;return t})}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(e,l,x,C,u,M){function a(q,h,w){const r={};for(const H in q)if("declaredClass"!==H){var F=q[H];null!=F&&"function"!==typeof F&&(Array.isArray(F)?r[H]=F.map(t=>a(t)):"object"===typeof F?F.toJSON?(F=F.toJSON(w?.[H]),r[H]=h?F:JSON.stringify(F)):r[H]=h?F:JSON.stringify(F):r[H]=F)}return r}e.asValidOptions=function(q,h){return h?{...h,query:{...(q??{}),...h.query}}:{query:q}};e.encode=a;e.getToken=function(q,h){return q?M.isApiKeyApplicable(q,h)?h||l.apiKey:x.id?.findCredential(q)?.token:null};
e.parseUrl=function(q){return"string"===typeof q?u.urlToObject(q):C.clone(q)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(e,l,x,C,u,M){e.simplify=async function(a,q,h){const w="string"===typeof a?x.urlToObject(a):a;a=q[0].spatialReference;const r=C.getJsonType(q[0]);q={...h,query:{...w.query,
f:"json",sr:u.srToRESTValue(a),geometries:JSON.stringify(M.encodeGeometries(q))}};({data:q}=await l(w.path+"/simplify",q));return M.decodeGeometries(q.geometries,r,a)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(e,l){e.decodeGeometries=function(x,C,u){const M=l.getGeometryType(C);return x.map(a=>{a=M.fromJSON(a);a.spatialReference=u;return a})};e.encodeGeometries=function(x){return{geometryType:l.getJsonType(x[0]),
geometries:x.map(C=>C.toJSON())}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(e,l,x,C){function u(t,G,J={}){const v=M(G,t);if(!v)throw J=r.getError(G,t),new l("unsupported-query","invalid SQL expression",{expression:G,error:J});t=J.expressionName||"expression";if(J.validateStandardized&&!v.isStandardized)throw new l("unsupported-query",
`${t} is not standard`,{expression:G});if(J.validateAggregate&&!v.isAggregate)throw new l("unsupported-query",`${t} does not contain a valid aggregate function`,{expression:G});return v.fieldNames}function M(t,G){return t?r.get(t,G):null}function a(t){return/\((.*?)\)/.test(t)?t:t.split(" as ")[0]}function q(t,G,J,v={}){const b=new Map;h(b,t,G,v.allowedFieldTypes??H,J);if(b.size)throw new l("unsupported-query",`${v.expressionName??"expression"} contains invalid or missing fields`,{errors:Array.from(b.values()),
query:v.query});}function h(t,G,J,v,b){b=b.includes("*")?[...J,...b.filter(m=>"*"!==m)]:b;for(const m of b)if(G.get(m))w(t,G,J,v,m);else try{const I=a(m),f=u(G,I,{validateStandardized:!0});for(const L of f)w(t,G,J,v,L)}catch(I){t.set(m,{type:"expression-error",expression:m,error:I})}}function w(t,G,J,v,b){(G=G.get(b))?J.has(G.name)?"all"!==v&&!1===v?.has(G.type)&&t.set(b,{type:"invalid-type",fieldName:G.name,fieldType:C.kebabDict.fromJSON(G.type),allowedFieldTypes:Array.from(v,m=>C.kebabDict.fromJSON(m))}):
t.set(b,{type:"missing-field",fieldName:G.name}):t.set(b,{type:"invalid-field",fieldName:b})}const r=new x.WhereClauseCache(50,500);x=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const F=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),H=new Set(["esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...x,
...F]);e.allDateAndTimeFieldTypes=F;e.getAliasFromFieldName=function(t){return t.split(" as ")[1]};e.getExpressionFromFieldName=a;e.getWhereClause=M;e.numericFieldTypes=x;e.validateFields=q;e.validateHaving=function(t,G,J,v,b){if(!J)return!0;const m=u(t,J,{validateAggregate:!0,expressionName:"having clause"});q(t,G,m,{expressionName:"having clause",query:b});if(!M(J,t)?.getExpressions().every(I=>{const {aggregateType:f,field:L}=I,P=t.get(L)?.name;return v.some(S=>{const {onStatisticField:ca,statisticType:U}=
S;return t.get(ca)?.name===P&&U.toLowerCase().trim()===f})}))throw new l("unsupported-query","expressions in having clause should also exist in outStatistics",{having:J});return!0};e.validateWhere=function(t,G,J,v){if(!J)return!0;J=u(t,J,{validateStandardized:!0,expressionName:"where clause"});q(t,G,J,{expressionName:"where clause",query:v});return!0};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../LRUCache","./WhereClause"],
function(e,l,x){class C{constructor(u,M){this._cache=new l.LRUCache(u);this._invalidCache=new l.LRUCache(M)}get(u,M){const a=`${M.uid}:${u}`,q=this._cache.get(a);if(q)return q;if(null!=this._invalidCache.get(a))return null;try{const h=x.WhereClause.create(u,{fieldsIndex:M});this._cache.put(a,h);return h}catch(h){return this._invalidCache.put(a,h),null}}getError(u,M){return this._invalidCache.get(`${M.uid}:${u}`)??null}}e.WhereClauseCache=C;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},
"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(e,l){class x{constructor(C,u){this._storage=new l.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=C;this._storage.register(this);u&&this._storage.registerRemoveFunc("",u)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(C,u,M=1){this._storage.put(this,C,u,M,1)}pop(C){return this._storage.pop(this,C)}get(C){return this._storage.get(this,C)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(C){this._storage.maxSize=
C}resetHitRate(){}}e.LRUCache=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(e,l){e.RemoveMode=void 0;(function(a){a[a.ALL=0]="ALL";a[a.SOME=1]="SOME"})(e.RemoveMode||(e.RemoveMode={}));class x{constructor(a,q,h){this.name=a;this._storage=q;this.id=`${u++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);h&&(this._storage.registerRemoveFunc(this.id,h),
this._removeFunc=!0)}destroy(){this._storage.clear(this);this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(a){return this._storage.getSize(this,a)}resetHitRate(){this._hit=this._miss=0}put(a,q,h,w=0){this._storage.put(this,a,q,h,w)}pop(a){a=this._storage.pop(this,a);void 0===a?++this._miss:++this._hit;return a}get(a){a=this._storage.get(this,
a);void 0===a?++this._miss:++this._hit;return a}peek(a){return this._storage.peek(this,a)}updateSize(a,q,h){this._storage.updateSize(this,a,q,h)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class C{get size(){return this._size}constructor(a=10485760){this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new l;this._users=new l}destroy(){this.clearAll();
this._removeFuncs.clear();this._users.clear();this._db=null}register(a){this._users.push(a)}deregister(a){this._users.removeUnordered(a)}registerRemoveFunc(a,q){this._removeFuncs.push([a,q])}deregisterRemoveFunc(a){this._removeFuncs.filterInPlace(q=>q[0]!==a)}get maxSize(){return this._maxSize}set maxSize(a){this._maxSize=Math.max(a,-1);this._checkSize()}getSize(a,q){return this._db.get(a.id+q)?.size??0}put(a,q,h,w,r){q=a.id+q;const F=this._db.get(q);F&&(this._size-=F.size,a.size-=F.size,this._db.delete(q),
F.entry!==h&&this._notifyRemove(q,F.entry,F.size,e.RemoveMode.ALL));w>this._maxSize?this._notifyRemove(q,h,w,e.RemoveMode.ALL):void 0===h?console.warn("Refusing to cache undefined entry "):!w||0>w?(console.warn(`Refusing to cache entry with size ${w} for key ${q}`),this._notifyRemove(q,h,0,e.RemoveMode.ALL)):(this._db.set(q,new M(h,w,1+Math.max(r,-4)- -3)),this._size+=w,a.size+=w,this._checkSize())}updateSize(a,q,h,w){q=a.id+q;const r=this._db.get(q);if(r&&r.entry===h){this._size-=r.size;for(a.size-=
r.size;w>this._maxSize;)if(w=this._notifyRemove(q,h,w,e.RemoveMode.SOME),!(null!=w&&0<w)){this._db.delete(q);return}r.size=w;this._size+=w;a.size+=w;this._checkSize()}}pop(a,q){q=a.id+q;const h=this._db.get(q);if(h)return this._size-=h.size,a.size-=h.size,this._db.delete(q),++this._hit,h.entry;++this._miss}get(a,q){q=a.id+q;a=this._db.get(q);if(void 0===a)++this._miss;else return this._db.delete(q),a.lives=a.lifetime,this._db.set(q,a),++this._hit,a.entry}peek(a,q){(a=this._db.get(a.id+q))?++this._hit:
++this._miss;return a?.entry}get performanceInfo(){const a={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},h=[];this._db.forEach((F,H)=>{const t=F.lifetime;h[t]=(h[t]||0)+F.size;this._users.forAll(G=>{const {id:J,name:v}=G;H.startsWith(J)&&(q[v]=(q[v]||0)+F.size)})});const w={};this._users.forAll(F=>{const H=F.name;"hitRate"in F&&"number"===typeof F.hitRate&&!isNaN(F.hitRate)&&
0<F.hitRate?(q[H]=q[H]||0,w[H]=Math.round(100*F.hitRate)+"%"):w[H]="0%"});var r=Object.keys(q);r.sort((F,H)=>q[H]-q[F]);r.forEach(F=>a[F]=Math.round(q[F]/2**20)+"MB / "+w[F]);for(r=h.length-1;0<=r;--r){const F=h[r];F&&(a["Priority "+(r+-3-1)]=Math.round(F/this._size*100)+"%")}return a}resetStats(){this._hit=this._miss=0;this._users.forAll(a=>a.resetHitRate())}clear(a){const q=a.id;this._db.forEach((h,w)=>{w.startsWith(q)&&(this._size-=h.size,this._db.delete(w),this._notifyRemove(w,h.entry,h.size,
e.RemoveMode.ALL))});a.size=0}clearAll(){this._db.forEach((a,q)=>this._notifyRemove(q,a.entry,a.size,e.RemoveMode.ALL));this._users.forAll(a=>a.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(a,q,h,w){let r;this._removeFuncs.some(F=>a.startsWith(F[0])?(F=F[1](q,w,h),"number"===typeof F&&(r=F),!0):!1);return r}_checkSize(){this._users.forAll(a=>this._checkSizeLimits(a));this._checkSizeLimits()}_checkSizeLimits(a){const q=a??this;if(!(0>q.maxSize||
q.size<=q.maxSize)){for(var h=a?.id,w=!0;w;){w=!1;for(const [r,F]of this._db)if(0===F.lifetime&&(!h||r.startsWith(h))){this._purgeItem(r,F,a);if(q.size<=.9*q.maxSize)return;w||=this._db.has(r)}}for(const [r,F]of this._db)if(!h||r.startsWith(h))if(this._purgeItem(r,F,a),q.size<=.9*q.maxSize)break}}_purgeItem(a,q,h=this._users.find(w=>a.startsWith(w.id))){this._db.delete(a);if(1>=q.lives){this._size-=q.size;h&&(h.size-=q.size);const w=this._notifyRemove(a,q.entry,q.size,e.RemoveMode.SOME);null!=w&&
0<w&&(this._size+=w,h&&(h.size+=w),q.lives=q.lifetime,q.size=w,this._db.set(a,q))}else--q.lives,this._db.set(a,q)}}let u=0;class M{constructor(a,q,h){this.entry=a;this.size=q;this.lives=this.lifetime=h}}e.MemCache=x;e.MemCacheStorage=C;e.MinPriority=-3;e.NoPriority=-4;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../has ./AggregateFunctions ./DateOnly ./errorSupport ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G){function J(y){return Array.isArray(y)?y:[y]}function v(y){return null!==y?!0!==y:null}function b(y,Q){return null!=y&&null!=Q?!0===y&&!0===Q:!1===y||!1===Q?!1:null}function m(y,Q){return null!=y&&null!=Q?!0===y||!0===Q:!0===y||!0===Q?!0:null}function I(y,Q,g){if(null==y)return null;g=!1;for(const d of Q)if(null==d)g=null;else if(y===d){g=!0;break}else if(q.isDateOrTimeValue(y)&&q.isDateOrTimeValue(d)&&(g=q.sqlCompare(y,d,"\x3d")))break;return g}function f(y,
Q,g){if(null==y)return null;let d="",k=U.Normal;for(let z=0;z<Q.length;z++){const O=Q.charAt(z);switch(k){case U.Normal:O===g?k=U.Escaped:d="-[]/{}()*+?.\\^$|".includes(O)?d+("\\"+O):"%"===O?d+".*":"_"===O?d+".":d+O;break;case U.Escaped:d="-[]/{}()*+?.\\^$|".includes(O)?d+("\\"+O):d+O,k=U.Normal}}return(new RegExp("^"+d+"$","m")).test(y)}function L(y,Q,g,d){y=d.getAttribute(y,Q);Q=g?.get(Q);return null==y||"esriFieldTypeDate"!==Q?.type&&"date"!==Q?.type?null==y||"esriFieldTypeDateOnly"!==Q?.type&&
"date-only"!==Q?.type?null==y||"esriFieldTypeTimeOnly"!==Q?.type&&"time-only"!==Q?.type?null==y||"esriFieldTypeTimestampOffset"!==Q?.type&&"timestamp-offset"!==Q?.type?y:new r.SqlTimeStampOffset(y):H.TimeOnly.fromReader(y):u.DateOnly.fromReader(y):h.convertToExecutingTimeZone(new Date(y),g?.getLuxonTimeZone(Q.name)??G.FixedOffsetZone.utcInstance)}const P=new Set(["current_timestamp","current_date","current_time"]);class S{static makeBool(y){return!0===y}static featureValue(y,Q,g,d){return L(y,Q,g,
d)}static equalsNull(y){return null===y}static applyLike(y,Q,g){return f(y,Q,g)}static ensureArray(y){return J(y)}static applyIn(y,Q,g){return I(y,Q)}static currentTimestamp(y){return h.convertToExecutingTimeZone(new Date,y)}static currentDate(y){return u.DateOnly.fromNow(y)}static currentTime(y){y=h.convertToExecutingTimeZone(new Date,y);return H.TimeOnly.fromDateTime(y)}static makeSqlInterval(y,Q,g){return w.SqlInterval.createFromValueAndQualifier(y,Q,g)}static convertInterval(y){return y instanceof
w.SqlInterval?y.valueInMilliseconds():y}static compare(y,Q,g,d){return q.sqlCompare(Q,g,y)}static calculate(y,Q,g,d){return a.sqlCalculateFunction(y,Q,g,d)}static evaluateTime(y){return h.parseTime(y)}static evaluateTimestamp(y,Q,g){return h.parseTimestamp(y,Q,g)}static evaluateDate(y,Q){return h.parseDate(y,Q)}static evaluateFunction(y,Q,g){return F.evaluateFunction(y,Q,g)}static lookup(y,Q){y=Q[y];return void 0===y?null:y}static between(y,Q,g){return null==y||null==Q[0]||null==Q[1]?null:q.sqlCompare(y,
Q[0],"\x3e\x3d")&&q.sqlCompare(y,Q[1],"\x3c\x3d")}static notbetween(y,Q,g){return null==y||null==Q[0]||null==Q[1]?null:q.sqlCompare(y,Q[0],"\x3c")||q.sqlCompare(y,Q[1],"\x3e")}static ternaryNot(y){return v(y)}static ternaryAnd(y,Q){return b(y,Q)}static ternaryOr(y,Q){return m(y,Q)}}class ca{constructor(y,Q,g="UTC",d=null){this.fieldsIndex=Q;this.timeZone=g;this.currentUser=d;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(y);const {isStandardized:k,isAggregate:z,
currentUserRequired:O,referencedFieldNames:X}=this._extractExpressionInfo(Q);this._referencedFieldNames=X;this.isStandardized=k;this.isAggregate=z;this.currentUserRequired=O}static convertValueToStorageFormat(y,Q=null){if(null===Q)return h.isDate(y)?y.getTime():h.isDateTime(y)?y.toMillis():h.isTimestampOffset(y)?y.toStorageFormat():h.isTimeOnly(y)?y.toStorageString():h.isDateOnly(y)?y.toStorageFormat():y;switch(Q){case "date":if(h.isDate(y))return y.getTime();if(h.isDateTime(y))return y.toMillis();
if(h.isTimestampOffset(y))return y.toMilliseconds();if(h.isDateOnly(y))return y.toNumber();break;case "date-only":if(h.isDate(y))return u.DateOnly.fromDateJS(y).toString();if(h.isTimestampOffset(y))return u.DateOnly.fromSqlTimeStampOffset(y).toString();if(h.isDateTime(y))return u.DateOnly.fromDateTime(y).toString();break;case "time-only":if(h.isDate(y))return H.TimeOnly.fromDateJS(y).toStorageString();if(h.isDateTime(y))return H.TimeOnly.fromDateTime(y).toStorageString();if(h.isTimestampOffset(y))return H.TimeOnly.fromSqlTimeStampOffset(y).toStorageString();
if(h.isTimeOnly(y))return y.toStorageString();break;case "timestamp-offset":if(h.isDate(y))return r.SqlTimeStampOffset.fromJSDate(y).toStorageFormat();if(h.isDateTime(y))return r.SqlTimeStampOffset.fromDateTime(y).toStorageFormat();if(h.isTimestampOffset(y))return y.toStorageFormat()}return y}static create(y,Q={}){return new ca(y,Q.fieldsIndex,Q.timeZone??void 0,Q.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(y,Q=T,g=this.currentUser){return!!this._evaluateNode(this.parseTree,
null,Q,y,g)}calculateValue(y,Q=T,g=this.currentUser){y=this._evaluateNode(this.parseTree,y,Q,null,g);return y instanceof w.SqlInterval?y.valueInMilliseconds()/864E5:y}calculateValueCompiled(y,Q=T,g=this.currentUser){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(y,this.parameters,Q,this.fieldsIndex,this.timeZone,g??null);if(x("esri-csp-restrictions"))return this.calculateValue(y,Q);this._compileMe();return this.parseTree._compiledVersion(y,this.parameters,Q,this.fieldsIndex,
this.timeZone,g??null)}testFeature(y,Q=T,g=this.currentUser){return!!this._evaluateNode(this.parseTree,y,Q,null,g)}testFeatureCompiled(y,Q=T,g=this.currentUser){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(y,this.parameters,Q,this.fieldsIndex,this.timeZone,g??null);if(x("esri-csp-restrictions"))return this.testFeature(y,Q);this._compileMe();return!!this.parseTree._compiledVersion(y,this.parameters,Q,this.fieldsIndex,this.timeZone,g??null)}get hasDateFunctions(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;t.visitAll(this.parseTree,y=>{"current-time"===y.type?this._hasDateFunctions=!0:"function"===y.type&&(this._hasDateFunctions=this._hasDateFunctions||P.has(y.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const y=new Set;t.visitAll(this.parseTree,Q=>{"function"===Q.type&&y.add(Q.name.toLowerCase())});return Array.from(y)}getExpressions(){const y=new Map;t.visitAll(this.parseTree,Q=>{if("function"===
Q.type){const g=Q.name.toLowerCase();Q=Q.args.value[0];if("column-reference"===Q.type){Q=Q.column;const d=`${g}-${Q}`;y.has(d)||y.set(d,{aggregateType:g,field:Q})}}});return[...y.values()]}getVariables(){const y=new Set;t.visitAll(this.parseTree,Q=>{"parameter"===Q.type&&y.add(Q.value.toLowerCase())});return Array.from(y)}_compileMe(){const y="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter",
"fieldsIndex","timeZone","currentUser",y)).bind(S)}_extractExpressionInfo(y){const Q=[],g=new Set;let d=!0,k=!1,z=!1;t.visitAll(this.parseTree,O=>{switch(O.type){case "column-reference":var X=y?.get(O.column);let ba;X?X=ba=X.name??"":(ba=O.column,X=ba.toLowerCase());g.has(X)||(g.add(X),Q.push(ba));O.column=ba;break;case "current-user":z=!0;break;case "function":const {name:fa,args:ma}=O;O=ma.value.length;d&&=F.isStandardized(fa,O);!1===k&&(k=C.isAggregate(fa,O))}});return{referencedFieldNames:Array.from(Q),
isStandardized:d,isAggregate:k,currentUserRequired:z}}evaluateNodeToJavaScript(y){switch(y.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(y.value)+", "+JSON.stringify(y.qualifier)+","+JSON.stringify(y.op)+")";case "case-expression":var Q="";if("simple"===y.format){var g=this.evaluateNodeToJavaScript(y.operand);Q="( ";for(let d=0;d<y.clauses.length;d++)Q+=" (this.compare('\x3d',"+g+","+this.evaluateNodeToJavaScript(y.clauses[d].operand)+") ? ("+this.evaluateNodeToJavaScript(y.clauses[d].value)+
") : "}else for(Q="( ",g=0;g<y.clauses.length;g++)Q+=" this.makeBool("+this.evaluateNodeToJavaScript(y.clauses[g].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(y.clauses[g].value)+") : ";Q=null!==y.else?Q+this.evaluateNodeToJavaScript(y.else):Q+"null";return Q+" )";case "parameter":return"this.lookup("+JSON.stringify(y.value.toLowerCase())+",lookups)";case "expression-list":Q="[";for(g of y.value)"["!==Q&&(Q+=","),Q+=this.evaluateNodeToJavaScript(g);return Q+"]";case "unary-expression":return"this.ternaryNot("+
this.evaluateNodeToJavaScript(y.expr)+")";case "binary-expression":switch(y.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+" )";case "IS":if("null"!==y.right.type)throw new M.SqlError(M.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(y.left)+")";case "ISNOT":if("null"!==
y.right.type)throw new M.SqlError(M.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(y.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(y.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(y.right)+"), timeZone)";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(y.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(y.right)+"), timeZone))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(y.left)+
","+this.evaluateNodeToJavaScript(y.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+","+JSON.stringify(y.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+","+JSON.stringify(y.escape)+
"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(y.operator)+","+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(y.operator)+","+this.evaluateNodeToJavaScript(y.left)+","+this.evaluateNodeToJavaScript(y.right)+", timeZone)";default:throw new M.SqlError(M.SqlErrorCodes.UnsupportedOperator,{operator:y.operator});
}case "null":case "boolean":case "string":case "number":return JSON.stringify(y.value);case "time":return"this.evaluateTime("+JSON.stringify(y.value)+")";case "date":return"this.evaluateDate("+JSON.stringify(y.value)+", 'unknown')";case "timestamp":return"this.evaluateTimestamp("+JSON.stringify(y.value)+", 'unknown')";case "current-time":return"date"===y.mode?"this.currentDate(timeZone)":"time"===y.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case "current-user":return"currentUser";
case "column-reference":return"this.featureValue(feature,"+JSON.stringify(y.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(y.name)+","+this.evaluateNodeToJavaScript(y.args)+", timeZone)"}throw new M.SqlError(M.SqlErrorCodes.UnsupportedSyntax,{node:y.type});}_evaluateNode(y,Q,g,d,k){switch(y.type){case "interval":return g=this._evaluateNode(y.value,Q,g,d,k),w.SqlInterval.createFromValueAndQualifier(g,y.qualifier,y.op);case "case-expression":if("simple"===
y.format){var z=this._evaluateNode(y.operand,Q,g,d,k);for(var O=0;O<y.clauses.length;O++)if(q.sqlCompare(z,this._evaluateNode(y.clauses[O].operand,Q,g,d,k),"\x3d",this.timeZone))return this._evaluateNode(y.clauses[O].value,Q,g,d,k)}else for(z=0;z<y.clauses.length;z++)if(!0===this._evaluateNode(y.clauses[z].operand,Q,g,d,k))return this._evaluateNode(y.clauses[z].value,Q,g,d,k);return null!==y.else?this._evaluateNode(y.else,Q,g,d,k):null;case "parameter":return y=this.parameters[y.value.toLowerCase()],
h.isDate(y)?G.DateTime.fromJSDate(y):y instanceof l.ArcadeDate?y.toDateTime():y;case "expression-list":z=[];for(var X of y.value)z.push(this._evaluateNode(X,Q,g,d,k));return z;case "unary-expression":return v(this._evaluateNode(y.expr,Q,g,d,k));case "binary-expression":switch(y.operator){case "AND":return b(this._evaluateNode(y.left,Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k));case "OR":return m(this._evaluateNode(y.left,Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k));case "IS":if("null"!==y.right.type)throw new M.SqlError(M.SqlErrorCodes.UnsupportedIsRhs);
return null===this._evaluateNode(y.left,Q,g,d,k);case "ISNOT":if("null"!==y.right.type)throw new M.SqlError(M.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(y.left,Q,g,d,k);case "IN":return z=J(this._evaluateNode(y.right,Q,g,d,k)),I(this._evaluateNode(y.left,Q,g,d,k),z,this.timeZone);case "NOT IN":return z=J(this._evaluateNode(y.right,Q,g,d,k)),v(I(this._evaluateNode(y.left,Q,g,d,k),z,this.timeZone));case "BETWEEN":return z=this._evaluateNode(y.left,Q,g,d,k),y=this._evaluateNode(y.right,
Q,g,d,k),null==z||null==y[0]||null==y[1]?null:q.sqlCompare(z,y[0],"\x3e\x3d",this.timeZone)&&q.sqlCompare(z,y[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return z=this._evaluateNode(y.left,Q,g,d,k),y=this._evaluateNode(y.right,Q,g,d,k),null==z||null==y[0]||null==y[1]?null:q.sqlCompare(z,y[0],"\x3c",this.timeZone)||q.sqlCompare(z,y[1],"\x3e",this.timeZone);case "LIKE":return f(this._evaluateNode(y.left,Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k),y.escape);case "NOT LIKE":return v(f(this._evaluateNode(y.left,
Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k),y.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return q.sqlCompare(this._evaluateNode(y.left,Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k),y.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return a.sqlCalculateFunction(y.operator,this._evaluateNode(y.left,Q,g,d,k),this._evaluateNode(y.right,Q,g,d,k),this.timeZone)}case "null":case "boolean":case "string":case "number":return y.value;case "date":return y.parsedValue??
(y.parsedValue=h.parseDate(y.value,"unknown")),y.parsedValue;case "timestamp":return y.parsedValue??(y.parsedValue=h.parseTimestamp(y.value,"unknown")),y.parsedValue;case "time":return h.parseTime(y.value);case "current-time":return"date"===y.mode?S.currentDate(this.timeZone):"time"===y.mode?S.currentTime(this.timeZone):S.currentTimestamp(this.timeZone);case "current-user":return k??null;case "column-reference":return L(Q,y.column,this.fieldsIndex,g);case "data-type":return y.value;case "function":if(this.isAggregate&&
C.isAggregate(y.name,y.args.value.length)){Q=[];for(z of y.args?.value||[]){X=[];for(O of d||[])X.push(this._evaluateNode(z,O,g,null,k));Q.push(X)}return C.aggregateFunction(y.name,Q)}g=this._evaluateNode(y.args,Q,g,d,k);return F.evaluateFunction(y.name,g,this.timeZone)}throw new M.SqlError(M.SqlErrorCodes.UnsupportedSyntax,{node:y.type});}}var U;(function(y){y[y.Normal=0]="Normal";y[y.Escaped=1]="Escaped"})(U||={});const T={getAttribute(y,Q){return(y&&"object"===typeof y.attributes?y.attributes:
y)[Q]}};e.WhereClause=ca;e.defaultAttributeAdapter=T;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(e,l,x,C){function u(w,r,F){return w<r?w-r:w>F?w-F:0}function M(w,r=!0){if(w instanceof C.Zone)return w;if("system"===w.toLowerCase())return"system";if("utc"===w.toLowerCase())return"UTC";if("unknown"===w.toLowerCase())return x.UnknownTimeZone.instance;
if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(w)){const F=C.FixedOffsetZone.parseSpecifier("UTC"+(w.startsWith("+")||w.startsWith("-")?"":"+")+w);if(F)return F}w=C.IANAZone.create(w);if(!w.isValid){if(r)throw new q(e.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return w}e.ArcadeDateErrorCodes=void 0;(e.ArcadeDateErrorCodes||(e.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const a={[e.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};
class q extends Error{constructor(w,r){super(l.replace(a[w],r));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,q)}}class h{constructor(w){this._date=w;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(w=0,r=1,F=1,H=0,t=0,G=0,J=0,v){if(isNaN(w)||isNaN(r)||isNaN(F)||isNaN(H)||isNaN(t)||isNaN(G)||isNaN(J))return null;const b=C.DateTime.local(w,r).daysInMonth;w=C.DateTime.fromObject({day:1>F?1:F>b?b:F,year:w,month:1>r?1:12<
r?12:r,hour:0>H?0:23<H?23:H,minute:0>t?0:59<t?59:t,second:0>G?0:59<G?59:G,millisecond:0>J?0:999<J?999:J},{zone:M(v)});w=w.plus({months:u(r,1,12),days:u(F,1,b),hours:u(H,0,23),minutes:u(t,0,59),seconds:u(G,0,59),milliseconds:u(J,0,999)});return new h(w)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(w,r){r=M(r);return w.isUnknownTimeZone||r===x.UnknownTimeZone.instance?h.fromParts(w.year,w.monthJS+1,w.day,
w.hour,w.minute,w.second,w.millisecond,r):new h(w._date.setZone(r))}static dateJSToArcadeDate(w){return new h(C.DateTime.fromJSDate(w,{zone:"system"}))}static dateJSAndZoneToArcadeDate(w,r="system"){r=M(r);return new h(C.DateTime.fromJSDate(w,{zone:r}))}static unknownEpochToArcadeDate(w){return new h(C.DateTime.fromMillis(w,{zone:x.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(w){return new h(C.DateTime.fromMillis(w.getTime(),{zone:x.UnknownTimeZone.instance}))}static epochToArcadeDate(w,
r="system"){r=M(r);return new h(C.DateTime.fromMillis(w,{zone:r}))}static dateTimeToArcadeDate(w){return new h(w)}clone(){return new h(this._date)}changeTimeZone(w){w=M(w);return h.dateTimeToArcadeDate(this._date.setZone(w))}static dateTimeAndZoneToArcadeDate(w,r){r=M(r);return w.zone===x.UnknownTimeZone.instance||r===x.UnknownTimeZone.instance?h.fromParts(w.year,w.month,w.day,w.hour,w.minute,w.second,w.millisecond,r):new h(w.setZone(r))}static nowToArcadeDate(w){w=M(w);return new h(C.DateTime.fromJSDate(new Date,
{zone:w}))}static nowUTCToArcadeDate(){return new h(C.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===h.systemTimeZoneCanonicalName}equals(w){return this.isSystem&&w.isSystem?this.toNumber()===w.toNumber():this.isUnknownTimeZone!==w.isUnknownTimeZone?!1:this._date.equals(w._date)}get isUnknownTimeZone(){return this._date.zone===x.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let w=
this._date.weekday;6<w&&(w=0);return w}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const w=this.zone;return"fixed"===w.type?0===w.fixed?"UTC":w.formatOffset(0,"short"):w.name}stringify(){return JSON.stringify(this.toJSDate())}plus(w){return new h(this._date.plus(w))}diff(w,r="milliseconds"){return this._date.diff(w._date,r)[r]}toISODate(){return this._date.toISODate()}toISOString(w){return w?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(w,r){return this._date.toISOTime({suppressMilliseconds:w,
includeOffset:r&&!this.isUnknownTimeZone})}toFormat(w,r){this.isUnknownTimeZone&&(w=w.replaceAll("Z",""));return this._date.toFormat(w,r)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new h(this._date.toUTC())}toLocal(){return new h(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(w){if(!w)return null;
w=C.DateTime.fromISO(w,{setZone:!0});return new h(w)}}e.ArcadeDate=h;e.ArcadeDateError=q;e.arcadeDateErrorMessages=a;e.createDateTimeZone=M;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(e,l){function x(u){return u instanceof l.Zone?u===C.instance?!0:!1:"unknown"===u?.toString().toLowerCase()?!0:!1}class C{}C.instance=new l.IANAZone("Etc/UTC");e.UnknownTimeZone=C;e.adoptTimeZone=function(u,
M){return l.DateTime.fromObject({day:u.day,year:u.year,month:u.month,hour:u.hour,minute:u.minute,second:u.second,millisecond:u.millisecond},{zone:M})};e.isUnknownTimeZone=x;e.substituteUnknownTimezone=function(u){return x(u)?C.instance:u};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ./DateOnly ./errorSupport ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(e,l,x,C,u,M){function a(r){if(null===
r)return null;let F=0,H=0;for(let t=0;t<r.length;t++){const G=r[t];if(null!==G){if("number"!==typeof G)throw new x.SqlError(x.SqlErrorCodes.InvalidValueForAggregateFunction);H++;F+=G}}return 0===H?null:F/r.length}function q(r,F){if(null===r)return null;let H=null,t=null;for(const G of r)r=G,r=G instanceof l.DateOnly?G.toNumber():G instanceof u.TimeOnly?G.toNumber():G instanceof M.DateTime?G.toMillis():G instanceof C.SqlTimeStampOffset?G.toMilliseconds():G,null===H?(H=G,t=r):"max"===F&&null!==t&&null!==
r&&t<=r?(H=G,t=r):"min"===F&&null!==t&&null!==r&&t>=r&&(H=G,t=r);return H}function h(r){if(null===r)return null;r=r.filter(t=>null!==t);if(0===r.length)return null;const F=a(r);if(null===F)return null;let H=0;for(const t of r){if("number"!==typeof t)throw new x.SqlError(x.SqlErrorCodes.InvalidValueForAggregateFunction);H+=(F-t)**2}return H/(r.length-1)}const w={min:{minParams:1,maxParams:1,evaluate:r=>q(r[0],"min")},max:{minParams:1,maxParams:1,evaluate:r=>q(r[0],"max")},avg:{minParams:1,maxParams:1,
evaluate:r=>a(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{r=r[0];if(null===r)r=null;else{var F=0;for(let H=0;H<r.length;H++){const t=r[H];if(null!==t){if("number"!==typeof t)throw new x.SqlError(x.SqlErrorCodes.InvalidValueForAggregateFunction);F+=t}}r=F}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>{r=r[0];null===r?r=null:(r=h(r),r=null===r?null:Math.sqrt(r));return r}},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>
h(r[0])}};e.aggregateFunction=function(r,F){const H=w[r.toLowerCase()];if(null==H)throw new x.SqlError(x.SqlErrorCodes.FunctionNotRecognized);if(F.length<H.minParams||F.length>H.maxParams)throw new x.SqlError(x.SqlErrorCodes.InvalidParameterCount,{name:r.toUpperCase()});return H.evaluate(F)};e.isAggregate=function(r,F){r=w[r.toLowerCase()];return null!=r&&F>=r.minParams&&F<=r.maxParams};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports",
"../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(e,l,x,C){function u(a){a=a.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$\x26]");let q="";const h=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const w of a.match(h)||[])switch(w){case "D":q+="d";break;case "DD":q+="dd";break;case "DDD":q+="o";break;case "d":q+="c";break;case "ddd":q+=
"ccc";break;case "dddd":q+="cccc";break;case "M":q+="L";break;case "MM":q+="LL";break;case "MMM":q+="LLL";break;case "MMMM":q+="LLLL";break;case "YY":q+="yy";break;case "Y":case "YYYY":q+="yyyy";break;case "Q":q+="q";break;case "X":case "x":q+=w;break;default:q=2<=w.length&&"["===w.slice(0,1)&&"]"===w.slice(-1)?q+`'${w.slice(1,-1)}'`:q+`'${w}'`}return q}class M{constructor(a,q,h){this._year=a;this._month=q;this._day=h;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-
1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(a){return a instanceof M&&a.day===this.day&&a.month===this.month&&a.year===this.year}clone(){return new M(this._year,this._month,this._day)}toDateTime(a){return C.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:l.createDateTimeZone(a)})}toDateTimeLuxon(a){return C.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:l.createDateTimeZone(a)})}toString(){return`${this.year.toString().padStart(4,
"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(a=null,q=!0){if(null===a||""===a)return this.toString();q&&(a=u(a));if(!a)return"";q=this.toDateTime("unknown");return l.ArcadeDate.dateTimeToArcadeDate(q).toFormat(a,{locale:x.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const a=this.toDateTime("unknown");return l.ArcadeDate.dateTimeToArcadeDate(a)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(a,q){return M.fromDateTime(this.toUTCDateTime().plus({[a]:q}))}toUTCDateTime(){return C.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(a,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(a.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(a.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===
q?this.toUTCDateTime().diff(a.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(a.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(a.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(a.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(a.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(a){a=C.DateTime.fromMillis(a,{zone:C.FixedOffsetZone.utcInstance});return a.isValid?M.fromParts(a.year,a.month,a.day):null}static fromSeconds(a){a=C.DateTime.fromSeconds(a,{zone:C.FixedOffsetZone.utcInstance});return a.isValid?M.fromParts(a.year,a.month,a.day):null}static fromReader(a){if(!a)return null;a=a.split("-");return 3!==a.length?null:new M(parseInt(a[0],10),parseInt(a[1],
10),parseInt(a[2],10))}static fromParts(a,q,h){a=new M(a,q,h);return!1===a.isValid?null:a}static fromDateJS(a){return M.fromParts(a.getFullYear(),a.getMonth()+1,a.getDay())}static fromDateTime(a){return M.fromParts(a.year,a.month,a.day)}static fromSqlTimeStampOffset(a){return this.fromDateTime(a.toDateTime())}static fromString(a,q=null){if(""===a||null===a)return null;var h=[];if(q)(q=u(q))&&h.push(q);else if(null===q||""===q)return a=C.DateTime.fromISO(a,{setZone:!0}),a.isValid?M.fromParts(a.year,
a.month,a.day):null;for(const w of h)if(h=C.DateTime.fromFormat(a,q??w),h.isValid)return new M(h.year,h.month,h.day);return null}static fromNow(a="system"){a=C.DateTime.fromJSDate(new Date).setZone(l.createDateTimeZone(a));return new M(a.year,a.month,a.day)}}e.DateOnly=M;e.standardizeDateOnlyFormat=u;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/errorSupport":function(){define(["exports","../string"],function(e,l){e.SqlErrorCodes=void 0;(function(u){u.InvalidFunctionParameters=
"InvalidFunctionParameters";u.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";u.UnsupportedSqlFunction="UnsupportedSqlFunction";u.UnsupportedOperator="UnsupportedOperator";u.UnsupportedSyntax="UnsupportedSyntax";u.UnsupportedIsRhs="UnsupportedIsRhs";u.UnsupportedIsLhs="UnsupportedIsLhs";u.InvalidDataType="InvalidDataType";u.CannotCastValue="CannotCastValue";u.FunctionNotRecognized="FunctionNotRecognized";u.InvalidTime="InvalidTime";u.InvalidParameterCount="InvalidParameterCount";
u.InvalidTimeStamp="InvalidTimeStamp";u.InvalidDate="InvalidDate";u.InvalidOperator="InvalidOperator";u.IllegalInterval="IllegalInterval";u.YearMonthIntervals="YearMonthIntervals";u.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";u.MissingStatisticParameters="MissingStatisticParameters"})(e.SqlErrorCodes||(e.SqlErrorCodes={}));const x={[e.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[e.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",
[e.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[e.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[e.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[e.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[e.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[e.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[e.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",
[e.SqlErrorCodes.InvalidDate]:"Invalid date encountered",[e.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[e.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[e.SqlErrorCodes.IllegalInterval]:"Illegal interval",[e.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[e.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[e.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[e.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",
[e.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",[e.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class C extends Error{constructor(u,M){super(l.replace(x[u],M));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,C)}}e.SqlError=C;e.sqlErrorMessages=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports",
"../../chunks/datetime"],function(e,l){function x(u){return Number.isNaN(u)||0===u?u:Math.trunc(u)}class C{constructor(u){this._timeStampOffset=u;this._date=null}toDateTime(){this._date??(this._date=l.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return x(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return x(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return C.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(u){return new C(l.DateTime.fromJSDate(u).toISO({includeOffset:!0}))}static fromDateTime(u){return new C(u.toISO({includeOffset:!0}))}static fromParts(u,
M,a=0,q=0,h=0,w=0,r=0,F=!1,H=0,t=0){u=`${u.toString().padStart(4,"0")}-${M.toString().padStart(2,"0")}-${a.toString().padStart(2,"0")}`;M="";10>w&&(M="0");q=`${q.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${M+w.toString()}`;0!==r&&(q+="."+r.toString().padStart(3,"0"));r=`${F?"-":"+"}${H.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new C(u+"T"+q+r)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let u=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});u&&=u.replace(".000","");return u}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(u){u=this.toDateTime().plus(u);return C.fromDateTime(u)}}e.SqlTimeStampOffset=C;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(e,l,x,C){function u(a){if(!a)return"";const q=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let h="";for(const w of a.match(q)||
[])switch(w){case "SSS":h+=w;break;case "A":case "a":h+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":h+=w;break;default:h+=`'${w}'`}return h}class M{constructor(a,q,h,w){this._hour=a;this._minute=q;this._second=h;this._millisecond=w;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(a){return a instanceof M&&a.hour===
this.hour&&a.minute===this.minute&&a.second===this.second&&a.millisecond===this.millisecond}clone(){return new M(this.hour,this.minute,this.second,this.millisecond)}isValid(){return l.isInteger(this.hour)&&l.isInteger(this.minute)&&l.isInteger(this.second)&&l.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(a=null){return null===a||""===a?this.toString():(a=u(a))?C.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(a,{locale:x.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(a,q,h,w){a=new M(a,q,h,w);return a.isValid()?a:null}static fromReader(a){if(!a)return null;a=a.split(":");return 3!==a.length?null:new M(parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],
10),0)}static fromMilliseconds(a){return 864E5<a||0>a?null:new M(Math.floor(a/36E5%24),Math.floor(a/6E4%60),Math.floor(a/1E3%60),Math.floor(a%1E3))}static fromDateJS(a){return new M(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}static fromDateTime(a){return new M(a.hour,a.minute,a.second,a.millisecond)}static fromSqlTimeStampOffset(a){return this.fromDateTime(a.toDateTime())}static fromString(a,q=null){if(""===a||null===a)return null;const h=[];if(q)(q=u(q))&&h.push(q);else if(null===
q||""===q)h.push("HH:mm:ss"),h.push("HH:mm:ss.SSS"),h.push("hh:mm:ss a"),h.push("hh:mm:ss.SSS a"),h.push("HH:mm"),h.push("hh:mm a"),h.push("H:mm"),h.push("h:mm a"),h.push("H:mm:ss"),h.push("h:mm:ss a"),h.push("H:mm:ss.SSS"),h.push("h:mm:ss.SSS a");for(const w of h)if(q=C.DateTime.fromFormat(a,w),q.isValid)return new M(q.hour,q.minute,q.second,q.millisecond);return null}plus(a,q){switch(a){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return M.fromDateTime(this.toUTCDateTime().plus({[a]:q}))}return null}toUTCDateTime(){return C.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(a,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(a.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(a.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===q?this.toUTCDateTime().diff(a.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(a.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(a.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(a.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(a.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds}}}e.TimeOnly=M;e.standardizeTimeFormat=u;Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(e,l){e.cloneGeometry=function(x){if(null==x)return null;const C=x.clone();void 0!==x.cache._geVersion&&(C.cache._geVersion=x.cache._geVersion);return C};e.convertLinearUnitsToCode=function(x){if(null==x)return null;if("number"===typeof x)return x;x=x.toLowerCase();x=x.replaceAll(/\s/g,"");x=x.replaceAll("-","");switch(x){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};e.convertSquareUnitsToCode=
function(x){if(null==x)return null;if("number"===typeof x)return x;x=x.toLowerCase();x=x.replaceAll(/\s/g,"");x=x.replaceAll("-","");switch(x){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};e.isInteger=function(x){return"number"===typeof x&&isFinite(x)&&Math.floor(x)===x};e.sameGeomType=function(x,C){return x===C||"point"===x&&"esriGeometryPoint"===C||"polyline"===x&&"esriGeometryPolyline"===
C||"polygon"===x&&"esriGeometryPolygon"===C||"extent"===x&&"esriGeometryEnvelope"===C||"multipoint"===x&&"esriGeometryMultipoint"===C||"point"===C&&"esriGeometryPoint"===x||"polyline"===C&&"esriGeometryPolyline"===x||"polygon"===C&&"esriGeometryPolygon"===x||"extent"===C&&"esriGeometryEnvelope"===x||"multipoint"===C&&"esriGeometryMultipoint"===x?!0:!1};e.shapeExtent=function(x){if(null==x)return null;switch(x.type){case "polygon":case "multipoint":case "polyline":return x.extent;case "point":return new l({xmin:x.x,
ymin:x.y,xmax:x.x,ymax:x.y,spatialReference:x.spatialReference});case "extent":return x}return null};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","./errorSupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(e,l,x,C,u){function M(B,K,N){switch(N){case "+":return B+K;case "-":return B-K;case "*":return B*K;case "/":return B/K}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function a(B,
K,N){switch(N){case "+":return K.plus({milliseconds:B.valueInMilliseconds()});case "-":return B.valueInMilliseconds()-K.toMillis()}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function q(B,K,N){switch(N){case "+":return K.plus("milliseconds",B.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function h(B,K,N){switch(N){case "+":return K.plus("milliseconds",B.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function w(B,K,N){switch(N){case "+":return B.plus("milliseconds",
K.valueInMilliseconds());case "-":return B.plus("milliseconds",-1*K.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function r(B,K,N){switch(N){case "+":return K.addMilliseconds(B.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function F(B,K,N){switch(N){case "+":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+K.valueInMilliseconds());case "-":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-K.valueInMilliseconds());
case "*":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()*K.valueInMilliseconds());case "/":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()/K.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function H(B,K,N){switch(N){case "+":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()+K);case "-":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()-K);case "*":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()*
K);case "/":return C.SqlInterval.createFromMilliseconds(B.valueInMilliseconds()/K)}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function t(B,K,N){switch(N){case "+":return C.SqlInterval.createFromMilliseconds(B+K.valueInMilliseconds());case "-":return C.SqlInterval.createFromMilliseconds(B-K.valueInMilliseconds());case "*":return C.SqlInterval.createFromMilliseconds(B*K.valueInMilliseconds());case "/":return C.SqlInterval.createFromMilliseconds(B/K.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function G(B,K,N){switch(N){case "+":return B.plus("milliseconds",K.valueInMilliseconds());case "-":return B.plus("milliseconds",-1*K.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function J(B,K,N){switch(N){case "+":return B.plus({milliseconds:K.valueInMilliseconds()});case "-":return B.minus({milliseconds:K.valueInMilliseconds()})}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function v(B,K,N){switch(N){case "+":return B.addMilliseconds(K.valueInMilliseconds());
case "-":return B.addMilliseconds(-1*K.valueInMilliseconds())}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function b(B,K,N){K*=864E5;switch(N){case "+":return B.plus({milliseconds:K});case "-":return B.minus({milliseconds:K})}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function m(B,K,N){K*=864E5;switch(N){case "+":return B.plus("milliseconds",K);case "-":return B.plus("milliseconds",-1*K)}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function I(B,K,N){K*=864E5;switch(N){case "+":return B.plus("milliseconds",
K);case "-":return B.plus("milliseconds",-1*K)}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function f(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function L(B,K,N){K*=864E5;switch(N){case "+":return B.addMilliseconds(K);case "-":return B.addMilliseconds(-1*K)}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function P(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function S(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function ca(B,
K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function U(B,K,N){K=parseFloat(K);if(isNaN(K))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);return M(B,K,N)}function T(B,K,N){B=parseFloat(B);if(isNaN(B))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);return M(B,K,N)}function y(B,K,N){switch(N){case "+":return B+K}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function Q(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function g(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function d(B,K,N){switch(N){case "-":return B.toDateTimeLuxon(K.zone).diff(K).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function k(B,K,N){switch(N){case "-":return B.toDateTimeLuxon(K.toDateTime().zone).diff(K.toDateTime()).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function z(B,K,N){switch(N){case "-":return B.toDateTimeLuxon("UTC").diff(K.toDateTimeLuxon("UTC")).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function O(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function X(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function ba(B,K,N){switch(N){case "-":return B.toDateTime().diff(K.toDateTimeLuxon(B.toDateTime().zone)).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function fa(B,K,N){switch(N){case "-":return B.toDateTime().diff(K).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function ma(B,K,N){switch(N){case "-":return B.toDateTime().diff(K.toDateTime()).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function pa(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function oa(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function qa(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function va(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function xa(B,K,N){switch(N){case "-":return B.diff(K).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function Aa(B,K,N){switch(N){case "-":return B.diff(K.toDateTimeLuxon(B.zone)).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function Ea(B,K,N){switch(N){case "-":return B.diff(K.toDateTime()).as("days")}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function Ja(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function Sa(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function ab(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function La(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function n(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}function E(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function W(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function aa(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}function ja(B,K,N){throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}e.calculateDateOnlyAndDateOnly=z;e.calculateDateOnlyAndDateTime=d;e.calculateDateOnlyAndNumber=m;e.calculateDateOnlyAndSqlInterval=G;e.calculateDateOnlyAndString=Sa;e.calculateDateOnlyAndTimeOnly=O;e.calculateDateOnlyAndTimestamp=
k;e.calculateDateTimeAndDateOnly=Aa;e.calculateDateTimeAndDateTime=xa;e.calculateDateTimeAndNumber=b;e.calculateDateTimeAndSqlInterval=J;e.calculateDateTimeAndString=La;e.calculateDateTimeAndTimeOnly=Ja;e.calculateDateTimeAndTimestamp=Ea;e.calculateNumberAndDateOnly=ca;e.calculateNumberAndDateTime=f;e.calculateNumberAndNumber=M;e.calculateNumberAndSqlInterval=t;e.calculateNumberAndString=U;e.calculateNumberAndTimeOnly=S;e.calculateNumberAndTimestamp=P;e.calculateSqlIntervalAndDateOnly=h;e.calculateSqlIntervalAndDateTime=
a;e.calculateSqlIntervalAndNumber=H;e.calculateSqlIntervalAndSqlInterval=F;e.calculateSqlIntervalAndString=Q;e.calculateSqlIntervalAndTimeOnly=q;e.calculateSqlIntervalAndTimestamp=r;e.calculateStringAndDateOnly=W;e.calculateStringAndDateTime=aa;e.calculateStringAndNumber=T;e.calculateStringAndSqlInterval=g;e.calculateStringAndString=y;e.calculateStringAndTimeOnly=E;e.calculateStringAndTimestamp=ja;e.calculateTimeOnlyAndDateOnly=oa;e.calculateTimeOnlyAndDateTime=pa;e.calculateTimeOnlyAndNumber=I;e.calculateTimeOnlyAndSqlInterval=
w;e.calculateTimeOnlyAndString=ab;e.calculateTimeOnlyAndTimeOnly=va;e.calculateTimeOnlyAndTimestamp=qa;e.calculateTimestampAndDateOnly=ba;e.calculateTimestampAndDateTime=fa;e.calculateTimestampAndNumber=L;e.calculateTimestampAndSqlInterval=v;e.calculateTimestampAndString=n;e.calculateTimestampAndTimeOnly=X;e.calculateTimestampAndTimestamp=ma;e.sqlCalculateFunction=function(B,K,N,V){if("||"===B)return u.evaluateFunction("concat",[K,N],V);if(null===K||null===N)return null;if(x.isNumber(K)){if(x.isNumber(N))return M(K,
N,B);if(x.isSqlInterval(N))return t(K,N,B);if(x.isTimeOnly(N))return S();if(x.isDateOnly(N))return ca();if(x.isTimestampOffset(N))return P();if(x.isDateTime(N))return f();if(x.isString(N))return U(K,N,B)}else if(x.isDateOnly(K)){if(x.isNumber(N))return m(K,N,B);if(x.isSqlInterval(N))return G(K,N,B);if(x.isTimeOnly(N))return O();if(x.isDateOnly(N))return z(K,N,B);if(x.isTimestampOffset(N))return k(K,N,B);if(x.isDateTime(N))return d(K,N,B);if(x.isString(N))return Sa()}else if(x.isTimeOnly(K)){if(x.isNumber(N))return I(K,
N,B);if(x.isSqlInterval(N))return w(K,N,B);if(x.isTimeOnly(N))return va();if(x.isDateOnly(N))return oa();if(x.isTimestampOffset(N))return qa();if(x.isDateTime(N))return pa();if(x.isString(N))return ab()}else if(x.isSqlInterval(K)){if(x.isNumber(N))return H(K,N,B);if(x.isSqlInterval(N))return F(K,N,B);if(x.isTimeOnly(N))return q(K,N,B);if(x.isDateOnly(N))return h(K,N,B);if(x.isTimestampOffset(N))return r(K,N,B);if(x.isDateTime(N))return a(K,N,B);if(x.isString(N))return Q()}else if(x.isDateTime(K)){if(x.isNumber(N))return b(K,
N,B);if(x.isSqlInterval(N))return J(K,N,B);if(x.isTimeOnly(N))return Ja();if(x.isDateOnly(N))return Aa(K,N,B);if(x.isTimestampOffset(N))return Ea(K,N,B);if(x.isDateTime(N))return xa(K,N,B);if(x.isString(N))return La()}else if(x.isTimestampOffset(K)){if(x.isNumber(N))return L(K,N,B);if(x.isSqlInterval(N))return v(K,N,B);if(x.isTimeOnly(N))return X();if(x.isDateOnly(N))return ba(K,N,B);if(x.isTimestampOffset(N))return ma(K,N,B);if(x.isDateTime(N))return fa(K,N,B);if(x.isString(N))return n()}else if(x.isString(K)){if(x.isNumber(N))return T(K,
N,B);if(x.isSqlInterval(N))return g();if(x.isTimeOnly(N))return E();if(x.isDateOnly(N))return W();if(x.isTimestampOffset(N))return ja();if(x.isDateTime(N))return aa();if(x.isString(N))return y(K,N,B)}throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ./DateOnly ./errorSupport ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(e,l,x,C,u,M,a,q){function h(b,m,I){I=t.exec(b);if(null!==I){const [,f,L,P,S,ca,U,T]=I;b=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(L,10),day:parseInt(P,10),hour:parseInt(S,10),minute:parseInt(ca,10),second:parseInt(U,10),millisecond:T?parseInt(T.replace(".",""),10):0},{zone:a.substituteUnknownTimezone(m)});if(!1===b.isValid)throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);return b}I=G.exec(b);if(null!==I){const [,f,L,P,S,ca,U,T,y,Q,g]=I;b=u.SqlTimeStampOffset.fromParts(parseInt(f,
10),parseInt(L,10),parseInt(P,10),parseInt(S,10),parseInt(ca,10),parseInt(U,10),T?parseInt(T.replace(".",""),10):0,"-"===y,parseInt(Q,10),parseInt(g,10));if(!1===b.isValid)throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);return b}I=J.exec(b);if(null!==I){const [,f,L,P,S,ca,U,T,y]=I;b=u.SqlTimeStampOffset.fromParts(parseInt(f,10),parseInt(L,10),parseInt(P,10),parseInt(S,10),parseInt(ca,10),0,0,"-"===U,parseInt(T,10),parseInt(y,10));if(!1===b.isValid)throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);
return b}I=v.exec(b);if(null!==I){const [,f,L,P,S,ca]=I;b=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(L,10),day:parseInt(P,10),hour:parseInt(S,10),minute:parseInt(ca,10),second:0},{zone:a.substituteUnknownTimezone(m)});if(!1===b.isValid)throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);return b}I=H.exec(b);if(null!==I){const [,f,L,P]=I;b=q.DateTime.fromObject({year:parseInt(f,10),month:parseInt(L,10),day:parseInt(P,10),hour:0,minute:0,second:0},{zone:a.substituteUnknownTimezone(m)});
if(!1===b.isValid)throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);return b}throw new x.SqlError(x.SqlErrorCodes.InvalidTimeStamp);}const w=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,r=/^(\d{1,2}):(\d{1,2})$/,F=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,
v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;e.convertToExecutingTimeZone=function(b,m){if(m instanceof q.Zone)return m===a.UnknownTimeZone.instance?q.DateTime.fromMillis(b.getTime(),{zone:a.UnknownTimeZone.instance}):q.DateTime.fromJSDate(b,{zone:m});switch(m){case "system":case "local":case null:return q.DateTime.fromJSDate(b);default:return"unknown"===m?.toLowerCase()?q.DateTime.fromMillis(b.getTime(),{zone:a.UnknownTimeZone.instance}):q.DateTime.fromJSDate(b,{zone:m})}};e.isDate=function(b){return b instanceof
Date};e.isDateOnly=function(b){return b instanceof l.DateOnly};e.isDateTime=function(b){return b instanceof q.DateTime};e.isNumber=function(b){return"number"===typeof b};e.isSqlInterval=function(b){return b instanceof C.SqlInterval};e.isString=function(b){return"string"===typeof b||b instanceof String};e.isTimeOnly=function(b){return b instanceof M.TimeOnly};e.isTimestampOffset=function(b){return b instanceof u.SqlTimeStampOffset};e.parseDate=function(b,m){const I=H.exec(b);if(null===I)try{return h(b,
m)}catch{throw new x.SqlError(x.SqlErrorCodes.InvalidDate);}const [,f,L,P]=I;b=l.DateOnly.fromParts(parseInt(f,10),parseInt(L,10),parseInt(P,10));if(null===b)throw new x.SqlError(x.SqlErrorCodes.InvalidDate);return b};e.parseTime=function(b){let m=w.exec(b);if(null!==m){const [,I,f,L]=m;b=M.TimeOnly.fromParts(parseInt(I,10),parseInt(f,10),parseInt(L,10),0);if(null!==b)return b;throw new x.SqlError(x.SqlErrorCodes.InvalidTime);}m=r.exec(b);if(null!==m){const [,I,f]=m;b=M.TimeOnly.fromParts(parseInt(I,
10),parseInt(f,10),0,0);if(null!==b)return b;throw new x.SqlError(x.SqlErrorCodes.InvalidTime);}m=F.exec(b);if(null!==m){const [,I,f,L,P]=m;b=M.TimeOnly.fromParts(parseInt(I,10),parseInt(f,10),parseInt(L,10),parseInt(P,10));if(null!==b)return b}throw new x.SqlError(x.SqlErrorCodes.InvalidTime);};e.parseTimestamp=h;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","./errorSupport"],function(e,l){class x{constructor(){this.op="+";
this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(C){if(null!==C.precision||null!==C.secondary)throw new l.SqlError(l.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(C,u){u.includes(".")?(u=u.split("."),C.second=parseFloat(u[0]),C.millis=parseInt(u[1],10)):C.second=parseFloat(u)}static createFromMilliseconds(C){const u=new x;u.second=C/1E3;return u}static createFromValueAndQualifier(C,u,M){let a=null;const q=new x;q.op="-"===
M?"-":"+";if("interval-period"===u.type){x._fixDefaults(u);M=RegExp("^[0-9]{1,}$");if("year"===u.period||"month"===u.period)throw new l.SqlError(l.SqlErrorCodes.YearMonthIntervals);if("second"===u.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(C))x._parseSecondsComponent(q,C);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);else if(M.test(C))q[u.period]=parseFloat(C);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);}else{x._fixDefaults(u.start);x._fixDefaults(u.end);if("year"===
u.start.period||"month"===u.start.period||"year"===u.end.period||"month"===u.end.period)throw new l.SqlError(l.SqlErrorCodes.YearMonthIntervals);switch(u.start.period){case "day":switch(u.end.period){case "hour":a=RegExp("^[0-9]{1,} [0-9]{1,}$");if(a.test(C))q[u.start.period]=parseFloat(C.split(" ")[0]),q[u.end.period]=parseFloat(C.split(" ")[1]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;case "minute":a=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(a.test(C))q[u.start.period]=
parseFloat(C.split(" ")[0]),C=C.split(" ")[1].split(":"),q.hour=parseFloat(C[0]),q.minute=parseFloat(C[1]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;case "second":a=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(a.test(C))q[u.start.period]=parseFloat(C.split(" ")[0]),C=C.split(" ")[1].split(":"),q.hour=parseFloat(C[0]),q.minute=parseFloat(C[1]),x._parseSecondsComponent(q,C[2]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;default:throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(u.end.period){case "minute":a=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(a.test(C))q.hour=parseFloat(C.split(":")[0]),q.minute=parseFloat(C.split(":")[1]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;case "second":a=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(a.test(C))C=C.split(":"),q.hour=parseFloat(C[0]),q.minute=parseFloat(C[1]),x._parseSecondsComponent(q,C[2]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;default:throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(u.end.period){case "second":a=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(a.test(C))C=C.split(":"),q.minute=parseFloat(C[0]),x._parseSecondsComponent(q,C[1]);else throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);break;default:throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);}break;default:throw new l.SqlError(l.SqlErrorCodes.IllegalInterval);}}return q}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}e.SqlInterval=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../mathUtils ../string ./DateOnly ./errorSupport ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(e,l,x,C,u,M,a,q,h){function w(v){return"string"===typeof v||v instanceof String}function r(v){return a.isDate(v)||a.isDateOnly(v)||a.isDateTime(v)||
a.isTimeOnly(v)||a.isTimestampOffset(v)?!1:!0}function F(v){return a.isDateOnly(v)||a.isTimeOnly(v)?v.toString():a.isTimestampOffset(v)?v.toSQLValue():a.isDateTime(v)?0===v.millisecond?v.toFormat("yyyy-LL-dd HH:mm:ss"):v.toSQL({includeOffset:!1}):a.isDate(v)?F(h.DateTime.fromJSDate(v)):v.toString()}function H(v){if(a.isDate(v))return C.DateOnly.fromDateJS(v);if(a.isDateTime(v))return C.DateOnly.fromParts(v.year,v.month,v.day);if(a.isDateOnly(v))return v;if(a.isTimeOnly(v))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);
if(a.isTimestampOffset(v)&&null===C.DateOnly.fromParts(v.year,v.month,v.day))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);if(w(v)&&(v=C.DateOnly.fromReader(v),null!==v&&v.isValid))return v;throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);}function t(v,b,m){if(a.isDate(v))return a.convertToExecutingTimeZone(v,b);if(a.isDateTime(v))return v;if(a.isDateOnly(v))return v.toDateTimeLuxon("unknown");if(a.isTimeOnly(v))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);if(a.isTimestampOffset(v))return v;
if(w(v))return a.parseTimestamp(v,"unknown",m);throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);}function G(v){if(a.isDate(v))return q.TimeOnly.fromDateJS(v);if(a.isDateTime(v))return q.TimeOnly.fromDateTime(v);if(a.isDateOnly(v))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);if(a.isTimeOnly(v))return v;if(a.isTimestampOffset(v))return q.TimeOnly.fromSqlTimeStampOffset(v);if(w(v))return a.parseTime(v);throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);}const J={extract:{minParams:2,
maxParams:2,evaluate:([v,b])=>{if(null==b)return null;if(a.isDate(b))switch(v.toUpperCase()){case "SECOND":return b.getSeconds();case "MINUTE":return b.getMinutes();case "HOUR":return b.getHours();case "DAY":return b.getDate();case "MONTH":return b.getMonth()+1;case "YEAR":return b.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(a.isDateTime(b))switch(v.toUpperCase()){case "SECOND":return b.second;case "MINUTE":return b.minute;case "HOUR":return b.hour;case "DAY":return b.day;
case "MONTH":return b.month;case "YEAR":return b.year}else if(a.isDateOnly(b))switch(v.toUpperCase()){case "DAY":return b.day;case "MONTH":return b.month;case "YEAR":return b.year}else if(a.isTimeOnly(b))switch(v.toUpperCase()){case "SECOND":return b.second;case "MINUTE":return b.minute;case "HOUR":return b.hour}else if(a.isTimestampOffset(b))switch(v.toUpperCase()){case "SECOND":return b.second;case "MINUTE":return b.minute;case "HOUR":return b.hour;case "DAY":return b.day;case "MONTH":return b.month;
case "YEAR":return b.year;case "TIMEZONE_HOUR":return b.timezoneOffsetHour;case "TIMEZONE_MINUTE":return b.timezoneOffsetMinutes}throw new u.SqlError(u.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:v=>{if(2===v.length){const [b,m]=v;return null==b||null==m?null:b.toString().substring(m-1)}if(3===v.length){const [b,m,I]=v;return null==b||null==m||null==I?null:0>=I?"":b.toString().substring(m-1,m+I-1)}}},position:{minParams:2,maxParams:2,
evaluate:([v,b])=>null==v||null==b?null:b.indexOf(v)+1},trim:{minParams:2,maxParams:3,evaluate:v=>{var b=3===v.length,m=b?v[1]:" ";b=b?v[2]:v[1];if(null==m||null==b)return null;m=`(${x.escapeRegExpString(m)})`;switch(v[0]){case "BOTH":return b.replaceAll(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return b.replaceAll(new RegExp(`^${m}*`,"g"),"");case "TRAILING":return b.replaceAll(new RegExp(`${m}*$`,"g"),"")}throw new u.SqlError(u.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.abs(v[0])},ceiling:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.ceil(v[0])},floor:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.floor(v[0])},log:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.log(v[0])},log10:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.log(v[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.sin(v[0])},cos:{minParams:1,maxParams:1,evaluate:v=>
null==v[0]?null:Math.cos(v[0])},tan:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.tan(v[0])},asin:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.asin(v[0])},acos:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.acos(v[0])},atan:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.atan(v[0])},sign:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:0<v[0]?1:0>v[0]?-1:0},power:{minParams:2,maxParams:2,evaluate:v=>null==v[0]||null==v[1]?null:v[0]**v[1]},mod:{minParams:2,
maxParams:2,evaluate:v=>null==v[0]||null==v[1]?null:v[0]%v[1]},round:{minParams:1,maxParams:2,evaluate:v=>{const b=v[0];v=2===v.length?10**v[1]:1;return null==b?null:Math.round(b*v)/v}},truncate:{minParams:1,maxParams:2,evaluate:v=>null==v[0]?null:1===v.length||0===v[1]?Math.trunc(v[0]):l.decimalAdjust("trunc",v[0],-Number(v[1]))},char_length:{minParams:1,maxParams:1,evaluate:v=>w(v[0])?v[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:v=>{let b="";for(let m=0;m<v.length;m++){if(null==
v[m])return null;b+=v[m].toString()}return b}},lower:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:v[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:v[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:v=>{for(const b of v)if(null!==b)return b;return null}},cosh:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.cosh(v[0])},sinh:{minParams:1,maxParams:1,evaluate:v=>null==v[0]?null:Math.sinh(v[0])},tanh:{minParams:1,
maxParams:1,evaluate:v=>null==v[0]?null:Math.tanh(v[0])},nullif:{minParams:2,maxParams:2,evaluate:(v,b)=>M.sqlCompare(v[0],v[1],"\x3d")?null:v[0]},cast:{minParams:2,maxParams:2,evaluate:(v,b)=>{const m=v[0];v=v[1];if(null===m)return null;switch(v.type){case "integer":if(!r(m))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);b=parseInt(m,10);if(isNaN(b))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);return b;case "smallint":if(!r(m))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);
b=parseInt(m,10);if(isNaN(b))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);if(32767<b||-32767>b)throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);return b;case "float":case "real":if(!r(m))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);b=parseFloat(m);if(isNaN(b))throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);return b;case "time":return G(m);case "date":return H(m);case "timestamp":return t(m,b,!0===v.withtimezone);case "varchar":b=F(m);if(b.length>v.size)throw new u.SqlError(u.SqlErrorCodes.CannotCastValue);
return b;default:throw new u.SqlError(u.SqlErrorCodes.InvalidDataType);}}}};e.evaluateFunction=function(v,b,m){const I=J[v.toLowerCase()];if(null==I)throw new u.SqlError(u.SqlErrorCodes.FunctionNotRecognized);if(b.length<I.minParams||b.length>I.maxParams)throw new u.SqlError(u.SqlErrorCodes.InvalidParameterCount,{name:v.toUpperCase()});return I.evaluate(b,m)};e.isStandardized=function(v,b){v=J[v.toLowerCase()];return null!=v&&b>=v.minParams&&b<=v.maxParams};Object.defineProperty(e,Symbol.toStringTag,
{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ./errorSupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),function(e,l,x,C,u,M){function a(J){return x.isDateTime(J)||x.isTimestampOffset(J)?!0:!1}function q(J){return x.isDateTime(J)||x.isDateOnly(J)||x.isTimestampOffset(J)||x.isTimeOnly(J)?!0:!1}function h(J){if(x.isDateTime(J))return J.toMillis();if(x.isDateOnly(J))return J.toNumber();if(x.isTimestampOffset(J))return J.toMilliseconds();
throw new l.SqlError(l.SqlErrorCodes.InvalidDataType);}function w(J,v,b){switch(b){case "\x3c\x3e":return J!==v;case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}}function r(J,v,b){const m=parseFloat(v);if(!isNaN(m))return w(J,m,b);J=J.toString();switch(b){case "\x3c\x3e":return J!==v;case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}}function F(J,
v,b){const m=parseFloat(J);if(!isNaN(m))return w(m,v,b);v=v.toString();switch(b){case "\x3c\x3e":return J!==v;case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}}function H(J,v,b){switch(b){case "\x3c\x3e":return J!==v;case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}}function t(J,v,b){J instanceof C.SqlTimeStampOffset&&(J=J.toDateTime());v instanceof
C.SqlTimeStampOffset&&(v=v.toDateTime());J=G(J);v=G(v);switch(b){case "\x3c\x3e":return J!==v;case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}}function G(J){return 321408E5*J.year+26784E5*J.month+864E5*J.day+36E5*J.hour+6E4*J.minute+1E3*J.second+J.millisecond}e.dateValueInMilliseconds=h;e.isDateOrTimeValue=q;e.isDateTimeComparableValue=a;e.sqlCompare=function(J,v,b,m){if(null==J||null==v)return null;if(x.isNumber(J)){if(x.isNumber(v))return w(J,
v,b);if(x.isString(v))return r(J,v,b);if(q(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}else if(x.isString(J)){if(x.isNumber(v))return F(J,v,b);if(x.isString(v))return H(J,v,b);if(x.isDateTime(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isTimeOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isTimestampOffset(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}else if(x.isDateTime(J)){if(a(v)){if(J instanceof M.DateTime&&u.isUnknownTimeZone(J.zone)){if(v instanceof M.DateTime&&!1===u.isUnknownTimeZone(v.zone)||v instanceof C.SqlTimeStampOffset)return t(J,v,b)}else if(v instanceof M.DateTime&&u.isUnknownTimeZone(v.zone)&&(J instanceof M.DateTime&&!1===u.isUnknownTimeZone(J.zone)||J instanceof C.SqlTimeStampOffset))return t(J,v,b);return w(h(J),h(v),b)}if(x.isString(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(v))return v=v.toDateTimeLuxon(J.zone),
J=J.startOf("day"),w(J.toMillis(),v.toMillis(),b);if(x.isTimeOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isNumber(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}else if(x.isDateOnly(J)){if(x.isTimestampOffset(v))return J=J.toDateTimeLuxon(v.toDateTime().zone),v=v.startOfDay(),w(J.toMillis(),v.toMilliseconds(),b);if(x.isDateTime(v))return J=J.toDateTimeLuxon(v.zone),v=v.startOf("day"),w(J.toMillis(),v.toMillis(),b);if(x.isString(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
if(x.isDateOnly(v))return w(J.toNumber(),v.toNumber(),b);if(x.isTimeOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isNumber(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}else if(x.isTimeOnly(J)){if(x.isTimeOnly(v))return w(J.toNumber(),v.toNumber(),b);if(x.isString(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isNumber(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(a(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);
}else if(x.isTimestampOffset(J)){if(a(v))return v instanceof M.DateTime&&u.isUnknownTimeZone(v.zone)?t(J,v,b):w(h(J),h(v),b);if(x.isString(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(v))return v=v.toDateTimeLuxon(J.toDateTime().zone),J=J.startOfDay(),w(J.toMilliseconds(),v.toMillis(),b);if(x.isTimeOnly(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);if(x.isNumber(v))throw new l.SqlError(l.SqlErrorCodes.InvalidOperator);}switch(b){case "\x3c\x3e":return J!==v;
case "\x3d":return J===v;case "\x3e":return J>v;case "\x3c":return J<v;case "\x3e\x3d":return J>=v;case "\x3c\x3d":return J<=v}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports"],function(e){function l(a,q,h,w){a=Error.call(this,a);Object.setPrototypeOf&&Object.setPrototypeOf(a,l.prototype);a.expected=q;a.found=h;a.location=w;a.name="SyntaxError";return a}function x(a,q,h){h=h||" ";if(a.length>q)return a;q-=a.length;h+=h.repeat(q);
return a+h.slice(0,q)}function C(a,q){function h(){return t(ka,p)}function w(A,D){D=void 0!==D?D:t(ka,p);throw new l(A,null,null,D);}function r(A,D){return{type:"literal",text:A,ignoreCase:D}}function F(A,D,R){return{type:"class",parts:A,inverted:D,ignoreCase:R}}function H(A){var D=Eb[A];if(!D){if(A>=Eb.length)var R=Eb.length-1;else for(R=A;!Eb[--R];);D=Eb[R];for(D={line:D.line,column:D.column};R<A;)10===a.charCodeAt(R)?(D.line++,D.column=1):D.column++,R++;Eb[A]=D}return D}function t(A,D,R){R=H(A);
var Y=H(D);return{source:Hd,start:{offset:A,line:R.line,column:R.column},end:{offset:D,line:Y.line,column:Y.column}}}function G(A){p<hb||(p>hb&&(hb=p,jc=[]),jc.push(A))}function J(){var A=p;ia();var D=b();D!==c?(ia(),ka=A,A=D):(p=A,A=c);return A}function v(){var A;var D=p;if(Ma()!==c){ia();var R=[];for(A=b();A!==c;){R.push(A);var Y=A=p;var ta=ia();var wa=Xa();wa!==c?(Y=ia(),Y=ta=[ta,wa,Y]):(p=Y,Y=c);Y!==c?(Y=b(),Y===c?(p=A,A=c):A=Y):A=Y}A=ia();Y=Na();Y!==c?(ka=D,D=Ia(h(),...R)):(p=D,D=c)}else p=D,
D=c;return D}function b(){var A=p;var D=m();if(D!==c){var R=[];var Y=p;ia();var ta=V();if(ta!==c){ia();var wa=m();wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)}else p=Y,Y=c;for(;Y!==c;)R.push(Y),Y=p,ia(),ta=V(),ta!==c?(ia(),wa=m(),wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)):(p=Y,Y=c);ka=A;A=Ib(D,R)}else p=A,A=c;return A}function m(){var A=p;var D=I();if(D!==c){var R=[];var Y=p;ia();var ta=N();if(ta!==c){ia();var wa=I();wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)}else p=
Y,Y=c;for(;Y!==c;)R.push(Y),Y=p,ia(),ta=N(),ta!==c?(ia(),wa=I(),wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)):(p=Y,Y=c);ka=A;A=Ib(D,R)}else p=A,A=c;return A}function I(){var A=p;var D=K();if(D===c){D=p;if(33===a.charCodeAt(p)){var R=Id;p++}else R=c,0===ha&&G(Jd);if(R!==c){var Y=p;ha++;if(61===a.charCodeAt(p)){var ta=Kd;p++}else ta=c,0===ha&&G(Ld);ha--;ta===c?Y=void 0:(p=Y,Y=c);Y!==c?D=R=[R,Y]:(p=D,D=c)}else p=D,D=c}D!==c?(R=ia(),Y=I(),Y!==c?(ka=A,A={type:"unary-expression",location:h(),
operator:"NOT",expr:Y}):(p=A,A=c)):(p=A,A=c);if(A===c){D=p;A=S();if(A!==c){R=p;ia();Y=p;ta=[];var wa=p;ia();var Ga=f();if(Ga!==c){ia();var Ta=S();Ta!==c?(ka=wa,wa={op:Ga,expr:Ta,location:h()}):(p=wa,wa=c)}else p=wa,wa=c;if(wa!==c)for(;wa!==c;)ta.push(wa),wa=p,ia(),Ga=f(),Ga!==c?(ia(),Ta=S(),Ta!==c?(ka=wa,wa={op:Ga,expr:Ta,location:h()}):(p=wa,wa=c)):(p=wa,wa=c);else ta=c;ta!==c&&(ka=Y,ta={type:"arithmetic",tail:ta});Y=ta;if(Y===c&&(Y=p,ta=P(),ta!==c?(ia(),wa=v(),wa!==c?(ka=Y,Y={op:ta,right:wa}):(p=
Y,Y=c)):(p=Y,Y=c),Y===c&&(Y=p,ta=P(),ta!==c?(ia(),wa=X(),wa!==c?(ka=Y,Y={op:ta,right:wa}):(p=Y,Y=c)):(p=Y,Y=c)),Y===c)){Y=p;ta=K();if(ta!==c)if(ia(),wa=Z(),wa!==c){var Jb=ia();Ga=p;Ta=S();if(Ta!==c){ia();var db=N();db!==c?(ia(),ta=S(),ta!==c?(ka=Ga,Ga=Ta,Ga=Ia(h(),Ga,ta)):(p=Ga,Ga=c)):(p=Ga,Ga=c)}else p=Ga,Ga=c;Ga!==c?(ka=Y,Y={op:"NOT"+wa,right:Ga}):(p=Y,Y=c)}else p=Y,Y=c;else p=Y,Y=c;Y===c&&(Y=p,ta=Z(),ta!==c?(ia(),wa=p,Jb=S(),Jb!==c?(Ga=ia(),Ta=N(),Ta!==c?(ia(),db=S(),db!==c?(ka=wa,wa=Jb,Ga=db,
wa=Ia(h(),wa,Ga)):(p=wa,wa=c)):(p=wa,wa=c)):(p=wa,wa=c),wa!==c?(ka=Y,Y={op:ta,right:wa}):(p=Y,Y=c)):(p=Y,Y=c));Y===c&&(Y=p,ta=ja(),ta!==c?(ia(),wa=K(),wa!==c?(ia(),wa=S(),wa!==c?(ka=Y,Y={op:ta+"NOT",right:wa}):(p=Y,Y=c)):(p=Y,Y=c)):(p=Y,Y=c),Y===c&&(Y=p,ta=ja(),ta!==c?(ia(),wa=S(),wa!==c?(ka=Y,Y={op:ta,right:wa}):(p=Y,Y=c)):(p=Y,Y=c)),Y===c&&(Y=p,ta=L(),ta!==c?(ia(),wa=xa(),wa!==c?(ia(),Ga=p,Ta=a.substr(p,6),Ta.toLowerCase()===Md?p+=6:(Ta=c,0===ha&&G(Nd)),Ta!==c?(Ta=p,ha++,db=d(),ha--,db===c?Ta=void 0:
(p=Ta,Ta=c),Ta!==c?(ka=Ga,Ga="ESCAPE"):(p=Ga,Ga=c)):(p=Ga,Ga=c),Ga!==c?(ia(),Ga=Aa(),Ga!==c?(ka=Y,Y={op:ta,right:wa,escape:Ga.value}):(p=Y,Y=c)):(p=Y,Y=c)):(p=Y,Y=c)):(p=Y,Y=c),Y===c&&(Y=p,ta=L(),ta!==c?(ia(),wa=xa(),wa!==c?(ka=Y,Y={op:ta,right:wa,escape:""}):(p=Y,Y=c)):(p=Y,Y=c))))}Y!==c?R=Y:(p=R,R=c);R===c&&(R=null);ka=D;D=R;""==D||void 0==D||null==D?D=A:(R=null,D=R="arithmetic"==D.type?Ib(A,D.tail):Kb(D.op,A,D.right,D.escape,h()))}else p=D,D=c;A=D}return A}function f(){if(a.substr(p,2)===fd){var A=
fd;p+=2}else A=c,0===ha&&G(Od);A===c&&(62===a.charCodeAt(p)?(A=Pd,p++):(A=c,0===ha&&G(Qd)),A===c&&(a.substr(p,2)===gd?(A=gd,p+=2):(A=c,0===ha&&G(Rd)),A===c&&(a.substr(p,2)===hd?(A=hd,p+=2):(A=c,0===ha&&G(Sd)),A===c&&(A=a.charAt(p),Td.test(A)?p++:(A=c,0===ha&&G(Ud)),A===c&&(a.substr(p,2)===id?(A=id,p+=2):(A=c,0===ha&&G(Vd)))))));return A}function L(){var A;var D=A=p;var R=K();if(R!==c){var Y=ia();var ta=B();ta!==c?D=R=[R,Y,ta]:(p=D,D=c)}else p=D,D=c;D!==c&&(ka=A,D=D[0]+" "+D[2]);A=D;A===c&&(A=B());
return A}function P(){var A;var D=A=p;var R=K();if(R!==c){var Y=ia();var ta=aa();ta!==c?D=R=[R,Y,ta]:(p=D,D=c)}else p=D,D=c;D!==c&&(ka=A,D=D[0]+" "+D[2]);A=D;A===c&&(A=aa());return A}function S(){var A=p;var D=U();if(D!==c){var R=[];var Y=p;ia();var ta=ca();if(ta!==c){ia();var wa=U();wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)}else p=Y,Y=c;for(;Y!==c;)R.push(Y),Y=p,ia(),ta=ca(),ta!==c?(ia(),wa=U(),wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)):(p=Y,Y=c);ka=A;A=Ib(D,R)}else p=A,
A=c;return A}function ca(){var A=a.charAt(p);kc.test(A)?p++:(A=c,0===ha&&G(lc));A===c&&(a.substr(p,2)===jd?(A=jd,p+=2):(A=c,0===ha&&G(Wd)));return A}function U(){var A=p;var D=y();if(D!==c){var R=[];var Y=p;ia();var ta=T();if(ta!==c){ia();var wa=y();wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)}else p=Y,Y=c;for(;Y!==c;)R.push(Y),Y=p,ia(),ta=T(),ta!==c?(ia(),wa=y(),wa!==c?(ka=Y,Y={op:ta,expr:wa,location:h()}):(p=Y,Y=c)):(p=Y,Y=c);ka=A;A=Ib(D,R)}else p=A,A=c;return A}function T(){var A=a.charAt(p);
Xd.test(A)?p++:(A=c,0===ha&&G(Yd));return A}function y(){var A=Aa();if(A===c){var D=p;var R=p;var Y=ab();if(Y!==c){var ta=La();if(ta!==c){var wa=n();wa!==c?(ka=R,R=parseFloat(Y+ta+wa)):(p=R,R=c)}else p=R,R=c}else p=R,R=c;R===c&&(R=p,Y=ab(),Y!==c?(ta=La(),ta!==c?(ka=R,R=parseFloat(Y+ta)):(p=R,R=c)):(p=R,R=c),R===c&&(R=p,Y=ab(),Y!==c?(ta=n(),ta!==c?(ka=R,R=parseFloat(Y+ta)):(p=R,R=c)):(p=R,R=c),R===c&&(R=p,Y=ab(),Y!==c&&(ka=R,Y=parseFloat(Y)),R=Y)));var Ga=R;if(Ga!==c){var Ta=p;ha++;var Jb=g();ha--;
Jb===c?Ta=void 0:(p=Ta,Ta=c);Ta!==c?(ka=D,D={type:"number",location:h(),value:Ga}):(p=D,D=c)}else p=D,D=c;A=D;if(A===c){var db=p;var Fb=p;var Lb=a.substr(p,4);Lb.toLowerCase()===Zd?p+=4:(Lb=c,0===ha&&G($d));if(Lb!==c){var Mb=p;ha++;var ae=d();ha--;ae===c?Mb=void 0:(p=Mb,Mb=c);Mb!==c?Fb=Lb=[Lb,Mb]:(p=Fb,Fb=c)}else p=Fb,Fb=c;var mb=Fb;mb!==c&&(ka=db,mb={type:"boolean",location:h(),value:!0});db=mb;if(db===c){db=p;var Gb=p;var Nb=a.substr(p,5);Nb.toLowerCase()===be?p+=5:(Nb=c,0===ha&&G(ce));if(Nb!==
c){var Ob=p;ha++;var de=d();ha--;de===c?Ob=void 0:(p=Ob,Ob=c);Ob!==c?Gb=Nb=[Nb,Ob]:(p=Gb,Gb=c)}else p=Gb,Gb=c;mb=Gb;mb!==c&&(ka=db,mb={type:"boolean",location:h(),value:!1});db=mb}A=db;if(A===c){var ee=p;var Hb=p;var Pb=a.substr(p,4);Pb.toLowerCase()===fe?p+=4:(Pb=c,0===ha&&G(ge));if(Pb!==c){var Qb=p;ha++;var he=d();ha--;he===c?Qb=void 0:(p=Qb,Qb=c);Qb!==c?Hb=Pb=[Pb,Qb]:(p=Hb,Hb=c)}else p=Hb,Hb=c;var Ec=Hb;Ec!==c&&(ka=ee,Ec={type:"null",location:h(),value:null});A=Ec;if(A===c){var nb=p;if(na()!==
c){ia();var mc=xa();mc!==c?(ka=nb,"string"===mc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(mc.value)&&w("Date literal is invalid"),nb={type:"date",location:h(),value:mc.value}):(p=nb,nb=
c)}else p=nb,nb=c;A=nb;if(A===c){var ob=p;if(la()!==c){ia();var nc=xa();nc!==c?(ka=ob,"string"===nc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(nc.value)&&w("Timestamp literal is invalid"),
ob={type:"timestamp",location:h(),value:nc.value}):(p=ob,ob=c)}else p=ob,ob=c;A=ob;if(A===c){var Ya=p;var Fc=ra();if(Fc!==c){ia();var pb=a.charAt(p);kc.test(pb)?p++:(pb=c,0===ha&&G(lc));if(pb!==c){ia();var Rb=xa();if(Rb!==c){ia();var kd=pa();if(kd!==c){ka=Ya;var ie=pb,je=Rb;Ya={type:"interval",location:h(),value:je,qualifier:kd,op:ie}}else p=Ya,Ya=c}else p=Ya,Ya=c}else p=Ya,Ya=c}else p=Ya,Ya=c;if(Ya===c)if(Ya=p,Fc=ra(),Fc!==c)if(ia(),pb=xa(),pb!==c)if(ia(),Rb=pa(),Rb!==c){ka=Ya;var ke=pb,le=Rb;Ya=
{type:"interval",location:h(),value:ke,qualifier:le,op:""}}else p=Ya,Ya=c;else p=Ya,Ya=c;else p=Ya,Ya=c;A=Ya;if(A===c){var qb=p;if(ua()!==c){ia();var oc=xa();oc!==c?(ka=qb,"string"===oc.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(oc.value)&&w("Time literal is invalid"),qb={type:"time",location:h(),value:oc.value}):(p=qb,qb=c)}else p=qb,qb=c;A=qb}}}}}}}var Ka=A;if(Ka===c){var rb=p;if(ea()!==c){ia();var Oa=p;var Gc=Ma();if(Gc!==c){ia();
var Sb=ma();if(Sb!==c){ia();var Hc=da();if(Hc!==c){ia();var Tb=b();if(Tb!==c){ia();var Ic=Na();if(Ic!==c){ka=Oa;var me=Sb,ne=Tb;Oa=Ia(h(),me,ne)}else p=Oa,Oa=c}else p=Oa,Oa=c}else p=Oa,Oa=c}else p=Oa,Oa=c}else p=Oa,Oa=c;if(Oa===c)if(Oa=p,Gc=Ma(),Gc!==c)if(ia(),Sb=ma(),Sb!==c)if(ia(),Hc=Xa(),Hc!==c)if(ia(),Tb=b(),Tb!==c)if(ia(),Ic=Na(),Ic!==c){ka=Oa;var oe=Sb,pe=Tb;Oa=Ia(h(),oe,pe)}else p=Oa,Oa=c;else p=Oa,Oa=c;else p=Oa,Oa=c;else p=Oa,Oa=c;else p=Oa,Oa=c;if(Oa!==c){ka=rb;var qe=Oa;rb={type:"function",
location:h(),name:"extract",args:qe}}else p=rb,rb=c}else p=rb,rb=c;Ka=rb;if(Ka===c){var sb=p;var tb=p;var Jc=a.substr(p,9);Jc.toLowerCase()===re?p+=9:(Jc=c,0===ha&&G(se));if(Jc!==c){var pc=p;ha++;var te=d();ha--;te===c?pc=void 0:(p=pc,pc=c);pc!==c?(ka=tb,tb="SUBSTRING"):(p=tb,tb=c)}else p=tb,tb=c;if(tb!==c){ia();var Ha=p;var Kc=Ma();if(Kc!==c){ia();var Ub=b();if(Ub!==c){ia();var Lc=da();if(Lc!==c){ia();var Vb=b();if(Vb!==c){ia();var jb=p;var ub=p;var Mc=a.substr(p,3);Mc.toLowerCase()===ue?p+=3:(Mc=
c,0===ha&&G(ve));if(Mc!==c){var qc=p;ha++;var we=d();ha--;we===c?qc=void 0:(p=qc,qc=c);qc!==c?(ka=ub,ub="FOR"):(p=ub,ub=c)}else p=ub,ub=c;var rc=ub;if(rc!==c){var Nc=ia();var sc=b();sc!==c?(ia(),jb=sc):(p=jb,jb=c)}else p=jb,jb=c;jb===c&&(jb=null);rc=Na();if(rc!==c){ka=Ha;var xe=Ub,ye=Vb,ld=jb;Ha=Ia(h(),xe,ye,...(ld?[ld]:[]))}else p=Ha,Ha=c}else p=Ha,Ha=c}else p=Ha,Ha=c}else p=Ha,Ha=c}else p=Ha,Ha=c;if(Ha===c)if(Ha=p,Kc=Ma(),Kc!==c)if(ia(),Ub=b(),Ub!==c)if(ia(),Lc=Xa(),Lc!==c)if(ia(),Vb=b(),Vb!==c)if(ia(),
jb=Xa(),jb!==c)if(rc=ia(),Nc=b(),Nc!==c)if(sc=Na(),sc!==c){ka=Ha;var ze=Ub,Ae=Vb,Be=Nc;Ha=Ia(h(),ze,Ae,Be)}else p=Ha,Ha=c;else p=Ha,Ha=c;else p=Ha,Ha=c;else p=Ha,Ha=c;else p=Ha,Ha=c;else p=Ha,Ha=c;else p=Ha,Ha=c;if(Ha!==c){ka=sb;var Ce=Ha;sb={type:"function",location:h(),name:"substring",args:Ce}}else p=sb,sb=c}else p=sb,sb=c;Ka=sb;if(Ka===c){var vb=p;var wb=p;var Oc=a.substr(p,4);Oc.toLowerCase()===De?p+=4:(Oc=c,0===ha&&G(Ee));if(Oc!==c){var tc=p;ha++;var Fe=d();ha--;Fe===c?tc=void 0:(p=tc,tc=c);
tc!==c?(ka=wb,wb="TRIM"):(p=wb,wb=c)}else p=wb,wb=c;if(wb!==c){ia();var Ua=p;var Pc=Ma();if(Pc!==c){ia();var Qc=fa();ia();var Wb=b();if(Wb!==c){ia();var Rc=da();if(Rc!==c){ia();var md=b();if(md!==c){ia();var Ge=Na();if(Ge!==c){ka=Ua;var He=Qc,Ie=Wb;Ua=Ia(h(),He,Ie,md)}else p=Ua,Ua=c}else p=Ua,Ua=c}else p=Ua,Ua=c}else p=Ua,Ua=c}else p=Ua,Ua=c;if(Ua===c)if(Ua=p,Pc=Ma(),Pc!==c)if(ia(),Qc=fa(),ia(),Wb=b(),Wb!==c)if(ia(),Rc=Na(),Rc!==c){ka=Ua;var Je=Qc,Ke=Wb;Ua=Ia(h(),Je,Ke)}else p=Ua,Ua=c;else p=Ua,Ua=
c;else p=Ua,Ua=c;if(Ua!==c){ka=vb;var Le=Ua;vb={type:"function",location:h(),name:"trim",args:Le}}else p=vb,vb=c}else p=vb,vb=c;Ka=vb;if(Ka===c){var xb=p;var yb=p;var Sc=a.substr(p,8);Sc.toLowerCase()===Me?p+=8:(Sc=c,0===ha&&G(Ne));if(Sc!==c){var uc=p;ha++;var Oe=d();ha--;Oe===c?uc=void 0:(p=uc,uc=c);uc!==c?(ka=yb,yb="POSITION"):(p=yb,yb=c)}else p=yb,yb=c;if(yb!==c){ia();var Pa=p;var Tc=Ma();if(Tc!==c){ia();var Xb=b();if(Xb!==c){ia();var Uc=aa();if(Uc!==c){ia();var Yb=b();if(Yb!==c){ia();var Vc=Na();
if(Vc!==c){ka=Pa;var Pe=Xb,Qe=Yb;Pa=Ia(h(),Pe,Qe)}else p=Pa,Pa=c}else p=Pa,Pa=c}else p=Pa,Pa=c}else p=Pa,Pa=c}else p=Pa,Pa=c;if(Pa===c)if(Pa=p,Tc=Ma(),Tc!==c)if(ia(),Xb=b(),Xb!==c)if(ia(),Uc=Xa(),Uc!==c)if(ia(),Yb=b(),Yb!==c)if(ia(),Vc=Na(),Vc!==c){ka=Pa;var Re=Xb,Se=Yb;Pa=Ia(h(),Re,Se)}else p=Pa,Pa=c;else p=Pa,Pa=c;else p=Pa,Pa=c;else p=Pa,Pa=c;else p=Pa,Pa=c;if(Pa!==c){ka=xb;var Te=Pa;xb={type:"function",location:h(),name:"position",args:Te}}else p=xb,xb=c}else p=xb,xb=c;Ka=xb;if(Ka===c){var zb=
p;var Ab=p;var Wc=a.substr(p,4);Wc.toLowerCase()===Ue?p+=4:(Wc=c,0===ha&&G(Ve));if(Wc!==c){var vc=p;ha++;var We=d();ha--;We===c?vc=void 0:(p=vc,vc=c);vc!==c?(ka=Ab,Ab="CAST"):(p=Ab,Ab=c)}else p=Ab,Ab=c;if(Ab!==c){ia();var Qa=p;var Xc=Ma();if(Xc!==c){ia();var Zb=b();if(Zb!==c){ia();var Bb=p;var Yc=a.substr(p,2);Yc.toLowerCase()===Xe?p+=2:(Yc=c,0===ha&&G(Ye));if(Yc!==c){var wc=p;ha++;var Ze=d();ha--;Ze===c?wc=void 0:(p=wc,wc=c);wc!==c?(ka=Bb,Bb="AS"):(p=Bb,Bb=c)}else p=Bb,Bb=c;var Zc=Bb;if(Zc!==c){ia();
var $b=ba();if($b!==c){ia();var $c=Na();if($c!==c){ka=Qa;var $e=Zb,af=$b;Qa=Ia(h(),$e,af)}else p=Qa,Qa=c}else p=Qa,Qa=c}else p=Qa,Qa=c}else p=Qa,Qa=c}else p=Qa,Qa=c;if(Qa===c)if(Qa=p,Xc=Ma(),Xc!==c)if(ia(),Zb=b(),Zb!==c)if(ia(),Zc=Xa(),Zc!==c)if(ia(),$b=ba(),$b!==c)if(ia(),$c=Na(),$c!==c){ka=Qa;var bf=Zb,cf=$b;Qa=Ia(h(),bf,cf)}else p=Qa,Qa=c;else p=Qa,Qa=c;else p=Qa,Qa=c;else p=Qa,Qa=c;else p=Qa,Qa=c;if(Qa!==c){ka=zb;var df=Qa;zb={type:"function",location:h(),name:"cast",args:df}}else p=zb,zb=c}else p=
zb,zb=c;Ka=zb;if(Ka===c){var kb;var xc=kb=p;ha++;var yc=ea();ha--;yc===c?xc=void 0:(p=xc,xc=c);if(xc!==c){var eb=p;var ac=Q();ac!==c&&(ka=eb);eb=ac;if(eb===c)if(eb=p,96===a.charCodeAt(p)?(ac=nd,p++):(ac=c,0===ha&&G(od)),ac!==c){var zc=[];var ib=a.charAt(p);pd.test(ib)?p++:(ib=c,0===ha&&G(qd));if(ib!==c)for(;ib!==c;)zc.push(ib),ib=a.charAt(p),pd.test(ib)?p++:(ib=c,0===ha&&G(qd));else zc=c;zc!==c?(96===a.charCodeAt(p)?(ib=nd,p++):(ib=c,0===ha&&G(od)),ib!==c?(ka=eb,eb=zc.join("")):(p=eb,eb=c)):(p=eb,
eb=c)}else p=eb,eb=c;yc=eb;if(yc!==c){ia();var rd=v();if(rd!==c){ka=kb;var ef=yc;kb={type:"function",location:h(),name:ef,args:rd}}else p=kb,kb=c}else p=kb,kb=c}else p=kb,kb=c;Ka=kb;if(Ka===c){var Za=p;var ad=Fa();if(ad!==c){ia();var bc=b();if(bc!==c){ia();var cc=[];var Va=p;var fb=Ja();if(fb!==c){var dc=ia();Va=fb}else p=Va,Va=c;for(;Va!==c;)cc.push(Va),Va=p,fb=Ja(),fb!==c?(dc=ia(),Va=fb):(p=Va,Va=c);Va=Ra();if(Va!==c){ka=Za;var ff=bc,gf=cc;Za={type:"case-expression",location:h(),format:"simple",
operand:ff,clauses:gf,else:null,elseLocation:null}}else p=Za,Za=c}else p=Za,Za=c}else p=Za,Za=c;if(Za===c)if(Za=p,ad=Fa(),ad!==c)if(ia(),bc=b(),bc!==c){ia();cc=[];Va=p;fb=Ja();fb!==c?(dc=ia(),Va=fb):(p=Va,Va=c);for(;Va!==c;)cc.push(Va),Va=p,fb=Ja(),fb!==c?(dc=ia(),Va=fb):(p=Va,Va=c);Va=Sa();if(Va!==c)if(fb=ia(),dc=Ra(),dc!==c){ka=Za;var hf=bc,jf=cc,sd=Va;Za={type:"case-expression",location:h(),format:"simple",operand:hf,clauses:jf,else:sd.value,elseLocation:sd.location}}else p=Za,Za=c;else p=Za,Za=
c}else p=Za,Za=c;else p=Za,Za=c;var bd=Za;if(bd===c){var $a=p;var cd=Fa();if(cd!==c){ia();var ec=[];var Wa=p;var gb=Ea();if(gb!==c){var fc=ia();Wa=gb}else p=Wa,Wa=c;for(;Wa!==c;)ec.push(Wa),Wa=p,gb=Ea(),gb!==c?(fc=ia(),Wa=gb):(p=Wa,Wa=c);Wa=Ra();if(Wa!==c){ka=$a;var kf=ec;$a={type:"case-expression",location:h(),format:"searched",clauses:kf,else:null,elseLocation:null}}else p=$a,$a=c}else p=$a,$a=c;if($a===c)if($a=p,cd=Fa(),cd!==c){ia();ec=[];Wa=p;gb=Ea();gb!==c?(fc=ia(),Wa=gb):(p=Wa,Wa=c);for(;Wa!==
c;)ec.push(Wa),Wa=p,gb=Ea(),gb!==c?(fc=ia(),Wa=gb):(p=Wa,Wa=c);Wa=Sa();if(Wa!==c)if(gb=ia(),fc=Ra(),fc!==c){ka=$a;var lf=ec,td=Wa;$a={type:"case-expression",location:h(),format:"searched",clauses:lf,else:td.value,elseLocation:td.location}}else p=$a,$a=c;else p=$a,$a=c}else p=$a,$a=c;bd=$a}Ka=bd;if(Ka===c){var Cb=p;var mf=p;var Ac;var gc=p;var ud=g();if(ud!==c){var vd=[];for(Ac=k();Ac!==c;)vd.push(Ac),Ac=k();ka=gc;gc=ud+vd.join("")}else p=gc,gc=c;var wd=gc;wd!==c&&(ka=mf);var lb=wd;if(lb!==c){ka=Cb;
var hc=lb;lb=/^CURRENT_DATE$/i.test(hc)?{type:"current-time",location:h(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(hc)?{type:"current-time",location:h(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(hc)?{type:"current-time",location:h(),mode:"time"}:/^CURRENT_USER$/i.test(hc)?{type:"current-user",location:h()}:{type:"column-reference",location:h(),table:"",column:hc}}Cb=lb;if(Cb===c){Cb=p;var Db=p;if(O()!==c){var Bc;var nf=p;var dd=[];for(Bc=z();Bc!==c;)dd.push(Bc),Bc=z();ka=nf;var of=dd=dd.join("");var pf=
O();pf!==c?(ka=Db,Db=of):(p=Db,Db=c)}else p=Db,Db=c;lb=Db;if(lb!==c){ka=Cb;var qf=lb;lb={type:"column-reference",location:h(),table:"",column:qf,delimited:!0}}Cb=lb}Ka=Cb;if(Ka===c&&(Ka=X(),Ka===c)){Ka=p;var rf=Ma();if(rf!==c){ia();var ed=b();if(ed!==c){ia();var sf=Na();sf!==c?(ka=Ka,ed.paren=!0,Ka=ed):(p=Ka,Ka=c)}else p=Ka,Ka=c}else p=Ka,Ka=c}}}}}}}}}return Ka}function Q(){var A;var D=p;var R=g();if(R!==c){var Y=[];for(A=d();A!==c;)Y.push(A),A=d();ka=D;D=R+Y.join("")}else p=D,D=c;return D}function g(){var A=
a.charAt(p);tf.test(A)?p++:(A=c,0===ha&&G(uf));return A}function d(){var A=a.charAt(p);vf.test(A)?p++:(A=c,0===ha&&G(wf));return A}function k(){var A=a.charAt(p);xd.test(A)?p++:(A=c,0===ha&&G(yd));return A}function z(){var A=a.charAt(p);xd.test(A)?p++:(A=c,0===ha&&G(yd));if(A===c)if(A=p,O()!==c){var D=O();D!==c?(ka=A,A='"'):(p=A,A=c)}else p=A,A=c;return A}function O(){var A=a.charAt(p);xf.test(A)?p++:(A=c,0===ha&&G(yf));return A}function X(){var A;var D=A=p;if(64===a.charCodeAt(p)){var R=zf;p++}else R=
c,0===ha&&G(Af);if(R!==c){var Y=Q();Y!==c?D=R=[R,Y]:(p=D,D=c)}else p=D,D=c;D!==c&&(ka=A,A=D,D={type:"parameter",location:h(),value:A[1]});return D}function ba(){var A=p;var D=p;var R=a.substr(p,7);R.toLowerCase()===Bf?p+=7:(R=c,0===ha&&G(Cf));if(R!==c){R=p;ha++;var Y=d();ha--;Y===c?R=void 0:(p=R,R=c);R!==c?(ka=D,D="INTEGER"):(p=D,D=c)}else p=D,D=c;D===c&&(D=p,R=a.substr(p,3),R.toLowerCase()===Df?p+=3:(R=c,0===ha&&G(Ef)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="INT"):(p=D,
D=c)):(p=D,D=c));D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"integer"}});A=D;A===c&&(D=A=p,R=a.substr(p,8),R.toLowerCase()===Ff?p+=8:(R=c,0===ha&&G(Gf)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="SMALLINT"):(p=D,D=c)):(p=D,D=c),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"smallint"}}),A=D,A===c&&(D=A=p,R=a.substr(p,5),R.toLowerCase()===Hf?p+=5:(R=c,0===ha&&G(If)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="FLOAT"):(p=D,D=
c)):(p=D,D=c),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"float"}}),A=D,A===c&&(D=A=p,R=a.substr(p,4),R.toLowerCase()===Jf?p+=4:(R=c,0===ha&&G(Kf)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="REAL"):(p=D,D=c)):(p=D,D=c),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"real"}}),A=D,A===c&&(A=p,D=na(),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"date"}}),A=D,A===c&&(A=p,D=la(),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"timestamp"}}),
A=D,A===c&&(A=p,D=ua(),D!==c&&(ka=A,D={type:"data-type",location:h(),value:{type:"time"}}),A=D,A===c&&(D=A=p,R=a.substr(p,7),R.toLowerCase()===Lf?p+=7:(R=c,0===ha&&G(Mf)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="VARCHAR"):(p=D,D=c)):(p=D,D=c),D!==c?(ia(),D=Ma(),D!==c?(ia(),D=E(),D!==c?(ia(),R=Na(),R!==c?(ka=A,A={type:"data-type",location:h(),value:{type:"varchar",size:parseInt(D)}}):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c))))))));return A}function fa(){var A=p;var D=p;
var R=a.substr(p,7);R.toLowerCase()===Nf?p+=7:(R=c,0===ha&&G(Of));if(R!==c){R=p;ha++;var Y=d();ha--;Y===c?R=void 0:(p=R,R=c);R!==c?(ka=D,D="LEADING"):(p=D,D=c)}else p=D,D=c;D===c&&(D=p,R=a.substr(p,8),R.toLowerCase()===Pf?p+=8:(R=c,0===ha&&G(Qf)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="TRAILING"):(p=D,D=c)):(p=D,D=c),D===c&&(D=p,R=a.substr(p,4),R.toLowerCase()===Rf?p+=4:(R=c,0===ha&&G(Sf)),R!==c?(R=p,ha++,Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="BOTH"):(p=D,D=
c)):(p=D,D=c)));D===c&&(D=null);ka=A;A=D;return D={type:"string",location:h(),value:null==A?"BOTH":A}}function ma(){var A=p;var D=sa();if(D===c&&(D=Ca(),D===c&&(D=ya(),D===c&&(D=Ba(),D===c&&(D=Da(),D===c&&(D=za(),D===c)))))){D=p;var R=a.substr(p,13);R.toLowerCase()===Tf?p+=13:(R=c,0===ha&&G(Uf));if(R!==c){R=p;ha++;var Y=d();ha--;Y===c?R=void 0:(p=R,R=c);R!==c?(ka=D,D="TIMEZONE_HOUR"):(p=D,D=c)}else p=D,D=c;D===c&&(D=p,R=a.substr(p,15),R.toLowerCase()===Vf?p+=15:(R=c,0===ha&&G(Wf)),R!==c?(R=p,ha++,
Y=d(),ha--,Y===c?R=void 0:(p=R,R=c),R!==c?(ka=D,D="TIMEZONE_MINUTE"):(p=D,D=c)):(p=D,D=c))}D!==c&&(ka=A,A=D,D={type:"string",location:h(),value:A});return D}function pa(){var A=p;var D=p;var R=oa();if(R!==c){ia();var Y=Ma();if(Y!==c)if(ia(),Y=va(),Y!==c){ia();var ta=Na();ta!==c?(ka=D,D=R,D={type:"interval-period",location:h(),period:D.value,precision:Y,secondary:null}):(p=D,D=c)}else p=D,D=c;else p=D,D=c}else p=D,D=c;D===c&&(D=p,R=oa(),R!==c&&(ka=D,D=R,R={type:"interval-period",location:h(),period:D.value,
precision:null,secondary:null}),D=R);if(D!==c)if(ia(),R=p,Y=a.substr(p,2),Y.toLowerCase()===Xf?p+=2:(Y=c,0===ha&&G(Yf)),Y!==c?(Y=p,ha++,ta=d(),ha--,ta===c?Y=void 0:(p=Y,Y=c),Y!==c?(ka=R,R="TO"):(p=R,R=c)):(p=R,R=c),R!==c){ia();R=p;Y=oa();Y!==c&&(ka=R,R=Y,Y={type:"interval-period",location:h(),period:R.value,precision:null,secondary:null});R=Y;if(R===c){R=p;Y=za();if(Y!==c)if(ia(),Y=Ma(),Y!==c)if(ia(),Y=va(),Y!==c)if(ia(),ta=Xa(),ta!==c)if(ia(),ta=qa(),ta!==c){ia();var wa=Na();wa!==c?(ka=R,R=Y,R={type:"interval-period",
location:h(),period:"second",precision:R,secondary:ta}):(p=R,R=c)}else p=R,R=c;else p=R,R=c;else p=R,R=c;else p=R,R=c;else p=R,R=c;R===c&&(R=p,Y=za(),Y!==c?(ia(),Y=Ma(),Y!==c?(ia(),Y=va(),Y!==c?(ia(),ta=Na(),ta!==c?(ka=R,R=Y,R={type:"interval-period",location:h(),period:"second",precision:R,secondary:null}):(p=R,R=c)):(p=R,R=c)):(p=R,R=c)):(p=R,R=c),R===c&&(R=p,Y=za(),Y!==c&&(ka=R,Y={type:"interval-period",location:h(),period:"second",precision:null,secondary:null}),R=Y))}R!==c?(ka=A,A={type:"interval-qualifier",
location:h(),start:D,end:R}):(p=A,A=c)}else p=A,A=c;else p=A,A=c;A===c&&(A=p,R=oa(),R!==c?(ia(),D=Ma(),D!==c?(ia(),D=qa(),D!==c?(ia(),Y=Na(),Y!==c?(ka=A,A=R,A={type:"interval-period",location:h(),period:A.value,precision:D,secondary:null}):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c),A===c&&(A=p,R=oa(),R!==c&&(ka=A,A=R,R={type:"interval-period",location:h(),period:A.value,precision:null,secondary:null}),A=R,A===c&&(A=p,R=za(),R!==c?(ia(),D=Ma(),D!==c?(ia(),D=va(),D!==c?(ia(),Y=Xa(),Y!==c?(ia(),R=qa(),
R!==c?(ia(),Y=Na(),Y!==c?(ka=A,A=D,A={type:"interval-period",location:h(),period:"second",precision:A,secondary:R}):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c),A===c&&(A=p,R=za(),R!==c?(ia(),D=Ma(),D!==c?(ia(),D=qa(),D!==c?(ia(),Y=Na(),Y!==c?(ka=A,A=D,A={type:"interval-period",location:h(),period:"second",precision:A,secondary:null}):(p=A,A=c)):(p=A,A=c)):(p=A,A=c)):(p=A,A=c),A===c&&(A=p,R=za(),R!==c&&(ka=A,R={type:"interval-period",location:h(),period:"second",precision:null,
secondary:null}),A=R)))));return A}function oa(){var A=p;var D=ya();D!==c&&(ka=A,D={type:"string",location:h(),value:"day"});A=D;A===c&&(A=p,D=Ba(),D!==c&&(ka=A,D={type:"string",location:h(),value:"hour"}),A=D,A===c&&(A=p,D=Da(),D!==c&&(ka=A,D={type:"string",location:h(),value:"minute"}),A=D,A===c&&(A=p,D=Ca(),D!==c&&(ka=A,D={type:"string",location:h(),value:"month"}),A=D,A===c&&(A=p,D=sa(),D!==c&&(ka=A,D={type:"string",location:h(),value:"year"}),A=D))));return A}function qa(){var A=p;var D=E();
D!==c&&(ka=A,D=parseFloat(D));return D}function va(){var A=p;var D=E();D!==c&&(ka=A,D=parseFloat(D));return D}function xa(){var A=Aa();A===c&&(A=X());return A}function Aa(){var A=p;if(39===a.charCodeAt(p)){var D=zd;p++}else D=c,0===ha&&G(Ad);D===c&&(a.substr(p,2)===Bd?(D=Bd,p+=2):(D=c,0===ha&&G(Zf)));if(D!==c){D=[];var R=p;if(a.substr(p,2)===Cc){var Y=Cc;p+=2}else Y=c,0===ha&&G(Cd);Y!==c&&(ka=R,Y="'");R=Y;R===c&&(R=a.charAt(p),Dd.test(R)?p++:(R=c,0===ha&&G(Ed)));for(;R!==c;)D.push(R),R=p,a.substr(p,
2)===Cc?(Y=Cc,p+=2):(Y=c,0===ha&&G(Cd)),Y!==c&&(ka=R,Y="'"),R=Y,R===c&&(R=a.charAt(p),Dd.test(R)?p++:(R=c,0===ha&&G(Ed)));39===a.charCodeAt(p)?(R=zd,p++):(R=c,0===ha&&G(Ad));R!==c?(ka=A,A={type:"string",location:h(),value:D.join("")}):(p=A,A=c)}else p=A,A=c;return A}function Ea(){var A=p;if(bb()!==c){ia();var D=b();if(D!==c){ia();var R=cb();R!==c?(ia(),R=b(),R!==c?(ka=A,A={type:"when-clause",location:h(),operand:D,value:R}):(p=A,A=c)):(p=A,A=c)}else p=A,A=c}else p=A,A=c;return A}function Ja(){var A=
p;if(bb()!==c){ia();var D=b();if(D!==c){ia();var R=cb();R!==c?(ia(),R=b(),R!==c?(ka=A,A={type:"when-clause",location:h(),operand:D,value:R}):(p=A,A=c)):(p=A,A=c)}else p=A,A=c}else p=A,A=c;return A}function Sa(){var A=p;var D=p;var R=a.substr(p,4);R.toLowerCase()===$f?p+=4:(R=c,0===ha&&G(ag));if(R!==c){R=p;ha++;var Y=d();ha--;Y===c?R=void 0:(p=R,R=c);R!==c?(ka=D,D="ELSE"):(p=D,D=c)}else p=D,D=c;D!==c?(ia(),D=b(),D!==c?(ka=A,A={type:"else-clause",location:h(),value:D}):(p=A,A=c)):(p=A,A=c);return A}
function ab(){var A=E();if(A===c){A=p;var D=a.charAt(p);kc.test(D)?p++:(D=c,0===ha&&G(lc));if(D!==c){var R=E();R!==c?(ka=A,A=D[0]+R):(p=A,A=c)}else p=A,A=c}return A}function La(){var A=p;if(46===a.charCodeAt(p)){var D=bg;p++}else D=c,0===ha&&G(cg);D!==c?(D=E(),D===c&&(D=null),ka=A,A="."+(null!=D?D:"")):(p=A,A=c);return A}function n(){var A;var D=A=p;var R=a.charAt(p);dg.test(R)?p++:(R=c,0===ha&&G(eg));R!==c?(R=a.charAt(p),kc.test(R)?p++:(R=c,0===ha&&G(lc)),R===c&&(R=null),ka=D,D="e"+(null===R?"":
R)):(p=D,D=c);D!==c?(R=E(),R!==c?(ka=A,A=D+R):(p=A,A=c)):(p=A,A=c);return A}function E(){var A=p;var D=[];var R=W();if(R!==c)for(;R!==c;)D.push(R),R=W();else D=c;D!==c&&(ka=A,D=D.join(""));return D}function W(){var A=a.charAt(p);fg.test(A)?p++:(A=c,0===ha&&G(gg));return A}function aa(){var A=p;var D=a.substr(p,2);D.toLowerCase()===hg?p+=2:(D=c,0===ha&&G(ig));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="IN"):(p=A,A=c)}else p=A,A=c;return A}function ja(){var A=p;var D=a.substr(p,
2);D.toLowerCase()===jg?p+=2:(D=c,0===ha&&G(kg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="IS"):(p=A,A=c)}else p=A,A=c;return A}function B(){var A=p;var D=a.substr(p,4);D.toLowerCase()===lg?p+=4:(D=c,0===ha&&G(mg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="LIKE"):(p=A,A=c)}else p=A,A=c;return A}function K(){var A=p;var D=a.substr(p,3);D.toLowerCase()===ng?p+=3:(D=c,0===ha&&G(og));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,
D=c);D!==c?(ka=A,A="NOT"):(p=A,A=c)}else p=A,A=c;return A}function N(){var A=p;var D=a.substr(p,3);D.toLowerCase()===pg?p+=3:(D=c,0===ha&&G(qg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="AND"):(p=A,A=c)}else p=A,A=c;return A}function V(){var A=p;var D=a.substr(p,2);D.toLowerCase()===rg?p+=2:(D=c,0===ha&&G(sg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="OR"):(p=A,A=c)}else p=A,A=c;return A}function Z(){var A=p;var D=a.substr(p,7);D.toLowerCase()===
tg?p+=7:(D=c,0===ha&&G(ug));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="BETWEEN"):(p=A,A=c)}else p=A,A=c;return A}function da(){var A=p;var D=a.substr(p,4);D.toLowerCase()===vg?p+=4:(D=c,0===ha&&G(wg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="FROM"):(p=A,A=c)}else p=A,A=c;return A}function ea(){var A=p;var D=a.substr(p,7);D.toLowerCase()===xg?p+=7:(D=c,0===ha&&G(yg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=
A,A="EXTRACT"):(p=A,A=c)}else p=A,A=c;return A}function la(){var A=p;var D=a.substr(p,9);D.toLowerCase()===zg?p+=9:(D=c,0===ha&&G(Ag));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="TIMESTAMP"):(p=A,A=c)}else p=A,A=c;return A}function na(){var A=p;var D=a.substr(p,4);D.toLowerCase()===Bg?p+=4:(D=c,0===ha&&G(Cg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="DATE"):(p=A,A=c)}else p=A,A=c;return A}function ua(){var A=p;var D=a.substr(p,4);D.toLowerCase()===
Dg?p+=4:(D=c,0===ha&&G(Eg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="TIME"):(p=A,A=c)}else p=A,A=c;return A}function ra(){var A=p;var D=a.substr(p,8);D.toLowerCase()===Fg?p+=8:(D=c,0===ha&&G(Gg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="INTERVAL"):(p=A,A=c)}else p=A,A=c;return A}function sa(){var A=p;var D=a.substr(p,4);D.toLowerCase()===Hg?p+=4:(D=c,0===ha&&G(Ig));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=
A,A="YEAR"):(p=A,A=c)}else p=A,A=c;return A}function Ca(){var A=p;var D=a.substr(p,5);D.toLowerCase()===Jg?p+=5:(D=c,0===ha&&G(Kg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="MONTH"):(p=A,A=c)}else p=A,A=c;return A}function ya(){var A=p;var D=a.substr(p,3);D.toLowerCase()===Lg?p+=3:(D=c,0===ha&&G(Mg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="DAY"):(p=A,A=c)}else p=A,A=c;return A}function Ba(){var A=p;var D=a.substr(p,4);D.toLowerCase()===
Ng?p+=4:(D=c,0===ha&&G(Og));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="HOUR"):(p=A,A=c)}else p=A,A=c;return A}function Da(){var A=p;var D=a.substr(p,6);D.toLowerCase()===Pg?p+=6:(D=c,0===ha&&G(Qg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="MINUTE"):(p=A,A=c)}else p=A,A=c;return A}function za(){var A=p;var D=a.substr(p,6);D.toLowerCase()===Rg?p+=6:(D=c,0===ha&&G(Sg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=
A,A="SECOND"):(p=A,A=c)}else p=A,A=c;return A}function Fa(){var A=p;var D=a.substr(p,4);D.toLowerCase()===Tg?p+=4:(D=c,0===ha&&G(Ug));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="CASE"):(p=A,A=c)}else p=A,A=c;return A}function Ra(){var A=p;var D=a.substr(p,3);D.toLowerCase()===Vg?p+=3:(D=c,0===ha&&G(Wg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="END"):(p=A,A=c)}else p=A,A=c;return A}function bb(){var A=p;var D=a.substr(p,4);D.toLowerCase()===
Xg?p+=4:(D=c,0===ha&&G(Yg));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="WHEN"):(p=A,A=c)}else p=A,A=c;return A}function cb(){var A=p;var D=a.substr(p,4);D.toLowerCase()===Zg?p+=4:(D=c,0===ha&&G($g));if(D!==c){D=p;ha++;var R=d();ha--;R===c?D=void 0:(p=D,D=c);D!==c?(ka=A,A="THEN"):(p=A,A=c)}else p=A,A=c;return A}function Xa(){if(44===a.charCodeAt(p)){var A=ah;p++}else A=c,0===ha&&G(bh);return A}function Ma(){if(40===a.charCodeAt(p)){var A=ch;p++}else A=c,0===ha&&G(dh);
return A}function Na(){if(41===a.charCodeAt(p)){var A=eh;p++}else A=c,0===ha&&G(fh);return A}function ia(){var A;var D=[];for(A=ic();A!==c;)D.push(A),A=ic();return D}function ic(){var A=a.charAt(p);gh.test(A)?p++:(A=c,0===ha&&G(hh));return A}function Kb(A,D,R,Y,ta){A={type:"binary-expression",location:ta,operator:A,left:D,right:R};void 0!==Y&&(A.escape=Y);return A}function Ia(A,...D){return{type:"expression-list",location:A,value:D}}function Ib(A,D){for(const {op:R,expr:Y,location:{end:ta}}of D)A=
Kb(R,A,Y,void 0,{...A.location,end:ta});return A}q=void 0!==q?q:{};var c={},Hd=q.grammarSource,Fd={start:J},Gd=J,Id="!",Kd="\x3d",fd="\x3e\x3d",Pd="\x3e",gd="\x3c\x3d",hd="\x3c\x3e",id="!\x3d",jd="||",zf="@",zd="'",Bd="N'",Cc="''",bg=".",fe="null",Zd="true",be="false",hg="in",jg="is",lg="like",Md="escape",ng="not",pg="and",rg="or",tg="between",vg="from",ue="for",re="substring",xg="extract",De="trim",Me="position",zg="timestamp",Bg="date",Dg="time",Nf="leading",Pf="trailing",Rf="both",Ue="cast",Xe=
"as",Bf="integer",Df="int",Ff="smallint",Hf="float",Jf="real",Lf="varchar",Xf="to",Fg="interval",Hg="year",Tf="timezone_hour",Vf="timezone_minute",Jg="month",Lg="day",Ng="hour",Pg="minute",Rg="second",Tg="case",Vg="end",Xg="when",Zg="then",$f="else",ah=",",ch="(",eh=")",nd="`",Td=/^[<-=]/,kc=/^[+\-]/,Xd=/^[*\/]/,tf=/^[A-Za-z_\x80-\uFFFF]/,vf=/^[A-Za-z0-9_]/,xd=/^[A-Za-z0-9_.\x80-\uFFFF]/,xf=/^["]/,Dd=/^[^']/,fg=/^[0-9]/,dg=/^[eE]/,gh=/^[ \t\n\r]/,pd=/^[^`]/,Jd=r("!",!1),Ld=r("\x3d",!1),Od=r("\x3e\x3d",
!1),Qd=r("\x3e",!1),Rd=r("\x3c\x3d",!1),Sd=r("\x3c\x3e",!1),Ud=F([["\x3c","\x3d"]],!1,!1),Vd=r("!\x3d",!1),lc=F(["+","-"],!1,!1),Wd=r("||",!1),Yd=F(["*","/"],!1,!1),uf=F([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),wf=F([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),yd=F([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),yf=F(['"'],!1,!1),Af=r("@",!1),Ad=r("'",!1),Zf=r("N'",!1),Cd=r("''",!1),Ed=F(["'"],!0,!1),cg=r(".",!1),gg=F([["0","9"]],!1,!1),eg=F(["e","E"],!1,!1),ge=r("NULL",
!0),$d=r("TRUE",!0),ce=r("FALSE",!0),ig=r("IN",!0),kg=r("IS",!0),mg=r("LIKE",!0),Nd=r("ESCAPE",!0),og=r("NOT",!0),qg=r("AND",!0),sg=r("OR",!0),ug=r("BETWEEN",!0),wg=r("FROM",!0),ve=r("FOR",!0),se=r("SUBSTRING",!0),yg=r("EXTRACT",!0),Ee=r("TRIM",!0),Ne=r("POSITION",!0),Ag=r("TIMESTAMP",!0),Cg=r("DATE",!0),Eg=r("TIME",!0),Of=r("LEADING",!0),Qf=r("TRAILING",!0),Sf=r("BOTH",!0),Ve=r("CAST",!0),Ye=r("AS",!0),Cf=r("INTEGER",!0),Ef=r("INT",!0),Gf=r("SMALLINT",!0),If=r("FLOAT",!0),Kf=r("REAL",!0),Mf=r("VARCHAR",
!0),Yf=r("TO",!0),Gg=r("INTERVAL",!0),Ig=r("YEAR",!0),Uf=r("TIMEZONE_HOUR",!0),Wf=r("TIMEZONE_MINUTE",!0),Kg=r("MONTH",!0),Mg=r("DAY",!0),Og=r("HOUR",!0),Qg=r("MINUTE",!0),Sg=r("SECOND",!0),Ug=r("CASE",!0),Wg=r("END",!0),Yg=r("WHEN",!0),$g=r("THEN",!0),ag=r("ELSE",!0),bh=r(",",!1),dh=r("(",!1),fh=r(")",!1),hh=F([" ","\t","\n","\r"],!1,!1),od=r("`",!1),qd=F(["`"],!0,!1),p=q.peg$currPos|0,ka=p,Eb=[{line:1,column:1}],hb=p,jc=q.peg$maxFailExpected||[],ha=q.peg$silentFails|0;if(q.startRule){if(!(q.startRule in
Fd))throw Error("Can't start parsing from rule \""+q.startRule+'".');Gd=Fd[q.startRule]}var Dc=Gd();if(q.peg$library)return{peg$result:Dc,peg$currPos:p,peg$FAILED:c,peg$maxFailExpected:jc,peg$maxFailPos:hb};if(Dc!==c&&p===a.length)return Dc;Dc!==c&&p<a.length&&G({type:"end"});throw function(A,D,R){return new l(l.buildMessage(A,D),A,D,R)}(jc,hb<a.length?a.charAt(hb):null,hb<a.length?t(hb,hb+1):t(hb,hb));}function u(a,q){if(null!=a)switch(q(a),a.type){case "when-clause":u(a.operand,q);u(a.value,q);
break;case "case-expression":for(const h of a.clauses)u(h,q);"simple"===a.format&&u(a.operand,q);null!==a.else&&u(a.else,q);break;case "expression-list":for(const h of a.value)u(h,q);break;case "unary-expression":u(a.expr,q);break;case "binary-expression":u(a.left,q);u(a.right,q);break;case "function":u(a.args,q);break;case "interval":u(a.value,q);u(a.qualifier,q);break;case "interval-qualifier":u(a.start,q),u(a.end,q)}}(function(a,q){function h(){this.constructor=a}h.prototype=q.prototype;a.prototype=
new h})(l,Error);l.prototype.format=function(a){var q="Error: "+this.message;if(this.location){var h=null,w;for(w=0;w<a.length;w++)if(a[w].source===this.location.source){h=a[w].text.split(/\r\n|\n|\r/g);break}a=this.location.start;w=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(a):a;var r=this.location.source+":"+w.line+":"+w.column;if(h){var F=this.location.end,H=x("",w.line.toString().length," ");h=h[a.line-1];F=(a.line===F.line?F.column:h.length+
1)-a.column||1;q+="\n --\x3e "+r+"\n"+H+" |\n"+w.line+" | "+h+"\n"+H+" | "+x("",a.column-1," ")+x("",F,"^")}else q+="\n at "+r}return q};l.buildMessage=function(a,q){function h(t){return t.charCodeAt(0).toString(16).toUpperCase()}function w(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(G){return"\\x0"+h(G)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(G){return"\\x"+h(G)})}function r(t){return t.replace(/\\/g,
"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(G){return"\\x0"+h(G)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(G){return"\\x"+h(G)})}function F(t){return H[t.type](t)}var H={literal:function(t){return'"'+w(t.text)+'"'},class:function(t){var G=t.parts.map(function(J){return Array.isArray(J)?r(J[0])+"-"+r(J[1]):r(J)});return"["+(t.inverted?"^":"")+G.join("")+"]"},
any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};return"Expected "+function(t){t=t.map(F);var G,J;t.sort();if(0<t.length){for(J=G=1;G<t.length;G++)t[G-1]!==t[G]&&(t[J]=t[G],J++);t.length=J}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}(a)+" but "+(q?'"'+w(q)+'"':"end of input")+" found."};class M{static parse(a){return C(a)}}e.WhereGrammar=M;e.visitAll=
u;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(e,l){l=new l.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});e.kebabDict=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCache":function(){define(["exports"],function(e){class l{constructor(){this._storage=new Map;this._purgeInterval=5;this._sweep=()=>{this._timer=void 0;if(this._storage){var u=
1E3*this._purgeInterval,M=performance.now()-u;for(const [a,q]of this._storage)if(q.time<M)this._storage.delete(a);else{0<this._storage.size&&(this._timer=setTimeout(this._sweep,u));break}}}}destroy(){this._storage?.clear();this._storage=null;clearTimeout(this._timer)}get size(){return this._storage?.size??0}put(u,M){this._storage?.set(u,new C(M));this._scheduleSweep()}get(u){if(this._storage){var M=this._storage?.get(u);if(M)return this._storage?.delete(u),M.time=performance.now(),this._storage?.set(u,
M),M.items}}clear(){this._storage?.clear()}_scheduleSweep(){this._storage&&(this._timer??(this._timer=setTimeout(this._sweep,1E3*this._purgeInterval)))}}let x=0;class C{constructor(u){this.items=u;this.time=performance.now();this.id=x++}}e.QueryEngineCache=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(e){e.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,
supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,
supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H){function t(b,m,I,f){const L=f.x-I.x;f=f.y-I.y;m=Math.min(1,Math.max(0,((m.x-I.x)*L+(m.y-I.y)*f)/(L*L+f*f)));b.x=I.x+L*m;b.y=I.y+f*m}function G(b,m){return b?m?4:3:m?3:2}class J{constructor(b,m,I){this.items=b;this.query=m;this.geometryType=I.geometryType;this.hasM=I.hasM;this.hasZ=I.hasZ;this.fieldsIndex=I.fieldsIndex;this.objectIdField=I.objectIdField;this.spatialReference=I.spatialReference;this.featureAdapter=I.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const b=
new q(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return b.countDistinctValues(this.items);const {groupByFieldsForStatistics:m,having:I,outStatistics:f}=this.query;if(!m?.length)return 1;const L=new Map,P=new Map,S=new Set;for(const T of f){var {statisticType:ca}=T;ca="exceedslimit"!==ca?T.onStatisticField:void 0;if(!P.has(ca)){var U=[];for(const y of m){const Q=this._getAttributeValues(b,y,L);U.push(Q)}P.set(ca,this._calculateUniqueValues(U,b.returnDistinctValues))}ca=
P.get(ca);for(const y in ca){const {data:Q,items:g}=ca[y];U=Q.join(",");I&&!b.validateItems(g,I)||S.add(U)}}return S.size}async createQueryResponse(){let b;b=this.query.outStatistics?this.query.outStatistics.some(m=>"exceedslimit"===m.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const m=this.query.geometry;a.isValid(this.query.outSR)&&!a.equals(m.spatialReference,
this.query.outSR)?b.queryGeometry=h.cleanFromGeometryEngine({spatialReference:this.query.outSR,...w.project(m,m.spatialReference,this.query.outSR)}):b.queryGeometry=h.cleanFromGeometryEngine({spatialReference:this.query.outSR,...m})}return b}createSnappingResponse(b,m){const I=this.featureAdapter,f=G(this.hasZ,this.hasM),{point:L,mode:P}=b,S="number"===typeof b.distance?b.distance:b.distance.x,ca="number"===typeof b.distance?b.distance:b.distance.y,U={candidates:[]},T="esriGeometryPolygon"===this.geometryType;
m=this._getPointCreator(P,this.spatialReference,m);const y=new v(null,0),Q=new v(null,0),g={x:0,y:0,z:0};for(const fa of this.items){var d=I.getGeometry(fa);if(null==d)continue;const {coords:ma,lengths:pa}=d;y.coords=ma;Q.coords=ma;if(b.returnEdge){d=0;for(var k=0;k<pa.length;k++){var z=pa[k];for(var O=0;O<z;O++,d+=f){var X=y;X.coordsIndex=d;if(O!==z-1){const oa=Q;oa.coordsIndex=d+f;const qa=g;t(g,L,X,oa);var ba=(L.x-qa.x)/S;const va=(L.y-qa.y)/ca;ba=ba*ba+va*va;1>=ba&&U.candidates.push(r.makeEdgeCandidate(I.getObjectId(fa),
m(qa),Math.sqrt(ba),m(X),m(oa)))}}}}if("none"!==b.vertexMode)if(d=T?ma.length-f:ma.length,"all"===b.vertexMode)for(k=0;k<d;k+=f)z=y,z.coordsIndex=k,O=(L.x-z.x)/S,X=(L.y-z.y)/ca,O=O*O+X*X,1>=O&&U.candidates.push(r.makeVertexCandidate(I.getObjectId(fa),m(z),Math.sqrt(O)));else if("ends"===b.vertexMode){d=[0];T||d.push(ma.length-f);for(const oa of d)d=y,d.coordsIndex=oa,k=(L.x-d.x)/S,z=(L.y-d.y)/ca,k=k*k+z*z,1>=k&&U.candidates.push(r.makeVertexCandidate(I.getObjectId(fa),m(d),Math.sqrt(k)))}}U.candidates.sort((fa,
ma)=>fa.distance-ma.distance);return U}_getPointCreator(b,m,I){const f=null==I||a.equals(m,I)?P=>P:P=>w.project(P,m,I),{hasZ:L}=this;return"3d"===b?L?({x:P,y:S,z:ca})=>f({x:P,y:S,z:ca}):({x:P,y:S})=>f({x:P,y:S,z:0}):({x:P,y:S})=>f({x:P,y:S})}async createSummaryStatisticsResponse(b){const {field:m,valueExpression:I,normalizationField:f,normalizationType:L,normalizationTotal:P,minValue:S,maxValue:ca,scale:U,timeZone:T,outStatisticTypes:y}=b;var Q=this.fieldsIndex.get(m);b=F.isDateField(Q)||F.isDateOnlyField(Q)||
F.isTimestampOffsetField(Q);const g=await this._getDataValues({field:m,valueExpression:I,normalizationField:f,normalizationType:L,normalizationTotal:P,scale:U,timeZone:T}),d=H.isNullCountSupported({normalizationType:L,normalizationField:f,minValue:S,maxValue:ca}),k={value:.5,fieldType:Q?.type};Q=F.isStringField(Q)?H.calculateStringStatistics({values:g,supportsNullCount:d,percentileParams:k,outStatisticTypes:y}):H.calculateStatistics({values:g,minValue:S,maxValue:ca,useSampleStdDev:!L,supportsNullCount:d,
percentileParams:k,outStatisticTypes:y});return H.processSummaryStatisticsResult(Q,y,b)}async createUniqueValuesResponse(b){const {field:m,valueExpression:I,domains:f,returnAllCodedValues:L,scale:P,timeZone:S}=b;var ca=await this._getDataValues({field:m,field2:b.field2,field3:b.field3,fieldDelimiter:b.fieldDelimiter,valueExpression:I,scale:P,timeZone:S},!1);ca=H.calculateUniqueValuesCount(ca);return H.createUVResult(ca,f,L,b.fieldDelimiter)}async createClassBreaksResponse(b){const {field:m,valueExpression:I,
normalizationField:f,normalizationType:L,normalizationTotal:P,classificationMethod:S,standardDeviationInterval:ca,minValue:U,maxValue:T,numClasses:y,scale:Q,timeZone:g}=b;b=await this._getDataValues({field:m,valueExpression:I,normalizationField:f,normalizationType:L,normalizationTotal:P,scale:Q,timeZone:g});b=H.calculateClassBreaks(b,{field:m,normalizationField:f,normalizationType:L,normalizationTotal:P,classificationMethod:S,standardDeviationInterval:ca,minValue:U,maxValue:T,numClasses:y});return H.resolveCBResult(b,
S)}async createHistogramResponse(b){const {field:m,valueExpression:I,normalizationField:f,normalizationType:L,normalizationTotal:P,classificationMethod:S,standardDeviationInterval:ca,minValue:U,maxValue:T,numBins:y,scale:Q,timeZone:g}=b;b=await this._getDataValues({field:m,valueExpression:I,normalizationField:f,normalizationType:L,normalizationTotal:P,scale:Q,timeZone:g});return H.calculateHistogram(b,{field:m,normalizationField:f,normalizationType:L,normalizationTotal:P,classificationMethod:S,standardDeviationInterval:ca,
minValue:U,maxValue:T,numBins:y})}_sortFeatures(b,m,I){if(1<b.length&&m?.length)for(const f of m.reverse()){m=f.split(" ");const L=m[0],P=this.fieldsIndex.get(L);m=m[1]?"desc"===m[1].toLowerCase():!1;const S=H.getAttributeComparator(P?.type,m);b.sort((ca,U)=>{ca=I(ca,L,P);U=I(U,L,P);return S(ca,U)})}}_createFeatureQueryResponse(b){const m=this.items,{geometryType:I,hasM:f,hasZ:L,objectIdField:P,spatialReference:S}=this,{outFields:ca,outSR:U,quantizationParameters:T,resultRecordCount:y,resultOffset:Q,
returnZ:g,returnM:d}=b,k=null!=y?m.length>(Q||0)+y:!1,z=ca&&(ca.includes("*")?[...this.fieldsIndex.fields]:ca.map(O=>this.fieldsIndex.get(O)));return{exceededTransferLimit:k,features:this._createFeatures(b,m),fields:z,geometryType:I,hasM:f&&d,hasZ:L&&g,objectIdFieldName:P,spatialReference:h.cleanFromGeometryEngine(U||S),transform:T&&M.toQuantizationTransform(T)||null}}_createFeatures(b,m){const I=new q(b,this.featureAdapter,this.fieldsIndex),{hasM:f,hasZ:L}=this,{orderByFields:P,quantizationParameters:S,
returnGeometry:ca,returnCentroid:U,maxAllowableOffset:T,resultOffset:y,resultRecordCount:Q,returnZ:g=!1,returnM:d=!1}=b,k=L&&g,z=f&&d;b=[];var O=0;const X=[...m];this._sortFeatures(X,P,(oa,qa,va)=>I.getFieldValue(oa,qa,va));if(this.geometryType&&(ca||U)){var ba=M.toQuantizationTransform(S)??void 0;m="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(ca&&!U)for(var fa of X){var ma=this.featureAdapter.getGeometry(fa),pa={attributes:I.getAttributes(fa),geometry:h.getGeometry(this.geometryType,
this.hasZ,this.hasM,ma,T,ba,k,z)};m&&ma&&!pa.geometry&&(pa.centroid=h.transformCentroid(this,this.featureAdapter.getCentroid(fa,this),ba));b[O++]=pa}else if(!ca&&U)for(ma of X)b[O++]={attributes:I.getAttributes(ma),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(ma,this),ba)};else for(pa of X)b[O++]={attributes:I.getAttributes(pa),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(pa,this),ba),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(pa),
T,ba,k,z)}}else for(ba of X)(fa=I.getAttributes(ba))&&(b[O++]={attributes:fa});O=y||0;null!=Q&&(b=b.slice(O,Math.min(b.length,O+Q)));return b}_createExceedsLimitQueryResponse(b){var m=!1;let I=Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY;m=Number.POSITIVE_INFINITY;for(const L of b.outStatistics??[])if("exceedslimit"===L.statisticType){I=null!=L.maxPointCount?L.maxPointCount:Number.POSITIVE_INFINITY;f=null!=L.maxRecordCount?L.maxRecordCount:Number.POSITIVE_INFINITY;m=null!=L.maxVertexCount?
L.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)m=this.items.length>I;else if(this.items.length>f)m=!0;else{b=G(this.hasZ,this.hasM);const L=this.featureAdapter;m=this.items.reduce((P,S)=>{S=L.getGeometry(S);return P+(null!=S&&S.coords.length||0)},0)/b>m}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(m)}}]}}async _createStatisticsQueryResponse(b){var m=
{attributes:{}};const I=[],f=new Map,L=new Map,P=new Map,S=new Map,ca=new q(b,this.featureAdapter,this.fieldsIndex);var U=b.outStatistics;const {groupByFieldsForStatistics:T,having:y,orderByFields:Q,resultRecordCount:g}=b;b=T?.length;const d=!!b,k=d?T[0]:null,z=d&&!this.fieldsIndex.get(k);for(const ma of U??[]){const {outStatisticFieldName:pa,statisticType:oa}=ma;U=ma;const qa="exceedslimit"!==oa?ma.onStatisticField:void 0,va="percentile_disc"===oa||"percentile_cont"===oa;var O="EnvelopeAggregate"===
oa||"CentroidAggregate"===oa||"ConvexHullAggregate"===oa;const xa=d&&1===b&&(qa===k||z)&&"count"===oa;if(d){if(!P.has(qa)){var X=[];for(const Aa of T){var ba=this._getAttributeValues(ca,Aa,f);X.push(ba)}P.set(qa,this._calculateUniqueValues(X,O?!1:ca.returnDistinctValues))}X=P.get(qa);if(!X)continue;ba=Object.keys(X);for(const Aa of ba){const {count:Ea,data:Ja,items:Sa,itemPositions:ab}=X[Aa];ba=Ja.join(",");if(!y||ca.validateItems(Sa,y)){const La=S.get(ba)||{attributes:{}};if(O){La.aggregateGeometries||
(La.aggregateGeometries={});const {aggregateGeometries:E,outStatisticFieldName:W}=await this._getAggregateGeometry(U,Sa);La.aggregateGeometries[W]=E}else{var fa=null;if(xa)fa=Ea;else{const E=this._getAttributeValues(ca,qa,f);fa=ab.map(W=>E[W]);fa=va&&"statisticParameters"in U?this._getPercentileValue(U,fa):this._getStatisticValue(U,fa,null,ca.returnDistinctValues)}La.attributes[pa]=fa}let n=0;T.forEach((E,W)=>La.attributes[this.fieldsIndex.get(E)?E:`EXPR_${++n}`]=Ja[W]);S.set(ba,La)}}}else if(O){m.aggregateGeometries||
(m.aggregateGeometries={});const {aggregateGeometries:Aa,outStatisticFieldName:Ea}=await this._getAggregateGeometry(U,this.items);m.aggregateGeometries[Ea]=Aa}else O=this._getAttributeValues(ca,qa,f),m.attributes[pa]=va&&"statisticParameters"in U?this._getPercentileValue(U,O):this._getStatisticValue(U,O,L,ca.returnDistinctValues);U="min"!==oa&&"max"!==oa||!F.isStringField(this.fieldsIndex.get(qa))&&!this._isAnyDateField(qa)?null:this.fieldsIndex.get(qa)?.type;I.push({name:pa,alias:pa,type:U||"esriFieldTypeDouble"})}m=
d?Array.from(S.values()):[m];this._sortFeatures(m,Q,(ma,pa)=>ma.attributes[pa]);g&&(m.length=Math.min(g,m.length));return{fields:I,features:m}}_isAnyDateField(b){b=this.fieldsIndex.get(b);return F.isDateField(b)||F.isDateOnlyField(b)||F.isTimestampOffsetField(b)||F.isTimeOnlyField(b)}async _getAggregateGeometry(b,m){const {convexHull:I,union:f}=await new Promise((g,d)=>e(["../../../geometry/geometryEngineJSON"],g,d)),{statisticType:L,outStatisticFieldName:P}=b,{featureAdapter:S,spatialReference:ca,
geometryType:U,hasZ:T,hasM:y}=this;m=m.map(g=>h.getGeometry(U,T,y,S.getGeometry(g)));const Q=I(ca,m,!0)[0];b={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===L?(m=Q?u.getPolygonExtent(Q):u.getGeometryExtent(f(ca,m)),b.aggregateGeometries={...m,spatialReference:ca},b.outStatisticFieldName=P||"extent"):"CentroidAggregate"===L?(m=Q?C.polygonCentroid(Q):C.extentCentroid(u.getGeometryExtent(f(ca,m))),b.aggregateGeometries={x:m[0],y:m[1],spatialReference:ca},b.outStatisticFieldName=
P||"centroid"):"ConvexHullAggregate"===L&&(b.aggregateGeometries=Q,b.outStatisticFieldName=P||"convexHull");return b}_getStatisticValue(b,m,I,f){const {onStatisticField:L,statisticType:P}=b;b=null;b=I?.has(L)?I.get(L):F.isStringField(this.fieldsIndex.get(L))||this._isAnyDateField(L)?H.calculateStringStatistics({values:m,returnDistinct:f}):H.calculateStatistics({values:f?[...(new Set(m))]:m,minValue:null,maxValue:null,useSampleStdDev:!0});I&&I.set(L,b);return b["var"===P?"variance":P]}_getPercentileValue(b,
m){const {onStatisticField:I,statisticParameters:f,statisticType:L}=b,{value:P,orderBy:S}=f;b=this.fieldsIndex.get(I);return H.calculatePercentile(m,{value:P,orderBy:S,fieldType:b?.type,isDiscrete:"percentile_disc"===L})}_getAttributeValues(b,m,I){if(I.has(m))return I.get(m);const f=this.fieldsIndex.get(m),L=this.items.map(P=>b.getFieldValue(P,m,f));I.set(m,L);return L}_calculateUniqueValues(b,m){const I={},f=this.items,L=f.length;for(let P=0;P<L;P++){const S=f[P],ca=[];for(const T of b)ca.push(T[P]);
const U=ca.join(",");null==I[U]?I[U]={count:1,data:ca,items:[S],itemPositions:[P]}:(m||I[U].count++,I[U].items.push(S),I[U].itemPositions.push(P))}return I}async _getDataValues(b,m=!0){const I=new q(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:f,scale:L,timeZone:P}=b;return f?I.getExpressionValues(this.items,f,{viewingMode:"map",scale:L,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},P):I.getDataValues(this.items,
x.clone(b),m)}}class v{constructor(b,m){this.coords=b;this.coordsIndex=m}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}l.QueryEngineResult=J;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(e,l){function x(g){if("lowerLeft"===g.originPosition&&4===g.scale.length&&4===g.translate.length)return g;const {originPosition:d,
scale:k,translate:z}=g;g=k[1]??1;return{originPosition:"lowerLeft",scale:[k[0]??1,"lowerLeft"===d?g:-g,k[2]??1,k[3]??1],translate:[z[0]??0,z[1]??0,z[2]??0,z[3]??0]}}function C({scale:g,translate:d},k){return Math.round((k-d[0])/g[0])}function u({scale:g,translate:d},k){return Math.round((k-d[1])/g[1])}function M({scale:g,translate:d},k){return Math.round(((k??0)-d[2])/g[2])}function a({scale:g,translate:d},k){return k?Math.round((k-d[3])/g[3]):0}function q(g,d){return g&&d?ca:g&&!d?P:!g&&d?S:L}function h({scale:g,
translate:d},k){return k*g[0]+d[0]}function w({scale:g,translate:d},k){return k*g[1]+d[1]}function r({scale:g,translate:d},k){return(k??0)*g[2]+d[2]}function F({scale:g,translate:d},k){return k?k*g[3]+d[3]:0}function H(g,d){return g&&d?Q:g&&!d?T:!g&&d?y:U}function t(g,d,k){const z=Array(k.length);for(let O=0;O<k.length;O++)z[O]=d(g,k[O]);return z}function G(g,d,k){let [z,O]=k[0],X=Math.min(z,d[0]),ba=Math.min(O,d[1]),fa=Math.max(z,d[2]);d=Math.max(O,d[3]);for(let ma=1;ma<k.length;ma++){const [pa,
oa]=k[ma];z+=pa;O+=oa;0>pa&&(X=Math.min(X,z));0<pa&&(fa=Math.max(fa,z));0>oa?ba=Math.min(ba,O):0<oa&&(d=Math.max(d,O))}g[0]=X;g[1]=ba;g[2]=fa;g[3]=d;return g}function J(g,d){if(!d.length)return null;g[0]=g[1]=Number.POSITIVE_INFINITY;g[2]=g[3]=Number.NEGATIVE_INFINITY;for(let k=0;k<d.length;k++)G(g,g,d[k]);return g}function v(g,d,k){g=x(g);d.xmin=C(g,k.xmin);d.ymin=u(g,k.ymin);d.xmax=C(g,k.xmax);d.ymax=u(g,k.ymax);k.hasZ&&(d.zmin=M(g,k.zmin),d.zmax=M(g,k.zmax));k.hasM&&(d.mmin=a(g,k.mmin),d.mmax=
a(g,k.mmax));d.hasZ=k.hasZ??!1;d.hasM=k.hasM??!1;return d}function b(g,d,k){g=x(g);d.points=q(k.hasZ,k.hasM)(g,k.points)??[];d.hasZ=k.hasZ??!1;d.hasM=k.hasM??!1;return d}function m(g,d,k){g=x(g);d.x=C(g,k.x);d.y=u(g,k.y);null!=k.z&&(d.z=M(g,k.z));null!=k.m&&(d.m=a(g,k.m));return d}function I(g,d,k){{g=x(g);var z=k.rings;const O=[],X=q(k.hasZ,k.hasM);for(let ba=0;ba<z.length;ba++){const fa=X(g,z[ba]);fa&&3<=fa.length&&O.push(fa)}g=O.length?O:null}if(!g)return null;d.rings=g;d.hasZ=k.hasZ??!1;d.hasM=
k.hasM??!1;return d}function f(g,d,k){{g=x(g);var z=k.paths;const O=[],X=q(k.hasZ,k.hasM);for(let ba=0;ba<z.length;ba++){const fa=X(g,z[ba]);fa&&2<=fa.length&&O.push(fa)}g=O.length?O:null}if(!g)return null;d.paths=g;d.hasZ=k.hasZ??!1;d.hasM=k.hasM??!1;return d}const L=(g,d)=>{const k=[];if(!d.length)return null;var z=d[0];let O=C(g,z[0]);z=u(g,z[1]);k.push([O,z]);for(let X=1;X<d.length;X++){const [ba,fa]=d[X],ma=C(g,ba),pa=u(g,fa);ma===O&&pa===z||k.push([ma-O,pa-z]);O=ma;z=pa}return k},P=(g,d)=>{const k=
[];if(!d.length)return null;var z=d[0];let O=C(g,z[0]),X=u(g,z[1]);z=M(g,z[2]);k.push([O,X,z]);for(let ba=1;ba<d.length;ba++){const [fa,ma,pa]=d[ba],oa=C(g,fa),qa=u(g,ma),va=M(g,pa);oa===O&&qa===X&&va===z||k.push([oa-O,qa-X,va]);O=oa;X=qa;z=va}return k},S=(g,d)=>{const k=[];if(!d.length)return null;var z=d[0];let O=C(g,z[0]),X=u(g,z[1]);z=a(g,z[2]);k.push([O,X,z]);for(let ba=1;ba<d.length;ba++){const [fa,ma,pa]=d[ba],oa=C(g,fa),qa=u(g,ma),va=a(g,pa);oa===O&&qa===X&&va===z||k.push([oa-O,qa-X,va]);
O=oa;X=qa;z=va}return k},ca=(g,d)=>{const k=[];if(!d.length)return null;var z=d[0];let O=C(g,z[0]),X=u(g,z[1]),ba=M(g,z[2]);z=a(g,z[3]);k.push([O,X,ba,z]);for(let fa=1;fa<d.length;fa++){const [ma,pa,oa,qa]=d[fa],va=C(g,ma),xa=u(g,pa),Aa=M(g,oa),Ea=a(g,qa);va===O&&xa===X&&Aa===ba&&Ea===z||k.push([va-O,xa-X,Aa,Ea]);O=va;X=xa;ba=Aa;z=Ea}return k},U=(g,d)=>{const k=Array(d.length);if(!d.length)return k;var z=d[0];let O=h(g,z[0]);z=w(g,z[1]);k[0]=[O,z];const {scale:X,originPosition:ba}=g;g=X[0];const fa=
"lowerLeft"===ba?X[1]:-X[1];for(let ma=1;ma<d.length;ma++){const [pa,oa]=d[ma];O+=g*pa;z+=fa*oa;k[ma]=[O,z]}return k},T=(g,d)=>{const k=Array(d.length);if(!d.length)return k;var z=d[0];let O=h(g,z[0]),X=w(g,z[1]);k[0]=[O,X,r(g,z[2])];const {scale:ba,originPosition:fa}=g;z=ba[0];const ma="lowerLeft"===fa?ba[1]:-ba[1];for(let pa=1;pa<d.length;pa++){const [oa,qa,va]=d[pa];O+=z*oa;X+=ma*qa;k[pa]=[O,X,r(g,va)]}return k},y=(g,d)=>{const k=Array(d.length);if(!d.length)return k;var z=d[0];let O=h(g,z[0]),
X=w(g,z[1]);k[0]=[O,X,F(g,z[2])];const {scale:ba,originPosition:fa}=g;z=ba[0];const ma="lowerLeft"===fa?ba[1]:-ba[1];for(let pa=1;pa<d.length;pa++){const [oa,qa,va]=d[pa];O+=z*oa;X+=ma*qa;k[pa]=[O,X,F(g,va)]}return k},Q=(g,d)=>{const k=Array(d.length);if(!d.length)return k;var z=d[0];let O=h(g,z[0]),X=w(g,z[1]);k[0]=[O,X,r(g,z[2]),F(g,z[3])];const {scale:ba,originPosition:fa}=g;z=ba[0];const ma="lowerLeft"===fa?ba[1]:-ba[1];for(let pa=1;pa<d.length;pa++){const [oa,qa,va,xa]=d[pa];O+=z*oa;X+=ma*qa;
k[pa]=[O,X,r(g,va),F(g,xa)]}return k};e.getQuantizedBoundsCoordsArray=G;e.getQuantizedBoundsCoordsArrayArray=J;e.getQuantizedBoundsPaths=function(g){return J([0,0,0,0],g)};e.getQuantizedBoundsPoints=function(g){const d=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return G(d,d,g)};e.getQuantizedBoundsRings=function(g){return J([0,0,0,0],g)};e.normalizeTransform=x;e.quantizeBounds=function(g,d,k){g=x(g);d[0]=C(g,k[0]);d[3]=u(g,k[1]);d[2]=C(g,
k[2]);d[1]=u(g,k[3]);return d};e.quantizeCoordsArrayXY=L;e.quantizeCoordsArrayXYM=S;e.quantizeCoordsArrayXYZ=P;e.quantizeCoordsArrayXYZM=ca;e.quantizeExtent=v;e.quantizeGeometry=function(g,d){return g&&d?l.isPoint(d)?m(g,{},d):l.isPolyline(d)?f(g,{},d):l.isPolygon(d)?I(g,{},d):l.isMultipoint(d)?b(g,{},d):l.isExtent(d)?v(g,{},d):null:null};e.quantizeM=a;e.quantizeMultipoint=b;e.quantizePoint=m;e.quantizePolygon=I;e.quantizePolyline=f;e.quantizeX=C;e.quantizeY=u;e.quantizeZ=M;e.toQuantizationTransform=
function(g){return g?{originPosition:"upper-left"===g.originPosition?"upperLeft":"lower-left"===g.originPosition?"lowerLeft":g.originPosition,scale:g.tolerance?[g.tolerance,g.tolerance,1,1]:[1,1,1,1],translate:null!=g.extent?[g.extent.xmin,g.extent.ymax,g.extent.zmin??0,g.extent.mmin??0]:[0,0,0,0]}:null};e.unquantizeBounds=function(g,d,k){g=x(g);return k?(d[0]=h(g,k[0]),d[1]=w(g,k[3]),d[2]=h(g,k[2]),d[3]=w(g,k[1]),d):[h(g,d[0]),w(g,d[3]),h(g,d[2]),w(g,d[1])]};e.unquantizeCoordsArrayArray=t;e.unquantizeCoordsArrayXY=
U;e.unquantizeCoordsArrayXYM=y;e.unquantizeCoordsArrayXYZ=T;e.unquantizeCoordsArrayXYZM=Q;e.unquantizeExtent=function(g,d,k,z=k.hasZ??!1,O=k.hasM??!1){g=x(g);d.xmin=h(g,k.xmin);d.xmax=h(g,k.xmax);d.ymin=w(g,k.ymin);d.ymax=w(g,k.ymax);z&&(d.zmin=r(g,k.zmin),d.zmax=r(g,k.zmax));O&&(d.mmin=F(g,k.mmin),d.mmax=F(g,k.mmax));d.hasZ=z;d.hasM=O;return d};e.unquantizeM=F;e.unquantizeMultipoint=function(g,d,k,z=k?.hasZ??!1,O=k?.hasM??!1){null!=k&&(g=x(g),d.points=H(z,O)(g,k.points),d.hasZ=z,d.hasM=O);return d};
e.unquantizePoint=function(g,d,k,z=null!=k?.z,O=null!=k?.m){if(null==k)return d;g=x(g);d.x=h(g,k.x);d.y=w(g,k.y);z&&(d.z=r(g,k.z));O&&(d.m=F(g,k.m));return d};e.unquantizePolygon=function(g,d,k,z=k?.hasZ??!1,O=k?.hasM??!1){null!=k&&(g=x(g),d.rings=t(g,H(z,O),k.rings),d.hasZ=z,d.hasM=O);return d};e.unquantizePolyline=function(g,d,k,z=k?.hasZ??!1,O=k?.hasM??!1){null!=k&&(g=x(g),d.paths=t(g,H(z,O),k.paths),d.hasZ=z,d.hasM=O);return d};e.unquantizeX=h;e.unquantizeY=w;e.unquantizeZ=r;Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(e,l,x,C,u,M){class a{constructor(q,h,w){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=q.returnDistinctValues??!1;this.fieldsIndex=w;this.featureAdapter=h;if((h=q.outFields)&&
!h.includes("*")){this.outFields=h;q=0;for(const F of h){var r=e.getExpressionFromFieldName(F);r=(h=this.fieldsIndex.get(r))?null:e.getWhereClause(r,w);h=h?h.name:e.getAliasFromFieldName(F)||`FIELD_EXP_${q++}`;this._fieldDataCache.set(F,{alias:h,clause:r})}}}countDistinctValues(q){if(!this.returnDistinctValues)return q.length;q.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size}getAttributes(q){q=this._processAttributesForOutFields(q);return this._processAttributesForDistinctValues(q)}getFieldValue(q,
h,w){const r=w?w.name:h;let F=null;this._fieldDataCache.has(r)?F=this._fieldDataCache.get(r)?.clause:w||(F=e.getWhereClause(h,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:F}));return w?this.featureAdapter.getAttribute(q,r):F?.calculateValue(q,this.featureAdapter)}getDataValues(q,h,w=!0){const r=h.normalizationType,F=h.normalizationTotal,H=this.fieldsIndex.get(h.field),t=x.isDateOnlyField(H)||x.isTimestampOffsetField(H),G=x.isTimeOnlyField(H);return q.map(J=>{let v=h.field&&this.getFieldValue(J,
h.field,this.fieldsIndex.get(h.field));h.field2?(v=`${u.processNullValue(v)}${h.fieldDelimiter}${u.processNullValue(this.getFieldValue(J,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(v=`${v}${h.fieldDelimiter}${u.processNullValue(this.getFieldValue(J,h.field3,this.fieldsIndex.get(h.field3)))}`)):"string"===typeof v&&w&&(t?v=v?(new Date(v)).getTime():null:G&&(v=v?C.timeOnlyToMilliseconds(v):null));r&&Number.isFinite(v)&&(J="field"===r&&h.normalizationField?this.getFieldValue(J,h.normalizationField,
this.fieldsIndex.get(h.normalizationField)):null,v=u.getNormalizedValue(v,r,J,F));return v})}async getExpressionValues(q,h,w,r,F){const {arcadeUtils:H}=await M.loadArcade(),t=H.hasGeometryOperations(h);t&&await H.enableGeometryOperations();const G=H.createFunction(h),J=H.getViewInfo(w),v={fields:this.fieldsIndex.fields};return q.map(b=>{b={attributes:this.featureAdapter.getAttributes(b),layer:v,geometry:t?{...l.getGeometry(r.geometryType,r.hasZ,r.hasM,this.featureAdapter.getGeometry(b)),spatialReference:w?.spatialReference}:
null};b=H.createExecContext(b,J,F);return H.executeFunction(G,b)})}validateItem(q,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:e.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testFeature(q,this.featureAdapter)??!1}validateItems(q,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:e.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h)?.clause?.testSet(q,this.featureAdapter)??!1}_processAttributesForOutFields(q){const h=
this.outFields;if(!h?.length)return this.featureAdapter.getAttributes(q);const w={};for(const r of h){const {alias:F,clause:H}=this._fieldDataCache.get(r);w[F]=H?H.calculateValue(q,this.featureAdapter):this.featureAdapter.getAttribute(q,F)}return w}_processAttributesForDistinctValues(q){if(null==q||!this.returnDistinctValues)return q;var h=this.outFields,w=[];if(h)for(const F of h){var {alias:r}=this._fieldDataCache.get(F);w.push(q[r])}else for(r in q)w.push(q[r]);h=`${(h||["*"]).join(",")}=${w.join(",")}`;
w=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++w);return 1<w?null:q}}return a})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t){function G(f){f=I.exec(f);if(!f)return null;const {hh:L,mm:P,ss:S,ms:ca}=f.groups;return Number(L)*u.millisecondsPerTimeUnit.hours+Number(P)*u.millisecondsPerTimeUnit.minutes+Number(S)*u.millisecondsPerTimeUnit.seconds+Number(ca||0)}function J(f,L){f=null!=f?f:"";null!=L&&L&&(f=f?"("+f+") AND ("+L+")":L);return f}function v(f){const L=f.layer;return f.fields.filter(P=>!L.getField(P))}function b(f){const L=f.layer;return f.fields.filter(P=>{P=L.getFieldUsageInfo(P);
return!P||!P.supportsStatistics})}let m=null;const I=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;e.calculateHeatmapStats=function(f,L=18,P,S,ca){const U=new Float64Array(S*ca);L=Math.round(C.pt2px(L));let T=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY;P=w.createValueFunction(P);for(const {geometry:d,attributes:k}of f){const {x:z,y:O}=d;f=Math.max(0,z-L);var Q=Math.max(0,O-L);const X=Math.min(ca,O+L),ba=Math.min(S,z+L),fa=+P(k);for(;Q<X;Q++)for(let ma=
f;ma<ba;ma++){var g=Q*S+ma;const pa=w.evaluateDensityKernel(ma-z,Q-O,L)*fa;g=U[g]+=pa;T=Math.min(T,g);y=Math.max(y,g)}}return{min:T,max:y}};e.getDataValues=async function(f,L,P=!0){if(!L)return[];const {field:S,field2:ca,field3:U,fieldDelimiter:T,fieldInfos:y,timeZone:Q}=f;var g=S&&y?.find(qa=>qa.name.toLowerCase()===S.toLowerCase());const d=g?h.isTimeOnlyField(g):!1,k=g?r.isAnyDateField(g):!1,z=f.valueExpression,O=f.normalizationType,X=f.normalizationField,ba=f.normalizationTotal,fa=[];g=f.viewInfoParams;
let ma=null,pa=null;if(z){if(!m){const {arcadeUtils:qa}=await H.loadArcade();m=qa}m.hasGeometryOperations(z)&&await m.enableGeometryOperations();ma=m.createFunction(z);pa=g?m.getViewInfo({viewingMode:g.viewingMode,scale:g.scale,spatialReference:new M(g.spatialReference)}):null}f=f.fieldInfos;const oa=L[0]&&"declaredClass"in L[0]&&"esri.Graphic"===L[0].declaredClass||!f?null:{fields:f};L.forEach(qa=>{var va=qa.attributes;if(z){var xa=m.createExecContext(oa?{...qa,layer:oa}:qa,pa,Q);xa=m.executeFunction(ma,
xa)}else va&&(xa=va[S],ca?(xa=`${F.processNullValue(xa)}${T}${F.processNullValue(va[ca])}`,U&&(xa=`${xa}${T}${F.processNullValue(va[U])}`)):"string"===typeof xa&&P&&(k?xa=xa?(new Date(xa)).getTime():null:d&&(xa=xa?G(xa):null)));O&&"number"===typeof xa&&isFinite(xa)&&(va=va&&parseFloat(va[X]),xa=F.getNormalizedValue(xa,O,va,ba));fa.push(xa)});return fa};e.getRangeExpr=function(f,L,P){L=null!=L?f+" \x3e\x3d "+L:"";f=null!=P?f+" \x3c\x3d "+P:"";P="";return(P=L&&f?J(L,f):L||f)?"("+P+")":""};e.getSQLFilterForNormalization=
function(f){const L=f.field,P=f.normalizationType;f=f.normalizationField;let S;if("field"===P)S="(NOT "+f+" \x3d 0)";else if("log"===P||"natural-log"===P||"square-root"===P)S=`(${L} > 0)`;return S};e.getSumOfAttributesExpr=function(f,L,P){const S=[],ca=[],U=[],T=[],y=[];f.forEach((g,d)=>{const k=g.field?"field":"expression",z=g.field||g.valueExpression;g.field?(y.push(z),ca.push(`var ${k}${d} = Number($feature["${z}"]);`)):(S.push(`function getValueForExpr${d}() {\n  ${z} \n}`),ca.push(`var ${k}${d} = Number(getValueForExpr${d}());`));
P||U.push(`${k}${d} = IIf(${k}${d} < 0, 0, ${k}${d});`);T.push(`${k}${d}`)});f=S.length?null:y.reduce((g,d)=>`${g} + ${d}`);let Q=null;L||P?L?P||f&&(Q=`(( ${f} ) >= 0)`):f&&(Q=`(( ${f} ) <> 0)`):f&&(Q=`(( ${f} ) > 0)`);return{valueExpression:[S.length?S.join("\n"):"",ca.join("\n"),U.join("\n"),`var total = ${T.join(" + ")};`,"return total;"].filter(Boolean).join("\n\n"),sqlExpression:f,sqlWhere:Q}};e.mergeWhereClauses=J;e.quantizeFeatures=function(f,L,P,S){const ca=q.isWrappable(P)?q.getInfo(P):null,
U=ca?Math.round((ca.valid[1]-ca.valid[0])/L.scale[0]):null;return f.map(T=>{const y=new t(T.geometry);a.quantizePoint(L,y,y);if(ca){var Q=U??0,g=S[0];0>y.x?y.x+=Q:y.x>g&&(y.x-=Q)}T.geometry=y;return T})};e.timeOnlyToMilliseconds=G;e.verifyBasicFieldValidity=function(f,L,P){const S=v({layer:f,fields:L});if(S.length)return new x(P,"Unknown fields: "+S.join(", ")+". You can only use fields defined in the layer schema");f=b({layer:f,fields:L});if(f.length)return new x(P,"Unsupported fields: "+f.join(", ")+
". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};e.verifyFieldType=function(f,L,P,S){let ca;L?L.name!==f.objectIdField&&S.includes(L.type)||(ca=new x(P,"'field' should be one of these types: "+S.join(","))):ca=new x(P,"'field' is not defined in the layer schema");return ca};e.verifyFilterValidity=function(f,L){if(f&&"intersects"!==f.spatialRelationship)return new x(L,"Only 'intersects' spatialRelationship is supported for featureFilter")};
e.verifyNumericField=function(f,L,P){let S;L?L.name!==f.objectIdField&&h.isNumericField(L)||(S=new x(P,"'field' should be one of these numeric types: "+h.numericTypes.join(","))):S=new x(P,"'field' is not defined in the layer schema");return S};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(e){function l(u){return u?72*u/96:0}function x(u=0,M=0){return{x:u,y:M}}const C=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;e.castRenderScreenPointArray=
function(u){return u};e.castRenderScreenPointArray3=function(u){return u};e.castScreenPointArray=function(u){return u};e.cloneScreenPoint=function(u){return u?x(u.x,u.y):null};e.createRenderScreenPoint=function(u=0,M=0){return{x:u,y:M}};e.createRenderScreenPointArray=function(u=0,M=0){return[u,M]};e.createRenderScreenPointArray3=function(u=0,M=0,a=0){return[u,M,a]};e.createScreenPoint=x;e.createScreenPointArray=function(u=0,M=0){return[u,M]};e.pt2px=function(u){return u?u/72*96:0};e.px2pt=l;e.screenPointArrayToObject=
function(u,M){return M?(M.x=u[0],M.y=u[1],M):{x:u[0],y:u[1]}};e.screenPointObjectToArray=function(u,M){return M?(M[0]=u.x,M[1]=u.y,2<M.length&&(M[2]=0),M):[u.x,u.y]};e.toPt=function(u){if("string"===typeof u){var M=u.match(C);if(M){var a=Number(M[1]);M=M[3]&&M[3].toLowerCase();u="-"===u.charAt(0);a="px"===M?l(a):a;return u?-a:a}console.warn("screenUtils.toPt: input not recognized!");return null}return u};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports",
"../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(e,l,x,C){function u(q,h,w){return 0===q?0:q*a[h]/a[w]}function M(q){switch(q){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const a={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,
centuries:31536E8};e.convertTime=u;e.isValidDate=function(q){return q instanceof Date&&!isNaN(q.getTime())};e.makeUTCTime=function(q,h,w="milliseconds"){h=new Date(u(h,w,"milliseconds"));h.setUTCFullYear(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate());return h};e.mergeTimeExtents=function(q,h){return q&&h?q.intersection(h):q||h};e.millisecondsPerTimeUnit=a;e.offsetDate=function(q,h,w,r=x.system){r=new C.IANAZone(l.resolveTimeZone(r));q=C.DateTime.fromJSDate(q,{zone:r});r="decades"===w||"centuries"===
w?"year":M(w);"decades"===w&&(h*=10);"centuries"===w&&(h*=100);return q.plus({[r]:h}).toJSDate()};e.offsetDateUTC=function(q,h,w="milliseconds"){q=q.getTime();h=u(h,w,"milliseconds");return new Date(q+h)};e.resetUTCDate=function(q,h){q=new Date(q.getTime());q.setUTCFullYear(h.getFullYear(),h.getMonth(),h.getDate());return q};e.timeSinceUTCMidnight=function(q,h="milliseconds"){const w=u(q.getUTCHours(),"hours","milliseconds"),r=u(q.getUTCMinutes(),"minutes","milliseconds"),F=u(q.getUTCSeconds(),"seconds",
"milliseconds");q=q.getUTCMilliseconds();return u(w+r+F+q,"milliseconds",h)};e.truncateDate=function(q,h,w=x.system){w=new C.IANAZone(l.resolveTimeZone(w));q=C.DateTime.fromJSDate(q,{zone:w});if("decades"===h||"centuries"===h)return q=q.startOf("year"),{year:w}=q,q.set({year:w-w%("decades"===h?10:100)}).toJSDate();h=M(h);return q.startOf(h).toJSDate()};e.truncateLocalTime=function(q){const h=new Date(0);h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0);h.setFullYear(q.getUTCFullYear(),
q.getUTCMonth(),q.getUTCDate());return h};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(e,l,x,C,u){function M(a,q,h,w){let {color:r,ratio:F}=q,{color:H,ratio:t}=h;t===F&&(1===t?F-=1E-6:t+=1E-6);q=l.clamp((w-F)/(t-F),0,1);C.lerp(a,r.toArray(),H.toArray(),q)}e.createValueFunction=function(a){return"function"===
typeof a?a:a?q=>+q[a]:()=>1};e.evaluateDensityKernel=function(a,q,h){a=Math.sqrt(a**2+q**2)/h;return 1<a?0:3/(Math.PI*h**2)*(1-a**2)**2};e.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(a){return x.px2pt(2.4*a)};e.generateGradient=function(a){const q=new Uint8ClampedArray(2048);a=a.filter(({ratio:H})=>0<=H&&1>=H).sort((H,t)=>H.ratio-t.ratio).map(({color:H,ratio:t})=>({color:H,ratio:Math.max(t,.001)}));if(1>a.length)return q;let h=a[0],w=a[0],r=1;const F=u.create();for(let H=0;512>H;H++){const t=
(H+.5)/512;for(;t>w.ratio&&r<a.length;)h=w,w=a[r++];M(F,h,w,t);q.set(F,4*H)}return q};e.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(a){return x.pt2px(a)/2.4};e.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(e,l,x,C,u,M){function a(t){return String(t).padStart(2,
"0")}function q(t,G,J){if("date"===G||"number"===G){"number"===G&&(t=new Date(t));G=J?t.getFullYear():t.getUTCFullYear();const v=a((J?t.getMonth():t.getUTCMonth())+1),b=a(J?t.getDate():t.getUTCDate()),m=a(J?t.getHours():t.getUTCHours()),I=a(J?t.getMinutes():t.getUTCMinutes());t=a(J?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${G}-${v}-${b} ${m}:${I}:${t}'`}return t}function h(t,G){if(G instanceof Date)return"date";if("number"===typeof G)return"number";if("string"===typeof G&&(t=t.getField(G),"\x3cnow\x3e"!==
G.toLowerCase()&&x.isDateField(t)))return"field"}const w={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},r={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},F=new Set(["integer","small-integer"]);let H=null;e.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};e.dateTypes=
["date","date-only","timestamp-offset"];e.defaultBasemapGroups=w;e.defaultStatisticTypes={exclude:["median"]};e.fieldDelimiter=",";e.formatAnyDate=function(t,G){const {format:J,timeZoneOptions:v,fieldType:b}=G??{};let m;v&&({timeZone:I,timeZoneName:m}=M.getTimeZoneFormattingOptions(v.layerTimeZone,v.datesInUnknownTimezone,v.viewTimeZone,l.convertDateFormatToIntlOptions(J||"short-date-short-time"),b));if("string"===typeof t&&isNaN(Date.parse("time-only"===b?`1970-01-01T${t}Z`:t)))return t;switch(b){case "date-only":var I=
l.convertDateFormatToIntlOptions(J||"short-date");return"string"===typeof t?l.formatDateOnly(t,{...I}):l.formatDate(t,{...I,timeZone:M.utc});case "time-only":return I=l.convertDateFormatToIntlOptions(J||"short-time"),"string"===typeof t?l.formatTimeOnly(t,I):l.formatDate(t,{...I,timeZone:M.utc});case "timestamp-offset":if(!I&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;I=(G=J||v?l.convertDateFormatToIntlOptions(J||"short-date-short-time"):void 0)?{...G,timeZone:I,timeZoneName:m}:
void 0;return"string"===typeof t?l.formatTimestamp(t,I):l.formatDate(t,I);default:return G=J||v?l.convertDateFormatToIntlOptions(J||"short-date-short-time"):void 0,l.formatDate("string"===typeof t?new Date(t):t,G?{...G,timeZone:I,timeZoneName:m}:void 0)}};e.getBasemapGroup=function(t,G=w){for(const J in G)if(G[J].includes(t))return J};e.getBasemapId=function(t,G,J=!0){let v=null;t&&("string"===typeof t?G.includes(t)&&(v=t):v=u.getWellKnownBasemapId(t));return J?v||"gray":v};e.getDateDiffSQL=function(t,
G,J,v){const {hasQueryEngine:b}=t;J=q(J,h(t,J),b);t=q(G,h(t,G),b);t=`(${J} - ${t})`;v=r[v];G="/";1>v&&(v=1/v,G="*");return{sqlExpression:1===v?t:`(${t} ${G} ${v})`,sqlWhere:null}};e.getDateType=h;e.getFieldsList=async function(t){const {field:G,field2:J,field3:v,normalizationField:b,valueExpression:m}=t;t=[];m&&(H||({arcadeUtils:t}=await C.loadArcade(),H=t),t=H.extractFieldNames(m));G&&t.push(G);J&&t.push(J);v&&t.push(v);b&&t.push(b);return t};e.getNormalizationType=function(t){let G=t.normalizationType;
G||(t.normalizationField?G="field":null!=t.normalizationTotal&&(G="percent-of-total"));return G??void 0};e.isAnyDateField=function(t){return x.isDateField(t)||x.isDateOnlyField(t)||x.isTimestampOffsetField(t)};e.isIntegerField=function(t,G){t=G&&t.getField(G);return!!t&&F.has(t.type)};e.unitValueInDays=r;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(e,l,x,C,u,M,a,q,h,w){function r(g,d){let k;if("string"===typeof g){const z=g in w.esriBasemapDefinitions,O=!z&&g.includes("/");if(!z&&!O)return x.apiKey?T().warn(`Unable to find basemap definition for: ${g}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`):(d=Object.entries(w.esriBasemapDefinitions).filter(([,X])=>X.classic||X.is3d).map(([X])=>`"${X}"`).sort().join(", "),T().warn(`Unable to find basemap definition for: ${g}. Try one of these: ${d}`)),null;d&&(k=
d[g]);k||(k=z?l.fromId(g):new l({style:{id:g}}),d&&(d[g]=k))}else k=q.ensureType(l,g);k?.destroyed&&(T().warn("The provided basemap is already destroyed",{basemap:k}),k=null);return k}function F(g){if(y)return y(g);let d=null;g=J(g);const k=!g?.baseLayers.length;for(const O in w.esriBasemapDefinitions){var z=I(w.esriBasemapDefinitions[O]);z=L(g,z,{mustMatchReferences:k});if("equal"===z){d=O;break}"base-layers-equal"===z&&(d=O)}return d}function H(g,d){const k=new C;g.forEach(z=>{const O=d.find(X=>
"scene"!==X.type&&S(b(z),b(X)))||z;k.includes(O)?k.push(z):k.push(O)});return k}function t(g){if(G(g.url))return!0;if("vector-tile"===g.type)for(const d in g.sourceNameToSource)if(G(g.sourceNameToSource[d]?.sourceUrl))return!0;return!1}function G(g){if(!g)return!1;g=new a.Url(a.makeAbsolute(g));return!!g.authority&&Q.test(g.authority)}function J(g){return g?!g.loaded&&g.resourceInfo?I(g.resourceInfo.data):{baseLayers:v(g.baseLayers),referenceLayers:v(g.referenceLayers)}:null}function v(g){return(C.isCollection(g)?
g.toArray():g).map(b)}function b(g){return{type:g.type,effect:"effect"in g?g.effect:void 0,url:ca("urlTemplate"in g&&g.urlTemplate||g.url||"styleUrl"in g&&g.styleUrl||""),minScale:"minScale"in g&&null!=g.minScale?g.minScale:0,maxScale:"maxScale"in g&&null!=g.maxScale?g.maxScale:0,opacity:null!=g.opacity?g.opacity:1,visible:null!=g.visible?!!g.visible:!0,sublayers:"map-image"!==g.type&&"wms"!==g.type||null==g.sublayers?void 0:g.sublayers?.map(d=>({id:d.id,visible:d.visible})),activeLayerId:"wmts"===
g.type?g.activeLayer?.id:void 0}}function m(g){return g.isReference||"ArcGISSceneServiceLayer"===g.layerType}function I(g){return g?{baseLayers:f((g.baseMapLayers??[]).filter(d=>!m(d))),referenceLayers:f((g.baseMapLayers??[]).filter(d=>m(d)))}:null}function f(g){return g.map(d=>{let k;switch(d.layerType){case "VectorTileLayer":k="vector-tile";break;case "ArcGISTiledMapServiceLayer":k="tile";break;case "ArcGISSceneServiceLayer":k="scene";break;default:k="unknown"}return{type:k,effect:d.effect,url:ca(d.templateUrl||
d.urlTemplate||d.styleUrl||d.url),minScale:d.minScale??0,maxScale:d.maxScale??0,opacity:d.opacity??1,visible:null!=d.visibility?!!d.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function L(g,d,k){return null!=g!==(null!=d)?"not-equal":g&&d?P(g.baseLayers,d.baseLayers)?P(g.referenceLayers,d.referenceLayers)?"equal":k.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function P(g,d){if(g.length!==d.length)return!1;for(let k=0;k<g.length;k++)if(!S(g[k],d[k]))return!1;return!0}
function S(g,d){if(g.type!==d.type||g.url!==d.url||g.minScale!==d.minScale||g.maxScale!==d.maxScale||g.visible!==d.visible||g.opacity!==d.opacity||!h.effectEquals(g.effect,d.effect))return!1;if(null!=g.activeLayerId||null!=d.activeLayerId)return g.activeLayerId===d.activeLayerId;if(null!=g.sublayers||null!=d.sublayers){if(null==g.sublayers||null==d.sublayers||g.sublayers.length!==d.sublayers.length)return!1;for(let k=0;k<g.sublayers.length;k++){const z=g.sublayers.at(k),O=d.sublayers.at(k);if(z?.id!==
O?.id||z?.visible!==O?.visible)return!1}}return!0}function ca(g){return g?a.normalize(g).replace(/^\s*https?:/i,"").toLowerCase():""}function U(g){return"portalItem"in g?g.portalItem?.thumbnailUrl:void 0}const T=()=>u.getLogger("esri.support.basemapUtils");let y;const Q=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;e.clonePreservingTiledLayers=function(g,d=null){g=r(g);if(!g)return null;g=g.clone();d&&(g.baseLayers=H(g.baseLayers,d.baseLayers),g.referenceLayers=H(g.referenceLayers,d.referenceLayers));
return g};e.contentEquals=function(g,d){if(g===d||null!=g?.portalItem?.id&&g.portalItem.id===d?.portalItem?.id)return!0;g=J(g);d=J(d);return"equal"===L(g,d,{mustMatchReferences:!0})};e.createCache=function(){return{}};e.destroyCache=function(g){for(const d in g)M.destroyMaybe(g[d]),delete g[d]};e.ensureType=r;e.findSpatialReference=function(g,d){if(null==d||null==g)return{spatialReference:null,updating:!1};if("not-loaded"===d.loadStatus)return d.load(),{spatialReference:null,updating:!0};if(d.spatialReference)return{spatialReference:d.spatialReference,
updating:!1};if(0===d.baseLayers.length)return{spatialReference:null,updating:!1};d=d.baseLayers.at(0);switch(d.loadStatus){case "not-loaded":d.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}d=(("supportedSpatialReferences"in d?d.supportedSpatialReferences:null)||["tileInfo"in d?d.tileInfo?.spatialReference:d.spatialReference]).filter(Boolean);const k=g.spatialReference;return k?{spatialReference:d.find(z=>k.equals(z))??d[0]??
null,updating:!1}:{spatialReference:d[0],updating:!1}};e.getBasemapThumbnailUrl=function(g){if(!g)return null;var {thumbnailUrl:d}=g;return d?d:(d=F(g))?w.esriBasemapDefinitions[d].thumbnailUrl:M.mappedFind(g.baseLayers,U)};e.getWellKnownBasemapId=F;e.hasDeveloperBasemapLayer=function(g){return!!g?.baseLayers.concat(g.referenceLayers).some(t)};e.isBasemap3D=function(g){return"Web Scene"===g.portalItem?.type||g.referenceLayers.some(d=>"scene"===d.type)};e.isBasemapInBeta=function(g){return!!g?.portalItem?.tags?.some(d=>
"beta"===d.toLowerCase())};e.isBasemapLayer=function(g,d){return g.basemap?.referenceLayers?.some(k=>k.uid===d)||g.basemap?.baseLayers?.some(k=>k.uid===d)};e.isDeveloperBasemapLayer=t;e.overrideGetWellKnownBasemapId=function(g){y=g};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G,J,v,b,m,I,f,L,P){var S;let ca=0;M=S=class extends M.JSONSupportMixin(q){constructor(y){super(y);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+ca++;this.baseLayers=new C;this.referenceLayers=new C;const Q=g=>{g.parent&&g.parent!==this&&"remove"in g.parent&&g.parent.remove(g);g.parent=this;"elevation"===g.type&&w.getLogger(this).error(`Layer '${g.title}, id:${g.id}' of type '${g.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",g=>Q(g.item)),this.referenceLayers.on("after-add",g=>Q(g.item)),this.baseLayers.on("after-remove",g=>{g.item.parent=null}),this.referenceLayers.on("after-remove",g=>{g.item.parent=null})])}initialize(){this.when().catch(y=>{w.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,y)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var y=this.baseLayers.toArray();for(const Q of y)Q.destroy();
y=this.referenceLayers.toArray();for(const Q of y)Q.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=r.destroyMaybe(this.portalItem)}normalizeCtorArgs(y){y&&"resourceInfo"in y&&(this._set("resourceInfo",y.resourceInfo),y={...y},delete y.resourceInfo);return y}set baseLayers(y){this._set("baseLayers",u.referenceSetter(y,this._get("baseLayers")))}_writeBaseLayers(y,Q,g){const d=[];y&&(g={...g,layerContainerType:"basemap"},this.baseLayers.forEach(k=>{k=P.getLayerJSON(k,
g.webmap?g.webmap.getLayerJSONFromResourceInfo(k):null,g);null!=k&&d.push(k)}),this.referenceLayers.forEach(k=>{const z=P.getLayerJSON(k,g.webmap?g.webmap.getLayerJSONFromResourceInfo(k):null,g);null!=z&&("scene"!==k.type&&(z.isReference=!0),d.push(z))}));Q.baseMapLayers=d}set referenceLayers(y){this._set("referenceLayers",u.referenceSetter(y,this._get("referenceLayers")))}writeTitle(y,Q){Q.title=y||"Basemap"}load(y){this.addResolvingPromise(this._loadFromSource(y));return Promise.resolve(this)}loadAll(){return h.loadAll(this,
y=>{y(this.baseLayers,this.referenceLayers)})}clone(){const y={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(Q=>a.isClonable(Q)?Q.clone():Q),referenceLayers:this.referenceLayers.map(Q=>a.isClonable(Q)?Q.clone():Q)};this.loaded&&(y.loadStatus="loaded");return(new S({resourceInfo:this.resourceInfo})).set(y)}read(y,Q){this.resourceInfo||this._set("resourceInfo",{data:y,context:Q});super.read(y,Q)}write(y,Q){y=y||{};Q?.origin||(Q={origin:"web-map",...Q});super.write(y,
Q);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(y.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(g=>{g=a.clone(g);g.url&&H.isProtocolRelative(g.url)&&(g.url=`https:${g.url}`);g.templateUrl&&H.isProtocolRelative(g.templateUrl)&&(g.templateUrl=`https:${g.templateUrl}`);return g}));return y}async _loadFromSource(y){const {resourceInfo:Q,portalItem:g,style:d}=this;F.throwIfAborted(y);const k=[];Q?(k.push(this._loadLayersFromJSON(Q.data,Q.context?Q.context.url:null,y)),Q.data.id&&!Q.data.title&&
k.push(f.getBasemapTitle(Q.data.id).then(z=>{z&&this.read({title:z},Q.context)}))):g?k.push(this._loadFromItem(g,y)):d&&k.push(this._loadFromStylesService(d,y));await Promise.all(k)}async _loadLayersFromJSON(y,Q,g){const d=this.resourceInfo?.context,k=this.portalItem?.portal||d?.portal||null,z=T[d?.origin||""]??"web-map",{populateOperationalLayers:O}=await new Promise((ba,fa)=>e(["./layers/support/layersCreator"],ba,fa)),X=[];F.throwIfAborted(g);if(y.baseMapLayers&&Array.isArray(y.baseMapLayers)){Q=
{context:{...d,origin:z,url:Q,portal:k,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const ba=fa=>"web-scene"===z&&"ArcGISSceneServiceLayer"===fa.layerType||fa.isReference;g=O(this.baseLayers,y.baseMapLayers.filter(fa=>!ba(fa)),Q);X.push(g);y=O(this.referenceLayers,y.baseMapLayers.filter(ba),Q);X.push(y)}await Promise.allSettled(X)}async _loadFromItem(y,Q){const g=await (await y.load(Q)).fetchData("json",Q),d=H.urlToObject(y.itemUrl??"");this._set("resourceInfo",{data:g.baseMap??
{},context:{origin:U[y.type||""]??"web-map",portal:y.portal||m.getDefault(),url:d}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:g.spatialReference},this.resourceInfo.context);this.read({title:y.title,thumbnailUrl:y.thumbnailUrl},{origin:"portal-item",portal:y.portal||m.getDefault(),url:d});return this._loadLayersFromJSON(this.resourceInfo.data,d,Q)}async _loadFromStylesService(y,Q){var g=`${y.serviceUrl}/${y.id}`;const d=(await x(g,{query:{language:y.getLanguageParamValue(),
places:y.places,worldview:y.worldview,token:y.apiKey},signal:Q?.signal})).data;g=H.urlToObject(g);this._set("resourceInfo",{data:d.baseMap??{},context:{origin:"web-map",url:g}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:d.spatialReference},this.resourceInfo.context);await this._loadLayersFromJSON(this.resourceInfo.data,g,Q);if(y.apiKey)for(const k of[...this.baseLayers,...this.referenceLayers])"apiKey"in k&&(k.apiKey=y.apiKey)}static fromId(y){return(y=
f.esriBasemapDefinitions[y])?y.itemId?new S({portalItem:{id:y.itemId,portal:{url:"https://www.arcgis.com"}}}):S.fromJSON(y,{origin:y.is3d?"web-scene":"web-map"}):null}};l.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(y,Q,g,d){this._writeBaseLayers(y,Q,d)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:C}},writer(y,Q,g,d){this._writeBaseLayers(y,Q,d)}}}}}})],M.prototype,"baseLayers",null);l.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],
M.prototype,"id",void 0);l.__decorate([t.property({type:I})],M.prototype,"portalItem",void 0);l.__decorate([t.property()],M.prototype,"referenceLayers",null);l.__decorate([t.property({readOnly:!0})],M.prototype,"resourceInfo",void 0);l.__decorate([t.property({type:b})],M.prototype,"spatialReference",void 0);l.__decorate([t.property({type:L})],M.prototype,"style",void 0);l.__decorate([t.property()],M.prototype,"thumbnailUrl",void 0);l.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],
M.prototype,"title",void 0);l.__decorate([v.writer("title")],M.prototype,"writeTitle",null);M=S=l.__decorate([J.subclass("esri.Basemap")],M);const U={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},T={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return M})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(e,l){e.castForReferenceSetter=function(x){return x};e.referenceSetter=function(x,C,u=l){C||=new u;if(C===x)return C;
C.removeAll();x&&(Array.isArray(x)||"items"in x&&Array.isArray(x.items))?C.addMany(x):x&&C.add(x);return C};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(e,l,x,C,u,M,a,q){const h=w=>{w=class extends w{constructor(...r){super(...r);this.loadError=this._loadController=null;this.loadStatus=
"not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(F=>{const H=this.load.bind(this);this.load=t=>{const G=new Promise((J,v)=>{const b=u.onAbortOrThrow(t,v);this.destroyed&&v(new l("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(J,v).finally(()=>{b&&b.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const J=this._loadController=new AbortController;H({signal:J.signal})}F();
return G}}));this.when(()=>{this._set("loadStatus","loaded");this._loadController=null},F=>{this._set("loadStatus","failed");this._set("loadError",F);this._loadController=null})}destroy(){this._loadController&&(this._loadController=x.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;
this._set("loadError",new l("load:cancelled","Cancelled"));this._loadController?.abort();this._promiseProps.abort();return this}};e.__decorate([a.property({readOnly:!0})],w.prototype,"loaded",null);e.__decorate([a.property({readOnly:!0})],w.prototype,"loadError",void 0);e.__decorate([a.property({clonable:!1})],w.prototype,"loadStatus",void 0);e.__decorate([a.property({type:[M],readOnly:!0})],w.prototype,"loadWarnings",null);return w=e.__decorate([q.subclass("esri.core.Loadable")],w)};C=class extends h(C.EsriPromise){};
C=e.__decorate([q.subclass("esri.core.Loadable")],C);(function(w){w.LoadableMixin=h;w.isLoadable=function(r){return!(!r||!r.load)}})(C||={});return C})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(e,l,x,C,u){var M;(function(h){h[h.PENDING=0]="PENDING";h[h.RESOLVED=1]="RESOLVED";h[h.REJECTED=2]="REJECTED"})(M||={});class a{constructor(){this._resolver=C.createResolver();this._status=M.PENDING;
this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=M.RESOLVED;this._cleanUp()},()=>{this._status=M.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(h){this._resolvingPromises.push(h);this._tryResolve()}isResolved(){return this._status===M.RESOLVED}isRejected(){return this._status===M.REJECTED}isFulfilled(){return this._status!==M.PENDING}abort(){this._resolver.reject(C.createAbortError())}_cleanUp(){this._resolvingPromises=
this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var h=C.createResolver(),w=[...this._resolvingPromises,h.promise],r=this._allPromise=Promise.all(w);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},F=>{this.isFulfilled()||this._allPromise!==r||C.isAbortError(F)||this._resolver.reject(F)});h.resolve()}}}const q=h=>{h=class extends h{constructor(...w){super(...w);this._promiseProps=new a;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(w,
r){return this._promiseProps.promise.then(()=>this).then(w,r)}catch(w){return this.when(null,w)}addResolvingPromise(w){w&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in w?w.when():w)}};return h=l.__decorate([u.subclass("esri.core.Promise")],h)};e.EsriPromise=class extends q(x){};e.EsriPromise=l.__decorate([u.subclass("esri.core.Promise")],e.EsriPromise);e.EsriPromiseMixin=q;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(e,l,x,C){async function u(M,a){const q=[],h=(...r)=>{for(const F of r)null!=F&&(Array.isArray(F)?h(...F):x.isCollection(F)?F.forEach(H=>h(H)):C.isLoadable(F)&&q.push(F))};a(h);let w=null;await l.map(q,async r=>{r=await l.result("loadAll"in r&&"function"===typeof r.loadAll?r.loadAll():r.load());!1!==r.ok||w||(w=r)});if(w)throw w.error;return M}e.loadAll=async function(M,a){await M.load();return u(M,a)};e.loadAllChildren=u;Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G,J,v,b,m,I,f,L,P,S){function ca(d){const k=C.id;return()=>{const z=d.deref();z&&k.findCredential(z.restUrl)&&z.signIn().catch(()=>{})}}const U=d=>Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"}));var T;let y;const Q={PortalGroup:()=>Promise.resolve({default:I}),PortalItem:()=>new Promise((d,k)=>e(["./PortalItem"],z=>d(U(z)),k)),PortalUser:()=>Promise.resolve({default:P})};a=T=class extends a.JSONSupportMixin(q){constructor(d){super(d);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.layoutGroupQuery=
this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.default3DBasemapQuery=this.customBaseUrl=this.culture=this.created=null;this.hasClassificationSchema=this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=
null;this.isReadOnly=this.isPortal=!1;this.region=this.portalProperties=this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.recycleBinEnabled=!1;this.rotatorPanels=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=x.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=
this.useDefault3dBasemap=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(d){return"string"===typeof d?{url:d}:d}destroy(){g.unregister(this);this.defaultBasemap=h.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=h.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=h.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=h.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(d){if(d)for(const k of d)x.request.trustedServers.includes(k)||
x.request.trustedServers.push(k);return d}readDefaultBasemap(d){return this._readBasemap(d)}readDefaultDevBasemap(d){return this._readBasemap(d)}readDefaultVectorBasemap(d){return this._readBasemap(d)}get extraQuery(){const d=!this.user?.orgId||this.canSearchPublic;return this.id&&!d?` AND orgid:${this.id}`:null}get hasAPIKey(){return S.isApiKeyApplicable(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let d=this.url;
if(d){const k=d.indexOf("/sharing");d=0<k?d.slice(0,k):this.url.replace(/\/+$/,"");d+="/sharing/rest"}return d}get thumbnailUrl(){const d=this.restUrl,k=this.thumbnail;return d&&k?this._normalizeSSL(d+"/portals/self/resources/"+k):null}readUrlKey(d){return d?d.toLowerCase():d}readUser(d){let k=null;d&&(k=P.fromJSON(d),k.portal=this);return k}load(d){const k=(new Promise((z,O)=>e(["../Basemap"],X=>z(U(X)),O))).then(({default:z})=>{w.throwIfAborted(d);y=z}).then(()=>this.sourceJSON?this.sourceJSON:
this.fetchSelf(this.authMode,!1,d)).then(z=>{if(!this.hasAPIKey&&C.id){const O=C.id;this.credential=O.findCredential(this.restUrl);this.credential||this.authMode!==T.AUTH_MODE_AUTO&&this.authMode!==T.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=O.on("credential-create",ca(new WeakRef(this))),g.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=z;this.read(z)});this.addResolvingPromise(k);return Promise.resolve(this)}async createElevationLayers(){await this.load();
const d=this._getHelperService("defaultElevationLayers"),k=(await new Promise((z,O)=>e(["../layers/ElevationLayer"],X=>z(U(X)),O))).default;return d?d.map(z=>new k({id:z.id,url:z.url})):[]}async fetchBasemaps(d,k){const z=await this._fetchBasemaps(d,k);!0===k?.include3d&&!1!==this.use3dBasemaps&&(d=await this._fetchBasemaps3D(d,k),z.unshift(...d));return z}async fetchDefault3DBasemap(d){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||"none"===this.default3DBasemapQuery)return null;const k=
new f;k.query=this.default3DBasemapQuery;k.disableExtraQuery=!0;return(d=(await this.queryItems(k,d)).results.find(z=>"Web Scene"===z.type))?new y({portalItem:d}):null}fetchCategorySchema(d){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",d).then(k=>k.categorySchema):w.isAborted(d)?Promise.reject(w.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(d){const k=this.featuredGroups,z=new f({num:100,sortField:"title"});if(k?.length){const O=[];for(const X of k)O.push(`(title:"${X.title}" AND owner:${X.owner})`);
z.query=O.join(" OR ");return this.queryGroups(z,d).then(X=>X.results)}return w.isAborted(d)?Promise.reject(w.createAbortError()):Promise.resolve([])}fetchRegions(d){const k=this.user?.culture||this.culture||b.getLocale();return this.request(this.restUrl+"/portals/regions",{...d,query:{culture:k}})}fetchSettings(d){const k=this.user?.culture||this.culture||b.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...d,query:{culture:k}})}static getDefault(){return m.ensureDefaultPortalInstance(()=>
new T)}queryGroups(d,k){return this.queryPortal("/community/groups",d,"PortalGroup",k)}queryItems(d,k){return this.queryPortal("/search",d,"PortalItem",k)}queryUsers(d,k){d.sortField||(d.sortField="username");return this.queryPortal("/community/users",d,"PortalUser",k)}fetchSelf(d=this.authMode,k=!1,z){const O=this.restUrl+"/portals/self";d={authMode:d,query:{culture:b.getLocale().toLowerCase()},withCredentials:!0,...z};"auto"===d.authMode&&(d.authMode="no-prompt");k&&(d.query.default=!0);return this.request(O,
d)}queryPortal(d,k,z,O){const X=F.ensureType(f,k),ba=fa=>this.request(this.restUrl+d,{...X.toRequestOptions(this),...O}).then(ma=>{const pa=X.clone();pa.start=ma.nextStart;return new L({nextQueryParams:pa,queryParams:X,total:ma.total,results:T._resultsToTypedArray(fa,{portal:this},ma,O)})}).then(ma=>Promise.all(ma.results.map(pa=>"function"===typeof pa.when?pa.when():ma)).then(()=>ma,pa=>{w.throwIfAbortError(pa);return ma}));return z&&Q[z]?Q[z]().then(({default:fa})=>{w.throwIfAborted(O);return ba(fa)}):
ba()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new M("portal:not-authenticated","Unable to authenticate user. Portal.user is missing");});if(this.authMode===T.AUTH_MODE_ANONYMOUS||this.authMode===T.AUTH_MODE_NO_PROMPT&&!C.id)return Promise.reject(new M("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const d=k=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return k||
(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=k;return this.fetchSelf("immediate")});if(this.user&&this.credential===k)return null;this.credential=k;return this.fetchSelf("immediate")}).then(z=>{z&&(this.sourceJSON=z,this.read(z))});return C.id?C.id.getCredential(this.restUrl,{prompt:this.authMode!==T.AUTH_MODE_NO_PROMPT}).then(k=>d(k)):d(this.credential)}normalizeUrl(d){const k=this.credential?.token;
return this._normalizeSSL(k?d+(d.includes("?")?"\x26":"?")+"token\x3d"+k:d)}requestToTypedArray(d,k,z){return this.request(d,k).then(O=>{const X=T._resultsToTypedArray(z,{portal:this},O);return Promise.all(X.map(ba=>"function"===typeof ba.when?ba.when():O)).then(()=>X,()=>X)})}request(d,k={}){var z={f:"json",...k.query};const {authMode:O=this.authMode===T.AUTH_MODE_ANONYMOUS||this.authMode===T.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:X=null,cacheBust:ba=!1,method:fa="auto",responseType:ma="json",
signal:pa}=k;z={authMode:O,body:X,cacheBust:ba,method:fa,query:z,responseType:ma,timeout:0,signal:pa};k.withCredentials&&(z.withCredentials=!0);return u(this._normalizeSSL(d),z).then(oa=>oa.data)}toJSON(){throw new M("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");return new T({sourceJSON:d})}_getHelperService(d){const k=this.helperServices&&this.helperServices[d];if(!k)throw new M("portal:service-not-found",
`The \`helperServices\` do not include an entry named "${d}"`);return k}async _fetchBasemaps(d,k){const z=new f;z.query=d||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);z.disableExtraQuery=!0;d=await this.queryGroups(z,k);if(!d.total)return[];d=d.results[0];z.num=100;z.query='type:"Web Map" -type:"Web Application"';z.sortField=d.sortField||"name";z.sortOrder=d.sortOrder||"desc";k=await d.queryItems(z,k);return k.total?
k.results.filter(O=>"Web Map"===O.type).map(O=>new y({portalItem:O})):[]}async _fetchBasemaps3D(d,k){d=d||this.basemapGalleryGroupQuery3D;if(!d)return[];d=new f({query:d,disableExtraQuery:!0});var z=await this.queryGroups(d,k);if(!z.total)return[];z=z.results[0];d.num=100;d.query='type:"Web Scene"';d.sortField=z.sortField||"name";d.sortOrder=z.sortOrder||"desc";k=await z.queryItems(d,k);return k.total?k.results.filter(O=>"Web Scene"===O.type).map(O=>new y({portalItem:O})):[]}_normalizeSSL(d){return d.replace(/^http:/i,
"https:").replace(":7080",":7443")}_readBasemap(d){return d?(d=y.fromJSON(d),d.portalItem={portal:this},d):null}static _resultsToTypedArray(d,k,z,O){if(z){const X=null!=O?O.signal:null;z=z.listings||z.notifications||z.userInvitations||z.tags||z.items||z.groups||z.comments||z.provisions||z.results||z.relatedItems||z;if(d||k)z=z.map(ba=>{ba=Object.assign(d?d.fromJSON(ba):ba,k);"function"===typeof ba.load&&ba.load(X);return ba})}else z=[];return z}};a.AUTH_MODE_ANONYMOUS="anonymous";a.AUTH_MODE_AUTO=
"auto";a.AUTH_MODE_IMMEDIATE="immediate";a.AUTH_MODE_NO_PROMPT="no-prompt";l.__decorate([r.property()],a.prototype,"access",void 0);l.__decorate([r.property()],a.prototype,"allSSL",void 0);l.__decorate([r.property()],a.prototype,"authMode",void 0);l.__decorate([r.property()],a.prototype,"authorizedCrossOriginDomains",void 0);l.__decorate([G.reader("authorizedCrossOriginDomains")],a.prototype,"readAuthorizedCrossOriginDomains",null);l.__decorate([r.property()],a.prototype,"basemapGalleryGroupQuery",
void 0);l.__decorate([r.property({json:{name:"3DBasemapGalleryGroupQuery"}})],a.prototype,"basemapGalleryGroupQuery3D",void 0);l.__decorate([r.property()],a.prototype,"bingKey",void 0);l.__decorate([r.property()],a.prototype,"canListApps",void 0);l.__decorate([r.property()],a.prototype,"canListData",void 0);l.__decorate([r.property()],a.prototype,"canListPreProvisionedItems",void 0);l.__decorate([r.property()],a.prototype,"canProvisionDirectPurchase",void 0);l.__decorate([r.property()],a.prototype,
"canSearchPublic",void 0);l.__decorate([r.property()],a.prototype,"canShareBingPublic",void 0);l.__decorate([r.property()],a.prototype,"canSharePublic",void 0);l.__decorate([r.property()],a.prototype,"canSignInArcGIS",void 0);l.__decorate([r.property()],a.prototype,"canSignInIDP",void 0);l.__decorate([r.property()],a.prototype,"colorSetsGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"commentsEnabled",void 0);l.__decorate([r.property({type:Date})],a.prototype,"created",void 0);l.__decorate([r.property()],
a.prototype,"credential",void 0);l.__decorate([r.property()],a.prototype,"culture",void 0);l.__decorate([r.property()],a.prototype,"currentVersion",void 0);l.__decorate([r.property()],a.prototype,"customBaseUrl",void 0);l.__decorate([r.property()],a.prototype,"default3DBasemapQuery",void 0);l.__decorate([r.property()],a.prototype,"defaultBasemap",void 0);l.__decorate([G.reader("defaultBasemap")],a.prototype,"readDefaultBasemap",null);l.__decorate([r.property()],a.prototype,"defaultDevBasemap",void 0);
l.__decorate([G.reader("defaultDevBasemap")],a.prototype,"readDefaultDevBasemap",null);l.__decorate([r.property({type:v})],a.prototype,"defaultExtent",void 0);l.__decorate([r.property()],a.prototype,"defaultVectorBasemap",void 0);l.__decorate([G.reader("defaultVectorBasemap")],a.prototype,"readDefaultVectorBasemap",null);l.__decorate([r.property()],a.prototype,"description",void 0);l.__decorate([r.property()],a.prototype,"devBasemapGalleryGroupQuery",void 0);l.__decorate([r.property()],a.prototype,
"eueiEnabled",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,"extraQuery",null);l.__decorate([r.property()],a.prototype,"featuredGroups",void 0);l.__decorate([r.property()],a.prototype,"featuredItemsGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"galleryTemplatesGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"layoutGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"livingAtlasGroupQuery",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,
"hasAPIKey",null);l.__decorate([r.property()],a.prototype,"hasCategorySchema",void 0);l.__decorate([r.property()],a.prototype,"hasClassificationSchema",void 0);l.__decorate([r.property()],a.prototype,"helpBase",void 0);l.__decorate([r.property()],a.prototype,"helperServices",void 0);l.__decorate([r.property()],a.prototype,"helpMap",void 0);l.__decorate([r.property()],a.prototype,"homePageFeaturedContent",void 0);l.__decorate([r.property()],a.prototype,"homePageFeaturedContentCount",void 0);l.__decorate([r.property()],
a.prototype,"httpPort",void 0);l.__decorate([r.property()],a.prototype,"httpsPort",void 0);l.__decorate([r.property()],a.prototype,"id",void 0);l.__decorate([r.property()],a.prototype,"ipCntryCode",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,"isOrganization",null);l.__decorate([r.property()],a.prototype,"isPortal",void 0);l.__decorate([r.property()],a.prototype,"isReadOnly",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,"itemPageUrl",null);l.__decorate([r.property()],
a.prototype,"layerTemplatesGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"maxTokenExpirationMinutes",void 0);l.__decorate([r.property({type:Date})],a.prototype,"modified",void 0);l.__decorate([r.property()],a.prototype,"name",void 0);l.__decorate([r.property()],a.prototype,"portalHostname",void 0);l.__decorate([r.property()],a.prototype,"portalMode",void 0);l.__decorate([r.property()],a.prototype,"portalProperties",void 0);l.__decorate([r.property()],a.prototype,"region",void 0);l.__decorate([r.property()],
a.prototype,"recycleBinEnabled",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,"restUrl",null);l.__decorate([r.property()],a.prototype,"rotatorPanels",void 0);l.__decorate([r.property()],a.prototype,"showHomePageDescription",void 0);l.__decorate([r.property()],a.prototype,"sourceJSON",void 0);l.__decorate([r.property()],a.prototype,"staticImagesUrl",void 0);l.__decorate([r.property({json:{name:"2DStylesGroupQuery"}})],a.prototype,"stylesGroupQuery2d",void 0);l.__decorate([r.property({json:{name:"stylesGroupQuery"}})],
a.prototype,"stylesGroupQuery3d",void 0);l.__decorate([r.property()],a.prototype,"supportsHostedServices",void 0);l.__decorate([r.property()],a.prototype,"symbolSetsGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"templatesGroupQuery",void 0);l.__decorate([r.property()],a.prototype,"thumbnail",void 0);l.__decorate([r.property({readOnly:!0})],a.prototype,"thumbnailUrl",null);l.__decorate([r.property()],a.prototype,"units",void 0);l.__decorate([r.property()],a.prototype,"url",void 0);l.__decorate([r.property()],
a.prototype,"urlKey",void 0);l.__decorate([G.reader("urlKey")],a.prototype,"readUrlKey",null);l.__decorate([r.property()],a.prototype,"user",void 0);l.__decorate([G.reader("user")],a.prototype,"readUser",null);l.__decorate([r.property()],a.prototype,"use3dBasemaps",void 0);l.__decorate([r.property()],a.prototype,"useDefault3dBasemap",void 0);l.__decorate([r.property()],a.prototype,"useStandardizedQuery",void 0);l.__decorate([r.property()],a.prototype,"useVectorBasemaps",void 0);l.__decorate([r.property()],
a.prototype,"vectorBasemapGalleryGroupQuery",void 0);l=a=T=l.__decorate([J.subclass("esri.portal.Portal")],a);const g=new FinalizationRegistry(d=>{d.remove()});return l})},"esri/portal/portalDefault":function(){define(["exports"],function(e){let l;e.clearDefaultPortalInstance=function(){l=void 0};e.ensureDefaultPortalInstance=function(x){if(!l||l.destroyed)l=x();return l};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(e,l,x,C,u,M,a,q,h){var w;x=w=class extends x.JSONSupport{constructor(r){super(r);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const r=this.url,F=this.thumbnail;return r&&F&&this.portal?this.portal?.normalizeUrl(`${r}/info/${F}?f=json`):null}get url(){const r=this.portal?.restUrl;return r?r+"/community/groups/"+this.id:
null}fetchCategorySchema(r){return this.portal.request(this.url+"/categorySchema",r).then(F=>{F=F.categorySchema||[];return F.some(H=>"contentCategorySetsGroupQuery.LivingAtlas"===H.source)?this._fetchCategorySchemaSet("LivingAtlas",r):F})}fetchMembers(r){return this.portal.request(this.url+"/users",r)}getThumbnailUrl(r){let F=this.thumbnailUrl;F&&r&&(F+=`&w=${r}`);return F}toJSON(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(r){if(!r)return null;
if(r.declaredClass)throw Error("JSON object is already hydrated");const F=new w({sourceJSON:r});F.read(r);return F}queryItems(r,F){r=u.ensureType(h,r);const H=this.portal;if(5<parseFloat(H.currentVersion))return r=r||new h,H.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",F);r=r?r.clone():new h;r.query="group:"+this.id+(r.query?" "+r.query:"");return H.queryItems(r,F)}_fetchCategorySchemaSet(r,F){const H=this.portal;return H.fetchSelf(H.authMode,!0,F).then(t=>{if(t=t.contentCategorySetsGroupQuery)return t=
new h({disableExtraQuery:!0,num:1,query:t}),H.queryGroups(t,F);throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(t=>{if(t.total){t=t.results[0];const G=new h({num:1,query:`typekeywords:"${r}"`});return t.queryItems(G,F)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",F).then(G=>{G=G?.categorySchema;return G?.length?G:[]}):[])}};e.__decorate([C.property()],
x.prototype,"access",void 0);e.__decorate([C.property({type:Date})],x.prototype,"created",void 0);e.__decorate([C.property()],x.prototype,"description",void 0);e.__decorate([C.property()],x.prototype,"id",void 0);e.__decorate([C.property()],x.prototype,"isInvitationOnly",void 0);e.__decorate([C.property({type:Date})],x.prototype,"modified",void 0);e.__decorate([C.property()],x.prototype,"owner",void 0);e.__decorate([C.property()],x.prototype,"portal",void 0);e.__decorate([C.property()],x.prototype,
"snippet",void 0);e.__decorate([C.property()],x.prototype,"sortField",void 0);e.__decorate([C.property()],x.prototype,"sortOrder",void 0);e.__decorate([C.property()],x.prototype,"sourceJSON",void 0);e.__decorate([C.property()],x.prototype,"tags",void 0);e.__decorate([C.property()],x.prototype,"thumbnail",void 0);e.__decorate([C.property({readOnly:!0})],x.prototype,"thumbnailUrl",null);e.__decorate([C.property()],x.prototype,"title",void 0);e.__decorate([C.property({readOnly:!0})],x.prototype,"url",
null);return x=w=e.__decorate([q.subclass("esri.portal.PortalGroup")],x)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(e,l,x,C,u,M,a,q,h,w,r){var F;const H=new x.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});l=F=class extends l{constructor(t){super(t);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new F({categories:this.categories?C.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,G){let J=[];this.categories&&(J=this.categories.map(m=>Array.isArray(m)?JSON.stringify(m):m));let v="";if(this.extent){var b=r.project(this.extent,w.WGS84);null!=b&&(v=`${b.xmin},${b.ymin},${b.xmax},${b.ymax}`)}b=this.query;!this.disableExtraQuery&&t.extraQuery&&(b="("+b+")"+t.extraQuery);t={categories:J,bbox:v,q:b,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(t.sortField=this.sortField.split(",").map(m=>H.toJSON(m.trim())).join(","),t.sortOrder=this.sortOrder);return{query:{...G,...t}}}};e.__decorate([u.property()],l.prototype,"categories",void 0);e.__decorate([u.property()],l.prototype,"disableExtraQuery",void 0);e.__decorate([u.property({type:h})],l.prototype,"extent",void 0);e.__decorate([u.property()],l.prototype,"filter",void 0);e.__decorate([u.property()],l.prototype,"num",void 0);e.__decorate([u.property()],
l.prototype,"query",void 0);e.__decorate([u.property()],l.prototype,"sortField",void 0);e.__decorate([u.property()],l.prototype,"sortOrder",null);e.__decorate([u.property()],l.prototype,"start",void 0);return l=F=e.__decorate([q.subclass("esri.portal.PortalQueryParams")],l)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,x,C,u,M,a){l=class extends l{constructor(q){super(q);this.total=this.results=this.queryParams=this.nextQueryParams=null}};e.__decorate([x.property()],l.prototype,"nextQueryParams",void 0);e.__decorate([x.property()],l.prototype,"queryParams",void 0);e.__decorate([x.property()],l.prototype,"results",void 0);e.__decorate([x.property()],l.prototype,"total",void 0);return l=e.__decorate([a.subclass("esri.portal.PortalQueryResult")],l)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r){var F;C=F=class extends C.JSONSupport{constructor(H){super(H);this.userType=this.userLicenseTypeId=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const H=this.url,t=this.thumbnail;return H&&t?this.portal.normalizeUrl(`${H}/info/${t}?f=json`):null}get userContentUrl(){const H=
this.portal?.restUrl;return H?`${H}/content/users/${this.username}`:null}get url(){const H=this.portal?.restUrl;return H?`${H}/community/users/${this.username}`:null}addItem(H){const t=H&&H.item;var G=H?.data;H=H?.folder;const J={method:"post"};t&&(J.query=t.createPostQuery(),null!=G&&("string"===typeof G?J.query.text=G:"object"===typeof G&&(J.query.text=JSON.stringify(G))));G=this.userContentUrl;H&&(G+="/"+("string"===typeof H?H:H.id));return this.portal.request(G+"/addItem",J).then(v=>{t.id=v.id;
t.portal=this.portal;return t.loaded?t.reload():t.load()})}async deleteItem(H,t=!1){let G=this.userContentUrl;H.ownerFolder&&(G+="/"+H.ownerFolder);await this.portal.request(G+`/items/${H.id}/delete`,{method:"post",query:t?{permanentDelete:!0}:{}});H.id=null;H.portal=null}async deleteItems(H,t=!1){H=H.slice();var G=this.userContentUrl+"/deleteItems";const J=[];var v=H.map(b=>b.id);if(v.length){t={method:"post",query:{items:v.join(","),permanentDelete:t}};G=await this.portal.request(G,t);for(const b of G.results)G=
H.find(m=>b.itemId===m.id),t=b.success,v=null,t?(G.id=null,G.portal=null):b.error&&(v=new x("portal:delete-item-failed",b.error.message,b.error)),J.push({item:G,success:t,error:v})}return J}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(H=>H&&H.folders?H.folders.map(t=>{t=w.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(H=>H&&H.groups?H.groups.map(t=>{t=r.fromJSON(t);t.portal=this.portal;return t}):
[])}async fetchItems(H){H??={};var t=this.userContentUrl??"";H.folder&&(t+="/"+H.folder.id);const {default:G}=await new Promise((J,v)=>e(["./PortalItem"],b=>J(Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}))),v));H=await this.portal.request(t,{query:{folders:!1,inRecycleBin:H.inRecycleBin?!0:null,foldersContent:!H.folder&&H.includeSubfolderItems?!0:null,num:H.num||10,start:H.start||1,sortField:H.sortField||"created",sortOrder:H.sortOrder||"asc"}});
return H?.items?(t=H.items.map(J=>{J=G.fromJSON(J);J.portal=this.portal;return J}),await Promise.all(t.map(J=>J.load())),{items:t,nextStart:H.nextStart,total:H.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(H=>H.tags)}getThumbnailUrl(H){let t=this.thumbnailUrl;t&&H&&(t+=`&w=${H}`);return t}queryFavorites(H){return this.favGroupId?(this._favGroup||(this._favGroup=new r({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(H)):Promise.reject(new x("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(H,t){await this.portal.request(this.userContentUrl+`/items/${H.id}/restore`,{method:"post",query:t?{folderID:"string"===typeof t?t:t.id}:null})}toJSON(){throw new x("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(H){if(!H)return null;if(H.declaredClass)throw Error("JSON object is already hydrated");const t=new F({sourceJSON:H});t.read(H);return t}};l.__decorate([u.property()],
C.prototype,"access",void 0);l.__decorate([u.property({type:Date})],C.prototype,"created",void 0);l.__decorate([u.property()],C.prototype,"culture",void 0);l.__decorate([u.property()],C.prototype,"description",void 0);l.__decorate([u.property()],C.prototype,"email",void 0);l.__decorate([u.property()],C.prototype,"favGroupId",void 0);l.__decorate([u.property()],C.prototype,"fullName",void 0);l.__decorate([u.property({type:Date})],C.prototype,"modified",void 0);l.__decorate([u.property()],C.prototype,
"orgId",void 0);l.__decorate([u.property()],C.prototype,"portal",void 0);l.__decorate([u.property()],C.prototype,"preferredView",void 0);l.__decorate([u.property()],C.prototype,"privileges",void 0);l.__decorate([u.property()],C.prototype,"region",void 0);l.__decorate([u.property()],C.prototype,"role",void 0);l.__decorate([u.property()],C.prototype,"roleId",void 0);l.__decorate([u.property()],C.prototype,"sourceJSON",void 0);l.__decorate([u.property()],C.prototype,"thumbnail",void 0);l.__decorate([u.property({readOnly:!0})],
C.prototype,"thumbnailUrl",null);l.__decorate([u.property()],C.prototype,"units",void 0);l.__decorate([u.property({readOnly:!0})],C.prototype,"userContentUrl",null);l.__decorate([u.property({readOnly:!0})],C.prototype,"url",null);l.__decorate([u.property()],C.prototype,"username",void 0);l.__decorate([u.property()],C.prototype,"userLicenseTypeId",void 0);l.__decorate([u.property()],C.prototype,"userType",void 0);return C=F=l.__decorate([h.subclass("esri.portal.PortalUser")],C)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,x,C,u,M,a,q){x=class extends x.JSONSupport{constructor(h){super(h);this.username=this.title=this.portal=this.id=this.created=null}get url(){const h=this.portal?.restUrl;return h?`${h}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};e.__decorate([C.property({type:Date})],x.prototype,"created",void 0);e.__decorate([C.property()],x.prototype,"id",void 0);e.__decorate([C.property()],x.prototype,
"portal",void 0);e.__decorate([C.property()],x.prototype,"title",void 0);e.__decorate([C.property({readOnly:!0})],x.prototype,"url",null);e.__decorate([C.property()],x.prototype,"username",void 0);return x=e.__decorate([q.subclass("esri.portal.PortalFolder")],x)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G,J,v){var b;const m=new Set("3DTiles Service;CSV;Feature Collection;Feature Service;Feed;GeoJson;Group Layer;Image Service;KML;Map Service;Media Layer;Scene Service;Stream Service;Vector Tile Service;WFS;WMS;WMTS".split(";")),I=new Set(["KML","GeoJson","CSV"]);u=b=class extends u.JSONSupportMixin(a){static from(f){return w.ensureClass(b,f)}constructor(f){super(f);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.classification=
this.categories=this.avgRating=this.applicationProxies=this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const f=this.type,L=this.typeKeywords||
[];let P=f;"Feature Service"===f||"Feature Collection"===f?P=L.includes("Table")?"Table":L.includes("Route Layer")?"Route Layer":L.includes("Markup")?"Markup":"Feature Layer":"Image Service"===f?P=L.includes("Elevation 3D Layer")?"Elevation Layer":L.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===f?P="Scene Layer":"Video Service"===f?P="Video Layer":"Scene Package"===f?P="Scene Layer Package":"Stream Service"===f?P="Feature Layer":"Geoprocessing Service"===f?P=L.includes("Web Tool")?
"Tool":"Geoprocessing Service":"Geoenrichment Service"===f?P="GeoEnrichment Service":"Geocoding Service"===f?P="Locator":"Microsoft Powerpoint"===f?P="Microsoft PowerPoint":"GeoJson"===f?P="GeoJSON":"Globe Service"===f?P="Globe Layer":"Vector Tile Service"===f?P="Tile Layer":"netCDF"===f?P="NetCDF":"Map Service"===f?P=L.includes("Spatiotemporal")||!L.includes("Hosted Service")&&!L.includes("Tiled")||L.includes("Relational")?"Map Image Layer":"Tile Layer":f?.toLowerCase().includes("add in")?P=f.replaceAll(/(add in)/gi,
"Add-In"):"datastore catalog service"===f?P="Big Data File Share":"Compact Tile Package"===f?P="Tile Package (tpkx)":"Raster function template"===f?P="Raster Function Template":"OGCFeatureServer"===f?P="OGC Feature Layer":"web mapping application"===f&&L.includes("configurableApp")?P="Instant App":"Insights Page"===f?P="Insights Report":"Excalibur Imagery Project"===f?P="Excalibur Project":"3DTiles Service"===f?P="3D tiles layer":"3DTiles Package"===f&&(P="3D tiles package");return P}readExtent(f){return f&&
f.length?new H(f[0][0],f[0][1],f[1][0],f[1][1]):null}get iconUrl(){var f=this.type?.toLowerCase()||"";const L=this.typeKeywords||[];var P=!1,S=!1;let ca=!1,U=!1,T=!1,y=!1;P=S=!1;0<f.indexOf("service")||"feature collection"===f||"kml"===f||"wms"===f||"wmts"===f||"wfs"===f?(P=L.includes("Hosted Service"),"feature service"===f||"feature collection"===f||"kml"===f||"wfs"===f?(S=L.includes("Table"),ca=L.includes("Route Layer"),U=L.includes("Markup"),T=L.includes("Spatiotemporal"),y=L.includes("UtilityNetwork"),
f=T&&S?"spatiotemporaltable":S?"table":ca?"routelayer":U?"markup":T?"spatiotemporal":y?"utilitynetwork":P?"featureshosted":"features"):"map service"===f||"wms"===f||"wmts"===f?(T=L.includes("Spatiotemporal"),S=L.includes("Relational"),f=T||S?"mapimages":P||L.includes("Tiled")||"wmts"===f?"maptiles":"mapimages"):f="scene service"===f?L.includes("Line")?"sceneweblayerline":L.includes("3DObject")?"sceneweblayermultipatch":L.includes("Point")?"sceneweblayerpoint":L.includes("IntegratedMesh")?"sceneweblayermesh":
L.includes("PointCloud")?"sceneweblayerpointcloud":L.includes("Polygon")?"sceneweblayerpolygon":L.includes("Building")?"sceneweblayerbuilding":L.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===f?L.includes("Elevation 3D Layer")?"elevationlayer":L.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===f?"streamlayer":"vector tile service"===f?"vectortile":"datastore catalog service"===f?"datastorecollection":"geocoding service"===f?"geocodeservice":"video service"===
f?L.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===f?L.includes("Web Tool")?"tool":"layers":"geodata service"===f?"geodataservice":"3dtiles service"===f?L.includes("3DObject")?"3dobjecttileslayer":L.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):f="web map"===f||"cityengine web scene"===f?"maps":"web scene"===f?L.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===f&&L.includes("configurableApp")?
"instantapps":"web mapping application"===f||"mobile application"===f||"application"===f||"operation view"===f||"desktop application"===f?"apps":"map document"===f||"map package"===f||"published map"===f||"scene document"===f||"globe document"===f||"basemap package"===f||"mobile basemap package"===f||"mobile map package"===f||"project package"===f||"project template"===f||"pro map"===f||"layout"===f||"layer"===f&&L.includes("ArcGIS Pro")||"explorer map"===f&&L.indexOf("Explorer Document")?"mapsgray":
"service definition"===f||"shapefile"===f||"cad drawing"===f||"geojson"===f||"netcdf"===f||"administrative report"===f?"datafiles":"360 vr experience"===f?"360vr":"explorer add in"===f||"desktop add in"===f||"windows viewer add in"===f||"windows viewer configuration"===f?"appsgray":"arcgis pro add in"===f||"arcgis pro configuration"===f?"addindesktop":"pdf"===f?"pdf":"microsoft word"===f?"word":"microsoft excel"===f?"excel":"microsoft powerpoint"===f?"ppt":"rule package"===f||"file geodatabase"===
f||"sqlite geodatabase"===f||"csv collection"===f||"kml collection"===f||"windows mobile package"===f||"map template"===f||"desktop application template"===f||"gml"===f||"arcpad package"===f||"code sample"===f||"document link"===f||"earth configuration"===f||"operations dashboard add in"===f||"rules package"===f||"workflow manager package"===f||"explorer map"===f&&L.includes("Explorer Mapping Application")||L.includes("Document")?"datafilesgray":"network analysis service"===f||"geoprocessing service"===
f||"geodata service"===f||"geometry service"===f||"geoprocessing package"===f||"locator package"===f||"geoprocessing sample"===f||"workflow manager service"===f?"toolsgray":"layer"===f||"layer package"===f||"explorer layer"===f?"layersgray":"analysis model"===f?"analysismodel":"scene package"===f?"scenepackage":"3dtiles package"===f?"3dtileslayerpackage":"3dtiles service"===f?"3dtileslayer":"mobile scene package"===f?"mobilescenepackage":"tile package"===f||"compact tile package"===f?"tilepackage":
"task file"===f?"taskfile":"report template"===f?"report-template":"statistical data collection"===f?"statisticaldatacollection":"insights workbook"===f?"workbook":"insights model"===f?"insightsmodel":"insights page"===f?"insightspage":"insights theme"===f?"insightstheme":"hub initiative"===f?"hubinitiative":"hub page"===f?"hubpage":"hub site application"===f?"hubsite":"hub event"===f?"hubevent":"hub project"===f?"hubproject":"relational database connection"===f?"relationaldatabaseconnection":"big data file share"===
f?"datastorecollection":"image collection"===f?"imagecollection":"desktop style"===f?"desktopstyle":"style"===f?L.includes("Dictionary")?"dictionarystyle":"style":"dashboard"===f?"dashboard":"raster function template"===f?"rasterprocessingtemplate":"vector tile package"===f?"vectortilepackage":"ortho mapping project"===f?"orthomappingproject":"ortho mapping template"===f?"orthomappingtemplate":"solution"===f?"solutions":"geopackage"===f?"geopackage":"deep learning package"===f?"deeplearningpackage":
"real time analytic"===f?"realtimeanalytics":"reality mapping project"===f?"realitymappingproject":"big data analytic"===f?"bigdataanalytics":"feed"===f?"feed":"excalibur imagery project"===f?"excaliburimageryproject":"notebook"===f?"notebook":"storymap"===f?"storymap":"survey123 add in"===f?"survey123addin":"mission"===f?"mission":"mission report"===f?"missionreport":"mission template"===f?"missiontemplate":"quickcapture project"===f?"quickcaptureproject":"pro report"===f?"proreport":"pro report template"===
f?"proreporttemplate":"urban model"===f?"urbanmodel":"urban project"===f?"urbanproject":"web experience"===f?"experiencebuilder":"web experience template"===f?"webexperiencetemplate":"experience builder widget"===f?"experiencebuilderwidget":"experience builder widget package"===f?"experiencebuilderwidgetpackage":"workflow"===f?"workflow":"kernel gateway connection"===f?"kernelgatewayconnection":"insights script"===f?"insightsscript":"hub initiative template"===f?"hubinitiativetemplate":"storymap theme"===
f?"storymaptheme":"knowledge graph"===f?"knowledgegraph":"knowledge graph layer"===f?"knowledgegraphlayer":"knowledge studio project"===f?"knowledgestudio":"native application"===f?"nativeapp":"native application installer"===f?"nativeappinstaller":"web link chart"===f?"linkchart":"knowledge graph web investigation"===f?"investigation":"ogcfeatureserver"===f?"features":"pro presentation"===f?"propresentation":"pro project"===f?"proproject":"insights workbook package"===f?"insightsworkbookpackage":
"apache parquet"===f?"apacheparquet":"notebook code snippet library"===f?"notebookcodesnippets":"suitability model"===f?"suitabilitymodel":"esri classifier definition"===f?"classifierdefinition":"esri classification schema"===f?"classificationschema":"insights data engineering workbook"===f?"dataengineeringworkbook":"insights data engineering model"===f?"dataengineeringmodel":"deep learning studio project"===f?"deeplearningproject":"discussion"===f?"discussion":"allsource project"===f?"allsourceproject":
"api key"===f?"apikey":"data pipeline"===f?"datapipelines":"group layer"===f?(P=L.includes("Map"))?"layergroup2d":"layergroup":"media layer"===f?"onlinemedialayer":"form"===f?L.includes("Survey123")?"survey":"datafilesgray":"csv"===f?"csv":"image"===f?"image":"maps";return f?x.getAssetUrl("esri/images/portal/"+f+"16.png"):null}get isLayer(){return null!=this.type&&m.has(this.type)}get itemCdnUrl(){return v.toCDNUrl(this.itemUrl)}get itemPageUrl(){const f=this.portal?.itemPageUrl;return f&&this.id?
`${f}?id=${this.id}`:null}get itemUrl(){const f=this.portal?.restUrl;return f&&this.id?`${f}/content/items/${this.id}`:null}get thumbnailUrl(){const f=this.itemUrl,L=this.thumbnail;return f&&L?this.portal?.normalizeUrl(`${f}/info/${L}?f=json`)??null:null}get userItemUrl(){const f=this.portal?.restUrl;if(!f)return null;const L=this.owner||this.portal?.user?.username;return L?`${f}/content/users/${this.ownerFolder?`${L}/${this.ownerFolder}`:L}/items/${this.id}`:null}load(f){const L=this.portal??(this.portal=
t.getDefault()),P=L.load(f).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?L.request(this.itemUrl,{signal:null!=f?f.signal:null,query:{token:this.apiKey}}):{}).then(S=>{this.sourceJSON=S;this.read(S)});this.addResolvingPromise(P);return Promise.resolve(this)}async addRating(f){const L={method:"post",query:{}};f instanceof J&&(f=f.rating);null==f||isNaN(f)||"number"!==typeof f||(L.query.rating=f);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",L);return new J({rating:f,
created:new Date})}clone(){var f={access:this.access,accessInformation:this.accessInformation,applicationProxies:M.clone(this.applicationProxies),avgRating:this.avgRating,categories:M.clone(this.categories),classification:M.clone(this.classification),created:M.clone(this.created),culture:this.culture,description:this.description,extent:M.clone(this.extent),groupCategories:M.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:M.clone(this.modified),
name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:M.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:M.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:M.clone(this.typeKeywords),url:this.url};this.loaded&&(f.loadStatus="loaded");f=(new b({sourceJSON:this.sourceJSON})).set(f);
f._set("isOrgItem",this.isOrgItem);return f}createPostQuery(){const f=this.toJSON();for(var L of["tags","typeKeywords","categories"])f[L]=f[L]?.join(", ");for(const P of["extent","classification"])(L=f[P])&&(f[P]=JSON.stringify(L));return f}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(f="json",L){return this.portal.request(this.itemUrl+"/data",{responseType:f,...L,query:{token:this.apiKey}})}async fetchRating(f){f=await this.portal.request(this.itemUrl+
"/rating",{query:{token:this.apiKey},...f});return null!=f.rating?(f.created=new Date(f.created),new J(f)):null}fetchRelatedItems(f,L){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...f,token:this.apiKey},...L},b)}getThumbnailUrl(f){let L=this.thumbnailUrl;L&&f&&(L+=`&w=${f}`);return L}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(f=>{this.applicationProxies&&!Object.hasOwn(f,"appProxies")&&(this.applicationProxies=
null);this.sourceJSON=f;this.read(f);return this})}update(f){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const L=f?.data,P={method:"post"};P.query=this.createPostQuery();for(const S in P.query)null===P.query[S]&&(P.query[S]="");P.query.clearEmptyFields=!0;null!=L&&("string"===typeof L?P.query.text=L:"object"===typeof L&&(P.query.text=JSON.stringify(L)));return this.portal.request(`${this.userItemUrl}/update`,P).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist",
"The item does not exist yet and cannot be updated"))}async copy(f){if(!this.id)throw new C("portal:item-does-not-exist","The item does not exist yet");await this.load();const {portal:L,itemUrl:P}=this;await L.signIn();const {copyResources:S,folder:ca,tags:U,title:T}=f||{};f={method:"post",query:{copyPrivateResources:"all"===S,folder:"string"===typeof ca?ca:ca?.id,includeResources:!!S,tags:U?.join(","),title:T}};({itemId:f}=await L.request(`${P}/copy`,f));return new b({id:f,portal:L})}updateThumbnail(f){return this.id?
this.load().then(()=>this.portal.signIn()).then(()=>{const L=f.thumbnail,P=f.filename,S={method:"post"};if("string"===typeof L)q.isDataProtocol(L)?S.query={data:L}:S.query={url:q.makeAbsolute(L)},null!=P&&(S.query.filename=P);else{const ca=new FormData;null!=P?ca.append("file",L,P):ca.append("file",L);S.body=ca}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,S).then(()=>this.reload())}):Promise.reject(new C("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(f=
{},L){const {fetchResources:P}=await new Promise((S,ca)=>e(["./support/resourceUtils"],S,ca));return P(this,f,L)}async addResource(f,L,P){const {addOrUpdateResources:S}=await new Promise((ca,U)=>e(["./support/resourceUtils"],ca,U));f.portalItem=this;await S(this,[{resource:f,content:L,compress:P?.compress,access:P?.access}],"add",P);return f}async removeResource(f,L){const {removeResource:P}=await new Promise((S,ca)=>e(["./support/resourceUtils"],S,ca));if(f.portalItem&&f.portalItem.itemUrl!==this.itemUrl)throw new C("removeresource:portal-item-mismatch",
"The portal item associated with the provided resource does not match the item");return P(this,f,L)}async removeAllResources(f){const {removeAllResources:L}=await new Promise((P,S)=>e(["./support/resourceUtils"],P,S));return L(this,f)}resourceFromPath(f){return new G({portalItem:this,path:f})}toJSON(){var f=this.extent;f={accessInformation:this.accessInformation,categories:M.clone(this.categories),classification:M.clone(this.classification),created:this.created?.getTime(),description:this.description,
extent:f&&[[f.xmin,f.ymin],[f.xmax,f.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:M.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:M.clone(this.typeKeywords),url:this.url};return M.fixJson(f)}static fromJSON(f){if(!f)return null;if(f.declaredClass)throw Error("JSON object is already hydrated");
return new b({sourceJSON:f})}_getPostQuery(){const f=this.toJSON();for(const L in f)"tags"===L&&null!==f[L]&&(f[L]=f[L].join(", ")),"typeKeywords"===L&&null!==f[L]&&(f[L]=f[L].join(", ")),"extent"===L&&f[L]&&(f[L]=JSON.stringify(f[L]));return f}};l.__decorate([h.property({type:["private","shared","org","public"]})],u.prototype,"access",void 0);l.__decorate([h.property()],u.prototype,"accessInformation",void 0);l.__decorate([h.property({type:String})],u.prototype,"apiKey",void 0);l.__decorate([h.property({json:{read:{source:"appProxies"}}})],
u.prototype,"applicationProxies",void 0);l.__decorate([h.property()],u.prototype,"avgRating",void 0);l.__decorate([h.property()],u.prototype,"categories",void 0);l.__decorate([h.property()],u.prototype,"classification",void 0);l.__decorate([h.property({type:Date})],u.prototype,"created",void 0);l.__decorate([h.property()],u.prototype,"culture",void 0);l.__decorate([h.property()],u.prototype,"description",void 0);l.__decorate([h.property({readOnly:!0})],u.prototype,"displayName",null);l.__decorate([h.property({type:H})],
u.prototype,"extent",void 0);l.__decorate([r.reader("extent")],u.prototype,"readExtent",null);l.__decorate([h.property()],u.prototype,"groupCategories",void 0);l.__decorate([h.property({readOnly:!0})],u.prototype,"iconUrl",null);l.__decorate([h.property()],u.prototype,"id",void 0);l.__decorate([h.property({readOnly:!0})],u.prototype,"isLayer",null);l.__decorate([h.property({type:Boolean,readOnly:!0})],u.prototype,"isOrgItem",void 0);l.__decorate([h.property()],u.prototype,"itemControl",void 0);l.__decorate([h.property({readOnly:!0})],
u.prototype,"itemPageUrl",null);l.__decorate([h.property({readOnly:!0})],u.prototype,"itemUrl",null);l.__decorate([h.property()],u.prototype,"licenseInfo",void 0);l.__decorate([h.property({type:Date})],u.prototype,"modified",void 0);l.__decorate([h.property()],u.prototype,"name",void 0);l.__decorate([h.property()],u.prototype,"numComments",void 0);l.__decorate([h.property()],u.prototype,"numRatings",void 0);l.__decorate([h.property()],u.prototype,"numViews",void 0);l.__decorate([h.property()],u.prototype,
"owner",void 0);l.__decorate([h.property()],u.prototype,"ownerFolder",void 0);l.__decorate([h.property({type:t})],u.prototype,"portal",void 0);l.__decorate([h.property()],u.prototype,"screenshots",void 0);l.__decorate([h.property()],u.prototype,"size",void 0);l.__decorate([h.property()],u.prototype,"snippet",void 0);l.__decorate([h.property()],u.prototype,"sourceJSON",void 0);l.__decorate([h.property({type:String})],u.prototype,"sourceUrl",void 0);l.__decorate([h.property({type:String})],u.prototype,
"spatialReference",void 0);l.__decorate([h.property()],u.prototype,"tags",void 0);l.__decorate([h.property()],u.prototype,"thumbnail",void 0);l.__decorate([h.property({readOnly:!0})],u.prototype,"thumbnailUrl",null);l.__decorate([h.property()],u.prototype,"title",void 0);l.__decorate([h.property()],u.prototype,"type",void 0);l.__decorate([h.property()],u.prototype,"typeKeywords",void 0);l.__decorate([h.property({type:String,json:{read(f,L){I.has(L.type)&&(L=this.portal?.restUrl,f||=L&&this.id?`${L}/content/items/${this.id}/data`:
null);return f}}})],u.prototype,"url",void 0);l.__decorate([h.property({readOnly:!0})],u.prototype,"userItemUrl",null);return u=b=l.__decorate([F.subclass("esri.portal.PortalItem")],u)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r){function F(H,t){if(null==H)return H;H=H.replace(/^\/+/,"");null!=t&&M.isAbsolute(H)&&(H=M.makeRelative(H,t.itemUrl));return H?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}x=class extends x{constructor(H){super(H);this.portalItem=null}normalizeCtorArgs(H){return H?.portalItem&&H.path?{...H,path:F(H.path,H.portalItem)}:H}set path(H){null!=H&&M.isAbsolute(H)?u.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):
this._set("path",H)}_castPath(H){return F(H,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(H="json",t){const G=this.cdnUrl;if(null==G)throw new C("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");
return this.portalItem.portal.request(G,{responseType:H,query:{token:this.portalItem.apiKey,_ts:t?.cacheBust?Date.now():null},signal:t?.signal})}async update(H,t){const {addOrUpdateResources:G}=await new Promise((J,v)=>e(["./support/resourceUtils"],J,v));await G(this.portalItem,[{resource:this,content:H,compress:t?.compress,access:t?.access}],"update",t);return this}hasPath(){return null!=this.path}};l.__decorate([a.property()],x.prototype,"portalItem",void 0);l.__decorate([a.property({type:String,
value:null})],x.prototype,"path",null);l.__decorate([q.cast("path")],x.prototype,"_castPath",null);l.__decorate([a.property({type:String,readOnly:!0})],x.prototype,"url",null);l.__decorate([a.property({type:String,readOnly:!0})],x.prototype,"cdnUrl",null);l.__decorate([a.property({type:String,readOnly:!0})],x.prototype,"itemRelativeUrl",null);return x=l.__decorate([r.subclass("esri.portal.PortalItemResource")],x)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,x,C,u,M,a){l=class extends l{constructor(q){super(q);this.rating=this.created=null}};e.__decorate([x.property()],l.prototype,"created",void 0);e.__decorate([x.property()],l.prototype,"rating",void 0);return l=e.__decorate([a.subclass("esri.portal.PortalRating")],l)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils","../portal/support/urlUtils"],function(e,l,x,C){function u(b,m){var I=m?.url?.path;b&&I&&(b=x.makeAbsolute(b,I,{preserveProtocolRelative:!0}),
m.portalItem&&m.readResourcePaths&&(I=x.makeRelative(b,m.portalItem.itemUrl),null!=I&&J.test(I)&&m.readResourcePaths.push(m.portalItem.resourceFromPath(I).path)));return(b=F(b,m?.portal))&&G.test(b)?H(b):b}function M(b,m,I=e.MarkKeep.YES){b=b&&G.test(b)?t(b):b;if(null==b)return b;!x.isAbsolute(b)&&m?.blockedRelativeUrls&&m.blockedRelativeUrls.push(b);let f=x.makeAbsolute(b);if(m){var L=m.verifyItemRelativeUrls?.rootPath||m.url?.path;if(L){L=F(L,m.portal);const P=F(f,m.portal);f=x.makeRelative(P,L,
L);null!=f&&f!==P&&f!==b&&m.verifyItemRelativeUrls&&m.verifyItemRelativeUrls.writtenUrls.push(f)}}f=r(f,m?.portal);x.isAbsolute(f)&&(f=x.normalize(f));m?.resources&&m?.portalItem&&!x.isAbsolute(f)&&!x.isDataProtocol(f)&&I===e.MarkKeep.YES&&m.resources.toKeep.push({resource:m.portalItem.resourceFromPath(f),compress:!1});return f}function a(b,m,I){return u(b,I)}function q(b,m,I,f){b=M(b,f);void 0!==b&&(m[I]=b)}function h(b){return(b?.match(G)??null)?.[1]??null}function w(b){b=b?.match(G)??null;if(null==
b)return null;b=b[2];const m=b.lastIndexOf("/");if(-1===m){const {path:L,extension:P}=x.splitPathExtension(b);return{prefix:null,filename:L,extension:P}}const {path:I,extension:f}=x.splitPathExtension(b.slice(m+1));return{prefix:b.slice(0,m),filename:I,extension:f}}function r(b,m){return m&&!m.isPortal&&m.urlKey&&m.customBaseUrl?x.changeDomain(b,`${m.urlKey}.${m.customBaseUrl}`,m.portalHostname):b}function F(b,m){if(!m||m.isPortal||!m.urlKey||!m.customBaseUrl)return b;const I=`${m.urlKey}.${m.customBaseUrl}`,
f=x.getAppUrl();return x.hasSameOrigin(f,`${f.scheme}://${I}`)?x.changeDomain(b,m.portalHostname,I):x.changeDomain(b,I,m.portalHostname)}function H(b){if(!b)return b||null;b&&l.id&&!l.id.findCredential(b)&&(b=C.normalizeArcGISOnlineOrgDomain(b),b=b.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),b=b.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),b=b.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return b}function t(b){if(!b)return b||
null;b=b.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");b=b.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(b=b.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&l.id&&!l.id.findCredential(b)&&(b=C.normalizeArcGISOnlineOrgDomain(b));return b}const G=/\/items\/([^/]+)\/resources\/(.*)/,J=/^\.\/resources\//;e.MarkKeep=void 0;(function(b){b[b.YES=0]="YES";b[b.NO=1]="NO"})(e.MarkKeep||(e.MarkKeep={}));const v=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return e.MarkKeep},ensureMainOnlineDomain:r,fromCDNUrl:t,fromJSON:u,itemIdFromResourceUrl:h,prefixAndFilenameFromResourceUrl:w,read:a,toCDNUrl:H,toJSON:M,write:q},Symbol.toStringTag,{value:"Module"}));e.ensureMainOnlineDomain=r;e.fromCDNUrl=t;e.fromJSON=u;e.itemIdFromResourceUrl=h;e.persistableUrlUtils=v;e.prefixAndFilenameFromResourceUrl=w;e.read=a;e.toCDNUrl=H;e.toJSON=M;e.write=q})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(e,
l,x){e.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",
layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},
{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",
title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return l.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};e.getBasemapTitle=async function(C){if(C){var u=C.includes("-vector")?C.slice(0,C.indexOf("-vector")):
C.includes("-3d")?C.slice(0,C.indexOf("-3d")):C,M=await x.fetchMessageBundle("esri/t9n/basemaps");return M[C]||M[u]}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(e,l,x,C,u,M,a,q){const h=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
l=class extends l{constructor(w){super(w);this.places=this.language=this.id=this.apiKey=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var w=q.getLocale().toLowerCase();switch(w){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}w=q.getLanguage(w);return"pt"===w?"pt-BR":w&&h.has(w)?
w:"global"}};e.__decorate([x.property()],l.prototype,"apiKey",void 0);e.__decorate([x.property()],l.prototype,"id",void 0);e.__decorate([x.property()],l.prototype,"language",void 0);e.__decorate([x.property()],l.prototype,"places",void 0);e.__decorate([x.property()],l.prototype,"serviceUrl",void 0);e.__decorate([x.property()],l.prototype,"worldview",void 0);return l=e.__decorate([a.subclass("esri.support.BasemapStyle")],l)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(e,l,x,C,u,M){function a(w,r){"maxScale"in w&&(r.maxScale=u.numberToJSON(w.maxScale)??void 0);"minScale"in w&&(r.minScale=u.numberToJSON(w.minScale)??void 0)}const q=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),h=new Set("catalog csv feature geo-rss geojson group imagery imagery-tile kml knowledge-graph map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
e.disableRestrictedWriting=function(w){q.add(w);h.add(w)};e.enableRestrictedWriting=function(w){q.delete(w);h.delete(w)};e.getLayerJSON=function(w,r,F){if(!w.persistenceEnabled)return null;if(!("write"in w&&w.write))return F?.messages&&F.messages.push(new l("layer:unsupported",`Layers (${w.title}, ${w.id}) of type '${w.declaredClass}' cannot be persisted`,{layer:w})),null;if(M.isFeatureCollectionLayer(w)&&!w.isTable)r=w.resourceInfo;else{if(F.restrictedWebMapWriting){var H="basemap"===F.layerContainerType?
q:"operational-layers"===F.layerContainerType?h:null;H=null!=H?H.has(w.type)&&!M.isFeatureCollectionLayer(w):!0}else H=!0;if(H)return r={},w.write(r,F)?r:null}if(null!=r){r=x.clone(r);if(F=r)M.isFeatureCollectionLayer(w)?(H=C.getDeepValue("featureCollection.layers",F)?.[0]?.layerDefinition)&&a(w,H):"group"!==w.type&&a(w,F);if(F&&(F.id=w.id,"blendMode"in w&&(F.blendMode=w.blendMode,"normal"===F.blendMode&&delete F.blendMode),F.opacity=u.numberToJSON(w.opacity)??void 0,F.title=w.title||"Layer",F.visibility=
w.visible,"legendEnabled"in w&&"wmts"!==w.type))if(M.isFeatureCollectionLayer(w)){if(F=F.featureCollection)F.showLegend=w.legendEnabled}else F.showLegend=w.legendEnabled}return r};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(e,l,x){function C(a){return"scene"===a?.type}function u(a){return null!=a&&"object"===typeof a&&"type"in a&&"subtype-group"===a.type&&"sublayers"in a}function M(a){a=
a?.type;return"imagery-tile"===a||"tile"===a||"open-street-map"===a||"vector-tile"===a||"web-tile"===a||"wmts"===a}e.getEffectiveEditingEnabled=function(a){a:if("editingEnabled"in a)switch(a.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var q=!0;break a;default:q=!1}else q=!1;return q?"effectiveEditingEnabled"in a?a.effectiveEditingEnabled:a.editingEnabled:!1};e.getEffectiveLayerCapabilities=function(a){a:if("capabilities"in
a)switch(a.type){case "catalog":case "catalog-footprint":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "sublayer":case "subtype-group":case "subtype-sublayer":case "wfs":var q=!0;break a;default:q=!1}else q=!1;return q?"effectiveCapabilities"in a?a.effectiveCapabilities:a.capabilities:null};e.getOwningPortalUrl=async function(a,q){var h=l.id?.findServerInfo(a);if(null!=h?.currentVersion)return h.owningSystemUrl||
null;h=a.toLowerCase().indexOf("/rest/services");if(-1===h)return null;a=`${a.slice(0,h)}/rest/info`;({data:q}=await x(a,{query:{f:"json"},responseType:"json",signal:null!=q?q.signal:null}));return q?.owningSystemUrl||null};e.getSubtypesFromLayer=function(a){return a?("subtypes"in a?a.subtypes:u(a.parent)?a.parent.subtypes:[])??[]:[]};e.getTileMaxtrixSetFromActiveLayer=function(a){if(a.activeLayer){const q=a.activeLayer.tileMatrixSet;if(q)return q;if(a=a.activeLayer.tileMatrixSets)return a}return null};
e.isBaseLayer=function(a){return null!=a?.parent&&"declaredClass"in a.parent&&"esri.Basemap"===a.parent.declaredClass&&a.parent.baseLayers.includes(a)};e.isBasemap3DSupportedLayer=function(a){return M(a)||C(a)};e.isBasemapSupportedTiledLayer=M;e.isFeatureCollectionLayer=function(a){return"feature"===a?.type&&!a.url&&"memory"===a.source?.type};e.isFeatureLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"feature"===a.type};e.isFeatureServiceLayer=function(a){return"feature"===a?.type&&
"feature-layer"===a.source?.type};e.isGraphicsLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"graphics"===a.type};e.isGroupLayer=function(a){return null!=a&&"type"in a&&"group"===a.type};e.isImageryTileLayer=function(a){return"imagery-tile"===a?.type};e.isIntegratedMeshLayer=function(a){return"integrated-mesh"===a||"integrated-mesh-3dtiles"===a};e.isIntegratedMeshOperationalLayer=function(a){return"IntegratedMeshLayer"===a||"IntegratedMesh3DTilesLayer"===a};e.isKnowledgeGraphLayer=
function(a){return null!=a&&"object"===typeof a&&"type"in a&&"knowledge-graph"===a.type&&"layers"in a};e.isLayerWithFeatureLayerSource=function(a){const q=a?.type;return("feature"===q||"subtype-group"===q||"oriented-imagery"===q)&&"feature-layer"===a.source?.type};e.isLinkChartLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"link-chart"===a.type&&"layers"in a};e.isMapNotesLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"map-notes"===a.type&&"sublayers"in a};e.isSceneLayer=
C;e.isSceneServiceLayer=function(a){a=a?.type;return"building-scene"===a||"integrated-mesh"===a||"point-cloud"===a||"scene"===a};e.isSubtypeGroupLayer=u;e.isSubtypeSublayer=function(a){return"subtype-sublayer"===a?.type};e.isTable=function(a){return null!=a&&"object"===typeof a&&"isTable"in a&&!!a.isTable};e.isTiledLayer=function(a){a=a?.type;return"base-tile"===a||"tile"===a||"elevation"===a||"imagery-tile"===a||"base-elevation"===a||"open-street-map"===a||"wcs"===a||"web-tile"===a||"wmts"===a||
"vector-tile"===a};e.isVoxelLayer=function(a){return"voxel"===a?.type};e.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};e.serializeLayerDefinitions=function(a){const q=/[:;]/,h=[];let w=!1;if(a&&(a.forEach((r,F)=>{h.push([F,r]);!w&&q.test(r)&&(w=!0)}),0<h.length)){if(w){const r={};h.forEach(F=>{r[F[0]]=F[1]});a=JSON.stringify(r)}else{const r=[];h.forEach(F=>{r.push(F[0]+":"+
F[1])});a=r.join(";")}return a}return null};e.serializeTimeOptions=function(a){if(a){var q=[];a.forEach((h,w)=>{q.push('"'+w+'":'+JSON.stringify(h))});if(q.length)return"{"+q.join(",")+"}"}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(e,l){e.canInterpolateEffects=function(x,C){const u=x.length>C.length?x:C;return(x.length>C.length?C:x).every((M,a)=>M.type===u[a].type)};e.effectEquals=function(x,C){x=
JSON.stringify(x??null);C=JSON.stringify(C??null);return x===C};e.isEffectFunctions=function(x){return(x=x[0])?"type"in x:!1};e.normalizeEffects=function(x,C){const u=x.length>C.length?x:C;x=x.length>C.length?C:x;for(C=x.length;C<u.length;C++)x.push(l.createEffectWithInitialValues(u[C]))};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports","../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32",
"./colorMatrixFunctions"],function(e,l,x,C,u){function M(t,G,J){return t+(G-t)*J}function a(t){return Math.round(1E3*x.px2pt(t))/1E3}class q{constructor(t,G,J){this.strength=t;this.radius=G;this.threshold=J;this.type="bloom"}interpolate(t,G,J){this.strength=M(t.strength,G.strength,J);this.radius=M(t.radius,G.radius,J);this.threshold=M(t.threshold,G.threshold,J)}clone(){return new q(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:a(this.radius),strength:this.strength,
threshold:this.threshold}}}class h{constructor(t){this.radius=t;this.type="blur"}interpolate(t,G,J){this.radius=Math.round(M(t.radius,G.radius,J))}clone(){return new h(this.radius)}toJSON(){return{type:"blur",radius:a(this.radius)}}}class w{constructor(t,G){this.type=t;this.amount=G;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,G,J){this.amount=
M(t.amount,G.amount,J);this._updateMatrix()}clone(){return new w(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||C.create();switch(this.type){case "brightness":this._colorMatrix=u.brightness(t,this.amount);break;case "contrast":this._colorMatrix=u.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=u.grayscale(t,this.amount);break;case "invert":this._colorMatrix=u.invert(t,this.amount);break;case "saturate":this._colorMatrix=
u.saturate(t,this.amount);break;case "sepia":this._colorMatrix=u.sepia(t,this.amount)}}}class r{constructor(t,G,J,v){this.offsetX=t;this.offsetY=G;this.blurRadius=J;this.color=v;this.type="drop-shadow"}interpolate(t,G,J){this.offsetX=M(t.offsetX,G.offsetX,J);this.offsetY=M(t.offsetY,G.offsetY,J);this.blurRadius=M(t.blurRadius,G.blurRadius,J);this.color[0]=Math.round(M(t.color[0],G.color[0],J));this.color[1]=Math.round(M(t.color[1],G.color[1],J));this.color[2]=Math.round(M(t.color[2],G.color[2],J));
this.color[3]=M(t.color[3],G.color[3],J)}clone(){return new r(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:a(this.offsetX),yoffset:a(this.offsetY),blurRadius:a(this.blurRadius),color:t}}}class F{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,G,J){this.angle=M(t.angle,G.angle,J);this._updateMatrix()}clone(){return new F(this.angle)}toJSON(){return{type:"hue-rotate",
angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||C.create();this._colorMatrix=u.rotateHue(t,this.angle)}}class H{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,G,J){this.amount=M(t.amount,G.amount,J)}clone(){return new H(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}e.BloomEffect=q;e.BlurEffect=h;e.ColorMatrixEffect=w;e.DropShadowEffect=r;e.HueRotateEffect=F;e.OpacityEffect=H;e.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new w(t.type,
0);case "saturate":case "brightness":case "contrast":return new w(t.type,1);case "opacity":return new H(1);case "hue-rotate":return new F(0);case "blur":return new h(0);case "drop-shadow":return new r(0,0,0,[...l.getNamedColor("transparent")]);case "bloom":return new q(0,0,1)}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(e){function l(){const q=new Float32Array(16);q[0]=1;q[5]=1;q[10]=1;q[15]=
1;return q}function x(q){const h=new Float32Array(16);h[0]=q[0];h[1]=q[1];h[2]=q[2];h[3]=q[3];h[4]=q[4];h[5]=q[5];h[6]=q[6];h[7]=q[7];h[8]=q[8];h[9]=q[9];h[10]=q[10];h[11]=q[11];h[12]=q[12];h[13]=q[13];h[14]=q[14];h[15]=q[15];return h}function C(q,h,w,r,F,H,t,G,J,v,b,m,I,f,L,P){const S=new Float32Array(16);S[0]=q;S[1]=h;S[2]=w;S[3]=r;S[4]=F;S[5]=H;S[6]=t;S[7]=G;S[8]=J;S[9]=v;S[10]=b;S[11]=m;S[12]=I;S[13]=f;S[14]=L;S[15]=P;return S}function u(q,h){return new Float32Array(q,h,16)}const M=l(),a=Object.freeze(Object.defineProperty({__proto__:null,
IDENTITY:M,clone:x,create:l,createView:u,fromValues:C},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=M;e.clone=x;e.create=l;e.createView=u;e.fromValues=C;e.mat4f32=a;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports","../../core/libs/gl-matrix-2/math/mat4"],function(e,l){e.brightness=(x,C)=>{x=l.set(x,C,0,0,0,0,C,0,0,0,0,C,0,0,0,0,1);return l.transpose(x,x)};e.contrast=(x,C)=>{x=l.set(x,C,0,0,.5-.5*C,0,C,0,.5-
.5*C,0,0,C,.5-.5*C,0,0,0,1);return l.transpose(x,x)};e.grayscale=(x,C)=>{C=1-C;x=l.set(x,.2126+.7874*C,.7152-.7152*C,.0722-.0722*C,0,.2126-.2126*C,.7152+.2848*C,.0722-.0722*C,0,.2126-.2126*C,.7152-.7152*C,.0722+.9278*C,0,0,0,0,1);return l.transpose(x,x)};e.invert=(x,C)=>{const u=1-2*C;x=l.set(x,u,0,0,C,0,u,0,C,0,0,u,C,0,0,0,1);return l.transpose(x,x)};e.rotateHue=(x,C)=>{const u=Math.sin(C*Math.PI/180);C=Math.cos(C*Math.PI/180);x=l.set(x,.213+.787*C-.213*u,.715-.715*C-.715*u,.072-.072*C+.928*u,0,
.213-.213*C+.143*u,.715+.285*C+.14*u,.072-.072*C-.283*u,0,.213-.213*C-.787*u,.715-.715*C+.715*u,.072+.928*C+.072*u,0,0,0,0,1);return l.transpose(x,x)};e.saturate=(x,C)=>{x=l.set(x,.213+.787*C,.715-.715*C,.072-.072*C,0,.213-.213*C,.715+.285*C,.072-.072*C,0,.213-.213*C,.715-.715*C,.072+.928*C,0,0,0,0,1);return l.transpose(x,x)};e.sepia=(x,C)=>{C=1-C;x=l.set(x,.393+.607*C,.769-.769*C,.189-.189*C,0,.349-.349*C,.686+.314*C,.168-.168*C,0,.272-.272*C,.534-.534*C,.131+.869*C,0,0,0,0,1);return l.transpose(x,
x)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(e,l,x){function C(n,E){n[0]=E[0];n[1]=E[1];n[2]=E[2];n[3]=E[3];n[4]=E[4];n[5]=E[5];n[6]=E[6];n[7]=E[7];n[8]=E[8];n[9]=E[9];n[10]=E[10];n[11]=E[11];n[12]=E[12];n[13]=E[13];n[14]=E[14];n[15]=E[15];return n}function u(n,E,W,aa,ja,B,K,N,V,Z,da,ea,la,na,ua,ra,sa){n[0]=E;n[1]=W;n[2]=aa;n[3]=ja;n[4]=B;n[5]=K;n[6]=N;n[7]=V;n[8]=
Z;n[9]=da;n[10]=ea;n[11]=la;n[12]=na;n[13]=ua;n[14]=ra;n[15]=sa;return n}function M(n){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function a(n,E){if(n===E){const W=E[1],aa=E[2],ja=E[3],B=E[6],K=E[7],N=E[11];n[1]=E[4];n[2]=E[8];n[3]=E[12];n[4]=W;n[6]=E[9];n[7]=E[13];n[8]=aa;n[9]=B;n[11]=E[14];n[12]=ja;n[13]=K;n[14]=N}else n[0]=E[0],n[1]=E[4],n[2]=E[8],n[3]=E[12],n[4]=E[1],n[5]=E[5],n[6]=E[9],n[7]=E[13],n[8]=E[2],n[9]=
E[6],n[10]=E[10],n[11]=E[14],n[12]=E[3],n[13]=E[7],n[14]=E[11],n[15]=E[15];return n}function q(n,E){h(n,E)||M(n);return n}function h(n,E){const W=E[0],aa=E[1],ja=E[2],B=E[3],K=E[4],N=E[5],V=E[6],Z=E[7],da=E[8],ea=E[9],la=E[10],na=E[11],ua=E[12],ra=E[13],sa=E[14];E=E[15];const Ca=W*N-aa*K,ya=W*V-ja*K,Ba=W*Z-B*K,Da=aa*V-ja*N,za=aa*Z-B*N,Fa=ja*Z-B*V,Ra=da*ra-ea*ua,bb=da*sa-la*ua,cb=da*E-na*ua,Xa=ea*sa-la*ra,Ma=ea*E-na*ra,Na=la*E-na*sa;let ia=Ca*Na-ya*Ma+Ba*Xa+Da*cb-za*bb+Fa*Ra;if(!ia)return null;ia=
1/ia;n[0]=(N*Na-V*Ma+Z*Xa)*ia;n[1]=(ja*Ma-aa*Na-B*Xa)*ia;n[2]=(ra*Fa-sa*za+E*Da)*ia;n[3]=(la*za-ea*Fa-na*Da)*ia;n[4]=(V*cb-K*Na-Z*bb)*ia;n[5]=(W*Na-ja*cb+B*bb)*ia;n[6]=(sa*Ba-ua*Fa-E*ya)*ia;n[7]=(da*Fa-la*Ba+na*ya)*ia;n[8]=(K*Ma-N*cb+Z*Ra)*ia;n[9]=(aa*cb-W*Ma-B*Ra)*ia;n[10]=(ua*za-ra*Ba+E*Ca)*ia;n[11]=(ea*Ba-da*za-na*Ca)*ia;n[12]=(N*bb-K*Xa-V*Ra)*ia;n[13]=(W*Xa-aa*bb+ja*Ra)*ia;n[14]=(ra*ya-ua*Da-sa*Ca)*ia;n[15]=(da*Da-ea*ya+la*Ca)*ia;return n}function w(n,E){const W=E[0],aa=E[1],ja=E[2],B=E[3],K=
E[4],N=E[5],V=E[6],Z=E[7],da=E[8],ea=E[9],la=E[10],na=E[11],ua=E[12],ra=E[13],sa=E[14];E=E[15];n[0]=N*(la*E-na*sa)-ea*(V*E-Z*sa)+ra*(V*na-Z*la);n[1]=-(aa*(la*E-na*sa)-ea*(ja*E-B*sa)+ra*(ja*na-B*la));n[2]=aa*(V*E-Z*sa)-N*(ja*E-B*sa)+ra*(ja*Z-B*V);n[3]=-(aa*(V*na-Z*la)-N*(ja*na-B*la)+ea*(ja*Z-B*V));n[4]=-(K*(la*E-na*sa)-da*(V*E-Z*sa)+ua*(V*na-Z*la));n[5]=W*(la*E-na*sa)-da*(ja*E-B*sa)+ua*(ja*na-B*la);n[6]=-(W*(V*E-Z*sa)-K*(ja*E-B*sa)+ua*(ja*Z-B*V));n[7]=W*(V*na-Z*la)-K*(ja*na-B*la)+da*(ja*Z-B*V);n[8]=
K*(ea*E-na*ra)-da*(N*E-Z*ra)+ua*(N*na-Z*ea);n[9]=-(W*(ea*E-na*ra)-da*(aa*E-B*ra)+ua*(aa*na-B*ea));n[10]=W*(N*E-Z*ra)-K*(aa*E-B*ra)+ua*(aa*Z-B*N);n[11]=-(W*(N*na-Z*ea)-K*(aa*na-B*ea)+da*(aa*Z-B*N));n[12]=-(K*(ea*sa-la*ra)-da*(N*sa-V*ra)+ua*(N*la-V*ea));n[13]=W*(ea*sa-la*ra)-da*(aa*sa-ja*ra)+ua*(aa*la-ja*ea);n[14]=-(W*(N*sa-V*ra)-K*(aa*sa-ja*ra)+ua*(aa*V-ja*N));n[15]=W*(N*la-V*ea)-K*(aa*la-ja*ea)+da*(aa*V-ja*N);return n}function r(n){const E=n[0],W=n[1],aa=n[2],ja=n[3],B=n[4],K=n[5],N=n[6],V=n[7],Z=
n[8],da=n[9],ea=n[10],la=n[11],na=n[12],ua=n[13],ra=n[14];n=n[15];return(E*K-W*B)*(ea*n-la*ra)-(E*N-aa*B)*(da*n-la*ua)+(E*V-ja*B)*(da*ra-ea*ua)+(W*N-aa*K)*(Z*n-la*na)-(W*V-ja*K)*(Z*ra-ea*na)+(aa*V-ja*N)*(Z*ua-da*na)}function F(n,E,W){const aa=E[0],ja=E[1],B=E[2],K=E[3],N=E[4],V=E[5],Z=E[6],da=E[7],ea=E[8],la=E[9],na=E[10],ua=E[11],ra=E[12],sa=E[13],Ca=E[14];E=E[15];let ya=W[0],Ba=W[1],Da=W[2],za=W[3];n[0]=ya*aa+Ba*N+Da*ea+za*ra;n[1]=ya*ja+Ba*V+Da*la+za*sa;n[2]=ya*B+Ba*Z+Da*na+za*Ca;n[3]=ya*K+Ba*da+
Da*ua+za*E;ya=W[4];Ba=W[5];Da=W[6];za=W[7];n[4]=ya*aa+Ba*N+Da*ea+za*ra;n[5]=ya*ja+Ba*V+Da*la+za*sa;n[6]=ya*B+Ba*Z+Da*na+za*Ca;n[7]=ya*K+Ba*da+Da*ua+za*E;ya=W[8];Ba=W[9];Da=W[10];za=W[11];n[8]=ya*aa+Ba*N+Da*ea+za*ra;n[9]=ya*ja+Ba*V+Da*la+za*sa;n[10]=ya*B+Ba*Z+Da*na+za*Ca;n[11]=ya*K+Ba*da+Da*ua+za*E;ya=W[12];Ba=W[13];Da=W[14];za=W[15];n[12]=ya*aa+Ba*N+Da*ea+za*ra;n[13]=ya*ja+Ba*V+Da*la+za*sa;n[14]=ya*B+Ba*Z+Da*na+za*Ca;n[15]=ya*K+Ba*da+Da*ua+za*E;return n}function H(n,E,W){const aa=W[0],ja=W[1];W=W[2];
if(E===n)n[12]=E[0]*aa+E[4]*ja+E[8]*W+E[12],n[13]=E[1]*aa+E[5]*ja+E[9]*W+E[13],n[14]=E[2]*aa+E[6]*ja+E[10]*W+E[14],n[15]=E[3]*aa+E[7]*ja+E[11]*W+E[15];else{const B=E[0],K=E[1],N=E[2],V=E[3],Z=E[4],da=E[5],ea=E[6],la=E[7],na=E[8],ua=E[9],ra=E[10],sa=E[11];n[0]=B;n[1]=K;n[2]=N;n[3]=V;n[4]=Z;n[5]=da;n[6]=ea;n[7]=la;n[8]=na;n[9]=ua;n[10]=ra;n[11]=sa;n[12]=B*aa+Z*ja+na*W+E[12];n[13]=K*aa+da*ja+ua*W+E[13];n[14]=N*aa+ea*ja+ra*W+E[14];n[15]=V*aa+la*ja+sa*W+E[15]}return n}function t(n,E,W){const aa=W[0],ja=
W[1];W=W[2];n[0]=E[0]*aa;n[1]=E[1]*aa;n[2]=E[2]*aa;n[3]=E[3]*aa;n[4]=E[4]*ja;n[5]=E[5]*ja;n[6]=E[6]*ja;n[7]=E[7]*ja;n[8]=E[8]*W;n[9]=E[9]*W;n[10]=E[10]*W;n[11]=E[11]*W;n[12]=E[12];n[13]=E[13];n[14]=E[14];n[15]=E[15];return n}function G(n,E,W,aa){var ja=aa[0],B=aa[1];aa=aa[2];var K=Math.sqrt(ja*ja+B*B+aa*aa);if(K<=x.getEpsilon())C(n,E);else{K=1/K;ja*=K;B*=K;aa*=K;var N=Math.sin(W),V=Math.cos(W),Z=1-V;W=E[0];K=E[1];var da=E[2],ea=E[3],la=E[4],na=E[5],ua=E[6],ra=E[7],sa=E[8],Ca=E[9],ya=E[10],Ba=E[11],
Da=ja*ja*Z+V,za=B*ja*Z+aa*N,Fa=aa*ja*Z-B*N,Ra=ja*B*Z-aa*N,bb=B*B*Z+V,cb=aa*B*Z+ja*N,Xa=ja*aa*Z+B*N;ja=B*aa*Z-ja*N;B=aa*aa*Z+V;n[0]=W*Da+la*za+sa*Fa;n[1]=K*Da+na*za+Ca*Fa;n[2]=da*Da+ua*za+ya*Fa;n[3]=ea*Da+ra*za+Ba*Fa;n[4]=W*Ra+la*bb+sa*cb;n[5]=K*Ra+na*bb+Ca*cb;n[6]=da*Ra+ua*bb+ya*cb;n[7]=ea*Ra+ra*bb+Ba*cb;n[8]=W*Xa+la*ja+sa*B;n[9]=K*Xa+na*ja+Ca*B;n[10]=da*Xa+ua*ja+ya*B;n[11]=ea*Xa+ra*ja+Ba*B;E!==n&&(n[12]=E[12],n[13]=E[13],n[14]=E[14],n[15]=E[15])}}function J(n,E,W){const aa=Math.sin(W);W=Math.cos(W);
const ja=E[4],B=E[5],K=E[6],N=E[7],V=E[8],Z=E[9],da=E[10],ea=E[11];E!==n&&(n[0]=E[0],n[1]=E[1],n[2]=E[2],n[3]=E[3],n[12]=E[12],n[13]=E[13],n[14]=E[14],n[15]=E[15]);n[4]=ja*W+V*aa;n[5]=B*W+Z*aa;n[6]=K*W+da*aa;n[7]=N*W+ea*aa;n[8]=V*W-ja*aa;n[9]=Z*W-B*aa;n[10]=da*W-K*aa;n[11]=ea*W-N*aa;return n}function v(n,E,W){const aa=Math.sin(W);W=Math.cos(W);const ja=E[0],B=E[1],K=E[2],N=E[3],V=E[8],Z=E[9],da=E[10],ea=E[11];E!==n&&(n[4]=E[4],n[5]=E[5],n[6]=E[6],n[7]=E[7],n[12]=E[12],n[13]=E[13],n[14]=E[14],n[15]=
E[15]);n[0]=ja*W-V*aa;n[1]=B*W-Z*aa;n[2]=K*W-da*aa;n[3]=N*W-ea*aa;n[8]=ja*aa+V*W;n[9]=B*aa+Z*W;n[10]=K*aa+da*W;n[11]=N*aa+ea*W;return n}function b(n,E,W){const aa=Math.sin(W);W=Math.cos(W);const ja=E[0],B=E[1],K=E[2],N=E[3],V=E[4],Z=E[5],da=E[6],ea=E[7];E!==n&&(n[8]=E[8],n[9]=E[9],n[10]=E[10],n[11]=E[11],n[12]=E[12],n[13]=E[13],n[14]=E[14],n[15]=E[15]);n[0]=ja*W+V*aa;n[1]=B*W+Z*aa;n[2]=K*W+da*aa;n[3]=N*W+ea*aa;n[4]=V*W-ja*aa;n[5]=Z*W-B*aa;n[6]=da*W-K*aa;n[7]=ea*W-N*aa;return n}function m(n,E){n[0]=
1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=E[0];n[13]=E[1];n[14]=E[2];n[15]=1;return n}function I(n,E){n[0]=E[0];n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=E[1];n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=E[2];n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function f(n,E,W){if(0===E)return M(n);let aa=W[0],ja=W[1];W=W[2];var B=Math.sqrt(aa*aa+ja*ja+W*W);if(B<=x.getEpsilon())return null;B=1/B;aa*=B;ja*=B;W*=B;B=Math.sin(E);E=Math.cos(E);const K=1-E;n[0]=aa*aa*K+E;n[1]=ja*
aa*K+W*B;n[2]=W*aa*K-ja*B;n[3]=0;n[4]=aa*ja*K-W*B;n[5]=ja*ja*K+E;n[6]=W*ja*K+aa*B;n[7]=0;n[8]=aa*W*K+ja*B;n[9]=ja*W*K-aa*B;n[10]=W*W*K+E;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function L(n,E){const W=Math.sin(E);E=Math.cos(E);n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=E;n[6]=W;n[7]=0;n[8]=0;n[9]=-W;n[10]=E;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function P(n,E){const W=Math.sin(E);E=Math.cos(E);n[0]=E;n[1]=0;n[2]=-W;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=W;n[9]=0;n[10]=E;n[11]=0;
n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function S(n,E){const W=Math.sin(E);E=Math.cos(E);n[0]=E;n[1]=W;n[2]=0;n[3]=0;n[4]=-W;n[5]=E;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function ca(n,E,W){var aa=E[0],ja=E[1],B=E[2],K=E[3],N=aa+aa,V=ja+ja;const Z=B+B;E=aa*N;const da=aa*V;aa*=Z;const ea=ja*V;ja*=Z;B*=Z;N*=K;V*=K;K*=Z;n[0]=1-(ea+B);n[1]=da+K;n[2]=aa-V;n[3]=0;n[4]=da-K;n[5]=1-(E+B);n[6]=ja+N;n[7]=0;n[8]=aa+V;n[9]=ja-N;n[10]=1-(E+ea);n[11]=0;n[12]=W[0];
n[13]=W[1];n[14]=W[2];n[15]=1;return n}function U(n,E){const W=La,aa=-E[0],ja=-E[1],B=-E[2],K=E[3],N=E[4],V=E[5],Z=E[6],da=E[7],ea=aa*aa+ja*ja+B*B+K*K;0<ea?(W[0]=2*(N*K+da*aa+V*B-Z*ja)/ea,W[1]=2*(V*K+da*ja+Z*aa-N*B)/ea,W[2]=2*(Z*K+da*B+N*ja-V*aa)/ea):(W[0]=2*(N*K+da*aa+V*B-Z*ja),W[1]=2*(V*K+da*ja+Z*aa-N*B),W[2]=2*(Z*K+da*B+N*ja-V*aa));ca(n,E,W);return n}function T(n,E){n[0]=E[12];n[1]=E[13];n[2]=E[14];return n}function y(n,E){const W=E[0],aa=E[1],ja=E[2],B=E[4],K=E[5],N=E[6],V=E[8],Z=E[9];E=E[10];
n[0]=Math.sqrt(W*W+aa*aa+ja*ja);n[1]=Math.sqrt(B*B+K*K+N*N);n[2]=Math.sqrt(V*V+Z*Z+E*E);return n}function Q(n,E){const W=E[0]+E[5]+E[10];let aa=0;0<W?(aa=2*Math.sqrt(W+1),n[3]=.25*aa,n[0]=(E[6]-E[9])/aa,n[1]=(E[8]-E[2])/aa,n[2]=(E[1]-E[4])/aa):E[0]>E[5]&&E[0]>E[10]?(aa=2*Math.sqrt(1+E[0]-E[5]-E[10]),n[3]=(E[6]-E[9])/aa,n[0]=.25*aa,n[1]=(E[1]+E[4])/aa,n[2]=(E[8]+E[2])/aa):E[5]>E[10]?(aa=2*Math.sqrt(1+E[5]-E[0]-E[10]),n[3]=(E[8]-E[2])/aa,n[0]=(E[1]+E[4])/aa,n[1]=.25*aa,n[2]=(E[6]+E[9])/aa):(aa=2*Math.sqrt(1+
E[10]-E[0]-E[5]),n[3]=(E[1]-E[4])/aa,n[0]=(E[8]+E[2])/aa,n[1]=(E[6]+E[9])/aa,n[2]=.25*aa);return n}function g(n,E,W,aa){var ja=E[0],B=E[1],K=E[2],N=E[3],V=ja+ja,Z=B+B,da=K+K;E=ja*V;const ea=ja*Z;ja*=da;const la=B*Z;B*=da;K*=da;V*=N;Z*=N;N*=da;da=aa[0];const na=aa[1];aa=aa[2];n[0]=(1-(la+K))*da;n[1]=(ea+N)*da;n[2]=(ja-Z)*da;n[3]=0;n[4]=(ea-N)*na;n[5]=(1-(E+K))*na;n[6]=(B+V)*na;n[7]=0;n[8]=(ja+Z)*aa;n[9]=(B-V)*aa;n[10]=(1-(E+la))*aa;n[11]=0;n[12]=W[0];n[13]=W[1];n[14]=W[2];n[15]=1;return n}function d(n,
E,W,aa,ja){var B=E[0],K=E[1],N=E[2],V=E[3],Z=B+B,da=K+K,ea=N+N;E=B*Z;var la=B*da,na=B*ea;B=K*da;K*=ea;var ua=N*ea;N=V*Z;da*=V;const ra=V*ea;var sa=aa[0],Ca=aa[1];ea=aa[2];aa=ja[0];V=ja[1];ja=ja[2];Z=(1-(B+ua))*sa;const ya=(la+ra)*sa;sa*=na-da;la=(la-ra)*Ca;ua=(1-(E+ua))*Ca;Ca*=K+N;na=(na+da)*ea;K=(K-N)*ea;E=(1-(E+B))*ea;n[0]=Z;n[1]=ya;n[2]=sa;n[3]=0;n[4]=la;n[5]=ua;n[6]=Ca;n[7]=0;n[8]=na;n[9]=K;n[10]=E;n[11]=0;n[12]=W[0]+aa-(Z*aa+la*V+na*ja);n[13]=W[1]+V-(ya*aa+ua*V+K*ja);n[14]=W[2]+ja-(sa*aa+Ca*
V+E*ja);n[15]=1;return n}function k(n,E){var W=E[0],aa=E[1],ja=E[2];E=E[3];var B=W+W,K=aa+aa;const N=ja+ja;W*=B;const V=aa*B;aa*=K;const Z=ja*B,da=ja*K;ja*=N;B*=E;K*=E;E*=N;n[0]=1-aa-ja;n[1]=V+E;n[2]=Z-K;n[3]=0;n[4]=V-E;n[5]=1-W-ja;n[6]=da+B;n[7]=0;n[8]=Z+K;n[9]=da-B;n[10]=1-W-aa;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function z(n,E,W,aa,ja,B,K){const N=1/(W-E),V=1/(ja-aa),Z=1/(B-K);n[0]=2*B*N;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=2*B*V;n[6]=0;n[7]=0;n[8]=(W+E)*N;n[9]=(ja+aa)*V;n[10]=(K+B)*Z;
n[11]=-1;n[12]=0;n[13]=0;n[14]=K*B*2*Z;n[15]=0;return n}function O(n,E,W,aa,ja){E=1/Math.tan(E/2);let B=void 0;n[0]=E/W;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=E;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[11]=-1;n[12]=0;n[13]=0;n[15]=0;null!=ja&&Infinity!==ja?(B=1/(aa-ja),n[10]=(ja+aa)*B,n[14]=2*ja*aa*B):(n[10]=-1,n[14]=-2*aa);return n}function X(n,E,W,aa){const ja=Math.tan(E.upDegrees*Math.PI/180),B=Math.tan(E.downDegrees*Math.PI/180),K=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const N=
2/(K+E),V=2/(ja+B);n[0]=N;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=V;n[6]=0;n[7]=0;n[8]=-((K-E)*N*.5);n[9]=(ja-B)*V*.5;n[10]=aa/(W-aa);n[11]=-1;n[12]=0;n[13]=0;n[14]=aa*W/(W-aa);n[15]=0;return n}function ba(n,E,W,aa,ja,B,K){const N=1/(E-W),V=1/(aa-ja),Z=1/(B-K);n[0]=-2*N;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=-2*V;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=2*Z;n[11]=0;n[12]=(E+W)*N;n[13]=(ja+aa)*V;n[14]=(K+B)*Z;n[15]=1;return n}function fa(n,E,W,aa){const ja=E[0],B=E[1];E=E[2];let K=ja-W[0],N=B-W[1];W=E-W[2];var V=x.getEpsilon();
if(Math.abs(K)<V&&Math.abs(N)<V&&Math.abs(W)<V)M(n);else{var Z=1/Math.sqrt(K*K+N*N+W*W);K*=Z;N*=Z;W*=Z;Z=aa[0];var da=aa[1];V=aa[2];aa=da*W-V*N;V=V*K-Z*W;da=Z*N-da*K;(Z=Math.sqrt(aa*aa+V*V+da*da))?(Z=1/Z,aa*=Z,V*=Z,da*=Z):da=V=aa=0;var ea=N*da-W*V,la=W*aa-K*da,na=K*V-N*aa;(Z=Math.sqrt(ea*ea+la*la+na*na))?(Z=1/Z,ea*=Z,la*=Z,na*=Z):na=la=ea=0;n[0]=aa;n[1]=ea;n[2]=K;n[3]=0;n[4]=V;n[5]=la;n[6]=N;n[7]=0;n[8]=da;n[9]=na;n[10]=W;n[11]=0;n[12]=-(aa*ja+V*B+da*E);n[13]=-(ea*ja+la*B+na*E);n[14]=-(K*ja+N*B+W*
E);n[15]=1}}function ma(n,E,W,aa){const ja=E[0],B=E[1];E=E[2];var K=aa[0];const N=aa[1];var V=aa[2];aa=ja-W[0];let Z=B-W[1];W=E-W[2];let da=aa*aa+Z*Z+W*W;0<da&&(da=1/Math.sqrt(da),aa*=da,Z*=da,W*=da);let ea=N*W-V*Z;V=V*aa-K*W;K=K*Z-N*aa;da=ea*ea+V*V+K*K;0<da&&(da=1/Math.sqrt(da),ea*=da,V*=da,K*=da);n[0]=ea;n[1]=V;n[2]=K;n[3]=0;n[4]=Z*K-W*V;n[5]=W*ea-aa*K;n[6]=aa*V-Z*ea;n[7]=0;n[8]=aa;n[9]=Z;n[10]=W;n[11]=0;n[12]=ja;n[13]=B;n[14]=E;n[15]=1;return n}function pa(n){return"mat4("+n[0]+", "+n[1]+", "+
n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function oa(n){return Math.sqrt(n[0]**2+n[1]**2+n[2]**2+n[3]**2+n[4]**2+n[5]**2+n[6]**2+n[7]**2+n[8]**2+n[9]**2+n[10]**2+n[11]**2+n[12]**2+n[13]**2+n[14]**2+n[15]**2)}function qa(n,E,W){n[0]=E[0]+W[0];n[1]=E[1]+W[1];n[2]=E[2]+W[2];n[3]=E[3]+W[3];n[4]=E[4]+W[4];n[5]=E[5]+W[5];n[6]=E[6]+W[6];n[7]=E[7]+W[7];n[8]=E[8]+W[8];n[9]=E[9]+W[9];n[10]=E[10]+W[10];n[11]=
E[11]+W[11];n[12]=E[12]+W[12];n[13]=E[13]+W[13];n[14]=E[14]+W[14];n[15]=E[15]+W[15];return n}function va(n,E,W){n[0]=E[0]-W[0];n[1]=E[1]-W[1];n[2]=E[2]-W[2];n[3]=E[3]-W[3];n[4]=E[4]-W[4];n[5]=E[5]-W[5];n[6]=E[6]-W[6];n[7]=E[7]-W[7];n[8]=E[8]-W[8];n[9]=E[9]-W[9];n[10]=E[10]-W[10];n[11]=E[11]-W[11];n[12]=E[12]-W[12];n[13]=E[13]-W[13];n[14]=E[14]-W[14];n[15]=E[15]-W[15];return n}function xa(n,E,W){n[0]=E[0]*W;n[1]=E[1]*W;n[2]=E[2]*W;n[3]=E[3]*W;n[4]=E[4]*W;n[5]=E[5]*W;n[6]=E[6]*W;n[7]=E[7]*W;n[8]=E[8]*
W;n[9]=E[9]*W;n[10]=E[10]*W;n[11]=E[11]*W;n[12]=E[12]*W;n[13]=E[13]*W;n[14]=E[14]*W;n[15]=E[15]*W;return n}function Aa(n,E,W,aa){n[0]=E[0]+W[0]*aa;n[1]=E[1]+W[1]*aa;n[2]=E[2]+W[2]*aa;n[3]=E[3]+W[3]*aa;n[4]=E[4]+W[4]*aa;n[5]=E[5]+W[5]*aa;n[6]=E[6]+W[6]*aa;n[7]=E[7]+W[7]*aa;n[8]=E[8]+W[8]*aa;n[9]=E[9]+W[9]*aa;n[10]=E[10]+W[10]*aa;n[11]=E[11]+W[11]*aa;n[12]=E[12]+W[12]*aa;n[13]=E[13]+W[13]*aa;n[14]=E[14]+W[14]*aa;n[15]=E[15]+W[15]*aa;return n}function Ea(n,E){return n[0]===E[0]&&n[1]===E[1]&&n[2]===
E[2]&&n[3]===E[3]&&n[4]===E[4]&&n[5]===E[5]&&n[6]===E[6]&&n[7]===E[7]&&n[8]===E[8]&&n[9]===E[9]&&n[10]===E[10]&&n[11]===E[11]&&n[12]===E[12]&&n[13]===E[13]&&n[14]===E[14]&&n[15]===E[15]}function Ja(n,E){if(n===E)return!0;const W=n[0],aa=n[1],ja=n[2],B=n[3],K=n[4],N=n[5],V=n[6],Z=n[7],da=n[8],ea=n[9],la=n[10],na=n[11],ua=n[12],ra=n[13],sa=n[14];n=n[15];const Ca=E[0],ya=E[1],Ba=E[2],Da=E[3],za=E[4],Fa=E[5],Ra=E[6],bb=E[7],cb=E[8],Xa=E[9],Ma=E[10],Na=E[11],ia=E[12],ic=E[13],Kb=E[14];E=E[15];const Ia=
x.getEpsilon();return Math.abs(W-Ca)<=Ia*Math.max(1,Math.abs(W),Math.abs(Ca))&&Math.abs(aa-ya)<=Ia*Math.max(1,Math.abs(aa),Math.abs(ya))&&Math.abs(ja-Ba)<=Ia*Math.max(1,Math.abs(ja),Math.abs(Ba))&&Math.abs(B-Da)<=Ia*Math.max(1,Math.abs(B),Math.abs(Da))&&Math.abs(K-za)<=Ia*Math.max(1,Math.abs(K),Math.abs(za))&&Math.abs(N-Fa)<=Ia*Math.max(1,Math.abs(N),Math.abs(Fa))&&Math.abs(V-Ra)<=Ia*Math.max(1,Math.abs(V),Math.abs(Ra))&&Math.abs(Z-bb)<=Ia*Math.max(1,Math.abs(Z),Math.abs(bb))&&Math.abs(da-cb)<=Ia*
Math.max(1,Math.abs(da),Math.abs(cb))&&Math.abs(ea-Xa)<=Ia*Math.max(1,Math.abs(ea),Math.abs(Xa))&&Math.abs(la-Ma)<=Ia*Math.max(1,Math.abs(la),Math.abs(Ma))&&Math.abs(na-Na)<=Ia*Math.max(1,Math.abs(na),Math.abs(Na))&&Math.abs(ua-ia)<=Ia*Math.max(1,Math.abs(ua),Math.abs(ia))&&Math.abs(ra-ic)<=Ia*Math.max(1,Math.abs(ra),Math.abs(ic))&&Math.abs(sa-Kb)<=Ia*Math.max(1,Math.abs(sa),Math.abs(Kb))&&Math.abs(n-E)<=Ia*Math.max(1,Math.abs(n),Math.abs(E))}function Sa(n){const E=x.getEpsilon(),W=n[0],aa=n[1],ja=
n[2],B=n[4],K=n[5],N=n[6],V=n[8],Z=n[9];n=n[10];return Math.abs(1-(W*W+B*B+V*V))<=E&&Math.abs(1-(aa*aa+K*K+Z*Z))<=E&&Math.abs(1-(ja*ja+N*N+n*n))<=E}function ab(n){return 1===n[0]&&0===n[1]&&0===n[2]&&0===n[4]&&1===n[5]&&0===n[6]&&0===n[8]&&0===n[9]&&1===n[10]}const La=l.create();l=Object.freeze(Object.defineProperty({__proto__:null,add:qa,adjoint:w,copy:C,determinant:r,equals:Ja,exactEquals:Ea,frob:oa,fromQuat:k,fromQuat2:U,fromRotation:f,fromRotationTranslation:ca,fromRotationTranslationScale:g,
fromRotationTranslationScaleOrigin:d,fromScaling:I,fromTranslation:m,fromXRotation:L,fromYRotation:P,fromZRotation:S,frustum:z,getRotation:Q,getScaling:y,getTranslation:T,hasIdentityRotation:ab,identity:M,invert:h,invertOrIdentity:q,isOrthoNormal:Sa,lookAt:fa,mul:F,multiply:F,multiplyScalar:xa,multiplyScalarAndAdd:Aa,ortho:ba,perspective:O,perspectiveFromFieldOfView:X,rotate:G,rotateX:J,rotateY:v,rotateZ:b,scale:t,set:u,str:pa,sub:va,subtract:va,targetTo:ma,translate:H,transpose:a},Symbol.toStringTag,
{value:"Module"}));e.add=qa;e.adjoint=w;e.copy=C;e.determinant=r;e.equals=Ja;e.exactEquals=Ea;e.frob=oa;e.fromQuat=k;e.fromQuat2=U;e.fromRotation=f;e.fromRotationTranslation=ca;e.fromRotationTranslationScale=g;e.fromRotationTranslationScaleOrigin=d;e.fromScaling=I;e.fromTranslation=m;e.fromXRotation=L;e.fromYRotation=P;e.fromZRotation=S;e.frustum=z;e.getRotation=Q;e.getScaling=y;e.getTranslation=T;e.hasIdentityRotation=ab;e.identity=M;e.invert=h;e.invertOrIdentity=q;e.isOrthoNormal=Sa;e.lookAt=fa;
e.mat4=l;e.mul=F;e.multiply=F;e.multiplyScalar=xa;e.multiplyScalarAndAdd=Aa;e.ortho=ba;e.perspective=O;e.perspectiveFromFieldOfView=X;e.rotate=G;e.rotateX=J;e.rotateY=v;e.rotateZ=b;e.scale=t;e.set=u;e.str=pa;e.sub=va;e.subtract=va;e.targetTo=ma;e.translate=H;e.transpose=a;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(e,l,x){function C(g){return null==
g||"string"===typeof g&&!g?"\x3cNull\x3e":g}function u(g){const d=null!=g.minValue||null!=g.maxValue,k=!!g.sqlExpression&&g.supportsSQLExpression;return!(null!=g.normalizationField||null!=g.normalizationType)&&!d&&!k}function M(g){const {values:d,useSampleStdDev:k,supportsNullCount:z,outStatisticTypes:O}=g;var X=Number.POSITIVE_INFINITY;let ba=Number.NEGATIVE_INFINITY,fa=null,ma=null;var pa=null;let oa=null,qa=0;const va=null==g.minValue?-Infinity:g.minValue,xa=null==g.maxValue?Infinity:g.maxValue;
for(const Aa of d)Number.isFinite(Aa)?Aa>=va&&Aa<=xa&&(fa=null===fa?Aa:fa+Aa,X=Math.min(X,Aa),ba=Math.max(ba,Aa),qa++):"string"===typeof Aa&&qa++;if(qa&&null!=fa){ma=fa/qa;pa=0;for(const Aa of d)Number.isFinite(Aa)&&Aa>=va&&Aa<=xa&&(pa+=(Aa-ma)**2);oa=k?1<qa?pa/(qa-1):0:0<qa?pa/qa:0;pa=Math.sqrt(oa)}else ba=X=null;X={avg:ma,count:qa,max:ba,min:X,stddev:pa,sum:fa,variance:oa};z&&(X.nullcount=d.length-qa);!g.percentileParams||O?.include?.length&&!O.include.includes("median")||O?.exclude?.length&&O.exclude.includes("median")||
(X.median=a(d,g.percentileParams));return X}function a(g,d){const {fieldType:k,value:z,orderBy:O,isDiscrete:X}=d,ba=q(k,"desc"===O);g=[...g].filter(oa=>null!=oa).sort((oa,qa)=>ba(oa,qa));if(0===g.length)return null;if(0>=z)return g[0];if(1<=z)return g[g.length-1];var fa=(g.length-1)*z,ma=Math.floor(fa);d=ma+1;fa%=1;ma=g[ma];const pa=g[d];return d>=g.length||X||"string"===typeof ma||"string"===typeof pa?ma:ma*(1-fa)+pa*fa}function q(g,d){if(g){if(m.has(g))return d?y:Q;if(I.has(g))return h(d,!1);if("esriFieldTypeTimestampOffset"===
g)return d?ca:S;const ba=h(d,!0);if("esriFieldTypeString"===g)return ba;if("esriFieldTypeGUID"===g||"esriFieldTypeGlobalID"===g)return(fa,ma)=>ba(w(fa),w(ma))}const k=d?1:-1,z=d?y:Q,O=h(d,!0),X=d?L:P;return(ba,fa)=>"number"===typeof ba&&"number"===typeof fa?z(ba,fa):"string"===typeof ba&&"string"===typeof fa?O(ba,fa):X(ba,fa)??k}function h(g,d){if(!d)return g?T:U;const k=g?L:P;return g?(z,O)=>{const X=k(z,O);if(null!=X)return X;z=z.toUpperCase();O=O.toUpperCase();return z>O?-1:z<O?1:0}:(z,O)=>{const X=
k(z,O);if(null!=X)return X;z=z.toUpperCase();O=O.toUpperCase();return z<O?-1:z>O?1:0}}function w(g){return g.slice(24,36)+g.slice(19,23)+g.slice(16,18)+g.slice(14,16)+g.slice(11,13)+g.slice(9,11)+g.slice(6,8)+g.slice(4,6)+g.slice(2,4)+g.slice(0,2)}function r(g){return"coded-value"!==g?.type?[]:g.codedValues.map(d=>d.code)}function F(g,d){const k=t({field:d.field,normalizationType:d.normalizationType,normalizationField:d.normalizationField,classificationMethod:d.classificationMethod,standardDeviationInterval:d.standardDeviationInterval,
breakCount:d.numClasses||5});g=H(g,d.minValue,d.maxValue);return x.createGenerateRendererClassBreaks({definition:k,values:g,normalizationTotal:d.normalizationTotal})}function H(g,d,k){const z=null==d?-Infinity:d,O=null==k?Infinity:k;return g.filter(X=>Number.isFinite(X)&&X>=z&&X<=O)}function t(g){const {breakCount:d,field:k,normalizationField:z,normalizationType:O}=g,X=g.classificationMethod||"equal-interval";return new l({breakCount:d,classificationField:k,classificationMethod:X,normalizationField:"field"===
O?z:void 0,normalizationType:O,standardDeviationInterval:"standard-deviation"===X?g.standardDeviationInterval||1:void 0,definedInterval:"defined-interval"===X?g.definedInterval:void 0})}function G(g,d){const {field:k,classificationMethod:z,standardDeviationInterval:O,normalizationType:X,normalizationField:ba,normalizationTotal:fa,minValue:ma,maxValue:pa}=d,oa=d.numBins||10;let qa=d=null,va=null;z&&"equal-interval"!==z||X?({classBreaks:g}=F(g,{field:k,normalizationType:X,normalizationField:ba,normalizationTotal:fa,
classificationMethod:z,standardDeviationInterval:O,minValue:ma,maxValue:pa,numClasses:oa}),d=g[0].minValue,qa=g[g.length-1].maxValue,va=g.map(xa=>[xa.minValue,xa.maxValue])):(null!=ma&&null!=pa?(d=ma,qa=pa):(g=M({values:g,minValue:ma,maxValue:pa,useSampleStdDev:!X,supportsNullCount:u({normalizationType:X,normalizationField:ba,minValue:ma,maxValue:pa})}),d=g.min??null,qa=g.max??null),va=v(d??0,qa??0,oa));return{min:d,max:qa,intervals:va}}function J(g,d){let k=-1;for(let z=g.length-1;0<=z;z--)if(d>=
g[z][0]){k=z;break}return k}function v(g,d,k){const z=(d-g)/k,O=[];let X;for(let ba=1;ba<=k;ba++)X=g+z,X=Number(X.toFixed(16)),O.push([g,ba===k?d:X]),g=X;return O}const b=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,m=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),I=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),f="min max avg stddev count sum variance nullcount median".split(" "),
L=(g,d)=>null==g?null==d?0:1:null==d?-1:null,P=(g,d)=>null==g?null==d?0:-1:null==d?1:null,S=(g,d)=>P(g,d)??(g===d?0:(new Date(g)).getTime()-(new Date(d)).getTime()),ca=(g,d)=>L(g,d)??(g===d?0:(new Date(d)).getTime()-(new Date(g)).getTime()),U=(g,d)=>P(g,d)??(g===d?0:g<d?-1:1),T=(g,d)=>L(g,d)??(g===d?0:g<d?1:-1),y=(g,d)=>L(g,d)??d-g,Q=(g,d)=>P(g,d)??g-d;e.calculateClassBreaks=F;e.calculateHistogram=function(g,d){var k=G(g,d);if(null==k.min&&null==k.max)return{bins:[],minValue:k.min,maxValue:k.max,
normalizationTotal:d.normalizationTotal};const z=k.intervals,O=k.min??0;k=k.max??0;const X=z.map((ba,fa)=>({minValue:z[fa][0],maxValue:z[fa][1],count:0}));for(const ba of g)null!=ba&&ba>=O&&ba<=k&&(g=J(z,ba),-1<g&&X[g].count++);return{bins:X,minValue:O,maxValue:k,normalizationTotal:d.normalizationTotal}};e.calculatePercentile=a;e.calculateStatistics=M;e.calculateStringStatistics=function(g){const {outStatisticTypes:d}=g,k=g.returnDistinct?[...(new Set(g.values))]:g.values;var z=k.filter(X=>null!=
X).sort();const O=z.length;z={count:O,min:z[0],max:z[O-1]};g.supportsNullCount&&(z.nullcount=k.length-O);!g.percentileParams||d?.include?.length&&!d.include.includes("median")||d?.exclude?.length&&d.exclude.includes("median")||(z.median=a(k,g.percentileParams));return z};e.calculateUniqueValuesCount=function(g){const d={};for(let k of g){if(null==k||"string"===typeof k&&""===k.trim())k=null;null==d[k]?d[k]={count:1,data:k}:d[k].count++}return{count:d}};e.createClassBreaksDefinition=t;e.createUVResult=
function(g,d,k,z){g=g.count;const O=[];if(k&&d){k=[];var X=r(d[0]);for(const ba of X)if(d[1]){X=r(d[1]);for(const fa of X)if(d[2]){X=r(d[2]);for(const ma of X)k.push(`${C(ba)}${z}${C(fa)}${z}${C(ma)}`)}else k.push(`${C(ba)}${z}${C(fa)}`)}else k.push(ba);for(const ba of k)g.hasOwnProperty(ba)||(g[ba]={data:ba,count:0})}for(const ba in g)d=g[ba],O.push({value:d.data,count:d.count,label:d.label});return{uniqueValueInfos:O}};e.getAttributeComparator=q;e.getEqualIntervalBins=v;e.getNormalizedValue=function(g,
d,k,z){let O=null;switch(d){case "log":0!==g&&(O=Math.log(g)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(z)&&0!==z&&(O=g/z*100);break;case "field":Number.isFinite(k)&&0!==k&&(O=g/k);break;case "natural-log":0<g&&(O=Math.log(g));break;case "square-root":0<g&&(O=g**.5)}return O};e.isNullCountSupported=u;e.processNullValue=C;e.processSummaryStatisticsResult=function(g,d,k){let z;for(z in g)d?.include?.length&&!d.include.includes(z)||d?.exclude?.length&&d.exclude.includes(z)?delete g[z]:
f.includes(z)&&(Number.isFinite(g[z])||(g[z]=null));if(!k)return g;["avg","stddev","variance"].forEach(O=>{null!=g[O]&&(g[O]=Math.ceil(g[O]??0))});return g};e.resolveCBResult=function(g,d){let k=g.classBreaks;const z=k[0]?.minValue,O=k[k.length-1]?.maxValue,X="standard-deviation"===d;k=k.map(ba=>{const fa=ba.label;ba={minValue:ba.minValue,maxValue:ba.maxValue,label:fa};if(X&&fa){const ma=fa.match(b)?.map(pa=>+pa.trim())??[];2===ma.length?(ba.minStdDev=ma[0],ba.maxStdDev=ma[1],0>ma[0]&&0<ma[1]&&(ba.hasAvg=
!0)):1===ma.length&&(fa.includes("\x3c")?(ba.minStdDev=null,ba.maxStdDev=ma[0]):fa.includes("\x3e")&&(ba.minStdDev=ma[0],ba.maxStdDev=null))}return ba});return{minValue:z,maxValue:O,classBreakInfos:k,normalizationTotal:g.normalizationTotal}};e.statisticTypes=f;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,l,x,C,u,M,a,q,h){u=new l.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});l=new l.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});x=class extends x.JSONSupport{constructor(w){super(w);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(w){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",w)}set definedInterval(w){"defined-interval"===this.classificationMethod&&this._set("definedInterval",w)}};e.__decorate([q.enumeration({classBreaksDef:"class-breaks-definition"})],x.prototype,"type",void 0);e.__decorate([C.property({json:{write:!0}})],x.prototype,
"breakCount",void 0);e.__decorate([C.property({json:{write:!0}})],x.prototype,"classificationField",void 0);e.__decorate([C.property({type:String,json:{read:u.read,write:u.write}})],x.prototype,"classificationMethod",void 0);e.__decorate([C.property({json:{write:!0}})],x.prototype,"normalizationField",void 0);e.__decorate([C.property({json:{read:l.read,write:l.write}})],x.prototype,"normalizationType",void 0);e.__decorate([C.property({value:null,json:{write:!0}})],x.prototype,"standardDeviationInterval",
null);e.__decorate([C.property({value:null,json:{write:!0}})],x.prototype,"definedInterval",null);return x=e.__decorate([h.subclass("esri.rest.support.ClassBreaksDefinition")],x)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(e,l,x){e.enumeration=function(C,u={}){C=C instanceof l.JSONMap?C:new l.JSONMap(C,u);const {alwaysWriteDefaults:M,default:a,ignoreUnknown:q=!0,name:h,nonNullable:w,readOnly:r=!1}=u;return x.property({type:q?
C.apiValues:String,json:{type:C.jsonValues,default:a,name:h,read:r?!1:{reader:C.read},write:{writer:C.write,alwaysWriteDefaults:M}},nonNullable:w,readOnly:r})};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(e,l){function x(F){var H=F.definition;const {classificationMethod:t,normalizationType:G,definedInterval:J}=H;H=H.breakCount??1;const v=[];var b=F.values;if(0===b.length)return[];
b=b.sort((S,ca)=>S-ca);var m=b[0],I=b[b.length-1];if("equal-interval"===t)if(b.length>=H){b=(I-m)/H;F=m;for(var f=1;f<H;f++){var L=Number((m+f*b).toFixed(6));v.push({minValue:F,maxValue:L,label:C(F,L,G)});F=L}v.push({minValue:F,maxValue:I,label:C(F,I,G)})}else b.forEach(S=>{v.push({minValue:S,maxValue:S,label:C(S,S,G)})});else if("natural-breaks"===t){b=u(b);F=M(b.uniqueValues,F.valueFrequency||b.valueFrequency,H);for(f=1;f<H;f++)b.uniqueValues.length>f&&(L=Number(b.uniqueValues[F[f]].toFixed(6)),
v.push({minValue:m,maxValue:L,label:C(m,L,G)}),m=L);v.push({minValue:m,maxValue:I,label:C(m,I,G)})}else if("quantile"===t)if(b.length>=H&&m!==I){F=Math.ceil(b.length/H);f=0;for(L=1;L<H;L++){var P=F+f-1;P>b.length&&(P=b.length-1);0>P&&(P=0);v.push({minValue:m,maxValue:b[P],label:C(m,b[P],G)});m=b[P];f+=F;F=Math.ceil((b.length-f)/(H-L))}v.push({minValue:m,maxValue:I,label:C(m,I,G)})}else for(H=-1,I=0;I<b.length;I++)m=b[I],m!==H&&(H=m,v.push({minValue:H,maxValue:m,label:C(H,m,G)}),H=m);else if("standard-deviation"===
t)if(F=h(b),f=w(b,F),0===f)v.push({minValue:b[0],maxValue:b[0],label:C(b[0],b[0],G)});else{b=q(m,I,H,F,f)*f;f=0;for(L=H;1<=L;L--)P=Number((F-(L-.5)*b).toFixed(6)),v.push({minValue:m,maxValue:P,label:C(m,P,G)}),m=P,f++;L=Number((F+.5*b).toFixed(6));v.push({minValue:m,maxValue:L,label:C(m,L,G)});m=L;f++;for(P=1;P<=H;P++)L=f===2*H?I:Number((F+(P+.5)*b).toFixed(6)),v.push({minValue:m,maxValue:L,label:C(m,L,G)}),m=L,f++}else if("defined-interval"===t){if(!J)return v;H=b[0];I=b[b.length-1];b=Math.ceil((I-
H)/J);m=H;for(F=1;F<b;F++)f=Number((H+F*J).toFixed(6)),v.push({minValue:m,maxValue:f,label:C(m,f,G)}),m=f;v.push({minValue:m,maxValue:I,label:C(m,I,G)})}return v}function C(F,H,t){let G=null;return G=F===H?t&&"percent-of-total"===t?F+"%":F.toString():t&&"percent-of-total"===t?F+"% - "+H+"%":F+" - "+H}function u(F){const H=[],t=[];let G=Number.MIN_VALUE,J=1,v=-1;for(let b=0;b<F.length;b++){const m=F[b];m===G?(J++,t[v]=J):null!==m&&(H.push(m),G=m,J=1,t.push(J),v++)}return{uniqueValues:H,valueFrequency:t}}
function M(F,H,t){var G=F.length;const J=[];t>G&&(t=G);for(var v=0;v<t;v++)J.push(Math.round(v*G/t-1));J.push(G-1);v=a(J,F,H,t);G=v.mean;v=v.sdcm;var b=t,m=0,I=0;let f=0,L=0,P=!0;for(let ca=0;2>ca&&P;ca++){0===ca&&(P=!1);for(var S=0;S<b-1;S++)for(;J[S+1]+1!==J[S+2];)if(J[S+1]+=1,m=r(S,J,F,H),f=m.sbMean,m=m.sbSdcm,I=r(S+1,J,F,H),L=I.sbMean,I=I.sbSdcm,m+I<v[S]+v[S+1])v[S]=m,v[S+1]=I,G[S]=f,G[S+1]=L,P=!0;else{--J[S+1];break}for(S=b-1;0<S;S--)for(;J[S]!==J[S-1]+1;)if(--J[S],m=r(S-1,J,F,H),f=m.sbMean,
m=m.sbSdcm,I=r(S,J,F,H),L=I.sbMean,I=I.sbSdcm,m+I<v[S-1]+v[S])v[S-1]=m,v[S]=I,G[S-1]=f,G[S]=L,P=!0;else{J[S]+=1;break}}P&&(v=a(J,F,H,t));return J}function a(F,H,t,G){let J=[];var v=[],b=[];let m=0;const I=[],f=[];for(var L=0;L<G;L++){var P=r(L,F,H,t);I.push(P.sbMean);f.push(P.sbSdcm);m+=f[L]}P=m;for(L=!0;L||m<P;){L=!1;J=[];for(v=0;v<G;v++)J.push(F[v]);for(b=0;b<G;b++)for(P=F[b]+1;P<=F[b+1];P++)if(v=H[P],0<b&&P!==F[b+1]&&Math.abs(v-I[b])>Math.abs(v-I[b-1]))F[b]=P;else if(b<G-1&&F[b]!==P-1&&Math.abs(v-
I[b])>Math.abs(v-I[b+1])){F[b+1]=P-1;break}P=m;m=0;v=[];b=[];for(let S=0;S<G;S++){v.push(I[S]);b.push(f[S]);const ca=r(S,F,H,t);I[S]=ca.sbMean;f[S]=ca.sbSdcm;m+=f[S]}}if(m>P){for(H=0;H<G;H++)F[H]=J[H],I[H]=v[H],f[H]=b[H];m=P}return{mean:I,sdcm:f}}function q(F,H,t,G,J){F=Math.max(G-F,H-G)/J/t;return 1<=F?1:.5<=F?.5:.25}function h(F){let H=0;for(let t=0;t<F.length;t++)H+=F[t];return H/=F.length}function w(F,H){let t=0;for(let G=0;G<F.length;G++){const J=F[G];t+=(J-H)*(J-H)}t/=F.length;return Math.sqrt(t)}
function r(F,H,t,G){var J=0,v=0;for(var b=H[F]+1;b<=H[F+1];b++){const m=G[b];J+=t[b]*m;v+=m}0>=v&&l.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");J/=v;v=0;for(b=H[F]+1;b<=H[F+1];b++)v+=G[b]*(t[b]-J)**2;return{sbMean:J,sbSdcm:v}}e.createGenerateRendererClassBreaks=function(F){const {normalizationTotal:H}=F;return{classBreaks:x(F),normalizationTotal:H}};e.createGenerateRendererUniqueValues=function(F){F=u(F);const H=[],t=F.uniqueValues.length;for(let G=
0;G<t;G++){const J=F.uniqueValues[G];H.push({value:J,count:F.valueFrequency[G],label:J.toString()})}return{uniqueValues:H}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(e){e.makeEdgeCandidate=function(l,x,C,u,M,a=!1){return{objectId:l,target:x,distance:C,type:"edge",start:u,end:M,draped:a}};e.makeVertexCandidate=function(l,x,C){return{objectId:l,target:x,distance:C,type:"vertex"}};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(e,l,x,C,u,M,a,q,h,w){async function r(v,b,m){if(!v)return null;var {where:I}=v;v.where=I=I?.trim();if(!I||/^1 *= *1$/.test(I)||
b&&b===I)v.where=null;if(!v.geometry)return v;b=await H(v);v.distance=0;v.units=null;"esriSpatialRelEnvelopeIntersects"===v.spatialRel&&({spatialReference:I}=v.geometry,b=M.getGeometryExtent(b),b.spatialReference=I);if(b){await w.checkProjectionSupport(b.spatialReference,m);I=b.spatialReference;b=F(b,m)&&a.isExtent(b)?{spatialReference:I,rings:[[[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]]]}:b;I=(await q.normalizeCentralMeridian(a.fromJSON(b)))[0];if(null==I)throw J;
const f="quantizationParameters"in v&&v.quantizationParameters?.tolerance||"maxAllowableOffset"in v&&v.maxAllowableOffset||0;b=f&&F(b,m)?{densificationStep:8*f}:void 0;I=I.toJSON();b=w.project(I,I.spatialReference,m,b);if(!b)throw J;b.spatialReference=m;v.geometry=b}return v}function F(v,b){if(!v)return!1;const m=v.spatialReference;return(a.isExtent(v)||a.isPolygon(v)||a.isPolyline(v))&&!h.equals(m,b)&&!u.canProjectWithoutEngine(m,b)}async function H(v){const {distance:b,units:m}=v,I=v.geometry;if(null==
b||"vertexAttributes"in I)return I;var f=I.spatialReference;v=m?G.fromJSON(m):C.getUnitString(f);f=f&&(h.isGeographic(f)||h.isWebMercator(f))?I:await w.checkProjectionSupport(f,h.wgs84).then(()=>w.project(I,h.wgs84));return(await t())(f.spatialReference,f,b,v)}async function t(){return(await new Promise((v,b)=>e(["../../../geometry/geometryEngineJSON"],v,b))).geodesicBuffer}const G=new x.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J=Object.freeze({});l.normalizeQuery=async function(v,b,m){const {outFields:I,orderByFields:f,groupByFieldsForStatistics:L,outStatistics:P}=v;if(I)for(var S=0;S<I.length;S++)I[S]=I[S].trim();if(f)for(S=0;S<f.length;S++)f[S]=f[S].trim();if(L)for(S=0;S<L.length;S++)L[S]=L[S].trim();if(P)for(S=0;S<P.length;S++)P[S].onStatisticField&&(P[S].onStatisticField=P[S].onStatisticField.trim());v.geometry&&!v.outSR&&(v.outSR=
v.geometry.spatialReference);return r(v,b,m)};l.normalizeQueryLike=r;l.queryEngineEmptyResult=J;l.unitsKebabDict=G;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(e,l,x,C,u,M){function a(F,H,t){const {outFields:G,orderByFields:J,returnDistinctValues:v,outStatistics:b}=t,m=b?
b.map(I=>I.outStatisticFieldName&&I.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(J&&0<J.length){const I=J.map(f=>{const L=f.toLowerCase();return L.includes(" asc")?L.split(" asc")[0]:L.includes(" desc")?L.split(" desc")[0]:f}).filter(f=>!m.includes(f));x.validateFields(F,H,I,{expressionName:"orderByFields",query:t})}if(G&&0<G.length)x.validateFields(F,H,G,{expressionName:"outFields",query:t,allowedFieldTypes:"all"});else if(v)throw new l("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});x.validateWhere(F,H,t.where,t)}function q(F,H,t){const {outStatistics:G,groupByFieldsForStatistics:J,having:v}=t;var b=J?.length,m=G?.length;if(v){if(!b||!m)throw new l("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});x.validateHaving(F,H,v,G,t)}if(m&&w(G)){m=G.map(I=>I.onStatisticField).filter(Boolean);x.validateFields(F,H,m,{expressionName:"onStatisticFields",query:t});b&&x.validateFields(F,H,J,{expressionName:"groupByFieldsForStatistics",
query:t});for(const I of G){const {onStatisticField:f,statisticType:L}=I;if(("percentile_disc"===L||"percentile_cont"===L)&&"statisticParameters"in I){if({statisticParameters:b}=I,!b)throw new l("unsupported-query","statisticParameters should be set for percentile type",{definition:I,query:t});}else F.get(f)&&"count"!==L&&"min"!==L&&"max"!==L&&x.validateFields(F,H,[f],{expressionName:`outStatistics with '${L}' statistic type`,allowedFieldTypes:r,query:t})}}}async function h(F,H,t,G){var J=[];t.valueExpression&&
({arcadeUtils:J}=await M.loadArcade(),J=J.extractFieldNames(t.valueExpression));t.field&&J.push(t.field);t.field2&&J.push(t.field2);t.field3&&J.push(t.field3);t.normalizationField&&J.push(t.normalizationField);if(!J.length&&!t.valueExpression)throw new l("unsupported-query","field or valueExpression is required",{params:t});x.validateFields(F,H,J,{expressionName:"statistics",query:G})}function w(F){return null!=F&&F.every(H=>"exceedslimit"!==H.statisticType)}const r=new Set([...x.numericFieldTypes,
...x.allDateAndTimeFieldTypes]);e.validateQuery=async function(F,{fieldsIndex:H,geometryType:t,spatialReference:G,availableFields:J}){if(0>(F.distance??0)||null!=F.geometryPrecision||F.multipatchOption&&"xyFootprint"!==F.multipatchOption||F.pixelSize||F.relationParam||F.text)throw new l("unsupported-query","Unsupported query options",{query:F});a(H,J,F);q(H,J,F);return Promise.all([u.checkSpatialQuerySupport(F,t,G),C.checkProjectionSupport(G,F.outSR)]).then(()=>F)};e.validateStatisticsQuery=async function(F,
H,{fieldsIndex:t,geometryType:G,spatialReference:J,availableFields:v}){if(0>(F.distance??0)||null!=F.geometryPrecision||F.multipatchOption||F.pixelSize||F.relationParam||F.text||F.outStatistics||F.groupByFieldsForStatistics||F.having||F.orderByFields)throw new l("unsupported-query","Unsupported query options",{query:F});a(t,v,F);return Promise.all([h(t,v,H,F),u.checkSpatialQuerySupport(F,G,J),C.checkProjectionSupport(J,F.outSR)]).then(()=>F)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(e,l,x,C,u,M,a,q,h,w,r,F){function H(){return new Promise((b,m)=>e(["../../../geometry/geometryEngineJSON"],b,m))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var G={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},J={esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},v={esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};l.canQueryWithRBush=function(b){if(M.isExtent(b))return!0;if(M.isPolygon(b)){for(const m of b.rings)if(5!==m.length||m[0][0]!==m[1][0]||m[0][0]!==
m[4][0]||m[2][0]!==m[3][0]||m[0][1]!==m[3][1]||m[0][1]!==m[4][1]||m[1][1]!==m[2][1])return!1;return!0}return!1};l.checkSpatialQuerySupport=async function(b,m,I){const {spatialRel:f,geometry:L}=b;if(L){if(null==f||!0!==G[f])throw new x("unsupported-query","Unsupported query spatial relationship",{query:b});if(a.isValid(L.spatialReference)&&a.isValid(I)){if(null==L||!0!==J[M.getJsonType(L)])throw new x("unsupported-query","Unsupported query geometry type",{query:b});if(null==m||!0!==v[m])throw new x("unsupported-query",
"Unsupported layer geometry type",{query:b});if(b.outSR)return F.checkProjectionSupport(b.geometry?.spatialReference,b.outSR)}}};l.getSpatialQueryOperator=function(b,m,I,f,L){if(M.isPolygon(m)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===b||"esriSpatialRelContains"===b)){const P=h.convertFromPolygon(new w,m,!1,!1);return Promise.resolve(S=>q.polygonContainsPoint(P,!1,!1,S))}if(M.isPolygon(m)&&"esriGeometryMultipoint"===I){const P=h.convertFromPolygon(new w,m,!1,!1);if("esriSpatialRelContains"===
b)return Promise.resolve(S=>q.polygonContainsMultipoint(P,!1,!1,S,f,L))}if(M.isExtent(m)&&"esriGeometryPoint"===I&&("esriSpatialRelIntersects"===b||"esriSpatialRelContains"===b))return Promise.resolve(P=>C.extentContainsPoint(m,r.getGeometry(I,f,L,P)));if(M.isExtent(m)&&"esriGeometryMultipoint"===I&&"esriSpatialRelContains"===b)return Promise.resolve(P=>C.extentContainsMultipoint(m,r.getGeometry(I,f,L,P)));if(M.isExtent(m)&&"esriSpatialRelIntersects"===b){const P=u.getExtentIntersector(I);return Promise.resolve(S=>
P(m,r.getGeometry(I,f,L,S)))}return H().then(P=>{const S=P[t[b]].bind(null,m.spatialReference,m);return ca=>S(r.getGeometry(I,f,L,ca))})};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(e,l){e.extentIntersectsExtent=l.extentIntersectsExtent;e.extentIntersectsMultipoint=l.extentIntersectsMultipoint;e.extentIntersectsPoint=l.extentIntersectsPoint;e.extentIntersectsPolygon=l.extentIntersectsPolygon;
e.extentIntersectsPolyline=l.extentIntersectsPolyline;e.getFeatureExtentIntersector=l.getFeatureExtentIntersector;e.isSelfIntersecting=l.isSelfIntersecting;e.segmentIntersects=l.segmentIntersects;e.getExtentIntersector=function(x){return"mesh"===x?l.extentIntersectsExtent:l.getFeatureExtentIntersector(x)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(e){function l(x,C,u,M,a){if(!x)return!1;C=C?u?4:3:u?3:2;const {coords:q,
lengths:h}=x;u=!1;x=0;for(const r of h){var w=x;for(let F=x,H=x+r*C;F<H;F+=C){w=F+C;w===H&&(w=x);const t=q[F],G=q[F+1],J=q[w];w=q[w+1];(G<a&&w>=a||w<a&&G>=a)&&t+(a-G)/(w-G)*(J-t)<M&&(u=!u)}x+=r*C}return u}e.polygonContainsCoords=l;e.polygonContainsMultipoint=function(x,C,u,M,a,q){a=a?q?4:3:q?3:2;const {coords:h,lengths:w}=M;if(!w)return!1;for(let r=0,F=0;r<w.length;r++,F+=a)if(!l(x,C,u,h[F],h[F+1]))return!1;return!0};e.polygonContainsPoint=function(x,C,u,M){return l(x,C,u,M.coords[0],M.coords[1])};
Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(e){function l(u,M,a,q,h){if(null!=q&&null!=h)return w=>{const r=u(w,M);w=u(w,a);return(null==r||r<=h)&&(null==w||w>=q)};if(null!=q)return w=>{w=u(w,a);return null==w||w>=q};if(null!=h)return w=>{w=u(w,M);return null==w||w<=h}}function x(u,M,a,q){if(null!=a&&null!=q&&a===q)return h=>u(h,M)===a;if(null!=a&&null!=q)return h=>{h=u(h,M);return null!=h&&h>=a&&h<=
q};if(null!=a)return h=>{h=u(h,M);return null!=h&&h>=a};if(null!=q)return h=>{h=u(h,M);return null!=h&&h<=q}}function C(){return()=>!1}e.getTimeExtent=async function(u,M){if(!u)return null;const a=M.featureAdapter,{startTimeField:q,endTimeField:h}=u;let w=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;if(q&&h)await M.forEach(F=>{const H=a.getAttribute(F,q);F=a.getAttribute(F,h);null==H||isNaN(H)||(w=Math.min(w,H));null==F||isNaN(F)||(r=Math.max(r,F))});else{const F=q||h;await M.forEach(H=>{H=
a.getAttribute(H,F);null==H||isNaN(H)||(w=Math.min(w,H),r=Math.max(r,H))})}return{start:w,end:r}};e.getTimeOperator=function(u,M,a){if(!M||!u)return null;const {startTimeField:q,endTimeField:h}=u;if(!q&&!h)return null;const {start:w,end:r}=M;if(null===w&&null===r)return null;if(void 0===w&&void 0===r)return C();u=a.getAttributeAsTimestamp?.bind(a)??a.getAttribute.bind(a);return q&&h?l(u,q,h,w,r):x(u,q||h,w,r)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(e,l,x,C,u,M,a,q){function h(t){return t.trim().toLowerCase()}function w(t){const G=new Map;if(!t.fields)return G;const J=!0===t.datesInUnknownTimezone,{timeInfo:v,editFieldsInfo:b}=t;var m=(v?"startField"in v?v.startField:v.startTimeField:"")??"";const I=(v?"endField"in v?v.endField:v.endTimeField:"")??"",f="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?a.fromTimeReference(t.dateFieldsTimeReference):null,L=b?"timeZone"in b?b.timeZone??f:b.dateFieldsTimeReference?
a.fromTimeReference(b.dateFieldsTimeReference):f??a.utc:null,P=v?"timeZone"in v?v.timeZone??f:v.timeReference?a.fromTimeReference(v.timeReference):f:null;m=new Map([[h(b?.creationDateField??""),L],[h(b?.editDateField??""),L],[h(m),P],[h(I),P]]);for(const {name:S,type:ca}of t.fields)H.has(ca)?G.set(S,a.unknown):"date"!==ca&&"esriFieldTypeDate"!==ca?G.set(S,null):J?G.set(S,a.unknown):(t=m.get(h(S??""))??f,G.set(S,t));return G}const r=new Map;class F{static fromJSON(t){return new F(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new F(t.fields??
[],w(t))}static fromLayerJSON(t){return new F(t.fields??[],w(t))}constructor(t=[],G){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=G?new Map(G):null;t=[];for(const J of this.fields){G=J?.name;const v=M.normalizeFieldName(G)?.toLowerCase()??"";if(G&&v){const b=h(G);this._fieldsMap.set(G,J);this._fieldsMap.set(b,J);this._normalizedFieldsMap.set(v,
J);t.push(`${b}:${J.type}:${this._timeZoneByFieldName?.get(G)}`);M.isDateField(J)?(this.dateFields.push(J),this._dateFieldsSet.add(J)):M.isNumericField(J)&&(this._numericFieldsSet.add(J),this.numericFields.push(J));M.isObjectIDField(J)||M.isGlobalIDField(J)||(J.editable=null==J.editable||!!J.editable,J.nullable=null==J.nullable||!!J.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)M.isObjectIDField(t)||M.isGlobalIDField(t)||
t.nullable||void 0!==M.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var G=this._fieldsMap.get(t);if(G)return G;(G=this._fieldsMap.get(h(t))??this._normalizedFieldsMap.get(M.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,G);return G}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(x.getLogger("esri.layers.support.FieldsIndex").error(new e("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),a.utc):H.has(t.type)?a.unknown:null:null}getLuxonTimeZone(t){const G=this.getTimeZone(t);return G?G===a.unknown?u.UnknownTimeZone.instance:G===a.utc?q.FixedOffsetZone.utcInstance:C.getOrCreateMapValue(r,G,()=>q.IANAZone.create(G)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return M.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>l.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const H=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return F})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(e,l,x,C,u,M,a,q,h,w,r,F,H,t,G){function J(T){return v.has(T)?v.get(T):"number"===typeof T?T:1}e.TaskPriority=void 0;(function(T){T.RESOURCE_CONTROLLER_IMMEDIATE="immediate";T.RESOURCE_CONTROLLER="schedule";T.SLIDE="slide";T.STREAM_DATA_LOADER="stream loader";T.ELEVATION_QUERY="elevation query";T.TERRAIN_SURFACE="terrain";T.SURFACE_GEOMETRY_UPDATES="surface geometry updates";T.LOD_RENDERER="LoD renderer";T.GRAPHICS_CORE="Graphics3D";T.I3S_CONTROLLER="I3S";T.POINT_CLOUD_LAYER="point cloud";
T.FEATURE_TILE_FETCHER="feature fetcher";T.OVERLAY="overlay";T.STAGE="stage";T.GRAPHICS_DECONFLICTOR="graphics deconflictor";T.FILTER_VISIBILITY="Graphics3D filter visibility";T.SCALE_VISIBILITY="Graphics3D scale visibility";T.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";T.POINT_OF_INTEREST_FREQUENT="POI frequent";T.POINT_OF_INTEREST_INFREQUENT="POI infrequent";T.LABELER="labeler";T.FEATURE_QUERY_ENGINE="feature query";T.FEATURE_TILE_TREE="feature tile tree";T.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
T.ELEVATION_ALIGNMENT="elevation alignment";T.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";T.TEXT_TEXTURE_ATLAS="text texture atlas";T.TEXTURE_UNLOAD="texture unload";T.LINE_OF_SIGHT_TOOL="line of sight tool";T.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";T.ELEVATION_PROFILE="elevation profile";T.SNAPPING="snapping";T.SHADOW_ACCUMULATOR="shadow accumulator";T.CLOUDS_GENERATOR="clouds generator";T.MAPVIEW_FETCH_QUEUE="mapview fetch queue";T.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update";
T.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue";T[T.NONE=0]="NONE";T[T.TEST_PRIO=1]="TEST_PRIO"})(e.TaskPriority||(e.TaskPriority={}));const v=new Map([[e.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[e.TaskPriority.RESOURCE_CONTROLLER,4],[e.TaskPriority.SLIDE,0],[e.TaskPriority.STREAM_DATA_LOADER,0],[e.TaskPriority.ELEVATION_QUERY,0],[e.TaskPriority.TERRAIN_SURFACE,1],[e.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[e.TaskPriority.LOD_RENDERER,2],[e.TaskPriority.GRAPHICS_CORE,
2],[e.TaskPriority.I3S_CONTROLLER,2],[e.TaskPriority.POINT_CLOUD_LAYER,2],[e.TaskPriority.FEATURE_TILE_FETCHER,2],[e.TaskPriority.CLOUDS_GENERATOR,2],[e.TaskPriority.OVERLAY,4],[e.TaskPriority.STAGE,4],[e.TaskPriority.GRAPHICS_DECONFLICTOR,4],[e.TaskPriority.FILTER_VISIBILITY,4],[e.TaskPriority.SCALE_VISIBILITY,4],[e.TaskPriority.FRUSTUM_VISIBILITY,4],[e.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[e.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[e.TaskPriority.LABELER,8],[e.TaskPriority.FEATURE_QUERY_ENGINE,
8],[e.TaskPriority.FEATURE_TILE_TREE,16],[e.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[e.TaskPriority.ELEVATION_ALIGNMENT,12],[e.TaskPriority.ELEVATION_ALIGNMENT_SCENE,14],[e.TaskPriority.TEXT_TEXTURE_ATLAS,12],[e.TaskPriority.TEXTURE_UNLOAD,12],[e.TaskPriority.LINE_OF_SIGHT_TOOL,16],[e.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[e.TaskPriority.SNAPPING,0],[e.TaskPriority.SHADOW_ACCUMULATOR,30],[e.TaskPriority.MAPVIEW_FETCH_QUEUE,0],[e.TaskPriority.MAPVIEW_LAYERVIEW_UPDATE,2],[e.TaskPriority.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,
0]]),b=r.Milliseconds(6.5),m=r.Milliseconds(1),I=r.Milliseconds(30),f=r.Milliseconds(1E3/30),L=r.Milliseconds(100);var P;(function(T){class y{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(d=>d.needsUpdate)}constructor(){this._updating=w.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new M("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new g;this._state=t.RenderState.INTERACTING;this._tasks=
new a;this._runQueue=new a;this._load=0;this._idleStateCallbacks=new a;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=h.watch(()=>H.SCHEDULER_LOG_SLOW_TASKS,d=>this._debug=d,h.initial);for(const d of Object.keys(e.TaskPriority))this.performanceInfo.tasks.set(e.TaskPriority[d],new M(e.TaskPriority[d]))}destroy(){this._tasks.toArray().forEach(d=>d.remove());this._tasks.clear();u.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(d){this._updatingChanged();
d&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(d,k){k=new Q(this,d,k);this._tasks.push(k);this._updatingChanged();this.performanceInfo.tasks.has(d)||this.performanceInfo.tasks.set(d,new M(d));return k}registerIdleStateCallbacks(d,k){const z={idleBegin:d,idleEnd:k};this._idleStateCallbacks.push(z);this.state===t.RenderState.IDLE&&
this._idleUpdatesStartFired&&z.idleBegin();const O=this;return{remove:()=>this._removeIdleStateCallbacks(z),set idleBegin(X){O._idleUpdatesStartFired&&(z.idleEnd(),O._state===t.RenderState.IDLE&&X());z.idleBegin=X},set idleEnd(X){z.idleEnd=X}}}get load(){return this._load}set state(d){this._state!==d&&(this._state=d,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(k=>k.idleEnd())))}get state(){return this._state}updateBudget(d){this._test&&
(this._test.usedBudget=0);++this._frameNumber;let k=b,z=d.frameDuration,O=m;switch(this.state){case t.RenderState.IDLE:k=r.Milliseconds(0);z=r.Milliseconds(Math.max(L,d.frameDuration));O=I;break;case t.RenderState.INTERACTING:z=r.Milliseconds(Math.max(f,d.frameDuration))}z=r.Milliseconds(z-d.elapsedFrameTime-k);if(this.state!==t.RenderState.IDLE&&z<m&&!this._forceTask)return this._forceTask=!0,!1;z=r.Milliseconds(Math.max(z,O));this._budget.reset(z,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=
this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(d=>d.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(r.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(d){this._idleUpdatesStartFired&&d.idleEnd();
this._idleStateCallbacks.removeUnordered(d)}removeTask(d){this._tasks.removeUnordered(d);this._runQueue.removeUnordered(d);this._updatingChanged()}_updateTask(d){this._tasks.forAll(k=>{k.name===d&&k.setPriority(d)})}_getState(d){if(this._runQueue.some(z=>z.name===d))return e.TaskState.SCHEDULED;let k=e.TaskState.IDLE;this._tasks.forAll(z=>{z.name===d&&z.needsUpdate&&(1>=z.schedulePriority?k=e.TaskState.READY:k!==e.TaskState.READY&&(k=e.TaskState.WAITING))});return k}_getRuntime(d){let k=0;this._tasks.forAll(z=>
{z.name===d&&(k+=z.runtime)});return k}_resetRuntimes(){this._tasks.forAll(d=>d.runtime=0)}_getRunning(){const d=new Map;this._tasks.forAll(z=>{z.needsUpdate&&d.set(z.name,(d.get(z.name)||0)+1)});if(0===d.size)return null;let k="";d.forEach((z,O)=>{k=1<z?k+` ${z}x ${O}`:k+` ${O}`});return k}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const d=this._tasks.reduce((k,z)=>z.needsUpdate?++k:k,0);this._load=.9*this._load+d*(1-.9)}_schedule(){this._runQueue.filterInPlace(d=>
{if(d.needsUpdate)return!0;d.schedulePriority=d.basePriority;return!1});for(this._tasks.forAll(d=>{0===d.basePriority&&d.needsUpdate&&!this._runQueue.includes(d)&&d.blockFrame!==this._frameNumber&&this._runQueue.unshift(d)});0===this._runQueue.length;){let d=!1;this._tasks.forAll(k=>{if(k.needsUpdate&&0!==k.schedulePriority&&0!==k.basePriority&&k.blockFrame!==this._frameNumber)switch(d=!0,k.schedulePriority){case 1:k.schedulePriority=0;this._runQueue.push(k);break;default:--k.schedulePriority}});
if(!d)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const d=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var k=this._budget.now();const z=this._runQueue.pop();this._budget.resetProgress();try{z.task.runTask(this._budget)===G.Yield&&(z.blockFrame=this._frameNumber)}catch(O){C.getLogger("esri.views.support.Scheduler").error(`Exception in task "${z.name}"`,O),z.blockFrame=this._frameNumber}!this._budget.hasProgressed&&z.blockFrame!==this._frameNumber&&
z.needsUpdate&&(z.blockFrame=this._frameNumber);z.schedulePriority=z.basePriority;k=this._budget.now()-k;z.runtime+=k;this._frameTaskTimes.set(z.priority,this._frameTaskTimes.get(z.priority)+k);if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-d);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-d)}_startFrameTaskTimes(){for(const d of Object.keys(e.TaskPriority))this._frameTaskTimes.set(e.TaskPriority[d],
0)}_recordFrameTaskTimes(d){this._frameTaskTimes.forEach((k,z)=>this.performanceInfo.tasks.get(z).push(k));this.performanceInfo.total.push(d)}get test(){return this._test}}T.Scheduler=y;class Q{get task(){return this._task.value}get updating(){return this._queue.running}constructor(d,k,z){this._scheduler=d;this.name=k;this.runtime=this.blockFrame=0;this._queue=new F.PromiseQueue;this._handles=new l;this.schedulePriority=this._basePriority=J(k);this._task=w.signal(null!=z?z:this._queue);this._handles.add(h.when(()=>
this.task.running,O=>d.taskRunningChanged(O)))}remove(){this.processQueue(S);this._scheduler.removeTask(this);this.schedule=U.schedule;this.reschedule=U.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(d){if(this.name!==d){this.name=d;d=J(d);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=d;this._basePriority=d}}get priority(){return this.name}set priority(d){this.setPriority(d)}get needsUpdate(){return this.updating||this.task.running}schedule(d,
k,z){return this._queue.push(d,k,z)}reschedule(d,k,z){return this._queue.unshift(d,k,z)}processQueue(d){return this._queue.runTask(d)}}class g{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(d){if(this.done)return!1;!0===d()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=
this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,k){this._begin=this.now();this._budget=d;this._state=k;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}T.Budget=g})(P||={});e.TaskState=void 0;(function(T){T.SCHEDULED=
"s";T.READY="r";T.WAITING="w";T.IDLE="i"})(e.TaskState||(e.TaskState={}));const S=(()=>{const T=new P.Budget;T.enabled=!1;return T})();class ca{remove(){}processQueue(){}schedule(T,y,Q){try{if(q.isAborted(y)){const g=q.createAbortError();return Q?Promise.resolve(Q(g)):Promise.reject(g)}return q.when(T(S))}catch(g){return Promise.reject(g)}}reschedule(T,y,Q){return this.schedule(T,y,Q)}}const U=new ca;e.ImmediateTask=U;e.getTaskPriority=J;e.newScheduler=function(){return new P.Scheduler};e.noBudget=
S;e.taskPriorities=v;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(e,l,x,C){class u{constructor(M,a){this._observable=new C.SimpleObservable;this._value=M;this._equalityFunction=a}get value(){x.trackAccess(this._observable);return this._value}set value(M){this._equalityFunction(M,this._value)||(this._value=M,this._observable.notify())}mutate(M){M(this._value);
this._observable.notify()}}e.signal=function(M,a=l.equalsShallow){return new u(M,a)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(e,l,x,C){class u{constructor(){this._tasks=[];this._runningTasks=x.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(a){if(0===
this.length)return C.Yield;for(;!a.done&&this._process(a);)a.madeProgress()}push(a,q,h){++this._runningTasks.value;return(new Promise((w,r)=>this._tasks.push(new M(w,r,a,q,h)))).finally(()=>--this._runningTasks.value)}unshift(a,q,h){++this._runningTasks.value;return(new Promise((w,r)=>this._tasks.unshift(new M(w,r,a,q,h)))).finally(()=>--this._runningTasks.value)}_process(a){if(0===this._tasks.length)return!1;const q=this._tasks.shift();try{const h=l.isAborted(q.signal);if(h&&!q.abortCallback)q.reject(l.createAbortError());
else{const w=h?q.abortCallback?.(l.createAbortError()):q.callback(a);l.isPromiseLike(w)?w.then(q.resolve,q.reject):q.resolve(w)}}catch(h){q.reject(h)}return!0}cancelAll(){const a=l.createAbortError();for(const q of this._tasks)if(q.abortCallback){const h=q.abortCallback(a);q.resolve(h)}else q.reject(a);this._tasks.length=0}}class M{constructor(a,q,h,w,r){this.resolve=a;this.reject=q;this.callback=h;this.signal=w;this.abortCallback=r}}e.PromiseQueue=u;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(e){const l=Symbol("Yield");e.Yield=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(e,l,x,C,u,M,a){l=class extends l{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};e.__decorate([x.property()],l.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);e.__decorate([x.property()],l.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);l=e.__decorate([a.subclass("esri.views.support.debugFlags")],l);return new l})},"esri/views/support/RenderState":function(){define(["exports"],function(e){e.RenderState=void 0;var l=e.RenderState||(e.RenderState={});l[l.ANIMATING=0]="ANIMATING";l[l.INTERACTING=1]="INTERACTING";l[l.IDLE=2]=
"IDLE";Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/date","../../../../core/number","../../../support/fieldUtils","../../../support/locationUtils"],function(e,l,x,C,u){function*M(b,m,I){let f=0;for(;f<=b.length;){var L=b.indexOf(m,f);L=b.slice(f,-1<L?L:void 0);f+=L.length+m.length;if(!I||L.trim())yield L}}function a(b){const m=b.includes("\r\n")?"\r\n":"\n";return M(b,m,!0)}function q(b,m){return M(b,
m,!1)}function*h(b,m,I,f=()=>Object.create(null)){var L=a(b);L.next();var P="";b="";let S=0,ca=f(),U=0;a:for(const T of L){L=q(T,I);for(const y of L)if(P+=b+y,b="",S+=F(y),0===S%2){if(0<S)if(P=t.exec(P))ca[m[U]]=P[1].replaceAll(G,'"'),U++;else{ca=f();U=0;P="";S=0;continue a}else ca[m[U]]=P,U++;P="";S=0}else b=I;0===S?(yield ca,ca=f(),U=0):b="\n"}}function w(b,m){b=r(b,m).filter(I=>null!=I);m=b.map(I=>C.normalizeFieldName(I));for(let I=m.length-1;0<=I;I--)m[I]||(m.splice(I,1),b.splice(I,1));return{names:m,
aliases:b}}function r(b,m){if(!b?.length)return[];const I=[];var f="";let L="",P=0;b=q(b,m);for(const S of b)f+=L+S,L="",P+=F(S),0===P%2?(0<P?(f=t.exec(f))&&I.push(f[1].replaceAll(G,'"')):I.push(f),f="",P=0):L=m;return I}function F(b){let m=0,I;for(I=b.indexOf('"',0);0<=I;)m++,I=b.indexOf('"',I+1);return m}function H(b){if(!b.length)return"string";const m=/[^+\-.,0-9]/;return b.map(I=>{if(""!==I){if(!m.test(I)){let f=v(I);if(!isNaN(f))return/[.,]/.test(I)||!Number.isInteger(f)||214783647<f||-214783648>
f?"double":"integer";if(I.includes("E"))if(f=Number(I),Number.isNaN(f)){if(I.includes(",")&&(I=I.replace(",","."),f=Number(I),!Number.isNaN(f)))return"double"}else return"double"}return l.isDateString(I)?"date":"string"}}).reduce((I,f)=>{if(void 0===I)return f;if(void 0===f)return I;if(I===f)return f;if("string"===I||"string"===f)return"string";if("double"===I||"double"===f)return"double"})}const t=/^\s*"([\S\s]*)"\s*$/,G=/""/g,J=[","," ",";","|","\t"],v=function(){const b=x._parseInfo(),m=new RegExp("^"+
b.regexp+"$"),I=new RegExp("["+b.group+"\\s\\xa0]","g"),f=b.factor;return L=>{L=m.exec(L);b.factor=f;if(!L)return NaN;let P=L[1];if(!L[1]){if(!L[2])return NaN;P=L[2];b.factor*=-1}P=P.replace(I,"").replace(b.decimal,".");return+P*b.factor}}();e.extractFieldNamesAndAliasesFromRow=w;e.inferDelimiterAndLocationInfo=function(b,m,I){b=b.trim();m=m?.trim();var f=[],L=Array.from(new Set([I?.delimiter,...J])).filter(P=>null!=P);for(const P of L){L=r(b,P).length;const S=r(m,P).length??L;1<L&&f.push({weight:Math.min(L,
S),delimiter:P})}m=f.sort(({weight:P},{weight:S})=>S-P).map(({delimiter:P})=>P);for(const P of m)if(f=w(b,P).names,f=u.inferLocationInfo(f,I?.longitudeField,I?.latitudeField),f.longitudeFieldName&&f.latitudeFieldName)return{delimiter:P,locationInfo:f};return{delimiter:m[0],locationInfo:null}};e.inferFieldType=H;e.inferFields=function(b,m,I,f,L){const P=[];m=h(b,I,m);b=[];for(var S of m){if(10===b.length)break;b.push(S)}for(S=0;S<I.length;S++){const U=I[S];m=f[S];if(U===L.longitudeFieldName||U===L.latitudeFieldName)P.push({name:U,
type:"esriFieldTypeDouble",alias:m});else{var ca=b.map(T=>T[U]);switch(H(ca)){case "integer":ca="esriFieldTypeInteger";break;case "double":ca="esriFieldTypeDouble";break;case "date":ca="esriFieldTypeDate";break;default:ca="esriFieldTypeString"}P.push({name:U,type:ca,alias:m,length:C.getFieldDefaultLength(ca)})}}return P};e.parseNumber=v;e.parseRows=h;e.readRowParts=q;e.readRows=a;e.severSlicedString=function(b){return JSON.parse(JSON.stringify(b))};e.splitSingleRow=r;Object.defineProperty(e,Symbol.toStringTag,
{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(e,l,x){function C(r=x.getLocale()){r=r.toLowerCase();let F=r in q;if(!F){const J=r.split("-");1<J.length&&J[0]in q&&(r=J[0],F=!0);F||(r="en")}const [H,t,G="#,##0.###"]=q[r];return{decimal:H,group:t,pattern:G}}function u(r){r=r||{};var F=C(r.locale);const H=r.pattern||F.pattern,t=F.group,G=F.decimal;let J=1;if(H.includes("%"))J/=100;else if(H.includes("\u2030"))J/=1E3;else if(H.includes("\u00a4"))throw Error("currency notation not supported");
F=H.split(";");1===F.length&&F.push("-"+F[0]);return{regexp:w(F,v=>{v="(?:"+l.escapeRegExpString(v,".")+")";return v.replace(h,b=>{const m={signed:!1,separator:r.strict?t:[t,""],fractional:r.fractional,decimal:G,exponent:!1};b=b.split(".");let I=r.places;1===b.length&&1!==J&&(b[1]="###");1===b.length||0===I?m.fractional=!1:(void 0===I&&(I=r.pattern?b[1].lastIndexOf("0")+1:Infinity),I&&null==r.fractional&&(m.fractional=!0),!r.places&&+I<b[1].length&&(I+=","+b[1].length),m.places=I);b=b[0].split(",");
1<b.length&&(m.groupSize=b.pop().length,1<b.length&&(m.groupSize2=b.pop().length));return"("+M(m)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:t,decimal:G,factor:J}}function M(r){r=r||{};"places"in r||(r.places=Infinity);"string"!==typeof r.decimal&&(r.decimal=".");"fractional"in r&&!String(r.places).startsWith("0")||(r.fractional=[!0,!1]);"exponent"in r||(r.exponent=[!0,!1]);"eSigned"in r||(r.eSigned=[!0,!1]);var F=a(r);const H=w(r.fractional,G=>{let J="";G&&0!==r.places&&(J="\\"+r.decimal,
J=Infinity===r.places?"(?:"+J+"\\d+)?":J+("\\d{"+r.places+"}"));return J},!0),t=w(r.exponent,G=>G?"([eE]"+a({signed:r.eSigned})+")":"");F+=H;H&&(F="(?:(?:"+F+")|(?:"+H+"))");return F+t}function a(r){r=r||{};"signed"in r||(r.signed=[!0,!1]);"separator"in r?"groupSize"in r||(r.groupSize=3):r.separator="";const F=w(r.signed,t=>t?"[-+]":"",!0),H=w(r.separator,t=>{if(!t)return"(?:\\d+)";t=l.escapeRegExpString(t);" "===t?t="\\s":"\u00a0"===t&&(t="\\s\\xa0");const G=r.groupSize,J=r.groupSize2;return J?(t=
"(?:0|[1-9]\\d{0,"+(J-1)+"}(?:["+t+"]\\d{"+J+"})*["+t+"]\\d{"+G+"})",0<G-J?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(G-1)+"}))":t):"(?:0|[1-9]\\d{0,"+(G-1)+"}(?:["+t+"]\\d{"+G+"})*)"},!0);return F+H}const q={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],
hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},h=/[#0,]*[#0](?:\.0*#*)?/,w=(r,F,H)=>{if(!Array.isArray(r))return F(r);const t=[];for(let G=0;G<r.length;G++)t.push(F(r[G]));
r=t.join("|");return"("+(H?"?:":"")+r+")"};e._parseInfo=u;e.format=function(r,F){F={...F};var H=C(F.locale);F.customs=H;H=F.pattern||H.pattern;if(isNaN(r)||Infinity===Math.abs(r))return null;var t=r;var G=F||{};var J=G.customs.group,v=G.customs.decimal;H=H.split(";");r=H[0];F=H[0>t?1:0]||"-"+r;if(F.includes("%"))t*=100;else if(F.includes("\u2030"))t*=1E3;else{if(F.includes("\u00a4"))throw Error("currency notation not supported");if(F.includes("E"))throw Error("exponential notation not supported");
}H=h;var b=r.match(H);if(!b)throw Error("unable to find a number expression in pattern: "+F);!1===G.fractional&&(G.places=0);r=F.replace;b=b[0];G=G={decimal:v,group:J,places:G.places,round:G.round};!0===G.places&&(G.places=0);Infinity===G.places&&(G.places=6);v=b.split(".");var m="string"===typeof G.places&&G.places.indexOf(",");b=G.places;m?b=G.places.slice(m+1):0<=+b||(b=(v[1]||[]).length);0>G.round||(t=Number(t.toFixed(Number(b))));J=String(Math.abs(t)).split(".");t=J[1]||"";v[1]||G.places?(m&&
(G.places=G.places.slice(0,Math.max(0,m))),m=void 0!==G.places?G.places:v[1]&&v[1].lastIndexOf("0")+1,+m>t.length&&(J[1]=t.padEnd(Number(m),"0")),+b<t.length&&(J[1]=t.slice(0,Math.max(0,Number(b))))):J[1]&&J.pop();t=v[0].replace(",","");b=t.indexOf("0");-1!==b&&(b=t.length-b,b>J[0].length&&(J[0]=J[0].padStart(b,"0")),t.includes("#")||(J[0]=J[0].slice(-b)));t=v[0].lastIndexOf(",");let I;if(-1!==t){var f=v[0].length-t-1;v=v[0].slice(0,t);t=v.lastIndexOf(",");-1!==t&&(I=v.length-t-1)}v=[];for(t=J[0];t;)b=
t.length-f,v.push(0<b?t.slice(Math.max(0,b)):t),t=0<b?t.slice(0,b):"",I&&(f=I,I=void 0);J[0]=v.reverse().join(G.group||",");f=J.join(G.decimal||".");return r.call(F,H,f)};e.getCustoms=C;e.parse=function(r,F){F=u(F);r=(new RegExp("^"+F.regexp+"$")).exec(r);if(!r)return NaN;let H=r[1];if(!r[1]){if(!r[2])return NaN;H=r[2];F.factor*=-1}H=H.replaceAll(new RegExp("["+F.group+"\\s\\xa0]","g"),"").replace(F.decimal,".");return Number(H)*F.factor};e.regexp=function(r){return u(r).regexp};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/locationUtils":function(){define(["exports","./fieldUtils"],function(e,l){const x="lat lat83 latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),C="lon lng lng83 long long83 longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");e.inferLocationInfo=function(u,M,a){M=l.normalizeFieldName(M)?.toLowerCase();a=l.normalizeFieldName(a)?.toLowerCase();const q=u.map(h=>h.toLowerCase());M=M?u[q.indexOf(M)]:null;a=a?
u[q.indexOf(a)]:null;return{longitudeFieldName:M||u[q.indexOf(C.find(h=>q.includes(h)))],latitudeFieldName:a||u[q.indexOf(x.find(h=>q.includes(h)))]}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define("exports ../../../../core/has ../../../../core/lang ../../data/QueryEngineCapabilities ../../../support/capabilities ../../../../symbols/support/defaultsJSON".split(" "),function(e,l,x,C,u,M){function a(w){return q.test(w)?
`.${w}`:`["${w}"]`}const q=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let h=1;e.createCapabilities=function(w,r){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:w},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:r,supportsDelete:r,supportsEditing:r,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!1,supportsQueryAnalytics:!1,
supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:r,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:C.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:u.zeroQueryBins,editing:{supportsGeometryUpdate:r,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,
supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};e.createDefaultAttributesFunction=function(w,r){if(l("esri-csp-restrictions"))return()=>({[r]:null,...w});try{let F=`this${a(r)} = null;`;for(const t in w){const G=a(t);F+=`this${G} = ${JSON.stringify(w[t])};`}const H=(new Function(`\n      return class AttributesClass$${h++} {\n        constructor() {\n          ${F};\n        }\n      }\n    `))();
return()=>new H}catch(F){return()=>({[r]:null,...w})}};e.createDefaultTemplate=function(w={}){return[{name:"New Feature",description:"",prototype:{attributes:x.clone(w)}}]};e.createDrawingInfo=function(w){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===w||"esriGeometryMultipoint"===w?M.defaultPointSymbolJSON:"esriGeometryPolyline"===w?M.defaultPolylineSymbolJSON:M.defaultPolygonSymbolJSON}}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/capabilities":function(){define(["exports"],
function(e){const l={supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportedStatistics:void 0};e.zeroCapabilities={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,
supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:l,query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,
supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}};e.zeroQueryBins=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(e){const l=[252,146,31,255],x={type:"esriSMS",style:"esriSMSCircle",size:6,color:l,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,
153,255]}},C={type:"esriSLS",style:"esriSLSSolid",width:.75,color:l};e.defaultColor=l;e.defaultOutlineColor=[153,153,153,255];e.defaultPointSymbolJSON=x;e.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};e.defaultPolylineSymbolJSON=C;e.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,
haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};e.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};e.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};e.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/date ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../time/timeZoneUtils ../../../../geometry/SpatialReference".split(" "),function(e,
l,x,C,u,M,a,q,h,w,r,F,H,t,G,J,v,b,m,I,f,L,P){function S(g,d){var k=d.parsingOptions||{};const z={delimiter:k.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:k.latitudeField,longitudeFieldName:k.longitudeField}},O=z.layerDefinition={name:q.getFilename(d.url,U)||"csv",dateFieldsTimeReference:{timeZoneIANA:L.utc},drawingInfo:ca,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:k.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,
ymax:Number.NEGATIVE_INFINITY,spatialReference:k.spatialReference||{wkid:4326}}};var X=b.readRows(g);d=X.next().value?.trim();X=X.next().value?.trim();if(!d)throw new u("csv-layer:empty-csv","CSV is empty",{csv:g});const {delimiter:ba,locationInfo:fa}=b.inferDelimiterAndLocationInfo(d,X,k);if(!ba)throw new u("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:d,secondLine:X,parsingOptions:k});if(!fa)throw new u("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:d,secondLine:X,parsingOptions:k});z.locationInfo=fa;z.delimiter=ba;const {names:ma,aliases:pa}=b.extractFieldNamesAndAliasesFromRow(d,ba);g=b.inferFields(g,z.delimiter,ma,pa,z.locationInfo);if(k.fields?.length){k=new I(k.fields);for(var oa of g)(d=k.get(oa.name))&&Object.assign(oa,d)}g.some(qa=>"esriFieldTypeOID"===qa.type?(O.objectIdField=qa.name,!0):!1)||(oa={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},O.objectIdField=oa.name,g.unshift(oa));O.fields=
g;k=new I(O.fields);z.locationInfo&&(z.locationInfo.latitudeFieldName=k.get(z.locationInfo.latitudeFieldName).name,z.locationInfo.longitudeFieldName=k.get(z.locationInfo.longitudeFieldName).name);O.timeInfo&&(oa=O.timeInfo,oa.startTimeField&&((g=k.get(oa.startTimeField))?(oa.startTimeField=g.name,g.type="esriFieldTypeDate"):oa.startTimeField=null),oa.endTimeField&&((g=k.get(oa.endTimeField))?(oa.endTimeField=g.name,g.type="esriFieldTypeDate"):oa.endTimeField=null),oa.trackIdField&&(k=k.get(oa.trackIdField),
oa.trackIdField=k?k.name:null),oa.startTimeField||oa.endTimeField||(O.timeInfo=null));return z}const ca=m.createDrawingInfo("esriGeometryPoint"),U=["csv"],T=[0,0];class y{constructor(g,d){this.x=g;this.y=d}}class Q{constructor(){this._queryEngine=null;this._snapshotFeatures=async g=>{g=await this._fetch(g);return this._createFeatures(g)}}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(g,d={}){this._loadOptions=g;[d]=await Promise.all([this._fetch(d.signal),this._checkProjection(g?.parsingOptions?.spatialReference)]);
g=S(d,g);this._locationInfo=g.locationInfo;this._delimiter=g.delimiter;this._queryEngine=this._createQueryEngine(g);d=await this._createFeatures(d);this._queryEngine.featureStore.addMany(d);const {fullExtent:k,timeExtent:z}=await this._queryEngine.fetchRecomputedExtents();g.layerDefinition.extent=k;if(z){const {start:O,end:X}=z;g.layerDefinition.timeInfo.timeExtent=[O,X]}return g}async applyEdits(){throw new u("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");}async queryFeatures(g=
{},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(g,d.signal)}async queryFeatureCount(g={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(g,d.signal)}async queryObjectIds(g={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(g,d.signal)}async queryExtent(g={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(g,d.signal)}async querySnapping(g,d={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForSnapping(g,d.signal)}async refresh(g){this._loadOptions.customParameters=g;this._snapshotTask?.abort();this._snapshotTask=x.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(z=>{this._queryEngine.featureStore.clear();z&&this._queryEngine.featureStore.addMany(z)},z=>{this._queryEngine.featureStore.clear();a.isAbortError(z)||M.getLogger("esri.layers.CSVLayer").error(new u("csv-layer:refresh","An error occurred during refresh",{error:z}))});await this._waitSnapshotComplete();
const {fullExtent:d,timeExtent:k}=await this._queryEngine.fetchRecomputedExtents();return{extent:d,timeExtent:k}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(g){const {url:d,customParameters:k}=this._loadOptions;if(!d)throw new u("csv-layer:invalid-source","url not defined");const z=q.urlToObject(d);return(await l(z.path,{query:{...z.query,...k},responseType:"text",signal:g})).data}_createQueryEngine(g){const {objectIdField:d,
fields:k,extent:z,timeInfo:O}=g.layerDefinition;g=new G({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new v.QueryEngine({fieldsIndex:I.fromLayerJSON({fields:k,dateFieldsTimeReference:{timeZoneIANA:L.utc}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:O,objectIdField:d,spatialReference:z.spatialReference||{wkid:4326},featureStore:g})}async _createFeatures(g){const {latitudeFieldName:d,longitudeFieldName:k}=this._locationInfo,{objectIdField:z,fieldsIndex:O,spatialReference:X}=
this._queryEngine;let ba=[];const fa=[];var ma=O.fields.filter(xa=>xa.name!==z).map(xa=>xa.name),pa=0,oa={};for(const xa of O.fields)if("esriFieldTypeOID"!==xa.type&&"esriFieldTypeGlobalID"!==xa.type){const Aa=f.getFieldDefaultValue(xa);void 0!==Aa&&(oa[xa.name]=Aa)}g=b.parseRows(g,ma,this._delimiter,m.createDefaultAttributesFunction(oa,z));for(var qa of g)if(g=this._parseCoordinateValue(qa[d]),ma=this._parseCoordinateValue(qa[k]),null!=ma&&null!=g&&!isNaN(g)&&!isNaN(ma)){qa[d]=g;qa[k]=ma;for(var va in qa)va!==
d&&va!==k&&(O.isDateField(va)?qa[va]=C.parseDate(qa[va]):O.isNumericField(va)?(oa=b.parseNumber(qa[va]),isNaN(oa)?qa[va]=null:qa[va]=oa):null!=qa[va]&&(qa[va]=b.severSlicedString(qa[va])));qa[z]=pa;pa++;ba.push(new y(ma,g));fa.push(qa)}if(!r.equals({wkid:4326},X))if(r.isWebMercator(X))for(const xa of ba)[xa.x,xa.y]=F.lngLatToXY(xa.x,xa.y,T);else ba=h.projectMany(w.jsonAdapter,ba,P.WGS84,X,null,null);pa=[];for(qa=0;qa<ba.length;qa++){const {x:xa,y:Aa}=ba[qa];va=fa[qa];va[z]=qa+1;pa.push(new H.OptimizedFeature(new t([],
[xa,Aa]),va,null,va[z]))}return pa}_parseCoordinateValue(g){if(null==g||""===g)return null;let d=b.parseNumber(g);if(isNaN(d)||181<Math.abs(d))d=parseFloat(g);return d}async _checkProjection(g){try{await J.checkProjectionSupport(r.wgs84,g)}catch{throw new u("csv-layer:projection-not-supported","Projection not supported");}}}return Q});