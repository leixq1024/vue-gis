// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../PopupTemplate ../renderers/ClassBreaksRenderer ../renderers/DictionaryRenderer ../renderers/DotDensityRenderer ../renderers/HeatmapRenderer ../renderers/PieChartRenderer ../renderers/Renderer ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/jsonUtils ../renderers/support/types ../request ../symbols ../core/Clonable ../core/Collection ../core/Error ../core/lang ../core/Logger ../core/MultiOriginJSONSupport ../core/object ../core/promiseUtils ../core/sql ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/layerContainerType ../form/FormTemplate ../geometry/SpatialReference ./Layer ./graphics/sources/MemorySource ./mixins/APIKeyMixin ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/EditBusLayer ./mixins/FeatureEffectLayer ./mixins/FeatureLayerBase ./mixins/FeatureReductionLayer ./mixins/OperationalLayer ./mixins/OrderedLayer ./mixins/PortalLayer ./mixins/PublishableLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/featureLayerUtils ./support/FeatureTemplate ./support/FeatureType ./support/fieldProperties ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/serviceCapabilitiesUtils ./support/TimeInfo ./support/versionUtils ./support/source/DataLayerSource ../renderers/support/styleUtils ../rest/support/FeatureSet ../rest/support/Query ../support/popupUtils ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../webdoc/interfaces ../webdoc/support/opacityUtils".split(" "),
function(t,e,N,v,Ca,Da,Ea,Fa,Ga,Ha,Ia,O,I,P,Q,d,z,q,A,R,S,w,B,T,C,U,g,V,l,W,D,J,X,Y,Z,K,aa,ba,ca,da,ea,fa,ha,ia,ja,ka,la,ma,na,oa,pa,E,r,k,L,M,qa,F,ra,G,sa,ta,ua,va,wa,xa,ya,za,Aa,x,Ba){function y(a,b){return new q("layer:unsupported",`Layer (${a.title}, ${a.id}) of type '${a.declaredClass}' ${b}`,{layer:a})}function H(a,b,c){a=!!c?.writeLayerSchema;return{enabled:a,ignoreOrigin:a}}const u=a=>Object.freeze(Object.defineProperty({__proto__:null,default:a},Symbol.toStringTag,{value:"Module"}));v=qa.defineFieldProperties();
d=class extends ha.FeatureLayerBase(ia.FeatureReductionLayer(fa.FeatureEffectLayer(ma.PublishableLayer(ea.EditBusLayer(ca.BlendLayer(ka.OrderedLayer(pa.TemporalLayer(oa.ScaleRangeLayer(na.RefreshableLayer(ba.ArcGISService(ja.OperationalLayer(la.PortalLayer(S.MultiOriginJSONMixin(da.CustomParametersMixin(aa.APIKeyMixin(d.ClonableMixin(Z))))))))))))))))){constructor(...a){super(...a);this.geometryType=this.fullExtent=this.formTemplate=this.fieldsIndex=this.fields=this.dynamicDataSource=this.displayField=
this.copyright=this.charts=this.attributeTableTemplate=null;this.hasZ=this.hasM=void 0;this.infoFor3D=null;this.isTable=!1;this.labelsVisible=!0;this.labelingInfo=null;this.legendEnabled=!0;this.path=this.outFields=this.objectIdField=null;this.popupEnabled=!0;this.resourceInfo=this.popupTemplate=null;this.screenSizePerspectiveEnabled=!0;this.spatialReference=Y.WGS84;this.subtypeCode=null;this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]);this.title=
this.timeInfo=this.templates=null;this.sublayerTitleMode="item-title";this.type="feature";this.types=this.typeIdField=null;this.visible=!0;this._debouncedSaveOperations=B.debounce(async(b,c,f)=>{const {save:h,saveAs:m}=await new Promise((n,p)=>t(["./save/featureLayerUtils"],n,p));switch(b){case x.SaveOperationType.SAVE:return h(this,c);case x.SaveOperationType.SAVE_AS:return m(this,f,c)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(a,b){return"string"===typeof a?{url:a,...b}:a}load(a){const b=
null!=a?a.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(b).then(f=>this.initLayerProperties(f))),Promise.resolve(this);const c=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},a).catch(B.throwIfAbortError).then(async()=>{if(this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)){const f=await this._fetchFirstValidLayerId(b);null!=f&&(this.layerId=f)}if(!this.url&&!this._hasMemorySource())throw new q("feature-layer:missing-url-or-source",
"Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(b))}).then(()=>k.ensureLayerCredential(this,"load",a));this.addResolvingPromise(c);return Promise.resolve(this)}warnInvisibleDrapedSymbols(){"on-the-ground"===this.elevationInfo?.mode&&"simple"===this.renderer?.type&&"polygon-3d"===this.renderer.symbol?.type&&this.renderer.symbol.symbolLayers.some(a=>"fill"!==a.type||null==a.material?!1:!a.material.color||a.material.color.a*
this.opacity<Aa.alphaCutoff?(this.loadWarnings.push(new U("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0):!1)}readCapabilities(a,b){b=b.layerDefinition||b;return sa.getFeatureLayerCapabilities(b,this.url)}get createQueryVersion(){this.commitProperty("definitionExpression");this.commitProperty("dynamicDataSource");this.commitProperty("timeExtent");this.commitProperty("timeOffset");this.commitProperty("geometryType");
this.commitProperty("gdbVersion");this.commitProperty("historicMoment");this.commitProperty("returnZ");this.commitProperty("capabilities");this.commitProperty("returnM");return(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&!this.capabilities?.operations.supportsEditing?!1:this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges}set editingEnabled(a){this._overrideIfSome("editingEnabled",a)}readEditingEnabled(a,
b){return this._readEditingEnabled(b,!1)}readEditingEnabledFromWebMap(a,b,c){return this._readEditingEnabled(b,!0,c)}writeEditingEnabled(a,b){this._writeEditingEnabled(a,b,!1)}writeEditingEnabledToWebMap(a,b,c,f){this._writeEditingEnabled(a,b,!0,f)}get effectiveEditingEnabled(){return k.computeEffectiveEditingEnabled(this)}readIsTable(a,b){b=b?.layerDefinition??b;return"Table"===b.type||!b.geometryType}writeIsTable(a,b,c,f){f?.writeLayerSchema&&w.setDeepValue(c,a?"Table":"Feature Layer",b)}readGlobalIdField(a,
b){return k.readGlobalIdField(b.layerDefinition||b)}readObjectIdField(a,b){return k.readObjectIdField(b.layerDefinition||b)}get parsedUrl(){const a=C.urlToObject(this.url);null!=a&&(null!=this.dynamicDataSource?a.path=C.join(a.path,"dynamicLayer"):null!=this.layerId&&(a.path=C.join(a.path,this.layerId.toString())));return a}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(a){F.fixRendererFields(a,this.fieldsIndex);this._set("renderer",a)}readRenderer(a,b,c){b=b.layerDefinition||
b;return(a=b.drawingInfo?.renderer)?((a=O.read(a,b,c)??void 0)||R.getLogger(this).error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c}),a):k.createDefaultRenderer(b,c)}set source(a){const b=this._get("source");b!==a&&(b&&b instanceof z&&this._resetMemorySource(b),a&&a instanceof z&&this._initMemorySource(a),this._set("source",a))}castSource(a){return a?Array.isArray(a)||a instanceof z?new K.MemorySource({layer:this,items:a}):a:null}readSource(a,b){a=xa.fromJSON(b.featureSet);
return new K.MemorySource({layer:this,items:a?.features??[]})}readTemplates(a,b){b=b.editFieldsInfo;const c=b?.editorField;a=a?.map(f=>L.fromJSON(f));this._fixTemplates(a,b?.creatorField);this._fixTemplates(a,c);return a}readTitle(a,b){a=b.layerDefinition?.name??b.name;b=b.title||b.layerDefinition?.title;if(a){b=this.portalItem?.title;if("item-title"===this.sublayerTitleMode)return this.url?E.titleFromUrlAndName(this.url,a):a;if(!a&&this.url){const c=E.parse(this.url);null!=c&&(a=c.title)}if(!a)return;
"item-title-and-service-name"===this.sublayerTitleMode&&b&&b!==a&&(a=b+" - "+a);return E.cleanTitle(a)}if("item-title"===this.sublayerTitleMode&&b)return b}readTitleFromWebMap(a,b){return b.title||b.layerDefinition?.name}readTypeIdField(a,b){b=b.layerDefinition||b;let c=b.typeIdField;c&&b.fields&&(c=c.toLowerCase(),a=b.fields.find(f=>f.name.toLowerCase()===c))&&(c=a.name);return c}readTypes(a,b){b=b.layerDefinition||b;a=b.types;b=b.editFieldsInfo;const c=b?.creatorField,f=b?.editorField;return a?.map(h=>
{h=M.fromJSON(h);this._fixTemplates(h.templates,c);this._fixTemplates(h.templates,f);return h})}readVisible(a,b){if(null!=b.layerDefinition?.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility}async addAttachment(a,b){a=await k.addAttachment(this,a,b,"FeatureLayer");this.lastEditsEventDate=new Date;return a}async updateAttachment(a,b,c){a=await k.updateAttachment(this,a,b,c,"FeatureLayer");this.lastEditsEventDate=new Date;return a}async applyEdits(a,
b){return k.applyEdits(this,a,b)}async uploadAssets(a,b){return k.uploadAssets(this,a,b)}on(a,b){return super.on(a,b)}createPopupTemplate(a){return za.createPopupTemplate(this,a)}async createGraphicsSource(a){if(this._hasMemorySource()&&this.source)return this.source.load({signal:a});const {default:b}=await B.whenOrAbort(new Promise((c,f)=>t(["./graphics/sources/FeatureLayerSource"],h=>c(u(h)),f)),a);return(new b({layer:this,supportedSourceTypes:this.supportedSourceTypes})).load({signal:a})}createQuery(){const a=
k.createQuery(this);a.dynamicDataSource=this.dynamicDataSource;const b=T.sqlAnd(this.definitionExpression,null!=this.subtypeCode?`${this.subtypeField} = ${this.subtypeCode}`:null);a.where=b||"1\x3d1";return a}async deleteAttachments(a,b){a=await k.deleteAttachments(this,a,b,"FeatureLayer");this.lastEditsEventDate=new Date;return a}async fetchRecomputedExtents(a){return k.fetchRecomputedExtents(this,a,"FeatureLayer")}getFeatureType(a){return k.getFeatureType(this.types,this.typeIdField,a)}getFieldDomain(a,
b){var c=b?.feature,f=!!this.subtypes?.length;if(f&&!b?.excludeImpliedDomains){const h=k.computeDomainFromSubtypes(this,a);if(h)return h}if(f=f&&k.getFeatureSubtype(this,c))return b=f?.domains?.[a],"inherited"===b?.type?this._getLayerDomain(a):b;f=this.getFeatureType(c);c=this._getLayerDomain(a);return f&&(f=f.domains&&f.domains[a])&&"inherited"!==f?.type?f:c?c:!b?.excludeImpliedDomains&&(a=k.computeDomainFromTypes(this,a))?a:null}getField(a){return this.fieldsIndex.get(a)}async queryAttachments(a,
b){return k.queryAttachments(this,a,b,"FeatureLayer")}async queryFeatures(a,b){const c=await this.load();a=await c.source.queryFeatures(ya.from(a)??c.createQuery(),b);if(a?.features)for(const f of a.features)f.layer=f.sourceLayer=c;return a}async queryObjectIds(a,b){return k.queryObjectIds(this,a,b,"FeatureLayer")}async queryFeatureCount(a,b){return k.queryFeatureCount(this,a,b,"FeatureLayer")}async queryExtent(a,b){return k.queryExtent(this,a,b,"FeatureLayer")}async queryRelatedFeatures(a,b){return k.queryRelatedFeatures(this,
a,b,"FeatureLayer")}async queryRelatedFeaturesCount(a,b){return k.queryRelatedFeaturesCount(this,a,b,"FeatureLayer")}async queryTopFeatures(a,b){const {source:c,capabilities:f}=await this.load();if(!c.queryTopFeatures||!f?.query?.supportsTopFeaturesQuery)throw new q("FeatureLayer","Layer source does not support queryTopFeatures capability");const h=await new Promise((m,n)=>t(["../rest/support/TopFeaturesQuery"],p=>m(u(p)),n));a=await c.queryTopFeatures(h.default.from(a),b);if(a?.features)for(const m of a.features)m.layer=
m.sourceLayer=this;return a}async queryBins(a,b){const {source:c,capabilities:f}=await this.load();if(!c.queryBins||!f?.operations?.supportsQueryBins)throw new q("FeatureLayer","Layer source does not support queryBins capability");k.validateBinsQuery(a,f,"FeatureLayer");const h=await new Promise((m,n)=>t(["../rest/support/BinsQuery"],p=>m(u(p)),n));a=await c.queryBins(h.default.from(a),b);if(a.features)for(const m of a.features)m.layer=m.sourceLayer=this;return a}async queryTopObjectIds(a,b){const {source:c,
capabilities:f}=await this.load();if(!c.queryTopObjectIds||!f?.query.supportsTopFeaturesQuery)throw new q("FeatureLayer","Layer source does not support queryTopObjectIds capability");const h=await new Promise((m,n)=>t(["../rest/support/TopFeaturesQuery"],p=>m(u(p)),n));return c.queryTopObjectIds(h.default.from(a),b)}async queryTopFeaturesExtent(a,b){const {source:c,capabilities:f}=await this.load();if(!c.queryTopExtents||!f?.query?.supportsTopFeaturesQuery)throw new q("FeatureLayer","Layer source does not support queryTopExtents capability");
const h=await new Promise((m,n)=>t(["../rest/support/TopFeaturesQuery"],p=>m(u(p)),n));return c.queryTopExtents(h.default.from(a),b)}async queryTopFeatureCount(a,b){const {source:c,capabilities:f}=await this.load();if(!c.queryTopCount||!f?.query?.supportsTopFeaturesQuery)throw new q("FeatureLayer","Layer source does not support queryFeatureCount capability");const h=await new Promise((m,n)=>t(["../rest/support/TopFeaturesQuery"],p=>m(u(p)),n));return c.queryTopCount(h.default.from(a),b)}read(a,b){const c=
a.featureCollection;if(c||"Feature Collection"===a.type)this.resourceInfo=a;if(c){const f=c.layers;f&&1===f.length&&(super.read(f[0],b),null!=c.showLegend&&super.read({showLegend:c.showLegend},b))}super.read(a,b);b&&"service"===b.origin&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(a,b){b={...b,origin:b?.origin??void 0,writeLayerSchema:b?.writeLayerSchema??this._hasMemorySource()};const {origin:c,
layerContainerType:f,messages:h}=b;if(this.dynamicDataSource)return h?.push(y(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(("web-map"===c||"web-scene"===c)&&"tables"!==f)return h?.push(y(this,`a table source can only be written to tables, not ${f}`)),null;if(this._hasMemorySource())return h?.push(y(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&("web-map"===
c||"web-scene"===c)&&"tables"===f)return h?.push(y(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(a,b)}clone(){if(this._hasMemorySource())throw new q("FeatureLayer",`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(a){return this.loaded?"memory"===this.source?.type?!0:ua.serviceSupportsSpatialReference(this,a):!1}async save(a){return this._debouncedSaveOperations(x.SaveOperationType.SAVE,
a)}async saveAs(a,b){return this._debouncedSaveOperations(x.SaveOperationType.SAVE_AS,b,a)}_readEditingEnabled(a,b,c){let f=a.layerDefinition?.capabilities;if(f)return this._hasEditingCapability(f);f=a.capabilities;if(b&&"web-map"===c?.origin&&!this._hasMemorySource()&&f)return this._hasEditingCapability(f)}_hasEditingCapability(a){return a.toLowerCase().split(",").map(b=>b.trim()).includes("editing")}_writeEditingEnabled(a,b,c,f){a||(a=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query",
w.setDeepValue("layerDefinition.capabilities",a,b),c&&!f?.writeLayerSchema&&(b.capabilities=a))}_getLayerDomain(a){return(a=this.fieldsIndex.get(a))?a.domain:null}_fetchFirstValidLayerId(a){return P(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:a}).then(b=>{if(b=b.data)return this.findFirstValidLayerId(b)})}async initLayerProperties(a){this._set("source",a);a.sourceJSON&&(this.sourceJSON=a.sourceJSON,this.read(a.sourceJSON,{origin:"service",portalItem:this.portalItem,
portal:this.portalItem?.portal,url:this.parsedUrl}));this._verifySource();this._verifyFields();F.fixRendererFields(this.renderer,this.fieldsIndex);F.fixTimeInfoFields(this.timeInfo,this.fieldsIndex);return wa.loadStyleRenderer(this,{origin:"service"})}async hasDataChanged(){return k.hasDataChanged(this)}async fetchPublishingStatus(){const a=this.source;return a?.fetchPublishingStatus?a.fetchPublishingStatus():"unavailable"}_verifyFields(){const a=this.parsedUrl?.path??"undefined";this.objectIdField||
console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||-1!==a.search(/\/FeatureServer\//i)||this.fields?.some(b=>"geometry"===b.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")}_fixTemplates(a,b){a&&a.forEach(c=>{(c=c.prototype?.attributes)&&b&&delete c[b]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new q("feature-layer:mixed-source-and-url",
"FeatureLayer cannot be created with both an in-memory source and a url");}else if(!this.url)throw new q("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");}_initMemorySource(a){a.forEach(b=>{b.layer=this;b.sourceLayer=this});this.addHandles([a.on("after-add",b=>{b.item.layer=this;b.item.sourceLayer=this}),a.on("after-remove",b=>{b.item.layer=null;b.item.sourceLayer=null})],"fl-source")}_resetMemorySource(a){a.forEach(b=>{b.layer=null;b.sourceLayer=
null});this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(a){if(Array.isArray(a.layers)&&0<a.layers.length)return a.layers[0].id;if(Array.isArray(a.tables)&&0<a.tables.length)return a.tables[0].id}};e.__decorate([g.property(r.attributeTableTemplate)],d.prototype,"attributeTableTemplate",void 0);e.__decorate([l.reader("service","capabilities")],d.prototype,"readCapabilities",null);e.__decorate([g.property({json:{origins:{"web-scene":{write:!1}},
write:!0}})],d.prototype,"charts",void 0);e.__decorate([g.property({readOnly:!0})],d.prototype,"createQueryVersion",null);e.__decorate([g.property({json:{read:{source:"layerDefinition.copyrightText"}}})],d.prototype,"copyright",void 0);e.__decorate([g.property({json:{read:{source:"layerDefinition.displayField"}}})],d.prototype,"displayField",void 0);e.__decorate([g.property({types:Q.symbolTypes,readOnly:!0})],d.prototype,"defaultSymbol",void 0);e.__decorate([g.property({type:va.DataLayerSource})],
d.prototype,"dynamicDataSource",void 0);e.__decorate([g.property({type:Boolean})],d.prototype,"editingEnabled",null);e.__decorate([l.reader(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],d.prototype,"readEditingEnabled",null);e.__decorate([l.reader("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],d.prototype,"readEditingEnabledFromWebMap",null);e.__decorate([D.writer(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],
d.prototype,"writeEditingEnabled",null);e.__decorate([D.writer("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],d.prototype,"writeEditingEnabledToWebMap",null);e.__decorate([g.property({readOnly:!0})],d.prototype,"effectiveEditingEnabled",null);e.__decorate([g.property({...v.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:H}}}}})],d.prototype,
"fields",void 0);e.__decorate([g.property(v.fieldsIndex)],d.prototype,"fieldsIndex",void 0);e.__decorate([g.property({type:X,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"formTemplate",void 0);e.__decorate([g.property({json:{read:{source:"layerDefinition.extent"}}})],d.prototype,"fullExtent",void 0);e.__decorate([g.property({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:H,writer(a,b,c){(a=a?k.geometryTypeKebabDict.toJSON(a):
null)&&w.setDeepValue(c,a,b)}}}},read:{source:"layerDefinition.geometryType",reader:k.geometryTypeKebabDict.read}}})],d.prototype,"geometryType",void 0);e.__decorate([g.property({json:{read:{source:"layerDefinition.hasM"}}})],d.prototype,"hasM",void 0);e.__decorate([g.property({json:{read:{source:"layerDefinition.hasZ"}}})],d.prototype,"hasZ",void 0);e.__decorate([g.property(r.id)],d.prototype,"id",void 0);e.__decorate([g.property({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],d.prototype,
"infoFor3D",void 0);e.__decorate([g.property({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],d.prototype,"isTable",void 0);e.__decorate([l.reader("service","isTable",["type","geometryType"]),l.reader("isTable",["layerDefinition.type","layerDefinition.geometryType"])],d.prototype,"readIsTable",null);e.__decorate([D.writer("web-map","isTable")],d.prototype,"writeIsTable",null);e.__decorate([g.property(r.labelsVisible)],d.prototype,"labelsVisible",void 0);e.__decorate([g.property({type:[ra],
json:{origins:{service:{name:"drawingInfo.labelingInfo",read:G.reader,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:G.reader,write:{enabled:!0,layerContainerTypes:J.excludeTables}}},name:"layerDefinition.drawingInfo.labelingInfo",read:G.reader,write:!0}})],d.prototype,"labelingInfo",void 0);e.__decorate([g.property((()=>{const a=A.clone(r.opacityDrawingInfo);a.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(b,c,f){w.setDeepValue(f,
Ba.opacityToTransparency(b),c)}}};return a})())],d.prototype,"opacity",void 0);e.__decorate([g.property(r.legendEnabled)],d.prototype,"legendEnabled",void 0);e.__decorate([g.property({type:["show","hide"],json:(()=>{const a=A.clone(r.listMode.json);a.origins["portal-item"]={read:!1,write:!1};return a})()})],d.prototype,"listMode",void 0);e.__decorate([l.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],d.prototype,"readGlobalIdField",null);e.__decorate([g.property({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",
overridePolicy:H}}}}})],d.prototype,"objectIdField",void 0);e.__decorate([l.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],d.prototype,"readObjectIdField",null);e.__decorate([g.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],d.prototype,"operationalLayerType",void 0);e.__decorate([g.property(v.outFields)],d.prototype,"outFields",void 0);e.__decorate([g.property({readOnly:!0})],d.prototype,"parsedUrl",null);e.__decorate([g.property({type:String,
json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],d.prototype,"path",void 0);e.__decorate([g.property(r.popupEnabled)],d.prototype,"popupEnabled",void 0);e.__decorate([g.property({type:N,json:{name:"popupInfo",write:!0}})],d.prototype,"popupTemplate",void 0);e.__decorate([g.property({readOnly:!0})],d.prototype,"defaultPopupTemplate",null);e.__decorate([g.property({types:I.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:I.webSceneRendererTypes,
name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:J.excludeTables,overridePolicy(a,b,c){return{ignoreOrigin:c?.writeLayerSchema}}}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy(a,b,c){return{ignoreOrigin:c?.writeLayerSchema}}}}})],d.prototype,"renderer",null);e.__decorate([l.reader("service","renderer",["drawingInfo.renderer","defaultSymbol"]),l.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],d.prototype,"readRenderer",
null);e.__decorate([g.property()],d.prototype,"resourceInfo",void 0);e.__decorate([g.property((()=>{const a=A.clone(r.screenSizePerspectiveEnabled);a.json.origins["portal-item"]={read:!1,write:!1};return a})())],d.prototype,"screenSizePerspectiveEnabled",void 0);e.__decorate([g.property({clonable:!1})],d.prototype,"source",null);e.__decorate([V.cast("source")],d.prototype,"castSource",null);e.__decorate([l.reader("portal-item","source",["featureSet"]),l.reader("web-map","source",["featureSet"])],
d.prototype,"readSource",null);e.__decorate([g.property({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],d.prototype,"spatialReference",void 0);e.__decorate([g.property({type:Number})],d.prototype,"subtypeCode",void 0);e.__decorate([g.property({type:[L]})],d.prototype,"templates",void 0);e.__decorate([l.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],d.prototype,"readTemplates",null);e.__decorate([g.property({type:ta})],d.prototype,"timeInfo",void 0);
e.__decorate([g.property()],d.prototype,"title",void 0);e.__decorate([l.reader("service","title",["name"]),l.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],d.prototype,"readTitle",null);e.__decorate([l.reader("web-map","title",["layerDefinition.name","title"])],d.prototype,"readTitleFromWebMap",null);e.__decorate([g.property({type:String})],d.prototype,"sublayerTitleMode",void 0);e.__decorate([g.property({json:{read:!1}})],d.prototype,"type",void 0);e.__decorate([g.property({type:String})],
d.prototype,"typeIdField",void 0);e.__decorate([l.reader("service","typeIdField"),l.reader("typeIdField",["layerDefinition.typeIdField"])],d.prototype,"readTypeIdField",null);e.__decorate([g.property({type:[M]})],d.prototype,"types",void 0);e.__decorate([l.reader("service","types",["types"]),l.reader("types",["layerDefinition.types"])],d.prototype,"readTypes",null);e.__decorate([g.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],d.prototype,
"visible",void 0);e.__decorate([l.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],d.prototype,"readVisible",null);return d=e.__decorate([W.subclass("esri.layers.FeatureLayer")],d)});