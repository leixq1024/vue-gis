// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.31/esri/copyright.txt for details.
//>>built
require({cache:{"esri/WebDocument2D":function(){define("require ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/arrayUtils ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/read ./geometry/SpatialReference ./portal/PortalItem ./portal/support/portalItemUtils ./support/MapFloorInfo ./time/TimeExtent ./webdoc/interfaces ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/webdocLoadUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k,C,q,B,x,u,y,F,J,f,w,D,A,z,m,G,H,L,K,I,O,N,Q,W,X,R,P,U){const T=p.ofType(X),Y=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Z=m.typeKeyword.JSAPI;d=class extends C.MultiOriginJSONMixin(h.LoadableMixin(q.EsriPromiseMixin(d))){constructor(g){super(g);this._isAuthoringAppVersionSetByUser=this._isAuthoringAppSetByUser=!1;this._updateFromPromise=this._thumbnailFilename=null;this.resourceReferences={portalItem:null,paths:[]};
this.applicationProperties=null;this.bookmarks=new T;this.floorInfo=null;this.initialViewProperties=new R;this.widgets=this.sourceVersion=this.portalItem=null;this._debouncedSaveOperations=B.debounce(async(v,E,M)=>{const {save:S,saveAs:V}=await new Promise((aa,ba)=>b(["./webdoc/support/webdocSaveUtils"],aa,ba));switch(v){case L.SaveOperationType.SAVE:return S(this.context,this,E);case L.SaveOperationType.SAVE_AS:return V(this.context,this,M,E)}});this.authoringApp=this.authoringAppVersion=null;this._isAuthoringAppSetByUser=
this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=k.destroyMaybe(this.portalItem)}initialize(){this.when().catch(g=>{t.getLogger(this).error("#load()","Failed to load web map",g)});if(this.resourceInfo){let g;try{g=this._validateJSON(this.resourceInfo)}catch(v){this.addResolvingPromise(Promise.reject(v));return}this.read(g)}}set authoringApp(g){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",g)}writeAuthoringApp(g,v){v.authoringApp=g&&this._isAuthoringAppSetByUser?g:Z}set authoringAppVersion(g){this._isAuthoringAppVersionSetByUser=
!0;this._set("authoringAppVersion",g)}writeAuthoringAppVersion(g,v){v.authoringAppVersion=g&&this._isAuthoringAppVersionSetByUser?g:c.version}readInitialViewProperties(g,v){g=new R;v.background&&(g.background=U.fromJSON(v.background));var E=v.initialState?.timeExtent;E&&(g.timeExtent=H.fromArray(E));if(E=v.initialState?.viewpoint)E.rotation&&P.Version.parse(v.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===v.authoringApp&&(E.rotation*=-1),g.viewpoint=e.fromJSON(E);v.mapRangeInfo&&(g.rangeInfo=
K.fromJSON(v.mapRangeInfo));v.spatialReference&&(g.spatialReference=A.fromJSON(v.spatialReference));v.timeZone&&(g.timeZone=v.timeZone);return g}writeInitialViewProperties(g,v,E,M){if(g){g.background?.color&&(v.background=g.background.write({},M));var {timeExtent:S,viewpoint:V}=g;if(V||S)E={},V&&(E.viewpoint=V.write({},M)),S&&(E.timeExtent=S.toArray()),v.initialState=E;g.rangeInfo&&(v.mapRangeInfo=g.rangeInfo.toJSON(M));g.spatialReference&&(v.spatialReference=g.spatialReference.write({},M));v.timeZone=
g.timeZone}}writeLayers(g,v,E,M){v[E]=this._writeLayers(g,M,"operational-layers")}readSourceVersion(g,v){const [E,M]=v.version.split(".");return new P.Version(parseInt(E,10),parseInt(M,10))}writeSourceVersion(g,v,E){v[E]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(g,v,E,M){g=this._writeLayers(g,M,"tables");g.length&&(v[E]=g)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(g){g?(this._override("thumbnailUrl",g),this._thumbnailFilename=
this._generateCustomThumbnailFilename(g)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(g){this.addResolvingPromise(N.loadFromSource(this.context,this));return Promise.resolve(this)}loadAll(){return n.loadAll(this,g=>{g(this.ground,this.basemap,this.layers,this.tables)})}read(g,v){v={...v,origin:this.context.origin};const E=this._getAuthoringPropsState();D.readLoadable(this,g,M=>super.read(g,M),v);this._restoreAuthoringPropsFromState(E)}write(g,v){if("loaded"!==
this.loadStatus)throw g=new l("webmap:not-loaded","Web map must be loaded before it can be serialized"),t.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),g;this._removeDanglingLayerRefs();v={...v,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this};return super.write(g,v)}async save(g){return this._debouncedSaveOperations(L.SaveOperationType.SAVE,g)}async saveAs(g,v){return this._debouncedSaveOperations(L.SaveOperationType.SAVE_AS,
v,g)}async updateFrom(g,v){this._updateFromPromise=g=this._updateFromInternal(g,v);await g;g===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(g){const v=this.resourceInfo;return this._collectAllLayersJSON([...(v?.baseMap?.baseMapLayers||[]),...(v?.operationalLayers||[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(E=>E.id===g.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,
filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let g=this.thumbnailUrl;g&&=this._isOverridden("thumbnailUrl")?g:u.addQueryParameter(g,"w","8192");return{thumbnailUrl:g,filename:this._thumbnailFilename}}restoreThumbnailFromState(g){this.thumbnailUrl=g.thumbnailUrl;this._thumbnailFilename=g.filename}_collectAllLayersJSON(g){return g.reduce((v,E)=>{v.push(E);"GroupLayer"===E.layerType&&(v=v.concat(this._collectAllLayersJSON(E.layers||[])));return v},[])}_writeLayers(g,
v,E){v={...v,layerContainerType:E};return g.map(M=>Q.getLayerJSON(M,"tables"===E?null:this.getLayerJSONFromResourceInfo(M),v)).filter(r.isSome).toArray()}_validateJSON(g){const v=P.Version.parse(g.version||"","webmap");this.context.currentVersion.validate(v);g.version=`${v.major}.${v.minor}`;return g}_removeDanglingLayerRefs(){var g=this.applicationProperties,v=g?.viewing?.search;const E=M=>this.allLayers.some(S=>S.id===M);v?.layers&&(v.layers=v.layers.filter(M=>E(M.id)));v?.tables&&(v.tables=v.tables.filter(M=>
this.tables.some(S=>S.id===M.id)));g&&(v=g.editing?.locationTracking,v?.info&&!E(v.info.layerId)&&(g.editing=null));(g=("presentation"in this?this.presentation:null)?.slides)&&g.forEach(M=>{M.visibleLayers&&(M.visibleLayers=M.visibleLayers.filter(S=>E(S.id)))})}async _updateFromInternal(g,v){v??={};await x.whenOnce(()=>g.ready);this._updateInitialViewProperties(g,v);if(g.map===this)for(const E of g.allLayerViews)"visible"in E&&"visible"in E.layer&&E._isOverridden("visible")&&(E.layer.visible=E.visible),
"featureEffect"in E&&"featureEffect"in E.layer&&E._isOverridden("featureEffect")&&(E.layer.featureEffect=E.featureEffect);await this._updateThumbnailUrl(g,v)}_updateInitialViewProperties(g,v){v.backgroundExcluded||(this.initialViewProperties.background=g.background?.clone());this.initialViewProperties.spatialReference=g.spatialReference?.clone();this.initialViewProperties.timeZone=g.timeZone;v.viewpointExcluded||(this.initialViewProperties.viewpoint=new e({rotation:g.rotation,scale:v.scalePreserved?
g.scale:null,targetGeometry:this._getViewExtent(g)}));if(!v.widgetsExcluded)for(const E of g.persistableViewModels)E.updateWebDocument(this)}_getViewExtent(g){const v=g.center.clone().normalize();g=g.extent.clone();const E=g.width/2;g.xmin=v.x-E;g.xmax=v.x+E;return g}async _updateThumbnailUrl(g,v){v.thumbnailExcluded||(v=O.getOptimalThumbnailSize(g,v.thumbnailSize),g=await g.takeScreenshot({format:"png",width:v.width,height:v.height}),this._setAutoGeneratedThumbnail(g.dataUrl))}_setAutoGeneratedThumbnail(g){this.thumbnailUrl=
g;this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null}_generateCustomThumbnailFilename(g){if(u.isDataProtocol(g)){g=(g=u.dataComponents(g)?.mediaType)&&Y.get(g.toLowerCase())||null;const v=`thumbnail${Date.now()}`;return g?`${v}.${g}`:v}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,
isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(g){g.isAuthoringAppSetByUser?this.authoringApp=g.authoringApp:this._isAuthoringAppSetByUser=!1;g.isAuthoringAppVersionSetByUser?this.authoringAppVersion=g.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};a.__decorate([y.property()],d.prototype,"_updateFromPromise",void 0);a.__decorate([y.property({type:W,json:{write:!0}})],d.prototype,"applicationProperties",void 0);a.__decorate([y.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],d.prototype,"authoringApp",null);a.__decorate([w.writer("authoringApp")],d.prototype,"writeAuthoringApp",null);a.__decorate([y.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],d.prototype,"authoringAppVersion",null);a.__decorate([w.writer("authoringAppVersion")],d.prototype,"writeAuthoringAppVersion",null);a.__decorate([y.property({type:T,json:{write:{overridePolicy(g){return{enabled:!!(g&&0<g.length),ignoreOrigin:!0}}}}})],d.prototype,
"bookmarks",void 0);a.__decorate([y.property({type:G,json:{name:"mapFloorInfo",write:!0}})],d.prototype,"floorInfo",void 0);a.__decorate([y.property({type:R,nonNullable:!0,json:{read:{source:"background initialState.timeExtent initialState.viewpoint mapRangeInfo spatialReference timeZone".split(" ")},write:{ignoreOrigin:!0,target:{background:{type:U},"initialState.timeExtent":{type:H},"initialState.viewpoint":{type:e},mapRangeInfo:{type:K},spatialReference:{type:A},"timeZone:":{type:String}}}}})],
d.prototype,"initialViewProperties",void 0);a.__decorate([J.reader("initialViewProperties")],d.prototype,"readInitialViewProperties",null);a.__decorate([w.writer("initialViewProperties")],d.prototype,"writeInitialViewProperties",null);a.__decorate([y.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],d.prototype,"layers",void 0);a.__decorate([w.writer("layers")],d.prototype,"writeLayers",null);a.__decorate([y.property({type:z})],d.prototype,"portalItem",void 0);a.__decorate([y.property()],
d.prototype,"resourceInfo",void 0);a.__decorate([y.property({readOnly:!0,type:P.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],d.prototype,"sourceVersion",void 0);a.__decorate([J.reader("sourceVersion")],d.prototype,"readSourceVersion",null);a.__decorate([w.writer("sourceVersion")],d.prototype,"writeSourceVersion",null);a.__decorate([y.property({json:{read:!1,write:{ignoreOrigin:!0}}})],d.prototype,"tables",void 0);a.__decorate([w.writer("tables")],
d.prototype,"writeTables",null);a.__decorate([y.property()],d.prototype,"thumbnailUrl",null);a.__decorate([y.property()],d.prototype,"updatingFromView",null);a.__decorate([y.property({type:I,json:{write:!0}})],d.prototype,"widgets",void 0);return d=a.__decorate([f.subclass("esri.WebDocument2D")],d)})},"esri/support/MapFloorInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,a,c,d,e,r,p,l,h,n){a=class extends a.JSONSupport{constructor(t){super(t);this.siteLayer=this.facilityLayer=this.levelLayer=null}};b.__decorate([c.property({type:h,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([c.property({type:l,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([c.property({type:n,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([p.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.sublayerId=this.siteIdField=this.nameField=this.layerId=this.facilityIdField=null}};b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,
"siteIdField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([p.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.verticalOrderField=this.sublayerId=this.shortNameField=this.longNameField=this.levelNumberField=this.levelIdField=this.layerId=this.facilityIdField=null}};b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",
void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);b.__decorate([c.property({type:String,
json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([p.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.sublayerId=this.siteIdField=
this.nameField=this.layerId=null}};b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([p.subclass("esri.layers.support.SiteLayerInfo")],
a)})},"esri/webdoc/RangeInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){var l;a=l=class extends a.JSONSupport{constructor(h){super(h);this.fullRangeExtent=this.currentRangeExtent=this.activeRange=null}clone(){return new l(c.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};
b.__decorate([d.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",void 0);b.__decorate([d.property({type:[Number],json:{write:!0}})],a.prototype,"currentRangeExtent",void 0);b.__decorate([d.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=l=b.__decorate([p.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(b,a,c,d,e,r,p,l,h,n){var t;a=t=class extends a.JSONSupport{constructor(k){super(k);this.floorFilter=this.timeSlider=this.range=null}clone(){return new t(c.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};b.__decorate([d.property({type:h,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([d.property({type:n,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=
t=b.__decorate([p.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){var l;a=l=class extends a.JSONSupport{constructor(h){super(h);this.pinnedLevels=this.minimized=this.longNames=this.enabled=!1;this.level=this.facility=this.site=null}clone(){return new l(c.clone({enabled:this.enabled,
longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};b.__decorate([d.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],
a.prototype,"minimized",void 0);b.__decorate([d.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([d.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([d.property({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([d.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],
a.prototype,"level",void 0);return a=l=b.__decorate([p.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p,l){var h;a=new a.JSONMap({slider:"slider",picker:"picker"});c=h=class extends c.JSONSupport{constructor(n){super(n);
this.stopInterval=this.numStops=this.interactionMode=null}clone(){return new h({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};b.__decorate([d.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},write:{isRequired:!0,writer:a.write}}})],c.prototype,"interactionMode",void 0);b.__decorate([d.property({type:e.Integer,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const n=
null!=this.stopInterval;return{enabled:!n,isRequired:!n}}}}})],c.prototype,"numStops",void 0);b.__decorate([d.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],c.prototype,"stopInterval",void 0);return c=h=b.__decorate([l.subclass("esri.webdoc.widgets.Range")],c)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../portal/timeUnitKebabDictionary ../../time/TimeExtent ../../time/TimeInterval".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k){var C;a=C=class extends a.JSONSupport{constructor(q){super(q);this.fullTimeExtent=this.currentTimeExtent=null;this.loop=!1;this.stops=this.stopInterval=this.stopDelay=this.numThumbs=this.numStops=null}readCurrentTimeExtent(q){return q?t.fromArray(q):void 0}writeCurrentTimeExtent(q,B,x){q&&d.setDeepValue(x,q.toArray(),B)}readFullTimeExtent(q,B){if(q=B.properties)return new t({start:null!=q.startTime?new Date(q.startTime):null,end:null!=q.endTime?new Date(q.endTime):
null})}writeFullTimeExtent(q,B){if(q){B=B.properties=B.properties||{};var x=q.end;q=q.start;x&&(B.endTime=null!=x?x.getTime():null);q&&(B.startTime=null!=q?q.getTime():null)}}readStopInterval(q,B,x){return q?k.fromJSON({value:q.interval,unit:q.units},x):null}writeStopInterval(q,B,x,u){q&&(q=q.toJSON(u),d.setDeepValue("properties.timeStopInterval",{interval:q.value,units:q.unit},B))}readStops(q){return q?.length?q.map(B=>new Date(B)):null}writeStops(q,B,x){q?.length&&d.setDeepValue(x,q.map(u=>u.getTime()),
B)}clone(){return new C(c.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};b.__decorate([e.property({type:t,json:{type:[[r.Integer,r.Null]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],a.prototype,"currentTimeExtent",void 0);b.__decorate([p.reader("currentTimeExtent")],a.prototype,
"readCurrentTimeExtent",null);b.__decorate([h.writer("currentTimeExtent")],a.prototype,"writeCurrentTimeExtent",null);b.__decorate([e.property({type:t,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],a.prototype,"fullTimeExtent",void 0);b.__decorate([p.reader("fullTimeExtent")],a.prototype,"readFullTimeExtent",null);b.__decorate([h.writer("fullTimeExtent")],a.prototype,"writeFullTimeExtent",
null);b.__decorate([e.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],a.prototype,"loop",void 0);b.__decorate([e.property({type:r.Integer,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var q=!!this.stops?.length;q=!(this.stopInterval||q);return{enabled:q,isRequired:q}}}}})],a.prototype,"numStops",void 0);b.__decorate([e.property({type:[1,2],nonNullable:!0,json:{type:r.Integer,
read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],a.prototype,"numThumbs",void 0);b.__decorate([e.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],a.prototype,"stopDelay",void 0);b.__decorate([e.property({type:k,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:n.timeUnitKebabDictionary.jsonValues.filter(q=>
"esriTimeUnitsUnknown"!==q)}},overridePolicy(){const q=!!this.stops?.length;return{enabled:!q,isRequired:!(null!=this.numStops||q)}}}}})],a.prototype,"stopInterval",void 0);b.__decorate([p.reader("stopInterval")],a.prototype,"readStopInterval",null);b.__decorate([h.writer("stopInterval")],a.prototype,"writeStopInterval",null);b.__decorate([e.property({type:[Date],json:{type:[r.Integer],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&
!this.stopInterval}}}}})],a.prototype,"stops",void 0);b.__decorate([p.reader("stops")],a.prototype,"readStops",null);b.__decorate([h.writer("stops")],a.prototype,"writeStops",null);return a=C=b.__decorate([l.subclass("esri.webdoc.widgets.TimeSlider")],a)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(c,d){d=d||a;let {width:e,height:r}=d;d=e/r;1.5>d?r=e/1.5:1.5<d&&(e=1.5*r);e>c.width&&(r*=c.width/e,
e=c.width);r>c.height&&(e*=c.height/r,r=c.height);return{width:Math.round(e),height:Math.round(r)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/webdocLoadUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/Logger ../../geometry/support/webMercatorUtils ../../portal/Portal ../../portal/support/jsonContext ../../rest/geometryService/project ../../rest/support/ProjectParameters".split(" "),function(b,a,c,d,e,r,p,l,h,n){function t(x,
u,y){const F={context:{...y,layerContainerType:"operational-layers"}};x.portalItem&&(F.context.portal=x.portalItem.portal||p.getDefault());return(new Promise((J,f)=>b(["../../layers/support/layersCreator"],J,f))).then(({populateOperationalLayers:J})=>{const f=[];var w=u.operationalLayers;w?.length&&f.push(J(x.layers,w,F));w={...F,context:{...F.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const D=u.tables;D?.length&&f.push(J(x.tables,D,w));return Promise.allSettled(f).then(()=>
{})})}async function k(x,u,y){await y.load().catch(f=>{throw new d(`${x.name}:load-portal-item`,"Failed to load portal item",{error:f});});if(y.type!==x.itemType)throw new d(`${x.name}:invalid-portal-item`,`Invalid portal item type '${y.type}', expected '${x.itemType}'`,{type:y.type});var F=await y.fetchData();u.resourceInfo=F;const J=l.createForItemRead(y,x.origin);await C(x,u,F,J);u.resourceReferences={portalItem:y,paths:J.readResourcePaths};if(y=await q(u.initialViewProperties,y,e.getLogger(u)))F=
u.initialViewProperties?.clone()??x.createInitialViewProperties(),F.viewpoint=y,u.initialViewProperties=F}function C(x,u,y,F){const J=x.parseVersion(y.version||"",x.name);x.currentVersion.validate(J);y.version=`${J.major}.${J.minor}`;u.read(y,F);return t(u,y,F)}async function q(x,u,y){return x?.viewpoint?.targetGeometry?null:(x=await B(x,u,y))?new c({targetGeometry:x}):null}async function B(x,u,y){x=x?.spatialReference;const F=u?.extent;if(!x||!F)return null;if(x.isWGS84)return F.clone();if(x.isWebMercator)return r.geographicToWebMercator(F);
const {getGeometryServiceURL:J}=await new Promise((f,w)=>b(["../../portal/support/geometryServiceUtils"],f,w));try{const f=await J(u),w=new n({geometries:[F],outSpatialReference:x});return(await h.project(f,w))[0]}catch(f){y.error("Error projecting item's extent:",f)}return null}a.loadFromSource=function(x,u){return u.resourceInfo?t(u,u.resourceInfo,{origin:x.origin}):u.portalItem?.id?k(x,u,u.portalItem):Promise.resolve()};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports",
"../../core/urlUtils","../Portal"],function(b,a,c){function d(e,r){return{origin:r,url:a.urlToObject(e.itemUrl),portal:e.portal||c.getDefault(),portalItem:e}}b.createForItemRead=function(e,r){return{...d(e,r),readResourcePaths:[]}};b.createForItemWrite=function(e,r,p){const l=a.urlToObject(e.itemUrl);return{...d(e,r),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:l?{rootPath:l.path,writtenUrls:[]}:null,resources:p?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:
null}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(b,a,c,d,e,r,p){const l=c.ensureType(p);b.project=async function(h,n,t){n=l(n);h=e.parseUrl(h);const k={...h.query,f:"json",...n.toJSON()},C=n.outSpatialReference,q=d.getJsonType(n.geometries[0]);n=e.asValidOptions(k,
t);return a(h.path+"/project",n).then(({data:{geometries:B}})=>r.decodeGeometries(B,q,C))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils".split(" "),function(b,
a,c,d,e,r,p,l,h){a=class extends a.JSONSupport{constructor(n){super(n);this.geometries=[];this.transformForward=this.transformation=this.outSpatialReference=null}toJSON(){const n=this.geometries.map(C=>C.toJSON()),t=this.geometries[0],k={};k.outSR=h.srToRESTValue(this.outSpatialReference);k.inSR=h.srToRESTValue(t.spatialReference);k.geometries=JSON.stringify({geometryType:l.getJsonType(t),geometries:n});this.transformation&&(k.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(k.transformForward=this.transformForward);return k}};b.__decorate([c.property()],a.prototype,"geometries",void 0);b.__decorate([c.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([c.property()],a.prototype,"transformation",void 0);b.__decorate([c.property()],a.prototype,"transformForward",void 0);return a=b.__decorate([p.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/webmap/ApplicationProperties":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,a,c,d,e,r,p,l){var h;a=h=class extends a.JSONSupport{constructor(n){super(n);this.viewing=this.offline=this.editing=null}clone(){return new h(c.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};b.__decorate([d.property({json:{write:!0}})],a.prototype,"editing",void 0);b.__decorate([d.property({json:{write:!0}})],a.prototype,"offline",void 0);b.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,"viewing",void 0);return a=h=b.__decorate([p.subclass("esri.webmap.ApplicationProperties")],
a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(b,a,c,d,e,r,p,l){var h;a=h=class extends a.JSONSupport{constructor(n){super(n);this.search=null}clone(){return new h(c.clone({search:this.search}))}};b.__decorate([d.property({type:l,json:{write:!0}})],a.prototype,
"search",void 0);return a=h=b.__decorate([p.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k,C){var q;const B=a.ofType(k),x=a.ofType(C);a=q=class extends c.JSONSupport{constructor(u){super(u);this.enabled=this.addressSearchEnabled=!0;this.hintText=null;this.layers=new B;this.tables=new x}readAddressSearchEnabled(u){return!u}writeAddressSearchEnabled(u,y,F){y[F]=!u}clone(){return new q(d.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};b.__decorate([e.property({type:Boolean,
nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([l.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([n.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([e.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,
write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([e.property({type:B,json:{write:{overridePolicy:t.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([e.property({type:x,json:{read:!0,write:{overridePolicy:t.writeNonEmptyCollectionPolicy}}})],a.prototype,"tables",void 0);return a=q=b.__decorate([h.subclass("esri.webdoc.applicationProperties.Search")],
a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!!a?.length}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,c,d,e,r,p){var l;a=l=class extends a.JSONSupport{constructor(h){super(h);this.subLayer=this.id=this.field=null}clone(){return new l(c.clone({field:this.field,id:this.id,subLayer:this.subLayer}))}};b.__decorate([d.property({type:p,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([d.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([d.property({type:e.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=l=b.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchLayer")],
a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,c,d,e,r,p,l,h){var n;a=n=class extends a.JSONSupport{constructor(t){super(t);this.exactMatch=!1;this.type=this.name=null}clone(){return new n({exactMatch:this.exactMatch,
type:this.type,name:this.name})}};b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([p.enumeration(h.kebabDict)],a.prototype,"type",void 0);return a=n=b.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,a,c,d,e,r,p,l){var h;a=h=class extends a.JSONSupport{constructor(n){super(n);this.id=this.field=null}clone(){return new h(c.clone({field:this.field,id:this.id}))}};b.__decorate([d.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([d.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=h=b.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,c,d,e,r,p,l,h){var n;a=n=class extends a.JSONSupport{constructor(t){super(t);this.exactMatch=!1;this.type=this.name=null}clone(){return new n({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([p.enumeration(h.kebabDict)],a.prototype,"type",void 0);return a=n=b.__decorate([l.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webmap/Bookmark":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail ../webdoc/support/timeProperties".split(" "),function(b,a,
c,d,e,r,p,l,h,n,t,k,C,q,B){var x;d=x=class extends d.IdentifiableMixin(e.JSONSupport){constructor(u){super(u);this.name=null;this.thumbnail=new q.SlideThumbnail;this.timeExtent=null}castThumbnail(u){return"string"===typeof u?new q.SlideThumbnail({url:u}):C.ensureType(q.SlideThumbnail,u)}set viewpoint(u){const {targetGeometry:y,scale:F}=u;null!=y&&"point"===y.type&&null==F&&p.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",u);this._set("viewpoint",
u)}readViewpoint(u,y){const {extent:F,viewpoint:J}=y;return a.fromJSON(J||{targetGeometry:F})}writeViewpoint(u,y,F,J){if(u){var {targetGeometry:f}=u;null!=f&&"extent"!==f.type?J?.messages?J.messages.push(new c("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):p.getLogger(this).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(null!=f&&(y.extent=f.toJSON()),y[F]=u.toJSON())}}clone(){return new x(r.clone({name:this.name,
thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};b.__decorate([l.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],d.prototype,"name",void 0);b.__decorate([l.property({type:q.SlideThumbnail,json:{write:{overridePolicy(u){return{enabled:!(!u||!u.url)}}}}})],d.prototype,"thumbnail",void 0);b.__decorate([h.cast("thumbnail")],d.prototype,"castThumbnail",null);b.__decorate([l.property(B.timeExtent)],d.prototype,"timeExtent",void 0);b.__decorate([l.property({type:a,
nonNullable:!0,json:{write:!0}})],d.prototype,"viewpoint",null);b.__decorate([n.reader("viewpoint",["extent","viewpoint"])],d.prototype,"readViewpoint",null);b.__decorate([k.writer("viewpoint")],d.prototype,"writeViewpoint",null);return d=x=b.__decorate([t.subclass("esri.webmap.Bookmark")],d)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p,l,h){var n;b.SlideThumbnail=n=class extends c.JSONSupport{constructor(){super(...arguments);this.url=""}destroy(){this.url=""}get isSecureUrl(){return d.isHTTPSProtocol(this.url)}get isDataURI(){return d.isDataProtocol(this.url)}clone(){return new n({url:this.url})}};a.__decorate([e.property({type:String,json:{write:{isRequired:!0}}})],b.SlideThumbnail.prototype,"url",void 0);a.__decorate([e.property()],b.SlideThumbnail.prototype,"isSecureUrl",null);a.__decorate([e.property()],
b.SlideThumbnail.prototype,"isDataURI",null);b.SlideThumbnail=n=a.__decorate([h.subclass("esri.webdoc.support.SlideThumbnail")],b.SlideThumbnail);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/timeProperties":function(){define(["exports","../../core/Error","../../core/accessorSupport/ensureType","../../time/TimeExtent"],function(b,a,c,d){b.timeExtent={type:d,json:{read:{source:"timeExtent",reader:e=>e?Array.isArray(e)?d.fromArray(e):d.fromJSON(e):null},write:{writer:(e,
r,p,l)=>{e&&(e.isEmpty?l?.messages&&l.messages.push(new a("invalid-timeExtent","TimeExtent cannot be empty")):r[p]=e.toArray())},target:{timeExtent:{type:[[c.Integer,c.Null]]}}}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/Clonable ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../time/TimeExtent ../time/timeZoneUtils ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k,C,q){c=class extends d.ClonableMixin(c){constructor(B){super(B);this.timeExtent=this.spatialReference=this.rangeInfo=this.background=null;this.timeZone=k.system;this.viewpoint=null}};b.__decorate([e.property({type:q})],c.prototype,"background",void 0);b.__decorate([e.property({type:C})],c.prototype,"rangeInfo",void 0);b.__decorate([e.property({type:n})],c.prototype,"spatialReference",void 0);b.__decorate([e.property({type:t})],c.prototype,"timeExtent",void 0);b.__decorate([e.property({nonNullable:!0})],
c.prototype,"timeZone",void 0);b.__decorate([e.property({type:a})],c.prototype,"viewpoint",void 0);return c=b.__decorate([h.subclass("esri.webmap.InitialViewProperties")],c)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p,l){var h;c=h=class extends c.JSONSupport{constructor(n){super(n);
this.color=new a([0,0,0,1])}clone(){return new h(d.clone({color:this.color}))}};b.__decorate([e.property({type:a,json:{write:!0}})],c.prototype,"color",void 0);return c=h=b.__decorate([l.subclass("esri.webmap.background.ColorBackground")],c)})},"esri/webmap/Version":function(){define(["exports","../core/Version"],function(b,a){class c extends a.Version{constructor(d,e){super(d,e,"webmap")}}b.Version=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/networks/UtilityNetwork":function(){define("require ../chunks/tslib.es6 ../Graphic ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/TraceJobInfo ./support/typeUtils ../rest/support/Query".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k,C,q,B,x,u,y){async function F(f){const w=new y({where:"1\x3d1",outFields:["*"]});return(await n.queryAllJSON(f,w)).features}const J=f=>Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));e=class extends t{constructor(f){super(f);this.sharedNamedTraceConfigurations=[];this.type="utility";this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new q({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,
rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,
associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(f=>B.fromJSON(f))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(f=>f.domainNetworkName)||[]}get _utilityLayerList(){const f=new Set;this.dataElement?.domainNetworks?.map(w=>{w.edgeSources.map(D=>{f.add(D.layerId)});w.junctionSources.map(D=>{f.add(D.layerId)})});return f}async load(f){this.addResolvingPromise(super.load(f));
this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(f));return this}getTerminalConfiguration(f){let w=null,D=null;var A=f.layer;let z=null;if("feature"===A?.type){if(z=A.layerId,null===z)return null}else if("subtype-sublayer"===A?.type){if(z=A?.parent?.layerId??null,null===z)return null}else return null;A=f.attributes;if(null==A)return null;for(const H of Object.keys(A))"ASSETGROUP"===H.toUpperCase()&&(w=f.getAttribute(H)),"ASSETTYPE"===H.toUpperCase()&&(D=f.getAttribute(H));if(!this.dataElement)return null;
let m=null;f=this.dataElement.domainNetworks;for(var G of f)if(f=G.junctionSources?.find(H=>H.layerId===z))if(f=f.assetGroups?.find(H=>H.assetGroupCode===w))if(f=f.assetTypes?.find(H=>H.assetTypeCode===D)){m=f.terminalConfigurationId;break}return null!=m?(G=this.dataElement.terminalConfigurations?.find(H=>H.terminalConfigurationId===m))?B.fromJSON(G):null:null}getTierNames(f){return this.dataElement?.domainNetworks.find(w=>w.domainNetworkName===f)?.tiers.map(w=>w.name)||[]}async getRulesTable(){this._sharedRulesTable||
(this._sharedRulesTable=this._createRulesTable());return await this._sharedRulesTable}getTerminalById(f){if(!this.dataElement||null==f)return null;const w=this._terminalById.get(f);if(null!=w)return w;this.terminalConfigurations.forEach(D=>{D.terminals.forEach(A=>{this._terminalById.set(A.id,A)})});return this._terminalById.get(f)}isUtilityLayer(f){return"layerId"in f?this._utilityLayerList.has(f.layerId)&&(f.url?.startsWith(this.featureServiceUrl)??!1):!1}async queryAssociations(f){const [{queryAssociations:w},
{default:D}]=await Promise.all([new Promise((A,z)=>b(["../rest/networks/queryAssociations"],A,z)),new Promise((A,z)=>b(["../rest/networks/support/QueryAssociationsParameters"],m=>A(J(m)),z))]);f=D.from(f);f.gdbVersion=this.gdbVersion;f.moment=this.historicMoment;return(await w(this.networkServiceUrl,f)).associations}async synthesizeAssociationGeometries(f){const [{synthesizeAssociationGeometries:w},{default:D}]=await Promise.all([new Promise((A,z)=>b(["../rest/networks/synthesizeAssociationGeometries"],
A,z)),new Promise((A,z)=>b(["../rest/networks/support/SynthesizeAssociationGeometriesParameters"],m=>A(J(m)),z))]);f=D.from(f);f.gdbVersion=this.gdbVersion;f.moment=this.historicMoment;return w(this.networkServiceUrl,f)}async trace(f){const [{trace:w},{default:D}]=await Promise.all([new Promise((A,z)=>b(["../rest/networks/trace"],A,z)),new Promise((A,z)=>b(["../rest/networks/support/TraceParameters"],m=>A(J(m)),z))]);f=D.from(f);f.gdbVersion=this.gdbVersion;f.moment=this.historicMoment;return w(this.networkServiceUrl,
f)}async submitTraceJob(f){const [{submitTraceJob:w},{default:D}]=await Promise.all([new Promise((A,z)=>b(["../rest/networks/trace"],A,z)),new Promise((A,z)=>b(["../rest/networks/support/TraceParameters"],m=>A(J(m)),z))]);f=D.from(f);f.gdbVersion=this.gdbVersion;f.moment=this.historicMoment;f=await w(this.networkServiceUrl,f);return new x({statusUrl:f})}async canAddAssociation(f){const w=await this.getRulesTable();if(!w)return!1;await w.load();const D=(z,m)=>z?1===z.terminalId?m?.terminalId?m?.terminalId===
z.terminalId:!0:z.terminalId===m?.terminalId:!m?.terminalId,A=(z,m)=>z.fromNetworkSource?.sourceId===m.fromNetworkElement?.networkSourceId&&z.toNetworkSource?.sourceId===m.toNetworkElement?.networkSourceId&&z.fromAssetGroup?.assetGroupCode===m.fromNetworkElement?.assetGroupCode&&z.fromAssetType?.assetTypeCode===m.fromNetworkElement?.assetTypeCode&&z.toAssetGroup?.assetGroupCode===m.toNetworkElement?.assetGroupCode&&z.toAssetType?.assetTypeCode===m.toNetworkElement?.assetTypeCode&&D(z.fromTerminal,
m.fromNetworkElement)&&D(z.toTerminal,m.toNetworkElement);return"containment"===f.associationType?w.rulesCategorized.containment.some(z=>A(z,f)):"attachment"===f.associationType?w.rulesCategorized.attachment.some(z=>A(z,f)):w.rulesCategorized.connectivity.some(z=>z.viaNetworkSource?z.fromNetworkSource?.sourceId===f.fromNetworkElement?.networkSourceId&&z.viaNetworkSource?.sourceId===f.toNetworkElement?.networkSourceId&&z.fromAssetGroup?.assetGroupCode===f.fromNetworkElement?.assetGroupCode&&z.fromAssetType?.assetTypeCode===
f.fromNetworkElement?.assetTypeCode&&z.viaAssetGroup?.assetGroupCode===f.toNetworkElement?.assetGroupCode&&z.viaAssetType?.assetTypeCode===f.toNetworkElement?.assetTypeCode&&D(z.fromTerminal,f.fromNetworkElement)&&D(z.viaTerminal,f.toNetworkElement)||z.viaNetworkSource?.sourceId===f.fromNetworkElement?.networkSourceId&&z.toNetworkSource?.sourceId===f.toNetworkElement?.networkSourceId&&z.viaAssetGroup?.assetGroupCode===f.fromNetworkElement?.assetGroupCode&&z.viaAssetType?.assetTypeCode===f.fromNetworkElement?.assetTypeCode&&
z.toAssetGroup?.assetGroupCode===f.toNetworkElement?.assetGroupCode&&z.toAssetType?.assetTypeCode===f.toNetworkElement?.assetTypeCode&&D(z.viaTerminal,f.fromNetworkElement)&&D(z.toTerminal,f.toNetworkElement):A(z,f))}generateAddAssociations(f){return{addFeatures:f.map(w=>new c({attributes:{fromnetworksourceid:w.fromNetworkElement?.networkSourceId,fromglobalid:w.fromNetworkElement?.globalId,fromterminalid:w.fromNetworkElement?.terminalId,tonetworksourceid:w.toNetworkElement?.networkSourceId,toglobalid:w.toNetworkElement?.globalId,
toterminalid:w.toNetworkElement?.terminalId,associationtype:u.AssociationTypeEnum[w.associationType],iscontentvisible:w.isContentVisible?1:0,percentalong:w.percentAlong,globalid:w.globalId}})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}generateDeleteAssociations(f){return{deleteFeatures:f.map(w=>({globalId:w.globalId})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:"globalid",objectIdField:"objectid"}}}async _loadNamedTraceConfigurationsFromNetwork(f){if(0!==
this.sharedNamedTraceConfigurations?.length){var w=this.sharedNamedTraceConfigurations.map(D=>D.globalId);f=await this.queryNamedTraceConfigurations({globalIds:w},f);for(const D of this.sharedNamedTraceConfigurations)if(w=f?.find(A=>A.globalId===D.globalId))w=w.write({},{origin:"service"}),D.read(w,{origin:"service"})}}async _createRulesTable(){const f=new h({url:this.networkSystemLayers.rulesTableUrl});await f.load();var w=this.dataElement?.domainNetworks;if(!w)return null;const D=w.flatMap(A=>[...(A.edgeSources||
[]),...(A.junctionSources||[])]);w=(await F(f)).map(A=>this._hydrateRuleInfo(f,D,A));return new k({layer:f,rules:w})}_hydrateRuleInfo(f,w,D){var A=f.fieldsIndex;f=A.get("RULETYPE");var z=A.get("CREATIONDATE"),m=A.get("FROMNETWORKSOURCEID"),G=A.get("FROMASSETGROUP"),H=A.get("FROMASSETTYPE"),L=A.get("FROMTERMINALID"),K=A.get("TONETWORKSOURCEID"),I=A.get("TOASSETGROUP");const O=A.get("TOASSETTYPE"),N=A.get("TOTERMINALID"),Q=A.get("VIANETWORKSOURCEID"),W=A.get("VIAASSETGROUP"),X=A.get("VIAASSETTYPE");
A=A.get("VIATERMINALID");f=D.attributes[f.name];z=new Date(D.attributes[z.name]);D=[{networkSourceId:D.attributes[m.name],assetGroupId:D.attributes[G.name],assetTypeId:D.attributes[H.name],terminalId:D.attributes[L.name]},{networkSourceId:D.attributes[K.name],assetGroupId:D.attributes[I.name],assetTypeId:D.attributes[O.name],terminalId:D.attributes[N.name]},{networkSourceId:D.attributes[Q.name],assetGroupId:D.attributes[W.name],assetTypeId:D.attributes[X.name],terminalId:D.attributes[A.name]}];let R;
(function(P){P[P.from=0]="from";P[P.to=1]="to";P[P.via=2]="via"})(R||={});m={ruleType:f,creationDate:z};for(const P of[R.from,R.to,R.via]){if(f!==u.RuleType.RTEdgeJunctionEdgeConnectivity&&P===R.via)continue;const U=D[P];G=w.find(T=>T.sourceId===U.networkSourceId);H=G?.assetGroups.find(T=>T.assetGroupCode===U.assetGroupId);L=H?.assetTypes.find(T=>T.assetTypeCode===U.assetTypeId);K=this._getTerminal(L,U);I="";switch(P){case R.from:I="from";break;case R.to:I="to";break;case R.via:I="via"}m[`${I}NetworkSource`]=
G;m[`${I}AssetGroup`]=H;m[`${I}AssetType`]=L;m[`${I}Terminal`]=K?.toJSON()}return m}_getTerminal(f,w){const D=f?.terminalConfigurationId;return this.terminalConfigurations?.find(A=>A.id===D)?.terminals?.find(A=>A.id===w.terminalId)??null}};a.__decorate([d.property({type:[C],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],e.prototype,"sharedNamedTraceConfigurations",void 0);a.__decorate([d.property({type:["utility"],
readOnly:!0,json:{read:!1,write:!1}})],e.prototype,"type",void 0);a.__decorate([d.property({readOnly:!0})],e.prototype,"serviceTerritoryFeatureLayerId",null);a.__decorate([d.property({readOnly:!0})],e.prototype,"networkSystemLayers",null);a.__decorate([d.property({readOnly:!0})],e.prototype,"terminalConfigurations",null);a.__decorate([d.property({readOnly:!0})],e.prototype,"domainNetworkNames",null);return e=a.__decorate([l.subclass("esri.networks.UtilityNetwork")],e)})},"esri/networks/Network":function(){define("require ../chunks/tslib.es6 ../geometry ../Graphic ../request ../core/Error ../core/Loadable ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/support/jsonUtils ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/TopologyValidationJobInfo ./support/utils ../versionManagement/support/versionManagementUtils ../geometry/SpatialReference".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k,C,q,B,x,u,y,F,J,f,w,D){function A(m,G){return new d({attributes:m.attributes,geometry:u.fromJSON({...m.geometry,spatialReference:G})})}const z=m=>Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"}));c=class extends h.MultiOriginJSONMixin(p){static fromPortalItem(m){return f.networkFromPortalItem(m)}constructor(m){super(m);this.historicMoment=this.gdbVersion=this.sourceJSON=this.type=this.spatialReference=this.fullExtent=
this.dataElement=this.layerUrl=this.title=this.id=null;this._sourceIdByLayerId=new Map;this._layerIdBySourceId=new Map;this._applyEditsHandler=G=>{const {serviceUrl:H,gdbVersion:L,result:K}=G;G=H===this.featureServiceUrl;const I=y.versionMatches(H,L,this.gdbVersion);G&&I&&K.then(O=>{w.isVersionInEditSession(H,L)&&(this.historicMoment=O.historicMoment)})};this._updateMomentHandler=G=>{const {serviceUrl:H,gdbVersion:L,moment:K}=G;G=H===this.featureServiceUrl;const I=y.versionMatches(H,L,this.gdbVersion);
G&&I&&(this.historicMoment=K)};this.when().then(()=>{this.addHandles([y.onApplyEditsEvent(this._applyEditsHandler),y.onUpdateMomentEvent(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(m=>{n.isAbortError(m)||l.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:m})})}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??
null}get parsedUrl(){return t.urlToObject(this.layerUrl)}get featureServiceUrl(){return F.parse(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return F.parse(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(m){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),m));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,
m));return this}getLayerIdBySourceId(m){if(!this.dataElement)return null;const G=this._layerIdBySourceId.get(m);if(null!=G)return G;m=this._traverseNetworkSources(this.dataElement.domainNetworks,this._layerIdBySourceId,"sourceId","layerId",m);return 0<=m?m:null}getSourceIdByLayerId(m){if(!this.dataElement)return null;const G=this._sourceIdByLayerId.get(m);if(null!=G)return G;m=this._traverseNetworkSources(this.dataElement.domainNetworks,this._sourceIdByLayerId,"layerId","sourceId",m);return 0<=m?
m:null}getObjectIdsFromElements(m){const G=[],H=new Map;for(const K of m){m=this.getLayerIdBySourceId(K.networkSourceId);if(null==m)continue;let I=H.get(m);void 0===I&&(I=[]);I.push(K.objectId);H.set(m,I)}const L=this.featureServiceUrl;H.forEach((K,I)=>G.push({layerUrl:`${L}/${I}`,objectIds:K}));return G}async queryNamedTraceConfigurations(m,G){const [{queryNamedTraceConfigurations:H},{default:L}]=await Promise.all([new Promise((I,O)=>b(["../rest/networks/queryNamedTraceConfigurations"],I,O)),new Promise((I,
O)=>b(["../rest/networks/support/QueryNamedTraceConfigurationsParameters"],N=>I(z(N)),O))]),K=this.networkServiceUrl;m=L.from(m);return(await H(K,m,{...G}))?.namedTraceConfigurations}async validateTopology(m,G){if(!m.validateArea)throw new r("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const [{validateNetworkTopology:H},{default:L}]=await Promise.all([new Promise((O,N)=>b(["../rest/networks/validateNetworkTopology"],O,
N)),new Promise((O,N)=>b(["../rest/networks/support/ValidateNetworkTopologyParameters"],Q=>O(z(Q)),N))]);var K=L.from(m);w.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(K.sessionID=w.currentSessionId,await w.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):K.sessionID=null;K.gdbVersion=this.gdbVersion;var I=this.networkServiceUrl;m=y.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!0);G=await H(I,K,{...G});if(G?.serviceEdits){K=[];for(const O of G.serviceEdits){({editedFeatures:I}=
O);const N=I?.spatialReference?new D(I.spatialReference):null;K.push({layerId:O.layerId,editedFeatures:{adds:I?.adds?.map(Q=>A(Q,N))||[],updates:I?.updates?.map(Q=>({original:A(Q[0],N),current:A(Q[1],N)}))||[],deletes:I?.deletes?.map(Q=>A(Q,N))||[],spatialReference:N}})}m.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:K,exceededTransferLimit:!1,historicMoment:G.moment})}return G}async submitTopologyValidationJob(m,
G){var H=null;if(!m.validateArea)throw new r("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");this.gdbVersion||(H=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),H=(await e(H,{responseType:"json",query:{f:"json"}})).data.defaultVersionName);const [{submitValidateNetworkTopologyJob:L},{default:K}]=await Promise.all([new Promise((O,N)=>b(["../rest/networks/validateNetworkTopology"],O,
N)),new Promise((O,N)=>b(["../rest/networks/support/ValidateNetworkTopologyParameters"],Q=>O(z(Q)),N))]);m=K.from(m);w.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(m.sessionID=w.currentSessionId,await w.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):m.sessionID=null;m.gdbVersion=this.gdbVersion||H;const I=this.networkServiceUrl;H=this.featureServiceUrl?y.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!0):void 0;G=await L(I,m,{...G});return new J({statusUrl:G,
editsResolver:H})}_traverseNetworkSources(m,G,H,L,K){for(const I of m)for(const O of[I.edgeSources??[],I.junctionSources??[]])for(const N of O)if(N[H]===K)return G.set(K,N[L]),N[L];return-1}async _fetchLayerMetaData(m,G){m=await e(m,{responseType:"json",query:{f:"json"},...G});this.sourceJSON=m.data;this.read(m.data,{origin:"service"})}async _fetchDataElement(m,G,H){this.dataElement||(m=await e(`${m}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([G]),f:"json"},...H}).then(L=>
L.data.layerDataElements?.[0]))&&this.read(m,{origin:"service"})}};a.__decorate([k.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],c.prototype,"id",void 0);a.__decorate([k.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],c.prototype,"title",void 0);a.__decorate([k.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},
write:{target:"url",isRequired:!0}}},read:!1}})],c.prototype,"layerUrl",void 0);a.__decorate([k.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],c.prototype,"dataElement",void 0);a.__decorate([k.property({type:x,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],c.prototype,"fullExtent",void 0);a.__decorate([k.property({type:D,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],c.prototype,"spatialReference",void 0);a.__decorate([k.property({type:["utility",
"trace"],readOnly:!0,json:{read:!1,write:!1}})],c.prototype,"type",void 0);a.__decorate([k.property({readOnly:!0})],c.prototype,"datasetName",null);a.__decorate([k.property({readOnly:!0})],c.prototype,"owner",null);a.__decorate([k.property({readOnly:!0})],c.prototype,"schemaGeneration",null);a.__decorate([k.property({readOnly:!0})],c.prototype,"parsedUrl",null);a.__decorate([k.property({readOnly:!0})],c.prototype,"featureServiceUrl",null);a.__decorate([k.property({readOnly:!0})],c.prototype,"networkServiceUrl",
null);a.__decorate([k.property({readOnly:!0})],c.prototype,"layerId",null);a.__decorate([k.property()],c.prototype,"sourceJSON",void 0);a.__decorate([k.property({readOnly:!0})],c.prototype,"networkSystemLayers",null);a.__decorate([k.property()],c.prototype,"gdbVersion",void 0);a.__decorate([k.property({type:Date})],c.prototype,"historicMoment",void 0);return c=a.__decorate([B.subclass("esri.networks.Network")],c)})},"esri/networks/support/TopologyValidationJobInfo":function(){define("../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/ValidateNetworkTopologyResult".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t){c=d.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});t=class extends t{constructor(k){super(k);this.lastUpdatedTime=this.submissionTime=this.status=this.statusUrl=null;this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(k){({data:k}=await a(this.statusUrl,{...k,query:{f:"json"}}));this.read(k);this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],
addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null});return this}async waitForJobCompletion(k={}){const {interval:C=1E3,statusCallback:q}=k;return new Promise((B,x)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||x(e.createAbortError());this.checkJobStatus().then(u=>{({status:u}=u);this.status=u;switch(u){case "job-succeeded":this._clearTimer();B(this);break;case "job-waiting":case "job-executing":q&&q(this)}},u=>{this._clearTimer();
x(u)})},C)})}_clearTimer(){clearInterval(this._timer);this._timer=void 0}};b.__decorate([r.property()],t.prototype,"editsResolver",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"statusUrl",void 0);b.__decorate([h.enumeration(c)],t.prototype,"status",void 0);b.__decorate([r.property({type:Date,json:{type:Number,write:{writer:(k,C)=>{C.submissionTime=k?k.getTime():null}}}})],t.prototype,"submissionTime",void 0);b.__decorate([r.property({type:Date,json:{type:Number,write:{writer:(k,
C)=>{C.lastUpdatedTime=k?k.getTime():null}}}})],t.prototype,"lastUpdatedTime",void 0);return t=b.__decorate([n.subclass("esri.networks.support.TopologyValidationJobInfo")],t)})},"esri/rest/networks/support/ValidateNetworkTopologyResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,
r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.moment=null;this.validateErrorsCreated=this.fullUpdate=!1;this.discoveredSubnetworks=this.serviceEdits=this.exceededTransferLimit=this.dirtyAreaCount=null}};b.__decorate([c.property({type:Date,json:{type:Number,write:{writer:(l,h)=>{h.moment=l?l.getTime():null}}}})],a.prototype,"moment",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],
a.prototype,"validateErrorsCreated",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"dirtyAreaCount",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"discoveredSubnetworks",void 0);return a=b.__decorate([p.subclass("esri.rest.networks.support.ValidateNetworkTopologyResult")],
a)})},"esri/networks/support/utils":function(){define("require exports ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),function(b,a,c,d,e,r,p){async function l(h,n){return"Utility Network Layer"===h?({default:h}=await new Promise((t,k)=>b(["../UtilityNetwork"],C=>t(Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}))),k)),new h({layerUrl:n})):null}a.getFeaturesFromLayers=
async function(h,n){const t=h.layers,k=h.layerInfos,C=h.returnGeometry||!1,q=h.outSpatialReference;await Promise.all(t.map(async B=>{await B.load()}));return(await Promise.all(t.map(async B=>{var x=k.find(y=>y.layerUrl===B.parsedUrl?.path);if(!x?.objectIds?.length)return{layer:B,featureSet:void 0};const u=B.createQuery();u.returnGeometry=C;u.outFields=x.outFields||["*"];u.outSpatialReference=q;u.gdbVersion=B.gdbVersion;u.objectIds=x.objectIds;n&&(u.where="1\x3d1");x=p.fromJSON(await e.queryAllJSON(B,
u));return{layer:B,featureSet:x}}))).filter(B=>void 0!==B.featureSet)};a.networkFromPortalItem=async function(h){h="portalItem"in h?h:{portalItem:h};!h.portalItem||h.portalItem instanceof r||(h={...h,portalItem:new r(h.portalItem)});h=h.portalItem;await h.load();if("Feature Service"!==h.type)throw new d("portal:unknown-item-type","Unknown item type '${type}'",{type:h.type});h=h.url;var n=await c(h,{responseType:"json",query:{f:"json"}});return n.data.type?.includes("Network Layer")?l(n.data.type,
h):n.data.layers&&(n=n.data.layers.find(t=>t.type.includes("Network Layer")))?l(n.type,`${h}/${n.id}`):null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/networks/RulesTable":function(){define("../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(b,a,c,d,e,r,p,l,h,n){c=class extends c.JSONSupportMixin(d){constructor(t){super(t);
this.rulesCategorized={attachment:[],containment:[],connectivity:[]};this.request=a}initialize(){}async load(t){t=this.layer.load(t).then(()=>this._initializeRulesTable());this.addResolvingPromise(t);return this}getFeatureSQL(t,k){var C=t.layerId.toString(),q=t.fieldsIndex?.normalizeFieldName("assetGroup");t=t.fieldsIndex?.normalizeFieldName("assetType");q=q?k.attributes[q]:null;k=t?k.attributes[t]:null;if(C=this.rulesHash[C])if(C=C.assetGroupHash[q])return C.assetTypeHash[k]||null;return null}async _initializeRulesTable(){const t=
{};let k;var C=k||={};C[C.from=0]="from";C[C.to=1]="to";C[C.via=2]="via";C=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const F of this.rules)if(F.ruleType===n.RuleType.RTAttachment)this.rulesCategorized.attachment.push(F);
else if(F.ruleType===n.RuleType.RTContainment)this.rulesCategorized.containment.push(F);else if(F.ruleType===n.RuleType.RTJunctionJunctionConnectivity)this.rulesCategorized.connectivity.push(F);else{this.rulesCategorized.connectivity.push(F);var q=[[k.from,k.to],[k.to,k.from]];F.ruleType===n.RuleType.RTEdgeJunctionEdgeConnectivity&&(q=[[k.from,k.via],[k.via,k.from],[k.to,k.via],[k.via,k.to]]);for(const J of q){q=J.shift();var B=J.shift(),x=!1;switch(F.ruleType){case n.RuleType.RTEdgeJunctionEdgeConnectivity:x=
q===k.from||q===k.to;break;case n.RuleType.RTJunctionEdgeConnectivity:x=q===k.to}var u=C[q];q=F[u.networkSourceId]?.layerId.toString()??"";const f=F[u.assetGroupId]?.assetGroupCode?.toString();u=F[u.assetTypeId]?.assetTypeCode?.toString();var y=C[B];B=F[y.networkSourceId]?.layerId.toString()??"";const w=F[y.assetGroupId]?.assetGroupCode?.toString();y=F[y.assetTypeId];const D=y?.assetTypeCode?.toString(),A=t[q]??{assetGroupHash:{}};if(!(f&&u&&w&&D))continue;const z=A.assetGroupHash[f]??{assetTypeHash:{}},
m=z.assetTypeHash[u]??{};m[B]=m[B]??{};x&&(m[q]=m[q]??{},x=`(assetgroup = ${f} AND assettype = ${u})`,"esriNECPEndVertex"===y?.connectivityPolicy?m[q].endVertex=m[q]?.endVertex?`${m[q].endVertex}`:`${x}`:m[q].anyVertex=m[q].anyVertex?`${m[q].anyVertex}`:`${x}`);x=`(assetgroup = ${w} AND assettype = ${D})`;"esriNECPEndVertex"===y?.connectivityPolicy?m[B].endVertex=m[B]?.endVertex?`${m[B].endVertex} OR ${x}`:`${x}`:m[B].anyVertex=m[B]?.anyVertex?`${m[B].anyVertex} OR ${x}`:`${x}`;z.assetTypeHash[u]=
m;A.assetGroupHash[f]=z;t[q]=A}}this.rulesHash=t}};b.__decorate([e.property({constructOnly:!0})],c.prototype,"layer",void 0);b.__decorate([e.property({constructOnly:!0})],c.prototype,"rules",void 0);b.__decorate([e.property()],c.prototype,"rulesHash",void 0);b.__decorate([e.property()],c.prototype,"rulesCategorized",void 0);b.__decorate([e.property({constructOnly:!0})],c.prototype,"request",void 0);return c=b.__decorate([h.subclass("esri.networks.RulesTable")],c)})},"esri/networks/support/typeUtils":function(){define(["exports",
"../../core/jsonMap"],function(b,a){b.RuleType=void 0;(function(p){p[p.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";p[p.RTAttachment=2]="RTAttachment";p[p.RTContainment=3]="RTContainment";p[p.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";p[p.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(b.RuleType||(b.RuleType={}));const c=new a.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",
subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"}),d=new a.JSONMap({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"}),e=Array.from({length:33},(p,l)=>2*l),r=new Map([[1,"connectivity"],[2,"containment"],
[3,"attachment"],[4,"junction-edge-from-connectivity"],[5,"junction-midspan-connectivity"],[6,"junction-edge-to-connectivity"]]);a=new a.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});b.AssociationOpenStatus=e;b.AssociationTypeDict=r;b.AssociationTypeEnum={connectivity:1,"junction-junction-connectivity":1,attachment:2,containment:3,"junction-edge-from-connectivity":4,"junction-midspan-connectivity":5,"junction-edge-to-connectivity":6};b.associationTypeKebabDict=d;b.traceTypeKebabDict=
c;b.validationTypeKebabDict=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(b,a,c,d,e,r,p,
l,h,n,t){a=class extends a.MultiOriginJSONSupport{constructor(k){super(k);this.minStartingPoints=this.description=this.creator=this.creationDate=this.traceConfiguration=this.title=this.globalId=null;this.resultTypes=[];this.tags=[];this.traceType=null}readTraceConfiguration(k,C){return void 0!==k.tierName?t.fromJSON(k):h.fromJSON(k)}};b.__decorate([c.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},
write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",void 0);b.__decorate([c.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);b.__decorate([c.property({type:h,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"traceConfiguration",void 0);b.__decorate([p.reader("service","traceConfiguration")],
a.prototype,"readTraceConfiguration",null);b.__decorate([c.property({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);b.__decorate([c.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);b.__decorate([c.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);b.__decorate([c.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},
write:{target:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",void 0);b.__decorate([c.property({json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);b.__decorate([c.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);b.__decorate([c.property({type:n.traceTypeKebabDict.apiValues,json:{type:n.traceTypeKebabDict.jsonValues,origins:{service:{read:n.traceTypeKebabDict.read,write:n.traceTypeKebabDict.write}},
read:!1}})],a.prototype,"traceType",void 0);return a=b.__decorate([l.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.conditionBarriers=
[];this.outputConditions=[];this.functions=[];this.functionBarriers=[];this.ignoreBarriersAtStartingPoints=this.validateConsistency=this.includeBarriers=this.shortestPathNetworkAttributeName=this.traversabilityScope=null}};b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"functions",
void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0);b.__decorate([c.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"includeBarriers",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],
a.prototype,"validateConsistency",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=b.__decorate([p.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),
function(b,a,c,d,e,r,p){c=class extends p{constructor(l){super(l);this.filterBarriers=[];this.filterBitsetNetworkAttributeName=this.domainNetworkName=this.arcadeExpressionBarrier=null;this.filterFunctionBarriers=[];this.nearestNeighbor=this.includeUpToFirstSpatialContainer=this.allowIndeterminateFlow=this.includeStructures=this.includeIsolated=this.includeContent=this.includeContainers=this.filterScope=null;this.outputFilterCategories=[];this.outputFilters=[];this.propagators=[];this.validateLocatability=
this.tierName=this.diagramTemplateName=this.targetTierName=this.subnetworkName=null}};b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"filterBarriers",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"arcadeExpressionBarrier",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"domainNetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"filterBitsetNetworkAttributeName",void 0);b.__decorate([a.property({type:[Object],
json:{write:!0}})],c.prototype,"filterFunctionBarriers",void 0);b.__decorate([a.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],c.prototype,"filterScope",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeContainers",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeContent",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeIsolated",void 0);b.__decorate([a.property({type:Boolean,
json:{write:!0}})],c.prototype,"includeStructures",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"allowIndeterminateFlow",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeUpToFirstSpatialContainer",void 0);b.__decorate([a.property({type:Object,json:{write:!0}})],c.prototype,"nearestNeighbor",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"outputFilterCategories",void 0);b.__decorate([a.property({type:[Object],
json:{write:!0}})],c.prototype,"outputFilters",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"propagators",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"subnetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"targetTierName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"diagramTemplateName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,
"tierName",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"validateLocatability",void 0);return c=b.__decorate([r.subclass("esri.networks.support.UNTraceConfiguration")],c)})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){a=class extends a{constructor(l){super(l);
this.associationsTableUrl=this.associationsTableId=this.dirtyAreasLayerUrl=this.dirtyAreasLayerId=this.subnetworksTableUrl=this.subnetworksTableId=this.rulesTableUrl=this.rulesTableId=null}};b.__decorate([c.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"subnetworksTableId",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",
void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"associationsTableId",void 0);b.__decorate([c.property({constructOnly:!0})],a.prototype,"associationsTableUrl",void 0);return a=b.__decorate([p.subclass("esri.networks.support.NetworkSystemLayers")],a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(b,a,c,d,e,r,p,l,h){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});c=class extends c.JSONSupport{constructor(n){super(n);this.name=this.id=this.defaultConfiguration=null;this.terminals=[];this.traversabilityModel=null}};b.__decorate([d.property({type:String,json:{write:!0}})],c.prototype,"defaultConfiguration",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],
c.prototype,"id",void 0);b.__decorate([d.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],c.prototype,"name",void 0);b.__decorate([d.property({type:[h],json:{write:!0}})],c.prototype,"terminals",void 0);b.__decorate([d.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],c.prototype,"traversabilityModel",void 0);return c=b.__decorate([l.subclass("esri.networks.support.TerminalConfiguration")],c)})},"esri/networks/support/Terminal":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.name=this.id=null}};b.__decorate([c.property({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],a.prototype,"id",void 0);b.__decorate([c.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=b.__decorate([p.subclass("esri.networks.support.Terminal")],
a)})},"esri/networks/support/TraceJobInfo":function(){define("../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/TraceResult".split(" "),function(b,a,c,d,e,r,p,l,h,n,t){c=d.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});
t=class extends t{constructor(k){super(k);this.lastUpdatedTime=this.submissionTime=this.status=this.statusUrl=null;this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(k){({data:k}=await a(this.statusUrl,{...k,query:{f:"json"}}));this.read(k.traceResults?{...k.traceResults,...k}:k);return this}async waitForJobCompletion(k={}){const {interval:C=1E3,statusCallback:q}=k;return new Promise((B,x)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||x(e.createAbortError());
this.checkJobStatus().then(u=>{({status:u}=u);this.status=u;switch(u){case "job-succeeded":this._clearTimer();B(this);break;case "job-waiting":case "job-executing":q&&q(this)}},u=>{this._clearTimer();x(u)})},C)})}_clearTimer(){clearInterval(this._timer);this._timer=void 0}};b.__decorate([r.property({type:String,json:{write:!0}})],t.prototype,"statusUrl",void 0);b.__decorate([h.enumeration(c)],t.prototype,"status",void 0);b.__decorate([r.property({type:Date,json:{type:Number,write:{writer:(k,C)=>{C.submissionTime=
k?k.getTime():null}}}})],t.prototype,"submissionTime",void 0);b.__decorate([r.property({type:Date,json:{type:Number,write:{writer:(k,C)=>{C.lastUpdatedTime=k?k.getTime():null}}}})],t.prototype,"lastUpdatedTime",void 0);return t=b.__decorate([n.subclass("esri.networks.support.TraceJobInfo")],t)})},"esri/rest/networks/support/TraceResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./AggregatedGeometry ./FunctionResult ./NetworkElement".split(" "),
function(b,a,c,d,e,r,p,l,h,n){a=class extends a.JSONSupport{constructor(t){super(t);this.globalFunctionResults=this.elements=this.aggregatedGeometry=null;this.startingPointsIgnored=this.kFeaturesForKNNFound=!1;this.warnings=null}};b.__decorate([c.property({type:l,json:{write:!0},readOnly:!0})],a.prototype,"aggregatedGeometry",void 0);b.__decorate([c.property({type:[n],json:{write:!0},readOnly:!0})],a.prototype,"elements",void 0);b.__decorate([c.property({type:[h],json:{write:!0},readOnly:!0})],a.prototype,
"globalFunctionResults",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0},readOnly:!0})],a.prototype,"kFeaturesForKNNFound",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0},readOnly:!0})],a.prototype,"startingPointsIgnored",void 0);b.__decorate([c.property({type:[String],json:{write:!0},readOnly:!0})],a.prototype,"warnings",void 0);return a=b.__decorate([p.subclass("esri.rest.networks.support.TraceResult")],a)})},"esri/rest/networks/support/AggregatedGeometry":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/Multipoint ../../../geometry/Polygon ../../../geometry/Polyline".split(" "),
function(b,a,c,d,e,r,p,l,h,n){a=class extends a.JSONSupport{constructor(t){super(t);this.polygon=this.multipoint=this.line=null}};b.__decorate([c.property({type:n,json:{write:!0},readOnly:!0})],a.prototype,"line",void 0);b.__decorate([c.property({type:l,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],a.prototype,"multipoint",void 0);b.__decorate([c.property({type:h,json:{write:!0},readOnly:!0})],a.prototype,"polygon",void 0);return a=b.__decorate([p.subclass("esri.rest.networks.support.AggregatedGeometry")],
a)})},"esri/rest/networks/support/FunctionResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.result=this.networkAttributeName=this.functionType=null}};b.__decorate([c.property({type:"add subtract average count min max".split(" "),
json:{write:!0},readOnly:!0})],a.prototype,"functionType",void 0);b.__decorate([c.property({type:String,json:{write:!0},readOnly:!0})],a.prototype,"networkAttributeName",void 0);b.__decorate([c.property({type:Number,json:{write:!0},readOnly:!0})],a.prototype,"result",void 0);return a=b.__decorate([p.subclass("esri.rest.networks.support.FunctionResult")],a)})},"esri/rest/networks/support/NetworkElement":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p){a=class extends a.JSONSupport{constructor(l){super(l);this.terminalId=this.positionTo=this.positionFrom=this.objectId=this.networkSourceId=this.globalId=this.assetTypeCode=this.assetGroupCode=null}};b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"assetGroupCode",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"assetTypeCode",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"globalId",void 0);b.__decorate([c.property({type:Number,
json:{write:!0}})],a.prototype,"networkSourceId",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"objectId",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"positionFrom",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"positionTo",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"terminalId",void 0);return a=b.__decorate([p.subclass("esri.rest.networks.support.NetworkElement")],a)})},
"esri/webdoc/GeotriggersInfo":function(){define("../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),function(b,a,c,d,e,r,p,l,h){a=class extends a.ClonableMixin(c.JSONSupport){constructor(n){super(n);this.geotriggers=null}};b.__decorate([d.property({types:[h.types],json:{write:{isRequired:!0}}})],a.prototype,
"geotriggers",void 0);return a=b.__decorate([l.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(b,a,c){b.types={base:c,key:"type",typeMap:{fence:a}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t,k){c=class extends n{constructor(C){super(C);this.enterExitRule="enter-contains-and-exit-does-not-intersect";this.feed=null;this.feedAccuracyMode="use-geometry";this.notificationOptions=this.name=this.fenceParameters=this.fenceNotificationRule=null;this.type="fence"}};b.__decorate([r.enumeration(k.enterExitRuleKebabDict)],c.prototype,"enterExitRule",void 0);b.__decorate([a.property({type:l,json:{write:{isRequired:!0}}})],c.prototype,"feed",void 0);b.__decorate([r.enumeration(k.feedAccuracyModeKebabDict)],
c.prototype,"feedAccuracyMode",void 0);b.__decorate([a.property({type:k.fenceNotificationRuleKebabDict.apiValues,json:{type:k.fenceNotificationRuleKebabDict.jsonValues,read:k.fenceNotificationRuleKebabDict.read,write:{writer:k.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],c.prototype,"fenceNotificationRule",void 0);b.__decorate([a.property({type:h,json:{write:{isRequired:!0}}})],c.prototype,"fenceParameters",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"name",
void 0);b.__decorate([a.property({type:t,json:{write:!0}})],c.prototype,"notificationOptions",void 0);b.__decorate([r.enumeration({fence:"fence"},{readOnly:!0})],c.prototype,"type",void 0);return c=b.__decorate([p.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],c)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(b,a,c,d,e,r,p,l,h,n){c=new c.JSONMap({deviceLocation:"device-location"});a=class extends a.ClonableMixin(d.JSONSupport){constructor(t){super(t);this.filterExpression=null;this.type="device-location"}};b.__decorate([e.property({type:n,json:{write:!0}})],a.prototype,"filterExpression",void 0);b.__decorate([e.property({type:c.apiValues,readOnly:!0,json:{type:c.jsonValues,read:c.read,write:c.write}})],a.prototype,"type",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],
a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p,l){a=class extends a.ClonableMixin(c.JSONSupport){constructor(h){super(h);this.expression=null;this.returnType="string";this.title=null}};b.__decorate([d.property({type:String,json:{write:{isRequired:!0}}})],
a.prototype,"expression",void 0);b.__decorate([d.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t){a=class extends a.ClonableMixin(c.JSONSupport){constructor(k){super(k);this.bufferDistance=this.filter=this.fenceSource=null;this.type="features"}};b.__decorate([d.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);b.__decorate([d.property({type:n,json:{write:!0}})],a.prototype,"filter",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);b.__decorate([l.enumeration({features:"features"},
{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(b,a,c,d,e,r,p,l,h,
n){c=class extends c.ClonableMixin(d.JSONSupport){constructor(t){super(t);this.where=this.geometry=null}};b.__decorate([e.property({types:a.geometryTypes,json:{read:n.fromJSON,write:!0}})],c.prototype,"geometry",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"where",void 0);return c=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],c)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,d,e,r,p,l,h){a=class extends a.ClonableMixin(c.JSONSupport){constructor(n){super(n);this.layerUrl=this.layerId=null;this.type="feature-layer"}};b.__decorate([d.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,"layerUrl",void 0);b.__decorate([l.enumeration({featureLayer:"feature-layer"},
{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,d,e,r,p,l,h){a=class extends a.ClonableMixin(c.JSONSupport){constructor(n){super(n);
this.type="fence"}};b.__decorate([l.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([h.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(b,a,c,d,e,r,p,l,h){a=class extends a.ClonableMixin(c.JSONSupport){constructor(n){super(n);this.requestedActions=this.expressionInfo=null}};b.__decorate([d.property({type:h,json:{write:!0}})],a.prototype,"expressionInfo",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(b,a){const c=new a.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),d=new a.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});a=new a.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});b.enterExitRuleKebabDict=
c;b.feedAccuracyModeKebabDict=d;b.fenceNotificationRuleKebabDict=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/IPSInfo":function(){define("../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./ips/PositioningService".split(" "),function(b,a,c,d,e,r,p,l,h){a=class extends a.ClonableMixin(c.JSONSupport){constructor(n){super(n);this.positioningService=
null}};b.__decorate([d.property({type:h,json:{write:{isRequired:!0}}})],a.prototype,"positioningService",void 0);return a=b.__decorate([l.subclass("esri.webdoc.IPSInfo")],a)})},"esri/webdoc/ips/PositioningService":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../portal/PortalItem".split(" "),
function(b,a,c,d,e,r,p,l,h,n,t){a=class extends a.ClonableMixin(c.JSONSupport){constructor(k){super(k);this.portalItem=null}readPortalItem(k,C,q){({itemId:k}=C);if(k)return new t({id:k,portal:q?.portal})}writePortalItem(k,C){k?.id&&(C.itemId=k.id)}};b.__decorate([d.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"portalItem",void 0);b.__decorate([l.reader("portalItem",["itemId"])],a.prototype,"readPortalItem",null);b.__decorate([n.writer("portalItem",{itemId:{type:String}})],a.prototype,
"writePortalItem",null);return a=b.__decorate([h.subclass("esri.webdoc.ips.PositioningService")],a)})},"esri/webmap/utils":function(){define(["exports","./Version"],function(b,a){a=new a.Version(2,32);b.currentVersion=a;b.isWebMap=function(c){return null!=c&&"object"===typeof c&&"declaredClass"in c&&"esri.WebMap"===c.declaredClass};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("./chunks/tslib.es6 ./WebDocument2D ./core/Collection ./core/Error ./core/loadAll ./core/accessorSupport/decorators/property ./core/has ./core/Logger ./core/RandomLCG ./core/accessorSupport/decorators/subclass ./networks/UtilityNetwork ./webdoc/GeotriggersInfo ./webdoc/IPSInfo ./webmap/InitialViewProperties ./webmap/utils ./webmap/Version".split(" "),function(b,a,c,d,e,r,p,l,h,n,t,k,C,q,B,x){const u={currentVersion:B.currentVersion,createInitialViewProperties:()=>new q,parseVersion:x.Version.parse,
itemType:"Web Map",name:"webmap",origin:"web-map"};c=c.ofType(t);a=class extends a{constructor(y){super(y);this.utilityNetworks=this.presentation=this.ipsInfo=this.geotriggersInfo=null}destroy(){if(this.utilityNetworks){const y=this.utilityNetworks.removeAll();for(const F of y)F.destroy();this.utilityNetworks.destroy()}}get context(){return u}loadAll(){return e.loadAll(this,y=>{y(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(y){if(y)return new this({resourceInfo:y});
throw new d("webmap:empty-resource","Expected a JSON resource but got nothing");}};a.VERSION=B.currentVersion;b.__decorate([r.property({type:k,json:{write:!0}})],a.prototype,"geotriggersInfo",void 0);b.__decorate([r.property({type:C,json:{write:!0,name:"mapIPSInfo"}})],a.prototype,"ipsInfo",void 0);b.__decorate([r.property({json:{write:!0}})],a.prototype,"presentation",void 0);b.__decorate([r.property({type:c,json:{read:!0,write:!0}})],a.prototype,"utilityNetworks",void 0);return a=b.__decorate([n.subclass("esri.WebMap")],
a)});